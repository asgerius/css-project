[{"tags": ["ruby-on-rails", "ruby", "node.js", "terminal", "osx-mavericks"], "comments": [{"owner": {"reputation": 1091, "user_id": 2159753, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Q620D.jpg?s=128&g=1", "display_name": "Frederik Voordeckers", "link": "https://stackoverflow.com/users/2159753/frederik-voordeckers"}, "edited": false, "score": 0, "creation_date": 1426066702, "post_id": 28867504, "comment_id": 46215179, "body": "Hmm, looks like I have the exact same issue. Can you run the &#39;npm&#39; command? It throws the error as well... did you find a solution?"}, {"owner": {"reputation": 3, "user_id": 4163047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkWcc.jpg?s=128&g=1", "display_name": "mxld", "link": "https://stackoverflow.com/users/4163047/mxld"}, "reply_to_user": {"reputation": 1091, "user_id": 2159753, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Q620D.jpg?s=128&g=1", "display_name": "Frederik Voordeckers", "link": "https://stackoverflow.com/users/2159753/frederik-voordeckers"}, "edited": false, "score": 0, "creation_date": 1426495638, "post_id": 28867504, "comment_id": 46379548, "body": "No, I cannot &amp; I have not found a solution yet."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 2364510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4dd9be0b8dc25e4b9f216e55c461355?s=128&d=identicon&r=PG", "display_name": "Andreas Lorenz", "link": "https://stackoverflow.com/users/2364510/andreas-lorenz"}, "is_accepted": true, "score": 3, "last_activity_date": 1426540238, "creation_date": 1426540238, "answer_id": 29086995, "question_id": 28867504, "link": "https://stackoverflow.com/questions/28867504/get-error-cannot-find-module-npmlog-when-installing-browserfy/29086995#29086995", "title": "Get Error: Cannot find module &#39;npmlog&#39; when installing Browserfy", "body": "<p>I had the same problem. After trying this link it worked: <a href=\"https://gist.github.com/DanHerbert/9520689\" rel=\"nofollow\">https://gist.github.com/DanHerbert/9520689</a></p>\n"}], "owner": {"reputation": 3, "user_id": 4163047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkWcc.jpg?s=128&g=1", "display_name": "mxld", "link": "https://stackoverflow.com/users/4163047/mxld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5743, "favorite_count": 0, "accepted_answer_id": 29086995, "answer_count": 1, "score": 0, "last_activity_date": 1426540238, "creation_date": 1425513573, "question_id": 28867504, "link": "https://stackoverflow.com/questions/28867504/get-error-cannot-find-module-npmlog-when-installing-browserfy", "title": "Get Error: Cannot find module &#39;npmlog&#39; when installing Browserfy", "body": "<p>When I type:</p>\n\n<pre><code> npm install -g browserify\n</code></pre>\n\n<p>My terminal spits this out:</p>\n\n<pre><code>module.js:338\n    throw err;\n          ^\nError: Cannot find module 'npmlog'\n    at Function.Module._resolveFilename (module.js:336:15)\n    at Function.Module._load (module.js:278:25)\n    at Module.require (module.js:365:17)\n    at require (module.js:384:17)\n    at /usr/local/lib/node_modules/npm/bin/npm-cli.js:18:11\n    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/npm/bin/npm-cli.js:75:3)\n    at Module._compile (module.js:460:26)\n    at Object.Module._extensions..js (module.js:478:10)\n    at Module.load (module.js:355:32)\n    at Function.Module._load (module.js:310:12)\n</code></pre>\n\n<p>I'm new to node. I have Node v0.12.0, Ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-darwin13.0], Rails 4.1.8. I'm using the terminal on a Mac. I have OS X 10.9.5, Mavericks.</p>\n\n<p>I've been trying some solutions I've found online but nothing has worked. I'd appreciate any help. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "cloud9-ide", "signer"], "answers": [{"tags": [], "owner": {"reputation": 3760, "user_id": 722657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034643609a3d51207127b00dfacce5f?s=128&d=identicon&r=PG", "display_name": "Mutahhir", "link": "https://stackoverflow.com/users/722657/mutahhir"}, "is_accepted": false, "score": 0, "last_activity_date": 1425536894, "creation_date": 1425536894, "answer_id": 28871374, "question_id": 28867087, "link": "https://stackoverflow.com/questions/28867087/unable-to-load-gems-in-cloud-9/28871374#28871374", "title": "Unable to load gems in cloud 9", "body": "<p>Adding the following line to the Gemfile within your Rails folder:</p>\n\n<pre><code>gem 'signer', '~&gt; 1.4.2'\n</code></pre>\n\n<p>and then running <code>bundle install</code> should remove the error.</p>\n"}], "owner": {"reputation": 109, "user_id": 2463732, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/24a454c6a919f7c31e25b5ef00175033?s=128&d=identicon&r=PG", "display_name": "user2463732", "link": "https://stackoverflow.com/users/2463732/user2463732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425536894, "creation_date": 1425511511, "question_id": 28867087, "link": "https://stackoverflow.com/questions/28867087/unable-to-load-gems-in-cloud-9", "title": "Unable to load gems in cloud 9", "body": "<p>I cannot load many ruby gems in Cloud 9's ruby on rails.</p>\n\n<p>For example I run </p>\n\n<pre><code>$ gem install signer\n</code></pre>\n\n<p>and get:</p>\n\n<pre><code>Successfully installed signer-1.4.2\n1 gem installed\n</code></pre>\n\n<p>but then when I try to call it with: </p>\n\n<pre><code>require \"signer\"\n</code></pre>\n\n<p>I get the following error upon running:</p>\n\n<pre><code>cannot load such file -- signer\n</code></pre>\n\n<p>I am getting desperate, any help would be immensely appreciated!</p>\n"}, {"tags": ["ruby", "bash", "maven", "vagrant"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425512429, "post_id": 28866868, "comment_id": 45999172, "body": "Why not add a task in your provisioning stack (Ansible, Chef, Puppet or otherwise, like Maven?) that sends out some kind of success trigger?"}, {"owner": {"reputation": 1035, "user_id": 1784958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99aa440767e3df3cda7da2becd75a753?s=128&d=identicon&r=PG&f=1", "display_name": "stalet", "link": "https://stackoverflow.com/users/1784958/stalet"}, "edited": false, "score": 0, "creation_date": 1425545066, "post_id": 28866868, "comment_id": 46009480, "body": "Could you just try to find the maven artifacts at the end of the provisioning ?"}, {"owner": {"reputation": 149, "user_id": 4312330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8sHg.jpg?s=128&g=1", "display_name": "Shufflepants", "link": "https://stackoverflow.com/users/4312330/shufflepants"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425572024, "post_id": 28866868, "comment_id": 46026185, "body": "@tadman I&#39;m not sure what you&#39;re suggesting. And even if I were, I don&#39;t know how to do that."}, {"owner": {"reputation": 149, "user_id": 4312330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8sHg.jpg?s=128&g=1", "display_name": "Shufflepants", "link": "https://stackoverflow.com/users/4312330/shufflepants"}, "reply_to_user": {"reputation": 1035, "user_id": 1784958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99aa440767e3df3cda7da2becd75a753?s=128&d=identicon&r=PG&f=1", "display_name": "stalet", "link": "https://stackoverflow.com/users/1784958/stalet"}, "edited": false, "score": 0, "creation_date": 1425573489, "post_id": 28866868, "comment_id": 46027120, "body": "@stalet I&#39;m still pretty new to maven, but I&#39;m not sure that solution would work for me. The maven projects that are being built are pulled down from a git repo regularly, and the artifact names may change from time to time. But maybe I&#39;ve misunderstood something."}], "owner": {"reputation": 149, "user_id": 4312330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8sHg.jpg?s=128&g=1", "display_name": "Shufflepants", "link": "https://stackoverflow.com/users/4312330/shufflepants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425510932, "creation_date": 1425510440, "last_edit_date": 1425510932, "question_id": 28866868, "link": "https://stackoverflow.com/questions/28866868/how-to-track-results-of-vagrant-provisioning", "title": "How To Track Results of Vagrant Provisioning", "body": "<p>I'm using Vagrant to download and install some maven projects on a local RHEL VM. At the end of all of the maven installs I would like to be able to print out a list of each maven project that was installs and show whether each one failed or succeeded.</p>\n\n<p>I suppose I could use some bash commands to capture the result with <code>\"$?\"</code>, then append that result to a file. Then after all the builds have finished, read the file and echo it out, but I was wondering if there were any less hacky solutions.</p>\n\n<p>The solution I would prefer most is if I could just capture the <code>\"$?\"</code> from the result of the <code>mvn install</code> and kick it back out to the ruby code of the vagrantfile so that it could just be stored in a local variable, then displayed later. But I'm no expert at ruby, vagrant, or bash.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "chartkick"], "answers": [{"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1425552478, "creation_date": 1425552478, "answer_id": 28876019, "question_id": 28866320, "link": "https://stackoverflow.com/questions/28866320/chartkick-google-geo-chart-is-it-possible-to-use-a-string-as-tooltip-value/28876019#28876019", "title": "Chartkick google geo-chart - is it possible to use a string as tooltip value?", "body": "<p>I think you are working in text mode, and in that case the second argument is the text size - so will need to be a number. From the documentation you link to:</p>\n\n<blockquote>\n  <p>Text mode format</p>\n  \n  <p>The label is entered in the first column, plus one optional column:</p>\n  \n  <p>Text label [String, Required] A specific string address (for example,\n  \"1600 Pennsylvania Ave\"). Text size [Number, Optional] The second\n  column is an optional numeric column used to assign the size of the\n  label. If this column is not present, all labels will be the same size.</p>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 4592686, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffe752322d8fe35957286ebd4e2335fc?s=128&d=identicon&r=PG&f=1", "display_name": "bcflow", "link": "https://stackoverflow.com/users/4592686/bcflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 788, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425552478, "creation_date": 1425508012, "question_id": 28866320, "link": "https://stackoverflow.com/questions/28866320/chartkick-google-geo-chart-is-it-possible-to-use-a-string-as-tooltip-value", "title": "Chartkick google geo-chart - is it possible to use a string as tooltip value?", "body": "<p>I'm using Chartkick to display this map using the Google api:</p>\n\n<pre><code>geo_chart @final_output, library: {backgroundColor: \"transparent\", width: 400}\n</code></pre>\n\n<p>Right now if I pass it a string as the 2nd value it won't work. But an integer will.</p>\n\n<pre><code>[['Canada','cat'],['United States',4]]  &lt;- first one won't work\n</code></pre>\n\n<p>Is there a way from rails to make this happen? I checked the google docs and chartkick and it does not mention it anywhere.</p>\n\n<p>Thanks!</p>\n\n<p>for Reference: <a href=\"https://developers.google.com/chart/interactive/docs/gallery/geochart#important\" rel=\"nofollow\">https://developers.google.com/chart/interactive/docs/gallery/geochart#important</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "actioncontroller"], "answers": [{"tags": [], "owner": {"reputation": 1287, "user_id": 3137549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/H7moE.png?s=128&g=1", "display_name": "rdnewman", "link": "https://stackoverflow.com/users/3137549/rdnewman"}, "is_accepted": true, "score": 4, "last_activity_date": 1425506940, "last_edit_date": 1495539873, "creation_date": 1425506940, "answer_id": 28866022, "question_id": 28865844, "link": "https://stackoverflow.com/questions/28865844/rails-not-rendering-404-in-production/28866022#28866022", "title": "Rails not rendering 404 in production", "body": "<p>As long as your app is running, your web server will not generate the 404.  </p>\n\n<p>If you want to have routing errors generate a 404, please see the discussion in this article: <a href=\"https://stackoverflow.com/questions/22748697/render-a-404-page-on-routing-error-in-rails\">render a 404 page on routing error in rails</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1425507216, "creation_date": 1425507216, "answer_id": 28866094, "question_id": 28865844, "link": "https://stackoverflow.com/questions/28865844/rails-not-rendering-404-in-production/28866094#28866094", "title": "Rails not rendering 404 in production", "body": "<p>Check your <code>config/environment/*.rb</code> file (correspond to your env). It should contain the following string:</p>\n\n<pre><code>config.consider_all_requests_local = false\n</code></pre>\n\n<p>Check that this value is set to <code>false</code>. In this case will be rendered <code>404.html</code> ot <code>500.html</code> files.</p>\n"}], "owner": {"reputation": 473, "user_id": 786457, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/397914ab2c94fa0992974af9d1ea6fb5?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/786457/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1195, "favorite_count": 0, "accepted_answer_id": 28866022, "answer_count": 2, "score": 2, "last_activity_date": 1425507216, "creation_date": 1425506357, "question_id": 28865844, "link": "https://stackoverflow.com/questions/28865844/rails-not-rendering-404-in-production", "title": "Rails not rendering 404 in production", "body": "<p>I have a rails app. When in production my app is throwing a routing error instead of rendering the 404.html or 500.html. Why would Rails be throwing the error instead of rendering the 404 page? (output from dev with <code>config.consider_all_requests_local = false</code>)</p>\n\n<pre><code>Started GET \"/asdfadsfdsaf\" for 127.0.0.1 at 2015-03-04 16:51:12 -0500\n\nActionController::RoutingError (No route matches [GET] \"/asdfadsfdsaf\"):\n ...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller"], "comments": [{"owner": {"reputation": 8028, "user_id": 18092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c64bdb2472e682117c58e4a07b8486?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/18092/fred"}, "edited": false, "score": 0, "creation_date": 1425505504, "post_id": 28865436, "comment_id": 45996159, "body": "Where is the <code>customer_helper?</code> method defined?"}, {"owner": {"reputation": 474, "user_id": 1239108, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d1d7a776f07f1065414bdab6cc72ef65?s=128&d=identicon&r=PG", "display_name": "mrtriangle", "link": "https://stackoverflow.com/users/1239108/mrtriangle"}, "reply_to_user": {"reputation": 8028, "user_id": 18092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c64bdb2472e682117c58e4a07b8486?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/18092/fred"}, "edited": false, "score": 0, "creation_date": 1425505817, "post_id": 28865436, "comment_id": 45996327, "body": "In application_helper.rb"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1425505964, "post_id": 28865436, "comment_id": 45996403, "body": "<code>current_customer</code> will return <code>nil</code> if <code>current_user.customer &amp;&amp; current_user.customer.master?</code> evaluates to true. I think that is you issue."}, {"owner": {"reputation": 474, "user_id": 1239108, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d1d7a776f07f1065414bdab6cc72ef65?s=128&d=identicon&r=PG", "display_name": "mrtriangle", "link": "https://stackoverflow.com/users/1239108/mrtriangle"}, "edited": false, "score": 0, "creation_date": 1425506098, "post_id": 28865436, "comment_id": 45996482, "body": "I just used binding.pry and you&#39;re right, NoMethodError: undefined method <code>customer&#39; for nil:NilClass from (pry):27:in </code>boolean_value?&#39;  Does this mean that current_user.customer.master? can&#39;t access the boolean_value column?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425506443, "post_id": 28865436, "comment_id": 45996675, "body": "Please explain you intentions because there are probably easier ways to handle this. right now your error is that <code>current_user</code> is nil thus no <code>customer</code> method. I pointed out that you have not return in <code>current_customer</code> but I think you need to relook at the code to determine why <code>current_user</code> is <code>nil</code> first."}], "answers": [{"tags": [], "owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "is_accepted": false, "score": 1, "last_activity_date": 1425508372, "creation_date": 1425508372, "answer_id": 28866423, "question_id": 28865436, "link": "https://stackoverflow.com/questions/28865436/cant-access-application-helper-method-in-view/28866423#28866423", "title": "Can&#39;t access Application Helper method in view", "body": "<p><code>current_user</code> is <code>nil</code> within the helper method.  I assume you are accessing this in a view where current_user has been exposed to the view from the controller.  The attributes exposed to the view must be passed into the helper methods; they are are not automatically made available there.</p>\n\n<p>If my assumptions are correct then your helper method should look something like this.</p>\n\n<pre><code>def customer_helper?(current_user)\n  (current_user &amp;&amp; current_user.customer.boolean_value?) \nend\n</code></pre>\n\n<p>You will then need to update the call to <code>customer_helper?</code> in your view to pass in the current_user.</p>\n"}], "owner": {"reputation": 474, "user_id": 1239108, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d1d7a776f07f1065414bdab6cc72ef65?s=128&d=identicon&r=PG", "display_name": "mrtriangle", "link": "https://stackoverflow.com/users/1239108/mrtriangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1425508372, "creation_date": 1425504819, "last_edit_date": 1425505830, "question_id": 28865436, "link": "https://stackoverflow.com/questions/28865436/cant-access-application-helper-method-in-view", "title": "Can&#39;t access Application Helper method in view", "body": "<p>I have a method that checks for a boolean value on a table, and it returns false in my Users views (everywhere else it returns true). I am having trouble understanding why it is accessible, but returns false.</p>\n\n<p>My code: </p>\n\n<p>Application Controller:</p>\n\n<pre><code>protected\n\ndef current_user\n\n  @current_user ||= User.find_by_id(session_user_id) if session_user_id\nend\n\nhelper_method :current_user\n\ndef current_customer\n  if current_user.customer and current_user.customer.master?\n  else\n    current_user.customer\n  end\nend\n\nhelper_method :current_customer\n</code></pre>\n\n<p>Application helper method:</p>\n\n<pre><code>def customer_helper?\n   (current_user &amp;&amp; current_user.customer.boolean_value?) \nend\n</code></pre>\n\n<p>the customer_helper? method returns false in all of my Users views, even though my UsersController inherits from ApplicationController.</p>\n\n<p>Any advice or help would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1425504865, "post_id": 28865214, "comment_id": 45995842, "body": "First, use the built-in <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/csv/rdoc/index.html\" rel=\"nofollow noreferrer\">CSV</a> class to properly read CSV files. It can return an array for each line in the file, making it easy to grab the fields."}], "answers": [{"comments": [{"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "edited": false, "score": 0, "creation_date": 1425506635, "post_id": 28865480, "comment_id": 45996773, "body": "The fact that there is a <code>minmax_by(&amp;block)</code> method is crazy and awesome."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "edited": false, "score": 0, "creation_date": 1425507256, "post_id": 28865480, "comment_id": 45997106, "body": "@Devon, so much of Ruby seems crazy and awesome, but over time more and more of it becomes just the tools of the trade. I recall being blown away by <code>each_with_object([])</code> when I first saw it, as a kid. Fortunately, there&#39;s always more crazy and awesome stuff to learn."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1425507327, "last_edit_date": 1425507327, "creation_date": 1425504992, "answer_id": 28865480, "question_id": 28865214, "link": "https://stackoverflow.com/questions/28865214/pull-min-and-max-value-from-csv-file/28865480#28865480", "title": "Pull min and max value from CSV file", "body": "<p><strong>Without using CSV</strong></p>\n\n<p>If I understand your question correctly, you don't have to use <code>CSV</code> class methods: just read the file (less header) into an array and  determine the min and max as follows:</p>\n\n<pre><code>arr = [\"123,hat,19.99\", \"321,cap,13.99\",\n       \"222,shoes,33.41\", \"255,shirt,19.95\"]\n\narr.map { |s| s.split(',').last.to_f }.minmax\n  #=&gt; [13.99, 33.41] \n</code></pre>\n\n<p>or</p>\n\n<pre><code>arr.map { |s| s[/\\d+\\.\\d+$/].to_f }.minmax\n  #=&gt; [13.99, 33.41]\n</code></pre>\n\n<p>If you want the associated records:</p>\n\n<pre><code>arr.minmax_by { |s| s.split(',').last.to_f }\n  =&gt; [\"321,cap,13.99\", \"222,shoes,33.41\"] \n</code></pre>\n\n<p><strong>With CSV</strong></p>\n\n<p>If you wish to use <code>CSV</code> to read the file into an array:</p>\n\n<pre><code>arr = [[\"123\", \"hat\",   \"19.99\"],\n       [\"321\", \"cap\",   \"13.99\"],\n       [\"222\", \"shoes\", \"33.41\"],\n       [\"255\", \"shirt\", \"19.95\"]]\n</code></pre>\n\n<p>then</p>\n\n<pre><code>arr.map(&amp;:last).minmax\n  # =&gt; [\"13.99\", \"33.41\"] \n</code></pre>\n\n<p>or</p>\n\n<pre><code>arr.minmax_by(&amp;:last)\n  #=&gt; [[\"321\", \"cap\",   \"13.99\"],\n  #    [\"222\", \"shoes\", \"33.41\"]]\n</code></pre>\n\n<p>if you want the records. Note that in the CSV examples I didn't convert the last field to a float, assuming that all records have two decimal digits.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425506535, "post_id": 28865668, "comment_id": 45996723, "body": "You don&#39;t need to convert the price to a float as long as all prices have two decimal digits, just <code>sort_by(&amp;:last)</code>.  Sorting is expensive, however, compared to <code>min</code> and <code>max</code> or <code>minmax</code>."}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425506741, "post_id": 28865668, "comment_id": 45996826, "body": "I agree with @CarySwoveland that this is unnecessarily expensive. It does give you a bit more to work with than just finding the largest and smallest, though, if your application needs it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1425507462, "post_id": 28865668, "comment_id": 45997207, "body": "@steenslag, yes on <code>minmax_by</code>. It&#39;s in my answer."}], "tags": [], "owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "is_accepted": false, "score": 2, "last_activity_date": 1425506545, "last_edit_date": 1425506545, "creation_date": 1425505648, "answer_id": 28865668, "question_id": 28865214, "link": "https://stackoverflow.com/questions/28865214/pull-min-and-max-value-from-csv-file/28865668#28865668", "title": "Pull min and max value from CSV file", "body": "<p>You should use the built-in CSV class as such:</p>\n\n<pre><code>require 'CSV'\n\ndata = CSV.read(\"text.txt\")\n\ndata.sort!{ |row1, row2| row1[2].to_f &lt;=&gt; row2[2].to_f }\n\nleast_expensive = data.first\nmost_expensive = data.last\n</code></pre>\n\n<p>The <code>Array#sort!</code> method modifies <code>data</code> in place, so it is sorted based on the condition in the block for later usage. As you can see, the block sorts based on the values in each row at index 2 - in your case, the prices. Incidentally, you don't need to convert these values to floats - strings will sort the same way. Using <code>to_f</code> stops working if you have leading non-digit characters (eg, <code>$</code>), so you might find it better just keep the values as strings during your sort.</p>\n\n<p>Then you can grab the most and least expensive, or the 5 most expensive, or whatever, at your leisure.</p>\n"}], "owner": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1425507327, "creation_date": 1425504030, "last_edit_date": 1425504762, "question_id": 28865214, "link": "https://stackoverflow.com/questions/28865214/pull-min-and-max-value-from-csv-file", "title": "Pull min and max value from CSV file", "body": "<p>I have a CSV file like:</p>\n\n<pre><code>123,hat,19.99\n321,cap,13.99\n</code></pre>\n\n<p>I have this code:</p>\n\n<pre><code> products_file = File.open('text.txt')\n while ! products_file.eof?\n line = products_file.gets.chomp\n puts line.inspect\n products[ line[0].to_i] = [line[1], line[2].to_f]\n   end\n products_file.close\n</code></pre>\n\n<p>which is reading the file. While it's not at the end of the file, it reads each line. I don't need the <code>line.inspect</code> in there. but it stores the file in an array inside of my products hash.</p>\n\n<p>Now I want to pull the min and max value from the hash.\nMy code so far is:</p>\n\n<pre><code>  read_file = File.open('text.txt', \"r+\").read\n   read_file.(?) |line|\n   products[ products.length] = gets.chomp.to_f\n   products.min_by { |x| x.size }\n   smallest = products\n  puts \"Your highest priced product is #{smallest}\"\n</code></pre>\n\n<p>Right now I don't have anything after <code>read_file.(?) |line|</code> so I get an error. I tried using <code>min</code> or <code>max</code> but neither worked. </p>\n"}, {"tags": ["ruby", "arrays", "sum"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1425503959, "post_id": 28865096, "comment_id": 45995345, "body": "This question is a good candidate for <a href=\"http://codereview.stackexchange.com\">codereview.stackexchange.com</a>."}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "edited": false, "score": 1, "creation_date": 1425504205, "post_id": 28865096, "comment_id": 45995486, "body": "I don&#39;t understand your logic here: <i>wants to buy 40 pieces and he wants it the cheapest way. It would mean (540*12+590*18+630*10)/50</i>"}, {"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 0, "creation_date": 1425504520, "post_id": 28865096, "comment_id": 45995678, "body": "Well if I were to buy 40 pieces of that good, I could buy them from the third vendor (he has 50 in stock), but I would&#39;ve to pay 630 for each. The cheapest vendor offers only 12 pieces of that good, meaning I can&#39;t fulfill my demand by buying only from the first. Thus, I have to mix - 12 pieces from the first, 18 pieces from the second and 10 pieces from the third vendor.  edit: it should be divided by 40, not 50! sorry for that!"}], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 1, "creation_date": 1425507297, "post_id": 28865931, "comment_id": 45997134, "body": "That&#39;s just...beautiful :) Thanks a lot!"}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": true, "score": 3, "last_activity_date": 1425506989, "last_edit_date": 1425506989, "creation_date": 1425506666, "answer_id": 28865931, "question_id": 28865096, "link": "https://stackoverflow.com/questions/28865096/sum-array-values-up-to-a-certain-total-amount/28865931#28865931", "title": "Sum array values up to a certain total amount", "body": "<p>Given your prices array of hashes:</p>\n\n<pre><code>prices = [  {price: 540, volume: 12},\n            {price: 590, volume: 18},\n            {price: 630, volume: 50}]\n</code></pre>\n\n<p>You can calculate your result in 2 steps.</p>\n\n<pre><code>def calc_price(prices, amount)\n  order = prices.flat_map{|item| [item[:price]] * item[:volume] } #step 1      \n  order.first(amount).reduce(:+)/amount #step 2\nend\n</code></pre>\n\n<p>Step 1: Create an array with each individual item in it (if the prices aren't sorted, you have to add a <code>sort_by</code> clause). In other words, expand the prices into a numeric array containing twelve 540's, 18 590's, etc. This uses Ruby's array repetition method: <code>[n] * 3 = [n, n, n]</code>.</p>\n\n<p>Step 2: Average the first n elements</p>\n\n<p>Result:</p>\n\n<pre><code>calc_price(prices, 40)\n=&gt; 585\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 28865931, "answer_count": 1, "score": 0, "last_activity_date": 1456238859, "creation_date": 1425503697, "last_edit_date": 1456238859, "question_id": 28865096, "link": "https://stackoverflow.com/questions/28865096/sum-array-values-up-to-a-certain-total-amount", "title": "Sum array values up to a certain total amount", "body": "<p>I've got an array of hashes (sorted), something like this:</p>\n\n<pre><code>testArray = [{price: 540, volume: 12},\n            {price: 590, volume: 18},\n            {price: 630, volume: 50}]\n</code></pre>\n\n<p>Now I want to calculate the mean value up to certain total volume. Let's say someone wants to buy 40 pieces and he wants it the cheapest way. It would mean an average price of (540*12+590*18+630*50)/40 money units.</p>\n\n<p>My first attempt is following:</p>\n\n<pre><code>testArray.each do |priceHash|\n    @priceArray &lt;&lt; priceHash.fetch(:price)\n    @volumeArray &lt;&lt; priceHash.fetch(:volume)\nend\n\n\ndef calculateMiddlePrice(priceArray, volumeArray, totalAmount)\nresult = 0\n\n# Here some crazy wild magic happens\n\n(0...volumeArray.count).inject(0) do |r, i| \n\n    if (volumeArray[0..i].inject(:+)) &lt; totalAmount\n\n        r += volumeArray[i]*priceArray[i]\n    elsif volumeArray[0..i-1].inject(:+) &lt; totalAmount &amp;&amp; volumeArray[0..i].inject(:+) &gt;= totalAmount \n\n        theRest = volumeArray[i] - (volumeArray[0..i].inject(:+) - totalAmount)\n        r += theRest * priceArray[i]\n    elsif volumeArray[0] &gt; totalAmount\n\n        r = totalAmount * priceArray[0]\n    end\n\n    result = r      \nend\nresult\nend\n</code></pre>\n\n<p>Right now I'm not even sure why it works, but it does. However this absolutely ridiculous code in my eyes. </p>\n\n<p>My second thought was to cut my testArray when the total amount is achieved. The code looks better</p>\n\n<pre><code>testAmount = 31\n\ndef returnIndexForSlice(array, amount)\n sum = 0\n\n array.each_index do |index|\n\n  p sum += array[index][:volume]\n  if sum &gt;= amount\n        return index+1\n  end\n end\nend\n\ntestArray.slice(0,returnIndexForSlice(testArray, testAmount))\n</code></pre>\n\n<p>Still, this just doesn't feel that right, \"rubyish\" if you could say so. I checked almost every method for array class, played around with bsearch, however I can't figure out a really elegant way of solving my problem.</p>\n\n<p>What's crossing my mind is something like that:</p>\n\n<pre><code>amountToCheck = 31\narray.some_method.with_index {|sum, index| return index if sum &gt;= amountToCheck}\n</code></pre>\n\n<p>But is there such method or any other way?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "oracle", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1425502696, "post_id": 28864678, "comment_id": 45994600, "body": "It makes it at least inefficient when you want to write a query like &quot;load all permissions for a given role&quot;. <code>has_and_belongs_to_many</code> would be right way."}], "answers": [{"tags": [], "owner": {"reputation": 12168, "user_id": 2772643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg8P7.png?s=128&g=1", "display_name": "victorkt", "link": "https://stackoverflow.com/users/2772643/victorkt"}, "is_accepted": true, "score": 2, "last_activity_date": 1425504433, "creation_date": 1425504433, "answer_id": 28865320, "question_id": 28864678, "link": "https://stackoverflow.com/questions/28864678/flexible-roles-and-permissions-database-schema/28865320#28865320", "title": "flexible roles and permissions database schema", "body": "<p>It is considered a bad practice in a relational database since this data is not normalised. As @spickermann pointed out, if you wanted all permissions for a given role it you be very difficult to query.</p>\n\n<p>Also, usually a Role has many Permissions and a Permission might belong to many roles, but it is weird to design just a Permission having many Roles.</p>\n\n<p>You should create a third table with the associations, like this:</p>\n\n<pre><code>Role\nid(pk)\nname(varchar)\ndescription(varchar)\n\nPermissions\nid(pk)\nName\nDescription\n\nRolePermissions\nrole_id(fk)\npermission_id(fk)\n</code></pre>\n\n<p>Check the guide <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">Active Record Associations</a>, it has many examples on the matter and how they are implemented in Ruby on Rails.</p>\n"}, {"tags": [], "owner": {"reputation": 2102, "user_id": 132235, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fa82129a285be4619d5009aa2e2083a9?s=128&d=identicon&r=PG", "display_name": "phlegx", "link": "https://stackoverflow.com/users/132235/phlegx"}, "is_accepted": false, "score": 0, "last_activity_date": 1425505232, "last_edit_date": 1425505232, "creation_date": 1425504908, "answer_id": 28865459, "question_id": 28864678, "link": "https://stackoverflow.com/questions/28864678/flexible-roles-and-permissions-database-schema/28865459#28865459", "title": "flexible roles and permissions database schema", "body": "<p>There is a gem on Rubygems called <code>rolify</code>. Here the gem: <a href=\"https://github.com/RolifyCommunity/rolify\" rel=\"nofollow\">https://github.com/RolifyCommunity/rolify</a></p>\n\n<p>And here the tables used by <code>rolify</code>:</p>\n\n<pre><code>class RolifyCreateRoles &lt; ActiveRecord::Migration\n\n  def change\n    create_table :roles do |t|\n      t.string :name, null: false\n      # With resource, a role can be assigned to a complete model class or to instances of it\n      t.references :resource, polymorphic: true\n      t.timestamps\n    end\n\n\n    create_table :users_roles do |t|\n      t.references :user, null: false\n      t.references :role, null: false\n      t.timestamps\n    end\n\n    add_index(:roles, :name)\n    add_index(:roles, [ :name, :resource_type, :resource_id ])\n    add_index(:users_roles, [ :user_id, :role_id ])\n  end\n\nend\n</code></pre>\n\n<p><strong>Add a role to a user</strong></p>\n\n<p>To define a global role:</p>\n\n<pre><code>user = User.find(1)\nuser.add_role :admin\n</code></pre>\n\n<p>To define a role scoped to a resource instance</p>\n\n<pre><code>user = User.find(2)\nuser.add_role :moderator, Forum.first\n</code></pre>\n\n<p>To define a role scoped to a resource class</p>\n\n<pre><code>user = User.find(3)\nuser.add_role :moderator, Forum\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 28865320, "answer_count": 2, "score": 0, "last_activity_date": 1523713604, "creation_date": 1425502291, "last_edit_date": 1523713604, "question_id": 28864678, "link": "https://stackoverflow.com/questions/28864678/flexible-roles-and-permissions-database-schema", "title": "flexible roles and permissions database schema", "body": "<p>I have a question about roles and permissions schema. I understand there are existing based schemas to do manage and define this.</p>\n\n<p>But I wanted to understand if there are potential issues or bad practices with the folllowing approach.</p>\n\n<p>Here is how I envision the role table to be like:</p>\n\n<pre><code>Role:\nid(pk)\nname(varchar)\ndescription(varchar)\n</code></pre>\n\n<p>This is my permissions table:</p>\n\n<pre><code>Permissions\nid(pk)\nrole_ids(array of role ids)\nName\nDescription\n</code></pre>\n\n<p>Each permission can belong to many roles.</p>\n\n<p>To identify the above, I am storing an array of role_ids in the role_ids field.</p>\n\n<p>Is the above pratice considered bad?</p>\n\n<p>Would it cause issues when adding new roles or assigning permissions to different roles. \nWill it be programatically inefficient to insert and delete from the above array?</p>\n\n<p>I looked up existing approaches but some of them seem too complicated for my simple use case.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "web"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425501348, "post_id": 28864203, "comment_id": 45993833, "body": "That should work fine excepting <code>#index</code> since it is not a single instance. That being said if the footer is through out the application you would always have to have <code>@juego</code> defined with an instance of <code>Juego</code> or at least something that responds to <code>nombre</code>"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1425502606, "post_id": 28864203, "comment_id": 45994544, "body": "<a href=\"http://blog.codinghorror.com/the-ugly-american-programmer/\" rel=\"nofollow noreferrer\">blog.codinghorror.com/the-ugly-american-programmer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 416, "user_id": 1031478, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8ebfd80989779e7e09777bc01ab21062?s=128&d=identicon&r=PG", "display_name": "ronan_mac", "link": "https://stackoverflow.com/users/1031478/ronan-mac"}, "is_accepted": false, "score": 0, "last_activity_date": 1425501583, "creation_date": 1425501583, "answer_id": 28864461, "question_id": 28864203, "link": "https://stackoverflow.com/questions/28864203/passing-instance-variables-from-a-controller-to-a-layout-footer/28864461#28864461", "title": "Passing Instance Variables from a Controller to a Layout / .footer?", "body": "<p>It depends on the context in which the footer is being rendered. If the footer is being rendered within the context of a controller action in which <code>@juego</code> is defined then you should be able to call methods on the object. Two things though.</p>\n\n<p>1) You are defining <code>@juego</code> differently in the different actions. In most of them it refers to a single object, whereas in the <code>index</code> method it refers to a collection of <code>@juego</code> objects. In this context, calling <code>@juego.nombre</code> will almost certainly fail.</p>\n\n<p>2) This is bad practice. If your footer is global (i.e. if it is being shared between different contexts), then you should not be presuming that variable specific to a certain controller is always defined. </p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 4458751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yr08mXOAVJU/AAAAAAAAAAI/AAAAAAAAABM/UThMsZucIo8/photo.jpg?sz=128", "display_name": "x4mp73r", "link": "https://stackoverflow.com/users/4458751/x4mp73r"}, "edited": false, "score": 0, "creation_date": 1425506894, "post_id": 28864823, "comment_id": 45996904, "body": "Thanks for your response, I use to render footer, and I mention it in &lt;% = render &#39;layouts / footer&#39;%&gt; in aplication.html.erb. What I wonder: is it possible to call directly from the footer? The footer is in another folder called layout."}], "tags": [], "owner": {"reputation": 5651, "user_id": 2308473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694fbf7ee4853cdb75ffd32a4a59bf7?s=128&d=identicon&r=PG", "display_name": "Ian Kenney", "link": "https://stackoverflow.com/users/2308473/ian-kenney"}, "is_accepted": true, "score": 1, "last_activity_date": 1425502812, "creation_date": 1425502812, "answer_id": 28864823, "question_id": 28864203, "link": "https://stackoverflow.com/questions/28864203/passing-instance-variables-from-a-controller-to-a-layout-footer/28864823#28864823", "title": "Passing Instance Variables from a Controller to a Layout / .footer?", "body": "<p>If the footer is used across the application then you can look at using</p>\n\n<p><strong>content_for / yield</strong></p>\n\n<p>in the footer:</p>\n\n<pre><code>&lt;h1&gt;&lt;%= yield :footer_title %&gt;&lt;/h1&gt;\n</code></pre>\n\n<p>in the view you can then set the title by controller / action something like </p>\n\n<pre><code>&lt;% content_for :footer_title { @juego.nombre } %&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;% content_for :footer_title do %&gt;\n  Another title\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4458751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yr08mXOAVJU/AAAAAAAAAAI/AAAAAAAAABM/UThMsZucIo8/photo.jpg?sz=128", "display_name": "x4mp73r", "link": "https://stackoverflow.com/users/4458751/x4mp73r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 28864823, "answer_count": 2, "score": -1, "last_activity_date": 1425502812, "creation_date": 1425500714, "question_id": 28864203, "link": "https://stackoverflow.com/questions/28864203/passing-instance-variables-from-a-controller-to-a-layout-footer", "title": "Passing Instance Variables from a Controller to a Layout / .footer?", "body": "<p>I am in a dilemma, I'm new and I wonder if you can pass variables to .footer driver, and bootstrap use, chiro display data in a label.\nThis is the code of the controller:</p>\n\n<pre><code>class JuegosController &lt; ApplicationController\nload_and_authorize_resource param_method: :allowed_params, except: [:index, :show]\n\ndef index\n    @juego = Juego.all\n\n\nend\n\ndef show\n    @juego = Juego.find(params[:id])\n\n\n\nend\n\ndef new\n    @juego = Juego.new      \nend\n\ndef create\n    @juego = Juego.new(allowed_params)\n    if @juego.save\n        redirect_to juegos_path\n    else\n        render 'new'            \n    end\nend\n\ndef edit\n    @juego = Juego.find(params[:id])\nend\n\ndef update\n    @juego = Juego.find(params[:id])\n    if @juego.update_attributes(allowed_params)\n        redirect_to juegos_path\n    else\n        redender 'new'\n    end\nend\n\ndef destroy\n    @juego = Juego.find(params[:id])\n    @juego.destroy\n    redirect_to juegos_path\nend\n\nprivate\n    def allowed_params\n        params.require(:juego).permit(:id_juego, :nombre, :descripcion, :numero_jugadores, :imagen )\n    end \n</code></pre>\n\n<p>end</p>\n\n<p>y este es el codigo del .footer :</p>\n\n<pre><code>  &lt;footer class=\"footer\" id=\"footer-new\"&gt;\n    &lt;div class=\"container-fluid\"&gt;\n      &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-md-3\"&gt;\n          &lt;h4&gt;ToyApp&lt;/h4&gt;\n          &lt;p&gt;\n            &lt;%= link_to 'Inicio',     page_path('home') %&gt;&lt;br&gt;\n            &lt;%= link_to 'Acerca de',  page_path('about') %&gt;&lt;br&gt;\n            &lt;%= link_to 'Contacto',   page_path('contact') %&gt;&lt;br&gt;\n            &lt;%= link_to 'Ayuda',      page_path('help') %&gt;&lt;br&gt;\n            &lt;%= link_to 'T\u00e9rminos',   page_path('terms') %&gt;\n          &lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-md-3\"&gt;\n\n          &lt;h4&gt;Juegos&lt;/h4&gt;\n          &lt;p&gt;\n\n\n          &lt;/p&gt;\n\n        &lt;/div&gt;\n\n\n        &lt;div class=\"col-md-6\" id=\"bottom-logo-block\"&gt;\n          &lt;img src=\"assets/images/a.png\" alt=\"\" width=\"80\" height=\"80\"&gt;\n          &lt;p&gt;\n            es una marca registrada. Esta prohibido su uso&lt;br&gt;\n          &lt;/p&gt;\n          &lt;%= link_to 'Pol\u00edticas de privacidad', page_path('privacy') %&gt;\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-12\"&gt;\n        &lt;br&gt;\n        &lt;p&gt;\n        xxxxxxxx xxxxxxxxx xxxxxx\n        &lt;/p&gt;\n    &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/footer&gt;\n</code></pre>\n\n<p>My question is: how to display the name of a label or h1?</p>\n\n<p>I tried with this but is not work :c</p>\n\n<pre><code>&lt;h1&gt;&lt;%= @juego.nombre %&gt;&lt;/h1&gt;\n</code></pre>\n\n<p>Help me please, I am newbie.</p>\n"}, {"tags": ["ruby", "null", "nomethoderror"], "answers": [{"comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1425500797, "post_id": 28864219, "comment_id": 45993502, "body": "That&#39;s the mistake I all the time did.. initially .. :p"}], "tags": [], "owner": {"reputation": 416, "user_id": 1031478, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8ebfd80989779e7e09777bc01ab21062?s=128&d=identicon&r=PG", "display_name": "ronan_mac", "link": "https://stackoverflow.com/users/1031478/ronan-mac"}, "is_accepted": false, "score": 1, "last_activity_date": 1425500757, "creation_date": 1425500757, "answer_id": 28864219, "question_id": 28864138, "link": "https://stackoverflow.com/questions/28864138/ruby-blackjack-game-nomethoderror/28864219#28864219", "title": "ruby blackjack game NoMethodError", "body": "<p>You are spelling your constructor <code>intitialize</code> which means it won't be called by the <code>.new</code> method. It should be <code>initialize</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4440346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnUgy.png?s=128&g=1", "display_name": "Aqua Cherry", "link": "https://stackoverflow.com/users/4440346/aqua-cherry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1425500757, "creation_date": 1425500491, "question_id": 28864138, "link": "https://stackoverflow.com/questions/28864138/ruby-blackjack-game-nomethoderror", "title": "ruby blackjack game NoMethodError", "body": "<p>Here is the class definition that is generating the error:</p>\n\n<pre><code>class Hand\n  attr_accessor :hand_cards, :hand_value\n\n  def intitialize\n    @hand_cards = []\n    @hand_value = 0\n  end\n\n  def to_s\n    \"The hand is #{hand_cards} and has a value of #{hand_value}\"\n  end\n\n  def add_card(new_card)\n    hand_cards &lt;&lt; new_card\n  end\n\n  def calculate_hand_value\n    hand_cards.each do |card|\n      case card[1]\n        when '2'\n        hand_value += 2\n        when '3'\n        hand_value += 3\n        when '4'\n        hand_value += 4\n        when '5'\n        hand_value += 5\n        when '6'\n        hand_value += 6\n        when '7'\n        hand_value += 7\n        when '8'\n        hand_value += 8\n        when '9'\n        hand_value += 9\n        when '10'\n        hand_value += 10\n        when 'J'\n        hand_value += 10\n        when 'Q'\n        hand_value += 10\n        when 'K'\n        hand_value += 10\n        when 'A'\n          if hand_value &lt;= 10\n            hand_value += 11\n          else\n            hand_value += 1\n          end\n      end   \n    end\n  end\nend\n</code></pre>\n\n<p>When I create a Hand object and try to use the add_card method, I receive this error: OO-blackjack2.rb:43:in <code>add_card': undefined method</code>&lt;&lt;' for nil:NilClass (NoMethodError)<br>\n        from OO-blackjack2.rb:108:in `'</p>\n\n<p>I assume this means hand_cards has a value of nil, but per my initialize definition it should be set to an empty array and accessible via attr_accessor.  Please let me know if you need to see the entire program.  Thanks.</p>\n"}, {"tags": ["ios", "ruby", "automation", "appium", "pry"], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 3655096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/586913053/picture?type=large", "display_name": "user3655096", "link": "https://stackoverflow.com/users/3655096/user3655096"}, "is_accepted": true, "score": 0, "last_activity_date": 1428346524, "last_edit_date": 1428346524, "creation_date": 1428346157, "answer_id": 29477557, "question_id": 28864043, "link": "https://stackoverflow.com/questions/28864043/appium-lib-with-xcode-6-page-elements-mssing/29477557#29477557", "title": "Appium_lib with Xcode 6 page elements mssing", "body": "<p>Page will only show those elements that the user can see. OR those that are on screen . If you have to scroll to see a cell, static text element etc.. it won't be available through page.</p>\n\n<p>The following worked for me:</p>\n\n<pre><code>   b = $driver.find_element :name, 'Sign In' \n   $driver.execute_script 'mobile: tap', :element =&gt; b.ref \n</code></pre>\n\n<p>However, I wouldn't recommend the above method if you're working with hybrid apps. I would suggest to switch to webview like this: set_context(available_contexts[1]). This will allow you to use css which doesn't need SWIPE or SCROLL To!! Only possible outside your \"NATIVE_APP\" though.</p>\n"}], "owner": {"reputation": 47, "user_id": 3655096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/586913053/picture?type=large", "display_name": "user3655096", "link": "https://stackoverflow.com/users/3655096/user3655096"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 29477557, "answer_count": 1, "score": 0, "last_activity_date": 1428346524, "creation_date": 1425500176, "question_id": 28864043, "link": "https://stackoverflow.com/questions/28864043/appium-lib-with-xcode-6-page-elements-mssing", "title": "Appium_lib with Xcode 6 page elements mssing", "body": "<p>I just started iOS Automation with Appium v1.3.5 by following the setup and sample app test tutorial that appium provides here - <a href=\"http://appium.io/slate/en/tutorial/ios.html?java#starting-the-console\" rel=\"nofollow\">http://appium.io/slate/en/tutorial/ios.html?java#starting-the-console</a>.</p>\n\n<p>Using Pry on the Appium Ruby Console page command to filter out elements I noticed that elements that were not on screen, meaning those  that i had to scroll down to were not being shown. The tutorial says that page class :UIAStaticText will bring back all the mentioned elements on the page but instead i get a nil for those elements not on my current screen. The scroll command has also failed me. But why scroll if i just want to return elements on the page. How can i accomplish this? Is it my simulator (iphone 6 iOS v8.1)? Is it Xcode? I know Xcode 6 has issues with appium. please help. Thanks!</p>\n\n<pre><code>  name, label, value: AAPLSliderViewController\n  UIAStaticText\n  name, label, value: Steppers\n  nil\n  [2] pry(main)&gt;\n</code></pre>\n\n<p>I am also missing the network traffic information. </p>\n\n<pre><code>  {\n   :script =&gt; \"UIATarget.localTarget().frontMostApp().windows()[0].getTree()\"\n   } \n   post /execute\n   {\n  :script =&gt; \"UIATarget.localTarget().frontMostApp().windows()[1].getTree()\"\n   }\n    post /execute\n   {\n   :script =&gt; \"mobile: getStrings\"\n    }\n</code></pre>\n"}, {"tags": ["ruby", "popen", "kill"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425499551, "post_id": 28863813, "comment_id": 45992789, "body": "Have you tried <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen3\" rel=\"nofollow noreferrer\"><code>popen3</code></a>? What&#39;s the result of your <code>kill</code> call? Are you sure you&#39;re targeting the correct PID? You may be killing the <code>nice</code> process but not the <code>java</code> one."}, {"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425504681, "post_id": 28863813, "comment_id": 45995767, "body": "Would <code>popen3</code> make any difference? I don&#39;t know too much about it. Does it work differently than the normal <code>popen</code> except for the 3 distinct IOs?"}], "answers": [{"comments": [{"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1425504617, "post_id": 28863995, "comment_id": 45995736, "body": "It did not help to remove the <code>nice</code> prepend. Any other ideas?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1425504894, "post_id": 28863995, "comment_id": 45995856, "body": "Compare your process list with the <code>pid</code> value you&#39;ve captured."}, {"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1425514830, "post_id": 28863995, "comment_id": 45999949, "body": "It is the right ones. Maybe I am using the wrong signals? Is <code>KILL</code> the best signal to use, or should I send <code>TERM</code> or something completely different? What will actually fore kill the process?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1425554303, "post_id": 28863995, "comment_id": 46015156, "body": "<code>KILL</code> is the most extreme version, it doesn&#39;t give the process a chance to shut down, and it can&#39;t be ignored. If that doesn&#39;t work, something odd is going on. Does an equivalent call from the command-line produce any meaningful errors? Are you sure the <code>kill</code> call is triggered?"}, {"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1425556300, "post_id": 28863995, "comment_id": 46016267, "body": "I am investigating some stuff now. I think I had an odd race-condition which seemed to boot new instances. I am trying to convert to popen3 and  structure my code differently. Hopefully that will take care of my issues."}, {"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 1, "creation_date": 1425579805, "post_id": 28863995, "comment_id": 46031135, "body": "So I refactored my stuff, and yes, it solved my problems. I was getting a race condition in my shutdown procedure which caused a new instance to boot up immediately. To solve this I went from using the non-block version of <code>IO.popen&#47;Open3.popen3</code> to the block version. This made my life a lot easier. The comment you made about &quot;are you sure you&#39;re targeting the correct PID&quot; is essentially the answer to this. Feel free to add it to the answer, and I will accept :)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1425583057, "last_edit_date": 1425583057, "creation_date": 1425500022, "answer_id": 28863995, "question_id": 28863813, "link": "https://stackoverflow.com/questions/28863813/ruby-force-close-io-popen-java-process/28863995#28863995", "title": "Ruby force close IO.popen java process", "body": "<p>What you may be seeing here is that you're killing the <code>nice</code> process and not the <code>java</code> process it launches.</p>\n\n<p>You could avoid this by launching the <code>java</code> process directly and then altering the nice level using <code>renice</code> on the PID you get.</p>\n\n<p>It's also worth checking that you're trying to kill the correct process. As you point out, spawning a second instance by accident would mean you're killing the wrong one.</p>\n\n<p>A tool like <code>popen3</code> allows for a lot more control over the child process and gives you the ability to feed input and capture output directly.</p>\n"}], "owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 28863995, "answer_count": 1, "score": 0, "last_activity_date": 1425583057, "creation_date": 1425499426, "last_edit_date": 1592644375, "question_id": 28863813, "link": "https://stackoverflow.com/questions/28863813/ruby-force-close-io-popen-java-process", "title": "Ruby force close IO.popen java process", "body": "<h2>How can I force quit/kill a java process that was stared with IO.popen(&quot;command&quot;, &quot;r+&quot;)?</h2>\n<p>I am running a script a small java program from ruby doing the following:</p>\n<pre><code>pipe = IO.popen(&quot;nice -n 19 java -Xmx2g -Djava.awt.headless=true -jar java_program.jar&quot;, 'r+')\n</code></pre>\n<p>Then I use stdio to send arguments back and forth, like this:</p>\n<pre><code>pipe.puts &quot;data&quot;\nresult = pipe.gets\n</code></pre>\n<p>This works fine for most data I send, but for some the java process seems to lock up or something, and I would like to force close / kill the java process.</p>\n<p>I am currently doing the following, which does not seem to kill the java process (from another thread which watches over this stuff):</p>\n<pre><code>thepid = nil\nthepid = pipe.pid            if pipe.respond_to?(:pid)\npipe.puts('')                if pipe.respond_to?(:puts) #This is the java_program's approach to closing, writing empty string to stdio will cause it to start it's shutdown procedure.\npipe.close                   if pipe.respond_to?(:close)\nProcess.kill('KILL', thepid) if thepid &amp;&amp; Process.getpgid( thepid )\n</code></pre>\n<p>The java process lingers and refuses to die. What can I do to actually force the process to exit (it uses lots of ram :( )</p>\n<h3>Also: Is there a cross platform way of doing this?</h3>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425499503, "post_id": 28863785, "comment_id": 45992750, "body": "Where and how is your helper method defined? If it&#39;s in a helper module file it should be accessible only within views."}, {"owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425499546, "post_id": 28863785, "comment_id": 45992785, "body": "app/helper/sessions_helper.rb"}, {"owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425499578, "post_id": 28863785, "comment_id": 45992805, "body": "It starts with <code>module SessionsHelper</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "edited": false, "score": 0, "creation_date": 1425499829, "post_id": 28863896, "comment_id": 45992941, "body": "That&#39;s weird, in <a href=\"https://www.railstutorial.org/book/log_in_log_out#sec-remember_token\" rel=\"nofollow noreferrer\">the tutorial I&#39;m following</a>, it shows helper methods being used in controllers."}, {"owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "edited": false, "score": 0, "creation_date": 1425499869, "post_id": 28863896, "comment_id": 45992970, "body": "Could you explain if their is any other way?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "edited": false, "score": 0, "creation_date": 1425499877, "post_id": 28863896, "comment_id": 45992980, "body": "Pretty sure that&#39;s wrong. Helper methods are best called &quot;view helper methods&quot;. If you need this method in the controller context, define it within the controller or any parent controller."}, {"owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "edited": false, "score": 0, "creation_date": 1425499906, "post_id": 28863896, "comment_id": 45992993, "body": "Ok then. But by calling it a helper method in a controller, will it work in views?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "edited": false, "score": 0, "creation_date": 1425499920, "post_id": 28863896, "comment_id": 45993004, "body": "Yes, <code>helper_method</code> makes the same method available within views. Saves having to put it in the helper module as well. Don&#39;t Repeat Yourself, after all."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1425499701, "creation_date": 1425499701, "answer_id": 28863896, "question_id": 28863785, "link": "https://stackoverflow.com/questions/28863785/not-able-to-access-helper-methods-in-rails/28863896#28863896", "title": "Not able to access helper methods in Rails", "body": "<p>Helper methods are only available within views. If you need it within views and controllers, you must define it within a controller, then declare it a helper method as well:</p>\n\n<pre><code>class ApplicationController\n  def current_student\n    # ...\n  end\n  helper_method :current_student\nend\n</code></pre>\n"}], "owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 28863896, "answer_count": 1, "score": 0, "last_activity_date": 1425499704, "creation_date": 1425499331, "last_edit_date": 1425499704, "question_id": 28863785, "link": "https://stackoverflow.com/questions/28863785/not-able-to-access-helper-methods-in-rails", "title": "Not able to access helper methods in Rails", "body": "<p>I'm working through <a href=\"https://www.railstutorial.org/book/log_in_log_out#sec-remember_token\" rel=\"nofollow\">RailTutorial.org</a>, and in section 8, it has you create helper methods and use them in your controller. I am not able to access any of them</p>\n\n<p>Controller line: <code>if current_student.admin?</code>\nHelper method:</p>\n\n<pre><code>module SessionsHelper\n  [...]\n  def current_student\n    if session[:student_id]\n      @current_student ||= Student.find_by(id: session[:student_id])\n    elsif cookies.signed[:student_id]\n      student = Student.find_by(id: cookies.signed[:student_id])\n      if student &amp;&amp; student.authenticated?(cookies[:remember_token])\n        log_in student\n        @current_student = student\n      end\n    end\n  end\n  [...]\nend\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "luhn"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 29, "user_id": 991965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b6ec4782443ab942eb58c7bbfc02da?s=128&d=identicon&r=PG", "display_name": "gigaimage", "link": "https://stackoverflow.com/users/991965/gigaimage"}, "edited": false, "score": 0, "creation_date": 1425505373, "post_id": 28863792, "comment_id": 45996100, "body": "the <code>map</code> was to point out that it works not sure why you could not get it to work. Otherwise you just call the method eg. <code>generate_non_zero_luhn</code> this will always return a single luhn number not preceded by a zero."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1425505412, "last_edit_date": 1425505412, "creation_date": 1425499354, "answer_id": 28863792, "question_id": 28863515, "link": "https://stackoverflow.com/questions/28863515/how-to-create-conditional-loop-for-luhn-object-to-check-if-index0-is-not-0/28863792#28863792", "title": "how to create conditional loop for Luhn object to check if index[0] is not 0", "body": "<p>Will this work for you? (Very basic recursion)</p>\n\n<pre><code>require 'luhn'\ndef generate_non_zero_luhn(size=9)\n  m = Luhn.generate(size)\n  m[0] != \"0\" &amp;&amp; Luhn.valid?(m) ? m : generate_non_zero_luhn(size)\nend\n</code></pre>\n\n<p><strong>Example Outputs</strong></p>\n\n<pre><code>10.times.map { generate_non_zero_luhn }\n#=&gt; [\"582428355\", \"353646136\", \"821379013\", \"818135220\", \"696652767\", \n     \"934766437\", \"885229401\", \"226319044\", \"682121645\", \"688197078\"]\n</code></pre>\n\n<p>Although I think the validity check is not needed because <code>Luhn</code> is generating the number so it will always be valid. e.g.</p>\n\n<pre><code>1_000_000.times.map { Luhn.valid?(Luhn.generate(9))}.any?{|val| !val}\n#=&gt; false\n</code></pre>\n\n<p>So then the method can become</p>\n\n<pre><code>def generate_non_zero_luhn(size=9)\n  m = Luhn.generate(size)\n  m[0] != \"0\" ? m : generate_non_zero_luhn(size)\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 991965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b6ec4782443ab942eb58c7bbfc02da?s=128&d=identicon&r=PG", "display_name": "gigaimage", "link": "https://stackoverflow.com/users/991965/gigaimage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 28863792, "answer_count": 1, "score": -2, "last_activity_date": 1425513159, "creation_date": 1425498460, "last_edit_date": 1425513159, "question_id": 28863515, "link": "https://stackoverflow.com/questions/28863515/how-to-create-conditional-loop-for-luhn-object-to-check-if-index0-is-not-0", "title": "how to create conditional loop for Luhn object to check if index[0] is not 0", "body": "<p>I am using a Luhn lib from Github. \nLuhn class has more methods but I am intersted in only \"generate\" and \"valid?\" methods.</p>\n\n<pre><code>  m = Luhn.generate(9) # generates a random number like [123456789] or [098765432]\n  Luhn.valid?(m)   # returns true or false based on Luhn checksum passing\n</code></pre>\n\n<p>But I don't want the generated number starts with \"0\".</p>\n\n<p>so how do I put in my ruby script:</p>\n\n<ol>\n<li>Discard the generated number that starts with <code>\"0\"</code>. </li>\n<li>Generate another number and check again until <code>m[0]</code> is non-zero.</li>\n<li>run <code>valid?()</code> on generated number: if false, generate another non-zero number until true.   </li>\n<li>return the valid 9 digits number to the caller code</li>\n</ol>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "watir-webdriver", "xvfb"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1425514558, "post_id": 28863077, "comment_id": 45999864, "body": "Since the stacktrace points at your <code>hooks.rb</code> (and <code>misc_step_def.rb</code>), you should edit your question and show that file."}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1425882452, "post_id": 28863077, "comment_id": 46127746, "body": "Why would you resize the browser when you run it headless?"}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1425884508, "post_id": 28863077, "comment_id": 46128414, "body": "Nevermind. I found that it&#39;s used for screenshots. I think we need to see that step def for &#39;I resize the browser&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 5410181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb30c7ed1706eee1c8336b91106812d1?s=128&d=identicon&r=PG", "display_name": "modusAndrew", "link": "https://stackoverflow.com/users/5410181/modusandrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1466179220, "last_edit_date": 1495542698, "creation_date": 1466179220, "answer_id": 37885841, "question_id": 28863077, "link": "https://stackoverflow.com/questions/28863077/running-cucumber-watir-webdriver-on-jenkins-using-xvfb-headless-gem/37885841#37885841", "title": "Running Cucumber/Watir-Webdriver on Jenkins using Xvfb (headless gem)", "body": "<p>I would take a look at the answer to this question as it your error is the same save for the different port number</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26859919/opening-several-threads-with-watir-webdriver-results-in-connection-refused-err\">Opening several threads with watir-webdriver results in &#39;Connection refused&#39; error</a></p>\n\n<p>It looks like you maybe have multiple browsers trying to access the same port at the same time. Adding a sleep might fix it, but is not a best-practice solution. I would more clearly define your port numbers that each browser connects to.</p>\n"}], "owner": {"reputation": 1765, "user_id": 1507704, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/785573f088dadbefb15252caa1fcbbfc?s=128&d=identicon&r=PG", "display_name": "Farooq", "link": "https://stackoverflow.com/users/1507704/farooq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 593, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466179220, "creation_date": 1425497046, "last_edit_date": 1425499317, "question_id": 28863077, "link": "https://stackoverflow.com/questions/28863077/running-cucumber-watir-webdriver-on-jenkins-using-xvfb-headless-gem", "title": "Running Cucumber/Watir-Webdriver on Jenkins using Xvfb (headless gem)", "body": "<p>Trying to run Cucumber/Watir-Webdriver on Jenkins using Xvfb (headless gem)</p>\n\n<p>This is my env.rb:</p>\n\n<pre><code>require 'rubygems'\nrequire 'cucumber'\nrequire 'json'\nrequire 'watir-webdriver'\nrequire 'page-object'\nrequire 'page-object/page_factory'\nrequire 'allure-cucumber'\nrequire 'rspec'\nrequire 'data_magic'\nrequire 'fig_newton'\nrequire 'yaml'\nrequire 'headless'\n\nENVT = FigNewton.load('staging.yml')\nDATA = DataMagic.load('data.yml')\nKBA = YAML.load_file('config/data/kba.yml')\n\nheadless = Headless.new\nheadless.start\nbrowser = Watir::Browser.new :firefox\n\nBefore do\n  @browser = browser\nend\n\nat_exit do\n  @browser.close\n  headless.destroy\nend\n\nWorld(PageObject::PageFactory)\n</code></pre>\n\n<p>This is the error I'm getting:</p>\n\n<pre><code>end of file reached (EOFError)\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/protocol.rb:153:in `read_nonblock'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/protocol.rb:153:in `rbuf_fill'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/protocol.rb:134:in `readuntil'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/protocol.rb:144:in `readline'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http/response.rb:39:in `read_status_line'\n  /lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/selenium-webdriver-2.45.0.dev3/lib/selenium/webdriver/remote/bridge.rb:640:in `raw_execute'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/selenium-webdriver-2.45.0.dev3/lib/selenium/webdriver/remote/bridge.rb:618:in `execute'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/selenium-webdriver-2.45.0.dev3/lib/selenium/webdriver/remote/bridge.rb:112:in `get'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/selenium-webdriver-2.45.0.dev3/lib/selenium/webdriver/common/navigation.rb:14:in `to'\n  /var/lib/jenkins/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/watir-webdriver-0.6.11/lib/watir-webdriver/browser.rb:77:in `goto'\n  /var/lib/jenkins/jobs/idme_revelator/workspace/features/support/hooks.rb:32:in `Before'\n    * I resize the browser                 # features/step_definitions/misc_step_defs.rb:1\n      Connection refused - connect(2) for \"127.0.0.1\" port 7055 (Errno::ECONNREFUSED)\n      ./features/step_definitions/misc_step_defs.rb:2:in `/^I resize the browser$/'\n</code></pre>\n\n<p>How do I need to setup my env file to correctly run Cucumber/Watir-Webdriver using the headless gem (Xvfb)?</p>\n\n<p>In some other attempts, errors have been related to undefined method 'goto', etc. In my tests other places like hooks.rb I use the variable @browser or @browser.driver, so I need those to work as well.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "heroku", "pdfkit"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425496542, "post_id": 28862699, "comment_id": 45991070, "body": "Can&#39;t help locally but as for deployment you might need a build pack for that. I use <code>pdftk</code> with heroku and it requires a custom build pack to actually create the application on the server. Also you might want to look at <a href=\"https://github.com/mileszs/wicked_pdf\" rel=\"nofollow noreferrer\"><code>wicked_pdf</code></a> I have heard good things when converting html to a pdf. Finally have you tried dropping the <code>C:</code> portion of the path because <code>&#47;</code> means root."}], "answers": [{"tags": [], "owner": {"reputation": 648, "user_id": 3848824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfS4l.jpg?s=128&g=1", "display_name": "Anuja Joshi", "link": "https://stackoverflow.com/users/3848824/anuja-joshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1426854051, "creation_date": 1426854051, "answer_id": 29166381, "question_id": 28862699, "link": "https://stackoverflow.com/questions/28862699/rails-4-heroku-pdf-generation-pdfkit/29166381#29166381", "title": "Rails 4 , Heroku, PDF Generation, PDFkit", "body": "<p>Problem is with <code>wkhtmltopdf.exe</code> path in <code>pdfkit.rb</code>, move your binary file to bin folder of the project(Create one, if it\u2019s not there. You can create any other folder too but then remember to change the path in the initializers.) and then specify same path in <code>pdfkit.rb</code> as follow:</p>\n\n<pre><code>PDFKit.configure do |config|\n  config.wkhtmltopdf = Rails.root.join('bin', 'wkhtmltopdf').to_s\n  config.default_options = {\n    :page_size =&gt; 'Legal',\n    :print_media_type =&gt; true\n  }\nend\n</code></pre>\n\n<p>You can refer <a href=\"http://blog.joshsoftware.com/2012/07/25/converting-html-to-pdf/\" rel=\"nofollow\">Converting HTML to PDF</a>.</p>\n"}], "owner": {"reputation": 267, "user_id": 1539727, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bc849e16841992763469bd55c39a9fe7?s=128&d=identicon&r=PG", "display_name": "Blake Geist", "link": "https://stackoverflow.com/users/1539727/blake-geist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426854051, "creation_date": 1425495732, "question_id": 28862699, "link": "https://stackoverflow.com/questions/28862699/rails-4-heroku-pdf-generation-pdfkit", "title": "Rails 4 , Heroku, PDF Generation, PDFkit", "body": "<p>I am trying to make a flyer creator app and am having a hard time getting the page to save as a pdf.</p>\n\n<p>After doing a bit of googling I found a couple options and landed on pdfkit. The rails casts video made it look very simple, then like always, being on a windows machine, I found it didn't exactly apply. I have tried a ton of tutorials but am still unable to get my local environment working.</p>\n\n<p>I eventually would like to deploy this solution to heroku and that seams to also require some extra steps.</p>\n\n<p>My gems include,</p>\n\n<pre><code>gem \"pdfkit\"\n</code></pre>\n\n<p>my application.rb includes </p>\n\n<pre><code>config.middleware.use \"PDFKit::Middleware\", :print_media_type =&gt; true\n</code></pre>\n\n<p>I have in my /config/initializers I have pdfkit.rb that contains </p>\n\n<pre><code>PDFKit.configure do |config|\n  config.wkhtmltopdf = 'C:/wkhtmltopdf/bin/wkhtmltopdf.exe'\n  config.default_options = {\n    :page_size =&gt; 'Legal',\n    :print_media_type =&gt; true\n  }\nend\n</code></pre>\n\n<p>Is there anything else needed I may have missed?</p>\n\n<p>I have seen the gem \"wkhtmltopdf-binary\" referenced in some tutorials, do I need this gem? what is it doing?</p>\n\n<p>I have installed the wkhtmltopdf application all over my computer at this point, I saw one tutorial that placed the install in the actual root of the app, in the root of my C: drive and elsewhere. Even when I think I got this part right at best I got the message </p>\n\n<pre><code>\"Exit with code 1 due to network error: ContentNotFoundError\"\n</code></pre>\n\n<p>I would really like some help getting PDFKit to work on my local environment, and then deploy that solution to heroku. Can anyone help?</p>\n\n<p>I can show any code snippets needed I am just unsure what would be helpful. </p>\n\n<p>In case it helps anyone here is a link to my work in progress site / an example page that I would like turned into a pdf.</p>\n\n<p><a href=\"http://www.easyflyerceator.com/carpet_cleaning_flyers/1/carpet_cleaning1s/4\" rel=\"nofollow\">http://www.easyflyerceator.com/carpet_cleaning_flyers/1/carpet_cleaning1s/4</a></p>\n"}, {"tags": ["javascript", "ruby", "popup", "watir"], "comments": [{"owner": {"reputation": 537, "user_id": 2367571, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c032f7d35ebf9da2ccccbf931a0b27d8?s=128&d=identicon&r=PG", "display_name": "khan", "link": "https://stackoverflow.com/users/2367571/khan"}, "edited": false, "score": 0, "creation_date": 1425495679, "post_id": 28862586, "comment_id": 45990562, "body": "for your info these is getting executed on IE-8"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1425498363, "post_id": 28862586, "comment_id": 45992119, "body": "are you doing require &#39;watir-webdriver&#39; or &#39;watir&#39; ?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1425499004, "post_id": 28862586, "comment_id": 45992461, "body": "What actually happens when you try the solutions mentioned on the Watir-Webdriver page - ie what does &quot;not working either&quot; mean? Is there an exception?"}, {"owner": {"reputation": 537, "user_id": 2367571, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c032f7d35ebf9da2ccccbf931a0b27d8?s=128&d=identicon&r=PG", "display_name": "khan", "link": "https://stackoverflow.com/users/2367571/khan"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1425558552, "post_id": 28862586, "comment_id": 46017495, "body": "@Titus requiring watir......."}, {"owner": {"reputation": 537, "user_id": 2367571, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c032f7d35ebf9da2ccccbf931a0b27d8?s=128&d=identicon&r=PG", "display_name": "khan", "link": "https://stackoverflow.com/users/2367571/khan"}, "edited": false, "score": 0, "creation_date": 1425558682, "post_id": 28862586, "comment_id": 46017569, "body": "In my script I have mention the command that has been specifed in watir-webdriver page,when the pop-up pops-up,in command line the next staement is not getting executed"}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 2367571, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c032f7d35ebf9da2ccccbf931a0b27d8?s=128&d=identicon&r=PG", "display_name": "khan", "link": "https://stackoverflow.com/users/2367571/khan"}, "edited": false, "score": 0, "creation_date": 1425750747, "post_id": 28882138, "comment_id": 46093712, "body": "I did the same I am unable to close the pop-up window I tried it manually through the &quot;CMD&quot; prompt it actually get closed when I require watir-weebdriver but unable to do when I require &#39;watir&#39; can u suggest how to close using &quot;Watir&quot; without switching to watir-webdriver"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 537, "user_id": 2367571, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c032f7d35ebf9da2ccccbf931a0b27d8?s=128&d=identicon&r=PG", "display_name": "khan", "link": "https://stackoverflow.com/users/2367571/khan"}, "edited": false, "score": 0, "creation_date": 1425936099, "post_id": 28882138, "comment_id": 46157722, "body": "I&#39;m confused, you started by referencing the watir-webdriver documentation. Webdriver is the future of browser automation, and will be implemented around the forthcoming w3c specification.   The watir-classic implementation is being maintained by Justin Ko, so if you have to use it for some reason, he&#39;s the person to help figure out your issue."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": true, "score": 0, "last_activity_date": 1425570952, "creation_date": 1425570952, "answer_id": 28882138, "question_id": 28862586, "link": "https://stackoverflow.com/questions/28862586/how-to-handle-message-from-webpage-pop-up-in-watir/28882138#28882138", "title": "How to Handle &#39;Message From Webpage&#39; pop-up in Watir", "body": "<p>Right now when you require 'watir' the api is implemented differently for Internet Explorer than it is for other browsers.</p>\n\n<p>You can either use:</p>\n\n<pre><code>require 'watir-webdriver'\n</code></pre>\n\n<p>or you can specify:</p>\n\n<pre><code>require 'watir'\nWatir.driver = :webdriver\n</code></pre>\n\n<p>This is something that you shouldn't have to do, and it will be fixed soon.</p>\n"}], "owner": {"reputation": 537, "user_id": 2367571, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c032f7d35ebf9da2ccccbf931a0b27d8?s=128&d=identicon&r=PG", "display_name": "khan", "link": "https://stackoverflow.com/users/2367571/khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 2, "accepted_answer_id": 28882138, "answer_count": 1, "score": 0, "last_activity_date": 1425992220, "creation_date": 1425495412, "last_edit_date": 1425497464, "question_id": 28862586, "link": "https://stackoverflow.com/questions/28862586/how-to-handle-message-from-webpage-pop-up-in-watir", "title": "How to Handle &#39;Message From Webpage&#39; pop-up in Watir", "body": "<p>Can anyone tell me how to handle the pop-up in Watir? I have tried all the ways that have been mentioned in the following site:</p>\n\n<pre><code>http://watirwebdriver.com/javascript-dialogs/\n</code></pre>\n\n<p>I have also gone through the other questions that have been mentioned on StackOverflow but they are not working either. </p>\n\n<p>it's a pop-up with the title \"Message from webpage\"</p>\n\n<p>I proceeded in the following way: I manually process through the command prompt, when I hit the button then the 'Message from Webpage' pops-up and I am unable to process any commands through the command prompt. </p>\n\n<p>See the below image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/oglNi.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby", "arrays", "foreach"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425495468, "post_id": 28862250, "comment_id": 45990419, "body": "How does it go from <code>[1,3]</code> to <code>[1,3,2]</code> when <code>x=3</code>? What do you mean by, &quot;it will not iterate again with x = 2&quot;? It would be helpful if you could (edit to) give an example for <code>get_transition</code>, and the associated desired output."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425495553, "post_id": 28862250, "comment_id": 45990474, "body": "@CarySwoveland I think the 2 is added in the <code>x=3</code> iteration by <code>fol.push(i)</code>. The problem is that it doesn&#39;t continue to the <code>x=2</code> iteration."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1425495659, "post_id": 28862250, "comment_id": 45990552, "body": "I should add that this code is very confusing, especially the part where you reassign <code>fol</code> inside the loop. It needs a total rewrite to be more idiomatic, but I can&#39;t tell from the context what you&#39;re trying to do."}, {"owner": {"reputation": 57, "user_id": 2823747, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7c0d1032e9e807e76e7dfe01c80e149e?s=128&d=identicon&r=PG&f=1", "display_name": "user2823747", "link": "https://stackoverflow.com/users/2823747/user2823747"}, "edited": false, "score": 0, "creation_date": 1425495678, "post_id": 28862250, "comment_id": 45990561, "body": "Yes the get_transition(3,&quot;&quot;) returns 2 which is then added to the array"}, {"owner": {"reputation": 57, "user_id": 2823747, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7c0d1032e9e807e76e7dfe01c80e149e?s=128&d=identicon&r=PG&f=1", "display_name": "user2823747", "link": "https://stackoverflow.com/users/2823747/user2823747"}, "edited": false, "score": 0, "creation_date": 1425496100, "post_id": 28862250, "comment_id": 45990810, "body": "What would you recommend in order to increase the readability. I need to reassign fol inside the loop because I need to iterate over all the elements that are added."}, {"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 1, "creation_date": 1425496207, "post_id": 28862250, "comment_id": 45990873, "body": "What is the meaning of <code>fol</code>? What are you trying to make and what are you trying to use it for? There is probably a <i>much</i> cleaner and shorter way to do it."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1425496227, "post_id": 28862250, "comment_id": 45990887, "body": "Well I tried running your code (using a simple <code>get_transition</code> method) and it <i>did</i> iterate over <code>x=2</code>. What Ruby version are you running? Can you post full code that we can actually run?"}, {"owner": {"reputation": 57, "user_id": 2823747, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7c0d1032e9e807e76e7dfe01c80e149e?s=128&d=identicon&r=PG&f=1", "display_name": "user2823747", "link": "https://stackoverflow.com/users/2823747/user2823747"}, "edited": false, "score": 0, "creation_date": 1425496477, "post_id": 28862250, "comment_id": 45991022, "body": "fol is simply an array of number (which represent states)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425496498, "post_id": 28862250, "comment_id": 45991037, "body": "You may think that <code>get_transition</code> is irrelevant, but without it we cannot run your code and compare results. If <code>get_transition</code> is a complex method, could you give us a simplified version of it?"}, {"owner": {"reputation": 57, "user_id": 2823747, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7c0d1032e9e807e76e7dfe01c80e149e?s=128&d=identicon&r=PG&f=1", "display_name": "user2823747", "link": "https://stackoverflow.com/users/2823747/user2823747"}, "edited": false, "score": 0, "creation_date": 1425496510, "post_id": 28862250, "comment_id": 45991047, "body": "I am running ruby 1.9.3 and I can post the entire code but it is rather long"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1425496890, "post_id": 28862250, "comment_id": 45991273, "body": "You can use a <a href=\"https://gist.github.com/\" rel=\"nofollow noreferrer\">gist</a> to share large code samples."}, {"owner": {"reputation": 57, "user_id": 2823747, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7c0d1032e9e807e76e7dfe01c80e149e?s=128&d=identicon&r=PG&f=1", "display_name": "user2823747", "link": "https://stackoverflow.com/users/2823747/user2823747"}, "edited": false, "score": 0, "creation_date": 1425497095, "post_id": 28862250, "comment_id": 45991379, "body": "Here is the gist link                                                                                                                 <a href=\"https://gist.github.com/anonymous/46c0cd1ae1ce76dfab23\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/46c0cd1ae1ce76dfab23</a>                             If that is easier for you to read"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 2823747, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7c0d1032e9e807e76e7dfe01c80e149e?s=128&d=identicon&r=PG&f=1", "display_name": "user2823747", "link": "https://stackoverflow.com/users/2823747/user2823747"}, "edited": false, "score": 0, "creation_date": 1425516191, "post_id": 28866114, "comment_id": 46000387, "body": "Thank you this worked perfectly. Exactly what I needed"}], "tags": [], "owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "is_accepted": true, "score": 3, "last_activity_date": 1425507271, "creation_date": 1425507271, "answer_id": 28866114, "question_id": 28862250, "link": "https://stackoverflow.com/questions/28862250/for-each-loop-with-increase-array/28866114#28866114", "title": "for each loop with increase array", "body": "<blockquote>\n  <p>I am trying to iterate through an array using a for each loop in ruby\n  but inside of the loop I am increasing the size of the array\n  conditionally. I want to iterate through the array until I have run\n  the iterate with every element in the array including all the ones I\n  have added</p>\n</blockquote>\n\n<p>Why not just treat this as a queue? That's pretty much what you've described</p>\n\n<pre><code>queue = fol.clone\nuntil queue.empty?\n  x = queue.pop\n  t = get_transition(x,\"\")\n  for i in t\n    if i != nil &amp;&amp; !fol.include?(i)\n       # Not too sure what type \"i\" is here, but you push onto the queue here\n       # I'd try to avoid flattening if you know what your data types are as it will be slow\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2823747, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7c0d1032e9e807e76e7dfe01c80e149e?s=128&d=identicon&r=PG&f=1", "display_name": "user2823747", "link": "https://stackoverflow.com/users/2823747/user2823747"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 28866114, "answer_count": 1, "score": 0, "last_activity_date": 1425516214, "creation_date": 1425494158, "last_edit_date": 1425516214, "question_id": 28862250, "link": "https://stackoverflow.com/questions/28862250/for-each-loop-with-increase-array", "title": "for each loop with increase array", "body": "<p>I am trying to iterate through an array using a for each loop in ruby but inside of the loop I am increasing the size of the array conditionally. I want to iterate through the array until I have run the iterate with every element in the array including all the ones I have added</p>\n\n<pre><code>for x in fol\n    t = get_transition(x,\"\")\n    for i in t\n        if i != nil &amp;&amp; !fol.include?(i)\n            fol = fol.push(i)\n            fol = fol.flatten\n        end\n    end\nend\n</code></pre>\n\n<p>In the first loop of this code the array </p>\n\n<pre><code>fol = [1]\n</code></pre>\n\n<p>and it adds the element 3 to the array creating </p>\n\n<pre><code>fol = [1, 3]\n</code></pre>\n\n<p>It will then run the loop again with x = 3 and the array becomes</p>\n\n<pre><code>fol = [1, 3, 2]\n</code></pre>\n\n<p>But it will not iterate again with x = 2.\nThank you in advance for any assistance</p>\n\n<p>For clarification purposes I have added in print statements and the output that they generate.</p>\n\n<pre><code>fol.each do |x|\n    puts \"fol = #{fol}\"\n    puts \"x = #{x}\"\n    t = get_transition(x,\"\")\n    puts \"t = #{t}\"\n    t.each do |i|\n        puts \"i = #{i}\"\n        if i != nil &amp;&amp; !fol.include?(i)\n            fol = fol.push(i)\n            fol = fol.flatten\n        end\n    end\nend\n\nputs \"\\nfol = #{fol}\"\n</code></pre>\n\n<p>This code generates this output</p>\n\n<pre><code>fol = [1]\nx = 1\nt = [3]\ni = 3\nfol = [1, 3]\nx = 3\nt = [2]\ni = 2\n\nfol = [1, 3, 2]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "railsapps", "learn-ruby-on-rails"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 4304753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wgXGK.jpg?s=128&g=1", "display_name": "Sergio Rodriguez", "link": "https://stackoverflow.com/users/4304753/sergio-rodriguez"}, "edited": false, "score": 0, "creation_date": 1425500253, "post_id": 28862288, "comment_id": 45993186, "body": "Great! Thanks for the answer!"}], "tags": [], "owner": {"reputation": 37836, "user_id": 24195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb4bebe360045a2dce663ee875f13723?s=128&d=identicon&r=PG", "display_name": "Rob Di Marco", "link": "https://stackoverflow.com/users/24195/rob-di-marco"}, "is_accepted": true, "score": 4, "last_activity_date": 1425494300, "creation_date": 1425494300, "answer_id": 28862288, "question_id": 28862222, "link": "https://stackoverflow.com/questions/28862222/instantiate-a-ruby-class-no-initialize-method-but-with-attr-accesors/28862288#28862288", "title": "Instantiate a ruby class no initialize method but with attr_accesors?", "body": "<p>You are including <code>ActiveModel::Model</code> which defines the <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Model.html#method-c-new\" rel=\"nofollow\">initialize</a> method that sets the values.</p>\n"}], "owner": {"reputation": 145, "user_id": 4304753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wgXGK.jpg?s=128&g=1", "display_name": "Sergio Rodriguez", "link": "https://stackoverflow.com/users/4304753/sergio-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 28862288, "answer_count": 1, "score": 0, "last_activity_date": 1425494300, "creation_date": 1425494073, "question_id": 28862222, "link": "https://stackoverflow.com/questions/28862222/instantiate-a-ruby-class-no-initialize-method-but-with-attr-accesors", "title": "Instantiate a ruby class no initialize method but with attr_accesors?", "body": "<p>The following code works but I don't understand why.</p>\n\n<p>The Model: I have a Class called Contact that doesn't have an initialize method (i.e it inherits the initialize method from the default Object class).</p>\n\n<pre><code>class Contact\n  include ActiveModel::Model\n  attr_accessor :name, :string\n  attr_accessor :email, :string\n  attr_accessor :content, :string\n\n  validates_presence_of :name\n  validates_presence_of :email\n  validates_presence_of :content\n  ... \nend\n</code></pre>\n\n<p>The controller: I have a ContactsController with a 'create' method that instantiates the Contact class passing along some parameters through the 'secure_params' method.</p>\n\n<pre><code>class ContactsController &lt; ApplicationController\n   def new\n     @contact = Contact.new\n   end\n\n   def create\n      # THIS IS THE LINE THAT I DON'T UNDERSTAND\n      @contact = Contact.new(secure_params)\n\n      if @contact.valid?\n\n         @contact.update_spreadsheet\n         UserMailer.contact_email(@contact).deliver\n         flash[:notice] = \"Message sent from #{@contact.name}.\"\n         redirect_to root_path\n      else\n        render :new\n      end\n end\n\n  private\n  def secure_params\n     params.require(:contact).permit(:name, :email, :content)\n   end\nend\n</code></pre>\n\n<p>Where do this parameters go to if there is no initialize method that sets them to instance variables and the default behavior of the 'new' method (inherited from the Ruby's Object class) does nothing with passed in parameters?</p>\n\n<p>Why do they end up being set as instance variables? (something to do with the attr_accesors?)</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"tags": [], "owner": {"reputation": 662, "user_id": 4467308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926e3460baba919e642f52ffda802cb1?s=128&d=identicon&r=PG&f=1", "display_name": "Sinatra", "link": "https://stackoverflow.com/users/4467308/sinatra"}, "is_accepted": false, "score": 0, "last_activity_date": 1457731435, "last_edit_date": 1457731435, "creation_date": 1425495139, "answer_id": 28862515, "question_id": 28862136, "link": "https://stackoverflow.com/questions/28862136/how-to-delete-a-row-from-csv-file/28862515#28862515", "title": "How to delete a row from CSV file", "body": "<p>Your delete is actually happening, but your currently running application is not aware of that yet.</p>\n\n<p>You can check that by restarting the app and/or by looking at the text file.</p>\n\n<p>To fix this, after writing to the file ends in the block, close the file so that the change is flushed:</p>\n\n<pre><code>read_file.each_line do |line|\n  write_file.write(line) unless line.include? item_num\nend\nwrite_file.close\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457731435, "creation_date": 1425493766, "last_edit_date": 1457731358, "question_id": 28862136, "link": "https://stackoverflow.com/questions/28862136/how-to-delete-a-row-from-csv-file", "title": "How to delete a row from CSV file", "body": "<p>I want to delete a row and write back to the file.</p>\n\n<p>When I delete it deletes all contents of the CSV file.</p>\n\n<pre><code>products = {}\n\n\ndef menu\n puts \"#{'Item'.ljust(6)} #{'Description'.ljust(10)} #{'Price'.rjust(7)}\"\n puts '-' * 4 + '   ' + '-' * 11 + '   ' + '-' * 5\nFile.open('text.txt').readlines.each do |itemnumber|\nputs itemnumber.gsub(/[,]/, '      ')\nend\nend\n\nuser_choice = 0\nwhile user_choice !=8\n puts ''\n puts 'What would you like to do?'\n puts '1: View all products.'\n puts '2: Add a new product.'\n puts '3: Delete a product.'\n puts '4: Update a product.'\n puts '5: View highest priced product.'\n puts '6: View lowest priced product.'\n puts '7: View sum of all products prices.'\n puts '8: Exit.'\n user_choice = gets.chomp.to_i\n\n if user_choice == 1\n  menu\n end\n\n\nif user_choice == 2\nputs ''\nputs 'Enter new products description. '\nnew_products = gets.chomp\nputs 'Enter new products price. '\nprice = gets.chomp.to_f\nnew_key = rand(100..999)\nwhile products.has_key?(new_key)\n  new_key = rand(100..999)\nend\nputs \"#{new_key},#{new_products},#{price}\"\nopen('text.txt', 'a') { |newproduct|\n  newproduct.puts \"#{new_key},#{new_products},#{price}\"\n}\nend\n\n\nif user_choice == 3\nmenu\nputs ''\nputs \"What's the item number you wish to delete?\"\nitem_num = gets.chomp\n\nread_file = File.new('text.txt', \"r+\").read\nwrite_file = File.new('text.txt', \"w+\")\n\nread_file.each_line do |line|\n  write_file.write(line) unless line.include? item_num\nend\nend\n</code></pre>\n\n<p>What am I doing wrong? In the \"delete\" part of the program, I'm sure there are multiple things wrong. </p>\n"}, {"tags": ["ruby", "json", "installation", "windows-7-x64"], "answers": [{"tags": [], "owner": {"reputation": 4277, "user_id": 1424229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d3d2ded5aff37fad9d6063a531c5a7?s=128&d=identicon&r=PG", "display_name": "Rob Wagner", "link": "https://stackoverflow.com/users/1424229/rob-wagner"}, "is_accepted": true, "score": 0, "last_activity_date": 1520534640, "last_edit_date": 1520534640, "creation_date": 1425495641, "answer_id": 28862670, "question_id": 28861974, "link": "https://stackoverflow.com/questions/28861974/i-am-getting-error-while-installing-json-by-gem-using-ruby/28862670#28862670", "title": "I am getting error while installing json by gem using Ruby", "body": "<p>This is a pretty common issue with rubygems recently changing their certificate authority.</p>\n\n<p>A detailed breakdown of the issue, and how to resolve it can be found <a href=\"https://gist.github.com/luislavena/f064211759ee0f806c88\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 1558998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSlRb.jpg?s=128&g=1", "display_name": "Nagmani Bhushan", "link": "https://stackoverflow.com/users/1558998/nagmani-bhushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 28862670, "answer_count": 1, "score": 1, "last_activity_date": 1520534640, "creation_date": 1425493304, "last_edit_date": 1425517030, "question_id": 28861974, "link": "https://stackoverflow.com/questions/28861974/i-am-getting-error-while-installing-json-by-gem-using-ruby", "title": "I am getting error while installing json by gem using Ruby", "body": "<ol>\n<li><p>I have Downloaded Ruby 2.1.5</p></li>\n<li><p>cmd check command: <code>ruby -v</code> returns result: ruby 2.1.5</p></li>\n<li><p>Downloaded DevKit file from here <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe</a></p></li>\n<li><p>Extract DevKit to path <code>C:\\Ruby\\DevKit</code></p></li>\n<li><p><code>cd C:\\Ruby\\DevKit</code></p></li>\n<li><p><code>ruby dk.rb init</code></p></li>\n<li><p><code>ruby dk.rb review</code></p></li>\n<li><p><code>ruby dk.rb install</code></p></li>\n</ol>\n\n<p>Up till this point, everything is okay but from now onward I am getting error. </p>\n\n<p>I am passing from command </p>\n\n<p>cmd : <code>gem install json</code></p>\n\n<p>and getting following error.</p>\n\n<pre><code>could not find a valid gem 'json'&lt;&gt;=0), here is why:\nUnable to download data from https://rubygems.org/- SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify faild(https:api.rubygem.org/specs.4.8.gz)\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3172463, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2HT8H.png?s=128&g=1", "display_name": "SORA", "link": "https://stackoverflow.com/users/3172463/sora"}, "edited": false, "score": 0, "creation_date": 1426758965, "post_id": 29045685, "comment_id": 46506389, "body": "Thanks, I replaced the t.references: user with add_reference(:products, :user) and it worked. I also didn&#39;t know about .merge. What&#39;s the difference between add_references and t.references?"}], "tags": [], "owner": {"reputation": 1626, "user_id": 3243476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/bWCzo.jpg?s=128&g=1", "display_name": "Norly Canarias", "link": "https://stackoverflow.com/users/3243476/norly-canarias"}, "is_accepted": true, "score": 0, "last_activity_date": 1426309697, "creation_date": 1426309697, "answer_id": 29045685, "question_id": 28861900, "link": "https://stackoverflow.com/questions/28861900/activerecord-on-sinatra-basic-associations-and-ids/29045685#29045685", "title": "ActiveRecord on Sinatra basic associations and IDs", "body": "<p>the <code>add_reference</code> part in your migration adds a user_id into the product</p>\n\n<p>in the app:</p>\n\n<pre><code>post \"/products\" do  \n  @product = Product.new(params[:product].merge(user_id: current_user.id))\n  if @product.save  \n    redirect \"products/#{@product.id}\"  \n  else  \n    redirect \"/createproduct\" \n</code></pre>\n\n<p>in the view:</p>\n\n<pre><code>&lt;%=h @product.name %&gt;\n&lt;%=h @product.quantity %&gt;\n&lt;%=h @product.user.name %&gt; \n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3172463, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2HT8H.png?s=128&g=1", "display_name": "SORA", "link": "https://stackoverflow.com/users/3172463/sora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 29045685, "answer_count": 1, "score": 0, "last_activity_date": 1426309697, "creation_date": 1425493083, "question_id": 28861900, "link": "https://stackoverflow.com/questions/28861900/activerecord-on-sinatra-basic-associations-and-ids", "title": "ActiveRecord on Sinatra basic associations and IDs", "body": "<p>I'm newbie Grails user trying out ActiveRecord on Sinatra.  </p>\n\n<p>Basically I want to make a CRUD app that allows a logged-in user to list down his products.  </p>\n\n<p>I made a Users table and a Products table, with Users and Products referencing each other.  When a user enters a product, ActiveRecord is supposed to populate the Product user_id column with the User's id.  </p>\n\n<p>Likewise, the User's table is supposed to show all the product_ids it has. But I don't know how to do this is Ruby because it was all automatic in Grails (The GORM created the Join Table).</p>\n\n<p>How is this done in Ruby on Sinatra? Is there an easier way to do it under Rails?  </p>\n\n<p>My code is below:</p>\n\n<h1>app.rb</h1>\n\n<pre><code>class User &lt; ActiveRecord::Base  \n  has_many :products  \n\nclass Product &lt; ActiveRecord::Base  \n  belongs_to :user  \n\nget \"/createproduct\" do  \n  if current_user  \n  @product = Product.new  \n  erb :\"createproduct\"  \nelse  \n  redirect(\"/login\")  \n\npost \"/products\" do  \n@product = Product.new(params[:product])  How to make user.id or name enter the params???  \n  if @product.save  \n    redirect \"products/#{@product.id}\"  \n  else  \n    redirect \"/createproduct\"  \n\nget \"/products/:id\" do  \n  @product = product.find(params[:id])  \n  erb :\"viewproduct\"  \n</code></pre>\n\n<h1>createproduct.erb</h1>\n\n<pre><code>&lt;input name=\"product[name]\" value=\"&lt;%= @product.name %&gt;\" style=\"width=90%\"&gt;\n&lt;input name=\"product[quantity]\" value=\"&lt;%= @product.quantity %&gt;\"&gt;\n</code></pre>\n\n<h1>viewproduct.erb</h1>\n\n<pre><code>&lt;%=h @product.name %  &gt;\n&lt;%=h @product.quantity %  &gt;\n&lt;%=h @user.name %&gt;  ????????  \n</code></pre>\n\n<h1>migrations</h1>\n\n<pre><code>class CreateProducts &lt; ActiveRecord::Migration  \ndef change  \ncreate_table :products do |t|  \n t.references :user  \n t.string :name  \n t.integer :quantity  \n\nclass CreateUsers &lt; ActiveRecord::Migration  \ndef change  \ncreate_table :users do |t|  \n  t.references :product  \n  t.string :name  \n  t.string :password_digest  \n</code></pre>\n"}, {"tags": ["ruby", "oracle", "oci8"], "comments": [{"owner": {"reputation": 1, "user_id": 4144736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c67ac650282abfde3d9b34cc28acde?s=128&d=identicon&r=PG&f=1", "display_name": "Guglielmo Marconi", "link": "https://stackoverflow.com/users/4144736/guglielmo-marconi"}, "edited": false, "score": 0, "creation_date": 1425493551, "post_id": 28861831, "comment_id": 45989314, "body": "i also tried C:\\Ruby21\\ruby-oci8-2.1.7&gt;gem install dbi--source <a href=\"http://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a> ERROR:  Could not find a valid gem &#39;dbi--source&#39; (&gt;= 0), here is why:           Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (<a href=\"https://api.rubygems.org/latest_specs.4.8.gz\" rel=\"nofollow noreferrer\">api.rubygems.org/latest_specs.4.8.gz</a>) ERROR:  Could not find a valid gem &#39;<a href=\"http://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>&#39; (&gt;= 0)"}], "answers": [{"tags": [], "owner": {"reputation": 344, "user_id": 985524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ece05caebbfa91944047629101bc5ea?s=128&d=identicon&r=PG", "display_name": "Kubo Takehiro", "link": "https://stackoverflow.com/users/985524/kubo-takehiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1425778057, "creation_date": 1425778057, "answer_id": 28922110, "question_id": 28861831, "link": "https://stackoverflow.com/questions/28861831/ruby-unable-to-install-0ci8-library-on-ruby-2-1-5p273-windows-8-1-and-connect/28922110#28922110", "title": "RUBY: Unable to install 0ci8 library on Ruby 2.1.5p273 (windows 8.1) and connect to Oralce", "body": "<p>Ruby-oci8 provides binary gems for Windows. But they are not available when <code>--source http://rubygems.org</code> is passed to <code>gem install ruby-oci8</code>.</p>\n\n<p>Firstly, you need 64-bit ruby to use 64-bit Oracle.\nNote that the latest ruby-oci8 binary gems (version 2.1.7) don't bundle extension libraries for ruby 2.2.1. You should use <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">ruby 2.1.5 (x64)</a>.</p>\n\n<p>Secondary, if you get an error such as <code>SSL_connect returned=1 errno=0 state=SSLv3 ...</code> when you run <code>gem install ruby-oci8</code> (<strong>without</strong> <code>--source http://rubygems.org</code>), fix the SSL error (<a href=\"https://gist.github.com/luislavena/f064211759ee0f806c88\" rel=\"nofollow\">https://gist.github.com/luislavena/f064211759ee0f806c88</a>) and run <code>gem install ruby-oci8</code> again.</p>\n"}, {"tags": [], "owner": {"reputation": 771, "user_id": 2781965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5rO7Y.jpg?s=128&g=1", "display_name": "jeton", "link": "https://stackoverflow.com/users/2781965/jeton"}, "is_accepted": false, "score": 0, "last_activity_date": 1428605086, "creation_date": 1428605086, "answer_id": 29546497, "question_id": 28861831, "link": "https://stackoverflow.com/questions/28861831/ruby-unable-to-install-0ci8-library-on-ruby-2-1-5p273-windows-8-1-and-connect/29546497#29546497", "title": "RUBY: Unable to install 0ci8 library on Ruby 2.1.5p273 (windows 8.1) and connect to Oralce", "body": "<p>Exception message : \"You have to install development tools first\" You need to install <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">devkit</a>. </p>\n"}], "owner": {"reputation": 1, "user_id": 4144736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c67ac650282abfde3d9b34cc28acde?s=128&d=identicon&r=PG&f=1", "display_name": "Guglielmo Marconi", "link": "https://stackoverflow.com/users/4144736/guglielmo-marconi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 912, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428605086, "creation_date": 1425492871, "question_id": 28861831, "link": "https://stackoverflow.com/questions/28861831/ruby-unable-to-install-0ci8-library-on-ruby-2-1-5p273-windows-8-1-and-connect", "title": "RUBY: Unable to install 0ci8 library on Ruby 2.1.5p273 (windows 8.1) and connect to Oralce", "body": "<p>I am facing serious limitation and issue (I guess is OS related), i have looked into many Forums also in Ruby's one, but not really great help has come from them; i truly think that has not really a great support or API/libraries availability for the community.</p>\n\n<p>DETAILS: </p>\n\n<p>Ruby Version: 2.1.5p273</p>\n\n<p>Ruby path: C:\\Ruby21\\bin</p>\n\n<p>Gem version: 2.2.2</p>\n\n<p>OS: Windows 8.1 64-bit</p>\n\n<p>ORACLE version:  Oracle Database 12c Enterprise Edition Release 12.1.0.1.0 - 64bit Production</p>\n\n<p>Oracle: D:\\app\\username\\product\\12.1.0\\dbhome_1</p>\n\n<p>in CMD</p>\n\n<pre><code>gem install ruby-oci8  --source http://rubygems.org\n</code></pre>\n\n<p>but many errors:</p>\n\n<pre><code>checking for load library path...\n  PATH...\n    checking D:\\app\\Usern\\product\\12.1.0\\dbhome_1\\bin...   skip: D:/app/Usern/product/12.1.0/dbhome_1/bin/oci.dll is for x86_64 cpu.\n    checking C:\\app\\Username\\product\\12.1.0\\dbhome_3\\bin... no\n    checking C:\\app\\Username\\product\\12.1.0\\dbhome_2\\bin... no\n    checking C:\\app\\Username\\product\\12.1.0\\dbhome_1\\bin... no\n    checking C:\\Program Files (x86)\\Intel\\iCLS Client\\... no\n    checking C:\\Program Files\\Intel\\iCLS Client\\... no\n    checking C:\\WINDOWS\\system32... no\n    checking C:\\WINDOWS... no\n    checking C:\\WINDOWS\\System32\\Wbem... no\n    checking C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\... no\n    checking C:\\Program Files (x86)\\Intel\\OpenCL SDK\\2.0\\bin\\x86... no\n    checking C:\\Program Files (x86)\\Intel\\OpenCL SDK\\2.0\\bin\\x64... no\n    checking C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL... no\n    checking C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT... no\n    checking C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL... no\n    checking C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT... no\n    checking C:\\Users\\Username\\AppData\\Local\\Smartbar\\Application\\... no\n    checking C:\\Users\\Username\\AppData\\Local\\Smartbar\\Application\\... no\n    checking D:\\Strawberry\\c\\bin... no\n    checking D:\\Strawberry\\perl\\site\\bin... no\n    checking D:\\Strawberry\\perl\\bin... no\n    checking C:\\php... no\n    checking C:\\\\bin... no\n    checking C:\\scala\\bin... no\n    checking C:\\Ruby21\\bin... no\n    checking C:\\Program Files (x86)\\Java\\jdk1.7.0_40\\bin... no\nchecking for cc... ---------------------------------------------------\nError Message:\n  The compiler failed to generate an executable file.\n  You have to install development tools first.\n\n    Error Message:\n      The compiler failed to generate an executable file.\n      You have to install development tools first.\n\nBacktrace:\n  C:/Ruby21/lib/ruby/2.1.0/mkmf.rb:456:in `try_do'\n  C:/Ruby21/lib/ruby/2.1.0/mkmf.rb:541:in `try_link0'\n  C:/Ruby21/lib/ruby/2.1.0/mkmf.rb:840:in `try_run'\n  C:/Ruby21/ruby-oci8-2.1.7/ext/oci8/oraconf.rb:566:in `check_cc'\n  C:/Ruby21/ruby-oci8-2.1.7/ext/oci8/oraconf.rb:556:in `init'\n  C:/Ruby21/ruby-oci8-2.1.7/ext/oci8/oraconf.rb:705:in `initialize'\n  C:/Ruby21/ruby-oci8-2.1.7/ext/oci8/oraconf.rb:320:in `new'\n  C:/Ruby21/ruby-oci8-2.1.7/ext/oci8/oraconf.rb:320:in `get'\n  C:/Ruby21/ruby-oci8-2.1.7/ext/oci8/extconf.rb:18:in `&lt;main&gt;'\n---------------------------------------------------\nSee:\n * http://rubydoc.info/gems/ruby-oci8/file/docs/install-full-client.md for Oracle full client\n * http://rubydoc.info/gems/ruby-oci8/file/docs/install-instant-client.md for Oracle instant client\n * http://ruby-oci8.rubyforge.org/en/file.report-installation-issue.html to report an issue.\n\n*** C:/Ruby21/ruby-oci8-2.1.7/ext/oci8/extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>Why i need this?</p>\n\n<p>I am working with CSV files, arrays and Maps for a small exercise... but my solution will perfect using real DB tables and referential integrity... but i am afraid i will bever install oci8 in ruby:</p>\n\n<p>i show one code example whihc is failing</p>\n\n<pre><code>require 'oci8'\n\n\n#sqlplus fred/fred@localhost:1521/DB1\n\n\noci = OCI8.new('fred','fred','localhost:1521/DB1')\noci.exec('select sysdate from dual') do |record|\n  puts record\nend\n\n\nERROR in Eclipse Luna:\n\nC:/Ruby21/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- oci8 (LoadError)\n    from C:/Ruby21/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from C:/Users/Username/db.rb:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1425493700, "post_id": 28861698, "comment_id": 45989399, "body": "So you want to sort by category_id ? Like the result should be <code>Breaks-1 Brembo-2 Somthing-3 Tires-4 Komo-5</code> ?"}, {"owner": {"reputation": 907, "user_id": 3603755, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000619058154/picture?type=large", "display_name": "Artem Tutov", "link": "https://stackoverflow.com/users/3603755/artem-tutov"}, "reply_to_user": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1425494104, "post_id": 28861698, "comment_id": 45989613, "body": "Yes, I need sorting by category_id"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425500848, "post_id": 28861698, "comment_id": 45993533, "body": "Have you tried something as basic as <code>@category.sort_by{|cat| [cat.id,cat.category_id]}</code>. <code>#sort_by</code> can accept and <code>Array</code> and it will sort them in order by each value. To sort by just <code>category_id</code> it would be <code>@category.sort_by(&amp;:category_id)</code>. Also since this is a collection i would recommend changing the naming to <code>@categories</code> as this indicates clearly that there are or may be more than 1"}], "owner": {"reputation": 907, "user_id": 3603755, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000619058154/picture?type=large", "display_name": "Artem Tutov", "link": "https://stackoverflow.com/users/3603755/artem-tutov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425492422, "creation_date": 1425492422, "question_id": 28861698, "link": "https://stackoverflow.com/questions/28861698/sorting-model-with-child-id", "title": "Sorting model with child_id", "body": "<p>I have model Category</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  has_many :child, :class_name =&gt; 'Category', :foreign_key =&gt; 'category_id'\n  belongs_to :parent, :class_name =&gt; 'Category'\n  mount_uploader :photo, ImageUploader\nend\n</code></pre>\n\n<p>And have some data in db. For example:</p>\n\n<pre><code>&gt; ID Name category_id\n&gt; 1 Moto null\n&gt; 2 Breaks 1\n&gt; 3 Car null\n&gt; 4 Tires 3\n&gt; 5 Brembo 2\n&gt; 6 Komo 4\n</code></pre>\n\n<p>And I don`t know how sorting Model for first parent and after go child. For example:</p>\n\n<pre><code>ID Name category_id \n1 Moto null \n2 Breaks 1 \n5 Brembo 2\n4 Car null \n5 Tires 4 \n6 Komo 5\n</code></pre>\n\n<p>And insert this data into </p>\n\n<pre><code>= f.collection_select(:category_id, @category, :id, :name, {:prompt=&gt;false}, {class:'select', :multiple=&gt;'multiple'})\n</code></pre>\n"}, {"tags": ["ruby", "amazon-s3", "carrierwave", "fog"], "answers": [{"comments": [{"owner": {"reputation": 2503, "user_id": 168843, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/34fe261fffe48fa50e34b9727208fd29?s=128&d=identicon&r=PG", "display_name": "wkhatch", "link": "https://stackoverflow.com/users/168843/wkhatch"}, "edited": false, "score": 0, "creation_date": 1455794969, "post_id": 28880488, "comment_id": 58654022, "body": "I&#39;m curious if this solution works with a different profile per user, and when you&#39;re dealing with temporary access tokens you&#39;d get through the Cognito service. I&#39;m about to find out otherwise ;-)"}], "tags": [], "owner": {"reputation": 362, "user_id": 1250804, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ff168162d53e22788d576582b3527e97?s=128&d=identicon&r=PG", "display_name": "bkocik", "link": "https://stackoverflow.com/users/1250804/bkocik"}, "is_accepted": true, "score": 0, "last_activity_date": 1425566448, "creation_date": 1425566448, "answer_id": 28880488, "question_id": 28861509, "link": "https://stackoverflow.com/questions/28861509/local-outside-ec2-testing-with-fog-carrierwave-and-iam-instance-profiles/28880488#28880488", "title": "Local (outside EC2) testing with Fog/Carrierwave and IAM instance profiles?", "body": "<p>I don't know how others might be doing this, but this is the strategy I've come up with. I have a config.yml that looks like this:</p>\n\n<pre><code>default: &amp;default\n  aws:\n    s3:\n      bucket: 'my-production-bucket'\n  fog: &amp;fog\n    credentials: &amp;credentials\n      provider: 'AWS'\n      region: 'us-east-1'\n\ndevelopment: &amp;development\n  &lt;&lt;: *default\n  aws:\n    s3:\n      bucket: 'my-dev-bucket'\n  fog:\n    &lt;&lt;: *fog\n    credentials:\n      &lt;&lt;: *credentials\n      aws_access_key_id: 'ID_WITH_DEV_BUCKET_ACCESS_ONLY'\n      aws_secret_access_key: 'CORRESPONDING_SECRET'\n\ntest:\n  &lt;&lt;: *development\n\nproduction:\n  &lt;&lt;: *default\n  fog:\n    &lt;&lt;: *fog\n    credentials:\n      &lt;&lt;: *credentials\n      use_iam_profile: true\n</code></pre>\n\n<p>I'm also using this trick in app_config.rb to load my config.yml file (not required for this solution, but it'll make the next part make more sense to you):</p>\n\n<pre><code>require 'ostruct'\nrequire 'yaml'\n\nall_config = YAML.load_file(Rails.root.join('config', 'config.yml')) || {}\nenv_config = all_config[Rails.env] || {}\nAppConfig = OpenStruct.new(env_config)\n</code></pre>\n\n<p>Then, in my config/initializers/carrier_wave.rb file:</p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_credentials = AppConfig.fog['credentials'].symbolize_keys\n  config.fog_directory  = AppConfig.aws['s3']['bucket']\nend\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li>The <code>symbolize_keys</code> call there is necessary because by default I\nwind up with a hash with strings as keys, and Fog is looking for\nsymbols.</li>\n<li>Yes, I'm checking in an app ID and secret, but you don't\nhave to; you could do this with environment variables instead.\nPersonal choice here, and I may change it later.</li>\n<li>This works as\nexpected locally, but I haven't tried it in EC2 yet. Since in each\nRails environment the <code>CarrierWave::Uploader::Base.fog_credentials</code>\nhash comes out exactly as I expect it to, it should work just fine\nwhen I get there.</li>\n</ol>\n\n<p>The end result is that in all environments, the <code>AppConfig.fog['credentials']</code> hash gets the same <code>:region</code> and <code>:provider</code>. In development, it also contains the ID and secret. In production it doesn't contain the ID or secret, but instead gets <code>:use_iam_profile =&gt; true</code></p>\n"}], "owner": {"reputation": 362, "user_id": 1250804, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ff168162d53e22788d576582b3527e97?s=128&d=identicon&r=PG", "display_name": "bkocik", "link": "https://stackoverflow.com/users/1250804/bkocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 28880488, "answer_count": 1, "score": 0, "last_activity_date": 1425566448, "creation_date": 1425491797, "question_id": 28861509, "link": "https://stackoverflow.com/questions/28861509/local-outside-ec2-testing-with-fog-carrierwave-and-iam-instance-profiles", "title": "Local (outside EC2) testing with Fog/Carrierwave and IAM instance profiles?", "body": "<p>I understand that I can configure fog to use IAM instance profiles (I\u2019m uploading to S3 via fog/carrierwave) by passing use_iam_profile => true. What I haven\u2019t yet figured out is how to test my code outside of an EC2 instance, like on my local machine. Is there a strategy for this that people are using?</p>\n"}, {"tags": ["ruby", "redis", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 1952, "user_id": 1982006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29b061ef718e5ca1867cb5544dcbfe9?s=128&d=identicon&r=PG", "display_name": "ShaneQful", "link": "https://stackoverflow.com/users/1982006/shaneqful"}, "is_accepted": false, "score": 1, "last_activity_date": 1425491124, "creation_date": 1425491124, "answer_id": 28861284, "question_id": 28861042, "link": "https://stackoverflow.com/questions/28861042/how-can-i-store-session-values-in-sinatra-using-redis/28861284#28861284", "title": "How can I store Session values in Sinatra using Redis?", "body": "<p>There is a session object you can access e.g.</p>\n\n<pre><code>get \"/bar\" do\n  session[\"hello\"] = hello\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 662, "user_id": 4467308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926e3460baba919e642f52ffda802cb1?s=128&d=identicon&r=PG&f=1", "display_name": "Sinatra", "link": "https://stackoverflow.com/users/4467308/sinatra"}, "is_accepted": false, "score": 2, "last_activity_date": 1425491537, "creation_date": 1425491537, "answer_id": 28861421, "question_id": 28861042, "link": "https://stackoverflow.com/questions/28861042/how-can-i-store-session-values-in-sinatra-using-redis/28861421#28861421", "title": "How can I store Session values in Sinatra using Redis?", "body": "<p>You just need to enable sessions in Sinatra, and save whatever values you need from that session object to redis using the set function.</p>\n\n<pre><code>enable :sessions\nredis.set(\"session_value\", session[:value])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1752, "user_id": 228067, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aK37f.jpg?s=128&g=1", "display_name": "sashaegorov", "link": "https://stackoverflow.com/users/228067/sashaegorov"}, "is_accepted": false, "score": 1, "last_activity_date": 1425530027, "creation_date": 1425530027, "answer_id": 28870068, "question_id": 28861042, "link": "https://stackoverflow.com/questions/28861042/how-can-i-store-session-values-in-sinatra-using-redis/28870068#28870068", "title": "How can I store Session values in Sinatra using Redis?", "body": "<p>Here is more detailed answer. I think that is very simple to use Sinatra and Redis.</p>\n\n<p>Add Redis gem to application. If you are using <code>Gemfile</code> just add it there.</p>\n\n<pre><code>gem 'redis'\n</code></pre>\n\n<p>Next you should manage Redis URL in your application:</p>\n\n<pre><code>ENV['REDIS_URL'] ||= 'redis://localhost:6379'\n# Redis configuration\nRedisURI = URI.parse(ENV[\"REDIS_URL\"])\n</code></pre>\n\n<p>Here if <code>REDIS_URL</code> isn't set up application will use localhost. For production deployments you should set it to actual production Redis server.</p>\n\n<p>Next is to parse it:</p>\n\n<pre><code>REDIS = Redis.new(host: RedisURI.host, port: RedisURI.port, password: RedisURI.password)\n</code></pre>\n\n<p>The <code>REDIS</code> constant is Redis connection you may work with.</p>\n\n<pre><code>REDIS.set(param, value) # Set some param to value\nREDIS.get(:description) # get description key\n</code></pre>\n\n<p>In your case you should use unique key for each client. You can handle cookies of client via Sinatra's methods:</p>\n\n<pre><code>response.set_cookie(:foo, 'bar')\nrequest.cookies[:foo]\nresponse.delete_cookie(:foo)\n</code></pre>\n\n<p>Play with this code and it will be very clear...</p>\n\n<p>You also may implement session <a href=\"http://redis.io/commands/expire\" rel=\"nofollow\">expire</a> in Redis.</p>\n"}], "owner": {"reputation": 2620, "user_id": 2070369, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/fad72a6377ac87f3b8cd80ff1dda894f?s=128&d=identicon&r=PG", "display_name": "user2070369", "link": "https://stackoverflow.com/users/2070369/user2070369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1425530027, "creation_date": 1425490384, "question_id": 28861042, "link": "https://stackoverflow.com/questions/28861042/how-can-i-store-session-values-in-sinatra-using-redis", "title": "How can I store Session values in Sinatra using Redis?", "body": "<p>I'm trying to set up a cluster with Sinatra and Redis, and I need to store session values on redis for this to work, but I can't find the documentation.</p>\n\n<p>Anyone knows how?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1425494124, "post_id": 28860731, "comment_id": 45989628, "body": "What is the output of this in your rails console? <code>Showing.where(show_date: Date.today).count</code>"}, {"owner": {"reputation": 11, "user_id": 4205878, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8681a532b7fdd0189bb6cd6dea22a0dc?s=128&d=identicon&r=PG&f=1", "display_name": "TJ DMU", "link": "https://stackoverflow.com/users/4205878/tj-dmu"}, "reply_to_user": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1425494555, "post_id": 28860731, "comment_id": 45989875, "body": "I tried your code and just get &#39;internal servier error&#39; in the console. Should there be anything after .count -   ?? ** ignore this, my bad...I actually get &#39; NoMethodError in FilmsController#search........undefined method `empty?&#39; for 0:Fixnum"}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1425494815, "post_id": 28860731, "comment_id": 45990033, "body": "How come you get internal server error? Try this in console."}, {"owner": {"reputation": 11, "user_id": 4205878, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8681a532b7fdd0189bb6cd6dea22a0dc?s=128&d=identicon&r=PG&f=1", "display_name": "TJ DMU", "link": "https://stackoverflow.com/users/4205878/tj-dmu"}, "reply_to_user": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1425496469, "post_id": 28860731, "comment_id": 45991017, "body": ".I actually get from my console &#39; NoMethodError in FilmsController#search........undefined method `empty?&#39; for 0:Fixnum"}], "owner": {"reputation": 11, "user_id": 4205878, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8681a532b7fdd0189bb6cd6dea22a0dc?s=128&d=identicon&r=PG&f=1", "display_name": "TJ DMU", "link": "https://stackoverflow.com/users/4205878/tj-dmu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425489405, "creation_date": 1425489405, "question_id": 28860731, "link": "https://stackoverflow.com/questions/28860731/search-to-return-a-single-record-from-a-list-with-duplicate-entries-ruby-rails", "title": "Search to return a single record from a list with duplicate entries - Ruby Rails", "body": "<p>I am trying to return a search from a table called 'showings' that has a field called 'show_date' with duplicate date entries and a field called 'film_id' (which belongs to the primary key 'id' in a table called 'films').</p>\n\n<p>I would like to search for any film that has a specific showing date (for example today) so that only one record is returned per film (because each film has more than one showing with the same date in the showings table).</p>\n\n<p>My search view looks like:</p>\n\n<pre><code>&lt;!-- app\\views\\_search.html.erb --&gt;\n\n&lt;%= form_tag my_path do %&gt;\n  &lt;% date = Date.today %&gt;\n  &lt;%= hidden_field_tag :search_string, date.strftime(\"%F\") %&gt; \n\n  &lt;div class=\"tab-content\"&gt;\n    &lt;%= submit_tag \"What's on\", class: \"btn\" %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>My controller looks like:</p>\n\n<pre><code>def search\n    @films = Film.date_search(params[:search_string])\n    else if @films.empty?\n        flash.now[:alert] = \"There are no films showing with that date - Showing all films.\"\n        @films = Film.all.order :title\n    end\n    render :action =&gt; \"index\"\nend\n</code></pre>\n\n<p>My film model looks like:</p>\n\n<pre><code>def self.date_search(search_string)\n    film = Showing.where(\"show_date = ?\", search_string).pluck(:film_id)\nend\n</code></pre>\n\n<p>I believe my main issue is with the film model code above since I am unsure how to retrun multiple unique film records with only one show_date per record. Any help would be much appreciated.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12168, "user_id": 2772643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg8P7.png?s=128&g=1", "display_name": "victorkt", "link": "https://stackoverflow.com/users/2772643/victorkt"}, "edited": false, "score": 0, "creation_date": 1425491780, "post_id": 28860709, "comment_id": 45988263, "body": "This error looks like an unclosed block (missing <code>}</code> or <code>end</code>)"}, {"owner": {"reputation": 3, "user_id": 2713945, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8ba73899029307ed2a88f8f5e1f375e1?s=128&d=identicon&r=PG&f=1", "display_name": "DiegoParra", "link": "https://stackoverflow.com/users/2713945/diegoparra"}, "reply_to_user": {"reputation": 12168, "user_id": 2772643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg8P7.png?s=128&g=1", "display_name": "victorkt", "link": "https://stackoverflow.com/users/2772643/victorkt"}, "edited": false, "score": 0, "creation_date": 1425499737, "post_id": 28860709, "comment_id": 45992891, "body": "Yes I thought the same, but if i replace the &lt; :id =&gt;&#39;node_name&#39;&quot; &gt; for a simple String its run. For this reason i want to know how i use the variable from &quot;id&quot; or &quot;div&quot; in the where condition"}, {"owner": {"reputation": 21874, "user_id": 526704, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UJEcq.jpg?s=128&g=1", "display_name": "DLeh", "link": "https://stackoverflow.com/users/526704/dleh"}, "edited": false, "score": 0, "creation_date": 1425582853, "post_id": 28860709, "comment_id": 46032800, "body": "Please use the code formatting button to help format code properly"}], "owner": {"reputation": 3, "user_id": 2713945, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8ba73899029307ed2a88f8f5e1f375e1?s=128&d=identicon&r=PG&f=1", "display_name": "DiegoParra", "link": "https://stackoverflow.com/users/2713945/diegoparra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425582853, "creation_date": 1425489334, "last_edit_date": 1425582853, "question_id": 28860709, "link": "https://stackoverflow.com/questions/28860709/how-can-i-use-a-javascript-variable-in-options-for-select-while-condition-ruby-o", "title": "How can i use a javaScript variable in options_for_select While condition Ruby on Rails", "body": "<p>My javaScript Code for return variable from <strong>id</strong> or from <strong>div</strong>:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" &gt;\n    function passParameters(modalvalues) {   var node_name =\n    modalvalues.getAttribute(\"node_name\");  \n    $(\".node-name\").text(node_name);   $(\"#node_name\").val(node_name); }\n&lt;/script&gt;\n</code></pre>\n\n<p>My code in Ruby:</p>\n\n<pre><code>&lt;%= select_tag :relaunch, options_for_select(@restarts.where(\"node_name like\n**javascriptnodeVariable**).collect {|u| [ \"#{u.schedule_name}-#{u.node_name}\", u.node_name ] }) %&gt;\n</code></pre>\n\n<p>I was trying with that:</p>\n\n<pre><code>&lt;%= select_tag :relaunch, options_for_select(@restarts.where(\"node_name like #{:id=&gt;'node_name'}\").collect {|u| [ \"#{u.schedule_name}-#{u.node_name}\", u.node_name ] }) %&gt;\n</code></pre>\n\n<p>But i get this error:</p>\n\n<pre><code>C:/Sites/SIB/app/views/welcome/index.html.erb:495: syntax error, unexpected tASSOC, expecting '}' ...s.where(\"node_name like #{:id=&gt;'node_name'}\").collect {|u| [... ... ^\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1425488527, "post_id": 28860253, "comment_id": 45986310, "body": "Try @user.user_type_id = UserType.first.id"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1425488643, "post_id": 28860253, "comment_id": 45986387, "body": "Let me know if it works"}, {"owner": {"reputation": 15, "user_id": 4633024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f2409cfc9209a6a4966c1155d43cac?s=128&d=identicon&r=PG&f=1", "display_name": "user4633024", "link": "https://stackoverflow.com/users/4633024/user4633024"}, "reply_to_user": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1425489832, "post_id": 28860253, "comment_id": 45987144, "body": "Unfortunately no.. but thank for suggestion"}, {"owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 0, "creation_date": 1425491305, "post_id": 28860253, "comment_id": 45988016, "body": "Using user_type_id threw the same error? That seems like the migration didn&#39;t go through or has an error"}, {"owner": {"reputation": 12168, "user_id": 2772643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg8P7.png?s=128&g=1", "display_name": "victorkt", "link": "https://stackoverflow.com/users/2772643/victorkt"}, "edited": false, "score": 0, "creation_date": 1425491331, "post_id": 28860253, "comment_id": 45988029, "body": "Are you sure you ran the migration to add the column user_type_id?"}, {"owner": {"reputation": 15, "user_id": 4633024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f2409cfc9209a6a4966c1155d43cac?s=128&d=identicon&r=PG&f=1", "display_name": "user4633024", "link": "https://stackoverflow.com/users/4633024/user4633024"}, "edited": false, "score": 0, "creation_date": 1425500180, "post_id": 28860253, "comment_id": 45993142, "body": "Yeah, my users table have user_type_id column in schema.."}, {"owner": {"reputation": 15, "user_id": 4633024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f2409cfc9209a6a4966c1155d43cac?s=128&d=identicon&r=PG&f=1", "display_name": "user4633024", "link": "https://stackoverflow.com/users/4633024/user4633024"}, "edited": false, "score": 0, "creation_date": 1425500280, "post_id": 28860253, "comment_id": 45993200, "body": "but this works      user = User.first     type = UserType.first     type.users = @user"}], "owner": {"reputation": 15, "user_id": 4633024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f2409cfc9209a6a4966c1155d43cac?s=128&d=identicon&r=PG&f=1", "display_name": "user4633024", "link": "https://stackoverflow.com/users/4633024/user4633024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425500429, "creation_date": 1425488027, "last_edit_date": 1425500429, "question_id": 28860253, "link": "https://stackoverflow.com/questions/28860253/user-and-roles-models-associations-naming-conventions", "title": "User and roles models associations - naming conventions", "body": "<p>I have two models: User and UserType. I want to make one-to-many relationship between them. This is my code:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  belongs_to :user_type\nend\nclass UserType &lt; ActiveRecord::Base\n  has_many :users\nend\n</code></pre>\n\n<p>In my database I added <code>user_type_id</code> to users table. I named my model files as <code>user.rb</code> and <code>user_type.rb</code>. </p>\n\n<p>I am trying to assign user to the user type in my console, but it`s not working. I suppose I have some naming convention error here...</p>\n\n<pre><code>@user  = User.first \n@user.user_type = UserType.first\n</code></pre>\n\n<p>I get an error: <code>method missing =&gt; user_type</code></p>\n\n<p>But this works:</p>\n\n<pre><code>@type = UserType.first\n@type.users = User.first\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "form-for", "strong-parameters", "acts-as-taggable-on"], "comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1480146327, "post_id": 28859527, "comment_id": 68852060, "body": "Did you figure this out? I&#39;m struggling to figure out how to force the use of predefined tags too"}], "owner": {"reputation": 11, "user_id": 4323836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8557b4e604e9f59e16effa94cb24612?s=128&d=identicon&r=PG&f=1", "display_name": "biru306", "link": "https://stackoverflow.com/users/4323836/biru306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425518493, "creation_date": 1425486123, "last_edit_date": 1425518493, "question_id": 28859527, "link": "https://stackoverflow.com/questions/28859527/rails-parameters-when-displaying-acts-as-taggable-on-with-tag-scope", "title": "rails - parameters when displaying acts as taggable on with tag.scope", "body": "<p>So, I have a Post model with acts as taggable and Tag model where I defined a scope predefined tags called 'categories' set to true like so:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  acts_as_taggable\nend\n\nclass Tag &lt; ActiveRecord::Base\n  scope :categories, -&gt; { where(categories: true) }\nend\n</code></pre>\n\n<p>I now want to display a form where my users can choose at least one and up to three predefined tags (Tag.categories), and my field form like so:</p>\n\n<pre><code>&lt;%= f.label :tags, 'Categories' %&gt;\n&lt;% Tag.categories.each do |tag| %&gt;\n  &lt;%= check_box_tag \"post[tag_list][]\", tag.name, @post.tag_list.include?(tag.name) %&gt; \n  &lt;%= tag.name %&gt;\n&lt;% end %&gt;\n\n&lt;%= f.label :tags %&gt;\n&lt;%= f.text_field :tag_list %&gt;\n</code></pre>\n\n<p>The idea is that I want my users to choose up to 3 predefined tags (categories), and at the same time add how many tags as they wish. I have 10 predefined tags which I seeded to Tag table and set their category to true.</p>\n\n<p>It works fine for the normal tags (when users add their own tags, or if they tags are already exists, will just update the taggings_count), but my predefined tags are not saving/updating the count.</p>\n\n<p>In the log, the parameter only show <code>\"tag_list\"=&gt;\"tag1\"</code>, where tag1 is a tag entered by user, but not getting the tag.category selected \"Travel\" which was seeded to Tag table, thus not updating the tagging_count of \"Travel\".</p>\n\n<p>I've looked around but couldn't find answers that work, and oh - I'm a RoR beginner.</p>\n\n<p>I'm using acts as taggable on 3.4, with Rails 4.2.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1425487428, "post_id": 28859627, "comment_id": 45985611, "body": "<code>myh.sort.to_h</code> will bring it back to a hash"}], "tags": [], "owner": {"reputation": 5, "user_id": 4479406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de00a0a36bf88aac1ddb60280060d55?s=128&d=identicon&r=PG&f=1", "display_name": "Planet of the Abes", "link": "https://stackoverflow.com/users/4479406/planet-of-the-abes"}, "is_accepted": false, "score": 1, "last_activity_date": 1425486354, "creation_date": 1425486354, "answer_id": 28859627, "question_id": 28859525, "link": "https://stackoverflow.com/questions/28859525/in-ruby-how-do-i-sort-a-hash-by-its-key-values-in-alphabetical-order/28859627#28859627", "title": "In Ruby how do I sort a hash by its key values in alphabetical order?", "body": "<p>myh = {\"c\" => 1, \"b\" => 2, \"a\" => 3}</p>\n\n<p>myh.sort</p>\n\n<p>=> [[\"a\", 3], [\"b\", 2], [\"c\", 1]] </p>\n"}, {"tags": [], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "is_accepted": false, "score": 1, "last_activity_date": 1425489137, "creation_date": 1425489137, "answer_id": 28860638, "question_id": 28859525, "link": "https://stackoverflow.com/questions/28859525/in-ruby-how-do-i-sort-a-hash-by-its-key-values-in-alphabetical-order/28860638#28860638", "title": "In Ruby how do I sort a hash by its key values in alphabetical order?", "body": "<pre><code>{\"c\" =&gt; 1, \"b\" =&gt; 2, \"a\" =&gt; 3}.sort.to_h\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4633005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caeea2534a79414ca7cc3c00c4537bb9?s=128&d=identicon&r=PG&f=1", "display_name": "Leonhard Euler", "link": "https://stackoverflow.com/users/4633005/leonhard-euler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425522621, "creation_date": 1425486118, "question_id": 28859525, "link": "https://stackoverflow.com/questions/28859525/in-ruby-how-do-i-sort-a-hash-by-its-key-values-in-alphabetical-order", "title": "In Ruby how do I sort a hash by its key values in alphabetical order?", "body": "<p>Suppose I have a hash,\n{\"c\": 1, \"b\": 2, \"a\": 3}\nHow do I sort the hash so the elements are in order of the key value?  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1425485413, "post_id": 28859026, "comment_id": 45984149, "body": "I cannot get that to work, are you sure it is correct? I would expect <code>class Nodes &lt; Struct.new(:nodes); def &lt;&lt; node ...</code> instead, with changes to number of <code>&lt;</code> in first line and some added whitespace in second line."}, {"owner": {"reputation": 2525, "user_id": 3499258, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/mSNw2.jpg?s=128&g=1", "display_name": "theideasmith", "link": "https://stackoverflow.com/users/3499258/theideasmith"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1425485526, "post_id": 28859026, "comment_id": 45984239, "body": "You&#39;re right. I made a mistake when copying it over."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1425485624, "post_id": 28859026, "comment_id": 45984308, "body": "should be <code>def &lt;&lt; node</code> or <code>def &lt;&lt;(node)</code>"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1425485764, "post_id": 28859026, "comment_id": 45984408, "body": "What makes you think there is metaprogramming going on here?"}, {"owner": {"reputation": 2525, "user_id": 3499258, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/mSNw2.jpg?s=128&g=1", "display_name": "theideasmith", "link": "https://stackoverflow.com/users/3499258/theideasmith"}, "edited": false, "score": 0, "creation_date": 1425486867, "post_id": 28859026, "comment_id": 45985192, "body": "This: <code>class Nodes &lt; Struct.new(:nodes)</code>. If it is not metaprogramming, I&#39;ll remove the tag."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1425487227, "post_id": 28859026, "comment_id": 45985458, "body": "@theideasmith: no, it&#39;s not. It&#39;s completely ordinary ruby (although using parts of stdlib you probably haven&#39;t seen before). I went ahead and removed the tags for you :)"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1425488080, "post_id": 28859842, "comment_id": 45986010, "body": "Should be <code>&lt; Struct</code> not <code>&lt;&lt;</code>. Probably got carried away because of the other <code>&lt;&lt;</code> operators."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 4, "last_activity_date": 1425488569, "last_edit_date": 1425488569, "creation_date": 1425486947, "answer_id": 28859842, "question_id": 28859026, "link": "https://stackoverflow.com/questions/28859026/self-defining-classes-in-ruby/28859842#28859842", "title": "Self Defining Classes in Ruby?", "body": "<p><code>Struct.new(:nodes)</code> creates a new anonymous <a href=\"http://ruby-doc.org//core-2.2.0/Struct.html\" rel=\"nofollow\"><code>Struct</code></a> subclass with a single member <code>:nodes</code>. According to the docs you would usually assign it to a constant, e.g.:</p>\n\n<pre><code>Foo = Struct.new(:nodes)\nfoo = Foo.new([1, 2, 3]) #=&gt; #&lt;struct Foo nodes=[1, 2, 3]&gt;\nfoo.nodes                #=&gt; [1, 2, 3]\n</code></pre>\n\n<h3>Subclassing <code>Struct.new</code></h3>\n\n<p><code>class Nodes &lt; Struct.new(...)</code> creates a new class <code>Nodes</code> with the anonymous <code>Struct</code> subclass as its superclass:</p>\n\n<pre><code>Nodes.ancestors\n#=&gt; [Nodes, #&lt;Class:0x007fa0320032d0&gt;, Struct, Enumerable, Object, Kernel, BasicObject]\n#                       ^\n#                       |\n#            anonymous Struct sublass\n</code></pre>\n\n<p>This allows you to call <code>super</code> when overriding methods from the <code>Struct</code> subclass, e.g.:</p>\n\n<pre><code>class Nodes &lt; Struct.new(:nodes)\n  def nodes\n    super\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2525, "user_id": 3499258, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/mSNw2.jpg?s=128&g=1", "display_name": "theideasmith", "link": "https://stackoverflow.com/users/3499258/theideasmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1425488569, "creation_date": 1425484788, "last_edit_date": 1425487200, "question_id": 28859026, "link": "https://stackoverflow.com/questions/28859026/self-defining-classes-in-ruby", "title": "Self Defining Classes in Ruby?", "body": "<p>I'm trying to understand exactly what the piece of code below accomplishes and how it works. </p>\n\n<pre><code>class Nodes &lt; Struct.new(:nodes) #Create a struct with array hash nodes\n    def &lt;&lt;(node)\n        nodes &lt;&lt; node\n        self\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sorcery"], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 3875827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52cc8a838bf44a589d2572833b2dd1b9?s=128&d=identicon&r=PG", "display_name": "palkan", "link": "https://stackoverflow.com/users/3875827/palkan"}, "is_accepted": false, "score": 0, "last_activity_date": 1425539020, "creation_date": 1425539020, "answer_id": 28871861, "question_id": 28858591, "link": "https://stackoverflow.com/questions/28858591/sorcery-gem-logged-in-always-returns-false/28871861#28871861", "title": "Sorcery gem - logged_in? always returns false", "body": "<p>Everyone has access to Users pages due to this line <code>skip_before_filter :require_login, only: [:index, :new, :create]</code>. This literally means \"don't check authorization\". Just remove this line.</p>\n\n<p>Generally you should skip <code>require_login</code> filter only on public pages and login pages (i.e. <code>UserSessionsController#create</code> etc).</p>\n\n<p>And the second issue: do you have <code>authenticates_with_sorcery!</code> in your User model?</p>\n"}], "owner": {"reputation": 1760, "user_id": 720394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9dcdcfe0ae1c681644f0dba154dec779?s=128&d=identicon&r=PG", "display_name": "Tom O", "link": "https://stackoverflow.com/users/720394/tom-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425539020, "creation_date": 1425483699, "question_id": 28858591, "link": "https://stackoverflow.com/questions/28858591/sorcery-gem-logged-in-always-returns-false", "title": "Sorcery gem - logged_in? always returns false", "body": "<p>I'm trying to make a very simple web app using Rails and I'm using the Sorcery gem to authenticate users. I followed the tutorial <a href=\"https://github.com/NoamB/sorcery/wiki/Simple-Password-Authentication\" rel=\"nofollow\">here</a> on their GitHub page, and I'm getting no where with it. </p>\n\n<p>I have 2 issues which I believe are probably linked. \nThe first being, when I use this before_filter <code>skip_before_filter :require_login, only: [:index, :new, :create]</code>, users can still access the page without logging in.</p>\n\n<p>The other issue is, when a user tries to log in, they aren't redirected, and when I use the built in helper <code>logged_in?</code>, it always returns false. Even though there was no error message when logging in.</p>\n\n<p>I've added the appropriate controllers, let me know if you need to look at anything else.</p>\n\n<p>Thanks.</p>\n\n<p><strong>user_sessions_controller.rb</strong></p>\n\n<pre><code>class UserSessionsController &lt; ApplicationController\n  skip_before_filter :require_login, :except =&gt; [:destroy]\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    if @user = login(params[:email], params[:password])\n      redirect_back_or_to(:users, :notice =&gt; 'Login successfull.')\n    else\n      flash.now[:alert] = 'Login failed'\n      render action: 'new'\n    end\n  end\n\n  def destroy\n    logout\n    redirect_to(:users, :notice =&gt; 'Logged out!')\n  end\nend\n</code></pre>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  skip_before_filter :require_login, only: [:index, :new, :create]\n\n  # GET /users\n  # GET /users.json\n  def index\n    @users = User.all\n  end\n\n  # GET /users/1\n  # GET /users/1.json\n  def show\n  end\n\n  # GET /users/new\n  def new\n    @user = User.new\n  end\n\n  # GET /users/1/edit\n  def edit\n  end\n\n  # POST /users\n  # POST /users.json\n  def create\n    @user = User.new(user_params)\n\n    respond_to do |format|\n      if @user.save\n        format.html { redirect_to :users, notice: 'User was successfully created.' }\n        format.json { render :show, status: :created, location: @user }\n      else\n        format.html { render :new }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /users/1\n  # PATCH/PUT /users/1.json\n  def update\n    respond_to do |format|\n      if @user.update(user_params)\n        format.html { redirect_to @user, notice: 'User was successfully updated.' }\n        format.json { render :show, status: :ok, location: @user }\n      else\n        format.html { render :edit }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /users/1\n  # DELETE /users/1.json\n  def destroy\n    @user.destroy\n    respond_to do |format|\n      format.html { redirect_to users_url, notice: 'User was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_user\n      @user = User.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    #def user_params\n    #  params.require(:user).permit(:email, :crypted_password, :salt)\n    #end\n\n    def user_params\n      params.require(:user).permit(:email, :password, :password_confirmation)\n  end\nend\n</code></pre>\n\n<p><strong>application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  # protect_from_forgery with: :exception\n  protect_from_forgery\n\n  before_filter :require_login\n\n\n  private\n    def not_authenticated\n      redirect_to(login_path, :alert =&gt; \"Please login first\")\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "cucumber"], "comments": [{"owner": {"reputation": 1009, "user_id": 735143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5198cf315801c6e58fa1f1192adb114?s=128&d=identicon&r=PG", "display_name": "Dabrorius", "link": "https://stackoverflow.com/users/735143/dabrorius"}, "edited": false, "score": 0, "creation_date": 1425483322, "post_id": 28858140, "comment_id": 45982674, "body": "Can&#39;t FactoryGirl handle that?"}], "answers": [{"comments": [{"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1425522754, "post_id": 28858962, "comment_id": 46002240, "body": "When you&#39;re creating an Article, how do you know the category_id?"}, {"owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1425562685, "post_id": 28858962, "comment_id": 46019962, "body": "@AlexanderSupertramp: I&#39;ve updated my answer. This should give you a better &quot;big picture&quot; view of how step definitions can be reused between scenarios, and even features."}], "tags": [], "owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "is_accepted": true, "score": 2, "last_activity_date": 1425562600, "last_edit_date": 1425562600, "creation_date": 1425484624, "answer_id": 28858962, "question_id": 28858140, "link": "https://stackoverflow.com/questions/28858140/re-using-the-code-between-2-different-models-in-cucumber/28858962#28858962", "title": "Re-using the code between 2 different models in Cucumber", "body": "<p>The steps defined in <code>category_steps.rb</code> can be used in any feature file. Just use the <code>Given</code> steps defined in <code>category_steps.rb</code> in <code>article.features</code>:</p>\n\n<p><strong>article.features</strong></p>\n\n<pre><code>Feature: Articles\n  In order to ...\n  As a ...\n  I want to ...\n\nBackground:\n  Given the \"Test\" Category exists\n\nScenario: Creating an Article\n  When I create an Article with the following attributes:\n    | Title        | Body      |\n    | Just Testing | Test test |\n  And the \"Just Testing\" Article is in the \"Test\" Category\n  Then an Article should exist with the following attributes:\n    | Title        | Body      |\n    | Just Testing | Test test |\n  And the \"Just Testing\" Article should be in the \"Test\" Category\n</code></pre>\n\n<p>Since the \"Test\" category will be used throughout the scenarios, move the creation of this data into the Scenario <code>Background</code>. Next, in your step definition files, define the steps above:</p>\n\n<p><strong>category_steps.rb</strong></p>\n\n<pre><code>Given /^the \"(.*?)\" Category exists$/ do |category_name|\n  Category.create! :name =&gt; category_name\nend\n</code></pre>\n\n<p><strong>article_steps.rb</strong></p>\n\n<pre><code>When /^I create an Article with the following attributes:$/ do |table|\n  article = Article.new\n  # Loop over the rows and columns to set properties on article\n  article.save!\nend\n\nWhen /^the \"(.*?)\" Article is in the \"(.*?)\" Category$/ do |article_title, category_name|\n  article = Article.find_by_title article_title\n  article.category = Category.find_by_name category_name\n  article.save!\nend\n\nThen /^an Article should exist with the following attributes:$/ do |table|\n  expected = Article.new\n  # Loop over rows and columns of table to set properties on article\n  actual = Article.find_by_title expected.article_title\n\n  # Compare expected and actual for differences\n  expect(expected.title).to eq actual.title\n  expect(expected.body).to eq actual.body\nend\n\nThen /^the \"(.*?)\" Article should be in the \"(.*?)\" Category$/ do |article_title, category_name|\n  article = Article.find_by_title article_title\n  expect(article.category.name).to eq category_name\nend\n</code></pre>\n\n<p>The whole idea of step definitions is to promote code reuse between multiple scenarios and feature files. Step definitions aren't supposed to be tied to a feature file. Rather, they should be generic enough to be reused in multiple situations.</p>\n"}], "owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 28858962, "answer_count": 1, "score": 0, "last_activity_date": 1425562600, "creation_date": 1425482535, "question_id": 28858140, "link": "https://stackoverflow.com/questions/28858140/re-using-the-code-between-2-different-models-in-cucumber", "title": "Re-using the code between 2 different models in Cucumber", "body": "<p>I have 2 Models: Article and Category. Article depends on Category: in order to create Article, I have to create Category first. And I have 4 files: <code>article.features, category.features, article_steps.rb, category_steps.rb</code>. In somewhere in <code>article_steps.rb</code> I have to create Category in order to create Article itself. But the code for creating Category has already been defined in <code>category_steps.rb</code>. </p>\n\n<p>How can I re-use it in <code>article_steps.rb</code>? I could do that within the same model, but is there any way to do that in different models?</p>\n"}, {"tags": ["ruby", "json", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "edited": false, "score": 0, "creation_date": 1425482637, "post_id": 28858125, "comment_id": 45982200, "body": "I don&#39;t think using the symbol <code>:views</code> as the key will work, as the default JSON parser will return a hash with string keys. <code>&quot;views&quot;</code> would be the key to use in that case."}, {"owner": {"reputation": 629, "user_id": 1940534, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc616063228a211102c1dc44a1765294?s=128&d=identicon&r=PG", "display_name": "robm", "link": "https://stackoverflow.com/users/1940534/robm"}, "edited": false, "score": 0, "creation_date": 1425482728, "post_id": 28858125, "comment_id": 45982260, "body": "Wow thanks for the quick response ... I get a different error ./test.rb:41:in <code>&lt;main&gt;&#39;: undefined method </code>each&#39; for nil:NilClass (NoMethodError)"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "edited": false, "score": 0, "creation_date": 1425482776, "post_id": 28858125, "comment_id": 45982294, "body": "Argh, you&#39;re right, thanks @joonty. The text actually parsed as a ruby array without JSON parsing when I tried that in irb. I&#39;ve updated now."}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 629, "user_id": 1940534, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc616063228a211102c1dc44a1765294?s=128&d=identicon&r=PG", "display_name": "robm", "link": "https://stackoverflow.com/users/1940534/robm"}, "edited": false, "score": 0, "creation_date": 1425482809, "post_id": 28858125, "comment_id": 45982324, "body": "@robm I&#39;ve just updated my answer after joonty pointed out a mistake. Try with the key <code>&quot;views&quot;</code> not the key <code>:views</code>."}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 629, "user_id": 1940534, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc616063228a211102c1dc44a1765294?s=128&d=identicon&r=PG", "display_name": "robm", "link": "https://stackoverflow.com/users/1940534/robm"}, "edited": false, "score": 0, "creation_date": 1425486609, "post_id": 28858125, "comment_id": 45985036, "body": "@robm There should be the outline of a check mark under the voting arrows to the left of the question. Clicking that will mark it as the answer. :)"}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": true, "score": 0, "last_activity_date": 1425482496, "creation_date": 1425482496, "answer_id": 28858125, "question_id": 28857926, "link": "https://stackoverflow.com/questions/28857926/iterating-through-json-using-ruby/28858125#28858125", "title": "Iterating through JSON using Ruby", "body": "<p>In your example <code>data</code> on line 38 should be the contents of <code>res.body</code>.</p>\n\n<p>If we look at the hash that you say <code>res.body</code> is, we can see that it is a hash with one key, \"views\", and that key points to an array of values.</p>\n\n<p>I'm not sure what you are trying to achieve with your script so far. I will take a guess that you are currently trying to print out each of the items in the array. To do that, you would need to do the following:</p>\n\n<pre><code>data = JSON.parse(res.body)\n\ndata[\"views\"].each do |view|\n  print view\nend\n</code></pre>\n\n<p>This accesses the value stored at the key <code>views</code> in <code>data</code>, the array, and then loops over the values in that array, printing them out as it goes.</p>\n\n<p>Let me know if this helps!</p>\n"}], "owner": {"reputation": 629, "user_id": 1940534, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc616063228a211102c1dc44a1765294?s=128&d=identicon&r=PG", "display_name": "robm", "link": "https://stackoverflow.com/users/1940534/robm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28858125, "answer_count": 1, "score": 0, "last_activity_date": 1454077277, "creation_date": 1425481952, "last_edit_date": 1454077277, "question_id": 28857926, "link": "https://stackoverflow.com/questions/28857926/iterating-through-json-using-ruby", "title": "Iterating through JSON using Ruby", "body": "<p>I am trying to iterate through the JSON below but I am getting the error</p>\n\n<pre><code>./test.rb:39:in `[]': can't convert String into Integer (TypeError)\n    from ./test.rb:39:in `block in &lt;main&gt;'\n    from ./test.rb:38:in `each'\n    from ./test.rb:38:in `&lt;main&gt;'\n</code></pre>\n\n<p>From this code (line 39=print child['data']['body'])</p>\n\n<p>Can anyone show me what i am doing wrong?</p>\n\n<pre><code>data = JSON.parse(res.body)\n\n38 data.each do |child|\n39    print child['data']['body']\n40 end\n</code></pre>\n\n<p>Here is what res.body is:</p>\n\n<pre><code>{ \"views\": [ \"Logs_Messages\",\"Content_Sources\",\"Bitrates_HD_Encoder\",\"Hardware_Status_eCMM\",\"Bitrates_Per_Program\",\"Content_OOB_SI\",\"Debug_Dump\",\"Hardware_Status_In_Band_Tuners\",\"Alarms_Current\",\"Version_Information\",\"Software_Status_License\",\"Hardware_Status_Module_Presence\",\"Reboot\",\"Content_Mappings\",\"Logs_Persistent\",\"Content_Routing\",\"Software_Status_Transcoder_Enabled\",\"Software_Status_Code_Download\",\"Decryption_Identification\",\"Hardware_Status_System_Monitoring\",\"Software_Status_Operating_System_Stats\",\"Software_Status_TLV\",\"Hardware_Status_Out_of_Band_Tuner\",\"Content_EPG\",\"Hardware_Status_HD_Encoders\",\"Alarms_History\",\"Bitrates_Output\",\"Decryption_Status\",\"Bitrates_Input\",\"Software_Status_EPG_Download\",\"Interfaces\",\"Hardware_Status_Output_Module\"] }\n</code></pre>\n"}, {"tags": ["ruby", "console", "interactive", "gets", "docopt"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425481981, "post_id": 28857665, "comment_id": 45981715, "body": "Please post some code so we can better help with you issue."}], "answers": [{"tags": [], "owner": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "is_accepted": false, "score": 0, "last_activity_date": 1426089091, "last_edit_date": 1495542133, "creation_date": 1426087418, "answer_id": 28990616, "question_id": 28857665, "link": "https://stackoverflow.com/questions/28857665/getting-console-input-with-rubys-docopt/28990616#28990616", "title": "Getting Console Input with Ruby&#39;s Docopt", "body": "<p>This is unrelated to docopt. Try it on its own:</p>\n\n<pre><code>$ cat test.rb\n#!/usr/bin/ruby\n\nputs \"Enter Username:\"\nusername = gets\n\n$ ./test.rb something\nEnter Username:\n./test.rb:4:in `gets': No such file or directory - something (Errno::ENOENT)\n        from ./test.rb:4:in `gets'\n        from ./test.rb:4:in `&lt;main&gt;'\n</code></pre>\n\n<p><code>Kernel.gets</code> in ruby uses <code>ARGF.gets</code>. Using <code>STDIN.gets</code> should get you your expected behavior. See <a href=\"https://stackoverflow.com/questions/1883925/kernelgets-attempts-to-read-file-instead-of-standard-input\">this SO question</a>.</p>\n"}], "owner": {"reputation": 49, "user_id": 2694596, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/MxNjG.jpg?s=128&g=1", "display_name": "DCKlingensmith", "link": "https://stackoverflow.com/users/2694596/dcklingensmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426089091, "creation_date": 1425481187, "last_edit_date": 1425484223, "question_id": 28857665, "link": "https://stackoverflow.com/questions/28857665/getting-console-input-with-rubys-docopt", "title": "Getting Console Input with Ruby&#39;s Docopt", "body": "<p>I'm using Docopt in Ruby to parse my command options, and later in the script I am getting console input using <code>gets.chomp</code>. The problem is that all of the args from the running the program are still left in ARGF after Docopt does its parsing with <code>options = Docopt::docopt(doc)</code>, and doing a gets command takes from ARGF before it tries gets'ing from STDIN.</p>\n\n<p>I've tried to clear ARGF, but doing <code>ARGF.gets</code> for some reason tries to run the input as a command. I think clearing ARGF or using another input method could both be solutions, but I haven't found anything yet. I have to imagine that I'm not the first to try to get interactive command line input in Ruby with Docopt, so I'm hoping the answer is out there.</p>\n\n<p>Some more code for those who would like it:</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'docopt'\n\ndoc=&lt;&lt;eos\nUsage:\naccount_creator.rb --noldap                           [options]\n\nOptions:\n-h, --help                  Show help page\n-l, --ldap\n-n, --noldap\n-s SERVER                 With or without http[s]://, followed by port\n--ad\n--od\n-d NUM\n-u USER\n-p PASS\n-o OUTPUT-FILE             Default behavior is to append output to file if it exists\neos\n\noptions = {}\nbegin\n  options = Docopt::docopt(doc)\nrescue Docopt::Exit =&gt; e\n  puts e.message\n  exit 1\nend\n\nif options['-u']\n  username = options['-u']\nelse\n  while username.eql? '' or username == nil\n    puts \"Enter Username:\"\n    username = Kernel.gets.chomp.strip\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425482408, "post_id": 28857655, "comment_id": 45982020, "body": "Have you looked at this <a href=\"http://stackoverflow.com/questions/2279513/how-can-i-create-a-nokogiri-case-insensitive-xpath-selector\">SO Question</a> seems to address this directly."}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 0, "creation_date": 1425484186, "post_id": 28857655, "comment_id": 45983263, "body": "Possible duplicate - <a href=\"http://stackoverflow.com/questions/9267973/convert-all-element-names-to-lower-case-with-xsl\" title=\"convert all element names to lower case with xsl\">stackoverflow.com/questions/9267973/&hellip;</a>"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 0, "creation_date": 1425484364, "post_id": 28857655, "comment_id": 45983397, "body": "Possible solution - <a href=\"http://stackoverflow.com/a/2279611/244128\">stackoverflow.com/a/2279611/244128</a>"}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425489286, "post_id": 28857655, "comment_id": 45986786, "body": "Yeah, that&#39;s a little more complicated than I hoped. I wish it could have been as simple as: <code>node = parsed.at_css(&quot;title&quot;, :insensitive =&gt; true)</code> or something to that effect."}], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425487998, "post_id": 28858569, "comment_id": 45985958, "body": "It appears that this doesn&#39;t work because the nodes in the block are also children nodes, which are Nokogiri::XML::Text and don&#39;t have node_name. I.e.:   <code>2.2.0 :075 &gt; parsed.traverse {|node| node.node_name = node.node_name.downcase unless node.node_name == &quot;document&quot; } NoMethodError: undefined method </code>downcase&#39; for nil:NilClass   from (irb):75:in <code>block in irb_binding&#39;</code>"}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425488225, "post_id": 28858569, "comment_id": 45986106, "body": "However, this appears to work: <code>parsed.traverse {|node| node.name = node.name.downcase if node.class == Nokogiri::XML::Element }</code>"}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425489330, "post_id": 28858569, "comment_id": 45986817, "body": "My only follow-on question is: will tags always be Nokogiri::XML::Elements or do I need to check for other options?"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425489383, "post_id": 28858569, "comment_id": 45986854, "body": "@DanSharp: yes, &quot;tags&quot; are formally known as &quot;elements&quot; - this is a great solution."}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425490415, "post_id": 28858569, "comment_id": 45987526, "body": "Is there a difference between <code>node.node_name</code> and <code>node.name</code>?"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425491207, "post_id": 28858569, "comment_id": 45987971, "body": "@DanSharp: it looks like <code>node_name</code> is equivalent to <code>node</code>."}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425491784, "post_id": 28858569, "comment_id": 45988265, "body": "Yup. Just found the line in the Nokogiri source: <code>alias :name           :node_name</code>"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "reply_to_user": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 0, "creation_date": 1425491948, "post_id": 28858569, "comment_id": 45988379, "body": "thanks for the edits @maerics, I&#39;ve edited again slightly to use the XML::Element logic the hive mind came up with, but in my opinion better code style on one line."}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425492216, "post_id": 28858569, "comment_id": 45988538, "body": "Thank you both!   This solved it for me! The traverse call is fast and lets me pre-process the XML data in Nokogiri, thus allowing my future searches via css(&quot;something&quot;) to work and remain elegant (I didn&#39;t want to do custom xpaths)"}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425492287, "post_id": 28858569, "comment_id": 45988578, "body": "@jrochkind  I agree. In fact, I&#39;d possibly even put the traverse block on one line. I like the kind_of? call even better than class =="}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425492454, "post_id": 28858569, "comment_id": 45988686, "body": "Interesting note: you cannot chain <code>traverse</code> with the <code>parse()</code> method. You have to parse the XML first into a variable, then traverse that variable."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1425497662, "post_id": 28858569, "comment_id": 45991696, "body": "It&#39;s not that you can&#39;t do it in one line, but that you&#39;ll lose access to your actual Nokogiri::Document object, since traverse does not return it. You could probably do something fancy with <code>tap</code> if you have ActiveSupport, but two lines is reasonable. (Or a PR to nokogiri to make traverse return the caller instead of nil!)"}], "tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": true, "score": 2, "last_activity_date": 1425491999, "last_edit_date": 1425491999, "creation_date": 1425483648, "answer_id": 28858569, "question_id": 28857655, "link": "https://stackoverflow.com/questions/28857655/how-can-i-make-all-xml-tags-lowercase-in-nokogiri/28858569#28858569", "title": "How can I make all XML tags lowercase in Nokogiri?", "body": "<p>If you want to transform your xml document by downcase'ing all tag names, here's one way to do it:</p>\n\n<pre><code>parsed = Nokogiri::XML.parse(xml_content)\nparsed.traverse do |node|\n  node.name = node.name.downcase if node.kind_of?(Nokogiri::XML::Element)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425488980, "post_id": 28859775, "comment_id": 45986597, "body": "This works, but it removes any additional attributes on any tags. So if I have:  <code>&lt;BAR stuff=&quot;whatever&quot;&gt;Bar&lt;&#47;BAR&gt;</code>  it becomes: <code>&lt;bar&gt;Bar&lt;&#47;bar&gt;</code> and I lose the <code>stuff=&quot;whatever&quot;</code>.  That may not matter for my specific needs (I need to make sure the tags don&#39;t have attributes)."}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1425489199, "post_id": 28859775, "comment_id": 45986736, "body": "@DanSharp: ah, good observation, I didn&#39;t think to check that =("}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 0, "last_activity_date": 1425488787, "last_edit_date": 1495534190, "creation_date": 1425486757, "answer_id": 28859775, "question_id": 28857655, "link": "https://stackoverflow.com/questions/28857655/how-can-i-make-all-xml-tags-lowercase-in-nokogiri/28859775#28859775", "title": "How can I make all XML tags lowercase in Nokogiri?", "body": "<p>As a general approach you could transform all element (tag) names to lower case (e.g. by using XSLT or another solution) and then do all of your XPath/CSS queries using lower case only.</p>\n\n<p><a href=\"https://stackoverflow.com/a/9268269/244128\">This XSLT solution should work</a>; however, my version of Ruby (2.0.0p481) and/or Nokogiri (1.5.6) complains mysteriously (perhaps about the use of the \"<code>lower-case(...)</code>\" function? Perhaps Nokogiri doesn't support XSLT v2?)</p>\n\n<p>Here's a solution that seems to work:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>require 'nokogiri'\n\nxslt = Nokogiri::XSLT(File.read('lower.xslt'))\n# &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n# &lt;xsl:transform version=\"2.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;\n#   &lt;xsl:variable name=\"lowercase\" select=\"'abcdefghijklmnopqrstuvwxyz'\" /&gt;\n#   &lt;xsl:variable name=\"uppercase\" select=\"'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\" /&gt;\n#   &lt;xsl:template match=\"*\"&gt;\n#     &lt;xsl:element name=\"{translate(local-name(), $uppercase, $lowercase)}\"&gt;\n#       &lt;xsl:apply-templates /&gt;\n#     &lt;/xsl:element&gt;\n#   &lt;/xsl:template&gt;\n# &lt;/xsl:transform&gt;\n\ndoc  = Nokogiri::XML(File.read('doc.xml'))\n# &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n# &lt;FOO&gt;\n#  &lt;BAR&gt;Bar&lt;/BAR&gt;\n#  &lt;GAH&gt;Gah&lt;/GAH&gt;\n#  &lt;ZIP&gt;&lt;DOO&gt;&lt;DAH/&gt;&lt;/DOO&gt;&lt;/ZIP&gt;\n# &lt;/FOO&gt;\n\nputs xslt.transform(doc)\n# &lt;?xml version=\"1.0\"?&gt;\n# &lt;foo&gt;\n#   &lt;bar&gt;Bar&lt;/bar&gt;\n#   &lt;gah&gt;Gah&lt;/gah&gt;\n#   &lt;zip&gt;&lt;doo&gt;&lt;dah/&gt;&lt;/doo&gt;&lt;/zip&gt;\n# &lt;/foo&gt;\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "accepted_answer_id": 28858569, "answer_count": 2, "score": 0, "last_activity_date": 1425491999, "creation_date": 1425481153, "question_id": 28857655, "link": "https://stackoverflow.com/questions/28857655/how-can-i-make-all-xml-tags-lowercase-in-nokogiri", "title": "How can I make all XML tags lowercase in Nokogiri?", "body": "<p>I'm parsing some XML that I get from various feeds. Apparently some of the XML has an occasional tag that is all upper case. I'd like to normalize the XML to be all lower case tags to make searching, etc. easier.</p>\n\n<p>What I want to do is something like:</p>\n\n<pre><code>parsed = Nokogiri::XML.parse(xml_content)\nnode = parsed.css(\"title\")  # =&gt; should return a Nokogiri node for the title tag\n</code></pre>\n\n<p>However, some of the XML documents have \"TITLE\" for that tag.</p>\n\n<p>What are my options for getting that node whether it's tag is \"title\", \"TITLE\", or even \"Title\"?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3809, "user_id": 518500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/853a5fb8148dc8e1678c983f0a4cbaf5?s=128&d=identicon&r=PG", "display_name": "codingbunny", "link": "https://stackoverflow.com/users/518500/codingbunny"}, "edited": false, "score": 0, "creation_date": 1425480290, "post_id": 28857266, "comment_id": 45980503, "body": "before_destroy hook in your models is all I can think of. Perhaps use this in patient to interupt the process?"}, {"owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "reply_to_user": {"reputation": 3809, "user_id": 518500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/853a5fb8148dc8e1678c983f0a4cbaf5?s=128&d=identicon&r=PG", "display_name": "codingbunny", "link": "https://stackoverflow.com/users/518500/codingbunny"}, "edited": false, "score": 0, "creation_date": 1425481351, "post_id": 28857266, "comment_id": 45981279, "body": "How would you add an interupt? Maybe a global variable $patient_destroyed that gets set to true in the Patient Model?"}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1425481432, "creation_date": 1425481432, "answer_id": 28857753, "question_id": 28857266, "link": "https://stackoverflow.com/questions/28857266/can-i-get-a-callback-hook-for-destroy-on-an-object-from-another-object/28857753#28857753", "title": "Can I get a callback hook for destroy on an object from another object?", "body": "<p>I am assuming you have something like this </p>\n\n<pre><code>class Patient &lt; ActiveRecord::Base\n  has_many :bills, dependent: :destroy\nend \nclass Bills &lt; ActiveRecord::Base\n  belongs_to :patient\nend\n</code></pre>\n\n<p>You could change this to </p>\n\n<pre><code>class Patient &lt; ActiveRecord::Base\n  has_many :bills, dependent: :delete_all\nend \n</code></pre>\n\n<p><code>destroy</code> has callbacks which you are using to remove bills from quickbooks.</p>\n\n<p><code>delete</code> has no callbacks it is just a deletion from the database straight through. </p>\n\n<p>Thus if you destroy a patient it will delete all the <code>Bills</code> locally but will not run the callbacks to remove it from quickbooks.</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 1190970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505a338f5944fa8e88e666e21a02c46b?s=128&d=identicon&r=PG", "display_name": "geoffharcourt", "link": "https://stackoverflow.com/users/1190970/geoffharcourt"}, "is_accepted": false, "score": 0, "last_activity_date": 1425483112, "creation_date": 1425483112, "answer_id": 28858367, "question_id": 28857266, "link": "https://stackoverflow.com/questions/28857266/can-i-get-a-callback-hook-for-destroy-on-an-object-from-another-object/28858367#28858367", "title": "Can I get a callback hook for destroy on an object from another object?", "body": "<p>Another approach to this issue would be to remove the callbacks and to perform the deletion with a separate coordinating object, which would get called from your controller:</p>\n\n<pre><code>class PatientAndBillRemoteCleanup\n  def initialize(patient)\n    @patient = patient\n  end\n\n  def delete\n    Patient.transaction do \n      # fill out these methods\n      # transaction rewinds if you have failures\n      delete_patients_bills_in_quickbooks\n      delete_patients_bills_locally\n      delete_patient_locally\n    end\n  end \nend\n</code></pre>\n\n<p>The advantages of this approach are:</p>\n\n<ol>\n<li>It's much easier to test </li>\n<li>You can isolate remote deletion to a known\nprocess (so you don't get unintended effects at the Rails console</li>\n<li>Any place where this code is used (such as the controller where web\nusers trigger deletion) is easy to understand, and someone else\nwon't accidentally write patient-deleting code elsewhere that\nunexpectedly manipulates quickbooks</li>\n</ol>\n\n<p>Callbacks are great for situations where you want to do something <em>every</em> time (such as set some default data that relies on another attribute), but you have a situation here where sometimes you want the callback behavior, and sometimes you don't. Move it out to a coordinating object and then you can easily control the behavior.</p>\n"}], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 28857753, "answer_count": 2, "score": 0, "last_activity_date": 1425483112, "creation_date": 1425480106, "last_edit_date": 1425482282, "question_id": 28857266, "link": "https://stackoverflow.com/questions/28857266/can-i-get-a-callback-hook-for-destroy-on-an-object-from-another-object", "title": "Can I get a callback hook for destroy on an object from another object?", "body": "<p>Rails 3.1.3  -  ruby 1.9.3p194</p>\n\n<p>I have 2 objects: Patient &amp; Bill. </p>\n\n<p>When Patient gets destroyed the corresponding Bill gets destroyed. Which is fine; however, these objects are also held remotely on Quickbooks and are updated through my application.</p>\n\n<p>If a Bill is destroyed locally, my application deletes the object in Quickbooks. I do not destroy Patients in Quickbooks because there is most likely associated billing history stored there.</p>\n\n<p>The problem arises when someone destroys a Patient locally, it calls destroy for all associated Bills, which fires the destroy method for Quickbooks Bills. </p>\n\n<p>Is there a way to see if patient.destroy has been called from Bill model?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "performance", "activerecord"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 3, "creation_date": 1425483659, "post_id": 28857235, "comment_id": 45982894, "body": "these create multiple n+1 queries, you&#39;re better off to eager load when possible"}, {"owner": {"reputation": 1634, "user_id": 1662820, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6daebbd6e63595fdd96d5462e87d5eb0?s=128&d=identicon&r=PG", "display_name": "xamenrax", "link": "https://stackoverflow.com/users/1662820/xamenrax"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1425498982, "post_id": 28857235, "comment_id": 45992451, "body": "@Anthony, last solution don&#39;t create n+1 query though"}], "answers": [{"tags": [], "owner": {"reputation": 439, "user_id": 204708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5627156aeaebf962636bcfce420429?s=128&d=identicon&r=PG", "display_name": "dodecaphonic", "link": "https://stackoverflow.com/users/204708/dodecaphonic"}, "is_accepted": true, "score": 1, "last_activity_date": 1425480818, "creation_date": 1425480818, "answer_id": 28857545, "question_id": 28857235, "link": "https://stackoverflow.com/questions/28857235/speed-up-rails-each-method-on-relation/28857545#28857545", "title": "Speed up Rails .each method on relation", "body": "<p>Of the options you provided, the one that is likely to provide the most gain is the last one (though marginally more than the second one) &mdash; considering you have a large enough dataset. </p>\n\n<p>That would be the case because <code>find_each</code> will fetch things in batches, loading smaller datasets in memory at each time. That should keep the memory profile stable as the size of the data grows.</p>\n\n<p>All that said, benchmark the differences. It's pretty easy to do, and you'll learn a lot about what ActiveRecord does.</p>\n"}], "owner": {"reputation": 1634, "user_id": 1662820, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6daebbd6e63595fdd96d5462e87d5eb0?s=128&d=identicon&r=PG", "display_name": "xamenrax", "link": "https://stackoverflow.com/users/1662820/xamenrax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28857545, "answer_count": 1, "score": 0, "last_activity_date": 1425480818, "creation_date": 1425480010, "question_id": 28857235, "link": "https://stackoverflow.com/questions/28857235/speed-up-rails-each-method-on-relation", "title": "Speed up Rails .each method on relation", "body": "<p>In my project i have query looking like this:</p>\n\n<p><code>@authorizer.user_profile.garden_locations.each {...}</code></p>\n\n<p>Can I make it faster with smth like this? :</p>\n\n<p><code>@authorizer.user_profile.garden_locations.find_each {...}</code></p>\n\n<p>or even with:</p>\n\n<p><code>GardenLocation.where(user_profile_id: @authorize.user_profile.id).find_each {...}</code></p>\n\n<p>Note that user_profile_id field of garden_locations table is already indexed</p>\n"}, {"tags": ["ruby", "api"], "answers": [{"tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": false, "score": 0, "last_activity_date": 1425546076, "creation_date": 1425546076, "answer_id": 28873722, "question_id": 28857153, "link": "https://stackoverflow.com/questions/28857153/presenting-elements-in-ruby-on-rails-from-wunderground-api-wrapper/28873722#28873722", "title": "presenting elements in ruby on rails from wunderground api wrapper", "body": "<p>The problem is with syntax in your view. You've used:</p>\n\n<pre><code>&lt;% @w_api %&gt;\n</code></pre>\n\n<p>but to render to view, you need to change it to:</p>\n\n<pre><code>&lt;%= @w_api %&gt;\n</code></pre>\n\n<p><code>&lt;% %&gt;</code> just executes the code, but <code>&lt;%= %&gt;</code> outputs \"result\" of the expression.</p>\n\n<p>But, this still may have problems rendering what is stored in your <code>@w_api</code>. From your code, I guess you'r trying to debug/see what structure/data is stored in your variable, in that case you should try:</p>\n\n<pre><code>&lt;%= p @w_api %&gt;\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 3217115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e69956aacdb9125b3a37a5864a34f9f?s=128&d=identicon&r=PG&f=1", "display_name": "user3217115", "link": "https://stackoverflow.com/users/3217115/user3217115"}, "is_accepted": false, "score": 0, "last_activity_date": 1425577366, "creation_date": 1425577366, "answer_id": 28884266, "question_id": 28857153, "link": "https://stackoverflow.com/questions/28857153/presenting-elements-in-ruby-on-rails-from-wunderground-api-wrapper/28884266#28884266", "title": "presenting elements in ruby on rails from wunderground api wrapper", "body": "<p>thanks, however i did it the wrong way i think..had to change it and remove the @  so it's now </p>\n\n<pre><code>w_api=Wunderground.new(\"MY_API_KEY\")\n</code></pre>\n\n<p>but it did'nt give any output so i added</p>\n\n<pre><code>@W=w_api.forecast_for(\"WA\",\"Spokane\")\n</code></pre>\n\n<p>why did i have to remove the @?.</p>\n\n<p>in the view i called the @w</p>\n\n<pre><code>  &lt;td&gt;&lt;%= @w %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>now i get the result</p>\n\n<pre><code>{\n    \"response\"=&gt;{\n        \"version\"=&gt;\"0.1\",\n        \"termsofService\"=&gt;\"http://www.wunderground.com/weather/api/d/terms.html\",\n        \"features\"=&gt;{\n            \"forecast\"=&gt;1\n        }\n    },\n    \"forecast\"=&gt;{\n        \"txt_forecast\"=&gt;{\n            \"date\"=&gt;\"8:27 AM PST\",\n            \"forecastday\"=&gt;[\n                {\n                    \"period\"=&gt;0,\n                    \"icon\"=&gt;\"partlycloudy\",\n                    \"icon_url\"=&gt;\"http://icons.wxug.com/i/c/k/partlycloudy.gif\",\n                    \"title\"=&gt;\"Thursday\",\n                    \"fcttext\"=&gt;\"A mix of clouds and sun. High 51F. Winds SSW at 5 to 10 mph.\",\n                    \"fcttext_metric\"=&gt;\"A mix of clouds and sun. High near 10C. Winds SSW at 10 to 15 km/h.\",\n                    \"pop\"=&gt;\"0\"\n                },\n                {\n                    \"period\"=&gt;1,\n                    \"icon\"=&gt;\"nt_clear\",\n                    \"icon_url\"=&gt;\"http://icons.wxug.com/i/c/k/nt_clear.gif\",\n                    \"title\"=&gt;\"Thursday Night\",\n                    \"fcttext\"=&gt;\"Mostly clear. Low 27F. Winds light and variable.\",\n                    \"fcttext_metric\"=&gt;\"Mostly clear. Low -2C. Winds light and variable.\",\n                    \"pop\"=&gt;\"0\"\n                },\n</code></pre>\n\n<p>however when i go directly to the json API page i get:</p>\n\n<pre><code>{\n  \"response\": {\n  \"version\":\"0.1\",\n  \"termsofService\":\"http://www.wunderground.com/weather/api/d/terms.html\",\n  \"features\": {\n  \"forecast\": 1\n  }\n    }\n        ,\n    \"forecast\":{\n        \"txt_forecast\": {\n        \"date\":\"4:28 AM PST\",\n        \"forecastday\": [\n        {\n</code></pre>\n\n<p>the difference is the => and there are no array []</p>\n\n<p>is the first one an object list and the second array? how do i extract the values?\nthx!</p>\n"}], "owner": {"reputation": 3, "user_id": 3217115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e69956aacdb9125b3a37a5864a34f9f?s=128&d=identicon&r=PG&f=1", "display_name": "user3217115", "link": "https://stackoverflow.com/users/3217115/user3217115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425577366, "creation_date": 1425479791, "question_id": 28857153, "link": "https://stackoverflow.com/questions/28857153/presenting-elements-in-ruby-on-rails-from-wunderground-api-wrapper", "title": "presenting elements in ruby on rails from wunderground api wrapper", "body": "<p>noob question, i've got this wrapper <a href=\"https://github.com/wnadeau/wunderground\" rel=\"nofollow\">https://github.com/wnadeau/wunderground</a> that gets weather data via API from the site wunderground.com\ni have tried it out in the rails console and it returns a Json array/hash?\ni'm trying to do something like controller:</p>\n\n<pre><code>def index\n@w_api=Wunderground.new(\"MY_API_KEY\")\nw_api.forecast_for(\"WA\",\"Spokane\")\n\n end\n\nand in my view something like\n\n\n\n&lt;table&gt;\n    &lt;tbody&gt;\n        &lt;tr&gt;\n\n\n        &lt;%  @w_api %&gt;\n       &lt;/tr&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>i don't get anything in my view. </p>\n"}, {"tags": ["ruby", "arrays", "class", "object", "methods"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4529330, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c72b1ebe385f6cae4a3ad94cfbef700c?s=128&d=identicon&r=PG&f=1", "display_name": "ToricTorus", "link": "https://stackoverflow.com/users/4529330/torictorus"}, "edited": false, "score": 0, "creation_date": 1425512380, "post_id": 28857506, "comment_id": 45999158, "body": "Hey thank&#39;s for the fix, i will try not to look at your expansions unless i get stuck, I&#39;m doing this mostly as an exercise, it&#39;s my first actual project really. I have a question tough. Basically it seems to me that what you did was really just calling the method &#39;dice&#39; instead of calling the actual variable &#39;@dice&#39; i don&#39;t quite understand why that worked while calling the variable didn&#39;t. Also when you solve the problem like that is there any reason to actually make the &#39;@dice&#39; array an instance variable?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 87, "user_id": 4529330, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c72b1ebe385f6cae4a3ad94cfbef700c?s=128&d=identicon&r=PG&f=1", "display_name": "ToricTorus", "link": "https://stackoverflow.com/users/4529330/torictorus"}, "edited": false, "score": 0, "creation_date": 1425650488, "post_id": 28857506, "comment_id": 46059995, "body": "@MariusBelkhirMahiout the reason calling the variable did not work is because it was not set when you called it so it was <code>nil</code> and <code>nil.to_a</code> produces an empty array. Calling the method returns the Array thus it works. Technically you do not need the instance variable when calling like this but you probably want to hold onto the dice so you can interact with it later."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 0, "last_activity_date": 1425496219, "last_edit_date": 1425496219, "creation_date": 1425480698, "answer_id": 28857506, "question_id": 28856847, "link": "https://stackoverflow.com/questions/28856847/making-a-yhatzee-game-array-wont-show-up-on-screen/28857506#28857506", "title": "Making a Yhatzee game, array won&#39;t show up on screen", "body": "<p>There are a few issues here. Firstly <code>@dices</code> is <code>nil</code> because it is not set anywhere. Thus when you call <code>@dices.to_a</code> you will get <code>[]</code>. Also the dices method will not work either because <code>nil</code> does not have a <code>to_a=</code> method and the local variables you are assigning in the array will be ignored. </p>\n\n<p>It seems a little reading is in order but I would do something like the following: (Not the whole game just refactor of your code) </p>\n\n<pre><code>class  Yhatzee\n  def dice\n    @dice = Array.new(5){rand(1..6)}\n  end\n  def roll_dice\n    puts dice\n  end\nend\n\nx = Yhatzee.new\nputs x.roll_dice\n</code></pre>\n\n<p>There are alot of additional considerations that need to be made here but this should at least get you started. Small Example of how I would recommend expanding your logic: (I did not handle many scenarios here so don't copy paste. Just wanted to give you a more in depth look)</p>\n\n<pre><code>require 'forwardable'\nmodule Yahtzee\n  module Display\n    def show_with_index(arr)\n      print arr.each_index.to_a\n      print \"\\n\"\n      print arr\n    end\n  end\n  class Roll\n    include Display\n    extend Forwardable \n    def_delegator :@dice, :values_at\n    attr_reader :dice\n        def initialize(dice=5)\n            @dice = Array.new(dice){rand(1..6)}\n        end\n        def show\n      show_with_index(@dice)\n        end\n    end\n  class Turn\n    class &lt;&lt; self\n      def start\n        t = Turn.new\n        t.show\n        t\n      end\n    end\n    attr_reader :rolls\n    include Display\n    def initialize\n      @roll = Roll.new\n      @rolls = 1\n      @kept = []\n    end\n    def show\n      @roll.show\n    end\n    def roll_again\n      if available_rolls_and_dice\n        @rolls += 1\n        @roll = Roll.new(5-@kept.count)\n        puts \"Hand =&gt; #{@kept.inspect}\"\n        show\n      else\n        puts \"No Rolls left\" if @rolls == 3\n        puts \"Remove a Die to keep rolling\" if @kept.count == 5\n        show_hand\n      end \n    end\n    def keep(*indices)\n      @kept += @roll.values_at(*indices)\n    end\n    def show_hand\n      show_with_index(@kept)\n    end\n    def remove(*indices)\n      indices.each do |idx| \n        @kept.delete_at(idx)\n      end\n      show_hand\n    end\n    private \n      def available_rolls_and_dice\n        @rolls &lt; 3 &amp;&amp; @kept.count &lt; 5\n      end\n  end\nend   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425488489, "post_id": 28857780, "comment_id": 45986283, "body": "excellent explanation but from a logical standpoint <code>@dices</code> is now fixed to that set. Shouldn&#39;t roll return different results every time? Also puts inside an each loop for an Array will have the same impact as just calling <code>puts ARRAY_HERE</code>"}, {"owner": {"reputation": 302, "user_id": 2323463, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/oaYe6.jpg?s=128&g=1", "display_name": "Simon Fletcher", "link": "https://stackoverflow.com/users/2323463/simon-fletcher"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1425490508, "post_id": 28857780, "comment_id": 45987585, "body": "Yes thank you for pointing this out I completely oversaw this point. I have now amended my answer. Regarding the loop, I didn&#39;t actually know this was the case however after looking at it I think I prefer to use a loop just for ease of reading."}], "tags": [], "owner": {"reputation": 302, "user_id": 2323463, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/oaYe6.jpg?s=128&g=1", "display_name": "Simon Fletcher", "link": "https://stackoverflow.com/users/2323463/simon-fletcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1425490366, "last_edit_date": 1425490366, "creation_date": 1425481519, "answer_id": 28857780, "question_id": 28856847, "link": "https://stackoverflow.com/questions/28856847/making-a-yhatzee-game-array-wont-show-up-on-screen/28857780#28857780", "title": "Making a Yhatzee game, array won&#39;t show up on screen", "body": "<p>The main problem with this code is that you are trying to use the @dices instance variable inside of the <code>roll_dice</code> method, however you are not defining the instance variable anywhere (anywhere that is being used). You have created the <code>dices</code> method but you are not actually instantiating it anywhere. I have outlined a fix below:</p>\n\n<pre><code>class  Yhatzee\n\n  def initialize\n    create_dices\n  end\n\n  def roll_dice\n    @dices.each do |dice|\n      puts dice\n    end\n  end\n\n  private\n\n  def create_dices\n    @dices = Array.new(5){rand(1..6)}\n  end\n\nend\n\nx = Yhatzee.new\nx.roll_dice\n</code></pre>\n\n<p>I have done some simple refactoring:</p>\n\n<ol>\n<li>Created an initialize method, which creates the @dice instance variable on the class initialization.</li>\n<li>Made the 'dices' method more descriptive and changed the method visibility to private so only the class itself is able to create the @dice.</li>\n<li>Cleaned up the creation of the dices inside of the @dice instance variable</li>\n<li>I have omitted the .to_a from the roll_dice method, now that we create the variable from within the class and we know that it is an array and it will be unless we explicitly redefine it.</li>\n</ol>\n\n<h1>UPDATE</h1>\n\n<p>Although I cleaned up the implementation of the class, it was kindly pointed out by @engineersmnky that I oversaw that the roll would return the same results each time I called the roll_dice function, I have therefore written two functions which will achieve this, one that defines an instance variable for later use and one that literally just returns the results.</p>\n\n<pre><code>class  Yhatzee\n\n  def roll_dice\n   @dice = Array.new(5){rand(1..6)} # You will have access to this in other methods defined on the class\n   @dice.each {|dice| puts dice }\n  end\n\n  def roll_dice_two\n    Array.new(5){rand(1..6)}.each {|dice| puts dice } # This will return the results but will not be stored for later use\n  end\n\nend\n\nx = Yhatzee.new\nx.roll_dice\nx.roll_dice # Will now return a new result \n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 4529330, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c72b1ebe385f6cae4a3ad94cfbef700c?s=128&d=identicon&r=PG&f=1", "display_name": "ToricTorus", "link": "https://stackoverflow.com/users/4529330/torictorus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 28857506, "answer_count": 2, "score": 0, "last_activity_date": 1425496219, "creation_date": 1425478910, "question_id": 28856847, "link": "https://stackoverflow.com/questions/28856847/making-a-yhatzee-game-array-wont-show-up-on-screen", "title": "Making a Yhatzee game, array won&#39;t show up on screen", "body": "<p>Ok so I just started learning ruby and I'm making a Yhatzee game, now this is where I'm currently at: </p>\n\n<pre><code>class  Yhatzee\n\n def dices\n    @dices.to_a= [\n    dice1=rand(1..6),\n    dice2=rand(1..6),\n    dice3=rand(1..6),\n    dice4=rand(1..6),\n    dice5=rand(1..6)\n    ]\n  end\n\n  def roll_dice\n    @dices.to_a.each do |dice|\n      puts dice\n    end\n  end\nend\n\nx = Yhatzee.new\nputs x.roll_dice\n</code></pre>\n\n<p>Now the reason i typed .to_a after the array is i kept getting a \"uninitialized variable @dices\" error, and that seemed to fix it, i have no idea why.</p>\n\n<p>anyways on to my question, i currently don't get any errors but my program still won't print anything to the screen. I expected it to print out the value of each dice in the array... any idea what I'm doing wrong? It seems to work when i do it in a procedural style without using classes or methods so i assumed it might work if i made the 'dices' method public. But no luck.</p>\n"}, {"tags": ["ruby", "rspec", "selenium-webdriver", "timeout", "capybara"], "comments": [{"owner": {"reputation": 311, "user_id": 4591554, "user_type": "registered", "profile_image": "https://graph.facebook.com/410223609139845/picture?type=large", "display_name": "atomdev", "link": "https://stackoverflow.com/users/4591554/atomdev"}, "edited": false, "score": 0, "creation_date": 1425479496, "post_id": 28856503, "comment_id": 45979953, "body": "Maybe do it in the same way as for ajax requests? <code>def wait_for_ajax Capybara.current_session.instance_eval do wait_until { evaluate_script(&#39;$.active&#39;).zero? } end end</code>"}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "reply_to_user": {"reputation": 311, "user_id": 4591554, "user_type": "registered", "profile_image": "https://graph.facebook.com/410223609139845/picture?type=large", "display_name": "atomdev", "link": "https://stackoverflow.com/users/4591554/atomdev"}, "edited": false, "score": 0, "creation_date": 1425479823, "post_id": 28856503, "comment_id": 45980198, "body": "@rubykid, this timeout is a lower level exception -- you can not even <code>evaluate script</code> while Selenium is hanging."}, {"owner": {"reputation": 311, "user_id": 4591554, "user_type": "registered", "profile_image": "https://graph.facebook.com/410223609139845/picture?type=large", "display_name": "atomdev", "link": "https://stackoverflow.com/users/4591554/atomdev"}, "edited": false, "score": 0, "creation_date": 1425481098, "post_id": 28856503, "comment_id": 45981110, "body": "&#39;driver.send(:bridge)&#39; ?"}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "reply_to_user": {"reputation": 311, "user_id": 4591554, "user_type": "registered", "profile_image": "https://graph.facebook.com/410223609139845/picture?type=large", "display_name": "atomdev", "link": "https://stackoverflow.com/users/4591554/atomdev"}, "edited": false, "score": 0, "creation_date": 1425481307, "post_id": 28856503, "comment_id": 45981245, "body": "@rubykid, this is what I use to hack privacity right now. Need few minutes to ensure, that the goal is achieved. But I wanted to find the <i>proper</i> way, without hacks."}], "answers": [{"comments": [{"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 1, "creation_date": 1425483009, "post_id": 28858056, "comment_id": 45982450, "body": "I think this sets timeout for electors, not for low level communication."}, {"owner": {"reputation": 967, "user_id": 1852005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYSxX.jpg?s=128&g=1", "display_name": "stwr667", "link": "https://stackoverflow.com/users/1852005/stwr667"}, "reply_to_user": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 0, "creation_date": 1596779793, "post_id": 28858056, "comment_id": 111925877, "body": "@Nakilon is correct. Capybara&#39;s default_wait_time is the time to wait for e.g. CSS or content to appear on the page. Whereas this is talking about Capybara&#39;s browser&#39;s http_client&#39;s request read_timeout."}], "tags": [], "owner": {"reputation": 727, "user_id": 4024964, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t0rq7.png?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/4024964/phil"}, "is_accepted": false, "score": 0, "last_activity_date": 1425482312, "creation_date": 1425482312, "answer_id": 28858056, "question_id": 28856503, "link": "https://stackoverflow.com/questions/28856503/increase-webdriver-network-timeout-for-a-single-test/28858056#28858056", "title": "Increase WebDriver network timeout for a single test", "body": "<p>Capybara has a default_wait_time that can be changed in the middle of tests:</p>\n\n<pre><code>using_wait_time 120 do\n  foo(bar)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 967, "user_id": 1852005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYSxX.jpg?s=128&g=1", "display_name": "stwr667", "link": "https://stackoverflow.com/users/1852005/stwr667"}, "edited": false, "score": 0, "creation_date": 1596782217, "post_id": 28880789, "comment_id": 111926612, "body": "Nice work @Nakilon. You can see why you need to set it onto the instance variable here: <a href=\"https://github.com/SeleniumHQ/selenium/blob/trunk/rb/lib/selenium/webdriver/remote/http/default.rb#L51\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/blob/trunk/rb/lib/selenium/&hellip;</a> because <code>@http</code> is already instantiated, so simply updating the <code>read_timeout</code> attr_accessor won&#39;t change the <code>@http</code> object&#39;s read_timeout value."}], "tags": [], "owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "is_accepted": true, "score": 1, "last_activity_date": 1425567230, "creation_date": 1425567230, "answer_id": 28880789, "question_id": 28856503, "link": "https://stackoverflow.com/questions/28856503/increase-webdriver-network-timeout-for-a-single-test/28880789#28880789", "title": "Increase WebDriver network timeout for a single test", "body": "<p>This is how I broke private method, attribute without getter, and patched timeout for a single command:</p>\n\n<pre><code>http = page.driver.browser.send(:bridge).http.instance_variable_get(:@http)\nold_timeout = http.read_timeout\nbegin\n  http.read_timeout = 120\n  find(\"anything\") # here we had timeout\nensure\n  http.read_timeout = old_http_timeout\nend\n</code></pre>\n"}], "owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 1, "accepted_answer_id": 28880789, "answer_count": 2, "score": 2, "last_activity_date": 1425567230, "creation_date": 1425477969, "last_edit_date": 1425482194, "question_id": 28856503, "link": "https://stackoverflow.com/questions/28856503/increase-webdriver-network-timeout-for-a-single-test", "title": "Increase WebDriver network timeout for a single test", "body": "<p>There is a some heavy page, that after <code>visit</code>ing it Selenium doesn't respond to Capybara for a minute, so whatever do I call, throws <code>Net::ReadTimeout</code>.<br>\nI could edit it globally somehow like:</p>\n\n<pre><code>http_client = Selenium::WebDriver::Remote::Http::Default.new\nhttp_client.timeout = 120\nCapybara::Selenium::Driver.new(app,\n  http_client: http_client,\n</code></pre>\n\n<p>But in the case of some repetitive timeouts my tests would last for too long, so I do not want to increase timeout globally.<br>\nI want to increase it for a single test somehow like:</p>\n\n<pre><code>before do\n  @timeout = page.driver.bridge.http.timeout\n  page.driver.bridge.http.timeout = 120\nend\nafter do\n  page.driver.bridge.http.timeout = @timeout\nend\n</code></pre>\n\n<p>But in <code>/lib/selenium/webdriver/common/driver.rb</code> the <code>bridge</code> method is private, while only <code>browser</code> and <code>capabilities</code> are exposed to public.</p>\n\n<p><strong>So what is the correct way to edit this timeout attribute globally?</strong></p>\n\n<p><strong>UPD:</strong> Even if I find how to set this attribute, seems like the <code>before</code>/<code>after</code> approach doesn't work, because <code>@http ||= (</code> saves the default timeout value in the first <code>before</code> in the chain of <em>setUp</em>s, that precede mine.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1425480571, "post_id": 28857415, "comment_id": 45980709, "body": "i have it twice in my gemfile ... <code>source &#39;http:&#47;&#47;rubygems.org&#39; source &#39;http:&#47;&#47;gemcutter.org&#39;</code> should i delete one?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 1, "creation_date": 1425483147, "post_id": 28857415, "comment_id": 45982554, "body": "@Felix yes you should delete one"}], "tags": [], "owner": {"reputation": 3259, "user_id": 2424975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jDtKZ.jpg?s=128&g=1", "display_name": "Cereal", "link": "https://stackoverflow.com/users/2424975/cereal"}, "is_accepted": true, "score": 2, "last_activity_date": 1425481673, "last_edit_date": 1425481673, "creation_date": 1425480483, "answer_id": 28857415, "question_id": 28856494, "link": "https://stackoverflow.com/questions/28856494/warning-the-gem-chronic-was-found-in-multiple-sources/28857415#28857415", "title": "Warning: the gem &#39;chronic&#39; was found in multiple sources", "body": "<p>Use <code>gem 'chronic', :path =&gt; 'http://rubygems.org/'</code>.</p>\n\n<p>If you want to run it from the terminal, use <code>gem install chronic -s http://rubygems.org/</code>.</p>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 0, "accepted_answer_id": 28857415, "answer_count": 1, "score": 1, "last_activity_date": 1425481673, "creation_date": 1425477931, "question_id": 28856494, "link": "https://stackoverflow.com/questions/28856494/warning-the-gem-chronic-was-found-in-multiple-sources", "title": "Warning: the gem &#39;chronic&#39; was found in multiple sources", "body": "<p>after running my ruby on rails application i got this error:</p>\n\n<pre><code>Warning: the gem 'chronic' was found in multiple sources.\nInstalled from: http://rubygems.org/\nAlso found in:\n * http://gemcutter.org/\nYou should add a source requirement to restrict this gem to your preferred     source.\nFor example:\ngem 'chronic', :source =&gt; 'http://rubygems.org/'\nThen uninstall the gem 'chronic' (or delete all bundled gems) and then install again.\n</code></pre>\n\n<p>iv'e don this: gem 'chronic', :source => '<a href=\"http://rubygems.org/\" rel=\"nofollow\">http://rubygems.org/</a>' like mentioned ... but then i got this error:</p>\n\n<pre><code>-bash: http://rubygems.org/: File or Directory not found \n</code></pre>\n\n<p>how can I solve this problem?</p>\n"}, {"tags": ["jquery", "ruby", "postgresql", "sinatra", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 2911424, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/94ca142e5bf28b0a02b46bc5b3a292ec?s=128&d=identicon&r=PG&f=1", "display_name": "mR.aTA", "link": "https://stackoverflow.com/users/2911424/mr-ata"}, "is_accepted": false, "score": 0, "last_activity_date": 1425478092, "creation_date": 1425478092, "answer_id": 28856542, "question_id": 28856280, "link": "https://stackoverflow.com/questions/28856280/how-can-i-page-a-postrges-dataset-with-simplepagination-js/28856542#28856542", "title": "how can I page a postrges dataset with &quot;simplepagination.js&quot;?", "body": "<p>i hardly recommend you <a href=\"https://github.com/dwaskowski/jquery_textpager\" rel=\"nofollow\">this jQuery textpager</a> plugin instead.\nso simple and effective!\nhope to help.</p>\n"}, {"tags": [], "owner": {"reputation": 1373, "user_id": 1903663, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/41d2a772b53998ed8df06c334d9a1c04?s=128&d=identicon&r=PG", "display_name": "user1903663", "link": "https://stackoverflow.com/users/1903663/user1903663"}, "is_accepted": false, "score": 0, "last_activity_date": 1425487940, "creation_date": 1425487940, "answer_id": 28860215, "question_id": 28856280, "link": "https://stackoverflow.com/questions/28856280/how-can-i-page-a-postrges-dataset-with-simplepagination-js/28860215#28860215", "title": "how can I page a postrges dataset with &quot;simplepagination.js&quot;?", "body": "<p>OK solved, here is the answer. It is necessary to incorporate the paging script with the json script so they work together</p>\n\n<pre><code>$(document).ready(function() {\n$(\"#get_my_call_logs\").click(function() {\n$(\"#pagination\").pagination({\nitemsOnPage: 5,\n        cssStyle: 'light-theme'\n});\nvar search_term = $(\"#search_term\").val();\nvar date_from = '';\n$(\"#results\").html(\"\");\n$(\"#results\").append('&lt;table id=\"content\"&gt;').addClass('tftable');\n$(\"#results\").append('&lt;tbody&gt;')\n$(\"#results\").append('&lt;th&gt;From&lt;/th&gt;&lt;th&gt;To&lt;/th&gt;&lt;th&gt;Direction&lt;/th&gt;&lt;th&gt;Duration&lt;/th&gt;&lt;th&gt;Billed&lt;/th&gt;&lt;th&gt;Charge&lt;/th&gt;&lt;th&gt;Date&lt;/th&gt;');\n$.getJSON(\"/get_call_logs?search_term=\"+search_term+\"&amp;date_from=\"+date_from, function(data) {   \n     $.each( data, function( key, value ) {\n     var call_from = this[\"call_from\"]\n     from = call_from.replace(\"@phone.plivo.com\",\"\")\n      var txt = '&lt;tr&gt;&lt;td&gt;'+from+'&lt;/td&gt;';\n     var call_to = this[\"call_to\"]\n     to = call_to.replace(\"@phone.plivo.com\",\"\")\n        txt += '&lt;td&gt;'+to+'&lt;/td&gt;';\n        txt += '&lt;td&gt;'+this[\"call_direction\"]+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+this[\"call_duration\"]+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+this[\"billed_duration\"]+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+parseFloat(this[\"total_charged_cost\"]).toFixed(2)+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+this[\"created_at\"]+'&lt;/td&gt;&lt;/tr&gt;';\n        $(\"#results\").append(txt);\n\n            });\nvar items = $(\"data, tr\");\n        var numItems = items.length;\n                var perPage = 11;\n$(\"#pagination\").pagination({\n                    items: numItems,\n                    itemsOnPage: perPage,\n                    cssStyle: \"light-theme\",\n                    onPageClick: function(pageNumber) { // this is where the magic happens\n                        // someone changed page, lets hide/show trs appropriately\n                        var showFrom = perPage * (pageNumber - 1);\n                        var showTo = showFrom + perPage;\n\n                        items.hide() // first hide everything, then show for the new page\n                             .slice(showFrom, showTo).show();\n                    }\n      });\n      $(\"#results\").append('&lt;/tbody&gt;');\n      $(\"#results\").append('&lt;/table&gt;');\n\n                });\n});\n$(\"#results\").append('&lt;div id=\"pagination\"&gt;&lt;/div&gt;');\n\n});\n</code></pre>\n\n<p>I hope that this helps somebody else. It is something that has bugged me for ages. </p>\n"}], "owner": {"reputation": 1373, "user_id": 1903663, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/41d2a772b53998ed8df06c334d9a1c04?s=128&d=identicon&r=PG", "display_name": "user1903663", "link": "https://stackoverflow.com/users/1903663/user1903663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425487940, "creation_date": 1425477338, "question_id": 28856280, "link": "https://stackoverflow.com/questions/28856280/how-can-i-page-a-postrges-dataset-with-simplepagination-js", "title": "how can I page a postrges dataset with &quot;simplepagination.js&quot;?", "body": "<p>I am using sinatra, postgres, ruby and sequel ORM. The dataset is produced by this code: </p>\n\n<pre><code> cookie = request.cookies[\"cookie\"]\n  unless cookie\n      redirect '/login'\n    end\nuser_id = users.where(:validation =&gt; cookie).get(:id)\n  if params['date_from'].empty?\n    search_term = params['search_term']\n    call_logs.where(:call_to =&gt; search_term, :user_id =&gt; user_id).or(:call_from =&gt; search_term, :user_id =&gt; user_id).or(:call_direction =&gt; search_term, :user_id =&gt; user_id).to_a.to_json\n  end\n</code></pre>\n\n<p>I am not using any particular paging extension, so this may be the first problem. </p>\n\n<p>The jquery is:</p>\n\n<pre><code>$(document).ready(function() {\n$(\"#get_my_call_logs\").click(function() {\nvar search_term = $(\"#search_term\").val();\n$(\"#results\").html(\"\");\n$(\"#results\").append('&lt;table id=\"content\"&gt;').addClass('tftable');\n$(\"#results\").append('&lt;tbody&gt;')\n$(\"#results\").append('&lt;tr&gt;&lt;th&gt;From&lt;/th&gt;&lt;th&gt;To&lt;/th&gt;&lt;th&gt;Direction&lt;/th&gt;&lt;th&gt;Duration&lt;/th&gt;&lt;th&gt;Billed time&lt;/th&gt;&lt;th&gt;Charge&lt;/th&gt;&lt;th&gt;Date&lt;/th&gt;&lt;/tr&gt;');\n$.getJSON(\"/get_call_logs?search_term=\"+search_term+\"&amp;date_from=\"+date_from, function(data) {   \n     $.each( data, function( key, value ) {\n     var call_from = this[\"call_from\"]\n     from = call_from.replace(\"@phone.plivo.com\",\"\")\n      var txt = '&lt;tr&gt;&lt;td&gt;'+from+'&lt;/td&gt;';\n     var call_to = this[\"call_to\"]\n     to = call_to.replace(\"@phone.plivo.com\",\"\")\n        txt += '&lt;td&gt;'+to+'&lt;/td&gt;';\n        txt += '&lt;td&gt;'+this[\"call_direction\"]+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+this[\"call_duration\"]+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+this[\"billed_duration\"]+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+parseFloat(this[\"total_charged_cost\"]).toFixed(2)+'&lt;/td&gt;';\n        txt  += '&lt;td&gt;'+this[\"created_at\"]+'&lt;/td&gt;&lt;/tr&gt;';\n        $(\"#results\").append(txt);\n            });\n      });\n      $(\"#results\").append('&lt;/tbody&gt;');\n      $(\"#results\").append('&lt;/table&gt;');\n      $(\"#results\").append('&lt;div id=\"pagination\"&gt;&lt;/div&gt;');\n});\n});\n</code></pre>\n\n<p>So far so good, now I run into problems. I am using the simplepagination plugin. And the code is:</p>\n\n<pre><code>jQuery(function($) {\n                var items = $(\"#content tbody tr\");\n\n                var numItems = items.length;\n                var perPage = 2;\n\n                // only show the first 2 (or \"first per_page\") items initially\n                items.slice(perPage).hide();\n\n                // now setup pagination\n                $(\"#pagination\").pagination({\n                    items: numItems,\n                    itemsOnPage: perPage,\n                    cssStyle: \"light-theme\",\n                    onPageClick: function(pageNumber) { // this is where the magic happens\n                        // someone changed page, lets hide/show trs appropriately\n                        var showFrom = perPage * (pageNumber - 1);\n                        var showTo = showFrom + perPage;\n\n                        items.hide() // first hide everything, then show for the new page\n                             .slice(showFrom, showTo).show();\n                    }\n                });\n            //});       \n});\n</code></pre>\n\n<p>The data is printed on the html in its entirety with no paging present and no item count of 2 as specified above.</p>\n\n<p>What's going wrong here guys? Your help is greatly appreciated. Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-4.2"], "answers": [{"tags": [], "owner": {"reputation": 7188, "user_id": 597358, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/549be4b1e60fe2cbf6b0724802961705?s=128&d=identicon&r=PG", "display_name": "messanjah", "link": "https://stackoverflow.com/users/597358/messanjah"}, "is_accepted": true, "score": 6, "last_activity_date": 1425517054, "creation_date": 1425517054, "answer_id": 28868136, "question_id": 28856035, "link": "https://stackoverflow.com/questions/28856035/rails-rescue-from-stops-execution-flow/28868136#28868136", "title": "Rails rescue_from stops execution flow", "body": "<p>Short answer, no. <code>rescue_from</code> is intended to handle exceptions that are otherwise uncaught.</p>\n\n<p>If you want to catch a particular exception for every action in a controller, I would recommend an <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#after-filters-and-around-filters\" rel=\"noreferrer\"><code>around_action</code></a>.</p>\n\n<pre><code>class MyController &lt; ApplicationController\n  class SimpleError &lt; StandardError; end\n\n  around_action :handle_simple_errors\n\n  def index\n    # code that might raise SimpleError\n    @unreachable_code = true\n  def\n\n  private\n\n  def handle_simple_errors\n    begin\n      yield\n    rescue SimpleError\n      # handle SimpleError however\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1667, "user_id": 2352108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/285d68eb11b6411673b4c7487e595cf6?s=128&d=identicon&r=PG", "display_name": "bukk530", "link": "https://stackoverflow.com/users/2352108/bukk530"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1185, "favorite_count": 1, "accepted_answer_id": 28868136, "answer_count": 1, "score": 4, "last_activity_date": 1425517054, "creation_date": 1425476651, "question_id": 28856035, "link": "https://stackoverflow.com/questions/28856035/rails-rescue-from-stops-execution-flow", "title": "Rails rescue_from stops execution flow", "body": "<p>I'm having problems using the rescue_from</p>\n\n<pre><code>class SimpleError &lt; StandardError; end\n\nbefore_action :raise_exception\nrescue_from SimpleError, with: :rescue_exception    \n\ndef raise_exception\n    raise SimpleError\nend\n\ndef rescue_exception\n    log $!\nend\n\ndef index\n    @unreachable_code = true\ndef\n</code></pre>\n\n<p>In this code as you can see I simply raise an exception before the action starts, that is caught by the rescue_exception method. The problem is that after I catch the exception the application flow stops and the action code is never reached.\nIs it possible to continue the execution after the exception is rescued?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise"], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 3831672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZVp0M.jpg?s=128&g=1", "display_name": "Jiggs", "link": "https://stackoverflow.com/users/3831672/jiggs"}, "edited": false, "score": 0, "creation_date": 1425476402, "post_id": 28855568, "comment_id": 45977815, "body": "my params[:user] not gives &quot;nil&quot; but gives error &quot;undefined local variable or method `params&#39; for #&lt;ActionView::Template::Error:0xb05ba58&gt;&quot; actually i not get params in registration new page. i don&#39;t know why. i think you have to refer link which i mention in starting of question so you are more clear. thanks"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 0, "last_activity_date": 1425475283, "creation_date": 1425475283, "answer_id": 28855568, "question_id": 28855297, "link": "https://stackoverflow.com/questions/28855297/multiple-user-models-with-ruby-on-rails-and-devise-to-have-separate-registration/28855568#28855568", "title": "Multiple user models with Ruby On Rails and devise to have separate registration but one common login", "body": "<p>Your question is really broad but to solve the error you posted, it is erroring undefined method because of the nested hash that doesn't exist.  Here's the example:</p>\n\n<pre><code>[1] pry(main)&gt; params = {}\n=&gt; {}\n[2] pry(main)&gt; params[:user]\n=&gt; nil\n[3] pry(main)&gt; params[:user][:user_type]\nNoMethodError: undefined method `[]' for nil:NilClass\n</code></pre>\n\n<p>If your code is to expect that params[:user] won't ever exist without a <code>user_type</code> and you want to default that to company, then that would simply be:</p>\n\n<pre><code>[7] pry(main)&gt; params[:user] ||= { user_type: \"company\" }\n=&gt; {:user_type=&gt;\"company\"}\n[8] pry(main)&gt; params\n=&gt; {:user=&gt;{:user_type=&gt;\"company\"}}\n</code></pre>\n\n<p>Alternativley if you want to just return a string if params[:user] doesn't exist, you can use ||= or <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-fetch\" rel=\"nofollow\">Hash#fetch</a> with a default value.  Hash#fetch is a safer way to error handle imo.</p>\n\n<pre><code>[5] pry(main)&gt; params.fetch(:user, \"company\")\n=&gt; \"company\"\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 3831672, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZVp0M.jpg?s=128&g=1", "display_name": "Jiggs", "link": "https://stackoverflow.com/users/3831672/jiggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 28855568, "answer_count": 1, "score": 0, "last_activity_date": 1603679449, "creation_date": 1425474398, "last_edit_date": 1603679449, "question_id": 28855297, "link": "https://stackoverflow.com/questions/28855297/multiple-user-models-with-ruby-on-rails-and-devise-to-have-separate-registration", "title": "Multiple user models with Ruby On Rails and devise to have separate registration but one common login", "body": "<p>i have same problem just like this link:</p>\n<p><a href=\"https://stackoverflow.com/questions/7299618/multiple-user-models-with-ruby-on-rails-and-devise-to-have-separate-registration\">Multiple user models with Ruby On Rails and devise to have separate registration routes but one common login route</a></p>\n<p>in my app there are two model</p>\n<ol>\n<li><p>Company</p>\n</li>\n<li><p>Employee</p>\n</li>\n</ol>\n<p>my User model</p>\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable\n\n  belongs_to :usr, :polymorphic =&gt; true\nend\n</code></pre>\n<p>my Company model</p>\n<pre><code>class Company &lt; ActiveRecord::Base\n  has_many :users, :as =&gt; :usr\nend\n</code></pre>\n<p>my Employee model</p>\n<pre><code>class Employee &lt; ActiveRecord::Base\n  has_many :users, :as =&gt; :usr\nend\n</code></pre>\n<p>app/views/devise/registrations/new.html.erb</p>\n<pre><code>&lt;h2&gt;Sign up&lt;/h2&gt;\n\n&lt;%\n  # customized code begin\n\n  params[:user][:user_type] ||= 'company'\n\n  if [&quot;company&quot;, &quot;employee&quot;].include? params[:user][:user_type].downcase\n    child_class_name = params[:user][:user_type].downcase.camelize\n    user_type = params[:user][:user_type].downcase\n  else\n    child_class_name = &quot;Company&quot;\n    user_type = &quot;company&quot;\n  end\n\n  resource.usr = child_class_name.constantize.new if resource.usr.nil?\n\n  # customized code end\n%&gt;\n\n\n\n&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=&quot;field&quot;&gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=&quot;field&quot;&gt;\n    &lt;%= f.label :password %&gt;\n    &lt;% if @validatable %&gt;\n    &lt;em&gt;(&lt;%= @minimum_password_length %&gt; characters minimum)&lt;/em&gt;\n    &lt;% end %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, autocomplete: &quot;off&quot; %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=&quot;field&quot;&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password_confirmation, autocomplete: &quot;off&quot; %&gt;\n  &lt;/div&gt;\n\n\n  &lt;% # customized code begin %&gt;\n  &lt;%= fields_for resource.usr do |rf| %&gt;\n    &lt;% render :partial =&gt; &quot;#{child_class_name.underscore}_fields&quot;, :locals =&gt; { :f =&gt; rf } %&gt;\n  &lt;% end %&gt;\n\n  &lt;%= hidden_field :user, :user_type, :value =&gt; user_type %&gt;\n  &lt;% # customized code end %&gt;\n\n\n\n  &lt;div class=&quot;actions&quot;&gt;\n    &lt;%= f.submit &quot;Sign up&quot; %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;%= render &quot;devise/shared/links&quot; %&gt;\n</code></pre>\n<p>my registration create method :</p>\n<p>controllers/users/registrations_controller.rb</p>\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n def create\n    build_resource\n\n    # customized code begin\n\n    # crate a new child instance depending on the given user type\n    child_class = params[:user][:user_type].camelize.constantize\n    resource.usr = child_class.new(params[child_class.to_s.underscore.to_sym])\n\n    # first check if child instance is valid\n    # cause if so and the parent instance is valid as well\n    # it's all being saved at once\n    valid = resource.valid?\n    valid = resource.usr.valid? &amp;&amp; valid\n\n    # customized code end\n\n    if valid &amp;&amp; resource.save    # customized code\n      if resource.active_for_authentication?\n        set_flash_message :notice, :signed_up if is_navigational_format?\n        sign_in(resource_name, resource)\n        respond_with resource, :location =&gt; redirect_location(resource_name, resource)\n      else\n        set_flash_message :notice, :inactive_signed_up, :reason =&gt; inactive_reason(resource) if is_navigational_format?\n        expire_session_data_after_sign_in!\n        respond_with resource, :location =&gt; after_inactive_sign_up_path_for(resource)\n      end\n    else\n      clean_up_passwords(resource)\n      respond_with_navigational(resource) { render :new }\n    end\n  end\nend\n</code></pre>\n<p>my application helper file :</p>\n<pre><code>module ApplicationHelper\n    def my_devise_error_messages!\n    return &quot;&quot; if resource.errors.empty? &amp;&amp; resource.usr.errors.empty?\n\n    messages = usr_messages = &quot;&quot;\n\n    if !resource.errors.empty?\n      messages = resource.errors.full_messages.map { |msg| content_tag(:li, msg) }.join\n    end\n\n    if !resource.usr.errors.empty?\n      usr_messages = resource.usr.errors.full_messages.map { |msg| content_tag(:li, msg) }.join\n    end\n\n    messages = messages + usr_messages   \n    sentence = I18n.t(&quot;errors.messages.not_saved&quot;,\n                      :count =&gt; resource.errors.count + resource.usr.errors.count,\n                      :resource =&gt; resource.class.model_name.human.downcase)\n\n    html = &lt;&lt;-HTML\n    &lt;div id=&quot;error_explanation&quot;&gt;\n    &lt;h2&gt;#{sentence}&lt;/h2&gt;\n    &lt;ul&gt;#{messages}&lt;/ul&gt;\n    &lt;/div&gt;\n    HTML\n\n    html.html_safe\n  end\nend\n</code></pre>\n<p>but i got error something like this when i open any user sign_up page:</p>\n<pre><code>localhost:3000/emloyees/sign_up **OR**\n\nlocalhost:3000/companies/sign_up\n</code></pre>\n<p>error in registration view</p>\n<p>ERROR :-</p>\n<p><img src=\"https://i.stack.imgur.com/CFkFQ.png\" alt=\"enter image description here\" /></p>\n<p>So what am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "elasticsearch"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4632224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cbee4e35d29e94416828944f9435bf?s=128&d=identicon&r=PG&f=1", "display_name": "Nuflin88", "link": "https://stackoverflow.com/users/4632224/nuflin88"}, "edited": false, "score": 0, "creation_date": 1425478456, "post_id": 28855675, "comment_id": 45979288, "body": "I&#39;m not very familiar with developing apps on heroku. Where should I look for this variable. I&#39;ve run this command and the output was :"}, {"owner": {"reputation": 1, "user_id": 4632224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cbee4e35d29e94416828944f9435bf?s=128&d=identicon&r=PG&f=1", "display_name": "Nuflin88", "link": "https://stackoverflow.com/users/4632224/nuflin88"}, "edited": false, "score": 0, "creation_date": 1425478575, "post_id": 28855675, "comment_id": 45979363, "body": "heroku config | grep BONSAI BONSAI_URL:                   <a href=\"https://pe1if769:t1dfffqa1tfq7a2d@apple-4664865.us-east-1.bonsai.io\" rel=\"nofollow noreferrer\">pe1if769:t1dfffqa1tfq7a2d@apple-4664865.us-east-1.bonsai.io</a>"}, {"owner": {"reputation": 971, "user_id": 2597718, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/451afe490759d58b0f61b2dd5b47ff8a?s=128&d=identicon&r=PG", "display_name": "Shouichi", "link": "https://stackoverflow.com/users/2597718/shouichi"}, "reply_to_user": {"reputation": 1, "user_id": 4632224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cbee4e35d29e94416828944f9435bf?s=128&d=identicon&r=PG&f=1", "display_name": "Nuflin88", "link": "https://stackoverflow.com/users/4632224/nuflin88"}, "edited": false, "score": 0, "creation_date": 1425480608, "post_id": 28855675, "comment_id": 45980740, "body": "I suggest you to read this article <a href=\"https://devcenter.heroku.com/articles/bonsai#using-tire-deprecated\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/bonsai#using-tire-deprecated</a>"}, {"owner": {"reputation": 1, "user_id": 4632224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cbee4e35d29e94416828944f9435bf?s=128&d=identicon&r=PG&f=1", "display_name": "Nuflin88", "link": "https://stackoverflow.com/users/4632224/nuflin88"}, "edited": false, "score": 0, "creation_date": 1425627696, "post_id": 28855675, "comment_id": 46048496, "body": "I did what was said in the tutorial but I still have the same issue..  Maybe you could pin point me where should I put this BONSAI_URL to get this to work?"}], "tags": [], "owner": {"reputation": 971, "user_id": 2597718, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/451afe490759d58b0f61b2dd5b47ff8a?s=128&d=identicon&r=PG", "display_name": "Shouichi", "link": "https://stackoverflow.com/users/2597718/shouichi"}, "is_accepted": false, "score": 0, "last_activity_date": 1425475654, "creation_date": 1425475654, "answer_id": 28855675, "question_id": 28855294, "link": "https://stackoverflow.com/questions/28855294/ror-elasticsearch-on-heroku-faraday-connection-issue/28855675#28855675", "title": "RoR: Elasticsearch on heroku - Faraday connection issue", "body": "<p>Did you check the elasticsearch config? Check if the config uses the environment variable (something like <code>BONSAI_URL</code>) for the connection.</p>\n"}], "owner": {"reputation": 1, "user_id": 4632224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cbee4e35d29e94416828944f9435bf?s=128&d=identicon&r=PG&f=1", "display_name": "Nuflin88", "link": "https://stackoverflow.com/users/4632224/nuflin88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425475654, "creation_date": 1425474387, "last_edit_date": 1425475427, "question_id": 28855294, "link": "https://stackoverflow.com/questions/28855294/ror-elasticsearch-on-heroku-faraday-connection-issue", "title": "RoR: Elasticsearch on heroku - Faraday connection issue", "body": "<p>I've run an command in terminal to seed DB on heroku:</p>\n\n<pre><code>heroku run rake db:seed\n\n and this is what happend  \n\nrake aborted!\nFaraday::ConnectionFailed: Connection refused - connect(2)\n/app/vendor/bundle/ruby/2.0.0/gems/faraday-0.9.1/lib/faraday/adapter/net_http.rb:82:in `perform_request'\n/app/vendor/bundle/ruby/2.0.0/gems/faraday-0.9.1/lib/faraday/adapter/net_http.rb:40:in `block in call'\n/app/vendor/bundle/ruby/2.0.0/gems/faraday-0.9.1/lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'\n/app/vendor/bundle/ruby/2.0.0/gems/faraday-0.9.1/lib/faraday/adapter/net_http.rb:32:in `call'\n/app/vendor/bundle/ruby/2.0.0/gems/faraday-0.9.1/lib/faraday/rack_builder.rb:139:in `build_response'\n/app/vendor/bundle/ruby/2.0.0/gems/faraday-0.9.1/lib/faraday/connection.rb:377:in `run_request'\n/app/vendor/bundle/ruby/2.0.0/gems/elasticsearch-transport-1.0.6/lib/elasticsearch/transport/transport/http/faraday.rb:21:in `block in perform_request'\n/app/vendor/bundle/ruby/2.0.0/gems/elasticsearch-transport-1.0.6/lib/elasticsearch/transport/transport/base.rb:187:in `call'\n/app/vendor/bundle/ruby/2.0.0/gems/elasticsearch-transport-1.0.6/lib/elasticsearch/transport/transport/base.rb:187:in `perform_request'\n/app/vendor/bundle/ruby/2.0.0/gems/elasticsearch-transport-1.0.6/lib/elasticsearch/transport/transport/http/faraday.rb:20:in `perform_request'\n/app/vendor/bundle/ruby/2.0.0/gems/elasticsearch-transport-1.0.6/lib/elasticsearch/transport/client.rb:111:in `perform_request'\n/app/vendor/bundle/ruby/2.0.0/gems/elasticsearch-api-1.0.6/lib/elasticsearch/api/actions/index.rb:99:in `index'\n/app/vendor/bundle/ruby/2.0.0/gems/searchkick-0.8.5/lib/searchkick/index.rb:26:in `store'\n/app/vendor/bundle/ruby/2.0.0/gems/searchkick-0.8.5/lib/searchkick/logging.rb:24:in `block in store_with_instrumentation'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:164:in `block in instrument'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:164:in `instrument'\n/app/vendor/bundle/ruby/2.0.0/gems/searchkick-0.8.5/lib/searchkick/logging.rb:23:in `store_with_instrumentation'\n/app/vendor/bundle/ruby/2.0.0/gems/searchkick-0.8.5/lib/searchkick/model.rb:80:in `reindex'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:427:in `block in make_lambda'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:250:in `call'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:250:in `block in conditional'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:245:in `call'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:245:in `block in conditional'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:245:in `call'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:245:in `block in conditional'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:245:in `call'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:245:in `block in conditional'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `call'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `_run_callbacks'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:734:in `_run_commit_callbacks'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/transactions.rb:314:in `committed!'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/transaction.rb:93:in `commit_records'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/transaction.rb:157:in `commit'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/transaction.rb:179:in `commit_transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/transaction.rb:198:in `within_new_transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/transactions.rb:220:in `transaction'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/transactions.rb:344:in `with_transaction_returning_status'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/transactions.rb:291:in `save!'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/persistence.rb:51:in `create!'\n/app/db/seeds.rb:2:in `&lt;top (required)&gt;'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `block in load'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n/app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\n/app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/engine.rb:547:in `load_seed'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/tasks/database_tasks.rb:250:in `load_seed'\n/app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/railties/databases.rake:180:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Anyone have any idea what should I do to resolve this issue?</p>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1425474849, "creation_date": 1425474849, "answer_id": 28855436, "question_id": 28855221, "link": "https://stackoverflow.com/questions/28855221/editing-urls-in-ruby-in-one-go/28855436#28855436", "title": "Editing URLs in Ruby in one go", "body": "<p>You can use block version of <code>gsub</code>. It will pass each match to the block, from which you must return the replacement value.</p>\n\n<p>Silly example: </p>\n\n<pre><code>replaced = 'Long, complicated, inefficient'.gsub(/\\w+/) do |match|\n  puts \"match is: #{match}\"\n  if match.length &gt; 5\n    'big word'\n  else\n    match\n  end\nend\n\nputs replaced\n# &gt;&gt; match is: Long\n# &gt;&gt; match is: complicated\n# &gt;&gt; match is: inefficient\n# &gt;&gt; Long, big word, big word\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "is_accepted": true, "score": 0, "last_activity_date": 1427280511, "creation_date": 1427280511, "answer_id": 29253536, "question_id": 28855221, "link": "https://stackoverflow.com/questions/28855221/editing-urls-in-ruby-in-one-go/29253536#29253536", "title": "Editing URLs in Ruby in one go", "body": "<p>Came up with a solution using Nokogiri</p>\n\n<pre><code>html_links.xpath('//a').each do |link|\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 29253536, "answer_count": 2, "score": 0, "last_activity_date": 1427280511, "creation_date": 1425474146, "question_id": 28855221, "link": "https://stackoverflow.com/questions/28855221/editing-urls-in-ruby-in-one-go", "title": "Editing URLs in Ruby in one go", "body": "<p>I have a large string that goes like this:</p>\n\n<pre><code>\"This is the text and this is a &lt;a href='http://...' class='some_link'&gt; link&lt;/a&gt; that I would like to keep, however this is a &lt;a href='http://...'&gt;link with a keyword&lt;/a&gt; that I would like to remove\"\n</code></pre>\n\n<p>My objective is to substitute all URLS with '#' if there is a special keyword within the  tag. </p>\n\n<p>Currently my actions are:</p>\n\n<ol>\n<li><code>arr = str.scan(/&lt;a(.*?)a&gt;/)</code> to find all the links in my string</li>\n<li><code>.join</code> each arr item and see if it <code>includes?</code> the keyword I am looking for</li>\n<li>If yes, scan the whole body again and <code>gsub!</code> the url for #</li>\n</ol>\n\n<p>Long, complicated, inefficient. Any idea how can I do this operation in one go?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425472228, "post_id": 28854493, "comment_id": 45975125, "body": "<code>&#39;\\\\&#39;</code> is the escape sequence for a single backslash, you probably want <code>&#39;\\\\\\\\&#39;</code>"}, {"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425472277, "post_id": 28854493, "comment_id": 45975163, "body": "I have tried that as well. I got the same response."}], "answers": [{"comments": [{"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1425478165, "post_id": 28854674, "comment_id": 45979070, "body": "Hi, Can you give some examples to change the directory to the <code>UNC</code> path like <code>\\\\server_name\\testing</code> from my working directory path <code>&#39;home&#47;Documents&#47;projects&#47;&#39;</code>"}], "tags": [], "owner": {"reputation": 1374, "user_id": 1818292, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f2badf225f7ad2f14f75c8afd1fe1c9b?s=128&d=identicon&r=PG", "display_name": "Satara", "link": "https://stackoverflow.com/users/1818292/satara"}, "is_accepted": false, "score": 0, "last_activity_date": 1425472543, "creation_date": 1425472543, "answer_id": 28854674, "question_id": 28854493, "link": "https://stackoverflow.com/questions/28854493/how-can-i-check-the-file-exists-in-network-unc-path-in-ruby/28854674#28854674", "title": "How can I check the file exists in Network UNC path in ruby?", "body": "<p>Make sure your working directory is set properly, because your path will be considered relative to it. You can use <code>Dir.pwd</code> to get your working directory and <code>Dir.chdir</code> to change it.</p>\n"}, {"comments": [{"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1425478085, "post_id": 28854761, "comment_id": 45979020, "body": "Is it possible that we can check the path exists? and a file with specified extension exists and do other ruby stuffs with this gem files? Thanks"}, {"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "reply_to_user": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1425478660, "post_id": 28854761, "comment_id": 45979418, "body": "It doesn&#39;t have method such as <code>File#exists?</code> but you can use <code>ls</code> method to check file is exists or run <code>smbclient -L SERVERNAME | grep -i &quot;YOURSHARENAME&quot;</code>."}, {"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1425479029, "post_id": 28854761, "comment_id": 45979657, "body": "Thanks. My current working directory is <code>&#39;home&#47;Documents&#47;projects&#47;&#39;</code>. So there is no other way that we can check the file path is correct and merge files from the path, etc., without using this gems?"}], "tags": [], "owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1425472782, "creation_date": 1425472782, "answer_id": 28854761, "question_id": 28854493, "link": "https://stackoverflow.com/questions/28854493/how-can-i-check-the-file-exists-in-network-unc-path-in-ruby/28854761#28854761", "title": "How can I check the file exists in Network UNC path in ruby?", "body": "<p><code>\\\\server_name\\testing</code> is path to SAMBA resource, so you can't use standard ruby File IO. </p>\n\n<p>Use <a href=\"https://www.samba.org/samba/docs/man/manpages-3/smbclient.1.html\" rel=\"nofollow\">smbclient</a> to check path or <a href=\"https://github.com/johnae/sambal\" rel=\"nofollow\">sambal</a> (wrapper around <code>smbclient</code>).</p>\n"}], "owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 715, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425472782, "creation_date": 1425471970, "question_id": 28854493, "link": "https://stackoverflow.com/questions/28854493/how-can-i-check-the-file-exists-in-network-unc-path-in-ruby", "title": "How can I check the file exists in Network UNC path in ruby?", "body": "<p>I have a text box where the user can type the <code>UNC path</code> like <code>'\\\\server_name\\testing\\'</code></p>\n\n<p>How can I check this <code>UNC path</code> exists?</p>\n\n<p>I have tried lot of options from the <code>File</code> and <code>Directory</code> and did not get any clue.</p>\n\n<p>My current code is</p>\n\n<pre><code>def get_files(path)\n  Dir.entries(path).select {|f| File.file?(f)}\nend\n</code></pre>\n\n<p>When I tried to access <code>get_files('\\\\server_name\\testing\\')</code>. I got <code>No such file or directory - No such directory: \\\\server_name\\testing\\</code></p>\n\n<p>When I try to access through windows explorer it exists.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "arrays", "random"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1425472451, "post_id": 28853957, "comment_id": 45975274, "body": "How many rows has that table in total? Are the primary ids in that table complete or are there gaps (did you delete records)?"}], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1425471384, "post_id": 28854084, "comment_id": 45974620, "body": "But this mean I always get 400 records, right? I&#39;d need a random count of results (let&#39;s say between 200 and 400). And also, there&#39;s 400 queries on database, but in the other approach, there&#39;s only one record and 400 times ran the method for grabbing random records. Just wondering what&#39;s more efficient."}, {"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1425471591, "post_id": 28854084, "comment_id": 45974757, "body": "ORDER BY can negatively influence query performance on large database tables.  I wouldn&#39;t use this in production code."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1425472135, "post_id": 28854084, "comment_id": 45975077, "body": "@user984621: I updated my answer. It would only query the database once."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1425472334, "post_id": 28854084, "comment_id": 45975192, "body": "@mcfinnigan: Ordering in the database is definitely faster than loading all records into memory first (like the suggested in the question). Especially for bigger databases. But you are right this might not be a good idea for a table with millions on lines."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1425472027, "last_edit_date": 1425472027, "creation_date": 1425470807, "answer_id": 28854084, "question_id": 28853957, "link": "https://stackoverflow.com/questions/28853957/rails-how-to-fetch-random-records-from-an-object/28854084#28854084", "title": "Rails - how to fetch random records from an object?", "body": "<p>I would add the following scope to the model (depends on the database you are using):</p>\n\n<pre><code># to model/model.rb\n# 'RANDOM' works with postgresql and sqlite, whereas mysql uses 'RAND'\nscope :random, -&gt; { order('RAND()') } \n</code></pre>\n\n<p>Then the following query would load a random number (in the range of 200-400) of objects in <strong>one query</strong>:</p>\n\n<pre><code>Model.random.limit(rand(200...400))\n</code></pre>\n\n<p>If you really want to do that in Rails and not in the database, then load all records and use <code>sample</code>:</p>\n\n<pre><code>Model.all.sample(rand(200..400))\n</code></pre>\n\n<p>But that to be slower (depending on the number of entries in the database), because Rails would load all records from the database and instantiate them what might take loads of memory.</p>\n"}, {"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1425471242, "post_id": 28854095, "comment_id": 45974525, "body": "Hmm.. I am trying that approach, but got this error: <code>TypeError (no implicit conversion of Range into Integer):</code>"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1425472065, "post_id": 28854095, "comment_id": 45975045, "body": "you can try data.sample(rand(10..100))"}], "tags": [], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "is_accepted": false, "score": 0, "last_activity_date": 1425472494, "last_edit_date": 1425472494, "creation_date": 1425470830, "answer_id": 28854095, "question_id": 28853957, "link": "https://stackoverflow.com/questions/28853957/rails-how-to-fetch-random-records-from-an-object/28854095#28854095", "title": "Rails - how to fetch random records from an object?", "body": "<p>Use <code>data.sample(rand(100..200))</code> \nfor more info why rand is not working, read here <a href=\"https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/4555\" rel=\"nofollow\">https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/4555</a></p>\n"}, {"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 0, "last_activity_date": 1425471823, "last_edit_date": 1425471823, "creation_date": 1425471232, "answer_id": 28854222, "question_id": 28853957, "link": "https://stackoverflow.com/questions/28853957/rails-how-to-fetch-random-records-from-an-object/28854222#28854222", "title": "Rails - how to fetch random records from an object?", "body": "<p>Another way, which is not DB specific is :</p>\n\n<pre><code>def self.random_record\n  self.where('something = ? and id = ?', \"something\", rand(self.count))\nend\n</code></pre>\n\n<p>The only things here is - 2 <em>queries</em> are being performed. <code>self.count</code> is doing one query - <code>SELECT COUNT(*) FROM models</code> and the other is your actual query to get a <em>random</em> record.</p>\n\n<p>Well, now suppose you want <code>n</code> random records. Then write it like :</p>\n\n<pre><code>def self.random_records n\n  records = self.count\n  rand_ids = Array.new(n) { rand(records) }\n  self.where('something = ? and id IN (?)', \n             \"something\", rand_ids )\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 3814138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0480e5ad42e289d73840917d28999fd?s=128&d=identicon&r=PG&f=1", "display_name": "Stanley", "link": "https://stackoverflow.com/users/3814138/stanley"}, "is_accepted": false, "score": 0, "last_activity_date": 1425471380, "creation_date": 1425471380, "answer_id": 28854286, "question_id": 28853957, "link": "https://stackoverflow.com/questions/28853957/rails-how-to-fetch-random-records-from-an-object/28854286#28854286", "title": "Rails - how to fetch random records from an object?", "body": "<p>It really depends how much effort you want to put into optimizing this, because there's more than one solution. Here's 2 options..</p>\n\n<p>Something simple is to use <code>ORDER BY RAND() LIMIT 400</code> to randomly select 400 items.</p>\n\n<p>Alternatively, just select everything under the moon and then use Ruby to randomly pick 400 out of the total result set, ex:</p>\n\n<pre><code>data = Model.where(something: 'something').all # all is necessary to exec query\n400.times do\n  data.sample # returns a random model\nend\n</code></pre>\n\n<p>I wouldn't recommend the second method, but it should work.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1425472494, "creation_date": 1425470465, "question_id": 28853957, "link": "https://stackoverflow.com/questions/28853957/rails-how-to-fetch-random-records-from-an-object", "title": "Rails - how to fetch random records from an object?", "body": "<p>I am doing something like this:</p>\n\n<pre><code>data = Model.where('something=\"something\"')\nrandom_data = data.rand(100..200)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>NoMethodError (private method `rand' called for #&lt;User::ActiveRecord_Relation:0x007fbab27d7ea8&gt;):\n</code></pre>\n\n<p>Once I get this random data, I need to iterate through that data, like this:</p>\n\n<pre><code>random_data.each do |rd|\n  ...\n</code></pre>\n\n<p>I know there's a way to fetch random data in MySQL, but I need to pick the random data like 400 times, so I think to load data once from database and 400 times to pick random number is more efficient than to run the query 400 times on MySQL.</p>\n\n<p>But - how to get rid of that error?</p>\n\n<pre><code>NoMethodError (private method `rand' called for #&lt;User::ActiveRecord_Relation:0x007fbab27d7ea8&gt;):\n</code></pre>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["ruby", "python-2.7", "python-import"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425470840, "post_id": 28853954, "comment_id": 45974229, "body": "Your title and text does not match. Do you want to import code or data? If the former, what does it mean to import Ruby code into Python?"}, {"owner": {"reputation": 655, "user_id": 2239262, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/W64yR.jpg?s=128&g=1", "display_name": "NagaLakshmi", "link": "https://stackoverflow.com/users/2239262/nagalakshmi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425471228, "post_id": 28853954, "comment_id": 45974510, "body": "@sawa: importing the functionality of the ruby code in python"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1425472059, "post_id": 28853954, "comment_id": 45975042, "body": "@NagaLakshmi an implementation is language specific, the Python interpreter does not understand Ruby code."}], "owner": {"reputation": 655, "user_id": 2239262, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/W64yR.jpg?s=128&g=1", "display_name": "NagaLakshmi", "link": "https://stackoverflow.com/users/2239262/nagalakshmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425471499, "creation_date": 1425470457, "last_edit_date": 1425471172, "question_id": 28853954, "link": "https://stackoverflow.com/questions/28853954/importing-a-ruby-file-or-code-in-python-script", "title": "Importing a ruby file (or) code in python script", "body": "<p>I had a ruby script which uses few ruby libraries to perform some action and gives an output. I want this ruby script output to be stored as a dictionary in a python script. For this, I want to import the ruby file similar to import python modules. Is there anyway to directly import the ruby file in python so that I can use the functionality of the ruby script inside python program instead executing the ruby script from python using modules like Popen?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 1009, "user_id": 735143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5198cf315801c6e58fa1f1192adb114?s=128&d=identicon&r=PG", "display_name": "Dabrorius", "link": "https://stackoverflow.com/users/735143/dabrorius"}, "edited": false, "score": 1, "creation_date": 1425469247, "post_id": 28853361, "comment_id": 45973296, "body": "can you share full content of PostController please?"}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1425544064, "post_id": 28853361, "comment_id": 46008986, "body": "Hey @Jack Daniel. It appears that my answer introduced some confusion. Would you mind updating your question, and add the templates (both of <code>new</code> view, and of your form - in case you moved it to separate partial)? I&#39;d like to update my answer accordingly to omit any confusion in the future. Cheers!"}], "answers": [{"comments": [{"owner": {"reputation": 2147, "user_id": 1435064, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/YtaeH.jpg?s=128&g=1", "display_name": "Jack Daniel", "link": "https://stackoverflow.com/users/1435064/jack-daniel"}, "edited": false, "score": 0, "creation_date": 1425470101, "post_id": 28853644, "comment_id": 45973740, "body": "tnx for great and detailed answer. I got it."}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1425470248, "post_id": 28853644, "comment_id": 45973827, "body": "your second answer is not correct. The form does not need @post to submit a valid post, it just uses it as a place to put the errors if the submission is invalid. The new page will work completely fine as long as you don&#39;t need to display the errors."}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1425470417, "post_id": 28853644, "comment_id": 45973947, "body": "Let me check it - I&#39;ll do some tests across coupe versions of Rails, and I&#39;ll update my answer. Thank you for pointing that out!"}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "reply_to_user": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 1, "creation_date": 1425474934, "post_id": 28853644, "comment_id": 45976837, "body": "Hey @RailsOuter! I tried to create simple app, and scaffolded simple <code>Product</code> . When I commented out <code>@product = Product.new</code> in my <code>ProductsController#new</code>, the application failed on that action with error <code>First argument in form cannot contain nil or be empty</code>. This is when in view I still have <code>&lt;%= form_for(@product) do |f| %&gt;</code>. On the other hand, when I convert the <code>form_tag</code> in the view the following way (I deleted @product) - <code>&lt;%= form_for do |f| %&gt;</code>, the error thrown is <code>wrong number of arguments (0 for 1..2)</code>. Would you mind providing example code for your case? I tested for Rails 4.2"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1425476898, "post_id": 28853644, "comment_id": 45978166, "body": "@Pawel Dawczak ,That&#39;s because you are using <code>form_for @product</code>, which is not the only way to do it. You can say <code>form_for :product, url: products_path do</code> , and it will work, we didn&#39;t use the <code>@product</code>, now go ahead and delete it from your controller, the view will complain about the errors only, if you remove the lines that correspond to the error display in your form, it will work just fine. Conclusion : You don&#39;t need <code>@post</code> in the new action if you are not going to display errors."}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "reply_to_user": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1425543801, "post_id": 28853644, "comment_id": 46008864, "body": "Hey @RailsOuter! Thanks for clarification, now I see your point! Because there multiple ways of using <code>form_for</code>, and the question was about &quot;how does Rails magic work&quot;, I assumed, that we&#39;re dealing with the most &quot;magical&quot; example of using <code>form_for</code>. Just to be clear - <b>I have never suggested</b> in my answer that <code>form_for @post</code> is <i>the only way</i> to proceed with forms. I think it&#39;s worth putting an example of &quot;problematic&quot; template to the question, so it is clear what exactly we work with. I&#39;ll put all my effort to update the answer to omit any <i>confusion</i>. Again - thank you for your input!"}], "tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": true, "score": 1, "last_activity_date": 1425469582, "creation_date": 1425469582, "answer_id": 28853644, "question_id": 28853361, "link": "https://stackoverflow.com/questions/28853361/redirect-to-in-rails-4/28853644#28853644", "title": "Redirect_to in Rails 4", "body": "<p>Q1). This is part of one of main RoR's mantras - convention over configuration. It just assumes, when performing <code>redirect_to @post</code>, you actually want to see the <code>@post</code> resource. The standard REST action of \"reading\" the resource is <code>show</code>. </p>\n\n<p>But, if - for example - in your view you will do something like</p>\n\n<pre><code>&lt;%= link_to @post.title, @post, method: :delete %&gt;\n</code></pre>\n\n<p>What will be generated by that will take you to <code>destroy</code> action of <code>@post</code>'s resource.</p>\n\n<p>Having conventions like this make you write less code, and - make you happy!</p>\n\n<p>Q2). I'm surprised if what you mentioned worked. It shouldn't, because similar magic is performed in your <code>form_for @post</code> tag in your views. If <code>@post</code> is empty, <code>form_for</code> shouldn't be able to resolve what url to generate, or how to behave in general - depending on <code>Post.new</code> stored in <code>@post</code> it assumes you want to <code>create</code> the resource, and prepare your <code>&lt;form&gt;</code> tag to submit with <code>POST</code> method, but if in <code>@post</code> there is stored already persisted resource, say <code>Post.find(1)</code>, it will create the <code>&lt;form&gt;</code> to be submitted with <code>PATCH</code> method.</p>\n\n<p>Again - based on convention, you can write less code, to achieve more.</p>\n\n<p><em>I strongly advise against <strong>omitting</strong> something like <code>@post = Post.new</code>. It may lead to hard to identify bugs, even if it worked for you at the moment</em></p>\n\n<p>Hope it clarifies things!</p>\n\n<p>Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "is_accepted": false, "score": 1, "last_activity_date": 1425469778, "creation_date": 1425469778, "answer_id": 28853715, "question_id": 28853361, "link": "https://stackoverflow.com/questions/28853361/redirect-to-in-rails-4/28853715#28853715", "title": "Redirect_to in Rails 4", "body": "<p>First questions: it redirects you to the show page using the <code>url_for</code> method (you can read its source if you are curious), remember that @book has an id so it takes that id and includes it in the url of the <code>/books/:id</code></p>\n\n<p>Second question : you need @post for when you submit an invalid form, then @post will be populated with the errors and displayed on the <code>new</code> page. try to submit an invalid post, you will get complains about a not defined method. </p>\n\n<p>to display the errors of an invalid submission : </p>\n\n<pre><code>&lt;%= form_for :post posts_path do |f| %&gt;\n\n  &lt;% if @post.errors.any? %&gt;\n</code></pre>\n\n<p>See how we used @post above? just to get the errors in it. </p>\n"}, {"tags": [], "owner": {"reputation": 1374, "user_id": 1818292, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f2badf225f7ad2f14f75c8afd1fe1c9b?s=128&d=identicon&r=PG", "display_name": "Satara", "link": "https://stackoverflow.com/users/1818292/satara"}, "is_accepted": false, "score": 1, "last_activity_date": 1425469937, "creation_date": 1425469937, "answer_id": 28853765, "question_id": 28853361, "link": "https://stackoverflow.com/questions/28853361/redirect-to-in-rails-4/28853765#28853765", "title": "Redirect_to in Rails 4", "body": "<p>When passing a record to <code>redirect_to</code> the url will be generated by calling <code>url_for</code>, which will return a named url for that record. For this it uses the class name for lookup. So passing the Post record will attempt to use the <code>post_path</code> route with the original record as parameter which will resolve in <code>/posts/:id</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 3976093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8518ca2f23b60b10803c6e09a03b1dd?s=128&d=identicon&r=PG", "display_name": "nibbex", "link": "https://stackoverflow.com/users/3976093/nibbex"}, "is_accepted": false, "score": 0, "last_activity_date": 1425470232, "creation_date": 1425470232, "answer_id": 28853870, "question_id": 28853361, "link": "https://stackoverflow.com/questions/28853361/redirect-to-in-rails-4/28853870#28853870", "title": "Redirect_to in Rails 4", "body": "<p><strong>First question</strong></p>\n\n<p>Rails magic.</p>\n\n<p>As you pass an ActiveRecord object to redirect, the restful routing interprets this as you wanting to go to the show page of that object.</p>\n\n<p>Plenty of different ways to use redirect_to <a href=\"http://apidock.com/rails/ActionController/Base/redirect_to\" rel=\"nofollow\">here</a>.</p>\n\n<p><strong>Second question</strong></p>\n\n<p>Usually <code>@post = Post.new</code> is required as you reference <code>@post</code> in the new action as your forms when constructed with <code>form_for</code> .. useful for validation and dealing with errors. </p>\n\n<p>Technically you could use a <code>form_tag</code> and define <code>Post.new</code> right there in the form. This would mean the <code>@post = Post.new</code> is redundant and works when you comment it out. This way would mean you have no way to pass your objects errors back to the user on the new page though.</p>\n"}], "owner": {"reputation": 2147, "user_id": 1435064, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/YtaeH.jpg?s=128&g=1", "display_name": "Jack Daniel", "link": "https://stackoverflow.com/users/1435064/jack-daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 28853644, "answer_count": 4, "score": 0, "last_activity_date": 1425471107, "creation_date": 1425468756, "last_edit_date": 1425471107, "question_id": 28853361, "link": "https://stackoverflow.com/questions/28853361/redirect-to-in-rails-4", "title": "Redirect_to in Rails 4", "body": "<p>For example I have a controller PostController in RoR 4. and actions in it:</p>\n\n<pre><code>def index\n    @posts = Post.all.order('created_at DESC')\nend\n\ndef new\n    @post = Post.new #second question\nend\n\ndef create\n    @post = Post.new(post_params)\n    post.save\n    redirect_to @post #first question\nend\n\ndef show\n    @post = Post.find(params[:id])\nend\n\nprivate\n    def post_params\n        params.require(:post).permit(:title, :body)\n    end\n</code></pre>\n\n<p>so, the first question is: Why when we write <code>redirect_to @post</code> it automatically redirect to <code>show/id</code>? How rails know, that it must go to <code>show</code> view? </p>\n\n<p>second question: why I must write <code>@post = Post.new</code> in new action? when I comment it, I also can create a <code>Post</code>. What is the deference write it in <code>new</code> action or missing it?</p>\n\n<p>I'm new in rails and there are many magic in it </p>\n"}, {"tags": ["java", "ruby", "ruby-on-rails-4", "networking", "bandwidth"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1425469423, "post_id": 28853206, "comment_id": 45973387, "body": "You want to use the Rabbitmq management system: <a href=\"http://www.rabbitmq.com/management.html\" rel=\"nofollow noreferrer\">rabbitmq.com/management.html</a>"}, {"owner": {"reputation": 119, "user_id": 1117381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf108e29969d68824acf5883a28920f1?s=128&d=identicon&r=PG", "display_name": "Rimon", "link": "https://stackoverflow.com/users/1117381/rimon"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1425504404, "post_id": 28853206, "comment_id": 45995608, "body": "@Anthony Is it possible to measure bandwidth for a single message transmission using this  RabbitMq management system ?"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 3814138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0480e5ad42e289d73840917d28999fd?s=128&d=identicon&r=PG&f=1", "display_name": "Stanley", "link": "https://stackoverflow.com/users/3814138/stanley"}, "is_accepted": false, "score": 0, "last_activity_date": 1425471575, "creation_date": 1425471575, "answer_id": 28854355, "question_id": 28853206, "link": "https://stackoverflow.com/questions/28853206/transfer-data-measurement-between-client-raspberry-pi-server-http-amqp-mqtt/28854355#28854355", "title": "Transfer data measurement between client (raspberry pi) server (http/amqp/mqtt)", "body": "<p>Without a doubt there's better ways, but an easy one I've used is to send the request to a local instance of <strong>nginx</strong> (or whatever http server you prefer) and then just check the logs for the request_body size value.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 1117381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf108e29969d68824acf5883a28920f1?s=128&d=identicon&r=PG", "display_name": "Rimon", "link": "https://stackoverflow.com/users/1117381/rimon"}, "is_accepted": true, "score": 1, "last_activity_date": 1426164272, "last_edit_date": 1426164272, "creation_date": 1426155716, "answer_id": 29007137, "question_id": 28853206, "link": "https://stackoverflow.com/questions/28853206/transfer-data-measurement-between-client-raspberry-pi-server-http-amqp-mqtt/29007137#29007137", "title": "Transfer data measurement between client (raspberry pi) server (http/amqp/mqtt)", "body": "<p>I have made some approach with different tools like tcpdump, but I got <a href=\"https://www.wireshark.org/\" rel=\"nofollow\">Wireshark</a>, provide a lot of convenient features and it has nice graphical front-end, plus some integrated sorting and filtering options. Solved this query sending individual JSON data from client to server and find easy way to measure bandwidth information for individual communication.</p>\n"}], "owner": {"reputation": 119, "user_id": 1117381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf108e29969d68824acf5883a28920f1?s=128&d=identicon&r=PG", "display_name": "Rimon", "link": "https://stackoverflow.com/users/1117381/rimon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 29007137, "answer_count": 2, "score": 1, "last_activity_date": 1426164272, "creation_date": 1425468218, "last_edit_date": 1425943442, "question_id": 28853206, "link": "https://stackoverflow.com/questions/28853206/transfer-data-measurement-between-client-raspberry-pi-server-http-amqp-mqtt", "title": "Transfer data measurement between client (raspberry pi) server (http/amqp/mqtt)", "body": "<p>I want to measure bandwidth for message transfer between client and server using different protocols: in both case, like client(raspberry pi) to server and server to client(raspberry pi).</p>\n\n<p>Let's say I am sending/receiving the following json message from Ruby or Java program to either AMQP (RabbitMQ broker), Mqtt (Mosquito broker) or HTTP server (rails application).</p>\n\n<p><strong>Message</strong>:</p>\n\n<pre><code>{   \n\"unit1\": { \"state\": [ { \"ON\": \"200\", \"time\": \"12212\" } ] }\n}\n</code></pre>\n\n<p>How can I calculate the amount of bandwidth required (kilobytes or bytes) to send/receive this message? Event if I use Ruby or Java REST program to send this message to HTTP server, how can I calculate these required data?</p>\n\n<p>Is there any API in Ruby or Java to calculate from application layer, or in TCP layer, can I use any tools to calculate a particular port and IP address? Can anyone tell me what other approaches are there to do this measurement?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unicode", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1425468082, "post_id": 28853047, "comment_id": 45972686, "body": "may help you - <a href=\"http://stackoverflow.com/questions/5021636/rails-2-3-2-ruby-1-8-6-encoding-question-actioncontroller-returning-utf-8\" title=\"rails 2 3 2 ruby 1 8 6 encoding question actioncontroller returning utf 8\">stackoverflow.com/questions/5021636/&hellip;</a>  and  <a href=\"http://stackoverflow.com/a/4585339/2767755\">stackoverflow.com/a/4585339/2767755</a>"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1425468206, "post_id": 28853047, "comment_id": 45972751, "body": "<a href=\"http://ruby-doc.org/stdlib-1.8.6/libdoc/nkf/rdoc/String.html#method-i-kconv\" rel=\"nofollow noreferrer\">this lib</a> will definitely help you out. I&#39;m installing 1.8.6 :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425468466, "post_id": 28853047, "comment_id": 45972878, "body": "Could you show the codepoints, chars or bytes for your string?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1425468536, "post_id": 28853047, "comment_id": 45972923, "body": "@MaxWilliams The method API is telling it can do it.. so thought it will help."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425468720, "post_id": 28853047, "comment_id": 45973022, "body": "@Stefan this is what i get from doing <code>arr = [];s.each_byte{|b| arr &lt;&lt; b};arr</code>   =&gt; <code>[76, 1, 65, 1, 75, 1, 50, 1, 51, 1, 48, 1, 55]</code>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1425468877, "post_id": 28853047, "comment_id": 45973113, "body": "Do you think that instead of trying to convert utf8 strings, i should instead convert to bytes and just remove all instances of <code>1</code>?  Wondering if char 1 is just a special case after all."}], "answers": [{"comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1425469309, "post_id": 28853421, "comment_id": 45973326, "body": "That sucks, it goes back as far as 1.9.3 :("}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1425469951, "post_id": 28853421, "comment_id": 45973653, "body": "I&#39;ll see if i can see the source."}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": false, "score": 0, "last_activity_date": 1425468934, "creation_date": 1425468934, "answer_id": 28853421, "question_id": 28853047, "link": "https://stackoverflow.com/questions/28853047/ruby-1-8-6-process-mix-of-utf8-codes-and-regular-characters/28853421#28853421", "title": "Ruby 1.8.6 - process mix of utf8 codes and regular characters", "body": "<p>You want <a href=\"http://ruby-doc.org/core-2.0.0/String.html#method-i-encode-21\" rel=\"nofollow\">encode</a> I think.</p>\n\n<pre><code>a = \"L\\001A\\001K\\0012\\0013\\0010\\0017\"\na.encode!(\"ISO-8859-1\", :undef =&gt; :replace, :invalid =&gt; :replace, :replace =&gt; \"\")\nputs a # =&gt; LAK2307\n</code></pre>\n"}], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1425471621, "creation_date": 1425467731, "last_edit_date": 1425471621, "question_id": 28853047, "link": "https://stackoverflow.com/questions/28853047/ruby-1-8-6-process-mix-of-utf8-codes-and-regular-characters", "title": "Ruby 1.8.6 - process mix of utf8 codes and regular characters", "body": "<p>I have a Rails 2.2.2 &amp; Ruby 1.8.6 app which just encountered a weird bug.  There's a page which submits a form, and one of the form input values came through in params as <code>\"L\\001A\\001K\\0012\\0013\\0010\\0017\"</code>.  </p>\n\n<p>It turns out that the value was copied into the text field from a PDF - in the pdf, it looks like \"LAK2307\", but when it gets copied into the input, <code>\"\\001\"</code> is inserted between each character.  \"\\001\" looks like the utf-8 encoding for the \"null char\" which is unicode value 1.</p>\n\n<p>I can't prevent people copying this into inputs and submitting them, but i'd like to clean it up before saving to our database.  We already convert some fields to ASCII chars before saving, by running the following code on them:</p>\n\n<pre><code>newval = Iconv.iconv('ascii//ignore//translit', 'utf-8', oldval).first\n</code></pre>\n\n<p>How can i do something similar to this to convert the utf8 chars to a regular char, assuming that's the best way to handle this?  In this case i guess i'd just want this to convert <code>\"\\001\"</code> into <code>\"\"</code>, and thus convert <code>\"L\\001A\\001K\\0012\\0013\\0010\\0017\"</code> to <code>\"LAK2307\"</code>.</p>\n\n<p>thanks, Max</p>\n\n<p>EDIT - changed the name of the question to better describe the problem</p>\n\n<p>EDIT2 - i think that since the problem string is a mix of normal and utf-8 encoded chars, i need to do something like this:</p>\n\n<pre><code>newstring = \"\"\noldstring.split(\"\").each do |char|\n  #test if char is a utf8 string encoded like \"\\001\" (or \"\\153\" etc)\n  if char.is_utf8?  #made up method\n    newstring &lt;&lt; char.unencoded #made up method\n  else\n    newstring &lt;&lt; char\n  end\nend\n</code></pre>\n\n<p>there's a couple of pseudocode elements - the methods \"is_utf8?\" and \"unencoded\"  - can anyone fill in the blanks for these?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "mysql2"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1425469235, "creation_date": 1425469235, "answer_id": 28853510, "question_id": 28852421, "link": "https://stackoverflow.com/questions/28852421/unable-ro-run-rake-dbschemadump-and-getting-an-error/28853510#28853510", "title": "Unable ro run &quot;rake db:schema:dump&quot; and getting an error", "body": "<p>Please ensure that you have the following line in your <code>Gemfile</code>:</p>\n\n<pre><code>gem 'mysql2'\n</code></pre>\n\n<p>Run <code>bundle install</code> once you added that line to your <code>Gemfile</code>.</p>\n\n<p>You might want to read the <a href=\"https://github.com/brianmario/mysql2#windows\" rel=\"nofollow\">install notes for Windows</a> if you still have problems.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 2287091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USpAB.jpg?s=128&g=1", "display_name": "ferCallejero", "link": "https://stackoverflow.com/users/2287091/fercallejero"}, "is_accepted": false, "score": 0, "last_activity_date": 1425495644, "last_edit_date": 1425495644, "creation_date": 1425470907, "answer_id": 28854121, "question_id": 28852421, "link": "https://stackoverflow.com/questions/28852421/unable-ro-run-rake-dbschemadump-and-getting-an-error/28854121#28854121", "title": "Unable ro run &quot;rake db:schema:dump&quot; and getting an error", "body": "<p>I'm not sure about how Windows behave in this case but from my experience (still learning RoR and I'm in the middle of a migration between sqlite and mysql).\nThe first thing I did was install mysql on my computer, then as @spickermann said declare the gem in the Gemfile and run <code>bundle install</code>.</p>\n\n<p>For the error you show (<code>Gem::LoadError: mysql2 is not part of the bundle. Add it to Gemfile.</code>) it seems that you missed the Gemfile step.</p>\n"}], "owner": {"reputation": 77, "user_id": 4631386, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/101988ad0e6c9d2a4151dd551a79967e?s=128&d=identicon&r=PG", "display_name": "thilanka1989", "link": "https://stackoverflow.com/users/4631386/thilanka1989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425495644, "creation_date": 1425465876, "last_edit_date": 1425468253, "question_id": 28852421, "link": "https://stackoverflow.com/questions/28852421/unable-ro-run-rake-dbschemadump-and-getting-an-error", "title": "Unable ro run &quot;rake db:schema:dump&quot; and getting an error", "body": "<p>I am trying to start database and still learining ruby on rails. But in this step I've got an error when running following code in <code>cmd</code>.</p>\n\n<p>I have installed <code>mysql2</code> and it is appeared in gem list. I put <code>database.yml</code> file in the tutorial sample files to my working folder. Still got the error. And installed all <code>mysql2</code> again. installed bundle again.</p>\n\n<p>Note: I'm using Windows 8.1 64 Bit.</p>\n\n<pre><code>C:\\Users\\Thilanka\\myapp&gt;rake db:schema:dump\nDL is deprecated, please use Fiddle\nrake aborted!\nGem::LoadError: Specified 'mysql2' for database adapter, but the gem is not load\ned. Add `gem 'mysql2'` to your Gemfile (and ensure its version is at the minimum\n required by ActiveRecord).\n\nGem::LoadError: mysql2 is not part of the bundle. Add it to Gemfile.\n\nTasks: TOP =&gt; db:schema:dump =&gt; db:load_config\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "bundler", "ansible"], "comments": [{"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1425467124, "post_id": 28852051, "comment_id": 45972154, "body": "Seems like bundler cause a error during execution. Try to execute it manually and check output."}, {"owner": {"reputation": 439, "user_id": 1380881, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4346f78639e8ea7ac77046f0f2459cc?s=128&d=identicon&r=PG", "display_name": "mazing", "link": "https://stackoverflow.com/users/1380881/mazing"}, "reply_to_user": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1425489981, "post_id": 28852051, "comment_id": 45987244, "body": "How would I do that? @maxd"}], "answers": [{"comments": [{"owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "edited": false, "score": 1, "creation_date": 1425519071, "post_id": 28867386, "comment_id": 46001208, "body": "SSHKit (the library capistrano uses for executing SSH commands) has had problems with suppressing stdout/err output. Upgrading to the latest (SSHKit 1.7.1) may help."}], "tags": [], "owner": {"reputation": 5921, "user_id": 29470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926224cbb63e5b617300e99c89051ce7?s=128&d=identicon&r=PG", "display_name": "Tim Moore", "link": "https://stackoverflow.com/users/29470/tim-moore"}, "is_accepted": true, "score": 1, "last_activity_date": 1425512961, "creation_date": 1425512961, "answer_id": 28867386, "question_id": 28852051, "link": "https://stackoverflow.com/questions/28852051/capistrano-deploy-error-in-the-form-of-bundle-stdout-nothing-written-bundle-std/28867386#28867386", "title": "Capistrano Deploy error in the form of bundle stdout: Nothing written bundle stderr: Nothing written", "body": "<p>According to <a href=\"https://github.com/bundler/bundler/blob/master/lib/bundler.rb#L68\" rel=\"nofollow\">the source</a> exit status 18 means a Ruby version mismatch. Generally, this indicates that you have a <code>ruby</code> line in your <code>Gemfile</code> that requires a version that is different from what you're using to execute Bundler (2.2.0 in this case).</p>\n\n<p>It's surprising that it says that nothing was written to stdout or stderr, as Bundler normally does print an error in this case. There may be another problem causing the error output to be suppressed.</p>\n"}], "owner": {"reputation": 439, "user_id": 1380881, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4346f78639e8ea7ac77046f0f2459cc?s=128&d=identicon&r=PG", "display_name": "mazing", "link": "https://stackoverflow.com/users/1380881/mazing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 28867386, "answer_count": 1, "score": 1, "last_activity_date": 1425512961, "creation_date": 1425464828, "question_id": 28852051, "link": "https://stackoverflow.com/questions/28852051/capistrano-deploy-error-in-the-form-of-bundle-stdout-nothing-written-bundle-std", "title": "Capistrano Deploy error in the form of bundle stdout: Nothing written bundle stderr: Nothing written", "body": "<p>So I've recently set up an Azure VM and have been trying to get our application to deploy to Azure. I wrangled with a bunch of errors, but I'm really getting stuck here after i run <code>cap production deploy:check --trace</code></p>\n\n<p>We used Ansible to set the server up, and nginx is working fine on the server. Now we're just trying to get the darn thing to deploy to the machine, but we're getting a strange issue where it fails to execute as the <strong>deploy</strong> user, for whatever reason and says that nothing is written.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<pre><code>cap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as cow@goat.cloudapp.net: bundle exit status: 18\nbundle stdout: Nothing written\nbundle stderr: Nothing written\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/command.rb:97:in `exit_status='\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:153:in `block (5 levels) in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:551:in `call'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:551:in `do_request'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:562:in `channel_request'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:466:in `dispatch_incoming_packets'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:222:in `preprocess'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:206:in `process'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `block in loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:269:in `wait'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:175:in `block (3 levels) in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:514:in `call'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:514:in `do_open_confirmation'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:546:in `channel_open_confirmation'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:466:in `dispatch_incoming_packets'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:222:in `preprocess'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:206:in `process'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `block in loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:177:in `block (2 levels) in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:191:in `with_ssh'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:136:in `block in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:133:in `tap'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:133:in `_execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:66:in `execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/capistrano-bundler-1.1.4/lib/capistrano/tasks/bundler.cap:35:in `block (5 levels) in &lt;top (required)&gt;'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/abstract.rb:85:in `with'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/capistrano-bundler-1.1.4/lib/capistrano/tasks/bundler.cap:26:in `block (4 levels) in &lt;top (required)&gt;'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/abstract.rb:77:in `within'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/capistrano-bundler-1.1.4/lib/capistrano/tasks/bundler.cap:25:in `block (3 levels) in &lt;top (required)&gt;'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:54:in `instance_exec'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:54:in `run'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/runners/parallel.rb:13:in `block (2 levels) in execute'\nSSHKit::Command::Failed: bundle exit status: 18\nbundle stdout: Nothing written\nbundle stderr: Nothing written\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/command.rb:97:in `exit_status='\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:153:in `block (5 levels) in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:551:in `call'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:551:in `do_request'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:562:in `channel_request'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:466:in `dispatch_incoming_packets'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:222:in `preprocess'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:206:in `process'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `block in loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:269:in `wait'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:175:in `block (3 levels) in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:514:in `call'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/channel.rb:514:in `do_open_confirmation'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:546:in `channel_open_confirmation'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:466:in `dispatch_incoming_packets'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:222:in `preprocess'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:206:in `process'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `block in loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/net-ssh-2.9.2/lib/net/ssh/connection/session.rb:170:in `loop'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:177:in `block (2 levels) in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:191:in `with_ssh'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:136:in `block in _execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:133:in `tap'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:133:in `_execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:66:in `execute'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/capistrano-bundler-1.1.4/lib/capistrano/tasks/bundler.cap:35:in `block (5 levels) in &lt;top (required)&gt;'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/abstract.rb:85:in `with'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/capistrano-bundler-1.1.4/lib/capistrano/tasks/bundler.cap:26:in `block (4 levels) in &lt;top (required)&gt;'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/abstract.rb:77:in `within'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/capistrano-bundler-1.1.4/lib/capistrano/tasks/bundler.cap:25:in `block (3 levels) in &lt;top (required)&gt;'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:54:in `instance_exec'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/backends/netssh.rb:54:in `run'\n/Users/macbook/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/sshkit-1.6.1/lib/sshkit/runners/parallel.rb:13:in `block (2 levels) in execute'\nTasks: TOP =&gt; deploy:updated =&gt; bundler:install\nThe deploy has failed with an error: Exception while executing as cow@goat.cloudapp.net: bundle exit status: 18\nbundle stdout: Nothing written\nbundle stderr: Nothing written\n** Invoke deploy:failed (first_time)\n** Execute deploy:failed\n</code></pre>\n"}, {"tags": ["ruby", "regex", "parslet"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1425463392, "post_id": 28851517, "comment_id": 45969993, "body": "OMG! Let me escape first.. :("}, {"owner": {"reputation": 19268, "user_id": 23963, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d9a5280831aec1b4b614eb1e5bf40baf?s=128&d=identicon&r=PG", "display_name": "Nigel Thorne", "link": "https://stackoverflow.com/users/23963/nigel-thorne"}, "edited": false, "score": 0, "creation_date": 1445994945, "post_id": 28851517, "comment_id": 54556294, "body": "Any of these answers useful?"}, {"owner": {"reputation": 612, "user_id": 600146, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a8d7a6a8449afeeeaf9583c80c9ce8fc?s=128&d=identicon&r=PG", "display_name": "Vincent", "link": "https://stackoverflow.com/users/600146/vincent"}, "edited": false, "score": 0, "creation_date": 1446029482, "post_id": 28851517, "comment_id": 54569963, "body": "Sadly I can&#39;t yet say, we&#39;ve had some priority changes for the project and I did not get much time to work on this part of the project, so I had to keep the quick&amp;dirty solution I found first (keeping the {{ else }} as any other identifier and treat it in the code (each block is splitted in two part if an {{ else }} identifier is found). I hope I can try one of those solutions one day when I&#39;ll have time to work on this part of the project again ..."}], "answers": [{"comments": [{"owner": {"reputation": 612, "user_id": 600146, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a8d7a6a8449afeeeaf9583c80c9ce8fc?s=128&d=identicon&r=PG", "display_name": "Vincent", "link": "https://stackoverflow.com/users/600146/vincent"}, "edited": false, "score": 1, "creation_date": 1563193702, "post_id": 28886269, "comment_id": 100607258, "body": "took a long time to get back to the parsley project, but your solution worked like a charm :)"}], "tags": [], "owner": {"reputation": 1530, "user_id": 4562911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebc7b3d9f657ab929c232596182c861?s=128&d=identicon&r=PG&f=1", "display_name": "halfflat", "link": "https://stackoverflow.com/users/4562911/halfflat"}, "is_accepted": true, "score": 0, "last_activity_date": 1425584363, "creation_date": 1425584363, "answer_id": 28886269, "question_id": 28851517, "link": "https://stackoverflow.com/questions/28851517/parslet-recognise-anything-but-a-given-keyword/28886269#28886269", "title": "Parslet: recognise anything but a given keyword", "body": "<p>One way to do this is to use the <code>absent?</code> lookahead modifier. <code>foo.absent?</code> will match if the atom or rule <code>foo</code> does <em>not</em> match at this point, and does so without consuming any input.</p>\n\n<p>With this in hand, you could write the <code>identifier</code> rule as</p>\n\n<pre><code>rule(:identifier)\n    { (else_kw &gt;&gt; dccurly).absent? &gt;&gt; match['a-zA-Z0-9_'].repeat(1) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19268, "user_id": 23963, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d9a5280831aec1b4b614eb1e5bf40baf?s=128&d=identicon&r=PG", "display_name": "Nigel Thorne", "link": "https://stackoverflow.com/users/23963/nigel-thorne"}, "is_accepted": false, "score": 0, "last_activity_date": 1427245193, "creation_date": 1427245193, "answer_id": 29245723, "question_id": 28851517, "link": "https://stackoverflow.com/questions/28851517/parslet-recognise-anything-but-a-given-keyword/29245723#29245723", "title": "Parslet: recognise anything but a given keyword", "body": "<p>It depend on the syntax you are trying to match. If you were not inside an <code>{{if}}</code> <code>{{/if}}</code> pair should <code>{{else}}</code> be treated as a valid identifier or a syntax error? If you had a path with <code>a.else.b</code> should that be valid?</p>\n\n<p>If <code>a.else.b</code> isn't valid you could do the following:</p>\n\n<pre><code>rule(:identifier)\n    { (else_kw).absent? &gt;&gt; match['a-zA-Z0-9_'].repeat(1) | else_kw &gt;&gt; match['a-zA-Z0-9_'].repeat(1) }\n</code></pre>\n\n<p>which accepts all strings except \"else\", by saying \"any string not starting with else, OR strings starting with else that have at least one more character\".</p>\n\n<p>Note: This makes me think \"Why is <code>else</code> so special?\" should we be excluding all keywords here?</p>\n\n<p>If <code>a.else.b</code> is valid you can't exclude it at the identifier level. It's then more accurate to say your <code>path</code> can't be <code>\"else\"</code>.</p>\n\n<p>If you said:</p>\n\n<pre><code>rule(:path)        { else_kw.absent? &gt;&gt; (identifier &gt;&gt; (dot &gt;&gt; identifier).repeat) }\n</code></pre>\n\n<p>This would rule out any identifier that started with 'else', e.g. \"elsewise.option\"</p>\n\n<p>So.. the <code>absent?</code> needs to also match something to show your block has ended. </p>\n\n<pre><code>rule(:path)        { (else_kw &gt;&gt; dccurly).absent? &gt;&gt; (identifier &gt;&gt; (dot &gt;&gt; identifier).repeat) }\n</code></pre>\n\n<p>The problem here is that we are now coupling path to the idea that it ends with a <code>dccurly</code> which isn't strictly correct (and doesn't deal with whitespace). So \"path\" isn't the right place to put this stuff.</p>\n\n<p>If we were trying to stop replacement from matching <code>else</code>, that would be easier.</p>\n\n<pre><code>rule(:replacement) { docurly &gt;&gt; space? &gt;&gt; (else_kw &gt;&gt; space? &gt;&gt; dccurly).absent? &gt;&gt; path.as(:item) &gt;&gt; space? &gt;&gt; dccurly}\n</code></pre>\n\n<p>That would prevent replacement matching <code>else</code>, but would allow <code>elsewise.something</code>, or <code>else.something</code>.</p>\n\n<p>If you don't want \"else.something\" then you need something like this:</p>\n\n<pre><code>rule(:replacement) { docurly &gt;&gt; space? &gt;&gt; (else_kw &gt;&gt; (space | dccurly | dot)).absent? &gt;&gt; path.as(:item) &gt;&gt; space? &gt;&gt; dccurly}\n</code></pre>\n\n<p>so that \"else \" \"else.\" and \"else}}\" are all prevented.</p>\n"}], "owner": {"reputation": 612, "user_id": 600146, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a8d7a6a8449afeeeaf9583c80c9ce8fc?s=128&d=identicon&r=PG", "display_name": "Vincent", "link": "https://stackoverflow.com/users/600146/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 28886269, "answer_count": 2, "score": 3, "last_activity_date": 1427245193, "creation_date": 1425463352, "question_id": 28851517, "link": "https://stackoverflow.com/questions/28851517/parslet-recognise-anything-but-a-given-keyword", "title": "Parslet: recognise anything but a given keyword", "body": "<p>I'm trying to write a Ruby/Parslet parser for Handlebars but I'm getting stuck with the <code>{{ else }}</code> keyword.\nTo explain brieflt for those who do not use Handlebars, an if/else is written this way:</p>\n\n<pre><code>{{#if my_condition}}\n  show something\n{{else}}\n  show something else\n{{/if}}\n</code></pre>\n\n<p>but it becomes tricky as the inlining and the helpers can use the same syntax, for example:</p>\n\n<pre><code>Name: {{ name }}\nAddress: {{ address }}\n</code></pre>\n\n<p>So I first made a rule to recognise the replacements:</p>\n\n<pre><code>rule(:identifier)  { match['a-zA-Z0-9_'].repeat(1) }\nrule(:path)        { identifier &gt;&gt; (dot &gt;&gt; identifier).repeat }\n\nrule(:replacement) { docurly &gt;&gt; space? &gt;&gt; path.as(:item) &gt;&gt; space? &gt;&gt; dccurly}\n</code></pre>\n\n<p>Which match anything like <code>{{name}}</code> or <code>{{people.name}}</code>.\nThe problem of course is that is also matches the <code>{{ else }}</code> block. Here is how I've written the rule to match an if/else block:</p>\n\n<pre><code>rule(:else_kw) {str('else')}\nrule(:if_block) {\n  docurly &gt;&gt;\n  str('#if') &gt;&gt;\n  space &gt;&gt;\n  path.as(:condition) &gt;&gt;\n  space? &gt;&gt;\n  dccurly &gt;&gt;\n  block.as(:if_body) &gt;&gt;\n  (\n    docurly &gt;&gt;\n    else_kw &gt;&gt;\n    dccurly &gt;&gt;\n    block.as(:else_body)\n  ).maybe &gt;&gt;\n  docurly &gt;&gt;\n  str('/if') &gt;&gt;\n  dccurly\n}\n</code></pre>\n\n<p>(note: docurly is <code>{{</code>, dccurly is <code>}}</code> and block can be more or less anything)</p>\n\n<p>So my need now is to rewrite the `identifier``rule so it matches any word but not \"else\".</p>\n\n<p>Thanks in advance,\nVincent</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "activeadmin", "omniauth-facebook"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "edited": false, "score": 0, "creation_date": 1425467647, "post_id": 28852825, "comment_id": 45972433, "body": "This method works fine, i have got a problem when i am trying to sign in from Sing-in page directly (not redirecting to the sign-in page from admin or other). Then i have refreshing /users/sing_in instead of redirecting to root_path"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2780708"}, "is_accepted": false, "score": 0, "last_activity_date": 1425467005, "creation_date": 1425467005, "answer_id": 28852825, "question_id": 28851334, "link": "https://stackoverflow.com/questions/28851334/devise-redirecting-after-sign-in/28852825#28852825", "title": "Devise redirecting after sign-in", "body": "<p>Try this (<strong>return</strong> with <strong>and</strong> nontrivial):</p>\n\n<pre><code>def authenticate_admin_user!\n if user_signed_in? &amp;&amp; !current_user.is_admin\n   redirect_to root_path\n else \n   authenticate_user!\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1425469424, "creation_date": 1425462865, "last_edit_date": 1425469424, "question_id": 28851334, "link": "https://stackoverflow.com/questions/28851334/devise-redirecting-after-sign-in", "title": "Devise redirecting after sign-in", "body": "<p>Everyone, I am using devise with my rails 4 application and omniauth-facebook and active-admin.\nWhen I am trying to sign-in exactly from sign-in page, after the authentication process, the page just refreshes (doesn't redirect to root_path as needed). But, when I am getting sing-in page from another(where authentication needed also), it works correctly (redirect to admin page, as example). This problem happens only when I am trying to login from sign-in page.\nI have tried many override solutions, but it still doesn't work.\nIf it can help, I am using activeadmin authentication like default devise authentication, I mean:</p>\n\n<pre><code> def authenticate_admin_user!\n   redirect_to root_path and return if user_signed_in? &amp;&amp; !current_user.is_admin\n   authenticate_user!\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "search", "model-view-controller", "form-for"], "answers": [{"comments": [{"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1425466057, "post_id": 28851653, "comment_id": 45971568, "body": "The only method I see, is to create helper method that will construct me form by taking some arguments(for setting up) and gives me back html_safe string."}, {"owner": {"reputation": 5326, "user_id": 2235158, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/WkFnX.jpg?s=128&g=1", "display_name": "Malik Shahzad", "link": "https://stackoverflow.com/users/2235158/malik-shahzad"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1425621679, "post_id": 28851653, "comment_id": 46046642, "body": "Dude, its a little bad approach. You can place general forms/html in application.html.erb(layout) file. Your form &#39;ll be common in all your application views."}], "tags": [], "owner": {"reputation": 5326, "user_id": 2235158, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/WkFnX.jpg?s=128&g=1", "display_name": "Malik Shahzad", "link": "https://stackoverflow.com/users/2235158/malik-shahzad"}, "is_accepted": true, "score": 0, "last_activity_date": 1425463735, "creation_date": 1425463735, "answer_id": 28851653, "question_id": 28851151, "link": "https://stackoverflow.com/questions/28851151/rails-form-that-can-work-with-different-controllers/28851653#28851653", "title": "Rails, form that can work with different controllers", "body": "<p>Set search form's controllers name with params[:controller].</p>\n\n<p>Use <a href=\"http://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow\">Rails Guide</a> to see how to pass controller and action for a form_tag or form_for.</p>\n"}, {"comments": [{"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1425466839, "post_id": 28851680, "comment_id": 45971984, "body": "That I intend to do, but how can I make this form make request back to <code>search</code> action of <code>this</code> controller?"}], "tags": [], "owner": {"reputation": 2745, "user_id": 4583460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b37dfcc7db18c38cf70c6f181071b7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Keval Gohil", "link": "https://stackoverflow.com/users/4583460/keval-gohil"}, "is_accepted": false, "score": 0, "last_activity_date": 1425470917, "last_edit_date": 1425470917, "creation_date": 1425463819, "answer_id": 28851680, "question_id": 28851151, "link": "https://stackoverflow.com/questions/28851151/rails-form-that-can-work-with-different-controllers/28851680#28851680", "title": "Rails, form that can work with different controllers", "body": "<p>I think you can \ncreate the template/partial under views/shared folder\nthen in controller do something like</p>\n\n<pre><code>def search \n  render :partial =&gt; \"shared/search\"\nend\n</code></pre>\n\n<p>Ok Then add this \nin your partial so you can dynamically change your controller for the form</p>\n\n<pre><code>form_tag({controller: controller.controller_name, action: \"search_action\"}, method: \"post\", class: \"form\")\n</code></pre>\n"}], "owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 28851653, "answer_count": 2, "score": 0, "last_activity_date": 1425472566, "creation_date": 1425462332, "last_edit_date": 1425472566, "question_id": 28851151, "link": "https://stackoverflow.com/questions/28851151/rails-form-that-can-work-with-different-controllers", "title": "Rails, form that can work with different controllers", "body": "<p>I want to make erb template of searchbar that will call <code>search</code> method of its controller. Different controllers got same method, but will have different logic. Is it possible to make form that will work with every controller just by rendering it on their views?</p>\n\n<p>--- UPDATE ---\nI have found that kind of solution:</p>\n\n<pre><code>&lt;%= form_tag \"#{controller_name}/search\", method: 'get' do  %&gt;\n    &lt;div class=\"input-group\"&gt;\n        &lt;%= text_field_tag :sub_string, '', class: 'form-control', placeholder: \"Search...\" %&gt;\n    &lt;span class=\"input-group-btn\"&gt;\n        &lt;%= submit_tag 'Search', class: %w(btn btn-primary) %&gt;\n    &lt;/span&gt;\n    &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>However when I hit the submit button, it goes to <code>search</code> action of my current controller and it thows an error:\n<code>Couldn't find Basis with 'id'=search</code></p>\n\n<p>it tries to call <code>set_basis</code> private method, even if it is not called by <code>before_action</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1425461743, "post_id": 28850935, "comment_id": 45968966, "body": "Could you provide some simple extract from your <code>array</code> of <code>datetime</code> objects?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1425462067, "post_id": 28850935, "comment_id": 45969153, "body": "@CAMOKPYT Not here.. In your question itself. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425463092, "post_id": 28850935, "comment_id": 45969817, "body": "Do you want to group the entries by day (4) or by date (2015-03-04)?"}, {"owner": {"reputation": 47, "user_id": 2346354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dfc3fa1cc92431357b8e640a2d1dced?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/2346354/pavel"}, "edited": false, "score": 0, "creation_date": 1425463326, "post_id": 28850935, "comment_id": 45969954, "body": "by Date, 10.10.2015 and 10.10.2014 should be different, the only thing i need to ignore is Time, 10.10.2015:10.05.15 and 10.10.2015:12.05.05 should be in one group"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425464605, "post_id": 28850935, "comment_id": 45970760, "body": "@CAMOKPYT you can edit your question to clarify it. Explain your requirements, show the desired output and describe what you have tried to solve the problem."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 2346354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dfc3fa1cc92431357b8e640a2d1dced?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/2346354/pavel"}, "edited": false, "score": 1, "creation_date": 1425462551, "post_id": 28850979, "comment_id": 45969494, "body": "Thank you, that is what i was looking for"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425463404, "post_id": 28850979, "comment_id": 45970004, "body": "The OP is <a href=\"http://stackoverflow.com/questions/28850935/how-to-group-by-day-array-of-datetime-in-pure-ruby#comment45969954_28850935\">actually</a> looking for <code>group_by(&amp;:to_date)</code>"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425463656, "post_id": 28850979, "comment_id": 45970148, "body": "@Stefan Dunno.. I parsed this line <i>i need to group objects by day</i>  in my code.. :)"}, {"owner": {"reputation": 47, "user_id": 2346354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dfc3fa1cc92431357b8e640a2d1dced?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/2346354/pavel"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425463682, "post_id": 28850979, "comment_id": 45970163, "body": "@Stefan yes, to_date is better for my needs, thank you"}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 5, "last_activity_date": 1425463822, "last_edit_date": 1495540613, "creation_date": 1425461795, "answer_id": 28850979, "question_id": 28850935, "link": "https://stackoverflow.com/questions/28850935/how-to-group-by-date-array-of-datetime-in-pure-ruby/28850979#28850979", "title": "How to group by Date array of DateTime in pure Ruby?", "body": "<p>This is what you want:</p>\n\n<pre><code>require 'date'\n\n# if you want day of the month \narray_of_datetimes.group_by(&amp;:day)\n# if you want the day of week \narray_of_datetimes.group_by(&amp;:wday)\n</code></pre>\n\n<p>Look at the method <a href=\"http://ruby-doc.org//stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-day\" rel=\"nofollow noreferrer\"><code>Date#day</code></a>. </p>\n\n<p>Well, as <a href=\"https://stackoverflow.com/questions/28850935/how-to-group-by-day-array-of-datetime-in-pure-ruby/28850979?noredirect=1#comment45970004_28850979\">Stefan addressed</a>, OP wanted something else. But I didn't get it from the question of OP. Anyway, this is what the OP wanted finally :</p>\n\n<pre><code>array_of_datetimes.group_by(&amp;:to_date)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 971, "user_id": 2597718, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/451afe490759d58b0f61b2dd5b47ff8a?s=128&d=identicon&r=PG", "display_name": "Shouichi", "link": "https://stackoverflow.com/users/2597718/shouichi"}, "is_accepted": false, "score": 1, "last_activity_date": 1425462494, "creation_date": 1425462494, "answer_id": 28851208, "question_id": 28850935, "link": "https://stackoverflow.com/questions/28850935/how-to-group-by-date-array-of-datetime-in-pure-ruby/28851208#28851208", "title": "How to group by Date array of DateTime in pure Ruby?", "body": "<p>You can use <code>group_by</code> from <code>Enumerable</code> module. See <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-group_by\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-group_by</a> for more detail.</p>\n\n<pre><code>array.group_by do |datetime|\n  \"#{datetime.year}#{datetime.month}#{datetime.day}\"\nend\n# =&gt; { \"2015-03-03\" =&gt; [...], \"2015-03-04\" =&gt; [...] }\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 2346354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dfc3fa1cc92431357b8e640a2d1dced?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/2346354/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 28850979, "answer_count": 2, "score": 1, "last_activity_date": 1425716353, "creation_date": 1425461689, "last_edit_date": 1425716353, "question_id": 28850935, "link": "https://stackoverflow.com/questions/28850935/how-to-group-by-date-array-of-datetime-in-pure-ruby", "title": "How to group by Date array of DateTime in pure Ruby?", "body": "<p>I have an array of datetime objects and i need to group objects by Date (day). How can I do t with pure ruby, without gems? For example, i have array</p>\n\n<pre><code>#&lt;DateTime: 2015-03-04T01:30:00-06:00 ((2457086j,27000s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T01:45:00-06:00 ((2457086j,27900s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T04:00:00-06:00 ((2457086j,36000s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T06:15:00-06:00 ((2457086j,44100s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-03T07:30:00-06:00 ((2457086j,48600s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T10:30:00-06:00 ((2457086j,59400s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T11:30:00-06:00 ((2457086j,63000s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-02T14:30:00-06:00 ((2457086j,73800s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T16:00:00-06:00 ((2457086j,79200s,0n),-21600s,2299161j)&gt;\n</code></pre>\n\n<p>And i need to group like </p>\n\n<pre><code>#&lt;DateTime: 2015-03-02T14:30:00-06:00 ((2457086j,73800s,0n),-21600s,2299161j)&gt;\n-----------\n#&lt;DateTime: 2015-03-03T07:30:00-06:00 ((2457086j,48600s,0n),-21600s,2299161j)&gt;\n-----------\n#&lt;DateTime: 2015-03-04T01:30:00-06:00 ((2457086j,27000s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T01:45:00-06:00 ((2457086j,27900s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T04:00:00-06:00 ((2457086j,36000s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T06:15:00-06:00 ((2457086j,44100s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T10:30:00-06:00 ((2457086j,59400s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T11:30:00-06:00 ((2457086j,63000s,0n),-21600s,2299161j)&gt;\n#&lt;DateTime: 2015-03-04T16:00:00-06:00 ((2457086j,79200s,0n),-21600s,2299161j)&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "answers": [{"comments": [{"owner": {"reputation": 3321, "user_id": 707598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e68419b0e50187d2e78a2459afb6f9?s=128&d=identicon&r=PG", "display_name": "David MZ", "link": "https://stackoverflow.com/users/707598/david-mz"}, "edited": false, "score": 0, "creation_date": 1425471466, "post_id": 28851596, "comment_id": 45974682, "body": "do I need to use both has_many and has_and_belongs_to_many in rounds.rb?"}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "reply_to_user": {"reputation": 3321, "user_id": 707598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e68419b0e50187d2e78a2459afb6f9?s=128&d=identicon&r=PG", "display_name": "David MZ", "link": "https://stackoverflow.com/users/707598/david-mz"}, "edited": false, "score": 0, "creation_date": 1425471920, "post_id": 28851596, "comment_id": 45974965, "body": "No, use only one. use has_and_belongs_to_many, if you want to save the ids as an Array."}], "tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1425463595, "creation_date": 1425463595, "answer_id": 28851596, "question_id": 28850842, "link": "https://stackoverflow.com/questions/28850842/mongoid4-x-how-to-have-array-of-ids-as-a-1-n-reference/28851596#28851596", "title": "Mongoid:4.x how to have array of ids as a 1-N reference?", "body": "<p>This will create two columns in users, for the two relations.</p>\n\n<pre><code>round.rb\nhas_many :good_users, class_name: 'User', inverse_of: :good_in_round\nhas_many :bad_users, class_name: 'User', inverse_of: :bad_in_round\n\nuser.rb\nbelongs_to :good_in_round, class_name: 'Round', inverse_of: :good_users\nbelongs_to :bad_in_round, class_name: 'Round', inverse_of: :bad_users\n</code></pre>\n\n<p>Mongoid stores the related object ids as an Array in many to many relations. So you could also use that here</p>\n\n<pre><code>round.rb\nhas_and_belongs_to_many :good_users, class_name: 'User', inverse_of: :good_in_round\nhas_and_belongs_to_many :bad_users, class_name: 'User', inverse_of: :bad_in_round\n</code></pre>\n"}], "owner": {"reputation": 3321, "user_id": 707598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e68419b0e50187d2e78a2459afb6f9?s=128&d=identicon&r=PG", "display_name": "David MZ", "link": "https://stackoverflow.com/users/707598/david-mz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1425463595, "creation_date": 1425461433, "last_edit_date": 1425462564, "question_id": 28850842, "link": "https://stackoverflow.com/questions/28850842/mongoid4-x-how-to-have-array-of-ids-as-a-1-n-reference", "title": "Mongoid:4.x how to have array of ids as a 1-N reference?", "body": "<p>I have two classes</p>\n\n<pre><code>class Round\n  include Mongoid::Document\n  include Mongoid::Attributes::Dynamic\n\n  has_many :users\n\nend\n\nclass User\n include Mongoid::Document\n include Mongoid::Attributes::Dynamic\n\n\n  belongs_to :round\nend\n</code></pre>\n\n<p>This all works fine, but what I want to have is two methods on the Round model\ngood_users and bad_users, both is a relation to the User class. I want to reuse the user class, but have a distinct method access.</p>\n\n<p>I understand that the classic model is using a field on user, to associate it with round, so user has a round_id field in the database. but I would be ok with a setup where. the Round class has two fields with the ids of the users as an array, stored in them.</p>\n\n<p>Is this something I can achieve out of the box with mongoid?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "oauth", "oauth-2.0", "2-legged"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4550603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xc2hi.jpg?s=128&g=1", "display_name": "itaywaxman", "link": "https://stackoverflow.com/users/4550603/itaywaxman"}, "is_accepted": false, "score": 0, "last_activity_date": 1431015018, "creation_date": 1431015018, "answer_id": 30106435, "question_id": 28850515, "link": "https://stackoverflow.com/questions/28850515/unable-to-authorize-to-a-oauth-2-legged-provider/30106435#30106435", "title": "Unable to authorize to a OAuth 2 legged provider", "body": "<p>maybe this code will help:</p>\n\n<pre><code>require 'oauth'\nconsumer_key = &lt;your consumer key&gt;\nconsumer_secret = &lt;your consumer secret&gt;\nend_point = \"https://www.example.com\"\nconsumer = OAuth::Consumer.new(consumer_key, consumer_secret, {\n                                                 :site   =&gt; end_point,\n                                                 :scheme =&gt; :header\n                                             })\n\n\nparameters = \"user_id=1\"\n\nresp = consumer.request(:post, '/get_user/', nil, {}, parameters, { 'Content-Type' =&gt; 'application/x-www-form-urlencoded' })\n</code></pre>\n"}], "owner": {"reputation": 1365, "user_id": 1570893, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/PKUfW.jpg?s=128&g=1", "display_name": "Abhiram", "link": "https://stackoverflow.com/users/1570893/abhiram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431015018, "creation_date": 1425460420, "question_id": 28850515, "link": "https://stackoverflow.com/questions/28850515/unable-to-authorize-to-a-oauth-2-legged-provider", "title": "Unable to authorize to a OAuth 2 legged provider", "body": "<p>I am trying to authenticate to a 2 legged OAuth(1.0) system from ruby irb as follows using oauth ruby gem,</p>\n\n<p><strong>Step 1:</strong></p>\n\n<pre><code>require 'oauth'\n\nirb(main):038:0&gt; consumer = OAuth::Consumer.new(\"key\", \"secret\", :site =&gt; \"site\", :scheme =&gt; :query_string)\nI got a response for this as,\n\n\n =&gt; #&lt;OAuth::Consumer:0xba14be2c @key=\"{got valid key here}\", @secret=\"{got valid secret here}\", @options={:signature_method=&gt;\"HMAC-SHA1\", :request_token_path=&gt;\"/oauth/request_token\", :authorize_path=&gt;\"/oauth/authorize\", :access_token_path=&gt;\"/oauth/access_token\", :proxy=&gt;nil, :scheme=&gt;:query_string, :http_method=&gt;:post, :oauth_version=&gt;\"1.0\", :site=&gt; \"https://example.com/\"&gt;\n</code></pre>\n\n<p><strong>Step 2:</strong></p>\n\n<pre><code>irb(main):039:0&gt; access_token = OAuth::AccessToken.new consumer\n\n=&gt; #&lt;OAuth::AccessToken:0xba144b7c @token=\"\", @secret=\"\", @consumer=#&lt;OAuth::Consumer:0xba147430 @key=\"{got valid key here}\", @secret=\"{got valid secret here}\", @options={:signature_method=&gt;\"HMAC-SHA1\", :request_token_path=&gt;\"/oauth/request_token\", :authorize_path=&gt;\"/oauth/authorize\", :access_token_path=&gt;\"/oauth/access_token\", :proxy=&gt;nil, :scheme=&gt;:query_string, :http_method=&gt;:post, :oauth_version=&gt;\"1.0\", :site=&gt;\"https://example.com/\"}&gt;, @params={}&gt;\n</code></pre>\n\n<p><strong>Please see Token is empty above.</strong> I should have got the token here??</p>\n\n<p><strong>Step 3:</strong> Then i tried all the paths which i got from above,</p>\n\n<pre><code>irb(main):041:0&gt; access_token.get(\"/oauth/authorize\")   \nirb(main):041:0&gt; access_token.get(\"/oauth/request_token\")\nirb(main):041:0&gt; access_token.get(\"/oauth/access_token\")\n</code></pre>\n\n<p>But for all the request am getting response as,</p>\n\n<pre><code>=&gt; #&lt;Net::HTTPNotFound 404 Not Found readbody=true&gt;\n</code></pre>\n\n<p>I dono where i am making mistake, am i doing the request correctly, if not how should i authenticate to the 2legged oauth system in ruby. Or should i ask the service provider to check on their side.</p>\n\n<p>Token field is empty in step 2, that is the problem??.</p>\n\n<p>Can anyone please guide me in this?? Thanks in advance.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425460899, "post_id": 28850458, "comment_id": 45968445, "body": "Not clear what &quot;capital letter blocks&quot; mean."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425460977, "post_id": 28850458, "comment_id": 45968506, "body": "A regex does not do anything by itself. You should show what method you used with it."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425461102, "post_id": 28850551, "comment_id": 45968568, "body": "The two <code>\\b</code>s are redundant."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 2, "last_activity_date": 1425460511, "creation_date": 1425460511, "answer_id": 28850551, "question_id": 28850458, "link": "https://stackoverflow.com/questions/28850458/capturing-all-sets-of-capital-letter-blocks-groups/28850551#28850551", "title": "Capturing all sets of capital letter blocks / groups", "body": "<p>You just need to replace last <code>+</code> with <code>*</code> since <code>+</code> repeats the previous token one or more times where <code>*</code> repeats the previous token zero or more times.</p>\n\n<pre><code>&gt; str.scan(/\\b[A-Z][A-Z0-9]+\\b(?:\\s[A-Z][A-Z0-9]+)*/)\n=&gt; [\"ABCDE\", \"ABC DEF GHI\", \"JKL MNO\", \"PQR\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "is_accepted": false, "score": 0, "last_activity_date": 1425460841, "creation_date": 1425460841, "answer_id": 28850651, "question_id": 28850458, "link": "https://stackoverflow.com/questions/28850458/capturing-all-sets-of-capital-letter-blocks-groups/28850651#28850651", "title": "Capturing all sets of capital letter blocks / groups", "body": "<p>Consider this, it may simplify the regex but may have to do some processing outside.</p>\n\n<pre><code>text = \"ABCDE: Something ABC DEF GHI others plus JKL MNO and PQR\"\ntext.scan(/\\b[A-Z\\s]+\\b/).map { |s| s.strip }.reject &amp;:empty? # =&gt; [\"ABCDE\", \"ABC DEF GHI\", \"JKL MNO\", \"PQR\"]\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 3338439, "user_type": "registered", "profile_image": "https://graph.facebook.com/768618975/picture?type=large", "display_name": "Mingsheng", "link": "https://stackoverflow.com/users/3338439/mingsheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 28850551, "answer_count": 2, "score": 0, "last_activity_date": 1425461243, "creation_date": 1425460258, "last_edit_date": 1425461243, "question_id": 28850458, "link": "https://stackoverflow.com/questions/28850458/capturing-all-sets-of-capital-letter-blocks-groups", "title": "Capturing all sets of capital letter blocks / groups", "body": "<p>I am trying to extract all sets of capital letters in the following sample string:</p>\n\n<pre><code>\"ABCDE: Something ABC DEF GHI others plus JKL MNO and PQR\"\n</code></pre>\n\n<p>I am looking for:</p>\n\n<pre><code>[\"ABCDE\", \"ABC DEF GHI\", \"JKL MNO\", \"PQR\"]\n</code></pre>\n\n<p>I have the following regex:</p>\n\n<pre><code>mystring.scan(/\\b[A-Z][A-Z0-9]+\\b(?:\\s[A-Z][A-Z0-9]+)+/) \n#=&gt; [\"ABC DEF GHI\", \"JKL MNO\"] \n</code></pre>\n\n<p>Not so sure what's missing here. Hoping to get some advice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "routes", "url-routing"], "comments": [{"owner": {"reputation": 2430, "user_id": 1514990, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2366019f03d3dc7dcc12f791d358a336?s=128&d=identicon&r=PG", "display_name": "PJ Bergeron", "link": "https://stackoverflow.com/users/1514990/pj-bergeron"}, "edited": false, "score": 0, "creation_date": 1425460580, "post_id": 28850257, "comment_id": 45968260, "body": "Can you show your routes.rb please?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1425460915, "post_id": 28850257, "comment_id": 45968458, "body": "What middleware do you have configured? Because <code>www.com.es</code> looks like you force a redirect to a www host and do not take into account that your domain has actually three parts <code>mysite.com.es</code> and not just two."}, {"owner": {"reputation": 51, "user_id": 2080569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae15c200fb66181ccda76cc22f33c93?s=128&d=identicon&r=PG", "display_name": "CarlosMR", "link": "https://stackoverflow.com/users/2080569/carlosmr"}, "edited": false, "score": 0, "creation_date": 1425461694, "post_id": 28850257, "comment_id": 45968937, "body": "I do not know quite well what do you mean by middleware, but we are using Nginx to redirect request to rails."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2080569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae15c200fb66181ccda76cc22f33c93?s=128&d=identicon&r=PG", "display_name": "CarlosMR", "link": "https://stackoverflow.com/users/2080569/carlosmr"}, "is_accepted": true, "score": 4, "last_activity_date": 1425470037, "creation_date": 1425470037, "answer_id": 28853806, "question_id": 28850257, "link": "https://stackoverflow.com/questions/28850257/rails-getting-root-url-wrong/28853806#28853806", "title": "Rails getting root_url wrong", "body": "<p>Finally I have been able to find a solution to this problem by adding this to 'production.rb':</p>\n\n<pre><code>config.after_initialize do\n  Rails.application.routes.default_url_options = {\n    host:  'com.es',\n    protocol: 'http',\n    subdomain: 'live.mysite'\n  }\nend\n</code></pre>\n\n<p>Thanks everyone!</p>\n"}], "owner": {"reputation": 51, "user_id": 2080569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae15c200fb66181ccda76cc22f33c93?s=128&d=identicon&r=PG", "display_name": "CarlosMR", "link": "https://stackoverflow.com/users/2080569/carlosmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2038, "favorite_count": 2, "accepted_answer_id": 28853806, "answer_count": 1, "score": 1, "last_activity_date": 1425470037, "creation_date": 1425459607, "last_edit_date": 1425461183, "question_id": 28850257, "link": "https://stackoverflow.com/questions/28850257/rails-getting-root-url-wrong", "title": "Rails getting root_url wrong", "body": "<p>We developed a site using Rails 3.2.16 and everything was working fine in development and production environments. The problem came when we changed our domain to something like this: </p>\n\n<blockquote>\n  <p><a href=\"http://live.mysite.com.es\" rel=\"nofollow\">http://live.mysite.com.es</a></p>\n</blockquote>\n\n<p>After changing our domain almost every route works ok except root_url, which redirects to:</p>\n\n<blockquote>\n  <p><a href=\"http://www.com.es\" rel=\"nofollow\">http://www.com.es</a></p>\n</blockquote>\n\n<p>I have tried to tell Rails what is my domain name by adding this to 'production.rb':</p>\n\n<pre><code>config.action_controller.default_url_options = {\n  host: 'live.mysite.com.es'\n}\n</code></pre>\n\n<p>But it still gives the same redirection error. </p>\n\n<p>Please let me know if you need more information. Hope you can help me. Thanks.</p>\n\n<p>EDIT: </p>\n\n<p>My routes.rb looks something like this:</p>\n\n<pre><code>MySite::Application.routes.draw do\n\n  root :to =&gt; 'pages#index'\n\n  resource :dashboard do\n    get \"events\"\n    get \"products\"\n\n    ...\n\n  end\n\n  # More resources here.\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "edited": false, "score": 0, "creation_date": 1425583790, "post_id": 28850228, "comment_id": 46033377, "body": "Extremely helpful and solved my problem! Thanks!!! Now I learned how to use before_action haha"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1425461254, "last_edit_date": 1425461254, "creation_date": 1425459509, "answer_id": 28850228, "question_id": 28850118, "link": "https://stackoverflow.com/questions/28850118/creating-a-client-within-the-application-controller-rb-to-avoid-duplicates/28850228#28850228", "title": "Creating a client within the application_controller.rb to avoid duplicates?", "body": "<p>You could add the following to your <code>application_controller.rb</code>:</p>\n\n<pre><code>before_action :set_youtube_client, only: [:index]\n\nprivate\ndef set_youtube_client\n  @client = YouTubeIt::Client.new(:dev_key =&gt; 'AI39 ... bGqx')\nend\n</code></pre>\n\n<p><strong>Or</strong> you could add the following to your <code>aplication_controller.rb</code>:</p>\n\n<pre><code>def youtube_client\n  @youtube_client ||= YouTubeIt::Client.new(:dev_key =&gt; 'AI39 ... bGqx')\nend\nhelper_method :youtube_client\n</code></pre>\n\n<p>And then just use <code>youtube_client</code> in your views instead of <code>@client</code></p>\n"}], "owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15, "favorite_count": 0, "accepted_answer_id": 28850228, "answer_count": 1, "score": 0, "last_activity_date": 1425463683, "creation_date": 1425459143, "last_edit_date": 1425463683, "question_id": 28850118, "link": "https://stackoverflow.com/questions/28850118/creating-a-client-within-the-application-controller-rb-to-avoid-duplicates", "title": "Creating a client within the application_controller.rb to avoid duplicates?", "body": "<p>I've been learning a lot of rails through the Youtube_IT gem and as of now I have to insert </p>\n\n<pre><code>@client = YouTubeIt::Client.new(:dev_key =&gt; \"AI39 .. bGqx\")\n</code></pre>\n\n<p>into every controller's def index manually so that it can appear in index.html.erb . I noticed that Rails have an application_controller.rb and thought it might be similar to the layout's application file where any code that goes in there becomes a universal thing. </p>\n\n<p>I've tried creating an index method in the application_controller and inserting the dev key in there but no luck. What are some ways I can set it once for all controllers?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "json", "xmlhttprequest"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1425458283, "post_id": 28849773, "comment_id": 45967016, "body": "Maybe this would help: <a href=\"http://apidock.com/rails/ActionController/Base/render\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionController/Base/render</a> and this one: <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/layouts_and_rendering.html</a>"}, {"owner": {"reputation": 2966, "user_id": 308523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qOeK7.jpg?s=128&g=1", "display_name": "Fer", "link": "https://stackoverflow.com/users/308523/fer"}, "edited": false, "score": 0, "creation_date": 1425458421, "post_id": 28849773, "comment_id": 45967082, "body": "and this is another question like yours in SO: <a href=\"http://stackoverflow.com/questions/7716552/dont-render-layout-when-calling-from-ajax\" title=\"dont render layout when calling from ajax\">stackoverflow.com/questions/7716552/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9254, "user_id": 958464, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ec2bbbbe62e540e67aeb1c3f21d9935c?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca Ghettini", "link": "https://stackoverflow.com/users/958464/gianluca-ghettini"}, "edited": false, "score": 0, "creation_date": 1425459149, "post_id": 28849966, "comment_id": 45967460, "body": "thank you. That&#39;s code must be in the controller, am I right?. What about the corresponding view erb? Maybe the .erb file is not required at all, just create the route on route.rb, ins&#39;t it?"}], "tags": [], "owner": {"reputation": 5480, "user_id": 702284, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a85ea3c413f89301041586ba09ab4140?s=128&d=identicon&r=PG", "display_name": "Vlad Khomich", "link": "https://stackoverflow.com/users/702284/vlad-khomich"}, "is_accepted": true, "score": 2, "last_activity_date": 1425459609, "last_edit_date": 1425459609, "creation_date": 1425458661, "answer_id": 28849966, "question_id": 28849773, "link": "https://stackoverflow.com/questions/28849773/ruby-on-rails-output-json-data-from-array/28849966#28849966", "title": "Ruby on Rails: output JSON data from array", "body": "<p>You should either use <code>respond_to</code> block (in case your action handles multiple formats) or explicitly state that you want to render json (easier in case your action only handles json):</p>\n\n<pre><code>class SomeController &lt; ApplicationController\n  def some_action\n    @data        = Data.find(1)\n    @string_json = '{ \"key\": \"value\" }'\n\n    render json: @data # render json: @string_json also works\n  end\nend\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If you're trying to only render a json string on a page, you should disable a common layout for your action:</p>\n\n<pre><code>class SomeController &lt; ApplicationController\n  layout 'application', :except =&gt; :some_action\n\n  def some_action\n    @json_string = ' .... '\n  end\nend\n</code></pre>\n\n<p>some_action.erb:</p>\n\n<pre><code>&lt;%= @json_string %&gt;\n</code></pre>\n"}], "owner": {"reputation": 9254, "user_id": 958464, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ec2bbbbe62e540e67aeb1c3f21d9935c?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca Ghettini", "link": "https://stackoverflow.com/users/958464/gianluca-ghettini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "accepted_answer_id": 28849966, "answer_count": 1, "score": 0, "last_activity_date": 1425459609, "creation_date": 1425457860, "question_id": 28849773, "link": "https://stackoverflow.com/questions/28849773/ruby-on-rails-output-json-data-from-array", "title": "Ruby on Rails: output JSON data from array", "body": "<p>I have a webpage in which a javascript code requests JSON data from a remote URL using XMLHTTPRequest().\nThe URL is served by a Ruby on Rails app. I tried to print an hardcoded JSON string from a test view but it get wrapped around HTML tags (html, head, body etc..etc..) so it's not reconized as a valid JSON string from the javascript code. What I want is to output a raw JSON string straight from a Ruby object.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "paperclip"], "comments": [{"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1425456414, "post_id": 28849193, "comment_id": 45966115, "body": "It is not clear, you can&#39;t access image when you run app on different machine, or if you try to access this image from different client machine?"}, {"owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "reply_to_user": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1425457019, "post_id": 28849193, "comment_id": 45966400, "body": "Hello @StanislavMekhonoshin Yesterday I uploaded an Image from my Home PC and it displayed fine. However today when loading the App on my work PC, that original image is no longer displayed, it just states the name of the image. After further testing using my work PC, from myself and a colleague, we both uploaded an image and they are correctly displayed. But the original is still not, could this be a a directory linking issue instead of database? /system/articles/images/000/000/004/large/Prototype.PNG?1425&zwnj;&#8203;456482 is the saved name for the image, showing it is saved on the server (I think)"}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1425457383, "post_id": 28849193, "comment_id": 45966576, "body": "Actually I didn&#39;t understand. Do you run app, and upload files to remote server with app, or you are running app on local machines? If you run it on local machine, the you will not be able access files from other machine."}, {"owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "reply_to_user": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1425457546, "post_id": 28849193, "comment_id": 45966655, "body": "@StanislavMekhonoshin I am running an app on a Heroku server, and when you click &quot;New article&quot; there is an option for images, and you just select the image you want to upload and submit."}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1425457742, "post_id": 28849193, "comment_id": 45966746, "body": "Do you use S3 or something else to keep uploaded files?"}, {"owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "reply_to_user": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1425458532, "post_id": 28849193, "comment_id": 45967139, "body": "@StanislavMekhonoshin The app is built on a Postgresql database, and Paperclip Gem is used for the image uploading feature."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "edited": false, "score": 0, "creation_date": 1425459660, "post_id": 28850164, "comment_id": 45967741, "body": "So @StanislavMekhonoshin instead of pushing my application to Heroku, I would be pushing it to Amazon S3? Or would it be a mix of the two?"}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "reply_to_user": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "edited": false, "score": 0, "creation_date": 1425459865, "post_id": 28850164, "comment_id": 45967844, "body": "No, your app still will be running on heroku. You should just configure PaperClip gem to upload files not on servers filesystem, but to remote S3. Amazon S3 is just a static file storage, you uploads will be kept there."}, {"owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "edited": false, "score": 0, "creation_date": 1425460292, "post_id": 28850164, "comment_id": 45968098, "body": "Thank you @StanislavMekhinoshin I will give this a test tonight and hopefully this can resolve my issue :)"}, {"owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "edited": false, "score": 0, "creation_date": 1425461322, "post_id": 28850164, "comment_id": 45968706, "body": "Will do, I will let you know how it goes :)"}, {"owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "edited": false, "score": 0, "creation_date": 1425462757, "post_id": 28850164, "comment_id": 45969617, "body": "I have just tested briefly something with Heroku, when the app &quot;Idles&quot; it looses the ability to display the image, so the reason I saw it when at home was because the app had not gone idle, now that it has gone idle the images no longer display. Will Amazon S3 fix that issue also, so when the app is no longer idle the images will display? I am going to set up uptimerobot so that the App does not go idle."}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "reply_to_user": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "edited": false, "score": 0, "creation_date": 1425464371, "post_id": 28850164, "comment_id": 45970607, "body": "No, heroku apps are always idle after some time of inactivity. It is independent issue, not related with that it has read-only filesystem"}], "tags": [], "owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1425459315, "creation_date": 1425459315, "answer_id": 28850164, "question_id": 28849193, "link": "https://stackoverflow.com/questions/28849193/images-not-saving-to-app-ruby-on-rails/28850164#28850164", "title": "Images not saving to App - Ruby on Rails", "body": "<p>As I understood from our discussion in comments, you use Heroku and paperclip.\nActually heroku has read-only filesystem, so you are unable to write to it.\nThat is why you can't access uploaded image. It is simply not written there.</p>\n\n<p>The best way to handle this issue - to use external file storage. For example Amazon S3.</p>\n\n<p>Paperclip has ability to upload to S3, just checkout this document <a href=\"http://www.rubydoc.info/gems/paperclip/Paperclip/Storage/S3\" rel=\"nofollow\">http://www.rubydoc.info/gems/paperclip/Paperclip/Storage/S3</a></p>\n"}], "owner": {"reputation": 81, "user_id": 4458870, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e0445cbda7a710b34e93799e28035ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Fenwick", "link": "https://stackoverflow.com/users/4458870/adam-fenwick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425459315, "creation_date": 1425455842, "last_edit_date": 1425456315, "question_id": 28849193, "link": "https://stackoverflow.com/questions/28849193/images-not-saving-to-app-ruby-on-rails", "title": "Images not saving to App - Ruby on Rails", "body": "<p>I have recently created a small app, which is similar to a blog, allowing users to write articles, which include a Title, Body and an image upload. But I have ran into an issue regarding the images.<br>\nUsing Paperclip gem I have added the upload option, however, once I have opened the app I have seen the image isnt actually there anymore when using a different machine. It just displays the name of the image\nThis works fine within my local machine (where the image is saved) so this leads me to think nothing is actually being stored sever wise, instead just storing somewhat of a link to the image in my directory.\nJust tested using my Work PC, an image will save and display, but the ones I did last night (different PC will not). Any ideas how I can troubleshoot this issue? Not 100% sure where to look.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425452491, "post_id": 28848303, "comment_id": 45964586, "body": "The return value is correct, but <code>@value</code> is different from the OP&#39;s code."}, {"owner": {"reputation": 3080, "user_id": 472869, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6429fe1b80c4f52c933d5abf39266dd4?s=128&d=identicon&r=PG", "display_name": "Jasdeep Singh", "link": "https://stackoverflow.com/users/472869/jasdeep-singh"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425452655, "post_id": 28848303, "comment_id": 45964645, "body": "@sawa my answer was not really different from this one, so I deleted mine to prevent duplicates"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1425452570, "last_edit_date": 1425452570, "creation_date": 1425452194, "answer_id": 28848303, "question_id": 28848245, "link": "https://stackoverflow.com/questions/28848245/how-to-separate-words-in-a-string-with-commas-properly/28848303#28848303", "title": "How to separate words in a string with commas properly?", "body": "<p>The easiest way is to pass the concatenation duties to <a href=\"http://ruby-doc.org//core-2.1.5/Array.html#method-i-join\" rel=\"nofollow\"><code>Array#join</code></a>.</p>\n\n<pre><code>def get_str(exam)\n  @value = []\n  @value &lt;&lt; \"MC\" if exam.is_mc\n  @value &lt;&lt; \"MS\" if exam.is_ms\n  @value &lt;&lt; \"NG\" if exam.is_ng\n  @value = @value.join ', '\nend\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1425473254, "creation_date": 1425473254, "answer_id": 28854922, "question_id": 28848245, "link": "https://stackoverflow.com/questions/28848245/how-to-separate-words-in-a-string-with-commas-properly/28854922#28854922", "title": "How to separate words in a string with commas properly?", "body": "<p>This will work too:</p>\n\n<pre><code>def get_str(exam)\n  ['MC', 'MS', 'NG'].select{|i| exam.send(\"is_#{i.downcase}\").join(', ')\nend\n</code></pre>\n\n<p>Only real advantage is that it will be easier to add more strings patterns.</p>\n"}], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 28848303, "answer_count": 2, "score": 0, "last_activity_date": 1425473254, "creation_date": 1425451955, "last_edit_date": 1425452286, "question_id": 28848245, "link": "https://stackoverflow.com/questions/28848245/how-to-separate-words-in-a-string-with-commas-properly", "title": "How to separate words in a string with commas properly?", "body": "<p>I have a helper method:</p>\n\n<pre><code>def get_str(exam)\n  @value = \"\"\n  if exam.is_mc\n    @value &lt;&lt; \"MC, \"\n  end\n  if exam.is_ms\n    @value &lt;&lt; \"MS, \"\n  end\n  if exam.is_ng\n    @value &lt;&lt; \"NG\"\n  end\n  return @value\nend\n</code></pre>\n\n<p>When all the three conditions are satisfied I get a string: <code>MC, MS, NG</code></p>\n\n<p>But if only first condition is satisfied I get the string: <code>MC,</code></p>\n\n<p>I don't want to show the comma in that case.</p>\n\n<p>How is it possible?  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1425456353, "post_id": 28848012, "comment_id": 45966092, "body": "semi-related - <a href=\"http://stackoverflow.com/a/26251892/525478\">stackoverflow.com/a/26251892/525478</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "edited": false, "score": 0, "creation_date": 1425451949, "post_id": 28848223, "comment_id": 45964357, "body": "I&#39;d think that it&#39;s better to edit the current_user method, so you don&#39;t tackle the emp_functions every time you need to find a user or get a list of users. It could be lots of data to get in the memory."}], "tags": [], "owner": {"reputation": 3080, "user_id": 472869, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6429fe1b80c4f52c933d5abf39266dd4?s=128&d=identicon&r=PG", "display_name": "Jasdeep Singh", "link": "https://stackoverflow.com/users/472869/jasdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1425452122, "last_edit_date": 1425452122, "creation_date": 1425451802, "answer_id": 28848223, "question_id": 28848012, "link": "https://stackoverflow.com/questions/28848012/reduce-n1-queries/28848223#28848223", "title": "Reduce N+1 Queries", "body": "<p>If <code>emp_functions</code> is a has_many association on your user model (and it seems like it is), You should be doing:</p>\n\n<pre><code>current_user.emp_function_ids.include?(1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3080, "user_id": 472869, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6429fe1b80c4f52c933d5abf39266dd4?s=128&d=identicon&r=PG", "display_name": "Jasdeep Singh", "link": "https://stackoverflow.com/users/472869/jasdeep-singh"}, "edited": false, "score": 1, "creation_date": 1425452734, "post_id": 28848404, "comment_id": 45964678, "body": "plus 1 for the third thing"}, {"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1425465602, "post_id": 28848404, "comment_id": 45971333, "body": "NoMethodError: undefined method <code>emp_function_ids&#39; for #&lt;User:0x00000012819f68&gt; from &#47;home&#47;.rvm&#47;gems&#47;ruby-2.1.5@&#47;gems&#47;activemodel-4.2.0&#47;lib&#47;activ&zwnj;&#8203;e_model&#47;attribute_me&zwnj;&#8203;thods.rb:433:in </code>method_missing&#39;"}, {"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1425465632, "post_id": 28848404, "comment_id": 45971356, "body": "Please check the Model Code"}], "tags": [], "owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "is_accepted": true, "score": 1, "last_activity_date": 1425452592, "creation_date": 1425452592, "answer_id": 28848404, "question_id": 28848012, "link": "https://stackoverflow.com/questions/28848012/reduce-n1-queries/28848404#28848404", "title": "Reduce N+1 Queries", "body": "<p>Imho, the most efficient way to get rid of this N+1 query is to alter the <code>current_user</code> method, adding <code>includes(:emp_functions)</code> to the <code>User.find</code> call. The way you do it depends on the way you handle your authentication. If you're using some kind of gem (<code>Devise</code> or <code>Sorcery</code> for example) you'll need to reopen those classes and alter the method, not forgetting to use <code>super</code>. If you\u044d\u043c\u0443 written your own authentication, you'd be able to do that more easily.</p>\n\n<p>Second thing I noticed is that you don't actually need to use <code>map</code> on your <code>user.emp_functions</code> in the view, provided that <code>emp_functions</code> is a <code>has_many</code> association on the <code>User</code> model. You can just flatten it to <code>current_user.emp_function_ids.include?(1)</code>. This will help you get rid of the N+1 query problem, but only in this particular case. If you do tackle the <code>emp_functions</code> of the current user often in many places, I'd recomend using the first path I described.</p>\n\n<p>Third third thing, not directly relevant to the question is that I really don't think that code belongs in the view. You should move it to a helper or a decorator, keeping the view clean and readable.</p>\n"}, {"comments": [{"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1425464346, "post_id": 28848762, "comment_id": 45970584, "body": "didn&#39;t worked, would you please modify it in another way. what i mean was actually that query you gave me fetching proper record, but still N+1 Query Problem."}, {"owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "reply_to_user": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1425517753, "post_id": 28848762, "comment_id": 46000845, "body": "then the N+1 query problem happens somewhere else."}], "tags": [], "owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "is_accepted": false, "score": 0, "last_activity_date": 1425454115, "creation_date": 1425454115, "answer_id": 28848762, "question_id": 28848012, "link": "https://stackoverflow.com/questions/28848012/reduce-n1-queries/28848762#28848762", "title": "Reduce N+1 Queries", "body": "<p>This is a very specific solution to your issue and I advise against using it in a view</p>\n\n<p>change <code>current_user.emp_functions.map{|x| x.id}.include?(1)</code> to</p>\n\n<pre><code>current_user.emp_functions.where(id: 1).exists?\n</code></pre>\n\n<p>This will result in 1 single query to the db everytime you hit the page containing it.</p>\n\n<p>You can also remove that <code>if</code> statement to remove another db query.</p>\n"}], "owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1205, "favorite_count": 0, "accepted_answer_id": 28848404, "answer_count": 3, "score": 0, "last_activity_date": 1425465432, "creation_date": 1425450874, "last_edit_date": 1425465432, "question_id": 28848012, "link": "https://stackoverflow.com/questions/28848012/reduce-n1-queries", "title": "Reduce N+1 Queries", "body": "<p>N+1 queries detected what does that mean what should i do to make it work.</p>\n\n<p>I am using Bullet gem for showing N+1 queries</p>\n\n<pre><code>user: kalyan\nN+1 Query detected\n  Emp =&gt; [:functions]\n  Add to your finder: :include =&gt; [:functions]\nN+1 Query method call stack\n  /home/Documents/app/views/tics/show.html.haml:20:in `_app_views_tics_show_html_haml___2301551533476719406_237290860'\n</code></pre>\n\n<p>This is the message from bullet gem.</p>\n\n<p><strong>_app_views_tics_show.html.haml</strong></p>\n\n<pre><code>- if (@tic.assigned_to == current_user.emp) or (current_user.emp_functions.map{|x| x.id}.include?(1) if current_user.emp_functions.present? )\n              = best_in_place @tic, :subject\n            - else\n              = @tic.subject\n</code></pre>\n\n<p>help me to reduce n+1 query problem</p>\n\n<p><strong>emp.rb</strong></p>\n\n<pre><code>has_many :emp_functions, inverse_of: :emp,dependent: :restrict_with_exception\n</code></pre>\n\n<p>belongs_to :user, inverse_of: :emp</p>\n\n<p><strong>emp_functions.rb</strong></p>\n\n<pre><code>belongs_to :emp , inverse_of: :emp_functions\n\nbelongs_to :function\n</code></pre>\n\n<p><strong>function.rb</strong></p>\n\n<pre><code>has_many :emp_functions, dependent: :restrict_with_exception\n\nhas_many :emp, through: :emp_functions\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>has_one :emp, inverse_of: :user, dependent: :restrict_with_exception\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1425454121, "post_id": 28847779, "comment_id": 45965202, "body": "What exactly do you mean and at what point in the order process?"}, {"owner": {"reputation": 139, "user_id": 1886035, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9156ae82256773296eb0ac2633f63b06?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjith", "link": "https://stackoverflow.com/users/1886035/ranjith"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1425552587, "post_id": 28847779, "comment_id": 46014086, "body": "Once the order process is complete a customer should able to exchange the product is there any way to do it ?"}], "answers": [{"tags": [], "owner": {"reputation": 3542, "user_id": 785050, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3917b9c81197f1cd96f4546930b39d54?s=128&d=identicon&r=PG", "display_name": "JDutil", "link": "https://stackoverflow.com/users/785050/jdutil"}, "is_accepted": false, "score": 1, "last_activity_date": 1425654806, "creation_date": 1425654806, "answer_id": 28901745, "question_id": 28847779, "link": "https://stackoverflow.com/questions/28847779/how-to-exchange-the-ordered-products-in-spree-commerce/28901745#28901745", "title": "How to exchange the ordered products in spree commerce?", "body": "<p>In Spree 2.4+ there are exchanges.  Within the admin you create a customer return, and specify what from their order they returned.  Then you can either select another item to exchange or you can refund them for the return.  It's not covered very well by the guides but does exist, which you can feel free to submit a PR updating them for any clarity you need:\n<a href=\"https://guides.spreecommerce.com/user/returning_orders.html\" rel=\"nofollow\">https://guides.spreecommerce.com/user/returning_orders.html</a></p>\n"}], "owner": {"reputation": 139, "user_id": 1886035, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9156ae82256773296eb0ac2633f63b06?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjith", "link": "https://stackoverflow.com/users/1886035/ranjith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1425654806, "creation_date": 1425449750, "last_edit_date": 1425537734, "question_id": 28847779, "link": "https://stackoverflow.com/questions/28847779/how-to-exchange-the-ordered-products-in-spree-commerce", "title": "How to exchange the ordered products in spree commerce?", "body": "<p>In spree commerce, from the customer end, after buying a product, is there any ways to exchange the ordered products .</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1425445683, "post_id": 28846767, "comment_id": 45962351, "body": "You have to read the <i>flat file</i> and then write the updated one in a new file, and save the new file. This is how it works,"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1425446093, "post_id": 28846767, "comment_id": 45962438, "body": "Have a look at this question : <a href=\"http://stackoverflow.com/questions/3289653/how-to-modify-a-text-file-in-ruby\" title=\"how to modify a text file in ruby\">stackoverflow.com/questions/3289653/&hellip;</a>"}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1425450246, "post_id": 28846767, "comment_id": 45963735, "body": "Do you really want the file to be in <code>CSV</code> itself? It may be easier to have it formatted as <code>YAML</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "edited": false, "score": 0, "creation_date": 1425485465, "post_id": 28847901, "comment_id": 45984186, "body": "Thanks a ton man, i don&#39;t really know what .map! is doing but a little research will help!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1425450361, "creation_date": 1425450361, "answer_id": 28847901, "question_id": 28846767, "link": "https://stackoverflow.com/questions/28846767/read-from-a-file-and-update/28847901#28847901", "title": "Read from a file and Update", "body": "<p>The easiest way to achieve a goal is to use <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow\"><code>CSV</code></a> class to operate your file content. After all, the content <em>is</em> csv, right?</p>\n\n<p>So, instead of:</p>\n\n<pre><code>open('text.txt', 'r+') { |update|\n  update.puts \"#{item_num},#{new_description},#{new_price}\"\n}\n</code></pre>\n\n<p>you might want to search for an element inside loaded array, update it and then write the content back to file:</p>\n\n<pre><code>require 'csv'\nitems = CSV.read(\"text.txt\")\nitems.map! { |i| \n  next i unless i.first == item_num # skip unless it\u2019s our item \n  i[1] = new_description\n  i[2] = new_price\n  i \n}\n\n# here should go the code whether you need to insert line if `num` is not found\n\nCSV.open(\"text.txt\", \"wb\") do |csv|\n  items.each { |i| csv &lt;&lt; i }\nend\n</code></pre>\n\n<p>This is definitely not a best production-quality code, the intent was to demonstrate how it\u2019s to be done in general. Hope it helps.</p>\n"}], "owner": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1425450361, "creation_date": 1425444072, "question_id": 28846767, "link": "https://stackoverflow.com/questions/28846767/read-from-a-file-and-update", "title": "Read from a file and Update", "body": "<p>i have a text file called text.txt with stored text like so</p>\n\n<p>713,socks,3.99</p>\n\n<p>888,hat,12.99</p>\n\n<p>634,shirt,7.99</p>\n\n<p>I want to open my file and choose a item number then i want to update the description and price. and save that back to the file.</p>\n\n<p>heres my code so far</p>\n\n<pre><code>puts \"Whats's the item number of the product you wish to update?\"\nitem_num = gets.chomp\nputs 'Enter new products description. '\nnew_description = gets.chomp\nputs 'Enter new products price. '\nnew_price = gets.chomp.to_s\nopen('text.txt', 'r+') { |update|\nupdate.puts \"#{item_num},#{new_description},#{new_price}\"\n}\nend\n</code></pre>\n\n<p>all this is doing is adding a new product with the same item number. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "macos", "permissions"], "comments": [{"owner": {"reputation": 6413, "user_id": 722274, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9396abc468bd402ef13990dfdc749ea0?s=128&d=identicon&r=PG", "display_name": "kobaltz", "link": "https://stackoverflow.com/users/722274/kobaltz"}, "edited": false, "score": 0, "creation_date": 1425439640, "post_id": 28846165, "comment_id": 45960874, "body": "How did you install <code>rbenv</code>? If you used <code>sudo</code> with the installation, this may be expected behavior."}, {"owner": {"reputation": 85, "user_id": 4630257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e340c8b731549a30dfcd12661584c92b?s=128&d=identicon&r=PG&f=1", "display_name": "rsilver", "link": "https://stackoverflow.com/users/4630257/rsilver"}, "reply_to_user": {"reputation": 6413, "user_id": 722274, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9396abc468bd402ef13990dfdc749ea0?s=128&d=identicon&r=PG", "display_name": "kobaltz", "link": "https://stackoverflow.com/users/722274/kobaltz"}, "edited": false, "score": 0, "creation_date": 1425440468, "post_id": 28846165, "comment_id": 45961031, "body": "I used HomeBrew $brew install rbenv  Any ideas on how to fix it?"}, {"owner": {"reputation": 6413, "user_id": 722274, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9396abc468bd402ef13990dfdc749ea0?s=128&d=identicon&r=PG", "display_name": "kobaltz", "link": "https://stackoverflow.com/users/722274/kobaltz"}, "edited": false, "score": 1, "creation_date": 1425440611, "post_id": 28846165, "comment_id": 45961066, "body": "You could try <code>sudo chown -R Russell_Silver ~&#47;.rbenv</code>. This will take ownership of the directory."}, {"owner": {"reputation": 85, "user_id": 4630257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e340c8b731549a30dfcd12661584c92b?s=128&d=identicon&r=PG&f=1", "display_name": "rsilver", "link": "https://stackoverflow.com/users/4630257/rsilver"}, "reply_to_user": {"reputation": 6413, "user_id": 722274, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9396abc468bd402ef13990dfdc749ea0?s=128&d=identicon&r=PG", "display_name": "kobaltz", "link": "https://stackoverflow.com/users/722274/kobaltz"}, "edited": false, "score": 0, "creation_date": 1425441177, "post_id": 28846165, "comment_id": 45961218, "body": "You&#39;re a legend! It worked perfectly."}, {"owner": {"reputation": 85, "user_id": 4630257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e340c8b731549a30dfcd12661584c92b?s=128&d=identicon&r=PG&f=1", "display_name": "rsilver", "link": "https://stackoverflow.com/users/4630257/rsilver"}, "reply_to_user": {"reputation": 6413, "user_id": 722274, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9396abc468bd402ef13990dfdc749ea0?s=128&d=identicon&r=PG", "display_name": "kobaltz", "link": "https://stackoverflow.com/users/722274/kobaltz"}, "edited": false, "score": 0, "creation_date": 1425441177, "post_id": 28846165, "comment_id": 45961219, "body": "Thank you very much kobaltz"}, {"owner": {"reputation": 6413, "user_id": 722274, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9396abc468bd402ef13990dfdc749ea0?s=128&d=identicon&r=PG", "display_name": "kobaltz", "link": "https://stackoverflow.com/users/722274/kobaltz"}, "edited": false, "score": 0, "creation_date": 1425441286, "post_id": 28846165, "comment_id": 45961240, "body": "No problem. Turned this to an answer so that later folk can refer to it."}], "answers": [{"comments": [{"owner": {"reputation": 1177, "user_id": 831732, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/bb61fb8b858eafcb98a43657731d9d9f?s=128&d=identicon&r=PG", "display_name": "Toontje", "link": "https://stackoverflow.com/users/831732/toontje"}, "edited": false, "score": 0, "creation_date": 1425974371, "post_id": 28846395, "comment_id": 46169852, "body": "I had the same issue. Running the above command fixed it. Thanks a lot!"}], "tags": [], "owner": {"reputation": 6413, "user_id": 722274, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9396abc468bd402ef13990dfdc749ea0?s=128&d=identicon&r=PG", "display_name": "kobaltz", "link": "https://stackoverflow.com/users/722274/kobaltz"}, "is_accepted": true, "score": 39, "last_activity_date": 1444777735, "last_edit_date": 1444777735, "creation_date": 1425441261, "answer_id": 28846395, "question_id": 28846165, "link": "https://stackoverflow.com/questions/28846165/permission-error-when-trying-to-install-rails-osx/28846395#28846395", "title": "Permission Error When Trying To Install Rails (OSX)", "body": "<p>Your <code>rbenv</code> installation was incorrectly installed as it had elevated privileges which caused your user account to not have write access to <code>~/.rbenv</code>.</p>\n\n<p>Issue the following command in order to take of ownership of the directory:</p>\n\n<pre><code> sudo chown -R Russell_Silver ~/.rbenv\n</code></pre>\n\n<p>Note that some users may have a different <code>rbenv</code> directory, e.g. <code>/usr/local/var/rbenv</code>. This would take the place of <code>~/.rbenv</code> in the above command.</p>\n"}], "owner": {"reputation": 85, "user_id": 4630257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e340c8b731549a30dfcd12661584c92b?s=128&d=identicon&r=PG&f=1", "display_name": "rsilver", "link": "https://stackoverflow.com/users/4630257/rsilver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8710, "favorite_count": 3, "accepted_answer_id": 28846395, "answer_count": 1, "score": 7, "last_activity_date": 1444777735, "creation_date": 1425439500, "last_edit_date": 1425439589, "question_id": 28846165, "link": "https://stackoverflow.com/questions/28846165/permission-error-when-trying-to-install-rails-osx", "title": "Permission Error When Trying To Install Rails (OSX)", "body": "<p>I am new to programming and am trying to get rails installed on my terminal. I have been following instructions from a friend, installing the xcode command line tools, homebrew, git, rbenv, ruby-build, ruby gems, ruby, and postgres. But whenever, I try $gem install rails, I get the following:</p>\n\n<pre><code>Russell-Silvers-MacBook-Pro:~ Russell_Silver$ gem install rails\nERROR:  While executing gem ... (Errno::EACCES)\n    Permission denied @ rb_sysopen - /Users/Russell_Silver/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rails-4.2.0/README.md\n</code></pre>\n\n<p>This is especially frustrating because when I run $gem list, it says I have rails 3.2.18. Which is peculiar, because when I run $rails v$, it tells me I have Rails 4.2.0.</p>\n\n<p>When I try to use rails <code>rails my new_app</code></p>\n\n<pre><code>Errno::EACCES: Permission denied @ rb_sysopen - /Users/Russell_Silver/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rails-4.2.0/README.md\nAn error occurred while installing rails (4.2.0), and Bundler cannot continue.\nMake sure that `gem install rails -v '4.2.0'` succeeds before bundling.\n         run  bundle exec spring binstub --all\n/Users/Russell_Silver/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.8.3/lib/bundler/shared_helpers.rb:83: warning: Insecure world writable dir /Users/Russell_Silver in PATH, mode 040707\nbundler: command not found: spring\nInstall missing gem executables with `bundle install`\nRussell-Silvers-MacBook-Pro:~ Russell_Silver$ bundle install\n/Users/Russell_Silver/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.8.3/lib/bundler/vendor/thor/shell/basic.rb:355: warning: Insecure world writable dir /Users/Russell_Silver in PATH, mode 040707\nCould not locate Gemfile or .bundle/ directory\n</code></pre>\n\n<p>This is really frustrating, especially for someone new to programming such as myself, so I am seeking help from anybody who might know what is wrong.</p>\n"}, {"tags": ["ruby", "git", "gem", "cloud", "openshift"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425442246, "post_id": 28846198, "comment_id": 45961472, "body": "how to get the newest ruby version ? because i am very new to openshift"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "reply_to_user": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425443203, "post_id": 28846198, "comment_id": 45961693, "body": "try using rvm or rbenv, or a newer version of your operating system"}, {"owner": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425480089, "post_id": 28846198, "comment_id": 45980364, "body": "/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:247:in <code>to_specs&#39;: Could not find rhc (&gt;= 0) amongst [bundler-1.7.9, bundler-unload-1.0.2, executable-hooks-1.3.2, gem-wrappers-1.2.7, minitest-5.4.3, power_assert-0.2.2, rubygems-bundler-1.4.4, rvm-1.11.3.9, test-unit-3.0.8] (Gem::LoadError) \tfrom &#47;usr&#47;lib&#47;ruby&#47;vendor_ruby&#47;1.8&#47;rubygems&#47;dependency.rb:256:in </code>to_spec&#39; \tfrom /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:1208:in `gem&#39; \tfrom /usr/local/bin/rhc:18"}, {"owner": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425480207, "post_id": 28846198, "comment_id": 45980446, "body": "i have follow your comment to update the newest rvm but it give up this message when i key in rhc setup, can i know what is the problem ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "reply_to_user": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425513311, "post_id": 28846198, "comment_id": 45999491, "body": "If it&#39;s still showing that you are using ruby 1.8, then you aren&#39;t using rvm correctly."}, {"owner": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425568449, "post_id": 28846198, "comment_id": 46023691, "body": "I still get back the old error message but the rvm version is the new one.i follow the youtuube link for the upgrading tutorial <a href=\"https://www.youtube.com/watch?v=W-xSFdB5EQQ\" rel=\"nofollow noreferrer\">youtube.com/watch?v=W-xSFdB5EQQ</a> this is the video I refer for upgrading the ruby"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "reply_to_user": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425569443, "post_id": 28846198, "comment_id": 46024447, "body": "You need to install a newer version of ruby using rvm, and then &#39;rvm use&#39; it, you are still using the old version of 1.8"}, {"owner": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "edited": false, "score": 0, "creation_date": 1425574487, "post_id": 28846198, "comment_id": 46027799, "body": "I do all the thing already, all the command I refer to that youtube link I provided in the previous comment ,but the problem still the same"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "is_accepted": false, "score": 0, "last_activity_date": 1425439779, "creation_date": 1425439779, "answer_id": 28846198, "question_id": 28846152, "link": "https://stackoverflow.com/questions/28846152/rhc-setup-command-error/28846198#28846198", "title": "Rhc setup command error", "body": "<p>You need to use a newer version of ruby.  Try at least 1.9.3, which supports the new symbol syntax.</p>\n\n<pre><code>symbol: \"value\"\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>:symbol =&gt; \"value\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1889387, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f13bf74ad3a7b483b910f57d71285c81?s=128&d=identicon&r=PG", "display_name": "Shinji Kagawa", "link": "https://stackoverflow.com/users/1889387/shinji-kagawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425439779, "creation_date": 1425439387, "question_id": 28846152, "link": "https://stackoverflow.com/questions/28846152/rhc-setup-command-error", "title": "Rhc setup command error", "body": "<p>my rhc setup command not working for openshift installation, i have recheck all the ruby, rubygems and git version, all of them show me the newest version <br>\n<br>\nchikin@chikin-VirtualBox:~$ sudo apt-get install ruby-full\n[sudo] password for chikin: \nReading package lists... Done\nBuilding dependency tree<br>\nReading state information... Done\nruby-full is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 275 not upgraded.\n<br><br>chikin@chikin-VirtualBox:~$ sudo apt-get install rubygems \nReading package lists... Done\nBuilding dependency tree<br>\nReading state information... Done\nrubygems is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 275 not upgraded.\n<br><br>chikin@chikin-VirtualBox:~$ sudo apt-get install git-core\nReading package lists... Done\nBuilding dependency tree<br>\nReading state information... Done\ngit-core is already the newest version.</p>\n\n<h1><br><br>the problem come when i try the rhc setup commnad,it show me something i really dont know about it <br><br><br><br><br><br> chikin@chikin-VirtualBox:~$ sudo gem install rhc</h1>\n\n<p>If this is your first time installing the RHC tools, please run 'rhc setup'</p>\n\n<p>===========================================================================\nSuccessfully installed rhc-1.35.1\n1 gem installed\nInstalling ri documentation for rhc-1.35.1...\nInstalling RDoc documentation for rhc-1.35.1...\n<br><br>chikin@chikin-VirtualBox:~$ rhc setup \n/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in <code>gem_original_require': /var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:236: syntax error, unexpected '.', expecting kEND (SyntaxError)\n        .compact\n         ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:462: odd number list for Hash\n          title: @title,\n                ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:462: syntax error, unexpected ':', expecting '}'\n          title: @title,\n                ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:463: syntax error, unexpected ':', expecting '='\n          percent_complete: percent_complete,\n                           ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:464: syntax error, unexpected ':', expecting '='\n          progress_bar: progress_bar,\n                       ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:465: syntax error, unexpected ':', expecting '='\n          step: @step,\n               ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:466: syntax error, unexpected ':', expecting '='\n          steps_remaining: steps_remaining,\n                          ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:467: syntax error, unexpected ':', expecting '='\n          total_steps: @total_steps,\n                      ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:468: syntax error, unexpected ':', expecting '='\n          time_elapsed: '%0.2fs' % time_elapsed,\n                       ^\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:468: syntax error, unexpected ',', expecting kEND\n/var/lib/gems/1.8/gems/commander-4.3.0/lib/commander/user_interaction.rb:470: syntax error, unexpected '}', expecting kEND\n        }.merge! @tokens\n         ^\n    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in</code>require'\n    from /var/lib/gems/1.8/gems/commander-4.3.0/lib/commander.rb:27\n    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in <code>gem_original_require'\n    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in</code>require'\n    from /var/lib/gems/1.8/gems/rhc-1.35.1/lib/rhc.rb:30\n    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in <code>gem_original_require'\n    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in</code>require'\n    from /var/lib/gems/1.8/gems/rhc-1.35.1/lib/rhc/cli.rb:1\n    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in <code>gem_original_require'\n    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in</code>require'\n    from /var/lib/gems/1.8/gems/rhc-1.35.1/bin/rhc:18\n    from /usr/local/bin/rhc:19:in `load'\n    from /usr/local/bin/rhc:19\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "puma"], "answers": [{"tags": [], "owner": {"reputation": 516, "user_id": 1442516, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aq2Lc.jpg?s=128&g=1", "display_name": "Alec Wilson", "link": "https://stackoverflow.com/users/1442516/alec-wilson"}, "is_accepted": true, "score": 3, "last_activity_date": 1425439669, "creation_date": 1425439669, "answer_id": 28846184, "question_id": 28846081, "link": "https://stackoverflow.com/questions/28846081/cannot-fix-heroku-h10-error/28846184#28846184", "title": "Cannot fix Heroku H10 error", "body": "<p>Fixed. Going line by line through the logs, found that I had my puma.rb file in the wrong location.</p>\n"}], "owner": {"reputation": 516, "user_id": 1442516, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aq2Lc.jpg?s=128&g=1", "display_name": "Alec Wilson", "link": "https://stackoverflow.com/users/1442516/alec-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 1, "accepted_answer_id": 28846184, "answer_count": 1, "score": 1, "last_activity_date": 1443757805, "creation_date": 1425438910, "question_id": 28846081, "link": "https://stackoverflow.com/questions/28846081/cannot-fix-heroku-h10-error", "title": "Cannot fix Heroku H10 error", "body": "<p>I have read every single SO answer I can find on H10 errors, and am still unable to fix the issue. My app works fine in dev, but in production I get the useless \"Application Error\" message, and the logs only give me a tiny amount of information. The app was working, and the only major change thats been made since then was using Puma in production (created a config/puma.rb file and a Procfile), as I've been following the Rails Tutorial.</p>\n\n<p>Logs: </p>\n\n<pre><code>    2015-03-01T00:21:46.250486+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n    2015-03-01T00:21:46.250482+00:00 app[web.1]: =&gt; Rails 4.2.0 application starting in production on http://0.0.0.0:36909\n    2015-03-01T00:21:46.250452+00:00 app[web.1]: =&gt; Booting Puma\n    2015-03-01T00:21:47.672814+00:00 app[web.1]: * Listening on tcp://0.0.0.0:36909\n    2015-03-01T00:21:47.672797+00:00 app[web.1]: Puma 2.11.1 starting...\n    2015-03-01T00:21:47.672812+00:00 app[web.1]: * Environment: production\n    2015-03-01T00:21:47.672804+00:00 app[web.1]: * Min threads: 0, max threads: 16\n    2015-03-01T00:21:47.995124+00:00 heroku[web.1]: State changed from starting to up\n    2015-03-01T01:25:01.069619+00:00 heroku[web.1]: Idling\n    2015-03-01T01:25:01.070164+00:00 heroku[web.1]: State changed from up to down\n    2015-03-01T01:25:03.868187+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n    2015-03-01T01:25:04.655669+00:00 app[web.1]: Exiting\n    2015-03-01T01:25:05.901550+00:00 heroku[web.1]: Process exited with status 143\n    2015-03-03T18:18:29.133217+00:00 heroku[web.1]: Unidling\n    2015-03-03T18:18:29.133564+00:00 heroku[web.1]: State changed from down to starting\n    2015-03-03T18:18:34.226482+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 32028 -e production`\n    2015-03-03T18:18:39.475492+00:00 app[web.1]: =&gt; Booting Puma\n    2015-03-03T18:18:39.475519+00:00 app[web.1]: =&gt; Rails 4.2.0 application starting in production on http://0.0.0.0:32028\n    2015-03-03T18:18:39.475521+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n    2015-03-03T18:18:39.475522+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n    2015-03-03T18:18:40.951238+00:00 app[web.1]: * Min threads: 0, max threads: 16\n    2015-03-03T18:18:40.951182+00:00 app[web.1]: Puma 2.11.1 starting...\n    2015-03-03T18:18:40.951281+00:00 app[web.1]: * Environment: production\n    2015-03-03T18:18:40.951344+00:00 app[web.1]: * Listening on tcp://0.0.0.0:32028\n    2015-03-03T18:18:41.226254+00:00 app[web.1]: Started GET \"/about\" for 108.94.29.164 at         2015-03-03 18:18:41 +0000\n    2015-03-03T18:18:41.711420+00:00 app[web.1]: Processing by StaticPagesController#about as HTML\n    2015-03-03T18:18:41.776431+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.5ms)\n    2015-03-03T18:18:41.055292+00:00 heroku[web.1]: State changed from starting to up\n    2015-03-03T18:18:41.769299+00:00 app[web.1]:   Rendered static_pages/about.html.erb within layouts/application (0.7ms)\n    2015-03-03T18:18:41.780270+00:00 app[web.1]:   Rendered layouts/_header.html.erb (0.8ms)\n    2015-03-03T18:18:41.780272+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.6ms)\n    2015-03-03T18:18:41.780273+00:00 app[web.1]: Completed 200 OK in 58ms (Views: 40.4ms | ActiveRecord: 0.0ms)\n    2015-03-03T18:18:41.785426+00:00 heroku[router]: at=info method=GET path=\"/about\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=f01990b2-55ef-4bb5-99ba-635bd06d211d fwd=\"108.94.29.164\" dyno=web.1 connect=0ms service=585ms status=200 bytes=2600\n    2015-03-03T18:18:43.046815+00:00 heroku[router]: at=info method=GET path=\"/assets/application-3693022c438b060c15d38fbd42afb0dd.css\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=4777c80d-585c-4e9a-a260-df8e498d5aef fwd=\"108.94.29.164\" dyno=web.1 connect=1ms service=4ms status=304 bytes=100\n    2015-03-03T18:18:43.088423+00:00 heroku[router]: at=info method=GET path=\"/assets/application-40a1932d75f4dbff6f274ab2c04c99ef.js\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=3418bdae-28fa-45c0-adf4-e121b7a65341 fwd=\"108.94.29.164\" dyno=web.1 connect=5ms service=2ms status=304 bytes=114\n    2015-03-03T18:18:45.693979+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=1ec2d858-f4f4-4130-83ed-9835a6b8aee4 fwd=\"108.94.29.164\" dyno=web.1 connect=0ms service=1ms status=200 bytes=143\n    2015-03-03T19:25:51.614540+00:00 heroku[web.1]: Idling\n    2015-03-03T19:25:51.615133+00:00 heroku[web.1]: State changed from up to down\n    2015-03-03T19:25:54.642520+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n    2015-03-03T19:25:55.360332+00:00 app[web.1]: Exiting\n    2015-03-03T19:25:56.374683+00:00 heroku[web.1]: Process exited with status 143\n    2015-03-04T02:32:30.738201+00:00 heroku[api]: Deploy ada64bd by alec.f.wilson@gmail.com\n    2015-03-04T02:32:30.738201+00:00 heroku[api]: Release v15 created by alec.f.wilson@gmail.com\n    2015-03-04T02:32:43.267564+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by alec.f.wilson@gmail.com\n    2015-03-04T02:32:47.471977+00:00 heroku[run.5036]: Awaiting client\n    2015-03-04T02:32:47.501831+00:00 heroku[run.5036]: Starting process with command `bundle exec rake db:migrate`\n    2015-03-04T02:32:47.757400+00:00 heroku[run.5036]: State changed from starting to up\n    2015-03-04T02:32:53.981368+00:00 heroku[run.5036]: Process exited with status 0\n    2015-03-04T02:32:53.997726+00:00 heroku[run.5036]: State changed from up to complete\n    2015-03-04T02:33:00.228053+00:00 heroku[web.1]: Unidling\n    2015-03-04T02:33:00.228382+00:00 heroku[web.1]: State changed from down to starting\n    2015-03-04T02:33:05.010249+00:00 heroku[web.1]: Starting process with command `bundle exec puma -C config/puma.rb`\n    2015-03-04T02:33:07.896116+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:179:in `_load_from'\n    2015-03-04T02:33:07.896123+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/bin/puma:10:in `&lt;top (required)&gt;'\n    2015-03-04T02:33:07.896099+00:00 app[web.1]: /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:179:in `read': No such file or directory @ rb_sysopen - config/puma.rb (Errno::ENOENT)\n    2015-03-04T02:33:07.896127+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/bin/puma:23:in `load'\n    2015-03-04T02:33:07.896120+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/cli.rb:308:in `parse_options'\n    2015-03-04T02:33:07.896118+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:40:in `load'\n    2015-03-04T02:33:07.896121+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/cli.rb:453:in `run'\n    2015-03-04T02:33:07.896128+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/bin/puma:23:in `&lt;main&gt;'\n    2015-03-04T02:33:08.726223+00:00 heroku[web.1]: State changed from starting to crashed\n    2015-03-04T02:33:08.726988+00:00 heroku[web.1]: State changed from crashed to starting\n    2015-03-04T02:33:08.714157+00:00 heroku[web.1]: Process exited with status 1\n    2015-03-04T02:33:12.828442+00:00 heroku[web.1]: Starting process with command `bundle exec puma -C config/puma.rb`\n    2015-03-04T02:33:16.051228+00:00 heroku[web.1]: State changed from starting to crashed\n    2015-03-04T02:33:16.031660+00:00 heroku[web.1]: Process exited with status 1\n    2015-03-04T02:33:17.607265+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=cc813454-8a73-46b1-9f2f-398653e718b6 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:33:17.807509+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=0f04159b-e864-4a16-8c6d-aee891f112b3 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:33:18.286091+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/about\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=bdee0496-b545-4f15-88fc-1ebd92869e64 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:33:18.965330+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=364c0e82-2cb8-4613-845a-093a09bfb663 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:33:15.303042+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/cli.rb:308:in `parse_options'\n    2015-03-04T02:33:15.303046+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/cli.rb:453:in `run'\n    2015-03-04T02:33:15.303018+00:00 app[web.1]: /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:179:in `read': No such file or directory @ rb_sysopen - config/puma.rb (Errno::ENOENT)\n    2015-03-04T02:33:15.303051+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/bin/puma:23:in `&lt;main&gt;'\n    2015-03-04T02:33:15.303040+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:40:in `load'\n    2015-03-04T02:33:15.303049+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/bin/puma:23:in `load'\n    2015-03-04T02:33:15.303037+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:179:in `_load_from'\n    2015-03-04T02:33:15.303047+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/bin/puma:10:in `&lt;top (required)&gt;'\n    2015-03-04T02:33:22.485187+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=68be4767-c94f-41b1-84fe-9f7fc95e6f4c fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:33:22.954529+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=65918dc8-be1f-4875-997d-a9507b141182 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:33:23.061083+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=ea5e39cf-0b11-482b-a0c2-53f9068eca5f fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:37:48.220193+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=be8d1130-94d0-42b7-95ae-e73e5bae3c2d fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:37:49.023244+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=7b8ba657-f700-4519-8cda-7ee709aacdf1 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:37:49.322225+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=53642f7e-a8ad-4279-b619-2e482155e792 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:38:25.709950+00:00 heroku[api]: Release v16 created by alec.f.wilson@gmail.com\n    2015-03-04T02:38:25.709950+00:00 heroku[api]: Deploy bf99108 by alec.f.wilson@gmail.com\n    2015-03-04T02:38:26.037514+00:00 heroku[web.1]: State changed from crashed to starting\n    2015-03-04T02:38:29.655020+00:00 heroku[web.1]: Starting process with command `bundle exec puma -C config/puma.rb`\n    2015-03-04T02:38:32.015466+00:00 app[web.1]: /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:179:in `read': No such file or directory @ rb_sysopen - config/puma.rb (Errno::ENOENT)\n    2015-03-04T02:38:32.015483+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:179:in `_load_from'\n    2015-03-04T02:38:32.015486+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/configuration.rb:40:in `load'\n    2015-03-04T02:38:32.015487+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/cli.rb:308:in `parse_options'\n    2015-03-04T02:38:32.015493+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/bin/puma:10:in `&lt;top (required)&gt;'\n    2015-03-04T02:38:32.015495+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/bin/puma:23:in `load'\n    2015-03-04T02:38:32.015491+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/gems/puma-2.11.1/lib/puma/cli.rb:453:in `run'\n    2015-03-04T02:38:32.015497+00:00 app[web.1]:  from /app/vendor/bundle/ruby/2.2.0/bin/puma:23:in `&lt;main&gt;'\n    2015-03-04T02:38:32.719386+00:00 heroku[web.1]: Process exited with status 1\n    2015-03-04T02:38:32.739368+00:00 heroku[web.1]: State changed from starting to crashed\n    2015-03-04T02:38:34.073282+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=d97ef726-cdcc-4724-ad8d-506f71c36da6 fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:38:34.756462+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=b64b5c74-00de-406a-a769-a6771b5ffabd fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n    2015-03-04T02:38:35.037847+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=alecfwilson-sample-rails-app.herokuapp.com request_id=90f3b563-de59-4107-a8fe-d613cf98aefd fwd=\"73.162.223.27\" dyno= connect= service= status=503 bytes=\n</code></pre>\n\n<p>I've already run <code>$ heroku run rake db:migrate</code>, <code>$ heroku restart</code>, and reset the production database. What else can I do here? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 0, "creation_date": 1425449994, "post_id": 28847105, "comment_id": 45963624, "body": "I could pass the test by changing <code>2.months.ago</code> to <code>Time.new(2014,1,1)</code>. It didn&#39;t occurred to use <code>Ttime.at</code>. Thanks!"}], "tags": [], "owner": {"reputation": 1057, "user_id": 1472317, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PiUIS.jpg?s=128&g=1", "display_name": "Guilherme Carlos", "link": "https://stackoverflow.com/users/1472317/guilherme-carlos"}, "is_accepted": true, "score": 0, "last_activity_date": 1425446133, "creation_date": 1425446133, "answer_id": 28847105, "question_id": 28845320, "link": "https://stackoverflow.com/questions/28845320/how-to-deal-with-timewithzone-class-when-using-change-matcher/28847105#28847105", "title": "How to deal with TimeWithZone class when using change matcher", "body": "<p>Use <code>to_i</code> method to get time in seconds since Epoch and build the new Time with <code>Time.at</code> using those seconds as parameters. This will ignore that milliseconds who are messing with the test. </p>\n\n<pre><code>expect{ company.update_attributes(read: true) }\n.to change{ Time.at(company.read_at.to_i) }\n.from(2.months.ago).to(Time.at(Time.current.to_i))\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28847105, "answer_count": 1, "score": 0, "last_activity_date": 1425446133, "creation_date": 1425433481, "last_edit_date": 1495540615, "question_id": 28845320, "link": "https://stackoverflow.com/questions/28845320/how-to-deal-with-timewithzone-class-when-using-change-matcher", "title": "How to deal with TimeWithZone class when using change matcher", "body": "<p>I have a method like this:</p>\n\n<pre><code>class Company &lt; ActiveRecord::Base\n  before_save :update_read_status  \n  def update_read_status\n    if read_changed?\n      column = read ? :read_at : :unread_at\n      self[column] = Time.zone.now\n    end\n  end\nend\n</code></pre>\n\n<p>And I want to test the code with this <code>RSpec</code>:</p>\n\n<pre><code>  context \"#update_read_status\" do\n  before{ company.update_attributes(read_at: 2.months.ago) }\n    context \"when read become true\" do\n      it \"read_at be current time\" do\n        expect{ company.update_attributes(read: true) }.to change{ company.read_at }.from(2.months.ago).to(Time.current)\n      end\n    end\n  end\n</code></pre>\n\n<p>I know this spec fails because the time are changing during the test, but how can I compare time with <code>change</code> matcher?</p>\n\n<p>I found a similar question <a href=\"https://stackoverflow.com/questions/20403063/trouble-comparing-time-with-rspec\">Trouble comparing time with RSpec</a> , but the way with <code>to_s</code> method or <code>be_within</code> matcher is not available option in my case.</p>\n"}, {"tags": ["ruby", "constructor"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1425432981, "post_id": 28845222, "comment_id": 45959184, "body": "Those aren&#39;t constructors of built-in classes, though... (That&#39;s a hint.) The source for these is available, btw."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425433430, "post_id": 28845222, "comment_id": 45959298, "body": "To expand on Dave&#39;s point, those in capitals followed by parentheses are not classes, but are methods."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1425438676, "post_id": 28845222, "comment_id": 45960639, "body": "<code>Complex</code> and all the other &quot;I&#39;m really a function but Ruby doesn&#39;t have functions&quot; methods are just methods in <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-Complex\" rel=\"nofollow noreferrer\"><code>Kernel</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 2962444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afed33d625c0c9e755c5bc8e061088f?s=128&d=identicon&r=PG&f=1", "display_name": "quizdog", "link": "https://stackoverflow.com/users/2962444/quizdog"}, "edited": false, "score": 0, "creation_date": 1425447101, "post_id": 28846209, "comment_id": 45962712, "body": "Cool Thanks! Still getting used to Ruby, coming from Python I would think your example would just replace the Class Dog with a Function Dog - but of course it doesn&#39;t."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 328, "user_id": 2962444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afed33d625c0c9e755c5bc8e061088f?s=128&d=identicon&r=PG&f=1", "display_name": "quizdog", "link": "https://stackoverflow.com/users/2962444/quizdog"}, "edited": false, "score": 0, "creation_date": 1425450113, "post_id": 28846209, "comment_id": 45963681, "body": "@quizdog, Yeah, ruby is a lot trickier.  There are no global methods in ruby; a def is always part of some class.   A def attaches itself to whatever class is the <i>current class</i>.   It so happens that the current class at the toplevel is Object.  So, a toplevel def is actually a (private) method in the Object class.  As a result, defining a def inside the Object class has no effect on the Dog class."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1425540084, "post_id": 28846209, "comment_id": 46007200, "body": "It&#39;s more that Ruby will give preferential treatment to constants (which it expects start with upper-case letters) that are actual constants; <code>Dog(x)</code> is only invoked as a method because Ruby knows it&#39;s looking for a method due to the passed arguments. If you defined a zero-argument method <code>Dog</code> and then tried to invoke it without parentheses, you&#39;d get the class instead."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1425544576, "post_id": 28846209, "comment_id": 46009241, "body": "@ChrisHeald, I was trying to make the point that the Dog class is in a different scope than the Dog def, so the Dog def does not &quot;replace&quot; the Dog class."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 2, "last_activity_date": 1425439874, "creation_date": 1425439874, "answer_id": 28846209, "question_id": 28845222, "link": "https://stackoverflow.com/questions/28845222/how-do-i-make-a-class-whose-constructor-looks-like-the-constructor-of-a-built-in/28846209#28846209", "title": "How do I make a class whose constructor looks like the constructor of a built-in class?", "body": "<pre><code>class Dog\n  def initialize(name)\n    @name = name\n  end\n\n  def greet\n    puts 'hello'\n  end\nend\n\n\ndef Dog(x)\n  Dog.new(x)  #Create a new instance of the Dog class and return it.\nend\n\n\nd = Dog(\"Rover\")\nd.greet\n\n--output:--\nhello\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1425523338, "post_id": 28850096, "comment_id": 46002401, "body": "The Object class includes the Kernel module, try <code>p Object.private_instance_methods.grep &#47;^[A-Z]&#47;</code>, so your example ends up creating a private instance method in the Object class, which is the exact same thing a toplevel def does and with less typing."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1425544642, "post_id": 28850096, "comment_id": 46009275, "body": "@7stud yes, the difference is subtle, but the OP wanted to know how methods like the built-in ones can be created. And Ruby defines them in <code>Kernel</code>, not in <code>Object</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1425722655, "post_id": 28850096, "comment_id": 46085506, "body": "Would the down-voter leave a comment, please? Is my explanation wrong or misleading?"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 6, "last_activity_date": 1425722318, "last_edit_date": 1425722318, "creation_date": 1425459075, "answer_id": 28850096, "question_id": 28845222, "link": "https://stackoverflow.com/questions/28845222/how-do-i-make-a-class-whose-constructor-looks-like-the-constructor-of-a-built-in/28850096#28850096", "title": "How do I make a class whose constructor looks like the constructor of a built-in class?", "body": "<p><code>Complex</code> can refer to either the <a href=\"http://ruby-doc.org/core-2.2.1/Complex.html\" rel=\"nofollow\"><code>Complex</code> class</a>, or to the <a href=\"http://ruby-doc.org/core-2.2.1/Kernel.html#method-i-Complex\" rel=\"nofollow\"><code>Complex</code> method</a> defined in Kernel:</p>\n\n<pre><code>Object.const_get(:Complex) #=&gt; Complex\nObject.method(:Complex)    #=&gt; #&lt;Method: Class(Kernel)#Complex&gt;\n</code></pre>\n\n<p>The latter is called a global method (or global function). Ruby defines these methods in <a href=\"http://ruby-doc.org/core-2.2.1/Kernel.html\" rel=\"nofollow\"><code>Kernel</code></a> as both, private instance methods:</p>\n\n<pre><code>Kernel.private_instance_methods.grep /^[A-Z]/\n#=&gt; [:Integer, :Float, :String, :Array, :Hash, :Rational, :Complex]\n</code></pre>\n\n<p>and singleton methods:</p>\n\n<pre><code>Kernel.singleton_methods.grep /^[A-Z]/\n#=&gt; [:Integer, :Float, :String, :Array, :Hash, :Rational, :Complex]\n</code></pre>\n\n<p>Just like any other method in Kernel:</p>\n\n<blockquote>\n  <p>These methods are called without a receiver and thus can be called in functional form</p>\n</blockquote>\n\n<p>You can use <a href=\"http://ruby-doc.org//core-2.2.1/Module.html#method-i-module_function\" rel=\"nofollow\"><code>module_function</code></a> to add your own global method to <code>Kernel</code>:</p>\n\n<pre><code>class Thing\nend\n\nmodule Kernel\n  module_function\n\n  def Thing\n    Thing.new\n  end\nend\n\nThing          #=&gt; Thing                      &lt;- Thing class\nThing()        #=&gt; #&lt;Thing:0x007f8af4a96ec0&gt;  &lt;- Kernel#Thing\nKernel.Thing() #=&gt; #&lt;Thing:0x007fc111238280&gt;  &lt;- Kernel::Thing\n</code></pre>\n"}], "owner": {"reputation": 328, "user_id": 2962444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afed33d625c0c9e755c5bc8e061088f?s=128&d=identicon&r=PG&f=1", "display_name": "quizdog", "link": "https://stackoverflow.com/users/2962444/quizdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 28846209, "answer_count": 2, "score": 4, "last_activity_date": 1425722318, "creation_date": 1425432731, "last_edit_date": 1425720056, "question_id": 28845222, "link": "https://stackoverflow.com/questions/28845222/how-do-i-make-a-class-whose-constructor-looks-like-the-constructor-of-a-built-in", "title": "How do I make a class whose constructor looks like the constructor of a built-in class?", "body": "<p><code>Complex</code> is a built-in class. To make a <code>Complex</code> object, I write:</p>\n\n<pre><code>Complex(10, 5)\n</code></pre>\n\n<p>But if I create my own class <code>Thing</code>:</p>\n\n<pre><code>class Thing\n  def initalize()\n  end\nend\n</code></pre>\n\n<p>to create a new <code>Thing</code>, I have to write:</p>\n\n<pre><code>Thing.new(...)\n</code></pre>\n\n<p>Is it possible to create a constructor for <code>Thing</code> so I can write:</p>\n\n<pre><code>Thing(...)\n</code></pre>\n\n<p>and have it act just like a built-in class such as <code>Complex(1,1)</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "submit", "categories"], "comments": [{"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1425435555, "post_id": 28845199, "comment_id": 45959838, "body": "Check the content of <code>log&#47;development.log</code> file; it could give more info about what exactly is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "is_accepted": false, "score": 1, "last_activity_date": 1425436933, "creation_date": 1425436933, "answer_id": 28845792, "question_id": 28845199, "link": "https://stackoverflow.com/questions/28845199/cant-get-rails-to-return-from-select/28845792#28845792", "title": "Can&#39;t get rails to return from select", "body": "<p>Your print_params method is wrong : </p>\n\n<pre><code>def print_params\n    params.require(:print).permit(:p1, :p2, :p3, :p4)\nend\n</code></pre>\n\n<p>This is the right format.</p>\n"}], "owner": {"reputation": 1, "user_id": 4629878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZWLo-sAxoaI/AAAAAAAAAAI/AAAAAAAAAE4/ynbw3S8dK-M/photo.jpg?sz=128", "display_name": "AJ Burt", "link": "https://stackoverflow.com/users/4629878/aj-burt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425436933, "creation_date": 1425432572, "question_id": 28845199, "link": "https://stackoverflow.com/questions/28845199/cant-get-rails-to-return-from-select", "title": "Can&#39;t get rails to return from select", "body": "<p>I'm trying to set up a page where there are 4 dropdown boxes, each of which have a full list of Products. A user can select any combination of 4 products, and 'create' a new print page, which has the product information list</p>\n\n<p>I only have one box right now, but when I try to create a new row for Print from this page, it doesn't return anything to :p1</p>\n\n<p>new.html.erb:</p>\n\n\n\n<pre><code>&lt;%= f.collection_select :p1, Product.all, :id, :name, :prompt =&gt; 'Select One' %&gt;\n\n&lt;%= f.submit \"Create\" %&gt;\n</code></pre>\n\n\n\n<pre><code>class PrintsController &lt; ApplicationController\n\n    def new\n        @print = Print.new\n    end\n\n    def create\n        @print = Print.new(print_params)\n\n            if @print.save\n                redirect_to @print, alert: \"Created successfully.\"\n            else\n                redirect_to new_print_path, alert: \"Error creating print page.\"\n            end\n\n    end\n\n    def show\n        @print = Print.find(params[:id])\n\n    end\n\n    private\n\ndef print_params\n    params.require(:p1).permit(:p2, :p3, :p4)\nend\n\n\nend\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>class Print &lt; ActiveRecord::Base\n    belongs_to :product\nend\n</code></pre>\n\n<p>Migrate</p>\n\n<pre><code>class CreatePrints &lt; ActiveRecord::Migration\n  def change\n    create_table :prints do |t|\n      t.integer :p1\n      t.integer :p2\n      t.integer :p3\n      t.integer :p4\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :categories, :products, :prints\n</code></pre>\n\n<p>I'm a total rails newbie, so I know I'm probably making a stupid mistake somewhere, but I've been fiddling with code for hours and still haven't figured out what I did wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "figaro-ruby"], "comments": [{"owner": {"reputation": 11, "user_id": 4592195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1537237903212332/picture?type=large", "display_name": "viewsatwork", "link": "https://stackoverflow.com/users/4592195/viewsatwork"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1425431750, "post_id": 28845038, "comment_id": 45958915, "body": "@sevenseacat: thank you for re-formatting Terminal output."}, {"owner": {"reputation": 11, "user_id": 4592195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1537237903212332/picture?type=large", "display_name": "viewsatwork", "link": "https://stackoverflow.com/users/4592195/viewsatwork"}, "edited": false, "score": 0, "creation_date": 1425431985, "post_id": 28845038, "comment_id": 45958976, "body": "Note that this error also occurs when I attempt to turn on the Rails server."}, {"owner": {"reputation": 873, "user_id": 2555969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e759983a8c9b7cd6269471d48fe3199?s=128&d=identicon&r=PG", "display_name": "wolfemm", "link": "https://stackoverflow.com/users/2555969/wolfemm"}, "edited": false, "score": 0, "creation_date": 1425432228, "post_id": 28845038, "comment_id": 45959033, "body": "Can you provide your application.yml with dummy data?"}, {"owner": {"reputation": 11, "user_id": 4592195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1537237903212332/picture?type=large", "display_name": "viewsatwork", "link": "https://stackoverflow.com/users/4592195/viewsatwork"}, "reply_to_user": {"reputation": 873, "user_id": 2555969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e759983a8c9b7cd6269471d48fe3199?s=128&d=identicon&r=PG", "display_name": "wolfemm", "link": "https://stackoverflow.com/users/2555969/wolfemm"}, "edited": false, "score": 0, "creation_date": 1425432896, "post_id": 28845038, "comment_id": 45959169, "body": "In the application that I cloned down from the Github repo, there is a file entitled &quot;application.yml.example.&quot; Is that what you&#39;re referring to?"}, {"owner": {"reputation": 873, "user_id": 2555969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e759983a8c9b7cd6269471d48fe3199?s=128&d=identicon&r=PG", "display_name": "wolfemm", "link": "https://stackoverflow.com/users/2555969/wolfemm"}, "edited": false, "score": 0, "creation_date": 1425435496, "post_id": 28845038, "comment_id": 45959825, "body": "does the repo have setup instructions? Normally you&#39;d rename that file or create a copy of it as <code>application.yml</code> and put your actual environment variables in that."}, {"owner": {"reputation": 11, "user_id": 4592195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1537237903212332/picture?type=large", "display_name": "viewsatwork", "link": "https://stackoverflow.com/users/4592195/viewsatwork"}, "reply_to_user": {"reputation": 873, "user_id": 2555969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e759983a8c9b7cd6269471d48fe3199?s=128&d=identicon&r=PG", "display_name": "wolfemm", "link": "https://stackoverflow.com/users/2555969/wolfemm"}, "edited": false, "score": 0, "creation_date": 1425436129, "post_id": 28845038, "comment_id": 45959981, "body": "It does, but there are no explicit instructions on setting up the <code>application.yml</code> file."}, {"owner": {"reputation": 11, "user_id": 4592195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1537237903212332/picture?type=large", "display_name": "viewsatwork", "link": "https://stackoverflow.com/users/4592195/viewsatwork"}, "reply_to_user": {"reputation": 873, "user_id": 2555969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e759983a8c9b7cd6269471d48fe3199?s=128&d=identicon&r=PG", "display_name": "wolfemm", "link": "https://stackoverflow.com/users/2555969/wolfemm"}, "edited": false, "score": 0, "creation_date": 1425436169, "post_id": 28845038, "comment_id": 45959992, "body": "In this case, would <code>aws_access_key</code> be an environment variable that I would set up here? If so, I&#39;m not sure where I would obtain the information to set this variable equal to."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4592195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1537237903212332/picture?type=large", "display_name": "viewsatwork", "link": "https://stackoverflow.com/users/4592195/viewsatwork"}, "is_accepted": false, "score": 0, "last_activity_date": 1425436941, "creation_date": 1425436941, "answer_id": 28845793, "question_id": 28845038, "link": "https://stackoverflow.com/questions/28845038/method-missing-undefined-method-aws-access-key-for-figaroenv/28845793#28845793", "title": "`method_missing&#39;: undefined method `aws_access_key&#39; for {}:Figaro::Env", "body": "<p>I seemed to have solved the issue. In my \"application.yml\" file, I went ahead and provided these variables with pseudo values in order to get the undefined methods errors to stop.</p>\n\n<p>For example:</p>\n\n<pre><code>aws_access_key: '123456789'\naws_access_secret: '123456789'\naws_bucket: '123456789'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 731, "user_id": 1137142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78afc3d3f69e007c5d548a75f865a497?s=128&d=identicon&r=PG", "display_name": "matb", "link": "https://stackoverflow.com/users/1137142/matb"}, "is_accepted": false, "score": 0, "last_activity_date": 1437452585, "creation_date": 1437452585, "answer_id": 31530340, "question_id": 28845038, "link": "https://stackoverflow.com/questions/28845038/method-missing-undefined-method-aws-access-key-for-figaroenv/31530340#31530340", "title": "`method_missing&#39;: undefined method `aws_access_key&#39; for {}:Figaro::Env", "body": "<p><strong>Until Figaro 0.7</strong>, if you tried to access keys that didn't exist via <code>Figaro.env.my_non_existant_key</code> you would get an exception. The exception is misleading, because figaro uses Ruby's metaprogramming feature and can define methods at run time (so rather than having to call <code>Figaro.env[\"my_key1\"]</code>, you can call a method <code>Figaro.env.my_key1</code>).</p>\n\n<p><strong>Starting with Figaro 1.0</strong>, if you call <code>Figaro.env.my_non_existant_key</code> you will get <code>nil</code> as return value. If you want to ensure that the exception is raised when the key doesn't exist you can use new syntax with a 'bang' <code>Figaro.env.my_non_existant_key!</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4592195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1537237903212332/picture?type=large", "display_name": "viewsatwork", "link": "https://stackoverflow.com/users/4592195/viewsatwork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1437937864, "creation_date": 1425431465, "last_edit_date": 1437937864, "question_id": 28845038, "link": "https://stackoverflow.com/questions/28845038/method-missing-undefined-method-aws-access-key-for-figaroenv", "title": "`method_missing&#39;: undefined method `aws_access_key&#39; for {}:Figaro::Env", "body": "<p>I'm currently having issues with configuring Figaro for my Rails 4 application. Whenever I try to run RSpec or rake db:migrate, I encounter the following error:</p>\n\n<p><strong><code>method_missing': undefined method</code>aws_access_key' for {}:Figaro::Env</strong></p>\n\n<p>Here is the complete error message for reference:</p>\n\n<pre><code>Louiss-MacBook-Pro:beautifulnow louismedina$ rspec\n/Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/figaro-0.7.0/lib/figaro/env.rb:9:in `method_missing': undefined method `aws_access_key' for #&lt;Figaro::Env:0x007fc1b17749d8&gt; (NoMethodError)\n    from /Users/louismedina/Desktop/MindtonicMedia/beautifulnow/config/initializers/aws.rb:1:in `&lt;top (required)&gt;'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/activesupport-4.0.13/lib/active_support/dependencies.rb:223:in `load'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/activesupport-4.0.13/lib/active_support/dependencies.rb:223:in `block in load'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/activesupport-4.0.13/lib/active_support/dependencies.rb:214:in `load_dependency'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/activesupport-4.0.13/lib/active_support/dependencies.rb:223:in `load'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/engine.rb:609:in `block (2 levels) in &lt;class:Engine&gt;'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/engine.rb:608:in `each'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/engine.rb:608:in `block in &lt;class:Engine&gt;'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/initializable.rb:30:in `instance_exec'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/initializable.rb:30:in `run'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/initializable.rb:55:in `block in run_initializers'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:226:in `block in tsort_each'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:418:in `block (2 levels) in each_strongly_connected_component_from'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:427:in `each_strongly_connected_component_from'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:417:in `block in each_strongly_connected_component_from'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/initializable.rb:44:in `each'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/initializable.rb:44:in `tsort_each_child'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:411:in `call'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:411:in `each_strongly_connected_component_from'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:347:in `block in each_strongly_connected_component'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:345:in `each'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:345:in `call'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:345:in `each_strongly_connected_component'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:224:in `tsort_each'\n    from /Users/louismedina/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/tsort.rb:205:in `tsort_each'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/initializable.rb:54:in `run_initializers'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/application.rb:215:in `initialize!'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/railties-4.0.13/lib/rails/railtie/configurable.rb:30:in `method_missing'\n    from /Users/louismedina/Desktop/MindtonicMedia/beautifulnow/config/environment.rb:5:in `&lt;top (required)&gt;'\n    from /Users/louismedina/Desktop/MindtonicMedia/beautifulnow/spec/spec_helper.rb:3:in `require'\n    from /Users/louismedina/Desktop/MindtonicMedia/beautifulnow/spec/spec_helper.rb:3:in `&lt;top (required)&gt;'\n    from /Users/louismedina/Desktop/MindtonicMedia/beautifulnow/spec/controllers/admin/admin_controller_spec.rb:1:in `require'\n    from /Users/louismedina/Desktop/MindtonicMedia/beautifulnow/spec/controllers/admin/admin_controller_spec.rb:1:in `&lt;top (required)&gt;'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/rspec-core-2.14.7/lib/rspec/core/configuration.rb:896:in `load'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/rspec-core-2.14.7/lib/rspec/core/configuration.rb:896:in `block in load_spec_files'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/rspec-core-2.14.7/lib/rspec/core/configuration.rb:896:in `each'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/rspec-core-2.14.7/lib/rspec/core/configuration.rb:896:in `load_spec_files'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/rspec-core-2.14.7/lib/rspec/core/command_line.rb:22:in `run'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/rspec-core-2.14.7/lib/rspec/core/runner.rb:80:in `run'\n    from /Users/louismedina/.rvm/gems/ruby-2.1.5@beautifulnow-rails4/gems/rspec-core-2.14.7/lib/rspec/core/runner.rb:17:in `block in autorun'\n</code></pre>\n\n<p>Does anyone have any guidance on this? Thanks.</p>\n"}, {"tags": ["ruby", "r"], "answers": [{"tags": [], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "is_accepted": true, "score": 0, "last_activity_date": 1425519334, "creation_date": 1425519334, "answer_id": 28868487, "question_id": 28844958, "link": "https://stackoverflow.com/questions/28844958/r-code-not-running-when-using-ruby/28868487#28868487", "title": "R code not running when using Ruby", "body": "<p>The solution was to typecast call as a string for Ruby like so:</p>\n\n<pre><code>puts \"#{R.pull \"toString(call)\"}\"\n</code></pre>\n"}], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 28868487, "answer_count": 1, "score": 0, "last_activity_date": 1425519334, "creation_date": 1425430907, "last_edit_date": 1425448249, "question_id": 28844958, "link": "https://stackoverflow.com/questions/28844958/r-code-not-running-when-using-ruby", "title": "R code not running when using Ruby", "body": "<p>The commented line below throws an error: unsupported data type on R's end. Can someone tell me why?</p>\n\n<pre><code>require \"rinruby\"  \nck=0\nbegin\nR.eval &lt;&lt;EOF\n  eve&lt;-read.csv(\"RExportWithTotals2015-02-18.csv\", sep=\",\", header=TRUE)\n  ck=1\n  regModel&lt;-lm(eve$npitotal~eve$extraversion+eve$agreeableness)\n  ck=2\n  ss&lt;-summary(regModel)\n  ck=3\n  call&lt;-ss$call\nEOF\n\nck=4\nputs \"#{R.call}\"#-------------------ERROR HERE\"\nrescue Exception=&gt; ex\nputs \"#{ex.message}\\nerror line: #{ck}\"\nend\n</code></pre>\n\n<p>using Ruby version 2.0.0, latest RinRuby gem (gem install rinruby)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "carrierwave", "fog"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "is_accepted": true, "score": 0, "last_activity_date": 1425510195, "creation_date": 1425510195, "answer_id": 28866813, "question_id": 28844957, "link": "https://stackoverflow.com/questions/28844957/carrierwave-fog-caching/28866813#28866813", "title": "Carrierwave + Fog+ caching", "body": "<p>Turns out I did not run the desired code block within the change block inside the migration so the code was never being executed. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 28866813, "answer_count": 1, "score": 0, "last_activity_date": 1425510195, "creation_date": 1425430903, "question_id": 28844957, "link": "https://stackoverflow.com/questions/28844957/carrierwave-fog-caching", "title": "Carrierwave + Fog+ caching", "body": "<p>Scenario: We have a few users on the site who have previously uploaded a logo for their site. Recently, we changed the dimensions of this logo and would like all accounts to reflect this change (we've also removed retina_rails from our app). So we plan on making a migration to remove retina rails while at the same time looping through each account and re uploading the logos to normalize across all logos. </p>\n\n<p>Currently, this is what the migration looks like:</p>\n\n<pre><code>class RemoveRetinaDimensionsFromAccounts &lt; ActiveRecord::Migration\n  def change\n    remove_column :accounts, :retina_dimensions, :text\n  end\n\n  ActsAsTenant.configure.require_tenant = false\n  Account.all.each do |account|\n    if account.logo?\n        account.logo.cache_stored_file!\n        account.logo.retrieve_from_cache!(account.logo.cache_name)\n            account.logo.recreate_versions!(:small, :small)\n            account.save!\n        end\n  end\n  ActsAsTenant.configure.require_tenant = true\nend\n</code></pre>\n\n<p>This is what our carrierwave.rb file looks like:</p>\n\n<pre><code>CarrierWave.configure do |config|\n  if Rails.env.test?\n    config.storage = :file\n    config.enable_processing = false\n\n  elsif Rails.env.development?\n    config.storage = :file\n    config.cache_dir = \"#{Rails.root}/tmp/uploads\"\n\n  elsif Rails.env.staging?\n    config.storage = :fog\n    config.cache_dir = \"#{Rails.root}/tmp/uploads\"\n    config.fog_credentials = {\n      :provider               =&gt; 'AWS',                                           # required\n      :aws_access_key_id      =&gt; Rails.application.secrets.aws_access_key_id,     # required\n      :aws_secret_access_key  =&gt; Rails.application.secrets.aws_secret_access_key, # required\n      :region                 =&gt; 'us-west-2'                                      # optional, defaults to 'us-east-1'\n    }\n    config.fog_directory  = 'blvd-staging'                                        # required\n    config.fog_public     = false \n end\nend\n</code></pre>\n\n<p>I've tried to follow the advice mentioned in this link <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to%3A-Recreate-and-reprocess-your-files-stored-on-fog\" rel=\"nofollow\">https://github.com/carrierwaveuploader/carrierwave/wiki/How-to%3A-Recreate-and-reprocess-your-files-stored-on-fog</a> but it is not working. I've tested to make sure the cache is saving files, and it is. However, when I try and retrieve_from_cache! I'm unable to do so (as the cached file does not have a name). </p>\n\n<p>This is what my cached files look like: </p>\n\n<p>tmp\n uploads\n  ##########-#####-####</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "string", "hash"], "comments": [{"owner": {"reputation": 1057, "user_id": 1472317, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PiUIS.jpg?s=128&g=1", "display_name": "Guilherme Carlos", "link": "https://stackoverflow.com/users/1472317/guilherme-carlos"}, "edited": false, "score": 0, "creation_date": 1425430316, "post_id": 28844526, "comment_id": 45958525, "body": "What is ptArray ? Did you define it previously on the code?"}, {"owner": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "reply_to_user": {"reputation": 1057, "user_id": 1472317, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PiUIS.jpg?s=128&g=1", "display_name": "Guilherme Carlos", "link": "https://stackoverflow.com/users/1472317/guilherme-carlos"}, "edited": false, "score": 0, "creation_date": 1425433738, "post_id": 28844526, "comment_id": 45959398, "body": "ptArray, is the array with strings in it. I did define it, this is just the snippet of code I&#39;m having issues with"}], "answers": [{"tags": [], "owner": {"reputation": 21642, "user_id": 108105, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/05463d616d56d33fd6a61df100fbbb94?s=128&d=identicon&r=PG", "display_name": "Tom Dalling", "link": "https://stackoverflow.com/users/108105/tom-dalling"}, "is_accepted": true, "score": 1, "last_activity_date": 1425435814, "last_edit_date": 1425435814, "creation_date": 1425435234, "answer_id": 28845583, "question_id": 28844526, "link": "https://stackoverflow.com/questions/28844526/appending-multiple-values-to-one-key-in-an-empty-hash/28845583#28845583", "title": "Appending multiple values to one key in an empty hash", "body": "<p>With <code>File</code> objects, you can't read them twice. That is, if you read the entire file once with <code>each_line</code>, then you try to do it again, the second time won't do anything because it was already at the end of the file. To read the file again, you need to rewind it with <code>file.rewind</code> before you try to read from it.</p>\n\n<p>The second problem is that you're trying to add to an array that doesn't exist. For example:</p>\n\n<pre><code>scores = {}\nscores[3] #=&gt; nil\nscores[3] &lt;&lt; 'ASDASDASD' # crashes (can't use &lt;&lt; with nil)\n</code></pre>\n\n<p>You need to create an array for each score before you can add words to it. One way to do this would be to check if the key exists before using it, like this:</p>\n\n<pre><code>scores = {}\nif scores[3].nil?\n  scores[3] = []\nend\nscores[3] &lt;&lt; 'word' # this will work\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1057, "user_id": 1472317, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PiUIS.jpg?s=128&g=1", "display_name": "Guilherme Carlos", "link": "https://stackoverflow.com/users/1472317/guilherme-carlos"}, "is_accepted": false, "score": 0, "last_activity_date": 1425436766, "creation_date": 1425436766, "answer_id": 28845773, "question_id": 28844526, "link": "https://stackoverflow.com/questions/28844526/appending-multiple-values-to-one-key-in-an-empty-hash/28845773#28845773", "title": "Appending multiple values to one key in an empty hash", "body": "<p>Straight to the code:</p>\n\n<pre><code>scores = Hash.new\n\nFile.open(\"#{File.dirname(__FILE__)}/dictionary.txt\",\"r\") do |file|\n  strings.each do |string|\n    score = 0\n    file.each do |line|\n      score += 1 if string.match(line.strip!.upcase)\n    end\n    # store score and new array unless it already have same score\n    scores.store(score, []) unless scores.has_key?(score)\n    scores[score] &lt;&lt; string\n    # rewind to read dictionary from first line on next iteration\n    file.rewind\n  end\nend\n</code></pre>\n\n<p><code>strings</code> is your array of strings to compare with dict:</p>\n\n<p>e.g. <code>strings = [\"XXBUTTYYOUATCATYSSX\", \"YOUKKYUHISJFXPOP\"]</code>)</p>\n"}], "owner": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 28845583, "answer_count": 2, "score": 0, "last_activity_date": 1425436766, "creation_date": 1425428248, "last_edit_date": 1425434390, "question_id": 28844526, "link": "https://stackoverflow.com/questions/28844526/appending-multiple-values-to-one-key-in-an-empty-hash", "title": "Appending multiple values to one key in an empty hash", "body": "<p>I'm trying to find the string in an array that has the most matches to dictionary words in a file. I store the score (matches) as the key of a hash and the corresponding matching strings as the value to the key. For example:</p>\n\n<ul>\n<li><p>The string <code>\"XXBUTTYATCATYSSX\"</code> has three substring word matches. The score for this string would be <code>3</code>. The string and score are stored in the <code>scores</code> hash as:</p>\n\n<pre><code>scores = { 3 =&gt; \"XXBUTTYATCATYSSX\" }\n</code></pre></li>\n<li><p>The string <code>\"YOUKKYUHISJFXPOP\"</code> also has three matches. This should be stored in the hash as:</p>\n\n<pre><code>scores = { 3 =&gt; \"XXBUTTYATCATYSSX\", \"YOUKKYUHISJFXPOP\" }\n</code></pre></li>\n</ul>\n\n<p>\"</p>\n\n<pre><code>scores = { }\n#scores = Hash.new { |hash, key| hash[key] = [] }\nFile.open(\"#{File.dirname(__FILE__)}/dictionary.txt\",\"r\") do |file|\n  #going to a string in the array\n  strArray.each_index do |str|\n    score = 0\n    match = strArray[str]\n    #going to a line in the dictionary file\n    file.each_line do |line|\n      dictWord = line.strip!.upcase\n      if match.include? dictWord\n        score += 1\n      end\n    end\n    #the key in the scores hash equals the score (amount of matches)\n    #the values in the scores hash are the matched strings that have the score of the key\n    #scores[score] &lt;&lt; match\n    scores.merge!(\"#{score}\" =&gt; match)\nend\n</code></pre>\n\n<p>edit:\nI've revised the code above. Now it will not enter into <code>file.each_line do |line|</code> after the first loop</p>\n\n<p>Please help.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1425429294, "post_id": 28844484, "comment_id": 45958227, "body": "&#39;a&#39; simply appends to the file, it won&#39;t remove anything."}, {"owner": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1425430138, "post_id": 28844484, "comment_id": 45958474, "body": "so if i want to delete something out do i use &#39;r+&#39; ?"}], "answers": [{"tags": [], "owner": {"reputation": 1057, "user_id": 1472317, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PiUIS.jpg?s=128&g=1", "display_name": "Guilherme Carlos", "link": "https://stackoverflow.com/users/1472317/guilherme-carlos"}, "is_accepted": false, "score": 1, "last_activity_date": 1425431599, "last_edit_date": 1495542242, "creation_date": 1425431599, "answer_id": 28845055, "question_id": 28844484, "link": "https://stackoverflow.com/questions/28844484/delete-a-line-of-information-from-a-text-file/28845055#28845055", "title": "Delete a line of information from a text file", "body": "<p>You're making a lot of mistakes here.</p>\n\n<p>First of all opening the file with <code>a</code> (you need to use <code>r+</code> or <code>w+</code>).</p>\n\n<p>In Ruby we use a <a href=\"http://ruby-doc.org//core-2.2.0/IO.html#method-i-each_line\" rel=\"nofollow noreferrer\">more elegant</a> to iterate over files.</p>\n\n<p>Check <a href=\"https://stackoverflow.com/questions/16638667/how-do-i-remove-lines-of-data-in-the-middle-of-a-text-file-with-ruby\">this answer</a>, it will help you with your problem.</p>\n\n<p>After that a look at <a href=\"http://ruby-doc.org//core-2.2.0/IO.html\" rel=\"nofollow noreferrer\">IO library</a> to understand how it all works</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "edited": false, "score": 0, "creation_date": 1425432198, "post_id": 28845056, "comment_id": 45959024, "body": "awesome, exactly what i was looking for. Basically just reading the file and re writing it up to the item number. Thanks!"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "reply_to_user": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "edited": false, "score": 0, "creation_date": 1425491703, "post_id": 28845056, "comment_id": 45988216, "body": "NP.  Feel free to accept and/or upvote this answer if it addressed your issue."}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 1, "last_activity_date": 1425431620, "creation_date": 1425431620, "answer_id": 28845056, "question_id": 28844484, "link": "https://stackoverflow.com/questions/28844484/delete-a-line-of-information-from-a-text-file/28845056#28845056", "title": "Delete a line of information from a text file", "body": "<p>I imagine there are a bunch of better ways to do this, but here's quick and dirty:</p>\n\n<pre><code>puts \"What's the item number?\"\nitem_num = gets.chomp\n\nread_file = File.new('read.txt', \"r\").read\nwrite_file = File.new('read.txt', \"w\")\n\nread_file.each_line do |line|\n  write_file.write(line) unless line.include? item_num\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4630034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865944363453185/picture?type=large", "display_name": "Kyren Johnson", "link": "https://stackoverflow.com/users/4630034/kyren-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1642, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1425492500, "creation_date": 1425428000, "last_edit_date": 1425428400, "question_id": 28844484, "link": "https://stackoverflow.com/questions/28844484/delete-a-line-of-information-from-a-text-file", "title": "Delete a line of information from a text file", "body": "<p>I have a text file called text.txt, and it has the following text:</p>\n\n<pre><code>123,shirt,9.99 \n234,pants,19.50\n456,socks,3.99\n</code></pre>\n\n<p>How do I delete one row (e.g 123,shirt,9.99).  How would I go about deleting this row?</p>\n\n<p>My code so far:</p>\n\n<pre><code> test_file = File.new('text.txt', \"a\")\n while (line = test_file)\n   puts 'Enter the products item number you wish to delete. '\n   user_delete = gets.chomp.to_i\n   line.delete(user_delete)\n end\n</code></pre>\n"}, {"tags": ["ruby", "tomcat", "chef-infra", "jmx"], "comments": [{"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1425430707, "post_id": 28844335, "comment_id": 45958635, "body": "Is this something to do with the formatting of the lines in the 2 files: jmxremote.access and jmxremote.password.? If i place the variables right at the beginning of the left of the file, it seem to include the values of the variables."}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1425431756, "post_id": 28844335, "comment_id": 45958920, "body": "i think, i spoke too fast. Everything seem to work with the existing files when i perform a kitchen test with the same version of the cookbook"}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1425505398, "post_id": 28844335, "comment_id": 45996111, "body": "so, the /etc/chef/client.rb was missing the path to &quot;encrypted_data_bag_secret&quot;. I edited the file and did a &quot;chef-client&quot; on the node. Its still doesn&#39;t fill the files on the server with the variables whose values are in the secret"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1425573780, "post_id": 28844335, "comment_id": 46027299, "body": "How is defined you <code>credentials</code> variable ? Sounds like the culprit is here (giving nil values). You may ensure they are properly defined by adding a <code>log &quot;Jmx user  is: #{credentials[&#39;zabbix_user&#39;][&#39;username&#39;]}&quot;</code> resource or <code>Chef::Log.info &quot;Jmx user  is: #{credentials[&#39;zabbix_user&#39;][&#39;username&#39;]}&quot;</code> in your recipe"}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1425670798, "post_id": 28844335, "comment_id": 46072038, "body": "@Tensibai, - the issue got fixed very strangely. While looking into it there was a ruby syntax error for a different local variable, pointed out by a fren of mine. I corrected that pushed up the code to chef-server. The chef-client run on the node, fixed the main issue. I am not sure how it started working. I am still trying to figure out what went wrong initially.  BTW: the data_bags are loaded using the below provider    &quot;credentials = Chef::EncryptedDataBagItem.load(&quot;#{node.chef_environment}&quot;, &quot;#{node.chef_environment}&quot;)&quot; in the recipe"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1425671710, "post_id": 28844335, "comment_id": 46072541, "body": "Usually the chef logs are of some value to found problems, specially when run with <code>-l debug</code> to get more information on what&#39;s going on. Here with your description I assumed the chef run was successfull and it should not be the case with a syntax error unless the resource have <code>ignote_failure true</code> attribute. So I really can&#39;t tell why you experienced that."}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1425681151, "post_id": 28844335, "comment_id": 46076921, "body": "yes, the debug log for the chef-client didn&#39;t gave any clue on miss to dump in the variable values from the encrypted data_bags. If i had put in the values by hand on these files the chef-client run will remove them back. So, it behaved like there was noticed declared for those variables. Anyways - i am still searching in the dark for a clue. But this looks to be one of issue for me not for chef at large."}], "owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425430618, "creation_date": 1425426987, "last_edit_date": 1425430618, "question_id": 28844335, "link": "https://stackoverflow.com/questions/28844335/chef-not-calling-the-attributes-defined-in-a-template", "title": "Chef not calling the attributes defined in a template", "body": "<p>can anyone suggest on what is going wrong here. </p>\n\n<p>I am using 2 templates for JMX: jmxremote.access and jmxremote.password. The user in the <code>jmxremote.access</code> and the username &amp; password are set as attributes available in the data_bag, </p>\n\n<p>The files looks like this (just showing where the variables are declared):</p>\n\n<p>jmxremote.access:</p>\n\n<pre><code># o The \"monitorRole\" role has readonly access.\n# o The \"controlRole\" role has readwrite access and can create the standard\n#   Timer and Monitor MBeans defined by the JMX API.\n\n      &lt;%= @jmx_user %&gt;   readonly\n\n#controlRole   readwrite \\\n#create javax.management.monitor.*,javax.management.timer.* \\\n#unregister\n</code></pre>\n\n<p>jmxremote.password:</p>\n\n<pre><code>#\n# Following are two commented-out entries.  The \"measureRole\" role has\n# password \"QED\".  The \"controlRole\" role has password \"R&amp;D\".\n#\n# monitorRole  QED\n# controlRole   R&amp;D\n\n  &lt;%= @jmx_user %&gt;   &lt;%= @jmx_pass %&gt;\n</code></pre>\n\n<p>In the recipe, they are called as below:</p>\n\n<pre><code>template '/opt/mount1/java/jre/lib/management/jmxremote.access' do\n  source 'jmxremote.access.erb'\n  mode 00600\n  owner 'tomcat'\n  group 'tomcat'\n  variables(\n    :jmx_user =&gt; credentials['zabbix_user']['username']\n  )\n  notifies :restart, \"service[tomcat]\", :delayed\nend\n\ntemplate '/opt/mount1/java/jre/lib/management/jmxremote.password' do\n  source 'jmxremote.password.erb'\n  mode 00600\n  owner 'tomcat'\n  group 'tomcat'\n  variables(\n    :jmx_user =&gt; credentials['zabbix_user']['username'],\n    :jmx_pass =&gt; credentials['zabbix_user']['password']\n  )\n  notifies :restart, \"service[tomcat]\", :delayed\nend\n</code></pre>\n\n<p>the values are available in the data_bags, i have confirmed that. The strange thing is, Chef run completes. But it leaves the variables unwritten in the files. </p>\n\n<p>Note: if i manually put in the values in the 2 files, tomcat starts okay until the next chef-client run. The scheduled chef-client run - wipes the manual entries as well. </p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["ruby", "closures", "anonymous-class"], "answers": [{"comments": [{"owner": {"reputation": 2966, "user_id": 1365599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/65ebc566c6fd77d3437a66a95957071e?s=128&d=identicon&r=PG", "display_name": "Martin Majer", "link": "https://stackoverflow.com/users/1365599/martin-majer"}, "edited": false, "score": 0, "creation_date": 1425425015, "post_id": 28843908, "comment_id": 45956837, "body": "Is it possible without the constructor, somehow? Actually, in real-world application I need to use this with <code>Class.new(Fiddle::Closure)</code> (to create callbacks for C DLL library, see <a href=\"http://stackoverflow.com/questions/28819592/ruby-passing-a-method-to-a-dll-library-as-a-callback?noredirect=1#comment45911791_28819592\" title=\"ruby passing a method to a dll library as a callback\">stackoverflow.com/questions/28819592/&hellip;</a>) and overriding the constructor wouldn&#39;t be much comfortable in this case."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 2966, "user_id": 1365599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/65ebc566c6fd77d3437a66a95957071e?s=128&d=identicon&r=PG", "display_name": "Martin Majer", "link": "https://stackoverflow.com/users/1365599/martin-majer"}, "edited": false, "score": 0, "creation_date": 1425425238, "post_id": 28843908, "comment_id": 45956941, "body": "Why not? You can override the constructor calling <code>super</code> to respect what it did before: <code>def initialize(a); @a = a; super; end</code>"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1425428157, "post_id": 28843908, "comment_id": 45957874, "body": "If you don&#39;t actually want an instance method, you can make it a class method, basically just a &#39;function&#39;, that you can call from anywhere without  instantiating an object first. But instance methods belong to objects, you always need to instantiate an object of the class, and have a reference to it, to call an instance method on that particular instance. That&#39;s how instance methods work."}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 1, "last_activity_date": 1425425827, "last_edit_date": 1425425827, "creation_date": 1425424775, "answer_id": 28843908, "question_id": 28843803, "link": "https://stackoverflow.com/questions/28843803/ruby-accessing-instance-methods-variables-from-anonymous-class/28843908#28843908", "title": "Ruby - accessing instance methods / variables from anonymous class", "body": "<p>Since <code>.bar</code> is an instance method of <code>Baz</code>, you need to have an instance of <code>Baz</code> available in your context to call <code>.bar</code>. You can do that by passing the instance object to the class on initialization, so you can call its <code>.bar</code> method on it. </p>\n\n<p>This works:</p>\n\n<pre><code>class Baz\n  def foo\n    qux = Class.new do\n      def initialize(a)  \n        @a = a  \n      end  \n\n      def call\n        @a.bar\n      end\n    end.new(self)\n\n    qux.call\n  end\n\n  def bar\n    puts \"bar\"\n  end\nend\n\nb = Baz.new\nb.foo\n=&gt; 'bar'\n</code></pre>\n\n<p>If you need to pass a <code>class</code> to <code>Class.new()</code> as you mention in the comments, you can override the initializer method like this (please note that you may have to consider the arguments that your Closure class initialize needs for <code>super</code>: </p>\n\n<pre><code>qux = Class.new(Fiddle::Closure) do\n  def initialize(baz)  \n    @baz = baz\n    super\n  end  \n\n  def call\n    @baz.bar\n  end\nend.new(self)\n</code></pre>\n\n<p>On a side note, you don't need all those <code>()</code>, it's <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow\">Ruby style</a> to omit them if not needed.</p>\n"}], "owner": {"reputation": 2966, "user_id": 1365599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/65ebc566c6fd77d3437a66a95957071e?s=128&d=identicon&r=PG", "display_name": "Martin Majer", "link": "https://stackoverflow.com/users/1365599/martin-majer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 28843908, "answer_count": 1, "score": 1, "last_activity_date": 1425425827, "creation_date": 1425424260, "question_id": 28843803, "link": "https://stackoverflow.com/questions/28843803/ruby-accessing-instance-methods-variables-from-anonymous-class", "title": "Ruby - accessing instance methods / variables from anonymous class", "body": "<p>I have following Ruby code:</p>\n\n<pre><code>class Baz\n    def foo()\n        qux = Class.new() {\n            def call()\n                bar()\n            end\n        }.new()\n        qux.call()\n    end\n    def bar()\n        puts \"bar\"\n    end\nend\n\nb = Baz.new()\nb.foo()\n</code></pre>\n\n<p>How can I access method <code>bar</code> from the anonymous class, that means from <code>qux.call</code>? Is it possible?</p>\n\n<p>I'm keeping getting this message:</p>\n\n<pre><code>classes-test.rb:5:in `call': undefined method `bar' for #&lt;#&lt;Class:0x00000002d9c248&gt;:0x00000002d9c1a8&gt; (NoMethodError)\n</code></pre>\n\n<p>I'm new to Ruby, so any advice or even deeper explanation of the problem will be appreciated. Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 6404, "user_id": 3363019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/129352fb15374b8febd37cc99150c7c5?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/3363019/patrick"}, "reply_to_user": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "edited": false, "score": 1, "creation_date": 1425424398, "post_id": 28843670, "comment_id": 45956580, "body": "I would suggest trying to ensure that you&#39;re actually connecting to YouTube and that you&#39;re not getting any error responses from the API. Also you should consider moving your developer key to an environment variable for security and also obfuscating it in your questio"}], "tags": [], "owner": {"reputation": 6404, "user_id": 3363019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/129352fb15374b8febd37cc99150c7c5?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/3363019/patrick"}, "is_accepted": true, "score": 0, "last_activity_date": 1425423628, "creation_date": 1425423628, "answer_id": 28843670, "question_id": 28843571, "link": "https://stackoverflow.com/questions/28843571/cant-get-output-for-youtube-videos-using-the-youtube-it-gem-in-rails/28843670#28843670", "title": "Can&#39;t get output for Youtube videos using the youtube_it gem in rails", "body": "<p>Try:\n<code>@client.videos_by(:query =&gt; \"penguin\")</code> in the controller </p>\n\n<p>And then in the view:</p>\n\n<pre><code>&lt;%= client.each do |v| %&gt;\n  &lt;%= v.title %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 28843670, "answer_count": 1, "score": 0, "last_activity_date": 1425541773, "creation_date": 1425423146, "last_edit_date": 1425541773, "question_id": 28843571, "link": "https://stackoverflow.com/questions/28843571/cant-get-output-for-youtube-videos-using-the-youtube-it-gem-in-rails", "title": "Can&#39;t get output for Youtube videos using the youtube_it gem in rails", "body": "<p>Been messing around with the Youtube_IT gem for the last couple of hours and I can't seem to get any videos to be displayed. </p>\n\n<p>I have a videos controller with the following \nclass VideosController &lt; ApplicationController</p>\n\n<pre><code>require 'youtube_it'\n\n  before_action :set_video, only: [:show, :edit, :update, :destroy]\n\n  def index\n     @client = YouTubeIt::Client.new(:dev_key =&gt; \"DEV-KEY-HERE\")\n    @videos = Video.all\n  end\n</code></pre>\n\n<p>For the index view, I've experimented with a lot of different methods. </p>\n\n<pre><code>&lt;% @videos.each do |video| %&gt;\n  &lt;%= client.videos_by(:query =&gt; \"penguin\") do |v| %&gt;\n    &lt;%= v.title %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Nothing shows up. What am i doing wrong? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "gem"], "answers": [{"tags": [], "owner": {"reputation": 613, "user_id": 2738251, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/44548b518eb3308fc50c09d78a29a2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/2738251/alessandro"}, "is_accepted": false, "score": 0, "last_activity_date": 1425418806, "creation_date": 1425418806, "answer_id": 28842446, "question_id": 28842359, "link": "https://stackoverflow.com/questions/28842359/uninstalling-gems-massively/28842446#28842446", "title": "Uninstalling gems massively", "body": "<pre><code>gem uninstall --all\n</code></pre>\n\n<p>Uninstalls every gem in your gem list.</p>\n"}], "owner": {"reputation": 613, "user_id": 2738251, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/44548b518eb3308fc50c09d78a29a2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/2738251/alessandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425418806, "creation_date": 1425418493, "question_id": 28842359, "link": "https://stackoverflow.com/questions/28842359/uninstalling-gems-massively", "title": "Uninstalling gems massively", "body": "<p>I'm using ruby 2.2 and I would like to know is there is a way to uninstall all gems in my gemlist in one command. Something like <code>gem uninstall *</code> or <code>gem uninstall -A</code> ?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 11411, "user_id": 406249, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7055935d2e651d2e2907133f34675a16?s=128&d=identicon&r=PG", "display_name": "Nick McCurdy", "link": "https://stackoverflow.com/users/406249/nick-mccurdy"}, "edited": false, "score": 0, "creation_date": 1425438082, "post_id": 28842299, "comment_id": 45960493, "body": "Why are you implementing this yourself?"}], "answers": [{"comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1425419934, "post_id": 28842558, "comment_id": 45954593, "body": "This doesn&#39;t handle the closing tags correctly. i.e. it&#39;s putting <code>&lt;strong&gt;</code> on both sides of the text to be bolded."}], "tags": [], "owner": {"reputation": 4544, "user_id": 1252056, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fruvR.png?s=128&g=1", "display_name": "streetturtle", "link": "https://stackoverflow.com/users/1252056/streetturtle"}, "is_accepted": false, "score": 0, "last_activity_date": 1425420854, "last_edit_date": 1425420854, "creation_date": 1425419203, "answer_id": 28842558, "question_id": 28842299, "link": "https://stackoverflow.com/questions/28842299/parse-and-substitute-markup-in-ruby/28842558#28842558", "title": "Parse and substitute markup in Ruby", "body": "<p>If I understood you correctly it should be quite simple:</p>\n\n<pre><code>text = \"My name is **NAME**\"\n=&gt; \"My name is **NAME**\"\ntext = text.gsub(([a-zA-Z\\s]*)(\\*\\*)([a-zA-Z\\s]*)(\\*\\*)/,\"\\\\1&lt;strong&gt;\\\\3&lt;/strong&gt;\")\n=&gt; \"My name is &lt;strong&gt;NAME&lt;/strong&gt;\"\n</code></pre>\n\n<p>I've tested it in <code>irb</code> with this command <code>text.gsub(([a-zA-Z\\s]*)(\\*\\*)([a-zA-Z\\s]*)(\\*\\*)/,\"\\\\1&lt;strong&gt;\\\\3&lt;/strong&gt;\")</code></p>\n\n<p><strong>UPDATED</strong></p>\n"}, {"tags": [], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "is_accepted": false, "score": 0, "last_activity_date": 1425436707, "last_edit_date": 1425436707, "creation_date": 1425436209, "answer_id": 28845698, "question_id": 28842299, "link": "https://stackoverflow.com/questions/28842299/parse-and-substitute-markup-in-ruby/28845698#28845698", "title": "Parse and substitute markup in Ruby", "body": "<p>Consider this, if you wish to handle some more cases:</p>\n\n<pre><code>class SurroundMarkup\n  def initialize(markup_map: {})\n    @markup_map = markup_map\n  end\n\n  def format(text)\n    text.tap do |formatted_text|\n      @markup_map.each do |markup, tag|\n        formatted_text.gsub!(/#{markup}(?&lt;text&gt;.*?)#{markup}/) do |m|\n          start_tag(tag) + $~[:text] + stop_tag(tag)\n        end\n      end\n    end\n  end\n\n  private\n\n  def start_tag(tag)\n    \"&lt;#{tag}&gt;\"\n  end\n\n  def stop_tag(tag)\n    \"&lt;/#{tag}&gt;\"\n  end\nend\n</code></pre>\n\n<p>And you can use as follows:</p>\n\n<pre><code>markup_map = {\n  /\\*\\*/ =&gt; \"strong\",\n  /\\*/ =&gt; \"i\",\n}\n\ns = SurroundMarkup.new(markup_map: markup_map)\ns.format(\"My name is **NAME**\") #=&gt; \"My name is &lt;strong&gt;NAME&lt;/strong&gt;\"\ns.format(\"*Ruby* is cool\") #=&gt; \"&lt;i&gt;Ruby&lt;/i&gt; is cool\"\n</code></pre>\n"}], "owner": {"reputation": 865, "user_id": 959035, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e47f583b3dae1356f89db77525053a28?s=128&d=identicon&r=PG&f=1", "display_name": "yatish mehta", "link": "https://stackoverflow.com/users/959035/yatish-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425437857, "creation_date": 1425418291, "last_edit_date": 1425437857, "question_id": 28842299, "link": "https://stackoverflow.com/questions/28842299/parse-and-substitute-markup-in-ruby", "title": "Parse and substitute markup in Ruby", "body": "<p>I want to parse a simple string like: </p>\n\n<pre><code>\"My name is **NAME**\" to \"My name is &lt;strong&gt;NAME&lt;/strong\\&gt;\"\n</code></pre>\n\n<p><strong>Note</strong>:</p>\n\n<ul>\n<li>Cannot use any external gems, even though markdown gem might have done the job.</li>\n</ul>\n"}, {"tags": ["ruby", "performance", "optimization", "runtime"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425419363, "post_id": 28842139, "comment_id": 45954234, "body": "See <a href=\"http://stackoverflow.com/questions/22586246/algorithm-that-finds-first-triangle-number-with-500-factors-is-running-to-slow\">this question</a>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425419605, "post_id": 28842418, "comment_id": 45954385, "body": "This should be a comment."}], "tags": [], "owner": {"reputation": 4171, "user_id": 3258698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f432d577e5550e36ec267b85884364?s=128&d=identicon&r=PG", "display_name": "hbejgel", "link": "https://stackoverflow.com/users/3258698/hbejgel"}, "is_accepted": true, "score": 1, "last_activity_date": 1425418701, "last_edit_date": 1495542037, "creation_date": 1425418701, "answer_id": 28842418, "question_id": 28842139, "link": "https://stackoverflow.com/questions/28842139/ruby-project-euler-12-efficiency/28842418#28842418", "title": "Ruby project Euler #12 efficiency", "body": "<p>Look at this answer:\n<a href=\"https://stackoverflow.com/questions/3398159/all-factors-of-a-given-number\">All factors of a given number</a></p>\n\n<p>Then you just count the number of elements in the array until you find one with more than 500 divisors.</p>\n"}], "owner": {"reputation": 71, "user_id": 2673476, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/121508337/picture?type=large", "display_name": "Nick Dubus", "link": "https://stackoverflow.com/users/2673476/nick-dubus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 28842418, "answer_count": 1, "score": 0, "last_activity_date": 1425418701, "creation_date": 1425417728, "last_edit_date": 1425418204, "question_id": 28842139, "link": "https://stackoverflow.com/questions/28842139/ruby-project-euler-12-efficiency", "title": "Ruby project Euler #12 efficiency", "body": "<p>I'm attempting to do problem #12 on project euler (see quote below)</p>\n\n<blockquote>\n  <blockquote>\n    <p>The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7\n    = 28. The first ten terms would be:</p>\n  </blockquote>\n  \n  <p>1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...</p>\n  \n  <p>Let us list the factors of the first seven triangle numbers:</p>\n  \n  <p>1: 1  3: 1,3  6: 1,2,3,6 10: 1,2,5,10 15: 1,3,5,15 21: 1,3,7,21 28:\n  1,2,4,7,14,28 We can see that 28 is the first triangle number to have\n  over five divisors.\n  What is the value of the first triangle number to have over five hundred divisors?</p>\n</blockquote>\n\n<p>I have written out what I \"think\" is a valid solution in Ruby, however the runtime is incredibly slow. See code below: </p>\n\n<pre><code>    def num_divisors_of(num)\n  sum = 0\n  for i in 1..num/2 do\n    if num % i == 0 then sum += 1 end\n  end\n  return sum += 1\nend\n\ncurrentSum = 0\n\nfor i in 1..10000 do\n  currentSum += i\n   if num_divisors_of(currentSum) &gt; 500\n     puts currentSum\n   break\n   end\nend\n</code></pre>\n\n<p>Basically, I start at 1, add it to a running total, and check the number of divisors of that total. If the number is over 500, I stop and return the number. </p>\n\n<p>I'm wondering if there's another way to look at this that I haven't thought of yet? I've thought of finding prime factors (I'm pretty sure my method to find the number of divisors of a number is what's bogging me down), but otherwise I really have no clue where to make it more efficient. </p>\n\n<p>Any thoughts/ideas? </p>\n\n<p>EDIT: Okay, I found a way to save some runtime. When searching for divisors, I look up until the square root of the number, and add 2 every time I find a divisor (ex: lets say for divisors of 625, I find 5. 5 * 125 = 625, so those are 2 divisors). Next, if the square root IS an exact divisor, then remove 1 (as I'll have counted it twice. For example, 25 * 25 = 625, but thats just 1 divisor). </p>\n\n<p>Really sped up my runtime, and I got the answer. Woohoo!</p>\n"}, {"tags": ["ruby", "ab-testing"], "owner": {"reputation": 113292, "user_id": 4376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b9c927e051202fc198e70659d9827d2f?s=128&d=identicon&r=PG", "display_name": "Nathan Long", "link": "https://stackoverflow.com/users/4376/nathan-long"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425416482, "creation_date": 1425416482, "question_id": 28841801, "link": "https://stackoverflow.com/questions/28841801/how-can-i-tell-which-split-im-in-after-the-fact", "title": "How can I tell which split I&#39;m in after the fact?", "body": "<p>Using the Ruby Split gem, is it possible to tell which split session the user has been put into? I need to check this in two different Rails controller actions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 1, "creation_date": 1425417235, "post_id": 28841800, "comment_id": 45953108, "body": "It&#39;s difficult to help you if you don&#39;t provide more context."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1425427042, "post_id": 28841800, "comment_id": 45957549, "body": "You&#39;re not giving enough detail to determine what the problem is."}], "answers": [{"tags": [], "owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1425419805, "creation_date": 1425419805, "answer_id": 28842719, "question_id": 28841800, "link": "https://stackoverflow.com/questions/28841800/sidekiq-process-failing/28842719#28842719", "title": "Sidekiq process failing", "body": "<p>This is <a href=\"https://github.com/mperham/sidekiq/issues/1871\" rel=\"nofollow\">known problem</a>. Hard loaded Sidekiq worker is disappear sometimes from busy list but still working fine.</p>\n\n<p>I known issue marked as fixed but seems like it appear again and again. Just don't worry about it and use <code>ps aux | grep sidekiq</code> to check running Sidekiq workers in this case.</p>\n"}], "owner": {"reputation": 177, "user_id": 2579081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/OOLWQ.jpg?s=128&g=1", "display_name": "maksfromspb", "link": "https://stackoverflow.com/users/2579081/maksfromspb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 28842719, "answer_count": 1, "score": 0, "last_activity_date": 1425419805, "creation_date": 1425416475, "question_id": 28841800, "link": "https://stackoverflow.com/questions/28841800/sidekiq-process-failing", "title": "Sidekiq process failing", "body": "<p>I have a rails 4.1 application with Sidekiq 3.3.2 in production mode with default config. </p>\n\n<p>Everything works fine, but sometimes, I see in Sidekiq admin panel that Sidekiq process, not listed in the \"busy\" in the panel and does not exist in the list of processes.\nThat seems like a sidekiq's process has been fail.\nIn the log there is no error entries.</p>\n\n<p>How can I make that stable?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1425415373, "post_id": 28841393, "comment_id": 45952139, "body": "<code>string.downcase</code> returns a new string (which you ignore in your code) and should be <code>string.downcase!</code> if you want to change the original instead. That may explain some of your problems, especially if you start with &quot;ALL CAPS&quot; style string. It may be worth giving some examples of your failing inputs and the resulting output to demonstrate the fault in the question."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1425416527, "post_id": 28841393, "comment_id": 45952743, "body": "I would also recommend <code>Array#include?</code> eg. <code>do_not_capitalize = [&#39;and&#39;,&#39;of&#39;,&#39;a&#39;, the]; final &lt;&lt; do_not_capitalize.include?(s) ? s : s.capitalize</code> needs handling for &quot;the&quot; but you get the idea. It will eliminate the <code>if..elsif</code> and make it more flexible in the future."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1425416953, "post_id": 28841393, "comment_id": 45952971, "body": "And your <code>fix</code> method overrides the <code>fix</code> method created by <code>attr_accessor :fix</code>. Do you need <code>attr_accessor</code> at all here?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1425417365, "post_id": 28841393, "comment_id": 45953182, "body": "Are you sure you want to exclude those words?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1425423339, "post_id": 28841393, "comment_id": 45956106, "body": "See <a href=\"http://stackoverflow.com/questions/28400983/unable-to-keep-array-element-downcase-that-is-found-in-include\">this question and answers</a>."}], "answers": [{"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1425466131, "post_id": 28843900, "comment_id": 45971597, "body": "This will actually <i>remove</i> the excepted words in the output of <code>fix</code>, I think OP would like to still have them, but not captialized. You could achieve that by having your test inside the <code>map</code>"}], "tags": [], "owner": {"reputation": 176, "user_id": 748769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b841cf42dcaa7ff719bfa1a7a9865232?s=128&d=identicon&r=PG", "display_name": "Ivan Lu\u010dev", "link": "https://stackoverflow.com/users/748769/ivan-lu%c4%8dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1425424728, "creation_date": 1425424728, "answer_id": 28843900, "question_id": 28841393, "link": "https://stackoverflow.com/questions/28841393/how-to-capitalize-elements-in-array-with-exceptions-ruby/28843900#28843900", "title": "how to capitalize elements in array, with exceptions [ruby]", "body": "<p>You are looking something like this</p>\n\n<pre><code>class Title\n  attr_accessor :string\n  def initialize(string)\n    @string = string\n  end\n\n  def fix\n    filtered_string = string.split.select{ |a| ![\"and\", \"of\", \"the\", \"a\"].include? a }\n    title = filtered_string.map{ |a| a.capitalize }.join(\" \")\n  end\nend\n</code></pre>\n\n<p>First you filter out excluded words and then join capitalized words to title.\nYou don't need <code>attr_accessor :fix</code> because fix is defined as public method.</p>\n"}, {"tags": [], "owner": {"reputation": 971, "user_id": 2597718, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/451afe490759d58b0f61b2dd5b47ff8a?s=128&d=identicon&r=PG", "display_name": "Shouichi", "link": "https://stackoverflow.com/users/2597718/shouichi"}, "is_accepted": false, "score": 0, "last_activity_date": 1425465579, "creation_date": 1425465579, "answer_id": 28852324, "question_id": 28841393, "link": "https://stackoverflow.com/questions/28841393/how-to-capitalize-elements-in-array-with-exceptions-ruby/28852324#28852324", "title": "how to capitalize elements in array, with exceptions [ruby]", "body": "<p>Something like this?</p>\n\n<pre><code>class Titlizer\n  BLACK_LIST = %w(and of the a)\n\n  def initialize(sentence)\n    @sentence = sentence\n  end\n\n  def title\n    capitalized.join(\" \").capitalize\n  end\n\n  private\n\n  def capitalized\n    words.map do |word|\n      if should_capitalize?(word)\n        word.capitalize\n      else\n        word\n      end\n    end\n  end\n\n  def words\n    @sentence.split\n  end\n\n  def should_capitalize?(word)\n    !BLACK_LIST.include?(word)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4629462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bcbd4553850a90cb7fd5e7a58bba2137?s=128&d=identicon&r=PG&f=1", "display_name": "GoDucks713", "link": "https://stackoverflow.com/users/4629462/goducks713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425465579, "creation_date": 1425414875, "question_id": 28841393, "link": "https://stackoverflow.com/questions/28841393/how-to-capitalize-elements-in-array-with-exceptions-ruby", "title": "how to capitalize elements in array, with exceptions [ruby]", "body": "<p>I'm new to programming, and self-teaching I'm trying to write a program that takes a string and capitalizes every word in the string. But, to exclude certain words such as \"and, of, the, a\". The purpose is to fix a broken string and return a title like string.</p>\n\n<p>Here's what I have so far.</p>\n\n<pre><code>class Title\n  attr_accessor :string, :fix\n  def initialize(string)\n    @string = string\n  end\n\n  def fix\n    str = []\n    final = []\n    string.downcase\n    string[0].capitalize\n    str = string.split\n    str.each_with_index do |s, x|\n      if s == \"and\"\n        final &lt;&lt; s\n      elsif s == \"of\"\n        final &lt;&lt; s\n      elsif s == \"a\"\n        final &lt;&lt; s\n      elsif s == \"the\" &amp;&amp; x != 0\n        final &lt;&lt; s\n      else\n        final &lt;&lt; s.capitalize\n      end\n    end\n    string = final.join(' ')\n    return string\n  end\nend\n</code></pre>\n\n<p>I'm getting the error that I'm capitalizing every single word, and the program is ignoring the exceptions that I want.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 626, "user_id": 358741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns2fj.jpg?s=128&g=1", "display_name": "Shawn Bush", "link": "https://stackoverflow.com/users/358741/shawn-bush"}, "is_accepted": true, "score": 5, "last_activity_date": 1425415141, "creation_date": 1425415141, "answer_id": 28841453, "question_id": 28841359, "link": "https://stackoverflow.com/questions/28841359/insert-new-line-in-txt-file-when-found-a-semicolon/28841453#28841453", "title": "Insert new line in txt file when found a semicolon", "body": "<p><code>readlines</code> takes an optional separator argument. Use a semicolon as your separator:</p>\n\n<pre><code>File.open(\"emails.txt\").readlines(';').each do |line|\n  puts line\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "is_accepted": false, "score": 0, "last_activity_date": 1425422567, "creation_date": 1425422567, "answer_id": 28843461, "question_id": 28841359, "link": "https://stackoverflow.com/questions/28841359/insert-new-line-in-txt-file-when-found-a-semicolon/28843461#28843461", "title": "Insert new line in txt file when found a semicolon", "body": "<pre><code>str=File.open(\"fn.txt\") {|f| f.read.gsub(\";\",\"\\n\")}\nFile.open(\"fn.txt\",\"w\"){|f| f.write(str) }\n</code></pre>\n\n<p>I'd write to a different file than the source file though</p>\n"}], "owner": {"reputation": 161, "user_id": 1880184, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5c3be65e53beb2138f3c170b0aa3540c?s=128&d=identicon&r=PG", "display_name": "Diego_sf93", "link": "https://stackoverflow.com/users/1880184/diego-sf93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 28841453, "answer_count": 2, "score": 0, "last_activity_date": 1425422567, "creation_date": 1425414730, "question_id": 28841359, "link": "https://stackoverflow.com/questions/28841359/insert-new-line-in-txt-file-when-found-a-semicolon", "title": "Insert new line in txt file when found a semicolon", "body": "<p>I have a txt file from a cc of a emails like this: jhon@example;phil@exampl1.com;hon@example;phil@exampl1.com;hon@example;phil@exampl1.com</p>\n\n<pre><code>File.open(\"emails.txt\").readlines.each do |line|\n puts line;\nend\n</code></pre>\n\n<p>And in my code I can read a line and output it but I don't know how to found a semicolon and make a break line so I can get a text like this:</p>\n\n<ul>\n<li>jhon@example;</li>\n<li>jhon@example;</li>\n<li>jhon@example;</li>\n</ul>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1425414401, "post_id": 28841273, "comment_id": 45951646, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1422380/how-to-i-launch-a-ruby-script-from-the-command-line-by-just-its-name\">How to I launch a ruby script from the command line by just its name?</a>"}, {"owner": {"reputation": 98, "user_id": 2946289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dore5.jpg?s=128&g=1", "display_name": "Quentin Le B&#233;villon", "link": "https://stackoverflow.com/users/2946289/quentin-le-b%c3%a9villon"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1425414564, "post_id": 28841273, "comment_id": 45951730, "body": "this is not exactly what i want."}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1425414611, "post_id": 28841273, "comment_id": 45951756, "body": "So what is it that you want then?"}, {"owner": {"reputation": 98, "user_id": 2946289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dore5.jpg?s=128&g=1", "display_name": "Quentin Le B&#233;villon", "link": "https://stackoverflow.com/users/2946289/quentin-le-b%c3%a9villon"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1425414728, "post_id": 28841273, "comment_id": 45951814, "body": "i edited for more precisions."}, {"owner": {"reputation": 356, "user_id": 2238367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a033cc07d409e5488cbd6cc949fcb0f5?s=128&d=identicon&r=PG", "display_name": "codess", "link": "https://stackoverflow.com/users/2238367/codess"}, "edited": false, "score": 1, "creation_date": 1425414978, "post_id": 28841273, "comment_id": 45951933, "body": "On windows, it seems kind of baked in that <a href=\"http://windows.microsoft.com/en-us/windows/file-names-extensions-faq\" rel=\"nofollow noreferrer\">type is identified by extension</a>."}, {"owner": {"reputation": 356, "user_id": 2238367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a033cc07d409e5488cbd6cc949fcb0f5?s=128&d=identicon&r=PG", "display_name": "codess", "link": "https://stackoverflow.com/users/2238367/codess"}, "edited": false, "score": 0, "creation_date": 1425415100, "post_id": 28841273, "comment_id": 45951984, "body": "A shell such as git-bash on windows would enable using a #! line if you don&#39;t mind using the shell to invoke your script."}, {"owner": {"reputation": 98, "user_id": 2946289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dore5.jpg?s=128&g=1", "display_name": "Quentin Le B&#233;villon", "link": "https://stackoverflow.com/users/2946289/quentin-le-b%c3%a9villon"}, "edited": false, "score": 0, "creation_date": 1425415804, "post_id": 28841273, "comment_id": 45952347, "body": "I actually want to use the shell ! I will create a bat file in the dir thank you."}], "owner": {"reputation": 98, "user_id": 2946289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dore5.jpg?s=128&g=1", "display_name": "Quentin Le B&#233;villon", "link": "https://stackoverflow.com/users/2946289/quentin-le-b%c3%a9villon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1425414646, "creation_date": 1425414298, "last_edit_date": 1425414646, "question_id": 28841273, "link": "https://stackoverflow.com/questions/28841273/ruby-script-on-windows-without-keyword", "title": "Ruby script on windows without keyword", "body": "<p>I created a little ruby script on <strong>OSX</strong> and i would like to use it on <strong>Windows</strong>.</p>\n\n<p>How can i ask windows to start my script in the ruby environment, without specifying the <code>ruby</code> keyword ?</p>\n\n<p>I did it this way on <strong>OSX</strong></p>\n\n<pre><code>#!/usr/bin/env ruby\n</code></pre>\n\n<p>But on windows i don't know.</p>\n\n<p>I would prefer to not have the <code>.rb</code> extension.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["java", "ruby", "heroku"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 1, "creation_date": 1425414083, "post_id": 28841196, "comment_id": 45951482, "body": "<i>Why</i> does the app need a reboot? That sounds like an underlying problem that needs fixing."}, {"owner": {"reputation": 1313, "user_id": 441960, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2aed17e12a9af477e77053aacb7ce75a?s=128&d=identicon&r=PG", "display_name": "Purplejacket", "link": "https://stackoverflow.com/users/441960/purplejacket"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 1, "creation_date": 1425414277, "post_id": 28841196, "comment_id": 45951586, "body": ":-)  ... yes, there is an underlying problem that should be fixed, but apparently the fix is not trivial, and by &quot;maintain&quot; I mean that I perform more of an operations role, I don&#39;t do serious work on the code.  We need to keep the app going at this stage and can&#39;t really dig in deeply."}], "owner": {"reputation": 1313, "user_id": 441960, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2aed17e12a9af477e77053aacb7ce75a?s=128&d=identicon&r=PG", "display_name": "Purplejacket", "link": "https://stackoverflow.com/users/441960/purplejacket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425414030, "creation_date": 1425414030, "last_edit_date": 1592644375, "question_id": 28841196, "link": "https://stackoverflow.com/questions/28841196/how-to-do-a-midnight-reboot-of-my-java-app-that-runs-on-heroku", "title": "How to do a midnight reboot of my Java app that runs on Heroku?", "body": "<p>I maintain a Java app that runs on Heroku and I need to reboot it every 24 hours at around midnight.  I've been doing this off my laptop and need to switch to using the Heroku scheduler.  How to do it? I asked Heroku support and got this answer:</p>\n<blockquote>\n<p>What you probably want to do is setup a script that runs via the Heroku Scheduler. The script can use our Platform API to restart your dynos. You should be able to find a Java wrapper for the API if you do some searching (we don't provide an official Java wrapper client).</p>\n<p>Note that the Heroku Scheduler doesn't guarantee execution (there are some conditions where one might get skipped due to backend maintenance or other issues), so you probably would want to design your script to track whether a restart happened in the last 24 hours and have it run more frequently than once per day so if it's missed once it'll happen on the next run.</p>\n</blockquote>\n<p>This &quot;best effort&quot; is fine for my needs.  My Java is rusty; how would I write this wrapper for the Heroku API and how would it be deployed?</p>\n<p>Here are some related articles I found:</p>\n<p><a href=\"https://stackoverflow.com/questions/8986259/restart-my-heroku-application-automatically\">Restart my heroku application automatically</a></p>\n<p><a href=\"http://engineering.korrelate.com/2013/08/21/restart-heroku-dynos-on-your-terms/\" rel=\"nofollow noreferrer\">http://engineering.korrelate.com/2013/08/21/restart-heroku-dynos-on-your-terms/</a></p>\n<p><a href=\"https://devcenter.heroku.com/articles/scheduler\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/scheduler</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1425421750, "post_id": 28841170, "comment_id": 45955439, "body": "@Altun, That is considered a functional test only for the controller StaticPagesController.  The test should be in the file:  <code>test&#47;controllers&#47;static_pages_controller_test.rb</code>.  See the RailsGuide here: <a href=\"http://guides.rubyonrails.org/testing.html#testing-templates-and-layouts\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 4591247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2683b406b4452a42b59169dbbb7a88e0?s=128&d=identicon&r=PG&f=1", "display_name": "Altun", "link": "https://stackoverflow.com/users/4591247/altun"}, "edited": false, "score": 0, "creation_date": 1425463836, "post_id": 28841170, "comment_id": 45970276, "body": "@infused, thank you very much for the clear and concise answer. Aha! <code>assert_template</code> after <code>get :home</code>. As clear and concise as can be. Thank you very much."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 0, "last_activity_date": 1425413929, "creation_date": 1425413929, "answer_id": 28841170, "question_id": 28841046, "link": "https://stackoverflow.com/questions/28841046/how-to-write-assertion-that-checks-controller-method-renders-specific-view/28841170#28841170", "title": "How to write assertion that checks Controller method renders specific view?", "body": "<p>Use <a href=\"http://api.rubyonrails.org/classes/ActionController/TemplateAssertions.html#method-i-assert_template\" rel=\"nofollow\">assert_template</a> to assert that the request was rendered with the appropriate template file or partials.</p>\n\n<pre><code>test \"home should have index\" do\n  get :home\n  assert_template 'index'\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4591247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2683b406b4452a42b59169dbbb7a88e0?s=128&d=identicon&r=PG&f=1", "display_name": "Altun", "link": "https://stackoverflow.com/users/4591247/altun"}, "edited": false, "score": 0, "creation_date": 1425463806, "post_id": 28843373, "comment_id": 45970252, "body": "7stud, your answer was fantastic. It contained more than I needed, but your extra, relevant information will certainly help me become a Test::Unit code monkey. I will recommend this post to anyone I hear asking about functional testing. Many regards."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1425425264, "last_edit_date": 1425425264, "creation_date": 1425422214, "answer_id": 28843373, "question_id": 28841046, "link": "https://stackoverflow.com/questions/28841046/how-to-write-assertion-that-checks-controller-method-renders-specific-view/28843373#28843373", "title": "How to write assertion that checks Controller method renders specific view?", "body": "<p>Adding to <code>infused</code>'s answer:</p>\n\n<ol>\n<li><p>That is considered a functional test for a specific controller  <em>only</em>, whose features and limitations are described in the RailsGuide <a href=\"http://guides.rubyonrails.org/testing.html#functional-tests-for-your-controllers\" rel=\"nofollow\">here</a>.</p></li>\n<li><p>If your controller's name is StaticPagesController, the test should be in the file:  </p>\n\n<p><code>test/controllers/static_pages_controller_test.rb</code></p></li>\n<li><p>The RailsGuide describes how to test for a rendered view <a href=\"http://guides.rubyonrails.org/testing.html#testing-templates-and-layouts\" rel=\"nofollow\">here</a>.</p></li>\n<li><p>You can run the tests like this:</p>\n\n<p><code>$ bundle exec rake test</code></p>\n\n<p>or:</p>\n\n<p><code>$ bundle exec rake test:functionals</code></p></li>\n</ol>\n\n<blockquote>\n  <p>seeing how no simple Stack Overflow question regarding writing a\n  simple functional test using Unit::Test appears on Stack Overflow</p>\n</blockquote>\n\n<p>That's because Rails has its own testing framework.  The file <code>test/controllers/static_pages_controller_test.rb</code> actually looks like this:</p>\n\n<pre><code>require 'test_helper'\n\nclass StaticPagesControllerTest &lt; ActionController::TestCase\n\n  test 'home should get index' do\n    get :home\n    assert_template :index\n  end\n\nend\n</code></pre>\n\n<p>Note the superclass: <code>ActionController::TestCase</code>.  As the RailsGuide <a href=\"http://guides.rubyonrails.org/testing.html#a-brief-note-about-minitest\" rel=\"nofollow\">notes</a>, <code>ActionController::TestCase</code> includes MiniTest, which is <a href=\"http://ruby-doc.org//stdlib-1.9.3/libdoc/minitest/unit/rdoc/MiniTest.html\" rel=\"nofollow\">mostly a drop in replacement</a> for <code>Test::Unit</code>. </p>\n"}], "owner": {"reputation": 3, "user_id": 4591247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2683b406b4452a42b59169dbbb7a88e0?s=128&d=identicon&r=PG&f=1", "display_name": "Altun", "link": "https://stackoverflow.com/users/4591247/altun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 28841170, "answer_count": 2, "score": 0, "last_activity_date": 1425425264, "creation_date": 1425413383, "question_id": 28841046, "link": "https://stackoverflow.com/questions/28841046/how-to-write-assertion-that-checks-controller-method-renders-specific-view", "title": "How to write assertion that checks Controller method renders specific view?", "body": "<p>I am running Rails 4 with Ruby 2.1.1.</p>\n\n<p>I have in my Controller \n<code>\n  def home\n    render :index\n  end\n</code>\nand I am writing a Unit::Test to check that the controller renders the view <code>index</code> with the method <code>home</code>. </p>\n\n<p>How would I write the assertion? So far I have\n<code>\ntest \"home should have index\" do\n  assert true\nend\n</code></p>\n\n<p>My test passes, of course, because I have <code>assert true</code>, but upon looking over the documentation, and having tinkered around, I am still unsure how to write a proper functional test for a Controller. Many sources are incomplete or vague, and seeing how no simple Stack Overflow question regarding writing a simple functional test using Unit::Test appears on Stack Overflow, I figured this would be a great question.</p>\n\n<p>All I want is a clear answer to assert that my functional test checks that the <code>home</code> method renders <code>index</code>. Once I figure out how a basic functional test is written, I think I'll be able to proceed to testing the rest of my app.</p>\n\n<p>Cheers</p>\n\n<p>TL;DR I don't know how to write a basic functional test. How do I do that? Please be Unit::Test beginner friendly. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "mongodb", "rake"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1425412883, "post_id": 28840789, "comment_id": 45950887, "body": "That should have been parsed as \\xc3\\xbc - it&#39;s the JSON.parse step that&#39;s gone wrong I think"}, {"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1425421639, "post_id": 28840789, "comment_id": 45955375, "body": "Could you please provide minimal example to reproduce your problem? I have tried to reproduce locally but in my case all works fine."}], "owner": {"reputation": 511, "user_id": 1203825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4b1e51d6e2590950e3eb6fc23d65464?s=128&d=identicon&r=PG&f=1", "display_name": "roobeedeedada", "link": "https://stackoverflow.com/users/1203825/roobeedeedada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425412491, "creation_date": 1425412491, "question_id": 28840789, "link": "https://stackoverflow.com/questions/28840789/rails-3-ruby-1-9-3-json-parse-string-encoding-invalid", "title": "Rails 3/Ruby 1.9.3 JSON.parse string encoding invalid", "body": "<p>As part of a rake task, I'm retrieving a JSON file which has escaped unicode characters in it (such as <code>\\u00fc</code> for u with umlaut etc.) A relevant sample would be:</p>\n\n<pre><code>{\n  \"text\": \"f\\u00fcr\"\n}\n</code></pre>\n\n<p>Then I try to parse it and store it into my MongoDB:</p>\n\n<pre><code>request = Net::HTTP::Get.new(url)\nNet::HTTP.start(uri.host, uri.port, :use_ssl =&gt; uri.scheme == 'https', :verify_mode =&gt; OpenSSL::SSL::VERIFY_NONE) do |http|\n  data = http.request(request).body\nend\n\njson = JSON.parse(data)\nname = \"my-data\"\nobj = {}\nobj[\"name\"] = name\nobj[\"data\"] = json\n\n# assume db connection vars such as @connection are set\nstored =  @collection.find_one({\"name\" =&gt; name})\nif stored\n  stored['data'] = obj['data']\n  @collection.update({\"_id\" =&gt; stored[\"_id\"]}, stored)  \nelse\n  @collection.insert(obj)\nend\n</code></pre>\n\n<p>As soon as I inspect the <code>json[\"text\"]</code> variable from this line: <code>json = JSON.parse(data)</code> it looks like this: <code>\"f\\xB8\\xC5r\"</code> which then MongoDB complains about:</p>\n\n<blockquote>\n  <p>*** BSON::InvalidStringEncoding Exception: String not valid UTF-8</p>\n</blockquote>\n\n<p>I've set the magic top-comment in all my files (it's set as part of a rake task):</p>\n\n<pre><code>#-- encoding: UTF-8\n</code></pre>\n\n<p>I've also set my internal and external encoding in my environment.rb to UTF-8</p>\n\n<p>I'm not very knowledgeable where encodings are concerned but I've spent the past day googling and it's not got me anywhere. Does anyone know what this issue might be caused by? It's worth noting that doing this in a simple test ruby doesn't reproduce this issue but as soon as I run it through Rake it breaks.</p>\n\n<hr>\n\n<p>I've also tried storing the unparsed JSON retrieved directly into MongoDB and then parsing it to display it in a view. As soon as the view tries to render <code>text</code> I get the great:</p>\n\n<blockquote>\n  <p>invalid byte sequence in UTF-8</p>\n</blockquote>\n\n<p>Trying to force the encoding to UTF-8 doesn't get rid of the error. Encoding it with <code>encode</code> to UTF-8 gives the same outcome. Trying to force the encoding to something else then encoding it to UTF-8:</p>\n\n<pre><code>text.force_encoding('ascii-8bit').encode('utf-8')\n</code></pre>\n\n<p>This renders either the wrong thing ('H-') or nothing at all, depending on what OS/environment I'm looking at the page with (Windows 7/Windows 8 is what I've noticed the difference on).</p>\n\n<hr>\n\n<p><strong>Setup:</strong> \nRuby 1.9.3,\nRails 3.0.4,\nRake 0.9.2,\njson (gem) 1.6.1,\nmongo (gem) 1.4.0,\nbson &amp; bson_ext (gems) 1.4.0,\nMongoDB 2.6.7,\nAmazon Linux AMI 2014.09</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cloud-foundry"], "comments": [{"owner": {"reputation": 4187, "user_id": 518370, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89839949e11b9f0db962a1a8afac2e09?s=128&d=identicon&r=PG", "display_name": "peterept", "link": "https://stackoverflow.com/users/518370/peterept"}, "edited": false, "score": 0, "creation_date": 1425439825, "post_id": 28840617, "comment_id": 45960903, "body": "What do you get in the log?: $ cf logs myapp --recent"}], "answers": [{"tags": [], "owner": {"reputation": 4817, "user_id": 3817025, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/02fd68a33285e876c0b9652ccb9fbc3a?s=128&d=identicon&r=PG", "display_name": "Jeff Sloyer", "link": "https://stackoverflow.com/users/3817025/jeff-sloyer"}, "is_accepted": true, "score": 0, "last_activity_date": 1425494398, "creation_date": 1425494398, "answer_id": 28862320, "question_id": 28840617, "link": "https://stackoverflow.com/questions/28840617/issue-deploying-ror-app-in-cf/28862320#28862320", "title": "Issue deploying RoR app in CF", "body": "<p>I actually ended up pulling a clean copy from git of my app and used the (<a href=\"https://github.com/cloudfoundry/ruby-buildpack.git\" rel=\"nofollow\">https://github.com/cloudfoundry/ruby-buildpack.git</a> buildpack and everything magically worked.  I think Cloud Foundry was trying to use an old version of a buildpack somehow...</p>\n"}], "owner": {"reputation": 4817, "user_id": 3817025, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/02fd68a33285e876c0b9652ccb9fbc3a?s=128&d=identicon&r=PG", "display_name": "Jeff Sloyer", "link": "https://stackoverflow.com/users/3817025/jeff-sloyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 28862320, "answer_count": 1, "score": 0, "last_activity_date": 1425494398, "creation_date": 1425411898, "question_id": 28840617, "link": "https://stackoverflow.com/questions/28840617/issue-deploying-ror-app-in-cf", "title": "Issue deploying RoR app in CF", "body": "<p>I am trying to deploy a RoR app using Ruby 2.2.0 and Rails 4.2.0, gem file below.  I can run the app locally but when I push to CF I get the following error without any helpful info.</p>\n\n<pre><code>2015-03-03T14:31:26.61-0500 [API]     ERR Encountered error: Staging error: failed to stage application:\n2015-03-03T14:31:26.61-0500 [API]     ERR Script exited with status 255\n</code></pre>\n\n<p>I am using the CF community ruby buildpack (<a href=\"https://github.com/cloudfoundry/ruby-buildpack.git\" rel=\"nofollow\">https://github.com/cloudfoundry/ruby-buildpack.git</a>) since it seems to be the only one support ruby 2.2.</p>\n\n<p>The command I am using to push is <code>cf push myapp -b https://github.com/cloudfoundry/ruby-buildpack.git</code></p>\n\n<p>Gemfile:\n  source '<a href=\"https://rubygems.org\" rel=\"nofollow\">https://rubygems.org</a>'</p>\n\n<pre><code>ruby \"2.2.0\"\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.0'\n\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails'\n\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\ngem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 1.2'\n\n# https://github.com/namick/obfuscate_id\ngem 'obfuscate_id', github: 'namick/obfuscate_id'\n\ngem 'yui-compressor'\n\n# https://github.com/attr-encrypted/attr_encrypted\ngem 'attr_encrypted'\n\ngroup :doc do\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', require: false\nend\n\ngroup :development, :test do\ngem 'rspec-rails', '~&gt; 3.0'\ngem 'factory_girl_rails', \"~&gt; 4.0\"\ngem 'capybara'\ngem 'capybara-email' #, github: 'dockyard/capybara-email'\ngem 'guard-rspec'\ngem 'guard-livereload'\ngem 'guard-resque', github: 'railsjedi/guard-resque'\ngem 'launchy'\ngem 'faker'\ngem 'pry-byebug'\ngem 'pry-macro'\ngem 'seed_dumper'\ngem 'ruby-prof'\n# Enough of these assets messages in log!\ngem 'disable_assets_logger'\ngem 'railroady'\nend\n\n# Testing\ngroup :test do\ngem 'simplecov', require: false\ngem 'rubocop', require: false\ngem 'rubocop-rspec', require: false\ngem \"database_cleaner\"\ngem 'timecop'\ngem 'poltergeist'\ngem \"fakeredis\", :require =&gt; \"fakeredis/rspec\"\nend\n\ngroup :development do\n# gem 'binding_of_caller', '&gt;= 0.7.1'\n# gem 'better_errors', '&gt;= 0.7.2'\ngem 'web-console', '~&gt; 2.0'\ngem 'binding_of_caller', '0.7.3.pre1'\ngem 'capistrano'\ngem 'capistrano-rvm'\ngem 'capistrano-rails'\ngem 'capistrano-resque', '~&gt; 0.2.1', require: false\ngem 'spring-commands-rspec'\ngem 'awesome_print'\ngem 'pry-rails'\ngem 'meta_request'\ngem 'bullet'\nend\n\n# Database\ngem 'pg'\ngem 'sqlite3'\ngem 'cf-autoconfig'\ngem 'groupdate'\ngem 'redis-rails'\ngem 'apartment', github: 'influitive/apartment'\n\n# Service object pattern\ngem 'interactor-rails', '~&gt; 2.0'\n\n# Currency\ngem 'money-rails'\ngem 'google_currency'\n\n# Analytics\ngem 'ga_events'\ngem 'newrelic_rpm'\n\n# Twitter Bootstrap\ngem 'sass-rails', '4.0.3'\ngem 'bootstrap-sass', '~&gt; 3.3.1'\ngem 'bootstrap-sass-extras'\ngem 'autoprefixer-rails'\n\ngem 'momentjs-rails', '&gt;= 2.8.1'\ngem 'bootstrap3-datetimepicker-rails', '~&gt; 3.1.3'\n\n# Design stuff\n#gem 'table_for_collection'\ngem 'simple_form', github: 'plataformatec/simple_form'\ngem \"font-awesome-rails\"\n\n# Static pages (without dealing with too many routes)\ngem 'high_voltage'\ngem 'nestive', '~&gt; 0.5'\n\n# Social Network Sharing\n# gem 'shareable'\n\n# Front-end\ngem 'haml-rails'\ngem 'draper', '~&gt; 1.4'\ngem 'humane-rails'\ngem 'autonumeric-rails'\ngem 'country_select'\n\n# A/B Testing gem (remove for optimizely?)\ngem 'split', require: 'split/dashboard'\n\n# Structure js files and view integration\ngem 'pluggable_js', '~&gt; 2.0.0'\n\n# Sign up wizard\ngem 'wicked'\n\n# Graphs\ngem 'lazy_high_charts'\n\n#Account management\ngem 'devise'\ngem 'devise_invitable'\ngem 'omniauth'\ngem 'omniauth-xero', github: 'kaleworsley/omniauth-xero'\ngem 'omniauth-freshbooks'\ngem 'omniauth-quickbooks'\n#gem 'omniauth-linkedin'\n#gem 'omniauth-twitter'\n#gem 'omniauth-facebook'\n#gem 'omniauth-yelp'\ngem 'pundit'\n\n# Audit\ngem 'paper_trail', '~&gt; 3.0.5'\n\ngem 'activeadmin', github: 'activeadmin'\n\ngem 'enumerize'\ngem 'enum_help'\n\n\n# External accounts\n#gem 'xeroizer', '2.15.5'\ngem 'freshbooks.rb'\ngem 'quickbooks-ruby'\n#https://github.com/cloocher/aggcat\n#gem 'aggcat'\n\n# MailChimp integration\ngem 'gibbon'\n\n# Contact us, https://github.com/plataformatec/mail_form\ngem 'mail_form'\n\n# Page caching\ngem 'actionpack-page_caching'\n\n# Other helpers\ngem \"workflow\"\n#gem \"httparty\"\ngem \"resque\", \"~&gt; 1.25.2\"\ngem 'resque-status'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancan"], "answers": [{"tags": [], "owner": {"reputation": 1584, "user_id": 1753903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5bb8d7b970212f0d2e14a9f4ed53dd9?s=128&d=identicon&r=PG", "display_name": "littleforest", "link": "https://stackoverflow.com/users/1753903/littleforest"}, "is_accepted": true, "score": 1, "last_activity_date": 1425414700, "creation_date": 1425414700, "answer_id": 28841353, "question_id": 28840588, "link": "https://stackoverflow.com/questions/28840588/rails-cancan-authorization-based-on-association-being-denied/28841353#28841353", "title": "Rails cancan authorization based on association being denied", "body": "<p>You need to authorize the task, not the current_user.  The current_user is assumed:</p>\n\n<pre><code>def show\n  @task = Task.find(params[:id])\n\n  authorize! :read, @task\n\n  render json: @task, root: \"task\"\nend\n</code></pre>\n\n<p>In your abilities file you could write it like this:</p>\n\n<pre><code>def initialize(user)\n  can :manage, Task do |task|\n    task.user.id == user.id &amp;&amp; user.group == 1\n  end\nend \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4547292"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 28841353, "answer_count": 1, "score": 0, "last_activity_date": 1425414700, "creation_date": 1425411825, "question_id": 28840588, "link": "https://stackoverflow.com/questions/28840588/rails-cancan-authorization-based-on-association-being-denied", "title": "Rails cancan authorization based on association being denied", "body": "<p>I have the snippet below in my <code>ability.rb</code> file:</p>\n\n<pre><code>def initialize(user)\n  if user.group === 1\n    can :manage, Task do |task|\n      task.user.id === user.id\n    end\n  end \nend\n</code></pre>\n\n<p>The user <code>has_many</code> tasks and each task <code>belongs_to</code> a user.  The task record being requested (7) has a <code>user_id</code> of 4.  The user sending the request has a <code>user_id</code> of 4.</p>\n\n<p>In the tasks show method, I have this snippet to authorize and return the data:</p>\n\n<pre><code>def show\n    @task = Task.find(params[:id])\n\n    authorize! :read, @current_user\n\n    render json: @task, root: \"task\"\nend\n</code></pre>\n\n<p>Why would it be denied?</p>\n"}, {"tags": ["ruby", "gem"], "comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1425409757, "post_id": 28839924, "comment_id": 45949087, "body": "<a href=\"http://guides.rubygems.org/make-your-own-gem/#adding-an-executable\" rel=\"nofollow noreferrer\">guides.rubygems.org/make-your-own-gem/#adding-an-executable</a>"}, {"owner": {"reputation": 2672, "user_id": 223936, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j58Xn.jpg?s=128&g=1", "display_name": "Plastikfan", "link": "https://stackoverflow.com/users/223936/plastikfan"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1425411252, "post_id": 28839924, "comment_id": 45949950, "body": "I&#39;ve already read that tutorial and it doesn&#39;t cover the issue I&#39;m talking about. In that example it&#39;s still executing the gem with &#39;ruby&#39; on the command line. That article only talks about putting a ruby script in the bin directory and making it executable."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1425411415, "post_id": 28839924, "comment_id": 45950054, "body": "The shebang line (<code>#!&#47;usr&#47;bin&#47;env ruby</code>) at the start of the script is the magic; when the script is executable, you can invoke it directly and the shebang tells it which executable to execute the script with."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1425428899, "post_id": 28839924, "comment_id": 45958093, "body": "the tutorial is not as clear as it could be, but they are only executing the gem with <code>ruby</code> on the command line in development. It does correctly outline the way to make a ruby gem that will provide an exectuable script you can execute by itself, once you&#39;ve installed the gem."}], "answers": [{"comments": [{"owner": {"reputation": 2672, "user_id": 223936, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j58Xn.jpg?s=128&g=1", "display_name": "Plastikfan", "link": "https://stackoverflow.com/users/223936/plastikfan"}, "edited": false, "score": 0, "creation_date": 1425417958, "post_id": 28840512, "comment_id": 45953466, "body": "Ok thanks, your explanation of this point is better than the tutorial. The tutorial still goes on about ruby ..., which is why I didnt think it hit the spot. Thanks."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 3, "last_activity_date": 1425411594, "creation_date": 1425411594, "answer_id": 28840512, "question_id": 28839924, "link": "https://stackoverflow.com/questions/28839924/how-to-write-a-ruby-gem-that-can-be-invoked-without-the-word-ruby-preceding-it/28840512#28840512", "title": "How to write a Ruby gem that can be invoked without the word &#39;ruby&#39; preceding it", "body": "<p>The \"#!\" line at the start of a script tells your shell which executable to execute the script with. In this case, it tells it to find the Ruby executable from the environment and give the script to it for execution.</p>\n\n<p>By means of example, I have a file called \"hi\", with the following:</p>\n\n<pre><code>#!/usr/bin/env ruby\nputs \"hi!\"\n</code></pre>\n\n<p>I make it executable:</p>\n\n<pre><code>$ chmod a+x hi\n</code></pre>\n\n<p>Then I can execute it directly, without explicitly invoking the Ruby interpreter:</p>\n\n<pre><code>$ ./hi\nhi!\n</code></pre>\n\n<p>Per <a href=\"http://guides.rubygems.org/make-your-own-gem/#adding-an-executable\" rel=\"nofollow\">the tutuorial</a> you would simply provide such a file which requires your gem and whatnot, and provide it in the <code>executables</code> property of your gemspec:</p>\n\n<pre><code>Gem::Specification.new do |s|\n  # ...\n  s.executables &lt;&lt; 'hi'\n</code></pre>\n\n<p>When the gem is installed, the <code>hi</code> script would be installed into a location discoverable on the path, so you could then invoke it. </p>\n"}], "owner": {"reputation": 2672, "user_id": 223936, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j58Xn.jpg?s=128&g=1", "display_name": "Plastikfan", "link": "https://stackoverflow.com/users/223936/plastikfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 28840512, "answer_count": 1, "score": 0, "last_activity_date": 1425411594, "creation_date": 1425409570, "question_id": 28839924, "link": "https://stackoverflow.com/questions/28839924/how-to-write-a-ruby-gem-that-can-be-invoked-without-the-word-ruby-preceding-it", "title": "How to write a Ruby gem that can be invoked without the word &#39;ruby&#39; preceding it", "body": "<p>I would like to write a CLI application wrapped into a Gem that can be invoked the same way git commands are invoked, or gem commands. Eg when running say \"git clone \" you don't need to precede it with 'ruby'. However, the tutorials and articles I've seen so far about writing gems, don't show this. The examples either require you to run your gem through irb, with appropriate requires, or you run it like 'ruby '. This is not what I want. If you know of any tutorials that cover this, then that would be great.</p>\n\n<p>Thanks.</p>\n"}]