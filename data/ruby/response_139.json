[{"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504744005, "post_id": 46085760, "comment_id": 79134193, "body": "I guess this needs to be a <code>UNION</code>, but I&#39;m not sure what the current &quot;best&quot; way to do this in rails is..."}], "answers": [{"comments": [{"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "edited": false, "score": 1, "creation_date": 1504980499, "post_id": 46131413, "comment_id": 79229585, "body": "Hey, I don&#39;t think this is working. I need it to return an array of chords (whichever chords have the notes provided), so I don&#39;t have a <code>chord</code> record to call <code>.notes</code> on. This is why I had the scope on Chord in the first place. Does that make sense or am I misunderstanding your suggestion? Thanks!"}, {"owner": {"reputation": 4460, "user_id": 333466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/34e9ff3d531cc6d9cd55044263856d82?s=128&d=identicon&r=PG", "display_name": "guy schaller", "link": "https://stackoverflow.com/users/333466/guy-schaller"}, "reply_to_user": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "edited": false, "score": 0, "creation_date": 1505000424, "post_id": 46131413, "comment_id": 79234409, "body": "ok so I didn&#39;t understand what you were trying to do. Which is find the chords that have these exact note ids. And I didn&#39;t see that your scope was longer than it was. I&#39;ll think about it and edit my answer"}, {"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "edited": false, "score": 0, "creation_date": 1505168412, "post_id": 46131413, "comment_id": 79292693, "body": "Thanks, this worked! I had to make one minor change, which was to add <code>.sort</code> on the results of the <code>.map</code> and on <code>notes</code> so that they arrays were considered to be equal even if the contents were in a different order."}], "tags": [], "owner": {"reputation": 4460, "user_id": 333466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/34e9ff3d531cc6d9cd55044263856d82?s=128&d=identicon&r=PG", "display_name": "guy schaller", "link": "https://stackoverflow.com/users/333466/guy-schaller"}, "is_accepted": true, "score": 1, "last_activity_date": 1505179309, "last_edit_date": 1505179309, "creation_date": 1504965138, "answer_id": 46131413, "question_id": 46085760, "link": "https://stackoverflow.com/questions/46085760/how-can-i-update-a-rails-sql-scope-to-return-an-exact-match-instead-of-a-contai/46131413#46131413", "title": "How can I update a Rails/SQL scope to return an exact match instead of a &quot;contains&quot; match?", "body": "<p>Edit after understanding the need better:</p>\n\n<p>I think the scope you have is good and gets you far enough. From this point you know that the result you'll get has all chords you need and a few extras. \nSo what I would do, instead of moving too much logic to the DB is from that point add some rails logic on top using a class method. Yes it's a bit heavier as it will add 2 extra select calls. \nbut... easier to maintain, it uses columns that should be under indexes and it's also easy to add cache on top of this method in the future in case you start getting real traffic.</p>\n\n<p>The new method should look like this:</p>\n\n<pre><code>def self.with_exact_notes(notes)\n  return if notes.empty?\n  potential_ids = with_notes(notes).map(&amp;:id)\n  chords = Chord.includes(:chordnotes, :notes).where(id: potential_ids)\n  chords.map {|ch| ch if ch.notes.map(&amp;:id).sort == notes.sort }.compact\nend\n</code></pre>\n\n<p>The method will first use your scope to get all the potential chords, then it will filter out the ones that don't have the exact notes ids that were passed into the method.</p>\n\n<p>Then your query will be:</p>\n\n<pre><code>Chord.with_exact_notes(your_notes) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 1754179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9dd138917a0368cff0eb0669ccb0ef0?s=128&d=identicon&r=PG", "display_name": "jacobt", "link": "https://stackoverflow.com/users/1754179/jacobt"}, "is_accepted": false, "score": 1, "last_activity_date": 1505242659, "last_edit_date": 1505242659, "creation_date": 1505174496, "answer_id": 46165954, "question_id": 46085760, "link": "https://stackoverflow.com/questions/46085760/how-can-i-update-a-rails-sql-scope-to-return-an-exact-match-instead-of-a-contai/46165954#46165954", "title": "How can I update a Rails/SQL scope to return an exact match instead of a &quot;contains&quot; match?", "body": "<p>If you're using postgres, you can do this in the db using the <code>ARRAY_AGG</code> function:</p>\n\n<pre><code>  def self.with_notes(note_ids)\n    return none if note_ids.blank?\n    typecast_ids = note_ids.sort.map { |id| \"#{id}::bigint\" }.join(\",\")\n    joins(:chordnotes).group(:id)\n      .having(\"ARRAY_AGG(note_id ORDER BY note_id) = ARRAY[#{typecast_ids}]\")\n      .distinct\n  end\n</code></pre>\n\n<p>The annoying part is that if your <code>id</code> column is a <code>bigint</code> you'll need to explicitly typecast the ids you're checking against (<code>map { |id| \"#{id}::bigint\" }</code>.</p>\n\n<p>Be sure to sort both arrays when checking for equality (<code>note_ids.sort</code>, <code>ARRAY_AGG(note_id ORDER BY note_id)</code>).</p>\n\n<p>Here's how this function will look as SQL:</p>\n\n<pre><code>pry(main)&gt; Chord.with_notes([3,4]).first\n  Chord Load (0.8ms)  SELECT  DISTINCT \"chords\".* FROM \"chords\" INNER JOIN \"chordnotes\" ON \"chordnotes\".\"chord_id\" = \"chords\".\"id\" GROUP BY \"chords\".\"id\" HAVING (ARRAY_AGG(note_id ORDER BY note_id) = ARRAY[3::bigint,4::bigint]) ORDER BY \"chords\".\"id\" ASC LIMIT $1  [[\"LIMIT\", 1]]\n</code></pre>\n\n<p>If you're using MySQL, you could use <code>GROUP_CONCAT</code>:</p>\n\n<pre><code>  def self.with_notes(note_ids)\n    joins(:chordnotes).group(:id)\n      .having(\"GROUP_CONCAT(note_id ORDER BY note_id) = ?\", note_ids.sort.join(\",\"))\n  end\n</code></pre>\n"}], "owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 2, "accepted_answer_id": 46131413, "answer_count": 2, "score": 1, "last_activity_date": 1505242659, "creation_date": 1504741102, "question_id": 46085760, "link": "https://stackoverflow.com/questions/46085760/how-can-i-update-a-rails-sql-scope-to-return-an-exact-match-instead-of-a-contai", "title": "How can I update a Rails/SQL scope to return an exact match instead of a &quot;contains&quot; match?", "body": "<p>In my data model <code>Chord has_many :notes, through: :chordnotes</code></p>\n\n<p>The following scope in <code>Chord.rb</code> returns any <code>Chord</code> that has the <code>Notes</code> passed to the scope as an array of <code>Note</code> ids (e.g. <code>[9, 0, 5]</code>) per <a href=\"https://stackoverflow.com/questions/21120927/querying-a-record-with-a-many-to-many-relationship-based-on-whether-or-not-it-ha\">this post</a>:</p>\n\n<pre><code>scope :with_notes, -&gt;(notes) { joins(:chordnotes).where(chordnotes: {note_id: notes}).group(\"#{table_name}.#{primary_key}\").having('COUNT(DISTINCT chordnotes.note_id) = ?', notes.size) }\n</code></pre>\n\n<p>How can I modify this scope to return only Chords that have <em>exactly</em> the notes passed in <code>notes</code> instead of any Chords that have, amongst others, the <code>notes</code> passed in?</p>\n\n<p>For example:</p>\n\n<p>If a D Chord has the notes with ids [9, 0, 5, 7], and the notes [9, 0, 5] were passed to the scope it would return the D Chord.</p>\n\n<p>I want a new scope that would not return the D Chord because the <code>notes</code> passed in did not include [7] and therefore did not match the D Chord's notes exactly.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "macos", "rubygems", "cocoapods"], "answers": [{"comments": [{"owner": {"reputation": 3742, "user_id": 743345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81bba1eea8c5bb4430932cb2b79d18b2?s=128&d=identicon&r=PG", "display_name": "JeffB6688", "link": "https://stackoverflow.com/users/743345/jeffb6688"}, "edited": false, "score": 0, "creation_date": 1504795977, "post_id": 46091724, "comment_id": 79161115, "body": "Actually, even trying to remove all versions of cocoapods in the provided link fails. The first suggestion in the link was to determine which version of cocoapods is installed with the following command: &quot;gem list --local | grep cocoapods&quot;. This results in the same error message recorded in the problem statement. Some time ago, I was working on another project that had me update Ruby to version ruby-2.1.5 and ruby-2.1.5-dev. These are found in &quot;/Users/jeff/.rvm/rubies&quot;. Now if I go to &quot;/Library/Ruby/Gems&quot;, there is a subdirectory called 2.0.0. Is there an incompatibility here?"}, {"owner": {"reputation": 1108, "user_id": 2892357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kz430.jpg?s=128&g=1", "display_name": "Ihar Katkavets", "link": "https://stackoverflow.com/users/2892357/ihar-katkavets"}, "reply_to_user": {"reputation": 3742, "user_id": 743345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81bba1eea8c5bb4430932cb2b79d18b2?s=128&d=identicon&r=PG", "display_name": "JeffB6688", "link": "https://stackoverflow.com/users/743345/jeffb6688"}, "edited": false, "score": 0, "creation_date": 1504796267, "post_id": 46091724, "comment_id": 79161311, "body": "hm, to check which ruby version is active in your system execute <code>$ ruby --version</code>  Mine is ruby 2.0.0p648 (2015-12-16 revision 53162) [x86_64-darwin16.5.0] Then you need to install required"}, {"owner": {"reputation": 3742, "user_id": 743345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81bba1eea8c5bb4430932cb2b79d18b2?s=128&d=identicon&r=PG", "display_name": "JeffB6688", "link": "https://stackoverflow.com/users/743345/jeffb6688"}, "edited": false, "score": 0, "creation_date": 1504805179, "post_id": 46091724, "comment_id": 79166704, "body": "Mine is ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-darwin14.0]. Can you think of any way to get around this problem where every gem command results in the same error? Should I delete something using unix commands? I am really at a loss on how to fix this. Do  I need to remove one of the versions? If so, how?"}, {"owner": {"reputation": 1108, "user_id": 2892357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kz430.jpg?s=128&g=1", "display_name": "Ihar Katkavets", "link": "https://stackoverflow.com/users/2892357/ihar-katkavets"}, "reply_to_user": {"reputation": 3742, "user_id": 743345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81bba1eea8c5bb4430932cb2b79d18b2?s=128&d=identicon&r=PG", "display_name": "JeffB6688", "link": "https://stackoverflow.com/users/743345/jeffb6688"}, "edited": false, "score": 0, "creation_date": 1504808644, "post_id": 46091724, "comment_id": 79168493, "body": "You don&#39;t need to delete anything. Install ruby environment as described at <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv</a> . Then install ruby version 2.0.0p648. Then <code>cocoapods</code> have to work. I prefer to install <code>rbenv</code> using &quot;Basic GitHub checkout&quot; way <a href=\"https://github.com/rbenv/rbenv#basic-github-checkout\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv#basic-github-checkout</a>"}], "tags": [], "owner": {"reputation": 1108, "user_id": 2892357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kz430.jpg?s=128&g=1", "display_name": "Ihar Katkavets", "link": "https://stackoverflow.com/users/2892357/ihar-katkavets"}, "is_accepted": true, "score": 1, "last_activity_date": 1504773534, "creation_date": 1504773534, "answer_id": 46091724, "question_id": 46084587, "link": "https://stackoverflow.com/questions/46084587/unable-to-load-cocoapods-could-not-find-encrypted-strings-gemloaderror/46091724#46091724", "title": "Unable to load cocoapods - Could not find &#39;encrypted_strings&#39; - Gem::LoadError", "body": "<p>Probably version of <code>cocoapods</code> is running in unsupported version ruby and install again . To fix it remove <strong>all</strong> versions of cocoapods. How to do it find at answer <a href=\"https://superuser.com/a/686319\">https://superuser.com/a/686319</a> </p>\n\n<p>It can be happen after updating to new macOS version.\nTo prevent it happen in future use <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv Ruby environment</a> </p>\n\n<p><code>rbenv</code> allows to not use <strong>root</strong> access</p>\n"}], "owner": {"reputation": 3742, "user_id": 743345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81bba1eea8c5bb4430932cb2b79d18b2?s=128&d=identicon&r=PG", "display_name": "JeffB6688", "link": "https://stackoverflow.com/users/743345/jeffb6688"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 46091724, "answer_count": 1, "score": 0, "last_activity_date": 1504796082, "creation_date": 1504733256, "last_edit_date": 1504796082, "question_id": 46084587, "link": "https://stackoverflow.com/questions/46084587/unable-to-load-cocoapods-could-not-find-encrypted-strings-gemloaderror", "title": "Unable to load cocoapods - Could not find &#39;encrypted_strings&#39; - Gem::LoadError", "body": "<p>I am not able to load cocoapods. No matter what gem command I type in, I get the following error:</p>\n\n<pre><code>/Users/jeff//.rvm/rubies/ruby-\n2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/dependency.rb:315:in `to_specs': \nCould not find 'encrypted_strings' (&gt;= 0) among 18 total gem(s) (Gem::LoadError)\nChecked in \n'GEM_PATH=/Users/jeff/.gem/ruby/2.1.0:/Users/jeff/.rvm/rubies/ruby-\n2.1.5/lib/ruby/gems/2.1.0', execute `gem env` for more information\nfrom /Users/jeff/.rvm/rubies/ruby-\n2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/dependency.rb:324:in `to_spec'\nfrom /Users/jeff/.rvm/rubies/ruby-\n2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_gem.rb:58:in `gem'\nfrom /Users/jeff/.rvm/rubies/ruby-\n2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_gem.rb:65:in `&lt;module:Kernel&gt;'\nfrom /Users/jeff/.rvm/rubies/ruby-\n2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_gem.rb:7:in `&lt;top (required)&gt;'\nfrom /Users/jeff/.rvm/rubies/ruby-\n2.1.5/lib/ruby/site_ruby/2.1.0/rubygems.rb:1235:in `require'\nfrom /Users/jeff/.rvm/rubies/ruby-\n2.1.5/lib/ruby/site_ruby/2.1.0/rubygems.rb:1235:in `&lt;top (required)&gt;'\nfrom &lt;internal:gem_prelude&gt;:1:in `require'\nfrom &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n</code></pre>\n\n<p>I get this error when I type any of the following:</p>\n\n<p>sudo gem install cocoapods</p>\n\n<p>gem uninstall cocoapods</p>\n\n<p>gem env</p>\n\n<p>sudo gem install encrypted_strings</p>\n\n<p>My mac is running version 10.12.6 osx</p>\n\n<p>I do have Ruby in my /Library. The subdirectories contains Gems/2.0.0.</p>\n\n<p>Note that some time ago, I was working on another project that had me update Ruby to version ruby-2.1.5 and ruby-2.1.5-dev. These are found in \"/Users/jeff/.rvm/rubies\". Now if I go to \"/Library/Ruby/Gems\", there is a subdirectory called 2.0.0. Is there an incompatibility here?</p>\n\n<p>How can I correct this problem? Should I somehow remove these versions. If so, how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "git"], "comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1504772851, "post_id": 46083997, "comment_id": 79144578, "body": "did y read <a href=\"https://github.com/peatio/peatio#getting-started\" rel=\"nofollow noreferrer\">github.com/peatio/peatio#getting-started</a>"}, {"owner": {"reputation": 1, "user_id": 8571222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab597fbd487e91bcdb1f203a16700f4?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie B.", "link": "https://stackoverflow.com/users/8571222/eddie-b"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1504786643, "post_id": 46083997, "comment_id": 79153880, "body": "@FabrizioBertoglio yes we read this but didn&#39;t found this cPanel related ."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10620965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tLUud.jpg?s=128&g=1", "display_name": "Karim Chowdhury", "link": "https://stackoverflow.com/users/10620965/karim-chowdhury"}, "is_accepted": false, "score": 1, "last_activity_date": 1564256006, "creation_date": 1564256006, "answer_id": 57235449, "question_id": 46083997, "link": "https://stackoverflow.com/questions/46083997/how-to-install-peatio-on-cpanel/57235449#57235449", "title": "How to install Peatio on cPanel", "body": "<p>Peatio is Ruby based exchange which can not installed on cPanel but any one can use this repository: <a href=\"https://github.com/saydulk/peatio\" rel=\"nofollow noreferrer\">https://github.com/saydulk/peatio</a></p>\n\n<p>Requirements For Setup:\nVPS: digitalocean.com\nOS: Debian 9\nRAM: Min 8GB Recommended 16\nDomain: Any top level domain name</p>\n"}], "owner": {"reputation": 1, "user_id": 8571222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab597fbd487e91bcdb1f203a16700f4?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie B.", "link": "https://stackoverflow.com/users/8571222/eddie-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564256006, "creation_date": 1504730414, "question_id": 46083997, "link": "https://stackoverflow.com/questions/46083997/how-to-install-peatio-on-cpanel", "title": "How to install Peatio on cPanel", "body": "<p>Intro : Peatio is a free and open-source crypto currency exchange implementation with the Rails framework and other cutting-edge technology.</p>\n\n<p>We want to install Peatio in cPanel but we didn't found any tutorial or any article how can we install this on cPanel . I found their wiki and their is only linux/Mac and Ubuntu installation guides available. We opened issue and thought they maybe help us and they refer us to post on stack overflow. I hope someone help us. And i am also willing to pay , we have root access on our cPanel server. \nGithub Link is <a href=\"https://github.com/peatio/peatio\" rel=\"nofollow noreferrer\">here</a></p>\n\n<blockquote>\n  <p>Requirements</p>\n  \n  <p>Linux / Mac OSX Ruby 2.1.0 Rails 4.0+ Git 1.7.10+ Redis 2.0+ MySQL\n  RabbitMQ</p>\n</blockquote>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 5, "creation_date": 1504731008, "post_id": 46083962, "comment_id": 79130246, "body": "Can you post a Minimal, Complete, and Verifiable example of the code <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> ?"}, {"owner": {"reputation": 49, "user_id": 6854922, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-R5zhAw-JVm4/AAAAAAAAAAI/AAAAAAAAJMY/HeKCntq0Agg/photo.jpg?sz=128", "display_name": "Brito", "link": "https://stackoverflow.com/users/6854922/brito"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1504868619, "post_id": 46083962, "comment_id": 79191967, "body": "This is the code I&#39;m using it&#39;s a very basic one:  <code>require &#39;selenium-webdriver  driver = Selenium::WebDriver.for:chrome  driver.get &quot;http:&#47;&#47;www.google.com&quot;</code>"}, {"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1533325728, "post_id": 46083962, "comment_id": 90321662, "body": "What is on that port? Is it running? Do you have a firewall blocking the port? Selinux? Try connecting with netcat."}], "owner": {"reputation": 49, "user_id": 6854922, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-R5zhAw-JVm4/AAAAAAAAAAI/AAAAAAAAJMY/HeKCntq0Agg/photo.jpg?sz=128", "display_name": "Brito", "link": "https://stackoverflow.com/users/6854922/brito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 983, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1533319009, "creation_date": 1504730279, "last_edit_date": 1504768504, "question_id": 46083962, "link": "https://stackoverflow.com/questions/46083962/failed-to-open-tcp-connection-to-127-0-0-19515", "title": "Failed to open TCP connection to 127.0.0.1:9515", "body": "<p>I'm new to Ruby, and I'm getting the following error when I try to execute my script</p>\n\n<p>Failed to open TCP connection to 127.0.0.1:9515</p>\n\n<p>I got some posts related to the same error but all of them are for Linux or Mac. I'm using Windows.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "heroku"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504728882, "post_id": 46083587, "comment_id": 79129176, "body": "Tell us more about this, it seems that it is documentation for an API, not Heroku&#39;s, what part are you having trouble with?  What part of this is related to Ruby or Ruby on Rails?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2369480"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504729357, "post_id": 46083587, "comment_id": 79129413, "body": "i dont understand how i should include  this is POST <a href=\"https://app.starving.cloud.io/v1/profile/users/email/\" rel=\"nofollow noreferrer\">app.starving.cloud.io/v1/profile/users/email</a>{email}/sign-in  and how to call  endpoint of authentication.... sorry if i tell a lot of info :( May be you can show me example on gist or something else..."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504795691, "post_id": 46083587, "comment_id": 79160903, "body": "Nope, we have the opposite problem. You aren&#39;t giving us much information to work with, but I&#39;ll do my best: see answer."}], "answers": [{"tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1504795666, "creation_date": 1504795666, "answer_id": 46099341, "question_id": 46083587, "link": "https://stackoverflow.com/questions/46083587/heroku-adddon-rails-how-to-call-endpoint-of-authentificatation/46099341#46099341", "title": "heroku adddon rails how to call endpoint of authentificatation", "body": "<p>If this is an API you need to consume (hit, etc), you can use an HTTP Client library like <a href=\"https://github.com/typhoeus/typhoeus\" rel=\"nofollow noreferrer\">typhoeus</a> to write code that does the POST request and allows you to read the token from the response's body:</p>\n\n<pre><code>email = 'foo@example.com'\npassword = 'password' # Never use this password!\nresponse = Typhoeus.post(\"https://app.starving.cloud.io/v1/profile/users/email/#{email}/sign-in\",\n                         headers: { 'Content-Type'=&gt; 'application/json' },\n                         body: { password: password }.to_json)\ntoken = JSON.parse(response.body)['token']\n</code></pre>\n\n<p>Please read the gem's documentation to build the best version of this code, but this should give you an idea and a starting point.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2369480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504795666, "creation_date": 1504728673, "question_id": 46083587, "link": "https://stackoverflow.com/questions/46083587/heroku-adddon-rails-how-to-call-endpoint-of-authentificatation", "title": "heroku adddon rails how to call endpoint of authentificatation", "body": "<ol>\n<li><p>When a heroku creates resources:\na) Make a call to the endpoint of authentication:</p>\n\n<pre><code>POST https://app.starving.cloud.io/v1/profile/users/email/{email}/sign-in\n</code></pre>\n\n<p>with the body </p>\n\n<pre><code>(Content-Type: application / json)\n {\n  \"password\": \"{password}\"\n }\n</code></pre>\n\n<p>The endpoint returns the token as json:</p>\n\n<pre><code>{\n \"token\": \"{token}\"\n}\n</code></pre></li>\n</ol>\n\n<p>Please help me. how to create this is? Or what i should to read about it. Thanks very much.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "charts", "arguments", "chartkick"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1504726590, "post_id": 46083025, "comment_id": 79128020, "body": "I would suggest doing the multiplication in the controller and not in the view. Are you meaning to multiply the string <code>&#39;paper_weight&#39;</code> by a global variables  <code>@OtherTypes</code> etc ?"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1504727098, "post_id": 46083025, "comment_id": 79128282, "body": "@whodini9 Well, I am using this variables on multiple pages in the app, the variables are located in the <code>application_controller.rb</code>. Yes to make the <code>chartkick</code> render the column chart the weight have to be interpolated in the code as a string."}, {"owner": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "edited": false, "score": 0, "creation_date": 1504728038, "post_id": 46083025, "comment_id": 79128760, "body": "I think that you should check out what is  the results of your queries. You can check it e.g using binding.pry."}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504728247, "creation_date": 1504726368, "last_edit_date": 1504728247, "question_id": 46083025, "link": "https://stackoverflow.com/questions/46083025/wrong-number-of-arguments-given-4-expected-2-3-error-when-pulling-data-fr", "title": "wrong `number of arguments (given 4, expected 2..3)` error, when pulling data from model to display in a chart", "body": "<p>In an ROR app I'm working on I'm getting this error <code>wrong number of arguments (given 4, expected 2..3)</code> when using this line of code:</p>\n\n<pre><code> &lt;%= column_chart current_user.papers.group(:paper_type).group_by_month(:date, format: \"%b, %y\").sum(\"paper_weight * #{ @OtherTypes}\", \"paper_weight * #{ @NewspaperCo2}\", \"paper_weight * #{ @Officepaperco2}\") %&gt; \n</code></pre>\n\n<p>The problem is that I'm not sure how to display all Paper types and multiply its weight with separate variable for each paper type.</p>\n\n<p>I'm using chartkick to display the column chart.</p>\n\n<p>There are four paper types, Officepaper, Newspaper, Magazines and Others each paper type has it\u00b4s own variable that have to be multiplied with the paper type weight and the outcome is shown on a column chart.</p>\n\n<p>But if I take out one Item from the code it works, like this:</p>\n\n<pre><code> &lt;%= column_chart current_user.papers.group(:paper_type).group_by_month(:date, format: \"%b, %y\").sum(\"paper_weight * #{ @OtherTypes}\", \"paper_weight * #{ @NewspaperCo2}\") %&gt; \n</code></pre>\n\n<p>And the app displays this chart as it is supposed to do:\n<a href=\"https://i.stack.imgur.com/os2OS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/os2OS.png\" alt=\"enter image description here\"></a><br>\nCan someone please explain to me why I'm getting this error and what to do about it.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "google-app-engine", "google-cloud-platform"], "comments": [{"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1504722838, "post_id": 46082002, "comment_id": 79126041, "body": "Have you tried something like <code>bundle exec rake appengine:exec -- bundle exec rake db:migrate RAILS_ENV=staging</code> ?"}, {"owner": {"reputation": 801, "user_id": 1787439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62001a276cd5da646a0efa14edc4cd1?s=128&d=identicon&r=PG", "display_name": "Mesi Rend&#243;n", "link": "https://stackoverflow.com/users/1787439/mesi-rend%c3%b3n"}, "reply_to_user": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1504722918, "post_id": 46082002, "comment_id": 79126089, "body": "Indeed. I&#39;ve tried all the combinations of that rake task pointing to my new env. But nothing happened."}], "answers": [{"tags": [], "owner": {"reputation": 801, "user_id": 1787439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62001a276cd5da646a0efa14edc4cd1?s=128&d=identicon&r=PG", "display_name": "Mesi Rend&#243;n", "link": "https://stackoverflow.com/users/1787439/mesi-rend%c3%b3n"}, "is_accepted": true, "score": 1, "last_activity_date": 1504730663, "creation_date": 1504730663, "answer_id": 46084055, "question_id": 46082002, "link": "https://stackoverflow.com/questions/46082002/run-ruby-on-rails-migrations-on-specific-google-app-engine-service/46084055#46084055", "title": "Run Ruby on Rails migrations on specific Google App Engine service", "body": "<p>I looked deeper into the <code>appengine</code> gem, and it has an option. It lacks more documentation so you don't have to waste time looking for an answer:</p>\n\n<pre><code>rake appengine:exec GAE_CONFIG=staging.yaml -- bundle exec rake db:migrate\n</code></pre>\n\n<p>The options can work together with <code>GAE_SERVICE</code>, but the yaml file has to have the same name, otherwise you'll get an error.</p>\n"}], "owner": {"reputation": 801, "user_id": 1787439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62001a276cd5da646a0efa14edc4cd1?s=128&d=identicon&r=PG", "display_name": "Mesi Rend&#243;n", "link": "https://stackoverflow.com/users/1787439/mesi-rend%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 1, "accepted_answer_id": 46084055, "answer_count": 1, "score": 1, "last_activity_date": 1504730663, "creation_date": 1504722362, "question_id": 46082002, "link": "https://stackoverflow.com/questions/46082002/run-ruby-on-rails-migrations-on-specific-google-app-engine-service", "title": "Run Ruby on Rails migrations on specific Google App Engine service", "body": "<p>I've been working on a Ruby on Rails API and I'm using Google Cloud Platform, specifically Google App Engine, to deploy my app. I followed the instructions <a href=\"https://cloud.google.com/ruby/rails/using-cloudsql-postgres\" rel=\"nofollow noreferrer\">here</a>. So far so good. My app was successfully deployed and I could successfully run the migrations. Let's call this environment <strong>production</strong>.</p>\n\n<p>The thing is I need to deploy a sort of <strong>staging</strong> environment. For the moment I had to create another project to solve my problem and consider that as my staging environment. Now, I don't think this is necessary, actually seems to be redundant.</p>\n\n<p>I've prepared another database <code>my_app_db_staging</code>. And I created a <code>staging.yaml</code> file stating to run as another instance with the service name <strong>staging</strong>. The service was successfully deployed. Where is the problem? Well, running the migration. I'm using the <code>appengine</code> gem. So, to run the migrations you're supposed to run:</p>\n\n<pre><code>bundle exec rake appengine:exec -- bundle exec rake db:migrate\n</code></pre>\n\n<p>But as the documentation states: </p>\n\n<blockquote>\n  <p>The <code>appengine</code> gem provides the Rake task <code>appengine:exec</code> to run a command against the most recent deployed version of your app <strong><em>in the production App Engine environment</em></strong>.</p>\n</blockquote>\n\n<p>So, no clue on how to run the migrations against my recently created <strong>staging</strong> service.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1504724258, "post_id": 46081990, "comment_id": 79126825, "body": "why is the key coming from javascript? are you trying to make an interactive element for the user to view hash items? like a drop down? also, are you using ruby on rails?"}, {"owner": {"reputation": 67, "user_id": 7211890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13cf30afd2dd3802bd023743647bf6b7?s=128&d=identicon&r=PG&f=1", "display_name": "Valkry", "link": "https://stackoverflow.com/users/7211890/valkry"}, "reply_to_user": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1504724654, "post_id": 46081990, "comment_id": 79127032, "body": "I am indeed using Rails.    This is for an application using datatables.  I&#39;m coloring the row based on a specific column&#39;s value, using a color map passed in from the controller.  This was already answered by another user max pleaner.  I&#39;m not sure why his answer was deleted.  This worked (single quotes were important):   <code>&#39;&lt;%= the_hash.to_json.html_safe %&gt;&#39;</code>"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1504724946, "post_id": 46081990, "comment_id": 79127180, "body": "Ah okay! Not sure why his answer was deleted, but if you&#39;re feeling up to it, you can make your own answer saying what worked, then accept that answer so everyone knows you got it figured out. ^-^"}, {"owner": {"reputation": 67, "user_id": 7211890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13cf30afd2dd3802bd023743647bf6b7?s=128&d=identicon&r=PG&f=1", "display_name": "Valkry", "link": "https://stackoverflow.com/users/7211890/valkry"}, "reply_to_user": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1504725260, "post_id": 46081990, "comment_id": 79127335, "body": "@eiko - done, thanks!"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1504728015, "post_id": 46081990, "comment_id": 79128746, "body": "@Valkry I deleted it since it wasn&#39;t working the way I expected when I tested it ... but glad you figured it out"}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 7211890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13cf30afd2dd3802bd023743647bf6b7?s=128&d=identicon&r=PG&f=1", "display_name": "Valkry", "link": "https://stackoverflow.com/users/7211890/valkry"}, "is_accepted": true, "score": 3, "last_activity_date": 1504725232, "creation_date": 1504725232, "answer_id": 46082748, "question_id": 46081990, "link": "https://stackoverflow.com/questions/46081990/how-do-i-render-a-hash-in-a-view-where-the-key-comes-from-the-page-itself/46082748#46082748", "title": "How do I render a hash in a view where the key comes from the page itself?", "body": "<p>The following worked (single quotes were important):  </p>\n\n<p><code>var some_js_var = JSON.parse('&lt;%= the_hash.to_json.html_safe %&gt;');\nconsole.log(some_js_var[js_hash.js_key]);\n</code></p>\n"}], "owner": {"reputation": 67, "user_id": 7211890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13cf30afd2dd3802bd023743647bf6b7?s=128&d=identicon&r=PG&f=1", "display_name": "Valkry", "link": "https://stackoverflow.com/users/7211890/valkry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 46082748, "answer_count": 1, "score": 0, "last_activity_date": 1504725509, "creation_date": 1504722324, "last_edit_date": 1504725509, "question_id": 46081990, "link": "https://stackoverflow.com/questions/46081990/how-do-i-render-a-hash-in-a-view-where-the-key-comes-from-the-page-itself", "title": "How do I render a hash in a view where the key comes from the page itself?", "body": "<p>More detailed question: How do I render a hash in a view, where the hash is passed from the controller but the key comes from the page via Javascript?</p>\n\n<p>I know I can do something like this <code>&lt;%= hash[\"key\"] %&gt;</code>, but in my case <code>\"key\"</code> is coming from another hash element generated on my page with JS, call it js_hash.js_key.  </p>\n\n<p>I've tried the following to no avail</p>\n\n<p><code>&lt;%= raw hash %&gt;[js_hash.js_key]</code></p>\n\n<p><code>&lt;%= raw hash %&gt;[js_hash[\"js_key\"]]</code></p>\n"}, {"tags": ["ruby", "web-crawler", "mechanize-ruby"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1504720607, "post_id": 46081526, "comment_id": 79124876, "body": "You can use a proxy to access the website so that your IP address stays hidden"}, {"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1504722190, "post_id": 46081526, "comment_id": 79125736, "body": "You can&#39;t scrape Google. The only way to do so is to use pretty large batch of proxies witch will be used in a random order alongside with random user agents. Otherwise you will get reCaptcha very soon, and it&#39;s pretty hard to solve it even using paid captcha solving services.  So I would advice you to change algorithm to operate with the site itself, without google in between if it&#39;s possible."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1504722734, "post_id": 46081526, "comment_id": 79125992, "body": "Have you considered maybe they don&#39;t want you scraping the site?"}, {"owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1504723482, "post_id": 46081526, "comment_id": 79126403, "body": "@Cyzanfar You will need to renew the proxy settings constantly right?"}, {"owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "reply_to_user": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1504724068, "post_id": 46081526, "comment_id": 79126713, "body": "@nattfodd Thanks for the input but it was impossible getting through the site directly and I had to resort to using Google as if I&#39;m using their search engine."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504729217, "post_id": 46081526, "comment_id": 79129345, "body": "Have you considered nothing is blocking you at all and that <code>property_page.css(&quot;div.cols&quot;).css(&quot;td.r_align&quot;)</code> sometimes does not have 5 elements? take this for instance <code>[1,2,3,4][4] #=&gt; nil</code>"}, {"owner": {"reputation": 3962, "user_id": 810899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c2185220765d136c0482aa845c62ea2?s=128&d=identicon&r=PG&f=1", "display_name": "user428517", "link": "https://stackoverflow.com/users/810899/user428517"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1504731160, "post_id": 46081526, "comment_id": 79130308, "body": "@tadman I don&#39;t see how that&#39;s particularly relevant."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3962, "user_id": 810899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c2185220765d136c0482aa845c62ea2?s=128&d=identicon&r=PG&f=1", "display_name": "user428517", "link": "https://stackoverflow.com/users/810899/user428517"}, "edited": false, "score": 1, "creation_date": 1504732484, "post_id": 46081526, "comment_id": 79130890, "body": "@sgroves &quot;Unauthorized use of a computer system&quot; is a very vague term, and yet that sort of thing is <i>extremely illegal</i> in the United States, so I&#39;d hate to be complicit in giving advice here that lead to some kind of prosecution, no matter how likely that is. Don&#39;t think that people haven&#39;t been prosecuted for <a href=\"https://www.wired.com/2013/03/att-hacker-gets-3-years/\" rel=\"nofollow noreferrer\">precisely this thing</a>."}, {"owner": {"reputation": 3962, "user_id": 810899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c2185220765d136c0482aa845c62ea2?s=128&d=identicon&r=PG&f=1", "display_name": "user428517", "link": "https://stackoverflow.com/users/810899/user428517"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1504732624, "post_id": 46081526, "comment_id": 79130942, "body": "@tadman This is a public website, though."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3962, "user_id": 810899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c2185220765d136c0482aa845c62ea2?s=128&d=identicon&r=PG&f=1", "display_name": "user428517", "link": "https://stackoverflow.com/users/810899/user428517"}, "edited": false, "score": 1, "creation_date": 1504732649, "post_id": 46081526, "comment_id": 79130954, "body": "@sgroves They don&#39;t care. I know that sounds insane, but that&#39;s how things are these days. You <i>probably</i> won&#39;t get caught, but if you do, this could be bad news without the right representation."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1504745493, "post_id": 46081526, "comment_id": 79134505, "body": "@tadman while I am inclined to agree that the government can be over zealous. Exploiting a security vulnerability and web scraping otherwise publicly accessible pages are very different acts. There are numerous companies that derive there whole business model from internet accessible data aggregation without prosecution."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1504746570, "post_id": 46081526, "comment_id": 79134729, "body": "@engineersmnky What I mean is the definition of &quot;public&quot; does not always mean what you think it is. If you contravene the &quot;acceptable use policy&quot; you&#39;re in a grey zone."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1508860411, "post_id": 46081526, "comment_id": 80777061, "body": "Did you ever figure this out?"}, {"owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1508952346, "post_id": 46081526, "comment_id": 80824215, "body": "@Brad Werth I had different solutions for different levels of blockage. Having time lapse between, e.g., <code>time 5</code> solved some websites. AWS proxy/ip addresses were being blocked so I purchased 1000 proxy settings and randomly <code>set_proxy</code> each time, but the above propertyshark.com still didn&#39;t work. I was investigating your suggestion to use Selenium, but I got caught w/ having to deliver some data output so i just ended up not using the propertyshark.com for now."}], "answers": [{"comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1504729279, "post_id": 46083671, "comment_id": 79129378, "body": "If you&#39;re going to be doing a lot of this, you might check out <a href=\"https://www.nostarch.com/webbots2\" rel=\"nofollow noreferrer\">nostarch.com/webbots2</a>. It does a pretty good job of covering many of the issues you are running into. (But I would just subscribe to some 3rd aprty API creation site and be done with this project..)"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504729794, "post_id": 46083671, "comment_id": 79129622, "body": "@engineersmnky I do not believe this is an issue of getting one page. I believe this is a concentrated effort to scrape the entire contents of the site, likely on some kind of recurring schedule."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504731199, "post_id": 46083671, "comment_id": 79130328, "body": "Yes, google does ask for permission, indirectly. It is super obvious, fully honors robots.txt directives, and uses an easily-identifiable user agent. Most people want it to consume their sites, those that do not have an easy remedy against it. The selector could be missing from a &quot;Server down&quot;, &quot;Rate limited&quot;, &quot;Cloudflre protected&quot;, etc. page, in addition to (as you suppose) misshappen data. The legal advice, as well as the mention of an API or product feed was only meant to illustrate that there may be simpler ways to solve this problem (or reasons not to) that the OP may not be aware of."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504731221, "post_id": 46083671, "comment_id": 79130344, "body": "From <a href=\"https://support.google.com/webmasters/answer/7424835?hl=en\" rel=\"nofollow noreferrer\">support.google.com/webmasters/answer/7424835?hl=en</a> &quot;When Googlebot visits a website, we first ask for permission to crawl by attempting to retrieve the robots.txt file&quot;"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1504731690, "post_id": 46083671, "comment_id": 79130542, "body": "Yeah, it sounds insane. Then again, it is a public server... That&#39;s why the trespass chattels stuff seems insane to me, too, sortof, but then how do you draw the line between Josh and his spider and a legit DOS attack..."}], "tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": false, "score": 4, "last_activity_date": 1504729548, "last_edit_date": 1504729548, "creation_date": 1504728980, "answer_id": 46083671, "question_id": 46081526, "link": "https://stackoverflow.com/questions/46081526/how-to-avoid-getting-blocked-by-websites-when-using-ruby-mechanize-for-web-crawl/46083671#46083671", "title": "How to avoid getting blocked by websites when using Ruby Mechanize for web crawling", "body": "<p>The first thing you should do, before you do anything else, is to contact the website owner(s). Right now, you actions could be interpreted anywhere between overly aggressive and <a href=\"https://ilt.eff.org/index.php/Trespass_to_Chattels#Scraping_Websites\" rel=\"nofollow noreferrer\">illegal</a>. As others have pointed out, the owners may not want you scraping the site. Alternatively, they may have an API or product feed available for this particular thing. Either way, if you are going to be depending on this website for your product, you may want to consider playing nice with them. </p>\n\n<p>With that being said, you are moving through their website with all of the grace of an elephant in a china store. Between the abnormal user agent, unusual usage patterns from a single IP, and a predictable delay between requests, you've completely blown your cover. Consider taking a more organic path through the site, with a more natural human-emulation delay. Also, you should either disguise your useragent, or make it super obvious (Josh's Big Bad Scraper). You may even consider using something like Selenium, which uses a real browser, instead of Mechanize, to give away fewer hints.</p>\n\n<p>You may also consider adding more robust error handling. Perhaps the site is under excessive load (or something), and the page you are parsing is not the desired page, but some random error page. A simple retry may be all you need to get that data in question. When scraping, a poorly-functioning or inefficient site can be as much of an impediment as deliberate scraping protections. </p>\n\n<p>If none of that works, you could consider setting up elaborate arrays of proxies, but at that point you would be much better of using one of the many online Webscraping/API creating/Data extraction services that currently exist. They are fairly inexpensive and already do everything discussed above, plus more.</p>\n"}, {"comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1504731882, "post_id": 46083911, "comment_id": 79130630, "body": "+1 this is almost certainly the literal issue with the code. The OP does not make it clear if the data is simply misshapen for that page or missing entirely due to a temporarily unavailable page. If it is more than a different data structure for one page, please refer to <a href=\"https://stackoverflow.com/a/46083671/525478\">stackoverflow.com/a/46083671/525478</a>"}, {"owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1504795967, "post_id": 46083911, "comment_id": 79161108, "body": "@BradWerth I actually do a count of the elements and do a loop around the count so that I don&#39;t end up with the issue you had raised. Thanks."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "edited": false, "score": 0, "creation_date": 1504800179, "post_id": 46083911, "comment_id": 79164062, "body": "@Josh I wonder if you meant to add this comment to my answer? I&#39;m not sure I&#39;m understanding you... Judging by the code you posted, it looks like you are just clicking every link on the page, with no delay. Anyway, I feel like I&#39;ve spent an inordinate amount of time on this question, and really have no more to provide. Good luck getting it all sorted out!"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1504730546, "last_edit_date": 1504730546, "creation_date": 1504730092, "answer_id": 46083911, "question_id": 46081526, "link": "https://stackoverflow.com/questions/46081526/how-to-avoid-getting-blocked-by-websites-when-using-ruby-mechanize-for-web-crawl/46083911#46083911", "title": "How to avoid getting blocked by websites when using Ruby Mechanize for web crawling", "body": "<p>It is very likely nothing is \"blocking\" you. As you pointed out </p>\n\n<pre><code>property_page.css(\"div.cols\").css(\"td.r_align\")[4].text\n</code></pre>\n\n<p>is the problem. So lets focus on that line of code for a second.</p>\n\n<p>Say the first time round your columns are <code>columns = [1,2,3,4,5]</code> well then <code>rows[4]</code> will return <code>5</code> (the element at index 4). </p>\n\n<p>No for fun let's assume the next go around your columns are <code>columns = ['a','b','c','d']</code> well then <code>rows[4]</code> will return <code>nil</code> because there is nothing at the fourth index. </p>\n\n<p>This appears to be your case where sometimes there are 5 columns and sometimes there are not. Thus leading to <code>nil.text</code> and the error you are recieving</p>\n"}], "owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1504800966, "creation_date": 1504720462, "last_edit_date": 1504800966, "question_id": 46081526, "link": "https://stackoverflow.com/questions/46081526/how-to-avoid-getting-blocked-by-websites-when-using-ruby-mechanize-for-web-crawl", "title": "How to avoid getting blocked by websites when using Ruby Mechanize for web crawling", "body": "<p>I am successful scraping building data from a website (www.propertyshark.com) using a single address, but it looks like I get blocked once I use loop to scrape multiple addresses. Is there a way around this? FYI, the information I'm trying to access is not prohibited according to their <strong>robots.txt</strong>.</p>\n\n<p>Codes for single run is as follows:</p>\n\n<pre><code>require 'mechanize'\n\nclass PropShark\n  def initialize(key,link_key)\n    @@key = key\n    @@link_key = link_key\n  end\n\n  def crawl_propshark_single\n    agent = Mechanize.new{ |agent|\n      agent.user_agent_alias = 'Mac Safari'\n    }\n    agent.ignore_bad_chunking = true\n    agent.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\n    page = agent.get('https://www.google.com/')\n    form = page.forms.first\n    form['q'] = \"#{@@key}\"\n    page = agent.submit(form)\n    page = form.submit  \n    page.links.each do |link|\n      if link.text.include?(\"#{@@link_key}\")  \n        if link.text.include?(\"PropertyShark\")\n          property_page = link.click\n        else\n          next\n        end\n\n        if property_page\n          data_value = property_page.css(\"div.cols\").css(\"td.r_align\")[4].text # &lt;--- error points to these commands\n          data_name = property_page.css(\"div.cols\").css(\"th\")[4].text\n          @result_hash[\"#{data_name}\"] = data_value\n        else\n          next\n        end\n      end \n    end\n\n    return @result_hash\n  end\nend #endof: class PropShark\n\n# run\nkey = '41 coral St, Worcester, MA 01604 propertyshark'\nkey_link = '41 Coral Street'\nspider = PropShark.new(key,key_link)\nputs spider.crawl_propshark_single\n</code></pre>\n\n<p>I get the following errors but in an hour or two the error disappears:</p>\n\n<pre><code>undefined method `text' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>When I use a loop using the above codes, I delay the process by having <code>sleep 80</code> between addresses.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "elasticsearch"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1504722384, "post_id": 46081467, "comment_id": 79125834, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34907078/elasticsearch-rails-illegal-latitude-value\">elasticsearch rails - illegal latitude value</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1504723268, "post_id": 46081467, "comment_id": 79126295, "body": "apparently only the range -90..90 is allowed for latitude."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12175789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011f43cc562c7bd1a2e67228b2717da?s=128&d=identicon&r=PG&f=1", "display_name": "Akash prajapati", "link": "https://stackoverflow.com/users/12175789/akash-prajapati"}, "is_accepted": false, "score": 0, "last_activity_date": 1570440838, "creation_date": 1570440838, "answer_id": 58266890, "question_id": 46081467, "link": "https://stackoverflow.com/questions/46081467/rails-elasticsearchtransporttransporterrorsbadrequest-in-searchsearch/58266890#58266890", "title": "Rails: Elasticsearch::Transport::Transport::Errors::BadRequest in Search#search", "body": "<p>try \non rails console \nModelName.reindex</p>\n\n<p>Model from which you are filtering out the result . like Book </p>\n\n<p>so\nBook.reindex</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1049, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570440838, "creation_date": 1504720238, "question_id": 46081467, "link": "https://stackoverflow.com/questions/46081467/rails-elasticsearchtransporttransporterrorsbadrequest-in-searchsearch", "title": "Rails: Elasticsearch::Transport::Transport::Errors::BadRequest in Search#search", "body": "<p>I'm using the <code>elasticsearch gem</code> on my rails app. I'm trying to implement a basic search and sort the results by the distance from the current location. But I'm getting the following error when trying to search: </p>\n\n<pre><code>[400] {\"error\":{\"root_cause\":[{\"type\":\"parse_exception\",\"reason\":\"illegal latitude value [269.99999983236194] for [GeoDistanceSort] for field [distance_type].\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\"items\",\"node\":\"AfyW4Pa4S-qKhua-3lY4rg\",\"reason\":{\"type\":\"parse_exception\",\"reason\":\"illegal latitude value [269.99999983236194] for [GeoDistanceSort] for field [distance_type].\"}}]},\"status\":400}\n</code></pre>\n\n<p>I have created a <code>search_controller</code> with the following methods:</p>\n\n<pre><code>class SearchController &lt; ApplicationController\n\n  def show\n    @items = Item.search(query).records.to_a\n  end\n\n  def search\n    if params[:q].nil?\n      @items = []\n    else\n      @items = Item.search params[:q]\n    end\n  end\nend\n</code></pre>\n\n<p>and I also add the <code>elasticsearch</code> <code>mapping</code> and <code>indexes</code> in the <code>item.rb</code> model:</p>\n\n<pre><code>require 'elasticsearch/model'\n\nclass Item &lt; ApplicationRecord\n\n  include Elasticsearch::Model\n  include Elasticsearch::Model::Callbacks\n  include Elasticsearch::Model::Indexing\n\n   settings index: { number_of_shards: 1 } do\n     mappings dynamic: 'false' do\n      indexes :title, analyzer: 'english', index_options: 'offsets'\n      indexes :description, analyzer: 'english'\n      indexes :location, type: 'geo_point'\n    end\n  end\n\n  def location\n    [longitude.to_f, latitude.to_f]\n  end\n\n  def current_location\n    location = request.location\n  end\n\n\n  def self.search(query)\n    __elasticsearch__.search(\n        {\n            query: {\n                multi_match: {\n                    query: query,\n                    fields: ['title^10', 'description', 'distance']\n                }\n            },\n            sort: [\n                {\n                    _geo_distance: {\n                        \"pin.location\": [\"current_location\"],\n                        distance: [\"radius\"],\n                        unit: [\"km\"],\n                        mode: [\"min\"],\n                        order: [\"asc\"],\n                        distance_type: [\"arc\"],\n\n                     }\n                }\n            ],\n\n            highlight: {\n                pre_tags: ['&lt;em&gt;'],\n                post_tags: ['&lt;/em&gt;'],\n                fields: {\n                    title: {},\n                    description: {},\n                 }\n             }\n        }\n    )\n  end\n end\nItem.__elasticsearch__.client.indices.delete index: Item.index_name rescue nil\n\nItem.__elasticsearch__.client.indices.create \\\nindex: Item.index_name,\nbody: { settings: Item.settings.to_hash, mappings: Item.mappings.to_hash }\n\nItem.import(force: true)\n</code></pre>\n\n<p>and finally , this is my view <code>search.html.erb</code></p>\n\n<pre><code>&lt;%= form_for search_path, method: :get do |f| %&gt;\n    &lt;p&gt;\n      &lt;%= f.label \"Search for\" %&gt;\n      &lt;%= text_field_tag :q, params[:q] %&gt;\n      &lt;%= submit_tag \"Nearby\", name: nil %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n\n&lt;ul&gt;\n  &lt;% @items.each do |item| %&gt;\n      &lt;li&gt;\n        &lt;h3&gt;\n          &lt;%= link_to item.try(:highlight).try(:title) ? item.highlight.title[0].html_safe : item.title,\n                  controller: \"search\",\n                  action: \"show\",\n                  id: item._id%&gt;\n        &lt;/h3&gt;\n        &lt;% if item.try(:highlight).try(:description) %&gt;\n            &lt;% item.highlight.description.each do |snippet| %&gt;\n                &lt;p&gt;&lt;%= snippet.html_safe %&gt;...&lt;/p&gt;\n            &lt;% end %&gt;\n        &lt;% end %&gt;\n      &lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1504726605, "post_id": 46081076, "comment_id": 79128028, "body": "Is the page reloaded after the post call happens?"}, {"owner": {"reputation": 1155, "user_id": 4983469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-btlwMISgi2c/AAAAAAAAAAI/AAAAAAAAAKs/L041fOZBcY0/photo.jpg?sz=128", "display_name": "leoOrion", "link": "https://stackoverflow.com/users/4983469/leoorion"}, "reply_to_user": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1504728164, "post_id": 46081076, "comment_id": 79128815, "body": "Yes it is. In case of successful post, it redirects to another tab. In case of failure, it displays a error message on the same tab"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1504728474, "post_id": 46081076, "comment_id": 79128975, "body": "You can prevent the user from clicking in your <code>$(&#39;#upload-button&#39;).on(&#39;click&#39;, function () {...}</code> callback. When the page reloads, the restriction will disappear by itself."}, {"owner": {"reputation": 1155, "user_id": 4983469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-btlwMISgi2c/AAAAAAAAAAI/AAAAAAAAAKs/L041fOZBcY0/photo.jpg?sz=128", "display_name": "leoOrion", "link": "https://stackoverflow.com/users/4983469/leoorion"}, "reply_to_user": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1504752079, "post_id": 46081076, "comment_id": 79136073, "body": "thanks. I have added the final solution as an answer also."}], "answers": [{"tags": [], "owner": {"reputation": 1155, "user_id": 4983469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-btlwMISgi2c/AAAAAAAAAAI/AAAAAAAAAKs/L041fOZBcY0/photo.jpg?sz=128", "display_name": "leoOrion", "link": "https://stackoverflow.com/users/4983469/leoorion"}, "is_accepted": true, "score": 0, "last_activity_date": 1504752144, "creation_date": 1504752144, "answer_id": 46087032, "question_id": 46081076, "link": "https://stackoverflow.com/questions/46081076/preventing-user-from-moving-between-rendered-tabs-during-post-call/46087032#46087032", "title": "Preventing user from moving between rendered tabs during post call", "body": "<p>I solved it using @chumakoff suggestion. I gave each of the tabs a class and on submit prevented clinking on them. After reload the behavior goes back to default.</p>\n\n<pre><code>$('#upload-button').on('click', function () {\n    if ($('#json_file').val()) {\n        preventNavigation();  \n        $('#myform').submit();\n    }\n});\n\nfunction preventNavigation() {\n        $(\".tab\").on('click', function(){\n            alert(\"Please wait till the upload is complete\");\n            return false;\n        });\n}\n</code></pre>\n\n<p>This results in the user getting an alert message when he clicks on the tabs during the post call thus preventing him from navigating away.</p>\n"}], "owner": {"reputation": 1155, "user_id": 4983469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-btlwMISgi2c/AAAAAAAAAAI/AAAAAAAAAKs/L041fOZBcY0/photo.jpg?sz=128", "display_name": "leoOrion", "link": "https://stackoverflow.com/users/4983469/leoorion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 46087032, "answer_count": 1, "score": 0, "last_activity_date": 1504752144, "creation_date": 1504718621, "question_id": 46081076, "link": "https://stackoverflow.com/questions/46081076/preventing-user-from-moving-between-rendered-tabs-during-post-call", "title": "Preventing user from moving between rendered tabs during post call", "body": "<p>I have a page with various tabs. Under one tab is a functionality to upload a json file. This upload is done using a form tag.     </p>\n\n<p>tab4.html.erb:</p>\n\n\n\n<pre><code>    &lt;%= form_tag({action: :add}, multipart: true, id: 'myform') do %&gt;\n        &lt;%= file_field_tag 'json_file' %&gt;\n    &lt;% end %&gt;\n    &lt;button id=\"upload-button\"&gt;UPLOAD&lt;/button&gt;\n</code></pre>\n\n<p>On submit of the form tag, I call a function in the controller via the routes.rb resources and jquery.</p>\n\n<p>Routes.rb:</p>\n\n<pre><code>resources :controller do\n    collection do\n      post 'add'\n    end\n  end\n</code></pre>\n\n<p>Jquery submit form:</p>\n\n<pre><code>$('#upload-button').on('click', function () {\n        if ($('#json_file').val()) {\n            $('#myform').submit();\n        }\n    });\n</code></pre>\n\n<p>controller.rb:</p>\n\n<pre><code>def add\n    file = params[:json_file]\n    file_content = file.read\n    json_content = JSON.parse(file_content, symbolize_names: true)\n    begin\n      // post call\n      redirect_to :some_other_page\n    rescue \n      // post call fails with exception\n      redirect_to // same page with a param to show failure\n    end\n  end\n</code></pre>\n\n<p>This function sends the content of json file in a post body to another service. </p>\n\n<p>When this post call is happening, I want to prevent the user from switching between the other tabs available to him in the ruby on rails app? Is there a way to achieve this? </p>\n\n<p>I thought of using an ajax call on the form submit, show an overlay with a spinner, then call the <code>add</code> function in the controller and until completion prevent the user from clicking anywhere. </p>\n\n<p>Is there a better solution to achieve this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1504729564, "post_id": 46081073, "comment_id": 79129505, "body": "Note <code>method</code> is an existing method, you are (probably unwillingly) overriding it."}, {"owner": {"reputation": 713, "user_id": 5648840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be04e1b63b846039df362ee78fde9ada?s=128&d=identicon&r=PG&f=1", "display_name": "tkhuynh", "link": "https://stackoverflow.com/users/5648840/tkhuynh"}, "edited": false, "score": 0, "creation_date": 1504752064, "post_id": 46081073, "comment_id": 79136067, "body": "FYI, when you write a method, even though it&#39;s just a sample method to add the question. You should try to write it correctly. Both methods above would have <code>undefined</code> error. Look at your code again, you will know."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8518596, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ae6e753c58a8469c11e87444002683ae?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas james", "link": "https://stackoverflow.com/users/8518596/nicholas-james"}, "edited": false, "score": 0, "creation_date": 1504721594, "post_id": 46081133, "comment_id": 79125405, "body": "Thanks you so much"}], "tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": true, "score": 4, "last_activity_date": 1504787546, "last_edit_date": 1504787546, "creation_date": 1504718861, "answer_id": 46081133, "question_id": 46081073, "link": "https://stackoverflow.com/questions/46081073/ruby-return-true-or-false-based-on-condition-inside-method/46081133#46081133", "title": "ruby: return true or false based on condition inside method", "body": "<p>You want something like this:</p>\n\n<pre><code>def method_name\n  total_value &lt; item_value\nend\n</code></pre>\n\n<p>Ruby will always return the value of the last evaluated statement in the function.</p>\n"}], "owner": {"reputation": 115, "user_id": 8518596, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ae6e753c58a8469c11e87444002683ae?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas james", "link": "https://stackoverflow.com/users/8518596/nicholas-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2528, "favorite_count": 0, "accepted_answer_id": 46081133, "answer_count": 1, "score": 0, "last_activity_date": 1504787546, "creation_date": 1504718611, "question_id": 46081073, "link": "https://stackoverflow.com/questions/46081073/ruby-return-true-or-false-based-on-condition-inside-method", "title": "ruby: return true or false based on condition inside method", "body": "<p>I created following method to return true or false</p>\n\n<pre><code>def method\n  total_value = some_value\n  item_value = item_value\n  return true if total_value &lt; item_value\nend\n</code></pre>\n\n<p>I tried to put return true but only works when its true.</p>\n\n<p>It returns true if <code>total_value &lt; item_value</code> but returns null if its not true.</p>\n\n<p>I also tried with if else and it works but is this the best way?</p>\n\n<pre><code>def method\n   total_value = some_value\n   item_value = item_value\n  if total_value &lt; item_value\n    true\n  else\n    false\n  end\nend\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8270, "user_id": 419448, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2639d859b86a83559ed2fcbd12163267?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/419448/prasanna"}, "edited": false, "score": 0, "creation_date": 1504718708, "post_id": 46080933, "comment_id": 79123801, "body": "Is action_button a custom plugin?"}, {"owner": {"reputation": 25, "user_id": 5997849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aebaabc782a503c7e00f133e56064450?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/5997849/dan"}, "reply_to_user": {"reputation": 8270, "user_id": 419448, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2639d859b86a83559ed2fcbd12163267?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/419448/prasanna"}, "edited": false, "score": 0, "creation_date": 1504777898, "post_id": 46080933, "comment_id": 79148060, "body": "Yes, it is. <a href=\"https://github.com/brianjlandau/action_button\" rel=\"nofollow noreferrer\">github.com/brianjlandau/action_button</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8270, "user_id": 419448, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2639d859b86a83559ed2fcbd12163267?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/419448/prasanna"}, "is_accepted": false, "score": 0, "last_activity_date": 1504874693, "creation_date": 1504874693, "answer_id": 46116899, "question_id": 46080933, "link": "https://stackoverflow.com/questions/46080933/disable-a-button-while-using-action-button-in-rails/46116899#46116899", "title": "Disable a button while using action_button in rails", "body": "<p>I am not sure about this plugin. However, I see a typo in your code. </p>\n\n<p>You had mentioned <code>:disabled: true</code> it should be <code>:disabled =&gt; true</code> or <code>disabled: true</code></p>\n\n<p>Here is the fixed version</p>\n\n<pre><code>&lt;div class=\"column-2\"&gt;\n&lt;% if action? %&gt;\n &lt;%= action_button :secondary, \n     I18nt(\"btn_amend\"),\n     {:id =&gt; 'amend_staging_date',\n      :class =&gt; \"\",\n      :disabled =&gt; true } %&gt;\n &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5997849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aebaabc782a503c7e00f133e56064450?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/5997849/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504874693, "creation_date": 1504717976, "question_id": 46080933, "link": "https://stackoverflow.com/questions/46080933/disable-a-button-while-using-action-button-in-rails", "title": "Disable a button while using action_button in rails", "body": "<p>I am trying to add a html <em>disable</em> attribute while using action_button, in rails view,  something similar to this :</p>\n\n<pre><code>&lt;div class=\"column-2\"&gt;\n   &lt;% if action? %&gt;\n     &lt;%= action_button :secondary, \n         I18nt(\"btn_amend\"),\n         {:id =&gt; 'amend_staging_date',\n          :class =&gt; \"\",\n          :disabled: true } %&gt;\n     &lt;% end %&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>Even after adding the <em>disabled</em> attribute, the button is still not disabled.</p>\n"}, {"tags": ["ruby", "loops", "rspec", "tdd", "test-coverage"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505759698, "post_id": 46080508, "comment_id": 79535149, "body": "Ruby rarely, if ever, uses actual <code>for</code> loops. What&#39;s typically done here is <code>(1..10).each do |i|</code> or <code>10.times do |i|</code> depending on how you want things offset."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1505761089, "post_id": 46286363, "comment_id": 79535830, "body": "I literally just finished typing that up on the other post."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1505761150, "post_id": 46286363, "comment_id": 79535858, "body": "Yeah, I wasn&#39;t super sure which to respond to. But the other question didn&#39;t seem to have enough context."}, {"owner": {"reputation": 21, "user_id": 7763873, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/573bb3a445a93685de86205cc1b987e2?s=128&d=identicon&r=PG&f=1", "display_name": "TheLemonSong", "link": "https://stackoverflow.com/users/7763873/thelemonsong"}, "edited": false, "score": 0, "creation_date": 1505829130, "post_id": 46286363, "comment_id": 79567024, "body": "Hi @Max , good solution, thanks for you help, what you say makes sense. With regards the other question, I only put it up as I got no responses to this one, and thought maybe if I asked the question in a more generic way it may garner more interest, did mean to be a pain;) Thanks again:)"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1505829676, "post_id": 46286363, "comment_id": 79567423, "body": "Clicking that green check mark is all the thanks I need. ;)"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1505829573, "last_edit_date": 1505829573, "creation_date": 1505761025, "answer_id": 46286363, "question_id": 46080508, "link": "https://stackoverflow.com/questions/46080508/passing-index-loop-vars-to-objects-in-ruby-with-tdd/46286363#46286363", "title": "Passing Index Loop Vars To Objects in Ruby with TDD", "body": "<p>Essentially all of the fancy testing methods like <code>describe</code>, <code>context</code>, <code>it</code> are just ways of defining testing methods. Rspec then calls these testing methods when it actually runs its tests. So it doesn't really make sense to be calling them inside a loop like that, because you're dynamically defining tests (when it definitely isn't needed in your case). Instead you should get rid of the loop, and define all of your expectations within those test cases. For example:</p>\n\n<pre><code>describe(Game) do\n  subject { Game.new(5) }\n  describe '#guess' do\n    context 'when guessing a number that is lower than the secret number ' do\n      it 'returns the symbol :lower' do\n        (1..4).each { |val| expect(subject.guess(val)).to eq(:lower) }\n      end\n    end\n\n    context 'when guessing a number that is the SAME as the secret number ' do\n      it 'returns the symbol :found_secret_number' do\n        expect(subject.guess(5)).to eq(:found_secret_number)\n      end\n    end\n\n    context 'when guessing a number that is higher than the secret number ' do\n      it 'returns the symbol :greater' do\n        (6..10).each { |val| expect(subject.guess(val)).to eq(:greater) }\n     end\n    end\n  end\nend\n</code></pre>\n\n<p>Then when I run that file with rspec, I get</p>\n\n<pre><code>...\n\nFinished in 0.02421 seconds (files took 0.26321 seconds to load)\n3 examples, 0 failures\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7763873, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/573bb3a445a93685de86205cc1b987e2?s=128&d=identicon&r=PG&f=1", "display_name": "TheLemonSong", "link": "https://stackoverflow.com/users/7763873/thelemonsong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 46286363, "answer_count": 1, "score": 0, "last_activity_date": 1505829573, "creation_date": 1504716373, "last_edit_date": 1504717292, "question_id": 46080508, "link": "https://stackoverflow.com/questions/46080508/passing-index-loop-vars-to-objects-in-ruby-with-tdd", "title": "Passing Index Loop Vars To Objects in Ruby with TDD", "body": "<p>I'm trying to get a very simple set of tests done in TDD and Ruby.</p>\n\n<p>The problem I'm having is in trying to pass a range of values from the test to the object being tested.</p>\n\n<p>The aim of the code is to guess the correct 'secret number' by sending the object a range of 'guess' values iteratively via a for-loop, the values being in the range of 1 to 10. </p>\n\n<p>The test should confirm the following...</p>\n\n<ol>\n<li><p>When the 'guess' value is less than 5 (5 is a fixed value set for the 'secret number), the object should return a symbol of ':less'.</p></li>\n<li><p>When the 'guess' value is equal to 5 the object should return a symbol of ':found_secret_number'.</p></li>\n<li><p>When the 'guess' value is greater than 5 the object should return a symbol of ':greater'.</p></li>\n</ol>\n\n<p>I find that whilst the loop does cycle through and generate the required values, the loop only assigns the final loop value generated to each test (that value being 10). I guess the test creates all of the tests within the loop then assigns whatever value is set at for the lop variable at the end (if you have a quick look at the code it may make more sense...).</p>\n\n<p>The test works with static variables being assigned to the objects, so the class is good from a functional perspective, but I don't want 100% line coverage (e.g. 'guess' values of 3, 5 and 7), but want 100% value coverage (e.g. 1,2,3,4,5,6,7,8,9 and 10).</p>\n\n<p>I've played and tinkered with the code but can't find a  way to assign the range of values I'm looking for (1..10), without having to write 10 static cases for the value coverage, so does anyone have a suggestion of how to do this without the use of ten static cases?:)</p>\n\n<p>I'm still learning by the way, so if you could keep any answers as simple as possible it would help;) Likewise, me explaining the problem helps you to understand it, any feedback on how I could have explained the problem better would be really appreciated; comms, as I'm sure you all know, is very important, and I'm trying to improve this too.</p>\n\n<p>Thanks!:)</p>\n\n<pre><code>require 'rspec'\n\nclass Game\n\n  def initialize(secret_number)\n    @secret_number = secret_number\n  end\n\n  def guess(number)\n    if (number &lt; @secret_number)\n      :lower\n    elsif\n      (number &gt; @secret_number)\n      puts (\"number is: \" + number.to_s)\n\n      :greater\n    elsif (number == @secret_number)\n      :found_secret_number\n    end\n  end\nend\n\n# 'describe' is a method, that is passed a 'Game' class,\n# it's not normally written like this but I've just shown it this\n# way, in this case, to affirm its just plain old Ruby.\ndescribe(Game) do\n  subject { Game.new(5) }\n  describe '#guess' do\n    for i in 1..10\n      if (i &lt; 5)\n        puts (\"i is less than 5, it is: \" + i.to_s)\n        context 'when guessing a number that is lower than the secret number ' do\n          it 'returns the symbol :lower' do\n            expect(subject.guess(val)).to eq(:lower)\n          end\n        end\n\n      elsif (i == 5)\n        puts (\"i is equal to 5, it is: \" + i.to_s)\n        context 'when guessing a number that is the SAME as the secret number ' do\n          it 'returns the symbol :found_secret_number' do\n            expect(subject.guess(val)).to eq(:found_secret_number)\n          end\n        end\n\n      elsif (i &gt; 5)\n        puts (\"i is greater than 5, it is: \" + i.to_s)\n        context 'when guessing a number that is higher than the secret number ' do\n          it 'returns the symbol :greater' do\n            expect(subject.guess(val)).to eq(:greater)\n            end\n         end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "yaml", "middleman"], "answers": [{"comments": [{"owner": {"reputation": 569, "user_id": 7355534, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1rWLC.jpg?s=128&g=1", "display_name": "Bastien Robert", "link": "https://stackoverflow.com/users/7355534/bastien-robert"}, "edited": false, "score": 0, "creation_date": 1504737413, "post_id": 46081999, "comment_id": 79132649, "body": "Thanks, I forgot to precise why I wan&#39;t multiple strings. I&#39;ve just add it (edit 2). So join method to get one big string doesn&#39;t work anymore."}], "tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": false, "score": 1, "last_activity_date": 1504722344, "creation_date": 1504722344, "answer_id": 46081999, "question_id": 46080210, "link": "https://stackoverflow.com/questions/46080210/middleman-frontmatter-yaml-list/46081999#46081999", "title": "Middleman Frontmatter YAML list", "body": "<p>Because your helper is returning an array not a interpolated string like the ERB template is doing. Try the following for your helper:</p>\n\n<pre><code>def translate_directory\n  current_page.data.dir.join(' ')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 569, "user_id": 7355534, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1rWLC.jpg?s=128&g=1", "display_name": "Bastien Robert", "link": "https://stackoverflow.com/users/7355534/bastien-robert"}, "is_accepted": true, "score": 0, "last_activity_date": 1504738059, "creation_date": 1504738059, "answer_id": 46085392, "question_id": 46080210, "link": "https://stackoverflow.com/questions/46080210/middleman-frontmatter-yaml-list/46085392#46085392", "title": "Middleman Frontmatter YAML list", "body": "<p>My bad. Using .map instead of .each fix the problem, then use .join makes the array a big string.</p>\n"}], "owner": {"reputation": 569, "user_id": 7355534, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1rWLC.jpg?s=128&g=1", "display_name": "Bastien Robert", "link": "https://stackoverflow.com/users/7355534/bastien-robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 46085392, "answer_count": 2, "score": 0, "last_activity_date": 1504738059, "creation_date": 1504715255, "last_edit_date": 1504736972, "question_id": 46080210, "link": "https://stackoverflow.com/questions/46080210/middleman-frontmatter-yaml-list", "title": "Middleman Frontmatter YAML list", "body": "<p>I just want to make a simple each loop in my Middleman helper, datas are stored in my page'Frontmatter like this :</p>\n\n<pre><code>dir:\n  - test\n  - test2\n</code></pre>\n\n<p>So in my helper, I try to write my loop :</p>\n\n<pre><code>def translate_directory\n  current_page.data.dir.each do |dir|\n    dir\n  end\nend\n</code></pre>\n\n<p>call my method in my page</p>\n\n<pre><code>&lt;%= translate_directory %&gt;\n</code></pre>\n\n<p>and this is what's display :</p>\n\n<pre><code>[\"test\", \"test2\"]\n</code></pre>\n\n<hr>\n\n<p>But now, if I make the same loop in my page, write with ERB syntax :</p>\n\n<pre><code>&lt;% current_page.data.dir.each do |x| %&gt;\n  &lt;%= x %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>the exit is the following </p>\n\n<pre><code>test test2\n</code></pre>\n\n<p>separated in two strings, so exactly what I want.</p>\n\n<hr>\n\n<p><strong>EDIT :</strong> when I <code>puts</code> the helper'method, it display the two strings in two lines, so in two separated strings. Don't understand why it appear as an array on my browser.</p>\n\n<hr>\n\n<p><strong>EDIT 2 :</strong> a little thing I forgot, I want to translate each word with I18n.translate, like this :</p>\n\n<pre><code>def path_translate\n  current_page.data.dir.each { |dir| t(\"paths.#{dir}\", locale: lang) }\nend\n</code></pre>\n\n<p>but i can't because the each method doesn't work so I18n can't translate each word.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1504713762, "post_id": 46079742, "comment_id": 79120890, "body": "You can use <code>Category.group(:name).pluck(:name).join(&#39; &#39;)</code> =&gt; <code>Category.group(:name).pluck(:name)</code> will return an array of the different unique names existing in your DB (no duplicates). Then <code>join(&#39; &#39;)</code> will just call <code>to_s</code> on each array&#39;s element and then <code>join</code> them with a white space."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504713992, "post_id": 46079742, "comment_id": 79121044, "body": "Your view should just display the information, it should not retrieve it. That&#39;s what controllers are for."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1504714809, "post_id": 46079846, "comment_id": 79121537, "body": "Nitpicking, but I&#39;d put the <code>.join(&#39; &#39;)</code> part into the view."}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504714935, "post_id": 46079846, "comment_id": 79121616, "body": "@Stefan agreed :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1504715331, "post_id": 46079846, "comment_id": 79121868, "body": "It&#39;s worth mentioning that <code>Category.all</code> loads in every single category as a fully fleshed out model. Calling <code>Category.all.map(&amp;:name)</code> takes those models cherry-picks one little thing, and throws the rest in the garbage. <code>pluck</code> side-steps all of this and can be orders of magnitude more efficient because of it."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504716246, "post_id": 46079846, "comment_id": 79122412, "body": "Yes. Basically, pluck will make the query by selecting specific column(s) and will only that much in memory. <code>SELECT name from categories</code>. The overhead of loading all fields is massive when you have big table or lot of columns."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504716643, "post_id": 46079846, "comment_id": 79122649, "body": "It&#39;s not just the additional fields, <code>pluck</code> doesn&#39;t instantiate the models."}], "tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": false, "score": 2, "last_activity_date": 1504714953, "last_edit_date": 1504714953, "creation_date": 1504714032, "answer_id": 46079846, "question_id": 46079742, "link": "https://stackoverflow.com/questions/46079742/how-to-get-all-of-the-names-from-a-specific-model/46079846#46079846", "title": "How to get all of the names from a specific Model", "body": "<p>If you want to get all the value of the <code>name</code> attribute for each category do this:</p>\n\n<pre><code>Category.pluck(:name) #=&gt; ['name1', 'name2',..., 'name10']\n</code></pre>\n\n<p>From what you wrote you'd like the names to be spaced out like this \"name1 name2 name3\". Then just join the names with a space between each of them:</p>\n\n<pre><code>Category.pluck(:name).join(' ') #=&gt; name1 name2 ... name10\n</code></pre>\n\n<p>@Stefan makes a valid point. It is considered bad practice to have logic such as <code>Category.all</code> in the view layer. Rather, you should put that logic in your controller action that is responsible for rendering the particular template (view).</p>\n\n<p>i.e:</p>\n\n<p><em>in controller</em></p>\n\n<pre><code>def works\n @category_names = Category.pluck(:name)\nend\n</code></pre>\n\n<p><em>in view</em></p>\n\n<pre><code>&lt;span class=\"filter active\" data-filter=\"&lt;%= @category_names.join(' ') %&gt;\"&gt;Todos&lt;/span&gt;\n</code></pre>\n"}], "owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1504714953, "creation_date": 1504713665, "question_id": 46079742, "link": "https://stackoverflow.com/questions/46079742/how-to-get-all-of-the-names-from-a-specific-model", "title": "How to get all of the names from a specific Model", "body": "<p>I have a portfolio filtering for categories in order to show works from each category.</p>\n\n<p>It works with a <code>data-filter</code> that triggers the works like this:</p>\n\n<pre><code>&lt;span class=\"filter\" data-filter=\".&lt;%= c.name.downcase.gsub(/[[:space:]]/, '') %&gt;\"&gt;&lt;%= c.name %&gt;&lt;/span&gt;\n</code></pre>\n\n<p>That works correctly for separate categories, but I want the <code>:active</code> tab to contain all of the works, so I need to get ALL of the category names:</p>\n\n<pre><code>&lt;span class=\"filter active\" data-filter=\"&lt;%= Category.all.map(&amp;:name) %&gt;\"&gt;Todos&lt;/span&gt;\n</code></pre>\n\n<p>How can I retrieve the category names like \"name1 name2 name3\"...?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "module"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504716156, "post_id": 46079577, "comment_id": 79122357, "body": "<i>&quot;I have a basic question [...]&quot;</i> \u2013 <code>extend self</code> looks innocent and simple, but the result can be quite mind-boggling. To understand what&#39;s going on, it might be easier to remove that line and extend another object instead, like <code>obj = Object.new; obj.extend(A)</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1504716463, "post_id": 46079577, "comment_id": 79122555, "body": "Do you know what <code>extend</code> does?"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "edited": false, "score": 0, "creation_date": 1504728112, "post_id": 46079707, "comment_id": 79128795, "body": "Excellent answer, but where is stored the data set in the attr_accessor?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "edited": false, "score": 0, "creation_date": 1504730377, "post_id": 46079707, "comment_id": 79129927, "body": "As always, in whatever <code>self</code> is when that method is executed.  If this is a mixin method that some other object has called <code>include</code> on, then it goes into that object. If you&#39;re talking about <code>A.foo</code> then it goes into the A object: <code>A.instance_variables</code> via the <a href=\"http://ruby-doc.org/core-2.4.1/Object.html#method-i-instance_variables\" rel=\"nofollow noreferrer\"><code>instance_variables</code></a> method can be used to reflect on this."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1504713531, "creation_date": 1504713531, "answer_id": 46079707, "question_id": 46079577, "link": "https://stackoverflow.com/questions/46079577/why-attr-accessor-works-in-module-with-extend-self/46079707#46079707", "title": "Why attr_accessor works in module with extend self?", "body": "<p>There's two contexts for the module, and the \"instance\" context refers to mixin methods. By calling <code>extend self</code> you're making a mixin method callable directly on the module.</p>\n\n<pre><code>module Example\n  def mixin_level\n    :mixed\n  end\n\n  def self.module_level\n    :module\n  end\nend\n</code></pre>\n\n<p>By default you can only call these in the right context:</p>\n\n<pre><code>Example.module_level\n# =&gt; :module\n\nExample.mixin_level\n# =&gt; NoMethodError: undefined method `mixin_level' for Example:Module\n</code></pre>\n\n<p>If you do the <code>extend self</code> trick then the <code>mixin_level</code> method, and any others in that context, will also work. You're making the module level a superset of the mixin one.</p>\n\n<p>There's no way to destroy A short of removing the A constant. It's a singleton.</p>\n\n<p>As a note, Rails has <a href=\"http://api.rubyonrails.org/v5.0/classes/Module.html#method-i-mattr_accessor\" rel=\"nofollow noreferrer\"><code>mattr_accesor</code></a> which simplifies creating these without requiring <code>extend self</code>.</p>\n"}], "owner": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 46079707, "answer_count": 1, "score": 0, "last_activity_date": 1504713531, "creation_date": 1504713170, "last_edit_date": 1504713509, "question_id": 46079577, "link": "https://stackoverflow.com/questions/46079577/why-attr-accessor-works-in-module-with-extend-self", "title": "Why attr_accessor works in module with extend self?", "body": "<p>I have a basic question in ruby and i don't know why when creating a module with extend self, the attr_accessor works perfectly.</p>\n\n<p>As far as i know, attr_accessor should work in an instance class, but for some reasone it's working in those modules.</p>\n\n<p>Here is an example</p>\n\n<pre><code>module A\n  extend self\n  attr_accessor :custom_method\n\n  def foo\n    self.custom_method\n  end\nend\n\nA.custom_method # =&gt; nil\nA.foo # =&gt; nil\nA.custom_method = \"bar\" # =&gt; \"bar\"\nA.custom_method # =&gt; \"bar\"\nA.foo # =&gt; \"bar\"\n</code></pre>\n\n<p>So, what will happen with A.custom_method? will it be \"bar\" accross the whole application from now?</p>\n\n<p>How can i destroy this \"instance\" of A?</p>\n"}, {"tags": ["ruby", "telnet"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504713224, "post_id": 46079313, "comment_id": 79120554, "body": "What&#39;s the linux shell code you&#39;re trying to emulate? (Does the shell version work?)"}, {"owner": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504713770, "post_id": 46079313, "comment_id": 79120897, "body": "@TomLord I&#39;ve updated the post with the shell code and yes, it works, I have send some emails with it to my personal account and works fine."}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1504723836, "post_id": 46079313, "comment_id": 79126586, "body": "Is it a strict requirement that you use telnet? Using <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/net/smtp/rdoc/Net/SMTP.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.0.0/libdoc/net/smtp/rdoc/Net/SMTP.html</a> will turn your &quot;difficult to maintain&quot; script into something that is much easier to maintain. Even for someone who is completely new to Ruby."}], "answers": [{"comments": [{"owner": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "edited": false, "score": 1, "creation_date": 1504715973, "post_id": 46080095, "comment_id": 79122244, "body": "This doesn&#39;t answer the question but lead me to explore other ways, thanks you ^^"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "edited": false, "score": 0, "creation_date": 1504716062, "post_id": 46080095, "comment_id": 79122307, "body": "Writing an SMTP client from scratch is a bit above and beyond the five minutes I can spend answering a question here, but hopefully this sets you on the right direction. If you&#39;re looking to learn the fundamentals, <a href=\"http://www.unpbook.com\" rel=\"nofollow noreferrer\">this book</a> is a good primer on the basics."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1504714853, "creation_date": 1504714853, "answer_id": 46080095, "question_id": 46079313, "link": "https://stackoverflow.com/questions/46079313/send-email-via-telnet-ruby-script/46080095#46080095", "title": "send email via telnet ruby script", "body": "<p>The telnet protocol is really, really rudimentary which is why the <code>telnet</code> command is useful for testing TCP/IP based services such as SMTP or HTTP. It does not mean those services actually use the telnet protocol, as they don't. They're conveniently plain-text in nature which means it's practical to use <code>telnet</code> for simple tests.</p>\n\n<p>You should <strong>not</strong> be using the Telnet module for anything other than connecting to telnet services, though given it's 2017 it's unlikely you'll find any of those around.</p>\n\n<p>You <strong>should</strong> be using something like <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/socket/rdoc/Socket.html\" rel=\"nofollow noreferrer\">Socket</a> to connect. This can create a bare TCP/IP connection with full control over sending. As this is a wrapper around a regular POSIX filehandle you can use all the IO methods on it for reading, writing, and other control functions, like a proper socket <code>shutdown</code>.</p>\n\n<p>Writing an SMTP adapter is not as easy as it seems, there's a lot of tricky things to tackle with regard to IO. You'll need to use <code>IO.select</code> to properly test for new data, plus that the socket is clear to write your email.</p>\n\n<p>Here's a new stub:</p>\n\n<pre><code>require 'socket'\n\nmail = TCPSocket.new(\"smtp.example.com\", 25)\n\nmail.write(\"HELO example.com\\r\\n\")\n</code></pre>\n\n<p>Another note is that when you call <code>require</code> you should never specify the file extension. It's always handled for you.</p>\n"}, {"comments": [{"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1504816619, "post_id": 46104501, "comment_id": 79172295, "body": "Glad you got it working! You can also shrink this down by directly assigning the strings to the mail object (instead of initializing all those vars)"}, {"owner": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "reply_to_user": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1504821280, "post_id": 46104501, "comment_id": 79174294, "body": "Yes, I&#39;ll do that but I wrote it this way for educational purpouse. Thanks!"}], "tags": [], "owner": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "is_accepted": true, "score": 0, "last_activity_date": 1504815645, "creation_date": 1504815645, "answer_id": 46104501, "question_id": 46079313, "link": "https://stackoverflow.com/questions/46079313/send-email-via-telnet-ruby-script/46104501#46104501", "title": "send email via telnet ruby script", "body": "<p>Thanks to the help of the user ddubs how suggest the <code>net\\smtp</code> gem (One that I didn't know) I was able to create a simple mail sender and using the <code>mailfactory</code> gem</p>\n\n<blockquote>\n  <p>Is it a strict requirement that you use telnet? Using ruby-doc.org/stdlib-2.0.0/libdoc/net/smtp/rdoc/Net/SMTP.html will turn your \"difficult to maintain\" script into something that is much easier to maintain. Even for someone who is completely new to Ruby. \u2013 ddubs</p>\n</blockquote>\n\n<p>Here is the code sample</p>\n\n<pre><code>require 'net/smtp'\nrequire 'mailfactory'\n\nmail_body_HTML = '&lt;h1&gt; mail title&lt;/h1&gt; your text in &lt;b&gt;HTML&lt;/b&gt;'    \nmail_body_PLAIN = 'this is plain text'\nmail_subject = 'test email'     \nmail_from = 'noreply@mydomain.com'\nmail_to = 'user@otherdomain.com'\n# mail_filePath = ''\n\nmail = MailFactory.new()\nmail.to = mail_to\nmail.from = mail_from\nmail.subject = mail_subject\nmail.html = mail_body_HTML\n# mail.text = mail_body_PLAIN\n# mail.attach(mail_filePath)\n\nrelay_ip = x.x.x.x\n\nNet::SMTP.start(relay_ip,25) do |smtp|\n   smtp.send_message(mail.to_s, mail_from, mail_to)\nend\n</code></pre>\n"}], "owner": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 46104501, "answer_count": 2, "score": 0, "last_activity_date": 1504815645, "creation_date": 1504712299, "last_edit_date": 1504713708, "question_id": 46079313, "link": "https://stackoverflow.com/questions/46079313/send-email-via-telnet-ruby-script", "title": "send email via telnet ruby script", "body": "<p>I'm new with ruby and need to send an email via telnet using a relay host with no authentication. I can do it with a linux shell but I need to put it in a script so I can \"simplify\" its use, I know it's not the best way but I can't find other since the server where i'm working on it's severely restricted and limited.</p>\n\n<pre><code>require 'net/telnet.rb'\n\nmail = Net::Telnet::new(\n     \"Host\"       =&gt; \"domain.ip\",  # default: \"localhost\"\n     \"Port\"       =&gt; 25,           # default: 23\n     \"Output_log\" =&gt; \"output_log\", # default: nil (no output)\n     \"Dump_log\"   =&gt; \"dump_log\",   # default: nil (no output)\n     \"Prompt\"     =&gt; /[$%#&gt;] \\z/n, # default: /[$%#&gt;] \\z/n\n     \"Telnetmode\" =&gt; true,         # default: true\n     \"Timeout\"    =&gt; 10,           # default: 10\n     \"Waittime\"   =&gt; 0,            # default: 0\n   )\n\nmail.cmd('helo MYDOMAIN'){ |c| print c }\nmail.cmd('mail from: test@domain.com')\nmail.cmd('rcpt to: test2@domain.com')\nmail.cmd('data')\nmail.cmd(\"subject: test cmd \\n\\n mensaje de prueba\\n\\n\")\nmail.cmd(\".\\n\")\nmail.close\n</code></pre>\n\n<p>I found the <code>net/telnet.rb</code> ruby class and this is my try... after <code>mail.cmd('helo MYDOMAIN')</code> I can't keep writing other commands, what I get is:</p>\n\n<pre><code>220 mail.server.com ESMTP\n250 mail.server.com\n</code></pre>\n\n<p>After this I'm suposed to write <code>mail from</code>, etc. to create the mail. But I can't in the ruby script. I have try using:</p>\n\n<pre><code>mail.puts('mail from: test...')\nmail.write('mail from: test...')\nmail.print('mail from: test...')\nmail.cmd('mail from: test...')\n</code></pre>\n\n<p>As written in <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/net/telnet/rdoc/Net/Telnet.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<p>Also I don't get the <code>telnetmode(true|false)</code> command maybe you could explain it to me please.</p>\n\n<p>-- Edit --</p>\n\n<p>Shell code trying to emulate:</p>\n\n<pre><code>telnet domain.ip 25\n#=&gt; Trying domain.ip...\n#=&gt; Connected to domain.ip.\n#=&gt; Escape character is '^]'.\n#=&gt; 220 mail.server.com ESMTP\nhelo MYDOMAIN\n#=&gt;250 mail.server.com\nmail from:test@mydomain.com\n#=&gt; 250 2.1.0 Ok\nrcpt to:test2@mydomain.com\n#=&gt; 250 2.1.0 Ok\ndata\n#=&gt; 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\nsubject: test mail\n\ntest mail body\n\n.\n#=&gt; 250 2.0.0 =k: queued as B6F08480D12\nquit\n#=&gt; 221 2.0.0 Bye\n#=&gt; Connection closed by foreign host.\n</code></pre>\n"}, {"tags": ["ruby", "git", "heroku", "ffmpeg", "sinatra"], "comments": [{"owner": {"reputation": 11809, "user_id": 3340702, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/KYAsK.jpg?s=128&g=1", "display_name": "lifeisfoo", "link": "https://stackoverflow.com/users/3340702/lifeisfoo"}, "edited": false, "score": 0, "creation_date": 1504710818, "post_id": 46078172, "comment_id": 79119042, "body": "What error message? Please add more information to your question"}, {"owner": {"reputation": 1, "user_id": 8569683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Da8yInjy-qc/AAAAAAAAAAI/AAAAAAAAAHE/-OVmV4FlYjk/photo.jpg?sz=128", "display_name": "Biswa", "link": "https://stackoverflow.com/users/8569683/biswa"}, "reply_to_user": {"reputation": 11809, "user_id": 3340702, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/KYAsK.jpg?s=128&g=1", "display_name": "lifeisfoo", "link": "https://stackoverflow.com/users/3340702/lifeisfoo"}, "edited": false, "score": 0, "creation_date": 1504719226, "post_id": 46078172, "comment_id": 79124072, "body": "I have attached error message in the question itself. Please review."}, {"owner": {"reputation": 11809, "user_id": 3340702, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/KYAsK.jpg?s=128&g=1", "display_name": "lifeisfoo", "link": "https://stackoverflow.com/users/3340702/lifeisfoo"}, "edited": false, "score": 0, "creation_date": 1504725209, "post_id": 46078172, "comment_id": 79127318, "body": "That&#39;s not an error, but a warning. Just follow the instructions in the message and you&#39;re ok"}, {"owner": {"reputation": 1, "user_id": 8569683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Da8yInjy-qc/AAAAAAAAAAI/AAAAAAAAAHE/-OVmV4FlYjk/photo.jpg?sz=128", "display_name": "Biswa", "link": "https://stackoverflow.com/users/8569683/biswa"}, "reply_to_user": {"reputation": 11809, "user_id": 3340702, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/KYAsK.jpg?s=128&g=1", "display_name": "lifeisfoo", "link": "https://stackoverflow.com/users/3340702/lifeisfoo"}, "edited": false, "score": 0, "creation_date": 1504776984, "post_id": 46078172, "comment_id": 79147388, "body": "@lifeisfoo Thanks for your reply. Warning says &#39;This buildpack will cease to function at the stroke of midnight on January 1, 2017&#39;. After that Heroku threw error -  &#39;Push got rejected, Failed to compile Multipack app&#39;. Is there any alternative to this or am I doing something wrong?"}, {"owner": {"reputation": 11809, "user_id": 3340702, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/KYAsK.jpg?s=128&g=1", "display_name": "lifeisfoo", "link": "https://stackoverflow.com/users/3340702/lifeisfoo"}, "edited": false, "score": 0, "creation_date": 1504777099, "post_id": 46078172, "comment_id": 79147470, "body": "Do you have followed instructions in the warning message?"}], "answers": [{"comments": [{"owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "edited": false, "score": 0, "creation_date": 1533762506, "post_id": 46115211, "comment_id": 90470960, "body": "Did you also install libx264?"}], "tags": [], "owner": {"reputation": 1, "user_id": 8569683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Da8yInjy-qc/AAAAAAAAAAI/AAAAAAAAAHE/-OVmV4FlYjk/photo.jpg?sz=128", "display_name": "Biswa", "link": "https://stackoverflow.com/users/8569683/biswa"}, "is_accepted": false, "score": 0, "last_activity_date": 1504869292, "creation_date": 1504869292, "answer_id": 46115211, "question_id": 46078172, "link": "https://stackoverflow.com/questions/46078172/how-can-we-install-ffmpeg-for-ruby-app-on-heroku/46115211#46115211", "title": "How can we install FFMPEG for Ruby app on heroku?", "body": "<p>I am finally able to install FFMPEG for ruby app on Heroku using different buildpacks. In case someone faces similar issue, just add following buildpacks using Heroku CLI<br>\nheroku buildpacks:set heroku/ruby<br>\nheroku buildpacks:add --index 1 <a href=\"https://github.com/kontentcore/heroku-buildpack-ffmpeg\" rel=\"nofollow noreferrer\">https://github.com/kontentcore/heroku-buildpack-ffmpeg</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8569683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Da8yInjy-qc/AAAAAAAAAAI/AAAAAAAAAHE/-OVmV4FlYjk/photo.jpg?sz=128", "display_name": "Biswa", "link": "https://stackoverflow.com/users/8569683/biswa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504869292, "creation_date": 1504708965, "last_edit_date": 1592644375, "question_id": 46078172, "link": "https://stackoverflow.com/questions/46078172/how-can-we-install-ffmpeg-for-ruby-app-on-heroku", "title": "How can we install FFMPEG for Ruby app on heroku?", "body": "<p>I am trying to install FFMPEG for a Ruby app(Web framework- Sinatra) on Heroku. I have tried heroku-buildpack-multi (github.com/ddollar/heroku-buildpack-multi.git) plugin, but seems it's stopped working from Jan 01,2017 as it threw error with same message. I followed steps from this link <a href=\"https://elements.heroku.com/buildpacks/jonathanong/heroku-buildpack-ffmpeg\" rel=\"nofollow noreferrer\">https://elements.heroku.com/buildpacks/jonathanong/heroku-buildpack-ffmpeg</a></p>\n<p>There is not much information regarding FFMPEG installation on Heroku. Can any one suggest some solution?</p>\n<p><a href=\"https://i.stack.imgur.com/xCxCX.png\" rel=\"nofollow noreferrer\">Attaching error from heroku</a></p>\n"}, {"tags": ["mysql", "ruby", "methods", "mysql2"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1504713294, "post_id": 46078165, "comment_id": 79120596, "body": "Given where <code>client</code> is declared, it is not available to the <code>Launch</code> method. You want to either (1) move the declaration of <code>client</code> into the <code>Launch</code> method or (2) redefine the method to pass client as a parameter - ie <code>Launch(b, client)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8569596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67717f7218ca21011668a486efee2386?s=128&d=identicon&r=PG&f=1", "display_name": "BTZ", "link": "https://stackoverflow.com/users/8569596/btz"}, "edited": false, "score": 0, "creation_date": 1504715404, "post_id": 46079630, "comment_id": 79121917, "body": "Thanks for the answer. I answered back but I&#39;m not sure you&#39;ll get a notification from it, so I&#39;m commenting too."}, {"owner": {"reputation": 744, "user_id": 4552639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cc621506ee97817b31420c30085445?s=128&d=identicon&r=PG", "display_name": "Jakub", "link": "https://stackoverflow.com/users/4552639/jakub"}, "reply_to_user": {"reputation": 11, "user_id": 8569596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67717f7218ca21011668a486efee2386?s=128&d=identicon&r=PG&f=1", "display_name": "BTZ", "link": "https://stackoverflow.com/users/8569596/btz"}, "edited": false, "score": 0, "creation_date": 1504716001, "post_id": 46079630, "comment_id": 79122264, "body": "No worries - mark it if described issue is resolved."}], "tags": [], "owner": {"reputation": 744, "user_id": 4552639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cc621506ee97817b31420c30085445?s=128&d=identicon&r=PG", "display_name": "Jakub", "link": "https://stackoverflow.com/users/4552639/jakub"}, "is_accepted": true, "score": 0, "last_activity_date": 1504713314, "creation_date": 1504713314, "answer_id": 46079630, "question_id": 46078165, "link": "https://stackoverflow.com/questions/46078165/using-mysql2-with-ruby-gets-me-undefined-local-variable-or-method-client-for-m/46079630#46079630", "title": "Using MySQL2 with Ruby gets me undefined local variable or method `client&#39; for main:Object (NameError)", "body": "<p><code>client</code> is out of scope Launch method.</p>\n\n<p>Make it global <code>@client</code> or assign as second attribute in <code>Launch(b, launch)</code></p>\n"}], "owner": {"reputation": 11, "user_id": 8569596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67717f7218ca21011668a486efee2386?s=128&d=identicon&r=PG&f=1", "display_name": "BTZ", "link": "https://stackoverflow.com/users/8569596/btz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 46079630, "answer_count": 1, "score": 0, "last_activity_date": 1504719217, "creation_date": 1504708944, "last_edit_date": 1504719217, "question_id": 46078165, "link": "https://stackoverflow.com/questions/46078165/using-mysql2-with-ruby-gets-me-undefined-local-variable-or-method-client-for-m", "title": "Using MySQL2 with Ruby gets me undefined local variable or method `client&#39; for main:Object (NameError)", "body": "<p>So I've been working on some scraping scripts with Ruby, using the gem watir lately. I used to put the results in a .json file but I recently started working with MySQL2. So here's the deal:</p>\n\n<p>I have created a db called scrap, with a table called links, which has 3 columns: id, job, link. The script I'm working on for this is very simple: it makes a query on google search, takes the URLs of all the links, then goes to the next page. So here's the boy:</p>\n\n<pre><code>require \"watir\"\nrequire \"json\"\nrequire \"mysql2\"\nb = Watir::Browser.new(:firefox)\nclient = Mysql2::Client.new(:host =&gt; \"localhost\", :username =&gt; \"root\", :password =&gt; \"xxx\", :database =&gt; \"scrap\", :encoding =&gt; \"utf8\")\n\n\ndef Launch(b)\n  job = \"cabinet avocat\"\n  ville = \"paris\"\n  k = 0\n  j = \"avocat\"\n  b.goto \"https://www.google.fr/search?q=\"+\"#{job}\"+\" \"+\"#{ville}\" \"&amp;dcr=0&amp;ei=1-quWY6BDouYgAb0tZq4CA&amp;start=\"+\"#{k}\"+\"&amp;sa=N&amp;biw=1280&amp;bih=876\"\n\n  loop do\n    l0 = b.div(class:\"f kv _SWb\", index:0).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l0}')\");\n\n    l1 = b.div(class:\"f kv _SWb\", index:1).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l1}')\");\n\n    l2 = b.div(class:\"f kv _SWb\", index:2).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l2}')\");\n\n    l3 = b.div(class:\"f kv _SWb\", index:3).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l3}')\");\n\n    l4 = b.div(class:\"f kv _SWb\", index:4).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l4}')\");\n\n    l5 = b.div(class:\"f kv _SWb\", index:5).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l5}')\");\n\n    l6 = b.div(class:\"f kv _SWb\", index:6).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l6}')\");\n\n    l7 = b.div(class:\"f kv _SWb\", index:7).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l7}')\");\n\n    l8 = b.div(class:\"f kv _SWb\", index:8).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l8}')\");\n\n    l9 = b.div(class:\"f kv _SWb\", index:9).text\n    client.query(\"INSERT INTO links(job, link)\n    VALUES('#{j}, '#{l9}')\");\n\n    k += 10\n    b.goto \"https://www.google.fr/search?q=\"+\"#{job}\"+\" \"+\"#{ville}\" \"&amp;dcr=0&amp;ei=1-quWY6BDouYgAb0tZq4CA&amp;start=\"+\"#{k}\"+\"&amp;sa=N&amp;biw=1280&amp;bih=876\"\n    break if k == 200\n  end\nend\n\nLaunch(b)\n</code></pre>\n\n<p>As you can see it's very messy, but I'm aware of that and this will be fixed as soon as I get it to work. So when I run it, that's the error I get:</p>\n\n<pre><code>test.rb:17:in `block in Launch': undefined local variable or method `client' for main:Object (NameError)\n    from test.rb:15:in `loop'\n    from test.rb:15:in `Launch'\n    from test.rb:62:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have searched pretty much everywhere and haven't been able to find a solution to my problem, which is why I created an account here in order to not only look at the questions at others, but post my own.</p>\n\n<p>Thank you everyone</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504708656, "post_id": 46077759, "comment_id": 79117372, "body": "Actually, <code>current_user</code> is just <code>nil</code> and <code>nil</code> doesn&#39;t respond to <code>editor?</code> or <code>admin?</code>. <code>nil</code> is Ruby&#39;s way to describe &quot;nothing&quot;. But &quot;someone not logged it&quot; is not nothing. That <a href=\"http://confreaks.tv/videos/railsconf2015-nothing-is-something\" rel=\"nofollow noreferrer\">nothing is something</a> (excellent talk BTW). Using an object in place of missing one is known as the <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"nofollow noreferrer\">Null Object pattern</a> and it&#39;s an elegant way to approach this problem. Where does <code>current_user</code> come from? Are you using devise?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504708797, "post_id": 46077759, "comment_id": 79117495, "body": "@Stefan: hah, I knew &quot;nothing is something&quot; is something Sandi Metz would say. And, of course, it&#39;s her :)"}], "answers": [{"comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1504725642, "post_id": 46077941, "comment_id": 79127533, "body": "This is called short-circuiting, it&#39;s an important programming concept:  When evaluating an <b>and</b>: it stops at the first <code>false</code>. Example: <code>false &amp;&amp; raise &quot;Error&quot;</code> won&#39;t raise the error. When evaluating an <b>or</b> it stops after the first <code>true</code>."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 2, "last_activity_date": 1504726894, "last_edit_date": 1504726894, "creation_date": 1504708340, "answer_id": 46077941, "question_id": 46077759, "link": "https://stackoverflow.com/questions/46077759/rails-undefined-method-error-for-nilnilclass/46077941#46077941", "title": "Rails Undefined Method Error for nil:NilClass", "body": "<pre><code>def require_editor\n    redirect_to '/error' unless current_user &amp;&amp; (current_user.editor? || current_user.admin?)\nend\n</code></pre>\n\n<p>You're currently calling <code>editor?</code> on a <code>nil</code> object, which is throwing an error. By using the technique above, you're first checking to ensure <code>current_user</code> is not <code>nil</code>, and then perform the checks on <code>current_user</code> if it exists, if not it simply returns false and redirects to the <code>/error</code> URL.</p>\n"}, {"comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1504725547, "post_id": 46078061, "comment_id": 79127476, "body": "This! Extracting authorization logic is the best route to go. It&#39;s too easy to start with some conditionals only to become a bigger mess later."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 5, "last_activity_date": 1504709840, "last_edit_date": 1504709840, "creation_date": 1504708638, "answer_id": 46078061, "question_id": 46077759, "link": "https://stackoverflow.com/questions/46077759/rails-undefined-method-error-for-nilnilclass/46078061#46078061", "title": "Rails Undefined Method Error for nil:NilClass", "body": "<p>I usually do something like this:</p>\n\n<pre><code>class ApplicationController\n\n  def current_user_or_guest\n    current_user || Guest.new\n  end\n\n  class Guest\n    def editor?\n      false\n    end\n\n    def admin?\n      false\n    end\n  end\nend\n</code></pre>\n\n<p>Then simply</p>\n\n<pre><code>def require_editor\n  redirect_to '/error' unless current_user_or_guest.editor? || current_user_or_guest.admin?\nend\n</code></pre>\n\n<p>This could be simplified by using <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">CanCanCan</a> and extracting authorization logic from the controller. With cancan abilities set up, controller code usually looks like this:</p>\n\n<pre><code>def require_editor\n  redirect_to '/error' unless can?(:edit, MyThing)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1480, "user_id": 5872935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpdFh.jpg?s=128&g=1", "display_name": "Mshka", "link": "https://stackoverflow.com/users/5872935/mshka"}, "is_accepted": false, "score": 0, "last_activity_date": 1504708754, "creation_date": 1504708754, "answer_id": 46078105, "question_id": 46077759, "link": "https://stackoverflow.com/questions/46077759/rails-undefined-method-error-for-nilnilclass/46078105#46078105", "title": "Rails Undefined Method Error for nil:NilClass", "body": "<p>Inside your <code>ApplicationController</code> create a method that redirects to the error page then add a <code>before_action</code> only on the actions that you wanna make sure the user is signed in</p>\n\n<h3>ApplicationController</h3>\n\n<pre><code>def require_editor\n  unless current_user &amp;&amp; (current_user.editor? || current_user.admin?)\n    redirect_to '/error' \n  end\nend\n</code></pre>\n\n<h3>Controller you wanna raise this error</h3>\n\n<pre><code>class Controller &lt; ApplicationController\n  before_action :require_editor\n  def new\n\n  end\nend \n</code></pre>\n\n<p><em>If you are using <code>devise</code> gem there is a <a href=\"https://github.com/plataformatec/devise#controller-filters-and-helpers\" rel=\"nofollow noreferrer\">callback/filter</a> for requiring authentications</em></p>\n"}], "owner": {"reputation": 175, "user_id": 8455792, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10154620878171277/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/8455792/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 46077941, "answer_count": 3, "score": 1, "last_activity_date": 1504726894, "creation_date": 1504707841, "question_id": 46077759, "link": "https://stackoverflow.com/questions/46077759/rails-undefined-method-error-for-nilnilclass", "title": "Rails Undefined Method Error for nil:NilClass", "body": "<p>So in my rails app, I have users with different permissions. When someone is logged in, everything works perfectly. However, when no one is logged in, I get the following error:</p>\n\n<pre><code>Undefined method 'editor?' for nil:NilClass\n\ndef require_editor\n    redirect_to '/error' unless current_user.editor? || current_user.admin?\nend\n</code></pre>\n\n<p>I think I understand exactly why this is happening: because no one is logged in, Rails is trying to figure out what role they have, and because there is no role for someone not logged it, Rails doesn't know if it should show the page or not. </p>\n\n<p>My question is: How can I make a default role for someone who is not logged in, and send them to the error page that says they don't have permission? </p>\n"}, {"tags": ["ruby", "bundler", "gemfile"], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 3510513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6da8d55e969ef2509c9716da0979af?s=128&d=identicon&r=PG&f=1", "display_name": "dCSeven", "link": "https://stackoverflow.com/users/3510513/dcseven"}, "edited": false, "score": 0, "creation_date": 1504850459, "post_id": 46078322, "comment_id": 79181658, "body": "Thanks for the manpage (i missed that one), but unfortunately it pulls in the same gem as before        <code>\u03bb bundle show msgpack     D:&#47;Ruby193&#47;lib&#47;ruby&#47;gems&#47;1.9.1&#47;gems&#47;msgpack-1.1.0-x86-mingw3&zwnj;&#8203;2</code> and that leads to the same error as before        <code>D:&#47;Ruby193&#47;lib&#47;ruby&#47;site_ruby&#47;1.9.1&#47;rubygems&#47;custom_require.&zwnj;&#8203;rb:36:in </code>require&#39;: cannot load such file -- msgpack/msgpack (LoadError)`"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1504709360, "last_edit_date": 1592644375, "creation_date": 1504709360, "answer_id": 46078322, "question_id": 46077705, "link": "https://stackoverflow.com/questions/46077705/get-bundler-to-install-gem-for-specific-platform/46078322#46078322", "title": "Get bundler to install gem for specific platform", "body": "<p><a href=\"http://bundler.io/man/gemfile.5.html\" rel=\"nofollow noreferrer\">http://bundler.io/man/gemfile.5.html</a></p>\n<p>Copy and pasted from the above:</p>\n<blockquote>\n<p>You can restrict further by platform and version for all platforms except for rbx, jruby, and mswin.</p>\n<p>To specify a version in addition to a platform, append the version number without the delimiter to the platform. For example, to specify that a gem should only be used on platforms with Ruby 2.3, use:</p>\n<p>ruby_23</p>\n<p>The full list of platforms and supported versions includes:</p>\n<p>ruby\n1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5</p>\n<p>mri\n1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5</p>\n<p>mingw\n1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5</p>\n<p>x64_mingw\n2.0, 2.1, 2.2, 2.3, 2.4, 2.5\nAs with groups, you can specify one or more platforms:</p>\n<p>gem &quot;weakling&quot;,   :platforms =&gt; :jruby</p>\n<p>gem &quot;ruby-debug&quot;, :platforms =&gt; :mri_18</p>\n<p>gem &quot;nokogiri&quot;,   :platforms =&gt; [:mri_18, :jruby]</p>\n</blockquote>\n<p>So in your case, try</p>\n<pre><code>gem 'msgpack', :platforms=&gt;:ruby_19\n</code></pre>\n"}], "owner": {"reputation": 485, "user_id": 3510513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6da8d55e969ef2509c9716da0979af?s=128&d=identicon&r=PG&f=1", "display_name": "dCSeven", "link": "https://stackoverflow.com/users/3510513/dcseven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504852185, "creation_date": 1504707698, "last_edit_date": 1592644375, "question_id": 46077705, "link": "https://stackoverflow.com/questions/46077705/get-bundler-to-install-gem-for-specific-platform", "title": "Get bundler to install gem for specific platform", "body": "<p>I use the 'fluent-logger' gem for logging in our project, which needs 'msgpack'. If I run <code>bundle install</code> it pulls in <code>msgpack-1.1.0-x86-mingw32</code>, which throws an exception when requiring it on Windows.</p>\n<pre><code>kernel_require.rb:55:in `require': cannot load such file -- msgpack/msgpack (LoadError)\n</code></pre>\n<p>But there exists a workaround for the problem, by just reinstalling the gem with <code>--platform=ruby</code> like this:</p>\n<pre><code>gem uninstall msgpack\ngem install msgpack --platform=ruby\n</code></pre>\n<p>I tried to put this requirement into the Gemfile as indicated elsewhere (can't find the link atm), but it didn't do anything (installed <code>msgpack-1.1.0-x86-mingw32</code> as before):</p>\n<pre><code>gem 'msgpack', :platforms=&gt;:ruby  \n</code></pre>\n<p>I'm using Ruby 1.9.3p551 (and bundler v 1.14.6) on Windows 7, in case that matters.</p>\n<h1>Edit</h1>\n<p>To allow everyone who wants, to try it themselves I give an example source.</p>\n<p>Gemfile:</p>\n<pre><code>source 'http://rubygems.org'\n\nruby '1.9.3'\n\ngem 'fluent-logger'\ngem 'msgpack', :platforms=&gt;:ruby_19 \n#for windows local dev msgpack needs to be installed with --platform=ruby\n</code></pre>\n<p>foo.rb</p>\n<pre><code>require 'fluent-logger'\n\nlogger= Fluent::Logger::FluentLogger.new\n#logger.post('idx',{message:'it works'})\nputs 'worked'\n</code></pre>\n<p>The logger won't create a valid connection, but if it runs through that's great<br />\n(The only important thing here is that the Gemfile doesn't pull in the right version of msgpack (in my case <code>1.1.0-x86-mingw32</code> instead of <code>1.1.0</code>))</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504707749, "post_id": 46077615, "comment_id": 79116639, "body": "<i>&quot;the above code would work&quot;</i> \u2013 did you try it?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1504716113, "post_id": 46077615, "comment_id": 79122338, "body": "Your question makes no sense. You don&#39;t require classes, you require files. What do you mean by &quot;when a class is required&quot;? There is no such thing in Ruby as requiring a class."}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1504773023, "post_id": 46077615, "comment_id": 79144676, "body": "@J&#246;rgWMittag Okay. When you require a file which contains a class. I&#39;m 99% certain that you understood that much, and that it was implied..."}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504773178, "post_id": 46077615, "comment_id": 79144765, "body": "@Stefan I have no application to try it in, exclusively, but I don&#39;t see any reason why it wouldn&#39;t work for single instance scripts, whereby each script runs in its own instance of ruby. The problem here being that the application I am running the ruby scripts in, does not sandbox them. So a file required in the application is only every required 1 across all scripts."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504775434, "post_id": 46077615, "comment_id": 79146258, "body": "@Sancarn I asked because you declare an instance variable in the class body. This variable would be available to class methods but not to instance methods, i.e. <code>@hwnd</code> would be <code>nil</code> within <code>baz</code>."}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "edited": false, "score": 0, "creation_date": 1504798319, "post_id": 46077615, "comment_id": 79162811, "body": "Oh really? That is very odd because if I do that in the application I am running the ruby scripts from <code>@hwnd</code> is not nil in <code>baz</code> which strikes me as rather bizarre... I guess the ruby interpreter is doing something funky with the code..."}], "answers": [{"tags": [], "owner": {"reputation": 890, "user_id": 1336858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14c71614ddf0252a06612c9bde5c3c5d?s=128&d=identicon&r=PG", "display_name": "Akzhan Abdulin", "link": "https://stackoverflow.com/users/1336858/akzhan-abdulin"}, "is_accepted": false, "score": 1, "last_activity_date": 1504707610, "creation_date": 1504707610, "answer_id": 46077671, "question_id": 46077615, "link": "https://stackoverflow.com/questions/46077615/is-it-possible-to-execute-a-method-whenever-the-class-is-required/46077671#46077671", "title": "Is it possible to execute a method whenever the class is required?", "body": "<p>Just create <code>handle</code> accessor and use itself whenever you want hwnd.</p>\n\n<pre><code>class Foo\n   GetActiveWindow = Win32API.new(\"User32\",\"GetActiveWindow\", [], 'L')\n\n   def baz\n     # do stuff with handle\n     PostMessage(handle, ...)\n   end\n\n   def handle\n     @hwnd ||= GetActiveWindow.call()\n   end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1504708023, "post_id": 46077729, "comment_id": 79116872, "body": "You can just add the <code>@hwnd =</code> part to the class body, will do the same thing."}], "tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1504707766, "creation_date": 1504707766, "answer_id": 46077729, "question_id": 46077615, "link": "https://stackoverflow.com/questions/46077615/is-it-possible-to-execute-a-method-whenever-the-class-is-required/46077729#46077729", "title": "Is it possible to execute a method whenever the class is required?", "body": "<p>If you're looking to call the method on <code>require</code> then you can simply move the <code>onrequire</code> call outside of the class:</p>\n\n<pre><code># foo.rb\nclass Foo\n   GetActiveWindow = Win32API.new(\"User32\",\"GetActiveWindow\", [], 'L')\n   def baz\n       #do stuff with @hwnd\n   end\n   def self.on_require\n       @hwnd = GetActiveWindow.call()\n   end\nend\n\nFoo.on_require\n</code></pre>\n\n<p>In this case, the last line is ran on <code>require</code>. You'll obviously have to structure your class / instance methods to accommodate what you're trying to do, but this example will get you there.</p>\n"}, {"comments": [{"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "edited": false, "score": 0, "creation_date": 1504708844, "post_id": 46077776, "comment_id": 79117535, "body": "My main issue against using <code>initialize</code> is rather subjective. But I would commonly expect <code>ProgressBar.new()</code> to create a new progress bar. Where as, in this case, it simply gets the handles to already existing windows of the application. Perhaps if I named the class <code>ProgressBarHelper</code> it&#39;d sound better..."}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "edited": false, "score": 0, "creation_date": 1504773396, "post_id": 46077776, "comment_id": 79144913, "body": "I guess this is indeed the best solution. I am always concerned about speed but perhaps that concern is misplaced."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "edited": false, "score": 0, "creation_date": 1504783494, "post_id": 46077776, "comment_id": 79151820, "body": "I don&#39;t think that instantiating one more object will matter.  Unless you&#39;ve measured the various solutions I&#39;d not optimize. I&#39;d rather optimize for clean/testable/concise code. Class methods are harder to refactor and test, IMHO."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1504760760, "last_edit_date": 1504760760, "creation_date": 1504707869, "answer_id": 46077776, "question_id": 46077615, "link": "https://stackoverflow.com/questions/46077615/is-it-possible-to-execute-a-method-whenever-the-class-is-required/46077776#46077776", "title": "Is it possible to execute a method whenever the class is required?", "body": "<p>Assuming you meant <code>Foo</code> and not <code>foo</code> as the latter is an invalid constant name in Ruby.</p>\n\n<p>No, there is no such callback for <code>require</code> in classes. Require just loads and parses a file and there is no direct relation between a class and a file (though it is common to have the <code>Foo</code> class in <code>foo.rb</code>). There could be more than one class in a file, none, or one that does not match the filename.</p>\n\n<p>You can either assign the handle in the initializer, as you already have found out (though I did not understand why you don't like the approach:</p>\n\n<pre><code>def initialize()\n  @hwnd = GetActiveWindow.call()\nend\n</code></pre>\n\n<p>or add a method which <code>memoizes</code> the handle </p>\n\n<pre><code>def hwnd\n  @hwnd ||= GetActiveWindow.call()\nend\n</code></pre>\n\n<p><strong>Update after comment of OP:</strong></p>\n\n<p>So all this class is suposed to do is obtaining a handle. And you do not want to instantiate it. Also it does not have any state. Then I suppose you make this a class with class-methods:</p>\n\n<pre><code>class Foo\n  def self.handle\n     ...\n  end\nend\n</code></pre>\n\n<p>and call it like this</p>\n\n<pre><code>Foo.handle\n</code></pre>\n"}], "owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 46077776, "answer_count": 3, "score": -1, "last_activity_date": 1504760760, "creation_date": 1504707434, "last_edit_date": 1504707738, "question_id": 46077615, "link": "https://stackoverflow.com/questions/46077615/is-it-possible-to-execute-a-method-whenever-the-class-is-required", "title": "Is it possible to execute a method whenever the class is required?", "body": "<p>I have a class:</p>\n\n<pre><code>class foo\n   GetActiveWindow = Win32API.new(\"User32\",\"GetActiveWindow\", [], 'L')\n   @hwnd = GetActiveWindow.call()\n   def baz\n       #do stuff with @hwnd\n   end\nend\n</code></pre>\n\n<p>I think in any usual case the above code would work in the way I need it to. For every instance of the running program, the class will obtain the hwnd of the main window.</p>\n\n<p>However in this case, I'm running the ruby script through an application which is always running such that <code>require 'foo.rb'</code> calls <code>@hwnd = GetActiveWindow.call()</code> once but never again.</p>\n\n<p>Is there a method like the following:</p>\n\n<pre><code>class foo\n   GetActiveWindow = Win32API.new(\"User32\",\"GetActiveWindow\", [], 'L')\n   def baz\n       #do stuff with @hwnd\n   end\n   def onrequire()\n       @hwnd = GetActiveWindow.call()\n   end\nend\n</code></pre>\n\n<p>I know you can define an <code>initialise()</code> method which is called whenever <code>class.new()</code> is called, however in the case of this application it doesn't really make 'sense' to call the method <code>new</code>, if that makes sense... So I was wondering if I could easily shortcut it.</p>\n"}, {"tags": ["ruby", "tk"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1504706504, "post_id": 46077123, "comment_id": 79115722, "body": "what is the output of  <code>gem list | grep tk</code> ?"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1504706701, "post_id": 46077123, "comment_id": 79115868, "body": "There is no output. Tk is not there in gems listed by &#39;gem list&#39; command (which shows 11 items). But tk is installed in Debian."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1504706737, "post_id": 46077123, "comment_id": 79115897, "body": "you should install gem."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1504706846, "post_id": 46077123, "comment_id": 79115977, "body": "Is the command &quot;gem install tk&quot; ?"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1504707012, "post_id": 46077123, "comment_id": 79116110, "body": "yes, or via Bundler if you use it"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504707035, "post_id": 46077123, "comment_id": 79116122, "body": "<a href=\"https://github.com/ruby/tk#installation\" rel=\"nofollow noreferrer\">github.com/ruby/tk#installation</a>"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1504707295, "post_id": 46077123, "comment_id": 79116334, "body": "What is Debian tk package for? Can I remove it?"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1504707420, "post_id": 46077123, "comment_id": 79116428, "body": "&#39;gem install tk&#39; has failed. Pl see edit in my question above."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504712345, "post_id": 46077123, "comment_id": 79120013, "body": "Read the error message. It&#39;s complaining about <code>tcltklib.so</code> being missing. After a very quick google search, perhaps <code>sudo apt-get install libtcltk-ruby</code> will resolve this?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504712498, "post_id": 46077123, "comment_id": 79120117, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20874900/ruby-require-tk-yields-loaderror-no-such-file-to-load-tk\">Ruby require &#39;tk&#39; yields LoadError: no such file to load -- tk</a>"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1504714991, "post_id": 46077123, "comment_id": 79121644, "body": "It does not work even after installing libtcltk-ruby (which also installed ruby-tcltk (Tcl/Tk interface for Ruby).  But error is similar: Cannot find X11 library...  How can this be solved?"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1504716699, "post_id": 46077123, "comment_id": 79122680, "body": "The problem got sorted by installing following development files: libx11-dev, tk-dev and tcl-dev. Thanks for your help."}], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1567772218, "post_id": 57821019, "comment_id": 102073751, "body": "Good link. However, this question is more than 1 year older than the link. Moreover, I am now experimenting with other languages even though Ruby is a great language."}], "tags": [], "owner": {"reputation": 31, "user_id": 12030250, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a349aff7a41981a6cc17aaa063df8139?s=128&d=identicon&r=PG", "display_name": "PSR", "link": "https://stackoverflow.com/users/12030250/psr"}, "is_accepted": false, "score": 3, "last_activity_date": 1567768798, "creation_date": 1567768798, "answer_id": 57821019, "question_id": 46077123, "link": "https://stackoverflow.com/questions/46077123/not-able-to-load-tk-in-ruby/57821019#57821019", "title": "Not able to load tk in Ruby", "body": "<p>The bindings for the standard Ruby GUI toolkit, Tk, need some trickery in order to be installed on Ubuntu\n<a href=\"https://saveriomiroddi.github.io/Installing-ruby-tk-bindings-gem-on-ubuntu/\" rel=\"nofollow noreferrer\">https://saveriomiroddi.github.io/Installing-ruby-tk-bindings-gem-on-ubuntu/</a></p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567768798, "creation_date": 1504706092, "last_edit_date": 1504707389, "question_id": 46077123, "link": "https://stackoverflow.com/questions/46077123/not-able-to-load-tk-in-ruby", "title": "Not able to load tk in Ruby", "body": "<p>I am trying to run some tk code in Ruby, but it is not working. Following is the error: </p>\n\n<pre><code>iuser@debian:~$ irb\nirb(main):001:0&gt; require 'tk'\nLoadError: cannot load such file -- tk\n    from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from (irb):1\n    from /usr/bin/irb:11:in `&lt;main&gt;'\nirb(main):002:0&gt; \n</code></pre>\n\n<p>I am working on Debian-9 Linux with Ruby and Tk installed:</p>\n\n<pre><code>Package                 Installed       Previous        Now             State\n=======================-===============-===============-===============-=====\ntk                      8.6.0+9         8.6.0+9         8.6.0+9         install\nruby                    1:2.3.3         1:2.3.3         1:2.3.3         install\n</code></pre>\n\n<p>Where is the problem and how can this be solved? Thanks for your help.</p>\n\n<p>Edit: As mentioned in comments, I tried to install tk with gems, but it did not work: </p>\n\n<pre><code>$ sudo gem install tk\n[sudo] password for cardio: \nFetching: tk-0.2.0.gem (100%)\nBuilding native extensions.  This could take a while...\nERROR:  Error installing tk:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.3.0/gems/tk-0.2.0/ext/tk\n/usr/bin/ruby2.3 -r ./siteconf20170906-9548-1db359q.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/tk-0.2.0 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86-linux/2.3.0/tk-0.2.0/gem_make.out\n</code></pre>\n\n<p>I tried again after installing ruby-dev package (for header files), but still it failed (with a long message): </p>\n\n<pre><code>$ sudo gem install tk\nBuilding native extensions.  This could take a while...\nERROR:  Error installing tk:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.3.0/gems/tk-0.2.0/ext/tk\n/usr/bin/ruby2.3 -r ./siteconf20170906-15971-qfma2e.rb extconf.rb\nConfigure options for Ruby/Tk may be updated.\nSo, delete files which depend on old configs.\ncheck functions.checking for ruby_native_thread_p() in ruby.h... yes\nchecking for rb_errinfo() in ruby.h... yes\nchecking for rb_safe_level() in ruby.h... yes\nchecking for rb_hash_lookup() in ruby.h... yes\nchecking for rb_proc_new() in ruby.h... yes\nchecking for rb_obj_untrust() in ruby.h... yes\nchecking for rb_obj_taint() in ruby.h... yes\nchecking for rb_set_safe_level_force() in ruby.h... yes\nchecking for rb_sourcefile() in ruby.h... yes\nchecking for rb_thread_alive_p() in ruby.h... no\nchecking for rb_thread_check_trap_pending() in ruby.h... yes\nchecking for ruby_enc_find_basename() in ruby.h... yes\ncheck libraries.checking for t_open() in -lnsl... no\nchecking for socket() in -lsocket... no\nchecking for dlopen() in -ldl... yes\nchecking for log() in -lm... yes\nSpecified Tcl/Tk version is [\"8.6\", \"8.6\"]\nUse ActiveTcl libraries (if available).\nSearch tclConfig.sh (in /usr/lib/i386-linux-gnu/tcl8.6/tclConfig.sh) and tkConfig.sh (in /usr/lib/i386-linux-gnu/tk8.6/tkConfig.sh).\nFail to find [tclConfig.sh, tkConfig.sh]\nUse X11 libraries (or use TK_XINCLUDES/TK_XLIBSW information on tkConfig.sh).\nchecking for XOpenDisplay() in -lX11... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/bin/$(RUBY_BASE_NAME)2.3\n    --enable-shared\n    --with-tk-old-extconf\n    --without-tk-old-extconf\n    --with-tk-old-extconf\n    --without-tk-old-extconf\n    --with-ActiveTcl\n    --without-ActiveTcl\n    --with-tk-shlib-search-path\n    --without-tk-shlib-search-path\n    --with-tcltkversion\n    --with-tcl-build-dir\n    --without-tcl-build-dir\n    --with-tk-build-dir\n    --without-tk-build-dir\n    --with-tcl-config\n    --without-tcl-config\n    --with-tk-config\n    --without-tk-config\n    --with-tclConfig-dir\n    --with-tkConfig-dir\n    --with-tclConfig-file\n    --without-tclConfig-file\n    --with-tkConfig-file\n    --without-tkConfig-file\n    --with-tcllib\n    --with-tklib\n    --with-tcl-dir\n    --without-tcl-dir\n    --with-tk-dir\n    --without-tk-dir\n    --with-tcl-include\n    --with-tk-include\n    --with-tcl-lib\n    --with-tk-lib\n    --with-tcltk-framework\n    --without-tcltk-framework\n    --with-tcl-framework-dir\n    --without-tcl-framework-dir\n    --with-tk-framework-dir\n    --without-tk-framework-dir\n    --with-tcl-framework-header\n    --without-tcl-framework-header\n    --with-tk-framework-header\n    --without-tk-framework-header\n    --with-X11\n    --without-X11\n    --with-X11-dir\n    --without-X11-dir\n    --with-X11-include\n    --without-X11-include\n    --with-X11-lib\n    --without-X11-lib\n    --enable-tcltk-stubs\n    --disable-tcltk-stubs\n    --enable-tcl-h-ver-check\n    --disable-tcl-h-ver-check\n    --enable-tk-h-ver-check\n    --disable-tk-h-ver-check\n    --enable-mac-tcltk-framework\n    --disable-mac-tcltk-framework\n    --enable-tcltk-framework\n    --disable-tcltk-framework\n    --enable-pthread\n    --disable-pthread\n    --enable-tcl-thread\n    --disable-tcl-thread\n    --enable-space-on-tk-libpath\n    --disable-space-on-tk-libpath\n    --with-nsllib\n    --without-nsllib\n    --with-socketlib\n    --without-socketlib\n    --with-dllib\n    --without-dllib\n    --with-mlib\n    --without-mlib\n    --with-tcl-build-dir\n    --without-tcl-build-dir\n    --with-tk-build-dir\n    --without-tk-build-dir\n    --with-tcltkversion\n    --with-ActiveTcl\n    --without-ActiveTcl\n    --enable-space-on-tk-libpath\n    --disable-space-on-tk-libpath\n    --enable-tcltk-stubs\n    --disable-tcltk-stubs\n    --with-tcltk-stubs\n    --without-tcltk-stubs\n    --with-tcl-dir\n    --without-tcl-dir\n    --with-tcl-include=${tcl-dir}/include\n    --with-tcl-lib=${tcl-dir}/lib\n    --with-tk-dir\n    --without-tk-dir\n    --with-tk-include=${tk-dir}/include\n    --with-tk-lib=${tk-dir}/lib\n    --with-tclConfig-file\n    --without-tclConfig-file\n    --with-tkConfig-file\n    --without-tkConfig-file\n    --with-tclConfig-dir\n    --with-tkConfig-dir\n    --with-tk-shlib-search-path\n    --without-tk-shlib-search-path\n    --with-tklib\n    --with-tcllib\n    --with-X11\n    --without-X11\n    --with-X11-dir\n    --without-X11-dir\n    --with-X11-include\n    --without-X11-include=${X11-dir}/include\n    --with-X11-lib\n    --without-X11-lib=${X11-dir}/lib\n    --with-X11-lib\n    --without-X11-lib\n    --with-X11lib\n    --without-X11lib\n\nWarning:: cannot find X11 library. tcltklib will not be compiled (tcltklib is disabled on your Ruby. That is, Ruby/Tk will not work). Please check configure options. If your Tcl/Tk don't require X11, please try --without-X11.\nCan't find X11 libraries. \nSo, can't make tcltklib.so which is required by Ruby/Tk.\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /var/lib/gems/2.3.0/extensions/x86-linux/2.3.0/tk-0.2.0/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/tk-0.2.0 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86-linux/2.3.0/tk-0.2.0/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby", "linux", "ubuntu", "nohup"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 6, "last_activity_date": 1504715386, "last_edit_date": 1504715386, "creation_date": 1504712184, "answer_id": 46079277, "question_id": 46077076, "link": "https://stackoverflow.com/questions/46077076/when-running-a-ruby-script-via-nohup-why-doesnt-puts-write-to-nohup-out/46079277#46079277", "title": "When running a ruby script via nohup, why doesn&#39;t puts write to nohup.out", "body": "<p>I'm not familiar with running commands through <code>nohup</code>, but approaching this from a \"I'm outputting content to a file and it's only being written after the script exits\" type of problem, those are caused by the output being buffered.</p>\n\n<p>So it's very likely that being run through <code>nohup</code> (and thus redirecting the <code>puts</code> output to <strong>nohup.out</strong>) you lost synchronization. You might need to <a href=\"http://ruby-doc.org/core-2.3.1/IO.html#method-i-flush\" rel=\"noreferrer\"><code>flush</code></a> occasionally or enable <a href=\"http://ruby-doc.org/core-2.3.1/IO.html#method-i-sync\" rel=\"noreferrer\"><code>sync</code></a>. Since <a href=\"https://ruby-doc.org/core-2.2.2/Kernel.html#method-i-puts\" rel=\"noreferrer\"><code>puts</code></a> is \"equivalent to <code>$stdout.puts</code>\":</p>\n\n<pre><code>$stdout.flush # run this, occasionally\n# or just\n$stdout.sync = true\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 953042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4aabcbddb30001f6ef03e813b78d6da5?s=128&d=identicon&r=PG", "display_name": "Chris Kinniburgh", "link": "https://stackoverflow.com/users/953042/chris-kinniburgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 2, "accepted_answer_id": 46079277, "answer_count": 1, "score": 1, "last_activity_date": 1504722412, "creation_date": 1504705935, "last_edit_date": 1504722412, "question_id": 46077076, "link": "https://stackoverflow.com/questions/46077076/when-running-a-ruby-script-via-nohup-why-doesnt-puts-write-to-nohup-out", "title": "When running a ruby script via nohup, why doesn&#39;t puts write to nohup.out", "body": "<p>I'm trying to run a ruby script with <code>nohup</code>:</p>\n\n<blockquote>\n  <p>nohup ruby script.rb &amp;</p>\n</blockquote>\n\n<p>This takes hours to run, but logs its progress via <code>puts</code>.</p>\n\n<p>Usually, I can look at nohup.out to view the recent output of anything I run with nohup.  However, my ruby script doesn't seem to output anything until it finishes, or is killed.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "edited": false, "score": 0, "creation_date": 1509091501, "post_id": 46077042, "comment_id": 80887778, "body": "Did you manage to get this work? I am stuck at the same point, i have tried the answer posted here but that does not work."}], "answers": [{"comments": [{"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "edited": false, "score": 0, "creation_date": 1509093187, "post_id": 46720612, "comment_id": 80888701, "body": "unfortunately this does not work and leads to an error NoMethodError: undefined method `generate&#39; for nil:NilClass"}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "edited": false, "score": 0, "creation_date": 1519460431, "post_id": 46720612, "comment_id": 84927895, "body": "This has since been removed in the lastest Rails 5.2"}], "tags": [], "owner": {"reputation": 1, "user_id": 3224730, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001788653816/picture?type=large", "display_name": "kairon", "link": "https://stackoverflow.com/users/3224730/kairon"}, "is_accepted": false, "score": 0, "last_activity_date": 1507852925, "creation_date": 1507852925, "answer_id": 46720612, "question_id": 46077042, "link": "https://stackoverflow.com/questions/46077042/activestorage-generate-attachement-url/46720612#46720612", "title": "ActiveStorage generate attachement url", "body": "<p>You can try using</p>\n\n<pre><code>@template.image.url\n</code></pre>\n\n<p>Source: <a href=\"http://www.rubydoc.info/gems/activestorage/0.1\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/activestorage/0.1</a></p>\n"}, {"tags": [], "owner": {"reputation": 3289, "user_id": 721631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2ed58126d0a452448d14f002391e3a1c?s=128&d=identicon&r=PG", "display_name": "snowangel", "link": "https://stackoverflow.com/users/721631/snowangel"}, "is_accepted": false, "score": 0, "last_activity_date": 1510531502, "creation_date": 1510531502, "answer_id": 47255401, "question_id": 46077042, "link": "https://stackoverflow.com/questions/46077042/activestorage-generate-attachement-url/47255401#47255401", "title": "ActiveStorage generate attachement url", "body": "<p>I'm pretty sure you're on the old gem, before it was merged into Rails. If you do </p>\n\n<p><code>bundle show activestorage</code></p>\n\n<p>I think it'll say you're using gems/activestorage-0.1</p>\n\n<p>Try bundling edge rails: </p>\n\n<p><code>gem 'rails', git: 'https://github.com/rails/rails.git'</code></p>\n\n<p>and if that doesn't blow up your whole application, you'll be able to access the more recently written methods that you're hoping to use.  </p>\n"}], "owner": {"reputation": 2138, "user_id": 1377879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/88ed0b98e028557cf987548411d8138c?s=128&d=identicon&r=PG", "display_name": "Bolo", "link": "https://stackoverflow.com/users/1377879/bolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1510531502, "creation_date": 1504705822, "last_edit_date": 1507853001, "question_id": 46077042, "link": "https://stackoverflow.com/questions/46077042/activestorage-generate-attachement-url", "title": "ActiveStorage generate attachement url", "body": "<p>I have tried to use <code>ActiveStorage</code> with one attachment. I was able to upload an attachment. </p>\n\n<p>My issue is to generate the URL. I am using <code>url_for</code></p>\n\n<pre><code>class Template &lt; ApplicationRecord\n  acts_as_archival readonly_when_archived: true\n\n  before_archive\n\n  belongs_to :user\n\n  has_many :fields, dependent: :destroy\n  accepts_nested_attributes_for :fields, allow_destroy: true\n\n  has_many :contracts\n  has_one_attached :image\n\nend\n\n&lt;%= url_for(@template.image) %&gt;\n</code></pre>\n\n<p>I have got this error</p>\n\n<pre><code>undefined method `active_storage_attachment_path' for\n#&lt;#&lt;Class:0x007fa1de477520&gt;:0x007fa1defa8b88&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1504707199, "post_id": 46076064, "comment_id": 79116255, "body": "Thanks . Really I don&#39;t understand what is going here, So how do I add another item to the list and that is <code>values.scum, &#39;Scam&#39;</code> representing thanks"}, {"owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "reply_to_user": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1504707542, "post_id": 46076064, "comment_id": 79116506, "body": "@foliwe83 What is your select options? Does it model&#39;s constant or it related model? Can you post your model code here? I&#39;ve a typo mistake in first answer, no I&#39;ll fix it."}, {"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1504707841, "post_id": 46076064, "comment_id": 79116723, "body": "My model is hard coded.  It is not a dynamic list this is exactly like so  <code>=f.select :option,[[&quot;This is a Scam&quot;,&quot;Scam&quot;],[&quot;This is a Spam&quot;,&quot;Spam&quot;],[&quot;This is a bot&quot;,&quot;Bot&quot;]]</code>"}, {"owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "reply_to_user": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1504708395, "post_id": 46076064, "comment_id": 79117167, "body": "@foliwe83 I&#39;ve update my answer. I don&#39;t quite understand your problem, and if answer will not solve it, please add more details to your question."}, {"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1504709901, "post_id": 46076064, "comment_id": 79118315, "body": "Thanks, @cnnr The codes works. So how I can add the array of all the ?<code>spam,scam,bot</code> to the list because this  <code>[I18n.t(&quot;helpers.model.select_attr.values.scam&quot;, &#39;Scam&#39;)</code> displays only the value for scam but i want to have all the three options.Hope you understand"}, {"owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "reply_to_user": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1504723897, "post_id": 46076064, "comment_id": 79126618, "body": "@foliwe83 Oh, now I see ) Completed answer should look like this, with full list of options. Glad to help you :)"}], "tags": [], "owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "is_accepted": true, "score": 2, "last_activity_date": 1504723729, "last_edit_date": 1504723729, "creation_date": 1504703128, "answer_id": 46076064, "question_id": 46075883, "link": "https://stackoverflow.com/questions/46075883/translating-select-option-in-rails-i18n/46076064#46076064", "title": "Translating select option in rails I18n", "body": "<p>Try this:</p>\n\n<p><code>config/locales/es.yml</code></p>\n\n<pre><code>es:\n  helpers:\n    model:\n      select_attr:\n        values:\n          scam: 'estafa'\n          spam: 'correo no deseado'\n          bot: 'larva del moscard\u00f3n'\n</code></pre>\n\n<p><code>config/locales/en.yml</code></p>\n\n<pre><code>en:\n  helpers:\n    model:\n      select_attr:\n        values:\n          scam: 'Scam'\n          spam: 'Spam'\n          bot: 'Bot'\n</code></pre>\n\n<p>And modify your <code>select helper</code> to</p>\n\n<pre><code>= f.select :option, [\n                     [I18n.t(\"helpers.model.select_attr.values.scam\", 'Scam')], \n                     [I18n.t(\"helpers.model.select_attr.values.spam\", 'Spam')], \n                     [I18n.t(\"helpers.model.select_attr.values.bot\", 'Bot')]\n                    ]\n</code></pre>\n\n<p>Rails set options values according to your selected locale (<code>en</code> or <code>es</code>) as in the example above.</p>\n\n<p>First attribute of the option's inner array is a <code>label</code>, which will be show to user. Second - is an option <code>value</code>, which be saved to database field <code>option</code>.</p>\n\n<p>More info you can read at <a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select\" rel=\"nofollow noreferrer\">ActionView::Helpers::FormOptionsHelper</a> docs page.</p>\n"}], "owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1423, "favorite_count": 1, "accepted_answer_id": 46076064, "answer_count": 1, "score": 1, "last_activity_date": 1504723729, "creation_date": 1504702620, "question_id": 46075883, "link": "https://stackoverflow.com/questions/46075883/translating-select-option-in-rails-i18n", "title": "Translating select option in rails I18n", "body": "<p>How can I translate the below code in rails I18n</p>\n\n<pre><code>f.select :option,[[\"This is a Scam\",\"Scam\"],[\"This is a Spam\",\"Spam\"],[\"This is a bot\",\"Bot\"]]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504699617, "post_id": 46074213, "comment_id": 79110303, "body": "Have you overridden the <code>initialize</code>method? This is not normal behaviour."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504700648, "post_id": 46074213, "comment_id": 79111158, "body": "Not to my knowledge.."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1504701280, "post_id": 46074213, "comment_id": 79111665, "body": "Wait, hang on.. I just noticed something. At the top of your post, you wrote: <code>AnswerRecord id: 3926</code>  -- The record <b>already exists</b>!! You have <b>found</b> it; not initialized it. (So the <code>value</code> is <i>not being assigned</i>. It was already there.) This is what&#39;s caused the confusion."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504701302, "post_id": 46074213, "comment_id": 79111681, "body": "As to how/why you managed to create a record with this weird <code>value</code>, I don&#39;t know."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504702292, "post_id": 46074213, "comment_id": 79112400, "body": "That&#39;s a very useful spot - still very confused as to the value part, but at least it&#39;s a step forward, thanks!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504706975, "post_id": 46074213, "comment_id": 79116087, "body": "You must have created a record with this weird <code>value</code> somewhere else; either in the rails console or in the codebase. But this record creation is not shown anywhere above, so I can&#39;t say anything more than that! The &quot;SECOND EDIT&quot; above appears to be unrelated, <i>expected</i> behaviour: you have a database constraint that disallows creating records with a <code>NULL value</code>."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504707163, "post_id": 46074213, "comment_id": 79116219, "body": "Sure but the second edit shows the object has a value that is not null, and when I try save it it thinks that value is null :("}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504707334, "post_id": 46074213, "comment_id": 79116363, "body": "Oh, right... Yeah, that&#39;s weird. Again, have you shown us the <b>whole</b> model?? Do you have any <code>before_save</code> hooks, or <code>before_validation</code>, or <code>before_create</code>, ... that could be affecting this?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504708197, "post_id": 46074213, "comment_id": 79117013, "body": "That&#39;s literaly the whole model, like 15 lines and inherting directly from ActiveRecord::Base"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504708952, "post_id": 46074213, "comment_id": 79117616, "body": "Given that the mystery around your original question is now resolved, I would suggest creating a new SO post with a <i>complete</i> code sample from your &quot;second edit&quot;. How is the record being initialized? What is the <code>answer_records</code> database table schema? Do you have any unusual code that&#39;s overriding default rails behaviour?"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504702586, "post_id": 46075453, "comment_id": 79112647, "body": "Why would you not just edit your answer? This did not offer an alternate solution to the original answer since neither one of them really &quot;answered&quot; the question but rather just pointed at potential issues."}, {"owner": {"reputation": 1338, "user_id": 1083138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c8ac0df5dca340ac995c070458c93a?s=128&d=identicon&r=PG", "display_name": "Dmitriy Budnik", "link": "https://stackoverflow.com/users/1083138/dmitriy-budnik"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504703127, "post_id": 46075453, "comment_id": 79113062, "body": "I think about deleting first answer as it&#39;s not answering exact question and has too much noise"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504703197, "post_id": 46075453, "comment_id": 79113126, "body": "If you believe that to be true then delete it otherwise the combination of these 2 answers is &quot;creating too much noise&quot; in my opinion"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1504703892, "post_id": 46075453, "comment_id": 79113714, "body": "Thanks for taking the time to go through it all Dmitriy - genuinely appreciated random stranger!!"}], "tags": [], "owner": {"reputation": 1338, "user_id": 1083138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c8ac0df5dca340ac995c070458c93a?s=128&d=identicon&r=PG", "display_name": "Dmitriy Budnik", "link": "https://stackoverflow.com/users/1083138/dmitriy-budnik"}, "is_accepted": true, "score": 1, "last_activity_date": 1504707174, "last_edit_date": 1504707174, "creation_date": 1504701422, "answer_id": 46075453, "question_id": 46074213, "link": "https://stackoverflow.com/questions/46074213/ruby-find-or-intialize-by-not-assigning-attributes/46075453#46075453", "title": "Ruby - find_or_intialize_by not assigning attributes", "body": "<p>You have to understand how <code>find_or_initialize_by</code> works, looking on code from <code>show-method</code> you have to see that it's:</p>\n\n<pre><code> def find_or_initialize_by(attributes, &amp;block)\n   find_by(attributes) || new(attributes, &amp;block)\n end\n</code></pre>\n\n<p>so in your case it's like:</p>\n\n<pre><code>record.answer_records.find_by(stage_answer_id: vote_id) ||\nrecord.answer_records.new(stage_answer_id: vote_id)\n</code></pre>\n\n<p>I assume that you think that you are calling new, but probably you already have an record with matching <code>stage_product_id</code> and <code>stage_answer_id</code> so <code>.new</code> is never called. And probably that record have that confusing <code>value</code> text field.</p>\n\n<p>you may call <code>.persisted?</code> method to verify if record is new or from DB, and check DB logs in your console:</p>\n\n<pre><code>vote_id = 1534\nvote = record.answer_records.find_or_initialize_by(stage_answer_id: vote_id)\nputs vote.persisted?\n</code></pre>\n\n<p><em>It worth noting that @tom-lord came up with answer in <a href=\"https://stackoverflow.com/questions/46074213/ruby-find-or-intialize-by-not-assigning-attributes/46075453?noredirect=1#comment79111665_46074213\">comments</a> a few moments before me</em></p>\n"}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 46075453, "answer_count": 1, "score": 0, "last_activity_date": 1504707174, "creation_date": 1504697883, "last_edit_date": 1504700260, "question_id": 46074213, "link": "https://stackoverflow.com/questions/46074213/ruby-find-or-intialize-by-not-assigning-attributes", "title": "Ruby - find_or_intialize_by not assigning attributes", "body": "<p>I'm trying to use find_or_initialize_by however it is not assigning attributes as it should do.. I have the following:</p>\n\n<pre><code>vote_id = 1534\nvote = record.answer_records.find_or_initialize_by(stage_answer_id: vote_id)\n</code></pre>\n\n<p>When I enter binding.pry I can see the following:</p>\n\n<pre><code>vote\n=&gt; #&lt;AnswerRecord id: 3926, stage_record_id: 2210, stage_answer_id: nil, value: \"{:stage_answer_id=&gt;1563}\", correct: false, created_at: \"2017-09-06 11:33:49\", updated_at: \"2017-09-06 11:33:49\", deleted_at: nil&gt;\n</code></pre>\n\n<p>For some reason it is assigning</p>\n\n<pre><code>value: \"{:stage_answer_id=&gt;1563}\" \n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>stage_answer_id: 1563\n</code></pre>\n\n<p>What am I doing wrong? Thanks in advance</p>\n\n<p>EDIT: answer_record.rb</p>\n\n<pre><code>class AnswerRecord &lt; ActiveRecord::Base\n\n  acts_as_paranoid\n\n  belongs_to :stage_record\n  belongs_to :stage_answer\n  has_one :activity_feedback\n\n  def self.for_answer(answer)\n    find_by(stage_answer: answer)\n  end\n\n  def wrong?\n    !correct\n  end\nend\n</code></pre>\n\n<p>SECOND EDIT:\nMore from byebug:</p>\n\n<pre><code>&gt;&gt; opinion\n=&gt; #&lt;AnswerRecord id: nil, stage_record_id: nil, stage_answer_id: 1692, value: \"This is my answer\", correct: true, created_at: nil, updated_at: nil, deleted_at: nil&gt;\n&gt;&gt; opinion.save\n!! #&lt;ActiveRecord::StatementInvalid: PG::NotNullViolation: ERROR:  null value in column \"value\" violates not-null constraint\nDETAIL:  Failing row contains (3938, 2222, 1692, null, f, 2017-09-06 12:03:09.851213, 2017-09-06 12:03:09.851213, null).\n: INSERT INTO \"answer_records\" (\"stage_answer_id\", \"stage_record_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"&gt;\n</code></pre>\n\n<p>As the log shows PSQL is trying to update other attributes and not the 'value' attribute, and I don't have any intializers set up..</p>\n\n<p>THIRD EDIT:</p>\n\n<pre><code>show-method record.answer_records.find_or_initialize_by\n</code></pre>\n\n<p>returns the following</p>\n\n<pre><code>From: /Users/mark/.rvm/gems/ruby-2.3.2/gems/activerecord-4.2.7.1/lib/active_record/relation.rb @ line 223:\n13:15:53 web.1  | Owner: ActiveRecord::Relation\n13:15:53 web.1  | Visibility: public\n13:15:53 web.1  | Number of lines: 3\n13:15:53 web.1  | \n13:15:53 web.1  | def find_or_initialize_by(attributes, &amp;block)\n13:15:53 web.1  |   find_by(attributes) || new(attributes, &amp;block)\n13:15:53 web.1  | end\n</code></pre>\n"}, {"tags": ["json", "ruby", "xml"], "comments": [{"owner": {"reputation": 4912, "user_id": 3307720, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a9af81f6e3d88cba98772f0419f85214?s=128&d=identicon&r=PG&f=1", "display_name": "nasch", "link": "https://stackoverflow.com/users/3307720/nasch"}, "edited": false, "score": 1, "creation_date": 1504832894, "post_id": 46073675, "comment_id": 79177230, "body": "I wouldn&#39;t tag this Android as it&#39;s not significant that the XML is from Android - it could be any XML and the answer would be the same."}, {"owner": {"reputation": 53, "user_id": 3515619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/727497849/picture?type=large", "display_name": "Harunhh123", "link": "https://stackoverflow.com/users/3515619/harunhh123"}, "reply_to_user": {"reputation": 4912, "user_id": 3307720, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a9af81f6e3d88cba98772f0419f85214?s=128&d=identicon&r=PG&f=1", "display_name": "nasch", "link": "https://stackoverflow.com/users/3307720/nasch"}, "edited": false, "score": 0, "creation_date": 1509032429, "post_id": 46073675, "comment_id": 80864324, "body": "Good point nasch"}], "answers": [{"tags": [], "owner": {"reputation": 554, "user_id": 5609492, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02b2b4807a12c68276c1e2fcbb5abb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Schiller", "link": "https://stackoverflow.com/users/5609492/simon-schiller"}, "is_accepted": true, "score": 1, "last_activity_date": 1504701560, "creation_date": 1504701560, "answer_id": 46075511, "question_id": 46073675, "link": "https://stackoverflow.com/questions/46073675/ruby-convert-xml-to-json-putting-the-values-of-name-as-keys-and-the-values-of/46075511#46075511", "title": "Ruby : Convert XML to JSON putting the values of Name as keys and the values of Contents as values", "body": "<p>You can use XSLT to transform the XML and then use nokogiri to transform it:</p>\n\n<p>The XSLT I used:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;\n&lt;xsl:template match=\"resources\"&gt;\n{\n    \"resources\": {\n        &lt;xsl:for-each select=\"string\"&gt;\n            \"&lt;xsl:value-of select=\"./@name\"/&gt;\":\n            \"&lt;xsl:value-of select=\".\"/&gt;\"\n            &lt;xsl:choose&gt;\n                &lt;xsl:when test=\"position() != last()\"&gt;,&lt;/xsl:when&gt;\n            &lt;/xsl:choose&gt;\n        &lt;/xsl:for-each&gt;\n    }\n}\n&lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>Apply the XSLT with nokogiri:</p>\n\n<pre><code>require 'nokogiri'\ndocument = Nokogiri::XML(File.read('input.xml'))\ntemplate = Nokogiri::XSLT(File.read('template.xslt'))\ntransformed_document = template.transform(document)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3515619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/727497849/picture?type=large", "display_name": "Harunhh123", "link": "https://stackoverflow.com/users/3515619/harunhh123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 46075511, "answer_count": 1, "score": 0, "last_activity_date": 1509032381, "creation_date": 1504696146, "last_edit_date": 1509032381, "question_id": 46073675, "link": "https://stackoverflow.com/questions/46073675/ruby-convert-xml-to-json-putting-the-values-of-name-as-keys-and-the-values-of", "title": "Ruby : Convert XML to JSON putting the values of Name as keys and the values of Contents as values", "body": "<p>I have an android XML file in the following format</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;resources&gt;\n  &lt;!-- I AM A COMMENT --&gt;\n\n  &lt;!-- General --&gt;\n  &lt;string name=\"foo\"&gt;foo&lt;/string&gt;\n  &lt;string name=\"bar\"&gt;bar&lt;/string&gt;\n &lt;/resources&gt;\n</code></pre>\n\n<p>I want my JSON output to look like this:</p>\n\n<pre><code> {\n    \"resources\": {\n        \"foo\": \"foo\",\n        \"bar\": \"bar\"\n    }\n }\n</code></pre>\n\n<p>That is, I want the values of the node names to be the Keys, and the Values of the contents of the nodes to be the values in the JSON KV pairs. </p>\n\n<p>is this doable with nokogiri attributes?  or crack? </p>\n\n<p>or must i perform pre-processing on the XML beforehand?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "edited": false, "score": 0, "creation_date": 1504697608, "post_id": 46073606, "comment_id": 79108901, "body": "why that 2nd cmd ? the 1st I think re-gave my user the ownership of the dir , but why specify the it as 655 permissions ? bundle worked without sudo after the 1st cmd , but still <code>rails s</code> is not working , is there anything to resolve missing for rails ? Thanks for your help"}, {"owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "edited": false, "score": 0, "creation_date": 1504697740, "post_id": 46073606, "comment_id": 79108987, "body": "rails s gave the following without sudo:  <code>Run </code>rails server -h` for more startup options FATAL: Listen error: unable to monitor directories for changes. Visit <a href=\"https://github.com/guard/listen/wiki/Increasing-the-amount-of-inotify-watchers\" rel=\"nofollow noreferrer\">github.com/guard/listen/wiki/&hellip;</a> for info on how to fix this. Exiting` the github link is unclear to me , answer is not marked"}], "tags": [], "owner": {"reputation": 942, "user_id": 555297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042af2127e5a00db66519681e1de46e9?s=128&d=identicon&r=PG", "display_name": "Prajjwal", "link": "https://stackoverflow.com/users/555297/prajjwal"}, "is_accepted": true, "score": 3, "last_activity_date": 1504695957, "creation_date": 1504695957, "answer_id": 46073606, "question_id": 46073214, "link": "https://stackoverflow.com/questions/46073214/how-to-make-bundler-work-again-for-non-root-users-after-mistakenly-using-it-w/46073606#46073606", "title": "How to make bundler work again for non root users ? (after mistakenly using it with root)", "body": "<p>You should try changing the owner and setting the correct permissions for your <code>~/.bundle</code>.</p>\n\n<p>Try:</p>\n\n<pre><code>sudo chown -R &lt;youruser&gt; ~/.bundle\n</code></pre>\n\n<p>Followed by:</p>\n\n<pre><code>sudo chmod -R 655 ~/.bundle\n</code></pre>\n"}], "owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1544, "favorite_count": 0, "accepted_answer_id": 46073606, "answer_count": 1, "score": 1, "last_activity_date": 1504695957, "creation_date": 1504694744, "last_edit_date": 1504695106, "question_id": 46073214, "link": "https://stackoverflow.com/questions/46073214/how-to-make-bundler-work-again-for-non-root-users-after-mistakenly-using-it-w", "title": "How to make bundler work again for non root users ? (after mistakenly using it with root)", "body": "<p>I am new to Rails , I ran bundler as root by mistake &amp; now it is not working correctly. I tried to use <code>gem uninstall bundler</code> then <code>gem install bundler</code> but still it is not fixed.\nHow to make bundler work again for non root users (after mistakenly using it with root)?</p>\n\n<p>Note: \nI have installed and use rbenv, but after installing some gems on the system directly</p>\n\n<p>The error that happens is that bundle doctor shows correct missing gems but sudo bundle doctor doesn't as shown below</p>\n\n<pre><code>~/my_ruby_projects/myblog3$ bundle doctor\nThe latest bundler is 1.16.0.pre.1, but you are currently running 1.15.4.\nTo update, run `gem install bundler --pre`\nThe following gems are missing\n * execjs (2.7.0)\n * coffee-script (2.4.1)\n * coffee-rails (4.2.2)\n * font-awesome-rails (4.7.0.2)\n * temple (0.8.0)\n</code></pre>\n\n<p>using <code>sudo</code>\n    ~/my_ruby_projects/myblog3$ sudo bundle doctor\n    The latest bundler is 1.16.0.pre.1, but you are currently running 1.15.4.\n    To update, run <code>gem install bundler --pre</code>\n    The Gemfile's dependencies are satisfied\n    No issues found with the installed bundle</p>\n\n<p>Thanks for your help</p>\n\n<p>update:\nI knew that bundle with sudo is correct since it gave the real gems that rails tells me they are missing , if I use bundle install without sudo it gives error as below (even if change it to chmod 777)</p>\n\n<pre><code>~/my_ruby_projects/myblog3$ bundle install\nThe latest bundler is 1.16.0.pre.1, but you are currently running 1.15.4.\nTo update, run `gem install bundler --pre`\nThere was an error while trying to write to `/home/usrname/.bundle/cache/compact_index/rubygems.org.443.29b0360b937aa4d161703e6160654e47/versions`. It is likely that you\nneed to grant write permissions for that path.\n</code></pre>\n\n<p>for sudo bundle install it says all is installed but then rails throws error that I need to install gems (<strong>which bundle doctor gave without sudo</strong>)</p>\n\n<pre><code>/my_ruby_projects/myblog3$ sudo bundle install\nThe latest bundler is 1.16.0.pre.1, but you are currently running 1.15.4.\nTo update, run `gem install bundler --pre`\nDon't run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this application for all non-root users on this machine.\nUsing rake 12.0.0\nUsing concurrent-ruby 1.0.5\n# many other gems\nUsing redis-rails 5.0.2\nUsing rails_admin 1.2.0\nBundle complete! 30 Gemfile dependencies, 98 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n</code></pre>\n\n<p>Update 2:\n<code>rails s</code> was giving error that gem files are missing\nbut <code>**sudo** rails s</code> worked without errors</p>\n"}, {"tags": ["ruby", "delayed-job"], "comments": [{"owner": {"reputation": 1402, "user_id": 6936087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cf09b5bbf7a202fc45de30ccdd4eb9a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandr", "link": "https://stackoverflow.com/users/6936087/alexandr"}, "edited": false, "score": 2, "creation_date": 1521738789, "post_id": 46073051, "comment_id": 85871155, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44808629/delayed-job-exclude-queue\">Delayed job exclude queue</a>"}], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1504694177, "creation_date": 1504694177, "question_id": 46073051, "link": "https://stackoverflow.com/questions/46073051/exclude-queue-from-delayed-job-worker", "title": "Exclude queue from delayed_job worker", "body": "<p>In delayed_jobs it is possible to run a worker for a specific queues. I can't seem to find any examples/documentation on how to run a worker and exclude a specific queue.</p>\n\n<p>I am trying to have 1 worker for super high priority stuff and 1 that handles the rest.</p>\n\n<p>Is the only way to achieve this by specifying what queues relate to what worker? Is there no way to spawn a worker that runs all queues except queue_x?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504694656, "post_id": 46073050, "comment_id": 79106895, "body": "<i>&quot;somehow not able to do it&quot;</i> \u2013 can you show your approach, what have you tried? Was there an error or an unexpected result?"}, {"owner": {"reputation": 21, "user_id": 6653632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_hbZaiwjRAs/AAAAAAAAAAI/AAAAAAAADiE/RFPVx2S2H1Y/photo.jpg?sz=128", "display_name": "Atul Mishra", "link": "https://stackoverflow.com/users/6653632/atul-mishra"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504694936, "post_id": 46073050, "comment_id": 79107071, "body": "@Stefan i tried details.push(sorter_version), and then it got appended at last. but that is not what i wanted."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1504695416, "post_id": 46073050, "comment_id": 79107392, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. <a href=\"https://stackoverflow.com\">Stack Overflow</a> is not a &quot;write-my-code-for-me-service&quot;! If you are looking for <i>that</i>, hire a programmer."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1504695447, "post_id": 46073050, "comment_id": 79107424, "body": "&quot;somehow not able to do it&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1504695464, "post_id": 46073050, "comment_id": 79107432, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21, "user_id": 6653632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_hbZaiwjRAs/AAAAAAAAAAI/AAAAAAAADiE/RFPVx2S2H1Y/photo.jpg?sz=128", "display_name": "Atul Mishra", "link": "https://stackoverflow.com/users/6653632/atul-mishra"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1504695946, "post_id": 46073050, "comment_id": 79107749, "body": "@J&#246;rgWMittag Next me i will make sure that i mention everything.... it was my first query so not aware of this thing ... and i know &quot;Stack Overflow is not a &quot;write-my-code-for-me-service&quot;! &quot; , needed a little helpto get the concept.Thanks anyway"}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1504695498, "last_edit_date": 1504695498, "creation_date": 1504694996, "answer_id": 46073285, "question_id": 46073050, "link": "https://stackoverflow.com/questions/46073050/adding-value-to-hashing-in-ruby-on-rails/46073285#46073285", "title": "Adding value to Hashing in ruby on rails", "body": "<p>Just use <code>each_with_index</code>:</p>\n\n<pre><code>details.each_with_index { |d, i| d[:sorter_version] = sorter_Version[i] }\n#=&gt; [{:project_name=&gt;\"ABC\", :project_id=&gt;12345, :total_count=&gt;1, \n#     :stories=&gt;[\"#&lt;TrackerApi::Resources::Story id=987654&gt;\"], \n#     :sorter_version=&gt;[\"Abc \", \"30 August 2017\"]}, \n#    {:project_name=&gt;\"XYZ\", :project_id=&gt;54321, :total_count=&gt;1, \n#     :stories=&gt;[\"#&lt;TrackerApi::Resources::Story id=123456&gt;\"], \n#     :sorter_version=&gt;[\"Not Accepted\", \"30 August 2017\"]}]\n</code></pre>\n\n<p>Immutable version:</p>\n\n<pre><code>details.map.with_index { |d, i| d.merge(sorter_version: sorter_Version[i]) }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6653632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_hbZaiwjRAs/AAAAAAAAAAI/AAAAAAAADiE/RFPVx2S2H1Y/photo.jpg?sz=128", "display_name": "Atul Mishra", "link": "https://stackoverflow.com/users/6653632/atul-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 46073285, "answer_count": 1, "score": 0, "last_activity_date": 1504702667, "creation_date": 1504694172, "last_edit_date": 1504702667, "question_id": 46073050, "link": "https://stackoverflow.com/questions/46073050/adding-value-to-hashing-in-ruby-on-rails", "title": "Adding value to Hashing in ruby on rails", "body": "<p>I have an hash which has data something like : </p>\n\n<pre><code>details = [{\n  :project_name=&gt;\"ABC\", :project_id=&gt;12345, :total_count=&gt;1, \n  :stories=&gt;[#&lt;TrackerApi::Resources::Story id=987654&gt;]\n}, {\n  :project_name=&gt;\"XYZ\", :project_id=&gt;54321, :total_count=&gt;1, \n  :stories=&gt;[#&lt;TrackerApi::Resources::Story id=123456&gt;]\n}]\n</code></pre>\n\n<p>I want to insert another array with data such as :</p>\n\n<pre><code>sorter_Version = [[\"Abc \", \"30 August 2017\"], [\"Not Accepted\", \"30 August 2017\"]]\n</code></pre>\n\n<p>in details hash , but somehow not able to do it. can someone please help me out .Thanks in advance.</p>\n\n<p>Output should be like :</p>\n\n<pre><code>details = [{\n      :project_name=&gt;\"ABC\", :project_id=&gt;12345, :total_count=&gt;1, \n      :stories=&gt;[#&lt;TrackerApi::Resources::Story id=987654&gt;],\n      :sorter_version=&gt;[\"Abc \",\"30 August 2017\"]\n    }, {\n      :project_name=&gt;\"XYZ\", :project_id=&gt;54321, :total_count=&gt;1, \n      :stories=&gt;[#&lt;TrackerApi::Resources::Story id=123456&gt;],\n      :sorter_version=&gt;[\"Not Accepted \",\"30 August 2017\"]\n    }]    \n</code></pre>\n"}, {"tags": ["ruby", "integer"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504694358, "post_id": 46072135, "comment_id": 79106705, "body": "See Ruby&#39;s documentation on <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/literals_rdoc.html#label-Numbers\" rel=\"nofollow noreferrer\">Number literals</a>: <i>&quot;The underscore may be used to enhance readability for humans&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1504692626, "last_edit_date": 1504692626, "creation_date": 1504692165, "answer_id": 46072322, "question_id": 46072135, "link": "https://stackoverflow.com/questions/46072135/does-converting-integers-with-underscores-throw-silent-errors/46072322#46072322", "title": "Does converting integers with underscores throw silent errors?", "body": "<p>Underscores are just a facilitation for the developer, underlying numbers have no underscores.</p>\n\n<p>A simple solution for your exercise</p>\n\n<pre><code>def summed_digits2(int)\n  int.to_s.chars.map(&amp;:to_i).inject(:+)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504694013, "post_id": 46072638, "comment_id": 79106452, "body": "Although Ruby&#39;s parser recognizes <code>123_456_789</code> and <code>0x75bcd15</code> as 123456789, it cannot parse roman numerals. Saying that it can be written that way might be confusing."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504695027, "post_id": 46072638, "comment_id": 79107133, "body": "@Stefan your remark is correct and useful. I mentioned in the answer that the Ruby parser cannot parse Roman numerals."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1504707927, "post_id": 46072638, "comment_id": 79116799, "body": "@axiac But you can easily <a href=\"https://gist.github.com/meineerde/3c8dfe497aa616bfaef2af6d41895322\" rel=\"nofollow noreferrer\">add this</a> too :)"}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 3, "last_activity_date": 1504694782, "last_edit_date": 1504694782, "creation_date": 1504692981, "answer_id": 46072638, "question_id": 46072135, "link": "https://stackoverflow.com/questions/46072135/does-converting-integers-with-underscores-throw-silent-errors/46072638#46072638", "title": "Does converting integers with underscores throw silent errors?", "body": "<p><code>'123_456_789'</code> is a string that contains digits and underscores. You can use <code>regex</code> or string processing functions to ignore the underscores and process only the digit-resembling characters.</p>\n\n<p><code>123_456_789</code> is a number. It is the same as <code>123456789</code>. It is also the same as <code>0x75bcd15</code>. Its value is the same, even if it is written in different ways. It can be, as well, written using <a href=\"https://en.wikipedia.org/wiki/Roman_numerals\" rel=\"nofollow noreferrer\">Roman numerals</a> but its value is still <code>123456789</code>.<br>\n<em>(The Ruby parser <strong>does not</strong> understand Roman numerals. The statement is used here just to emphasize the idea.)</em></p>\n\n<p>There are no underscores in a number because a number is not a string. It is <a href=\"https://en.wikipedia.org/wiki/Number\" rel=\"nofollow noreferrer\">an amount, a quantity, a concept</a>, no matter how it is written on paper or in computer programs.</p>\n\n<hr>\n\n<p>Back to your problem, let's remark that \"the sum of digits\" depends on the way the number is represented. Most of the times it is written using the usual 10 base and this is how we'll use it here.</p>\n\n<p>There are many ways to compute the sum of digits of a given number. My favorite:</p>\n\n<pre><code>123_456_789.to_s.chars.map(&amp;:to_i).inject(:+)\n</code></pre>\n\n<p>How it works:</p>\n\n<pre><code>123_456_789           # this is a number: 123456789\n    .to_s             # convert to string: \"123456789\"\n    .chars            # split to an array of chars: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]\n    .map(&amp;:to_i)      # convert each array item to number: [1, 2, 3, 4, 5, 6, 7, 8, 9]\n    .inject(:+)       # \"inject\" the addition operator (\"+\") between the items and compute: 45\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1504696910, "creation_date": 1504696910, "answer_id": 46073917, "question_id": 46072135, "link": "https://stackoverflow.com/questions/46072135/does-converting-integers-with-underscores-throw-silent-errors/46073917#46073917", "title": "Does converting integers with underscores throw silent errors?", "body": "<p>Other answers are good. I'll just point out that ruby 2.4 brings <code>Integer#digits</code> and <code>Enumerable#sum</code>.</p>\n\n<pre><code>123_456_789.digits # =&gt; [9, 8, 7, 6, 5, 4, 3, 2, 1]\n123_456_789.digits.sum # =&gt; 45\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 4073708, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5fc9bc081d93bff93c1442a7d90695b1?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/4073708/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1504697145, "creation_date": 1504691629, "last_edit_date": 1504697145, "question_id": 46072135, "link": "https://stackoverflow.com/questions/46072135/does-converting-integers-with-underscores-throw-silent-errors", "title": "Does converting integers with underscores throw silent errors?", "body": "<p>I was working on an exercise earlier today, and it involved summing all the digits in a given integer. One of these digits had underscores.</p>\n\n<p>I decided to try and <em>not</em> use a regex to only catch the numbers. Instead, I simply converted the integer to a string, use an each_char loop to grab each char, and push it to a new array while converting to an integer.</p>\n\n<p>However, it seems that it ignores the underscores (and, perhaps, rightly so). Maybe I'm thinking of this incorrectly, but it's my understanding that an underscore is not an integer. </p>\n\n<p>So, during the push/conversion process, is Ruby throwing a silent error somewhere, which makes it ignore the underscore and continue unimpeded? If so, is there a way to catch and view this error?</p>\n\n<p>Here is the code I'm talking about.</p>\n\n<pre><code>def summed_digits2(int)\n  num_arr = []\n  int.to_s.each_char {|x| num_arr.push(x.to_i)}\n  num_arr.reduce(:+)\nend\n\nputs summed_digits2(123_456_789)\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rubygems", "xero-api", "xeroizer"], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1504700383, "creation_date": 1504700383, "answer_id": 46075074, "question_id": 46071951, "link": "https://stackoverflow.com/questions/46071951/xeroizerapiexception-queryparseexception-no-property-or-field-inv-id-exis/46075074#46075074", "title": "Xeroizer::ApiException : QueryParseException: No property or field &#39;inv_id&#39; exists", "body": "<p>Looks like the problem is that you're not interpolating the <code>inv_id</code>s correctly. You probably need to do something like this:</p>\n\n<pre><code>invoices = xero.Invoice.all(:where =&gt; \"InvoiceID==\\\"#{inv_id}\\\"\")\n</code></pre>\n\n<p>You may have to perform some additional formatting on the <code>inv_id</code> variable to make it a valid Xero string. <a href=\"https://github.com/waynerobinson/xeroizer#retrieving-data\" rel=\"nofollow noreferrer\">https://github.com/waynerobinson/xeroizer#retrieving-data</a></p>\n"}], "owner": {"reputation": 11, "user_id": 8568168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae731f3c8201f7a141ff995421e3c60a?s=128&d=identicon&r=PG&f=1", "display_name": "i&#39;m_a_good_friend", "link": "https://stackoverflow.com/users/8568168/im-a-good-friend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504700383, "creation_date": 1504691158, "last_edit_date": 1504691843, "question_id": 46071951, "link": "https://stackoverflow.com/questions/46071951/xeroizerapiexception-queryparseexception-no-property-or-field-inv-id-exis", "title": "Xeroizer::ApiException : QueryParseException: No property or field &#39;inv_id&#39; exists", "body": "<p>I am Trying to get all the invoices in a single API hit.\nBecause, for every user having 100's of invoices. </p>\n\n<p>It will exceed the API limit (Minute Limit: 60 calls in a rolling 60 second window). </p>\n\n<p>I am trying to store all the invoice id into a single array and from that i will get the details of the user and then i loop the records locally and display it. It's the right way?</p>\n\n<pre><code>invoice_ids = user.estimates.select(\"invoice_id\") || [] xero = Xeroizer::PrivateApplication.new(XERO_CONFIG[\"key\"], XERO_CONFIG[\"secret\"], XERO_CONFIG[\"path\"], :rate_limit_sleep =&gt; 5)\ninvoices = ['795f789b-5958-xxxx-yyyy-48436dbe7757','987g389b-5958-xxxx-yyyy-68636dbe5589'] \ninv_id = invoice_ids.pluck(:invoice_id) \ninvoices = xero.Invoice.all(:where =&gt; 'InvoiceID==inv_id')\n</code></pre>\n\n<p>Also, I am getting the following error:</p>\n\n<pre><code>Xeroizer::ApiException (QueryParseException: No property or field 'inv_id' exists in type 'Invoice')\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504688488, "post_id": 46070852, "comment_id": 79102405, "body": "What you&#39;re trying to achive?"}, {"owner": {"reputation": 31, "user_id": 2342628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6e4229521518347cc24002ecb14e85?s=128&d=identicon&r=PG", "display_name": "Sanjith", "link": "https://stackoverflow.com/users/2342628/sanjith"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504688593, "post_id": 46070852, "comment_id": 79102493, "body": "Just I&#39;m curious to know how it is disabled from creating new object?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504688697, "post_id": 46070852, "comment_id": 79102575, "body": "Did you read the documentation ? <a href=\"https://ruby-doc.org/core-2.2.0/TrueClass.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/TrueClass.html</a>"}, {"owner": {"reputation": 31, "user_id": 2342628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6e4229521518347cc24002ecb14e85?s=128&d=identicon&r=PG", "display_name": "Sanjith", "link": "https://stackoverflow.com/users/2342628/sanjith"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504689010, "post_id": 46070852, "comment_id": 79102814, "body": "Yes, I have seen &quot;The global value true is the only instance of class TrueClass&quot;. But, I wanted to know how it was stopped creating new instance for the class? Can we write our own class with that &quot;no one can initialize it and having only one instance?&quot; if so, how can we achieve it?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2342628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6e4229521518347cc24002ecb14e85?s=128&d=identicon&r=PG", "display_name": "Sanjith", "link": "https://stackoverflow.com/users/2342628/sanjith"}, "edited": false, "score": 0, "creation_date": 1504689910, "post_id": 46071386, "comment_id": 79103524, "body": "Thanks @stefan. I understand a little bit. So, here comes my second question: Can we write a class similar to this?"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 5, "last_activity_date": 1504693497, "last_edit_date": 1504693497, "creation_date": 1504689669, "answer_id": 46071386, "question_id": 46070852, "link": "https://stackoverflow.com/questions/46070852/why-cant-we-initialize-trueclass-in-ruby/46071386#46071386", "title": "Why can&#39;t we initialize TrueClass in Ruby", "body": "<blockquote>\n  <p>I just wanted to know how that is possible even if that is the child class of Object.</p>\n</blockquote>\n\n<p>It works by undefining <code>allocate</code> and <code>new</code>. Here's the <a href=\"https://github.com/ruby/ruby/blob/v2_4_1/object.c#L3608-L3609\" rel=\"nofollow noreferrer\">corresponding C code</a>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>rb_undef_alloc_func(rb_cTrueClass);\nrb_undef_method(CLASS_OF(rb_cTrueClass), \"new\");\n</code></pre>\n\n<p>You can achieve a similar result in Ruby via <a href=\"http://ruby-doc.org/core-2.4.1/Module.html#method-i-undef_method\" rel=\"nofollow noreferrer\"><code>undef_method</code></a>:</p>\n\n<pre><code>class FooClass\n  ::FOO = new    # &lt;- this will be the only Foo instance\n  class &lt;&lt; self\n    undef_method :allocate\n    undef_method :new\n  end\nend\n\nFooClass.new      #=&gt; NoMethodError: undefined method `new' for FooClass:Class\nFooClass.allocate #=&gt; NoMethodError: undefined method `allocate' for FooClass:Class\n\nFOO #=&gt; #&lt;FooClass:0x007fddc284c478&gt;\n</code></pre>\n\n<p>\"similar\", because <code>TrueClass.allocate</code> doesn't actually raise a <code>NoMethodError</code>, but a <code>TypeError</code>:</p>\n\n<pre><code>TrueClass.allocate #=&gt; TypeError: allocator undefined for TrueClass\n</code></pre>\n\n<p>Unfortunately, <code>rb_undef_alloc_func</code> is not available from within Ruby. We could mimic the behavior by overriding <code>allocate</code>:</p>\n\n<pre><code>class FooClass\n  class &lt;&lt; self\n    def allocate\n      raise TypeError, \"allocator undefined for #{self}\"\n    end\n    undef_method :new\n  end\nend\n\nFooClass.allocate  #=&gt; TypeError: allocator undefined for FooClass\n</code></pre>\n\n<p>Not sure, which approach is cleaner.</p>\n\n<hr>\n\n<p>The above changes prevent you from creating an instance via <code>new</code>, but there are other ways:</p>\n\n<pre><code>FOO       #=&gt; #&lt;FooClass:0x007fddc284c478&gt;\n\nFOO.dup   #=&gt; #&lt;FooClass:0x007fad721122c8&gt;\nFOO.clone #=&gt; #&lt;FooClass:0x007f83bc157ba0&gt;\n\nMarshal.load(Marshal.dump(FOO)) #=&gt; #&lt;FooClass:0x007f83bc13e330&gt;\n</code></pre>\n\n<p>To account for all these special cases, Ruby' stdlib provides the <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/singleton/rdoc/Singleton.html\" rel=\"nofollow noreferrer\"><code>Singleton</code></a> module:</p>\n\n<pre><code>require 'singleton'\n\nclass Foo\n  include Singleton\nend\n</code></pre>\n\n<p>It works by making <code>allocate</code> and <code>new</code> private methods: (among <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/singleton/rdoc/Singleton.html#module-Singleton-label-Implementation\" rel=\"nofollow noreferrer\">other changes</a>)</p>\n\n<pre><code>Foo.new      #=&gt; NoMethodError: private method `new' called for Foo:Class\nFoo.allocate #=&gt; NoMethodError: private method `new' called for\n</code></pre>\n\n<p>And it adds <code>instance</code> which returns an instance: (or <em>the</em> instance, there's only one)</p>\n\n<pre><code>Foo.instance #=&gt; #&lt;Foo:0x007fdca11117e8&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": true, "score": 7, "last_activity_date": 1504689800, "creation_date": 1504689800, "answer_id": 46071429, "question_id": 46070852, "link": "https://stackoverflow.com/questions/46070852/why-cant-we-initialize-trueclass-in-ruby/46071429#46071429", "title": "Why can&#39;t we initialize TrueClass in Ruby", "body": "<blockquote>\n  <p>I just wanted to know how that is possible even if that is the child class of Object. If we wanted to write a class similar to this how can we achieve it?</p>\n</blockquote>\n\n<p>You can undefine inherited methods using the <code>undef</code> keyword. Since <code>new</code> is a class method, you'll have to use <code>undef</code> inside the class's singleton class. That would look like this:</p>\n\n<pre><code>class &lt;&lt;MyClass\n  undef new\nend\nMyClass.new # NoMethodError: undefined method `new' for MyClass:Class\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2342628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6e4229521518347cc24002ecb14e85?s=128&d=identicon&r=PG", "display_name": "Sanjith", "link": "https://stackoverflow.com/users/2342628/sanjith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 46071429, "answer_count": 2, "score": 1, "last_activity_date": 1504693497, "creation_date": 1504688227, "last_edit_date": 1504689796, "question_id": 46070852, "link": "https://stackoverflow.com/questions/46070852/why-cant-we-initialize-trueclass-in-ruby", "title": "Why can&#39;t we initialize TrueClass in Ruby", "body": "<p>Why can't we initialize <code>TrueClass</code> in Ruby? I get this:</p>\n\n<pre><code>TrueClass.new # =&gt; NoMethodError: undefined method `new' for TrueClass:Class\n</code></pre>\n\n<p>But, <code>superclass</code> of <code>TrueClass</code> is <code>Object</code>.</p>\n\n<p>Similarly we are unable to initialize <code>NilClass</code> and <code>FalseClass</code></p>\n\n<p>I just wanted to know how that is possible even if that is the child class of <code>Object</code>. If we wanted to write a class similar to this how can we achieve it?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "database", "database-design"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504686438, "post_id": 46070095, "comment_id": 79101085, "body": "<i>&quot;how to access the respective price with regards to the duration&quot;</i> \u2013 just store the price along with the duration, i.e <code>price: 80, days: 1</code>, <code>price: 65, days: 2</code> etc."}, {"owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504686727, "post_id": 46070095, "comment_id": 79101260, "body": "As in creating an additional table like described in Option B? But yes, you&#39;re right. This ways I could easily access the prices as well."}, {"owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504688266, "post_id": 46070095, "comment_id": 79102234, "body": "Would the corresponding query be like : price = Price.where(&quot;room_ID  = ? AND days = ?, params[:room_ID], params[:duration])"}, {"owner": {"reputation": 835, "user_id": 2208016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bfa904de4db33e337f3d3d74db5b0a?s=128&d=identicon&r=PG", "display_name": "DaveMongoose", "link": "https://stackoverflow.com/users/2208016/davemongoose"}, "edited": false, "score": 0, "creation_date": 1504688307, "post_id": 46070095, "comment_id": 79102272, "body": "As far as best practice, it&#39;s usually better to have more tables than to use serialized columns because it lets your database do the work. As an example - A user wants a 5 night stay but they don&#39;t want to pay more than 50 per night. With Option A you need to instantiate every record to be able to check its 5-night price, whereas with Option B you can do it with one SQL query."}, {"owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "edited": false, "score": 0, "creation_date": 1504688400, "post_id": 46070095, "comment_id": 79102333, "body": "Also, If you use database to store prices, In future you can be able to give a UI to update the prices."}, {"owner": {"reputation": 835, "user_id": 2208016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bfa904de4db33e337f3d3d74db5b0a?s=128&d=identicon&r=PG", "display_name": "DaveMongoose", "link": "https://stackoverflow.com/users/2208016/davemongoose"}, "edited": false, "score": 1, "creation_date": 1504688474, "post_id": 46070095, "comment_id": 79102391, "body": "@Luke You can write that as <code>Price.where(room_id: params[:room_id], days: params[:duration])</code> - you don&#39;t need to write it in the SQL form. EDIT: although it might be better to set it up as an association on the room model, so you can just do <code>room.prices.where(days: params[:duration])</code>"}, {"owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "edited": false, "score": 0, "creation_date": 1504688872, "post_id": 46070095, "comment_id": 79102726, "body": "Got it, totally makes sense! Thanks a lot :)"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 6589296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255789421282b5f2d8f7b8dd6db7d3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebri Issam", "link": "https://stackoverflow.com/users/6589296/sebri-issam"}, "is_accepted": false, "score": 0, "last_activity_date": 1504691689, "creation_date": 1504691689, "answer_id": 46072160, "question_id": 46070095, "link": "https://stackoverflow.com/questions/46070095/storing-values-in-array-or-additional-table/46072160#46072160", "title": "Storing values in array or additional table", "body": "<p>For a good reason you should develop your logic price_increments record: we need to know if it's a regular price or with major.\nAny way i think it's a possible to do your op\u00e9ration before saving record in a singular table with <code>before_save</code></p>\n\n<pre><code>def Booking &lt; ActiveRecord::Base\n    before_save :init\n    PRICE_INCREMENT = [one, two, three, four]\n\n    def init\n        self.duration ||= (end_date - start_date).to_i\n        self.price    ||= duration * PRICE_INCEREMENT[duration]\n    end\n end\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504691689, "creation_date": 1504685811, "question_id": 46070095, "link": "https://stackoverflow.com/questions/46070095/storing-values-in-array-or-additional-table", "title": "Storing values in array or additional table", "body": "<p>I'm developing a booking system in rails 5.1 for hotels, whereas the price per night depends on the duration of a stay. Ok, so basically this is a question related to database design and I would like your opinion on which option to go with:</p>\n\n<p><strong>Option A:</strong> I just go ahead and save the prices in my <em>Room</em> table in an array, so that:</p>\n\n<pre><code>price_increments = [1_day,2_days,...,n_days] = [80,65,...,x]\n</code></pre>\n\n<p>I could then access this array by passing the duration of stay, so that:</p>\n\n<pre><code>def booking\n    days = (end_date - start_date).to_i\n    price = price_increments.at(days)\n    total = price * days\nend\n</code></pre>\n\n<p><strong>Option B:</strong> I create an additional table for prices, but then I wouldn't be quite sure how to access the respective price with regards to the duration, especially since the application is supposed to be a platform with multiple hotels?</p>\n\n<p>What do you think? Is it save to go with Option A or shall I try to go with Option B? What would be considered to be best practice? Any advice appreciated:)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "save", "httprequest"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8544232, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Z2nVeSzuDh4/AAAAAAAAAAI/AAAAAAAAHWg/Q_VLUHz7FWU/photo.jpg?sz=128", "display_name": "AzBest", "link": "https://stackoverflow.com/users/8544232/azbest"}, "edited": false, "score": 0, "creation_date": 1504957660, "post_id": 46118748, "comment_id": 79222816, "body": "When server do http request , it is do to &quot;<a href=\"https://blockexplorer.com/api/tx/\" rel=\"nofollow noreferrer\">blockexplorer.com/api/tx</a>&quot; , #{params[:hammer]} is empty"}], "tags": [], "owner": {"reputation": 449, "user_id": 6734208, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210145798425657/picture?type=large", "display_name": "Ronan Louarn", "link": "https://stackoverflow.com/users/6734208/ronan-louarn"}, "is_accepted": false, "score": 0, "last_activity_date": 1504880768, "creation_date": 1504880768, "answer_id": 46118748, "question_id": 46069767, "link": "https://stackoverflow.com/questions/46069767/save-to-database-post-but-before-check-http-request-in-ruby-on-rails/46118748#46118748", "title": "Save to database post,but before check http request in Ruby on Rails", "body": "<p>I think the bug is there:</p>\n\n<pre><code>uri = URI(\"https://blockexplorer.com/api/tx/#{:hammer}\")\n</code></pre>\n\n<p>in PaymentsController.\nTry that instead:</p>\n\n<pre><code>uri = URI(\"https://blockexplorer.com/api/tx/#{params[:hammer]}\")\n</code></pre>\n\n<p>You missed params[] in your interpolation.</p>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 8544232, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Z2nVeSzuDh4/AAAAAAAAAAI/AAAAAAAAHWg/Q_VLUHz7FWU/photo.jpg?sz=128", "display_name": "AzBest", "link": "https://stackoverflow.com/users/8544232/azbest"}, "is_accepted": true, "score": 1, "last_activity_date": 1504966316, "creation_date": 1504966316, "answer_id": 46131569, "question_id": 46069767, "link": "https://stackoverflow.com/questions/46069767/save-to-database-post-but-before-check-http-request-in-ruby-on-rails/46131569#46131569", "title": "Save to database post,but before check http request in Ruby on Rails", "body": "<p>I find want can to do </p>\n\n<pre><code>      @test = payment_params[:hammer]\n   #   hammer = ''\n   #   hammer += params[:hammer].to_s\n      aza = ''\n      uri = URI(\"https://blockexplorer.com/api/tx/#{@test}\")\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8544232, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Z2nVeSzuDh4/AAAAAAAAAAI/AAAAAAAAHWg/Q_VLUHz7FWU/photo.jpg?sz=128", "display_name": "AzBest", "link": "https://stackoverflow.com/users/8544232/azbest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 46131569, "answer_count": 2, "score": 0, "last_activity_date": 1504966316, "creation_date": 1504684755, "question_id": 46069767, "link": "https://stackoverflow.com/questions/46069767/save-to-database-post-but-before-check-http-request-in-ruby-on-rails", "title": "Save to database post,but before check http request in Ruby on Rails", "body": "<p>I am trying save hashes to my database but before I want check request \nI am using </p>\n\n<pre><code>require 'net/http'\ngem 'http'\n</code></pre>\n\n<p>This is my controller (hashes I call :hammer)</p>\n\n<pre><code>class PaymentsController &lt; ApplicationController\n  before_action :logged_in_user, only: [:create]\n\n  def create\n    @payment = current_user.payments.build(payment_params)\n    aza = ''\n    uri = URI(\"https://blockexplorer.com/api/tx/#{:hammer}\")\n    res = Net::HTTP::Post.new(uri)\n    res1 = res.class.name\n    aza += Net::HTTP.get(uri)\n    @go = aza\n    if aza.include?( '3MGeicHK6P2pUpepsXyTiuA7omMbRZbZx3') #'\"addresses\":[\"3MGeicHK6P2pUpepsXyTiuA7omMbRZbZx3\"]'\n      if aza.include? '\"value\":\"0.03072025\"'\n        if aza.include? '\"confirmations\":0'\n          flash[:info] = \"Wait 15 minutes for confirm\"\n        else\n          if @payment.save\n            flash[:success] = \"You paid\"\n            redirect_to root_url\n          else\n            render 'welcome/index'\n          end\n        end\n      else\n        flash[:danger] = \"You paid less\"\n      end\n    else\n      flash[:danger] = \"#{res1}\"\n      redirect_to root_url\n    end\n  end\n\n  def destroy\n  end\n\n  private\n\n  def payment_params\n    params.require(:payment).permit(:hammer)\n  end\nend\n</code></pre>\n\n<p>When I was try to save it is not check, it is just show error 400\nBut If I use console it is work </p>\n\n<pre><code>uri = URI(\"https://blockexplorer.com/api/tx/f484f14ebf9726ab2ab46ffc491786db50fc69ceff737620122e51559a3ea379\")\nirb(main):003:0&gt; Net::HTTP.get(uri)\n</code></pre>\n"}, {"tags": ["python", "ruby", "git", "shell", "hook"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6874415"}, "edited": false, "score": 0, "creation_date": 1504775689, "post_id": 46079524, "comment_id": 79146411, "body": "I tried to write the hook, So I tried to in python, Now I need change that code to ruby. What to do?"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1504713510, "last_edit_date": 1504713510, "creation_date": 1504713026, "answer_id": 46079524, "question_id": 46069393, "link": "https://stackoverflow.com/questions/46069393/how-to-load-the-python-file-in-ruby-hook/46079524#46079524", "title": "How to load the python file in ruby hook?", "body": "<p>This basic snippet from <a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-require\" rel=\"nofollow noreferrer\">Kernel#require</a> should probably sum it up for you: </p>\n\n<blockquote>\n  <p>If the filename has the extension \u201c.rb\u201d, it is loaded as a source file; if the extension is \u201c.so\u201d, \u201c.o\u201d, or \u201c.dll\u201d, or the default shared library extension on the current platform, Ruby loads the shared library as a Ruby extension. Otherwise, Ruby tries adding \u201c.rb\u201d, \u201c.so\u201d, and so on to the name until found. If the file named cannot be found, a LoadError will be raised.</p>\n</blockquote>\n\n<p>On a sidenote how did you expect this to behave? How is the ruby interpreter supposed to handle a python file? </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6874415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545117720, "creation_date": 1504683395, "last_edit_date": 1545117720, "question_id": 46069393, "link": "https://stackoverflow.com/questions/46069393/how-to-load-the-python-file-in-ruby-hook", "title": "How to load the python file in ruby hook?", "body": "<p>I trying to add the hook to ignore the binary file committing in gitlab, SO I added the new python(.py) hook in <code>/opt/gitlab/embedded/service/gitlab-shell/lib</code>  and i loaded that file in <code>/opt/gitlab/embedded/service/gitlab-shell/hooks/pre-receive.rb</code> </p>\n\n<p>But When I tried to commit the file i got the below exception in commit screen</p>\n\n<blockquote>\n  <p>remote: hooks/pre-receive:17:in <code>require_relative': cannot load such file -- /opt/gitlab/embedded/service/gitlab-shell/lib/gitlab_ignore_binary.py (LoadError)\n  remote:         from hooks/pre-receive:17:in</code>'</p>\n</blockquote>\n\n<p>My pre-receive hook file is </p>\n\n<pre><code>#!/opt/gitlab/embedded/bin/ruby\n# Fix the PATH so that gitlab-shell can find git-upload-pack and friends.\nENV['PATH'] = '/opt/gitlab/bin:/opt/gitlab/embedded/bin:' + ENV['PATH']\n\n#!/usr/bin/env ruby\n#!/usr/bin/env python\n\n# This file was placed here by GitLab. It makes sure that your pushed commits\n# will be processed properly.\n\nrefs = $stdin.read\nkey_id = ENV.delete('GL_ID')\nprotocol = ENV.delete('GL_PROTOCOL')\nrepo_path = Dir.pwd\ngl_repository = ENV['GL_REPOSITORY']\n\nrequire_relative '../lib/gitlab_ignore_binary.py'\nrequire_relative '../lib/gitlab_custom_hook'\nrequire_relative '../lib/gitlab_reference_counter'\nrequire_relative '../lib/gitlab_access'\n\n\n# It's important that on pre-receive `increase_reference_counter` gets executed\n# last so that it only runs if everything else succeeded. On post-receive on the\n# other hand, we run GitlabPostReceive first because the push is already done\n# and we don't want to skip it if the custom hook fails.\nif GitlabAccess.new(gl_repository, repo_path, key_id, refs, protocol).exec &amp;&amp;\n    GitlabCustomHook.new(repo_path, key_id).pre_receive(refs) &amp;&amp;\n    GitlabReferenceCounter.new(repo_path).increase\n\n  exit 0\nelse\n  exit 1\nend\n</code></pre>\n\n<p>Why I can`t able to load the .py file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "recursion", "liquid", "helper"], "comments": [{"owner": {"reputation": 655, "user_id": 2494631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DCC31.jpg?s=128&g=1", "display_name": "vijoc", "link": "https://stackoverflow.com/users/2494631/vijoc"}, "edited": false, "score": 0, "creation_date": 1504682890, "post_id": 46068801, "comment_id": 79098969, "body": "I don&#39;t understand what seems to be the issue. Could you clarify a bit: a) what you have now b) what is wrong with it and c) what have you tried to fix the issue?"}, {"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 1, "creation_date": 1504688552, "post_id": 46068801, "comment_id": 79102451, "body": "Looking at the images, I&#39;d conclude that you&#39;ve achieved your goal."}], "owner": {"reputation": 61, "user_id": 3239403, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d50d56d4bc894882fda1750525150c1?s=128&d=identicon&r=PG&f=1", "display_name": "leylakapi", "link": "https://stackoverflow.com/users/3239403/leylakapi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504681296, "creation_date": 1504681296, "question_id": 46068801, "link": "https://stackoverflow.com/questions/46068801/why-cant-get-my-recursive-method-to-only-tree", "title": "why can&#39;t get my recursive method to only tree?", "body": "<p>My question is that, same <a href=\"https://stackoverflow.com/questions/6074607/why-does-my-recursive-method-from-helper-not-return-every-value\">this question</a> . But I want to show tree structure not all of values, only tree structure. </p>\n\n<p>When we write, below method, displaying all values with details. \n<a href=\"https://i.stack.imgur.com/JpGtF.png\" rel=\"nofollow noreferrer\">you can show output of below function</a></p>\n\n<p><code>module CategoriesHelper\n    def display_tree(category)\n     tree = category.name \n     if category.has_children? \n       category.children.each do |sub_category|\n         tree += \"/#{display_tree(sub_category)}\"\n       end\n    end\n    tree\n   end\n end</code></p>\n\n<p>But I want to show only tree structure <a href=\"https://i.stack.imgur.com/2aeIz.png\" rel=\"nofollow noreferrer\">you can see what I need</a>.</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504680270, "post_id": 46068312, "comment_id": 79097302, "body": "show the content of Gemfile and the output of command <code>ls -la</code> from the project directory."}, {"owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504680441, "post_id": 46068312, "comment_id": 79097410, "body": "The gemfile is segregated to multiple files , however the issue turned out to be that after <code>gem install bundler</code> , I had to do <code>rbenv rehash</code>  I appreciate your help. Thank you."}, {"owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504686317, "post_id": 46068312, "comment_id": 79101006, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 This question is not duplicate of the other one referenced , I tried <code>gem install bundler</code> before posting the question and it didn&#39;t solve the issue , only when I used <code>rbenv -rehash</code> it was solved , the Q &amp; A referenced are not the same as this one"}, {"owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505071045, "post_id": 46068312, "comment_id": 79250969, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Please remove the duplicate flag as this question is <b>not answered</b> in the question referenced , they look similar but the answer is not the same. (Please search for <code>rehash</code> in both to check what I mean)"}], "answers": [{"tags": [], "owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "is_accepted": true, "score": -1, "last_activity_date": 1504680286, "creation_date": 1504680286, "answer_id": 46068511, "question_id": 46068312, "link": "https://stackoverflow.com/questions/46068312/your-ruby-version-is-2-3-1-but-your-gemfile-specified-2-4-0-while-mine-is-2-4-0/46068511#46068511", "title": "Your Ruby version is 2.3.1, but your Gemfile specified 2.4.0 while mine is 2.4.0 using rbenv (Rails)", "body": "<p>for the future reference for other developers:</p>\n\n<p>2 commands solved the issue \n<code>gem install bundler</code>\n<strong>but only when I used</strong> \n<code>rbenv rehash</code>\nthings worked </p>\n"}], "owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 0, "closed_date": 1504680700, "accepted_answer_id": 46068511, "answer_count": 1, "score": 0, "last_activity_date": 1504681676, "creation_date": 1504679503, "last_edit_date": 1504681676, "question_id": 46068312, "link": "https://stackoverflow.com/questions/46068312/your-ruby-version-is-2-3-1-but-your-gemfile-specified-2-4-0-while-mine-is-2-4-0", "closed_reason": "Duplicate", "title": "Your Ruby version is 2.3.1, but your Gemfile specified 2.4.0 while mine is 2.4.0 using rbenv (Rails)", "body": "<p>Rails newbie here , I am trying to test an opensource project that I downloaded but when I use bundle install I get the following error , which says that my ruby is 2.3 while in gemfile it is 2.4 (although I updated ruby &amp; I have 2.4.0 using rbenv as shown below)</p>\n\n<p>I have looked this up and tried multiple solution but couldn't solve it.\nI looked in the workspace for <code>gem 'Ruby'</code> but I didn't find it</p>\n\n<p>Please advise.\nThanks for your help.</p>\n\n<pre><code>usr@ubuntu:~/Downloads/instructure-canvas-lms-cea9158$ ruby -v\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]\nusr@ubuntu:~/Downloads/instructure-canvas-lms-cea9158$ bundle install\nYour Ruby version is 2.3.1, but your Gemfile specified 2.4.0\nusr@ubuntu:~/Downloads/instructure-canvas-lms-cea9158$ rbenv local\n2.4.0\n</code></pre>\n\n<p>====\nThis question is not duplicate of the other one referenced , I tried <code>gem install bundler</code> <strong><em>before posting the question</em></strong> <em>and it didn't solve the issue , only when I used <code>rbenv -rehash</code> it was solved</em></p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "edited": false, "score": 0, "creation_date": 1504670331, "post_id": 46066380, "comment_id": 79093691, "body": "is it appears as alert?"}, {"owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "reply_to_user": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "edited": false, "score": 0, "creation_date": 1504670378, "post_id": 46066380, "comment_id": 79093704, "body": "@ShubhamJain, yes it is, but it is not javascript pop up modals"}, {"owner": {"reputation": 690, "user_id": 3967709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cbd703ea47b16b8f56e2f8f639c93ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/3967709/gokul"}, "edited": false, "score": 0, "creation_date": 1504765867, "post_id": 46066380, "comment_id": 79140228, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46032288/rails-proxy-authentication-in-watir-chrome-driver\">Rails: Proxy Authentication in Watir (Chrome Driver)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1569091265, "last_edit_date": 1569091265, "creation_date": 1504670595, "answer_id": 46066613, "question_id": 46066380, "link": "https://stackoverflow.com/questions/46066380/ruby-how-to-store-proxy-authentication-inside-chromedriver/46066613#46066613", "title": "Ruby: How to store proxy authentication inside chromedriver?", "body": "<p>Chrome has stopped support for URL authentication system for latest Chrome version. </p>\n\n<p>I have a Java code, which will authenticate pop-up:</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 10);      \nAlert alert = wait.until(ExpectedConditions.alertIsPresent());     \nalert.authenticateUsing(new UserAndPassword(username, password));\n</code></pre>\n\n<p>Convert this code in Ruby.</p>\n"}], "owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569091265, "creation_date": 1504668925, "question_id": 46066380, "link": "https://stackoverflow.com/questions/46066380/ruby-how-to-store-proxy-authentication-inside-chromedriver", "title": "Ruby: How to store proxy authentication inside chromedriver?", "body": "<p>i've created browser instance using watir like below:</p>\n\n<pre><code>proxies = ['--proxy-server=hostname:portnumber', '--proxy-auth=username:password']\nbrowser = Watir::Browser.new :chrome, :switches =&gt; proxiesle\n</code></pre>\n\n<p>but the problem above the code is cannot authenticate proxy by passing parameters <code>--proxy-auth=username:password</code>, i was wondering how could i automatically set username and proxy in chrome driver? Some solution was written in java like below:</p>\n\n<pre><code>DesiredCapabilities capabilities = DesiredCapabilities.chrome();\ncapabilities.setCapability(\"chrome.switches\", Arrays.asList(\"--proxy-server=http://user:password@proxy.com:8080\"));\nWebDriver driver = new ChromeDriver(capabilities);\n</code></pre>\n\n<p>how you guys to override proxy authentication inside chrome ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "scope"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1504671377, "post_id": 46066094, "comment_id": 79093933, "body": "Ruby convention is to name a method that returns a boolean value with a question mark at the end, so <code>def is_order?</code> instead of <code>def is_order</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1504671641, "post_id": 46066683, "comment_id": 79093996, "body": "No, my goal is to return a boolean value from an instance of <code>QuestionSet</code>&#39; like <code>q = QuestionSet.last</code>, <code>q.is_order =&gt; true</code>, I can achieve it with a method, I was just wondering how to make it by <code>scope</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1504671721, "post_id": 46066683, "comment_id": 79094018, "body": "OK, but that&#39;s not a scope. A scope is a class method that is called on an ActiveRecord collection, not a single object."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504672527, "post_id": 46066683, "comment_id": 79094203, "body": "you can omit <code>all</code>, its unnecessary here."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1504673016, "post_id": 46066683, "comment_id": 79094341, "body": "Agreed, but I thought it would be more clear to the OP."}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1504685761, "post_id": 46066683, "comment_id": 79100667, "body": "Thanks, you can update your answer with explanation, and I will pick you as the best answer."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 0, "last_activity_date": 1504707232, "last_edit_date": 1504707232, "creation_date": 1504671219, "answer_id": 46066683, "question_id": 46066094, "link": "https://stackoverflow.com/questions/46066094/rails-scope-check-serialize-column-is-present/46066683#46066683", "title": "Rails scope check serialize column is present", "body": "<p>If your goal is to have a scope that will return QuestionSet records that have a questions_list present, you should be able to define a scope like this:</p>\n\n<pre><code>scope :with_questions_list, -&gt; { where.not(questions_list: nil) }\n</code></pre>\n\n<p>And then you can do:</p>\n\n<pre><code>QuestionSet.with_questions_list # This is the same as QuestionSet.all.with_questions_list\n</code></pre>\n\n<p>If the goal is instead to build a method that will return <code>true</code> or <code>false</code> for a single object, then you are doing it correctly, but I'll suggest two changes: (1) You don't need to reference <code>self</code> (as that is implied in the context) and (2) you should use the Ruby convention of putting a question mark at the end of your method.</p>\n\n<pre><code>def is_order?\n  questions_list.present?\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1504673100, "last_edit_date": 1504673100, "creation_date": 1504672040, "answer_id": 46066781, "question_id": 46066094, "link": "https://stackoverflow.com/questions/46066094/rails-scope-check-serialize-column-is-present/46066781#46066781", "title": "Rails scope check serialize column is present", "body": "<p><code>scope</code> is a wrong choice here, becuase it's always returns an <strong>Active Record</strong> and doesn't bound to any instance object, <code>scope</code> it's about collection.</p>\n\n<blockquote>\n  <p>Scoping allows you to specify commonly-used queries which can be\n  referenced as method calls on the association objects or models.</p>\n</blockquote>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1504707232, "creation_date": 1504666742, "question_id": 46066094, "link": "https://stackoverflow.com/questions/46066094/rails-scope-check-serialize-column-is-present", "title": "Rails scope check serialize column is present", "body": "<p>I am learning the scope of rails</p>\n\n<p>if QuestionSet has a column called questions_list and its format is <code>serialize</code>.</p>\n\n<p>Like this</p>\n\n<pre><code>class QuestionSet &lt; ActiveRecord::Base\n  serialize :questions_list\nend\n</code></pre>\n\n<p>Then I have a method called <code>is_order</code>, and it is simple.\nThe only use is to check whether questions_list is present or not</p>\n\n<p>Like this</p>\n\n<pre><code>def is_order\n  self.questions_list.present?\nend\n</code></pre>\n\n<p>Can I write it into a scope? Or in this case, it is not a suitable scope scenario</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "edited": false, "score": 0, "creation_date": 1504668303, "post_id": 46065980, "comment_id": 79093159, "body": "I suggest you add the full error message to the question for more information."}, {"owner": {"reputation": 1, "user_id": 8566527, "user_type": "registered", "profile_image": "https://graph.facebook.com/876988105782447/picture?type=large", "display_name": "Angel Bastidas", "link": "https://stackoverflow.com/users/8566527/angel-bastidas"}, "reply_to_user": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "edited": false, "score": 0, "creation_date": 1504734453, "post_id": 46065980, "comment_id": 79131721, "body": "this is the full trace"}, {"owner": {"reputation": 1, "user_id": 8566527, "user_type": "registered", "profile_image": "https://graph.facebook.com/876988105782447/picture?type=large", "display_name": "Angel Bastidas", "link": "https://stackoverflow.com/users/8566527/angel-bastidas"}, "reply_to_user": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "edited": false, "score": 0, "creation_date": 1504734540, "post_id": 46065980, "comment_id": 79131754, "body": "sorry i can&#39;t add it is too long this is the error undefined method `add_cesta&#39; for &quot;#&lt;Carro:0x6da7768&gt;&quot;:String"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8566527, "user_type": "registered", "profile_image": "https://graph.facebook.com/876988105782447/picture?type=large", "display_name": "Angel Bastidas", "link": "https://stackoverflow.com/users/8566527/angel-bastidas"}, "edited": false, "score": 0, "creation_date": 1504734359, "post_id": 46066582, "comment_id": 79131683, "body": "thanks for replying but in this case does not apply because it is in model, theoretically rails include it"}, {"owner": {"reputation": 234, "user_id": 5992270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95add28d8792fa4af0f190344db456ac?s=128&d=identicon&r=PG", "display_name": "Stephen W", "link": "https://stackoverflow.com/users/5992270/stephen-w"}, "reply_to_user": {"reputation": 1, "user_id": 8566527, "user_type": "registered", "profile_image": "https://graph.facebook.com/876988105782447/picture?type=large", "display_name": "Angel Bastidas", "link": "https://stackoverflow.com/users/8566527/angel-bastidas"}, "edited": false, "score": 0, "creation_date": 1504751161, "post_id": 46066582, "comment_id": 79135860, "body": "You still should need to require it unless it&#39;s in the load path and the file is named properly. And if it&#39;s a model then it looks like you possibly haven&#39;t initialized the model correctly.  class Carro&lt; ActiveRecord::Base"}], "tags": [], "owner": {"reputation": 234, "user_id": 5992270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95add28d8792fa4af0f190344db456ac?s=128&d=identicon&r=PG", "display_name": "Stephen W", "link": "https://stackoverflow.com/users/5992270/stephen-w"}, "is_accepted": false, "score": -1, "last_activity_date": 1504750779, "last_edit_date": 1504750779, "creation_date": 1504670342, "answer_id": 46066582, "question_id": 46065980, "link": "https://stackoverflow.com/questions/46065980/undefined-method-with-method-of-personal-class-on-rails-4/46066582#46066582", "title": "undefined method with Method of personal class on rails 4", "body": "<p>You don't have access to the method within the controller as it's defined in a separate class. You would need to explicitly provide access by requiring the file within the controller class. Put the path to the actual file within the quotes below. See similar question here: <a href=\"https://stackoverflow.com/questions/1050749/including-a-ruby-class-from-a-separate-file\">Including a Ruby class from a separate file</a></p>\n\n<pre><code>require 'file_path/carro'\n  class TiendaController &lt; ApplicationController\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8566527, "user_type": "registered", "profile_image": "https://graph.facebook.com/876988105782447/picture?type=large", "display_name": "Angel Bastidas", "link": "https://stackoverflow.com/users/8566527/angel-bastidas"}, "edited": false, "score": 0, "creation_date": 1504734251, "post_id": 46076166, "comment_id": 79131637, "body": "Hello thanks for replying, based on what you indicate me actually session [: carro] is saving something different the first time I run it does not give error but when I try to add another it throws this error undefined method `add_cesta&#39; for &quot;#&lt;Carro:0x6da7768&gt;&quot;:String i will try to find out what is saving; if you know a method to know the value of a session variable in rails I really appreciate if you indicate me the how.. Sorry my english I understand but I&#39;m not very good writing it."}], "tags": [], "owner": {"reputation": 59, "user_id": 6509314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57dd7df9d14bc1b3b73b4cf53ee6eade?s=128&d=identicon&r=PG&f=1", "display_name": "LewisFidlers", "link": "https://stackoverflow.com/users/6509314/lewisfidlers"}, "is_accepted": false, "score": 0, "last_activity_date": 1504771887, "last_edit_date": 1504771887, "creation_date": 1504703350, "answer_id": 46076166, "question_id": 46065980, "link": "https://stackoverflow.com/questions/46065980/undefined-method-with-method-of-personal-class-on-rails-4/46076166#46076166", "title": "undefined method with Method of personal class on rails 4", "body": "<p>I believe you didn't actually set the instance variable to a cart. </p>\n\n<p>Perhaps the <code>session[:carro]</code> contains something else than a cart?\nCould you post the full error message please as this would clarify your problem quite a bit.</p>\n\n<p>For now try setting:</p>\n\n<pre><code>@carro = Carro.new\n</code></pre>\n\n<p>And afterwards refactor the session part a bit.</p>\n\n<p>-- Edit -- </p>\n\n<p>Seems like the session variable is a string instead of an actual object.</p>\n\n<p>Try storing the cart_id in your session and retrieve it later on.</p>\n\n<pre><code>def ver_carro\n  @carro ||= (Carro.find(session[:carro_id]) || Carro.new)\nend\n</code></pre>\n\n<p>with something like that.</p>\n"}], "owner": {"reputation": 1, "user_id": 8566527, "user_type": "registered", "profile_image": "https://graph.facebook.com/876988105782447/picture?type=large", "display_name": "Angel Bastidas", "link": "https://stackoverflow.com/users/8566527/angel-bastidas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1504771887, "creation_date": 1504665783, "last_edit_date": 1504677530, "question_id": 46065980, "link": "https://stackoverflow.com/questions/46065980/undefined-method-with-method-of-personal-class-on-rails-4", "title": "undefined method with Method of personal class on rails 4", "body": "<p>I have the following personal class to work on an arrangement for the shopping cart, but when I try to call a method of this class in my controller it indicates an undefined method <code>add_cesta</code>.</p>\n\n<p>This is my class</p>\n\n<pre><code>class Carro\n  attr_reader :cesta\n\n  def initialize\n    @cesta = []\n  end\n\n  def add_cesta(articulo)\n    @cesta &lt;&lt; articulo\n  end\n\nend\n</code></pre>\n\n<p>and this is my controller</p>\n\n<pre><code>class TiendaController &lt; ApplicationController\n\n\n  def index\n    @titulo = \"Bienvenido a la Tienda\"\n    @articulos = Articulo.all.order(\"nombre\").page(params[:page]).per_page(4)    \n  end\n\n  def quienes_somos\n    @titulo = \"Bienvenido a la Tienda\"      \n  end\n\n  def contacto\n    @titulo = \"Bienvenido a la Tienda\"\n  end\n\n  def anadir_producto\n      @articulo = Articulo.find(params[:id])\n      @carro = sesion_carrito\n      @carro.add_cesta(@articulo)\n      flash[:info] =\"Producto a\u00f1adido #{@articulo.nombre}\"      \n      redirect_to inicio_url\n  end\n\n  def ver_carro    \n      @carro = session[:carro]    \n  end\n\n  def vaciar_carrito\n      session[:carro] = nil\n      flash[:info] = \"Carrito vacio\"\n      redirect_to inicio_url\n  end\n\n  private\n\n  def sesion_carrito\n      session[:carro] ||= Carro.new\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twilio"], "answers": [{"tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 1, "last_activity_date": 1504688092, "creation_date": 1504688092, "answer_id": 46070802, "question_id": 46064525, "link": "https://stackoverflow.com/questions/46064525/twilio-outbound-conference-call-api-callbacks/46070802#46070802", "title": "Twilio Outbound Conference Call API callbacks", "body": "<p>Twilio developer evangelist here.</p>\n\n<p><a href=\"https://www.twilio.com/docs/api/errors/15003\" rel=\"nofollow noreferrer\">Twilio error 15003</a> means that Twilio received a 4xx or 5xx response from your application. So, Twilio is making a request to your application but it can't reach it for some reason.</p>\n\n<p>Are you having these problems in development because you haven't exposed your local application to Twilio? Have you tried using <a href=\"https://ngrok.com\" rel=\"nofollow noreferrer\">ngrok</a> for example?</p>\n\n<p>If you have opened up your application, are you seeing errors in your Rails log when the callback occurs?</p>\n"}], "owner": {"reputation": 13, "user_id": 6566044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3b7cc5e2dbc0b33fb798ec0e6a03f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Zach White", "link": "https://stackoverflow.com/users/6566044/zach-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504688092, "creation_date": 1504653028, "last_edit_date": 1504656358, "question_id": 46064525, "link": "https://stackoverflow.com/questions/46064525/twilio-outbound-conference-call-api-callbacks", "title": "Twilio Outbound Conference Call API callbacks", "body": "<p>I am trying to set up a call transfer workflow using Twilio's Outbound Conference Call API. I want the flow to be as follows:</p>\n\n<ol>\n<li>Call PersonA</li>\n<li>Initiate a timer via callback when PersonA answers</li>\n<li>After introducing myself to PersonA, put them on hold and dial PersonB</li>\n<li>Talk to PersonB and let them know I'll be connecting them with PersonA</li>\n<li>Merge PersonA and PersonB call together</li>\n<li>Leave the phone call and let PersonA and PersonB continue talking.</li>\n</ol>\n\n<p>Looking at the docs here: <a href=\"https://www.twilio.com/docs/api/rest/participant#list-post\" rel=\"nofollow noreferrer\">https://www.twilio.com/docs/api/rest/participant#list-post</a> it appears that this should be doable with a StatusCallback. I am having some trouble getting the callback to work and was wondering if anyone has an example of setting up a call using the Outbound Conference Call API.</p>\n\n<p>Currently I am trying to start the call like so (from and to are the from and to numbers):</p>\n\n<pre><code>params = {\n  'From' =&gt; from,\n  'To' =&gt; to,\n  'EarlyMedia' =&gt; true,\n  'ConferenceStatusCallbackEvent' =&gt; 'start',\n  'ConferenceStatusCallback' =&gt; Rails.application.routes.url_helpers.call_twilio_conference_callback_url(@call, sid: @call.call_sid, host: DEFAULT_DOMAIN)\n}\n\nHTTParty.post(\"https://api.twilio.com/2010-04-01/Accounts/#{TWILIO['account_sid']}/Conferences/#{@call.browser_call_room_key}/Participants\",\n               body: URI.encode_www_form(params),\n               basic_auth: {username: TWILIO['account_sid'], password: TWILIO['auth_token']})\n</code></pre>\n\n<p>When I check the twilio debugger I see:</p>\n\n<pre><code>15003 Call Progress: Error Response to Callback URL\n</code></pre>\n\n<p>If anyone has an example of using the Outbound Conference API and with a callback to your own endpoint that would be awesome! It is a pretty new feature and there does not seem to be much out there as far as examples of it being used.</p>\n"}, {"tags": ["ruby", "selenium", "foreach", "selenium-chromedriver", "watir"], "comments": [{"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1504652209, "post_id": 46063765, "comment_id": 79089673, "body": "Did you try <code>user.a(:class =&gt; &#39;_pg23k _9irns _gvoze&#39;).click(:control)</code> ?"}, {"owner": {"reputation": 45, "user_id": 8561357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3b2p.png?s=128&g=1", "display_name": "djangodev", "link": "https://stackoverflow.com/users/8561357/djangodev"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1504654500, "post_id": 46063765, "comment_id": 79090232, "body": "@TarunLalwani This worked! Thank you friend!"}, {"owner": {"reputation": 45, "user_id": 8561357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3b2p.png?s=128&g=1", "display_name": "djangodev", "link": "https://stackoverflow.com/users/8561357/djangodev"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1504654514, "post_id": 46063765, "comment_id": 79090236, "body": "How is it is possible to use the user parameter in place of browser? @TarunLalwani"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1504801138, "post_id": 46063765, "comment_id": 79164608, "body": "That is how iterating over a list works.  In the command <code>Mylist.users.each_with_index do |user|</code>.  you&#39;ve told it to go through each item in the collection in turn, and that you want to refer to the current list item &#39;user&#39;.   So when you refer to <code>user</code> in the inner code of that loop it will be the current element of the collection.  Since your collection is composed of li items from the HTML <code>user</code> will be that li along with all the html elements it contains.  Incidentally, since you are not making use of the index of the item, you can use <code>.each</code> instead of <code>.each_with_index</code>"}, {"owner": {"reputation": 45, "user_id": 8561357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3b2p.png?s=128&g=1", "display_name": "djangodev", "link": "https://stackoverflow.com/users/8561357/djangodev"}, "edited": false, "score": 0, "creation_date": 1504842921, "post_id": 46063765, "comment_id": 79179499, "body": ".each_with_index is left over from my plan to create an index of all lis in the list because I wasn&#39;t sure how to iterate through each. I realized it was much simpler to use .each"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8561357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3b2p.png?s=128&g=1", "display_name": "djangodev", "link": "https://stackoverflow.com/users/8561357/djangodev"}, "edited": false, "score": 0, "creation_date": 1504655162, "post_id": 46064710, "comment_id": 79090398, "body": "Ahh it makes so much sense!"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1504801935, "post_id": 46064710, "comment_id": 79165004, "body": "edited the answer to hopefully make it a bit more helpful"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "reply_to_user": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1504802023, "post_id": 46064710, "comment_id": 79165058, "body": "Thanks @ChuckvanderLinden :-)"}, {"owner": {"reputation": 45, "user_id": 8561357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3b2p.png?s=128&g=1", "display_name": "djangodev", "link": "https://stackoverflow.com/users/8561357/djangodev"}, "reply_to_user": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1504842142, "post_id": 46064710, "comment_id": 79179330, "body": "Thank you @ChuckvanderLinden Very Helpful!"}], "tags": [], "owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "is_accepted": true, "score": 1, "last_activity_date": 1504801916, "last_edit_date": 1504801916, "creation_date": 1504654623, "answer_id": 46064710, "question_id": 46063765, "link": "https://stackoverflow.com/questions/46063765/how-to-select-child-element-of-each-li-in-an-each-do-list-iteration/46064710#46064710", "title": "How to select child element of each li in an each.do list iteration?", "body": "<p>Inside the loop you need to use </p>\n\n<pre><code>user.a(:class =&gt; '_pg23k _9irns _gvoze').click(:control)\n</code></pre>\n\n<p>The reason is that a browser object can be used to search elements inside the main html page. If you use 'browser' inside the loop it will be looking at the entire HTML, and where more than one element that meets the search criteria exists, it will return the first one found.  So even through it is inside the loop, it would find the same element on the page every time. </p>\n\n<p>To use the current item in the list that is being iterated you need to use the name (in this case <code>user</code>) that you've told it to assign to the list elements as it walks the list.  </p>\n"}], "owner": {"reputation": 45, "user_id": 8561357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3b2p.png?s=128&g=1", "display_name": "djangodev", "link": "https://stackoverflow.com/users/8561357/djangodev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 46064710, "answer_count": 1, "score": 1, "last_activity_date": 1504801916, "creation_date": 1504647795, "last_edit_date": 1504703793, "question_id": 46063765, "link": "https://stackoverflow.com/questions/46063765/how-to-select-child-element-of-each-li-in-an-each-do-list-iteration", "title": "How to select child element of each li in an each.do list iteration?", "body": "<p>I need to run through a list of users and open each in a new tab. The tab should close upon performing an action and return to the first tab to select the next user in the list. I'm having trouble selecting the next user in the list by order. The problem is that each user can be selected only by clicking their photo- which is a child element of the list item.</p>\n\n<p>HTML</p>\n\n<pre><code>&lt;div class=\"_gs38e\"&gt;\n &lt;ul class=\"_8q670 _b9n99\"&gt;\n\n  &lt;li class=\"_6e4x5\"&gt;\n   &lt;div class=\"_npuc5\"&gt;\n    &lt;a class=\"_pg23k _9irns _gvoze\" style=\"width: 100px; height: 100px;\"&gt;\n     &lt;img class=\"_rewi8\" src=\"https://pic.com/t51.2885-\n     _1930374081979351040.jpg\"&gt;&lt;/a&gt;\n    &lt;div class=\"_eryrc\"&gt;\n     &lt;a class=\"_2g7d5 notranslate _o5iw8\" title=\"username1_\" \n     href=\"/username1_/\"&gt;username1_&lt;/a&gt;\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/li&gt;\n\n  &lt;li class=\"_6e4x5\"&gt;\n   &lt;div class=\"_npuc5\"&gt;\n    &lt;a class=\"_pg23k _9irns _gvoze\" style=\"width: 100px; height: 100px;\"&gt;\n     &lt;img class=\"_rewi8\" src=\"https://pic.com/t51.2885-\n     _1930374081979351040.jpg\"&gt;&lt;/a&gt;\n    &lt;div class=\"_eryrc\"&gt;\n     &lt;a class=\"_2g7d5 notranslate _o5iw8\" title=\"username1_\" \n     href=\"/username1_/\"&gt;username1_&lt;/a&gt;\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/li&gt;\n\n  &lt;li class=\"_6e4x5\"&gt;\n   &lt;div class=\"_npuc5\"&gt;\n    &lt;a class=\"_pg23k _9irns _gvoze\" style=\"width: 100px; height: 100px;\"&gt;\n     &lt;img class=\"_rewi8\" src=\"https://pic.com/t51.2885-\n     _1930374081979351040.jpg\"&gt;&lt;/a&gt;\n    &lt;div class=\"_eryrc\"&gt;\n     &lt;a class=\"_2g7d5 notranslate _o5iw8\" title=\"username1_\" \n     href=\"/username1_/\"&gt;username1_&lt;/a&gt;\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/li&gt;\n\n  &lt;li class=\"_6e4x5\"&gt;\n   &lt;div class=\"_npuc5\"&gt;\n    &lt;a class=\"_pg23k _9irns _gvoze\" style=\"width: 100px; height: 100px;\"&gt;\n     &lt;img class=\"_rewi8\" src=\"https://pic.com/t51.2885-\n     _1930374081979351040.jpg\"&gt;&lt;/a&gt;\n    &lt;div class=\"_eryrc\"&gt;\n     &lt;a class=\"_2g7d5 notranslate _o5iw8\" title=\"username1_\" \n     href=\"/username1_/\"&gt;username1_&lt;/a&gt;\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/li&gt;\n\n  &lt;li class=\"_6e4x5\"&gt;\n   &lt;div class=\"_npuc5\"&gt;\n    &lt;a class=\"_pg23k _9irns _gvoze\" style=\"width: 100px; height: 100px;\"&gt;\n     &lt;img class=\"_rewi8\" src=\"https://pic.com/t51.2885-\n     _1930374081979351040.jpg\"&gt;&lt;/a&gt;\n    &lt;div class=\"_eryrc\"&gt;\n     &lt;a class=\"_2g7d5 notranslate _o5iw8\" title=\"username1_\" \n     href=\"/username1_/\"&gt;username1_&lt;/a&gt;\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/li&gt;\n &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This results in the first user being selected each time as it just finds the first picture on the page for all the list items. I've added an output of the username text to make sure the each do loop is running through the list items in order. It successfully prints the username of a different list item every time while only opening the first user. I need a way to define the photo element as a child of each list item to be included in the each.do loop</p>\n\n<pre><code>Mylist = browser.ul(:class =&gt; \"_8q670 _b9n99\")\n\n#Index the UL to open each user in order\nMylist.users.each_with_index do |user|\n\n    #open user in new tab by selecting photo\n\n    browser.a(:class =&gt; '_pg23k _9irns _gvoze').exists?\n    browser.a(:class =&gt; '_pg23k _9irns _gvoze').click(:control)\n    browser.windows.last.use\n\n    #performs action and closes tab\n\n      browser.windows.last.close\n\n\nputs user\nputs user.text\n\nend\n</code></pre>\n\n<p>How do I define the element to be selected as the child of the current li in the list?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "centos", "passenger"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504643277, "post_id": 46062644, "comment_id": 79086476, "body": "Are you sure that is your directory? Usually you would see this as &quot;/home/username/APP_NAME/current/public&quot;"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504643489, "post_id": 46062644, "comment_id": 79086583, "body": "I followed some tutotorial and I set it to /var/lib/passenger-instreg"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504643964, "post_id": 46062644, "comment_id": 79086785, "body": "Did you mean that?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504646749, "post_id": 46062644, "comment_id": 79087944, "body": "No your root directory in the nginx config"}], "answers": [{"tags": [], "owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "is_accepted": true, "score": 5, "last_activity_date": 1504647708, "creation_date": 1504647708, "answer_id": 46063747, "question_id": 46062644, "link": "https://stackoverflow.com/questions/46062644/nginx-passenger-not-serving-rails-application/46063747#46063747", "title": "Nginx Passenger not serving Rails application", "body": "<p>Finally I got it. Everything was all right. Passenger does not start apps during startup, but during the first request so all I needed to do it was press enter in my browser ... Hope that answer save time to others.</p>\n"}], "owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 1, "accepted_answer_id": 46063747, "answer_count": 1, "score": 0, "last_activity_date": 1545117758, "creation_date": 1504642072, "last_edit_date": 1545117758, "question_id": 46062644, "link": "https://stackoverflow.com/questions/46062644/nginx-passenger-not-serving-rails-application", "title": "Nginx Passenger not serving Rails application", "body": "<p>I setup Nginx with passenger on centos 7 VPS. I installed nginx and passenger as a gem. In addition I installed passenger-install-nginx-module.\nWhen I start sudo service nginx and type passenger-status I get \"Phusion Passenger is currently not serving any applications.\". From my nginx conf file</p>\n\n<pre><code>http {\n    passenger_root /usr/local/rvm/gems/ruby-2.4.1/gems/passenger-5.1.8;\n    passenger_ruby /usr/local/rvm/gems/ruby-2.4.1/wrappers/ruby;\n    passenger_app_env production;\n    passenger_instance_registry_dir /var/lib/passenger-instreg;\n\n ...\n\n server {\n        listen       80;\n        server_name  localhost;\n        root /home/myuserhere/current/public;\n        passenger_enabled on;\n</code></pre>\n\n<p>File passenger.* creates normally when I restart nginx.</p>\n\n<p><code>echo $PASSENGER_INSTANCE_REGISTRY_DIR</code> returns the same path as in nginx conf file.</p>\n\n<p>What I do wrong that passegner does not start application?</p>\n"}, {"tags": ["ruby", "rubocop"], "answers": [{"comments": [{"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1504705744, "post_id": 46062559, "comment_id": 79115144, "body": "Actually it&#39;s Exclude not Excludes"}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": true, "score": 0, "last_activity_date": 1504719178, "last_edit_date": 1504719178, "creation_date": 1504641745, "answer_id": 46062559, "question_id": 46062201, "link": "https://stackoverflow.com/questions/46062201/how-to-use-excludes-for-a-specific-rule-in-rubocop-yml/46062559#46062559", "title": "How to use excludes for a specific rule in rubocop.yml", "body": "<p>I think you should use:</p>\n\n<pre><code>Metrics/BlockLength:\n  Exclude:\n    - \"app/**/*\"\n</code></pre>\n\n<p><a href=\"http://rubocop.readthedocs.io/en/latest/configuration/#includingexcluding-files\" rel=\"nofollow noreferrer\">http://rubocop.readthedocs.io/en/latest/configuration/#includingexcluding-files</a></p>\n"}], "owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 46062559, "answer_count": 1, "score": -1, "last_activity_date": 1504719178, "creation_date": 1504640267, "last_edit_date": 1504640903, "question_id": 46062201, "link": "https://stackoverflow.com/questions/46062201/how-to-use-excludes-for-a-specific-rule-in-rubocop-yml", "title": "How to use excludes for a specific rule in rubocop.yml", "body": "<pre><code>Metrics/BlockLength:\n  Excludes:\n    - '/app/**'\n</code></pre>\n\n<p>I have this .rubocop.yml, I am expecting rubocop to not to complain only for whatever files under app regarding the block length. But it still complains, is there something I am missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "rest", "axlsx"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1504646582, "post_id": 46062006, "comment_id": 79087871, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16086162/handle-file-download-from-ajax-post/23797348#23797348\" title=\"handle file download from ajax post\">stackoverflow.com/questions/16086162/&hellip;</a>"}, {"owner": {"reputation": 509, "user_id": 5020728, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cb39b5d02ed36476d08de72405b4bf78?s=128&d=identicon&r=PG&f=1", "display_name": "OMGitzMidgar", "link": "https://stackoverflow.com/users/5020728/omgitzmidgar"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1504647090, "post_id": 46062006, "comment_id": 79088082, "body": "@AaronBreckenridge that would completely explain why the API call works externally but not when used with the browser. Is there any way to make Ajax/browser correctly accept what <code>send_data</code> is sending and create a download of it? Or am I forced to use the solution you linked?"}], "answers": [{"tags": [], "owner": {"reputation": 509, "user_id": 5020728, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cb39b5d02ed36476d08de72405b4bf78?s=128&d=identicon&r=PG&f=1", "display_name": "OMGitzMidgar", "link": "https://stackoverflow.com/users/5020728/omgitzmidgar"}, "is_accepted": true, "score": 0, "last_activity_date": 1504704071, "creation_date": 1504704071, "answer_id": 46076428, "question_id": 46062006, "link": "https://stackoverflow.com/questions/46062006/rails-send-data-does-not-send-anything-when-using-post-to-send-excel-file/46076428#46076428", "title": "rails send_data does not send anything when using POST to send Excel file", "body": "<p>This was indeed an issue with making a POST call with Ajax, not necessarily an issue with <code>send_data</code>. Here is a great workaround for making a POST call in Javascript and handling the call in Rails:</p>\n\n<p><a href=\"https://gist.github.com/DavidMah/3533415\" rel=\"nofollow noreferrer\">https://gist.github.com/DavidMah/3533415</a></p>\n\n<p>This worked for me, and I hope this awesome link gets more visibility.</p>\n"}], "owner": {"reputation": 509, "user_id": 5020728, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cb39b5d02ed36476d08de72405b4bf78?s=128&d=identicon&r=PG&f=1", "display_name": "OMGitzMidgar", "link": "https://stackoverflow.com/users/5020728/omgitzmidgar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1242, "favorite_count": 0, "accepted_answer_id": 46076428, "answer_count": 1, "score": 2, "last_activity_date": 1504704071, "creation_date": 1504639436, "last_edit_date": 1504646759, "question_id": 46062006, "link": "https://stackoverflow.com/questions/46062006/rails-send-data-does-not-send-anything-when-using-post-to-send-excel-file", "title": "rails send_data does not send anything when using POST to send Excel file", "body": "<p>When I call <code>send_data</code> at the end of a controller method to export an Excel file (using Axlsx), nothing happens IF the controller method was called using a POST. If the same controller method was called using a GET, <code>send_data</code> works perfectly fine. In both scenarios, the Excel file is slightly different (the POST sends data that determines how the data is displayed in Excel), but I have verified that <code>excel_file</code> is set up correctly when using POST. <strong>When calling the POST endpoint externally using Postman, the correct Excel file is downloaded. However, when clicking on the link in the browser that makes this POST request, <code>send_data</code> seems to do nothing.</strong> The controller method has two lines of code:</p>\n\n<pre><code>excel_file = excel_util.export(params[:myPostParams]\nsend_data(excel_file.to_stream.read, type: \"application/xlsx\", filename: \"MyExcelWorksheet.xlsx\")\n</code></pre>\n\n<p>More information about my POST call:</p>\n\n<p>I am calling the POST from an element on my view using JQuery ($.post method). Like I mentioned above, this seems to work perfectly fine because the POST call goes through passing the correct info in its body as <code>excel_file</code> is built correctly.</p>\n\n<p>Examining the Network in chrome's Developer Tools, using POST creates an 'export' action and a 'results' action. <code>export</code> is the name of the controller method that handles the POST and GET. Here is the info (only included relevant info, the host/origin/referrer links are all fine).</p>\n\n<p>'export' info:</p>\n\n<pre><code>Request URL: http://localhost:3000/&lt;myappname&gt;/export\nRequest Method: POST\n\nResponse Headers:\nContent-Disposition:attachment; filename=\"MyExcelWorksheet.xlsx\"\nContent-Length:7648\nContent-Transfer-Encoding:binary\nContent-Type:application/xlsx\nX-Content-Type-Options:nosniff\nX-Frame-Options:SAMEORIGIN\nX-Miniprofiler-Ids:[\"i6c3...\"]\n\n\nRequest Headers:\nAccept:*/*\nAccept-Encoding:gzip, deflate, br\nAccept-Language:en-US,en;q=0.8\nConnection:keep-alive\nContent-Length:1803\nContent-Type:application/x-www-form-urlencoded; charset=UTF-8\nX-Requested-With:XMLHttpRequest\n\nForm Data:\n&lt;the data I send in the body of my POST&gt;\n</code></pre>\n\n<p>'results' info:</p>\n\n<pre><code>Request URL: http://localhost:3000/mini-profiler-resources/results\nRequest Method: POST\n\nResponse Headers:\nContent-Type:application/json\n\nRequest Headers:\nAccept:application/json, text/javascript, */*; q=0.01\nAccept-Encoding:gzip, deflate, br\nAccept-Language:en-US,en;q=0.8\nConnection:keep-alive\nContent-Length:64\nContent-Type:application/x-www-form-urlencoded; charset=UTF-8\nX-Requested-With:XMLHttpRequest\n\nForm Data:\nid: &lt;i6c3... &lt; same as the X-Miniprofiler-Id shown above &gt;\npopup: 1\n</code></pre>\n\n<p>Is there an issue with rails letting POST requests respond with attachment downloads in the browser? This works when calling API externally, but not when using it in the browser.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs"], "comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1504640179, "post_id": 46061924, "comment_id": 79084934, "body": "If you&#39;re not working with your profiles collection after the query (meaning you&#39;re just returning the <code>@profiles</code> collection for your React components), then you can just use <code>select</code> as the other comment suggests. If you need to do anything with the profile columns that you <i>don&#39;t</i> want to return, then you could use a <a href=\"http://www.rubydoc.info/gems/active_model_serializers/0.8.2/ActiveModel/Serializer\" rel=\"nofollow noreferrer\">serializer</a> or use <a href=\"https://apidock.com/rails/ActiveModel/Serializers/JSON/as_json\" rel=\"nofollow noreferrer\">as_json</a>"}, {"owner": {"reputation": 428, "user_id": 4438591, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-Ev2cUbd7_MM/AAAAAAAAAAI/AAAAAAAAABY/8OJobhIRxyc/photo.jpg?sz=128", "display_name": "dedles", "link": "https://stackoverflow.com/users/4438591/dedles"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1504641562, "post_id": 46061924, "comment_id": 79085648, "body": "@maxpleaner this works (although it would be more efficient of there were the opposite sort of method, so I could just exclude a few rows). If you want to re-write as the answer, I can mark it as the correct answer."}], "owner": {"reputation": 428, "user_id": 4438591, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-Ev2cUbd7_MM/AAAAAAAAAAI/AAAAAAAAABY/8OJobhIRxyc/photo.jpg?sz=128", "display_name": "dedles", "link": "https://stackoverflow.com/users/4438591/dedles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1504643597, "answer_count": 0, "score": 0, "last_activity_date": 1504639084, "creation_date": 1504639084, "question_id": 46061924, "link": "https://stackoverflow.com/questions/46061924/sanitize-data-from-rails-controller-variable-passing-into-react-component", "closed_reason": "Duplicate", "title": "Sanitize data from Rails controller variable passing into React component", "body": "<p>I've got a Profile model that users can create that includes some sensitive data like SIN number, etc. I'm doing server-side rendering of react components in the views. So I'm doing the typical <code>@profiles = Profile.all</code> and passing down the object as props into the react component. But I don't want users to be able to access things like SIN, BirthDate, email on the front-end on a public page. </p>\n\n<p>How could I sanitize this information so that only the information I specify is passed with the <code>@profiles</code> object?</p>\n"}, {"tags": ["ruby", "gtk"], "comments": [{"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1504686616, "post_id": 46061458, "comment_id": 79101194, "body": "Does this question relate to the Gtk dialog somehow or is it just &quot;how to execute system command from ruby&quot;?"}, {"owner": {"reputation": 37, "user_id": 8544981, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a54206de23e202b0641b7a71d3cc4e?s=128&d=identicon&r=PG&f=1", "display_name": "flow daguerre", "link": "https://stackoverflow.com/users/8544981/flow-daguerre"}, "reply_to_user": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1504698442, "post_id": 46061458, "comment_id": 79109493, "body": "HI, it is about Gtk dialog, i know use command in ruby with system, the objective is now to regist user entry and send them in a command after Gtk dialog.At his point im little confused for send a command after the dialog box with the user entry."}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 8544981, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a54206de23e202b0641b7a71d3cc4e?s=128&d=identicon&r=PG&f=1", "display_name": "flow daguerre", "link": "https://stackoverflow.com/users/8544981/flow-daguerre"}, "is_accepted": false, "score": 0, "last_activity_date": 1504783666, "creation_date": 1504783666, "answer_id": 46095208, "question_id": 46061458, "link": "https://stackoverflow.com/questions/46061458/how-test-user-entry-from-a-ruby-gtk/46095208#46095208", "title": "How test user entry from a ruby gtk?", "body": "<p>Ok im trying to fix the problem, i just change line 105:</p>\n\n<pre><code>dialog.run do |response|\n  if response == Gtk::Dialog::RESPONSE_OK\n    system \"airodump-ng %s\\n\" % [card.text] % [canal.text]\n</code></pre>\n\n<p>That work but after my app stop with the following errors:</p>\n\n<pre><code>rom test4.rb:105:in `block (2 levels) in &lt;main&gt;'\n     from test4.rb:103:in `run'\n     from test4.rb:103:in `block in &lt;main&gt;'\n</code></pre>\n\n<p>How i can use a sample command after the gtk dialog like that:</p>\n\n<pre><code>system \"airodump-ng -c %s\\n\" [channelnumber.text] [card.text]\n</code></pre>\n\n<p>What does the operator % exactly ? and why i can't use all airodump-ng flags in one command line ? If i start like that:</p>\n\n<pre><code>system \"airodump-ng %s\\n\" [card.text] -c [channelnumber.text]\n</code></pre>\n\n<p>Or like that:</p>\n\n<pre><code>system \"airodump-ng %s\\n\" [card.text] \"-c\" [channelnumber.text]\n</code></pre>\n\n<p>I have this error:</p>\n\n<pre><code>test4.rb:105:in `block (2 levels) in &lt;main&gt;': undefined local variable or method `c' for main:Object\n</code></pre>\n\n<p>I know how work system with a sample ruby script but i just want to understand how link the parameters of user entry with a shell command using GTK, in this example with airodump-ng command.</p>\n"}], "owner": {"reputation": 37, "user_id": 8544981, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a54206de23e202b0641b7a71d3cc4e?s=128&d=identicon&r=PG&f=1", "display_name": "flow daguerre", "link": "https://stackoverflow.com/users/8544981/flow-daguerre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504783666, "creation_date": 1504637083, "last_edit_date": 1504638571, "question_id": 46061458, "link": "https://stackoverflow.com/questions/46061458/how-test-user-entry-from-a-ruby-gtk", "title": "How test user entry from a ruby gtk?", "body": "<p>How can I test and execute a command after a gtk dialog? I have the following.</p>\n\n<pre><code>dialog.default_response = Gtk::Dialog::RESPONSE_OK\nlabel1 = Gtk::Label.new(\"Test1\")\nlabel2 = Gtk::Label.new(\"Test2\")\nlabel3 = Gtk::Label.new(\"Test3\")\nlabel4 = Gtk::Label.new(\"Test4\")\n\nresultest1 = Gtk::Entry.new\nresultest2 = Gtk::Entry.new\nresultest3 = Gtk::Entry.new\nresultest4 = Gtk::Entry.new\n\n\ntable = Gtk::Table.new(4, 2, false)\ntable.attach_defaults(label1, 0, 1, 0, 1)\ntable.attach_defaults(label2, 0, 1, 1, 2)\ntable.attach_defaults(label3, 0, 1, 2, 3)\ntable.attach_defaults(label4, 0, 1, 3, 4) \ntable.attach_defaults(resultest1,   1, 2, 0, 1)\ntable.attach_defaults(resultest2,   1, 2, 1, 2)\ntable.attach_defaults(resultest3,   1, 2, 2, 3)\ntable.attach_defaults(resultest4,   1, 2, 3, 4)\ntable.row_spacings = 5\ntable.column_spacings = 5\ntable.border_width = 10\n\ndialog.vbox.add(table)\ndialog.show_all\n\n# Run the dialog and output the data if user okays it\ndialog.run do |response|\n  if response == Gtk::Dialog::RESPONSE_OK\n    print \"Do something with response 1 of the user: %s\\n\" % [resultest1.text]\n    print \"Do something with response 2 of the user: %s\\n\" % [resultest2.text]\n    print \"Do something with response 3 of the user: %s\\n\" % [resultest3.text]\n    print \"Do something with response 4 of the user: %s\\n\" % [resultest4.text]\n  end\nend\ndialog.destroy\n}\n</code></pre>\n\n<p>And I want to do some commands with the user response. For example one command on the same line with response 1 and 2 like unix sample commands. If question 1 is what wifi card you use and question 2 is what channel to listen to, I want to be able to do the following after the Gtk::dialog:\nairodump-ng -c ${canal} ${wificard}</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1504636386, "post_id": 46061265, "comment_id": 79082932, "body": "What do you mean by <i>produce</i>?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1504637021, "post_id": 46061265, "comment_id": 79083279, "body": "what is that result? Is it an <code>Array</code> of <code>String</code> values (<code>[&quot;cat: meow&quot;,&quot;dog: woof&quot;]</code>) or is it a <code>Hash</code> (<code>{cat: &quot;meow&quot;, dog: &quot;woof&quot;}</code>) or is it just output or a single <code>String</code> with a new line break or a rabbit in a hat with a bat? (Please explain)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1504680465, "post_id": 46061265, "comment_id": 79097428, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. <a href=\"https://stackoverflow.com\">Stack Overflow</a> is not a &quot;write-my-code-for-me-service&quot;! If you are looking for <i>that</i>, hire a programmer."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1504680496, "post_id": 46061265, "comment_id": 79097452, "body": "&quot;How can I join them by id to produce the following result.&quot; \u2013 You do it by writing a program which does that. If you have a problem with your program, carefully read the documentation of all the methods, classes, modules, and libraries you are using, write tests for your programs, trace the execution with pen and paper, single-step it in a debugger, then sleep on it, start again from the beginning, sleep on it again, and <i>then and only then</i> ask a focused, narrow question on <a href=\"https://stackoverflow.com\">Stack Overflow</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1504636861, "last_edit_date": 1504636861, "creation_date": 1504636515, "answer_id": 46061328, "question_id": 46061265, "link": "https://stackoverflow.com/questions/46061265/ruby-join-two-arrays-by-key-value/46061328#46061328", "title": "Ruby join two arrays by key value", "body": "<p>This is a way to do it.</p>\n\n<pre><code>sounds = arr2[0]\nresults = arr1.map do |animal|\n  \"#{animal[\"n\"]}: #{sounds[animal[\"id\"]]}\"\nend\nputs results\n# =&gt; cat: meow\n# =&gt; dog: woof\n</code></pre>\n\n<p>Seems like the second array should just be a hash instead. There's no point creating an array if there's only one element in it and that number won't change.</p>\n\n<p>pointless one-liner (don't use this)</p>\n\n<pre><code>puts arr1.map { |x| \"#{x[\"n\"]}: #{arr2[0][x[\"id\"]]}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 1, "last_activity_date": 1504637752, "last_edit_date": 1504637752, "creation_date": 1504637323, "answer_id": 46061511, "question_id": 46061265, "link": "https://stackoverflow.com/questions/46061265/ruby-join-two-arrays-by-key-value/46061511#46061511", "title": "Ruby join two arrays by key value", "body": "<p>I think you want your result to be a Hash, in which case this would do the job:</p>\n\n<pre><code>def match_animals_to_sounds(animal_array, sound_array)\n  sounds = sound_array.first\n  animal_array.map { |animal| [animal['n'], sounds[animal['id']]] }.to_h\nend\n\n&gt;&gt; match_animals_to_sounds(arr1, arr2)\n=&gt; {\"cat\"=&gt;\"meow\", \"dog\"=&gt;\"woof\"}\n</code></pre>\n\n<p>Your <code>arr2</code> is unusual in that it is an Array of a single element. I'm just calling <code>#first</code> on it to pull out the Hash inside. If you expect some version of this Array to have more than one element in the future, you'll need to rethink the first line of this method.</p>\n\n<p>The second line is standard Ruby Array manipulation. The first part maps each animal to a new Array of two-element Arrays containing each animal's name and sound. At the end, <code>#to_h</code> converts this array of two-element arrays to a single Hash, which is much more useful than an array of strings. I don't know what you intended in your question, but this is probably what you want.</p>\n\n<p>If you prefer to work with Symbols, you can change the second line of the method to:</p>\n\n<pre><code>animal_array.map { |animal| [animal['n'].to_sym, sounds[animal['id']].to_sym] }.to_h\n</code></pre>\n\n<p>In which case you will get:</p>\n\n<pre><code>&gt;&gt; match_animals_to_sounds(arr1, arr2)\n=&gt; {:cat=&gt;:meow, :dog=&gt;:woof}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 571, "user_id": 386540, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/SPZTm.jpg?s=128&g=1", "display_name": "Ritesh Choudhary", "link": "https://stackoverflow.com/users/386540/ritesh-choudhary"}, "is_accepted": false, "score": 0, "last_activity_date": 1504779504, "creation_date": 1504779504, "answer_id": 46093856, "question_id": 46061265, "link": "https://stackoverflow.com/questions/46061265/ruby-join-two-arrays-by-key-value/46093856#46093856", "title": "Ruby join two arrays by key value", "body": "<p>You can also get the join result by following code</p>\n\n<pre><code>arr1.collect{ |a| {a[\"n\"] =&gt; arr2[0][a[\"id\"]]} }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8564634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f53ff00fcd2d024d1d411cd84299177?s=128&d=identicon&r=PG&f=1", "display_name": "nick", "link": "https://stackoverflow.com/users/8564634/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 46061328, "answer_count": 3, "score": 0, "last_activity_date": 1545117821, "creation_date": 1504636221, "last_edit_date": 1545117821, "question_id": 46061265, "link": "https://stackoverflow.com/questions/46061265/ruby-join-two-arrays-by-key-value", "title": "Ruby join two arrays by key value", "body": "<p>I have two arrays, the first array contains field name, type and id.</p>\n\n<pre><code>arr1 = [\n    {\n        \"n\" =&gt; \"cat\",\n        \"t\" =&gt; 0,\n        \"id\" =&gt; \"42WTd5\"\n    },\n    {\n        \"n\" =&gt; \"dog\",\n        \"t\" =&gt; 0,\n        \"id\" =&gt; \"1tM5T0\"\n    }\n]\n</code></pre>\n\n<p>Second array contains field, id and value.</p>\n\n<pre><code>arr2 = [\n    {\n        \"42WTd5\"=&gt;\"meow\",\n        \"1tM5T0\"=&gt;\"woof\"\n    }\n]\n</code></pre>\n\n<p>How can I join them by id to produce the following result.</p>\n\n<pre><code>cat: meow\ndog: woof\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 528, "user_id": 4890944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6584bf69ef530c04cc2f2abc2bba08e3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6c38\u52ab\u56de\u5e30", "link": "https://stackoverflow.com/users/4890944/%e6%b0%b8%e5%8a%ab%e5%9b%9e%e5%b8%b0"}, "edited": false, "score": 0, "creation_date": 1504630545, "post_id": 46059790, "comment_id": 79080193, "body": "Can text be included between [start_tag][/end_tag]? If yes, does that mean that you could embed a tag in another tag? What do you really want to extract? The whole thing &quot;[start_tag] Maybe some text [/end_tag]&quot;? Could you clarify?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1504631167, "post_id": 46059790, "comment_id": 79080506, "body": "How did you end up with HTML but not HTML? These tags are going to be just as hard as HTML to parse, but you don&#39;t get to use an HTML parser to do it."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4330399, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6b6f6a114342d54f8e3fcd41903e6d87?s=128&d=identicon&r=PG&f=1", "display_name": "Gregg", "link": "https://stackoverflow.com/users/4330399/gregg"}, "edited": false, "score": 0, "creation_date": 1504632878, "post_id": 46060190, "comment_id": 79081341, "body": "oh by default the string doesn&#39;t cross through HTML as I mentioned it earlier the actula string looks something like this: &quot;&lt;h1&gt;Heading1&lt;/h1&gt;some text soem tex some text [some_tag attrs][/some_tag]some text some text [some_tag image_id=&quot;12345&quot;] some text&quot;  This should make it clearer"}, {"owner": {"reputation": 95, "user_id": 4330399, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6b6f6a114342d54f8e3fcd41903e6d87?s=128&d=identicon&r=PG&f=1", "display_name": "Gregg", "link": "https://stackoverflow.com/users/4330399/gregg"}, "edited": false, "score": 0, "creation_date": 1504633690, "post_id": 46060190, "comment_id": 79081696, "body": "It only returns the attribute but I need the whole thing I mean the attribute with the entire tag like this: &quot;[some_tag image_id=&quot;12345&quot;] &quot; - this is what I need"}, {"owner": {"reputation": 95, "user_id": 4330399, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6b6f6a114342d54f8e3fcd41903e6d87?s=128&d=identicon&r=PG&f=1", "display_name": "Gregg", "link": "https://stackoverflow.com/users/4330399/gregg"}, "edited": false, "score": 0, "creation_date": 1504636275, "post_id": 46060190, "comment_id": 79082868, "body": "Thanks I lot this works but I can&#39;t seem to get it right for both attribute and value e.g when I want to get the specific tag for attribute image_id with 12345 not just any id value."}, {"owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "reply_to_user": {"reputation": 95, "user_id": 4330399, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6b6f6a114342d54f8e3fcd41903e6d87?s=128&d=identicon&r=PG&f=1", "display_name": "Gregg", "link": "https://stackoverflow.com/users/4330399/gregg"}, "edited": false, "score": 0, "creation_date": 1504638595, "post_id": 46060190, "comment_id": 79084136, "body": "@Gregg I added an example using that id-value pair"}], "tags": [], "owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "is_accepted": true, "score": 1, "last_activity_date": 1504638551, "last_edit_date": 1504638551, "creation_date": 1504631484, "answer_id": 46060190, "question_id": 46059790, "link": "https://stackoverflow.com/questions/46059790/extracting-character-sequence-containing-word/46060190#46060190", "title": "Extracting character sequence containing word", "body": "<p>Something like this should work:</p>\n\n<pre><code>my_string = '&lt;h1&gt;Heading1&lt;/h1&gt;some text soem tex some text [some_tag attrs][/some_tag]some text some text [some_tag image_id=\"12345\"] some text'\n\nsearch_attrs = %w(image_id foo bar)\n\nfound = my_string =~ /(\\[[^\\]]*(#{search_attrs.join('|')})=\"[^\"\\]]*\"[^\\]]*\\])/ &amp;&amp; $1\n# =&gt; \"[some_tag image_id=\\\"12345\\\"]\"\n</code></pre>\n\n<p>For a specific attribute id and value, you can simplify it like so:</p>\n\n<pre><code>found = my_string =~ /(\\[[^\\]]* image_id=\"12345\"[^\\]]*\\])/ &amp;&amp; $1\n# =&gt; \"[some_tag image_id=\\\"12345\\\"]\"\n</code></pre>\n\n<p>It works by expanding the primary capture group to everything you're looking for.</p>\n\n<p>However, this assumes you only need to extract one such attribute.  </p>\n\n<p>It also assumes that you don't care if the string crosses through any HTML tag boundaries.  If you cared about that, then you'd need to first hash out the legal boundaries using an HTML parser, then search within those results.</p>\n"}], "owner": {"reputation": 95, "user_id": 4330399, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6b6f6a114342d54f8e3fcd41903e6d87?s=128&d=identicon&r=PG&f=1", "display_name": "Gregg", "link": "https://stackoverflow.com/users/4330399/gregg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46060190, "answer_count": 1, "score": 0, "last_activity_date": 1504642763, "creation_date": 1504629899, "last_edit_date": 1504642763, "question_id": 46059790, "link": "https://stackoverflow.com/questions/46059790/extracting-character-sequence-containing-word", "title": "Extracting character sequence containing word", "body": "<p>I've got an HTML string containing special character sequences looking like this:</p>\n\n<pre><code>[start_tag attr=\"value\"][/end_tag]\n</code></pre>\n\n<p>I want to be able to extract one of these sequences containing specific attribute e.g:</p>\n\n<pre><code>[my_image_tag image_id=\"12345\" attr2=\"...\" ...]\n</code></pre>\n\n<p>and from the above example, I want to extract the whole thing with square brackets but using only one of the attributes and its value in this case - <code>image_id=\"12345\"</code></p>\n\n<p>I tried using regex but it gives me the whole line whereas I need only the part of the line based on specific value as mentioned above. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "post"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504629978, "post_id": 46059675, "comment_id": 79079948, "body": "Your request parameters doesn&#39;t contain the file (<code>ActionDispatch::Http::UploadedFile</code>) object. You are uploading the file incorrectly."}, {"owner": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504631059, "post_id": 46059675, "comment_id": 79080458, "body": "Could you tell me which information you need to fix this issue, or useful documentation please. I have used this guide&quot;<a href=\"http://guides.rubyonrails.org/form_helpers.html#uploading-files\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/form_helpers.html#uploading-fil&zwnj;&#8203;es</a>&quot;."}, {"owner": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504649656, "post_id": 46059675, "comment_id": 79088992, "body": "Thanks  @iddorails, you put me in the right road."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504649813, "post_id": 46059675, "comment_id": 79089030, "body": "Glad I could help :) All the best with your Rails journey!"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "edited": false, "score": 0, "creation_date": 1504633582, "post_id": 46060423, "comment_id": 79081647, "body": "Thanks for your reply, I&#39;m new in ROR so I&#39;m trying to involve in this framework as possible."}, {"owner": {"reputation": 41, "user_id": 8059895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc769fc410873d6a26eba89363e32eb?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Camargo", "link": "https://stackoverflow.com/users/8059895/camilo-camargo"}, "reply_to_user": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "edited": false, "score": 0, "creation_date": 1504634566, "post_id": 46060423, "comment_id": 79082106, "body": "Follow the guide, is very easy to implement."}], "tags": [], "owner": {"reputation": 41, "user_id": 8059895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc769fc410873d6a26eba89363e32eb?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Camargo", "link": "https://stackoverflow.com/users/8059895/camilo-camargo"}, "is_accepted": false, "score": 0, "last_activity_date": 1504632553, "creation_date": 1504632553, "answer_id": 46060423, "question_id": 46059675, "link": "https://stackoverflow.com/questions/46059675/ruby-on-rails-uploading-files/46060423#46060423", "title": "Ruby on Rails uploading files", "body": "<p>I recommend using carrierwave to perform file upload. The way to use it is supremely simple, and has different tools for its handling.</p>\n\n<p>You can implement this gem with the following guide:</p>\n\n<p><a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-use-carrierwave-with-devise\" rel=\"nofollow noreferrer\">https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-use-carrierwave-with-devise</a></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "is_accepted": true, "score": 0, "last_activity_date": 1504649844, "last_edit_date": 1504649844, "creation_date": 1504649599, "answer_id": 46064043, "question_id": 46059675, "link": "https://stackoverflow.com/questions/46059675/ruby-on-rails-uploading-files/46064043#46064043", "title": "Ruby on Rails uploading files", "body": "<p>First I would like to thank @kiddorails for his help.</p>\n\n<p>The documentation  here is pretty clear \" <a href=\"http://guides.rubyonrails.org/form_helpers.html#uploading-files\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/form_helpers.html#uploading-files</a>\", the problem was in view file where I haven't put below helper inside the form,</p>\n\n<pre><code>&lt;%= f.file_field :picture %&gt;\n</code></pre>\n\n<p>as show in the documentation.</p>\n\n<pre><code>&lt;%= form_for @person do |f| %&gt;\n&lt;%= f.file_field :picture %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46064043, "answer_count": 2, "score": 0, "last_activity_date": 1545117880, "creation_date": 1504629374, "last_edit_date": 1545117880, "question_id": 46059675, "link": "https://stackoverflow.com/questions/46059675/ruby-on-rails-uploading-files", "title": "Ruby on Rails uploading files", "body": "<p>I get this error after trying to save a file.</p>\n\n<blockquote>\n  <p>undefined method `original_filename' for \"Screenshot from 2017-08-26 22-12-42.png\":String</p>\n</blockquote>\n\n<pre><code>def upload\n  uploaded_io = params[:person][:picture]\n  File.open(Rails.root.join('public', 'uploads', uploaded_io.original_filename), 'wb') do |file|\n    file.write(uploaded_io.read)\n  end\nend\n</code></pre>\n\n<p>And that's my request parameters</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"JqTuIpsrX/rfJ2/r74EbLjuWI/UlxpxpEWnX64ruRjO/UQfrDk/q/MhVLNOG16YJOBxmt84t4tfw4YZDFbRIzQ==\",\n \"description\"=&gt;{\"position\"=&gt;\"5\", \"title\"=&gt;\"title\", \"short_description\"=&gt;\"qweqwe\", \"long_description\"=&gt;\"qweqwe\"},\n \"photos\"=&gt;{\"photo\"=&gt;\"Screenshot from 2017-08-26 22-12-42.png\"},\n \"button\"=&gt;\"\"}\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1504630094, "post_id": 46059480, "comment_id": 79080000, "body": "can you post the html that has this in it?"}], "answers": [{"tags": [], "owner": {"reputation": 412, "user_id": 7962442, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208319591859379/picture?type=large", "display_name": "Maxime Bou&#233;", "link": "https://stackoverflow.com/users/7962442/maxime-bou%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1505132423, "creation_date": 1505132423, "answer_id": 46155671, "question_id": 46059480, "link": "https://stackoverflow.com/questions/46059480/calendar-css-not-working-bootstrap-simplecalendar-rails/46155671#46155671", "title": "Calendar css not working (Bootstrap, SimpleCalendar Rails)", "body": "<p>Did you import the simple_calendar.scss in your application.scss?\nI just tried and it worked but it doesn't look really like the example, just the table styled.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9907351, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5vYyKsq3GdA/AAAAAAAAAAI/AAAAAAAABUY/uP04GgtMKEU/photo.jpg?sz=128", "display_name": "Yuko Tobaru", "link": "https://stackoverflow.com/users/9907351/yuko-tobaru"}, "is_accepted": false, "score": 1, "last_activity_date": 1528370886, "last_edit_date": 1528370886, "creation_date": 1528357632, "answer_id": 50735644, "question_id": 46059480, "link": "https://stackoverflow.com/questions/46059480/calendar-css-not-working-bootstrap-simplecalendar-rails/50735644#50735644", "title": "Calendar css not working (Bootstrap, SimpleCalendar Rails)", "body": "<pre><code>--application.css.scss--\n*= require_tree .\n*= require_self\n*= require simple_calendar  &lt;- try adding this code.\n</code></pre>\n\n<p>Hopefully this will sort your problem.</p>\n"}], "owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528370886, "creation_date": 1504628463, "last_edit_date": 1592644375, "question_id": 46059480, "link": "https://stackoverflow.com/questions/46059480/calendar-css-not-working-bootstrap-simplecalendar-rails", "title": "Calendar css not working (Bootstrap, SimpleCalendar Rails)", "body": "<p>I can't seem to get the styling to apply to my SimpleCalendar in Rails (Using the gem).</p>\n<p>This is what is rendering:</p>\n<p><a href=\"https://i.stack.imgur.com/kJi7m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kJi7m.png\" alt=\"enter image description here\" /></a></p>\n<p>And this is the css, courtesy of <a href=\"https://github.com/excid3/simple_calendar\" rel=\"nofollow noreferrer\">https://github.com/excid3/simple_calendar</a>:</p>\n<pre><code>.simple-calendar {\n  table {\n    -webkit-border-horizontal-spacing: 0px;\n    -webkit-border-vertical-spacing: 0px;\n    background-color: rgba(0, 0, 0, 0);\n    border: 1px solid rgb(221, 221, 221);\n    border-collapse: collapse;\n    box-sizing: border-box;\n    max-width: 100%;\n    width: 100%;\n  }\n\n  tr {\n    border-collapse: collapse;\n  }\n\n  th {\n    padding: 6px;\n    border-bottom: 2px solid rgb(221, 221, 221);\n    border-collapse: collapse;\n    border-left: 1px solid rgb(221, 221, 221);\n    border-right: 1px solid rgb(221, 221, 221);\n    border-top: 0px none rgb(51, 51, 51);\n    box-sizing: border-box;\n    text-align: left;\n  }\n\n  td {\n    padding: 6px;\n    vertical-align: top;\n    width: 14%;\n\n    border: 1px solid #ddd;\n    border-top-color: rgb(221, 221, 221);\n    border-top-style: solid;\n    border-top-width: 1px;\n    border-right-color: rgb(221, 221, 221);\n    border-right-style: solid;\n    border-right-width: 1px;\n    border-bottom-color: rgb(221, 221, 221);\n    border-bottom-style: solid;\n    border-bottom-width: 1px;\n    border-left-color: rgb(221, 221, 221);\n    border-left-style: solid;\n    border-left-width: 1px;\n  }\n\n  .day {\n    height: 80px;\n  }\n\n  .wday-0 {}\n  .wday-1 {}\n  .wday-2 {}\n  .wday-3 {}\n  .wday-4 {}\n  .wday-5 {}\n  .wday-6 {}\n\n  .today {\n    background: #FFFFC0\n  }\n\n  .past {}\n  .future {}\n\n  .start-date {}\n\n  .prev-month {\n    background: #DDD;\n  }\n  .next-month {\n    background: #DDD;\n  }\n  .current-month {}\n\n  .has-events {}\n}\n</code></pre>\n<p>The maintainer of the gem seemed to think it was due to outdated boostrap attributes, but everything in the css looks good to me. Does anyone else seem to notice anything with the stylesheet? I am not a big fan of bootstrap and am not extremely familiar with it.</p>\n<p>None of these attributes are even being applied to my rendered view. What is the issue here?</p>\n"}, {"tags": ["ruby", "gmail", "gmail-api", "incoming-mail"], "comments": [{"owner": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "edited": false, "score": 0, "creation_date": 1504681284, "post_id": 46058715, "comment_id": 79097943, "body": "You can also ask gmail server about receive emails. You can set cron to do it e.g.every 5 minutes. I can share you code concept it you are interested in."}, {"owner": {"reputation": 54, "user_id": 5118432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1ae2245a8fc6485cc6db43e1e25d28?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u043b\u0435\u0440\u0438\u0439 \u0422\u0443\u0442\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/5118432/%d0%92%d0%b0%d0%bb%d0%b5%d1%80%d0%b8%d0%b9-%d0%a2%d1%83%d1%82%d0%b0%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "edited": false, "score": 0, "creation_date": 1504781851, "post_id": 46058715, "comment_id": 79150685, "body": "@PiotrGalas I have established a connection with my personal email, but with the corporate email can&#39;t do. If you know how to do this, then please tell"}, {"owner": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "edited": false, "score": 0, "creation_date": 1504782346, "post_id": 46058715, "comment_id": 79151052, "body": "If it is gmail then probably you need to set less restricted mode."}, {"owner": {"reputation": 54, "user_id": 5118432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1ae2245a8fc6485cc6db43e1e25d28?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u043b\u0435\u0440\u0438\u0439 \u0422\u0443\u0442\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/5118432/%d0%92%d0%b0%d0%bb%d0%b5%d1%80%d0%b8%d0%b9-%d0%a2%d1%83%d1%82%d0%b0%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "edited": false, "score": 0, "creation_date": 1504790839, "post_id": 46058715, "comment_id": 79157078, "body": "yes it is gmail, but our company policy is 2 factor authentication, also i don&#39;t know how check all emails in our domain"}], "answers": [{"tags": [], "owner": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "is_accepted": false, "score": 1, "last_activity_date": 1504668192, "creation_date": 1504668192, "answer_id": 46066275, "question_id": 46058715, "link": "https://stackoverflow.com/questions/46058715/add-web-hook-for-inbox-emails-to-company-gmail-account/46066275#46066275", "title": "Add web hook for inbox emails to company gmail account", "body": "<p>Check the <a href=\"https://developers.google.com/gmail/api/guides/push\" rel=\"nofollow noreferrer\">Push Notifications</a> for Gmail API.</p>\n\n<blockquote>\n  <p><strong>1.Initial Cloud Pub/Sub Setup</strong></p>\n  \n  <p>The Gmail API uses the <a href=\"https://cloud.google.com/pubsub/docs/overview\" rel=\"nofollow noreferrer\">Cloud Pub/Sub API</a> to deliver push\n  notifications. This allows notification via a variety of methods\n  including <strong>webhooks</strong> and polling on a single subscription endpoint.</p>\n  \n  <p><em>Prerequisites</em></p>\n  \n  <p>In order to complete the rest of this setup, make sure you fulfill the\n  Cloud Pub/Sub Prerequisites and then set up a Cloud Pub/Sub client.</p>\n  \n  <p><em>Create a topic</em></p>\n  \n  <p>Using your Cloud Pub/Sub client, create the topic that the Gmail API\n  should send notifications to. The topic name can be any name you\n  choose under your project (i.e. matching projects/myproject/topics/*,\n  where myproject is the Project ID listed for your project in the\n  Google Developers Console).</p>\n  \n  <p>We recommend that you use a single topic for all Gmail API push\n  notifications for your application, due to Cloud Pub/Sub limits on the\n  number of topics.</p>\n  \n  <p><em>Create a subscription</em></p>\n  \n  <p>Follow the Cloud Pub/Sub Subscriber Guide to set up a subscription to\n  the topic that you created. Configure the subscription type to be\n  either a <strong>webhook</strong> push (i.e. HTTP POST callback) or pull (i.e.\n  initiated by your app). This is how your application will receive\n  notifications for updates.</p>\n</blockquote>\n\n<p>more on the guide for additional info.</p>\n"}], "owner": {"reputation": 54, "user_id": 5118432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1ae2245a8fc6485cc6db43e1e25d28?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u043b\u0435\u0440\u0438\u0439 \u0422\u0443\u0442\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/5118432/%d0%92%d0%b0%d0%bb%d0%b5%d1%80%d0%b8%d0%b9-%d0%a2%d1%83%d1%82%d0%b0%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1709, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504668192, "creation_date": 1504625658, "last_edit_date": 1504633180, "question_id": 46058715, "link": "https://stackoverflow.com/questions/46058715/add-web-hook-for-inbox-emails-to-company-gmail-account", "title": "Add web hook for inbox emails to company gmail account", "body": "<p>How can I integrate email inbox from company account to my application? Gems like <code>mail_room</code> or <code>gmail</code> can connect to one mailbox given that you specify them.</p>\n\n<p>I'm thinking about a web hook like a notification api, but I can't figure out how it works.    </p>\n\n<p>How can I add a web hook for inbox emails in company's gmail account? When a message is received in <code>user@company.com</code> or <code>support@company.com</code> I need to have a notification sent.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1504624805, "post_id": 46058417, "comment_id": 79076959, "body": "Can you post your admin/main/index.html.haml file and your admin/main_controller.rb files please"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3448582"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1504625364, "post_id": 46058417, "comment_id": 79077314, "body": "@Mark admin/main/index.html.haml doesn&#39;t exist  i don&#39;t know why i got this error I forget to write that the project was working fine on the hosted server and know it doesn&#39;t"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504625804, "post_id": 46058417, "comment_id": 79077604, "body": "Semantics, but that file does exist, not in your project but in the gem (as you can see in the path). What admin gem are you using? Could you point us to it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3448582"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504626025, "post_id": 46058417, "comment_id": 79077757, "body": "@Leito I am using rails_admin 0.0.4  and when i click on invoices link I get this error intead of list of invoices"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3448582"}, "edited": false, "score": 0, "creation_date": 1504625916, "post_id": 46058746, "comment_id": 79077672, "body": "Thank you, I got this error when i try to get list of invoices in rails_admin generated which is already worked before migrating to heroku"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504626358, "post_id": 46058746, "comment_id": 79077943, "body": "One of your invoices in your Heroku&#39;s DB has a nil date where it&#39;s not supposed too, my guess is still in the <code>created_at</code> and <code>updated_at</code> fields. But it could be on any date displayed on the invoices index page. Maybe something went wrong migrating the data to Heroku, connect to the rails console and verify this: <code>Invoice.where(created_at: nil).count</code>, same with :<code>updated_at</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3448582"}, "edited": false, "score": 0, "creation_date": 1504626648, "post_id": 46058746, "comment_id": 79078130, "body": "could you please tell me  how to connect to rails console to verify. Regards"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504626830, "post_id": 46058746, "comment_id": 79078241, "body": "<code>heroku run rails console</code>, make sure you review Heroku&#39;s guide for Rails: <a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails5\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/getting-started-with-rails5</a>. Make sue how you migrated the data was the right way, etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3448582"}, "edited": false, "score": 0, "creation_date": 1504627164, "post_id": 46058746, "comment_id": 79078462, "body": "I got this errors: column invoices.updated_at does not exist, column invoices.created_at does not exist"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504627290, "post_id": 46058746, "comment_id": 79078548, "body": "I don&#39;t know your project, should they exist? Have you run the migrations?  See the guide i mentioned before. You do have a Invoice model right? What bout <code>Invoice.count</code>?"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504627672, "post_id": 46058746, "comment_id": 79078774, "body": "It shouldn&#39;t change much, if it does, find the right guide for your version. Please update your question with any relevant information you find. I suspect you have bigger issues with your Heroku setup than the one error described above."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3448582"}, "edited": false, "score": 0, "creation_date": 1504628136, "post_id": 46058746, "comment_id": 79079042, "body": "it is not problem just with heroku even in local I am testing and i got the same problem"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1504628332, "post_id": 46058746, "comment_id": 79079125, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/153704/discussion-between-leito-and-essen\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1504625761, "creation_date": 1504625761, "answer_id": 46058746, "question_id": 46058417, "link": "https://stackoverflow.com/questions/46058417/i18nargumenterror-in-admin-mainindex/46058746#46058746", "title": "I18n::ArgumentError in Admin/main#index", "body": "<p>Hard to tell without knowing which \"admin\" gem and all, but I've seen this error when passing a nil value to the <code>I18n.localize</code> (<code>I18n.l</code>) method, which will be common in admin interfaces.</p>\n\n<p>The complete error message is:\n<code>I18n::ArgumentError: Object must be a Date, DateTime or Time object. nil given.</code></p>\n\n<p>So, one of your records have a nil date where it's not supposed too. Maybe <code>:created_at</code> or <code>:updated_at</code> are <code>nil</code> or another date.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3448582"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545117919, "creation_date": 1504624665, "last_edit_date": 1545117919, "question_id": 46058417, "link": "https://stackoverflow.com/questions/46058417/i18nargumenterror-in-admin-mainindex", "title": "I18n::ArgumentError in Admin/main#index", "body": "<p>I am newbie to ruby devlopment.\nI got this error:    </p>\n\n<blockquote>\n  <p>Showing\n  /home/User/.gem/ruby/1.9.3/gems/admin-0.0.5/app/views/admin/main/index.html.haml\n  where line #129 raised:</p>\n  \n  <p>Object must be a Date, DateTime or Time object. nil given.</p>\n</blockquote>\n\n<p>Thanks in advance </p>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504623576, "post_id": 46056555, "comment_id": 79076168, "body": "You should use <code>snake_case</code> for variable names."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1504632868, "post_id": 46056555, "comment_id": 79081330, "body": "What do you mean by &quot;attribute&quot;? Do you mean an instance variable <code>@foo</code>, a method <code>foo</code>, or a getter you defined with <code>attr_reader :foo</code>?"}, {"owner": {"reputation": 509, "user_id": 5020728, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cb39b5d02ed36476d08de72405b4bf78?s=128&d=identicon&r=PG&f=1", "display_name": "OMGitzMidgar", "link": "https://stackoverflow.com/users/5020728/omgitzmidgar"}, "edited": false, "score": 1, "creation_date": 1504633113, "post_id": 46056555, "comment_id": 79081445, "body": "I mean an instance variable that I have defined with an <code>attr_reader</code> so I can access it"}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1504619677, "post_id": 46056591, "comment_id": 79073281, "body": "<code>.sort_by(&amp;keyword)</code> or <code>.sort_by(&amp;keyword.to_sym) </code> if  <code>keyword</code> is a string."}, {"owner": {"reputation": 25560, "user_id": 14253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/235c58ad566abb4c7979bc7033e9882c?s=128&d=identicon&r=PG", "display_name": "DGM", "link": "https://stackoverflow.com/users/14253/dgm"}, "edited": false, "score": 1, "creation_date": 1504623762, "post_id": 46056591, "comment_id": 79076293, "body": "In any case, please make sure that your keyword is filtered to only include the options you allow; you don&#39;t want user input to call arbitrary methods."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1504632026, "post_id": 46056591, "comment_id": 79080910, "body": "This assumes the instance variables have getters."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1504641674, "post_id": 46056591, "comment_id": 79085710, "body": "Yes @CarySwoveland, I took it for granted"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504642526, "post_id": 46056591, "comment_id": 79086125, "body": "Seems granted was good enough <i>&quot;I mean an instance variable that I have defined with an <code>attr_reader</code> so I can access it&quot;</i> - OP Comment from above"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504657671, "post_id": 46056591, "comment_id": 79090867, "body": "@engineersmnky, I missed that comment on the question."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1504619224, "last_edit_date": 1504619224, "creation_date": 1504619146, "answer_id": 46056591, "question_id": 46056555, "link": "https://stackoverflow.com/questions/46056555/ruby-sort-by-objects-attribute-based-on-keyword-string/46056591#46056591", "title": "Ruby sort by object&#39;s attribute based on keyword string", "body": "<p>Try use <code>public_send</code> method</p>\n\n<pre><code>array.sort_by\u00a0{ |item| item.public_send(sort_keyword) } \n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.1/Object.html#method-i-public_send\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.1/Object.html#method-i-public_send</a></p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1504623465, "post_id": 46056634, "comment_id": 79076089, "body": "<code>attributes</code>? This doesn&#39;t seem to be a Rails question."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504623649, "post_id": 46056634, "comment_id": 79076216, "body": "@Stefan oh, my bad, I seem to be too addicted to the fact that nearly every single question here is <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">ruby-on-rails</a>. Will put a comment."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1504641425, "post_id": 46056634, "comment_id": 79085588, "body": "Keep in mind <code>attributes</code> can be a fairly expensive function since it returns a new hash on each call, something that makes it inefficient when called aggressively."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1504623698, "last_edit_date": 1504623698, "creation_date": 1504619249, "answer_id": 46056634, "question_id": 46056555, "link": "https://stackoverflow.com/questions/46056555/ruby-sort-by-objects-attribute-based-on-keyword-string/46056634#46056634", "title": "Ruby sort by object&#39;s attribute based on keyword string", "body": "<p>In <a href=\"/questions/tagged/ruby-on-rails\" class=\"post-tag\" title=\"show questions tagged &#39;ruby-on-rails&#39;\" rel=\"tag\">ruby-on-rails</a> one might get attributes of an object via <code>attributes</code> getter. In plain old good ruby, please refer to the answer by @Ursus.</p>\n\n<pre><code>array.sort_by { |e| e.attributes[SORTER] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1504631746, "creation_date": 1504631746, "answer_id": 46060250, "question_id": 46056555, "link": "https://stackoverflow.com/questions/46056555/ruby-sort-by-objects-attribute-based-on-keyword-string/46060250#46060250", "title": "Ruby sort by object&#39;s attribute based on keyword string", "body": "<pre><code>def sort_em(arr, attr)\n  arr.sort_by { |e| e.instance_variable_get \"@#{attr}\" }\nend\n</code></pre>\n\n<p>Let's try it.</p>\n\n<pre><code>class Pets\n  def initialize(x,y,z)\n    @dog = x\n    @cat = y\n    @pig = z\n  end\nend\n\na = Pets.new(1, 3, 2)\n  #=&gt; #&lt;Pets:0x00000001be8560 @dog=1, @cat=3, @pig=2&gt;\nb = Pets.new(2, 1, 3)\n  #=&gt; #&lt;Pets:0x00000001bdec68 @dog=2, @cat=1, @pig=3&gt;\nc = Pets.new(3, 2, 1)\n  #=&gt; #&lt;Pets:0x00000001bd61a8 @dog=3, @cat=2, @pig=1&gt;\narr = [a, b, c]\n\nsort_em(arr, \"dog\")\n  #=&gt; [#&lt;Pets:0x00000001be8560 @dog=1, @cat=3, @pig=2&gt;,\n  #    #&lt;Pets:0x00000001bdec68 @dog=2, @cat=1, @pig=3&gt;,\n  #    #&lt;Pets:0x00000001bd61a8 @dog=3, @cat=2, @pig=1&gt;]\nsort_em(arr, \"cat\")\n  #=&gt; [#&lt;Pets:0x00000001bdec68 @dog=2, @cat=1, @pig=3&gt;,\n  #    #&lt;Pets:0x00000001bd61a8 @dog=3, @cat=2, @pig=1&gt;,\n  #    #&lt;Pets:0x00000001be8560 @dog=1, @cat=3, @pig=2&gt;]\nsort_em(arr, \"pig\")\n  #=&gt; [#&lt;Pets:0x00000001bd61a8 @dog=3, @cat=2, @pig=1&gt;,\n  #    #&lt;Pets:0x00000001be8560 @dog=1, @cat=3, @pig=2&gt;,\n  #    #&lt;Pets:0x00000001bdec68 @dog=2, @cat=1, @pig=3&gt;]\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 5020728, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cb39b5d02ed36476d08de72405b4bf78?s=128&d=identicon&r=PG&f=1", "display_name": "OMGitzMidgar", "link": "https://stackoverflow.com/users/5020728/omgitzmidgar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 46056591, "answer_count": 3, "score": -3, "last_activity_date": 1504631746, "creation_date": 1504619046, "question_id": 46056555, "link": "https://stackoverflow.com/questions/46056555/ruby-sort-by-objects-attribute-based-on-keyword-string", "title": "Ruby sort by object&#39;s attribute based on keyword string", "body": "<p>I have a string called <code>sortKeyword</code>. I want to sort an array of objects by their attributes, but which attribute to sort on depends on <code>sortKeyword</code>.</p>\n\n<p>Ex: when <code>sortKeyword</code> is 'name' I want to sort on the objects' 'name' attribute, when <code>sortKeyword</code> is 'age' I want to sort on the objects' age attribute, etc...</p>\n\n<p>There are 10 possible values for <code>sortKeyword</code>, so naturally I'd rather not have a 10-case switch statement. Is there a better way to do this in Ruby?</p>\n"}, {"tags": ["ruby", "cucumber", "bdd", "gherkin"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504615420, "post_id": 46055230, "comment_id": 79069952, "body": "Put a hash symbol before this example. Cucumber code is a ruby code."}, {"owner": {"reputation": 81, "user_id": 5723230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8ca3e5a58bc8aff6e2ed46095e0adf9?s=128&d=identicon&r=PG&f=1", "display_name": "Lominskiy Volodimyr", "link": "https://stackoverflow.com/users/5723230/lominskiy-volodimyr"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504615537, "post_id": 46055230, "comment_id": 79070046, "body": "Sorry I misunderstood you. I&#39;d like to do that in runtime @mudasobwa"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504616194, "post_id": 46055230, "comment_id": 79070563, "body": "AFAIK, one can not skip <i>examples</i>, but it\u2019s possible to <a href=\"https://stackoverflow.com/questions/22303948/how-do-i-conditionally-skip-a-scenario-in-cucumber\">effectively skip scenarios</a>. So, split the code above into two scenarios and conditionally skip the latter."}, {"owner": {"reputation": 81, "user_id": 5723230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8ca3e5a58bc8aff6e2ed46095e0adf9?s=128&d=identicon&r=PG&f=1", "display_name": "Lominskiy Volodimyr", "link": "https://stackoverflow.com/users/5723230/lominskiy-volodimyr"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504616934, "post_id": 46055230, "comment_id": 79071121, "body": "That&#39;s not a good solution for me."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504617239, "post_id": 46055230, "comment_id": 79071362, "body": "Then your option is to patch cucumber source code."}, {"owner": {"reputation": 81, "user_id": 5723230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8ca3e5a58bc8aff6e2ed46095e0adf9?s=128&d=identicon&r=PG&f=1", "display_name": "Lominskiy Volodimyr", "link": "https://stackoverflow.com/users/5723230/lominskiy-volodimyr"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504624056, "post_id": 46055230, "comment_id": 79076491, "body": "Actually, no. Take a look at the answer below from @Tom."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5723230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8ca3e5a58bc8aff6e2ed46095e0adf9?s=128&d=identicon&r=PG&f=1", "display_name": "Lominskiy Volodimyr", "link": "https://stackoverflow.com/users/5723230/lominskiy-volodimyr"}, "edited": false, "score": 0, "creation_date": 1504624093, "post_id": 46057112, "comment_id": 79076514, "body": "Thanks a lot mate."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1504620634, "creation_date": 1504620634, "answer_id": 46057112, "question_id": 46055230, "link": "https://stackoverflow.com/questions/46055230/how-to-ignore-particular-example-in-cucumber/46057112#46057112", "title": "How to ignore particular example in cucumber", "body": "<p>A possible approach I'd suggest is to use <a href=\"https://github.com/cucumber/cucumber/wiki/Tags\" rel=\"nofollow noreferrer\">tags</a>:</p>\n\n<pre><code>Scenario Outline: Some simple scenario\n  Given I logged in as &lt;local&gt; user\n  When  I visit home page\n  Then  I should see &lt;local&gt; logo\n\n  Examples:\n    | local |\n    | UK    |\n\n  @wip\n  Examples:\n    | local |\n    | Spain |\n</code></pre>\n\n<p>This will, by default, skip the \"work in progress\" tests. There are also <a href=\"https://stackoverflow.com/a/5983793/1954610\">other approaches</a> you could take, to run the tests as \"expected failures\".</p>\n"}, {"tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 1, "last_activity_date": 1504627584, "creation_date": 1504627584, "answer_id": 46059269, "question_id": 46055230, "link": "https://stackoverflow.com/questions/46055230/how-to-ignore-particular-example-in-cucumber/46059269#46059269", "title": "How to ignore particular example in cucumber", "body": "<p>its possible to run just one example from the outline by using the line number, so if your UK example was on line 8 of <code>simple.feature</code> you could run</p>\n\n<p><code>cucumber features/simple.feature:8</code></p>\n\n<p>There is no way to run a bunch of features and exclude a particular scenario without tagging or modifying the feature file as far as I'm aware. Run <code>cucumber --help</code> to get full details. Personally I can't understand why you would want to do this, perhaps you could explain why you want to do this and give an example, there might be alternative workflows that would work for you.</p>\n"}], "owner": {"reputation": 81, "user_id": 5723230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8ca3e5a58bc8aff6e2ed46095e0adf9?s=128&d=identicon&r=PG&f=1", "display_name": "Lominskiy Volodimyr", "link": "https://stackoverflow.com/users/5723230/lominskiy-volodimyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1707, "favorite_count": 0, "accepted_answer_id": 46057112, "answer_count": 2, "score": 1, "last_activity_date": 1504726515, "creation_date": 1504615206, "last_edit_date": 1504726515, "question_id": 46055230, "link": "https://stackoverflow.com/questions/46055230/how-to-ignore-particular-example-in-cucumber", "title": "How to ignore particular example in cucumber", "body": "<p>As a test automation engineer. I'd like to exclude some examples in runtime.\nFor example:</p>\n\n<pre><code>Scenario: Some simple scenario\n Given I logged in as &lt;local&gt; user\n When  I visit home page\n Then  I should see &lt;local&gt; logo\n\nExamples: User\n |local|\n |UK   |\n#ignore 'Spain'\n |Spain|\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "apartment-gem"], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1504614533, "creation_date": 1504614533, "answer_id": 46055020, "question_id": 46054300, "link": "https://stackoverflow.com/questions/46054300/how-to-redirect-user-after-registration-in-apartment-gem/46055020#46055020", "title": "How to redirect user after registration in apartment gem", "body": "<p>At the moment you aren't redirecting after signing in your AdminUser. Rails therefore looks at the controller action for a template to render, and in this case there is no 'register' template namespaced under Diy/Admin.</p>\n\n<p>Does each AdminUser have their own show page?</p>\n\n<p>If so, I would add an attribute to each AdminUser called say 'homepage', and when the AdminUser edits their homepage then you set this attribute to true.</p>\n\n<p>Then after you sign in your AdminUser, simply redirect them to either their show page or the root page depending on that attribute:</p>\n\n<pre><code>def register\n   admin  = AdminUser.find_by_email params[:email]\n   unless admin \n     admin = AdminUser.create(\n     first_name:params[:first_name], \n     last_name: params[:last_name],\n     email: params[:email],\n     password: params[:password], \n     password_confirmation:  params[:password_confirmation],\n     subdomain: ( params[:subdomain] ? params[:subdomain].downcase : params[:first_name].downcase))\n   end\n   sign_in(admin, bypass: true)\n   redirect_to admin.homepage? admin : root_path\n end\n</code></pre>\n\n<p>You could simply remove this check and leave it at:</p>\n\n<pre><code>redirect_to admin\n</code></pre>\n\n<p>However this will redirect whether or not the AdminUser has made their own page. Note that</p>\n\n<pre><code>redirect_to admin\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>redirect_to admin_path(admin)\n</code></pre>\n"}], "owner": {"reputation": 1319, "user_id": 5060959, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2d7af66fc79160e5872515869fad813c?s=128&d=identicon&r=PG&f=1", "display_name": "thedudecodes", "link": "https://stackoverflow.com/users/5060959/thedudecodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504614533, "creation_date": 1504612230, "question_id": 46054300, "link": "https://stackoverflow.com/questions/46054300/how-to-redirect-user-after-registration-in-apartment-gem", "title": "How to redirect user after registration in apartment gem", "body": "<p>I am using apartment gem to achieve multitenancy. When registers on the app I want to redirect him to his own url example for localhost (xyz.localhost:3000) etc.\nfor registration I am getting all the necessary data.\na. email, b. first_name , c.last_name, d. password,e.password_confirmation ,f.subdomain </p>\n\n<p>and my controller looks like:</p>\n\n<pre><code>  class Diy::AdminController &lt; ApplicationController\n     layout false\n\n     def register\n        admin  = AdminUser.find_by_email params[:email]\n       unless admin \n         admin = AdminUser.create(\n         first_name:params[:first_name], \n         last_name: params[:last_name],\n         email: params[:email],\n         password: params[:password], \n         password_confirmation:  params[:password_confirmation],\n         subdomain: ( params[:subdomain] ? params[:subdomain].downcase : params[:first_name].downcase))\n       end\n       sign_in(admin, bypass: true)\n     end\n   end\n</code></pre>\n\n<p>I am getting Template is missing error.\nI want to have different home page for different user they can customize it but if they dont they will see a simple home page.</p>\n"}, {"tags": ["javascript", "jquery", "ruby", "ruby-on-rails-4", "datetimepicker"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8563041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c33dff80c0b17e87aec8dca113e51e0?s=128&d=identicon&r=PG&f=1", "display_name": "Asvini RoR", "link": "https://stackoverflow.com/users/8563041/asvini-ror"}, "edited": false, "score": 0, "creation_date": 1504614448, "post_id": 46054617, "comment_id": 79069289, "body": "No luck with the above code.. I am getting the date pick but in edit I am able to select the previous dates .@aboelnour"}, {"owner": {"reputation": 225, "user_id": 6163727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XfVgH.jpg?s=128&g=1", "display_name": "AboElnouR", "link": "https://stackoverflow.com/users/6163727/aboelnour"}, "reply_to_user": {"reputation": 13, "user_id": 8563041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c33dff80c0b17e87aec8dca113e51e0?s=128&d=identicon&r=PG&f=1", "display_name": "Asvini RoR", "link": "https://stackoverflow.com/users/8563041/asvini-ror"}, "edited": false, "score": 0, "creation_date": 1504632570, "post_id": 46054617, "comment_id": 79081177, "body": "try to work with this code only <code>$(&#39;#id&#39;).datetimepicker({     minDate: new Date() &#47;&#47; or minDate: 0   });</code>"}, {"owner": {"reputation": 225, "user_id": 6163727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XfVgH.jpg?s=128&g=1", "display_name": "AboElnouR", "link": "https://stackoverflow.com/users/6163727/aboelnour"}, "reply_to_user": {"reputation": 13, "user_id": 8563041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c33dff80c0b17e87aec8dca113e51e0?s=128&d=identicon&r=PG&f=1", "display_name": "Asvini RoR", "link": "https://stackoverflow.com/users/8563041/asvini-ror"}, "edited": false, "score": 0, "creation_date": 1504689597, "post_id": 46054617, "comment_id": 79103271, "body": "Great. Happy to help."}], "tags": [], "owner": {"reputation": 225, "user_id": 6163727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XfVgH.jpg?s=128&g=1", "display_name": "AboElnouR", "link": "https://stackoverflow.com/users/6163727/aboelnour"}, "is_accepted": true, "score": 0, "last_activity_date": 1504793473, "last_edit_date": 1504793473, "creation_date": 1504613285, "answer_id": 46054617, "question_id": 46054218, "link": "https://stackoverflow.com/questions/46054218/how-to-disable-previous-date-on-edit-using-datetime-picker/46054617#46054617", "title": "How to disable previous date on edit using datetime picker", "body": "<p>Try this:  </p>\n\n<pre><code>$('#id').datetimepicker({\n    format: 'DD/MM/YYYY',\n    minDate: new Date(), // Or try minDate: 0\n    ignoreReadonly: true,\n    useCurrent: false\n});\n</code></pre>\n\n<p>You may check <a href=\"https://stackoverflow.com/a/24637843/6163727\">this answer</a> too.</p>\n"}], "owner": {"reputation": 13, "user_id": 8563041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c33dff80c0b17e87aec8dca113e51e0?s=128&d=identicon&r=PG&f=1", "display_name": "Asvini RoR", "link": "https://stackoverflow.com/users/8563041/asvini-ror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 46054617, "answer_count": 1, "score": 0, "last_activity_date": 1504793473, "creation_date": 1504611955, "last_edit_date": 1504612427, "question_id": 46054218, "link": "https://stackoverflow.com/questions/46054218/how-to-disable-previous-date-on-edit-using-datetime-picker", "title": "How to disable previous date on edit using datetime picker", "body": "<p>I am using date time picker.on edit page the selected value is not displaying. \nwhen I check the code element, I am seeing the result in value attribute.\nmy code is </p>\n\n<pre><code>  $('#id').datetimepicker({\n    format: 'DD/MM/YYYY',\n    minDate:moment().millisecond(0).second(0).minute(0).hour(0),\n    ignoreReadonly: true,\n    useCurrent: false\n  });\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 5129516, "user_type": "registered", "profile_image": "https://graph.facebook.com/740653432748223/picture?type=large", "display_name": "Ankush Malik", "link": "https://stackoverflow.com/users/5129516/ankush-malik"}, "edited": false, "score": 0, "creation_date": 1504611482, "post_id": 46053720, "comment_id": 79067332, "body": "thnx,But i m working on someone elses code. How to update the table now. I want to do it properly ,else  my code above is still working fine"}, {"owner": {"reputation": 934, "user_id": 3589799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2eee47e029f07a4c79c52ea377e27?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3589799/vlad"}, "edited": false, "score": 1, "creation_date": 1504612282, "post_id": 46053720, "comment_id": 79067869, "body": "<code>community_id</code> should be <code>null</code> not 0, if it&#39;s indeed optional. If you add <code>optional: true</code> to your model, it will only apply to future records. To alter existing ones, you need a migration. <code>change_column_default(:posts, :community_id, nil)</code> should do the trick."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1504619979, "post_id": 46053720, "comment_id": 79073498, "body": "My pleasure Sir ;)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1504610444, "creation_date": 1504610444, "answer_id": 46053720, "question_id": 46053658, "link": "https://stackoverflow.com/questions/46053658/how-to-make-a-models-column-optional-in-rails5/46053720#46053720", "title": "How to make a model&#39;s column optional in rails5", "body": "<p>When you want an optional <code>belongs_to</code>:</p>\n\n<p>1) Just don't add in the field's migration</p>\n\n<pre><code>null: false \n</code></pre>\n\n<p>2) In the model use</p>\n\n<pre><code>belongs_to :community, optional: true\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 5129516, "user_type": "registered", "profile_image": "https://graph.facebook.com/740653432748223/picture?type=large", "display_name": "Ankush Malik", "link": "https://stackoverflow.com/users/5129516/ankush-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1775, "favorite_count": 0, "accepted_answer_id": 46053720, "answer_count": 1, "score": 0, "last_activity_date": 1545117950, "creation_date": 1504610264, "last_edit_date": 1545117950, "question_id": 46053658, "link": "https://stackoverflow.com/questions/46053658/how-to-make-a-models-column-optional-in-rails5", "title": "How to make a model&#39;s column optional in rails5", "body": "<p>I created a model(post) having two parents Community and User.\nNow i want that It could be possible that <code>community_id</code> field may or maynot be filled so i run a migration stating <code>change_column_null</code> and <code>change_column_default</code> for <code>community_id</code> 's null to be allowed and default value to be zero </p>\n\n<p>Now error is that community should exist so should i create a community of <code>id=0</code> in rails console,is it a good practice?</p>\n\n<p>or Am I doing something wrong in following code below,in allowing null true???</p>\n\n<p>Post.rb(model)</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :community\nend\n</code></pre>\n\n<p>migration:</p>\n\n<pre><code>class Postcommunityidallownull &lt; ActiveRecord::Migration[5.1]\n  def change\n    change_column_null :posts, :community_id, true\n    change_column_default :posts,:community_id, 0\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1504610363, "creation_date": 1504610363, "answer_id": 46053697, "question_id": 46053627, "link": "https://stackoverflow.com/questions/46053627/coding-a-simple-cli-tic-tac-toe-game-my-loop-is-only-iterating-once-before-brea/46053697#46053697", "title": "Coding a simple CLI Tic Tac Toe game, my loop is only iterating once before breaking (code inside)", "body": "<p><code>Enumerable#each</code> just <em>iterates</em> the list/array. What you need is <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-detect\" rel=\"nofollow noreferrer\"><code>Enumerable.detect</code></a> or <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\"><code>Enumerable.any?</code></a>:</p>\n\n<pre><code>def won?(board)\n  WIN_COMBINATIONS.detect do |win_combination|\n    win_combination.all? { |win_index| board[win_index] == \"X\" } ||\n    win_combination.all? { |win_index| board[win_index] == \"O\" }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8563206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5a95b325bb0f161875c84aeb1c64b2?s=128&d=identicon&r=PG&f=1", "display_name": "set_it_off", "link": "https://stackoverflow.com/users/8563206/set-it-off"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 46053697, "answer_count": 1, "score": 0, "last_activity_date": 1504610408, "creation_date": 1504610163, "last_edit_date": 1504610408, "question_id": 46053627, "link": "https://stackoverflow.com/questions/46053627/coding-a-simple-cli-tic-tac-toe-game-my-loop-is-only-iterating-once-before-brea", "title": "Coding a simple CLI Tic Tac Toe game, my loop is only iterating once before breaking (code inside)", "body": "<p>I'm trying to program a method that determines if there is a winning combination of moves on a tic tac toe board. The program is a simple CLI application. The method accepts a board array, a \" \" is considered and open space and \"X\" and \"O\" represent moves. The method returns \"false\" for a board that has no winning combination, or returns the the winning combination if there is one as an array of indexes. Each index represents a spot on the board as follows:</p>\n\n<pre><code>0 1 2\n\n3 4 5\n\n6 7 8\n</code></pre>\n\n<p>An example of a board would be</p>\n\n<pre><code>board = [\"X\", \"O\", \" \", \"O\", \"X\", \" \", \" \", \" \", \"X\"]\n\n'#won? would return [0, 4, 8]\n</code></pre>\n\n<p>The problem is that my code only iterates through one winning combination before breaking out of the loop.</p>\n\n<p>I have each winning combination stored as a constant WIN_COMBINATIONS. My code is as follows,</p>\n\n<pre><code>def won?(board)\n  WIN_COMBINATIONS.each do | win_combination |\n    win_combination.each do | win_index |\n      if win_combination.all? { | win_index | board[win_index] == \"X\" }\n        win_combination\n      elsif win_combination.all? { | win_index | board[win_index] == \"O\" }\n        win_combination\n      else\n        false\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1504608714, "post_id": 46053062, "comment_id": 79065510, "body": "Mysql doesn&#39;t have array columns, last time I checked. So your database values is not an array, it&#39;s a string."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 5, "creation_date": 1504608807, "post_id": 46053062, "comment_id": 79065572, "body": "<code>serialize :column, Array</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504609054, "post_id": 46053062, "comment_id": 79065744, "body": "Where does the value come from (is it a model attribute or do you fetch it via a raw SQL query?) and how did you store it in the database?"}, {"owner": {"reputation": 111, "user_id": 6764606, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XsQXJ7tkpp0/AAAAAAAAAAI/AAAAAAAAAPM/gVB1h_lJJC8/photo.jpg?sz=128", "display_name": "Mahesh Bablu", "link": "https://stackoverflow.com/users/6764606/mahesh-bablu"}, "edited": false, "score": 0, "creation_date": 1504613962, "post_id": 46053062, "comment_id": 79068944, "body": "Its a model attribute and I stored my manipulating the values with callback"}], "answers": [{"tags": [], "owner": {"reputation": 1480, "user_id": 5872935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpdFh.jpg?s=128&g=1", "display_name": "Mshka", "link": "https://stackoverflow.com/users/5872935/mshka"}, "is_accepted": true, "score": 0, "last_activity_date": 1504610356, "last_edit_date": 1504610356, "creation_date": 1504610046, "answer_id": 46053587, "question_id": 46053062, "link": "https://stackoverflow.com/questions/46053062/database-value-is-5-1-2-8-6-9-in-rails-console-is-showing/46053587#46053587", "title": "Database value is [&quot;&quot;, &quot;5&quot;, &quot;1&quot;, &quot;2&quot;, &quot;8&quot;, &quot;6&quot;, &quot;9&quot;] in Rails Console is showing as &quot;[\\&quot;\\&quot;, \\&quot;5\\&quot;, \\&quot;1\\&quot;, \\&quot;2\\&quot;, \\&quot;8\\&quot;, \\&quot;6\\&quot;, \\&quot;9\\&quot;]&quot;?", "body": "<p>Looks like you column is saved as json </p>\n\n<pre><code>[15] pry(main)&gt; JSON.parse(\"[\\\"\\\", \\\"5\\\", \\\"1\\\", \\\"2\\\", \\\"8\\\", \\\"6\\\", \\\"9\\\"]\")\n=&gt; [\"\", \"5\", \"1\", \"2\", \"8\", \"6\", \"9\"]\n</code></pre>\n\n<p>you can use <code>serialize :name_of_that_column, Array</code> so it get parsed when called from db </p>\n\n<p>you can  check <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html</a> f</p>\n"}], "owner": {"reputation": 111, "user_id": 6764606, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XsQXJ7tkpp0/AAAAAAAAAAI/AAAAAAAAAPM/gVB1h_lJJC8/photo.jpg?sz=128", "display_name": "Mahesh Bablu", "link": "https://stackoverflow.com/users/6764606/mahesh-bablu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 46053587, "answer_count": 1, "score": 0, "last_activity_date": 1545118003, "creation_date": 1504608328, "last_edit_date": 1545118003, "question_id": 46053062, "link": "https://stackoverflow.com/questions/46053062/database-value-is-5-1-2-8-6-9-in-rails-console-is-showing", "title": "Database value is [&quot;&quot;, &quot;5&quot;, &quot;1&quot;, &quot;2&quot;, &quot;8&quot;, &quot;6&quot;, &quot;9&quot;] in Rails Console is showing as &quot;[\\&quot;\\&quot;, \\&quot;5\\&quot;, \\&quot;1\\&quot;, \\&quot;2\\&quot;, \\&quot;8\\&quot;, \\&quot;6\\&quot;, \\&quot;9\\&quot;]&quot;?", "body": "<p>Database value is </p>\n\n<pre><code>[\"\", \"5\", \"1\", \"2\", \"8\", \"6\", \"9\"] \n</code></pre>\n\n<p>But in Rails console it showing as:      </p>\n\n<pre><code>\"[\\\"\\\", \\\"5\\\", \\\"1\\\", \\\"2\\\", \\\"8\\\", \\\"6\\\", \\\"9\\\"]\" \n</code></pre>\n\n<p>Any solution to show it as same as the array?    </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1933, "user_id": 1232796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b9f65fdc88eca3d9ce0a02a91d74aa?s=128&d=identicon&r=PG", "display_name": "tgdn", "link": "https://stackoverflow.com/users/1232796/tgdn"}, "edited": false, "score": 0, "creation_date": 1504606964, "post_id": 46052557, "comment_id": 79064503, "body": "You&#39;re not looking at the same image"}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1504606978, "post_id": 46052557, "comment_id": 79064511, "body": "So is <code>images&#47;</code> part of the path or not?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1504607658, "post_id": 46052557, "comment_id": 79064927, "body": "Can you show your actual code? The usual fix for this is that you need to create a <b>template</b> for the javascript file - e.g. <code>something.js.erb</code>. This way, the path to the image can be resolved with regards to the asset pipeline."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504607764, "post_id": 46052557, "comment_id": 79065002, "body": "...Assuming that&#39;s the issue. Or maybe you simply don&#39;t have the images stored on the production server for some reason??"}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "reply_to_user": {"reputation": 1933, "user_id": 1232796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b9f65fdc88eca3d9ce0a02a91d74aa?s=128&d=identicon&r=PG", "display_name": "tgdn", "link": "https://stackoverflow.com/users/1232796/tgdn"}, "edited": false, "score": 0, "creation_date": 1504609117, "post_id": 46052557, "comment_id": 79065794, "body": "@tgdn this is just sample of images, they exist both."}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "reply_to_user": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1504609187, "post_id": 46052557, "comment_id": 79065838, "body": "@ChrisG yes that&#39;s the part of the path but in rails, you don&#39;t need to put that in a path, I tried with and without. Because on local dev its works without."}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504609490, "post_id": 46052557, "comment_id": 79066058, "body": "@TomLord I have javascript file with image names ass array and this works well on local development. <a href=\"https://codeshare.io/aJdoNy\" rel=\"nofollow noreferrer\">codeshare.io/aJdoNy</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1504618836, "post_id": 46052557, "comment_id": 79072610, "body": "@zire Like I said, the issue is probably (?) that in production you have enabled the <b>asset pipeline</b>. This means your files will be <b>fingerprinted</b> - i.e. have random strings appended to their names. <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets\" rel=\"nofollow noreferrer\">Read the documentation</a> on how to generate links to your files. Like I said above, the trick is to generate your <code>js</code> file via a ruby template - i.e. write it as a <code>.js.erb</code> file. (Or alternatively, disable the asset pipeline!)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1504619386, "post_id": 46052557, "comment_id": 79073038, "body": "Note also that public images can also be placed (unsurprisingly) in the <code>public&#47;</code> folder. These will not be compiled, so can be referenced directly by the filename. However, images placed here will <i>always</i> be accessible (e.g. without logging in) - so don&#39;t misuse it. For example, you&#39;ll probably already have stuff relating to <code>4xx</code> error pages in the <code>public</code> folder."}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504640922, "post_id": 46052557, "comment_id": 79085341, "body": "@TomLord you are correct it was a problem with fingerprinted file names inside public dir.  They have random names,  so I need to make additional functionality to read newly generated names after recompiling assets. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 7673374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0ba6fecc5812530cda488eb7a8c6cc?s=128&d=identicon&r=PG", "display_name": "ihtishaam ahmed", "link": "https://stackoverflow.com/users/7673374/ihtishaam-ahmed"}, "edited": false, "score": 0, "creation_date": 1562621829, "post_id": 46064835, "comment_id": 100425701, "body": "This will slow your application down."}], "tags": [], "owner": {"reputation": 159, "user_id": 8047623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5YWS.jpg?s=128&g=1", "display_name": "Francisco", "link": "https://stackoverflow.com/users/8047623/francisco"}, "is_accepted": false, "score": 1, "last_activity_date": 1504655612, "creation_date": 1504655612, "answer_id": 46064835, "question_id": 46052557, "link": "https://stackoverflow.com/questions/46052557/how-to-access-image-with-javascript-in-ruby-on-rails-project-assets/46064835#46064835", "title": "How to access image with JavaScript in Ruby On Rails Project assets?", "body": "<p>Try going to the file config/environments/production.rb and changing this line:</p>\n\n<pre><code> config.assets.compile = false\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code> config.assets.compile = true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 3150093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4fd13f999326b458f21e8e0b15d0752?s=128&d=identicon&r=PG", "display_name": "kurenn", "link": "https://stackoverflow.com/users/3150093/kurenn"}, "is_accepted": false, "score": 2, "last_activity_date": 1504655918, "creation_date": 1504655918, "answer_id": 46064872, "question_id": 46052557, "link": "https://stackoverflow.com/questions/46052557/how-to-access-image-with-javascript-in-ruby-on-rails-project-assets/46064872#46064872", "title": "How to access image with JavaScript in Ruby On Rails Project assets?", "body": "<p>The first in here is that when you deploy to something like Heroku or you run the <code>rake assets:precompile</code>, it will add a token to every asset on your rails app(css,js,images,fonts), it's for caching purposes</p>\n\n<p>This do not happen at development, so to make it work you need to first update the name of the <code>js</code> file to <code>something.js.erb</code> and then whenever you need the path for an image, you can now embed ruby on JS, so something like:</p>\n\n<pre><code>var imagePath = \"&lt;%= asset_path('image.png') %&gt;\";\n</code></pre>\n\n<p>This also work for coffee script as well, just make the proper arrangements! =)</p>\n"}], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1504655918, "creation_date": 1504606716, "question_id": 46052557, "link": "https://stackoverflow.com/questions/46052557/how-to-access-image-with-javascript-in-ruby-on-rails-project-assets", "title": "How to access image with JavaScript in Ruby On Rails Project assets?", "body": "<p>I have problem accessing image file from Ruby On Rails projects <code>app/assets/images/dir/image.jpg</code></p>\n\n<p>It's showing nothing on image box in a browser.\nLocally on development environment run its shows.\nIn my code on a local machine, I am using relative path <code>'/assets/dir/'+image.jpg</code>  and this working locally ok. </p>\n\n<p>I can open image on '<code>http://localhost:3000/assets/dir/ih4modxp4i4-jakob-owens.jpg</code>'   but online on production nothings showing '<code>http://xxx.62.xx.127/assets/dir/horuo-9ghiw-vincent-guth.jpg</code>'</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 1, "creation_date": 1504606137, "post_id": 46052284, "comment_id": 79064004, "body": "check here <a href=\"https://stackoverflow.com/questions/11757726/give-custom-messages-in-page-entries-info-of-will-paginate-in-rails?answertab=active#tab-top\" title=\"give custom messages in page entries info of will paginate in rails\">stackoverflow.com/questions/11757726/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 3227995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d7010e557f428a2870ec87a03c100c?s=128&d=identicon&r=PG&f=1", "display_name": "Asvinipr", "link": "https://stackoverflow.com/users/3227995/asvinipr"}, "reply_to_user": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1504606439, "post_id": 46052284, "comment_id": 79064200, "body": "@LHH Thanks Its working.."}], "owner": {"reputation": 1, "user_id": 3227995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d7010e557f428a2870ec87a03c100c?s=128&d=identicon&r=PG&f=1", "display_name": "Asvinipr", "link": "https://stackoverflow.com/users/3227995/asvinipr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504606058, "creation_date": 1504605884, "last_edit_date": 1504606058, "question_id": 46052284, "link": "https://stackoverflow.com/questions/46052284/how-can-i-overwrite-will-paginate-page-entries-info-method", "title": "How can I overwrite will_paginate page_entries_info method?", "body": "<p>I have a problem with the display of the text messages from <code>page_entries_info</code> method. I want to change text in that. </p>\n\n<p>Any Idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "single-page-application"], "comments": [{"owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "edited": false, "score": 0, "creation_date": 1504608026, "post_id": 46051867, "comment_id": 79065162, "body": "Probably the /api/invoicing-sessions hangs or fails. Can you step through your code with a debugger?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "edited": false, "score": 0, "creation_date": 1504608098, "post_id": 46051867, "comment_id": 79065194, "body": "The execution did not reach my code"}, {"owner": {"reputation": 362, "user_id": 2897757, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e0a557df272ae7b563b58548032e889?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/2897757/marcel"}, "edited": false, "score": 0, "creation_date": 1523353812, "post_id": 46051867, "comment_id": 86515357, "body": "Hey, you ever found a specific reason for this? I have the same issue (occasionally)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 3, "creation_date": 1523353988, "post_id": 46051867, "comment_id": 86515478, "body": "I solved with <code>config.eager_load = true</code> in <code>config&#47;environments&#47;development.rb</code>"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1523354010, "post_id": 46051867, "comment_id": 86515499, "body": "But don&#39;t know why though"}, {"owner": {"reputation": 4161, "user_id": 1450420, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cbf9e8aa5e2fb2f81bd8d8e9ea94ef50?s=128&d=identicon&r=PG", "display_name": "Derek Hill", "link": "https://stackoverflow.com/users/1450420/derek-hill"}, "edited": false, "score": 3, "creation_date": 1525601146, "post_id": 46051867, "comment_id": 87413657, "body": "<a href=\"https://github.com/rails/rails/issues/32082\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/32082</a>"}], "answers": [{"tags": [], "owner": {"reputation": 841, "user_id": 12294425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dxWNY.jpg?s=128&g=1", "display_name": "calebkm", "link": "https://stackoverflow.com/users/12294425/calebkm"}, "is_accepted": false, "score": 3, "last_activity_date": 1572458543, "creation_date": 1572458543, "answer_id": 58631309, "question_id": 46051867, "link": "https://stackoverflow.com/questions/46051867/rails-server-hangs-sometimes-after-two-requests-by-the-frontend/58631309#58631309", "title": "Rails server hangs (sometimes) after two requests by the frontend", "body": "<p>For anyone finding this question: this seems to still be an <a href=\"https://github.com/rails/rails/issues/33209\" rel=\"nofollow noreferrer\">open Rails issue #33209</a>.</p>\n\n<p>The tl;dr workaround is to set:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># config/environments/development.rb\nconfig.eager_load = true\n</code></pre>\n"}], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2209, "favorite_count": 4, "answer_count": 1, "score": 11, "last_activity_date": 1572458543, "creation_date": 1504604693, "last_edit_date": 1504605806, "question_id": 46051867, "link": "https://stackoverflow.com/questions/46051867/rails-server-hangs-sometimes-after-two-requests-by-the-frontend", "title": "Rails server hangs (sometimes) after two requests by the frontend", "body": "<p>I'm building a single page application. My frontend (written in React), makes two calls to the backend and the rails server hangs. I mean, the execution doesn't reach the actions involved and nothing happens. Suggestions? I spent so much time on this and I don't know what to think anymore. This is the console's output.</p>\n\n<p>I tried with webrick as well so I don't think the issue is from Puma.</p>\n\n<pre><code>=&gt; Booting Puma\n=&gt; Rails 5.1.3 application starting in development on http://localhost:3002\n=&gt; Run `rails server -h` for more startup options\nPuma starting in single mode...\n* Version 3.10.0 (ruby 2.4.1-p111), codename: Russell's Teapot\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://localhost:3002\nUse Ctrl-C to stop\nStarted GET \"/api/working-groups\" for ::1 at 2017-09-05 11:29:52 +0200\nStarted GET \"/api/invoicing-sessions\" for ::1 at 2017-09-05 11:29:52 +0200\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504607950, "post_id": 46051808, "comment_id": 79065109, "body": "This is not a well-formed question. Please see: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is your code? What do you <i>expect</i> to happen? Based on the above, it looks like you&#39;re just calling <code>User.devise</code> - which is not how the library works, so I don&#39;t know what you&#39;re expecting."}, {"owner": {"reputation": 355, "user_id": 2112204, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/6e131ead37a7d2311b317f1a3c61a167?s=128&d=identicon&r=PG", "display_name": "Ruel Nopal", "link": "https://stackoverflow.com/users/2112204/ruel-nopal"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1504628180, "post_id": 46051808, "comment_id": 79079060, "body": "Edited just added more content for clarifications"}], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 2112204, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/6e131ead37a7d2311b317f1a3c61a167?s=128&d=identicon&r=PG", "display_name": "Ruel Nopal", "link": "https://stackoverflow.com/users/2112204/ruel-nopal"}, "is_accepted": false, "score": 8, "last_activity_date": 1504640090, "creation_date": 1504640090, "answer_id": 46062153, "question_id": 46051808, "link": "https://stackoverflow.com/questions/46051808/undefined-method-devise-for-user-call-user-connection-to-establish-a-connec/46062153#46062153", "title": "undefined method `devise&#39; for User (call &#39;User.connection&#39; to establish a connection):Class", "body": "<p>Ive got it solve on my own so what i did is adding this tag</p>\n\n<pre><code>extend Devise::Models\n</code></pre>\n\n<p>in my <strong>user.rb</strong> files </p>\n\n<p>the user.rb file look like this </p>\n\n<pre><code>class User &lt; ApplicationRecord\n  extend Devise::Models\n\n# more code bellow....\nend\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 2112204, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/6e131ead37a7d2311b317f1a3c61a167?s=128&d=identicon&r=PG", "display_name": "Ruel Nopal", "link": "https://stackoverflow.com/users/2112204/ruel-nopal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1739, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504640090, "creation_date": 1504604503, "last_edit_date": 1504614637, "question_id": 46051808, "link": "https://stackoverflow.com/questions/46051808/undefined-method-devise-for-user-call-user-connection-to-establish-a-connec", "title": "undefined method `devise&#39; for User (call &#39;User.connection&#39; to establish a connection):Class", "body": "<p>I have this problem </p>\n\n<pre><code>undefined method `devise' for User (call 'User.connection' to establish a connection):Class\n</code></pre>\n\n<p>every answer here pointing out to the command below not being run</p>\n\n<pre><code>rails generate devise:install\n</code></pre>\n\n<p>However i actually complete the process of installing the devise gem also i added the omniauth-facebook gem and it works few times. but when i try to commit and load my production site it breaks and thats where the error is then i go back to my testing site it breaks too anyway heres the complete code</p>\n\n<p><strong>gemfile:</strong></p>\n\n<pre><code>gem 'rails', '~&gt; 5.0.2'\ngem 'puma', '~&gt; 3.0'\ngem 'sass', '~&gt; 3.5', '&gt;= 3.5.1'\ngem 'sass-rails', '~&gt; 5.0.4'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.2'\ngem 'autoprefixer-rails', '~&gt; 7.1', '&gt;= 7.1.3'\ngem 'jquery-rails'\ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\ngem 'devise'\ngem 'bootstrap', '~&gt; 4.0.0.beta'\ngem 'font-awesome-rails', '~&gt; 4.7', '&gt;= 4.7.0.1'\ngem 'country_select'\ngem 'carrierwave', '~&gt; 0.11.2'\ngem 'carrierwave-base64'\ngem 'fog-aws'\ngem 'fog'\ngem 'figaro', '~&gt; 1.1', '&gt;= 1.1.1'\ngem 'acts_as_follower', github: 'tcocca/acts_as_follower', branch: 'master'\ngem 'faker', '~&gt; 1.6', '&gt;= 1.6.3'\ngem 'acts_as_votable', '~&gt; 0.10.0'\ngem 'omniauth'\ngem 'omniauth-facebook'\ngem 'sprockets-rails', '~&gt; 3.1', '&gt;= 3.1.1'\n</code></pre>\n\n<p><strong>Routes:</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :items do\n    member do\n      put \"vote\", to: \"items#vote\"\n    end\n  end\n  resources :profiles\n  resources :relationships, only: [:create, :destroy]\n\n\n  devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; \"users/omniauth_callbacks\" }\n  resources :users do\n    member do\n      get :following, :followers\n    end\n  end\n\n  get 'pages/wish'\n\n  devise_scope :user do\n    authenticated :user do\n      root to: 'pages#index', as: :authenticated_root\n    end\n\n    unauthenticated do\n      root 'devise/sessions#new', as: :unauthenticated_root\n    end\n  end\n\n  namespace 'api' do\n    namespace 'v1' do\n      resources :items\n    end\n  end\n\n\nend\n</code></pre>\n\n<p><strong>devise.rb:</strong> this the only code i added to Devise.rb</p>\n\n<pre><code>config.omniauth :facebook, ENV[\"FB_APP_ID\"], ENV[\"FB_APP_SECRET\"]\n</code></pre>\n\n<p><strong>User.rb:</strong></p>\n\n<pre><code>devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable,\n         :omniauthable, omniauth_providers: [:facebook]\n\ndef has_facebook_linked?\n    self.provider.present? &amp;&amp; self.uid.present?\n  end\n\n  def apply_omniauth(auth)\n    update_attributes(\n      provider: auth.provider,\n      uid: auth.uid\n    )\n  end\n\n  def self.from_omniauth(auth)\n    where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n      user.email = auth.info.email\n      user.provider = auth.provider\n      user.uid = auth.uid\n      user.password = Devise.friendly_token[0,20]\n    end\n  end\n</code></pre>\n\n<p><strong>OmniauthCallbacksController:</strong></p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n    def facebook\n        if current_user.present?\n            current_user.apply_omniauth(request.env[\"omniauth.auth\"])\n            redirect_to edit_user_registration_path, notice: \"Facebook Account Linked!\"\n        else\n            @user = User.from_omniauth(request.env[\"omniauth.auth\"])\n            sign_in_and_redirect @user\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "version", "upgrade"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 11, "creation_date": 1504600671, "post_id": 46050483, "comment_id": 79060363, "body": "No you obviously can\u2019t. Even more, expect almost everything will require a manual intervention since many interfaces were changed since <code>2.3.17</code>. I would suggest going step by step (2.3 \u21d2 3.2 \u21d2 4.1 \u21d2 5.1) and fixing problems on each subsequent step."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1504603809, "post_id": 46050483, "comment_id": 79062376, "body": "Rails 2.3 to 5.x and Ruby 1.8 to 2.x? If the project is small, you should consider rebuilding it from scratch."}, {"owner": {"reputation": 393, "user_id": 2653671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a5f7af7f0f845e4effa9c4a5ef8b47f?s=128&d=identicon&r=PG", "display_name": "rodsoars", "link": "https://stackoverflow.com/users/2653671/rodsoars"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504615872, "post_id": 46050483, "comment_id": 79070320, "body": "In addition to what @mudasobwa said, start by covering your current application with tests. Once you have maximum coverage, you can begin changing versions. Version changes and manual interventions usually break things and it is of your interest to know beforehand what needs to be fixed. Tip: use Simplecov gem to check coverage."}], "answers": [{"tags": [], "owner": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "is_accepted": false, "score": 0, "last_activity_date": 1504683783, "creation_date": 1504683783, "answer_id": 46069498, "question_id": 46050483, "link": "https://stackoverflow.com/questions/46050483/what-is-the-easy-way-to-upgrade-rails-application/46069498#46069498", "title": "What is the easy way to upgrade rails application?", "body": "<p>There is no easy way. Before You start upgrade you must add tests to be sure that application will still work after upgrade.\nThen I recommend to change gem description to following syntax:\n<code>gem 'mysql', '~&gt; 2.8.1'</code> it tells bundler to update only last number of version of gem. </p>\n\n<p>Then repeat following step</p>\n\n<ul>\n<li>change rails version to next</li>\n<li>bundle update rails</li>\n<li>corrected conflicted gem version by hands</li>\n<li>bundle update</li>\n</ul>\n"}], "owner": {"reputation": 900, "user_id": 1319283, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d3b8b02f5ba92c1194d07ca598c777fb?s=128&d=identicon&r=PG", "display_name": "Kelvin Tan", "link": "https://stackoverflow.com/users/1319283/kelvin-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1504683783, "creation_date": 1504600489, "question_id": 46050483, "link": "https://stackoverflow.com/questions/46050483/what-is-the-easy-way-to-upgrade-rails-application", "title": "What is the easy way to upgrade rails application?", "body": "<p>I am working on a very old rails project. The gemfile is like this: </p>\n\n<pre><code>source 'http://rubygems.org'\n\ngem 'rails', '2.3.17'\n\ngem 'rake', '0.8.7'\ngem 'rdoc', '3.6.1'\n\ngem 'mysql', '2.8.1'\n\ngem 'roo', '1.9.7'\ngem 'rubyzip', '0.9.4'\ngem 'pdf-writer', '1.1.8'\n\ngem 'prawn', '0.12.0'\n\ngem 'sendmail'\n\ngem 'htmldoc', '0.2.3'\n</code></pre>\n\n<p>The ruby version is 1.8.7</p>\n\n<p>What is the easy way to upgrade this rails app ? Can I just change the version of each gem to the latest one and expect it will work fine? </p>\n"}, {"tags": ["arrays", "ruby", "file-io"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1504633006, "post_id": 46050277, "comment_id": 79081399, "body": "Your code doesn&#39;t even run."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1504641488, "post_id": 46050277, "comment_id": 79085615, "body": "Using global variables like <code>$j</code> and <code>$match</code> is a very bad habit to get into. These are not like PHP where <code>$x</code> is local to the function, these are program wide, at the root level, meaning all instances of <code>$j</code> are identical."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1504683820, "last_edit_date": 1504683820, "creation_date": 1504600556, "answer_id": 46050504, "question_id": 46050277, "link": "https://stackoverflow.com/questions/46050277/ruby-array-issue-line-from-file/46050504#46050504", "title": "Ruby - array issue - line from file", "body": "<p>This is a complete mess. In ruby we would do it in the following way:</p>\n\n<pre><code>match = /TEST/ # no need for global variables\n\nresult = File.readlines('/foo/bar/file.name').select do |line|\n  line =~ match\nend\n\nresult.each_with_index do |line, idx|\n  somefile_log.puts \"DEBUG : Array at #{idx} is #{line}\"\nend\n</code></pre>\n\n<p>Or, even better,</p>\n\n<pre><code>File.readlines.grep(match)\n</code></pre>\n\n<p>as suggested in comments by J\u00f6rg W. Mittag</p>\n"}], "owner": {"reputation": 1, "user_id": 8562380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46475134927e0fdc4f688548a49de94?s=128&d=identicon&r=PG&f=1", "display_name": "user8562380", "link": "https://stackoverflow.com/users/8562380/user8562380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504683820, "creation_date": 1504599891, "last_edit_date": 1504600319, "question_id": 46050277, "link": "https://stackoverflow.com/questions/46050277/ruby-array-issue-line-from-file", "title": "Ruby - array issue - line from file", "body": "<p>I am trying to write a simple ruby script to parse some device config.\nI am reading the config from a txt file line by line and if I come across a match I want to read the lines into an <code>array</code> and paste that <code>array</code> to an output file.</p>\n\n<pre><code>if $match == 1 \n\n my_array.insert($j,/#{line}/)\n\n $j += 1\n\n\nsomefile_log.puts (\"DEBUG : Array at #{$j} is #{my_array[$j]}\")\n</code></pre>\n\n<p>I am messing up the index aspect. \n<code>**J**</code> increments but the <code>array</code> value stays the same as the first line it reads. Thoughts ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": true, "score": 1, "last_activity_date": 1504597356, "creation_date": 1504597356, "answer_id": 46049507, "question_id": 46049457, "link": "https://stackoverflow.com/questions/46049457/rails-accessing-controller-instance-variables-in-rpec-test/46049507#46049507", "title": "Rails: accessing controller instance variables in rpec test", "body": "<p>This should do the trick:</p>\n\n<pre><code>expect(assigns(:things)).to_not be_nil\n</code></pre>\n\n<p>More likely you'll want something like:</p>\n\n<pre><code>let(:thing) { ... }\n...\nexpect(assigns(:things)).to eq([thing])\n</code></pre>\n"}], "owner": {"reputation": 1373, "user_id": 3662277, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hvN2t.jpg?s=128&g=1", "display_name": "ThriceGood", "link": "https://stackoverflow.com/users/3662277/thricegood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 46049507, "answer_count": 1, "score": 0, "last_activity_date": 1504597356, "creation_date": 1504597169, "question_id": 46049457, "link": "https://stackoverflow.com/questions/46049457/rails-accessing-controller-instance-variables-in-rpec-test", "title": "Rails: accessing controller instance variables in rpec test", "body": "<p>In an Rspec controller test I want to check the values of instance variables in my the controller that I am testing. </p>\n\n<p>For example,</p>\n\n<p>controller:</p>\n\n<pre><code>class ThingsController &lt; ApplicationController\n  def index\n    @things = Thing.all\n  end\nend\n</code></pre>\n\n<p>spec:</p>\n\n<pre><code>RSpec.describe UsersController, type: :controller do\n  describe 'GET #index' do \n    expect(@things).to_not be_nil\n  end\nend\n</code></pre>\n\n<p>How do I access <code>@things</code> in the above example?</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1504624035, "post_id": 46049370, "comment_id": 79076483, "body": "Out of curiosity, why do you set relaxed_locate to false?"}], "answers": [{"comments": [{"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1504648767, "post_id": 46058198, "comment_id": 79088707, "body": "known bug?  any ETA on a fix?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1504649246, "post_id": 46058198, "comment_id": 79088857, "body": "Looks like you need to update to Firefox 56 (beta channel)"}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": true, "score": 1, "last_activity_date": 1504649223, "last_edit_date": 1504649223, "creation_date": 1504623969, "answer_id": 46058198, "question_id": 46049370, "link": "https://stackoverflow.com/questions/46049370/can-not-set-path-to-a-hidden-file-field-with-watir/46058198#46058198", "title": "Can not set path to a hidden file_Field with Watir", "body": "<p>This is a <a href=\"https://github.com/mozilla/geckodriver/issues/858\" rel=\"nofollow noreferrer\">bug in geckodriver</a>. It should work in chrome.\nLooks like it is fixed for Firefox 56.</p>\n"}], "owner": {"reputation": 15, "user_id": 8295269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da225430da34b0e549ae04c2ccb44d1c?s=128&d=identicon&r=PG&f=1", "display_name": "Kirill Penkin", "link": "https://stackoverflow.com/users/8295269/kirill-penkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 46058198, "answer_count": 1, "score": 1, "last_activity_date": 1504649223, "creation_date": 1504596850, "question_id": 46049370, "link": "https://stackoverflow.com/questions/46049370/can-not-set-path-to-a-hidden-file-field-with-watir", "title": "Can not set path to a hidden file_Field with Watir", "body": "<p>I'm using Ruby and Watir to test UI.\nI encounted an issue and didn't figure out how to solve it yet.</p>\n\n<p>I have a file field element that has style: 'display: none' and when i try to set a path to a file it returns me a \"File Not Found message\".\nThe same time it's easy to ensure that file exist.</p>\n\n<p>The code below illustrates this.</p>\n\n<pre><code>0&gt; ff\n=&gt; #&lt;Watir::FileField: located: true; {:id=&gt;\"fileUpload\", :tag_name=&gt;\"input\", :type=&gt;\"file\", :index=&gt;0}&gt;\n\n0&gt; path\n=&gt; \"C:/Users/kpenkin/Documents/watir-tests/specs/test_data.xlsx\"\n\n0&gt; File.exist?(path)\n=&gt; true\n\n0&gt; Watir.relaxed_locate?\n=&gt; false\n\n0&gt; ff.set(path)\n=&gt; File not found: C:\\Users\\kpenkin\\Documents\\watir-tests\\specs\\test_data.xlsx\n\n0&gt; ff.wd.send_keys(File.expand_path(path))\n=&gt; File not found: C:/Users/kpenkin/Documents/watir-tests/specs/test_data.xlsx\n\n0&gt; ff.exist?\n=&gt; true\n\n0&gt; ff.visible?\n=&gt; false\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1504597316, "post_id": 46049334, "comment_id": 79058379, "body": "Try <code>HelperClass.get_json().slice(:group_name)</code>. This will only show group name"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3927526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a7cc767132530ac3cc87fb46671538?s=128&d=identicon&r=PG&f=1", "display_name": "anony..nvm", "link": "https://stackoverflow.com/users/3927526/anony-nvm"}, "edited": false, "score": 0, "creation_date": 1504679779, "post_id": 46061608, "comment_id": 79097049, "body": "yes. the map seems to be helping show only the group_name. it was the remaining data that i wanted to access. I&#39;ll check out the JS part now. Thanks anyway!"}], "tags": [], "owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1504637720, "creation_date": 1504637720, "answer_id": 46061608, "question_id": 46049334, "link": "https://stackoverflow.com/questions/46049334/hide-input-parameters-partially-on-activeadmin/46061608#46061608", "title": "Hide input parameters partially on activeadmin", "body": "<p>First convert to array/hash then use Ruby Array/Hash methods.  Assuming you meant the JSON is an array of groups:</p>\n\n<pre><code>data = JSON.parse HelperClass.get_json()\nf.input :tag, :label =&gt; 'Tags', :as =&gt; :select,\n        :collection =&gt; data.map {|grp| grp['group_name']}\n</code></pre>\n\n<p>I suspect you want a multi-level select, which will require you to write your own JavaScript to populate the second select.  Maybe <a href=\"https://github.com/blocknotes/activeadmin_selectize\" rel=\"nofollow noreferrer\">https://github.com/blocknotes/activeadmin_selectize</a> will help with that.</p>\n"}], "owner": {"reputation": 43, "user_id": 3927526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a7cc767132530ac3cc87fb46671538?s=128&d=identicon&r=PG&f=1", "display_name": "anony..nvm", "link": "https://stackoverflow.com/users/3927526/anony-nvm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504637720, "creation_date": 1504596723, "question_id": 46049334, "link": "https://stackoverflow.com/questions/46049334/hide-input-parameters-partially-on-activeadmin", "title": "Hide input parameters partially on activeadmin", "body": "<p>I have an activeadmin form, in which one of the inputs fields is populated by json data returned by some method as</p>\n\n<pre><code>  f.input :tag, :label =&gt; 'Tags', :as =&gt; :select, :collection =&gt; HelperClass.get_json()\n</code></pre>\n\n<p>The json looks like this:</p>\n\n<pre><code>            {\n                \"group_name\": \"Group1\",\n                \"categories\": [\n                  {\n                    \"category_name\": \"cat_1\",\n                    \"score\": \"120\"\n                  },\n                  {\n                    \"category_name\": \"cat_2\",\n                    \"score\": \"120\"\n                  }\n                ]\n              }\n</code></pre>\n\n<p>While this is shown on the form in the UI, I want only the 'group_name' to appear. However, I would want to use the data in 'categories' later on.</p>\n\n<p>Is there anyway I could do this? For eg, hide the remaining json from the form, or parse the json in some other place using 'group_name', or any other way that I can't think of..</p>\n\n<p><strong>PS: Could you also elaborate while you answer this. I am not a ROR developer, but had to modify the code written by someone else.</strong></p>\n"}, {"tags": ["arrays", "ruby", "elasticsearch", "logstash"], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1504593203, "last_edit_date": 1504593203, "creation_date": 1504592519, "answer_id": 46048212, "question_id": 46048055, "link": "https://stackoverflow.com/questions/46048055/i-want-to-create-a-new-array-using-logstash-input-elasticsearch-results/46048212#46048212", "title": "I want to create a new array using logstash input elasticsearch results", "body": "<p>Try to use Logstash filter with aggregate plugin, something like:</p>\n\n<pre><code>filter {\n  aggregate {\n    task_id =&gt; \"agregate_field2\"\n    code =&gt; \"\n      map['field2'] ||= []\n      map['field2'] &lt;&lt; event.get('field2')\n      event.cancel()\n    \"\n    push_previous_map_as_event =&gt; true\n    timeout =&gt; 3\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 6759208, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a8b6e9046a9691de2d452ac2ac51c29c?s=128&d=identicon&r=PG&f=1", "display_name": "ykoo", "link": "https://stackoverflow.com/users/6759208/ykoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 46048212, "answer_count": 1, "score": 1, "last_activity_date": 1504593203, "creation_date": 1504591810, "last_edit_date": 1504592733, "question_id": 46048055, "link": "https://stackoverflow.com/questions/46048055/i-want-to-create-a-new-array-using-logstash-input-elasticsearch-results", "title": "I want to create a new array using logstash input elasticsearch results", "body": "<p>I want to create a new array using logstash input elasticsearch results.</p>\n\n<p>For example, the result is searched in the following query.</p>\n\n<pre><code>input {\n elasitcsearch{\n  index =&gt; \"test\"\n  query =&gt; \"{'query':{'match':{'field1':'testtt'}},'_source':'field2'}\"\n }\n}\n</code></pre>\n\n<p>The result is shown below.</p>\n\n<pre><code>{\n 'field2':1\n}\n{\n 'field2':2\n}\n{\n 'field2':3\n}\n</code></pre>\n\n<p>Now I want to make the above objects into a new array.</p>\n\n<p>like this...</p>\n\n<p><code>field2 = [1,2,3]</code></p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["ruby", "ruby-2.4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504594817, "post_id": 46047797, "comment_id": 79056900, "body": "<i>&quot;I want to call foo from bar&quot;</i> \u2013 if there was an <code>A.foo</code> in addition to <code>M.foo</code>, which <code>foo</code> would you want to call?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1504594889, "post_id": 46047797, "comment_id": 79056948, "body": "Why don&#39;t you want to use <code>M.foo</code>? That seems to me the logical thing to do. It does seem odd to have both the class method and instance method in the same module., considering that you want to invoke the first and include the second."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1504607853, "post_id": 46047797, "comment_id": 79065063, "body": "There is no relationship whatsoever between an instance of <code>A</code> and <code>M</code>&#39;s singleton class. In particular, <code>M</code>&#39;s singleton class is not in <code>A</code>&#39;s inheritance chain."}], "answers": [{"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1504592581, "creation_date": 1504592581, "answer_id": 46048229, "question_id": 46047797, "link": "https://stackoverflow.com/questions/46047797/how-do-i-access-a-module-from-an-instance-method-in-ruby/46048229#46048229", "title": "How do I access a module from an instance method in Ruby?", "body": "<p>Not really elegant, but</p>\n\n<pre><code>def bar\n  Module.nesting.last.foo\nend\n</code></pre>\n\n<p>should do it. </p>\n\n<p>Note that <code>Module#nesting</code> returns an array because one module might be nested into another module. In the general case, you need to apply the correct array index to pick the module you want to have. </p>\n"}, {"comments": [{"owner": {"reputation": 5613, "user_id": 2339708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dL2a0.jpg?s=128&g=1", "display_name": "Eli Rose", "link": "https://stackoverflow.com/users/2339708/eli-rose"}, "edited": false, "score": 0, "creation_date": 1504664522, "post_id": 46048619, "comment_id": 79092387, "body": "Thanks, I didn&#39;t think of this! Since it seems there is no solution which avoids including <code>foo</code> in <code>A</code>, and I understand why thanks to Jorg&#39;s comment, I&#39;ll accept this answer as the closest to what I want."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 1, "last_activity_date": 1504594228, "creation_date": 1504594228, "answer_id": 46048619, "question_id": 46047797, "link": "https://stackoverflow.com/questions/46047797/how-do-i-access-a-module-from-an-instance-method-in-ruby/46048619#46048619", "title": "How do I access a module from an instance method in Ruby?", "body": "<p>Usually, in a <code>module</code>, it's a good practice to have class-methods and instance-methods separate, like this:</p>\n\n<pre><code>module M\n  def bar\n    puts \"BAR\"\n    self.class.foo\n  end\n\n  module ClassMethods\n    def foo\n      puts \"FOO\"\n    end\n  end\nend\n</code></pre>\n\n<p>Now, in a class, I would ideally want to <code>include</code> this module <code>M</code> in a way that I get <code>A.foo</code> as class method and <code>A.new.bar</code> as instance method. The trick for that is <a href=\"https://ruby-doc.org/core-2.2.0/Module.html#method-i-included\" rel=\"nofollow noreferrer\"><code>Module.included</code></a>. </p>\n\n<pre><code>module M\n  def bar\n    puts \"BAR\"\n    self.class.foo\n  end\n\n  module ClassMethods\n    def foo\n      puts \"FOO\"\n    end\n  end\n\n  # when module is included, extend the class with ClassMethods\n  def self.included(base)\n    base.extend ClassMethods\n  end\nend\n\nclass A\n  include M\nend\n\nA.singleton_methods #=&gt; [:foo]\n\nA.new.foo\n#=&gt; BAR\n#=&gt; FOO\n</code></pre>\n\n<p>With this approach, you can refer the class method with <code>self.class</code> and it will automagically work. </p>\n\n<p>Hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504595580, "post_id": 46048959, "comment_id": 79057352, "body": "Consider using <code>__caller__</code> instead of <code>__method__</code> to make it possible to alias methods and make the code still work."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1504595508, "creation_date": 1504595508, "answer_id": 46048959, "question_id": 46047797, "link": "https://stackoverflow.com/questions/46047797/how-do-i-access-a-module-from-an-instance-method-in-ruby/46048959#46048959", "title": "How do I access a module from an instance method in Ruby?", "body": "<p>I think using <code>M.foo</code> is best, but as an exercise, one could change <code>M#bar</code> as follows.</p>\n\n<pre><code>module M\n  def self.foo\n    puts \"In self.foo\"\n  end\n\n  def bar\n    puts \"In bar\"\n    method(__method__).owner.foo\n  end\nend\n\nclass A\n  include M\nend\n\na = A.new\na.bar\n  # In bar\n  # In self.foo\n</code></pre>\n"}], "owner": {"reputation": 5613, "user_id": 2339708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dL2a0.jpg?s=128&g=1", "display_name": "Eli Rose", "link": "https://stackoverflow.com/users/2339708/eli-rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 46048619, "answer_count": 3, "score": -1, "last_activity_date": 1504595508, "creation_date": 1504590692, "question_id": 46047797, "link": "https://stackoverflow.com/questions/46047797/how-do-i-access-a-module-from-an-instance-method-in-ruby", "title": "How do I access a module from an instance method in Ruby?", "body": "<p>Suppose I have a module:</p>\n\n<pre><code>module M\n  def self.foo\n    ...\n  end\n\n  def bar\n    ...\n  end\nend\n</code></pre>\n\n<p>Module <code>M</code> is included in a class.</p>\n\n<pre><code>class A\n  include M\nend\n</code></pre>\n\n<p>I want to call <code>foo</code> from <code>bar</code>, which will eventually be called on an instance of <code>A</code>. What's the best way to do this inside <code>bar</code>?</p>\n\n<p>Of course I can just say <code>M.foo</code>, but that's duplication of the module's name, which feels unnecessary.</p>\n"}, {"tags": ["ruby", "symfony", "capistrano"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504588182, "post_id": 46047278, "comment_id": 79054203, "body": "Show the full stacktrace of error."}, {"owner": {"reputation": 7286, "user_id": 1942868, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wDB7c.jpg?s=128&g=1", "display_name": "whitebear", "link": "https://stackoverflow.com/users/1942868/whitebear"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504588405, "post_id": 46047278, "comment_id": 79054269, "body": "I added the full stacktrace error"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1504588454, "post_id": 46047278, "comment_id": 79054279, "body": "Is there <code>config&#47;deploy.rb:28</code> line?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504588583, "post_id": 46047278, "comment_id": 79054316, "body": "I think it should be <code>after &#39;deploy:update_code&#39;, :updated_cache do .. end</code>"}, {"owner": {"reputation": 7286, "user_id": 1942868, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wDB7c.jpg?s=128&g=1", "display_name": "whitebear", "link": "https://stackoverflow.com/users/1942868/whitebear"}, "edited": false, "score": 0, "creation_date": 1504588771, "post_id": 46047278, "comment_id": 79054382, "body": "Sorry I have edited the deploy.rb like deleting comment out line and so on, for beeing easily seen. but it cause the confusion of error message line. I pasted all deploy.rb now and paste error message again."}, {"owner": {"reputation": 7286, "user_id": 1942868, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wDB7c.jpg?s=128&g=1", "display_name": "whitebear", "link": "https://stackoverflow.com/users/1942868/whitebear"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504588883, "post_id": 46047278, "comment_id": 79054426, "body": "@kiddorails I tried that but <code>Don&#39;t know how to build task &#39;deploy:update_code&#39; (see --tasks)</code> error"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504588984, "post_id": 46047278, "comment_id": 79054451, "body": "I think in Capistrano 3, it should be <code>deploy:updated</code> instead of <code>deploy:update_code</code>. Check the available capistrano tasks by <code>cap -T</code>"}, {"owner": {"reputation": 7286, "user_id": 1942868, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wDB7c.jpg?s=128&g=1", "display_name": "whitebear", "link": "https://stackoverflow.com/users/1942868/whitebear"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 1, "creation_date": 1504592231, "post_id": 46047278, "comment_id": 79055606, "body": "@kiddorails Thanks, it works, so I updated my  article adding solution."}], "owner": {"reputation": 7286, "user_id": 1942868, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wDB7c.jpg?s=128&g=1", "display_name": "whitebear", "link": "https://stackoverflow.com/users/1942868/whitebear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1202, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1504592154, "creation_date": 1504587555, "last_edit_date": 1504592154, "question_id": 46047278, "link": "https://stackoverflow.com/questions/46047278/wrong-number-of-arguments-error-with-deployment-by-capistrano", "title": "wrong number of arguments error with deployment by capistrano", "body": "<p>deploy.rb</p>\n\n<pre><code># config valid only for current version of Capistrano\nlock \"3.8.2\"\n\nset :application, \"wisdom\"\nset :repo_url, \"ssh://app@extreammmm.jp/home/app/myGit/wisdom.git\"\n\nset :branch, 'master'\nset :deploy_to, \"/var/www/html/wisdom\"\n\nset :linked_files, %w{app/config/parameters.yml}\nset :linked_dirs, %w{app/logs app/spool app/cache vendor web/vendor node_modules web/assets}\n#somehow app/cache doesn't work...\n\n\nset :format, :pretty\nset :log_level, :debug\nset :keep_releases, 3\n\nafter 'deploy:update_code' do\n  capifony_pretty_print \"--&gt; Ensuring cache directory permissions\"\n  run \"setfacl -R -m u:www-data:rwX -m u:`whoami`:rwX #{latest_release}/#{cache_path}\"\n  run \"setfacl -dR -m u:www-data:rwX -m u:`whoami`:rwX #{latest_release}/#{cache_path}\"\n  capifony_puts_ok\nend\n\nafter 'deploy:starting', 'composer:install_executable'\n#after 'deploy:updated', 'npm:install'   # remove it if you don't use npm\n#after 'deploy:updated', 'bower:install' # remove it if you don't use bower\nafter 'deploy:updated', 'symfony:assets:install'\nafter 'deploy:updated', 'symfony:assetic:dump'\n</code></pre>\n\n<p>I want to change the permission of <code>app/cache</code> 777 after deployment.</p>\n\n<p>At first I put <code>app/cache</code> in <code>linked_dirs</code> ,but somehow it doesn't work.</p>\n\n<p>So now I am trying to change permission by acl and made this <code>deploy.rb</code></p>\n\n<p>however this code shows error. </p>\n\n<p><code>ArgumentError: wrong number of arguments (given 1, expected 2+)</code></p>\n\n<p>I guess this error is related to <code>after 'deploy:update_code' do</code>, though I am not sure how to fix it.</p>\n\n<p>please anyone helps me??</p>\n\n<pre><code>cap production deploy --trace\n** Invoke production (first_time)\n** Execute production\n** Invoke load:defaults (first_time)\n** Execute load:defaults\ncap aborted!\nArgumentError: wrong number of arguments (given 1, expected 2+)\n/usr/local/lib/ruby/gems/2.4.0/gems/capistrano-3.8.2/lib/capistrano/dsl/task_enhancements.rb:10:in `after'\nconfig/deploy.rb:19:in `&lt;top (required)&gt;'\n/usr/local/lib/ruby/gems/2.4.0/gems/capistrano-3.8.2/lib/capistrano/setup.rb:27:in `load'\n/usr/local/lib/ruby/gems/2.4.0/gems/capistrano-3.8.2/lib/capistrano/setup.rb:27:in `block (3 levels) in &lt;top (required)&gt;'\n/usr/local/lib/ruby/gems/2.4.0/gems/capistrano-3.8.2/lib/capistrano/configuration/variables.rb:32:in `untrusted!'\n/usr/local/Cellar/ruby/2.4.1_1/lib/ruby/2.4.0/delegate.rb:83:in `method_missing'\n/usr/local/lib/ruby/gems/2.4.0/gems/capistrano-3.8.2/lib/capistrano/setup.rb:26:in `block (2 levels) in &lt;top (required)&gt;'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `block in execute'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `each'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `execute'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'\n/usr/local/Cellar/ruby/2.4.1_1/lib/ruby/2.4.0/monitor.rb:214:in `mon_synchronize'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:180:in `invoke'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:152:in `invoke_task'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block (2 levels) in top_level'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `each'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block in top_level'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:117:in `run_with_threads'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:102:in `top_level'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:80:in `block in run'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:77:in `run'\n/usr/local/lib/ruby/gems/2.4.0/gems/capistrano-3.8.2/lib/capistrano/application.rb:14:in `run'\n/usr/local/lib/ruby/gems/2.4.0/gems/capistrano-3.8.2/bin/cap:3:in `&lt;top (required)&gt;'\n/usr/local/bin/cap:22:in `load'\n/usr/local/bin/cap:22:in `&lt;main&gt;'\nTasks: TOP =&gt; production\n</code></pre>\n\n<p>Thanks to @kiddorails</p>\n\n<p>Finally I added these to deploy.rb, and the problem was solved.</p>\n\n<pre><code>after 'deploy:updated', :updated_cache do \n  on roles(:app) do\n     execute :chmod, \"-R 777 #{fetch(:deploy_to)}/current/#{fetch(:cache_path)}\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "internet-explorer", "web", "automated-tests"], "owner": {"reputation": 1, "user_id": 8561336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf18f47fcae3fb9dca23271d4208c98d?s=128&d=identicon&r=PG&f=1", "display_name": "bruce", "link": "https://stackoverflow.com/users/8561336/bruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2093, "favorite_count": 0, "closed_date": 1581444221, "answer_count": 0, "score": 0, "last_activity_date": 1504590885, "creation_date": 1504586228, "last_edit_date": 1592644375, "question_id": 46047094, "link": "https://stackoverflow.com/questions/46047094/how-to-click-on-open-save-cancel-button-on-ie-11-using-selenium-ruby", "closed_reason": "Duplicate", "title": "How to click on Open/save/cancel button on IE 11 using selenium ruby", "body": "<p>Trying to select and or press the save button in IE 11using <strong>Selenium</strong> and <strong>Ruby</strong></p>\n<p>I have tried this code:</p>\n<p><strong>&quot;<code>driver.action..send_keys(&quot;${KEY_ALT}S&quot;).perform</code>&quot;</strong>\nand\n<strong>&quot;<code>RAutomation</code>&quot;</strong></p>\n<p>without success although i am sure either one might work.\nI am sure that this must have been done before using either of these methods.\nAs a last resort i will use Autoit although i would rather not.\nIf someone could give me a solution using &quot;RAutomation &quot; or  &quot;driver.action. + one or more above operations + .perform&quot; that would be great\nthanks</p>\n<p><a href=\"https://i.stack.imgur.com/YHKdS.jpg\" rel=\"nofollow noreferrer\">IE 11 download file Prompt</a></p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "form-helpers"], "answers": [{"comments": [{"owner": {"reputation": 2673, "user_id": 4172728, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FQpL7.jpg?s=128&g=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/4172728/gokul"}, "reply_to_user": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "edited": false, "score": 0, "creation_date": 1504585869, "post_id": 46046820, "comment_id": 79053597, "body": "You&#39;re Welcome."}], "tags": [], "owner": {"reputation": 2673, "user_id": 4172728, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FQpL7.jpg?s=128&g=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/4172728/gokul"}, "is_accepted": true, "score": 0, "last_activity_date": 1504584009, "creation_date": 1504584009, "answer_id": 46046820, "question_id": 46046740, "link": "https://stackoverflow.com/questions/46046740/ruby-on-rails-helpers-html5/46046820#46046820", "title": "ruby on rails helpers html5", "body": "<p>Change <code>data-length</code> to <code>'data-length'</code>:</p>\n\n<pre><code>&lt;%= f.text_field :position, 'data-length': 30 %&gt; \n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7335270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Qk4cpnNdKiw/AAAAAAAAAAI/AAAAAAAAALY/a9laaA46zZg/photo.jpg?sz=128", "display_name": "Ahmed Said", "link": "https://stackoverflow.com/users/7335270/ahmed-said"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 46046820, "answer_count": 1, "score": 0, "last_activity_date": 1504594442, "creation_date": 1504583411, "last_edit_date": 1504594442, "question_id": 46046740, "link": "https://stackoverflow.com/questions/46046740/ruby-on-rails-helpers-html5", "title": "ruby on rails helpers html5", "body": "<pre><code>&lt;%= form_for(:description, url:{action:'create'}) do |f| %&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"input-field col s6\"&gt;\n        &lt;%= f.text_field :position, data-length:30 %&gt; \n        &lt;label for=\"position\"&gt;Position&lt;/label&gt;\n      &lt;/div&gt; \n   &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And I got that error,</p>\n\n<blockquote>\n  <p>syntax error, unexpected keyword_do_block d=( f.text_field :position,\n  do data-length:30 );@output_buf ^ /home/whitehat/Documents/Books/Web\n  development/Ruby On\n  Rails/Projects/free-lance/dressing-shop/app/views/products/new.html.erb:39:\n  syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('\n  ld :position, do data-length:30 );@output_buffer.safe_appen ^</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rvm", "gemfile"], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1504592884, "post_id": 46047009, "comment_id": 79055903, "body": "how do i pass the path (what do you mean by that) to the gem file to <code>gem install</code> ...will it choose the one I made changes to then?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1504595869, "post_id": 46047009, "comment_id": 79057527, "body": "<code>gem install &#47;path&#47;to&#47;your.gem</code>."}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1504723315, "post_id": 46047009, "comment_id": 79126323, "body": "I&#39;m going to try this asap"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1505060340, "post_id": 46047009, "comment_id": 79247403, "body": "It didn&#39;t work I got an error that reads <code>ERROR:  Could not find a valid gem &#39;&#47;Users&#47;name&#47;Ruby&#47;Instagram&#47;insta_scrape-1.1.4&#47;lib&#47;insta_scr&zwnj;&#8203;ape&#47;version.rb&#39; (&gt;= 0) in any repository</code> I&#39;m not sure sure which file of the gem&#39;s bundle I&#39;m pose to write a path to in order to install"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1504585520, "creation_date": 1504585520, "answer_id": 46047009, "question_id": 46046679, "link": "https://stackoverflow.com/questions/46046679/how-to-redirect-gem-file-installation/46047009#46047009", "title": "How to redirect gem file installation", "body": "<p>There are a couple of possibilities:</p>\n\n<p>You could give the gem a different name.</p>\n\n<p>You could give the gem a higher version number than the original one, then it will be preferred \u2026 until the original author releases an higher version.</p>\n\n<p>You could set up your own repository and put it first in the search list (this is generally a good idea if you want to make private gems). Again, this only works if your version number is at least as high as the official one.</p>\n\n<p>You could simply pass the path to the gem file to <code>gem install</code>. But again, this will only work until the original author releases a version whose number is greater than yours.</p>\n"}, {"tags": [], "owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "is_accepted": false, "score": 0, "last_activity_date": 1504608818, "creation_date": 1504608818, "answer_id": 46053206, "question_id": 46046679, "link": "https://stackoverflow.com/questions/46046679/how-to-redirect-gem-file-installation/46053206#46053206", "title": "How to redirect gem file installation", "body": "<p>Here is my setup:\nWhenever I work on my edited version of the gem or want to load that to the app I do <code>RAILS_ENV=development bundle install</code>, when I want the live version I do bundle install.  </p>\n\n<p>You need to have the version different, even a patch version 1.0.0 to 1.0.1 will work so bundle will update the .lock file with the correct paths.</p>\n\n<pre><code>version = '0.1.0'\nif ENV['RAILS_ENV'] == 'development'\n  gem 'lorem', version, path: \"/home/#{ENV['USER']}/work/lorem\"\nelse\n  gem 'lorem', version, git: 'git@bitbucket.org:ipsum/lorem.git'\nend\n</code></pre>\n\n<p>To simplify this and only get your local version you can do something like this:</p>\n\n<pre><code>  gem 'lorem', 0.1.1, path: \"/Users/#{ENV['USER']}/Instagram/gem_folder/\"\n</code></pre>\n\n<p>then you change the version of the gem to be different from the live one, and run <code>bundle install</code>.</p>\n"}], "owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1504608818, "creation_date": 1504582969, "question_id": 46046679, "link": "https://stackoverflow.com/questions/46046679/how-to-redirect-gem-file-installation", "title": "How to redirect gem file installation", "body": "<p>The edited gem file is located in the same folder as the application I'm working on. The path is <code>/Users/name/Ruby/Instagram</code>. I need to install it, but I can't just use <code>gem 'gem_name' install</code> because it will install the general version from GitHub. How can I make it install the gem I just made changes to? </p>\n\n<p>Also, I'm using RVM and can't get into the .rvm file to just drag and drop.</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1504590732, "post_id": 46047130, "comment_id": 79055015, "body": "To determine <code>w_count</code> you don&#39;t need to select the tuples that contain <code>&quot;W&quot;</code>, and then determine the size of the resulting array. Simply use <code>values.count { |x| x[1] == &quot;W&quot; }</code>."}], "tags": [], "owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "is_accepted": false, "score": 0, "last_activity_date": 1504586507, "creation_date": 1504586507, "answer_id": 46047130, "question_id": 46046677, "link": "https://stackoverflow.com/questions/46046677/ruby-turning-a-csv-into-a-hash-that-contains-a-ratio-as-the-value/46047130#46047130", "title": "Ruby - Turning a CSV into a Hash that contains a ratio as the value", "body": "<pre><code>fullset = CSV.read('file.csv')\ngroupedhash = fullset.group_by { |x| x[0] }\nresult = groupedhash.each_with_object({}) do |(key, values), hash|\n  w_count = values.select { |x| x[1] == \"W\" }.length\n  hash[key] = (w_count / values.length.to_f).round(2)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8492657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87ca0bdec654fccf0567bd5896bc66f?s=128&d=identicon&r=PG&f=1", "display_name": "Sartake", "link": "https://stackoverflow.com/users/8492657/sartake"}, "edited": false, "score": 0, "creation_date": 1504621803, "post_id": 46047250, "comment_id": 79074809, "body": "Thank you Cary, explaining this in detail is very helpful."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1504591781, "last_edit_date": 1504591781, "creation_date": 1504587337, "answer_id": 46047250, "question_id": 46046677, "link": "https://stackoverflow.com/questions/46046677/ruby-turning-a-csv-into-a-hash-that-contains-a-ratio-as-the-value/46047250#46047250", "title": "Ruby - Turning a CSV into a Hash that contains a ratio as the value", "body": "<p>I understand you have read the data into an array,</p>\n\n<pre><code>arr = [[\"Apple\", \"W\"], [\"Apple\", \"W\"], [\"Apple\", \"L\"], [\"Banana\", \"W\"]]\n</code></pre>\n\n<p>and then grouped its elements by fruit,</p>\n\n<pre><code>h = arr.group_by(&amp;:first)\n  # =&gt; {\"Apple\"=&gt;[[\"Apple\", \"W\"], [\"Apple\", \"W\"], [\"Apple\", \"L\"]],\n  #     \"Banana\"=&gt;[[\"Banana\", \"W\"]]}\n</code></pre>\n\n<p>You can obtain the desired result by simply recomputing the values of this hash.</p>\n\n<pre><code>h.keys.each { |k| h[k] = 100.0 * h[k].count { |_,t| t ==\"W\" } / h[k].size }\n  #=&gt; [\"Apple\", \"Banana\"]\nh #=&gt; {\"Apple\"=&gt;66.66666666666667, \"Banana\"=&gt;100.0}\n</code></pre>\n\n<p>An alternative is to use a <em>counting hash</em>. See the doc for <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a>, particularly in regard to the use of a default value, which here is the array <code>[0, 0]</code>.</p>\n\n<pre><code>arr.each_with_object(Hash.new([0,0])) { |(fruit, type), h|\n      h[fruit] = [h[fruit].first + (type == \"W\" ? 1 : 0), h[fruit].last + 1] }.\n    tap { |g| g.keys.each { |k| g[k] = (100.0 * g[k].first/g[k].last).round(2) } }\n  #=&gt; {\"Apple\"=&gt;66.67, \"Banana\"=&gt;100.0}\n</code></pre>\n\n<p>The intermediate result is as follows.</p>\n\n<pre><code>arr.each_with_object(Hash.new([0,0])) { |(fruit, type), h|\n      h[fruit] = [h[fruit].first + (type == \"W\" ? 1 : 0), h[fruit].last + 1] }\n  #=&gt; {\"Apple\"=&gt;[2, 3], \"Banana\"=&gt;[1, 1]}\n</code></pre>\n\n<p>If <code>Hash.new([0,0]</code> is still perplexing, we could write the above line as follows.</p>\n\n<pre><code>arr.each_with_object({}) do |(fruit, type), h|\n  h[fruit] = [0, 0] unless h.key?(fruit)\n  h[fruit] = [h[fruit].first + (type == \"W\" ? 1 : 0), h[fruit].last + 1]\nend  \n</code></pre>\n\n<p>Notice that I've used <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-tap\" rel=\"nofollow noreferrer\">Object#tap</a> to avoid the need to create the variable <code>h</code> when using <code>group_by</code>, and then returning the value of that variable by adding the line <code>h</code> at the end. Furthermore, I've rounded the results to two decimals. Both of these techniques could of course be used with the method that employs <code>group_by</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8492657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87ca0bdec654fccf0567bd5896bc66f?s=128&d=identicon&r=PG&f=1", "display_name": "Sartake", "link": "https://stackoverflow.com/users/8492657/sartake"}, "edited": false, "score": 0, "creation_date": 1504621730, "post_id": 46049297, "comment_id": 79074752, "body": "Thank you - I think the transform_values method was what I was trying to find but couldn&#39;t."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1504629429, "post_id": 46049297, "comment_id": 79079688, "body": "Excellent answer! Sartake, note that <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a> made its debut quite recently, in Ruby v2.4."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1504597162, "last_edit_date": 1504597162, "creation_date": 1504596636, "answer_id": 46049297, "question_id": 46046677, "link": "https://stackoverflow.com/questions/46046677/ruby-turning-a-csv-into-a-hash-that-contains-a-ratio-as-the-value/46049297#46049297", "title": "Ruby - Turning a CSV into a Hash that contains a ratio as the value", "body": "<p>Here's another counting hash variant:</p>\n\n<pre><code>arr = [[\"Apple\", \"W\"], [\"Apple\", \"W\"], [\"Apple\", \"L\"], [\"Banana\", \"W\"]]\n\nh = Hash.new { |hash, key| hash[key] = { 'W' =&gt; 0, 'L' =&gt; 0 } }\n\narr.each { |a, b| h[a][b] += 1 }\n\nh #=&gt; {\"Apple\"=&gt;{\"W\"=&gt;2, \"L\"=&gt;1}, \"Banana\"=&gt;{\"W\"=&gt;1, \"L\"=&gt;0}}\n</code></pre>\n\n<p>We can now get the (exact) ratio by:</p>\n\n<pre><code>h.transform_values { |v| v['W'].quo(v['L'] + v['W']) }\n#=&gt; {\"Apple\"=&gt;(2/3), \"Banana\"=&gt;(1/1)}\n</code></pre>\n\n<p>or (rounded) percentages via:</p>\n\n<pre><code>h.transform_values { |v| v['W'].fdiv(v['L'] + v['W']) * 100 }\n#=&gt; {\"Apple\"=&gt;66.66666666666666, \"Banana\"=&gt;100.0}\n</code></pre>\n\n<p>or maybe a string representation:</p>\n\n<pre><code>h.transform_values { |v| sprintf('%d%%', v['W'].quo(v['L'] + v['W']) * 100) }\n#=&gt; {\"Apple\"=&gt;\"66%\", \"Banana\"=&gt;\"100%\"}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8492657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87ca0bdec654fccf0567bd5896bc66f?s=128&d=identicon&r=PG&f=1", "display_name": "Sartake", "link": "https://stackoverflow.com/users/8492657/sartake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1504597162, "creation_date": 1504582930, "last_edit_date": 1504583817, "question_id": 46046677, "link": "https://stackoverflow.com/questions/46046677/ruby-turning-a-csv-into-a-hash-that-contains-a-ratio-as-the-value", "title": "Ruby - Turning a CSV into a Hash that contains a ratio as the value", "body": "<p>I have a <strong>CSV</strong> file that contains 4 columns, though only two relevant ones.</p>\n\n<p>Column A contains a large group of sometimes repeating strings e.g. (Apple, Banana, Apple, Apple, Cherry) and column B contains one of two strings (\"W\" or \"L\"). </p>\n\n<p>I'm trying to turn this data into a Hash with a key for each unique string in column A, with the value being the % of the total rows per that key that were \"W\".</p>\n\n<p>e.g. if the CSV were the following:</p>\n\n<pre><code> ColA   ColB\n\"Apple\" \"W\"\n\"Apple\" \"W\"\n\"Apple\" \"L\"\n\"Banana\" \"W\"\n</code></pre>\n\n<p>the hash would be:</p>\n\n<pre><code>{\"Apple\" =&gt; 66%, \"Banana\" =&gt; 100%}.\n</code></pre>\n\n<p>I've managed to create a hash that groups my rows together by doing the following: </p>\n\n<pre><code>fullset = CSV.read('file.csv')\ngroupedhash = fullset.group_by {|x| x[1]}\n</code></pre>\n\n<p>and I've managed to find the individual counts for the second column like so: </p>\n\n<pre><code>groupedhash.map{|k,v| [k, v.select.count {|x| x[2] == \"W\"}]}\ngroupedhash.map{|k,v| [k, v.select.count {|x| x[2] == \"L\"}]}\n</code></pre>\n\n<p>But I've been unable to figure out how to put it all together and get the actual \"W\" ratio. </p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["ruby", "sinatra", "pony"], "comments": [{"owner": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 0, "creation_date": 1505400942, "post_id": 46045666, "comment_id": 79407566, "body": "Have a look at sendgrid or mailgun for mail sending. That should solve any issue you may have. They have free tiers for low volumes."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8560881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45311e07d11e4704066da50b6cc2486f?s=128&d=identicon&r=PG&f=1", "display_name": "dibsonme", "link": "https://stackoverflow.com/users/8560881/dibsonme"}, "edited": false, "score": 0, "creation_date": 1504652597, "post_id": 46046539, "comment_id": 79089776, "body": "Thanks Sunny, all that is already configured and working properly. However it seems when I log out of my gmail or simply turn off the browser, Pony doesn&#39;t fire off properly. Any reason why that could be?"}], "tags": [], "owner": {"reputation": 157, "user_id": 1843919, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/993a0.png?s=128&g=1", "display_name": "Rebel Rider", "link": "https://stackoverflow.com/users/1843919/rebel-rider"}, "is_accepted": false, "score": 0, "last_activity_date": 1504581681, "creation_date": 1504581681, "answer_id": 46046539, "question_id": 46045666, "link": "https://stackoverflow.com/questions/46045666/does-gmail-have-to-be-logged-in-to-send-messages-via-sinatra-pony/46046539#46046539", "title": "Does gmail have to be logged in to send messages via Sinatra/Pony?", "body": "<p>If you run into errors like Net::SMTPAuthenticationError while using gmail for sending out emails (common for Google Apps accounts), visit your <a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"nofollow noreferrer\">gmail settings</a> and enable less secure apps to get the application working.</p>\n"}], "owner": {"reputation": 1, "user_id": 8560881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45311e07d11e4704066da50b6cc2486f?s=128&d=identicon&r=PG&f=1", "display_name": "dibsonme", "link": "https://stackoverflow.com/users/8560881/dibsonme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505410197, "creation_date": 1504573665, "last_edit_date": 1505410197, "question_id": 46045666, "link": "https://stackoverflow.com/questions/46045666/does-gmail-have-to-be-logged-in-to-send-messages-via-sinatra-pony", "title": "Does gmail have to be logged in to send messages via Sinatra/Pony?", "body": "<p>I'm currently using Pony with my Sinatra app and it's set up to send an email via gmail whenever a user registers. It works perfectly fine, however when a friend of mine tried to register he encountered an Internal Server Error.</p>\n\n<p>He was successfully added into the database, but he didn't receive any emails. I used to receive this Internal Server Error whenever Pony didn't fire correctly on my end, so I'm wondering if my gmail (the one linked in Pony to send the emails) needs to be logged in on my end 24/7 for my app to work as intended?</p>\n\n<p>Thanks in advance.</p>\n\n<p>Edit: Seems like adding an app password solved the issue.</p>\n"}, {"tags": ["ruby", "rubygems", "bundle", "gemfile", "administrate"], "answers": [{"comments": [{"owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "edited": false, "score": 0, "creation_date": 1530530334, "post_id": 46045864, "comment_id": 89254005, "body": "You should always indicate the Rails version in your gemfile."}], "tags": [], "owner": {"reputation": 13, "user_id": 2421564, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc7a8fcd5e3f536e4ab8548d63e89294?s=128&d=identicon&r=PG", "display_name": "Sean Raia", "link": "https://stackoverflow.com/users/2421564/sean-raia"}, "is_accepted": false, "score": 0, "last_activity_date": 1504575455, "creation_date": 1504575455, "answer_id": 46045864, "question_id": 46045647, "link": "https://stackoverflow.com/questions/46045647/issue-installing-administrate-gem-bundler-conflict/46045864#46045864", "title": "Issue installing Administrate gem, bundler conflict", "body": "<p>Solved it.\nConstraining rails to version 4.2 and adding gem i18n to the Gemfile allowed the bundler to complete</p>\n"}], "owner": {"reputation": 13, "user_id": 2421564, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc7a8fcd5e3f536e4ab8548d63e89294?s=128&d=identicon&r=PG", "display_name": "Sean Raia", "link": "https://stackoverflow.com/users/2421564/sean-raia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504575455, "creation_date": 1504573401, "question_id": 46045647, "link": "https://stackoverflow.com/questions/46045647/issue-installing-administrate-gem-bundler-conflict", "title": "Issue installing Administrate gem, bundler conflict", "body": "<p>I have tried numerous things to get Administrate to bundle but I keep running into issues, usually surrounding the activesupport gem.\nIt appears to be seeking two conflicting versions, or else I'm reading it completely wrong.  </p>\n\n<p>The errors after 'bundle install':</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"activesupport\":\nIn Gemfile:\nactionpack was resolved to 4.0.13, which depends on\n  activesupport (= 4.0.13)\n\nactionpack was resolved to 4.0.13, which depends on\n  activesupport (= 4.0.13)\n\nactionpack was resolved to 4.0.13, which depends on\n  activesupport (= 4.0.13)\n\nadministrate was resolved to 0.0.2, which depends on\n  rails (~&gt; 4.2) was resolved to 4.2.0, which depends on\n    activesupport (= 4.2.0)\n\nadministrate was resolved to 0.0.2, which depends on\n  rails (~&gt; 4.2) was resolved to 4.2.0, which depends on\n    activesupport (= 4.2.0)\n</code></pre>\n\n<p>My gemfile</p>\n\n<pre><code># if RUBY_VERSION =~ /1.9/\n#   Encoding.default_external = Encoding::UTF_8\n#   Encoding.default_internal = Encoding::UTF_8\n# end\n\nsource 'http://rubygems.org'\ngem 'administrate'\ngem 'activesupport'\ngem 'actionpack'\ngem 'activemodel'\ngem 'cocoon','1.2.5'\ngem 'ffi','1.9.6'\ngem 'railties'\ngem 'rails'\ngem 'sass'\ngem 'rubyzip', '0.9.9'\ngem 'roo','1.12.1'\n#gem 'mysql2', '0.3.11'\ngem 'mysql2', '0.3.17'\ngem 'jquery-rails', '2.2.1'\ngem 'haml', '3.1.7'\ngem \"fog\", '1.38.0'\n# gem \"fog-google\", '0.4.1'\n# gem 'google-api-client', '~&gt; 0.8.6'\n# gem 'puma'\ngem 'thin', '1.7.0'\ngem 'rake', '11.2.2'\ngem 'tzinfo','0.3.51'\n\ngroup :development do\n  gem 'capistrano', '3.4.1'\n  gem 'capistrano-rails', '1.3.0'\n  gem 'capistrano-rvm', '0.1.2'\nend\ngem 'protected_attributes','1.1.3'\ngem 'activerecord-session_store','1.0.0'\ngem 'devise'\ngem 'devise-async', '0.9.0'\ngem 'cancan', '1.6.8'\ngem 'simple_form', '3.0.4'\ngem 'oauth', '0.5.1'\ngem 'inherited_resources', '1.3.1'\ngem 'will_paginate', '3.0.3'\ngem 'bootstrap-will_paginate', '0.0.9'\ngem 'mechanize', '2.5.1'\ngem 'delayed_job', '4.0.6'\ngem 'paperclip', '3.4.0'\ngem 'spreadsheet', '0.6.4.1'\ngem 'geocoder', '1.1.6'\ngem 'whenever', '0.8.2', :require =&gt; false\ngem 'american_date', '1.0.0'\ngem 'money','5.1.1'\ngem 'rets','0.10.1.20160503205231', path: '/var/rets'\ngem 'httpclient','2.7.0'\ngem 'haversine','0.3.0'\ngem 'capybara','2.4.4'\ngem 'poltergeist','1.6.0'\ngem 'selenium-webdriver','2.35.1'\ngem 'redis','3.2.0'\ngem 'remote_lock','1.1.0'\ngem 'bower-rails', '0.11.0'\ngem 'sass-rails', '4.0.0'\ngem 'jekyll', '3.3.0'\ngem 'net-ssh'\ngem 'angular_rails_csrf', '2.0.0'\ngem 'newrelic_rpm', '3.18.1.330'\n\ngroup :assets do\n  gem 'stylus', '1.0.1'\n  gem 'coffee-rails', '4.0.0'\n  gem 'uglifier', '1.3.0'\nend\n\ngroup :development do\n  # gem 'pry', '0.9.12.4'\n  # gem 'pry-rails',  '0.3.4'\n  # gem 'pry-remote', '0.1.8'\n  # gem 'pry-stack_explorer', '0.4.9.1'\n  gem 'pry-byebug','2.0.0'\n  # gem 'pry-debugger', '0.2.3'\n  # gem 'query_reviewer', :git =&gt; 'git://github.com/nesquena/query_reviewer.git'\n  # gem 'bullet'\nend\n\ngroup :development, :test do\n  gem 'rspec-rails', '~&gt; 3.5'\nend\n\ngem 'elasticsearch-model', '0.1.9'\ngem 'elasticsearch-rails', '0.1.9'\n\ngem 'rest-client', '1.8.0'\ngem 'doorkeeper', '3.1.0'\ngem 'rack-cors', '0.4.0', :require =&gt; 'rack/cors'\ngem 'dotenv-rails', '2.2.1', groups: [:development, :test]\n</code></pre>\n\n<p>I have tried 'bundle update'. I'm working in the Ubuntu environment, using the latest version of ruby (2.4.0)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "has-many-through", "belongs-to"], "comments": [{"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1506697351, "post_id": 46045484, "comment_id": 79937731, "body": "<code>User has_many :trades_received</code>. So it should be <code>current_user.trades_receiveds</code>. Probably better to change it to <code>received_trades</code>. And what is your <code>#requested</code> method like? Which exact line gives you the error?"}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "reply_to_user": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1506714100, "post_id": 46045484, "comment_id": 79946307, "body": "<code>requested</code> is a scope, and it&#39;s just <code>scope :requested, -&gt; { where(approved: nil) }</code>. My error comes from a helper that I&#39;m using in my header, and goes down to the User model&#39;s <code>:trades_received</code> association. @unkmas suggested that it&#39;s caused by the fact that my setup had no direct link between Trade and Item."}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 1, "creation_date": 1506944080, "post_id": 46045484, "comment_id": 80003087, "body": "@sabaeus can you paste database schema file"}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 1, "creation_date": 1506944590, "post_id": 46045484, "comment_id": 80003345, "body": "@sabaeus  add this  t.belongs_to :trade    in  migration."}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "reply_to_user": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507757096, "post_id": 46045484, "comment_id": 80343271, "body": "@krishnar add it to the Trades migration?"}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1504632566, "post_id": 46047316, "comment_id": 79081175, "body": "what do you mean by &quot;select associations manually, or rethink your data model?&quot; Are <code>:wanted_trades</code> and <code>:trades_received</code> not separate associations? also, why do you have <code>:wanted_trades</code> twice in the Item model? wouldn&#39;t that just reference the same item twice?"}, {"owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "reply_to_user": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 1, "creation_date": 1504674847, "post_id": 46047316, "comment_id": 79094871, "body": "@sabaeus sorry, I accidentally discarded edits. Updated my answer. Item cannot just <code>have many trades</code> because, there is no direct link from trade to item (<code>item_id</code> or whatever). So you have to separate associations. If you want to select all trades for item you have to either selct them manually (<code>Trade.where(&quot;wanted_item_id =? or collateral_item_id =?&quot;, self.id</code>) or change your db schema."}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1504772394, "post_id": 46047316, "comment_id": 79144291, "body": "Ohhhh, and so <code>inverse_of</code> creates that link? Wow, that finally makes sense. Thank you! I&#39;m confused about the other thing, though. Are you saying that manual selection is unadvisable, or likely to be a pain? I only ask because my initial post had multiple associations for Trade, but your answer said &quot;if you need all trades as a single association&quot;"}, {"owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "reply_to_user": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 1, "creation_date": 1504774104, "post_id": 46047316, "comment_id": 79145402, "body": "It&#39;s almost always is a pain. When in the feature you will need to add some additional logic - filters, new data to view, whatever - it will be a pain to do so."}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1504775967, "post_id": 46047316, "comment_id": 79146619, "body": "I&#39;m confused by the idea that there could be a way of doing this that would not at some point require manual selection. Is there anything I could read that would help me understand?"}, {"owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "reply_to_user": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 1, "creation_date": 1504847052, "post_id": 46047316, "comment_id": 79180449, "body": "@sabaeus sorry, but i cannot help you there :("}], "tags": [], "owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "is_accepted": false, "score": 1, "last_activity_date": 1504674637, "last_edit_date": 1504674637, "creation_date": 1504587774, "answer_id": 46047316, "question_id": 46045484, "link": "https://stackoverflow.com/questions/46045484/why-does-column-trades-item-id-not-exist/46047316#46047316", "title": "why does column trades.item_id not exist?", "body": "<p>Ok, well. The problem is here:</p>\n\n<pre><code>has_many :trades, dependent: :destroy\n</code></pre>\n\n<p>And in your <code>Trade</code> model:</p>\n\n<pre><code>belongs_to :wanted_item, ...\nbelongs_to :collateral_item, ..\n</code></pre>\n\n<p>Rails cannot handle this automatically.</p>\n\n<p>You need to do one of this steps (depending on what you need in your app):</p>\n\n<p>If you need separate associations:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :trades_received, class_name: \"Trade\", through: :owned_items, source: :wantable_trades\nend\n\nclass Item &lt; ActiveRecord::Base\n  has_many :wanted_trades, class_name: 'Trade', inverse_of: :wanted_item, dependent: :destroy\n  has_many :collateral_trades, class_name: 'Trade', inverse_of: :collateral_item, dependent: :destroy\nend\n</code></pre>\n\n<p>If you need all trades as single association:</p>\n\n<p>Well, you will have a pain in the ass :) In this case you should either select associations manually, or rethink your data model.</p>\n"}, {"comments": [{"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1507066759, "post_id": 46497516, "comment_id": 80062042, "body": "Thank you, this makes sense. Question though: I thought foreign_keys were only supposed to be on the <code>belongs_to</code> side of a relationship?"}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "reply_to_user": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 1, "creation_date": 1507067657, "post_id": 46497516, "comment_id": 80062376, "body": "Both <code>has_many</code> and <code>belongs_to</code> has the <code>foreign_key</code> option. It&#39;s used when the foreign key does not follow the ActiveRecord convention (i.e. association name + &quot;_id&quot;), which is the case for the <code>has_many</code> relationships here."}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1507075531, "post_id": 46497516, "comment_id": 80064403, "body": "But why would i put it on one side over another?"}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "reply_to_user": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 1, "creation_date": 1507077085, "post_id": 46497516, "comment_id": 80064715, "body": "You need to use it when Rails can&#39;t infer the correct foreign key. Say if you can have something like <code>belongs_to :user, foreign_key: &quot;trade_requester&quot;</code> i n <code>Trade</code> instead of what we have there. There&#39;s no one way to do it."}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1507756353, "post_id": 46497516, "comment_id": 80342986, "body": "I think there&#39;s a problem with this. The <code>collateral_item</code> and <code>wanted_item</code> associations on User each go through <code>trades</code> but <code>trades</code> isn&#39;t an association in <code>User</code>. Furthermore, <code>trades</code> would need to reference two foreign keys - <code>trade_requester</code> and <code>trade_recipient</code>."}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "reply_to_user": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 1, "creation_date": 1507876341, "post_id": 46497516, "comment_id": 80393842, "body": "Not sure what you mean. Trade has two belongs_to with User with the correct foreign keys. What is the problem?"}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1507877258, "post_id": 46497516, "comment_id": 80394248, "body": "<code>through: :trades</code> doesn&#39;t work unless you explicitly declare <code>has_many :trades</code> on a model. If that hasn&#39;t been declared, you get an error that says the trades association doesn&#39;t exist. I did manage to make it work by doing this - <code>through: :received_trades</code> and <code>through: :requested_trades</code>"}], "tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": true, "score": 1, "last_activity_date": 1507878423, "last_edit_date": 1507878423, "creation_date": 1506722821, "answer_id": 46497516, "question_id": 46045484, "link": "https://stackoverflow.com/questions/46045484/why-does-column-trades-item-id-not-exist/46497516#46497516", "title": "why does column trades.item_id not exist?", "body": "<p>You're setting up two <code>has_many :through</code> relationship between <code>User</code> and <code>Item</code>, with <code>Trade</code> as the join table for both. You got some relationship confused. Here is a setup based on your migration:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n has_many :received_trades, class_name: \"Trade\", foreign_key: \"trade_recipient\"\n has_many :requested_trades, class_name: \"Trade\", foreign_key: \"trade_requester\"\n has_many :collateral_items, through: :received_trades\n has_many :wanted_items, through: :requested_trades\nend\n\nclass Item &lt; ActiveRecord::Base\n has_many :collateral_items, class_name: \"Trade\", foreign_key: \"collateral_item\"\n has_many :wanted_items, class_name: \"Trade\", foreign_key: \"wanted_item\"\n has_many :trade_requesters, through: :wanted_items\n has_many :trade_recipients, through: :collateral_items\nend\n\nclass Trade &lt; ActiveRecord::Base\n belongs_to :trade_requester, class_name: \"User\"\n belongs_to :trade_recipient, class_name: \"User\"\n belongs_to :wanted_item, class_name: \"Item\"\n belongs_to :collateral_item, class_name: \"Item\"\nend\n\n##migration\ncreate_table :trades do |t|\n t.belongs_to :trade_requester\n t.belongs_to :trade_recipient\n t.belongs_to :wanted_item\n t.belongs_to :collateral_item\nend\n</code></pre>\n\n<p>Some explanation: </p>\n\n<pre><code>Item has_many :collateral_item  ## item_id in table collateral_items\nItem has_many :collateral_item, class_name: \"Trade\", foreign_key: \"collateral_item\"\n##collateral_item_id in trades table.\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 46497516, "answer_count": 2, "score": 3, "last_activity_date": 1507878423, "creation_date": 1504571853, "last_edit_date": 1504573825, "question_id": 46045484, "link": "https://stackoverflow.com/questions/46045484/why-does-column-trades-item-id-not-exist", "title": "why does column trades.item_id not exist?", "body": "<p>I have a relationship model in which two Users can enter into a Trade for the exchange of two Items. </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n has_many :owned_items, class_name: \"Item\"\n has_many :trades_received, class_name: \"Trade\", through: :owned_items, source: :trades\n has_many :trades\n has_many :wanted_items, class_name: \"Item\", through: :trades, source: :item\nend\n\nclass Item &lt; ActiveRecord::Base\n belongs_to :owner, class_name: \"User\", foreign_key: :user_id\n has_many :trades, dependent: :destroy\n has_many :trade_requesters, through: :trades\n has_many :trade_recipients, through: :trades\nend\n\nclass Trade &lt; ActiveRecord::Base\n belongs_to :trade_requester, class_name: \"User\"\n belongs_to :trade_recipient, class_name: \"User\"\n belongs_to :wanted_item, class_name: \"Item\", foreign_key: :wanted_item_id\n belongs_to :collateral_item, class_name: \"Item\", foreign_key: :collateral_item_id\nend\n</code></pre>\n\n<p>The migration on my Trades table looks like this:</p>\n\n<pre><code>create_table :trades do |t|\n t.belongs_to :trade_requester\n t.belongs_to :trade_recipient\n t.belongs_to :wanted_item\n t.belongs_to :collateral_item\nend\n</code></pre>\n\n<p>The stack trace leads to a helper method I'm using to list all Trade requests. That line says <code>@trades = current_user.trades_received.requested.count</code>, and then on down to the model association on User where <code>has_many :owned_items, class_name: \"Item\"</code>. From my understanding, it looks like the <code>trades_received</code> method, which is called <code>through: :owned_items</code> and <code>source: :trades</code> should be referencing the <code>:wanted_item_id</code> foreign key in the migration. But it is not. It works if I create a migration to add <code>item_id</code>, but a Trade needs two items, and so I've split it up into the two <code>wanted_item</code> and <code>collateral_item</code> associations. How do I set that User association up so that it references the Item that is being requested by another User? Should Items <code>has_many :trades</code>, the way I have it, or should Items <code>belongs_to :trades</code>?</p>\n\n<p>Full error:</p>\n\n<pre><code>PG::UndefinedColumn: ERROR:  column trades.item_id does not exist\nLINE 1: ...LECT COUNT(*) FROM \"trades\" INNER JOIN \"items\" ON \"trades\".\"...\n                                                         ^\n: SELECT COUNT(*) FROM \"trades\" INNER JOIN \"items\" ON \"trades\".\"item_id\" = \"items\".\"id\" WHERE \"items\".\"user_id\" = $1 AND \"trades\".\"approved\" IS NULL\n</code></pre>\n\n<p>tldr: I need to track a bunch of complex <code>has_many :through</code> associations, I don't think my data model is correct, and need help understanding why. Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1504633925, "post_id": 46053570, "comment_id": 79081800, "body": "While I did not review the implementation. I agree that this is a perfect example of the need for a service object as it is neither a concern of the model nor the controller."}, {"owner": {"reputation": 930, "user_id": 4736604, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-RU6SxgHXnz4/AAAAAAAAAAI/AAAAAAAABRU/Vz1rrCw9VMQ/photo.jpg?sz=128", "display_name": "Martin Valentino", "link": "https://stackoverflow.com/users/4736604/martin-valentino"}, "edited": false, "score": 0, "creation_date": 1504680584, "post_id": 46053570, "comment_id": 79097513, "body": "Awesome answer. I got the idea, I&#39;ll try to implement this."}], "tags": [], "owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "is_accepted": true, "score": 2, "last_activity_date": 1504610006, "creation_date": 1504610006, "answer_id": 46053570, "question_id": 46045322, "link": "https://stackoverflow.com/questions/46045322/refactor-large-controller-method-into-model/46053570#46053570", "title": "Refactor large controller method into model", "body": "<p>For the example you mentioned, I would use <a href=\"https://refactoring.com/catalog/extractClass.html\" rel=\"nofollow noreferrer\">Extract Class from Method</a> refactoring and use a <a href=\"http://brewhouse.io/blog/2014/04/30/gourmet-service-objects.html\" rel=\"nofollow noreferrer\">Service Object</a> instead of moving everything in a model.</p>\n\n<p>Here is an overview of how to do it, of course I leave the implementation for you:</p>\n\n<pre><code>class Test\n  def total\n    order = @cart.get_or_create_order\n    order_contents = order_contents_for(order)\n\n    discounts = {\n      events: {},\n      subjects: {},\n      products: {}\n    }\n\n    service = CalculateTotal.new(order, order_contents, discounts)\n\n    if service.success?\n      # Success logic\n    else\n      flash[:error] = service.error\n      # Failure logic\n    end\n  end\nend\n\nclass CalculateTotal\n  attr_reader :success, :error\n\n  def initialize(order, order_contents, discounts)\n    @order = order\n    @order_contents = order_contents\n    @discounts = discounts\n  end\n\n  def call\n    sum_orders + adjusted_prices + shipping\n  end\n\n  def success?\n    !@error\n  end\n\n  private\n\n  def sum_orders\n    # Logic\n\n    if something_fails\n      @error = 'There was an error calculating the price'\n    end\n\n    # Logic\n  end\n\n  def adjusted_prices\n    # Logic\n  end\n\n  def shipping\n    # Logic\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 930, "user_id": 4736604, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-RU6SxgHXnz4/AAAAAAAAAAI/AAAAAAAABRU/Vz1rrCw9VMQ/photo.jpg?sz=128", "display_name": "Martin Valentino", "link": "https://stackoverflow.com/users/4736604/martin-valentino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 46053570, "answer_count": 1, "score": 0, "last_activity_date": 1504610006, "creation_date": 1504570215, "last_edit_date": 1504570818, "question_id": 46045322, "link": "https://stackoverflow.com/questions/46045322/refactor-large-controller-method-into-model", "title": "Refactor large controller method into model", "body": "<p>I have a rails app ported from php codebase.\nI have a long controller method that basically calculate a total price based on the items in my cart. This is a legacy method that is directly ported from the php code.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def total\n    order = @cart.get_or_create_order\n    order_contents = order_contents_for(order)\n\n    discounts = {\n      events: {},\n      subjects: {},\n      products: {}\n    }\n\n    adjusted_pricing = {}\n    free = false\n    shipping = 0\n    total = 0\n\n    # Logic for computing shipping price\n\n    # Construct discount hash\n\n    order_contents.each do |item|\n       if (item.variant_price.present?)\n         price = item.variant_price\n       end\n       else\n         price = item.price\n       end\n\n       price_adjustments = {}\n       popped_from = []\n\n       # it's the issue due to legacy database structure,\n       # product_id, subject_id and event_id is each column in\n       # the database\n       if (discounts[:products][item.product_id])\n          price_adjustments = discounts[:products][item.product_id]\n          discounts[:products].delete(item.product_id)\n          popped_from = [:products, item.product_id]\n       elsif (discounts[:subjects][item.subject_id])\n          price_adjustments = discounts[:subjects][item.subject_id]\n          discounts[:subjects].delete(item.subject_id)\n          popped_from = [:subjects, item.subject_id]\n       elsif (discounts[:events][item.event_id])\n          price_adjustments = discounts[:events][item.event_id]\n          discounts[:events].delete(item.event_id)\n          popped_from = [:events, item.event_id]\n       end\n\n       if (adjustment = price_adjustments['$'])\n          adjusted_price = price + adjustment\n       elsif (adjustment = price_adjustments['%'])\n          adjusted_price = price + price * (adjustment / 100.0)\n          discounts[popped_from[0]][popped_from[1]] = price_adjustments\n       else\n          adjusted_price = price\n       end\n\n       adjusted_pricing[item.product_id] = {price: adjusted_price, discount: price - adjusted_price}\n\n       total += adjusted_price\n    end\n\n    total += shipping\nend\n</code></pre>\n\n<p>Above code is a huge pieces of code for a method, so I'm trying to refactor it and move it to a model <code>price_calculator</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def calculate_total_for(order)\n  order_contents = order.current_order_contents\n  product_adjustments = order.product_adjustments\n\n  shipping = calculate_shipping_price(order_contents, product_adjustments)\n\n  discounts = construct_discount_hash(product_adjustments)\n\n  adjusted_pricing = construct_adjusted_price_hash(discounts, order_contents)\n\n  total_price = adjusted_pricing.inject(0) { |total, (k, v)| total + v[:price] }\n\n  {\n    total_price: total_price + shipping,\n    shipping: shipping,\n    adjusted_pricing: adjusted_pricing\n  }\nend\n</code></pre>\n\n<p>What I did basically, still in the process of move the previous huge method into its own class and split the logic into a separate private method in that class such as <code>calculate_shipping_price</code>, <code>construct_discount_hash</code>.</p>\n\n<p>I know it's far from a good code. Break it into private method ooks good in term of readability, but I start to feel it's getting hard to make a test for it. Hopefully, someone here can give an advice or a guideline, what's the best way to refactor above code in ruby.</p>\n\n<p>PS: I'm new to ruby/rails, I previously code mostly in C#/Javascript, so there are some idiom or ruby-way to doing things that I'm not familiar with.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1504575444, "post_id": 46045209, "comment_id": 79051580, "body": "Seems like it should be a numeric column to begin with."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1504620700, "post_id": 46053785, "comment_id": 79074006, "body": "For <code>property=2</code>, it will find record with value <code>123</code>"}, {"owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1504620982, "post_id": 46053785, "comment_id": 79074231, "body": "Yes, you are correct, I edited my answer. The requirements are quite vague, so I don&#39;t know if it&#39;s only 02, or 002 or XX2."}], "tags": [], "owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "is_accepted": false, "score": 0, "last_activity_date": 1504620898, "last_edit_date": 1504620898, "creation_date": 1504610666, "answer_id": 46053785, "question_id": 46045209, "link": "https://stackoverflow.com/questions/46045209/how-can-i-get-query-of-mysql-table-with-string-column-value-where-it-is-01-to/46053785#46053785", "title": "How can I get query of MYSQL table with string column value, where it is &quot;01&quot; to a certain 1?", "body": "<p>You can use <a href=\"https://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#operator_like\" rel=\"nofollow noreferrer\">MySQL's LIKE operator</a>.</p>\n\n<pre><code>property = params[:property].to_i\nMytable.where(\"property LIKE ?\", \"%#{property}\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 4436480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D84Dp.jpg?s=128&g=1", "display_name": "Ketan Doshi", "link": "https://stackoverflow.com/users/4436480/ketan-doshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1504620319, "creation_date": 1504620319, "answer_id": 46057004, "question_id": 46045209, "link": "https://stackoverflow.com/questions/46045209/how-can-i-get-query-of-mysql-table-with-string-column-value-where-it-is-01-to/46057004#46057004", "title": "How can I get query of MYSQL table with string column value, where it is &quot;01&quot; to a certain 1?", "body": "<p>First of all don't forget to index the property column in your table.</p>\n\n<p>Also you are not much clear in the question. The column will have the data in form of \"002\" / \"02\" / \"2\" OR it can be \"123\"/\"213\" format as well?</p>\n\n<p>If its just \"002\" / \"02\" / \"2\" format, then you can do it as below:</p>\n\n<pre><code>Mytable.where(\"property LIKE ?\", \"%#{params[:property].to_i}\")\n</code></pre>\n\n<p>Or if you assume all the formats including \"123\"/\"213\", then:</p>\n\n<pre><code>Mytable.where(\"property LIKE ?\", \"%#{params[:property].to_i}%\")\n</code></pre>\n\n<p>Also you may want to check the <code>params[:property]</code> parameter value to be present, numericality etc.</p>\n"}], "owner": {"reputation": 29, "user_id": 4947144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53518746a25361055fc9a699f96a9dbd?s=128&d=identicon&r=PG&f=1", "display_name": "bree amiri", "link": "https://stackoverflow.com/users/4947144/bree-amiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1545118098, "creation_date": 1504569003, "last_edit_date": 1545118098, "question_id": 46045209, "link": "https://stackoverflow.com/questions/46045209/how-can-i-get-query-of-mysql-table-with-string-column-value-where-it-is-01-to", "title": "How can I get query of MYSQL table with string column value, where it is &quot;01&quot; to a certain 1?", "body": "<p>This doesn't look working</p>\n\n<pre><code>Mytable.where(\"property::int = ? \",\n               params[:property].to_i)\n</code></pre>\n\n<p>I need a query to find <code>002</code> or <code>02</code> for 2 for example</p>\n"}, {"tags": ["ruby", "xpath", "nokogiri", "dry"], "answers": [{"tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 1, "last_activity_date": 1507314481, "creation_date": 1507314481, "answer_id": 46611856, "question_id": 46044952, "link": "https://stackoverflow.com/questions/46044952/ruby-nokogiri-match-dynamic-attribute-names/46611856#46611856", "title": "Ruby Nokogiri. Match dynamic attribute names", "body": "<p>try this:</p>\n\n<pre><code>attributes = %w[src data-src data-react-src]\nelem = doc.at_css(\"img[itemprop='image']\")\nattr = attributes.find { |attr| elem[attr] }\ndoc[attr] if attr\n</code></pre>\n\n<p><strong>What it does:</strong>    </p>\n\n<ol>\n<li>Holds the list of static and dynamic attributes. Add more in future. Order of list is important [ref  #3]</li>\n<li><code>elem</code> holds the element(<code>Nokogiri::XML::Element</code>). We don't want to fetch it multiple times to optimize.</li>\n<li><code>attr</code> holds the first <em>attribute</em> which element <em>responds to</em>. If <code>src</code> is found, it won't try to find in <code>data-src</code> and so on. This way we optimized the iterations. </li>\n<li>return the value at that <code>attr</code>ibute, if attribute is available. </li>\n</ol>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 178, "user_id": 4658926, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/771302485/picture?type=large", "display_name": "Francisco Campa&#241;a", "link": "https://stackoverflow.com/users/4658926/francisco-campa%c3%b1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "accepted_answer_id": 46611856, "answer_count": 1, "score": 0, "last_activity_date": 1545118138, "creation_date": 1504566419, "last_edit_date": 1545118138, "question_id": 46044952, "link": "https://stackoverflow.com/questions/46044952/ruby-nokogiri-match-dynamic-attribute-names", "title": "Ruby Nokogiri. Match dynamic attribute names", "body": "<p>I'm trying to extract image url using Nokogiri.\nThe code below works, but I'd like to do in in a more efficient and scalable  way, not doing elsif infinitely.</p>\n\n<pre><code>if doc.at_css(\"img[itemprop='image']\")['src']\n    img = doc.at_css(\"img[itemprop='image']\")['src']\nelsif doc.at_css(\"img[itemprop='image']\")['data-src']\n    img = doc.at_css(\"img[itemprop='image']\")['data-src']\nelsif doc.at_css(\"img[itemprop='image']\")['data-react-src']\n    img = doc.at_css(\"img[itemprop='image']\")['data-react-src']\n...\n</code></pre>\n\n<p>I'd like to learn both approach:</p>\n\n<p>1) Plain Ruby way: Like iterating attributes names like <code>['src', 'data-src', 'data-react-src', etc...]</code></p>\n\n<p>2) Nokogiri regex or xpath, approach:</p>\n\n<pre><code>'src' || 'data-src' || 'data-react-src\n</code></pre>\n\n<p>like this:</p>\n\n<p>doc.at_css(\"img[itemprop='image']\")['src' || 'data-src' || 'data-react-src]</p>\n\n<p>Even better, store attribute names in a variable:</p>\n\n<pre><code>my_attributes = ['src' || 'data-src' || 'data-react-src]\n\ndoc.at_css(\"img[itemprop='image']\").[my_attributes]\n</code></pre>\n\n<p>3) If there is a more efficient approach than previous ones</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 8423250, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/EBMqt.jpg?s=128&g=1", "display_name": "Ben Edwards", "link": "https://stackoverflow.com/users/8423250/ben-edwards"}, "edited": false, "score": 0, "creation_date": 1504605148, "post_id": 46047754, "comment_id": 79063292, "body": "Thanks, works but I am getting a &#39;Corrupted Content Error&#39; if the user is not in superadmin_role.  I guess its the &#39;redirect_to &quot;403.html&quot;&#39;.  I changed &#39;403.html&#39; to &#39;/&#39; and it now sends user back to the home page.   I Also had to change &#39;:authenticate_admin!&#39; to &#39;:authenticate_admin&#39; to get it working."}], "tags": [], "owner": {"reputation": 487, "user_id": 7276842, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8bQsL.jpg?s=128&g=1", "display_name": "kansiho", "link": "https://stackoverflow.com/users/7276842/kansiho"}, "is_accepted": true, "score": 0, "last_activity_date": 1504590448, "creation_date": 1504590448, "answer_id": 46047754, "question_id": 46044858, "link": "https://stackoverflow.com/questions/46044858/rails-devise-user-management-do-i-have-to-do-it-on-all-views-individually/46047754#46047754", "title": "rails devise user management, do I have to do it on all views individually", "body": "<p>If contents you don't want to display is entire page, you can do this by adding\n<code>before_action :authenticate_admin!</code>\nat controller.</p>\n\n<pre><code>#some_controller.rb\nbefore_action :authenticate_admin!\n\ndef action\n  ...\nend\n\nprivate\ndef authenticate_admin\n  unless current_user.superadmin_role?\n    redirect_to \"403.html\"\n  end\nend\n</code></pre>\n\n<p>Or, if you want to do it non-controller level,</p>\n\n<pre><code>#view\n&lt;div class=\"hide &lt;%= 'admin' if @is_admin %&gt;\"&gt;\n  hogehoge\n&lt;/div&gt;\n\n#controller\nbefore_action set_is_admin\ndef set_is_admin\n  @is_admin = current_user.superadmin_role? ? true : false\nend\n</code></pre>\n\n<p>then add </p>\n\n<pre><code># application.css\n&lt;style&gt;\n.hide{\n  display: none;\n}\n.admin{\n  display: block;\n}\n&lt;/style&gt;\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 8423250, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/EBMqt.jpg?s=128&g=1", "display_name": "Ben Edwards", "link": "https://stackoverflow.com/users/8423250/ben-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 46047754, "answer_count": 1, "score": 0, "last_activity_date": 1556877038, "creation_date": 1504565480, "last_edit_date": 1556877038, "question_id": 46044858, "link": "https://stackoverflow.com/questions/46044858/rails-devise-user-management-do-i-have-to-do-it-on-all-views-individually", "title": "rails devise user management, do I have to do it on all views individually", "body": "<p>I have setup devise and as advised in <a href=\"http://codepany.com/blog/rails-5-user-accounts-with-3-types-of-roles-devise-rails_admin-cancancan/\" rel=\"nofollow noreferrer\">http://codepany.com/blog/rails-5-user-accounts-with-3-types-of-roles-devise-rails_admin-cancancan/</a> I have added a superuser and superviser role.  Now I want to only allow superusers to access a lot of the views (which do CRUD on configuration data).</p>\n\n<p>I know I can do it by wrapping a if around the content.</p>\n\n<pre><code> &lt;% if current_user.superadmin_role? %&gt;\n    ...all the content...\n &lt;% else %&gt;\n    This page is not available to you\n &lt;% end %&gt;\n</code></pre>\n\n<p>From what I gather I need to do this for all views I want to restrict. But was wondering if there was a more elegant way to do it. I.e. can I do something like put all the checks in one place and only allow certain pages through or even disallow all pages and have some code I can put on the public ones.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shoulda"], "answers": [{"tags": [], "owner": {"reputation": 2276, "user_id": 260771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e852b18079792bc5f4ec52b8e37c53?s=128&d=identicon&r=PG", "display_name": "Elliot Winkler", "link": "https://stackoverflow.com/users/260771/elliot-winkler"}, "is_accepted": true, "score": 1, "last_activity_date": 1504564158, "creation_date": 1504564158, "answer_id": 46044708, "question_id": 46044287, "link": "https://stackoverflow.com/questions/46044287/shoulda-matches-error-when-using-model-setters-before-validarion/46044708#46044708", "title": "shoulda-matches error when using model setters before validarion", "body": "<p>Using the <code>validate_presence_of</code> matcher is roughly equivalent to writing this test by hand:</p>\n\n<pre><code>describe Order do\n  it \"fails validation when total is nil\" do\n    order = Order.new\n    order.total = nil\n    order.validate\n    expect(order.errors[:total]).to include(\"can't be blank\")\n    order.total = 42\n    expect(order.errors[:total]).not_to include(\"can't be blank\")\n  end\nend\n</code></pre>\n\n<p>If you were to run this test, you would find that this would fail. Why? Because in your model, you set <code>total</code> to a non-nil value when validations are performed. That's why you're getting this error.</p>\n\n<p>So you don't really need the validation or the matcher, since neither one would fail.</p>\n"}], "owner": {"reputation": 2192, "user_id": 5942579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/o6P12.jpg?s=128&g=1", "display_name": "Emmanuel Mtali", "link": "https://stackoverflow.com/users/5942579/emmanuel-mtali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 46044708, "answer_count": 1, "score": 0, "last_activity_date": 1504564158, "creation_date": 1504560863, "question_id": 46044287, "link": "https://stackoverflow.com/questions/46044287/shoulda-matches-error-when-using-model-setters-before-validarion", "title": "shoulda-matches error when using model setters before validarion", "body": "<p>I have the Order model with the line for calculating total total price of products the user is ordering</p>\n\n<pre><code>before_validation :set_total!\nvalidates :total, presence: true, numericality: { greater_than_or_equal_to: 0 }\n</code></pre>\n\n<p>set_total looks like this</p>\n\n<pre><code>def set_total!\n  self.total = products.map(&amp;price).sum\nend\n</code></pre>\n\n<p>On my specs I am trying to check if the total validations are implemented <strong>TDD</strong></p>\n\n<pre><code>it { should validate_presence_of(:total) }\nit { should validate_numericality_of(:total).is_greater_than_or_equal_to(0) }\n</code></pre>\n\n<p>Unfortunately I am receiving the following error   </p>\n\n<blockquote>\n  <p>Failure/Error: it { should validate_presence_of(:total) }</p>\n\n<pre><code>   Order did not properly validate that :total cannot be empty/falsy.\n     After setting :total to \u2039nil\u203a -- which was read back as\n     \u2039#&lt;BigDecimal:5634b8b81008,'0.0',9(27)&gt;\u203a -- the matcher expected the\n     Order to be invalid, but it was valid instead.\n\n     As indicated in the message above, :total seems to be changing certain\n     values as they are set, and this could have something to do with why\n     this test is failing. If you've overridden the writer method for this\n     attribute, then you may need to change it to make this test pass, or\n     do something else entirely.\n</code></pre>\n</blockquote>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass", "themes", "bootstrap-4"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1504565623, "post_id": 46043845, "comment_id": 79049677, "body": "have you checked the javascript inspector to see if any of the css files 404 and also done control shift r to refresh the page cache?"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1504605452, "post_id": 46043845, "comment_id": 79063505, "body": "No js errors or 404s. However it looks like it does not hit my custom sasses. I am playing around with the order of things in application.scss. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1504605762, "post_id": 46046197, "comment_id": 79063755, "body": "Great! I had this feeling too, because as when I was playing around with the order of things in application.scss,  then only my _bootswatch.scss &amp; _variables.scss got used (after reporting this problem here). This was confirmed by rails server&#39;s usual error saying &quot;undefined variable $brand-success !important&quot; Hence it looks like this could be BS version incompatibility. Thank you!!"}, {"owner": {"reputation": 487, "user_id": 7276842, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8bQsL.jpg?s=128&g=1", "display_name": "kansiho", "link": "https://stackoverflow.com/users/7276842/kansiho"}, "reply_to_user": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1504607606, "post_id": 46046197, "comment_id": 79064890, "body": "It&#39;s my pleasure. :)"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1504621422, "post_id": 46046197, "comment_id": 79074536, "body": "Now, I will try and use the 2 files _bootswatch.scss &amp; _variables.scss from <a href=\"https://github.com/thomaspark/bootswatch/tree/v4.0.0-alpha.6/flatly\" rel=\"nofollow noreferrer\">Git Repo for Flatly BS4 Alpha6</a>"}], "tags": [], "owner": {"reputation": 487, "user_id": 7276842, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8bQsL.jpg?s=128&g=1", "display_name": "kansiho", "link": "https://stackoverflow.com/users/7276842/kansiho"}, "is_accepted": false, "score": 0, "last_activity_date": 1504578735, "creation_date": 1504578735, "answer_id": 46046197, "question_id": 46043845, "link": "https://stackoverflow.com/questions/46043845/incorporating-bootstrap4-theme-in-a-ruby-rails-website/46046197#46046197", "title": "Incorporating Bootstrap4 Theme in a Ruby Rails website", "body": "<p>Those themes are built for the Bootstrap 3.X, though you are using <code>bootstrap', '~&gt; 4.0.0.beta'</code>.</p>\n\n<p>FYI <a href=\"https://github.com/thomaspark/bootswatch/issues/499\" rel=\"nofollow noreferrer\">https://github.com/thomaspark/bootswatch/issues/499</a></p>\n"}], "owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 673, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523951419, "creation_date": 1504558058, "question_id": 46043845, "link": "https://stackoverflow.com/questions/46043845/incorporating-bootstrap4-theme-in-a-ruby-rails-website", "title": "Incorporating Bootstrap4 Theme in a Ruby Rails website", "body": "<p>I am fairly new to Rails and Bootstrap. I am struggling to incorporate Bootstrap4 Theme in a Ruby Rails website. <strong>All white space with some text is displayed when I try.</strong>\nI have installed the BS4 bootstrap-rubygem. Infact the application website &amp; all the basic BS Styling works fine with default stuff in place. However I have little luck in incorporation <a href=\"https://bootswatch.com/flatly/\" rel=\"nofollow noreferrer\">this Bootswatch Flatly Theme</a> as I quite like this styling. <a href=\"https://bootswatch.com/\" rel=\"nofollow noreferrer\">On this page for Flatly Bootswatch</a> it gives you 6 files to download i.e bootstrap.min.css, bootstrap.css, variables.less, bootswatch.less, _variables.sass, _bootswatch.sass. I assume I only need the sass files which begins with underscore in filename. So I have put these 2 files in assets/stylesheets folder. There are no js files to download on website so am I ok to assume that I don't need js files for assets/javascripts folder? So I have no js files pasted anywhere.\nHere is my setup:\nGemfile:</p>\n\n<pre><code>source 'https://rubygems.org'(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.1.3'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.7'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '~&gt; 2.13'\n  gem 'selenium-webdriver'\n  # Use sqlite3 as the database for Active Record\n  gem 'sqlite3'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\n#Added by me\ngroup :production do\n  gem 'pg', '~&gt; 0.21.0'\nend\n\n# Added by MS\ngem 'bootstrap', '~&gt; 4.0.0.beta'\ngem 'jquery-rails', '~&gt; 4.3', '&gt;= 4.3.1'\ngem 'sprockets-rails', '~&gt; 3.2', '&gt;= 3.2.1'\n</code></pre>\n\n<p>application.html.erb</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;OmegaBlog&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;div class=\"container-fluid\"&gt;\n      &lt;%= render 'layouts/navigation' %&gt;\n      &lt;%= render 'layouts/messages' %&gt;\n      &lt;%= yield %&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>application.scss (should this be called application.css.scss? and the order of @import items correct?? - I have doubt on this)</p>\n\n<pre><code>@import \"bootstrap\";\n@import \"variables\";\n@import \"bootswatch\";\n</code></pre>\n\n<p>application.js (again not confident on order of listed items here!)</p>\n\n<pre><code>//= require rails-ujs\n//= require jquery3\n//= require popper\n//= require bootstrap-sprockets\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>So the problem is that the Navbar is all white which only some text visible:</p>\n\n<pre><code>&lt;div class=\"bs-docs-section clearfix\"&gt;\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"col-lg-12\"&gt;\n            &lt;div class=\"page-header\"&gt;\n              &lt;h1 id=\"navbar\"&gt;Navbar&lt;/h1&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"bs-component\"&gt;\n              &lt;nav class=\"navbar navbar-default\"&gt;\n                &lt;div class=\"container-fluid\"&gt;\n                  &lt;div class=\"navbar-header\"&gt;\n                    &lt;button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\"&gt;\n                      &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n                      &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                      &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                      &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                    &lt;/button&gt;\n                    &lt;a class=\"navbar-brand\" href=\"#\"&gt;Brand&lt;/a&gt;\n                  &lt;/div&gt;\n\n                  &lt;div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\"&gt;\n                    &lt;ul class=\"nav navbar-nav\"&gt;\n                      &lt;li class=\"active\"&gt;&lt;a href=\"#\"&gt;Link &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n                      &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt;\n                      &lt;li class=\"dropdown\"&gt;\n                        &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-expanded=\"false\"&gt;Dropdown &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt;\n                        &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt;\n                          &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt;\n                          &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt;\n                          &lt;li&gt;&lt;a href=\"#\"&gt;Something else here&lt;/a&gt;&lt;/li&gt;\n                          &lt;li class=\"divider\"&gt;&lt;/li&gt;\n                          &lt;li&gt;&lt;a href=\"#\"&gt;Separated link&lt;/a&gt;&lt;/li&gt;\n                          &lt;li class=\"divider\"&gt;&lt;/li&gt;\n                          &lt;li&gt;&lt;a href=\"#\"&gt;One more separated link&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                      &lt;/li&gt;\n                    &lt;/ul&gt;\n                    &lt;form class=\"navbar-form navbar-left\" role=\"search\"&gt;\n                      &lt;div class=\"form-group\"&gt;\n                        &lt;input type=\"text\" class=\"form-control\" placeholder=\"Search\"&gt;\n                      &lt;/div&gt;\n                      &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Submit&lt;/button&gt;\n                    &lt;/form&gt;\n                    &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n                      &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt;\n                    &lt;/ul&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\n              &lt;/nav&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p>I have searched for basic instructions for detailed BS4 with Rails 5.1 but no luck!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "comments": [{"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1504555376, "post_id": 46043323, "comment_id": 79047014, "body": "What is the connection between <code>Item</code> and <code>Account</code> how are they connected ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "reply_to_user": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1504555608, "post_id": 46043323, "comment_id": 79047077, "body": "<code>account.rb : belongs_to :user</code> and <code>item.rb : belongs_to :user</code> and <code>user.rb has_one :account, :autosave =&gt; true, has_many :items</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "edited": false, "score": 0, "creation_date": 1504601065, "post_id": 46044457, "comment_id": 79060619, "body": "I&quot;m kind of new to elasticsearch and rails, so could you please give me a pointer on how to implement this?"}], "tags": [], "owner": {"reputation": 24753, "user_id": 489765, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bdc5163fd78b041c9d4a405204c5ad9a?s=128&d=identicon&r=PG", "display_name": "aromero", "link": "https://stackoverflow.com/users/489765/aromero"}, "is_accepted": false, "score": 0, "last_activity_date": 1504562184, "creation_date": 1504562184, "answer_id": 46044457, "question_id": 46043323, "link": "https://stackoverflow.com/questions/46043323/rails-elasticsearch-with-multiple-models/46044457#46044457", "title": "Rails elasticsearch with multiple models", "body": "<p>You should index the lat/lng on each item using the referenced account, don't index another document for the account. Though ES can express some relations, remember it isn't a relational DB. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 862, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1504562184, "creation_date": 1504554811, "last_edit_date": 1504559308, "question_id": 46043323, "link": "https://stackoverflow.com/questions/46043323/rails-elasticsearch-with-multiple-models", "title": "Rails elasticsearch with multiple models", "body": "<p>Thus far I have implemented a basic search with eleasticsearch. Insert a keyword and find the item according to the title/description. \nNow I'm trying to sort the results according to distance from the users current location, but don't know how.</p>\n\n<p>I have two models, the <code>items.rb</code> contains the item info and the <code>account.rb</code> has the address of the user that uploaded the item.</p>\n\n<p>This is what I have done thus far:</p>\n\n<p>item.rb</p>\n\n<pre><code>require 'elasticsearch/model'\n\nclass Item &lt; ApplicationRecord\n  mount_uploader :image, ImageUploader\n  belongs_to :category\n  belongs_to :user\n\n  include Elasticsearch::Model\n  include Elasticsearch::Model::Callbacks\n\n  settings index: { number_of_shards: 1 } do\n    mappings dynamic: 'false' do\n      indexes :title, analyzer: 'english', index_options: 'offsets'\n      indexes :description, analyzer: 'english'\n    end\n  end\n\n  def self.search(query)\n    __elasticsearch__.search(\n    {\n        query: {\n            multi_match: {\n                query: query,\n                fields: ['title^10', 'description']\n            }\n        },\n        highlight: {\n            pre_tags: ['&lt;em&gt;'],\n            post_tags: ['&lt;/em&gt;'],\n            fields: {\n                title: {},\n                description: {},\n            }\n        }\n    }\n)\n  end\nend\n\n# Delete the previous articles index in Elasticsearch\nItem.__elasticsearch__.client.indices.delete index: Item.index_name rescue nil\n\n# Create the new index with the new mapping\nItem.__elasticsearch__.client.indices.create \\\n  index: Item.index_name,\n  body: { settings: Item.settings.to_hash, mappings:  Item.mappings.to_hash }\n\n# Index all Item records from the DB to Elasticsearch\nItem.import\n</code></pre>\n\n<p>account.rb</p>\n\n<pre><code>require 'elasticsearch/model'\n\nclass Account &lt; ApplicationRecord\n\n  geocoded_by :full_address\n  after_validation :geocode, if: -&gt;(obj){ obj.full_address.present? }\n\n  def full_address\n    [street, city, state, zip_code, country].join(\",\")\n  end\n\n  def location\n    [longitude.to_f, latitude.to_f]\n  end\n\n  ELASTICSEARCH_MAX_RESULTS = 25\n\n  include Elasticsearch::Model\n  include Elasticsearch::Model::Callbacks\n  include Elasticsearch::Model::Indexing\n\n  mapping do\n    indexes :location, type: 'geo_point'\n    indexes :city,     type: 'string'\n    indexes :state,    type: 'string'\n  end\n\n  def as_indexed_json(_options = {})\n    as_json(only: %w(city state))\n    .merge(location: {\n        lat: lat.to_f, lon: lon.to_f\n    })\n  end\n\n  def self.search(query = nil, options = {})\n    options ||= {}\n\n    # empty search not allowed, for now\n    return nil if query.blank? &amp;&amp; options.blank?\n\n    # define search definition\n    search_definition = {\n        query: {\n            bool: {\n                must: []\n            }\n        }\n    }\n\n    unless options.blank?\n      search_definition[:from] = 0\n      search_definition[:size] = ELASTICSEARCH_MAX_RESULTS\n    end\n\n    # query\n    if query.present?\n      search_definition[:query][:bool][:must] &lt;&lt; {\n          multi_match: {\n              query: query,\n              fields: %w(city state),\n              operator: 'and'\n          }\n      }\n    end\n\n    # geo spatial\n    if options[:lat].present? &amp;&amp; options[:lon].present?\n      options[:distance] ||= 100\n\n      search_definition[:query][:bool][:must] &lt;&lt; {\n          filtered: {\n              filter: {\n                  geo_distance: {\n                      distance: \"#{options[:distance]}mi\",\n                      location: {\n                          lat: options[:lat].to_f,\n                          lon: options[:lon].to_f\n                      }\n                  }\n              }\n          }\n       }\n    end\n\n    __elasticsearch__.search(search_definition)\n   end\nend\n\n# Delete the previous articles index in Elasticsearch\nAccount.__elasticsearch__.client.indices.delete index:  Account.index_name rescue nil\n\n# Create the new index with the new mapping\nAccount.__elasticsearch__.client.indices.create \\\nindex: Item.index_name,\n  body: { settings: Account.settings.to_hash, mappings: Account.mappings.to_hash }\n\n# Index all Item records from the DB to Elasticsearch\nAccount.import\n</code></pre>\n\n<p>search_controller.rb</p>\n\n<pre><code>class SearchController &lt; ApplicationController\n\n  def show\n    @items = Item.find(params[:id])\n  end\n\n  def search\n    if params[:q].nil?\n      @items = []\n    else\n      @items = Item.search params[:q]\n    end\n  end\nend\n</code></pre>\n\n<p>search.html.erb</p>\n\n<pre><code>&lt;%= form_for search_path, method: :get do |f| %&gt;\n    &lt;p&gt;\n      &lt;%= f.label \"Search for\" %&gt;\n      &lt;%= text_field_tag :q, params[:q] %&gt;\n      &lt;%= submit_tag \"Nearby\", name: nil %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n\n&lt;ul&gt;\n  &lt;% @items.each do |item| %&gt;\n      &lt;li&gt;\n        &lt;h3&gt;\n          &lt;%= link_to item.try(:highlight).try(:title) ? item.highlight.title[0].html_safe : item.title,\n                  controller: \"search\",\n                  action: \"show\",\n                  id: item._id%&gt;\n        &lt;/h3&gt;\n        &lt;% if item.try(:highlight).try(:description) %&gt;\n            &lt;% item.highlight.description.each do |snippet| %&gt;\n                &lt;p&gt;&lt;%= snippet.html_safe %&gt;...&lt;/p&gt;\n            &lt;% end %&gt;\n        &lt;% end %&gt;\n      &lt;/li&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 2219, "user_id": 871580, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/85c750e8c836a011e39651d4f7deb16c?s=128&d=identicon&r=PG", "display_name": "CBusBus", "link": "https://stackoverflow.com/users/871580/cbusbus"}, "edited": false, "score": 0, "creation_date": 1528536730, "post_id": 47041976, "comment_id": 88552969, "body": "Marked as the correct answer. Windows doesn&#39;t support the necessary version of JSON which is whyt he question was raised, but this answer is nonetheless true."}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 3, "last_activity_date": 1509473405, "creation_date": 1509473405, "answer_id": 47041976, "question_id": 46042900, "link": "https://stackoverflow.com/questions/46042900/ruby-json-gem-install-error-ruby-2-4-1-json-1-8-6-windows-10/47041976#47041976", "title": "Ruby JSON gem install error: Ruby 2.4.1, JSON 1.8.6 (Windows 10)", "body": "<p><a href=\"https://github.com/flori/json/blob/master/CHANGES.md#2015-09-11-200\" rel=\"nofollow noreferrer\">Ruby 2.4 relies on json >= 2.0</a> and you are attempting to install json 1.8.6. They are incompatible. Ensure the two versions are compatible then retry your operation.</p>\n"}], "owner": {"reputation": 2219, "user_id": 871580, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/85c750e8c836a011e39651d4f7deb16c?s=128&d=identicon&r=PG", "display_name": "CBusBus", "link": "https://stackoverflow.com/users/871580/cbusbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2780, "favorite_count": 0, "accepted_answer_id": 47041976, "answer_count": 1, "score": 1, "last_activity_date": 1518683645, "creation_date": 1504552346, "last_edit_date": 1518683645, "question_id": 46042900, "link": "https://stackoverflow.com/questions/46042900/ruby-json-gem-install-error-ruby-2-4-1-json-1-8-6-windows-10", "title": "Ruby JSON gem install error: Ruby 2.4.1, JSON 1.8.6 (Windows 10)", "body": "<p>Running <code>gem install json</code> and receiving the following error</p>\n\n<pre><code>Fetching: json-1.8.6.gem (100%)\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions.  This could take a while...\n      1 [main] make 8392 child_info_fork::abort: C:\\msys32\\usr\\bin\\msys-intl-8.dll: Loaded to different address: parent(0x30000) != child(0x20000)\n      1 [main] make 332 child_info_fork::abort: C:\\msys32\\usr\\bin\\msys-intl-8.dll: Loaded to different address: parent(0x20000) != child(0x30000)\nERROR:  Error installing json:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/json-1.8.6/ext/json/ext/generator\nC:/Ruby24-x64/bin/ruby.exe -r ./siteconf20170904-8096-t8xlbq.rb extconf.rb\ncreating Makefile\n\ncurrent directory: C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/json-1.8.6/ext/json/ext/generator\nmake \"DESTDIR=\" clean\n      1 [main] make 8392 child_info_fork::abort: C:\\msys32\\usr\\bin\\msys-intl-8.dll: Loaded to different address: parent(0x30000) != child(0x20000)\nmake: fork: Resource temporarily unavailable\n\ncurrent directory: C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/json-1.8.6/ext/json/ext/generator\nmake \"DESTDIR=\"\ngenerating generator-x64-mingw32.def\n      1 [main] make 332 child_info_fork::abort: C:\\msys32\\usr\\bin\\msys-intl-8.dll: Loaded to different address: parent(0x20000) != child(0x30000)\nmake: fork: Resource temporarily unavailable\n\nmake failed, exit code 2\n\nGem files will remain installed in C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/json-1.8.6 for inspection.\nResults logged to C:/Ruby24-x64/lib/ruby/gems/2.4.0/extensions/x64-mingw32/2.4.0/json-1.8.6/gem_make.out\n</code></pre>\n\n<p>Using</p>\n\n<ul>\n<li>Ruby 2.4.1</li>\n<li>Windows 10 (x64)</li>\n</ul>\n\n<p>Can't find any posts on Google or here.</p>\n\n<p>Any thoughts would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1504556745, "post_id": 46042647, "comment_id": 79047394, "body": "For first question, maybe make use of concurrency and map in parallel? With threads/concurrent-ruby/parallel-gem?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1504566157, "post_id": 46042647, "comment_id": 79049779, "body": "Did a little benchmark and it seems to_json called on an array is slower than map. So it wouldn&#39;t be changing the big O scale to add a map (both are ostensibly O(N) time). Some possibilities for your arsenal are <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-in_batches\" rel=\"nofollow noreferrer\">in_batches</a>, splitting the iteration over multiple threads (should probably use <a href=\"https://ruby-doc.org/core-2.2.0/Mutex.html\" rel=\"nofollow noreferrer\">mutex</a> if working with DB), or running the whole thing in a background job."}], "owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504550794, "creation_date": 1504550794, "question_id": 46042647, "link": "https://stackoverflow.com/questions/46042647/update-value-in-array-of-hash-and-return-a-json-faster", "title": "update value in array of hash and return a json faster", "body": "<p>I am currently working on a database API which is returning me the result of an ActiveRecord::Base class call. Right now when I required a data from the PostGres DB, I am using the following command:</p>\n\n<pre><code> ApiResponse.select([:id, :ts, :response])\n          .where(userid: 'toto')\n          .limit(limit).to_a\n</code></pre>\n\n<p>This code is working find and I get a array of hash :</p>\n\n<pre><code>[\n    [ 0] #&lt;ApiResponse:0x007fb27e5d0c40&gt; {\n              :id =&gt; \"7cbf6ce2-ec5e-41e0-8185-030f0a70b247\",\n              :ts =&gt; 2017-08-28 20:21:09 UTC,\n              :response =&gt; {}}, ...\n   ...\n\n]\n</code></pre>\n\n<p>ApiResponse is just a class to access to the DB using ActiveRecord and defined as:</p>\n\n<pre><code>class ApiResponse &lt; ActiveRecord::Base\n</code></pre>\n\n<p>Right now, based on the result I have to run the below code to make it JSON and modify the ts field</p>\n\n<pre><code> new_list = list.map do | e |\n        {\n            id: e['id'],\n            ts: e['ts'].strftime(\"%F %T.%6N%z\"),\n            response: e['response']\n        }\n      end\n</code></pre>\n\n<p>This solution is not the best I think because I am running through a map (list is the result of the select command) to modify one field [ts] to match the date/time format and secondly, I am doing a </p>\n\n<pre><code>return new_list.to_json\n</code></pre>\n\n<p>the need of modify the date/time is because the PostGres DB use PostGres Date/Time format but ActiveRecord use ISO8601.</p>\n\n<p>I do have 2 questions:</p>\n\n<ul>\n<li><p>Is there a faster way to parse all the array to apply the 'strftime' on each ts field? other than using map</p></li>\n<li><p>Is there a way to avoid using 'to_json' to_json is amazingly slow. For privacy, the response is null but in my code, it contains a lot of data which slow down the system.</p></li>\n</ul>\n\n<p>Thanks          </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1504552095, "post_id": 46042619, "comment_id": 79045913, "body": "Please edit to make your &quot;array of strings&quot; a valid Ruby object. See the answers for guidance."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1504550810, "creation_date": 1504550810, "answer_id": 46042653, "question_id": 46042619, "link": "https://stackoverflow.com/questions/46042619/find-specific-elements-in-strings-in-an-array/46042653#46042653", "title": "Find specific elements in strings in an array", "body": "<p>Do you want <code>[\"AT0000\", \"EUR\", \"00.0\"]</code>?</p>\n\n<p>It could be with select and with_index:</p>\n\n<pre><code>array = %w[AT0000 EUR 33.09 32.09 00.0]\np array.select.with_index { |_, index| [0,1,4].include?(index) }\n# [\"AT0000\", \"EUR\", \"00.0\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 3, "last_activity_date": 1504596198, "last_edit_date": 1504596198, "creation_date": 1504551671, "answer_id": 46042785, "question_id": 46042619, "link": "https://stackoverflow.com/questions/46042619/find-specific-elements-in-strings-in-an-array/46042785#46042785", "title": "Find specific elements in strings in an array", "body": "<p>You can <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-split\" rel=\"nofollow noreferrer\"><code>split</code></a> and then use <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>values_at</code></a> to get the values at a specific index:</p>\n\n<pre><code>array = [\n  \"[AT0000 EUR 33.09 32.09 00.0]\",\n  \"[AT0001 EUR 32.34 31.00 00.0]\",\n  \"[AT0002 EUR 34.23 34.01 00.0]\",\n]\n\nresults = array.map do |element|\n  element.split.values_at(0, 1, 4)\nend\n\nputs results.inspect\n# =&gt; [[\"[AT0000\", \"EUR\", \"00.0]\"], [\"[AT0001\", \"EUR\", \"00.0]\"], [\"[AT0002\", \"EUR\", \"00.0]\"]]\n</code></pre>\n\n<p>if you don't want the open/end brackets (<code>[]</code>) included you can work with just the text within them as such:</p>\n\n<pre><code>results = array.map do |element|\n  element[/\\[(.*)\\]/, 1].split.values_at(0, 1, 4)\nend\n\nputs results.inspect\n# =&gt; [[\"AT0000\", \"EUR\", \"00.0\"], [\"AT0001\", \"EUR\", \"00.0\"], [\"AT0002\", \"EUR\", \"00.0\"]]\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8559579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e67a546e79fe13a4db5acb0aab5b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/8559579/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1504589922, "accepted_answer_id": 46042785, "answer_count": 2, "score": -2, "last_activity_date": 1504596198, "creation_date": 1504550637, "last_edit_date": 1504582194, "question_id": 46042619, "link": "https://stackoverflow.com/questions/46042619/find-specific-elements-in-strings-in-an-array", "closed_reason": "Needs details or clarity", "title": "Find specific elements in strings in an array", "body": "<p>I have an array of strings, which are separated with blanks:</p>\n\n<pre><code>[\n  \"[AT0000 EUR 33.09 32.09 00.0]\",\n  \"[AT0001 EUR 32.34 31.00 00.0]\",\n  \"[AT0002 EUR 34.23 34.01 00.0]\",\n]\n</code></pre>\n\n<p>I want to get the 1st, 2nd and 5th positions of each line. How is this accomplished?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron", "delayed-job"], "answers": [{"comments": [{"owner": {"reputation": 110, "user_id": 7358723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-tQJP8KkAkcU/AAAAAAAAAAI/AAAAAAAAAF4/7bj082DABK0/photo.jpg?sz=128", "display_name": "Lucas Barreto", "link": "https://stackoverflow.com/users/7358723/lucas-barreto"}, "edited": false, "score": 0, "creation_date": 1504552353, "post_id": 46042776, "comment_id": 79046001, "body": "i didn&#39;t understand the &quot;replace your method to rake task&quot;.  I need to put it into a file named updatetable.rake ?"}, {"owner": {"reputation": 156, "user_id": 8549623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaedd1d0726ae26aa58c9cb9d074e765?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Yurkovetc", "link": "https://stackoverflow.com/users/8549623/michael-yurkovetc"}, "reply_to_user": {"reputation": 110, "user_id": 7358723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-tQJP8KkAkcU/AAAAAAAAAAI/AAAAAAAAAF4/7bj082DABK0/photo.jpg?sz=128", "display_name": "Lucas Barreto", "link": "https://stackoverflow.com/users/7358723/lucas-barreto"}, "edited": false, "score": 0, "creation_date": 1504552814, "post_id": 46042776, "comment_id": 79046182, "body": "yep, you can find more info <a href=\"http://guides.rubyonrails.org/command_line.html#custom-rake-tasks\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 110, "user_id": 7358723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-tQJP8KkAkcU/AAAAAAAAAAI/AAAAAAAAAF4/7bj082DABK0/photo.jpg?sz=128", "display_name": "Lucas Barreto", "link": "https://stackoverflow.com/users/7358723/lucas-barreto"}, "edited": false, "score": 0, "creation_date": 1504554389, "post_id": 46042776, "comment_id": 79046688, "body": "one more thing, the standard time of this &quot;5:30&quot; is already GMT, or I need to configure that ?"}], "tags": [], "owner": {"reputation": 156, "user_id": 8549623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaedd1d0726ae26aa58c9cb9d074e765?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Yurkovetc", "link": "https://stackoverflow.com/users/8549623/michael-yurkovetc"}, "is_accepted": true, "score": 1, "last_activity_date": 1504551633, "creation_date": 1504551633, "answer_id": 46042776, "question_id": 46042333, "link": "https://stackoverflow.com/questions/46042333/how-to-use-delayed-job-to-execute-a-method-in-a-specific-hour-on-ruby-on-rails/46042776#46042776", "title": "How to use Delayed Job to execute a method in a specific hour on Ruby on Rails?", "body": "<p>You can use gem <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">whenever</a>, replace your method from application_helper to rake task <code>updatetable.rake</code> e.g.</p>\n\n<p>And your schedule will be as</p>\n\n<pre><code>every 1.day, at: '5:30 am' do\n  rake 'atualizar_banco:updatetable'\nend\n</code></pre>\n"}], "owner": {"reputation": 110, "user_id": 7358723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-tQJP8KkAkcU/AAAAAAAAAAI/AAAAAAAAAF4/7bj082DABK0/photo.jpg?sz=128", "display_name": "Lucas Barreto", "link": "https://stackoverflow.com/users/7358723/lucas-barreto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 46042776, "answer_count": 1, "score": 0, "last_activity_date": 1504551633, "creation_date": 1504549134, "question_id": 46042333, "link": "https://stackoverflow.com/questions/46042333/how-to-use-delayed-job-to-execute-a-method-in-a-specific-hour-on-ruby-on-rails", "title": "How to use Delayed Job to execute a method in a specific hour on Ruby on Rails?", "body": "<p>I have this method:</p>\n\n<pre><code>module ApplicationHelper\n  class AtualizarBanco\n\n    require 'open-uri'\n    require 'nokogiri'\n    require 'net/http'\n\n    def updatetable\n      retorno = Net::HTTP.get_response(URI.parse('http://www.olx.com.br/loja/id/174483'))\n\n      if retorno.code == \"200\"\n        site = open ('http://www.olx.com.br/loja/id/174483')\n        site_lido = site.read\n        site_html = Nokogiri::HTML(site_lido)\n\n        vetor_preco = site_html.at_css('#main-ad-list').css('.item').css('.OLXad-list-price').map{|q| q.text.sub!(\" R$ \", \"\").sub!(\".\", \"\").to_f}\n        vetor_texto = site_html.at_css('#main-ad-list').css('.item').css('.OLXad-list-title').map{|lista| lista.text.strip}\n        vetor_catg = site_html.css('#main-ad-list .OLXad-list-line-2').xpath('p[@class=\"text detail-category\"]').map{|q| q.children.first.text.strip}\n        vetor_img = site_html.css('#main-ad-list .OLXad-list-image-box').xpath('span|img[@class=\"image\"]/@src|img[@class=\"image lazy\"]/@data-original').map(&amp;:text)\n\n        i = 0\n        if ((vetor_preco.length == vetor_texto.length) &amp;&amp; (vetor_preco.length == vetor_catg.length) &amp;&amp; (vetor_preco.length == vetor_img.length))\n          while i &lt; vetor_preco.length\n            @prod = Produto.new(nm_produto: vetor_texto[i], preco: vetor_preco[i], categoria: vetor_catg[i], img_produto: vetor_img[i])\n            i += 1\n            if (@prod.valid?)\n              @prod.save\n            end\n          end\n        end  \n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p>And I want to execute this method everyday at 5:30 am GMT. </p>\n\n<p>I did some searching, and I found out about the Delayed Job gem and the Cron scheduler, but it wasn't clear to me how I use them to do what I need.</p>\n\n<p>Delayed Job works well on Rails 5.0.0.1 ? \non the documentation it talks about versions 3.0+ and 4.2, it wasn't clear to me if it is \"4.2 and above\" or just 4.2.</p>\n\n<p>I also don't know if I call the Delayed Job gem with just gem 'delayed-job' or if I need to use gem 'delayed_job_active_record', or if I need to change the config.active_job.queue_adapter.</p>\n\n<p>On the documentation, it also doesn't say if the :run_at parameter accept specific time commands, in the examples it has only things like \"5 minuts from now\" or \"2 hours from now\".</p>\n\n<p>Any help ?</p>\n"}, {"tags": ["ruby", "rvm", "ruby-2.3"], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 7625715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBK2m.jpg?s=128&g=1", "display_name": "Paul Andrei", "link": "https://stackoverflow.com/users/7625715/paul-andrei"}, "is_accepted": true, "score": 1, "last_activity_date": 1504548542, "creation_date": 1504548542, "answer_id": 46042219, "question_id": 46042218, "link": "https://stackoverflow.com/questions/46042218/rvm-fails-to-install-ruby-2-3-x/46042219#46042219", "title": "RVM fails to install Ruby 2.3.x", "body": "<p>This took me a while to debug as the log files are not very explicit, most of them point to OpenSSL 1.0 some of them point towards GCC; also this issus can't be reproduced with newer Ruby versions such as 2.4.x.</p>\n\n<p>It seems that the issue is from GCC7 and there is already an official patch released for it.</p>\n\n<p>You can download the patch from <a href=\"https://bugs.ruby-lang.org/attachments/6655/ruby_2_3_gcc7.patch\" rel=\"nofollow noreferrer\">https://bugs.ruby-lang.org/attachments/6655/ruby_2_3_gcc7.patch</a> and then run <code>rvm install 2.3.x --patch ruby_2_3_gcc7.patch%0</code>.</p>\n\n<p>This should fix the issue and RVM won't complain anymore.</p>\n"}], "owner": {"reputation": 98, "user_id": 7625715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBK2m.jpg?s=128&g=1", "display_name": "Paul Andrei", "link": "https://stackoverflow.com/users/7625715/paul-andrei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 1, "accepted_answer_id": 46042219, "answer_count": 1, "score": 1, "last_activity_date": 1504606910, "creation_date": 1504548542, "last_edit_date": 1504606910, "question_id": 46042218, "link": "https://stackoverflow.com/questions/46042218/rvm-fails-to-install-ruby-2-3-x", "title": "RVM fails to install Ruby 2.3.x", "body": "<p>RVM fails, and hangs, when trying to install Ruby <strong>2.3.x</strong> (<strong>2.3.1</strong> in my case) on Manjaro 4.11.12, but this issue has been also reported on other operating systems such as openSUSE.</p>\n\n<p>The error thrown is <code>Error in../../miniruby': corrupted double-linked list</code> but there are situations where RVM also points to OpenSSL or GCC.</p>\n\n<p>Here is what I tried:</p>\n\n<ul>\n<li>Downgrading from GCC7 to GCC6 and even GCC5</li>\n<li>Installing openssl with the rvm pkg install command (<code>rvm pkg install openssl</code>)</li>\n<li>Doing a system update</li>\n</ul>\n\n<p>Nothing worked so far. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "notifications"], "comments": [{"owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1504543958, "post_id": 46041255, "comment_id": 79043012, "body": "The error is undefined local variable or method `dashboard_index_path&#39; but you have not shown your paths or routes or result of rake routes. The only route you show is to user_dashboard not dashboards"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1504555830, "post_id": 46042248, "comment_id": 79047147, "body": "As you can see, the navigation bar is ok. For some reason, its checking for a class object and not the User <b>for #&lt;#&lt;Class:0xc0ceb08&gt;:0xc0ccff0&gt;):</b>"}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1504556216, "post_id": 46042248, "comment_id": 79047256, "body": "I emailed the author of the gem - Hopefully, he can give me more insight on his gem. This solution seems to be the most straight forward for notifications."}], "tags": [], "owner": {"reputation": 156, "user_id": 8549623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaedd1d0726ae26aa58c9cb9d074e765?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Yurkovetc", "link": "https://stackoverflow.com/users/8549623/michael-yurkovetc"}, "is_accepted": false, "score": 0, "last_activity_date": 1504548723, "creation_date": 1504548723, "answer_id": 46042248, "question_id": 46041255, "link": "https://stackoverflow.com/questions/46041255/navbar-partial-throwing-actionviewtemplateerror-exception-for-notification-g/46042248#46042248", "title": "Navbar Partial Throwing ActionView::Template::Error Exception for notification gem", "body": "<p>Change your routes as following:</p>\n\n<pre><code>resource :user_dashboard, as: 'dashboard', only: :show\n</code></pre>\n\n<p>And your link looks like this</p>\n\n<pre><code>&lt;%= active_link_to dashboard_path, class_active: 'nav-link active', :class_inactive =&gt; 'inactive' do %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 11235085, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_lP6kUwq-5Q/AAAAAAAAAAI/AAAAAAAAB-M/wGzoEmmAo2M/photo.jpg?sz=128", "display_name": "Adegbite kelvin", "link": "https://stackoverflow.com/users/11235085/adegbite-kelvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1556380809, "last_edit_date": 1556380809, "creation_date": 1556375429, "answer_id": 55881579, "question_id": 46041255, "link": "https://stackoverflow.com/questions/46041255/navbar-partial-throwing-actionviewtemplateerror-exception-for-notification-g/55881579#55881579", "title": "Navbar Partial Throwing ActionView::Template::Error Exception for notification gem", "body": "<p>You need to add <code>main_app</code> prefix on each link on the navbar e.g <code>main_app.dashboard_index_path</code>...</p>\n\n<p>See <a href=\"http://api.rubyonrails.org/classes/Rails/Engine.html#class-Rails::Engine-label-Using+Engine-27s+routes+outside+Engine\" rel=\"nofollow noreferrer\">here</a> for more details.</p>\n"}], "owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556380809, "creation_date": 1504543260, "last_edit_date": 1504555715, "question_id": 46041255, "link": "https://stackoverflow.com/questions/46041255/navbar-partial-throwing-actionviewtemplateerror-exception-for-notification-g", "title": "Navbar Partial Throwing ActionView::Template::Error Exception for notification gem", "body": "<p>I'm using the <strong>notification</strong> gem by <strong>rails-engine</strong> <a href=\"https://github.com/rails-engine/notifications\" rel=\"nofollow noreferrer\">https://github.com/rails-engine/notifications</a>. It seems to be failing when I traverse to the controller index page for it. It's claiming that the links in my navigation partial are undefined when they clearly are. The NotificationController is the only one having this issue right now. I never used this gem before today. My code is below</p>\n\n<p>Exception</p>\n\n<pre><code>Started GET \"/notifications\" for 127.0.0.1 at 2017-09-04 16:06:51 -0400\nProcessing by Notifications::NotificationsController#index as HTML\n  User Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Notification Load (0.0ms)  SELECT  \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"user_id\" = $1 ORDER BY id desc LIMIT $2 OFFSET $3  [[\"user_id\", 1], [\"LIMIT\", 25], [\"OFFSET\", 0]]\n  Rendering notifications/notifications/index.html.erb within layouts/application\n  Rendered notifications/notifications/index.html.erb within layouts/application (96.1ms)\n  Rendered nav_partials/_user_navbar.html.erb (2572.3ms)\nCompleted 500 Internal Server Error in 8155ms (ActiveRecord: 1.0ms)\n\n\n\nActionView::Template::Error (undefined local variable or method `dashboard_index_path' for #&lt;#&lt;Class:0xc0ceb08&gt;:0xc0ccff0&gt;):\n     6: \n     7:     &lt;ul class=\"navbar-nav mr-auto mt-2 mt-md-0 user-nav-li-padding\"&gt;\n     8:       &lt;li class=\"nav-item white-nav-link mobile-nav-link\"&gt;\n     9:         &lt;%= active_link_to dashboard_index_path, class_active: 'nav-link active', :class_inactive =&gt; 'inactive' do %&gt;\n    10:             &lt;div class=\"left\"&gt;\n    11:               &lt;%= inline_svg 'user_navbar_icons/home_icon_inactive.svg', width: 50, height: 50 %&gt;\n    12:             &lt;/div&gt;\n</code></pre>\n\n<p>_navbar.html.erb</p>\n\n<pre><code>&lt;nav class=\"navbar fixed-top navbar-toggleable-sm pull-nav-to-front\"&gt;\n  &lt;button class=\"navbar-toggler navbar-toggler-right hidden-md-up\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbar-collapse\" aria-controls=\"#navbar-collapse\" aria-expanded=\"false\" aria-label=\"toggle navigation\" style=\"background-color: #fdfeff;\"&gt;&amp;#9776;&lt;/button&gt;\n  &lt;div class=\"collapse navbar-collapse mobile-nav-bg\" id=\"navbar-collapse\"&gt;\n\n    &lt;ul class=\"navbar-nav mr-auto mt-2 mt-md-0 user-nav-li-padding\"&gt;\n      &lt;li class=\"nav-item white-nav-link mobile-nav-link\"&gt;\n        &lt;%= active_link_to dashboard_index_path, class_active: 'nav-link active', :class_inactive =&gt; 'inactive' do %&gt;\n            &lt;div class=\"left\"&gt;\n              &lt;%= inline_svg 'user_navbar_icons/home_icon_inactive.svg', width: 50, height: 50 %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"right\"&gt;\n              &lt;p&gt;My Dashboard&lt;/p&gt;\n            &lt;/div&gt;\n\n        &lt;% end %&gt;\n\n      &lt;/li&gt;\n\n      &lt;li class=\"nav-item white-nav-link mobile-nav-link\"&gt;\n        &lt;%= active_link_to posts_path, class_active: 'nav-link active', :class_inactive =&gt; 'inactive' do %&gt;\n            &lt;div class=\"left\"&gt;\n              &lt;%= inline_svg 'user_navbar_icons/post_icon_inactive.svg', width: 50, height: 50 %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"right\"&gt;\n              &lt;p&gt;Posts&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/li&gt;\n\n      &lt;li class=\"nav-item white-nav-link mobile-nav-link\"&gt;\n        &lt;%= active_link_to mailbox_index_path, class_active: 'nav-link active', :class_inactive =&gt; 'inactive' do %&gt;\n            &lt;div class=\"left\"&gt;\n              &lt;%= inline_svg 'user_navbar_icons/mail_icon_inactive.svg', width: 50, height: 50 %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"right\"&gt;\n              &lt;p&gt;Messages&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/li&gt;\n      &lt;li class=\"nav-item white-nav-link mobile-nav-link\"&gt;\n          &lt;small class=\"badge badge-default notifications-counter-badge\"&gt;&lt;%= notification_count_for(current_user) %&gt;&lt;/small&gt;\n        &lt;%= active_link_to notifications_path, class_active: 'nav-link active', :class_inactive =&gt; 'inactive' do %&gt;\n\n            &lt;div class=\"left\"&gt;\n              &lt;%= inline_svg 'user_navbar_icons/notification_icon_inactive.svg', width: 50, height: 50 %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"right\"&gt;\n              &lt;p&gt;Notifications&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/li&gt;\n      &lt;li class=\"nav-item white-nav-link mobile-nav-link\"&gt;\n        &lt;%= active_link_to favorites_index_path, class_active: 'nav-link active', :class_inactive =&gt; 'inactive' do %&gt;\n            &lt;div class=\"left\"&gt;\n              &lt;%= inline_svg 'user_navbar_icons/favorite_icon_inactive.svg', width: 50, height: 50 %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"right\"&gt;\n              &lt;p&gt;Favorites&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/li&gt;\n      &lt;li class=\"nav-item white-nav-link mobile-nav-link\"&gt;\n        &lt;div class=\"dropdown\"&gt;\n          &lt;%= active_link_to '#', active: false, class: 'btn dropdown-toggle', class_active: 'nav-link active ', :class_inactive =&gt; 'inactive', id: 'dropdownmenubtn', data: { toggle: 'dropdown' }, aria: {haspopup: true, expanded: false } do %&gt;\n              &lt;div class=\"left\"&gt;\n                &lt;%= inline_svg 'user_navbar_icons/settings_icon_inactive.svg', width: 50, height: 50 %&gt;\n              &lt;/div&gt;\n              &lt;div class=\"right\"&gt;\n                &lt;p&gt;Settings&lt;/p&gt;\n              &lt;/div&gt;\n              &lt;div class=\"dropdown-menu dropdown-menu-right settings-dropdown-menu-margin-pos dropdown-menu-font-color\" aria-labelledby=\"dropdownmenubtn\"&gt;\n                &lt;h6 class=\"dropdown-header\"&gt;&lt;%= current_user.username %&gt;&lt;/h6&gt;\n                &lt;div class=\"dropdown-divider\"&gt;&lt;/div&gt;\n                &lt;%= link_to 'Account Settings', edit_user_registration_path, class: 'dropdown-item' %&gt;\n                &lt;%= link_to 'Help', user_help_index_path, class: 'dropdown-item' %&gt;\n                &lt;div class=\"dropdown-divider\"&gt;&lt;/div&gt;\n                &lt;%= link_to 'Logout', destroy_user_session_path, class: 'dropdown-item', method: :delete %&gt;\n              &lt;/div&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/nav&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  $(document).on('turbolinks:load', function() {\n      $('.dropdown-toggle').dropdown()\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>application.html.erb</p>\n\n<pre><code>   &lt;body&gt;\n    &lt;% if user_signed_in? %&gt;\n        &lt;%= render 'nav_partials/user_navbar' %&gt;\n    &lt;% elsif admin_signed_in? %&gt;\n    &lt;%= render 'nav_partials/admin_navbar' %&gt;\n    &lt;% else %&gt;\n        &lt;%= render 'nav_partials/navbar' %&gt;\n    &lt;% end %&gt;\n&lt;%= yield %&gt;\n    &lt;/body&gt;\n</code></pre>\n\n<p>notifications_controller.rb</p>\n\n<pre><code>module Notifications\n  class NotificationsController &lt; Notifications::ApplicationController\n\n    def index\n      @notifications = notifications.includes(:actor).order('id desc').page(params[:page])\n\n      unread_ids = @notifications.reject(&amp;:read?).select(&amp;:id)\n      Notification.read!(unread_ids)\n\n      @notification_groups = @notifications.group_by { |note| note.created_at.to_date }\n    end\n\n    def clean\n      notifications.delete_all\n      redirect_to notifications_path\n    end\n\n    private\n\n    def notifications\n      raise \"You need reqiure user login for /notifications page.\" unless current_user\n      Notification.where(user_id: current_user.id)\n    end\n  end\nend\n</code></pre>\n\n<p>notifications index</p>\n\n<pre><code>&lt;div class=\"notifications row\"&gt;\n  &lt;div class=\"heading clearfix\"&gt;\n    &lt;%= t('notifications.all_notifications') %&gt;\n\n    &lt;span class=\"pull-xs-right\"&gt;\n      &lt;%= link_to t('notifications.clean_all'), notifications.clean_notifications_path, class: 'btn btn-sm btn-secondary', method: 'delete' %&gt;\n    &lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div class=\"list\"&gt;\n    &lt;% if @notifications.blank? %&gt;\n      &lt;div class=\"no-records\"&gt;&lt;%= t('notifications.no_records') %&gt;&lt;/div&gt;\n    &lt;% else %&gt;\n      &lt;% @notification_groups.each do |group, notifications| %&gt;\n        &lt;div class=\"notification-group\"&gt;\n          &lt;div class=\"group-title\"&gt;&lt;%= group %&gt;&lt;/div&gt;\n          &lt;%= render notifications %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  &lt;%= paginate @notifications %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>_notification.html.erb</p>\n\n<pre><code>&lt;%= cache(['notifications', Notifications::VERSION, notification]) do %&gt;\n&lt;div id=\"notification-&lt;%= notification.id %&gt;\"\n     data-id=\"&lt;%= notification.id %&gt;\"\n     class=\"media notification notification-&lt;%= notification.notify_type %&gt;&lt;%= ' unread' unless notification.read? %&gt;\"&gt;\n  &lt;div class=\"media-left\"&gt;\n    &lt;% if notification.actor_profile_url &amp;&amp; notification.actor_avatar_url %&gt;\n      &lt;%= link_to image_tag(notification.actor_avatar_url), notification.actor_profile_url, title: notification.actor_name, class: 'user-avatar' %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"media-body\"&gt;\n    &lt;%= render partial: \"/notifications/#{notification.notify_type}\", locals: { notification: notification } %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"media-right\"&gt;\n    &lt;%= l notification.created_at, format: :short %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>notification _follow.html.erb</p>\n\n<pre><code>&lt;div class=\"media-heading\"&gt;\n  &lt;%= link_to notification.actor.username, notification.actor %&gt; just followed you.\n&lt;/div&gt;\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>  Rails.application.routes.draw do\n\n  mount Notifications::Engine =&gt; \"/notifications\"\n\n\n  mount Payola::Engine =&gt; '/payola', as: :payola\n  mount CountryStateSelect::Rails::Engine, at: \"/\"\n\n  devise_for :admins\n  devise_for :users\n\n  namespace :api do\n    scope :v1 do\n      mount_devise_token_auth_for 'User', at: 'user_auth'\n    end\n  end\n\n  devise_scope :user do\n    put 'user_change_plan', :to =&gt; 'users/registrations#user_change_plan'\n    put 'user_update_credit_card', :to =&gt; 'users/registrations#user_update_credit_card'\n    authenticated do\n      root to: 'user_dashboard#index', as: 'authenticated_user_root'\n    end\n\n    unauthenticated do\n      root to: 'home#index', as: 'unauthenticated_user_root'\n    end\n  end\n  end\n\n  devise_scope :admin do\n    authenticated do\n      root to: 'admin_dashboard#admin', as: 'authenticated_admin_root'\n    end\n\n    unauthenticated do\n      root to: 'home#index', as: 'unauthenticated_admin_root'\n    end\n  end\n\n\n  controller :home do\n    get :index, to: 'home#index', as: 'home', :path =&gt; 'home'\n    get :login_portal, to: 'home#login_portal', as: 'login_portal', :path =&gt; 'login_portal'\n    get :signup_portal, to: 'home#signup_portal', as: 'signup_portal', :path =&gt; 'signup_portal'\n  end\n\n  resources :user_dashboard, as: 'dashboard', :only =&gt; [:index, :show]\n  resources :comments\n  resources :posts do\n    member do\n      post :share\n      put 'like', to: 'posts#like'\n      get 'like', to: 'posts#like'\n    end\n  end\n\n  resources :users, only: [:show, :index, :update], path: 'u' do\n    get 'users/:username' =&gt; 'users#show'\n    patch 'users/:username', to: 'users#update'\n    resources :follows, :only =&gt; [:create, :destroy]\n  end\n  controller :favorites do\n    get 'favorites/index'\n  end\n\n  resource :user_profile, :only =&gt; [:edit, :update], path: 'profile'\n    root 'home#index'\nend\n</code></pre>\n\n<p>I tried to include the Notifications module instead of wrapping the controller inside of it. It doesn't work as well.</p>\n\n<pre><code>500 Internal Server Error If you are the administrator of this website, then please read this web application's log file and/or the web server's log file to find out what went wrong.\n</code></pre>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1504542521, "post_id": 46040881, "comment_id": 79042445, "body": "<i>&quot;name I get from network&quot;</i> \u2013 what do you mean by that? Is <code>name</code> actually a string or just something that looks or acts like a string? What does <code>name.class</code> return? What about <code>name.singleton_class.ancestors</code>?"}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1504548250, "post_id": 46040881, "comment_id": 79044579, "body": "<code>WEBrick::HTTPUtils::FormData</code>, however that&#39;s a subclass of <code>String</code> so it should work? Unless I&#39;m missing something fundamental about OOP, I always thought that subclass can be use instead of base class"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504594525, "post_id": 46040881, "comment_id": 79056734, "body": "You&#39;re referring to the Liskov substitution principle \u2013 the L in <a href=\"https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)\" rel=\"nofollow noreferrer\">SOLID</a>. Seems like <code>FormData</code> violates it. I don&#39;t really know, why it is a subclass of <code>String</code>. That doesn&#39;t seem to make much sense (and apparently causes trouble and confusion)."}], "answers": [{"tags": [], "owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "is_accepted": true, "score": 2, "last_activity_date": 1504549967, "creation_date": 1504549967, "answer_id": 46042487, "question_id": 46040881, "link": "https://stackoverflow.com/questions/46040881/wrong-first-argument-exception-in-process-spawn/46042487#46042487", "title": "&quot;wrong first argument&quot; exception in Process.spawn", "body": "<p>Problem was that <code>WEBrick::HTTPUtils::FormData</code> defines <code>#to_ary</code>. So I'll just work around that with <code>name.to_s</code>.</p>\n"}], "owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 46042487, "answer_count": 1, "score": 4, "last_activity_date": 1504549967, "creation_date": 1504541668, "question_id": 46040881, "link": "https://stackoverflow.com/questions/46040881/wrong-first-argument-exception-in-process-spawn", "title": "&quot;wrong first argument&quot; exception in Process.spawn", "body": "<p>I'm trying to spawn a process like this</p>\n\n<pre><code># name I get from network (I'm using webrick)\nProcess.spawn(name)\n</code></pre>\n\n<p>however I end up with</p>\n\n<pre><code>ArgumentError: wrong first argument\n</code></pre>\n\n<p>But it's a bit weird. When I use <code>binding.pry</code> to break right before the\n<code>Process.spawn</code> call, this is what I get:</p>\n\n<pre><code>&gt; name\n=&gt; \"notepad.exe\"\n&gt; name == \"notepad.exe\"\n=&gt; true\n&gt; Process.spawn(name)\nArgumentError: wrong first argument\nfrom (pry):23: in `spawn`\n&gt; Process.spawn(\"notepad.exe\")\n=&gt; 728\n&gt; Process.spawn(name.to_s)\n=&gt; 1416\n</code></pre>\n\n<p>So I just verified that <code>name</code> is equal to <code>\"notepad.exe\"</code> and <code>Process.spawn</code>\nfails when called with <code>name</code> and succeeds when called with <code>\"notepad.exe\"</code>. It\nalso works when called with <code>name.to_s</code>. Could someone explain me what is going\non?</p>\n\n<p>Both <code>name</code> and <code>\"notepad.exe\"</code> have <code>UTF-8</code> encoding (verified via <code>name.encoding</code>)\nand neither <code>name</code> or <code>name.to_s</code> is <code>tainted?</code>.</p>\n\n<p>I looked at <a href=\"https://github.com/ruby/ruby/blob/1e84c8343f38aab16299ddfb7cb20d3e9dabba6f/process.c#L1998\" rel=\"nofollow noreferrer\">source code</a>\nbut have no idea what's going on.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest", "rest-client", "webmock"], "answers": [{"comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1504598352, "post_id": 46041365, "comment_id": 79059019, "body": "Maybe i&#39;ts  a workaround, but not what I&#39;m looking for. It would be necessary to change all tests that use this, and keep in mind to do it every new test using rest-lcient."}], "tags": [], "owner": {"reputation": 678, "user_id": 1876625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71046152bb2e7018ac20ff446aa178d4?s=128&d=identicon&r=PG", "display_name": "ehoffmann", "link": "https://stackoverflow.com/users/1876625/ehoffmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1504633248, "last_edit_date": 1504633248, "creation_date": 1504543703, "answer_id": 46041365, "question_id": 46039587, "link": "https://stackoverflow.com/questions/46039587/disable-rest-client-output-on-minitest/46041365#46041365", "title": "Disable rest-client output on minitest", "body": "<p>What about:</p>\n\n<pre><code>RestClient.stub :log, '' do\n  # Your test code here\nend\n</code></pre>\n\n<p><a href=\"http://www.rubydoc.info/gems/minitest/4.2.0/Object:stub\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/minitest/4.2.0/Object:stub</a></p>\n\n<p>You have many other options to redirect the log output:</p>\n\n<ul>\n<li><p>In your <code>test_helper.rb</code>:</p>\n\n<pre><code>RestClient.log = 'tmp/test.log'\n</code></pre></li>\n</ul>\n\n<p><a href=\"http://www.rubydoc.info/gems/rest-client/1.8.0/RestClient.log=\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/rest-client/1.8.0/RestClient.log=</a> </p>\n\n<ul>\n<li><p>From the command line:</p>\n\n<pre><code>RESTCLIENT_LOG=tmp/restclient.log bundle exec rails test\n</code></pre></li>\n</ul>\n\n<p>In <strong>last resort</strong> you could monkey patch:</p>\n\n<pre><code># test_helper.rb\nRestClient.class_eval do\n  def self.log\n    ''\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 46041365, "answer_count": 1, "score": 0, "last_activity_date": 1504633248, "creation_date": 1504536669, "last_edit_date": 1504607772, "question_id": 46039587, "link": "https://stackoverflow.com/questions/46039587/disable-rest-client-output-on-minitest", "title": "Disable rest-client output on minitest", "body": "<p>I've searched for this, but without success. </p>\n\n<p>I have some tests (minitest) that use RestClient and Webmock. When passing for those tests I always have the request logged, polluting the test ouput: </p>\n\n<pre><code>[$] rake                                                                                                 \n\nRun options: --seed 60435\n\nRunning:\n.........................................................RestClient.get \"http://example.com/some_controller/some_action?userLocale=fr_FR\", \"Accept\"=&gt;\"*/*\", \"Accept-Encoding\"=&gt;\"gzip, deflate\", \"User-Agent\"=&gt;\"rest-client/2.0.0 (darwin14.1.0 x86_64) ruby/2.2.1p85\" # =&gt; 200 OK |  4 bytes\n</code></pre>\n\n<p>Is there a way to disable this ?</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>Just to add, if I call the same address using ruby URL I have nothing logged (even using webmock) so it really is something related with Rest-client. </p>\n\n<p>I already tried to set the <code>ENV['RESTCLIENT_LOG']</code> variable, but without success. </p>\n"}, {"tags": ["ruby", "base58"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504536243, "post_id": 46039397, "comment_id": 79039183, "body": "What <code>BaseX::Base58.string_to_integer(&quot;7bWpTW&quot;)</code> returns?"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504536365, "post_id": 46039397, "comment_id": 79039261, "body": "@mudasobwa 4328719365"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1504538939, "last_edit_date": 1504538939, "creation_date": 1504537858, "answer_id": 46039904, "question_id": 46039397, "link": "https://stackoverflow.com/questions/46039397/ruby-base58-for-waves-platform/46039904#46039904", "title": "Ruby Base58 for Waves platform", "body": "<p><code>pack</code>/<code>unpack</code> won\u2019t much help here: the size is undetermined and the integer you get might contain (and in most cases contains) many bytes. One should code a bit here:</p>\n\n<pre><code>byte_calculator = -&gt;(input, acc = []) do\n  rem, val = input.divmod(256)\n  acc &lt;&lt; (val &gt; 128 ? val - 256 : val)\n  rem &lt;= 0 ? acc : byte_calculator.(rem, acc)\nend\n\nbyte_calculator.\n  (BaseX::Base58.string_to_integer(\"teststring\")).\n  reverse\n#\u21d2 [\n#  [0] 5,\n#  [1] 83,\n#  [2] 9,\n#  [3] -20,\n#  [4] 82,\n#  [5] -65,\n#  [6] 120,\n#  [7] -11\n# ]\n</code></pre>\n\n<p>The same way one should operate with the reverse conversion:</p>\n\n<pre><code>BaseX::Base58.integer_to_string([1, 2, 3, 4, 5].\n      reverse.\n      each_with_index.\n      reduce(0) do |acc, (e, idx)| \n  acc + e * (256 ** idx)\nend)\n#\u21d2\u00a0\"7bWpTW\"\n</code></pre>\n"}], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 46039904, "answer_count": 1, "score": 1, "last_activity_date": 1504538939, "creation_date": 1504536034, "question_id": 46039397, "link": "https://stackoverflow.com/questions/46039397/ruby-base58-for-waves-platform", "title": "Ruby Base58 for Waves platform", "body": "<p>I want to implement <a href=\"https://wavesplatform.com\" rel=\"nofollow noreferrer\">Wavesplatform</a> wrapper on ruby for my project.\nI'm stuck right in the beginning, trying to implement example from <a href=\"https://github.com/wavesplatform/Waves/wiki/Cryptographic-practical-details#example\" rel=\"nofollow noreferrer\">Docs</a> with Base58 and Bitcoin alphabet.</p>\n\n<blockquote>\n  <p>The string \"teststring\" are coded into the bytes [5, 83, 9, -20, 82,\n  -65, 120, -11]. The bytes [1, 2, 3, 4, 5] are coded into the string \"7bWpTW\".</p>\n</blockquote>\n\n<p>I use <a href=\"https://github.com/brianhempel/base_x\" rel=\"nofollow noreferrer\">BaseX gem</a> </p>\n\n<pre><code>num = BaseX.string_to_integer(\"7bWpTW\", numerals: \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\")\nputs bytes = [num].pack(\"i\").inspect\n\n=&gt; \"\\x05\\x04\\x03\\x02\"\n</code></pre>\n\n<p>The output somewhat similar to [1, 2, 3, 4, 5] bytes array from example, but I'm not really sure how to properly manipulate bytes.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1504536051, "post_id": 46039368, "comment_id": 79039075, "body": "<code>answer = gets.chomp</code>\u2014<code>gets</code> returns the input <i>including the EOL separator</i>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1504537908, "post_id": 46039368, "comment_id": 79040158, "body": "@Amir you have already used <code>gets.chomp</code> in <code>name_of_client</code>, so you are obviously aware of the method."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 4795844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vjwiDEfPhAE/AAAAAAAAAAI/AAAAAAAAAPA/U71xqwMW73o/photo.jpg?sz=128", "display_name": "iantheninja", "link": "https://stackoverflow.com/users/4795844/iantheninja"}, "is_accepted": true, "score": 0, "last_activity_date": 1504538607, "creation_date": 1504538607, "answer_id": 46040114, "question_id": 46039368, "link": "https://stackoverflow.com/questions/46039368/ruby-conditional-issue/46040114#46040114", "title": "Ruby conditional issue?", "body": "<p><code>gets</code> adds a new line to the <code>answer</code> variable. use <code>gets.chomp</code> or <code>gets.strip</code> instead. In future, I would recommend using the pry gem as shown below which pauses execution just like debugger does in javascript. To install <code>pry</code> open your terminal window (assuming you're running linux or macOS) and run <code>gem install pry</code>. You can then use it as shown below.</p>\n\n<pre><code>require \"pry\"\n\ndef get_response\n  answer = gets.strip\n  binding.pry\n  if answer == \"Y\" || answer == \"y\"\n      puts 'Sure thing... '\n    elsif answer == \"N\" || answer== \"n\"\n      puts \"Logging you out now. \"\n\n  end\nend\n\nget_response\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8305032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e708d32dc5c0ea4b37eb01c3173bc?s=128&d=identicon&r=PG&f=1", "display_name": "coding", "link": "https://stackoverflow.com/users/8305032/coding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 46040114, "answer_count": 1, "score": -3, "last_activity_date": 1504582602, "creation_date": 1504535935, "last_edit_date": 1504582602, "question_id": 46039368, "link": "https://stackoverflow.com/questions/46039368/ruby-conditional-issue", "title": "Ruby conditional issue?", "body": "<p>I have this code:</p>\n\n<pre><code>def name_of_client\n  puts \"Hello sir/madam; please enter your name: \"\n  name = gets.chomp.upcase\n  puts \"Welcome to the Great Bank, #{name}. Would you like to enter your seriously insecure account? (Y/N)\"\nend\n\ndef get_response\n  answer = gets\n  if answer == \"Y\" || answer == \"y\"\n    puts 'Sure thing... '\n  elsif answer == \"N\" || answer== \"n\"\n    puts \"Logging you out now. \"\n  end\nend\n\nname_of_client\nget_response\n</code></pre>\n\n<p>Why are the strings not printed when I type <code>\"Y\"</code> or <code>\"N\"</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 75, "user_id": 4280759, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-l5WtAu7bXLg/AAAAAAAAAAI/AAAAAAAABu8/zxSH3bGXJSc/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/4280759/matt"}, "edited": false, "score": 0, "creation_date": 1504531160, "post_id": 46037821, "comment_id": 79036097, "body": "No need for the down vote... I am only trying to learn. Is index not defined at &#39;index = gets.strip&#39;?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4280759, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-l5WtAu7bXLg/AAAAAAAAAAI/AAAAAAAABu8/zxSH3bGXJSc/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/4280759/matt"}, "edited": false, "score": 0, "creation_date": 1504531208, "post_id": 46037925, "comment_id": 79036126, "body": "No need for the down vote... I am only trying to learn. Is index not defined at &#39;index = gets.strip&#39;?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1504531937, "post_id": 46037925, "comment_id": 79036564, "body": "Local variable won\u2019t pass a method scope even within the same file boundaries."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1504532220, "post_id": 46037925, "comment_id": 79036733, "body": "@mudasobwa You are right. Either my point alone, or your point alone suffices as a reason."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1504531791, "last_edit_date": 1504531791, "creation_date": 1504530933, "answer_id": 46037925, "question_id": 46037821, "link": "https://stackoverflow.com/questions/46037821/string-to-integer-conversion-method-using-initial-value/46037925#46037925", "title": "String to integer conversion method using initial value", "body": "<p>Yes, you are wrong. As the error message says, in <code>move.rb</code> line 10, within the method body of <code>input_to_index</code>, you are using <code>index</code>, which is neither defined as a method, nor as a variable.</p>\n\n<blockquote>\n  <p>Is index not defined at 'index = gets.strip'?</p>\n</blockquote>\n\n<p>No. The scope of a local variable never goes beyond a single file. You cannot use in <code>lib/move.rb</code> a local variable that is defined in <code>bin/move</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1504541312, "last_edit_date": 1504541312, "creation_date": 1504539152, "answer_id": 46040279, "question_id": 46037821, "link": "https://stackoverflow.com/questions/46037821/string-to-integer-conversion-method-using-initial-value/46040279#46040279", "title": "String to integer conversion method using initial value", "body": "<p>You've mixed up the variables, but it can be fixed quite easily.</p>\n\n<p>When gathering the user input, assign it to a variable called <code>input</code> (instead of <code>index</code>):</p>\n\n<pre><code>input = gets.strip\n</code></pre>\n\n<p>Then, pass <code>input</code> to <code>input_to_index</code> and assign the <em>result</em> to a new variable called <code>index</code>:</p>\n\n<pre><code>index = input_to_index(input)\n</code></pre>\n\n<p>Furthermore, change your <code>input_to_index</code> method so it converts the given <code>input</code>:</p>\n\n<pre><code>def input_to_index(string)\n  string.to_i - 1\nend\n</code></pre>\n\n<p>I've deliberately changed the argument name to indicate that this is a different variable.</p>\n\n<hr>\n\n<h3>Alternative</h3>\n\n<p>Since <code>input</code> is a temporary variable and never used again, you could also inline it and write:</p>\n\n<pre><code>index = input_to_index(gets.strip)\n</code></pre>\n\n<p>And <code>input_to_index</code> doesn't do that much either. You might consider removing it as well and instead write:</p>\n\n<pre><code>index = gets.to_i - 1\n</code></pre>\n\n<p>The above will read a string from the user, convert it to an integer (<code>to_i</code> ignores extraneous characters, including newlines), subtract 1 and assign the result to <code>index</code>.</p>\n\n<hr>\n\n<h3>Suggestion</h3>\n\n<p>Your methods are related to the Tic Tac Toe board. You could therefore move them into a <code>Board</code> class, along with the array (as an instance variable). The change is quite simple:</p>\n\n<pre><code>class Board\n  def initialize\n    @board = Array.new(9, ' ')\n  end\n\n  def display\n    puts \" #{@board[0]} | #{@board[1]} | #{@board[2]} \"\n    puts \"---+---+---\"\n    puts \" #{@board[3]} | #{@board[4]} | #{@board[5]} \"\n    puts \"---+---+---\"\n    puts \" #{@board[6]} | #{@board[7]} | #{@board[8]} \"\n  end\n\n  def move(index, user_marker = 'X')\n    @board[index] = user_marker\n  end\nend\n</code></pre>\n\n<p>You would use the class like this:</p>\n\n<pre><code>puts \"Welcome to Tic Tac Toe!\"\nboard = Board.new\n\nputs \"Where would you like to go?\"\nindex = gets.to_i - 1\nboard.move(index, 'x')\nboard.display\n</code></pre>\n\n<p>IMO, this is easier than passing the board around and the code looks a lot cleaner.</p>\n"}], "owner": {"reputation": 75, "user_id": 4280759, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-l5WtAu7bXLg/AAAAAAAAAAI/AAAAAAAABu8/zxSH3bGXJSc/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/4280759/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 46040279, "answer_count": 2, "score": -2, "last_activity_date": 1507945457, "creation_date": 1504530610, "last_edit_date": 1507945457, "question_id": 46037821, "link": "https://stackoverflow.com/questions/46037821/string-to-integer-conversion-method-using-initial-value", "title": "String to integer conversion method using initial value", "body": "<p>I have this code:</p>\n\n<p><strong>bin/move:</strong></p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire_relative '../lib/move.rb'\n\nputs \"Welcome to Tic Tac Toe!\"\nboard = [\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"]\nputs \"Where would you like to go?\"\nindex = gets.strip\n\ninput_to_index(index)\nmove(board, index, user_marker = \"X\")\ndisplay_board(board)\n</code></pre>\n\n<p><strong>lib/move.rb:</strong></p>\n\n<pre><code>def display_board(board)\n  puts \" #{board[0]} | #{board[1]} | #{board[2]} \"\n  puts \"-----------\"\n  puts \" #{board[3]} | #{board[4]} | #{board[5]} \"\n  puts \"-----------\"\n  puts \" #{board[6]} | #{board[7]} | #{board[8]} \"\nend\n\ndef input_to_index(input)\n  input = index.to_i - 1\nend\n\ndef move(board, index, user_marker = \"X\")\n  board[index.to_i] = user_marker\nend\n</code></pre>\n\n<p>I ran the code, and got the following result:</p>\n\n<pre><code>&gt;ruby bin/move\nWelcome to Tic Tac Toe!\nWhere would you like to go?\n&gt;6\n/home/Tolenno/ttt-5-move-rb-cb-gh-000/lib/move.rb:10:in `input_to_index': undefined local v\nariable or method `index' for main:Object (NameError)\n        from bin/move:10:in `&lt;main&gt;'\n</code></pre>\n\n<p>When I run <code>move</code>, it uses the <code>gets</code> input from the user, and not the new <code>index</code> variable from <code>input_to_index</code>. Am I doing something wrong somewhere?</p>\n"}]