[{"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": false, "score": 0, "last_activity_date": 1518046869, "creation_date": 1518046869, "answer_id": 48675177, "question_id": 48675059, "link": "https://stackoverflow.com/questions/48675059/bad-interpreter-no-such-file-or-directory-update-ruby-version/48675177#48675177", "title": "bad interpreter: No such file or directory, update ruby version", "body": "<p>use following to see how the command is used </p>\n\n<pre><code>rvm use --help\n</code></pre>\n\n<p>you have to use either </p>\n\n<pre><code>rvm use &lt;version&gt;\nrvm use 2.5.0\n</code></pre>\n\n<p>or if you want to use your default ruby version</p>\n\n<pre><code>rvm use default\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 597, "user_id": 2055252, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8f740b1af3815ed9ca61789f376cb590?s=128&d=identicon&r=PG", "display_name": "nisevi", "link": "https://stackoverflow.com/users/2055252/nisevi"}, "edited": false, "score": 0, "creation_date": 1524046557, "post_id": 49445348, "comment_id": 86809476, "body": "when using C9 this helped me ;) !"}, {"owner": {"reputation": 379, "user_id": 9240268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JBSS5.jpg?s=128&g=1", "display_name": "bibsbarreto", "link": "https://stackoverflow.com/users/9240268/bibsbarreto"}, "edited": false, "score": 0, "creation_date": 1588605761, "post_id": 49445348, "comment_id": 108955994, "body": "Thank you!! It worked for me. But I was also without the ruby version that my project was using."}], "tags": [], "owner": {"reputation": 516, "user_id": 7369429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae61fe0e9f3a9d9c41e69027bc631f7c?s=128&d=identicon&r=PG&f=1", "display_name": "AkashP", "link": "https://stackoverflow.com/users/7369429/akashp"}, "is_accepted": false, "score": 3, "last_activity_date": 1521793962, "creation_date": 1521793962, "answer_id": 49445348, "question_id": 48675059, "link": "https://stackoverflow.com/questions/48675059/bad-interpreter-no-such-file-or-directory-update-ruby-version/49445348#49445348", "title": "bad interpreter: No such file or directory, update ruby version", "body": "<p>Install the ruby without binary like:</p>\n\n<pre><code>rvm reinstall 2.5.0 --disable-binary\n</code></pre>\n\n<p>This will work in your case</p>\n"}], "owner": {"reputation": 11, "user_id": 9330304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd693037d04ddfc0c48244fab9c9fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Semidetov", "link": "https://stackoverflow.com/users/9330304/nikita-semidetov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521793962, "creation_date": 1518046253, "last_edit_date": 1518058869, "question_id": 48675059, "link": "https://stackoverflow.com/questions/48675059/bad-interpreter-no-such-file-or-directory-update-ruby-version", "title": "bad interpreter: No such file or directory, update ruby version", "body": "<p>I tried to update the ruby version, but after that\n<code>rvm use 2.5.0 --default</code></p>\n\n<p>I get <code>-bash: /usr/share/rvm/rubies/ruby-2.5.0/bin/gem: /home/travis/.rvm/rubies/ruby-2.5.0/bin/ruby: bad interpreter: No such file or directory</code></p>\n\n<p>very much need help.</p>\n"}, {"tags": ["ruby", "multithreading", "rabbitmq", "bunny"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518045873, "post_id": 48674793, "comment_id": 84348489, "body": "As a note you can share connections between threads, but each thread does need its own channel."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518046033, "post_id": 48674793, "comment_id": 84348544, "body": "Have you tried <code>subscribe(block: true, ...)</code> to get it to block while waiting for messages?"}, {"owner": {"reputation": 2721, "user_id": 22582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a4eb6db2a6ff418cd2f1617c0415e565?s=128&d=identicon&r=PG", "display_name": "Dacto", "link": "https://stackoverflow.com/users/22582/dacto"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518046186, "post_id": 48674793, "comment_id": 84348598, "body": "@tadman yes, I&#39;ve tried <code>subscribe(:block =&gt; true)</code> but it doesn&#39;t seem to help get the block contents to executed."}, {"owner": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "edited": false, "score": 0, "creation_date": 1518207405, "post_id": 48674793, "comment_id": 84425956, "body": "I assume this is being done for test/proof of concept? Why wouldn&#39;t you just go ahead and start the thread up after you&#39;ve done the queue declare, etc.?"}, {"owner": {"reputation": 2721, "user_id": 22582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a4eb6db2a6ff418cd2f1617c0415e565?s=128&d=identicon&r=PG", "display_name": "Dacto", "link": "https://stackoverflow.com/users/22582/dacto"}, "reply_to_user": {"reputation": 12931, "user_id": 1472222, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0970aeafe38e05589964ef6ec1ec3b4?s=128&d=identicon&r=PG", "display_name": "theMayer", "link": "https://stackoverflow.com/users/1472222/themayer"}, "edited": false, "score": 0, "creation_date": 1518298059, "post_id": 48674793, "comment_id": 84450499, "body": "@theMayer yes, this is just for poc and exploration."}], "answers": [{"tags": [], "owner": {"reputation": 2721, "user_id": 22582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a4eb6db2a6ff418cd2f1617c0415e565?s=128&d=identicon&r=PG", "display_name": "Dacto", "link": "https://stackoverflow.com/users/22582/dacto"}, "is_accepted": true, "score": 2, "last_activity_date": 1518112815, "last_edit_date": 1518112815, "creation_date": 1518112515, "answer_id": 48691871, "question_id": 48674793, "link": "https://stackoverflow.com/questions/48674793/rabbitmq-bunny-subscribe-block-not-called-if-within-a-thread/48691871#48691871", "title": "RabbitMQ/bunny: subscribe block not called if within a thread", "body": "<p>The thread's subscribe block is not executing because the queue simply doesn't receive any messages. To elaborate, in this case, the queue ends up being created after the messages are published.</p>\n\n<p>This can be visualized by switching the messages to <code>:mandatory =&gt; true</code> and using <code>Bunny::Exchange#on_return</code>:</p>\n\nCode\n\n<pre class=\"lang-ruby prettyprint-override\"><code>#!/usr/bin/env ruby\nrequire \"bunny\"\n\nquit = false\n\nconnection = Bunny.new\nconnection.start\n\nconsumer = Thread.new do\n  puts \"consumer start\"\n  cn  = connection.create_channel\n  ex = cn.topic(\"weathr\", :auto_delete =&gt; true)\n\n  q = cn.queue(\"\", :exclusive =&gt; true).bind(ex, :routing_key =&gt; \"americas.north.#\")\n  q.subscribe do |delivery_info, properties, payload|\n    puts \"An update for North America: #{payload}, routing key is #{delivery_info.routing_key}\"\n  end\n\n  sleep 1 while !quit\n\n  cn.close\n  puts \"consumer done\"\nend\n\nchannel = connection.create_channel\nexchange = channel.topic(\"weathr\", :auto_delete =&gt; true)\nexchange.on_return do |basic_return, properties, payload|\n  puts \"#{payload} was returned! reply_code = #{basic_return.reply_code}, reply_text = #{basic_return.reply_text}\"\nend\n\nexchange.publish(\"San Diego update\", :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ca.sandiego\").\n  publish(\"Berkeley update\",         :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ca.berkeley\").\n  publish(\"San Francisco update\",    :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ca.sanfrancisco\").\n  publish(\"New York update\",         :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ny.newyork\").\n  publish(\"S\u00e3o Paolo update\",        :mandatory =&gt; true, :routing_key =&gt; \"americas.south.brazil.saopaolo\").\n  publish(\"Hong Kong update\",        :mandatory =&gt; true, :routing_key =&gt; \"asia.southeast.hk.hongkong\").\n  publish(\"Kyoto update\",            :mandatory =&gt; true, :routing_key =&gt; \"asia.southeast.japan.kyoto\").\n  publish(\"Shanghai update\",         :mandatory =&gt; true, :routing_key =&gt; \"asia.southeast.prc.shanghai\").\n  publish(\"Rome update\",             :mandatory =&gt; true, :routing_key =&gt; \"europe.italy.roma\").\n  publish(\"Paris update\",            :mandatory =&gt; true, :routing_key =&gt; \"europe.france.paris\")\n\nchannel.close\nsleep 5\n\nquit = true\nconsumer.join\nconnection.close\n</code></pre>\n\nOutput\n\n<pre class=\"lang-none prettyprint-override\"><code>consumer start\nSan Diego update was returned! reply_code = 312, reply_text = NO_ROUTE\nBerkeley update was returned! reply_code = 312, reply_text = NO_ROUTE\nSan Francisco update was returned! reply_code = 312, reply_text = NO_ROUTE\nNew York update was returned! reply_code = 312, reply_text = NO_ROUTE\nS\u00e3o Paolo update was returned! reply_code = 312, reply_text = NO_ROUTE\nHong Kong update was returned! reply_code = 312, reply_text = NO_ROUTE\nKyoto update was returned! reply_code = 312, reply_text = NO_ROUTE\nShanghai update was returned! reply_code = 312, reply_text = NO_ROUTE\nRome update was returned! reply_code = 312, reply_text = NO_ROUTE\nParis update was returned! reply_code = 312, reply_text = NO_ROUTE\nconsumer done\n</code></pre>\n\n<p>As we can see, all messages ended up getting returned with <code>NO_ROUTE</code>.</p>\n\n<p>A simple solution to force the queue (and route) to exist before the messages are published:\n</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire \"bunny\"\n\nquit = false\nconsumer_queued = false\n\nconnection = Bunny.new\nconnection.start\n\nconsumer = Thread.new do\n  puts \"consumer start\"\n  cn  = connection.create_channel\n  ex = cn.topic(\"weathr\", :auto_delete =&gt; true)\n\n  q = cn.queue(\"\", :exclusive =&gt; true).bind(ex, :routing_key =&gt; \"americas.north.#\")\n  consumer_queued = true\n  q.subscribe do |delivery_info, properties, payload|\n    puts \"An update for North America: #{payload}, routing key is #{delivery_info.routing_key}\"\n    $stdout.flush\n  end\n\n  sleep 1 while !quit\n\n  cn.close\n  puts \"consumer done\"\nend\n\n# ensure queue is ready\nsleep 0.125  while !consumer_queued\n\nchannel = connection.create_channel\nexchange = channel.topic(\"weathr\", :auto_delete =&gt; true)\nexchange.on_return do |basic_return, properties, payload|\n  puts \"#{payload} was returned! reply_code = #{basic_return.reply_code}, reply_text = #{basic_return.reply_text}\"\n  $stdout.flush\nend\n\nexchange.publish(\"San Diego update\", :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ca.sandiego\").\n  publish(\"Berkeley update\",         :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ca.berkeley\").\n  publish(\"San Francisco update\",    :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ca.sanfrancisco\").\n  publish(\"New York update\",         :mandatory =&gt; true, :routing_key =&gt; \"americas.north.us.ny.newyork\").\n  publish(\"S\u00e3o Paolo update\",        :mandatory =&gt; true, :routing_key =&gt; \"americas.south.brazil.saopaolo\").\n  publish(\"Hong Kong update\",        :mandatory =&gt; true, :routing_key =&gt; \"asia.southeast.hk.hongkong\").\n  publish(\"Kyoto update\",            :mandatory =&gt; true, :routing_key =&gt; \"asia.southeast.japan.kyoto\").\n  publish(\"Shanghai update\",         :mandatory =&gt; true, :routing_key =&gt; \"asia.southeast.prc.shanghai\").\n  publish(\"Rome update\",             :mandatory =&gt; true, :routing_key =&gt; \"europe.italy.roma\").\n  publish(\"Paris update\",            :mandatory =&gt; true, :routing_key =&gt; \"europe.france.paris\")\n\nchannel.close\nsleep 5\n\nquit = true\nconsumer.join\nconnection.close\n</code></pre>\n\nOutput (with return notices)\n\n<pre class=\"lang-none prettyprint-override\"><code>consumer start\nAn update for North America: San Diego update, routing key is americas.north.us.ca.sandiego\nS\u00e3o Paolo update was returned! reply_code = 312, reply_text = NO_ROUTE\nAn update for North America: Berkeley update, routing key is americas.north.us.ca.berkeley\nHong Kong update was returned! reply_code = 312, reply_text = NO_ROUTE\nAn update for North America: San Francisco update, routing key is americas.north.us.ca.sanfrancisco\nKyoto update was returned! reply_code = 312, reply_text = NO_ROUTE\nAn update for North America: New York update, routing key is americas.north.us.ny.newyork\nShanghai update was returned! reply_code = 312, reply_text = NO_ROUTE\nRome update was returned! reply_code = 312, reply_text = NO_ROUTE\nParis update was returned! reply_code = 312, reply_text = NO_ROUTE\nconsumer done\n</code></pre>\n\n<p>The expected messages are received and the rest are returned.</p>\n"}], "owner": {"reputation": 2721, "user_id": 22582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a4eb6db2a6ff418cd2f1617c0415e565?s=128&d=identicon&r=PG", "display_name": "Dacto", "link": "https://stackoverflow.com/users/22582/dacto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 1, "accepted_answer_id": 48691871, "answer_count": 1, "score": 2, "last_activity_date": 1518112815, "creation_date": 1518044703, "last_edit_date": 1518047669, "question_id": 48674793, "link": "https://stackoverflow.com/questions/48674793/rabbitmq-bunny-subscribe-block-not-called-if-within-a-thread", "title": "RabbitMQ/bunny: subscribe block not called if within a thread", "body": "<p>I'm having trouble getting a queue subscribe block to execute if in a thread.</p>\n\n<p>The example from <a href=\"http://rubybunny.info/articles/exchanges.html#topic_exchange_routing_example\" rel=\"nofollow noreferrer\">rubybunny/exchanges</a> works, as expected. However, if adapted with the consumer portion in a thread, the subscriber block appears not to execute.</p>\n\n<p>I've tried several simple variations including setting a shared variable flag, all without success.</p>\n\n<p>What am I missing?</p>\n\nCode\n\n<pre class=\"lang-ruby prettyprint-override\"><code>#!/usr/bin/env ruby\nrequire \"bunny\"\n\nquit = false\n\nconsumer = Thread.new do\n  puts \"consumer start\"\n\n  cnx = Bunny.new\n  cnx.start\n  cn  = cnx.create_channel\n  ex = cn.topic(\"weathr\", :auto_delete =&gt; true)\n\n  q = cn.queue(\"\", :exclusive =&gt; true).bind(ex, :routing_key =&gt; \"americas.north.#\")\n  q.subscribe do |delivery_info, properties, payload|\n    puts \"An update for North America: #{payload}, routing key is #{delivery_info.routing_key}\"\n  end\n\n  loop {\n    sleep 1\n    break if quit\n  }\n\n  cnx.close\n  puts \"consumer done\"\nend\n\nconnection = Bunny.new\nconnection.start\nconnection  = connection.create_channel\nexchange = connection.topic(\"weathr\", :auto_delete =&gt; true)\nexchange.publish(\"San Diego update\", :routing_key =&gt; \"americas.north.us.ca.sandiego\").\n  publish(\"Berkeley update\",         :routing_key =&gt; \"americas.north.us.ca.berkeley\").\n  publish(\"San Francisco update\",    :routing_key =&gt; \"americas.north.us.ca.sanfrancisco\").\n  publish(\"New York update\",         :routing_key =&gt; \"americas.north.us.ny.newyork\").\n  publish(\"S\u00e3o Paolo update\",        :routing_key =&gt; \"americas.south.brazil.saopaolo\").\n  publish(\"Hong Kong update\",        :routing_key =&gt; \"asia.southeast.hk.hongkong\").\n  publish(\"Kyoto update\",            :routing_key =&gt; \"asia.southeast.japan.kyoto\").\n  publish(\"Shanghai update\",         :routing_key =&gt; \"asia.southeast.prc.shanghai\").\n  publish(\"Rome update\",             :routing_key =&gt; \"europe.italy.roma\").\n  publish(\"Paris update\",            :routing_key =&gt; \"europe.france.paris\")\n\nsleep 5\nconnection.close\n\nquit = true\nconsumer.join\n</code></pre>\n\nActual Output\n\n<pre class=\"lang-none prettyprint-override\"><code>consumer start\nconsumer done\n</code></pre>\n\nExpected Output\n\n<pre class=\"lang-none prettyprint-override\"><code>consumer start\nAn update for North America: San Diego update, routing key is americas.north.us.ca.sandiego\nAn update for North America: Berkeley update, routing key is americas.north.us.ca.berkeley\nAn update for North America: San Francisco update, routing key is americas.north.us.ca.sanfrancisco\nAn update for North America: New York update, routing key is americas.north.us.ny.newyork\nconsumer done\n</code></pre>\n"}, {"tags": ["ruby", "base64"], "comments": [{"owner": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 1, "creation_date": 1518042275, "post_id": 48674256, "comment_id": 84347055, "body": "Keep in mind that Base64 is simply an <b>encoding</b>, not an <i>encryption</i>. As such, you shouldn&#39;t be using <i>only</i> Base64 to transmit sensitive data."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1518042400, "post_id": 48674256, "comment_id": 84347096, "body": "Base64 encodes bytes to text. <code>&#39;food&#39;</code> is converted to bytes with a text encoding (like UTF-8), and then to text with Base64. The <code>f</code> in <code>food</code> doesn\u2019t correspond with the <code>f</code> in that table. If you\u2019re starting out with text, you probably don\u2019t need to encode it at all to send it over HTTP (assuming it\u2019s in a request body and not a querystring). Even if you <i>aren\u2019t</i> starting out with text, that works, actually\u2026"}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "reply_to_user": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1518042797, "post_id": 48674256, "comment_id": 84347285, "body": "@ObsidianAge I know, the part that is encrypted is in the <code>sensitive_info</code> key"}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518042853, "post_id": 48674256, "comment_id": 84347311, "body": "I want to send over a string with these &#39;{&#39; in it.. like json. Can I just send that over http without any changes to the string? What then is Base64 used for?"}], "answers": [{"comments": [{"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518044483, "post_id": 48674705, "comment_id": 84347965, "body": "what are the bytes exactly? Why does f correspond to 102?"}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518044553, "post_id": 48674705, "comment_id": 84347993, "body": "what do you mean by arbitrary bytes?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 1, "creation_date": 1518044765, "post_id": 48674705, "comment_id": 84348075, "body": "@Jwan622: Look at the value of the lowercase <code>f</code> in this table: <a href=\"https://en.wikipedia.org/wiki/ASCII#Character_set\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ASCII#Character_set</a>. \u201cArbitrary bytes\u201d here means \u201cbytes that may not be UTF-8, and almost certainly aren\u2019t because encrypted data looks like random bytes and IVs are random bytes too\u201d."}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518046009, "post_id": 48674705, "comment_id": 84348537, "body": "Why does utf 8 encoding convert f to Ascii? Everything else makes sense"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518046362, "post_id": 48674705, "comment_id": 84348656, "body": "@Jwan622: UTF-8 is backwards-compatible with ASCII, so the table is the same for lowercase <code>f</code>."}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518481413, "post_id": 48674705, "comment_id": 84516377, "body": "last question.... if I&#39;m transmitting the data over ajax requests, (which is http right?)... you&#39;re saying I need to encode it somehow (via hexadecimal or ascii or base64) because it&#39;d have trouble json encoding the binary right? Is that what you&#39;re saying?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518483326, "post_id": 48674705, "comment_id": 84516872, "body": "@Jwan622: The HTTP part isn\u2019t that important. If you want to send your data as JSON, you will need to use hex or base64 encoding on your two bytestrings (IV and encrypted data) before JSON-encoding, yes."}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518533445, "post_id": 48674705, "comment_id": 84539820, "body": "Why is that? I guess the obvious fact is that JSON encoding requires everything be a readable character?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1518560094, "post_id": 48674705, "comment_id": 84554849, "body": "@Jwan622: JSON has no binary data type. It has objects, arrays, numbers, booleans, <code>null</code>, and text strings. The best representation for binary data in JSON is a text string, so you need to convert your binary to text. There are many ways to do this (and not all of them include &quot;readable&quot; characters), but base64 is common and straightforward."}], "tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": true, "score": 3, "last_activity_date": 1518044559, "last_edit_date": 1518044559, "creation_date": 1518044212, "answer_id": 48674705, "question_id": 48674256, "link": "https://stackoverflow.com/questions/48674256/some-base64-usage-in-ruby-is-this-a-good-use-case/48674705#48674705", "title": "Some base64 usage in ruby. Is this a good use case?", "body": "<p>You\u2019re looking at the table backwards. When encoding <code>'food'</code>, you\u2019re first converting the text to bytes with some encoding, like UTF-8:</p>\n\n<pre><code>'food'.encoding\n=&gt; #&lt;Encoding:UTF-8&gt;\n\n'food'.bytes\n=&gt; [102, 111, 111, 100]\n</code></pre>\n\n<p>Then the bits of those bytes are separated into 6-bit groups:</p>\n\n<pre><code>[102, 111, 111, 100].map {|b| sprintf('%08b', b) }\n=&gt; [\"01100110\", \"01101111\", \"01101111\", \"01100100\"]\n\n_.join.scan /.{1,6}/\n=&gt; [\"011001\", \"100110\", \"111101\", \"101111\", \"011001\", \"00\"]\n\n_.map {|g| g.to_i(2) }\n=&gt; [25, 38, 61, 47, 25, 0]\n</code></pre>\n\n<p>These are the numbers you would look up in the table to get the base64-encoded letters. In other words: the <code>f</code> in <code>food</code> and the <code>f</code> in the table are unrelated.</p>\n\n<p>With that out of the way: base64 is used to convert arbitrary bytes to text for situations when text is what\u2019s required. You probably don\u2019t need to base64-encode any <em>braces</em>, because HTTP can handle arbitrary bytes in request and response bodies just fine; you will, however, run into trouble trying to JSON-encode arbitrary bytes in Ruby. This is where base64 encoding comes in handy \u2013 you can encode the <em>values</em> of <code>payload</code> before serializing it.</p>\n\n<pre><code>encoded_payload = {\n    sensitive_information: Base64.encode64(payload[:sensitive_information]),\n    iv: Base64.encode64(payload[:iv]),\n}\n</code></pre>\n\n<p>Now <code>JSON.dump</code> will work fine.</p>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 48674705, "answer_count": 1, "score": -2, "last_activity_date": 1518044559, "creation_date": 1518042152, "last_edit_date": 1518044230, "question_id": 48674256, "link": "https://stackoverflow.com/questions/48674256/some-base64-usage-in-ruby-is-this-a-good-use-case", "title": "Some base64 usage in ruby. Is this a good use case?", "body": "<p>I want to send this data over the wire:</p>\n\n<pre><code>payload = {\n   sensitive_information:&lt;encrypted_data_with_aes_cipher_and_an_key_and_initialization_vector,\n   iv: &lt;some_iv&gt;\n}\n</code></pre>\n\n<p>Basically, I want to send a payload with the IV so that the recipient of the data can use the initialization vector.</p>\n\n<p>I need to send this information over http to an api which stores the data. The client will then make a get request to this app to retrieve the payload. </p>\n\n<p>I think using Base64 for this is okay right? I basically just want to encode the information so it doesn't change forms. I want to ensure the client gets this data. Encrypting this <code>payload</code> again seems like overkill and plus there's no sensitive information here that I need to encrypt. Encoding will do just fine.</p>\n\n<p>My question is... I don't see the <code>{</code> character in base64. This is what I understand the table to be:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VUjK1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VUjK1.png\" alt=\"enter image description here\"></a></p>\n\n<p>So how is it that I can use Base64 to encode this payload?</p>\n\n<p>I understand how 'food` turns into Base64. But how does '{'?</p>\n\n<pre><code>Base64.encode64('food')\n=&gt; \"Zm9vZA==\\n\"\n[46] pry(Mixer)&gt; Base64.encode64('{')\n=&gt; \"ew==\\n\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 4038302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72a9eb711170a0e053e54b5cd02d277a?s=128&d=identicon&r=PG&f=1", "display_name": "guero64", "link": "https://stackoverflow.com/users/4038302/guero64"}, "is_accepted": false, "score": 4, "last_activity_date": 1518041131, "creation_date": 1518041131, "answer_id": 48674055, "question_id": 48674042, "link": "https://stackoverflow.com/questions/48674042/rails-nomethoderror-undefined-method-load-documents-for-psychmodule/48674055#48674055", "title": "Rails: NoMethodError: undefined method `load_documents&#39; for Psych:Module", "body": "<p>The solution I came up with was to put the 'psych' gem in my Gemfile before yaml_db and set it to an earlier release:</p>\n\n<pre><code>gem 'psych', '~&gt; 2.2.1'\ngem 'yaml_db'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6501770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b53de1253c8a678ddd1978bee6b7460?s=128&d=identicon&r=PG&f=1", "display_name": "abchandra", "link": "https://stackoverflow.com/users/6501770/abchandra"}, "is_accepted": false, "score": 2, "last_activity_date": 1518042532, "creation_date": 1518042532, "answer_id": 48674360, "question_id": 48674042, "link": "https://stackoverflow.com/questions/48674042/rails-nomethoderror-undefined-method-load-documents-for-psychmodule/48674360#48674360", "title": "Rails: NoMethodError: undefined method `load_documents&#39; for Psych:Module", "body": "<p>This issue is caused by <code>load_documents</code> being <a href=\"https://ruby-doc.org/stdlib-2.1.3/libdoc/psych/rdoc/Psych.html#method-c-load_documents\" rel=\"nofollow noreferrer\">deprecated</a> in Psych and finally removed in ruby 2.5. There's an <a href=\"https://github.com/yamldb/yaml_db/pull/124\" rel=\"nofollow noreferrer\">open PR on yaml_db</a> that fixes this issue, so hopefully future versions will not require you to use this work-around.</p>\n\n<p>Your current solution is probably the easiest for now (short of downgrading your ruby version, which is probably a worse idea).</p>\n"}], "owner": {"reputation": 805, "user_id": 4038302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72a9eb711170a0e053e54b5cd02d277a?s=128&d=identicon&r=PG&f=1", "display_name": "guero64", "link": "https://stackoverflow.com/users/4038302/guero64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1518042532, "creation_date": 1518041074, "last_edit_date": 1518041234, "question_id": 48674042, "link": "https://stackoverflow.com/questions/48674042/rails-nomethoderror-undefined-method-load-documents-for-psychmodule", "title": "Rails: NoMethodError: undefined method `load_documents&#39; for Psych:Module", "body": "<p>I've been using the yaml_db gem for a long time to dump the database to yaml and then reload it later if needed.  On a fresh project, though, on rake db:load I got the error message:</p>\n\n<pre><code>NoMethodError: undefined method `load_documents' for Psych:Module\nDid you mean?  load_stream\n/Users/user/.rvm/gems/ruby-2.5.0/gems/yaml_db-0.6.0/lib/yaml_db.rb:61:in `load_documents'\n</code></pre>\n\n<p>I am submitting the solution I finally came up with as an answer, but I'm not really happy with it.  If anyone has a better solution or a suggestion of something better than the yaml_db gem for dumping and reloading the database, I'd be happy to listen.</p>\n\n<p>I'm running Rails 5.1.4 on Ruby 2.5.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1518044118, "post_id": 48674017, "comment_id": 84347814, "body": "I get the same error using Rails 5.1.4."}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 3183532, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cce3fd4ecd01cb0a495b6adb365816e7?s=128&d=identicon&r=PG", "display_name": "Chiefwarpaint", "link": "https://stackoverflow.com/users/3183532/chiefwarpaint"}, "edited": false, "score": 0, "creation_date": 1518103896, "post_id": 48675823, "comment_id": 84376199, "body": "That is exactly what the problem was!  I wasn&#39;t hitting the url for the raw view for the file.  It works perfectly now.  Haha, I feel so dumb now.  Thanks a ton!"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1518051458, "creation_date": 1518051458, "answer_id": 48675823, "question_id": 48674017, "link": "https://stackoverflow.com/questions/48674017/running-rails-new-with-template-url-fails-with-http-error-code-406/48675823#48675823", "title": "Running rails new with template URL fails with HTTP Error Code 406", "body": "<p>You need to provide a link to the raw file, not the html page that shows the file. In the case of the file in your example, that link is: </p>\n\n<pre><code>https://raw.githubusercontent.com/jw81/Rails_Templating/d63247b282bef19ae5ac64504089fa83baafbcec/template.rb\n</code></pre>\n\n<p>You can get the raw link to any file on github by clicking the \"Raw\" button at the right side of the header.</p>\n"}], "owner": {"reputation": 553, "user_id": 3183532, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cce3fd4ecd01cb0a495b6adb365816e7?s=128&d=identicon&r=PG", "display_name": "Chiefwarpaint", "link": "https://stackoverflow.com/users/3183532/chiefwarpaint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 48675823, "answer_count": 1, "score": 1, "last_activity_date": 1518051458, "creation_date": 1518040967, "question_id": 48674017, "link": "https://stackoverflow.com/questions/48674017/running-rails-new-with-template-url-fails-with-http-error-code-406", "title": "Running rails new with template URL fails with HTTP Error Code 406", "body": "<p>I'm using Rails 5.0.0 and Ruby 2.5</p>\n\n<p>The <code>rails new</code> command takes an option named <code>-m</code> that is supposed to allow you to pass a url to a template. <a href=\"http://guides.rubyonrails.org/rails_application_templates.html\" rel=\"nofollow noreferrer\">Reference Doc</a></p>\n\n<p>However, when I attempt to pass a url to a very simple template file that I have up on <a href=\"https://github.com/jw81/Rails_Templating/blob/master/template.rb\" rel=\"nofollow noreferrer\">Github</a>, I get a <code>406 Not Acceptable</code> HTTP Error Code.</p>\n\n<p><strong>This is the command I'm running</strong> ::</p>\n\n<p><code>rails new helloworld -m https://github.com/jw81/Rails_Templating/blob/master/template.rb</code></p>\n\n<p><strong>This is the error I get</strong> ::</p>\n\n<pre><code>apply  https://github.com/jw81/Rails_Templating/blob/master/template.rb\n   Traceback (most recent call last):\n    27: from /usr/local/bundle/bin/rails:23:in `&lt;main&gt;'\n    26: from /usr/local/bundle/bin/rails:23:in `load'\n    25: from /usr/local/bundle/gems/railties-5.0.0/exe/rails:9:in `&lt;top (required)&gt;'\n    24: from /usr/local/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    23: from /usr/local/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    22: from /usr/local/bundle/gems/railties-5.0.0/lib/rails/cli.rb:14:in `&lt;top (required)&gt;'\n    21: from /usr/local/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    20: from /usr/local/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    19: from /usr/local/bundle/gems/railties-5.0.0/lib/rails/commands/application.rb:17:in `&lt;top (required)&gt;'\n    18: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/base.rb:466:in `start'\n    17: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/group.rb:232:in `dispatch'\n    16: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `invoke_all'\n    15: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `map'\n    14: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `each'\n    13: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `block in invoke_all'\n    12: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n    11: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n    10: from (eval):1:in `apply_rails_template'\n     9: from /usr/local/bundle/gems/railties-5.0.0/lib/rails/generators/app_base.rb:158:in `apply_rails_template'\n     8: from /usr/local/bundle/gems/thor-0.20.0/lib/thor/actions.rb:220:in `apply'\n     7: from /usr/local/lib/ruby/2.5.0/open-uri.rb:35:in `open'\n     6: from /usr/local/lib/ruby/2.5.0/open-uri.rb:735:in `open'\n     5: from /usr/local/lib/ruby/2.5.0/open-uri.rb:165:in `open_uri'\n     4: from /usr/local/lib/ruby/2.5.0/open-uri.rb:224:in `open_loop'\n     3: from /usr/local/lib/ruby/2.5.0/open-uri.rb:224:in `catch'\n     2: from /usr/local/lib/ruby/2.5.0/open-uri.rb:226:in `block in open_loop'\n     1: from /usr/local/lib/ruby/2.5.0/open-uri.rb:755:in `buffer_open'\n     /usr/local/lib/ruby/2.5.0/open-uri.rb:377:in `open_http': 406 Not Acceptable (OpenURI::HTTPError)\n</code></pre>\n\n<p>I can download the <code>template.rb</code> file and pass the disk location of the file into the <code>-m</code> option and it works just fine.  But passing the Github URL to <code>-m</code> doesn't work.</p>\n\n<p>Has anyone else ever ran into this and can tell me if I'm doing something wrong?</p>\n"}, {"tags": ["ruby", "rubygems", "rvm", "bundler"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518051953, "post_id": 48673498, "comment_id": 84350230, "body": "You haven&#39;t packaged up <code>user.rb</code> and I don&#39;t even see it in the repo, so where did this get to? Are you sure you checked it in and pushed up your changes?"}, {"owner": {"reputation": 5796, "user_id": 272398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/qYP2D.jpg?s=128&g=1", "display_name": "boddhisattva", "link": "https://stackoverflow.com/users/272398/boddhisattva"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518057422, "post_id": 48673498, "comment_id": 84351504, "body": "@tadman Thank you for trying to help out. <code>user.rb</code> is in the PR here(as mentioned in the question) - <a href=\"https://github.com/boddhisattva/maker/pull/1/files\" rel=\"nofollow noreferrer\">github.com/boddhisattva/maker/pull/1/files</a>. How exactly do I package my gem everytime I make changes to it ? Also, how does that latest packaged gem then get into the appropriate gemset directory(/Users/mohnishgj/.rvm/gems/ruby-2.4.1@experiments/&zwnj;&#8203;gems/maker) ?"}], "answers": [{"tags": [], "owner": {"reputation": 5796, "user_id": 272398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/qYP2D.jpg?s=128&g=1", "display_name": "boddhisattva", "link": "https://stackoverflow.com/users/272398/boddhisattva"}, "is_accepted": false, "score": 0, "last_activity_date": 1518065346, "creation_date": 1518065346, "answer_id": 48677755, "question_id": 48673498, "link": "https://stackoverflow.com/questions/48673498/how-to-add-and-package-the-new-functionality-when-developing-a-new-gem/48677755#48677755", "title": "How to add and package the new functionality when developing a new gem", "body": "<p>The answer to this question is to use <code>bundle console</code> as mentioned in this post - <a href=\"http://wsmoak.net/2016/07/10/ruby-gem-dev-irb.html\" rel=\"nofollow noreferrer\">http://wsmoak.net/2016/07/10/ruby-gem-dev-irb.html</a></p>\n"}], "owner": {"reputation": 5796, "user_id": 272398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/qYP2D.jpg?s=128&g=1", "display_name": "boddhisattva", "link": "https://stackoverflow.com/users/272398/boddhisattva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518065346, "creation_date": 1518038724, "last_edit_date": 1518041531, "question_id": 48673498, "link": "https://stackoverflow.com/questions/48673498/how-to-add-and-package-the-new-functionality-when-developing-a-new-gem", "title": "How to add and package the new functionality when developing a new gem", "body": "<p>I've just created a sample gem called <a href=\"https://github.com/boddhisattva/maker\" rel=\"nofollow noreferrer\">maker</a>. I'm also using RVM.</p>\n\n<p>The recent changes to add a sample user functionality is present in <a href=\"https://github.com/boddhisattva/maker/pull/1/files\" rel=\"nofollow noreferrer\">this PR</a>. I've been following <a href=\"http://bundler.io/v1.16/guides/creating_gem.html\" rel=\"nofollow noreferrer\">this guide</a> in the Bundler docs to create a new gem.</p>\n\n<p>I'm currently trying to use the gem via irb and when I do a <code>require maker</code> I get the below error:</p>\n\n<pre><code> :001 &gt; require 'maker'\nLoadError: cannot load such file -- maker/user\n    from /Users/mohnishgj/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/mohnishgj/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/mohnishgj/.rvm/gems/ruby-2.4.1@experiments/gems/maker-0.1.0/lib/maker.rb:2:in `&lt;top (required)&gt;'\n    from /Users/mohnishgj/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:133:in `require'\n    from /Users/mohnishgj/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:133:in `rescue in require'\n    from /Users/mohnishgj/.rvm/rubies/ruby-2.4.1/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:40:in `require'\n    from (irb):1\n    from /Users/mohnishgj/.rvm/rubies/ruby-2.4.1/bin/irb:11:in `&lt;main&gt;'\n :002 &gt;\n</code></pre>\n\n<p>When I navigate my way to where the gem is installed wrt the <code>experiments</code> gemset(i.e, <code>/Users/mohnishgj/.rvm/gems/ruby-2.4.1@experiments/gems/maker-0.1.0</code>, I clearly see\nthat the <code>user.rb</code> file is missing from that location.</p>\n\n<pre><code>/Users/mohnishgj/.rvm/gems/ruby-2.4.1@experiments/gems/maker-0.1.0/lib/maker\n\u279c  maker ls\nversion.rb\n</code></pre>\n\n<p>How do I fix this whenever I want to add new files as part of the gem and want it to work out of <code>irb</code> . <strong>Am I doing some part of gem related development wrongly</strong> ? Please excuse my ignorance, I'm relatively new with creating gems. <strong>How should I be doing gem related development from source correctly?</strong></p>\n\n<p>Also, I could be possibly missing something but when I tried adding <code>Bundler.require(:default, :development)</code> to maker.gemspec(as suggested in the <a href=\"http://bundler.io/v1.16/guides/creating_gem.html\" rel=\"nofollow noreferrer\">guide to create the gem</a>) like</p>\n\n<pre><code>lib = File.expand_path(\"../lib\", __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire \"maker/version\"\nBundler.require(:default, :development)\n</code></pre>\n\n<p>I got errors like below:</p>\n\n<pre><code>[!] There was an error parsing `Gemfile`:  - [!] There was an error while loading `maker.gemspec`:  - [!] There was an error parsing `Gemfile`:  - [!] There was an error while loading `maker.gemspec`:  - [!] There was an error parsing `Gemfile`:\n</code></pre>\n\n<p>I'm not sure what I could be missing here. Any suggestions of what I need to do in order to fix would be really helpful.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1372, "user_id": 2956829, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WW0RL.jpg?s=128&g=1", "display_name": "el n00b", "link": "https://stackoverflow.com/users/2956829/el-n00b"}, "edited": false, "score": 0, "creation_date": 1518049429, "post_id": 48675319, "comment_id": 84349520, "body": "Even if I add the full path to the file, I still get the same error.  The interpreter doesn&#39;t complain about the require, I just get the &quot;undefined method&quot; error again."}, {"owner": {"reputation": 1372, "user_id": 2956829, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WW0RL.jpg?s=128&g=1", "display_name": "el n00b", "link": "https://stackoverflow.com/users/2956829/el-n00b"}, "edited": false, "score": 0, "creation_date": 1518050072, "post_id": 48675319, "comment_id": 84349711, "body": "I lied.  I must have had a typo somewhere... it&#39;s working now."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1518048008, "creation_date": 1518048008, "answer_id": 48675319, "question_id": 48673454, "link": "https://stackoverflow.com/questions/48673454/ruby-gem-module-wide-variable-in-separate-file/48675319#48675319", "title": "ruby gem module-wide variable in separate file", "body": "<p>It looks like you may have forgotten to <code>require 'my_module'</code> in <code>lib/my_module/lib/some_class.rb</code>.</p>\n"}], "owner": {"reputation": 1372, "user_id": 2956829, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WW0RL.jpg?s=128&g=1", "display_name": "el n00b", "link": "https://stackoverflow.com/users/2956829/el-n00b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 48675319, "answer_count": 1, "score": 0, "last_activity_date": 1518049830, "creation_date": 1518038510, "last_edit_date": 1518049830, "question_id": 48673454, "link": "https://stackoverflow.com/questions/48673454/ruby-gem-module-wide-variable-in-separate-file", "title": "ruby gem module-wide variable in separate file", "body": "<p>I have a Gem I am trying to write where I have multiple files defining the classes for my module.  The structure looks like this:</p>\n\n<pre><code>/root_path\n |- lib/\n |  |- my_module/\n |     |- lib/\n |        |- some_class.rb\n |        |- another_class.rb\n |- my_module.rb\n</code></pre>\n\n<p>In the <code>/root_path/my_module.rb</code> file I have this defined:</p>\n\n<pre><code>module MyModule\n  class &lt;&lt; self\n    attr_accessor :something\n  end\n  self.something = 'xyz'\nend\n</code></pre>\n\n<p>In the <code>/root_path/lib/my_module/lib/some_class.rb</code> file, I want to print what is in the module's <code>something</code> variable like this:</p>\n\n<pre><code>module MyModule\n  class SomeClass\n    class &lt;&lt; self\n\n      def do_stuff\n        puts MyModule.something\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>When I run my spec test, though, I get the following message:</p>\n\n<blockquote>\n  <p>undefined method `something' for MyModule:Module</p>\n</blockquote>\n\n<p>What am I doing wrong here?</p>\n\n<h2>Update 1</h2>\n\n<p>I added <code>require ./lib/my_module</code> and changed the module code to:</p>\n\n<pre><code>module MyModule\n  @@something\n\n  def something\n    @@something\n  end\n  def something=(something)\n    @@something = something\n  end\nend\n</code></pre>\n\n<p>While that works, it just doesn't feel right.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1518038205, "post_id": 48673195, "comment_id": 84345146, "body": "saying without click, just do <code>&lt;%= render &#39;PATH&#39; %&gt;</code> and it will load for u that page. No, if u want to render the partial dynamically, event or action has to be triggered..."}, {"owner": {"reputation": 141, "user_id": 2565946, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003208306192/picture?type=large", "display_name": "Gorodscy Fernando", "link": "https://stackoverflow.com/users/2565946/gorodscy-fernando"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1518039471, "post_id": 48673195, "comment_id": 84345764, "body": "&lt;%= render &#39;PATH&#39; %&gt; wouldn&#39;t do in my case. I need the controller to be fired, not just rendering html. Thanks for your answer."}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 2565946, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003208306192/picture?type=large", "display_name": "Gorodscy Fernando", "link": "https://stackoverflow.com/users/2565946/gorodscy-fernando"}, "is_accepted": true, "score": 2, "last_activity_date": 1518049972, "last_edit_date": 1518049972, "creation_date": 1518042995, "answer_id": 48674466, "question_id": 48673195, "link": "https://stackoverflow.com/questions/48673195/is-it-possible-to-render-partial-with-ajax-request-in-rails-5-view/48674466#48674466", "title": "Is it possible to render partial with ajax request in Rails 5 view?", "body": "<p>Well, I found a non-ideal solution <a href=\"https://stackoverflow.com/a/34321189/2565946\">here</a>. Basically just use js to fire a request to the controller I want like:</p>\n\n<p>in the view:</p>\n\n<pre><code>.some-class{ data: { remote=\"true\", url: my_path(@model), method: :get } }\n  .loading= fa_icon \"spinner pulse\", class: \"fa-5x\"\n</code></pre>\n\n<p>and in the .js:</p>\n\n<pre><code>$ -&gt;\n  elem = $(\"div\").find(\"[data-remote]\")\n  path = elem.data(\"url\")\n  method = elem.data(\"method\") || \"GET\"\n  defaultContent = elem.contents()\n\n  elem.bind 'ajax:beforeSend', -&gt;\n    $(this).prepend(defaultContent)\n    $(this).contents().css(\"opacity\", \"0.5\")\n\n  $.ajax({\n    url: path,\n    dataType: 'script',\n    type: method,\n    complete: -&gt;\n      defaultContent.remove()\n  })\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 2565946, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003208306192/picture?type=large", "display_name": "Gorodscy Fernando", "link": "https://stackoverflow.com/users/2565946/gorodscy-fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 1, "accepted_answer_id": 48674466, "answer_count": 1, "score": 1, "last_activity_date": 1518049972, "creation_date": 1518037404, "question_id": 48673195, "link": "https://stackoverflow.com/questions/48673195/is-it-possible-to-render-partial-with-ajax-request-in-rails-5-view", "title": "Is it possible to render partial with ajax request in Rails 5 view?", "body": "<p>I have a view with some information and a <code>render partial: 'path/to/partial'</code></p>\n\n<p>I want to do something like <code>render url: another_model_path(@model), remote: true</code>.</p>\n\n<p>I could partially accomplish what I wanted with <code>link_to 'Load what I want', another_model_path(@model), remote: true</code></p>\n\n<p>However, I'd need to click the button to load the content I want. Is there anyway to do this without clicking any button and preferably not using custom javascript (just something like remote: true)</p>\n\n<p>I saw that it is possible to add data-remote=true to any element, and Rails will take care of making the ajax request (as long as you also provide data-url='your_url'). I tried this in a  but it didn't work. I tried it in a check_box_tag and it works, but again, I would need to click the checkbox )=</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "xml", "paperclip", "nokogiri", "cdata"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1518038567, "post_id": 48673079, "comment_id": 84345330, "body": "What specific problem are you facing? are you having difficulty reading the file or generating the XML document?"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "reply_to_user": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1518041333, "post_id": 48673079, "comment_id": 84346623, "body": "I don&#39;t know how to put my files like pdf or word in an xml file @TamerShlash"}, {"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1518041705, "post_id": 48673079, "comment_id": 84346793, "body": "I assume the purpose is just data transfer, you do not intend to <i>embed</i> the pdf/word file and be able to view it inside the XML file, right?"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "reply_to_user": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1518041787, "post_id": 48673079, "comment_id": 84346825, "body": "Yeah ! But i have to convert it into some code !"}], "answers": [{"tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": true, "score": 1, "last_activity_date": 1518131450, "creation_date": 1518131450, "answer_id": 48696301, "question_id": 48673079, "link": "https://stackoverflow.com/questions/48673079/convert-files-uploaded-in-database-into-cdata-in-an-xml-file-with-ruby/48696301#48696301", "title": "Convert files uploaded in database into cdata in an xml file with ruby", "body": "<p>You can read the file content with Paperclip like this:</p>\n\n<pre><code>file_content = Paperclip.io_adapters.for(attachment.file).read\n</code></pre>\n\n<p>There are many ways to write a <code>CDATA</code> XML tag to your XML document with Nokogiri, depending on the way your are building your document, here's one from the <a href=\"https://github.com/sparklemotion/nokogiri/wiki/Cheat-sheet\" rel=\"nofollow noreferrer\">cheat sheet</a>:</p>\n\n<pre><code>doc.create_cdata(file_content)\n</code></pre>\n\n<p>However, you should encode the file content with base64 encoding, because the file content is binary, and it might have characters that are not allowed in XML documents.</p>\n\n<p>So here it is:</p>\n\n<pre><code>require 'base64' # if not already required\nBase64.encode64(file_content)\n</code></pre>\n\n<p>All together, here's a pseudo snippet:</p>\n\n<pre><code>file_content = Paperclip.io_adapters.for(attachment.file).read\ndoc.create_cdata(Base64.encode64(file_content))\n</code></pre>\n\n<p>You should also consider using <code>Base64</code> element instead of <code>CDATA</code>, checkout <a href=\"https://stackoverflow.com/a/19904/368167\">this</a> and <a href=\"https://stackoverflow.com/a/20646/368167\">this</a> answers (and other on the same question).</p>\n"}], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 48696301, "answer_count": 1, "score": 0, "last_activity_date": 1518131450, "creation_date": 1518036988, "question_id": 48673079, "link": "https://stackoverflow.com/questions/48673079/convert-files-uploaded-in-database-into-cdata-in-an-xml-file-with-ruby", "title": "Convert files uploaded in database into cdata in an xml file with ruby", "body": "<p>I store my files in a <code>document table</code> with <code>paperclip</code>.My files are <code>word,csv,xlsx</code> and <code>pdf</code>.\nI want to read these records from database and convert them into <code>cdata</code> and put them in an xml tag named <code>Attachment</code>.</p>\n\n<p>This is the out put I'm looking forward:</p>\n\n<pre><code>&lt;Attachment ContentType=\"xlsx\" Extension=\"xlsx\" Description=\"TEST2.xlsx\"&gt;&lt;![CDATA[UEsDBBQABgAIAAAAIQBxDjkrcAEAAKAFAAATANsBW0NvbnRlbnRfVHlwZXNdLnhtbCCi1wEooAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA..\n</code></pre>\n\n<p></p>\n\n<p>and my files are like this when I query them:</p>\n\n<pre><code>#&lt;Paperclip::Attachment:0x000000049dfe28 @name=:picture, @name_string=\"picture\", @instance=#&lt;Document id: 225, picture_file_name: \"data\", picture_content_type: \"application/vnd.openxmlformats-officedocument.word...\", picture_file_size: 10001, picture_updated_at: \"2018-02-07 20:14:18\", ece_id: 242, created_at: \"2018-02-07 20:14:18\", updated_at: \"2018-02-07 20:14:18\", xml_file_name: nil, xml_content_type: nil, xml_file_size: nil, xml_updated_at: nil, whodunnit: nil, document_type: \"Attachment\"&gt;, @options={:convert_options=&gt;{}, :default_style=&gt;:original, :default_url=&gt;\"/:attachment/:style/missing.png\", :escape_url=&gt;true, :restricted_characters=&gt;/[&amp;$+,\\/:;=?@&lt;&gt;\\[\\]\\{\\}\\|\\\\\\^~%# ]/, :filename_cleaner=&gt;nil, :hash_data=&gt;\":class/:attachment/:id/:style/:updated_at\", :hash_digest=&gt;\"SHA1\", :interpolator=&gt;Paperclip::Interpolations, :only_process=&gt;[], :path=&gt;\":rails_root/public:url\", :preserve_files=&gt;false, :processors=&gt;[:thumbnail], :source_file_options=&gt;{}, :storage=&gt;:filesystem, :styles=&gt;{}, :url=&gt;\"/system/:class/:attachment/:id_partition/:style/:filename\", :url_generator=&gt;Paperclip::UrlGenerator, :use_default_time_zone=&gt;true, :use_timestamp=&gt;true, :whiny=&gt;true, :validate_media_type=&gt;true, :check_validity_before_processing=&gt;true}, @post_processing=true, @queued_for_delete=[], @queued_for_write={}, @errors={}, @dirty=false, @interpolator=Paperclip::Interpolations, @url_generator=#&lt;Paperclip::UrlGenerator:0x000000049dfd10 @attachment=#&lt;Paperclip::Attachment:0x000000049dfe28 ...&gt;&gt;, @source_file_options={}, @whiny=true&gt; \n</code></pre>\n\n<p>I'm using <code>nokogiri</code> to generate the xml  tags.</p>\n\n<p>Do you have any ideas? Thanks in advance</p>\n"}, {"tags": ["ruby", "rvm"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1518039227, "post_id": 48672820, "comment_id": 84345679, "body": "<a href=\"https://stackoverflow.com/questions/16417269/install-rvm-into-the-current-user-home-directory\" title=\"install rvm into the current user home directory\">stackoverflow.com/questions/16417269/&hellip;</a> -- not helpful?"}], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 168435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f3208515e5b8c1847e3c159c3a51fb?s=128&d=identicon&r=PG", "display_name": "juanagui", "link": "https://stackoverflow.com/users/168435/juanagui"}, "edited": false, "score": 1, "creation_date": 1566726900, "post_id": 56197861, "comment_id": 101741088, "body": "this will install RVM for <i>all</i> users, not for his or her user"}], "tags": [], "owner": {"reputation": 11, "user_id": 8884293, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gxnHI1gqymA/AAAAAAAAAAI/AAAAAAAAA-E/RMbPIa5aozY/photo.jpg?sz=128", "display_name": "RAJEEV RANJAN SINGH", "link": "https://stackoverflow.com/users/8884293/rajeev-ranjan-singh"}, "is_accepted": false, "score": -2, "last_activity_date": 1558173212, "creation_date": 1558173212, "answer_id": 56197861, "question_id": 48672820, "link": "https://stackoverflow.com/questions/48672820/install-rvm-without-write-permissions-to-usr-local/56197861#56197861", "title": "install rvm without write permissions to /usr/local", "body": "<p>Use <code>\\curl -sSL https://get.rvm.io | sudo bash</code> instead of <code>\\curl -sSL https://get.rvm.io | bash</code>\nthis will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 737, "user_id": 168435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f3208515e5b8c1847e3c159c3a51fb?s=128&d=identicon&r=PG", "display_name": "juanagui", "link": "https://stackoverflow.com/users/168435/juanagui"}, "is_accepted": false, "score": 2, "last_activity_date": 1566727578, "creation_date": 1566727578, "answer_id": 57645092, "question_id": 48672820, "link": "https://stackoverflow.com/questions/48672820/install-rvm-without-write-permissions-to-usr-local/57645092#57645092", "title": "install rvm without write permissions to /usr/local", "body": "<p>This is how I installed it on my user folder: <code>\\curl -sSL https://get.rvm.io | bash -s stable --user-install --auto --path /home/your_user/.rvm</code>. </p>\n\n<p>Also note that the <a href=\"https://github.com/rvm/rvm/blob/master/binscripts/rvm-installer\" rel=\"nofollow noreferrer\">rvm installation script</a> \nis pretty much self-explainatory</p>\n"}], "owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1066, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1566727578, "creation_date": 1518035815, "question_id": 48672820, "link": "https://stackoverflow.com/questions/48672820/install-rvm-without-write-permissions-to-usr-local", "title": "install rvm without write permissions to /usr/local", "body": "<p>I'm trying to install <code>rvm</code> for my user on a development server.  The problem is I don't have write permissions to <code>/usr/local</code>, so I get this:</p>\n\n<pre><code>$ \\curl -sSL https://get.rvm.io | bash\nmktemp: failed to create file via template `/usr/local/rvm/rvm-exec-test.XXXXXX': Permission denied\n</code></pre>\n\n<p>how can I get around this?</p>\n"}, {"tags": ["java", "ruby", "algorithm", "matrix"], "comments": [{"owner": {"reputation": 4996, "user_id": 5702105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58081474e8ae737457f47227ede3ba73?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Mc", "link": "https://stackoverflow.com/users/5702105/ian-mc"}, "edited": false, "score": 0, "creation_date": 1518198910, "post_id": 48672715, "comment_id": 84422038, "body": "The neighbours method is a specific form (at depth=1) of a &#39;borders&#39; method for a given depth d which returns all border geohashes.  Can this be generalized to work at depths &gt; 1?"}, {"owner": {"reputation": 99, "user_id": 7090264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-3kcJmN9FPY8/AAAAAAAAAAI/AAAAAAAAD1M/sjdgR_EZe2o/photo.jpg?sz=128", "display_name": "Jas1997", "link": "https://stackoverflow.com/users/7090264/jas1997"}, "reply_to_user": {"reputation": 4996, "user_id": 5702105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58081474e8ae737457f47227ede3ba73?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Mc", "link": "https://stackoverflow.com/users/5702105/ian-mc"}, "edited": false, "score": 0, "creation_date": 1518816417, "post_id": 48672715, "comment_id": 84674837, "body": "This was exactly what I was trying to implement. See my answer to my question to see my solution! :)"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 7090264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-3kcJmN9FPY8/AAAAAAAAAAI/AAAAAAAAD1M/sjdgR_EZe2o/photo.jpg?sz=128", "display_name": "Jas1997", "link": "https://stackoverflow.com/users/7090264/jas1997"}, "is_accepted": true, "score": 1, "last_activity_date": 1518816660, "creation_date": 1518816660, "answer_id": 48835142, "question_id": 48672715, "link": "https://stackoverflow.com/questions/48672715/returning-a-hash-for-each-depth-level-of-a-matrix/48835142#48835142", "title": "Returning a hash for each depth level of a matrix", "body": "<p>What I ended up doing was creating a NxN matrix and then traversing it in a spiral order. Say I was iterating through the matrix in a clockwise fashion, then at every point where I move from left -> to -> right, would mean that I am at a new depth value. I would then just populate my hash for that new <code>depth_value_key</code> by appending the geo-hashes until the next time I move from the left to right direction again. Hope that helps!</p>\n"}], "owner": {"reputation": 99, "user_id": 7090264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-3kcJmN9FPY8/AAAAAAAAAAI/AAAAAAAAD1M/sjdgR_EZe2o/photo.jpg?sz=128", "display_name": "Jas1997", "link": "https://stackoverflow.com/users/7090264/jas1997"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 48835142, "answer_count": 1, "score": 0, "last_activity_date": 1518816660, "creation_date": 1518035403, "question_id": 48672715, "link": "https://stackoverflow.com/questions/48672715/returning-a-hash-for-each-depth-level-of-a-matrix", "title": "Returning a hash for each depth level of a matrix", "body": "<p>I'm working on developing an algorithm where a user can pass in a centre <code>geohash</code> and a <code>depth_value</code> and would get a hash that maps each depth with an array of geohashes at that depth. </p>\n\n<p>For example, take a look at this:</p>\n\n<p><code>+--------+--------+--------+ \n | xn774d | xn774f | xn7754 |\n +--------+--------+--------+\n | xn7749 | xn774c | xn7751 |\n +--------+--------+--------+\n | xn7748 | xn774b | xn7750 |\n +--------+--------+--------+</code></p>\n\n<p>If the user passes in <code>center_geohash</code>: xn774c and a <code>depth</code> of 1. It would return </p>\n\n<p><code>{depth_0: [xn774c], \n  depth_1: [xn774d, xn774f, xn7754, xn7751, xn7750, xn774b, xn7748, xn7749]\n}</code> (if a depth of 2 was passed in, it would return an array of 16 geohashes)</p>\n\n<p>Tools I have already developed: </p>\n\n<p>I have access to a method that returns back a 2D matrix when you pass in the top right most geohash, and bottom left most geohash. A neighbors method is also available where it returns the 8 geohashes surrounding a given geohash, and an adjacent method that takes in a geohash and a direction and returns a single geohash in that direction. </p>\n\n<p>Thanks so much</p>\n"}, {"tags": ["ruby", "optionparser"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1518034772, "post_id": 48672477, "comment_id": 84343342, "body": "Across files, no, because you&#39;re creating a new OptionParser. You could always pass an <code>opts</code> around, I suppose."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9329619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31eb4cd167efff4b5239594bd9787449?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon R", "link": "https://stackoverflow.com/users/9329619/brandon-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1518537198, "last_edit_date": 1518537198, "creation_date": 1518535705, "answer_id": 48770207, "question_id": 48672477, "link": "https://stackoverflow.com/questions/48672477/using-optionparser-with-a-default-list-of-opts/48770207#48770207", "title": "Using OptionParser with a &#39;Default&#39; list of opts", "body": "<p>For anyone who needs something similar done I was able to do it the following way:</p>\n\n<p>base.rb:</p>\n\n<pre><code>class Base\n    # Defines default arguments for commands\n    def defaults(argv, &amp;block)\n\n      options = {}\n\n      option_parser = OptionParser.new do |opts|\n\n        opts.banner = \"Usage: Define default usage\"\n        opts.on(\"-d\", \"--debug [level]\", \"debug logging level: critical, error, warning, info, debug1, debug2\") do |opt|\n          options[\"level\"] = opt\n        end\n        opts.on(\"-v\", \"--version [release]\", \"release version\") do |opt|\n          options[\"release\"] = opt\n        end\n        yield(opts) if block_given?\n      end\n      option_parser.parse!(argv)\n      return options\n    end\n</code></pre>\n\n<p>command.rb:</p>\n\n<pre><code>class Command &lt; Base\ndef run(argv)\n\n  options = defaults(argv) do |opts|\n    opts.banner = \"new banner message\"\n    opts.on(\"-t\", \"--test[value]\", \"test value\") do |opt|\n      options[\"value\"] = test\n    end\n  end\n</code></pre>\n\n<p>This will require a 'require' or 'require_relative' in order for the Command Class to be able to inherit the Base class, but this works as expected and if you don't need anything from the defaults you can simply use</p>\n\n<pre><code>options = defaults(argv) do\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9329619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31eb4cd167efff4b5239594bd9787449?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon R", "link": "https://stackoverflow.com/users/9329619/brandon-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518537198, "creation_date": 1518034414, "last_edit_date": 1518034709, "question_id": 48672477, "link": "https://stackoverflow.com/questions/48672477/using-optionparser-with-a-default-list-of-opts", "title": "Using OptionParser with a &#39;Default&#39; list of opts", "body": "<p>I'm attempting to create a default opts list using OptionParser that can be used in separate files that share the same opts. Ex:</p>\n\n<p>File 1:</p>\n\n<pre><code>default = OptionParser.new do |opts|\n  opts.banner = \"This banner is shared by multiple files\"\n  opts.on(\"-d\", \"--debug [level]\", \"debug logging level: critical, error, warning, info, debug1, debug2\") do |opt|\n    $debug_level = opt\n  end\nend\ndefault.parse!(argv)\n</code></pre>\n\n<p>File 2:</p>\n\n<pre><code>options = OptionParser.new do |opts|\n  opts.on(\"-v\", \"--version [release]\", \"release version\") do |opt|\n    release = opt\n  end\nend\noptions.parse!(argv)\n</code></pre>\n\n<p>without having to repeat the opts.banner and -d opt in each file, I'd like to be able to have file 2 combine the local opts (-v) with the defaults (banner, -d). Writing it out completely would look like: </p>\n\n<pre><code>options = OptionParser.new do |opts|\n  opts.banner = \"This banner is shared by multiple files\"\n  opts.on(\"-d\", \"--debug [level]\", \"debug logging level: critical, error, warning, info, debug1, debug2\") do |opt|\n    $debug_level = opt\n  end\n  opts.on(\"-v\", \"--version [release]\", \"release version\") do |opt|\n    release = opt\n  end\nend\noptions.parse!(argv)\n</code></pre>\n\n<p>I've seen a few things for subcommands and such, but never anything that strictly shows that it's possible to combine opts or use them across files.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "apache-cocoon"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518080385, "post_id": 48671865, "comment_id": 84359732, "body": "So for clarity: it works in the browser, just not in your tests, right? The only reason you assume it is not working, is because it does not log in the console. Could you make the js have an effect in html and test for that? (because I am not sure console logging is always captured correctly). Which javascript-driver are you using? Obviously it is a bit weird to test for a console logging in a feature test which is ment to be about black box testing :) (what the user sees) (so not sure that would be supported at all)."}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518097039, "post_id": 48671865, "comment_id": 84371168, "body": "Yes, it works in the browser and not in the tests. I am not testing for the console log, just added that for debugging purposes. My test asserts that the text &quot;pericoop 2&quot; (should_see &#39;pericoop 2&#39;) should be present and that is where the test fails. And I can also see that failing when I add a save_and_open_page just before the assert. I&#39;m using selenium-webdriver as driver."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518097683, "post_id": 48671865, "comment_id": 84371651, "body": "Ok. Weird. So either the javascript is not run (??) or the link is not clicked. Is that possible? You find the link by text, so maybe the text on the label is not the same. E.g. the standard locale in test is different or the translation has changed?"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518098395, "post_id": 48671865, "comment_id": 84372202, "body": "I&#39;m sure the link is clicked, because a new field is shown on the page, only with the wrong label (without the index). That&#39;s why I also assumed that the javascript is not run."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518102972, "post_id": 48671865, "comment_id": 84375524, "body": "Ok. Getting weirder. Clicking the link also triggers javascript, otherwise the field would not be inserted (cocoon uses javascript to insert the new item)."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518103121, "post_id": 48671865, "comment_id": 84375634, "body": "Ha! Are you using turbolinks? Because your declaration of the callback is tightly linked to the presence of the <code>#pericopes</code> div and only on <code>ready</code> and not <code>turbolinks:load</code> (but that would also mean in your scenario you would have to come from e.g. a login page first)"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518111185, "post_id": 48671865, "comment_id": 84381174, "body": "No, I&#39;m not using turbolinks. And yes, I login first in a before step."}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518167535, "post_id": 48671865, "comment_id": 84402877, "body": "I&#39;ve done a small refactor to the form and partial to remove some duplication. But that did not solve the problem so far. So what I understand right now is that the javascript is being called, because that adds the new fields, but it looks like the callback is not called when run from Rspec."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518254696, "post_id": 48671865, "comment_id": 84437312, "body": "I am not familiar with the <code>should_see</code> syntax: does it wait for items to appear? For test insert a <code>sleep</code> statement, if that works ... Or write something like <code>Capybara.using_wait_time(3) do       click_link(&#39;Click me&#39;)       expect(page).to have_text(&quot;Has been clicked&quot;)     end</code>"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518373719, "post_id": 48671865, "comment_id": 84469051, "body": "Hi Nathan, thank a lot for helping me here, that&#39;s really appreciated!  should_see is just a little helper method:     <code>def should_see(text)       expect(page).to have_content(text)     end</code>  I tried the <code>sleep</code> and the <code>using_wait_time</code> but no results unfortunately."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518442515, "post_id": 48671865, "comment_id": 84495353, "body": "Ok. Stumped. Could you create a minimal github project that reproduces the problem? Then I will have a look :)"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518446428, "post_id": 48671865, "comment_id": 84497881, "body": "Hi Nathan, the repo is <a href=\"https://github.com/andreheijstek/biblestudy_platform\" rel=\"nofollow noreferrer\">github.com/andreheijstek/biblestudy_platform</a> The failing test is <code>bundle exec rspec spec&#47;features&#47;study_notes&#47;creating_studynote_spec.rb:103</code> This is the whole repo, but it isn&#39;t that big. I&#39;m not sure what thing I should take out to make it really minimal for you (I&#39;m not too experienced as programmer)"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518623388, "post_id": 48671865, "comment_id": 84584216, "body": "Thanks a lot Nathan, that really solves it! Thanks for your time! Unfortunately I don&#39;t have enough reputation yet to accept your answer (or, it is accepted but not shown)."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518625545, "post_id": 48671865, "comment_id": 84585760, "body": "My pleasure! :) You could accept/upvote the answer :P"}, {"owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1518644949, "post_id": 48671865, "comment_id": 84596057, "body": "Accepted. Upvoting is beyond my powers"}], "answers": [{"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 0, "last_activity_date": 1518559006, "creation_date": 1518559006, "answer_id": 48776324, "question_id": 48671865, "link": "https://stackoverflow.com/questions/48671865/cocoon-callbacks-arent-fired-when-called-from-rspec/48776324#48776324", "title": "Cocoon callbacks aren&#39;t fired when called from rspec", "body": "<p>Not sure if you especially configured it to be so, but the tests depended on the presence of compiled assets. </p>\n\n<p>So either, you once compiled the assets and then forgot to do it again, so the <code>application.js</code> did not contain the latest version, or you never compiled the assets.</p>\n\n<p>I simply disabled the compiled assets in test by editing the <code>config/environments/test.rb</code> file and adding </p>\n\n<pre><code>config.assets.debug = true\nconfig.assets.digest = true\nconfig.assets.raise_runtime_errors = true\n</code></pre>\n\n<p>And then your tests seemed to work as expected (well two tests still failed: deleting studynotes and deleting pericopes but I am guessing that is something else).</p>\n\n<blockquote>\n  <p>Note: I also had to edit your seeds, since a field <code>nr_of_verses</code> was renamed in a later migration to <code>nrofverses</code>. </p>\n</blockquote>\n"}], "owner": {"reputation": 49, "user_id": 2053673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad80adfbff33ff10e704a115be89304?s=128&d=identicon&r=PG", "display_name": "andreheijstek", "link": "https://stackoverflow.com/users/2053673/andreheijstek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 48776324, "answer_count": 1, "score": 1, "last_activity_date": 1518559006, "creation_date": 1518031978, "last_edit_date": 1518167497, "question_id": 48671865, "link": "https://stackoverflow.com/questions/48671865/cocoon-callbacks-arent-fired-when-called-from-rspec", "title": "Cocoon callbacks aren&#39;t fired when called from rspec", "body": "<p>I have a page with nested fields that works well in development environment.\nI use an after-insert callback to number the field labels. So this creates the \"pericoop 1, pericoop 2\" labels.\nHowever, when I test the page from rspec, the labels aren't numbered. When I save_and_open_page, I see just the text \"pericoop\".\nSo, for whatever reason it seems that the callback isn't fired. </p>\n\n<p>Here's my rspec:</p>\n\n<pre><code>  scenario 'to multiple pericopes with valid attributes', js: true do\n    fill_in 'pericoop 1', with: 'Jona 1:1 - 1:10'\n    click_on 'Voeg nog een pericoop toe'\n    should_see 'pericoop 2'\n    fill_in 'pericoop 2', with: 'Jona 2:20 - 3:3'\n\n    submit_form\n\n    should_see 'Jona 1:1 - 10 | Jona 2:20 - 3:3'\n  end\n</code></pre>\n\n<p>And the coffee-script</p>\n\n<pre><code>$ -&gt;\n  $(\"#pericopes\").on \"cocoon:after-insert\", (event, added_item) -&gt;\n    num = $(\"#pericopes div.nested-fields\").length\n    added_item.find('.control-label').html('pericoop '+num)\n    console.log('pericope numbered')\n</code></pre>\n\n<p>The console log is not displaying anything when run from the test (I've configured Firefox to keep the logs).</p>\n\n<p>The form:</p>\n\n<pre><code>= simple_form_for studynote, validate: true do |f|\n  #pericopes\n    = f.simple_fields_for :pericopes do |ff|\n      .nested-fields\n        = ff.input :name,\n                  label: \"#{t('simple_form.labels.pericopes.name')} 1\",\n                  placeholder: 'Genesis 1:1-3:21',\n                  autofocus: true\n        = link_to_remove_association 'remove pericope', ff\n    .links\n      = link_to_add_association t('add_pericope'), f, :pericopes\n  = f.input :title\n  = f.input :note, :input_html =&gt; { :rows =&gt; 20 }    \n  = f.button :submit, class: \"btn-primary\"\n</code></pre>\n\n<p>And the partial:</p>\n\n<pre><code>.nested-fields\n  = f.input :name,\n            label: \"#{ t('simple_form.labels.pericopes.name') }\",\n            placeholder: 'Genesis 1:1-3:21',\n            autofocus: true\n  = link_to_remove_association 'remove pericope', f\n</code></pre>\n\n<p>EDIT, I've refactored the form and the partial to dry up some code, hoping that this might solve the issue, but no luck yet.\nPartial _pericope_fields.html.haml</p>\n\n<pre><code>.nested-fields\n  - index = index\n  = f.input :name,\n            label: \"#{ t('simple_form.labels.pericopes.name') } #{index}\",\n            placeholder: 'Genesis 1:1-3:21',\n            autofocus: true\n  = link_to_remove_association 'remove pericope', f\n</code></pre>\n\n<p>Form, _form.html.haml</p>\n\n<pre><code>= simple_form_for studynote, validate: true do |f|\n  #pericopes\n    = f.simple_fields_for :pericopes do |pericope|\n      = render 'pericope_fields', f: pericope, index: 1\n    .links\n      = link_to_add_association t('add_pericope'), f, :pericopes, class: 'new btn-xs'\n  = f.input :title\n  = f.input :note, :input_html =&gt; { :rows =&gt; 20 }\n  = f.button :submit, class: \"btn-primary\"\n</code></pre>\n\n<p>I've looked at this post, <a href=\"https://github.com/nathanvda/cocoon/issues/399\" rel=\"nofollow noreferrer\">300</a> but there the callbacks are not working at all.\nAnd another post (that I can't find right now) where the spec did not include a js: true. But that's not the problem here.</p>\n\n<p>Any ideas what could be wrong here?</p>\n"}, {"tags": ["ruby", "error-handling", "microservices", "grpc"], "answers": [{"tags": [], "owner": {"reputation": 1257, "user_id": 1090265, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fac64a9595102c8ad859ab022dbbca7c?s=128&d=identicon&r=PG", "display_name": "1ijk", "link": "https://stackoverflow.com/users/1090265/1ijk"}, "is_accepted": false, "score": 2, "last_activity_date": 1518034733, "creation_date": 1518034733, "answer_id": 48672554, "question_id": 48671754, "link": "https://stackoverflow.com/questions/48671754/how-can-i-return-an-error-from-a-grpc-service/48672554#48672554", "title": "How can I return an error from a gRPC service?", "body": "<p>After digging around a while, I think the correct answer will be to use <code>GRPC::BadStatus</code>, as described <a href=\"https://github.com/grpc/grpc/blob/5253c8f9a899450397a5e46e4923d01ac9a66a27/src/ruby/lib/grpc/errors.rb#L19-L29\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>BadStatus is an exception class that indicates that an error\n  occurred at either end of a GRPC connection.  When raised, it\n  indicates that a status error should be returned to the other end of a\n  <code>GRPC</code> connection; when caught it means that this end received a status\n  error.</p>\n  \n  <p>There is also subclass of BadStatus in this module for each\n  <code>GRPC</code> status. E.g., the <code>GRPC::Cancelled</code> class corresponds to status\n  <code>CANCELLED</code>.</p>\n  \n  <p>See <a href=\"https://github.com/grpc/grpc/blob/master/include/grpc/impl/codegen/status.h\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc/blob/master/include/grpc/impl/codegen/status.h</a> for detailed descriptions of each status code.</p>\n</blockquote>\n\n<p>and so, raising an error like this</p>\n\n<pre><code>raise GRPC::BadStatus.new_status_exception(CANCELLED)\n</code></pre>\n\n<p>should do the trick.</p>\n"}], "owner": {"reputation": 1257, "user_id": 1090265, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fac64a9595102c8ad859ab022dbbca7c?s=128&d=identicon&r=PG", "display_name": "1ijk", "link": "https://stackoverflow.com/users/1090265/1ijk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518034733, "creation_date": 1518031474, "question_id": 48671754, "link": "https://stackoverflow.com/questions/48671754/how-can-i-return-an-error-from-a-grpc-service", "title": "How can I return an error from a gRPC service?", "body": "<p>I have a simple gRPC service running in Ruby. Under some conditions, I want to return an error to the client in a controlled fashion, something like an HTTP status code with an error message. I don't see any clear way to do this from the documentation; what is the correct way to do so?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 3991, "user_id": 6299938, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af9d073d2179a984f5e6ad984a42d1d0?s=128&d=identicon&r=PG", "display_name": "Julien TASSIN", "link": "https://stackoverflow.com/users/6299938/julien-tassin"}, "edited": false, "score": 0, "creation_date": 1518031032, "post_id": 48671487, "comment_id": 84341265, "body": "add ! to <code>@rating.save</code> like this <code>@rating.save!</code> you will get the error"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1518031057, "post_id": 48671487, "comment_id": 84341278, "body": "Are you sure that <code>request.remote_ip</code> is not returning <code>nil</code>? Try adding <code>p &quot;request.remote_ip is #{request.remote_ip}&quot;</code> to your code before you attempt to assign it, and see what the logs show."}, {"owner": {"reputation": 885, "user_id": 3216673, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a863a5bdeda21c9197cb0c55358834d8?s=128&d=identicon&r=PG&f=1", "display_name": "ketysek", "link": "https://stackoverflow.com/users/3216673/ketysek"}, "reply_to_user": {"reputation": 3991, "user_id": 6299938, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af9d073d2179a984f5e6ad984a42d1d0?s=128&d=identicon&r=PG", "display_name": "Julien TASSIN", "link": "https://stackoverflow.com/users/6299938/julien-tassin"}, "edited": false, "score": 0, "creation_date": 1518031495, "post_id": 48671487, "comment_id": 84341531, "body": "@JulienTASSIN it&#39; doesn&#39;t help"}, {"owner": {"reputation": 885, "user_id": 3216673, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a863a5bdeda21c9197cb0c55358834d8?s=128&d=identicon&r=PG&f=1", "display_name": "ketysek", "link": "https://stackoverflow.com/users/3216673/ketysek"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1518031499, "post_id": 48671487, "comment_id": 84341535, "body": "@moveson I&#39;m sure that request.remote_ip is not nil, because I&#39;m printing it to console and there it is :-) &quot;request.remote_ip is 127.0.0.1&quot;"}, {"owner": {"reputation": 1483, "user_id": 3793234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pOraI.jpg?s=128&g=1", "display_name": "Hamdi Bayhan", "link": "https://stackoverflow.com/users/3793234/hamdi-bayhan"}, "edited": false, "score": 0, "creation_date": 1518033269, "post_id": 48671487, "comment_id": 84342582, "body": "Can you use &quot;save!&quot; or &quot;update_attributes!&quot; methods? Then look at your console to see if there&#39;s an error."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1518033921, "post_id": 48671487, "comment_id": 84342894, "body": "Does the <i>#save</i> method return <code>true</code>or <code>false</code>? (After assigning the <i>ip_address</i>.)"}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1518053695, "post_id": 48671487, "comment_id": 84350635, "body": "@user3216673  Did you add <code>ip_address</code> on your <code>rating_params</code>? Can you show your <code>rating_params</code> method?"}, {"owner": {"reputation": 753, "user_id": 3390844, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001262076672/picture?type=large", "display_name": "Phan Vi\u1ec7t", "link": "https://stackoverflow.com/users/3390844/phan-vi%e1%bb%87t"}, "edited": false, "score": 0, "creation_date": 1518058963, "post_id": 48671487, "comment_id": 84351896, "body": "@user3216673 Please help show the log when you save this."}], "answers": [{"tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 0, "last_activity_date": 1518035674, "creation_date": 1518035674, "answer_id": 48672784, "question_id": 48671487, "link": "https://stackoverflow.com/questions/48671487/rails-5-assign-model-attribute-and-save/48672784#48672784", "title": "Rails 5 \u2013 assign model attribute and save", "body": "<p><strong>Solution to debug in this situation.</strong></p>\n\n<pre><code>@rating = Rating.new(rating_params)\n@rating.ip_address = request.remote_ip\n\n#check is't valid to save: true || false\n@rating.valid?\n\n# if false, print error messages\np @rating.errors\np @rating.errors.full_messages\n\n#either way you can try save without validation.\n@rating.save(:validate =&gt; false)\n</code></pre>\n\n<p>Also, What data type of column <code>ip_address</code>. You can't save integer into string or vice versa. </p>\n\n<p><code>remote_ip</code> by default string class, if want to save as integer.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13244792/convert-ip-address-to-32-bit-integer-in-ruby\">Convert String Ip-address to Integer</a></p>\n"}], "owner": {"reputation": 885, "user_id": 3216673, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a863a5bdeda21c9197cb0c55358834d8?s=128&d=identicon&r=PG&f=1", "display_name": "ketysek", "link": "https://stackoverflow.com/users/3216673/ketysek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518035674, "creation_date": 1518030394, "question_id": 48671487, "link": "https://stackoverflow.com/questions/48671487/rails-5-assign-model-attribute-and-save", "title": "Rails 5 \u2013 assign model attribute and save", "body": "<p>I've got a problem with assigning some value to model attribute and save it. I've tried a lot of ways, but none worked.</p>\n\n<pre><code>@rating = Rating.new(rating_params)\n@rating.save\n@rating.update_attribute(:ip_address, request.remote_ip)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>@rating = Rating.new(rating_params)\n@rating.ip_address = request.remote_ip\n@rating.save\n</code></pre>\n\n<p>Nothing is working for me :-( Everytime I got NULL in my database for column <code>ip_address</code></p>\n"}, {"tags": ["ruby", "sass", "codeanywhere"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1518030896, "post_id": 48671437, "comment_id": 84341189, "body": "Please post the error messages as text instead. That way search engines can index the question, and other people can find this post while googling for the same errors."}, {"owner": {"reputation": 49, "user_id": 7748380, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8c251cf07f3855263c602f4a748cadc?s=128&d=identicon&r=PG&f=1", "display_name": "CRooY3", "link": "https://stackoverflow.com/users/7748380/crooy3"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1518031787, "post_id": 48671437, "comment_id": 84341730, "body": "I know that but I can&#39;t copy from terminal. CTRL+C doesn&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7748380, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8c251cf07f3855263c602f4a748cadc?s=128&d=identicon&r=PG&f=1", "display_name": "CRooY3", "link": "https://stackoverflow.com/users/7748380/crooy3"}, "edited": false, "score": 0, "creation_date": 1518032055, "post_id": 48671565, "comment_id": 84341868, "body": "<code>sudo apt-get install autoconf</code> have solved that issue below but &quot;Failed to build gem native extention&quot; still remains."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 49, "user_id": 7748380, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8c251cf07f3855263c602f4a748cadc?s=128&d=identicon&r=PG&f=1", "display_name": "CRooY3", "link": "https://stackoverflow.com/users/7748380/crooy3"}, "edited": false, "score": 0, "creation_date": 1518046961, "post_id": 48671565, "comment_id": 84348873, "body": "What&#39;s the error now? Add it to the question. Also make sure to read <code>gem_make.out</code> (displayed in the error message). Post the content too."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1518030709, "creation_date": 1518030709, "answer_id": 48671565, "question_id": 48671437, "link": "https://stackoverflow.com/questions/48671437/failed-to-build-gem-native-extention-ubuntu-14-04-on-codeanywhere/48671565#48671565", "title": "Failed to build gem native extention (Ubuntu 14.04 on Codeanywhere)", "body": "<blockquote>\n  <p><code>exec: autoreconf: not found</code></p>\n</blockquote>\n\n<p>It looks like you're missing <code>autoreconf</code>. It's present in the Ubuntu <code>autoconf</code> package:</p>\n\n<pre><code>sudo apt-get install autoconf\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7748380, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8c251cf07f3855263c602f4a748cadc?s=128&d=identicon&r=PG&f=1", "display_name": "CRooY3", "link": "https://stackoverflow.com/users/7748380/crooy3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518030709, "creation_date": 1518030204, "question_id": 48671437, "link": "https://stackoverflow.com/questions/48671437/failed-to-build-gem-native-extention-ubuntu-14-04-on-codeanywhere", "title": "Failed to build gem native extention (Ubuntu 14.04 on Codeanywhere)", "body": "<p>I'm trying to install SASS on Codeanywhere project. </p>\n\n<p>The process is explained here: <a href=\"http://docs.codeanywhere.com/advancedtopics/sass.html\" rel=\"nofollow noreferrer\">http://docs.codeanywhere.com/advancedtopics/sass.html</a></p>\n\n<p>I have succed to install ruby with first command but when I call second command</p>\n\n<pre><code>sudo gem install sass\n</code></pre>\n\n<p>get this error\n<a href=\"https://i.stack.imgur.com/M9lNR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M9lNR.png\" alt=\"get this error\"></a></p>\n\n<p>If I call only...</p>\n\n<pre><code>gem install sass\n</code></pre>\n\n<p>get this error\n<a href=\"https://i.stack.imgur.com/3PVLy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3PVLy.png\" alt=\"get this error2\"></a></p>\n\n<p>What to do?</p>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1518029592, "post_id": 48671203, "comment_id": 84340462, "body": "Please give us an example of your expected output. It&#39;s unclear what your dependance between &quot;types&quot; of records actually means."}, {"owner": {"reputation": 4707, "user_id": 1638209, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a598cbb1fbc79db7b06dc848a9a30a28?s=128&d=identicon&r=PG", "display_name": "Brett", "link": "https://stackoverflow.com/users/1638209/brett"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1518029982, "post_id": 48671203, "comment_id": 84340692, "body": "Meager - I commented out <code>invokeFunc(fun)</code> but the idea is that I do something with each of the results. However, I need to always use <code>CreateDog</code> before <code>UpdateDog</code> - so I need all the <code>Create</code>s first for a given subject. It is fine if I do <code>CreateDog, CreateCat, CreateX</code> and then all the updates for subjects; or also can do by subject, e.g. sort order as  <code>CreateDog,UpdateDog,DeleteDog,CreateCat,UpdateCat</code>. So grouping by &quot;verb&quot; or by &quot;subject&quot; is fine, as long as the order of verbs is maintained per subject - if that makes sense...."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1518035285, "post_id": 48671203, "comment_id": 84343623, "body": "Your own code <i>doesn&#39;t</i> work, since your hashes don&#39;t have <code>&quot;name&quot;</code> keys."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1518205220, "post_id": 48671738, "comment_id": 84425051, "body": "A Stack Exchange history question in the right margin caught my eye:  &quot;...Russian fleet suspects Japanese torpedo boats...&quot;. I was surprised to find that you authored the lone answer. Your interests seem to be wide-ranging."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1518205967, "post_id": 48671738, "comment_id": 84425338, "body": "@CarySwoveland Thanks! Wait til you look at WorldBuilding.SE. :)"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1518114387, "last_edit_date": 1518114387, "creation_date": 1518031368, "answer_id": 48671738, "question_id": 48671203, "link": "https://stackoverflow.com/questions/48671203/how-to-sort-results-according-to-a-specific-list-in-ruby/48671738#48671738", "title": "How to sort results according to a specific list in ruby", "body": "<p>To avoid multiple searches, loop through the list once and create a new hash keyed by phased and whose values are a list of functions for that phase. Then you can iterate through the phases and lists.</p>\n\n<p>This means you only iterate through the functionList once and you have a data structure that's easier to work with in phases.</p>\n\n<pre><code>functionList = [\n  {\"name\":\"CreateDog\"},\n  {\"name\":\"DeleteDog\"},\n  {\"name\":\"DeletedDog\"},\n  {\"name\":\"UpdateDog\"},\n  {\"name\":\"UpdateCat\"},\n  {\"name\":\"DeleteCat\"},\n  {\"name\":\"CreateCat\"},\n  {\"name\":\"FindAnimals\"},\n  {\"name\":\"Something\"}\n]\n\nphases = [\"create\", \"update\", \"delete\"]\nphaseRe = %r{^(Create|Update|Delete)[[:upper:]]}\n\nphaseFunctions = Hash.new()\n\nfunctionList.each do |func|\n    match = phaseRe.match(func[:name])\n    if match\n        (phaseFunctions[match[1].downcase] ||= []) &lt;&lt; func\n    end\nend\n\n# In case any of the phases are empty.\n# Can't set it earlier or everything will go into the default array.\nphaseFunctions.default = []\n\nphases.each do |phase|\n    phaseFunctions[phase].each do |func|\n        puts \"#{phase} #{func}\"\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1518036421, "last_edit_date": 1518036421, "creation_date": 1518035637, "answer_id": 48672778, "question_id": 48671203, "link": "https://stackoverflow.com/questions/48671203/how-to-sort-results-according-to-a-specific-list-in-ruby/48672778#48672778", "title": "How to sort results according to a specific list in ruby", "body": "<p>Do <code>sort_by { |s| 'CUD'.index(s[0]) }</code> before the <code>each</code>.</p>\n\n<p>Or <code>sort_by { |s| s[1] }.reverse</code>.</p>\n\n<p>Or <code>sort_by { |s| s[3] + s[0] }</code>.</p>\n\n<p>Not very serious about the latter two. But the first one is good, I think.</p>\n\n<p>Btw, you can save some code/work if you <code>map</code> before you <code>select</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1592638346, "last_edit_date": 1592638346, "creation_date": 1518039491, "answer_id": 48673676, "question_id": 48671203, "link": "https://stackoverflow.com/questions/48671203/how-to-sort-results-according-to-a-specific-list-in-ruby/48673676#48673676", "title": "How to sort results according to a specific list in ruby", "body": "<p><strong>By operation</strong></p>\n\n<pre><code>ops = %w| Create Update Delete |\n  #=&gt; [\"Create\", \"Update\", \"Delete\"]\nfunctionList.each_with_object(Hash.new { |h,k| h[k]=[] }) do |g,h|\n  op = g[:name][/\\A[[:upper:]][[:lower:]]+(?=[[:upper:]])/]\n  h[op] &lt;&lt; g[:name] if ops.include?(op)\nend.values_at(*ops).flatten\n  #=&gt; [\"CreateDog\", \"CreateCat\", \"UpdateDog\", \"UpdateCat\",\n  #    \"DeleteDog\", \"DeleteCat\"]\n</code></pre>\n\n<p><strong>By subject</strong></p>\n\n<pre><code>subs = %w| Dog Cat |\n  # =&gt; [\"Dog\", \"Cat\"]\nfunctionList.each_with_object(Hash.new { |h,k| h[k]=[] }) do |g,h|\n  sub = g[:name][/(?&lt;=[[:lower:]])[[:upper:]][[:lower:]]+\\z/]\n  h[sub] &lt;&lt; g[:name] if subs.include?(sub)\nend.values_at(*subs).flatten\n  #=&gt; [\"CreateDog\", \"DeleteDog\", \"UpdateDog\", \"UpdateCat\",\n  #    \"DeleteCat\", \"CreateCat\"]\n</code></pre>\n\n<p><strong>Single method</strong></p>\n\n<p>One could of course combine these into a single method.</p>\n\n<pre><code>def group_em(function_list, items, regex)\n  function_list.each_with_object(Hash.new { |h,k| h[k]=[] }) do |g,h|\n    item = g[:name][regex]\n    h[item] &lt;&lt; g[:name] if items.include?(item)\n  end.values_at(*items).flatten\nend\n\ngroup_em(functionList, ops, /\\A[[:upper:]][[:lower:]]+(?=[[:upper:]])/)\n  #=&gt; [\"CreateDog\", \"CreateCat\", \"UpdateDog\", \"UpdateCat\",\n  #    \"DeleteDog\", \"DeleteCat\"]\ngroup_em(functionList, subs, /(?&lt;=[[:lower:]])[[:upper:]][[:lower:]]+\\z/)\n  #=&gt; [\"CreateDog\", \"DeleteDog\", \"UpdateDog\", \"UpdateCat\",\n  #    \"DeleteCat\", \"CreateCat\"]\n</code></pre>\n\n<p><strong>Alternative method</strong></p>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a> could be used instead of <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a>, in which case the method would be as follows.</p>\n\n<pre><code>def group_em(function_list, items, regex)\n  function_list.group_by { |g| g[:name][regex] }.\n                values_at(*items).\n                flatten.\n                map { |g| g[:name] }\nend\n</code></pre>\n\n<p>For the operations case, the first step is to compute the following hash.</p>\n\n<pre><code>function_list.group_by do |g|\n  g[:name][/\\A[[:upper:]][[:lower:]]+(?=[[:upper:]])/]\nend\n  #=&gt; {\"Create\"=&gt;[{:name=&gt;\"CreateDog\"}, {:name=&gt;\"CreateCat\"}],\n  #    \"Delete\"=&gt;[{:name=&gt;\"DeleteDog\"}, {:name=&gt;\"DeleteCat\"}],\n  #    \"Update\"=&gt;[{:name=&gt;\"UpdateDog\"}, {:name=&gt;\"UpdateCat\"}],\n  #    \"Find\"=&gt;[{:name=&gt;\"FindAnimals\"}],\n  #    \"Something\"=&gt;[{:name=&gt;\"Something\"}]}\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The steps in the \"by operation\" case are as follows.</p>\n\n<pre><code>by_op = functionList.each_with_object(Hash.new {|h,k| h[k]=[]}) do |g,h|\n  op = g[:name][/\\A[[:upper:]][[:lower:]]+(?=[[:upper:]])/]\n  h[op] &lt;&lt; g[:name] if ops.include?(op)\nend\n  #=&gt; {\"Create\"=&gt;[\"CreateDog\", \"CreateCat\"],\n  #    \"Delete\"=&gt;[\"DeleteDog\", \"DeleteCat\"],\n  #    \"Update\"=&gt;[\"UpdateDog\", \"UpdateCat\"]}\narr = by_op.values_at(*ops)\n  #=&gt; [[\"CreateDog\", \"CreateCat\"], [\"UpdateDog\", \"UpdateCat\"],\n  #    [\"DeleteDog\", \"DeleteCat\"]]\narr.flatten\n #=&gt; [\"CreateDog\", \"CreateCat\", \"UpdateDog\", \"UpdateCat\",\n #    \"DeleteDog\", \"DeleteCat\"]\n</code></pre>\n\n<p>The calculation of <code>by_op</code> is essentially a compact version of the following.</p>\n\n<pre><code>by_op = {}\nfunctionList.each do |g|\n  op = g[:name][/\\A[[:upper:]][[:lower:]]+(?=[[:upper:]])/]\n  if ops.include?(op)\n    by_op[op] = [] unless by_op.key?(op)\n    by_op[op] &lt;&lt; g[:name]\n  end\nend\nby_op\n</code></pre>\n\n<p>The regular expression reads, \"Match the beginning of the string (<code>\\A</code>) followed by one upper case letter, then one or more lower case letters, followed by an upper case letter that is not part of the match\". <code>(?=[[:upper:]])</code> is a <em>positive lookahead</em>.</p>\n\n<p>For an explanation of <code>Hash.new { |h,k| h[k]=[] }</code> see the doc for the case where <code>new</code> takes a block at <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a>.</p>\n"}], "owner": {"reputation": 4707, "user_id": 1638209, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a598cbb1fbc79db7b06dc848a9a30a28?s=128&d=identicon&r=PG", "display_name": "Brett", "link": "https://stackoverflow.com/users/1638209/brett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1592638346, "creation_date": 1518029350, "last_edit_date": 1518030327, "question_id": 48671203, "link": "https://stackoverflow.com/questions/48671203/how-to-sort-results-according-to-a-specific-list-in-ruby", "title": "How to sort results according to a specific list in ruby", "body": "<p>I have a Ruby hash that I want to filter and sort before iterating through it. The structure of the hash has dependencies, and when I iterate through, I need to do so in a specific order. So for example, with the following hash:</p>\n\n<pre><code>functionList = [\n  {\"name\":\"CreateDog\"},\n  {\"name\":\"DeleteDog\"},\n  {\"name\":\"UpdateDog\"},\n  {\"name\":\"UpdateCat\"},\n  {\"name\":\"DeleteCat\"},\n  {\"name\":\"CreateCat\"},\n  {\"name\":\"FindAnimals\"},\n  {\"name\":\"Something\"}\n]\n</code></pre>\n\n<p>I want to filter for only Create, Update or Delete functions and loop through, which I had like this:</p>\n\n<pre><code>validReg=\"^(Create|Update|Delete)\"\nfunctionList.select{|s| s[\"name\"].match(validReg)}.map{|m| m[\"name\"]}.each do |fun|\n  # invokeFunc(fun)\nend\n</code></pre>\n\n<p>This returns the items I want, but in the naturally occurring order. However, the items have specific relationships to each other - Updates are dependent on Create and Deletes on Update. So I want to somehow sort the <code>functionList</code> some how. I cannot change how <code>functionList</code> is returned to me, and I need to control the sorting locally - e.g somewhere between the <code>.select</code> and <code>.each</code>.  </p>\n\n<p>I was thinking of doing something along the lines of  <code>[\"Create\",\"Update\",\"Delete\"].each do |action| ....</code> approach, wondering if there's any \"better\" way of doing this (without looping and doing multiple searches) - some way of providing my own sort reference and calling sort on the array maybe?</p>\n\n<p>To clarify the required final ordering for the iteration (<code>.each</code>):</p>\n\n<p>I need all the <code>Creates</code> first for a given subject. The following sort order is fine: <code>CreateDog,CreateCat,CreateX</code> and then all <code>Updates</code>; or also can do by subject, e.g. sort order as <code>CreateDog,UpdateDog,DeleteDog,CreateCat,UpdateCat,DeleteCat</code>. So grouping by \"verb\" or by \"subject\" is fine, as long as the order of verbs is maintained is a pre-defined arbitrary order per subject</p>\n"}, {"tags": ["ruby", "amazon-web-services", "ssl", "openssl", "aws-sdk"], "comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1518044277, "post_id": 48671149, "comment_id": 84347878, "body": "Not sure if you are aware... the certificate is a <i>public</i> entity.  It doesn&#39;t need to be handled or stored securely.   You hand it over to your peer every time you negotiate, and it&#39;s meaningless without the matching key."}, {"owner": {"reputation": 93, "user_id": 3573127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8716223f3428f82b0b437e844e61544e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Oliveira", "link": "https://stackoverflow.com/users/3573127/kyle-oliveira"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1518047814, "post_id": 48671149, "comment_id": 84349089, "body": "Good point @Michael-sqlbot . So, I should be able to just leave that bit as-is, I imagine. How about the other questions?"}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1518048420, "post_id": 48671149, "comment_id": 84349254, "body": "I wish I could, but I&#39;m afraid neither Ruby nor CloudHSM are within my scope."}], "owner": {"reputation": 93, "user_id": 3573127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8716223f3428f82b0b437e844e61544e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Oliveira", "link": "https://stackoverflow.com/users/3573127/kyle-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518029124, "creation_date": 1518029124, "question_id": 48671149, "link": "https://stackoverflow.com/questions/48671149/using-cloudhsm-from-ruby-via-openssl-for-nethttp", "title": "Using CloudHSM from Ruby via OpenSSL for Net::HTTP", "body": "<p>I'd like to use CloudHSM to store an X509 Certificate and an associated private key that I'm using for an SSL connection through Net::HTTP. However, the documentation I've found for doing this with Ruby is pretty sparse. Currently, I'm setting up a connection like this:</p>\n\n<pre><code>Net::HTTP.new(uri.host, uri.port).tap do |config|\n    config.use_ssl = true\n    config.cert = OpenSSL::X509::Certificate.new(ENV['PUBLIC_KEY'])\n    config.key = OpenSSL::PKey::RSA.new(ENV['PRIVATE_KEY'])\nend\n</code></pre>\n\n<p>Assuming that I've added the cert and the key to CloudHSM and that I've followed the <a href=\"https://docs.aws.amazon.com/cloudhsm/latest/userguide/openssl-library-install.html\" rel=\"nofollow noreferrer\">OpenSSL engine install directions</a>, I think I need to do something like <a href=\"https://stackoverflow.com/questions/31545395/how-to-use-a-custom-openssl-engine-for-nethttp\">this</a> to get the cert and key out. Specifically, I'd change the above to:</p>\n\n<pre><code>Net::HTTP.new(uri.host, uri.port).tap do |config|\n  config.use_ssl = true\n  config.cert = get_the_cert_somehow\n  config.key = OpenSSL::Engine.by_id(\"cloudhsm\").load_private_key(\"LABEL=private_key_label\")\nend\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Is this actually how I should go about this?</li>\n<li>If so, what do I do for <code>get_the_cert_somehow</code>? Do I need to use the <a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/CloudHSMV2/Types/Certificates.html\" rel=\"nofollow noreferrer\">AWS SDK</a>? It feels like there should be a way to do this through the OpenSSL library, but I'm not seeing it.</li>\n<li>Is there something else am I missing? (I'm just starting to dig into this CloudHSM and OpenSSL stuff)</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1518029707, "post_id": 48670646, "comment_id": 84340528, "body": "Can you add the actual error from the server logs?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1518029785, "post_id": 48670646, "comment_id": 84340571, "body": "Also - what is the <code>render partial</code> for the form look like? You need to pass any variables in as <code>locales</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518060237, "post_id": 48676307, "comment_id": 84352215, "body": "thank you very much,but there are having this error, NoMethodError in JobsController#create undefined method `id&#39; for nil:NilClass Extracted source (around line #26):     \t\t\tjob_attrs = jobs_params.except(:company_id) \t\t\t \t\t\tjob_attrs[:company_id] = Company.find_by(id: jobs_params[:c_name]).id"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518060765, "post_id": 48676307, "comment_id": 84352335, "body": "You must find the company by name (not id). And you must also check if it was found. I updated the answer"}, {"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518066324, "post_id": 48676307, "comment_id": 84353555, "body": "now issue is like this ,Unpermitted parameter: :companies   Company Load (0.0ms)  SELECT  &quot;companies&quot;.* FROM &quot;companies&quot; WHERE &quot;companies&quot;.&quot;c_name&quot; IS NULL LIMIT ?  [[&quot;LIMIT&quot;, 1]] No template found for JobsController#create, rendering head :no_content"}, {"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518067424, "post_id": 48676307, "comment_id": 84353888, "body": "it wii not search company id based on the particular user_id"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518087194, "post_id": 48676307, "comment_id": 84364508, "body": "I updated the answer with the correct solution (in my point of view). Passing the company_id from the view."}, {"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518087992, "post_id": 48676307, "comment_id": 84365086, "body": "Unpermitted parameter: :companies   Company Load (0.5ms)  SELECT  &quot;companies&quot;.* FROM &quot;companies&quot; WHERE &quot;companies&quot;.&quot;user_id&quot; = ? AND &quot;companies&quot;.&quot;c_name&quot; IS NULL LIMIT ?  [[&quot;user_id&quot;, 1], [&quot;LIMIT&quot;, 1]] No template found for JobsController#create, rendering head :no_content"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518088580, "post_id": 48676307, "comment_id": 84365465, "body": "I removed the company find by name in the new approach. You still want to use the search by name?"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518088860, "post_id": 48676307, "comment_id": 84365632, "body": "Why do you need c_name?. Is this the company name? You already have in the job through job.company.name. It&#39;s not good to have the company name in the job. Just the company_id. You must remove the c_name from the table, from the view and from the job_params (I did in my answer)"}, {"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518089611, "post_id": 48676307, "comment_id": 84366083, "body": "but now ,Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;Yrd4IUWHppOUWNWvCypZrhpeaseb4VyKTdRTp&zwnj;&#8203;5zEnDO9yRQl/wfef1zs4&zwnj;&#8203;VCvK4tnRO7cE5OcmHNSI&zwnj;&#8203;FW+IX10Ig==&quot;, &quot;job&quot;=&gt;{&quot;title&quot;=&gt;&quot;job job&quot;, &quot;description&quot;=&gt;&quot;aaaaaaaaa aaaaaaaaaa&quot;, &quot;category_id&quot;=&gt;&quot;1&quot;, &quot;jobclosedate&quot;=&gt;&quot;02/13/2018&quot;}, &quot;commit&quot;=&gt;&quot;Create Job&quot;}   User Load (0.5ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot; WHERE &quot;users&quot;.&quot;id&quot; = ? ORDER BY &quot;users&quot;.&quot;id&quot; ASC LIMIT ?  [[&quot;id&quot;, 1], [&quot;LIMIT&quot;, 1]]   Company Load (0.0ms)  SELECT  &quot;companies&quot;.* FROM &quot;companies&quot; WHERE &quot;companies&quot;.&quot;user_id&quot; = ? AND &quot;companies&quot;.&quot;c_name&quot; IS NULL LIMIT ?  [[&quot;user_id&quot;, 1], [&quot;LIMIT&quot;, 1]]"}, {"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518089786, "post_id": 48676307, "comment_id": 84366191, "body": "my current code is like this, company = current_user.companies.find_by(name: jobs_params[:c_name]) if company   job_attrs[:company_id] = company.id,@job = current_user.jobs.build( job_attrs)   if @job.save"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518089901, "post_id": 48676307, "comment_id": 84366265, "body": "You don&#39;t need this find anymore. I have removed it from the answer (unless you keep using the previous approach which I do not recommend)"}, {"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518090162, "post_id": 48676307, "comment_id": 84366445, "body": "that&#39;s great, first i was confuse, now i got that, thanks a lot,  you did such a great job"}, {"owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518092068, "post_id": 48676307, "comment_id": 84367702, "body": "how may i display the company name  show.html.haml page?"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "edited": false, "score": 0, "creation_date": 1518095833, "post_id": 48676307, "comment_id": 84370264, "body": "In jobs/show page? You set <code>@job</code> in the controller and use <code>@job.company.name</code> in the view"}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1518087505, "last_edit_date": 1518087505, "creation_date": 1518055460, "answer_id": 48676307, "question_id": 48670646, "link": "https://stackoverflow.com/questions/48670646/parameters-will-not-pass-in-the-child-class/48676307#48676307", "title": "Parameters will not pass in the child class", "body": "<p>I see you are not picking a company from a select, but just writing the name. And in your controller you are looking for the company, by name. This approach is not very good, as the user can write names of companies that do not exist, or with spelling errors. You could use a select tag and pass the company_id.</p>\n\n<p>The correct way to do it is:</p>\n\n<p><strong>Migrations:</strong></p>\n\n<pre><code>class CreateJobs &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :jobs do |t|\n      t.string :title\n      t.text :description\n      #t.string :c_name REMOVE THIS. YOU DON'T NEED THE COMPANY NAME HERE.\n      t.integer :user_id\n      t.integer :company_id\n      t.timestamps\n    end\n  end\nend\n\nclass CreateCompanies &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :companies do |t|\n      t.string :c_name\n      t.text :c_description\n      t.integer :user_id\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :companies\n  has_many :jobs\nend\n\nclass Job &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :category\n  belongs_to :company\nend\n\nclass Company &lt; ApplicationRecord\n  belongs_to:user\n  has_many:jobs\nend\n</code></pre>\n\n<p><strong>Jobs controller</strong></p>\n\n<pre><code>def new\n  @job = current_user.jobs.build       \nend\n\ndef create\n  @job = current_user.jobs.build(job_params)\n  if @job.save\n    flash[:success]= \"success\"\n    redirect_to @job\n  else\n    flash[:error]=@job.errors.full_messages\n    render \"new\"\n  end\nend\n\ndef jobs_params\n  params.require(:job).permit(:title, \n        :description, \n        :category_id, \n        :image, \n        :jobclosedate, \n        :company_id)\nend\n</code></pre>\n\n<p><strong>jobs/_form</strong></p>\n\n<pre><code>&lt;%= simple_form_for(@job,validation:true ,html: { multipart: true, class: 'form-horizontal'}) do |f| %&gt;\n  &lt;%= f.input :title, label: \"Job Title\", input_html: { class: \"form-control\"} %&gt;\n  &lt;%= f.input :description, label: \"Job Description\", input_html: { class: \"form-control\" } %&gt;\n  &lt;!-- Removed the c_name field --&gt;\n  &lt;%= f.collection_select :category_id, Category.all, :id, :name, { prompt: \"Choose a category\" } %&gt;\n  &lt;%= f.collection_select :company_id, current_user.companies.all, :id, :name, {prompt: \"Choose a company\" } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Note:</strong> Your job belongs to a user. An it also belongs to a company. And a company belongs to a user. So the user in the job may not be needed (you can access through job.company.user (unless job.user means other concept and it's not the same as the company user)</p>\n\n<p><strong>Previous approach</strong></p>\n\n<p>Anyway, if you want to keep using the company name in the view you must do come changes in the controller. The code you are using to search the company by name is wrong. You need to get the company_id to put in the params (and the in the Job record), but you are just adding the whole company record.</p>\n\n<p>Instead of</p>\n\n<pre><code>job_attrs[:c_name] = Company.find_by(id: jobs_params[:c_name])\n</code></pre>\n\n<p>You should write</p>\n\n<pre><code>company = current_user.companies.find_by(name: jobs_params[:c_name])\nif company\n  job_attrs[:company_id] = company.id\nelse\n  # Error. Do not create job...\nend\n</code></pre>\n\n<p>Lastly, you don't need the company name in your Job table (just remove c_name). If you still want to use c_name in the view to get the company, just define an attribute in the model (but don't save it in the table).</p>\n\n<pre><code>attr_accessor :c_name;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9328889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0a0e70b8778c940727dc43e9254be3?s=128&d=identicon&r=PG&f=1", "display_name": "kethianu", "link": "https://stackoverflow.com/users/9328889/kethianu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1518087505, "creation_date": 1518027062, "last_edit_date": 1518068159, "question_id": 48670646, "link": "https://stackoverflow.com/questions/48670646/parameters-will-not-pass-in-the-child-class", "title": "Parameters will not pass in the child class", "body": "<p>When I'm trying to create a job, it will show \"company must exist\", c_name and company_id will not pass in the <code>views/jobs/_form</code></p>\n\n<h3>Migrations</h3>\n\n<pre><code>class CreateJobs &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :jobs do |t|\n      t.string :title\n      t.text :description\n      t.string :c_name\n      t.integer :user_id\n      t.integer :company_id\n      t.timestamps\n    end\n  end\nend\n\nclass CreateCompanies &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :companies do |t|\n      t.string :c_name\n      t.text :c_description\n      t.integer :user_id\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<h3>Models</h3>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :companies\n  has_many :jobs\nend\n\nclass Job &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :category\n  belongs_to :company\nend\n\nclass Company &lt; ApplicationRecord\n  belongs_to:user\n  has_many:jobs\nend\n</code></pre>\n\n<h3>Jobs controller</h3>\n\n<pre><code>def show\nend\n\ndef new\n  @job = current_user.jobs.build       \nend\n\ndef create\n  job_attrs = jobs_params.except(:c_name)\n  job_attrs[:c_name] = Company.find_by(id: jobs_params[:c_name])\n  @job = current_user.jobs.build(job_attrs)\n\n  if @job.save\n    flash[:success]= \"success\"\n    redirect_to @job\n  else\n    flash[:error]=@job.errors.full_messages\n    render \"new\"\n  end\nend\n\ndef jobs_params\n  params\n    .require(:job)\n    .permit(:title, \n            :description, \n            :c_name, \n            :category_id, \n            :image, \n            :jobclosedate, \n            :company_id)\nend\n</code></pre>\n\n<h3>jobs/_form</h3>\n\n<pre><code>&lt;%= simple_form_for(@job,validation:true ,html: { mutlipart: true, class: 'form-horizontal'}) do |f| %&gt;\n  &lt;%= f.input :title, label: \"Job Title\", input_html: { class: \"form-control\"} %&gt;\n  &lt;%= f.input :description, label: \"Job Description\", input_html: { class: \"form-control\" } %&gt;\n  &lt;%= f.input :c_name, label: \"Your Company\", input_html: { class: \"form-control\" } %&gt;\n  &lt;%= f.collection_select :category_id, Category.all, :id, :name, {promt: \"Choose a category\" } %&gt;\n</code></pre>\n\n<p>When I'm try to create a job, it will return a \"company must exist\" validation error, <code>c_name</code> and <code>company_id</code> will not pass in the <code>views/jobs/_form</code>.</p>\n\n<p>Could you please help me to sort it out. It seems the create action has an issue. I'm new to Ruby, please explain how I can sort this out.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rake", "rake-task"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1518029519, "post_id": 48670396, "comment_id": 84340415, "body": "can u post yr task ?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1518029951, "post_id": 48670396, "comment_id": 84340670, "body": "What version of Rails?"}], "answers": [{"comments": [{"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 1, "user_id": 8467744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196da9e95c84ab9dec7cdae8353c2cad?s=128&d=identicon&r=PG&f=1", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/8467744/random-guy"}, "edited": false, "score": 0, "creation_date": 1518084533, "post_id": 48680377, "comment_id": 84362631, "body": "Make sure you restart your server after any update <code>development.rb</code> file"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 1, "user_id": 8467744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196da9e95c84ab9dec7cdae8353c2cad?s=128&d=identicon&r=PG&f=1", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/8467744/random-guy"}, "edited": false, "score": 0, "creation_date": 1518087740, "post_id": 48680377, "comment_id": 84364907, "body": "@RandomGuy See the updated answer, if not working let me know I will delete my answer"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1518090384, "last_edit_date": 1518090384, "creation_date": 1518076750, "answer_id": 48680377, "question_id": 48670396, "link": "https://stackoverflow.com/questions/48670396/rake-task-and-action-mailer-default-url-options/48680377#48680377", "title": "rake task and action_mailer.default_url_options", "body": "<p>Try the following, that should work</p>\n\n<pre><code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>I don't know what is the ideal solution for this? but I have tested and it working for me</p>\n\n<pre><code>Rails.application.routes.default_url_options = config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n</code></pre>\n\n<p>This also work</p>\n\n<pre><code>Rails.application.routes.default_url_options = Rails.application.config.action_mailer.default_url_options\n</code></pre>\n\n<p>This solution based on this <a href=\"https://github.com/yappbox/render_anywhere/issues/22\" rel=\"nofollow noreferrer\"><strong>link</strong></a></p>\n\n<p>And another one is </p>\n\n<pre><code>Rails.application.routes.default_url_options[:host] = '???'\n</code></pre>\n\n<p>This goes in each environment file - <code>development.rb</code>, <code>test.rb</code> and <code>production.rb</code> (and more if you have them) with the corresponding hostname in each one</p>\n\n<p><a href=\"https://code.i-harness.com/en/q/11dfdfb\" rel=\"nofollow noreferrer\"><strong>Based Link</strong></a></p>\n\n<p>Hope it will help</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8467744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196da9e95c84ab9dec7cdae8353c2cad?s=128&d=identicon&r=PG&f=1", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/8467744/random-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1518089573, "creation_date": 1518089573, "answer_id": 48684488, "question_id": 48670396, "link": "https://stackoverflow.com/questions/48670396/rake-task-and-action-mailer-default-url-options/48684488#48684488", "title": "rake task and action_mailer.default_url_options", "body": "<p>solved with this line added to rake task. based on <a href=\"https://stackoverflow.com/users/4172515/fool-dev\">fool-dev's</a> answer</p>\n\n<pre><code>Rails.application.routes.default_url_options = Rails.application.config.action_mailer.default_url_options\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8467744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196da9e95c84ab9dec7cdae8353c2cad?s=128&d=identicon&r=PG&f=1", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/8467744/random-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518090384, "creation_date": 1518026109, "last_edit_date": 1518085703, "question_id": 48670396, "link": "https://stackoverflow.com/questions/48670396/rake-task-and-action-mailer-default-url-options", "title": "rake task and action_mailer.default_url_options", "body": "<p>When I try to use ActionMailer from rake task I'm getting this error:</p>\n\n<blockquote>\n  <p>ActionView::Template::Error: Missing host to link to! Please provide the :host parameter, <code>set default_url_options[:host]</code>, or <code>set :only_path</code> to true</p>\n</blockquote>\n\n<p>In my <code>development.rb</code> I have the following line: </p>\n\n<pre><code>config.action_mailer.default_url_options = { :host =&gt; 'localhost:3000' }\n</code></pre>\n\n<p>Moreover, if I put in <code>development.rb</code> this:</p>\n\n<pre><code>config.action_mailer.default_url_options[:host] = 'localhost:3000'\n</code></pre>\n\n<p>rake task works fine, but server crashes with this:</p>\n\n<blockquote>\n  <p>config/environments/development.rb:20:in block in ': undefined method []=' for nil:NilClass (NoMethodError)</p>\n</blockquote>\n\n<p>If I do this:</p>\n\n<pre><code>config.action_mailer.default_url_options = {}\nconfig.action_mailer.default_url_options[:host] = 'localhost:3000\n</code></pre>\n\n<p>rake task doesn't work again.</p>\n\n<p>I'm confused, any suggestions?</p>\n\n<p><strong>UPD</strong>\ni don't think that code will help, but here it is, it's that simple:</p>\n\n<p>rake task:</p>\n\n<pre><code> task :send_newsletter =&gt; :environment do\n    Receiver.all.each { |receiver|\n      NewsletterMailer.newsletter(receiver).deliver\n    }\n  end\n</code></pre>\n\n<p>mailer:</p>\n\n<pre><code>  def newsletter(receiver)\n    @receiver = receiver\n\n    mail(to: receiver.email, subject: \"newsletter\") do |format|\n          format.html \n    end\n  end\n</code></pre>\n\n<p>and the view with some <code>link_to xxx_url</code> lines, apparently which causing the error</p>\n\n<p>ruby version 2.4.1</p>\n\n<p>rails 5.1.3</p>\n\n<p>rake 12.0.0 (but also tried 12.3.0 with no difference)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "passenger", "multi-tenant"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518025024, "post_id": 48669947, "comment_id": 84337806, "body": "If you have wildly different runtime environments you may want to have a head-end server that dispatches different paths to distinct instances (virtual machines) that handle each application. Having one server with multiple versions of Ruby, multiple applications, can get really messy, especially when some versions of Ruby require older system dependencies, others newer, etc. I&#39;ve found Nginx at the top-level and Apache + Passenger on the second layer to work quite well, as Nginx is very lean and efficient at dispatching and delegating."}, {"owner": {"reputation": 127, "user_id": 6395417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/494e843611661e627f72af895828b80f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Harper", "link": "https://stackoverflow.com/users/6395417/s-harper"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518025436, "post_id": 48669947, "comment_id": 84338039, "body": "Does this sound like what you are talking about?  <a href=\"https://www.digitalocean.com/community/tutorials/how-to-configure-nginx-as-a-web-server-and-reverse-proxy-for-apache-on-one-ubuntu-16-04-server\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518025522, "post_id": 48669947, "comment_id": 84338103, "body": "That&#39;s exactly the principle, yes. Apache + Passenger is a lot more pleasant than Nginx for the reason that Apache has compiled module support and Nginx requires recompiling for non-standard extensions, something that&#39;s a huge hassle. A mixed environment means you get the simplicity of Apache&#39;s modules and the performance of Nginx at the top-level."}, {"owner": {"reputation": 127, "user_id": 6395417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/494e843611661e627f72af895828b80f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Harper", "link": "https://stackoverflow.com/users/6395417/s-harper"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518025932, "post_id": 48669947, "comment_id": 84338356, "body": "Fantastic, thanks!  I&#39;ll play around and see what I can do."}, {"owner": {"reputation": 127, "user_id": 6395417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/494e843611661e627f72af895828b80f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Harper", "link": "https://stackoverflow.com/users/6395417/s-harper"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1518042024, "post_id": 48669947, "comment_id": 84346948, "body": "I added an answer with my best attempts.  Seems like I need to slow down and gain a LOT more experience with Nginx and Apache.  The further down this rabbit hole I go, the more confused I get, haha.  But from a high-level, this seems to be what I want to accomplish."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518042510, "post_id": 48669947, "comment_id": 84347141, "body": "Good job. They might seem unfamiliar, if not downright confusing at first, but once you get the fundamentals under your belt you&#39;ll find these two tools will serve you well for years to come in a variety of situations."}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 6395417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/494e843611661e627f72af895828b80f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Harper", "link": "https://stackoverflow.com/users/6395417/s-harper"}, "is_accepted": true, "score": 3, "last_activity_date": 1518150794, "last_edit_date": 1518150794, "creation_date": 1518041251, "answer_id": 48674079, "question_id": 48669947, "link": "https://stackoverflow.com/questions/48669947/multitenancy-passenger-rails-multiple-apps-different-versions-same-domain/48674079#48674079", "title": "Multitenancy Passenger Rails Multiple Apps Different Versions Same Domain", "body": "<p>ZOMG it works!  So a big thanks to <a href=\"https://stackoverflow.com/users/87189/tadman\">tadman</a> for suggesting that I use Nginx as a reverse proxy server.  That is, one Nginx serves individual Apache processes for each app.  I am able to go to mywebsite.com and get the main app.  I go to mywebsite.com/subapp and get my second app (same Ruby/Rails version as the main one).  I can go to mywebsite.com/mea and get a third app (that has a different Ruby and Rails version than the first two!).  </p>\n\n<p>Part of this is possible because both <a href=\"https://www.phusionpassenger.com/library/config/nginx/reference/\" rel=\"nofollow noreferrer\">Nginx</a> and <a href=\"https://www.phusionpassenger.com/library/config/apache/reference/\" rel=\"nofollow noreferrer\">Apache</a> have a Passenger component that you can install, giving you all sorts of Directives you can use to specify what kind of app each url should serve up (passenger_ruby lets you tell Nginx which ruby interpreter to use). I've never seen documentation as comprehensive and beautiful as on Phusion's website.</p>\n\n<p>Figuring this out was fun.  Here is my setup so that you can see what I did. And please let me know if there's anything I could do better.  </p>\n\n<p>Nginx config:\n/etc/nginx/sites-enabled/apache</p>\n\n<pre><code>server {\n    listen 80;\n    server_name mywebsite.com www.mywebsite.com;\n\n    passenger_enabled on;\n\n    location / {\n        passenger_ruby /usr/local/rvm/gems/ruby-2.3.4/wrappers/ruby;\n        proxy_pass http://my_website_ip:8080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location /subapp {\n        passenger_ruby /usr/local/rvm/gems/ruby-2.3.4/wrappers/ruby;\n        proxy_pass http://my_website_ip:8081;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location /mea {\n        passenger_ruby /usr/local/rvm/gems/ruby-2.5.0/wrappers/ruby;\n        proxy_pass http://my_website_ip:8082;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>\n\n<p>My Ports file listens for the ports served by Nginx:</p>\n\n<p>/etc/apache2/ports.conf</p>\n\n<pre><code># If you just change the port or add more ports here, you will likely also\n# have to change the VirtualHost statement in\n# /etc/apache2/sites-enabled/000-default.conf\n\nListen 8080\nListen 8081\nListen 8082\n\n&lt;IfModule ssl_module&gt;\n    Listen 443\n&lt;/IfModule&gt;\n\n&lt;IfModule mod_gnutls.c&gt;\n    Listen 443\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>My Apache VirtualHost definitions.</p>\n\n<p>/etc/apache2/sites-enabled/login_app.conf</p>\n\n<pre><code>&lt;VirtualHost *:8080&gt;\n  ServerName mywebsite.com\n\n  # Tell Apache and Passenger where your app's 'public' directory is\n  DocumentRoot /var/www/login_app/code/public\n\n  PassengerRuby /usr/local/rvm/gems/ruby-2.3.4/wrappers/ruby\n\n  # Relax Apache security settings\n  &lt;Directory /var/www/login_app/code/public&gt;\n    Allow from all\n    Options -MultiViews\n    # Uncomment this if you're on Apache &gt;= 2.4:\n    Require all granted\n  &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:8081&gt;\n  ServerName mywebsite.com\n\n  # Tell Apache and Passenger where your app's 'public' directory is\n  DocumentRoot /var/www/second_app/code/public\n\n  PassengerRuby /usr/local/rvm/gems/ruby-2.3.4/wrappers/ruby\n\n  # Adding a subapp to the base url\n  Alias /subapp /var/www/second_app/code/public\n  &lt;Location /subapp&gt;\n      PassengerBaseURI /subapp\n      PassengerAppRoot /var/www/second_app/code\n  &lt;/Location&gt;\n\n  # Relax Apache security settings\n  &lt;Directory /var/www/second_app/code/public&gt;\n    Allow from all\n    Options -MultiViews\n    # Uncomment this if you're on Apache &gt;= 2.4:\n    Require all granted\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:8082&gt;\n  ServerName mywebsite.com\n\n  # Tell Apache and Passenger where your app's 'public' directory is\n  DocumentRoot /var/www/third_app/code/public\n\n  PassengerRuby /usr/local/rvm/gems/ruby-2.5.0/wrappers/ruby\n\n  # Adding a subapp to the base url\n  Alias /mea /var/www/third_app/code/public\n  &lt;Location /mea&gt;\n      PassengerBaseURI /mea\n      PassengerAppRoot /var/www/third_app/code\n  &lt;/Location&gt;\n\n  # Relax Apache security settings\n  &lt;Directory /var/www/third_app/code/public&gt;\n    Allow from all\n    Options -MultiViews\n    # Uncomment this if you're on Apache &gt;= 2.4:\n    Require all granted\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>And the processes produced, from the command line: <code>passenger-memory-stats</code></p>\n\n<pre><code>Version: 5.2.0\nDate   : 2018-02-09 03:22:39 +0000\n\n--------- Apache processes ----------\nPID    PPID  VMSize    Private  Name\n-------------------------------------\n             148.9 MB  0.4 MB   /usr/sbin/apache2 -k start\n             813.3 MB  3.1 MB   /usr/sbin/apache2 -k start\n             557.3 MB  3.2 MB   /usr/sbin/apache2 -k start\n### Processes: 3\n### Total private dirty RSS: 6.74 MB\n\n\n---------- Nginx processes -----------\nPID    PPID   VMSize    Private  Name\n--------------------------------------\n              174.8 MB  0.7 MB   nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\n              174.8 MB  0.8 MB   nginx: worker process\n### Processes: 2\n### Total private dirty RSS: 1.57 MB\n\n\n----- Passenger processes -----\nPID    VMSize    Private  Name\n-------------------------------\n       379.5 MB  4.7 MB   Passenger watchdog\n       666.2 MB  7.1 MB   Passenger core\n       378.9 MB  4.2 MB   Passenger watchdog\n       662.5 MB  5.5 MB   Passenger core\n       318.0 MB  63.0 MB  Passenger RubyApp: /var/www/login_app/code (production)\n       314.5 MB  60.3 MB  Passenger RubyApp: /var/www/third_app/code (production)\n       315.7 MB  61.4 MB  Passenger RubyApp: /var/www/second_app/code (production)\n### Processes: 7\n### Total private dirty RSS: 206.14 MB\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 6395417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/494e843611661e627f72af895828b80f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Harper", "link": "https://stackoverflow.com/users/6395417/s-harper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 1, "accepted_answer_id": 48674079, "answer_count": 1, "score": 1, "last_activity_date": 1558926496, "creation_date": 1518024640, "last_edit_date": 1518025129, "question_id": 48669947, "link": "https://stackoverflow.com/questions/48669947/multitenancy-passenger-rails-multiple-apps-different-versions-same-domain", "title": "Multitenancy Passenger Rails Multiple Apps Different Versions Same Domain", "body": "<p>I have been studying Ruby on Rails for just over a month.  I have deployed an app to a production VPS and am getting comfortable with Ruby/Rails in general. I am now trying to learn and build apps in one of the more recent Rails versions. Since multiple versions of Ruby/Rails is a commonplace concept among Rails developers, I figure I should play around with coding in different versions and maintaining those apps in a production environment.</p>\n\n<p>It seems like from my googling and stackoverflow searches that what I am trying to do is not common.  However, it forms the foundation for everything I want to do/learn about Rails and Passenger/Apache on my server (based on above goals).  That is, hosting multiple Rails applications under the same domain name, some being the same ruby/rails version and others a different version.  So:</p>\n\n<p>mywebsite.com &lt;--- Ruby 2.3.4 / Rails 4.2.5</p>\n\n<p>mywebsite.com/profile &lt;--- a separate app: Ruby 2.3.4 / Rails 4.2.5</p>\n\n<p>mywebsite.com/cool-app &lt;--- a separate app using the latest and greatest features: Ruby 2.5.0 / Rails 5.1.4</p>\n\n<p>When I search stackoverflow for \"multitenancy rails passenger\", there are exactly 0 results.  There is also this link:\n<a href=\"https://www.phusionpassenger.com/library/deploy/apache/\" rel=\"nofollow noreferrer\">https://www.phusionpassenger.com/library/deploy/apache/</a></p>\n\n<p>Which has an article called \"Deploying multiple apps on a single server (multitenancy)\", but it doesn't exist yet and says: \"to-do\"! I've been trying to stumble my way through it, but it seems like there is too much I don't understand to just copy and paste someone else's code and get it to work.  </p>\n\n<p>It seems like part of the trick to getting these things to work is with different VirtualHost setups.  </p>\n\n<p>Here is what I have tried for the above applications:</p>\n\n<p>mywebsite.com (main site):</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n  ServerName mywebsite.com\n\n  # Tell Apache and Passenger where your app's 'public' directory is\n  DocumentRoot /var/www/login_app/code/public\n\n  PassengerRuby /usr/local/rvm/gems/ruby-2.3.4/wrappers/ruby\n\n  # Relax Apache security settings\n  &lt;Directory /var/www/login_app/code/public&gt;\n    Allow from all\n    Options -MultiViews\n    # Uncomment this if you're on Apache &gt;= 2.4:\n    Require all granted\n  &lt;/Directory&gt;\n\n  &lt;Directory /var/www/login_app/code/public/profile&gt;\n    Allow from all\n    Options -MultiViews\n    # Uncomment this if you're on Apache &gt;= 2.4:\n    Require all granted\n  &lt;/Directory&gt;\n\n  PassengerBaseURI /profile\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>mywebsite.com/profile (same Ruby/Rails versions as main site)</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n  ServerName mywebsite.com\n\n  # Tell Apache and Passenger where your app's 'public' directory is\n  DocumentRoot /var/www/test_app/code/public\n\n  PassengerAppRoot /var/www/test_app/code\n  PassengerRuby /usr/local/rvm/gems/ruby-2.3.4/wrappers/ruby\n  # PassengerBaseURI /profile\n\n  # Relax Apache security settings\n  &lt;Directory /var/www/test_app/code/public&gt;\n    PassengerEnabled on\n    Allow from all\n    Options -MultiViews\n    # Uncomment this if you're on Apache &gt;= 2.4:\n    Require all granted\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Haven't even attempted to do a VirtualHost file for the 3rd app.  I would assume that the PassengerRuby field would tell Passenger to use the correct/different Ruby interpreter. But again, I can't find anyone who does this, and I especially can't find any explanations for what is being done.  When I find something even remotely close, it was from 6 years ago and the code is obsolete because Passenger supposedly handles this pretty easily now (but where are the examples?!).</p>\n\n<p>It seems like when I go to mywebsite.com/profile, the main site app is still handling the route, as it logs to main_site_path/log/production.log (not the second app's log).  </p>\n\n<p>Any help would be appreciated, but since I know I should be specific, here are some specific things it might help me to know?:\nShould there be a Passenger process running for each app when I do passenger-memory-stats, or just the main one?<br>\nHow do I correctly define that /profile off my main domain should be handled by a different Rails App (different VirtualHost if applicable)?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "actionpack"], "comments": [{"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1518026095, "post_id": 48669333, "comment_id": 84338460, "body": "Have you looked at <a href=\"https://stackoverflow.com/questions/21850553/editing-multiple-rows-in-a-table-updating-multiple-records\">this questions answer</a>?"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1518026162, "post_id": 48669333, "comment_id": 84338506, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/21850553/editing-multiple-rows-in-a-table-updating-multiple-records\">Editing multiple rows in a table (updating multiple records)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2282123, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d8c23a89f25f3e886418b300ef9459c5?s=128&d=identicon&r=PG", "display_name": "Abhishek Bhatta", "link": "https://stackoverflow.com/users/2282123/abhishek-bhatta"}, "edited": false, "score": 0, "creation_date": 1518024267, "post_id": 48669501, "comment_id": 84337383, "body": "I do not want to submit the form every time for every records I have changed. This is creating unwanted forms for every record."}], "tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": false, "score": 0, "last_activity_date": 1518023257, "creation_date": 1518023257, "answer_id": 48669501, "question_id": 48669333, "link": "https://stackoverflow.com/questions/48669333/how-to-generate-a-form-that-edit-and-creates-all-the-records-of-a-model-in-ruby/48669501#48669501", "title": "How to generate a form that edit and creates all the records of a model in Ruby on Rails?", "body": "<p>You'll want to iterate over all our records and then render a form for each record in itself. Here is how you might do that:</p>\n\n<pre><code># resource/index.html.erb\n// all existing records\n&lt;%= render partial: \"form\", collection: @all_resource_records, as: :resource %&gt;\n\n// new record\n&lt;%= render partial: \"form\", locals: { resource: ResourceModel.new } %&gt;\n</code></pre>\n\n<p>-</p>\n\n<pre><code># resource/_form.erb\n&lt;%= form_for resource do |f| %&gt;\n  // ... form fields ...\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 2282123, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d8c23a89f25f3e886418b300ef9459c5?s=128&d=identicon&r=PG", "display_name": "Abhishek Bhatta", "link": "https://stackoverflow.com/users/2282123/abhishek-bhatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1518027141, "creation_date": 1518022785, "last_edit_date": 1518027141, "question_id": 48669333, "link": "https://stackoverflow.com/questions/48669333/how-to-generate-a-form-that-edit-and-creates-all-the-records-of-a-model-in-ruby", "title": "How to generate a form that edit and creates all the records of a model in Ruby on Rails?", "body": "<p>I have a model that stores template data and is independent with other models. I want to construct a form where I can view all the records of that model, edit them, delete them and also create a new records. Since rails form helper requires a record, is there any way to achieve my requirement or do I have to write the form manually and handle the deleted records and new records with js ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "ruby-on-rails-3", "heroku"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8556255"}, "edited": false, "score": 0, "creation_date": 1518021497, "post_id": 48668649, "comment_id": 84335592, "body": "I can&#39;t find anything there other than the bottom where it just says error and some other stuff I don&#39;t understand"}, {"owner": {"reputation": 21, "user_id": 5211865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db151180282d1292451231f61aa25bc2?s=128&d=identicon&r=PG&f=1", "display_name": "Medion", "link": "https://stackoverflow.com/users/5211865/medion"}, "edited": false, "score": 0, "creation_date": 1518044195, "post_id": 48668649, "comment_id": 84347848, "body": "Include gem \u2018pg\u2019 in your gemfile. You required postgresql as an adapter to database but you didn\u2019t include it in your gemfile."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8556255"}, "edited": false, "score": 0, "creation_date": 1518044241, "post_id": 48668649, "comment_id": 84347868, "body": "I have it int here, its in the production group"}, {"owner": {"reputation": 21, "user_id": 5211865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db151180282d1292451231f61aa25bc2?s=128&d=identicon&r=PG&f=1", "display_name": "Medion", "link": "https://stackoverflow.com/users/5211865/medion"}, "edited": false, "score": 0, "creation_date": 1518044406, "post_id": 48668649, "comment_id": 84347922, "body": "Your error message says you don\u2019t have one. Maybe the version is wrong?"}], "tags": [], "owner": {"reputation": 21, "user_id": 5211865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db151180282d1292451231f61aa25bc2?s=128&d=identicon&r=PG&f=1", "display_name": "Medion", "link": "https://stackoverflow.com/users/5211865/medion"}, "is_accepted": false, "score": 0, "last_activity_date": 1518020738, "creation_date": 1518020738, "answer_id": 48668649, "question_id": 48668466, "link": "https://stackoverflow.com/questions/48668466/error-pushing-ruby-on-rails-to-heroku/48668649#48668649", "title": "Error pushing Ruby on Rails to heroku", "body": "<p>Have you tried the command <em>heroku logs</em> to print  output of rails server? You might find something useful to the problem you have.</p>\n"}, {"tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": true, "score": 0, "last_activity_date": 1518057367, "creation_date": 1518057367, "answer_id": 48676606, "question_id": 48668466, "link": "https://stackoverflow.com/questions/48668466/error-pushing-ruby-on-rails-to-heroku/48676606#48676606", "title": "Error pushing Ruby on Rails to heroku", "body": "<p>You must specify a specific pg version in your gemfile. If not, you will be using the latest available version (1.0.0). But this version is still not supported by Rails. Check here: <a href=\"https://github.com/rails/rails/issues/31673\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/31673</a></p>\n\n<p>Yous should use version 0.21</p>\n\n<pre><code>gem 'pg', '0.21'\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8556255"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 48676606, "answer_count": 2, "score": 0, "last_activity_date": 1518057367, "creation_date": 1518020207, "last_edit_date": 1518021022, "question_id": 48668466, "link": "https://stackoverflow.com/questions/48668466/error-pushing-ruby-on-rails-to-heroku", "title": "Error pushing Ruby on Rails to heroku", "body": "<p>I have added the pg and rails_12factor gem to my gemfile and tried to push my app to heroku but the website just says application error, I was able to do this successfully a few weeks ago by following what I think were the same steps. I have made a small test app just to recreate this error, here's the output when I try to push to heroku:</p>\n\n<pre><code>Counting objects: 3, done.\nDelta compression using up to 6 threads.\nCompressing objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 336 bytes | 336.00 KiB/s, done.\nTotal 3 (delta 2), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote:\nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.3.4\nremote: ###### WARNING:\nremote:        Removing `Gemfile.lock` because it was generated on Windows.\nremote:        Bundler will do a full resolve so native gems are handled \nproperly.\nremote:        This may result in unexpected gem versions being used in your \napp.\nremote:        In rare occasions Bundler may not be able to resolve your \ndependencies at all.\nremote:        https://devcenter.heroku.com/articles/bundler-windows-gemfile\nremote:\nremote: -----&gt; Installing dependencies using bundler 1.15.2\nremote:        Running: bundle install --without development:test --path \nvendor/bundle --binstubs vendor/bundle/bin -j4\nremote:        The dependency tzinfo-data (&gt;= 0) will be unused by any of \nthe platforms Bundler is installing for. Bundler is installing for ruby but \nthe dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To \nadd those platforms to the bundle, run `bundle lock --add-platform x86-\nmingw32 x86-mswin32 x64-mingw32 java`.\nremote:        Fetching gem metadata from https://rubygems.org/..........\nremote:        Fetching version metadata from https://rubygems.org/..\nremote:        Fetching dependency metadata from https://rubygems.org/.     \nremote:        Resolving dependencies...\nremote:        Using rake 12.3.0\nremote:        Using concurrent-ruby 1.0.5\nremote:        Using minitest 5.11.3\nremote:        Using thread_safe 0.3.6\nremote:        Using builder 3.2.3\nremote:        Using erubi 1.7.0\nremote:        Using mini_portile2 2.3.0\nremote:        Using crass 1.0.3\nremote:        Using rack 2.0.4\nremote:        Using nio4r 2.2.0\nremote:        Using websocket-extensions 0.1.3\nremote:        Using mini_mime 1.0.0\nremote:        Using arel 8.0.0\nremote:        Using bundler 1.15.2\nremote:        Using coffee-script-source 1.12.2\nremote:        Using execjs 2.7.0\nremote:        Using method_source 0.9.0\nremote:        Using thor 0.20.0\nremote:        Using ffi 1.9.21\nremote:        Using multi_json 1.13.1\nremote:        Fetching pg 0.17.1\nremote:        Using puma 3.11.2\nremote:        Using rails_serve_static_assets 0.0.5\nremote:        Using rails_stdout_logging 0.0.5\nremote:        Using rb-fsevent 0.10.2\nremote:        Using tilt 2.0.8\nremote:        Using turbolinks-source 5.1.0\nremote:        Using i18n 0.9.3\nremote:        Using tzinfo 1.2.5\nremote:        Using nokogiri 1.8.2\nremote:        Using websocket-driver 0.6.5\nremote:        Using rack-test 0.8.2\nremote:        Using sprockets 3.7.1\nremote:        Using mail 2.7.0\nremote:        Using uglifier 4.1.5\nremote:        Using coffee-script 2.4.1\nremote:        Using rb-inotify 0.9.10\nremote:        Fetching rails_12factor 0.0.2\nremote:        Using turbolinks 5.1.0\nremote:        Using activesupport 5.1.4\nremote:        Using loofah 2.1.1\nremote:        Using sass-listen 4.0.0\nremote:        Using rails-dom-testing 2.0.3\nremote:        Using globalid 0.4.1\nremote:        Using activemodel 5.1.4\nremote:        Using jbuilder 2.7.0\nremote:        Using rails-html-sanitizer 1.0.3\nremote:        Using sass 3.5.5\nremote:        Using activejob 5.1.4\nremote:        Using activerecord 5.1.4\nremote:        Using actionview 5.1.4\nremote:        Using actionpack 5.1.4\nremote:        Using actioncable 5.1.4\nremote:        Using actionmailer 5.1.4\nremote:        Using railties 5.1.4\nremote:        Using sprockets-rails 3.2.1\nremote:        Using coffee-rails 4.2.2\nremote:        Using rails 5.1.4\nremote:        Using sass-rails 5.0.7\n\nremote:        Installing pg 0.17.1 with native extensions\nremote:        Installing rails_12factor 0.0.2\nremote:        Bundle complete! 15 Gemfile dependencies, 59 gems now installed.\nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\n\nremote:        Bundle completed (9.84s)\nremote:        Cleaning up the bundler cache.\nremote:        Removing pg (1.0.0)\nremote:        Removing rails_12factor (0.0.3)\nremote:        The latest bundler is 1.16.1, but you are currently running 1.15.2.\nremote:        To update, run `gem install bundler`\nremote: -----&gt; Installing node-v6.11.1-linux-x64\nremote: -----&gt; Detecting rake tasks\nremote: -----&gt; Preparing app for Rails asset pipeline\nremote:        Running: rake assets:precompile\nremote:        Yarn executable was not detected in the system.\nremote:        Download Yarn at https://yarnpkg.com/en/docs/install\nremote:        Asset precompilation completed (1.55s)\nremote:        Cleaning assets\nremote:        Running: rake assets:clean\nremote:\nremote: ###### WARNING:\nremote:        Removing `Gemfile.lock` because it was generated on Windows.\nremote:        Bundler will do a full resolve so native gems are handled properly.\nremote:        This may result in unexpected gem versions being used in your app.\nremote:        In rare occasions Bundler may not be able to resolve your dependencies at all.\nremote:        https://devcenter.heroku.com/articles/bundler-windows-gemfile\nremote:\nremote: ###### WARNING:\nremote:        No Procfile detected, using the default web server.\nremote:        We recommend explicitly declaring how to boot your server process via a Procfile.\nremote:        https://devcenter.heroku.com/articles/ruby-default-web-server\nremote:\nremote: -----&gt; Discovering process types\nremote:        Procfile declares types     -&gt; (none)\nremote:        Default types for buildpack -&gt; console, rake, web, worker\nremote:\nremote: -----&gt; Compressing...\nremote:        Done: 37.4M\nremote: -----&gt; Launching...\nremote:        Released v9\nremote:        https://coolguygear.herokuapp.com/ deployed to Heroku\nremote:\nremote: Verifying deploy... done.\nTo https://git.heroku.com/coolguygear.git\n   69e3355..ce67809  master -&gt; master\n\nC:\\Users\\Jared\\testapp&gt;\n</code></pre>\n\n<p>Heres the Heroku Logs:</p>\n\n<pre><code>2018-02-07T16:22:53.750068+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=coolguygear.herokuapp.com request_id=12882767-fed0-4354-b265-1d06931b22eb fwd=\"100.14.28.68\" dyno= connect= service= status=503 bytes= protocol=http\n2018-02-07T16:25:18.468191+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=HEAD path=\"/\" host=coolguygear.herokuapp.com request_id=09ea1016-ba0c-4d77-8a71-92cd0388874d fwd=\"34.229.222.142\" dyno= connect= service= status=503 bytes= protocol=https\n2018-02-07T16:27:22.000000+00:00 app[api]: Build started by user pagaley12@outlook.com\n2018-02-07T16:27:43.618675+00:00 heroku[web.1]: State changed from crashed to starting\n2018-02-07T16:27:43.286746+00:00 app[api]: Deploy 32766c38 by user pagaley12@outlook.com\n2018-02-07T16:27:43.286746+00:00 app[api]: Release v11 created by user pagaley12@outlook.com\n2018-02-07T16:27:22.000000+00:00 app[api]: Build succeeded\n2018-02-07T16:27:47.302392+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 24230 -e production`\n2018-02-07T16:27:52.402259+00:00 heroku[web.1]: Process exited with status 1\n2018-02-07T16:27:52.283395+00:00 app[web.1]: =&gt; Booting Puma\n2018-02-07T16:27:52.283421+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2018-02-07T16:27:52.283420+00:00 app[web.1]: =&gt; Rails 5.1.4 application starting in production\n2018-02-07T16:27:52.283486+00:00 app[web.1]: /app/vendor/bundle/ruby/2.3.0/gems/activerecord-5.1.4/lib/active_record/connection_adapters/connection_specification.rb:188:in `rescue in spec': Specified 'postgresql' for database adapter, but the gem is not loaded. Add `gem 'pg'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord). (Gem::LoadError)\n2018-02-07T16:27:52.283509+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activerecord-5.1.4/lib/active_record/connection_adapters/connection_specification.rb:185:in `spec'\n2018-02-07T16:27:52.283423+00:00 app[web.1]: Exiting\n2018-02-07T16:27:52.283534+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activerecord-5.1.4/lib/active_record/connection_handling.rb:58:in `establish_connection'\n2018-02-07T16:27:52.283527+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activerecord-5.1.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:880:in `establish_connection'\n2018-02-07T16:27:52.283537+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `instance_eval'\n2018-02-07T16:27:52.283536+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activerecord-5.1.4/lib/active_record/railtie.rb:124:in `block (2 levels) in &lt;class:Railtie&gt;'\n2018-02-07T16:27:52.283541+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:60:in `with_execution_control'\n2018-02-07T16:27:52.283544+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:50:in `block in run_load_hooks'\n2018-02-07T16:27:52.283539+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `block in execute_hook'\n2018-02-07T16:27:52.283542+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:65:in `execute_hook'\n2018-02-07T16:27:52.283546+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:49:in `each'\n2018-02-07T16:27:52.283552+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activerecord-5.1.4/lib/active_record/base.rb:326:in `&lt;module:ActiveRecord&gt;'\n2018-02-07T16:27:52.283550+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:49:in `run_load_hooks'\n2018-02-07T16:27:52.283555+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n2018-02-07T16:27:52.283557+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `block in require'\n2018-02-07T16:27:52.283553+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activerecord-5.1.4/lib/active_record/base.rb:25:in `&lt;top (required)&gt;'\n2018-02-07T16:27:52.283561+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:258:in `load_dependency'\n2018-02-07T16:27:52.283562+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n2018-02-07T16:27:52.283564+00:00 app[web.1]:    from /app/app/models/application_record.rb:1:in `&lt;top (required)&gt;'\n2018-02-07T16:27:52.283566+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n2018-02-07T16:27:52.283570+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `block in require'\n2018-02-07T16:27:52.283574+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n2018-02-07T16:27:52.283572+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:258:in `load_dependency'\n2018-02-07T16:27:52.283583+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies/interlock.rb:12:in `block in loading'\n2018-02-07T16:27:52.283577+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:379:in `block in require_or_load'\n2018-02-07T16:27:52.283579+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:36:in `block in load_interlock'\n2018-02-07T16:27:52.283587+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/concurrency/share_lock.rb:149:in `exclusive'\n2018-02-07T16:27:52.283592+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:36:in `load_interlock'\n2018-02-07T16:27:52.283590+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies/interlock.rb:11:in `loading'\n2018-02-07T16:27:52.283596+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:357:in `require_or_load'\n2018-02-07T16:27:52.283599+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:335:in `depend_on'\n2018-02-07T16:27:52.283605+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/engine.rb:476:in `block (2 levels) in eager_load!'\n2018-02-07T16:27:52.283603+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:251:in `require_dependency'\n2018-02-07T16:27:52.283609+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/engine.rb:475:in `each'\n2018-02-07T16:27:52.283628+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/engine.rb:475:in `block in eager_load!'\n2018-02-07T16:27:52.283635+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/application/finisher.rb:67:in `each'\n2018-02-07T16:27:52.283630+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/engine.rb:473:in `each'\n2018-02-07T16:27:52.283631+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/engine.rb:473:in `eager_load!'\n2018-02-07T16:27:52.283633+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/engine.rb:354:in `eager_load!'\n2018-02-07T16:27:52.283638+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/initializable.rb:30:in `instance_exec'\n2018-02-07T16:27:52.283637+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/application/finisher.rb:67:in `block in &lt;module:Finisher&gt;'\n2018-02-07T16:27:52.283644+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/initializable.rb:59:in `block in run_initializers'\n2018-02-07T16:27:52.283645+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\n2018-02-07T16:27:52.283642+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/initializable.rb:30:in `run'\n2018-02-07T16:27:52.283647+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n2018-02-07T16:27:52.283649+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\n2018-02-07T16:27:52.283652+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\n2018-02-07T16:27:52.283654+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `each'\n2018-02-07T16:27:52.283660+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\n2018-02-07T16:27:52.283663+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'\n2018-02-07T16:27:52.283656+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `call'\n2018-02-07T16:27:52.283669+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/application.rb:353:in `initialize!'\n2018-02-07T16:27:52.283661+00:00 app[web.1]:    from /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'\n2018-02-07T16:27:52.283667+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/initializable.rb:58:in `run_initializers'\n2018-02-07T16:27:52.283672+00:00 app[web.1]:    from /app/config/environment.rb:5:in `&lt;top (required)&gt;'\n2018-02-07T16:27:52.283682+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/builder.rb:55:in `instance_eval'\n2018-02-07T16:27:52.283674+00:00 app[web.1]:    from config.ru:3:in `require_relative'\n2018-02-07T16:27:52.283688+00:00 app[web.1]:    from config.ru:in `new'\n2018-02-07T16:27:52.283678+00:00 app[web.1]:    from config.ru:3:in `block in &lt;main&gt;'\n2018-02-07T16:27:52.283695+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/builder.rb:49:in `eval'\n2018-02-07T16:27:52.283684+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/builder.rb:55:in `initialize'\n2018-02-07T16:27:52.283691+00:00 app[web.1]:    from config.ru:in `&lt;main&gt;'\n2018-02-07T16:27:52.283741+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/server.rb:319:in `build_app_and_options_from_config'\n2018-02-07T16:27:52.283746+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/server.rb:219:in `app'\n2018-02-07T16:27:52.283737+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/builder.rb:49:in `new_from_string'\n2018-02-07T16:27:52.283739+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/builder.rb:40:in `parse_file'\n2018-02-07T16:27:52.283748+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:24:in `app'\n2018-02-07T16:27:52.283750+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/server.rb:354:in `wrapped_app'\n2018-02-07T16:27:52.283752+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/rack-2.0.4/lib/rack/server.rb:283:in `start'\n2018-02-07T16:27:52.283755+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:44:in `start'\n2018-02-07T16:27:52.283763+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:130:in `tap'\n2018-02-07T16:27:52.283762+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:135:in `block in perform'\n2018-02-07T16:27:52.283837+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n2018-02-07T16:27:52.283838+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n2018-02-07T16:27:52.283767+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:130:in `perform'\n2018-02-07T16:27:52.283840+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n2018-02-07T16:27:52.283849+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/commands.rb:16:in `&lt;top (required)&gt;'\n2018-02-07T16:27:52.283845+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/command/base.rb:63:in `perform'\n2018-02-07T16:27:52.283847+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/command.rb:44:in `invoke'\n2018-02-07T16:27:52.283851+00:00 app[web.1]:    from bin/rails:4:in `require'\n2018-02-07T16:27:52.283852+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2018-02-07T16:27:52.418583+00:00 heroku[web.1]: State changed from starting to crashed\n2018-02-07T16:27:55.488508+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=coolguygear.herokuapp.com request_id=1b71ed89-fe54-437d-b13d-082c848c328c fwd=\"100.14.28.68\" dyno= connect= service= status=503 bytes= protocol=http\n2018-02-07T16:27:55.831207+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=coolguygear.herokuapp.com request_id=cc0e8bf6-f754-4ba2-be25-4e924afe0b71 fwd=\"100.14.28.68\" dyno= connect= service= status=503 bytes= protocol=http\n2018-02-07T16:27:56.485232+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=coolguygear.herokuapp.com request_id=e2530067-459c-4fea-a62e-7029fef88952 fwd=\"100.14.28.68\" dyno= connect= service= status=503 bytes= protocol=http\n2018-02-07T16:27:56.568374+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=coolguygear.herokuapp.com request_id=4d909fee-121c-4086-9060-5abb0531f9bd fwd=\"100.14.28.68\" dyno= connect= service= status=503 bytes= protocol=http\n2018-02-07T16:27:57.266204+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=coolguygear.herokuapp.com request_id=77ba5529-63bd-4257-9ee1-106c3f34d353 fwd=\"100.14.28.68\" dyno= connect= service= status=503 bytes= protocol=http\n2018-02-07T16:27:57.348456+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=coolguygear.herokuapp.com request_id=b4846660-d494-47c2-982a-626635621b69 fwd=\"100.14.28.68\" dyno= connect= service= status=503 bytes= protocol=http\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1518020088, "post_id": 48667697, "comment_id": 84334613, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5300493/convert-utc-to-local-time-in-rails-3\">Convert UTC to local time in Rails 3</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1518021489, "post_id": 48667697, "comment_id": 84335582, "body": "Rails has custom classes and methods for dealing with timezones, e.g. <a href=\"http://api.rubyonrails.org/v5.0/classes/ActiveSupport/TimeWithZone.html\" rel=\"nofollow noreferrer\"><code>TimeWithZone</code></a> and various <a href=\"http://edgeguides.rubyonrails.org/active_support_core_extensions.html#extensions-to-time\" rel=\"nofollow noreferrer\">extensions</a>. Within a Rails app, you should use those methods instead of the built-in ones."}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 5494294, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4oaf4Q9Q5jA/AAAAAAAAAAI/AAAAAAAAbkA/_-1VuNhGeSg/photo.jpg?sz=128", "display_name": "Alex A", "link": "https://stackoverflow.com/users/5494294/alex-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1518018535, "creation_date": 1518018535, "answer_id": 48667922, "question_id": 48667697, "link": "https://stackoverflow.com/questions/48667697/what-is-the-reference-for-time-localtime/48667922#48667922", "title": "What is the reference for Time.localtime", "body": "<p>.localtime in your app will show your app's time. To display localtime to different users you will need to add some Javascript.\nThis answer might help you.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5267170/how-to-display-the-time-in-users-timezone\">How to display the time in user&#39;s timezone</a></p>\n"}, {"tags": [], "owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "is_accepted": true, "score": 2, "last_activity_date": 1518018769, "creation_date": 1518018769, "answer_id": 48667987, "question_id": 48667697, "link": "https://stackoverflow.com/questions/48667697/what-is-the-reference-for-time-localtime/48667987#48667987", "title": "What is the reference for Time.localtime", "body": "<p><code>localtime</code> will give you the time in the current time zone of the machine running the code.</p>\n\n<p>Apidock(localtime): for <a href=\"https://apidock.com/ruby/Time/localtime\" rel=\"nofollow noreferrer\">ruby</a>, <a href=\"https://apidock.com/rails/ActiveSupport/TimeWithZone/localtime\" rel=\"nofollow noreferrer\">ruby on rails</a></p>\n"}], "owner": {"reputation": 15, "user_id": 9054089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586c1710b9656e65ba408cf7f0294b71?s=128&d=identicon&r=PG&f=1", "display_name": "Prior Mabe", "link": "https://stackoverflow.com/users/9054089/prior-mabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 48667987, "answer_count": 2, "score": 1, "last_activity_date": 1518021250, "creation_date": 1518017885, "last_edit_date": 1518021250, "question_id": 48667697, "link": "https://stackoverflow.com/questions/48667697/what-is-the-reference-for-time-localtime", "title": "What is the reference for Time.localtime", "body": "<p>When using the <code>localtime</code> method on a UTC <code>Time</code> object, is the time returned the local time as specified in the app configuration or the local time of the user's location?</p>\n"}, {"tags": ["ruby", "cucumber"], "comments": [{"owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "edited": false, "score": 0, "creation_date": 1518155566, "post_id": 48666936, "comment_id": 84397553, "body": "I&#39;d ask this on the Cucumber mailing list, your more likely to get an official response there"}], "owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518015752, "creation_date": 1518015752, "question_id": 48666936, "link": "https://stackoverflow.com/questions/48666936/ruby-cucumber-running-using-cucumberruntimeconfig-run-officially-suppo", "title": "Ruby Cucumber - Running using Cucumber::Runtime(config).run! - &#39;Officially supported&#39;?", "body": "<p>I have a test farm I'm making that can run Cucumber tests and will take the results and write to a database.</p>\n\n<p>Instead of using backticks to run from the command line I'm considering this, which seemed to work rather well from an <code>irb</code> prompt:</p>\n\n<pre><code>config = {paths: ['.\\\\scenarios\\\\my.feature'], filters: [], tag_expressions: ['@open_print_pdf'],tag_limits: [], profiles: ['example'], require: []}\nCucumber::Runtime.new(Cucumber::Configuration.new(config)).run!\n</code></pre>\n\n<p>I like that I then get some objects that I can interrogate to write things I need to the db like:</p>\n\n<ul>\n<li>steps</li>\n<li>feature and scenario name</li>\n<li>etc.</li>\n</ul>\n\n<p>Before I considered this I was going to run using the JSON formatter, save the file, and then parse it, make it a hash and send to db.</p>\n\n<p>Is the only supported way to run it through the command line. I find it useful to programmatically run it so I have everything I need without needing to do needless IO.</p>\n\n<p>So, is running using <code>Cucumber::Runtime(config).run!</code> officially supported?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hmac", "ruby-hash"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1518015750, "post_id": 48666838, "comment_id": 84331465, "body": "codebases in local language is really weird. When is the <code>paiement</code> action triggered?"}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1518017054, "post_id": 48666838, "comment_id": 84332398, "body": "@apneadiving you can take a look at my edited post :)"}], "answers": [{"tags": [], "owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "is_accepted": false, "score": 0, "last_activity_date": 1518021838, "last_edit_date": 1518021838, "creation_date": 1518017274, "answer_id": 48667469, "question_id": 48666838, "link": "https://stackoverflow.com/questions/48666838/hash-message-rails/48667469#48667469", "title": "Hash message Rails", "body": "<p>Usually with HMAC signatures the keys are sorted alphabetically first prior to be signed. If you are iterating over a Hash key/value pairs then the iteration order is largely non-deterministic (or should at least be treated as such).</p>\n\n<p>Try sorting your keys first like:</p>\n\n<pre><code>msg.keys.sort.map{|k| \"#{k}=#{msg[k]}\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "edited": false, "score": 0, "creation_date": 1518020396, "post_id": 48668146, "comment_id": 84334824, "body": "Thanks Johan, but unfortunately it doesn&#39;t solve the problem either... :("}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1518019230, "creation_date": 1518019230, "answer_id": 48668146, "question_id": 48666838, "link": "https://stackoverflow.com/questions/48666838/hash-message-rails/48668146#48668146", "title": "Hash message Rails", "body": "<p>It seems you made a typo in collecting the data from your hash. You currently use:</p>\n\n<pre><code>msg.keys.map { |k,v| \"#{k}=#{v}\" }.join('&amp;')\n</code></pre>\n\n<p>but by calling <em>#keys</em> on the hash you'll get an array with only keys.</p>\n\n<p>I guess you meant to type</p>\n\n<pre><code>msg.map { |k,v| \"#{k}=#{v}\" }.join('&amp;')\n</code></pre>\n\n<p>otherwise you'll lose the values and <em>v</em> is always <code>nil</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "edited": false, "score": 0, "creation_date": 1518965838, "post_id": 48816334, "comment_id": 84709432, "body": "i&#39;ve tried with your code but it still doesn&#39;t work.. :("}], "tags": [], "owner": {"reputation": 79, "user_id": 2478563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/901870ee3344152d79a096356dce01d5?s=128&d=identicon&r=PG", "display_name": "Raffy", "link": "https://stackoverflow.com/users/2478563/raffy"}, "is_accepted": false, "score": 0, "last_activity_date": 1518729770, "last_edit_date": 1518729770, "creation_date": 1518729015, "answer_id": 48816334, "question_id": 48666838, "link": "https://stackoverflow.com/questions/48666838/hash-message-rails/48816334#48816334", "title": "Hash message Rails", "body": "<p>For the date I'm using</p>\n\n<pre><code> @date_time = Time.now.iso8601\n</code></pre>\n\n<p>To create Hmac:</p>\n\n<pre><code>bin_key = Array(keyTest).pack 'H*'\n@hmac = OpenSSL::HMAC.hexdigest(\"SHA512\", bin_key, data).upcase\n</code></pre>\n\n<p>Also your key needs to be activated after being generated.</p>\n"}], "owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1518729770, "creation_date": 1518015434, "last_edit_date": 1518017026, "question_id": 48666838, "link": "https://stackoverflow.com/questions/48666838/hash-message-rails", "title": "Hash message Rails", "body": "<p>I have issues linking my Rails app to Paybox (through a French bank). </p>\n\n<p>The technical support says that the problem could come from the hash message i'm sending to them (through a form). But they have no knowledge about Ruby so they can't guarantee anything. </p>\n\n<p>Maybe some of you will find something wrong?</p>\n\n<p>Here is the method:</p>\n\n<pre><code>def paiement\n    @commande = Commande.find_by(code: params[:id])\n\n    @confirmation_url = ENV['PBX_EFFECTUE'].gsub('CODE_COMMANDE', @commande.code)\n    @annulation_url = ENV['PBX_ANNULE'].gsub('CODE_COMMANDE', @commande.code)\n    @refus_url = ENV['PBX_REFUSE'].gsub('CODE_COMMANDE', @commande.code)\n\n    @current_time = Time.now.strftime('%FT%T%:z')\n\n    msg = {\n      PBX_SITE: \"#{ENV['PBX_SITE']}\",\n      PBX_RANG: \"#{ENV['PBX_RANG']}\",\n      PBX_IDENTIFIANT: \"#{ENV['PBX_IDENTIFIANT']}\",\n      PBX_TOTAL: \"#{@commande.total_price_centimes}\",\n      PBX_DEVISE: \"978\",\n      PBX_CMD: \"#{@commande.code}\",\n      PBX_PORTEUR: \"#{current_user.email}\",\n      PBX_REPONDRE_A: \"#{ENV['PBX_REPONDRE_A']}\",\n      PBX_RETOUR: \"#{ENV['PBX_RETOUR']}\",\n      PBX_EFFECTUE: \"#{@confirmation_url}\",\n      PBX_ANNULE: \"#{@annulation_url}\",\n      PBX_REFUSE: \"#{@refus_url}\",\n      PBX_HASH: \"SHA512\",\n      PBX_TIME: \"#{@current_time}\"\n    }\n\n    key = ENV['CLE_HMAC']\n    binKey = [key].pack('H*')\n\n    digest = OpenSSL::Digest.new('sha512')\n    @signature = OpenSSL::HMAC.hexdigest(digest, binKey, msg.keys.map{|k,v| \"#{k}=#{v}\"}.join('&amp;')).upcase\n    #binding.pry\n  end\n</code></pre>\n\n<p>The form:</p>\n\n<pre><code>&lt;form method=\"POST\" action=\"&lt;%= ENV['CREDIT_AGRICOLE_URL'] %&gt;\" id=\"paiement-form\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_SITE\" value=\"&lt;%= ENV['PBX_SITE'] %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_RANG\" value=\"&lt;%= ENV['PBX_RANG'] %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_IDENTIFIANT\" value=\"&lt;%= ENV['PBX_IDENTIFIANT'] %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_TOTAL\" value=\"&lt;%= @commande.total_price_centimes %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_DEVISE\" value=\"978\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_CMD\" value=\"&lt;%= @commande.code %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_PORTEUR\" value=\"&lt;%= ENV['PBX_PORTEUR'] %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_REPONDRE_A\" value=\"&lt;%= ENV['PBX_REPONDRE_A'] %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_RETOUR\" value=\"&lt;%= ENV['PBX_RETOUR'] %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_EFFECTUE\" value=\"&lt;%= @confirmation_url %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_ANNULE\" value=\"&lt;%= @annulation_url %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_REFUSE\" value=\"&lt;%= @refus_url %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_HASH\" value=\"SHA512\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_TIME\" value=\"&lt;%= @current_time %&gt;\"&gt;\n  &lt;input type=\"hidden\" name=\"PBX_HMAC\" value=\"&lt;%= @signature %&gt;\"&gt;\n  &lt;input type=\"submit\" value=\"Envoyer\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Where the <code>paiement</code> action is triggered:</p>\n\n<pre><code>&lt;div class=\"cmd-actions\"&gt;\n    &lt;%= form_for @commande, {url: commande_path(@commande.code)} do |f| %&gt;\n      &lt;div class=\"recap-commande-container\"&gt;\n        &lt;div class=\"etape\"&gt;\n          &lt;div&gt;3&lt;/div&gt;\n          &lt;h1&gt;R\u00e9capitulatif et paiement de votre commande&lt;/h1&gt;\n        &lt;/div&gt;\n        &lt;%= render partial: 'line_items_table', locals: {recap_commande: @commande} %&gt;\n      &lt;/div&gt;\n      &lt;div id=\"secured-paiement\"&gt;\n        &lt;div&gt;\n          &lt;h3&gt;Choisissez votre mode de paiement :&lt;/h3&gt;\n        &lt;/div&gt;\n        &lt;div class=\"secured-paiement-logo\"&gt;\n          &lt;div class=\"paiement-row\"&gt;\n            &lt;div class=\"input-radio\"&gt;\n              &lt;%= radio_button_tag(\"commande[methode_paiement]\", 'carte_bancaire', {onchange: 'methode(1)', data: {a: \"carte_bancaire\"}, id: 'carte_bancaire'}) %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"input-img\"&gt;\n              &lt;%= image_tag('logo/ca-e-transactions', style: 'width: 170px;height: 40px') %&gt;\n              &lt;%= image_tag('logo/mastercard', style: 'width: 50px;height: 40px') %&gt;\n              &lt;%= image_tag('logo/visa', style: 'width: 50px;height: 40px') %&gt;\n              &lt;%= image_tag('logo/cb', style: 'width: 50px;height: 40px') %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;div class=\"paiement-row\" style=\"margin-top: 20px;\"&gt;\n            &lt;div class=\"input-radio\"&gt;\n              &lt;%= radio_button_tag(\"commande[methode_paiement]\", 'le_pot_commun', {onchange: 'methode(2)', data: {a: \"le_pot_commun\"}, id: 'le_pot_commun'}) %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"input-img\"&gt;\n              &lt;%= image_tag('logo/pot-commun') %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div id=\"proceed-actions\"&gt;\n        &lt;div id=\"cgv\"&gt;\n          &lt;%= check_box_tag \"cgv\" %&gt;\n          &lt;label&gt;J'accepte les &lt;%= link_to \"conditions g\u00e9n\u00e9rales de vente\", conditions_generales_de_vente_path, style: 'color:black', target: 'blank' %&gt;&lt;/label&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"commander-link\" id=\"paiement-cmd-btn\"&gt;\n        &lt;%= f.submit \"Payer ma commande\" %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>The form is supposed to redirect to <em><a href=\"https://preprod-tpeweb.paybox.com/cgi/MYchoix_pagepaiement.cgi\" rel=\"nofollow noreferrer\">https://preprod-tpeweb.paybox.com/cgi/MYchoix_pagepaiement.cgi</a></em>, and this is what it does. But on that same page, i have the following error message: \"Probl\u00e8me d'identification du commerce. Acc\u00e8s refus\u00e9 !\" ('Authentification issue. Access denied !').</p>\n\n<p>This issue is related to this one: <a href=\"https://stackoverflow.com/questions/48427354/ruby-hmac-signing-issue\">Ruby HMAC signing issue</a></p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "macos"], "answers": [{"comments": [{"owner": {"reputation": 1097, "user_id": 2932688, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8017413754ada26e96888723e7915c52?s=128&d=identicon&r=PG&f=1", "display_name": "user2932688", "link": "https://stackoverflow.com/users/2932688/user2932688"}, "edited": false, "score": 0, "creation_date": 1523373897, "post_id": 49394551, "comment_id": 86529839, "body": "still getting this <code>ld: library not found for -lgnurx clang: error: linker command failed with exit code 1 (use -v to see invocation)</code> looks like <code>magic_open</code> is just a consequence"}], "tags": [], "owner": {"reputation": 769, "user_id": 5784956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2edfb655831f5996138372784f45239?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Michael Engh", "link": "https://stackoverflow.com/users/5784956/matthias-michael-engh"}, "is_accepted": false, "score": 0, "last_activity_date": 1521582002, "creation_date": 1521582002, "answer_id": 49394551, "question_id": 48666338, "link": "https://stackoverflow.com/questions/48666338/error-installing-ruby-file-magic-on-osx/49394551#49394551", "title": "Error installing ruby file magic on OSX", "body": "<p><code>sudo brew install libmagic</code> fixed that for me</p>\n"}, {"tags": [], "owner": {"reputation": 1097, "user_id": 2932688, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8017413754ada26e96888723e7915c52?s=128&d=identicon&r=PG&f=1", "display_name": "user2932688", "link": "https://stackoverflow.com/users/2932688/user2932688"}, "is_accepted": false, "score": 1, "last_activity_date": 1523383933, "creation_date": 1523383933, "answer_id": 49760400, "question_id": 48666338, "link": "https://stackoverflow.com/questions/48666338/error-installing-ruby-file-magic-on-osx/49760400#49760400", "title": "Error installing ruby file magic on OSX", "body": "<p>AAA,\nfound the solution which helped me, spent like almost two days on it, so if it would save someones time posting here.</p>\n\n<p><code>brew install libmagic</code></p>\n\n<p>and then</p>\n\n<p><code>env ARCHFLAGS=\"-arch x86_64\" gem install -v 0.7.1 ruby-filemagic -- --with-magic-include=/usr/local/include --with-magic-lib=/usr/local/lib/</code></p>\n\n<p><strong>make sure</strong> though that you are installing required version in <code>gem install -v 0.7.1 ruby-filemagic</code></p>\n"}], "owner": {"reputation": 8908, "user_id": 172232, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a3de2b746da71aadd6b33ddbcbccd52?s=128&d=identicon&r=PG", "display_name": "quantumpotato", "link": "https://stackoverflow.com/users/172232/quantumpotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523383933, "creation_date": 1518013963, "question_id": 48666338, "link": "https://stackoverflow.com/questions/48666338/error-installing-ruby-file-magic-on-osx", "title": "Error installing ruby file magic on OSX", "body": "<pre><code>Fetching ruby-filemagic 0.7.2\nInstalling ruby-filemagic 0.7.2 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/quantum/.rvm/gems/ruby-2.4.2/gems/ruby-filemagic-0.7.2/ext/filemagic\n/Users/quantum/.rvm/rubies/ruby-2.4.2/bin/ruby -r ./siteconf20180207-53723-1uirx0.rb extconf.rb\nchecking for -lgnurx... no\nchecking for magic_open() in -lmagic... no\n*** ERROR: missing required library to compile this module\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nhave_library: checking for -lgnurx... -------------------- no\n\n\"gcc -o conftest -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/x86_64-darwin17 -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/ruby/backward -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0 -I. -I/opt/local/include -I/usr/local/include -I/usr/include  -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens  -fno-common -pipe conftest.c  -L. -L/Users/quantum/.rvm/rubies/ruby-2.4.2/lib -L/opt/local/lib -L/usr/local/lib -L/usr/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L. -fstack-protector -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib     -lruby.2.4.2  -lpthread -lgmp -ldl -lobjc \"\nld: warning: directory not found for option '-L/opt/local/lib'\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n\n\"gcc -o conftest -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/x86_64-darwin17 -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/ruby/backward -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0 -I. -I/opt/local/include -I/usr/local/include -I/usr/include  -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens  -fno-common -pipe conftest.c  -L. -L/Users/quantum/.rvm/rubies/ruby-2.4.2/lib -L/opt/local/lib -L/usr/local/lib -L/usr/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L. -fstack-protector -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib     -lruby.2.4.2 -lgnurx  -lpthread -lgmp -ldl -lobjc \"\nld: warning: directory not found for option '-L/opt/local/lib'\nld: library not found for -lgnurx\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: /*top*/\n 4: extern int t(void);\n 5: int main(int argc, char **argv)\n 6: {\n 7:   if (argc &gt; 1000000) {\n 8:     printf(\"%p\", &amp;t);\n 9:   }\n10: \n11:   return 0;\n12: }\n13: \n14: int t(void) { ; return 0; }\n/* end */\n\n--------------------\n\nhave_library: checking for magic_open() in -lmagic... -------------------- no\n\n\"gcc -o conftest -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/x86_64-darwin17 -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/ruby/backward -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0 -I. -I/opt/local/include -I/usr/local/include -I/usr/include  -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens  -fno-common -pipe conftest.c  -L. -L/Users/quantum/.rvm/rubies/ruby-2.4.2/lib -L/opt/local/lib -L/usr/local/lib -L/usr/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L. -fstack-protector -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib     -lruby.2.4.2 -lmagic  -lpthread -lgmp -ldl -lobjc \"\nconftest.c:13:57: error: use of undeclared identifier 'magic_open'\nint t(void) { void ((*volatile p)()); p = (void ((*)()))magic_open; return !p; }\n                                                        ^\n1 error generated.\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: /*top*/\n 4: extern int t(void);\n 5: int main(int argc, char **argv)\n 6: {\n 7:   if (argc &gt; 1000000) {\n 8:     printf(\"%p\", &amp;t);\n 9:   }\n10: \n11:   return 0;\n12: }\n13: int t(void) { void ((*volatile p)()); p = (void ((*)()))magic_open; return !p; }\n/* end */\n\n\"gcc -o conftest -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/x86_64-darwin17 -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/ruby/backward -I/Users/quantum/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0 -I. -I/opt/local/include -I/usr/local/include -I/usr/include  -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens  -fno-common -pipe conftest.c  -L. -L/Users/quantum/.rvm/rubies/ruby-2.4.2/lib -L/opt/local/lib -L/usr/local/lib -L/usr/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L. -fstack-protector -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib     -lruby.2.4.2 -lmagic  -lpthread -lgmp -ldl -lobjc \"\nld: warning: directory not found for option '-L/opt/local/lib'\nld: library not found for -lmagic\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: /*top*/\n 4: extern int t(void);\n 5: int main(int argc, char **argv)\n 6: {\n 7:   if (argc &gt; 1000000) {\n 8:     printf(\"%p\", &amp;t);\n 9:   }\n10: \n11:   return 0;\n12: }\n13: extern void magic_open();\n14: int t(void) { magic_open(); return 0; }\n/* end */\n\n--------------------\n</code></pre>\n\n<p>It looks like the <code>magic_open</code> is failing? How can I fix this?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 182, "user_id": 1920508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43740b9270a206c2d0a9061b4c906be3?s=128&d=identicon&r=PG", "display_name": "Traveler", "link": "https://stackoverflow.com/users/1920508/traveler"}, "is_accepted": false, "score": 0, "last_activity_date": 1518011724, "creation_date": 1518011724, "answer_id": 48665633, "question_id": 48665370, "link": "https://stackoverflow.com/questions/48665370/read-lines-up-to-a-pattern/48665633#48665633", "title": "Read lines up to a pattern", "body": "<ol>\n<li>You don\u2019t need <strong>next</strong> after #, right? It has to be next after \u2018[group]\u2019</li>\n<li>You need to \u2018break\u2019 loop if you reached some end condition, but currently you just not printing it and moving to the next line</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1518012490, "post_id": 48665650, "comment_id": 84329085, "body": "<code>each.reduce(false)</code>?"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1518011767, "creation_date": 1518011767, "answer_id": 48665650, "question_id": 48665370, "link": "https://stackoverflow.com/questions/48665370/read-lines-up-to-a-pattern/48665650#48665650", "title": "Read lines up to a pattern", "body": "<pre><code>state = false\nFile.new(\"input.txt\").each do |line|\n  state = true if line.start_with?(\"[groups]\")\n  next unless state\n    ... # do_something\n  break if line.start_with?(\"[/]\")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1518519967, "post_id": 48665714, "comment_id": 84530965, "body": "Famous? I don&#39;t think so. It&#39;s barely known :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1519222337, "last_edit_date": 1519222337, "creation_date": 1518011958, "answer_id": 48665714, "question_id": 48665370, "link": "https://stackoverflow.com/questions/48665370/read-lines-up-to-a-pattern/48665714#48665714", "title": "Read lines up to a pattern", "body": "<p>This is a perfect use-case for Ruby famous <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow noreferrer\">flip-flop</a>:</p>\n\n<pre><code>File.open('input.txt', 'r').each_line do |line|\n  line = line.strip\n  next unless (line == '[groups]')..(line == '[/]')\n  puts line\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1518012513, "creation_date": 1518012513, "answer_id": 48665905, "question_id": 48665370, "link": "https://stackoverflow.com/questions/48665370/read-lines-up-to-a-pattern/48665905#48665905", "title": "Read lines up to a pattern", "body": "<p>Something like this would do the trick:</p>\n\n<pre><code>start_interpreter = false\nmyhash = {}\n\nFile.open('input.txt', 'r') do |infile|\n  while (line = infile.gets)\n    if !(line =~ /\\[groups\\]/).nil?\n      start_interpreter = true\n      next\n    end\n    break if !(line =~ /\\[\\/\\]/).nil?\n    if start_interpreter\n      split_line = line.split('=')\n      myhash[split_line[0]] = split_line[1]\n    end\n  end\nend\n\np myhash\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1518014809, "post_id": 48666204, "comment_id": 84330758, "body": "Thank you for the alternate option"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1518013497, "creation_date": 1518013497, "answer_id": 48666204, "question_id": 48665370, "link": "https://stackoverflow.com/questions/48665370/read-lines-up-to-a-pattern/48666204#48666204", "title": "Read lines up to a pattern", "body": "<p>Can't beat the flip-flop solution from mudasobwa but here is an simple alternative with split using regular expressions.\nIt produces a hash like asked.</p>\n\n<pre><code>Hash[*(File.read('./input.txt').split(/\\[|\\]/)[2].strip.split(/=|\\n/))]\n</code></pre>\n\n<p>gives</p>\n\n<pre><code># {\"earth \"=&gt;\" id\\\\check_id, mars_nedr, id\\\\npo0md, id\\\\cfrtyh\", \"mars \"=&gt;\" id\\\\koi8khl, id\\\\xzlo09, id\\\\kzlop0\", \"venus\"=&gt;\" id\\\\vyu890, id\\\\zzgy78, id\\\\jz9lop\"}\n</code></pre>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 48665650, "answer_count": 5, "score": 0, "last_activity_date": 1519222337, "creation_date": 1518010964, "last_edit_date": 1518011304, "question_id": 48665370, "link": "https://stackoverflow.com/questions/48665370/read-lines-up-to-a-pattern", "title": "Read lines up to a pattern", "body": "<p>I am trying to read file contents up to a pattern.</p>\n\n<p><strong>Example: Input.txt</strong></p>\n\n<pre><code>#random\n[groups]\nearth = id\\check_id, mars_nedr, id\\npo0md, id\\cfrtyh\nmars = id\\koi8khl, id\\xzlo09, id\\kzlop0\nvenus= id\\vyu890, id\\zzgy78, id\\jz9lop\n\n[/]\n\nread = check\nwrite =@mars\n</code></pre>\n\n<p>I need the data between <code>[groups]</code> and <code>[/]</code> to get an array or a hash and ignore the rest. I tried the following:</p>\n\n<pre><code>text = File.open('input.txt', 'r')\ntext.each_line do |line|\n  next if line.start_with? '#'\n  puts line unless (line==\"\\[\\/\\]\")\nend\n</code></pre>\n\n<p>But it prints the entire file contents. Any help will be helpful.</p>\n"}, {"tags": ["mysql", "ruby", "chef-infra", "cookbook"], "comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1518029667, "post_id": 48665297, "comment_id": 84340502, "body": "Does it work as expected with Chef 13?"}, {"owner": {"reputation": 431, "user_id": 1798114, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6b7a3b6bb3fa6601e4eff320ebb7ee62?s=128&d=identicon&r=PG", "display_name": "PiX06", "link": "https://stackoverflow.com/users/1798114/pix06"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1518080726, "post_id": 48665297, "comment_id": 84359966, "body": "Nope, the chef client version in the above is 13.7.16"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1518113616, "post_id": 48665297, "comment_id": 84382510, "body": "No it isn&#39;t, you can see in the error that it is <code>chef_version=12.21.31</code>."}, {"owner": {"reputation": 431, "user_id": 1798114, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6b7a3b6bb3fa6601e4eff320ebb7ee62?s=128&d=identicon&r=PG", "display_name": "PiX06", "link": "https://stackoverflow.com/users/1798114/pix06"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1518176199, "post_id": 48665297, "comment_id": 84408172, "body": "That&#39;s odd because if I issue the command <code>chef-client -v</code> on the box I get the output <code>Chef: 13.7.16</code> - when bootstrapping the server from chefdk would it use a different version?"}], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 1669294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e854c98bd265562437c4a606880ae20a?s=128&d=identicon&r=PG", "display_name": "Eric Sellin", "link": "https://stackoverflow.com/users/1669294/eric-sellin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520093873, "creation_date": 1520093873, "answer_id": 49086336, "question_id": 48665297, "link": "https://stackoverflow.com/questions/48665297/chef-client-error-during-processing-of-mysql-cookbook/49086336#49086336", "title": "Chef client error during processing of MySQL cookbook", "body": "<p>The file provider_mysql_client.rb does not exist anymore in version 8.x.x of the cookbook.</p>\n\n<p>Make sure you don't have old files from a previous version 7.x.x of the cookbook lying around.</p>\n\n<p>If you're using Berkshelf, try to delete its cache (~/.berkself).</p>\n\n<p>If you're copying everything to your target server, and then use chef zero (-z), look over there as well.</p>\n"}], "owner": {"reputation": 431, "user_id": 1798114, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6b7a3b6bb3fa6601e4eff320ebb7ee62?s=128&d=identicon&r=PG", "display_name": "PiX06", "link": "https://stackoverflow.com/users/1798114/pix06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520093873, "creation_date": 1518010767, "question_id": 48665297, "link": "https://stackoverflow.com/questions/48665297/chef-client-error-during-processing-of-mysql-cookbook", "title": "Chef client error during processing of MySQL cookbook", "body": "<p>I'm trying to provision a new server using chef-client. The process is hitting a NameError caused by an uninitialized constant 'MysqlCookbook:Helpers'.</p>\n\n<p>This is the output I'm getting:</p>\n\n<pre><code>0.0.0.0 Compiling Cookbooks...\n0.0.0.0\n0.0.0.0 ================================================================================\n0.0.0.0 Recipe Compile Error in /var/chef/cache/cookbooks/mysql/libraries/provider_mysql_client.rb\n0.0.0.0 ================================================================================\n0.0.0.0\n0.0.0.0 NameError\n0.0.0.0 ---------\n0.0.0.0 uninitialized constant MysqlCookbook::Helpers\n0.0.0.0\n0.0.0.0 Cookbook Trace:\n0.0.0.0 ---------------\n0.0.0.0   /var/chef/cache/cookbooks/mysql/libraries/provider_mysql_client.rb:7:in `&lt;class:MysqlClient&gt;'\n0.0.0.0   /var/chef/cache/cookbooks/mysql/libraries/provider_mysql_client.rb:6:in `&lt;class:Provider&gt;'\n0.0.0.0   /var/chef/cache/cookbooks/mysql/libraries/provider_mysql_client.rb:5:in `&lt;class:Chef&gt;'\n0.0.0.0   /var/chef/cache/cookbooks/mysql/libraries/provider_mysql_client.rb:4:in `&lt;top (required)&gt;'\n0.0.0.0\n0.0.0.0 Relevant File Content:\n0.0.0.0 ----------------------\n0.0.0.0 /var/chef/cache/cookbooks/mysql/libraries/provider_mysql_client.rb:\n0.0.0.0\n0.0.0.0   1:  require 'chef/provider/lwrp_base'\n0.0.0.0   2:  require_relative 'helpers'\n0.0.0.0   3:\n0.0.0.0   4:  class Chef\n0.0.0.0   5:    class Provider\n0.0.0.0   6:      class MysqlClient &lt; Chef::Provider::LWRPBase\n0.0.0.0   7&gt;&gt;       include MysqlCookbook::Helpers\n0.0.0.0   8:        provides :mysql_client if defined?(provides)\n0.0.0.0   9:\n0.0.0.0  10:        use_inline_resources if defined?(use_inline_resources)\n0.0.0.0  11:\n0.0.0.0  12:        def whyrun_supported?\n0.0.0.0  13:          true\n0.0.0.0  14:        end\n0.0.0.0  15:\n0.0.0.0  16:        action :create do\n0.0.0.0\n0.0.0.0 System Info:\n0.0.0.0 ------------\n0.0.0.0 chef_version=12.21.31\n0.0.0.0 platform=ubuntu\n0.0.0.0 platform_version=16.04\n0.0.0.0 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]\n0.0.0.0 program_name=chef-client worker: ppid=31986;start=12:48:17;\n0.0.0.0 executable=/opt/chef/bin/chef-client\n0.0.0.0\n0.0.0.0\n0.0.0.0 Running handlers:\n0.0.0.0 [2018-02-07T12:48:23+00:00] ERROR: Running exception handlers\n0.0.0.0 Running handlers complete\n0.0.0.0 [2018-02-07T12:48:23+00:00] ERROR: Exception handlers complete\n0.0.0.0 Chef Client failed. 0 resources updated in 05 seconds\n0.0.0.0 [2018-02-07T12:48:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\n0.0.0.0 [2018-02-07T12:48:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n0.0.0.0 [2018-02-07T12:48:23+00:00] ERROR: uninitialized constant MysqlCookbook::Helpers\n0.0.0.0 [2018-02-07T12:48:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n</code></pre>\n\n<p>I've had a look at the file where it seems to be falling over (provider_mysql_client.rb) which starts off with the following code:</p>\n\n<pre><code>require 'chef/provider/lwrp_base'\nrequire_relative 'helpers'\n\nclass Chef\n  class Provider\n    class MysqlClient &lt; Chef::Provider::LWRPBase\n      include MysqlCookbook::Helpers\n      provides :mysql_client if defined?(provides)\n</code></pre>\n\n<p>I'm not a Ruby dev (my background is in PHP and JavaScript) but it looks to me like it's including the file <code>helpers.rb</code> which is in the same directory as the above file.</p>\n\n<p>The contents of which start off like this:</p>\n\n<pre><code>module MysqlCookbook\n  module HelpersBase\n    require 'shellwords'\n\n    def el6?\n      return true if node['platform_family'] == 'rhel' &amp;&amp; node['platform_version'].to_i == 6\n      false\n    end\n</code></pre>\n\n<p>To me this looks inconsistent with the include statement above which refers to MysqlCookbook::Helpers - this looks like it should be referred to as MysqlCookbook::HelpersBase (again I'm not a Ruby dev so I may be mistaken here).</p>\n\n<p>I'm not really sure how to move forward with this and get the chef-client run to complete successfully. I have found the following issue on the cookbooks GitHub - <a href=\"https://github.com/chef-cookbooks/mysql/issues/540\" rel=\"nofollow noreferrer\">https://github.com/chef-cookbooks/mysql/issues/540</a> which seems to match what's happening for me, but it doesn't have any replies so isn't particularly useful to me.</p>\n\n<p>Any input/suggestions appreciated, thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mobility"], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 1741823, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2ce26d37d1a685b094324b5ed9a6a755?s=128&d=identicon&r=PG", "display_name": "Nick L Scott", "link": "https://stackoverflow.com/users/1741823/nick-l-scott"}, "edited": false, "score": 1, "creation_date": 1518018016, "post_id": 48666474, "comment_id": 84333093, "body": "That&#39;s perfect. Thanks. Also, if someone comes looking for the same thing, using <code>write_attribute</code> and then <code>.save</code> will save the field"}, {"owner": {"reputation": 25857, "user_id": 820254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb7f91e7b7b3457ca57701a40f920f2a?s=128&d=identicon&r=PG", "display_name": "Chris Salzberg", "link": "https://stackoverflow.com/users/820254/chris-salzberg"}, "edited": false, "score": 2, "creation_date": 1518086810, "post_id": 48666474, "comment_id": 84364250, "body": "You can also use the shorthand <code>company[:name]</code> instead of <code>company.read_attribute :name</code>, or <code>company[:name] = ...</code> instead of <code>company.write_attribute :name, ...</code>."}, {"owner": {"reputation": 25857, "user_id": 820254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb7f91e7b7b3457ca57701a40f920f2a?s=128&d=identicon&r=PG", "display_name": "Chris Salzberg", "link": "https://stackoverflow.com/users/820254/chris-salzberg"}, "edited": false, "score": 1, "creation_date": 1518086860, "post_id": 48666474, "comment_id": 84364286, "body": "You can also pass the <code>super</code> option to Mobility, which would normally do the same thing: <code>company.name(super: true)</code>."}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "reply_to_user": {"reputation": 25857, "user_id": 820254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb7f91e7b7b3457ca57701a40f920f2a?s=128&d=identicon&r=PG", "display_name": "Chris Salzberg", "link": "https://stackoverflow.com/users/820254/chris-salzberg"}, "edited": false, "score": 0, "creation_date": 1518099861, "post_id": 48666474, "comment_id": 84373273, "body": "Nice points @ChrisSalzberg! They would even deserve another answer IMHO; specially the last one, which seems the most idiomatic using Mobility"}], "tags": [], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "is_accepted": true, "score": 2, "last_activity_date": 1518014395, "creation_date": 1518014395, "answer_id": 48666474, "question_id": 48665277, "link": "https://stackoverflow.com/questions/48665277/accessing-real-field-non-translated-mobility/48666474#48666474", "title": "Accessing &quot;real_field_non_translated&quot;? - Mobility", "body": "<p>Try this:</p>\n\n<pre><code>Company.last.read_attribute :name\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>Company.last.name_before_type_cast\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25857, "user_id": 820254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb7f91e7b7b3457ca57701a40f920f2a?s=128&d=identicon&r=PG", "display_name": "Chris Salzberg", "link": "https://stackoverflow.com/users/820254/chris-salzberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1518229383, "creation_date": 1518229383, "answer_id": 48716617, "question_id": 48665277, "link": "https://stackoverflow.com/questions/48665277/accessing-real-field-non-translated-mobility/48716617#48716617", "title": "Accessing &quot;real_field_non_translated&quot;? - Mobility", "body": "<p>The accepted answer is correct as a general approach with any ActiveRecord model: <code>read_attribute</code> and <code>write_attribute</code> will always fetch and set the column value regardless of any overrides defined in the model. As I commented, there are shorthandes for these methods as well:</p>\n\n<pre><code>company[:name]         #=&gt; returns the value of the name column\ncompany[:name] = \"foo\" #=&gt; sets the value of the name column to \"foo\"\n</code></pre>\n\n<p>In addition, in Mobility specifically, there is an option you can pass to a getter (and setter) which will skip whatever <em>Mobility</em> would normally do for an attribute:</p>\n\n<pre><code>company.name(super: true) # skips Mobility and goes to its parent (super) method,\n                          # which would typically be the column value.\n</code></pre>\n\n<p>In a situation where perhaps you are using another gem which also does something special to attributes, this approach might work better.</p>\n\n<p>There is also a setter option, however it's a bit more tricky to use:</p>\n\n<pre><code>company.send(:name=, \"foo\", super: true) # sets name to \"foo\", skipping Mobility\n</code></pre>\n\n<p>If you are using Mobility together with another gem that overrides attribute getters and/or setters, then the <code>super</code> option may be useful; otherwise read/write attribute is probably fine.</p>\n"}], "owner": {"reputation": 653, "user_id": 1741823, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2ce26d37d1a685b094324b5ed9a6a755?s=128&d=identicon&r=PG", "display_name": "Nick L Scott", "link": "https://stackoverflow.com/users/1741823/nick-l-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 48666474, "answer_count": 2, "score": 2, "last_activity_date": 1518229383, "creation_date": 1518010721, "question_id": 48665277, "link": "https://stackoverflow.com/questions/48665277/accessing-real-field-non-translated-mobility", "title": "Accessing &quot;real_field_non_translated&quot;? - Mobility", "body": "<p>Is there a way, via ActiveRecord, to access the \"real_field\" (let's say)?</p>\n\n<p>For example. If I have a Model Company and do <code>Company.create(name: \"My Company Name\")</code> (with <code>I18n.locale = :en</code>), that name value won't be saved in the Company record, but in the Mobility table for the string.</p>\n\n<p>So doing <code>Company.last</code> will return</p>\n\n<p><code>#&lt;Company id: 5, name: nil&gt;</code></p>\n\n<p>But doing <code>Company.last.name</code> will return My Company Name (assuming the locale is set properly)</p>\n\n<p>Is there a way to do something like <code>Company.last.real_name</code> that would give me the actual value of the record? In this case nil. I would also like to have a <code>real_name=</code>.</p>\n\n<blockquote>\n  <p>mobility (0.4.2)\n        i18n (>= 0.6.10, &lt; 0.10)\n        request_store (~> 1.0)</p>\n  \n  <p>Backend: key_value</p>\n</blockquote>\n"}, {"tags": ["ruby", "google-api", "gmail-api", "google-api-ruby-client"], "comments": [{"owner": {"reputation": 3042, "user_id": 8342742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMVCJ.jpg?s=128&g=1", "display_name": "M\u03b1\u03c0\u03bcQ\u03bc\u03b1\u03c0k\u03b3V\u03c0.0", "link": "https://stackoverflow.com/users/8342742/m%ce%b1%cf%80%ce%bcq%ce%bc%ce%b1%cf%80k%ce%b3v%cf%80-0"}, "edited": false, "score": 0, "creation_date": 1518089133, "post_id": 48665129, "comment_id": 84365776, "body": "Check this <a href=\"https://developers.google.com/gmail/api/guides/threads#adding_drafts_and_messages_to_threads\" rel=\"nofollow noreferrer\">documentation</a> to help you further. It was stated that <code>If you are sending or migrating messages that are a response to another email or part of a conversation, your application should add that message to the related thread. This makes it easier for Gmail users who are participating in the conversation to keep the message in context.</code>"}, {"owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "reply_to_user": {"reputation": 3042, "user_id": 8342742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMVCJ.jpg?s=128&g=1", "display_name": "M\u03b1\u03c0\u03bcQ\u03bc\u03b1\u03c0k\u03b3V\u03c0.0", "link": "https://stackoverflow.com/users/8342742/m%ce%b1%cf%80%ce%bcq%ce%bc%ce%b1%cf%80k%ce%b3v%cf%80-0"}, "edited": false, "score": 0, "creation_date": 1518278529, "post_id": 48665129, "comment_id": 84444151, "body": "yes i know that can give you detail example may be ?"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 8477923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0126f3c13559d66b6728f5d8b2224?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/8477923/shruti"}, "is_accepted": false, "score": 1, "last_activity_date": 1523864621, "last_edit_date": 1523864621, "creation_date": 1523863019, "answer_id": 49851523, "question_id": 48665129, "link": "https://stackoverflow.com/questions/48665129/how-to-reply-gmail-using-gmail-api-in-the-same-thread-id/49851523#49851523", "title": "How to reply gmail using Gmail API in the same thread_id", "body": "<p>thread_id is a part of the Gmail message object not the Mail object.</p>\n\n<p>Add it here</p>\n\n<pre><code>message_object = Google::Apis::GmailV1::Message.new(raw:message.to_s, thread_id:thread_id)\n</code></pre>\n\n<p>and remove this:</p>\n\n<pre><code>message.thread_id    = \"#{thread_id}\"\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523864621, "creation_date": 1518010289, "last_edit_date": 1518014858, "question_id": 48665129, "link": "https://stackoverflow.com/questions/48665129/how-to-reply-gmail-using-gmail-api-in-the-same-thread-id", "title": "How to reply gmail using Gmail API in the same thread_id", "body": "<p>Hi guys currently i'm building reply message using ruby, here is my code</p>\n\n<pre><code>    def reply(user_id, subject, to, body, thread_id)\n        client = google_client user_id\n        token = Token.find_by_user_id(user_id)\n        access_token = token.access_token\n        gmail = Google::Apis::GmailV1::GmailService.new\n        gmail.authorization = client\n        message              = Mail.new\n        message.date         = Time.now\n        message.subject      = \"#{subject}\"\n        message.from         = token.email\n        message.to           = \"#{to}\"\n        message.thread_id    = \"#{thread_id}\"\n\n        message.part content_type: 'multipart/alternative' do |part|\n            part.html_part = Mail::Part.new(body: \"#{body}\", content_type: 'text/html; charset=UTF-8')\n        end\n\n        # attach file\n         open('/Users/jaisanasrulloh/Downloads/image.png') do |file| \n            message.attachments['image.jpg'] = file.read \n         end\n\n        msg = message.encoded\n        message_object = Google::Apis::GmailV1::Message.new(raw:message.to_s)\n        gmail.send_user_message('me', message_object)\n    end\n</code></pre>\n\n<p>but i got error like below:</p>\n\n<pre><code>NoMethodError: undefined method `thread_id=' for #&lt;Mail::Message:0x007fcedb6b9c78&gt;\n</code></pre>\n\n<p>My question is how to add <code>thread_id</code> inside <code>Mail::Message</code> object ? Some person using class <code>RMail::Message</code> like this <a href=\"https://stackoverflow.com/questions/43329035/reply-to-thread-google-api-ruby-client\">one</a></p>\n\n<p>is there exist parameter thread_id inside <code>Mail::Message</code> ? if there exist how to add it?</p>\n"}, {"tags": ["ruby", "automation", "ui-automation", "calabash-android", "testautomationfx"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 9410216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "CMassa", "link": "https://stackoverflow.com/users/9410216/cmassa"}, "is_accepted": false, "score": 0, "last_activity_date": 1534622748, "creation_date": 1534622748, "answer_id": 51912164, "question_id": 48664105, "link": "https://stackoverflow.com/questions/48664105/get-text-with-index-number-and-then-compare-with-the-expected-text/51912164#51912164", "title": "get text with index number and then compare with the expected text", "body": "<p>Setting the correct id for the query (which you can get by doing on calabash console the command <code>query(\"*\", :id)</code>) on code below should do the trick. If you can't use id try to get another component property (like Android component by using  <code>query(\"*\")</code> ) and set the query inside the<code>get_text</code> calls.</p>\n\n<pre><code>def get_text(query)\n  query(plan_query, :text).first\nend\n\ndef text_equals(text, expected_text)\n  unless text == expected_text\n    fail \"#{text} not equal to #{expected_text}\"\n  end\nend\n\ndef verify_plan(index, expected_text)\n  plan_text = get_text(\"* id:'PLAN_TEXTS_ID' index:#{index}\") # Can change 'id:...'' by Android class if plan does not have id\n  expected_text = get_text(\"* id:'BOTTOM_PLAN_ID'\") # Same as above\n  text_equals(plan_text, expected_text)\nend\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 4252313, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/567208cb2687d981c3b35447f45f08b4?s=128&d=identicon&r=PG&f=1", "display_name": "zzz", "link": "https://stackoverflow.com/users/4252313/zzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1534622748, "creation_date": 1518007259, "last_edit_date": 1518083651, "question_id": 48664105, "link": "https://stackoverflow.com/questions/48664105/get-text-with-index-number-and-then-compare-with-the-expected-text", "title": "get text with index number and then compare with the expected text", "body": "<p>I need to write a method which will get text with the help of index number from popup and then i need to compare with the expected text\ni.e i need to verify expected plan name is displayed at the bottom of the popup box</p>\n\n<p><a href=\"https://i.stack.imgur.com/E90AL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E90AL.jpg\" alt=\"snapshot of the pop up box\"></a></p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1518003789, "post_id": 48662839, "comment_id": 84323148, "body": "btw where is your <code>show</code> action?"}], "answers": [{"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 15, "user_id": 9327165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96132cb459b229d196f3591ea6b5d5e8?s=128&d=identicon&r=PG&f=1", "display_name": "\u0418\u043b\u044c\u044f \u041a\u043e\u0433\u0430\u043d", "link": "https://stackoverflow.com/users/9327165/%d0%98%d0%bb%d1%8c%d1%8f-%d0%9a%d0%be%d0%b3%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1518004269, "post_id": 48662877, "comment_id": 84323440, "body": "Well, it happens. :)"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1518003486, "creation_date": 1518003486, "answer_id": 48662877, "question_id": 48662839, "link": "https://stackoverflow.com/questions/48662839/does-not-display-comments-rails/48662877#48662877", "title": "does not display comments rails", "body": "<p>You miss <code>=</code>. It should be:</p>\n\n<pre><code>&lt;%= comment.body %&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9327165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96132cb459b229d196f3591ea6b5d5e8?s=128&d=identicon&r=PG&f=1", "display_name": "\u0418\u043b\u044c\u044f \u041a\u043e\u0433\u0430\u043d", "link": "https://stackoverflow.com/users/9327165/%d0%98%d0%bb%d1%8c%d1%8f-%d0%9a%d0%be%d0%b3%d0%b0%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 48662877, "answer_count": 1, "score": 0, "last_activity_date": 1518003615, "creation_date": 1518003364, "last_edit_date": 1518003615, "question_id": 48662839, "link": "https://stackoverflow.com/questions/48662839/does-not-display-comments-rails", "title": "does not display comments rails", "body": "<p>does not display comments I think the matter is in view, but I can not understand where the error</p>\n\n<p>here is a screenshot</p>\n\n<p><a href=\"https://i.stack.imgur.com/cWelQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cWelQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>My github <a href=\"https://github.com/astrsky/recipe\" rel=\"nofollow noreferrer\">https://github.com/astrsky/recipe</a></p>\n\n<p>recipe/app/views/comments/_comments.html.erb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;h3&gt;Comments&lt;/h3&gt;\r\n&lt;% commentable.comments.each do |comment| %&gt;\r\n  &lt;div class = \"well\"&gt;\r\n    &lt;% comment.body %&gt;\r\n    &lt;/div&gt;\r\n&lt;% end %</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>recipe/app/views/comments/_form.html.erb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= form_for [commentable, Comment.new] do |f| %&gt;\r\n  &lt;div class = \"form-group\"&gt;\r\n    &lt;%= f.text_area :body, class: \"form-control\", placeholder: \"Add a comment\" %&gt;\r\n  &lt;/div&gt;\r\n  &lt;%= f.submit class: \"btn btn-primary\" %&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>recipe/app/views/recipes/show.html.haml</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>ain_content\r\n  #recipe_top.row\r\n    .col-md-4\r\n      = image_tag @recipe.image.url(:medium), class: \"recipe_image\"\r\n    .col-md-8\r\n      #recipe_info\r\n        %h1= @recipe.title\r\n        %p.description= @recipe.description\r\n\r\n  .row\r\n    .col-md-6\r\n      #ingredients\r\n        %h2 Ingredients\r\n        %ul\r\n          -@recipe.ingredients.each do |ingredient|\r\n            %li= ingredient.name\r\n\r\n    .col-md-6\r\n      #directions\r\n        %h2 Directions\r\n        %ul\r\n          - @recipe.directions.each do |direction|\r\n            %li= direction.step\r\n\r\n  .row\r\n    .col-md-8\r\n      #Commets\r\n       \r\n        %ul\r\n          = render partial: \"comments/comments\", locals: {commentable: @recipe}\r\n          = render partial: \"comments/form\", locals: {commentable: @recipe}\r\n\r\n  .row\r\n    .col-md-12\r\n      = link_to \"\u041d\u0430\u0437\u0430\u0434\", root_path, class: \"btn btn-default\"\r\n      -if user_signed_in?\r\n        = link_to \"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c\", edit_recipe_path, class: \"btn btn-default\" \r\n= link_to \"\u0423\u0434\u0430\u043b\u0438\u0442\u044c\", recipe_path, method: :delete, data: {confirm: \"Are you sure?\"}, class: \"btn btn-default\" </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>recipe/app/controllers/comments_controller.rb </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class CommentsController &lt; ApplicationController\r\n  before_action :authenticate_user!\r\n\r\n  def create\r\n    @comment = @commentable.comments.new comment_params\r\n    @comment = current_user\r\n    @comment.save\r\n      redirect_to @commentable, notice: \"Your comment was successfully posted.\"\r\n  end\r\n\r\n\r\n\r\n  private\r\n    def comment_params\r\n      params.require(:comment).permit(:body)\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "firefox", "watir", "geckodriver"], "comments": [{"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1518004610, "post_id": 48662821, "comment_id": 84323648, "body": "Have you tried running the script for each server in isolation? Does it crash at the same server every time? Also, what does the assertion in response.rb:69 check for (from your stack trace) ? And could you please  clarify the sentence &quot;It searches for that server using a form does that clicks it has to do in order to pload the evidence (a zip file).&quot; ?"}, {"owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 0, "creation_date": 1518010618, "post_id": 48662821, "comment_id": 84327795, "body": "I believe <code>watir-webdriver</code> is deprecated, and thus should not be <code>require</code>d by your applications / scripts."}, {"owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 0, "creation_date": 1518010750, "post_id": 48662821, "comment_id": 84327891, "body": "Also, cursory review of others with similar error messages indicates you might have luck if you are able to update your geckodriver and Firefox versions to the latest available: 0.19.1 and 58.0.1, respectively. Good luck!"}, {"owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "reply_to_user": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1518020414, "post_id": 48662821, "comment_id": 84334835, "body": "@FrankSchmitt no, it&#39;s not a problem with a particular server, but with the number of arguments I pass to my script, like there is a memory leak somwhere, becuase I don&#39;t free some resources?"}, {"owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "reply_to_user": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 0, "creation_date": 1518020523, "post_id": 48662821, "comment_id": 84334900, "body": "@Sam I don&#39;t require watir-webdriver , sorry I was not clear. I&#39;ve installed the gem, but it&#39;s not used. I&#39;ve the latest firefox and geckdriver I think, I&#39;ll check asap"}, {"owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "reply_to_user": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 0, "creation_date": 1518020733, "post_id": 48662821, "comment_id": 84335054, "body": "@Sam do you really think updating Firefox may help? the geckodriver it&#39;s the last one"}, {"owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 0, "creation_date": 1518021877, "post_id": 48662821, "comment_id": 84335862, "body": "@tmow geckodriver and selenium-webdriver bug fixes often suggest some version of geckodriver works best with some version of Firefox. If you can find a canonical list of which work with which, you&#39;re better at Google than me."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 2, "creation_date": 1518025012, "post_id": 48662821, "comment_id": 84337801, "body": "@tmow, do you have the ability to try the script using Chrome? It might help identify if there is a browser problem compared to a Watir problem."}, {"owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "reply_to_user": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 0, "creation_date": 1518042855, "post_id": 48662821, "comment_id": 84347312, "body": "Thanks @Sam . No I think that at the best I&#39;ve the same Google skills as you. I&#39;ll test ASAP ."}, {"owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1518042955, "post_id": 48662821, "comment_id": 84347353, "body": "@JustinKo no sorry, I don&#39;t have one and sincerely Idon&#39;t want o..."}, {"owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "reply_to_user": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 1, "creation_date": 1518077174, "post_id": 48662821, "comment_id": 84357891, "body": "@Sam it was the Firefox version, I&#39;ve updated to Firefox 58.0.1 and I don&#39;t have problem anymore. I&#39;ll add an answer for those interested. Thanks a lot to all!!"}], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "is_accepted": true, "score": 2, "last_activity_date": 1518077818, "creation_date": 1518077818, "answer_id": 48680655, "question_id": 48662821, "link": "https://stackoverflow.com/questions/48662821/watir-crashes-if-i-loop-several-times-on-the-same-pages/48680655#48680655", "title": "Watir crashes if I loop several times on the same pages", "body": "<p>As advised by the <a href=\"https://github.com/mozilla/geckodriver/blob/master/README.md\" rel=\"nofollow noreferrer\">geckdriver developers</a>:</p>\n\n<blockquote>\n  <p>Support is best in Firefox 55 and greater, although generally the more\n  recent the Firefox version, the better the experience as they have\n  more bug fixes and features. Some features will only be available in\n  the most recent Firefox versions, and we strongly advise using the\n  latest Firefox Nightly with geckodriver.</p>\n</blockquote>\n\n<p>With the last geckdriver release (my case), is always better to use the last version of Firefox.</p>\n\n<p>The main reason for this, always quoting hteir GitHub README</p>\n\n<blockquote>\n  <p>geckodriver is not yet feature complete. This means that it does not\n  yet offer full conformance with the WebDriver standard or complete\n  compatibility with Selenium. You can track the implementation status\n  of the latest Firefox Nightly on MDN. We also keep track of known\n  Selenium, remote protocol, and specification problems in our issue\n  tracker.</p>\n</blockquote>\n\n<p>In fact, in my specific case, updating to Firefox 58.0.1, the latest release available on Fedora 26, fixed my problem.</p>\n\n<p>Therefore, as rule of dumb, you must always use both latest version of geckdriver and Pirefox whenever possible, or at least follows the reccomandations of each <a href=\"https://github.com/mozilla/geckodriver/releases\" rel=\"nofollow noreferrer\">release notes</a> (if any).</p>\n\n<p>Thanks to @Sam @JustinKo and @FrankSchmitt  for their precious support.</p>\n"}], "owner": {"reputation": 195, "user_id": 371972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d331cea23d6b7f9c4efb2bb86f6a7f?s=128&d=identicon&r=PG", "display_name": "tmow", "link": "https://stackoverflow.com/users/371972/tmow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 48680655, "answer_count": 1, "score": 1, "last_activity_date": 1518100404, "creation_date": 1518003309, "last_edit_date": 1518100404, "question_id": 48662821, "link": "https://stackoverflow.com/questions/48662821/watir-crashes-if-i-loop-several-times-on-the-same-pages", "title": "Watir crashes if I loop several times on the same pages", "body": "<p>I've automated the upload of some evidences to a compliance intranet where I work (I cannot provide details) with watir.</p>\n\n<p>I've done something as simple as opening a firefox session to that intranet and than a loop that goes through each server I pass as command line argument. It searches for that server using a form does that clicks it has to do in order to upload the evidence (a zip file).</p>\n\n<pre><code>ARGV.each do|server|\n  shotname = \"#{download_directory}/foo_#{server}.png\"\n    b.goto 'https://compl.intra.secret.com/index.php'\n\n    l = b.link text: 'Systems'\n    l.wait_until_present\n    l.exists?\n    l.click\n\n  ....\n  ....\nend\n</code></pre>\n\n<p>As soon as I execute the script with few servers, CPU goes at 100%, but it reaches the end without issues, but if I pass about 20 servers as my arguments, ruby crashes really bad with this stacktrace</p>\n\n<pre><code>stack backtrace:: Failed to find value field (Selenium::WebDriver::Error::UnknownError)\n        from    0:           0x4edb3c - backtrace::backtrace::trace::hc4bd56a2f176de7e\n        from    1:           0x4edb72 - backtrace::capture::Backtrace::new::he3b2a15d39027c46\n        from    2:           0x4409a1 - webdriver::error::WebDriverError::new::h81babdd86c977032\n        from    3:           0x44b2c7 - geckodriver::marionette::MarionetteSession::response::ha4a2fbbdd9abe262\n        from    4:           0x429f1a - &lt;webdriver::server::Dispatcher&lt;T, U&gt;&gt;::run::h2119c674d7b88193\n        from    5:           0x4029b9 - std::sys_common::backtrace::__rust_begin_short_backtrace::h21d98a9ff86d4c25\n        from    6:           0x40be65 - std::panicking::try::do_call::h5cff0c9b18cfdbba\n        from    7:           0x5e6a6c - panic_unwind::__rust_maybe_catch_panic\n        from                         at /checkout/src/libpanic_unwind/lib.rs:99\n        from    8:           0x41eb22 - &lt;F as alloc::boxed::FnBox&lt;A&gt;&gt;::call_box::h413eb1d9d9f1c473\n        from    9:           0x5df13b - alloc::boxed::{{impl}}::call_once&lt;(),()&gt;\n        from                         at /checkout/src/liballoc/boxed.rs:692\n        from                          - std::sys_common::thread::start_thread\n        from                         at /checkout/src/libstd/sys_common/thread.rs:21\n        from                          - std::sys::imp::thread::{{impl}}::new::thread_start\n        from                         at /checkout/src/libstd/sys/unix/thread.rs:84\n        from /home/antenore/.gem/ruby/2.4.0/gems/selenium-webdriver-3.8.0/lib/selenium/webdriver/remote/response.rb:69:in `assert_ok'\n</code></pre>\n\n<p>My code it's less than acceptable, but I was wondering if it may be also a bug and if you have any advices in order to optimize a loop like the one I've described.</p>\n\n<p>I didn't try to run the script without the headless extension.</p>\n\n<p>Thanks a lot!!!</p>\n\n<p>System: </p>\n\n<pre><code>Fedora release 26 (Twenty Six)\n</code></pre>\n\n<p>Gems used/installed:</p>\n\n<pre><code>watir (6.10.3)\nwatir-screenshot-stitch (0.6.5)\nheadless (2.3.1)\n</code></pre>\n\n<p>Others:</p>\n\n<p>geckodriver 0.19.1\n   Firefox 57.0.1</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "email", "actionmailer"], "comments": [{"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1518003911, "post_id": 48662383, "comment_id": 84323230, "body": "I am not sure about SES but with other services like mailchimp etc you can always pass a <code>custom args</code> while sending an email. Of course you need to setup a webhook to receive updates from them and with every update they would send you the respective <code>arg</code> attached to a mail. assuming you are trying to track email events."}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1518016826, "post_id": 48662383, "comment_id": 84332241, "body": "When you say the &quot;actual&quot; message-id, you are referring to the actual message-id as seen... <i>where?</i> The <code>Message-Id:</code> in the headers of the actual email that&#39;s being delivered?"}, {"owner": {"reputation": 75, "user_id": 4474062, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4agUKgGRSo4/AAAAAAAAAAI/AAAAAAAAABY/5kUuBWmwY1k/photo.jpg?sz=128", "display_name": "sarthak agarwal", "link": "https://stackoverflow.com/users/4474062/sarthak-agarwal"}, "edited": false, "score": 0, "creation_date": 1518062565, "post_id": 48662383, "comment_id": 84352719, "body": "yes, by actual message-id I mean the message-id of the email received by the user."}], "owner": {"reputation": 75, "user_id": 4474062, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4agUKgGRSo4/AAAAAAAAAAI/AAAAAAAAABY/5kUuBWmwY1k/photo.jpg?sz=128", "display_name": "sarthak agarwal", "link": "https://stackoverflow.com/users/4474062/sarthak-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518002231, "creation_date": 1518001909, "last_edit_date": 1518002231, "question_id": 48662383, "link": "https://stackoverflow.com/questions/48662383/how-to-get-message-id-in-the-response-object-when-using-aws-ses", "title": "How to get message_id in the response object when using AWS SES", "body": "<p>I want to get the actual <code>MESSAGE-ID</code> of the email sent to the user when I send the mail from my app.</p>\n\n<p>gems I am using</p>\n\n<pre><code> gem 'aws-sdk`\n gem 'mail'\n</code></pre>\n\n<p>config looks like this </p>\n\n<pre><code>config.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {:xx =&gt; xx,:return_response =&gt; true}\n</code></pre>\n\n<p>when I do</p>\n\n<pre><code>response = MyMailer.some_mail.deliver_now\n</code></pre>\n\n<p>currently <code>response.message</code> returns the <code>Net::SMTP::Response</code> object which looks like this </p>\n\n<p><code>#&lt;Net::SMTP::Response:0x00YY @status=\"250\", @string=\"250 Ok XX-XX-XX\\n\"&gt;</code>\nwhere <code>XX-XX-XX</code> is the part of the actual message_id but what I need is the exact message_id set by SES.</p>\n\n<p>Is there any way of achieving it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 517304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2997a5a69e986cb27a2d1d87bb758b84?s=128&d=identicon&r=PG", "display_name": "Sujeev", "link": "https://stackoverflow.com/users/517304/sujeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1518003804, "last_edit_date": 1518003804, "creation_date": 1518003363, "answer_id": 48662838, "question_id": 48662272, "link": "https://stackoverflow.com/questions/48662272/rails-admin-using-separate-login-pages-for-admin-and-user/48662838#48662838", "title": "rails_admin using separate login pages for admin and user", "body": "<p>if you want to use two different paths use <code>namespace</code> in your <code>routes.rb</code></p>\n\n<p>Example:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root to: 'user#index'\n  .\n  .\n  .\n  namespace :admin do\n\n    root to: 'dashboard#index'\n    .\n    .\n    .\n  end\n\nend\n</code></pre>\n\n<p>Don't forget that you will have to namespace all the controllers that you plan to include in the admin section, as well as remember to have those files on the proper folder.</p>\n\n<p>For the above example you should have the admin controller inside the path <code>app/controllers/admin/dashboard_controller.rb</code> and the content of the controller should be similar to the below code</p>\n\n<pre><code>class Admin::DashboardController &lt; ActionController::Base\n  def index\n  end\nend\n</code></pre>\n\n<p>if you want to use one single login page for both admins and users, then you'll have to use a common controller to handle both</p>\n"}, {"tags": [], "owner": {"reputation": 1483, "user_id": 3793234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pOraI.jpg?s=128&g=1", "display_name": "Hamdi Bayhan", "link": "https://stackoverflow.com/users/3793234/hamdi-bayhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1518004435, "creation_date": 1518004435, "answer_id": 48663169, "question_id": 48662272, "link": "https://stackoverflow.com/questions/48662272/rails-admin-using-separate-login-pages-for-admin-and-user/48663169#48663169", "title": "rails_admin using separate login pages for admin and user", "body": "<p>You find more info in the below link for multiple devise user model:</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/wiki/How-to-Setup-Multiple-Devise-User-Models\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-to-Setup-Multiple-Devise-User-Models</a></p>\n"}], "owner": {"reputation": 991, "user_id": 3667635, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/651a17344e675a5a4d2fb46a538b1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "gintoki27", "link": "https://stackoverflow.com/users/3667635/gintoki27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1629, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518004435, "creation_date": 1518001584, "last_edit_date": 1518002646, "question_id": 48662272, "link": "https://stackoverflow.com/questions/48662272/rails-admin-using-separate-login-pages-for-admin-and-user", "title": "rails_admin using separate login pages for admin and user", "body": "<p>I'm using rails_admin and devise gem for my rails 5 project. I used CanCanCan for authorization. My problem is i must use separate login pages, one for normal user and one for admin user (now it uses same login page for both).\nDoes anyone has solution for my problem?</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["ruby", "docker", "sass", "rubygems", "bitbucket-pipelines"], "comments": [{"owner": {"reputation": 5446, "user_id": 3528590, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/MURuw.jpg?s=128&g=1", "display_name": "Stretch0", "link": "https://stackoverflow.com/users/3528590/stretch0"}, "edited": false, "score": 0, "creation_date": 1518004080, "post_id": 48661391, "comment_id": 84323339, "body": "Have tried changing docker image to <code>atlassian&#47;default-image:latest</code> to no avail"}], "answers": [{"comments": [{"owner": {"reputation": 5446, "user_id": 3528590, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/MURuw.jpg?s=128&g=1", "display_name": "Stretch0", "link": "https://stackoverflow.com/users/3528590/stretch0"}, "edited": false, "score": 0, "creation_date": 1518109661, "post_id": 48690829, "comment_id": 84380207, "body": "To get around this, I ended up using a ruby image and installing the php dependencies I needed. Luckily I only needed curl and composer so wasn&#39;t too hard but if you require a lot of php dependencies, it may be a little more tricky"}], "tags": [], "owner": {"reputation": 21, "user_id": 1496934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e53d8eba3a47e4f3b405b25cbb74b642?s=128&d=identicon&r=PG", "display_name": "t0n3", "link": "https://stackoverflow.com/users/1496934/t0n3"}, "is_accepted": false, "score": 1, "last_activity_date": 1518108954, "creation_date": 1518108954, "answer_id": 48690829, "question_id": 48661391, "link": "https://stackoverflow.com/questions/48661391/unable-to-install-sass-with-ruby-gem-failing-to-build-gem-native-extension/48690829#48690829", "title": "Unable to install sass with ruby gem. Failing to build gem native extension", "body": "<p>I noticed this error today too using gitlab-ci with a docker image based on php:7.0.  </p>\n\n<p>I tried installing <code>ruby-dev</code> and doing a <code>gem update --system</code> first as I found in another SO solution and it didn't fix the error.</p>\n\n<p>Sorry i couldn't post this as a comment, my reputation is too low, but I wanted you to know you're not alone.  Hopefully this is a gem toolchain issue that gets fixed quickly.</p>\n"}, {"comments": [{"owner": {"reputation": 156, "user_id": 2713830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cCUnc.jpg?s=128&g=1", "display_name": "Khaled Hassan", "link": "https://stackoverflow.com/users/2713830/khaled-hassan"}, "edited": false, "score": 0, "creation_date": 1589602352, "post_id": 48764679, "comment_id": 109365397, "body": "saved me a lot of time"}], "tags": [], "owner": {"reputation": 121, "user_id": 7646716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZKcT.jpg?s=128&g=1", "display_name": "Kargpfen", "link": "https://stackoverflow.com/users/7646716/kargpfen"}, "is_accepted": true, "score": 7, "last_activity_date": 1518518120, "creation_date": 1518518120, "answer_id": 48764679, "question_id": 48661391, "link": "https://stackoverflow.com/questions/48661391/unable-to-install-sass-with-ruby-gem-failing-to-build-gem-native-extension/48764679#48764679", "title": "Unable to install sass with ruby gem. Failing to build gem native extension", "body": "<p>I had the same problem. The following packages have solved the problem:</p>\n\n<p><code>apt-get install -y ruby-dev gcc automake libtool rubygems build-essential</code></p>\n\n<p>Best regards</p>\n"}], "owner": {"reputation": 5446, "user_id": 3528590, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/MURuw.jpg?s=128&g=1", "display_name": "Stretch0", "link": "https://stackoverflow.com/users/3528590/stretch0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "accepted_answer_id": 48764679, "answer_count": 2, "score": 3, "last_activity_date": 1518518120, "creation_date": 1517999185, "question_id": 48661391, "link": "https://stackoverflow.com/questions/48661391/unable-to-install-sass-with-ruby-gem-failing-to-build-gem-native-extension", "title": "Unable to install sass with ruby gem. Failing to build gem native extension", "body": "<p>Trying to install sass within a bit bucket pipelines docker instance and getting the error <code>Failed to build gem native extension</code></p>\n\n<p>The logs show the following:</p>\n\n<pre><code>gem install sass --no-user-install\nSuccessfully installed rb-fsevent-0.10.2\nBuilding native extensions.  This could take a while...\nERROR:  Error installing sass:\n    ERROR: Failed to build gem native extension.\n</code></pre>\n\n<p>I am using a image <code>php:7.1.1</code></p>\n\n<p>Ruby and Gem should be installed as in my script I run:</p>\n\n<pre><code>apt-get update &amp;&amp; apt-get install -y unzip nodejs ruby-full\ngem install sass --no-user-install\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssh", "capistrano3"], "comments": [{"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1517999241, "post_id": 48661285, "comment_id": 84320112, "body": "are you able to login to server by just using cmd line?"}, {"owner": {"reputation": 54, "user_id": 1987038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f38ecc28e3b4d8dd6d5dc86217fed50?s=128&d=identicon&r=PG", "display_name": "Oliver Tazl", "link": "https://stackoverflow.com/users/1987038/oliver-tazl"}, "reply_to_user": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1517999363, "post_id": 48661285, "comment_id": 84320203, "body": "Yes, this is possible. Sometimes there is a delay when I try to login after a deployment attempt."}, {"owner": {"reputation": 321, "user_id": 6196788, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154092438916449/picture?type=large", "display_name": "petecss", "link": "https://stackoverflow.com/users/6196788/petecss"}, "edited": false, "score": 1, "creation_date": 1517999396, "post_id": 48661285, "comment_id": 84320228, "body": "I sometimes run into problems with ssh and capistrano on a new macbook. I found running <code>ssh-add -k</code> fixes the issue for me."}, {"owner": {"reputation": 54, "user_id": 1987038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f38ecc28e3b4d8dd6d5dc86217fed50?s=128&d=identicon&r=PG", "display_name": "Oliver Tazl", "link": "https://stackoverflow.com/users/1987038/oliver-tazl"}, "edited": false, "score": 0, "creation_date": 1517999709, "post_id": 48661285, "comment_id": 84320486, "body": "I just tried <code>ssh-add -k</code> but it doesn&#39;t seem to work for me."}, {"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1518000185, "post_id": 48661285, "comment_id": 84320829, "body": "something to do with the server itself i gues"}, {"owner": {"reputation": 54, "user_id": 1987038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f38ecc28e3b4d8dd6d5dc86217fed50?s=128&d=identicon&r=PG", "display_name": "Oliver Tazl", "link": "https://stackoverflow.com/users/1987038/oliver-tazl"}, "reply_to_user": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1518003519, "post_id": 48661285, "comment_id": 84322982, "body": "@Nithin That&#39;s what I think as well, but unfortunately I have no idea even after googling a lot :("}, {"owner": {"reputation": 14663, "user_id": 343679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e65e5b1cd213c3b9c72f2680257d6eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sharj", "link": "https://stackoverflow.com/users/343679/sharj"}, "edited": false, "score": 0, "creation_date": 1518005021, "post_id": 48661285, "comment_id": 84323919, "body": "run <code>ssh-add -l</code> in your terminal to check if correct ssh is loaded"}, {"owner": {"reputation": 54, "user_id": 1987038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f38ecc28e3b4d8dd6d5dc86217fed50?s=128&d=identicon&r=PG", "display_name": "Oliver Tazl", "link": "https://stackoverflow.com/users/1987038/oliver-tazl"}, "reply_to_user": {"reputation": 14663, "user_id": 343679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e65e5b1cd213c3b9c72f2680257d6eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sharj", "link": "https://stackoverflow.com/users/343679/sharj"}, "edited": false, "score": 0, "creation_date": 1518007819, "post_id": 48661285, "comment_id": 84325668, "body": "@Sharj The command works fine! The problem occurs only after some successful steps."}], "owner": {"reputation": 54, "user_id": 1987038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f38ecc28e3b4d8dd6d5dc86217fed50?s=128&d=identicon&r=PG", "display_name": "Oliver Tazl", "link": "https://stackoverflow.com/users/1987038/oliver-tazl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518524954, "creation_date": 1517998916, "last_edit_date": 1518524954, "question_id": 48661285, "link": "https://stackoverflow.com/questions/48661285/rails-project-deploy-with-capistrano-failed-ssh", "title": "Rails Project deploy with Capistrano failed SSH", "body": "<p>I have a problem with my rails project deployment.</p>\n\n<p>The (a bit anonymized) error message is:</p>\n\n<blockquote>\n  <p>cap aborted!\n  SSHKit::Runner::ExecuteError: Exception while executing as user@host: Connection reset by peer</p>\n  \n  <p>Caused by:\n  Errno::ECONNRESET: Connection reset by peer</p>\n</blockquote>\n\n<p>I use Ruby 2.4.3, Rails 5.1.4 with Capistrano 3.10 on a macOS 10.13.3.\nOn the other side is an Ubuntu 16.04.3 server with the latest updates.</p>\n\n<p>I already tried to reconfigure my sshd on my server with:</p>\n\n<pre><code>ClientAliveInterval 60\nClientAliveCountMax 100\nMaxStartups 100 \n</code></pre>\n\n<p><strong>EDIT:</strong> To clarify it a bit I have to add that the error occurs after some successful steps. Not the same step every time. Sometimes <code>bundle install</code> sometimes <code>precompile assets</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 0, "creation_date": 1517999561, "post_id": 48661238, "comment_id": 84320369, "body": "Make sure <code>@specialist</code> is defined in your controller action"}, {"owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "edited": false, "score": 0, "creation_date": 1518001239, "post_id": 48661238, "comment_id": 84321540, "body": "Please post your controller code"}, {"owner": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "reply_to_user": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "edited": false, "score": 0, "creation_date": 1518001663, "post_id": 48661238, "comment_id": 84321798, "body": "I have added the code of the controller to the question @Dyaniyal Nadar"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1518006007, "post_id": 48661238, "comment_id": 84324540, "body": "In what page/action are you using the render code? in <code>index</code> or <code>new</code>?"}, {"owner": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "reply_to_user": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1518009186, "post_id": 48661238, "comment_id": 84326761, "body": "I&#39;m using it in the static page &quot;home&quot; @Aguardientico"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1518138380, "post_id": 48661238, "comment_id": 84393254, "body": "@mr-nash so, you are trying to use a variable that you didn&#39;t set <code>@specialist</code>, is ok to use an &quot;static&quot; page but you need to route that page to an action in a controller and in the action set <code>@specialist</code> to be able to use in your static page &quot;home&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518001799, "post_id": 48662207, "comment_id": 84321876, "body": "I&#39;ve just posted the controller on the question and <code>@specialist = Specialist.new</code> is defined already"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518001980, "post_id": 48662207, "comment_id": 84321991, "body": "@MrNash try to removing this part <code>, locals: {specialist: @specialist}</code> and updating <code>form_with model: @specialist, local: true do |form|</code>"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518002698, "post_id": 48662207, "comment_id": 84322452, "body": "And <code>if specialist.errors.any?</code> to <code>if @specialist.errors.any?</code> @MrNash"}, {"owner": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518004027, "post_id": 48662207, "comment_id": 84323310, "body": "I get the same error after making this change   <code>&lt;%= form_with model: @specialist, local: true do |form| %&gt;   &lt;% if @specialist.errors.any? %&gt;     &lt;div id=&quot;error_explanation&quot;&gt;       &lt;h2&gt;&lt;%= pluralize(specialist.errors.count, &quot;error&quot;) %&gt; prohibited this specialist from being saved:&lt;&#47;h2&gt;        &lt;ul&gt;</code>"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518004143, "post_id": 48662207, "comment_id": 84323379, "body": "Restart the server and then try"}, {"owner": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518004625, "post_id": 48662207, "comment_id": 84323661, "body": "Same result @fool-dev"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518005172, "post_id": 48662207, "comment_id": 84324003, "body": "The <code>&lt;% if @specialist.errors.any? %&gt;</code> total part of error block use upper the form, I mean use this outside of the form"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518005634, "post_id": 48662207, "comment_id": 84324305, "body": "@MrNash Updated the answer based what saying the rails guide"}, {"owner": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518011431, "post_id": 48662207, "comment_id": 84328378, "body": "Removing the whole if blocke that contains <code>specialist.errors</code> is what seems to work but I don&#39;t know if I should define it anywhere else @fool-dev"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "edited": false, "score": 0, "creation_date": 1518012912, "post_id": 48662207, "comment_id": 84329376, "body": "I have used partials on my projects like on the new page <code>&lt;%= render &quot;partials&#47;form&quot; %&gt;</code> and <code>&lt;%= render &quot;commons&#47;error&quot;,  obj: @variable %&gt;</code>  I mean two partials one  for form &amp; one error then the <code>if obj.errors.any?</code>"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1518005601, "last_edit_date": 1518005601, "creation_date": 1518001360, "answer_id": 48662207, "question_id": 48661238, "link": "https://stackoverflow.com/questions/48661238/rendering-a-partial-form-on-a-static-page/48662207#48662207", "title": "Rendering a partial form on a static page", "body": "<p>Try the following</p>\n\n<p>On the controller, I think missing something, try the following</p>\n\n<pre><code>def new\n    @specialist = Specialist.new\nend\n</code></pre>\n\n<p>On the form</p>\n\n<pre><code>&lt;%= form_with model: @specialist, local: true do |form| %&gt;\n</code></pre>\n\n<p>Or update form like below</p>\n\n<pre><code>&lt;%= form_with scope: :specialist, url: specialists_path, local: true do |form| %&gt;\n</code></pre>\n\n<p>Rails 5 guides say about validation see <a href=\"http://guides.rubyonrails.org/getting_started.html#adding-some-validation\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>About <code>form_with</code> you can learn more the following <a href=\"https://m.patrikonrails.com/rails-5-1s-form-with-vs-old-form-helpers-3a5f72a8c78a\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 11, "user_id": 8855315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8cbd7085847b479af70046b757190c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nash", "link": "https://stackoverflow.com/users/8855315/mr-nash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518005601, "creation_date": 1517998798, "last_edit_date": 1518001575, "question_id": 48661238, "link": "https://stackoverflow.com/questions/48661238/rendering-a-partial-form-on-a-static-page", "title": "Rendering a partial form on a static page", "body": "<p>I have a static page I named home and used scaffold to generate a form called Specialists and when I try to render the form using the following  code </p>\n\n<pre><code>&lt;%= render :partial =&gt; 'specialists/form', locals: {specialist: @specialist} %&gt;\n</code></pre>\n\n<p>I get the following error <code>undefined method \"errors\" for nil:NilClass</code> and here is the code snippet of the error</p>\n\n<p>Extracted source (around line #2):</p>\n\n<pre><code>&lt;%= form_with(model: specialist, local: true) do |form| %&gt;\n  &lt;% if specialist.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(specialist.errors.count, \"error\") %&gt; prohibited this specialist from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n</code></pre>\n\n<p>I tried to check previous similar questions but none of them had this error because of this, I am pretty new to Ruby on Rails.</p>\n\n<p>Controller code </p>\n\n<pre><code>class SpecialistsController &lt; ApplicationController\n  before_action :set_specialist, only: [:show, :edit, :update, :destroy]\n\n  # GET /specialists\n  # GET /specialists.json\n  def index\n    @specialists = Specialist.all\n  end\n\n  # GET /specialists/1\n  # GET /specialists/1.json\n  def show\n  end\n\n  # GET /specialists/new\n  def new\n    @specialist = Specialist.new\n  end\n\n  # GET /specialists/1/edit\n  def edit\n  end\n\n  # POST /specialists\n  # POST /specialists.json\n  def create\n    @specialist = Specialist.new(specialist_params)\n\n    respond_to do |format|\n      if @specialist.save\n        format.html { redirect_to @specialist, notice: 'Specialist was successfully created.' }\n        format.json { render :show, status: :created, location: @specialist }\n      else\n        format.html { render :new }\n        format.json { render json: @specialist.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /specialists/1\n  # PATCH/PUT /specialists/1.json\n  def update\n    respond_to do |format|\n      if @specialist.update(specialist_params)\n        format.html { redirect_to @specialist, notice: 'Specialist was successfully updated.' }\n        format.json { render :show, status: :ok, location: @specialist }\n      else\n        format.html { render :edit }\n        format.json { render json: @specialist.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /specialists/1\n  # DELETE /specialists/1.json\n  def destroy\n    @specialist.destroy\n    respond_to do |format|\n      format.html { redirect_to specialists_url, notice: 'Specialist was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_specialist\n      @specialist = Specialist.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def specialist_params\n      params.require(:specialist).permit(:firstname, :lastname, :phone, :email, :interest)\n    end\nend'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 1228, "user_id": 960819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c8d761371f83ff28f5e96da0204fe?s=128&d=identicon&r=PG", "display_name": "Pere Joan Martorell", "link": "https://stackoverflow.com/users/960819/pere-joan-martorell"}, "edited": false, "score": 0, "creation_date": 1617928505, "post_id": 48660333, "comment_id": 118454345, "body": "Maybe the current working directory of the shell that&#39;s used to start the Rails app doesn&#39;t exist (maybe removed by another process), and therefore getcwd throws an error."}], "owner": {"reputation": 77, "user_id": 5217508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b7960034bcda62113c4dff759296b4?s=128&d=identicon&r=PG", "display_name": "honestraj", "link": "https://stackoverflow.com/users/5217508/honestraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 938, "favorite_count": 0, "closed_date": 1518074087, "answer_count": 0, "score": 6, "last_activity_date": 1517996210, "creation_date": 1517996210, "question_id": 48660333, "link": "https://stackoverflow.com/questions/48660333/error-getwd-no-such-file-or-directory-getcwd", "closed_reason": "Duplicate", "title": "Error: `getwd` : No such file or directory - getcwd?", "body": "<p>Can you anyone help me how to solve this problem </p>\n\n<blockquote>\n  <p>gems/bundler-1.16.0.pre.3/lib/bundler/shared_helpers.rb:71:in `getwd':\n  No such file or directory - getcwd (Errno::ENOENT)</p>\n</blockquote>\n"}, {"tags": ["ruby", "sequel"], "comments": [{"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1517998031, "post_id": 48660111, "comment_id": 84319306, "body": "Do you need to save any data?"}, {"owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "reply_to_user": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1518001890, "post_id": 48660111, "comment_id": 84321934, "body": "that would be best :)"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1518002738, "post_id": 48660111, "comment_id": 84322483, "body": "you can always write raw sql to modify that column"}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "edited": false, "score": 0, "creation_date": 1518014927, "post_id": 48661039, "comment_id": 84330849, "body": "hmm, that also results in a size of 255, weird :S"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "edited": false, "score": 0, "creation_date": 1518016520, "post_id": 48661039, "comment_id": 84332022, "body": "Can you show the whole migration file, when you try with this?"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "edited": false, "score": 0, "creation_date": 1518017108, "post_id": 48661039, "comment_id": 84332442, "body": "And maybe your schema.rb? Would be nice to see your database structure."}], "tags": [], "owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "is_accepted": false, "score": 1, "last_activity_date": 1517998188, "creation_date": 1517998188, "answer_id": 48661039, "question_id": 48660111, "link": "https://stackoverflow.com/questions/48660111/change-sequel-column-string-size/48661039#48661039", "title": "change Sequel Column String Size", "body": "<p>I don't know Sequel, but in Postgres you can use <code>change_column</code> with <code>:limit</code> like this:</p>\n\n<p><code>change_column :users, :car_model, :string, limit: 30</code></p>\n\n<p>Hope it helps!</p>\n"}, {"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 2, "last_activity_date": 1518017097, "creation_date": 1518017097, "answer_id": 48667397, "question_id": 48660111, "link": "https://stackoverflow.com/questions/48660111/change-sequel-column-string-size/48667397#48667397", "title": "change Sequel Column String Size", "body": "<p>You were almost correct. You need to use <code>String</code> instead of <code>:string</code>:</p>\n\n<pre><code>set_column_type :car_model, String, size: 30\n</code></pre>\n\n<p>Note that that uses <code>varchar(30)</code>, not <code>char(30)</code>.  In general, unless you know you want <code>char</code>, you are better off with <code>varchar</code>.</p>\n\n<p>Alternatively, anytime you want to force a database-specific type, you can just specify it as a string:</p>\n\n<pre><code>set_column_type :car_model, 'char(30)'\n</code></pre>\n"}], "owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 48667397, "answer_count": 2, "score": 0, "last_activity_date": 1518017097, "creation_date": 1517995593, "last_edit_date": 1517996180, "question_id": 48660111, "link": "https://stackoverflow.com/questions/48660111/change-sequel-column-string-size", "title": "change Sequel Column String Size", "body": "<p>I'd like to change a String colums' size with a migration.</p>\n\n<p>I tried</p>\n\n<pre><code>Sequel.migration do\n  up do\n    alter_table(:users) do\n      set_column_type :car_model, :string, size: 30\n    end\n  end\n\n  down do\n  end\nend\n</code></pre>\n\n<p>but that gives me a SQL syntax error migrating:</p>\n\n<pre><code>Sequel::DatabaseError: Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'String(30) NULL' at line 1\n</code></pre>\n\n<p>Any way to do this?\nSo currently the field is a String of size 20, I'd like to make it a String of size 30.</p>\n\n<p>Thanks in advance!</p>\n\n<p>UPDATE\nI also tried</p>\n\n<pre><code>set_column_type :car_model, char(30)\n</code></pre>\n\n<p>that however results in me getting a <code>String :car_model, :size=&gt;255</code> column :/</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1483, "user_id": 3793234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pOraI.jpg?s=128&g=1", "display_name": "Hamdi Bayhan", "link": "https://stackoverflow.com/users/3793234/hamdi-bayhan"}, "edited": false, "score": 0, "creation_date": 1517995535, "post_id": 48660017, "comment_id": 84317597, "body": "Did you run rails db:migrate command?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1517995608, "post_id": 48660017, "comment_id": 84317660, "body": "How do you run it? Do you use <code>bin&#47;rails</code>?"}, {"owner": {"reputation": 570, "user_id": 4232185, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9UBT-lyLyqY/AAAAAAAAAAI/AAAAAAAAABQ/Q0YkmwqxvXs/photo.jpg?sz=128", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/4232185/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1517995760, "post_id": 48660017, "comment_id": 84317759, "body": "When are you facing this error? Is there any migration pending?"}, {"owner": {"reputation": 139, "user_id": 2520902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NZY5J.jpg?s=128&g=1", "display_name": "maricavor", "link": "https://stackoverflow.com/users/2520902/maricavor"}, "edited": false, "score": 0, "creation_date": 1517996259, "post_id": 48660017, "comment_id": 84318088, "body": "I use just \u2018rails g\u2019, there are no pending migrations"}, {"owner": {"reputation": 139, "user_id": 2520902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NZY5J.jpg?s=128&g=1", "display_name": "maricavor", "link": "https://stackoverflow.com/users/2520902/maricavor"}, "edited": false, "score": 0, "creation_date": 1517996678, "post_id": 48660017, "comment_id": 84318388, "body": "Why did this \u2018 - - [] (4.2)\u2019 start appearing after I enter command?"}, {"owner": {"reputation": 517, "user_id": 1656464, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2f0c052c0c862fa12503177a9d861bc9?s=128&d=identicon&r=PG", "display_name": "AKovtunov", "link": "https://stackoverflow.com/users/1656464/akovtunov"}, "edited": false, "score": 0, "creation_date": 1517998343, "post_id": 48660017, "comment_id": 84319520, "body": "I think some dependencies are messed up. Do you use git? You can check what was updated and make a rollback"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1517999388, "post_id": 48660017, "comment_id": 84320220, "body": "Use <code>bin&#47;rails g</code> then."}, {"owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "edited": false, "score": 0, "creation_date": 1517999902, "post_id": 48660017, "comment_id": 84320614, "body": "Have you tried <code>bundle exec rails g ...</code>"}, {"owner": {"reputation": 139, "user_id": 2520902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NZY5J.jpg?s=128&g=1", "display_name": "maricavor", "link": "https://stackoverflow.com/users/2520902/maricavor"}, "edited": false, "score": 0, "creation_date": 1518025475, "post_id": 48660017, "comment_id": 84338069, "body": "I have tried <code>bundle exec</code> and <code>bin&#47;rails</code>. It is all the same. I do not use git for development. I even reinstalled gemset, it did not help."}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 2520902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NZY5J.jpg?s=128&g=1", "display_name": "maricavor", "link": "https://stackoverflow.com/users/2520902/maricavor"}, "is_accepted": true, "score": 0, "last_activity_date": 1518027366, "creation_date": 1518027366, "answer_id": 48670723, "question_id": 48660017, "link": "https://stackoverflow.com/questions/48660017/rails-generate-command-error/48670723#48670723", "title": "Rails Generate command error", "body": "<p>OK! I solved by myself. As I could see from this line</p>\n\n<pre><code>from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/encrypted_store-0.3.0/lib/generators/encrypted_store/upgrade/ZeroOneFive/templates/upgrade_encryption_keys_to_015.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>It had dependency from gem encrypted_store. I removed this gem from Gemfile and reinstalled in with bundle command (gem 'encrypted_store', '~> 0.2.8'). After this the error was gone.</p>\n"}], "owner": {"reputation": 139, "user_id": 2520902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NZY5J.jpg?s=128&g=1", "display_name": "maricavor", "link": "https://stackoverflow.com/users/2520902/maricavor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 48670723, "answer_count": 1, "score": 0, "last_activity_date": 1518027366, "creation_date": 1517995273, "question_id": 48660017, "link": "https://stackoverflow.com/questions/48660017/rails-generate-command-error", "title": "Rails Generate command error", "body": "<p>I am using Rails version 4.2.7.1 and ruby 2.2.5 with rvm.\nAfter bundle update I cannot run <code>rails g</code> command anymore.\nThe following error keeps appearing:</p>\n\n<pre><code>-- [](4.2)\n/Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activerecord-4.2.7.1/lib/active_record/migration.rb:664:in `block in method_missing': undefined method `[]' for #&lt;ActiveRecord::Migration:0x007fce8f996460&gt; (NoMethodError)\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activerecord-4.2.7.1/lib/active_record/migration.rb:634:in `block in say_with_time'\n    from /Users/Sergei/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/benchmark.rb:288:in `measure'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activerecord-4.2.7.1/lib/active_record/migration.rb:634:in `say_with_time'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activerecord-4.2.7.1/lib/active_record/migration.rb:654:in `method_missing'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activerecord-4.2.7.1/lib/active_record/migration.rb:416:in `method_missing'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/encrypted_store-0.3.0/lib/generators/encrypted_store/upgrade/ZeroOneFive/templates/upgrade_encryption_keys_to_015.rb:1:in `&lt;top (required)&gt;'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activesupport-4.2.7.1/lib/active_support/dependencies.rb:274:in `require'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activesupport-4.2.7.1/lib/active_support/dependencies.rb:274:in `block in require'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activesupport-4.2.7.1/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/activesupport-4.2.7.1/lib/active_support/dependencies.rb:274:in `require'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/encrypted_store-0.3.0/lib/encrypted_store/railtie.rb:18:in `block (2 levels) in &lt;class:Railtie&gt;'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/encrypted_store-0.3.0/lib/encrypted_store/railtie.rb:18:in `each'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/encrypted_store-0.3.0/lib/encrypted_store/railtie.rb:18:in `block in &lt;class:Railtie&gt;'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/railtie.rb:228:in `call'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/railtie.rb:228:in `block in run_generators_blocks'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/railtie.rb:245:in `each'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/railtie.rb:245:in `each_registered_block'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/railtie.rb:228:in `run_generators_blocks'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/application.rb:462:in `block in run_generators_blocks'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/engine/railties.rb:13:in `each'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/engine/railties.rb:13:in `each'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/application.rb:462:in `run_generators_blocks'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/engine.rb:461:in `load_generators'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/commands/commands_tasks.rb:129:in `generate_or_destroy'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/commands/commands_tasks.rb:50:in `generate'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /Users/Sergei/.rvm/gems/ruby-2.2.5@rails4/gems/railties-4.2.7.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Already tried reinstalling gemset and deleting all previous migration files, but it did not help. What could be the reason?</p>\n"}, {"tags": ["ruby", "performance", "memory", "memory-management"], "answers": [{"comments": [{"owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "edited": false, "score": 0, "creation_date": 1518648752, "post_id": 48794894, "comment_id": 84597654, "body": "&quot;Ruby does in fact free memory after use&quot; - intersting -- do you know where I can read about this?"}], "tags": [], "owner": {"reputation": 1132, "user_id": 1754827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GGorI.png?s=128&g=1", "display_name": "Aurelia", "link": "https://stackoverflow.com/users/1754827/aurelia"}, "is_accepted": false, "score": 1, "last_activity_date": 1518636950, "creation_date": 1518636950, "answer_id": 48794894, "question_id": 48659477, "link": "https://stackoverflow.com/questions/48659477/does-a-low-ruby-gc-heap-growth-factor-affect-performance-after-initial-allocatio/48794894#48794894", "title": "Does a low RUBY_GC_HEAP_GROWTH_FACTOR affect performance after initial allocation?", "body": "<p><code>RUBY_GC_HEAP_GROWTH_FACTOR</code> determines how much extra memory is allocated if Ruby runs out of memory. If memory requirements were to spike suddenly in your app, such a low factor will slow down your responses significantly. If the number of requests you handle stays almost constant you could get away with such a low setting - but with 1% increases the \"boot up time\" of your app could take up to a few minutes during which performance will be abysmal. Allocating memory, especially in small chunks using a lot of syscalls can be very slow. It is up to you to decide if saving a few MB of memory will be worth it, but I'd tend to say no.</p>\n\n<p>It's also worth nothing that Ruby <em>does</em> in fact free memory after use (with the exception of constants), although quite slowly.</p>\n"}], "owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518636950, "creation_date": 1517993551, "question_id": 48659477, "link": "https://stackoverflow.com/questions/48659477/does-a-low-ruby-gc-heap-growth-factor-affect-performance-after-initial-allocatio", "title": "Does a low RUBY_GC_HEAP_GROWTH_FACTOR affect performance after initial allocation?", "body": "<p>If I set <code>RUBY_GC_HEAP_GROWTH_FACTOR</code> very low (say, 1.01) for my web app, will this affect performance after the initial boot of the server processes? Since ruby asks for OS memory and never gives it back, isn't this initial growth phase the only thing that is affected?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 902, "user_id": 6102488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dF68y.png?s=128&g=1", "display_name": "Aravind Vemula", "link": "https://stackoverflow.com/users/6102488/aravind-vemula"}, "edited": false, "score": 0, "creation_date": 1518428539, "post_id": 48659529, "comment_id": 84486493, "body": "Thank you Sergio Tulentsev, It is helpful. But currently I am using <code>composite design pattern</code> for the job. And I just wanted to know how to force the child object to call super(As we do in JAVA). I found there is no way."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 902, "user_id": 6102488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dF68y.png?s=128&g=1", "display_name": "Aravind Vemula", "link": "https://stackoverflow.com/users/6102488/aravind-vemula"}, "edited": false, "score": 0, "creation_date": 1518431027, "post_id": 48659529, "comment_id": 84488147, "body": "@AravindVemula: yes, ruby is much more allowing."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1517993705, "creation_date": 1517993705, "answer_id": 48659529, "question_id": 48659450, "link": "https://stackoverflow.com/questions/48659450/how-to-check-whether-child-method-called-super-or-not/48659529#48659529", "title": "How to check whether child method called super or not", "body": "<blockquote>\n  <p>I want raise an error in case of Example 2 that super must be called on overridden method</p>\n</blockquote>\n\n<p>It's a wrong tool for the job. You can't dictate children what to do. This is better done with some OO design. If some work <em>has</em> to be done always, then don't suggest child classes to override the method. Instead, override only the \"custom\" part. Example:</p>\n\n<pre><code>class Parent\n  def a_method\n    crucial_work do\n      custom_handling\n    end\n  end\n\n  # child classes override this one, not a_method\n  def custom_handling\n    # no-op\n  end\nend\n\nclass Child &lt; Parent\n  def custom_handling\n    \"doing custom handling here\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 902, "user_id": 6102488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dF68y.png?s=128&g=1", "display_name": "Aravind Vemula", "link": "https://stackoverflow.com/users/6102488/aravind-vemula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 48659529, "answer_count": 1, "score": 0, "last_activity_date": 1561725461, "creation_date": 1517993450, "last_edit_date": 1561725461, "question_id": 48659450, "link": "https://stackoverflow.com/questions/48659450/how-to-check-whether-child-method-called-super-or-not", "title": "How to check whether child method called super or not", "body": "<pre><code>class Parent\n  def a_method\n    # some crucial work has to run for every child class\n  end\nend\n# Example 1\nclass Child &lt; Parent\n  def a_method\n    super\n  end\nend\n\n# Example 2\nclass Child &lt; Parent\n  def a_method\n  end\nend\n</code></pre>\n\n<p>I want to raise an error in case of Example 2\nthat <code>super</code> must be called on overridden method</p>\n"}, {"tags": ["ruby", "escaping", "ascii"], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 5, "last_activity_date": 1517988609, "creation_date": 1517988609, "answer_id": 48658196, "question_id": 48658022, "link": "https://stackoverflow.com/questions/48658022/how-to-print-an-escape-character-in-ruby/48658196#48658196", "title": "How to print an escape character in Ruby?", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-inspect\" rel=\"noreferrer\">String#inspect</a> </p>\n\n<pre><code>puts word.inspect #=&gt; \"x\\nz\"\n</code></pre>\n\n<p>Or just <code>p</code></p>\n\n<pre><code>p word #=&gt; \"x\\nz\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 501, "user_id": 4681998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e983411d6b657a245740031a55ed4b3?s=128&d=identicon&r=PG", "display_name": "preferred_anon", "link": "https://stackoverflow.com/users/4681998/preferred-anon"}, "edited": false, "score": 0, "creation_date": 1543926135, "post_id": 48675489, "comment_id": 94086490, "body": "What exactly is wrong with using <code>#inspect</code>? The docs say &quot;Returns a printable version of str, surrounded by quote marks, with special characters escaped.&quot;. This sounds like exactly what the OP wants, and sounds like a perfectly reasonable definition of a &#39;format&#39;. Can you clarify your objection?"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1518049165, "creation_date": 1518049165, "answer_id": 48675489, "question_id": 48658022, "link": "https://stackoverflow.com/questions/48658022/how-to-print-an-escape-character-in-ruby/48675489#48675489", "title": "How to print an escape character in Ruby?", "body": "<blockquote>\n  <p>I have a string containing an escape character:</p>\n</blockquote>\n\n<p>No, you don't. You have a string containing a newline.</p>\n\n<blockquote>\n  <p>How do I get <code>puts word</code> to output <code>x\\nz</code> instead of creating a new line?</p>\n</blockquote>\n\n<p>The easiest way would be to just create the string in the format you want in the first place:</p>\n\n<pre><code>word = 'x\\nz'\n# or \nword = \"x\\\\nz\"\n</code></pre>\n\n<p>If that isn't possible, you can translate the string the way you want:</p>\n\n<pre><code>word = word.gsub(\"\\n\", '\\n')\n# or\nword.gsub!(\"\\n\", '\\n')\n</code></pre>\n\n<p>You may be tempted to do something like </p>\n\n<pre><code>puts word.inspect\n# or\np word\n</code></pre>\n\n<p>Don't do that! <code>#inspect</code> is not guaranteed to have any particular format. The only requirement it has, is that it should return a human-readable string representation that is suitable for debugging. You should never rely on the content of <code>#inspect</code>, the only thing you should rely on, is that it is human readable.</p>\n"}], "owner": {"reputation": 23, "user_id": 9325554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b0bc1ef864f6a20fb5e57e9c162528?s=128&d=identicon&r=PG&f=1", "display_name": "user9325554", "link": "https://stackoverflow.com/users/9325554/user9325554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1685, "favorite_count": 0, "accepted_answer_id": 48658196, "answer_count": 2, "score": 2, "last_activity_date": 1518049165, "creation_date": 1517987924, "last_edit_date": 1518001374, "question_id": 48658022, "link": "https://stackoverflow.com/questions/48658022/how-to-print-an-escape-character-in-ruby", "title": "How to print an escape character in Ruby?", "body": "<p>I have a string containing an escape character:</p>\n\n<pre><code>word = \"x\\nz\"\n</code></pre>\n\n<p>and I would like to print it as <code>x\\nz</code>.</p>\n\n<p>However, <code>puts word</code> gives me:</p>\n\n<pre><code>x\nz\n</code></pre>\n\n<p>How do I get <code>puts word</code> to output <code>x\\nz</code> instead of creating a new line?</p>\n"}, {"tags": ["ruby", "mongodb"], "answers": [{"tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1517991759, "creation_date": 1517991759, "answer_id": 48658997, "question_id": 48657639, "link": "https://stackoverflow.com/questions/48657639/how-can-i-create-a-mongo-user-using-ruby-mongo-client-without-password-being-exp/48658997#48658997", "title": "How can i create a mongo user using ruby mongo client without password being exposed?", "body": "<p>just use standard ruby mongo driver: <a href=\"https://github.com/mongodb/mongo-ruby-driver\" rel=\"nofollow noreferrer\">https://github.com/mongodb/mongo-ruby-driver</a></p>\n\n<p>here you have API documentation in which you'll find details on authentication (essentially it requires passing <code>user</code> and <code>password</code> keys in initialization data): <a href=\"http://api.mongodb.com/ruby/2.5.0/Mongo/Client.html\" rel=\"nofollow noreferrer\">http://api.mongodb.com/ruby/2.5.0/Mongo/Client.html</a></p>\n\n<p>--</p>\n\n<blockquote>\n  <p>Also i need the ruby mongo client to be created without the password\n  hardcoded</p>\n</blockquote>\n\n<p>You can always keep authentication details in your app's config </p>\n\n<p>OR </p>\n\n<p>for example pass it in environment variables when starting process [they will be available through <code>ENV</code> hash]. Example of how it is used\n<code>RAILS_ENV=developent rails s</code> - <code>RAILS_ENV</code> is an environment variable accessible in your app by <code>ENV['RAILS_ENV']</code>\nIf you decide to do it this way you can keep authentication outside your app on the machine on which you're running your app.</p>\n"}], "owner": {"reputation": 155, "user_id": 7018132, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1113876485361288/picture?type=large", "display_name": "Jenisha", "link": "https://stackoverflow.com/users/7018132/jenisha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1517991759, "creation_date": 1517986279, "question_id": 48657639, "link": "https://stackoverflow.com/questions/48657639/how-can-i-create-a-mongo-user-using-ruby-mongo-client-without-password-being-exp", "title": "How can i create a mongo user using ruby mongo client without password being exposed?", "body": "<p>I need a mongo client with user of only read access for all databases.\nAlso i need the ruby mongo client to be created without the password hardcoded?</p>\n\n<p>Any suggestions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "computer-science"], "comments": [{"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1517982800, "post_id": 48656838, "comment_id": 84311335, "body": "No not possible in any regex as I think 123 is dynamic not static 123, you better write a program in ruby to fix it... not a direct/indirect regex solvable problem"}, {"owner": {"reputation": 792, "user_id": 5969346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSGiI.jpg?s=128&g=1", "display_name": "Rehan Haider", "link": "https://stackoverflow.com/users/5969346/rehan-haider"}, "edited": false, "score": 0, "creation_date": 1517983842, "post_id": 48656838, "comment_id": 84311742, "body": "What is minimum length of repeating group?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6847053"}, "edited": false, "score": 0, "creation_date": 1517984181, "post_id": 48656838, "comment_id": 84311881, "body": "Sorry, I&#39;ve updated the question - Please check!"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1517985627, "post_id": 48656838, "comment_id": 84312509, "body": "you should better not solve those kind of questions with string manipulations. do some math, and believe me, it will be easier."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1517985825, "post_id": 48656838, "comment_id": 84312594, "body": "How will this help you solve the exercise?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6847053"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1517985827, "post_id": 48656838, "comment_id": 84312597, "body": "@marmeladze , Yes you&#39;re right. Things didn&#39;t worked out like i thought. After so much thinking in this way - i searched on google and I finally did it from <a href=\"http://johnnycoder.com/blog/2010/07/21/project-euler-26-ruby/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6847053"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1517986058, "post_id": 48656838, "comment_id": 84312711, "body": "@SagarPandya, i thought i&#39;ll save all the repeated numbers in an array and loop through that array to find maximum count(as this is string - string.count) of all the elements. There are many problems &lt;br&gt; 1. I didn&#39;t read the question properly, 2. Regex way doesn&#39;t work. I found solution <a href=\"http://johnnycoder.com/blog/2010/07/21/project-euler-26-ruby/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1517997407, "post_id": 48656838, "comment_id": 84318896, "body": "@AdityaNagla you should try to find a solution yourself."}], "answers": [{"tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 0, "last_activity_date": 1517983003, "creation_date": 1517983003, "answer_id": 48656912, "question_id": 48656838, "link": "https://stackoverflow.com/questions/48656838/ruby-regex-for-repeated-numbers-in-a-string/48656912#48656912", "title": "Ruby Regex for repeated numbers in a string", "body": "<p>Try this </p>\n\n<pre><code>99123123123.scan(/123/).count\n12312312.scan(/123/).count\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 792, "user_id": 5969346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSGiI.jpg?s=128&g=1", "display_name": "Rehan Haider", "link": "https://stackoverflow.com/users/5969346/rehan-haider"}, "is_accepted": true, "score": 1, "last_activity_date": 1520513190, "last_edit_date": 1520513190, "creation_date": 1517984256, "answer_id": 48657171, "question_id": 48656838, "link": "https://stackoverflow.com/questions/48656838/ruby-regex-for-repeated-numbers-in-a-string/48657171#48657171", "title": "Ruby Regex for repeated numbers in a string", "body": "<p>This regex will detect all repeating groups.</p>\n\n<p><code>(\\d+)(?=.*\\1)</code></p>\n\n<p><a href=\"https://regexr.com/3kd04\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>Works great with ruby too.</p>\n\n<pre><code>result = '9912341234123'.scan(/(\\d+)(?=.*\\1)/)\n#gets group with largest length\nlongestRepeatingGroup = result.max_by{|arr| arr[0].length}\n\nputs longestRepeatingGroup\nputs longestRepeatingGroup[0].length\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6847053"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 48657171, "answer_count": 2, "score": 0, "last_activity_date": 1520513190, "creation_date": 1517982657, "last_edit_date": 1517984079, "question_id": 48656838, "link": "https://stackoverflow.com/questions/48656838/ruby-regex-for-repeated-numbers-in-a-string", "title": "Ruby Regex for repeated numbers in a string", "body": "<p>If i have a string like <code>\"123123123\"</code> - Here <code>123</code> is repeated 3 times.\n<br>\n1. So how can i get only <code>\"123\"</code> in ruby?\n<br>\n2. So if the string is <code>\"12312312\"</code> - Here <code>123</code> is repeated 2 times and then just <code>12</code>, so here still i need to get <code>\"123\"</code>.\n<br>\n3. Even if string is <code>99123123123</code>, still i need to get <code>123</code>.\n<br>\nIs this possible in Ruby Regex?\n<br><br>\nEDIT: I want this to solve <a href=\"https://projecteuler.net/problem=26\" rel=\"nofollow noreferrer\">Project Euler Problem 26</a> . So here <code>123</code> can be anything. All i want is to extract 1 number of at-least 2 repeated numbers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "google-app-engine", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 954, "user_id": 9188803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CESgG.png?s=128&g=1", "display_name": "Rodrigo C.", "link": "https://stackoverflow.com/users/9188803/rodrigo-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1518517731, "creation_date": 1518517731, "answer_id": 48764534, "question_id": 48655343, "link": "https://stackoverflow.com/questions/48655343/inexperienced-rails-user-wanting-to-connect-postgresql-to-already-existing-app/48764534#48764534", "title": "Inexperienced Rails User: Wanting to Connect PostgreSQL to Already Existing App: Server Will not Connect", "body": "<p>If that error appears, it means the virtual machine where the database is hosted is not being accessed correctly.</p>\n\n<p>The IP address you need for connecting to the database is indicated when you use SSH to access the PostgreSQL instance you created with the launcher (check the IP address that appears under the Bitnami logo).</p>\n\n<p>You also have to <a href=\"https://docs.bitnami.com/virtual-machine/faq/#how-to-open-the-server-ports-for-remote-access\" rel=\"nofollow noreferrer\">open the server port for remote access</a>, in this case 5432, which can be done with this command:</p>\n\n<pre><code>sudo ufw allow 5432\n</code></pre>\n\n<p>If you don't have ufw installed in the virtual machine, use <code>apt-get</code> to get it.</p>\n\n<p>After that, <a href=\"https://docs.bitnami.com/virtual-machine/infrastructure/postgresql/#how-to-start-or-stop-the-services\" rel=\"nofollow noreferrer\">restart the server</a> to apply the changes, just in case:</p>\n\n<pre><code>sudo /opt/bitnami/ctlscript.sh restart\n</code></pre>\n\n<p>Besides, the firewall rule indicated in the tutorial is not well prepared, you have to remove the <code>target-tags</code> part. That way, you will be able to connect to the PostgreSQL database and continue the tutorial.</p>\n"}], "owner": {"reputation": 21, "user_id": 7748070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05822a40d9931cbc9bb53ff7df826ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ariah", "link": "https://stackoverflow.com/users/7748070/ariah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1518517731, "creation_date": 1517972878, "last_edit_date": 1517983776, "question_id": 48655343, "link": "https://stackoverflow.com/questions/48655343/inexperienced-rails-user-wanting-to-connect-postgresql-to-already-existing-app", "title": "Inexperienced Rails User: Wanting to Connect PostgreSQL to Already Existing App: Server Will not Connect", "body": "<p><strong>Optional Background</strong>: Hello, I\u2019m quite new to the services on google cloud..well, and web development in general (Let\u2019s say my training thus far is less than 60 hours on the rails framework and I\u2019m not used to MVC or using databases at all. \u201cGood luck kid\u201d, I know.) My task is to deploy a mostly-done rails app that runs on  Heroku to Google app engine. The app \u201cbuilds\u201d (after using gcloud app deploy), but it won\u2019t connect to any database. Some of the files for doing that that I think should be there are missing. Namely, the config/database.yml file.</p>\n\n<p>I thought it would make sense to just learn with a tutorial how you even connect a database on Google to an already existing rails app. I know rails generally just sets you up with a sqllite system automatically. But how do I write my own database.yml file to work on google app engine? And later on, how do I import all the information from our prior database...questions questions</p>\n\n<p><strong>Question Starts Here</strong> So, I started following this tutorial on the google cloud shell:</p>\n\n<p>Pg 1: <a href=\"https://cloud.google.com/ruby/getting-started/tutorial-app\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/getting-started/tutorial-app</a> I started here.</p>\n\n<p>Pg 2:  <a href=\"https://cloud.google.com/ruby/getting-started/using-structured-data\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/getting-started/using-structured-data</a> Got here and decided on postgresql as my choice</p>\n\n<p>Pg 3: <a href=\"https://cloud.google.com/ruby/getting-started/deploy-postgres\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/getting-started/deploy-postgres</a>  and ran into an error where it tells me to call <code>$: rake db:migrate</code></p>\n\n<p><strong>Here is the error message:</strong></p>\n\n<blockquote>\n  <p>:~/projects/Bookshelfapp/getting-started-ruby/2-postgresql$ rake db:create could not connect to server: Connection timed out<br>\n   Is the server running on host \"35.193.145.252\" and accepting TCP/IP connections on port 5432?\u201d</p>\n</blockquote>\n\n<p>Am I not connected to the database at all? I'm looking at my database.yml file.</p>\n\n<p><strong>Here is the format I was supposed to follow:</strong></p>\n\n<pre><code>postgresql_settings: &amp;postgresql_settings\nadapter: postgresql\nencoding: unicode\npool: 5\nusername: postgres\npassword: secret123\nhost: 173.194.230.44\ndatabase: bookshelf\n</code></pre>\n\n<p><strong>Here is how I went for it:</strong> My database.yml file:</p>\n\n<pre><code>postgresql_settings: &amp;postgresql_settings\n adapter: postgresql\n encoding: unicode\n pool: 5\n username: postgres\n password: [my password is here]\n host: 35.193.145.252\n database: bookshelf\ndevelopment:\n   &lt;&lt;: *postgresql_settings\nproduction:\n   &lt;&lt;: *postgresql_settings\ntest:\n adapter: sqlite3\n pool: 5\n timeout: 5000\n database: db/test.sqlite3\n</code></pre>\n\n<p>Here is where I found the username and password:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7mVDf.png\" rel=\"nofollow noreferrer\">username and password page</a></p>\n\n<p>And I picked this IP address for the host:\n<a href=\"https://i.stack.imgur.com/GICsl.png\" rel=\"nofollow noreferrer\">IP address page</a></p>\n\n<p>What am I doing wrong with my life? I haven\u2019t assigned a static IP address to the VM, but I don\u2019t really understand why I would do that.</p>\n\n<p>Could anyone offer any suggestions of what to check for. I spent quite a bit of time going back into early steps and trying to find where I might have misstepped, but my inexperience isn\u2019t offering too many solutions. Even routes to understand this problem better conceptually might help. I am not sure if I don\u2019t know how to use some tool or if I have a big concept missing.I have never done anything like this before.</p>\n\n<p>This issue seems similar to the following past questions, but I'm not sure how much they match up with mine:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17299232/connect-a-rails-app-to-an-already-existing-mysql-db\">question 1</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/8140863/unable-to-connect-to-postgresql-server-could-not-connect-to-server-permission\">question 2</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/10482853/rails-rake-dbcreateall-could-not-connect-to-server\">question 3</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/32492909/can-not-connect-rails-app-with-postgresql-on-ubuntu\">question 4</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "newrelic", "mysql2"], "comments": [{"owner": {"reputation": 330, "user_id": 6482185, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T11f0D1JFSw/AAAAAAAAAAI/AAAAAAAAAP0/6onfs__d2RE/photo.jpg?sz=128", "display_name": "Will Nguyen", "link": "https://stackoverflow.com/users/6482185/will-nguyen"}, "edited": false, "score": 0, "creation_date": 1517971590, "post_id": 48655018, "comment_id": 84308378, "body": "wanting dyno doesn&#39;t sleep is only one way, upgrading to premium account."}, {"owner": {"reputation": 1, "user_id": 9325045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78df922dadbb1d6f05bcd0600df4f386?s=128&d=identicon&r=PG&f=1", "display_name": "K Bowls", "link": "https://stackoverflow.com/users/9325045/k-bowls"}, "reply_to_user": {"reputation": 330, "user_id": 6482185, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T11f0D1JFSw/AAAAAAAAAAI/AAAAAAAAAP0/6onfs__d2RE/photo.jpg?sz=128", "display_name": "Will Nguyen", "link": "https://stackoverflow.com/users/6482185/will-nguyen"}, "edited": false, "score": 0, "creation_date": 1517972348, "post_id": 48655018, "comment_id": 84308575, "body": "My understanding was that only free tier dynos would sleep. Hobby , professional, and perfermance dynos don&#39;t sleep. Plus, I would think heroku support would have said something about that in my service ticket. They believe it&#39;s in a single or group of controller actions and the timouts are from timeouts stacking. They recommended rack-timout. That didn&#39;t help much because the first request is the one that hangs. Subsequent requests work fine."}, {"owner": {"reputation": 1, "user_id": 9325045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78df922dadbb1d6f05bcd0600df4f386?s=128&d=identicon&r=PG&f=1", "display_name": "K Bowls", "link": "https://stackoverflow.com/users/9325045/k-bowls"}, "reply_to_user": {"reputation": 330, "user_id": 6482185, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T11f0D1JFSw/AAAAAAAAAAI/AAAAAAAAAP0/6onfs__d2RE/photo.jpg?sz=128", "display_name": "Will Nguyen", "link": "https://stackoverflow.com/users/6482185/will-nguyen"}, "edited": false, "score": 0, "creation_date": 1517972576, "post_id": 48655018, "comment_id": 84308638, "body": "Here&#39;s the Heroku page on dynos. <a href=\"https://devcenter.heroku.com/articles/dynos\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/dynos</a>"}], "owner": {"reputation": 1, "user_id": 9325045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78df922dadbb1d6f05bcd0600df4f386?s=128&d=identicon&r=PG&f=1", "display_name": "K Bowls", "link": "https://stackoverflow.com/users/9325045/k-bowls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518129351, "creation_date": 1517970418, "last_edit_date": 1518129351, "question_id": 48655018, "link": "https://stackoverflow.com/questions/48655018/why-do-i-keep-getting-timeouts-on-my-rails-heroku-app-on-a-dyno-that-doesnt-sle", "title": "Why do I keep getting timeouts on my Rails/Heroku app on a dyno that doesn&#39;t sleep?", "body": "<p>I recently deployed a rails app to Heroku and started getting timeouts at random times. I am currently using a professional dyno so it shouldn't be sleeping. It mainly happens after a period of inactivity and then the first request is hung up and timed out. After the first one, it does fine. I also am using New Relic to monitor the app. When it monitors the availability on any duration, it fails constantly. Even though I can pull the web app up on a browser fine. The errors it does catch say the issue is in the controller action that is rendering the page. But any action in any controller can cause this, as long as it's the first one called after a period of inactivity. I dropped some tracers in the code to pinpoint where the issue is. It seems the first bit of code that calls anything SQL related hangs up. New relic says that the code takes over 950,000+mS to complete. Depending on parameters and the session cookie, it may launch an SQL query at a different points in the action. The first line to launch a query is where New Relic says the issue is. I am using the Mysql2 gem and ClearDB for my database. The timeout issues aren't seen in development, possibly because of the 30 second timeout in Heroku.</p>\n\n<p>Edit(2/7/18):\nAfter removing code that New Relic said was hanging up, I'm left with no code that does anything SQL related for the homepage and controller action. I stopped using New Relics pings to determine up-time. I instead am using Up-time Robot to check the site. It confirmed my suspicions that new relics monitoring was wrong. So , without any SQL queries, it is working. I'm thinking of switching to PostgreSQL. Heroku says they are getting ClearDB to help. I'm waiting on them before I try anything else.</p>\n\n<p>Edit(2/8/18): I switched to PostgreSQL. All the issues I was having are gone. I still can't explain why MySQL was causing timeouts though.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1517970204, "post_id": 48654871, "comment_id": 84308094, "body": "Are you saving this field? How is languages defined in the database?"}, {"owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "reply_to_user": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 1, "creation_date": 1517970995, "post_id": 48654871, "comment_id": 84308241, "body": "in migration <code>add_column :users, :languages, :string, array: true, default: []</code>,  strong parameters: <code>params.require(:user).permit(:email, :password, :password_confirmation, languages: [])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1517983442, "post_id": 48655296, "comment_id": 84311578, "body": "Ruby idiom is to use <code>unless</code> instead of <code>if</code> followed by <code>!</code>. So in this case, <code>unless languages.kind_of?(Array)</code>."}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": true, "score": 3, "last_activity_date": 1592426808, "last_edit_date": 1592426808, "creation_date": 1517972531, "answer_id": 48655296, "question_id": 48654871, "link": "https://stackoverflow.com/questions/48654871/how-active-record-validation-check-if-type-is-array/48655296#48655296", "title": "How Active Record validation check, if type is array?", "body": "<pre><code>class User&lt; ApplicationRecord\n  validate :languages_is_array\n\n  def languages_is_array\n    if !languages.kind_of?(Array)\n      errors.add(:languages, \"must be an array\")\n    end\n  end\n\n  #Another version, as moveson commented\n  def languages_is_array\n    errors.add(:languages, \"must be an array\") unless languages.kind_of?(Array)\n  end\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1518012102, "creation_date": 1518012102, "answer_id": 48665765, "question_id": 48654871, "link": "https://stackoverflow.com/questions/48654871/how-active-record-validation-check-if-type-is-array/48665765#48665765", "title": "How Active Record validation check, if type is array?", "body": "<p>You can declare that a param needs to be an array in you controller if you are concerned about what the user submits in the form and not so much the validation of the model.</p>\n\n<p>See: <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">Action Controller Overview - 4.5 Strong Parameters</a></p>\n\n<blockquote>\n  <p>To declare that the value in params must be an array of permitted scalar values, map the key to an empty array:</p>\n\n<pre><code>params.permit(id: [])\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 48655296, "answer_count": 2, "score": 0, "last_activity_date": 1592426808, "creation_date": 1517969199, "last_edit_date": 1517969975, "question_id": 48654871, "link": "https://stackoverflow.com/questions/48654871/how-active-record-validation-check-if-type-is-array", "title": "How Active Record validation check, if type is array?", "body": "<p>I have attribute user`s languages. When form submit, it must return array?</p>\n\n<p>I want to write validation in model User:</p>\n\n<p><code>validates :languages, presence: true</code></p>\n\n<p>How write in validates, returning value must be is array? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "comments": [{"owner": {"reputation": 1176, "user_id": 1233552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60129132308d7f7a10aaeb63cbbd64?s=128&d=identicon&r=PG", "display_name": "jljohnstone", "link": "https://stackoverflow.com/users/1233552/jljohnstone"}, "edited": false, "score": 0, "creation_date": 1517969690, "post_id": 48654819, "comment_id": 84307973, "body": "Did you add <code>gem &#39;factory_bot_rails&#39;</code> to your Gemfile?"}, {"owner": {"reputation": 74, "user_id": 6058578, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1010566642351525/picture?type=large", "display_name": "Rafa\u0142 Piekara", "link": "https://stackoverflow.com/users/6058578/rafa%c5%82-piekara"}, "edited": false, "score": 0, "creation_date": 1518004504, "post_id": 48654819, "comment_id": 84323577, "body": "Please paste the gemfile."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 74, "user_id": 6058578, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1010566642351525/picture?type=large", "display_name": "Rafa\u0142 Piekara", "link": "https://stackoverflow.com/users/6058578/rafa%c5%82-piekara"}, "edited": false, "score": 0, "creation_date": 1518011591, "post_id": 48654819, "comment_id": 84328517, "body": "@Rafa\u0142Piekara added the Gemfile."}, {"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1518012890, "post_id": 48654819, "comment_id": 84329357, "body": "What&#39;s in your <code>Gemfile.lock</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 161601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfaac637de662ffc66bcd5a718dd1c?s=128&d=identicon&r=PG", "display_name": "matti", "link": "https://stackoverflow.com/users/161601/matti"}, "is_accepted": false, "score": 0, "last_activity_date": 1521565008, "creation_date": 1521565008, "answer_id": 49390047, "question_id": 48654819, "link": "https://stackoverflow.com/questions/48654819/bundlergemrequireerror-there-was-an-error-while-trying-to-load-the-gem-facto/49390047#49390047", "title": "Bundler::GemRequireError: There was an error while trying to load the gem &#39;factory_bot_rails&#39;", "body": "<p>Getting started says that you need to put <code>factory_bot.rb</code> in <code>support/factory_bot.rb</code> - you are putting it to the root of <code>spec</code> dir like I was.</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 779, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521565008, "creation_date": 1517968777, "last_edit_date": 1518025322, "question_id": 48654819, "link": "https://stackoverflow.com/questions/48654819/bundlergemrequireerror-there-was-an-error-while-trying-to-load-the-gem-facto", "title": "Bundler::GemRequireError: There was an error while trying to load the gem &#39;factory_bot_rails&#39;", "body": "<p>I just installed the <code>factory_bot_rails</code> gem and it's giving me a problem right from the start:</p>\n\n<pre><code>$ bundle exec rspec spec/models/scan_spec.rb\n    bundler: failed to load command: rspec (/Users/me/.rbenv/versions/2.4.3/bin/rspec)\n    Bundler::GemRequireError: There was an error while trying to load the gem 'factory_bot_rails'.\n    Gem Load Error is: uninitialized constant FactoryBot\n</code></pre>\n\n<p>Based on the getting started documentation, I've done everything right:</p>\n\n<blockquote>\n  <p>spec/factory_bot.rb</p>\n</blockquote>\n\n<pre><code>RSpec.configure do |config|\n  config.include FactoryBot::Syntax::Methods\nend\n</code></pre>\n\n<blockquote>\n  <p>spec/rails_helper.rb</p>\n</blockquote>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\nabort('The Rails environment is running in production mode!') if Rails.env.production?\nrequire 'spec_helper'\nrequire 'rspec/rails'\nrequire 'factory_bot'\n...\n</code></pre>\n\n<blockquote>\n  <p>Gemfile</p>\n</blockquote>\n\n<pre><code>source 'https://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\ngem 'rails', '~&gt; 5.1.4'\ngem 'pg', '~&gt; 0.21.0'\ngem 'puma', '~&gt; 3.7'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.2'\ngem 'jquery-rails'\ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\ngem 'devise'\ngem 'adminlte2-rails'\ngem 'font-awesome-rails'\ngem 'haikunator'\n\ngroup :development, :test do\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem 'capybara', '~&gt; 2.13'\n  gem 'selenium-webdriver'\n  gem 'factory_bot_rails'\n  gem 'faker'\n  gem 'rspec-rails'\nend\n\ngroup :development do\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n  gem 'better_errors'\n  gem 'rails_layout'\n  gem 'spring-commands-rspec'\n  gem 'guard-bundler'\n  gem 'guard-rails'\n  gem 'guard-rspec'\n  gem 'pry-rails'\n  gem 'pry-byebug'\n  gem 'pry-remote'\n  gem 'pry-stack_explorer'\n  gem 'pry-rescue'\nend\n\ngroup :test do\n  gem 'database_cleaner'\n  gem 'launchy'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<blockquote>\n  <p>Gemfile.lock</p>\n</blockquote>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (5.1.4)\n      actionpack (= 5.1.4)\n      nio4r (~&gt; 2.0)\n      websocket-driver (~&gt; 0.6.1)\n    actionmailer (5.1.4)\n      actionpack (= 5.1.4)\n      actionview (= 5.1.4)\n      activejob (= 5.1.4)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.1.4)\n      actionview (= 5.1.4)\n      activesupport (= 5.1.4)\n      rack (~&gt; 2.0)\n      rack-test (&gt;= 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.1.4)\n      activesupport (= 5.1.4)\n      builder (~&gt; 3.1)\n      erubi (~&gt; 1.4)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.3)\n    activejob (5.1.4)\n      activesupport (= 5.1.4)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.1.4)\n      activesupport (= 5.1.4)\n    activerecord (5.1.4)\n      activemodel (= 5.1.4)\n      activesupport (= 5.1.4)\n      arel (~&gt; 8.0)\n    activesupport (5.1.4)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (~&gt; 0.7)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    addressable (2.5.2)\n      public_suffix (&gt;= 2.0.2, &lt; 4.0)\n    adminlte2-rails (0.0.6)\n      bootstrap-sass (~&gt; 3.3.4.1)\n    arel (8.0.0)\n    autoprefixer-rails (7.2.5)\n      execjs\n    bcrypt (3.1.11)\n    better_errors (2.4.0)\n      coderay (&gt;= 1.0.0)\n      erubi (&gt;= 1.0.0)\n      rack (&gt;= 0.9.0)\n    bindex (0.5.0)\n    binding_of_caller (0.8.0)\n      debug_inspector (&gt;= 0.0.1)\n    bootstrap-sass (3.3.4.1)\n      autoprefixer-rails (&gt;= 5.0.0.1)\n      sass (&gt;= 3.2.19)\n    builder (3.2.3)\n    byebug (9.1.0)\n    capybara (2.17.0)\n      addressable\n      mini_mime (&gt;= 0.1.3)\n      nokogiri (&gt;= 1.3.3)\n      rack (&gt;= 1.0.0)\n      rack-test (&gt;= 0.5.4)\n      xpath (&gt;= 2.0, &lt; 4.0)\n    childprocess (0.8.0)\n      ffi (~&gt; 1.0, &gt;= 1.0.11)\n    coderay (1.1.2)\n    coffee-rails (4.2.2)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.12.2)\n    concurrent-ruby (1.0.5)\n    crass (1.0.3)\n    database_cleaner (1.6.2)\n    debug_inspector (0.0.3)\n    devise (4.4.1)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 4.1.0, &lt; 5.2)\n      responders\n      warden (~&gt; 1.2.3)\n    diff-lcs (1.3)\n    erubi (1.7.0)\n    execjs (2.7.0)\n    factory_bot (4.8.2)\n      activesupport (&gt;= 3.0.0)\n    factory_bot_rails (4.8.2)\n      factory_bot (~&gt; 4.8.2)\n      railties (&gt;= 3.0.0)\n    faker (1.8.7)\n      i18n (&gt;= 0.7)\n    ffi (1.9.18)\n    font-awesome-rails (4.7.0.3)\n      railties (&gt;= 3.2, &lt; 5.2)\n    formatador (0.2.5)\n    globalid (0.4.1)\n      activesupport (&gt;= 4.2.0)\n    guard (2.14.2)\n      formatador (&gt;= 0.2.4)\n      listen (&gt;= 2.7, &lt; 4.0)\n      lumberjack (&gt;= 1.0.12, &lt; 2.0)\n      nenv (~&gt; 0.1)\n      notiffany (~&gt; 0.0)\n      pry (&gt;= 0.9.12)\n      shellany (~&gt; 0.0)\n      thor (&gt;= 0.18.1)\n    guard-bundler (2.1.0)\n      bundler (~&gt; 1.0)\n      guard (~&gt; 2.2)\n      guard-compat (~&gt; 1.1)\n    guard-compat (1.2.1)\n    guard-rails (0.8.1)\n      guard (~&gt; 2.11)\n      guard-compat (~&gt; 1.0)\n    guard-rspec (4.7.3)\n      guard (~&gt; 2.1)\n      guard-compat (~&gt; 1.1)\n      rspec (&gt;= 2.99.0, &lt; 4.0)\n    haikunator (1.1.0)\n    i18n (0.9.3)\n      concurrent-ruby (~&gt; 1.0)\n    interception (0.5)\n    jbuilder (2.7.0)\n      activesupport (&gt;= 4.2.0)\n      multi_json (&gt;= 1.2)\n    jquery-rails (4.3.1)\n      rails-dom-testing (&gt;= 1, &lt; 3)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    launchy (2.4.3)\n      addressable (~&gt; 2.3)\n    listen (3.1.5)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n      ruby_dep (~&gt; 1.2)\n    loofah (2.1.1)\n      crass (~&gt; 1.0.2)\n      nokogiri (&gt;= 1.5.9)\n    lumberjack (1.0.12)\n    mail (2.7.0)\n      mini_mime (&gt;= 0.1.1)\n    method_source (0.9.0)\n    mini_mime (1.0.0)\n    mini_portile2 (2.3.0)\n    minitest (5.11.3)\n    multi_json (1.13.1)\n    nenv (0.3.0)\n    nio4r (2.2.0)\n    nokogiri (1.8.2)\n      mini_portile2 (~&gt; 2.3.0)\n    notiffany (0.1.1)\n      nenv (~&gt; 0.1)\n      shellany (~&gt; 0.0)\n    orm_adapter (0.5.0)\n    pg (0.21.0)\n    pry (0.11.3)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.9.0)\n    pry-byebug (3.5.1)\n      byebug (~&gt; 9.1)\n      pry (~&gt; 0.10)\n    pry-rails (0.3.6)\n      pry (&gt;= 0.10.4)\n    pry-remote (0.1.8)\n      pry (~&gt; 0.9)\n      slop (~&gt; 3.0)\n    pry-rescue (1.4.5)\n      interception (&gt;= 0.5)\n      pry\n    pry-stack_explorer (0.4.9.2)\n      binding_of_caller (&gt;= 0.7)\n      pry (&gt;= 0.9.11)\n    public_suffix (3.0.1)\n    puma (3.11.2)\n    rack (2.0.4)\n    rack-test (0.8.2)\n      rack (&gt;= 1.0, &lt; 3)\n    rails (5.1.4)\n      actioncable (= 5.1.4)\n      actionmailer (= 5.1.4)\n      actionpack (= 5.1.4)\n      actionview (= 5.1.4)\n      activejob (= 5.1.4)\n      activemodel (= 5.1.4)\n      activerecord (= 5.1.4)\n      activesupport (= 5.1.4)\n      bundler (&gt;= 1.3.0)\n      railties (= 5.1.4)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.3)\n      activesupport (&gt;= 4.2.0)\n      nokogiri (&gt;= 1.6)\n    rails-html-sanitizer (1.0.3)\n      loofah (~&gt; 2.0)\n    rails_layout (1.0.41)\n    railties (5.1.4)\n      actionpack (= 5.1.4)\n      activesupport (= 5.1.4)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (12.3.0)\n    rb-fsevent (0.10.2)\n    rb-inotify (0.9.10)\n      ffi (&gt;= 0.5.0, &lt; 2)\n    responders (2.4.0)\n      actionpack (&gt;= 4.2.0, &lt; 5.3)\n      railties (&gt;= 4.2.0, &lt; 5.3)\n    rspec (3.7.0)\n      rspec-core (~&gt; 3.7.0)\n      rspec-expectations (~&gt; 3.7.0)\n      rspec-mocks (~&gt; 3.7.0)\n    rspec-core (3.7.1)\n      rspec-support (~&gt; 3.7.0)\n    rspec-expectations (3.7.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.7.0)\n    rspec-mocks (3.7.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.7.0)\n    rspec-rails (3.7.2)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      railties (&gt;= 3.0)\n      rspec-core (~&gt; 3.7.0)\n      rspec-expectations (~&gt; 3.7.0)\n      rspec-mocks (~&gt; 3.7.0)\n      rspec-support (~&gt; 3.7.0)\n    rspec-support (3.7.1)\n    ruby_dep (1.5.0)\n    rubyzip (1.2.1)\n    sass (3.5.5)\n      sass-listen (~&gt; 4.0.0)\n    sass-listen (4.0.0)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    sass-rails (5.0.7)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    selenium-webdriver (3.8.0)\n      childprocess (~&gt; 0.5)\n      rubyzip (~&gt; 1.0)\n    shellany (0.0.1)\n    slop (3.6.0)\n    spring (2.0.2)\n      activesupport (&gt;= 4.2)\n    spring-commands-rspec (1.0.4)\n      spring (&gt;= 0.9.1)\n    spring-watcher-listen (2.0.1)\n      listen (&gt;= 2.7, &lt; 4.0)\n      spring (&gt;= 1.2, &lt; 3.0)\n    sprockets (3.7.1)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    thor (0.20.0)\n    thread_safe (0.3.6)\n    tilt (2.0.8)\n    turbolinks (5.1.0)\n      turbolinks-source (~&gt; 5.1)\n    turbolinks-source (5.1.0)\n    tzinfo (1.2.4)\n      thread_safe (~&gt; 0.1)\n    uglifier (4.1.5)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    warden (1.2.7)\n      rack (&gt;= 1.0)\n    web-console (3.5.1)\n      actionview (&gt;= 5.0)\n      activemodel (&gt;= 5.0)\n      bindex (&gt;= 0.4.0)\n      railties (&gt;= 5.0)\n    websocket-driver (0.6.5)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.3)\n    xpath (3.0.0)\n      nokogiri (~&gt; 1.8)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  adminlte2-rails\n  better_errors\n  byebug\n  capybara (~&gt; 2.13)\n  coffee-rails (~&gt; 4.2)\n  database_cleaner\n  devise\n  factory_bot_rails\n  faker\n  font-awesome-rails\n  guard-bundler\n  guard-rails\n  guard-rspec\n  haikunator\n  jbuilder (~&gt; 2.5)\n  jquery-rails\n  launchy\n  listen (&gt;= 3.0.5, &lt; 3.2)\n  pg (~&gt; 0.21.0)\n  pry-byebug\n  pry-rails\n  pry-remote\n  pry-rescue\n  pry-stack_explorer\n  puma (~&gt; 3.7)\n  rails (~&gt; 5.1.4)\n  rails_layout\n  rspec-rails\n  sass-rails (~&gt; 5.0)\n  selenium-webdriver\n  spring\n  spring-commands-rspec\n  spring-watcher-listen (~&gt; 2.0.0)\n  turbolinks (~&gt; 5)\n  tzinfo-data\n  uglifier (&gt;= 1.3.0)\n  web-console (&gt;= 3.3.0)\n\nBUNDLED WITH\n   1.16.1\n</code></pre>\n\n<p>I'm not even getting to the point where it attempts to actually load a factory model file that I've created.</p>\n\n<p>What am I missing?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "marshalling", "unmarshalling"], "answers": [{"tags": [], "owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "is_accepted": false, "score": 1, "last_activity_date": 1518094305, "creation_date": 1518094305, "answer_id": 48685970, "question_id": 48654762, "link": "https://stackoverflow.com/questions/48654762/rspec-how-to-fix-marshal-format-version-4-8-required-34-92-given-error/48685970#48685970", "title": "Rspec: How to fix marshal format version 4.8 required; 34.92 given error", "body": "<p>Although I haven't solved the initial issue I thought I might share how I got around it.</p>\n\n<p>Instead I dumped the array of objects to a file using YAML:</p>\n\n<pre><code>File.open(file_name, 'w') { |file| file.write(YAML.dump(array_of_objects)) }\n</code></pre>\n\n<p>Then I loaded that file with YAML:</p>\n\n<pre><code>YAML.load(File.read(\"file_location\"))\n</code></pre>\n\n<p>It seems like this is a better option than using Marshal because there are no version issues as mentioned in the question above.</p>\n"}], "owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1518094305, "creation_date": 1517968192, "question_id": 48654762, "link": "https://stackoverflow.com/questions/48654762/rspec-how-to-fix-marshal-format-version-4-8-required-34-92-given-error", "title": "Rspec: How to fix marshal format version 4.8 required; 34.92 given error", "body": "<p>I am currently writing rspec tests in which I need to use some 'real world' data stored in objects.</p>\n\n<p>To use these objects in an rspec test I used <code>Marshal.dump(array_of_objects)</code> and loaded them into the spec with <code>Marshal.load(File.read(\"spec/fixtures/file_name_here\"))</code>.</p>\n\n<p>Unfortunately, I keep running into an error that I don't understand how to fix (despite reading many people having the same issue):</p>\n\n<pre><code>*** TypeError Exception: incompatible marshal file format (can't be read)\n    format version 4.8 required; 34.92 given\n</code></pre>\n\n<p>Is there a way to fix this so I can run the test?</p>\n"}, {"tags": ["ruby", "lua", "redis", "redis-cli"], "answers": [{"comments": [{"owner": {"reputation": 4418, "user_id": 479632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39Yyw.png?s=128&g=1", "display_name": "Almund", "link": "https://stackoverflow.com/users/479632/almund"}, "edited": false, "score": 0, "creation_date": 1518435524, "post_id": 48728889, "comment_id": 84490914, "body": "Hi! Thank you very much for your response. The loop I have actually does return a 1 for each remove row, well, or a MOVED unless I apply the <code>-c</code> command to make sure it follows the redirect and deletes from the actual master.  The problem is that after I&#39;ve deleted the keys they still appear when I check as you say using the <code>KEYS pattern:*</code> on the node that doesn&#39;t contain them (different hash slots)."}], "tags": [], "owner": {"reputation": 165, "user_id": 3103616, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/673576978/picture?type=large", "display_name": "akiespenc", "link": "https://stackoverflow.com/users/3103616/akiespenc"}, "is_accepted": false, "score": 0, "last_activity_date": 1518329845, "creation_date": 1518329845, "answer_id": 48728889, "question_id": 48654749, "link": "https://stackoverflow.com/questions/48654749/how-to-clear-redirected-keys-from-redis-cluster-nodes/48728889#48728889", "title": "How to clear redirected keys from redis cluster nodes", "body": "<p>No, that cli loop you executed should return a boolean 1 integer for each key within each server if there is a match to begin with. If you want to be sure all the keys are deleted just simply run <code>KEYS pattern:*</code> for each server to detect any residue remaining while in interactive mode on the terminal.</p>\n\n<p>Also, try using the <code>-c</code> flag when deleting the keys from the masters. I ran the command from my terminal and just to double-check the redirected keys are truly removed, I used the Node.JS wrapper and ran a simple <code>client.keys('pattern', (err, res)=&gt;console.log(res))</code> and came with an empty array indicating the keys no longer exist. Or you can do a simple flushall command to remove the keys</p>\n"}], "owner": {"reputation": 4418, "user_id": 479632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39Yyw.png?s=128&g=1", "display_name": "Almund", "link": "https://stackoverflow.com/users/479632/almund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518329845, "creation_date": 1517968074, "question_id": 48654749, "link": "https://stackoverflow.com/questions/48654749/how-to-clear-redirected-keys-from-redis-cluster-nodes", "title": "How to clear redirected keys from redis cluster nodes", "body": "<p>I've come across an interesting (not to say infuriatingly annoying) issue. I'm fairly new to Redis but I know how to operate the basics.</p>\n\n<p>Basically I have a cluster with 3 masters and each master has 2 slaves each across three servers.</p>\n\n<p>I have a bunch of normal keys and I try to clean all keys based on a pattern across all servers so I've run something like this on the master nodes:</p>\n\n<pre><code>for server in \"${servers[@]}\" do\n    ./redis-cli -h ${server} -p ${master_port} KEYS 'pattern:*' | xargs -I {} ./redis-cli -h ${server} -p ${master_port} DEL {}\ndone\n</code></pre>\n\n<p>Now this works nicely, it looks like all the keys get deleted as they should however, when I run the <code>KEYS 'pattern:*'</code> command again on each server, keys belonging to <code>master 1</code> appears in the list of <code>master 2</code>. If I try to access the key with <code>get &lt;key&gt;</code> I properly get a <code>moved</code> notice and if I do the same thing using the <code>-c</code> follow parameter I get correctly redirected and recieve a <code>nil</code> back.</p>\n\n<p>I've tried this same thing with <code>scan</code> using both lua and ruby script but both output the should-be-deleted keys on the node that didn't have the keys in the first place.</p>\n\n<p>Is there any way to delete these keys for good so I can get a trustworthy count/evidence that they're gone?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "networking", "ip-address", "router"], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 1589102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4624ab79a159e01f6d99d042e9612474?s=128&d=identicon&r=PG", "display_name": "Kanyon", "link": "https://stackoverflow.com/users/1589102/kanyon"}, "is_accepted": true, "score": 1, "last_activity_date": 1517975498, "creation_date": 1517975498, "answer_id": 48655698, "question_id": 48654424, "link": "https://stackoverflow.com/questions/48654424/ruby-on-rails-get-a-devices-routers-ip-address/48655698#48655698", "title": "Ruby on Rails - Get a device&#39;s router&#39;s IP address?", "body": "<p>You can get someone's public IP address however their router's IP address is not accessible. This is not accessible using any programing language as that data is not transmitted over web requests.</p>\n"}], "owner": {"reputation": 177, "user_id": 5154248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1993645ea9185f4b754ebdcf3347632?s=128&d=identicon&r=PG&f=1", "display_name": "user24601", "link": "https://stackoverflow.com/users/5154248/user24601"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 48655698, "answer_count": 1, "score": 3, "last_activity_date": 1517975498, "creation_date": 1517965598, "question_id": 48654424, "link": "https://stackoverflow.com/questions/48654424/ruby-on-rails-get-a-devices-routers-ip-address", "title": "Ruby on Rails - Get a device&#39;s router&#39;s IP address?", "body": "<p>I'm trying to build an attendance-taking Ruby on Rails app for a college class, but I'm trying to avoid people cheating by signing in from places other than the classroom. The school's networking staff told me that wireless IPs on campus aren't separated by building, such that gathering devices' IP addresses won't tell me who's in class and who's in their dorm rooms. However, I realized that if I could somehow get the device to give me the IP of the <em>router</em> it's connected to, that could be a more reliable way to figure out where someone is.</p>\n\n<p>Which brings me to my question: Is there a way for a Rails app to get the IP address of the router that a device is connected to? I know how to get the IP of the device itself, but like I said, that won't work here. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 174, "user_id": 8211949, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5973d3bcc3861af6f9b9fd17b4cebaf3?s=128&d=identicon&r=PG&f=1", "display_name": "kuwantum", "link": "https://stackoverflow.com/users/8211949/kuwantum"}, "edited": false, "score": 0, "creation_date": 1517961258, "post_id": 48653785, "comment_id": 84305779, "body": "go to your terminal and type <code>rake routes | grep job</code> and see what path is written with &quot;show&quot;"}, {"owner": {"reputation": 107, "user_id": 5759307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784c37ca65661bf6ffa23e66d7498c03?s=128&d=identicon&r=PG&f=1", "display_name": "jacobrubyonrails", "link": "https://stackoverflow.com/users/5759307/jacobrubyonrails"}, "reply_to_user": {"reputation": 174, "user_id": 8211949, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5973d3bcc3861af6f9b9fd17b4cebaf3?s=128&d=identicon&r=PG&f=1", "display_name": "kuwantum", "link": "https://stackoverflow.com/users/8211949/kuwantum"}, "edited": false, "score": 0, "creation_date": 1517962354, "post_id": 48653785, "comment_id": 84306071, "body": "thanks kuwantum for your comment. It only says &quot;employer_job&quot; for show action but that doesn&#39;t work since it seems to be missing the employer_id. I am certainly missing something."}, {"owner": {"reputation": 174, "user_id": 8211949, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5973d3bcc3861af6f9b9fd17b4cebaf3?s=128&d=identicon&r=PG&f=1", "display_name": "kuwantum", "link": "https://stackoverflow.com/users/8211949/kuwantum"}, "edited": false, "score": 0, "creation_date": 1517962435, "post_id": 48653785, "comment_id": 84306095, "body": "try <code>employer_job_path(job)</code>, so it looks like <code>&lt;%= link_to job.title, employer_job_path(job) %&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5759307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784c37ca65661bf6ffa23e66d7498c03?s=128&d=identicon&r=PG&f=1", "display_name": "jacobrubyonrails", "link": "https://stackoverflow.com/users/5759307/jacobrubyonrails"}, "edited": false, "score": 0, "creation_date": 1517987608, "post_id": 48654035, "comment_id": 84313437, "body": "Worked! Thanks!"}], "tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 3, "last_activity_date": 1517962587, "creation_date": 1517962587, "answer_id": 48654035, "question_id": 48653785, "link": "https://stackoverflow.com/questions/48653785/link-to-nested-resource-in-rails/48654035#48654035", "title": "link_to nested resource in Rails", "body": "<p>This one should do the trick:</p>\n\n<pre><code>&lt;%= link_to job.title, employer_job_path(job.employer, job) %&gt;\n</code></pre>\n\n<p>Rails need two ids to build the route in your case, so you have to pass to route helper two objects.</p>\n"}], "owner": {"reputation": 107, "user_id": 5759307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784c37ca65661bf6ffa23e66d7498c03?s=128&d=identicon&r=PG&f=1", "display_name": "jacobrubyonrails", "link": "https://stackoverflow.com/users/5759307/jacobrubyonrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 48654035, "answer_count": 1, "score": 1, "last_activity_date": 1517962587, "creation_date": 1517960922, "question_id": 48653785, "link": "https://stackoverflow.com/questions/48653785/link-to-nested-resource-in-rails", "title": "link_to nested resource in Rails", "body": "<p>I am creating a jobs board with employers and jobs. How would I go about linking my job.title to the job show action/view?</p>\n\n<p>jobs/index.html.erb </p>\n\n<pre><code>&lt;% @jobs.each do |job| %&gt;\n  &lt;%= link_to job.title, ?? %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>jobs_controller.rb</p>\n\n<pre><code>def index\n  @jobs = Job.all\nend\n\ndef show\n  @job = Job.find(params[:id])\nend\n</code></pre>\n\n<p>employers_controller.rb</p>\n\n<pre><code>def index\n  @employers = Employer.all\nend\n\ndef show\n  @employer = Employer.find(params[:id])\nend\n</code></pre>\n\n<p>job.rb</p>\n\n<pre><code>belongs_to :employer\n</code></pre>\n\n<p>employer.rb</p>\n\n<pre><code>has_many :jobs\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>resources :jobs, only: %i[index], :path =&gt; 'jobb'\nresources :employers, only: %i[index show], :path =&gt; 'arbetsgivare' do\n  resources :jobs, only: %i[show], :path =&gt; 'jobb'\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "is_accepted": false, "score": 0, "last_activity_date": 1517955011, "creation_date": 1517955011, "answer_id": 48652805, "question_id": 48652777, "link": "https://stackoverflow.com/questions/48652777/override-class-variables-in-production-rb/48652805#48652805", "title": "Override class variables in production.rb?", "body": "<p>You can test to see what environment you're in:</p>\n\n<pre><code>if Rails.env.production?  \n //do something\nend\n</code></pre>\n\n<p>Also - if you're trying to save API keys or whatnot. You can set them seperately through the terminal, or in your secrets.yml, and specify the environment.</p>\n"}, {"tags": [], "owner": {"reputation": 182, "user_id": 1920508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43740b9270a206c2d0a9061b4c906be3?s=128&d=identicon&r=PG", "display_name": "Traveler", "link": "https://stackoverflow.com/users/1920508/traveler"}, "is_accepted": false, "score": 0, "last_activity_date": 1517975738, "creation_date": 1517975738, "answer_id": 48655720, "question_id": 48652777, "link": "https://stackoverflow.com/questions/48652777/override-class-variables-in-production-rb/48655720#48655720", "title": "Override class variables in production.rb?", "body": "<p>No need to check for <code>production</code> in the code, delegate this kind of variables to environment.\nGem called <code>dotenv</code>: <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">https://github.com/bkeepers/dotenv</a>. Simple as:</p>\n\n<ol>\n<li>create <code>.env</code> file in the root dir</li>\n<li>add variables: <code>VAR_ONE=1</code></li>\n<li>use them in the code <code>VAR_ONE = ENV['VAR_ONE']</code></li>\n</ol>\n"}], "owner": {"reputation": 39, "user_id": 6462368, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7692aca30541e64cf5b18acac5cfb473?s=128&d=identicon&r=PG&f=1", "display_name": "wdotis", "link": "https://stackoverflow.com/users/6462368/wdotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517975738, "creation_date": 1517954849, "question_id": 48652777, "link": "https://stackoverflow.com/questions/48652777/override-class-variables-in-production-rb", "title": "Override class variables in production.rb?", "body": "<p>Beginner RoR programmer here. </p>\n\n<p>Let's say I have something like:</p>\n\n<pre><code>class Foo\n    cattr_accessor :VAR_ONE, :VAR_TWO\n\n    # these need to be overridden in config/initializers/production.rb\n    @@VAR_ONE = nil\n    @@VAR_TWO = nil\n\n    ...\n</code></pre>\n\n<p>How can I set those variables in <em>production.rb</em>? I tried something like this but it doesn't work:</p>\n\n<pre><code>class &lt;&lt; Rails.application\n    ...\nend\n\nclass &lt;&lt; Rails.foo\n    VAR_ONE = ENV['VAR_ONE']\n    VAR_TWO = ENV['VAR_TWO']\nend\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517953350, "post_id": 48652308, "comment_id": 84302897, "body": "show the <code>new</code> action in your controller"}, {"owner": {"reputation": 1180, "user_id": 3359577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mj7Xv.jpg?s=128&g=1", "display_name": "razvans", "link": "https://stackoverflow.com/users/3359577/razvans"}, "edited": false, "score": 0, "creation_date": 1517955324, "post_id": 48652308, "comment_id": 84303764, "body": "Please add the <code>Player</code> model."}, {"owner": {"reputation": 1180, "user_id": 3359577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mj7Xv.jpg?s=128&g=1", "display_name": "razvans", "link": "https://stackoverflow.com/users/3359577/razvans"}, "edited": false, "score": 0, "creation_date": 1517956031, "post_id": 48652308, "comment_id": 84304058, "body": "Usually you get a rollback when model validations fail and  I see no validations on Player model. <code>Player.create!(....)</code>, what does it say?"}], "answers": [{"tags": [], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "is_accepted": false, "score": 0, "last_activity_date": 1517954255, "creation_date": 1517954255, "answer_id": 48652660, "question_id": 48652308, "link": "https://stackoverflow.com/questions/48652308/player-wont-display-that-it-is-added/48652660#48652660", "title": "Player won&#39;t display that it is added", "body": "<p>You aren't passing a value into the hidden field. You should be doing something like</p>\n\n<p><code>&lt;%= f.hidden_field :user_id, value: current_user.id %&gt;</code></p>\n\n<p>If the user_id is always the current_user - you don't need a field, you can just assign it in the controller.</p>\n\n<pre><code> def create\n  @players = Player.create(first_name: params[:player][:first_name], last_name: params[:player][:last_name], position: params[:player][:position], favorite_team: params[:player][:favorite_team], extra_equipment: params[:player][:extra_equipment], bio: params[:player][:bio])\n  @players.user_id = current_user.id\n  @players.save\n    redirect_to players_path\nend\n</code></pre>\n\n<p>Or - if you want to keep the same formatting</p>\n\n<pre><code>def create\n   @players = Player.create(user_id: current_user.id, first_name: params[:player][:first_name], last_name: params[:player][:last_name], position: params[:player][:position], favorite_team: params[:player][:favorite_team], extra_equipment: params[:player][:extra_equipment], bio: params[:player][:bio])\n    redirect_to players_path\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 3815144, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000906350931/picture?type=large", "display_name": "Elayan Hamamrah", "link": "https://stackoverflow.com/users/3815144/elayan-hamamrah"}, "is_accepted": false, "score": 1, "last_activity_date": 1517956668, "creation_date": 1517956668, "answer_id": 48653115, "question_id": 48652308, "link": "https://stackoverflow.com/questions/48652308/player-wont-display-that-it-is-added/48653115#48653115", "title": "Player won&#39;t display that it is added", "body": "<p>For crud (Create, Update, Retrieve &amp; Destroy) use @player, not @players. \nAlso, call your params from a private method instead calling it directly, this is a DRY concept in rails. </p>\n\n<p>So it would be somehow like this (example): </p>\n\n<pre><code>def new\n @player = Player.new\nend\n\ndef create\n @player = Player.new(player_params)\n if @player.save \n  // Do something\n else\n  // Do something\n end\nend\n\nprivate\n\ndef player_params\n params.require(:player).permit(:param_1, :param_2 .... etc)\nend\n</code></pre>\n\n<p><strong>Then</strong> in your view use <code>form_for @player</code></p>\n"}], "owner": {"reputation": 19, "user_id": 9322914, "user_type": "registered", "profile_image": "https://graph.facebook.com/1716347715092827/picture?type=large", "display_name": "Marcos Freire", "link": "https://stackoverflow.com/users/9322914/marcos-freire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517956668, "creation_date": 1517952779, "last_edit_date": 1517955631, "question_id": 48652308, "link": "https://stackoverflow.com/questions/48652308/player-wont-display-that-it-is-added", "title": "Player won&#39;t display that it is added", "body": "<p>I'm trying to add a new player but it won't display and i keep getting a rollback. I've tried using hidden_field for my user_id but it didn't seem to do anything. Are there any other alternatives of doing this? I'm pretty sure its something so small that I have to change.  Please help.   </p>\n\n<p>Player controller: </p>\n\n<pre><code>def new\n        @players = Player.new\n    end\n\ndef create\n        @players = Player.create(user_id: params[:player][:user_id], first_name: params[:player][:first_name], last_name: params[:player][:last_name], position: params[:player][:position], favorite_team: params[:player][:favorite_team], extra_equipment: params[:player][:extra_equipment], bio: params[:player][:bio])\n        redirect_to players_path\n    end\n</code></pre>\n\n<p>player new: </p>\n\n<pre><code>&lt;h1&gt;Add a new Player&lt;/h1&gt;\n\n&lt;%= form_for @players do |f| %&gt;\n\n&lt;p&gt;First Name   &lt;%= f.text_field :first_name %&gt;&lt;/p&gt;\n\n&lt;p&gt;Last name    &lt;%= f.text_field :last_name %&gt;&lt;/p&gt;\n\n&lt;p&gt;Position &lt;%= f.text_field :position %&gt;&lt;/p&gt;\n\n&lt;p&gt;Favorite Team(optional)  &lt;%= f.text_field :favorite_team %&gt;&lt;/p&gt;\n\n&lt;p&gt;Extra Equipment  &lt;%= f.text_field :extra_equipment %&gt;&lt;/p&gt;\n\n&lt;p&gt;Bio  &lt;%= f.text_field :bio %&gt;&lt;/p&gt;\n\n&lt;%= f.hidden_field :user_id %&gt;\n\n&lt;%= submit_tag \"Add\"%&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Player Model </p>\n\n<pre><code>class Player &lt; ApplicationRecord\n    belongs_to :user\n    has_many :pickup, through: :player_pickup\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 3298118, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100002022697918/picture?type=large", "display_name": "Eduardorph", "link": "https://stackoverflow.com/users/3298118/eduardorph"}, "edited": false, "score": 0, "creation_date": 1518011193, "post_id": 48651964, "comment_id": 84328226, "body": "Thanks for your answer, but the problem is not in validation"}], "tags": [], "owner": {"reputation": 506, "user_id": 2428762, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/adff7188450a9655d0b1d00f330b9edd?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2428762/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1517951196, "creation_date": 1517951196, "answer_id": 48651964, "question_id": 48651503, "link": "https://stackoverflow.com/questions/48651503/multisteps-form-creation-with-relationships/48651964#48651964", "title": "Multisteps form creation with relationships", "body": "<p>I think you will need a custom validation for <code>tag_ids</code>. I don't think rails will validate multiple items in one step. Maybe add a custom validation at the bottom of your application controller:</p>\n\n<pre><code>def validate_tag_ids\n  if !tag_ids.is_a?\n    errors.add(:tag_ids, :invalid)\n  end\nend\n</code></pre>\n\n<p>And then use:</p>\n\n<pre><code>validates: :validate_tag_ids\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>validates :tag_ids, presence: true\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 3298118, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100002022697918/picture?type=large", "display_name": "Eduardorph", "link": "https://stackoverflow.com/users/3298118/eduardorph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518013173, "creation_date": 1517949180, "last_edit_date": 1518013173, "question_id": 48651503, "link": "https://stackoverflow.com/questions/48651503/multisteps-form-creation-with-relationships", "title": "Multisteps form creation with relationships", "body": "<p>I'm trying to implement a multistep form following this article: <a href=\"https://medium.com/@nicolasblanco/developing-a-wizard-or-multi-steps-forms-in-rails-d2f3b7c692ce\" rel=\"nofollow noreferrer\">https://medium.com/@nicolasblanco/developing-a-wizard-or-multi-steps-forms-in-rails-d2f3b7c692ce</a></p>\n\n<p>The problem is that my model has relationships and these are not recognized in the step 3 presenting an error, see below my full code and the error message:</p>\n\n<pre><code>class Evaluation &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :teacher\n    belongs_to :school\n    belongs_to :subject\n\n    has_many :evaluation_tags\n    has_many :tags, through: :evaluation_tags\n\n    accepts_nested_attributes_for :evaluation_tags\n\n    validates :teacher_id, presence: true\n    validates :subject_id, presence: true\n    validates :school_id, presence: true\n    validates :user_id, presence: true\n    validates :rating, presence: true\nend\n\n\nmodule Wizard\n  module Evaluation\n    STEPS = %w(step1 step2 step3).freeze\n\n    class Base\n      include ActiveModel::Model\n      attr_accessor :evaluation\n\n      delegate *::Evaluation.attribute_names.map { |attr| [attr, \"#{attr}=\"] }.flatten, to: :evaluation\n\n      def initialize(evaluation_attributes)\n        @evaluation = ::Evaluation.new(evaluation_attributes)\n      end\n    end\n\n    class Step1 &lt; Base\n      validates :teacher_id, presence: true\n    end\n\n    class Step2 &lt; Step1\n      validates :subject_id, presence: true\n    end\n\n    class Step3 &lt; Step2\n      validates :school, presence: true\n      validates :user, presence: true\n      validates :rating, presence: true\n    end\n  end\nend\n\n\nclass EvaluationsController &lt; ApplicationController\n    before_action :complete_sign_up, except: [:index]\n\n    # before_action :load_evaluation_wizard, except: %i(validate_step)\n    before_action :load_evaluation_wizard, except: [:validate_step, :new]\n\n    def step1\n        @teachers = Teacher.includes(:schools).where(schools: {id: current_user.student_details.last.school_id}).order(full_name: :ASC)\n    end\n\n    def step2\n        @teacher_id = session[:evaluation_attributes][\"teacher_id\"]\n        @subjects = Subject.includes(:teachers, :schools).where(teachers: {id: @teacher_id}).where(schools: {id: current_user.student_details.last.school_id}).order(name: :ASC)\n    end\n\n    def step3\n        pp session[:evaluation_attributes]\n    end\n\n\n    def validate_step\n        current_step = params[:current_step]\n\n        @evaluation_wizard = wizard_evaluation_for_step(current_step)\n        @evaluation_wizard.evaluation.attributes = evaluation_wizard_params\n        session[:evaluation_attributes] = @evaluation_wizard.evaluation.attributes\n\n        # pp session[:evaluation_attributes]\n\n        if @evaluation_wizard.valid?\n            next_step = wizard_evaluation_next_step(current_step)\n            create and return unless next_step\n\n            redirect_to action: next_step\n        else\n            render current_step\n        end\n    end\n\n\n    def load_evaluation_wizard\n        @evaluation_wizard = wizard_evaluation_for_step(action_name)\n    end\n\n    def wizard_evaluation_next_step(step)\n        Wizard::Evaluation::STEPS[Wizard::Evaluation::STEPS.index(step) + 1]\n    end\n\n    def wizard_evaluation_for_step(step)\n        raise InvalidStep unless step.in?(Wizard::Evaluation::STEPS)\n\n        \"Wizard::Evaluation::#{step.camelize}\".constantize.new(session[:evaluation_attributes])\n    end\n\n    def evaluation_wizard_params\n        params.require(:evaluation_wizard).permit(:teacher_id, :subject_id, evaluation_tags_attributes: {tag_ids: []}).merge(user: current_user, school: current_user.student_details.last.school)\n    end\n\n    class InvalidStep &lt; StandardError; end\n\nend\n\n\n#STEP3.HTML.ERB\n\n&lt;%= f.collection_check_boxes(:tag_ids, Tag.all, :id, :name) do |tag| %&gt;\n  &lt;%= tag.label(class: \"tags tags-bom\") { tag.check_box(class: \"checkbox_tags\") + tag.text} %&gt;\n&lt;% end %&gt;\n\n\n#ERROR\n\nundefined method `tag_ids' for #&lt;Wizard::Evaluation::Step3:0x00007fadb2be6a88&gt;\n</code></pre>\n\n<p>How can i make that module recognizes the relationships?</p>\n"}, {"tags": ["ruby", "rspec", "automation", "cucumber", "watir-webdriver"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1517947757, "post_id": 48651037, "comment_id": 84300138, "body": "You normally can&#39;t do that unless the tool supports it. You&#39;ll have to stub in lots and lots of &quot;log now&quot; statements."}], "answers": [{"comments": [{"owner": {"reputation": 1254, "user_id": 3585595, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0fc9b06e8ebb26a395ff5e49ecc85f7c?s=128&d=identicon&r=PG&f=1", "display_name": "Paulo Roberto", "link": "https://stackoverflow.com/users/3585595/paulo-roberto"}, "edited": false, "score": 0, "creation_date": 1517959265, "post_id": 48651324, "comment_id": 84305183, "body": "It did not work and it did not give an error, it only had the same behavior as the code I already have, it takes the print of the last step executed."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1517948516, "creation_date": 1517948516, "answer_id": 48651324, "question_id": 48651037, "link": "https://stackoverflow.com/questions/48651037/cucumber-and-ruby-print-every-step-executed/48651324#48651324", "title": "Cucumber and ruby: print every step executed", "body": "<p>There is an <code>AfterStep</code> hook if you want to do an action after each step - eg:</p>\n\n<pre><code>AfterStep do\n  browser.screenshot.save 'screenshot.png'\nend\n</code></pre>\n"}], "owner": {"reputation": 1254, "user_id": 3585595, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0fc9b06e8ebb26a395ff5e49ecc85f7c?s=128&d=identicon&r=PG&f=1", "display_name": "Paulo Roberto", "link": "https://stackoverflow.com/users/3585595/paulo-roberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517948516, "creation_date": 1517947333, "question_id": 48651037, "link": "https://stackoverflow.com/questions/48651037/cucumber-and-ruby-print-every-step-executed", "title": "Cucumber and ruby: print every step executed", "body": "<p>With the function below, I can receive a print of the last execution of the test, however I want to learn how to receive a print at every step executed by the automation.</p>\n\n<p>How can this be done?</p>\n\n<p><strong>env.rb</strong></p>\n\n<pre><code># encoding: utf-8\nrequire 'watir'\nrequire 'rspec'\n</code></pre>\n\n<p><strong>hooks.rb</strong></p>\n\n<pre><code># coding: utf-8\nrequire 'json'\nrequire 'magic_encoding'\nrequire 'win32console'\nrequire 'watir'\nrequire 'rspec'\n\n\nbrowser = Watir::Browser.new\nbrowser.driver.manage.window.maximize\n\nBefore do \n@browser\n    @browser = browser\n  end\n\nAfter do |_scenario|\n  browser.screenshot.save 'screenshot.png'\n  embed 'screenshot.png', 'image/png'\nend\n</code></pre>\n\n<p><strong>login.rb</strong></p>\n\n<pre><code>given(\"que estou na tela de login\") do\n\n            @browser.goto \"url\"\n\n         #I want a screenshot of this step\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubocop", "ruby-style-guide"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1517947604, "post_id": 48651014, "comment_id": 84300053, "body": "Doesn&#39;t it simply <i>read</i> better?"}, {"owner": {"reputation": 1838, "user_id": 3692286, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/deAJz.jpg?s=128&g=1", "display_name": "jleeothon", "link": "https://stackoverflow.com/users/3692286/jleeothon"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1517949417, "post_id": 48651014, "comment_id": 84301066, "body": "@SergioTulentsev That can be argued to be a matter of taste / tradition. That&#39;s why I ask if there are further reasons e.g. syntactical ambiguity. Ambiguity happens e.g. with the splat operator and multiplication e.g. <code>a *b</code> looks like both <code>a(*b)</code> and <code>a() * b()</code>; we would avoid <code>a *b</code> because it is more objectively a potential source for bugs. I don&#39;t see (yet) that being the case for methods in method declarations."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1517951231, "post_id": 48651014, "comment_id": 84301845, "body": "I&#39;d estimate 90+% of ruby style guide to be based on nothing else than taste. &#175;\\_(\u30c4)_/&#175; Hence the name, &quot;style guide&quot;. Its purpose is to encourage community to write code in the similar style. You can join a project and start reading the code, without getting used to this project&#39;s idiosynratic coding conventions."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1517951344, "post_id": 48651014, "comment_id": 84301894, "body": "And no, off the top of my head, I too can&#39;t name a technical reason to prefer parenthesized method definitions."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1517970208, "post_id": 48651014, "comment_id": 84308097, "body": "There are two votes to close the question. It&#39;s not because it&#39;s a bad question, just that it calls for an opinion, which is verboden for SO questions."}, {"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 2, "creation_date": 1517984985, "post_id": 48651014, "comment_id": 84312217, "body": "There&#39;s really no way of knowing that I know of. That particular guideline appears to have been included with the initial commit of the README in the style guide repository: <a href=\"https://github.com/bbatsov/ruby-style-guide/commit/dc31232fe357d08039fb59a66199b189cd7aa605#diff-04c6e90faac2675aa89e2176d2eec7d8R73\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide/commit/&hellip;</a> which actually seems to be based off of this other style guide: <a href=\"https://github.com/chneukirchen/styleguide/commit/9057d68f2234f164342b4fc23a48f5b3a31c8ffe#diff-70fa10fe169bac53cdb85e5c7723433bR37\" rel=\"nofollow noreferrer\">github.com/chneukirchen/styleguide/commit/&hellip;</a>"}, {"owner": {"reputation": 1838, "user_id": 3692286, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/deAJz.jpg?s=128&g=1", "display_name": "jleeothon", "link": "https://stackoverflow.com/users/3692286/jleeothon"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1517999690, "post_id": 48651014, "comment_id": 84320465, "body": "@CarySwoveland I would contest that. I&#39;m not asking for opinions on what&#39;s nicer, but rather, I&#39;m asking <i>whether or not</i> there are technical reasons to prefer one style. If not, then the answer would be &quot;no, it was a matter of style&quot;. Changed to question for clarification."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1518031246, "post_id": 48651014, "comment_id": 84341378, "body": "I just wanted you to know that the two  members who voted to close may believe that the use of parentheses is only a stylistic issue, in which case an opinion is called for. I&#39;m not saying that&#39;s my view. I am interested in the question, however."}], "answers": [{"tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": true, "score": 3, "last_activity_date": 1518686560, "creation_date": 1518686560, "answer_id": 48803716, "question_id": 48651014, "link": "https://stackoverflow.com/questions/48651014/why-does-the-rubocop-default-guidelines-recommend-parentheses-in-method-definiti/48803716#48803716", "title": "Why does the Rubocop default guidelines recommend parentheses in method definitions?", "body": "<p>The rationale is omitted in the <a href=\"https://github.com/bbatsov/ruby-style-guide/commit/dc31232fe357d08039fb59a66199b189cd7aa605\" rel=\"nofollow noreferrer\">initial commit</a>, of which this rule was part, indicating that there was no particular technical reason for it.</p>\n\n<p>The fact that the corresponding cop is placed in the <code>Style</code> department, rather than <code>Lint</code>, serves as further proof that this is a matter of just that, style.</p>\n\n<p>Method definitions have a very simple syntax. The <code>def</code> keyword is (optionally) followed by arguments, which must be followed by a terminator (newline or <code>;</code>).</p>\n\n<p>The possible variations are:</p>\n\n<ul>\n<li>single line method definitions,</li>\n<li>inline modifiers, e.g. <code>private</code>,</li>\n<li>default- and keyword arguments,</li>\n<li>splat- and block arguments.</li>\n</ul>\n\n<p>All of these work fine both with and without parentheses. Furthermore, running a file with an unparenthesized method definition using the <code>-w</code> flag raises no warnings.</p>\n\n<p>These factors together rule out the possibility that the parentheses are recommended to avoid ambiguity. </p>\n"}], "owner": {"reputation": 1838, "user_id": 3692286, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/deAJz.jpg?s=128&g=1", "display_name": "jleeothon", "link": "https://stackoverflow.com/users/3692286/jleeothon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 48803716, "answer_count": 1, "score": 3, "last_activity_date": 1518686560, "creation_date": 1517947243, "last_edit_date": 1517999494, "question_id": 48651014, "link": "https://stackoverflow.com/questions/48651014/why-does-the-rubocop-default-guidelines-recommend-parentheses-in-method-definiti", "title": "Why does the Rubocop default guidelines recommend parentheses in method definitions?", "body": "<p>Why does Rubocop / the <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">community-driven Ruby style guide</a> recommend parentheses in method definitions?</p>\n\n<pre><code>def my_method(param1, param2)\nend\n# instead of\ndef my_method param1, param2\nend\n</code></pre>\n\n<p>Method calls are allowed with or without parentheses depending on the situation. However, my first impression is that lack of parentheses in method calls are much more potentially <strong>ambiguous</strong> than lack of parentheses in method definitions. Was there a reason behind it, e.g. to make code more fool-proof, or did it happen because of \"historical reasons\" or \"because it was the most widespread style\"?</p>\n\n<p><strong>Clarification:</strong></p>\n\n<p><em>I am not asking for opinions about which style is easier to read.</em></p>\n\n<p>The lint <code>Lint/AmbiguousOperator</code> is based on the idea that <code>do_something *some_array</code> is ambiguous and a source for bugs (<a href=\"https://rubocop.readthedocs.io/en/latest/cops_lint/#lintambiguousoperator\" rel=\"nofollow noreferrer\">Link</a>). I wondered if this is the same case for <code>Style/MethodDefParentheses</code> (<a href=\"https://rubocop.readthedocs.io/en/latest/cops_style/#stylemethoddefparentheses\" rel=\"nofollow noreferrer\">Link</a>).</p>\n\n<p>After going back to find the actual names of those Cops, my best guess right now is that there is no \"technical\" reason, but rather one is a proper \"lint\" and the other a \"style\" matter.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 2, "creation_date": 1517943563, "post_id": 48649972, "comment_id": 84297777, "body": "That&#39;s not &quot;null&quot;, that&#39;s the empty string."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517943653, "post_id": 48649972, "comment_id": 84297830, "body": "Also, where&#39;s your Ruby code?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1517956402, "post_id": 48649972, "comment_id": 84304176, "body": "Once you define a capturing group in a regex pattern, even if it is not participating in the match, the item will still be added to the output array of group values."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1517970580, "post_id": 48649972, "comment_id": 84308164, "body": "<code>NULL</code> is not defined in Ruby. Methods return objects. Specify which object or objects can be returned (e.g., <code>nil</code>, <code>&#39;&#39;</code>, <code>true</code>, <code>false</code>, <code>74</code>, and so on)."}], "answers": [{"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1517947454, "post_id": 48650368, "comment_id": 84299967, "body": "Doesn&#39;t actually match <code>type date</code>. Did you not try it? Also, <code>[&#39;type&#39;,          , &#39;date&#39;]</code> isn&#39;t valid."}, {"owner": {"reputation": 304, "user_id": 4788704, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p6-tONkPxXs/AAAAAAAAAAI/AAAAAAAAABU/kgEGiVyqoG8/photo.jpg?sz=128", "display_name": "Ben Behar", "link": "https://stackoverflow.com/users/4788704/ben-behar"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517957466, "post_id": 48650368, "comment_id": 84304571, "body": "Thanks, and yes, <code>[&#39;type&#39;,  ,&#39;date&#39;]</code> is not valid ruby. Note that in some implementations of regex matching, arrays are poor representations of capture data, eg in this example there may not exist a second capture at all, using &#39;nil&#39; might be misleading."}], "tags": [], "owner": {"reputation": 304, "user_id": 4788704, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p6-tONkPxXs/AAAAAAAAAAI/AAAAAAAAABU/kgEGiVyqoG8/photo.jpg?sz=128", "display_name": "Ben Behar", "link": "https://stackoverflow.com/users/4788704/ben-behar"}, "is_accepted": false, "score": 1, "last_activity_date": 1517956384, "last_edit_date": 1517956384, "creation_date": 1517944607, "answer_id": 48650368, "question_id": 48649972, "link": "https://stackoverflow.com/questions/48649972/is-it-possible-to-return-null-for-an-optional-capture-group-in-a-regular-express/48650368#48650368", "title": "Is it possible to return null for an optional capture group in a regular expression?", "body": "<p>If you are looking for functionality where:</p>\n\n<pre><code>type version (date)\ntype date\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>['type', 'version', 'date']\n['type',          , 'date']\n</code></pre>\n\n<p>you probably want to use an <em>non-capturing group</em> like <code>(?:version)</code>\nas well as <code>(version)|</code> as in  <code>(?:(version)|)</code>, this will allow you to either capture something or capture 'nothing/null/nil'</p>\n\n<p>Try out this regular expression:</p>\n\n<pre><code>^([^\\s]+)\\s(?:([^\\s]*)\\s|)\\(?(.*)\\)?$\n</code></pre>\n\n<p>I recommend using <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">http://regex101.com</a> to understand what the different symbols mean.</p>\n"}, {"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1517953821, "post_id": 48650597, "comment_id": 84303106, "body": "A good answer to the question... but I would slap any developer that tries to use that regex in anything but a one-off hack."}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 0, "last_activity_date": 1517945891, "last_edit_date": 1517945891, "creation_date": 1517945576, "answer_id": 48650597, "question_id": 48649972, "link": "https://stackoverflow.com/questions/48649972/is-it-possible-to-return-null-for-an-optional-capture-group-in-a-regular-express/48650597#48650597", "title": "Is it possible to return null for an optional capture group in a regular expression?", "body": "<p>You can use this <code>regex</code> to match both formats:</p>\n\n<pre><code>/^(\\S+)\\s+(?:(\\S+)\\s+\\((\\S+)\\)|(\\S+))$/\n</code></pre>\n\n<p>I used <code>\\S</code> instead of <code>[^\\s]</code>. They have the <a href=\"https://ruby-doc.org/core-2.5.0/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\">same meaning</a> (any non-space character) but <code>\\S</code> is shorter and easier to read.</p>\n\n<h3>The expression piece by piece</h3>\n\n<pre><code>/             # regex delimiter\n^             # match the start of the string\n(\\S+)         # capturing group that matches one or more non-space characters (type)\n\\s+           # one or more space characters\n(?:           # start of a non-capturing group\n              #   +--- alternative #1: format \"type version (date)\"\n   (\\S+)      #   | capturing group for version \n   \\s+        #   |\n   \\(         #   | match a literal '('\n   (\\S+)      #   | capturing group for date\n   \\)         #   | match a literal ')'\n              #   +-------------------\n|             # OR - either match alternative #1 or alternative #2\n              #   +--- alternative #2: format \"type date\"\n   (\\S+)      #   | capturing group for date\n              #   +-------------------\n)             # end of the non-capturing group\n$             # match the end of the string\n/             # regex delimiter\n</code></pre>\n\n<p>Matching strings against this <code>regex</code> produce:</p>\n\n<pre><code>irb (main)&gt; \"Type Version (Date)\".match(/^(\\S+)\\s+(?:(\\S+)\\s+\\((\\S+)\\)|(\\S+))$/)\n=&gt; #&lt;MatchData \"Type Version (Date)\" 1:\"Type\" 2:\"Version\" 3:\"Date\" 4:nil&gt;\n\nirb(main)&gt; \"Type Date\".match(/^(\\S+)\\s+(?:(\\S+)\\s+\\((\\S+)\\)|(\\S+))$/)\n=&gt; #&lt;MatchData \"Type Date\" 1:\"Type\" 2:nil 3:nil 4:\"Date\"&gt;\n</code></pre>\n\n<p>There are 4 items in the resulting <code>MatchData</code> object because there are 4 capturing groups in the <code>regex</code>. The groups present in the alternatives are added up, those from the non-matching alternative are set to <code>nil</code>.</p>\n\n<p>The next step is to <a href=\"https://ruby-doc.org/core-2.5.0/Regexp.html#class-Regexp-label-Capturing\" rel=\"nofollow noreferrer\">name the capturing groups</a>. This way we can identify them easier and also identify (and collapse) the alternatives.</p>\n\n<p>Now the <code>regex</code> is:</p>\n\n<pre><code>/^(?&lt;type&gt;\\S+)\\s+(?:(?&lt;version&gt;\\S+)\\s+\\((?&lt;date&gt;\\S+)\\)|(?&lt;date&gt;\\S+))$/\n</code></pre>\n\n<p>and produces:</p>\n\n<pre><code>irb(main)&gt; \"Type Version (Date)\".match(/^(?&lt;type&gt;\\S+)\\s+(?:(?&lt;version&gt;\\S+)\\s+\\((?&lt;date&gt;\\S+)\\)|(?&lt;date&gt;\\S+))$/)\n=&gt; #&lt;MatchData \"Type Version (Date)\" type:\"Type\" version:\"Version\" date:\"Date\" date:nil&gt;\n\nirb(main)&gt; \"Type Date\".match(/^(?&lt;type&gt;\\S+)\\s+(?:(?&lt;version&gt;\\S+)\\s+\\((?&lt;date&gt;\\S+)\\)|(?&lt;date&gt;\\S+))$/)\n=&gt; #&lt;MatchData \"Type Date\" type:\"Type\" version:nil date:nil date:\"Date\"&gt;\n</code></pre>\n\n<p>The last step is to use the method <a href=\"https://ruby-doc.org/core-2.5.0/MatchData.html#method-i-named_captures\" rel=\"nofollow noreferrer\"><code>MatchData#named_captures</code></a> to get the matched pieces in a <a href=\"https://ruby-doc.org/core-2.5.0/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> that contains the correct values for <code>date</code>, according to the matched alternative.</p>\n\n<h3>The final result</h3>\n\n<pre><code>irb(main)&gt; \"Type Version (Date)\".match(/^(?&lt;type&gt;\\S+)\\s+(?:(?&lt;version&gt;\\S+)\\s+\\((?&lt;date&gt;\\S+)\\)|(?&lt;date&gt;\\S+))$/).named_captures\n=&gt; {\"type\"=&gt;\"Type\", \"version\"=&gt;\"Version\", \"date\"=&gt;\"Date\"}\n\nirb(main)&gt; \"Type Date\".match(/^(?&lt;type&gt;\\S+)\\s+(?:(?&lt;version&gt;\\S+)\\s+\\((?&lt;date&gt;\\S+)\\)|(?&lt;date&gt;\\S+))$/).named_captures\n=&gt; {\"type\"=&gt;\"Type\", \"version\"=&gt;nil, \"date\"=&gt;\"Date\"}\n</code></pre>\n\n<h3>Extra</h3>\n\n<p>If you need to get an empty string and not <code>nil</code> for <code>version</code> on format #2 you can add an empty capturing group named <code>version</code> on the second alternative, before the <code>date</code> group:</p>\n\n<pre><code>/^(?&lt;type&gt;\\S+)\\s+(?:(?&lt;version&gt;\\S+)\\s+\\((?&lt;date&gt;\\S+)\\)|(?&lt;version&gt;)(?&lt;date&gt;\\S+))$/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1517952036, "last_edit_date": 1517952036, "creation_date": 1517946690, "answer_id": 48650857, "question_id": 48649972, "link": "https://stackoverflow.com/questions/48649972/is-it-possible-to-return-null-for-an-optional-capture-group-in-a-regular-express/48650857#48650857", "title": "Is it possible to return null for an optional capture group in a regular expression?", "body": "<p>Regex free zone.</p>\n\n<pre><code>strs = [\n  'type version (date)',\n  'type date'\n]\n\nresults = strs.map do |str|\n  type, *version, date = str.split\n  [type, version[0].to_s, date.tr('()', '')]\nend\n\np results\n\n\n--output:--\n[[\"type\", \"version\", \"date\"], [\"type\", \"\", \"date\"]]\n</code></pre>\n\n<p>If you would rather have <code>nil</code> than a blank string, then remove the <code>to_s</code>. Having <code>nil</code> in there would allow you to write something like:</p>\n\n<pre><code>if arr[1]\n   #do one thing\nelse\n   #do another thing\n</code></pre>\n\n<p>Because a blank string is considered <code>true</code> in ruby, the if-branch would always execute if the array has a blank string at index 1.  The only things considered false in ruby are <code>nil</code> and <code>false</code>.</p>\n"}], "owner": {"reputation": 1219, "user_id": 783726, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0d68f895b1ae840dd1e3df3bba1a5bcb?s=128&d=identicon&r=PG", "display_name": "Russell Seymour", "link": "https://stackoverflow.com/users/783726/russell-seymour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 48650597, "answer_count": 3, "score": 0, "last_activity_date": 1517956384, "creation_date": 1517943155, "question_id": 48649972, "link": "https://stackoverflow.com/questions/48649972/is-it-possible-to-return-null-for-an-optional-capture-group-in-a-regular-express", "title": "Is it possible to return null for an optional capture group in a regular expression?", "body": "<p>I am using Ruby to break a version number from a system up into its constiuent parts. There are two formats that need to be considered:</p>\n\n<pre><code>  type version (date)\n  type date\n</code></pre>\n\n<p>I have got a regualr expression for this which can handle the fact that the <code>version</code> is not always present. It is <code>^([^\\s]+)\\s([^\\s]+)?\\s?\\(?(.*?)\\)?$\\</code>.</p>\n\n<p>However although this works the optional capture group is not present when the <code>version</code> is not in the string, which makes sense. For example (output from Ruby):</p>\n\n<pre><code>['type', 'version', 'date']\n['type', 'date', '']\n</code></pre>\n\n<p>Is there any way to make the RegEx return a null for the optional capture group when it is not there? The output would then be:</p>\n\n<pre><code>['type', 'version', 'date']\n['type', '', 'date']\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9323377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe709507ef5e8516961d7f8a77a91760?s=128&d=identicon&r=PG&f=1", "display_name": "Blueberry_Cat", "link": "https://stackoverflow.com/users/9323377/blueberry-cat"}, "edited": false, "score": 0, "creation_date": 1518016330, "post_id": 48653178, "comment_id": 84331880, "body": "I added in form <code>&lt;%= form.fields_for :imageable do |image_form| %&gt;     &lt;li&gt;&lt;%= image_form.label :img %&gt;&lt;&#47;li&gt;     &lt;li&gt;&lt;%= image_form.file_field :img %&gt;&lt;&#47;li&gt;     &lt;% end %&gt;</code>, in HTML it look like <code>&lt;input type=&quot;file&quot; name=&quot;comment[imageable][img]&quot; id=&quot;comment_imageable_img&quot;&gt;</code>, but pictures are not load.  <code>In comment_params</code> - <code>imageable_attributes:[:img]</code> What should be in <code>comments_controller</code> and in <code>Images_controller</code>?"}, {"owner": {"reputation": 2175, "user_id": 2859525, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tid9B.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/2859525/todd"}, "reply_to_user": {"reputation": 1, "user_id": 9323377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe709507ef5e8516961d7f8a77a91760?s=128&d=identicon&r=PG&f=1", "display_name": "Blueberry_Cat", "link": "https://stackoverflow.com/users/9323377/blueberry-cat"}, "edited": false, "score": 0, "creation_date": 1518049690, "post_id": 48653178, "comment_id": 84349592, "body": "@Blueberry_Cat its possible you could be encountering a second issue altogether - I would first verify that you are indeed uploading a file to local (or cloud) storage. Also, you may not have the structure of the strong params hash for your <code>Comment</code> correct, or, you may be missing other important attributes for the <code>Image</code>. Refer to the Rails guide, and keep experimenting!"}], "tags": [], "owner": {"reputation": 2175, "user_id": 2859525, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tid9B.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/2859525/todd"}, "is_accepted": false, "score": 0, "last_activity_date": 1517957743, "last_edit_date": 1517957743, "creation_date": 1517956999, "answer_id": 48653178, "question_id": 48649369, "link": "https://stackoverflow.com/questions/48649369/form-with-polymorphic-images/48653178#48653178", "title": "Form with polymorphic images", "body": "<p>If I understand your question correctly, youre asking how to nest a child form inside your <code>Comment</code> form. This is typically achieved with the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for\" rel=\"nofollow noreferrer\">#fields_for</a> helper.</p>\n\n<p>For a one-to-many relationship, you can simply do something like the following:</p>\n\n<pre><code>&lt;%= form_for(...) ... do |comment_form| %&gt;\n  # beginning of form for Comment ...\n\n  &lt;p class=\"imageables\"&gt;\n    &lt;ul&gt;\n    &lt;%= form.fields_for :imageables do |comment_image_form| %&gt;\n      &lt;li&gt;\n        # Add Image fields here\n      &lt;/li&gt;\n    &lt;% end %&gt;\n    &lt;/ul&gt;\n  &lt;/p&gt;\n\n  # rest of form /  submit button\n&lt;% end %&gt;\n</code></pre>\n\n<p>Adapt the above to your application's current form. This is only achievable through the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for\" rel=\"nofollow noreferrer\">accepts_nested_attributes_for</a> call you've made in <code>Comment</code>.</p>\n\n<p>You will also need to look into whitelisting the parameters for the <code>Image</code> associations via the <a href=\"http://api.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow noreferrer\">strong parameters</a> pattern. That is, the <code>#comment_params</code> method of your <code>CommentsController</code> will need the <code>Image</code> attributes added, or they will be disregarded with a warning. </p>\n\n<p>I also recommend you load the <code>fields_for</code> fields from a partial view, like this:</p>\n\n<p><code>&lt;%= render 'comment_image_fields', parent_form: comment_form %&gt;</code></p>\n\n<p>Check out the guides for <a href=\"http://guides.rubyonrails.org/form_helpers.html#nested-forms\" rel=\"nofollow noreferrer\">nested forms</a> for more detailed info. </p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 3815144, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000906350931/picture?type=large", "display_name": "Elayan Hamamrah", "link": "https://stackoverflow.com/users/3815144/elayan-hamamrah"}, "is_accepted": false, "score": 0, "last_activity_date": 1517957303, "creation_date": 1517957303, "answer_id": 48653234, "question_id": 48649369, "link": "https://stackoverflow.com/questions/48649369/form-with-polymorphic-images/48653234#48653234", "title": "Form with polymorphic images", "body": "<p>User <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow noreferrer\">PaperClip</a> Gem.</p>\n\n<p>in your view add :</p>\n\n<pre><code>  &lt;%= file_field_tag \"imageables[]\", type: :file, multiple: true %&gt;\n</code></pre>\n\n<p>in your create method inside controller: </p>\n\n<pre><code> if params[:imageables]\n    params[:imageables].each { |image|\n      @comment.imagables.create(image: image)\n    }\n  end\n</code></pre>\n\n<p>Another way which is better: \nUse PaperClip &amp; <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">Cocoon gem</a> for nested forms.</p>\n"}], "owner": {"reputation": 1, "user_id": 9323377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe709507ef5e8516961d7f8a77a91760?s=128&d=identicon&r=PG&f=1", "display_name": "Blueberry_Cat", "link": "https://stackoverflow.com/users/9323377/blueberry-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1517957743, "creation_date": 1517940679, "question_id": 48649369, "link": "https://stackoverflow.com/questions/48649369/form-with-polymorphic-images", "title": "Form with polymorphic images", "body": "<p>I have problems with adding pictures for comments. Comments have a link <code>has_many</code> to the pictures <code>as: :imageable</code>. How I can add a pictures upload to a comment form?</p>\n\n<pre><code># app/models/comment.rb\nclass Comment &lt; ApplicationRecord\n  belongs_to :article\n  belongs_to :user\n\n  has_many :images, as: :imageable\n  accepts_nested_attributes_for :images, allow_destroy: true\n\nend\n\n# app/models/Image.rb\nclass Image &lt; ApplicationRecord\n    has_attached_file :img\n    validates_attachment :img, content_type: { content_type: \n    [\"image/jpg\", \n    \"image/jpeg\", \"image/png\", \"image/gif\"] }\n\n    belongs_to :imageable, polymorphic: true, required: false\nend\n\n# app/controllers/comments_controller.rb\nclass CommentsController &lt; ApplicationController\n\n    def create\n        @article = Article.find(params[:article_id])\n        @comment = @article.comments.create(comment_params)\n        @comment.user_id = current_user.id\n        @comment.save\n        redirect_to article_path(@article)\n    end\n\n    def destroy\n        @article = Article.find(params[:article_id])\n        @comment = @article.comments.find(params[:id])\n        @comment.destroy\n        redirect_to article_path(@article)\n    end\n\n    private\n      def comment_params\n        params.require(:comment).permit(:commenter, :body)\n      end\nend\n\n# app/views/comments/_form.html.erb\n&lt;%= form_with(model: [ @article, @article.comments.build ], \n    local:true) do |form| %&gt;\n  &lt;p&gt;\n    &lt;%= form.label :commenter %&gt;&lt;br&gt;\n    &lt;%= form.text_field :commenter %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= form.label :body %&gt;&lt;br&gt;\n    &lt;%= form.text_area :body %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n\n# app/views/articles/show.html.erb\n&lt;%= render 'comments/form'%&gt;\n</code></pre>\n\n<p>I managed to add images in comments through ActiveAdmin, but I dont know how to do it with form.\nSo, what should I add to the form for images? Should I write a method <code>create</code> in images_controller?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1517939371, "post_id": 48649006, "comment_id": 84295622, "body": "Silly question, but did you create the <code>SaftKeyword</code> table?"}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1517939520, "post_id": 48649006, "comment_id": 84295724, "body": "My join table follows the Rails migration and is named &quot;safts_keywords&quot;, but I tried Saft_Keyword as well in the seed.rb to no avail. Thanks for the suggestion!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1517940027, "post_id": 48649006, "comment_id": 84296018, "body": "@jvillian except in a <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\">&quot;HABTM&quot;</a> join in which case it is plural_plural. You should load through the models <code>Saft</code> and <code>Keyword</code> or create a model <code>SaftKeyword</code>."}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "edited": false, "score": 0, "creation_date": 1517940252, "post_id": 48649006, "comment_id": 84296152, "body": "I used &quot;$rails g migration CreateSaftsKeywordsTable&quot; to create the join table."}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517940570, "post_id": 48649006, "comment_id": 84296324, "body": "@engineersmnky. You mean I should populate my join table though the models? How would my seed.rb be?"}, {"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1517941607, "post_id": 48649006, "comment_id": 84296846, "body": "I would try using <code>SaftsKeyword</code>."}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "edited": false, "score": 0, "creation_date": 1517942335, "post_id": 48649006, "comment_id": 84297157, "body": "Thank you all! I created a model &quot;safts_keyword.rb&quot; and used &quot;SaftsKeyword&quot; in the seed. Now everything is seeding as it should!"}], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "edited": false, "score": 0, "creation_date": 1517942594, "post_id": 48649627, "comment_id": 84297284, "body": "Thanks. A Saft is a magazine, each edition is defined by a series of keywords. Keywords can be associated with multiple issues of the magazine on the other hand. For this reason I have HABTM from both sides. Although it is currently seeding with the additional model, I will try your solution as soon as possible."}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "edited": false, "score": 0, "creation_date": 1518284292, "post_id": 48649627, "comment_id": 84446136, "body": "I checked it out and it works marvellously, although, since I have to use Ruby 1.8.7, I have to change &quot;word: key&quot; into &quot;:word =&gt; key&quot;. But in my case the keywords table has &quot;id&quot;, &quot;keyword&quot; and &quot;description&quot; rows, how can i push additional rows through the association onto the keyword table with this solution?"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 0, "last_activity_date": 1517941717, "creation_date": 1517941717, "answer_id": 48649627, "question_id": 48649006, "link": "https://stackoverflow.com/questions/48649006/how-to-seed-join-table-data-from-yaml-file-through-seed-rb-in-rails/48649627#48649627", "title": "How to seed join table data from yaml file through seed.rb in Rails", "body": "<p>HABTM join tables do not usually have a model associated with them as they are simply join tables and nothing else.</p>\n\n<p>That means these relationships would be established from one side or the other. Given my assumption that a <code>Saft</code> is more likely to have multiple <code>Keywords</code> I would go about this as follows.</p>\n\n<p>I have no idea what a <code>Saft</code> is but if you know their ids I would recommend the following: </p>\n\n<pre><code>  1: \n    - keyword1\n    - keyword2\n    - keyword3\n  2:\n    - keyword2\n    - keyword4\n</code></pre>\n\n<p>Then your seed file as: </p>\n\n<pre><code>  safts_keywords_data = YAML.load(Rails.root.join('db/seeds/safts_keywords_list.yml'))\n  safts_keywords_data.each do |saft_id,keywords|\n    saft = Saft.find(saft_id)\n    saft.keywords &lt;&lt; keywords.map do |key| \n      Keyword.find_or_create_by(word: key)\n    end \n  end \n</code></pre>\n\n<p>If there is a clearer way to locate a unique <code>Saft</code> I would recommend that just from a readability standpoint but this should give you a clearer picture.</p>\n"}], "owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 48649627, "answer_count": 1, "score": 0, "last_activity_date": 1517941717, "creation_date": 1517939255, "last_edit_date": 1517939769, "question_id": 48649006, "link": "https://stackoverflow.com/questions/48649006/how-to-seed-join-table-data-from-yaml-file-through-seed-rb-in-rails", "title": "How to seed join table data from yaml file through seed.rb in Rails", "body": "<p>I am trying to add to my seed.rb the ability to load data onto a join table for my ROR 3.2.5 application.</p>\n\n<p>I have two models: Saft.rb and Keyword.rb, which I would like to join.</p>\n\n<pre><code>class Saft &lt; ActiveRecord::Base\n   has_and_belongs_to_many :keyword, :join_table =&gt; \"safts_keywords\"\nend\n\nclass Keyword &lt; ActiveRecord::Base\n  attr_accessible :word\n  has_and_belongs_to_many :saft, :join_table =&gt; \"safts_keywords\"\nend\n</code></pre>\n\n<p>I seed datasets for both from a yaml file, such as from: keywords_list.yml</p>\n\n<pre><code>---\n  - word: \"12\"\n\n  - word: \"34\"\n</code></pre>\n\n<p>The corresponding part of my Seed.rb:</p>\n\n<pre><code>keywords_data = YAML.load_file(Rails.root.join('db/seeds/keywords_list.yml'))\nkeywords_data.each do |keyword|\n    h = Keyword.find_or_initialize_by_word(keyword['word'])\n    h.save\nend\n</code></pre>\n\n<p>Now I would like to seed the initial dataset for the join table from a yaml file too. (safts_keywords.yml)</p>\n\n<pre><code>---\n  - saft_id: 1\n    keyword_id: 2\n</code></pre>\n\n<p>When I try to load the data through:</p>\n\n<pre><code># Load the Join Table\nsafts_keywords_data = YAML.load_file(Rails.root.join('db/seeds/safts_keywords_list.yml'))\nsafts_keywords_data.each do |saftkeyword|\n    h = SaftKeyword.find_or_initialize_by_saft_id(saftkeyword['saft_id'], \n    :keyword_id =&gt; saftkeyword['keyword_id'])\n    h.save\nend\n</code></pre>\n\n<p>I get:</p>\n\n<blockquote>\n  <p>.<br />.<br />.<br />** Invoke db:structure:load_if_sql (first_time)<br />\n  ** Invoke db:create <br />\n  ** Execute db:structure:load_if_sql<br />\n  ** Invoke db:seed (first_time)<br />\n  ** Execute db:seed<br />\n  ** Invoke db:abort_if_pending_migrations (first_time)<br />\n  ** Invoke environment <br />\n  ** Execute db:abort_if_pending_migrations<br />\n  rake aborted!<br />\n  uninitialized constant SaftKeyword<br />\n  /Users/Stephan/Development/REPRO/saftzine_com/db/seeds.rb:99<br />\n  /Users/Stephan/Development/REPRO/saftzine_com/db/seeds.rb:97:in `each'<br />\n  /Users/Stephan/Development/REPRO/saftzine_com/db/seeds.rb:97<br />\n  .<br />.<br />.<br /></p>\n</blockquote>\n\n<p>How can I get this to work?</p>\n\n<p>Edited:</p>\n\n<p>I created the join table through a migration. It is named \"safts_keywords\", but Saft_Keyword does not work either in the seed.rb.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1517936854, "post_id": 48648276, "comment_id": 84294200, "body": "You don&#39;t want a table per domain, that violates relational design principles. Instead put everything in one table with a column indicating domain source."}, {"owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1517937054, "post_id": 48648276, "comment_id": 84294320, "body": "Would&#39;t that create a very inefficient database for comparing changes from the same domain if for example the pages are scraped every few hours and stored in the same table ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1517937122, "post_id": 48648276, "comment_id": 84294366, "body": "That&#39;s what indexes are for. They make it easy to search through a subset of the data for whatever you want. You&#39;ll also want to hash the content you get so you can skip duplicated inserts. If the content hash matches, ignore it, don&#39;t save it, as you already have a snapshot of that version."}, {"owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1517937260, "post_id": 48648276, "comment_id": 84294451, "body": "Cheers for the quick replies and advice, I will use just one table as you suggested and hash the data."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1517937312, "post_id": 48648276, "comment_id": 84294478, "body": "You&#39;ll be pleasantly surprised how much data a simple database can sponge up and still perform well. When you do have problems with scale, consider using <a href=\"https://dev.mysql.com/doc/refman/5.7/en/partitioning.html\" rel=\"nofollow noreferrer\">partitions</a> to manage things. Going down the multiple table road gives you quick wins (&quot;yay, less data per table!&quot;) but soon proves to be completely unmanageable (&quot;it crashes my SQL client when I list all databases&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "edited": false, "score": 0, "creation_date": 1517937963, "post_id": 48648539, "comment_id": 84294823, "body": "Thanks, I am already using Nokogiri and I will read more about ARCHIVE tables as I want to keep the records."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1517937559, "creation_date": 1517937559, "answer_id": 48648539, "question_id": 48648276, "link": "https://stackoverflow.com/questions/48648276/create-mysql-tables-dynamically-based-on-a-criteria-in-ruby-on-rails-5/48648539#48648539", "title": "Create mysql tables dynamically based on a criteria in ruby on rails 5", "body": "<p>The recommended \"relational database\" way to do this is to have a singular table and relate that table to the source. For page snapshots you can often hash the content to test for duplicated data, and a <code>UNIQUE</code> index on your content hash can automatically prevent those sorts of inserts.</p>\n\n<p>If portions of the page update but you're not interested in them, like advertising blocks, you can use a tool like <a href=\"http://nokogiri.org\" rel=\"nofollow noreferrer\">Nokogiri</a> to pre-process and strip out that content before hashing and saving.</p>\n\n<p>Now if this is just part of a pipeline where you're capturing pages with the express intent of extracting price information later, you may not need a database at all for that part of the process. You could funnel the raw page data into a queue like <a href=\"http://rabbitmq.com\" rel=\"nofollow noreferrer\">RabbitMQ</a> and have workers process it, boiling it down to the price data, which is all you insert in the database.</p>\n\n<p>If you need to preserve the page snapshots for diagnostic or historical reasons then a table will work. To save on size you can explore using an <a href=\"https://dev.mysql.com/doc/refman/5.7/en/archive-storage-engine.html\" rel=\"nofollow noreferrer\">ARCHIVE</a> type table. These are append-only, you can't edit them, but they are compact and perform well.</p>\n\n<p>You could periodically <code>TRUNCATE</code> a table of that sort to clear out old data so you're not keeping junk around forever.</p>\n"}], "owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 48648539, "answer_count": 1, "score": 0, "last_activity_date": 1517937559, "creation_date": 1517936681, "last_edit_date": 1517936806, "question_id": 48648276, "link": "https://stackoverflow.com/questions/48648276/create-mysql-tables-dynamically-based-on-a-criteria-in-ruby-on-rails-5", "title": "Create mysql tables dynamically based on a criteria in ruby on rails 5", "body": "<p>I am new to Rails and I am trying to create a web app where you scrape some html from a page and store it into a database in order to compare it to a different version e.g the price of a product changed. The way I want to make it work is to create a new table every time you scrape something from a domain that's new.</p>\n\n<p>So basically every domain has its own table for changes. I know how to create tables with migrations but how do you dynamically create a table when a new domain is added ?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 2, "creation_date": 1517936488, "post_id": 48648196, "comment_id": 84293998, "body": "Read about different ways to access individual characters and substrings in strings using <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>String#[] method</code></a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1517959548, "post_id": 48648196, "comment_id": 84305258, "body": "It would be helpful if you could point out what, <i>precisely</i> is unclear to you in the documentation of <code>String#[]</code>. That way, the Ruby developers can improve the documentation so that future developers don&#39;t run into the same problem again."}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1547059177, "post_id": 48648196, "comment_id": 95065533, "body": "@J&#246;rgWMittag In my case, I&#39;ve come to this looking for the point behind the 1..-1 sequence, if that&#39;s helpful. This code bit comes from <a href=\"https://www.codecademy.com/courses/learn-ruby/lessons/methods-blocks-sorting/exercises/how-blocks-differ-from-methods?action=resume_content_item\" rel=\"nofollow noreferrer\">this Codeacademy exercise</a>, which I&#39;m working through."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1518003248, "post_id": 48648292, "comment_id": 84322805, "body": "The OP might not be aware that \u2013 in the given code \u2013 <code>[0]</code> and <code>[1..-1]</code> are method calls. Maybe you should clarify that first."}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 10, "last_activity_date": 1518004302, "last_edit_date": 1518004302, "creation_date": 1517936750, "answer_id": 48648292, "question_id": 48648196, "link": "https://stackoverflow.com/questions/48648196/what-is-0-and-1-1-in-ruby/48648292#48648292", "title": "What is [0] and [1..-1] in Ruby?", "body": "<p><code>string[0]</code> is a new string that contains the first character of <code>string</code>.<br>\nIt is, in fact, syntactic sugar for <code>string.[](0)</code>, i.e. calling the method <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-5B-5D\" rel=\"noreferrer\"><code>String#[]</code></a> on the <a href=\"http://ruby-doc.org/core-2.5.0/String.html\" rel=\"noreferrer\"><code>String</code></a> object stored in the variable <code>string</code> with argument <code>0</code>.</p>\n\n<p>The <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-5B-5D\" rel=\"noreferrer\"><code>String#[]</code></a> method also accepts a <a href=\"http://ruby-doc.org/core-2.5.0/Range.html\" rel=\"noreferrer\"><code>Range</code></a> as argument, to extract a substring. In this case, the lower bound of range is the index where the substring starts and the upper bound is the index where the substring ends. Positive values count the characters from the beginning of the string (starting with <code>0</code>), negative values count the characters from the end of the string (<code>-1</code> denotes the last character).</p>\n\n<p>The call <code>string[1..-1]</code> (<code>string.[](1..-1)</code>) returns a new string that is initialized with the substring of <code>string</code> that starts with the second character of <code>string</code> (<code>1</code>) and ends with its last character.</p>\n\n<p>Put together, <code>string[0].upcase</code> is the uppercase version of the first character of <code>string</code>, <code>string[1..-1]</code> is the rest of <code>string</code> (everything but the first character).</p>\n\n<p>Read more about different ways to access individual characters and substrings in strings using <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-5B-5D\" rel=\"noreferrer\"><code>String#[] method</code></a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 9323275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eee928c489b8bc5176d92c1a413e30?s=128&d=identicon&r=PG&f=1", "display_name": "AnisXTN", "link": "https://stackoverflow.com/users/9323275/anisxtn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2896, "favorite_count": 0, "accepted_answer_id": 48648292, "answer_count": 1, "score": 3, "last_activity_date": 1518004302, "creation_date": 1517936368, "last_edit_date": 1518001945, "question_id": 48648196, "link": "https://stackoverflow.com/questions/48648196/what-is-0-and-1-1-in-ruby", "title": "What is [0] and [1..-1] in Ruby?", "body": "<p>What do <code>[0]</code> and <code>[1..-1]</code> mean in the following code?</p>\n\n<pre><code>def capitalize(string) \n  puts \"#{string[0].upcase}#{string[1..-1]}\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1517934556, "creation_date": 1517934556, "answer_id": 48647613, "question_id": 48647376, "link": "https://stackoverflow.com/questions/48647376/rails-self-referential-join-association/48647613#48647613", "title": "rails self-referential join association", "body": "<p>The FriendRequest model is a good option.</p>\n\n<p>You could  also try to add a status to Friendship (request, accepted, etc) and define scopes in your models to filter requests or friends. </p>\n"}, {"comments": [{"owner": {"reputation": 1280, "user_id": 3554338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c022fa34c942d95cc255e80cd73f9753?s=128&d=identicon&r=PG&f=1", "display_name": "Aparichith", "link": "https://stackoverflow.com/users/3554338/aparichith"}, "edited": false, "score": 0, "creation_date": 1517942095, "post_id": 48647808, "comment_id": 84297052, "body": "Thanks, I made a status column and storing 3 status as of now. -1 for pending, 0 for rejection and 1 for accepted. Default will be -1. But if I follow your way of consist code <code>scope :accepted, -&gt;{ where(status: 1) }</code> and <code>has_many :pending_friends, -&gt; { pending }, :through =&gt; :friendships</code> I am getting <code>Could not find the source association(s) &quot;pending_friend&quot; or :pending_friends in model Friendship</code> error."}], "tags": [], "owner": {"reputation": 124, "user_id": 4161887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11328f84c0086d3fdceac42129eff772?s=128&d=identicon&r=PG&f=1", "display_name": "Duch", "link": "https://stackoverflow.com/users/4161887/duch"}, "is_accepted": false, "score": 1, "last_activity_date": 1517936843, "last_edit_date": 1517936843, "creation_date": 1517935095, "answer_id": 48647808, "question_id": 48647376, "link": "https://stackoverflow.com/questions/48647376/rails-self-referential-join-association/48647808#48647808", "title": "rails self-referential join association", "body": "<p>I would add a flag to <code>Friendship</code> model - <code>accepted</code> boolean.\nThen I would add default scope:</p>\n\n<p><em>../friendship.rb</em>\n<code>\ndefault_scope where(accepted: true)\n</code></p>\n\n<p>For pending friends list, create scope:</p>\n\n<p><em>../user.rb</em>\n<code>\nhas_many :pending_firends, through: :friendship do\n def pending\n   where(\"friendships.accepted = ?\", false)\n end\nend\n</code></p>\n\n<p>I would say that rejecting = removing friendship record. You can add another feature - blocked. </p>\n\n<p><code>current_user.friends</code></p>\n\n<p><code>current_user.pending_firends</code></p>\n\n<p>But you want to be consist so use:</p>\n\n<p><em>../friendship.rb</em>\n<code>\n scope :accepted, where(accepted: true)\n scope :pending, where(accepted: false)\n</code></p>\n\n<p><em>../user.rb</em>\n<code>\nhas_many :pending_firends, -&gt; { pending }, through: :friendship\nhas_many :accepted_firends, -&gt; { accepted }, through: :friendship\n</code></p>\n\n<p>It should work, I could make some mistakes.</p>\n"}], "owner": {"reputation": 1280, "user_id": 3554338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c022fa34c942d95cc255e80cd73f9753?s=128&d=identicon&r=PG&f=1", "display_name": "Aparichith", "link": "https://stackoverflow.com/users/3554338/aparichith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517936843, "creation_date": 1517933843, "question_id": 48647376, "link": "https://stackoverflow.com/questions/48647376/rails-self-referential-join-association", "title": "rails self-referential join association", "body": "<p>I am working on an API only rails app where I am trying to mimic social media features. Like send request to user, accept/reject request, chat with friends. By referring to this <a href=\"http://railscasts.com/episodes/163-self-referential-association?view=comments\" rel=\"nofollow noreferrer\">screen-cast</a>, now I am able to add other users as friends.</p>\n\n<p>Bellow is my User model</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :friendships\n  has_many :friends, :through =&gt; :friendships\n  has_many :inverse_friendships, :class_name =&gt; \"Friendship\", :foreign_key =&gt; \"friend_id\"\n  has_many :inverse_friends, :through =&gt; :inverse_friendships, :source =&gt; :user\nend\n</code></pre>\n\n<p>Bellow is Friendship model</p>\n\n<pre><code>class Friendship &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :friend, :class_name =&gt; 'User'\nend\n</code></pre>\n\n<p>And I have defined routes as bellow to access current user</p>\n\n<pre><code>  resources :users do\n    resources :friendships, only: [:create, :destroy]\n  end\n</code></pre>\n\n<p>I can add friends as bellow </p>\n\n<pre><code>current_user = User.find(params[:user_id])\nrequesting_user = User.find(params[:req_user_id])\ncurrent_user.friends &lt;&lt; requesting_user\n</code></pre>\n\n<p>Everything works fine till here.</p>\n\n<p>Can anyone suggest me how to achieve accepting/rejecting a request? </p>\n\n<p>I tried as, having one more <code>FriendRequest</code> model and through that decide whether to add request as friend or not. But not able to do it successfully. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "kaminari"], "comments": [{"owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "edited": false, "score": 0, "creation_date": 1517933286, "post_id": 48647140, "comment_id": 84291719, "body": "How do you get <code>@properties</code>?"}, {"owner": {"reputation": 26, "user_id": 9178514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c5973e903130ccb4ac4ce240053b4b?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/9178514/asha"}, "reply_to_user": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "edited": false, "score": 0, "creation_date": 1517933586, "post_id": 48647140, "comment_id": 84291919, "body": "It&#39;s a search results page so using the parameters provided by the user. @properties = Property.active.search(search_params)"}, {"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 1, "creation_date": 1517933907, "post_id": 48647140, "comment_id": 84292122, "body": "what is the rest of the error? e.g. <code>undefined local variable or method </code>page&#39; for  ?` <code>nil:NilClass</code>? <code>ActiveRecord::Relation</code>?"}, {"owner": {"reputation": 26, "user_id": 9178514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c5973e903130ccb4ac4ce240053b4b?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/9178514/asha"}, "edited": false, "score": 0, "creation_date": 1517934145, "post_id": 48647140, "comment_id": 84292283, "body": "undefined local variable or method `page&#39; for #&lt;SearchController:0x007fd546587140&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 2, "last_activity_date": 1517934588, "creation_date": 1517934588, "answer_id": 48647633, "question_id": 48647140, "link": "https://stackoverflow.com/questions/48647140/kaminari-undefined-local-variable-or-method-page-for/48647633#48647633", "title": "Kaminari - undefined local variable or method `page&#39; for", "body": "<p>There is no object <code>page</code> in your controller...</p>\n\n<pre><code>@properties = @properties.page(page[:params]).per(9)\n</code></pre>\n\n<p>I think what you wanted to do was...</p>\n\n<pre><code>@properties = @properties.page(params[:page]).per(9)\n</code></pre>\n"}], "owner": {"reputation": 26, "user_id": 9178514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c5973e903130ccb4ac4ce240053b4b?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/9178514/asha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 48647633, "answer_count": 1, "score": 0, "last_activity_date": 1517938493, "creation_date": 1517933000, "last_edit_date": 1517938493, "question_id": 48647140, "link": "https://stackoverflow.com/questions/48647140/kaminari-undefined-local-variable-or-method-page-for", "title": "Kaminari - undefined local variable or method `page&#39; for", "body": "<p>I was using will_paginate for pagination on my site but as we're using Active Admin I decided to change it to kaminari to avoid any of the conflict issues between the two. I removed will_paginate from the gem file and added kaminari, restarted the rails server and ran bundle install but I'm getting errors which suggest it has not been installed properly:</p>\n\n<pre><code>undefined local variable or method `page' for &lt;SearchController:0x007fd546587140&gt;\n</code></pre>\n\n<p>Rails version: 5</p>\n\n<p>Gemfile: </p>\n\n<pre><code>gem 'kaminari', '~&gt; 0.16.3'\n#gem 'will_paginate', '~&gt;3.1.6'\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>...\n\n @properties = @properties.page(page[:params]).per(9)\n</code></pre>\n\n<p>Not sure what the issue is?</p>\n"}, {"tags": ["ruby", "wicked-pdf"], "comments": [{"owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "edited": false, "score": 0, "creation_date": 1517932770, "post_id": 48646596, "comment_id": 84291374, "body": "Hi, have you tried with <code>wicked_pdf_stylesheet_link_tag &quot;application&quot;, media: &quot;all&quot;, &quot;data-turbolinks-track&quot;: true</code>"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1517933185, "post_id": 48646596, "comment_id": 84291658, "body": "Check <a href=\"https://github.com/mileszs/wicked_pdf#advanced-usage-with-all-available-options\" rel=\"nofollow noreferrer\">format of options</a>."}, {"owner": {"reputation": 157, "user_id": 9322828, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215722452876336/picture?type=large", "display_name": "Damien Comp&#232;re", "link": "https://stackoverflow.com/users/9322828/damien-comp%c3%a8re"}, "edited": false, "score": 0, "creation_date": 1518079738, "post_id": 48646596, "comment_id": 84359335, "body": "Thanks for your help Snoobie, i tried but it did not work. I added the debug parameters in the URL and it was good. Actually I can see html / css / javascript. I still have a problem now with boostrap / some font-family and font awesome, in my console, Chrome tell me that there are not allowed to load local ressource. Any idea why ?"}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 3353316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06415305d9cde1d13a60e2a615307d14?s=128&d=identicon&r=PG", "display_name": "Charith H", "link": "https://stackoverflow.com/users/3353316/charith-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1522389958, "creation_date": 1522389958, "answer_id": 49569262, "question_id": 48646596, "link": "https://stackoverflow.com/questions/48646596/wicked-pdf-rendering-css-javascript-in-ruby/49569262#49569262", "title": "wicked pdf rendering css / javascript in Ruby", "body": "<p>I have tried different techniques to speedup my pdf generation. But these steps were pretty helpful. </p>\n\n<ol>\n<li>Try using <a href=\"https://github.com/bokmann/font-awesome-rails\" rel=\"nofollow noreferrer\">font-awesome-rails</a> and <a href=\"https://github.com/twbs/bootstrap-rubygem\" rel=\"nofollow noreferrer\">bootstrap ruby gem</a></li>\n<li>Use separate <code>scss</code> file to import necessary css/scss files. And, Try to avoid importing unnecessary css files. (Because loading external css files and images kills the server memory and delay the pdf process.)</li>\n</ol>\n\n<p>Please see the sample code below\n<a href=\"https://i.stack.imgur.com/ZuE1d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZuE1d.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"3\">\n<li>Import your stylesheet in the pdf layout file as bellow.</li>\n</ol>\n\n<p><code>&lt;%= wicked_pdf_stylesheet_link_tag \"pdf_layout\", media: \"all\" -%&gt;</code></p>\n\n<p>Please check more details <a href=\"https://github.com/mileszs/wicked_pdf\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 157, "user_id": 9322828, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215722452876336/picture?type=large", "display_name": "Damien Comp&#232;re", "link": "https://stackoverflow.com/users/9322828/damien-comp%c3%a8re"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522389958, "creation_date": 1517931256, "question_id": 48646596, "link": "https://stackoverflow.com/questions/48646596/wicked-pdf-rendering-css-javascript-in-ruby", "title": "wicked pdf rendering css / javascript in Ruby", "body": "<p>I'm trying to convert html page with wicked pdf but the  html / css / javascript are not displayed. </p>\n\n<p>Here is my controller : </p>\n\n<pre><code>respond_to do |format|\n            format.html\n            format.pdf do\n            render :pdf =&gt; 'rapport_pdf',\n          :template =&gt; 'messages/template_load_pdf.pdf.erb',\n          :layout =&gt; 'rapport_load_pdf.html.erb',\n          :show_as_html =&gt; params[:debug].present?\n        end\n    end\n</code></pre>\n\n<p>Here is my rapport_load_pdf.html.erb : </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;PDF&lt;/title&gt;\n&lt;%= wicked_pdf_stylesheet_link_tag \"application\" -%&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class='container'&gt;\n&lt;%= yield %&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>Here is my gemfile : </p>\n\n<pre><code>gem 'wicked_pdf'\ngem 'wkhtmltopdf-binary'\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "edited": false, "score": 0, "creation_date": 1517933303, "post_id": 48646511, "comment_id": 84291726, "body": "My advice would first be to bundle your script into a gem, then write a bash script (mac/Linux) or batch file (windows) that runs all the cli commands at the click of a button to handle the install."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1517937971, "post_id": 48646511, "comment_id": 84294827, "body": "check out <a href=\"https://github.com/phusion/traveling-ruby\" rel=\"nofollow noreferrer\">traveling-ruby</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 3, "last_activity_date": 1517931279, "creation_date": 1517931279, "answer_id": 48646602, "question_id": 48646511, "link": "https://stackoverflow.com/questions/48646511/how-to-share-a-ruby-script-which-require-gems/48646602#48646602", "title": "How to share a ruby script which require gems", "body": "<p>The standard answer to this question is:</p>\n\n<p>Define gems in a <code>Gemfile</code>, and require the user to run <code>bundle install</code> before running your code.</p>\n\n<p>However, it's also possible to take this one step further and define an <strong>inline</strong> gemfile, using <code>bundler/inline</code>. For example:</p>\n\n<pre><code>require 'bundler/inline'\n\ngemfile do\n  source 'https://rubygems.org'\n  gem 'minitest', require: false # &lt;--- Define your gems here\nend\n\n# This is just some sample code to demonstrate using the gems:\nrequire 'minitest/autorun'\n\nclass MyTest &lt; Minitest::Test\n  def test_should_be_true\n    assert_equal true, true\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9199242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53b6199bdc4d70f3fbdb85a8bb72b5e?s=128&d=identicon&r=PG&f=1", "display_name": "H4ml3tt3d", "link": "https://stackoverflow.com/users/9199242/h4ml3tt3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1517931279, "creation_date": 1517930947, "question_id": 48646511, "link": "https://stackoverflow.com/questions/48646511/how-to-share-a-ruby-script-which-require-gems", "title": "How to share a ruby script which require gems", "body": "<p>My question is going to be pretty straight-forward: how can I share a ruby script which requires gems the user might not have installed? I have a simple ruby script which I want to share with a friend to make his job easier. I would like to share it with him as a directory which contains everything needed to run properly without requirim him to install some gems. In fact, he doesn't know about programming, so he should be able to click an executable I already prepared for him and follow the instructions inside the program. Can someone explain how could I achieve this? I'm a ruby student so I would appreciate an explanation. Lots of thanks.</p>\n"}, {"tags": ["ruby", "rspec", "shoulda"], "comments": [{"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1517932871, "post_id": 48646439, "comment_id": 84291451, "body": "<code>@new_record || true</code> will never return false."}, {"owner": {"reputation": 143, "user_id": 8179934, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-omoLmVbjqoY/AAAAAAAAAAI/AAAAAAAAAAs/8AiO17vneHg/photo.jpg?sz=128", "display_name": "Ian Tran", "link": "https://stackoverflow.com/users/8179934/ian-tran"}, "reply_to_user": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1517933188, "post_id": 48646439, "comment_id": 84291660, "body": "I set the default new_record as true as default, when I need to create a new user and new_record as false when I need to edit the user profile. new_record == true this test should be passed if email is nil -&gt; user.valid? == false. However, the result from test is &quot;After setting :email to \u2039nil\u203a, the matcher expected the User to be          invalid, but it was valid instead.&quot;"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1517933502, "post_id": 48646439, "comment_id": 84291848, "body": "Why don&#39;t u use <code>on: :create</code>?"}, {"owner": {"reputation": 143, "user_id": 8179934, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-omoLmVbjqoY/AAAAAAAAAAI/AAAAAAAAAAs/8AiO17vneHg/photo.jpg?sz=128", "display_name": "Ian Tran", "link": "https://stackoverflow.com/users/8179934/ian-tran"}, "reply_to_user": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1517934168, "post_id": 48646439, "comment_id": 84292298, "body": "That&#39;s a great idea instead of my new_record thing. However, I just try adding on: :create after <code>validates :email, presence: true, email: true, on: :create</code>. It failed with the same error. (Test passed before ading on: :create)"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1517934617, "post_id": 48646439, "comment_id": 84292640, "body": "You need also to change your spec for smth like this: <code>expect(subject).to validate_presence_of(:email).on(:create)</code>."}, {"owner": {"reputation": 143, "user_id": 8179934, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-omoLmVbjqoY/AAAAAAAAAAI/AAAAAAAAAAs/8AiO17vneHg/photo.jpg?sz=128", "display_name": "Ian Tran", "link": "https://stackoverflow.com/users/8179934/ian-tran"}, "reply_to_user": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1517935884, "post_id": 48646439, "comment_id": 84293600, "body": "It works like a charm. Thank you a lot."}], "owner": {"reputation": 143, "user_id": 8179934, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-omoLmVbjqoY/AAAAAAAAAAI/AAAAAAAAAAs/8AiO17vneHg/photo.jpg?sz=128", "display_name": "Ian Tran", "link": "https://stackoverflow.com/users/8179934/ian-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 594, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1517930758, "creation_date": 1517930758, "question_id": 48646439, "link": "https://stackoverflow.com/questions/48646439/shoulda-matcher-and-conditional-validation-errors", "title": "shoulda matcher and conditional validation errors", "body": "<p>Here I use the attribute <code>:new_record</code> to set the condition for validation.</p>\n\n<pre><code>attr_accessor :new_record\nvalidates :email, presence: true, email: true, unless: :new_record?\n\n  def new_record?\n    @new_record || true\n  end\n</code></pre>\n\n<p>if the new_record? == true, the email validation will be skipped and new user is valid.\nI wrote this test: \n<code>it { expect(subject).to validate_presence_of(:email) }</code>\nand it returns error:</p>\n\n<pre><code>Failure/Error: it { expect(subject).to validate_presence_of(:email) }\n\n       User did not properly validate that :email cannot be empty/falsy.\n         After setting :email to \u2039nil\u203a, the matcher expected the User to be\n         invalid, but it was valid instead.\n</code></pre>\n\n<p>Note that this test run perfectly if there is no condition added to the validation. Also, the code work well in production.\nI also have tried </p>\n\n<pre><code>    before(:each) do\n      subject.new_record = true\n    end\n</code></pre>\n\n<p>or </p>\n\n<pre><code>`before { allow(subject).to receive(:new_record?).and_return(true) }`\n</code></pre>\n\n<p>Can any one help?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1517938850, "post_id": 48646382, "comment_id": 84295317, "body": "Your data makes no sense. Your <code>[&quot;element1&quot;:&quot;ABC&quot;, &quot;element1&quot;:&quot;DEF&quot;,&quot;element1&quot;:&quot;GHI&quot;]</code> for example actually is <code>[{:element1=&gt;&quot;GHI&quot;}]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517937371, "post_id": 48646524, "comment_id": 84294515, "body": "Hmm, your input and output look quite different from the question&#39;s."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517937976, "post_id": 48646524, "comment_id": 84294830, "body": "@Stefan The OP had (albeit with a few syntax errors) the arrays I present in my answer. Unfortunately you can&#39;t see this in the edit-history for the question. Anyway, the general idea here is the important thing I hope:)"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1517938123, "post_id": 48646524, "comment_id": 84294927, "body": "Ok... just looks weird. And why would they vandalize their own question like that... sigh."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 3, "last_activity_date": 1517930990, "creation_date": 1517930990, "answer_id": 48646524, "question_id": 48646382, "link": "https://stackoverflow.com/questions/48646382/ruby-combine-certain-elements-of-arrays-into-a-new-array/48646524#48646524", "title": "Ruby - combine certain elements of arrays into a new array", "body": "<pre><code>arr1 = [\"ABC\", \"DEF\", \"GHI\"]\narr2 = [\"123\", \"456\", \"789\"]\narr3 = [\"JKL\", \"MNO\", \"PQR\"]\n</code></pre>\n\n<p>Use <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\">Array#transpose</a> with parallel assignment.</p>\n\n<pre><code>arr4, arr5, arr6 = [arr1, arr2, arr3].transpose\n\narr4 #=&gt; [\"ABC\", \"123\", \"JKL\"]\narr5 #=&gt; [\"DEF\", \"456\", \"MNO\"]\narr6 #=&gt; [\"GHI\", \"789\", \"PQR\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1517942623, "last_edit_date": 1517942623, "creation_date": 1517936653, "answer_id": 48648269, "question_id": 48646382, "link": "https://stackoverflow.com/questions/48646382/ruby-combine-certain-elements-of-arrays-into-a-new-array/48648269#48648269", "title": "Ruby - combine certain elements of arrays into a new array", "body": "<p><a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\">Array#transpose</a> and <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-zip\" rel=\"nofollow noreferrer\">Array#zip</a> are <a href=\"https://en.wikipedia.org/wiki/Yin_and_yang\" rel=\"nofollow noreferrer\">yin and yang</a>. Whenever <code>transpose</code> can be used, <code>zip</code> is an alternative. The reverse is also true if the arrays <code>arr1</code>, <code>arr2</code> and <code>arr3</code> are all the same size (as required by <code>transpose</code>, but not by <code>zip</code>).</p>\n\n<pre><code>arr1.zip(arr2, arr3)\n  #=&gt; [[\"ABC\", \"123\", \"JKL\"],\n  #    [\"DEF\", \"456\", \"MNO\"],\n  #    [\"GHI\", \"789\", \"PQR\"]]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9321377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4d7b47d960e4f5f3bda553fe4b81f9?s=128&d=identicon&r=PG&f=1", "display_name": "A Cox", "link": "https://stackoverflow.com/users/9321377/a-cox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1517942623, "creation_date": 1517930596, "last_edit_date": 1517930898, "question_id": 48646382, "link": "https://stackoverflow.com/questions/48646382/ruby-combine-certain-elements-of-arrays-into-a-new-array", "title": "Ruby - combine certain elements of arrays into a new array", "body": "<p>I'm trying to merge certain elements of arrays into one array. </p>\n\n<p>I have the following:</p>\n\n<pre><code>arr1: [\"element1\":\"ABC\", \"element1\":\"DEF\",\"element1\":\"GHI\"]\narr2: [\"element2\":\"123\", \"element2\":\"456\", \"element2\":\"789\"]\narr3: [\"element3\":\"JKL\", \"element3\":\"MNO\", \"element3\":\"PQR\"]\n</code></pre>\n\n<p>I'm trying to merge each of the first elements into an array, then the second, then the third, to produce:</p>\n\n<pre><code>arr4: [\"element1\":\"ABC\", \"element2\":\"123\", \"element3\":\"JKL\"]\narr5: [\"element1\":\"DEF\", \"element2\":\"456\", \"element3\":\"MNO\"]\narr6: [\"element1\":\"GHI\", \"element2\":\"789\", \"element3\":\"PQR\"]\n</code></pre>\n\n<p>The code I have at the moment is:</p>\n\n<pre><code>test1 = [\"element1:\"+arr1[0] +', \"element2:\"'+ arr2[0] + ', \"element3:\" '+arr3[0]]\ntest2 = [\"element1:\"+arr1[1] +', \"element2:\"'+ arr2[1] + ', \"element3:\" '+arr3[1]]\ntest3 = [\"element1:\"+arr1[2] +', \"element2:\"'+ arr2[2] + ', \"element3:\" '+arr3[2]]\n</code></pre>\n\n<p>But then I get a mess of a result - what am I doing wrong? </p>\n"}, {"tags": ["ruby", "input", "web-scraping", "wikipedia"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6506253"}, "edited": false, "score": 0, "creation_date": 1517929518, "post_id": 48645977, "comment_id": 84289223, "body": "Why would you print data[1]?"}, {"owner": {"reputation": 3076, "user_id": 4427870, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-gZZq2ak7cZU/AAAAAAAAAAI/AAAAAAAAAI4/u9zvfaYPRgw/photo.jpg?sz=128", "display_name": "Rishav", "link": "https://stackoverflow.com/users/4427870/rishav"}, "edited": false, "score": 0, "creation_date": 1517929608, "post_id": 48645977, "comment_id": 84289294, "body": "@Sankalp data[0] is printing the first &#39;section&#39; of the JSON and data[1] has the 2nd part and so on. Data[1] specifically has the names only so i printed data[1]"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1517930604, "post_id": 48645977, "comment_id": 84289964, "body": "Use threads \u2013 the main thread processes user input (in a loop) and the &quot;wiki&quot; thread fetches the corresponding page."}, {"owner": {"reputation": 3076, "user_id": 4427870, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-gZZq2ak7cZU/AAAAAAAAAAI/AAAAAAAAAI4/u9zvfaYPRgw/photo.jpg?sz=128", "display_name": "Rishav", "link": "https://stackoverflow.com/users/4427870/rishav"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1517933682, "post_id": 48645977, "comment_id": 84291975, "body": "@Stefan I used threads and got what i wanted. The only problem is that i cant figure out how to stop/kill the threads when the user hits enter. I sure can check if <code>temp==&#39;\\n&#39;</code> but then how to end the threads if it is <code>true</code>. Please check the edit."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1517936342, "post_id": 48645977, "comment_id": 84293915, "body": "You only need one additional thread, not two. The input can be processed in your <i>main</i> thread. Just <code>loop</code> until the user hits return (or escape or whatever), then <code>break</code> out of the loop and <a href=\"http://ruby-doc.org/core-2.5.0/Thread.html#method-i-kill\" rel=\"nofollow noreferrer\"><code>kill</code></a> the other thread."}], "answers": [{"comments": [{"owner": {"reputation": 3076, "user_id": 4427870, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-gZZq2ak7cZU/AAAAAAAAAAI/AAAAAAAAAI4/u9zvfaYPRgw/photo.jpg?sz=128", "display_name": "Rishav", "link": "https://stackoverflow.com/users/4427870/rishav"}, "edited": false, "score": 0, "creation_date": 1517933863, "post_id": 48646785, "comment_id": 84292084, "body": "This definitely worked for the input part but pls check the edit. I used threads and it is more convenient. I just cant figure out how to exit the threads when the user hits  &lt;kbd&gt;Enter&lt;/kbd&gt; i.e, when <code>temp==&quot;\\n&quot;</code>"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 3076, "user_id": 4427870, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-gZZq2ak7cZU/AAAAAAAAAAI/AAAAAAAAAI4/u9zvfaYPRgw/photo.jpg?sz=128", "display_name": "Rishav", "link": "https://stackoverflow.com/users/4427870/rishav"}, "edited": false, "score": 0, "creation_date": 1517934421, "post_id": 48646785, "comment_id": 84292481, "body": "@Rishav just break out of the loops. If <code>temp</code> is a newline set some global <code>done=true</code> and then add <code>break if done</code> to your two loops."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1517931860, "creation_date": 1517931860, "answer_id": 48646785, "question_id": 48645977, "link": "https://stackoverflow.com/questions/48645977/continuous-input-as-in-wikipedia/48646785#48646785", "title": "Continuous input as in wikipedia", "body": "<p><code>getch</code> actually takes two (poorly documented) keyword arguments that do exactly what you want</p>\n\n<pre><code># wait for 0 characters, timeout after 2 seconds\nchar = STDIN.getch min:0, time:2\n</code></pre>\n\n<p>If the user does not press any key within two seconds, <code>char</code> will be <code>nil</code>. You can call this in a loop and use that result as a trigger to start the scrape.</p>\n"}, {"tags": [], "owner": {"reputation": 3076, "user_id": 4427870, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-gZZq2ak7cZU/AAAAAAAAAAI/AAAAAAAAAI4/u9zvfaYPRgw/photo.jpg?sz=128", "display_name": "Rishav", "link": "https://stackoverflow.com/users/4427870/rishav"}, "is_accepted": false, "score": 0, "last_activity_date": 1517935070, "creation_date": 1517935070, "answer_id": 48647796, "question_id": 48645977, "link": "https://stackoverflow.com/questions/48645977/continuous-input-as-in-wikipedia/48647796#48647796", "title": "Continuous input as in wikipedia", "body": "<pre><code>require \"rubygems\"\nrequire \"json\"\nrequire 'restclient'\nrequire 'crack'\nrequire 'io/console'\n\nparse=\"\"\nch=\"\"\ndone=false\nt2 =Thread.new do\n    loop do\n        temp=STDIN.getch\n        if temp==\"\\n\"\n            done=true\n            break\n        end\n        parse+=temp\n    end\nend\n\nt=Thread.new do\n    loop do\n        if done==true\n            break\n        end\n        if parse!=ch\n            sleep 1\n            url=\"http://en.wikipedia.org/w/api.php?action=opensearch&amp;search=#{parse}&amp;namespace=0\"\n            data = Crack::JSON.parse(RestClient.get(url))\n            #puts parse\n            puts data[1]\n            ch=parse\n        end\n    end\nend\n\nt.join\nt2.join\n\nputs \"Thanks!\"\ngets\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6506253"}, "is_accepted": false, "score": 0, "last_activity_date": 1522003249, "last_edit_date": 1522003249, "creation_date": 1521985679, "answer_id": 49476580, "question_id": 48645977, "link": "https://stackoverflow.com/questions/48645977/continuous-input-as-in-wikipedia/49476580#49476580", "title": "Continuous input as in wikipedia", "body": "<p>Use <code>.chomp</code> and then it will not only read <code>\\n</code> but spaces as well. Also only 1 thread is required, not 2.</p>\n\n<pre><code>require \"json\"\nrequire 'restclient'\nrequire 'crack'\nrequire 'io/console'\n\nparse=\"\"\nch=\"\"\ndone=false\n\nt2 =Thread.new do\n    loop do\n        temp=STDIN.getch.chomp\n        if temp==\"\"\n            done=true\n            break\n        end\n        parse+=temp\n    end\nend\n\nwhile !done\n    if parse!=ch\n        sleep 1\n        url=\"http://en.wikipedia.org/w/api.php?action=opensearch&amp;search=#{parse}&amp;namespace=0\"\n        data = Crack::JSON.parse(RestClient.get(url))\n        puts data[1]\n        ch=parse\n    end\nend\nt2.join\n</code></pre>\n"}], "owner": {"reputation": 3076, "user_id": 4427870, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-gZZq2ak7cZU/AAAAAAAAAAI/AAAAAAAAAI4/u9zvfaYPRgw/photo.jpg?sz=128", "display_name": "Rishav", "link": "https://stackoverflow.com/users/4427870/rishav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 48646785, "answer_count": 3, "score": 1, "last_activity_date": 1522003249, "creation_date": 1517929328, "last_edit_date": 1517933152, "question_id": 48645977, "link": "https://stackoverflow.com/questions/48645977/continuous-input-as-in-wikipedia", "title": "Continuous input as in wikipedia", "body": "<p>So I am learning ruby and wanted to scrap from wikipedia.</p>\n\n<pre><code>require \"rubygems\"\nrequire \"json\"\nrequire 'restclient'\nrequire 'crack'\nrequire 'io/console'\n\n\nparse = \"\"\n5.times{\n    inp = STDIN.getch\n    parse += inp\n    url=\"http://en.wikipedia.org/w/api.php?action=opensearch&amp;search=#{parse}&amp;namespace=0\"\n\n    data= Crack::JSON.parse(RestClient.get(url))\n    puts data[1]\n}\n</code></pre>\n\n<p>So this code i wrote takes input 5 times from the user concatenating the inputs and scraping the output from wiki search parsing the JSON. But i would like the input to be in a flow instead of the user hitting a character waiting for the output and hitting the next character again. Instead I want it to take input a couple of characters <strong>without pressing enter</strong> and if there is a pause say 1 sec or more it should start scraping and the giving the output. \n<br></p>\n\n<p>A major reason behind is to allow user to erase some text he wrote or add more letters and the script to follow on whatever is left in the input field again <strong>without never hitting enter</strong> even after it has displayed the output after the initial pause.</p>\n\n<p><br>\nBasically I want it to be just like in wiki itself. You can enter the search team modify it anytime and there is always a new output waiting.</p>\n\n<p><strong>Edit:</strong></p>\n\n<pre><code>require \"rubygems\"\nrequire \"json\"\nrequire 'restclient'\nrequire 'crack'\nrequire 'io/console'\n\nparse=\"\"\nch=\"\"\nt2 =Thread.new do\n    loop do\n        temp=STDIN.getch\n        parse+=temp\n    end\nend\n\nt=Thread.new do\n    loop do\n        if parse!=ch\n            sleep 1\n            url=\"http://en.wikipedia.org/w/api.php?action=opensearch&amp;search=#{parse}&amp;namespace=0\"\n            data = Crack::JSON.parse(RestClient.get(url))\n            #puts parse\n            puts data[1]\n            ch=parse\n        end\n    end\nend\n\nt.join\nt2.join\n</code></pre>\n\n<p>This works perfectly but how do I end the threads when the user hits enter.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "service-worker"], "answers": [{"comments": [{"owner": {"reputation": 1178, "user_id": 3722787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8e34f7c177fac394db7cb720d1010f?s=128&d=identicon&r=PG&f=1", "display_name": "lellefood", "link": "https://stackoverflow.com/users/3722787/lellefood"}, "edited": false, "score": 0, "creation_date": 1517998080, "post_id": 48646536, "comment_id": 84319340, "body": "This is a good answer but now I realized that my problem wasn&#39;t the controller but the routes.   In my <code>routes.rb</code> i&#39;ve added <code>get &#39;&#47;sw&#39; =&gt; &#39;sw#show&#39;</code> but:    <code>GET localhost&#47;sw.js</code>   gives No route matches [GET] &quot;/sw.js&quot;    But <code>GET localhost&#47;sw</code> return the correct file. What should I change?"}, {"owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "reply_to_user": {"reputation": 1178, "user_id": 3722787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8e34f7c177fac394db7cb720d1010f?s=128&d=identicon&r=PG&f=1", "display_name": "lellefood", "link": "https://stackoverflow.com/users/3722787/lellefood"}, "edited": false, "score": 0, "creation_date": 1517998673, "post_id": 48646536, "comment_id": 84319734, "body": "@lellefood You can add something like the <a href=\"https://stackoverflow.com/questions/30600864/rails-respond-to-blocks-and-format\">respond_to and format</a> block"}], "tags": [], "owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1517931045, "creation_date": 1517931045, "answer_id": 48646536, "question_id": 48645066, "link": "https://stackoverflow.com/questions/48645066/return-a-javascript-file-from-a-url-in-controller/48646536#48646536", "title": "Return a javascript file from a url in controller", "body": "<p>You can use the <code>send_file</code> from the controller action <a href=\"https://stackoverflow.com/questions/9233021/returning-files-from-rails\">like here</a> :</p>\n\n<pre><code>def your_action \n  send_file(\"#{Rails.root}/app/public/packs/sw.js\",\n            :filename =&gt; \"sw.js\",\n            :type =&gt; \"application/javascript\")\nend\n</code></pre>\n\n<p>I'm not 100% sure on the mime type, it's either <code>text/javascript</code> or <code>application/javascript</code></p>\n"}], "owner": {"reputation": 1178, "user_id": 3722787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8e34f7c177fac394db7cb720d1010f?s=128&d=identicon&r=PG&f=1", "display_name": "lellefood", "link": "https://stackoverflow.com/users/3722787/lellefood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 48646536, "answer_count": 1, "score": 0, "last_activity_date": 1517931045, "creation_date": 1517926485, "question_id": 48645066, "link": "https://stackoverflow.com/questions/48645066/return-a-javascript-file-from-a-url-in-controller", "title": "Return a javascript file from a url in controller", "body": "<p>I got a <code>sw.js</code> file generated by <a href=\"https://github.com/NekR/offline-plugin\" rel=\"nofollow noreferrer\">offline-plugin</a> in 'app/public/packs/'.<br>\nI have to respond to a GET to <code>/sw.js</code> with <code>app/public/packs/sw.js</code>.<br>\nNo <code>redirect_to</code>, I have to serve it from there to have the service worker controlling the root scope.  </p>\n\n<p>How do I write a controller to respond to <code>localhost/sw.js</code> with the content from <code>localhost/packs/sw.js</code>?</p>\n"}, {"tags": ["ruby", "docker", "rspec", "rubygems", "serverspec"], "answers": [{"tags": [], "owner": {"reputation": 676, "user_id": 4324409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Wc6bT.png?s=128&g=1", "display_name": "pklndnst", "link": "https://stackoverflow.com/users/4324409/pklndnst"}, "is_accepted": true, "score": 0, "last_activity_date": 1518524731, "creation_date": 1518524731, "answer_id": 48766794, "question_id": 48644823, "link": "https://stackoverflow.com/questions/48644823/checking-on-empty-gems-cache-fails-using-serverspec-for-docker-image-build-testi/48766794#48766794", "title": "Checking on empty gems cache fails using Serverspec for Docker image build testing", "body": "<p>I finally figured out what went wrong, and actually it's pretty simple:</p>\n\n<p>Let's assume that we have a single Serverspec test case like this one:</p>\n\n<pre><code>it \"removes build dependencies during cleanup\" do\n  # Some more assertions \n  # ...\n  expect(Dir.glob('/usr/lib/ruby/gems/*/cache/*.gem').size).to_not eq 0  \nend\n</code></pre>\n\n<p>Now what's happening during execution is that the <code>Dir.glob()</code> call is evaluated before the <code>expect()</code> routine is invoked. Consequently, as I already pointed out in my post, the <code>Dir.glob()</code> command is run outside of the container's scope and checks the corresponding host directory instead.\nIf you ever want to check if a container folder is empty or not, you can achieve this as follows:</p>\n\n<pre><code>it \"clears gem/apk caches as well as tmp files/dirs\" do\n  expect(command('ls /usr/lib/ruby/gems/*/cache/*.gem | wc -l').stdout).to eq \"0\\n\"\nend\n</code></pre>\n\n<p>Admittedly, this is probably not the most beautiful and elegant solution but basically does the job. If you have other ideas and proposals, feel free to post them. </p>\n"}], "owner": {"reputation": 676, "user_id": 4324409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Wc6bT.png?s=128&g=1", "display_name": "pklndnst", "link": "https://stackoverflow.com/users/4324409/pklndnst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 48766794, "answer_count": 1, "score": 1, "last_activity_date": 1518524731, "creation_date": 1517925602, "last_edit_date": 1518519588, "question_id": 48644823, "link": "https://stackoverflow.com/questions/48644823/checking-on-empty-gems-cache-fails-using-serverspec-for-docker-image-build-testi", "title": "Checking on empty gems cache fails using Serverspec for Docker image build testing", "body": "<p>I'm currently having an issue with testing Docker image builds by means of Serverspec. In a nutshell, what I want to do is ensuring that during the image build the Ruby gems build cache gets cleared explicitly, e.g. by issuing <code>rm -rf /usr/lib/ruby/gems/*/cache/*.gem</code> in the Dockerfile. </p>\n\n<p>The Dockerfile skeleton I'm working with looks like this:</p>\n\n<pre><code> # Dockerfile\n\n FROM alpine:3.7\n\n RUN apk add --no-cache \\ \n     dumb-init \\\n     ruby \\\n  &amp;&amp; apk add --no-cache --virtual .build-deps \\\n     build-base \\\n     ruby-dev\n\n RUN gem install --no-rdoc --no-ri json \\\n  &amp;&amp; gem install --no-rdoc --no-ri oj\n\n RUN apk del .build-deps \\\n  &amp;&amp; rm -rf /var/cache/apk/* \\ \n     /tmp/* /var/tmp/*\n</code></pre>\n\n<p>Before adding the gem cache removal command, I implemented the following Serverspec test to be able to start from a failing test:</p>\n\n<pre><code> # ./spec/Dockerfile_spec.rb\n\n describe \"Dockerfile\" do\n   before(:all) do\n     @image = Docker::Image.build_from_dir('.')\n     @image.tag(repo: 'demo', tag: 'latest')\n\n     set :os, family: :alpine\n     set :backend, :docker\n     set :docker_image, @image.id\n   end\n\n\n   it \"removes build dependencies during cleanup\" do\n     # Some more assertions \n     # ...\n     expect(Dir.glob('/usr/lib/ruby/gems/*/cache/*.gem').size).to eq 0  \n   end\n end\n</code></pre>\n\n<p>Assuming the Dockerfile from above, the tests run green:</p>\n\n<pre><code> $ bundle exec rspec spec/Dockerfile_spec.rb\n ....\n Finished in 3.95 seconds (files took 0.24091 seconds to load)\n 4 examples, 0 failures\n</code></pre>\n\n<p>However, this should not be the case since the gem cache has not yet been cleared and thus is not empty, i.e. I'd expect the corresponding assertion to fail during test execution. </p>\n\n<p>This can easily be verified by launching a container from the freshly built image and checking the gems cache directory:</p>\n\n<pre><code> $ docker run --rm -it demo:latest sh\n / # ls /usr/lib/ruby/gems/2.4.0/cache/ \n json-2.1.0.gem  oj-3.4.0.gem\n</code></pre>\n\n<p>Testing the other way around and expecting a non-empty directory, the execution fails with an error message:</p>\n\n<pre><code> # ./spec/Dockerfile.rb\n\n it \"removes build dependencies during cleanup\" do\n   # Some more assertions \n   # ...\n   expect(Dir.glob('/usr/lib/ruby/gems/*/cache/*.gem').size).to_not eq 0  \n end\n\n\n # Command line \n\n $ bundle exec rspec spec/Dockerfile_spec.rb\n .F..\n\n Failures:\n\n   1) Dockerfile removes build dependencies during cleanup\n      Failure/Error: expect(Dir.glob('/usr/lib/ruby/gems/*/cache/*.gem').size).to_not eq 0\n\n      expected: value != 0\n           got: 0\n\n      (compared using ==)\n</code></pre>\n\n<p>So obviously, the <code>Dir.glob()</code> command does not return the correct number of files in the gems cache directory. </p>\n\n<p>Funny enough, running the <code>Dir.glob()</code> command manually inside the container returns the expected result:</p>\n\n<pre><code> $ docker run --rm -it demo:latest sh\n / # apk add --no-cache ruby-irb\n ...\n / # irb\n irb(main):001:0&gt; Dir.glob('/usr/lib/ruby/gems/*/cache/*.gem').size\n =&gt; 2\n</code></pre>\n\n<p>First, this made me think that the test is not properly executed within the container but on the host instead, but further experiments could not confirm this.</p>\n\n<p>You have any ideas? Could this be a Serverspec/Rspec issue?</p>\n\n<p>Thx!</p>\n\n<h2>Edit</h2>\n\n<blockquote>\n  <p>First, this made me think that the test is not properly executed within the container but on the host instead, but further experiments could not confirm this.</p>\n</blockquote>\n\n<p>I finally found out that this assumption was wrong. Actually, the <code>Dir.glob()</code> calls are executed outside the container, for whatever reason. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1517925254, "post_id": 48644682, "comment_id": 84286044, "body": "Did you run <code>bundle install</code> locally?"}, {"owner": {"reputation": 89, "user_id": 9016532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beed93ac48cd8f94c28dd3a9630c5454?s=128&d=identicon&r=PG&f=1", "display_name": "Fishdigger", "link": "https://stackoverflow.com/users/9016532/fishdigger"}, "edited": false, "score": 0, "creation_date": 1517925411, "post_id": 48644682, "comment_id": 84286159, "body": "Also, please run <code>bundle update nokogiri</code> locally to ensure it makes it into the lock file."}, {"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517925635, "post_id": 48644682, "comment_id": 84286297, "body": "Hi, Yes and the result about the bundle install is: Bundle complete! 12 Gemfile dependencies, 60 gems now installed. Use <code>bundle info [gemname]</code> to see where a bundled gem is installed."}, {"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517925709, "post_id": 48644682, "comment_id": 84286354, "body": "bundle update nokogiri ---&gt; Bundler attempted to update nokogiri but its version stayed the same Bundle updated! but doens&#39;r works :/"}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 7823348, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/17dd023c0e21968db8d855c33f7d7ada?s=128&d=identicon&r=PG", "display_name": "Matias Carpintini", "link": "https://stackoverflow.com/users/7823348/matias-carpintini"}, "is_accepted": false, "score": 0, "last_activity_date": 1517925716, "creation_date": 1517925716, "answer_id": 48644850, "question_id": 48644682, "link": "https://stackoverflow.com/questions/48644682/push-rejected-failed-to-compile-ruby-app-on-heroku-bundle-error/48644850#48644850", "title": "Push rejected, failed to compile Ruby app on heroku, bundle error", "body": "<p>run <code>bundle update</code> on your local repo and upload those changes to heroku.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517935351, "post_id": 48645253, "comment_id": 84293231, "body": "Hi, thanks for the help :)  Unfortunately nothing worked: /"}, {"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517935477, "post_id": 48645253, "comment_id": 84293323, "body": "root@TI:/home/mario/&#193;rea de Trabalho/rubyandrails/moip# gem uninstall nokogiri Successfully uninstalled nokogiri-1.8.2  root@TI:/home/mario/&#193;rea de Trabalho/rubyandrails/moip# gem install nokogiri Fetching: nokogiri-1.8.2.gem (100%) Building native extensions.  This could take a while... Successfully installed nokogiri-1.8.2 Parsing documentation for nokogiri-1.8.2 Installing ri documentation for nokogiri-1.8.2 Done installing documentation for nokogiri after 26 seconds 1 gem installed"}, {"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517935566, "post_id": 48645253, "comment_id": 84293382, "body": "root@TI:/home/mario/&#193;rea de Trabalho/rubyandrails/moip# bundle install Bundle complete! 12 Gemfile dependencies, 60 gems now installed. Use <code>bundle info [gemname]</code> to see where a bundled gem is installed.   root@TI:/home/mario/&#193;rea de Trabalho/rubyandrails/moip# bundle lock --update=nokogiri Fetching gem metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a>.......... Fetching gem metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a>. Resolving dependencies... Writing lockfile to /home/mario/&#193;rea de Trabalho/rubyandrails/moip/Gemfile.lock"}, {"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517935605, "post_id": 48645253, "comment_id": 84293407, "body": "root@TI:/home/mario/&#193;rea de Trabalho/rubyandrails/moip# bundle install Bundle complete! 12 Gemfile dependencies, 60 gems now installed. Use <code>bundle info [gemname]</code> to see where a bundled gem is installed.  root@TI:/home/mario/&#193;rea de Trabalho/rubyandrails/moip# gem uninstall bundler Successfully uninstalled bundler-1.16.1"}, {"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517935617, "post_id": 48645253, "comment_id": 84293426, "body": "root@TI:/home/mario/&#193;rea de Trabalho/rubyandrails/moip# gem install bundler --version &#39;1.14.6&#39; Fetching: bundler-1.14.6.gem (100%) Successfully installed bundler-1.14.6 Parsing documentation for bundler-1.14.6 Installing ri documentation for bundler-1.14.6 Done installing documentation for bundler after 7 seconds 1 gem installed"}], "tags": [], "owner": {"reputation": 70, "user_id": 3634556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4me5G.jpg?s=128&g=1", "display_name": "Barpaio", "link": "https://stackoverflow.com/users/3634556/barpaio"}, "is_accepted": false, "score": 0, "last_activity_date": 1517927075, "creation_date": 1517927075, "answer_id": 48645253, "question_id": 48644682, "link": "https://stackoverflow.com/questions/48644682/push-rejected-failed-to-compile-ruby-app-on-heroku-bundle-error/48645253#48645253", "title": "Push rejected, failed to compile Ruby app on heroku, bundle error", "body": "<p>I would uninstall the nokogiri gem and then reinstall it and try bundle install again. </p>\n\n<p>If that doesn't work you can try running </p>\n\n<pre><code>bundle lock --update=nokogiri\nbundle install\n</code></pre>\n\n<p>If neither of those work I've seen that downgrading bundler to version 1.14.6 might do the trick.</p>\n\n<p>Hope this helps</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "edited": false, "score": 0, "creation_date": 1517935657, "post_id": 48645301, "comment_id": 84293452, "body": "Thanks a lot for the help, but that also did not work :("}], "tags": [], "owner": {"reputation": 180, "user_id": 8516343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vbWn4.png?s=128&g=1", "display_name": "fcbsd", "link": "https://stackoverflow.com/users/8516343/fcbsd"}, "is_accepted": false, "score": 0, "last_activity_date": 1517927211, "creation_date": 1517927211, "answer_id": 48645301, "question_id": 48644682, "link": "https://stackoverflow.com/questions/48644682/push-rejected-failed-to-compile-ruby-app-on-heroku-bundle-error/48645301#48645301", "title": "Push rejected, failed to compile Ruby app on heroku, bundle error", "body": "<p>If you look in <code>vendor/bundle/ruby/&lt;ruby version no&gt;/gems</code> there should be <code>nokogiri-1.6.7.2</code> but you need <code>nokogiri-1.8.2</code> </p>\n\n<p>I've resolved this issue in the past by:</p>\n\n<pre><code>cd vendor/bundle/ruby; rm -rf &lt;ruby version nos&gt;\n</code></pre>\n\n<p>and then run <code>bundle install</code> again. </p>\n"}], "owner": {"reputation": 19, "user_id": 7537427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1375781202493579/picture?type=large", "display_name": "M&#225;rio S&#233;rgio Dias", "link": "https://stackoverflow.com/users/7537427/m%c3%a1rio-s%c3%a9rgio-dias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1173, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1517927211, "creation_date": 1517925140, "last_edit_date": 1517925439, "question_id": 48644682, "link": "https://stackoverflow.com/questions/48644682/push-rejected-failed-to-compile-ruby-app-on-heroku-bundle-error", "title": "Push rejected, failed to compile Ruby app on heroku, bundle error", "body": "<p>I am not able to upload a ruby application in Heroku, I have done several searches on the error, but nothing worked, could anyone help me? follows error log:</p>\n\n<blockquote>\n  <p>-----> Ruby app detected <br>\n  -----> Compiling Ruby/Rails <br>\n  -----> Using Ruby version: ruby-2.3.4 <br>\n  -----> Installing dependencies using bundler 1.15.2 <br>\n         Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment <br>\n         Fetching gem metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>.......... <br>\n         Fetching version metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>.. <br>\n         Fetching dependency metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>. <br>\n         Fetching rake 10.5.0 <br>\n         Fetching i18n 0.7.0 <br>\n         Using json 1.8.3 <br>\n         Fetching minitest 5.8.4 <br>\n         Installing i18n 0.7.0 <br>\n         Installing minitest 5.8.4 <br>\n         Installing rake 10.5.0 <br>\n         Fetching thread_safe 0.3.5 <br>\n         Installing thread_safe 0.3.5 <br>\n         Fetching builder 3.2.2 <br>\n         Installing builder 3.2.2 <br>\n         Fetching erubis 2.7.0 <br>\n         Fetching nokogiri 1.6.7.2 <br>\n         Fetching rack 1.6.4 <br> \n         Installing erubis 2.7.0 <br>\n         Installing rack 1.6.4 <br>\n         Fetching mime-types 2.6.1 <br> \n         Installing mime-types 2.6.1 <br>\n         Fetching arel 6.0.3 <br>\n         Installing arel 6.0.3 <br>\n         Using bundler 1.15.2 <br>\n         Fetching coffee-script-source 1.9.1.1 <br>\n         Fetching execjs 2.6.0 <br>\n         Installing execjs 2.6.0 <br>\n         Installing coffee-script-source 1.9.1.1 <br>\n         Fetching thor 0.19.1 <br>\n         Fetching multi_json 1.11.2 <br>\n         Installing thor 0.19.1 <br>\n         Installing multi_json 1.11.2 <br>\n         Fetching pg 1.0.0 <br>\n         Installing pg 1.0.0 with native extensions <br>\n         Using rdoc 4.2.1 <br>\n         Fetching sass 3.4.21 <br>\n         Installing sass 3.4.21 <br>\n         Fetching tilt 2.0.8 <br>\n         Installing tilt 2.0.8 <br>\n         Fetching tzinfo 1.2.2 <br>\n         Installing tzinfo 1.2.2 <br>\n         Fetching rack-test 0.6.3 <br>\n         Installing rack-test 0.6.3 <br>\n         Fetching sprockets 3.3.0 <br>\n         Fetching mail 2.6.3 <br>\n         Installing sprockets 3.3.0 <br>\n         Fetching uglifier 2.7.2 <br>\n         Installing mail 2.6.3 <br>\n         Installing uglifier 2.7.2 <br>\n         Fetching coffee-script 2.4.1 <br>\n         Installing coffee-script 2.4.1 <br>\n         Fetching sdoc 0.4.1 <br>\n         Installing sdoc 0.4.1 <br>\n         Downloading nokogiri-1.6.7.2 revealed dependencies not in the API or the\n         lockfile (mini_portile2 (~> 2.0.0.rc2)).<br>\n         Either installing with <code>--full-index</code> or running <code>bundle update nokogiri</code> should\n         fix the problem. <br>\n         Bundler Output: Fetching gem metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>.......... <br>\n         Fetching version metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>.. <br>\n         Fetching dependency metadata from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>. <br>\n         Fetching rake 10.5.0 <br>\n         Fetching i18n 0.7.0 <br>\n         Using json 1.8.3 <br>\n         Fetching minitest 5.8.4 <br>\n         Installing i18n 0.7.0 <br>\n         Installing minitest 5.8.4 <br>\n         Installing rake 10.5.0 <br>\n         Fetching thread_safe 0.3.5 <br>\n         Installing thread_safe 0.3.5 <br>\n         Fetching builder 3.2.2 <br>\n         Installing builder 3.2.2 <br>\n         Fetching erubis 2.7.0 <br>\n         Fetching nokogiri 1.6.7.2 <br>\n         Fetching rack 1.6.4 <br>\n         Installing erubis 2.7.0 <br>\n         Installing rack 1.6.4 <br>\n         Fetching mime-types 2.6.1 <br>\n         Installing mime-types 2.6.1 <br>\n         Fetching arel 6.0.3 <br>\n         Installing arel 6.0.3 <br>\n         Using bundler 1.15.2 <br>\n         Fetching coffee-script-source 1.9.1.1 <br>\n         Fetching execjs 2.6.0 <br>\n         Installing execjs 2.6.0 <br>\n         Installing coffee-script-source 1.9.1.1 <br>\n         Fetching thor 0.19.1 <br>\n         Fetching multi_json 1.11.2 <br> \n         Installing thor 0.19.1 <br>\n         Installing multi_json 1.11.2 <br>\n         Fetching pg 1.0.0 <br>\n         Installing pg 1.0.0 with native extensions <br>\n         Using rdoc 4.2.1 <br>\n         Fetching sass 3.4.21 <br>\n         Installing sass 3.4.21 <br>\n         Fetching tilt 2.0.8 <br>\n         Installing tilt 2.0.8 <br>\n         Fetching tzinfo 1.2.2 <br>\n         Installing tzinfo 1.2.2 <br>\n         Fetching rack-test 0.6.3 <br>\n         Installing rack-test 0.6.3 <br>\n         Fetching sprockets 3.3.0 <br>\n         Fetching mail 2.6.3 <br>\n         Installing sprockets 3.3.0 <br>\n         Fetching uglifier 2.7.2 <br>\n         Installing mail 2.6.3 <br>\n         Installing uglifier 2.7.2 <br>\n         Fetching coffee-script 2.4.1 <br>\n         Installing coffee-script 2.4.1 <br>\n         Fetching sdoc 0.4.1 <br>\n         Installing sdoc 0.4.1 <br>\n         Downloading nokogiri-1.6.7.2 revealed dependencies not in the API or the\n         lockfile (mini_portile2 (~> 2.0.0.rc2)).<br>\n         Either installing with <code>--full-index</code> or running <code>bundle update nokogiri</code> should\n         fix the problem. <br>  ! <br>  !     Failed to install gems via Bundler.<br>  ! <br>  !     Push rejected, failed to compile Ruby\n  app.<br>  !     Push failed<br></p>\n</blockquote>\n\n<p>Follow my Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.6'\n# Use sqlite3 as the database for Active Record\n#gem 'sqlite3'\n# Use postgresql as the database for Active Record\ngem 'pg'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n</code></pre>\n\n<p>Gemfile.lock:</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actionmailer (4.2.6)\n      actionpack (= 4.2.6)\n      actionview (= 4.2.6)\n      activejob (= 4.2.6)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n    actionpack (4.2.6)\n      actionview (= 4.2.6)\n      activesupport (= 4.2.6)\n      rack (~&gt; 1.6)\n      rack-test (~&gt; 0.6.2)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (4.2.6)\n      activesupport (= 4.2.6)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    activejob (4.2.6)\n      activesupport (= 4.2.6)\n      globalid (&gt;= 0.3.0)\n    activemodel (4.2.6)\n      activesupport (= 4.2.6)\n      builder (~&gt; 3.1)\n    activerecord (4.2.6)\n      activemodel (= 4.2.6)\n      activesupport (= 4.2.6)\n      arel (~&gt; 6.0)\n    activesupport (4.2.6)\n      i18n (~&gt; 0.7)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n      tzinfo (~&gt; 1.1)\n    arel (6.0.4)\n    binding_of_caller (0.8.0)\n      debug_inspector (&gt;= 0.0.1)\n    builder (3.2.3)\n    byebug (10.0.0)\n    coffee-rails (4.1.1)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.1.x)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.12.2)\n    concurrent-ruby (1.0.5)\n    crass (1.0.3)\n    debug_inspector (0.0.3)\n    erubis (2.7.0)\n    execjs (2.7.0)\n    ffi (1.9.21)\n    globalid (0.4.1)\n      activesupport (&gt;= 4.2.0)\n    i18n (0.9.3)\n      concurrent-ruby (~&gt; 1.0)\n    jbuilder (2.7.0)\n      activesupport (&gt;= 4.2.0)\n      multi_json (&gt;= 1.2)\n    jquery-rails (4.3.1)\n      rails-dom-testing (&gt;= 1, &lt; 3)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    json (1.8.6)\n    loofah (2.1.1)\n      crass (~&gt; 1.0.2)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.7.0)\n      mini_mime (&gt;= 0.1.1)\n    mini_mime (1.0.0)\n    mini_portile2 (2.3.0)\n    minitest (5.11.3)\n    multi_json (1.13.1)\n    nokogiri (1.8.2)\n      mini_portile2 (~&gt; 2.3.0)\n    pg (1.0.0)\n    rack (1.6.8)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (4.2.6)\n      actionmailer (= 4.2.6)\n      actionpack (= 4.2.6)\n      actionview (= 4.2.6)\n      activejob (= 4.2.6)\n      activemodel (= 4.2.6)\n      activerecord (= 4.2.6)\n      activesupport (= 4.2.6)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 4.2.6)\n      sprockets-rails\n    rails-deprecated_sanitizer (1.0.3)\n      activesupport (&gt;= 4.2.0.alpha)\n    rails-dom-testing (1.0.9)\n      activesupport (&gt;= 4.2.0, &lt; 5.0)\n      nokogiri (~&gt; 1.6)\n      rails-deprecated_sanitizer (&gt;= 1.0.1)\n    rails-html-sanitizer (1.0.3)\n      loofah (~&gt; 2.0)\n    railties (4.2.6)\n      actionpack (= 4.2.6)\n      activesupport (= 4.2.6)\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (12.3.0)\n    rb-fsevent (0.10.2)\n    rb-inotify (0.9.10)\n      ffi (&gt;= 0.5.0, &lt; 2)\n    rdoc (4.3.0)\n    sass (3.5.5)\n      sass-listen (~&gt; 4.0.0)\n    sass-listen (4.0.0)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    sass-rails (5.0.7)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    sdoc (0.4.2)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      rdoc (~&gt; 4.0)\n    spring (2.0.2)\n      activesupport (&gt;= 4.2)\n    sprockets (3.7.1)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    thor (0.20.0)\n    thread_safe (0.3.6)\n    tilt (2.0.8)\n    turbolinks (5.1.0)\n      turbolinks-source (~&gt; 5.1)\n    turbolinks-source (5.1.0)\n    tzinfo (1.2.5)\n      thread_safe (~&gt; 0.1)\n    uglifier (4.1.5)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    web-console (2.3.0)\n      activemodel (&gt;= 4.0)\n      binding_of_caller (&gt;= 0.7.2)\n      railties (&gt;= 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  byebug\n  coffee-rails (~&gt; 4.1.0)\n  jbuilder (~&gt; 2.0)\n  jquery-rails\n  pg\n  rails (= 4.2.6)\n  sass-rails (~&gt; 5.0)\n  sdoc (~&gt; 0.4.0)\n  spring\n  turbolinks\n  uglifier (&gt;= 1.3.0)\n  web-console (~&gt; 2.0)\n\nBUNDLED WITH\n   1.16.1\n</code></pre>\n"}, {"tags": ["ruby", "curl", "proxy", "openstack", "fog"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517926199, "post_id": 48644193, "comment_id": 84286698, "body": "it looks like after authentication it is trying to visit &quot;/&quot; which aparently has moved to &quot;/dashboard&quot; thus the 302 (redirect) which is not what was expected. Other than that I am unsure if I can help.  can you post your actual ruby code?"}, {"owner": {"reputation": 687, "user_id": 3383665, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/i6Zob.jpg?s=128&g=1", "display_name": "ars", "link": "https://stackoverflow.com/users/3383665/ars"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517926663, "post_id": 48644193, "comment_id": 84287011, "body": "actually i&#39;m using latest version (1.42.0) of fog lib (<a href=\"https://github.com/fog/fog\" rel=\"nofollow noreferrer\">github.com/fog/fog</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2926909, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a3880bf7ef02ae823f81cf4ab4973150?s=128&d=identicon&r=PG&f=1", "display_name": "Dheeraj Chitara", "link": "https://stackoverflow.com/users/2926909/dheeraj-chitara"}, "is_accepted": false, "score": 0, "last_activity_date": 1518516789, "creation_date": 1518516789, "answer_id": 48764222, "question_id": 48644193, "link": "https://stackoverflow.com/questions/48644193/fog-openstack-authentification-error/48764222#48764222", "title": "&quot;fog openstack&quot; authentification error", "body": "<p>Export your openrc file which contains authentication information like this </p>\n\n<p>\u200bexport OS_USERNAME=admin</p>\n\n<p>\u200bexport OS_PASSWORD=ADMIN_PASS</p>\n\n<p>\u200bexport OS_TENANT_NAME=admin</p>\n\n<p>\u200bexport OS_AUTH_URL=<a href=\"http://controller:35357/v3.0\" rel=\"nofollow noreferrer\">http://controller:35357/v3.0</a></p>\n"}], "owner": {"reputation": 687, "user_id": 3383665, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/i6Zob.jpg?s=128&g=1", "display_name": "ars", "link": "https://stackoverflow.com/users/3383665/ars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518516789, "creation_date": 1517923606, "last_edit_date": 1592644375, "question_id": 48644193, "link": "https://stackoverflow.com/questions/48644193/fog-openstack-authentification-error", "title": "&quot;fog openstack&quot; authentification error", "body": "<p>Trying to connect locally deployed openstack (pike) with fog.</p>\n<p>Firstly, curl connection works well with the command:\n<a href=\"https://hastebin.com/fihojuqize.scala\" rel=\"nofollow noreferrer\">https://hastebin.com/fihojuqize.scala</a></p>\n<p>With this in mind, i've created fog credentials file: <a href=\"https://hastebin.com/hexanixucu.scala\" rel=\"nofollow noreferrer\">https://hastebin.com/hexanixucu.scala</a> and run</p>\n<blockquote>\n<p>fog openstack</p>\n<p>Compute[:openstack].servers</p>\n</blockquote>\n<p>This leads to an error like (<a href=\"https://hastebin.com/bucugizipi.php\" rel=\"nofollow noreferrer\">full text here</a>)</p>\n<pre><code>  :status        =&gt; 302\n  :status_line   =&gt; &quot;HTTP/1.1 302 Found\\r\\n&quot;\n\n    from /var/lib/gems/2.3.0/gems/excon-0.60.0/lib/excon/middlewares/expects.rb:7:in `response_call'\n    from /var/lib/gems/2.3.0/gems/excon-0.60.0/lib/excon/middlewares/response_parser.rb:9:in `response_call'\n    from /var/lib/gems/2.3.0/gems/excon-0.60.0/lib/excon/connection.rb:414:in `response'\n    from /var/lib/gems/2.3.0/gems/excon-0.60.0/lib/excon/connection.rb:263:in `request'\n    from /var/lib/gems/2.3.0/gems/fog-core-1.45.0/lib/fog/core/connection.rb:81:in `request'\n    from /var/lib/gems/2.3.0/gems/fog-openstack-0.1.23/lib/fog/openstack.rb:610:in `get_version'\n    from /var/lib/gems/2.3.0/gems/fog-openstack-0.1.23/lib/fog/openstack.rb:583:in `get_supported_microversion'\n    from /var/lib/gems/2.3.0/gems/fog-openstack-0.1.23/lib/fog/openstack/core.rb:122:in `set_microversion'\n    from /var/lib/gems/2.3.0/gems/fog-openstack-0.1.23/lib/fog/openstack/core.rb:212:in `authenticate'\n    from /var/lib/gems/2.3.0/gems/fog-openstack-0.1.23/lib/fog/compute/openstack.rb:397:in `initialize'\n    from /var/lib/gems/2.3.0/gems/fog-core-1.45.0/lib/fog/core/service.rb:115:in `new'\n    from /var/lib/gems/2.3.0/gems/fog-core-1.45.0/lib/fog/core/service.rb:115:in `new'\n    from /var/lib/gems/2.3.0/gems/fog-core-1.45.0/lib/fog/core/services_mixin.rb:16:in `new'\n    from /var/lib/gems/2.3.0/gems/fog-core-1.45.0/lib/fog/compute.rb:54:in `new'\n    from /var/lib/gems/2.3.0/gems/fog-core-1.45.0/lib/fog/core/services_mixin.rb:4:in `[]'\n    from (irb):1:in `&lt;top (required)&gt;'\n    from /var/lib/gems/2.3.0/gems/fog-1.42.0/bin/fog:76:in `block in &lt;top (required)&gt;'\n    from /var/lib/gems/2.3.0/gems/fog-1.42.0/bin/fog:76:in `catch'\n    from /var/lib/gems/2.3.0/gems/fog-1.42.0/bin/fog:76:in `&lt;top (required)&gt;'\n    from /usr/local/bin/fog:23:in `load'\n    from /usr/local/bin/fog:23:in `&lt;main&gt;'\n</code></pre>\n<p>First request to &quot;/identity/v3/auth/tokens&quot; was complete, but overall result is bad..</p>\n<p>Worth to be mentioned - i've cntlm proxy configured.</p>\n"}, {"tags": ["ruby", "aws-lambda"], "comments": [{"owner": {"reputation": 1400, "user_id": 739373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f2091b76212da4bac3fcb43ee520edd0?s=128&d=identicon&r=PG", "display_name": "Daniel B.", "link": "https://stackoverflow.com/users/739373/daniel-b"}, "edited": false, "score": 0, "creation_date": 1517923329, "post_id": 48644093, "comment_id": 84284689, "body": "There is already some discussion of Lambda errors and status codes, in the context of API Gateway Lambda integrations, in the documentation, on StackOverflow, and elsewhere --- but my use case is a <i>direct Lambda invocation from application code.</i>"}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 3, "creation_date": 1517981183, "post_id": 48644093, "comment_id": 84310819, "body": "Confirmation that the 200 is expected, here:   <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/API_Invoke.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/API_Invoke.html</a> ...4xx and 5xx are only used for request-related issues and service-related failures.  If the function starts and finishes (for request/response, regardless of any reported error), that&#39;s a 200, presumably designed that way because your <i>request to invoke</i> was processed successfully.  The fact that an error occurred does not mean the service itself failed or that the request was otherwise rejected."}], "answers": [{"tags": [], "owner": {"reputation": 1400, "user_id": 739373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f2091b76212da4bac3fcb43ee520edd0?s=128&d=identicon&r=PG", "display_name": "Daniel B.", "link": "https://stackoverflow.com/users/739373/daniel-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1517925432, "creation_date": 1517925432, "answer_id": 48644773, "question_id": 48644093, "link": "https://stackoverflow.com/questions/48644093/direct-aws-lambda-invocation-response-status-code-is-200-despite-unhandled-fun/48644773#48644773", "title": "(Direct) AWS Lambda invocation response status code is 200 despite unhandled function error", "body": "<p>The solution -- too obvious, but not enough to distract from the \"200\" <code>status_code</code> -- is to check if <code>function_error</code> is <code>nil</code>.</p>\n\n<p>The value is <code>nil</code> in the event of successful invocation:</p>\n\n\n\n<pre><code>[8] pry(main)&gt; invocation_response = lambda_client.invoke(function_name: 'jwt-tokens-dev-AccessTokenCreator', payload: ActiveSupport::JSON::encode(sub:3285397, sub_type:'user', role:'admin'))\n=&gt; #&lt;struct Aws::Lambda::Types::InvocationResponse\n status_code=200,\n function_error=nil,\n log_result=nil,\n payload=#&lt;StringIO:0x007f91c2a2eeb8&gt;,\n executed_version=\"$LATEST\"&gt;\n</code></pre>\n\n<p>Otherwise it has the value <code>'Unhandled'</code> or <code>'Handled'</code>:</p>\n\n<blockquote>\n  <h3>function_error \u21d2 String</h3>\n  \n  <p>Indicates whether an error occurred while executing the Lambda function. If an error occurred this field will\n  have one of two values; Handled or Unhandled. Handled errors are\n  errors that are reported by the function while the Unhandled errors\n  are those detected and reported by AWS Lambda. Unhandled errors\n  include out of memory errors and function timeouts. For information\n  about how to report an Handled error, see Programming Model.</p>\n</blockquote>\n\n<p><a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/Lambda/Types/InvocationResponse.html#function_error-instance_method\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdkforruby/api/Aws/Lambda/Types/InvocationResponse.html#function_error-instance_method</a></p>\n"}], "owner": {"reputation": 1400, "user_id": 739373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f2091b76212da4bac3fcb43ee520edd0?s=128&d=identicon&r=PG", "display_name": "Daniel B.", "link": "https://stackoverflow.com/users/739373/daniel-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2711, "favorite_count": 0, "accepted_answer_id": 48644773, "answer_count": 1, "score": 4, "last_activity_date": 1517925443, "creation_date": 1517923310, "last_edit_date": 1517925443, "question_id": 48644093, "link": "https://stackoverflow.com/questions/48644093/direct-aws-lambda-invocation-response-status-code-is-200-despite-unhandled-fun", "title": "(Direct) AWS Lambda invocation response status code is 200 despite unhandled function error", "body": "<p>I have an AWS Lambda which is designed for direct invocation from multiple applications within my team's service landscape. I'm writing a wrapper class which will perform this invocation, and associated validation and error detection / handling in the Lambda's response.</p>\n\n<p>By design, the Lambda terminates with an unhandled exception if runtime validation of the invocation parameters fails. But I didn't expect to find that <strong>in spite of an unhandled function error, the <code>status_code</code> of the invocation response is 200:</strong></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>[1] pry(main)&gt; lambda_client = Aws::Lambda::Client.new(region: 'us-east-1')\n=&gt; #&lt;Aws::Lambda::Client&gt;\n[2] pry(main)&gt; invocation_response = lambda_client.invoke(function_name: 'jwt-tokens-dev-AccessTokenCreator') \n=&gt; #&lt;struct Aws::Lambda::Types::InvocationResponse\n status_code=200,\n function_error=\"Unhandled\",\n log_result=nil,\n payload=#&lt;StringIO:0x007f91c1749028&gt;,\n executed_version=\"$LATEST\"&gt;\n[3] pry(main)&gt; invocation_response.payload.string\n=&gt; \"{\\\"errorMessage\\\": \\\"Required parameters are missing: role, sub, sub_type\\\", \\\"errorType\\\": \\\"ParamMissingError\\\", \\\"stackTrace\\\": [[\\\"/var/task/handler.py\\\", 15, \\\"access_token_creator\\\", \\\"return access_token_creator_handler(event, context)\\\"], [\\\"/var/task/access_token_creator.py\\\", 32, \\\"handler\\\", \\\"params = _validate_event_params(event)\\\"], [\\\"/var/task/access_token_creator.py\\\", 97, \\\"_validate_event_params\\\", \\\"raise ParamMissingError('Required parameters are missing: %s' % ', '.join(missing_params))\\\"]]}\"\n[4] pry(main)&gt; ActiveSupport::JSON.decode(invocation_response.payload.string)\n=&gt; {\"errorMessage\"=&gt;\"Required parameters are missing: role, sub, sub_type\",\n \"errorType\"=&gt;\"ParamMissingError\",\n \"stackTrace\"=&gt;\n  [[\"/var/task/handler.py\", 15, \"access_token_creator\", \"return access_token_creator_handler(event, context)\"],\n   [\"/var/task/access_token_creator.py\", 32, \"handler\", \"params = _validate_event_params(event)\"],\n   [\"/var/task/access_token_creator.py\",\n    97,\n    \"_validate_event_params\",\n    \"raise ParamMissingError('Required parameters are missing: %s' % ', '.join(missing_params))\"]]}\n</code></pre>\n\n<p>Is it expected that the status code of the response of a direct Lambda invocation would be 200, despite an unhandled function error? I want to implement proper error response detection in my wrapper class, and <strong>searching for the key \"errorType\" in the top-level of the JSON response doesn't really seem so robust.</strong></p>\n"}, {"tags": ["ruby", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5508754, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7bc2a2a737d559519abc1dfe0693e7d1?s=128&d=identicon&r=PG&f=1", "display_name": "sergey", "link": "https://stackoverflow.com/users/5508754/sergey"}, "edited": false, "score": 0, "creation_date": 1517925884, "post_id": 48644508, "comment_id": 84286483, "body": "Thanks for response. I would like to get reliable data at least to check or modify technical analysis given at this site. Moreover, this site data very close to binance data that is interesting for me."}], "tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": true, "score": 0, "last_activity_date": 1517924597, "creation_date": 1517924597, "answer_id": 48644508, "question_id": 48644058, "link": "https://stackoverflow.com/questions/48644058/parse-hidden-data-from-web-page-using-ruby/48644508#48644508", "title": "parse hidden data from web page using ruby", "body": "<p>You can use Capybara+ChromeHeadless to parse the page with JS: \n<a href=\"https://drivy.engineering/running-capybara-headless-chrome/\" rel=\"nofollow noreferrer\">https://drivy.engineering/running-capybara-headless-chrome/</a></p>\n\n<p>But If you only need the exchange rate of currency, I strongly believe there are open sources for that, so parsing page looks overcomplicated to me <a href=\"https://ethereum.stackexchange.com/questions/38309/what-are-the-popular-api-to-get-current-exchange-rates-for-ethereum-to-usd\">https://ethereum.stackexchange.com/questions/38309/what-are-the-popular-api-to-get-current-exchange-rates-for-ethereum-to-usd</a></p>\n"}], "owner": {"reputation": 17, "user_id": 5508754, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7bc2a2a737d559519abc1dfe0693e7d1?s=128&d=identicon&r=PG&f=1", "display_name": "sergey", "link": "https://stackoverflow.com/users/5508754/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 48644508, "answer_count": 1, "score": 0, "last_activity_date": 1517924597, "creation_date": 1517923228, "question_id": 48644058, "link": "https://stackoverflow.com/questions/48644058/parse-hidden-data-from-web-page-using-ruby", "title": "parse hidden data from web page using ruby", "body": "<p>Example: \"<a href=\"https://www.tradingview.com/symbols/ETHUSD/technicals/\" rel=\"nofollow noreferrer\">https://www.tradingview.com/symbols/ETHUSD/technicals/</a>\" shows price (under \"Market Open\"). This price visible in .inspect code for this element:\n680.34\nbut hidden in \"view source\". \nAll known for me parsing (like Nokogiri) find that element empty, analysing html from \"view source\". Certainly this price comes as result of server script after page loaded.\nAny ways to get this price using ruby (may be nokogiri, mechanize)?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1517920280, "post_id": 48642989, "comment_id": 84282762, "body": "How is the generating of the hash done? Can you add the code?"}, {"owner": {"reputation": 928, "user_id": 2724228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGNiO.jpg?s=128&g=1", "display_name": "Manoj Menon", "link": "https://stackoverflow.com/users/2724228/manoj-menon"}, "edited": false, "score": 0, "creation_date": 1517920607, "post_id": 48642989, "comment_id": 84282948, "body": "@severin are you using ActiveModel::Serializers ?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1517923347, "post_id": 48642989, "comment_id": 84284701, "body": "If giving root name and format to <code>.to_json</code>, its not sorting. Nor u can send it as string <code>to_s</code> also not sorts without root name..."}], "answers": [{"comments": [{"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1517926756, "post_id": 48644726, "comment_id": 84287073, "body": "So if I understand you correctly I should fix this on the receiving and not the sending end, right?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1517926958, "post_id": 48644726, "comment_id": 84287221, "body": "@Severin, Yes, if its Javascript front-end definitely do there."}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": true, "score": 0, "last_activity_date": 1517930852, "last_edit_date": 1517930852, "creation_date": 1517925301, "answer_id": 48644726, "question_id": 48642989, "link": "https://stackoverflow.com/questions/48642989/rendering-json-from-rails-controller-changes-order-of-hash-keys/48644726#48644726", "title": "Rendering JSON from Rails controller changes order of hash keys", "body": "<p>I think, It's not sorting by default. If using json formatter, it does for you by default.</p>\n\n<p>I have tested on httpie, curl and browser.\n<code>render json: obj, status: :ok</code></p>\n\n<p><strong>Httpie</strong></p>\n\n<pre><code>#Input =&gt; Output\n#Content-Type: application/json; charset=utf-8\n\nhttp URL =&gt; {\n    \"-16\": 97,\n    \"-35\": 10,\n    \"-4\": 205,\n    \"0\": 825,\n    \"12\": 116,\n    \"13\": 93,\n    \"19\": 112,\n    \"30\": 77\n}\n\nhttp --pretty=none URL =&gt;\n  {\"-35\":10,\"-16\":97,\"-4\":205,\"0\":825,\"12\":116,\"13\":93,\"19\":112,\"30\":77}\n</code></pre>\n\n<p><strong>Curl</strong></p>\n\n<pre><code>#Input =&gt; Output\n#Content-Type: application/json; charset=utf-8\ncurl http://lvh.me:3000/test =&gt;\n  {\"-35\":10,\"-16\":97,\"-4\":205,\"0\":825,\"12\":116,\"13\":93,\"19\":112,\"30\":77}\n</code></pre>\n\n<p><strong>RestClient Gem</strong></p>\n\n<pre><code>RestClient.get(URL).body =&gt;\n   \"{\\\"-35\\\":10,\\\"-16\\\":97,\\\"-4\\\":205,\\\"0\\\":825,\\\"12\\\":116,\\\"13\\\":93,\\\"19\\\":112,\\\"30\\\":77}\"\n\n#no matter what returns as a string\n</code></pre>\n\n<p>But if to change plain: <code>render :plain =&gt; obj.to_json, status: :ok</code></p>\n\n<p>RestClient,Curl and HTTPie returns the same values, except Browsers :)</p>\n\n<p>Just content-type is different <code>Content-Type: text/plain; charset=utf-8</code></p>\n\n<p><strong>Conclusion:</strong> </p>\n\n<p>As i understand, rails by default not sorts...</p>\n\n<p><a href=\"https://github.com/jakubroztocil/httpie/issues/427\" rel=\"nofollow noreferrer\">Github about HTTP sort</a></p>\n"}], "owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 48644726, "answer_count": 1, "score": 1, "last_activity_date": 1517930852, "creation_date": 1517919721, "last_edit_date": 1517922511, "question_id": 48642989, "link": "https://stackoverflow.com/questions/48642989/rendering-json-from-rails-controller-changes-order-of-hash-keys", "title": "Rendering JSON from Rails controller changes order of hash keys", "body": "<p>I have a hash in a Rails controller that looks like this:</p>\n\n<pre><code>{\n  \"-35\": 10,\n  \"-16\": 97,\n  \"-4\": 205,\n  \"0\": 825,\n  \"12\": 116,\n  \"13\": 93,\n  \"19\": 112,\n  \"30\": 77\n}\n</code></pre>\n\n<p>Its keys are ordered from the lowest to the highest as number. When I call a route that yields this as JSON, I get the following output:</p>\n\n<pre><code>{\n  \"0\": 825,\n  \"12\": 116,\n  \"13\": 93,\n  \"19\": 112,\n  \"30\": 77,\n  \"-35\": 10,\n  \"-16\": 97,\n  \"-4\": 205\n}\n</code></pre>\n\n<p>Rails changes the order during the rendering process.</p>\n\n<p>How can I prevent this from happening?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 2, "creation_date": 1517921630, "post_id": 48642870, "comment_id": 84283597, "body": "This is really unclear at the moment - please add some more info to help people answer this. There&#39;s a good guide to formatting questions <a href=\"https://stackoverflow.com/help/how-to-ask\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517937820, "post_id": 48644185, "comment_id": 84294739, "body": "In what version does <code>compare_by_identity</code> allow the storage of multiple string keys that are equal?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517938193, "post_id": 48644185, "comment_id": 84294973, "body": "I wouldn&#39;t say they&#39;re equal, more it was an option to format a hash with multiple strings of the same (apparent) value, if that was in someway useful to the questioner (it&#39;s pretty vague). You think it&#39;s unadvisable / misleading here @engineersmnky? I know you know your stuff so will happily edit out if you&#39;d advise it."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1517938765, "post_id": 48644185, "comment_id": 84295273, "body": "No I am saying you would need to &quot;dup&quot; the second string for this to work. <a href=\"https://repl.it/@engineersmnky/PepperyTalkativeSparrow\" rel=\"nofollow noreferrer\">Example</a>. Additionally I certainly would never advise it but it is fun to demonstrate so I have no objection to that"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517938924, "post_id": 48644185, "comment_id": 84295355, "body": "Ah - I&#39;m with ya. Updated accordingly. Thanks."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1518348486, "post_id": 48644185, "comment_id": 84460973, "body": "@prashant did this help at all?"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1517938877, "last_edit_date": 1517938877, "creation_date": 1517923582, "answer_id": 48644185, "question_id": 48642870, "link": "https://stackoverflow.com/questions/48642870/irb4-warning-key-abc-is-duplicated-and-overwritten-on-line-4/48644185#48644185", "title": "(irb):4: warning: key &quot;abc&quot; is duplicated and overwritten on line 4", "body": "<p>The problem here is that assigning a key with the same value as a previous one overwrites it.</p>\n\n<p>As far as I'm aware, there's no code-based solution to solve this; you just need to re-write it with arrays as the keys' values where they're duplicated.</p>\n\n<pre><code>{\"abc\" =&gt; [\"wqeq\", \"weqqw\"],\n \"dfg\" =&gt; [\"sadsada\", \"asdsad\"],\n \"qwe\" =&gt; [\"asdad\", \"assadsad\"],\n \"yui\" =&gt; [\"asdasd\", \"asd\"] }\n</code></pre>\n\n<p>I guess that's the output you're looking for. If not, please add a little more info to the questions and I / others will be able to help out.</p>\n\n<p>If you want to bring a gun to a knife fight, you can use <code>compare_by_identity</code>:</p>\n\n<pre><code>hash = {}\n\nhash.compare_by_identity\nhash[\"abc\"] = \"wqeq\"\nhash[\"abc\".dup] = \"weqqw\"\n\n# ... etc ...\n\nputs hash # =&gt; { \"abc\" =&gt; \"wqeq\", \"abc\" =&gt; \"weqqw\" }\n</code></pre>\n\n<p>... and then process that. Feels kinda dirty to me though.</p>\n"}], "owner": {"reputation": 9, "user_id": 9218537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76f1de2a9adcbb51d8c21c4e171792c3?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Sharma", "link": "https://stackoverflow.com/users/9218537/prashant-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1369, "favorite_count": 0, "closed_date": 1517937520, "answer_count": 1, "score": -3, "last_activity_date": 1518000867, "creation_date": 1517919353, "last_edit_date": 1518000867, "question_id": 48642870, "link": "https://stackoverflow.com/questions/48642870/irb4-warning-key-abc-is-duplicated-and-overwritten-on-line-4", "closed_reason": "Needs details or clarity", "title": "(irb):4: warning: key &quot;abc&quot; is duplicated and overwritten on line 4", "body": "<p>Rearrange the key values in the hash below to look like:</p>\n\n<pre><code>{\"abc\"=&gt;\"wqeq\",\"dfg\"=&gt;\"sadsada\",\"qwe\"=&gt;\"asdad\",\"yui\"=&gt;\"asdasd\",\"abc\"=&gt;\"weqqw\",\"qwe\"=&gt;\"assadsad\",\"yui\"=&gt;\"asd\",\"dfg\"=&gt;\"asdsad\"}\n\n{\"abc\"=&gt;[\"wqeq\",\"weqqw\"] ...}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1517922538, "post_id": 48643796, "comment_id": 84284165, "body": "a single insert statement with 1 million records will likly trigger the max packet error within MySQL."}], "tags": [], "owner": {"reputation": 36, "user_id": 6183914, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CEbTNPW_PPM/AAAAAAAAAAI/AAAAAAAAAFc/d2bSvvQwkPI/photo.jpg?sz=128", "display_name": "Amr Essam", "link": "https://stackoverflow.com/users/6183914/amr-essam"}, "is_accepted": false, "score": 0, "last_activity_date": 1517922421, "creation_date": 1517922421, "answer_id": 48643796, "question_id": 48642854, "link": "https://stackoverflow.com/questions/48642854/running-out-of-memory-when-running-rake-import-task-in-ruby/48643796#48643796", "title": "Running out of memory when running rake import task in ruby", "body": "<p>there is a gem that helps us do this called <a href=\"https://github.com/zdennis/activerecord-import\" rel=\"nofollow noreferrer\">activerecord-import</a>.</p>\n\n<pre><code>bulk_orders=[]\n\norders.each do |order|      \n   order = Order.new(\n          # id: order['order_id'],\n          import_id: order['order_id'],\n          # user_id: order['customer_id'],\n          user_id: user_id,\n          receiver_name: order['payment_firstname'],\n          receiver_address: order['payment_address_1'],\n          created_at: order['date_added'],\n          updated_at: order['date_modified'],\n          paid_by: payment_method,\n          order_num: order['order_id']\n        )\nend\n\nOrder.import bulk_orders, validate: false\n</code></pre>\n\n<p>with a single <strong>INSERT</strong> statement.</p>\n"}, {"tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": false, "score": 3, "last_activity_date": 1517922841, "creation_date": 1517922841, "answer_id": 48643928, "question_id": 48642854, "link": "https://stackoverflow.com/questions/48642854/running-out-of-memory-when-running-rake-import-task-in-ruby/48643928#48643928", "title": "Running out of memory when running rake import task in ruby", "body": "<p>I assume this line <code>orders = legacy_database.query(\"SELECT * FROM oc_order\")</code> loads entire table to the memory, which is very ineffective. </p>\n\n<p>You need to iterate over table in batches. In ActiveRecord, there is <a href=\"https://apidock.com/rails/ActiveRecord/Batches/ClassMethods/find_each\" rel=\"nofollow noreferrer\" title=\"find_each\">find_each</a> method for that. You may want to implement your own batch querying using <code>limit</code> and <code>offset</code>, since you don't use ActiveRecord.</p>\n"}, {"comments": [{"owner": {"reputation": 3437, "user_id": 2656747, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/M5UJS.jpg?s=128&g=1", "display_name": "NooBskie", "link": "https://stackoverflow.com/users/2656747/noobskie"}, "edited": false, "score": 1, "creation_date": 1517968929, "post_id": 48644619, "comment_id": 84307793, "body": "This combined with <code>(cache_rows: false)</code> barely using any memory now, sweet"}], "tags": [], "owner": {"reputation": 1429, "user_id": 777617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96812835dc39a2acdfc78a950da16f51?s=128&d=identicon&r=PG", "display_name": "Cyclops", "link": "https://stackoverflow.com/users/777617/cyclops"}, "is_accepted": true, "score": 2, "last_activity_date": 1517924906, "creation_date": 1517924906, "answer_id": 48644619, "question_id": 48642854, "link": "https://stackoverflow.com/questions/48642854/running-out-of-memory-when-running-rake-import-task-in-ruby/48644619#48644619", "title": "Running out of memory when running rake import task in ruby", "body": "<p>In order to handle memory efficiently, you can run mysql query in batches as suggested by <strong>nattfodd</strong>.</p>\n\n<p>There are two ways to achieve it, as per <a href=\"https://dev.mysql.com/doc/refman/5.7/en/select.html\" rel=\"nofollow noreferrer\">mysql documentation</a>:</p>\n\n<p><code>\nSELECT * FROM oc_order LIMIT 5,10;\n</code>\nor\n<code>\nSELECT * FROM oc_order LIMIT 10 OFFSET 5;\n</code></p>\n\n<p>Both of the queries will return rows 6-15.</p>\n\n<p>You can decide the offset of your choice and run the queries in loop until your orders object is empty.</p>\n\n<p>Let us assume you handle 1000 orders at a time, then you'll have something like this:</p>\n\n<pre><code>batch_size = 1000\noffset = 0\nloop do\n  orders = legacy_database.query(\"SELECT * FROM oc_order LIMIT #{batch_size} OFFSET #{offset}\")\n\n  break unless orders.present?\n\n  offset += batch_size\n\n  orders.each do |order|\n\n    ... # your logic of creating new model objects\n  end\nend\n</code></pre>\n\n<p>It is also advised to run your code in production with proper error handling:</p>\n\n<pre><code>begin\n  ... # main logic\nrescue =&gt; e\n  ... # handle error\nensure\n  ... # ensure \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 1560621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a185177c180c3f7226d29f436997d7?s=128&d=identicon&r=PG", "display_name": "Rustik", "link": "https://stackoverflow.com/users/1560621/rustik"}, "is_accepted": false, "score": 1, "last_activity_date": 1517948076, "creation_date": 1517948076, "answer_id": 48651228, "question_id": 48642854, "link": "https://stackoverflow.com/questions/48642854/running-out-of-memory-when-running-rake-import-task-in-ruby/48651228#48651228", "title": "Running out of memory when running rake import task in ruby", "body": "<p>Disabling <a href=\"https://github.com/brianmario/mysql2#row-caching\" rel=\"nofollow noreferrer\">row caching</a> while iterating over the orders collection should reduce the memory consumption:</p>\n\n<pre><code>orders.each(cache_rows: false) do |order|\n</code></pre>\n"}], "owner": {"reputation": 3437, "user_id": 2656747, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/M5UJS.jpg?s=128&g=1", "display_name": "NooBskie", "link": "https://stackoverflow.com/users/2656747/noobskie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 48644619, "answer_count": 4, "score": 0, "last_activity_date": 1517948076, "creation_date": 1517919261, "question_id": 48642854, "link": "https://stackoverflow.com/questions/48642854/running-out-of-memory-when-running-rake-import-task-in-ruby", "title": "Running out of memory when running rake import task in ruby", "body": "<p>I am running a task to import around 1 million orders. I am looping through the data to update it to the values on the new database and it is working fine on my local computer with <code>8 gig</code> of ram.</p>\n\n<p>However when I upload it to my AWS instance <code>t2.medium</code> It will run for the first 500 thousand rows but towards the end, I will start maxing out my memory when it starts actually creating non-existent orders. I am porting a <code>mysql</code> database to <code>postgres</code></p>\n\n<p>am I missing something obvious here?</p>\n\n<pre><code>require 'mysql2' # or require 'pg'\n\nrequire 'active_record'\n\ndef legacy_database\n  @client ||= Mysql2::Client.new(Rails.configuration.database_configuration['legacy_production'])\nend\n\ndesc \"import legacy orders\"\ntask orders: :environment do\n  orders = legacy_database.query(\"SELECT * FROM oc_order\")\n\n  # init progressbar\n  progressbar = ProgressBar.create(:total =&gt; orders.count, :format =&gt; \"%E, \\e[0;34m%t: |%B|\\e[0m\")\n\n  orders.each do |order|\n    if [1, 2, 13, 14].include? order['order_status_id']\n      payment_method = \"wx\"\n      if order['paid_by'] == \"Alipay\"\n        payment_method = \"ap\"\n      elsif order['paid_by'] == \"UnionPay\"\n        payment_method = \"up\"\n      end\n\n      user_id = User.where(import_id: order['customer_id']).first\n      if user_id\n        user_id = user_id.id\n      end\n\n        order = Order.create(\n          # id: order['order_id'],\n          import_id: order['order_id'],\n          # user_id: order['customer_id'],\n          user_id: user_id,\n          receiver_name: order['payment_firstname'],\n          receiver_address: order['payment_address_1'],\n          created_at: order['date_added'],\n          updated_at: order['date_modified'],\n          paid_by: payment_method,\n          order_num: order['order_id']\n        )\n\n      #increment progress bar on each save\n      progressbar.increment\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "is_accepted": false, "score": 1, "last_activity_date": 1517914471, "creation_date": 1517914471, "answer_id": 48641303, "question_id": 48641164, "link": "https://stackoverflow.com/questions/48641164/construct-hash-dynamically-in-ruby/48641303#48641303", "title": "Construct hash dynamically in Ruby", "body": "<p>You can use <a href=\"https://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Hash#select</code></a>:</p>\n\n<pre><code>social_keys = ['positive', 'negative', 'declined']\nhash[result['date']] = result.select {|k, _| social_keys.include? k }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517938238, "post_id": 48641408, "comment_id": 84294999, "body": "or <code>hash[result[&#39;date&#39;]] = keys.zip(result.values_at(*keys)).to_h</code>"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1517914763, "creation_date": 1517914763, "answer_id": 48641408, "question_id": 48641164, "link": "https://stackoverflow.com/questions/48641164/construct-hash-dynamically-in-ruby/48641408#48641408", "title": "Construct hash dynamically in Ruby", "body": "<p>Maybe creating the hash for <code>hash[result['date']]</code> depending on the domain value?:</p>\n\n<pre><code>result.each do |result|\n  keys = case domain\n         when 'social' then %w[positive negative declined]\n         when 'motivation' then %w[high medium low]\n         end\n  hash[result['date']] = keys.each_with_object(Hash.new(0)) { |e, h| h[e] = result[e] }\nend\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>result.each do |result|\n  keys = domain == 'social' ? %w[positive negative declined] : %w[high medium low]\n  hash[result['date']] = keys.each_with_object(Hash.new(0)) { |e, h| h[e] = result[e] }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1517915229, "creation_date": 1517915229, "answer_id": 48641562, "question_id": 48641164, "link": "https://stackoverflow.com/questions/48641164/construct-hash-dynamically-in-ruby/48641562#48641562", "title": "Construct hash dynamically in Ruby", "body": "<pre><code>result.each do |result|\n  hash[result['date']] = result.slice(\n    *case domain\n    when \"social\" then %w[positive negative declined]\n    when \"motivation\" then %w[high medium low]\n    end\n  )\nend\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 48641408, "answer_count": 3, "score": 0, "last_activity_date": 1517915229, "creation_date": 1517914120, "question_id": 48641164, "link": "https://stackoverflow.com/questions/48641164/construct-hash-dynamically-in-ruby", "title": "Construct hash dynamically in Ruby", "body": "<p>I have the following ruby code which creates a hash with specified format:</p>\n\n<pre><code>  result.each do |result|\n    if domain == 'social'\n      hash[result['date']] = {\n        'positive' =&gt; result['positive'],\n        'negative' =&gt; result['negative'],\n        'declined' =&gt; result['declined']\n      }\n    end\n\n    if domain == 'motivation'\n      hash[result['date']] = {\n        'high'   =&gt; result['high'],\n        'medium' =&gt; result['medium'],\n        'low'    =&gt; result['low']\n      }\n    end\n  end\n</code></pre>\n\n<p>Is there any way to remove this duplications and do this in more clean way?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 5, "user_id": 9321377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4d7b47d960e4f5f3bda553fe4b81f9?s=128&d=identicon&r=PG&f=1", "display_name": "A Cox", "link": "https://stackoverflow.com/users/9321377/a-cox"}, "edited": false, "score": 0, "creation_date": 1517914523, "post_id": 48641001, "comment_id": 84279046, "body": "Sorry you&#39;re right I need to edit my comment to use {} to show i want hashes not arrays - thank you for pointing that out. Sorry i&#39;m new to all this."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9321377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4d7b47d960e4f5f3bda553fe4b81f9?s=128&d=identicon&r=PG&f=1", "display_name": "A Cox", "link": "https://stackoverflow.com/users/9321377/a-cox"}, "edited": false, "score": 0, "creation_date": 1517918125, "post_id": 48642377, "comment_id": 84281406, "body": "Thank you i&#39;ll take a look at it - unfortunately this is just the first step, as I know later on i&#39;ll have more NNID&#39;s under the CCIDs....and will have to form trios of those...but this could be a good place to start!"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1517924765, "post_id": 48642377, "comment_id": 84285673, "body": "In case it&#39;s needed here, prior to 2.3 you could chain <code>.try(:[], :key)</code> as a substitute for <code>:dig</code>. Not pretty, but works to the same goal."}, {"owner": {"reputation": 111, "user_id": 7036466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104cc071164202efaba5d95d91bae07b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Martensen", "link": "https://stackoverflow.com/users/7036466/paul-martensen"}, "edited": false, "score": 0, "creation_date": 1517925995, "post_id": 48642377, "comment_id": 84286558, "body": "<code>try</code> only works in <a href=\"https://apidock.com/rails/Object/try\" rel=\"nofollow noreferrer\">rails</a> though mind you."}], "tags": [], "owner": {"reputation": 111, "user_id": 7036466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104cc071164202efaba5d95d91bae07b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Martensen", "link": "https://stackoverflow.com/users/7036466/paul-martensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1517917693, "creation_date": 1517917693, "answer_id": 48642377, "question_id": 48641001, "link": "https://stackoverflow.com/questions/48641001/ruby-extract-array-from-nested-array-of-hashes/48642377#48642377", "title": "Ruby - Extract array from nested array of hashes", "body": "<p>If you know that you'll always have this structure and you use ruby >= 2.3.0,\nthen you can use the <a href=\"https://ruby-doc.org/core-2.3.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">dig</a> method to shorten things:</p>\n\n<pre><code>collection = response['result'].first\ntrios = collection['result'].map do |ccid|\n  {\n    'LEID' =&gt; collection['LEID'],\n    'CCID' =&gt; ccid['CCID'],\n    'NNID' =&gt; ccid.dig('CCID', 'NNID')\n  }\nend\n</code></pre>\n\n<p>Its only a little shorter but hopefully easier to read overall.   </p>\n"}], "owner": {"reputation": 5, "user_id": 9321377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4d7b47d960e4f5f3bda553fe4b81f9?s=128&d=identicon&r=PG&f=1", "display_name": "A Cox", "link": "https://stackoverflow.com/users/9321377/a-cox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517917693, "creation_date": 1517913607, "last_edit_date": 1517914544, "question_id": 48641001, "link": "https://stackoverflow.com/questions/48641001/ruby-extract-array-from-nested-array-of-hashes", "title": "Ruby - Extract array from nested array of hashes", "body": "<p>I'm trying to obtain a hash from the following:</p>\n\n<pre><code> response: \n {\"result\": [\n {\n  \"LEID\": \"123\",\n  \"result\": [\n    {\n      \"CCID\": \"456\",\n      \"result\": [\n        {\n          \"Amount\": 10000,\n          \"NNID\": \"789\"\n        }\n      ]\n    },\n    {\n      \"CCID\": \"ABC\",\n      \"result\": [\n        {\n          \"Amount\": 5000,\n          \"NNID\": \"DEF\"\n        }\n      ]\n    }\n  ]\n}\n]\n}\n</code></pre>\n\n<p>What i'm trying to do is get the following out:</p>\n\n<p>{\"LEID\":123,\"CCID\":456,\"NNID\":789}</p>\n\n<p>{\"LEID\":123,\"CCID\":ABC,\"NNID\":DEF}</p>\n\n<p>So get a trio of LEID, CCID and NNID</p>\n\n<p>So far what I have is:</p>\n\n<pre><code>  LEID_collection = response['result']\n  LEID = LEID_collection.map {|h| h['LEID']}\n  LEID = LEID.reduce\n  CCID_collection = LEID_collection.reduce\n  CCIDs = CCID_collection['result'].map {|h|h['CCID']}\n  CCID1 = CCIDs[0]\n  CCID2 = CCIDs[1]\n  CCIDs = CCID_collection['result']\n  test = CCIDs.first.keys.zip(CCIDs.map(&amp;:values).transpose).to_h\n  test2 = test['result']\n  test3 = test2.flatten\n  test4 = test3.map {|h| h['NNID']}\n  NNID1 = test4[0]\n  NNID2 = test4[1]\n\n  hash1 = Hash[\"LEID\", LEID, \"CCID\", CCID1, \"NNID\", NNID1]\n  puts \"hash 1 :\" +  hash1.to_s\n  hash2 = Hash[\"LEID\", LEID, \"CCID\", CCID2, \"NNID\", NNID2]\n  puts \"hash 2 :\" +  hash2.to_s\n</code></pre>\n\n<p>This gets what I want but is really not dynamic... are there any better ways?</p>\n\n<p>Sorry for how convoluted this is, i'm just not sure how to explain it any other way. Happy to answer any questions. </p>\n"}, {"tags": ["ruby", "automated-tests", "cucumber", "calabash", "calabash-ios"], "answers": [{"comments": [{"owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "edited": false, "score": 0, "creation_date": 1517994531, "post_id": 48644796, "comment_id": 84316936, "body": "Correct!  When you start a calabash-ios console, it will attempt to attach to a running calabash server.  <code>console_attach</code> should not be used in your tests.  I think this does not really answer the user&#39;s question though.  I think the user needs to use cucumber tags, Before, After blocks, or Calabash backdoors."}, {"owner": {"reputation": 61, "user_id": 9261978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea907da62e8aa956b4569413ff8dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "IhateMacsSad", "link": "https://stackoverflow.com/users/9261978/ihatemacssad"}, "edited": false, "score": 0, "creation_date": 1517996688, "post_id": 48644796, "comment_id": 84318395, "body": "Yes. This doesn&#39;t quite answer my question. Id like to start running my tests from a specific view without having to go through all the tests just to test one bit."}, {"owner": {"reputation": 778, "user_id": 2581843, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000141231384/picture?type=large", "display_name": "Sander Saelmans", "link": "https://stackoverflow.com/users/2581843/sander-saelmans"}, "reply_to_user": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "edited": false, "score": 0, "creation_date": 1518000876, "post_id": 48644796, "comment_id": 84321296, "body": "In that case @jmoody is correct. You would need a backdoor in your application which navigates you to the correct ViewController. Depending on the complexity and dependencies of your application, writing a router like this can be quite difficult."}, {"owner": {"reputation": 61, "user_id": 9261978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea907da62e8aa956b4569413ff8dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "IhateMacsSad", "link": "https://stackoverflow.com/users/9261978/ihatemacssad"}, "edited": false, "score": 0, "creation_date": 1518005216, "post_id": 48644796, "comment_id": 84324034, "body": "Is there no simple way to not just reset simulator when running cucumber?"}, {"owner": {"reputation": 778, "user_id": 2581843, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000141231384/picture?type=large", "display_name": "Sander Saelmans", "link": "https://stackoverflow.com/users/2581843/sander-saelmans"}, "edited": false, "score": 0, "creation_date": 1518006366, "post_id": 48644796, "comment_id": 84324758, "body": "You could try setting the environment variable <code>RESET_BETWEEN_SCENARIOS</code> to <code>&quot;0&quot;</code>. If quitting the app is also causing issues, you can set <code>QUIT_APP_AFTER_SCENARIO</code> to <code>&quot;0&quot;</code>"}], "tags": [], "owner": {"reputation": 778, "user_id": 2581843, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000141231384/picture?type=large", "display_name": "Sander Saelmans", "link": "https://stackoverflow.com/users/2581843/sander-saelmans"}, "is_accepted": false, "score": 1, "last_activity_date": 1517925532, "last_edit_date": 1592644375, "creation_date": 1517925532, "answer_id": 48644796, "question_id": 48640425, "link": "https://stackoverflow.com/questions/48640425/stop-resetting-simulator-for-tests/48644796#48644796", "title": "Stop resetting simulator for tests", "body": "<p>From the <a href=\"http://calabashapi.xamarin.com/ios/Calabash/Cucumber/Launcher.html\" rel=\"nofollow noreferrer\">Calabash::Cucumber::Launcher</a> documentation</p>\n<blockquote>\n<p><strong>Attaching to the current launcher in a console</strong></p>\n<p>If Calabash already running and you want to attach to the current\nlauncher, use console_attach. This is useful when a cucumber Scenario\nhas failed and you want to query the current state of the app.</p>\n</blockquote>\n<p>In theory this means you could use <a href=\"http://calabashapi.xamarin.com/ios/Calabash/Cucumber/Core.html#console_attach-instance_method\" rel=\"nofollow noreferrer\">console_attach</a> to connect to a running calabash instance.</p>\n"}, {"tags": [], "owner": {"reputation": 497, "user_id": 6277276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ04J.png?s=128&g=1", "display_name": "kubano", "link": "https://stackoverflow.com/users/6277276/kubano"}, "is_accepted": false, "score": 0, "last_activity_date": 1518156607, "creation_date": 1518156607, "answer_id": 48699737, "question_id": 48640425, "link": "https://stackoverflow.com/questions/48640425/stop-resetting-simulator-for-tests/48699737#48699737", "title": "Stop resetting simulator for tests", "body": "<p>That's my configuration in the <code>support</code> folder:</p>\n\n<p><strong>01_launch.rb</strong></p>\n\n<pre><code>require 'calabash-cucumber/launcher'\n\n# You can find examples of more complicated launch hooks in these\n# two repositories:\n#\n# https://github.com/calabash/ios-smoke-test-app/blob/master/CalSmokeApp/features/support/01_launch.rb\n# https://github.com/calabash/ios-webview-test-app/blob/master/CalWebViewApp/features/support/01_launch.rb\n\nmodule Calabash::Launcher\n  @@launcher = nil\n\n  def self.launcher\n    @@launcher ||= Calabash::Cucumber::Launcher.new\n  end\n\n  def self.launcher=(launcher)\n    @@launcher = launcher\n  end\nend\n\n\n$testServerRunning = false\n\n\nBefore do |scenario|\n  scenario_tags = scenario.source_tag_names\n  if !$testServerRunning || scenario_tags.include?('@restart')\n    if $testServerRunning\n      shutdown_test_server\n    end\n\n    start_test_server_in_background\n\n    $testServerRunning = true\n  end\nend\n\nAfter do |scenario|\n  Cucumber.wants_to_quit = false\n  if scenario.failed?\n    screenshot_embed\n  end\nend\n</code></pre>\n\n<p><strong>env.rb</strong></p>\n\n<pre><code>require \"calabash-cucumber\"\n\n# Cucumber -d must pass, but support/env.rb is not eval'd on dry runs.\n# We must detect that the user wants to use pre-defined steps.\ndir = File.expand_path(File.dirname(__FILE__))\nenv = File.join(dir, \"env.rb\")\n\ncontents = File.read(env).force_encoding(\"UTF-8\")\n\ncontents.split($-0).each do |line|\n\n  # Skip comments.\n  next if line.chars[0] == \"#\"\n\n  if line[/calabash-cucumber\\/cucumber/, 0]\n    require \"calabash-cucumber/calabash_steps\"\n    break\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9261978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea907da62e8aa956b4569413ff8dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "IhateMacsSad", "link": "https://stackoverflow.com/users/9261978/ihatemacssad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1518156607, "creation_date": 1517911879, "last_edit_date": 1517917399, "question_id": 48640425, "link": "https://stackoverflow.com/questions/48640425/stop-resetting-simulator-for-tests", "title": "Stop resetting simulator for tests", "body": "<p>I am running Calabash-IOS on my simulator. If I type <code>cucumber</code> in the terminal while the application is already running, it will shutdown the whole simulator, and start a new instance of it, and then runs all the tests. It runs all my login scenarios and outlines just to test one thing after the user has logged in.</p>\n\n<p>Is there a way to disable this so that tests run from where I left a view open?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1517911970, "post_id": 48640248, "comment_id": 84277373, "body": "maybe related <a href=\"https://stackoverflow.com/questions/21084246/generate-string-for-regex-pattern-in-ruby\">generate string for regex pattern in ruby</a>"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "edited": false, "score": 0, "creation_date": 1517912789, "post_id": 48640548, "comment_id": 84277882, "body": "Thanks! I will try this gem. I will update my question to clarify my situation"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "edited": false, "score": 0, "creation_date": 1517914943, "post_id": 48640548, "comment_id": 84279314, "body": "Regarding your edit: <i>&quot;Any regex string that contains <code>minimal_prefix</code> has a string that matches all sub-regexes. I am figuring out whether this is correct or not.&quot;</i> --- Again, this works in <b>simple</b> scenarios, but <i>not in general!!!</i> Here&#39;s a trivial example: <code>&#47;a|b+&#47;</code> vs <code>&#47;b+&#47;</code> -- by your logic, there are <i>no</i> strings that match both, when in reality there are clearly infinitely many (<code>&quot;b&quot;</code>, <code>&quot;bb&quot;</code>, <code>&quot;bbb&quot;</code>, <code>&quot;bbbb&quot;</code>, ...)."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "edited": false, "score": 1, "creation_date": 1517915037, "post_id": 48640548, "comment_id": 84279384, "body": "So, again: If you de-scope the problem to simple scenarios like this, then you could write an efficient solution quite easily. But it&#39;s <b>not</b> easy to solve the problem <i>in general</i>."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1517912602, "last_edit_date": 1517912602, "creation_date": 1517912258, "answer_id": 48640548, "question_id": 48640248, "link": "https://stackoverflow.com/questions/48640248/find-strings-that-match-two-regular-expressions/48640548#48640548", "title": "Find strings that match two regular expressions", "body": "<p>Is there a quick way <strong>in general</strong>? No. What are \"all the strings\" that match these pairs of regular expressions:</p>\n\n<ul>\n<li><code>/.*/</code> and <code>/\\d*/</code>? (There are <em>infinitely</em> many!)</li>\n<li><code>/\\A\\d{10}\\z/</code> and <code>/\\A[0-8]{10}\\z/</code>? (There are 3,486,784,401!)</li>\n<li><code>/\\w+\\d{2,4}@?([[:punct:]]|\\w){2}/</code> and <code>/(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)/</code> (I haven't even tried to work this out; my point is: you could provide arbitrarily complicated input!!)</li>\n</ul>\n\n<p>...But for <em>simple</em> scenarios, such as what you've actually asked, it would be feasible to use <a href=\"https://github.com/tom-lord/regexp-examples\" rel=\"nofollow noreferrer\">this ruby gem</a>:</p>\n\n<pre><code>/^A+\\S{2}$/.examples(max_group_results: 999) &amp; /^AB+\\d{1}$/.examples(max_group_results: 999)\n=&gt; [\"AB0\", \"AB1\", \"AB2\", \"AB3\", \"AB4\", \"AB5\", \"AB6\", \"AB7\", \"AB8\", \"AB9\"]\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 48640548, "answer_count": 1, "score": 0, "last_activity_date": 1517914783, "creation_date": 1517911314, "last_edit_date": 1517914427, "question_id": 48640248, "link": "https://stackoverflow.com/questions/48640248/find-strings-that-match-two-regular-expressions", "title": "Find strings that match two regular expressions", "body": "<p>The two regexes:</p>\n\n<pre><code>regex_1 = /^A+\\S{2}$/\nregex_2 = /^AB+\\d{1}$/\n</code></pre>\n\n<p>match the following ten strings:</p>\n\n<pre><code>AB0\nAB1\nAB2\nAB3\nAB4\nAB5\nAB6\nAB7\nAB8\nAB9\n</code></pre>\n\n<p>Is there a way to find strings that match two regular expressions that are given?</p>\n\n<hr>\n\n<p>I have a regex, and it will be sliced to many sub-regexes as follows.</p>\n\n<p>Example 1:</p>\n\n<pre><code>original_regex = /^A+\\S{2}$/\nsub_regex1 = /^AB+\\S{1}$/\nsub_regex2 = /^AC+\\S{1}$/\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>original_regex = /^598+\\S{5}$/\nsub_regex1 = /^598A+\\S{4}$/\nsub_regex2 = /^598AB+\\S{3}$/\n</code></pre>\n\n<p>I want to know whether there are any strings that match all sub-regexes.</p>\n\n<p>I am thinking to convert the regex to a string and compare the minimal-length prefix and the minimal-length suffix like this:</p>\n\n<pre><code>regex_1 = \"/^A+\\S{2}$/\"\nregex_2 = \"/^AB+\\d{1}$/\"\nregex_3 = \"/^AC+\\d{1}$/\"\nminimal_prefix = \"/^A\"\n</code></pre>\n\n<p>Any regex string that contains <code>minimal_prefix</code> has a string that matches all sub-regexes. I am figuring out whether this is correct or not.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oop", "rails-activerecord"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1517912959, "post_id": 48640075, "comment_id": 84277999, "body": "Strong params have nothing to do with that."}, {"owner": {"reputation": 189, "user_id": 5815788, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DGWX_xNvZtY/AAAAAAAAAAI/AAAAAAAAABE/0m482zsbFRk/photo.jpg?sz=128", "display_name": "scoudert", "link": "https://stackoverflow.com/users/5815788/scoudert"}, "edited": false, "score": 0, "creation_date": 1517938275, "post_id": 48640075, "comment_id": 84295022, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/60033/what-is-the-easiest-way-to-duplicate-an-activerecord-record\">What is the easiest way to duplicate an activerecord record?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "edited": false, "score": 0, "creation_date": 1517911114, "post_id": 48640131, "comment_id": 84276784, "body": "Thanks. But I did that actually. But I don&#39;t want to add <code>except</code> everywhere. Isn&#39;t this is a property of new method to create a new object?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "edited": false, "score": 0, "creation_date": 1517911149, "post_id": 48640131, "comment_id": 84276807, "body": "@MukarramAli check out <code>#dup</code>."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1517911269, "last_edit_date": 1517911269, "creation_date": 1517910991, "answer_id": 48640131, "question_id": 48640075, "link": "https://stackoverflow.com/questions/48640075/creating-a-new-object-from-another-objects-attributes-in-rails/48640131#48640131", "title": "Creating a new object from another object&#39;s attributes in rails", "body": "<p>Simply remove the <code>id</code>:</p>\n\n<pre><code>obj2 = Post.new obj1.attributes.except('id')\n</code></pre>\n\n<p>Alternatively, use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Core.html#method-i-dup\" rel=\"nofollow noreferrer\"><code>#dup</code></a>:</p>\n\n<pre><code>obj2 = obj1.dup\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "is_accepted": false, "score": 3, "last_activity_date": 1517911156, "creation_date": 1517911156, "answer_id": 48640185, "question_id": 48640075, "link": "https://stackoverflow.com/questions/48640075/creating-a-new-object-from-another-objects-attributes-in-rails/48640185#48640185", "title": "Creating a new object from another object&#39;s attributes in rails", "body": "<p>If you want to make a copy of your attributes in a new object, you must use the following (Specific to ActiveRecord) :</p>\n\n<pre><code>obj2 = obj1.dup\n</code></pre>\n\n<p>This leaves out <code>id</code>, <code>(created|updated)_(at|on)</code> from being duplicated. Also remember that the parent associations live as is in the new object.</p>\n\n<p>For more <a href=\"https://apidock.com/rails/ActiveRecord/Core/dup\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/Core/dup</a></p>\n"}], "owner": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3377, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1517912438, "creation_date": 1517910836, "last_edit_date": 1517912438, "question_id": 48640075, "link": "https://stackoverflow.com/questions/48640075/creating-a-new-object-from-another-objects-attributes-in-rails", "title": "Creating a new object from another object&#39;s attributes in rails", "body": "<p>Before introducing <code>strong params</code> it was working fine.\nSo, on creating a new object using <code>new</code> and passing attributes, <code>id</code> was being set as <code>nil</code>. </p>\n\n<p>But now, when I am creating a new object, obj2 from existing object, obj1's attributes,</p>\n\n<p><code>id</code>(a primary key) of obj1 is also being copied to obj2.</p>\n\n<p>Like,</p>\n\n<pre><code>obj2 = Post.new obj1.attributes\n</code></pre>\n\n<p>So, problem arises when I try to save it,</p>\n\n<pre><code>obj2.save\n</code></pre>\n\n<p>with <code>ActiveRecord::RecordNotUnique</code> error. As both object have the same id.</p>\n\n<p>I have several models with the same use case, so if I use <code>dup</code> or <code>except</code>, I'll have to add the same in each case.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "edited": false, "score": 0, "creation_date": 1518074366, "post_id": 48638752, "comment_id": 84356570, "body": "I&#39;ve updated my answer. Hope that works!"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1517910566, "post_id": 48639716, "comment_id": 84276377, "body": "I&#39;ve made the changes as you suggested and the results was this [ ]. It happened to me all the time. I couldnt figure out why I always have an empty [ ] whenever I mess with the level[3] array"}, {"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1517910740, "post_id": 48639716, "comment_id": 84276499, "body": "Post the exact steps you are running. Also, ensure the file <code>alarms.csv</code> is exactly the one you posted above. If it&#39;s not then you will get an empty array."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1517921578, "post_id": 48639716, "comment_id": 84283566, "body": "Could I get an upvote for my other answer?  I apparently need rep to post pictures"}, {"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 1, "creation_date": 1517922336, "post_id": 48639716, "comment_id": 84284040, "body": "That&#39;s not really how StackOverflow works. Generally when people help you, you mark the helpful question with a check-mark."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518057568, "post_id": 48639716, "comment_id": 84351537, "body": "Hi, I&#39;ve managed to upload the images, please take a look if you have time, Thank you!!"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518077935, "post_id": 48639716, "comment_id": 84358269, "body": "Yup, my file path is alright as it works if I changed level[3] =&gt; level[0] It works well to search any keyword in my excel. So I&#39;m wondering if there is a flaw in the way it searches the column? Also, is it right to save it as CSV (Comma delimited) (*.csv) ?"}, {"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518080600, "post_id": 48639716, "comment_id": 84359887, "body": "<code>It works well to search any keyword in my excel.</code> I don&#39;t think I understand the problem you are facing. If it works for any keyword what is the issue you are encountering?"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518081408, "post_id": 48639716, "comment_id": 84360437, "body": "If I used this code  <code>highest = alarms.select { |level| level[0] =~ &#47;high&#47;}</code> I got row 4 and 6 as a successful result. But when I changed it to <code>high = alarms.select { |level| level[3].to_i == 2 }</code> it returns empty.   The main issue I&#39;m facing is: When I want to search using the suggestion you gave me, it returns nil."}, {"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518082081, "post_id": 48639716, "comment_id": 84360855, "body": "Your question asks <code>How should I limit my code to read only from the priority column?</code>. Do you want it to search the priority column and the status columns combined?"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518082390, "post_id": 48639716, "comment_id": 84361067, "body": "Yes, sorry for the confusion. If you would, that would greatly help!"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518084097, "post_id": 48639716, "comment_id": 84362303, "body": "I&#39;ve tried your code only to get blank arrays. I suppose there is a minor issue somewhere.."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518362628, "post_id": 48639716, "comment_id": 84465166, "body": "Hi Dani, may I know how would you add the col_sep option to this? I suspect that my csv isnt seperated by &#39;,&#39; but &#39;;&#39;"}, {"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 1, "creation_date": 1518380534, "post_id": 48639716, "comment_id": 84471422, "body": "Replace the line <code>alarms = CSV.read &#39;alarms.csv&#39;</code> with <code>alarms = CSV.read &#39;alarms.csv&#39;, {col_sep: &#39;;&#39;}</code>"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1518397190, "post_id": 48639716, "comment_id": 84476014, "body": "It works now!! Thanks Dani, I really appreciate your help :)"}], "tags": [], "owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "is_accepted": true, "score": 1, "last_activity_date": 1518082896, "last_edit_date": 1518082896, "creation_date": 1517909748, "answer_id": 48639716, "question_id": 48638752, "link": "https://stackoverflow.com/questions/48638752/unable-to-execute-a-search-for-a-specific-column-in-a-csv-file-using-ruby/48639716#48639716", "title": "Unable to execute a search for a specific column in a csv file using Ruby", "body": "<p>I'd make a method for it:</p>\n\n<pre><code>require 'csv'\n\ndef find_status_with_priority(status, priority)\n  alarms = CSV.read 'alarms.csv'\n  result = alarms.select do |level|\n    level[2].downcase == status.downcase &amp;&amp; level[3].to_i == priority.to_i\n  end\n  result\nend\n\np find_status_with_priority('high', 1)\np find_status_with_priority('MEDIUM', '2')\n</code></pre>\n\n<p>this will give you all the alarms with the defined status and priority:</p>\n\n<pre><code>[[\"doors\", \"14\", \"high\", \"1\"], [\"lift\", \"2\", \"high\", \"1\"]]\n[[\"windows\", \"2\", \"medium\", \"2\"], [\"lights\", \"5\", \"medium\", \"2\"]]\n</code></pre>\n\n<p><strong>Explanation</strong>:</p>\n\n<p><code>select</code> is a Ruby method for the Array class, to which you are passing a block (the stuff in the curly braces).</p>\n\n<p><code>|level|</code> is a local variable you instantiate for the lifespan of that block. It means select all of <code>level</code> where <code>level</code> has this behavior.</p>\n\n<p><code>level[0]</code> is the first column of the array. <code>level[1]</code> is the second column and so on.</p>\n\n<p><code>.to_i</code> converts the string '1', '2' or '3' into integer values <code>1</code>, <code>2</code> or <code>3</code>. You then check for equality (i.e. <code>==</code>) with the priority you are looking for, in your case, <code>2</code>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>To run the script from a console, run:</p>\n\n<pre><code>ruby alarms.rb\n</code></pre>\n\n<p>when you are in the same directory as the ruby file you are trying to execute.</p>\n"}], "owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 48639716, "answer_count": 1, "score": 1, "last_activity_date": 1518082896, "creation_date": 1517906628, "last_edit_date": 1518058720, "question_id": 48638752, "link": "https://stackoverflow.com/questions/48638752/unable-to-execute-a-search-for-a-specific-column-in-a-csv-file-using-ruby", "title": "Unable to execute a search for a specific column in a csv file using Ruby", "body": "<p>How to select a variable in a specific column in excel and printf the entire row using Ruby</p>\n\n<p>I am able to execute a search for a certain word in a csv file. I am also able to print out the entire row. The issue is that I am unable to execute a search for a specific column in a csv file and print out the entire row. </p>\n\n<p>I would need help regarding - selecting a priority level (which is on 4th column in excel) and puts the entire row using ruby </p>\n\n<pre><code>Equipment,Station,Status,Priority\nfloor,13,low,3\nwindows,2,medium,2\ndoors,14,high,1\nlights,5,medium,2\nlift,2,high,1\n\n\nrequire \"csv\" \n\nalarms = CSV.read('alarms.csv')\nhighest = alarms.select { |level| level[0] =~ /high/}\nputs highest.inspect\n</code></pre>\n\n<p>This code works if I were to look for /high/ \nbut if I wanted to look for a Priority level of 2, </p>\n\n<pre><code>highest = alarms.select { |level| level[0] =~ /2/}\n</code></pre>\n\n<p>It will read the station column too. </p>\n\n<p>How should I limit my code to read only from the priority column? Thanks! and\ncould some explain what this does? => |level| level[0]</p>\n\n<p>~ ~ ~ Update ~ ~ ~ </p>\n\n<p>Here is my code and file path</p>\n\n<p><a href=\"https://i.stack.imgur.com/p7dkm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p7dkm.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/wcOIW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wcOIW.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>this is how I execute my program. </p>\n\n<p><a href=\"https://i.stack.imgur.com/yL49m.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yL49m.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Sorry if something is obviously wrong, but I couldnt get the results. </p>\n\n<p>Would greatly appreciate if you could point it out thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "form-for"], "comments": [{"owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "edited": false, "score": 3, "creation_date": 1517912814, "post_id": 48638747, "comment_id": 84277893, "body": "This token is to prevent CSRF attack. Why do you want to remove it?"}, {"owner": {"reputation": 65, "user_id": 3027743, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d4fc39d1f376e4b8712498a80042973?s=128&d=identicon&r=PG", "display_name": "aadeshere1", "link": "https://stackoverflow.com/users/3027743/aadeshere1"}, "reply_to_user": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "edited": false, "score": 0, "creation_date": 1518085347, "post_id": 48638747, "comment_id": 84363173, "body": "Tai I don&#39;t want to remove the token itself, but the way <code>form_for</code> is renering it. This should be rendered as a HTML element, but right now it&#39;s rendering as a text."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3027743, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d4fc39d1f376e4b8712498a80042973?s=128&d=identicon&r=PG", "display_name": "aadeshere1", "link": "https://stackoverflow.com/users/3027743/aadeshere1"}, "edited": false, "score": 0, "creation_date": 1518085394, "post_id": 48640692, "comment_id": 84363209, "body": "Thanks, after this, I added <code>authenticity_token</code> manually in the form. That solved the problem occuring during POST request."}], "tags": [], "owner": {"reputation": 126, "user_id": 5616944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1d9d73f7ce8943637f42421f23f7da?s=128&d=identicon&r=PG&f=1", "display_name": "NRaghavendra", "link": "https://stackoverflow.com/users/5616944/nraghavendra"}, "is_accepted": true, "score": 1, "last_activity_date": 1517912694, "creation_date": 1517912694, "answer_id": 48640692, "question_id": 48638747, "link": "https://stackoverflow.com/questions/48638747/remove-rails-authenticity-token-from-view/48640692#48640692", "title": "Remove rails authenticity token from view", "body": "<p>Add following to your form to remove authentication token </p>\n\n<p><strong>:authenticity_token => false</strong></p>\n\n<pre><code>&lt;%= form_for @bar,:authenticity_token =&gt; false do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3027743, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d4fc39d1f376e4b8712498a80042973?s=128&d=identicon&r=PG", "display_name": "aadeshere1", "link": "https://stackoverflow.com/users/3027743/aadeshere1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 48640692, "answer_count": 1, "score": 0, "last_activity_date": 1517912694, "creation_date": 1517906612, "last_edit_date": 1517910387, "question_id": 48638747, "link": "https://stackoverflow.com/questions/48638747/remove-rails-authenticity-token-from-view", "title": "Remove rails authenticity token from view", "body": "<p>I pre populate the form field in the controller for @bar and when the form renders in the view, it also shows the <code>authenticity_token</code> in the view. </p>\n\n<pre><code>def new\n  @content = params[:foo][:id]\n  @foo = Foo.find(@content)\n  @bar = Bar.new(title: @foo.title, body: @foo.body, foo_id: @foo.id)\nend\n</code></pre>\n\n<p>Screnshot\n<a href=\"https://i.stack.imgur.com/kEu5I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kEu5I.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code for view: </p>\n\n<pre><code>      &lt;%= form_for @bar do |f| %&gt;\n          &lt;p&gt;\n            &lt;strong&gt;Title: &lt;/strong&gt;\n            &lt;%= f.text_field :title, label: false, class: 'form-control' %&gt;\n          &lt;/p&gt;\n\n          &lt;p&gt;\n            &lt;strong&gt;Body: &lt;/strong&gt;\n            &lt;%= f.text_area :body, label: false, class: 'form-control' %&gt;\n          &lt;/p&gt;\n\n        &lt;% end %&gt;\n</code></pre>\n\n<p>How do I remove the authenticity_token being rendered on the view ? </p>\n"}, {"tags": ["ruby", "reactjs", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1517902620, "post_id": 48637677, "comment_id": 84271715, "body": "You shouldn&#39;t have deleted <code>Gemfile.lock</code>. Instead, you should perform <code>bundle update rails</code> to update Rails to last patch."}, {"owner": {"reputation": 860, "user_id": 9117826, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1635056383219891/picture?type=large", "display_name": "Sourabh Banka", "link": "https://stackoverflow.com/users/9117826/sourabh-banka"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1517903929, "post_id": 48637677, "comment_id": 84272424, "body": "Thanks @MarekLipka. This time I did not deleted the Gemfile.lock. It worked. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 860, "user_id": 9117826, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1635056383219891/picture?type=large", "display_name": "Sourabh Banka", "link": "https://stackoverflow.com/users/9117826/sourabh-banka"}, "is_accepted": true, "score": 0, "last_activity_date": 1517904053, "creation_date": 1517904053, "answer_id": 48638100, "question_id": 48637677, "link": "https://stackoverflow.com/questions/48637677/upgrade-your-rails-app-from-rails-4-2-5-to-rails-4-2-10/48638100#48638100", "title": "Upgrade your rails app from rails-4.2.5 to rails 4.2.10", "body": "<p>Guys found what I was doing wrong. Please do not delete the gemfile.lock . Instead run only bundle update rails.</p>\n"}], "owner": {"reputation": 860, "user_id": 9117826, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1635056383219891/picture?type=large", "display_name": "Sourabh Banka", "link": "https://stackoverflow.com/users/9117826/sourabh-banka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 48638100, "answer_count": 1, "score": 0, "last_activity_date": 1517904053, "creation_date": 1517902271, "question_id": 48637677, "link": "https://stackoverflow.com/questions/48637677/upgrade-your-rails-app-from-rails-4-2-5-to-rails-4-2-10", "title": "Upgrade your rails app from rails-4.2.5 to rails 4.2.10", "body": "<p>I am trying to upgrade my rails app to rails version 4.2.10 from rails version 4.2.5 . I am using react for the front end. \nWhat I did was:\nFirst I remove the line gem 'rails', '~> 4.2.5' from gemfile.\nSecond add the line gem 'rails', '~> 4.2.10' to gemfile.\nThen created a new gemset (gemset create app_name_rails_4.2.10)\ngemset use app_name_rails_4.2.10.\nDeleted the gemfile.lock\nThen run bundle install.</p>\n\n<p>After that when I start the serever ,</p>\n\n<p>I am getting error in console is -----\nResponse to preflight request doesn't pass access control check: The value of the 'Access-Control-Allow-Credentials' header in the response is '' which must be 'true' when the request's credentials mode is 'include'.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "elasticsearch"], "owner": {"reputation": 11, "user_id": 3106940, "user_type": "registered", "profile_image": "https://graph.facebook.com/686190564/picture?type=large", "display_name": "user3106940", "link": "https://stackoverflow.com/users/3106940/user3106940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517901518, "creation_date": 1517901518, "question_id": 48637469, "link": "https://stackoverflow.com/questions/48637469/how-to-filter-the-documents-based-on-created-date-in-elasticsearch-index", "title": "How to filter the documents based on created_date in elasticsearch index?", "body": "<p>I need to get the documents which are created today</p>\n\n<p>Say A is my model, following is the mapping and indexed columns</p>\n\n<pre><code>def as_indexed_json(options={})\n    self.as_json({only: [:id,:user_id,:user_agent, :browser,:created_at]})\nend\n\n  settings :index =&gt; { :number_of_shards =&gt; 1  } do\n    mapping :dynamic =&gt; 'false' do\n      indexes :id, :type =&gt; 'integer'\n      indexes :user_agent, :type =&gt; 'string'\n      indexes :created_at, :type =&gt; 'date',:format =&gt; \"dd/MM/yyyy\"\n    end\n  end\n</code></pre>\n\n<p>I could get the documents within the date range using range filter and elasticrange-model gem.</p>\n\n<pre><code>query = \"{\\\"query\\\": {\\\"range\\\" : {\\\"created_at\\\" : {\\\"gte\\\": \\\"05/01/2018\\\", \\\"lte\\\": \\\"05/02/2018\\\", \\\"format\\\": \\\"dd/MM/yyyy||dd/MM/yyyy\\\"} } },\\\"aggs\\\": {\\\"group_by_browser\\\": {\\\"terms\\\": {\\\"field\\\": \\\"browser\\\"} } } }\"\n\nresponse = A.__elasticsearch__.search query\nresponse.response[\"aggregations\"][\"group_by_browser\"][\"buckets\"].map{|k| [k[\"key\"],k[\"doc_count\"]]}\n</code></pre>\n\n<p>However, not being able to find a filter which will match documents with todays dat</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "comments": [{"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 2, "creation_date": 1517901465, "post_id": 48637427, "comment_id": 84271151, "body": "Have you got any error from the log?"}, {"owner": {"reputation": 9, "user_id": 9320058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DFiO7dVJ2SE/AAAAAAAAAAI/AAAAAAAABKI/cBrfEbvMOtM/photo.jpg?sz=128", "display_name": "Lucas", "link": "https://stackoverflow.com/users/9320058/lucas"}, "reply_to_user": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1517902604, "post_id": 48637427, "comment_id": 84271703, "body": "Thank you!  I see: HTTP Origin header <a href=\"https://mydomain\" rel=\"nofollow noreferrer\">https://mydomain</a> didn&#39;t match request.base_url <a href=\"http://mydomain\" rel=\"nofollow noreferrer\">http://mydomain</a>, I will find the cause here"}, {"owner": {"reputation": 9, "user_id": 9320058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DFiO7dVJ2SE/AAAAAAAAAAI/AAAAAAAABKI/cBrfEbvMOtM/photo.jpg?sz=128", "display_name": "Lucas", "link": "https://stackoverflow.com/users/9320058/lucas"}, "reply_to_user": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1517904056, "post_id": 48637427, "comment_id": 84272482, "body": "I see resolve here: <a href=\"https://github.com/rails/rails/issues/22965\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/22965</a>"}], "owner": {"reputation": 9, "user_id": 9320058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DFiO7dVJ2SE/AAAAAAAAAAI/AAAAAAAABKI/cBrfEbvMOtM/photo.jpg?sz=128", "display_name": "Lucas", "link": "https://stackoverflow.com/users/9320058/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517901726, "creation_date": 1517901347, "last_edit_date": 1517901726, "question_id": 48637427, "link": "https://stackoverflow.com/questions/48637427/dont-set-session-method-post-with-https-in-rails-5-1", "title": "Don&#39;t set session method post with https in rails 5.1", "body": "<p>I don't understand when I login with http session run normal and login success, but when I use https I can't set session and login fails.</p>\n\n<p>I find solution add <code>config.force_ssl = true</code> in file 'config/production.rb' but login fails with https. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "imap"], "comments": [{"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1517902567, "post_id": 48637415, "comment_id": 84271684, "body": "A quick look at the documentation for the one you&#39;re using suggests code along the lines of messages=imap.search(...); map.fetch(messages, &#39;BODY[TEXT]).each do ..."}, {"owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "reply_to_user": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1517905293, "post_id": 48637415, "comment_id": 84273106, "body": "Where I can see that documentation? Since I didn&#39;t see it."}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1517912020, "post_id": 48637415, "comment_id": 84277413, "body": "I&#39;ve already closed the browser tab... <a href=\"https://docs.ruby-lang.org/en/2.4.0/Net/IMAP.html#method-i-fetch\" rel=\"nofollow noreferrer\">docs.ruby-lang.org/en/2.4.0/Net/IMAP.html#method-i-fetch</a> has the same text. It doesn&#39;t say &quot;calling fetch once with an array is faster than 100 times with an integer&quot; but that will be the case. Fewer network roundtrips."}], "answers": [{"tags": [], "owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "is_accepted": false, "score": 0, "last_activity_date": 1518073642, "creation_date": 1518073642, "answer_id": 48679522, "question_id": 48637415, "link": "https://stackoverflow.com/questions/48637415/fetching-emails-from-imap-server-effective-way/48679522#48679522", "title": "Fetching Emails from IMAP Server Effective Way", "body": "<p>So, based on arnt's answer, I found that fetching first in array will be faster than my previous way. I still not sure sure if this is the best one, so if anyone found a better way, please let me know.</p>\n\n<p>This is my new code.</p>\n\n<pre><code>&lt;% surat = imap.search([\"SINCE\", @mail_date]) %&gt;\n&lt;% arr_envelop = imap.fetch(surat, \"ENVELOPE\") %&gt;\n&lt;% body_envelop = imap.fetch(surat, \"RFC822.TEXT\") %&gt;\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518073642, "creation_date": 1517901305, "last_edit_date": 1517901582, "question_id": 48637415, "link": "https://stackoverflow.com/questions/48637415/fetching-emails-from-imap-server-effective-way", "title": "Fetching Emails from IMAP Server Effective Way", "body": "<p>I am currently developing a Ruby on Rails app where I can manage emails on it. Emails have come from my own hosting server (eg. john@example.com), it isn't gmail or yahoo etc.</p>\n\n<p>So, I am using this method :</p>\n\n<pre><code>&lt;% imap.select(\"INBOX\") %&gt;\n&lt;% imap.search([\"NOT\", \"RECENT\"]).each do |message_id| %&gt;\n&lt;% envelope = imap.fetch(message_id, \"ENVELOPE\")[0].attr[\"ENVELOPE\"] %&gt;\n&lt;% body = imap.fetch(message_id,'BODY[TEXT]')[0].attr['BODY[TEXT]'] %&gt;\n&lt;%= envelope.subject %&gt;\n&lt;%= body.html_safe %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Which is working fine, but the problem is, when the emails came more than 10, it become very slow to load, and sometimes return error timeout, which makes the application not load.</p>\n\n<p>Are there any ways (or gem) to handle a bunch of emails to read at one time? </p>\n\n<p>Since I think the way that I am using now is not effective.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium-webdriver", "firefox-addon", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517939645, "post_id": 48636607, "comment_id": 84295799, "body": "well you haven&#39;t posted any code that will allow us to help you so Your issue is 4444 is the default port (<a href=\"https://github.com/mozilla/geckodriver/blob/release/src/main.rs#L96\" rel=\"nofollow noreferrer\">Source</a>) and you have not changed it"}, {"owner": {"reputation": 55, "user_id": 8414840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0438ec3a75a48b7926e2e47d420de6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Amar A", "link": "https://stackoverflow.com/users/8414840/amar-a"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517988532, "post_id": 48636607, "comment_id": 84313863, "body": "My Cucumber code run Selenium::WebDriver and listening to 7056. How can I make it listen to 4444."}, {"owner": {"reputation": 55, "user_id": 8414840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0438ec3a75a48b7926e2e47d420de6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Amar A", "link": "https://stackoverflow.com/users/8414840/amar-a"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1517988547, "post_id": 48636607, "comment_id": 84313870, "body": "Which part of code, do you want?"}], "owner": {"reputation": 55, "user_id": 8414840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0438ec3a75a48b7926e2e47d420de6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Amar A", "link": "https://stackoverflow.com/users/8414840/amar-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517899643, "creation_date": 1517897833, "last_edit_date": 1517899643, "question_id": 48636607, "link": "https://stackoverflow.com/questions/48636607/seleniumwebdriver-listening-to-wrong-port", "title": "Selenium::WebDriver Listening to Wrong Port", "body": "<p>While Running Cucumber, <code>Selenium::WebDriver</code> is listening to <code>Listening on 127.0.0.1:4444</code> while cucumber is looking for <code>127.0.0.1:7055</code>. How to fix this issue.</p>\n\n<p>I am running Firefox <code>Selenium::WebDriver</code> which I downloaded from </p>\n\n<p><a href=\"https://github.com/mozilla/geckodriver/\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckodriver/</a>.</p>\n\n<p>Error </p>\n\n<blockquote>\n  <p>unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055) (Selenium::WebDriver::Error::WebDriverError)</p>\n</blockquote>\n\n<p>TIA</p>\n"}, {"tags": ["android", "ios", "ruby", "push-notification", "appium"], "answers": [{"comments": [{"owner": {"reputation": 2606, "user_id": 2533443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BYMxU.gif?s=128&g=1", "display_name": "Mike Collins", "link": "https://stackoverflow.com/users/2533443/mike-collins"}, "edited": false, "score": 1, "creation_date": 1546474829, "post_id": 48672647, "comment_id": 94866816, "body": "Important to note this only works on emulated devices."}], "tags": [], "owner": {"reputation": 3036, "user_id": 4103101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wg02v.jpg?s=128&g=1", "display_name": "dmle", "link": "https://stackoverflow.com/users/4103101/dmle"}, "is_accepted": false, "score": 1, "last_activity_date": 1518035068, "creation_date": 1518035068, "answer_id": 48672647, "question_id": 48636517, "link": "https://stackoverflow.com/questions/48636517/how-to-test-push-notification-in-android-and-ios-using-appium-in-ruby/48672647#48672647", "title": "How to test push notification in android and iOS using Appium in ruby", "body": "<p>with Appium it works for <a href=\"http://appium.io/docs/en/commands/device/system/open-notifications/\" rel=\"nofollow noreferrer\">Android only</a>:</p>\n\n<pre><code>@driver.open_notifications();\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8841453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce8ff18b1044f843030247308eb9ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Leyon Gudinho", "link": "https://stackoverflow.com/users/8841453/leyon-gudinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518035068, "creation_date": 1517897383, "question_id": 48636517, "link": "https://stackoverflow.com/questions/48636517/how-to-test-push-notification-in-android-and-ios-using-appium-in-ruby", "title": "How to test push notification in android and iOS using Appium in ruby", "body": "<p>I am using Appium with ruby to write automation scripts, there are notification generated in some functionality. How do I test it (both android and iOS), any suggestions?</p>\n"}, {"tags": ["arrays", "ruby", "range"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 2, "creation_date": 1517896887, "post_id": 48636383, "comment_id": 84269348, "body": "What have you tried so far, post your attempts"}, {"owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "reply_to_user": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1517897031, "post_id": 48636383, "comment_id": 84269408, "body": "I can create a loop and then manually increment until max value. I am just looking for some ruby built in one liner. I also tried following but it is of no use in my case. (array_of_prices + [Float::INFINITY]).each_cons(2).map { |a,b| a..b }"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1517900164, "post_id": 48636383, "comment_id": 84270595, "body": "You have changed the question. Don&#39;t do that! If you change a question after an answer has been posted, it could, as here, make the answers inon-sensical at best. Instead, post another question. In fact, it&#39;s not clear what you now want. If the array were <code>[1399, 1715, 1825]</code> would you want the same array of five ranges returned (in which case only the smallest and largest elements of the array would matter).?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1517906184, "post_id": 48636383, "comment_id": 84273527, "body": "Should the prices always end in <code>99</code> or does it depend on the array&#39;s first value \u2013 i.e. if you had a minimum value of <code>1325</code>, would the first range be <code>1325..1425</code> or <code>1299..1399</code>?"}, {"owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "edited": false, "score": 0, "creation_date": 1517908047, "post_id": 48636383, "comment_id": 84274632, "body": "depends on the array&#39;s first value. would be 1325..1425"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "edited": false, "score": 1, "creation_date": 1517900831, "post_id": 48636774, "comment_id": 84270871, "body": "Note my answer was to the question as originally posted."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1517899069, "last_edit_date": 1517899069, "creation_date": 1517898523, "answer_id": 48636774, "question_id": 48636383, "link": "https://stackoverflow.com/questions/48636383/array-of-numbers-to-array-of-ranges-between-min-and-max-price-with-difference/48636774#48636774", "title": "Array of numbers to array of ranges between min and max price with difference", "body": "<pre><code>n = 100\narr = [1399, 1435, 1465, 1715, 1745, 1760, 1825]\n\nstart = arr.first\narr.slice_before do |x|\n  if x &gt; start + n\n    start = x\n    true\n  else\n    false\n  end\nend.map { |f,*_| f..f+n }\n  #=&gt; [1399..1499, 1715..1815, 1825..1925]\n</code></pre>\n\n<p>The third range in the returned array differs from that desired in two respects. The third range was asked to be <code>1815..1825</code>. I assume <code>1815</code> was a typo, as if differs from the logic for the second range. If it desired that the end of the last range should be the last element of <code>arr</code>, rather than the first element of the range plus <code>n</code>, that's just a bit of messiness to fix. It could be done as follows.</p>\n\n<p>Let</p>\n\n<pre><code>a = [1399..1499, 1715..1815, 1825..1925]\n</code></pre>\n\n<p>as computed above. Then</p>\n\n<pre><code>a[0..-2] &lt;&lt; (a.last.begin..arr.last)\n  #=&gt; [1399..1499, 1715..1815, 1825..1825]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1517902182, "post_id": 48637569, "comment_id": 84271475, "body": "<code>arr.min.step(by:n, to: arr.max).map { |i| i..i+n }</code> may suffice."}, {"owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "edited": false, "score": 0, "creation_date": 1517902610, "post_id": 48637569, "comment_id": 84271709, "body": "Accepted. Thanks."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1517901860, "creation_date": 1517901860, "answer_id": 48637569, "question_id": 48636383, "link": "https://stackoverflow.com/questions/48636383/array-of-numbers-to-array-of-ranges-between-min-and-max-price-with-difference/48637569#48637569", "title": "Array of numbers to array of ranges between min and max price with difference", "body": "<p>You can <a href=\"https://ruby-doc.org/core-2.4.2/Numeric.html#method-i-step\" rel=\"nofollow noreferrer\"><code>step</code></a> by your <code>n</code> (in this case, 100):</p>\n\n<pre><code>array = [1399, 1435, 1465, 1715, 1745, 1760, 1825]\narray.min.step(to: array.max + n, by: n).each_cons(2).map { |a, b| a..b }\n# =&gt; [1399..1499, 1499..1599, 1599..1699, 1699..1799, 1799..1899]\narray &lt;&lt; 1899\narray.min.step(to: array.max + n, by: n).each_cons(2).map { |a, b| a..b }\n# =&gt; [1399..1499, 1499..1599, 1599..1699, 1699..1799, 1799..1899, 1899..1999]\n</code></pre>\n\n<p>Note that <code>step</code> doesn't pass any value that's greater than <code>to:</code> to the block, so if you increment your largest value by <code>n</code> things seem to work out.</p>\n"}], "owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 48637569, "answer_count": 2, "score": -4, "last_activity_date": 1517915486, "creation_date": 1517896729, "last_edit_date": 1517915486, "question_id": 48636383, "link": "https://stackoverflow.com/questions/48636383/array-of-numbers-to-array-of-ranges-between-min-and-max-price-with-difference", "title": "Array of numbers to array of ranges between min and max price with difference", "body": "<p>I have an array <code>prices</code>:</p>\n\n<pre><code>[1399, 1435, 1465, 1715, 1745, 1760, 1825]\n</code></pre>\n\n<p>I want an array of ranges between the min and the max price with the difference of <code>100</code>. I need something like:</p>\n\n<pre><code>[1399..1499, 1499..1599, 1599..1699, 1699..1799, 1799..1899]\n</code></pre>\n\n<p>Is there a one-liner?</p>\n"}, {"tags": ["ruby", "windows", "guard"], "comments": [{"owner": {"reputation": 707, "user_id": 1926476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XfR37.png?s=128&g=1", "display_name": "Vaisakh Rajagopal", "link": "https://stackoverflow.com/users/1926476/vaisakh-rajagopal"}, "edited": false, "score": 0, "creation_date": 1518021341, "post_id": 48636200, "comment_id": 84335480, "body": "As @e2 [mentioned](github guard/guard#734 (comment)), guard-go is outdated.  You could make it up and running, by downgrading gaurd to its lowest matching version. gem &#39;guard&#39;, &#39;1.0.0&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 707, "user_id": 1926476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XfR37.png?s=128&g=1", "display_name": "Vaisakh Rajagopal", "link": "https://stackoverflow.com/users/1926476/vaisakh-rajagopal"}, "is_accepted": true, "score": 0, "last_activity_date": 1526969318, "last_edit_date": 1526969318, "creation_date": 1518463553, "answer_id": 48754048, "question_id": 48636200, "link": "https://stackoverflow.com/questions/48636200/error-could-not-load-guard-go-or-guard-templates-go-or-find-class-guard/48754048#48754048", "title": "Error: Could not load &#39;guard/go&#39; or &#39;~/.guard/templates/go&#39; or find class Guard::Go", "body": "<p>It was some version issue. Once we downgrade the guard version its seems working.</p>\n"}], "owner": {"reputation": 707, "user_id": 1926476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XfR37.png?s=128&g=1", "display_name": "Vaisakh Rajagopal", "link": "https://stackoverflow.com/users/1926476/vaisakh-rajagopal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 48754048, "answer_count": 1, "score": 0, "last_activity_date": 1526969318, "creation_date": 1517895824, "last_edit_date": 1517908807, "question_id": 48636200, "link": "https://stackoverflow.com/questions/48636200/error-could-not-load-guard-go-or-guard-templates-go-or-find-class-guard", "title": "Error: Could not load &#39;guard/go&#39; or &#39;~/.guard/templates/go&#39; or find class Guard::Go", "body": "<p>I am facing issue in initializing guard-go in windows.\nOther plugins work fine, I were able to use guard-sass.</p>\n\n<p>Details\nOS: Windows\nruby: ruby 2.4.3p205 (2017-12-14 revision 61247) [x64-mingw32]</p>\n\n<p>please find the details</p>\n\n<p>Gemfile</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngroup:development do \n    gem 'guard'\n    gem 'guard-go'\n    gem 'win32console'\n    gem 'guard-sass'\nend\n</code></pre>\n\n<p>I have installed the gem using <em>bundle install</em></p>\n\n<p>But </p>\n\n<p><strong>bundle exec guard init go</strong> throws error </p>\n\n<pre><code>11:04:08 - ERROR - Could not load 'guard/go' or '~/.guard/templates/go' or find class Guard::Go\n [#]\n</code></pre>\n\n<p>If i manually add the plugin code to <strong>Guardfile</strong></p>\n\n<pre><code> guard 'go', :server =&gt; 'app.go' do\n   watch(%r{\\.go$})\n end\n</code></pre>\n\n<p>Then <strong>bundle exec guard</strong> give me an error like</p>\n\n<pre><code>11:10:45 - ERROR - Could not load 'guard/go' or find class Guard::Go\n11:10:45 - ERROR - Error is: cannot load such file -- guard/guard\n11:10:45 - ERROR - C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-go-0.0.4/lib/guard/go.rb:2:in `require'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-go-0.0.4/lib/guard/go.rb:2:in `&lt;top (required)&gt;'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/plugin_util.rb:105:in `require'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/plugin_util.rb:105:in `rescue in plugin_class'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/plugin_util.rb:96:in `plugin_class'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/plugin_util.rb:56:in `initialize_plugin'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/internals/plugins.rb:26:in `add'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/dsl.rb:185:in `block in guard'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/dsl.rb:182:in `each'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/dsl.rb:182:in `guard'\n&gt; [#] C:/Users/vaisr/Var23Workshop/Go/src/Prom/Guardfile:17:in `evaluate'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/dsl.rb:377:in `instance_eval'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/dsl.rb:377:in `evaluate'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/guardfile/evaluator.rb:89:in `evaluate'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard.rb:134:in `_evaluate'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard.rb:49:in `setup'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/commander.rb:32:in `start'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/cli/environments/valid.rb:16:in `start_guard'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/cli.rb:122:in `start'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thor-0.20.0/lib/thor/base.rb:466:in `start'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/aruba_adapter.rb:32:in `execute'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/lib/guard/aruba_adapter.rb:19:in `execute!'\n&gt; [#] C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/guard-2.14.2/bin/_guard-core:11:in `&lt;main&gt;'\n11:10:45 - ERROR - Invalid Guardfile, original error is:\n&gt; [#]\n&gt; [#] Could not load class: \"Go\",\n&gt; [#] backtrace:\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n&gt; [#]   (dsl)&gt; C\n</code></pre>\n\n<p><a href=\"https://github.com/victorcoder/guard-go/issues/20\" rel=\"nofollow noreferrer\">Github Issue 20</a></p>\n"}, {"tags": ["ruby", "dependencies", "chef-infra", "test-kitchen"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1517894274, "post_id": 48635809, "comment_id": 84268416, "body": "Can you share your gem list, you can check why it&#39;s looking for lower version of gem"}, {"owner": {"reputation": 36698, "user_id": 145989, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d0edf9d0f312ec47d27046845580ba4f?s=128&d=identicon&r=PG", "display_name": "Ondra \u017di\u017eka", "link": "https://stackoverflow.com/users/145989/ondra-%c5%bdi%c5%beka"}, "reply_to_user": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1517929252, "post_id": 48635809, "comment_id": 84289033, "body": "How do I list them? WRT version, that&#39;s buried somewhere deep inside kitchen&#39;s source scripts."}], "answers": [{"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1517939907, "post_id": 48644560, "comment_id": 84295948, "body": "Minor note, you aren\u2019t using our packages. We do include it in the ChefDK packages, which we also recommend you use."}, {"owner": {"reputation": 36698, "user_id": 145989, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d0edf9d0f312ec47d27046845580ba4f?s=128&d=identicon&r=PG", "display_name": "Ondra \u017di\u017eka", "link": "https://stackoverflow.com/users/145989/ondra-%c5%bdi%c5%beka"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1520598037, "post_id": 48644560, "comment_id": 85391893, "body": "@coderanger Maybe I am not, I am only using <code>gem</code> for Chef, and while making  things work, I could have used some nonstandard packages. What&#39;s the current recommended way for Ubuntu 17.10?"}], "tags": [], "owner": {"reputation": 36698, "user_id": 145989, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d0edf9d0f312ec47d27046845580ba4f?s=128&d=identicon&r=PG", "display_name": "Ondra \u017di\u017eka", "link": "https://stackoverflow.com/users/145989/ondra-%c5%bdi%c5%beka"}, "is_accepted": true, "score": 0, "last_activity_date": 1517929588, "last_edit_date": 1517929588, "creation_date": 1517924729, "answer_id": 48644560, "question_id": 48635809, "link": "https://stackoverflow.com/questions/48635809/chef-kitchen-stopped-working-all-of-the-sudden-with-could-not-find-net-scp/48644560#48644560", "title": "Chef kitchen stopped working all of the sudden with &quot;Could not find &#39;net-scp&#39;&quot; (Ubuntu 17.10)", "body": "<p>Ok so after sleeping well, I realized it is telling me it just can't find some library. So I started installing them, starting with <code>sudo gem install net-scp</code>.</p>\n\n<p>I'm not sure though why they got uninstalled and why chef didn't install them with it's package.</p>\n\n<pre><code>05:56 ~/work/doc/cook 1$ kitchen\n/usr/local/lib/site_ruby/2.3.0/rubygems/dependency.rb:310:in `to_specs': Could not find 'net-scp' (~&gt; 1.1) among 266 total gem(s) (Gem::MissingSpecError)\nChecked in 'GEM_PATH=/home/ondra/.gem/ruby/2.3.0:/var/lib/gems/2.3.0:/usr/lib/x86_64-linux-gnu/rubygems-integration/2.3.0:/usr/share/rubygems-integration/2.3.0:/usr/share/rubygems-integration/all', execute `gem env` for more information\n        from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1468:in `block in activate_dependencies'\n        from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1457:in `each'\n        from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1457:in `activate_dependencies'\n        from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1439:in `activate'\n        from /usr/local/lib/site_ruby/2.3.0/rubygems.rb:310:in `block in activate_bin_path'\n        from /usr/local/lib/site_ruby/2.3.0/rubygems.rb:309:in `synchronize'\n        from /usr/local/lib/site_ruby/2.3.0/rubygems.rb:309:in `activate_bin_path'\n        from /usr/local/bin/kitchen:23:in `&lt;main&gt;'\n05:56 ~/work/doc/cook 1$ sudo gem install net-scp\n[sudo] password for ondra: \nFetching: net-scp-1.2.1.gem (100%)\nSuccessfully installed net-scp-1.2.1\nParsing documentation for net-scp-1.2.1\nInstalling ri documentation for net-scp-1.2.1\nDone installing documentation for net-scp after 0 seconds\n1 gem installed\n\n14:43 ~/work/doc/cook $ kitchen\n/usr/local/lib/site_ruby/2.3.0/rubygems/dependency.rb:310:in `to_specs': Could not find 'ffi' (&gt;= 1.0.1) among 267 total gem(s) (Gem::MissingSpecError)\nChecked in...\n\n14:43 ~/work/doc/cook $ sudo gem install ffi berkshelf\n... \n15:09 ~/work/doc/cook 127$ kitchen \nCommands:\n</code></pre>\n"}], "owner": {"reputation": 36698, "user_id": 145989, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d0edf9d0f312ec47d27046845580ba4f?s=128&d=identicon&r=PG", "display_name": "Ondra \u017di\u017eka", "link": "https://stackoverflow.com/users/145989/ondra-%c5%bdi%c5%beka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 48644560, "answer_count": 1, "score": 0, "last_activity_date": 1517929588, "creation_date": 1517893417, "question_id": 48635809, "link": "https://stackoverflow.com/questions/48635809/chef-kitchen-stopped-working-all-of-the-sudden-with-could-not-find-net-scp", "title": "Chef kitchen stopped working all of the sudden with &quot;Could not find &#39;net-scp&#39;&quot; (Ubuntu 17.10)", "body": "<p>I was working on a project, and suddenly, any invocation to anything Ruby seems stopped working. All of them report missing dependencies.</p>\n\n<p>I was uninstalling unrelated C/C++ -dev libraries before that, could be the cause because I didn't do anything else I would suspect.</p>\n\n<p>I have tried reinstalling chefdk.deb (downloaded), I did <code>sudo gem update --system</code> which changed (looks like improved) the stack trace, but the error is still the same:</p>\n\n<pre><code>05:56 ~/work/doc/cook 1$ kitchen\n/usr/local/lib/site_ruby/2.3.0/rubygems/dependency.rb:310:in `to_specs': Could not find 'net-scp' (~&gt; 1.1) among 266 total gem(s) (Gem::MissingSpecError)\nChecked in 'GEM_PATH=/home/ondra/.gem/ruby/2.3.0:/var/lib/gems/2.3.0:/usr/lib/x86_64-linux-gnu/rubygems-integration/2.3.0:/usr/share/rubygems-integration/2.3.0:/usr/share/rubygems-integration/all', execute `gem env` for more information\n    from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1468:in `block in activate_dependencies'\n    from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1457:in `each'\n    from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1457:in `activate_dependencies'\n    from /usr/local/lib/site_ruby/2.3.0/rubygems/specification.rb:1439:in `activate'\n    from /usr/local/lib/site_ruby/2.3.0/rubygems.rb:310:in `block in activate_bin_path'\n    from /usr/local/lib/site_ruby/2.3.0/rubygems.rb:309:in `synchronize'\n    from /usr/local/lib/site_ruby/2.3.0/rubygems.rb:309:in `activate_bin_path'\n    from /usr/local/bin/kitchen:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>What should I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "firefox"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1517894111, "post_id": 48635642, "comment_id": 84268354, "body": "it also works in firefox. possibly you&#39;ve attached a listener function to this button and this one causes problems. plz also share them."}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 1, "creation_date": 1517894619, "post_id": 48635642, "comment_id": 84268529, "body": "Have you checked firefox console for any errors"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1517899044, "post_id": 48635642, "comment_id": 84270120, "body": "It should work, make sure you have used well syntax of <code>JS</code> or <code>jQuery</code> for this button"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 4283721, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100002364228187/picture?type=large", "display_name": "Thilanka Umayanga Jayarathna", "link": "https://stackoverflow.com/users/4283721/thilanka-umayanga-jayarathna"}, "is_accepted": true, "score": 0, "last_activity_date": 1517899276, "creation_date": 1517899276, "answer_id": 48636939, "question_id": 48635642, "link": "https://stackoverflow.com/questions/48635642/rails-submit-button-not-work-in-firefox-and-edge-but-work-in-chrome/48636939#48636939", "title": "Rails submit button not work in firefox and edge but work in chrome", "body": "<p>I found the error. Error is not in the button_tag. In this button styles</p>\n\n<pre><code>#logo-submit{\n\nleft:300px;\ntop:5px;\nbackground-color:transparent;\n\n}\n</code></pre>\n\n<p>using</p>\n\n<pre><code>display: block;\n</code></pre>\n\n<p>now application work fine</p>\n"}], "owner": {"reputation": 47, "user_id": 4283721, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100002364228187/picture?type=large", "display_name": "Thilanka Umayanga Jayarathna", "link": "https://stackoverflow.com/users/4283721/thilanka-umayanga-jayarathna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 48636939, "answer_count": 1, "score": 0, "last_activity_date": 1517899276, "creation_date": 1517892326, "last_edit_date": 1517899160, "question_id": 48635642, "link": "https://stackoverflow.com/questions/48635642/rails-submit-button-not-work-in-firefox-and-edge-but-work-in-chrome", "title": "Rails submit button not work in firefox and edge but work in chrome", "body": "<p>In my rails application, I have a submit button </p>\n\n<pre><code>&lt;%= button_tag (type: 'submit', id:'logo-submit' , class: \"btn btn-\n       transparent\", style:'') do %&gt;\n   &lt;span class=\"glyphicon glyphicon-floppy-disk\"&gt;&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It works fine in Chrome but doesn't work in firefox.</p>\n\n<p>Any suggestions are much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "spree"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517892275, "post_id": 48635555, "comment_id": 84267887, "body": "422 (Unprocessable Entity) is an indication that the data you sent to the server is malformed, the last bit of your query string looks suspicious to me, I&#39;m not sure if the server can process that, in any case check the format of the data"}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517893084, "post_id": 48635555, "comment_id": 84268104, "body": "@Subash, similar type of autosuggest is there for option types , which is working fine. The data format over there is : <code>http:&#47;&#47;192.168.0.106:3000&#47;api&#47;option_types?  q%5Bname_cont%5D=s&amp;token=477cdac328120d8a3dcb804358ec4535091&zwnj;&#8203;366faf9e988f3&amp;_=1517&zwnj;&#8203;892848246</code> ."}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1517895117, "post_id": 48635555, "comment_id": 84268717, "body": "have you tried debugging with minimum parameters for success and try adding request params in url to check which key is responsible"}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "is_accepted": false, "score": 0, "last_activity_date": 1519819944, "creation_date": 1519819944, "answer_id": 49029307, "question_id": 48635555, "link": "https://stackoverflow.com/questions/48635555/in-spree-admin-taxons-not-loading-says-searching/49029307#49029307", "title": "In spree admin , taxons not loading says &quot;searching&quot;", "body": "<p>Fixed the issue. The issue arised due to 'will_paginate' gem.\nBy replacing the config/initializers/will_paginate.rb     </p>\n\n<pre><code> if defined?(WillPaginate)\n  module WillPaginate\n  module ActiveRecord\n   module RelationMethods\n   def per_page(num)\n    if (n = num.to_i) &lt;= 0\n      self\n     else\n      limit(n).offset(offset_value / limit_value * n)\n    end\n   end\n\ndef total_pages\n  (total_count.to_f / limit_value).ceil\nend\n\nalias_method :per, :per_page\nalias_method :num_pages, :total_pages\nalias_method :total_count, :total_entries\n  end\n end\n</code></pre>\n\n<p>end\n  end`</p>\n"}], "owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519819944, "creation_date": 1517891817, "question_id": 48635555, "link": "https://stackoverflow.com/questions/48635555/in-spree-admin-taxons-not-loading-says-searching", "title": "In spree admin , taxons not loading says &quot;searching&quot;", "body": "<p>In my ruby application with spree at its backend , i am not able to add taxons to a product. </p>\n\n<p>Its showing loading failed... <a href=\"https://i.stack.imgur.com/QWsbr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QWsbr.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/vTdM8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vTdM8.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Error: Failed to load resource: the server responded with a status of \n422 (Unprocessable Entity)\n:3000/api/taxons?per_page=50&amp;page=1&amp;without_children=true&amp;q%5Bname_cont%5D=&amp;token=477cdac328120d8a3dcb804358ec4535091366faf9e988f3&amp;_=1517890528589\n</code></pre>\n\n<p>I have tried regenerating the API key.But didn't solve the issue.</p>\n\n<p>Please help me to solve this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517891518, "post_id": 48635508, "comment_id": 84267694, "body": "What is the error?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517891579, "post_id": 48635508, "comment_id": 84267708, "body": "Completed 401 Unauthorized"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1517891807, "post_id": 48635508, "comment_id": 84267761, "body": "Can you show your code for <code>find_for_database_authentication</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517892166, "post_id": 48635508, "comment_id": 84267860, "body": "Sure, the questions is now with the code"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517892403, "post_id": 48635508, "comment_id": 84267926, "body": "Are your login credentials correct, can you do a <code>puts</code> and see if the <code>create</code> method is getting correct data"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517893120, "post_id": 48635508, "comment_id": 84268114, "body": "is showing  {&quot;status&quot;:422,&quot;error&quot;:&quot;Unprocessable Entity&quot;"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1517893461, "post_id": 48635508, "comment_id": 84268205, "body": "that means your data is malformed, you need to fix the data being sent to the controller"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1517894370, "post_id": 48635508, "comment_id": 84268440, "body": "Can you please show us the actual implementation of your <code>find_for_database_authentication</code>, not just the name of the method?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1517894409, "post_id": 48635508, "comment_id": 84268457, "body": "check allowed parameters for this request. add username, email to permitted params."}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1517970031, "post_id": 48635508, "comment_id": 84308057, "body": "Is <code>params[:username][:email]</code> correctly spelled?"}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 7823348, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/17dd023c0e21968db8d855c33f7d7ada?s=128&d=identicon&r=PG", "display_name": "Matias Carpintini", "link": "https://stackoverflow.com/users/7823348/matias-carpintini"}, "is_accepted": true, "score": -1, "last_activity_date": 1517926329, "creation_date": 1517926329, "answer_id": 48645029, "question_id": 48635508, "link": "https://stackoverflow.com/questions/48635508/devise-find-by-username-or-email/48645029#48645029", "title": "Devise find by username or email", "body": "<p>Try this: <code>User.find_by(username: 'username')</code> or <code>User.find_by(email: 'your@email.com')</code></p>\n"}, {"tags": [], "owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "is_accepted": false, "score": 0, "last_activity_date": 1618391928, "creation_date": 1618391928, "answer_id": 67088939, "question_id": 48635508, "link": "https://stackoverflow.com/questions/48635508/devise-find-by-username-or-email/67088939#67088939", "title": "Devise find by username or email", "body": "<p>I did this by overriding <code>find_for_database_authentication</code> like this:</p>\n<pre><code>class User\n  def self.find_for_database_authentication(auth_hash)\n    self.where(&quot;username = :query OR email = :query&quot;, query: auth_hash[:email]).first\n  end\nend\n</code></pre>\n<p>Nothing more was needed.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 48645029, "answer_count": 2, "score": 0, "last_activity_date": 1618391928, "creation_date": 1517891448, "last_edit_date": 1517892126, "question_id": 48635508, "link": "https://stackoverflow.com/questions/48635508/devise-find-by-username-or-email", "title": "Devise find by username or email", "body": "<p>after setup devise \ni would like to get the user by username or email with in a api session</p>\n\n<p>I passed login to parameters but rails spits out a error</p>\n\n<pre><code>User.find_for_database_authentication(:login =&gt; params[:username][:email])\n</code></pre>\n\n<p>the overwrite of find_for_database_authentication on model is already done.</p>\n\n<pre><code>def self.find_for_database_authentication(warden_conditions)\n</code></pre>\n\n<p>Someone has any hint to spare?</p>\n\n<p><strong>Devise</strong></p>\n\n<pre><code>class Api::SessionsController &lt; Devise::SessionsController\n\n  respond_to :json\n\n  def create\n    resource = User.find_for_database_authentication(:login =&gt; params[:username][:email])\n\n\n\n    if resource.valid_password?(params[:login][:password])\n      sign_in(:user, resource)\n\n      render :json=&gt; {:auth_token=&gt;resource.authentication_token, :email=&gt;resource.email}, :status =&gt; :ok\n      return\n    end\n    invalid_login_attempt\n  end\nend\n</code></pre>\n"}]