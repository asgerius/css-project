[{"tags": ["ruby-on-rails", "ruby", "heroku", "asset-pipeline", "cloudcontrol"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "edited": false, "score": 0, "creation_date": 1439456964, "post_id": 31982487, "comment_id": 51873039, "body": "thanks for the quick reply. I already include <code>config.assets.initialize_on_precompile = false if ENV[&#39;BUILDPACK_RUNNING&#39;]</code>in my application.rb - but this is not working for rails 4 anymore! I also checked .gitignore and it doenst exclude e.g. the public folder. I know check the related question you posted and try to check this one..."}, {"owner": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "edited": false, "score": 0, "creation_date": 1439457548, "post_id": 31982487, "comment_id": 51873389, "body": "checked the answers and they don&#39;t apply unfortunately. is cloudcontrol also offering such a flag to make the env vars available during the build? what i am also wondering: it worked with rails 4.1 but stopped working with rails 4.2.3... :("}, {"owner": {"reputation": 1306, "user_id": 403511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d2be04581f966f9a8daccb9dc67f28?s=128&d=identicon&r=PG", "display_name": "pst", "link": "https://stackoverflow.com/users/403511/pst"}, "reply_to_user": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "edited": false, "score": 0, "creation_date": 1439478488, "post_id": 31982487, "comment_id": 51888348, "body": "No, we&#39;re not providing such a flag. So if it worked before and stopped with the Rails upgrade, something must have changed on the Rails side. Let me know if you find out. Curious to know."}, {"owner": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "edited": false, "score": 0, "creation_date": 1439484984, "post_id": 31982487, "comment_id": 51892610, "body": "I reworked all my commits and identified the issue. With the new version of sprockets (3.x), the manifest file is now named .sprockets-manifest....json - i have the feeling that this is currently not supported by the buildpack. i now use sprockets 2.13.2 and the push works perfectly - my precompiled assets are identified - the manifest file has the &quot;old&quot; name manifest-....json."}, {"owner": {"reputation": 1306, "user_id": 403511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d2be04581f966f9a8daccb9dc67f28?s=128&d=identicon&r=PG", "display_name": "pst", "link": "https://stackoverflow.com/users/403511/pst"}, "reply_to_user": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "edited": false, "score": 0, "creation_date": 1439555566, "post_id": 31982487, "comment_id": 51922573, "body": "I see. Thanks for the info. You might want to answer your own question and then mark your own answer as the correct one."}, {"owner": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "edited": false, "score": 0, "creation_date": 1439570376, "post_id": 31982487, "comment_id": 51932024, "body": "Will do. Thanks for the advice!"}], "tags": [], "owner": {"reputation": 1306, "user_id": 403511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d2be04581f966f9a8daccb9dc67f28?s=128&d=identicon&r=PG", "display_name": "pst", "link": "https://stackoverflow.com/users/403511/pst"}, "is_accepted": false, "score": 0, "last_activity_date": 1439452258, "last_edit_date": 1495539834, "creation_date": 1439452258, "answer_id": 31982487, "question_id": 31977317, "link": "https://stackoverflow.com/questions/31977317/rails-heroku-cloudcontrol-precompiled-assets-manifest-ignored/31982487#31982487", "title": "Rails / Heroku / Cloudcontrol: Precompiled assets manifest ignored", "body": "<p>The Add-on credentials, like databases are not available during build. On <a href=\"https://www.cloudcontrol.com\" rel=\"nofollow noreferrer\">cloudControl</a> you can detect if you're inside the build process by reading the <code>BUILDPACK_RUNNING</code> environment variable. See the <a href=\"https://www.cloudcontrol.com/dev-center/guides/ruby/rubynotes#asset-pipeline\" rel=\"nofollow noreferrer\">Rails notes</a> for an example.</p>\n\n<p>The recommended way is to have the buildpack compile the assets during push. But you need to make sure Rails is not trying to connect to the database. Here's a <a href=\"https://stackoverflow.com/questions/7430578/how-to-universally-skip-database-touches-when-precompiling-assets-on-heroku\">related SO question</a> regarding this.</p>\n\n<p>If you want to precompile locally and this is not being detected I'd suggest to check if the manifest and the precompiled assets have been committed to the repository. A common pitfall is the <code>.gitignore</code> file.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "is_accepted": true, "score": 1, "last_activity_date": 1439570137, "creation_date": 1439570137, "answer_id": 32014796, "question_id": 31977317, "link": "https://stackoverflow.com/questions/31977317/rails-heroku-cloudcontrol-precompiled-assets-manifest-ignored/32014796#32014796", "title": "Rails / Heroku / Cloudcontrol: Precompiled assets manifest ignored", "body": "<p>The usage of the sprockets gem with a version &lt; 3.x fixes this issue for me.</p>\n\n<p>With the new version (> 3.x), the name of the manifest file has changed to <code>.sprockets-manifest-xxxx.json</code>! Due to this the precompiled assets aren't recognized correctly. With the old version the old name <code>.manifest-xxxx.json</code> is used and the precompiled assets are recognized.</p>\n"}], "owner": {"reputation": 31, "user_id": 3397955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8f5c157d12be317e18251cc37a1856?s=128&d=identicon&r=PG&f=1", "display_name": "bgeek", "link": "https://stackoverflow.com/users/3397955/bgeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 32014796, "answer_count": 2, "score": 0, "last_activity_date": 1439570137, "creation_date": 1439423601, "question_id": 31977317, "link": "https://stackoverflow.com/questions/31977317/rails-heroku-cloudcontrol-precompiled-assets-manifest-ignored", "title": "Rails / Heroku / Cloudcontrol: Precompiled assets manifest ignored", "body": "<p>I am currently troubleshooting an issue with precompiling of asset pipeline and pushing it on the server. I am on rails 4.2.3 and ruby 2.2.0!</p>\n\n<p>I precompile my assets with </p>\n\n<pre><code>RAILS_ENV=production bundle exec rake assets:precompile\n</code></pre>\n\n<p>and several files are created successfully, including the .sprockets-manifest-... file.</p>\n\n<p>If i now try to push the app, it looks like the manifest file is not detected - my usual \"assets cannot be compiled\" issue (the reason why i am precompiling) occurs:</p>\n\n<blockquote>\n<pre><code>   Preparing app for Rails asset pipeline\n   Running: rake assets:precompile\n   rake aborted!\n   Mysql2::Error: Can't connect to MySQL server on '127.0.0.1' (111)\n</code></pre>\n</blockquote>\n\n<p>I am pretty sure this worked before but somehow - maybe by upgrading to rails 4.2.3, it fails now...</p>\n\n<p>I appreciate any kind of help!</p>\n"}, {"tags": ["ruby", "selenium", "automation", "watir"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5150445, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9v0GnkFRjOc/AAAAAAAAAAI/AAAAAAAAABA/SXT4JMwxNwE/photo.jpg?sz=128", "display_name": "Cornwellington", "link": "https://stackoverflow.com/users/5150445/cornwellington"}, "edited": false, "score": 0, "creation_date": 1439437701, "post_id": 31978070, "comment_id": 51863996, "body": "I got really excited because I was hoping that would be the answer because that made alot of sense. However in this scenario it wasnt the case, here is the html that I am trying to hit...&lt;button id=&quot;global-new-tweet-button&quot; type=&quot;button&quot; class=&quot;js-global-new-tweet js-tooltip btn primary-btn tweet-btn js-dynamic-tooltip&quot; data-placement=&quot;bottom&quot; data-component-term=&quot;new_tweet_button&quot;&gt;"}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1439429411, "creation_date": 1439429411, "answer_id": 31978070, "question_id": 31977226, "link": "https://stackoverflow.com/questions/31977226/automation-using-watir-button-elements/31978070#31978070", "title": "Automation using Watir button elements", "body": "<p>The HTML for the Compose button is basically the following (NOTE: id attribute removed):</p>\n\n<pre><code>&lt;button tabindex=\"0\" data-action=\"compose\" title=\"Compose\" class=\"btn btn-compose\"&gt;\n</code></pre>\n\n<p>Your stacktrace indicates that you're using this locator:</p>\n\n<pre><code>{:title=&gt;\"compose\", :tag_name=&gt;\"button\"}\n</code></pre>\n\n<p>If you change <code>:title=&gt;\"compose\"</code> to <code>:title=&gt;\"Compose\"</code>, you should be in business.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 5236229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ebd6ee8fa4e153b0e3efacf2d96519?s=128&d=identicon&r=PG&f=1", "display_name": "R Hope", "link": "https://stackoverflow.com/users/5236229/r-hope"}, "is_accepted": false, "score": 0, "last_activity_date": 1439835100, "creation_date": 1439835100, "answer_id": 32056991, "question_id": 31977226, "link": "https://stackoverflow.com/questions/31977226/automation-using-watir-button-elements/32056991#32056991", "title": "Automation using Watir button elements", "body": "<p>Have you tried the following code?</p>\n\n<p><code>button(id:'global-new-tweet-button').when_present.click</code></p>\n\n<p>Maybe you were clicking the button without checking if it is already present on the page.</p>\n"}], "owner": {"reputation": 11, "user_id": 5150445, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9v0GnkFRjOc/AAAAAAAAAAI/AAAAAAAAABA/SXT4JMwxNwE/photo.jpg?sz=128", "display_name": "Cornwellington", "link": "https://stackoverflow.com/users/5150445/cornwellington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439835100, "creation_date": 1439422946, "last_edit_date": 1439471651, "question_id": 31977226, "link": "https://stackoverflow.com/questions/31977226/automation-using-watir-button-elements", "title": "Automation using Watir button elements", "body": "<p>So I have been experimenting with Watir automation scripts using Ruby. I have tried to experiment with different websites, like Twitter, Gmail, and Yahoo. Here is the catch: I am able to open a browser, login, and get to the home page. On all of these whether it is compose a new email or tweet every time I select it with the appropriate ID or Class, it throws an error in the terminal like this...</p>\n\n<blockquote>\n  <p>.rvm/gems/ruby-2.2.1/gems/watir-webdriver-0.8.0/lib/watir-webdriver/elements/element.rb:533:in <code>assert_element_found': unable to locate element, using {:title=&gt;\"compose\", :tag_name=&gt;\"button\"} (Watir::Exception::UnknownObjectException)\n      from /Users/xxx/.rvm/gems/ruby-2.2.1/gems/watir-webdriver-0.8.0/lib/watir-webdriver/elements/element.rb:505:in</code>assert_exists'\n      from /Users/xxx/.rvm/gems/ruby-2.2.1/gems/watir-webdriver-0.8.0/lib/watir-webdriver/elements/element.rb:114:in <code>click'\n      from yahoo_mail.rb:18:in</code>compose_email'\n      from yahoo_mail.rb:27:in `'</p>\n</blockquote>\n\n<p>My question is, are there elements that you simply cannot click or select using Watir automation? </p>\n\n<p>EDIT: How would I be able to hit this to be more specific? I seem to be getting the same results on Yahoo, Gmail, and Twitter when it comes to composing anything after getting logged in. So I how would I hit this button? </p>\n\n<p>button id=\"global-new-tweet-button\" type=\"button\" class=\"js-global-new-tweet js-tooltip btn primary-btn tweet-btn js-dynamic-tooltip\" data-placement=\"bottom\" data-component-term=\"new_tweet_button\"> </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rake"], "comments": [{"owner": {"reputation": 125, "user_id": 5220345, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dd053cf03282f5895bb847bac135f5b?s=128&d=identicon&r=PG&f=1", "display_name": "s.matty", "link": "https://stackoverflow.com/users/5220345/s-matty"}, "edited": false, "score": 0, "creation_date": 1439421906, "post_id": 31977035, "comment_id": 51860368, "body": "this happened when i did rake db:migrate"}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 4, "creation_date": 1439427797, "post_id": 31977035, "comment_id": 51861712, "body": "Show the migration that it is crashing on."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1439430290, "post_id": 31977035, "comment_id": 51862283, "body": "You&#39;re dividing my zero in <code>20150601054955_add_auto_to_project_person.rb</code> so what does that look like?"}, {"owner": {"reputation": 206, "user_id": 4384401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02df440328950c2ca558543c61d346a0?s=128&d=identicon&r=PG&f=1", "display_name": "Sudarshan Dhokale", "link": "https://stackoverflow.com/users/4384401/sudarshan-dhokale"}, "edited": false, "score": 1, "creation_date": 1439444455, "post_id": 31977035, "comment_id": 51866088, "body": "can you add your migration file here??"}], "owner": {"reputation": 125, "user_id": 5220345, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dd053cf03282f5895bb847bac135f5b?s=128&d=identicon&r=PG&f=1", "display_name": "s.matty", "link": "https://stackoverflow.com/users/5220345/s-matty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1439850119, "creation_date": 1439421734, "last_edit_date": 1439850119, "question_id": 31977035, "link": "https://stackoverflow.com/questions/31977035/rake-dbmigrate-errors", "title": "rake db:migrate errors", "body": "<p>Below is the <code>database.yml</code>. I have installed <code>postgresql</code> as required. I have created username and password as in <code>database.yml</code>.\nI encounter following error while I run <code>rake db:migrate</code>:</p>\n\n<pre><code>maringanti-mbp:xpm smaringanti$ rake db:migrate\n==  AddAutoToProjectPerson: migrating =========================================\n-- change_table(:project_people)\n   -&gt; 0.0008s\nrake aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\ndivided by 0/Users/smaringanti/xpm/db/migrate/20150601054955_add_auto_to_project_person.rb:33:in `/'\n/Users/smaringanti/xpm/db/migrate/20150601054955_add_auto_to_project_person.rb:33:in `calc_effort'\n/Users/smaringanti/xpm/db/migrate/20150601054955_add_auto_to_project_person.rb:19:in `up'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:534:in `up'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:574:in `exec_migration'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:555:in `block (2 levels) in migrate'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:554:in `block in migrate'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:294:in `with_connection'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:553:in `migrate'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:709:in `migrate'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:959:in `block in execute_migration_in_transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:1005:in `block in ddl_transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `block in transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/connection_adapters/abstract/database_statements.rb:210:in `within_new_transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/connection_adapters/abstract/database_statements.rb:202:in `transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/transactions.rb:209:in `transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:1005:in `ddl_transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:958:in `execute_migration_in_transaction'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:920:in `block in migrate'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:916:in `each'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:916:in `migrate'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:764:in `up'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/migration.rb:742:in `migrate'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/gems/activerecord-4.0.2/lib/active_record/railties/databases.rake:42:in `block (2 levels) in &lt;top (required)&gt;'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/bin/ruby_executable_hooks:15:in `eval'\n/Users/smaringanti/.rvm/gems/ruby-2.0.0-p643/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; db:migrate\n(See full trace by running task with --trace)\n</code></pre>\n\n<p><strong>And this is my migration file</strong></p>\n\n<pre><code>class AddAutoToProjectPerson &lt; ActiveRecord::Migration\n  def self.up\n    change_table :project_people do |t|\n      t.integer :auto_effort\n    end\n    pp_list = Array.new\n    current_id = nil\n    ProjectPerson.where(\"percent_effort IS NULL and finish IS NULL\").order(:user_id).each do |pp|\n      if pp.user_id != current_id\n        puts current_id\n        unless current_id.nil?\n          calc_effort(pp_list, current_id)\n        end\n        current_id = pp.user_id\n        pp_list.clear\n      end\n      pp_list &lt;&lt; pp\n    end\n    calc_effort(pp_list, current_id)\n  end\n\n  def self.down\n    change_table :project_people do |t|\n      t.remove :auto_effort\n    end\n  end\n\n  def self.calc_effort (pp_list, current_id)\n    current_total = ProjectPerson.where(\"percent_effort IS NOT NULL and finish IS NULL\").where(user_id: current_id).group(:user_id).order(:user_id)\n      .select(\"SUM(percent_effort) as assigned_effort\").first\n    value = current_total.nil? ? 100 : 100 - current_total.assigned_effort\n    value = 0 if value &lt; 0 \n    value = value / pp_list.size rescue 0\n    for item in pp_list\n      item.auto_effort = value   \n      item.save\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 232, "user_id": 5221280, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55c26486302408db0d30336c8db94e06?s=128&d=identicon&r=PG&f=1", "display_name": "whataboutme1", "link": "https://stackoverflow.com/users/5221280/whataboutme1"}, "edited": false, "score": 0, "creation_date": 1439421295, "post_id": 31976932, "comment_id": 51860195, "body": "Just something to add for example 2.. obviously the code will work find without .length while example 1 will not. don&#39;t get it.."}, {"owner": {"reputation": 3895, "user_id": 1110171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ln0nD.jpg?s=128&g=1", "display_name": "fruqi", "link": "https://stackoverflow.com/users/1110171/fruqi"}, "edited": false, "score": 0, "creation_date": 1439428878, "post_id": 31976932, "comment_id": 51861972, "body": "In example 2, counter is a number not the array. And number doesn&#39;t have <code>length</code> method. That&#39;s why it receive an error."}, {"owner": {"reputation": 3895, "user_id": 1110171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ln0nD.jpg?s=128&g=1", "display_name": "fruqi", "link": "https://stackoverflow.com/users/1110171/fruqi"}, "edited": false, "score": 0, "creation_date": 1439429218, "post_id": 31976932, "comment_id": 51862050, "body": "And the length method&#39;s purpose is to count the length / size of the array. That&#39;s it. <a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-length\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.2/Array.html#method-i-length</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1439506714, "post_id": 31976932, "comment_id": 51902886, "body": "Don&#39;t forget to select an answer if you find any of them helpful."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": -1, "last_activity_date": 1439421270, "creation_date": 1439421270, "answer_id": 31976962, "question_id": 31976932, "link": "https://stackoverflow.com/questions/31976932/length-method-to-be-explained/31976962#31976962", "title": "`length` method to be explained", "body": "<p>Because, by default, <code>length</code> is not defined on <code>Fixnum</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 45184, "user_id": 337, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/61fcda6377c3941f33130902c15ba27e?s=128&d=identicon&r=PG", "display_name": "Larsenal", "link": "https://stackoverflow.com/users/337/larsenal"}, "is_accepted": false, "score": 0, "last_activity_date": 1439421296, "creation_date": 1439421296, "answer_id": 31976966, "question_id": 31976932, "link": "https://stackoverflow.com/questions/31976932/length-method-to-be-explained/31976966#31976966", "title": "`length` method to be explained", "body": "<p><strong>Example 1</strong> uses length to give you the length of the array <code>counter</code>.</p>\n\n<p><strong>Example 2</strong>, executed independently, doesn't make any sense.  A <code>Fixnum</code> has no method <code>length</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1258, "user_id": 1852651, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rfKGa.jpg?s=128&g=1", "display_name": "Graham S.", "link": "https://stackoverflow.com/users/1852651/graham-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1439423575, "creation_date": 1439423575, "answer_id": 31977315, "question_id": 31976932, "link": "https://stackoverflow.com/questions/31976932/length-method-to-be-explained/31977315#31977315", "title": "`length` method to be explained", "body": "<p>To explain in the simplest way possible:</p>\n\n<p>If it's an array, it can technically \"measure\" the contents with <code>.length</code>.\nFor example, if I have 3 eggs in my basket, and I used <code>.length</code> on it, I would get the answer 3, right?</p>\n\n<p>Now if we had only one egg and I <em>drew</em> a 3 on it, and I told you to count the amount of eggs, it essentially would always evaluate to one, which isn't really what you're trying to accomplish, so Ruby throws an exception because it doesn't allow this behavior. (It does not allow <code>.length</code> to be called on a <code>Fixnum</code>)</p>\n\n<p>So in the <strong>first example</strong>, you can think of it this way:</p>\n\n<pre><code> #- Basket                  =&gt; your array (counter[])\n #- Egg                     =&gt; an element in the array\n #- A Painted number on egg =&gt; the *value* of the element in the array\n\n# I have an empty basket\nbasket = []\n\n# While my basket has less than 3 eggs, keep letting the user add more eggs\nwhile basket.length &lt; 3\n\n  puts(\"Tell me a cool thing!\")\n\n  # Get an egg from the user\n  egg = gets.chomp             #=&gt; gets.chomp is the number the user paints on the egg\n\n  # Put that egg in the basket\n  basket.push(egg)\nend\n\n# So how many eggs are in the basket?\nputs basket.length   #=&gt; 3\n</code></pre>\n\n<p>I am going to skip the rest for the sake of simplicity and go straight to your second example:</p>\n\n<p><strong>Second example</strong>\nSame scenario. Baskets, eggs, and paint.</p>\n\n<pre><code># Hey! What happened to the basket? Arrays are baskets! This is just some thing! I guess you want to PAINT a 1 on the basket?\nbasket = 1\n\n# While my only basket that has a 1 painted on it is less than 11 baskets\nwhile basket.length &lt; 11\n\n   # Show me the number that painted on my only basket\n   puts basket\n\n   # Now paint a 2 on my only basket\n   basket += 1\nend\n</code></pre>\n\n<p>Notice the part where I said <em>my only</em> basket? You will always have only 1 basket in this scenario. All we are doing is painting a different number on it on every loop.</p>\n\n<p><strong>TL;DR</strong></p>\n\n<p><code>Fixnum</code>s do not have a <code>.length</code> method. If it did, almost every loop would be an infinite loop because 1 &lt; 11 will never evaluate to false. This is because there is only <em>one</em> Fixnum, the value it represents is essentially irrelevant, and is basicaly a marking painted on the outside of a box. </p>\n\n<p><strong>If you paint 5 on a box, it does not mean you have 5 boxes.</strong></p>\n\n<p>Arrays have a <code>.length</code> method because you can count the number of things inside them, the same way you can count the number of eggs in a basket.</p>\n\n<p>Hope I helped!</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1447743326, "last_edit_date": 1447743326, "creation_date": 1439425775, "answer_id": 31977618, "question_id": 31976932, "link": "https://stackoverflow.com/questions/31976932/length-method-to-be-explained/31977618#31977618", "title": "`length` method to be explained", "body": "<p><strong>Re Example 1</strong></p>\n\n<p>Cosider this example array:</p>\n\n<pre><code>array_one = [1, 3, 4, 8]\n</code></pre>\n\n<p>How many elements does it have? 4. So if I call the <code>.length</code> method on it:</p>\n\n<pre><code>array_one.length #=&gt; 4\n</code></pre>\n\n<p>'4' is returned so <code>.length</code> simply returns the number of elements in an array. And if you think about it, it's kind of like its length using elements as units.</p>\n\n<p>Following on from that, <em>counter</em> is in fact an empty <strong>array</strong>:</p>\n\n<pre><code>counter = []\n</code></pre>\n\n<p>How many elements? zero, therefore</p>\n\n<pre><code>counter.length #=&gt; 0.\n</code></pre>\n\n<p>'0' is returned.</p>\n\n<hr>\n\n<p><strong>Re Example 2</strong></p>\n\n<p>In this case <code>counter = 1</code> (and has nothing to do with the counter in example 1). So you've assigned the the <strong>number</strong> 1 to the variable <strong>counter</strong>. This is definitely not an array. In short you cannot apply the <code>.length</code> method on numbers. So for example trying to apply .<code>length</code> in the following examples:</p>\n\n<pre><code>2.length #=&gt; NoMethodError...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>444.length #=&gt; NoMethodError...\n</code></pre>\n\n<p>Here, you're trying to apply the <code>.length</code> method on numbers, which by default makes no sense to Ruby and returns NoMethodError. So in your example:</p>\n\n<pre><code>counter.length #=&gt; NoMethodError\n</code></pre>\n\n<p>gives an error because you're trying to call <code>.length</code> method on a number, which you can't do.</p>\n\n<p>In Ruby whole numbers belong to the <em>FixNum class</em> which by default has no <code>.length</code> method (hence the NoMethodError). If I were you, I'd try to get a greater understanding of classes and methods if you can. It will be really useful for you.</p>\n"}], "owner": {"reputation": 232, "user_id": 5221280, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55c26486302408db0d30336c8db94e06?s=128&d=identicon&r=PG&f=1", "display_name": "whataboutme1", "link": "https://stackoverflow.com/users/5221280/whataboutme1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 31977315, "answer_count": 4, "score": -2, "last_activity_date": 1447743326, "creation_date": 1439421036, "last_edit_date": 1439421440, "question_id": 31976932, "link": "https://stackoverflow.com/questions/31976932/length-method-to-be-explained", "title": "`length` method to be explained", "body": "<p>Example 1 is an array loop:</p>\n\n<p><strong>Example 1</strong></p>\n\n<pre><code>counter = []\nwhile counter.length &lt; 3\n  puts(\"Tell me a cool thing!\")\n  counter2 = gets.chomp\n  counter.push(counter2)\nend\nputs(\"Here's some cool things in backward order:\")\ncounter3 = counter.length - 1\nwhile counter3 &gt;= 0\n  puts(counter[counter3])\n  counter3 = counter3 - 1\nend\n</code></pre>\n\n<p>The second example is a loop:</p>\n\n<p><strong>Example 2</strong></p>\n\n<pre><code>counter = 1\nwhile counter.length &lt; 11\n  puts counter\n  counter += 1\nend\n</code></pre>\n\n<p>With <code>length</code> applied to example 2, I receive an error. Why? What is the purpose of <code>length</code> besides counting the total length of integer?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "activerecord", "rails-api"], "comments": [{"owner": {"reputation": 848, "user_id": 2802660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VhMgE.jpg?s=128&g=1", "display_name": "Christopher Milne", "link": "https://stackoverflow.com/users/2802660/christopher-milne"}, "edited": false, "score": 0, "creation_date": 1439421978, "post_id": 31976921, "comment_id": 51860385, "body": "Where is your controller code?"}, {"owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 0, "creation_date": 1439423191, "post_id": 31976921, "comment_id": 51860726, "body": "This is happening because the foreign_key and association have the same name.  Can you change your parameter names?  eg - can you make it home_team_id: instead of home_team: ?  Change the foreign key to home_team_id"}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 1732919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f8f02ccd108c57e2d190b38acb94798?s=128&d=identicon&r=PG", "display_name": "digitalfrenchfry", "link": "https://stackoverflow.com/users/1732919/digitalfrenchfry"}, "edited": false, "score": 0, "creation_date": 1439557050, "post_id": 31977520, "comment_id": 51923539, "body": "This worked, I also had to change my <code>json</code> message and the permitted variables."}], "tags": [], "owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "is_accepted": true, "score": 0, "last_activity_date": 1439425061, "creation_date": 1439425061, "answer_id": 31977520, "question_id": 31976921, "link": "https://stackoverflow.com/questions/31976921/posting-json-to-rails-with-ids-results-in-error/31977520#31977520", "title": "POSTing JSON to rails with IDs results in Error", "body": "<p>There is a basic set-up here that is missing.</p>\n\n<p>The schema should not be <code>\"home_team\"</code> and <code>\"away_team\"</code>, but rather <code>\"home_team_id\"</code> and <code>\"away_team_id\"</code></p>\n\n<p>Also in the Models, there is no need to define <code>foreign_key: \"home_team\"</code> or <code>foreign_key: \"away_team\"</code>. Rails convention (I believe) will assume that <code>belongs_to :home_team, :class_name =&gt; \"Team\"</code> has a foreign key of <code>\"home_team_id\"</code></p>\n\n<p>If you think about it at the Database level (Schema), the Database does not store all the information about the <code>home_team</code> in the game table. It only has a <code>home_game_id</code> so it references the <code>home_game</code>. This way, the Database does not need to duplicate a bunch of data for each association.</p>\n\n<p>There may be other errors in the Controller once this is fixed, but what that error message is telling you is that it gets a Team class rather than a Fixnum, so somewhere it's probably calling <code>game.home_team</code> and doing something with it, but you are simply pulling up the home_team ID from your database, not an association.</p>\n"}], "owner": {"reputation": 174, "user_id": 1732919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f8f02ccd108c57e2d190b38acb94798?s=128&d=identicon&r=PG", "display_name": "digitalfrenchfry", "link": "https://stackoverflow.com/users/1732919/digitalfrenchfry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 31977520, "answer_count": 1, "score": 0, "last_activity_date": 1439556837, "creation_date": 1439420959, "last_edit_date": 1439556837, "question_id": 31976921, "link": "https://stackoverflow.com/questions/31976921/posting-json-to-rails-with-ids-results-in-error", "title": "POSTing JSON to rails with IDs results in Error", "body": "<p>I have a <code>game</code> and two <code>team</code>s. I want to be able to <code>POST</code> something like this to <code>/games</code> --</p>\n\n<pre><code>{\"game\":{\"home_team\":1,\"away_team\":2,\"time\":\"Wed, 12 Aug 2015 08:08:08 -0500\",\"winner\":1,\"home_score\":2,\"away_score\":1}}\n</code></pre>\n\n<p>my <code>game.rb</code> model looks something like this --</p>\n\n<pre><code>class Game &lt; ActiveRecord::Base\n  belongs_to :home_team_id, :class_name =&gt; \"Team\"\n  belongs_to :away_team_id, :class_name =&gt; \"Team\"\n  belongs_to :winner_id, :class_name =&gt; \"Team\"\n...\nend\n</code></pre>\n\n<p>and my <code>team.rb</code> model looks like this --</p>\n\n<pre><code>class Team &lt; ActiveRecord::Base\n  has_many :home_games, class_name: \"Game\"\n  has_many :away_games, class_name: \"Game\"\n  has_many :winners, class_name: \"Game\"\n...\nend\n</code></pre>\n\n<p>The schema for <code>game</code> is as follows --</p>\n\n<pre><code>  create_table \"games\", force: :cascade do |t|\n    t.integer  \"home_team_id\"\n    t.integer  \"away_team_id\"\n    t.datetime \"time\"\n    t.integer  \"home_score\"\n    t.integer  \"away_score\"\n    t.integer  \"winner_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  add_index \"games\", [\"away_team_id\"], name: \"index_games_on_away_team\", using: :btree\n  add_index \"games\", [\"home_team_id\"], name: \"index_games_on_home_team\", using: :btree\n  add_index \"games\", [\"winner_id\"], name: \"index_games_on_winner\", using: :btree\n</code></pre>\n\n<p>the error I get is <code>Team(#70124766940300) expected, got Fixnum(#70124749378140)\"</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 12784, "user_id": 1373987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bca7defe7b8087d8e261d32b29cf425e?s=128&d=identicon&r=PG", "display_name": "joshua.paling", "link": "https://stackoverflow.com/users/1373987/joshua-paling"}, "edited": false, "score": 0, "creation_date": 1439420999, "post_id": 31976884, "comment_id": 51860116, "body": "What&#39;s wrong with what you currently have? Is it working? If not, what&#39;s the error?"}, {"owner": {"reputation": 59, "user_id": 2166807, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea4c301271495a243c2fb265b70159a9?s=128&d=identicon&r=PG", "display_name": "Jason Attwood", "link": "https://stackoverflow.com/users/2166807/jason-attwood"}, "reply_to_user": {"reputation": 12784, "user_id": 1373987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bca7defe7b8087d8e261d32b29cf425e?s=128&d=identicon&r=PG", "display_name": "joshua.paling", "link": "https://stackoverflow.com/users/1373987/joshua-paling"}, "edited": false, "score": 0, "creation_date": 1439421581, "post_id": 31976884, "comment_id": 51860271, "body": "when I run the test it just says one failed example but it should be passing"}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 2166807, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea4c301271495a243c2fb265b70159a9?s=128&d=identicon&r=PG", "display_name": "Jason Attwood", "link": "https://stackoverflow.com/users/2166807/jason-attwood"}, "is_accepted": false, "score": 0, "last_activity_date": 1439421919, "creation_date": 1439421919, "answer_id": 31977064, "question_id": 31976884, "link": "https://stackoverflow.com/questions/31976884/testing-a-method-with-rspec-rails/31977064#31977064", "title": "Testing a method with RSpec? (Rails)", "body": "<p>Ok I figured it out this firstly I shouldn't of been using 'should' its better to use 'expect' and that was the wrong way of writing it :</p>\n\n<pre><code>describe LeagueModule::ScrapeProPlayers do\n  it \"Check for any pro players\" do\n     host = Object.new.extend(LeagueModule::ScrapeProPlayers)\n     result = host.scrape\n     expect(result.length).to eq(0)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 2166807, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea4c301271495a243c2fb265b70159a9?s=128&d=identicon&r=PG", "display_name": "Jason Attwood", "link": "https://stackoverflow.com/users/2166807/jason-attwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439421919, "creation_date": 1439420761, "question_id": 31976884, "link": "https://stackoverflow.com/questions/31976884/testing-a-method-with-rspec-rails", "title": "Testing a method with RSpec? (Rails)", "body": "<p>My question is I have a module which is going back to a controller and I want to test it with RSpec but its not a class / there is no class inside the module its just a method so how would I test for example the methods return values , here is what I currently have in my module,</p>\n\n<pre><code>require 'rspec'\n\nmodule LeagueModule\n  module ScrapeProPlayers\n\n    def scrape\n      players = []\n      return players\n    end\n\n  end\nend\n\ndescribe LeagueModule::ScrapeProPlayers do\n  it \"Check for any pro players\" do\n     host = Object.new.extend(LeagueModule::ScrapeProPlayers)\n     host.scrape.should == 0\n\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "rspec"], "comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439421799, "post_id": 31976867, "comment_id": 51860337, "body": "Could you try running with full backtrace, e.g. <code>rspec -b &#47;spec&#47;mailers&#47;user_mailer_spec.rb</code>, and post the result here"}, {"owner": {"reputation": 1258, "user_id": 1852651, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rfKGa.jpg?s=128&g=1", "display_name": "Graham S.", "link": "https://stackoverflow.com/users/1852651/graham-s"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439422427, "post_id": 31976867, "comment_id": 51860500, "body": "Just added it for ya."}], "answers": [{"tags": [], "owner": {"reputation": 1258, "user_id": 1852651, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rfKGa.jpg?s=128&g=1", "display_name": "Graham S.", "link": "https://stackoverflow.com/users/1852651/graham-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1439426013, "creation_date": 1439426013, "answer_id": 31977654, "question_id": 31976867, "link": "https://stackoverflow.com/questions/31976867/nomethoderror-undefined-method-addrs-for-mailunstructuredfield0x007fc5c6/31977654#31977654", "title": "NoMethodError: undefined method `addrs&#39; for #&lt;Mail::UnstructuredField:0x007fc5c680bf18&gt;", "body": "<p>Excellent! I was able to figure it out.</p>\n\n<p>Issues was in my actual <code>UserMailer</code> class (in <code>/app/mailers/user_mailer.rb</code>).</p>\n\n<p>The <code>default from:</code> statement at the top did not match with my tests.</p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  default from: \"XXXXXXXX2@gmail.com\"   #  &lt;= This was the culprit\n\n  def activate_account(user)\n    @user = user\n    mail(:to =&gt; @user.email, :subject =&gt; \"Please confirm to activate your account.\")\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "is_accepted": false, "score": 0, "last_activity_date": 1518819954, "creation_date": 1518819954, "answer_id": 48835720, "question_id": 31976867, "link": "https://stackoverflow.com/questions/31976867/nomethoderror-undefined-method-addrs-for-mailunstructuredfield0x007fc5c6/48835720#48835720", "title": "NoMethodError: undefined method `addrs&#39; for #&lt;Mail::UnstructuredField:0x007fc5c680bf18&gt;", "body": "<p>I recently ran into this and my problem was that i hadn't provided a proper email address in the <code>:to</code> field</p>\n\n<p>By mistake I had -</p>\n\n<pre><code>mail(to: @user)\n</code></pre>\n\n<p>Instead of </p>\n\n<pre><code>mail(to: @user.email)\n</code></pre>\n"}], "owner": {"reputation": 1258, "user_id": 1852651, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rfKGa.jpg?s=128&g=1", "display_name": "Graham S.", "link": "https://stackoverflow.com/users/1852651/graham-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518819954, "creation_date": 1439420653, "last_edit_date": 1439421921, "question_id": 31976867, "link": "https://stackoverflow.com/questions/31976867/nomethoderror-undefined-method-addrs-for-mailunstructuredfield0x007fc5c6", "title": "NoMethodError: undefined method `addrs&#39; for #&lt;Mail::UnstructuredField:0x007fc5c680bf18&gt;", "body": "<p>So I was testing emails with RSpec and the <code>email_spec</code> gem and I keep coming across this error that leaves me with no real clue as to what is causing it. </p>\n\n<p>I am very new to RSpec and testing in general. When I googled this the error I found <a href=\"https://github.com/mikel/mail/issues/547\" rel=\"nofollow\">one post</a> that was similar to this error as well as a <a href=\"http://www.rubydoc.info/github/mikel/mail/Mail/UnstructuredField\" rel=\"nofollow\">brief documentation page</a> on the error (which came off to me as very ambiguous).</p>\n\n<p>I believe the reason is due to a possibly outdated gem or method from <code>email_spec</code>, but I am just <em>spec</em>ulating (there's a pun for your time). </p>\n\n<p>This is the error I keep receiving (I redacted my email for this post):</p>\n\n<pre><code>1) UserMailer it sends an activation email when the user signs up should be delivered from XXXXXXXX@gmail.com\n Failure/Error: it { should deliver_from \"XXXXXXXX@gmail.com\" }\n NoMethodError:\n   undefined method `addrs' for #&lt;Mail::UnstructuredField:0x007fc5c680bf18&gt;\n # ./spec/mailers/user_mailer_spec.rb:12:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Few things to point out:</p>\n\n<ul>\n<li>I am not directly referencing the <code>addrs</code> method in any of my tests (so I believe)</li>\n<li>I have included <code>Email::Helpers</code> and <code>Email::Matchers</code> in my <code>config/test.rb</code> file.</li>\n</ul>\n\n<p>Here is my UserMailer test:</p>\n\n<pre><code>require \"spec_helper\"\nrequire \"email_spec\"\n\ndescribe UserMailer do\n\n  describe \"it sends an activation email when the user signs up\" do\n    user = FactoryGirl.build(:user)\n\n    subject { UserMailer.activate_account(user) }\n    it { should deliver_to user.email }\n\n\n    # Error seems to be occurring from the \"deliver_from\" method\n    it { should deliver_from \"XXXXXXX2@gmail.com\" }\n\n\n    it { should have_subject \"Please confirm to activate your account.\" }\n    it { should have_body_text \"Hi, #{user.first_name}\" }\n    it { should have_body_text \"Confirm Your Account\" }\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>I would just like to be helped and pointed in the right direction as to what is causing this issue so I may take the appropriate steps to resolve it. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Added the backtrace as requested.</p>\n\n<pre><code># /Library/Ruby/Gems/2.0.0/gems/mail-2.6.3/lib/mail/field.rb:189:in `method_missing'\n # /Library/Ruby/Gems/2.0.0/gems/email_spec-1.6.0/lib/email_spec/matchers.rb:92:in `block in matches?'\n # /Library/Ruby/Gems/2.0.0/gems/email_spec-1.6.0/lib/email_spec/matchers.rb:6:in `address_array'\n # /Library/Ruby/Gems/2.0.0/gems/email_spec-1.6.0/lib/email_spec/matchers.rb:92:in `matches?'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-expectations-2.99.2/lib/rspec/expectations/handler.rb:24:in `handle_matcher'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/memoized_helpers.rb:77:in `should'\n # ./spec/mailers/user_mailer_spec.rb:12:in `block (3 levels) in &lt;top (required)&gt;'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/extensions/instance_eval_with_args.rb:16:in `instance_exec'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/extensions/instance_eval_with_args.rb:16:in `instance_eval_with_args'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example.rb:116:in `block in run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example.rb:178:in `call'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example.rb:178:in `run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/extensions/instance_eval_with_args.rb:16:in `instance_exec'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/extensions/instance_eval_with_args.rb:16:in `instance_eval_with_args'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example.rb:241:in `instance_eval_with_args'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/hooks.rb:106:in `block (2 levels) in run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/hooks.rb:108:in `call'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/hooks.rb:108:in `run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/hooks.rb:446:in `run_hook'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:463:in `run_around_each_hooks'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example.rb:250:in `with_around_each_hooks'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example.rb:113:in `run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:515:in `block in run_examples'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:511:in `map'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:511:in `run_examples'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:496:in `run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:497:in `block in run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:497:in `map'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/example_group.rb:497:in `run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/command_line.rb:24:in `block (2 levels) in run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/command_line.rb:24:in `map'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/command_line.rb:24:in `block in run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/reporter.rb:58:in `report'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/command_line.rb:21:in `run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/runner.rb:103:in `run'\n # /Library/Ruby/Gems/2.0.0/gems/rspec-core-2.99.2/lib/rspec/core/runner.rb:17:in `block in autorun'\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 1032, "user_id": 272543, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c2e7b0d61c1a21cd3de17aab44daa311?s=128&d=identicon&r=PG", "display_name": "Zakwan", "link": "https://stackoverflow.com/users/272543/zakwan"}, "edited": false, "score": 0, "creation_date": 1439419484, "post_id": 31976576, "comment_id": 51859718, "body": "The difference is that you are using <code>puts</code> in 2nd method. just remove it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1439506789, "post_id": 31976576, "comment_id": 51902910, "body": "Don&#39;t forget to select an answer if you find any of them helpful."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1439419955, "last_edit_date": 1439419955, "creation_date": 1439419567, "answer_id": 31976663, "question_id": 31976576, "link": "https://stackoverflow.com/questions/31976576/select-method-on-array-providing-different-results/31976663#31976663", "title": "select method on array providing different results", "body": "<ul>\n<li>Regarding the output, the first method <code>puts</code> the selected array whereas the second method <code>puts</code> each evaluation of the condition (regardless of whether the condition is met).</li>\n<li>Regarding the selected array, the block in the first method returns the evaluation of <code>number == 6</code>, which leads to the selected array <code>[6, 6, 6, 6]</code>, whereas the block in the second method returns the evaluation of <code>puts</code>, which is <code>nil</code>, which leads to the selected array <code>[]</code>.</li>\n<li>Regarding the return value of the entire code, the first method returns the evaluation of <code>puts</code>, which is <code>nil</code>, whereas the second method returns the selected array <code>[]</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 390, "user_id": 2714532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b237c0974800e4e365020f3786647444?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Jin", "link": "https://stackoverflow.com/users/2714532/fan-jin"}, "is_accepted": false, "score": 3, "last_activity_date": 1439419689, "last_edit_date": 1592644375, "creation_date": 1439419689, "answer_id": 31976688, "question_id": 31976576, "link": "https://stackoverflow.com/questions/31976576/select-method-on-array-providing-different-results/31976688#31976688", "title": "select method on array providing different results", "body": "<p>Described in the <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\">ruby doc</a>,</p>\n<blockquote>\n<p>select \u2192 an_enumerator</p>\n<p>Returns an array containing all elements of enum for which the given\nblock returns a true value.</p>\n</blockquote>\n<pre><code>[1,2,3,4,5,6,6,6,6].select {|number| number == 6 }\n</code></pre>\n<p>returns as intended (i.e, return an <code>array</code> where the <code>number == 6</code>)</p>\n<pre><code>[6, 6, 6, 6]\n</code></pre>\n<p>In the second method, you're simply outputting the result of the comparison, which will result in a boolean.</p>\n"}], "owner": {"reputation": 159, "user_id": 1463075, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/66d19b78703437a5f0c1a4d9814478b4?s=128&d=identicon&r=PG", "display_name": "j5r", "link": "https://stackoverflow.com/users/1463075/j5r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1439419955, "creation_date": 1439418960, "last_edit_date": 1439419286, "question_id": 31976576, "link": "https://stackoverflow.com/questions/31976576/select-method-on-array-providing-different-results", "title": "select method on array providing different results", "body": "<p>The following are identical:</p>\n\n<p><strong>First method:</strong></p>\n\n<pre><code>puts [1,2,3,4,5,6,6,6,6].select {|number| number == 6 }\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>6\n6\n6\n6\n</code></pre>\n\n<p><strong>Second method:</strong></p>\n\n<pre><code>array = [1,2,3,4,5,6,6,6,6]\narray.select do |number|\n  puts number == 6\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>false\nfalse\nfalse\nfalse\nfalse\ntrue\ntrue\ntrue\ntrue\n</code></pre>\n\n<p>Why don't I get the same result for each? How do I go about getting the same result? Please explain what is going on.</p>\n"}, {"tags": ["ruby", "irb", "local-variables"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1439420865, "post_id": 31976543, "comment_id": 51860079, "body": "Sometimes you are writing <code>__send__</code>, and sometimes <code>send</code>. It is bad to be inconsistent."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1439420906, "post_id": 31976543, "comment_id": 51860090, "body": "You don&#39;t need <code>self.</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1439506762, "post_id": 31976543, "comment_id": 51902903, "body": "Don&#39;t forget to select an answer if you find any of them helpful."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439420665, "post_id": 31976726, "comment_id": 51860017, "body": "Perhaps you meant <code>a = 1</code> to show that that does not affect the code, but for the purpose of presenting a working code, you don&#39;t need that line."}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439420716, "post_id": 31976726, "comment_id": 51860040, "body": "@sawa You&#39;re correct on both counts. Should have clarified I suppose."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1439421084, "post_id": 31976726, "comment_id": 51860137, "body": "Or alternatively OP could define <code>list_vars</code> as an instance method of <code>Binding</code> and then write <code>binding.list_vars</code> instead."}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 2, "last_activity_date": 1439420742, "last_edit_date": 1439420742, "creation_date": 1439419943, "answer_id": 31976726, "question_id": 31976543, "link": "https://stackoverflow.com/questions/31976543/listing-the-local-variables-in-irb/31976726#31976726", "title": "listing the local variables in irb", "body": "<p>You could pass the binding into the method.</p>\n\n<pre><code>class Object\n  def list_vars(b)\n    a = 1 # This is only here to demonstrate. It's not necessary for it to work.\n    b.local_variables.each do |var|\n      puts \"#{var} = \" + b.local_variable_get(var).inspect\n    end\n  end\nend\n\nx = 1\nlist_vars(binding)\n\ndef foo\n  z = 1\n  list_vars(binding)\nend\n\nfoo\n</code></pre>\n\n<p>Will output:</p>\n\n<pre><code>x = 1\nz = 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1439420742, "creation_date": 1439420742, "answer_id": 31976880, "question_id": 31976543, "link": "https://stackoverflow.com/questions/31976543/listing-the-local-variables-in-irb/31976880#31976880", "title": "listing the local variables in irb", "body": "<p>Philip Hallstrom gives you a code that you can use to solve your problem, but does not answer your question. The real answer to your question is: Yes.</p>\n"}, {"comments": [{"owner": {"reputation": 4605, "user_id": 1067339, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3479b6831ccaa6263ed5ca7dab3ba972?s=128&d=identicon&r=PG", "display_name": "Qqwy", "link": "https://stackoverflow.com/users/1067339/qqwy"}, "edited": false, "score": 0, "creation_date": 1439540214, "post_id": 31977031, "comment_id": 51913269, "body": "I ended up using the <code>binding_of_caller</code> gem, which enabled me to use the syntax of your second version, without needing to pass the binding in directly. Thank you for this clear answer!"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 4605, "user_id": 1067339, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3479b6831ccaa6263ed5ca7dab3ba972?s=128&d=identicon&r=PG", "display_name": "Qqwy", "link": "https://stackoverflow.com/users/1067339/qqwy"}, "edited": false, "score": 1, "creation_date": 1439550720, "post_id": 31977031, "comment_id": 51919693, "body": "Note that this gem works by basically breaking the encapsulation of the interpreter and ripping out its internals which necessarily ties it to a specific version of a specific interpreter. The gem contains versions for YARV and Rubinius, but will not work on JRuby, IronRuby, MagLev, MRuby,  Opal, MacRuby, or any other."}, {"owner": {"reputation": 4605, "user_id": 1067339, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3479b6831ccaa6263ed5ca7dab3ba972?s=128&d=identicon&r=PG", "display_name": "Qqwy", "link": "https://stackoverflow.com/users/1067339/qqwy"}, "edited": false, "score": 0, "creation_date": 1439551028, "post_id": 31977031, "comment_id": 51919880, "body": "For the testing and debugging purposes I will end up using this, it will be fine, but it is something very important to note. Thank you!"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1439421718, "creation_date": 1439421718, "answer_id": 31977031, "question_id": 31976543, "link": "https://stackoverflow.com/questions/31976543/listing-the-local-variables-in-irb/31977031#31977031", "title": "listing the local variables in irb", "body": "<p>Your code is really complicated and obfuscated. First, let's clean up your code a bit so that we can see more clearly what's going on. You don't need <code>self</code>, since it is the default receiver anyway. And you don't need <code>send</code>, because you already know the name of the method you want to call. Also, <code>Kernel#local_variables</code> uses the current <code>Binding</code> anyway. Also, typically, such methods which are supposed to by called without an explicit receiver and don't actually make use of <code>self</code> (e.g. like <code>puts</code> or <code>require</code>) are put into <code>Kernel</code>. So, your code is equivalent to the following:</p>\n\n<pre><code>module Kernel\n  def list_vars\n    local_variables.map {|var| \"#{var} = \" + binding.local_variable_get(var).inspect}\n  end\nend\n</code></pre>\n\n<p>Now we can immediately see the problem: you are reflecting on the local variables and the <code>Binding</code> of <code>list_vars</code> and not the place where it was called from! You need to pass the <code>Binding</code> into the method and use that instead:</p>\n\n<pre><code>module Kernel\n  def list_vars(binding)\n    binding.local_variables.map {|var| \"#{var} = \" + binding.local_variable_get(var).inspect}\n  end\nend\n\nlist_vars(binding)\n</code></pre>\n\n<p>Or, you could make it an instance method of <code>Binding</code>:</p>\n\n<pre><code>class Binding\n  def list_vars\n    local_variables.map {|var| \"#{var} = \" + local_variable_get(var).inspect}\n  end\nend\n\nbinding.list_vars\n</code></pre>\n"}], "owner": {"reputation": 4605, "user_id": 1067339, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3479b6831ccaa6263ed5ca7dab3ba972?s=128&d=identicon&r=PG", "display_name": "Qqwy", "link": "https://stackoverflow.com/users/1067339/qqwy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 31977031, "answer_count": 3, "score": 1, "last_activity_date": 1439421718, "creation_date": 1439418776, "last_edit_date": 1439420466, "question_id": 31976543, "link": "https://stackoverflow.com/questions/31976543/listing-the-local-variables-in-irb", "title": "listing the local variables in irb", "body": "<p>I am attempting to list all local variables and their values. This works in IRB:</p>\n\n<pre><code>local_variables.map {|var| \"#{var} = \" + local_variable_get(var).inspect\n</code></pre>\n\n<p>I would like to wrap this in a method, but when this code is placed inside a method, <code>local_variables</code> no longer points to the correct list of variables. Therefore, I tried some solutions along the lines of:</p>\n\n<pre><code>class Object\n  def list_vars\n    self.__send__(:binding).local_variables.map {|var| \"#{var} = \" + self.__send__(:binding).local_variable_get(var).inspect}\n  end\nend\n</code></pre>\n\n<p>However, it seems that the binding of the current object is different from <code>main</code>, which is used when calling <code>local_variables</code> directly.</p>\n\n<p>Does <code>self.send(:binding)</code> change depending on what method <code>self</code> is in?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1439421667, "post_id": 31976355, "comment_id": 51860303, "body": "Hi @Erik, could you please try my answer and let me know if that fixes your issue? Let me know if not! I will update my answer seeing your output."}], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1439421548, "last_edit_date": 1439421548, "creation_date": 1439418281, "answer_id": 31976439, "question_id": 31976355, "link": "https://stackoverflow.com/questions/31976355/rails-editing-the-params-hash/31976439#31976439", "title": "Rails: editing the params hash", "body": "<p>The reason of that error is:</p>\n\n<pre><code>`user_params[:user]` is `nil` there!\n</code></pre>\n\n<p><code>permit</code> returns a new hash with the keys in it, so you have to save a reference to the hash that <code>user_params</code> returns and then modify that.</p>\n\n<p>This should work:</p>\n\n<pre><code>def alter_user_params_when_not_admin(user_params)\n   #getting the current user_params in another hash\n   modified_user_params = user_params\n\n   if(@logged_in_user)\n     if(!@logged_in_user.is_admin) \n       #modify the hash      \n       modified_user_params[:user_type_id] = 1\n     end\n   else\n     #modify the hash\n     modified_user_params[:user_type_id] = 1\n   end\n   #return the modified user_params hash\n   modified_user_params\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1032, "user_id": 272543, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c2e7b0d61c1a21cd3de17aab44daa311?s=128&d=identicon&r=PG", "display_name": "Zakwan", "link": "https://stackoverflow.com/users/272543/zakwan"}, "is_accepted": false, "score": 1, "last_activity_date": 1439451869, "last_edit_date": 1439451869, "creation_date": 1439419168, "answer_id": 31976610, "question_id": 31976355, "link": "https://stackoverflow.com/questions/31976355/rails-editing-the-params-hash/31976610#31976610", "title": "Rails: editing the params hash", "body": "<p><code>user_params</code> gives you same what <code>params[:user]</code> gives but with strong parameters filtration. So, when you use <code>user_params</code>, you don't need to pass <code>[:user]</code>, just call <code>user_params[:user_type_id]</code> directly.</p>\n\n<p>I suggest the following code:</p>\n\n<pre><code>def alter_user_params_when_not_admin(user_params)\n  if(@logged_in_user)\n    if(!@logged_in_user.is_admin)\n      params[:user][:user_type_id] = 1\n    end\n  else\n    params[:user][:user_type_id] = 1\n  end\n\n  user_params\nend\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>We don't need to pass and return <code>user_params</code> in your custom method:</p>\n\n<pre><code>def alter_user_params_when_not_admin\n  if(@logged_in_user)\n    if(!@logged_in_user.is_admin)\n      params[:user][:user_type_id] = 1\n    end\n  else\n    params[:user][:user_type_id] = 1\n  end\nend\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>def update\n  alter_user_params_when_not_admin\n  respond_to do |format|\n    if @user.update(user_params)\n</code></pre>\n"}], "owner": {"reputation": 1166, "user_id": 2529456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c74d011d40caa00a6ffcdbbd3a43235a?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/2529456/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1439451869, "creation_date": 1439417888, "question_id": 31976355, "link": "https://stackoverflow.com/questions/31976355/rails-editing-the-params-hash", "title": "Rails: editing the params hash", "body": "<p>I am trying to figure out how to edit the params hash in the controller after it's been passed. My hash is set up like this:</p>\n\n<pre><code> def user_params\n    params.require(:user).permit(:username, :password, :password_confirmation, :user_type_id)\n end\n</code></pre>\n\n<p>I have this method for editing the hash</p>\n\n<pre><code>def alter_user_params_when_not_admin(user_params)\n   if(@logged_in_user)\n     if(!@logged_in_user.is_admin)\n       user_params[:user][:user_type_id] = 1\n     end\n   else\n     user_params[:user][:user_type_id]=1\n   end\n   user_params\n end\n</code></pre>\n\n<p>I call this method like this: </p>\n\n<pre><code>def update\n   new_user_params = alter_user_params_when_not_admin(user_params)\n   respond_to do |format|\n      if @user.update(new_user_params)\n</code></pre>\n\n<p>But on the fourth line of the <code>alter_user_params...</code> method I get this error:</p>\n\n<pre><code>undefined method `[]=' for nil:NilClass \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1439428217, "post_id": 31976330, "comment_id": 51861814, "body": "Welcome to SO. Normally &quot;thank yous&quot; and such are left out, unlike forums."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5221177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce52a35687f827a7808e6090d3c67da?s=128&d=identicon&r=PG&f=1", "display_name": "Minecraftaddict2001", "link": "https://stackoverflow.com/users/5221177/minecraftaddict2001"}, "edited": false, "score": 0, "creation_date": 1439424654, "post_id": 31977316, "comment_id": 51861068, "body": "Hi Axel!  Where would I put this code you just told me?"}, {"owner": {"reputation": 1305, "user_id": 623919, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d2113d86e7a9b16e8cac6956096bf0?s=128&d=identicon&r=PG", "display_name": "Axel Tetzlaff", "link": "https://stackoverflow.com/users/623919/axel-tetzlaff"}, "reply_to_user": {"reputation": 11, "user_id": 5221177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce52a35687f827a7808e6090d3c67da?s=128&d=identicon&r=PG&f=1", "display_name": "Minecraftaddict2001", "link": "https://stackoverflow.com/users/5221177/minecraftaddict2001"}, "edited": false, "score": 0, "creation_date": 1439424854, "post_id": 31977316, "comment_id": 51861104, "body": "A common approach is to create a <code>seed rake task</code> for this. Take a look here: <a href=\"http://stackoverflow.com/questions/4448966/how-to-set-up-a-rake-task-for-seeding\" title=\"how to set up a rake task for seeding\">stackoverflow.com/questions/4448966/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1305, "user_id": 623919, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d2113d86e7a9b16e8cac6956096bf0?s=128&d=identicon&r=PG", "display_name": "Axel Tetzlaff", "link": "https://stackoverflow.com/users/623919/axel-tetzlaff"}, "is_accepted": false, "score": 1, "last_activity_date": 1439423592, "creation_date": 1439423592, "answer_id": 31977316, "question_id": 31976330, "link": "https://stackoverflow.com/questions/31976330/creating-a-multiple-choice-test-on-rails-using-a-hash-table/31977316#31977316", "title": "Creating a multiple choice test on Rails using a hash table", "body": "<p>If you have related your answers with a <code>has_many</code> relationship to your question you can create answers with questions like this:</p>\n\n<pre><code>question = Question.create!(text =&gt; 'What is Minecraft?')\nquestion.answer.create!(:text =&gt; 'A game')\nquestion.answer.create!(:text =&gt; 'A food')\n...\n</code></pre>\n\n<p>Ids will usually given out by the database, just don't need to define them yourself.</p>\n"}], "owner": {"reputation": 11, "user_id": 5221177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce52a35687f827a7808e6090d3c67da?s=128&d=identicon&r=PG&f=1", "display_name": "Minecraftaddict2001", "link": "https://stackoverflow.com/users/5221177/minecraftaddict2001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1439431648, "creation_date": 1439417733, "last_edit_date": 1495540807, "question_id": 31976330, "link": "https://stackoverflow.com/questions/31976330/creating-a-multiple-choice-test-on-rails-using-a-hash-table", "title": "Creating a multiple choice test on Rails using a hash table", "body": "<p>I'm in a tech summer camp and our teacher is showing us how to use Ruby on Rails. I told my teacher want I wanted to make and he told us to post here because it's important to learn from other developers.</p>\n\n<p>I was looking on the site and found this <a href=\"https://stackoverflow.com/questions/21458355/a-quiz-game-on-ruby-on-rails\">question</a> that is similar to what I want to do for my project. I want my friends to be able to read a few pages of text and then do a short test to make sure they were paying attention.</p>\n\n<p>I want to make a hash table like the question I linked above but I don't know where to put it in my app! I would also like to tie it to users somehow so I can see which of my friends completed the test or not.</p>\n\n<p>So far I have made <code>user</code>, <code>question</code> and <code>answer</code> models and would like to use a hash table like this test my fellow students.</p>\n\n<pre><code># Question:\n{ :question_id =&gt; 1,\n  :text =&gt; 'What is Minecraft?',\n  :answers =&gt; # Answers:\n                [{:answer_id =&gt; 1, :text =&gt; 'A game'},\n                 {:answer_id =&gt; 2, :text =&gt; 'A food'},\n                 {:answer_id =&gt; 3, :text =&gt; 'A store'} ],\n  :correct_answer_id =&gt; 1 }\n</code></pre>\n\n<p>Can someone tell me where I need to put this in my app and how I can save it to a database?  My teacher said it is okay if people tell us how to do stuff as long as we tell him in our write up.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1439659366, "post_id": 31976245, "comment_id": 51956091, "body": "Excellent question. Let me ask you this for starters. How do you suppose to parallelize your task? As I see it, that&#39;s the real question here. It doesn&#39;t matter much how you organize your classes. But it matters <i>a lot</i> how you organize your workers&#39; pool and processes."}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1439705766, "post_id": 31976245, "comment_id": 51965906, "body": "It will be called by active Job."}], "answers": [{"tags": [], "owner": {"reputation": 12483, "user_id": 2123922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e1269993bc2c97b8eef7134917b89565?s=128&d=identicon&r=PG", "display_name": "Benj", "link": "https://stackoverflow.com/users/2123922/benj"}, "is_accepted": false, "score": 2, "last_activity_date": 1439705056, "creation_date": 1439705056, "answer_id": 32032321, "question_id": 31976245, "link": "https://stackoverflow.com/questions/31976245/best-way-to-write-a-flexible-importer-module/32032321#32032321", "title": "Best way to write a flexible importer module", "body": "<p>I am doing this for a similar project, where I have to browse and get information on different websites. On each of those websites I have to reach for same goal by performing roughly the same actions, and they are off-course all structured differently.</p>\n\n<p>The solution is inspired from the basic principles of OOP:</p>\n\n<p><strong>Main class</strong>: handle the high level operations, handle database operations, handle images operation, manage errors</p>\n\n<pre><code>class MainClass\n\n  def import\n    # Main method, prepare the download and loop through each images\n    log_in\n    go_to_images_page\n    images = get_list_of_images\n    images.each do |url|\n      begin\n        image_record = download_image url\n        transform_image image_record\n      rescue\n        manage_error\n      end\n    end\n    display_logs\n    send_emails\n  end\n\n  def download_image(url)\n    # Once the specific class returned the images url, this common method\n    # Is responsible for downloading and creating database record\n    record = Image.new picture: url \n    record.save!\n    record\n  end  \n\n  def transform_image(record)\n    # Transformation is common so this method sits in the main class\n    record.watermark!\n  end   \n\n  # ... the same for all commom methods (manage_error, display_logs, ...)\n\nend\n</code></pre>\n\n<p><strong>Specific classes</strong> (one per targeted website) : handle low lovel operations and return data to the main class. The only interraction this class must have is with the website, meaning no database access and no error management as much as possible (don't get stuck by your design ;))</p>\n\n<p><em>Note</em>: In my design I simply inherit from the MainClass, but you can use module inclusion if you prefer.</p>\n\n<pre><code>class Target1Site &lt; MainClass\n  def log_in\n    # Perform specific action in website to log the use in\n    visit '/log_in'\n    fill_in :user_name, with: ENV['user_name']\n    ...\n  end\n\n  def go_to_images_page\n    # Go to specific url\n    visit '/account/gallery'\n  end\n\n  def get_list_of_images\n    # Use specific css paths\n    images = all :css, 'div#image-listing img'\n    images.collect{|i| i['src']}\n  end\n\n  # ...\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1439910449, "post_id": 32076104, "comment_id": 52048649, "body": "thanks for your answer. appreciated. i came up witth the same argument as number 2. just return urls, and you can do whatever you want with it, depending on your needs. if your needs are chaning, you just change the processing of the files. if you are having tempfiles and want to change the processing, you need to change the importer (which even sounds stupid imo)"}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 1, "creation_date": 1439932904, "post_id": 32076104, "comment_id": 52061701, "body": "That&#39;s decoupling and is an <a href=\"https://en.wikipedia.org/wiki/Coupling_(computer_programming)\" rel=\"nofollow noreferrer\">important factor of good design</a>. Among already noted benefits it will give you more simple, maintainable and testable code. Your <code>Importer::Website&lt;...&gt;</code> classes should only be concerned with grabbing image urls, passing those down the line for processing."}], "tags": [], "owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "is_accepted": true, "score": 4, "last_activity_date": 1439910363, "creation_date": 1439910363, "answer_id": 32076104, "question_id": 31976245, "link": "https://stackoverflow.com/questions/31976245/best-way-to-write-a-flexible-importer-module/32076104#32076104", "title": "Best way to write a flexible importer module", "body": "<p>I've had a similar situation to this recently - I recommend an array of strings for several reasons:  </p>\n\n<ol>\n<li><p>Familiarity: How often are you working with tempfiles?  What about the other developers on your team?  How easy is it to manipulate strings vs manipulating tempfiles?</p></li>\n<li><p>Flexibility: Now you want to just process the picture, but maybe in the future you'll need to keep track of the picture id for each picture from the external site.  That's trivial with an array of strings.  With an array of tempfiles, it's more difficult (just how much depends, but the fact is it will be more difficult).  That of course goes for other as-yet-unknown objectives as well.  </p></li>\n<li><p>Speed: It's faster and uses less disk space to process an array of strings than a group of files.  That's perhaps a small issue, but if you get flooded with a lot of photos at the same time, it could be a consideration depending on your environment.  </p></li>\n</ol>\n\n<p>Ultimately, the best thing I can say is start with strings, make a few importers, and then see how it looks and feels.  Pretend you're a project manager or a client - start making strange, potentially unreasonable demands of the data you've collected.  How easy will it be for you to meet those demands with your current implementation?  Would it be easier if you were using tempfiles?  </p>\n"}, {"tags": [], "owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1440085865, "creation_date": 1440085865, "answer_id": 32122816, "question_id": 31976245, "link": "https://stackoverflow.com/questions/31976245/best-way-to-write-a-flexible-importer-module/32122816#32122816", "title": "Best way to write a flexible importer module", "body": "<p>I solved a similar problem... I had to import from a xls file, different resource types using:</p>\n\n<ul>\n<li>The Importer class (<code>ResourcesGroupsImporter</code>).</li>\n<li>A base mapper class (<code>ResourceMapper</code>) It acts as interface for specific mappers. It has common methods for all resources and <strong>raises <code>NotImplementedError</code> encouraging you to implement those methods when you adds a new resource type.</strong></li>\n<li>One mapper by resource type (<code>DetentionsPollMapper</code>, <code>FrontCycleMapper</code>). Each one, implements specific logic for an specific resource.</li>\n</ul>\n\n<h3>Implementation example:</h3>\n\n<p>The importer...</p>\n\n<pre><code>class ResourcesGroupsImporter\n  attr_reader :group\n  attr_reader :mappers\n\n  def initialize(_source, _resources_group)\n    @group = _resources_group\n    @source = _source\n    @xls = Roo::Spreadsheet.open(@source.path, extension: :xlsx)\n    @mappers = Resource::RESOURCEABLE_CLASSES.map { |klass| resource_mapper(klass) }\n  end\n\n  def import\n    ActiveRecord::Base.transaction do\n      self.mappers.each { |mapper| create_resource(mapper) }\n      relate_source_with_group unless self.has_errors?\n      raise ActiveRecord::Rollback if self.has_errors?\n    end\n  end\n\n  def has_errors?\n    !self.mappers.select { |mapper| mapper.has_errors? }.empty?\n  end\n\n  private\n\n  def resource_mapper(_class)\n    \"#{_class}Mapper\".constantize.new(@xls, @group)\n  end\n\n  def create_resource(_mapper)\n    return unless _mapper.resource\n\n    _mapper.load_resource_attributes\n    _mapper.resource.complete\n    _mapper.resource.force_validation = true\n\n    if _mapper.resource.save\n      create_resource_items(_mapper)\n    else\n      _mapper.load_general_errors\n    end\n  end\n\n  def create_resource_items(_mapper)\n    _mapper.set_items_sheet\n    columns = _mapper.get_items_columns\n\n    @xls.each_with_index(columns) do |data, index|\n      next if data == columns\n      break if data.values.compact.size.zero?\n      item = _mapper.build_resource_item(data)\n      _mapper.add_detail_errors(index, item.errors.messages) unless item.save\n    end\n  end\n\n  def relate_source_with_group\n    @group.reload\n    @group.source = @source\n    @group.save!\n  end\nend\n</code></pre>\n\n<p>The interface...</p>\n\n<pre><code>class ResourceMapper\n  attr_reader :general_errors\n  attr_reader :detailed_errors\n  attr_reader :resource\n\n  def initialize(_xls, _resource_group)\n    @xls = _xls\n    @resource = _resource_group.resourceable_by_class_type(resource_class)\n  end\n\n  def resource_class\n    raise_implementation_error\n  end\n\n  def items_sheet_number\n    raise_implementation_error\n  end\n\n  def load_resource_attributes\n    raise_implementation_error\n  end\n\n  def get_items_columns\n    raise_implementation_error\n  end\n\n  def build_resource_item(_xls_item_data)\n    resource_items.build(_xls_item_data)\n  end\n\n  def raise_implementation_error\n    raise NotImplementedError.new(\"#{caller[0]} method not implemented on inherited class\")\n  end\n\n  def has_errors?\n    !self.general_errors.nil? || !self.detailed_errors.nil?\n  end\n\n  def resource_items\n    self.resource.items\n  end\n\n  def human_resource_name\n    resource_class.model_name.human\n  end\n\n  def human_resource_attr(_attr)\n    resource_class.human_attribute_name(_attr)\n  end\n\n  def human_resource_item_attr(_attr)\n    \"#{resource_class}Item\".constantize.human_attribute_name(_attr)\n  end\n\n  def load_general_errors\n    @general_errors = self.resource.errors.messages\n  end\n\n  def add_detail_errors(_xls_row_idx, _error)\n    @detailed_errors ||= []\n    @detailed_errors &lt;&lt; [ _xls_row_idx+1, _error ]\n  end\n\n  def set_items_sheet\n    @xls.default_sheet = items_sheet\n  end\n\n  def general_sheet\n    sheet(0)\n  end\n\n  def items_sheet\n    sheet(self.items_sheet_number)\n  end\n\n  def sheet(_idx)\n    @xls.sheets[_idx]\n  end\n\n  def general_cell(_col, _row)\n    @xls.cell(_col, _row, general_sheet)\n  end\nend\n</code></pre>\n\n<p>Specific mapper types...</p>\n\n<pre><code>class DetentionsPollMapper &lt; ResourceMapper\n  def items_sheet_number\n    6\n  end\n\n  def resource_class\n    DetentionsPoll\n  end\n\n  def load_resource_attributes\n    self.resource.crew = general_cell(\"N\", 3)\n    self.resource.supervisor = general_cell(\"N\", 4)\n  end\n\n  def get_items_columns\n    {\n      issue: \"Problema identificado\",\n      creation_date: \"Fecha\",\n      workers_count: \"N\u00b0 Trabajadores esperando\",\n      detention_hours_string: \"HH Detenci\u00f3n\",\n      lost_hours: \"HH perdidas\",\n      observations: \"Observaci\u00f3n\"\n    }\n  end\n\n  def build_resource_item(_xls_item_data)\n    activity = self.resource.activity_by_name(_xls_item_data[:issue])\n\n    data = {\n      creation_date: _xls_item_data[:creation_date],\n      workers_count: _xls_item_data[:workers_count],\n      detention_hours_string: _xls_item_data[:detention_hours_string],\n      lost_hours: _xls_item_data[:lost_hours],\n      observations: _xls_item_data[:observations],\n      activity_id: !!activity ? activity.id : nil\n    }\n\n    resource_items.build(data)\n  end\nend\n\nclass FrontCycleMapper &lt; ResourceMapper\n  def items_sheet_number\n    8\n  end\n\n  def resource_class\n    FrontCycle\n  end\n\n  def load_resource_attributes\n    self.resource.front = general_cell(\"S\", 3)\n  end\n\n  def get_items_columns\n    {\n      task: \"Tarea\",\n      start_time_string: \"Hora\",\n      task_type: \"Tipo de Tarea\",\n      description: \"Descripci\u00f3n\"\n    }\n  end\n\n  def build_resource_item(_xls_item_data)\n    activity = self.resource.activity_by_name_and_category(\n      _xls_item_data[:task], _xls_item_data[:task_type])\n\n    data = {\n      description: _xls_item_data[:description],\n      start_time_string: _xls_item_data[:start_time_string],\n      activity_id: !!activity ? activity.id : nil\n    }\n\n    resource_items.build(data)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1440192221, "post_id": 32149435, "comment_id": 52188228, "body": "where is that a lack of security? we wrote an importer for website1.com and that is returning [/path/file.jpg, /path/file.jpg] so the last line of code is return pictures.collect{|x| &quot;<a href=\"http://www.website1.com/\" rel=\"nofollow noreferrer\">website1.com</a>&quot; + x }"}, {"owner": {"reputation": 369, "user_id": 3997439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7TFV.png?s=128&g=1", "display_name": "plombix", "link": "https://stackoverflow.com/users/3997439/plombix"}, "reply_to_user": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1440192595, "post_id": 32149435, "comment_id": 52188373, "body": "i think i&#39;ve taked &quot;http://&quot; to literally , and the less you duplicate data the less you read data"}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1440192648, "post_id": 32149435, "comment_id": 52188395, "body": "that is the other approach, that grabs the pcitures as tempfiles and directly transform those <a href=\"http://pastie.org/10367203\" rel=\"nofollow noreferrer\">pastie.org/10367203</a>"}, {"owner": {"reputation": 369, "user_id": 3997439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7TFV.png?s=128&g=1", "display_name": "plombix", "link": "https://stackoverflow.com/users/3997439/plombix"}, "reply_to_user": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1440192897, "post_id": 32149435, "comment_id": 52188503, "body": "there is some imagehost  were you can delegate transform if you want go faster:"}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1440192927, "post_id": 32149435, "comment_id": 52188513, "body": "no we need to control it by ourself. actually we are removing watermarks"}, {"owner": {"reputation": 369, "user_id": 3997439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7TFV.png?s=128&g=1", "display_name": "plombix", "link": "https://stackoverflow.com/users/3997439/plombix"}, "reply_to_user": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1440193856, "post_id": 32149435, "comment_id": 52188834, "body": "Treatment of Image is the heaviest thing you l&#39;have to batch &amp;&amp; ruby is better with hashes (flex , and perf)."}], "tags": [], "owner": {"reputation": 369, "user_id": 3997439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7TFV.png?s=128&g=1", "display_name": "plombix", "link": "https://stackoverflow.com/users/3997439/plombix"}, "is_accepted": false, "score": 2, "last_activity_date": 1440192165, "creation_date": 1440192165, "answer_id": 32149435, "question_id": 31976245, "link": "https://stackoverflow.com/questions/31976245/best-way-to-write-a-flexible-importer-module/32149435#32149435", "title": "Best way to write a flexible importer module", "body": "<p>A helper have to provide a way to access pict as you prefer.</p>\n\n<p>However saving \"http://...\", \"http://...\", \"http://...\" this kind of strings, is a lack of security.</p>\n\n<p>I 'd preferd hash like this: domain_name = {\"name_on_url.jpg\" =>path_on_disk, ...}</p>\n\n<p>To ensure flexibility of access.</p>\n"}], "owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 3, "accepted_answer_id": 32076104, "answer_count": 4, "score": 15, "last_activity_date": 1440194646, "creation_date": 1439417347, "last_edit_date": 1440194646, "question_id": 31976245, "link": "https://stackoverflow.com/questions/31976245/best-way-to-write-a-flexible-importer-module", "title": "Best way to write a flexible importer module", "body": "<p>A user can import his data from other websites. All he needs to do is type in his username on the foreign website and we'll grab all pictures and save it into his own gallery. Some of the pictures needs to be transformed with rMagick (rotating,watermarking), that depends on the importer (depends on which website the user chooses to import data from)</p>\n\n<p>We are discussing the sexiest and most flexible way to do so. We are using carrierwave, but we will change to paperclip in case it fits us more.</p>\n\n<h2>Importer Structure</h2>\n\n<p>The current structure does looks like (its roughly pseudocode)</p>\n\n<pre><code>module Importer\n  class Website1\n    def grab_pictures\n    end\n  end\n\n  class Website2\n    def grab_pictures\n    end\n  end\nend\n\nclass ImporterJob        \n  def perform(user, type, foreign_username)\n    pictures = Importer::type.grab_pictures(foreign_username)\n\n    pictures.each do |picture|\n      user.pictures.create picture \n    end\n  end\nend\n</code></pre>\n\n<p>We struggle with the decision, whats the best return of the importer.</p>\n\n<h2><strong>Solution1:</strong></h2>\n\n<p>The Importer is <strong>returning an array of strings with URLs</strong> [\"http://...\", \"http://...\", \"http://...\"].\nThat array we can easily loop and tell carrierwave/paperclip to remote_download the images. After that, we'll run a processor to transform the pictures, if we need to.</p>\n\n<pre><code> def get_picture_urls username\n  pictures = []\n  page = get_html(username)\n  page.scan(/\\/p\\/\\d{4}-\\d{2}\\/#{username}\\/[\\w\\d]{32}-thumb.jpg/).each do |path|\n    pictures &lt;&lt; path\n  end\n  pictures.uniq.collect{|x| \"http://www.somewebsite.com/#{x.gsub(/medium|thumb/, \"big\")}\"}\nend\n</code></pre>\n\n<p>this actually returns an array [\"url_to_image\", \"url_to_image\", \"url_to_image\"]</p>\n\n<p>Then in the Picture.after_create, we call something to remove the Watermark on that Image.</p>\n\n<h2><strong>Solution2:</strong></h2>\n\n<p>grab_pictures is downloading each picture to an tempfile and transform it.    it will <strong>return an array of tempfiles</strong> [tempfile, tempfile, tempfile]</p>\n\n<p>code for that is: </p>\n\n<pre><code>def read_pictures username\n  pictures = []\n  page = get_html(username)\n  page.scan(/\\/p\\/\\d{4}-\\d{2}\\/#{username}\\/[a-z0-9]{32}-thumb.jpg/).each do |path|\n    pictures &lt;&lt; path\n  end\n  pictures.uniq.map { |pic_url| remove_logo(pic_url) }\nend\n\ndef remove_logo pic_url\n    big = Magick::Image.from_blob(@agent.get(pic_url.gsub(/medium.jpg|thumb.jpg/, 'big.jpg')).body).first\n    # ... do some transformation and watermarking\n    file = Tempfile.new(['tempfile', '.jpg'])\n    result.write(file.path)\n    file\n  end\n</code></pre>\n\n<p>This actually returns an array of [Tempfile, Tempfile, Tempfile]</p>\n\n<h2>Summary</h2>\n\n<p>The result will be the same for the user - but internally we are discovering 2 different ways of data handling.</p>\n\n<p>We want to keep logic where it belongs and work as generic as possible.</p>\n\n<p>Can you guys help us with choosing the right way? Longterm we want to have around 15 differnt Importers. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 528483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fShF.jpg?s=128&g=1", "display_name": "olistik", "link": "https://stackoverflow.com/users/528483/olistik"}, "edited": false, "score": 0, "creation_date": 1439670439, "post_id": 31976363, "comment_id": 51959576, "body": "have you tried adding <code>to_s</code> within <code>Room.total_grouped_by_day</code> as well? Something like <code>rooms.group_by { |o| o.reservation.to_date.to_s }</code>. On top of that, try dumping the content of the object <code>rooms_by_day</code> within <code>RoomsHelper.rooms_chart_data</code>, so you can understand which keys compose that hash. I can suggest you to insert a <code>binding.pry</code> after the initialisation of that variable. This requires adding Pry to the Gemfile:      gem &#39;pry-rails&#39;     gem &#39;pry-rescue&#39;"}], "tags": [], "owner": {"reputation": 1, "user_id": 1802188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149fcf55553053c2dd0bf23d39b7ffb2?s=128&d=identicon&r=PG", "display_name": "Noah", "link": "https://stackoverflow.com/users/1802188/noah"}, "is_accepted": false, "score": 0, "last_activity_date": 1439417911, "creation_date": 1439417911, "answer_id": 31976363, "question_id": 31976158, "link": "https://stackoverflow.com/questions/31976158/error-on-data-visualize-on-ruby-on-rails-4/31976363#31976363", "title": "Error on data visualize on Ruby on Rails 4", "body": "<p>You're converting the date to a string in the <code>group(date(reservation))</code> and then trying to look up items in the hash with the string coerced date instead, e.g.  <code>rooms_by_day[date.to_s]</code> rather than <code>rooms_by_day[date]</code></p>\n"}], "owner": {"reputation": 63, "user_id": 3223239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1389273374/picture?type=large", "display_name": "Alessio.Bussolari", "link": "https://stackoverflow.com/users/3223239/alessio-bussolari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439443601, "creation_date": 1439416878, "last_edit_date": 1439443601, "question_id": 31976158, "link": "https://stackoverflow.com/questions/31976158/error-on-data-visualize-on-ruby-on-rails-4", "title": "Error on data visualize on Ruby on Rails 4", "body": "<p>Sorry for my bad english, but I've this problem, for visualize some data from db I've make a Helper file, for manipulate and set the visualization and one Model for extract the rows from a DB and grouped all by date.\nthe problem is the Model return 0 (on :price) but the DB is full.</p>\n\n<p>THIS IS THE HELPER:</p>\n\n<pre><code>module RoomsHelper\n  def rooms_chart_data(start = 3.weeks.ago)\n    rooms_by_day = Room.total_grouped_by_day(start)\n    (start.to_date..Date.today).map do |date|\n      {\n          reservation: date,\n          price: rooms_by_day[date].try(:total_price) || 0\n      }\n    end\n  end\nend\n</code></pre>\n\n<p>THIS IS THE MODEL:</p>\n\n<pre><code>class Room &lt; ActiveRecord::Base\n  def self.total_grouped_by_day(start)\n    rooms = where(reservation: start.beginning_of_day..Time.zone.now)\n    rooms = rooms.group(\"date(reservation)\")\n    rooms = rooms.select(\"sum(price) as total_price, reservation\")\n    rooms.group_by { |o| o.reservation.to_date }\n  end\nend\n</code></pre>\n\n<p>AND I PASTE THE OUTPUT WRONG:</p>\n\n<pre><code>     &lt;div id=\"year_chart\" data-rooms=\"[{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-22&amp;quot;,&amp;quot;price&amp;quot;:0},\n{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-23&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-24&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-25&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-26&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-27&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-28&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-29&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-30&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-07-31&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-01&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-02&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-03&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-04&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-05&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-06&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-07&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-08&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-09&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-10&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-11&amp;quot;,&amp;quot;price&amp;quot;:0},{&amp;quot;reservation&amp;quot;:&amp;quot;2015-08-12&amp;quot;,&amp;quot;price&amp;quot;:0}]\"\n</code></pre>\n\n<p>THIS IS THE DB TABLE:</p>\n\n<pre><code>class CreateRooms &lt; ActiveRecord::Migration\n  def change\n    create_table :rooms do |t|\n      t.integer :identity_room\n      t.integer :price\n      t.integer :guest\n      t.datetime :reservation\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>AFTER ADD .to_s</p>\n\n<pre><code>module RoomsHelper\n  def rooms_chart_data(start = 3.weeks.ago)\n    rooms_by_day = Room.total_grouped_by_day(start)\n    (start.to_date..Date.today).map do |date|\n      {\n          reservation: date,\n          price: rooms_by_day[date.to_s].try(:total_price) || 0\n      }\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1032, "user_id": 272543, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c2e7b0d61c1a21cd3de17aab44daa311?s=128&d=identicon&r=PG", "display_name": "Zakwan", "link": "https://stackoverflow.com/users/272543/zakwan"}, "is_accepted": true, "score": 1, "last_activity_date": 1439417931, "creation_date": 1439417931, "answer_id": 31976365, "question_id": 31976102, "link": "https://stackoverflow.com/questions/31976102/rails-specify-url-for-resource/31976365#31976365", "title": "Rails specify url for resource", "body": "<p>Yes, you can:</p>\n\n<pre><code>resources :tokens, only: [:create] do\n  collection do \n    get :info, action: :show\n    delete :revoke, action: :destroy\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 31976365, "answer_count": 1, "score": 0, "last_activity_date": 1439417931, "creation_date": 1439416641, "question_id": 31976102, "link": "https://stackoverflow.com/questions/31976102/rails-specify-url-for-resource", "title": "Rails specify url for resource", "body": "<p>I am writing an application that has a token resource. The resource will have a standard <code>create</code> controller action with the default URI specified by rails, however I wish to alter the <code>show</code> and <code>destroy</code> actions such that I don't have to supply the id of the token within the URI because it will instead be attained from the request headers.</p>\n\n<p>This is what I have started with:</p>\n\n<pre><code>scope module: :auth do\n  resources :tokens, only: [:show, :create, :destroy]\nend\n</code></pre>\n\n<p>This if course yields the following URIs:</p>\n\n<pre><code>POST   /tokens(.:format)    \nGET    /tokens/:id(.:format)\nDELETE /tokens/:id(.:format)\n</code></pre>\n\n<p>But what I want to achieve is:</p>\n\n<pre><code>POST   /tokens(.:format)\nGET    /tokens/info/(.:format)\nDELETE /tokens/revoke/(.:format)\n</code></pre>\n\n<p>and I still want these to map to the controller actions <code>create</code>, <code>show</code> and <code>destroy</code> respectively. Can this be done as succinctly as possible.</p>\n"}, {"tags": ["arrays", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4420322, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05cd02fccf4212f2dce4182d0bc35f96?s=128&d=identicon&r=PG", "display_name": "Jan Hofmann", "link": "https://stackoverflow.com/users/4420322/jan-hofmann"}, "edited": false, "score": 0, "creation_date": 1439447424, "post_id": 31976312, "comment_id": 51867418, "body": "Thx, this works as intended and strips out all unwanted spaces!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1439487777, "post_id": 31976312, "comment_id": 51894145, "body": "This doesn&#39;t work if <code>s</code> contains two or more consecutive spaces or an element of <code>a</code> contains a leading or trailing space. For example, suppose <code>s</code> contains column headings: <code>s = &quot;Name        Age        Ht        Wt&quot;</code> and <code>a = [&#39;        Age&#39;, &#39;        Wt&#39;]</code>. Then <code>answer_array #=&gt; &quot;Name Age Ht Wt&quot;</code>."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1439418008, "last_edit_date": 1439418008, "creation_date": 1439417665, "answer_id": 31976312, "question_id": 31975974, "link": "https://stackoverflow.com/questions/31975974/how-to-remove-array-items-from-string/31976312#31976312", "title": "How to remove array items from string?", "body": "<p>Define your string and array: </p>\n\n<pre><code>s = \"This is my example #foo and #bar\"\na = ['#foo', '#bar']\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>answer_array = (s.split(\" \") - a).join(\" \")\n</code></pre>\n\n<p>Gives the answer:</p>\n\n<pre><code>=&gt; \"This is my example and\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1439489867, "last_edit_date": 1439489867, "creation_date": 1439430085, "answer_id": 31978166, "question_id": 31975974, "link": "https://stackoverflow.com/questions/31975974/how-to-remove-array-items-from-string/31978166#31978166", "title": "How to remove array items from string?", "body": "<p>The following preserves whitespace:</p>\n\n<pre><code>str = 'This    is my example   #foo and #bar'\narr = ['#foo','#bar']\n\nr = Regexp.new arr.each_with_object('') { |s,str| str &lt;&lt; s &lt;&lt; '|' }[0..-2]\n  #=&gt; /#foo|#bar/\nstr.gsub(r,'')\n  #=&gt; \"This    is my example and \"\n</code></pre>\n\n<p>Another example (column labels):</p>\n\n<pre><code>str = \"    Name        Age        Ht        Wt\"\narr = ['        Age', '        Wt']\n\nr = Regexp.new arr.each_with_object('') { |s,str| str &lt;&lt; s &lt;&lt; '|' }[0..-2]\n  #=&gt; /        Age|        Wt/\nstr.gsub(r,'')\n  #=&gt; \"    Name        Ht\"\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4420322, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05cd02fccf4212f2dce4182d0bc35f96?s=128&d=identicon&r=PG", "display_name": "Jan Hofmann", "link": "https://stackoverflow.com/users/4420322/jan-hofmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 31976312, "answer_count": 2, "score": 0, "last_activity_date": 1439489867, "creation_date": 1439416085, "question_id": 31975974, "link": "https://stackoverflow.com/questions/31975974/how-to-remove-array-items-from-string", "title": "How to remove array items from string?", "body": "<p>I have this string: <code>This is my example #foo and #bar</code></p>\n\n<p>And this array: <code>['#foo','#bar']</code></p>\n\n<p>And this is the string I would like to have: <code>This is my example and</code></p>\n\n<p>Thx!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "autocomplete", "ide", "rubymine"], "comments": [{"owner": {"reputation": 322, "user_id": 3228294, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000415182991/picture?type=large", "display_name": "Bartosz \u0141\u0119cki", "link": "https://stackoverflow.com/users/3228294/bartosz-%c5%81%c4%99cki"}, "edited": false, "score": 0, "creation_date": 1439414335, "post_id": 31975469, "comment_id": 51857822, "body": "Ruby in dynamic typed language which means that you don&#39;t type method return types or argument types. Another thing is metaprogramming which is done during runtime. Both of those things make autocompletion a lot harder to implement than for example in Java which is just static typed, compiled language. RubyMine is best IDE for Ruby language."}, {"owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "reply_to_user": {"reputation": 322, "user_id": 3228294, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000415182991/picture?type=large", "display_name": "Bartosz \u0141\u0119cki", "link": "https://stackoverflow.com/users/3228294/bartosz-%c5%81%c4%99cki"}, "edited": false, "score": 0, "creation_date": 1439416081, "post_id": 31975469, "comment_id": 51858559, "body": "This is an answer, @Bartosz\u0141\u0119cki. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 2, "last_activity_date": 1439415612, "last_edit_date": 1439415612, "creation_date": 1439414686, "answer_id": 31975683, "question_id": 31975469, "link": "https://stackoverflow.com/questions/31975469/rubymine-code-autocompletion/31975683#31975683", "title": "RubyMine code autocompletion", "body": "<p>Although, RubyMine doesn't work for ALL code completion all the time due to the dynamic nature of Ruby. But, I still find it the BEST Ruby IDE for code completion, method navigation, searching features.</p>\n\n<p>Here is a screenshot to show you how to configure RubyMine for Code Completion:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Qfele.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qfele.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"http://www.railsonmaui.com/tips/rubymine/rubymine-tips-rails-tutorial.html\" rel=\"nofollow noreferrer\">Here</a> is a good tutorial by Justin Gordon which shows some awesome features of RubyMine which may interest you.</p>\n\n<p>I don't know any other Ruby IDE that has smarter code completion than RubyMine. In fact, a vast majority of Ruby programmers doesn't even use an IDE, rather they use a Text Editor!</p>\n\n<p>Here are couple of short sitepoint articles that would give you more insights:</p>\n\n<p><a href=\"http://www.sitepoint.com/ides-rubyists-use/\" rel=\"nofollow noreferrer\">Which IDEs do Rubyists Use?</a></p>\n\n<p><a href=\"http://www.sitepoint.com/editor-rubyists-use/\" rel=\"nofollow noreferrer\">What Editor Do Rubyists Use?</a></p>\n"}, {"tags": [], "owner": {"reputation": 358, "user_id": 6058111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a893e53a2b78d83c1a12eeb4288d96?s=128&d=identicon&r=PG&f=1", "display_name": "rsqLVo", "link": "https://stackoverflow.com/users/6058111/rsqlvo"}, "is_accepted": false, "score": 2, "last_activity_date": 1457911064, "creation_date": 1457911064, "answer_id": 35977122, "question_id": 31975469, "link": "https://stackoverflow.com/questions/31975469/rubymine-code-autocompletion/35977122#35977122", "title": "RubyMine code autocompletion", "body": "<p>As mentioned before, Ruby's code completion is very complicated due to dynamic typing. Switching from C#/Java I've been struggling with it for some time and I've found one way to at least mitigate it a bit. Example:</p>\n\n<pre><code>def extract_data_from_this_array(input_array)\n  # some code\nend\n</code></pre>\n\n<p>Suppose you want to deal with the array you're getting as an input. You type <code>input_array</code> and no methods or all methods are listed, because Ruby has no idea that it's an array. What I do is write:</p>\n\n<pre><code>Array.new.\n</code></pre>\n\n<p>And RubyMine suggests all Array methods. It helps a lot when you've just picked Ruby.</p>\n"}], "owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3103, "favorite_count": 3, "accepted_answer_id": 31975683, "answer_count": 2, "score": 3, "last_activity_date": 1457911064, "creation_date": 1439413798, "question_id": 31975469, "link": "https://stackoverflow.com/questions/31975469/rubymine-code-autocompletion", "title": "RubyMine code autocompletion", "body": "<p>I'm about to get used to work with Java in Android Studio. The great thing there is that everything is strongly declared. So when I type MyClass.someme..., the IDE offers me advanced code autocompletion features. The development is rapid and pleasantly.</p>\n\n<p>But then I wanted to learn RubyOnRails. I'm in love with JetBrains products and so I've installed RubyMine on my Windows machine.</p>\n\n<p>Despite of a bag of problems with Windows enviroment, I was confused with not-so-well working code completion. Even if the method is known by the IDE (it can be found by Ctrl+B combination), it does not offer it in popup menu (discover the picture).</p>\n\n<p>Function from <a href=\"https://www.railstutorial.org/book/updating_and_deleting_users#code-friendly_forwarding_code\" rel=\"nofollow noreferrer\">railstutorial.org</a>:</p>\n\n<pre><code># SomeControllerHelper.rb\n# Redirects to stored location (or to the default)\ndef redirect_back_or (default)\n  redirect_to(session[:forwarding_url] || default)\n  session.delete(:forwarding_url)\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UWAg4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UWAg4.png\" alt=\"Why, RubyMine?\"></a></p>\n\n<p>Is there any way to fix this problem? Are there any better IDEs with really smart code completion?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "open-uri"], "answers": [{"comments": [{"owner": {"reputation": 2295, "user_id": 1015722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95bc6501f8452eb4b459bf2dc4de5a96?s=128&d=identicon&r=PG", "display_name": "Jeremy Rodi", "link": "https://stackoverflow.com/users/1015722/jeremy-rodi"}, "edited": false, "score": 1, "creation_date": 1439415037, "post_id": 31975715, "comment_id": 51858150, "body": "I want to add a note onto this that performing a <code>rescue</code> from an error is a very time consuming task relatively, and so I&#39;d recommend looking into seeing if there&#39;s a way to check if a 404 error occurs without using exceptions."}, {"owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "reply_to_user": {"reputation": 2295, "user_id": 1015722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95bc6501f8452eb4b459bf2dc4de5a96?s=128&d=identicon&r=PG", "display_name": "Jeremy Rodi", "link": "https://stackoverflow.com/users/1015722/jeremy-rodi"}, "edited": false, "score": 0, "creation_date": 1439415240, "post_id": 31975715, "comment_id": 51858247, "body": "Hey @JeremyRodi any ideas on how to achieve that? This is working well for me but understand your point. Would love to hear your thoughts"}, {"owner": {"reputation": 2295, "user_id": 1015722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95bc6501f8452eb4b459bf2dc4de5a96?s=128&d=identicon&r=PG", "display_name": "Jeremy Rodi", "link": "https://stackoverflow.com/users/1015722/jeremy-rodi"}, "reply_to_user": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "edited": false, "score": 0, "creation_date": 1439415561, "post_id": 31975715, "comment_id": 51858374, "body": "@bnussey <code>open-uri</code> uses <code>Net::HTTP</code> under the hood, so you could probably use that.  Or, you could use a HTTP gem that performs the requests for you."}, {"owner": {"reputation": 3819, "user_id": 2871922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d263eb801e15c1691fc9431e29a8cf03?s=128&d=identicon&r=PG", "display_name": "Toby 1 Kenobi", "link": "https://stackoverflow.com/users/2871922/toby-1-kenobi"}, "edited": false, "score": 0, "creation_date": 1503637627, "post_id": 31975715, "comment_id": 78707869, "body": "if you&#39;re expecting any less than say 100 broken links for a PDF, and you&#39;re not generating more than a few PDFs in a second, then the extra time spent on rescuing from an error shouldn&#39;t be significant."}], "tags": [], "owner": {"reputation": 1409, "user_id": 1747583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IRY75.png?s=128&g=1", "display_name": "histocrat", "link": "https://stackoverflow.com/users/1747583/histocrat"}, "is_accepted": true, "score": 2, "last_activity_date": 1439416066, "last_edit_date": 1439416066, "creation_date": 1439414812, "answer_id": 31975715, "question_id": 31975363, "link": "https://stackoverflow.com/questions/31975363/how-to-rescue-404s-from-openuri-in-a-map/31975715#31975715", "title": "How to rescue 404s from OpenURI in a map", "body": "<p>You can rescue within a map block (you may be getting the syntax a bit off) but it'll generally be cleaner to move the rescue to its own method. Replace <code>open</code> with a call to a method like</p>\n\n<pre><code>def safe_open(url)\n  open(url)\nrescue # put a specific error class here ideally\n  load_placeholder_image\nend\n</code></pre>\n\n<p>Finished Code:</p>\n\n<pre><code>  def safe_open(url)\n    if url.blank?\n      safe_open = \"#{Rails.root}/app/assets/images/placeholder.png\"\n    else\n      open(url)\n    end\n  rescue OpenURI::HTTPError =&gt; e\n    if e.message == '404 Not Found'\n      safe_open = \"#{Rails.root}/app/assets/images/placeholder.png\"\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "accepted_answer_id": 31975715, "answer_count": 1, "score": 0, "last_activity_date": 1439416066, "creation_date": 1439413420, "question_id": 31975363, "link": "https://stackoverflow.com/questions/31975363/how-to-rescue-404s-from-openuri-in-a-map", "title": "How to rescue 404s from OpenURI in a map", "body": "<p>I am doing a map to format some data appropriately for a PDF export. A part of this is using OpenURI to open an image. However, the problem I've got is that some of the image links are to external sites and broken. Thus I randomly get 404 errors...</p>\n\n<p>I've tried doing a rescue within the map, but it errors. I've tried doing a rescue within the method but then it results in no data. What is the correct way to do this? </p>\n\n<p>Ideally I would like to set the image as a placeholder image I have on my server. Would it be better to define a separate method to handle this first?</p>\n\n<p>Here is my method at the moment:</p>\n\n<pre><code>  def wish_list_item_rows\n    WishListItem.where(:wish_list_id =&gt; @wish_list.id).map { |wishlistitem| [wishlistitem.product.name, {:image =&gt; open(wishlistitem.product.image_url)}] }\n  end\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "google-drive-api", "google-api-client"], "comments": [{"owner": {"reputation": 1598, "user_id": 921075, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hsvpu.jpg?s=128&g=1", "display_name": "dtc", "link": "https://stackoverflow.com/users/921075/dtc"}, "edited": false, "score": 0, "creation_date": 1441255067, "post_id": 31975326, "comment_id": 52606061, "body": "heh, im not having this trouble. im just having the trouble with using omniauth-google-oauth2 and wondering if im supposed how im supposed to replace that clients secret.json portion (since the client id and secret is saved in the omniauth.rb file) and how to proceed from there. the lack of documentation is...typical i guess but i plan to post instructions if i get this stuff working"}, {"owner": {"reputation": 433, "user_id": 1075108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe96524f5db9e92188f0542dc9d1d1a?s=128&d=identicon&r=PG", "display_name": "David Backeus", "link": "https://stackoverflow.com/users/1075108/david-backeus"}, "edited": false, "score": 0, "creation_date": 1450097847, "post_id": 31975326, "comment_id": 56276363, "body": "Also getting this error. Seems like the question could be reduced to just the authentication part since the context of the drive api isn&#39;t related to the code causing the error. I&#39;m looking to access the analytics api myself..."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5735120, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zllzb-19wvo/AAAAAAAAAAI/AAAAAAAAAGQ/EWqgL4SCngU/photo.jpg?sz=128", "display_name": "Vijay Subramani", "link": "https://stackoverflow.com/users/5735120/vijay-subramani"}, "is_accepted": false, "score": 0, "last_activity_date": 1453644479, "last_edit_date": 1453644479, "creation_date": 1451607882, "answer_id": 34552667, "question_id": 31975326, "link": "https://stackoverflow.com/questions/31975326/google-apis-drive-v2-authentication-on-new-google-drive-authentication-i-also-h/34552667#34552667", "title": "google/apis/drive_v2 authentication on new google Drive authentication. I also hope to avoid frustration with google-api-client", "body": "<p>I was running on Windows OS and ran into this issue. Turns out there is a bug in the ruby auth library for detecting the OS. </p>\n\n<p><a href=\"https://github.com/google/google-auth-library-ruby/issues/55\" rel=\"nofollow\">https://github.com/google/google-auth-library-ruby/issues/55</a></p>\n\n<p>If you pull down the latest version of the the googleauth gem either directly or indirectly through google-api-client, you will get the fix.</p>\n"}, {"comments": [{"owner": {"reputation": 532, "user_id": 219025, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a12bb528909b2beda629b742e15ecc7?s=128&d=identicon&r=PG", "display_name": "adg", "link": "https://stackoverflow.com/users/219025/adg"}, "edited": false, "score": 0, "creation_date": 1459045070, "post_id": 34645816, "comment_id": 60116617, "body": "This worked perfectly. There are numerous versions of obsolete and contradictory information out there and a lot of it is on Google&#39;s own site.  I think it is reasonable to expect them to remove stuff that doesn&#39;t work anymore.  I can now recognize and ignore the older stuff and am finally making progress. At the very least, their pages should have clear publication dates but they don&#39;t."}], "tags": [], "owner": {"reputation": 51, "user_id": 5749942, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4bEZLUxG6Kk/AAAAAAAAAAI/AAAAAAAAAAA/rIak-y8zXbg/photo.jpg?sz=128", "display_name": "Matt Cahill", "link": "https://stackoverflow.com/users/5749942/matt-cahill"}, "is_accepted": false, "score": 5, "last_activity_date": 1452129460, "creation_date": 1452129460, "answer_id": 34645816, "question_id": 31975326, "link": "https://stackoverflow.com/questions/31975326/google-apis-drive-v2-authentication-on-new-google-drive-authentication-i-also-h/34645816#34645816", "title": "google/apis/drive_v2 authentication on new google Drive authentication. I also hope to avoid frustration with google-api-client", "body": "<p>I just ran into the same problem -- I haven't resolved it totally, but I got past this particular error by setting the GOOGLE_APPLICATION_CREDENTIALS environment variable, and pointing it to a <em>service account key</em> file -- this is not the same as the client_secrets that worked for earlier versions of the API.</p>\n\n<p>Google's instructions in their documentation: <a href=\"https://developers.google.com/identity/protocols/application-default-credentials#howtheywork\" rel=\"nofollow\">Application Default Credentials: How They Work</a> lays this out, but the important note is that \"service account\" is a different auth method than client_secrets.</p>\n\n<p>First, go to the <a href=\"https://console.developers.google.com/apis/credentials\" rel=\"nofollow\">Developers Console API Credentials</a> page for your project and pick an existing/create a new \"Service account key\". Assume we've put the downloaded .json file in /path/to/svc_acct_auth.json</p>\n\n<p>In your ruby code, add the line:</p>\n\n<p><code>ENV[\"GOOGLE_APPLICATION_CREDENTIALS\"] = '/path/to/svc_acct_auth.json'</code></p>\n\n<p>That should get the service to return properly and get you past that runtime error. Granted, I'm still having trouble executing the calls I need through this auth system, but hey! I've graduated to newer &amp; better error messages.</p>\n"}, {"tags": [], "owner": {"reputation": 5589, "user_id": 406642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMSzb.jpg?s=128&g=1", "display_name": "Lev Lukomsky", "link": "https://stackoverflow.com/users/406642/lev-lukomsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1522604874, "last_edit_date": 1522604874, "creation_date": 1462214713, "answer_id": 36989427, "question_id": 31975326, "link": "https://stackoverflow.com/questions/31975326/google-apis-drive-v2-authentication-on-new-google-drive-authentication-i-also-h/36989427#36989427", "title": "google/apis/drive_v2 authentication on new google Drive authentication. I also hope to avoid frustration with google-api-client", "body": "<p>Here is code I used to save db backups to google drive, maybe it would help:</p>\n\n<pre><code>require 'google/apis/drive_v2'\nENV['GOOGLE_APPLICATION_CREDENTIALS'] = \"#{Rails.root}/config/google_api_credentials.json\"\ndrive = Google::Apis::DriveV2::DriveService.new\ndrive.authorization = Google::Auth.get_application_default([Google::Apis::DriveV2::AUTH_DRIVE_FILE])\n\nmetadata = {title: File.basename(archive_path, '.sql.bz2')}\nfile = drive.insert_file(metadata, upload_source: archive_path, content_type: 'application/x-bzip2')\n\nperm_id = drive.get_permission_id_for_email('some-email@gmail.com')\nperm = Google::Apis::DriveV2::Permission.new(role: 'writer', id: perm_id.id, type: 'user')\ndrive.insert_permission(file.id, perm)\n</code></pre>\n"}], "owner": {"reputation": 637, "user_id": 2059561, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0187e3cab96975381f84302185091bb5?s=128&d=identicon&r=PG", "display_name": "prussiap", "link": "https://stackoverflow.com/users/2059561/prussiap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1312, "favorite_count": 2, "answer_count": 3, "score": 5, "last_activity_date": 1522604874, "creation_date": 1439413273, "question_id": 31975326, "link": "https://stackoverflow.com/questions/31975326/google-apis-drive-v2-authentication-on-new-google-drive-authentication-i-also-h", "title": "google/apis/drive_v2 authentication on new google Drive authentication. I also hope to avoid frustration with google-api-client", "body": "<p>First my question is about getting google drive_v2 authentication working and creating new files etc with my rails 4.2 app. I have the rails app with devise/omniauth2 and google working just fine. I have activated in the google dev console both web auth and google API auth. Both client secrets are downloaded and working.</p>\n\n<p>So having said that. I need my rails app in offline access to be able to use, create, and delete goole Docs and Spreadsheets. I've set the scope for .drive, setup offline access etc.</p>\n\n<p>I've EVEN written code that works just fine if I go in the google playground and get a new access token to use.</p>\n\n<p>My first problem is the ability to get my refresh_token and authenticate or get a new one using the google-api-client (version 0.9pre3 so people aren't confused)</p>\n\n<p>In order to use the new google api I needed to comment out google drive since it seemed that all the APIs where combined into the client.</p>\n\n<pre><code>gem 'omniauth-google-oauth2'\n#gem 'google_drive'\ngem 'google-api-client', '0.9.pre3'\n</code></pre>\n\n<p>I'm stuck on the authentication/authorization step and I'm feeling rather dumb about it. </p>\n\n<p>So sample code on the github repo for the api <a href=\"https://github.com/google/google-api-ruby-client\">here</a>, or the google dev site <a href=\"https://developers.google.com/api-client-library/ruby/auth/installed-app\">here</a> lead me to believe this works.</p>\n\n<pre><code>require 'google/apis/drive_v2'\n\nDrive = Google::Apis::DriveV2 # Alias the module\ndrive = Drive::DriveService.new\ndrive.authorization = authorization # See Googleauth or Signet libraries\n</code></pre>\n\n<p>or</p>\n\n<pre><code>drive.authorization = Google::Auth.get_application_default([Drive::AUTH_DRIVE])\n</code></pre>\n\n<p>of course what is authorization? According to the docs I go <a href=\"https://github.com/google/google-auth-library-ruby\">here</a>.</p>\n\n<p>Running the example code below:\nrequire 'googleauth'</p>\n\n<h1>Get the environment configured authorization</h1>\n\n<pre><code>scopes =  ['https://www.googleapis.com/auth/cloud-platform', 'https://www.googleapis.com/auth/compute']\nauthorization = Google::Auth.get_application_default(scopes)\n</code></pre>\n\n<p>leads to:</p>\n\n<pre><code>authorization = Google::Auth.get_application_default(scopes)\nRuntimeError: Could not load the default credentials. Browse to\nhttps://developers.google.com/accounts/docs/application-default-credentials\nfor more information\nfrom /Users/prussiap/.gem/ruby/2.2.0/gems/googleauth-0.4.2/lib/googleauth.rb:116:in `get_application_default'\n</code></pre>\n\n<p>Probably due to my confusion or stupidity.</p>\n\n<p>The other method displayed in the google dev site docs linked above and the service accounts seem like the way to go aka <a href=\"https://developers.google.com/api-client-library/ruby/auth/service-accounts\">here</a>.</p>\n\n<p>But nothing works. I've seen a smattering of these client_secrets too</p>\n\n<pre><code>client_secrets = Google::APIClient::ClientSecrets.load\nauthorization = client_secrets.to_authorization\n</code></pre>\n\n<p>of course that .load breaks on it's own as it expects a magical file path or file name but nothing I fed it worked </p>\n\n<p>Any sample code that allows me to either use my client_secret for service account or oauth2 (web app) but without any fancy redirects would be fantastic and really help..</p>\n\n<p><strong>Now for others new to the google api please read below</strong>. I feel like I'm dumb for not seeing this or noticing it but maybe this info can help you guys when I raised the <a href=\"https://github.com/google/google-api-ruby-client/issues/266\">issue</a> on the github repo I was confused..</p>\n\n<p>Apparently the google API-client for ruby is totally different from &lt; 0.9pre1 or greater then that. So is the documentation.</p>\n\n<p>SO if you are reading this type of code and are reading these <a href=\"https://developers.google.com/drive/web/quickstart/ruby\">docs</a>:</p>\n\n<pre><code>require 'google/api_client'\nrequire 'google/api_client/client_secrets'\nrequire 'google/api_client/auth/installed_app'\nrequire 'google/api_client/auth/storage'\nrequire 'google/api_client/auth/storages/file_store'\nrequire 'fileutils'\n\nAPPLICATION_NAME = 'Drive API Quickstart'\nCLIENT_SECRETS_PATH = 'client_secret.json'\nCREDENTIALS_PATH = File.join(Dir.home, '.credentials',\n                             \"drive-quickstart.json\")\nSCOPE = 'https://www.googleapis.com/auth/drive.metadata.readonly\n</code></pre>\n\n<p>Then you're using &lt; 0.9pre1 (I'm pretty sure)</p>\n\n<p>Otherwise you see my code above with the drive_v2, then remove your google_drive gem because it's rolled into one api and read <a href=\"https://developers.google.com/api-client-library/ruby/guide/aaa_oauth\">this</a> doc.</p>\n\n<p>I hope this helps others.</p>\n\n<p>And any help on my authentication problem including using service vs api vs other type of account with some sample code for making authentication and then authenticating with a refresh token. Would be fantastic.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 1647226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fb84d2df934999fc747feb4d7c758e2c?s=128&d=identicon&r=PG", "display_name": "Marcelo Boeira", "link": "https://stackoverflow.com/users/1647226/marcelo-boeira"}, "edited": false, "score": 0, "creation_date": 1481628307, "post_id": 31993482, "comment_id": 69443484, "body": "I found the same issue / solution. When running some tests I was trying to use a &quot;Fabricate.build&quot;, which works for 1:N relations, but not for 1:N:N or 1:N-through."}], "tags": [], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "is_accepted": true, "score": 1, "last_activity_date": 1439482550, "creation_date": 1439482550, "answer_id": 31993482, "question_id": 31974824, "link": "https://stackoverflow.com/questions/31974824/has-many-through-association-before-persistence/31993482#31993482", "title": "has_many through association before persistence", "body": "<p>The <code>through</code> relation still \"works\" in the sense that you can manipulate it normally. I think what you mean is that it doesn't contain any <code>bars</code> added to any of the <code>quxes</code>. This is because the relation <code>bars</code> is separate from the relation <code>quxes</code> even if its not independent. To put it another way, <code>bars</code> is not simply <code>quxes.map(&amp;:bar)</code>, as you say; it runs a totally separate query, something like:</p>\n\n<pre><code>&gt; puts foo.bars.to_sql\nSELECT \"bars\".* FROM \"bars\" INNER JOIN \"quxes\" ON \"bars\".\"id\" = \"quxes\".\"bar_id\" WHERE \"quxes\".\"foo_id\" = 1\n&gt; puts new_foo.quxes.to_sql\nSELECT \"quxes\".* FROM \"quxes\" WHERE \"quxes\".\"foo_id\" = 1\n</code></pre>\n\n<p>This means that unless an associated <code>bar</code> is persisted, the <code>bars</code> relation's SQL won't pick it up:</p>\n\n<pre><code>&gt; persisted_foo.quxes.first.build_bar\n#&lt;Bar id: nil&gt;\n&gt; persisted_foo.bars\n#&lt;ActiveRecord::Associations::CollectionProxy []&gt;\n&gt; persisted_foo.quxes.first.save!\n&gt; persisted_foo.reload\n&gt; persisted_foo.bars\n#&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Bar id: 1&gt;]&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4816935"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 31993482, "answer_count": 1, "score": 1, "last_activity_date": 1439482550, "creation_date": 1439411493, "last_edit_date": 1439429162, "question_id": 31974824, "link": "https://stackoverflow.com/questions/31974824/has-many-through-association-before-persistence", "title": "has_many through association before persistence", "body": "<p>Before a <code>:through</code> relationship has been persisted, is it still possible to return the association?</p>\n\n<p>Here is a simplified version of the class structure:</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\n  has_many :quxes\n  has_many :bars, through: :quxes\nend\n\nclass Bar &lt; ActiveRecord::Base\n  # there is no has_many :quxes -- this class doesn't care\nend\n\nclass Qux &lt; ActiveRecord::Base\n  belongs_to :foo\n  belongs_to :bar\nend\n</code></pre>\n\n<p>So, I want to make calls like <code>foo.bars</code> which is equivalent to <code>foo.quxes.map(&amp;:bars)</code></p>\n\n<p>I'm cloning <code>Foo</code>s, but not saving them. <code>Qux</code>s are copied from <code>old_foo</code> to <code>new_foo</code> by</p>\n\n<pre><code>new_foo.quxes &lt;&lt; old_foo.quxes.map(&amp;:dup)\n</code></pre>\n\n<p>Please note that the above results in:</p>\n\n<pre><code>new_foo.quxes.first.foo == new_foo\n\nnew_foo.quxes.first.foo_id == old_foo.id\n</code></pre>\n\n<p>which shows that the association exists, but is not yet persisted.</p>\n\n<p>It seems to me you should now be able to do:</p>\n\n<pre><code>new_foo.bars # same as new_foo.quxes.map(&amp;:bar)\n</code></pre>\n\n<p>But it actually returns <code>[]</code></p>\n\n<p>Is it possible for this association <code>new_foo.bars</code> to work before <code>new_foo</code> and its new <code>quxes</code> are saved? Is this even expected/desirable behavior for <code>:through</code>? </p>\n"}, {"tags": ["ruby", "json", "database", "sqlite"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 2, "creation_date": 1439411249, "post_id": 31974610, "comment_id": 51856155, "body": "Looks like you want to check whether a row exists in DB.  Did you look at this answer :   <a href=\"http://stackoverflow.com/questions/13488593/sqlite-check-if-a-row-exists\" title=\"sqlite check if a row exists\">stackoverflow.com/questions/13488593/&hellip;</a>  ?"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1439411693, "post_id": 31974610, "comment_id": 51856403, "body": "Cool Ill have a look at that see if I can get that working. Cheers"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1439412460, "post_id": 31974610, "comment_id": 51856840, "body": "@WandMaker Thanks for the link working now literally spent the last week trying to solve that problem :)"}], "owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 1, "closed_date": 1439756288, "answer_count": 0, "score": 0, "last_activity_date": 1439410722, "creation_date": 1439410722, "question_id": 31974610, "link": "https://stackoverflow.com/questions/31974610/how-to-apply-the-results-of-a-method-to-a-sql-query", "closed_reason": "Duplicate", "title": "How to apply the results of a method to a SQL query?", "body": "<p>I am a total newbie to the coding world and I have been stuck on a problem for the last few days. Basically I am trying to add data from a JSON file to a SQLITE DB. At the moment when ever I run my code all the JSON entry's are being added to the DB file which means that there are loads of multiple entry's. What I need to do is find away of trying to check the data base for the BUYER_ID if it is contained in the JSON file do nothing and if it's not in the JSON file then add it. Below is a simplified version of my code.</p>\n\n<p>Any help or even a link to website for some guidance would be appreciated.</p>\n\n<pre><code>def read_email\n   Read JSON from a file, iterate over objects\n    file = open(\"receiptdata_EXD.json\")\n    json = file.read\n    parsed = JSON.parse(json)\n    parsed['results'].each do |child|\n    buyer_user_id = child['buyer_user_id']                         \n\n    db = SQLite3::Database.open \"test.db\"\n    row = db.get_first_row \"SELECT BUYER_USER_ID FROM CUST_DATA WHERE BUYER_USER_ID='#{buyer_user_id}'\" \n     end\n\n        if buyer_user_id == row\n            puts \"SUCCESS\"\n        else \n            puts \"ADD THIS TO THE DATABASE\"\n        end\n\n    end \n  end\n  read_email\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "ruby-on-rails-4", "authentication"], "answers": [{"comments": [{"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1439411415, "post_id": 31974492, "comment_id": 51856254, "body": "Thanks for pointing me to this difference between cookie and Active Record store!"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 2, "last_activity_date": 1439410624, "last_edit_date": 1439410624, "creation_date": 1439410319, "answer_id": 31974492, "question_id": 31974356, "link": "https://stackoverflow.com/questions/31974356/how-to-remember-the-organization-a-user-is-logged-in-for-switching-between-orga/31974492#31974492", "title": "How to remember the organization a user is logged in for? Switching between organizations", "body": "<p>You can store the information in <a href=\"http://guides.rubyonrails.org/security.html#what-are-sessions-questionmark\" rel=\"nofollow\">sessions hash</a>, but not use cookie store, instead use <a href=\"https://github.com/rails/activerecord-session_store\" rel=\"nofollow\">Active Record store</a></p>\n"}, {"comments": [{"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1439411412, "post_id": 31974520, "comment_id": 51856250, "body": "Thanks, it sounds like <code>session</code> is the way to go. What happens to <code>session</code> in the following use case though: 1) user logs in with &quot;remember me&quot; checked; 2) <code>session[:logged_in_for]</code> hash gets set; 3) user closes browser while still being logged in; 4) user opens browser and website again, which doesn&#39;t require login because of &quot;remember me&quot; option. Wouldn&#39;t then <code>session[:logged_in_for]</code> be <code>nil</code> since this gets destroyed upon closing the browser?"}, {"owner": {"reputation": 390, "user_id": 2714532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b237c0974800e4e365020f3786647444?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Jin", "link": "https://stackoverflow.com/users/2714532/fan-jin"}, "reply_to_user": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 1, "creation_date": 1439413055, "post_id": 31974520, "comment_id": 51857175, "body": "1) <code>session</code> is not affected as the &quot;remember me&quot; option will use cookies (exact implementation varies); 2) You will have access to <code>session[:logged_in_for]</code> as long as the browser session is live; 3) The <code>session</code> will be erased but the <code>cookies</code> will persist, allowing user to come back without log in if &quot;remember me&quot; is selected; 4) You&#39;re correct, the <code>session[:logged_in_for]</code> will be nil. Now, it depends on to what degree you want to remember the organization for the user. You can use <code>cookies</code> for machine dependent, store in db across machines. However,  remember <code>cookies</code> is not secure."}], "tags": [], "owner": {"reputation": 390, "user_id": 2714532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b237c0974800e4e365020f3786647444?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Jin", "link": "https://stackoverflow.com/users/2714532/fan-jin"}, "is_accepted": true, "score": 2, "last_activity_date": 1439410401, "creation_date": 1439410401, "answer_id": 31974520, "question_id": 31974356, "link": "https://stackoverflow.com/questions/31974356/how-to-remember-the-organization-a-user-is-logged-in-for-switching-between-orga/31974520#31974520", "title": "How to remember the organization a user is logged in for? Switching between organizations", "body": "<p>It really depends on which experience you're looking to create for the end user. In your cases:</p>\n\n<ol>\n<li><p>This will allow remembering of organization between logins, which in your application, can be useful or complete non-sense. If indeed it's useful to remember an organization (i.e, the logistics of user choosing an organization after login is non-frequent), then this could create a better user experience.</p></li>\n<li><p><code>session</code> is secure, and you can use it like a hash and it would not collide with other features in your app (unless you use the same key). This case is suited for your application when user should always choose an organization after login, and thus it should be session based.</p></li>\n</ol>\n\n<p>Ref: <a href=\"http://guides.rubyonrails.org/security.html\" rel=\"nofollow\">http://guides.rubyonrails.org/security.html</a></p>\n\n<ol start=\"3\">\n<li>Like you mentioned, this is non-ideal, as you already know.</li>\n</ol>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 31974520, "answer_count": 2, "score": 1, "last_activity_date": 1439411501, "creation_date": 1439409799, "last_edit_date": 1439411501, "question_id": 31974356, "link": "https://stackoverflow.com/questions/31974356/how-to-remember-the-organization-a-user-is-logged-in-for-switching-between-orga", "title": "How to remember the organization a user is logged in for? Switching between organizations", "body": "<p><strong>Background:</strong> </p>\n\n<ul>\n<li><code>User</code> and <code>Organization</code> have a <code>many-to-many</code> relationship through <code>Relationship</code>. So a user can be part of multiple organizations.</li>\n<li>But a user can only be logged in for 1 organization. </li>\n<li>Therefore the user has a screen where he can switch between the organizations he belongs to.</li>\n<li>Also, <code>user</code> has a default organization, which is the organization the user initially logs in for. This is implemented using a <code>has-one through</code> relationship.</li>\n</ul>\n\n<p><strong>How to know/remember which organization a user is currently logged in for?</strong></p>\n\n<p>Now I'm a bit in a pickle how to implement how the app should know/remember which organization a user is currently logged in for. I see three options and am hoping for advice which should work best:</p>\n\n<ol>\n<li>An <strong>additional column in the <code>User</code> db</strong> that stores the id of the <code>organization</code> (or <code>relationship</code>?) for which the user currently is logged in. A helper method <code>logged_in_for</code> could then find the organization based on the value in that column and return the organization the user is logged in for. Implementation using a db column also enables validation so that a user can't set the organization it is logged in for to an organization it is not even part of.</li>\n<li>Use a <strong>cookie</strong>: <code>session[:logged_in_for]</code> that defines/sets the organization the user is currently logged in for. However, 1) I have doubts whether this is secure (not sure why), 2) I think the first option facilitates validation better, 3) I also don't think this would work in combination with the log in \"remember me\" option?</li>\n<li>Implement an <strong>additional <code>has-one through</code> relationship</strong> that defines the organization a user is logged in for. This is basically an extension of the first option that adds a relationship. Since I already have so many relationships I don't prefer this option. Or is there no way around this addition for the first option?</li>\n</ol>\n\n<p>Is the first option indeed an effective way to know/remember which organization a user is currently logged in for?</p>\n"}, {"tags": ["ruby", "server", "rack"], "answers": [{"tags": [], "owner": {"reputation": 3060, "user_id": 836756, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6c73c29c74f1f08e543a22cd9a4513d1?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/836756/adam"}, "is_accepted": true, "score": 2, "last_activity_date": 1439410748, "creation_date": 1439410748, "answer_id": 31974620, "question_id": 31974258, "link": "https://stackoverflow.com/questions/31974258/differences-between-ruby-web-servers-and-others-like-nginx/31974620#31974620", "title": "Differences between Ruby web servers and others like nginx", "body": "<p>Rack is an interface, a specification, for application servers in Ruby. These application servers typically take in HTTP requests and return HTTP responses over either TCP ports or unix sockets. Ruby web apps will leverage one of the app servers that implement the Rack specification (thin, puma, unicorn, etc). You wouldn't usually expose the application server directly to the internet for a variety of reasons, one of the most important being that these application servers are meant to be a bridge between application code and http, not to stand up to the wide open internet. So, the app server typically has a web server, like nginx or apache, sitting in front of it. It's very common to have http requests coming into nginx on port 80 and then having nginx distributing those requests to one or more rack application servers running on a different port.</p>\n"}], "owner": {"reputation": 4981, "user_id": 705725, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3oNDr.jpg?s=128&g=1", "display_name": "dsp_099", "link": "https://stackoverflow.com/users/705725/dsp-099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "closed_date": 1439419102, "accepted_answer_id": 31974620, "answer_count": 1, "score": 3, "last_activity_date": 1439410748, "creation_date": 1439409398, "question_id": 31974258, "link": "https://stackoverflow.com/questions/31974258/differences-between-ruby-web-servers-and-others-like-nginx", "closed_reason": "Needs more focus", "title": "Differences between Ruby web servers and others like nginx", "body": "<p>This one's a doozy, but bear with me.</p>\n\n<p>What's the difference between HAProxy, apache/nginx, rack, (thin, puma, mongrel, webrick) and an application server?</p>\n\n<p>It seems that Rack always uses one of the aforementioned web servers, so why doesn't it ever use nginx? Seems like nginx is some other breed of server.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring", "raise"], "comments": [{"owner": {"reputation": 150, "user_id": 1813096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cb81946ee34846c11e09dddc52a2e5a?s=128&d=identicon&r=PG", "display_name": "h0lyalg0rithm", "link": "https://stackoverflow.com/users/1813096/h0lyalg0rithm"}, "edited": false, "score": 0, "creation_date": 1439455668, "post_id": 31974207, "comment_id": 51872247, "body": "You could use before_action to clean up the code The docs have a pretty good example on it <a href=\"http://guides.rubyonrails.org/action_controller_overview.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/action_controller_overview.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "is_accepted": true, "score": 0, "last_activity_date": 1439508999, "last_edit_date": 1592644375, "creation_date": 1439508999, "answer_id": 32000136, "question_id": 31974207, "link": "https://stackoverflow.com/questions/31974207/how-to-break-rails-application-and-return-404-as-json/32000136#32000136", "title": "How to break Rails application and return 404 as JSON", "body": "<h1>My solution:</h1>\n<p>lib/myapp/exceptions.rb</p>\n<pre><code>module MyApp\n  module Exceptions\n    class Error &lt; StandardError; end\n    class ModelNotFound &lt; Error\n\n      def initialize(model)\n        # api_error - helper for create standart JSON-response\n        @json = api_error(&quot;#{ model.model_name.plural }.#{ model.model_name.singular }_not_found&quot;)\n        message = @json\n        super(message)\n      end\n\n      def json\n        @json\n      end\n    end\n\n    def self.included(base)\n      base.rescue_from MyApp::Exceptions::ModelNotFound do |e|\n        render json: e.json, status: :not_found\n      end\n    end\n  end\nend\n</code></pre>\n<p>app/controllers/application_controller.rb</p>\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n  ...\n  include MyApp::Exceptions\n\n  def found?(model, id)\n    @model = model.find id\n    return @model if @model\n    raise MyApp::Exceptions::ModelNotFound.new model\n  end\n</code></pre>\n<h1>Sample of using:</h1>\n<p>app/controllers/users_controller.rb</p>\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n    @user = found? User, params[:user_id]\n\n    # ... some actions with @user object\n  end\nend\n</code></pre>\n<p>when i execute GET request /users/77777 application returns:</p>\n<pre><code>{\n    'code': 'users_user_not_found',\n    'error': 'User not found'\n}\n</code></pre>\n"}], "owner": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 32000136, "answer_count": 1, "score": 0, "last_activity_date": 1439508999, "creation_date": 1439409217, "question_id": 31974207, "link": "https://stackoverflow.com/questions/31974207/how-to-break-rails-application-and-return-404-as-json", "title": "How to break Rails application and return 404 as JSON", "body": "<p>Rails application working as API service. I use mongoid </p>\n\n<p>In a controller i write now:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n    @user = User.find params[:user_id]\n    unless @user\n      render json: { error: I18n.t('user.messages.not_found') }, status: :not_found\n      return\n    end\n    # ... some actions with @user object \n  end\nend\n</code></pre>\n\n<p>I need make code cleaner and move this code in module. I assume that the code in controller may look like this:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n    @user = User.find params[:user_id]\n    not_found? @user\n\n    # ... some actions with @user object\n  end\nend\n</code></pre>\n\n<p>or like this</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n    @user = found? User, params[:user_id]\n\n    # ... some actions with @user object\n  end\nend\n</code></pre>\n\n<p>One of example how it can work is Pundit gem (<a href=\"https://github.com/elabs/pundit\" rel=\"nofollow\">https://github.com/elabs/pundit</a>). In my controller i write:</p>\n\n<pre><code>...\ndef index\n  authorize User, :index?\n  @users = User.all\nend\n...\n</code></pre>\n\n<p>if user hasn't access to this page then Pundit raise exception and return to client error message with 401 http code.</p>\n\n<p>What is better way to refactor my code to make controllers cleaner?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1439415957, "post_id": 31974065, "comment_id": 51858518, "body": "Can you show the code that you already have?"}, {"owner": {"reputation": 335, "user_id": 587518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3981261dafed89114db84c7f6d92d2?s=128&d=identicon&r=PG", "display_name": "Gonzalo Robaina", "link": "https://stackoverflow.com/users/587518/gonzalo-robaina"}, "reply_to_user": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1439424482, "post_id": 31974065, "comment_id": 51861033, "body": "All the CRUD is being managed by RailsAdmin, no custom code yet. only Model callbacks."}, {"owner": {"reputation": 1490, "user_id": 753705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3dc5b7c682d4dc91050904b494fcb1d6?s=128&d=identicon&r=PG", "display_name": "abhishek77in", "link": "https://stackoverflow.com/users/753705/abhishek77in"}, "edited": false, "score": 0, "creation_date": 1439445596, "post_id": 31974065, "comment_id": 51866557, "body": "Looks like you would want to override the <code>create</code> action. See if <code>rails_admin</code> lets you do that. Or add a <code>create</code> like custom action which might let you redirect - <a href=\"https://github.com/sferik/rails_admin/wiki/Custom-action\" rel=\"nofollow noreferrer\">github.com/sferik/rails_admin/wiki/Custom-action</a>. Definitely this is not a first class feature in Rails Admin."}], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 743975, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6b0899d70c3239ead231cebc7e8ce9af?s=128&d=identicon&r=PG", "display_name": "Dmitry Polyakovsky", "link": "https://stackoverflow.com/users/743975/dmitry-polyakovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1452828911, "last_edit_date": 1452828911, "creation_date": 1452824769, "answer_id": 34803408, "question_id": 31974065, "link": "https://stackoverflow.com/questions/31974065/redirecting-to-another-resource-after-creating-in-rails-admin/34803408#34803408", "title": "Redirecting to another resource after creating in rails admin", "body": "<p>I would override create action.  Here is how I would do controller</p>\n\n<pre><code>  register_instance_option :controller do\n    Proc.new do\n      object.create\n      flash[:notice] = \"created #{@object.name}\"\n      redirect_to show_path\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 587518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3981261dafed89114db84c7f6d92d2?s=128&d=identicon&r=PG", "display_name": "Gonzalo Robaina", "link": "https://stackoverflow.com/users/587518/gonzalo-robaina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452828911, "creation_date": 1439408681, "question_id": 31974065, "link": "https://stackoverflow.com/questions/31974065/redirecting-to-another-resource-after-creating-in-rails-admin", "title": "Redirecting to another resource after creating in rails admin", "body": "<p>Imagine I have this too models: Invoice and PaymentOrder.\nMy business logic makes a new PaymentOrder when you create a new Invoice.</p>\n\n<p>So I need to redirect the user to the newly created PaymentOrder after a user creates an Invoice using Rails Admin.</p>\n\n<p>Any ideas ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "jenkins", "hudson"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1439408927, "post_id": 31973953, "comment_id": 51855006, "body": "show us the contents of the file."}, {"owner": {"reputation": 51, "user_id": 3469126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2ee007306258cbfa23565ef1314ece?s=128&d=identicon&r=PG&f=1", "display_name": "asang", "link": "https://stackoverflow.com/users/3469126/asang"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1439409008, "post_id": 31973953, "comment_id": 51855056, "body": "@Anthony File just has <code>puts &quot;Hello&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2890, "user_id": 38696, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RaR2O.jpg?s=128&g=1", "display_name": "JohnZaj", "link": "https://stackoverflow.com/users/38696/johnzaj"}, "edited": false, "score": 0, "creation_date": 1544643277, "post_id": 32184591, "comment_id": 94352967, "body": "Can you elaborate on how you are doing this? Are you using the Hudson Ruby Plugin and calling the Rakefile from there? (and if so how exactly, e.g. with bundler?)"}], "tags": [], "owner": {"reputation": 51, "user_id": 3469126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2ee007306258cbfa23565ef1314ece?s=128&d=identicon&r=PG&f=1", "display_name": "asang", "link": "https://stackoverflow.com/users/3469126/asang"}, "is_accepted": false, "score": 1, "last_activity_date": 1440425833, "creation_date": 1440425833, "answer_id": 32184591, "question_id": 31973953, "link": "https://stackoverflow.com/questions/31973953/is-it-possible-to-execute-a-ruby-script-as-a-pre-build-step/32184591#32184591", "title": "Is it possible to execute a ruby script as a pre-build step?", "body": "<p>After researching a bit, it's not possible to specify the path of Ruby Script.\nInstead I wrote a Rake Task and specified the path of Rakefile.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 3469126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2ee007306258cbfa23565ef1314ece?s=128&d=identicon&r=PG&f=1", "display_name": "asang", "link": "https://stackoverflow.com/users/3469126/asang"}, "edited": false, "score": 0, "creation_date": 1440429770, "post_id": 32185226, "comment_id": 52257346, "body": "I know that we can write any kind of script that needs to be executed in that box. The reason why I feel that we&#39;re not able to specify the path of file is whatever you write in that file is compiled into one temporary file and Jenkins executes it as ruby script. For example: <code>ruby ~&#47;.sample.rb</code> is compiled into <code>[workspace] $ ruby -v &#47;tmp&#47;hudson1715556226240775423.rb</code> Jenkins try to execute these set of lines as a Ruby commands which it is not. Instead I feel jenkins should be able to determine which is script file and which is actual script."}], "tags": [], "owner": {"reputation": 1190, "user_id": 1047937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cc0285786275cb21edfefbc3d527e6de?s=128&d=identicon&r=PG&f=1", "display_name": "dgmora", "link": "https://stackoverflow.com/users/1047937/dgmora"}, "is_accepted": false, "score": 0, "last_activity_date": 1440427647, "creation_date": 1440427647, "answer_id": 32185226, "question_id": 31973953, "link": "https://stackoverflow.com/questions/31973953/is-it-possible-to-execute-a-ruby-script-as-a-pre-build-step/32185226#32185226", "title": "Is it possible to execute a ruby script as a pre-build step?", "body": "<p>It is possible to execute any kind of script. You can write your commands as if you where in the terminal, there is no apparent reason why that shouldn't work.</p>\n\n<p>What is probably happening is that the file you're trying to execute is not there. Can it be that instead of <code>ruby ~/.sample.rb</code> you have to write <code>ruby ~/sample.rb</code>? If it is not that try to debug it. You could put <code>ls</code> just before <code>ruby ~/.sample.rb</code> to see where is jenkins trying to execute your code.</p>\n"}], "owner": {"reputation": 51, "user_id": 3469126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2ee007306258cbfa23565ef1314ece?s=128&d=identicon&r=PG&f=1", "display_name": "asang", "link": "https://stackoverflow.com/users/3469126/asang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2297, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1440427647, "creation_date": 1439408295, "last_edit_date": 1439410389, "question_id": 31973953, "link": "https://stackoverflow.com/questions/31973953/is-it-possible-to-execute-a-ruby-script-as-a-pre-build-step", "title": "Is it possible to execute a ruby script as a pre-build step?", "body": "<p>I want to execute a ruby script for all of my projects on Jenkins. Whenever I try to add a ruby script at a pre-build step it fails the build and returns with following error:</p>\n\n<pre><code>[workspace] $ ruby -v /tmp/hudson4496135006077199221.rb\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n/tmp/hudson4496135006077199221.rb:1: unterminated regexp meets end of file\nBuild step 'Execute Ruby script' marked build as failure\n</code></pre>\n\n<p>For now ruby script just has one <code>print</code> statement and nothing else.</p>\n\n<p>Whereas if I put the ruby code in the space provided it runs just fine.</p>\n\n<p>It will be cumbersome to paste the ruby script on all the projects which is not desirable.</p>\n\n<p>Please let me know if there is a way to add Ruby Script file.</p>\n\n<p>Update: \nContents of the file:<code>puts \"Hello\"</code></p>\n\n<p>Command used in the Jenkins pre-build step: <code>ruby ~/.sample.rb</code></p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "pc", "execjs"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5220782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298901bf02c3b163d4ac95296d0d4498?s=128&d=identicon&r=PG&f=1", "display_name": "Atnevon", "link": "https://stackoverflow.com/users/5220782/atnevon"}, "edited": false, "score": 0, "creation_date": 1439418369, "post_id": 31974190, "comment_id": 51859338, "body": "No dice. I did the edit people posted about changing the UTC-16 to 8 as well."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 11, "user_id": 5220782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298901bf02c3b163d4ac95296d0d4498?s=128&d=identicon&r=PG&f=1", "display_name": "Atnevon", "link": "https://stackoverflow.com/users/5220782/atnevon"}, "edited": false, "score": 0, "creation_date": 1439433733, "post_id": 31974190, "comment_id": 51863084, "body": "@Atnevon look at my edit and try this out. Let me know!"}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1439433693, "last_edit_date": 1439433693, "creation_date": 1439409149, "answer_id": 31974190, "question_id": 31973945, "link": "https://stackoverflow.com/questions/31973945/execjsruntimeerror-errors-when-creating-new-ruby-on-rails-crash-after-control/31974190#31974190", "title": "ExecJS::RuntimeError Errors when creating new Ruby on Rails. Crash after controller", "body": "<p>Quick work around could be:\nRemoving <code>//= require_tree .</code> from <code>application.js</code></p>\n\n<p>Then, restart the server and try again.</p>\n\n<h3>Update:</h3>\n\n<p>Navigate to <code>\\app\\views\\layouts\\application.html.erb</code></p>\n\n<p>Change line 6 from:</p>\n\n<pre><code>'&lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;'\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= javascript_include_tag 'defaults', 'data-turbolinks-track' =&gt; true %&gt;\n</code></pre>\n\n<p>See if that works!</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5220782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298901bf02c3b163d4ac95296d0d4498?s=128&d=identicon&r=PG&f=1", "display_name": "Atnevon", "link": "https://stackoverflow.com/users/5220782/atnevon"}, "is_accepted": false, "score": 0, "last_activity_date": 1439469790, "creation_date": 1439469790, "answer_id": 31988608, "question_id": 31973945, "link": "https://stackoverflow.com/questions/31973945/execjsruntimeerror-errors-when-creating-new-ruby-on-rails-crash-after-control/31988608#31988608", "title": "ExecJS::RuntimeError Errors when creating new Ruby on Rails. Crash after controller", "body": "<p>I found the problem to be actually with a stray variable inside of my registry. For my class we setup sublime text 2 to have a shortcut to open directly in command prompt (it does it automatically on Macs)</p>\n\n<p>Here is the value I got rid of, and also reinstalled node.js</p>\n\n<p><a href=\"http://imgur.com/a/8KkW3\" rel=\"nofollow\">http://imgur.com/a/8KkW3</a></p>\n"}], "owner": {"reputation": 11, "user_id": 5220782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298901bf02c3b163d4ac95296d0d4498?s=128&d=identicon&r=PG&f=1", "display_name": "Atnevon", "link": "https://stackoverflow.com/users/5220782/atnevon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1445361232, "creation_date": 1439408251, "last_edit_date": 1439419359, "question_id": 31973945, "link": "https://stackoverflow.com/questions/31973945/execjsruntimeerror-errors-when-creating-new-ruby-on-rails-crash-after-control", "title": "ExecJS::RuntimeError Errors when creating new Ruby on Rails. Crash after controller", "body": "<p>I'm having an issue creating a new Rails app. I created a test to and copied my command prompt to let you see what happens.</p>\n\n<p>The story is this: I can make the app, boot up the test server, and get the page. I can then generate a controller for Pages with a page inside called home. Its created, I boot the server back. Now, this is where the crashes and errors happen.</p>\n\n<p>In my URL bar, the second I type \"/p\" for Pages the error messages generate in my prompt.</p>\n\n<pre><code>    'C:\\Program' is not recognized as an internal or external command,\noperable program or batch file.\n\nC:\\Users\\USER\\Desktop\\Rails&gt;rails new testing_errors\nDL is deprecated, please use Fiddle\n      create\n      create  README.rdoc\n      create  Rakefile\n      create  config.ru\n      create  .gitignore\n      create  Gemfile\n      create  app\n      create  app/assets/javascripts/application.js\n      create  app/assets/stylesheets/application.css\n      create  app/controllers/application_controller.rb\n      create  app/helpers/application_helper.rb\n      create  app/views/layouts/application.html.erb\n      create  app/assets/images/.keep\n      create  app/mailers/.keep\n      create  app/models/.keep\n      create  app/controllers/concerns/.keep\n      create  app/models/concerns/.keep\n      create  bin\n      create  bin/bundle\n      create  bin/rails\n      create  bin/rake\n      create  bin/setup\n      create  config\n      create  config/routes.rb\n      create  config/application.rb\n      create  config/environment.rb\n      create  config/secrets.yml\n      create  config/environments\n      create  config/environments/development.rb\n      create  config/environments/production.rb\n      create  config/environments/test.rb\n      create  config/initializers\n      create  config/initializers/assets.rb\n      create  config/initializers/backtrace_silencers.rb\n      create  config/initializers/cookies_serializer.rb\n      create  config/initializers/filter_parameter_logging.rb\n      create  config/initializers/inflections.rb\n      create  config/initializers/mime_types.rb\n      create  config/initializers/session_store.rb\n      create  config/initializers/wrap_parameters.rb\n      create  config/locales\n      create  config/locales/en.yml\n      create  config/boot.rb\n      create  config/database.yml\n      create  db\n      create  db/seeds.rb\n      create  lib\n      create  lib/tasks\n      create  lib/tasks/.keep\n      create  lib/assets\n      create  lib/assets/.keep\n      create  log\n      create  log/.keep\n      create  public\n      create  public/404.html\n      create  public/422.html\n      create  public/500.html\n      create  public/favicon.ico\n      create  public/robots.txt\n      create  test/fixtures\n      create  test/fixtures/.keep\n      create  test/controllers\n      create  test/controllers/.keep\n      create  test/mailers\n      create  test/mailers/.keep\n      create  test/models\n      create  test/models/.keep\n      create  test/helpers\n      create  test/helpers/.keep\n      create  test/integration\n      create  test/integration/.keep\n      create  test/test_helper.rb\n      create  tmp/cache\n      create  tmp/cache/assets\n      create  vendor/assets/javascripts\n      create  vendor/assets/javascripts/.keep\n      create  vendor/assets/stylesheets\n      create  vendor/assets/stylesheets/.keep\n         run  bundle install\nDL is deprecated, please use Fiddle\nFetching gem metadata from https://rubygems.org/............\nFetching additional metadata from https://rubygems.org/..\nResolving dependencies...\nUsing rake 10.4.2\nUsing i18n 0.7.0\nUsing json 1.8.3\nUsing minitest 5.8.0\nUsing thread_safe 0.3.5\nUsing tzinfo 1.2.2\nUsing activesupport 4.2.3\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile 0.6.2\nUsing nokogiri 1.6.6.2\nUsing rails-deprecated_sanitizer 1.0.3\nUsing rails-dom-testing 1.0.6\nUsing loofah 2.0.2\nUsing rails-html-sanitizer 1.0.2\nUsing actionview 4.2.3\nUsing rack 1.6.4\nUsing rack-test 0.6.3\nUsing actionpack 4.2.3\nUsing globalid 0.3.6\nUsing activejob 4.2.3\nUsing mime-types 2.6.1\nUsing mail 2.6.3\nUsing actionmailer 4.2.3\nUsing activemodel 4.2.3\nUsing arel 6.0.3\nUsing activerecord 4.2.3\nUsing debug_inspector 0.0.2\nUsing binding_of_caller 0.7.2\nUsing bundler 1.7.7\nUsing columnize 0.9.0\nUsing byebug 5.0.0\nUsing coffee-script-source 1.9.1.1\nUsing execjs 2.5.2\nUsing coffee-script 2.4.1\nUsing thor 0.19.1\nUsing railties 4.2.3\nUsing coffee-rails 4.1.0\nUsing multi_json 1.11.2\nUsing jbuilder 2.3.1\nUsing jquery-rails 4.0.4\nUsing sprockets 3.3.0\nUsing sprockets-rails 2.3.2\nUsing rails 4.2.3\nUsing rdoc 4.2.0\nUsing sass 3.4.16\nUsing tilt 1.4.1\nUsing sass-rails 5.0.3\nUsing sdoc 0.4.1\nUsing sqlite3 1.3.10\nUsing turbolinks 2.5.3\nUsing tzinfo-data 1.2015.6\nUsing uglifier 2.7.1\nUsing web-console 2.2.1\nYour bundle is complete!\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n\nC:\\Users\\USER\\Desktop\\Rails&gt;cd testing_errors\n\nC:\\Users\\USER\\Desktop\\Rails\\testing_errors&gt;rails generate controller Pages home\nDL is deprecated, please use Fiddle\n      create  app/controllers/pages_controller.rb\n       route  get 'pages/home'\n      invoke  erb\n      create    app/views/pages\n      create    app/views/pages/home.html.erb\n      invoke  test_unit\n      create    test/controllers/pages_controller_test.rb\n      invoke  helper\n      create    app/helpers/pages_helper.rb\n      invoke    test_unit\n      invoke  assets\n      invoke    coffee\n      create      app/assets/javascripts/pages.coffee\n      invoke    scss\n      create      app/assets/stylesheets/pages.scss\n\nC:\\Users\\USER\\Desktop\\Rails\\testing_errors&gt;rails s\nDL is deprecated, please use Fiddle\n=&gt; Booting WEBrick\n=&gt; Rails 4.2.3 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n[2015-08-12 15:23:50] INFO  WEBrick 1.3.1\n[2015-08-12 15:23:50] INFO  ruby 2.1.5 (2014-11-13) [i386-mingw32]\n[2015-08-12 15:23:50] INFO  WEBrick::HTTPServer#start: pid=9420 port=3000\n\n\nStarted GET \"/\" for ::1 at 2015-08-12 15:23:52 -0400\nProcessing by Rails::WelcomeController#index as HTML\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.2.3/lib/rails/templates/rails/welcome/index.html.erb (3.0ms)\nCompleted 200 OK in 31ms (Views: 16.0ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/pages/home\" for ::1 at 2015-08-12 15:23:57 -0400\nProcessing by PagesController#home as HTML\n  Rendered pages/home.html.erb within layouts/application (0.0ms)\n'C:\\Program' is not recognized as an internal or external command,\noperable program or batch file.\nCompleted 500 Internal Server Error in 479ms (ActiveRecord: 0.0ms)\n\nActionView::Template::Error ([\"ok\"]):\n    3: &lt;head&gt;\n    4:   &lt;title&gt;TestingErrors&lt;/title&gt;\n    5:   &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n    6:   &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n    7:   &lt;%= csrf_meta_tags %&gt;\n    8: &lt;/head&gt;\n    9: &lt;body&gt;\n  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___495674848_49918752'\n\n\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (0.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.9ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.5ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (36.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.5ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (82.8ms)\n[2015-08-12 15:24:02] INFO  going to shutdown ...\n[2015-08-12 15:24:02] INFO  WEBrick::HTTPServer#start done.\nExiting\nTerminate batch job (Y/N)? y\n\nC:\\Users\\USER\\Desktop\\Rails\\testing_errors&gt;\n</code></pre>\n\n<p>I am running Windows 10 Pro and here is my Ruby, Rails, and Node info.</p>\n\n<pre><code>C:\\Users\\USER\\Desktop\\Rails\\testing_errors&gt;\n\n\nC:\\Users\\USER\\Desktop\\Rails\\testing_errors&gt;ruby -v\nruby 2.1.5p273 (2014-11-13 revision 48405) [i386-mingw32]\n\nC:\\Users\\USER\\Desktop\\Rails\\testing_errors&gt;node -v\nv0.12.7\n\nC:\\Users\\USER\\Desktop\\Rails\\testing_errors&gt;rails -v\nDL is deprecated, please use Fiddle\nRails 4.2.3\n\nC:\\Users\\arlic\\Desktop\\Rails\\testing_errors&gt;\n</code></pre>\n\n<p>Here is the Message I get as well</p>\n\n<p><a href=\"http://i.imgur.com/x2R2ocZ.png\" rel=\"nofollow\">http://i.imgur.com/x2R2ocZ.png</a></p>\n"}, {"tags": ["ruby", "multithreading", "logging"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1439410073, "post_id": 31973498, "comment_id": 51855590, "body": "I guess, every thread overrides the <code>formatter</code> of the former thread. Therefore your message template contains the <code>user_req_id</code> of the last started thread and the message contains the <code>user_req_id</code> of the thread which calls <code>logger.info</code>."}, {"owner": {"reputation": 31, "user_id": 5202984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1176c74501c44deb30791f9f819eebea?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5202984/marty"}, "reply_to_user": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1439414137, "post_id": 31973498, "comment_id": 51857713, "body": "The whole idea is to have the <code>user_req_id</code> in the message template overwritten. Found the answer here <a href=\"http://stackoverflow.com/questions/8249243/set-ruby-logger-progname-on-per-thread-basis\">link</a> Basically set <code>Thread.current[&#39;id&#39;] = user_req_id</code> and then use <code>#{Thread.current[&#39;id&#39;]}</code> in the formatter."}], "owner": {"reputation": 31, "user_id": 5202984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1176c74501c44deb30791f9f819eebea?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5202984/marty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1439406555, "creation_date": 1439406555, "question_id": 31973498, "link": "https://stackoverflow.com/questions/31973498/formatting-logger-in-ruby", "title": "formatting logger in ruby", "body": "<p>I have simple server in ruby with logger included. I'm formatting logger to include part of the string the server receives from the client. it's ruby 2.0.0</p>\n\n<pre><code>logger = Logger.new(my_file, 3, 2048000)\nlogger.level = Logger::DEBUG\nlogger.info(\"Starting server.\")\n\nserver = TCPServer.new 2000\n\nloop do\n\n  Thread.start(server.accept) do | client|\n\n    user_req  = client.recvfrom(2048)[0].chomp\n\n    # req_id is unique\n    user_req_id = user_req[0..5]\n\n    logger.formatter = proc do |severity, datetime, progname, msg|\n      date_format = datetime.strftime(\"%Y-%m-%d %H:%M:%S.%6N\")\n      \"#{severity} [ #{date_format} ] -- [ #{user_req_id} ] ## #{msg}\\n\"\n      end\n\n    logger.info(\"=1========== #{user_req_id}\")\n    logger.info(\"=2========== #{user_req_id}\")\n    logger.info(\"=3========== #{user_req_id}\")\n    client.close\n\n  end\nend\n</code></pre>\n\n<p>If I run say 100 requests to this server per second the logger doesn't seem to keep up. What I get in the logfile is:</p>\n\n<pre><code>INFO [ 2015-08-12 13:50:56.024895 ] -- [ 636058 ] ## =3========== 413895\nINFO [ 2015-08-12 13:50:55.983973 ] -- [ 702266 ] ## =3========== 903408\nINFO [ 2015-08-12 13:50:56.026447 ] -- [ 636058 ] ## =3========== 159765\nINFO [ 2015-08-12 13:50:56.027220 ] -- [ 636058 ] ## =3========== 623839\nINFO [ 2015-08-12 13:50:56.028004 ] -- [ 636058 ] ## =3========== 119600\nINFO [ 2015-08-12 13:50:56.030873 ] -- [ 636058 ] ## =3========== 438547\nINFO [ 2015-08-12 13:50:56.031684 ] -- [ 636058 ] ## =3========== 350262\nINFO [ 2015-08-12 13:50:55.989753 ] -- [ 702266 ] ## =3========== 140647\nINFO [ 2015-08-12 13:50:56.033201 ] -- [ 636058 ] ## =3========== 711811\nINFO [ 2015-08-12 13:50:55.991291 ] -- [ 702266 ] ## =3========== 614276\nINFO [ 2015-08-12 13:50:56.034981 ] -- [ 636058 ] ## =3========== 016519\nINFO [ 2015-08-12 13:50:56.036542 ] -- [ 636058 ] ## =3========== 040190\nINFO [ 2015-08-12 13:50:56.037481 ] -- [ 636058 ] ## =3========== 704540\nINFO [ 2015-08-12 13:50:56.038423 ] -- [ 636058 ] ## =3========== 099302\nINFO [ 2015-08-12 13:50:56.039301 ] -- [ 636058 ] ## =2========== 838688\nINFO [ 2015-08-12 13:50:56.040924 ] -- [ 636058 ] ## =3========== 411958\nINFO [ 2015-08-12 13:50:56.042387 ] -- [ 636058 ] ## =3========== 332725\nINFO [ 2015-08-12 13:50:56.045384 ] -- [ 636058 ] ## =3========== 816498\nINFO [ 2015-08-12 13:50:56.001173 ] -- [ 237925 ] ## =1========== 237925\n</code></pre>\n\n<p>user_req_id in message is ok, but in formatted logger is not correct. What do I do to fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "alert", "popupwindow"], "owner": {"reputation": 7483, "user_id": 2228688, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/uW7KK.jpg?s=128&g=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/2228688/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439407000, "creation_date": 1439406099, "question_id": 31973371, "link": "https://stackoverflow.com/questions/31973371/rails-popup-alert-with-form-for-a-variable", "title": "Rails Popup alert with form for a variable", "body": "<p>I have a link in my rails website that needs one line of information from the user. How do I set this up.</p>\n\n<p>click link > go to method in controller > show modal alert > user types one line > this value is set to a variable in the method and the method continues as planned.</p>\n\n<p>How do I send an alert that changes the value of a local variable?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "initialization", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 1243, "user_id": 2280625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7906b1cabd358d40f04edf72ce65bae5?s=128&d=identicon&r=PG", "display_name": "kjmagic13", "link": "https://stackoverflow.com/users/2280625/kjmagic13"}, "is_accepted": false, "score": 0, "last_activity_date": 1439406094, "last_edit_date": 1439406094, "creation_date": 1439405548, "answer_id": 31973221, "question_id": 31973076, "link": "https://stackoverflow.com/questions/31973076/how-to-create-object-within-creation-of-another-object/31973221#31973221", "title": "How to create object within creation of another object?", "body": "<p>In your Project model:</p>\n\n<pre><code>after_create :init_first_person\n\ndef init_first_person\n    self.people.create(name: 'Initialized User')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1439406146, "creation_date": 1439406146, "answer_id": 31973380, "question_id": 31973076, "link": "https://stackoverflow.com/questions/31973076/how-to-create-object-within-creation-of-another-object/31973380#31973380", "title": "How to create object within creation of another object?", "body": "<p>In you question you originally mentioned</p>\n\n<blockquote>\n  <p>I would like to automatically create a new Person object when a new Project is initialized. </p>\n</blockquote>\n\n<p>(which by the way is a very bad idea), but then later on you seems to want to create a Person only when a Project is created.</p>\n\n<p>In this case, my suggestion is to define custom method in the <code>Project</code> model that you can call. Don't be afraid of defining new methods. It's way better than using callbacks or override existing default methods.</p>\n\n<pre><code>class Project\n\n  def self.create_project_and_user(attributes = {})\n    # create the user\n    [... ]\n\n    # create the project\n    create(attributes)\n  end\n\nend\n</code></pre>\n\n<p>Then in your controller you will call <code>Project.create_project_and_user(...)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 3228294, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000415182991/picture?type=large", "display_name": "Bartosz \u0141\u0119cki", "link": "https://stackoverflow.com/users/3228294/bartosz-%c5%81%c4%99cki"}, "is_accepted": false, "score": 0, "last_activity_date": 1439412830, "creation_date": 1439412830, "answer_id": 31975203, "question_id": 31973076, "link": "https://stackoverflow.com/questions/31973076/how-to-create-object-within-creation-of-another-object/31975203#31975203", "title": "How to create object within creation of another object?", "body": "<p>Another solution is to create service object which would look something like that:</p>\n\n<pre><code>class CreateProjectService\n  def initialize(params)\n    @params = params\n  end\n\n  def call\n    project = Project.create(params[:project])\n    project.person = Person.create\n  end\nend\n</code></pre>\n\n<p>Then you can use this PORO (Plain Old Ruby Object) in controller by creating it with params from request and calling it. If there would be anything additional to do when creating project then you just add this logic to service.</p>\n\n<p>Really good article to read about patterns used in Rails applications for futher read you can find <a href=\"http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/\" rel=\"nofollow\" title=\"here\">here</a>.</p>\n"}], "owner": {"reputation": 55, "user_id": 5213476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76d3dbd2a803c99d64bb8b48c659c9ae?s=128&d=identicon&r=PG&f=1", "display_name": "user5213476", "link": "https://stackoverflow.com/users/5213476/user5213476"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1254, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1439412830, "creation_date": 1439405113, "question_id": 31973076, "link": "https://stackoverflow.com/questions/31973076/how-to-create-object-within-creation-of-another-object", "title": "How to create object within creation of another object?", "body": "<p>I am using ruby on rails and mongoid. I have a model called Project and model called Person. I would like to automatically create a new Person object when a new Project is initialized. Is there any way I could insert the code to create a new Person inside the Project model. For example, when I do \"Project.create(:name => 'Project 1')\", I would like it to automatically create a new Person object. I have already declared a one-to-one relationship between the models.</p>\n\n<p>Do I need to rewrite the create method of the Project model?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "self-join"], "answers": [{"comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1439405584, "post_id": 31973152, "comment_id": 51853242, "body": "Hum. True. That&#39;s what OP asked."}, {"owner": {"reputation": 129, "user_id": 5220639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-dwcGpgniYjE/AAAAAAAAAAI/AAAAAAAAAC8/XDuE_y5PuVY/photo.jpg?sz=128", "display_name": "Neel Vasa", "link": "https://stackoverflow.com/users/5220639/neel-vasa"}, "edited": false, "score": 0, "creation_date": 1439406285, "post_id": 31973152, "comment_id": 51853628, "body": "I am not sure that is what I am looking for. I am new to Ruby, so I might be wrong. But basically, I have an Employee model with a self-join. I want the foreign-key manager_id to be set to null for employees when the corresponding manager (also an entity of the employee table) is deleted. What you seem to be suggesting is a different Manager class itself"}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "reply_to_user": {"reputation": 129, "user_id": 5220639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-dwcGpgniYjE/AAAAAAAAAAI/AAAAAAAAAC8/XDuE_y5PuVY/photo.jpg?sz=128", "display_name": "Neel Vasa", "link": "https://stackoverflow.com/users/5220639/neel-vasa"}, "edited": false, "score": 0, "creation_date": 1439409736, "post_id": 31973152, "comment_id": 51855427, "body": "@NeelVasa Oops! My bad.  I missed that part.  Same idea though. Add the <code>dependent: :nullify</code> to your <code>has_many :subordinates</code> line. I&#39;ll update the code."}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": true, "score": 9, "last_activity_date": 1439409780, "last_edit_date": 1439409780, "creation_date": 1439405332, "answer_id": 31973152, "question_id": 31973053, "link": "https://stackoverflow.com/questions/31973053/activerecord-nullify-foreign-key-after-deleting-a-child-in-self-joins/31973152#31973152", "title": "ActiveRecord: Nullify foreign key after deleting a child in self-joins", "body": "<p>You want to add <code>dependent: :nullify</code> to your <code>has_many</code> association.</p>\n\n<pre><code>class Employee\u2026\n  has_many :subordinates, class_name: \"Employee\",\n                          foreign_key: \"manager_id\",\n                          dependent: :nullify\nend\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\" rel=\"noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many</a></p>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1527866425, "creation_date": 1527866425, "answer_id": 50646603, "question_id": 31973053, "link": "https://stackoverflow.com/questions/31973053/activerecord-nullify-foreign-key-after-deleting-a-child-in-self-joins/50646603#50646603", "title": "ActiveRecord: Nullify foreign key after deleting a child in self-joins", "body": "<p>Ideally you should have the trigger be set in your database and not rely on Active Record to perform updates.</p>\n\n<hr>\n\n<p>If you are just creating the table, you can:</p>\n\n<pre><code>create_table :employees do |t|\n  t.references :manager, foreign_key: {to_table: :employees, on_delete: :nullify}\n  # ...\nend\n</code></pre>\n\n<hr>\n\n<p>Alternatively, if the table already exists and you are just adding the reference:</p>\n\n<pre><code>add_reference :employees,\n              :manager,\n              foreign_key: {to_table: :employees, on_delete: :nullify}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5220639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-dwcGpgniYjE/AAAAAAAAAAI/AAAAAAAAAC8/XDuE_y5PuVY/photo.jpg?sz=128", "display_name": "Neel Vasa", "link": "https://stackoverflow.com/users/5220639/neel-vasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6037, "favorite_count": 1, "accepted_answer_id": 31973152, "answer_count": 2, "score": 6, "last_activity_date": 1527866425, "creation_date": 1439405052, "question_id": 31973053, "link": "https://stackoverflow.com/questions/31973053/activerecord-nullify-foreign-key-after-deleting-a-child-in-self-joins", "title": "ActiveRecord: Nullify foreign key after deleting a child in self-joins", "body": "<p>I have a self-join for my model in ActiveRecord, as follows: </p>\n\n<pre><code>class Employee &lt; ActiveRecord::Base\n  has_many :subordinates, class_name: \"Employee\",\n                          foreign_key: \"manager_id\"\n\n  belongs_to :manager, class_name: \"Employee\"\nend \n</code></pre>\n\n<p>If I delete a Manager row, I expect 'manager_id' foreign key values for all employees that were under that Manager to be set to NULL. Is this something that is handles implicitly by ActiveRecord, or is it something that needs to be defined somewhere.</p>\n"}, {"tags": ["ruby", "macos", "rubygems"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1439405654, "post_id": 31972968, "comment_id": 51853285, "body": "Don&#39;t use <code>sudo</code> to install Ruby, or change gems. Instead use <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> or <a href=\"http://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">RVM</a> to install and manage Ruby. Read and follow the directions on their respective sites. And, in either case, after installing, don&#39;t use <code>sudo</code> unless you understand what is changing and why you&#39;d want to do it."}], "answers": [{"comments": [{"owner": {"reputation": 5703, "user_id": 804034, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/337109281b648b0ca49ee6ae8bad5fd7?s=128&d=identicon&r=PG", "display_name": "Daniel Saidi", "link": "https://stackoverflow.com/users/804034/daniel-saidi"}, "edited": false, "score": 0, "creation_date": 1450133785, "post_id": 32253142, "comment_id": 56298377, "body": "Thank you so much! I have struggled with new versions of brew and ruby but still could not get pass the /usr/bin problem. Specifying the desired path when running <code>gem install</code> solved the problem."}, {"owner": {"reputation": 12066, "user_id": 135850, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ef75ffd5cef200d26702d07a10d528e8?s=128&d=identicon&r=PG", "display_name": "Paul Schreiber", "link": "https://stackoverflow.com/users/135850/paul-schreiber"}, "edited": false, "score": 0, "creation_date": 1453751542, "post_id": 32253142, "comment_id": 57730234, "body": "The <code>.gemrc</code> should have <code>gem: -n &#47;usr&#47;local&#47;bin</code> (need a space after -n)."}, {"owner": {"reputation": 14984, "user_id": 168939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc18a7074ca1d3f16d35f1a86c3a87c1?s=128&d=identicon&r=PG", "display_name": "nschum", "link": "https://stackoverflow.com/users/168939/nschum"}, "reply_to_user": {"reputation": 12066, "user_id": 135850, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ef75ffd5cef200d26702d07a10d528e8?s=128&d=identicon&r=PG", "display_name": "Paul Schreiber", "link": "https://stackoverflow.com/users/135850/paul-schreiber"}, "edited": false, "score": 0, "creation_date": 1453758517, "post_id": 32253142, "comment_id": 57734155, "body": "@PaulSchreiber Well, I&#39;ve been using it without a space for five months now. :) Are you sure?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1454108618, "post_id": 32253142, "comment_id": 57912947, "body": "Plus 1 for Option #2, which is a viable and safe alternative if you only want those binaries without a separate Ruby. Our home directories are the perfect place for the added gems, and a quick tweak to PATH makes them accessible. I can&#39;t recommend Option #1 because <i>someone</i> will end up overwriting a gem and breaking their system Ruby or Apple&#39;s built-in code that uses it, and then they&#39;ll ask yet another question on SO about how to fix it."}, {"owner": {"reputation": 12066, "user_id": 135850, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ef75ffd5cef200d26702d07a10d528e8?s=128&d=identicon&r=PG", "display_name": "Paul Schreiber", "link": "https://stackoverflow.com/users/135850/paul-schreiber"}, "edited": false, "score": 0, "creation_date": 1455414410, "post_id": 32253142, "comment_id": 58479325, "body": "Indeed, it worked without the space on the next machine I tried it on."}, {"owner": {"reputation": 24288, "user_id": 2044766, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/uHnrV.png?s=128&g=1", "display_name": "Max MacLeod", "link": "https://stackoverflow.com/users/2044766/max-macleod"}, "edited": false, "score": 0, "creation_date": 1464352426, "post_id": 32253142, "comment_id": 62463594, "body": "Awesome! This enabled me to progress with a jazzy install. See <a href=\"https://github.com/realm/jazzy\" rel=\"nofollow noreferrer\">github.com/realm/jazzy</a> and <a href=\"https://github.com/realm/jazzy/issues/570\" rel=\"nofollow noreferrer\">github.com/realm/jazzy/issues/570</a> Original error was &quot;ERROR:  While executing gem ... (Errno::EPERM)     Operation not permitted - /usr/bin/xcodeproj&quot;"}, {"owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1468533783, "post_id": 32253142, "comment_id": 64179778, "body": "I tried option 1 with <code>sudo gem install jekyll  -n&#47;usr&#47;local&#47;bin</code> yet I got this error: <code>Fetching: liquid-3.0.6.gem (100%) Successfully installed liquid-3.0.6 Fetching: kramdown-1.11.1.gem (100%) ERROR:  While executing gem ... (Errno::ENOENT)     No such file or directory - &#47;usr&#47;local&#47;bin</code>. Can it be solved?"}, {"owner": {"reputation": 14984, "user_id": 168939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc18a7074ca1d3f16d35f1a86c3a87c1?s=128&d=identicon&r=PG", "display_name": "nschum", "link": "https://stackoverflow.com/users/168939/nschum"}, "edited": false, "score": 0, "creation_date": 1468695322, "post_id": 32253142, "comment_id": 64236486, "body": "<code>&#47;usr&#47;local&#47;bin</code> doesn&#39;t exist. Check the &quot;probably&quot; link on how to create it."}, {"owner": {"reputation": 3184, "user_id": 718150, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/571bb91118c122fac009d947ffbcbdb7?s=128&d=identicon&r=PG", "display_name": "Sharon", "link": "https://stackoverflow.com/users/718150/sharon"}, "edited": false, "score": 0, "creation_date": 1472137009, "post_id": 32253142, "comment_id": 65640717, "body": "Just upgraded to El Capitan and need to install a gem, option 1 worked like a charm. Very helpful, thank you."}, {"owner": {"reputation": 30419, "user_id": 300224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1", "display_name": "William Entriken", "link": "https://stackoverflow.com/users/300224/william-entriken"}, "edited": false, "score": 0, "creation_date": 1489755205, "post_id": 32253142, "comment_id": 72822184, "body": "So... which option do you recommend?"}, {"owner": {"reputation": 3710, "user_id": 143388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ccefb48b2e953f759bea65cae06420fa?s=128&d=identicon&r=PG", "display_name": "Ryan Ballantyne", "link": "https://stackoverflow.com/users/143388/ryan-ballantyne"}, "edited": false, "score": 1, "creation_date": 1496955917, "post_id": 32253142, "comment_id": 75888652, "body": "This is an excellent answer, but maybe out of date. On Sierra, the option I needed was --install-dir /usr/local/bin"}, {"owner": {"reputation": 654, "user_id": 277259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733b0d1200b9547f216ec7e845f1a1b1?s=128&d=identicon&r=PG", "display_name": "Brian Heese", "link": "https://stackoverflow.com/users/277259/brian-heese"}, "edited": false, "score": 0, "creation_date": 1540394917, "post_id": 32253142, "comment_id": 92851913, "body": "You sir are a boss for this writeup! Thanks, exactly what i was looking for :)"}, {"owner": {"reputation": 1357, "user_id": 3940665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8WfvC.png?s=128&g=1", "display_name": "PatrickDotStar", "link": "https://stackoverflow.com/users/3940665/patrickdotstar"}, "edited": false, "score": 0, "creation_date": 1551601752, "post_id": 32253142, "comment_id": 96694071, "body": "I recommend installing all your gems into your .gem folder in your home folder to avoid using sudo or a ruby version manager.  All you have to do is update your .bash_profile by adding these 2 lines. (Don\u2018t forget to restart your terminal after applying these changes)  <code>export GEM_HOME=~&#47;.gem</code> <code>export PATH=&quot;$GEM_HOME&#47;bin:$PATH&quot;</code>"}], "tags": [], "owner": {"reputation": 14984, "user_id": 168939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc18a7074ca1d3f16d35f1a86c3a87c1?s=128&d=identicon&r=PG", "display_name": "nschum", "link": "https://stackoverflow.com/users/168939/nschum"}, "is_accepted": true, "score": 335, "last_activity_date": 1440688234, "last_edit_date": 1495540966, "creation_date": 1440688234, "answer_id": 32253142, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/32253142#32253142", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p><strong>Disclaimer:</strong> @theTinMan and other Ruby developers often point out not to use <code>sudo</code> when installing gems and point to things like <a href=\"http://rvm.io/rvm/install\" rel=\"noreferrer\">RVM</a>. That's absolutely true when doing Ruby development. Go ahead and use that.</p>\n\n<p>However, many of us just want some binary that happens to be distributed as a gem (e.g. <code>fakes3</code>, <code>cocoapods</code>, <code>xcpretty</code> \u2026). I definitely don't want to bother with managing a separate ruby. Here are your quicker options:</p>\n\n<h3>Option 1: Keep using sudo</h3>\n\n<p>Using <code>sudo</code> is probably fine if you want these tools to be installed globally. </p>\n\n<p>The problem is that these binaries are installed into <code>/usr/bin</code>, which is <a href=\"https://en.wikipedia.org/wiki/System_Integrity_Protection\" rel=\"noreferrer\">off-limits</a> since El Capitan. However, you can install them into <code>/usr/local/bin</code> instead. That's where <a href=\"http://brew.sh\" rel=\"noreferrer\">Homebrew</a> install its stuff, so it <a href=\"https://apple.stackexchange.com/questions/157979/usr-local-doesnt-exist-in-fresh-install-yosemite\">probably</a> exists already.</p>\n\n<pre><code>sudo gem install fakes3 -n/usr/local/bin\n</code></pre>\n\n<p>Gems will be installed into <code>/usr/local/bin</code> and every user on your system can use them if it's in their <a href=\"https://stackoverflow.com/a/10343891/168939\">PATH</a>.</p>\n\n<h3>Option 2: Install in your home directory (without sudo)</h3>\n\n<p>The following will install gems in <code>~/.gem</code> and put binaries in <code>~/bin</code> (which you should then add to your <code>PATH</code>).</p>\n\n<pre><code>gem install fakes3 --user-install -n~/bin\n</code></pre>\n\n<h3>Make it the default</h3>\n\n<p>Either way, you can add these parameters to your <code>~/.gemrc</code> so you don't have to remember them:</p>\n\n<pre><code>gem: -n/usr/local/bin\n</code></pre>\n\n<p>i.e. <code>echo \"gem: -n/usr/local/bin\" &gt;&gt; ~/.gemrc</code></p>\n\n<p><strong>or</strong></p>\n\n<pre><code>gem: --user-install -n~/bin\n</code></pre>\n\n<p>i.e. <code>echo \"gem: --user-install -n~/bin\" &gt;&gt; ~/.gemrc</code></p>\n\n<p>(<em>Tip:</em> You can also throw in <code>--no-document</code> to skip generating Ruby developer documentation.)</p>\n"}, {"tags": [], "owner": {"reputation": 414, "user_id": 4881433, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6210087e542936c12884a04d515beb68?s=128&d=identicon&r=PG&f=1", "display_name": "astrasleepz", "link": "https://stackoverflow.com/users/4881433/astrasleepz"}, "is_accepted": false, "score": 19, "last_activity_date": 1444113595, "creation_date": 1444113595, "answer_id": 32963315, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/32963315#32963315", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>You have to update Xcode to the newest one (v7.0.1) and everything will work as normal. </p>\n\n<p>If after you install the newest Xcode and still doesn't work try to install gem in this way: </p>\n\n<pre><code>sudo gem install -n /usr/local/bin GEM_NAME_HERE\n</code></pre>\n\n<p>For example: </p>\n\n<pre><code>sudo gem install -n /usr/local/bin fakes3\nsudo gem install -n /usr/local/bin compass\nsudo gem install -n /usr/local/bin susy\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6568, "user_id": 129213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f14c071faa96070ed9d80efaf72e4e1?s=128&d=identicon&r=PG", "display_name": "n13", "link": "https://stackoverflow.com/users/129213/n13"}, "edited": false, "score": 0, "creation_date": 1455162051, "post_id": 33043199, "comment_id": 58368868, "body": "Worked well for me! I suppose it gets rid of any weirdness in the bundled ruby install... IMO this is the best solution."}, {"owner": {"reputation": 261, "user_id": 3394490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eacb87ba931a77ba2cd963ce1cc4ef?s=128&d=identicon&r=PG&f=1", "display_name": "WallStProg", "link": "https://stackoverflow.com/users/3394490/wallstprog"}, "edited": false, "score": 0, "creation_date": 1460416807, "post_id": 33043199, "comment_id": 60722267, "body": "You can tell which ruby is being run with ``` which -a ruby ``` On my machine that gives: ``` $ which -a ruby /usr/local/bin/ruby /usr/local/bin/ruby /usr/bin/ruby ``` As to why /usr/local/bin is on PATH twice -- looks like <code>brew install ruby</code> puts it there, even if it&#39;s already there.  Presumably the ruby in /usr/local is configured to install its gem&#39;s in a location that doesn&#39;t need root access (which makes perfect sense actually)."}, {"owner": {"reputation": 261, "user_id": 3394490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eacb87ba931a77ba2cd963ce1cc4ef?s=128&d=identicon&r=PG&f=1", "display_name": "WallStProg", "link": "https://stackoverflow.com/users/3394490/wallstprog"}, "edited": false, "score": 7, "creation_date": 1460417367, "post_id": 33043199, "comment_id": 60722431, "body": "P.S.  You need to logout and log back in (via Terminal) or the <code>gem install</code> will still fail."}, {"owner": {"reputation": 1454, "user_id": 2931699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8302fd330425ebe72106ea3ec22e47d?s=128&d=identicon&r=PG", "display_name": "youssman", "link": "https://stackoverflow.com/users/2931699/youssman"}, "edited": false, "score": 0, "creation_date": 1469284615, "post_id": 33043199, "comment_id": 64477762, "body": "Worked fine for me. I combined the accepted answer with this one. Thank you both"}, {"owner": {"reputation": 3666, "user_id": 3538165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M1snF.jpg?s=128&g=1", "display_name": "Radon Rosborough", "link": "https://stackoverflow.com/users/3538165/radon-rosborough"}, "edited": false, "score": 1, "creation_date": 1495846377, "post_id": 33043199, "comment_id": 75435928, "body": "You don&#39;t have to log out and log back in again. Just run <code>rehash</code> to make sure your shell realizes that there&#39;s a new <code>ruby</code> earlier on the <code>$PATH</code>. Even this will not be necessary in the situation where you hadn&#39;t run <code>ruby</code> yet in the shell session."}, {"owner": {"reputation": 375, "user_id": 1592933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fb704b4594390c82adb62ba34a68b7?s=128&d=identicon&r=PG", "display_name": "jahooma", "link": "https://stackoverflow.com/users/1592933/jahooma"}, "edited": false, "score": 0, "creation_date": 1616980216, "post_id": 33043199, "comment_id": 118164027, "body": "I had to add the new ruby to my PATH, otherwise the old version that comes on Mac OS is used: echo &#39;export PATH=&quot;/usr/local/opt/ruby/bin:$PATH&quot;&#39; &gt;&gt; ~/.bash_profile"}], "tags": [], "owner": {"reputation": 1389, "user_id": 2630039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20afce2260127d08a32326f28e220a82?s=128&d=identicon&r=PG", "display_name": "Francisco Gonzalez Rull", "link": "https://stackoverflow.com/users/2630039/francisco-gonzalez-rull"}, "is_accepted": false, "score": 109, "last_activity_date": 1463806001, "last_edit_date": 1463806001, "creation_date": 1444408334, "answer_id": 33043199, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/33043199#33043199", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>In my case, I had to re-install Ruby using <a href=\"http://brew.sh\">Brew</a>. That seems to have solved the problem as I can install gems again.</p>\n\n<pre><code>brew install ruby\n</code></pre>\n\n<p>After this, you need to log out and log back in, either graphically or just restarting your terminal. </p>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 3309004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b18b88f0999341d4cad82eb630125d?s=128&d=identicon&r=PG&f=1", "display_name": "jbalesteri", "link": "https://stackoverflow.com/users/3309004/jbalesteri"}, "is_accepted": false, "score": 2, "last_activity_date": 1444499909, "creation_date": 1444499909, "answer_id": 33057220, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/33057220#33057220", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>This is the solution that I have used:</p>\n\n<p><em>Note: this fix is for compass as I wrote it on another SO question, but I have used the same process to restore functionality to all terminal processes, obviously the gems you are installing are different, but the process is the same.</em></p>\n\n<p>I had the same issue. It is due to Apple implementing System Integrity Protection (SIP). You have to first disable that...</p>\n\n<p><strong>Reboot in recovery mode:</strong></p>\n\n<p>Reboot and hold <strong>Command + R</strong> until you see the apple logo.</p>\n\n<p>Once booted select <strong>Utilities > Terminal</strong> from top bar.</p>\n\n<p>type: <code>csrutil disable</code></p>\n\n<p>then type: <code>reboot</code></p>\n\n<p><strong>Once rebooted</strong></p>\n\n<p>Open terminal back up and enter the commands:</p>\n\n<p><code>sudo gem uninstall bundler</code></p>\n\n<p><code>sudo gem install bundler</code></p>\n\n<p><code>sudo gem install compass</code></p>\n\n<p><code>sudo gem install sass</code></p>\n\n<p><code>sudo gem update --system</code></p>\n\n<p>The the individual gems that failed need to be fixed, so for each do the following:</p>\n\n<p><em>On my machine this was the first dependency not working so I listed it</em>:</p>\n\n<p><code>sudo gem pristine ffi --version 1.9.3</code></p>\n\n<p>Proceed through the list of gems that need to be repaired. In all you are looking at about 10 minutes to fix it, but you will have terminal commands for compass working.</p>\n\n<p><a href=\"http://i.stack.imgur.com/EwDc4.jpg\" rel=\"nofollow\">Screenshot</a></p>\n"}, {"tags": [], "owner": {"reputation": 926, "user_id": 897005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870571b33093707be4918dc0a4aa64b1?s=128&d=identicon&r=PG", "display_name": "foobar", "link": "https://stackoverflow.com/users/897005/foobar"}, "is_accepted": false, "score": 10, "last_activity_date": 1466027212, "last_edit_date": 1466027212, "creation_date": 1445961258, "answer_id": 33372625, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/33372625#33372625", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>Looks like when upgrading to OS X El Capitain, the /usr/local directory is modified in multiple ways : </p>\n\n<ol>\n<li>user permissions are reset (this is also a problem for people using Homebrew)</li>\n<li>binaries and symlinks might have been deleted or altered</li>\n</ol>\n\n<p>[Edit] There's also a preliminary thing to do : upgrade Xcode...</p>\n\n<h1>Solution for #1 :</h1>\n\n<pre><code>$ sudo chown -R $(whoami):admin /usr/local\n</code></pre>\n\n<p>This will fix permissions on the <code>/usr/local</code> directory which will then help both <code>gem install</code> and <code>brew install|link|...</code> commands working properly.</p>\n\n<h1>Solution to #2 :</h1>\n\n<h2>Ruby based issues</h2>\n\n<p>Make sure you have fixed the permissions of the <code>/usr/local</code> directory (see #1 above)</p>\n\n<p>First try to reinstall your gem using :</p>\n\n<pre><code>sudo gem install &lt;gemname&gt;\n</code></pre>\n\n<p>Note that it will install the latest version of the specified gem.</p>\n\n<p>If you don't want to face backward-compatibility issues, I suggest that you first determine which version of which gem you want to get and then reinstall it with the <code>-v version</code>. See an exemple below to make sure that the system won't get a new version of capistrano.</p>\n\n<pre><code>$ gem list | grep capistrano\ncapistrano (3.4.0, 3.2.1, 2.14.2)\n$ sudo gem install capistrano -v 3.4.0\n</code></pre>\n\n<h2>Brew based issues</h2>\n\n<p>Update brew and upgrade your formulas</p>\n\n<pre><code>$ brew update\n$ brew upgrade\n</code></pre>\n\n<p>You might also need to re-link some of them manually</p>\n\n<pre><code>$ brew link &lt;formula&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1454108498, "post_id": 33548618, "comment_id": 57912899, "body": "Don&#39;t change ownership of the system Ruby gems. That can cause problems when Mac OS attempts to update anything."}], "tags": [], "owner": {"reputation": 228, "user_id": 1180160, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7898e7480c41ae9353821bab696c998?s=128&d=identicon&r=PG&f=1", "display_name": "alonn24", "link": "https://stackoverflow.com/users/1180160/alonn24"}, "is_accepted": false, "score": -1, "last_activity_date": 1446737463, "creation_date": 1446737463, "answer_id": 33548618, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/33548618#33548618", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>I don't like to install stuff with sudo.\nonce you start with sudo you can't stop..</p>\n\n<p>try giving permissions to the Gems directory.</p>\n\n<pre><code>sudo chown -R $(whoami) /Library/Ruby/Gems/2.0.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1522, "user_id": 1021185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1lnmr.png?s=128&g=1", "display_name": "Maarten Hartman", "link": "https://stackoverflow.com/users/1021185/maarten-hartman"}, "edited": false, "score": 3, "creation_date": 1478701441, "post_id": 33869438, "comment_id": 68260435, "body": "definitely not."}, {"owner": {"reputation": 391, "user_id": 378136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef70a6ab57118bf22f096aa9db41c3a?s=128&d=identicon&r=PG", "display_name": "niceguydave", "link": "https://stackoverflow.com/users/378136/niceguydave"}, "edited": false, "score": 0, "creation_date": 1612181026, "post_id": 33869438, "comment_id": 116677520, "body": "It definitely did not work for me."}], "tags": [], "owner": {"reputation": 634, "user_id": 4783117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-R0PNpNPzX2g/AAAAAAAAAAI/AAAAAAAAAWs/RpqtnqKJ6u0/photo.jpg?sz=128", "display_name": "Femina Brahmbhatt", "link": "https://stackoverflow.com/users/4783117/femina-brahmbhatt"}, "is_accepted": false, "score": 24, "last_activity_date": 1454108410, "last_edit_date": 1454108410, "creation_date": 1448276492, "answer_id": 33869438, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/33869438#33869438", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<pre><code>sudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n\n<p>Try this. It will definately work.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3112822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674d55134cb3eb2be460b41d20f215e7?s=128&d=identicon&r=PG&f=1", "display_name": "kkelleey", "link": "https://stackoverflow.com/users/3112822/kkelleey"}, "is_accepted": false, "score": 1, "last_activity_date": 1454108389, "last_edit_date": 1454108389, "creation_date": 1448303467, "answer_id": 33878060, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/33878060#33878060", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>Reinstalling RVM worked for me, but I had to reinstall all of my gems afterward:</p>\n\n<pre><code>rvm implode\n\\curl -sSL https://get.rvm.io | bash -s stable --ruby\nrvm reload\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 401, "user_id": 3794052, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oImv9.jpg?s=128&g=1", "display_name": "Louis Magnotti", "link": "https://stackoverflow.com/users/3794052/louis-magnotti"}, "edited": false, "score": 0, "creation_date": 1473949622, "post_id": 34523195, "comment_id": 66343140, "body": "Yes! Thank you so much!"}, {"owner": {"reputation": 1413, "user_id": 2607372, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/bWlAQ.png?s=128&g=1", "display_name": "vikramvi", "link": "https://stackoverflow.com/users/2607372/vikramvi"}, "edited": false, "score": 0, "creation_date": 1483542099, "post_id": 34523195, "comment_id": 70139324, "body": "After spending 30 min with brew approach, closing terminal etc at last this solution worked on 10.10.5 But still not sure why brew approach didn&#39;t work. Please clarify.  which ruby post brew install /usr/bin/ruby"}, {"owner": {"reputation": 1413, "user_id": 2607372, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/bWlAQ.png?s=128&g=1", "display_name": "vikramvi", "link": "https://stackoverflow.com/users/2607372/vikramvi"}, "edited": false, "score": 1, "creation_date": 1483545283, "post_id": 34523195, "comment_id": 70141458, "body": "Wow now the issue is back gem install redcarpet -v &#39;3.3.4&#39; --user-install throwing error WARNING:  You don&#39;t have /Users/user_name/.gem/ruby/2.0.0/bin in your PATH, gem executables will not run.  Earlier I was not getting this error"}, {"owner": {"reputation": 1413, "user_id": 2607372, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/bWlAQ.png?s=128&g=1", "display_name": "vikramvi", "link": "https://stackoverflow.com/users/2607372/vikramvi"}, "edited": false, "score": 1, "creation_date": 1483547994, "post_id": 34523195, "comment_id": 70143474, "body": "<a href=\"http://stackoverflow.com/questions/19579392/installing-gem-fails-with-permissions-error\" title=\"installing gem fails with permissions error\">stackoverflow.com/questions/19579392/&hellip;</a> , this helped me to resolve issue at last"}], "tags": [], "owner": {"reputation": 521, "user_id": 5729336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChLGt.jpg?s=128&g=1", "display_name": "Shao Wenbin", "link": "https://stackoverflow.com/users/5729336/shao-wenbin"}, "is_accepted": false, "score": 38, "last_activity_date": 1454108370, "last_edit_date": 1454108370, "creation_date": 1451451793, "answer_id": 34523195, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/34523195#34523195", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>That is because of the new security function of OS X \"El Capitan\".\nTry adding <code>--user-install</code> instead of using sudo:</p>\n\n<pre><code>$ gem install *** --user-install\n</code></pre>\n\n<p>For example, if you want to install fake3 just use:</p>\n\n<pre><code>$ gem install fake3 --user-install\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 875401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882b7f2441b2f9e8b3e3c0aac9ca77aa?s=128&d=identicon&r=PG", "display_name": "stillatmylinux", "link": "https://stackoverflow.com/users/875401/stillatmylinux"}, "edited": false, "score": 2, "creation_date": 1458830662, "post_id": 34845061, "comment_id": 60039182, "body": "If you run this command and it messes up the permissions of your MySQL data you&#39;ll need to set the permissions back.  Here&#39;s how.  <a href=\"http://stillatmylinux.com/not-every-linux-command-is-good-for-you/\" rel=\"nofollow noreferrer\">stillatmylinux.com/not-every-linux-command-is-good-for-you</a>"}], "tags": [], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "is_accepted": false, "score": -1, "last_activity_date": 1453073276, "creation_date": 1453073276, "answer_id": 34845061, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/34845061#34845061", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<pre><code>sudo chown -R $(whoami):admin /usr/local\n</code></pre>\n\n<p>That will give permissions back (Homebrew installs ruby there)</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 4116155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2551b61f7b75b7f483cfb7dd58b8a2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Barry Poore", "link": "https://stackoverflow.com/users/4116155/barry-poore"}, "is_accepted": false, "score": 0, "last_activity_date": 1466609760, "last_edit_date": 1466609760, "creation_date": 1466604928, "answer_id": 37970706, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/37970706#37970706", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>I ran across the same issue after installing El Capitan, I tried to install sass and compass into a symfony project, the following command returned the following error:</p>\n\n<p>$ sudo gem install compass</p>\n\n<p>ERROR:  Error installing compass:\n    ERROR: Failed to build gem native extension.</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb \n</code></pre>\n\n<p>checking for ffi.h... /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:434:in `try_do': The compiler failed to generate an executable file. (RuntimeError)</p>\n\n<p>So I then tried to install sass with:\n$ sudo gem install sass</p>\n\n<p>Got the same error message, after some googling I managed to install sass using the following command:</p>\n\n<p>$ sudo gem install -n /usr/local/bin sass</p>\n\n<p>The above worked for me with installing sass but did not work for installing compass. I read that someone somewhere had opened an instance of xcode then closed it again, then successfully ran the same command after which worked for them.\nI attempted to open xcode but was prompted with a message saying that the version of xcode installed was not compatible with El Capitan.\nSo I then updated xcode from the app store, re-ran the following command which this time ran successfully:</p>\n\n<p>$ sudo gem install -n /usr/local/bin compass</p>\n\n<p>I was then able to run $ compass init</p>\n\n<p>I now have all my gems working and can proceed to build some lovely sass stuff :)</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1693909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n9MS6.jpg?s=128&g=1", "display_name": "Anirban Nandi &#39;Joy&#39;", "link": "https://stackoverflow.com/users/1693909/anirban-nandi-joy"}, "is_accepted": false, "score": 2, "last_activity_date": 1470857029, "creation_date": 1470857029, "answer_id": 38881899, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/38881899#38881899", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>If the gem you are trying to install requires xml libraries, then try this:</p>\n\n<pre><code>sudo gem install -n /usr/local/bin  &lt;gem_name&gt; -- --use-system-libraries --with-xml2-include=/usr/include/libxml2 --with-xml2-lib=/usr/lib/\n</code></pre>\n\n<p>Specifically, I ran into a problem while installing the nokogiri gem v 1.6.8 on OS X El Capitan</p>\n\n<p>and this finally worked for me:</p>\n\n<pre><code>sudo gem install -n /usr/local/bin  nokogiri -- --use-system-libraries --with-xml2-include=/usr/include/libxml2 --with-xml2-lib=/usr/lib/\n</code></pre>\n\n<p>To make sure you have libxml2 and libxslt installed, you can do:</p>\n\n<pre><code>brew install libxml2 libxslt\nbrew install libiconv\n</code></pre>\n\n<p>and then check to make sure you have xcode command line tools installed:</p>\n\n<pre><code>xcode-select --install \n</code></pre>\n\n<p>should return this error:</p>\n\n<pre><code>xcode-select: error: command line tools are already installed, use \"Software Update\" to install updates\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 495, "user_id": 3407755, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7dd0dae11965dfcf689a35223914827?s=128&d=identicon&r=PG", "display_name": "VoA", "link": "https://stackoverflow.com/users/3407755/voa"}, "is_accepted": false, "score": 0, "last_activity_date": 1498436592, "creation_date": 1498436592, "answer_id": 44751768, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/44751768#44751768", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>I had to <code>rm -rf ./vendor</code> then run <code>bundle install</code> again.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 3734761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/soJi1.jpg?s=128&g=1", "display_name": "emchateau", "link": "https://stackoverflow.com/users/3734761/emchateau"}, "is_accepted": false, "score": 3, "last_activity_date": 1501523631, "last_edit_date": 1501523631, "creation_date": 1501282305, "answer_id": 45383429, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/45383429#45383429", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>As it have been said, the issue comes from a security function of Mac OSX since \"El Capitan\".</p>\n\n<p>Using the default system Ruby, the install process happens in the <code>/Library/Ruby/Gems/2.0.0</code> directory which is not available to the user and gives the error.</p>\n\n<p>You can have a look to your Ruby environments parameters with the command</p>\n\n<pre><code>$ gem env\n</code></pre>\n\n<p>There is an INSTALLATION DIRECTORY and a USER INSTALLATION DIRECTORY. To use the user installation directory instead of the default installation directory, you can use <code>--user-install</code> parameter instead as using <code>sudo</code> which is never a recommanded way of doing.</p>\n\n<pre><code>$ gem install myGemName --user-install\n</code></pre>\n\n<p>There should not be any rights issue anymore in the process. The gems are then installed in the user directory\u00a0: <code>~/.gem/Ruby/2.0.0/bin</code></p>\n\n<p>But to make the installed gems available, this directory should be available in your path. According to the <a href=\"http://guides.rubygems.org/faqs/#user-install\" rel=\"nofollow noreferrer\">Ruby\u2019s faq</a>, you can add the following line to your <code>~/.bash_profile</code> or <code>~/.bashrc</code></p>\n\n<pre><code>if which ruby &gt;/dev/null &amp;&amp; which gem &gt;/dev/null; then\n    PATH=\"$(ruby -rubygems -e 'puts Gem.user_dir')/bin:$PATH\"\nfi\n</code></pre>\n\n<p>Then close and reload your terminal or reload your <code>.bash_profile</code> or <code>.bashrc</code> (<code>. ~/.bash_profile</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13779799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vXlCH.png?s=128&g=1", "display_name": "Deme", "link": "https://stackoverflow.com/users/13779799/deme"}, "is_accepted": false, "score": 0, "last_activity_date": 1597582726, "last_edit_date": 1597582726, "creation_date": 1597523803, "answer_id": 63430595, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan/63430595#63430595", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>You might have two options:</p>\n<ol>\n<li>If you've installed ruby and rails, you can first try running the command:\n<pre><code>rvm fix-permissions \n</code></pre>\n</li>\n<li>You can uninstall ruby completely, and reinstall in your <code>~</code> directory aka your home directory.</li>\n</ol>\n<p>If you're using homebrew the command is:</p>\n<pre><code>brew uninstall ruby\n</code></pre>\n<p>For rails uninstall without homebrew the command is:</p>\n<pre><code>rvm remove\n</code></pre>\n<p>This should reinstall the latest ruby by running command:</p>\n<pre><code>curl -L https://get.rvm.io | bash -s stable --rails&lt;br&gt;\n</code></pre>\n<p>Mac has 2.6.3 factory installed, and it's required... if not run this command:</p>\n<pre><code>rvm install &quot;ruby-2.6.3&quot;\n</code></pre>\n<p>and then:</p>\n<pre><code>gem install rails\n</code></pre>\n<p>You'll get a few error messages at the end saying you have to add some other bundles...<br>\n<b>Just make sure you're in the home <code>~</code> directory when you're installing so the permissions won't be an issue, but just in case...</b></p>\n<p>I again ran:</p>\n<pre><code>rvm fix-permissions\n</code></pre>\n<p>and:</p>\n<pre><code>rvm debug\n</code></pre>\n<p>which told me I had to download yarn, I didn't save the output for it.  Basically I did whatever the prompt told me to do if it had to do with my OS.</p>\n<p>-D</p>\n"}], "owner": {"reputation": 12491, "user_id": 1101083, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ycwVS.png?s=128&g=1", "display_name": "Himanshu Yadav", "link": "https://stackoverflow.com/users/1101083/himanshu-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107960, "favorite_count": 95, "accepted_answer_id": 32253142, "answer_count": 15, "score": 184, "last_activity_date": 1597582726, "creation_date": 1439404783, "last_edit_date": 1451326792, "question_id": 31972968, "link": "https://stackoverflow.com/questions/31972968/cant-install-gems-on-os-x-el-capitan", "title": "Can&#39;t install gems on OS X &quot;El Capitan&quot;", "body": "<p>I am not able to install and run <code>fakes3</code> gem on El Capitan Beta 5.</p>\n\n<p>I tried:</p>\n\n<pre><code>sudo gem install fakes3\nERROR:  While executing gem ... (Errno::EPERM)\n    Operation not permitted - /usr/bin/fakes3\n</code></pre>\n\n<p>Then I tried doing it the cocoapods way. It worked for cocoapods but not for fakes3.</p>\n\n<pre><code>mkdir -p $HOME/Software/ruby\nexport GEM_HOME=$HOME/Software/ruby\ngem install cocoapods\n[...]\n1 gem installed\ngem install fakes3\nERROR:  While executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1439404142, "post_id": 31972700, "comment_id": 51852460, "body": "what version of Ruby are you running? <code>UTF-8 is</code> the <code>default</code> encoding since Ruby 2."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1439404172, "post_id": 31972700, "comment_id": 51852477, "body": "(Really, this is fairly searchable on the web, although Google is pretty good at knowing what I mean.)"}, {"owner": {"reputation": 128, "user_id": 4772334, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204793532811774/picture?type=large", "display_name": "Zader", "link": "https://stackoverflow.com/users/4772334/zader"}, "edited": false, "score": 0, "creation_date": 1439404358, "post_id": 31972700, "comment_id": 51852587, "body": "Here&#39;s <a href=\"http://stackoverflow.com/questions/20521371/set-utf-8-as-default-for-ruby-1-9-3\">a link</a> to a question asked similar to yours, answered."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1439404428, "post_id": 31972700, "comment_id": 51852617, "body": "<code>ruby -h</code> will give you the answer."}, {"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "edited": false, "score": 0, "creation_date": 1439404574, "post_id": 31972700, "comment_id": 51852691, "body": "I&#39;m using ruby 1.9.3. I searched google for <code>change ruby encoding</code> and didn&#39;t get any relevant results."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1439404835, "post_id": 31972700, "comment_id": 51852826, "body": "This seems to answer : <a href=\"http://stackoverflow.com/questions/20521371/set-utf-8-as-default-for-ruby-1-9-3\" title=\"set utf 8 as default for ruby 1 9 3\">stackoverflow.com/questions/20521371/&hellip;</a>"}, {"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "edited": false, "score": 0, "creation_date": 1439405179, "post_id": 31972700, "comment_id": 51853009, "body": "None of the links you have given me work. When I try to insert <code>&#163;</code> into my database or display the <code>&#163;</code> symbol in an xhtml file, I get an exception that a UTF-8 character cannot be displayed on a page with CP-850 encoding. This question will explain further. <a href=\"http://stackoverflow.com/questions/31909569/i-receive-incompatible-character-encodings-cp850-and-utf-8-when-displaying-th\" title=\"i receive incompatible character encodings cp850 and utf 8 when displaying th\">stackoverflow.com/questions/31909569/&hellip;</a> I have put <code># encoding: UTF-8</code> <code>Encoding.default_external = &#39;utf-8&#39;; Encoding.default_internal = Encoding::UTF_8</code> in my ruby file and it hasn&#39;t solved the problem."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1439406316, "post_id": 31972700, "comment_id": 51853648, "body": "@desbest You said the magic word, &quot;database&quot;. Your database will have its own encoding, usually per table."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1439406411, "post_id": 31972700, "comment_id": 51853701, "body": "The default I/O encoding is taken from your operating system&#39;s encoding settings. How to configure your operating system is a general user question, completely unrelated to programming, thus I vote to close as off-topic. (I would vote to migrate to SuperUser, except I&#39;m betting this has already been asked there. Plus, the question doesn&#39;t have enough information, like what operating system the OP is using.)"}, {"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1439406749, "post_id": 31972700, "comment_id": 51853864, "body": "This is not a database question @Schwern as I get an exception when I display a web page that has the <code>&#163;</code> character on it. Also @J&#246;rg I get the same error on Heroku, so it happens on both Windows and Linux."}, {"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "edited": false, "score": 0, "creation_date": 1439407638, "post_id": 31972700, "comment_id": 51854349, "body": "This answer looks promising. How do I make it work? <a href=\"http://stackoverflow.com/a/17616076/337306\">stackoverflow.com/a/17616076/337306</a>"}, {"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "edited": false, "score": 0, "creation_date": 1439548208, "post_id": 31972700, "comment_id": 51918262, "body": "I can&#39;t use this answer as I don&#39;t have the LC_ALL environment variable. <a href=\"http://stackoverflow.com/a/17616076/337306\">stackoverflow.com/a/17616076/337306</a>"}], "owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1439406676, "answer_count": 0, "score": 0, "last_activity_date": 1439403829, "creation_date": 1439403829, "question_id": 31972700, "link": "https://stackoverflow.com/questions/31972700/how-do-i-change-rubys-default-encoding-to-utf-8", "closed_reason": "Duplicate", "title": "How do I change ruby&#39;s default encoding to utf-8?", "body": "<p>I ran <code>ruby -e 'p Encoding.default_external</code> and got this response.</p>\n\n<p><code>&lt;Encoding:CP850&gt;</code></p>\n\n<p>How do I change it to UTF-8?</p>\n"}, {"tags": ["ruby", "jekyll", "liquid", "octopress"], "comments": [{"owner": {"reputation": 838, "user_id": 5195629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGwXF.png?s=128&g=1", "display_name": "Shadowen", "link": "https://stackoverflow.com/users/5195629/shadowen"}, "edited": false, "score": 0, "creation_date": 1439412021, "post_id": 31972626, "comment_id": 51856585, "body": "Are you using <a href=\"http://jekyllrb.com/docs/collections/\" rel=\"nofollow noreferrer\">jekyllrb.com/docs/collections</a>? I&#39;m not sure what exactly is different when octopress is involved..."}, {"owner": {"reputation": 15, "user_id": 3324847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83a9c8155cd3b7e253049024e317f59?s=128&d=identicon&r=PG&f=1", "display_name": "user3324847", "link": "https://stackoverflow.com/users/3324847/user3324847"}, "reply_to_user": {"reputation": 838, "user_id": 5195629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGwXF.png?s=128&g=1", "display_name": "Shadowen", "link": "https://stackoverflow.com/users/5195629/shadowen"}, "edited": false, "score": 0, "creation_date": 1439752381, "post_id": 31972626, "comment_id": 51978567, "body": "I dont know if octopress uses collections for posts. But there is no collection in the _config.yml. But i think i can use these. Thanks EDIT: Actually this is finally what i have used please add this an answer so I can mark it as correct. :)"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3324847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83a9c8155cd3b7e253049024e317f59?s=128&d=identicon&r=PG&f=1", "display_name": "user3324847", "link": "https://stackoverflow.com/users/3324847/user3324847"}, "edited": false, "score": 0, "creation_date": 1439752105, "post_id": 31993591, "comment_id": 51978483, "body": "This is kind of a workaround using existing things. What if i want a new rake task for this and all. But i really appreciate the answer this is the nearest i have gotten till now."}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 0, "last_activity_date": 1439482890, "creation_date": 1439482890, "answer_id": 31993591, "question_id": 31972626, "link": "https://stackoverflow.com/questions/31972626/adding-a-post-type-to-octopress/31993591#31993591", "title": "Adding a post type to octopress", "body": "<p>The only way to create a news type of posts is to do it with a plugin.</p>\n\n<p>But I think your problem can be resolved in a simpler manner, using <a href=\"http://jekyllrb.com/docs/frontmatter/#predefined-global-variables\" rel=\"nofollow\">categories or tags</a>.</p>\n\n<p>Here I'll explain tag's use, but it's the same with categories.</p>\n\n<p>A post with a <code>news</code> tag :</p>\n\n<pre><code>---\nlayout: post\ntitle:  \"Post 2\"\ndate:   2015-08-12 18:02:44\ntags:\n  - news\n  - javascript\n  - anything else\n---\nPost 2 content\n</code></pre>\n\n<p>The loop used to get all the news tagged posts :</p>\n\n<pre><code>  &lt;ul&gt;\n    {% for post in site.posts %}\n    {% if post.tags contains \"news\" %}\n      &lt;li&gt;\n        &lt;h2&gt;\n          &lt;a href=\"{{ post.url | prepend: site.baseurl }}\"&gt;{{ post.title }}&lt;/a&gt;\n        &lt;/h2&gt;\n      &lt;/li&gt;\n    {% endif %}\n    {% endfor %}\n  &lt;/ul&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 838, "user_id": 5195629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGwXF.png?s=128&g=1", "display_name": "Shadowen", "link": "https://stackoverflow.com/users/5195629/shadowen"}, "is_accepted": true, "score": 0, "last_activity_date": 1439777922, "creation_date": 1439777922, "answer_id": 32041917, "question_id": 31972626, "link": "https://stackoverflow.com/questions/31972626/adding-a-post-type-to-octopress/32041917#32041917", "title": "Adding a post type to octopress", "body": "<p>Try using <a href=\"http://jekyllrb.com/docs/collections\" rel=\"nofollow\">collections</a> rather than posts. Collections can be iterated through by Jekyll/Liquid using <code>{% for n in site.news %}</code>, for the <code>news</code> collection.</p>\n"}], "owner": {"reputation": 15, "user_id": 3324847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83a9c8155cd3b7e253049024e317f59?s=128&d=identicon&r=PG&f=1", "display_name": "user3324847", "link": "https://stackoverflow.com/users/3324847/user3324847"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 32041917, "answer_count": 2, "score": 0, "last_activity_date": 1439777922, "creation_date": 1439403601, "question_id": 31972626, "link": "https://stackoverflow.com/questions/31972626/adding-a-post-type-to-octopress", "title": "Adding a post type to octopress", "body": "<p>I am working on a blog for my personal use and wanted to add a news feature in it.\nThis feature will show five recent news markdown files that I have placed inside the _news folder. But i am unable to understand how to access the directory using the liquid markup in the template just like it is done for posts in the _posts folder.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4236, "user_id": 717600, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/yYVqR.jpg?s=128&g=1", "display_name": "Md Sirajus Salayhin", "link": "https://stackoverflow.com/users/717600/md-sirajus-salayhin"}, "is_accepted": true, "score": 0, "last_activity_date": 1439404413, "creation_date": 1439404413, "answer_id": 31972861, "question_id": 31972551, "link": "https://stackoverflow.com/questions/31972551/registration-form-debug-post-issues/31972861#31972861", "title": "Registration Form Debug &amp; Post Issues", "body": "<p>You did wrong with routing. You declare get method for register. But it should be post method. </p>\n\n<p>You have to change your route to </p>\n\n<pre><code>post 'register', to: 'users#register'\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 5175885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10155841049520371/picture?type=large", "display_name": "Corey Holmes", "link": "https://stackoverflow.com/users/5175885/corey-holmes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 31972861, "answer_count": 1, "score": 0, "last_activity_date": 1439404413, "creation_date": 1439403343, "question_id": 31972551, "link": "https://stackoverflow.com/questions/31972551/registration-form-debug-post-issues", "title": "Registration Form Debug &amp; Post Issues", "body": "<p><strong>So I'm going to try and explain this to the best of my ability.</strong> I am taking a Rails tutorial and am a little stuck on the POST and Debug sections.</p>\n\n<p><strong>1st Question:</strong> I created a registration form. The tutorial said to click the \"Register!\" button to see what happens. Apparently nothing is supposed to happen except when I click the \"Register!\" button I get an error <code>No route matches [POST] \"/register\"</code>. How do  I fix that?</p>\n\n<p><strong>2nd Question:</strong>\nWe then added a debug function in the <code>application.html.erb</code> section which looks like this:</p>\n\n<pre><code>&lt;% if ENV['RAILS_ENV'] == 'development' %&gt;\n        &lt;%= debug(params) %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>They said to try and create a user with the username: foo password: baz email: bar and see what happens. Apparently when I click register it's supposed to not change the page but just show some stuff in the debug function?</p>\n\n<p><a href=\"https://i.stack.imgur.com/HWjAA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HWjAA.png\" alt=\"enter image description here\"></a></p>\n\n<p>My debug function shows this until I click the register button and then it gives me the error <code>No route matches [POST] \"/register\"</code>.</p>\n\n<pre><code>--- !ruby/hash:ActionController::Parameters\ncontroller: users\naction: register\n</code></pre>\n\n<p>when in the book it shows that you don't get the error <code>No route matches [POST] \"/register\"</code> but instead you get this text in your debug function...</p>\n\n<pre><code>--- !ruby/hash:HashWithIndifferentAccess\nuser: !ruby/hash:HashWithIndifferentAccess\nscreen_name: foo\npassword: baz\nemail: bar\ncommit: Register!\naction: register\ncontroller: users\n</code></pre>\n\n<p>Anyone have any idea what's going on here?</p>\n\n<p>Just incase you want to know some of my code here it is:</p>\n\n<p><strong>Routes.rb</strong></p>\n\n<pre><code>  Rails.application.routes.draw do\n      get '/users', to: 'users#index'\n\n      get 'register', to: 'users#register'\n\n      get '/site', to: 'site#index'\n\n      get '/about', to: 'site#about'\n\n      get '/help', to: 'site#help'\n\n      resources :users, only: %w(index) do\n        get :register, on: :collection\n      end\n\n      root 'site#index'\n</code></pre>\n\n<p><strong>Users.controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def index\n  end\n\n  def register\n    @title = 'Register'\n    if request.post? and params[:user]\n      @user = User.new(params[:user])\n      if @user.save\n        render :text =&gt; 'Welcome to WorkLink!'\n      # Output goes to log file (log/development.login development mode)\n      logger.info params[:user].inspect\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "design-patterns", "accessor", "rescue"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1439402671, "post_id": 31972311, "comment_id": 51851649, "body": "see <code>retry</code> <a href=\"http://rubyquicktips.com/post/1122838559/redo-vs-retry\" rel=\"nofollow noreferrer\">rubyquicktips.com/post/1122838559/redo-vs-retry</a>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1439404023, "post_id": 31972311, "comment_id": 51852396, "body": "can u share some details about accessor object, a sample code may be, so that people can get better idea of problem&gt;"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1439406873, "post_id": 31972311, "comment_id": 51853929, "body": "A better question is, why are its internals sometimes broken and why does it crash? That sounds like poorly written code and you&#39;re trying to apply a bandage to something that&#39;s got arterial bleeding. Granted, <code>rescue</code> can help, but understanding and fixing the root cause is the correct solution."}, {"owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "edited": false, "score": 0, "creation_date": 1439407542, "post_id": 31972311, "comment_id": 51854299, "body": "It doesn&#39;t crash often, but when it does it&#39;s out of my control. I&#39;m scraping information from a server which I do not own or have administrative access to. Sometimes my session breaks off. It happens infrequently enough that I just need to put a bandaid on it, and extreme hacks might do more damage than good at my level :)"}], "answers": [{"comments": [{"owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "edited": false, "score": 0, "creation_date": 1439407312, "post_id": 31973413, "comment_id": 51854182, "body": "Exactly what I was looking for! Thank you so much."}], "tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": true, "score": 1, "last_activity_date": 1439406252, "creation_date": 1439406252, "answer_id": 31973413, "question_id": 31972311, "link": "https://stackoverflow.com/questions/31972311/proper-way-to-write-an-if-it-doesnt-work-fix-it-and-try-again-function-in-ru/31973413#31973413", "title": "Proper way to write an &#39;If it doesn&#39;t work, fix it and try again&#39; function in Ruby", "body": "<p>Do you mean something like this?</p>\n\n<pre><code>def safely num, &amp;block\n  count = 0\n  begin\n    block.call\n  rescue\n    count += 1\n    retry if count &lt; num\n  end\nend\n</code></pre>\n\n<p>Call it with <code>safely(5) {your_broken_method}</code></p>\n"}], "owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 31973413, "answer_count": 1, "score": 3, "last_activity_date": 1439406252, "creation_date": 1439402507, "question_id": 31972311, "link": "https://stackoverflow.com/questions/31972311/proper-way-to-write-an-if-it-doesnt-work-fix-it-and-try-again-function-in-ru", "title": "Proper way to write an &#39;If it doesn&#39;t work, fix it and try again&#39; function in Ruby", "body": "<p>I have an accessor object which is unavoidably intermittent. Sometimes when it tries an action, its internals crash and need to be restarted before the action is reattempted.</p>\n\n<p>It's easy enough to write a function like: </p>\n\n<pre><code>def might_break\n    try_something_that_might_break\nrescue\n    fix_it\n    might_break\nend\n</code></pre>\n\n<p>With a counter to avoid infinite breakage, of course. </p>\n\n<p>But I'd like to keep things DRY, and every one of my accessors methods need pretty much the same care. </p>\n\n<p>I thought about making a function <code>safely</code> which takes a block, but then I'm not sure how I could have it return to the parent function.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "gem", "dashing"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1439401927, "post_id": 31972089, "comment_id": 51851241, "body": "Without knowing what else is in your Gemfile it&#39;s hard to help. Are you using JRuby?"}, {"owner": {"reputation": 512, "user_id": 1344643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a704ac9164ba2b46c8109fcf598e326e?s=128&d=identicon&r=PG", "display_name": "ed_is_my_name", "link": "https://stackoverflow.com/users/1344643/ed-is-my-name"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1439405225, "post_id": 31972089, "comment_id": 51853035, "body": "no.  jruby is not installed.  I don&#39;t have a Gemfile.  I can&#39;t get to the point in which dashing creates a Gemfile.  I get the same error if I type: dashing generate mydashboard"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1439407048, "post_id": 31972089, "comment_id": 51854020, "body": "<code>gem install dashing</code> worked w/o any issues or warnings? I&#39;d try using rvm/rbenv with a separate gemset."}, {"owner": {"reputation": 512, "user_id": 1344643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a704ac9164ba2b46c8109fcf598e326e?s=128&d=identicon&r=PG", "display_name": "ed_is_my_name", "link": "https://stackoverflow.com/users/1344643/ed-is-my-name"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1439433962, "post_id": 31972089, "comment_id": 51863143, "body": "could the problem be with rubygems?  perhaps, i need to reinstall it?"}], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 383257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a65a78a450f3439700171b08f2b0b5a?s=128&d=identicon&r=PG", "display_name": "tylermauthe", "link": "https://stackoverflow.com/users/383257/tylermauthe"}, "is_accepted": true, "score": 0, "last_activity_date": 1439437212, "creation_date": 1439437212, "answer_id": 31979128, "question_id": 31972089, "link": "https://stackoverflow.com/questions/31972089/could-not-find-eventmachine/31979128#31979128", "title": "Could not find &#39;eventmachine&#39;", "body": "<p>Dashing makes use of a gemfile, so you should be able to install all dependencies with <a href=\"http://bundler.io/\" rel=\"nofollow\">Bundler</a>.</p>\n\n<p>If you don't have it installed already, install it: <code>gem install bundler</code></p>\n\n<p>Now, <code>cd</code> into your dashboard directory.</p>\n\n<p>Then, install the bundle for your dashboard: <code>bundle install</code></p>\n\n<p>Then, for good luck, run <code>bundle exec dashing start</code> to start your dashboard. This will ensure that Dashing runs from the bundle you just installed.</p>\n"}], "owner": {"reputation": 512, "user_id": 1344643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a704ac9164ba2b46c8109fcf598e326e?s=128&d=identicon&r=PG", "display_name": "ed_is_my_name", "link": "https://stackoverflow.com/users/1344643/ed-is-my-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1331, "favorite_count": 0, "accepted_answer_id": 31979128, "answer_count": 1, "score": 0, "last_activity_date": 1439437212, "creation_date": 1439401705, "question_id": 31972089, "link": "https://stackoverflow.com/questions/31972089/could-not-find-eventmachine", "title": "Could not find &#39;eventmachine&#39;", "body": "<p>I'm trying to install Dashing on my Linux mint.  I'm having trouble with the  gems it requires.  I've installed the Dashing gem, but when I try to run dashing I get this error about eventmachine:</p>\n\n<pre><code>   /usr/local/lib/site_ruby/1.9.1/rubygems/dependency.rb:298:in `to_specs': Could not find 'eventmachine' (~&gt; 1.0) - did find: [eventmachine-1.0.8-java,eventmachine-1.0.0-java] (Gem::LoadError)\n</code></pre>\n\n<p>gem list: (among others)</p>\n\n<pre><code>eventmachine (1.0.8 java, 1.0.0 java)\n</code></pre>\n\n<p>most of my other gems, don't mention java.  I'm I pulling down the wrong gem?</p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 4, "last_activity_date": 1439400417, "creation_date": 1439400417, "answer_id": 31971730, "question_id": 31971631, "link": "https://stackoverflow.com/questions/31971631/elsif-not-working-continues-putting-if-input/31971730#31971730", "title": "elsif not working, continues putting if input", "body": "<p>Change <code>if answer == y or Y</code> to <code>if answer == y || answer == Y</code> or <code>if [y, Y].include?(answer)</code> (and similarly for the elsif condition).</p>\n\n<p><code>answer == y or Y</code> is testing is <code>answer</code> equal to the value of <code>y</code> OR is the value of <code>Y</code> true.  The value of <code>Y</code> will always be true as you've set it to a valid string.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1439408728, "last_edit_date": 1495535200, "creation_date": 1439408232, "answer_id": 31973938, "question_id": 31971631, "link": "https://stackoverflow.com/questions/31971631/elsif-not-working-continues-putting-if-input/31973938#31973938", "title": "elsif not working, continues putting if input", "body": "<p>You have several problems in your code but you've run into one of the most common, a misunderstanding of how <code>gets</code> works:</p>\n\n<ol>\n<li><p><code>answer=gets.to_s</code> doesn't return what you think it does. Consider this IRB session where I entered <kbd>1</kbd><kbd>Return</kbd>:</p>\n\n<pre><code>&gt;&gt; gets\n1\n\"1\\n\"\n</code></pre>\n\n<p><code>gets</code> is returning a string terminated with the \"\\n\" which was input when <kbd>Return</kbd> or <kbd>Enter</kbd> was pressed.</p></li>\n<li><p>Using <code>to_s</code> doesn't help, because <code>gets</code> is already returning a String. Like the above example, I entered <code>1</code>:</p>\n\n<pre><code>&gt;&gt; gets.class\n1\nString &lt; Object\n</code></pre></li>\n<li><p>Comparing the output of <code>gets</code> has to allow for the trailing \"\\n\" somehow:</p>\n\n<pre><code>&gt;&gt; gets.strip\n1\n\"1\"\n&gt;&gt; gets.chomp\n1\n\"1\"\n&gt;&gt; gets == \"1\\n\"\n1\ntrue\n&gt;&gt; gets.chomp == '1'\n1\ntrue\n</code></pre></li>\n</ol>\n\n<p>Knowing all that, meditate on this:</p>\n\n<pre><code>&gt;&gt; answer = gets.chomp.downcase\nYES\n\"yes\"\n&gt;&gt; answer == 'yes'\ntrue\n</code></pre>\n\n<p>You have logic errors also, because you can't use <code>if answer == y or Y</code> or <code>answer == n or N</code>, but that's covered in <a href=\"https://stackoverflow.com/a/31971730/128421\">https://stackoverflow.com/a/31971730/128421</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5208585"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 31973938, "answer_count": 2, "score": 1, "last_activity_date": 1439409003, "creation_date": 1439400059, "last_edit_date": 1439409003, "question_id": 31971631, "link": "https://stackoverflow.com/questions/31971631/elsif-not-working-continues-putting-if-input", "title": "elsif not working, continues putting if input", "body": "<p>In my code, <code>elsif</code> does not work. If I type <code>\"N\"</code> or <code>\"n\"</code>, it will ask me for the password rather than <code>puts</code>, which it is supposed to do:</p>\n\n<pre><code>puts \"Would you like to access Your Software Wizard?\"\nputs \"Type Y for Yes and N for No\"\nanswer = gets.to_s\ny = \"yes\"\nn = \"no\"\nY = \"yes\"\nN = \"no\"\nif answer == y or Y\n  puts \" Please Insert Password:\"\n  password = gets.to_s\nelsif answer == n or N\n  puts \"Quitting..... an Alert Email and an Alert Sms has been sent to  User of attempted access\"\n  puts \"Password has been changed and newly encripted\"\n  puts \"Good Bye\"\nend\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1439399684, "creation_date": 1439399684, "answer_id": 31971541, "question_id": 31971402, "link": "https://stackoverflow.com/questions/31971402/exclude-columns-from-model/31971541#31971541", "title": "Exclude columns from Model", "body": "<p>If you're building an API endpoint you can do something like this:\nIn your controller:</p>\n\n<pre><code>@user = User.find(params[:id]).to_api_json\n</code></pre>\n\n<p>And in your user class return what you want in a hash:</p>\n\n<pre><code>def to_api_json\n  { \"id\": id, \"email\": email } # add whatever attributes you want to this hash\nend\n</code></pre>\n\n<p>You can tweak depending on what format of data you want to return, but this is the basic idea.</p>\n"}, {"tags": [], "owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "is_accepted": false, "score": 1, "last_activity_date": 1439400102, "creation_date": 1439400102, "answer_id": 31971645, "question_id": 31971402, "link": "https://stackoverflow.com/questions/31971402/exclude-columns-from-model/31971645#31971645", "title": "Exclude columns from Model", "body": "<p>You would normally use a serialiser where you specify exactly what columns you want to go in the response.</p>\n\n<p>I think <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow\">https://github.com/rails/jbuilder</a> is the default now but there are others such as:</p>\n\n<p><a href=\"https://github.com/nesquena/rabl\" rel=\"nofollow\">https://github.com/nesquena/rabl</a></p>\n\n<p><a href=\"https://github.com/rails-api/active_model_serializers\" rel=\"nofollow\">https://github.com/rails-api/active_model_serializers</a></p>\n\n<p>Assuming your api is a JSON api.</p>\n\n<p>Also you can use <code>as_json</code> like so.</p>\n\n<pre><code>def show\n  @resource.as_json(only: [:id, :name])\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 1201358, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b5f73b3b7b3409871c5c9bfcbc4f4e2?s=128&d=identicon&r=PG", "display_name": "Tristian", "link": "https://stackoverflow.com/users/1201358/tristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1439406923, "creation_date": 1439399194, "last_edit_date": 1439406923, "question_id": 31971402, "link": "https://stackoverflow.com/questions/31971402/exclude-columns-from-model", "title": "Exclude columns from Model", "body": "<p>I'm writing a Simple API in Ruby on Rails, I want to be able to automatically hide columns from being visible for example if I wanted to select Users I never want to share passwords, salt or any other personal information.</p>\n\n<p>In Laravel you can use a protected variable '$guarded' and I was wondering if this is possible in Rails?</p>\n\n<p>Edit: I'm using JSON to display the data.</p>\n"}, {"tags": ["ruby", "heroku", "sinatra", "rest-client", "mailgun"], "comments": [{"owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1439399459, "post_id": 31971071, "comment_id": 51849845, "body": "you can see the errors with <code>heroku logs</code>"}, {"owner": {"reputation": 119, "user_id": 4428270, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0355a9fda0c4967db5b811e5d292f3d?s=128&d=identicon&r=PG", "display_name": "Tim Robertson", "link": "https://stackoverflow.com/users/4428270/tim-robertson"}, "reply_to_user": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1439453419, "post_id": 31971071, "comment_id": 51870883, "body": "Thanks for your reply. As mentioned the logs don&#39;t appear to be telling me anything of use - is there something specific I should be looking for?"}, {"owner": {"reputation": 61, "user_id": 2005686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c48bc32a5b5f843c00fe59c0535509?s=128&d=identicon&r=PG", "display_name": "silvabox", "link": "https://stackoverflow.com/users/2005686/silvabox"}, "edited": false, "score": 0, "creation_date": 1439455194, "post_id": 31971071, "comment_id": 51871925, "body": "can you include a gist or similar with your heroku logs?"}, {"owner": {"reputation": 119, "user_id": 4428270, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0355a9fda0c4967db5b811e5d292f3d?s=128&d=identicon&r=PG", "display_name": "Tim Robertson", "link": "https://stackoverflow.com/users/4428270/tim-robertson"}, "reply_to_user": {"reputation": 61, "user_id": 2005686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c48bc32a5b5f843c00fe59c0535509?s=128&d=identicon&r=PG", "display_name": "silvabox", "link": "https://stackoverflow.com/users/2005686/silvabox"}, "edited": false, "score": 0, "creation_date": 1439456335, "post_id": 31971071, "comment_id": 51872677, "body": "@silvabox - have edited the origin post to include a gist - thanks!"}, {"owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1439476249, "post_id": 31971071, "comment_id": 51886456, "body": "That&#39;s not showing all the stack trace. Try <code>heroku logs -n 1500</code>"}, {"owner": {"reputation": 119, "user_id": 4428270, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0355a9fda0c4967db5b811e5d292f3d?s=128&d=identicon&r=PG", "display_name": "Tim Robertson", "link": "https://stackoverflow.com/users/4428270/tim-robertson"}, "reply_to_user": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1439483547, "post_id": 31971071, "comment_id": 51891732, "body": "@IsmaelAbreu - I&#39;ve updated the gist with that output. It&#39;s given me these lines, which I&#39;m currently trying to understand  <code>2015-08-13T16:12:21.041780+00:00 heroku[router]: at=info method=POST path=&quot;&#47;users&#47;reset_password&quot; host=chitter-challenge.herokuapp.com request_id=7d3be567-5a77-4eea-9f29-c8222c955cca fwd=&quot;82.24.206.127&quot; dyno=web.1 connect=1ms service=180ms status=500 bytes=326 2015-08-13T16:12:21.034754+00:00 app[web.1]: 2015-08-13 16:12:21 - RestClient::ResourceNotFound - 404 Resource Not Found:</code>"}], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 1551965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3368bed08c1a9a93bb9612a374e7714c?s=128&d=identicon&r=PG", "display_name": "Stefan Dorunga", "link": "https://stackoverflow.com/users/1551965/stefan-dorunga"}, "is_accepted": true, "score": 1, "last_activity_date": 1439886164, "creation_date": 1439886164, "answer_id": 32067222, "question_id": 31971071, "link": "https://stackoverflow.com/questions/31971071/heroku-internal-server-error-when-attempting-to-send-an-email-using-mailgun/32067222#32067222", "title": "Heroku Internal Server Error when attempting to send an email using Mailgun", "body": "<p>The only reason I can see for that to happen in your case is that your maligun domain <code>'sandboxf59a3be327d54fd79069be7d347b9af4'</code> might be incorrect. Have you checked your dashboard to see that the numbers actually match with your real domain. I've tried locally and getting the domain wrong is the only way I can see to get that error since the rest of the url is properly formatted.</p>\n\n<p>Also you can try going here <code>https://documentation.mailgun.com/quickstart-sending.html</code> which, if logged in, should give you an example of how to run a properly formatted post request with curl including your correct credentials. See if that works and if your params in the ruby code match what that says.</p>\n"}], "owner": {"reputation": 119, "user_id": 4428270, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0355a9fda0c4967db5b811e5d292f3d?s=128&d=identicon&r=PG", "display_name": "Tim Robertson", "link": "https://stackoverflow.com/users/4428270/tim-robertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 2, "accepted_answer_id": 32067222, "answer_count": 1, "score": 0, "last_activity_date": 1439886164, "creation_date": 1439398071, "last_edit_date": 1439456303, "question_id": 31971071, "link": "https://stackoverflow.com/questions/31971071/heroku-internal-server-error-when-attempting-to-send-an-email-using-mailgun", "title": "Heroku Internal Server Error when attempting to send an email using Mailgun", "body": "<p>I have a simple Ruby Sinatra app which allows users to request a new password - using Mailgun to trigger an email. It works perfectly well in development (localhost) but returns 'Internal Server Error' on Heroku. I'm still new to debugging Heroku so have looked at $ heroku logs but this doesn't appear to tell me anything of use. All Mailgun ENVs are correctly set under heroku:config.</p>\n\n<p>Still a newbie to StackOverflow so please let me know if I can clarify my question further/provide more info....</p>\n\n<p>App url - <a href=\"http://chitter-challenge.herokuapp.com/users/reset_password\" rel=\"nofollow\">http://chitter-challenge.herokuapp.com/users/reset_password</a></p>\n\n<p>Repo - <a href=\"https://github.com/timrobertson0122/chitter-challenge\" rel=\"nofollow\">https://github.com/timrobertson0122/chitter-challenge</a></p>\n\n<p>Code snippet - </p>\n\n<pre><code>require 'rest-client'\n\nclass MailgunWrapper\n\ndef send_email_to user\napi_key = ENV['MAILGUN_API_KEY']\napi_url = \"https://api:#{api_key}@api.mailgun.net/v3/sandboxf59a3be327d54fd79069be7d347b9af4.mailgun.org\"\n\nRestClient::Request.execute(\n  url: api_url + '/messages',\n  method: :post,\n  payload: {\n    from: 'postmaster@sandboxf59a3be327d54fd79069be7d347b9af4.mailgun.org',\n    to: user.email,\n    subject: 'This is subject',\n    text: 'This is text',\n    html: 'https://chitter-challenge.herokuapp.com/users/reset_password' + user.password_token,\n    multipart: true\n  },\n  headers: {\n    \"h:X-My-Header\" =&gt; 'www/mailgun-email-send'\n  },\n  verify_ssl: false\n)\n end\n\nend\n</code></pre>\n\n<p>Gist of Heroku logs output - <a href=\"https://gist.github.com/timrobertson0122/fa79c18f66866ee180a3#file-gistfile1-txt\" rel=\"nofollow\">https://gist.github.com/timrobertson0122/fa79c18f66866ee180a3#file-gistfile1-txt</a></p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1439396408, "post_id": 31970479, "comment_id": 51848114, "body": "What do you mean by &quot;efficient&quot;?  Are you looking for computationally faster, or neater code?  I&#39;m not sure you will find anything in terms of the former."}, {"owner": {"reputation": 25, "user_id": 5183903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae8b71f32f38845d63a2fa98a02209e?s=128&d=identicon&r=PG&f=1", "display_name": "Schugz", "link": "https://stackoverflow.com/users/5183903/schugz"}, "reply_to_user": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1439396945, "post_id": 31970479, "comment_id": 51848411, "body": "Sorry I did not clarify, I meant efficient as in computationally faster."}, {"owner": {"reputation": 25, "user_id": 5183903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae8b71f32f38845d63a2fa98a02209e?s=128&d=identicon&r=PG&f=1", "display_name": "Schugz", "link": "https://stackoverflow.com/users/5183903/schugz"}, "reply_to_user": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1439397157, "post_id": 31970479, "comment_id": 51848542, "body": "But if more efficient code is unavailable I would accept a neater code solution as an answer."}, {"owner": {"reputation": 502, "user_id": 2493353, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c59e893140e8559312c6261670fc6332?s=128&d=identicon&r=PG", "display_name": "myroman", "link": "https://stackoverflow.com/users/2493353/myroman"}, "edited": false, "score": 0, "creation_date": 1439397835, "post_id": 31970479, "comment_id": 51848941, "body": "In terms of computational efficiency your code is really fast. Suppose you have N elements in array, to replace every odd characted you do N/2 iterations, in each iteration you do <code>O(1)</code> operation of lookup in array: <code>sym[arr[elements]]</code>. So your total complexity is <code>O(N&#47;2) = O(N)</code> which is linear time."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439409409, "post_id": 31970479, "comment_id": 51855256, "body": "Not clear what you mean by replacing the odd elements. In your example, precisely the <b>even</b> elements are replaced."}], "answers": [{"tags": [], "owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "is_accepted": false, "score": 1, "last_activity_date": 1439397922, "creation_date": 1439397922, "answer_id": 31971028, "question_id": 31970479, "link": "https://stackoverflow.com/questions/31970479/replace-every-odd-element-in-array/31971028#31971028", "title": "Replace every odd element in array", "body": "<p>I don't think you'll find a <em>faster</em> solution, but you may find a more elegant one.  This is how I'd approach this:</p>\n\n<pre><code>arr = [1, 2, 3, 4, 5]\nsym = ['+', '-', '*', '/', '^']\narr.map!.with_index { |value, idx| idx.odd? ? sym[idx] : value }\n</code></pre>\n\n<p>This has the same effect as your code, but it should work on arrays of any size (provided they are the same length).</p>\n"}, {"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1439401854, "post_id": 31971884, "comment_id": 51851195, "body": "Third one is the best :-)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1439400927, "creation_date": 1439400927, "answer_id": 31971884, "question_id": 31970479, "link": "https://stackoverflow.com/questions/31970479/replace-every-odd-element-in-array/31971884#31971884", "title": "Replace every odd element in array", "body": "<p>You could spiff-up your method as follows:</p>\n\n<pre><code>(1...arr.size).step(2).each { |i| arr[i] = sym[arr[i]] }\narr.join\n  #=&gt; \"1*3^5\"\n</code></pre>\n\n<p>Here's another way: </p>\n\n<pre><code>arr.each_slice(2).flat_map { |x,y| y ? [x, sym[y]] : [x] }.join\n  #=&gt; \"1*3^5\"\n</code></pre>\n\n<p>And another:</p>\n\n<pre><code>enum = [true, false].cycle\narr.map { |e| enum.next ? e : sym[e] }.join\n  #=&gt; \"1*3^5\"\n</code></pre>\n\n<p>Your method mutates (modifies) <code>arr</code>. Do you want to do that? The last two methods do not (but could be easily modified to do so).</p>\n\n<p>Which of these three methods is best? You tell me!</p>\n"}], "owner": {"reputation": 25, "user_id": 5183903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae8b71f32f38845d63a2fa98a02209e?s=128&d=identicon&r=PG&f=1", "display_name": "Schugz", "link": "https://stackoverflow.com/users/5183903/schugz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 31971884, "answer_count": 2, "score": 1, "last_activity_date": 1439409347, "creation_date": 1439396113, "last_edit_date": 1439409347, "question_id": 31970479, "link": "https://stackoverflow.com/questions/31970479/replace-every-odd-element-in-array", "title": "Replace every odd element in array", "body": "<p>I have:</p>\n\n<pre><code>arr = [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>The code below replaces the odd elements of <code>arr</code> into symbols corresponding to them:</p>\n\n<pre><code>0 = '+'\n1 = '-'\n2 = '*'\n3 = '/'\n4 = '^'\n</code></pre>\n\n<p>so <code>12345</code> would turn into <code>1*3^5</code>.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>sym = ['+', '-', '*', '/', '^']\nelements = 1\nwhile elements &lt; 5\n  arr[elements] = sym[arr[elements]]\n  elements += 2\nend\nputs \"#{arr.join}\"\n</code></pre>\n\n<p>I am looking for a more efficient replacement to this code.</p>\n"}, {"tags": ["ruby", "regex", "string"], "answers": [{"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1439399706, "post_id": 31971403, "comment_id": 51849985, "body": "This is actually pretty great!"}, {"owner": {"reputation": 5447, "user_id": 667027, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2cc242c4ce73c7e429f9f86f262d1844?s=128&d=identicon&r=PG", "display_name": "xzhu", "link": "https://stackoverflow.com/users/667027/xzhu"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1439399845, "post_id": 31971403, "comment_id": 51850077, "body": "@ndn: Do you mean just <code>string_copy</code> instead of <code>return string_copy</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439410556, "post_id": 31971403, "comment_id": 51855785, "body": "Where does <code>string</code> come from?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1439412947, "post_id": 31971403, "comment_id": 51857115, "body": "@sawa, <a href=\"http://ruby-doc.org/core-2.2.0/MatchData.html#method-i-string\" rel=\"nofollow noreferrer\"><code>MatchData#string</code></a>"}], "tags": [], "owner": {"reputation": 5447, "user_id": 667027, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2cc242c4ce73c7e429f9f86f262d1844?s=128&d=identicon&r=PG", "display_name": "xzhu", "link": "https://stackoverflow.com/users/667027/xzhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1439400098, "last_edit_date": 1439400098, "creation_date": 1439399200, "answer_id": 31971403, "question_id": 31970426, "link": "https://stackoverflow.com/questions/31970426/how-do-i-substitute-using-a-regex-like-a-string-template/31971403#31971403", "title": "How do I substitute using a regex like a string template?", "body": "<p>Okay, I still cannot find a built-in solution for this. So here is a simple extension that achieves something close.</p>\n\n<pre><code>class MatchData\n  def %(hash)\n    string_copy = string.dup\n    hash.each do |key, value|\n      string_copy[self.begin(key)..self.end(key)] = value\n    end\n    string_copy\n  end\nend\n\nmy_regex = /ABC(?&lt;id&gt;...)ABC/\nputs my_regex.match('ABC789ABCQQQQ') % {id: '123'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1439404344, "creation_date": 1439404344, "answer_id": 31972839, "question_id": 31970426, "link": "https://stackoverflow.com/questions/31970426/how-do-i-substitute-using-a-regex-like-a-string-template/31972839#31972839", "title": "How do I substitute using a regex like a string template?", "body": "<p>You could do that like so:</p>\n\n<pre><code>regex = /1(?&lt;cat&gt;[a-z]+)2ABC(?&lt;id&gt;\\d+)ABC/\nstr = '21dog2ABC789ABCQQQQ'\nname = :id   \nreplacement = '123'\n\nm = regex.match(str)\n  #=&gt; #&lt;MatchData \"1dog2ABC789ABC\" cat:\"dog\" id:\"789\"&gt;\ni = m.begin(name)\n  #=&gt; 9\nstr[0,i] + replacement + str[i+m[name].size..-1]\n  #=&gt; \"21dog2ABC123ABCQQQQ\"\n</code></pre>\n"}], "owner": {"reputation": 5447, "user_id": 667027, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2cc242c4ce73c7e429f9f86f262d1844?s=128&d=identicon&r=PG", "display_name": "xzhu", "link": "https://stackoverflow.com/users/667027/xzhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1439404344, "creation_date": 1439395946, "last_edit_date": 1439396450, "question_id": 31970426, "link": "https://stackoverflow.com/questions/31970426/how-do-i-substitute-using-a-regex-like-a-string-template", "title": "How do I substitute using a regex like a string template?", "body": "<p>So here is the scenario. I have a user defined regular expression stored in variable <code>my_regex</code>. I should have no other knowledge than it having a named group called <code>id</code>. For example, one valid regex could be:</p>\n\n<pre><code>my_regex = /ABC(?&lt;id&gt;...)ABC/\n</code></pre>\n\n<p>I'm trying to do this: match this regex against a string, and substitute the group <code>id</code> with a fixed string <code>'123'</code>. For example:</p>\n\n<pre><code>my_func(my_regex, 'ABC789ABCQQQQ')\n#=&gt; 'ABC123ABCQQQQ'\n</code></pre>\n\n<p>Now I know that this could be done if I got to define the regex myself, for example, I could define <code>my_regex</code> as <code>/(ABC)(...)(ABC)/</code>, and just use</p>\n\n<pre><code>my_match_data = my_regex.match('ABC789ABCQQQQ')\nresult = my_match_data.captures[0] + '123' + my_match_data.captures[2]\n</code></pre>\n\n<p>However, aside from the fact that I'm not the one who gets to define it, this solution is ugly and not generalizable. What if instead of one <code>id</code>, I have <code>id1</code>, <code>id2</code> and <code>id3</code>, with arbitrary order?</p>\n\n<p>I was looking for something as elegant as a string template for regex, for example, imagine:</p>\n\n<pre><code>result = my_regex.match('ABC789ABCQQQQ') % {id: '123'}\n</code></pre>\n\n<p>Is there any way to achieve this in a similar fashion?</p>\n"}, {"tags": ["arrays", "ruby", "minmax"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "edited": false, "score": 0, "creation_date": 1439396247, "post_id": 31970440, "comment_id": 51848003, "body": "This is simple and appears to be just what I&#39;m looking for. Do you happen to know if this also allows for the ability to return the index position of said values?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1439396742, "post_id": 31970440, "comment_id": 51848306, "body": "What about if the max value occurs more than once though? For <code>[10, 12, 5, 3, 20, 1, 9, 20]</code> your solution will return <code>[3, 20]</code> and not <code>[1, 20]</code>."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "edited": false, "score": 0, "creation_date": 1439397965, "post_id": 31970440, "comment_id": 51849019, "body": "@scobo you&#39;d just have to define whether you wanted the maximum value found to be the one that occurs first or last. You can find the index of the last occurrence with something like: array.size - array.reverse.index(20) - 1"}, {"owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "edited": false, "score": 0, "creation_date": 1439399408, "post_id": 31970440, "comment_id": 51849811, "body": "Thanks @DavidAldridge. Doing something like <code>array.rindex(array.max)</code> seems like it would work as well, in case we didn&#39;t initially know the values that would be in the array."}, {"owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "edited": false, "score": 0, "creation_date": 1439400231, "post_id": 31970440, "comment_id": 51850292, "body": "Actually, @DavidAldridge I&#39;ve found an issue. Let&#39;s say the array was <code>array = [17,3,6,9,15,8,6,1,10]</code>. This returns <code>[17, 17]</code> instead of <code>[3, 15]</code>"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1439400571, "post_id": 31970440, "comment_id": 51850473, "body": "Can you define the logic whereby it returns [3, 15]? 15 is not the maximum value."}, {"owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "edited": false, "score": 0, "creation_date": 1439401691, "post_id": 31970440, "comment_id": 51851105, "body": "@DavidAldridge Just made an edit to the original for clarification. My original could have been phrased a little better. I&#39;m not looking for the absolute min/max but rather the points at which the difference between the sequential min/max is greatest. Does that make sense?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1439402043, "post_id": 31970440, "comment_id": 51851316, "body": "What about for [10, 9, 8 ,7, 6, 5]?"}, {"owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "edited": false, "score": 0, "creation_date": 1439402281, "post_id": 31970440, "comment_id": 51851459, "body": "I guess in a case like that, there would be no &#39;buy&#39;. So if set up correctly, it would return an error/nil."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1439461841, "post_id": 31970440, "comment_id": 51876149, "body": "I think what you&#39;d want to do is similar to this method, but run the above algorithm for all the subsets of the array from indexes [0..-1], [1..-1], [2..-1] up to [array.size-2..-1] to see which one you get the maximum for. Then that starting index will give you the index of the min."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": true, "score": 0, "last_activity_date": 1439396402, "last_edit_date": 1439396402, "creation_date": 1439395994, "answer_id": 31970440, "question_id": 31970366, "link": "https://stackoverflow.com/questions/31970366/using-minmax-to-return-values-only-when-min-is-in-lower-index-position-of-an-ar/31970440#31970440", "title": "Using .minmax to return values only when min is in lower index position of an array", "body": "<p>I would try:</p>\n\n<pre><code>array[0..array.index(array.max)].minmax\n</code></pre>\n\n<p>So just apply minmax to the elements between the first of the array and the index of the maximum.</p>\n\n<p>To return the index values, just use map to iterate through the minmax array and get their indexes in a new array:</p>\n\n<pre><code>array         = [10, 12, 5, 3, 20, 1, 9]\nmin_max_array = array[0..array.index(array.max)].minmax\nmin_max_index = min_max_array.map{|v| array.index(v)}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 31970440, "answer_count": 1, "score": 0, "last_activity_date": 1439401533, "creation_date": 1439395689, "last_edit_date": 1439401533, "question_id": 31970366, "link": "https://stackoverflow.com/questions/31970366/using-minmax-to-return-values-only-when-min-is-in-lower-index-position-of-an-ar", "title": "Using .minmax to return values only when min is in lower index position of an array", "body": "<p>Is there a way to only return the min/max values of an array where the min is in a lower index position than the max? </p>\n\n<p>For instance, let's say we have:</p>\n\n<pre><code>array = [10, 12, 5, 3, 20, 1, 9]\n</code></pre>\n\n<p>If we did .minmax on this array we would get the following:</p>\n\n<pre><code>array.minmax\n=&gt; [1, 20]\n</code></pre>\n\n<p>However, I'm only interested in getting the minimum value that has a lower index than the maximum value, in this case:</p>\n\n<pre><code>=&gt; [3, 20]\n</code></pre>\n\n<p>I've been trying to think about different ways to do this but haven't had much luck. I tried to find a way to get the min/max values where the difference between the two returns a negative value but couldn't find a way to do that. </p>\n\n<p><strong>Edit</strong>: To clarify, this is essentially intended to be a stock picker. The array elements are the prices of a stock each day. I'm interested in maximizing the difference between a min/max in the array (buy on the day when stock = 3, sell on the day when stock = 15). The values may not be the absolute min or max. </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "datatables"], "comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439396400, "post_id": 31970223, "comment_id": 51848108, "body": "<a href=\"https://github.com/fgnass/spin.js/\" rel=\"nofollow noreferrer\">Spin.js</a> is an option for the spinner itself. Everything else depends on what you want it to look like..."}, {"owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439396584, "post_id": 31970223, "comment_id": 51848220, "body": "The spinner and it&#39;s design won&#39;t matter that much. My issue is I don&#39;t know where to add the js code to display the spinner while the page is loading and then display the table once it has loaded completely... Apologies I haven&#39;t made that clear enough in my question"}, {"owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439396932, "post_id": 31970223, "comment_id": 51848405, "body": "Unfortunately I&#39;m a bit of an amateur myself. But I don&#39;t think it&#39;s a DataTables issue... When my page loads it populated the entire HTML section before activating DataTables which leaves an unformatted table. I think DataTables is waiting on IT. Not the other way around"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439396971, "post_id": 31970223, "comment_id": 51848425, "body": "ETA: how is the data loaded? Is it asynchronous? To display the spinner on load, you want to load the spinner before the data, then remove it after its successfully loaded"}, {"owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439397219, "post_id": 31970223, "comment_id": 51848579, "body": "The data is loaded as shown in the question. It uses embedded ruby to loop through each Object and populate the columns using the Object as a reference. I&#39;m not sure if java script and ruby run asynchronously or not."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "edited": false, "score": 0, "creation_date": 1439398713, "post_id": 31971016, "comment_id": 51849435, "body": "That worked perfectly for hiding the spinner once the table loaded! Thank you. One more thing though is to have the table hidden from the time the page loads until DataTables has initialised. Is there a javascript function ti initialise code when the page has first loaded?"}, {"owner": {"reputation": 3912, "user_id": 989722, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/735027532/picture?type=large", "display_name": "jonmrich", "link": "https://stackoverflow.com/users/989722/jonmrich"}, "reply_to_user": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "edited": false, "score": 0, "creation_date": 1439399273, "post_id": 31971016, "comment_id": 51849724, "body": "Unfortunately, you can&#39;t do that as far as I know. If datatables can&#39;t find the div for the table, you&#39;ll get errors and it won&#39;t load. This includes if the div is hidden or added after the fact."}, {"owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "edited": false, "score": 0, "creation_date": 1439399624, "post_id": 31971016, "comment_id": 51849934, "body": "I see.. Thanks for the help."}, {"owner": {"reputation": 3912, "user_id": 989722, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/735027532/picture?type=large", "display_name": "jonmrich", "link": "https://stackoverflow.com/users/989722/jonmrich"}, "reply_to_user": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "edited": false, "score": 0, "creation_date": 1439399745, "post_id": 31971016, "comment_id": 51850013, "body": "No problem. If the answer helped, please accept it."}, {"owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "edited": false, "score": 0, "creation_date": 1440237925, "post_id": 31971016, "comment_id": 52197923, "body": "Thanks for this. I&#39;m going to try and hid the div some other way but your spinner implementation helped"}], "tags": [], "owner": {"reputation": 3912, "user_id": 989722, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/735027532/picture?type=large", "display_name": "jonmrich", "link": "https://stackoverflow.com/users/989722/jonmrich"}, "is_accepted": true, "score": 9, "last_activity_date": 1502985376, "last_edit_date": 1502985376, "creation_date": 1439397882, "answer_id": 31971016, "question_id": 31970223, "link": "https://stackoverflow.com/questions/31970223/display-spinner-while-datatables-table-loads-ruby-on-rails/31971016#31971016", "title": "Display spinner while DataTables table loads Ruby on Rails", "body": "<p>You can add in a spinner gif (find one here: <a href=\"http://www.ajaxload.info/\" rel=\"nofollow noreferrer\">http://www.ajaxload.info/</a>) as a <code>div</code> where your table should be and then clear it when the table loads using <code>initComplete</code>.</p>\n\n<p>Put something like this right below <code>&lt;div class=\"col-md-12\"&gt;</code>:</p>\n\n<pre><code>&lt;img id=\"loadingSpinner\" src=\"/myspinner.gif\"&gt;\n</code></pre>\n\n<p>And then call your table like this:</p>\n\n<pre><code>$(document).ready(function() {\n  var table = $('#app-list-table').DataTable({\n    //any other datatables settings here\n    \"initComplete\": function(settings, json) {\n      $('#loadingSpinner').hide();\n      //or $('#loadingSpinner').empty();\n    }\n  })\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "edited": false, "score": 0, "creation_date": 1440237947, "post_id": 31971167, "comment_id": 52197931, "body": "Apologies I&#39;m not looking to use AJAX. Thanks for the answer though"}], "tags": [], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "is_accepted": false, "score": 1, "last_activity_date": 1439398393, "creation_date": 1439398393, "answer_id": 31971167, "question_id": 31970223, "link": "https://stackoverflow.com/questions/31970223/display-spinner-while-datatables-table-loads-ruby-on-rails/31971167#31971167", "title": "Display spinner while DataTables table loads Ruby on Rails", "body": "<p>If the data is loaded in Ruby, there's no point in loading a spinner because the data has already loaded by then. This is a bare-bones ordering of what happens in your Rails app:</p>\n\n<ol>\n<li>Controller then view Ruby executes, rendering HTML</li>\n<li>HTML is sent to client</li>\n<li>Client requests linked CSS and JS in order</li>\n<li>CSS and JS execute in order</li>\n<li>Asynchronous JS finishes</li>\n</ol>\n\n<p>So, the majority of your delay is happening at step 1, but a CSS/JS spinner won't load until step 4. If you want to use a spinner, you need to load the data via async Ajax, so you can load the spinner in 4, then finish loading data and remove spinner in 5. Using jQuery Ajax:</p>\n\n<pre><code>var spinner = new Spinner().spin(document.getElementById('spinner'));\n$.ajax(\"/your/data/path.json\")\n.done(function(data) {\n  // load data here, then load table:\n  var table = $('#app-list-table').DataTable({ \u2026 })\n  // remove spinner\n  $('#spinner').remove();\n});\n</code></pre>\n\n<p>You could of course add the spinner to your current code:</p>\n\n<pre><code>var spinner = new Spinner().spin(document.getElementById('spinner'));\n$('#app-list-table').DataTable({ \n  \u2026\n  initComplete: function() { $('#spinner').remove(); }\n})\n</code></pre>\n\n<p>However, again, since most of the delay happens in Ruby, you'll only see the spinner for a brief moment at the end of the delay. To see the spinner for the whole delay, use Ajax.</p>\n"}, {"tags": [], "owner": {"reputation": 2008, "user_id": 525185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qdyJE.jpg?s=128&g=1", "display_name": "Richard McKechnie", "link": "https://stackoverflow.com/users/525185/richard-mckechnie"}, "is_accepted": false, "score": 0, "last_activity_date": 1463153209, "creation_date": 1463153209, "answer_id": 37213875, "question_id": 31970223, "link": "https://stackoverflow.com/questions/31970223/display-spinner-while-datatables-table-loads-ruby-on-rails/37213875#37213875", "title": "Display spinner while DataTables table loads Ruby on Rails", "body": "<p>If you are looking for a way to hide the datatable until it's ready, it is possible to do this by putting the datatable inside a div that is initially set to display:none and then showing the div after you've initialised the datatable... I also included an opaque overlay div over the whole page while the datatable(s) are loading and a delay of 500 ms to force the loading effect.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>&lt;script type=\"text/javascript\" language=\"javascript\" &gt;\r\n$(document).ready(function () {\r\n\r\n\t$(function(){\r\n\t   function loadDataTable(){\r\n\t\t\r\n\t\t\tvar dataTableId = $('#dataTableId').dataTable({\"initComplete\": function(settings, json) {$('.overlay').hide();});\r\n\t\t\t$('#divContatingDataTable').show();\r\n\t};\r\n\t   window.setTimeout(loadDataTable, 500);\r\n\t});\r\n\r\n});\r\n&lt;/script&gt;</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>&lt;style type=\"text/css\"&gt;\r\n\t.overlay {\r\n\t\tbackground: #ffffff;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\twidth:100%;\r\n\t\theight:100%;\r\n\t\ttext-align: center;\r\n\t\topacity: 0.8;\r\n\t}\r\n&lt;/style&gt;</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"overlay\"&gt;\r\n\tThis div / overlay contains a loading message / image and can be styled however you like\r\n\t&lt;img class=\"loading\" src=\"loading.gif\" /&gt;\r\n&lt;/div&gt;\r\n\r\n\r\n&lt;div id=\"divContatingDataTable\" style=\"display:none;\"&gt;\r\n\t&lt;!-- Datatable contents with id dataTableId go here --&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 360, "user_id": 3954175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YytxP.png?s=128&g=1", "display_name": "Jcc.Sanabria", "link": "https://stackoverflow.com/users/3954175/jcc-sanabria"}, "is_accepted": false, "score": 0, "last_activity_date": 1495659474, "creation_date": 1495659474, "answer_id": 44168334, "question_id": 31970223, "link": "https://stackoverflow.com/questions/31970223/display-spinner-while-datatables-table-loads-ruby-on-rails/44168334#44168334", "title": "Display spinner while DataTables table loads Ruby on Rails", "body": "<p>Ive used the code provided on the link below, but insteat of using an old jquery version you should use the latest one (3.x), otherwise Datatables will crash. Hope this help</p>\n\n<p><a href=\"http://bradsknutson.com/blog/display-loading-image-while-page-loads/\" rel=\"nofollow noreferrer\">http://bradsknutson.com/blog/display-loading-image-while-page-loads/</a></p>\n"}], "owner": {"reputation": 141, "user_id": 2525740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29b6be0e7838f2f9fab8cf39107967a?s=128&d=identicon&r=PG", "display_name": "TheFlanman91", "link": "https://stackoverflow.com/users/2525740/theflanman91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13324, "favorite_count": 1, "accepted_answer_id": 31971016, "answer_count": 4, "score": 8, "last_activity_date": 1502985376, "creation_date": 1439395233, "last_edit_date": 1439396728, "question_id": 31970223, "link": "https://stackoverflow.com/questions/31970223/display-spinner-while-datatables-table-loads-ruby-on-rails", "title": "Display spinner while DataTables table loads Ruby on Rails", "body": "<p>Using Rails I have built a web app. One of the pages of the web app displays a table which uses the <a href=\"https://www.datatables.net/\" rel=\"noreferrer\">DataTables API</a>. This <a href=\"http://jsfiddle.net/hcjpftyn/\" rel=\"noreferrer\">JSFiddle</a> shows an example of what my web app looks like.</p>\n\n<p>The problem with this is that when I begin to add in large amounts of data (current test data is 1500 rows), the table loads each row first before running the javascript meaning you get an unformated table for a few seconds before the Javascript kicks in and DataTables activates.</p>\n\n<p>I would like to display a spinner, or processing message (something along those lines) in place of the table until the page has fully populated, once that has finished I would like to run my javascript activating DataTables.</p>\n\n<p><strong>EDIT: My main issue is I'm not sure how to use Javascript to display the spinner while the table loads but then change to the table once the page has finished loading</strong></p>\n\n<p>My code is as follows:</p>\n\n<h3>HTML/eRB</h3>\n\n<pre><code>&lt;div class=\"list\"&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-12\"&gt;\n                &lt;table id=\"app-list-table\" class=\"display table\" cellspacing=\"0\"&gt;\n                    &lt;thead&gt;\n                        &lt;tr class=\"table-headers\"&gt;\n                            &lt;th&gt;Header 1&lt;/th&gt;\n                            &lt;th&gt;Header 2&lt;/th&gt;\n                            &lt;th&gt;Header 3&lt;/th&gt;\n                            &lt;th&gt;Header 4&lt;/th&gt;\n                            &lt;th&gt;Header 5&lt;/th&gt;\n                            &lt;th&gt;Header 6&lt;/th&gt;\n                            &lt;th&gt;Header 7&lt;/th&gt;\n                            &lt;th&gt;Header 8&lt;/th&gt;\n                            &lt;th&gt;Header 9&lt;/th&gt;\n                            &lt;th&gt;Header 10&lt;/th&gt;\n                        &lt;/tr&gt;\n                    &lt;/thead&gt;\n                    &lt;tbody&gt;\n                        &lt;%= Server.find_each do |server| %&gt;\n                        &lt;tr&gt;\n                            &lt;td&gt;&lt;%= link_to(server.server_name, server_path(server)) %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.application %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.server_role %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.team_contact %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.individual_contact %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.business_owner %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.vendor %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.vendor_contact %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= link_to(\"Click Here\", server.main_doc) %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= server.main_win %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;% end %&gt;\n                    &lt;/tbody&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<h3>Javascript</h3>\n\n<pre><code>$(document).ready(function() {\n        var table = $('#app-list-table').DataTable({\n            \"scrollX\": true\n\n        });\n    });\n</code></pre>\n\n<p>Please let me know if there is anything else you would like me to include.   </p>\n"}, {"tags": ["ruby", "macos"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5209397, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j6es7TqQ7zw/AAAAAAAAAAI/AAAAAAAAFhk/Ul4HhTT9U5k/photo.jpg?sz=128", "display_name": "k2rubyj", "link": "https://stackoverflow.com/users/5209397/k2rubyj"}, "edited": false, "score": 0, "creation_date": 1439416452, "post_id": 31970024, "comment_id": 51858686, "body": "My initial intention was to debug the ruby code from eclipse ide. And eclipse complained about not having ruby-debug or debugger gem in the environment. I am not sure how to tell eclipse to use byebug instead of ruby-debug. Can you please help."}], "tags": [], "owner": {"reputation": 389, "user_id": 101080, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/301539/picture?type=large", "display_name": "schwabsauce", "link": "https://stackoverflow.com/users/101080/schwabsauce"}, "is_accepted": false, "score": 1, "last_activity_date": 1439394632, "creation_date": 1439394632, "answer_id": 31970024, "question_id": 31969982, "link": "https://stackoverflow.com/questions/31969982/error-installing-ruby-debug-gem-on-osx-yosemite/31970024#31970024", "title": "Error installing ruby-debug gem on osx yosemite", "body": "<p>With that version of Ruby, you should use byebug instead of ruby-debug.</p>\n"}], "owner": {"reputation": 31, "user_id": 5209397, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j6es7TqQ7zw/AAAAAAAAAAI/AAAAAAAAFhk/Ul4HhTT9U5k/photo.jpg?sz=128", "display_name": "k2rubyj", "link": "https://stackoverflow.com/users/5209397/k2rubyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439415728, "creation_date": 1439394524, "last_edit_date": 1439411147, "question_id": 31969982, "link": "https://stackoverflow.com/questions/31969982/error-installing-ruby-debug-gem-on-osx-yosemite", "title": "Error installing ruby-debug gem on osx yosemite", "body": "<p>Have anybody had success installing ruby-debug in osx yosmite ? I have ruby 2.2.1 and rvm 1.26.11 on my mac. However, when i tried to install ruby-debug, it fails with below error:</p>\n\n<pre><code>~ --&gt; gem install ruby-debug\nBuilding native extensions.  This could take a while...\nERROR:  Error installing ruby-debug:\n    ERROR: Failed to build gem native extension.\n\n    /Users/userid/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20150812-26861-vlyh28.rb extconf.rb\nCan't handle 1.9.x yet\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/userid/.rvm/rubies/ruby-2.2.1/bin/$(RUBY_BASE_NAME)\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/userid/.rvm/gems/ruby-2.2.1/gems/linecache-0.46 for inspection.\nResults logged to /Users/userid/.rvm/gems/ruby-2.2.1/extensions/x86_64-darwin-14/2.2.0-static/linecache-0.46/gem_make.out\n~ --&gt;\n</code></pre>\n\n<blockquote>\n  <p>~ --> type rvm | head -1 rvm is a function  ~ --> rvm -v  rvm 1.26.11 \n  (latest) by Wayne E. Seguin , Michal Papis\n   [<a href=\"https://rvm.io/]\" rel=\"nofollow\">https://rvm.io/]</a>   ~ --> ruby -v  ruby 2.2.1p85\n  (2015-02-26 revision 49769) [x86_64-darwin14]</p>\n</blockquote>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 1013294, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/968c580a46b83fefee4a0dc4fbab4833?s=128&d=identicon&r=PG&f=1", "display_name": "Duplosion", "link": "https://stackoverflow.com/users/1013294/duplosion"}, "edited": false, "score": 0, "creation_date": 1439408296, "post_id": 31970085, "comment_id": 51854683, "body": "That did it! Thanks so much."}], "tags": [], "owner": {"reputation": 951, "user_id": 4003753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8P02.jpg?s=128&g=1", "display_name": "dreamingblackcat", "link": "https://stackoverflow.com/users/4003753/dreamingblackcat"}, "is_accepted": true, "score": 1, "last_activity_date": 1439394789, "creation_date": 1439394789, "answer_id": 31970085, "question_id": 31969629, "link": "https://stackoverflow.com/questions/31969629/php-returning-hash-to-ruby-api-as-get/31970085#31970085", "title": "PHP: Returning &#39;hash&#39; to Ruby API as GET", "body": "<p>You can try subscript operator style URL parameters for nested parameters in GET requests. Eg:</p>\n\n<p><code>\"https://myapiurl.com?answers[q0]=1&amp;answers[q1]=2\"</code> etc.</p>\n\n<p>At least it worked on sinatra server, so it should also work for rails server.</p>\n"}], "owner": {"reputation": 233, "user_id": 1013294, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/968c580a46b83fefee4a0dc4fbab4833?s=128&d=identicon&r=PG&f=1", "display_name": "Duplosion", "link": "https://stackoverflow.com/users/1013294/duplosion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 31970085, "answer_count": 1, "score": 1, "last_activity_date": 1439394789, "creation_date": 1439393492, "question_id": 31969629, "link": "https://stackoverflow.com/questions/31969629/php-returning-hash-to-ruby-api-as-get", "title": "PHP: Returning &#39;hash&#39; to Ruby API as GET", "body": "<p>I'm working with an API where I need to provide parameters via <strong>GET</strong> in order to get a response. </p>\n\n<p>I'm working with PHP. </p>\n\n<p>This is what the API documentation says:</p>\n\n<blockquote>\n  <p><strong>Arguments</strong></p>\n\n<pre><code>{\n    'answers': { 'q0':2, 'q1':2, 'q2':1 }\n}\n</code></pre>\n  \n  <p>answers (required), <strong>hash</strong></p>\n  \n  <p><strong>Hash</strong> describing the answers.</p>\n</blockquote>\n\n<p>I know that the API itself is written in Ruby, so I'm <em>assuming</em> that 'hash' would translate to 'associative array' in PHP context (please correct me if you think I'm wrong here -- I don't know Ruby, but this is where research has lead me).</p>\n\n<p>That said, this what I've tried so far (with no success -- I'm really not quite sure how to tackle this):</p>\n\n<p><strong>My (terribly broken) code:</strong></p>\n\n<pre><code>$answers = array('q0' =&gt; 1,\n            'q1' =&gt; 2,\n            'q2' =&gt; 3,\n            'q3' =&gt; 0,\n            'q4' =&gt; 2,\n            'q5' =&gt; 1,\n            'q6' =&gt; 0\n            );\n\n$url = \"https://myapiurl.com?answers=\" . $answers;\n\n$session = curl_init($url);\ncurl_setopt ($session, CURLOPT_HTTPHEADER, array('Authentication: Token token=' . $token . ', Content-Type:application/json'));\ncurl_setopt ($session, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt ($session, CURLOPT_HTTPGET, true);\ncurl_setopt ($session, CURLOPT_TIMEOUT, '3');\n\n$response = curl_exec($session);\n\ncurl_close($session);\n\nvar_dump($response);\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "passenger", "vhosts"], "comments": [{"owner": {"reputation": 312, "user_id": 865168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/U2zgb.jpg?s=128&g=1", "display_name": "CJW", "link": "https://stackoverflow.com/users/865168/cjw"}, "edited": false, "score": 0, "creation_date": 1439393215, "post_id": 31968882, "comment_id": 51845955, "body": "You could try adding the DirectoryIndex directive  <code>DirectoryIndex index.html</code>"}, {"owner": {"reputation": 17872, "user_id": 20816, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02f0ee0da223f90bb9996ef252e528c1?s=128&d=identicon&r=PG", "display_name": "Hongli", "link": "https://stackoverflow.com/users/20816/hongli"}, "edited": false, "score": 0, "creation_date": 1439414624, "post_id": 31968882, "comment_id": 51857963, "body": "Maybe try Passenger&#39;s Standalone mode?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5219691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b210839c92161c628771b38fd8a6c09d?s=128&d=identicon&r=PG&f=1", "display_name": "M47z3", "link": "https://stackoverflow.com/users/5219691/m47z3"}, "is_accepted": true, "score": 0, "last_activity_date": 1440142736, "creation_date": 1440142736, "answer_id": 32134855, "question_id": 31968882, "link": "https://stackoverflow.com/questions/31968882/deploying-with-passenger-server-answers-403-forbidden-or-over-https-serves-t/32134855#32134855", "title": "Deploying with passenger - server answers 403 Forbidden or (over HTTPS) serves the directory index", "body": "<p>After two weeks I found a way to get it to work. To alias the rails server was not excepted by passenger. The solution was to use the full domain as the server name and switch every other server to an Alias. I don't know why it worked, but it did!</p>\n"}], "owner": {"reputation": 1, "user_id": 5219691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b210839c92161c628771b38fd8a6c09d?s=128&d=identicon&r=PG&f=1", "display_name": "M47z3", "link": "https://stackoverflow.com/users/5219691/m47z3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 32134855, "answer_count": 1, "score": 0, "last_activity_date": 1440142736, "creation_date": 1439391627, "question_id": 31968882, "link": "https://stackoverflow.com/questions/31968882/deploying-with-passenger-server-answers-403-forbidden-or-over-https-serves-t", "title": "Deploying with passenger - server answers 403 Forbidden or (over HTTPS) serves the directory index", "body": "<p>I have some issues deploying my first rails application called \"PoolShifts\". My server is at home and has only one domain by <code>no-ip.org</code>. So I set up all the different servers (like owncloud, phpmyadmin...) in \"subdirectories\" aliased to the correct location. My server runs Debian 7 with Apache 2.2.22. I've passenger 4.0.8 installed and the mod files passenger.conf set to:</p>\n\n<pre><code>&lt;IfModule mod_passenger.c&gt;\n  PassengerRoot /usr/local/rvm/gems/ruby-2.1.2/gems/passenger-4.0.8\n  #PassengerDefaultRuby /usr/local/rvm/wrappers/ruby-2.1.2/ruby\n  PassengerDefaultRuby /usr/local/rvm/rubies/ruby-2.1.2/bin/ruby\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>and passenger.load set to:</p>\n\n<pre><code>LoadModule passenger_module /usr/local/rvm/gems/ruby-1.1.2/gems/passenger-4.0.8/buildout/apache2/mod_passenger.so\n</code></pre>\n\n<p>Just as the passenger installation recommended. The apache2 modification was enabled by <code>a2enmod passenger</code>. The commented out part was given by the installation but <a href=\"https://stackoverflow.com/questions/19553907/403-forbidden-on-rails-app-w-nginx-passenger\">403 Forbidden on Rails app</a> recommented to set it to the result of <code>which ruby</code> so I tried this, no success. My user is called \"matze\" and I've copied my application to <code>/home/matze/PoolShifts</code>. The site is enabled and the file <code>/etc/apache2/sites-available/poolshifts</code> contains:</p>\n\n<pre><code>Alias /poolshifts \"/home/matze/PoolShifts/public/\"\n&lt;VirtualHost *:80&gt;\n  ServerName localhost\n  RailsEnv development\n  DocumentRoot /home/matze/PoolShifts/public/\n  &lt;Directory /home/matze/PoolShifts/public&gt;\n    AllowOverride all\n    Options -MultiViews\n    Require all granted\n    Options FollowSymLinks\n    Order allow,deny\n    Allow from all\n    Options +Includes -Indexes\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:443&gt;\n  ServerName localhost\n  RailsEnv development\n  DocumentRoot /home/matze/PoolShifts/public/\n\n  &lt;Directory /home/matze/PoolShifts/public&gt;\n    AllowOverride all\n    Options -MultiViews\n    Require all granted\n    Options FollowSymLinks\n    Order allow,deny\n    Allow from all\n    Options +Includes -Indexes\n  &lt;/Directory&gt;\n\n  SSLEngine on\n  SSLCertificateFile /root/server.crt\n  SSLCertificateKeyFile /root/server.key\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>All the other virtual hosts work just fine (with and without SSL encryption) but if I ask for <code>/poolshifts</code> over HTTP I get the <code>403 Forbidden</code> error and the directory index of <code>/home/matze/PoolShifts/public</code> over HTTPS. Im just frustrated because I've been searching and trying all the different solutions I found for several days now. It seems like there is no passenger instance running because passenger-status gives me:</p>\n\n<pre><code>Version : 4.0.8\nDate    : 2015-08-12 16:52:14 +0200\nInstance: 26551\n----------- General information -----------\nMax pool size : 6\nProcesses     : 0\nRequests in top-level queue : 0\n\n----------- Application groups -----------\n</code></pre>\n\n<p>I can start the application server WebRick and the application works just fine. Do you maybe know what I'm doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 2714532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b237c0974800e4e365020f3786647444?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Jin", "link": "https://stackoverflow.com/users/2714532/fan-jin"}, "is_accepted": true, "score": 0, "last_activity_date": 1439392782, "creation_date": 1439392782, "answer_id": 31969344, "question_id": 31968353, "link": "https://stackoverflow.com/questions/31968353/how-to-declare-ar-insert-in-polymorphic-associations/31969344#31969344", "title": "How to declare AR insert in polymorphic associations", "body": "<p>Not really an answer, but...</p>\n\n<p>You can make the creation inline if it's more desirable</p>\n\n<pre><code>u.profile = Agent.new phone: '0000000', status: 'xis'\n</code></pre>\n\n<p>To update attributes inline</p>\n\n<pre><code>u.profile.update_attributes phone: '0000000'\n</code></pre>\n\n<p>Unfortunately, for polymorphic relationship, the <code>build_other</code> method doesn't exist as this would be the preferred way in non-polymorphic relationships for inserting associations on the fly.</p>\n\n<p>See </p>\n\n<blockquote>\n  <p>Auto-generated methods</p>\n</blockquote>\n\n<p>in:\n<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</a></p>\n"}], "owner": {"reputation": 149, "user_id": 2603240, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000071505458/picture?type=large", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2603240/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 31969344, "answer_count": 1, "score": 0, "last_activity_date": 1439392782, "creation_date": 1439390292, "question_id": 31968353, "link": "https://stackoverflow.com/questions/31968353/how-to-declare-ar-insert-in-polymorphic-associations", "title": "How to declare AR insert in polymorphic associations", "body": "<p>I have this code:</p>\n\n<p><em>model/agent.rb</em></p>\n\n<pre><code>class Agent &lt; ActiveRecord::Base\n  has_one :user, :as =&gt; :profile\nend\n</code></pre>\n\n<p><em>model/default.rb</em></p>\n\n<pre><code>class Default &lt; ActiveRecord::Base\n  has_one :user, :as =&gt; :profile\nend\n</code></pre>\n\n<p><em>model/user.rb</em></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  belongs_to :profile, :polymorphic =&gt; true\nend\n</code></pre>\n\n<p><em>example.rb</em></p>\n\n<pre><code>a = Agent.new\na.phone = '0000000'\na.status = 'xis'\n\nu = User.new\nu.name = 'Name'\nu.email = 'email@email.com'\nu.password = 'new123'\nu.profile = agent\nu.save!\n</code></pre>\n\n<p>This is the only way to write this code?</p>\n\n<p>What better way to insert record in a polymorphic relationship? \nI can only have a <code>Agent.new</code>?</p>\n\n<p>How to write updates statements?</p>\n"}, {"tags": ["ruby", "mongodb", "cursor"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1439391303, "post_id": 31968350, "comment_id": 51844620, "body": "is this mongoid or the mongodb ruby driver?"}, {"owner": {"reputation": 604, "user_id": 540761, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0afdadc2029bb39daa3e49d90fcabe52?s=128&d=identicon&r=PG", "display_name": "synek317", "link": "https://stackoverflow.com/users/540761/synek317"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1439396570, "post_id": 31968350, "comment_id": 51848211, "body": "I use mongoid for mongo connection."}], "owner": {"reputation": 604, "user_id": 540761, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0afdadc2029bb39daa3e49d90fcabe52?s=128&d=identicon&r=PG", "display_name": "synek317", "link": "https://stackoverflow.com/users/540761/synek317"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439390286, "creation_date": 1439390286, "question_id": 31968350, "link": "https://stackoverflow.com/questions/31968350/can-i-safely-use-multiple-mongo-cursors-at-once-in-ruby", "title": "Can I safely use multiple mongo cursors at once in ruby?", "body": "<p>Can you tell me if following code is safe and there is no risk that some documents may be missed?\nThe idea behind the code is to process multiple data sets (obtained for multiple queries), but spend at most n seconds in each collection.</p>\n\n<p>Example: for two sets of data <code>[1,2,3,4]</code>, <code>[A,B,C,D]</code>, lets say each item processing time is 5 seconds and <code>took_too_much_time</code> returns <code>true</code> every 10 secs, I want to process 1,2, then A,B, then 3,4, then C,D.</p>\n\n<p>On a small amount of data everything is working well but after switching to bigger set (tens of queries and thousands of documents), I'm missing some documents. Would be really great if ou could confirm or deny that below code may be the reason.</p>\n\n<pre><code>cursors = []\nqueries.each do |query|\n    collection.find(query, {timeout: false}) { |c| cursors &lt;&lt; c }\nend\n\nwhile(cursors.any?)\n    cursors.each do |c|\n        c.each do |document|\n            process_document(document)\n            break if took_too_much_time\n        end\n    end\n\n    cursors = remove_empty_cursors(cursors)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "carrierwave", "minimagick"], "comments": [{"owner": {"reputation": 2124, "user_id": 3871352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb6Z4.jpg?s=128&g=1", "display_name": "Kiloreux", "link": "https://stackoverflow.com/users/3871352/kiloreux"}, "edited": false, "score": 0, "creation_date": 1439393843, "post_id": 31968271, "comment_id": 51846412, "body": "<a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/368#issuecomment-3597643\" rel=\"nofollow noreferrer\">github.com/carrierwaveuploader/carrierwave/issues/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2475, "user_id": 523585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NtF1o.jpg?s=128&g=1", "display_name": "Raghu", "link": "https://stackoverflow.com/users/523585/raghu"}, "edited": false, "score": 2, "creation_date": 1439390862, "post_id": 31968465, "comment_id": 51844252, "body": "I am using minimagick and not Rmagick. Cant pdf&#39;s be converted using MInimagick?"}, {"owner": {"reputation": 647, "user_id": 4649530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2da5fe7e50cd453d448bbc28422677?s=128&d=identicon&r=PG", "display_name": "Gearnode", "link": "https://stackoverflow.com/users/4649530/gearnode"}, "reply_to_user": {"reputation": 2475, "user_id": 523585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NtF1o.jpg?s=128&g=1", "display_name": "Raghu", "link": "https://stackoverflow.com/users/523585/raghu"}, "edited": false, "score": 0, "creation_date": 1439390997, "post_id": 31968465, "comment_id": 51844360, "body": "Yes it&#39;s possible but I never test. I found <a href=\"http://afreshcup.com/home/2012/9/27/thumbnailing-pdfs-with-minimagick.html\" rel=\"nofollow noreferrer\">this article</a> with minimagick."}, {"owner": {"reputation": 2475, "user_id": 523585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NtF1o.jpg?s=128&g=1", "display_name": "Raghu", "link": "https://stackoverflow.com/users/523585/raghu"}, "edited": false, "score": 0, "creation_date": 1439391229, "post_id": 31968465, "comment_id": 51844561, "body": "Yeah tried the code from that article i endup getting the same error that i have posted in my description"}, {"owner": {"reputation": 647, "user_id": 4649530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2da5fe7e50cd453d448bbc28422677?s=128&d=identicon&r=PG", "display_name": "Gearnode", "link": "https://stackoverflow.com/users/4649530/gearnode"}, "reply_to_user": {"reputation": 2475, "user_id": 523585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NtF1o.jpg?s=128&g=1", "display_name": "Raghu", "link": "https://stackoverflow.com/users/523585/raghu"}, "edited": false, "score": 0, "creation_date": 1439391307, "post_id": 31968465, "comment_id": 51844622, "body": "You have test <a href=\"https://github.com/minimagick/minimagick/issues/288\" rel=\"nofollow noreferrer\">this issue</a> ?"}, {"owner": {"reputation": 2475, "user_id": 523585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NtF1o.jpg?s=128&g=1", "display_name": "Raghu", "link": "https://stackoverflow.com/users/523585/raghu"}, "edited": false, "score": 1, "creation_date": 1439489335, "post_id": 31968465, "comment_id": 51894983, "body": "I had to install Ghostscript on my mac to getting it working. and then I use used manipulate! to get my pdf rendered. I had to loop in page by page of the pdf file to convert every pdf page to an image. I also tried using your solution  by installing rmagick and that worked well to . Thanks for your help ."}, {"owner": {"reputation": 1770, "user_id": 479654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xKVZC.jpg?s=128&g=1", "display_name": "Patrick Ferreira", "link": "https://stackoverflow.com/users/479654/patrick-ferreira"}, "edited": false, "score": 1, "creation_date": 1476196760, "post_id": 31968465, "comment_id": 67238474, "body": "installing <code>gs</code> was the solution for me too, big thanks :D"}], "tags": [], "owner": {"reputation": 647, "user_id": 4649530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2da5fe7e50cd453d448bbc28422677?s=128&d=identicon&r=PG", "display_name": "Gearnode", "link": "https://stackoverflow.com/users/4649530/gearnode"}, "is_accepted": false, "score": 1, "last_activity_date": 1439390894, "last_edit_date": 1439390894, "creation_date": 1439390578, "answer_id": 31968465, "question_id": 31968271, "link": "https://stackoverflow.com/questions/31968271/carrierwave-pdf-to-image-using-minimagick/31968465#31968465", "title": "Carrierwave PDF to Image using MiniMagick", "body": "<p>If you use RMagick</p>\n\n<pre><code>require 'RMagick'\npdf_file = Magick::ImageList.new('your_file.pdf')\n</code></pre>\n\n<p>PDF is image list (<a href=\"http://www.imagemagick.org/script/convert.php\" rel=\"nofollow\">more info with ImageMagick</a>).</p>\n"}], "owner": {"reputation": 2475, "user_id": 523585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NtF1o.jpg?s=128&g=1", "display_name": "Raghu", "link": "https://stackoverflow.com/users/523585/raghu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2380, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1439390894, "creation_date": 1439390101, "last_edit_date": 1439390494, "question_id": 31968271, "link": "https://stackoverflow.com/questions/31968271/carrierwave-pdf-to-image-using-minimagick", "title": "Carrierwave PDF to Image using MiniMagick", "body": "<p>My requirement is to convert pdf to images if a pdf file is being uploaded. So far This is what I have done .</p>\n\n<pre><code>class ImageUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n  include CarrierWave::MimeTypes\n\n  # Choose what kind of storage to use for this uploader:\n  storage :file\n  # storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"#{PRIVATE_UPLOADS_PATH}/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Provide a default URL as a default if there hasn't been a file uploaded:\n  # def default_url\n  #   # For Rails 3.1+ asset pipeline compatibility:\n  #   # ActionController::Base.helpers.asset_path(\"fallback/\" + [version_name, \"default.png\"].compact.join('_'))\n  #\n  #   \"/images/fallback/\" + [version_name, \"default.png\"].compact.join('_')\n  # end\n\n  process :set_content_type\n  process :set_model_ext_attributes\n\n  # Create different versions of your uploaded files:\n  version :large, if: :image? do\n    process :resize_and_pad =&gt; [800, 600]\n  end\n  version :thumb, if: :image? do\n    process :resize_and_pad =&gt; [100, 100]\n  end\n\n  version :normal, if: :pdf? do\n    process :efficient_conversion =&gt; [640, 960]\n  end\n\n  def efficient_conversion(width, height)\n    manipulate! do |img|\n      img.format(\"png\") do |c|\n        c.fuzz        \"3%\"\n        c.trim\n        c.resize      \"#{width}x#{height}&gt;\"\n        c.resize      \"#{width}x#{height}&lt;\"\n      end\n      img\n    end\n  end\n\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n  def extension_white_list\n     %w(jpg jpeg gif png pdf)\n  end\n\n  def set_model_ext_attributes\n    model.display_filename ||= file.filename\n    model.content_type_cd = CONTENT_TYPES.rassoc(file.content_type).first if file.content_type\n    model.file_size = file.size\n  end\n\n  def content_type\n    CONTENT_TYPES.assoc(model.content_type_cd).last\n  end\n\n  # Override the filename of the uploaded files:\n  # Avoid using model.id or version_name here, see uploader/store.rb for details.\n  # def filename\n  #   \"something.jpg\" if original_filename\n  # end\n\n  protected\n    def image?(new_file)\n      new_file.content_type.start_with? 'image/'\n    end\n\n    def pdf?(new_file)\n      new_file.content_type.end_with? '/pdf'\n    end\n\nend\n</code></pre>\n\n<p>But I keep getting an error saying </p>\n\n<pre><code>MiniMagick::Error: Unable to format to png\nfrom /Users/rkamat/.rvm/gems/ruby-1.9.3-p547/gems/mini_magick-3.7.0/lib/mini_magick/image.rb:266:in `format'\n</code></pre>\n\n<p>at this below line </p>\n\n<pre><code> img.format(\"png\") do |c|\n</code></pre>\n\n<p>Any help around this would be appreciated as I have spends hours trying to debus this.</p>\n\n<p>I have veen referring the documentation in the carrierwave upload to get this working <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/Efficiently-converting-image-formats\" rel=\"nofollow\">https://github.com/carrierwaveuploader/carrierwave/wiki/Efficiently-converting-image-formats</a> </p>\n"}, {"tags": ["ruby", "monkeypatching", "ruby-2.1", "ruby-2.2"], "answers": [{"tags": [], "owner": {"reputation": 400, "user_id": 318490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/99e14c83f966a26259ecf701e15b2422?s=128&d=identicon&r=PG", "display_name": "daLizard", "link": "https://stackoverflow.com/users/318490/dalizard"}, "is_accepted": true, "score": 1, "last_activity_date": 1439409107, "last_edit_date": 1439409107, "creation_date": 1439402211, "answer_id": 31972220, "question_id": 31967871, "link": "https://stackoverflow.com/questions/31967871/ruby-refinement-issues-with-respond-to-and-scoping/31972220#31972220", "title": "Ruby refinement issues with respond_to? and scoping", "body": "<ol>\n<li><p>The <code>respond_to?</code> method does not work and this is documented\n<a href=\"http://ruby-doc.org/core-2.2.2/doc/syntax/refinements_rdoc.html#label-Indirect+Method+Calls\" rel=\"nofollow\">here</a>.</p></li>\n<li><p>The problem is that you can only activate a refinement at top-level\nand they are lexical in scope. </p></li>\n</ol>\n\n<p>One solution would be:</p>\n\n<pre><code>module N\n  refine String do\n    def foo\n      replace 'foobar'\n    end\n  end\n\n  refine Array do\n    def foo\n      self.each do |x|\n        x.foo rescue x\n      end\n    end\n  end\nend\n\nusing N\n\na = ['a', 1, 'b']\np a.foo\n\nputs a.join(\", \") # foo, 1, foo\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 841, "user_id": 6231595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4sEPs.jpg?s=128&g=1", "display_name": "MVP", "link": "https://stackoverflow.com/users/6231595/mvp"}, "is_accepted": false, "score": 0, "last_activity_date": 1524056780, "creation_date": 1524056780, "answer_id": 49900522, "question_id": 31967871, "link": "https://stackoverflow.com/questions/31967871/ruby-refinement-issues-with-respond-to-and-scoping/49900522#49900522", "title": "Ruby refinement issues with respond_to? and scoping", "body": "<p>Taking up your example again, a simple solution could be to override the respond_to? method in refinement block :</p>\n\n<pre><code>module M\n  refine String do\n    def foo\n      replace \"foo\"\n    end\n    def respond_to?(name,all=false)\n      list_methods = self.methods.concat [:foo]\n      list_methods.include? name\n    end\n  end\n\n  refine Array do\n    def foo\n      self.each {|x| x.foo if x.respond_to? :foo }\n    end\n  end\n\nend\n\nusing M\n\na = ['a', 1, 'b']\na.foo\nputs a.join(\", \")    # you get 'foo, 1, foo'\n</code></pre>\n"}], "owner": {"reputation": 10280, "user_id": 874283, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/8bbcdae54d8cd930405e57162e1522d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Xu", "link": "https://stackoverflow.com/users/874283/zack-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 31972220, "answer_count": 2, "score": 2, "last_activity_date": 1524056913, "creation_date": 1439389094, "last_edit_date": 1524056913, "question_id": 31967871, "link": "https://stackoverflow.com/questions/31967871/ruby-refinement-issues-with-respond-to-and-scoping", "title": "Ruby refinement issues with respond_to? and scoping", "body": "<p>I'm trying to add an instance method <code>foo</code> to Ruby's <code>Array</code> class\nso when it's invoked, the array's string elements are changed to string \"foo\".</p>\n\n<p>This can be done easily by monkey patching Ruby's <code>String</code> and <code>Array</code> classes.</p>\n\n<pre><code>class String\n  def foo\n    replace \"foo\"\n  end\nend\n\nclass Array\n  def foo\n    self.each {|x| x.foo if x.respond_to? :foo }\n  end\nend\n\na = ['a', 1, 'b']\na.foo\nputs a.join(\", \")   # you get 'foo, 1, foo' as expected\n</code></pre>\n\n<p>Now I'm trying to rewrite the above using Ruby 2's <a href=\"http://ruby-doc.org/core-2.2.2/doc/syntax/refinements_rdoc.html\" rel=\"nofollow\">refinements feature</a>.\nI'm using Ruby version 2.2.2.</p>\n\n<p>The following works (in a file, eg. ruby test.rb, but not in irb for some reason)</p>\n\n<pre><code>module M\n  refine String do\n    def foo\n      replace \"foo\"\n    end\n  end\nend\n\nusing M\ns = ''\ns.foo\nputs s      # you get 'foo'\n</code></pre>\n\n<p>However, I can't get it to work when adding <code>foo</code> onto the <code>Array</code> class.</p>\n\n<pre><code>module M\n  refine String do\n    def foo\n      replace \"foo\"\n    end\n  end\nend\n\nusing M\n\nmodule N\n  refine Array do\n    def foo\n      self.each {|x| x.foo if x.respond_to? :foo }\n    end\n  end\nend\n\nusing N\n\na = ['a', 1, 'b']\na.foo\nputs a.join(\", \")   # you get 'a, 1, b', not 'foo, 1, foo' as expected\n</code></pre>\n\n<p>There're two issues:</p>\n\n<ol>\n<li>After you refine a class with a new method, <code>respond_to?</code> does not work even when you can invoke\nthe method on an object.  Try adding <code>puts 'yes' if s.respond_to? :foo</code>\nas the last line in the second code snippet, you'll see 'yes' is <strong>not</strong> printed.</li>\n<li>In my Array refinement, the String#foo is out of scope.  If you remove <code>if x.respond_to? :foo</code> from\nthe Array#foo, you'll get the error <code>undefined method 'foo' for \"a\":String (NoMethodError)</code>. So the question is: how do you make the String#foo refinement visible inside the Array#foo refinement?</li>\n</ol>\n\n<p>How do I overcome these two issues so I can get this to work?</p>\n\n<p>(Please don't offer alternative solutions that don't involve refinement, because this is a theoretical exercise so I can learn how to use refinement).</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5443, "user_id": 818094, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f93ac57e4452df30894e5db2f589cf31?s=128&d=identicon&r=PG", "display_name": "Montells", "link": "https://stackoverflow.com/users/818094/montells"}, "edited": false, "score": 0, "creation_date": 1457465244, "post_id": 31967663, "comment_id": 59415938, "body": "did you resolve? how?"}, {"owner": {"reputation": 1812, "user_id": 4627335, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/kZFZA.jpg?s=128&g=1", "display_name": "ashvin", "link": "https://stackoverflow.com/users/4627335/ashvin"}, "reply_to_user": {"reputation": 5443, "user_id": 818094, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f93ac57e4452df30894e5db2f589cf31?s=128&d=identicon&r=PG", "display_name": "Montells", "link": "https://stackoverflow.com/users/818094/montells"}, "edited": false, "score": 0, "creation_date": 1459415960, "post_id": 31967663, "comment_id": 60280523, "body": "@montells Yes I resolve this"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4591006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576e8c71f948cdc8275b50c58f6945d1?s=128&d=identicon&r=PG&f=1", "display_name": "Agustin", "link": "https://stackoverflow.com/users/4591006/agustin"}, "edited": false, "score": 0, "creation_date": 1519499307, "post_id": 36329335, "comment_id": 84938799, "body": "Hey @ashvin, how did you configured this button templates? Could you help me out here?"}, {"owner": {"reputation": 1812, "user_id": 4627335, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/kZFZA.jpg?s=128&g=1", "display_name": "ashvin", "link": "https://stackoverflow.com/users/4627335/ashvin"}, "reply_to_user": {"reputation": 95, "user_id": 4591006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576e8c71f948cdc8275b50c58f6945d1?s=128&d=identicon&r=PG&f=1", "display_name": "Agustin", "link": "https://stackoverflow.com/users/4591006/agustin"}, "edited": false, "score": 0, "creation_date": 1519618291, "post_id": 36329335, "comment_id": 84967726, "body": "Hi @Agustin, which buttons you are talking about?"}, {"owner": {"reputation": 95, "user_id": 4591006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576e8c71f948cdc8275b50c58f6945d1?s=128&d=identicon&r=PG&f=1", "display_name": "Agustin", "link": "https://stackoverflow.com/users/4591006/agustin"}, "edited": false, "score": 0, "creation_date": 1519659092, "post_id": 36329335, "comment_id": 84988552, "body": "The <code>save and edit</code> ones, in fact my question was a bit wrong, I wanted to know where or how did you configure rails_admin to use <code>views&#47;rails_admin&#47;main&#47;_submit_button.html.haml</code>, thanks in advance! @ashvin"}, {"owner": {"reputation": 1812, "user_id": 4627335, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/kZFZA.jpg?s=128&g=1", "display_name": "ashvin", "link": "https://stackoverflow.com/users/4627335/ashvin"}, "reply_to_user": {"reputation": 95, "user_id": 4591006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576e8c71f948cdc8275b50c58f6945d1?s=128&d=identicon&r=PG&f=1", "display_name": "Agustin", "link": "https://stackoverflow.com/users/4591006/agustin"}, "edited": false, "score": 0, "creation_date": 1519704459, "post_id": 36329335, "comment_id": 85006949, "body": "Please read my answer it will solve your problem. Still if you didn&#39;t get let me know."}, {"owner": {"reputation": 95, "user_id": 4591006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576e8c71f948cdc8275b50c58f6945d1?s=128&d=identicon&r=PG&f=1", "display_name": "Agustin", "link": "https://stackoverflow.com/users/4591006/agustin"}, "edited": false, "score": 0, "creation_date": 1519736569, "post_id": 36329335, "comment_id": 85023002, "body": "I did that but I am missing some config, is it possible that you send me the config file example? The exact part on where the buttons are configured on rails_admin.rb. Thanks @ashvin"}, {"owner": {"reputation": 5001, "user_id": 99502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6b6d582cf38e6bba12f6f57b423d50f1?s=128&d=identicon&r=PG", "display_name": "J.R.", "link": "https://stackoverflow.com/users/99502/j-r"}, "edited": false, "score": 1, "creation_date": 1558367838, "post_id": 36329335, "comment_id": 99069591, "body": "Rails Admin is &#39;magic&#39; in that there doesn&#39;t need to be an config. If you have a view/rails_admin/main file with the same name was one that&#39;s default it just uses yours rather than the default."}], "tags": [], "owner": {"reputation": 1812, "user_id": 4627335, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/kZFZA.jpg?s=128&g=1", "display_name": "ashvin", "link": "https://stackoverflow.com/users/4627335/ashvin"}, "is_accepted": true, "score": 6, "last_activity_date": 1555935608, "last_edit_date": 1555935608, "creation_date": 1459416374, "answer_id": 36329335, "question_id": 31967663, "link": "https://stackoverflow.com/questions/31967663/how-do-i-hide-save-and-add-another-button-from-edit-form-in-rails-admin/36329335#36329335", "title": "How do I hide &quot;Save and Add Another&quot; button from edit form in rails_admin?", "body": "<p>@montells Copy <a href=\"https://github.com/sferik/rails_admin/blob/master/app/views/rails_admin/main/_submit_buttons.html.haml\" rel=\"nofollow noreferrer\">https://github.com/sferik/rails_admin/blob/master/app/views/rails_admin/main/_submit_buttons.html.haml</a> this page in your repo at \"views/rails_admin/main/_submit_buttons.html.haml\"</p>\n\n<p>Now in this file, you can put the condition in which page you want to remove button\ne.g. </p>\n\n<pre><code>- if params[:model_name]\n - if params[:model_name] != \"model_name_in_which_you_want_hide_button\"\n   \"Paste above url view\"\n</code></pre>\n"}], "owner": {"reputation": 1812, "user_id": 4627335, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/kZFZA.jpg?s=128&g=1", "display_name": "ashvin", "link": "https://stackoverflow.com/users/4627335/ashvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 1, "accepted_answer_id": 36329335, "answer_count": 1, "score": 7, "last_activity_date": 1555935608, "creation_date": 1439388597, "last_edit_date": 1439392223, "question_id": 31967663, "link": "https://stackoverflow.com/questions/31967663/how-do-i-hide-save-and-add-another-button-from-edit-form-in-rails-admin", "title": "How do I hide &quot;Save and Add Another&quot; button from edit form in rails_admin?", "body": "<p>I applied a rails_admin gem in my Rails app. I want to remove some unnecessary buttons in a specific model edit form, and add my own custom button instead. Please see the screenshot for what I'd like to remove.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pUmKs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pUmKs.png\" alt=\"Snapshot of layout\"></a></p>\n"}, {"tags": ["ruby", "git", "gitlab"], "comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1439388476, "post_id": 31967453, "comment_id": 51842256, "body": "what is &quot;doesn&#39;t work&quot;?"}, {"owner": {"reputation": 554, "user_id": 5112643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3c24541517cb7582ca9f488c697a5fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Euphor08", "link": "https://stackoverflow.com/users/5112643/euphor08"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1439388634, "post_id": 31967453, "comment_id": 51842407, "body": "it doesn&#39;t create the repository in the given namespace"}, {"owner": {"reputation": 3643, "user_id": 908269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ebccc64b7e4cc08d5b552a2e1ad7b?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/908269/wolf"}, "edited": false, "score": 0, "creation_date": 1439388753, "post_id": 31967453, "comment_id": 51842507, "body": "does it create the repository in the wrong namespace?  or not create it at all?  or something else?"}, {"owner": {"reputation": 554, "user_id": 5112643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3c24541517cb7582ca9f488c697a5fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Euphor08", "link": "https://stackoverflow.com/users/5112643/euphor08"}, "edited": false, "score": 0, "creation_date": 1439388864, "post_id": 31967453, "comment_id": 51842609, "body": "it creates only the repository on current user, I need to create it on the given namespace."}, {"owner": {"reputation": 554, "user_id": 5112643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3c24541517cb7582ca9f488c697a5fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Euphor08", "link": "https://stackoverflow.com/users/5112643/euphor08"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1439392231, "post_id": 31967453, "comment_id": 51845265, "body": "@EugZol can you help me ?"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1439392671, "post_id": 31967453, "comment_id": 51845564, "body": "@Euphor08 Looks like your <code>namespace_id</code> is wrong. Do you have any projects in that namespace already? If yes, do a <code>GET &#47;projects</code> request and post a <code>&quot;namespace&quot;:{ ... }</code> part for the project in <code>group-form-1</code> namespace."}, {"owner": {"reputation": 554, "user_id": 5112643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3c24541517cb7582ca9f488c697a5fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Euphor08", "link": "https://stackoverflow.com/users/5112643/euphor08"}, "edited": false, "score": 0, "creation_date": 1439394840, "post_id": 31967453, "comment_id": 51847145, "body": "<a href=\"https://github.com/ivanove/my_works/blob/master/Create-Repo.rb\" rel=\"nofollow noreferrer\">github.com/ivanove/my_works/blob/master/Create-Repo.rb</a> I push the new version, but it doesn&#39;t work,"}], "owner": {"reputation": 554, "user_id": 5112643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3c24541517cb7582ca9f488c697a5fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Euphor08", "link": "https://stackoverflow.com/users/5112643/euphor08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445024105, "creation_date": 1439388092, "last_edit_date": 1439389269, "question_id": 31967453, "link": "https://stackoverflow.com/questions/31967453/setting-namespace-of-a-gitlab-repository", "title": "Setting namespace of a GitLab repository", "body": "<p>This is my Ruby script for GitLab API, I'm doing commits and pushes with it: <a href=\"https://github.com/ivanove/my_works/blob/master/Create-Repo.rb\" rel=\"nofollow\">https://github.com/ivanove/my_works/blob/master/Create-Repo.rb</a></p>\n\n<p>I'm using CURL inside of it to make requests.</p>\n\n<p>So the question is, how can I set namespace of repository when it's created?</p>\n\n<p>This is the command I use:</p>\n\n<pre><code>cmd = %Q&lt;curl -H \"Content-Type:application/json\" http://#{@host}/api/v3/projects?private_token=#{@token} -d '{\"name\":\"#{name}\",\"visibility_level\":20,\"namespace_id\":\"group-from-1\"}'&gt;\n</code></pre>\n\n<p>I added namespace_id from GitLab <a href=\"http://doc.gitlab.com/ee/api/projects.html#create-project\" rel=\"nofollow\">Documentation</a>, but it doesn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1439387943, "post_id": 31967346, "comment_id": 51841838, "body": "I don&#39;t really get what you&#39;re asking.  It sounds like you want to edit the model with id of 100?  Why do you want to do this after creating a new model?  Can you not just redirect to the edit action for the model with the id of 100?"}, {"owner": {"reputation": 505, "user_id": 4963392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/77c724346d44b96bde66555ad97b7315?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Wissmach", "link": "https://stackoverflow.com/users/4963392/chris-wissmach"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1439388134, "post_id": 31967346, "comment_id": 51841987, "body": "I have a field called &quot;other_versions&quot; in my model, which is an array of model IDs. When I create a new model, I want to add the new models id to the array of model IDs in the old model, of which the ID is in the URL. Hope that helps a bit."}], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 4963392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/77c724346d44b96bde66555ad97b7315?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Wissmach", "link": "https://stackoverflow.com/users/4963392/chris-wissmach"}, "edited": false, "score": 0, "creation_date": 1439391445, "post_id": 31967679, "comment_id": 51844723, "body": "I did something similar to this, I added a &quot;parent_model&quot; field to my model, and put it on my form as a hidden input. Then, I changed the value of that input to the ID in my URL using jQuery. Finally, I created a method in my model.rb file that altered the parent model, which I then called after the model saved in the &quot;create&quot; method in the controller (since after_create was giving me some other issues). Thank you so much for your help!"}], "tags": [], "owner": {"reputation": 2413, "user_id": 1647552, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7b79d3a15df218e01716e27383d3f26f?s=128&d=identicon&r=PG", "display_name": "josetapadas", "link": "https://stackoverflow.com/users/1647552/josetapadas"}, "is_accepted": true, "score": 3, "last_activity_date": 1439388624, "creation_date": 1439388624, "answer_id": 31967679, "question_id": 31967346, "link": "https://stackoverflow.com/questions/31967346/getting-params-from-url-in-models-create-method/31967679#31967679", "title": "Getting params from URL in model&#39;s create method", "body": "<p>Why don't you use the <code>after_create</code>filter (<a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_callbacks.html</a>) and just add the \"other_model\" id on an hidden field on your create/edit form?</p>\n\n<p>Please make sure, if you are using Rails >4, to add that parameter on your strong parameters (<a href=\"http://edgeapi.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow\">http://edgeapi.rubyonrails.org/classes/ActionController/StrongParameters.html</a>) otherwise it will always be empty when you check on <code>params</code>.</p>\n"}], "owner": {"reputation": 505, "user_id": 4963392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/77c724346d44b96bde66555ad97b7315?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Wissmach", "link": "https://stackoverflow.com/users/4963392/chris-wissmach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 31967679, "answer_count": 1, "score": 2, "last_activity_date": 1439390422, "creation_date": 1439387838, "last_edit_date": 1439390422, "question_id": 31967346, "link": "https://stackoverflow.com/questions/31967346/getting-params-from-url-in-models-create-method", "title": "Getting params from URL in model&#39;s create method", "body": "<p>Is there a way to get the params from URL in the create method? </p>\n\n<p>My URL for the \"new\" view is: </p>\n\n<pre><code>/model_name/new?other_model_id=100\n</code></pre>\n\n<p>I would like to be able to alter the model with ID 100 when I create a new model. I've tried calling params[:other_model_id] in my \"create\" method, which returned nil and I tried setting the following variable in my \"new\" method:</p>\n\n<pre><code>@other_model = Model.find(params[:other_model_id])\n</code></pre>\n\n<p>I have a field called \"other_versions\" in my model, which is an array of model IDs. When I create a new model I want to add the new model's ID to the array of model IDs in the old model.</p>\n"}, {"tags": ["ruby", "sinatra", "sprockets"], "answers": [{"tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": true, "score": 0, "last_activity_date": 1439558329, "creation_date": 1439558329, "answer_id": 32011090, "question_id": 31967214, "link": "https://stackoverflow.com/questions/31967214/sprockets-inside-of-sinatra-outputs-nil/32011090#32011090", "title": "sprockets inside of sinatra outputs nil", "body": "<p>Ok, so after upgrading sprockets to \"3.3\" and opal-react to \"react-v0.13\" branch and fiddling with things I was able to  get it working.</p>\n\n<p>I'm thinking it was a load path issue, not sure why, but it just wasn't finding any files which is strange because it wasn't raising an error either, just returning nil.</p>\n\n<p>Any way, the solution lies in <a href=\"https://github.com/Thermatix/sprockets_problem\" rel=\"nofollow\">this github repo</a>.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 32011090, "answer_count": 1, "score": 0, "last_activity_date": 1439558329, "creation_date": 1439387477, "last_edit_date": 1439467668, "question_id": 31967214, "link": "https://stackoverflow.com/questions/31967214/sprockets-inside-of-sinatra-outputs-nil", "title": "sprockets inside of sinatra outputs nil", "body": "<p>I'm running sprockets inside of sinatra with the intention to integrate Opal with it as well (because I don't want two sprockets instances running at the same time).</p>\n\n<p>I know my route is capturing the details correctly because with a bit of debugging I can see <code>[\"application\", \".js\"]</code> and <code>[\"application\", \".css\"]</code> being outputted into the log file, but the output of me doing <code>settings.assets[\"#{file_name}.#{extention}\"]</code> is nil.</p>\n\n<p>This is the code I'm running to to set up sprockets can be found at this <a href=\"https://gist.github.com/Thermatix/6c7d579a4962cc905d72\" rel=\"nofollow\">gist</a>.</p>\n\n<p>By doing:</p>\n\n<pre><code>        settings.assets.instance_exec(file_name,extention) do |file_name,extention|\n            puts 'assets'\n            puts @assets\n            @assets[cache_key_for(\"#{file_name}#{extention}\", {bundle: true})]\n        end    \n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>assets\n{}\n</code></pre>\n\n<p>I'm guessing that for some reason the asset cache is blank, why that is though I don't know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1439387797, "post_id": 31967030, "comment_id": 51841729, "body": "try <code>brew install libxml2 libxslt libiconv</code> first."}, {"owner": {"reputation": 1826, "user_id": 3765772, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3b49d13ba84f10dbe67af56729f9951?s=128&d=identicon&r=PG&f=1", "display_name": "R.J. Robinson", "link": "https://stackoverflow.com/users/3765772/r-j-robinson"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1439394415, "post_id": 31967030, "comment_id": 51846846, "body": "tried that, still getting the same issue. I also reinstalled xcode."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1439394520, "post_id": 31967030, "comment_id": 51846922, "body": "you get the exact same error?"}], "answers": [{"comments": [{"owner": {"reputation": 1826, "user_id": 3765772, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3b49d13ba84f10dbe67af56729f9951?s=128&d=identicon&r=PG&f=1", "display_name": "R.J. Robinson", "link": "https://stackoverflow.com/users/3765772/r-j-robinson"}, "edited": false, "score": 0, "creation_date": 1439388133, "post_id": 31967376, "comment_id": 51841985, "body": "same error. I dont know what to do. should I uninstall xcode?"}], "tags": [], "owner": {"reputation": 4418, "user_id": 2232695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d573242b24e543f39959ade61824de8?s=128&d=identicon&r=PG", "display_name": "ChrisBarthol", "link": "https://stackoverflow.com/users/2232695/chrisbarthol"}, "is_accepted": false, "score": 1, "last_activity_date": 1439503707, "last_edit_date": 1495539884, "creation_date": 1439387900, "answer_id": 31967376, "question_id": 31967030, "link": "https://stackoverflow.com/questions/31967030/cant-install-rails/31967376#31967376", "title": "Cant install rails", "body": "<p>Manually install nokogiri</p>\n\n<pre><code>gem install nokogiri -v VERSION_YOU_WANT -- --use-system-libraries\n</code></pre>\n\n<p>Check out \"<a href=\"https://stackoverflow.com/questions/24251494/nokogiri-gem-installation-error\">nokogiri gem installation error</a>\".</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1439503686, "post_id": 31967812, "comment_id": 51901878, "body": "Please review your answer, and make sure the capitalization of the commands you suggest are accurate. Character case is significant. Also, please read the help for formatting questions and answers and conform to the standard look for Stack Overflow. That helps others read what you&#39;ve written."}], "tags": [], "owner": {"reputation": 938, "user_id": 4522937, "user_type": "registered", "profile_image": "https://graph.facebook.com/730829297031111/picture?type=large", "display_name": "Kaysser Kayyali", "link": "https://stackoverflow.com/users/4522937/kaysser-kayyali"}, "is_accepted": false, "score": 0, "last_activity_date": 1439684884, "last_edit_date": 1439684884, "creation_date": 1439388927, "answer_id": 31967812, "question_id": 31967030, "link": "https://stackoverflow.com/questions/31967030/cant-install-rails/31967812#31967812", "title": "Cant install rails", "body": "<p>I would recommend running</p>\n\n<pre><code>brew doctor\n\nrvm reinstall\n\nrvm reinstall (ruby version here)\n\ngem pristine all\n\nsudo gem install rails\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 4649530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2da5fe7e50cd453d448bbc28422677?s=128&d=identicon&r=PG", "display_name": "Gearnode", "link": "https://stackoverflow.com/users/4649530/gearnode"}, "is_accepted": false, "score": 0, "last_activity_date": 1439503808, "last_edit_date": 1439503808, "creation_date": 1439390062, "answer_id": 31968255, "question_id": 31967030, "link": "https://stackoverflow.com/questions/31967030/cant-install-rails/31968255#31968255", "title": "Cant install rails", "body": "<p>Before you run <code>bundle install</code>, run:</p>\n\n<pre><code>bundle config build.nokogiri --use-system-libraries\n</code></pre>\n\n<p>or </p>\n\n<pre><code>gem install nokogiri -- --use-system-libraries\n</code></pre>\n\n<p>After that you can run:</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>For other bugs read the <a href=\"http://www.nokogiri.org/tutorials/installing_nokogiri.html#mac_os_x\" rel=\"nofollow\">Nokogiri install documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1826, "user_id": 3765772, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3b49d13ba84f10dbe67af56729f9951?s=128&d=identicon&r=PG&f=1", "display_name": "R.J. Robinson", "link": "https://stackoverflow.com/users/3765772/r-j-robinson"}, "is_accepted": true, "score": 0, "last_activity_date": 1439503919, "last_edit_date": 1495541033, "creation_date": 1439396546, "answer_id": 31970623, "question_id": 31967030, "link": "https://stackoverflow.com/questions/31967030/cant-install-rails/31970623#31970623", "title": "Cant install rails", "body": "<p>I went through the various tutorials and my output looked like this: </p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /Users/rrobin008c/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20150812-2574-6ejap3.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling breakpoint.c\nmake: /usr/bin/gcc-4.2: No such file or directory\nmake: *** [breakpoint.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/rrobin008c/.rvm/gems/ruby-2.2.1/gems/byebug-5.0.0 for inspection.\nResults logged to /Users/rrobin008c/.rvm/gems/ruby-2.2.1/extensions/x86_64-darwin-14/2.2.0-static/byebug-5.0.0/gem_make.out\nAn error occurred while installing byebug (5.0.0), and Bundler cannot continue.\nMake sure that `gem install byebug -v '5.0.0'` succeeds before bundling.\n</code></pre>\n\n<p>The significant part is</p>\n\n<pre><code>make: /usr/bin/gcc-4.2: No such file or directory\n</code></pre>\n\n<p>After this I asked:</p>\n\n<pre><code>$which gcc\n/usr/bin/gcc\n</code></pre>\n\n<p>Follow \"<a href=\"https://stackoverflow.com/questions/12256616/os-x-mountain-lion-gcc-4-2-no-such-file-or-directory\">OS X Mountain Lion: gcc-4.2 No such file or directory</a>\" and everything should work after that. </p>\n"}, {"tags": [], "owner": {"reputation": 521, "user_id": 1466831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1hNRG.jpg?s=128&g=1", "display_name": "Tarun Rathi", "link": "https://stackoverflow.com/users/1466831/tarun-rathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1441955397, "creation_date": 1441955397, "answer_id": 32517594, "question_id": 31967030, "link": "https://stackoverflow.com/questions/31967030/cant-install-rails/32517594#32517594", "title": "Cant install rails", "body": "<p>If you get to many error best thing to do is remove rails and ruby completely</p>\n\n<p>first type this</p>\n\n<pre><code>tarun@tarun:~$ which ruby\n\n/home/tarun/.rbenv/shims/ruby\n\ntarun@tarun:~$ which rails\n\n/home/tarun/.rbenv/shims/rails\n</code></pre>\n\n<p>then copy the path and use this command to remove the file </p>\n\n<pre><code>rm -rf /home/tarun/.rbenv/shims/ruby\n\nrm -rf /home/tarun/.rbenv/shims/rails\n</code></pre>\n\n<p>and same way you can check which rbenv and which rvm and remove by using this same method.</p>\n\n<p>And use</p>\n\n<pre><code>grep -rl rails\ngrep -rl ruby\n</code></pre>\n\n<p>this will show path of all files which have rails keyword.So that you can know that have you removed rails and ruby completely.</p>\n\n<p>And follow steps given here to reinstall it \n<a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rbenv-on-ubuntu-14-04\" rel=\"nofollow\">https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rbenv-on-ubuntu-14-04</a></p>\n"}], "owner": {"reputation": 1826, "user_id": 3765772, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3b49d13ba84f10dbe67af56729f9951?s=128&d=identicon&r=PG&f=1", "display_name": "R.J. Robinson", "link": "https://stackoverflow.com/users/3765772/r-j-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "accepted_answer_id": 31970623, "answer_count": 5, "score": 0, "last_activity_date": 1441955397, "creation_date": 1439387036, "question_id": 31967030, "link": "https://stackoverflow.com/questions/31967030/cant-install-rails", "title": "Cant install rails", "body": "<p>I have a new set up, and I keep getting an error when I am trying to install rails. I have used RVM to use ruby 2.2.2, and I have checked through the config files. </p>\n\n<p>I have followed various tutorials. I have uninstalled gcc ( though i may reinstall xcode ) </p>\n\n<p>and I have gone through various tutorials on how to install this\n    gem install rails                                                                                                                                        [9:00:49]\n    Building native extensions.  This could take a while...\n    ERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.</p>\n\n<pre><code>    /Users/rrobin008c/.rvm/rubies/ruby-2.2.2/bin/ruby -r ./siteconf20150812-28205-1wdgrip.rb extconf.rb\nchecking if the C compiler accepts -O2 -arch x86_64... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\nchecking for gzdopen() in -lz... yes\nchecking for iconv... yes\n************************************************************************\nIMPORTANT NOTICE:\n\nBuilding Nokogiri with a packaged version of libxml2-2.9.2\nwith the following patches applied:\n    - 0001-Revert-Missing-initialization-for-the-catalog-module.patch\n    - 0002-Fix-missing-entities-after-CVE-2014-3660-fix.patch\n\nTeam Nokogiri will keep on doing their best to provide security\nupdates in a timely manner, but if this is a concern for you and want\nto use the system library instead; abort this installation process and\nreinstall nokogiri as follows:\n\n    gem install nokogiri -- --use-system-libraries\n        [--with-xml2-config=/path/to/xml2-config]\n        [--with-xslt-config=/path/to/xslt-config]\n\nIf you are using Bundler, tell it to use the option:\n\n    bundle config build.nokogiri --use-system-libraries\n    bundle install\n\nNote, however, that nokogiri is not fully compatible with arbitrary\nversions of libxml2 provided by OS/package vendors.\n************************************************************************\nExtracting libxml2-2.9.2.tar.gz into tmp/x86_64-apple-darwin14.4.0/ports/libxml2/2.9.2... OK\nRunning patch with /Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/nokogiri-1.6.6.2/ports/patches/libxml2/0001-Revert-Missing-initialization-for-the-catalog-module.patch...\nRunning 'patch' for libxml2 2.9.2... OK\nRunning patch with /Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/nokogiri-1.6.6.2/ports/patches/libxml2/0002-Fix-missing-entities-after-CVE-2014-3660-fix.patch...\nRunning 'patch' for libxml2 2.9.2... OK\nRunning 'configure' for libxml2 2.9.2... ERROR, review '/Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/nokogiri-1.6.6.2/ext/nokogiri/tmp/x86_64-apple-darwin14.4.0/ports/libxml2/2.9.2/configure.log' to see what happened.\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/rrobin008c/.rvm/rubies/ruby-2.2.2/bin/$(RUBY_BASE_NAME)\n    --help\n    --clean\n    --use-system-libraries\n    --enable-static\n    --disable-static\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\n    --enable-cross-build\n    --disable-cross-build\n/Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/mini_portile-0.6.2/lib/mini_portile.rb:279:in `block in execute': Failed to complete configure task (RuntimeError)\n    from /Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/mini_portile-0.6.2/lib/mini_portile.rb:271:in `chdir'\n    from /Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/mini_portile-0.6.2/lib/mini_portile.rb:271:in `execute'\n    from /Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/mini_portile-0.6.2/lib/mini_portile.rb:66:in `configure'\n    from /Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/mini_portile-0.6.2/lib/mini_portile.rb:109:in `cook'\n    from extconf.rb:278:in `block in process_recipe'\n    from extconf.rb:177:in `tap'\n    from extconf.rb:177:in `process_recipe'\n    from extconf.rb:475:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/rrobin008c/.rvm/gems/ruby-2.2.2/gems/nokogiri-1.6.6.2 for inspection.\nResults logged to /Users/rrobin008c/.rvm/gems/ruby-2.2.2/extensions/x86_64-darwin-14/2.2.0-static/nokogiri-1.6.6.2/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone"], "comments": [{"owner": {"reputation": 25268, "user_id": 215168, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212c9d7980fe9aa71739313d483b3782?s=128&d=identicon&r=PG", "display_name": "Abe Voelker", "link": "https://stackoverflow.com/users/215168/abe-voelker"}, "edited": false, "score": 5, "creation_date": 1439386105, "post_id": 31966323, "comment_id": 51840402, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5073917/why-doesnt-config-time-zone-seem-to-do-anything\">Why doesn&#39;t `config.time_zone` seem to do anything?</a>"}, {"owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "edited": false, "score": 2, "creation_date": 1439386207, "post_id": 31966323, "comment_id": 51840479, "body": "After changing application.rb, you needs to restart developer console. Please try this."}, {"owner": {"reputation": 2981, "user_id": 1238143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b51fc4e07afc1a305cd701f4bb71f7d?s=128&d=identicon&r=PG", "display_name": "Lesha Pipiev", "link": "https://stackoverflow.com/users/1238143/lesha-pipiev"}, "reply_to_user": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "edited": false, "score": 0, "creation_date": 1439388855, "post_id": 31966323, "comment_id": 51842599, "body": "@jonsnow, I have done. This is not the case."}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1439400415, "post_id": 31966323, "comment_id": 51850392, "body": "@LeshaPipiev - Does the answer in the duplicate resolve your question?"}, {"owner": {"reputation": 2981, "user_id": 1238143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b51fc4e07afc1a305cd701f4bb71f7d?s=128&d=identicon&r=PG", "display_name": "Lesha Pipiev", "link": "https://stackoverflow.com/users/1238143/lesha-pipiev"}, "edited": false, "score": 0, "creation_date": 1439464999, "post_id": 31966323, "comment_id": 51878186, "body": "Guys, no, there is no answer on my question from the possible duplicate. In application.rb <code>&#39;Central Time (US &amp; Canada)&#39;</code> is set. But why does <code>Time.zone.now</code> gives date in PDT? should be in Central Time."}], "owner": {"reputation": 2981, "user_id": 1238143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b51fc4e07afc1a305cd701f4bb71f7d?s=128&d=identicon&r=PG", "display_name": "Lesha Pipiev", "link": "https://stackoverflow.com/users/1238143/lesha-pipiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1439386277, "creation_date": 1439385219, "last_edit_date": 1439386277, "question_id": 31966323, "link": "https://stackoverflow.com/questions/31966323/unexpected-time-zone-now-outcome", "title": "Unexpected Time.zone.now outcome", "body": "<p>So, having development and production servers.  </p>\n\n<p><strong>development.rb</strong>  </p>\n\n<pre><code>  config.cache_classes = false\n  config.whiny_nils = true\n\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n\n  config.action_mailer.raise_delivery_errors = false\n  config.active_support.deprecation = :log\n  config.action_dispatch.best_standards_support = :builtin\n</code></pre>\n\n<p><strong>production.rb</strong>  </p>\n\n<pre><code>  config.cache_classes = true\n\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  config.action_dispatch.x_sendfile_header = \"X-Sendfile\"\n\n  config.cache_store = :redis_store, 'redis://localhost:6379/0/cache', { expires_in: 90.minutes, namespace: 'production' }\n  config.serve_static_assets = false\n\n  config.i18n.fallbacks = true\n\n  config.active_support.deprecation = :notify\n</code></pre>\n\n<p><strong>application.rb</strong>  </p>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\nrequire 'rails/all'\n\nBundler.require(:default, Rails.env) if defined?(Bundler)\nDotenv::Railtie.load\n\nrequire \"sprockets/railtie\"\n\nmodule S2yd\n  class Application &lt; Rails::Application\n    config.autoload_paths += %W( #{config.root}/lib #{config.root}/app/forms #{config.root}/app/decorators )\n    config.time_zone = 'Central Time (US &amp; Canada)'\n    config.encoding = \"utf-8\"\n    config.filter_parameters += [:password, :active_merchant_billing_credit_card, :payment_cc_number, :payment_cc_verification_value, 'credit_card[number]', 'credit_card[verification_value]']\n    config.assets.enabled = true\n    config.assets.paths &lt;&lt; File.join(Rails.root, 'vendor', 'assets', 'javascripts')\n    config.assets.paths &lt;&lt; File.join(Rails.root, 'vendor', 'assets', 'stylesheets')\n    config.assets.precompile += %w( .svg .eot .woff .ttf )\n    config.assets.precompile += %w(\n      font/*.*\n      img/*.*\n    )\n    config.assets.initialize_on_precompile = true\n    # Version of your assets, change this if you want to expire all your assets\n    config.assets.version = '1.2'\n  end\nend\n</code></pre>\n\n<p>on dev machine:  </p>\n\n<pre><code>dev@dev:~/www/mxad-mr.-delivery$ date\nWed Aug 12 09:02:41 EDT 2015\n</code></pre>\n\n<p>on prod machine:  </p>\n\n<pre><code>deploy@production-web:~$ date\nWed Aug 12 12:50:13 UTC 2015\n</code></pre>\n\n<p>on development rails console on development machine:  </p>\n\n<pre><code>1.9.3-p484 :010 &gt; Time.zone.now\n =&gt; Wed, 12 Aug 2015 06:07:41 PDT -07:00 \n1.9.3-p484 :015 &gt; Time.now\n =&gt; 2015-08-12 09:29:46 -0400\n1.9.3-p484 :016 &gt; Time.now.zone\n =&gt; \"EDT\n</code></pre>\n\n<p>on production rails console on production machine: </p>\n\n<pre><code>irb(main):018:0&gt;  Time.zone.now\n=&gt; Wed, 12 Aug 2015 08:08:06 CDT -05:00\nirb(main):032:0&gt; Time.now\n=&gt; 2015-08-12 13:29:44 +0000\nirb(main):033:0&gt; Time.now.zone\n=&gt; \"UTC\"\n</code></pre>\n\n<p>I expected that <strong>Time.zone.now</strong> gave us current time in time_zone set in application.rb. But it did't. So, it should be on prod &amp; dev machines rails console the same time zone <strong>Central Time (US &amp; Canada)</strong> (see application.rb).<br>\nWhy not?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "omniauth"], "answers": [{"comments": [{"owner": {"reputation": 752, "user_id": 1987022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DAz2z.jpg?s=128&g=1", "display_name": "Darren Hall", "link": "https://stackoverflow.com/users/1987022/darren-hall"}, "edited": false, "score": 0, "creation_date": 1471952113, "post_id": 31966947, "comment_id": 65546615, "body": "Be aware - the Instagram ruby gem is currently not being maintained (as mentioned in the readme)"}], "tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": true, "score": 4, "last_activity_date": 1439386819, "creation_date": 1439386819, "answer_id": 31966947, "question_id": 31966176, "link": "https://stackoverflow.com/questions/31966176/validate-acess-token-of-facebook-twitter-instagram/31966947#31966947", "title": "Validate acess token of Facebook + Twitter + Instagram", "body": "<p>For Facebook I would recommend Koala: <a href=\"https://github.com/arsduo/koala\" rel=\"nofollow\">https://github.com/arsduo/koala</a></p>\n\n<p>For Twitter: <a href=\"https://github.com/sferik/twitter\" rel=\"nofollow\">https://github.com/sferik/twitter</a></p>\n\n<p>For Instagram this is the official Library: <a href=\"https://github.com/Instagram/instagram-ruby-gem\" rel=\"nofollow\">https://github.com/Instagram/instagram-ruby-gem</a></p>\n"}, {"tags": [], "owner": {"reputation": 5008, "user_id": 2840147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vcVX6.jpg?s=128&g=1", "display_name": "Sachin Prasad", "link": "https://stackoverflow.com/users/2840147/sachin-prasad"}, "is_accepted": false, "score": 4, "last_activity_date": 1440144277, "creation_date": 1440144277, "answer_id": 32135308, "question_id": 31966176, "link": "https://stackoverflow.com/questions/31966176/validate-acess-token-of-facebook-twitter-instagram/32135308#32135308", "title": "Validate acess token of Facebook + Twitter + Instagram", "body": "<p>I had to write custom method,(In case any one needs it):</p>\n\n<pre><code>  # Validates fb token\n  def self.validate_facebook_token token\n    status = false\n    begin\n      @graph = Koala::Facebook::API.new(token)\n      status = true if @graph.get_object(\"me\")\n    ensure\n      return status\n    end\n  end\n\n  # Validates fb twitter\n  def self.validate_twitter_token token, secret\n    status = false\n    client = TwitterOAuth::Client.new(\n      consumer_key: APP_CONFIG[\"TWITTER_CUSTOMER_KEY\"],\n      consumer_secret: APP_CONFIG[\"TWITTER_CUSTOMER_SECRET\"],\n      token: token,\n      secret: secret\n    )\n    status = true if client.authorized?\n    return status\n  end\n\n  # validates instagram token\n  def self.validate_instagram_token token, provider_id\n    status = false\n    instagram_reponse = HTTParty.get(\"#{APP_CONFIG['INSTAGRAM_URL']}/users/#{provider_id}\", query: {\n      access_token: token\n    }).parsed_response\n    status = true if instagram_reponse['meta'].present? &amp;&amp; instagram_reponse['meta']['code'] == 200\n    return status\n  end\n</code></pre>\n\n<p>Gems used:</p>\n\n<pre><code>gem 'koala'\ngem 'twitter_oauth'\ngem 'httparty'\n</code></pre>\n\n<p>Do let me know if you have a better one. </p>\n"}], "owner": {"reputation": 5008, "user_id": 2840147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vcVX6.jpg?s=128&g=1", "display_name": "Sachin Prasad", "link": "https://stackoverflow.com/users/2840147/sachin-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1242, "favorite_count": 3, "accepted_answer_id": 31966947, "answer_count": 2, "score": 3, "last_activity_date": 1440144277, "creation_date": 1439384808, "last_edit_date": 1439392922, "question_id": 31966176, "link": "https://stackoverflow.com/questions/31966176/validate-acess-token-of-facebook-twitter-instagram", "title": "Validate acess token of Facebook + Twitter + Instagram", "body": "<p>In my app a user can login or register with Facebook, Twitter or Instagram. Fetching and validating access token are done in application (Android and iOS). Now when they send a request for registration, I need to validate the access tokens. Do I have to validate each access token manually like:</p>\n\n<pre><code>facebook_data = HTTParty.get(\"https://graph.facebook.com/me\", query: {\n  access_token: params[:access_token]\n}).parsed_response\n\n# You need to implement the method below in your model (e.g. app/models/user.rb)\n@user = User.find_for_facebook_oauth(facebook_data)\n</code></pre>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 4, "creation_date": 1439384458, "post_id": 31965891, "comment_id": 51839056, "body": "We do not crash machines."}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 7, "last_activity_date": 1439386587, "last_edit_date": 1439386587, "creation_date": 1439384617, "answer_id": 31966105, "question_id": 31965891, "link": "https://stackoverflow.com/questions/31965891/how-do-you-crash-a-machine-with-infinite-loop-in-ruby/31966105#31966105", "title": "how do you crash a machine with infinite loop in ruby?", "body": "<p>An infinite loop alone can't crash a \"machine\", unless it gets 100% CPU time (which no sane OS will allow).</p>\n\n<p>You can create an infinite loop which will eat up memory without letting it be garbage collected, but this will just crash the current process.</p>\n\n<p>You could instead create processes, which create other processes recursively (<a href=\"https://github.com/mcandre/forkbombs\">a fork bomb</a>). This will manage to slow down and eventually crash a \"machine\", but any sane server will have a limitation on how many processes a user can spawn.</p>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 2, "last_activity_date": 1439402290, "creation_date": 1439402290, "answer_id": 31972243, "question_id": 31965891, "link": "https://stackoverflow.com/questions/31965891/how-do-you-crash-a-machine-with-infinite-loop-in-ruby/31972243#31972243", "title": "how do you crash a machine with infinite loop in ruby?", "body": "<p>In Linux (or equivalant), you can keep opening files and never close them - at some point - you will start seeing \"Too many open files\" error - this can also hinder opening of new network connections.  This can happen if one has not reviewed open file limits on the system and working with default settings.</p>\n\n<p>You can also keep creating files with lot of data in the OS partition, and fill up the disk space which can eventually lead to unresponsive system.  This can happen if you application creates too many log entries and you forget to rotate the files.</p>\n"}], "owner": {"reputation": 348, "user_id": 4049643, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003815086325/picture?type=large", "display_name": "Ananthu R V", "link": "https://stackoverflow.com/users/4049643/ananthu-r-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1439419457, "answer_count": 2, "score": -7, "last_activity_date": 1439402290, "creation_date": 1439384145, "question_id": 31965891, "link": "https://stackoverflow.com/questions/31965891/how-do-you-crash-a-machine-with-infinite-loop-in-ruby", "closed_reason": "Needs details or clarity", "title": "how do you crash a machine with infinite loop in ruby?", "body": "<p>how do you crash a machine with infinite loop in ruby?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439390019, "post_id": 31965803, "comment_id": 51843554, "body": "What is the logic for determining the number of underscores in <code>_a__a_a</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "is_accepted": false, "score": 1, "last_activity_date": 1439384738, "creation_date": 1439384738, "answer_id": 31966151, "question_id": 31965803, "link": "https://stackoverflow.com/questions/31965803/how-to-show-users-correct-guesses-in-hangman-ruby/31966151#31966151", "title": "How to show user&#39;s correct guesses in Hangman (Ruby)", "body": "<p>It might be something like this:</p>\n\n<pre><code>def show_progress(word,guessed_letters)\n  display_string = ''\n  word.chars.each do |char|\n    if guessed_letters.include?(char)\n      display_string &lt;&lt; char\n    else \n      display_string &lt;&lt; '_'\n    end\n  end\n  display_string\nend\n</code></pre>\n\n<p>Then you just call this with the answer and the letters guessed so far</p>\n\n<pre><code>show_progress('duck', ['u','k','f'])\n# =&gt; \"_u_k\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8503, "user_id": 1946861, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/2ObQs.jpg?s=128&g=1", "display_name": "jlhonora", "link": "https://stackoverflow.com/users/1946861/jlhonora"}, "is_accepted": true, "score": 1, "last_activity_date": 1439385140, "creation_date": 1439385140, "answer_id": 31966304, "question_id": 31965803, "link": "https://stackoverflow.com/questions/31965803/how-to-show-users-correct-guesses-in-hangman-ruby/31966304#31966304", "title": "How to show user&#39;s correct guesses in Hangman (Ruby)", "body": "<p>I made some modifications to the main loop so that you can check if the player won:</p>\n\n<pre><code>def check_and_print(letters, guessed)\n  won = true\n\n  # Print letters accordingly\n  letters.each do |l|\n    if guessed.include? l\n      print l\n    else\n      print '_ '\n      won = false\n    end\n  end\n\n  # Insert a line break\n  puts \"\"\n\n  return won\nend\n\nwhile tries &lt; 10 || letters.length == 0\n    letter = gets.chomp\n    if letters.include? letter\n        puts \"You guessed one letter!\"\n        guessed &lt;&lt; letter\n        won = check_and_print(letters, guessed)\n\n        # Check if the user won\n        if won\n          puts \"You won!!\"\n          break\n        end\n    else\n        puts \"Nope, sorry.\"\n        tries += 1\n        puts \"You have \" + (10 - tries).to_s + \" left\"\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3601794, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bcaf80181413cf86c8e8ddfb71a8e28?s=128&d=identicon&r=PG&f=1", "display_name": "user3601794", "link": "https://stackoverflow.com/users/3601794/user3601794"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 31966304, "answer_count": 2, "score": 0, "last_activity_date": 1439399351, "creation_date": 1439383947, "last_edit_date": 1439399351, "question_id": 31965803, "link": "https://stackoverflow.com/questions/31965803/how-to-show-users-correct-guesses-in-hangman-ruby", "title": "How to show user&#39;s correct guesses in Hangman (Ruby)", "body": "<p>If the user guesses a correct letter, I want it to show the exact place. Like this: word banana. User writes \"a\" and it shows _a__a_a</p>\n\n<pre><code>word = nil      #no word or letters yet\ntries = 0       #setting the tries to zero\nletter = nil    #no word or letters yet\n\nputs \"This is a game for 2. Player 1 writes which word they want player 2 to guess.\"\nputs \"Player 1, write a word: \"\nword = gets.chomp\nletters = []\nletters = word.split(//)\nprogress = [\"_ \" * letters.length]\nputs progress\nputs \"Player 2, guess a letter: \"\n\nwhile tries &lt; 10 || letters.length == 0\n    letter = gets.chomp\n    if letters.include? letter\n        ind = letters.index(letter)\n        progress.insert(ind, letter)\n        progress.delete(\"_ \")\n        letters.delete(letter)\n        puts \"You guessed one letter!\"\n        progress = \"_ \" * letters.length\n        puts progress\n    else\n        puts \"Nope, sorry.\"\n        tries += 1\n        puts \"You have \" + (10 - tries).to_s + \" left\"\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "aptana"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4745956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c225ab8a8776b6d15b56a92b6cb87f?s=128&d=identicon&r=PG&f=1", "display_name": "Luc", "link": "https://stackoverflow.com/users/4745956/luc"}, "edited": false, "score": 0, "creation_date": 1439465625, "post_id": 31966043, "comment_id": 51878580, "body": "Thank you verry much for your answer !  In fact, I have a virtual machine (VirtualBox) and I have installed Linux Fedora, but I have problems to install solftware...  I used too Sublime Text. In fact, Ruby is very easy to read.  I need a solution to test my web app before send it on the Internet. Do you have a solution on Windows ? I can installed Kubuntu or Debian in a virtual machine.  Thank you !"}, {"owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "reply_to_user": {"reputation": 17, "user_id": 4745956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c225ab8a8776b6d15b56a92b6cb87f?s=128&d=identicon&r=PG&f=1", "display_name": "Luc", "link": "https://stackoverflow.com/users/4745956/luc"}, "edited": false, "score": 0, "creation_date": 1439468596, "post_id": 31966043, "comment_id": 51880638, "body": "In a virtual machine, go with something like Lubuntu (or xubuntu), which are very light while preserving a *buntu environment. Use sublime text inside and you should be good to go to write/test your application. Use git though and push to a private repository, so you won&#39;t loose data in case your VM crashes badly."}, {"owner": {"reputation": 17, "user_id": 4745956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c225ab8a8776b6d15b56a92b6cb87f?s=128&d=identicon&r=PG&f=1", "display_name": "Luc", "link": "https://stackoverflow.com/users/4745956/luc"}, "edited": false, "score": 0, "creation_date": 1439532187, "post_id": 31966043, "comment_id": 51909385, "body": "Thank you veru much for your advices. I have downloaded Kubuntu. Now, I will indstalled Kubuntu on my computer, with a private repository in my SSD. Thank you !!"}], "tags": [], "owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "is_accepted": true, "score": 0, "last_activity_date": 1439384501, "creation_date": 1439384501, "answer_id": 31966043, "question_id": 31965693, "link": "https://stackoverflow.com/questions/31965693/aptana-3-doesnt-execute-the-ruby-code/31966043#31966043", "title": "Aptana 3 doesn&#39;t execute the ruby code", "body": "<p>I started working on Aptana with Ruby on Windows. I dropped both, (Aptana and Windows) for development purposes: Ruby is <strong>extremely slow</strong> on Windows, due to some bugs related to File System management. Aptana was too buggy, couldn't deal with a language as dynamic as Ruby. Aptana performs an \"approximation\" of what Ruby code should perform (otherwise it would have been too slow), so it won't work fine with it, I'm sorry.</p>\n\n<p>I've heard good things about RubyMine, although it's a paid IDE. That being said, I came from Visual Studio, so I was really used to having <strong>a lot</strong> of fancy stuff: autocompletion, very integrated language with the editor itself and such. Although, in the end, I moved to a simple editor: now I use Sublime Text or Atom, they are simple text editors, no special support for Ruby, but they work very well, you'll discover that you don't need all that fancy stuff, Ruby it's very human readable, so you'll remember most stuff through memory, for everything else, you can search it.</p>\n\n<p>I know probably it's not what you want to hear, but I had to drop Aptana for one of those reasons, in addition to a few bugs.</p>\n\n<p>Actually, Ruby was more performant using a virtual machine inside Windows (with Kubuntu as OS) rathern than using it on Windows itself</p>\n"}], "owner": {"reputation": 17, "user_id": 4745956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c225ab8a8776b6d15b56a92b6cb87f?s=128&d=identicon&r=PG&f=1", "display_name": "Luc", "link": "https://stackoverflow.com/users/4745956/luc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 31966043, "answer_count": 1, "score": 0, "last_activity_date": 1448018021, "creation_date": 1439383664, "last_edit_date": 1448018021, "question_id": 31965693, "link": "https://stackoverflow.com/questions/31965693/aptana-3-doesnt-execute-the-ruby-code", "title": "Aptana 3 doesn&#39;t execute the ruby code", "body": "<p>I have installed Aptana to create a Rails App. But my problem is that Aptana 3 doesn't execute the ruby code.\nWhen I run my app in Firefox, I get the code without execution.\nWhen I run my app in the browser of Aptana, it execute HTML, CSS, but not Rails.</p>\n\n<p>For exemple, with CSS, When I use rails :</p>\n\n<pre><code>&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n</code></pre>\n\n<p>the CSS is not execute. But when I use HTML and CSS (like with PHP) :</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" media=\"screen\" type=\"text/css\" href=\"./css/design.css\" /&gt;\n</code></pre>\n\n<p>the CSS is execute, even in the browser of Aptana.</p>\n\n<p>My Os is Windows 10. I ma not sure that is a good choice to create ruby app, because there are a lot of bugs with ruby on Windows. The problem is maybe here...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job"], "answers": [{"tags": [], "owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "is_accepted": false, "score": 0, "last_activity_date": 1439384534, "creation_date": 1439384534, "answer_id": 31966064, "question_id": 31965668, "link": "https://stackoverflow.com/questions/31965668/how-to-determine-the-class-and-method-of-a-delayedjob-object/31966064#31966064", "title": "How to determine the class and method of a Delayed::Job object?", "body": "<p>The enqueued jobs are stored in a <code>delayed_jobs</code> table, and there is a model <code>Delayed::Job</code>, on which you could execute queries.</p>\n\n<p>The column <code>handler</code> contains YAML-encoded String of the object, which will do the work.</p>\n\n<pre><code>jobs = Delayed::Job.all\njobs.last.handler # will return you the handler object\n</code></pre>\n\n<p><a href=\"https://github.com/collectiveidea/delayed_job#gory-details\" rel=\"nofollow\">https://github.com/collectiveidea/delayed_job#gory-details</a></p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 1381577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c5cdfda66f557cd070b40b423799cd?s=128&d=identicon&r=PG", "display_name": "Erica Tripp", "link": "https://stackoverflow.com/users/1381577/erica-tripp"}, "is_accepted": false, "score": 0, "last_activity_date": 1449305075, "creation_date": 1449305075, "answer_id": 34102971, "question_id": 31965668, "link": "https://stackoverflow.com/questions/31965668/how-to-determine-the-class-and-method-of-a-delayedjob-object/34102971#34102971", "title": "How to determine the class and method of a Delayed::Job object?", "body": "<p>I added the following code to app/models/delayed_job.rb:</p>\n\n<pre><code>class DelayedJob &lt; ActiveRecord::Base\n\n  def self.find_all_by_class_and_method_and_keys(class_name, method_name, keys={})\n    search_string=\"handler like '%object: !ruby/%#{class_name}%method_name: :#{method_name}%' \"\n    keys.each do |k,v|\n      search_string+=\"and handler like '%#{k}: #{v}\\n%'\"\n    end\n    djs=DelayedJob.find_by_sql(\"select * from delayed_jobs where #{search_string}\")\n  end\n\n  def self.destroy_all_by_class_and_method_and_keys(class_name, method_name, keys={})\n    djs=find_all_by_class_and_method_and_keys(class_name, method_name, keys)\n    djs.each do |d|\n      d.destroy\n    end\n  end\n\nend\n</code></pre>\n\n<p>After that, you can just call <code>DelayedJob.find_all_by_class_and_method_and_keys(\"MyClassName\",\"my_method_name\")</code> to retrieve just the jobs with the MyClassName class and my_method_name method as active record objects.</p>\n"}], "owner": {"reputation": 7073, "user_id": 1279844, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d04dbd9bc38b19a88ae7cc28ed70a0d6?s=128&d=identicon&r=PG", "display_name": "bevanb", "link": "https://stackoverflow.com/users/1279844/bevanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449305075, "creation_date": 1439383592, "question_id": 31965668, "link": "https://stackoverflow.com/questions/31965668/how-to-determine-the-class-and-method-of-a-delayedjob-object", "title": "How to determine the class and method of a Delayed::Job object?", "body": "<p>I have a bunch of Delayed::Job objects in my DB that are waiting to be executed. How can I inspect them and determine what job (class and method) they contain?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439383654, "post_id": 31965613, "comment_id": 51838337, "body": "in index you have multiple users not a single user, do you want to fetch all microposts for all users?"}, {"owner": {"reputation": 37, "user_id": 4357927, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-_axLKmdrzPw/AAAAAAAAAAI/AAAAAAAAAFo/WO3VQHf0JxA/photo.jpg?sz=128", "display_name": "Farhan Haider", "link": "https://stackoverflow.com/users/4357927/farhan-haider"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439383748, "post_id": 31965613, "comment_id": 51838434, "body": "Yes. I want to fetch all microposts for all users"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439383794, "post_id": 31965613, "comment_id": 51838472, "body": "will you use each micropost with it&#39;s user? or do you want one huge array of microposts?"}, {"owner": {"reputation": 37, "user_id": 4357927, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-_axLKmdrzPw/AAAAAAAAAAI/AAAAAAAAAFo/WO3VQHf0JxA/photo.jpg?sz=128", "display_name": "Farhan Haider", "link": "https://stackoverflow.com/users/4357927/farhan-haider"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439383833, "post_id": 31965613, "comment_id": 51838505, "body": "I want to use each micropost with it&#39;s user."}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 4343470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b8n7o.jpg?s=128&g=1", "display_name": "Anthony Bobsin", "link": "https://stackoverflow.com/users/4343470/anthony-bobsin"}, "is_accepted": false, "score": 0, "last_activity_date": 1439384173, "creation_date": 1439384173, "answer_id": 31965906, "question_id": 31965613, "link": "https://stackoverflow.com/questions/31965613/how-to-access-childs-attribute-in-index/31965906#31965906", "title": "How to access child&#39;s attribute in index", "body": "<p>You will have to loop through <code>@users = User.all</code> and access the microposts from each user that way.</p>\n\n<pre><code>def index\n  @users = User.all\n  @users.each do |user|\n    current_users_microposts = user.microposts\n    # your code here\n  end\nend\n</code></pre>\n\n<p>Not sure what your requirements are but you can make an array and append each group of <code>user.microposts</code> onto that array as well, in order to have all of them in one variable.</p>\n"}, {"comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439384576, "post_id": 31965974, "comment_id": 51839140, "body": "two queries will be executed not one, one for all users and one for all microposts, check the guide <code>The above code will execute just 2 queries, as opposed to 11 queries in the previous case</code>"}, {"owner": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439384842, "post_id": 31965974, "comment_id": 51839338, "body": "Yes Mohammad, 1 query for the users and another one for theirs microposts. You&#39;re correct! I was referring to the microposts query in my answer. Thanks!"}], "tags": [], "owner": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "is_accepted": false, "score": 2, "last_activity_date": 1439384874, "last_edit_date": 1439384874, "creation_date": 1439384326, "answer_id": 31965974, "question_id": 31965613, "link": "https://stackoverflow.com/questions/31965613/how-to-access-childs-attribute-in-index/31965974#31965974", "title": "How to access child&#39;s attribute in index", "body": "<p>Try with this code in your users controller:</p>\n\n<pre><code>def index\n  @users = User.includes(:microposts).all\nend\n</code></pre>\n\n<p>And in your index page you show the microposts using:</p>\n\n<pre><code>&lt;% @user.microposts do |micropost| %&gt;\n  &lt;p&gt;&lt;%= micropost.title%&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will allow you to use your users' microposts in the view and is also a good practice because the query in the database for the microposts will be executed only once.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4357927, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-_axLKmdrzPw/AAAAAAAAAAI/AAAAAAAAAFo/WO3VQHf0JxA/photo.jpg?sz=128", "display_name": "Farhan Haider", "link": "https://stackoverflow.com/users/4357927/farhan-haider"}, "edited": false, "score": 0, "creation_date": 1439384820, "post_id": 31966022, "comment_id": 51839320, "body": "You just saved my day! Thanks. By the way, using only micropost was displaying memory addresses. Doing micropost.content worked."}], "tags": [], "owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "is_accepted": true, "score": 2, "last_activity_date": 1439384457, "creation_date": 1439384457, "answer_id": 31966022, "question_id": 31965613, "link": "https://stackoverflow.com/questions/31965613/how-to-access-childs-attribute-in-index/31966022#31966022", "title": "How to access child&#39;s attribute in index", "body": "<p>First you need a <a href=\"http://guides.rubyonrails.org/v2.3.8/active_record_querying.html#eager-loading-associations\" rel=\"nofollow\">little eager loading to avoid N+1 queries</a></p>\n\n<pre><code>def index\n  @users = User.includes(:microposts).all\nend\n</code></pre>\n\n<p>Then in the view you just loop normally and you'll be able to access the object</p>\n\n<pre><code>@users.each do |user|\n  user.microposts.each do |micropost|\n    micropost\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4357927, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-_axLKmdrzPw/AAAAAAAAAAI/AAAAAAAAAFo/WO3VQHf0JxA/photo.jpg?sz=128", "display_name": "Farhan Haider", "link": "https://stackoverflow.com/users/4357927/farhan-haider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 31966022, "answer_count": 3, "score": 0, "last_activity_date": 1439391302, "creation_date": 1439383432, "last_edit_date": 1439391302, "question_id": 31965613, "link": "https://stackoverflow.com/questions/31965613/how-to-access-childs-attribute-in-index", "title": "How to access child&#39;s attribute in index", "body": "<p>Micropost has content that I want in the index (@user.micropost.content). I can do this in the show but not in index.</p>\n\n<p>My models:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :microposts\nend\n\nclass Micropost &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>My user_controller.rb:</p>\n\n<pre><code>def index\n  @users = User.all\nend\n\ndef show\n  @user  = User.find(params[:id])\n  @posts = @user.microposts\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "subscription", "instagram-api"], "answers": [{"comments": [{"owner": {"reputation": 1077, "user_id": 3691544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74901e11990db5fb4c233ffa6e0144e?s=128&d=identicon&r=PG&f=1", "display_name": "Thierry", "link": "https://stackoverflow.com/users/3691544/thierry"}, "edited": false, "score": 0, "creation_date": 1439438543, "post_id": 31966874, "comment_id": 51864213, "body": "I tried your solution but it didn&#39;t worked. This -&gt; params[&quot;_json&quot;][0][&quot;object_id&quot;]    returned me this - &gt;   &quot;70267297418320&quot;.    I don&#39;t know where this number came from"}, {"owner": {"reputation": 1077, "user_id": 3691544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74901e11990db5fb4c233ffa6e0144e?s=128&d=identicon&r=PG&f=1", "display_name": "Thierry", "link": "https://stackoverflow.com/users/3691544/thierry"}, "edited": false, "score": 0, "creation_date": 1439465221, "post_id": 31966874, "comment_id": 51878336, "body": "Nevermind, your solution worked ! I got &quot;70267297418320&quot; because i&#39;ve used params[&quot;_json&quot;][0].object_id instead of params[&quot;_json&quot;][0][&quot;object_id&quot;]. thank you very much"}], "tags": [], "owner": {"reputation": 25268, "user_id": 215168, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212c9d7980fe9aa71739313d483b3782?s=128&d=identicon&r=PG", "display_name": "Abe Voelker", "link": "https://stackoverflow.com/users/215168/abe-voelker"}, "is_accepted": true, "score": 0, "last_activity_date": 1439386653, "creation_date": 1439386653, "answer_id": 31966874, "question_id": 31965397, "link": "https://stackoverflow.com/questions/31965397/instagram-api-ruby-subscription-tag-post-access-object-id/31966874#31966874", "title": "instagram api ruby subscription tag post access object_id", "body": "<p>For those exact params, this would work: <code>params[\"_json\"][0][\"object_id\"]</code></p>\n\n<p>But you'll probably need to adjust based on what <code>params[\"_json\"]</code> will return in the general case (I'm not familiar with that API). For example, you should probably iterate over the array it returns rather than grabbing the first element.</p>\n"}], "owner": {"reputation": 1077, "user_id": 3691544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74901e11990db5fb4c233ffa6e0144e?s=128&d=identicon&r=PG&f=1", "display_name": "Thierry", "link": "https://stackoverflow.com/users/3691544/thierry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 31966874, "answer_count": 1, "score": 0, "last_activity_date": 1439386653, "creation_date": 1439382874, "question_id": 31965397, "link": "https://stackoverflow.com/questions/31965397/instagram-api-ruby-subscription-tag-post-access-object-id", "title": "instagram api ruby subscription tag post access object_id", "body": "<p>the problem that i have is that when i post a picture on Instagram with the good hastag# of my subscription, i receive the notification in my callback but i can't access the object_id in the params. Here is the line that i receive : </p>\n\n<p>Parameters: {\"_json\"=>[{\"changed_aspect\"=>\"media\", \"object\"=>\"tag\", \"object_id\"=>\"mytag\", \"time\"=>1439341303, \"subscription_id\"=>19499294, \"data\"=>{}}], \"subscription\"=>{}}</p>\n\n<p>Here's my ruby code :</p>\n\n<p>def process_subscription</p>\n\n<pre><code>    if params[\"hub.challenge\"]\n        render :text =&gt; params[\"hub.challenge\"]\n    else\n        @test_tag_name =  params[\"object_id\"]\n    end\n</code></pre>\n\n<p>end</p>\n\n<p>But the @test_tag_name is always to null.\nThank you very much</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11, "user_id": 5199350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bd83e2f2b6032eadaba5b7931ad5b7?s=128&d=identicon&r=PG&f=1", "display_name": "sangyun Lee", "link": "https://stackoverflow.com/users/5199350/sangyun-lee"}, "edited": false, "score": 1, "creation_date": 1439388349, "post_id": 31965334, "comment_id": 51842158, "body": "I solved this problem  I uninstalled the turbolinke gem"}], "owner": {"reputation": 11, "user_id": 5199350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bd83e2f2b6032eadaba5b7931ad5b7?s=128&d=identicon&r=PG&f=1", "display_name": "sangyun Lee", "link": "https://stackoverflow.com/users/5199350/sangyun-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439390012, "creation_date": 1439382707, "last_edit_date": 1439390012, "question_id": 31965334, "link": "https://stackoverflow.com/questions/31965334/why-is-syntaxhighlighter-not-working-in-rails-until-i-hit-the-refresh-button", "title": "Why is &#39;syntaxhighlighter&#39; not working in Rails until I hit the refresh button?", "body": "<p>my Rails version : <strong>Rails 4.2.1</strong></p>\n\n<p><strong>this is my code :</strong></p>\n\n<p>Gemfile</p>\n\n<pre><code>gem 'syntax-highlighter-rails'\n</code></pre>\n\n<p>app/assets/javascripts/application.js</p>\n\n<pre><code>//= require syntax-highlighter-rails/shCore\n//= require syntax-highlighter-rails/shBrushCpp\n//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>app/assets/stylesheets/application.css.scss</p>\n\n<pre><code>/*\n*= require_tree .\n*= require_self\n*= require syntax-highlighter-rails/shCore\n*= require syntax-highlighter-rails/shThemeDefault\n*/   \n</code></pre>\n\n<p>app/views/codebanks/show.html.erb</p>\n\n<pre><code>&lt;pre class=\"brush: cpp\"&gt;\n  &lt;%= @codebank.content %&gt;\n&lt;/pre&gt;\n</code></pre>\n\n<p>app/views/layouts/application.html.erb</p>\n\n<pre><code>&lt;head&gt;\n\n  ...\n\n  &lt;script type=\"text/javascript\"&gt;\n    SyntaxHighlighter.all();\n  &lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>In my Rails project, I installed the syntaxhighlighter gem, but it doesn't work until I hit the refresh button.</p>\n\n<p>I figure the problem is related to syntaxhighliter, but I don't know why it happens.</p>\n\n<p>Please help me.. I've been stuck on it for a week..</p>\n"}, {"tags": ["ruby", "methods", "instance-variables", "memoization"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439383171, "post_id": 31965273, "comment_id": 51837929, "body": "In &quot;instead of the method&quot;, which method does &quot;the method&quot; point to? It is not clear what you mean by &quot;call the method explicitly&quot;."}, {"owner": {"reputation": 333, "user_id": 4237436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ef7e273b63b57f9a32661d60c5ee08f3?s=128&d=identicon&r=PG&f=1", "display_name": "enahel", "link": "https://stackoverflow.com/users/4237436/enahel"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439389021, "post_id": 31965273, "comment_id": 51842744, "body": "I do not call <b>MyExample.new.test_method</b> explicitely. Instead I only write <b>MyExample.new</b> and the return value of test_method in the instance variable can be used in other methods (or accessed by attr_reader, not included in the example above)."}], "answers": [{"tags": [], "owner": {"reputation": 951, "user_id": 4003753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8P02.jpg?s=128&g=1", "display_name": "dreamingblackcat", "link": "https://stackoverflow.com/users/4003753/dreamingblackcat"}, "is_accepted": false, "score": 0, "last_activity_date": 1439393580, "creation_date": 1439393580, "answer_id": 31969668, "question_id": 31965273, "link": "https://stackoverflow.com/questions/31965273/assign-result-of-a-method-to-instance-variable/31969668#31969668", "title": "Assign result of a method to instance variable", "body": "<p>If all you want is getting the result of your method into the instance variable without explicitly callling the method on an instance of the class, then your approach is reasonable. If your method body isn't too long, you can even make it inline inside the initializer. </p>\n\n<p>If you want your method to be called once and only once, you can do something like this:</p>\n\n<pre><code>def test_method\n   return if @your_method_has_been_called.nil?\n   @test_method_has_been_called = true\n   #perform your operations\nend\n</code></pre>\n\n<p>However, if all you care is the fact that the operation is only performed once( may be it's an expensive operation) then you can use ||= operator inside your method and setting the instance variable there instead of inside initializer. Eg:</p>\n\n<pre><code>class MyExample\n  def initialize\n    test_method\n  end\n\n  def test_method\n    @my_var ||=  1+1 # Replace your operation here\n  end\nend\n</code></pre>\n\n<p>In either case, since you don't wanna expose your result through your method, it's best to put it as a private method.</p>\n"}], "owner": {"reputation": 333, "user_id": 4237436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ef7e273b63b57f9a32661d60c5ee08f3?s=128&d=identicon&r=PG&f=1", "display_name": "enahel", "link": "https://stackoverflow.com/users/4237436/enahel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439393580, "creation_date": 1439382565, "last_edit_date": 1439393158, "question_id": 31965273, "link": "https://stackoverflow.com/questions/31965273/assign-result-of-a-method-to-instance-variable", "title": "Assign result of a method to instance variable", "body": "<p>I often assign the result of a method to an instance variable in the initializer:</p>\n\n<pre><code>class MyExample\n  def initialize\n    @my_var = test_method\n  end\n\n  def test_method\n    # does something\n  end\nend \n</code></pre>\n\n<p>Doing this in <code>initialize</code> instead of the method seems like a special case of memoization. I do this to avoid calling the method explicitly, which makes my code more readable. I also want to make sure that the method is only called once for the instance. </p>\n\n<p>I have not found code that looks like this.</p>\n\n<ul>\n<li>Are there any downsides to doing this in the initializer apart from memoization in general?</li>\n<li>Would this be considered a bad practice in some way? Why?</li>\n</ul>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1439382569, "post_id": 31965154, "comment_id": 51837444, "body": "Your sentence in the question is not completed. Not clear what you are writing."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1439382623, "post_id": 31965154, "comment_id": 51837494, "body": "Your hash is invalid."}, {"owner": {"reputation": 571, "user_id": 2632658, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb7c953b0f019855ebe7e5a3ddd14133?s=128&d=identicon&r=PG", "display_name": "kilua", "link": "https://stackoverflow.com/users/2632658/kilua"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439566635, "post_id": 31965154, "comment_id": 51929903, "body": "@sawa it is a valid RUBY hash, you could copy and paste it and try on your own"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439568326, "post_id": 31965154, "comment_id": 51930888, "body": "Don&#39;t try to make a false impression. It <b>became</b> a valid hash after jlhonora&#39;s edit two days ago."}, {"owner": {"reputation": 571, "user_id": 2632658, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb7c953b0f019855ebe7e5a3ddd14133?s=128&d=identicon&r=PG", "display_name": "kilua", "link": "https://stackoverflow.com/users/2632658/kilua"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1439570234, "post_id": 31965154, "comment_id": 51931944, "body": "@sawa okay, it was a typo, sorry for that.."}], "answers": [{"tags": [], "owner": {"reputation": 8503, "user_id": 1946861, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/2ObQs.jpg?s=128&g=1", "display_name": "jlhonora", "link": "https://stackoverflow.com/users/1946861/jlhonora"}, "is_accepted": true, "score": 1, "last_activity_date": 1439382713, "creation_date": 1439382713, "answer_id": 31965337, "question_id": 31965154, "link": "https://stackoverflow.com/questions/31965154/how-do-i-iterate-array-hash-to-make-a-table/31965337#31965337", "title": "How do I iterate array hash to make a table?", "body": "<p>Try something like this:</p>\n\n<pre><code>hash.each do |company, elements|\n  puts \"#{company}\\t\\t\"\n  elements.each do |v|\n    puts \"\\t#{v['name']}\\t#{v['count']}\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 571, "user_id": 2632658, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb7c953b0f019855ebe7e5a3ddd14133?s=128&d=identicon&r=PG", "display_name": "kilua", "link": "https://stackoverflow.com/users/2632658/kilua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1439386252, "accepted_answer_id": 31965337, "answer_count": 1, "score": -3, "last_activity_date": 1439566562, "creation_date": 1439382264, "last_edit_date": 1439566562, "question_id": 31965154, "link": "https://stackoverflow.com/questions/31965154/how-do-i-iterate-array-hash-to-make-a-table", "closed_reason": "Needs details or clarity", "title": "How do I iterate array hash to make a table?", "body": "<p>I have this hash that holds and array that contains hash:</p>\n\n<pre><code>{ \n \"Company1\" =&gt; [\n   { \"name\" =&gt; \"test1\",   \"count\" =&gt; 2},\n   { \"name\" =&gt; \"test123\", \"count\" =&gt; 3}\n ],\n \"Company2\" =&gt; [\n   { \"name\" =&gt; \"test33\",  \"count\" =&gt; 2},\n   { \"name\" =&gt; \"test453\", \"count\" =&gt; 3},\n   { \"name\" =&gt; \"test342\", \"count\" =&gt; 2},\n   { \"name\" =&gt; \"test90\",  \"count\" =&gt;3}\n ]\n}\n</code></pre>\n\n<p>I want to iterate it so i can make the format to print it out in the table format. The table format is like this probably:</p>\n\n<pre><code>Company  | Name   |   Count\nCompany1\n          test1       2\n          test123     3\nCompany2\n          test33      2\n          test453     3\n          test342     2\n          test90      3\n</code></pre>\n\n<p>So how do I iterate the ruby hash that contains an array of hash. </p>\n"}, {"tags": ["ruby", "windows-xp", "msvcrt"], "comments": [{"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1439382693, "post_id": 31965090, "comment_id": 51837541, "body": "given the proc entry point name, I&#39;m going to guess that you&#39;ve downloaded a 64bit version of ruby and are trying to run it on a 32 bit architecture."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1439383752, "post_id": 31965090, "comment_id": 51838438, "body": "@d96p I understand that you are using a 32-bit operating system, but it IS possible that you downloaded a 64-bit version of Ruby. Make sure your downloaded file does not have x64 in the filename. Also, you tagged msvcrt. Could you explain how that is involved? You may want to tag &quot;windows&quot; as well. Ruby is always difficult to install on Windows, so do not worry. It will work soon."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 1, "creation_date": 1439384900, "post_id": 31965090, "comment_id": 51839389, "body": "@mcfinnigan: The 64 here means 64-bit <code>time_t</code>."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1439385031, "post_id": 31965090, "comment_id": 51839516, "body": "<a href=\"https://github.com/oneclick/rubyinstaller/issues/271\" rel=\"nofollow noreferrer\">XP is not supported anymore by Ruby Installer</a>, Ruby (MRI/CRuby) itself still supports it though."}, {"owner": {"reputation": 1751, "user_id": 434512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hyrRB.jpg?s=128&g=1", "display_name": "CuddleBunny", "link": "https://stackoverflow.com/users/434512/cuddlebunny"}, "edited": false, "score": 0, "creation_date": 1439388702, "post_id": 31965090, "comment_id": 51842469, "body": "Possibly not related, but 2.2.x has a lot of issues on Windows in general. Try 2.1.x?"}], "answers": [{"tags": [], "owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "is_accepted": false, "score": 4, "last_activity_date": 1439439570, "creation_date": 1439439570, "answer_id": 31979437, "question_id": 31965090, "link": "https://stackoverflow.com/questions/31965090/is-there-an-error-in-msvcrt-dll-with-ruby-compiler-on-windows-xp/31979437#31979437", "title": "Is there an error in &quot;msvcrt.dll&quot;, with Ruby compiler, on &quot;Windows XP&quot;?", "body": "<p>The error message gives us all the information we need.  The executable <code>ruby.exe</code> is linked to <code>msvcrt.dll</code> (<a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2014/04/11/10516280.aspx\" rel=\"nofollow\">you're not supposed to do that</a>, but never mind) which is the C runtime that Windows itself uses.</p>\n\n<p>The missing function is <code>_gmtime64_s</code> which we can <a href=\"https://msdn.microsoft.com/en-us/library/3stkd9be(v=vs.80).aspx\" rel=\"nofollow\">look up in MSDN</a>.  It turns out that this function was only added in Visual Studio 2005, i.e., after Windows XP was released, so it is unsurprising that the Windows XP runtime does not include it.</p>\n\n<p>Conclusion: the version of <code>ruby.exe</code> you've downloaded requires at least Windows Vista.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5204818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2533, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1439663774, "creation_date": 1439382130, "last_edit_date": 1439663774, "question_id": 31965090, "link": "https://stackoverflow.com/questions/31965090/is-there-an-error-in-msvcrt-dll-with-ruby-compiler-on-windows-xp", "title": "Is there an error in &quot;msvcrt.dll&quot;, with Ruby compiler, on &quot;Windows XP&quot;?", "body": "<p>I am using the <strong>latest version</strong> of Ruby; I have downloaded it, [from here] (<a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">http://rubyinstaller.org/downloads/</a>). My installer is: <a href=\"http://dl.bintray.com/oneclick/rubyinstaller/rubyinstaller-2.2.2.exe\" rel=\"nofollow\">http://dl.bintray.com/oneclick/rubyinstaller/rubyinstaller-2.2.2.exe</a>.</p>\n\n<p>Then, I have installed it into my <strong>Windows XP</strong> computer. I am using <strong>32-bit</strong> system.</p>\n\n<p>But; when I run <code>ruby.exe</code>, it always returns this error message:</p>\n\n<pre><code>The procedure entry point _gmtime64_s could not be located in the dynamic link library msvcrt.dll.\n</code></pre>\n\n<p>Some older versions (before of <strong>1.9.3</strong>) can run without this error message, on my computer.</p>\n\n<p>Is there any suggestion to fix this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "logic", "conditional-statements"], "comments": [{"owner": {"reputation": 1243, "user_id": 2280625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7906b1cabd358d40f04edf72ce65bae5?s=128&d=identicon&r=PG", "display_name": "kjmagic13", "link": "https://stackoverflow.com/users/2280625/kjmagic13"}, "edited": false, "score": 2, "creation_date": 1439382104, "post_id": 31965002, "comment_id": 51837114, "body": "<code>address.present? == !address.blank? # =&gt; true </code>"}, {"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "reply_to_user": {"reputation": 1243, "user_id": 2280625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7906b1cabd358d40f04edf72ce65bae5?s=128&d=identicon&r=PG", "display_name": "kjmagic13", "link": "https://stackoverflow.com/users/2280625/kjmagic13"}, "edited": false, "score": 0, "creation_date": 1439382627, "post_id": 31965002, "comment_id": 51837498, "body": "Oh wow, thanks kj, that makes it much simpler already, the only bit that doesn&#39;t work is the third condition (updated + updates): <code>&lt;% elsif @articleupdates.present? &amp;&amp; @article.status == &quot;updated&quot; %&gt;</code>. Any ideas?"}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1439383621, "post_id": 31965418, "comment_id": 51838296, "body": "Thank you, ap, the @articleupdates is already in the controller <code>@articleupdates = @article.newsitems</code>, but you&#39;ve given me an idea for another bit of the code. I shall look in to presenters."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1439383763, "post_id": 31965418, "comment_id": 51838445, "body": "and <b><i>really</i></b> get rid of your leaking <code>@article.status == </code> :)"}, {"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1439383978, "post_id": 31965418, "comment_id": 51838630, "body": "What do you mean by &#39;leaking&#39;?"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 1, "creation_date": 1439384111, "post_id": 31965418, "comment_id": 51838740, "body": "I mean you have something obvious now bu its not. You leak the object&#39;s internals everywhere when you hardcode strings in your <code>@article.status ==</code>. You use objects, objects should answer your questions, you must not check their inner properties"}, {"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1439384396, "post_id": 31965418, "comment_id": 51838993, "body": "Ok. Thank you very much. I will keep improving."}], "tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": false, "score": 1, "last_activity_date": 1439383703, "last_edit_date": 1439383703, "creation_date": 1439382923, "answer_id": 31965418, "question_id": 31965002, "link": "https://stackoverflow.com/questions/31965002/ruby-rails-conditional-statement-logic-multiple-array-values-opposite-of-x-bla/31965418#31965418", "title": "Ruby/Rails conditional statement logic, multiple array values, opposite of x.blank?", "body": "<p>Your code contains the following anti patterns:</p>\n\n<ul>\n<li>you repeat a lot <code>@articleupdates.blank?</code> (DRY)</li>\n<li>you check an object's internal outside of it (tell dont ask)</li>\n</ul>\n\n<p>First create methods in your model:</p>\n\n<pre><code>def published?\n  status == \"published\"\nend\n#etc...\n</code></pre>\n\n<p>Then I recommend you create a presenter using a gem like <a href=\"https://github.com/drapergem/draper\" rel=\"nofollow\">draper</a></p>\n\n<pre><code>class ArticleDecorator &lt; Draper::Decorator\n  delegate_all\n\n  def publication_status\n    if newsitems.present?\n      if updated?\n        \"UPDATES ADDED + ORIGINAL UPDATED\"\n      else\n        \"UPDATES ADDED\"\n      end\n    elsif updated?\n      \"ORIGINAL UPDATED\"\n    else\n      \"\"\n    end\n  end\nend\n</code></pre>\n\n<p>And in you controller:</p>\n\n<pre><code>@article = @article.decorate\n</code></pre>\n\n<p>Finally in your view:</p>\n\n<pre><code>&lt;div class=\"alert-update\"&gt;&lt;span class=\"updated-label\"&gt;&lt;%= @article.publication_status %&gt;&lt;/span&gt;&lt;/div&gt;    \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1439383452, "post_id": 31965532, "comment_id": 51838148, "body": "Well done kj, had just discovered the exact same thing, because it was printing &#39;updates added&#39; for the third condition. That makes it work. Beautiful."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 1, "creation_date": 1439383495, "post_id": 31965532, "comment_id": 51838186, "body": "@MatthewBennett you should really add layers of abstraction to your code :)"}, {"owner": {"reputation": 1243, "user_id": 2280625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7906b1cabd358d40f04edf72ce65bae5?s=128&d=identicon&r=PG", "display_name": "kjmagic13", "link": "https://stackoverflow.com/users/2280625/kjmagic13"}, "reply_to_user": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 1, "creation_date": 1439383612, "post_id": 31965532, "comment_id": 51838287, "body": "No problem @MatthewBennett. You might want to consider moving this into a helper. Also, are <code>articleupdates</code> associated with articles in any way? For instance could you call <code>@article.article_updates</code>? This would simplify your helper greatly."}, {"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1439383744, "post_id": 31965532, "comment_id": 51838428, "body": "@apneadiving I agree :-). I kind of do that as I go along to work out which bits need abstracting. Slowly, slowly."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1439383805, "post_id": 31965532, "comment_id": 51838481, "body": "helpers are a bad idea in this case: everything depends on a single object."}, {"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1439383834, "post_id": 31965532, "comment_id": 51838506, "body": "@kjmagic13 For sure, that&#39;s already in the controller <code>@articleupdates = @article.newsitems</code>, &#39;newsitems&#39; being the scaffold name for &#39;updates&#39;. The relationship is:  &quot;article can have many updates / update can belong to an article&quot;."}, {"owner": {"reputation": 1243, "user_id": 2280625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7906b1cabd358d40f04edf72ce65bae5?s=128&d=identicon&r=PG", "display_name": "kjmagic13", "link": "https://stackoverflow.com/users/2280625/kjmagic13"}, "reply_to_user": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1439384391, "post_id": 31965532, "comment_id": 51838988, "body": "@MatthewBennett see above."}], "tags": [], "owner": {"reputation": 1243, "user_id": 2280625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7906b1cabd358d40f04edf72ce65bae5?s=128&d=identicon&r=PG", "display_name": "kjmagic13", "link": "https://stackoverflow.com/users/2280625/kjmagic13"}, "is_accepted": true, "score": 2, "last_activity_date": 1439385276, "last_edit_date": 1439385276, "creation_date": 1439383229, "answer_id": 31965532, "question_id": 31965002, "link": "https://stackoverflow.com/questions/31965002/ruby-rails-conditional-statement-logic-multiple-array-values-opposite-of-x-bla/31965532#31965532", "title": "Ruby/Rails conditional statement logic, multiple array values, opposite of x.blank?", "body": "<p>You would be catching on <code>status == \"updated\"</code> before you ever got to your third condition. Move it up to the top as it is the most complex conditional.</p>\n\n<pre><code>&lt;% if @articleupdates.present? &amp;&amp; @article.status == \"updated\" %&gt;\n    UPDATES ADDED + ORIGINAL UPDATED\n&lt;% elsif @articleupdates.present? %&gt;\n    UPDATES ADDED\n&lt;% elsif @article.status == \"updated\" %&gt;\n    ORIGINAL UPDATED\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code># Article model\ndef updated?\n    status == 'updated'\nend\n\n# article helper\ndef article_label(article)\n    if article.newsitems.present? &amp;&amp; article.updated?\n        label = \"UPDATES ADDED + ORIGINAL UPDATED\"\n    elsif article.newsitems.present?\n        label = \"UPDATES ADDED\"\n    elsif article.updated?\n        label = \"ORIGINAL UPDATED\"\n    end\n    content_tag :div, content_tag(:span, label, class: 'updated-label'), class: 'alert-update'\nend\n</code></pre>\n\n<p>A decorator would work too I guess... :)</p>\n"}], "owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 31965532, "answer_count": 2, "score": 0, "last_activity_date": 1439385276, "creation_date": 1439381877, "last_edit_date": 1439382858, "question_id": 31965002, "link": "https://stackoverflow.com/questions/31965002/ruby-rails-conditional-statement-logic-multiple-array-values-opposite-of-x-bla", "title": "Ruby/Rails conditional statement logic, multiple array values, opposite of x.blank?", "body": "<p>The human logic is:</p>\n\n<ul>\n<li>Reporter can update body of original article (set status to 'original updated')</li>\n<li>Reporter can add separate updates to the bottom of the article (article has_many updates)</li>\n<li>Reporter can do nothing to article</li>\n</ul>\n\n<p>This is then used to tell readers on the front end (with pretty 'original updated' or 'updates added' labels) about if or how the original news story has been updated since it was first published, which is important if you're really interested in a story.</p>\n\n<p>So\u2026 1) The following logic works but the top half seems very messy. How do you include three possibilities in one == array?</p>\n\n<pre><code>&lt;% if @articleupdates.blank? &amp;&amp; @article.status == \"published\" %&gt;\n\n&lt;% elsif @articleupdates.blank? &amp;&amp; @article.status == \"editing\" %&gt;\n\n&lt;% elsif @articleupdates.blank? &amp;&amp; @article.status == \"draft\" %&gt;\n\n&lt;% elsif @articleupdates.blank? &amp;&amp; @article.status == 'updated' %&gt;\n  &lt;div class=\"alert-update\"&gt;&lt;span class=\"updated-label\"&gt;ORIGINAL UPDATED&lt;/span&gt;&lt;/div&gt;\n&lt;% else %&gt;\n  &lt;div class=\"alert-update\"&gt;&lt;span class=\"updated-label\"&gt;UPDATES ADDED&lt;/span&gt;&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And\u2026 2) while the above works, is there any simple way of doing this\u2026</p>\n\n<pre><code>IF original-article updated AND additional-updates not added, print 'original updated'\nELSIF original-article not updated AND additional-updates added, print 'updates added' \nELSIF original-article updated AND additional-updates added, print both 'original updated' AND 'updates added'\nELSE don't print anything\n</code></pre>\n\n<p>Or maybe:</p>\n\n<pre><code>IF original-article updated, print 'original updated'\nELSIF additional-updates added, print 'updates added' \nELSIF original-article updated AND additional-updates added, print both 'original updated' AND 'updates added'\nELSE don't print anything\n</code></pre>\n\n<p>?? I think the missing bit is: what's the opposite of <code>@articleupdates.blank?</code> ?</p>\n\n<p><strong>UPDATE</strong> following kj's quick answer below. The simpler version almost works now:</p>\n\n<pre><code>&lt;% if @articleupdates.present? %&gt;\n  UPDATES ADDED\n&lt;% elsif @article.status == \"updated\" %&gt;\n  ORIGINAL UPDATED\n&lt;% elsif @articleupdates.present? &amp;&amp; @article.status == \"updated\" %&gt;\n  UPDATES ADDED + ORIGINAL UPDATED\n&lt;% else %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The third part doesn't work for some reason: <code>&lt;% elsif @articleupdates.present? &amp;&amp; @article.status == \"updated\" %&gt;</code></p>\n"}, {"tags": ["arrays", "ruby", "tk"], "answers": [{"comments": [{"owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "edited": false, "score": 0, "creation_date": 1554225113, "post_id": 33189501, "comment_id": 97670393, "body": "<a href=\"http://ruby-doc.org/stdlib-2.2.5/libdoc/tk/rdoc/TkVariable.html#method-i-to_a\" rel=\"nofollow noreferrer\"><code>TkVariable#to_a</code></a> is an alias for <a href=\"http://ruby-doc.org/stdlib-2.2.5/libdoc/tk/rdoc/TkVariable.html#method-i-list\" rel=\"nofollow noreferrer\"><code>TkVariable#list</code></a>. <a href=\"http://ruby-doc.org/stdlib-2.2.5/libdoc/tk/rdoc/TkVariable.html#method-i-value-3D\" rel=\"nofollow noreferrer\"><code>TkVariable#value=</code></a> automatically converts (Ruby) arrays into Tcl&#39;s internal syntax, and <code>TkVariable#list</code> converts Tcl&#39;s internal syntax back into Ruby arrays."}, {"owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "edited": false, "score": 0, "creation_date": 1554225144, "post_id": 33189501, "comment_id": 97670409, "body": "So, <code>TkVariable.new(%w[a b\\ c d]).value</code> is <code>&quot;a {b c} d&quot;</code>. Also, <code>TkVariable.new(&#39;a {b c} d&#39;).list</code> is <code>[&quot;a&quot;, &quot;b c&quot;, &quot;d&quot;]</code>. These facts are useful when filenames contain spaces (for instance)."}, {"owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "edited": false, "score": 0, "creation_date": 1554225340, "post_id": 33189501, "comment_id": 97670490, "body": "BTW, <code>TkVariable</code> isn&#39;t covered by Tk&#39;s <a href=\"http://www.tcl.tk/man/tcl8.5/TkCmd/contents.htm\" rel=\"nofollow noreferrer\">Commands</a> documentation. Class <a href=\"http://ruby-doc.org/stdlib-2.2.5/libdoc/tk/rdoc/TkVariable.html\" rel=\"nofollow noreferrer\"><code>TkVariable</code></a> is defined only in the Ruby Tk wrapper."}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 2, "last_activity_date": 1445102989, "creation_date": 1445102989, "answer_id": 33189501, "question_id": 31964822, "link": "https://stackoverflow.com/questions/31964822/ruby-tk-lib-output-from-getopenfile/33189501#33189501", "title": "ruby, tk lib. Output from getopenfile", "body": "<p><code>TkVariable</code> implements <code>#to_a</code>, which you can use to convert its <code>value</code> into the <code>Array</code> you want.</p>\n\n<pre><code>button1 = TkButton.new(root) {\n  text 'Open Files'\n  command (proc do\n    filess.value = openFiles\n    puts filess.to_a.class\n    puts filess.to_a.inspect\n  end)\n}.grid(:column =&gt; 1, :row =&gt; 1, :sticky =&gt; 'we')\n</code></pre>\n\n\n\n<pre><code>Array\n[\"C:\\file1\", \"C:\\file2\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1556277726, "last_edit_date": 1556277726, "creation_date": 1554173200, "answer_id": 55466234, "question_id": 31964822, "link": "https://stackoverflow.com/questions/31964822/ruby-tk-lib-output-from-getopenfile/55466234#55466234", "title": "ruby, tk lib. Output from getopenfile", "body": "<p>This worked for me using Ruby 2.2.5 (with Tk 8.5.12) on Windows 7:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'tk'\n\ndef extract_filenames_as_ruby_array(file_list_string)\n  ::TkVariable.new(file_list_string).list\nend\n\ndef files_open\n  descriptions = %w[\n      Comma\\ Separated\\ Values\n      Text\\ Files\n      All\\ Files\n      ]\n  extensions = %w[  {.csv}  {.txt}  *  ]\n  types = descriptions.zip(extensions).map {|d,e| \"{#{d}} #{e}\" }\n  file_list_string = ::Tk.getOpenFile \\\n      filetypes: types,\n      multiple: true,\n      title: 'Select Files'\n  extract_filenames_as_ruby_array file_list_string\nend\n\ndef lambda_files_open\n  @lambda_files_open ||= ::Kernel.lambda do\n    files = files_open\n    puts files\n  end\nend\n\ndef main\n  b_button_1\n  ::Tk.mainloop\nend\n\n# Tk objects:\n\ndef b_button_1\n  @b_button_1 ||= begin\n    b = ::Tk::Tile::Button.new root\n    b.command lambda_files_open\n    b.text 'Open Files'\n    b.grid column: 1, row: 1, sticky: :we\n  end\nend\n\ndef root\n  @root ||= ::TkRoot.new\nend\n\nmain\n</code></pre>\n\n<p>For reference, <code>Tk.getOpenFile</code> is explained in the <a href=\"http://www.tcl.tk/man/tcl8.5/TkCmd/getOpenFile.htm\" rel=\"nofollow noreferrer\">Tk Commands</a> and <a href=\"http://ruby-doc.org/stdlib-2.2.5/libdoc/tk/rdoc/TkCore.html#method-i-getOpenFile\" rel=\"nofollow noreferrer\">Ruby</a> documentation.</p>\n"}], "owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1556277726, "creation_date": 1439381385, "last_edit_date": 1439383313, "question_id": 31964822, "link": "https://stackoverflow.com/questions/31964822/ruby-tk-lib-output-from-getopenfile", "title": "ruby, tk lib. Output from getopenfile", "body": "<p>I am trying to load multiple files via ruby/tk lib and put them into array:</p>\n\n<pre><code>def openFiles\nreturn Tk.getOpenFile(  'title' =&gt; 'Select Files',\n                        'multiple' =&gt; true, \n                        'defaultextension' =&gt; 'csv',\n                        'filetypes' =&gt; \"{{Comma Seperated Values} {.csv}} {TXT {.txt}} {All files {.*}}\")\nend\n</code></pre>\n\n<p>and then in code</p>\n\n<pre><code>filess = TkVariable.new()\n\nbutton1 = TkButton.new(root){\ntext 'Open Files'\ncommand (proc {filess.value = openFiles; puts filess; puts filess.class; puts filess.inspect})\n\n}.grid(:column =&gt; 1, :row =&gt; 1, :sticky =&gt; 'we')\n</code></pre>\n\n<p>The problem is that I can not manage to get the output as array and I do not know if it is possible or I will have to somehow parse the output. Hm? Please help. Thank you.</p>\n\n<p>this is the output, when I click on the button:</p>\n\n<pre><code>C:\\file1\nC:\\file2\nTkVariable\n#&lt;TkVariable: v00000&gt;\n</code></pre>\n\n<p>I think it should be: (for the array part)</p>\n\n<pre><code>['C:\\file1','C:\\file2']\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "ruby", "xcode", "calabash-ios"], "answers": [{"comments": [{"owner": {"reputation": 9490, "user_id": 838902, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c60169b464a13ad872b767495e5b218?s=128&d=identicon&r=PG", "display_name": "DShah", "link": "https://stackoverflow.com/users/838902/dshah"}, "edited": false, "score": 0, "creation_date": 1439382640, "post_id": 31965043, "comment_id": 51837505, "body": "I had thought of using this approach but as per the link: <a href=\"http://angelolloqui.com/blog/25-Acceptance-testing-with-Calabash-and-CocoaPods\" rel=\"nofollow noreferrer\">angelolloqui.com/blog/&hellip;</a>. I thought not to go with this approach as their may be issues. Also, the Calabash itself don&#39;t recommend the approach as mentioned in <a href=\"https://github.com/calabash/calabash-ios\" rel=\"nofollow noreferrer\">github.com/calabash/calabash-ios</a>"}, {"owner": {"reputation": 852, "user_id": 3244796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e8699f5c789401c954d43f3d6e948?s=128&d=identicon&r=PG&f=1", "display_name": "aman.sood", "link": "https://stackoverflow.com/users/3244796/aman-sood"}, "reply_to_user": {"reputation": 9490, "user_id": 838902, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c60169b464a13ad872b767495e5b218?s=128&d=identicon&r=PG", "display_name": "DShah", "link": "https://stackoverflow.com/users/838902/dshah"}, "edited": false, "score": 0, "creation_date": 1439382978, "post_id": 31965043, "comment_id": 51837768, "body": "Just gone through readme on git. Reason why they are not recommending cocoapods is as you cant upload you app to app store with it as it might get rejected (reason may be undocumented api use). So there are ways to handle these using different configuration in project build. But if looks too much then you can just remove it from pod file just before app store upload. But still will recommend to do it using different schema in Xcode project."}, {"owner": {"reputation": 852, "user_id": 3244796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e8699f5c789401c954d43f3d6e948?s=128&d=identicon&r=PG&f=1", "display_name": "aman.sood", "link": "https://stackoverflow.com/users/3244796/aman-sood"}, "reply_to_user": {"reputation": 9490, "user_id": 838902, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c60169b464a13ad872b767495e5b218?s=128&d=identicon&r=PG", "display_name": "DShah", "link": "https://stackoverflow.com/users/838902/dshah"}, "edited": false, "score": 0, "creation_date": 1439383390, "post_id": 31965043, "comment_id": 51838094, "body": "posted by mistake. You can check its edited version :)"}, {"owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "edited": false, "score": 0, "creation_date": 1439884337, "post_id": 31965043, "comment_id": 52030511, "body": "RE: Calabash + AppStore - It will be rejected because the Calabash iOS server uses private Apple APIs and frameworks."}, {"owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "edited": false, "score": 0, "creation_date": 1439884559, "post_id": 31965043, "comment_id": 52030654, "body": "RE: CocoaPods - We don&#39;t recommend CocoaPods if you are not already using CocoaPods.  The reasons are:  the pod spec is not updated as often as we release (we don&#39;t own the spec) and CocoaPods adds an unnecessary amount of complexity to a very simple task - linking a framework.  We don&#39;t want users to get the impression that they need a lot of machinery to get started with Calabash.  Also, if we advocated CocoaPods, we&#39;d have to do a lot of CocoaPods support.  CocoaPods + Calabash&#39;s 2nd target can be tricky to configure."}, {"owner": {"reputation": 852, "user_id": 3244796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e8699f5c789401c954d43f3d6e948?s=128&d=identicon&r=PG&f=1", "display_name": "aman.sood", "link": "https://stackoverflow.com/users/3244796/aman-sood"}, "edited": false, "score": 0, "creation_date": 1439887538, "post_id": 31965043, "comment_id": 52032418, "body": "I dont agree much to your comment. Mine is a big and diversified organisation, and we found Cocoapod very much useful. If 3rd party vendor is working as open source with Github, Cocoapod is best as you get anytime update code by just install pod command. Now there may be some vendor who are reluctant to share code and don&#39;t maintain github then that&#39;s their business model. Also as we have centralised build systems so we prefer separate dev, distribution and final app store release configuration as these help us reduce a lot of human errors and automate out build system."}], "tags": [], "owner": {"reputation": 852, "user_id": 3244796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e8699f5c789401c954d43f3d6e948?s=128&d=identicon&r=PG&f=1", "display_name": "aman.sood", "link": "https://stackoverflow.com/users/3244796/aman-sood"}, "is_accepted": false, "score": 0, "last_activity_date": 1439382004, "creation_date": 1439382004, "answer_id": 31965043, "question_id": 31964595, "link": "https://stackoverflow.com/questions/31964595/integrating-calabash-with-existing-ios-app-in-xcode-issues/31965043#31965043", "title": "Integrating Calabash with existing iOS app in Xcode issues", "body": "<p>I am not really sure what exactly may be the problem. But which I feel as it is available on <a href=\"https://cocoapods.org/?q=Calabash\" rel=\"nofollow\">Cocoapods</a> you should use it using pod. Which is much easier way and also easy to update. For reference <a href=\"https://guides.cocoapods.org/using/using-cocoapods.html\" rel=\"nofollow\">Using CocoaPods</a></p>\n"}, {"tags": [], "owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "is_accepted": true, "score": 0, "last_activity_date": 1439884255, "creation_date": 1439884255, "answer_id": 32066613, "question_id": 31964595, "link": "https://stackoverflow.com/questions/31964595/integrating-calabash-with-existing-ios-app-in-xcode-issues/32066613#32066613", "title": "Integrating Calabash with existing iOS app in Xcode issues", "body": "<p>You can find a very simple example in one of the Calabash repos: <a href=\"https://github.com/calabash/ios-iphone-only-app\" rel=\"nofollow\">calabash/ios-iphone-only-app</a>.  The iPhone Only project has one target and that target links the calabash.framework.</p>\n\n<p>You can find a more advanced example in the Calabash iOS Smoke Test app which uses the Calabash dylibs.  Instructions can be found in <a href=\"https://github.com/calabash/ios-smoke-test-app/pull/17\" rel=\"nofollow\">this pull-request</a>.  The Calabash iOS Smoke Test project loads the calabash dylibs into the production target when the configuration is Debug.</p>\n"}], "owner": {"reputation": 9490, "user_id": 838902, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c60169b464a13ad872b767495e5b218?s=128&d=identicon&r=PG", "display_name": "DShah", "link": "https://stackoverflow.com/users/838902/dshah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 32066613, "answer_count": 2, "score": 0, "last_activity_date": 1439884255, "creation_date": 1439380747, "question_id": 31964595, "link": "https://stackoverflow.com/questions/31964595/integrating-calabash-with-existing-ios-app-in-xcode-issues", "title": "Integrating Calabash with existing iOS app in Xcode issues", "body": "<p>To setup Calabash-iOS I have followed below steps:</p>\n\n<ul>\n<li>Installing using command <code>gem install calabash-cucumber</code></li>\n<li>In project folder, I have executed <code>calabash-ios download</code></li>\n</ul>\n\n<p>I have followed links like: <a href=\"http://www.moncefbelyamani.com/ios-automated-testing-with-calabash-cucumber-ruby/\" rel=\"nofollow\">this</a> and <a href=\"https://github.com/calabash/calabash-ios\" rel=\"nofollow\">this</a>.</p>\n\n<p>Now, since I don't want different target for my application, I have followed <a href=\"http://fangmobile.com/2014/05/08/do-you-love-calabash-ios-but-hate-that-cal-second-target/\" rel=\"nofollow\">this link</a> which explains the steps to create different scheme for Calabash integration.</p>\n\n<p>I have changed all the Build Setting values like Other Linker Flags &amp; Framework Search Path.</p>\n\n<p>Finally, running the project doesn't start the server as described in their post. It <strong>seems</strong> that calabash framework is <strong>not loaded</strong>.</p>\n\n<p>Am I missing any thing that needs to be done in source code? How will calabash framework be loaded in project?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 1126, "user_id": 1062711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fad2444fce303057347404b993d15c15?s=128&d=identicon&r=PG", "display_name": "ex0ns", "link": "https://stackoverflow.com/users/1062711/ex0ns"}, "edited": false, "score": 1, "creation_date": 1439380029, "post_id": 31964212, "comment_id": 51835661, "body": "<code>Communication.all(:conditions =&gt; {:organisation_id =&gt; orgid.to_i })</code> gives you an array so you have an array of arrays, you should replace it with <code>Communication.where(organisation_id: orgid.to_i ).first</code>"}, {"owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "reply_to_user": {"reputation": 1126, "user_id": 1062711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fad2444fce303057347404b993d15c15?s=128&d=identicon&r=PG", "display_name": "ex0ns", "link": "https://stackoverflow.com/users/1062711/ex0ns"}, "edited": false, "score": 0, "creation_date": 1439380233, "post_id": 31964212, "comment_id": 51835795, "body": "This gives me (undefined method `where&#39; for #&lt;Class:0xb71293d4&gt;). Might be because this is an old rails 2 project. I was looking into old documentation and the code I&#39;m using now is what I found there."}], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "edited": false, "score": 0, "creation_date": 1439380605, "post_id": 31964413, "comment_id": 51836079, "body": "Won&#39;t the .first only give me the first result? I need all results matching."}, {"owner": {"reputation": 202, "user_id": 3432863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cf765e4c185fd7f3d2e56d21fb6742?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Tandel", "link": "https://stackoverflow.com/users/3432863/ankita-tandel"}, "reply_to_user": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "edited": false, "score": 1, "creation_date": 1439380728, "post_id": 31964413, "comment_id": 51836174, "body": "you need to replace first with all then"}], "tags": [], "owner": {"reputation": 202, "user_id": 3432863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cf765e4c185fd7f3d2e56d21fb6742?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Tandel", "link": "https://stackoverflow.com/users/3432863/ankita-tandel"}, "is_accepted": false, "score": 1, "last_activity_date": 1439380240, "creation_date": 1439380240, "answer_id": 31964413, "question_id": 31964212, "link": "https://stackoverflow.com/questions/31964212/undefined-method-for-array-when-exporting-to-excel/31964413#31964413", "title": "Undefined method for Array when exporting to excel", "body": "<p>Here you need a single Active Record. Using .all on model, you will get collection in array. So change your query like this</p>\n\n<pre><code>Communication.first(:conditions =&gt; [\"organisation_id =&gt; ?\", orgid.to_i])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1126, "user_id": 1062711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fad2444fce303057347404b993d15c15?s=128&d=identicon&r=PG", "display_name": "ex0ns", "link": "https://stackoverflow.com/users/1062711/ex0ns"}, "is_accepted": true, "score": 1, "last_activity_date": 1439380623, "creation_date": 1439380623, "answer_id": 31964546, "question_id": 31964212, "link": "https://stackoverflow.com/questions/31964212/undefined-method-for-array-when-exporting-to-excel/31964546#31964546", "title": "Undefined method for Array when exporting to excel", "body": "<p>You have a n+1 queries issue, with this code you're going execute as many queries as the number of organisation, you must avoid that, you should instead query the association in the query in the first place (the query for <code>@org_ids</code>) here is what I would do (you didn't give us this query so I will have to do some assumptions..):</p>\n\n<pre><code>@org = OrganisationContacts.all.includes(:communication)\n</code></pre>\n\n<p>You might now be able to to</p>\n\n<pre><code>&lt;% @org.each do |org| %&gt;\n  &lt;% @org.communication.each do |comm| %&gt;\n    &lt;%= comm.tel %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>If you want a more precise anwser, please give us the details of <code>OrganisationContacts</code> and your query for <code>@org_ids</code></p>\n"}], "owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 31964546, "answer_count": 2, "score": 0, "last_activity_date": 1439380623, "creation_date": 1439379697, "question_id": 31964212, "link": "https://stackoverflow.com/questions/31964212/undefined-method-for-array-when-exporting-to-excel", "title": "Undefined method for Array when exporting to excel", "body": "<p>I need to export some data in our database in an excel.</p>\n\n<p>A person can be linked to multiple organisations and I need to get the communication details of the organisations they are linked to.</p>\n\n<p>Currently I'm checking in my table OrganisationContacts which organisations are linked to which contact.</p>\n\n<p>That returns me an array of objects of the organisations that are linked to that person.</p>\n\n<p>Then I loop through those organisations and take the communication_id so I can find the correct communication details linked to that organisation.</p>\n\n<p>The last step is simply looping over the Array of Communication objects and taking the email for example.</p>\n\n<p>The last step is where it goes wrong. I keep getting (undefined method `tel' for #).</p>\n\n<p>When I inspect the element I get this in the excel file:\norgrow.inspect =></p>\n\n<pre><code>Communication id: 12048, tel: \"+32 2 552 60 00\", fax: \"+32 2 552 60 01\", gsm: \"\", email: \"kabinet.bourgeois@vlaanderen.be\", website: \"\", other: \"Kabinet van de minister-president van de Vlaamse re...\", created_at: nil, updated_at: \"2014-09-15 14:00:11\", contact_id: nil, organisation_id: 1564, organisationcontact_id: nil\n</code></pre>\n\n<p>So I should be able to get the .tel, right?</p>\n\n<p>The log makes me think I am doing the method on the array and not on the object itself but this should not be the case.</p>\n\n<p>This is my code currently:</p>\n\n<pre><code>&lt;% @org_row = [] %&gt;\n\n  &lt;ss:Cell&gt;&lt;ss:Data ss:Type=\"String\"&gt;\n\n    &lt;% @org_ids.each do |orgid| %&gt;\n      &lt;% if orgid.to_i &gt; 0 %&gt; &lt;% @org_row &lt;&lt; Communication.all(:conditions =&gt; {:organisation_id =&gt; orgid.to_i }) %&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n\n  &lt;% @org_row.each do |orgrow| %&gt;\n    &lt;%= orgrow.tel %&gt;\n  &lt;% end %&gt;\n&lt;/ss:Data&gt;&lt;/ss:Cell&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "queue", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "is_accepted": false, "score": 0, "last_activity_date": 1439387068, "creation_date": 1439387068, "answer_id": 31967048, "question_id": 31964025, "link": "https://stackoverflow.com/questions/31964025/how-to-move-sidekiq-redis-queue-to-another-server/31967048#31967048", "title": "How to move Sidekiq (Redis) queue to another server?", "body": "<p>You can copy your redis dump file as you said. It's not clear for me why you are excluding that option.</p>\n\n<p>Doing it manually (just create a ruby script for it), moving the scheduled tasks should be pretty easy. The only thing you have to do is moving the redis sets <code>retry</code> and <code>schedule</code></p>\n"}, {"comments": [{"owner": {"reputation": 2388, "user_id": 1113440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlgAB.jpg?s=128&g=1", "display_name": "Christoph Geschwind", "link": "https://stackoverflow.com/users/1113440/christoph-geschwind"}, "edited": false, "score": 0, "creation_date": 1596177303, "post_id": 31970224, "comment_id": 111733859, "body": "I had to make some changes to the above command and ended up with  <code>redis-cli -h source_host --raw dump schedule | head -c-1 | redis-cli -h dest_host -x restore schedule 0</code>"}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": false, "score": 2, "last_activity_date": 1439395237, "creation_date": 1439395237, "answer_id": 31970224, "question_id": 31964025, "link": "https://stackoverflow.com/questions/31964025/how-to-move-sidekiq-redis-queue-to-another-server/31970224#31970224", "title": "How to move Sidekiq (Redis) queue to another server?", "body": "<p>Use DUMP and RESTORE:</p>\n\n<pre><code>redis-cli -h source_host dump schedule | head -c-1 | redis-cli -h dest_host restore 0 schedule\n</code></pre>\n\n<p><a href=\"http://redis.io/commands/restore\" rel=\"nofollow\">http://redis.io/commands/restore</a></p>\n"}, {"tags": [], "owner": {"reputation": 650, "user_id": 904430, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2337ccc2c954f6fef01334ad81d58225?s=128&d=identicon&r=PG", "display_name": "Vitali", "link": "https://stackoverflow.com/users/904430/vitali"}, "is_accepted": true, "score": 0, "last_activity_date": 1440015558, "creation_date": 1440015558, "answer_id": 32104911, "question_id": 31964025, "link": "https://stackoverflow.com/questions/31964025/how-to-move-sidekiq-redis-queue-to-another-server/32104911#32104911", "title": "How to move Sidekiq (Redis) queue to another server?", "body": "<p>My main concern was I thought that I couldn't just copy redis database because path of my project changes but as it turned out, it wasn't an issue.</p>\n\n<p>Fastest way to replicate db for me was to first bind redis on old server to either it's IP or 0.0.0.0</p>\n\n<p>and then on new server run</p>\n\n<p><code>redis-cli slaveof OLD_SERVER_IP 6379</code></p>\n\n<p>and then when everything is copied (copying is done in matter of seconds), run</p>\n\n<p><code>redis-cli slaveof no one\n</code></p>\n\n<p>Tada. Your Redis db is fully replicated.</p>\n"}], "owner": {"reputation": 650, "user_id": 904430, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2337ccc2c954f6fef01334ad81d58225?s=128&d=identicon&r=PG", "display_name": "Vitali", "link": "https://stackoverflow.com/users/904430/vitali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1511, "favorite_count": 0, "accepted_answer_id": 32104911, "answer_count": 3, "score": 0, "last_activity_date": 1440015558, "creation_date": 1439379236, "question_id": 31964025, "link": "https://stackoverflow.com/questions/31964025/how-to-move-sidekiq-redis-queue-to-another-server", "title": "How to move Sidekiq (Redis) queue to another server?", "body": "<p>So we use Sidekiq as our queue managing system in our Rails application.\nWe also use Sidetiq to manage scheduled and recurring tasks.</p>\n\n<p>At the moment there is around 200-300 scheduled tasks that will run anytime from couple of minutes to 30 days.</p>\n\n<p>I would transfer just Redis database rdb file but due to some configuration changes, Rails project path has changed (hence tasks will not be able to run anymore)</p>\n\n<p>What would be a preferred way to transfer whole scheduled tasks queue to work with new project path and manually is not the case.</p>\n\n<ul>\n<li>Ruby 2.1.6</li>\n<li>Rails 3.2.22</li>\n<li>Sidekiq 3.4.2</li>\n<li>Redis 2.8.4</li>\n</ul>\n"}, {"tags": ["ruby", "logging"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1439380084, "post_id": 31963869, "comment_id": 51835701, "body": "What do you mean by unbuffered? Any time you write <code>logger.info</code> for example the output is immediately present in the logfile."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1439445291, "post_id": 31963869, "comment_id": 51866423, "body": "May I ask you, where this is documented? I didn&#39;t find in the docs any mention of the fact that Logger would set sync to true on its IO handle, but when I googled the topic, I found in various forums discussions mentioning that the Logger output would <i>not</i> be automatically flushed (however I didn&#39;t find there any useful solution to this problem either). Maybe I&#39;ll have to dig into the source code of Logger to get an authoritative answer...."}], "answers": [{"comments": [{"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1589025456, "post_id": 31988117, "comment_id": 109130566, "body": "I want both, <code>print logs in the terminal</code> and <code>create a log file</code> in the end. How can I do that?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1589034519, "post_id": 31988117, "comment_id": 109134078, "body": "@paul If you want to do both at the same time, it looks like here are a few solutions for that: <a href=\"https://stackoverflow.com/questions/6407141/how-can-i-have-ruby-logger-log-output-to-stdout-as-well-as-file\" title=\"how can i have ruby logger log output to stdout as well as file\">stackoverflow.com/questions/6407141/&hellip;</a>"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1439468485, "creation_date": 1439468485, "answer_id": 31988117, "question_id": 31963869, "link": "https://stackoverflow.com/questions/31963869/causing-the-ruby-logger-to-autoflush/31988117#31988117", "title": "Causing the Ruby Logger to autoflush", "body": "<p>You do not need to set <code>sync</code>. It's already set by <code>Logger</code> upon logfile creation:</p>\n\n<pre><code>def create_logfile(filename)\n  begin\n    logdev = open(filename, (File::WRONLY | File::APPEND | File::CREAT | File::EXCL))\n    logdev.flock(File::LOCK_EX)\n    logdev.sync = true\n    add_log_header(logdev)\n    logdev.flock(File::LOCK_UN)\n  rescue Errno::EEXIST\n    # file is created by another process\n    logdev = open_logfile(filename)\n    logdev.sync = true\n  end\n  logdev\nend\n</code></pre>\n\n<p>Source:<br>\n<a href=\"https://github.com/ruby/ruby/blob/trunk/lib/logger.rb\" rel=\"nofollow\">https://github.com/ruby/ruby/blob/trunk/lib/logger.rb</a></p>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "accepted_answer_id": 31988117, "answer_count": 1, "score": 2, "last_activity_date": 1439468485, "creation_date": 1439378810, "question_id": 31963869, "link": "https://stackoverflow.com/questions/31963869/causing-the-ruby-logger-to-autoflush", "title": "Causing the Ruby Logger to autoflush", "body": "<p>I am using the standard Ruby 2.2 Logger (i.e. not the Logger from Rails), and since I want to use it as rotating logger, I call it with shift_age and shift_time and pass to it a filename, not a open file handle, like this:</p>\n\n<pre><code>Logger.new('my_file.log', 4, 100_000)\n</code></pre>\n\n<p>I would like to make the output of this logger unbuffered, but I did not find any method in the Logger interface which would allow this.</p>\n\n<p>In the particular way I am using this logger (I am wrapping the Logger with my own class, which does customization), I have one central point in my code where each logging request is going through, so if I could get at the underlying IO object, I could do a sync at this point, but I also don't know how to find this IO object. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "time"], "comments": [{"owner": {"reputation": 1958, "user_id": 515991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/319b6176a2b56541cbf44182fd3987a1?s=128&d=identicon&r=PG&f=1", "display_name": "usmanali", "link": "https://stackoverflow.com/users/515991/usmanali"}, "edited": false, "score": 0, "creation_date": 1439378536, "post_id": 31963648, "comment_id": 51834698, "body": "<code>time_ago_in_words</code> is probably what you are looking for <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_ago_in_words\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 1126, "user_id": 1062711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fad2444fce303057347404b993d15c15?s=128&d=identicon&r=PG", "display_name": "ex0ns", "link": "https://stackoverflow.com/users/1062711/ex0ns"}, "edited": false, "score": 0, "creation_date": 1439378609, "post_id": 31963648, "comment_id": 51834744, "body": "You might want to take a look at <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words\" rel=\"nofollow noreferrer\">distance_of_time_in_words</a> it seems to do exactly what you need"}], "answers": [{"tags": [], "owner": {"reputation": 206, "user_id": 4384401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02df440328950c2ca558543c61d346a0?s=128&d=identicon&r=PG&f=1", "display_name": "Sudarshan Dhokale", "link": "https://stackoverflow.com/users/4384401/sudarshan-dhokale"}, "is_accepted": true, "score": 1, "last_activity_date": 1439379063, "last_edit_date": 1439379063, "creation_date": 1439378662, "answer_id": 31963823, "question_id": 31963648, "link": "https://stackoverflow.com/questions/31963648/ruby-subtract-two-dates-to-get-updated-at/31963823#31963823", "title": "Ruby: subtract two dates to get Updated at", "body": "<p>try this in view</p>\n\n<pre><code>&lt;%= time_ago_in_words(@post.updated_at) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 1, "last_activity_date": 1439378790, "creation_date": 1439378790, "answer_id": 31963866, "question_id": 31963648, "link": "https://stackoverflow.com/questions/31963648/ruby-subtract-two-dates-to-get-updated-at/31963866#31963866", "title": "Ruby: subtract two dates to get Updated at", "body": "<p>check at <a href=\"http://apidock.com/rails/ActionView/Helpers/DateHelper/distance_of_time_in_words\" rel=\"nofollow\">time_ago_in_words</a> method or <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html\" rel=\"nofollow\">distance_of_time_in_words</a></p>\n"}], "owner": {"reputation": 846, "user_id": 5091531, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-7TKGbdvQH1s/AAAAAAAAAAI/AAAAAAAABv0/39zna4pfTqs/photo.jpg?sz=128", "display_name": "Pabi", "link": "https://stackoverflow.com/users/5091531/pabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 31963823, "answer_count": 2, "score": 0, "last_activity_date": 1439379063, "creation_date": 1439378224, "question_id": 31963648, "link": "https://stackoverflow.com/questions/31963648/ruby-subtract-two-dates-to-get-updated-at", "title": "Ruby: subtract two dates to get Updated at", "body": "<p>I am looking for a way to subtract two dates. I am not sure if a regular <code>-</code> would work for this. Asuming that works I still need it to show <code>Updated 5s ago</code> and not <code>0h0m5s ago</code> if the post was updated 5s ago. The same goes for <code>Updated 3min ago</code>, I do not want it to show the seconds nor the hours.</p>\n\n<p>So I need the updated at to be as precise as the least precise time unit that is not equal to 0.</p>\n\n<ul>\n<li><p>If post was updated less than 1 sec ago show now</p></li>\n<li><p>If post was updated &lt; 1 min ago, but > 1 sec ago have format #s</p></li>\n<li><p>If post was updated &lt; 1 hour ago, but > 1 min ago have format #m</p></li>\n<li><p>If post was updated &lt; 1 day ago, but > 1 hour ago have format #h</p></li>\n<li><p>If post was updated &lt; 1 month ago, but > 1 day ago have format #d</p></li>\n<li><p>If post was updated &lt; 1 year ago, but > 1 month ago have format #m</p></li>\n<li><p>If post was updated > 1 year ago have format #y</p></li>\n</ul>\n\n<p>Please let me know if I wasn't clear enough.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1439381139, "post_id": 31963402, "comment_id": 51836427, "body": "I would recommend setting up a counter cache for &quot;microposts_count&quot; in the User model. That way you don&#39;t need to query the DB so many times. And you if don&#39;t do that, at least eager load them. User.includes(:microposts)"}], "answers": [{"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1439378309, "post_id": 31963556, "comment_id": 51834534, "body": "Be wary of the number of queries with this approach."}, {"owner": {"reputation": 37, "user_id": 4357927, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-_axLKmdrzPw/AAAAAAAAAAI/AAAAAAAAAFo/WO3VQHf0JxA/photo.jpg?sz=128", "display_name": "Farhan Haider", "link": "https://stackoverflow.com/users/4357927/farhan-haider"}, "edited": false, "score": 0, "creation_date": 1439378663, "post_id": 31963556, "comment_id": 51834778, "body": "And what to do if I have to get content of a micropost like this user.microposts.content?"}, {"owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "reply_to_user": {"reputation": 37, "user_id": 4357927, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-_axLKmdrzPw/AAAAAAAAAAI/AAAAAAAAAFo/WO3VQHf0JxA/photo.jpg?sz=128", "display_name": "Farhan Haider", "link": "https://stackoverflow.com/users/4357927/farhan-haider"}, "edited": false, "score": 0, "creation_date": 1439379049, "post_id": 31963556, "comment_id": 51835035, "body": "@FarhanHaider <code>microposts</code> it&#39;s a collection, nil? it&#39;s the same as empty?. ROWCOUNT == 0"}], "tags": [], "owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "is_accepted": true, "score": 1, "last_activity_date": 1439379064, "last_edit_date": 1439379064, "creation_date": 1439377960, "answer_id": 31963556, "question_id": 31963402, "link": "https://stackoverflow.com/questions/31963402/display-an-icon-if-a-user-has-posted-something/31963556#31963556", "title": "Display an icon if a user has posted something", "body": "<p>In <code>index</code> view:</p>\n\n<pre><code>&lt;div id=\"users\"&gt;\n&lt;% @users.each do |user| %&gt;\n  &lt;div id=\"user-&lt;%= user.id %&gt;\"&gt;\n    &lt;%= user.name %&gt;\n    &lt;%= image_tag user.image if user.microposts %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "is_accepted": false, "score": 1, "last_activity_date": 1439384866, "last_edit_date": 1439384866, "creation_date": 1439381535, "answer_id": 31964874, "question_id": 31963402, "link": "https://stackoverflow.com/questions/31963402/display-an-icon-if-a-user-has-posted-something/31964874#31964874", "title": "Display an icon if a user has posted something", "body": "<p>As @DaveNewton pointed out, with the approach posted/accepted, you can have an unlimited number of DB hits. I would recommend setting up a counter_cache.</p>\n\n<pre><code># migration\ndef up\n  add_column :users, :microposts_count, :integer\n\n  User.includes(:microposts).find_each do |user|\n    user.update_column(:microposts_count, user.microposts.size)\n  end\n\ndef down\n  remove_column :users, :microposts_count\nend\n\n# micropost.rb\nbelongs_to :user, counter_cache: true\n\n# index.html\n&lt;% @users.each do |user| %&gt;\n  &lt;div id=\"user-&lt;%= user.id %&gt;\"&gt;\n    &lt;%= user.name %&gt;\n    &lt;%= image_tag user.image if user.microposts_count &gt; 0 %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<blockquote>\n  <p>While the already accepted answer <em>does</em> achieve the desired result, for large applications where performance is key, I would not recommend it.</p>\n</blockquote>\n"}], "owner": {"reputation": 37, "user_id": 4357927, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-_axLKmdrzPw/AAAAAAAAAAI/AAAAAAAAAFo/WO3VQHf0JxA/photo.jpg?sz=128", "display_name": "Farhan Haider", "link": "https://stackoverflow.com/users/4357927/farhan-haider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 31963556, "answer_count": 2, "score": 0, "last_activity_date": 1439384866, "creation_date": 1439377549, "last_edit_date": 1439377971, "question_id": 31963402, "link": "https://stackoverflow.com/questions/31963402/display-an-icon-if-a-user-has-posted-something", "title": "Display an icon if a user has posted something", "body": "<p>I'm trying to show an icon with the names of users if they have posted something. I want to do this in the index action. Is there a way to access microposts of a user from index?</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :microposts\nend\n\nclass Micropost &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>User Controller: </p>\n\n<pre><code>def index\n  @users = User.all\nend\n\ndef show\n  @user  = User.find(params[:id])\n  @posts = @user.microposts\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "edited": false, "score": 1, "creation_date": 1439403619, "post_id": 31970123, "comment_id": 51852172, "body": "looks suspiciously simple"}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 13, "last_activity_date": 1439394930, "creation_date": 1439394930, "answer_id": 31970123, "question_id": 31963202, "link": "https://stackoverflow.com/questions/31963202/reschedule-a-sidekiq-job-from-within-perform/31970123#31970123", "title": "reschedule a sidekiq job from within perform", "body": "<pre><code>def perform\n  if is_it_summer_yet?\n    Bear.wake_em_up\n  else\n    self.class.perform_in(1.hour)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1107, "user_id": 2434464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Q3hER.jpg?s=128&g=1", "display_name": "yozzz", "link": "https://stackoverflow.com/users/2434464/yozzz"}, "edited": false, "score": 1, "creation_date": 1528478441, "post_id": 46731588, "comment_id": 88538759, "body": "what problems did you get?"}, {"owner": {"reputation": 493, "user_id": 1086863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ee5fa90f5eaeef62553629382497f7?s=128&d=identicon&r=PG", "display_name": "Leslie Viljoen", "link": "https://stackoverflow.com/users/1086863/leslie-viljoen"}, "edited": false, "score": 0, "creation_date": 1591933005, "post_id": 46731588, "comment_id": 110248821, "body": "I would imagine a fork bomb."}], "tags": [], "owner": {"reputation": 949, "user_id": 1644018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ef88c157b4053d9c5171b1d2f18ac2?s=128&d=identicon&r=PG", "display_name": "user1644018", "link": "https://stackoverflow.com/users/1644018/user1644018"}, "is_accepted": false, "score": 0, "last_activity_date": 1507902921, "creation_date": 1507902921, "answer_id": 46731588, "question_id": 31963202, "link": "https://stackoverflow.com/questions/31963202/reschedule-a-sidekiq-job-from-within-perform/46731588#46731588", "title": "reschedule a sidekiq job from within perform", "body": "<p>CAUSION!  remember <strong>return</strong>  after <em>self.class.perform_in()</em> </p>\n\n<p>I got serious problem in production env.</p>\n"}], "owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1430, "favorite_count": 1, "accepted_answer_id": 31970123, "answer_count": 2, "score": 4, "last_activity_date": 1507902921, "creation_date": 1439376960, "question_id": 31963202, "link": "https://stackoverflow.com/questions/31963202/reschedule-a-sidekiq-job-from-within-perform", "title": "reschedule a sidekiq job from within perform", "body": "<p>Is there a way to check a condition inside <code>perform</code> in a Sidekiq worker, and to reschedule the job in a different time (and stop executing the job)?</p>\n\n<pre><code>def perform\n\n if is_it_summer_yet?\n   Bear.wake_em_up\n else\n   # reschedule to perform in a few hours\n end\n\nend\n</code></pre>\n\n<p>this is a simple example, but in my use case there are a lot of calculations and network calls for that condition, so I can't do it externally</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance", "activerecord"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1439376969, "post_id": 31963152, "comment_id": 51833631, "body": "Using <code>STI</code>,,, read it"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1439377343, "post_id": 31963152, "comment_id": 51833900, "body": "@ArupRakshit: STI won&#39;t help here. It seems to me that &quot;product item&quot; is very different from &quot;product&quot;. Sharing functionality should be done another way, not through inheritance (mixins, perhaps)"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1439377471, "post_id": 31963152, "comment_id": 51833982, "body": "@SergioTulentsev that&#39;s true."}, {"owner": {"reputation": 1126, "user_id": 1062711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fad2444fce303057347404b993d15c15?s=128&d=identicon&r=PG", "display_name": "ex0ns", "link": "https://stackoverflow.com/users/1062711/ex0ns"}, "edited": false, "score": 1, "creation_date": 1439377501, "post_id": 31963152, "comment_id": 51834002, "body": "I don&#39;t konw if that&#39;s what you want, but you could use a <code>Single Table Inheritance</code> as in <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Inheritance.html\" rel=\"nofollow noreferrer\">here</a> you only need to remove the <code>belongs_to</code> in <code>ProductItem</code>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1439378490, "post_id": 31963685, "comment_id": 51834664, "body": "Why, but one of purposes of inheritance <b>IS</b> sharing of functionality. :) Just not very applicable here, but it&#39;s a valid approach."}, {"owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1439381810, "post_id": 31963685, "comment_id": 51836893, "body": "Mhhh, I&#39;ve always been highly suggested to use composition/mixins if available when you need to share some code"}], "tags": [], "owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "is_accepted": true, "score": 2, "last_activity_date": 1439378721, "last_edit_date": 1439378721, "creation_date": 1439378328, "answer_id": 31963685, "question_id": 31963152, "link": "https://stackoverflow.com/questions/31963152/class-inheritance-in-rails-active-record/31963685#31963685", "title": "Class inheritance in rails active record", "body": "<p>Class inheritance <strong>it's not for code sharing</strong>, you should rely on mixins for such a thing. Create a module like this, you can put it in <code>app/shared/yourmodule.rb</code>:</p>\n\n<pre><code>module Yourmodule\n\n  def dosomething\n  end\n\nend\n\nclass Product\n  include Yourmodule\nend\n\nclass ProductItem\n  include Yourmodule\nend\n\nProduct.new.dosomething\nProductItem.new.dosomething\n</code></pre>\n\n<p>You can share attributes through STI though, but STI is recommended only if you share <strong>all parent attributes plus a few additional fields</strong>, be careful with it.</p>\n\n<p>STI is simple: add (if you don't have it already) a <code>type</code> column to the table you want to inherit from, make it a string and don't set any default and leave it nullable. Now you can just do:</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\nend\n\nclass ProductItem &lt; Product\nend\n</code></pre>\n\n<p>You'll be able to access anything from Product</p>\n"}], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 31963685, "answer_count": 1, "score": 1, "last_activity_date": 1439378721, "creation_date": 1439376860, "question_id": 31963152, "link": "https://stackoverflow.com/questions/31963152/class-inheritance-in-rails-active-record", "title": "Class inheritance in rails active record", "body": "<p>I have a Product table, which has multiple fields like product price, product manufacturer and so on which is common in every item. So I have made a belongs_to relationship with productItem. Every product item has its own specifications. Now I feel the necessity to make few common methods. From the concept of OOP, I have tried to make Parent class Sub class model, where subclass will inherit all the methods of parent. So I have tried doing following:</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  def check\n    ...\n  end\nend\n\nclass ProductItem &lt; Product\n  belongs_to :product\nend\n</code></pre>\n\n<p>which raises following error:</p>\n\n<pre><code>undefined method `some_field_id' for #&lt;ProductItem:0x007f8cac666850&gt;\n</code></pre>\n\n<p>So how can I do parent subclass model in rails?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "edited": false, "score": 0, "creation_date": 1439449760, "post_id": 31962860, "comment_id": 51868754, "body": "Please read the Qn carefully. I specified here how to create a &#39;Migration File&#39; not &#39;Migration&#39;, and someone down voted my answer"}], "answers": [{"tags": [], "owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "is_accepted": true, "score": -2, "last_activity_date": 1616437760, "last_edit_date": 1616437760, "creation_date": 1439384423, "answer_id": 31966002, "question_id": 31962860, "link": "https://stackoverflow.com/questions/31962860/how-to-create-a-migration-file-dynamically-in-rails-4-0/31966002#31966002", "title": "How to create a migration file dynamically in rails 4.0", "body": "<p>Yes, I found a way to adding a migration file from lib. I created a method for this. The following code snippet shows the methods we use and gives a better idea to create migration file dynamically.</p>\n<pre><code> def create_columns(tb_with_cols)\n    add_columns = &quot;&quot;\n    tb_name = tb_with_cols.keys.first\n    columns = tb_with_cols.values.first\n    columns.each { |c_name, c_type| add_columns &lt;&lt; &quot;\\tadd_column(':#{tb_name}', :#{c_name}, :#{c_type})\\n&quot; }\n\n    add_columns\n end\n\n def migration_file_content(tb_with_cols)\n   cols = create_columns(tb_with_cols)\n&lt;&lt;-RUBY\n  class AddMissingColumnsToTable &lt; ActiveRecord::Migration\n     def change_table\n    #{cols}\n   end\n end\n  RUBY\n end\n\n\n def write_content_to_file(path, content)\n    File.open(path, 'w+') do |f|\n      f.write(content)\n    end\n end\n</code></pre>\n<p>Just call the method <code>migration_file_content</code> in your code. Pass the parameter <code>tb_with_cols</code> as a Hash, in which the key is the <code>table_name</code> and value is the <code>columns</code> that should be added to that table. Ex:</p>\n<pre><code>tb_with_cols = {:users =&gt; {:name =&gt; :string, :age =&gt; :integer, :address =&gt; :text} }\ncontent = migration_file_content(tb_with_cols)\nwrite_content_to_file(&quot;#{Rails.root}/db/migrations/', content)\n</code></pre>\n<p>After that call the method <code>write_content_to_file</code> with your new migration file path and the content from our <code>migration_file_content</code> method.</p>\n"}], "owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 31966002, "answer_count": 1, "score": 0, "last_activity_date": 1616437760, "creation_date": 1439376060, "question_id": 31962860, "link": "https://stackoverflow.com/questions/31962860/how-to-create-a-migration-file-dynamically-in-rails-4-0", "title": "How to create a migration file dynamically in rails 4.0", "body": "<p>How to create a migration file dynamically in rails 4.0?</p>\n\n<p>I want to add some columns to different tables dynamically via my lib file.\nHow can I add and execute it from a lib file?</p>\n"}, {"tags": ["javascript", "ruby", "base64", "html2canvas"], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 2236497, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/735394114586fe2ec1682635a5000e58?s=128&d=identicon&r=PG", "display_name": "user2236497", "link": "https://stackoverflow.com/users/2236497/user2236497"}, "edited": false, "score": 0, "creation_date": 1439381235, "post_id": 31963590, "comment_id": 51836489, "body": "Thanks  for the reply. I&#39;m getting this error though  &quot;NameError (uninitialized constant SvgController::Svg):&quot; Any idea what it means, or what I&#39;m missing?"}], "tags": [], "owner": {"reputation": 1126, "user_id": 1062711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fad2444fce303057347404b993d15c15?s=128&d=identicon&r=PG", "display_name": "ex0ns", "link": "https://stackoverflow.com/users/1062711/ex0ns"}, "is_accepted": false, "score": 1, "last_activity_date": 1439378049, "creation_date": 1439378049, "answer_id": 31963590, "question_id": 31962835, "link": "https://stackoverflow.com/questions/31962835/render-base64-image-from-dataurl-in-ruby-and-send-back-image/31963590#31963590", "title": "Render base64 image from dataURL in Ruby and send back image", "body": "<p>You indeed need another Action to receive the request from the Javascript, add this to your route:</p>\n\n<pre><code>match \"/svg/create\", :to =&gt; 'svg#show'\n</code></pre>\n\n<p>I'm not really sure of what <code>#{strDataURI}</code> really is, but it must be the encoded canvas in base64, the decode only occurs on the show action, so the only thing you have to do in create is check that the parameters <code>svg</code> is given, a create a new record with it:</p>\n\n<pre><code> def create\n   return if not params[:svg]\n   svg = Svg.create(content: params[:svg])\n   render :json =&gt; svg\n  end\n</code></pre>\n\n<p>I don't know if there are other field in your SVG model, if not, this code might work !</p>\n"}], "owner": {"reputation": 263, "user_id": 2236497, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/735394114586fe2ec1682635a5000e58?s=128&d=identicon&r=PG", "display_name": "user2236497", "link": "https://stackoverflow.com/users/2236497/user2236497"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439378049, "creation_date": 1439376004, "question_id": 31962835, "link": "https://stackoverflow.com/questions/31962835/render-base64-image-from-dataurl-in-ruby-and-send-back-image", "title": "Render base64 image from dataURL in Ruby and send back image", "body": "<p>So I'm really new to Ruby but I want to get something similar working to this tutorial where I pass over a canvas as a base64 encoded image and it sends back a png to download. </p>\n\n<p><a href=\"http://www.intridea.com/blog/2013/1/9/downloadable-svg-in-png-format\" rel=\"nofollow\">http://www.intridea.com/blog/2013/1/9/downloadable-svg-in-png-format</a></p>\n\n<p>I need to do this for IE9 support but I can't get the code example from the above tutorial to work and I don't know enough about Ruby to figure it out.</p>\n\n<p>Here's the front end javascript.</p>\n\n<pre><code>pushToServer: ()-&gt;\n  html2canvas([$(\".hidden_container\")[0]],{\n    onrendered: (canvas)=&gt;\n      strDataURI = canvas.toDataURL()\n      @temp_container.children().remove()\n      @temp_container.hide()\n\n  $.ajax\n    url: '/svg/create'\n    data: {svg: \"#{strDataURI}\"}\n    dataType: 'json'\n    type: 'POST'\n    success: (response, status, xhr) =&gt;\n      window.location.href = \"/downloadable/\" + response.id + '.png'\n    error: (response, status)=&gt;\n      console.log response\n})\n</code></pre>\n\n<p>and the ruby code </p>\n\n<pre><code># routes.rb\n  match \"downloadable/:id(.:format)\", :to =&gt; 'svg#show'\n\n# svg_controller.rb\nclass SvgController &lt; ApplicationController\n  require \"base64\"\n\n  def show\n    @svg = Svg.where(id: params[:id]).first\n    respond_to do |format|\n      format.png {\n        headers['Content-type'] = 'image/png'\n        headers[\"Content-Disposition\"] = \"attachment; filename=\\\"chart.png\\\"\"\n        @result = Base64.decode64(@svg.content.gsub('data:image/png;base64,', ''))\n        render :text =&gt; @result\n      }\n    end\n  end\nend\n</code></pre>\n\n<p>To me it looks as if I need a ruby route to route the initial post request from /svg/create to somewhere but I don't really know how to do it.</p>\n\n<p>Any help is appreciated.\nThanks.</p>\n"}, {"tags": ["ruby", "windows", "svn", "command-line", "tortoisesvn"], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 6, "last_activity_date": 1439908917, "last_edit_date": 1439908917, "creation_date": 1439870345, "answer_id": 32063303, "question_id": 31962364, "link": "https://stackoverflow.com/questions/31962364/run-tortoise-svn-command-line-commands-with-a-hidden-window/32063303#32063303", "title": "Run Tortoise SVN command line commands with a hidden window", "body": "<p><a href=\"http://tech.natemurray.com/2007/03/ruby-shell-commands.html\" rel=\"nofollow noreferrer\">Ruby has numerous way of executing command in shell</a>, however, with all the options a command line popup seem to appear when using in GUI App.</p>\n\n<p>Depending on what details you are looking for in <code>svn info</code>, one option you can use something like <a href=\"http://www.websvn.info/features/\" rel=\"nofollow noreferrer\">WebSVN</a> and see if you can want to scrape the GUI or get data from its RSS feed.  <a href=\"http://demo.websvn.info/listing.php?repname=WebSVN\" rel=\"nofollow noreferrer\">Take a look at demo site of this product</a>.</p>\n\n<p>If you have very specific and minimal needs, then, you can also choose to build a small REST API which can query the subversion server using command line.  You can in that case call that REST API to fetch the data and avoid popping up of <code>command</code> windows.</p>\n\n<p>If you are really short on time or do not have server infrastructure to host REST API, then, you can think of creating a Ruby App that runs a socket server and can run the shell command on receiving commands from client. Then, you can make your GUI App connect to the socket server using socket client and ask the server app to execute <code>svn info</code> and return result.  <a href=\"http://www.tutorialspoint.com/ruby/ruby_socket_programming.htm\" rel=\"nofollow noreferrer\">Go through the tutorial on building such interacting apps</a>. You can then choose to run them side-by-side on same PC.</p>\n\n<p>Another alternative is to use <a href=\"https://alistairisrael.wordpress.com/2007/09/19/using-the-subversion-ruby-bindings/\" rel=\"nofollow noreferrer\">Ruby SVN bindings</a>. It may require some <a href=\"https://thewebfellas.com/blog/ruby-subversion-bindings\" rel=\"nofollow noreferrer\">digging around</a> to get this to work.</p>\n\n<p>Here is quick starter code:</p>\n\n<p><strong>server.rb</strong> - a ruby TCP server that accepts commands and executes them in shell</p>\n\n<pre><code>require 'socket'\n\nserver = TCPServer.open(2000)   # Socket to listen on port 2000\nputs \"Listening now #{server.addr}\"\nloop {\n  Thread.start(server.accept) do |client|\n    cmd = client.gets\n\n    puts \"Processing #{cmd} from #{client.peeraddr}\"\n\n    IO.popen(cmd) { |s| result = []; \n        while (line = s.gets) do \n            client.puts line.chop \n        end; \n    }\n\n    client.close\n  end\n}\n</code></pre>\n\n<p><strong>app.rb</strong> A <a href=\"http://shoesrb.com/\" rel=\"nofollow noreferrer\">Shoes GUI app</a> that issues <code>svn info</code> command to TCP server being run by <code>server.rb</code></p>\n\n<p>require 'socket'</p>\n\n<pre><code>Shoes.app {\n\n    stack do \n        @push = button \"Get SVN Info\"\n        @note = para \"\"\n    end\n\n    @push.click {\n\n        hostname = 'localhost'\n        port = 2000\n\n        result  = []\n        s = TCPSocket.open(hostname, port)\n        s.puts \"svn info trunk/backend\"\n\n        while line = s.gets \n          result &lt;&lt; line.chop\n        end\n        s.close\n\n        @note.replace result.join(\"\\n\")\n    }\n}\n</code></pre>\n\n<p><code>app.rb</code> should be launched using <code>shoes app.rb</code> command.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bCApF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bCApF.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/WCNne.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WCNne.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1440005592, "post_id": 32082529, "comment_id": 52098434, "body": "FYI : <code>cmd.exe &#47;C dir</code> still launches cmd window, it blinks like OP said.  <code>start &#47;min</code> launches a command window, it still blinks once, but now it stays open in minimized form, and the GUI app becomes unresponsive."}, {"owner": {"reputation": 1670, "user_id": 1392229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/083edb871ee8732be160ca6930f8b7ef?s=128&d=identicon&r=PG", "display_name": "Dawid Gos\u0142awski", "link": "https://stackoverflow.com/users/1392229/dawid-gos%c5%82awski"}, "edited": false, "score": 0, "creation_date": 1440241462, "post_id": 32082529, "comment_id": 52198897, "body": "I have to save this somewhere - thanks :) With Python it&#39;s very easy (3 lines, very well documented) but Ruby does not have any options to manipulate DW flags from spawn."}], "tags": [], "owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "is_accepted": false, "score": 5, "last_activity_date": 1442911969, "last_edit_date": 1490005097, "creation_date": 1439931926, "answer_id": 32082529, "question_id": 31962364, "link": "https://stackoverflow.com/questions/31962364/run-tortoise-svn-command-line-commands-with-a-hidden-window/32082529#32082529", "title": "Run Tortoise SVN command line commands with a hidden window", "body": "<p>This behavior is not specific to Ruby but to the Windows command-line interpreter. There are several ways to work around it.</p>\n\n<ul>\n<li>Try running the <code>svn</code> command prefixed by <code>cmd.exe /C</code> which should not flash the command prompt window. A variation of that is to use <code>start /min</code> as a prefix instead. This doesn't work under all circumstances and I don't have a Ruby on Windows handy to check.</li>\n<li>Create a <code>.vbs</code> wrapper for your command. Since <code>.vbs</code> is not handled by the command-line interpreter, its window will not be created. See \"<a href=\"https://superuser.com/questions/140047/how-to-run-a-batch-file-without-launching-a-command-window\">How to run a batch file without launching a 'command window'?</a>\" for details.</li>\n<li><p>The best option is to use a WinAPI wrapper gem to get access to <code>ShellExecute</code> function which is pretty flexible: </p>\n\n<pre><code>require 'win32ole'\n\n# Create an instance of the Windows Shell object...\n\nshell = WIN32OLE.new('Shell.Application')\n\n# The shell object's ShellExecute method performs a specified operation on a specified file. The syntax is...\n\nshell.ShellExecute(FILE, ARGUMENTS, DIRECTORY, OPERATION, SHOW)\n</code></pre>\n\n<p>This example is taken from \"<a href=\"http://rubyonwindows.blogspot.ru/2007/05/launching-apps-and-printing-docs-with.html\" rel=\"nofollow noreferrer\">Launching Apps and Printing Docs with the Windows Shell</a>\" where you can find more details.</p>\n\n<p>For your purpose it would be something like</p>\n\n<pre><code>shell.ShellExecute('svn.exe', 'info', path_to_repository, 'open', 0)\n</code></pre></li>\n</ul>\n\n<p>Learn more about <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>ShellExecute</code></a> usage.</p>\n"}], "owner": {"reputation": 420, "user_id": 1731237, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7ad0b72e2b54b432ae6f4e72c02fc33f?s=128&d=identicon&r=PG", "display_name": "Supersonic", "link": "https://stackoverflow.com/users/1731237/supersonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1427, "favorite_count": 0, "accepted_answer_id": 32063303, "answer_count": 2, "score": 3, "last_activity_date": 1442911969, "creation_date": 1439374723, "last_edit_date": 1442880524, "question_id": 31962364, "link": "https://stackoverflow.com/questions/31962364/run-tortoise-svn-command-line-commands-with-a-hidden-window", "title": "Run Tortoise SVN command line commands with a hidden window", "body": "<p>I have Tortoise SVN with a command-line interface installed. The installation path is <code>C:\\Program Files\\TortoiseSVN\\bin</code> where <code>svn.exe</code> is used whenever I use any SVN command. </p>\n\n<p>I developed a Ruby Windows application which is run as a background process. This application runs the command like</p>\n\n<pre><code>svn info \"#{path_to_repository}\"\n</code></pre>\n\n<p>This command invokes <code>svn.exe</code> as I mentioned. </p>\n\n<p>The problem is, <code>svn.exe</code> flashes a command prompt for a second and terminates, thus if I run <code>svn info</code> ten times for ten different repositories then the screen flickers ten times as this command is developed to run in a timely fashion, the screen flickers ten times regularly. </p>\n\n<p>What I need is a way to run SVN commands through Tortoise SVN without the <code>svn.exe</code> popping up the screen and closing. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1439374173, "post_id": 31961998, "comment_id": 51831812, "body": "Take a look at <a href=\"http://liquidmarkup.org\" rel=\"nofollow noreferrer\">liquidmarkup.org</a>"}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1439374359, "post_id": 31961998, "comment_id": 51831925, "body": "i know about liquid and read the code of the parser.rb. can&#39;t really figure it out how they do it. looks like they wrote an own function comparable to eval. maybe you have a deeper inisght. btw: cheers out of walle :-)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1439374985, "post_id": 31961998, "comment_id": 51832334, "body": "I wanted to suggest that you just <i>use</i> Liquid in your project, not re-implement it yourself ;-)"}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1439375347, "post_id": 31961998, "comment_id": 51832585, "body": "that was &quot;obvious&quot;. and obvious i already tried it Liquid::Template.parse(&quot;Hallo {{@game.name}}&quot;).render is returning &quot;Hallo &quot;. maybe i get the point wrong of how to use liquid."}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1439375855, "post_id": 31962406, "comment_id": 51832907, "body": "any ideas for doing it with local variables? i.e string = &quot;Hallo {{player}}&quot;? fortunately we shouldnt have those inside of a yml file, but you never know..."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1439378031, "post_id": 31962406, "comment_id": 51834364, "body": "<code>Binding#local_variable_get</code>"}], "tags": [], "owner": {"reputation": 1305, "user_id": 623919, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d2113d86e7a9b16e8cac6956096bf0?s=128&d=identicon&r=PG", "display_name": "Axel Tetzlaff", "link": "https://stackoverflow.com/users/623919/axel-tetzlaff"}, "is_accepted": true, "score": 2, "last_activity_date": 1439378437, "last_edit_date": 1439378437, "creation_date": 1439374828, "answer_id": 31962406, "question_id": 31961998, "link": "https://stackoverflow.com/questions/31961998/how-can-i-avoid-eval-in-this-situation/31962406#31962406", "title": "how can i avoid eval in this situation", "body": "<p>You can use send instead of eval:</p>\n\n<pre><code>content = var.split('.').inject(nil){|clazz, method| clazz.nil? ? instance_variable_get(method) : clazz.send(method)}\ntitle.gsub! replace, content\n</code></pre>\n"}], "owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 1, "accepted_answer_id": 31962406, "answer_count": 1, "score": 0, "last_activity_date": 1439392974, "creation_date": 1439373744, "last_edit_date": 1439392974, "question_id": 31961998, "link": "https://stackoverflow.com/questions/31961998/how-can-i-avoid-eval-in-this-situation", "title": "how can i avoid eval in this situation", "body": "<p>Writing a title_tag helper, i want to have the following yml file structure</p>\n\n<pre><code>index: Hello {{@game.name}}\nedit: Edit {{@game.name}} - {{@game.classification}}\n</code></pre>\n\n<p>by then i take the I18n translation string and need to replace {{var}} with actual context.</p>\n\n<pre><code>title = I18n.t \"title_tags.#{namespace}.#{controller_name}.#{action_name}\", default: \"\"\n\ntitle.scan(/\\{\\{.*?\\}\\}/).each do |replace|\n  # transform {{@game.name}} =&gt; @game.name\n  var = replace.gsub(/\\{|\\}/, \"\")\n  title.gsub! replace, eval(var)\nend      \n</code></pre>\n\n<p>this is working pretty sweet. on the other side, there is a possibility that a user might upload some game <strong>with a name \"system(rm -rf /*)\"</strong> which might cause some real danger for us ?</p>\n\n<p>are there any possibilities to get this running in a safer way?</p>\n\n<h2>Edit</h2>\n\n<p>Thanks to Axel i could end with this cool stuff</p>\n\n<pre><code> title.scan(/\\{\\{.*?\\}\\}/).each do |replace|\n    var = replace.gsub(/\\{|\\}/, \"\")                        \n\n    # catch \"resource\" (like resource-controller)\n    if var.starts_with? \"resource\"\n      @tempresource = resource\n      var.gsub!(\"resource\", \"@tempresource\")\n    end\n\n    # @game or @game.name\n    if var.starts_with?(\"@\")          \n      content = var.split('.').inject(nil){|clazz, method| clazz.nil? ? instance_variable_get(method) : clazz.send(method)}\n      title.gsub! replace, content\n    end\n  end\n</code></pre>\n\n<p>working brilliant!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "sidekiq", "sidetiq"], "answers": [{"comments": [{"owner": {"reputation": 650, "user_id": 904430, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2337ccc2c954f6fef01334ad81d58225?s=128&d=identicon&r=PG", "display_name": "Vitali", "link": "https://stackoverflow.com/users/904430/vitali"}, "edited": false, "score": 0, "creation_date": 1454935669, "post_id": 35142361, "comment_id": 58251217, "body": "Unfortunately this applies to all Sidekiq tasks. I am interested on how to prevent scheduled (sidetiq) tasks from starting in development environment."}], "tags": [], "owner": {"reputation": 562, "user_id": 5795974, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208354073946303/picture?type=large", "display_name": "Jonas Meinerz", "link": "https://stackoverflow.com/users/5795974/jonas-meinerz"}, "is_accepted": false, "score": 0, "last_activity_date": 1454369032, "creation_date": 1454369032, "answer_id": 35142361, "question_id": 31961751, "link": "https://stackoverflow.com/questions/31961751/how-to-make-sidetiq-tasks-to-run-only-in-production/35142361#35142361", "title": "How to make Sidetiq tasks to run only in production?", "body": "<p>Sidekiq has that option to be ran in tests. You can take a look at the documentation here: <a href=\"https://github.com/mperham/sidekiq/wiki/Testing\" rel=\"nofollow\">https://github.com/mperham/sidekiq/wiki/Testing</a></p>\n\n<p>Although I wouldn't advise, you could add this into your development.rb:</p>\n\n<pre><code>require 'sidekiq/testing'\nSidekiq::Testing.fake!\n</code></pre>\n\n<p>It tells sidekiq that you're in a test environment and does not run the tasks on background.</p>\n\n<p>I am not sure that this is what you want though?</p>\n"}], "owner": {"reputation": 650, "user_id": 904430, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2337ccc2c954f6fef01334ad81d58225?s=128&d=identicon&r=PG", "display_name": "Vitali", "link": "https://stackoverflow.com/users/904430/vitali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454369032, "creation_date": 1439373105, "last_edit_date": 1454368186, "question_id": 31961751, "link": "https://stackoverflow.com/questions/31961751/how-to-make-sidetiq-tasks-to-run-only-in-production", "title": "How to make Sidetiq tasks to run only in production?", "body": "<p>We are using Sidekiq as our queue management system and Sidetiq to manage scheduled recurring tasks and it works quite well for us.</p>\n\n<p>There is a slight issue through. There are tasks that we don't want to be run every time we start sidekiq queue locally to debug something. Is there way to make recurring Sidetiq tasks to be run only on production environment?</p>\n\n<ul>\n<li>Ruby 2.1.6</li>\n<li>Rails 3.2.22</li>\n<li>Sidekiq v3.4.2</li>\n</ul>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "forms", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439375504, "post_id": 31961710, "comment_id": 51832692, "body": "How I understand it this should be possible with javascript. See for example these posts: <a href=\"http://stackoverflow.com/a/24315219\">stackoverflow.com/a/24315219</a> and <a href=\"http://stackoverflow.com/a/17663373\">stackoverflow.com/a/17663373</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439379867, "post_id": 31962938, "comment_id": 51835559, "body": "Thanks, but shouldn&#39;t the code that I have also work? I&#39;ve adapted <code>onchange: &quot;this.form.submit();&quot;</code> from stackoverflow.com/a/24315219 and stackoverflow.com/a/17663373. But for some reason this does not do anything in my use case."}, {"owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "reply_to_user": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439380458, "post_id": 31962938, "comment_id": 51835968, "body": "Don&#39;t do <code>form.submit()</code>, do it with <code>ajax</code>!"}, {"owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "reply_to_user": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439382185, "post_id": 31962938, "comment_id": 51837186, "body": "@Marty Answer + Code Snippet = downvote? Thanks a lot"}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439382402, "post_id": 31962938, "comment_id": 51837339, "body": "Well I&#39;ll make it an upvote then, but it&#39;s not really answering my question. The <code>form.submit</code> seems much easier, look for example here: <a href=\"http://www.htmlgoodies.com/beyond/javascript/article.php/3902606\" rel=\"nofollow noreferrer\">htmlgoodies.com/beyond/javascript/article.php/3902606</a>. I&#39;m looking for the reason why my code is failing."}], "tags": [], "owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "is_accepted": false, "score": 1, "last_activity_date": 1439381054, "last_edit_date": 1439381054, "creation_date": 1439376286, "answer_id": 31962938, "question_id": 31961710, "link": "https://stackoverflow.com/questions/31961710/trying-to-create-a-form-that-automatically-submits-and-reloads-page-upon-change/31962938#31962938", "title": "Trying to create a form that automatically submits and reloads page upon change", "body": "<p>With jQuery, try to <a href=\"http://api.jquery.com/jquery.post/\" rel=\"nofollow\">handle onchange event</a> and try <a href=\"http://api.jquery.com/change/\" rel=\"nofollow\">ajax post</a></p>\n\n<hr>\n\n<p>Javascript snippet:</p>\n\n<pre><code>/**\n * Assume jQuery script on head\n */\n&lt;script type=\"text/javascript\"&gt;\n\n  /**\n   * Handle onchange on user_default_relationship_id\n   */\n  $(\"#user_default_relationship_id\").change(function () {\n\n    var data = $( this ).form.serialize();\n\n    $.ajax({\n      type: \"POST\",\n      url: &lt;%= set_preference_path %&gt;,\n      data: data,\n      dataType: \"application/json\"\n    })\n    .done(function() {\n      // handle done event ...\n    })\n    .fail(function() {\n      // handle fail event ...\n    })\n    .always(function() {\n      // handle event ...\n    });\n\n&lt;/script&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1439397500, "post_id": 31970913, "comment_id": 51848738, "body": "Note that while this will work, Javier is correct that Ajax will provide a better solution: it avoids extra page loads that can annoy users and unnecessarily burden your app. Perhaps you can look at implementing Ajax after you have it working without Ajax :)"}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439398776, "post_id": 31970913, "comment_id": 51849470, "body": "Great, it works with one exception: the value selected on loading the page is not the value the record actually has. After loading it always has the value selected that alphabetically comes first. I checked with <code>debugger</code> to see if it does save when a new variable is selected and it indeed does. Is there a way to correct this so that its initial selected option is the record&#39;s value?  P.S. I&#39;m just starting to learn how to program; the idea indeed is to get my first app working (so I&#39;ve got something to show for) and then learn more about refactoring and implementing more effective code."}, {"owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439400173, "post_id": 31970913, "comment_id": 51850258, "body": "Thanks @eirikir. <code>User</code> and <code>Organization</code> have a many-to-many relationship through <code>Relationship</code>. I now define <code>@relationships</code> in <code>def overview</code>. In the view: <code>f.collection_select :default_relationship_id, @relationships, :id, :name, {}, {onchange: &quot;this.form.submit();&quot;}</code>. The problem is <code>name</code> (the option values to be displayed): this is a column from the <code>Organization</code> table (i.e., the <code>organization</code> that belongs to the <code>relationship</code>). Now that I use <code>@relationships</code> instead of <code>@organizations</code> it no longer recognizes what I mean by <code>name</code> (also tried <code>:organization.name</code>)."}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "reply_to_user": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "edited": false, "score": 0, "creation_date": 1439400649, "post_id": 31970913, "comment_id": 51850512, "body": "@marty in Relationship model, add <code>delegate :name, to: :organization</code>"}], "tags": [], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "is_accepted": true, "score": 1, "last_activity_date": 1439399460, "last_edit_date": 1439399460, "creation_date": 1439397484, "answer_id": 31970913, "question_id": 31961710, "link": "https://stackoverflow.com/questions/31961710/trying-to-create-a-form-that-automatically-submits-and-reloads-page-upon-change/31970913#31970913", "title": "Trying to create a form that automatically submits and reloads page upon change", "body": "<p>You're specifying <code>:onclick</code> in the <code>options</code> hash instead of the <code>html_options</code> hash (where <code>:class</code> is specified), so move it to the correct hash, but keep the <code>options</code> hash blank:</p>\n\n<pre><code>f.collection_select :default_relationship_id, @organizations, :id, :name, {}, {class: 'form-control input-md', onchange: \"this.form.submit();\"}\n</code></pre>\n\n<p>See the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select\" rel=\"nofollow\">documentation</a> for the the full arguments list.</p>\n\n<p><strong>ETA</strong> The chosen value of <code>@user.default_relationship_id</code> isn't selected by <code>collection_select</code> because it refers to a relationship, but you've given the collection <code>@organizations</code>. Since <code>collection_select</code> can't find the associated organization from a relationship ID, it selects the first option by default. You should refactor so <code>collection_select</code> receives a <code>@relationships</code> collection. The refactoring should be such that you can update directly from strong params: </p>\n\n<pre><code>set_preference\n  \u2026\n  @user.update user_relationship_params\n  \u2026\nend\n\nprivate\ndef user_relationship_params\n  params.require(:user).permit(:default_relationship_id)\nend\n</code></pre>\n\n<p>Read up on <a href=\"http://guides.rubyonrails.org/form_helpers.html#dealing-with-model-objects\" rel=\"nofollow\">form helpers</a> for more information.</p>\n"}], "owner": {"reputation": 1718, "user_id": 5086345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/15e2e469991bde6f4187ae3c22c3b6a5?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5086345/marty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 31970913, "answer_count": 2, "score": 0, "last_activity_date": 1439399460, "creation_date": 1439372996, "last_edit_date": 1439396844, "question_id": 31961710, "link": "https://stackoverflow.com/questions/31961710/trying-to-create-a-form-that-automatically-submits-and-reloads-page-upon-change", "title": "Trying to create a form that automatically submits and reloads page upon change", "body": "<p>I would like a dropdown box and as a user selects a new option from it, it should <strong>automatically save</strong> (without a submit button) and the page should <strong>reload</strong>.</p>\n\n<p>As it is, however, selecting a value from the dropdown box does not do anything: it does not save nor reload the page. Anyone got an idea how to get the code below to work?</p>\n\n<p>Form:</p>\n\n<pre><code>&lt;%= form_for @user, method: :patch, url: set_preference_path do |f| %&gt;\n    &lt;%= render 'shared/error_messages', object: f.object %&gt;\n    &lt;%= f.collection_select :default_relationship_id, @organizations, :id, :name, {onchange: \"this.form.submit();\"}, {class: 'form-control input-md'} %&gt;\n        # default_relationship_id is the column in users table to save to, @organizations are the selectable options, id is the value of the options to save, and name is the name to be displayed.\n&lt;% end %&gt;\n</code></pre>\n\n<p>Does <code>onchange: \"this.form.submit();\"</code> perhaps not work when using <code>collection_select</code>? The examples from which I adapted this implementation (stackoverflow.com/a/24315219 and stackoverflow.com/a/17663373) use it in combination with <code>select</code> instead of <code>collection_select</code>.</p>\n\n<p>Controller:</p>\n\n<pre><code>def overview\n  @user = current_user\n  @organizations = @user.organizations.where('fish = ?', true)\nend\n\ndef set_preference\n  @user = current_user\n  @rel = Relationship.where('user_id = ? and organization_id = ? and fish = ?', @user.id, params[:user][:default_relationship_id], true).first\n  @user.update_attributes(default_relationship_id: @rel.id)\n  respond_to do |format|\n    format.js { render inline: \"location.reload();\" }\n    format.html { redirect_to overview_path(@user) }\n  end\nend\n</code></pre>\n\n<p>The html code this produces:</p>\n\n<pre><code>&lt;form class=\"edit_user\" id=\"edit_user_1\" action=\"/set_preference/test1\" accept-charset=\"UTF-8\" method=\"post\"&gt;&lt;input name=\"utf8\" type=\"hidden\" value=\"&amp;#x2*3;\" /&gt;&lt;input type=\"hidden\" name=\"_method\" value=\"patch\" /&gt;&lt;input type=\"hidden\" name=\"authenticity_token\" value=\"m/9ECijmnYQ==\" /&gt;   \n&lt;select class=\"form-control input-md\" name=\"user[default_relationship_id]\" id=\"user_default_relationship_id\"&gt;\n&lt;option value=\"1\"&gt;Example1 business&lt;/option&gt;\n&lt;option value=\"56\"&gt;Example2&lt;/option&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "github", "utf-8", "windows-1251"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5212571, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O3XHH7myvAA/AAAAAAAAAAI/AAAAAAAAAg8/VqgEoe76Ndk/photo.jpg?sz=128", "display_name": "\u041f\u043e\u043b\u0438\u043d\u0430 \u041d\u0435\u043c\u0447\u0430\u043a", "link": "https://stackoverflow.com/users/5212571/%d0%9f%d0%be%d0%bb%d0%b8%d0%bd%d0%b0-%d0%9d%d0%b5%d0%bc%d1%87%d0%b0%d0%ba"}, "edited": false, "score": 0, "creation_date": 1439373460, "post_id": 31961733, "comment_id": 51831350, "body": "yes, i guess too, but is there another way to solve the problem?"}, {"owner": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "reply_to_user": {"reputation": 11, "user_id": 5212571, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O3XHH7myvAA/AAAAAAAAAAI/AAAAAAAAAg8/VqgEoe76Ndk/photo.jpg?sz=128", "display_name": "\u041f\u043e\u043b\u0438\u043d\u0430 \u041d\u0435\u043c\u0447\u0430\u043a", "link": "https://stackoverflow.com/users/5212571/%d0%9f%d0%be%d0%bb%d0%b8%d0%bd%d0%b0-%d0%9d%d0%b5%d0%bc%d1%87%d0%b0%d0%ba"}, "edited": false, "score": 0, "creation_date": 1439373715, "post_id": 31961733, "comment_id": 51831515, "body": "@\u041f\u043e\u043b\u0438\u043d\u0430\u041d\u0435\u043c\u0447\u0430\u043a try to clone repo into different folder and install from there."}], "tags": [], "owner": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "is_accepted": false, "score": 0, "last_activity_date": 1439373046, "creation_date": 1439373046, "answer_id": 31961733, "question_id": 31961027, "link": "https://stackoverflow.com/questions/31961027/incompatible-character-encodings-utf-8-and-windows-1251-installing-ruby-ruby-o/31961733#31961733", "title": "incompatible character encodings utf-8 and windows-1251, installing ruby, ruby on rails", "body": "<p>I guess that happens because the path where you are installing Ruby, contains non-ASCII characters (i.e. your username, try to rename it).</p>\n"}], "owner": {"reputation": 11, "user_id": 5212571, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O3XHH7myvAA/AAAAAAAAAAI/AAAAAAAAAg8/VqgEoe76Ndk/photo.jpg?sz=128", "display_name": "\u041f\u043e\u043b\u0438\u043d\u0430 \u041d\u0435\u043c\u0447\u0430\u043a", "link": "https://stackoverflow.com/users/5212571/%d0%9f%d0%be%d0%bb%d0%b8%d0%bd%d0%b0-%d0%9d%d0%b5%d0%bc%d1%87%d0%b0%d0%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1439373072, "creation_date": 1439371339, "last_edit_date": 1439373072, "question_id": 31961027, "link": "https://stackoverflow.com/questions/31961027/incompatible-character-encodings-utf-8-and-windows-1251-installing-ruby-ruby-o", "title": "incompatible character encodings utf-8 and windows-1251, installing ruby, ruby on rails", "body": "<p>I don't know much about this stuff, help me, please. I was installing ruby  <a href=\"https://github.com/PaulineNemchak/railsinstaller-windows\" rel=\"nofollow noreferrer\">railsinstaller-windows</a> \non step 9 there was a problem</p>\n\n<p><a href=\"https://i.stack.imgur.com/5BTvR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5BTvR.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>What should I do? I need a good explanation.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1439371448, "post_id": 31960961, "comment_id": 51829864, "body": "<code>created_at + 1.day</code> is not recognized by SQL."}, {"owner": {"reputation": 99, "user_id": 4925872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ee0b0e4e1de8f555cb75623cf17aa6a7?s=128&d=identicon&r=PG&f=1", "display_name": "ZHH", "link": "https://stackoverflow.com/users/4925872/zhh"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1439371498, "post_id": 31960961, "comment_id": 51829893, "body": "Then how can I get what I want?"}, {"owner": {"reputation": 9315, "user_id": 3627756, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JxLDj.png?s=128&g=1", "display_name": "Ankit Bajpai", "link": "https://stackoverflow.com/users/3627756/ankit-bajpai"}, "edited": false, "score": 0, "creation_date": 1439371531, "post_id": 31960961, "comment_id": 51829915, "body": "I think this is not the current synrtax for 1 day interval in mysql. Read the docs first"}], "answers": [{"comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 2, "creation_date": 1439371573, "post_id": 31961110, "comment_id": 51829952, "body": "Or he could do <code>User.where(:created_at =&gt; &quot;2015-08-06&quot;..&quot;2015-08-07&quot;).where(&quot;updated_at &gt; ?&quot;, created_at + 1.day).count</code>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 1, "creation_date": 1439371849, "post_id": 31961110, "comment_id": 51830164, "body": "I think that will error with <code>unknown variable or method &quot;created_at&quot;</code>"}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": true, "score": 4, "last_activity_date": 1439371538, "creation_date": 1439371538, "answer_id": 31961110, "question_id": 31960961, "link": "https://stackoverflow.com/questions/31960961/sql-where-to-query-in-rails/31961110#31961110", "title": "SQL where to query in Rails", "body": "<p><code>1.day</code> is ruby syntax, not sql.  try this:</p>\n\n<pre><code> User.where(:created_at =&gt; \"2015-08-06\"..\"2015-08-07\").where(\"updated_at &gt; DATE_ADD(created_at, INTERVAL 1 DAY)\").count\n</code></pre>\n\n<p>see <a href=\"http://www.w3schools.com/sql/func_date_add.asp\" rel=\"nofollow\">http://www.w3schools.com/sql/func_date_add.asp</a></p>\n"}, {"comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1439372016, "post_id": 31961174, "comment_id": 51830271, "body": "Not going to work, I think, because &quot;created_at&quot; is an instance method. You can&#39;t use it in this context."}, {"owner": {"reputation": 202, "user_id": 3432863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cf765e4c185fd7f3d2e56d21fb6742?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Tandel", "link": "https://stackoverflow.com/users/3432863/ankita-tandel"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1439375019, "post_id": 31961174, "comment_id": 51832363, "body": "yup .. got my mistake. It should be  User.where(:created_at =&gt; &quot;2015-08-06&quot;..&quot;2015-08-07&quot;).where(&quot;updated_at &gt; DATE_ADD(created_at, INTERVAL 1 DAY)&quot;).count"}], "tags": [], "owner": {"reputation": 202, "user_id": 3432863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cf765e4c185fd7f3d2e56d21fb6742?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Tandel", "link": "https://stackoverflow.com/users/3432863/ankita-tandel"}, "is_accepted": false, "score": 2, "last_activity_date": 1439371806, "last_edit_date": 1439371806, "creation_date": 1439371671, "answer_id": 31961174, "question_id": 31960961, "link": "https://stackoverflow.com/questions/31960961/sql-where-to-query-in-rails/31961174#31961174", "title": "SQL where to query in Rails", "body": "<p>Try it like this</p>\n\n<pre><code>User.where(:created_at =&gt; \"2015-08-06\"..\"2015-08-07\").where(\"updated_at &gt; ?\", created_at + 1.day).count\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 4925872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ee0b0e4e1de8f555cb75623cf17aa6a7?s=128&d=identicon&r=PG&f=1", "display_name": "ZHH", "link": "https://stackoverflow.com/users/4925872/zhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 31961110, "answer_count": 2, "score": 0, "last_activity_date": 1439373594, "creation_date": 1439371132, "last_edit_date": 1439373594, "question_id": 31960961, "link": "https://stackoverflow.com/questions/31960961/sql-where-to-query-in-rails", "title": "SQL where to query in Rails", "body": "<p>When I type:</p>\n\n<pre><code>User.where(:created_at =&gt; \"2015-08-06\"..\"2015-08-07\").where(\"updated_at &gt; created_at + 1.day\").count\n</code></pre>\n\n<p>Error Returned:</p>\n\n<pre><code>SELECT COUNT(*) FROM `users` WHERE `users`.`created_at` BETWEEN '2015-08-06' AND '2015-08-07' AND (updated_at &gt; created_at + 1.day)ActiveRecord::StatementInvalid: Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'day)' at line 1: SELECT COUNT(*) FROM `users`  WHERE `users`.`created_at` BETWEEN '2015-08-06' AND '2015-08-07' AND (updated_at &gt; created_at + 1.day)\n\nfrom /home/guinness/shared/bundle/ruby/2.1.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in query'\n</code></pre>\n\n<p>What's wrong with this? As you know I want to know how many users retained after 1 day of their sign up.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1439370347, "post_id": 31960582, "comment_id": 51829029, "body": "What is supposed to be <code>menutr</code> ?, it is not defined anywhere, and it is not an instance_variable"}, {"owner": {"reputation": 1, "user_id": 5218482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b645c95c37e6e45cd4a91b7b447c699?s=128&d=identicon&r=PG&f=1", "display_name": "dip", "link": "https://stackoverflow.com/users/5218482/dip"}, "reply_to_user": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1439371269, "post_id": 31960582, "comment_id": 51829721, "body": "It&#39;s temporary translation text in DB."}], "owner": {"reputation": 1, "user_id": 5218482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b645c95c37e6e45cd4a91b7b447c699?s=128&d=identicon&r=PG&f=1", "display_name": "dip", "link": "https://stackoverflow.com/users/5218482/dip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439370163, "creation_date": 1439370163, "question_id": 31960582, "link": "https://stackoverflow.com/questions/31960582/rspec-not-get-value-from-db", "title": "RSpec not get value from db", "body": "<p>I want to create a test with rspec and capybara. When I run test, the app don't get value from db. I have this in layout</p>\n\n<pre><code>.navbar-collapse.collapse\n    %ul.nav.navbar-nav.navbar-right\n      %li.dropdown\n        %a.dropdown-toggle{\"data-toggle\" =&gt; \"dropdown\", :href =&gt; \"#\"} Home\n        %ul.dropdown-menu\n          %li= link_to \"#{menutr.old}\", plans_path(template:1)\n</code></pre>\n\n<p>And error:</p>\n\n<pre><code>ActionView::Template::Error: undefined method `old' for nil:NilClass\n</code></pre>\n\n<p>But before I run seed in development db and after that I copy this db to test. In development/production mode everything works great. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin"], "comments": [{"owner": {"reputation": 4236, "user_id": 717600, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/yYVqR.jpg?s=128&g=1", "display_name": "Md Sirajus Salayhin", "link": "https://stackoverflow.com/users/717600/md-sirajus-salayhin"}, "edited": false, "score": 0, "creation_date": 1439369326, "post_id": 31960226, "comment_id": 51828294, "body": "Please send your full controller code."}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 2, "creation_date": 1439369376, "post_id": 31960226, "comment_id": 51828327, "body": "your method is an instance method, but you are calling it as a class method, so try defining the app under <code>def self.product_params</code> or try <code>ProductsController.new.product_params</code>"}, {"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439369600, "post_id": 31960226, "comment_id": 51828490, "body": "@MohammadAbuShady thanks! It worked! :)"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1439371907, "post_id": 31960226, "comment_id": 51830206, "body": "I just noticed that your code is actually in the products controller, no need to do what i wrote above, just use <code>product_params</code> directly like proposed in the answer below."}], "answers": [{"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 3, "last_activity_date": 1439369325, "creation_date": 1439369325, "answer_id": 31960300, "question_id": 31960226, "link": "https://stackoverflow.com/questions/31960226/undefined-method-error-while-accessing-another-controllers-method/31960300#31960300", "title": "undefined method error while accessing another controllers method", "body": "<p><code>product_params</code> is an instance object method, of the class <code>ProductsController</code></p>\n\n<p>You are calling <code>product_params</code> on class <code>ProductsController</code>, and such does not exist, <code>product_params</code> is not class method it is instance object method, it can only be called on instance object of <code>ProductsController</code></p>\n"}, {"tags": [], "owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "is_accepted": true, "score": 1, "last_activity_date": 1439369684, "creation_date": 1439369684, "answer_id": 31960420, "question_id": 31960226, "link": "https://stackoverflow.com/questions/31960226/undefined-method-error-while-accessing-another-controllers-method/31960420#31960420", "title": "undefined method error while accessing another controllers method", "body": "<p>Your controller implement <code>product_params</code> as <strong>instance method</strong>, not like <strong>static class method</strong>.</p>\n\n<p>We have two ways to fix it:</p>\n\n<ul>\n<li>declare <code>products_params</code> as static class method.</li>\n<li>call to <code>produtcs_params</code> to current instance.</li>\n</ul>\n\n<p>First option:</p>\n\n<pre><code>def self.product_params(p=params)\n  p.require(:product).permit(:manufacturer, :part_no, :avatar)\nend\n</code></pre>\n\n<p>Second option:</p>\n\n<pre><code>@item.product = Product.create(product_params(params[:item]))\n</code></pre>\n"}], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 31960420, "answer_count": 2, "score": 0, "last_activity_date": 1439369684, "creation_date": 1439369071, "question_id": 31960226, "link": "https://stackoverflow.com/questions/31960226/undefined-method-error-while-accessing-another-controllers-method", "title": "undefined method error while accessing another controllers method", "body": "<p>My product controller looks like this:</p>\n\n<pre><code>class ProductsController &lt; InheritedResources::Base\n\npublic\n    def product_params(p=params)\n      p.require(:product).permit(:manufacturer, :part_no, :avatar)\n    end\nend\n</code></pre>\n\n<p><code>Item</code> has one to one relationship with product. In <code>Item</code>'s controller (activeadmin) cI am doing this:</p>\n\n<pre><code>@item.product = Product.create(ProductsController.product_params(params[:item]))\n</code></pre>\n\n<p>And got this error:</p>\n\n<pre><code>undefined method `product_params' for ProductsController:Class\n</code></pre>\n\n<p>Now please help me to figure out what am I doing wrong.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 5, "creation_date": 1439368319, "post_id": 31959755, "comment_id": 51827641, "body": "It&#39;s because Ruby 2.0 had an empty <code>Date</code> class for compatibility reasons. Look here: <a href=\"https://bugs.ruby-lang.org/issues/9890\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/9890</a>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1439377632, "post_id": 31959755, "comment_id": 51834091, "body": "@MarekLipka  I have posted your answer as &quot;Community wiki&quot; answer - if you wish to earn reputation points for your answer, please post your entry as answer and I will accept it"}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 2, "last_activity_date": 1439377310, "creation_date": 1439377310, "answer_id": 31963323, "question_id": 31959755, "link": "https://stackoverflow.com/questions/31959755/date-class-misbehaves-in-ruby-2-0/31963323#31963323", "title": "Date class misbehaves in Ruby 2.0", "body": "<p>As pointed by Marek Lipka (in comments section), </p>\n\n<blockquote>\n  <p>It's because Ruby 2.0 had an empty Date class for compatibility\n  reasons. </p>\n  \n  <p>Reference: <a href=\"http://bugs.ruby-lang.org/issues/9890\" rel=\"nofollow\">bugs.ruby-lang.org/issues/9890</a></p>\n</blockquote>\n"}], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 31963323, "answer_count": 1, "score": 3, "last_activity_date": 1439377310, "creation_date": 1439367680, "question_id": 31959755, "link": "https://stackoverflow.com/questions/31959755/date-class-misbehaves-in-ruby-2-0", "title": "Date class misbehaves in Ruby 2.0", "body": "<p><strong><em>Ruby version: <code>ruby 2.0.0p247 (2013-06-27) [x64-mingw32]</code></em></strong></p>\n\n<p>Why does below code able to create <code>Date</code> object but unable to invoke a valid method on it?</p>\n\n<p><strong>Code version 1</strong></p>\n\n<pre><code>p d = Date.new  # Works fine - Prints - #&lt;Date:0x000000027aa628&gt;\np Date.gregorian_leap?(2016) # undefined method `gregorian_leap?' for Date:Class (NoMethodError)\n</code></pre>\n\n<p><strong>Code version 2</strong> Above code works fine if we add <code>require</code> statement</p>\n\n<pre><code>require 'date'\np d = Date.new  # Prints #&lt;Date: -4712-01-01 ((0j,0s,0n),+0s,2299161j)&gt;\np Date.gregorian_leap?(2016) # Prints true\n</code></pre>\n\n<p>Which <code>Date</code> class is getting instantiated in version 1 above?  Does Ruby have concept of fully qualified class name which we can inspect to find the difference in two cases?</p>\n\n<hr>\n\n<p><strong><em>Ruby version: <code>ruby 2.2.2p95 (2015-04-13 revision 50295) [x64-mingw32]</code></em></strong></p>\n\n<p>In <code>Ruby 2.2</code>, <code>Date.new</code> fails early - does not misbehave like Ruby 2.0 did</p>\n\n<pre><code>p d = Date.new # uninitialized constant Date (NameError)\np Date.gregorian_leap?(2016) # did not reach here, previous line errored out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth"], "comments": [{"owner": {"reputation": 202, "user_id": 3432863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cf765e4c185fd7f3d2e56d21fb6742?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Tandel", "link": "https://stackoverflow.com/users/3432863/ankita-tandel"}, "edited": false, "score": 1, "creation_date": 1439367624, "post_id": 31959698, "comment_id": 51827260, "body": "Please check this  <a href=\"http://stackoverflow.com/questions/2165665/how-do-i-get-the-current-absolute-url-in-ruby-on-rails\" title=\"how do i get the current absolute url in ruby on rails\">stackoverflow.com/questions/2165665/&hellip;</a>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1439367858, "post_id": 31959698, "comment_id": 51827394, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2291919/while-loading-webpage-undefined-method-request-uri-for\">While loading webpage: &quot;undefined method `request_uri&#39; for #&quot;</a>"}, {"owner": {"reputation": 1148, "user_id": 2587442, "user_type": "registered", "accept_rate": 24, "profile_image": "https://graph.facebook.com/598829485/picture?type=large", "display_name": "Georgy Buranov", "link": "https://stackoverflow.com/users/2587442/georgy-buranov"}, "edited": false, "score": 0, "creation_date": 1439368420, "post_id": 31959698, "comment_id": 51827684, "body": "Please notice that this is not my code in the backtrace. And the URL (<a href=\"https://graph.facebook.com/oauth/access_token\" rel=\"nofollow noreferrer\">graph.facebook.com/oauth/access_token</a>) seems to be ok. Should I update oauth to specific version?"}, {"owner": {"reputation": 1148, "user_id": 2587442, "user_type": "registered", "accept_rate": 24, "profile_image": "https://graph.facebook.com/598829485/picture?type=large", "display_name": "Georgy Buranov", "link": "https://stackoverflow.com/users/2587442/georgy-buranov"}, "edited": false, "score": 0, "creation_date": 1439368659, "post_id": 31959698, "comment_id": 51827829, "body": "Actually it is not clear why I have URI::Generic and not URI::Https"}, {"owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "edited": false, "score": 0, "creation_date": 1439368956, "post_id": 31959698, "comment_id": 51828023, "body": "Try to update <code>omniauth-*</code> gems. <code>URI::Generic</code> do not implement <code>request_uri</code>, but <code>URI::Http</code> yes and <code>URI::Https</code> by inherit, seems like your code have hardcoded the URL."}, {"owner": {"reputation": 1148, "user_id": 2587442, "user_type": "registered", "accept_rate": 24, "profile_image": "https://graph.facebook.com/598829485/picture?type=large", "display_name": "Georgy Buranov", "link": "https://stackoverflow.com/users/2587442/georgy-buranov"}, "edited": false, "score": 0, "creation_date": 1439369163, "post_id": 31959698, "comment_id": 51828164, "body": "my omniauth-facebook (2.0.1) seems to be the new one"}], "owner": {"reputation": 1148, "user_id": 2587442, "user_type": "registered", "accept_rate": 24, "profile_image": "https://graph.facebook.com/598829485/picture?type=large", "display_name": "Georgy Buranov", "link": "https://stackoverflow.com/users/2587442/georgy-buranov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1048, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1439367474, "creation_date": 1439367474, "question_id": 31959698, "link": "https://stackoverflow.com/questions/31959698/oauth-rails-error-undefined-method-request-uri-for", "title": "oauth rails error - undefined method `request_uri&#39; for", "body": "<p>I was using Oauth in my project for quite a long time (and I am sure it was working before), but after some time it has broken for all providers at the same time and for all providers (facebook, vkontakte, twitter)</p>\n\n<p>The error is</p>\n\n<pre><code>undefined method `request_uri' for #&lt;URI::Generic https://graph.facebook.com/oauth/access_token&gt;\n</code></pre>\n\n<p>I tried to downgrade to ruby 1.9.0 (from 2.1.0) - it is still the same</p>\n\n<p>Full stack is</p>\n\n<pre><code>NoMethodError (undefined method `request_uri' for #&lt;URI::Generic:0x00000101ee8f48&gt;):\nfaraday (0.9.1) lib/faraday/adapter/net_http.rb:66:in `create_request'\nfaraday (0.9.1) lib/faraday/adapter/net_http.rb:82:in `perform_request'\nfaraday (0.9.1) lib/faraday/adapter/net_http.rb:40:in `block in call'\nfaraday (0.9.1) lib/faraday/adapter/net_http.rb:87:in `with_net_http_connection'\nfaraday (0.9.1) lib/faraday/adapter/net_http.rb:32:in `call'\nfaraday (0.9.1) lib/faraday/request/url_encoded.rb:15:in `call'\nfaraday (0.9.1) lib/faraday/rack_builder.rb:139:in `build_response'\nfaraday (0.9.1) lib/faraday/connection.rb:377:in `run_request'\noauth2 (1.0.0) lib/oauth2/client.rb:93:in `request'\noauth2 (1.0.0) lib/oauth2/client.rb:138:in `get_token'\noauth2 (1.0.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'\nomniauth-oauth2 (1.3.1) lib/omniauth/strategies/oauth2.rb:93:in `build_access_token'\nomniauth-facebook (2.0.1) lib/omniauth/strategies/facebook.rb:115:in `build_access_token'\nomniauth-oauth2 (1.3.1) lib/omniauth/strategies/oauth2.rb:77:in `callback_phase'\nomniauth-facebook (2.0.1) lib/omniauth/strategies/facebook.rb:73:in `block in callback_phase'\nomniauth-facebook (2.0.1) lib/omniauth/strategies/facebook.rb:136:in `with_authorization_code!'\nomniauth-facebook (2.0.1) lib/omniauth/strategies/facebook.rb:72:in `callback_phase'\nomniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'\nomniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'\nomniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'\nomniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'\nrack (1.5.5) lib/rack/etag.rb:23:in `call'\nrack (1.5.5) lib/rack/conditionalget.rb:25:in `call'\nrack (1.5.5) lib/rack/head.rb:11:in `call'\n</code></pre>\n\n<p>Does anybody has the same?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "httpresponse"], "comments": [{"owner": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "edited": false, "score": 0, "creation_date": 1439367992, "post_id": 31959663, "comment_id": 51827457, "body": "What do you mean by &quot;it simply breaks&quot;? Surely there&#39;s an error message of some sort that you can include? Or do you mean the connection closes?"}, {"owner": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "reply_to_user": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "edited": false, "score": 0, "creation_date": 1439369720, "post_id": 31959663, "comment_id": 51828572, "body": "Sorry, you are right i wasnt that clear on error handling. This is the strange thing. No Error thrown, http header is sent and nearly one MB of content. And even the script completes successfully. I assume the script has a problem with reading the file and putting it to the http response because it might is to huge."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1439370379, "post_id": 31959663, "comment_id": 51829056, "body": "@marius - From the added info, it seems that the issue is caused by the fact that the file isn&#39;t opened using binary mode. I started to write an answer and posted it&#39;s first part. You might find it helpful, but I&#39;m still writing..."}], "answers": [{"comments": [{"owner": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "edited": false, "score": 0, "creation_date": 1439375606, "post_id": 31960620, "comment_id": 51832763, "body": "Thanks for the highly detailed answer! Basically this is just for mocking up a service. However your last script throws an exception here write $ ./http.rb ./http.rb:45: syntax error, unexpected tSTRING_BEG, expecting &#39;]&#39;                      &quot;Content-Encoding: gzip&quot;,"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "edited": false, "score": 0, "creation_date": 1439391907, "post_id": 31960620, "comment_id": 51845064, "body": "@marius Thanks for the catch, I fixed the typo. I edited the answer, It should work now....  (I was missing a comma at the end of the line and also updated the data class method call)"}, {"owner": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "edited": false, "score": 0, "creation_date": 1439451073, "post_id": 31960620, "comment_id": 51869506, "body": "unfortunately I am not an ruby expert I still get back this error$ ./http.rb /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in <code>require&#39;: cannot load such file -- greactor&#47;version (LoadError)         from &#47;usr&#47;lib&#47;ruby&#47;1.9.1&#47;rubygems&#47;custom_require.rb:36:in </code>require&#39;         from /cygdrive/d/test/script/greactor.rb:1:in <code>&lt;top (required)&gt;&#39;         from &#47;usr&#47;lib&#47;ruby&#47;1.9.1&#47;rubygems&#47;custom_require.rb:36:in </code>require&#39;         from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in   for me it looks like it cannot load the framework, I copied it next to my script."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "edited": false, "score": 0, "creation_date": 1439453424, "post_id": 31960620, "comment_id": 51870886, "body": "@marius, updated ruby frameworks, such as Rails 4 and up require Ruby 1.9.3 as a minimum. Ruby is now at version 2.2.2 and we&#39;re looking forward to a 2.3 release. The GReactor and GRHttp are fairly new and might not work on older ruby versions. I couldn&#39;t even install the 1.9.1 version, as it requires an older compiler type, not longer supported (although I can work to resolve this)... I recommend updating your ruby version. My OS comes with version 2.0. You can use <code>rbenv</code> or <code>rvm</code> to manage multiple versions if you don&#39;t want to touch the system&#39;s default. I&#39;ll try to find a solution anyway."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "edited": false, "score": 0, "creation_date": 1439455827, "post_id": 31960620, "comment_id": 51872340, "body": "@marius - try updating the <code>greactor</code> gem to version 0.0.15. I tested it on Ruby version <code>1.9.1-p430</code> and it worked..."}, {"owner": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "edited": false, "score": 0, "creation_date": 1439468439, "post_id": 31960620, "comment_id": 51880546, "body": "i am lost, how to achieve this?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "edited": false, "score": 0, "creation_date": 1439480306, "post_id": 31960620, "comment_id": 51889729, "body": "@marius - which one? to update your GReactor gem you write <code>gem update greactor</code> in your terminal (with or without the <code>sudo</code> command, depending on your configuration). <a href=\"https://www.ruby-lang.org/en/documentation/installation\" rel=\"nofollow noreferrer\">Updating your Ruby version</a> might be more complex, depending on your system and your requirements. If you don&#39;t want to overwrite the system&#39;s default Ruby you might want to install an version manager first, such as <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> or <a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">rvm</a>"}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 3, "last_activity_date": 1447616576, "last_edit_date": 1447616576, "creation_date": 1439370281, "answer_id": 31960620, "question_id": 31959663, "link": "https://stackoverflow.com/questions/31959663/ruby-http-response-script-sending-large-gzipped-content/31960620#31960620", "title": "ruby http response script sending large gzipped content", "body": "<p>There are a number of issues I see with your code, some which are conceptual and some of which are technical, but without more information about the error you receive might be impossible to offer a correct response.</p>\n\n<p>It is my initial thought that the issue is caused by the fact that you are opening Gzipped files without using the binary mode flag, so that the file reading stops ate the first EOF character and new line markers might be converted.</p>\n\n<p>A few technical things to consider:</p>\n\n<ol>\n<li><p>Your loop is infinite. You should really set up signal traps to allow you to exit the script (catching <code>^C</code>, for example).</p></li>\n<li><p>Zip files are usually binary files. You should use a binary mode to open the file, or use the <code>IO.binread</code> method if your loading the whole file up to memory.</p></li>\n<li><p>Your loading the whole file unto the memory before sending it. That's great for small files, but it isn't the best approach for larger files. Loading 50MB up to the RAM for each client, while serving a 100 clients, means 5GB of RAM...</p></li>\n</ol>\n\n<p>Considering the first two technical points, I would tweek the code a bit like so:</p>\n\n<pre><code>keep_running = true\ntrap('INT'){ keep_running = false ; raise ::SystemExit}\n\nbegin\n    while(run) {\n        Thread.start(server.accept) do |client|\n            date = Time.now.strftime(\"%d-%m-%Y_%H-%M-%S\")\n            file = \"#{date}_mt_dump.txt\"\n            puts date\n            puts \"Accepting connection\"\n            #client = server.accept\n            #resp = \"OKY|So long and thanks for all the fish!|OKY\"\n            ticket_id = \"1235\"\n\n\n            partial_data = \"\"\n            i = 1024\n            firstrun = \"yes\"\n            fd = File.open(file,'bw')\n            puts \"Attempting receive loop\"\n\n            puts \"Ready to transfer contents to the client\"\n            f = File.open(\"output.txt.gz\",\"br\")\n            puts \"Opened file output.txt.gz; size: #{f.size}\"\n            resp = f.read(f.size)\n\n            headers = [\"HTTP/1.1 200 OK\",\n                 \"Content-Encoding: gzip\",\n                 \"Content-Type: text/xml;charset=UTF-8\",\n                 \"Content-Length: #{f.size}\\r\\n\\r\\n\"].join(\"\\r\\n\")\n            client.puts headers\n\n            #puts all_data.join()\n            fd.close unless fd == nil\n\n            puts \"Start data transfer\"\n            client.puts resp\n            client.close\n            puts \"Closed connection\"\n            puts \"\\n\"\n        end\n    }\nrescue =&gt; e\n    puts e.message\n    puts e.backtrace\nrescue SystemExit =&gt; e\n    puts \"exiting... please notice that existing threads will be brutally stoped, as we will not wait for them...\"\nend\n</code></pre>\n\n<p>As to my more general pointers:</p>\n\n<ol>\n<li><p>Your code is opening a new thread per connection. While this is okay for a small load of concurrent connections, your script might grind to a halt if you have a lot of concurrent connections. The context-switching alone (moving between threads) could potentially create a DoS situation.</p>\n\n<p>I recommend that you use a Reactor pattern, where you have a pool of threads. Another option is to fork a few processes listening to the same TCPSocket.</p></li>\n<li><p>You don't read the data from the socket and you don't parse the HTTP request - this means that someone could potentially fill up the system buffer, which you never empty, by continuously sendings data.</p>\n\n<p>It would be better if you read the information from the socket, or emptied it's buffer, as well as disconnected from any malformed of malicious connections.</p>\n\n<p>Also, most browsers aren't too happy when the response comes in before the request...</p></li>\n<li><p>You don't catch any exceptions nor print any error messages. This means that your script might throw an exception that will break everything apart. For instance, if your 'server' will reach the 'open file limit' for it's process, the <code>accept</code> method will throw an exception which will shut down the whole script, including existing connections.</p></li>\n</ol>\n\n<p>I'm not sure why you aren't using one of the many HTTP servers available for Ruby - be it the builtin WEBrick (don't use for production) or one of the native Ruby community gems, such as <a href=\"https://github.com/boazsegev/iodine\" rel=\"nofollow\">Iodine</a>.</p>\n\n<p>Here's a short example using Iodine, which has an easy to utilize Http server written in Ruby (no need to compile anything):</p>\n\n<pre><code>require 'iodine/http'\n\n# cache the file, since it's the only response ever sent\nfile_data = IO.binread \"output.txt.gz\"\n\nIodine.on_http do |request, response|\n        begin\n            # set any headers\n            response['content-type'] = 'text/xml;charset=UTF-8'\n            response['content-encoding'] = 'gzip'\n            response &lt;&lt; file_data\n            true\n        rescue =&gt; e\n            Iodine.error e\n            false\n        end\n    end\nend\n\n#if in irb:\nexit\n</code></pre>\n\n<p>Or, if you insist on writing your own HTTP server, you can at least use a one of the available IO reactors, such as <a href=\"https://github.com/boazsegev/iodine\" rel=\"nofollow\">Iodine</a> (I it wrote for <a href=\"http://www.plezi.io\" rel=\"nofollow\">Plezi</a>), to help you handle the thread pool and IO management (you can also use EventMachine, but I don't it like so much - than again, I'm biased, as I wrote the Iodine Library):</p>\n\n<pre><code>require 'iodine'\nrequire 'stringio'\n\nclass MiniServer &lt; Iodine::Protocol\n\n    # cache the file, since it's the only data sent,\n    # and make it available to all the connections.\n    def self.data\n        @data ||= IO.binread 'output.txt.gz'\n    end\n\n    # The on_opne callback is called when a connection is established.\n    # We'll use it to initialize the HTTP request's headers Hash.\n    def on_open\n     @headers = {}\n    end\n\n    # the on_message callback is called when data is sent from the client to the socket.\n    def on_message input\n        input = StringIO.new input\n        l = nil\n        headers = @headers # easy access\n        # loop the lines and parse the HTTP request.\n        while (l = input.gets)\n            unless l.match /^[\\r]?\\n/\n                if l.include? ':'\n                    l = l.strip.downcase.split(':', 2)\n                    headers[l[0]] = l[1]\n                else\n                    headers[:method], headers[:query], headers[:version] = l.strip.split(/[\\s]+/, 3)\n                    headers[:request_start] = Time.now\n                end\n                next\n            end\n            # keep the connection alive if the HTTP version is 1.1 or if the connection is requested to be kept alive\n            keep_alive = (headers['connection'].to_s.match(/keep/i) || headers[:version].match(/1\\.1/)) &amp;&amp; true\n            # refuse any file uploads or forms. make sure the request is a GET request\n            return close if headers['content-length'] || headers['content-type'] || headers[:method].to_s.match(/get/i).nil?\n            # all is well, send the file.\n            write [\"HTTP/1.1 200 OK\",\n                    \"Connection: #{keep_alive ? 'keep-alive' : 'close'}\",\n                     \"Content-Encoding: gzip\",\n                     \"Content-Type: text/xml;charset=UTF-8\",\n                     \"Content-Length: #{self.class.data.bytesize}\\r\\n\\r\\n\"].join(\"\\r\\n\")\n            write self.class.data\n            return close unless keep_alive\n\n            # reset the headers, in case another request comes in\n            headers.clear\n        end\n    end\n\nend\n\nIodine.protocol = MiniServer\n# # if running within a larget application, consider:\n# Iodine.force_start!\n# # Server starts automatically when the script ends.\n# # on irb, use `exit`:\nexit\n</code></pre>\n\n<p>Good Luck!</p>\n"}], "owner": {"reputation": 896, "user_id": 749655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3519fc640b069a79a8f7a295620b5f7e?s=128&d=identicon&r=PG", "display_name": "marius", "link": "https://stackoverflow.com/users/749655/marius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 31960620, "answer_count": 1, "score": 1, "last_activity_date": 1447616576, "creation_date": 1439367357, "last_edit_date": 1439369897, "question_id": 31959663, "link": "https://stackoverflow.com/questions/31959663/ruby-http-response-script-sending-large-gzipped-content", "title": "ruby http response script sending large gzipped content", "body": "<p>I'm trying to setup a script written in ruby to open a port <code>2004</code> on a server. Called the server with http and the port <code>http://&lt;server&gt;:2004/</code> will then result back a HTTP header + response.\nThe response is read from a file.\nThis is working for small content, but not for like <code>50MB</code>.\nSomehow it simply breaks.\nBy the way I'm testing this script with <code>SoapUI</code>.</p>\n\n<p>Here is the source code, I think this one is pretty self-explanatory.\nFor better reading I marked the response part big.</p>\n\n<pre><code>#!/bin/ruby\n\nrequire 'socket'\nrequire 'timeout'\nrequire 'date'\n\nserver = TCPServer.open 2004\nputs \"Listening on port 2004\"\n\n#file=\"dump.request\"\n\nloop {\n    Thread.start(server.accept) do |client|\n        date = Time.now.strftime(\"%d-%m-%Y_%H-%M-%S\")\n        file = \"#{date}_mt_dump.txt\"\n        puts date\n        puts \"Accepting connection\"\n        #client = server.accept\n        #resp = \"OKY|So long and thanks for all the fish!|OKY\"\n        ticket_id = \"1235\"\n\n\n        partial_data = \"\"\n        i = 1024\n        firstrun = \"yes\"\n        fd = File.open(file,'w')\n        puts \"Attempting receive loop\"\n\n        puts \"Ready to transfer contents to the client\"\n        f = File.open(\"output.txt.gz\",\"r\")\n        puts \"Opened file output.txt.gz; size: #{f.size}\"\n        resp = f.read(f.size)\n\n        headers = [\"HTTP/1.1 200 OK\",\n             \"Content-Encoding: gzip\",\n             \"Content-Type: text/xml;charset=UTF-8\",\n             \"Content-Length: #{f.size}\\r\\n\\r\\n\"].join(\"\\r\\n\")\n        client.puts headers\n\n        #puts all_data.join()\n        fd.close unless fd == nil\n\n        puts \"Start data transfer\"\n        client.puts resp\n        client.close\n        puts \"Closed connection\"\n        puts \"\\n\"\n    end\n}\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "activerecord", "mysql2", "puma"], "answers": [{"tags": [], "owner": {"reputation": 1384, "user_id": 2362720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zo0Tn.png?s=128&g=1", "display_name": "Andrew Feng", "link": "https://stackoverflow.com/users/2362720/andrew-feng"}, "is_accepted": true, "score": 2, "last_activity_date": 1445474849, "creation_date": 1445474849, "answer_id": 33271662, "question_id": 31959540, "link": "https://stackoverflow.com/questions/31959540/activerecord-error-mysql2error-mysql-server-has-gone-away/33271662#33271662", "title": "Activerecord error: Mysql2::Error: MySQL server has gone away", "body": "<p>Write your Resque task like this:</p>\n\n<pre><code>class MyTask\n  def self.perform\n    ActiveRecord::Base.verify_active_connections!\n    # rest of your code\n  end\nend\n</code></pre>\n\n<p>see more details here: <a href=\"https://github.com/resque/resque/wiki/FAQ#how-do-you-work-around-the-mysql-server-has-gone-away-error-\" rel=\"nofollow\">https://github.com/resque/resque/wiki/FAQ#how-do-you-work-around-the-mysql-server-has-gone-away-error-</a></p>\n"}], "owner": {"reputation": 709, "user_id": 1093881, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6974484920cce67e6ec628a182d06bd8?s=128&d=identicon&r=PG", "display_name": "gal", "link": "https://stackoverflow.com/users/1093881/gal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1079, "favorite_count": 0, "accepted_answer_id": 33271662, "answer_count": 1, "score": 0, "last_activity_date": 1445474849, "creation_date": 1439366946, "last_edit_date": 1439367345, "question_id": 31959540, "link": "https://stackoverflow.com/questions/31959540/activerecord-error-mysql2error-mysql-server-has-gone-away", "title": "Activerecord error: Mysql2::Error: MySQL server has gone away", "body": "<p>i've looked into previous questions which look similar to my problem, nothing seems to be related.\nAfter doing the following query:</p>\n\n<pre><code>Runner::Models::Job.where(:id =&gt; job_id)\n</code></pre>\n\n<p>I get an exception, it happens once in a while:\nMysql2::Error: MySQL server has gone away: SELECT  <code>jobs</code>.* FROM <code>jobs</code>  WHERE <code>jobs</code>.<code>id</code> = 7507 LIMIT 1</p>\n\n<p>I use puma, and in config.ru i am using:</p>\n\n<pre><code>use ActiveRecord::ConnectionAdapters::ConnectionManagement\n</code></pre>\n\n<p>The thing is that this error always happens in the same place, and i cant figure out why is it happening, i've checked memory, cpu, etc'.., all seem normal.\nMaybe someone will have an idea.\nthanks !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "steam-web-api"], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "reply_to_user": {"reputation": 105, "user_id": 4702449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IqSNB.jpg?s=128&g=1", "display_name": "corybantic", "link": "https://stackoverflow.com/users/4702449/corybantic"}, "edited": false, "score": 0, "creation_date": 1439370007, "post_id": 31959611, "comment_id": 51828785, "body": "where come <code>auth</code>variable, from <code>request.env[&quot;omniauth.auth&quot;]</code>?"}, {"owner": {"reputation": 105, "user_id": 4702449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IqSNB.jpg?s=128&g=1", "display_name": "corybantic", "link": "https://stackoverflow.com/users/4702449/corybantic"}, "edited": false, "score": 0, "creation_date": 1439375128, "post_id": 31959611, "comment_id": 51832436, "body": "Oh sorry!     auth = request.env[&#39;omniauth.auth&#39;]"}, {"owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "reply_to_user": {"reputation": 105, "user_id": 4702449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IqSNB.jpg?s=128&g=1", "display_name": "corybantic", "link": "https://stackoverflow.com/users/4702449/corybantic"}, "edited": false, "score": 0, "creation_date": 1439375824, "post_id": 31959611, "comment_id": 51832884, "body": "It&#39;s simple, before assign <code>session[:current_user]</code> try to do <code>logger.info auth.inspect</code> to assure that have values."}, {"owner": {"reputation": 105, "user_id": 4702449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IqSNB.jpg?s=128&g=1", "display_name": "corybantic", "link": "https://stackoverflow.com/users/4702449/corybantic"}, "edited": false, "score": 0, "creation_date": 1439465840, "post_id": 31959611, "comment_id": 51878710, "body": "Ok. So they do have values. I managed to &quot;puts&quot; them onto my output index.erb page, with the following <code>{&quot;nickname&quot;=&gt;&quot;Corybantic Walrus&quot;, &quot;image&quot;=&gt;&quot;https:&#47;&#47;steamcdn-a.akamaihd.net&#47;steamcommunity&#47;pub&zwnj;&#8203;lic&#47;images&#47;avatars&#47;d&zwnj;&#8203;4&#47;d45a66fee7932d270e&zwnj;&#8203;c32d4457d865b485245c&zwnj;&#8203;f1_medium.jpg&quot;, &quot;uid&quot;=&gt;&quot;76561198128055024&quot;}</code> as the output.  My current  <code>&lt;p&gt;&lt;%= session[:current_user][:nickname] %&gt;&lt;&#47;p&gt;</code> in the index erb isn&#39;t working. Is there another way?"}, {"owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "reply_to_user": {"reputation": 105, "user_id": 4702449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IqSNB.jpg?s=128&g=1", "display_name": "corybantic", "link": "https://stackoverflow.com/users/4702449/corybantic"}, "edited": false, "score": 0, "creation_date": 1439479771, "post_id": 31959611, "comment_id": 51889330, "body": "try with <code>session[:current_user] = {   nickname: request.env[&quot;omniauth.auth&quot;][:info][:nickname],   image:    request.env[&quot;omniauth.auth&quot;][:info][:image],   uid:      request.env[&quot;omniauth.auth&quot;][:uid] }</code>"}], "tags": [], "owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "is_accepted": false, "score": 1, "last_activity_date": 1439367189, "creation_date": 1439367189, "answer_id": 31959611, "question_id": 31959341, "link": "https://stackoverflow.com/questions/31959341/ruby-get-the-steam-username-from-omniauth/31959611#31959611", "title": "RUBY: Get the Steam Username from OmniAuth", "body": "<p>Something like this:</p>\n\n<pre><code>session[:current_user] = {\n  nickname: auth[:info][:nickname],\n  image:    auth[:info][:image],\n  uid:      auth[:uid]\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4702449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IqSNB.jpg?s=128&g=1", "display_name": "corybantic", "link": "https://stackoverflow.com/users/4702449/corybantic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439375150, "creation_date": 1439366373, "last_edit_date": 1439375150, "question_id": 31959341, "link": "https://stackoverflow.com/questions/31959341/ruby-get-the-steam-username-from-omniauth", "title": "RUBY: Get the Steam Username from OmniAuth", "body": "<p>I have been using Omniauth to retrieve an environment that contains the steam username. </p>\n\n<p>The output looks like this:</p>\n\n<pre><code>&lt;OmniAuth::AuthHash::InfoHash image=\"https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/d4/d45a66fee7932d270ec32d4457d865b485245cf1_medium.jpg\" location=\"YT, CA\" name=\"Daiki\" nickname=\"Corybantic Walrus\" urls=#&lt;OmniAuth::AuthHash FriendList=#&lt;URI::HTTP:0x0000000614f590 URL:http://api.steampowered.com/ISteamUser/GetFriendList/v0001/?key=4A8837BF7A6C439681B57F4962D8B011&amp;steamid=76561198128055024&amp;relationship=friend&gt; Profile=\"http://steamcommunity.com/id/hatterkiller/\"&gt;&gt; provider=\"steam\" uid=\"76561198128055024\"&gt;\n</code></pre>\n\n<p>I don't really know how to format this inside Stack Overflow, so here is a cleaner <a href=\"http://pastebin.com/djqUwsyv\" rel=\"nofollow\">Pastebin</a>. </p>\n\n<p>The information I need is inside the     <code>&lt;Omniauth::AuthHash::Infohash</code> thing of the code. Is there a way to use Ruby to retrieve the username (nickname) and to put it inside an array?</p>\n\n<p>Sort of like this, but this only worked for the previous output format:</p>\n\n<pre><code>    auth = request.env['omniauth.auth']\n\n session[:current_user] = { :nickname =&gt; auth.info['nickname'],\n                                      :image =&gt; auth.info['image'],\n                                      :uid =&gt; auth.uid }\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "mongodb-query"], "comments": [{"owner": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "edited": false, "score": 1, "creation_date": 1439365547, "post_id": 31958909, "comment_id": 51825989, "body": "What do you mean by &quot;delete them&quot;? Do you mean you have an aggregation result that points to documents you want to delete? More detail is required about what you are asking here."}, {"owner": {"reputation": 4498, "user_id": 3398302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c72f51f688ac9fa0beead86a8f35486?s=128&d=identicon&r=PG", "display_name": "Thomas Bormans", "link": "https://stackoverflow.com/users/3398302/thomas-bormans"}, "edited": false, "score": 0, "creation_date": 1439365931, "post_id": 31958909, "comment_id": 51826210, "body": "Can you show us what your result looks like?"}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439365975, "post_id": 31958909, "comment_id": 51826239, "body": "a Mongo::Collection::View::Aggregation"}, {"owner": {"reputation": 4498, "user_id": 3398302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c72f51f688ac9fa0beead86a8f35486?s=128&d=identicon&r=PG", "display_name": "Thomas Bormans", "link": "https://stackoverflow.com/users/3398302/thomas-bormans"}, "edited": false, "score": 0, "creation_date": 1439365997, "post_id": 31958909, "comment_id": 51826251, "body": "Your actual result. In json."}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439366064, "post_id": 31958909, "comment_id": 51826300, "body": "I&#39;m doing it in Ruby and the query returns hundreds of documents. Do you wish to see all of them?"}, {"owner": {"reputation": 4498, "user_id": 3398302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c72f51f688ac9fa0beead86a8f35486?s=128&d=identicon&r=PG", "display_name": "Thomas Bormans", "link": "https://stackoverflow.com/users/3398302/thomas-bormans"}, "edited": false, "score": 0, "creation_date": 1439366107, "post_id": 31958909, "comment_id": 51826327, "body": "I just want to see if there is an _id in it."}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439366214, "post_id": 31958909, "comment_id": 51826387, "body": "This is 1 returned document <code>{&quot;_id&quot;=&gt;116, &quot;highest&quot;=&gt;260817593.4619382}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7400, "user_id": 1045081, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22d02fc94bcf013df83d76d773b60443?s=128&d=identicon&r=PG", "display_name": "cubbuk", "link": "https://stackoverflow.com/users/1045081/cubbuk"}, "reply_to_user": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439367310, "post_id": 31959318, "comment_id": 51827074, "body": "This is an example for mongo shell; but I believe for ruby you can achieve the similar result using a basic for loop. As far as I know there isn&#39;t any command for deleting results of an aggregation; so you need to use some kind of a loop structure to iterate result set."}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439370665, "post_id": 31959318, "comment_id": 51829288, "body": "there is a problem with the solution above. In my collection I have many document with the same customer_id and I wish to delete only the one with highest invoice.  My aggregate sets _id as customer_id and the remove deletes all the document with customer_id from the collection and not only the one I wish."}, {"owner": {"reputation": 7400, "user_id": 1045081, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22d02fc94bcf013df83d76d773b60443?s=128&d=identicon&r=PG", "display_name": "cubbuk", "link": "https://stackoverflow.com/users/1045081/cubbuk"}, "reply_to_user": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439371005, "post_id": 31959318, "comment_id": 51829519, "body": "Then use the highest value n your remove query combined with the customer id. You already have that value in your aggregation result."}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439371289, "post_id": 31959318, "comment_id": 51829736, "body": "Unfortunately undefined method `remove&#39; for #&lt;Mongo::Collection&gt;"}, {"owner": {"reputation": 7400, "user_id": 1045081, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22d02fc94bcf013df83d76d773b60443?s=128&d=identicon&r=PG", "display_name": "cubbuk", "link": "https://stackoverflow.com/users/1045081/cubbuk"}, "reply_to_user": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439371461, "post_id": 31959318, "comment_id": 51829869, "body": "\u0130n shell db.yourcollectionname.remove should work. If you try this on ruby I dont know exact syntax."}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1439371581, "post_id": 31959318, "comment_id": 51829956, "body": "Thanks but my issue is with Ruby MongoDB Driver"}], "tags": [], "owner": {"reputation": 7400, "user_id": 1045081, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22d02fc94bcf013df83d76d773b60443?s=128&d=identicon&r=PG", "display_name": "cubbuk", "link": "https://stackoverflow.com/users/1045081/cubbuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1439366311, "creation_date": 1439366311, "answer_id": 31959318, "question_id": 31958909, "link": "https://stackoverflow.com/questions/31958909/deleting-all-documents-in-mongocollectionviewaggregation/31959318#31959318", "title": "deleting all documents in Mongo::Collection::View::Aggregation", "body": "<p>In the shell you can use forEach to iterate results and remove each document. </p>\n\n<pre><code>collection.find.aggregate([{ :$group =&gt; { _id: \"$customer_id\", highest: { :$max =&gt; \"$invoice\" }}}])\n.forEach(function(row){\n   collection.remove({customer_id: row._id});\n})\n</code></pre>\n"}], "owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439366311, "creation_date": 1439365139, "last_edit_date": 1439365933, "question_id": 31958909, "link": "https://stackoverflow.com/questions/31958909/deleting-all-documents-in-mongocollectionviewaggregation", "title": "deleting all documents in Mongo::Collection::View::Aggregation", "body": "<p>How can I delete all the documents held by a <code>Mongo::Collection::View::Aggregation</code> object?</p>\n\n<p>EDIT1</p>\n\n<p>I need to delete all the documents having the highest invoice for each customer. I can fetch all the documents I wish to delete with the following code </p>\n\n<pre><code>collection.find.aggregate([\n{ :$group =&gt; { _id: \"$customer_id\", highest: { :$max =&gt; \"$invoice\" }}}\n])\n</code></pre>\n\n<p>Now How can I delete all of them?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "qt", "ubuntu", "installation"], "comments": [{"owner": {"reputation": 1694, "user_id": 3244134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLy7I.jpg?s=128&g=1", "display_name": "gengisdave", "link": "https://stackoverflow.com/users/3244134/gengisdave"}, "edited": false, "score": 0, "creation_date": 1439459612, "post_id": 31958495, "comment_id": 51874720, "body": "as said on the error, add the -fPIC in the CFLAGS and recompile it"}, {"owner": {"reputation": 986, "user_id": 5098391, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-T1xSe6F16Lo/AAAAAAAAAAI/AAAAAAAAACA/yysNIMuatno/photo.jpg?sz=128", "display_name": "Louis Etienne", "link": "https://stackoverflow.com/users/5098391/louis-etienne"}, "reply_to_user": {"reputation": 1694, "user_id": 3244134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLy7I.jpg?s=128&g=1", "display_name": "gengisdave", "link": "https://stackoverflow.com/users/3244134/gengisdave"}, "edited": false, "score": 0, "creation_date": 1439462820, "post_id": 31958495, "comment_id": 51876764, "body": "But I can&#39;t add this flags on a gem instruction... <code>gem install qtbindings</code>"}, {"owner": {"reputation": 1694, "user_id": 3244134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLy7I.jpg?s=128&g=1", "display_name": "gengisdave", "link": "https://stackoverflow.com/users/3244134/gengisdave"}, "edited": false, "score": 0, "creation_date": 1439463976, "post_id": 31958495, "comment_id": 51877536, "body": "sorry, I was unclear; you have to recompile ruby  with -fPIC (<code>&#47;home&#47;louis&#47;.rbenv&#47;versions&#47;2.2.1&#47;lib&#47;libruby-static.a</code> is the wrong file)"}], "owner": {"reputation": 986, "user_id": 5098391, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-T1xSe6F16Lo/AAAAAAAAAAI/AAAAAAAAACA/yysNIMuatno/photo.jpg?sz=128", "display_name": "Louis Etienne", "link": "https://stackoverflow.com/users/5098391/louis-etienne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439363937, "creation_date": 1439363937, "question_id": 31958495, "link": "https://stackoverflow.com/questions/31958495/errors-while-installing-qtbindings-on-ubuntu-14-04", "title": "Errors while installing Qtbindings on Ubuntu 14.04", "body": "<p>I'm trying to install Qtbindings (for Ruby) on Ubuntu, but each try I have the same errors... I don't understand why. Here the result : </p>\n\n<pre><code>/usr/bin/ld: /home/louis/.rbenv/versions/2.2.1/lib/libruby-static.a(array.o): r\u00e9adressage R_X86_64_PC32 vers symbole \u00ab\u00a0rb_ary_entry\u00a0\u00bb ne peut pas \u00eatre utilis\u00e9 en cr\u00e9ant un objet partag\u00e9 ; recompil\u00e9 avec -fPIC\n/usr/bin/ld: \u00e9dition de lien finale en \u00e9chec: Mauvaise valeur\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Sorry it's in french, I hope you'll understand  ! The complete log is <a href=\"https://gist.github.com/boopr/e142fd48054194898af6\" rel=\"nofollow\">here</a>. (too long to be posted here).</p>\n\n<p>I follow the instruction of the <a href=\"https://github.com/ryanmelt/qtbindings\" rel=\"nofollow\">Qtbindings' github</a>, I installed </p>\n\n<pre><code>sudo aptitude install build-essential bison openssl libreadline5\n  libreadline-dev curl git-core zlib1g zlib1g-dev libssl-dev vim\n  libsqlite3-0 libsqlite3-dev sqlite3\n  libxml2-dev git-core subversion autoconf xorg-dev libgl1-mesa-dev\n  libglu1-mesa-dev\n</code></pre>\n\n<p>But I still have the error... My Ruby version is the 2.2.1p85.</p>\n\n<p>I hope you have an answer for me !<br>\nThank's for your help !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2689, "user_id": 795374, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e1eceeaa5fcc245f2df4702b8fd00daa?s=128&d=identicon&r=PG", "display_name": "snowflakekiller", "link": "https://stackoverflow.com/users/795374/snowflakekiller"}, "edited": false, "score": 0, "creation_date": 1439363698, "post_id": 31958277, "comment_id": 51824930, "body": "@BradWerth thanks for pointing that out, I&#39;ve updated my question with one of the specs I am using and its failure message"}], "answers": [{"comments": [{"owner": {"reputation": 2689, "user_id": 795374, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e1eceeaa5fcc245f2df4702b8fd00daa?s=128&d=identicon&r=PG", "display_name": "snowflakekiller", "link": "https://stackoverflow.com/users/795374/snowflakekiller"}, "edited": false, "score": 1, "creation_date": 1439364550, "post_id": 31958458, "comment_id": 51825413, "body": "Thanks for your reply, I tried added a class_methods do block, but I get an undefined method error for &quot;class_methods&quot; - I&#39;ve updated the question with my changes"}, {"owner": {"reputation": 6208, "user_id": 117554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e42c998f86e664209d13833cd7228718?s=128&d=identicon&r=PG", "display_name": "goddamnyouryan", "link": "https://stackoverflow.com/users/117554/goddamnyouryan"}, "reply_to_user": {"reputation": 2689, "user_id": 795374, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e1eceeaa5fcc245f2df4702b8fd00daa?s=128&d=identicon&r=PG", "display_name": "snowflakekiller", "link": "https://stackoverflow.com/users/795374/snowflakekiller"}, "edited": false, "score": 1, "creation_date": 1439364935, "post_id": 31958458, "comment_id": 51825673, "body": "@Karuna-bdc what version of rails are you running?"}, {"owner": {"reputation": 2689, "user_id": 795374, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e1eceeaa5fcc245f2df4702b8fd00daa?s=128&d=identicon&r=PG", "display_name": "snowflakekiller", "link": "https://stackoverflow.com/users/795374/snowflakekiller"}, "edited": false, "score": 2, "creation_date": 1439365821, "post_id": 31958458, "comment_id": 51826145, "body": "Rails 4, @K M Rakibul Islam&#39;s answer worked. Thanks for your help too though"}, {"owner": {"reputation": 1461, "user_id": 547040, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/POPpt.jpg?s=128&g=1", "display_name": "Khairul", "link": "https://stackoverflow.com/users/547040/khairul"}, "edited": false, "score": 2, "creation_date": 1455161833, "post_id": 31958458, "comment_id": 58368776, "body": "<code>class_methods</code> available only for rails 4.2.0 and above"}, {"owner": {"reputation": 1468, "user_id": 1177890, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d8ae7671c8c3e204c2644d87e2c569ca?s=128&d=identicon&r=PG", "display_name": "n_i_c_k", "link": "https://stackoverflow.com/users/1177890/n-i-c-k"}, "edited": false, "score": 1, "creation_date": 1471036080, "post_id": 31958458, "comment_id": 65209917, "body": "@goddamnyouryan, no it cannot have <code>self</code> on the definition or it will not work."}, {"owner": {"reputation": 974, "user_id": 408136, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1nRYx.jpg?s=128&g=1", "display_name": "sambecker", "link": "https://stackoverflow.com/users/408136/sambecker"}, "edited": false, "score": 0, "creation_date": 1496162277, "post_id": 31958458, "comment_id": 75543276, "body": "This is perfect! Thank you."}], "tags": [], "owner": {"reputation": 6208, "user_id": 117554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e42c998f86e664209d13833cd7228718?s=128&d=identicon&r=PG", "display_name": "goddamnyouryan", "link": "https://stackoverflow.com/users/117554/goddamnyouryan"}, "is_accepted": false, "score": 8, "last_activity_date": 1500016411, "last_edit_date": 1500016411, "creation_date": 1439363825, "answer_id": 31958458, "question_id": 31958277, "link": "https://stackoverflow.com/questions/31958277/added-method-to-a-concern-but-getting-undefined-method-errors/31958458#31958458", "title": "Added method to a concern, but getting undefined method errors", "body": "<p>You need to nest these methods in a <code>class_methods do</code> block.  See the <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html#method-i-class_methods\" rel=\"nofollow noreferrer\">documentation for ActiveSupport::Concern</a></p>\n\n<p>Something like:</p>\n\n<pre><code>module DestroyExclusion\n  extend ActiveSupport::Concern\n\n  class_methods do\n    def destroy_exclusion_on_category_deletion(etc)\n      # omitted\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 813, "user_id": 1226074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0490d22335a1ddc9c2b17af8a853c6?s=128&d=identicon&r=PG", "display_name": "sekrett", "link": "https://stackoverflow.com/users/1226074/sekrett"}, "edited": false, "score": 3, "creation_date": 1473684559, "post_id": 31958797, "comment_id": 66222573, "body": "This is wrong, even if it works. Instead of using <code>module ClassMethods</code> you should use <code>class_methods</code> if you decide to use ActiveSupport. @goddamnyouryan gave correct answer. <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveSupport/Concern.html</a> - here you can see both examples with and without ActiveSupport."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 15, "last_activity_date": 1513314495, "last_edit_date": 1513314495, "creation_date": 1439364803, "answer_id": 31958797, "question_id": 31958277, "link": "https://stackoverflow.com/questions/31958277/added-method-to-a-concern-but-getting-undefined-method-errors/31958797#31958797", "title": "Added method to a concern, but getting undefined method errors", "body": "<p>In Rails 4 (and Rails 5), if you want to define a class method inside your concern, then you have to just define that method inside a:</p>\n\n<pre><code>module ClassMethods\n . . . \nend\n</code></pre>\n\n<p>which is what you are looking for. The code contained within this <code>module ClassMethods</code> block will be added to the Class itself.</p>\n\n<p>So, your modified concern code should look like this:</p>\n\n<pre><code>module DestroyExclusion\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def destroy_exclusion_on_category_deletion(academy_id,product_id,category_id)\n      if(category_id == nil)\n        if exists?(:academy_id =&gt; academy_id, :product_id =&gt; product_id)\n          where(:academy_id =&gt; academy_id, :product_id =&gt; product_id).first.destroy\n        end\n      elsif(product_id == nil)\n        if exists?(:academy_id =&gt; academy_id, :category_id =&gt; category_id)\n          where(:academy_id =&gt; academy_id, :category_id =&gt; category_id).first.destroy\n        end\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p><a href=\"https://richonrails.com/articles/rails-4-code-concerns-in-active-record-models\" rel=\"nofollow noreferrer\">This tutorial</a> has a simple and nice explanation about concerns in Rails 4!</p>\n"}, {"comments": [{"owner": {"reputation": 813, "user_id": 1226074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0490d22335a1ddc9c2b17af8a853c6?s=128&d=identicon&r=PG", "display_name": "sekrett", "link": "https://stackoverflow.com/users/1226074/sekrett"}, "edited": false, "score": 0, "creation_date": 1473685043, "post_id": 36586329, "comment_id": 66222863, "body": "Yes, this is the classic way without <code>ActiveSupport</code> and it works until you get complex dependencies, which require you to start using <code>ActiveSupport</code>."}], "tags": [], "owner": {"reputation": 23, "user_id": 2551994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gB7LX.png?s=128&g=1", "display_name": "Bobby Meyer", "link": "https://stackoverflow.com/users/2551994/bobby-meyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1460506674, "creation_date": 1460506674, "answer_id": 36586329, "question_id": 31958277, "link": "https://stackoverflow.com/questions/31958277/added-method-to-a-concern-but-getting-undefined-method-errors/36586329#36586329", "title": "Added method to a concern, but getting undefined method errors", "body": "<p>I had a similar issue, and K M Rakibul Islam's answer was 99% right, but I had to include the following method in my model concern to get ClassMethod working for me.</p>\n\n<pre><code>def self.included(base)\n   base.extend(ClassMethods)\nend\n</code></pre>\n\n<p>Thanks @K-M-Rakibul-Islam, this was a big headache for me!</p>\n"}, {"tags": [], "owner": {"reputation": 569, "user_id": 6244626, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_edcXjrSTkQ/AAAAAAAAAAI/AAAAAAAAByA/OyEV5P4tYS8/photo.jpg?sz=128", "display_name": "Shivansh Gaur", "link": "https://stackoverflow.com/users/6244626/shivansh-gaur"}, "is_accepted": false, "score": 4, "last_activity_date": 1536266782, "creation_date": 1536266782, "answer_id": 52211941, "question_id": 31958277, "link": "https://stackoverflow.com/questions/31958277/added-method-to-a-concern-but-getting-undefined-method-errors/52211941#52211941", "title": "Added method to a concern, but getting undefined method errors", "body": "<p>If you want to define class methods inside your concern:</p>\n\n<p>For Rails version &lt; 4.2.0, </p>\n\n<pre><code>module DestroyExclusion\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def destroy_exclusion_on_category_deletion(etc)\n      # some code\n    end\n  end\nend\n</code></pre>\n\n<p>For Rails version >= 4.2.0</p>\n\n<pre><code>module DestroyExclusion\n  extend ActiveSupport::Concern\n\n  class_methods do\n    def destroy_exclusion_on_category_deletion(etc)\n      # some code\n    end\n  end\nend\n</code></pre>\n\n<p>Ruby way of doing thing</p>\n\n<pre><code>module DestroyExclusion\n  def self.included(base)\n    base.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def destroy_exclusion_on_category_deletion(etc)\n      # some code\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2689, "user_id": 795374, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e1eceeaa5fcc245f2df4702b8fd00daa?s=128&d=identicon&r=PG", "display_name": "snowflakekiller", "link": "https://stackoverflow.com/users/795374/snowflakekiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9744, "favorite_count": 4, "accepted_answer_id": 31958797, "answer_count": 4, "score": 11, "last_activity_date": 1536266782, "creation_date": 1439363321, "last_edit_date": 1447416987, "question_id": 31958277, "link": "https://stackoverflow.com/questions/31958277/added-method-to-a-concern-but-getting-undefined-method-errors", "title": "Added method to a concern, but getting undefined method errors", "body": "<p>I have the following code in a rails concern: </p>\n\n<pre><code>module DestroyExclusion\n  extend ActiveSupport::Concern\n\n  def self.destroy_exclusion_on_category_deletion(academy_id,product_id,category_id)\n    if(category_id == nil)\n      if exists?(:academy_id =&gt; academy_id, :product_id =&gt; product_id)\n        where(:academy_id =&gt; academy_id, :product_id =&gt; product_id).first.destroy\n      end\n    elsif(product_id == nil)\n      if exists?(:academy_id =&gt; academy_id, :category_id =&gt; category_id)\n        where(:academy_id =&gt; academy_id, :category_id =&gt; category_id).first.destroy\n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p>which is used in these classes:</p>\n\n<pre><code>class ExcludeProduct &lt; ActiveRecord::Base\n  include DestroyExclusion\n  belongs_to :academy\n  belongs_to :product\n\n\nend\n\nclass ExcludeCategory &lt; ActiveRecord::Base\n  include DestroyExclusion\n  belongs_to :academy\n  belongs_to :category\n\nend\n</code></pre>\n\n<p>However, when I try to call the method, I get an undefined method error. \nAny ideas why this may be? Here is an example of where I am calling the method: </p>\n\n<pre><code>  def destroy_exclusions\n    category_record = Category.find(self.category_id)\n    if !self.product_id.blank?\n      academies = category_record.parent_academies\n      academies.each do |academy|\n        ExcludeProduct.destroy_exclusion_on_category_deletion(academy.id, self.product_id,nil)\n      end\n    else\n      products = category_record.child_products\n      products.each do |product|\n        ExcludeProduct.destroy_exclusion_on_category_deletion(self.academy_id, product.id,nil)\n      end\n    end\n  end\n</code></pre>\n\n<p>here is an example of the error I am getting (from running my specs):</p>\n\n<pre><code> 1) AcademyCategoryProduct successfully destroys exclusions\n     Failure/Error: category_product.destroy_exclusions\n     NoMethodError:\n       undefined method `destroy_exclusion_on_category_deletion' for #&lt;Class:0x007fc532c0ae50&gt;\n     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.6/lib/active_record/dynamic_matchers.rb:26:in `method_missing'\n     # ./app/models/academy_category_product.rb:13:in `block in destroy_exclusions'\n     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.6/lib/active_record/relation/delegation.rb:46:in `each'\n     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.6/lib/active_record/relation/delegation.rb:46:in `each'\n     # ./app/models/academy_category_product.rb:12:in `destroy_exclusions'\n     # ./spec/models/academy_category_product_spec.rb:25:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>The specfile in question: </p>\n\n<pre><code>require 'rails_helper'\n\ndescribe AcademyCategoryProduct do\n\n  let(:product) { FactoryGirl.create(:academy_product) }\n  let(:category) { FactoryGirl.create(:category) }\n  let(:subcategory) {FactoryGirl.create(:category, :parent_id =&gt; category.id)}\n  let(:academy) { FactoryGirl.create(:academy) }\n  let(:category_product) { FactoryGirl.create(:academy_category_product, :category_id =&gt; subcategory.id, :product_id =&gt; product.id, :academy_id =&gt; nil) }\n  let(:academy_category) { FactoryGirl.create(:academy_category_product, :category_id =&gt; category.id, :academy_id =&gt; academy.id, :product_id =&gt; nil ) }\n  let(:exclude_product) { FactoryGirl.create(:exclude_product, :product_id =&gt; product.id, :academy_id =&gt; academy.id) }\n  let(:exclude_category) { FactoryGirl.create(:exclude_category, :category_id =&gt; subcategory.id, :academy_id =&gt; academy.id) }\n\n  before(:each) do\n    category.reload\n    academy.reload\n    exclude_category.reload\n    exclude_product.reload\n    category_product.reload\n    academy_category.reload\n    exclude_product.reload\n  end\n\n  it \"successfully destroys exclusions\" do\n    category_product.destroy_exclusions\n    expect(ExcludeProduct.first).to eql(nil)\n  end\n\n  it \"successfully destroys category exclusions\" do\n    academy_category.destroy_category_exclusions\n    expect(ExcludeCategory.first).to eql(nil)\n  end\nend\n</code></pre>\n\n<p>EDIT - I made the following changes to my concern as per goddamnyouryan's answer: </p>\n\n<pre><code>require 'active_support/concern'\nmodule DestroyExclusion\n  extend ActiveSupport::Concern\n\n  class_methods do\n\n    def self.destroy_exclusion_on_category_deletion(academy_id,product_id,category_id)\n      if(category_id == nil)\n        if exists?(:academy_id =&gt; academy_id, :product_id =&gt; product_id)\n          where(:academy_id =&gt; academy_id, :product_id =&gt; product_id).first.destroy\n        end\n      elsif(product_id == nil)\n        if exists?(:academy_id =&gt; academy_id, :category_id =&gt; category_id)\n          where(:academy_id =&gt; academy_id, :category_id =&gt; category_id).first.destroy\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>but I get the following error: </p>\n\n<pre><code>Users/karuna/Documents/Projects/catalog/app/models/concerns/destroy_exclusion.rb:5:in `&lt;module:DestroyExclusion&gt;': undefined method `class_methods' for DestroyExclusion:Module (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 206, "user_id": 4384401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02df440328950c2ca558543c61d346a0?s=128&d=identicon&r=PG&f=1", "display_name": "Sudarshan Dhokale", "link": "https://stackoverflow.com/users/4384401/sudarshan-dhokale"}, "is_accepted": false, "score": 0, "last_activity_date": 1439361172, "creation_date": 1439361172, "answer_id": 31957611, "question_id": 31956778, "link": "https://stackoverflow.com/questions/31956778/how-could-i-change-time-for-netreadtimeout-globally/31957611#31957611", "title": "How could I change time for Net::ReadTimeout globally", "body": "<p>If you are using rails framework then put above code in config/initializers folder may be it works</p>\n"}], "owner": {"reputation": 12868, "user_id": 551273, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/f59206a9e3de691c70c179c7507d2bd4?s=128&d=identicon&r=PG&f=1", "display_name": "newBike", "link": "https://stackoverflow.com/users/551273/newbike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439361172, "creation_date": 1439357767, "question_id": 31956778, "link": "https://stackoverflow.com/questions/31956778/how-could-i-change-time-for-netreadtimeout-globally", "title": "How could I change time for Net::ReadTimeout globally", "body": "<p>There are lots of network read action in my application.</p>\n\n<p>I want to change the timeout threadshould in 5 seconds</p>\n\n<p>However, even I put this code in my application ,</p>\n\n<p>The timeout still stays in 60 seconds</p>\n\n<pre><code>require 'net/http'\nmodule Net\n  class HTTP &lt; Protocol\n    alias_method :old_initialize, :initialize\n\n    def initialize(address, port = nil, open_timeout: 5)\n      old_initialize(address, port)\n      self.open_timeout = open_timeout\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "if-statement"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 3, "creation_date": 1439358121, "post_id": 31956716, "comment_id": 51822232, "body": "What is your question ?"}, {"owner": {"reputation": 157, "user_id": 5131133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10155886668070473/picture?type=large", "display_name": "Andy Li", "link": "https://stackoverflow.com/users/5131133/andy-li"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1439359540, "post_id": 31956716, "comment_id": 51822820, "body": "I don&#39;t think my if statement is correct. It works even if all my fields are not filled"}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1439360148, "post_id": 31956716, "comment_id": 51823126, "body": "There&#39;s too little information to answer your question."}, {"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 1, "creation_date": 1439361218, "post_id": 31956716, "comment_id": 51823589, "body": "Try to test what exactly is in <code>title</code>, <code>year</code> etc. Remember that ruby will tream anything except <code>nil</code> and <code>false</code> as true, even empty string or 0."}, {"owner": {"reputation": 157, "user_id": 5131133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10155886668070473/picture?type=large", "display_name": "Andy Li", "link": "https://stackoverflow.com/users/5131133/andy-li"}, "edited": false, "score": 0, "creation_date": 1439362598, "post_id": 31956716, "comment_id": 51824349, "body": "Ok Thank you, I will look into it"}, {"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1439362797, "post_id": 31956716, "comment_id": 51824450, "body": "@AndyLi if you are using Sinatra, please state that clearly in the question. Else, please tell us what framework you&#39;re using."}], "answers": [{"tags": [], "owner": {"reputation": 2145, "user_id": 585675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8693312806c21245f272e6768ee17f91?s=128&d=identicon&r=PG", "display_name": "Vishnu Atrai", "link": "https://stackoverflow.com/users/585675/vishnu-atrai"}, "is_accepted": false, "score": 0, "last_activity_date": 1439362812, "creation_date": 1439362812, "answer_id": 31958121, "question_id": 31956716, "link": "https://stackoverflow.com/questions/31956716/ruby-if-statement/31958121#31958121", "title": "Ruby If statement", "body": "<p>Try <code>if</code> condition to check fields are blank like below - </p>\n\n<pre><code>unless [title, year, gross, poster, trailer].any?(&amp;:blank?)\n</code></pre>\n\n<p>This will check any of the field should not be <code>nil</code> or blank(<code>\"\"</code>). </p>\n"}, {"tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": true, "score": 1, "last_activity_date": 1439362972, "creation_date": 1439362972, "answer_id": 31958166, "question_id": 31956716, "link": "https://stackoverflow.com/questions/31956716/ruby-if-statement/31958166#31958166", "title": "Ruby If statement", "body": "<p>Even if you type nothing in the HTML fields, they will still be submitted as empty strings.</p>\n\n<p>You can avoid having empty parameters by, for example, filtering them:</p>\n\n<pre><code>post '/movies/new' do\n  params.reject! { |key, value| value.empty? }\n  # rest of your code\nend\n</code></pre>\n\n<p>Also I would rather post to <code>/movies</code> rather than to <code>/movies/new</code>, that's more REST-wise.</p>\n"}, {"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 2, "last_activity_date": 1439364907, "creation_date": 1439364907, "answer_id": 31958829, "question_id": 31956716, "link": "https://stackoverflow.com/questions/31956716/ruby-if-statement/31958829#31958829", "title": "Ruby If statement", "body": "<p>Your code is doing a lot of work in one single method. I would suggest to restructure it into smaller chunks to make it easier to manage. I mostly code for Rails, so apologies if parts of these do not apply to your framework. </p>\n\n<pre><code>post \"/movies/new\" do\n  movie = find_movie || create_movie\n\n  if movie\n    redirect \"/movies/#{movie.id}\"\n  else\n    erb :'movies/new'\n  end\nend\n\ndef find_movie\n  # guard condition to ensure that the required parameters are there\n  required_params = [:title, :year, :gross]\n  return nil unless params_present?(required_params)\n\n  Movie.find_by(params_from_keys(required_params))\nend\n\ndef create_movie\n  required_params = [:title, :year, :gross, :poster, :trailer]\n  return nil unless params_present?(required_params)  \n\n  movie = Movie.new(params_from_keys(required_params))\n  movie.save ? movie : nil # only return the movie if it is successfully saved\nend\n\n# utility method to check whether all provided params are present\ndef params_present?(keys) \n  keys.each {|key| return false if params[key].blank? }\n  true\nend\n\n# utility method to convert params into the hash format required to create / find a record\ndef params_from_keys(keys)\n  paras = {}\n  keys.each { |key| paras.merge!(key: params[key]) }\n  paras\nend\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 5131133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10155886668070473/picture?type=large", "display_name": "Andy Li", "link": "https://stackoverflow.com/users/5131133/andy-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 31958166, "answer_count": 3, "score": 0, "last_activity_date": 1439364907, "creation_date": 1439357460, "last_edit_date": 1439362726, "question_id": 31956716, "link": "https://stackoverflow.com/questions/31956716/ruby-if-statement", "title": "Ruby If statement", "body": "<p>I am trying to do a post and run some if statement. What I want to do is: </p>\n\n<ol>\n<li>check all fields are filled</li>\n<li>if all fields are filled move on to next step, or else reload page</li>\n<li>check if already in data base</li>\n<li>add if not already in data base</li>\n</ol>\n\n<p></p>\n\n<pre><code>post \"/movies/new\" do\n  title = params[:title]\n  year = params[:year]\n  gross = params[:gross]\n  poster = params[:poster]\n  trailer = params[:trailer]\n\n  if title &amp;&amp; year &amp;&amp; gross &amp;&amp; poster &amp;&amp; trailer\n      movie = Movie.find_by(title: title, year: year, gross: gross)\n    if movie\n      redirect \"/movies/#{movie.id}\"\n    else\n      movie = Movie.new(title: title, year: year, gross: gross, poster: poster, trailer: trailer)\n      if movie.save\n        redirect \"/movies/#{movie.id}\"\n      else\n        erb :'movies/new'\n      end\n    end\n  else\n   erb :'movies/new'\n  end\nend\n</code></pre>\n\n<p>I don't think my if statement is correct. It works even if all my fields are not filled</p>\n"}, {"tags": ["ruby", "ruby-2.2"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1439357184, "post_id": 31956653, "comment_id": 51821899, "body": "I have no clue, where you took the second snippet from, but it is simply incorrect ruby syntax."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1439357261, "post_id": 31956653, "comment_id": 51821929, "body": "Can you point me to the documentation of this feature?"}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439357293, "post_id": 31956653, "comment_id": 51821938, "body": "Sir, it is the reactive programming approach used by ruby 2.2 please have a look over it <a href=\"https://www.zweitag.de/en/blog/technology/functional-reactive-programming-frp\" rel=\"nofollow noreferrer\">zweitag.de/en/blog/technology/&hellip;</a>"}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1439357376, "post_id": 31956653, "comment_id": 51821959, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 <a href=\"https://www.zweitag.de/en/blog/technology/functional-reactive-programming-frp\" rel=\"nofollow noreferrer\">zweitag.de/en/blog/technology/&hellip;</a>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1439357381, "post_id": 31956653, "comment_id": 51821961, "body": "You should read this article carefully, The following example in <b>pseudo-code</b> shows the key difference between both paradigms."}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439357431, "post_id": 31956653, "comment_id": 51821977, "body": "Thanks however first example is working fine"}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1439357464, "post_id": 31956653, "comment_id": 51821987, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Is there any way to use and see the difference between these two"}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439357599, "post_id": 31956653, "comment_id": 51822035, "body": "Thanks for your help, so I have to think or assume everything theoretically. No way to understand this new approach."}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439441379, "post_id": 31956653, "comment_id": 51865057, "body": "I know the second one is pseudo code but one thing surprise me that top score person make it off topic? The second code can also be executed using Reactive Library and top score programmer don&#39;t aware about it."}], "answers": [{"comments": [{"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439357818, "post_id": 31956735, "comment_id": 51822122, "body": "Any other way to differentiate between imperative &amp; declarative approach."}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439441389, "post_id": 31956735, "comment_id": 51865060, "body": "I know the second one is pseudo code but one thing surprise me that top score person make it off topic? The second code can also be executed using Reactive Library and top score programmer don&#39;t aware about it."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439453555, "post_id": 31956735, "comment_id": 51870943, "body": "You&#39;re talking about ReactiveX ?  It&#39;s not really adaptable to the pseudo-code you were trying to run.  Basically, it was off-topic because you misunderstood the syntax of Ruby.  There is a good, fundamental question there, but phrased badly.  Instead of &quot;why doesn&#39;t <code>c := a + b</code> work?&quot; you could&#39;ve asked &quot;how can I code <code>c = a + b</code> so that <code>c</code> dynamically changes when <code>a</code> or <code>b</code> changes?&quot;"}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1439530564, "post_id": 31956735, "comment_id": 51908754, "body": "Could you please edit the question instead of off topic."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1439357544, "creation_date": 1439357544, "answer_id": 31956735, "question_id": 31956653, "link": "https://stackoverflow.com/questions/31956653/ruby-syntax-error-with-declarative-concept-of-using-variable/31956735#31956735", "title": "Ruby syntax error with declarative concept of using variable", "body": "<p>The <code>:=</code> is not valid Ruby.</p>\n\n<p>The error message is because symbols are represented by leading colons so <code>:example</code> is a symbol (compare to <code>\"example\"</code> which is a string).</p>\n\n<p>So encountering <code>:</code> Ruby expects a valid beginning character for a symbol, which would be any of...</p>\n\n<pre><code>@$_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\n</code></pre>\n\n<p>Middle characters can be...</p>\n\n<pre><code>_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\n</code></pre>\n\n<p>And the last character can be... </p>\n\n<pre><code>!_=?ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\n</code></pre>\n\n<p>So <code>=</code> is never a valid symbol character.</p>\n\n<p>The article you reference is showing pseudo-code not actual Ruby.</p>\n"}], "owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "closed_date": 1439367896, "accepted_answer_id": 31956735, "answer_count": 1, "score": -2, "last_activity_date": 1439441330, "creation_date": 1439357080, "last_edit_date": 1439441330, "question_id": 31956653, "link": "https://stackoverflow.com/questions/31956653/ruby-syntax-error-with-declarative-concept-of-using-variable", "closed_reason": "Not suitable for this site", "title": "Ruby syntax error with declarative concept of using variable", "body": "<p>I am trying to use the reactive programming concept in ruby, I have create two block of code:</p>\n\n<h1>1 Imperative</h1>\n\n<pre><code>a = 5, b = 2\nc = a + b\nprint c #=&gt; 7\n\na = 2\nprint c #=&gt; 7\n</code></pre>\n\n<h1>2 Declarative</h1>\n\n<pre><code>a := 5, b := 2\nc := a + b\nprint c #=&gt; 7\n\na := 2\nprint c #=&gt; 4\n</code></pre>\n\n<p>However second example doesn't work for me and give the below error:</p>\n\n<pre><code>d.rb:1: syntax error, unexpected '=', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END\na := 5, b := 2\n    ^\n</code></pre>\n\n<p>Please anyone help me to find out the error in the code. Any suggestion will be highly appreciated. </p>\n\n<p>I know the second one is pseudo code but one thing surprise me that top score person make it off topic? The second code can also be executed using Reactive Library and top score programmer don't aware about it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "rmagick", "attachment-fu"], "answers": [{"tags": [], "owner": {"reputation": 723, "user_id": 2609509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IstCH.jpg?s=128&g=1", "display_name": "Marcelo Austria", "link": "https://stackoverflow.com/users/2609509/marcelo-austria"}, "is_accepted": false, "score": 0, "last_activity_date": 1439880073, "creation_date": 1439880073, "answer_id": 32065291, "question_id": 31956625, "link": "https://stackoverflow.com/questions/31956625/attachment-fu-rotate-image-in-s3-storage-rails/32065291#32065291", "title": "Attachment_fu rotate image in S3 storage Rails", "body": "<p>I solved this problem.</p>\n\n<pre><code>def update_photo\n      require 'RMagick'\n      require 'base64'\n\n      # get the image data in Photo table\n      @photo = Photo.where(id: params[:photo_id]).first\n\n      # get image path in S3 url and encode to Base64 binary\n      img_url = @photo.s3_url()\n      img_uri = URI.parse(img_url)\n      base64_image = Base64.encode64(open(img_uri) { |io| io.read })\n      image_file_name = File.basename(img_uri.path,File.extname(img_uri.path))\n      filename_path = \"#{Rails.root.to_s}/tmp/#{image_file_name}\"\n\n      # create tempfile in rails root/tmp folder and decode the Base64 binary into image file, then processing RMagick to rotate the image into desire image rotation.\n      @tempfile = Tempfile.new(filename_path)\n      @tempfile.binmode\n      @tempfile.write Base64.decode64(base64_image)\n      @tempfile.close\n\n      # rotate image using RMagick\n      Magick::Image.read(img_uri).first.rotate!(params[:photo_degree].to_i).write(@tempfile.path)\n\n      # for security we want the actual content type, not just what was passed in\n      # get mime type of image and passed into ActionDispatch type\n      content_type = `file --mime -b #{@tempfile.path}`.split(\";\")[0]\n\n      # we will also add the extension ourselves based on the above\n      # if it's not gif/jpeg/png, it will fail the validation in the upload model\n      extension = content_type.match(/gif|jpeg|png/).to_s\n      extension = \"jpg\" if extension == \"jpeg\"\n\n      # append filename to prevent browser image caching\n      filename_path += \"_#{params[:photo_degree]}\"\n\n      filename_path += \".#{extension}\" if extension\n\n      # passed the data into  Rails core ActionDispatch instead of file input object\n      file = ActionDispatch::Http::UploadedFile.new({\n        tempfile: @tempfile,\n        type: content_type,\n        filename: filename_path\n      })\n\n      # delete the existing image\n      @photo.destroy \n\n      # create new image\n      img_rotate                = Photo.new()\n      img_rotate.id             = @photo.id\n      img_rotate.uploaded_data  = file\n      img_rotate.save\n\n       ensure\n          clean_tempfile\n\nend\n\n  def clean_tempfile\n    if @tempfile\n      @tempfile.close\n      @tempfile.unlink\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 723, "user_id": 2609509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IstCH.jpg?s=128&g=1", "display_name": "Marcelo Austria", "link": "https://stackoverflow.com/users/2609509/marcelo-austria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439880073, "creation_date": 1439356946, "last_edit_date": 1439357865, "question_id": 31956625, "link": "https://stackoverflow.com/questions/31956625/attachment-fu-rotate-image-in-s3-storage-rails", "title": "Attachment_fu rotate image in S3 storage Rails", "body": "<p>How to rotate image in S3 storage, I'm using Attachment_fu and Amazon S3 , I want to implement a feature that lets users edit existing images by rotating it 90 degrees. I was wondering if anyone had played with this, or had any ideas.  I'm currently using rmagick\nto rotate the image in Rails directory. But in AWS S3 storage cannot rotate the image. </p>\n\n<pre><code>require 'RMagick'\n\ndef rotate\n    photo   = Photo.find(params[:id])\n    image   = Magick::ImageList.new(photo.file)\n    image   = image.rotate(90)\n    image.write(photo.file)\nend\n</code></pre>\n\n<p>I'm using this gem:</p>\n\n<pre><code>gem 'pothoven-attachment_fu'\ngem 'aws-s3'\ngem 'rmagick'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bidirectional-relation", "rails-4-2-1"], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 5200000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0442c0facc1a83a479f56bb41ebf1f34?s=128&d=identicon&r=PG", "display_name": "Nested Software", "link": "https://stackoverflow.com/users/5200000/nested-software"}, "edited": false, "score": 0, "creation_date": 1439419032, "post_id": 31956690, "comment_id": 51859575, "body": "Thanks. I find that I still ran into the problem described here:    <a href=\"http://viget.com/extend/exploring-the-inverse-of-option-on-rails-model-associations\" rel=\"nofollow noreferrer\">viget.com/extend/&hellip;</a>    under the heading <i>Creating an object and its children via accepts_nested_attributes_for in a :has_many association.</i> I find it&#39;s easier to just set the inverses for every association and that way I don&#39;t have to worry about whether or not it&#39;s going to &quot;just work&quot; for a given case..."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 304, "user_id": 5200000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0442c0facc1a83a479f56bb41ebf1f34?s=128&d=identicon&r=PG", "display_name": "Nested Software", "link": "https://stackoverflow.com/users/5200000/nested-software"}, "edited": false, "score": 4, "creation_date": 1439449915, "post_id": 31956690, "comment_id": 51868836, "body": "@Nesteddoll Easier in the short term, perhaps. I manage literally hundreds of production Rails applications and I can tell you with certainty that littering your application with unnecessary code that you don&#39;t understand will quickly become a maintenance nightmare. Challenge yourself to be better, don&#39;t add extra code to your app that you don&#39;t need and don&#39;t add code that you don&#39;t understand. Your future self will thank you."}, {"owner": {"reputation": 304, "user_id": 5200000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0442c0facc1a83a479f56bb41ebf1f34?s=128&d=identicon&r=PG", "display_name": "Nested Software", "link": "https://stackoverflow.com/users/5200000/nested-software"}, "edited": false, "score": 0, "creation_date": 1439505510, "post_id": 31956690, "comment_id": 51902495, "body": "thank you. I do appreciate what you&#39;re saying - and I will look into inverse_of in more detail."}, {"owner": {"reputation": 304, "user_id": 5200000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0442c0facc1a83a479f56bb41ebf1f34?s=128&d=identicon&r=PG", "display_name": "Nested Software", "link": "https://stackoverflow.com/users/5200000/nested-software"}, "edited": false, "score": 1, "creation_date": 1439509501, "post_id": 31956690, "comment_id": 51903689, "body": "Hi Brad, I&#39;ll accept your answer - I needed to look up how to do that as I am a new so user :). In addition to non-standard names, I there appear to be two main additional cases where explicitly setting inverse_of is needed:  1. for invalid_automatic_inverse_options ( <a href=\"http://www.rubydoc.info/docs/rails/ActiveRecord/Reflection/AssociationReflection\" rel=\"nofollow noreferrer\">rubydoc.info/docs/rails/ActiveRecord/Reflection/&hellip;</a> ) 2. if you&#39;re accepting nested attributes as per ( <a href=\"http://viget.com/extend/exploring-the-inverse-of-option-on-rails-model-associations\" rel=\"nofollow noreferrer\">viget.com/extend/&hellip;</a> )  Thank you for holding me to account. It definitely cleaned up the code when I was able to remove the extra ones"}], "tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": true, "score": 3, "last_activity_date": 1445956978, "last_edit_date": 1445956978, "creation_date": 1439357281, "answer_id": 31956690, "question_id": 31956100, "link": "https://stackoverflow.com/questions/31956100/rails-4-when-is-inverse-of-required/31956690#31956690", "title": "rails 4 When is &quot;inverse_of&quot; required?", "body": "<p>It is typically desirable to have inverses set up. The good news is that this is handled automatically in most cases. You usually only need to explicitly set the inverses for associations with non-standard names. You can find out a lot more in the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#module-ActiveRecord::Associations::ClassMethods-label-Setting+Inverses\" rel=\"nofollow\">official documentation</a>.</p>\n"}], "owner": {"reputation": 304, "user_id": 5200000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0442c0facc1a83a479f56bb41ebf1f34?s=128&d=identicon&r=PG", "display_name": "Nested Software", "link": "https://stackoverflow.com/users/5200000/nested-software"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 3, "accepted_answer_id": 31956690, "answer_count": 1, "score": 7, "last_activity_date": 1445956978, "creation_date": 1439354059, "last_edit_date": 1441734367, "question_id": 31956100, "link": "https://stackoverflow.com/questions/31956100/rails-4-when-is-inverse-of-required", "title": "rails 4 When is &quot;inverse_of&quot; required?", "body": "<p>I am developing a web app using rails 4 for the first time. I am making all of my model associations bidirectional and using inverse_of wherever it is allowed. </p>\n\n<p>From reading the documentation, I've developed the impression that this is probably the best practice, but that's never really spelled out clearly anywhere. </p>\n\n<p>I'd appreciate any general advice in this regard from experienced rails developers. I hope the question is not too vague to have value here.</p>\n\n<p>Thanks!</p>\n\n<p><strong>Update</strong>: In addition to non-standard names, there appear to be two main additional cases where explicitly setting inverse_of is needed:</p>\n\n<ol>\n<li>for INVALID_AUTOMATIC_INVERSE_OPTIONS  ( <a href=\"http://www.rubydoc.info/docs/rails/ActiveRecord/Reflection/AssociationReflection\" rel=\"noreferrer\">http://www.rubydoc.info/docs/rails/ActiveRecord/Reflection/AssociationReflection</a> )</li>\n<li>if you're accepting nested attributes - This is because the parent object is not saved yet and thus does not have an id. See <a href=\"http://viget.com/extend/exploring-the-inverse-of-option-on-rails-model-associations\" rel=\"noreferrer\">http://viget.com/extend/exploring-the-inverse-of-option-on-rails-model-associations</a> </li>\n</ol>\n"}]