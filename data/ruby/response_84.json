[{"tags": ["ruby-on-rails", "ruby", "variables", "initialization"], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "is_accepted": true, "score": 2, "last_activity_date": 1471477691, "creation_date": 1471477691, "answer_id": 39007909, "question_id": 39007832, "link": "https://stackoverflow.com/questions/39007832/how-to-uninitialize-undefine-a-variable-in-ruby-so-i-dont-get-warnings-in-conso/39007909#39007909", "title": "How to uninitialize/undefine a variable in Ruby so I don&#39;t get warnings in console?", "body": "<p>In ruby whenever you use a capital letter first letter you are creating a constant. You will be warned when it is redefined.</p>\n\n<p>For example</p>\n\n<pre><code>class\n  THIS_IS_A_CONSTANT = 42\n  ThisIsAlsoAConstant = \"The answer!\"\n\n  @@this_is_a_class_variable\n\n  def a_method\n   @this_is_a_member_variable = true\n   this_is_a_local_variable = true\n  end\n\nend\n</code></pre>\n\n<p>If you create a constant inside a method, you will get re-definition error the second time you call the method.</p>\n"}, {"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 3, "last_activity_date": 1471479737, "creation_date": 1471479737, "answer_id": 39008161, "question_id": 39007832, "link": "https://stackoverflow.com/questions/39007832/how-to-uninitialize-undefine-a-variable-in-ruby-so-i-dont-get-warnings-in-conso/39008161#39008161", "title": "How to uninitialize/undefine a variable in Ruby so I don&#39;t get warnings in console?", "body": "<p>As zhon points out, you are actually creating a constant.  The <code>defined?</code> keyword demonstrates this:</p>\n\n<pre><code>local_var = \"foo\"\nsome_constant = \"bar\"\nLocal_var = \"foo\"\nSOME_CONSTAT = \"baz\"\n\nputs defined? local_var                 #=&gt; local-variable\nputs defined? some_constant             #=&gt; local-variable\nputs defined? Local_var                 #=&gt; constant\nputs defined? SOME_CONSTAT              #=&gt; constant \n</code></pre>\n\n<p>However, you shouldn't create initially-capitalized constants.  The convention is to use <a href=\"https://github.com/bbatsov/ruby-style-guide#screaming-snake-case\" rel=\"nofollow\"><code>SCREAMING_SNAKE_CASE</code></a>.</p>\n"}], "owner": {"reputation": 225, "user_id": 6554042, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/n8yMn.png?s=128&g=1", "display_name": "Forwarding", "link": "https://stackoverflow.com/users/6554042/forwarding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 39007909, "answer_count": 2, "score": 1, "last_activity_date": 1471479737, "creation_date": 1471477074, "question_id": 39007832, "link": "https://stackoverflow.com/questions/39007832/how-to-uninitialize-undefine-a-variable-in-ruby-so-i-dont-get-warnings-in-conso", "title": "How to uninitialize/undefine a variable in Ruby so I don&#39;t get warnings in console?", "body": "<p>I keep getting this warning in console, it's cluttering my <code>puts</code> output, and I want it gone:</p>\n\n<pre><code>d.rb:24: warning: previous definition of VariableA was here\nd.rb:86: warning: already initialized constant VariableA\n</code></pre>\n\n<p>Tried doing this after using them:</p>\n\n<pre><code>VariableA = nil\nVariableB = nil\n</code></pre>\n\n<p>Important note: These variables are re-used in a loop.</p>\n"}, {"tags": ["css", "ruby", "windows", "sass", "compass"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1471476798, "creation_date": 1471476798, "answer_id": 39007791, "question_id": 39007672, "link": "https://stackoverflow.com/questions/39007672/at-root-a-results-in-error/39007791#39007791", "title": "@at-root a#{&amp;} results in error", "body": "<p>You can't do interpolation like this.</p>\n\n<p>Rename the file to have a <code>.scss.erb</code> extension and then do the interpolation with ERB:</p>\n\n<pre><code>.button {\n  @at-root a&lt;%= \"my_string_inserted_with_ruby\" %&gt; {\n   color: green;\n  }\n}\n</code></pre>\n\n<p>But I'm unclear ... what is the <code>&amp;</code> you're trying to insert, and why are you doing it with interpolation?</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 6722344, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5bfec98a6580360ebeb609187b070ec1?s=128&d=identicon&r=PG&f=1", "display_name": "KINKWILDE", "link": "https://stackoverflow.com/users/6722344/kinkwilde"}, "is_accepted": false, "score": 0, "last_activity_date": 1471533043, "creation_date": 1471533043, "answer_id": 39021746, "question_id": 39007672, "link": "https://stackoverflow.com/questions/39007672/at-root-a-results-in-error/39021746#39021746", "title": "@at-root a#{&amp;} results in error", "body": "<p>I don't have the answer but to help with the problem, if I compile your code</p>\n\n<p><code>.button {\n    @at-root a#{&amp;} {\n        color: green;\n    }\n}</code></p>\n\n<p>It compiles to this as expected</p>\n\n<p><code>a.button {\n    color: green;\n}</code></p>\n\n<p>So it definitely sounds like a dev environment issues. Sorry I can't help more. I am on a windows machine using atom, with node-sass &amp; sass-autocompile.</p>\n"}], "owner": {"reputation": 31, "user_id": 1898804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZnAg2.jpg?s=128&g=1", "display_name": "fallenturtle", "link": "https://stackoverflow.com/users/1898804/fallenturtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471533043, "creation_date": 1471475981, "question_id": 39007672, "link": "https://stackoverflow.com/questions/39007672/at-root-a-results-in-error", "title": "@at-root a#{&amp;} results in error", "body": "<p>When I try to use @at-root and Interpolation I'm getting an error... but I'm not sure why... I'm even just using an out-of-the-book example for testing and I still get an error:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.button {\r\n  @at-root a#{&amp;} {\r\n   color: green;\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Error sass/Site.scss (Line 28 of sass/partials/_site-title.scss: Invalid CSS\n after \"  @at-root a#{\": expected expression (e.g. 1px, bold), was \"&amp;} {\")</p>\n\n<p>The functionality should be there, I'm using Sass 3.4.22 combined with Compass 1.0.3 so I'm thinking its an dev enviroment issue perhaps? I'm use to working on a Mac, but I'm using a Windows 7 computer with ruby 2.2.5p319 (i386 version).</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["javascript", "html", "ruby", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6728440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded0e72b5cf9da05497bd59ebd9281bc?s=128&d=identicon&r=PG&f=1", "display_name": "Sang", "link": "https://stackoverflow.com/users/6728440/sang"}, "is_accepted": false, "score": 0, "last_activity_date": 1473610542, "last_edit_date": 1473610542, "creation_date": 1471553301, "answer_id": 39027239, "question_id": 39007611, "link": "https://stackoverflow.com/questions/39007611/phantomjs-in-handling-onclick-events-using-ruby-selenium/39027239#39027239", "title": "Phantomjs in handling onclick events using ruby-selenium", "body": "<p>I am taking a screenshot after the click however I notice that the screenshot does not have the modal window using phantom js:</p>\n\n<p>I tried to maximize the screen:\n$driver.manage.window.maximize</p>\n\n<p>And then I tried to click confirm on the window. But nothing happens.So I am stuck with not knowing if phantomjs actually rendered the modal window and also is it actually clicking on the modal popup.</p>\n\n<p>I found a solution for this if anybody needs it:</p>\n\n<pre><code>$driver.execute_script('window.alert = function(){};')\n$driver.execute_script('window.confirm = function(confirmationText) {return true; };')\ndelete=$driver.find_element(:name,\"Delete\").click\n</code></pre>\n\n<p>Before you click on the disable/delete button please create a modal window and then click on it.</p>\n"}], "owner": {"reputation": 21, "user_id": 6728440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded0e72b5cf9da05497bd59ebd9281bc?s=128&d=identicon&r=PG&f=1", "display_name": "Sang", "link": "https://stackoverflow.com/users/6728440/sang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522950002, "creation_date": 1471475502, "last_edit_date": 1522950002, "question_id": 39007611, "link": "https://stackoverflow.com/questions/39007611/phantomjs-in-handling-onclick-events-using-ruby-selenium", "title": "Phantomjs in handling onclick events using ruby-selenium", "body": "<pre><code>&lt;INPUT onclick=\"return verifyCheckedForEdit('UserAdminForm', 'itemDelUserId','hiddenUserId', 'Disable')\" id=disableButton class=buttonBlue type=submit value=Disable name=Disable&gt;\n</code></pre>\n\n<p>The above is my tag.I tried various options:</p>\n\n<pre><code>disable=$driver.find_element(:xpath,\"html/body/div[4]/div[1]/div[2]/form/table/tbody/tr[2]/td/input[2]\")\n</code></pre>\n\n<ul>\n<li>disable.submit</li>\n<li>$driver.find_element(:name,\"Disable\").send_keys :enter</li>\n<li>$driver.action.move_to(disable).double_click(disable).perform</li>\n<li>$driver.action.move_to(disable).click(disable).perform</li>\n</ul>\n\n<p>Nonone of the above work to click this button.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "blob", "wicked-pdf"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1471479375, "creation_date": 1471479375, "answer_id": 39008110, "question_id": 39007472, "link": "https://stackoverflow.com/questions/39007472/rails-wicked-pdf-gem-generating-empty-pdf/39008110#39008110", "title": "Rails wicked_pdf gem generating empty pdf", "body": "<p>Although I don't know how to fix your <code>wicked_pdf</code> code, I can recommend the following using the gem <code>prawn</code> (which is not rails-specific and removes some of the Rails magic from the equation):</p>\n\n<pre><code> format.pdf do\n   pdf_path = Rails.root.join(\"tmp\", \"my_file_name.pdf\")\n   template_path = Rails.root.join(\"app\", \"views\", \"reports\", \"generate_pdf.html.erb\")\n   this = binding\n   Prawn::Document.generate(pdf_path) do\n    text Erb.new(template_path).result(this)\n   end   \n   render file: pdf_path       \n end\n</code></pre>\n\n<p>Haven't actually tested it so apologies if it doesn't work. </p>\n"}], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 704, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471479375, "creation_date": 1471474643, "question_id": 39007472, "link": "https://stackoverflow.com/questions/39007472/rails-wicked-pdf-gem-generating-empty-pdf", "title": "Rails wicked_pdf gem generating empty pdf", "body": "<p>I am trying to download my dynamic content as a pdf file. The pdf is being generated but with no content in it, not even a simple text(when I test with that). </p>\n\n<p>As I need a lot of data which I need to calculate and send parameters without refreshing page so I am doing it through an Ajax request. </p>\n\n<pre><code>$(\"#download_pdf\").click(function() {\n    report_type = $(\"#report_type\").val();\n    start_date = $(\"#start_date\").val();\n    end_date = $(\"#end_date\").val();\n    date_type = $(\"#date_type\").val();\n\n    $.ajax({\n    data: { report_type: report_type, start_date: start_date, end_date: end_date, date_type: date_type },\n    url: '/reports/generate_pdf.pdf',\n        success: function(data) {\n          var blob=new Blob([data]);\n          var link=document.createElement('a');\n          link.href=window.URL.createObjectURL(blob);\n          link.download=\"Report_\"+new Date()+\".pdf\";\n          link.click();\n          console.log(\"pdf printed\");\n        }\n    });\n});\n</code></pre>\n\n<p>Here is my ruby code in the controller:</p>\n\n<pre><code>def generate_pdf\n\n    @results = get_report_result_by_datetype(params[:report_type], params[:start_date], params[:end_date], params[:date_type]) \n    @type = params[:report_type].to_i\n\n\n    @start_date = params[:start_date]\n    @end_date = params[:end_date]\n\n    respond_to do |format|\n      format.html\n      format.pdf do\n        render  pdf:  \"report\",\n          layout:              'pdf_layout',\n          template:            'reports/generate_pdf.html.erb',\n          encoding:            'UTF8',\n          print_media_type:    true,\n          disposition:         'attachment',\n          page_size:           'letter',\n          orientation:         'landscape',\n          lowquality:          'false',\n          debug:                true\n      end\n    end\nend  \n</code></pre>\n\n<p>There is no issue in the data which I am fetching.</p>\n\n<p><strong>Note:</strong> The most strange thing I noticed is that when the calculated array is small the generated pdf has one page and if it is big the generated pdf shows multiple pages.</p>\n\n<p>I would really appreciate if someone points where I am going wrong.</p>\n\n<p>Thanks in Advance!!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5398, "user_id": 161898, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/927fd9398416e672883fc96853bdf1ca?s=128&d=identicon&r=PG", "display_name": "mdrozdziel", "link": "https://stackoverflow.com/users/161898/mdrozdziel"}, "edited": false, "score": 3, "creation_date": 1471471664, "post_id": 39006819, "comment_id": 65365722, "body": "Your method is throwing exception. Remove the rescue clause from harvest."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1471472742, "post_id": 39006819, "comment_id": 65366095, "body": "Also, don&#39;t rescue <code>Exception</code>, rescue the exact things you want. Being to general/generic in rescues can result in very difficult to find bugs. Also, when asking about a problem in your code we need something runnable. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "is_accepted": true, "score": 3, "last_activity_date": 1471476444, "creation_date": 1471476444, "answer_id": 39007731, "question_id": 39006819, "link": "https://stackoverflow.com/questions/39006819/ruby-code-not-executed-after-method-call/39007731#39007731", "title": "Ruby code not executed after method call", "body": "<p><code>@agent.get(url)</code> will fail with a bad url or network outage.</p>\n\n<p>The problem in your code could be written as follows:</p>\n\n<pre><code>def do_something\n  begin\n    raise\n    puts \"I will never get here!\"\n  rescue\n  end\nend\n</code></pre>\n\n<p>Since you can't get rid of the <code>raise</code>, you need to do something inside the <code>rescue</code> (most likely log it):</p>\n\n<pre><code>begin\n  @agent.get(url)\n  # ...\nrescue Timeout::Error, Errno::EINVAL, Errno::ECONNRESET, EOFError,\n       Net::HTTPBadResponse, Net::HTTPHeaderSyntaxError,   \n       Net::ProtocolError =&gt; e\n  log(e.message, e.callback)\nend\n</code></pre>\n"}], "owner": {"reputation": 10904, "user_id": 3499115, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c593739208b1ddfe3eaae322ceecf5ce?s=128&d=identicon&r=PG", "display_name": "JBaczuk", "link": "https://stackoverflow.com/users/3499115/jbaczuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 39007731, "answer_count": 1, "score": 0, "last_activity_date": 1471476444, "creation_date": 1471470709, "question_id": 39006819, "link": "https://stackoverflow.com/questions/39006819/ruby-code-not-executed-after-method-call", "title": "Ruby code not executed after method call", "body": "<p>Code is not executed (puts \"hey\") in the harvest method after the call to searchEmails(page).  I'm probably missing something simple with Ruby because I'm just getting back into it.</p>\n\n<pre><code>def searchEmails(page_to_search)\n  begin\n    html = @agent.get(url).search('html').to_s\n    mail = html.scan(/['.'\\w|-]*@+[a-z]+[.]+\\w{2,}/).map.to_a\n    base = page_to_search.uri.to_s.split(\"//\", 2).last.split(\"/\", 2).first\n    mail.each{|e| @file.puts e+\";\"+base unless e.include? \"example.com\" or  e.include? \"email.com\" or  e.include? \"domain.com\" or  e.include? \"company.com\" or e.length &lt; 9 or e[0] == \"@\"}\n  end\nend\n\ndef harvest(url)\n  begin\n    page = @agent.get(url)\n    searchEmails(page)\n    puts \"hey\"\n  rescue Exception\n  end\nend\n\nurl=\"www.example.com\"\nharvest(url)\n</code></pre>\n"}, {"tags": ["ruby", "bash", "shell"], "comments": [{"owner": {"reputation": 1501, "user_id": 1073623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGnBW.jpg?s=128&g=1", "display_name": "infiniteRefactor", "link": "https://stackoverflow.com/users/1073623/infiniterefactor"}, "edited": false, "score": 0, "creation_date": 1471468881, "post_id": 39006282, "comment_id": 65364603, "body": "How do you run ruby? How exactly do you use backtick in your ruby script?"}, {"owner": {"reputation": 1842, "user_id": 1650448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/894d8191c267188064bf3bfb000127f4?s=128&d=identicon&r=PG", "display_name": "Michael K", "link": "https://stackoverflow.com/users/1650448/michael-k"}, "reply_to_user": {"reputation": 1501, "user_id": 1073623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGnBW.jpg?s=128&g=1", "display_name": "infiniteRefactor", "link": "https://stackoverflow.com/users/1073623/infiniterefactor"}, "edited": false, "score": 0, "creation_date": 1471469159, "post_id": 39006282, "comment_id": 65364718, "body": "I take the template shell script, fill in variables, and then execute using <code>#{shell_script}</code>. I use whatever ruby is <code>which ruby</code> on my machine."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1471468981, "creation_date": 1471468981, "answer_id": 39006511, "question_id": 39006282, "link": "https://stackoverflow.com/questions/39006282/script-works-from-shell-but-not-ruby/39006511#39006511", "title": "Script works from shell but not Ruby", "body": "<p>Consider what's different when you are at the command-line in the shell, versus when code is running in Ruby. </p>\n\n<p>The shell has <code>PATH</code> defined, which it walks looking for the command, hopefully eventually finding the desired one.</p>\n\n<p>Ruby doesn't do that, and instead, you need to define the absolute path to the executable. There are various ways of doing it but the simplest is to use</p>\n\n<pre><code>where spark-submit\n</code></pre>\n\n<p>at the command-line, then copy/paste that into your Ruby script. Most likely you'll end up with something like:</p>\n\n<pre><code>/usr/local/bin/spark-submit\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/path/to/rubys/gems/.../bin/spark-submit\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><code>spark-submit</code> </p>\n  \n  <p>within Ruby seems to call the shell command correctly.</p>\n</blockquote>\n\n<p>Ruby is trying to find the command in the current directory. </p>\n"}], "owner": {"reputation": 1842, "user_id": 1650448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/894d8191c267188064bf3bfb000127f4?s=128&d=identicon&r=PG", "display_name": "Michael K", "link": "https://stackoverflow.com/users/1650448/michael-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471468981, "creation_date": 1471467984, "last_edit_date": 1471468657, "question_id": 39006282, "link": "https://stackoverflow.com/questions/39006282/script-works-from-shell-but-not-ruby", "title": "Script works from shell but not Ruby", "body": "<p>I have a script that fills in parameters for multiple spark-submit jobs. The jobs work when I copy and paste them into shell, but they fail when I put the string in backticks and execute it from within Ruby.</p>\n\n<pre><code>spark-submit --master yarn-cluster \\\n  --num-executors 2 \\\n  --files ... \\\n  --class ... \\\n  -otherflags ...\n</code></pre>\n\n<p>Ruby returns</p>\n\n<pre><code>sh: 1: spark-submit: not found\n</code></pre>\n\n<p>even though <code>spark-submit</code> is in the system path. Even more confusing is that:</p>\n\n<pre><code>`spark-submit` \n</code></pre>\n\n<p>within Ruby seems to call the shell command correctly.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1471469986, "post_id": 39006156, "comment_id": 65365082, "body": "Did you really only type <code>bin&#47;rails generate controller Welcome index</code> or did you happen to try to run that as a <code>rake</code> command? <code>rails generate</code> is correct. <code>rake rails generate</code> will get you that error message."}, {"owner": {"reputation": 13, "user_id": 6528890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babb6e77f3c9b83ac5d30be5f9654be8?s=128&d=identicon&r=PG&f=1", "display_name": "Garrettc96", "link": "https://stackoverflow.com/users/6528890/garrettc96"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1471471175, "post_id": 39006156, "comment_id": 65365535, "body": "I definitely did bin/rails. That was one of my first thoughts that I somehow screwed up typing it, but it is most definitely correct :L. Thanks for the suggestion though :D."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1471473216, "post_id": 39006156, "comment_id": 65366241, "body": "Ah. You&#39;re running Rails 5, which rolled rake functions into Rails. This is making more sense now."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6528890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babb6e77f3c9b83ac5d30be5f9654be8?s=128&d=identicon&r=PG&f=1", "display_name": "Garrettc96", "link": "https://stackoverflow.com/users/6528890/garrettc96"}, "edited": false, "score": 0, "creation_date": 1471540598, "post_id": 39012461, "comment_id": 65398737, "body": "Unfortunately I have already tried this several times. Each time I get the exact same error. I&#39;ve made sure that I am in the correct directory. Is there any more information I could provide that would be useful?"}, {"owner": {"reputation": 791, "user_id": 5120006, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VLzrM.jpg?s=128&g=1", "display_name": "Cent", "link": "https://stackoverflow.com/users/5120006/cent"}, "reply_to_user": {"reputation": 13, "user_id": 6528890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babb6e77f3c9b83ac5d30be5f9654be8?s=128&d=identicon&r=PG&f=1", "display_name": "Garrettc96", "link": "https://stackoverflow.com/users/6528890/garrettc96"}, "edited": false, "score": 0, "creation_date": 1471562646, "post_id": 39012461, "comment_id": 65408507, "body": "Does running <code>rails server</code> on the console throw an error too ?"}], "tags": [], "owner": {"reputation": 791, "user_id": 5120006, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VLzrM.jpg?s=128&g=1", "display_name": "Cent", "link": "https://stackoverflow.com/users/5120006/cent"}, "is_accepted": false, "score": 0, "last_activity_date": 1471505974, "creation_date": 1471505974, "answer_id": 39012461, "question_id": 39006156, "link": "https://stackoverflow.com/questions/39006156/rails-generate-error-dont-know-how-to-build-task-rails/39012461#39012461", "title": "rails generate error dont know how to build task &#39;rails", "body": "<p>I'd say you check again in your console to make sure that you are in your application directory (the directory of the application created when you ran <code>rails new your_app</code>)</p>\n\n<p>A simple way to do this is to run the <code>ls</code> command in your console and see what it prints.</p>\n\n<p>If you're sure you are indeed within the root directory of the new app, I'd suggest you go back on step (<code>cd ..</code>) and then try creating another application (<code>rails new another_app</code>). Then <code>cd another_app</code> and run the <code>rails generate</code> command again.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6528890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babb6e77f3c9b83ac5d30be5f9654be8?s=128&d=identicon&r=PG&f=1", "display_name": "Garrettc96", "link": "https://stackoverflow.com/users/6528890/garrettc96"}, "edited": false, "score": 0, "creation_date": 1471588699, "post_id": 39024298, "comment_id": 65414880, "body": "Thanks a lot dude! That was what I needed! Is there a source for where you found this out? It might be useful in the future if I run into more errors! :D"}, {"owner": {"reputation": 877, "user_id": 3448806, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/83b56aa525e2a6679486246548749e7b?s=128&d=identicon&r=PG&f=1", "display_name": "user3448806", "link": "https://stackoverflow.com/users/3448806/user3448806"}, "reply_to_user": {"reputation": 13, "user_id": 6528890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babb6e77f3c9b83ac5d30be5f9654be8?s=128&d=identicon&r=PG&f=1", "display_name": "Garrettc96", "link": "https://stackoverflow.com/users/6528890/garrettc96"}, "edited": false, "score": 0, "creation_date": 1471593939, "post_id": 39024298, "comment_id": 65417873, "body": "Yes of course :)  <a href=\"https://github.com/Microsoft/BashOnWindows/issues/451#issuecomment-225936330\" rel=\"nofollow noreferrer\">github.com/Microsoft/BashOnWindows/issues/&hellip;</a> if you run into any other errors, just post a new issue on that repo. It&#39;s the official Repo of Bash on Windows. :)"}], "tags": [], "owner": {"reputation": 877, "user_id": 3448806, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/83b56aa525e2a6679486246548749e7b?s=128&d=identicon&r=PG&f=1", "display_name": "user3448806", "link": "https://stackoverflow.com/users/3448806/user3448806"}, "is_accepted": true, "score": 2, "last_activity_date": 1471541674, "creation_date": 1471541674, "answer_id": 39024298, "question_id": 39006156, "link": "https://stackoverflow.com/questions/39006156/rails-generate-error-dont-know-how-to-build-task-rails/39024298#39024298", "title": "rails generate error dont know how to build task &#39;rails", "body": "<p>It's a known issue of 'Bash On Windows'.</p>\n\n<p>While waiting for a fix from Microsoft, create your new app with \"--skip-spring' after 'rails new your_app'</p>\n"}], "owner": {"reputation": 13, "user_id": 6528890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babb6e77f3c9b83ac5d30be5f9654be8?s=128&d=identicon&r=PG&f=1", "display_name": "Garrettc96", "link": "https://stackoverflow.com/users/6528890/garrettc96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "accepted_answer_id": 39024298, "answer_count": 2, "score": 1, "last_activity_date": 1471541674, "creation_date": 1471467465, "question_id": 39006156, "link": "https://stackoverflow.com/questions/39006156/rails-generate-error-dont-know-how-to-build-task-rails", "title": "rails generate error dont know how to build task &#39;rails", "body": "<p>I'm following the basic RoR getting started guide and I have gotten to the point where I run \"bin/rails generate controller Welcome index\". Everything up until that point works correctly, but when I run that command I get the following error:</p>\n\n<pre><code>rails aborted!\nDon't know how to build task 'rails' (see --tasks)\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/task_manager.rb:71:in `[]'\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/application.rb:151:in `invoke_task'\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/application.rb:108:in `block (2 levels) in top_level'\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/application.rb:108:in `each'\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/application.rb:108:in `block in top_level'\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/application.rb:117:in `run_with_threads'\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/application.rb:102:in `top_level'\n/var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/rake_proxy.rb:13:in `block in run_rake_task'\n/var/lib/gems/2.3.0/gems/rake-11.2.2/lib/rake/application.rb:178:in `standard_exception_handling'\n/var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/rake_proxy.rb:10:in `run_rake_task'\n/var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:51:in `run_command!'\n/var/lib/gems/2.3.0/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\nbin/rails:9:in `require'\nbin/rails:9:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm trying to run this on Windows subsystem for Linux so that is probably where this error is stemming from. Does anybody have any insight into fixing this? I've tried remaking the project and reinstalling rails and looking all over the internet for solutions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "doorkeeper"], "answers": [{"tags": [], "owner": {"reputation": 4272, "user_id": 356060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c6b8b1ef87c072549584c0a9248537?s=128&d=identicon&r=PG", "display_name": "TuteC", "link": "https://stackoverflow.com/users/356060/tutec"}, "is_accepted": false, "score": 1, "last_activity_date": 1472612348, "creation_date": 1472612348, "answer_id": 39240066, "question_id": 39005848, "link": "https://stackoverflow.com/questions/39005848/why-does-an-authorize-application-message-appear-only-once-when-using-doorkeep/39240066#39240066", "title": "Why does an &quot;authorize application&quot; message appear only once when using doorkeeper even when clearing cookies?", "body": "<p>OAuth authorization/authentication is stateless; it doesn't depend on cookies. Instead, the token is sent on every request that needs authentication, akin to how HTTP basic auth works.</p>\n"}], "owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472612348, "creation_date": 1471466195, "question_id": 39005848, "link": "https://stackoverflow.com/questions/39005848/why-does-an-authorize-application-message-appear-only-once-when-using-doorkeep", "title": "Why does an &quot;authorize application&quot; message appear only once when using doorkeeper even when clearing cookies?", "body": "<p>So I setup an OAuth provider with doorkeeper on a Rails 5 app.  During the flow when a client app asks for an access token, I see a browser html page asking me to \"Authorize\" or \"Deny\" access.</p>\n\n<p>Once I click \"Authorize\", I never see the html page asking me to Authorize/Deny again, even if I clear the cookies.  Why is this?  And how do I keep enabling the Authorize/Deny page during testing?</p>\n"}, {"tags": ["ruby", "rvm", "rbenv", "rbenv-gemset"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471465997, "post_id": 39005324, "comment_id": 65363227, "body": "what do you mean a private bundle. To rely strictly on the gems in a Gemfile you just run bundle exec. rvm use just sets a ruby version in the current shell"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471468756, "post_id": 39005324, "comment_id": 65364538, "body": "A private bundle, @engineersmnky, means a directory to the gems of that specific application. Usually applications use a common bundle, i.e., a single directory for all applications. With this <code>rvm use ruby-2.3.1@myapp --ruby-version --create</code> I mentioned, I say to rvm to use a specific directory to that application."}, {"owner": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "edited": false, "score": 0, "creation_date": 1471477897, "post_id": 39005324, "comment_id": 65367516, "body": "<code>rvm</code> and <code>rbenv</code> are incompatible and should not be installed on the same system."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "edited": false, "score": 0, "creation_date": 1471518932, "post_id": 39005324, "comment_id": 65383848, "body": "I know that, @zhon. And this is the reason why I&#39;m asking here. If it were not by this, I&#39;d have just installed rbenv and found it out by myself."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471532404, "post_id": 39005324, "comment_id": 65393488, "body": "@engineersmnky Take a look at this, please: <a href=\"http://rubyofftherails.blogspot.com/2016/02/different-bundles-for-different.html\" rel=\"nofollow noreferrer\">rubyofftherails.blogspot.com/2016/02/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 302, "user_id": 1584664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095160eefd3dbd22195a0f7c402693ba?s=128&d=identicon&r=PG", "display_name": "Kavitha", "link": "https://stackoverflow.com/users/1584664/kavitha"}, "is_accepted": true, "score": 1, "last_activity_date": 1528869417, "creation_date": 1528869417, "answer_id": 50829957, "question_id": 39005324, "link": "https://stackoverflow.com/questions/39005324/rbenv-how-may-i-create-a-private-bundle-for-an-application/50829957#50829957", "title": "rbenv: how may I create a private bundle for an application?", "body": "<p>It's been a while since this was posted, but answering it in case others have the same question.</p>\n\n<p>Brief answer: Use <a href=\"https://bundler.io/\" rel=\"nofollow noreferrer\">bundler</a> or <a href=\"https://github.com/jf/rbenv-gemset\" rel=\"nofollow noreferrer\">rbenv-gemset</a> plugin</p>\n\n<p>Sharing more context on the general best practice: </p>\n\n<blockquote>\n  <p>rbenv is used only to pick ruby versions by setting an environment\n  variable</p>\n</blockquote>\n\n<p>Typically, it is used along with bundler and ruby-build. <em>Bundler is an alternative to rvm's gemsets and manages gems</em>. ruby-build plugin helps in installing different versions of rubies and automating it.</p>\n"}], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 50829957, "answer_count": 1, "score": 1, "last_activity_date": 1528869417, "creation_date": 1471464187, "question_id": 39005324, "link": "https://stackoverflow.com/questions/39005324/rbenv-how-may-i-create-a-private-bundle-for-an-application", "title": "rbenv: how may I create a private bundle for an application?", "body": "<p>I've never used <strong>rbenv</strong>, but now I need to know something about it and Google failed me.</p>\n\n<p>When I'm using <strong>rvm</strong> and I want to create a private bundle for an application (say myapp), with Ruby 2.3.1, for instance, I just issue the command </p>\n\n<pre><code>rvm use ruby-2.3.1@myapp --ruby-version --create\n</code></pre>\n\n<p>This will create two files in the application root directory: <strong>.ruby-version</strong> and <strong>.ruby-gemset</strong>, as well as create the directory for the gems under <strong>/home/username/.rvm/</strong>.</p>\n\n<p>What I would like to know is: <strong>How may I achieve the same with rbenv?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4517, "user_id": 1286937, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b631d2f9dc7aeb3563f35c03f73db888?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/1286937/victor"}, "edited": false, "score": 0, "creation_date": 1471463849, "post_id": 39004737, "comment_id": 65362117, "body": "Just find the properly css selector for this image and create a css with something like: <code>.my-big-img-class { max-width: 50px }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 6712802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-5HNrE7YGUzE/AAAAAAAAAAI/AAAAAAAAACE/pdt0nd3arb8/photo.jpg?sz=128", "display_name": "Alexander Borovoi", "link": "https://stackoverflow.com/users/6712802/alexander-borovoi"}, "edited": false, "score": 0, "creation_date": 1471470743, "post_id": 39005578, "comment_id": 65365364, "body": "Unfortunately, the problem lies elsewhere. if image uploaded - then all is well. but if image missing,  then loaded the standard &quot; default_url: &#39;/images/:style/missing.png&#39;&quot; . and it looks large. Problem here: data-img-src=&#39;#{user.avatar.url(:thumb)}&#39; . if i use code like this :  &quot;data-img-src=&#39;#{user.avatar.url(:thumb), size: 50}&#39;&quot; . code not working."}], "tags": [], "owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "is_accepted": false, "score": 1, "last_activity_date": 1471465186, "creation_date": 1471465186, "answer_id": 39005578, "question_id": 39004737, "link": "https://stackoverflow.com/questions/39004737/how-do-sizing-image-with-paperclip-gem/39005578#39005578", "title": "how do sizing image with paperclip gem", "body": "<p>in your model:  </p>\n\n<pre><code>  has_attached_file :avatar, \n        :styles =&gt; { thumb: \"100x100#\", medium: \"300x300#\", large: \"900x500#\"}\n</code></pre>\n\n<p>or whatever size you want it to be. The <code>#</code> is for cropping. It will select the center of the image and crop the specified height and width from there. You can also just use the default <code>&gt;</code> if you don't want the cropping... and in your view:</p>\n\n<pre><code>&lt;%= image_tag @user.avatar.url(:medium) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 6712802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-5HNrE7YGUzE/AAAAAAAAAAI/AAAAAAAAACE/pdt0nd3arb8/photo.jpg?sz=128", "display_name": "Alexander Borovoi", "link": "https://stackoverflow.com/users/6712802/alexander-borovoi"}, "is_accepted": true, "score": 0, "last_activity_date": 1471474833, "creation_date": 1471474833, "answer_id": 39007506, "question_id": 39004737, "link": "https://stackoverflow.com/questions/39004737/how-do-sizing-image-with-paperclip-gem/39007506#39007506", "title": "how do sizing image with paperclip gem", "body": "<p>I solved the problem. Drop-down list uses \njquery.image-select.js</p>\n\n<pre><code>(function($) {\n\n// Image template, this can be overridden from the constructor (options.template),\n// must contains {src} placeholder. Ther eare two class names 'chose-image' or 'chose-image-small', modifiy in CSS\nvar fn_template = '&lt;img class=\"{class_name} \" src=\"{url}\" /&gt;';\n\n// Store the original 'chosen' method\nvar fn_chosen = $.fn.chosen;........\n</code></pre>\n\n<p>I can set class for all images, like this </p>\n\n<pre><code> var fn_template = '&lt;img class=\"{class_name} image-circle-minisize\" src=\"{url}\" /&gt;';\n</code></pre>\n\n<p>and everything works</p>\n"}], "owner": {"reputation": 124, "user_id": 6712802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-5HNrE7YGUzE/AAAAAAAAAAI/AAAAAAAAACE/pdt0nd3arb8/photo.jpg?sz=128", "display_name": "Alexander Borovoi", "link": "https://stackoverflow.com/users/6712802/alexander-borovoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 39007506, "answer_count": 2, "score": 1, "last_activity_date": 1471474833, "creation_date": 1471461936, "last_edit_date": 1471473753, "question_id": 39004737, "link": "https://stackoverflow.com/questions/39004737/how-do-sizing-image-with-paperclip-gem", "title": "how do sizing image with paperclip gem", "body": "<p>i want to use avatar through paperclip. in tutorial use gravatar</p>\n\n<p>messages_helper.rb</p>\n\n<pre><code> def recipients_options(chosen_recipient = nil)\n s = ''\n User.all.each do |user|\n s &lt;&lt; \"&lt;option value='#{user.id}' \n               data-img-src='#{gravatar_image_url(user.email, size: 50)}' \n               #{'selected' if user == chosen_recipient}&gt;\n               #{user.name}&lt;/option&gt;\"\n end\n s.html_safe\n end\n</code></pre>\n\n<p>i change on this code and it working. </p>\n\n<pre><code>module MessagesHelper\n  def recipients_options(chosen_recipient = nil)\n   s = ''\n   User.all.each do |user|\n    s &lt;&lt; \"&lt;option value='#{user.id}' data-img-src='#{user.avatar.url(:thumb)}'  \n               #{'selected' if user == chosen_recipient}&gt;#{user.username}&lt;/option&gt;\"\n   end\n   s.html_safe\n  end\n\n\nend\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;%= label_tag 'recipients', 'Choose recipients' %&gt;\n  &lt;%= select_tag 'recipients', recipients_options(@chosen_recipient), multiple: true, class: 'form-control chosen-it ' %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code> has_attached_file :avatar, :styles =&gt; { :medium =&gt; \"150x150&gt;\", :thumb =&gt; \"30x30#\" }, default_url: \"https://s3.amazonaws.com/myinstick/logo/instagram-icon.png\"\n validates_attachment_content_type :avatar, :content_type =&gt; /\\Aimage\\/.*\\Z/\n</code></pre>\n\n<p>But! if user dont have avatar, that use image paperclip default. and it does not scaling  and It looks big. how to set the style or size.</p>\n\n<p><a href=\"http://i.stack.imgur.com/iGNVG.png\" rel=\"nofollow\">\nit looks like this</a></p>\n"}, {"tags": ["ruby", "linux", "mount-point"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1471462752, "post_id": 39003655, "comment_id": 65361527, "body": "Please use formatting to make your text more easily read. This helps others understand the question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471463045, "post_id": 39003655, "comment_id": 65361674, "body": "This doesn&#39;t sound like a Ruby problem if the code is the same and it works for most of the cases. I&#39;d look for differences between the Windows servers. <a href=\"https://superuser.com\">Super User</a> is probably a better site to ask this on as it sounds like an OS-related problem."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 3955146, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9431e59425e5fe7d076f50f643d33e13?s=128&d=identicon&r=PG&f=1", "display_name": "browser30", "link": "https://stackoverflow.com/users/3955146/browser30"}, "edited": false, "score": 0, "creation_date": 1471718828, "post_id": 39006783, "comment_id": 65464574, "body": "The subfolders are all created already - the ruby code does not create them. So, that&#39;s not the  issue."}], "tags": [], "owner": {"reputation": 43, "user_id": 6716026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8X4I.png?s=128&g=1", "display_name": "Jakov Kholodkov", "link": "https://stackoverflow.com/users/6716026/jakov-kholodkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1471470438, "creation_date": 1471470438, "answer_id": 39006783, "question_id": 39003655, "link": "https://stackoverflow.com/questions/39003655/how-to-create-hard-links-on-linux-to-windows-shares/39006783#39006783", "title": "How to create hard-links on Linux to Windows shares", "body": "<p>The bash 'ln' command seems to create the required subfolders by itself. \nin ruby you have to do it yourself. \nThere is a nice gem called 'rake' which provides the pathmap method for strings, directory and filenames. </p>\n\n<p>Before creating a hardlink you can have to create the subdirectory first:</p>\n\n<pre><code>require 'rake'\ndef create_parent_dirs_for(filename)\n  mkdir_p filename.pathmap('%d')\nend\n</code></pre>\n\n<p>Further reading and watching: <a href=\"http://www.virtuouscode.com/2014/04/24/rake-part-4-pathmap/\" rel=\"nofollow\">http://www.virtuouscode.com/2014/04/24/rake-part-4-pathmap/</a></p>\n"}], "owner": {"reputation": 61, "user_id": 3955146, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9431e59425e5fe7d076f50f643d33e13?s=128&d=identicon&r=PG&f=1", "display_name": "browser30", "link": "https://stackoverflow.com/users/3955146/browser30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471470438, "creation_date": 1471457649, "last_edit_date": 1471462950, "question_id": 39003655, "link": "https://stackoverflow.com/questions/39003655/how-to-create-hard-links-on-linux-to-windows-shares", "title": "How to create hard-links on Linux to Windows shares", "body": "<p>I have a Ruby script written by someone else that creates hard links for files located in the main folder, placing them into the subfolder using:</p>\n\n<pre><code>File.link('/mnt/server10/file1.lzo', '/mnt/server10/subfolder10/file2.lzo')\n</code></pre>\n\n<p>I have 10 identical Windows servers' shares mounted on the Linux server and 9 out of 10 mount points have no issues with the above command. However, one mount point is having an issue with the above command and generates the following error:</p>\n\n<pre><code>Hardlink failed: No such file or directory - /mnt/server10/file1.lzo or /mnt/server10/subfolder10/file1.lzo\n</code></pre>\n\n<p>I have no problem creating the link manually:</p>\n\n<pre><code>ln /mnt/server10/file1.lzo  /mnt/server10/subfolder10/file1.lzo\n</code></pre>\n\n<p>All permissions and settings are identical. </p>\n\n<p>The Ruby script that creates hard links is the same for all mount points. The mount points have identical permissions on the Linux and Windows sides. </p>\n"}, {"tags": ["ruby", "proc"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471468283, "post_id": 39003643, "comment_id": 65364321, "body": "<code>method</code> is a reserved name, and defining a method with that name can be problematic."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 3, "last_activity_date": 1471497600, "last_edit_date": 1471497600, "creation_date": 1471457613, "answer_id": 39003643, "question_id": 39003560, "link": "https://stackoverflow.com/questions/39003560/ruby-is-prc-different-than-block/39003643#39003643", "title": "Ruby - Is &amp;prc different than &amp;block?", "body": "<blockquote>\n  <p>Is there any difference between these two when it comes to\n  performance, convention, or versatility?</p>\n</blockquote>\n\n<p>There is no difference between these, you able to name it as you want, it's just a name. Some devs call it <code>&amp;blk</code> some <code>&amp;block</code> or <code>&amp;b</code> or <code>&amp;foo</code> ...</p>\n\n<pre><code>&gt;&gt; def foo &amp;foo\n&gt;&gt;   yield\n&gt;&gt; end\n=&gt; :foo\n&gt;&gt; foo do\n?&gt;   puts '1'\n&gt;&gt; end\n1\n</code></pre>\n\n<p><sub>Strictly saying <code>&amp;</code> is an operator which you can apply to any object, and it will take care of converting that object to a <code>Proc</code> by calling <code>to_proc()</code>.</sub></p>\n\n<pre><code>&gt;&gt; def bar(&amp;some_proc)\n&gt;&gt;   some_proc\n&gt;&gt; end\n=&gt; :bar\n&gt;&gt; p = bar { puts 'Call proc' }\n=&gt; #&lt;Proc:0x005601e6d69c80@(irb):4&gt;\n&gt;&gt; p.call\n=&gt; Call proc\n&gt;&gt; p.class\n=&gt; Proc\n</code></pre>\n\n<p><sub>Only the one thing is important, the name should be informative.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1471457767, "creation_date": 1471457767, "answer_id": 39003681, "question_id": 39003560, "link": "https://stackoverflow.com/questions/39003560/ruby-is-prc-different-than-block/39003681#39003681", "title": "Ruby - Is &amp;prc different than &amp;block?", "body": "<p>in your example, there is not a difference between <code>&amp;block</code> and <code>&amp;prc</code>, because in each case you are just passing a block to be call into the method.</p>\n\n<p>Block and proc are similar in that they are both blocks of code. </p>\n\n<pre><code>[1,2,3].each {|x| puts x }\n</code></pre>\n\n<p>everything within the {} is the block. </p>\n\n<p>A proc is just a block of code that you can name and can be called at a later time.</p>\n\n<pre><code>put_element = Proc.new {|x| puts x}\n</code></pre>\n\n<p>then you use put_element as an argument in your function. </p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1471468683, "creation_date": 1471468683, "answer_id": 39006431, "question_id": 39003560, "link": "https://stackoverflow.com/questions/39003560/ruby-is-prc-different-than-block/39006431#39006431", "title": "Ruby - Is &amp;prc different than &amp;block?", "body": "<p>Line any argument to your method the name is largely subjective. Typically you'll see <code>&amp;block</code> used if only by convention, but the name itself can be anything you want so long as it's a valid variable name.</p>\n\n<p>In your example you're declaring a block name but not actually using the name. Keep in mind that <em>any</em> Ruby method can be given a block, there's no way to restrict this, but it's up to the method itself to use the block if it wants. That block can be called <em>zero or more times</em> either immediately or at some point in the future. Giving the block to the method surrenders control, so be sure to read the documentation on any given method carefully. There can be surprises.</p>\n\n<p>If you need to chain through a block, declare it with a name:</p>\n\n<pre><code>def passes_through(&amp;block)\n  [ 1, 2, 3, 4 ].each(&amp;block)\nend\n</code></pre>\n\n<p>If you are going to <code>yield</code> on the block there's no need here:</p>\n\n<pre><code>def direct_call\n  [ 1, 2, 3, 4 ].each do |n|\n    yield n\n  end\nend\n</code></pre>\n\n<p>If you're going to preserve the call and use it later, that's also a case for naming it:</p>\n\n<pre><code>def preserved_call(&amp;block)\n  @callback = block\nend\n\ndef make_callback\n  @callback and @callback.call\nend\n</code></pre>\n\n<p>Any method can check if a block was supplied:</p>\n\n<pre><code>def tests_for_block\n  if (block_given?)\n    yield 'value'\n  else\n    'value'\n  end\nend\n</code></pre>\n\n<p>There's a small but measurable cost to capturing a block by declaring it in the method signature, a lot of computation has to be done to properly capture all the variables that might be used in a closure situation. In performance sensitive code you'll want to avoid this.</p>\n\n<p>You can dynamically create a block:</p>\n\n<pre><code>def captures_conditionally\n  if (block_given?)\n    @callback = Proc.new\n  end\nend\n</code></pre>\n\n<p>The <code>Proc.new</code> method will assume control over whatever block has been supplied to the method if one has been.</p>\n"}], "owner": {"reputation": 853, "user_id": 6182932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VlpyR.jpg?s=128&g=1", "display_name": "Nunchucks", "link": "https://stackoverflow.com/users/6182932/nunchucks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 39003643, "answer_count": 3, "score": 1, "last_activity_date": 1471497600, "creation_date": 1471457321, "question_id": 39003560, "link": "https://stackoverflow.com/questions/39003560/ruby-is-prc-different-than-block", "title": "Ruby - Is &amp;prc different than &amp;block?", "body": "<p>I'm writing a simple method that adds <code>num</code> to the return value of the block that is passed to it and I noticed that &amp;block and &amp;prc both work. I know that a proc is an object and can be assigned to a variable which could be handy. Is that the only difference though? Is there any difference between these two when it comes to performance, convention, or versatility? Is it ever better to use &amp;block instead of &amp;prc?</p>\n\n<pre><code>def adder(num = 1, &amp;block)\n  yield + num\nend\n</code></pre>\n\n<p>vs. </p>\n\n<pre><code>def adder(num = 1, &amp;prc)\n  yield + num\nend\n</code></pre>\n"}, {"tags": ["ruby", "rack"], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 5, "last_activity_date": 1471463221, "last_edit_date": 1471463221, "creation_date": 1471456859, "answer_id": 39003418, "question_id": 39003087, "link": "https://stackoverflow.com/questions/39003087/what-does-w-true-do/39003418#39003418", "title": "What does &quot;$-w = true&quot; do?", "body": "<p><code>-w</code> is a Ruby global variable. </p>\n\n<p>This is from the <a href=\"http://ruby-doc.org/core-2.0.0/doc/globals_rdoc.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p><code>$-0</code> The alias to $/.</p>\n  \n  <p><code>$-a</code> True if option -a is set. Read-only variable.</p>\n  \n  <p><code>$-d</code> The alias of $DEBUG. See $DEBUG above for further discusison.</p>\n  \n  <p><code>$-F</code> The alias to $;.</p>\n  \n  <p><code>$-i</code> In in-place-edit mode, this variable holds the extension,\n  otherwise nil.</p>\n  \n  <p><code>$-I</code> The alias to $:.</p>\n  \n  <p><code>$-l</code> True if option -l is set. Read-only variable.</p>\n  \n  <p><code>$-p</code> True if option -p is set. Read-only variable.</p>\n  \n  <p><code>$-v</code> An alias of $VERBOSE. See $VERBOSE above for further discussion.</p>\n  \n  <p><code>$-w</code> An alias of $VERBOSE. See $VERBOSE above for further discussion.</p>\n</blockquote>\n"}], "owner": {"reputation": 1969, "user_id": 689601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7a838ac58aede5044b4d970caa95a5a6?s=128&d=identicon&r=PG", "display_name": "Raven", "link": "https://stackoverflow.com/users/689601/raven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 39003418, "answer_count": 1, "score": 3, "last_activity_date": 1471463440, "creation_date": 1471455610, "last_edit_date": 1471463440, "question_id": 39003087, "link": "https://stackoverflow.com/questions/39003087/what-does-w-true-do", "title": "What does &quot;$-w = true&quot; do?", "body": "<p>I've been reading Rack's source code, and in <a href=\"https://github.com/rack/rack/blob/master/lib/rack/server.rb#L259\" rel=\"nofollow\">server.rb</a> I found:</p>\n\n<pre><code>$-w = true\n</code></pre>\n\n<p>It's assigning a value to a global variable. The documentation says:</p>\n\n<pre><code>Options may include:\n    # * :warn\n    #     turn on warnings ($-w = true)\n</code></pre>\n\n<p>But still it is a bit confusing for me how that  global variable works as it does not adhere to the language syntax I understand.</p>\n\n<p>Also tried these:</p>\n\n<pre><code>$-w = \"hello\"\n#=&gt; \"hello\"\n\n$-a = \"hello\"\n#=&gt; NameError: $-a is a read-only variable\n\n$-b = \"hello\"\n#=&gt; \"hello\"\n\n$-ww = \"hello\"\n#=&gt; SyntaxError: unexpected tIDENTIFIER, expecting end-of-input\n$-ww = \"hello\"\n    ^\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "gridfs"], "answers": [{"comments": [{"owner": {"reputation": 811, "user_id": 661471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f5cdb556fbf35ca00359b07c085ee7?s=128&d=identicon&r=PG", "display_name": "aenw", "link": "https://stackoverflow.com/users/661471/aenw"}, "edited": false, "score": 0, "creation_date": 1477972404, "post_id": 39003357, "comment_id": 67961836, "body": "Thank you.  I&#39;m taking a class &amp; the instructor &amp; notes &amp; examples are horrible.  I was struggling with this."}], "tags": [], "owner": {"reputation": 777, "user_id": 1293838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e4512f11fa0898f4a7cf690613519b?s=128&d=identicon&r=PG", "display_name": "roy_lennon", "link": "https://stackoverflow.com/users/1293838/roy-lennon"}, "is_accepted": false, "score": 2, "last_activity_date": 1471456614, "creation_date": 1471456614, "answer_id": 39003357, "question_id": 39002862, "link": "https://stackoverflow.com/questions/39002862/mongodb-gridfs-replace-update-metadata/39003357#39003357", "title": "MongoDB GridFS replace/update metadata", "body": "<p>I found out that you can access the files_collection, where all the info is saved, and update it, like this:</p>\n\n<pre><code>metadata = database.fs.files_collection.find(id_criteria).first[:metadata]\nmetadata[:value] = { whatever info here }\n\ndatabase.fs.files_collection.find(:_id =&gt; id).update_one(\"metadata\" =&gt; metadata)\n</code></pre>\n"}], "owner": {"reputation": 777, "user_id": 1293838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e4512f11fa0898f4a7cf690613519b?s=128&d=identicon&r=PG", "display_name": "roy_lennon", "link": "https://stackoverflow.com/users/1293838/roy-lennon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471456614, "creation_date": 1471454752, "question_id": 39002862, "link": "https://stackoverflow.com/questions/39002862/mongodb-gridfs-replace-update-metadata", "title": "MongoDB GridFS replace/update metadata", "body": "<p>I need to update the metadata of a file in GridFS.</p>\n\n<p>I've looked around and found that it is not possible, the only solution is to delete the old record and create a new one with the same id.</p>\n\n<p>How can I create a new record with the same old id?</p>\n\n<p>I have tried to set the :_id => id in the :metadata hash, but it is not working.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471454515, "post_id": 39002748, "comment_id": 65357146, "body": "<code>params</code> takes a user input, most likely you can see it from the url. You should see somethings like <code>https:&#47;&#47;www.site_name.com&#47;index.html?opportunity_id=4</code> when the query is submitted. It is possible the attribute is named differently, check and see if there is something in the url once you submit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471454717, "post_id": 39002748, "comment_id": 65357248, "body": "The URL is &#39;localhost:3000/jobs/new&#39;, nothing with &#39;opportunity_id=4&#39;"}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1471455037, "post_id": 39002748, "comment_id": 65357423, "body": "Check your logger and see what params are being passed in your request from the form. Then make sure that attribute being passed matches the attributes for the Job class.   In order to keep debugging you can also grab the params being passed from the form and use them to create a Job object from within the console."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1471455377, "post_id": 39002748, "comment_id": 65357601, "body": "So in the new job view the param being passed is &#39;opportunity_id&#39;. When looking at the Job class, the following is there: class Job &lt; ActiveRecord::Base mount_uploader :file1, AttachmentUploader belongs_to :cost_proposal. If I added has_many :opportunity_id would that do the trick?"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471460227, "post_id": 39002748, "comment_id": 65360250, "body": "This is an attribute error on the model. It may be a silly question, but better to cover your bases: are you certain there&#39;s an opportunity_id on the model? in your rails console do <code>Job.new</code> and look at the attributes in the output and verify that opportunity_id is actually an attribute."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471461379, "post_id": 39002748, "comment_id": 65360829, "body": "@jaydel my job model includes this: class Job &lt; ActiveRecord::Base (next line) mount_uploader :file1, AttachmentUploader (next line) belongs_to :cost_proposal (next line) end. In a previous comment I mentioned adding has_many :opportunity_id, or would it be has_many :opportunities? Thanks in advance"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471461922, "post_id": 39002748, "comment_id": 65361092, "body": "@jaydel after running Job.new in the console, there is no opportunity_id listed. I assume adding this attribute will fix the problem? If so, can I add it from the console? Thanks."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471463960, "post_id": 39002748, "comment_id": 65362189, "body": "You should check the database first to see if that column is in there. if not, add it via a migration. If it is there, then there&#39;s probably something amiss with your associations. If you find it&#39;s in the db already, add your models (or perhaps the relevant parts--associations, etc) to the question."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471464057, "post_id": 39002748, "comment_id": 65362234, "body": "@kmaune Just saw your question. The proper way to do it would be <code>has_many :opportunities</code>  Rails will figure out the rest for you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471468704, "post_id": 39002748, "comment_id": 65364523, "body": "@jaydel After doing what you have suggested, I got another error that states undefined &#39;method `[]=&#39; for nil:NilClass&#39;. I am updating the question to include my job model and job controller. Thanks again for taking the time to help, this is really frustrating me."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471523376, "post_id": 39002748, "comment_id": 65386840, "body": "@kmaune I hate to do this to you, but can you add the schema.rb content for the opportunities table, please?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471543146, "post_id": 39002748, "comment_id": 65400142, "body": "@jaydel Absolutely. Question is updated :) thanks so much"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471617572, "post_id": 39002748, "comment_id": 65433110, "body": "@kmaune I created an answer that I hope addresses your concern. At the very least it will give us a place to discuss it further without losing track in comments (moderators can and do often go through and trim out comments--they are ephemeral by nature here)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1471461677, "post_id": 39003057, "comment_id": 65360964, "body": "I tried this, and I am getting a ActiveRecord::RecordNotFound (Couldn&#39;t find Opportunity without an ID) error. The error happened on this line of code: @opportunity = Opportunity.find(params[:opportunity_id])"}], "tags": [], "owner": {"reputation": 1737, "user_id": 408244, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa7ce0371b834c41b62bbfa087d6d15c?s=128&d=identicon&r=PG", "display_name": "Jarred", "link": "https://stackoverflow.com/users/408244/jarred"}, "is_accepted": false, "score": 0, "last_activity_date": 1471455517, "creation_date": 1471455517, "answer_id": 39003057, "question_id": 39002748, "link": "https://stackoverflow.com/questions/39002748/missing-attribute-error-in-jobsnew/39003057#39003057", "title": "Missing attribute error in Jobs#new", "body": "<p>On line 2 of your view, it looks like you're expecting new jobs to already have an associated opportunity.</p>\n\n<pre><code> &lt;% title \"New #{@job.opportunity.name} Job\"%&gt;\n</code></pre>\n\n<p>If this is the case, then the job routes should be nested under opportunities. So in <code>config/routes.rb</code></p>\n\n<pre><code> resources :opportunities do\n   resources :jobs\n end\n</code></pre>\n\n<p>You can then create new jobs through <code>http://localhost:3000/opportunities/:id/jobs/new</code></p>\n\n<p>And in your JobsController:</p>\n\n<pre><code> def new\n   @opportunity = Opportunity.find(params[:opportunity_id])\n   @job = Job.new(opportunity: @opportunity)\n   # ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471464113, "post_id": 39003121, "comment_id": 65362265, "body": "Good stuff. It also could be that the association itself is missing or incorrectly defined."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 1, "creation_date": 1471469230, "post_id": 39003121, "comment_id": 65364739, "body": "I tried this, but received an error stating something relating to .empty?. I apologize but I can&#39;t remember exactly what it said."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1471470284, "post_id": 39003121, "comment_id": 65365188, "body": "Ah you&#39;re right there I forgot that <code>.empty?</code> will raise an error on nil. Edited to use <code>.present?</code> instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1471470993, "post_id": 39003121, "comment_id": 65365453, "body": "I will give that a shot, thank you for taking the time to help :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1471471337, "post_id": 39003121, "comment_id": 65365588, "body": "@max I gave that a shot and got a &#39;can&#39;t write unknown attribute `opportunity_id&#39;&#39; error. What is throwing me off is when I add the missing opportunity_id attribute to the column in the Jobs table through the console, it does not show up even after I run a migration. Maybe I am doing that process wrong, but I have done it a few times now and have double checked to make sure I am doing it right. The migration file shows up under db/migrate but I can&#39;t figure out how to get it into the table."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1471516513, "post_id": 39003121, "comment_id": 65382382, "body": "You have to actually run the migration with <code>rake db:migrate</code>. But if you really have a Rails background you should know this - its absolute newbie stuff."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1471543356, "post_id": 39003121, "comment_id": 65400261, "body": "@max yes, I know. I ran db:migrate and if you read my previous comment it is not appearing after running db:migrate. And yes, I do come from a Rails background although I haven&#39;t worked on a project of this size for about a year in Rails. Plus, taking over someone else&#39;s project isn&#39;t exactly a walk in the park."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1471543811, "post_id": 39003121, "comment_id": 65400514, "body": "Can you add the migration which should add the column to your question? I can&#39;t see that the column is in <code>schema.rb</code>. Also try running <code>rake db:migrate:status</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1471543960, "post_id": 39003121, "comment_id": 65400578, "body": "Another thing that can throw you off is that if you are getting the error in RSpec you may have to run <code>rake db:test:prepare</code> as rails sometimes fails to keep the test db migrated."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1471544351, "post_id": 39003121, "comment_id": 65400778, "body": "@max thank you, I updated the schema.rb file. I added the opportunities table along with the jobs table, and I will run the test prepare and see if that helps. Thanks again for offering your help, I truly appreciate the help from seasoned developers"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1471545074, "post_id": 39003121, "comment_id": 65401168, "body": "rails g migration AddOpportunityIdToJobs opportunity_id:integer &lt;- thats what I ran in the terminal to add the column to the database"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1471546551, "post_id": 39003121, "comment_id": 65401972, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/121287/discussion-between-kmaune-and-max\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1471470179, "last_edit_date": 1471470179, "creation_date": 1471455739, "answer_id": 39003121, "question_id": 39002748, "link": "https://stackoverflow.com/questions/39002748/missing-attribute-error-in-jobsnew/39003121#39003121", "title": "Missing attribute error in Jobs#new", "body": "<p>An <code>ActiveModel::MissingAttributeError</code> is raised when you try to set an attribute on a model which does not exist. Remember that ActiveRecord \"automagically\" creates setters and getters by reading the schema from the database.</p>\n\n<p>The most common reasons are:</p>\n\n<ul>\n<li>typo (for example the db column is named <code>oportunity\u200c\u200b_id</code>)</li>\n<li>the migration which adds the column to the schema has not been run</li>\n<li>there is no migration to add the column</li>\n</ul>\n\n<p>Also assigning attributes to the model in the view is a pretty bad code smell. Do it in the controller instead:</p>\n\n<pre><code>class JobsController &lt; ApplicationController\n  # ...\n\n  def new\n    @job = Job.new do |j|\n      if params[:opportunity_id].present?\n        j.opportunity_id = params[:opportunity_id]\n      end\n    end\n  end\n  # ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "is_accepted": false, "score": 0, "last_activity_date": 1471618043, "last_edit_date": 1471618043, "creation_date": 1471617512, "answer_id": 39041770, "question_id": 39002748, "link": "https://stackoverflow.com/questions/39002748/missing-attribute-error-in-jobsnew/39041770#39041770", "title": "Missing attribute error in Jobs#new", "body": "<p>So when I look through your two table definitions I see that 1) there is no opportunity_id key in jobs and conversely, 2) no job_id key in opportunities. In order for your <code>has_many :opportunities</code> to work, you need to add a <code>job_id</code> field to the opportunities table. Here is a vastly simplified example of what I mean:</p>\n\n<pre><code>def Job &lt; ActiveRecord::Base\n  has_many :opportunities\nend\n\ndef Opportunity &lt; ActiveRecord::Base\nend # shown for completeness of answer only\n</code></pre>\n\n<p>You will need to add the job_id foreign key to the opportunities table with a migration, for example:</p>\n\n<pre><code>class AddJobForeignKeyToOpportunities &lt; ActiveRecord::Migration\n  def change\n    add_column :opportunities, :job_id, :integer\n  end\nend\n</code></pre>\n\n<p>If you're unsure how to deal with the migration, check out the Rails Guide for the <a href=\"http://guides.rubyonrails.org/command_line.html\" rel=\"nofollow\">rails command-line tool</a>. Once you have that in place Rails will automagically give you access to the Opportunities associated with a Job as you might expect:</p>\n\n<pre><code>job = Job.first\njob.opportunities\n</code></pre>\n\n<p>Keep in mind that you still won't be able to access <code>job.opportunity_id</code> as the error in your original question mentions. The many to one association you've set up requires that the Opportunity model have the foreign key. However, Rails will give you access to <code>job.opportunity_ids</code> plural.</p>\n\n<p>[edit] To add an opportunity to a job you'll want to do something along the lines of:</p>\n\n<pre><code>opportunity = Opportunity.find(params[:opportunity_id])\njob.opportunities &lt;&lt; opportunity\n</code></pre>\n\n<p>You should always avoid referring to the foreign key directly on the associated model. Someone said this somewhere in another answer or comment here but I can't find it to credit them.</p>\n\n<p>Instead rely on the Rails provided methods. In this example above, the <code>&lt;&lt;</code> operator is effectively setting job_id on the opportunity to link them up. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 869, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1471618043, "creation_date": 1471454342, "last_edit_date": 1471543212, "question_id": 39002748, "link": "https://stackoverflow.com/questions/39002748/missing-attribute-error-in-jobsnew", "title": "Missing attribute error in Jobs#new", "body": "<p>A little bit of background: I recently got a new job as a Rails developer which is all fine and dandy (I have a Rails background), but I am running into a problem and I cannot figure it out. The job I took involved taking over a project someone else at the company started but never finished. So I have a unfinished CRM application in my lap, and need the help of more experienced developers to point me in the right direction. </p>\n\n<p>When I try to create a new job, I get an error \"<strong>ActiveModel::MissingAttributeError in Jobs#new</strong>\", followed by \"<strong>can't write unknown attribute `opportunity_id</strong>'\".</p>\n\n<p>The error from the terminal is: </p>\n\n<pre><code>Started GET \"/jobs/new\" for 127.0.0.1 at 2016-08-17 10:07:44 -0700\nProcessing by JobsController#new as HTML\n  Rendered jobs/new.html.erb within layouts/application (2.0ms)\nCompleted 500 Internal Server Error in 10ms\n\nActionView::Template::Error (can't write unknown attribute `opportunity_id'):\n    1: &lt;% @job[:opportunity_id] = params[:opportunity_id] %&gt;\n    2: &lt;% title \"New #{@job.opportunity.name} Job\"%&gt;\n    3:\n    4: &lt;%\n  app/views/jobs/new.html.erb:1:in `_app_views_jobs_new_html_erb__443350051_40007592'\n\n\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)\n  Rendered C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (34.0ms)\n</code></pre>\n\n<p>The error comes from line 1 which is: </p>\n\n<pre><code>&lt;% @job[:opportunity_id] = params[:opportunity_id] %&gt;\n</code></pre>\n\n<p><strong>UPDATED</strong>: Added job model and job controller, along with the view and jobs table from shcema.rb file.</p>\n\n<p><strong>Job Model:</strong></p>\n\n<pre><code>class Job &lt; ActiveRecord::Base\n  mount_uploader :file1, AttachmentUploader\n  belongs_to :cost_proposal\n  has_many :opportunities\nend\n</code></pre>\n\n<p><strong>Job Controller:</strong></p>\n\n<pre><code>class JobsController &lt; ApplicationController\n  before_action :set_job, only: [:show, :edit, :update, :destroy]\n  skip_load_and_authorize_resource\n  # GET /jobs\n  # GET /jobs.json\n  def index\n    @jobs = Job.all\n  end\n\n  # GET /jobs/1\n  # GET /jobs/1.json\n  def show\n  end\n\n  # GET /jobs/new\n  def new\n  end\n\n  # GET /jobs/1/edit\n  def edit\n  end\n\n  # POST /jobs\n  # POST /jobs.json\n  def create\n    @job = Job.new(job_params)\n\n    respond_to do |format|\n      if @job.save\n        format.html { redirect_to @job, notice: 'Job was successfully created.' }\n        format.json { render :show, status: :created, location: @job }\n      else\n        format.html { render :new }\n        format.json { render json: @job.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /jobs/1\n  # PATCH/PUT /jobs/1.json\n  def update\n    respond_to do |format|\n      if @job.update(job_params)\n        format.html { redirect_to @job, notice: 'Job was successfully updated.' }\n        format.json { render :show, status: :ok, location: @job }\n      else\n        format.html { render :edit }\n        format.json { render json: @job.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /jobs/1\n  # DELETE /jobs/1.json\n  def destroy\n    @job.destroy\n    respond_to do |format|\n      format.html { redirect_to jobs_url, notice: 'Job was successfully deleted.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_job\n      @job = Job.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def job_params\n      params.require(:job).permit(:opportunity_id, :number, :name, :flight_date, :flight_sub, :camera, :roll, :map_type, :plan_only, :lab_only, :est_hrs_model, :due_date, :edge_job_id, :custom_trans, :comp_inhouse, :delivered_date, :done, :control_in, :control_status, :at_date, :control_results, :control_check, :scan_staff, :scan_date, :scan_check, :comp_staff, :comp_date, :comp_check, :comp_sub, :comp_sub_due_date, :comp_sub_rec, :img_staff, :img_date, :img_check, :edit_staff, :edit_date, :edit_check, :notes, :file1, :file2, :file3, :file4, :file5, :add_files)\n    end\nend\n</code></pre>\n\n<p><strong>Jobs table from schema.rb:</strong></p>\n\n<pre><code>  create_table \"jobs\", force: true do |t|\n    t.integer  \"cost_proposal_id\"\n    t.string   \"number\"\n    t.string   \"name\"\n    t.date     \"flight_date\"\n    t.string   \"flight_sub\"\n    t.string   \"camera\"\n    t.string   \"roll\"\n    t.string   \"map_type\"\n    t.integer  \"plan_only\"\n    t.integer  \"lab_only\"\n    t.integer  \"est_hrs_model\"\n    t.date     \"due_date\"\n    t.integer  \"edge_job_id\"\n    t.integer  \"custom_trans\"\n    t.integer  \"comp_inhouse\"\n    t.date     \"delivered_date\"\n    t.integer  \"done\"\n    t.date     \"control_in\"\n    t.string   \"control_status\"\n    t.date     \"at_date\"\n    t.string   \"control_results\"\n    t.integer  \"control_check\"\n    t.string   \"scan_staff\"\n    t.date     \"scan_date\"\n    t.integer  \"scan_check\"\n    t.string   \"comp_staff\"\n    t.date     \"comp_date\"\n    t.integer  \"comp_check\"\n    t.string   \"comp_sub\"\n    t.date     \"comp_sub_due_date\"\n    t.integer  \"comp_sub_rec\"\n    t.string   \"img_staff\"\n    t.date     \"img_date\"\n    t.integer  \"img_check\"\n    t.string   \"edit_staff\"\n    t.date     \"edit_date\"\n    t.integer  \"edit_check\"\n    t.text     \"notes\"\n    t.string   \"file1\"\n    t.string   \"file2\"\n    t.string   \"file3\"\n    t.string   \"file4\"\n    t.string   \"file5\"\n    t.string   \"add_files\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.integer  \"flown\"\n    t.integer  \"cust_trans\"\n    t.integer  \"delivered\"\n    t.string   \"at_staff\"\n    t.integer  \"at_check\"\n  end\n</code></pre>\n\n<p><strong>Opportunities table from schema.rb:</strong></p>\n\n<pre><code>  create_table \"opportunities\", force: true do |t|\n    t.integer  \"employee_id\"\n    t.integer  \"emp2_id\"\n    t.integer  \"emp3_id\"\n    t.string   \"name\"\n    t.datetime \"prop_date\"\n    t.integer  \"opp_status_id\"\n    t.string   \"delay\"\n    t.date     \"con_signed\"\n    t.integer  \"quote_won_id\"\n    t.float    \"total_cost\"\n    t.date     \"exp_close\"\n    t.integer  \"pri_comp_id\"\n    t.text     \"notes\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.string   \"lost\"\n    t.string   \"won\"\n    t.string   \"location\"\n    t.integer  \"pm_id\"\n  end\n</code></pre>\n\n<p><strong>Jobs new view (where error is occuring):</strong></p>\n\n<pre><code>&lt;% @job[:opportunity_id] = params[:opportunity_id] %&gt;\n&lt;% title \"New #{@job.opportunity.name} Job\"%&gt;\n\n&lt;% \n@job[:name] = @job.opportunity.name \n@pm = @job.opportunity.pm_id\n\n\n%&gt;\n\n&lt;br&gt;&lt;br&gt;\n&lt;%= render 'form' %&gt;\n</code></pre>\n\n<p>If you need more files from the project, let me know. Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "devise"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1471454435, "post_id": 39002741, "comment_id": 65357098, "body": "Friendly ID is totally irrelevant to this question - its is for creating vanity urls based things like user names instead of the ID attribute."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1471454325, "creation_date": 1471454325, "answer_id": 39002741, "question_id": 39002318, "link": "https://stackoverflow.com/questions/39002318/how-can-i-create-custom-login-page-urls-in-rails-devise-for-partner-links/39002741#39002741", "title": "How can I create custom login page URLs in Rails/Devise for partner links?", "body": "<p>Creating a custom route to the signup form is pretty straight forward:</p>\n\n<pre><code>get '/partner1', to: 'devise/sessions#new'\n</code></pre>\n\n<p>However if you want to have a customized login screen a good solution is to subclass <code>Devise::SessionsController</code>.</p>\n\n<pre><code># app/controllers/partner1/sessions_controller.rb\nclass Partner1::SessionsController &lt; Devise::SessionsController; end\n</code></pre>\n\n<p>and in your routes:</p>\n\n<pre><code>get '/partner1', to: 'partner1/sessions#new'\n</code></pre>\n\n<p>This will render <code>app/veiws/partner1/sessions/new.html.erb</code>.</p>\n"}], "owner": {"reputation": 1290, "user_id": 642093, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9a5e7f43356c2c66be32219c2a2b1f9f?s=128&d=identicon&r=PG", "display_name": "rcd", "link": "https://stackoverflow.com/users/642093/rcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471454325, "creation_date": 1471452789, "question_id": 39002318, "link": "https://stackoverflow.com/questions/39002318/how-can-i-create-custom-login-page-urls-in-rails-devise-for-partner-links", "title": "How can I create custom login page URLs in Rails/Devise for partner links?", "body": "<p>I have a Rails 4 application using Devise for authentication.</p>\n\n<p>In addition to the standard Devise login page, I want to have partner login pages that basically look and function the same way, but have a unique URL, like:</p>\n\n<p><a href=\"http://example.com/partner1\" rel=\"nofollow\">http://example.com/partner1</a></p>\n\n<p>What is the best way to do this?  I'm not sure how the routes file should look.  And is using FriendlyID a good idea as well?</p>\n\n<p>I have a PartnerPage model in the database which contains a \"link\" field, which is where the admin will enter the link/partner code.</p>\n"}, {"tags": ["arrays", "ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 4, "creation_date": 1471454117, "post_id": 39002223, "comment_id": 65356909, "body": "what&#39;s the error you&#39;re getting ?, btw, looks like you&#39;re missing an <code>end</code> to close the <code>if subarray.length == 3</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1471461047, "post_id": 39002223, "comment_id": 65360667, "body": "What do you mean that line is incorrect and you need to fix it? What is the error? What&#39;s wrong with the result?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1471463696, "post_id": 39002223, "comment_id": 65362028, "body": "Welcome to Stack Overflow. You need to do a bit more work on your question. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimum code in your question to demonstrated the exact problem you&#39;re having, the minimal HTML in your question to show the problem, plus your expected output. If you simplify the problem/code to duplicate it odds are good you&#39;ll find the solution; remove CSV and concentrate on locating and extracting the data, then breaking it into the format you want. &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages will also help, especially the linked pages."}, {"owner": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "edited": false, "score": 0, "creation_date": 1471478140, "post_id": 39002223, "comment_id": 65367569, "body": "Also please format your code so it doesn&#39;t require scrolling. You can do this by breaking lines up and removing unnecessary (aka most) comments."}, {"owner": {"reputation": 177, "user_id": 6020504, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6fbdc04c2bae3ccd16c69e97fe1719b?s=128&d=identicon&r=PG&f=1", "display_name": "runningraptor", "link": "https://stackoverflow.com/users/6020504/runningraptor"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1471535278, "post_id": 39002223, "comment_id": 65395457, "body": "@max pleaner - As mentioned in the question, there is no error the code passes. I need assistance in: &quot;I am having trouble splitting subarrays. Everything works, but I cannot split the city, state and zip code into separate excel columns.&quot; When I view the output the column &quot;city&quot; has the data of city, state and zip code."}, {"owner": {"reputation": 177, "user_id": 6020504, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6fbdc04c2bae3ccd16c69e97fe1719b?s=128&d=identicon&r=PG&f=1", "display_name": "runningraptor", "link": "https://stackoverflow.com/users/6020504/runningraptor"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1471535418, "post_id": 39002223, "comment_id": 65395542, "body": "@fanta - adding an additional <code>end</code> causes the following error: <code>syntax error, unexpected keyword_end, expecting end-of-input</code>"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 6020504, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6fbdc04c2bae3ccd16c69e97fe1719b?s=128&d=identicon&r=PG&f=1", "display_name": "runningraptor", "link": "https://stackoverflow.com/users/6020504/runningraptor"}, "edited": false, "score": 0, "creation_date": 1471710375, "post_id": 39026260, "comment_id": 65461701, "body": "That code runs but doesn&#39;t solve my column issue. Do you know how to change these lines so that city, state and zip code appear in separate columns: <code>else     [subarray[0], &#39;this is not working&#39;, subarray[1]]   end</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 177, "user_id": 6020504, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6fbdc04c2bae3ccd16c69e97fe1719b?s=128&d=identicon&r=PG&f=1", "display_name": "runningraptor", "link": "https://stackoverflow.com/users/6020504/runningraptor"}, "edited": false, "score": 0, "creation_date": 1471885487, "post_id": 39026260, "comment_id": 65517944, "body": "The code wasn&#39;t an attempt to solve the problem, it was to get you on the right track as far as writing code that is idiomatic to Ruby development. In other words, to write it in a style that&#39;d keep you from being taken to task by peers in a code review."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1471549102, "creation_date": 1471549102, "answer_id": 39026260, "question_id": 39002223, "link": "https://stackoverflow.com/questions/39002223/splitting-subarrays-in-ruby-nokogiri-web-scraper/39026260#39026260", "title": "Splitting subarrays in ruby nokogiri web scraper", "body": "<p>Just as a FYI, this is untested, but more idiomatic code in Ruby:</p>\n\n<pre><code>require 'csv'\nrequire 'nokogiri'\nrequire 'open-uri'\n\npage = Nokogiri::HTML(open('https://www.tesla.com/findus/list/stores/United+States'))   \n\nname = page.css('a.fn.org.url').map{ |n| n.text.strip }\nstreet_address = page.css('span.street-address').map { |n| n.text }\nextended_address = page.css('span.extended-address').map{ |n| n.text }\n\ncity = page.css('span.locality').map { |n|\n  subarray = n.text.strip.split(/ \u00b7 /)\n\n  if subarray.length == 3\n    subarray\n  else\n    [subarray[0], 'this is not working', subarray[1]]\n  end\n\n}\n\nCSV.open('teslaStores.csv', 'w') do |file|\n  file &lt;&lt; ['Name', 'Street Address', 'Street Address Continued', 'City', 'State', 'Zip']\n\n  name.length.times do |i|\n    file &lt;&lt; [name[i], street_address[i], extended_address[i], city[i], city[i][0], city[i][1]]\n  end\nend\n</code></pre>\n\n<p>And that can be reduced a bit further:</p>\n\n<pre><code>street_address, extended_address = [\n  'span.street-address',\n  'span.extended-address'\n].map{ |selector|\n  page.css(selector).map { |n| n.text }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 6020504, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6fbdc04c2bae3ccd16c69e97fe1719b?s=128&d=identicon&r=PG&f=1", "display_name": "runningraptor", "link": "https://stackoverflow.com/users/6020504/runningraptor"}, "is_accepted": true, "score": 0, "last_activity_date": 1471720884, "creation_date": 1471720884, "answer_id": 39057886, "question_id": 39002223, "link": "https://stackoverflow.com/questions/39002223/splitting-subarrays-in-ruby-nokogiri-web-scraper/39057886#39057886", "title": "Splitting subarrays in ruby nokogiri web scraper", "body": "<p>So, I went to a meetup.com event on python and asked one of the instructions for assistance if even though the class was not on this topic :). The teacher explained that I needed split by commas and spaces. Where before I was splitting by periods.</p>\n\n<p>I had to change this:</p>\n\n<pre><code>page.css('span.locality').each do |line|\n        subarray = line.text.strip.split(/ \u00b7 /)\n\n        if subarray.length == 3\n            city &lt;&lt; subarray\n        else\n            city &lt;&lt; [subarray[0], \"this is not working\", subarray[1]]\n    end\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>page.css('span.locality').each do |line|\n        subarray = line.text.strip.split(',')\n        subarray2 = subarray[1].split(' ')\n\n          city &lt;&lt; subarray[0]\n          state &lt;&lt; subarray2[0]\n          zip &lt;&lt; subarray2[1]\n    end\n</code></pre>\n\n<p>Here's the full answer:</p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'open-uri'\nrequire 'csv'\n\n\nurl = \"https://www.tesla.com/findus/list/stores/United+States\"\n\npage = Nokogiri::HTML(open(url))\n\npage = Nokogiri::HTML(open(\"https://www.tesla.com/findus/list/stores/United+States\"))   \nputs page.class   \n\nname = []\nstreet_address = []\nextended_address = []\ncity = []\nstate = []\nzip = []\n\n\n    page.css('a.fn.org.url').each do |line|\n      name &lt;&lt; line.text.strip\n    end\n\n    page.css('span.street-address').each do |line|\n      street_address &lt;&lt; line.text\n    end\n\n    page.css('span.extended-address').each do |line|\n        extended_address &lt;&lt; line.text\n    end\n\n    page.css('span.locality').each do |line|\n        subarray = line.text.strip.split(',')\n        subarray2 = subarray[1].split(' ')\n\n          city &lt;&lt; subarray[0]\n          state &lt;&lt; subarray2[0]\n          zip &lt;&lt; subarray2[1]\n    end\n\n\nCSV.open(\"teslaStores.csv\", \"w\") do |file|\n  file &lt;&lt; [\"Name\", \"Street Address\", \"Street Address Continued\", \"City\", \"State\", \"Zip\"]\n\n  name.length.times do |i|\n    file &lt;&lt; [name[i], street_address[i], extended_address[i], city[i], state[i], zip[i]]\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 6020504, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d6fbdc04c2bae3ccd16c69e97fe1719b?s=128&d=identicon&r=PG&f=1", "display_name": "runningraptor", "link": "https://stackoverflow.com/users/6020504/runningraptor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 39057886, "answer_count": 2, "score": 0, "last_activity_date": 1471720884, "creation_date": 1471452532, "last_edit_date": 1471535691, "question_id": 39002223, "link": "https://stackoverflow.com/questions/39002223/splitting-subarrays-in-ruby-nokogiri-web-scraper", "title": "Splitting subarrays in ruby nokogiri web scraper", "body": "<p>Hello I just finished the following tutorials: <a href=\"https://github.com/ryandhaase/Web-Scraper/blob/master/airbnb_scraper.rb\" rel=\"nofollow\">https://github.com/ryandhaase/Web-Scraper/blob/master/airbnb_scraper.rb</a> and <a href=\"https://medium.com/@tabor_francesca/web-scraper-airbnb-24d67939b08a#.mg7ny2tke\" rel=\"nofollow\">https://medium.com/@tabor_francesca/web-scraper-airbnb-24d67939b08a#.mg7ny2tke</a>. And I am now practicing. I am having trouble splitting subarrays. Everything works, but I cannot split the city, state and zip code into separate excel columns.</p>\n\n<p>The following line is incorrect, how can I fix it?</p>\n\n<pre><code>city &lt;&lt; [subarray[0], \"this is not working\", subarray[1]]\n</code></pre>\n\n<p>My guess is there is another line that needs to be fixed.</p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'open-uri'\nrequire 'csv'\n\n\nurl = \"https://www.tesla.com/findus/list/stores/United+States\"\n\npage = Nokogiri::HTML(open(url))\n\npage = Nokogiri::HTML(open(\"https://www.tesla.com/findus/list/stores/United+States\"))   \nputs page.class   \n\nname = []\nstreet_address = []\nextended_address = []\ncity = []\nstate = []\nzip = []\n\n\n    page.css('a.fn.org.url').each do |line|\n      name &lt;&lt; line.text.strip\n    end\n\n    page.css('span.street-address').each do |line|\n      street_address &lt;&lt; line.text\n    end\n\n    page.css('span.extended-address').each do |line|\n        extended_address &lt;&lt; line.text\n    end\n\n    page.css('span.locality').each do |line|\n        subarray = line.text.strip.split(/ \u00b7 /)\n\n        if subarray.length == 3\n            city &lt;&lt; subarray\n        else\n            city &lt;&lt; [subarray[0], \"this is not working\", subarray[1]]\n    end\n\n  end\n\n\n\nCSV.open(\"teslaStores.csv\", \"w\") do |file|\n  file &lt;&lt; [\"Name\", \"Street Address\", \"Street Address Continued\", \"City\", \"State\", \"Zip\"]\n\n  name.length.times do |i|\n    file &lt;&lt; [name[i], street_address[i], extended_address[i], city[i], city[i][0], city[i][1]]\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1471450760, "post_id": 39001664, "comment_id": 65355074, "body": "double  check that <code>@cupboard.persisted?</code> before you try and redirect - the <code>.save</code> call may have failed, and you&#39;d need to check <code>@cupboard.errors.full_messages</code> to se why"}, {"owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "edited": false, "score": 0, "creation_date": 1471450927, "post_id": 39001664, "comment_id": 65355183, "body": "Can you post your show action?"}, {"owner": {"reputation": 888, "user_id": 3128576, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/tx7Cr.jpg?s=128&g=1", "display_name": "Bian Jiaping", "link": "https://stackoverflow.com/users/3128576/bian-jiaping"}, "edited": false, "score": 0, "creation_date": 1471451859, "post_id": 39001664, "comment_id": 65355695, "body": "Have you defined <code>@user</code>?"}, {"owner": {"reputation": 888, "user_id": 3128576, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/tx7Cr.jpg?s=128&g=1", "display_name": "Bian Jiaping", "link": "https://stackoverflow.com/users/3128576/bian-jiaping"}, "edited": false, "score": 0, "creation_date": 1471452534, "post_id": 39001664, "comment_id": 65356054, "body": "Try <code>redirect_to user_cupboard_path(@cupboard.user_id, @cupboard.id)</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471463054, "post_id": 39001664, "comment_id": 65361677, "body": "post your strong parameters method for <code>cupboard_params</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": true, "score": 2, "last_activity_date": 1471451328, "creation_date": 1471451328, "answer_id": 39001873, "question_id": 39001664, "link": "https://stackoverflow.com/questions/39001664/no-route-matches-action-show-controller-cupboards-user-id-19-mis/39001873#39001873", "title": "No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;cupboards&quot;, :user_id=&gt;&quot;19&quot;} missing required keys: [:id]", "body": "<p>Assuming <code>User</code> has_many <code>Cupboards</code>, you should modify your create action.</p>\n\n<pre><code>def create\n  @user = User.find(params[:user_id])\n  @cupboard = @user.cupboards.new(cupboard_params)\n if @cupboard.save\n   redirect_to user_cupboard_path(@cupboard)\n else\n   render :new\n end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1128, "user_id": 6388582, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TjlTA.jpg?s=128&g=1", "display_name": "IWI", "link": "https://stackoverflow.com/users/6388582/iwi"}, "is_accepted": false, "score": 0, "last_activity_date": 1471642933, "creation_date": 1471642933, "answer_id": 39048062, "question_id": 39001664, "link": "https://stackoverflow.com/questions/39001664/no-route-matches-action-show-controller-cupboards-user-id-19-mis/39048062#39048062", "title": "No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;cupboards&quot;, :user_id=&gt;&quot;19&quot;} missing required keys: [:id]", "body": "<p>Alright, problem fixed, mainly thanks to Pramod</p>\n\n<p>Changed my controller to </p>\n\n<pre><code>  def create\n  @user = User.find(params[:user_id])\n  @cupboard = @user.cupboards.new(cupboard_params)\n if @cupboard.save\n   redirect_to user_cupboard_path(@user, @cupboard)\n else\n   render :new\n end\nend\n</code></pre>\n\n<p>Additionally, Pramod made me second guess my model setup. Turns out I also forgot to have a <code>has_many :users</code> in my User model.</p>\n"}], "owner": {"reputation": 1128, "user_id": 6388582, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TjlTA.jpg?s=128&g=1", "display_name": "IWI", "link": "https://stackoverflow.com/users/6388582/iwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 39001873, "answer_count": 2, "score": 0, "last_activity_date": 1471642933, "creation_date": 1471450612, "question_id": 39001664, "link": "https://stackoverflow.com/questions/39001664/no-route-matches-action-show-controller-cupboards-user-id-19-mis", "title": "No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;cupboards&quot;, :user_id=&gt;&quot;19&quot;} missing required keys: [:id]", "body": "<p>I am trying to redirect a user, after having created a new 'cupboard' to the user_cupboard_path.  I keep getting a <code>missing required keys[:id]</code> error</p>\n\n<pre><code>No route matches {:action=&gt;\"show\", :controller=&gt;\"cupboards\", :id=&gt;nil, :user_id=&gt;nil} missing required keys: [:id, :user_id]\n</code></pre>\n\n<p>This is the params the error screen is giving me</p>\n\n<pre><code>   {\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"MmxYdBmGHgMTcyw3fVz0/Lmw7TbFtOxDlKKEDtbPTZgfger08QSGxc4+1qkEXOLzurDne+55V6SUBqXAx+g==\",\n \"style\"=&gt;\"ATHLEISURE\",\n \"commit\"=&gt;\"Create Cupboard\",\n \"user_id\"=&gt;\"19\"}\n</code></pre>\n\n<p>cupboards controller</p>\n\n<pre><code>def create\n  @cupboard = Cupboard.new(cupboard_params)\n if @cupboard.save\n   redirect_to user_cupboard_path(@cupboard)\n else\n   render :new\n end\nend\n</code></pre>\n\n<p>routes</p>\n\n<pre><code>resources :users do\n resources :cupboards\nend\n</code></pre>\n\n<p>The record is being created through because I can manually type in the URL</p>\n\n<pre><code>localhost3000/users/:id/cupboards/:id\n</code></pre>\n\n<p>I have tried to do the following in the <code>redirect_to</code> statement...</p>\n\n<pre><code>redirect_to user_cupboard_path(@cupboard)\nredirect_to user_cupboard_path(@user)\nredirect_to user_cupboard_path(@user, @cupboard)\nredirect_to user_cupboard_path(cupboard)\nredirect_to user_cupboard_path(user)\n</code></pre>\n\n<p>None have worked</p>\n\n<p>I'm certain it's just a newbie mistake, something simple i'm overlooking. Any help is appreciated!</p>\n\n<p>Sam</p>\n"}, {"tags": ["ruby", "xml", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "edited": false, "score": 2, "creation_date": 1471451837, "post_id": 39001389, "comment_id": 65355678, "body": "What do you mean by &quot;not working&quot;? Do you get an error or are the results not the one you expect?"}, {"owner": {"reputation": 11, "user_id": 6640734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233be0a81b9c9453aa8de825cbf31075?s=128&d=identicon&r=PG&f=1", "display_name": "user098123", "link": "https://stackoverflow.com/users/6640734/user098123"}, "reply_to_user": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "edited": false, "score": 0, "creation_date": 1471452088, "post_id": 39001389, "comment_id": 65355809, "body": "Sorry, I forgot to mention. I get an error &quot;undefined method &#39;xpath&#39; for nil:NilClass (NoMethodError) and I can&#39;t figure out why."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1471464566, "post_id": 39001389, "comment_id": 65362491, "body": "Don&#39;t put required information in comments, put it into the body of the question where it belongs, so people don&#39;t have to read every comment to understand what you&#39;re asking. Don&#39;t use &quot;edit&quot; or &quot;update&quot; tags; We can see what changed if we need to."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1471464897, "post_id": 39001389, "comment_id": 65362656, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your code is full of syntax errors so Ruby won&#39;t try to run it. It also has undefined variables and classes. As a result there are a number of reasons for us to close it. Please review your question and code, and reduce the code to the bare minimum that duplicates the problem and meets the requirements. <a href=\"http://meta.stackoverflow.com/a/261593/128421\">How much research effort is expected of Stack Overflow users?</a> will probably help you understand the effort needed."}, {"owner": {"reputation": 11, "user_id": 6640734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233be0a81b9c9453aa8de825cbf31075?s=128&d=identicon&r=PG&f=1", "display_name": "user098123", "link": "https://stackoverflow.com/users/6640734/user098123"}, "edited": false, "score": 0, "creation_date": 1471511905, "post_id": 39001389, "comment_id": 65379338, "body": "As regards the &quot;undefined variables and classes&quot; it&#39;s because they are further up in the code. I only added the relevant part of the code to this question where I was getting the error - not the entire thing or it would be difficult for people to understand absolutely everything."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471539907, "post_id": 39001389, "comment_id": 65398342, "body": "That&#39;s why you&#39;re supposed to strip everything not related. We expect you&#39;ll have done your due diligence and debugged and reduced until it&#39;s done to the essential code that <i>still duplicates the problem</i>. Anything beyond that wastes our time. You have to do that footwork then we help."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6640734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233be0a81b9c9453aa8de825cbf31075?s=128&d=identicon&r=PG&f=1", "display_name": "user098123", "link": "https://stackoverflow.com/users/6640734/user098123"}, "edited": false, "score": 0, "creation_date": 1471452353, "post_id": 39002124, "comment_id": 65355949, "body": "Thank you, I tried that but I still get the same error. &quot;undefined method &#39;xpath&#39; for nil:NilClass (NoMethodError)&quot;"}], "tags": [], "owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1471452244, "creation_date": 1471452244, "answer_id": 39002124, "question_id": 39001389, "link": "https://stackoverflow.com/questions/39001389/nokogiri-checking-if-the-value-of-an-xpath-exists-and-is-blank-or-not-in-ruby/39002124#39002124", "title": "Nokogiri - Checking if the value of an xpath exists and is blank or not in Ruby", "body": "<p>You are creating your instance like this:</p>\n\n<pre><code>gdsn_doc = GDSNDoc.new(xml_file)\n</code></pre>\n\n<p>then use it like this:</p>\n\n<pre><code>@desc_exists = @gdsn_doc.xpath(\"//productData/description\")\n</code></pre>\n\n<p><code>@gdsn_doc</code> and <code>gdsn_doc</code> are two different things in Ruby - try just using the version without the @:</p>\n\n<pre><code>@desc_exists = gdsn_doc.xpath(\"//productData/description\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6640734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233be0a81b9c9453aa8de825cbf31075?s=128&d=identicon&r=PG&f=1", "display_name": "user098123", "link": "https://stackoverflow.com/users/6640734/user098123"}, "edited": false, "score": 0, "creation_date": 1471512424, "post_id": 39005467, "comment_id": 65379689, "body": "Using &quot;gdsn_doc&quot; instead of &quot;@gdsn_doc&quot; doesn&#39;t work - I still get the same error."}, {"owner": {"reputation": 11, "user_id": 6640734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233be0a81b9c9453aa8de825cbf31075?s=128&d=identicon&r=PG&f=1", "display_name": "user098123", "link": "https://stackoverflow.com/users/6640734/user098123"}, "edited": false, "score": 0, "creation_date": 1471512536, "post_id": 39005467, "comment_id": 65379755, "body": "I will add to the description how I have defined the class and Nokogiri"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1471546057, "last_edit_date": 1471546057, "creation_date": 1471464758, "answer_id": 39005467, "question_id": 39001389, "link": "https://stackoverflow.com/questions/39001389/nokogiri-checking-if-the-value-of-an-xpath-exists-and-is-blank-or-not-in-ruby/39005467#39005467", "title": "Nokogiri - Checking if the value of an xpath exists and is blank or not in Ruby", "body": "<p>The basic test is to use:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(&lt;&lt;EOT)\n&lt;productData&gt;\n&lt;description&gt;Chocolate biscuits &lt;/description&gt;\n&lt;productData&gt;\nEOT\n\n# using XPath selectors...\ndoc.xpath('//productData/description').to_html # =&gt; \"&lt;description&gt;Chocolate biscuits &lt;/description&gt;\"\ndoc.xpath('//description').to_html # =&gt; \"&lt;description&gt;Chocolate biscuits &lt;/description&gt;\"\n</code></pre>\n\n<p><code>xpath</code> works fine when the document is parsed correctly.</p>\n\n<blockquote>\n  <p>I get an error \"undefined method 'xpath' for nil:NilClass (NoMethodError)</p>\n</blockquote>\n\n<p>Usually this means you didn't parse the document correctly. In your case it's because you're not using the right variable:</p>\n\n<pre><code>gdsn_doc = GDSNDoc.new(xml_file)\n...\n@desc_exists = @gdsn_doc.xpath(\"//productData/description\")\n</code></pre>\n\n<p>Note that <code>gdsn_doc</code> is not the same as <code>@gdsn_doc</code>. The later doesn't appear to have been initialized.</p>\n\n<hr>\n\n<blockquote>\n  <p><code>@doc =  File.open(xml_file) {|f| Nokogiri::XML(f)}</code></p>\n</blockquote>\n\n<p>While that should work, it's idiomatic to write it as:</p>\n\n<pre><code>@doc = Nokogiri::XML(File.read(xml_file))\n</code></pre>\n\n<p><code>File.open(...) do ... end</code> is preferred if you're processing inside the block and want Ruby to automatically close the file. That isn't necessary when you're simply reading then passing the content to something else for processing, hence the use of <code>File.read(...)</code> which slurps the file. (Slurping isn't necessary a good practice because it can have scalability problems, but for reasonable sized XML/HTML it's OK because it's easier to use DOM-based parsing than SAX.)</p>\n\n<hr>\n\n<p>If Nokogiri doesn't raise an exception it was able to parse the content, however that still doesn't mean the content was valid. It's a good idea to check </p>\n\n<pre><code>@doc.errors\n</code></pre>\n\n<p>to see whether Nokogiri/libXML had to do some fix-ups on the content just to be able to parse it. Fixing the markup can change the DOM from what you expect, making it impossible to find a tag based on your assumptions for the selector. You could use <code>xmllint</code> or one of the XML validators to check, but Nokogiri will still have to be happy. </p>\n\n<p>Nokogiri includes a command-line version <code>nokogiri</code> that accepts a URL to the document you want to parse:</p>\n\n<pre><code>nokogiri http://example.com\n</code></pre>\n\n<p>It'll open IRB with the content loaded and ready for you to poke at it. It's very convenient when debugging and testing. It's also a decent way to make sure the content actually exists if you're dealing with HTML containing DHTML that loads parts of the page dynamically.</p>\n"}], "owner": {"reputation": 11, "user_id": 6640734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233be0a81b9c9453aa8de825cbf31075?s=128&d=identicon&r=PG&f=1", "display_name": "user098123", "link": "https://stackoverflow.com/users/6640734/user098123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1285, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1471546057, "creation_date": 1471449768, "last_edit_date": 1471540053, "question_id": 39001389, "link": "https://stackoverflow.com/questions/39001389/nokogiri-checking-if-the-value-of-an-xpath-exists-and-is-blank-or-not-in-ruby", "title": "Nokogiri - Checking if the value of an xpath exists and is blank or not in Ruby", "body": "<p>I have an XML file, and before I process it I need to make sure that a certain element exists and is not blank.</p>\n\n<p>Here is the code I have:</p>\n\n<pre><code>CSV.open(\"#{csv_dir}/products.csv\",\"w\",{:force_quotes =&gt; true}) do |out|\nout &lt;&lt; headers\nDir.glob(\"#{xml_dir}/*.xml\").each do |xml_file|\ngdsn_doc = GDSNDoc.new(xml_file)\n\nlogger.info(\"Processing xml file #{xml_file}\")\n\n:x\n@desc_exists = @gdsn_doc.xpath(\"//productData/description\")\n if !@desc_exists.empty?\n  row = []\n  headers.each do |col|\n  row  &lt;&lt; product[col]\nend\n\n out &lt;&lt; row\nend\nend\nend\n</code></pre>\n\n<p>The following code is not working to find the \"description\" element and to check whether it is blank or not: </p>\n\n<pre><code>  @desc_exists = @gdsn_doc.xpath(\"//productData/description\")\n  if !@desc_exists.empty?\n</code></pre>\n\n<p>Here is a sample of the XML file:</p>\n\n<pre><code>&lt;productData&gt;\n\n&lt;description&gt;Chocolate biscuits &lt;/description&gt;\n\n&lt;productData&gt;\n</code></pre>\n\n<p>This is how I have defined the class and Nokogiri:</p>\n\n<pre><code>class GDSNDoc\ndef initialize(xml_file)\n   @doc =  File.open(xml_file) {|f| Nokogiri::XML(f)}\n   @doc.remove_namespaces!\n</code></pre>\n\n<p>The code had to be moved up to an earlier stage, where Nokogiri was initialised. It doesn't get runtime errors, but it does let XML files with blank descriptions get through and it shouldn't.</p>\n\n<pre><code>class GDSNDoc\n def initialize(xml_file)\n   @doc =  File.open(xml_file) {|f| Nokogiri::XML(f)}\n   @doc.remove_namespaces!\n   desc_exists = @doc.xpath(\"//productData/descriptions\")\n   if !desc_exists.empty?\n</code></pre>\n"}, {"tags": ["ruby", "http"], "comments": [{"owner": {"reputation": 4327, "user_id": 1397097, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c6fdb449031f010da19a644df8b0f031?s=128&d=identicon&r=PG", "display_name": "quinn", "link": "https://stackoverflow.com/users/1397097/quinn"}, "edited": false, "score": 1, "creation_date": 1471449656, "post_id": 39001275, "comment_id": 65354392, "body": "&#39;net/http&#39; is for making HTTP requests. Ruby on Rails is for receiving them."}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 5915953, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ed3503d98bb7ceb97f41da573c3131bf?s=128&d=identicon&r=PG&f=1", "display_name": "menix", "link": "https://stackoverflow.com/users/5915953/menix"}, "edited": false, "score": 0, "creation_date": 1471454569, "post_id": 39001344, "comment_id": 65357174, "body": "Thanks for the response(pun intended)! Does the response code for the GET request go in my controller file? In this case &#39;users_controller.rb&#39;? I know how to run the app on my local host, just not which file to put the http response."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 166, "user_id": 5915953, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ed3503d98bb7ceb97f41da573c3131bf?s=128&d=identicon&r=PG&f=1", "display_name": "menix", "link": "https://stackoverflow.com/users/5915953/menix"}, "edited": false, "score": 0, "creation_date": 1471467717, "post_id": 39001344, "comment_id": 65364062, "body": "No, this same http request can be done just by visiting <a href=\"http://localhost:3000/\" rel=\"nofollow noreferrer\">localhost:3000</a> in your browser. Are you trying to display the response code of a page in a second page? Tell us more on what the end goal is, what have you done in you rails app?"}, {"owner": {"reputation": 166, "user_id": 5915953, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ed3503d98bb7ceb97f41da573c3131bf?s=128&d=identicon&r=PG&f=1", "display_name": "menix", "link": "https://stackoverflow.com/users/5915953/menix"}, "edited": false, "score": 0, "creation_date": 1471526437, "post_id": 39001344, "comment_id": 65389019, "body": "Nevermind I got it to work. Thanks for taking some time to help me!"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 166, "user_id": 5915953, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ed3503d98bb7ceb97f41da573c3131bf?s=128&d=identicon&r=PG&f=1", "display_name": "menix", "link": "https://stackoverflow.com/users/5915953/menix"}, "edited": false, "score": 0, "creation_date": 1471968990, "post_id": 39001344, "comment_id": 65559360, "body": "Please share your answer with the community, that&#39;s how others learn from everybody&#39;s previous experiences."}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1471449575, "creation_date": 1471449575, "answer_id": 39001344, "question_id": 39001275, "link": "https://stackoverflow.com/questions/39001275/which-file-to-put-http-response-in-ruby-on-rails-application/39001344#39001344", "title": "Which file to put HTTP Response in Ruby on Rails application?", "body": "<p>Welcome to Ruby!</p>\n\n<p>After doing <code>response = Net::HTTP.get_response(uri)</code>. You can simply query the response object for it's code:</p>\n\n<p><code>response.code</code> that will print \"200\" or whatever code you get.</p>\n\n<p>A common way to find out new things in Ruby is to ask an object for it's methods: <code>response.methods</code> shows <code>:code</code>, that's how I knew. I hope this tip helps you!</p>\n\n<p><strong>EDIT</strong>: It seems I misunderstood your question. If you are looking for the response code of a GET request, this is how you get it. If you are trying to run your newly created Rails app, simply go to the browser and type that URL once you have your rails server running locally.</p>\n"}], "owner": {"reputation": 166, "user_id": 5915953, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ed3503d98bb7ceb97f41da573c3131bf?s=128&d=identicon&r=PG&f=1", "display_name": "menix", "link": "https://stackoverflow.com/users/5915953/menix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471454411, "creation_date": 1471449340, "last_edit_date": 1471454411, "question_id": 39001275, "link": "https://stackoverflow.com/questions/39001275/which-file-to-put-http-response-in-ruby-on-rails-application", "title": "Which file to put HTTP Response in Ruby on Rails application?", "body": "<p>I'm working on my first Ruby application. I would like to get the HTTP Response code for a get request. The basic format seems to be something like below. However since I'm very new to Ruby, I don't know which file this code should go in. Does it go in my 'def index' method in the Controller? In the index.html.erb file itself? I know it's a super basic question but I'm a bit lost. Thanks, for any help</p>\n\n<pre><code>require \"net/http\"\n\nrequire \"uri\"\n\nuri = URI.parse(\"http://localhost:3000/users\")\n\n# Shortcut\nresponse = Net::HTTP.get_response(uri)\n\n# Will print response.body\nNet::HTTP.get_print(uri)\n\n# Full\nhttp = Net::HTTP.new(uri.host, uri.port)\nresponse = http.request(Net::HTTP::Get.new(uri.request_uri))`\n</code></pre>\n"}, {"tags": ["ruby", "rake", "rake-task"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1471450922, "post_id": 39000753, "comment_id": 65355176, "body": "The <code>guard</code> gem would be good for this."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1471455740, "post_id": 39000753, "comment_id": 65357796, "body": "<a href=\"https://github.com/guard/guard-process\" rel=\"nofollow noreferrer\">github.com/guard/guard-process</a> or <a href=\"https://github.com/guard/guard-yield\" rel=\"nofollow noreferrer\">github.com/guard/guard-yield</a> should work. I believe there is another guard for Ruby scripts, but didn&#39;t find it."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1471455797, "post_id": 39000753, "comment_id": 65357830, "body": "One thing I have noticed when running specs is that Guard does not run when a file is added, so you may need to do something to handle that case."}, {"owner": {"reputation": 1742, "user_id": 1079430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6bf00489520e8f013752bac52318def2?s=128&d=identicon&r=PG", "display_name": "GuyGizmo", "link": "https://stackoverflow.com/users/1079430/guygizmo"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1471459875, "post_id": 39000753, "comment_id": 65360067, "body": "@BSeven @maxpleaner Sorry, I didn&#39;t explain my issue properly. I don&#39;t want this to happen automatically. I only want the directory copy to happen when the rakefile is executed, so <code>guard</code> doesn&#39;t help me here. I have edited my original question to better clarify what I&#39;m looking for."}], "owner": {"reputation": 1742, "user_id": 1079430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6bf00489520e8f013752bac52318def2?s=128&d=identicon&r=PG", "display_name": "GuyGizmo", "link": "https://stackoverflow.com/users/1079430/guygizmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1471459800, "creation_date": 1471447787, "last_edit_date": 1471459800, "question_id": 39000753, "link": "https://stackoverflow.com/questions/39000753/how-can-a-rake-task-run-any-time-a-directory-or-any-of-its-contents-changes", "title": "How can a rake task run any time a directory or any of its contents changes?", "body": "<p>I have a rakefile with a task that copies the contents of a directory to somewhere else on disk. When the rakefile is executing, I need this task to run if any of the contents of this directory have changed since the last execution of the rakefile (or if the copy has never occurred). This includes changes to modification dates or file names. (Note that changing the names of files does not change their modification date.)</p>\n\n<p>Put another way, I want something that works the same way as a file task that has a dependency on another file. But rather than it involving individual files, I want the task to generate a directory structure and for its dependency to be another directory structure.</p>\n\n<p>What would be the best method of accomplishing this? I need a cross platform solution as this rakefile is run on Windows, OS X, and Linux.</p>\n"}, {"tags": ["ruby", "ibm-cloud-infrastructure"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "edited": false, "score": 0, "creation_date": 1471455590, "post_id": 39001160, "comment_id": 65357723, "body": "Thanks Nelson.  From the getHardware() call I&#39;m making is there a field I can look at that will reliably tell me if a device is a network device?  Rather than looking at the OS?  Or should I just incorporate the following filter?:  filter_data = &#39;networkGatewayMemberFlag:0 _objectType:SoftLayer_Hardware&#39;"}, {"owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "reply_to_user": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "edited": false, "score": 0, "creation_date": 1471455996, "post_id": 39001160, "comment_id": 65357920, "body": "the script to list the hardware I sent you did not work? you can use the property networkGatewayMemberFlag to see if the device is a gateway or not, only the gatway servers will have that flag with 1 or true."}, {"owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "reply_to_user": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "edited": false, "score": 0, "creation_date": 1471456309, "post_id": 39001160, "comment_id": 65358104, "body": "<a href=\"http://sldn.softlayer.com/reference/datatypes/SoftLayer_Hardware_Server\" rel=\"nofollow noreferrer\">sldn.softlayer.com/reference/datatypes/&hellip;</a> there you can see more information about the flag"}, {"owner": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "edited": false, "score": 0, "creation_date": 1471529772, "post_id": 39001160, "comment_id": 65391507, "body": "Nelson, will the getNetworkHardware call also get all network devices?  Thanks again!"}, {"owner": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "edited": false, "score": 0, "creation_date": 1471530652, "post_id": 39001160, "comment_id": 65392202, "body": "Edit to above comment -- looks like getNetworkHardware gets too much, individual network components maybe.  I&#39;m wondering what calls I should make from here: <a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Account\" rel=\"nofollow noreferrer\">sldn.softlayer.com/reference/services/SoftLayer_Account</a>  to get all the network devices.  I&#39;d prefer to make specific calls for what I want rather than a large search call.  Thank you."}, {"owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "reply_to_user": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "edited": false, "score": 0, "creation_date": 1471530952, "post_id": 39001160, "comment_id": 65392430, "body": "getNetwokHardware returns all the routers and switches on your account getHardware returns Bare metal servers. getNetwoksHardware returns the information like in the portal page <a href=\"https://control.softlayer.com/network/status/local\" rel=\"nofollow noreferrer\">control.softlayer.com/network/status/local</a>"}], "tags": [], "owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "is_accepted": true, "score": 1, "last_activity_date": 1471449049, "creation_date": 1471449049, "answer_id": 39001160, "question_id": 39000600, "link": "https://stackoverflow.com/questions/39000600/softlayer-api-retrieve-total-network-devices-from-hardware/39001160#39001160", "title": "SoftLayer API retrieve total network devices from Hardware", "body": "<p>when you call the getHardware method returns all bare metal servers, the reason why you are seeing several \"Vyatta\" servers is because they are bare metal servers as well,but with a \"Vyatta\" operating system.</p>\n\n<p>you can use the <a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Search/advancedSearch\" rel=\"nofollow\">http://sldn.softlayer.com/reference/services/SoftLayer_Search/advancedSearch</a> method to get and filter your data, that is the method that the portal uses.</p>\n\n<p>here some examples:</p>\n\n<p>List hardwares:</p>\n\n<pre><code># Get Hardware list using SoftLayer_Search::advancedSearch\n#\n# Important manual pages:\n# see http://sldn.softlayer.com/reference/services/SoftLayer_Search/advancedSearch\n#\n# license &lt;http://sldn.softlayer.com/article/License&gt;\n# author SoftLayer Technologies, Inc. &lt;sldn@softlayer.com&gt;\n\nrequire 'rubygems'\nrequire 'softlayer_api'\n\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\n# Softlayer API public endpoint\nAPI_PUBLIC_ENDPOINT = 'https://api.softlayer.com/xmlrpc/v3.1/'\n\nsoftlayer_client = SoftLayer::Client.new(username: SL_API_USERNAME,\n                                         api_key: SL_API_KEY,\n                                         endpoint_url: API_PUBLIC_ENDPOINT)\n\nsearch_service = softlayer_client.service_named('SoftLayer_Search')\n\nfilter_data = 'networkGatewayMemberFlag:0 _objectType:SoftLayer_Hardware'\n\nbegin\n  # Display Hardware items same as Portal &gt; Device List\n  result = search_service.advancedSearch(filter_data)\n  puts 'Process finished successfully'\n  p result\nrescue StandardError =&gt; e\n  raise e\nend\n</code></pre>\n\n<p>List gateway members:</p>\n\n<pre><code># Get Gateway Member list using SoftLayer_Search::advancedSearch\n#\n# Important manual pages:\n# see http://sldn.softlayer.com/reference/services/SoftLayer_Search/advancedSearch\n#\n# license &lt;http://sldn.softlayer.com/article/License&gt;\n# author SoftLayer Technologies, Inc. &lt;sldn@softlayer.com&gt;\n\nrequire 'rubygems'\nrequire 'softlayer_api'\n\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\n# Softlayer API public endpoint\nAPI_PUBLIC_ENDPOINT = 'https://api.softlayer.com/xmlrpc/v3.1/'\n\nsoftlayer_client = SoftLayer::Client.new(username: SL_API_USERNAME,\n                                         api_key: SL_API_KEY,\n                                         endpoint_url: API_PUBLIC_ENDPOINT)\n\nsearch_service = softlayer_client.service_named('SoftLayer_Search')\n\nfilter_data = 'networkGatewayMemberFlag:1 _objectType:SoftLayer_Hardware'\n\nbegin\n  # Display Gateway Member items same as Portal &gt; Device List\n  result = search_service.advancedSearch(filter_data)\n  puts 'Process finished successfully'\n  p result\nrescue StandardError =&gt; e\n  raise e\nend\n</code></pre>\n\n<p>List netscalers:</p>\n\n<pre><code># Get Netscaler list using SoftLayer_Search::advancedSearch\n#\n# Important manual pages:\n# see http://sldn.softlayer.com/reference/services/SoftLayer_Search/advancedSearch\n#\n# license &lt;http://sldn.softlayer.com/article/License&gt;\n# author SoftLayer Technologies, Inc. &lt;sldn@softlayer.com&gt;\n\nrequire 'rubygems'\nrequire 'softlayer_api'\n\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\n# Softlayer API public endpoint\nAPI_PUBLIC_ENDPOINT = 'https://api.softlayer.com/xmlrpc/v3.1/'\n\nsoftlayer_client = SoftLayer::Client.new(username: SL_API_USERNAME,\n                                         api_key: SL_API_KEY,\n                                         endpoint_url: API_PUBLIC_ENDPOINT)\n\nsearch_service = softlayer_client.service_named('SoftLayer_Search')\n\nfilter_data = '_objectType:SoftLayer_Network_Application_Delivery_Controller'\n\nbegin\n  # Display Netscaler items same as Portal &gt; Device List\n  result = search_service.advancedSearch(filter_data)\n  puts 'Process finished successfully'\n  p result\nrescue StandardError =&gt; e\n  raise e\nend\n</code></pre>\n\n<p>List Firewalls:</p>\n\n<pre><code># Get Firewall list using SoftLayer_Search::advancedSearch\n#\n# Important manual pages:\n# see http://sldn.softlayer.com/reference/services/SoftLayer_Search/advancedSearch\n#\n# license &lt;http://sldn.softlayer.com/article/License&gt;\n# author SoftLayer Technologies, Inc. &lt;sldn@softlayer.com&gt;\n\nrequire 'rubygems'\nrequire 'softlayer_api'\n\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\n# Softlayer API public endpoint\nAPI_PUBLIC_ENDPOINT = 'https://api.softlayer.com/xmlrpc/v3.1/'\n\nsoftlayer_client = SoftLayer::Client.new(username: SL_API_USERNAME,\n                                         api_key: SL_API_KEY,\n                                         endpoint_url: API_PUBLIC_ENDPOINT)\n\nsearch_service = softlayer_client.service_named('SoftLayer_Search')\n\nfilter_data = '_objectType:SoftLayer_Network_Vlan_Firewall'\n\nbegin\n  # Display Firewall items same as Portal &gt; Device List\n  result = search_service.advancedSearch(filter_data)\n  puts 'Process finished successfully'\n  p result\nrescue StandardError =&gt; e\n  raise e\nend\n</code></pre>\n\n<p>List all devices:</p>\n\n<pre><code># Get all items from Device list.\n#\n# Important manual pages:\n#\n# see http://sldn.softlayer.com/reference/services/SoftLayer_Search/advancedSearch\n# license &lt;http://sldn.softlayer.com/article/License&gt;\n# author SoftLayer Technologies, Inc. &lt;sldn@softlayer.com&gt;\n\nrequire 'rubygems'\nrequire 'softlayer_api'\n\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\n# Softlayer API public endpoint\nAPI_PUBLIC_ENDPOINT = 'https://api.softlayer.com/xmlrpc/v3.1/'\n\nsoftlayer_client = SoftLayer::Client.new(username: SL_API_USERNAME,\n                                         api_key: SL_API_KEY,\n                                         endpoint_url: API_PUBLIC_ENDPOINT)\n\nsearch_service = softlayer_client.service_named('SoftLayer_Search')\n\n# The items with the following Device types should be displayed\n# using the below filter:\n# Bare Metal Server, Virtual Server, Firewall, Gateway Member, Netscaler,KVM/IP\nfilter_data = '_objectType:SoftLayer_Hardware,'\\\n    'SoftLayer_Virtual_Guest,SoftLayer_Network_Vlan_Firewall,'\\\n    'SoftLayer_Network_Application_Delivery_Controller '\n\nbegin\n  # Display all items same as Portal &gt; Device List\n  result = search_service.advancedSearch(filter_data)\n  puts 'Process finished successfully'\n  p result\nrescue StandardError =&gt; e\n  raise e\nend\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 39001160, "answer_count": 1, "score": 0, "last_activity_date": 1471449049, "creation_date": 1471447273, "question_id": 39000600, "link": "https://stackoverflow.com/questions/39000600/softlayer-api-retrieve-total-network-devices-from-hardware", "title": "SoftLayer API retrieve total network devices from Hardware", "body": "<p>I'm using a ruby application along with the 'softlayer' gem to retrieve all the hardware (getHardware) and virtual machines (getVirtualGuests) associated to our accounts.  A question has come up about differentiating between network devices and machines.  I understand there are separate calls for getting certain network info and devices.  However, I'm wondering if network device information falls under the getHardware/getVirtualGuests results.  The \"getHardware\" call is returning several devices with a \"Vyatta\" operating system so can I assume \"getHardware\" retrieves all our network devices as well?  If this is true, is there a way I can reliably determine if a device is a network device other than the operating system value?  Example program:</p>\n\n<pre><code>require 'rubygems'\nrequire 'softlayer_api'\nrequire 'pp'\n\nclient = SoftLayer::Client.new(:username =&gt; user, :api_key =&gt; api_key, :endpoint_url =&gt; endpoint_url, :timeout =&gt; 99999999)\n\naccount = client['Account'].object_mask(\"mask[virtualGuestCount,hardwareCount]\").getObject()\n\nbare_metal_machines_count = account[\"hardwareCount\"]\n\nfor i in 0..(bare_metal_machines_count/30.0).ceil - 1\n  list_of_baremetal_machines = client['Account'].result_limit(i*30,30).object_mask(\"mask[id, hostname, backendNetworkComponents[primarySubnet[podName]], hourlyBillingFlag, fullyQualifiedDomainName, provisionDate, datacenter[name], billingItem[recurringFee, associatedChildren[recurringFee], orderItem[description, order[userRecord[username], id]]], operatingSystem[id, softwareLicense[id, softwareDescription[longDescription]]], tagReferences[tagId, tag[name]], primaryIpAddress, primaryBackendIpAddress]\").getHardware\n  for x in 0..list_of_baremetal_machines.length - 1\n    pp list_of_baremetal_machines[x]\n  end\nend\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471449414, "post_id": 39001100, "comment_id": 65354257, "body": "Does this solution end up with multiple records for the same book? For example there will be a book linking &#39;is_sold&#39; to the seller and &#39;is_bought&#39; to the purchaser? And if someone sells a book they just bought you&#39;d end up with two more book records? I hadn&#39;t considered this approach. It does seem to remove the idea of a book being a unique object in the data model. not sure how the OPs situation mixes with that."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471449688, "post_id": 39001100, "comment_id": 65354407, "body": "in that case, you will want to use a many-to-many relationship between user and book, which involves creating a new schema. And I would put the is_sold/is_bought in the new table."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1471449841, "post_id": 39001100, "comment_id": 65354508, "body": "Don&#39;t call models Model, <code>User</code> and <code>Book</code> are enough."}, {"owner": {"reputation": 57, "user_id": 6361626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4403138e78e50106e86d73f04da3dae8?s=128&d=identicon&r=PG&f=1", "display_name": "limaBEAN", "link": "https://stackoverflow.com/users/6361626/limabean"}, "edited": false, "score": 0, "creation_date": 1471450566, "post_id": 39001100, "comment_id": 65354943, "body": "@davidhu2000 Thank you for your response. Prior to asking, I had a similar idea on how to approach the problem."}, {"owner": {"reputation": 57, "user_id": 6361626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4403138e78e50106e86d73f04da3dae8?s=128&d=identicon&r=PG&f=1", "display_name": "limaBEAN", "link": "https://stackoverflow.com/users/6361626/limabean"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471450847, "post_id": 39001100, "comment_id": 65355131, "body": "@jaydel Eventually, I would like a master reference where anyone can go and see which book they would want regardless if someone buys/sells it. In that case, the books would be unique objects. However, even if two users have the same book, wouldn&#39;t those two physical books be different objects? I am not sure if I fully understand OO programming just yet."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471453081, "post_id": 39001100, "comment_id": 65356337, "body": "You can represent the books at an instance of a book (meaning there might be 40,000 copies of The Hobbit) or you might represent them at the conceptual level (there is only one The Hobbit but the many copies are represented as rows relating the single book to a single user. If you get to the point where you want to know how many copies are out there, you might adjust this slightly, of course. The data will be there, but the representation might not be clear enough for your purposes"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1471449956, "last_edit_date": 1471449956, "creation_date": 1471448861, "answer_id": 39001100, "question_id": 39000383, "link": "https://stackoverflow.com/questions/39000383/create-instances-or-models-for-buying-and-selling-a-product-in-ruby-on-rails/39001100#39001100", "title": "Create instances or models for buying and selling a product in Ruby on Rails?", "body": "<p>What I would do is create a User and a Book model, and build a user has many books relationship. For example:</p>\n\n<pre><code>class User\n  has_many :books\nend\n\nclass Book\n  belongs_to :user\nend\n</code></pre>\n\n<p>Then you can run a migration for the book model to create a two columns\nis_sold or is_bought, and set a boolean on each whenever a book is sold or bought. </p>\n\n<p>Whenever you need create a list of books bought by a certain user, you can select all the books based on the conditions that the book belongs to the user and is_sold/is_bought is true. </p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 6361626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4403138e78e50106e86d73f04da3dae8?s=128&d=identicon&r=PG&f=1", "display_name": "limaBEAN", "link": "https://stackoverflow.com/users/6361626/limabean"}, "edited": false, "score": 0, "creation_date": 1471450302, "post_id": 39001258, "comment_id": 65354801, "body": "I didn&#39;t even think about a book_transaction table. That will definitely help keeping tabs on what is going on in a single table. Excuse my lack of knowledge, but STI? Did a quick search and found Single Table Inheritance. I am positive you didn&#39;t mean Sexually Transmitted Infection."}, {"owner": {"reputation": 57, "user_id": 6361626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4403138e78e50106e86d73f04da3dae8?s=128&d=identicon&r=PG&f=1", "display_name": "limaBEAN", "link": "https://stackoverflow.com/users/6361626/limabean"}, "edited": false, "score": 0, "creation_date": 1471452626, "post_id": 39001258, "comment_id": 65356117, "body": "Just to clarify, would the book_transactions table be the table to inherit from the book table?"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "reply_to_user": {"reputation": 57, "user_id": 6361626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4403138e78e50106e86d73f04da3dae8?s=128&d=identicon&r=PG&f=1", "display_name": "limaBEAN", "link": "https://stackoverflow.com/users/6361626/limabean"}, "edited": false, "score": 0, "creation_date": 1471452843, "post_id": 39001258, "comment_id": 65356219, "body": "yes, sorry, Single Table Inheritance. Basically you have a &#39;type&#39; column in the table and can have different model implementations that rely on that type for self identification. In my little answer you&#39;d have a table for books, one for users and then a separate table + model that relates books to users."}], "tags": [], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "is_accepted": false, "score": 0, "last_activity_date": 1471449297, "creation_date": 1471449297, "answer_id": 39001258, "question_id": 39000383, "link": "https://stackoverflow.com/questions/39000383/create-instances-or-models-for-buying-and-selling-a-product-in-ruby-on-rails/39001258#39001258", "title": "Create instances or models for buying and selling a product in Ruby on Rails?", "body": "<p>If you are interested in historical auditing of the data--in capturing metadata about the sales/purchase transaction itself, then I'd go with a users table, a book table, and a book_transaction table. You can use STI to differentiate the two types of book_transactions (this opens you up for more options down the road, for example a book_return_type, etc). </p>\n\n<p>In the STI case mixins and scopes definitely will improve the implementation. </p>\n\n<p>If you don't care for STI you can just have a single model, but in this particular case it might be powerful to have a pair of models that leverage this table.</p>\n\n<p>You're asking good questions. The answers will be inextricably tied to what you need to do with the data, of course, and I have limited insight into that.</p>\n"}, {"comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471453248, "post_id": 39001478, "comment_id": 65356427, "body": "You say &quot;It&#39;s important that you keep this price, because the book price can change after.&quot; That depends upon requirements. It&#39;s entirely possible that the system doesn&#39;t even care about price in terms of exchanges of books. For example LibraryThing or GoodReads. the current price is interesting to present as data to the user but otherwise unimportant."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471467886, "post_id": 39001478, "comment_id": 65364135, "body": "@jaydel Well, usually when you the site being build &quot;involves buying and selling books&quot; price matters. When it does, my comment applies; when it doesn&#39;t, I wouldn&#39;t call it buying and selling."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471468242, "post_id": 39001478, "comment_id": 65364302, "body": "I always try to just answer the questions as they are asked, not with any assumptions of my own. no big deal though"}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 1, "last_activity_date": 1471450032, "creation_date": 1471450032, "answer_id": 39001478, "question_id": 39000383, "link": "https://stackoverflow.com/questions/39000383/create-instances-or-models-for-buying-and-selling-a-product-in-ruby-on-rails/39001478#39001478", "title": "Create instances or models for buying and selling a product in Ruby on Rails?", "body": "<p>You want User, Book, Order and OrderLine or equivalent models.</p>\n\n<p>Book stored the listing on your site, the current price and other information. Order would be a user's cart and/or invoice for each purchase he does, this has many order lines. Those point to the book bought, but store the price at the time of the transaction. It's important that you keep this price, because the book price can change after. </p>\n\n<p>A more complicated setup has different models for orders and invoices, but that's up to you.</p>\n"}], "owner": {"reputation": 57, "user_id": 6361626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4403138e78e50106e86d73f04da3dae8?s=128&d=identicon&r=PG&f=1", "display_name": "limaBEAN", "link": "https://stackoverflow.com/users/6361626/limabean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "closed_date": 1471477710, "answer_count": 3, "score": 0, "last_activity_date": 1471450032, "creation_date": 1471446661, "question_id": 39000383, "link": "https://stackoverflow.com/questions/39000383/create-instances-or-models-for-buying-and-selling-a-product-in-ruby-on-rails", "closed_reason": "Opinion-based", "title": "Create instances or models for buying and selling a product in Ruby on Rails?", "body": "<p>I am debating on how to structure a Rails application that involves buying and selling books. What I want to accomplish is for every user who buys a book, there will be a page with a list of users who bought books. In addition, for every user who sells a book, there will be a page with a list of users who are selling books. </p>\n\n<p>Should I create a book model and create instances every time a user buys/sells a book or should I create a buy model and sell model that refer back to the book model?</p>\n\n<p>I've read about modules and mixins and feel that this might be a good alternative. Any suggestions will be appreciated. </p>\n"}, {"tags": ["ruby", "inspec"], "answers": [{"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1471449089, "creation_date": 1471449089, "answer_id": 39001174, "question_id": 39000084, "link": "https://stackoverflow.com/questions/39000084/undefined-method-scan-for-nilnilclass-nomethoderror/39001174#39001174", "title": "Undefined method &#39;scan&#39; for nil:NilClass (NoMethodError)", "body": "<p>You can change <code>file(path).content</code> to a string that matches whatever the file content is. </p>\n\n<pre><code>\"Sample_string\".scan(/^\\s*umask\\s+(\\d{3})\\b/).flatten.each do |umask|\n</code></pre>\n\n<p>The reason is <code>file(path).content</code> returns <code>nil</code> if you are not testing against a real file. And <code>nil</code> does not have the <code>scan</code> method, which is why you are getting the error.</p>\n"}, {"tags": [], "owner": {"reputation": 944, "user_id": 3963970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WC8zU.jpg?s=128&g=1", "display_name": "Mrigesh Priyadarshi", "link": "https://stackoverflow.com/users/3963970/mrigesh-priyadarshi"}, "is_accepted": true, "score": 0, "last_activity_date": 1471587985, "last_edit_date": 1471587985, "creation_date": 1471587221, "answer_id": 39032223, "question_id": 39000084, "link": "https://stackoverflow.com/questions/39000084/undefined-method-scan-for-nilnilclass-nomethoderror/39032223#39032223", "title": "Undefined method &#39;scan&#39; for nil:NilClass (NoMethodError)", "body": "<p>As far as the error is concerned, i.e., \"<strong><em>Undefined method 'scan' for nil:NilClass</em></strong>\", this error would only come up, while doing inspec run, if the files, which are being passed, are either not present or not readable on the file system. </p>\n\n<p>Also, The information provided is not complete, as it is unclear that what is the umask set in both files, i.e, is it 3 digits or 4 digits ones?</p>\n\n<p>Because while doing scan you are looking for 3 digit umask \"<strong><em>scan(/^\\s</em>umask\\s+(\\d{3})\\b/)*</strong>\" and you have set \"<strong><em>BASELINE = '0027'</em></strong>\" which is 4 digit one. So, it would definitely going to have a problem.</p>\n\n<p>If you have \"<strong><em>umask 027</em></strong>\" in the files, then, it should be:\nCheck <strong>BASELINE = '027'</strong>, searching 3 digit umask</p>\n\n<pre><code>%w(/etc/bashrc /etc/profile).each do |path|\n  file(path).content.scan(/^\\s*umask\\s+(\\d{3})\\b/).flatten.each do |umask| \n   BASELINE = '027'\n   (1..3).each do |i| # leading char is '0' octal indicator\n      describe umask[i].to_i do\n        it { should be &lt;= BASELINE[i].to_i }\n      end\n   end\n end\nend\n</code></pre>\n\n<p>Else you have \"<strong><em>umask 0027</em></strong>\" in the files, then, it should be:</p>\n\n<p>Check <strong>scan(/^\\s*umask\\s+(\\d{4})\\b/)</strong>, searching 4 digit umask</p>\n\n<pre><code>%w(/etc/bashrc /etc/profile).each do |path|\n  file(path).content.scan(/^\\s*umask\\s+(\\d{4})\\b/).flatten.each do |umask| \n   BASELINE = '027'\n   (1..3).each do |i| # leading char is '0' octal indicator\n      describe umask[i].to_i do\n        it { should be &lt;= BASELINE[i].to_i }\n      end\n   end\n end\nend\n</code></pre>\n"}], "owner": {"reputation": 787, "user_id": 6726990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25b10afe9155203945628b1dfbfb2b70?s=128&d=identicon&r=PG&f=1", "display_name": "Blooze", "link": "https://stackoverflow.com/users/6726990/blooze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3409, "favorite_count": 0, "accepted_answer_id": 39032223, "answer_count": 2, "score": 1, "last_activity_date": 1481437549, "creation_date": 1471445865, "last_edit_date": 1481437549, "question_id": 39000084, "link": "https://stackoverflow.com/questions/39000084/undefined-method-scan-for-nilnilclass-nomethoderror", "title": "Undefined method &#39;scan&#39; for nil:NilClass (NoMethodError)", "body": "<p>Stuck on this one, this layout is for a chef inspec test but leveraging ruby to grab the contents of a file. However with this test I'm not actually testing against a file, so I'm trying to understand how to account for that, heres the code:</p>\n\n<pre><code>%w(/etc/bashrc /etc/profile).each do |path|\nfile(path).content.scan(/^\\s*umask\\s+(\\d{3})\\b/).flatten.each do |umask| \n BASELINE = '0027'\n (1..3).each do |i| # leading char is '0' octal indicator\n    describe umask[i].to_i do\n        it { should be &lt;= BASELINE[i].to_i }\n     end\n    end\n   end\n  end\nend\n</code></pre>\n\n<p>Here is the line giving me trouble</p>\n\n<pre><code>file(path).content.scan(/^\\s*umask\\s+(\\d{3})\\b/).flatten.each do |umask|\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "email"], "comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1471446428, "post_id": 38999110, "comment_id": 65352284, "body": "Maybe this is an old thread (application worker or background worker). Did all Ruby processes restart properly after deployment?"}, {"owner": {"reputation": 11, "user_id": 4256293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53bd7efe92bfb19efc4d5741c852a11?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4256293/denis"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1471447203, "post_id": 38999110, "comment_id": 65352841, "body": "I&#39;m able to see my most recent changes yes."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1471447459, "post_id": 38999110, "comment_id": 65353019, "body": "Are you using a preloader like Zeus or Spring? If any, stop (and restart) it, then restart you app and try again. They sometimes fail to recognize all relevant code changes themselves."}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1471453696, "post_id": 38999110, "comment_id": 65356688, "body": "As @Raffael said, make sure you don&#39;t have any old workers that could have and old running copy of your code. Kill all the workers and restart if you can and if you are indeed using them in this case."}], "answers": [{"comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1471546427, "post_id": 39002569, "comment_id": 65401892, "body": "Exactly the kind of problem I had in mind :) Remember that you can (and should) accept an answer, even if you answered the question yourself."}], "tags": [], "owner": {"reputation": 11, "user_id": 4256293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53bd7efe92bfb19efc4d5741c852a11?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4256293/denis"}, "is_accepted": true, "score": 0, "last_activity_date": 1471453737, "creation_date": 1471453737, "answer_id": 39002569, "question_id": 38999110, "link": "https://stackoverflow.com/questions/38999110/mailer-cant-find-template-using-path-to-archived-release-folder/39002569#39002569", "title": "Mailer can&#39;t find template, using path to archived release folder", "body": "<p>Thanks to @Raffael, I thought about what processes are running. I use Delayed_Job to send emails. Once I stopped and restarted DJ my emails started sending properly. Thank you!</p>\n"}], "owner": {"reputation": 11, "user_id": 4256293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53bd7efe92bfb19efc4d5741c852a11?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4256293/denis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 39002569, "answer_count": 1, "score": 0, "last_activity_date": 1471453737, "creation_date": 1471443137, "last_edit_date": 1471444979, "question_id": 38999110, "link": "https://stackoverflow.com/questions/38999110/mailer-cant-find-template-using-path-to-archived-release-folder", "title": "Mailer can&#39;t find template, using path to archived release folder", "body": "<p>Only in production, action sends email which doesn't get sent citing this issue:</p>\n\n<blockquote>\n  <p>\"Missing template general_mailer/general_email with \\\"mailer\\\"  ... \n  <code>mail'\\n/var/www/thecompany/releases/20160514000058/app/mailers/general_mailer.rb:16:in\n  </code>general_email</p>\n</blockquote>\n\n<p>Notice the reference to the dated folder that's too old and no longer on the server.</p>\n\n<p>My mailer code is this:</p>\n\n<pre><code>class GeneralMailer &lt; ApplicationMailer\n  append_view_path Rails.root.join('app', 'views', 'general_mailer')\n\n  def general_email(recipient_name, recipient_email, subject, greeting, pre_link_message, link, link_label, post_link_message, closing, signature)\n    ...\n    mail(to: \"#{@recipient_name} &lt;#{@recipient_email}&gt;\", subject: @subject)   \n  end    \nend\n</code></pre>\n\n<p>I can assure you that in my views, the path to the file is <code>views/general_mailer/general_email.html.erb</code></p>\n\n<p>Can someone help me get the mailer to look in the \"current\" folder instead please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 1, "creation_date": 1471442855, "post_id": 38998986, "comment_id": 65349542, "body": "outer form will submited all the time better to use ajax on click of inner form"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 2, "creation_date": 1471443087, "post_id": 38998986, "comment_id": 65349716, "body": "put an answer together demonstrating how that might work and I&#39;ll definitely vote for it :)"}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 1, "creation_date": 1471445298, "post_id": 38998986, "comment_id": 65351486, "body": "i&#39;ll upvote the answer if you put it together. :) one way would be to create a new route where you <code>POST</code> the form, and then handle the models individually, but it won&#39;t be a <code>form_for</code>."}, {"owner": {"reputation": 103, "user_id": 3282717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fc744c985ae400f0429d6747f131b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekhar Bammidi", "link": "https://stackoverflow.com/users/3282717/rajasekhar-bammidi"}, "edited": false, "score": 1, "creation_date": 1471448484, "post_id": 38998986, "comment_id": 65353661, "body": "try using fields_for inside the form and save it."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "edited": false, "score": 1, "creation_date": 1471449465, "post_id": 38998986, "comment_id": 65354287, "body": "&lt;%= fields_for :customer, @invoice.customer do |c| %&gt; isn&#39;t working. I get; SQLite3::SQLException: no such column: customers.invoice_id"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1471451366, "post_id": 38998986, "comment_id": 65355432, "body": "there isn&#39;t a way to submit multiple forms at once. Maybe combine them into a single form. You could get it done with Javascript, but you&#39;ll have to convert all the form submissions to AJAX (i.e. making a <code>submit</code> event on the parent form and submitting the others using <code>$.get(url, data)</code> and making a success callback)."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "edited": false, "score": 0, "creation_date": 1471452561, "post_id": 38998986, "comment_id": 65356073, "body": "Yeah i thought something like that. Could you perhaps give an answer to demonstrate how to do that? I think these guys above are curious aswell."}], "owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471534093, "creation_date": 1471442804, "last_edit_date": 1471443122, "question_id": 38998986, "link": "https://stackoverflow.com/questions/38998986/how-to-put-multiple-form-fors-on-the-same-page", "title": "How to put multiple form_for&#39;s on the same page", "body": "<p>Oke guys i'm busy making an invoice app and i'm kinda stuck atm.</p>\n\n<p>On the invoice page i have something similar like</p>\n\n<pre><code>&lt;%= form_for(@invoice) do |f| %&gt;\n &lt;%= f.date_select :date %&gt;\n\n    &lt;%= form_for :customer do |c| %&gt;\n    &lt;%= c.text_field :company_name %&gt;\n    &lt;% end %&gt;\n\n &lt;%= f.text_field :invoice_number %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But when i save the invoice and try to edit it again the customer details are gone. </p>\n\n<p><strong>How do you put multiple form_for's in one page and save them all with one submit button?</strong></p>\n"}, {"tags": ["ruby", "cucumber"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1471444626, "post_id": 38998910, "comment_id": 65350990, "body": "Note that you can format the code in your question by placing 4 spaces at the start of each line (or select the text and click the code sample button)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6442563"}, "edited": false, "score": 0, "creation_date": 1471448552, "post_id": 39000001, "comment_id": 65353712, "body": "* Thank you so much"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 0, "last_activity_date": 1471445636, "creation_date": 1471445636, "answer_id": 39000001, "question_id": 38998910, "link": "https://stackoverflow.com/questions/38998910/call-excel-method-from-module/39000001#39000001", "title": "Call EXCEL method from Module", "body": "<p>To include the methods of a module in a step definition, you need to add the module to the <a href=\"https://github.com/cucumber/cucumber/wiki/A-Whole-New-World\" rel=\"nofollow\">World</a>.</p>\n\n<p>In your <code>env.rb</code> (or a file required by it) add the following line (after you have required the module file):</p>\n\n<pre><code>World(CF)\n</code></pre>\n\n<p>You should also remove the <code>include CF</code> line from the step definition.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6442563"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 39000001, "answer_count": 1, "score": 0, "last_activity_date": 1471621846, "creation_date": 1471442610, "last_edit_date": 1471621846, "question_id": 38998910, "link": "https://stackoverflow.com/questions/38998910/call-excel-method-from-module", "title": "Call EXCEL method from Module", "body": "<p>Creating module:</p>\n\n<pre><code>module CF\n  def work_sheet(excel_doc_name, workbook_name)\n    dir_to_excel = Dir.pwd + '/lib/config/data/'\n    read_workbook = RubyXL::Parser.parse(\"#{dir_to_excel}#{excel_doc_name}\")\n    worksheet = read_workbook[\"#{workbook_name}\"]\n  end\nend\n</code></pre>\n\n<p>Call this method from module:</p>\n\n<pre><code>Given(/^Excel read$/) do\n  include CF\n  work_sheet(\"Login.xlsx\", \"Login_info\")\nend\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>NoMethodError: undefined method `work_sheet' for #&lt;Object:0x442f158&gt;\n</code></pre>\n\n<p>Please check <a href=\"https://i.stack.imgur.com/hW1vw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hW1vw.jpg\" alt=\"Screen\"></a></p>\n"}, {"tags": ["ruby", "forms", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 3867, "user_id": 515948, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1abe88862a65973704f7c9b028cf7afe?s=128&d=identicon&r=PG", "display_name": "Laur Ivan", "link": "https://stackoverflow.com/users/515948/laur-ivan"}, "edited": false, "score": 0, "creation_date": 1471443128, "post_id": 38998872, "comment_id": 65349737, "body": "The only thing I can see is the <code>&lt;br&gt;</code>. self-closing tag would be <code>&lt;br &#47;&gt;</code>. Also, have you looked at the generated code?"}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "reply_to_user": {"reputation": 3867, "user_id": 515948, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1abe88862a65973704f7c9b028cf7afe?s=128&d=identicon&r=PG", "display_name": "Laur Ivan", "link": "https://stackoverflow.com/users/515948/laur-ivan"}, "edited": false, "score": 0, "creation_date": 1471444221, "post_id": 38998872, "comment_id": 65350668, "body": "That doesn&#39;t seem to make a difference"}], "answers": [{"tags": [], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "is_accepted": true, "score": 0, "last_activity_date": 1471444480, "creation_date": 1471444480, "answer_id": 38999592, "question_id": 38998872, "link": "https://stackoverflow.com/questions/38998872/modal-form-only-works-after-refresh/38999592#38999592", "title": "Modal form only works after refresh", "body": "<p>I've managed to fix it by placing the entire body in form for tags</p>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 38999592, "answer_count": 1, "score": 1, "last_activity_date": 1471444480, "creation_date": 1471442511, "question_id": 38998872, "link": "https://stackoverflow.com/questions/38998872/modal-form-only-works-after-refresh", "title": "Modal form only works after refresh", "body": "<p>Hi I have a modal form in my application that is spawned by a link in the nav bar. The form seem to only work when the page has been refreshed, if I access a page from a link it wont work until I refresh the page.</p>\n\n<p>Here is my form in aoolication.html.erb:</p>\n\n<pre><code>&lt;div class=\"modal fade\" id=\"myModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"&gt;\n  &lt;div class=\"modal-dialog\" role=\"document\"&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n        &lt;h1&gt;New Update&lt;/h1&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-body\"&gt;\n        &lt;%= form_for :post, url: posts_path do |f| %&gt;\n        &lt;div class=\"container\"&gt;\n          &lt;p&gt;What have you been working on?&lt;/p&gt;\n            &lt;p&gt;\n              &lt;%=f.label :title %&gt; &lt;br&gt;\n              &lt;%=f.text_field :title %&gt;\n            &lt;/p&gt;\n\n            &lt;p&gt;\n              &lt;%=f.label :body %&gt; &lt;br&gt;\n              &lt;%=f.text_field :body %&gt;\n            &lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer\"&gt;\n        &lt;button type=\"button\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n          &lt;%= f.submit %&gt;\n        &lt;%end%&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>From looking into it I've found it could be caused by malformed HTML, but I can't seem to find anything that ould be causing it.</p>\n\n<p>Any help with fixing this would be greatly appriciated. </p>\n"}, {"tags": ["ruby", "math", "conditional"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 3, "creation_date": 1471442298, "post_id": 38998597, "comment_id": 65349062, "body": "Hint: Why are you expecting mod of number with 15 to be 15? Also, why return early? What happens when number is 30?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1471442509, "post_id": 38998597, "comment_id": 65349244, "body": "Hint: Consider order of operations. Also, remember in Ruby that <code>return</code> is implicit, you can omit them all here. You&#39;ll also want your <code>else</code> condition to contain <code>int</code>. What does <code>15 % 15</code> return when using a tool like <code>irb</code> for testing?"}, {"owner": {"reputation": 3, "user_id": 6697885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c15f68e9bbaceff6f5e6809e6281f86?s=128&d=identicon&r=PG&f=1", "display_name": "Daquon", "link": "https://stackoverflow.com/users/6697885/daquon"}, "edited": false, "score": 0, "creation_date": 1471443004, "post_id": 38998597, "comment_id": 65349650, "body": "else needs to return nil my test is actually passing in that regard i need elsif to return a number divisible by 3 and 5 which i know is 15 i just didnt know how to get it i&#39;m still trying to understand % i will play around in irb thank you"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1471465990, "post_id": 38998597, "comment_id": 65363224, "body": "the ruby modulus is pretty easy once you remember <code>%</code> returns the REMAINDER of one number divided by another. so the the return of <code>5 % 3</code> is going to be <code>2</code> since 5 divided by 3 is 1, with a remainder of 2. The answer below gives you the rest ;) Enjoy Ruby, it&#39;s pretty sweet!"}], "answers": [{"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 3, "last_activity_date": 1471898910, "last_edit_date": 1471898910, "creation_date": 1471449597, "answer_id": 39001350, "question_id": 38998597, "link": "https://stackoverflow.com/questions/38998597/having-trouble-with-conditionals/39001350#39001350", "title": "Having trouble with conditionals", "body": "<p>So for conditionals, ruby evaluate the <code>if</code>, then the <code>elsif</code>, and finally the <code>else</code> in order. If anything condition evaluates to true, then the rest of the conditions are ignored. </p>\n\n<pre><code>def fizzbuzz(int)\n  if int % 3 == 0\n    return \"Fizz\"\n  elsif int % 5 == 0\n    return \"Buzz\"\n  elsif int % 15 == 15\n    return \"FizzBuzz\"\n  else\n  end\nend\n</code></pre>\n\n<p>So let's look at a few examples based on your current code. </p>\n\n<p>Say <code>int = 3</code>\nWe go to <code>if int % 3 == 0</code>, which is true, so the code return \"Fizz\" and nothing below that is evaluated. </p>\n\n<p>Say <code>int = 5</code>, \n<code>int % 3 == 0</code> is false, we move onto the first elsif.\n<code>int % 5 == 0</code> is true, we return \"Buzz\"</p>\n\n<p>Now let's look at 15,\n<code>int % 3 == 0</code> is true, so the code will return \"Fizz\" and ignores everything else, even if there are more conditions that will evaluate to be true after the if statement. </p>\n\n<p>The order here is very important. You will want to check if <code>int % 15 == 0</code> first, then move onto <code>% 3</code> and <code>% 5</code>. </p>\n"}], "owner": {"reputation": 3, "user_id": 6697885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c15f68e9bbaceff6f5e6809e6281f86?s=128&d=identicon&r=PG&f=1", "display_name": "Daquon", "link": "https://stackoverflow.com/users/6697885/daquon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471898910, "creation_date": 1471441861, "last_edit_date": 1471456396, "question_id": 38998597, "link": "https://stackoverflow.com/questions/38998597/having-trouble-with-conditionals", "title": "Having trouble with conditionals", "body": "<p>I'm trying to define a method that returns \"fizz\" when the integer is divisible by 3, \"buzz\" when is divisible by 5 and \"fuzzbuzz\" when the number is divisible by both. I know 15 is divisible by both, however I don't know what I'm inputting wrong in my code. Thank you. </p>\n\n<pre><code>def fizzbuzz(int)\n  if int % 3 == 0\n    return \"Fizz\"\n  elsif int % 5 == 0\n    return \"Buzz\"\n  elsif int % 15 == 15\n    return \"FizzBuzz\"\n  else\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1471442048, "post_id": 38997966, "comment_id": 65348878, "body": "Try placing a pixel in email template that goes through your application route, whenever someone opens your mail, pixel will be downloaded and you can easily increase its counter to know how many times your mail has been opened, to make it more feature rich, append unique ids of users and then track them. You can&#39;t track if an email has been deleted or not if it is not opened."}, {"owner": {"reputation": 3427, "user_id": 1425140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/abc53330574145dcfc1e9e910ca5a6bf?s=128&d=identicon&r=PG", "display_name": "Xander Luciano", "link": "https://stackoverflow.com/users/1425140/xander-luciano"}, "edited": false, "score": 0, "creation_date": 1471442073, "post_id": 38997966, "comment_id": 65348897, "body": "The only way you <i>could</i> do this is by including an image in your email and tracking the requests to the image on your server with analytics, but most of the time now, google servers will download the image ahead of time, or it will be blocked by the client."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1471451483, "post_id": 38997966, "comment_id": 65355497, "body": "there is a gem for this, haven&#39;t tested it though: <a href=\"https://github.com/ankane/ahoy_email\" rel=\"nofollow noreferrer\">github.com/ankane/ahoy_email</a>"}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1471454014, "post_id": 38997966, "comment_id": 65356854, "body": "The way I implement email metrics is by using a third party solution such as SendGrid. Not sure if you want to have a home built solution but SendGrid does allow you to do what you are looking for, it allows to track deliveries, opened emails, clicks, bounces, spam reports etc."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1471460291, "post_id": 38997966, "comment_id": 65360288, "body": "I think the variation in the ideas that have been offered in comments show that this question is too broad for this format.  Hopefully those comments will give you some ideas to try, and when you get more specific questions you can ask them here."}], "answers": [{"comments": [{"owner": {"reputation": 3119, "user_id": 3106816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LDdbB.jpg?s=128&g=1", "display_name": "Jigar Bhatt", "link": "https://stackoverflow.com/users/3106816/jigar-bhatt"}, "edited": false, "score": 0, "creation_date": 1471597197, "post_id": 39021993, "comment_id": 65419768, "body": "Thanks a lot. This answer is useful for me."}], "tags": [], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "is_accepted": false, "score": 1, "last_activity_date": 1471533802, "creation_date": 1471533802, "answer_id": 39021993, "question_id": 38997966, "link": "https://stackoverflow.com/questions/38997966/how-to-track-email-in-ruby-on-rails/39021993#39021993", "title": "How to track email in Ruby on Rails?", "body": "<p>As @max_pleaner suggested, you can use that gem or go through one of this post - <a href=\"https://myles.eftos.id.au/blog/2013/08/25/track-email-opens-using-a-pixel-tracker-from-rails/#.V7XSSbMvDDd\" rel=\"nofollow\">https://myles.eftos.id.au/blog/2013/08/25/track-email-opens-using-a-pixel-tracker-from-rails/#.V7XSSbMvDDd</a></p>\n\n<p>What you are trying to embed is referred to as beacon-image or web bug</p>\n"}, {"tags": [], "owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "is_accepted": false, "score": 1, "last_activity_date": 1471535736, "creation_date": 1471535736, "answer_id": 39022682, "question_id": 38997966, "link": "https://stackoverflow.com/questions/38997966/how-to-track-email-in-ruby-on-rails/39022682#39022682", "title": "How to track email in Ruby on Rails?", "body": "<p>You could insert a pixel in it and track how many times its been downloaded. Just like an image. I can't write exact way, since I never tried it, but I am sure it could be done like this.</p>\n"}, {"tags": [], "owner": {"reputation": 512, "user_id": 1824521, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/memkm.jpg?s=128&g=1", "display_name": "serj", "link": "https://stackoverflow.com/users/1824521/serj"}, "is_accepted": false, "score": 3, "last_activity_date": 1491377986, "creation_date": 1491377986, "answer_id": 43224826, "question_id": 38997966, "link": "https://stackoverflow.com/questions/38997966/how-to-track-email-in-ruby-on-rails/43224826#43224826", "title": "How to track email in Ruby on Rails?", "body": "<p>I'll give you an example how I implemented this feature: </p>\n\n<ol>\n<li>My <code>CustomMailer</code> class generates a google tracking url similar to: </li>\n</ol>\n\n<p><a href=\"https://www.formget.com/email-tracking-google-analytics/\" rel=\"nofollow noreferrer\">http://www.google-analytics.com/collect?v=1&amp;tid= Tracking ID&amp;cid=Customer ID&amp;t=Event hit type&amp;ec=Event Category&amp;ea=Event Action&amp;el=Event Label&amp;cs=Campaign Source&amp;cm=Campaign Medium&amp;cn=Campaign Name</a></p>\n\n<p><code>@google_analytics_url = url</code></p>\n\n<ol start=\"2\">\n<li><p>My <code>CustomMailView</code> adds this link to an image (pixel image)</p>\n\n<p><code>&lt;img src=&lt;%= @google_analytics_url %&gt; width=1 height=1 /&gt;</code></p></li>\n</ol>\n\n<p><a href=\"https://www.formget.com/email-tracking-google-analytics/\" rel=\"nofollow noreferrer\">More general info about different google analytics parameters</a> </p>\n\n<p><strong>Full example using</strong> <a href=\"http://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">rails official docs</a>: </p>\n\n<p>Mailer:</p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  default from: 'notifications@example.com'\n\n  def welcome_email(user)\n    @user = user\n    @google_analytics_url  = 'http://www.google-analytics.com/collect?v=1&amp;tid=UA-****&amp;cid=CustomerID&amp;t=event&amp;ec=open_email&amp;ea=Event Action&amp;el=Event Label&amp;cs=Campaign Source&amp;cm=Campaign Medium&amp;cn=Campaign Name'\n    mail(to: @user.email, subject: 'Welcome to My Awesome Site')\n  end\nend\n</code></pre>\n\n<p>View mail_view.html.erb:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content='text/html; charset=UTF-8' http-equiv='Content-Type' /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Welcome to example.com, &lt;%= @user.name %&gt;&lt;/h1&gt;\n    &lt;p&gt;\n      You have successfully signed up to example.com,\n      your username is: &lt;%= @user.login %&gt;.&lt;br&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      To login to the site, just follow this link: &lt;%= @url %&gt;.\n    &lt;/p&gt;\n    &lt;p&gt;Thanks for joining and have a great day!&lt;/p&gt;\n    &lt;img src=&lt;%= @google_analytics_url %&gt; width=1 height=1 /&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1505996037, "creation_date": 1505996037, "answer_id": 46343663, "question_id": 38997966, "link": "https://stackoverflow.com/questions/38997966/how-to-track-email-in-ruby-on-rails/46343663#46343663", "title": "How to track email in Ruby on Rails?", "body": "<p>I have struggled a lot Here is the solution. </p>\n\n<p>Firstly your mailer will look like this one <br/></p>\n\n<p><strong>UserMailer</strong></p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n\n\n    default from: 'aniket.tiw@gmail.com'\n\n    def send_mail(email,body ,subject,user)\n        @body = body\n\n        @user = user\n        mail(to: email, subject: subject)\n    end\n\n\nend\n</code></pre>\n\n<p>Now let us create the routes</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get '/trackemail/:id', to: 'users#track_email'\n\nend\n</code></pre>\n\n<p>Now before going to the view. You have to install Localtunnel so that whenever someone opens the email so it may get redirect as Gmail doesn't know localhost </p>\n\n<p>I have attached the link <a href=\"https://rubyplus.com/articles/4191-How-to-Expose-Local-Rails-App-to-the-Public-Internet\" rel=\"nofollow noreferrer\">link</a> how to install localtunnel.</p>\n\n<p>As you can see in my view I have also attached random string.This I have done because for the first time this method will work but then Gmail caches our record.So every time the URL should be new and the image gets open.Even you can hide the image by giving style </p>\n\n<p><strong>user_mailer/send_mail.html.erb</strong></p>\n\n<p></p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content='text/html; charset=UTF-8' http-equiv='Content-Type' /&gt;\n\n  &lt;/head&gt;\n  &lt;body &gt;\n    &lt;h1&gt;Hi  &lt;/h1&gt;\n    &lt;p&gt;\n      &lt;%= @body %&gt;\n\n       &lt;% str = (0...8).map { (65 + rand(26)).chr }.join %&gt;\n      &lt;img src=&lt;%=\"https://morwhnykzf.localtunnel.me/#{@user.id}?#{str} \"%&gt; class=\"profile\" /&gt;\n    &lt;/p&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>users_controller</strong></p>\n\n<pre><code>    class UsersController &lt; ApplicationController\n     def track_email\n        send_file(\"/home/aniketshivamtiwari/Desktop/track.jpg\",:disposition =&gt; true,:type=&gt; 'image/jpeg',:x_sendfile =&gt; true)\n\n      end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 3119, "user_id": 3106816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LDdbB.jpg?s=128&g=1", "display_name": "Jigar Bhatt", "link": "https://stackoverflow.com/users/3106816/jigar-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2873, "favorite_count": 3, "answer_count": 4, "score": 4, "last_activity_date": 1505996037, "creation_date": 1471440251, "last_edit_date": 1471448168, "question_id": 38997966, "link": "https://stackoverflow.com/questions/38997966/how-to-track-email-in-ruby-on-rails", "title": "How to track email in Ruby on Rails?", "body": "<p>I am using rails 4.0 and I want to know how to get email tracking.</p>\n\n<p>I mean I want to know how many users open my email and when they opened, if it is deleted or not, if it were read.</p>\n\n<p>In short, I want to know how to track email related information after they are successfully delivered.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1471441862, "post_id": 38997720, "comment_id": 65348745, "body": "Can you post your <code>routes.rb</code> file and also renaming your <code>def index</code> action to <code>def search</code> and seeing if that helps?"}, {"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "reply_to_user": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1471442137, "post_id": 38997720, "comment_id": 65348938, "body": "I will update the question with my route.rb , I will try to rename right now, thanks for your answer !"}, {"owner": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1471442753, "post_id": 38997720, "comment_id": 65349463, "body": "It looks like you may need to also add a route for your <code>searchs#search</code> action. Try adding something like <code>get &#39;&#47;city_search&#39;, to: &#39;searchs#search</code>. If you want to take this to chat so I can explain in further detail how this all works I would be happy to do that."}, {"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "reply_to_user": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1471443491, "post_id": 38997720, "comment_id": 65350023, "body": "Thanks Anthony, I will try to add a route for the searchs#search , I thought my code in the html was wrong &lt;% if @searchs.present? %&gt; and the render. If i can&#39;t find any solution, i will ask you directly , thanks again !!"}, {"owner": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1471443621, "post_id": 38997720, "comment_id": 65350136, "body": "I looked at that too, and while not the most elegant solution, it seems like it should work. You could just change that to <code>&lt;% if @searchs? %&gt;</code> if you wanted. Good luck and please reach out if you have questions! I&#39;m happy to help/mentor."}, {"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "reply_to_user": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 1, "creation_date": 1471449780, "post_id": 38997720, "comment_id": 65354472, "body": "I found a solution , I changed the route.rb like you said. I change the path of my html form (&#39;searchs / search.html.erb&#39;). And i changed the render , it was a partial so , I replaced it with a ~&quot;  &lt;% @searchs.each do |search| %&gt; &quot;~ the problem now is that the table is always displayed , but it worked and when I change the parameters ,the table is changing with the right values. I need to check how to render the table only when i press the Search Button . Thanks again Anthony"}, {"owner": {"reputation": 791, "user_id": 5120006, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VLzrM.jpg?s=128&g=1", "display_name": "Cent", "link": "https://stackoverflow.com/users/5120006/cent"}, "edited": false, "score": 0, "creation_date": 1471450300, "post_id": 38997720, "comment_id": 65354800, "body": "@MartinRails If you&#39;ve solved this, could you add your answer, so it helps others that might be in a similar condition?"}, {"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "edited": false, "score": 0, "creation_date": 1471450808, "post_id": 38997720, "comment_id": 65355102, "body": "Yes of course , I Will try to explain it clearly ;)"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "is_accepted": false, "score": 0, "last_activity_date": 1471454898, "creation_date": 1471454898, "answer_id": 39002896, "question_id": 38997720, "link": "https://stackoverflow.com/questions/38997720/render-result-for-a-form-rails-gem-geocoder/39002896#39002896", "title": "Render result for a Form rails / gem geocoder", "body": "<p>So basically, I changed the folder of my search file > \n\"searchs/search.html.erb\"\nAnd the route in Route.rb :  <code>get \"search\" =&gt; \"searchs#search\"</code></p>\n\n<pre><code>     &lt;%= form_tag search_path, method: :get do %&gt;\n      &lt;%= label :user, \"Search User near : \" %&gt;\n      &lt;%= text_field_tag :city, params[:city] %&gt;\n\n      &lt;%= label :distance, \"Distance : \" %&gt;\n      &lt;%= text_field_tag :distance, params[:distance] %&gt;\n\n      &lt;%= submit_tag \"Search\" %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>The class is still the same, just renamed the def \"<em>index</em>\" to \"<em>search</em>\" : </p>\n\n<pre><code>    class SearchsController &lt; ApplicationController\n        def search\n        if params[:city].present?\n          @searchs = User.near(params[:city], params[:distance] || 10)\n        else\n          @searchs = User.all\n        end\n      end\n    end\n</code></pre>\n\n<p>and the main problem was the div at the end of the form to display the results (the precedent code was looking for a partial <em>_search.html.erb</em> and I didn't created it, so I wrote this , to display the result of the form directly. </p>\n\n<pre><code>    &lt;div&gt;\n     &lt;table&gt;\n      &lt;tr&gt;\n      &lt;th&gt;Nickname&lt;/th&gt;\n      &lt;th&gt;City&lt;/th&gt;\n      &lt;/tr&gt;\n        &lt;% @searchs.each do |search| %&gt;\n            &lt;tr&gt;\n            &lt;td&gt;&lt;%= search.nickname %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= search.city %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n    &lt;% end %&gt;\n      &lt;/table&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>I still dont know how to display the result only when I'm clicking on the \"<em>Search</em>\" button (it's just refreshing the form right now), but I got an idea with a Partial _form for the results. If someone got a solution for this , add it in the comment ;)</p>\n"}], "owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471454898, "creation_date": 1471439690, "last_edit_date": 1471442348, "question_id": 38997720, "link": "https://stackoverflow.com/questions/38997720/render-result-for-a-form-rails-gem-geocoder", "title": "Render result for a Form rails / gem geocoder", "body": "<p>I would like to render the result of my form when users are clicking on the \"Search\" button. </p>\n\n<p><br>I think I am missing something with the Model (i dont really know if i have to add something on my user model) or the Html.</p>\n\n<p><strong>I have a controller : Searchscontroller</strong></p>\n\n<pre><code>class SearchsController &lt; ApplicationController\n  def index\n    if params[:city].present?\n      @searchs = User.near(params[:city], params[:distance] || 10, order: :distance)\n    else\n      @searchs = User.all\n    end\n  end\n</code></pre>\n\n<p><strong>and a form in search.html.erb</strong></p>\n\n<pre><code>&lt;%= form_tag search_path, method: :get do %&gt;\n  &lt;%= label :user, \"Search User near : \" %&gt;\n  &lt;%= text_field_tag :city, params[:city] %&gt;\n\n  &lt;%= label :distance, \"Distance : \" %&gt;\n  &lt;%= text_field_tag :distance, params[:distance] %&gt;\n\n  &lt;%= submit_tag \"Search\" %&gt;\n&lt;% end %&gt;\n\n  #NOT SURE WITH THAT PART, I think its not working, just the %else is displayed#\n    &lt;div&gt;\n    &lt;% if @searchs.present? %&gt;\n      &lt;%= render @searchs %&gt; # it might be @users instead ? #\n    &lt;% else %&gt;\n      &lt;p&gt;Oops no user around &lt;%= params[:city] %&gt;.&lt;/p&gt;\n    &lt;% end %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>My users have been located with the gem geocoder, that part is fine, I got Lat and Longitude (and the city in DB, its working in the console User.Near('City') ), but I just would like to display a list of result , like this when I click on the form :</p>\n\n<blockquote>\n  <blockquote>\n    <p>Around London / distance 10 km  => >Search&lt;\n        <br>Result  <br>> @user 1  <br>> @user 2</p>\n  </blockquote>\n</blockquote>\n\n<p>I hope someone got the answer for me, many thanks in advance</p>\n\n<p>Route.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n devise_for :users\n resources :users, only: [:index, :show]\n root \"pages#home\"\n get \"search\" =&gt; \"pages#search\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "edited": false, "score": 1, "creation_date": 1471439637, "post_id": 38997132, "comment_id": 65346979, "body": "have you tried <code>find_by_sql</code> method? like that: <code>Post.find_by_sql [&quot;SELECT title FROM posts WHERE author = ? AND created &gt; ?&quot;, author_id, start_date]</code>. More info here: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Querying.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Querying.html</a>"}, {"owner": {"reputation": 1357, "user_id": 4370885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc5bf7a6307b29d51154924b65d6dd47?s=128&d=identicon&r=PG&f=1", "display_name": "theDrifter", "link": "https://stackoverflow.com/users/4370885/thedrifter"}, "reply_to_user": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "edited": false, "score": 0, "creation_date": 1471442193, "post_id": 38997132, "comment_id": 65348978, "body": "Great i did not know this one. Working! Thanks!"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "reply_to_user": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "edited": false, "score": 0, "creation_date": 1471443364, "post_id": 38997132, "comment_id": 65349903, "body": "@AndreyS you should put that in an answer so that others find it easily and it can be accepted"}, {"owner": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471443930, "post_id": 38997132, "comment_id": 65350405, "body": "@jaydel, sure, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "is_accepted": true, "score": 1, "last_activity_date": 1471443911, "creation_date": 1471443911, "answer_id": 38999390, "question_id": 38997132, "link": "https://stackoverflow.com/questions/38997132/activerecord-connection-adapter-return-value/38999390#38999390", "title": "ActiveRecord Connection Adapter return value", "body": "<p>Use <code>find_by_sql</code> method.</p>\n\n<p>Example: <code>Post.find_by_sql [\"SELECT title FROM posts WHERE author = ? AND created &gt; ?\", author_id, start_date]</code>.</p>\n\n<p>More info is here: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Querying.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/Querying.html</a></p>\n"}], "owner": {"reputation": 1357, "user_id": 4370885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc5bf7a6307b29d51154924b65d6dd47?s=128&d=identicon&r=PG&f=1", "display_name": "theDrifter", "link": "https://stackoverflow.com/users/4370885/thedrifter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 38999390, "answer_count": 1, "score": 0, "last_activity_date": 1471443911, "creation_date": 1471438179, "question_id": 38997132, "link": "https://stackoverflow.com/questions/38997132/activerecord-connection-adapter-return-value", "title": "ActiveRecord Connection Adapter return value", "body": "<p>I had a bit more complex sql-query which i decided to use plain <code>sql</code> rather than writing it with AR. I wrapped the sql-statement inside ActiveRecord::Base.connection.exec_query` .</p>\n\n<p>The method basically looks like that:</p>\n\n<pre><code>def sc_agent\n  return ActiveRecord::Base.connection.exec_query(\"SQL\").as_json\nend\n</code></pre>\n\n<p>The serializer <code>as_json</code> gives me a json hash with json strings. So also id's are now strings</p>\n\n<pre><code>{\"id\":\"123\",\"age\":\"99\"}\n</code></pre>\n\n<p>On standard queries where i  use AR i receive nicely \n formatted json with the correct types.</p>\n\n<p>How can i retain the correct types of all the values when using the ConnectionAdapter directly? Thanks for everything!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1471438833, "creation_date": 1471438833, "answer_id": 38997387, "question_id": 38996855, "link": "https://stackoverflow.com/questions/38996855/is-it-bad-to-group-together-like-tests-into-a-single-test/38997387#38997387", "title": "Is it bad to group together like tests into a single test?", "body": "<p>In general lumping tests together is a bad thing - skipping the setup/teardown phases in between assertions can lead to ordering issues where a previous test causes a test to fail/pass.</p>\n\n<p>However if you are simply testing that a record should not be valid and that the user should get feedback about the errors in full it does actually make sense have have multiple assertions in a single scenario. Especially since it may be significantly faster since you are not running a full request cycle for each.</p>\n\n<pre><code>Scenario: Creating a thing with invalid data\n  When I create a thing without filling in the required fields\n  Then I should see \"Invalid Name\"\n  Then I should see \"Missing Source\"\n  Then I should see \"Invalid Rate\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "is_accepted": false, "score": 3, "last_activity_date": 1471448348, "last_edit_date": 1471448348, "creation_date": 1471443770, "answer_id": 38999330, "question_id": 38996855, "link": "https://stackoverflow.com/questions/38996855/is-it-bad-to-group-together-like-tests-into-a-single-test/38999330#38999330", "title": "Is it bad to group together like tests into a single test?", "body": "<p>I also believe in isolation of tests but I think you've found a case where some deeper thought leads me to think that lumping those specific assertions together in a single test is fine. My rule of thumb tends to revolve around separation of concerns. This doesn't mean treat those as separate concerns, but rather that testing invalid feedback is a single concern. </p>\n\n<p>There are gotchas to this, of course. If you accept that separation as Law, you can find yourself putting tons of assertions in the same test and that's not good either.</p>\n\n<p>Another is the performance concern that @max mentions in his answer (which is a good one). </p>\n\n<p>Finally, you might find that not separating those tests makes it impossible to test them all together. Failure of the first test may keep any further failures from being revealed. In cucumber this is less of an issue because you're checking visual output, not performing assertions on code failures.</p>\n\n<p>For your specific example, testing invalid conditions in a test seems pretty group-able. </p>\n\n<p>Bottom line: your head is in the right place and you just need to keep in mind that there are very few hard and fast rules in the world that must NEVER be broken. </p>\n"}], "owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 38997387, "answer_count": 2, "score": 0, "last_activity_date": 1471448348, "creation_date": 1471437400, "last_edit_date": 1471438523, "question_id": 38996855, "link": "https://stackoverflow.com/questions/38996855/is-it-bad-to-group-together-like-tests-into-a-single-test", "title": "Is it bad to group together like tests into a single test?", "body": "<p>My team is using Cucumber / Ruby on Rails. We have some scenarios such as the following:</p>\n\n<pre><code>Scenario: Create a Data Set\nScenario: Update a Data Set\nScenario: Invalid Data Set - Invalid Name\nScenario: Invalid Data Set - Missing Source\nScenario: Invalid Data Set - Invalid Rate\n...\n</code></pre>\n\n<p>A co-worker is asking that I group together all of the invalid tests into a single scenario. His reasoning is because when we sit with our Quality team, we have to read all of the scenarios aloud, and it would save time by only reading one instead of many. </p>\n\n<pre><code>Scenario: Create a Data Set\nScenario: Update a Data Set\nScenario: Invalid Data Set\n  # Steps for invalid name\n  # Steps for missing source\n  # Steps for invalid rate\n</code></pre>\n\n<p>I don't think I can agree with this because I feel that tests should be completely isolated. If I want to add a new invalid scenario, then I would have to run more code than I need to if they were grouped together. I wanted to know if anyone had a more official answer.</p>\n\n<p>Is it bad to group together like tests into a single test?</p>\n"}, {"tags": ["json", "ruby", "serialization"], "comments": [{"owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "edited": false, "score": 0, "creation_date": 1471518778, "post_id": 38996742, "comment_id": 65383749, "body": "All works fine now, problem was due to the sub object which didn&#39;t have ids"}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1474980357, "creation_date": 1474980357, "answer_id": 39725084, "question_id": 38996742, "link": "https://stackoverflow.com/questions/38996742/error-with-jsonapi-serializers-when-trying-to-serialize-grand-children-object/39725084#39725084", "title": "Error with jsonapi-serializers when trying to serialize grand children object", "body": "<p>The problem is that the include used inside the options must follow the format defined by <strong>format_name</strong> </p>\n\n<pre><code>def format_name(attribute_name)\nattribute_name.to_s.demodulize.camelize(:lower)\nend\n</code></pre>\n\n<p>So for the serialisation to work, we change naming format to the following:</p>\n\n<p>inside MainObjectSerializer</p>\n\n<pre><code>has_many: child_objects\n</code></pre>\n\n<p>and inside ChildObjectSerializer:</p>\n\n<pre><code>has_many: grand_child_objects\n</code></pre>\n\n<p>And the option should use <em>lower camel case</em> defined by <strong>format_name</strong></p>\n\n<pre><code>options = {include: ['childObjects','childObjects.grandChildObjects']}\n JSONAPI::Serializer.serialize(mainobject, options)\n</code></pre>\n\n<p>So that we can obtain:</p>\n\n<pre><code>...\n\"included\": [\n{\n\"type\": \"childObject\",\n\"id\": \"1234\",\n   \"relationships\": {\n    \"grandChildObjects\": {\n      \"data\": [         \n      {\n        \"type\": \"grandChildObject\",\n        \"id\": \"12\"\n      }\n    ]\n  }\n }\n},\n{\n  \"type\": \"grandChildObject\",\n  \"id\": \"12\",\n...\n</code></pre>\n\n<p>Note that type is also using lower camel case and it is defined in the type method of the serializers:</p>\n\n<pre><code>def type\nobject.class.name.demodulize.camelize(:lower)\nend\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474980357, "creation_date": 1471437056, "question_id": 38996742, "link": "https://stackoverflow.com/questions/38996742/error-with-jsonapi-serializers-when-trying-to-serialize-grand-children-object", "title": "Error with jsonapi-serializers when trying to serialize grand children object", "body": "<p>I have a main object 'mainobject'</p>\n\n<p>inside MainObjectSerializer</p>\n\n<p><code>has_many: childObjects</code></p>\n\n<p>and inside ChildObjectSerializer:</p>\n\n<p><code>has_many: grandChildObjects</code> </p>\n\n<p>but when i am trying to serialize:</p>\n\n<p><code>options = {include: ['childObjects','childObjects.grandChildObjects']}\n JSONAPI::Serializer.serialize(mainobject, options)</code></p>\n\n<p>I got errors:</p>\n\n<p><code>gems/jsonapi-serializers-0.14.0/lib/jsonapi-serializers/serializer.rb:163:in []: no implicit conversion of Symbol into Integer (TypeError)\n</code></p>\n\n<p>Works well doing the serialization without the grandchild objects</p>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby", "mysql-workbench"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1471439356, "post_id": 38996734, "comment_id": 65346739, "body": "Why would you not add this as a migration? Migrations make it easier to understand how and when the database structure changed as well as keeping all environments in sync. Now to answer your question <code>rake db:schema:dump</code> will update the db/schema.rb file to reflect the schema of the database by interrogating the database directly so this should add the columns to your schema file but no this will not automatically happen."}, {"owner": {"reputation": 95, "user_id": 3166642, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/971dd3066d2ec6e47910271f2826a5bd?s=128&d=identicon&r=PG&f=1", "display_name": "user3166642", "link": "https://stackoverflow.com/users/3166642/user3166642"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471455683, "post_id": 38996734, "comment_id": 65357763, "body": "Ok,thank you very much actually I am a newbie in ruby on rails.Can you guide me on which machine I&#39;ll run it.The one on my desktop or the machine where database is deployed.According to me it should be database machine but then how&#39;ll changes will reflect back in my developer desktop."}, {"owner": {"reputation": 95, "user_id": 3166642, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/971dd3066d2ec6e47910271f2826a5bd?s=128&d=identicon&r=PG&f=1", "display_name": "user3166642", "link": "https://stackoverflow.com/users/3166642/user3166642"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471455746, "post_id": 38996734, "comment_id": 65357800, "body": "Also a little more insight in the command will really be helpful.Just looking at the command gives an impression as if it is dumping something."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471458226, "post_id": 38996734, "comment_id": 65359163, "body": "you would run this in the root directory of the rails application. It is dumping something it is dumping the database schema as the database see it into the db/schema.rb file so that rails see the database the same way. <a href=\"http://jacopretorius.net/2014/02/all-rails-db-rake-tasks-and-what-they-do.html\" rel=\"nofollow noreferrer\">Insight into rake db commands in Rails</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "is_accepted": false, "score": 0, "last_activity_date": 1476460209, "creation_date": 1476460209, "answer_id": 40047286, "question_id": 38996734, "link": "https://stackoverflow.com/questions/38996734/is-it-necessary-to-run-migrations-for-schema-change-done-in-mysqlworkbench-in-ru/40047286#40047286", "title": "Is it necessary to run migrations for schema change done in MySqlWorkBench in ruby on rails?", "body": "<p>First I think its important to understand what the purpose of active record migrations are. The point of migrations is to ensure that any distribution of the source code of your application will be able to consistently recreate your database structure. It is never a good idea to alter the structure of your database outside of a migration (barring some extreme edge case), its ok to alter the state, but not the structure. The best thing you can do is to reverse whatever changes you made in MySQL Workbench and create a migrations(s) that are representative of those changes.</p>\n"}], "owner": {"reputation": 95, "user_id": 3166642, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/971dd3066d2ec6e47910271f2826a5bd?s=128&d=identicon&r=PG&f=1", "display_name": "user3166642", "link": "https://stackoverflow.com/users/3166642/user3166642"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476460853, "creation_date": 1471437044, "last_edit_date": 1476460853, "question_id": 38996734, "link": "https://stackoverflow.com/questions/38996734/is-it-necessary-to-run-migrations-for-schema-change-done-in-mysqlworkbench-in-ru", "title": "Is it necessary to run migrations for schema change done in MySqlWorkBench in ruby on rails?", "body": "<p>I have a rails application which is having a bunch of tables in its schema.\nThe database is stored on a different machine. And I can handle all the queries like update/search from MySQLWorkBench</p>\n\n<p>I updated one of the table by adding two columns in it from MySQLWorkBench <strong>not by running any rails command.</strong></p>\n\n<p>So, is there anything else that I need to do so that my schema.rb is changed or it'll change automatically?</p>\n\n<p>In case I am supposed to run a command to let the changes reflect in schema.rb please guide me at what directory I'll run it and on which machine (My developer desktop or the machine on which database is stored).</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 300, "user_id": 3473435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/REx46.jpg?s=128&g=1", "display_name": "abhi110892", "link": "https://stackoverflow.com/users/3473435/abhi110892"}, "edited": false, "score": 0, "creation_date": 1471436082, "post_id": 38996238, "comment_id": 65344237, "body": "use partials <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1471436276, "post_id": 38996373, "comment_id": 65344374, "body": "Yes, but @posts variable will be changed on different pages, and I want to avoid copy pasting code for 5 or 6 time. And if I want to change something on one page, it must be changed on every page. So what you recommend will not work for me."}, {"owner": {"reputation": 3, "user_id": 6324489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180fe505bcd3d2fe529202723d6a99d4?s=128&d=identicon&r=PG&f=1", "display_name": "Max Rostov", "link": "https://stackoverflow.com/users/6324489/max-rostov"}, "reply_to_user": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1471436888, "post_id": 38996373, "comment_id": 65344787, "body": "You could try to do smth like this:  <code>def method_name(params); @posts = params; render &#39;html_file&#39;; end</code>"}], "tags": [], "owner": {"reputation": 3, "user_id": 6324489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180fe505bcd3d2fe529202723d6a99d4?s=128&d=identicon&r=PG&f=1", "display_name": "Max Rostov", "link": "https://stackoverflow.com/users/6324489/max-rostov"}, "is_accepted": false, "score": 0, "last_activity_date": 1471436067, "creation_date": 1471436067, "answer_id": 38996373, "question_id": 38996238, "link": "https://stackoverflow.com/questions/38996238/import-html-to-rails-method-in-helper-rb/38996373#38996373", "title": "Import html to rails method (in helper.rb)", "body": "<p>You can move this code to some html. And when you want to use it, you just call render method.</p>\n\n<pre><code>&lt;%= render 'html_file' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471436067, "creation_date": 1471435717, "question_id": 38996238, "link": "https://stackoverflow.com/questions/38996238/import-html-to-rails-method-in-helper-rb", "title": "Import html to rails method (in helper.rb)", "body": "<p>I need piece of code for couple of times, and to follow DRY method (don't repeat yourself) i want to escape using this piece and retyping it for 5 times or more. So I want to define method what will contain both ruby and html, and ruby in html and js to, code. But I have problems with realization.</p>\n\n<p>My html.erb look like this:</p>\n\n<pre><code>&lt;% div_count = 1 %&gt;\n&lt;div&gt;\n  &lt;% for post in @posts %&gt;\n    &lt;div class=\"post-on-main-page-&lt;%= div_count %&gt;\"\n         id=\"js-count-&lt;%= div_count_for_js %&gt;\"&gt;\n      &lt;script&gt;\n        $(\"#js-count-&lt;%= div_count_for_js %&gt;\").click(function(){\n          window.location.href = \"&lt;%= post_url(post) %&gt;\";\n        });\n      &lt;/script&gt;\n    &lt;%= image_tag(post.picture.url) %&gt;\n    &lt;span&gt;&lt;h5&gt;&lt;%= post.theme %&gt;&lt;/h5&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% div_count += 1 %&gt;\n&lt;% if div_count == 4 %&gt;\n  &lt;% div_count = 1 %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And I want create method, I think in application_helper.rb will do with this piece of code. What will look something like that:</p>\n\n<pre><code>def method_name(parameter)\n&lt;% div_count = 1 %&gt;\n    &lt;div&gt;\n      &lt;% for post in parameter %&gt;\n        &lt;div class=\"post-on-main-page-&lt;%= div_count %&gt;\"\n             id=\"js-count-&lt;%= div_count_for_js %&gt;\"&gt;\n          &lt;script&gt;\n            $(\"#js-count-&lt;%= div_count_for_js %&gt;\").click(function(){\n              window.location.href = \"&lt;%= post_url(post) %&gt;\";\n            });\n          &lt;/script&gt;\n          &lt;%= image_tag(post.picture.url) %&gt;\n          &lt;span&gt;&lt;h5&gt;&lt;%= post.theme %&gt;&lt;/h5&gt;&lt;/span&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% div_count += 1 %&gt;\n    &lt;% if div_count == 4 %&gt;\n      &lt;% div_count = 1 %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\nend\n</code></pre>\n\n<p>The result what I want for html.erb</p>\n\n<pre><code>&lt;%= method_name(@posts)%&gt;\n</code></pre>\n\n<p>How can I make this to work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "models", "relationships"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 1, "creation_date": 1471435436, "post_id": 38995955, "comment_id": 65343805, "body": "So it can belong to one of the other models?  Or belong to many of them at once?"}, {"owner": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1471435617, "post_id": 38995955, "comment_id": 65343920, "body": "The idea is that it would belong to one, but that depending on which one, it could belong to many. There is a nested relationship between <b>Piece &gt;&gt; Section &gt;&gt; Subsection &gt;&gt; Subsubsection</b> so if i wanted to create a new <b>Link</b> in a <b>Subsection</b>, it would belong to <b>Subsection</b>, but also to <b>Section</b> and <b>Piece</b> because of the nested relationship."}, {"owner": {"reputation": 300, "user_id": 3473435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/REx46.jpg?s=128&g=1", "display_name": "abhi110892", "link": "https://stackoverflow.com/users/3473435/abhi110892"}, "edited": false, "score": 0, "creation_date": 1471435910, "post_id": 38995955, "comment_id": 65344127, "body": "You can use has_many through relationship.Check this link <a href=\"http://stackoverflow.com/questions/31358679/is-a-has-many-through-relationship-possible-with-4-models-in-rails\" title=\"is a has many through relationship possible with 4 models in rails\">stackoverflow.com/questions/31358679/&hellip;</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1471436001, "post_id": 38995955, "comment_id": 65344189, "body": "@Kingdavidek could you give some real-world examples for piece, section, subsection, subsubsection and links? I don&#39;t really understand how they fit together."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "edited": false, "score": 0, "creation_date": 1471440469, "post_id": 38996318, "comment_id": 65347680, "body": "Thanks for your help, I suppose it would be too hard for the nested relationship thing to have it linked to a subsection for example, and then just find the parent id&#39;s all the way up the tree?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "edited": false, "score": 0, "creation_date": 1471882416, "post_id": 38996318, "comment_id": 65516319, "body": "@Kingdavidek if you look at the ruby gems for tree structures like closure tree or ancestry many of them have this functionality input"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": false, "score": 1, "last_activity_date": 1471435942, "creation_date": 1471435942, "answer_id": 38996318, "question_id": 38995955, "link": "https://stackoverflow.com/questions/38995955/linking-many-existing-models-to-one-new-one-ruby-on-rails/38996318#38996318", "title": "Linking many existing models to one new one. Ruby on Rails", "body": "<p>Ok, it sounds like essentially you want a <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow\">polymorphic association</a></p>\n\n<pre><code>class Link\n  belongs_to :linkable, polymorphic: true\nend\n\nclass Piece\n  has_many :links, as: :linkable\nend\n</code></pre>\n\n<p>Link would need <code>linkable_id</code> integer column and <code>linkable_type</code> string column.  You can then use it in the same way as an ordinary <code>has_many</code> to <code>belongs_to</code> association</p>\n\n<blockquote>\n  <p>if i wanted to create a new Link in a Subsection, it would belong to\n  Subsection, but also to Section and Piece because of the nested\n  relationship</p>\n</blockquote>\n\n<p>This bit rails can't help with, you'd need to write your own method to find all the links in the chain of items.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "edited": false, "score": 0, "creation_date": 1471440372, "post_id": 38996771, "comment_id": 65347606, "body": "Thanks so much for your answer this seems like exactly what I need, although I don&#39;t get it all completely just yet I&#39;ll look up the jargon etc. to try and understand it. For the self joining relationship thing, are you referring to the nested models Piece&gt;&gt; Section&gt;&gt; Subsection etc. Would your way make it such that you could essentially go section&gt;&gt;section&gt;&gt; section&gt;&gt; ad infinitum?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "edited": false, "score": 0, "creation_date": 1471444204, "post_id": 38996771, "comment_id": 65350654, "body": "&quot;Would your way make it such that you could essentially go section&gt;&gt;section&gt;&gt; section&gt;&gt; ad infinitum?&quot; - yes exactly. I would really recommend reading through the rails <a href=\"http://guides.rubyonrails.org/association_basics.html#self-joins\" rel=\"nofollow noreferrer\">guides article on associations</a> top to bottom as the is pretty advanced stuff."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1471437955, "last_edit_date": 1471437955, "creation_date": 1471437140, "answer_id": 38996771, "question_id": 38995955, "link": "https://stackoverflow.com/questions/38995955/linking-many-existing-models-to-one-new-one-ruby-on-rails/38996771#38996771", "title": "Linking many existing models to one new one. Ruby on Rails", "body": "<p>This is a pretty good use case for <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow\">polymorphic</a> associations. For simplicity lets start out with a one to many relationship:</p>\n\n<pre><code>class Link &lt; ActiveRecord::Base\n  belongs_to :linkable, polymorphic: true\nend\n\nclass Piece &lt; ActiveRecord::Base\n  has_many :links, as: :linkable\nend\n\nclass Section &lt; ActiveRecord::Base\n  has_many :links, as: :linkable\nend\n</code></pre>\n\n<p>Here the <code>links</code> table will have <code>linkable_id</code> (int) and <code>linkable_type</code> (string) columns. One important thing to take note of here is that <code>linkable_id</code> is not a true foreign key from the RBDMS point of view. Rather ActiveRecord resolves which table the relation points to when it loads the relation.</p>\n\n<p>If we want to cut the duplication we can create a module which contains the desired behavior. Using <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow\">ActiveSupport::Concern</a> cuts a lot of the boilerplate code involved in creating such a module.</p>\n\n<pre><code>class Link &lt; ActiveRecord::Base\n  belongs_to :linkable, polymorphic: true\nend\n\n# app/models/concerns/linkable.rb\nmodule Linkable\n  extend ActiveSupport::Concern\n\n  included do\n    has_many :links, as: :linkable\n  end\nend\n\nclass Piece &lt; ActiveRecord::Base\n  include Linkable\nend\n\nclass Section &lt; ActiveRecord::Base\n  include Linkable\nend\n</code></pre>\n\n<p>So how would we make a polymorpic many to many relation?</p>\n\n<pre><code>class Link &lt; ActiveRecord::Base\n  has_many :linkings\nend\n\n# this is the join model which contains the associations between\n# Links and the \"linkable\" models \nclass Linking &lt; ActiveRecord::Base\n  belongs_to :link\n  belongs_to :linkable, polymorphic: true\nend\n\n# app/models/concerns/linkable.rb\nmodule Linkable\n  extend ActiveSupport::Concern\n\n  included do\n    has_many :links, through: :linkings, as: :linkable\n  end\nend\n\nclass Piece &lt; ActiveRecord::Base\n  include Linkable\nend\n\nclass Section &lt; ActiveRecord::Base\n  include Linkable\nend\n</code></pre>\n\n<p>On a side note - a better way to build a hierarchy between sections would be to use a single Section model and <a href=\"http://guides.rubyonrails.org/association_basics.html#self-joins\" rel=\"nofollow\">give it a self joining relationship</a>. </p>\n\n<pre><code>class Section &lt; ActiveRecord::Base\n  belongs_to :parent, class_name: 'Section'\n  has_many :children, class_name: 'Section', \n                      foreign_key: 'parent_id'\nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 38996771, "answer_count": 2, "score": 0, "last_activity_date": 1471437955, "creation_date": 1471434938, "question_id": 38995955, "link": "https://stackoverflow.com/questions/38995955/linking-many-existing-models-to-one-new-one-ruby-on-rails", "title": "Linking many existing models to one new one. Ruby on Rails", "body": "<p>So I am making an app that reviews books, articles and the like. </p>\n\n<p>I have created the backbone of the app by creating models, views, controllers etc for Piece(the book or article), Section(self explanatory), Subsection, and Subsubsection. </p>\n\n<p>I want to add a new model into the mix, a \"Links\" model (which will just be a link to another source or website). My issue is that I don't know how to make ALL of my previously stated models have \"Links\". I want each of The above models to have access and CRUD capabilities to their \"Links\", but so far all i have read about is has_many or has_and_belongs_to_many. </p>\n\n<p>As far as I understand, those kinds of relations only relate ONE model to ONE other model, even if Piece might have many Sections, it only relates these two models.</p>\n\n<p>I guess the Links model would have to have an obligatory piece_id, but then optional id's such as: section_id, subsection_id depending on where the link was. So if in Chapter 3 of my first book i want to add a link, it would have an obligatory piece_id=1 and then a section_id=3, but then no subsection_id or subsubsection_id.</p>\n\n<p>So how do I go about creating a model such that it belongs to several other models? Or is this even possible? </p>\n\n<p><a href=\"https://github.com/kingdavidek/StuddyBuddy\" rel=\"nofollow\">https://github.com/kingdavidek/StuddyBuddy</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 0, "creation_date": 1471506459, "post_id": 38995271, "comment_id": 65376233, "body": "Why you want to use ILIKE on time field and why not just <code>time =?</code>"}], "answers": [{"tags": [], "owner": {"reputation": 484, "user_id": 5949678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yn9j3.jpg?s=128&g=1", "display_name": "Divya Sharma", "link": "https://stackoverflow.com/users/5949678/divya-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1471505099, "creation_date": 1471505099, "answer_id": 39012215, "question_id": 38995271, "link": "https://stackoverflow.com/questions/38995271/time-without-timezone-error-in-rails/39012215#39012215", "title": "Time without timezone error in Rails", "body": "<p>Well, the error is occurring because you need to explicitly convert the timestamp to a string before using a string operation on it. eg: </p>\n\n<pre><code>select * from course_statuses where updated_at ILIKE '%13:24:51%'\n</code></pre>\n\n<p>Above one will give me error but after typecasting updated_at to updated_at::text no error will come:</p>\n\n<pre><code>select * from course_statuses where updated_at::text ILIKE '%13:24:51%'\n</code></pre>\n\n<p>try it on pgadmin3 </p>\n"}], "owner": {"reputation": 139, "user_id": 6597822, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d011de759593ab34e2c68882396e43b9?s=128&d=identicon&r=PG&f=1", "display_name": "admitme_sam", "link": "https://stackoverflow.com/users/6597822/admitme-sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471505099, "creation_date": 1471432954, "question_id": 38995271, "link": "https://stackoverflow.com/questions/38995271/time-without-timezone-error-in-rails", "title": "Time without timezone error in Rails", "body": "<p>So i've got an error with my rake task, I'm trying to simplify the rake task. This is the row i've getting stuck on</p>\n\n<pre><code>  events = Event.where('eventname ILIKE ? AND time ILIKE ? AND date = ?', \"%#{row.product_name}%\", \"%#{row.delivery_time}%\", \"%#{row.valid_from}%\")\n</code></pre>\n\n<p>(if i remove time and delivery time it runs fine)</p>\n\n<p>However if i run it with this it gets stuck on this error:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::UndefinedFunction: ERROR:  operator does not exist: time without time zone ~~* unknown\nLINE 1: ...LIKE '%Portsmouth Guildhall Membership%' AND time ILIKE '%23...\n                                                             ^\nHINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.\n: SELECT \"events\".* FROM \"events\" WHERE (eventname ILIKE '%Portsmouth Guildhall Membership%' AND time ILIKE '%23:00:00%' AND date = '%2016-12-31%')\n</code></pre>\n\n<p>Any ideas would be great, Just for further clarification, The time is coming out of the events table as this:</p>\n\n<pre><code>18:00:00\n</code></pre>\n\n<p>And the table type is a time field</p>\n\n<p>Sam</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471439689, "post_id": 38995101, "comment_id": 65347027, "body": "You are just returning a String that represents the path to the file. You need to actually read out that file eg. <code>File.open(file_path,&amp;:read)</code> as well as set the appropriate headers for the MIME type and disposition. Read the post you are referencing and it will solve this for you.."}, {"owner": {"reputation": 1433, "user_id": 703997, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c4bda24c22a7e56894feb140e6b79c77?s=128&d=identicon&r=PG&f=1", "display_name": "Shruthi R", "link": "https://stackoverflow.com/users/703997/shruthi-r"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1471502728, "post_id": 38995101, "comment_id": 65374308, "body": "As per the reference, file is not generating. How to generate .pdf file?"}], "owner": {"reputation": 1433, "user_id": 703997, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c4bda24c22a7e56894feb140e6b79c77?s=128&d=identicon&r=PG&f=1", "display_name": "Shruthi R", "link": "https://stackoverflow.com/users/703997/shruthi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 851, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1471432533, "creation_date": 1471432533, "last_edit_date": 1495542782, "question_id": 38995101, "link": "https://stackoverflow.com/questions/38995101/rails-how-to-download-pdf-file-using-grape-api", "title": "Rails - How to download .pdf file using Grape API", "body": "<p>In rails 4, I am using <code>grape</code> gem for mobile app features. In mobile app, I need to provide download <code>.pdf</code> file option. I have referred this <a href=\"https://stackoverflow.com/questions/16641388/how-to-allow-binary-file-download-using-grape-api#answer-19898620\">How to allow Binary File download using GRAPE API</a> but file is not generating here.</p>\n\n<p>Other than mobile app(in web side) I have downloading a file using,</p>\n\n<pre><code>file_path = \"#{Rails.root}/public/downloads/#{@user.id}_guide.pdf\"\npdf = WickedPdf.new.pdf_from_string(render_to_string('public/guide/template', :layout=&gt; false))\nFile.open(file_path, 'wb') do |file|\n  file &lt;&lt; pdf\nend\nreturn file_path\n</code></pre>\n\n<p>Please help me to write an API which generates and downloads a <code>.pdf</code> file</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "elasticsearch"], "comments": [{"owner": {"reputation": 184, "user_id": 5397464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1056736654337562/picture?type=large", "display_name": "Sebastian Plasschaert", "link": "https://stackoverflow.com/users/5397464/sebastian-plasschaert"}, "edited": false, "score": 0, "creation_date": 1488003701, "post_id": 38995046, "comment_id": 72048879, "body": "Were you able to solve this? I&#39;m trying to do the same (using habtm associations as aggregations), but I&#39;m completely lost."}, {"owner": {"reputation": 255, "user_id": 4833080, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/396ff0ca536f8ccb84116a5e99887214?s=128&d=identicon&r=PG&f=1", "display_name": "BillyBib", "link": "https://stackoverflow.com/users/4833080/billybib"}, "reply_to_user": {"reputation": 184, "user_id": 5397464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1056736654337562/picture?type=large", "display_name": "Sebastian Plasschaert", "link": "https://stackoverflow.com/users/5397464/sebastian-plasschaert"}, "edited": false, "score": 0, "creation_date": 1488207760, "post_id": 38995046, "comment_id": 72117414, "body": "Yeah I did. I&#39;ve added the code that worked for me as an answer. Hope it helps you"}], "answers": [{"tags": [], "owner": {"reputation": 255, "user_id": 4833080, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/396ff0ca536f8ccb84116a5e99887214?s=128&d=identicon&r=PG&f=1", "display_name": "BillyBib", "link": "https://stackoverflow.com/users/4833080/billybib"}, "is_accepted": true, "score": 3, "last_activity_date": 1488207736, "creation_date": 1488207736, "answer_id": 42488974, "question_id": 38995046, "link": "https://stackoverflow.com/questions/38995046/searchkick-aggregations-for-has-and-belongs-to-many/42488974#42488974", "title": "Searchkick aggregations for has_and_belongs_to_many", "body": "<p>This is the code that ended up working for me:</p>\n\n<p><code>event.rb:</code></p>\n\n<pre><code>def index\n    query = params[:j].presence || \"*\"\n    conditions = {start_date: {\"gte\": \"now/d\"}}\n    conditions[:sector_name] = params[:sector_name] if params[:sector_name].present?\n    conditions[:service_name] = params[:service_name] if params[:service_name].present?\n    conditions[:start_date] = params[:start_date] if params[:start_date].present?\n    @events = Event.search query, where: conditions, aggs: [:sector_name, :service_name], order: {start_date: {order: \"asc\", unmapped_type: \"long\"}}, page: params[:page], per_page: 10\nend\n</code></pre>\n\n<p><code>events_controller.rb:</code></p>\n\n<pre><code>def search_data\n  {\n    title: title,\n    location: location,\n    description: description,\n    start_date: start_date,\n    sector_name: sectors.map(&amp;:name),\n    service_name: services.map(&amp;:name)\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 4833080, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/396ff0ca536f8ccb84116a5e99887214?s=128&d=identicon&r=PG&f=1", "display_name": "BillyBib", "link": "https://stackoverflow.com/users/4833080/billybib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 1, "accepted_answer_id": 42488974, "answer_count": 1, "score": 0, "last_activity_date": 1488207736, "creation_date": 1471432399, "question_id": 38995046, "link": "https://stackoverflow.com/questions/38995046/searchkick-aggregations-for-has-and-belongs-to-many", "title": "Searchkick aggregations for has_and_belongs_to_many", "body": "<p>I have a Rails 5 app and I'm trying to do an aggregations search for a <code>has_and_belongs_to_many</code> association.</p>\n\n<p>Here is the code that I have so far:</p>\n\n<p>event.rb:</p>\n\n<pre><code>class Event &lt; ApplicationRecord\n  searchkick text_start: [:title]\n\n  has_and_belongs_to_many :services\n  has_and_belongs_to_many :sectors\n\n  def search_data\n    atributes.merge(\n      title: title,\n      description: description,\n      sector_name: sectors.map(&amp;:name),\n      service_name: services.map(&amp;:name)\n    )\n  end\n\nend\n</code></pre>\n\n<p>events_controller.rb:</p>\n\n<pre><code>def index\n  query = params[:j].presence || \"*\"\n  conditions = {}\n  conditions[:sector] = params[:sector] if params[:sector].present?\n  conditions[:service] = params[:service] if params[:service].present?\n  conditions[:date] = params[:date] if params[:date].present?\n  @events = Event.search query, where: conditions, aggs: [:sector, :service, :date], order: {created_at: {order: \"desc\"}}, page: params[:page], per_page: 10\nend\n</code></pre>\n\n<p>When I call <code>Event.reindex</code> in the console I was expecting to to show that the sectors and services had been indexed but it doesn't work.</p>\n\n<p>To be honest I'm getting quite lost and going round in circles so any help would be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "edited": false, "score": 0, "creation_date": 1476539116, "post_id": 38994796, "comment_id": 67393719, "body": "I would have to see the actual specs to get a better idea, but depending on how your specs are grouped what you could do is just reassign the product on the license at the beginning of each test so you only need to have one user and one license."}, {"owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "reply_to_user": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "edited": false, "score": 0, "creation_date": 1476540577, "post_id": 38994796, "comment_id": 67394144, "body": "The specs are all there in the question, what else do you need?"}, {"owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "edited": false, "score": 0, "creation_date": 1476540686, "post_id": 38994796, "comment_id": 67394175, "body": "I was referring to the segments of your specs that have your expect statements."}], "owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1472568590, "creation_date": 1471431705, "last_edit_date": 1472568590, "question_id": 38994796, "link": "https://stackoverflow.com/questions/38994796/removing-duplication-in-rspec-and-factory-girl", "title": "Removing duplication in RSpec and Factory Girl", "body": "<p>I am learning to use <strong>RSpec 3.4</strong> for testing, and <strong>Factory Girl 4.7</strong> for fixture replacement.</p>\n\n<p>There is a lot of duplication in my code and I don't really know how to make it cleaner.</p>\n\n<p>Here is a code example:</p>\n\n<p><strong>user_licence_factory.rb</strong></p>\n\n<pre><code>factory :user_licence do\n  email 'user@email.com'\n\n  trait :standard do\n    product_id 1\n    licence_key '12345'\n  end\nend\n</code></pre>\n\n<p><strong>product_factory.rb</strong></p>\n\n<pre><code>factory :product do\n  trait :primary_product do\n    id 1\n    name 'Primary Product'\n  end\nend\n</code></pre>\n\n<p><strong>site_licence_factory.rb</strong></p>\n\n<pre><code>factory :site_licence do\n  email 'user@email.com'\n\n  trait :primary_product\n    product_id 1\n    uuid 'xxx'\n  end\nend\n</code></pre>\n\n<p><strong>api_controller_spec.rb</strong></p>\n\n<pre><code>let(:user) { FactoryGirl.create(:user) }\nlet!(:main_product) { FactoryGirl.create(:product, :primary_product) }\nlet!(:licence) do\n  FactoryGirl.create(:user_licence, :standard, email: user.email)\nend\nlet!(:linked_licence) { FactoryGirl.create(:site_licence, :primary_product, email: user.email) }\n\nit 'validates the licence key'\n</code></pre>\n\n<p>This is a simplified version, becase I have multiple products, and licence type, and then products tied to the licence.</p>\n\n<p>When I need to test the API, I need to create the user, a product that belongs to a licence, and a licence for that user that belongs to that product.\nEach user can have many licences and each licence belongs to one unique product.</p>\n\n<p>My desired workflow would be, create a user and create a licence for the user. By doing that only one product would be created, even if I create 10 licences.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["css", "ruby"], "comments": [{"owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "edited": false, "score": 0, "creation_date": 1471430928, "post_id": 38994430, "comment_id": 65340785, "body": "You are closing the style tag after the head tag. It seems to be the issue."}], "answers": [{"tags": [], "owner": {"reputation": 754, "user_id": 5930657, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GoG06.png?s=128&g=1", "display_name": "fernando", "link": "https://stackoverflow.com/users/5930657/fernando"}, "is_accepted": false, "score": 2, "last_activity_date": 1471431114, "creation_date": 1471431114, "answer_id": 38994611, "question_id": 38994430, "link": "https://stackoverflow.com/questions/38994430/css-issues-in-ror/38994611#38994611", "title": "CSS issues in ROR", "body": "<p>you should use this structure and make sure that you are closing tags in correct order:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n\n    &lt;html&gt;\n\n    &lt;head&gt;\n      &lt;title&gt;Page Title&lt;/title&gt;\n&lt;style&gt;\n&lt;/style&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n    The content of the document......\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 3712592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2166fa85943d66de184ebe9f3519d107?s=128&d=identicon&r=PG&f=1", "display_name": "Kwaghray", "link": "https://stackoverflow.com/users/3712592/kwaghray"}, "is_accepted": false, "score": 0, "last_activity_date": 1496389899, "creation_date": 1496389899, "answer_id": 44323582, "question_id": 38994430, "link": "https://stackoverflow.com/questions/38994430/css-issues-in-ror/44323582#44323582", "title": "CSS issues in ROR", "body": "<p>You can try this, may be it will work</p>\n\n<pre><code>&lt;h1 style=\"text-align:center;\"&gt;Alpha-Blog&lt;/h1&gt;\n\n&lt;head&gt;\n\n  &lt;style&gt;\n    .img-class{\n        display: block;\n        margin-left: 200px;\n        margin-right: 200px;\n    }\n  &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;%= link_to image_tag(''), class: \"img-class\" %&gt;\n\n&lt;%= link_to \"About\", about_path %&gt;\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5166241, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153163491228978/picture?type=large", "display_name": "Javier Ng", "link": "https://stackoverflow.com/users/5166241/javier-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1496389899, "creation_date": 1471430643, "question_id": 38994430, "link": "https://stackoverflow.com/questions/38994430/css-issues-in-ror", "title": "CSS issues in ROR", "body": "<p>I'm learning an online ROR course and I encountered some problems with the CSS. I am not sure how CSS formatting works in ruby together with CSS. Am I doing it correctly?</p>\n\n<p><a href=\"https://i.stack.imgur.com/wDWzu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wDWzu.png\" alt=\"Code\"></a></p>\n\n<p>However, when I run my app, this screen appears. \n<a href=\"https://i.stack.imgur.com/pz7A3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pz7A3.png\" alt=\"Website view\"></a></p>\n\n<p>Did I make an error somewhere? Or is this the wrong way to type my CSS in rails?</p>\n"}, {"tags": ["ruby", "heroku", "amazon-s3", "heroku-postgres"], "answers": [{"tags": [], "owner": {"reputation": 2133, "user_id": 5473450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7mHKn.png?s=128&g=1", "display_name": "RangerRanger", "link": "https://stackoverflow.com/users/5473450/rangerranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1539537211, "creation_date": 1539537211, "answer_id": 52805128, "question_id": 38994394, "link": "https://stackoverflow.com/questions/38994394/access-pgbackups-from-heroku-scheduler/52805128#52805128", "title": "Access pg:backups from Heroku Scheduler", "body": "<p>A bit late, answering for those who have this question in the future.</p>\n\n<p>There's nothing built into the Heroku platform that allows direct, automatic export of your Postgres backups to off-platform storage. There is a fairly straightforward way to manage this without too much effort.</p>\n\n<p>Imagine that the application which has the database in question is named <code>foo</code> and you have a scheduled daily backup on that database. Periodically, you'd like to export the backup to S3 as described in the question. First, create a dummy app that will function similar to a service account. We'll call it <code>bar</code> for now.</p>\n\n<p>Now, make sure to include the <a href=\"https://github.com/heroku/heroku-buildpack-cli\" rel=\"nofollow noreferrer\">Heroku CLI buildpack</a> with this application and follow the setup instructions. This way you can authorize and access the CLI directly from <code>bar</code>'s application code. Now you can add the <a href=\"https://devcenter.heroku.com/articles/scheduler\" rel=\"nofollow noreferrer\">Heroku Scheduler</a> add-on to <code>bar</code> and write some application code (like a <code>rake</code> task, since we're talking ruby) to complete the download and backup. Once you schedule that task to run at your preferred interval, you've got an app that can archive Postgres backups for you. </p>\n"}], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1539537211, "creation_date": 1471430542, "question_id": 38994394, "link": "https://stackoverflow.com/questions/38994394/access-pgbackups-from-heroku-scheduler", "title": "Access pg:backups from Heroku Scheduler", "body": "<p>I want to send my last heroku postgres backup to S3 to have it stored outside the heroku infrastructure, just in case I click 'delete' on wrong DB.</p>\n\n<p>To achieve this I need an URL to the backup. I tried to run <code>heroku pg:backups public-url -q</code>, but it does not work on one-off dynos (I have tried on <code>heroku run bash</code> dyno). Whe  It seems that heroku toolbelt is not available on dynos. </p>\n\n<p>I thought I could use the <a href=\"https://github.com/heroku/platform-api\" rel=\"noreferrer\">platform-api gem</a>, but it seems not to support pg:backups.</p>\n\n<p>Do you know how I could get the pg backups data on heroku scheduler? Or maybe you have a better method of sending DB backups to S3?</p>\n"}, {"tags": ["python", "ruby"], "comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 6, "creation_date": 1471430302, "post_id": 38994265, "comment_id": 65340376, "body": "Have you tried anything yourself?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3260316"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1471430540, "post_id": 38994265, "comment_id": 65340539, "body": "I tried making an algo by taking count of the input  , if its 2 digit , then append  one 0 till its count (inputs count ) reaches 2, if its 3 digit then append 2 zeroes till its count reaches 2, then 1 zero and when count become 3, then no zero will appened, But i dont know how to implement it"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1471435972, "post_id": 38994265, "comment_id": 65344167, "body": "How is the sequence formed? I don&#39;t understand the logic for your second sequence at all."}], "answers": [{"tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": false, "score": 1, "last_activity_date": 1471430820, "creation_date": 1471430820, "answer_id": 38994494, "question_id": 38994265, "link": "https://stackoverflow.com/questions/38994265/how-to-create-this-sequence-in-ruby/38994494#38994494", "title": "How to create this sequence in ruby?", "body": "<p>A very basic Python implementation. Note that it's a generator so it returns one value at a time.</p>\n\n<pre><code>def get_range(n):\n    len_n = len(str(n))\n    for num in range(1, n + 1):\n        output = str(num)\n        while len(output) &lt; len_n:\n            output = '0' + output\n        yield output\n\nfor i in get_range(100):\n    print(i)\n\n&gt;&gt; 001\n   002\n   ...\n   ...\n   009\n   010\n   011\n   ..\n   ..\n   099\n   100\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 1, "creation_date": 1471430961, "post_id": 38994510, "comment_id": 65340803, "body": "Nice, short and Pythonic solution."}], "tags": [], "owner": {"reputation": 656, "user_id": 4827869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rpxN.png?s=128&g=1", "display_name": "ham", "link": "https://stackoverflow.com/users/4827869/ham"}, "is_accepted": false, "score": 1, "last_activity_date": 1471430862, "creation_date": 1471430862, "answer_id": 38994510, "question_id": 38994265, "link": "https://stackoverflow.com/questions/38994265/how-to-create-this-sequence-in-ruby/38994510#38994510", "title": "How to create this sequence in ruby?", "body": "<p>Using <code>zfill</code> you can add leading zeroes. </p>\n\n<pre><code>num=input()\nfor i in range(1,int(num)+1):\n    print (str(i).zfill(len(num)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "is_accepted": true, "score": 2, "last_activity_date": 1471433089, "last_edit_date": 1471433089, "creation_date": 1471432302, "answer_id": 38995017, "question_id": 38994265, "link": "https://stackoverflow.com/questions/38994265/how-to-create-this-sequence-in-ruby/38995017#38995017", "title": "How to create this sequence in ruby?", "body": "<p>Ruby implementation:</p>\n\n<pre><code>n = gets\np (1..n.to_i).map{ |i| i.to_s.rjust(n.to_s.length, \"0\") }.join(\" \")\n</code></pre>\n\n<p>Here <code>rjust</code> will add leading zeros.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1471437019, "last_edit_date": 1471437019, "creation_date": 1471436568, "answer_id": 38996553, "question_id": 38994265, "link": "https://stackoverflow.com/questions/38994265/how-to-create-this-sequence-in-ruby/38996553#38996553", "title": "How to create this sequence in ruby?", "body": "<p>Another one in Ruby:</p>\n\n<pre><code>n = gets.chomp\n'1'.rjust(n.size, '0').upto(n) { |s| puts s }\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.1/String.html#method-i-upto\" rel=\"nofollow\"><code>String#upto</code></a> handles numeric strings in a special way:</p>\n\n<pre><code>'01'.upto('10').to_a\n#=&gt; [\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\"]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3260316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 38995017, "answer_count": 4, "score": -2, "last_activity_date": 1471437019, "creation_date": 1471430189, "question_id": 38994265, "link": "https://stackoverflow.com/questions/38994265/how-to-create-this-sequence-in-ruby", "title": "How to create this sequence in ruby?", "body": "<p>When we \ninput : 10</p>\n\n<p>output :01 02 03 04 05 06 07 08 09 10</p>\n\n<p>When we \ninput :103</p>\n\n<p>output :001 002 003...010 011 012 013.....100 101 002 103</p>\n\n<p>How to create this sequence in ruby or python ?</p>\n"}, {"tags": ["ruby", "windows", "rubygems", "serverspec"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1471435385, "post_id": 38994035, "comment_id": 65343774, "body": "I have done this by packaging it as an rpm, but you could also do it a tarball or docker container. What route seems best for you?"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1475686004, "post_id": 38994035, "comment_id": 67045858, "body": "@Samselvaprabu did my solution help you?"}, {"owner": {"reputation": 13804, "user_id": 399145, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c639d6740f34adc3e7219ade978abcfe?s=128&d=identicon&r=PG", "display_name": "Samselvaprabu", "link": "https://stackoverflow.com/users/399145/samselvaprabu"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1475728829, "post_id": 38994035, "comment_id": 67061657, "body": "@sixty4bit I found this link was helpful and it worked for me <a href=\"http://help.rubygems.org/kb/rubygems/installing-gems-with-no-network\" rel=\"nofollow noreferrer\">help.rubygems.org/kb/rubygems/installing-gems-with-no-networ&zwnj;&#8203;k</a>"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 1, "creation_date": 1475755780, "post_id": 38994035, "comment_id": 67076751, "body": "@Samselvaprabu that link doesn&#39;t mention anything about doing this with your entire bundle of gems like my answer does, but glad it helped you. :) You should create your own answer and mark it as correct if it gave you what you needed so that others can benefit."}], "answers": [{"comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1471440190, "post_id": 38996309, "comment_id": 65347464, "body": "If rpm and tarball are old school and docker is new school, that would make this a cool... mid--school(?) method."}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1471451731, "post_id": 38996309, "comment_id": 65355613, "body": "haha well yeah the assumption here is that you are setting your application up like this locally with the <code>vendor&#47;cache</code> directory but then you probably would archive the app before manually uploading it to the internet-restrictured server and unarchive it there"}], "tags": [], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "is_accepted": false, "score": 2, "last_activity_date": 1471435920, "creation_date": 1471435920, "answer_id": 38996309, "question_id": 38994035, "link": "https://stackoverflow.com/questions/38994035/how-to-install-serverspec-in-windows-machine-where-internet-is-not-there/38996309#38996309", "title": "How to install Serverspec in windows machine where internet is not there?", "body": "<p>Managing gems on a server that doesn't have internet access is definitely a challenge.</p>\n\n<p>One relatively-straightforward way to do what you need is to make use of the <code>vendor/cache</code> directory in your application and make <code>bundle</code> know about it when using <code>bundle install</code> by using the <code>--local</code> flag.</p>\n\n<p>First, download the gem archive (<code>.gem</code> file extension) of the <code>bundler</code> gem by going to its <a href=\"https://rubygems.org/gems/bundler\" rel=\"nofollow\">Rubygems page</a> and clicking the \"download\" link in the bottom right. You'll need to upload that file to your test server and run <code>$ gem install bundler-1.12.15.gem</code> from the command line.</p>\n\n<p>Now you need to get the <code>.gem</code> archives for serverspec, its dependencies, and all of its dependencies' dependencies, and put them inside your application in the <code>vendor/cache</code> directory (create those with <code>$ mkdir -p vendor/cache</code>) if they don't exist.</p>\n\n<p>Now when you deploy the application to the server, with these <code>.gem</code> files in <code>vendor/cache</code>, run <code>bundle install --local</code>. This will install the gems. You can see the official documentation of the <code>--local</code> option at the <a href=\"http://bundler.io/man/bundle-install.1.html\" rel=\"nofollow\">bundler docs</a>.</p>\n"}], "owner": {"reputation": 13804, "user_id": 399145, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c639d6740f34adc3e7219ade978abcfe?s=128&d=identicon&r=PG", "display_name": "Samselvaprabu", "link": "https://stackoverflow.com/users/399145/samselvaprabu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471435920, "creation_date": 1471429558, "question_id": 38994035, "link": "https://stackoverflow.com/questions/38994035/how-to-install-serverspec-in-windows-machine-where-internet-is-not-there", "title": "How to install Serverspec in windows machine where internet is not there?", "body": "<p>I was using serverspec in a VM where internet is available and it was so nice.</p>\n\n<p>But when we need to give the script to testers they have to install it in a machine where internet is not available.</p>\n\n<p>I was trying to install in a local folder in a VM where internet available then installed in test VM. But when i run Serverspec-init it says rspec is not found.</p>\n\n<p>Seems some dependent gems also need to be installed before using it.</p>\n\n<p>Is it not possible to install the whole bundle as one step? How to do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "is_accepted": true, "score": 0, "last_activity_date": 1471429367, "creation_date": 1471429367, "answer_id": 38993967, "question_id": 38993565, "link": "https://stackoverflow.com/questions/38993565/following-users-on-ruby-on-rails/38993967#38993967", "title": "Following users on Ruby on Rails", "body": "<p>Looking at the code below specially <code>@user</code> is probably nil. changing it to <code>user</code> does not make sense either. since you wanted to unfollow that user.</p>\n\n<pre><code> &lt;%= form_for(@user.relationships.find_by(followed_id: user), html: { method: :delete }, remote: true) do |f| %&gt;\n</code></pre>\n\n<p>Instead, use <code>current_user</code></p>\n\n<pre><code>  &lt;%= form_for(current_user.relationships.find_by(followed_id: user), html: { method: :delete }, remote: true) do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 6712802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-5HNrE7YGUzE/AAAAAAAAAAI/AAAAAAAAACE/pdt0nd3arb8/photo.jpg?sz=128", "display_name": "Alexander Borovoi", "link": "https://stackoverflow.com/users/6712802/alexander-borovoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 38993967, "answer_count": 1, "score": 1, "last_activity_date": 1471435911, "creation_date": 1471428260, "last_edit_date": 1471435911, "question_id": 38993565, "link": "https://stackoverflow.com/questions/38993565/following-users-on-ruby-on-rails", "title": "Following users on Ruby on Rails", "body": "<p>I decided to upgrade code of  <a href=\"https://www.railstutorial.org/book\" rel=\"nofollow\">https://www.railstutorial.org/book</a>  chapter 14 Following users. My code does not work, when <code>current_user</code> goes on another page and open following. <code>current_user</code>  sees himself and want to unfollow like original instagram. unfollow button does not work</p>\n\n<p><strong>show_follow.html.erb:</strong></p>\n\n<pre><code>&lt;div class=\"line-gray-modals\"&gt;&lt;/div&gt;\n  &lt;% if @users.any? %&gt;\n    &lt;% @users.each do |user| %&gt;\n  &lt;ul class=\"follow-list\"&gt;\n    &lt;li&gt;&lt;%= image_tag(user.avatar.url(:thumb), :class =&gt; \"img-cirkle\") %&gt;&lt;/li&gt;\n    &lt;li &gt;\n      &lt;div class=\"modal-follow-ns\" &gt; &lt;div class=\"bold\"&gt; &lt;%= link_to user.username, user %&gt;&lt;/div&gt; &lt;br&gt;\n      &lt;div class=\"modal-follow-ns2\"&gt;&lt;%= link_to truncate(user.status, :length =&gt; 50) %&gt;&lt;/div&gt;&lt;/div&gt;\n    &lt;/li&gt;\n    &lt;li class=\"button-modal\"&gt;\n      &lt;% unless user == current_user %&gt;\n        &lt;div id=\"follow_form\"&gt;\n          &lt;% if current_user.following?(user) %&gt;\n            &lt;%= form_for(current_user.relationships.find_by(followed_id: user),\n                           html: { method: :delete },\n                           remote: true) do |f| %&gt;\n              &lt;%= f.submit \"Unfollow\", class: \"btn btn-large\" %&gt;\n            &lt;% end %&gt;\n          &lt;% else %&gt;\n            &lt;%= form_for(current_user.relationships.build(followed_id: user.id),\n                                                         remote: true) do |f| %&gt;\n              &lt;div&gt;&lt;%= f.hidden_field :followed_id %&gt;&lt;/div&gt;\n              &lt;%= f.submit \"Follow\", class: \"btn btn-large btn-primary\" %&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n      &lt;% if user == current_user %&gt;\n        &lt;%= form_for(@user.relationships.find_by(followed_id: user),\n                                          html: { method: :delete },\n                                            remote: true) do |f| %&gt;\n          &lt;%= f.submit \"Unfollow\", class: \"btn btn-large\" %&gt;\n        &lt;% end %&gt;\n      &lt;% end %&gt;\n    &lt;/li&gt;\n    &lt;%= will_paginate %&gt;\n    &lt;li&gt;  &lt;div class=\"line-gray-modals\"&gt;&lt;/div&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n</code></pre>\n\n  \n\n<p><strong>relationships_controller.rb:</strong></p>\n\n<pre><code>   def create\n    @user = User.find(params[:relationship][:followed_id])\n    current_user.follow!(@user)\n    respond_to do |format|\n      format.html { redirect_to @user }\n      format.js\n    end\n  end\n\n  def destroy\n    @user = Relationship.find(params[:id]).followed\n    current_user.unfollow!(@user)\n    respond_to do |format|\n      format.html { redirect_to @user }\n      format.js\n    end\n  end\n</code></pre>\n\n<p><strong>Terminal:</strong></p>\n\n<pre><code>Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.9ms)\nNoMethodError (undefined method `destroy!' for nil:NilClass):\napp/models/user.rb:28:in `unfollow!'\napp/controllers/relationships_controller.rb:15:in `destroy'\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471454803, "post_id": 38993605, "comment_id": 65357287, "body": "lyen. I&#39;m perplexed. You selected an answer that purports (incorrectly) to do what you want to do, yet J&#246;rg has explained why that is not possible."}, {"owner": {"reputation": 8372, "user_id": 1408347, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/7mD3y.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/1408347/brian"}, "edited": false, "score": 0, "creation_date": 1471486185, "post_id": 38993605, "comment_id": 65369534, "body": "I chose SamFarmer&#39;s answer because I modified his code like <a href=\"https://gist.github.com/lyenliang/c63068a7e1a9d849f04d40968e950d2c\" rel=\"nofollow noreferrer\">this</a>. I didn&#39;t entirely follow his code."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1471428521, "last_edit_date": 1471428521, "creation_date": 1471428353, "answer_id": 38993605, "question_id": 38993184, "link": "https://stackoverflow.com/questions/38993184/defining-a-method-that-checks-the-existence-of-a-variable/38993605#38993605", "title": "Defining a method that checks the existence of a variable", "body": "<p>No, this is not possible. Local variables are called \"local variables\" because they are local to the scope they are defined in. They <em>by definition</em> do not exist in other scopes.</p>\n\n<p>What you <em>can</em> do, is re-ify the local scope as a <a href=\"http://ruby-doc.org/core/Binding.html\" rel=\"nofollow\"><code>Binding</code></a> object by calling <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-binding\" rel=\"nofollow\"><code>Kernel#binding</code></a>, and then check whether the local variable is defined in that <code>Binding</code> using the <a href=\"http://ruby-doc.org/core/Binding.html#method-i-local_variable_defined-3F\" rel=\"nofollow\"><code>Binding#local_variable_defined?</code></a> method:</p>\n\n<pre><code>def a?(binding)\n  binding.local_variable_defined?(:a)\nend\n\na?(binding)\n# =&gt; false\n\na = 42 if false\n\na?(binding)\n# =&gt; true\n\na\n# =&gt; nil\n</code></pre>\n\n<p>Or, more general:</p>\n\n<pre><code>def local_variable_defined?(name, binding)\n  binding.local_variable_defined?(name)\nend\n\nlocal_variable_defined?(:a, binding)\n# =&gt; false\n\na = 42 if false\n\nlocal_variable_defined?(:a, binding)\n# =&gt; true\n\na\n# =&gt; nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471454512, "post_id": 38993623, "comment_id": 65357142, "body": "Perhaps so, but you have not answered the question or explained why the OP cannot do what he or she wants to do."}], "tags": [], "owner": {"reputation": 9160, "user_id": 1300194, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oBkyV.jpg?s=128&g=1", "display_name": "Awlad Liton", "link": "https://stackoverflow.com/users/1300194/awlad-liton"}, "is_accepted": false, "score": 0, "last_activity_date": 1471428408, "creation_date": 1471428408, "answer_id": 38993623, "question_id": 38993184, "link": "https://stackoverflow.com/questions/38993184/defining-a-method-that-checks-the-existence-of-a-variable/38993623#38993623", "title": "Defining a method that checks the existence of a variable", "body": "<p>Defined itself return nil or true based on the existence of the given variable/object.</p>\n\n<p>You should use <code>defined?</code> method directly instead use another method like this :</p>\n\n<pre><code>if defined?a \n    puts  \"defined\"\nelse \n    puts \"not defined\"\nend \na = 10\n\nif  defined?a \n    puts \"defined a: #{a}\"\nelse\n    puts \"not defined\"\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>not defined\ndefined a: 10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1471455510, "post_id": 38993695, "comment_id": 65357673, "body": "Suppose <code>a</code> is not defined when you create the method. <code>a?</code> will now return <code>nil</code>. Now set <code>a</code> to &quot;123&quot; (or any value) and again execute <code>a?</code>. It will still return nil. That&#39;s because you created the method by executing <code>define_method &#39;a?&#39; { nil }</code>. If <code>a</code> had been defined (to equal anything) you would have executed <code>define_method &#39;a?&#39; { &quot;local-variable&quot; }</code>. See, for example, <a href=\"http://docs.ruby-lang.org/en/2.2.0/syntax/miscellaneous_rdoc.html\" rel=\"nofollow noreferrer\">this description</a> of the keyword <code>defined?</code>. The downvote is mine."}, {"owner": {"reputation": 176, "user_id": 2347723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f2981c438a27fc16bf2b8edc2b74944?s=128&d=identicon&r=PG", "display_name": "Sam Farmer", "link": "https://stackoverflow.com/users/2347723/sam-farmer"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471457396, "post_id": 38993695, "comment_id": 65358688, "body": "Ah i  didn&#39;t realize it behaved this way. Thanks, I&#39;ve learnt something new, and I agree that this shouldn&#39;t be the accepted answer."}, {"owner": {"reputation": 8372, "user_id": 1408347, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/7mD3y.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/1408347/brian"}, "edited": false, "score": 0, "creation_date": 1471485855, "post_id": 38993695, "comment_id": 65369458, "body": "@SamFarmer, I choose your answer because I modified your code as   <code>define_method &#39;a?&#39; do     if defined? a          return true     else         return false     end end</code>  I didn&#39;t entirely follow the code you wrote."}, {"owner": {"reputation": 8372, "user_id": 1408347, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/7mD3y.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/1408347/brian"}, "edited": false, "score": 0, "creation_date": 1471486081, "post_id": 38993695, "comment_id": 65369502, "body": "I pasted my code in <a href=\"https://gist.github.com/lyenliang/c63068a7e1a9d849f04d40968e950d2c\" rel=\"nofollow noreferrer\">gist</a>"}, {"owner": {"reputation": 176, "user_id": 2347723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f2981c438a27fc16bf2b8edc2b74944?s=128&d=identicon&r=PG", "display_name": "Sam Farmer", "link": "https://stackoverflow.com/users/2347723/sam-farmer"}, "edited": false, "score": 0, "creation_date": 1471507466, "post_id": 38993695, "comment_id": 65376787, "body": "Try defining a after the method definition, and the method will return false."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471654696, "post_id": 38993695, "comment_id": 65448584, "body": "lyen, if Sam&#39;s code won&#39;t work why would you expect your modification to work? The only difference is that you return <code>true</code> where Sam returns a truthy value and you return <code>false</code> where Sam returns a falsy value, <code>nil</code>."}], "tags": [], "owner": {"reputation": 176, "user_id": 2347723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f2981c438a27fc16bf2b8edc2b74944?s=128&d=identicon&r=PG", "display_name": "Sam Farmer", "link": "https://stackoverflow.com/users/2347723/sam-farmer"}, "is_accepted": true, "score": -1, "last_activity_date": 1471428601, "creation_date": 1471428601, "answer_id": 38993695, "question_id": 38993184, "link": "https://stackoverflow.com/questions/38993184/defining-a-method-that-checks-the-existence-of-a-variable/38993695#38993695", "title": "Defining a method that checks the existence of a variable", "body": "<p>In ruby, the keyword <code>def</code> acts a scope gate, so you lose access to local variables that are defined outside of the method definition. Alternatively, you can define methods using a block, allowing you access to variables defined outside of the method definition. </p>\n\n<pre><code>a = '123'\n\ndefine_method 'a?' do \n  defined? a\nend\n</code></pre>\n\n<p>For more information on this, I highly recommend reading through the first section of Metaprogramming Ruby</p>\n"}], "owner": {"reputation": 8372, "user_id": 1408347, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/7mD3y.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/1408347/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 38993695, "answer_count": 3, "score": 1, "last_activity_date": 1471428601, "creation_date": 1471427174, "question_id": 38993184, "link": "https://stackoverflow.com/questions/38993184/defining-a-method-that-checks-the-existence-of-a-variable", "title": "Defining a method that checks the existence of a variable", "body": "<p>Is it possible to define a method <code>a?</code> which returns <code>true</code> when <code>a</code> exists, and returns <code>false</code> when <code>a</code> is not defined?</p>\n\n<p>The following code doesn't work, because when <code>defined? a</code> got executed, variable <code>a</code> is outside of its scope.</p>\n\n<pre><code>a = 123\n\ndef a?\n    if defined? a\n        return true\n    else\n        return false\n    end\nend\n\nputs a? # false\n</code></pre>\n\n<p>Is it possible to make the last line of my code return <code>true</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 576, "user_id": 2361564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/tPogy.png?s=128&g=1", "display_name": "Mark Davies", "link": "https://stackoverflow.com/users/2361564/mark-davies"}, "edited": false, "score": 0, "creation_date": 1471428837, "post_id": 38992996, "comment_id": 65339300, "body": "You can set the timeout in Faraday when you create the connection (see the &quot;usage&quot; section in the readme: <a href=\"https://github.com/lostisland/faraday\" rel=\"nofollow noreferrer\">github.com/lostisland/faraday</a>).  Try setting that an upping the values.  The other thing worth checking is how long does it take to execute your find_by statements.  Perhaps add some indexes to improve the speed."}], "owner": {"reputation": 139, "user_id": 6597822, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d011de759593ab34e2c68882396e43b9?s=128&d=identicon&r=PG&f=1", "display_name": "admitme_sam", "link": "https://stackoverflow.com/users/6597822/admitme-sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471428477, "creation_date": 1471426692, "question_id": 38992996, "link": "https://stackoverflow.com/questions/38992996/faraday-timeout-error-on-rake-task", "title": "faraday timeout error on rake task", "body": "<p>I'm getting an error that is this: <code>Faraday::TimeoutError: Net::ReadTimeout</code></p>\n\n<p>Heres the rake task which fails:</p>\n\n<pre><code> Event.all.each do |row|\n         date = row.date.strftime('%Y-%m-%d')\n         time = row.time.strftime('%H:%M:%S')\n         event2 = EventTable2.find_by('product_name ILIKE ? AND delivery_time ILIKE ? AND valid_from = ?', \"%#{row.eventname}%\", time, date)\n         if event2.blank?\n           event2 = EventTable2.find_by('product_name ILIKE ? AND valid_from = ?', \"%#{row.eventname}%\", date)\n       end\n       if event2.present?\n       eurl = event2.merchant_product_id\n     end\n     if eurl.present?\n         if eurl.length &gt; 7\n           row.update(event2: eurl, eventimage: event2.merchant_image_url)\n         end\n      end\n    end\n</code></pre>\n\n<p>I'm wondering it its because i have <code>Event.all.each</code> I'm wondering if its taking too long on this and falling over?</p>\n\n<p>Any help would be great (even if i need the rake task rewriting)</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ssl", "https", "openssl", "ssl-certificate"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471428242, "post_id": 38992646, "comment_id": 65338862, "body": "Is the server certificate for <code>myurl.ru</code> also signed with <code>ca_client_smsgate-in.pem</code> or only the client certificate?"}, {"owner": {"reputation": 181, "user_id": 6597455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d2ebd5b1f75949cc4c7d84c1b6131c?s=128&d=identicon&r=PG&f=1", "display_name": "S.Ivanov", "link": "https://stackoverflow.com/users/6597455/s-ivanov"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471443755, "post_id": 38992646, "comment_id": 65350245, "body": "@slowjack2k, yes, the server certificate for <code>myurl.ru</code> signed with <code>ca_client_smsgate-i\u200c\u200bn.pem</code>"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471445039, "post_id": 38992646, "comment_id": 65351297, "body": "Did you examine <code>ca_client_smsgate-in.pem</code> is every thing ok with this file? Maybe <code>http.set_debug_output($stdout) </code> give some hints."}, {"owner": {"reputation": 181, "user_id": 6597455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d2ebd5b1f75949cc4c7d84c1b6131c?s=128&d=identicon&r=PG&f=1", "display_name": "S.Ivanov", "link": "https://stackoverflow.com/users/6597455/s-ivanov"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471499812, "post_id": 38992646, "comment_id": 65373151, "body": "@slowjack2k, <code>http.set_debug_output($stdout)</code> - <code>opening connection to myurl.ru:9443... opened starting SSL for myurl.ru:9443... SSL established Conn close because of connect error SSL_connect returned=1 errno=0 state=unknown  state: certificate verify failed &#47;home&#47;dev&#47;.rvm&#47;rubies&#47;ruby-2.2.3&#47;lib&#47;ruby&#47;2.2.0&#47;net&#47;http.rb:&zwnj;&#8203;923:in </code>connect&#39;: SSL_connect returned=1 errno=0 state=unknown state: certificate verify failed (OpenSSL::SSL::SSLError)<code>. In google chrome: </code>There are issues with the site&#39;s certificate chain (net::ERR_CERT_COMMON_NAME_INVALID).` What could be the problem?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471501952, "post_id": 38992646, "comment_id": 65373950, "body": "What&#39;s the Common Name of your cert and ca?"}, {"owner": {"reputation": 181, "user_id": 6597455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d2ebd5b1f75949cc4c7d84c1b6131c?s=128&d=identicon&r=PG&f=1", "display_name": "S.Ivanov", "link": "https://stackoverflow.com/users/6597455/s-ivanov"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471503765, "post_id": 38992646, "comment_id": 65374848, "body": "@slowjack2k, The certificate CN = mysite.ru, and I in the code referring to ip address, such as 1.1.1.1. This Name (mysite.ru) not resolved in the network. Linked to this the problem?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471504949, "post_id": 38992646, "comment_id": 65375411, "body": "Yes, when you use the ip address directly to connect and not the domain name, then this is an issue for ssl. You can use the ip-address as CN in this case."}], "owner": {"reputation": 181, "user_id": 6597455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d2ebd5b1f75949cc4c7d84c1b6131c?s=128&d=identicon&r=PG&f=1", "display_name": "S.Ivanov", "link": "https://stackoverflow.com/users/6597455/s-ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471445322, "creation_date": 1471425663, "question_id": 38992646, "link": "https://stackoverflow.com/questions/38992646/cant-connect-with-ssl-certificate", "title": "Can&#39;t connect with SSL certificate", "body": "<p>I've pfx sectificate, with which I have to log into a specific URL to send and receive data. It's self-signed certificate.</p>\n\n<p>Made <code>pem</code> files:</p>\n\n<pre><code>openssl pkcs12 -in client_ssl.pfx -out client_smsgate-in.pem -clcerts\nopenssl pkcs12 -in client_ssl.pfx -out ca_client_smsgate-in.pem -cacerts\n</code></pre>\n\n<p>Try connections:</p>\n\n<pre><code>require \"net/https\"\nrequire \"uri\"\n\nuri = URI.parse(\"myurl.ru\")\npem = File.read(\"client_smsgate-in.pem\")\nhttp = Net::HTTP.new(uri.host, uri.port)\n\nhttp.use_ssl = true\nhttp.ca_file = File.read(\"ca_client_smsgate-in.pem\")\nhttp.verify_mode = OpenSSL::SSL::VERIFY_PEER\n\nhttp.cert = OpenSSL::X509::Certificate.new(pem)\nhttp.key = OpenSSL::PKey::RSA.new(pem, 'pass')\n\nrequest = Net::HTTP::Get.new(uri.request_uri)\nresponse = http.request(request)\n</code></pre>\n\n<p>I've error:\n<code>lib/ruby/2.2.0/net/http.rb:923:in 'connect': SSL_connect returned=1 errno=0 state=unknown state: certificate verify failed (OpenSSL::SSL::SSLError)\n</code>\nIf check <code>OpenSSL::SSL::VERIFY_NONE</code>, it works. tell me what's wrong, because I have CA certificates to him?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1471429591, "post_id": 38992291, "comment_id": 65339884, "body": "Why are you defining a <b>constant</b>, and then <b>editing</b> it with data? This does not make sense."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1471429728, "post_id": 38992291, "comment_id": 65339962, "body": "Or to put it another way, shouldn&#39;t you be using an instance variable, with data set in the <code>initialize</code> method?"}, {"owner": {"reputation": 421, "user_id": 2304366, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e91d714662a9a6c004cc21d181c52e61?s=128&d=identicon&r=PG", "display_name": "Naremy", "link": "https://stackoverflow.com/users/2304366/naremy"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1471430352, "post_id": 38992291, "comment_id": 65340413, "body": "You mean that i have to use a singleton to store these data? Don&#39;t feel conformable with this. The purpose is near to simple_form wrapper. I don&#39;t know how they store their wrapper but i will give a look. Good idea."}], "owner": {"reputation": 421, "user_id": 2304366, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e91d714662a9a6c004cc21d181c52e61?s=128&d=identicon&r=PG", "display_name": "Naremy", "link": "https://stackoverflow.com/users/2304366/naremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471430098, "creation_date": 1471424615, "last_edit_date": 1471430098, "question_id": 38992291, "link": "https://stackoverflow.com/questions/38992291/reloading-constant-generated-with-inherited-with-rails", "title": "Reloading constant generated with inherited with rails", "body": "<p>I have a concern with realoding of constant in rails. More specifically, with a constant that is filled by an inherited <a href=\"https://ruby-doc.org/core-2.2.0/Class.html#method-i-inherited\" rel=\"nofollow\">method</a> :</p>\n\n<p>EDIT : This concerns is relative to development mode, not production.</p>\n\n<p>Here is the code :</p>\n\n<pre><code># helpers/my_active_code/formatter.rb\nmodule MyActiveCode\n  class Formatter\n    FORMATTER_MAPPING = ActiveSupport::HashWithIndifferentAccess.new # just a constant\n    # Will store something like : \n    # { \n    #    \"String\" =&gt; ::MyActiveCode::Transforms::String,\n    #    \"Boolean\" =&gt; ::MyActiveCode::Transforms::Boolean,\n    # }\n  end\nend\n\n# helpers/my_active_code/transforms/object.rb\nmodule MyActiveCode::Transforms\n  class Object\n    # A superclass that implement an inherited method which store into the constant\n    private\n    def self.inherited(subclass)\n      ActiveRecordViewRewrite::Formatter::FORMATTER_MAPPING.store(identifier, subclass)\n    end\n  end\nend\n\n# helpers/my_active_code/transforms/string.rb\nmodule MyActiveCode::Transforms\n  class String\n  end\nend\n</code></pre>\n\n<p>I also got an initializer that require all files into the folder helpers/my_active_code/transforms.</p>\n\n<p>When i start the rails console, all work fine, the FORMATTER_MAPPING constant is well filled.</p>\n\n<p>However, after a reload (reload!) the FORMATTER_MAPPING constant is empty ({}).</p>\n\n<p>This is perfectly normal due to the constant-reloading describe here : <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#constant-reloading\" rel=\"nofollow\">http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#constant-reloading</a></p>\n\n<p>So i try to reload all my transforms file into (helpers/my_active_code/transforms) at the end of the file helpers/my_active_code/formatter.rb but it does not work.</p>\n\n<p>How can I solve this and always get this constant filled?</p>\n"}, {"tags": ["ruby", "rspec", "serverspec"], "answers": [{"tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": false, "score": 0, "last_activity_date": 1471426890, "creation_date": 1471426890, "answer_id": 38993089, "question_id": 38992192, "link": "https://stackoverflow.com/questions/38992192/how-to-execute-multiple-serverspec-files-at-once/38993089#38993089", "title": "How to execute multiple serverspec files at once?", "body": "<p>According to <a href=\"http://serverspec.org/advanced_tips.html\" rel=\"nofollow\">the documentation</a> you can use <code>-m</code> and <code>-j [NUMBER]</code> parameters for the rake task to execute tests in parallel.</p>\n"}, {"tags": [], "owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "is_accepted": false, "score": 0, "last_activity_date": 1471435236, "creation_date": 1471435236, "answer_id": 38996057, "question_id": 38992192, "link": "https://stackoverflow.com/questions/38992192/how-to-execute-multiple-serverspec-files-at-once/38996057#38996057", "title": "How to execute multiple serverspec files at once?", "body": "<p>You can modify the Rakefile that you use to execute the serverspec tests so that the scripts are run together. In your Rakefile, you should see the task being generated in a block of code like this:</p>\n\n<pre><code>RSpec::Core::RakeTask.new(symbol)\n</code></pre>\n\n<p>The symbol is probably the fqdn, but you may have changed it something else. Inside of there, you should see something like:</p>\n\n<pre><code>task.pattern = 'spec/{file_pattern}'\n</code></pre>\n\n<p>You can adjust the file pattern to capture all of your ruby scripts in that task. For example, if you have <code>app_validate_1_spec.rb</code>, <code>app_validate_2_spec.rb</code>, and <code>app_validate_3_spec.rb</code> all inside your <code>spec</code> directory:</p>\n\n<pre><code>task.pattern = 'spec/{app_validate_1_spec.rb,app_validate_2_spec.rb,app_validate_3_spec.rb}'\n</code></pre>\n\n<p>would do it for you. You could also do:</p>\n\n<pre><code>task.pattern = 'spec/app_validate_{1,2,3}_spec.rb'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>task.pattern = 'spec/*_spec.rb'\n</code></pre>\n\n<p>Just make sure that the pattern matches everything you want to run for the task that executes serverspec on the server. You can also get creative with <code>requires</code>. You could have a <code>app_validate_spec.rb</code> with:</p>\n\n<pre><code>require_relative 'app_validate_1_spec.rb'\nrequire_relative 'app_validate_2_spec.rb'\nrequire_relative 'app_validate_3_spec.rb'\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>task.pattern = 'spec/app_validate_spec.rb'\n</code></pre>\n"}], "owner": {"reputation": 13804, "user_id": 399145, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c639d6740f34adc3e7219ade978abcfe?s=128&d=identicon&r=PG", "display_name": "Samselvaprabu", "link": "https://stackoverflow.com/users/399145/samselvaprabu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1471435236, "creation_date": 1471424289, "question_id": 38992192, "link": "https://stackoverflow.com/questions/38992192/how-to-execute-multiple-serverspec-files-at-once", "title": "How to execute multiple serverspec files at once?", "body": "<p>We are writing serverspec ruby scripts. </p>\n\n<p>We are writing multiple scripts as each script validates certain portion of the application.</p>\n\n<p>how to run all the scripts together and get one final report?</p>\n"}, {"tags": ["ruby", "rspec", "rspec-expectations"], "answers": [{"comments": [{"owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "edited": false, "score": 0, "creation_date": 1471509262, "post_id": 38996994, "comment_id": 65377731, "body": "Make sense. I&#39;ll give it a try."}, {"owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "edited": false, "score": 0, "creation_date": 1472819430, "post_id": 38996994, "comment_id": 65918558, "body": "At first, I was running into the problem where RSpec is inferring from the matcher name that the URL implements <code>has_query_params?</code> but that was only because I forgot the include. Thanks for pinging me, I had some problems with my env in the meantime."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 6, "last_activity_date": 1471523264, "last_edit_date": 1471523264, "creation_date": 1471437780, "answer_id": 38996994, "question_id": 38991873, "link": "https://stackoverflow.com/questions/38991873/can-i-use-a-built-in-rspec-matcher-in-a-custom-matcher/38996994#38996994", "title": "Can I use a built-in RSpec matcher in a custom matcher?", "body": "<p><a href=\"https://github.com/rspec/rspec-expectations/blob/v3.5.0/lib/rspec/matchers.rb#L626\" rel=\"noreferrer\"><code>RSpec::Matchers</code></a> appears to be a supported API (its rdoc doesn't say otherwise), so you can write your matcher in Ruby instead of in the matcher DSL (which is supported; see <a href=\"http://www.relishapp.com/rspec/rspec-expectations/v/3-5/docs/custom-matchers/define-a-custom-matcher\" rel=\"noreferrer\">the second paragraph of the custom matcher documentation</a>) and use <code>RSpec::Matchers#include</code> like this:</p>\n\n<p>spec/support/matchers.rb</p>\n\n<pre><code>module My\n  module Matchers\n    def have_query_params(expected)\n      HasQueryParams.new expected\n    end\n\n    class HasQueryParams\n      include RSpec::Matchers\n\n      def initialize(expected)\n        @expected = expected\n      end\n\n      def matches?(url)\n        actual = Addressable::URI.parse(url).query_values\n        @matcher = include @expected\n        @matcher.matches? actual\n      end\n\n      def failure_message\n        @matcher.failure_message\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>spec/support/matcher_spec.rb</p>\n\n<pre><code>include My::Matchers\n\ndescribe My::Matchers::HasQueryParams do\n  it \"matches\" do\n    expect(\"http://example.com?a=1&amp;b=2\").to have_query_params('a' =&gt; '1', 'b' =&gt; '2')\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1570232109, "post_id": 49951024, "comment_id": 102860407, "body": "This always felt awkward to me, but if Myron Marston supports it... Though it&#39;s been quite a while, and I&#39;m wondering/hoping for better &amp; more supported/documented ways of reusing/overriding builtins."}], "tags": [], "owner": {"reputation": 930, "user_id": 1518589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U3ejO.jpg?s=128&g=1", "display_name": "armchairdj", "link": "https://stackoverflow.com/users/1518589/armchairdj"}, "is_accepted": false, "score": 1, "last_activity_date": 1524326878, "last_edit_date": 1524326878, "creation_date": 1524268133, "answer_id": 49951024, "question_id": 38991873, "link": "https://stackoverflow.com/questions/38991873/can-i-use-a-built-in-rspec-matcher-in-a-custom-matcher/49951024#49951024", "title": "Can I use a built-in RSpec matcher in a custom matcher?", "body": "<p>Yes, you can call built-in rspec matchers from within a custom matcher. Put another way, you can use the normal Rspec DSL instead of pure Ruby when writing your matcher. Check out <a href=\"https://gist.github.com/myronmarston/931012eb70c002b87d44\" rel=\"nofollow noreferrer\">this gist</a> (not my gist, but it helped me!).</p>\n\n<p>I've got a really complex controller with a tabbed interface where the defined and selected tab depend on the state of the model instance. I needed to test tab setup in every state of the :new, :create, :edit and :update actions. So I wrote these matchers:</p>\n\n<pre><code>require \"rspec/expectations\"\n\nRSpec::Matchers.define :define_the_review_tabs do\n  match do\n    expect(assigns(:roles         )).to be_a_kind_of(Array)\n    expect(assigns(:creators      )).to be_a_kind_of(ActiveRecord::Relation)\n    expect(assigns(:works         )).to be_a_kind_of(Array)\n\n    expect(assigns(:available_tabs)).to include(\"post-new-work\")\n    expect(assigns(:available_tabs)).to include(\"post-choose-work\")\n  end\n\n  match_when_negated do\n    expect(assigns(:roles         )).to_not be_a_kind_of(Array)\n    expect(assigns(:creators      )).to_not be_a_kind_of(ActiveRecord::Relation)\n    expect(assigns(:works         )).to_not be_a_kind_of(Array)\n\n    expect(assigns(:available_tabs)).to_not include(\"post-new-work\")\n    expect(assigns(:available_tabs)).to_not include(\"post-choose-work\")\n  end\n\n  failure_message do\n    \"expected to set up the review tabs, but did not\"\n  end\n\n  failure_message_when_negated do\n    \"expected not to set up review tabs, but they did\"\n  end\nend\n\nRSpec::Matchers.define :define_the_standalone_tab do\n  match do\n    expect(assigns(:available_tabs)).to include(\"post-standalone\")\n  end\n\n  match_when_negated do\n    expect(assigns(:available_tabs)).to_not include(\"post-standalone\")\n  end\n\n  failure_message do\n    \"expected to set up the standalone tab, but did not\"\n  end\n\n  failure_message_when_negated do\n    \"expected not to set up standalone tab, but they did\"\n  end\nend\n\nRSpec::Matchers.define :define_only_the_review_tabs do\n  match do\n    expect(assigns).to     define_the_review_tabs\n    expect(assigns).to_not define_the_standalone_tab\n    expect(assigns(:selected_tab)).to eq(@selected) if @selected\n  end\n\n  chain :and_select do |selected|\n    @selected = selected\n  end\n\n  failure_message do\n    if @selected\n      \"expected to set up only the review tabs and select #{@selected}, but did not\"\n    else\n      \"expected to set up only the review tabs, but did not\"\n    end\n  end\nend\n\nRSpec::Matchers.define :define_only_the_standalone_tab do\n  match do\n    expect(assigns).to     define_the_standalone_tab\n    expect(assigns).to_not define_the_review_tabs\n    expect(assigns(:selected_tab)).to eq(\"post-standalone\")\n  end\n\n  failure_message do\n    \"expected to set up only the standalone tab, but did not\"\n  end\nend\n\nRSpec::Matchers.define :define_all_tabs do\n  match do\n    expect(assigns).to define_the_review_tabs\n    expect(assigns).to define_the_standalone_tab\n    expect(assigns(:selected_tab)).to eq(@selected) if @selected\n  end\n\n  chain :and_select do |selected|\n    @selected = selected\n  end\n\n  failure_message do\n    if @selected\n      \"expected to set up all three tabs and select #{@selected}, but did not\"\n    else\n      \"expected to set up all three tabs, but did not\"\n    end\n  end\nend\n</code></pre>\n\n<p>And am using them like so:</p>\n\n<pre><code>should define_all_tabs.and_select(\"post-choose-work\")\nshould define_all_tabs.and_select(\"post-standalone\")\nshould define_only_the_standalone_tab\nshould define_only_the_review_tabs.and_select(\"post-choose-work\")\nshould define_only_the_review_tabs.and_select(\"post-new-work\")\n</code></pre>\n\n<p>Super-awesome to be able to just take several chunks of repeated expectations and roll them up into a set of custom matchers without having to write the matchers in pure Ruby.</p>\n\n<p>This saves me dozens of lines of code, makes my tests more expressive, and allows me to change things in one place if the logic for populating these tabs changes.</p>\n\n<p>Also note that you have access in your custom matcher to methods/variables such as <code>assigns</code> and <code>controller</code> so you don't need to pass them in explicitly.</p>\n\n<p>Finally, I could have defined these matchers inline in the spec, but I chose to put them in spec/support/matchers/controllers/posts_controller_matchers.rb</p>\n"}], "owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1954, "favorite_count": 0, "accepted_answer_id": 38996994, "answer_count": 2, "score": 7, "last_activity_date": 1524326878, "creation_date": 1471423250, "last_edit_date": 1471437819, "question_id": 38991873, "link": "https://stackoverflow.com/questions/38991873/can-i-use-a-built-in-rspec-matcher-in-a-custom-matcher", "title": "Can I use a built-in RSpec matcher in a custom matcher?", "body": "<p>I have the following expectation in a feature spec (pretty low-level but still necessary):</p>\n\n<pre><code>expect(Addressable::URI.parse(current_url).query_values).to include(\n  'some =&gt; 'value',\n  'some_other' =&gt; String\n)\n</code></pre>\n\n<p>Note the second query value is a fuzzy match because I just want to make sure it's there but I can't be more specific about it.</p>\n\n<p>I'd like to extract this into a custom matcher. I started with:</p>\n\n<pre><code>RSpec::Matchers.define :have_query_params do |expected_params|\n  match do |url|\n    Addressable::URI.parse(url).query_values == expected_params\n  end\nend\n</code></pre>\n\n<p>but this means I cannot pass <code>{'some_other' =&gt; String}</code> in there. To keep using a fuzzy match, I'd have to use the <code>include</code> matcher in my custom matcher.</p>\n\n<p>However, anything within <code>RSpec::Matchers::BuiltIn</code> is marked as private API, and <code>Include</code> specifically is <a href=\"https://github.com/rspec/rspec-expectations/blob/e8e90cce3dfddab3ecd5b3c98559d384530daf8d/lib/rspec/matchers/built_in/include.rb#L5-L6\" rel=\"noreferrer\">documented</a> as:</p>\n\n<pre><code># Provides the implementation for `include`.\n# Not intended to be instantiated directly.\n</code></pre>\n\n<p>So, my question is: <strong>Is using a built-in matcher within a custom matcher supported in RSpec?</strong> How would I do that?</p>\n"}, {"tags": ["ruby", "capistrano"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6725347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClRh2.jpg?s=128&g=1", "display_name": "Sander de Vos", "link": "https://stackoverflow.com/users/6725347/sander-de-vos"}, "edited": false, "score": 0, "creation_date": 1471443240, "post_id": 38996565, "comment_id": 65349804, "body": "This is exactly what I&#39;m doing right now as a workaround. It does feel like a quick hack and defeats the purpose of a multi server deployment tool. There has to be a better solution..."}, {"owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "reply_to_user": {"reputation": 21, "user_id": 6725347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClRh2.jpg?s=128&g=1", "display_name": "Sander de Vos", "link": "https://stackoverflow.com/users/6725347/sander-de-vos"}, "edited": false, "score": 0, "creation_date": 1471694308, "post_id": 38996565, "comment_id": 65456820, "body": "Another hack might be to use multiple CNAMEs as deployment targets, all of which refer to the same server."}], "tags": [], "owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "is_accepted": false, "score": 0, "last_activity_date": 1471436602, "creation_date": 1471436602, "answer_id": 38996565, "question_id": 38991846, "link": "https://stackoverflow.com/questions/38991846/how-to-populate-deploy-to-variable-with-custom-server-property/38996565#38996565", "title": "How to populate deploy_to variable with custom server property", "body": "<p>I've done a couple different things for this case. If each installation is indeed identical, I'll deploy once and symlink the other installations. If each installation has different parameters, I'll create multiple targets (prod-1, prod-2, prod-2, et cetera) where each points at the same server. You can use helper methods to reduce code duplication. Then I'll write a script which runs <code>bundle exec cap prod-1 deploy &amp;&amp; bundle exec cap prod-2 deploy &amp;&amp; ...</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 6725347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClRh2.jpg?s=128&g=1", "display_name": "Sander de Vos", "link": "https://stackoverflow.com/users/6725347/sander-de-vos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1471436602, "creation_date": 1471423143, "question_id": 38991846, "link": "https://stackoverflow.com/questions/38991846/how-to-populate-deploy-to-variable-with-custom-server-property", "title": "How to populate deploy_to variable with custom server property", "body": "<p>I've asked this question on Capistrano's GitHub repository issue tracker (<a href=\"https://github.com/capistrano/capistrano/issues/1750\" rel=\"nofollow\">https://github.com/capistrano/capistrano/issues/1750</a>) and was told to ask the same question here.</p>\n\n<p>I'm trying to populate the deploy_to variable with a custom server property (named organisation) to deploy the same application multiple times to the same server.</p>\n\n<pre><code>set :deploy_to, \"/home/deploy/sites/#{server.properties.organisation}\"\n</code></pre>\n\n<p>It seems impossible to load the server Array? using the fetch() method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal"], "owner": {"reputation": 39, "user_id": 5821752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wVLKV.png?s=128&g=1", "display_name": "Juan Jos&#233;", "link": "https://stackoverflow.com/users/5821752/juan-jos%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471422059, "creation_date": 1471422059, "question_id": 38991508, "link": "https://stackoverflow.com/questions/38991508/paypal-express-checkout-ruby-on-rails-not-return-paymentid-only-payerid-and-t", "title": "Paypal Express Checkout (Ruby on rails) not return PAYMENTID, only PAYERID and TOKEN", "body": "<p>I have read about Paypal Express Checkout doc and follow the same steps to get a good result... </p>\n\n<p>When I send the token with the URL:</p>\n\n<p><a href=\"https://www.paypal.com/cgi-bin/checkoutnow?token=TOKEN\" rel=\"nofollow\">https://www.paypal.com/cgi-bin/checkoutnow?token=TOKEN</a></p>\n\n<p>And the Customer accept the pay, Paypal redirect him to my return_url with PAYERID and TOKEN params, but not PAYMENTID.</p>\n\n<p>In the next step Paypal doc said that we need PAYMENTID to continue the proccess and execute the PAYMENT.</p>\n\n<p>Did you have this problem.</p>\n\n<p>This is the link I follow:</p>\n\n<p><a href=\"https://developer.paypal.com/docs/integration/direct/express-checkout/#rest-integration-steps\" rel=\"nofollow\">https://developer.paypal.com/docs/integration/direct/express-checkout/#rest-integration-steps</a></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "capybara", "poltergeist"], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "edited": false, "score": 0, "creation_date": 1471427791, "post_id": 38992098, "comment_id": 65338552, "body": "I am doing web scraping, crawling. Thanks"}, {"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "reply_to_user": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "edited": false, "score": 0, "creation_date": 1471429604, "post_id": 38992098, "comment_id": 65339891, "body": "so did i answer your question? if so, please accept this as the answer. if not, please elaborate on your specific use case."}, {"owner": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "edited": false, "score": 0, "creation_date": 1471432729, "post_id": 38992098, "comment_id": 65341981, "body": "I am thinking of using regular expression to extract the text from all the  paragraph. any idea on this? for time being your answer is quite usable no doubt."}, {"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "reply_to_user": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "edited": false, "score": 0, "creation_date": 1471432878, "post_id": 38992098, "comment_id": 65342103, "body": "I don&#39;t know what you mean. I gave you a solution to extract all the text from all paragraphs. What are you trying to achieve exactly?"}, {"owner": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "edited": false, "score": 0, "creation_date": 1471432970, "post_id": 38992098, "comment_id": 65342183, "body": "Did not you use regular expression???. This can be used to extract all text inside paragraphs without loop through it."}, {"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "reply_to_user": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "edited": false, "score": 0, "creation_date": 1471433107, "post_id": 38992098, "comment_id": 65342264, "body": "No, I did not use a regular expression. Where do you see one?"}, {"owner": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "edited": false, "score": 0, "creation_date": 1471433242, "post_id": 38992098, "comment_id": 65342369, "body": "Will let you know after using it. By the way thanks for your efforts."}], "tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": true, "score": 1, "last_activity_date": 1471424017, "creation_date": 1471424017, "answer_id": 38992098, "question_id": 38990996, "link": "https://stackoverflow.com/questions/38990996/how-to-extract-text-from-multiple-paragraph-in-div-poltergeist-capybara/38992098#38992098", "title": "How to extract text from multiple paragraph in div poltergeist/capybara", "body": "<p>The result of <code>#all</code> is a <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Result\" rel=\"nofollow\">Capybara::Result</a>. The doc says:</p>\n\n<blockquote>\n  <p>A Result represents a collection of Node::Element on the page. It is\n  possible to interact with this collection similar to an Array because\n  it implements Enumerable [...]</p>\n</blockquote>\n\n<p>Thus, you may interact with it as with a enumerable, it does not offer any method you're asking for.</p>\n\n<p>You can do this to retrieve the concatenated content:</p>\n\n<pre><code>session.all('.entry p').map(&amp;:text).join\n</code></pre>\n\n<p>According to your tag \"web-scraping\" I assume you're using capybara for web scraping, and not for testing. As capybara's main purpose is for testing it does not have a built-in method for what you're asking for.</p>\n\n<p>If you're implementing a test though you should rather do something like this (I used RSpec here):</p>\n\n<pre><code>within('.entry') do\n  expect(page).to have_text 'something'\nend\n</code></pre>\n\n<p>Or, if you really need to be very specific about the location of the spec (which in most cases is unnecessary) you should test each element on it's own:</p>\n\n<pre><code>expect(session.all('.entry p')[0]).to have_content 'something'\nexpect(session.all('.entry p')[1]).to have_content 'something else'\n</code></pre>\n\n<p>And just as a last sidenote: For web scraping there are better options than capybara.</p>\n"}], "owner": {"reputation": 1012, "user_id": 4003041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/869300f4c12b62e2577c41805e490c37?s=128&d=identicon&r=PG&f=1", "display_name": "Waleed Arshad", "link": "https://stackoverflow.com/users/4003041/waleed-arshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 38992098, "answer_count": 1, "score": 0, "last_activity_date": 1471424017, "creation_date": 1471420384, "question_id": 38990996, "link": "https://stackoverflow.com/questions/38990996/how-to-extract-text-from-multiple-paragraph-in-div-poltergeist-capybara", "title": "How to extract text from multiple paragraph in div poltergeist/capybara", "body": "<p>I am using this command to extract p tag   </p>\n\n<pre><code>session.all('.entry p')\n</code></pre>\n\n<p>Giving results</p>\n\n<pre><code>[#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[1]\"&gt;, \n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[2]\"&gt;, \n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[3]\"&gt;, \n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[4]\"&gt;,\n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[5]\"&gt;, \n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[6]\"&gt;,\n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[7]\"&gt;, \n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[8]\"&gt;, \n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[9]\"&gt;, \n#&lt;Capybara::Element tag=\"p\" path=\"//HTML[1]/BODY[1]/DIV[3]/DIV[1]/SECTION[1]/DIV[1]/ARTICLE[1]/DIV[3]/P[10]\"&gt;]\n</code></pre>\n\n<p>Now i want to extract all text from p node, i know there is loop method to merge all paragraph text, is there any other way. capybara provide?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1471421305, "post_id": 38990782, "comment_id": 65334467, "body": "Hey is this <code>raise</code> thing intentional or you misspelled it? is it <code>return</code>?"}, {"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1471422676, "post_id": 38990782, "comment_id": 65335267, "body": "In <code>rails 4.2.0</code>, <code>ruby 2.3.1</code> I could not recreate this error. But the exception you intend to raise."}], "owner": {"reputation": 5911, "user_id": 1460582, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fd34aa3896f53f9340573299d9e73441?s=128&d=identicon&r=PG", "display_name": "carbonr", "link": "https://stackoverflow.com/users/1460582/carbonr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1471419999, "creation_date": 1471419662, "last_edit_date": 1471419999, "question_id": 38990782, "link": "https://stackoverflow.com/questions/38990782/inheritance-error-in-ruby-2-x-when-overriding-methods", "title": "Inheritance error in Ruby 2.x when overriding methods", "body": "<p>I was using this method as a way to provide some custom database configuration in <code>application.rb</code>, It was working perfectly on rails <code>4.1.4</code> and ruby <code>1.9.3</code> and recently I updated to ruby <code>2.3.0</code> and it started throwing this error:</p>\n\n<pre><code>NoMethodError: super: no superclass method `database_configuration'\n  method_missing at ../gems/railties-4.1.4/lib/rails/railtie/configuration.rb:95\n</code></pre>\n\n<p>code below.</p>\n\n<pre><code>module MyApp \n  class Application &lt; Rails::Application\n    # ... config \n    config.encoding = \"utf-8\" \n\n    def config.database_configuration\n      parsed = super\n      raise parsed.to_yaml  # Replace this line to add custom connections to the hash from database.yml\n    end\n  end\nend\n</code></pre>\n\n<p>Any one has any ideas what's changed in new ruby for this behaviour. I did a pry breakpoint inside the <code>config.database_configuration</code> method and called super in the console and that seems to work and give output without error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1471421995, "creation_date": 1471421995, "answer_id": 38991494, "question_id": 38990681, "link": "https://stackoverflow.com/questions/38990681/doublerendererror-in-rails/38991494#38991494", "title": "DoubleRenderError in rails", "body": "<p>If a filter redirects then subsequent filters and the action itself do not run, but the filter itself continues. In your case, after <code>check_login!</code> is called, the <code>authorize_admin!</code> filter continues executing. </p>\n\n<p>You could change <code>check_login!</code> to return true if the check passed and false if there is no current user. Then <code>authorize_admin</code> could do</p>\n\n<pre><code>check_login! || return\n</code></pre>\n\n<p>Alternatively, the <code>performed?</code> method tells you if a render or redirect has occurred so you could do</p>\n\n<pre><code>check_login!\nreturn if performed?\n</code></pre>\n"}], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 38991494, "answer_count": 1, "score": -1, "last_activity_date": 1471421995, "creation_date": 1471419329, "question_id": 38990681, "link": "https://stackoverflow.com/questions/38990681/doublerendererror-in-rails", "title": "DoubleRenderError in rails", "body": "<p>I have a <code>ProjectsController</code> for which all the actions except <code>new</code> and <code>index</code> are restricted to <code>admins</code>. I have added a before_filter in my controller like</p>\n\n<pre><code>before_action :authorize_admin!, except: [:index, :show]\n</code></pre>\n\n<p>and the <code>before_filter</code> looks like this.</p>\n\n<pre><code>def authorize_admin!\n  check_login!\n\n  unless current_user.admin?\n    redirect_to root_path, alert: \"You're not authorized\"\n  end\nend\n</code></pre>\n\n<p><code>check_login!</code> is a method in <code>ApplicationController</code> which redirects to the <code>root_path</code> is the user's not logged in.</p>\n\n<pre><code>def check_login!\n  flash[:alert] =  'You need to sign up or sign in before continuing'\n  redirect_to login_path unless current_user\nend\n</code></pre>\n\n<p><code>current_user</code> is a method which returns a user record if a session for user exists.(Its not relevant to the error)</p>\n\n<p>The problem is when I try to access <code>/projects/4/edit</code> without logging in, I am getting an <code>undefined method</code>admin?' for nil:NilClass<code>error. In the before filter,</code>check_login!<code>is executed first and if the user's not logged in, he should be redirected to the</code>root_path`. This clearly means that even after redirect, the execution is not terminated. </p>\n\n<p>In the web console, I tried to execute <code>check_login!</code> and this time, I got  an <code>AbstractController::DoubleRenderError: Render and/or redirect were called multiple times in this action.</code> error. And it hinted me to use <code>redirect_to(..) and return</code>. </p>\n\n<p>Although I knew it won't work, I tried modifying my <code>check_login?</code> method to </p>\n\n<pre><code>def check_login!\n  redirect_to login_path, alert:\n    'You need to sign up or sign in before continuing' and return unless current_user\nend\n</code></pre>\n\n<p>And I also tried the following after looking at a SO thread.</p>\n\n<pre><code>return redirect_to login_path, alert:\n    'You need to sign up or sign in before continuing` unless current_user\n</code></pre>\n\n<p>I assume that it fails cause it returns to the callee, the <code>authorize_admin!</code> method and again as the current_user is nil, I get the <code>undefined method</code> error. </p>\n\n<p>How can I solve this issue?</p>\n\n<p>Note: I don't want to repeat the <code>check_login!</code> code in <code>authorize_admin!</code> as it violates DRY. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1471417946, "post_id": 38990234, "comment_id": 65332533, "body": "Ruby&#39;s <code>1.8</code> support is deprecated. Anything less then Ruby <code>2.2.2</code> might run into issues on new/updated gems. Try using the older version of the gem... or a newer version of Ruby."}, {"owner": {"reputation": 268, "user_id": 3988503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OYhhS.png?s=128&g=1", "display_name": "ColonelHedgehog", "link": "https://stackoverflow.com/users/3988503/colonelhedgehog"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1471418764, "post_id": 38990234, "comment_id": 65332982, "body": "@Myst: As I said, though, <code>gem instal</code>l inherently just doesn&#39;t work. So that&#39;s an unrelated issue. I did try updating Ruby but that too didn&#39;t work. I got a memory allocation error."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1471419003, "post_id": 38990234, "comment_id": 65333127, "body": "I guess I skipped the <code>gem install [anything]</code> when I noticed the Ruby version. It could be a permission issue. You could probably install a Ruby version manager (<code>rvm</code> or <code>rbenv</code>) which will allow you to install gems only for your own user&#39;s account, circumventing the privilege issues (no root privileges required)... However, installing these might not be easy if your account doesn&#39;t let you install stuff..."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1471419075, "post_id": 38990234, "comment_id": 65333163, "body": "One last thing: This isn&#39;t a Ruby on Rails issue, it&#39;s a Ruby / system issue and your hosting provider should be supporting you on this (and they should have been offering an updated Ruby version too, but it is what it is)."}, {"owner": {"reputation": 268, "user_id": 3988503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OYhhS.png?s=128&g=1", "display_name": "ColonelHedgehog", "link": "https://stackoverflow.com/users/3988503/colonelhedgehog"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1471448898, "post_id": 38990234, "comment_id": 65353945, "body": "@Myst: Thanks. Yeah, I was pretty confused when they told me to go elsewhere, but I&#39;ve updated my ticket so hopefully they&#39;ll recognize the issue. I&#39;ve already tried RVM but it throws an error when I attempt to install a version of Ruby, so I&#39;ll try using rbenv."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1471450101, "post_id": 38990234, "comment_id": 65354675, "body": "sounds about right. I used <code>rbenv</code> myself because of installation issues."}], "owner": {"reputation": 268, "user_id": 3988503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OYhhS.png?s=128&g=1", "display_name": "ColonelHedgehog", "link": "https://stackoverflow.com/users/3988503/colonelhedgehog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471417818, "creation_date": 1471417818, "question_id": 38990234, "link": "https://stackoverflow.com/questions/38990234/permission-error-on-shared-host-for-gem-command", "title": "Permission error on shared host for gem command", "body": "<p>I'm getting an error each time I attempt to use <code>gem install sass</code> (or <code>gem install</code> anything, really).</p>\n\n<pre><code>/usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:91:in `read': Permission denied - /usr/lib/ruby/gems/1.8/specifications/passenger-3.0.18.gemspec (Errno::EACCES)\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:91:in `load_specification'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:153:in `load_gems_in'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:152:in `each'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:152:in `load_gems_in'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:149:in `reverse_each'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:149:in `load_gems_in'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:345:in `refresh!'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:78:in `from_gems_in'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:58:in `from_installed_gems'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:883:in `source_index'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/gem_path_searcher.rb:81:in `init_gemspecs'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/gem_path_searcher.rb:13:in `initialize'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:841:in `new'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:841:in `searcher'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:840:in `synchronize'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:840:in `searcher'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:479:in `find_files'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:983:in `load_plugins'\n    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:1139\n    from /usr/bin/gem:8:in `require'\n    from /usr/bin/gem:8\n</code></pre>\n\n<p>Because this is a shared host, I don't have access to /usr/lib/ruby. I contacted a2hosting but they told me they don't support Ruby on Rails and to post about it here. So I guess that's an indication that there is some way to fix it myself? There is a RubyGems app on the a2hosting CPanel, but it doesn't work either:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Chvzw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Chvzw.png\" alt=\"CPanel doesn&#39;t work when I try to install SASS\"></a></p>\n\n<p>I suspect this is because it just uses the same commands I'm using, and thus throws the same error.</p>\n\n<p>I have installed rvm on the server, however. Perhaps there is a workaround using that?</p>\n"}, {"tags": ["ruby", "ubuntu", "nokogiri"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1471418355, "post_id": 38989907, "comment_id": 65332766, "body": "3Mb doesn&#39;t sound that big. How does it fail?"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1471418953, "post_id": 38989907, "comment_id": 65333096, "body": "@FrederickCheung there are over 3000 records in that xml file but it only saves 27 records out of those in database, even if we consider half of those returned errors there should be a lot more saved. What it does it calls the amazon product advertising api for each of those records. maybe the API limit could be a reason but not too sure."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1471470209, "post_id": 38989907, "comment_id": 65365161, "body": "3MB isn&#39;t big. 3GB would be big. Without code it&#39;s really hard to tell what&#39;s going on, and since it&#39;s on a VPS where the problem occurs but works on Windows, the question doesn&#39;t sound like it&#39;s Ruby or Nokogiri related, but tied to the system, making it sound very much like it&#39;s off-topic for Stack Overflow. <a href=\"https://superuser.com\">Super User</a> might be a better choice."}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471487171, "post_id": 38989907, "comment_id": 65369800, "body": "Hello @theTinMan thanks. I figured out it was due to amazon posing API call limits so i just used a 1 second sleep on each iteration and it seems to be working now. It was working on my local PC because the speed isn&#39;t as fast as the server&#39;s so the requests to amazon api were made at a slower pace ."}], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1471419068, "post_id": 38990442, "comment_id": 65333157, "body": "thanks for the reply. I agree but only the admin ie myself is the one who runs that script maybe like once a day. I had tried using another gem called Ox for parsing but it seemed a bit harder to use so eventually went with Nokogiri. Where should i check the log files btw? Could you point out where they are saved in Ubuntu(I am new to linux and primarily use windows)? This has nothing to do with the server otherwise I could have checked the server logs."}, {"owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 1, "creation_date": 1471419237, "post_id": 38990442, "comment_id": 65333252, "body": "ok, but you should have access to logs anyway, otherwise one day you encounter a problem you won&#39;t be able to resolve without them.  even if don&#39;t have access to them you should ask whether he may sync them to machine you have access to"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1471419324, "post_id": 38990442, "comment_id": 65333299, "body": "actually i myself built it :) but am new to the ubuntu and linux stuff, but had to use it on the server. I will try to set logs for those thanks."}, {"owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 1, "creation_date": 1471419549, "post_id": 38990442, "comment_id": 65333424, "body": "yes, Ox is a bit harder but the fastest one.   logs - it depends on how the application is rub. If it&#39;s Rails then by default logs are written to withing application log folder. If you have normal ruby program (you run it via command like <code>ruby program.rb</code>), then everything (puts, etc) goes to standard output. Read more about standard output/input - it applies to all linux processes, not only the ruby ones."}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1471418485, "creation_date": 1471418485, "answer_id": 38990442, "question_id": 38989907, "link": "https://stackoverflow.com/questions/38989907/parsing-huge-xml-in-ruby-doesnt-process-full-file-in-server/38990442#38990442", "title": "Parsing huge XML in Ruby doesn&#39;t process full file in server", "body": "<p>Noone will tell you exactly why it happens without logs. Did you browse them?</p>\n\n<p>As far as VPS and xml are concerned - you may exceed the maximum available memory on the server (what will happen quickly if you have multiple clients, all of them loading xmls). I'm not sure how you are using Nokogiri, but my advise is to check whether you're using SAX parser (<a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/SAX/Parser\" rel=\"nofollow\">http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/SAX/Parser</a>)</p>\n\n<p>Eventually you will use less resources (memory, execution time) but there is a drawback - SAX parsers are much harder to write, especially when xml structure is  complicated, but it may be wort (look for benchmarks \"Nokogiri DOM vs SAX\")</p>\n"}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471470101, "creation_date": 1471416604, "last_edit_date": 1471470101, "question_id": 38989907, "link": "https://stackoverflow.com/questions/38989907/parsing-huge-xml-in-ruby-doesnt-process-full-file-in-server", "title": "Parsing huge XML in Ruby doesn&#39;t process full file in server", "body": "<p>I need to parse a 3MB XML file using Nokogiri and Httparty to parse content from the links in the XML.</p>\n\n<p>It works fine when I do it on my Windows 7 PC but when I run the same script in a VPS, it doesn't seem to process it fully.  </p>\n\n<p>Is it because of the limit on the maximum execution time of a Ruby script on the server? If so, how can I increase that in Ubuntu?</p>\n"}, {"tags": ["ruby", "filesystems", "haml", "guard"], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1471544100, "creation_date": 1471544100, "answer_id": 39024924, "question_id": 38989394, "link": "https://stackoverflow.com/questions/38989394/render-a-relative-haml-using-guard/39024924#39024924", "title": "Render a relative haml using guard", "body": "<p>This is caused by how Guard::Haml handles the templates. <a href=\"https://github.com/guard/guard-haml/blob/v1.1.2/lib/guard/haml.rb#L61-L62\" rel=\"nofollow\">It (currently) does this</a>:</p>\n\n<pre><code>content = File.new(file).read\nengine  = ::Haml::Engine.new(content, (options[:haml_options] || {}))\n</code></pre>\n\n<p>It reads the template into a string, and then passes that string to Haml. This means that when Haml sees the string, it has no way of knowing what file it should be associated with.</p>\n\n<p>Haml has a <a href=\"http://haml.info/docs/yardoc/Haml/Options.html#filename-instance_method\" rel=\"nofollow\"><code>:filename</code> option</a> that allows you to pass the filename to Haml. This allows <code>__FILE__</code> and <code>__dir__</code> to work correctly, but Guard::Haml doesn\u2019t use it at the moment.</p>\n\n<p>I\u2019ve created a <a href=\"https://github.com/guard/guard-haml/pull/31\" rel=\"nofollow\">pull request that adds this feature</a>. If you want to try out that code before it is merged and a new release is made (assuming it is accepted), you could use the branch on my repo. To do that, change your <code>Gemfile</code> to:</p>\n\n<pre><code>gem 'guard-haml', :github =&gt; \"mattwildig/guard-haml\", :branch =&gt; 'filename_option'\n</code></pre>\n\n<p>(I think it\u2019s also worth pointing out that this setup won\u2019t automatically rebuild the \u201cparent\u201d file if one of the \u201cchild\u201d templates is changed).</p>\n"}], "owner": {"reputation": 1862, "user_id": 4658000, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Sw3Y.jpg?s=128&g=1", "display_name": "Le\u015bny Rumcajs", "link": "https://stackoverflow.com/users/4658000/le%c5%9bny-rumcajs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 39024924, "answer_count": 1, "score": 0, "last_activity_date": 1471544100, "creation_date": 1471414898, "last_edit_date": 1471501247, "question_id": 38989394, "link": "https://stackoverflow.com/questions/38989394/render-a-relative-haml-using-guard", "title": "Render a relative haml using guard", "body": "<p>My file structure looks like this:</p>\n\n<pre><code>Guardfile\n\nresolution1/menu/page1.haml\n\nresolution1/menu/some_partial.haml\n\nresolution2/...\n\nresolution3/...\n</code></pre>\n\n<p>Now, inside page1.haml I have a line which would render a partial haml inside it (I am not using Rails)</p>\n\n<pre><code>= Haml::Engine.new(File.read(\"./some_partial.haml\")).render\n</code></pre>\n\n<p>It fails with:</p>\n\n<pre><code>Error: No such file or directory @ rb_sysopen - ./some_partial.haml\n</code></pre>\n\n<p>because my working directory is where the Guardfile lies. A workaround that SHOULD work was this:</p>\n\n<pre><code>= Haml::Engine.new(File.read(\"#{__dir__}/some_partial.haml\")).render\n</code></pre>\n\n<p>or if I'm feeling desperate, even this (to get file absolute path)</p>\n\n<pre><code>= Haml::Engine.new(File.read(\"#{File.expand_path(File.dirname(__FILE__))}/some_partial.haml\")).render\n</code></pre>\n\n<p>However, this isn't working as I wanted it to. The</p>\n\n<pre><code>File.expand_path(File.dirname(__FILE__))\n</code></pre>\n\n<p>instead of giving my the absolute path to file (with no regard to working directory), it just gives me absolute path to my working directory.</p>\n\n<p>I can, of course, put a path that would work, but I don't want to include my target resolution in every render.</p>\n\n<p>My <em>Guardfile</em></p>\n\n<pre><code>guard :haml, output: '../package/www' do\n  watch(/^.+(\\.haml)$/)\nend\n</code></pre>\n\n<p>I am using Windows, damn my life. Any suggestions? I simply need to get a file from a file within the same directory.</p>\n"}, {"tags": ["ruby", "cocoapods"], "comments": [{"owner": {"reputation": 3883, "user_id": 4003548, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/76e2511a12c9031484459fda9eae92dc?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav", "link": "https://stackoverflow.com/users/4003548/vaibhav"}, "edited": false, "score": 0, "creation_date": 1471414518, "post_id": 38989057, "comment_id": 65330771, "body": "i think this must be in a syntax to include cocoa pods to any project ..or <a href=\"http://stackoverflow.com/a/16601500/4003548\">have a look</a>"}], "answers": [{"tags": [], "owner": {"reputation": 117929, "user_id": 669586, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/wxf3D.png?s=128&g=1", "display_name": "Sulthan", "link": "https://stackoverflow.com/users/669586/sulthan"}, "is_accepted": false, "score": 0, "last_activity_date": 1471414048, "last_edit_date": 1495535358, "creation_date": 1471413720, "answer_id": 38989105, "question_id": 38989057, "link": "https://stackoverflow.com/questions/38989057/what-is-the-difference-between-single-quote-and-double-quote-in-coco/38989105#38989105", "title": "what is the difference between single quote ( &#39; ) and double quote ( &quot; ) in cocoapod?", "body": "<p>I believe that a podfile is essentially a Ruby source code file, therefore what applies is the difference between <code>'</code> and <code>\"</code> and Ruby:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6395288/double-vs-single-quotes\">Double vs single quotes</a></p>\n\n<p>(single quotes make the string to be interpreted literally, without string interpolation and ignoring character escaping).</p>\n\n<p>Taking an example from <a href=\"https://guides.cocoapods.org/syntax/podfile.html\" rel=\"nofollow noreferrer\">CocoaPods Podfile Documentation</a>:</p>\n\n<pre><code>post_install do |installer|\n  installer.pods_project.targets.each do |target|\n     puts \"#{target.name}\"\n  end\nend\n</code></pre>\n\n<p>The string interpolation <code>#{...}</code> wouldn't be possible with single quotes.</p>\n\n<p>The question what you should use is probably subjective and depends on the usage.</p>\n"}, {"comments": [{"owner": {"reputation": 6130, "user_id": 706020, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fBRG0.png?s=128&g=1", "display_name": "CodeChanger", "link": "https://stackoverflow.com/users/706020/codechanger"}, "edited": false, "score": 0, "creation_date": 1471417020, "post_id": 38989189, "comment_id": 65332030, "body": "what i understand by your clarification that its accept space if we put &quot;&quot; and &#39; not accept any space in string right ?"}, {"owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "reply_to_user": {"reputation": 6130, "user_id": 706020, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fBRG0.png?s=128&g=1", "display_name": "CodeChanger", "link": "https://stackoverflow.com/users/706020/codechanger"}, "edited": false, "score": 0, "creation_date": 1471417329, "post_id": 38989189, "comment_id": 65332183, "body": "no. check my answer once i have updated. Single quotes are just used to specify/define strings. But Double Quotes you can use to specify/define strings and string interpolation."}, {"owner": {"reputation": 6130, "user_id": 706020, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fBRG0.png?s=128&g=1", "display_name": "CodeChanger", "link": "https://stackoverflow.com/users/706020/codechanger"}, "edited": false, "score": 0, "creation_date": 1471417777, "post_id": 38989189, "comment_id": 65332421, "body": "yes, you are right but in iOS we are not using any string interpolation in <code>cococapod</code> so in that case both are same ?"}, {"owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "reply_to_user": {"reputation": 6130, "user_id": 706020, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fBRG0.png?s=128&g=1", "display_name": "CodeChanger", "link": "https://stackoverflow.com/users/706020/codechanger"}, "edited": false, "score": 0, "creation_date": 1471418233, "post_id": 38989189, "comment_id": 65332694, "body": "Check it once, in ruby we use to use for string interpolation. Since <b>CocoaPods</b> are written in <b>Ruby</b> i think it will work."}, {"owner": {"reputation": 6130, "user_id": 706020, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fBRG0.png?s=128&g=1", "display_name": "CodeChanger", "link": "https://stackoverflow.com/users/706020/codechanger"}, "edited": false, "score": 0, "creation_date": 1471418424, "post_id": 38989189, "comment_id": 65332799, "body": "Ok Thank for your detail description on this."}], "tags": [], "owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "is_accepted": true, "score": 3, "last_activity_date": 1471417787, "last_edit_date": 1471417787, "creation_date": 1471414023, "answer_id": 38989189, "question_id": 38989057, "link": "https://stackoverflow.com/questions/38989057/what-is-the-difference-between-single-quote-and-double-quote-in-coco/38989189#38989189", "title": "what is the difference between single quote ( &#39; ) and double quote ( &quot; ) in cocoapod?", "body": "<p>Single quotes are used for just strings.</p>\n\n<p>Where as Double quotes are used for both strings and string interpolation.</p>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>name = 'User Name' //User Name\n\nwelcome_note_using_sigle_qoute = 'Welcome #{name}' //Welcome /#{name}\nwelcome_note_using_double_qoute = \"Welcome #{name}\"  //Welcome User Name\n</code></pre>\n"}], "owner": {"reputation": 6130, "user_id": 706020, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fBRG0.png?s=128&g=1", "display_name": "CodeChanger", "link": "https://stackoverflow.com/users/706020/codechanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 38989189, "answer_count": 2, "score": 1, "last_activity_date": 1471417787, "creation_date": 1471413502, "last_edit_date": 1471413521, "question_id": 38989057, "link": "https://stackoverflow.com/questions/38989057/what-is-the-difference-between-single-quote-and-double-quote-in-coco", "title": "what is the difference between single quote ( &#39; ) and double quote ( &quot; ) in cocoapod?", "body": "<p>As i am very familiar with <code>Cocoapod</code> library to integrate 3rd party <code>iOS</code> library in our project with very easy steps and versioning also in managed way and very easy to upgrade version of any 3rd party library.</p>\n\n<p>Generally we are using below <code>command</code> for any 3rd party library in <code>POD</code> file to get in our project.</p>\n\n<pre><code>POD '&lt;Library Name&gt;'\n</code></pre>\n\n<p>One more we are using was </p>\n\n<pre><code>POD \"&lt;Library Name&gt;\"\n</code></pre>\n\n<p>so may i know what is the logical difference between both of this command ?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3129, "user_id": 6656050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMh8v.jpg?s=128&g=1", "display_name": "Jeremy Kahan", "link": "https://stackoverflow.com/users/6656050/jeremy-kahan"}, "edited": false, "score": 1, "creation_date": 1471413501, "post_id": 38988946, "comment_id": 65330330, "body": "how is it supposed to know you omitted b and d as opposed to c and d, say?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1471414234, "post_id": 38988946, "comment_id": 65330624, "body": "Have you considered using keywords arguments: <a href=\"https://robots.thoughtbot.com/ruby-2-keyword-arguments\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/ruby-2-keyword-arguments</a> (otherwise no, there is no way)"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1471420296, "post_id": 38989247, "comment_id": 65333891, "body": "your second suggestion is deprecated by keyword arguments."}, {"owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1471420885, "post_id": 38989247, "comment_id": 65334257, "body": "you are right - same principle but more modern approach"}], "tags": [], "owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "is_accepted": false, "score": 1, "last_activity_date": 1471420267, "last_edit_date": 1471420267, "creation_date": 1471414313, "answer_id": 38989247, "question_id": 38988946, "link": "https://stackoverflow.com/questions/38988946/ruby-call-optional-parameter/38989247#38989247", "title": "ruby call optional parameter", "body": "<p>The parameters are taken in order so when you have this method:</p>\n\n<pre><code>def method(a=1, b=2, c=3, d=4)\n  puts a\n  puts b\n  puts c\n  puts d\nend\n</code></pre>\n\n<p>The call:</p>\n\n<pre><code>method(5,7)\n</code></pre>\n\n<p>means: a = 5, b = 7, c = 3 (default value), d = 4 (default value)</p>\n\n<p>There is no way to specify a parameter without specifying all the others.</p>\n\n<p>If you want to be able to specify the parameters, an alternative is to use an hash for all your params:</p>\n\n<pre><code>def method(options)\n  a = options[:a] || 1\n  b = options[:b] || 2\n  c = options[:c] || 3\n  d = options[:d] || 4\nend\n</code></pre>\n\n<p>You can then make calls such as:</p>\n\n<pre><code>method(d: 5, c: 7)\n\n=&gt; 1\n=&gt; 2\n=&gt; 7\n=&gt; 5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6015, "user_id": 390808, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a0f6edad668a0b63171eeb2a8aea39cd?s=128&d=identicon&r=PG", "display_name": "Sven Koschnicke", "link": "https://stackoverflow.com/users/390808/sven-koschnicke"}, "edited": false, "score": 0, "creation_date": 1471418665, "post_id": 38989249, "comment_id": 65332930, "body": "What is the benefit over using keyword arguments here? Your code seems to do the same and more complex to me."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 6015, "user_id": 390808, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a0f6edad668a0b63171eeb2a8aea39cd?s=128&d=identicon&r=PG", "display_name": "Sven Koschnicke", "link": "https://stackoverflow.com/users/390808/sven-koschnicke"}, "edited": false, "score": 0, "creation_date": 1471419755, "post_id": 38989249, "comment_id": 65333545, "body": "For one, it works in Ruby 1.9. Two, it is still commonly used pattern in popular open source libraries for compatibility and the OP would benefit learning this syntax."}, {"owner": {"reputation": 6015, "user_id": 390808, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a0f6edad668a0b63171eeb2a8aea39cd?s=128&d=identicon&r=PG", "display_name": "Sven Koschnicke", "link": "https://stackoverflow.com/users/390808/sven-koschnicke"}, "edited": false, "score": 0, "creation_date": 1471419964, "post_id": 38989249, "comment_id": 65333657, "body": "Okay, I think it would improve your answer if you mention that."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1471414321, "creation_date": 1471414321, "answer_id": 38989249, "question_id": 38988946, "link": "https://stackoverflow.com/questions/38988946/ruby-call-optional-parameter/38989249#38989249", "title": "ruby call optional parameter", "body": "<p>One of the popular options would be to redefine your method with so called \"named parameters\". Well, they are not really named parameters, they're just a hash params with some syntactic sugar.</p>\n\n<pre><code>def method(args)\n  args = {a: 1, b: 2, c: 3, d: 4}.merge(args)\n  args.each { |key, val| puts val }\nend\n\nmethod(c: 30, a: 10)\n\n&gt; 10\n&gt; 2\n&gt; 30\n&gt; 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6015, "user_id": 390808, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a0f6edad668a0b63171eeb2a8aea39cd?s=128&d=identicon&r=PG", "display_name": "Sven Koschnicke", "link": "https://stackoverflow.com/users/390808/sven-koschnicke"}, "is_accepted": false, "score": 1, "last_activity_date": 1506446237, "last_edit_date": 1506446237, "creation_date": 1471418506, "answer_id": 38990448, "question_id": 38988946, "link": "https://stackoverflow.com/questions/38988946/ruby-call-optional-parameter/38990448#38990448", "title": "ruby call optional parameter", "body": "<p>As Taryn East mentioned in his comment, since Ruby 2.0 you can use keyword arguments to achieve what you want to do. You just have to define your method a little bit different:</p>\n\n<pre><code>def method(a:1, b:2, c:3, d:4)\n  puts a\n  puts b\n  puts c\n  puts d\nend\n</code></pre>\n\n<p>Then, you can call it specifying the parameters you want to set by name, leaving the others to their default value:</p>\n\n<pre><code>method(a:5, c:7)\n=&gt; 5\n=&gt; 2\n=&gt; 7\n=&gt; 4\n</code></pre>\n\n<p>As another benefit, it improves readability and doesn't leave the reader guessing about the meaning of the passed values.</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.0.0/doc/syntax/calling_methods_rdoc.html#label-Keyword+Arguments\" rel=\"nofollow noreferrer\">Ruby 2.0 documentation for keyword arguments</a></li>\n</ul>\n"}], "owner": {"reputation": 110, "user_id": 6433476, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f5fa9a1faa6c6886c21801d77d666ec7?s=128&d=identicon&r=PG&f=1", "display_name": "on-the-way", "link": "https://stackoverflow.com/users/6433476/on-the-way"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1506446237, "creation_date": 1471412889, "last_edit_date": 1471416870, "question_id": 38988946, "link": "https://stackoverflow.com/questions/38988946/ruby-call-optional-parameter", "title": "ruby call optional parameter", "body": "<p>I have the following method:</p>\n\n<pre><code>def method(a=1, b=2, c=3, d=4)\n  puts a\n  puts b\n  puts c\n  puts d\nend\n</code></pre>\n\n<p>Is there a way to output like this without checking the variables nullity? When I call the method like:</p>\n\n<pre><code>method(5,7)\n=&gt; 5\n=&gt; 2\n=&gt; 7\n=&gt; 4\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 1, "user_id": 6724676, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153847720048861/picture?type=large", "display_name": "Atish Dharvesh", "link": "https://stackoverflow.com/users/6724676/atish-dharvesh"}, "edited": false, "score": 0, "creation_date": 1471412999, "post_id": 38988649, "comment_id": 65330134, "body": "my array should look like this  send_event(&#39;mychart&#39;, points: [       [&#39;Week&#39;, &#39;MTV&#39;],       [&#39;29&#39;,  1000],       [&#39;30&#39;,  1170],       [&#39;31&#39;,  660],       [&#39;32&#39;,  1030]   ])  Where 1st array should contain the header"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1471415195, "post_id": 38988649, "comment_id": 65331080, "body": "This <code>no implicit conversion of String into Integer</code> error usually appear when you try to retrieve an element from an array using an non-integer index. Take a look at this <a href=\"http://rubyofftherails.blogspot.com/2016/06/implicit-and-bad-type-conversion-example.html\" rel=\"nofollow noreferrer\">rubyofftherails.blogspot.com/2016/06/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 6724676, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153847720048861/picture?type=large", "display_name": "Atish Dharvesh", "link": "https://stackoverflow.com/users/6724676/atish-dharvesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1471418195, "creation_date": 1471411348, "last_edit_date": 1471418195, "question_id": 38988649, "link": "https://stackoverflow.com/questions/38988649/ruby-scripting-mysql-array-2d-for-dashing-widgets", "title": "Ruby Scripting Mysql array 2D for dashing Widgets", "body": "<p>I've been struggling with this for almost two weeks now and I hope someone may help me out on how to convert my sql query from mysql db into 2D array for sending into the google charts widgets in dashing please?</p>\n\n<p>My actual .rb script (Job) does this ></p>\n\n<pre><code>require 'mysql2'\n\nSCHEDULER.every '1m', :first_in =&gt; 0 do |job|\n  points = []\n\n  # Mysql connection\n  db = Mysql2::Client.new(:host =&gt; \"192.168.xx.xx\", :username =&gt; \"xxxx\", :password =&gt; \"xxxxxx\", :port =&gt; 3306, :database =&gt; \"xxxxxx\" )\n\n  # Mysql query\n  sql = \"SELECT * FROM Table\"\n  ###Field 1 is Integer\n  ###Field 2 is Decimal(65,30)\n\n  rs = db.query(sql, :as =&gt; :array)\n\n  subpoints = []\n\n  subpoints.push('Week')\n\n  subpoints.push('MTV')\n\n  points.push(subpoints)\n\n  rs.each do |row|\n\n    subpoints = []\n\n    subpoints.push(row['Field 1'])\n\n    subpoints.push(row['Field 2'])\n\n    points.push(subpoints)\n\n  end\n\n  ###Update the List widget\n  send_event('mychart01', points: points)\n\n  Mysql2.close\n\nend\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>./mysql_chart_01.rb:23:in []': no implicit conversion of String into Integer (TypeError) from ./mysql_chart_01.rb:23:inblock in '\nfrom ./mysql_chart_01.rb:21:in each' from ./mysql_chart_01.rb:21:in'\n</code></pre>\n\n<p>Actually I'm not even sure to be able to make it work this way. Does anyone has a better suggestion or a Ruby script for Google charts?</p>\n\n<p>Best regards.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2478, "user_id": 2791480, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/lgiv3.jpg?s=128&g=1", "display_name": "Mohamed Yakout", "link": "https://stackoverflow.com/users/2791480/mohamed-yakout"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1471411153, "post_id": 38988583, "comment_id": 65329487, "body": "You should wait about 10 mins :D ... Thank you :)"}], "tags": [], "owner": {"reputation": 2478, "user_id": 2791480, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/lgiv3.jpg?s=128&g=1", "display_name": "Mohamed Yakout", "link": "https://stackoverflow.com/users/2791480/mohamed-yakout"}, "is_accepted": false, "score": 2, "last_activity_date": 1471410981, "creation_date": 1471410981, "answer_id": 38988583, "question_id": 38988537, "link": "https://stackoverflow.com/questions/38988537/how-to-get-all-values-of-an-object-in-activerecord-in-rails/38988583#38988583", "title": "How to get all values of an object in ActiveRecord in Rails?", "body": "<p>Just you can convert activerecord to Hash then get the values as the following: </p>\n\n<pre><code>User.first.as_json.values\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1471416146, "post_id": 38988802, "comment_id": 65331558, "body": "I deleted my answer in favour of yours. But I am not sure if the <code>values</code> version is helpful, because the order of the attributes is not guaranteed in the <code>attributes</code> hash. Without a fixed, deterministic order in the hash you cannot be sure about the order of the values in the array. That would make it hard to actually read attributes from that array later on."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1471444227, "post_id": 38988802, "comment_id": 65350672, "body": "@spickermann In a way it is deterministic. Since ruby 1.9 values are returned in the same order as they have been added to the hash. I think it&#39;s relativ save (but not guaranteed) to asume that within Rails every attribute is added in the same order to the attributes Hash every time."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1471625942, "post_id": 38988802, "comment_id": 65438157, "body": "That depends probably on the database engine unless Rails orders the column names before adding the values to the attributes hash. Since MySQL for example doesn&#39;t guarantee any order (unless you specify an order ourself) I would doubt that the result is deterministic."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 11, "last_activity_date": 1471415577, "last_edit_date": 1471415577, "creation_date": 1471412169, "answer_id": 38988802, "question_id": 38988537, "link": "https://stackoverflow.com/questions/38988537/how-to-get-all-values-of-an-object-in-activerecord-in-rails/38988802#38988802", "title": "How to get all values of an object in ActiveRecord in Rails?", "body": "<p>You can also use <code>attributes</code> method to get it</p>\n\n<pre><code>User.first.attributes.values\n</code></pre>\n\n<ol>\n<li><p><code>User.first.attributes</code> will return you hash representation of <code>user</code> object</p>\n\n<pre><code>User.first.attributes\n\n{ \n  \"id\" =&gt; 1,\n  \"email\" =&gt; \"aatir@jpl.com\",\n  \"tel\" =&gt; \"+923223333333\",\n  \"interests\" =&gt; \"Hi, I'm interested in coding.\",\n  \"admin_status\" =&gt; \"download\",\n  \"created_at\" =&gt; \"2016-08-16 22:38:05\",\n  \"updated_at\" =&gt; \"2016-08-16 22:38:05\",\n  \"city_id\" =&gt; 2,\n  \"profile_image_file_name\" =&gt; \"Screen_Shot_2016-07-02_at_4.41.32_PM.png\",\n  \"profile_image_content_type\" =&gt; \"image/png\",\n  \"profile_image_file_size\" =&gt; 324372,\n  \"profile_image_updated_at\" =&gt; \"2016-08-16 22:38:04\"\n}\n</code></pre></li>\n<li><p><code>values</code> will return you the values in the <code>Array</code></p>\n\n<pre><code>User.first.attributes.values\n\n[1, \"aatir@jpl.com\", \"+923223333333\", \"Hi, I'm interested in coding.\", \"download\", \"2016-08-16 22:38:05\", \"2016-08-16 22:38:05\", 2, \"Screen_Shot_2016-07-02_at_4.41.32_PM.png\", \"image/png\", 324372, \"2016-08-16 22:38:04\"]\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": 1, "last_activity_date": 1485110246, "last_edit_date": 1485110246, "creation_date": 1471413806, "answer_id": 38989130, "question_id": 38988537, "link": "https://stackoverflow.com/questions/38988537/how-to-get-all-values-of-an-object-in-activerecord-in-rails/38989130#38989130", "title": "How to get all values of an object in ActiveRecord in Rails?", "body": "<pre><code>Object.first.attributes.values\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": true, "score": 3, "last_activity_date": 1561098057, "last_edit_date": 1561098057, "creation_date": 1471462576, "answer_id": 39004912, "question_id": 38988537, "link": "https://stackoverflow.com/questions/38988537/how-to-get-all-values-of-an-object-in-activerecord-in-rails/39004912#39004912", "title": "How to get all values of an object in ActiveRecord in Rails?", "body": "<p>I'm extending @deepak's answer to assure that the order remains same as it is for <code>column_names</code>, and this is how, I achieved it:</p>\n\n<pre><code>User.first.attributes.values_at *User.column_names\n</code></pre>\n\n<p>To get just the values, irrespective of the order:</p>\n\n<pre><code>User.first.attributes.values \n</code></pre>\n"}], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12362, "favorite_count": 1, "accepted_answer_id": 39004912, "answer_count": 4, "score": 9, "last_activity_date": 1590189089, "creation_date": 1471410706, "last_edit_date": 1590189089, "question_id": 38988537, "link": "https://stackoverflow.com/questions/38988537/how-to-get-all-values-of-an-object-in-activerecord-in-rails", "title": "How to get all values of an object in ActiveRecord in Rails?", "body": "<p>One can use <code>column_names</code> to get all the columns of a table, but what if one would like to know all the values of a particular instance in ActiveRecord.</p>\n\n<p>For example,</p>\n\n<pre><code>User.column_names\n=&gt; [\"id\", \"email\", \"encrypted_password\", \"reset_password_token\", \"reset_password_sent_at\", \"remember_created_at\", \"sign_in_count\", \"current_sign_in_at\", \"last_sign_in_at\", \"current_sign_in_ip\", \"last_sign_in_ip\", \"tel\", \"interests\", \"admin_status\", \"created_at\", \"updated_at\", \"city_id\", \"profile_image_file_name\", \"profile_image_content_type\", \"profile_image_file_size\", \"profile_image_updated_at\"]\n\nUser.first\n=&gt; #&lt;User id: 1, email: \"aatir@jpl.com\", tel: \"+923223333333\", interests: \"Hi, I'm interested in coding.\", admin_status: \"download\", created_at: \"2016-08-16 22:38:05\", updated_at: \"2016-08-16 22:38:05\", city_id: 2, profile_image_file_name: \"Screen_Shot_2016-07-02_at_4.41.32_PM.png\", profile_image_content_type: \"image/png\", profile_image_file_size: 324372, profile_image_updated_at: \"2016-08-16 22:38:04\"&gt;\n</code></pre>\n\n<p>When <code>first</code> method is called, it returns key-value pairs. What I want is to have only values, is there a single method in ActiveRecord that can do this for us?</p>\n"}, {"tags": ["ruby", "postgresql", "associations", "rails-activerecord", "ruby-on-rails-4.2"], "answers": [{"tags": [], "owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1471422713, "creation_date": 1471422713, "answer_id": 38991725, "question_id": 38988438, "link": "https://stackoverflow.com/questions/38988438/sort-based-on-associated-points-in-rails4/38991725#38991725", "title": "Sort based on associated points in rails4", "body": "<p>Cause not all of your posts have votes then after join some records will have <code>votes.point</code> value as a <code>NULL</code>. <code>NULL</code>s are specific values which should be handled separately and may cause issues with descending ordering, because they are sorted last in default ascending order in PostgreSql. In order to have records with <code>NULL</code> votes properly sorted I would suggest to coerce <code>NULL</code> values to 0.</p>\n\n<pre><code>SUM(COALESCE(votes.point, 0))\n</code></pre>\n\n<p>After that all posts which don't have votes will have <code>total_point</code> value equal to 0 which is a regular number that can be ordered as you want.</p>\n\n<p>Alternatively, PostgreSql has additional syntax for specifying how <code>NULL</code> values should be sorted with <code>ORDER BY</code> clause.\n<a href=\"https://www.postgresql.org/docs/9.0/static/sql-select.html#SQL-ORDERBY\" rel=\"nofollow\">https://www.postgresql.org/docs/9.0/static/sql-select.html#SQL-ORDERBY</a>\nExample:</p>\n\n<pre><code>ORDER BY somevalue DESC NULLS LAST\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 310812, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ac6ede293e13f34f749271f026cbcd?s=128&d=identicon&r=PG", "display_name": "jissy", "link": "https://stackoverflow.com/users/310812/jissy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "accepted_answer_id": 38991725, "answer_count": 1, "score": 2, "last_activity_date": 1471422713, "creation_date": 1471410066, "question_id": 38988438, "link": "https://stackoverflow.com/questions/38988438/sort-based-on-associated-points-in-rails4", "title": "Sort based on associated points in rails4", "body": "<p><strong>Post model</strong></p>\n\n<pre><code>has_many :votes\n</code></pre>\n\n<p><strong>Vote model</strong></p>\n\n<pre><code>belongs-to :post\n</code></pre>\n\n<p>I need to fetch all posts from posts table and to display. But the entries should be sorted in ASC/DESC(params[:order]) of its votes. If all posts have Vote table entry then below code works perfectly.</p>\n\n<p>I have a query as below:</p>\n\n<pre><code>@posts = Post.joins('LEFT OUTER JOIN votes ON votes.post_id = posts.id').select('posts.*, SUM(votes.point) AS total_point').group('posts.id').order(\"total_point #{params[:order]}\")\n</code></pre>\n\n<p>But, if any post have no votes table entry, then the non-voted posts makes the list sorting appear wrong. If no votes to some posts, and if the sort order is ASC ,then need to appear the non-voted posts first in the list , and \nif the sort order is DESC ,then need to appear the non-voted posts last in the list. Please help.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471410082, "post_id": 38988380, "comment_id": 65329124, "body": "sorry maybe wasn&#39;t clear, the array will contain strings ex: derp01,derp02,etc- I&#39;d need so if condition for this example to work (after it gets past 9"}, {"owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "reply_to_user": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471410251, "post_id": 38988380, "comment_id": 65329187, "body": "<code>(1..20).map { |i| prefix = i &gt; 9 ? &#39;&#39; : &quot;0&quot;; &quot;derp#{prefix}#{i}&quot; }</code>"}, {"owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "reply_to_user": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471410317, "post_id": 38988380, "comment_id": 65329207, "body": "@Aetherus provided a nicer approach with rjust - I would recommend using it"}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1471409819, "creation_date": 1471409819, "answer_id": 38988380, "question_id": 38988297, "link": "https://stackoverflow.com/questions/38988297/how-to-create-array-of-strings-with-numbers-prefixed-with-zeros-derp01-derp02/38988380#38988380", "title": "How to create array of strings with numbers prefixed with zeros? (derp01,derp02,derp03)", "body": "<p>you may try this:</p>\n\n<p><code>(1..20).map { |i| i &gt; 9 ? i.to_s : \"0#{i}\" }</code></p>\n"}, {"comments": [{"owner": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471410447, "post_id": 38988409, "comment_id": 65329242, "body": "damn thats awesome, what is the percent sign doing(how it is not padding zeros after it gets to 9)? what is that called in ruby so i can google it?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 1, "creation_date": 1471410587, "post_id": 38988409, "comment_id": 65329289, "body": "This is equivalent to <code>String.format(&quot;derp%02d&quot;, i)</code> in Java, or <code>sprintf(&quot;derp%02d&quot;, i)</code> in C."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 1, "creation_date": 1471410641, "post_id": 38988409, "comment_id": 65329312, "body": "For ruby documentation, see <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-25\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471410715, "post_id": 38988409, "comment_id": 65329341, "body": "hmm I tried doing this with a var instead and didn&#39;t work. EX: <code>var = 10; var.map{...</code>"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471411005, "post_id": 38988409, "comment_id": 65329433, "body": "Added some explanation about the <code>%02d</code> part."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471411622, "post_id": 38988409, "comment_id": 65329638, "body": "@red888 The method <code>map</code> comes from the module <code>Enumerable</code>. A <code>Fixnum</code> (10) certainly is not an <code>Enumerable</code>."}, {"owner": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "edited": false, "score": 0, "creation_date": 1471412571, "post_id": 38988409, "comment_id": 65329957, "body": "Ah var.times.map{} does waht i want"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 5, "last_activity_date": 1471410930, "last_edit_date": 1471410930, "creation_date": 1471409962, "answer_id": 38988409, "question_id": 38988297, "link": "https://stackoverflow.com/questions/38988297/how-to-create-array-of-strings-with-numbers-prefixed-with-zeros-derp01-derp02/38988409#38988409", "title": "How to create array of strings with numbers prefixed with zeros? (derp01,derp02,derp03)", "body": "<pre><code>(1..20).map{|i| 'derp' + i.to_s.rjust(2, '0')}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(1..20).map{|i| 'derp%02d' % i}\n</code></pre>\n\n<p><code>%02d</code> is a placeholder, which should be replaced with a 2-digit number, prefixed by <code>0</code> if it is not long enough. </p>\n"}, {"tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 0, "last_activity_date": 1471419871, "creation_date": 1471419871, "answer_id": 38990847, "question_id": 38988297, "link": "https://stackoverflow.com/questions/38988297/how-to-create-array-of-strings-with-numbers-prefixed-with-zeros-derp01-derp02/38990847#38990847", "title": "How to create array of strings with numbers prefixed with zeros? (derp01,derp02,derp03)", "body": "<p>How about this?</p>\n\n<pre><code>collection    = []\ncollection[0] = 'derp01'\n\n19.times {|index| collection.push(collection.last.next)}\n\n# Output\n =&gt; collection\n =&gt; [\"derp01\", \"derp02\", \"derp03\", \"derp04\", \"derp05\", \"derp06\", \"derp07\", \"derp08\", \"derp09\", \"derp10\", \"derp11\", \"derp12\", \"derp13\", \"derp14\", \"derp15\", \"derp16\", \"derp17\", \"derp18\", \"derp19\", \"derp20\"]\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.2.0/Enumerator.html#method-i-next\" rel=\"nofollow\">this link</a> for <code>next</code> in <code>Enumerable</code> Module</p>\n"}], "owner": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 38988409, "answer_count": 3, "score": 0, "last_activity_date": 1471419871, "creation_date": 1471409288, "last_edit_date": 1471410032, "question_id": 38988297, "link": "https://stackoverflow.com/questions/38988297/how-to-create-array-of-strings-with-numbers-prefixed-with-zeros-derp01-derp02", "title": "How to create array of strings with numbers prefixed with zeros? (derp01,derp02,derp03)", "body": "<p>Is there a more ruby way I can do this (less lines and easy to read):</p>\n\n<pre><code>derpNum = 20\nderpNames = Array.new\nderpNum.times do |derp|\n  if derp &lt; 10\n    derpNames &lt;&lt; \"derp0#{derp}\"\n  else\n    derpNames &lt;&lt; \"derp#{derp}\"\n  end\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "csv", "join"], "answers": [{"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": true, "score": 1, "last_activity_date": 1471422205, "creation_date": 1471422205, "answer_id": 38991556, "question_id": 38988192, "link": "https://stackoverflow.com/questions/38988192/joining-two-csv-files-in-ruby-by-id-when-their-respective-row-numbers-do-not-ma/38991556#38991556", "title": "Joining two .csv files in Ruby by id when their respective row numbers do not match", "body": "<p>This is a solution, that I came with:</p>\n\n<pre><code>require 'csv'\n\nh = {}\nCSV.foreach(\"path/to/A.csv\") do |row|\n  h[row.shift] = row\nend\n\nCSV.foreach(\"path/to/B.csv\") do |row|\n  next unless h.key?(row[0])\n  h[row.shift] &lt;&lt; row\nend\n\nh.each do |k,_| \n  h[k].flatten!\nend\n\nh\n=&gt;{1234=&gt;[\"a\", \"d\", \"g\", \"j\", \"m\", \"p\", \"s\", \"g\", \"a\", \"q\", \"o\"], 5678=&gt;[\"b\", \"e\", \"h\", \"k\", \"n\", \"q\", \"t\"], 9012=&gt;[\"c\", \"f\", \"i\", \"l\", \"o\", \"r\", \"u\", \"l\", \"h\", \"k\", \"p\"]} \n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 6554042, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/n8yMn.png?s=128&g=1", "display_name": "Forwarding", "link": "https://stackoverflow.com/users/6554042/forwarding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 38991556, "answer_count": 1, "score": 1, "last_activity_date": 1471422205, "creation_date": 1471408632, "last_edit_date": 1471409551, "question_id": 38988192, "link": "https://stackoverflow.com/questions/38988192/joining-two-csv-files-in-ruby-by-id-when-their-respective-row-numbers-do-not-ma", "title": "Joining two .csv files in Ruby by id when their respective row numbers do not match", "body": "<p>Say I have a .csv file like this, call it A.csv</p>\n\n<pre><code>1234   a   d   g   j   m   p   s\n5678   b   e   h   k   n   q   t\n9012   c   f   i   l   o   r   u\n</code></pre>\n\n<p>and another, call it B.csv, like</p>\n\n<pre><code>1234   g   a   q   o\nNULL   0   0   0   0\nNULL   0   0   0   0\n9012   l   h   k   p\n</code></pre>\n\n<p>I only want to join where the first columns' id's match regardless of whether they're in the same row number or not. It's important to note that <code>B.csv</code>'s id's \u2286 <code>A.csv</code>'s id's</p>\n"}, {"tags": ["ruby", "rubygems", "rdoc"], "comments": [{"owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "edited": false, "score": 0, "creation_date": 1471666851, "post_id": 38988161, "comment_id": 65450315, "body": "I have exactly the same environment as you do, except for ruby version (mine is <code>ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]</code>), and had no problem installing the gem."}, {"owner": {"reputation": 424, "user_id": 3722117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f384c7ad4980b01083daf342efb3b323?s=128&d=identicon&r=PG", "display_name": "konserw", "link": "https://stackoverflow.com/users/3722117/konserw"}, "edited": false, "score": 0, "creation_date": 1527943198, "post_id": 38988161, "comment_id": 88323984, "body": "I&#39;ve got the same problem as OP with <code>ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]</code> &amp; <code>gem 2.7.7</code> and for me it happened while installing rdoc itself: <code>rdoc-6.0.4</code>"}, {"owner": {"reputation": 586, "user_id": 3355777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MedOs.jpg?s=128&g=1", "display_name": "Josh Edwards", "link": "https://stackoverflow.com/users/3355777/josh-edwards"}, "edited": false, "score": 0, "creation_date": 1531481935, "post_id": 38988161, "comment_id": 89623492, "body": "Did anyone figure this out?"}], "answers": [{"tags": [], "owner": {"reputation": 763, "user_id": 4101697, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b65b63ce8411b1cb24bfd634d80d385?s=128&d=identicon&r=PG&f=1", "display_name": "Pieter", "link": "https://stackoverflow.com/users/4101697/pieter"}, "is_accepted": false, "score": 3, "last_activity_date": 1533042555, "creation_date": 1533042555, "answer_id": 51614184, "question_id": 38988161, "link": "https://stackoverflow.com/questions/38988161/undefined-method-reset-for-rdoctoplevelclass-when-installing-a-new-ruby-gem/51614184#51614184", "title": "undefined method `reset&#39; for RDoc::TopLevel:Class when installing a new Ruby gem", "body": "<p>I had a similar issue:</p>\n\n<pre><code>$ gem install rdoc\nFetching: rdoc-6.0.4.gem (100%)\nWARNING:  You don't have /home/myusername/.gem/ruby/2.5.0/bin in your PATH,\n      gem executables will not run.\nSuccessfully installed rdoc-6.0.4\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `reset' for RDoc::TopLevel:Class\n</code></pre>\n\n<p>Same when installing <code>compass</code>. After adding <code>/home/myusername/.gem/ruby/2.5.0/bin</code> to <code>$PATH</code>, this worked for me:</p>\n\n<pre><code>$ gem install rdoc\nSuccessfully installed rdoc-6.0.4\nParsing documentation for rdoc-6.0.4\nInstalling ri documentation for rdoc-6.0.4\nDone installing documentation for rdoc after 3 seconds\n1 gem installed\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1574, "user_id": 1388302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/27ca9066ad05bd8aa9ec366115f3cd38?s=128&d=identicon&r=PG", "display_name": "kwerle", "link": "https://stackoverflow.com/users/1388302/kwerle"}, "is_accepted": false, "score": 9, "last_activity_date": 1546046044, "creation_date": 1546046044, "answer_id": 53965913, "question_id": 38988161, "link": "https://stackoverflow.com/questions/38988161/undefined-method-reset-for-rdoctoplevelclass-when-installing-a-new-ruby-gem/53965913#53965913", "title": "undefined method `reset&#39; for RDoc::TopLevel:Class when installing a new Ruby gem", "body": "<p>When installing rdoc it tries to generate its own documentation using rdoc.  The binary is installed (probably in /usr/bin), but it will not be found at the moment of gem install - if this is the first time.\n<code>gem install rdoc --no-document</code></p>\n"}], "owner": {"reputation": 121, "user_id": 6724567, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ajewSsvb-W4/AAAAAAAAAAI/AAAAAAAAD_Q/dIZ7p3ZbAkU/photo.jpg?sz=128", "display_name": "Huioon Kim", "link": "https://stackoverflow.com/users/6724567/huioon-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2576, "favorite_count": 4, "answer_count": 2, "score": 11, "last_activity_date": 1546046044, "creation_date": 1471408338, "last_edit_date": 1533260578, "question_id": 38988161, "link": "https://stackoverflow.com/questions/38988161/undefined-method-reset-for-rdoctoplevelclass-when-installing-a-new-ruby-gem", "title": "undefined method `reset&#39; for RDoc::TopLevel:Class when installing a new Ruby gem", "body": "<p>For example,</p>\n\n<pre><code>$ gem install netaddr\nFetching: netaddr-1.5.1.gem (100%)\nSuccessfully installed netaddr-1.5.1\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `reset' for RDoc::TopLevel:Class\n</code></pre>\n\n<p>The NoMethodError exception keeps being raised when I install any new gem. I googled about it and searched issues in RDoc and RubyGems GitHub repositories, but had no luck.</p>\n\n<p>My Ruby version is</p>\n\n<pre><code>$ ruby -v\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin15]\n</code></pre>\n\n<p>The RubyGems version is</p>\n\n<pre><code>$ gem -v\n2.5.1\n</code></pre>\n\n<p>The installed RDoc version is</p>\n\n<pre><code>$ gem search rdoc -l\n\n*** LOCAL GEMS ***\n\nrdoc (4.2.2, 4.2.1)\n</code></pre>\n\n<p>I installed Ruby with RVM on Mac OS X El Capitan.</p>\n\n<p>Thanks!</p>\n\n<p><strong>[UPDATE] 2018/08/03</strong></p>\n\n<p>I haven't used my Macbook for long time, so I forgot the problem until now. The day before yesterday I got an answer notification and today I checked my situation with the same Macbook. I found that I no longer have the problem and the Ruby and Gems were updated as follows:</p>\n\n<pre><code>$ gem install netaddr\nFetching: netaddr-2.0.3.gem (100%)\nSuccessfully installed netaddr-2.0.3\nParsing documentation for netaddr-2.0.3\nInstalling ri documentation for netaddr-2.0.3\nDone installing documentation for netaddr after 1 seconds\n1 gem installed\n\n$ ruby -v\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin15]\n\n$ gem -v\n2.6.8\n\n$ gem search rdoc -l\n\n*** LOCAL GEMS ***\n\nrdoc (default: 5.0.0)\n</code></pre>\n\n<p>I don't remember when I updated them, but the problem has gone anyway, I guessed it was a bug and fixed in the updates.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "nginx", "thin"], "comments": [{"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 1, "creation_date": 1471455838, "post_id": 38988135, "comment_id": 65357853, "body": "I have never used Thin but I would expect to see the behavior you are experiencing when there is caching going on. Sounds like your cache expired after a couple hours at which point the latest changes to your code are reflected in your application... Also from your configuration it seems like you may have 2 Thin servers, are both being restarted?"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1471534283, "post_id": 38988135, "comment_id": 65394829, "body": "Thanks rii. I had directly started the server on the folder than through the config file so the port was being occupied. After i cleared the port and restarted the server using the config file, it worked fine."}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1471534400, "post_id": 38988135, "comment_id": 65394902, "body": "Great to hear, glad I could hint you in the right direction ;)"}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471408183, "creation_date": 1471408183, "question_id": 38988135, "link": "https://stackoverflow.com/questions/38988135/trouble-using-thin-server-its-not-reloading-content-after-modification", "title": "Trouble using thin server - its not reloading content after modification", "body": "<p>I am trying to deploy a rack based application built with Roda gem to a VPS. I am using NGINX with Thin. The thing is, even after making changes to the files and restarting the thin server, it is still showing the content from old ruby files. And for some reason, if I check after many hours, it starts showing content from the new files. I am surprised about how it can show content from a file which has already been deleted/modified and doesn't have that content at all.</p>\n\n<p>This is my Thin config file:</p>\n\n<pre><code>user: root\ngroup: root\npid: tmp/pids/thin.pid\ntimeout: 30\nwait: 30\nlog: var/log/thin/thin.log\nmax_conns: 1024\nrequire: []\nenvironment: production\nmax_persistent_conns: 512\nservers: 2\nonebyone: true\nthreaded: true\nno-epoll: true\ndaemonize: true\nsocket: tmp/sockets/thin.sock\nchdir: /var/www/mysite\ntag: mysite\n</code></pre>\n\n<p>This is my nginx config file:</p>\n\n<pre><code>upstream mysite{\n  ip_hash;\n  server unix:/var/www/mysite/tmp/sockets/thin.0.sock max_fails=1 fail_timeout=15s;\n  server unix:/var/www/mysite/tmp/sockets/thin.1.sock max_fails=1 fail_timeout=15s;\n}\n\nserver {\n  listen 80;\n\n  location / {\n    proxy_set_header HOST $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  }\n\n  root /var/www/mysite/public;\n\n  access_log /var/log/nginx/access.log;\n  error_log /var/log/nginx/error.log;\n\n}\n</code></pre>\n\n<p>Or does it have anything to do with NGINX?</p>\n"}, {"tags": ["ruby", "postgresql", "activerecord", "sinatra", "sinatra-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1471915304, "creation_date": 1471915304, "answer_id": 39090951, "question_id": 38987654, "link": "https://stackoverflow.com/questions/38987654/could-not-load-active-record-connection-adapters-postgresql-adapter-sinatra/39090951#39090951", "title": "Could not load &#39;active_record/connection_adapters/postgresql_adapter&#39; Sinatra - Windows 10", "body": "<p>Your adapter in enviroments.rb should just be <code>postgresql</code>. Nothing else.</p>\n"}, {"comments": [{"owner": {"reputation": 1318, "user_id": 5586783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060731280703cb6c69bff0df57eb8898?s=128&d=identicon&r=PG", "display_name": "Andy Gauge", "link": "https://stackoverflow.com/users/5586783/andy-gauge"}, "edited": false, "score": 1, "creation_date": 1474388908, "post_id": 39464092, "comment_id": 66506960, "body": "Just set up RubyMine, trying to get sinatra/postgres to work on Windows 10 on 2.3.1 and found the same error."}], "tags": [], "owner": {"reputation": 553, "user_id": 3605456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1381440100/picture?type=large", "display_name": "Michael Gabay", "link": "https://stackoverflow.com/users/3605456/michael-gabay"}, "is_accepted": false, "score": 1, "last_activity_date": 1473750483, "creation_date": 1473750483, "answer_id": 39464092, "question_id": 38987654, "link": "https://stackoverflow.com/questions/38987654/could-not-load-active-record-connection-adapters-postgresql-adapter-sinatra/39464092#39464092", "title": "Could not load &#39;active_record/connection_adapters/postgresql_adapter&#39; Sinatra - Windows 10", "body": "<p>I'm not sure why exactly, but Ruby version 2.3.1 doesn't do well with Sinatra on Windows. I downgraded to Ruby 2.2.5 and kept activeRecord '5.0.0' and everything worked fine.</p>\n"}], "owner": {"reputation": 553, "user_id": 3605456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1381440100/picture?type=large", "display_name": "Michael Gabay", "link": "https://stackoverflow.com/users/3605456/michael-gabay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1239, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473750483, "creation_date": 1471404560, "last_edit_date": 1495535651, "question_id": 38987654, "link": "https://stackoverflow.com/questions/38987654/could-not-load-active-record-connection-adapters-postgresql-adapter-sinatra", "title": "Could not load &#39;active_record/connection_adapters/postgresql_adapter&#39; Sinatra - Windows 10", "body": "<p>Cannot connect to database through active record in my Sinatra app on Windows 10, no issue on OSX but I would still like to be able to develop from my Windows machine. </p>\n\n<p>Full error:\nC:/Ruby23-x64/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:120:in `require': Could not load 'active_record/connection_adapters/postgresql_adapter'. Make sure that the adapter in config/database.yml is valid. If you use an adapter other than 'mysql2', 'postgresql' or 'sqlite3' add the necessary adapter gem to the Gemfile. (LoadError)</p>\n\n<p>Ruby version: 2.3.1</p>\n\n<pre><code>gem 'pg'\n</code></pre>\n\n<p>^^ is included in the Gemfile</p>\n\n<pre><code> require 'sinatra/activerecord'\n</code></pre>\n\n<p>^^ in app.rb</p>\n\n<p>Not relevant: <a href=\"https://stackoverflow.com/questions/29648461/could-not-load-active-record-connection-adapters-postgresql-adapter\">Could not load &#39;active_record/connection_adapters/postgresql_adapter&#39;</a></p>\n\n<p>Environments.rb : </p>\n\n<pre><code>configure :development do\n\n ActiveRecord::Base.establish_connection(\n   :adapter  =&gt; db.scheme == 'postgres' ? 'postgresql' : db.scheme,\n   :host     =&gt; 'localhost',\n   :username =&gt; 'postgres',\n   :password =&gt; '******',\n   :database =&gt; '******',\n   :port =&gt; 5432\n   :encoding =&gt; 'utf8'\n )\nend\n</code></pre>\n\n<p>database.yml:\ndevelopment:\n  adapter: postgresql\n  encoding: unicode\n  database: Same as environments.rb\n  pool: 5\n  username: Same as environments.rb\n  password: Same as environments.rb</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1471418254, "last_edit_date": 1471418254, "creation_date": 1471404602, "answer_id": 38987659, "question_id": 38987612, "link": "https://stackoverflow.com/questions/38987612/changing-show-and-edit-for-resources/38987659#38987659", "title": "Changing &quot;show&quot; and &quot;edit&quot; for resources", "body": "<p>You can exclude routes from the <code>resources</code> definition:</p>\n\n<pre><code>resources :resource1, except: [:edit, :show]\n</code></pre>\n\n<p>Then write custom definitions for those routes:</p>\n\n<pre><code>get \"/resource/:date/:id\", to: \"resource1#show\"\nput \"/resource/:date/:id\", to: \"resource1#edit\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1471410167, "last_edit_date": 1471410167, "creation_date": 1471408673, "answer_id": 38988197, "question_id": 38987612, "link": "https://stackoverflow.com/questions/38987612/changing-show-and-edit-for-resources/38988197#38988197", "title": "Changing &quot;show&quot; and &quot;edit&quot; for resources", "body": "<pre><code>{\n  resource1:  '/resource1',\n  resource2:  '/resource2'\n}\n.each do |c_name, path|\n  controller c_name, path: path do\n    scope path: ':id/:date' do\n      put action: :edit\n      get action: :show\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6574649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 38987659, "answer_count": 2, "score": 0, "last_activity_date": 1471418254, "creation_date": 1471404297, "question_id": 38987612, "link": "https://stackoverflow.com/questions/38987612/changing-show-and-edit-for-resources", "title": "Changing &quot;show&quot; and &quot;edit&quot; for resources", "body": "<p>I have this in routes:</p>\n\n<pre><code>resources :resource1\n</code></pre>\n\n<p>I want to add a parameter to \"edit\" and \"show\" in the url and only to \"edit\" and \"show\". Say, I want to add a date to the url so it'll look like \"resource1/2016-05-12/123\" for \"show\". How can I do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 3047194, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9fe1eae976dd18aa13cc4b344da5be7?s=128&d=identicon&r=PG&f=1", "display_name": "TemporaryName", "link": "https://stackoverflow.com/users/3047194/temporaryname"}, "edited": false, "score": 0, "creation_date": 1567178599, "post_id": 38987346, "comment_id": 101899248, "body": "Late comment, but in case someone stumbles upon this: We knew we were going to have many settings, otherwise I would recommend this approach."}], "tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": false, "score": 3, "last_activity_date": 1471402211, "creation_date": 1471402211, "answer_id": 38987346, "question_id": 38987279, "link": "https://stackoverflow.com/questions/38987279/best-way-to-store-user-settings/38987346#38987346", "title": "Best way to store user settings", "body": "<p>I like starting out simple before making things too complex. If you only have three settings per user, it might not be a bad idea to start with them on the model. When it starts to get too complicated, then make the decision to switch to something more extensible. You will have a lot more information at that point to pick the right way to handle settings.</p>\n"}, {"comments": [{"owner": {"reputation": 437, "user_id": 3047194, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9fe1eae976dd18aa13cc4b344da5be7?s=128&d=identicon&r=PG&f=1", "display_name": "TemporaryName", "link": "https://stackoverflow.com/users/3047194/temporaryname"}, "edited": false, "score": 0, "creation_date": 1567178701, "post_id": 39017247, "comment_id": 101899300, "body": "We ended up using this. It was fine. We should&#39;ve thought more about database design before we implemented it, though."}], "tags": [], "owner": {"reputation": 223, "user_id": 3876089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/giNwz.jpg?s=128&g=1", "display_name": "Alexander R&#252;hle", "link": "https://stackoverflow.com/users/3876089/alexander-r%c3%bchle"}, "is_accepted": true, "score": 2, "last_activity_date": 1471520297, "creation_date": 1471520297, "answer_id": 39017247, "question_id": 38987279, "link": "https://stackoverflow.com/questions/38987279/best-way-to-store-user-settings/39017247#39017247", "title": "Best way to store user settings", "body": "<p>I prefer <a href=\"https://github.com/ledermann/rails-settings\" rel=\"nofollow\">https://github.com/ledermann/rails-settings</a> for storing model specific settings with optional default values.\nThis stores the settings in a simple has_many association. The data is stored in a Proc.\nI assume that a simple join will not have a big impact on performance.</p>\n"}], "owner": {"reputation": 437, "user_id": 3047194, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9fe1eae976dd18aa13cc4b344da5be7?s=128&d=identicon&r=PG&f=1", "display_name": "TemporaryName", "link": "https://stackoverflow.com/users/3047194/temporaryname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 0, "accepted_answer_id": 39017247, "answer_count": 2, "score": 4, "last_activity_date": 1471520297, "creation_date": 1471401649, "last_edit_date": 1495542173, "question_id": 38987279, "link": "https://stackoverflow.com/questions/38987279/best-way-to-store-user-settings", "title": "Best way to store user settings", "body": "<p>Yes, I saw <a href=\"https://stackoverflow.com/questions/1682089/rails-best-practice-to-store-user-settings\">this post</a>. It seems old and I wanted to ask again, especially with the recent release of Rails 5.</p>\n\n<p>What is the best way to store user settings in Rails? <s>It seems <a href=\"https://github.com/cjbottaro/has_easy\" rel=\"nofollow noreferrer\">has_easy</a> is a decent way.</s> <a href=\"https://github.com/huacnlee/rails-settings-cached\" rel=\"nofollow noreferrer\">Rails-cached-settings</a> also seems like a good way - but I dislike that there are no default values and it is... rather ambiguous.</p>\n\n<p>Both of these options seem good, but how do they impact performance? If I only have three settings, is it better to have them directly on the model? What if I have ten?</p>\n\n<p>Edit: has_easy is 8 years old, probably not the best option by now.</p>\n"}, {"tags": ["ruby", "compass-sass"], "answers": [{"tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": true, "score": 1, "last_activity_date": 1471401897, "creation_date": 1471401897, "answer_id": 38987310, "question_id": 38987210, "link": "https://stackoverflow.com/questions/38987210/ruby-compass-sass-syntax-error/38987310#38987310", "title": "Ruby/Compass Sass syntax error", "body": "<p>It is because all of your code is on one line and there is \"ruby\" appearing at the beginning. Try this</p>\n\n<pre><code>http_path = \"/themes/less_subtheme\"\ncss_dir = \"css\"\nsass_dir = \"assets/sass\"\nimages_dir = \"assets/images\"\njavascripts_dir = \"js\"\nfonts_dir = \"bootstrap/fonts/bootstrap\"\ngenerated_images_dir = \"img\"\nhttp_images_path = http_path + \"/\" + generated_images_dir\nhttp_generated_images_path = http_images_path\noutput_style = (environment == :production) ? :compressed : :expanded\n</code></pre>\n"}], "owner": {"reputation": 424, "user_id": 3969494, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3tDuz.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/3969494/casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 38987310, "answer_count": 1, "score": -1, "last_activity_date": 1471401897, "creation_date": 1471401017, "question_id": 38987210, "link": "https://stackoverflow.com/questions/38987210/ruby-compass-sass-syntax-error", "title": "Ruby/Compass Sass syntax error", "body": "<p>First time user of Compass here, having an issue getting my sass compiler to work. I followed a tutorial online and I'm getting this error:</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>syntaxError on line [\"24\"] of C: C:/Users/Casey/Sites/devdesktop/bootstrap-subtheme/themes/less_subtheme/config.rb:1: \nsyntax error, unexpected tIDENTIFIER, expecting end-of-input\n...\"/themes/less_subtheme\" css_dir = \"css\" sass_dir = \"assets/s...\n</code></pre>\n\n<p><strong>config.rb file</strong></p>\n\n<pre><code>ruby http_path = \"/themes/less_subtheme\" css_dir = \"css\" sass_dir = \"assets/sass\" images_dir = \"assets/images\" javascripts_dir = \"js\" fonts_dir = \"bootstrap/fonts/bootstrap\" generated_images_dir = \"img\" http_images_path = http_path + \"/\" + generated_images_dir http_generated_images_path = http_images_path output_style = (environment == :production) ? :compressed : :expanded\n</code></pre>\n\n<p>I've rewritten the code I copied to make sure no <em>funny</em> quotes or blank spaces were copied over and I still get the same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "coffeescript"], "comments": [{"owner": {"reputation": 1210, "user_id": 5862726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dyBzTE1yNyc/AAAAAAAAAAI/AAAAAAAAAUs/xIiSMA7_Gko/photo.jpg?sz=128", "display_name": "Todd Knarr", "link": "https://stackoverflow.com/users/5862726/todd-knarr"}, "edited": false, "score": 0, "creation_date": 1471390568, "post_id": 38986016, "comment_id": 65324762, "body": "Have you tried <code>bin&#47;bundle update</code>"}, {"owner": {"reputation": 1, "user_id": 6723928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c4678a38dfe0c80a6ba78066c73229c?s=128&d=identicon&r=PG&f=1", "display_name": "Keyvan GSaffar", "link": "https://stackoverflow.com/users/6723928/keyvan-gsaffar"}, "reply_to_user": {"reputation": 1210, "user_id": 5862726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dyBzTE1yNyc/AAAAAAAAAAI/AAAAAAAAAUs/xIiSMA7_Gko/photo.jpg?sz=128", "display_name": "Todd Knarr", "link": "https://stackoverflow.com/users/5862726/todd-knarr"}, "edited": false, "score": 0, "creation_date": 1471391323, "post_id": 38986016, "comment_id": 65324928, "body": "Yes, I went to bin directory of my folder and ran <code>bundle update</code>. It didn&#39;t work."}, {"owner": {"reputation": 1210, "user_id": 5862726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dyBzTE1yNyc/AAAAAAAAAAI/AAAAAAAAAUs/xIiSMA7_Gko/photo.jpg?sz=128", "display_name": "Todd Knarr", "link": "https://stackoverflow.com/users/5862726/todd-knarr"}, "edited": false, "score": 0, "creation_date": 1471392138, "post_id": 38986016, "comment_id": 65325125, "body": "Try staying in the directory with the gemfile and using bin/bundle."}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1471392306, "post_id": 38986016, "comment_id": 65325168, "body": "@KeyvanGSaffar  The ExecJs error is due to an incompatibility between recent versions of the CoffeeScript gem and Windows 64 bit.Try installing <code>node.js</code> and restart your computer"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6723928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c4678a38dfe0c80a6ba78066c73229c?s=128&d=identicon&r=PG&f=1", "display_name": "Keyvan GSaffar", "link": "https://stackoverflow.com/users/6723928/keyvan-gsaffar"}, "is_accepted": false, "score": 0, "last_activity_date": 1471460629, "last_edit_date": 1471460629, "creation_date": 1471458548, "answer_id": 39003889, "question_id": 38986016, "link": "https://stackoverflow.com/questions/38986016/downgrading-the-gem-coffee-script-source-to-1-8-0/39003889#39003889", "title": "downgrading the gem coffee-script-source&#39; to 1.8.0", "body": "<p>Apparently, windows did not know how to run <code>bundle</code> command. But using <code>ruby bundle</code> worked and the gemfile was updated.</p>\n\n<p>It seems that bundle is not installed. Therefore, you better install it first by\n<code>gem install bundle</code>\nand then <code>bundle</code> command works. </p>\n"}], "owner": {"reputation": 1, "user_id": 6723928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c4678a38dfe0c80a6ba78066c73229c?s=128&d=identicon&r=PG&f=1", "display_name": "Keyvan GSaffar", "link": "https://stackoverflow.com/users/6723928/keyvan-gsaffar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471875933, "creation_date": 1471390330, "last_edit_date": 1471392184, "question_id": 38986016, "link": "https://stackoverflow.com/questions/38986016/downgrading-the-gem-coffee-script-source-to-1-8-0", "title": "downgrading the gem coffee-script-source&#39; to 1.8.0", "body": "<p>I am getting this error:</p>\n\n<pre><code> ExecJS::ProgramError in Welcome#indexExecJS::ProgramError in Welcome#index.\n</code></pre>\n\n<p>According to others posts that error happens because there is a problem with <code>coffee-script-source 1.9.0</code> running on windows. Actually, I am currently on <code>coffee-script-source 1.10.0.</code> Anyway, apparently, I have to downgrade the gem with the adding </p>\n\n<pre><code>gem 'coffee-script-source', '1.8.0'\n</code></pre>\n\n<p>to my gem file and runny commands:</p>\n\n<pre><code>bundle update\n</code></pre>\n\n<p>or </p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>Although I am in the directory of the gemfile, I get this message in cmd:\nThe system cannot find the path specified.</p>\n\n<p>What is it that I am doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1471390345, "post_id": 38985967, "comment_id": 65324719, "body": "the one thing you&#39;re missing is the text of the error. it will include a file name and line number to show where its coming from."}], "answers": [{"tags": [], "owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "is_accepted": false, "score": 0, "last_activity_date": 1471390631, "creation_date": 1471390631, "answer_id": 38986052, "question_id": 38985967, "link": "https://stackoverflow.com/questions/38985967/nil-cant-be-coerced-into-bigdecimal-ruby-on-rails/38986052#38986052", "title": "nil can&#39;t be coerced into BigDecimal - Ruby On Rails", "body": "<p>Your code is attempting do to arithmetic with a <code>nil</code> value, thus the message <code>nil can't be coerced into BigDecimal</code>.</p>\n\n<p>As to why this happens, you'll need to do some digging to figure out where in the code the error arises. One clue is that the error implies the <code>nil</code> value is on the right side of the operation, e.g.:</p>\n\n<pre><code>bd = BigDecimal.new(\"0\")\nbd + nil # =&gt; nil can't be coerced into BigDecimal\n</code></pre>\n\n<p>as opposed to:</p>\n\n<pre><code>nil + bd # =&gt; undefined method '+' for nil:NilClass\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6722948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0ad66ac427d33b9654bf9ad9b4bd19?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/6722948/logan"}, "edited": false, "score": 0, "creation_date": 1471395659, "post_id": 38986234, "comment_id": 65325859, "body": "I forgot to add the code, but I just updated it. I have the default value of quantity set in the migration file. Not sure if that changes what I need to do or not."}, {"owner": {"reputation": 7051, "user_id": 848668, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JQcC4.jpg?s=128&g=1", "display_name": "br3nt", "link": "https://stackoverflow.com/users/848668/br3nt"}, "reply_to_user": {"reputation": 13, "user_id": 6722948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0ad66ac427d33b9654bf9ad9b4bd19?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/6722948/logan"}, "edited": false, "score": 0, "creation_date": 1471395950, "post_id": 38986234, "comment_id": 65325920, "body": "The default database value doesn&#39;t matter, in a sense, as the new object created by <code>build</code> or <code>new</code> won&#39;t get the default <i>database</i> value until you save the record and then re-fetch it."}, {"owner": {"reputation": 13, "user_id": 6722948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0ad66ac427d33b9654bf9ad9b4bd19?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/6722948/logan"}, "edited": false, "score": 2, "creation_date": 1471396545, "post_id": 38986234, "comment_id": 65326053, "body": "I used the after_initialize method. It works perfectly. And, yeah, that makes sense. Thanks so much for your answer. I have no idea why I couldn&#39;t have just figured that out. It was so simple. I think I racked my brain so long trying to think of a complex reason for why it was happening, that I ended up overloading it. Haha. Thanks again!"}], "tags": [], "owner": {"reputation": 7051, "user_id": 848668, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JQcC4.jpg?s=128&g=1", "display_name": "br3nt", "link": "https://stackoverflow.com/users/848668/br3nt"}, "is_accepted": true, "score": 1, "last_activity_date": 1471392140, "creation_date": 1471392140, "answer_id": 38986234, "question_id": 38985967, "link": "https://stackoverflow.com/questions/38985967/nil-cant-be-coerced-into-bigdecimal-ruby-on-rails/38986234#38986234", "title": "nil can&#39;t be coerced into BigDecimal - Ruby On Rails", "body": "<p>From the sounds of it, you are not initialising the <code>quantity</code> attribute when you create a new product item.</p>\n\n<p>You could either initialise the <code>quantity</code> attribute in the by adding an <code>after_initialize</code> block in <code>ProductItem</code></p>\n\n<pre><code>class ProductItem &lt; ApplicationRecord\n  after_initialize do\n    self.quantity ||= 1\n  end\nend\n</code></pre>\n\n<p>Or, you could set the <code>quantity</code> attribute in the <code>Cart#add_product</code> method when you create a product item:</p>\n\n<pre><code>class Cart &lt; ApplicationRecord\n  def add_product(product_id)\n    current_item = product_items.find_by(product_id: product_id)\n    if current_item\n      current_item.quantity += 1\n    else\n      # initialize the quantity value when creating a new item\n      current_item = product_items.build(product_id: product_id, quantity: 1)\n    end\n    current_item\n  end\nend\n</code></pre>\n\n<p>Yet another method would be to set a default value in the <code>ProductItem#total_price</code> method:</p>\n\n<pre><code>class ProductItem &lt; ApplicationRecord\n  def total_price\n    product.price * (quantity || 1)\n  end  \nend\n</code></pre>\n\n<p>Personally, I would go with <code>after_initialize</code> method as it is the most consistent option in that the <code>quantity</code> <strong>always</strong> has a value.</p>\n"}], "owner": {"reputation": 13, "user_id": 6722948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0ad66ac427d33b9654bf9ad9b4bd19?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/6722948/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 38986234, "answer_count": 2, "score": 1, "last_activity_date": 1471395611, "creation_date": 1471390053, "last_edit_date": 1471395611, "question_id": 38985967, "link": "https://stackoverflow.com/questions/38985967/nil-cant-be-coerced-into-bigdecimal-ruby-on-rails", "title": "nil can&#39;t be coerced into BigDecimal - Ruby On Rails", "body": "<p>I've seen other questions similar to this one, but none that are exactly the same (I'm still somewhat of a beginner). If there is another thread that is the same just let me know! Thanks!!</p>\n\n<p><strong>UPDATE:</strong>\nI forgot to add this code. Which is a migration file to add the quantity.</p>\n\n<pre><code>class AddQuantityToProductItems &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :product_items, :quantity, :integer, default: 1\n  end\nend\n</code></pre>\n\n<p>I keep getting the error \"nil can't be coerced into BigDecimal\" from the code below (<strong>ProductItem Model:</strong>)</p>\n\n<pre><code>class ProductItem &lt; ApplicationRecord\n  belongs_to :product\n  belongs_to :cart\n\n  def total_price\n    product.price * quantity\n  end  \nend\n</code></pre>\n\n<p>Here is the <strong>Cart Model:</strong></p>\n\n<pre><code>class Cart &lt; ApplicationRecord\n  has_many :product_items, dependent: :destroy\n\n  def add_product(product_id)\n    current_item = product_items.find_by(product_id: product_id)\n    if current_item\n      current_item.quantity += 1\n    else\n      current_item = product_items.build(product_id: product_id)\n    end\n    current_item\n  end\n\n  def total_price\n    product_items.to_a.sum{|item| item.total_price}\n  end\nend\n</code></pre>\n\n<p><strong>Product Model:</strong></p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  before_destroy :ensure_not_product_item\n  has_many :product_items\n  validates :title, :description, presence: true\n  validates :price, numericality: {greater_than_or_equal_to: 0.01}\n  validates :title, uniqueness: true\n  has_attached_file :image, styles: { medium: \"300x300&gt;\", thumb:       \"100x100&gt;\" }\n  validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\Z/\n\n  def ensure_not_product_item\n    if product_items.empty?\n      return true\n    else\n      errors.add(:base, 'Product Items')\n      return false\n    end\n  end\nend\n</code></pre>\n\n<p><strong>ProductItems Controller:</strong></p>\n\n<pre><code>class ProductItemsController &lt; ApplicationController\n\n  include CurrentCart\n  before_action :set_cart, only: [:create]\n  before_action :set_product_item, only: [:show, :destroy]\n\n  def create\n    product = Product.find(params[:product_id])\n    @product_item = @cart.add_product(product.id)\n    if @product_item.save\n      redirect_to shop_url, notice: 'Your Product was added to the cart!'\n    else\n      render :new\n    end\n  end\n\n  private\n\n  def set_product_item\n    @product_item = ProductItem.find(params[:id])\n  end\n\n  def product_item_params\n    params.require(:product_item).permit(:product_id)\n  end\n\nend\n</code></pre>\n\n<p>Code for Product Items and Products from <strong>schema.rb</strong></p>\n\n<pre><code>create_table \"product_items\", force: :cascade do |t|\n  t.integer  \"product_id\"\n  t.integer  \"cart_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.integer  \"quantity\"\n  t.index [\"cart_id\"], name: \"index_product_items_on_cart_id\"\n  t.index [\"product_id\"], name: \"index_product_items_on_product_id\"\nend\n\ncreate_table \"products\", force: :cascade do |t|\n  t.string   \"title\"\n  t.string   \"image\"\n  t.text     \"description\"\n  t.decimal  \"price\"\n  t.datetime \"created_at\",         null: false\n  t.datetime \"updated_at\",         null: false\n  t.string   \"image_file_name\"\n  t.string   \"image_content_type\"\n  t.integer  \"image_file_size\"\n  t.datetime \"image_updated_at\"\nend\n</code></pre>\n\n<p>If any other files are needed, I'll gladly post them. I'm sure it's something really simple, I just can't seem to figure it out. Maybe I'm trying too hard to find the problem. Lol.\nThanks for taking the time to help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 1, "creation_date": 1471534700, "post_id": 38985915, "comment_id": 65395088, "body": "You should first check the docs properly. - <a href=\"https://github.com/plataformatec/devise/wiki/How-Tos\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/How-Tos</a> - find it, implement it and then question if you find any issues."}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": true, "score": 1, "last_activity_date": 1471393612, "last_edit_date": 1471393612, "creation_date": 1471392673, "answer_id": 38986304, "question_id": 38985915, "link": "https://stackoverflow.com/questions/38985915/rails-customizing-devise-sign-in-up/38986304#38986304", "title": "Rails Customizing Devise Sign in/up", "body": "<p>First of all take a look at <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address\" rel=\"nofollow\">Devise custom login</a></p>\n\n<p>As an example you could do the following in your User model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  validate :validate_username\n\n  attr_accessor :login\n\n  def self.find_for_database_authentication(warden_conditions)\n    conditions = warden_conditions.dup\n    # conditions[:email].downcase! if conditions[:email]\n    collection = with_deleted.where(conditions.to_hash.except(:login))\n    if conditions[:login]\n      value = conditions[:login].downcase\n      collection = collection.where(\"username = :value OR email = :value\", value: value)\n    end\n    return unless record = collection.first\n    record.restore(recursive: true) if record.deleted?\n    record\n  end\n\n  def login\n    @login || username || email\n  end\n\n  private\n\n  def validate_username\n    if User.where(email: username).exists?\n      errors.add(:username, :invalid)\n    end\n  end\nend\n</code></pre>\n\n<p>You should add the following to your ApplicationController:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  protected\n\n  def configure_permitted_parameters\n    added_attrs = %i(username first_name last_name phone user_role email password password_confirmation remember_me)\n    devise_parameter_sanitizer.permit :sign_up, keys: added_attrs\n    devise_parameter_sanitizer.permit :account_update, keys: added_attrs\n  end\nend\n</code></pre>\n\n<p>Add this to your <code>config/initializers/devise.rb</code>:</p>\n\n<pre><code>config.authentication_keys = [ :login ]\n</code></pre>\n\n<p>And in your views (assuming your using HAML):</p>\n\n<pre><code>= simple_form_for resource, as: resource_name, url: session_path(resource_name) do |f|\n  .form-inputs\n    = f.input :login, autofocus: true\n    = f.input :password, hint: \"\"\n    = f.input :remember_me, as: :boolean if devise_mapping.rememberable?\n  .form-action\n    = submit_tag(\"Login\")\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 5037611, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/aa80859af569f026c941898223e42cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Cody Pritchard", "link": "https://stackoverflow.com/users/5037611/cody-pritchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 38986304, "answer_count": 1, "score": -1, "last_activity_date": 1471393612, "creation_date": 1471389669, "last_edit_date": 1471391643, "question_id": 38985915, "link": "https://stackoverflow.com/questions/38985915/rails-customizing-devise-sign-in-up", "title": "Rails Customizing Devise Sign in/up", "body": "<p>I am working a new rails application, and i am adding custom values to devise. \nI added <code>first name</code>, <code>last name</code>, <code>username</code>, <code>phone</code>, and <code>user roles</code> to devise registration by doing the following:</p>\n\n<p>In <code>app/controllers</code> i created <code>registrations_controller.rb</code> and added the </p>\n\n<p>following:</p>\n\n<pre><code>   classRegistrationsController &lt; Devise: RegistrationsController\n\n       private\n\n       def sign_up_params\n          params.require(:user).permit(:fname, :lname, :username, :phone:, :email, :password:, :password_confirmation, :admin, :rgroup, :rlab)\n       end\n   end\n</code></pre>\n\n<p>And in my routes.rb i added:</p>\n\n<pre><code>devise_for :users, :controllers =&gt; { registrations 'registrations', sessions 'sessions' }\n</code></pre>\n\n<p>Now where im stuck. </p>\n\n<p>I created sessions_controller.rb in my app/controllers and in the file i have:</p>\n\n<pre><code> class SessionsController &lt; Devise::SessionsController\n\n    private\n\n    def sign_in_params\n\n    end\n\n end\n</code></pre>\n\n<p>And what i want is to be able to sign in with username or email. But I have zero idea how to go about writing this, and most the examples online are confusing for me. </p>\n\n<p>Do any of you have some tips?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "edited": false, "score": 0, "creation_date": 1471393403, "post_id": 38985906, "comment_id": 65325412, "body": "I edited my code to add a form submission but how would I then assign the javascript variable to the ruby variable @csander"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "edited": false, "score": 0, "creation_date": 1471393848, "post_id": 38985906, "comment_id": 65325493, "body": "@nums11 You don&#39;t. Ruby code is executed on the server before anything is sent to the client. Once you&#39;re on the client the only way you can do anything Ruby-related is by making a request to the server (e.g., Ajax, Websockets, etc.)"}, {"owner": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1471394284, "post_id": 38985906, "comment_id": 65325573, "body": "So what you&#39;re saying is even after the form submission I still have to make an ajax request? @DaveNewton"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "edited": false, "score": 0, "creation_date": 1471395453, "post_id": 38985906, "comment_id": 65325817, "body": "@nums11 If you&#39;re submitting a form using normal means then you already <i>have</i> the variable in <code>params</code> and you can do whatever you want with it. It&#39;s really not clear what the issue is. You can&#39;t just have a &quot;JavaScript variable&quot; magically sent to the server in a form, it needs to be a form field."}, {"owner": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1471397279, "post_id": 38985906, "comment_id": 65326201, "body": "The thing is I can&#39;t necessarily have a form because the score of the user is not something that is manually inputted. @DaveNewton"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "edited": false, "score": 0, "creation_date": 1471399838, "post_id": 38985906, "comment_id": 65326728, "body": "@nums11 That&#39;s irrelevant. What exactly are you calling <code>submit()</code> on then?! You might want to take a step back and figure out some bigger-picture basics before going much further; there&#39;s a huge difference between a JavaScript variable and a DOM element."}], "tags": [], "owner": {"reputation": 1320, "user_id": 2276009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/028757e2365b6eaaee9617e4cf8c71a5?s=128&d=identicon&r=PG", "display_name": "csander", "link": "https://stackoverflow.com/users/2276009/csander"}, "is_accepted": false, "score": 1, "last_activity_date": 1471389600, "creation_date": 1471389600, "answer_id": 38985906, "question_id": 38985892, "link": "https://stackoverflow.com/questions/38985892/assign-a-javascript-variable-to-a-ruby-variable/38985906#38985906", "title": "Assign a javascript variable to a ruby variable", "body": "<p>You will need to do something more complicated than that. The ERB code generates an HTML file that gets sent to the client, which has no idea what server software is sending it the HTML file, so it can't assign a server-side variable. You have to upload the value to the server in some way. For example, you could use a form submission, URL querystring parameters, or an AJAX request.</p>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1471597677, "post_id": 38988493, "comment_id": 65420053, "body": "This is the wrong way. He wants JS to Ruby, not Ruby to JS. Hence it&#39;s Client to Server which will need some sort of HTTP call."}], "tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": -1, "last_activity_date": 1471420451, "last_edit_date": 1471420451, "creation_date": 1471410420, "answer_id": 38988493, "question_id": 38985892, "link": "https://stackoverflow.com/questions/38985892/assign-a-javascript-variable-to-a-ruby-variable/38988493#38988493", "title": "Assign a javascript variable to a ruby variable", "body": "<p>Try the following code:</p>\n\n<pre><code>var score = '&lt;%= @user.score %&gt;'\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471420451, "creation_date": 1471389435, "last_edit_date": 1471393348, "question_id": 38985892, "link": "https://stackoverflow.com/questions/38985892/assign-a-javascript-variable-to-a-ruby-variable", "title": "Assign a javascript variable to a ruby variable", "body": "<p>I have a score counter and I'm trying to assign the value of that score counter to a ruby variable, and then have that variable be saved.</p>\n\n<p>View:</p>\n\n<pre><code>        var score = 0;\n        window.setInterval(\n        function countscore() {\n            if($('#game-area').is(':animated')){\n                score = score + 1;\n                document.getElementById(\"score\").innerHTML = score;\n                document.getElementById(\"score\").submit(); //trying to assign here\n            }\n\n        }, 100); \n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>def index\n    @user = User.find(current_user)     \n    @score = @user.score\nend\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1471392165, "post_id": 38985878, "comment_id": 65325131, "body": "Hi, i don&#39;t personally know of any gems that do it already, have you looked on rubygems.org? you probably need to search for something like &quot;custom forms&quot;. Also this question looks a bit relevant, or at least might give you some ideas... <a href=\"http://stackoverflow.com/questions/4942164/rails-3-user-created-custom-forms\" title=\"rails 3 user created custom forms\">stackoverflow.com/questions/4942164/&hellip;</a>"}, {"owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1471419047, "post_id": 38985878, "comment_id": 65333143, "body": "Hi Taryn, I have found this yesterday: <a href=\"https://github.com/dobtco/formbuilder\" rel=\"nofollow noreferrer\">github.com/dobtco/formbuilder</a> Now I think about implementing it. I know how to build it, save it to DB, but don&#39;t have a clue how to save dynamic data from user input - because of variable number of inputs etc."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1471475604, "post_id": 38985878, "comment_id": 65366917, "body": "That&#39;s the sort of thing that&#39;s in the question I linked to (above) it shows how to add multiple fields dynamically to a form. How about you have a go at the bits you know how to do and see what bits are left... then have a go at implementing eg just the ability to create/save one field-type... and see how you go with that. Then once you have that working you&#39;ll be able to do all the field types."}, {"owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1471510834, "post_id": 38985878, "comment_id": 65378648, "body": "@TarynEast I think that is the good start. Thank you and I will get back as soon as I&#39;ve implemented it."}], "owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471389350, "creation_date": 1471389350, "question_id": 38985878, "link": "https://stackoverflow.com/questions/38985878/make-forms-by-admin-and-then-show-them-to-users-for-filling-maybe-there-is-a-g", "title": "Make forms by admin and then show them to users for filling - maybe there is a gem?", "body": "<p>My question is easy, I want to give my admins an ability to build forms. They could choose from text field, radio buttons, etc., then save the form and after that show it to user. User will just fill the form.</p>\n\n<p>So is there any way of how can I make this happen - maybe some gem which can make it easy - or is there the only one way - to develope it by myself?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "is_accepted": false, "score": 2, "last_activity_date": 1471387027, "creation_date": 1471387027, "answer_id": 38985552, "question_id": 38985038, "link": "https://stackoverflow.com/questions/38985038/rspec-for-ssh-connection/38985552#38985552", "title": "Rspec for ssh connection", "body": "<p>There are a number of things wrong with your spec file. your test for <code>new</code> should be within the context of your <code>SshMod::SshHost</code> describe otherwise it doesn't have access to the ssh instance variable. Also, your code should throw some errors because <code>except</code> isn't defined in Kernel it's within the context of an Rspec object. You most likely want to put it in your <code>before</code>.</p>\n\n<p>Regarding your requires in your ruby class, I'd get rid of everything that you don't need (for example, why the explicit inclusion of socket when using net-ssh?).</p>\n\n<p>I believe however, that you're running into the issue where no tests are running most likely due to your project structure (but that's only a guess since you haven't listed it). Rspec by default looks for spec files listed under <code>spec/**/*_spec.rb</code> which you can override with the <code>--pattern</code> flag. See <code>rspec --help</code> for more info.</p>\n\n<p>Here's a working example of your code with a bunch of things cleaned up. I put the source of your code in <code>lib</code> assuming you're making something like a gem.</p>\n\n<hr>\n\n<p>Gemfile:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem \"colorize\"\ngem \"rspec\"\ngem \"net-ssh\"\n</code></pre>\n\n<p>lib/ssh_host.rb</p>\n\n<pre><code>require 'net/ssh'\nrequire 'colorize'\n\nmodule SshMod\n  class SshHost\n    attr_accessor :hostname, :username, :password\n\n    def initialize(host, user, password)\n      @hostname = host\n      @username = user\n      @password = password\n\n      @ssh = Net::SSH.start(@hostname, @username, password: @password)\n      puts \"\\t Connection established for #{@hostname}...\".blue\n    end\n  end\nend\n</code></pre>\n\n<p>spec/spec_helper.rb</p>\n\n<pre><code>$:.unshift File.join(File.dirname(__FILE__), '..', 'lib')\nrequire 'rspec'\n\nRSpec.configure do |config|\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\nend\n</code></pre>\n\n<p>spec/ssh_host_spec.rb</p>\n\n<pre><code>require 'spec_helper'\n\nrequire 'ssh_host'\n\ndescribe SshMod::SshHost do\n  let (:ssh) { SshMod::SshHost.new \"servername\", \"user\", \"wrong_password\" }\n  before :each do\n    allow(Net::SSH).to receive(:start).and_return(double(\"connection\"))\n  end\n\n  describe \"#new\" do\n    it \"takes three parameters and returns sshhostobject\" do\n      expect(ssh).to be_a SshMod::SshHost\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1471387027, "creation_date": 1471384246, "question_id": 38985038, "link": "https://stackoverflow.com/questions/38985038/rspec-for-ssh-connection", "title": "Rspec for ssh connection", "body": "<p>I am trying to write rspec to test ssh connection. In my spec file even though I have enetered incorrect server password it still says <code>0 examples, 0 failures</code>. Can someone exmplain me why am I seeing that whereas I am expected to see at least one failure message.</p>\n\n<p>Below is the piece of code of my <code>ssh_host.rb</code> and <code>ssh_host_spec.rb files</code>.</p>\n\n<pre><code>require \"java\"\nrequire \"highline/import\"\nrequire 'open-uri'\nrequire 'socket'\nrequire 'rubygems'\nrequire 'net/ssh'\nrequire 'stringio'\nrequire 'net/scp'\nrequire 'colorize'\n\nmodule SshMod\n\nclass SshHost \n\n    attr_accessor :hostname, :username, :password\n\n    def initialize(host, user, password)\n            @hostname = host\n            @username = user\n            @password = password\n\n            @ssh = Net::SSH.start(@hostname, @username, :password =&gt; @password)\n            puts \"\\t Connection established for #{@hostname}...\".blue\n    end\nend\nend\n</code></pre>\n\n<p>Rspec Class:</p>\n\n<pre><code>#!/usr/bin/env rspec\n\nrequire 'spec_helper'\nrequire 'ssh_host.rb'\n\ndescribe SshMod::SshHost do\n  before :each do\n      @ssh = SshMod::SshHost.new \"servername\", \"user\", \"wrong_password\"\n\n  end\nend\n\ndescribe \"#new\" do\n  it \"takes three parameters and returns sshhostobject\" do\n        @ssh.should_be_an_instance_of SshHost \n\n  end\nend\n\nssh_mock = double()\n\n\nexpect(SSH).to receive(:start).and_return(ssh_mock)\n</code></pre>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1354, "user_id": 2038040, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2cfa32679d5a9238f25a368e7894c10a?s=128&d=identicon&r=PG", "display_name": "Kevin Monk", "link": "https://stackoverflow.com/users/2038040/kevin-monk"}, "edited": false, "score": 0, "creation_date": 1471386689, "post_id": 38985032, "comment_id": 65323689, "body": "Is there an application.css file in your assets/stylesheets directory? I think this error is related to a missing file."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6723809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVoadWUuY_4/AAAAAAAAAAI/AAAAAAAAALk/c8i8Yxc90Dw/photo.jpg?sz=128", "display_name": "samuel janes", "link": "https://stackoverflow.com/users/6723809/samuel-janes"}, "edited": false, "score": 0, "creation_date": 1471401343, "post_id": 38986025, "comment_id": 65327047, "body": "Thanks! My issue might have been that my scss file was named application.css.scss"}], "tags": [], "owner": {"reputation": 1048, "user_id": 6166821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LpwuPY2Vfjw/AAAAAAAAAAI/AAAAAAAADS0/aT3BFBVyQEQ/photo.jpg?sz=128", "display_name": "Hasmukh Rathod", "link": "https://stackoverflow.com/users/6166821/hasmukh-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1471401852, "last_edit_date": 1471401852, "creation_date": 1471390422, "answer_id": 38986025, "question_id": 38985032, "link": "https://stackoverflow.com/questions/38985032/errnoenoent-in-postsindex/38986025#38986025", "title": "Errno::ENOENT in Posts#index", "body": "<p>First, <code>stylesheet_link_tag</code>, returns a stylesheet link tag for the sources specified as arguments. It will check <code>application.scss</code> or <code>application.css</code> in your <code>app/assets/stylsheets</code>. Make sure <code>application.css</code> or <code>application.scss</code> exist in that specified path.</p>\n\n<p>Second, if file exist, then reinstall gem using,</p>\n\n<pre><code>bundle install -f \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 6723809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVoadWUuY_4/AAAAAAAAAAI/AAAAAAAAALk/c8i8Yxc90Dw/photo.jpg?sz=128", "display_name": "samuel janes", "link": "https://stackoverflow.com/users/6723809/samuel-janes"}, "is_accepted": false, "score": 0, "last_activity_date": 1480107751, "last_edit_date": 1592644375, "creation_date": 1480107751, "answer_id": 40812239, "question_id": 38985032, "link": "https://stackoverflow.com/questions/38985032/errnoenoent-in-postsindex/40812239#40812239", "title": "Errno::ENOENT in Posts#index", "body": "<h1>answer</h1>\n<p>The way I fixed this was by getting rid of the require.tree in application.css and application.js</p>\n"}], "owner": {"reputation": 13, "user_id": 6723809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVoadWUuY_4/AAAAAAAAAAI/AAAAAAAAALk/c8i8Yxc90Dw/photo.jpg?sz=128", "display_name": "samuel janes", "link": "https://stackoverflow.com/users/6723809/samuel-janes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480107751, "creation_date": 1471384217, "last_edit_date": 1471385169, "question_id": 38985032, "link": "https://stackoverflow.com/questions/38985032/errnoenoent-in-postsindex", "title": "Errno::ENOENT in Posts#index", "body": "<p>I created a model called Post for my rails projects\nthe problem is i keep on getting this error:</p>\n\n<pre><code>Errno::ENOENT in Posts#index\nShowing C:/Users/Sam's/Desktop/Websites/projects/christina/cp-blog/app/views/layouts/application.html.erb where line #5 raised:\n</code></pre>\n\n<p>My application.html.erb file looks like this</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Title&lt;/title&gt;\n        &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n        &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n        &lt;%= csrf_meta_tags %&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n    &lt;%= yield %&gt;\n\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Is there any way to fix this (I already install nodejs and restarted windows)</p>\n"}, {"tags": ["ruby", "ipv6", "ipv4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471385638, "post_id": 38984972, "comment_id": 65323332, "body": "IP doesn&#39;t work that way, does it? You can encapsulate an IPv4 address within IPv6, it&#39;s part of the specification, but the reverse requires an IPv4 to IPv6 proxy."}, {"owner": {"reputation": 8333, "user_id": 813192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dee82a22b9a73f459fe180128811e4c1?s=128&d=identicon&r=PG", "display_name": "Sander Steffann", "link": "https://stackoverflow.com/users/813192/sander-steffann"}, "edited": false, "score": 0, "creation_date": 1471386131, "post_id": 38984972, "comment_id": 65323500, "body": "IPv4 and IPv6 are different protocols. There is a representation of IPv4 addresses in IPv6 notation, but that doesn&#39;t mean you can just convert addresses between the different protocols. They are different and have to be handled separately."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1471386908, "creation_date": 1471386908, "answer_id": 38985534, "question_id": 38984972, "link": "https://stackoverflow.com/questions/38984972/ruby-how-to-convert-ipv6-uo-address-to-ipv4-ip-address/38985534#38985534", "title": "Ruby: How to convert ipv6 uo address to ipv4 ip address?", "body": "<p>Firstly, it's important to understand that it's impossible to convert most IPv6 addresses to IPv4 addresses (for several reasons, the most obvious being that there's no way to fit a 128-bit number into 32 bits). The only IPv6 addresses that can be converted to IPv4 are ones that are mapped from IPv4 address (such as those produced by <code>IPAddr#ipv4_mapped</code>). For that, we have <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/ipaddr/rdoc/IPAddr.html#method-i-native\" rel=\"nofollow\"><code>IPAddr#native</code></a>:</p>\n\n<pre><code>require \"ipaddr\"\n\nip = IPAddr.new(\"192.168.2.128\")\nipv6 = ip.ipv4_mapped\nputs ipv6.native\n# =&gt; 192.168.2.128\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 3976543, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c0bd63442561e8bfb34e8dfedee4060b?s=128&d=identicon&r=PG&f=1", "display_name": "LOCKLOCK", "link": "https://stackoverflow.com/users/3976543/locklock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "accepted_answer_id": 38985534, "answer_count": 1, "score": 0, "last_activity_date": 1471386908, "creation_date": 1471383945, "question_id": 38984972, "link": "https://stackoverflow.com/questions/38984972/ruby-how-to-convert-ipv6-uo-address-to-ipv4-ip-address", "title": "Ruby: How to convert ipv6 uo address to ipv4 ip address?", "body": "<p>It is easy to convert ipv4 to ipv6 with ipv4_mapped. But how about the other around?</p>\n\n<p>I did not find a way to do that in IpAddr documentation.</p>\n"}, {"tags": ["ruby", "web-scraping", "automation", "nokogiri", "mechanize"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1984994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1fc4a2c3a5fafd5431a49491a8a7d0?s=128&d=identicon&r=PG", "display_name": "Mitchell", "link": "https://stackoverflow.com/users/1984994/mitchell"}, "edited": false, "score": 0, "creation_date": 1471387564, "post_id": 38984849, "comment_id": 65323941, "body": "I thought that too at first, but it&#39;s not that (just tried it again to make sure I&#39;m not going nuts) because I&#39;m accessing the &#39;.jobtitle&#39; class earlier in the script."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1471392261, "post_id": 38984849, "comment_id": 65325154, "body": "&#39;.jobtitle&#39; is the css selector, &#39;jobtitle&#39; is the class (or part of it)."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1471383337, "creation_date": 1471383337, "answer_id": 38984849, "question_id": 38984814, "link": "https://stackoverflow.com/questions/38984814/ruby-mechanize-clicking-not-working/38984849#38984849", "title": "Ruby Mechanize Clicking Not Working", "body": "<p>The error message tells us that the object you're calling the <code>click</code> method on is <code>nil</code>. You call <code>click</code> here:</p>\n\n<pre><code>agent.current_page.link_with(:class =&gt; '.jobtitle').click\n</code></pre>\n\n<p>...so we can infer that your call to <code>link_with</code> is returning <code>nil</code>.</p>\n\n<p>I would presume that this is failing because your page doesn't have a link with a <code>class</code> attribute equal to <code>.jobtitle</code>. Rather, your page probably has a link with a <code>class</code> attribute equal to <code>jobtitle</code>. And so:</p>\n\n<pre><code>agent.current_page.link_with(:class =&gt; 'jobtitle').click\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 1984994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1fc4a2c3a5fafd5431a49491a8a7d0?s=128&d=identicon&r=PG", "display_name": "Mitchell", "link": "https://stackoverflow.com/users/1984994/mitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471383337, "creation_date": 1471383082, "question_id": 38984814, "link": "https://stackoverflow.com/questions/38984814/ruby-mechanize-clicking-not-working", "title": "Ruby Mechanize Clicking Not Working", "body": "<p>Here's the scraping part of my code right now</p>\n\n<pre><code>while counter &lt;= 3\n  url = \"http://www.indeed.ca/jobs?q=\" &lt;&lt; job_title_search &lt;&lt; \"&amp;l=\" &lt;&lt; job_location &lt;&lt; \",+ON&amp;start=\" &lt;&lt; (counter * 20).to_s\n  counter += 1\n  doc = Nokogiri::HTML(open(url))\n\n  # can't put in if loop to only perform once for some reason\n  page = agent.get(url)\n\n  current_page = agent.page.uri\n  puts current_page\n\n  doc.css(\".result\").each do |item|\n    job_title = item.at_css(\".jobtitle\").text[/[^\\s][a-zA-Z -]*/]\n    job_company = item.at_css(\".company\").text[/[^\\s][a-zA-Z -]*/]\n    full_job = job_title + \" - \" + job_company\n\n    agent.current_page.link_with(:class =&gt; '.jobtitle').click\n    posting_page = agent.page.uri\n    puts posting_page\n\n    if cache.include?(full_job) == false\n      cache &lt;&lt; full_job\n      puts \"#{job_title} - #{job_company}\"\n    end\n  end\n\n  puts \"\"\nend\n</code></pre>\n\n<p>I know for a fact that the '.jobtitle' class exists, because the part that returns the position title works fine. What I'm trying to figure out is why Mechanize is not allowing me to use the 'click' function. In other tests I've done on the wikipedia main page, it works fine on CSS IDs, classes, &amp; text. </p>\n\n<p>So my question is what is causing it to fail on the click function? The error it generates is the generic \"undefined method 'click' for nil:NilClass\".</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28753, "user_id": 371184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cebee1b08fb960edf79a359af330391a?s=128&d=identicon&r=PG", "display_name": "Mike Cluck", "link": "https://stackoverflow.com/users/371184/mike-cluck"}, "edited": false, "score": 0, "creation_date": 1471382947, "post_id": 38984697, "comment_id": 65322264, "body": "Why not just add a data attribute to the <code>div</code> and use that value to do your redirecting?"}, {"owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "edited": false, "score": 0, "creation_date": 1471383229, "post_id": 38984697, "comment_id": 65322376, "body": "try this `window.location.href = &quot; #{ link_to(post) }&quot;;"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "edited": false, "score": 0, "creation_date": 1471383253, "post_id": 38984697, "comment_id": 65322391, "body": "@BrenoPerucchi no that is broken"}], "answers": [{"tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": true, "score": 1, "last_activity_date": 1471383233, "creation_date": 1471383233, "answer_id": 38984835, "question_id": 38984697, "link": "https://stackoverflow.com/questions/38984697/rails-add-ruby-parameter-to-javascript/38984835#38984835", "title": "Rails, add ruby parameter to javascript", "body": "<p><code>link_to</code> will generate a full <code>&lt;a&gt;</code> element</p>\n\n<p>You should use <code>post_path(post)</code> or <code>post_url(post)</code> instead if you just want the path or url</p>\n"}, {"comments": [{"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1471386177, "post_id": 38984871, "comment_id": 65323519, "body": "Yes, I aware of that. But this is bad decision for me."}], "tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1471383453, "creation_date": 1471383453, "answer_id": 38984871, "question_id": 38984697, "link": "https://stackoverflow.com/questions/38984697/rails-add-ruby-parameter-to-javascript/38984871#38984871", "title": "Rails, add ruby parameter to javascript", "body": "<p>You can pass a <code>block</code> to <code>link_to</code> helper like</p>\n\n<pre><code>&lt;% @posts.each do |post| %&gt;\n  &lt;%= link_to post do %&gt;\n    &lt;div class=\"post-on-main-page\"&gt;\n     &lt;!-- Fill in your content --&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will generate a div which will link to <code>posts#show</code> page.</p>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 38984835, "answer_count": 2, "score": 0, "last_activity_date": 1471383453, "creation_date": 1471382536, "question_id": 38984697, "link": "https://stackoverflow.com/questions/38984697/rails-add-ruby-parameter-to-javascript", "title": "Rails, add ruby parameter to javascript", "body": "<p>I have a div, and I want it to be a link to other page. Usually we do it like this <code>link_to link</code>. </p>\n\n<pre><code>&lt;% for post in @posts %&gt;\n   &lt;%= link_to \"Post\", post %&gt; # -&gt; or &lt;%= link_to(post) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But i need to whole div to be a link with js. So, i did:</p>\n\n<pre><code>&lt;% for post in @posts %&gt;\n    &lt;div class=\"post-on-main-page-&lt;%= div_count %&gt;\" &gt;\n        &lt;script&gt;\n           $(\".post-on-main-page-&lt;%= div_count %&gt;\").click(function(){\n                window.location.href = \"&lt;%= link_to(post) %&gt;\";\n              });\n        &lt;/script&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But i doesn't work.</p>\n\n<p>I need to <code>window.location.href = \"&lt;%= link_to(post) %&gt;\";</code> where post is a parameter, to give me a link to that post.</p>\n\n<p>So how I can make this to work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 4017, "user_id": 621808, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/48cb98469d9ec304a7c45a83d3eaf29e?s=128&d=identicon&r=PG", "display_name": "learner2010", "link": "https://stackoverflow.com/users/621808/learner2010"}, "edited": false, "score": 0, "creation_date": 1471444516, "post_id": 38985115, "comment_id": 65350901, "body": "Thanks max for the answer. When I run this rake task in the context of my app server, would it actually go through each gem dependency of the server and get the file?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 4017, "user_id": 621808, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/48cb98469d9ec304a7c45a83d3eaf29e?s=128&d=identicon&r=PG", "display_name": "learner2010", "link": "https://stackoverflow.com/users/621808/learner2010"}, "edited": false, "score": 0, "creation_date": 1471449268, "post_id": 38985115, "comment_id": 65354166, "body": "No. It copies a single file into public. I was just showed how you can do she&#39;ll scripting in ruby"}, {"owner": {"reputation": 4017, "user_id": 621808, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/48cb98469d9ec304a7c45a83d3eaf29e?s=128&d=identicon&r=PG", "display_name": "learner2010", "link": "https://stackoverflow.com/users/621808/learner2010"}, "edited": false, "score": 0, "creation_date": 1471452627, "post_id": 38985115, "comment_id": 65356119, "body": "My main issue is how do I go through each dependent gem and get the file"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 4017, "user_id": 621808, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/48cb98469d9ec304a7c45a83d3eaf29e?s=128&d=identicon&r=PG", "display_name": "learner2010", "link": "https://stackoverflow.com/users/621808/learner2010"}, "edited": false, "score": 0, "creation_date": 1471460858, "post_id": 38985115, "comment_id": 65360586, "body": "well, you are already going in and manually adding each gem to the gemfile. Is it really so much work to list their assets in <code>application.js</code> and <code>application.css</code>?"}, {"owner": {"reputation": 4017, "user_id": 621808, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/48cb98469d9ec304a7c45a83d3eaf29e?s=128&d=identicon&r=PG", "display_name": "learner2010", "link": "https://stackoverflow.com/users/621808/learner2010"}, "edited": false, "score": 0, "creation_date": 1471462113, "post_id": 38985115, "comment_id": 65361172, "body": "I agree. However, that is something which I don&#39;t want to do. I want to see if there is a way this can be done on the application server level so that each gem owner does not need to add it to the application.js and css"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1471384587, "creation_date": 1471384587, "answer_id": 38985115, "question_id": 38984694, "link": "https://stackoverflow.com/questions/38984694/creating-a-script-that-will-pull-in-a-particular-file-from-each-dependency-of-a/38985115#38985115", "title": "Creating a script that will pull in a particular file from each dependency of a Rails Server", "body": "<p>Here is a rake task that can assist with that:</p>\n\n<pre><code>task :copy_file_to_public, [:path] do |task, args|\n  path = args[:path]\n  raise(ArgumentError, \"#{path} doesnt exist\") unless File.exists?(path)\n  file_name = path.split(\"/\")[-1]\n  public_path = \"./public/#{file_name}\"\n  raise(ArgumentError, \"#{file_name} already exists in public\") if File.exists?(public_path)\n  `cp \"#{path}\" \"#{public_path}\"`\nend\n</code></pre>\n\n<p>From shell:</p>\n\n<pre><code>rake copy_file_to_public[/path/to/file]\n</code></pre>\n"}], "owner": {"reputation": 4017, "user_id": 621808, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/48cb98469d9ec304a7c45a83d3eaf29e?s=128&d=identicon&r=PG", "display_name": "learner2010", "link": "https://stackoverflow.com/users/621808/learner2010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471384587, "creation_date": 1471382523, "question_id": 38984694, "link": "https://stackoverflow.com/questions/38984694/creating-a-script-that-will-pull-in-a-particular-file-from-each-dependency-of-a", "title": "Creating a script that will pull in a particular file from each dependency of a Rails Server", "body": "<p>I am trying to achieve the following - \nI have a rails server that has multiple dependent gems. I am trying to see if there is a script that can be run on application initialization, that would look for a file,in a certain location in each of the dependent gems. \nI am trying to achieve something similar to what sprockets does during the precompilation process (where it would get the js and css files in the app/assets folder of each of the servers dependent gems and put them in the public folder).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 6291356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ae1aa305d2c39347e58ae2f5bce4c54?s=128&d=identicon&r=PG&f=1", "display_name": "EffeBi", "link": "https://stackoverflow.com/users/6291356/effebi"}, "edited": false, "score": 0, "creation_date": 1471387003, "post_id": 38984742, "comment_id": 65323776, "body": "For query with like params, is there a way to use couple &quot;field/value&quot; as in my first example?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 199, "user_id": 6291356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ae1aa305d2c39347e58ae2f5bce4c54?s=128&d=identicon&r=PG&f=1", "display_name": "EffeBi", "link": "https://stackoverflow.com/users/6291356/effebi"}, "edited": false, "score": 0, "creation_date": 1471388310, "post_id": 38984742, "comment_id": 65324163, "body": "I fear there isn&#39;t, I&#39;m sorry."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1471382777, "creation_date": 1471382777, "answer_id": 38984742, "question_id": 38984664, "link": "https://stackoverflow.com/questions/38984664/ror-active-record-query-with-exact-match-and-like/38984742#38984742", "title": "RoR - Active record query with exact match and &#39;LIKE&#39;", "body": "<p>I think the only issue is that you need double quote for interpolation. Try</p>\n\n<pre><code>\"%#{@f_address}%\"\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 6291356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ae1aa305d2c39347e58ae2f5bce4c54?s=128&d=identicon&r=PG&f=1", "display_name": "EffeBi", "link": "https://stackoverflow.com/users/6291356/effebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 38984742, "answer_count": 1, "score": 0, "last_activity_date": 1471382777, "creation_date": 1471382382, "question_id": 38984664, "link": "https://stackoverflow.com/questions/38984664/ror-active-record-query-with-exact-match-and-like", "title": "RoR - Active record query with exact match and &#39;LIKE&#39;", "body": "<p>i need to build a ActiveRecord query in RoR environment, with 'exact match' and 'LIKE' as 'Where' params.</p>\n\n<p>this is an example:</p>\n\n<pre><code>@find = Person.where(name: @f_name, surname: @f_surname, address: @f_address)\n</code></pre>\n\n<p>in the exaple, name and surname are exact match, but address must be something like \"like %@f_address%\", but ii can't goal it !!!</p>\n\n<p>i tried also</p>\n\n<pre><code>@find = Person.where('name LIKE ? and surname LIKE ? and address LIKE ?', @f_name, @f_surname, '%#{@f_address}%')\n</code></pre>\n\n<p>But the result is the same!</p>\n\n<p>Can someone help me?\nThanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "redirect"], "answers": [{"comments": [{"owner": {"reputation": 3642, "user_id": 4593743, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0212ffc5054bff1695ffa1e46f357746?s=128&d=identicon&r=PG&f=1", "display_name": "python", "link": "https://stackoverflow.com/users/4593743/python"}, "edited": false, "score": 0, "creation_date": 1471380478, "post_id": 38984091, "comment_id": 65321117, "body": "what will be the named <code>url_for</code> for <code>@user</code> record?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3642, "user_id": 4593743, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0212ffc5054bff1695ffa1e46f357746?s=128&d=identicon&r=PG&f=1", "display_name": "python", "link": "https://stackoverflow.com/users/4593743/python"}, "edited": false, "score": 1, "creation_date": 1471380890, "post_id": 38984091, "comment_id": 65321321, "body": "@python It automagically figures it out based on the most logical route for that model, by default <code>user_path</code>."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 5, "last_activity_date": 1471380345, "last_edit_date": 1471380345, "creation_date": 1471380029, "answer_id": 38984091, "question_id": 38984052, "link": "https://stackoverflow.com/questions/38984052/what-does-redirecting-to-an-instance-mean-in-ruby-on-rails/38984091#38984091", "title": "What does redirecting to an instance mean in Ruby on Rails", "body": "<p>If you check the <a href=\"http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to\" rel=\"nofollow\">redirect_to</a> documentation, you will find this.</p>\n\n<p><strong>Record</strong> - The URL will be generated by calling <code>url_for</code> with the <code>options</code>, which will reference a named URL for that record.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 1048617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6c38087c9ad6f3daafb95bc49ecd1d?s=128&d=identicon&r=PG", "display_name": "danielsellergren", "link": "https://stackoverflow.com/users/1048617/danielsellergren"}, "is_accepted": false, "score": 3, "last_activity_date": 1471380138, "creation_date": 1471380138, "answer_id": 38984115, "question_id": 38984052, "link": "https://stackoverflow.com/questions/38984052/what-does-redirecting-to-an-instance-mean-in-ruby-on-rails/38984115#38984115", "title": "What does redirecting to an instance mean in Ruby on Rails", "body": "<p>It's Rails \"magic\" for redirecting to the <code>#show</code> action for that <code>@user</code> using <code>GET</code>. You'll find similar things in default Rails forms as well, but for actions like <code>POST</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 3, "last_activity_date": 1471380834, "creation_date": 1471380834, "answer_id": 38984301, "question_id": 38984052, "link": "https://stackoverflow.com/questions/38984052/what-does-redirecting-to-an-instance-mean-in-ruby-on-rails/38984301#38984301", "title": "What does redirecting to an instance mean in Ruby on Rails", "body": "<p>According to section <a href=\"https://www.railstutorial.org/book/sign_up#sec-the_finished_signup_form\" rel=\"nofollow\">7.4.1</a> from Michael Hartl's <em>The Rails Tutorial</em>:</p>\n\n<pre><code>redirect_to @user\n</code></pre>\n\n<p>can be written instead of</p>\n\n<pre><code>redirect_to user_url(@user)\n</code></pre>\n\n<p>Quoting Michael Hartl:</p>\n\n<blockquote>\n  <p>This is because Rails automatically infers from <strong>redirect_to @user</strong> that\n  we want to redirect to <strong>user_url(@user)</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 3642, "user_id": 4593743, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0212ffc5054bff1695ffa1e46f357746?s=128&d=identicon&r=PG&f=1", "display_name": "python", "link": "https://stackoverflow.com/users/4593743/python"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 38984091, "answer_count": 3, "score": 1, "last_activity_date": 1471382154, "creation_date": 1471379903, "last_edit_date": 1471382154, "question_id": 38984052, "link": "https://stackoverflow.com/questions/38984052/what-does-redirecting-to-an-instance-mean-in-ruby-on-rails", "title": "What does redirecting to an instance mean in Ruby on Rails", "body": "<p>What does  redirecting to a particular instance mean? I am aware of how the redirecting works.</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      log_in @user\n      flash[:success] = \"Welcome to the Sample App!\"\n      redirect_to @user\n    else\n      render 'new'\n    end\n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:name, :email, :password,\n                                   :password_confirmation)\n    end\nend\n</code></pre>\n\n<p>I understand the following ways of redirecting: </p>\n\n<ul>\n<li><code>redirect_to :new</code> (redirect to new method and displaying the new.html.erb file)</li>\n<li><code>redirect_to \"show\"</code>  (redirect to show.html.erb file or the path for show method) </li>\n</ul>\n\n<p>but what does <code>redirect_to @user</code> mean? Which method and path are we are redirecting to?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471379004, "post_id": 38983763, "comment_id": 65320399, "body": "Should this happen within the database/SQL for performance reasons or do you want a plain ruby solution?"}, {"owner": {"reputation": 23, "user_id": 5770394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f51f41de319eb982013bfb37d2baab?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. XYZ", "link": "https://stackoverflow.com/users/5770394/mr-xyz"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471379359, "post_id": 38983763, "comment_id": 65320568, "body": "Within SQL will be ok, but if you may give me a hint how to do something like that in plain ruby it would be great."}], "answers": [{"tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 0, "last_activity_date": 1471418694, "last_edit_date": 1471418694, "creation_date": 1471418291, "answer_id": 38990370, "question_id": 38983763, "link": "https://stackoverflow.com/questions/38983763/is-it-possible-in-rails-to-create-custom-order-method-for-model/38990370#38990370", "title": "Is it possible in Rails to create custom order method for model?", "body": "<p>With plain ruby</p>\n\n\n\n<pre><code># when order between 0 - 80 and &gt; 250 does not matter\nYourModel.all.to_a.sort_by do  |record| \n   if record.order_col &lt; 80 || record.order_col &gt;250\n     0 \n   else\n     1\n   end\nend\n\n# when order between 0 - 80 and &gt; 250 does matter\nYourModel.all.to_a.sort_by do  |record| \n   if record.order_col &lt; 80 || record.order_col &gt;250\n     record.order_col\n   else\n     record.order_col + YourModel.max(:order_col) + 1\n   end\nend\n</code></pre>\n\n<p>With SQL</p>\n\n\n\n<pre><code># with sql\n\nscope :ordered, find_by_sql(%(\n  SELECT your_model.* FROM your_model where value &lt; 80 OR value &gt; 250 ORDER BY id desc\n  UNION\n  SELECT your_model.* FROM your_model where value &gt;= 80 and value &lt;= 250 ORDER BY id desc\n ))\n\n# can work with mysql\nYourModel.select(:field, ..., 'IF (column &lt; 80 OR column &gt; 250, column, column + (SELECT max(column) FROM yourtable ) + 1) as order_column').order('order_column desc')\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5770394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f51f41de319eb982013bfb37d2baab?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. XYZ", "link": "https://stackoverflow.com/users/5770394/mr-xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 38990370, "answer_count": 1, "score": 0, "last_activity_date": 1471418694, "creation_date": 1471378790, "question_id": 38983763, "link": "https://stackoverflow.com/questions/38983763/is-it-possible-in-rails-to-create-custom-order-method-for-model", "title": "Is it possible in Rails to create custom order method for model?", "body": "<p>I would like to create something like a new order method for a model in my rails app. This order method should be able to compare records by one column. At the beginning of the list should be records with the highest( > 250) and the lowest( &lt; 80) value of that column and others(with avarage value between 80 and 250) should be at the end of list. Is it possible to do it in rails ?</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1471378458, "post_id": 38983631, "comment_id": 65320139, "body": "password_verify isn&#39;t very complicated. pass in the new pw and original pw hash. yank the crypt method + salt out of the hash, use those to re-hash the new pw, then compare resulting hash values."}, {"owner": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "reply_to_user": {"reputation": 12759, "user_id": 2263631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/WC0BS.jpg?s=128&g=1", "display_name": "Script47", "link": "https://stackoverflow.com/users/2263631/script47"}, "edited": false, "score": 0, "creation_date": 1471378503, "post_id": 38983631, "comment_id": 65320162, "body": "@Script47 Yep, it&#39;s supposed to be there."}, {"owner": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1471378543, "post_id": 38983631, "comment_id": 65320193, "body": "@MarcB Yep, that&#39;s essentially what I&#39;m trying to do. It <i>should</i> be using bcrypt from what I understand of it, so the rails portion should work, I would have thought"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471378743, "post_id": 38983631, "comment_id": 65320295, "body": "<code>password_hash</code> is supposed to work without needing a salt. Adding one just messes things up. Why are you doing that?"}, {"owner": {"reputation": 28594, "user_id": 2370483, "user_type": "moderator", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Y0oJ0.jpg?s=128&g=1", "display_name": "Machavity", "link": "https://stackoverflow.com/users/2370483/machavity"}, "edited": false, "score": 1, "creation_date": 1471378980, "post_id": 38983631, "comment_id": 65320391, "body": "<a href=\"http://stackoverflow.com/questions/14992367/using-php-5-5s-password-hash-and-verify-function-am-i-doing-it-right\">Please don&#39;t add your own salt to password_hash</a>. Let it add its own. You will get the salt stored in the hash"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 28594, "user_id": 2370483, "user_type": "moderator", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Y0oJ0.jpg?s=128&g=1", "display_name": "Machavity", "link": "https://stackoverflow.com/users/2370483/machavity"}, "edited": false, "score": 0, "creation_date": 1471379007, "post_id": 38983631, "comment_id": 65320401, "body": "@Machavity Totally agreed, but it looks like the damage is done here."}, {"owner": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "reply_to_user": {"reputation": 28594, "user_id": 2370483, "user_type": "moderator", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Y0oJ0.jpg?s=128&g=1", "display_name": "Machavity", "link": "https://stackoverflow.com/users/2370483/machavity"}, "edited": false, "score": 0, "creation_date": 1471379586, "post_id": 38983631, "comment_id": 65320683, "body": "@Machavity Yes, I&#39;m aware. I didn&#39;t make the current site, just trying to convert it, that provides nothing towards my solution."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "edited": false, "score": 0, "creation_date": 1471379392, "post_id": 38983797, "comment_id": 65320585, "body": "Yep, as I said in the question, I already know which passwords are which, it&#39;s just a matter of (in ruby) verifying the password with the PHP hash. I&#39;m wanting to keep the password_version as there is an even older legacy password version being used as the current site didn&#39;t replace these with the new format, it just allowed them to continue working. I&#39;ve gotten that one working fine as it was just a hash with a salt"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "edited": false, "score": 0, "creation_date": 1471379565, "post_id": 38983797, "comment_id": 65320675, "body": "I&#39;m saying it <i>should</i> replace them with the new version. Do you have some test data here that can be used to illustrate the desired output?"}, {"owner": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "edited": false, "score": 0, "creation_date": 1471379627, "post_id": 38983797, "comment_id": 65320704, "body": "It&#39;s going to replace them, the old version didn&#39;t so I&#39;m converting two older password hashing methods to the new one using BCrypt"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "edited": false, "score": 0, "creation_date": 1471380019, "post_id": 38983797, "comment_id": 65320901, "body": "@jakeb I&#39;ve updated the answer with some example code. Your <code>valid_password?</code> method will need to take both the supplied password and your legacy <code>salt</code> value."}, {"owner": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "edited": false, "score": 0, "creation_date": 1471381273, "post_id": 38983797, "comment_id": 65321509, "body": "Yep! That did it, thanks. For some reason you mentioning that PHP&#39;s starting with $2y didn&#39;t even make me think to replace it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "edited": false, "score": 1, "creation_date": 1471384571, "post_id": 38983797, "comment_id": 65322940, "body": "@jakeb I&#39;ve had to do something similar to this when dealing with PHP passwords in Python and Node.js before. Glad it worked!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 5, "last_activity_date": 1471379986, "last_edit_date": 1471379986, "creation_date": 1471378881, "answer_id": 38983797, "question_id": 38983631, "link": "https://stackoverflow.com/questions/38983631/convert-phps-password-verify-to-ruby-on-rails/38983797#38983797", "title": "Convert PHP&#39;s password_verify to Ruby on Rails", "body": "<p>The format of a PHP <code>password_hash</code> password looks roughly like this:</p>\n\n<pre><code>$2y$10$.vGA1O9wmRjrwAVXD98HNOgsNpDczlqm3Jq7KnEd1rVAGv3Fykk1a\n</code></pre>\n\n<p>The default Ruby Bcrypt method produces passwords of the form:</p>\n\n<pre><code>$2a$10$GtKs1Kbsig8ULHZzO1h2TetZfhO4Fmlxphp8bVKnUlZCBYYClPohG\n</code></pre>\n\n<p>For a clean solution here you can always differentiate between the two by the <code>$2y</code> or <code>$2a</code> prefix. There's no need for a format column when it's already baked into the format.</p>\n\n<p>For example:</p>\n\n<pre><code>case (encrypted_password[0,3])\nwhen '$2y'\n  # Legacy PHP password\n  BCrypt::Password.new(encrypted_password.sub(/\\A\\$2y/, '$2a')).is_password?(salt + password + salt)\nwhen '$2a'\n  # Ruby BCrypt password\n  BCrypt::Password.new(encrypted_password).is_password?(password) \nelse\n  # Unexpected type?\nend\n</code></pre>\n\n<p>What you'll want to do on a successful verification of password is re-write the password to the database using Ruby's method to gradually replace all the old PHP formatted ones.</p>\n"}], "owner": {"reputation": 43, "user_id": 5423723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad8c812f7ec1d0a2f9e9ca7373913ff?s=128&d=identicon&r=PG&f=1", "display_name": "jakeb", "link": "https://stackoverflow.com/users/5423723/jakeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 38983797, "answer_count": 1, "score": 4, "last_activity_date": 1471379986, "creation_date": 1471378271, "question_id": 38983631, "link": "https://stackoverflow.com/questions/38983631/convert-phps-password-verify-to-ruby-on-rails", "title": "Convert PHP&#39;s password_verify to Ruby on Rails", "body": "<p>We're in the process of converting our site from an old PHP framework to Rails, and would really like for users to continue being able to login with their old password. On the old site, we're using password_hash and password_verify to hash and verify the passwords. However, on Rails I can't seem to get it to verify the old password.</p>\n\n<p>Here is what we have in PHP:</p>\n\n<p>Hash:</p>\n\n<pre><code>password_hash($user['salt'] . $password . $user['salt'], PASSWORD_DEFAULT);\n</code></pre>\n\n<p>Verify:</p>\n\n<pre><code>password_verify($user['salt'] . $password . $user['salt'], $user['password'])\n</code></pre>\n\n<p>On the new Rails framework we're using Devise and have built a custom migration script to move everything over and identify the correct password hashing method based on a password_version stored in the db, and this is what I'm using inside my User model:</p>\n\n<pre><code>def valid_password?(password)\n  if password_version == 'legacy'\n    hash = BCrypt::Password.new(encrypted_password)\n    hash_str = password_salt+password+password_salt\n\n    return hash.is_password? hash_str\n  end\n\n  super(password)\nend\n</code></pre>\n\n<p>Any ideas would be greatly appreciated</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471378880, "post_id": 38983660, "comment_id": 65320357, "body": "I&#39;d much rather work on chained-reassigning code. I think I&#39;ve used <code>reject!</code> and <code>map!</code> only a handful of times, but I&#39;ve used <code>reject</code> and <code>map</code> more times than I can count."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471379062, "post_id": 38983660, "comment_id": 65320427, "body": "@theTinMan Totally agreed, though my ratio is more like 1 in 50 times for the in-place versions versus their copy yielding counterparts."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471379225, "post_id": 38983660, "comment_id": 65320508, "body": "I have to confess I still drag around a Perl-based mentality of chaining array and hash processing. Old dogs and all that."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1471378387, "creation_date": 1471378387, "answer_id": 38983660, "question_id": 38983589, "link": "https://stackoverflow.com/questions/38983589/how-to-filter-out-empty-elements-in-arrays/38983660#38983660", "title": "How to filter out empty elements in arrays", "body": "<p>You've got to be careful when using in-place modifiers. As <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-reject-21\" rel=\"nofollow\">the documentation for <code>reject!</code> says</a>:</p>\n\n<blockquote>\n  <p>Deletes every element of <code>self</code> for which the block evaluates to <em>true</em>, if no changes were made returns <code>nil</code>.</p>\n</blockquote>\n\n<p>Due to that feature, you can't chain these like you can the versions that reliably make copies.</p>\n\n<p>What you can do is do it on two lines:</p>\n\n<pre><code>survey.reject!(&amp;:empty?)\nsurvey.map! { |feedback| %(_\"#{feedback}\"_) }\n</code></pre>\n\n<p>Or you can chain-reassign:</p>\n\n<pre><code>survey = survey.reject(&amp;:empty?).map { |feedback| %(_\"#{feedback}\"_) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471378732, "post_id": 38983696, "comment_id": 65320285, "body": "Definitely don&#39;t use side-effects. Their use might be clear to the person writing the code initially, but their effect very likely won&#39;t be obvious to the person maintaining the code. Even well documented code that isn&#39;t obvious can be a problem late at night or when in a rush to fix a production-down problem."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1471378831, "last_edit_date": 1471378831, "creation_date": 1471378532, "answer_id": 38983696, "question_id": 38983589, "link": "https://stackoverflow.com/questions/38983589/how-to-filter-out-empty-elements-in-arrays/38983696#38983696", "title": "How to filter out empty elements in arrays", "body": "<p><a href=\"http://ruby-doc.org/core/Array.html#method-i-reject-21\" rel=\"nofollow\"><code>Array#reject!</code></a> returns <code>nil</code> if it didn't change anything. <code>nil</code> doesn't have a <code>map!</code> method, so you get a <code>NoMethodError</code>.</p>\n\n<p>Why are you chaining side-effecting methods anyway? The purpose of a side-effecting method is its side-effect, not its return value. You can just do </p>\n\n<pre><code>survey.reject!(&amp;:empty?)\nsurvey.map! { |feedback| %(_\"#{feedback}\"_) }\n</code></pre>\n\n<p>Or, better yet: don't use side-effects. They're evil.</p>\n\n<pre><code>survey = survey.reject(&amp;:empty?).map { |feedback| %(_\"#{feedback}\"_) }\n</code></pre>\n\n<p>Note, however, that this does <em>not</em> do the same thing as the above: the above mutates the single object that is <em>referenced</em> by <code>survey</code>. This mutates the reference <code>survey</code> itself and makes it point to a <em>different</em> object.</p>\n\n<p>This is cleaner overall, but if there is other code in your system that depends on mutable shared state and side-effects, it will have to be changed, too.</p>\n"}], "owner": {"reputation": 307, "user_id": 6499808, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9246686a538bc4ad55e6a155f034bc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Mega Man", "link": "https://stackoverflow.com/users/6499808/mega-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 38983660, "answer_count": 2, "score": 1, "last_activity_date": 1471382245, "creation_date": 1471378126, "last_edit_date": 1471382245, "question_id": 38983589, "link": "https://stackoverflow.com/questions/38983589/how-to-filter-out-empty-elements-in-arrays", "title": "How to filter out empty elements in arrays", "body": "<p>I have a line of code that iterates over an array and rejects any empty elements: </p>\n\n<pre><code>survey.reject!(&amp;:empty?).map! { |feedback| %(_\"#{feedback}\"_) }\n</code></pre>\n\n<p>If the entire array is empty, this works as expected.  If one of the elements in the array is not empty I get an error <code>map!</code> doesn't exist.  </p>\n\n<p>This, however, has no problems:</p>\n\n<pre><code>survey.map! { |feedback| %(_\"#{feedback}_\") }\n</code></pre>\n\n<p>The <code>reject</code> function works when the entire array is empty, and <code>map!</code> version works when the array isn't empty.  How can I best consolidate these?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": false, "score": 0, "last_activity_date": 1471373851, "creation_date": 1471373851, "answer_id": 38982511, "question_id": 38982330, "link": "https://stackoverflow.com/questions/38982330/display-navbar-on-all-pages-except-home-page/38982511#38982511", "title": "Display navbar on all pages except home page", "body": "<p>You can prepare two layouts, one for the landing page and another for rest of the pages. Take a look at the official documentation: <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow\">http://guides.rubyonrails.org/layouts_and_rendering.html</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 5239, "user_id": 2680864, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c913ec45c93dce4d2c18c59cd8f85edb?s=128&d=identicon&r=PG&f=1", "display_name": "r3b00t", "link": "https://stackoverflow.com/users/2680864/r3b00t"}, "is_accepted": false, "score": 2, "last_activity_date": 1471374776, "last_edit_date": 1471374776, "creation_date": 1471374182, "answer_id": 38982593, "question_id": 38982330, "link": "https://stackoverflow.com/questions/38982330/display-navbar-on-all-pages-except-home-page/38982593#38982593", "title": "Display navbar on all pages except home page", "body": "<p>I normally do following setup:</p>\n\n<ul>\n<li>create partial <code>shared/_nav_menu.html.erb</code></li>\n</ul>\n\n<p>inside partial I put logic like:</p>\n\n<pre><code>&lt;% if current_user %&gt;\n  // nav bar for logged in user\n&lt;% else %&gt;\n // nav bar for non logged in users\n&lt;% end %&gt;\n</code></pre>\n\n<p>Then inside <code>application.html.erb</code> file I render the <code>partial</code> like this:</p>\n\n<pre><code>&lt;%= render :partial =&gt; 'shared/_nav_menu' if show_menu? %&gt;\n</code></pre>\n\n<p>Inside my <code>application_controller</code> I put logic like this:</p>\n\n<pre><code>def show_menu?\n  true\nend\n\nhelper method: show_menu?\n</code></pre>\n\n<p>If I don't want to show the menu for <code>static_pages</code> then inside <code>static_pages_controller</code> I overwrite <code>show_menu?</code> method to return <code>false</code>.</p>\n\n<pre><code>class StaticPagesController &lt; ApplicationController\n  def show_menu? \n    false\n  end\n\n  helper_method: show_menu?\nend\n</code></pre>\n\n<p>You don't have to use exactly this setup but I like this setup because my <code>nav menu</code> logic is kept seperate in partial. All logic required to <code>nav menu</code> lives in this file.</p>\n\n<p>This approach don't bloat my <code>application.html.erb</code> file with lots of <code>if..else</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 6702161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa7c6d2437062f3d7cf7ef92dd266c8?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Barth", "link": "https://stackoverflow.com/users/6702161/nick-barth"}, "is_accepted": false, "score": 1, "last_activity_date": 1471374906, "creation_date": 1471374906, "answer_id": 38982789, "question_id": 38982330, "link": "https://stackoverflow.com/questions/38982330/display-navbar-on-all-pages-except-home-page/38982789#38982789", "title": "Display navbar on all pages except home page", "body": "<p>In the case of two menus, but leaving yourself open to more, I would use a similar-but-slightly-different approach than Reboot's answer.</p>\n\n<p>In the layout:</p>\n\n<pre><code>&lt;%= render :partial =&gt; @nav_bar_partial %&gt;\n</code></pre>\n\n<p>Then in my application controller, define the default nav:</p>\n\n<pre><code>def standard_nav\n  @nav_bar_partial = \"path/to/standard/nav/partial\"\nend\n</code></pre>\n\n<p>From there, you can override that nav partial any time you need to (with any partial you want) from your controller</p>\n\n<pre><code>@nav_bar_partial = \"path/to/new/nav/partial\" if condition_that_requires_a_different_nav\n</code></pre>\n\n<p>That way, you have a little more flexibility. If for some reason you want to add a third nav bar for some other condition, you can just override the partial elsewhere without changing any of the above code.</p>\n"}], "owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1471374906, "creation_date": 1471373166, "question_id": 38982330, "link": "https://stackoverflow.com/questions/38982330/display-navbar-on-all-pages-except-home-page", "title": "Display navbar on all pages except home page", "body": "<p>I want to show two different navbars. One will be displayed, on all pages except home page, when you're logged in. While the other navbar will be displayed just on my landing page.</p>\n\n<p>I am thinking that I will probably need to write an if statement.</p>\n\n<pre><code>If (current user is not logged in) or maybe (current user is viewing home page) do\n&lt;nav&gt;Second navbar&lt;/nav&gt;\nelse\n&lt;nav&gt;First navbar&lt;/nav&gt;\nend\n</code></pre>\n\n<p>I am very new to rails, so I could be wrong. (And yes, I know that's not how to correctly write an if statement in Ruby)</p>\n\n<p>Home page is located at:</p>\n\n<p>home/index.html.erb</p>\n"}, {"tags": ["ruby", "algorithm", "zip", "substring"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1471372422, "post_id": 38982024, "comment_id": 65317010, "body": "Maybe you could use a regular expression, but if you&#39;re trying to avoid ugly that&#39;s probably the wrong way to steer. One way to clean this up is to move your constants into actual constants and encapsulate this inside a class or module. Also use your constants instead of sprinkling the same magical numbers through your code."}, {"owner": {"reputation": 7206, "user_id": 153886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3494c51ae32711dc7428334ef1cafa02?s=128&d=identicon&r=PG", "display_name": "Julik", "link": "https://stackoverflow.com/users/153886/julik"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471372788, "post_id": 38982024, "comment_id": 65317236, "body": "I am using just enough constants in the <a href=\"https://github.com/WeTransfer/zip_tricks/blob/master/lib/zip_tricks/file_reader.rb\" rel=\"nofollow noreferrer\">module</a> it is coming from :-) but point taken. Regexes do seem a passing application in this case actually..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471373921, "post_id": 38982024, "comment_id": 65317871, "body": "Just watch that you don&#39;t make a Regular Expression of Death. <a href=\"http://stackstatus.net/post/147710624694/outage-postmortem-july-20-2016\" rel=\"nofollow noreferrer\">It can happen to the best of us</a>."}], "answers": [{"tags": [], "owner": {"reputation": 7206, "user_id": 153886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3494c51ae32711dc7428334ef1cafa02?s=128&d=identicon&r=PG", "display_name": "Julik", "link": "https://stackoverflow.com/users/153886/julik"}, "is_accepted": true, "score": 0, "last_activity_date": 1526339084, "creation_date": 1526339084, "answer_id": 50340193, "question_id": 38982024, "link": "https://stackoverflow.com/questions/38982024/improving-an-algorithm-for-substring-search-when-reading-zip-files/50340193#50340193", "title": "Improving an algorithm for substring search when reading ZIP files", "body": "<p>In the end I opted for the following optimization. First, I made a method for finding all the indices of a given substring in a string - there is no stdlib builtin for this.</p>\n\n<pre><code>def all_indices_of_substr_in_str(of_substring, in_string)\n  last_i = 0\n  found_at_indices = []\n  while last_i = in_string.index(of_substring, last_i)\n    found_at_indices &lt;&lt; last_i\n    last_i += of_substring.bytesize\n  end\n  found_at_indices\nend\n</code></pre>\n\n<p>Then, we use it to \"latch\" onto the offsets in our buffer where our signature was found.</p>\n\n<pre><code>def locate_eocd_signature(in_str)\n  eocd_signature = 0x06054b50\n  eocd_signature_str = [eocd_signature].pack('V')\n  unpack_pattern = 'VvvvvVVv'\n  minimum_record_size = 22\n  str_size = in_str.bytesize\n  indices = all_indices_of_substr_in_str(eocd_signature_str, in_str)\n  indices.each do |check_at|\n    maybe_record = in_str[check_at..str_size]\n    # If the record is smaller than the minimum - we will never recover anything\n    break if maybe_record.bytesize &lt; minimum_record_size\n    # Now we check if the record ends with the combination\n    # of the comment size and an arbitrary byte string of that size.\n    # If it does - we found our match\n    *_unused, comment_size = maybe_record.unpack(unpack_pattern)\n    if (maybe_record.bytesize - minimum_record_size) == comment_size\n      return check_at # Found the EOCD marker location\n    end\n  end\n  # If we haven't caught anything, return nil deliberately instead of returning the last statement\n  nil\nend\n</code></pre>\n"}], "owner": {"reputation": 7206, "user_id": 153886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3494c51ae32711dc7428334ef1cafa02?s=128&d=identicon&r=PG", "display_name": "Julik", "link": "https://stackoverflow.com/users/153886/julik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50340193, "answer_count": 1, "score": 0, "last_activity_date": 1526339084, "creation_date": 1471372057, "question_id": 38982024, "link": "https://stackoverflow.com/questions/38982024/improving-an-algorithm-for-substring-search-when-reading-zip-files", "title": "Improving an algorithm for substring search when reading ZIP files", "body": "<p>So I have a ZIP reader library, and I read ZIP files by first figuring out where the EOCD record is (the standard way \"from the tail\"). I have to look for a pattern that is roughly this:</p>\n\n<p><code>4byte_magic_number, fixed_n_bytes, 2_bytes_of_comment_size, comment</code></p>\n\n<p>The bytesize of <code>comment</code> is provided in the <code>2_bytes_of_comment_size</code>. Just scanning for the magic number is insufficient, because I eager-read a substantial portion at the tail of the file - basically the maximum size the ZIP EOCD record can be, and then look for this pattern in there.</p>\n\n<p>So far, I came up with this</p>\n\n<pre><code>def locate_eocd_signature(in_str)\n  # We have to scan from the _very_ tail. We read the very minimum size\n  # the EOCD record can have (up to and including the comment size), using\n  # a sliding window. Once our end offset matches the comment size we found our\n  # EOCD marker.\n  eocd_signature_int = 0x06054b50\n  unpack_pattern = 'VvvvvVVv'\n  minimum_record_size = 22\n  end_location = minimum_record_size * -1\n  loop do\n    # If the window is nil, we have rolled off the start of the string, nothing to do here.\n    # We use negative values because if we used positive slice indices\n    # we would have to detect the rollover ourselves\n    break unless window = in_str[end_location, minimum_record_size]\n\n    window_location = in_str.bytesize + end_location\n    unpacked = window.unpack(unpack_pattern)\n\n    # If we found the signature, pick up the comment size, and check if the size of the window\n    # plus that comment size is where we are in the string. If we are - bingo.\n    if unpacked[0] == 0x06054b50 &amp;&amp; comment_size = unpacked[-1] \n      assumed_eocd_location = in_str.bytesize - comment_size - minimum_record_size\n      # if the comment size is where we should be at - we found our EOCD\n      return assumed_eocd_location if assumed_eocd_location == window_location\n    end\n\n    end_location -= 1 # Shift the window back, by one byte, and try again.\n  end\nend\n</code></pre>\n\n<p>but it just screams <em>ugly</em> at me. Is there a better way to do something like this? Is there a <code>pack</code> specifier that says \"all the bytes in binary until the the end of the string\" that I do not know of? Then I could tack that onto the end of the pack specifier for example... A bit at loss here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "nested-resources"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "edited": false, "score": 0, "creation_date": 1471426021, "post_id": 38982686, "comment_id": 65337407, "body": "Hi, Thanks for responding! As I understand, it is not possible to do what I was doing originally, which is fine. I tried to implement what you where doing by using the includes method but i get a <b>&quot;NoMethodError in PiecesController#show&quot;, undefined method `includes&#39; for #&lt;Piece:0x000000048936f0&gt;.</b>  Do you have any idea why this is?"}], "tags": [], "owner": {"reputation": 1002, "user_id": 5479988, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z_oUVK4Wkuo/AAAAAAAAAAI/AAAAAAAAABA/vn2BD49K67M/photo.jpg?sz=128", "display_name": "Jim Van Fleet", "link": "https://stackoverflow.com/users/5479988/jim-van-fleet"}, "is_accepted": false, "score": 0, "last_activity_date": 1471374504, "creation_date": 1471374504, "answer_id": 38982686, "question_id": 38981984, "link": "https://stackoverflow.com/questions/38981984/how-to-access-nested-resource-parameters-from-parent-controller-in-ruby-on-rails/38982686#38982686", "title": "How to access nested resource parameters from parent controller in Ruby on Rails?", "body": "<p>Your question has some internal tension; you say you want access to the nested parameters from your <code>PieceController</code>, but if the request has been routed to <code>PieceController</code>, those nested parameters will not be present.  When nested parameters are present, the request will be routed to the most specific controller class for which the request provides a parameter.</p>\n\n<p>If the question can be rephrased as \"how, from within <code>PieceController</code> can I generate something like a table of contents?\" the answer looks something like this.</p>\n\n<p>In <code>PieceController</code>:</p>\n\n<pre><code>def show\n  @piece = Piece.find(params[:id]).include(sections: {subsections: :subsubsections}})\nend\n</code></pre>\n\n<p>In <code>app/views/pieces/show.html.erb</code></p>\n\n<pre><code>&lt;% @piece.sections.each do |section| %&gt;\n  &lt;%= link_to piece_section_path(@piece, section), section.title %&gt;\n  &lt;% section.subsections.each do |subsection| %&gt;\n    &lt;%= link_to piece_section_subsection_path(@piece, section, subsection), subsection.title %&gt;\n    &lt;% subsection.subsubsections.each do |subsubsection| %&gt;\n      &lt;%= link_to piece_section_subsection_subsubsection_path(@piece, section, subsection, subsubsection), subsubsection.title %&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This makes some assumptions, but hopefully the idea is clear.</p>\n"}], "owner": {"reputation": 19, "user_id": 5238724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c7f7b98d82bbfb167c4a4fbf3e1e1e53?s=128&d=identicon&r=PG", "display_name": "Kingdavidek", "link": "https://stackoverflow.com/users/5238724/kingdavidek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 774, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471374504, "creation_date": 1471371877, "question_id": 38981984, "link": "https://stackoverflow.com/questions/38981984/how-to-access-nested-resource-parameters-from-parent-controller-in-ruby-on-rails", "title": "How to access nested resource parameters from parent controller in Ruby on Rails?", "body": "<p>I started writing an app which reviews books, articles etc(model name: Piece ) and has the option to review chapters or smaller sections (Sections, Subsections, and Subsubsections models)</p>\n\n<p>I want to be able to generate a general overview of the Piece where all of the nested Sections, Subsections, and Subsubsections and their attributes will be listed in one view. So my routes.rb file looks like this:</p>\n\n<pre><code>  resources :pieces do\n     resources :sections do\n       resources :subsections do \n         resources :subsubsections\n       end\n     end\n   end\n</code></pre>\n\n<p>Which I have since learned is sloppy but its too late for me now. \nFor now, I have been able to do this from the subsubsections, because it has acces to all the parent parameters (piece_id, section_id, etc). But this means that I have to jump down the tree into the Subsubsection view and then go from there, whereas I would like to be able to access all these parameters from the Piece controller so that I can link straight from the Piece view to the more general overview, without having to go all the way down the chain.</p>\n\n<p>I apologize if this is a simple question, I only started recently. </p>\n\n<p>My models like like this:</p>\n\n<pre><code>class Subsubsection &lt; ActiveRecord::Base\n  belongs_to :subsection\nend\n\nclass Subsection &lt; ActiveRecord::Base\n  belongs_to :section\n  has_many :subsubsections\nend\n\nclass Section &lt; ActiveRecord::Base\n    belongs_to :piece\n    has_many :subsections\nend\n\nclass Piece &lt; ActiveRecord::Base\n    has_many :sections\n    has_many :links\nend\n</code></pre>\n\n<p>And the way i am accessing the general overview for now is using the index action of the subsubsections controller:</p>\n\n<pre><code>def index\n    @piece = Piece.find(params[:piece_id])\n    @section = @piece.sections.find(params[:section_id])\n    @subsection = @section.subsections.find(params[:subsection_id])\nend\n</code></pre>\n\n<p>My view accesses it like this:</p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to \"'General Piece Overview\", piece_section_subsection_subsubsections_path(@piece, @section, @subsection), class: 'section_name' %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Heres the link to the project in case it helps:</p>\n\n<p><a href=\"https://github.com/kingdavidek/StuddyBuddy\" rel=\"nofollow\">https://github.com/kingdavidek/StuddyBuddy</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "open-uri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1471379071, "post_id": 38981732, "comment_id": 65320433, "body": "You&#39;re confusing Nokogiri&#39;s purpose in your code with that of OpenURI. OpenURI makes the connection then passed it to Nokogiri to read, so your question isn&#39;t about Nokogiri and shouldn&#39;t be tagged as such. It&#39;s an OpenURI question, and should be edited to reflect that."}], "answers": [{"comments": [{"owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "edited": false, "score": 0, "creation_date": 1471371554, "post_id": 38981831, "comment_id": 65316527, "body": "Shouldn&#39;t scraping just pull all of the html data off the page in question? It&#39;s only the frontpage. Comments are just links."}, {"owner": {"reputation": 471, "user_id": 4515608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a14962d882080869b622f66585c01945?s=128&d=identicon&r=PG&f=1", "display_name": "sump", "link": "https://stackoverflow.com/users/4515608/sump"}, "reply_to_user": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "edited": false, "score": 0, "creation_date": 1471371694, "post_id": 38981831, "comment_id": 65316589, "body": "Are you trying to just get the <code>hot</code> topics? Or do you literally want every sub-reddit&#39;s name only? Without knowing what you are trying to accomplish it is difficult to give the best answer.  To answer your first question, yes in theory nokogiri should return the HTML for that page."}, {"owner": {"reputation": 2032, "user_id": 614355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cgf79.jpg?s=128&g=1", "display_name": "Abhishek Dujari", "link": "https://stackoverflow.com/users/614355/abhishek-dujari"}, "edited": false, "score": 2, "creation_date": 1471371810, "post_id": 38981831, "comment_id": 65316654, "body": "It is likely Reddit is blocking the user-agent used by open-uri. It simply return 429 as a way of saying we expect 0."}, {"owner": {"reputation": 471, "user_id": 4515608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a14962d882080869b622f66585c01945?s=128&d=identicon&r=PG&f=1", "display_name": "sump", "link": "https://stackoverflow.com/users/4515608/sump"}, "reply_to_user": {"reputation": 2032, "user_id": 614355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cgf79.jpg?s=128&g=1", "display_name": "Abhishek Dujari", "link": "https://stackoverflow.com/users/614355/abhishek-dujari"}, "edited": false, "score": 2, "creation_date": 1471371900, "post_id": 38981831, "comment_id": 65316698, "body": "@Vangel I was literally about to type that haha. Looks like youtube got on that train as well not too long ago in order to funnel users to their API. Regardless though, when a site makes an API available it makes more sense from a developer standpoint to use that vs scraping."}, {"owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "edited": false, "score": 0, "creation_date": 1471371999, "post_id": 38981831, "comment_id": 65316769, "body": "Write it as an answer for me so I can mark it as resolved! edit: sorry, I meant add the you-can&#39;t-use-nokogiri part"}], "tags": [], "owner": {"reputation": 471, "user_id": 4515608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a14962d882080869b622f66585c01945?s=128&d=identicon&r=PG&f=1", "display_name": "sump", "link": "https://stackoverflow.com/users/4515608/sump"}, "is_accepted": true, "score": 4, "last_activity_date": 1471379281, "last_edit_date": 1471379281, "creation_date": 1471371362, "answer_id": 38981831, "question_id": 38981732, "link": "https://stackoverflow.com/questions/38981732/scraping-reddit-using-nokogiri-429-too-many-requests/38981831#38981831", "title": "Scraping Reddit using Nokogiri (429 too many requests)", "body": "<p>Reddit has an <a href=\"https://www.reddit.com/dev/api/\" rel=\"nofollow\">API</a></p>\n\n<p>You could probably query the API for the particular sub-reddit(s) you want to scrape.  Attempting to scrape all of Reddit just seems like a nightmare waiting to happen considering the high volume and the nested comments.</p>\n\n<p>It looks like Reddit is blocking the ability to scrape in favor of using their public <a href=\"https://www.reddit.com/dev/api/\" rel=\"nofollow\">API</a>.  </p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 5878262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c4e4fded76625de4e9e88a62e2641b?s=128&d=identicon&r=PG&f=1", "display_name": "StreamedLine", "link": "https://stackoverflow.com/users/5878262/streamedline"}, "is_accepted": false, "score": 4, "last_activity_date": 1490898013, "last_edit_date": 1495540003, "creation_date": 1487136762, "answer_id": 42241399, "question_id": 38981732, "link": "https://stackoverflow.com/questions/38981732/scraping-reddit-using-nokogiri-429-too-many-requests/42241399#42241399", "title": "Scraping Reddit using Nokogiri (429 too many requests)", "body": "<p>The real answer is that you need to set a user-agent. </p>\n\n<p><a href=\"https://www.reddit.com/r/redditdev/comments/3qbll8/429_too_many_requests/\" rel=\"nofollow noreferrer\">https://www.reddit.com/r/redditdev/comments/3qbll8/429_too_many_requests/</a></p>\n\n<p>and</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5798037/how-to-set-a-custom-user-agent-in-ruby\">How to set a custom user agent in ruby</a></p>\n\n<p>This allowed me to use open-uri and nokogiri and avoid the error. </p>\n\n<p>so to summarize: </p>\n\n<pre><code>redditscrape = Nokogiri::HTML(open(url, 'User-Agent' =&gt; 'Nooby'))\n</code></pre>\n"}], "owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1501, "favorite_count": 1, "accepted_answer_id": 38981831, "answer_count": 2, "score": 1, "last_activity_date": 1490898013, "creation_date": 1471371022, "last_edit_date": 1471379099, "question_id": 38981732, "link": "https://stackoverflow.com/questions/38981732/scraping-reddit-using-nokogiri-429-too-many-requests", "title": "Scraping Reddit using Nokogiri (429 too many requests)", "body": "<p>I'm trying to scrape Reddit with Nokogiri, but a single run of this keeps telling me that I'm putting in too many requests.</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nurl = \"https://www.reddit.com/r/all\"\nredditscrape = Nokogiri::HTML(open(url))\n\nOpenURI::HTTPError: 429 Too Many Requests\n</code></pre>\n\n<p>Isn't this only one request? If it's not, how do I create sleep intervals for Nokogiri?</p>\n"}, {"tags": ["ruby", "loops"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471370365, "post_id": 38981525, "comment_id": 65315800, "body": "Almost but not quite. Since <code>input</code> is a string, it will be <code>empty?</code> but never <code>nil?</code>."}, {"owner": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "edited": false, "score": 0, "creation_date": 1471370602, "post_id": 38981525, "comment_id": 65315941, "body": "@Makoto well that was a whole lot easier then I expected. Thank you!"}], "tags": [], "owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "is_accepted": false, "score": 5, "last_activity_date": 1471370402, "last_edit_date": 1471370402, "creation_date": 1471370325, "answer_id": 38981525, "question_id": 38981471, "link": "https://stackoverflow.com/questions/38981471/how-to-get-rid-of-the-trailing-dash/38981525#38981525", "title": "How to get rid of the trailing dash", "body": "<p><code>&lt;&lt; \"  - #{input}\\n\"</code> will always append something, even if <code>input</code> is the empty string, so you can check to see if it's empty to conditionally append.</p>\n\n<pre><code>&lt;&lt; \"  - #{input}\\n\" unless input.empty?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "edited": false, "score": 0, "creation_date": 1471374771, "post_id": 38982506, "comment_id": 65318315, "body": "This is beautiful."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "edited": false, "score": 1, "creation_date": 1471375057, "post_id": 38982506, "comment_id": 65318461, "body": "I&#39;m happy to be of help."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1471375187, "last_edit_date": 1471375187, "creation_date": 1471373829, "answer_id": 38982506, "question_id": 38981471, "link": "https://stackoverflow.com/questions/38981471/how-to-get-rid-of-the-trailing-dash/38982506#38982506", "title": "How to get rid of the trailing dash", "body": "<p>I suggest you write this as follows.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>require 'time'\n\ndef prompt(input)\n  print \"[#{Time.now.strftime('%T')}] #{input}: \"\n  gets.chomp\nend\n\ndef work_performed\n  1.step.each_with_object([]) do |count, notes|\n    loop do\n      input = prompt \"Enter work notes[#{count}]\"\n      return notes.join(\"\\n\") if input.empty?\n      notes &lt;&lt; input\n      loop do\n        input = prompt(\"Enter work notes[*]\")\n        break if input.empty?\n        notes &lt;&lt; \"  - #{input}\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>Let's try it with the following prompts and entries:</p>\n\n<pre><code>[11:38:35] Enter work notes[1]: Pets\n[11:38:39] Enter work notes[*]: dog\n[11:38:40] Enter work notes[*]: cat\n[11:38:41] Enter work notes[*]: pig\n[11:38:42] Enter work notes[*]: \n[11:38:43] Enter work notes[1]: Friends\n[11:38:53] Enter work notes[*]: Lucy\n[11:38:55] Enter work notes[*]: Billy-Bo\n[11:39:04] Enter work notes[*]: \n[11:39:06] Enter work notes[1]: Colours\n[11:39:15] Enter work notes[*]: red\n[11:39:18] Enter work notes[*]: blue\n[11:39:20] Enter work notes[*]: \n[11:39:22] Enter work notes[1]: \n</code></pre>\n\n<p>We obtain:</p>\n\n<pre><code>puts work_performed\nPets\n  - dog\n  - cat\n  - pig\nFriends\n  - Lucy\n  - Billy-Bo\nColours\n  - red\n  - blue\n</code></pre>\n\n<p><strong>Notes</strong></p>\n\n<ul>\n<li>I've made <code>notes</code> an array rather than a string, hence the need for <code>notes.join(\"\\n\")</code>.</li>\n<li><code>1.step</code> returns an enumerator that generates the natural numbers beginning with <code>1</code> (See <a href=\"http://ruby-doc.org/core-2.3.0/Numeric.html#method-i-step\" rel=\"nofollow\">Numeric#step</a>).</li>\n<li><code>loop do</code> (See <a href=\"http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-loop\" rel=\"nofollow\">Kernel#loop</a>) is more idiomatic than <code>while true</code>.</li>\n</ul>\n"}], "owner": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 38982506, "answer_count": 2, "score": 0, "last_activity_date": 1471375187, "creation_date": 1471370178, "question_id": 38981471, "link": "https://stackoverflow.com/questions/38981471/how-to-get-rid-of-the-trailing-dash", "title": "How to get rid of the trailing dash", "body": "<p>I have a program that will create work notes for me, it works, however there's a trailing dash that I would like to get rid of:</p>\n\n<pre><code>def prompt(input)\n  print \"[#{Time.now.strftime('%T')}] #{input}: \"\n  STDIN.gets.chomp\nend\n\ndef work_performed\n  count = 0\n  notes = ''\n  while true\n    input = prompt(\"Enter work notes[#{count += 1}]\")\n    notes &lt;&lt; \"\\n\" + \"#{input}\\n\"\n    if input.empty?\n      return notes\n    else\n      while input.empty? != true\n        input = prompt('Enter work notes[*]')\n        notes &lt;&lt; \"  - #{input}\\n\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When run:</p>\n\n<pre><code>test\n  - tset  \n  -\ntest  \n  - tset  \n  - \ntset  \n  - tset  \n  - \n</code></pre>\n\n<p>How can I refactor this to get rid of the trailing dash at the ends of the levels?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1471369727, "post_id": 38981329, "comment_id": 65315421, "body": "Can we see your routes.rb file?"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1471370267, "post_id": 38981329, "comment_id": 65315738, "body": "Post code for Refinery::PagesController"}, {"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1471370282, "post_id": 38981329, "comment_id": 65315753, "body": "Yes, i edited the post, you can see there."}, {"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1471370472, "post_id": 38981329, "comment_id": 65315871, "body": "Added the pages controller code in the post."}, {"owner": {"reputation": 495, "user_id": 490594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c927dfc2453b77d663e9b75a6ba0a7b0?s=128&d=identicon&r=PG", "display_name": "ry_donahue", "link": "https://stackoverflow.com/users/490594/ry-donahue"}, "edited": false, "score": 0, "creation_date": 1471373592, "post_id": 38981329, "comment_id": 65317693, "body": "Can you confirm that the &quot;current_user_can_view_page?&quot; method passes validation? That is one potential source of a 404 and is a before_action on all controller methods exposed to routes in that file."}, {"owner": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1471378734, "post_id": 38981329, "comment_id": 65320286, "body": "Looks like you are getting redirected by the <code>find_page</code> method. What is the value of <code>@page</code> right before <code>@page || (error_404 if fallback_to_404)</code>? Log the value or use pry or something to inspect it."}, {"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1471388032, "post_id": 38981329, "comment_id": 65324082, "body": "No, all it&#39;s all right, i can&#39;t find the problem :c"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1471380343, "post_id": 38982950, "comment_id": 65321056, "body": "Hi, don&#39;t work removing the code, i got the same issue :c"}], "tags": [], "owner": {"reputation": 147, "user_id": 3662112, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/XWUvd.jpg?s=128&g=1", "display_name": "blakeyoder", "link": "https://stackoverflow.com/users/3662112/blakeyoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1471375547, "creation_date": 1471375547, "answer_id": 38982950, "question_id": 38981329, "link": "https://stackoverflow.com/questions/38981329/why-am-i-getting-error-404-not-found-in-ruby-on-rails/38982950#38982950", "title": "Why am I getting &quot;Error 404 not found&quot; in Ruby on Rails?", "body": "<p>I would check your <code>before_action :error_404, :unless =&gt; :current_user_can_view_page?</code> Maybe remove that code for the time being to see if it can load up, if it does then there is a good chance that the method is set up incorrectly. </p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1471380896, "post_id": 38983818, "comment_id": 65321326, "body": "That change the web, but now i got this problem..  <code>undefined method `live?&#39; for nil:NilClass  Rails.root: C:&#47;Sites&#47;ifurniture Application Trace | Framework Trace | Full Trace  app&#47;controllers&#47;refinery&#47;pages_controller.rb:66:in `current_user_can_view_page?&#39;</code>"}, {"owner": {"reputation": 138, "user_id": 3176758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H2Xw0.png?s=128&g=1", "display_name": "Paul Ro", "link": "https://stackoverflow.com/users/3176758/paul-ro"}, "reply_to_user": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1471382560, "post_id": 38983818, "comment_id": 65322103, "body": "Depends what is going on when page is nil? And what logic is in <code>current_user_can_vi\u200c\u200c\u200b\u200bew_page?</code> method.  If you want just safely pass this condition do it like that <code>page &amp;&amp; page.live? || ...</code>"}, {"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1471388798, "post_id": 38983818, "comment_id": 65324318, "body": "When the page is nil i want to go to 404 not found, but &quot;home&quot; is not nil and continue give me 404 not found."}], "tags": [], "owner": {"reputation": 138, "user_id": 3176758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H2Xw0.png?s=128&g=1", "display_name": "Paul Ro", "link": "https://stackoverflow.com/users/3176758/paul-ro"}, "is_accepted": false, "score": 1, "last_activity_date": 1471379282, "last_edit_date": 1471379282, "creation_date": 1471378955, "answer_id": 38983818, "question_id": 38981329, "link": "https://stackoverflow.com/questions/38981329/why-am-i-getting-error-404-not-found-in-ruby-on-rails/38983818#38983818", "title": "Why am I getting &quot;Error 404 not found&quot; in Ruby on Rails?", "body": "<p>@iFurniture, problem is here, your 'fallback_to_404' is set to true, \nso you get always error_404</p>\n\n<pre><code>def find_page(fallback_to_404 = true)\n  @page ||= ...\n  @page || (error_404 if fallback_to_404)\nend\n</code></pre>\n\n<p>I suggest you do it like this: </p>\n\n<pre><code>def find_page(fallback_to_404: false)\n  error_404 if fallback_to_404\n  @page ||= ...\n  @page || (error_404 if fallback_to_404)\nend\n</code></pre>\n\n<p>So fallback_to_404 will be false by default and if you want to set it true, just call it like that </p>\n\n<pre><code>find_page(fallback_to_404: true)\n</code></pre>\n\n<p><a href=\"https://robots.thoughtbot.com/ruby-2-keyword-arguments\" rel=\"nofollow\" title=\"Ruby 2 Keyword Arguments\">Ruby 2 Keyword Arguments</a></p>\n\n<p>About this:</p>\n\n<pre><code>@page || (error_404 if fallback_to_404)\n</code></pre>\n\n<p>May be you want ?</p>\n\n<pre><code>fallback_to_404 ? error_404 : @page\n</code></pre>\n\n<p>Look a litle better.</p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "is_accepted": true, "score": 0, "last_activity_date": 1471447778, "creation_date": 1471447778, "answer_id": 39000748, "question_id": 38981329, "link": "https://stackoverflow.com/questions/38981329/why-am-i-getting-error-404-not-found-in-ruby-on-rails/39000748#39000748", "title": "Why am I getting &quot;Error 404 not found&quot; in Ruby on Rails?", "body": "<p>i can resolve the issue just running the CMD</p>\n\n<pre><code>bundle exec rake db:seed\n</code></pre>\n\n<p>thanks for your help.</p>\n"}], "owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2715, "favorite_count": 0, "accepted_answer_id": 39000748, "answer_count": 3, "score": 0, "last_activity_date": 1471447778, "creation_date": 1471369646, "last_edit_date": 1471379113, "question_id": 38981329, "link": "https://stackoverflow.com/questions/38981329/why-am-i-getting-error-404-not-found-in-ruby-on-rails", "title": "Why am I getting &quot;Error 404 not found&quot; in Ruby on Rails?", "body": "<p>This is my issue: When I run the command <code>rails server</code> and go to localhost:3000 I get the page \"Error 404 not found\", so I try to put localhost:3000/home because it is a view but the issues continue. This is the log in the CMD..</p>\n\n<pre><code>C:\\Sites\\ifurniture&gt;rails s\n=&gt; Booting WEBrick\n=&gt; Rails 4.2.7.1 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n[2016-08-16 12:45:45] INFO  WEBrick 1.3.1\n[2016-08-16 12:45:45] INFO  ruby 2.2.4 (2015-12-16) [i386-mingw32]\n[2016-08-16 12:45:45] INFO  WEBrick::HTTPServer#start: pid=192 port=3000\n\n\nStarted GET \"/\" for ::1 at 2016-08-16 12:45:47 -0500\n  ActiveRecord::SchemaMigration Load (1.0ms)  SELECT \"schema_migrations\".* FROM\n\"schema_migrations\"\nProcessing by Refinery::PagesController#home as HTML\n  Parameters: {\"locale\"=&gt;:es}\n  Refinery::Page Load (1.0ms)  SELECT  \"refinery_pages\".* FROM \"refinery_pages\"\nWHERE \"refinery_pages\".\"link_url\" = ? LIMIT 1  [[\"link_url\", \"/\"]]\n  Refinery::Page Load (7.0ms)  SELECT  \"refinery_pages\".* FROM \"refinery_pages\"\nWHERE \"refinery_pages\".\"menu_match\" = ?  ORDER BY \"refinery_pages\".\"id\" ASC LIMI\nT 1  [[\"menu_match\", \"^/404$\"]]\n  Rendered public/404.html (14.0ms)\nFilter chain halted as :find_page rendered or redirected\nCompleted 404 Not Found in 1974ms (Views: 1775.1ms | ActiveRecord: 11.0ms)\n\n\nStarted GET \"/home\" for ::1 at 2016-08-16 12:46:00 -0500\nProcessing by Refinery::PagesController#show as HTML\n  Parameters: {\"path\"=&gt;\"home\", \"locale\"=&gt;:es}\n  Refinery::Page Load (29.0ms)  SELECT  \"refinery_pages\".* FROM \"refinery_pages\"\n INNER JOIN \"refinery_page_translations\" ON \"refinery_page_translations\".\"refine\nry_page_id\" = \"refinery_pages\".\"id\" WHERE \"refinery_pages\".\"parent_id\" IS NULL A\nND \"refinery_page_translations\".\"locale\" IN ('es', 'en') AND \"refinery_page_tran\nslations\".\"slug\" = 'home'  ORDER BY \"refinery_pages\".\"id\" ASC LIMIT 1\n  Refinery::Page Load (0.0ms)  SELECT  \"refinery_pages\".* FROM \"refinery_pages\"\nWHERE \"refinery_pages\".\"menu_match\" = ?  ORDER BY \"refinery_pages\".\"id\" ASC LIMI\nT 1  [[\"menu_match\", \"^/404$\"]]\n  Rendered public/404.html (0.0ms)\nFilter chain halted as :find_page rendered or redirected\nCompleted 404 Not Found in 1475ms (Views: 1207.8ms | ActiveRecord: 29.0ms)\n[2016-08-16 12:46:07] INFO  going to shutdown ...\n[2016-08-16 12:46:07] INFO  WEBrick::HTTPServer#start done.\nExiting\n</code></pre>\n\n<p>This is my routes file..</p>\n\n<pre><code>Rails.application.routes.draw do\n  # This line mounts Refinery's routes at the root of your application.\n  # This means, any requests to the root URL of your application will go to Refinery::PagesController#home.\n  # If you would like to change where this extension is mounted, simply change the\n  # configuration option `mounted_path` to something different in config/initializers/refinery/core.rb\n  #\n  # We ask that you don't use the :as option here, as Refinery relies on it being the default of \"refinery\"\n  post '/suscribir' =&gt; 'subscribe#create'\n  mount Refinery::Core::Engine, at: Refinery::Core.mounted_path\n\nend\n</code></pre>\n\n<p>The pages_Controller.rb code..</p>\n\n<pre><code>module Refinery\n  class PagesController &lt; ::ApplicationController\n    include Pages::RenderOptions\n    include Productos\n\n    before_action :find_page, :set_canonical\n    before_action :error_404, :unless =&gt; :current_user_can_view_page?\n\n    # Save whole Page after delivery\n    after_action :write_cache?\n\n    # This action is usually accessed with the root path, normally '/'\n    def home\n      @posts = Blog::Post.newest_first.live.includes(:comments, :categories)\n      render_with_templates?\n    end\n\n    # This action can be accessed normally, or as nested pages.\n    # Assuming a page named \"mission\" that is a child of \"about\",\n    # you can access the pages with the following URLs:\n    #\n    #   GET /pages/about\n    #   GET /about\n    #\n    #   GET /pages/mission\n    #   GET /about/mission\n    #\n    def show\n      @productos = Refinery::Productos::Producto.all\n      if should_skip_to_first_child?\n        redirect_to refinery.url_for(first_live_child.url) and return\n      elsif page.link_url.present?\n        redirect_to page.link_url and return\n      elsif should_redirect_to_friendly_url?\n        redirect_to refinery.url_for(page.url), :status =&gt; 301 and return\n      end\n\n      render_with_templates?\n    end\n\n  protected\n\n    def requested_friendly_id\n      if ::Refinery::Pages.scope_slug_by_parent\n        # Pick out last path component, or id if present\n        \"#{params[:path]}/#{params[:id]}\".split('/').last\n      else\n        # Remove leading and trailing slashes in path, but leave internal\n        # ones for global slug scoping\n        params[:path].to_s.gsub(%r{\\A/+}, '').presence || params[:id]\n      end\n    end\n\n    def should_skip_to_first_child?\n      page.skip_to_first_child &amp;&amp; first_live_child\n    end\n\n    def should_redirect_to_friendly_url?\n      requested_friendly_id != page.friendly_id || (\n        ::Refinery::Pages.scope_slug_by_parent &amp;&amp;\n        params[:path].present? &amp;&amp; params[:path].match(page.root.slug).nil?\n      )\n    end\n\n    def current_user_can_view_page?\n      page.live? || authorisation_manager.allow?(:plugin, \"refinery_pages\")\n    end\n\n    def first_live_child\n      page.children.order('lft ASC').live.first\n    end\n\n    def find_page(fallback_to_404 = true)\n      @page ||= case action_name\n                when \"home\"\n                  Refinery::Page.find_by(link_url: '/')\n                when \"show\"\n                  Refinery::Page.friendly.find_by_path_or_id(params[:path], params[:id])\n                end\n      @page || (error_404 if fallback_to_404)\n    end\n\n    alias_method :page, :find_page\n\n    def set_canonical\n      @canonical = refinery.url_for @page.canonical if @page.present?\n    end\n\n    def write_cache?\n      # Don't cache the page with the site bar showing.\n      if Refinery::Pages.cache_pages_full &amp;&amp; !authorisation_manager.allow?(:read, :site_bar)\n        cache_page(response.body, File.join('', 'refinery', 'cache', 'pages', request.path).to_s)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When I try to deploy all to Heroku, my app crashes and I get \"Application Error\".... Please help me, I'm a newbie with Ruby on Rails, thanks.</p>\n"}, {"tags": ["ruby", "rubygems", "bundle"], "answers": [{"tags": [], "owner": {"reputation": 6663, "user_id": 532685, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/00fed527cb6dfa9b682b361c2de27e42?s=128&d=identicon&r=PG", "display_name": "nycynik", "link": "https://stackoverflow.com/users/532685/nycynik"}, "is_accepted": false, "score": 0, "last_activity_date": 1514562519, "creation_date": 1514562519, "answer_id": 48025015, "question_id": 38981239, "link": "https://stackoverflow.com/questions/38981239/ruby-issue-with-bundlergemnotfound/48025015#48025015", "title": "Ruby issue with Bundler::GemNotFound", "body": "<p>I found a solution to this to install the gems without <code>sudo</code>.  It seems on my machine there were two locations for the gems, and when I installed via sudo, it placed them in the wrong location.  Installing with <code>gem install compass</code> for instance placed it in the correct location.</p>\n"}], "owner": {"reputation": 21, "user_id": 6723084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9765b2f93f33cfb641fccf111d6ca789?s=128&d=identicon&r=PG&f=1", "display_name": "Rakul", "link": "https://stackoverflow.com/users/6723084/rakul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1514562519, "creation_date": 1471369264, "question_id": 38981239, "link": "https://stackoverflow.com/questions/38981239/ruby-issue-with-bundlergemnotfound", "title": "Ruby issue with Bundler::GemNotFound", "body": "<p>I've a problem with every gem I try to use.</p>\n\n<p>I am using an Ubuntu machine.</p>\n\n<p>The error is </p>\n\n<pre><code>/usr/local/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/spec_set.rb:95:in `block in materialize': Could not find chunky_png-1.3.6 in any of the sources (Bundler::GemNotFound)\n</code></pre>\n\n<p>The error is not specific to that gem, because it happen with different gem as well. I think is a path problem.</p>\n\n<p>I've already tried to reinstall ruby. Any help will be very appreciate.</p>\n\n<p>My environment:</p>\n\n<pre><code>$ ruby -v\nruby 2.1.10p492 (2016-04-01 revision 54464) [x86_64-linux]\n\n$ bundle env\nBundler   1.12.5\nRubygems  2.6.6\nRuby      2.1.10p492 (2016-04-01 revision 54464) [x86_64-linux]\nGEM_HOME  /usr/local/bundle\nGEM_PATH  \nGit       2.1.4\n\n$ gem environment\n- RUBYGEMS VERSION: 2.6.6\n  - RUBY VERSION: 2.1.10 (2016-04-01 patchlevel 492) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /usr/local/bundle\n  - USER INSTALLATION DIRECTORY: /root/.gem/ruby/2.1.0\n  - RUBY EXECUTABLE: /usr/local/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/local/bundle/bin\n  - SPEC CACHE DIRECTORY: /root/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /usr/local/bundle\n     - /root/.gem/ruby/2.1.0\n     - /usr/local/lib/ruby/gems/2.1.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - \"install\" =&gt; \"--no-document\"\n     - \"update\" =&gt; \"--no-document\"\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/bundle/bin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n</code></pre>\n\n<p>List of gems</p>\n\n<pre><code>*** LOCAL GEMS ***\n\nbigdecimal (default: 1.2.4)\nbundler (1.12.5)\nchunky_png (1.3.6)\ncompass (1.0.3)\ncompass-core (1.0.3)\ncompass-import-once (1.0.5)\nffi (1.9.14)\nio-console (default: 0.4.3)\njson (default: 1.8.1)\nminitest (default: 4.7.5)\nmulti_json (1.12.1)\npsych (default: 2.0.5)\nrake (default: 10.1.0)\nrb-fsevent (0.9.7)\nrb-inotify (0.9.7)\nrdoc (default: 4.1.0)\nrubygems-update (2.6.6)\nsass (3.4.22)\ntest-unit (default: 2.1.10.0)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 1, "creation_date": 1471368775, "post_id": 38980817, "comment_id": 65314867, "body": "Can you please also post the code for <code>keyword_attribute</code>?"}, {"owner": {"reputation": 13, "user_id": 3928008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8614be70bd0932fe06d6015ebf4a92?s=128&d=identicon&r=PG&f=1", "display_name": "InteNs", "link": "https://stackoverflow.com/users/3928008/intens"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471376109, "post_id": 38980817, "comment_id": 65318991, "body": "added the <code>keyword_attribute</code> method"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3928008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8614be70bd0932fe06d6015ebf4a92?s=128&d=identicon&r=PG&f=1", "display_name": "InteNs", "link": "https://stackoverflow.com/users/3928008/intens"}, "edited": false, "score": 0, "creation_date": 1471435785, "post_id": 38983790, "comment_id": 65344035, "body": "implemented <code>singleton_class</code> like you suggested, and this works except for the <code>belongs_to</code> (like you said).  i&#39;m gonna try if the STI idea works for my situation"}, {"owner": {"reputation": 13, "user_id": 3928008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8614be70bd0932fe06d6015ebf4a92?s=128&d=identicon&r=PG&f=1", "display_name": "InteNs", "link": "https://stackoverflow.com/users/3928008/intens"}, "edited": false, "score": 0, "creation_date": 1471508155, "post_id": 38983790, "comment_id": 65377150, "body": "STI has worked for me and there were some more flags for STI that I didn&#39;t show here, thanks for the input!"}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 0, "last_activity_date": 1471378859, "creation_date": 1471378859, "answer_id": 38983790, "question_id": 38980817, "link": "https://stackoverflow.com/questions/38980817/rails-calling-a-class-method-based-on-the-value-of-instance-attribute/38983790#38983790", "title": "rails calling a class method based on the value of instance attribute?", "body": "<p>You'r patching your class at runtime. This is not restricted to a single object. This will change all new objects of your class. You can try to extend only the new object for instance with:</p>\n\n<pre><code>instance.define_singleton_method(\"#{name}_id\") do\n  if read_attribute(foreign_key).present?\n     \"#{group_id}:#{read_attribute(foreign_key)}\"\n   end\nend\n</code></pre>\n\n<p>Or with</p>\n\n<pre><code>instance.extend(ModuleWithNeededMethods)\n</code></pre>\n\n<p>How to combine this with the <code>belongs_to</code> definition I can't say at the moment.</p>\n\n<p>But I think you should try another approach and take a look at Single Table Inheritance. <code>finance_object_type</code> looks like a type column for STI.</p>\n"}], "owner": {"reputation": 13, "user_id": 3928008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8614be70bd0932fe06d6015ebf4a92?s=128&d=identicon&r=PG&f=1", "display_name": "InteNs", "link": "https://stackoverflow.com/users/3928008/intens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 38983790, "answer_count": 1, "score": 1, "last_activity_date": 1471430608, "creation_date": 1471367710, "last_edit_date": 1471430608, "question_id": 38980817, "link": "https://stackoverflow.com/questions/38980817/rails-calling-a-class-method-based-on-the-value-of-instance-attribute", "title": "rails calling a class method based on the value of instance attribute?", "body": "<p>So i need to basically call a class method that defines some methods and a relationship, but need to pass a different parameter based on an attribute of the instances of this class, so different instances get different methods.</p>\n\n<p>I need to do it like this because we are working with a legacy database.</p>\n\n<p>what i got:</p>\n\n<pre><code>after_find do |instance|\n  group_id = case instance.finance_object_type\n    when 'E' then 281\n    when 'A' then 282\n    when 'K' then 283\n    else ''\n  end\n  self.class.keyword_attribute :leistung_code, group_id: group_id\nend\n</code></pre>\n\n<p>This works, the keyword_attribute method generates the proper methods and relationships.</p>\n\n<p>The only issue is that if you load <code>instance_1</code>, then immediately load <code>instance_2</code> with a different <code>finance_object_type</code>, the generated methods for <code>instance_1</code> get overwritten as well.</p>\n\n<p>Is there another way to do this?</p>\n\n<p>keyword_attribute: </p>\n\n<pre><code>def keyword_attribute(name, **options)\n  foreign_key = options[:foreign_key] || name\n  group_id    = options[:group_id]\n\n  unless name.is_a?(Symbol)\n    fail 'A name is required for the keyword_attribute'\n  end\n\n  unless group_id.is_a?(Integer)\n    fail 'A group_id is required for the keyword_attribute'\n  end\n\n  self.belongs_to name,\n    -&gt; () { group_id ? where(keyword_group_id: group_id) : where },\n    foreign_key: foreign_key,\n    primary_key: 'stichwort',\n    class_name:  'Keyword'\n\n  define_method(\"#{name}=\") do |keyword|\n    if keyword.is_a?(String)\n      keyword =\n        if group_id\n          Keyword.where(keyword_group_id: group_id)\n        else\n          Keyword\n        end.find_by!(code: keyword)\n    end\n\n    super(keyword)\n  end\n\n  define_method(\"#{name}_id\") do\n    if read_attribute(foreign_key).present?\n      \"#{group_id}:#{read_attribute(foreign_key)}\"\n    end\n  end\n\n  define_method(\"#{name}_id=\") do |primary_key|\n    if primary_key.present?\n      if primary_key&amp;.match(\":\")\n        _, keyword = primary_key.split(':')\n      else\n        keyword = Keyword.find(primary_key)&amp;.code\n      end\n    else\n      keyword = nil\n    end\n    send(\"#{name}=\", keyword)\n  end\nend\n</code></pre>\n\n<p>update: I'm trying this with singleton_class, this works for the generated methods. But not for the belongs_to, possibly due to <a href=\"https://stackoverflow.com/questions/893682/overwriting-adding-an-activerecord-association-dynamically-using-a-singleton-cla\">this</a></p>\n\n<p>here's the updated situation:</p>\n\n<pre><code>after_find do\n  group_id = case finance_object_type\n    when 'E' then 281\n    when 'A' then 282\n    when 'K' then 283\n  end\n  singleton_class.keyword_attribute :leistung_code, group_id: group_id\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471362396, "post_id": 38979166, "comment_id": 65311179, "body": "Does <code>banned</code> behavior depend on the user role?"}, {"owner": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471362554, "post_id": 38979166, "comment_id": 65311274, "body": "@slowjack2k mmmm, no"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1471362805, "post_id": 38979166, "comment_id": 65311434, "body": "So it can be a toplevel context and doesn&#39;t need to be nested within user context."}], "answers": [{"tags": [], "owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1471362490, "creation_date": 1471362490, "answer_id": 38979273, "question_id": 38979166, "link": "https://stackoverflow.com/questions/38979166/how-refactor-the-names-of-my-contexts-in-my-tests-in-rspec-ruby-on-rails/38979273#38979273", "title": "How refactor the names of my contexts in my tests in Rspec-Ruby on Rails", "body": "<p>I think it's ok what are you doing... But, if you want to reuse some specs, you can use:</p>\n\n<ul>\n<li><a href=\"https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples\" rel=\"nofollow\">shared examples</a></li>\n<li><a href=\"http://www.relishapp.com/rspec/rspec-expectations/v/3-5/docs/custom-matchers/define-a-custom-matcher\" rel=\"nofollow\">custom matchers</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "edited": false, "score": 0, "creation_date": 1471363295, "post_id": 38979372, "comment_id": 65311742, "body": "what is the difference between &#39;scenario&#39; and &#39;context&#39;?"}, {"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "reply_to_user": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "edited": false, "score": 0, "creation_date": 1471363623, "post_id": 38979372, "comment_id": 65311939, "body": "The &#39;scenario&#39; DSL corresponds to &#39;it&#39;. It&#39;s simply an alias that allows feature specs to read as an acceptance test. I think this is more readable than the one you currently have, and you only set the context once per user type (admin / regular user)"}], "tags": [], "owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1471362802, "creation_date": 1471362802, "answer_id": 38979372, "question_id": 38979166, "link": "https://stackoverflow.com/questions/38979166/how-refactor-the-names-of-my-contexts-in-my-tests-in-rspec-ruby-on-rails/38979372#38979372", "title": "How refactor the names of my contexts in my tests in Rspec-Ruby on Rails", "body": "<p>You might want to do something like:</p>\n\n<pre><code>describe 'GET #index' do\n\n  context 'admin user' do\n    scenario 'is blocked' do\n      # your test\n    end\n\n    scenario 'is not blocked' do\n      # your test\n    end\n  end\n\n  context 'regular user' do\n    scenario 'is blocked' do\n      # your test\n    end\n\n    scenario 'is not blocked' do\n      # your test\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471362802, "creation_date": 1471362169, "question_id": 38979166, "link": "https://stackoverflow.com/questions/38979166/how-refactor-the-names-of-my-contexts-in-my-tests-in-rspec-ruby-on-rails", "title": "How refactor the names of my contexts in my tests in Rspec-Ruby on Rails", "body": "<p>How I should write the names of my contexts for my tests ?</p>\n\n<p>I have a user with roles : user and admin</p>\n\n<p>My User model has a column 'banned' : true or false</p>\n\n<p>I want to test all possible cases</p>\n\n<p><a href=\"https://i.stack.imgur.com/5DT5k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5DT5k.png\" alt=\"name of my &#39;contexts&#39;\"></a></p>\n\n<p>thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 2369, "user_id": 1781104, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/35b2db8383ae328b91cda792df4eebf1?s=128&d=identicon&r=PG", "display_name": "Matt The Ninja", "link": "https://stackoverflow.com/users/1781104/matt-the-ninja"}, "is_accepted": true, "score": 1, "last_activity_date": 1471362435, "creation_date": 1471362435, "answer_id": 38979256, "question_id": 38979147, "link": "https://stackoverflow.com/questions/38979147/how-calculate-the-number-prorated-day-with-stripe-api/38979256#38979256", "title": "How calculate the number prorated day with Stripe API?", "body": "<p><code>subscription_proration_date</code> what you are looking for? Then it will calculate it for you.</p>\n\n<p>See more at <a href=\"https://stripe.com/docs/subscriptions/guide\" rel=\"nofollow\">https://stripe.com/docs/subscriptions/guide</a></p>\n\n<p>The example of pro-rated subscription in ruby is as follows</p>\n\n<pre><code># Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account/apikeys\nStripe.api_key = \"sk_test_9OkpsFpKa1HDHaZa7e0BeGaO\"\n\nproration_date = Time.now.to_i\ninvoice = Stripe::Invoice.upcoming(:customer =&gt; \"cus_3R1W8PG2DmsmM9\", :subscription =&gt; \"sub_3R3PlB2YlJe84a\",\n                                   :subscription_plan =&gt; \"premium_monthly\", :subscription_proration_date =&gt; proration_date)\ncurrent_prorations = invoice.lines.data.select { |ii| ii.period.start == proration_date }\ncost = 0\ncurrent_prorations.each do |p|\n  cost += p.amount\nend\n\n# Display the cost of these prorations invoice items to the end user,\n# and actually do the update when they agree.\n# To make sure that the proration is calculated the same as when it was previewed,\n# you need to pass in the proration_date parameter\n\n# later...\n\nsubscription = Stripe::Subscription.retrieve(\"sub_3R3PlB2YlJe84a\")\nsubscription.plan = \"premium_monthly\"\nsubscription.proration_date = proration_date\nsubscription.save\n</code></pre>\n"}], "owner": {"reputation": 2138, "user_id": 1377879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/88ed0b98e028557cf987548411d8138c?s=128&d=identicon&r=PG", "display_name": "Bolo", "link": "https://stackoverflow.com/users/1377879/bolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 38979256, "answer_count": 1, "score": 1, "last_activity_date": 1471362435, "creation_date": 1471362104, "question_id": 38979147, "link": "https://stackoverflow.com/questions/38979147/how-calculate-the-number-prorated-day-with-stripe-api", "title": "How calculate the number prorated day with Stripe API?", "body": "<p>i am using Stripe. I would like to know how can calculate number of day prorated</p>\n\n<p>I want display something like that</p>\n\n<blockquote>\n  <p>1 additional seat ($9/month each - prorated for 26 days)</p>\n</blockquote>\n\n<p>in the api i don't see any item prorate_day</p>\n\n<p>Bolo</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1471361381, "post_id": 38978726, "comment_id": 65310518, "body": "What is the actual name for that class? Is it the same as your app name? Rails gives you a hint in form of <code>Table:Module</code>. It should be a class, not a module. Which means that there&#39;s a module with this name which shadows your class."}, {"owner": {"reputation": 139, "user_id": 6597822, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d011de759593ab34e2c68882396e43b9?s=128&d=identicon&r=PG&f=1", "display_name": "admitme_sam", "link": "https://stackoverflow.com/users/6597822/admitme-sam"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1471361724, "post_id": 38978726, "comment_id": 65310772, "body": "@SergioTulentsev I don&#39;t follow, Its already being used elsewhere? I&#39;m sure i&#39;ve not got it used elsewhere?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1471362061, "post_id": 38978726, "comment_id": 65310981, "body": "No, you&#39;re not sure. Because evidently you <i>are</i> using it elsewhere."}, {"owner": {"reputation": 139, "user_id": 6597822, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d011de759593ab34e2c68882396e43b9?s=128&d=identicon&r=PG&f=1", "display_name": "admitme_sam", "link": "https://stackoverflow.com/users/6597822/admitme-sam"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1471364314, "post_id": 38978726, "comment_id": 65312317, "body": "So what am i looking for? Table? Tables? or what?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1471380990, "post_id": 38978726, "comment_id": 65321369, "body": "You seem to expect <code>Table</code> to be a Model (a class inheriting from <code>ActiveRecord::Base</code>) but it is evidently not. Show in your app where you are defining <code>Table</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1128, "user_id": 6388582, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TjlTA.jpg?s=128&g=1", "display_name": "IWI", "link": "https://stackoverflow.com/users/6388582/iwi"}, "is_accepted": false, "score": -1, "last_activity_date": 1471361226, "creation_date": 1471361226, "answer_id": 38978829, "question_id": 38978726, "link": "https://stackoverflow.com/questions/38978726/rake-task-undefined-method-create/38978829#38978829", "title": "rake task undefined method create", "body": "<p>I don't really know the wider problem. But in your code I see a missing <code>[</code> on this line: <code>Table.create(db information])</code></p>\n\n<p>That might have something to do with it? </p>\n"}], "owner": {"reputation": 139, "user_id": 6597822, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d011de759593ab34e2c68882396e43b9?s=128&d=identicon&r=PG&f=1", "display_name": "admitme_sam", "link": "https://stackoverflow.com/users/6597822/admitme-sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471361226, "creation_date": 1471360957, "question_id": 38978726, "link": "https://stackoverflow.com/questions/38978726/rake-task-undefined-method-create", "title": "rake task undefined method create", "body": "<p>So my other rake task that has the create options work fine.</p>\n\n<p>However this one</p>\n\n<pre><code>   task test: :environment do\n       ActiveRecord::Base.connection.execute(\"TRUNCATE Tables RESTART IDENTITY\")\n       gzipped = open('csv url')\n       csv_text = Zlib::GzipReader.new(gzipped).read\n       csv = CSV.parse(csv_text, :headers=&gt;true)\n       csv.each do |row|\n          Table.create(db information])\n       end\n     end\n</code></pre>\n\n<p>Now for some reason this is failing o the create action (which is the exact same as my other create actions) I don;t have a controller for these. My model is empty but exists with the naming convention there.</p>\n\n<p>Any ideas?</p>\n\n<p>The error is this</p>\n\n<pre><code>NoMethodError: undefined method `create' for Table:Module\n</code></pre>\n\n<p>(Table is used as a replacement before i get called out for bad practise)</p>\n"}]