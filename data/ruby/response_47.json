[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1449099971, "post_id": 34055271, "comment_id": 55864739, "body": "Isn&#39;t the error in your mail template? It says <code>erb</code> in the error."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5175226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3618aff07d64900219c99b0dff950b6?s=128&d=identicon&r=PG&f=1", "display_name": "dengeist", "link": "https://stackoverflow.com/users/5175226/dengeist"}, "edited": false, "score": 0, "creation_date": 1449101789, "post_id": 34055346, "comment_id": 55865282, "body": "I just ran my entire test suite, rather than the mailer test alone, and they are all throwing unexpected end-of-input despite the fact that they all ran fine an hour ago and I have not edited them recently. Is this a problem with Cloud9 and not my code, maybe?"}], "tags": [], "owner": {"reputation": 21, "user_id": 5392727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEaQMTvi63s/AAAAAAAAAAI/AAAAAAAAAFA/XGL0Sc8gt4s/photo.jpg?sz=128", "display_name": "Saurabh Sikchi", "link": "https://stackoverflow.com/users/5392727/saurabh-sikchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1449100116, "creation_date": 1449100116, "answer_id": 34055346, "question_id": 34055271, "link": "https://stackoverflow.com/questions/34055271/confusing-error-in-rails-mailer-test/34055346#34055346", "title": "Confusing error in Rails Mailer test", "body": "<p>You need a closing end tag in your erb file.</p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 5175226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3618aff07d64900219c99b0dff950b6?s=128&d=identicon&r=PG&f=1", "display_name": "dengeist", "link": "https://stackoverflow.com/users/5175226/dengeist"}, "is_accepted": true, "score": 0, "last_activity_date": 1449103150, "creation_date": 1449103150, "answer_id": 34055830, "question_id": 34055271, "link": "https://stackoverflow.com/questions/34055271/confusing-error-in-rails-mailer-test/34055830#34055830", "title": "Confusing error in Rails Mailer test", "body": "<p>After seeing that all of my tests were failing, I realized that the error was in my user fixtures. I added the <code>&lt;% end %&gt;</code> tag back on, reset and re-seeded, and all my tests passed. Strange, though, that the test doesn't know to indicate the problem was in my <code>users.yml</code>.</p>\n"}], "owner": {"reputation": 7, "user_id": 5175226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3618aff07d64900219c99b0dff950b6?s=128&d=identicon&r=PG&f=1", "display_name": "dengeist", "link": "https://stackoverflow.com/users/5175226/dengeist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1449132521, "accepted_answer_id": 34055830, "answer_count": 2, "score": 0, "last_activity_date": 1449103150, "creation_date": 1449099822, "last_edit_date": 1449100095, "question_id": 34055271, "link": "https://stackoverflow.com/questions/34055271/confusing-error-in-rails-mailer-test", "closed_reason": "Not suitable for this site", "title": "Confusing error in Rails Mailer test", "body": "<p>I'm trying to test my user mailer, and I've written out <code>user_mailer_test.rb</code> like so:</p>\n\n<pre><code>require 'test_helper'\n\nclass UserMailerTest &lt; ActionMailer::TestCase\n\n  test \"account_activation\" do\n    user = users(:test)\n    user.activation_token = User.new_token\n    mail = UserMailer.account_activation(user)\n    assert_equal \"Account activation\", mail.subject\n    assert_equal [user.email], mail.to\n    assert_equal [\"noreply@example.com\"], mail.from\n    assert_match user.name,               mail.body.encoded\n    assert_match user.activation_token,   mail.body.encoded\n    assert_match CGI::escape(user.email), mail.body.encoded\n  end\nend\n</code></pre>\n\n<p>When I run my test suite, it throws an error: </p>\n\n<pre><code>ERROR[\"test_account_activation\", UserMailerTest, 2015-12-01 16:35:46 +0000]\n test_account_activation#UserMailerTest (1448987746.26s)\nSyntaxError:         SyntaxError: (erb):36: syntax error, unexpected end-of-input, expecting keyword_end\n        ...ut.force_encoding(__ENCODING__)\n</code></pre>\n\n<p>What <code>end</code> am I missing? The test looks properly enclosed to me. Thanks in advance!</p>\n\n<p><strong>Edit:</strong> I just ran my entire test suite, rather than the mailer test alone, and they are <em>all</em> throwing <code>unexpected end-of-input</code> despite the fact that they all ran fine an hour ago and I have not edited them recently. Is this a problem with Cloud9 and not my code, maybe?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1449119638, "post_id": 34055072, "comment_id": 55870490, "body": "Hi and welcome to stack overflow. I see you have been given a couple of answers - hopefully that will help you. However, normally at Stack Overflow we kind of expect you to have a go at it yourself first to see how far you can get on your own. This shows that you are willing to put in some effort yourself before asking for help. It also helps you to learn better because trying to figure it out yourself will be more effective for you than just asking somebody else to give you the answer. Try it next time :)"}], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 1, "last_activity_date": 1449099087, "creation_date": 1449099087, "answer_id": 34055133, "question_id": 34055072, "link": "https://stackoverflow.com/questions/34055072/copy-elements-one-by-one-from-one-array-to-another-after-it-passes-a-condition-i/34055133#34055133", "title": "copy elements one by one from one array to another after it passes a condition in ruby", "body": "<p>The Ruby documentation for <a href=\"http://docs.ruby-lang.org/en/2.2.0/Array.html\" rel=\"nofollow\">Array</a> provides you most of the information you need to manipulate an Array.</p>\n\n<p>For example, you can use <a href=\"http://docs.ruby-lang.org/en/2.2.0/Array.html#method-i-reject\" rel=\"nofollow\"><code>Array#reject</code></a> to remove the values matching a condition or <a href=\"http://docs.ruby-lang.org/en/2.2.0/Array.html#method-i-delete\" rel=\"nofollow\"><code>Array#delete</code></a></p>\n\n<p>In your case:</p>\n\n<pre><code>a = [1,2,3,4,5]\n# value taken from the user\ninput = params[:input].to_i\n\na.delete(input)\n# now a is the array without the element\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5392727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEaQMTvi63s/AAAAAAAAAAI/AAAAAAAAAFA/XGL0Sc8gt4s/photo.jpg?sz=128", "display_name": "Saurabh Sikchi", "link": "https://stackoverflow.com/users/5392727/saurabh-sikchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1449099329, "creation_date": 1449099329, "answer_id": 34055172, "question_id": 34055072, "link": "https://stackoverflow.com/questions/34055072/copy-elements-one-by-one-from-one-array-to-another-after-it-passes-a-condition-i/34055172#34055172", "title": "copy elements one by one from one array to another after it passes a condition in ruby", "body": "<pre><code>b = a.select { |element| element != 3 }\n</code></pre>\n\n<p>You can use any condition in select.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-select\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Array.html#method-i-select</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5560625, "user_type": "registered", "profile_image": "https://graph.facebook.com/776730212452679/picture?type=large", "display_name": "Sumanth Daggubati", "link": "https://stackoverflow.com/users/5560625/sumanth-daggubati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1449132701, "answer_count": 2, "score": -1, "last_activity_date": 1449099329, "creation_date": 1449098758, "last_edit_date": 1449098893, "question_id": 34055072, "link": "https://stackoverflow.com/questions/34055072/copy-elements-one-by-one-from-one-array-to-another-after-it-passes-a-condition-i", "closed_reason": "Needs more focus", "title": "copy elements one by one from one array to another after it passes a condition in ruby", "body": "<p>I am working on a ruby on rails project. In my controller I have an array and I need to copy all the from this array to another except the ones that does not pass the condition.</p>\n\n<p>For example i have an array</p>\n\n<pre><code>a = [1,2,3,4,5]\n</code></pre>\n\n<p>i will take an input from the user. if the user's input is 3 then it has to copy all other elements from the array 'A' to array 'B' except 3. The array B has to be this [1,2,4,5]</p>\n\n<p>How do i do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "oauth", "lightspeed"], "answers": [{"tags": [], "owner": {"reputation": 8080, "user_id": 320471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22eb062ebde38dc6e483acd113463022?s=128&d=identicon&r=PG", "display_name": "ghayes", "link": "https://stackoverflow.com/users/320471/ghayes"}, "is_accepted": false, "score": 0, "last_activity_date": 1453767754, "creation_date": 1453767754, "answer_id": 35004988, "question_id": 34054941, "link": "https://stackoverflow.com/questions/34054941/lightspeed-oauth-csrf-and-redirect-uri-errors-ruby/35004988#35004988", "title": "Lightspeed OAuth CSRF and redirect_uri errors (ruby)", "body": "<p>I had an issue with invalid <code>redirect_uri</code> which was fixed by setting in <code>config/initializers/omniauth.rb</code></p>\n\n<pre><code>provider :lightspeed,\n  \"&lt;CLIENT ID&gt;\",\n  \"&lt;CLIENT SECRET&gt;\",\n  scope: 'employee:all',\n  token_params: { redirect_uri: \"http://localhost:3000/auth/lightspeed/callback\" }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 1096799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fdaec816fd828116465346c80b7f3ec?s=128&d=identicon&r=PG", "display_name": "Ana", "link": "https://stackoverflow.com/users/1096799/ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453767754, "creation_date": 1449098152, "question_id": 34054941, "link": "https://stackoverflow.com/questions/34054941/lightspeed-oauth-csrf-and-redirect-uri-errors-ruby", "title": "Lightspeed OAuth CSRF and redirect_uri errors (ruby)", "body": "<p>So firstly we were getting a CSRF error that didn't make much sense.  It was failing in the callback phase of omniauth.</p>\n\n<pre><code>Started GET \"/auth/lightspeed\" for 127.0.0.1 at 2015-12-02 14:48:32 +1100\nI, [2015-12-02T14:48:32.949808 #32768]  INFO -- omniauth: (lightspeed) Request phase initiated.\n\n\nStarted GET \"/auth/lightspeed/callback?code=b8cb8bcc6f741f2f919e3924e0dc3c648f67d129&amp;state=457c2b3ab0917bdc88180edf1fdc8be63c1011b0a9939a7e\" for 127.0.0.1 at 2015-12-02 14:48:44 +1100\nI, [2015-12-02T14:48:44.254381 #32768]  INFO -- omniauth: (lightspeed) Callback phase initiated.\nE, [2015-12-02T14:48:44.254727 #32768] ERROR -- omniauth: (lightspeed) Authentication failure! csrf_detected: OmniAuth::Strategies::OAuth2::CallbackError, csrf_detected | CSRF detected\nE, [2015-12-02T14:48:44.255305 #32768] ERROR -- omniauth: (lightspeed) Authentication failure! invalid_credentials: OmniAuth::Strategies::OAuth2::CallbackError, csrf_detected | CSRF detected\n[Rollbar] Reporting exception: csrf_detected | CSRF detected\n[Rollbar] Exception not reported because Rollbar is disabled\n\nOmniAuth::Strategies::OAuth2::CallbackError - csrf_detected | CSRF detected:\n  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'\n  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:20:in `call'\n  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:12:in `call'\n  omniauth (1.2.2) lib/omniauth/strategy.rb:475:in `fail!'\n  omniauth-oauth2 (1.3.1) lib/omniauth/strategies/oauth2.rb:75:in `callback_phase'\n  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'\n  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'\n  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'\n  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'\n  rack (1.6.4) lib/rack/etag.rb:24:in `call'\n  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'\n  rack (1.6.4) lib/rack/head.rb:13:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/flash.rb:260:in `call'\n  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'\n  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/cookies.rb:560:in `call'\n  activerecord (4.2.3) lib/active_record/query_cache.rb:36:in `call'\n  activerecord (4.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\n  activerecord (4.2.3) lib/active_record/migration.rb:377:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:84:in `run_callbacks'\n  actionpack (4.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n  rollbar (1.5.3) lib/rollbar/middleware/rails/rollbar.rb:24:in `block in call'\n  rollbar (1.5.3) lib/rollbar.rb:799:in `scoped'\n  rollbar (1.5.3) lib/rollbar/middleware/rails/rollbar.rb:22:in `call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n  rollbar (1.5.3) lib/rollbar/middleware/rails/show_exceptions.rb:22:in `call_with_rollbar'\n  actionpack (4.2.3) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.2.3) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.3) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.3) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.3) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.3) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.3) lib/rails/rack/logger.rb:20:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\n  rack (1.6.4) lib/rack/runtime.rb:18:in `call'\n  activesupport (4.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/static.rb:116:in `call'\n  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'\n  railties (4.2.3) lib/rails/engine.rb:518:in `call'\n  railties (4.2.3) lib/rails/application.rb:165:in `call'\n  rack (1.6.4) lib/rack/content_length.rb:15:in `call'\n  thin (1.6.4) lib/thin/connection.rb:86:in `block in pre_process'\n  thin (1.6.4) lib/thin/connection.rb:84:in `pre_process'\n  thin (1.6.4) lib/thin/connection.rb:53:in `process'\n  thin (1.6.4) lib/thin/connection.rb:39:in `receive_data'\n  eventmachine (1.0.8) lib/eventmachine.rb:193:in `run'\n  thin (1.6.4) lib/thin/backends/base.rb:73:in `start'\n  thin (1.6.4) lib/thin/server.rb:162:in `start'\n  rack (1.6.4) lib/rack/handler/thin.rb:19:in `run'\n  rack (1.6.4) lib/rack/server.rb:286:in `start'\n  railties (4.2.3) lib/rails/commands/server.rb:80:in `start'\n  railties (4.2.3) lib/rails/commands/commands_tasks.rb:80:in `block in server'\n  railties (4.2.3) lib/rails/commands/commands_tasks.rb:75:in `server'\n  railties (4.2.3) lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n  railties (4.2.3) lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n  bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>The 'omniauth.state' that was being set in the session during the request phase was nil.</p>\n\n<p>In <code>oauth2.rb</code>:</p>\n\n<pre><code>elsif !options.provider_ignores_state &amp;&amp; (request.params[\"state\"].to_s.empty? || request.params[\"state\"] != session.delete(\"omniauth.state\"))\n</code></pre>\n\n<p>I tried setting the option <code>provider_ignores_state: true</code>, but was still having a world of problems because of the session.</p>\n\n<p>I saw other people mention domains.  We weren't even setting a domain and I was adamant that our domains matched.  The problem was, we had an app redirecting to another app which was then redirecting to Lightspeed auth.</p>\n\n<p>I'm writing this to help others that may find themselves in a similar situation, as I spent a whole lot of time on this yesterday.</p>\n\n<p>Our domains didn't exactly match and after fixing up our nginx config the CSRF error was no more!</p>\n\n<p>Then I kept getting a redirect_uri error.</p>\n\n<p>In the meantime I had updated our gems (stupid, I know).  There is a <a href=\"https://github.com/intridea/omniauth-oauth2/commit/26152673224aca5c3e918bcc83075dbb0659717f\" rel=\"nofollow\">breaking change</a> in <code>omniauth-oauth2</code> 1.4.0.</p>\n\n<p>Locked the gem to 1.3.1.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449098900, "post_id": 34054946, "comment_id": 55864344, "body": "This should raise a <code>DoubleRenderError</code> exception."}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449099327, "post_id": 34054946, "comment_id": 55864507, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Can you explain how could that happen?"}, {"owner": {"reputation": 145, "user_id": 1438150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1fd75fe28b28950270c2f4057db7de65?s=128&d=identicon&r=PG", "display_name": "user1438150", "link": "https://stackoverflow.com/users/1438150/user1438150"}, "edited": false, "score": 0, "creation_date": 1449099470, "post_id": 34054946, "comment_id": 55864566, "body": "@Yang, I forgot to add &quot;and return&quot; in my sample code to prevent double render. My bad, &quot;render fail_to_update and return&quot;"}, {"owner": {"reputation": 145, "user_id": 1438150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1fd75fe28b28950270c2f4057db7de65?s=128&d=identicon&r=PG", "display_name": "user1438150", "link": "https://stackoverflow.com/users/1438150/user1438150"}, "edited": false, "score": 0, "creation_date": 1449104664, "post_id": 34054946, "comment_id": 55866175, "body": "Can you please add &quot;and return after your render and then I can accept the answer&quot;"}, {"owner": {"reputation": 145, "user_id": 1438150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1fd75fe28b28950270c2f4057db7de65?s=128&d=identicon&r=PG", "display_name": "user1438150", "link": "https://stackoverflow.com/users/1438150/user1438150"}, "edited": false, "score": 0, "creation_date": 1449105373, "post_id": 34054946, "comment_id": 55866385, "body": "Also I get a &quot;ActiveModel::ForbiddenAttributesError&quot; on the update_attributes command. Please see the edited code"}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1449105548, "post_id": 34054946, "comment_id": 55866446, "body": "Please check if you have something like <code>attr_accessible :name</code> in your <code>Company</code> model"}, {"owner": {"reputation": 145, "user_id": 1438150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1fd75fe28b28950270c2f4057db7de65?s=128&d=identicon&r=PG", "display_name": "user1438150", "link": "https://stackoverflow.com/users/1438150/user1438150"}, "edited": false, "score": 0, "creation_date": 1449113437, "post_id": 34054946, "comment_id": 55868639, "body": "Stupid mistake.. have to call @current_user.company.update_attributes(company_params) in rails 4"}], "tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": true, "score": 1, "last_activity_date": 1449105115, "last_edit_date": 1449105115, "creation_date": 1449098167, "answer_id": 34054946, "question_id": 34054792, "link": "https://stackoverflow.com/questions/34054792/update-association-with-json-object/34054946#34054946", "title": "Update Association with JSON Object", "body": "<p>Do this in your <code>update</code> action:</p>\n\n<pre><code>def update\n  company = Company.find(params[:id])\n  if !@current_user.company.nil? and company == @current_user.company\n    if @current_user.company.update_attributes(params[:company])\n      render updated and return\n    else\n      render fail_to_update and return\n    end\n  else\n    render not_found and return\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1449099479, "post_id": 34055146, "comment_id": 55864573, "body": "If you look into the test code, there is a <code>param[:id]</code> in that API request. I think checking if it matches the <code>current_user</code>&#39;s company will make the logic solid."}, {"owner": {"reputation": 192, "user_id": 1031654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/30731fd7af857d675772b8520f227c8c?s=128&d=identicon&r=PG", "display_name": "Reyko", "link": "https://stackoverflow.com/users/1031654/reyko"}, "reply_to_user": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1449099888, "post_id": 34055146, "comment_id": 55864713, "body": "Since the action is intended to update the @current_user&#39;s company that params[:id] is obsolete"}, {"owner": {"reputation": 145, "user_id": 1438150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1fd75fe28b28950270c2f4057db7de65?s=128&d=identicon&r=PG", "display_name": "user1438150", "link": "https://stackoverflow.com/users/1438150/user1438150"}, "edited": false, "score": 0, "creation_date": 1449159677, "post_id": 34055146, "comment_id": 55895194, "body": "We have to keep in mind that your solution updates the current_users company regardless of param[:id]. So passing another company param[:id], will still update the current_user.company attributes. In REST API I would think that the request should fail instead."}], "tags": [], "owner": {"reputation": 192, "user_id": 1031654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/30731fd7af857d675772b8520f227c8c?s=128&d=identicon&r=PG", "display_name": "Reyko", "link": "https://stackoverflow.com/users/1031654/reyko"}, "is_accepted": false, "score": 3, "last_activity_date": 1449099167, "creation_date": 1449099167, "answer_id": 34055146, "question_id": 34054792, "link": "https://stackoverflow.com/questions/34054792/update-association-with-json-object/34055146#34055146", "title": "Update Association with JSON Object", "body": "<p>Since you are calling update_attributes on the @current_user.company, that company will always belong to the @current_user and it will be the only one which gets updated.</p>\n\n<p>Now if for any reason you submit the company update params to your #update action and the user does not have a company you could add:</p>\n\n<pre><code>def update\n  if @current_user.company &amp;&amp; @current_user.company.update_attributes(params[:company])\n    render updated\n  else\n    render not_found\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 1438150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1fd75fe28b28950270c2f4057db7de65?s=128&d=identicon&r=PG", "display_name": "user1438150", "link": "https://stackoverflow.com/users/1438150/user1438150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 34054946, "answer_count": 2, "score": 0, "last_activity_date": 1449105252, "creation_date": 1449097464, "last_edit_date": 1449105252, "question_id": 34054792, "link": "https://stackoverflow.com/questions/34054792/update-association-with-json-object", "title": "Update Association with JSON Object", "body": "<p>Using a JSON API I want to update <code>company.name</code>. A <code>user</code> belongs_to a <code>company</code>. What could we do to make sure that a user shouldn't update a company that they aren't part of? Note <code>user</code> may not have a company</p>\n\n<p>I looked into <code>validates_associated</code> but I'm not sure how it would be implemented. Note, we pass a company object from the front end.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  belongs_to :company\nend\n\nclass Company &lt; ActiveRecord::Base\n  has_many :users\nend\n\nclass CompanyController &lt; ApplicationController\n  def update\n    if @current_user.company.update_attributes(params[:company])\n      render updated and return\n    else\n      render not_found and return\n    end\n  end\n  def company_params\n    params.require(:company).permit(:name)\n  end\nend\n\ndescribe \"#update\" do\n  it \" company name\" do\n    @company.name = \"new_name\"\n    put :update, :token_id =&gt; \"fake_token_id\", :id =&gt; @company.id, :company =&gt; {:name =&gt; @company.name}\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "controller", "associations"], "comments": [{"owner": {"reputation": 929, "user_id": 2174582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d02e557e3b6a72c80fadacf119c382?s=128&d=identicon&r=PG", "display_name": "Sergey Sokolov", "link": "https://stackoverflow.com/users/2174582/sergey-sokolov"}, "edited": false, "score": 1, "creation_date": 1449097131, "post_id": 34054648, "comment_id": 55863646, "body": "try current_user.patients.build(patient_params.merge({:medic_id =&gt; current_user.id}))"}, {"owner": {"reputation": 196, "user_id": 5204300, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-6SGS9rCE-sw/AAAAAAAAAAI/AAAAAAAAABE/LsnpNPIvZO0/photo.jpg?sz=128", "display_name": "Carlos G&#243;mez", "link": "https://stackoverflow.com/users/5204300/carlos-g%c3%b3mez"}, "reply_to_user": {"reputation": 929, "user_id": 2174582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d02e557e3b6a72c80fadacf119c382?s=128&d=identicon&r=PG", "display_name": "Sergey Sokolov", "link": "https://stackoverflow.com/users/2174582/sergey-sokolov"}, "edited": false, "score": 0, "creation_date": 1449097372, "post_id": 34054648, "comment_id": 55863729, "body": "thank you, it work! I appreciate your help :)"}], "answers": [{"tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1449097718, "creation_date": 1449097718, "answer_id": 34054842, "question_id": 34054648, "link": "https://stackoverflow.com/questions/34054648/associate-current-user-by-a-controller-in-rails-4/34054842#34054842", "title": "Associate current_user by a controller in rails 4", "body": "<p>To solve the problem when you create a patient:</p>\n\n<pre><code>medic_id = {medic_id: current_user.id}\ncurrent_user.patients.build(patient_params.merge(medic_id))\n</code></pre>\n\n<p>Assuming you have <code>@medic</code> in your <code>show</code> action, to get all patients of a <code>medic-user</code>:</p>\n\n<pre><code>@patients = @medic.patients\n</code></pre>\n\n<p>And in your <code>show</code> view, you can access <code>@patients</code> as an array.</p>\n"}], "owner": {"reputation": 196, "user_id": 5204300, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-6SGS9rCE-sw/AAAAAAAAAAI/AAAAAAAAABE/LsnpNPIvZO0/photo.jpg?sz=128", "display_name": "Carlos G&#243;mez", "link": "https://stackoverflow.com/users/5204300/carlos-g%c3%b3mez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449097718, "creation_date": 1449096769, "last_edit_date": 1449097011, "question_id": 34054648, "link": "https://stackoverflow.com/questions/34054648/associate-current-user-by-a-controller-in-rails-4", "title": "Associate current_user by a controller in rails 4", "body": "<p>I'm trying to associate a <code>current_user.id</code> to a <code>@patient.medic_id</code> via a controller.</p>\n\n<p>I try this in my controller:</p>\n\n<pre><code>def create\n    #  @patient = Patient.new(patient_params)\n    @patient = current_user.patients.build(patient_params[:medic_id =&gt; current_user.id])\n\n    respond_to do |format|\n      if @patient.save\n        format.html { redirect_to @patient, notice: 'Patient was successfully created.' }\n        format.json { render :show, status: :created, location: @patient }\n      else\n        format.html { render :new }\n        format.json { render json: @patient.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>This will automatically fill <code>medic_id</code> in the view with the <code>current_user.id</code>, but when I submit the form active record doesn't save the others parameters for patient like <code>name</code>, <code>last_name</code>, <code>age</code>, <code>blood_type</code>, etc. </p>\n\n<p>This is my model /<code>medic.rb</code> (devise - user)</p>\n\n<pre><code>class Medic &lt; ActiveRecord::Base\n   has_many :patients\nend\n</code></pre>\n\n<p>This is my model /<code>patient.rb</code></p>\n\n<pre><code>class Patient &lt; ActiveRecord::Base\n  belongs_to :medic\nend\n</code></pre>\n\n<p><strong>And I need a way to call all registers (patients) from a <code>medic-user</code>, to a <code>show</code> view; what it is the best way to do this?</strong></p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 5609486, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9a8a54f870e1457ab4d9ddd48b61d54a?s=128&d=identicon&r=PG&f=1", "display_name": "Takor", "link": "https://stackoverflow.com/users/5609486/takor"}, "edited": false, "score": 0, "creation_date": 1449098899, "post_id": 34055047, "comment_id": 55864342, "body": "which type can I use for location?"}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "reply_to_user": {"reputation": 275, "user_id": 5609486, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9a8a54f870e1457ab4d9ddd48b61d54a?s=128&d=identicon&r=PG&f=1", "display_name": "Takor", "link": "https://stackoverflow.com/users/5609486/takor"}, "edited": false, "score": 0, "creation_date": 1449098930, "post_id": 34055047, "comment_id": 55864353, "body": "you want to save latitude and longitude?"}, {"owner": {"reputation": 275, "user_id": 5609486, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9a8a54f870e1457ab4d9ddd48b61d54a?s=128&d=identicon&r=PG&f=1", "display_name": "Takor", "link": "https://stackoverflow.com/users/5609486/takor"}, "edited": false, "score": 0, "creation_date": 1449099297, "post_id": 34055047, "comment_id": 55864498, "body": "<a href=\"http://www.codeproject.com/Articles/312398/Creating-a-location-aware-website-using-Ruby-on-Ra\" rel=\"nofollow noreferrer\">codeproject.com/Articles/312398/&hellip;</a>  actually I m looking from this site for creating location-based app but, something is wrong there.. Maybe you can check it, and  I&#39;ll be glad to getting your advices @MZaragoza"}], "tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": false, "score": 1, "last_activity_date": 1449098650, "creation_date": 1449098650, "answer_id": 34055047, "question_id": 34054558, "link": "https://stackoverflow.com/questions/34054558/nomethoderror-undefined-method-type-for-character-varyingstring-after-r/34055047#34055047", "title": "&quot;NoMethodError: undefined method `type&#39; for &quot;character varying&quot;:String&quot; after &quot;rake db:migrate&quot;", "body": "<p>the problem that you are having is that <strong>point</strong> method does not exist in ActiveRecord. </p>\n\n<p>Instantiates a new column for the table. The type parameter is normally one of the migrations native types, which is one of the following: :primary_key, :string, :text, :integer, :float, :decimal, :datetime, :time, :date, :binary, :boolean.</p>\n\n<p>For more info pleas read <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column</a></p>\n\n<p>Hope this helps </p>\n"}, {"tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": true, "score": 2, "last_activity_date": 1449098995, "creation_date": 1449098995, "answer_id": 34055119, "question_id": 34054558, "link": "https://stackoverflow.com/questions/34054558/nomethoderror-undefined-method-type-for-character-varyingstring-after-r/34055119#34055119", "title": "&quot;NoMethodError: undefined method `type&#39; for &quot;character varying&quot;:String&quot; after &quot;rake db:migrate&quot;", "body": "<p>Assuming you are using the gem <code>activerecord-postgis-adapter</code>, you'd better try to change the database adapter to <code>postgis</code> as recommended in their official document: </p>\n\n<blockquote>\n  <p><a href=\"https://github.com/rgeo/activerecord-postgis-adapter\" rel=\"nofollow\">https://github.com/rgeo/activerecord-postgis-adapter</a></p>\n</blockquote>\n"}], "owner": {"reputation": 275, "user_id": 5609486, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9a8a54f870e1457ab4d9ddd48b61d54a?s=128&d=identicon&r=PG&f=1", "display_name": "Takor", "link": "https://stackoverflow.com/users/5609486/takor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 0, "accepted_answer_id": 34055119, "answer_count": 2, "score": 0, "last_activity_date": 1449098995, "creation_date": 1449096306, "last_edit_date": 1449098842, "question_id": 34054558, "link": "https://stackoverflow.com/questions/34054558/nomethoderror-undefined-method-type-for-character-varyingstring-after-r", "title": "&quot;NoMethodError: undefined method `type&#39; for &quot;character varying&quot;:String&quot; after &quot;rake db:migrate&quot;", "body": "<p>I tried to add check-ins to micro-posts but I've got an error after rake db:migrate.. What does it mean?</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>  $ rake db:migrate --trace\n    ** Invoke db:migrate (first_time)\n    ** Invoke environment (first_time)\n    ** Execute environment\n    ** Invoke db:load_config (first_time)\n    ** Execute db:load_config\n    ** Execute db:migrate\n    rake aborted!\n    NoMethodError: undefined method `type' for \"character varying\":String\n</code></pre>\n\n<p><strong>add_checkin_to_microposts</strong></p>\n\n<pre><code> class AddCheckinToMicroposts &lt; ActiveRecord::Migration\n   def change\n      add_column :microposts, :location, :point, :geographic =&gt; true\n   end\n end\n</code></pre>\n\n<p><strong>database.yml</strong></p>\n\n<pre><code> development:\n  adapter: postgresql\n  schema_search_path: public, postgis\n  encoding: unicode\n  database: blog_development\n  host: localhost\n  pool: 5\n  username: ******** \n  password: \n</code></pre>\n"}, {"tags": ["ruby", "macos", "shell", "command"], "comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 3, "creation_date": 1449096352, "post_id": 34054411, "comment_id": 55863344, "body": "How about using the <code>Process</code> class? Like the <code>fork</code> method?"}], "answers": [{"comments": [{"owner": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "edited": false, "score": 0, "creation_date": 1449179964, "post_id": 34055101, "comment_id": 55907448, "body": "i keep getting this error: Errno::ECHILD: No child processes"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "edited": false, "score": 0, "creation_date": 1449213187, "post_id": 34055101, "comment_id": 55918164, "body": "@botbot The error is thrown if the child already finished. Putting <code>rescue</code> behind the <code>waitpid</code> suppresses this behavoir."}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 1, "last_activity_date": 1449214139, "last_edit_date": 1449214139, "creation_date": 1449098897, "answer_id": 34055101, "question_id": 34054411, "link": "https://stackoverflow.com/questions/34054411/how-to-run-multiple-ruby-scripts-simultaneously/34055101#34055101", "title": "How to run multiple ruby scripts simultaneously", "body": "<p>You can build a solution with <a href=\"http://ruby-doc.org/core-2.2.2/Process.html#method-c-fork\" rel=\"nofollow\"><code>fork</code></a>, <a href=\"http://ruby-doc.org/core-2.2.2/Process.html#method-c-exec\" rel=\"nofollow\"><code>exec</code></a> and <a href=\"http://ruby-doc.org/core-2.2.3/Process.html#method-c-wait\" rel=\"nofollow\"><code>wait</code></a> of the module <a href=\"http://ruby-doc.org/core-2.2.3/Process.html\" rel=\"nofollow\"><code>Process</code></a>.</p>\n\n<pre><code># start child processes\n10.times { fork { exec(cmd) } }\n# wait for child processes\n10.times { |pid| Process.wait }\n</code></pre>\n\n<p>Or a bit longer to play around with (Tested with Ruby 1.8.7 on Ubuntu). Added <code>rescue nil</code> to suppress error when waiting.</p>\n\n<pre><code>10.times do |i|\n  fork do\n    ruby_cmd = \"sleep(#{10-i});puts #{i}\"\n    exec(\"ruby -e \\\"#{ruby_cmd}\\\"\")\n  end\nend\n\n10.times { Process.wait rescue nil }\nputs \"Finished!\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1449137688, "post_id": 34056331, "comment_id": 55879515, "body": "This solution doesn&#39;t address the <code>nohup</code> part of the question. I guess the effect would then be the same, but of course it would be a good idea to try it out."}, {"owner": {"reputation": 147, "user_id": 5436821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s8lVomsdVTw/AAAAAAAAAAI/AAAAAAAAIzM/tokXdefaHys/photo.jpg?sz=128", "display_name": "Hudson Santos", "link": "https://stackoverflow.com/users/5436821/hudson-santos"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1449154273, "post_id": 34056331, "comment_id": 55890960, "body": "Ok, now is addressing the <i>nohup</i> to don&#39;t append output to a tty, and escaping the &#39;&amp;&#39;"}, {"owner": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "edited": false, "score": 0, "creation_date": 1449178810, "post_id": 34056331, "comment_id": 55906719, "body": "no, starting it from ruby isn&#39;t a requirement, but i&#39;m working with variables that are dynamically updating so i figured based would be more trouble it iterate a loop with a lot of vars. this would be more simple without vars, but still doubtful it wouldn&#39;t just kill each ruby process."}, {"owner": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1449178904, "post_id": 34056331, "comment_id": 55906778, "body": "@user1934428 is exactly right, this solution may not solve the problem of my ruby processes just being killed immediately, but this is essentially the same command minus being invoked by ruby."}], "tags": [], "owner": {"reputation": 147, "user_id": 5436821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s8lVomsdVTw/AAAAAAAAAAI/AAAAAAAAIzM/tokXdefaHys/photo.jpg?sz=128", "display_name": "Hudson Santos", "link": "https://stackoverflow.com/users/5436821/hudson-santos"}, "is_accepted": false, "score": 2, "last_activity_date": 1449154186, "last_edit_date": 1449154186, "creation_date": 1449106363, "answer_id": 34056331, "question_id": 34054411, "link": "https://stackoverflow.com/questions/34054411/how-to-run-multiple-ruby-scripts-simultaneously/34056331#34056331", "title": "How to run multiple ruby scripts simultaneously", "body": "<p>Do you need to start it from ruby for any specific reason? Why don't you start it 10 times directly from bash? Like:</p>\n\n<blockquote>\n  <p>$ for i in <code>seq 1 10</code>; do nohup ruby foo.rb \\&amp;; done</p>\n</blockquote>\n\n<p>Let me know..</p>\n"}, {"comments": [{"owner": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "edited": false, "score": 0, "creation_date": 1449178725, "post_id": 34063069, "comment_id": 55906659, "body": "the arguments are coming out fine when evaluated with ARGV[i]. Is this dangerous? should i send an array object instead? These args I&#39;m sending in are vars, I just simplified for the sake of the simplifying the problem."}, {"owner": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "edited": false, "score": 0, "creation_date": 1449179148, "post_id": 34063069, "comment_id": 55906941, "body": "what i find particularly useful about this answer is that you suggested how to route the output, which was another question I had, thanks! +1"}, {"owner": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "edited": false, "score": 0, "creation_date": 1449180796, "post_id": 34063069, "comment_id": 55907899, "body": "fyi i tried this and it didn&#39;t write any files to nohup1.out etc... also checked ruby processes it appears it didn&#39;t even start. not sure what&#39;s going on"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "edited": false, "score": 0, "creation_date": 1449228470, "post_id": 34063069, "comment_id": 55926651, "body": "@botbot: Did you check the return code of <code>system</code>? Another possibility would be to wrap (just for testing) the whole nohup-line into a shell script and trace the execution of the shell script (with <code>set -x</code>)."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 1, "last_activity_date": 1449137337, "creation_date": 1449137337, "answer_id": 34063069, "question_id": 34054411, "link": "https://stackoverflow.com/questions/34054411/how-to-run-multiple-ruby-scripts-simultaneously/34063069#34063069", "title": "How to run multiple ruby scripts simultaneously", "body": "<p>nohup redirects its output to a file $HOME/nohup.out, unless it is explicitly redirected. You should redirect the output of each invocation to a different file.</p>\n\n<p>Also, for the safe side, I would redirect stdin to /dev/null - just in case the called program reads from stdin.</p>\n\n<pre><code>10.times do |i|\n\n   system \"nohup ruby program.rb 'arg1 arg2' &lt;/dev/null &gt;#{ENV['HOME']}/nohup#{i}.out &amp;\"\n\nend\n</code></pre>\n\n<p>BTW (and off topic): Are you sure, that you want to pass arg1 arg2 as a SINGLE argument to program.rb?</p>\n"}], "owner": {"reputation": 6808, "user_id": 683216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c2ad89d0d01b5ac83c12ce847c124e1?s=128&d=identicon&r=PG", "display_name": "botbot", "link": "https://stackoverflow.com/users/683216/botbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1449214139, "creation_date": 1449095584, "question_id": 34054411, "link": "https://stackoverflow.com/questions/34054411/how-to-run-multiple-ruby-scripts-simultaneously", "title": "How to run multiple ruby scripts simultaneously", "body": "<p>I am trying to run multiple ruby scripts simultaneously on my mac, and I'm not having any luck. I can see the the ruby processes start up, but then they immediately stop. The script works fine as a single process, no errors. Here are some examples of things I've tried.</p>\n\n<pre><code>10.times do\n\n  system \"nohup ruby program.rb \\\"arg1 arg2\\\" &amp;\"\n\nend\n\n10.times do\n\n  `nohup ruby program.rb \\\"arg1 arg2\\\" &amp;`\n\nend\n\n\n10.times do\n\n  system \"ruby program.rb \\\"arg1 arg2\\\"\"\n\nend\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 929, "user_id": 2174582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d02e557e3b6a72c80fadacf119c382?s=128&d=identicon&r=PG", "display_name": "Sergey Sokolov", "link": "https://stackoverflow.com/users/2174582/sergey-sokolov"}, "edited": false, "score": 0, "creation_date": 1449095823, "post_id": 34054338, "comment_id": 55863116, "body": "Looks like you add /password/ to assets path for password page - <a href=\"http://www.pharma4doc.in/password/assets/stylesheets/styles-login.css\" rel=\"nofollow noreferrer\">pharma4doc.in/password/assets/stylesheets/styles-login.css</a> somewhere in your code."}], "answers": [{"tags": [], "owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "is_accepted": false, "score": 0, "last_activity_date": 1449096658, "creation_date": 1449096658, "answer_id": 34054624, "question_id": 34054338, "link": "https://stackoverflow.com/questions/34054338/static-files-not-being-served-for-one-particular-controller/34054624#34054624", "title": "Static files not being served for one particular controller", "body": "<p>Try using the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-stylesheet_path\" rel=\"nofollow\">asset url helpers</a> in your templates. It will ensure the path to the static assets is correct all the time.</p>\n"}], "owner": {"reputation": 21, "user_id": 5392727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iEaQMTvi63s/AAAAAAAAAAI/AAAAAAAAAFA/XGL0Sc8gt4s/photo.jpg?sz=128", "display_name": "Saurabh Sikchi", "link": "https://stackoverflow.com/users/5392727/saurabh-sikchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1449098682, "creation_date": 1449095302, "last_edit_date": 1449098682, "question_id": 34054338, "link": "https://stackoverflow.com/questions/34054338/static-files-not-being-served-for-one-particular-controller", "title": "Static files not being served for one particular controller", "body": "<p>I have an app using Devise for authentication. I have some custom stylesheets in the <code>public</code> directory.</p>\n\n<p>I set <code>config.serve_static_files = true</code> in <code>development.rb</code>.</p>\n\n<p>The assets are being served properly for every other controller except <code>devise/passwords</code> controller.</p>\n\n<p>For the passwords I am getting a No route matches error.</p>\n\n<p>Login page: <a href=\"http://www.pharma4doc.in/login\" rel=\"nofollow\">http://www.pharma4doc.in/login</a>  (working properly)</p>\n\n<p>Forgot password page: <a href=\"http://www.pharma4doc.in/password/new\" rel=\"nofollow\">http://www.pharma4doc.in/password/new</a>  (CSS files not being served)</p>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1449093587, "post_id": 34053791, "comment_id": 55861972, "body": "The error message doesn&#39;t seem to match the code you&#39;ve posted"}, {"owner": {"reputation": 191, "user_id": 5627681, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f1482ee34c25f20f84de1b47b528c5e4?s=128&d=identicon&r=PG&f=1", "display_name": "jackfrost5234", "link": "https://stackoverflow.com/users/5627681/jackfrost5234"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1449093942, "post_id": 34053791, "comment_id": 55862158, "body": "I&#39;ve fixed it, I was going through different names for it. Sorry about that."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 2, "last_activity_date": 1449094609, "last_edit_date": 1449094609, "creation_date": 1449094151, "answer_id": 34054061, "question_id": 34053791, "link": "https://stackoverflow.com/questions/34053791/modules-classes-in-ruby/34054061#34054061", "title": "Modules &amp; Classes in Ruby", "body": "<p>This only works for constants. In Ruby, constants start with a capital letter:</p>\n\n<pre><code>module Config\n  # trying to add varibles/config details\n  Config1 = 'test'\n  Config2 = 'test2'\nend\n\nputs Config::Config1\n# =&gt; test\n</code></pre>\n\n<p>You could also define a module method:</p>\n\n<pre><code>module Config\n  def self.config1\n    'test'\n  end\nend\n\nputs Config.config1\n# =&gt; test\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5627681, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f1482ee34c25f20f84de1b47b528c5e4?s=128&d=identicon&r=PG&f=1", "display_name": "jackfrost5234", "link": "https://stackoverflow.com/users/5627681/jackfrost5234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 34054061, "answer_count": 1, "score": 1, "last_activity_date": 1449094609, "creation_date": 1449093204, "last_edit_date": 1449094054, "question_id": 34053791, "link": "https://stackoverflow.com/questions/34053791/modules-classes-in-ruby", "title": "Modules &amp; Classes in Ruby", "body": "<p>I have 2 ruby files, Demo.rb and Config.rb.</p>\n\n<p>In my Demo.rb file I'm requiring my Config.rb file:</p>\n\n<pre><code>require './Config' \n\nputs Config::test\nputs Config::test2\n</code></pre>\n\n<p>Config.rb is as follows:</p>\n\n<pre><code>module Config\n  # trying to add varibles/config details\n  config1 = 'test'\n  config2 = 'test2'\nend\n</code></pre>\n\n<p>Now what I'm trying to do is have some variables in my Config module, and then be able to read those values from Demo.rb, but I keep getting an error. I've tried Config.test as well, but it keeps complaining about:</p>\n\n<pre><code>undefined method `user' for Config:Module\n</code></pre>\n\n<p>I was reading here: <a href=\"http://learnrubythehardway.org/book/ex40.html\" rel=\"nofollow\">http://learnrubythehardway.org/book/ex40.html</a> about it, but I seem to be doing what it's asking. Not sure where I'm going wrong. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord", "rails-migrations"], "comments": [{"owner": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1449093668, "post_id": 34053399, "comment_id": 55862010, "body": "SQLite version 3.8.5"}], "answers": [{"comments": [{"owner": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "edited": false, "score": 0, "creation_date": 1449093342, "post_id": 34053593, "comment_id": 55861826, "body": "Unfortunately I am not using Heroku. I am using a Docker container and Jenkins for continuous integration. Cron does seem to be the tool to use though. I also have seen this gem called <code>Whenever</code>. <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">github.com/javan/whenever</a>. Have you used this before/recommend trying it?"}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "reply_to_user": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "edited": false, "score": 0, "creation_date": 1449093557, "post_id": 34053593, "comment_id": 55861949, "body": "That&#39;s fine. The principle is the same, doesn&#39;t matter which scheduler you are using. It is much more important to carefully define the task running in any of the schedulers."}], "tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": false, "score": 1, "last_activity_date": 1449092590, "creation_date": 1449092590, "answer_id": 34053593, "question_id": 34053399, "link": "https://stackoverflow.com/questions/34053399/ruby-on-rails-purge-old-rows-from-database-after-a-given-amount-of-time/34053593#34053593", "title": "Ruby on Rails purge old rows from database after a given amount of time", "body": "<p>You need <code>cron</code> to achieve it. If your production environment is on <code>Heroku</code>, <code>Heroku Scheduler</code> is something you need to look into. It can help you run a certain task every day. In that task, you will retrieve all your builds whose <code>created_at</code>/<code>updated_at</code> or your own timestamp is less than <code>1.month.ago</code> and delete them.</p>\n"}, {"tags": [], "owner": {"reputation": 1152, "user_id": 1579663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fc5b6c6724e4be36ec9a46d7e5e9eb0?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/1579663/raman"}, "is_accepted": true, "score": 1, "last_activity_date": 1449111081, "creation_date": 1449111081, "answer_id": 34057009, "question_id": 34053399, "link": "https://stackoverflow.com/questions/34053399/ruby-on-rails-purge-old-rows-from-database-after-a-given-amount-of-time/34057009#34057009", "title": "Ruby on Rails purge old rows from database after a given amount of time", "body": "<p>I would follow the following steps to do this:</p>\n\n<ul>\n<li><p>Create a rake task which contains the logic and query to delete your old records.</p></li>\n<li><p>Schedule the task with a gem such as <a href=\"https://github.com/javan/whenever\" rel=\"nofollow\">whenever</a> or <a href=\"https://github.com/jmettraux/rufus-scheduler\" rel=\"nofollow\">rufus-scheduler</a> on your production server.</p></li>\n</ul>\n"}], "owner": {"reputation": 1348, "user_id": 2337967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d99b9f9fecef213745ac58a511ab4845?s=128&d=identicon&r=PG", "display_name": "Scott B", "link": "https://stackoverflow.com/users/2337967/scott-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 34057009, "answer_count": 2, "score": 1, "last_activity_date": 1449111081, "creation_date": 1449091853, "question_id": 34053399, "link": "https://stackoverflow.com/questions/34053399/ruby-on-rails-purge-old-rows-from-database-after-a-given-amount-of-time", "title": "Ruby on Rails purge old rows from database after a given amount of time", "body": "<p>I have a ruby on rails server that maintains images for visual automation tests for a mobile application. A developer runs the visual automation on each pull request so he or she knows exactly what is going into the repo.</p>\n\n<p>It has been over a month of production use and I am starting to think about how to remove old builds or old images so I can save space (and time for some of the each loops). The active record is as follows:</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  has_many :test_suites\n  has_many :builds\nend\n</code></pre>\n\n<p>The migration looks like this:</p>\n\n<pre><code>class AddProjectToBuild &lt; ActiveRecord::Migration\n  def change\n    add_reference :builds, :project, index: true\n  end\nend\n</code></pre>\n\n<p>I want to be able to remove builds if they are over one month old. How might I go about executing this in a production environment without touching the builds that have run in the last month?</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["ruby", "sqlite", "activerecord", "sinatra", "sinatra-activerecord"], "comments": [{"owner": {"reputation": 3, "user_id": 5632133, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LXMoAYowrqM/AAAAAAAAAAI/AAAAAAAAAM4/TIZRpgsVt3Y/photo.jpg?sz=128", "display_name": "soxidus", "link": "https://stackoverflow.com/users/5632133/soxidus"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1449103046, "post_id": 34052848, "comment_id": 55865644, "body": "yes the database is called test.db and the table is called users  creating the table via the outcommented Migration method works just fine I just don&#39;t know how to read data from the table at this point"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5632133, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LXMoAYowrqM/AAAAAAAAAAI/AAAAAAAAAM4/TIZRpgsVt3Y/photo.jpg?sz=128", "display_name": "soxidus", "link": "https://stackoverflow.com/users/5632133/soxidus"}, "edited": false, "score": 0, "creation_date": 1449176485, "post_id": 34065829, "comment_id": 55905384, "body": "This works fine but if I execute this in my scrpit it returns users::ActiveRecord_Relation:0x000000002e2eb20 but i want to work with a real value like in best case a string how do I get to a string from there ? thanks for the help so far :)"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 3, "user_id": 5632133, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LXMoAYowrqM/AAAAAAAAAAI/AAAAAAAAAM4/TIZRpgsVt3Y/photo.jpg?sz=128", "display_name": "soxidus", "link": "https://stackoverflow.com/users/5632133/soxidus"}, "edited": false, "score": 0, "creation_date": 1449177278, "post_id": 34065829, "comment_id": 55905852, "body": "just change it to <code>@user = User.last</code>, now you can do <code>@user.name</code> or whatever fields you have on user."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 0, "last_activity_date": 1449145246, "last_edit_date": 1449145246, "creation_date": 1449144910, "answer_id": 34065829, "question_id": 34052848, "link": "https://stackoverflow.com/questions/34052848/how-do-i-read-from-a-database-in-ruby-sinatra-using-active-record/34065829#34065829", "title": "how do I read from a Database in ruby sinatra using active record", "body": "<p>To read the data from the <code>users</code> table, you'd simply do:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\nend\n\nget '/' do\n  @users = User.all\n  puts \"Grabbed #{@users.size} user(s) from database\"\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5632133, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LXMoAYowrqM/AAAAAAAAAAI/AAAAAAAAAM4/TIZRpgsVt3Y/photo.jpg?sz=128", "display_name": "soxidus", "link": "https://stackoverflow.com/users/5632133/soxidus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1777, "favorite_count": 0, "accepted_answer_id": 34065829, "answer_count": 1, "score": 0, "last_activity_date": 1449145246, "creation_date": 1449089870, "last_edit_date": 1449139160, "question_id": 34052848, "link": "https://stackoverflow.com/questions/34052848/how-do-i-read-from-a-database-in-ruby-sinatra-using-active-record", "title": "how do I read from a Database in ruby sinatra using active record", "body": "<p>I want to read entrys from a Database using active_record and keep getting diffrent Errors like: Name error and can't find the database or it can't execute the query.</p>\n\n<p>so my question here is how do i read from a database or execute SQL-queries and for example write the result into a variable? </p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\nrequire 'active_record'\nrequire 'sqlite3'\n\n\nActiveRecord::Base.establish_connection(\n  :adapter  =&gt; \"sqlite3\",\n  :database =&gt; \"test.db\"\n)\n\n\nclass Article &lt; ActiveRecord::Base\nend\n\n#ActiveRecord::Migration.create_table :users do |t|\n#  t.string :name\n#end\n\n\nclass App &lt; Sinatra::Application\nend\n\nget '/' do\n  output = users.select(:all)\n  f = File.open('name','a'); f.write(output); f.close\n  #puts  User.first\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "capistrano3"], "comments": [{"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1449087384, "post_id": 34052103, "comment_id": 55858643, "body": "files with prefix &quot;.&quot; are hidden by default. Did you double check you have listed all files including hidden files in that directory?"}, {"owner": {"reputation": 1826, "user_id": 3765772, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3b49d13ba84f10dbe67af56729f9951?s=128&d=identicon&r=PG&f=1", "display_name": "R.J. Robinson", "link": "https://stackoverflow.com/users/3765772/r-j-robinson"}, "reply_to_user": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 0, "creation_date": 1449087583, "post_id": 34052103, "comment_id": 55858747, "body": "duh. Ok. but it doesn&#39;t seem to be loading my .env file at all. it creates one.   the code in my deploy.rb is  Capistrano::Env.use do |env|   env.add &#39;HOGE&#39;, &#39;hage&#39;   env.formatter = :dotenv #=&gt; default is :ruby, but it is deprecated now.   env.filemode = 0644 #=&gt; default is 0640. end  and the env.add seems to add the HOGE, hage combo, yet, not the .env file that is on my local."}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "edited": false, "score": 1, "creation_date": 1449087787, "post_id": 34052103, "comment_id": 55858853, "body": "You&#39;d better update your question since it is too hard to read the code in comment. Or it would be better to start another question."}, {"owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "edited": false, "score": 0, "creation_date": 1449090211, "post_id": 34052103, "comment_id": 55860128, "body": "I agree with Yang. Throw out another question regarding .env not being loaded, as it will be easier to work with. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 977, "user_id": 4603039, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-2-hWqltglJY/AAAAAAAAAAI/AAAAAAAAA28/BWGljEnrSMc/photo.jpg?sz=128", "display_name": "Jacob Murphy", "link": "https://stackoverflow.com/users/4603039/jacob-murphy"}, "is_accepted": false, "score": 2, "last_activity_date": 1449087650, "creation_date": 1449087650, "answer_id": 34052274, "question_id": 34052103, "link": "https://stackoverflow.com/questions/34052103/env-file-states-that-it-is-uploaded-yet-when-i-look-on-my-server-its-not-ther/34052274#34052274", "title": ".env file states that it is uploaded, yet when I look on my server, its not there.", "body": "<p>On the server, enter <code>ls -a</code> which will show all files, even those prefixed by a \".\", which are hidden by default and not shown when using just <code>ls</code></p>\n"}], "owner": {"reputation": 1826, "user_id": 3765772, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3b49d13ba84f10dbe67af56729f9951?s=128&d=identicon&r=PG&f=1", "display_name": "R.J. Robinson", "link": "https://stackoverflow.com/users/3765772/r-j-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1449087650, "creation_date": 1449087039, "question_id": 34052103, "link": "https://stackoverflow.com/questions/34052103/env-file-states-that-it-is-uploaded-yet-when-i-look-on-my-server-its-not-ther", "title": ".env file states that it is uploaded, yet when I look on my server, its not there.", "body": "<p>Im using Cap3 to deploy my application. </p>\n\n<p>im using dotenv-rails with the .env file holding my secrets. This does not get pushed to git, which we deploy from. </p>\n\n<p>in my stack track it shows the .env file gets uploaded into the releases/ directory, yet when I go look... its not there. </p>\n\n<p>Gem File. </p>\n\n<pre><code>  gem 'capistrano'\n  gem 'capistrano-env'\n  gem 'capistrano-rails'\n  gem 'capistrano-bundler'\n  gem 'capistrano-faster-assets', '~&gt; 1.0'\n  gem 'capistrano-postgresql', '~&gt; 4.2.0'\n  gem \"capistrano-resque\", \"~&gt; 0.2.2\", require: false\n  gem 'capistrano-rvm'\n  gem 'capistrano-safe-deploy-to'\n  gem 'capistrano-secrets-yml'\n  gem 'capistrano-slackify'\n  gem 'capistrano-ssh-doctor', '~&gt; 1.0'\n  gem 'capistrano3-unicorn'\n</code></pre>\n\n<p>Any help would be great</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "mandrill"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1449086399, "post_id": 34051722, "comment_id": 55858105, "body": "It&#39;s an SSL certificate issue with Excon. Could be related, or the same issue, as this one: <a href=\"https://github.com/excon/excon/issues/473\" rel=\"nofollow noreferrer\">github.com/excon/excon/issues/473</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1449086584, "post_id": 34051722, "comment_id": 55858226, "body": "And this might be worth a read too: <a href=\"https://github.com/excon/excon/issues/239\" rel=\"nofollow noreferrer\">github.com/excon/excon/issues/239</a>"}, {"owner": {"reputation": 390, "user_id": 3086625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r0ppc.jpg?s=128&g=1", "display_name": "C&#233;line Martinet Sanchez", "link": "https://stackoverflow.com/users/3086625/c%c3%a9line-martinet-sanchez"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1449087363, "post_id": 34051722, "comment_id": 55858632, "body": "I read them but I don&#39;t know how I can fin the problem. :-( Maybe deleting and re-installing Ruby?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1449087623, "post_id": 34051722, "comment_id": 55858760, "body": "Since it&#39;s your dev machine you can just try and skip certificate verification.  Set <code>Excon.defaults[:ssl_verify_peer] = false</code> and try that. But only on your dev machine, it&#39;s insecure to use on production."}, {"owner": {"reputation": 390, "user_id": 3086625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r0ppc.jpg?s=128&g=1", "display_name": "C&#233;line Martinet Sanchez", "link": "https://stackoverflow.com/users/3086625/c%c3%a9line-martinet-sanchez"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1449088033, "post_id": 34051722, "comment_id": 55858974, "body": "You are my savior. It&#39;s working :-) Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 3086625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r0ppc.jpg?s=128&g=1", "display_name": "C&#233;line Martinet Sanchez", "link": "https://stackoverflow.com/users/3086625/c%c3%a9line-martinet-sanchez"}, "is_accepted": true, "score": 1, "last_activity_date": 1449088159, "creation_date": 1449088159, "answer_id": 34052384, "question_id": 34051722, "link": "https://stackoverflow.com/questions/34051722/mandrill-api-using-rails-4-2-5-exconerrorssocketerror/34052384#34052384", "title": "Mandrill API using Rails 4.2.5 Excon::Errors::SocketError", "body": "<p>As suggested by Casper in its comment, I edited my development.rb file to skip certificate verification.</p>\n\n<p><strong>development.rb</strong></p>\n\n<pre><code>require 'excon'\nRails.application.configure do\n     ...\n     Excon.defaults[:ssl_verify_peer] = false\nend\n</code></pre>\n"}], "owner": {"reputation": 390, "user_id": 3086625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r0ppc.jpg?s=128&g=1", "display_name": "C&#233;line Martinet Sanchez", "link": "https://stackoverflow.com/users/3086625/c%c3%a9line-martinet-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 34052384, "answer_count": 1, "score": 0, "last_activity_date": 1449088159, "creation_date": 1449085830, "question_id": 34051722, "link": "https://stackoverflow.com/questions/34051722/mandrill-api-using-rails-4-2-5-exconerrorssocketerror", "title": "Mandrill API using Rails 4.2.5 Excon::Errors::SocketError", "body": "<p>I am using Mandrill in my Rails app to send transactional e-mail. I use the <code>'mandrill-api'</code> gem and I configured it according to the documentation.</p>\n\n<p>It works fine on production but in local an error raides:</p>\n\n<pre><code>Unable to verify certificate, please set `Excon.defaults[:ssl_ca_path] = path_to_certs`, \n`ENV['SSL_CERT_DIR'] = path_to_certs`, `Excon.defaults[:ssl_ca_file] = path_to_file`, `ENV['SSL_CERT_FILE'] = path_to_file`, \n`Excon.defaults[:ssl_verify_callback] = callback` (see OpenSSL::SSL::SSLContext#verify_callback), \nor `Excon.defaults[:ssl_verify_peer] = false` (less secure).\n</code></pre>\n\n<p>I don't understand why it is working on production and not in local?</p>\n\n<p>Here is my config:</p>\n\n<p><strong>gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.2.3'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5'\n# Use postgresql as the database for Active Record\ngem 'pg', '~&gt; 0.15'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  #gem 'byebug'\n  gem 'better_errors'\n  gem 'binding_of_caller'\n  gem 'quiet_assets'\n  gem 'pry-rails'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\ngroup :production do\n  gem 'rails_12factor'\nend\n\n# Privacy\ngem 'figaro'\n\n# Heroku\ngem 'heroku'\n\n# Private access!\ngem 'lockup'\n\n# Mails\ngem 'mandrill-api'\n</code></pre>\n\n<p><strong>development.rb</strong></p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # In the development environment your application's code is reloaded on\n  # every request. This slows down response time but is perfect for development\n  # since you don't have to restart the web server when you make code changes.\n  config.cache_classes = false\n\n  # Do not eager load code on boot.\n  config.eager_load = false\n\n  # Show full error reports and disable caching.\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n\n  # Don't care if the mailer can't send.\n  config.action_mailer.raise_delivery_errors = false\n\n  # Print deprecation notices to the Rails logger.\n  config.active_support.deprecation = :log\n\n  # Raise an error on page load if there are pending migrations.\n  config.active_record.migration_error = :page_load\n\n  # Debug mode disables concatenation and preprocessing of assets.\n  # This option may cause significant delays in view rendering with a large\n  # number of complex assets.\n  config.assets.debug = true\n\n  # Asset digests allow you to set far-future HTTP expiration dates on all assets,\n  # yet still be able to expire them through the digest params.\n  config.assets.digest = true\n\n  # Adds additional error checking when serving assets at runtime.\n  # Checks for improperly declared sprockets dependencies.\n  # Raises helpful error messages.\n  config.assets.raise_runtime_errors = true\n\n  # Raises error for missing translations\n  # config.action_view.raise_on_missing_translations = true\n\n  # Mails\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.perform_deliveries = true\n\n  # Devise\n  #config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\n  # TODO: do it with a template: http://blog.nvisium.com/2014/10/mandrill-devise-and-mailchimp-templates.html\n  config.action_mailer.smtp_settings = {\n    :address   =&gt; 'smtp.mandrillapp.com',\n    :port      =&gt; 587, # ports 587 and 2525 are also supported with STARTTLS\n    :enable_starttls_auto =&gt; true, # detects and uses STARTTLS\n    :user_name =&gt; ENV['MANDRILL_USERNAME'],\n    :password  =&gt; ENV['MANDRILL_API_KEY'], # SMTP password is any valid API key\n    :authentication =&gt; 'login', # Mandrill supports 'plain' or 'login'\n    :domain =&gt; ENV['HOST'], # your domain to identify your server when connecting\n  }\nend\n</code></pre>\n\n<p><strong>mandrill.rb</strong></p>\n\n<pre><code>require 'mandrill'\n\n# Use an environment variable instead of placing the key in source code\nMANDRILL = Mandrill::API.new ENV['MANDRILL_API_KEY'], true\n</code></pre>\n\n<p><strong>Fonction raising the error only in local:</strong></p>\n\n<pre><code>  def send_short_email(subject, message, receiver)\n    inner_message = {\n      to:  [{name: receiver.name, type: 'to', email: receiver.email}],\n      subject: subject,\n      html: message,\n      text: message,\n      from_email: ENV['DEFAULT_EMAIL_SENDER']\n    }\n    MANDRILL.messages.send inner_message\n    logger.debug inner_message\n  end\n</code></pre>\n\n<p>I tried changing settings, hosts or API key but nothing works. And there is no mention of this problem in the gem documentation.</p>\n\n<p>Do you have an idea?</p>\n\n<p>Thanks!</p>\n\n<p>C\u00e9line</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 456, "user_id": 4448011, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006445908743/picture?type=large", "display_name": "Anchalee", "link": "https://stackoverflow.com/users/4448011/anchalee"}, "edited": false, "score": 0, "creation_date": 1449085061, "post_id": 34051332, "comment_id": 55857383, "body": "It looks like your problem is that you are shifting your new string value out of the bounds of the original array. You have to modulo l_alphabet.index(a) + num % 26 to make sure it&#39;s within bounds."}, {"owner": {"reputation": 53, "user_id": 5631967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e133cb88719b01e7560a31c92f205822?s=128&d=identicon&r=PG&f=1", "display_name": "thermobeelearns", "link": "https://stackoverflow.com/users/5631967/thermobeelearns"}, "reply_to_user": {"reputation": 456, "user_id": 4448011, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006445908743/picture?type=large", "display_name": "Anchalee", "link": "https://stackoverflow.com/users/4448011/anchalee"}, "edited": false, "score": 0, "creation_date": 1449085924, "post_id": 34051332, "comment_id": 55857833, "body": "Yup! That was the problem. Thanks for the help, sir."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5631967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e133cb88719b01e7560a31c92f205822?s=128&d=identicon&r=PG&f=1", "display_name": "thermobeelearns", "link": "https://stackoverflow.com/users/5631967/thermobeelearns"}, "edited": false, "score": 0, "creation_date": 1449085711, "post_id": 34051588, "comment_id": 55857714, "body": "That makes a lot of sense actually. Thank you kind sir."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1449086097, "post_id": 34051588, "comment_id": 55857929, "body": "OP: if this answer solved your issue, please consider accepting it as an answer, which helps keep SO tidy (or tidier)."}, {"owner": {"reputation": 53, "user_id": 5631967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e133cb88719b01e7560a31c92f205822?s=128&d=identicon&r=PG&f=1", "display_name": "thermobeelearns", "link": "https://stackoverflow.com/users/5631967/thermobeelearns"}, "edited": false, "score": 0, "creation_date": 1449213548, "post_id": 34051588, "comment_id": 55918327, "body": "I am so sorry. I didn&#39;t mean anything negative by my comment, I just got so excited I didn&#39;t think about it. I will try my best to never make the same mistake, please accept my apologies.  orde, I did have to look up how but I did accept the answer. Thank you as well."}], "tags": [], "owner": {"reputation": 456, "user_id": 4448011, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006445908743/picture?type=large", "display_name": "Anchalee", "link": "https://stackoverflow.com/users/4448011/anchalee"}, "is_accepted": true, "score": 3, "last_activity_date": 1449085377, "creation_date": 1449085377, "answer_id": 34051588, "question_id": 34051332, "link": "https://stackoverflow.com/questions/34051332/ruby-caesar-cipher/34051588#34051588", "title": "Ruby Caesar Cipher", "body": "<p>You were extending the index beyond the bounds of the alphabet. You have to check if the letters index + num > 26(letters in alphabet). If it is, index = index % 26 to wrap the position back around to the front of the array.</p>\n\n<pre><code>l_alphabet = (\"a\"..\"z\").to_a\nu_alphabet = (\"A\"..\"Z\").to_a\nnum = 5\nstring = \"Hello world, my name is Mark!\"\nnewstring = \"\"\nstring.each_char do |a|\n    if !l_alphabet.include?(a) &amp;&amp; !u_alphabet.include?(a)\n        newstring += a\n    else\n        if l_alphabet.include?(a)\n          index = l_alphabet.index(a) + num\n          if index &gt; 26 \n            index = index % 26\n          end\n          newstring += l_alphabet[index]\n        else\n          index = u_alphabet.index(a) + num\n          if index &gt; 26\n            index = index % 26\n          end\n            newstring += u_alphabet[index]\n        end\n    end    \n    puts newstring\nend\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5631967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e133cb88719b01e7560a31c92f205822?s=128&d=identicon&r=PG&f=1", "display_name": "thermobeelearns", "link": "https://stackoverflow.com/users/5631967/thermobeelearns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 34051588, "answer_count": 1, "score": -1, "last_activity_date": 1449112336, "creation_date": 1449084552, "last_edit_date": 1449112336, "question_id": 34051332, "link": "https://stackoverflow.com/questions/34051332/ruby-caesar-cipher", "title": "Ruby Caesar Cipher", "body": "<p>I am trying to implement a Caesar Cipher in Ruby and I am not sure why my code is not working:</p>\n\n<pre><code>l_alphabet = (\"a\"..\"z\").to_a\nu_alphabet = (\"A\"..\"Z\").to_a\nnum = 5\nstring = \"Hello world, my name is Mark!\"\nnewstring = \"\"\nstring.each_char do |a|\n    if !l_alphabet.include?(a) &amp;&amp; !u_alphabet.include?(a)\n        newstring += a\n    else\n        if l_alphabet.include?(a)\n            newstring += l_alphabet[l_alphabet.index(a) + num]\n        else\n            newstring += u_alphabet[u_alphabet.index(a) + num]\n        end\n    end    \nend\n\nputs newstring\n</code></pre>\n\n<p>I am getting these 4 errors and I am not sure what any of them mean.</p>\n\n<pre><code>no implicit conversion of nil into String\n(repl):11:in `+'\n(repl):11:in `block in initialize'\n(repl):6:in `each_char'\n(repl):6:in `initialize'\n</code></pre>\n"}, {"tags": ["javascript", "html", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 10466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09555e63d1932c71ccdb12886bab4ebe?s=128&d=identicon&r=PG", "display_name": "Mike Desjardins", "link": "https://stackoverflow.com/users/10466/mike-desjardins"}, "is_accepted": true, "score": 1, "last_activity_date": 1449085548, "creation_date": 1449085548, "answer_id": 34051639, "question_id": 34051181, "link": "https://stackoverflow.com/questions/34051181/rails-anchor-tag-to-jump-to-location-on-same-page-without-sending-a-new-request/34051639#34051639", "title": "Rails: Anchor Tag to jump to location on same page without sending a new request and having to re-render the page", "body": "<p>You don't need the blogs_path.  This should suffice:</p>\n\n<pre><code>&lt;%= link_to \"Back to Top\", '#top_of_blogs_list' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 0, "accepted_answer_id": 34051639, "answer_count": 1, "score": 0, "last_activity_date": 1449085548, "creation_date": 1449084017, "last_edit_date": 1449085232, "question_id": 34051181, "link": "https://stackoverflow.com/questions/34051181/rails-anchor-tag-to-jump-to-location-on-same-page-without-sending-a-new-request", "title": "Rails: Anchor Tag to jump to location on same page without sending a new request and having to re-render the page", "body": "<p>This is how I thought you do this.  For the place you want to jump to, you simply specify an id:</p>\n\n<pre><code>&lt;h1 id=\"top_of_blogs_list\"&gt;TOP OF WEBPAGE&lt;/h1&gt;\n</code></pre>\n\n<p>And then if you want to jump there from somewhere on a webpage via a link, you simply specify an anchor tag for that link:</p>\n\n<pre><code>  &lt;%= link_to \"Back to Top\", blogs_path(anchor: \"top_of_blogs_list\")%&gt;\n</code></pre>\n\n<p>The issue is that this is sending a brand new request to the server and re-rendering the entire page.  I do not want to send a new request to the server. I want to keep the current page as it is currently rendered, and simply jump up to where that id of <code>\"top_of_blogs_list\"</code> is specified.</p>\n\n<p>Perhaps this must be done using javascript?</p>\n"}, {"tags": ["arrays", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "edited": false, "score": 0, "creation_date": 1449083436, "post_id": 34050887, "comment_id": 55856417, "body": "this gives me true, false i think i need <code>&amp;:presence</code> like the answer below. Thank you for your help though"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "edited": false, "score": 0, "creation_date": 1449094600, "post_id": 34050887, "comment_id": 55862532, "body": "The important part is exactly the same? Depends how you set a and b. <code>select</code> will select all values from an enumerable for which the given condition is truthy. So an empty string or nil would be dropped."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 2, "last_activity_date": 1449083039, "creation_date": 1449083039, "answer_id": 34050887, "question_id": 34050755, "link": "https://stackoverflow.com/questions/34050755/how-to-join-two-array-attributes-if-the-second-is-in-ruby/34050887#34050887", "title": "How to join two array attributes if the second is != &quot;&quot; in Ruby", "body": "<p>Assuming <code>a</code> and <code>b</code> are your two string: </p>\n\n<pre><code>[a,b].select(&amp;:present?).join(\", \")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1152, "user_id": 1579663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fc5b6c6724e4be36ec9a46d7e5e9eb0?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/1579663/raman"}, "edited": false, "score": 0, "creation_date": 1449112169, "post_id": 34050909, "comment_id": 55868294, "body": "This would work on Rails, but if the question is about ruby, we would have to either define a <code>present?</code> method or compare it to <code>&quot;&quot;</code> or <code>nil</code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1449083148, "creation_date": 1449083148, "answer_id": 34050909, "question_id": 34050755, "link": "https://stackoverflow.com/questions/34050755/how-to-join-two-array-attributes-if-the-second-is-in-ruby/34050909#34050909", "title": "How to join two array attributes if the second is != &quot;&quot; in Ruby", "body": "<p>The problem is that <code>params['location']['address2']</code> is not empty, but an empty string. You can use <a href=\"http://api.rubyonrails.org/classes/Object.html#method-i-present-3F\" rel=\"nofollow\"><code>present?</code></a> to select only strings that are not blank.</p>\n\n<pre><code>if params['location']\n  street = [\n    params['location'].delete('address1'),\n    params['location'].delete('address2')\n  ].select(&amp;:present?).join(', ')\n\n  l = ::Location.create!(params['location'].merge('street' =&gt; street))\nend\n</code></pre>\n"}], "owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 34050909, "answer_count": 2, "score": 1, "last_activity_date": 1449083148, "creation_date": 1449082551, "last_edit_date": 1449082884, "question_id": 34050755, "link": "https://stackoverflow.com/questions/34050755/how-to-join-two-array-attributes-if-the-second-is-in-ruby", "title": "How to join two array attributes if the second is != &quot;&quot; in Ruby", "body": "<p>I have an array with two elements below:</p>\n\n<pre><code>if params[\"location\"]\n      params[\"location\"][\"street\"] =[\n          params[\"location\"].delete(\"address1\"),\n          params[\"location\"].delete(\"address2\")\n      ].compact.join(\", \")\n      l = ::Location.create!(street: params[\"location\"][\"street\"],\n            city: params[\"location\"][\"city\"], \n            state: params[\"location\"][\"state\"],\n            zip: params[\"location\"][\"postal\"], \n            country: params[\"location\"][\"country\"])\n</code></pre>\n\n<p>What I am trying to do is join the two together sperated by a \", \" only if address2 is an empty string/nil. </p>\n\n<p><strong>Example 1:</strong></p>\n\n<p>address1 = \"56 West Gay Street\"</p>\n\n<p>address2 = \"Apt. 211\"</p>\n\n<p>Actual: \"56 West Gay Street, Apt.211\"<br>\nExpected: \"56 West Gay Street, Apt.211\"\n<br><br><br>\n<strong>Example 2:</strong></p>\n\n<p>address1 = \"56 West Gay Street\"</p>\n\n<p>address2 = \"\"</p>\n\n<p>Actual: \"56 West Gay Street, \"<br>\nExpected: \"56 West Gay Street\"</p>\n"}, {"tags": ["javascript", "php", "ruby", "node.js", "recurly"], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 4289463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNbH8.jpg?s=128&g=1", "display_name": "Charlie Gerrior Jr.", "link": "https://stackoverflow.com/users/4289463/charlie-gerrior-jr"}, "is_accepted": true, "score": 3, "last_activity_date": 1449263559, "last_edit_date": 1449263559, "creation_date": 1449262875, "answer_id": 34097366, "question_id": 34050567, "link": "https://stackoverflow.com/questions/34050567/whats-the-equivalent-of-this-function-to-update-a-subscription-and-account-info/34097366#34097366", "title": "What&#39;s the equivalent of this function to update a subscription and account info in Recurly JS?", "body": "<p><a href=\"https://docs.recurly.com/js/\" rel=\"nofollow\">Recurly.js</a> is Recurly's name for a front-end web technology that enables the merchant to easily build their subscription checkout and accept payments. Using this library, merchants can tokenize payment information, display price/tax previews, and validate customer inputs. Because it is client-side, it can NOT be used to create or modify accounts, subscriptions, transactions, etc.</p>\n\n<p>In order to perfrom CRUD operations in Recurly, you must use its <a href=\"https://dev.recurly.com/\" rel=\"nofollow\">RESTful Web Services API</a>, either directly or through one of the provided wrappers (in PHP, Ruby, Python, and C#.NET). Recurly itself does not provide a supported API wrapper for NodeJS, although <a href=\"https://github.com/cgerrior/node-recurly\" rel=\"nofollow\">a 3rd-party one exists</a> and has been used successfully. This library contains functions to <a href=\"https://github.com/cgerrior/node-recurly/blob/master/lib/recurly.js#L22-L24\" rel=\"nofollow\">update an existing account</a> and <a href=\"https://github.com/cgerrior/node-recurly/blob/master/lib/recurly.js#L199-L201\" rel=\"nofollow\">update an existing subscription</a>.</p>\n\n<p>To update account '1234', you would use:</p>\n\n<pre><code>recurly.accounts.update('1234', {email: 'fake@test.com'}, function(res){\n console.log(res['data']);\n})\n</code></pre>\n\n<p>The second argument to this function is a JSON representation of the values that are changing. Available parameters are listed <a href=\"https://dev.recurly.com/docs/update-account\" rel=\"nofollow\">here</a>.</p>\n\n<p>To update subscription '32d7e59b0def37ddfabbd54d1296145b', you would use:</p>\n\n<pre><code>recurly.subscriptions.update('32d7e59b0def37ddfabbd54d1296145b', { quantity: 5 }, function(res){\n console.log(res['data']);\n})\n</code></pre>\n\n<p>The second argument to this function is a JSON representation of the values that are changing. Available parameters are listed <a href=\"https://dev.recurly.com/docs/update-subscription\" rel=\"nofollow\">here</a>.</p>\n\n<p>-Charlie (Sales Engineer @ Recurly)</p>\n"}], "owner": {"reputation": 11, "user_id": 2856859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b766404669a4208a02dcdd24d3dc3e2b?s=128&d=identicon&r=PG", "display_name": "Burte&#231;in &#39;Turk&#39; Sapta", "link": "https://stackoverflow.com/users/2856859/burte%c3%a7in-turk-sapta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 34097366, "answer_count": 1, "score": 0, "last_activity_date": 1449263559, "creation_date": 1449081888, "question_id": 34050567, "link": "https://stackoverflow.com/questions/34050567/whats-the-equivalent-of-this-function-to-update-a-subscription-and-account-info", "title": "What&#39;s the equivalent of this function to update a subscription and account info in Recurly JS?", "body": "<p>I contacted Recurly and they don't want to offer any support on this. </p>\n\n<p>I need to know the objects specific format otherwise Recurly will bounce if any extra data is sent or if you don't have the exact arguments for the query (which are different for each function).</p>\n\n<p>Ruby: </p>\n\n<pre><code>subscription = Recurly::Subscription.find('uuid')\nsubscription.update_attributes(\n  :plan_code =&gt; 'silver',...\n</code></pre>\n\n<p>PHP, Pyton, XML = (also in the docs)</p>\n\n<p>NodeJS = ?????????? (we have no clue)</p>\n\n<p>Much thanks!!!</p>\n\n<p><strong>PS.</strong> This is the response I got from Recurly,</p>\n\n<blockquote>\n  <p>Hi Turk, Thank you for your note.  Understanding of the question is\n  whether there is a Javascript equivalent for updating billing\n  information. The only supported options we can offer are as follows:\n  - using the Recurly.js V3 form (<a href=\"https://docs.recurly.com/js/\" rel=\"nofollow\">https://docs.recurly.com/js/</a>), to create new accounts, add billing info, and create a subscription\n  - update billing info through the API's. (<a href=\"https://dev.recurly.com/docs/lookup-an-accounts-billing-info\" rel=\"nofollow\">https://dev.recurly.com/docs/lookup-an-accounts-billing-info</a>)</p>\n  \n  <p>I hope this is helpful.  Thank you again. Regards,</p>\n  \n  <p>Ian Recurly Support</p>\n</blockquote>\n\n<p><strong>PSS</strong>. I also tried to contact their technicians via IRC - irc://chat.freenode.net:+6697/recurly but no luck again.</p>\n"}, {"tags": ["ruby", "json", "format"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449081977, "post_id": 34050556, "comment_id": 55855611, "body": "Maybe you show us <code>3rd object</code>. ? And how you generate JSON?"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449082205, "post_id": 34050556, "comment_id": 55855722, "body": "the ruby is writing outside the keyword level and without the keys. How can I code a pattern(?) for that?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1449082296, "post_id": 34050556, "comment_id": 55855763, "body": "Do you read the documentation for a <a href=\"http://ruby-doc.org/core-2.1.5/Hash.html#method-i-store\" rel=\"nofollow noreferrer\"><code>store</code></a> method? And it&#39;s not clear for me, desired output. All works fine here. What is your question?"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449082397, "post_id": 34050556, "comment_id": 55855829, "body": "No, didn&#39;t read. I&#39;d like the &quot;3&quot;:&quot;ball&quot; inside the keywords level"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1449082449, "post_id": 34050556, "comment_id": 55855861, "body": "That&#39;s how programmer works for now, ask question on SO. no need RTFM. So bad, so sad"}, {"owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449082798, "post_id": 34050556, "comment_id": 55856073, "body": "Sorry, I pressed [enter] after &quot;No, didn&#39;t read.&quot;After that I completed what I was supposed to talk."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1449082529, "creation_date": 1449082529, "answer_id": 34050747, "question_id": 34050556, "link": "https://stackoverflow.com/questions/34050556/how-make-ruby-write-my-json-correctly/34050747#34050747", "title": "How make ruby write my JSON correctly?", "body": "<p>You probably want use the following instead of <code>store</code>:</p>\n\n<pre><code>data_hash['keywords'] &lt;&lt; { 'id' =&gt; '3', 'product' =&gt; 'ball' }\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 4139135, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1782720305/picture?type=large", "display_name": "Raphael Onofre", "link": "https://stackoverflow.com/users/4139135/raphael-onofre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 34050747, "answer_count": 1, "score": -2, "last_activity_date": 1449082529, "creation_date": 1449081842, "last_edit_date": 1449082099, "question_id": 34050556, "link": "https://stackoverflow.com/questions/34050556/how-make-ruby-write-my-json-correctly", "title": "How make ruby write my JSON correctly?", "body": "<p>How can I make Ruby write the way my JSON is structured?</p>\n\n<p>I want this way:</p>\n\n<pre><code>{\n  \"keywords\": [\n    {\n      \"id\": \"1\" ,\n      \"product\": \"car\"\n    } ,\n    {\n      \"id\": \"2\" ,\n      \"product\": \"mobile\"\n    }\n  ]\n}\n</code></pre>\n\n<p>When i run the code with a 3rd object,\nRuby writes:</p>\n\n<pre><code>{\n  \"keywords\": [\n    {\n      \"id\": \"1\" ,\n      \"product\": \"car\"\n    } ,\n    {\n      \"id\": \"2\" ,\n      \"product\": \"mobile\"\n    }\n  ],\"3\":\"ball\"\n}\n</code></pre>\n\n<p>I'm generating the JSON this way:</p>\n\n<pre><code>data_hash.store(3, 'ball')\njson_output = data_hash.to_json\n\nfile = File.open('keywords.json','w')\nfile.write(json_output)\n</code></pre>\n"}, {"tags": ["ruby", "hash", "inject"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449081812, "post_id": 34050380, "comment_id": 55855523, "body": "Something wrong with your example, there is come from <code>a</code> ? <code>&quot;hello hello hello hi hi to to&quot;</code> not contain the char <code>&quot;a&quot;</code>."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1449083633, "post_id": 34050380, "comment_id": 55856529, "body": "Why don&#39;t you use <code>each_with_object</code> instead? That way you don&#39;t have to bother with the oft forgotten <code>; h</code> at the end of the block. Besides, you&#39;re not really injecting/reducing here as the feedback is artificial, you&#39;re really &quot;iterating with baggage&quot; and <code>each_with_object</code> exactly matches that intent."}], "answers": [{"tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": false, "score": 1, "last_activity_date": 1449082254, "last_edit_date": 1449082254, "creation_date": 1449081885, "answer_id": 34050566, "question_id": 34050380, "link": "https://stackoverflow.com/questions/34050380/group-hash-values-ruby/34050566#34050566", "title": "Group hash values -Ruby", "body": "<pre><code>word_count.inject({}) { |h, (k,v)| h[v] ||= []; h[v] &lt;&lt; k; h }\n</code></pre>\n\n<p><code>inject</code> is a classic functional programming tool.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4Hkrv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Hkrv.png\" alt=\"inject, aka reduce, aka fold\"></a></p>\n\n<p>It takes an initial value (in the picture it this is called \"z\"), then applies all the values one by one to it, producing a new value that's going to be the initial value for the next round.</p>\n\n<pre><code>inject(initial) { |memo, obj| block } \u2192 obj\n</code></pre>\n\n<p>The documentation lists this example, which simply calculates the sum, perhaps it helps to understand the concept:</p>\n\n<pre><code>(5..10).inject { |sum, n| sum + n }            #=&gt; 45\n</code></pre>\n\n<p>Explanation of the block:</p>\n\n<pre><code>{ |h, (k,v)| h[v] ||= []; h[v] &lt;&lt; k; h }\n   ^    ^        ^           ^       ^\n   |    |        |           |     return the hash for the next round.\n   |    |        |           add the element to the list\n   |    |      create a new entry in the hash if it doesn't exist yet\n   |   the next input, in this case, a key-value pair\n  previous value of hash (in the first round this is the initial value)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 5508163, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89641fec2cad508942a7c162095bf08d?s=128&d=identicon&r=PG&f=1", "display_name": "jslice", "link": "https://stackoverflow.com/users/5508163/jslice"}, "edited": false, "score": 0, "creation_date": 1449086670, "post_id": 34050648, "comment_id": 55858265, "body": "ahhhhh, I don&#39;t know why i didn&#39;t try this. Thanks for the explanation!"}], "tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": false, "score": 1, "last_activity_date": 1449082189, "creation_date": 1449082189, "answer_id": 34050648, "question_id": 34050380, "link": "https://stackoverflow.com/questions/34050380/group-hash-values-ruby/34050648#34050648", "title": "Group hash values -Ruby", "body": "<p>You are grouping key-values pairs from the hash. That's why you got arrays as <code>['hi', 2]</code>. To group only the keys by its values you have to get then first and use the value in the hash to group:</p>\n\n<pre><code>word_count.keys.group_by{ |k| word_count[k] }\n# =&gt; {3=&gt;[\"hello\"], 2=&gt;[\"hi\", \"to\"]} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 5508163, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89641fec2cad508942a7c162095bf08d?s=128&d=identicon&r=PG&f=1", "display_name": "jslice", "link": "https://stackoverflow.com/users/5508163/jslice"}, "edited": false, "score": 1, "creation_date": 1449085965, "post_id": 34050901, "comment_id": 55857861, "body": "This is an awesome and well written explanation that makes perfect sense. Thank you for taking the time to write this out!!!!"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 4, "last_activity_date": 1449091648, "last_edit_date": 1449091648, "creation_date": 1449083107, "answer_id": 34050901, "question_id": 34050380, "link": "https://stackoverflow.com/questions/34050380/group-hash-values-ruby/34050901#34050901", "title": "Group hash values -Ruby", "body": "<p>First, it may or may not help to know that <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow\"><code>Enumerable#inject</code></a> is also known as <code>reduce</code> because it takes a collection of values (hash or array) and \"reduces\" it to a single value. In this case, the result value is itself another collection, but it can be anything at all; the action and return type is determined by the initial value and block that you pass to <code>inject</code>. </p>\n\n<p>Any time you might find yourself tempted to do something like this:</p>\n\n<pre><code>my_result = some_starter_value\nsome_collection.each do |item|\n  my_result.incorporate( some_function_of(item) )\nend\n</code></pre>\n\n<p>you're basically typing out the inject/reduce pattern in manual form. If you use <code>inject</code>, the above code becomes this:</p>\n\n<pre><code>my_result = some_collection.inject( some_starter_value ) do |so_far, item|\n  so_far.incorporate( some_function_of(item) )\n  so_far\nend\n</code></pre>\n\n<p>In functional programming languages, this operation is called a \"fold\" - specifically, a \"left fold\".</p>\n\n<p>The important thing to realize is that the value passed into the block as the \"result so far\" is <em>the return value of the last run of the block</em>. So the block must not only modify the result, but also return its new value. I like to use <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-tap\" rel=\"nofollow\"><code>Object#tap</code></a> to make that automatic:</p>\n\n<pre><code>my_result = some_collection.inject( some_starter_value ) do |so_far, item|\n  so_far.tap { |sf| sf.incorporate( some_function_of(item) ) }\n  # tap call returns so_far itself, no matter what the block returns\nend\n</code></pre>\n\n<p>Anyway, on to your code:</p>\n\n<pre><code>word_count.inject({}) {|h, (k,v)| h[v] ||= []; h[v] &lt;&lt; k; h }\n</code></pre>\n\n<p>You are running <code>inject</code> on a Hash, and passing in an empty Hash as the initial value.  So a manual version would look something like this:</p>\n\n<pre><code>my_result = {}\nword_count.each do |key, value|\n  my_result[value] ||= [] # if my_result[value] is nil, set it to empty array\n  my_result[value] &lt;&lt; key # append this key to the array\nend\n</code></pre>\n\n<p>When you run <code>inject</code> over a hash, the block gets two values: the current result-so-far, and the current key/value pair as an array. So it looks like this:</p>\n\n<pre><code> my_result = word_count.inject({}) do |new_hash, kvpair|\n   key, value = kvpair\n   new_hash[value] ||= []\n   new_hash[value] &lt;&lt; key\n   new_hash  # remember to return new value from block\n end\n</code></pre>\n\n<p>but you can use destructuring to skip the separate key/value split-out step:</p>\n\n<pre><code> my_result = word_count.inject({}) do |new_hash, (key, value)|\n   new_hash[value] ||= []\n   new_hash[value] &lt;&lt; key\n   new_hash  # remember to return new value from block\n end\n</code></pre>\n\n<p>Simplify the variable names to h, k, and v, and put it on one line with <code>{</code>...<code>}</code> in place of <code>do</code>...<code>end</code>, and that's your code. </p>\n\n<p>As I said, I personally like to use <code>tap</code> instead of repeating the hash at the end. You can, if you like, also incorporate the initialization and the append into a single expression:</p>\n\n<pre><code> my_result = word_count.inject({}) do |new_hash, (key, value)|\n   new_hash.tap { |h| (h[value] ||= []) &lt;&lt; key }\n end\n</code></pre>\n\n<p>but that arguably hurts readability. You could try to do what you did with the original hash and specify a default value in the constructor:</p>\n\n<pre><code># Warning: does not work!\nmy_result = word_count.inject( Hash.new([]) ) do |new_hash, (key, value)|\n  new_hash.tap { |h| h[value] &lt;&lt; key }\nend\n</code></pre>\n\n<p>But that doesn't actually have the desired effect, because each entry gets a reference to the same array and so winds up having exactly the same list of words. Instead you would need to do something like this:</p>\n\n<pre><code>my_result = word_count.inject( Hash.new {|h,k| h[k]=[]} ) do |new_hash, (key, value)|\n  new_hash.tap { |h| h[value] &lt;&lt; key }\nend\n</code></pre>\n\n<p>... at which point it's no longer really an improvement over just doing the initialization inside the block.</p>\n\n<p>Finally, this specific type of reduction, where each call to the block is getting as its \"value so far\" an unchanging reference to the same (mutable) object, is probably best modeled in Ruby by using <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\"><code>Enumberable#each_with_object</code></a> instead of <code>inject</code> - as you did when building the initial hash of word counts. Unlike <code>inject</code> (but similarly to <code>tap</code>), <code>each_with_object</code> doesn't care about the return value of the block; it always returns the same object you pass into it. Confusingly, while <code>inject</code> passes the previous block's return value as the first argument, <code>each_with_object</code> passes its object as the <em>last</em> argument (presumably in order to behave in a parallel manner to the similarly-named <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_with_index\" rel=\"nofollow\"><code>Enumerable#each_with_index</code></a>):</p>\n\n<pre><code> my_result = word_count.each_with_object( {} ) do |(key, value), new_hash|\n   (new_hash[value] ||= []) &lt;&lt; key\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1449092580, "last_edit_date": 1449092580, "creation_date": 1449089044, "answer_id": 34052616, "question_id": 34050380, "link": "https://stackoverflow.com/questions/34050380/group-hash-values-ruby/34052616#34052616", "title": "Group hash values -Ruby", "body": "<p>There are a few things here that deserve mention.</p>\n\n<p><strong>Counting words</strong></p>\n\n<p>Firstly, your regex should be <code>/\\w+/</code>, not <code>/\\w/</code>, but I expect that was a typo.</p>\n\n<p>What you have is a more Ruby-like version of:</p>\n\n<pre><code>string = \"hello hello hello hi hi to to\"\n\narr = string.scan(/\\w+/)\nword_count = {}\ncount = 0\narr.each do |word|\n  word_count[word] = 0 unless word_count.key?(word)\n  word_count[word] += 1\nend\nword_count\n  #=&gt; {\"hello\"=&gt;3, \"hi\"=&gt;2, \"to\"=&gt;2}\n</code></pre>\n\n<p>Substituting out <code>arr</code> saves one statement and using <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\">Enumerable#each_with_object</a> eliminates two more:</p>\n\n<pre><code>count = 0\nstring.scan(/\\w+/).each_with_object({}) do |word, word_count|\n  word_count[word] = 0 unless word_count.key?(word)\n  word_count[word] += 1\nend\n  #=&gt; {\"hello\"=&gt;3, \"hi\"=&gt;2, \"to\"=&gt;2}\n</code></pre>\n\n<p><code>each_with_object</code> also has the advantage of keeping everything in its block away from prying eyes (by creating a new scope).</p>\n\n<p>Defining <code>word_count</code> with a default of zero:</p>\n\n<pre><code>word_count = Hash.new(0)\n</code></pre>\n\n<p>means that if <code>word_count</code> does not have a key <code>word</code>:</p>\n\n<pre><code>word_count[word] #=&gt; 0\n</code></pre>\n\n<p>It is important to understand that the above statement does <em>not</em> change the hash <code>word_count</code>. The statement:</p>\n\n<pre><code>word_count[word] += 1\n</code></pre>\n\n<p>expands to:</p>\n\n<pre><code>word_count[word] = word_count[word] + 1\n</code></pre>\n\n<p>which becomes:</p>\n\n<pre><code>word_count[word] = 0 + 1\n</code></pre>\n\n<p>if <code>word_count</code> does not have a key <code>word</code>. This is sometimes called a <em>counting hash</em>. So, one Ruby way is to write:</p>\n\n<pre><code>string.scan(/\\w+/).each_with_object(Hash.new(0)) {|word, word_count| word_count[word] += 1}\n  #=&gt; {\"hello\"=&gt;3, \"hi\"=&gt;2, \"to\"=&gt;2}\n</code></pre>\n\n<p>Since you want the count to be case-insensitive, you've converted <code>word</code> to lowercase. Let's also capture the result to a variable:</p>\n\n<pre><code>word_count = string.scan(/\\w+/).each_with_object(Hash.new(0)) do |word, word_count|\n  word_count[word.downcase] += 1\nend\n\nword_count\n  #=&gt; {\"hello\"=&gt;3, \"hi\"=&gt;2, \"to\"=&gt;2}\n</code></pre>\n\n<p>Another way:</p>\n\n<pre><code>word_count = string.scan(/\\w+/).each_with_object({}) do |word, word_count|\n  word.downcase!\n  word_count[word] = (word_count[word] || 0) + 1\nend\n  #=&gt; {\"hello\"=&gt;3, \"hi\"=&gt;2, \"to\"=&gt;2}\n</code></pre>\n\n<p>If <code>word_count</code> does not have a key <code>word</code>, the operative line becomes:</p>\n\n<pre><code>word_count[word] = (nil || 0) + 1 #=&gt; 0 + 1\n</code></pre>\n\n<p>and one more:</p>\n\n<pre><code>word_count = string.scan(/\\w+/).map(&amp;:downcase).group_by(&amp;:itself) \n  #=&gt; {\"hello\"=&gt;[\"hello\", \"hello\", \"hello\"],\n  #    \"hi\"=&gt;[\"hi\", \"hi\"],\n  #    \"to\"=&gt;[\"to\", \"to\"]} \nword_count.update(word_count) { |*,arr| arr.size }\n  #=&gt; {\"hello\"=&gt;3, \"hi\"=&gt;2, \"to\"=&gt;2}\n</code></pre>\n\n<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-update\" rel=\"nofollow\">Hash#update</a> (aka <code>merge!</code>) that employs a block to determine the values of keys that are present in both hashes being merged, which here is all keys. <a href=\"http://ruby-doc.org/core-2.2.0/Object.html#method-i-itself\" rel=\"nofollow\">Object#itself</a> came with Ruby v2.2. For earlier versions, you need:</p>\n\n<pre><code>group_by { |word| word }\n</code></pre>\n\n<p><strong>Determining words with the same count</strong></p>\n\n<p>Given <code>word_count</code>, your solution was:</p>\n\n<pre><code>count_to_words = word_count.group_by { |k,v| v }\n  #=&gt; {3=&gt;[[\"hello\", 3]], 2=&gt;[[\"hi\", 2], [\"to\", 2]], 1=&gt;[[\"a\", 1]]}\n</code></pre>\n\n<p>(which in v2.2+ you could write <code>word_count.group_by(&amp;:itself)</code>.)</p>\n\n<p>You are so close! Just one more step:</p>\n\n<pre><code>count_to_words.keys.each do |k|\n  count_to_words[k] = count_to_words[k].map(&amp;:first)\nend\ncount_to_words\n  #=&gt; { 3=&gt;[\"hello\"], 2=&gt;[\"hi\", \"to\"] }\n</code></pre>\n\n<p>or (as I am reminded by @Mark):</p>\n\n<pre><code>count_to_words.tap do |h|\n  h.keys.each { |k| h[k] = h[k].map(&amp;:first) }\nend\n  #=&gt; { 3=&gt;[\"hello\"], 2=&gt;[\"hi\", \"to\"] }\n</code></pre>\n\n<p>which we could combine with the calculation of <code>count_to_words</code> from <code>word_count</code>:</p>\n\n<pre><code>word_count.group_by { |k,v| v }.tap do |h|\n  h.keys.each { |k| h[k] = h[k].map(&amp;:first) }\nend\n  #=&gt; { 3=&gt;[\"hello\"], 2=&gt;[\"hi\", \"to\"] }\n</code></pre>\n\n<p>or even substitute out <code>word_count</code> as well:</p>\n\n<pre><code>string.scan(/\\w+/).each_with_object(Hash.new(0)) do |word, word_count|\n  word_count[word] += 1\nend.group_by { |k,v| v }.tap do |h|\n  h.keys.each { |k| h[k] = h[k].map(&amp;:first) }\nend\n  #=&gt; { 3=&gt;[\"hello\"], 2=&gt;[\"hi\", \"to\"] }\n</code></pre>\n\n<p>One last way of modifying <code>count_to_words</code> (using <code>update</code>, as I did earlier):</p>\n\n<pre><code>count_to_words.update(count_to_words) { |*,arr| arr.map(&amp;:first) }\n  #=&gt; { 3=&gt;[\"hello\"], 2=&gt;[\"hi\", \"to\"] }\n</code></pre>\n\n<p>One more thing. You had:</p>\n\n<pre><code>word_count = word_count.group_by { |k,v| v }\n</code></pre>\n\n<p>which reuses the variable <code>word_count</code>. Don't do that. <code>word_count</code> is now a misleading name for what you have and you've made debugging a pain, as you now have to remember to recompute <code>word_count</code> each time you run your code. In summary, <strong>don't do that!</strong><sup>1</sup></p>\n\n<p><strong>What about <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-reduce\" rel=\"nofollow\">Enumerable#reduce</a> (aka <code>inject</code>)?</strong></p>\n\n<p><code>Enumerable#each_with_object</code> made its introduction in Ruby v1.9. Before that, Rubiests used <code>reduce</code> to accomplish what <code>each_with_object</code> does in a more direct way. (<code>reduce</code> remains extremely valuable, <code>arr.reduce(:+)</code> being a simple example). If you examine your completed solution with the one using <code>inject</code> that you found, you'll see that they are very similar. Two differences:</p>\n\n<ul>\n<li><code>inject</code> here needs to return its \"memo\" for the next iteration; hence, that pesky <code>; h</code>; and</li>\n<li>the order of the block variables is reversed.</li>\n</ul>\n\n<p>I explained <code>h[v] ||= []</code> in <code>h[v] ||= []; h[v] &lt;&lt; k</code> earlier. (I prefer writing that <code>h[v] = (h[v]= []) &lt;&lt; k</code>.) </p>\n\n<p><sub><sup>1 ...but it's OK for me to do that with update.</sup></sub></p>\n"}], "owner": {"reputation": 89, "user_id": 5508163, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89641fec2cad508942a7c162095bf08d?s=128&d=identicon&r=PG&f=1", "display_name": "jslice", "link": "https://stackoverflow.com/users/5508163/jslice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1449093130, "creation_date": 1449081178, "last_edit_date": 1449093130, "question_id": 34050380, "link": "https://stackoverflow.com/questions/34050380/group-hash-values-ruby", "title": "Group hash values -Ruby", "body": "<p>Ok I'm having a little trouble wrapping my head around this solution. \nI initially was trying to make a word_counter hash that would have the number of occurrences as the key, and an array of all the words as the value.</p>\n\n<p>My code was..</p>\n\n<pre><code>string = \"hello hello hello hi hi to to a\"\n\nword_count = string.scan(/\\w+/).each_with_object(Hash.new(0)) do |word,hash|\n  hash[word.downcase] += 1\nend\n\nword_count = word_count.group_by {|k,v| v }\n# =&gt; {3=&gt;[[\"hello\", 3]], 2=&gt;[[\"hi\", 2], [\"to\", 2]], 1=&gt;[[\"a\", 1]]}\n</code></pre>\n\n<p>So the main issue was that I did not want a 2d array as the value, and only wanted them to contain the words. </p>\n\n<p>I ended up finding this solution</p>\n\n<pre><code>word_count.inject({}) {|h, (k,v)| h[v] ||= []; h[v] &lt;&lt; k; h }\n# =&gt; {3=&gt;[\"hello\"], 2=&gt;[\"hi\", \"to\"], 1=&gt;[\"a\"]}\n</code></pre>\n\n<p>This is exactly what I needed, but am not fully understanding how this works. Could someone please walk me through this ? Thanks!!</p>\n\n<p>UPDATE: Thank you for the answers I really appreciate them! I have a much more thorough understanding of whats going on now.</p>\n"}, {"tags": ["ruby", "cucumber"], "comments": [{"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1449163294, "post_id": 34050282, "comment_id": 55897667, "body": "Why would you want to do that? Are you concerned that this isn&#39;t happening?"}, {"owner": {"reputation": 107, "user_id": 4143303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mTt5.jpg?s=128&g=1", "display_name": "Megan B", "link": "https://stackoverflow.com/users/4143303/megan-b"}, "reply_to_user": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1449252606, "post_id": 34050282, "comment_id": 55941741, "body": "To be honest, it is a very complicated system where over one hundred tests will be run against over 30 configurations(I used the term build to simplify the question). I think it would be wise bookkeeping to know how many configurations my test was supposed to run against, and if it actually ran on them."}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1449278256, "post_id": 34050282, "comment_id": 55952212, "body": "In that case you might store the test results then grep them for the counts."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4143303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mTt5.jpg?s=128&g=1", "display_name": "Megan B", "link": "https://stackoverflow.com/users/4143303/megan-b"}, "edited": false, "score": 0, "creation_date": 1477329575, "post_id": 40150341, "comment_id": 67711468, "body": "This is a great answer. I&#39;m finding the AfterConfiguration hook very useful."}], "tags": [], "owner": {"reputation": 1303, "user_id": 2235381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0061f9bd5384a544637692774a6e108f?s=128&d=identicon&r=PG", "display_name": "lojza", "link": "https://stackoverflow.com/users/2235381/lojza"}, "is_accepted": true, "score": 2, "last_activity_date": 1476955254, "creation_date": 1476955254, "answer_id": 40150341, "question_id": 34050282, "link": "https://stackoverflow.com/questions/34050282/get-command-line-cucumber-tag/40150341#40150341", "title": "Get command line cucumber tag", "body": "<p>you can use <a href=\"https://github.com/cucumber/cucumber/wiki/Hooks#afterconfiguration\" rel=\"nofollow\">AfterConfiguration hook</a></p>\n\n<pre><code>AfterConfiguration do |config|\n  puts config.tag_expressions\nend\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4143303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mTt5.jpg?s=128&g=1", "display_name": "Megan B", "link": "https://stackoverflow.com/users/4143303/megan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 40150341, "answer_count": 1, "score": 3, "last_activity_date": 1476955254, "creation_date": 1449080851, "question_id": 34050282, "link": "https://stackoverflow.com/questions/34050282/get-command-line-cucumber-tag", "title": "Get command line cucumber tag", "body": "<p>I have a feature that runs against 3 different tags. Some scenarios run against all three tags, some two, some against only one.</p>\n\n<pre><code>@build_1 @build_2\nScenario: Test Case 1\nGiven I am on the home page\nAnd I click the X button\nThen I must see the text \"function not available\"\n\n@build_1\nScenario: Test Case 2\nGiven I am on the home page\nAnd I click the Y button\nThen I must see the text \"You pushed the Y button\"\n\n@build_2 @build_3\nScenario: Test Case 3\nGiven I am on the home page\nAnd I click the Y button\nThen I must see the text \"function not available\"\n\n@build_3\nScenario: Test Case 4\nGiven I am on the home page\nAnd I click the X button\nThen I must see the text \"Hey, this is neat!\"\n\n@build_1 @build_2 @build_3\nScenario: Test Case 5\nGiven I am on the home page\nAnd I click the Z button\nThen I must see the text \"You pushed the Z button\"\n</code></pre>\n\n<p>I run the scenario using three different commands:</p>\n\n<pre><code>cucucmber features/my_test.feature --tags @build_1\ncucucmber features/my_test.feature --tags @build_2\ncucucmber features/my_test.feature --tags @build_3\n</code></pre>\n\n<p>I have drastically simplified my code, given the time it takes to switch between builds it is necessary for me to run tests this way. </p>\n\n<p>Is there any way to tell which tag the current run was called with? Using</p>\n\n<pre><code>scenario.source_tag_names\n</code></pre>\n\n<p>gives all the tags for a given scenario, I am looking for the one tag that was specified on the command line. If I run </p>\n\n<pre><code>cucucmber features/my_test.feature --tags @build_2\n</code></pre>\n\n<p>For scenario 1 i get</p>\n\n<pre><code>scenario.source_tag_names = [\"@build_1\", \"@build2\", \"@build_3\"]\n</code></pre>\n\n<p>I want something that just gives @build_2.</p>\n\n<p>In the end what I am looking for is a way to ensure that all the scenarios have run against all their respective tags.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "json", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 1, "last_activity_date": 1449270307, "creation_date": 1449270307, "answer_id": 34098967, "question_id": 34050102, "link": "https://stackoverflow.com/questions/34050102/simplify-to-json-array-result-in-rails-4/34098967#34098967", "title": "Simplify .to_json array result in Rails 4", "body": "<p>It's simple, write your own serializer rather than trying to hack the <code>to_json</code>.</p>\n\n<pre><code>class PostWithTagsSerializer\n  attr_reader :object\n\n  def initialize(object)\n    @object = object\n  end\n\n  def as_json(*)\n    hash = object.as_json\n    hash[:tags] = object.tags.pluck(:name)\n    hash\n  end\n\n  def to_json(*)\n    as_json.to_json\n  edn\nend\n</code></pre>\n\n<p>Then simply use</p>\n\n<pre><code>PostWithTagsSerializer.new(@post).to_json\n</code></pre>\n"}], "owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34098967, "answer_count": 1, "score": 0, "last_activity_date": 1449270328, "creation_date": 1449080247, "last_edit_date": 1449270328, "question_id": 34050102, "link": "https://stackoverflow.com/questions/34050102/simplify-to-json-array-result-in-rails-4", "title": "Simplify .to_json array result in Rails 4", "body": "<p>I have this code:</p>\n\n<pre><code>@post.to_json(include: {tags: { only: :name} } )\n</code></pre>\n\n<p>which produces this output:</p>\n\n<pre><code>{ ... \"tags\": [{\"name\": \"Lorem\"}, {\"name\": \"ipsum\"}, {\"name\": \"cupcake\"}] ... }\n</code></pre>\n\n<p>When what I want  is:</p>\n\n<pre><code>{ ... \"tags\": [\"Lorem\", \"ipsum\", \"cupcake\"] ... }\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "workflow"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449081081, "post_id": 34049708, "comment_id": 55855113, "body": "What operation you want to perform on event fired? You can use <code>before_transition</code> for performing operation before transition to another state. Hope this will help."}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449081711, "post_id": 34049708, "comment_id": 55855460, "body": "Just check if an event has been fired for an instance. No operation on the event."}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449081764, "post_id": 34049708, "comment_id": 55855489, "body": "Then you can use before_transition. Whenever any event will occur it will call transition and before transition you can log it."}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449087420, "post_id": 34049708, "comment_id": 55858665, "body": "Yes, we can use log. I am looking to see if there is built-in method for this."}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 2011046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6653fc137cd93a11b1f4e81edad109b?s=128&d=identicon&r=PG", "display_name": "kattybilly", "link": "https://stackoverflow.com/users/2011046/kattybilly"}, "is_accepted": false, "score": 0, "last_activity_date": 1467208528, "creation_date": 1467208528, "answer_id": 38101766, "question_id": 34049708, "link": "https://stackoverflow.com/questions/34049708/how-to-find-if-an-event-has-been-fired-in-workflow/38101766#38101766", "title": "How to find if an event has been fired in workflow?", "body": "<p>So, you can catch event of on_create and on_update as there are callbacks present for it in ActiveRecord, but for change_state in workflow, you need to override the transition of workflow, by:</p>\n\n<pre><code>class Article &lt; BaseModel\n\ninclude Workflow\n  workflow do\n    state :new do\n      event :submit, :transitions_to =&gt; :awaiting_review\n    end\n    state :awaiting_review do\n      event :review, :transitions_to =&gt; :being_reviewed\n    end\n    state :being_reviewed do\n      event :accept, :transitions_to =&gt; :accepted\n      event :reject, :transitions_to =&gt; :rejected\n    end\n    state :accepted\n    state :rejected\n\n    on_transition do |from, to, event, *event_args|\n       self.update_attribute(:status, to)\n       # this triggers on_update callback on workflow transition\n       # which you can use to log the event now\n    end\n  end\nend\n\nclass BaseModel &lt; ActiveRecord\n  after_commit :log_create_event, on: [:create]\n  after_commit :log_update_event, on: [:update]\n  after_commit :log_destroy_event, on: [:destroy]\n\n  def log_create_event\n    #log_event('Create')\n  end\n\n  def log_update_event\n    #log_event('Update')\n  end\n\n  def log_destroy_event\n    #log_event('Destroy')\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467208528, "creation_date": 1449079001, "question_id": 34049708, "link": "https://stackoverflow.com/questions/34049708/how-to-find-if-an-event-has-been-fired-in-workflow", "title": "How to find if an event has been fired in workflow?", "body": "<p>We are using <a href=\"https://github.com/geekq/workflow\" rel=\"nofollow\">Geekq/workflow</a> in Rails app. Here is an example:</p>\n\n<pre><code>class Article\n  include Workflow\n  workflow do\n    state :new do\n      event :submit, :transitions_to =&gt; :awaiting_review\n    end\n    state :awaiting_review do\n      event :review, :transitions_to =&gt; :being_reviewed\n    end\n    state :being_reviewed do\n      event :accept, :transitions_to =&gt; :accepted\n      event :reject, :transitions_to =&gt; :rejected\n    end\n    state :accepted\n    state :rejected\n  end\nend\n</code></pre>\n\n<p>It is easy to find if a state, for example, <code>:awaiting_review</code> has been gone through by:</p>\n\n<pre><code>article.current_state &lt; :awaiting_review\n</code></pre>\n\n<p>However, we did not find a method to check if an event has been fired. Is checking if an event has been fired something possible with the workflow's built-in method? Or if not with this workflow, any other can?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "fiware-orion"], "comments": [{"owner": {"reputation": 466, "user_id": 5025832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/X1xaa.jpg?s=128&g=1", "display_name": "jbheren", "link": "https://stackoverflow.com/users/5025832/jbheren"}, "edited": false, "score": 0, "creation_date": 1449093466, "post_id": 34049083, "comment_id": 55861895, "body": "OK Got It. it was related to the scope of the response that ran in a function, even if the other values were fine (response.status &amp; response.message), response.body was lost out of the function."}], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 5025832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/X1xaa.jpg?s=128&g=1", "display_name": "jbheren", "link": "https://stackoverflow.com/users/5025832/jbheren"}, "edited": false, "score": 0, "creation_date": 1449080388, "post_id": 34049220, "comment_id": 55854718, "body": "Thanks, Yes I tried on another machine and I get the same result. I also tried a localhost connection from the server."}], "tags": [], "owner": {"reputation": 332, "user_id": 621279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41000caad506975d45b2177ee511b673?s=128&d=identicon&r=PG", "display_name": "Nicholas Valbusa", "link": "https://stackoverflow.com/users/621279/nicholas-valbusa"}, "is_accepted": false, "score": 4, "last_activity_date": 1449077892, "last_edit_date": 1449077892, "creation_date": 1449077431, "answer_id": 34049220, "question_id": 34049083, "link": "https://stackoverflow.com/questions/34049083/http-json-post-request-returns-empty-body-response-with-ruby/34049220#34049220", "title": "Http JSON POST request returns empty body response with ruby", "body": "<p>Your code looks fine, I would suggest clearing bundle's cache (<code>bundle clean --force</code>) and install packages again.</p>\n\n<p>Have you also tried running it on a different machine?</p>\n\n<p>By the way, here's a clear example about doing a json request with the HTTP library you are using:\n<a href=\"https://www.socialtext.net/open/very_simple_rest_in_ruby_part_3_post_to_create_a_new_workspace\" rel=\"nofollow\">https://www.socialtext.net/open/very_simple_rest_in_ruby_part_3_post_to_create_a_new_workspace</a></p>\n"}, {"tags": [], "owner": {"reputation": 2181, "user_id": 889556, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/pKZKH.jpg?s=128&g=1", "display_name": "gokhansari", "link": "https://stackoverflow.com/users/889556/gokhansari"}, "is_accepted": false, "score": 0, "last_activity_date": 1475147444, "creation_date": 1475147444, "answer_id": 39768659, "question_id": 34049083, "link": "https://stackoverflow.com/questions/34049083/http-json-post-request-returns-empty-body-response-with-ruby/39768659#39768659", "title": "Http JSON POST request returns empty body response with ruby", "body": "<p>It seems body of your request pretty print formatted. If you use object mapper or et. could you please check your object mapper have enabled prettyprint property or something like that? If it is enabled, remove it and try again. If you don't use object mapper, try to send a compact body instead of formatted one.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 466, "user_id": 5025832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/X1xaa.jpg?s=128&g=1", "display_name": "jbheren", "link": "https://stackoverflow.com/users/5025832/jbheren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1475147444, "creation_date": 1449077047, "last_edit_date": 1449093995, "question_id": 34049083, "link": "https://stackoverflow.com/questions/34049083/http-json-post-request-returns-empty-body-response-with-ruby", "title": "Http JSON POST request returns empty body response with ruby", "body": "<p>I am playing with ruby &amp; services, I try to retreive a json response, BUT only get an empty body response : </p>\n\n<pre><code>uri = URI(\"http://.../v1/queryContext\")\nreq = Net::HTTP::Post.new(uri.path, initheader = {'content-type' =&gt; 'application/json', 'Accept' =&gt; 'application/json'})\nreq.body = {\n           \"entities\": [\n           {\n               \"type\": \"Printer\",\n               \"isPattern\": \"false\",\n               \"id\": \"UM1\"\n           }\n       ]\n       }.to_json\n       response = Net::HTTP.start(uri.hostname, uri.port) do |http|\n         http.request(req)\n       end\n</code></pre>\n\n<p>Requests works fine <strong>(Status 200 / Message OK)</strong> but the JSON content that returns is not there (<strong>response.body.size</strong> = 0). very strange as I can see that its produced by the server.</p>\n\n<pre><code>Response payload: '{\n  \"contextResponses\" : [\n    {\n      \"contextElement\" : {\n        \"type\" : \"Printer\",\n        \"isPattern\" : \"false\",\n        \"id\" : \"UM1\",\n        \"attributes\" : [\n          {\n            \"name\" : \"bed\",\n            \"type\" : \"float\",\n            \"value\" : \"50\"\n          },\n          {\n            \"name\" : \"temperature\",\n            \"type\" : \"float\",\n            \"value\" : \"180\"\n          }\n        ]\n      },\n      \"statusCode\" : {\n        \"code\" : \"200\",\n        \"reasonPhrase\" : \"OK\"\n      }\n    }\n  ]\n}\n'\n</code></pre>\n\n<p>Also, The following curl equivalent Works fine :</p>\n\n<pre><code>(curl http://.../v1/queryContext -s -S --header 'Content-Type: application/json' \\\n    --header 'Accept: application/json' -d @- | python -mjson.tool) &lt;&lt;EOF\n{\n    \"entities\": [\n        {\n            \"type\": \"Printer\",\n            \"isPattern\": \"false\",\n            \"id\": \"UM1\"\n        }\n    ]\n} \nEOF\n</code></pre>\n\n<p>I have the same exact issue using gems like httpclient or unirest. Is There anything special in Ruby that has to be done to receive the awaited json contents ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1449076469, "post_id": 34048536, "comment_id": 55852355, "body": "What is a &quot;command line argument that asks for user&#39;s name&quot;? It is gibberish to me."}, {"owner": {"reputation": 63, "user_id": 4568055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ece116ef5b2ed4c92acc04aff7964dd?s=128&d=identicon&r=PG&f=1", "display_name": "rribeiro", "link": "https://stackoverflow.com/users/4568055/rribeiro"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1449076686, "post_id": 34048536, "comment_id": 55852517, "body": "To be honest, I shouldn&#39;t even have mentioned that because I know that part, it&#39;ll just be something like <code>puts &quot;Enter Username: &quot;</code> <code>name = gets</code>. I just really want to know, how to add onto the JSON file."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4568055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ece116ef5b2ed4c92acc04aff7964dd?s=128&d=identicon&r=PG&f=1", "display_name": "rribeiro", "link": "https://stackoverflow.com/users/4568055/rribeiro"}, "edited": false, "score": 0, "creation_date": 1449077735, "post_id": 34049170, "comment_id": 55853194, "body": "Thanks for the help, definitely helped me out."}, {"owner": {"reputation": 1225, "user_id": 1735921, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3xEka.jpg?s=128&g=1", "display_name": "user1735921", "link": "https://stackoverflow.com/users/1735921/user1735921"}, "edited": false, "score": 0, "creation_date": 1587163320, "post_id": 34049170, "comment_id": 108411494, "body": "it is adding backslashes to the file"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 5, "last_activity_date": 1449077292, "creation_date": 1449077292, "answer_id": 34049170, "question_id": 34048536, "link": "https://stackoverflow.com/questions/34048536/writing-to-json-file-in-ruby/34049170#34049170", "title": "Writing to JSON file in ruby", "body": "<p>Load the file into a Ruby Hash using</p>\n\n<pre><code>hash = JSON.load(File.read(\"path/to/file\"))\n</code></pre>\n\n<p>Then edit the Hash</p>\n\n<pre><code>hash[\"user2\"] = { \"movie\" =&gt; 0 }\n</code></pre>\n\n<p>Then encode it back</p>\n\n<pre><code>File.write(\"path/to/file\", JSON.dump(hash))\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4568055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ece116ef5b2ed4c92acc04aff7964dd?s=128&d=identicon&r=PG&f=1", "display_name": "rribeiro", "link": "https://stackoverflow.com/users/4568055/rribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 1, "closed_date": 1449643331, "accepted_answer_id": 34049170, "answer_count": 1, "score": 1, "last_activity_date": 1449077292, "creation_date": 1449075441, "last_edit_date": 1449076875, "question_id": 34048536, "link": "https://stackoverflow.com/questions/34048536/writing-to-json-file-in-ruby", "closed_reason": "Needs details or clarity", "title": "Writing to JSON file in ruby", "body": "<p>I have a JSON file that is like this: </p>\n\n<pre><code>{\n   \"user\" : { \"movie\": 0 } \n}\n</code></pre>\n\n<p>I want to add another user to the above JSON file. For example, something like this:</p>\n\n<pre><code>{   \"user\" : {\n                \"movie\" : 0\n            },\n    \"user2\" : {\n                \"movie\": 0\n             }\n}\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449075632, "post_id": 34048528, "comment_id": 55851804, "body": "You just need to add two columns <code>imageable_id and imageable_type</code> and run command <code>Picture.all.each do |picture| picture.imageable_type = &#39;Product&#39;; picture.imageable_id = picture.product_id; picture.save end</code> You can write this in your migration itself."}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449075704, "post_id": 34048528, "comment_id": 55851856, "body": "After that you can run migration to remove <code>product_id</code> column from <code>Pictures</code> table"}, {"owner": {"reputation": 6636, "user_id": 537913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/18609041083c89d4c1aaca67c8fbb487?s=128&d=identicon&r=PG", "display_name": "J. Ed", "link": "https://stackoverflow.com/users/537913/j-ed"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449135187, "post_id": 34048528, "comment_id": 55877804, "body": "@PardeepDhingra I saw you posted this as an answer yesterday, but it&#39;s gone today; could you post that again, as it seems a good answer which I can accept?"}], "answers": [{"tags": [], "owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "is_accepted": true, "score": 1, "last_activity_date": 1449076260, "creation_date": 1449076260, "answer_id": 34048823, "question_id": 34048528, "link": "https://stackoverflow.com/questions/34048528/rails-change-a-relationship-to-be-polymorphic/34048823#34048823", "title": "rails: change a relationship to be polymorphic", "body": "<pre><code>class AddImageableIdAndTypeToPictures &lt; ActiveRecord::Migration\n  def up\n    add_column :pictures, :imageable_type, :string\n    add_column :pictures, :imageable_id, :integer\n\n    Picture.all.each do |picture| \n      picture.imageable_type = 'Product'\n      picture.imageable_id = picture.product_id\n      picture.save\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 6636, "user_id": 537913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/18609041083c89d4c1aaca67c8fbb487?s=128&d=identicon&r=PG", "display_name": "J. Ed", "link": "https://stackoverflow.com/users/537913/j-ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 34048823, "answer_count": 1, "score": 3, "last_activity_date": 1449076260, "creation_date": 1449075421, "question_id": 34048528, "link": "https://stackoverflow.com/questions/34048528/rails-change-a-relationship-to-be-polymorphic", "title": "rails: change a relationship to be polymorphic", "body": "<p>Let's take a slightly more complex case of the example of polymorphic relationships as seen in <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">the docs</a> (2.9)<br>\nSuppose that initially, only a <code>Product</code> can have an <code>Image</code>; We would have something like this-  </p>\n\n<pre><code>class Picture &lt; ActiveRecord::Base\n  belongs_to :product\nend\n\nclass Employee &lt; ActiveRecord::Base\n  # nothing yet\nend\n\nclass Product &lt; ActiveRecord::Base\n  has_many :pictures\nend\n</code></pre>\n\n<p>After a while, we want to add the ability for an <code>Employee</code> to have an image also;<br>\nWhat kind of migrations do I need to run to make sure that the existing \nProducts' images are preserved and the relationship is now polymorphic, like so-  </p>\n\n<pre><code>class Picture &lt; ActiveRecord::Base\n  belongs_to :imageable, polymorphic: true\nend\n\nclass Employee &lt; ActiveRecord::Base\n  has_many :pictures, as: :imageable\nend\n\nclass Product &lt; ActiveRecord::Base\n  has_many :pictures, as: :imageable\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": -1, "last_activity_date": 1449078244, "last_edit_date": 1449078244, "creation_date": 1449075801, "answer_id": 34048669, "question_id": 34048513, "link": "https://stackoverflow.com/questions/34048513/syntax-error-unexpected-tstring-beg-ror/34048669#34048669", "title": "Syntax error, unexpected tSTRING_BEG ROR", "body": "<p>Just as the message says.</p>\n\n<ul>\n<li>Your regex <code>//chefrubyaehq</code> is invalid. Ruby regex only has <code>i</code>, <code>o</code>, <code>x</code>, <code>m</code> options.</li>\n<li>You forgot to put a period after your regex <code>/\\n      gem_binary '/</code> before the method <code>opt</code>.</li>\n</ul>\n\n<p>And when you fix those, you will still encounter more errors.</p>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 3, "last_activity_date": 1449077302, "creation_date": 1449077302, "answer_id": 34049175, "question_id": 34048513, "link": "https://stackoverflow.com/questions/34048513/syntax-error-unexpected-tstring-beg-ror/34049175#34049175", "title": "Syntax error, unexpected tSTRING_BEG ROR", "body": "<p>You need to put the source (<code>https://chefrubyaehq.kdc.capitalone.com/</code>) inside quotes to make it a string. Either single or double quotes is fine for this case.</p>\n"}], "owner": {"reputation": 951, "user_id": 1666529, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/jX7Me.jpg?s=128&g=1", "display_name": "Ishu Gupta", "link": "https://stackoverflow.com/users/1666529/ishu-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 34049175, "answer_count": 2, "score": -3, "last_activity_date": 1449078244, "creation_date": 1449075366, "last_edit_date": 1449077347, "question_id": 34048513, "link": "https://stackoverflow.com/questions/34048513/syntax-error-unexpected-tstring-beg-ror", "title": "Syntax error, unexpected tSTRING_BEG ROR", "body": "<p>Below is my code: </p>\n\n<pre><code>    gem_package 'cucumber' do\n  clear_sources  true\n  source https://chefrubyaehq.kdc.example.com/\n  gem_binary '/opt/chef/embedded/bin/gem'\n  action :install\nend\n</code></pre>\n\n<p>And I am getting the following error:</p>\n\n<pre><code>FATAL: zng937-test/recipes/default.rb:43: unknown regexp options - chfrbyahq\nFATAL: zng937-test/recipes/default.rb:44: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('\nFATAL:   gem_binary '/opt/chef/embedded/bin/gem'\n</code></pre>\n\n<p>Does anyone have any idea why I would be getting this?</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1449075790, "post_id": 34048379, "comment_id": 55851899, "body": "did you try with <code>expect(page).to have_selector(&quot;something&quot;)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1449078050, "creation_date": 1449078050, "answer_id": 34049408, "question_id": 34048379, "link": "https://stackoverflow.com/questions/34048379/capybara-cucumber-ruby-issue-press-element-only-if-appears-and-continue-without/34049408#34049408", "title": "Capybara/Cucumber/Ruby issue: Press element only if appears and continue without errors", "body": "<p>Rather than using find or expects you should be using Capybaras has_xxx? and has_no_xxx? methods (has_css?, has_button?, has_select?, ...) which return boolean results rather than raising expectations.  In your case it would be </p>\n\n<pre><code>if page.has_css?('#idOfOneElement', wait: 2) \n  page.find_by_id(\"idOfOneElement\").click\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 3174355, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1f1ae61d5f8d2fab2bc859311301d08b?s=128&d=identicon&r=PG&f=1", "display_name": "user3174355", "link": "https://stackoverflow.com/users/3174355/user3174355"}, "is_accepted": false, "score": 0, "last_activity_date": 1449141322, "creation_date": 1449141322, "answer_id": 34064545, "question_id": 34048379, "link": "https://stackoverflow.com/questions/34048379/capybara-cucumber-ruby-issue-press-element-only-if-appears-and-continue-without/34064545#34064545", "title": "Capybara/Cucumber/Ruby issue: Press element only if appears and continue without errors", "body": "<p>Thanks!!</p>\n\n<p>That was very useful!!!!\nFinal code:</p>\n\n<pre><code> if Capybara::has_css?('#idOfOneElement', wait: 1)\n       Capybara::fill_in('idOfOneElement', :with =&gt; 'mytext') \n       Capybara::find_by_id(\"idOfOneButton\").click\n end\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3174355, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1f1ae61d5f8d2fab2bc859311301d08b?s=128&d=identicon&r=PG&f=1", "display_name": "user3174355", "link": "https://stackoverflow.com/users/3174355/user3174355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 34049408, "answer_count": 2, "score": 1, "last_activity_date": 1449141322, "creation_date": 1449075071, "question_id": 34048379, "link": "https://stackoverflow.com/questions/34048379/capybara-cucumber-ruby-issue-press-element-only-if-appears-and-continue-without", "title": "Capybara/Cucumber/Ruby issue: Press element only if appears and continue without errors", "body": "<p>I\u00b4m really new in Capybara world and I am having lot of problems to write a test that do some operations in a screen that only appears sometimes.</p>\n\n<p>I want to click in one element of this screen, if appear, but if does not appear, I need to keep clicking and fulfill a form in the next screen.</p>\n\n<p>My solution now, works but it\u00b4s really ugly:</p>\n\n<p>Step:</p>\n\n<pre><code>When(/^check my process with several screens$/) do\n  page=MyPage.new\n  page.check_and_click_screen1_if_appears  \n  page.do_my_operations_in_screen2 \nend\n</code></pre>\n\n<p>MyPage implementation:</p>\n\n<pre><code>def check_and_click_screen1_if_appears  \n  Capybara::find_by_id(\"idOfOneElement\", :wait =&gt; 2).click      \n  rescue Capybara::ElementNotFound\nend\n\ndef do_my_operations_in_screen2 \n  Capybara::find_by_id(\"idOfOtherElement\").click        \n  Capybara::fill_in('txtSearch', :with =&gt; 'mytext')\nend\n</code></pre>\n\n<p>If \"idOfOneElement\" appears in 2 seconds, click it and continue doing \"check_screen2_elements\", if does not appear, none error is shown in test and pass to execute \"do_my_operations_in_screen2\".</p>\n\n<p>Works fine but I\u00b4m sure that capybara can do this much more effective!!</p>\n\n<p>And if I need to improve my test, and want to fill in some text box in my optional \"screen1\", my solution with rescue exception does not work!!!</p>\n\n<p>Some help??</p>\n\n<p>Thanks!!!</p>\n"}, {"tags": ["ruby", "debugging", "jekyll"], "answers": [{"tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 51, "last_activity_date": 1449078307, "creation_date": 1449078307, "answer_id": 34049498, "question_id": 34048313, "link": "https://stackoverflow.com/questions/34048313/jekyll-debug-or-print-all-variables/34049498#34049498", "title": "jekyll debug or print all variables", "body": "<p>With Jekyll 2.x, you can use <a href=\"https://raw.githubusercontent.com/progrium/blogrium/master/_plugins/debug.rb\">this plugin</a>.</p>\n\n<p>It allows you to do something like <code>{{ site | debug }}</code>.</p>\n\n<p>Since Jekyll 3, you have <code>{{ variable | inspect }}</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 23249, "user_id": 93540, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0c65ea6e0452cb127010585a52b66d34?s=128&d=identicon&r=PG", "display_name": "sanmai", "link": "https://stackoverflow.com/users/93540/sanmai"}, "is_accepted": false, "score": 34, "last_activity_date": 1598780011, "last_edit_date": 1598780011, "creation_date": 1484528689, "answer_id": 41668125, "question_id": 34048313, "link": "https://stackoverflow.com/questions/34048313/jekyll-debug-or-print-all-variables/41668125#41668125", "title": "jekyll debug or print all variables", "body": "<p><code>inspect</code> doesn't let you peek inside variables, where <code>jsonify</code> does just that.</p>\n<pre><code>{{ variable | jsonify }}\n</code></pre>\n<p>No plugins needed.</p>\n<p>Please be aware that <code>jsonify</code> will use as much memory it needs to do its thing without any specific limits. Say, if you have hundreds of posts or pages, and you would want to jsonify them all at once, this may not work as you expect. Worst case the system may go out of RAM and became unresponsive. Exercise due caution.</p>\n"}, {"tags": [], "owner": {"reputation": 2080, "user_id": 4877269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99109eb655f35d1a427876b48b123a29?s=128&d=identicon&r=PG", "display_name": "Alex Peters", "link": "https://stackoverflow.com/users/4877269/alex-peters"}, "is_accepted": false, "score": 9, "last_activity_date": 1544368648, "creation_date": 1544368648, "answer_id": 53693728, "question_id": 34048313, "link": "https://stackoverflow.com/questions/34048313/jekyll-debug-or-print-all-variables/53693728#53693728", "title": "jekyll debug or print all variables", "body": "<p>The other answers don't address the \u201call variables\u201d part of the question.</p>\n\n<p>Although Jekyll doesn't offer a <code>get_defined_vars</code> equivalent, <a href=\"https://jekyllrb.com/docs/\" rel=\"noreferrer\">the documentation</a> does declare <a href=\"https://jekyllrb.com/docs/variables/#global-variables\" rel=\"noreferrer\">all available global variables</a> (which at this time are <code>site</code>, <code>page</code>, <code>layout</code>, <code>content</code>, and <code>paginator</code>).</p>\n\n<p>You can therefore debug/print <strong>all</strong> variables with a series of <code>jsonify</code> <a href=\"https://jekyllrb.com/docs/liquid/filters/\" rel=\"noreferrer\">filter</a> calls (filtering also with <code>escape</code> since some of them will contain HTML):</p>\n\n<pre><code>&lt;pre&gt;\n    site: {{ site | jsonify | escape }}\n    page: {{ page | jsonify | escape }}\n    layout: {{ layout | jsonify | escape }}\n    content: {{ content | jsonify | escape }}\n    paginator: {{ paginator | jsonify | escape }}\n&lt;/pre&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5756, "user_id": 5916915, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/766d0cd9fc3c1fb901aa869f7752b59a?s=128&d=identicon&r=PG&f=1", "display_name": "Flux", "link": "https://stackoverflow.com/users/5916915/flux"}, "is_accepted": false, "score": 2, "last_activity_date": 1615712809, "last_edit_date": 1615712809, "creation_date": 1585991367, "answer_id": 61025949, "question_id": 34048313, "link": "https://stackoverflow.com/questions/34048313/jekyll-debug-or-print-all-variables/61025949#61025949", "title": "jekyll debug or print all variables", "body": "<p>To pretty-print variables, you can insert this in any template:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;pre id=&quot;jekyll-debug&quot;&gt;&lt;/pre&gt;\n&lt;script&gt;\n  var obj = JSON.parse(decodeURIComponent(&quot;{{ site | jsonify | uri_escape }}&quot;));\n  var prettyJson = JSON.stringify(obj, null, 4);  // Pretty-printed JSON (indented 4 spaces).\n  document.getElementById(&quot;jekyll-debug&quot;).textContent = prettyJson;\n&lt;/script&gt;\n</code></pre>\n<p>Change <code>site</code> (in <code>{{ site | jsonify | uri_escape }}</code>) to whatever variable you want to print.</p>\n<p>You will then be able to see your variables neatly arranged in the generated pages. Something like this:</p>\n<p><a href=\"https://i.stack.imgur.com/ZBbBi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZBbBi.png\" alt=\"Pretty-printed Jekyll template variables\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 8107655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zfHqXZ69Q5s/AAAAAAAAAAI/AAAAAAAAADE/JmyslHbHPL0/photo.jpg?sz=128", "display_name": "Xiang", "link": "https://stackoverflow.com/users/8107655/xiang"}, "is_accepted": false, "score": 0, "last_activity_date": 1601484145, "creation_date": 1601484145, "answer_id": 64142097, "question_id": 34048313, "link": "https://stackoverflow.com/questions/34048313/jekyll-debug-or-print-all-variables/64142097#64142097", "title": "jekyll debug or print all variables", "body": "<p>For future, who see this page.</p>\n<p>I have wrote a Package to do this type of work. In your command line, install it,</p>\n<pre><code>gem install 'jekyll-liquid-debug'\n</code></pre>\n<p>Then you can <strong>debug</strong> your <code>liquid</code> file in your terminal without <strong>building your whole site</strong> again and again.</p>\n<p>By using,</p>\n<pre><code>jekyll-liquid-debug -f YOUR_LIQUID_FILE.liquid\n</code></pre>\n<p>It also has other usages, please check it more~</p>\n"}, {"tags": [], "owner": {"reputation": 6080, "user_id": 553865, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zS3Wy.jpg?s=128&g=1", "display_name": "Mike Slinn", "link": "https://stackoverflow.com/users/553865/mike-slinn"}, "is_accepted": false, "score": 0, "last_activity_date": 1609074467, "creation_date": 1609074467, "answer_id": 65466090, "question_id": 34048313, "link": "https://stackoverflow.com/questions/34048313/jekyll-debug-or-print-all-variables/65466090#65466090", "title": "jekyll debug or print all variables", "body": "<p><a href=\"https://github.com/octopress/debugger\" rel=\"nofollow noreferrer\">Octopress Debugger</a> probably does what you want, and more.</p>\n"}], "owner": {"reputation": 982, "user_id": 1255630, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a3774d2a36a5738e79c07700811241?s=128&d=identicon&r=PG", "display_name": "thoth", "link": "https://stackoverflow.com/users/1255630/thoth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13582, "favorite_count": 10, "accepted_answer_id": 34049498, "answer_count": 6, "score": 41, "last_activity_date": 1615712809, "creation_date": 1449074895, "last_edit_date": 1449075273, "question_id": 34048313, "link": "https://stackoverflow.com/questions/34048313/jekyll-debug-or-print-all-variables", "title": "jekyll debug or print all variables", "body": "<p>I want to peak into Jekyll's brain and see what's going on, in php you have <a href=\"http://php.net/manual/en/function.get-defined-vars.php\">get_defined_vars</a>, so I tried to do something akin to that with: </p>\n\n<pre><code>      {% for local_variable in local_variables %}\n      &lt;p&gt; {{ local_variable }} &lt;/p&gt;&lt;br&gt;\n      {% endfor %}\n</code></pre>\n\n<p>Which output nothing. Am I trying too hard? Is there some method in ruby or jekyll for this?  I'd just like to poke around and make sure everything is set correctly and possibly to find out about variables I don't know about.</p>\n"}, {"tags": ["ruby", "inheritance", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "edited": false, "score": 1, "creation_date": 1449075428, "post_id": 34048496, "comment_id": 55851665, "body": "That is what I am trying to avoid. Isn&#39;t there a way to &quot;lazily&quot; require my files so I don&#39;t have to manage them on a file basis?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "edited": false, "score": 0, "creation_date": 1449075539, "post_id": 34048496, "comment_id": 55851737, "body": "You either control the order of requiring the files in <code>config.ru</code>, or do as I wrote above."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "edited": false, "score": 1, "creation_date": 1449495091, "post_id": 34048496, "comment_id": 56017254, "body": "@Matheus208 <code>require</code> and <code>require_relative</code> <i>are</i> lazy (in that they only load once) but it is good practice to add requires for each file that needs something - do you not run tests? Do you need to load your entire app just to test one file? Loading files from the config.ru <i>and</i> individual requires in each file is the way to go."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1449075470, "last_edit_date": 1449075470, "creation_date": 1449075340, "answer_id": 34048496, "question_id": 34048011, "link": "https://stackoverflow.com/questions/34048011/ruby-inheritance-and-require-order/34048496#34048496", "title": "Ruby inheritance and require order", "body": "<p>At the top of <code>website_controller.rb</code>, require <code>application_controller.rb</code>.</p>\n\n<p>You may feel it redundant, but that won't harm. This is the most robust way.</p>\n"}, {"tags": [], "owner": {"reputation": 1950, "user_id": 339614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b87153d4e4878925e362546c4f55b92?s=128&d=identicon&r=PG", "display_name": "prater", "link": "https://stackoverflow.com/users/339614/prater"}, "is_accepted": false, "score": 3, "last_activity_date": 1449081451, "creation_date": 1449081451, "answer_id": 34050459, "question_id": 34048011, "link": "https://stackoverflow.com/questions/34048011/ruby-inheritance-and-require-order/34050459#34050459", "title": "Ruby inheritance and require order", "body": "<p>So, the other answer is actually the correct and easiest way - but if for whatever reason you don't want to do it that way, you can use <code>autoload</code> provided you've developed your Sinatra app in the \"modular\" style.</p>\n\n<p>In <code>config.ru</code> you are currently \"eager-loading\" all of your files.  Instead, you would explicitly list the load paths for unknown constants - like so:</p>\n\n<pre><code>autoload :ApplicationController, 'app/controllers/application_controller'\nautoload :WebsiteController, 'app/controllers/website_controller'\n</code></pre>\n\n<p>Note that <code>autoload</code> is a method on <code>Module</code> so you have to put the calls to <code>autoload</code> within the same 'namespace' - ie:</p>\n\n<pre><code>module MyApp\n  autoload :MyThing, 'models/my_thing'\nend\n</code></pre>\n\n<p>Will fire the autoload when the constant <code>MyApp::MyThing</code> is missing. That said - unless you <em>know why</em> you need to autoload your classes, just require it at the top of the file.</p>\n"}], "owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 1, "accepted_answer_id": 34048496, "answer_count": 2, "score": 2, "last_activity_date": 1449081451, "creation_date": 1449074086, "last_edit_date": 1449075212, "question_id": 34048011, "link": "https://stackoverflow.com/questions/34048011/ruby-inheritance-and-require-order", "title": "Ruby inheritance and require order", "body": "<p>I am trying to set up a new modularised Sinatra app. This is the relevant folder structure:</p>\n\n<pre><code>- app \n  - controllers\n    - application_controller.rb\n    - website_controller.rb\n  - config.ru \n</code></pre>\n\n<p>The <code>application_controller.rb</code> defines the <code>ApplicationController</code> class, requires <code>sinatra/base</code> and, apart from that, doesn't do anything interesting.</p>\n\n<p>The <code>website_controller.rb</code> inherits <code>application_controller.rb</code>:</p>\n\n<pre><code># website_controller.rb\nclass WebsiteController &lt; ApplicationController\n\n  include Sinatra::Cookies\n  ...\nend\n</code></pre>\n\n<p>My <code>config.ru</code> file is what I run to start the Sinatra app, so it is supposed to require all the classes:</p>\n\n<pre><code>#config.ru\nrequire 'sinatra/base'\n\nDir.glob('./app/{models,helpers,controllers}/*.rb').each {|file|\n  require file\n}\n\n...\n</code></pre>\n\n<p>When it requires all files, it requires <code>website_controller.rb</code> before requiring <code>application_controller.rb</code>. That way, when the inheritance on <code>WebsiteController</code> is parsed, it does not know yet what <code>ApplicationController</code> is, and I get the error <code>uninitialized constant ApplicationController (NameError)</code>.</p>\n\n<p>What is the best practice to set up my project so I have all required files ready without facing this kind of ordering problems?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 1579663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fc5b6c6724e4be36ec9a46d7e5e9eb0?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/1579663/raman"}, "edited": false, "score": 0, "creation_date": 1449082554, "post_id": 34047790, "comment_id": 55855923, "body": "This is the reason why you can chain multiple active record queries and the way by which ActiveRecord is able to merge all the queries into a single query."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1449073493, "creation_date": 1449073493, "answer_id": 34047790, "question_id": 34047430, "link": "https://stackoverflow.com/questions/34047430/active-record-query-strange-behavior/34047790#34047790", "title": "Active Record Query strange behavior", "body": "<p><code>Property.limit(10)</code> does not load 10 properties from the database like you expect. It only returns a <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Relation.html\" rel=\"nofollow\"><code>ActiveRecord::Relation</code></a>. </p>\n\n<p>The database query happens when you call a method on that Relation object that actually needs the data from that database (like calling <code>count</code> or <code>each</code>).</p>\n\n<p>This is default ActiveRecord behavior. It does not slow down anything, because it does not affect the overall response time if the data loaded in the controller or in the view.</p>\n\n<p>Read more about <a href=\"http://www.theodinproject.com/ruby-on-rails/active-record-queries\" rel=\"nofollow\">Relations and Lazy Evaluation</a>.</p>\n"}], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 34047790, "answer_count": 1, "score": 0, "last_activity_date": 1449073493, "creation_date": 1449072530, "question_id": 34047430, "link": "https://stackoverflow.com/questions/34047430/active-record-query-strange-behavior", "title": "Active Record Query strange behavior", "body": "<p>The situation is on the screenshot below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/c1JDP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c1JDP.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you see, I call <code>Property.limit(10)</code> to grab first 10 objects from the database, but the query will execute only if I call <code>@properties</code> variable. I don't understand why it is not called. It then will be called in the view and slow up rendering. Surprisingly,it will be called in <code>_filter</code> partial, however, it doesn't contain <code>@properties</code> variable at all. What's going on?</p>\n\n<p><a href=\"https://i.stack.imgur.com/OuLcw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OuLcw.png\" alt=\"enter image description here\"></a></p>\n\n<p>At the same time, <code>City.all</code> and <code>Country.all</code> are executed in the controller. How can it happen?</p>\n"}, {"tags": ["ruby", "inheritance", "refactoring"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1449071430, "post_id": 34046459, "comment_id": 55848611, "body": "Not clear what you mean by &quot;abstract out the name field into a parent class &quot;."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1449071550, "post_id": 34046459, "comment_id": 55848706, "body": "I wonder how your development process looks like, when you try to avoid reloading changed code..."}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1449071595, "post_id": 34046459, "comment_id": 55848738, "body": "Try to use mixin instead"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1449071783, "post_id": 34046459, "comment_id": 55848913, "body": "I&#39;m not trying to avoid reloading. I&#39;m trying to eliminate the <code>Object.send(:remove_const, ...)</code> step."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449088458, "post_id": 34046459, "comment_id": 55859157, "body": "@SilvioMayolo how do you reload your code? Do you have a long-running process that you modify at runtime?"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449091065, "post_id": 34046459, "comment_id": 55860596, "body": "@Stefan Yes, I have irb running in the background and use <code>load &#39;main.rb&#39;</code> to reload. I&#39;m not sure if this is the most Ruby-ish way to do this, but I come from a Lisp background."}], "answers": [{"comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1449071854, "post_id": 34046966, "comment_id": 55848971, "body": "Perhaps I was a bit unclear. I don&#39;t want to change the parent. I want some way of telling Ruby that I&#39;m not trying to modify the existing class but completely rebuild it from scratch so that I don&#39;t get that problem."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1449071308, "creation_date": 1449071308, "answer_id": 34046966, "question_id": 34046459, "link": "https://stackoverflow.com/questions/34046459/superclass-mismatch-in-ruby/34046966#34046966", "title": "Superclass mismatch in Ruby", "body": "<p>No. You cannot change the parent of a class once it has been defined.</p>\n"}], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1449071679, "creation_date": 1449069947, "last_edit_date": 1449071679, "question_id": 34046459, "link": "https://stackoverflow.com/questions/34046459/superclass-mismatch-in-ruby", "title": "Superclass mismatch in Ruby", "body": "<p>I have a class:</p>\n\n<pre><code>class Example\n  attr_reader :name\n  ...\nend\n</code></pre>\n\n<p>I later decided that I want to abstract out the <code>name</code> field into a parent class so it can be reused. When I load this code with <code>load 'filename.rb'</code>,</p>\n\n<pre><code>class Named\n  attr_reader :name\n  ...\nend\nclass Example &lt; Name\n  ...\nend\n</code></pre>\n\n<p>I get <code>TypeError: superclass mismatch for class Example</code> because I'm trying to reopen the <code>Example</code> class and change its superclass, which is disallowed.</p>\n\n<p>To get around this, I've been deleting the class manually by:</p>\n\n<pre><code>Object.send(:remove_const, :Example)\n</code></pre>\n\n<p>and then reloading, but this is cumbersome and annoying. Is there an easier way to force a reload without encountering this problem?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449070177, "post_id": 34046399, "comment_id": 55847725, "body": "check console for error..and please post your error here. With 500 it must be giving some more error logs.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5198598"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449070217, "post_id": 34046399, "comment_id": 55847758, "body": "I literally just updated that :)"}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449070402, "post_id": 34046399, "comment_id": 55847901, "body": "in this for remote you should create <code>create.js.erb</code> instead <code>create.html.erb</code>"}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449070446, "post_id": 34046399, "comment_id": 55847930, "body": "<a href=\"http://railscasts.com/episodes/136-jquery\" rel=\"nofollow noreferrer\">railscasts.com/episodes/136-jquery</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5198598"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449070668, "post_id": 34046399, "comment_id": 55848105, "body": "I have a create.js.erb but it wanted me to make a create.html.erb as well"}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1449070969, "post_id": 34046399, "comment_id": 55848308, "body": "is it sending ajax request?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5198598"}, "edited": false, "score": 0, "creation_date": 1449072346, "post_id": 34046929, "comment_id": 55849341, "body": "I have done all of this and none of it seemed to work"}, {"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "edited": false, "score": 0, "creation_date": 1449072400, "post_id": 34046929, "comment_id": 55849385, "body": "What is the 500 error you are getting, specifically.... Can you look at the output log of your rails server and see the exact error? i.e, not the error message in the Javascript console."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5198598"}, "edited": false, "score": 0, "creation_date": 1449072587, "post_id": 34046929, "comment_id": 55849506, "body": "&#39;Missing template comments/create, application/create with {:locale=&gt;     [:en], :formats=&gt;[:js, :html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw,      :ruby, :coffee, :jbuilder]}. Searched in:       * &quot;/home/adam/Desktop/ruby/rails/AJAXC/app/views&quot;      &lt;div id=&quot;console&quot;       data-remote-    path=&#39;console/repl_sessions/5e7696b1ed6d46709ba46d6d013d6240&zwnj;&#8203;&#39;       data-initial-prompt=&#39;&gt;&gt; &#39;&gt;&#39;     &lt;/div&gt;      This is the error I am getting"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5198598"}, "edited": false, "score": 0, "creation_date": 1449072861, "post_id": 34046929, "comment_id": 55849704, "body": "It is - this ones asking for the create.html.erb for some reason. It shouldn&#39;t need a template right? It&#39;s looking for the action - but on top off this if I refresh the page it still displays the comment it said it can&#39;t make."}, {"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "edited": false, "score": 0, "creation_date": 1449073052, "post_id": 34046929, "comment_id": 55849837, "body": "Your remote: true should mean the form submits with the js format, and the respond_to block should handle that accordingly. Provided you have //= require jquery_ujs in your application.js manifest"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5198598"}, "edited": false, "score": 0, "creation_date": 1449073381, "post_id": 34046929, "comment_id": 55850095, "body": "That&#39;s the only return I have received via the network on the console, but no actual console logs"}, {"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "edited": false, "score": 0, "creation_date": 1449073423, "post_id": 34046929, "comment_id": 55850116, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/96814/discussion-between-rlarcombe-and-stormviper\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "edited": false, "score": 0, "creation_date": 1449073795, "post_id": 34046929, "comment_id": 55850426, "body": "I edited my answer again... You need the following 3 files: app/views/comments/_comment.html.erb ---&gt; to show the comment app/views/comments/create.js.erb ---&gt; To handle success app/views/comments/error.js.erb ---&gt; To handle failure/validation errors"}], "tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": true, "score": 2, "last_activity_date": 1449075191, "last_edit_date": 1449075191, "creation_date": 1449071173, "answer_id": 34046929, "question_id": 34046399, "link": "https://stackoverflow.com/questions/34046399/ruby-on-rails-ajax-submit-form-error/34046929#34046929", "title": "Ruby on rails AJAX submit form error", "body": "<p>I notice you are posting to the url post_comments_path(@post). For nested routes, it might be cleaner to do the following:</p>\n\n<p>1) Post to the nested route directly:</p>\n\n<pre><code>&lt;%= form_for([@post, @comment], html: {class: \"form\", role: \"forms\"}, remote: true)  do |comm| %&gt;\n</code></pre>\n\n<p>2) Make sure your routes are nested properly, in routes.rb:</p>\n\n<pre><code>resources :posts do\n  resources :comments\nend\n</code></pre>\n\n<p>3) Refactor your CommentsController, to build through the @post instance:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\n  before_action :get_post\n\n  def index\n    @comments = @post.comments\n  end\n\n  def new\n    @comment = @post.comments.build      \n  end\n\n  def create\n    @comment = @post.comments.build(comment_params)\n\n    if @comment.save\n\n      flash[:success] = \"Successfully created comment\"\n\n      respond_to do |format|\n        format.html { redirect_to post_path(@post) }\n        format.js\n      end\n\n    else\n      respond_to do |format|\n        format.html { render :new }\n        format.js { render :error }\n      end      \n    end\n  end\n\n  private\n\n  def comment_params\n    params.require(:comment).permit(:body)\n  end\n\n  def get_post\n    @post = Post.find(params[:post_id])\n  end  \n\nend\n</code></pre>\n\n<p>4) Render the validation errors in <strong>app/views/comments/error.js.erb</strong>. I'll let you decide how best to do that, but here's a quick dump to the console:</p>\n\n<pre><code>&lt;% @comment.errors.full_messages.each do |message| %&gt;\n  console.log(\"&lt;%= message %&gt;\");\n&lt;% end %&gt;\n</code></pre>\n\n<p>This file is not to be confused with your <strong>app/views/comments/create.js.erb</strong> which is handling successful save of the comment. That should look something like this:</p>\n\n<pre><code>$('#comments').append(\"&lt;%= j render @comment %&gt;\"); \n$(\".form\")[0].reset();\n</code></pre>\n\n<p>5) Tweak your view a little bit. I notice you need to output the comments differently:</p>\n\n<pre><code>&lt;ol id=\"comments\"&gt;\n    &lt;%= render @post.comments %&gt;\n&lt;/ol&gt;\n</code></pre>\n\n<p>which should correspond to a partial in <strong>app/views/comments/_comment.html.erb</strong> so make sure this is there.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5198598"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 1, "accepted_answer_id": 34046929, "answer_count": 1, "score": 0, "last_activity_date": 1449075191, "creation_date": 1449069740, "last_edit_date": 1449070201, "question_id": 34046399, "link": "https://stackoverflow.com/questions/34046399/ruby-on-rails-ajax-submit-form-error", "title": "Ruby on rails AJAX submit form error", "body": "<p>So I'm trying to update my comments section with AJAX without the full page refresh for a college project. However I can't seem to get this working.\nIn the console it gives me s</p>\n\n<blockquote>\n  <p>Failed to load resource: the server responded with a status of 500 (Internal Server Error)</p>\n</blockquote>\n\n<p>My show.html.erb file:</p>\n\n<pre><code>&lt;h1&gt;Title: &lt;%= @post.title %&gt;&lt;/h1&gt;\n&lt;h2&gt;Body: &lt;%= @post.body %&gt;&lt;/h2&gt;\n&lt;hr /&gt;\n&lt;h1&gt;Your comments&lt;/h1&gt;\n&lt;%= link_to \"View comments\", \"#\", id: \"comments-link\" %&gt;\n&lt;ol id=\"comments\"&gt;\n    &lt;%= render 'comments' %&gt;\n&lt;hr /&gt;\n&lt;h1&gt;Create comment&lt;/h1&gt;\n\n    &lt;%= form_for(@comment, :html =&gt; {class: \"form\", role: \"forms\"}, :url =&gt; post_comments_path(@post), remote: true)  do |comm| %&gt;\n&lt;div class=\"container\"&gt;\n    &lt;div class=\"input-group input-group-md\"&gt;\n            &lt;%= comm.label :body %&gt;\n            &lt;%= comm.text_area :body, class: \"form-control\", placeholder: \"Enter a comment\" %&gt;\n    &lt;/div&gt;\n                &lt;%= comm.submit \"custom\", id: \"button\" %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n&lt;/ol&gt;\n</code></pre>\n\n<p>My comments.coffee:</p>\n\n<pre><code>$(document).on \"page:change\", -&gt;\n  $('#comments-link').click -&gt;\n    $('#comments').fadeToggle()\n    $('#comments_body').focus()\n</code></pre>\n\n<p>My create.js.erb:</p>\n\n<pre><code>$('#comments').append(\"&lt;%= j render @comment  %&gt;\");\n</code></pre>\n\n<p>and my Comments controller:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\ndef index\n\nend\n\ndef new\nend\n\ndef new\n    @comment = Comment.new\nend\n\ndef create\n    @comment = Comment.new(comment_params)\n    @comment.post_id = params[:post_id]\n    if @comment.save\n        flash[:success] = \"Successfully created comment\"\n        respond_to do |format|\n            format.html { redirect_to post_path(@comment.post_id) }\n            format.js\n        end\n    else\n        flash[:danger] = \"Failed to create comment\"\n        redirect_to root_path\n    end\nend\n\nprivate\n\ndef comment_params\n    params.require(:comment).permit(:body)\nend\nend\n</code></pre>\n\n<p>I may have missed some files so just let me know, it is basic as it's just a post and comment system - no styling needed for the project, so yeah. I have been trying this for the last 4 hours and other places just don't work. I've looked on here, Youtube - everywhere however no one else's code works for me so I have come here! Thank's for you're help.</p>\n\n<p>EDIT:</p>\n\n<p>I noticed it said to create a view in the error response, however I made that view and rendered the comment's body onto the create.html.erb however I just need to display the form now.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "edited": false, "score": 0, "creation_date": 1449069569, "post_id": 34046311, "comment_id": 55847226, "body": "Would you not just follow your #code with the methods to copy your script, all within the begin ... rescue block?"}, {"owner": {"reputation": 191, "user_id": 5627681, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f1482ee34c25f20f84de1b47b528c5e4?s=128&d=identicon&r=PG&f=1", "display_name": "jackfrost5234", "link": "https://stackoverflow.com/users/5627681/jackfrost5234"}, "reply_to_user": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "edited": false, "score": 0, "creation_date": 1449069745, "post_id": 34046311, "comment_id": 55847372, "body": "That you would.. Not sure why I didn&#39;t think of that. Thanks for the help."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449076105, "post_id": 34046311, "comment_id": 55852128, "body": "<code>StandardError</code> is the default, you can just write <code>rescue =&gt; e</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449076353, "post_id": 34046573, "comment_id": 55852287, "body": "<code>else</code> seems more appropriate. Otherwise, <code>rescue</code> could accidentally rescue an exception that was raised by <code>FileUtils.cp(&quot;Demo.rb&quot;, &quot;C:&#47;Ruby&#47;Success&quot;)</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1449070257, "creation_date": 1449070257, "answer_id": 34046573, "question_id": 34046311, "link": "https://stackoverflow.com/questions/34046311/ruby-exception-handling/34046573#34046573", "title": "Ruby exception handling", "body": "<p>You could use <code>else</code> to run code only if there wasn't an exception:</p>\n\n<pre><code>begin\n  # code that might fail\nrescue\n  # code to run if there was an exception\nelse\n  # code to run if there wasn't an exception\nensure\n  # code to run with or without exception\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 2, "last_activity_date": 1449070471, "creation_date": 1449070471, "answer_id": 34046666, "question_id": 34046311, "link": "https://stackoverflow.com/questions/34046311/ruby-exception-handling/34046666#34046666", "title": "Ruby exception handling", "body": "<p>You're thinking about exceptions incorrectly.</p>\n\n<p>The whole point of exceptions is that the main body of your code proceeds as though no exceptions were thrown. <em>All</em> of the code inside your <code>begin</code> block is <em>already</em> executing as though no exceptions were thrown. An exception can interrupt the normal flow of code, and prevent subsequent steps from executing.</p>\n\n<p>You should put your file copy stuff inside the <code>begin</code> block:</p>\n\n<pre><code>begin\n  #code...\n  # This will run if the above \"code...\" throws no exceptions\n  FileUtils.cp(\"Demo.rb\", \"C:/Ruby/Success\")\nrescue StandardError =&gt; e\n  puts(\"Exception #{e} occurred\")\n  puts(\"Copying script to error folder.\")\n  FileUtils.cp(\"Demo.rb\", \"C:/Ruby/Failure\")\nend\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5627681, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f1482ee34c25f20f84de1b47b528c5e4?s=128&d=identicon&r=PG&f=1", "display_name": "jackfrost5234", "link": "https://stackoverflow.com/users/5627681/jackfrost5234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 34046666, "answer_count": 2, "score": 1, "last_activity_date": 1449072017, "creation_date": 1449069471, "last_edit_date": 1449072017, "question_id": 34046311, "link": "https://stackoverflow.com/questions/34046311/ruby-exception-handling", "title": "Ruby exception handling", "body": "<p>I enclosed some code in a <code>begin</code> <code>rescue</code> <code>end</code> block:</p>\n\n<pre><code>begin\n  ...\nrescue StandardError =&gt; e\n  puts(\"Exception #{e} occurred\")\n  puts(\"Copying script to error folder.\")\n  FileUtils.cp(\"Demo.rb\", \"C:/Ruby/Failure\")\nend\n</code></pre>\n\n<p>I'm not sure how to execute a bit of code if no exceptions are thrown so I can copy my script to a success folder. Any help would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user762579"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1449074245, "post_id": 34046075, "comment_id": 55850726, "body": "updated with the correct given output ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user762579"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1449075372, "post_id": 34046075, "comment_id": 55851619, "body": "the updated expected structure is the one output from the correct answer ... simple , I don&#39;t see what&#39;s incorrect"}, {"owner": {"user_type": "does_not_exist", "display_name": "user762579"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1449075874, "post_id": 34046075, "comment_id": 55851963, "body": "ok I removed the intermediate result which doesn&#39;t add any useful information for further readers and just kept input and expected output + performances"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1449093627, "post_id": 34046075, "comment_id": 55861994, "body": "Writing code to minimize CPU time is like buying a car for its zero to sixty clocking. There may be other things to consider."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user762579"}, "edited": false, "score": 0, "creation_date": 1449073223, "post_id": 34046260, "comment_id": 55849963, "body": "both answers give the correct output, however I have to vote for the fastest   0.278286"}], "tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 0, "last_activity_date": 1449069365, "creation_date": 1449069365, "answer_id": 34046260, "question_id": 34046075, "link": "https://stackoverflow.com/questions/34046075/how-to-group-multiple-hashes-with-same-key-into-an-array-of-hashes/34046260#34046260", "title": "How to group multiple hashes with same key into an array of hashes", "body": "<pre><code>roles = [\n  {:id =&gt; 1, :name=&gt;\"alpha\", :gid=&gt;1}, \n  {:id =&gt; 2, :name=&gt;\"beta\", :gid=&gt;2}, \n  {:id =&gt; 3, :name=&gt;\"delta\", :gid=&gt;1}, \n  {:id =&gt; 4, :name=&gt;\"epsilon\", :gid=&gt;1},\n  {:id =&gt; 5, :name=&gt;\"zeta\", :gid=&gt;3}\n]\n\nroles.group_by do |el|\n  el[:gid]\nend.map do |gid, els|\n  { \n    gid: gid, \n    roles: els.map{ |el| { id: el[:id], name: el[:name] } } \n  }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user762579"}, "edited": false, "score": 0, "creation_date": 1449073295, "post_id": 34046337, "comment_id": 55850024, "body": "Thanks both answers give the correct output, however I have to vote for the fastest    1.165781"}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1449070608, "last_edit_date": 1449070608, "creation_date": 1449069549, "answer_id": 34046337, "question_id": 34046075, "link": "https://stackoverflow.com/questions/34046075/how-to-group-multiple-hashes-with-same-key-into-an-array-of-hashes/34046337#34046337", "title": "How to group multiple hashes with same key into an array of hashes", "body": "<p>A solution for Ruby 1.8.7 with ActiveSupport for methods <code>slice()</code> and <code>except()</code>.</p>\n\n<pre><code>require 'rubygems'\nrequire 'active_support/all'    \n\nroles.group_by { |e| e.slice(:gid) }.\n      map      { |k,v| k.merge(:roles =&gt; v.map { |e| e.except(:gid)}) }\n\n#=&gt; [{:gid=&gt;1, :roles=&gt;[{:name=&gt;\"alpha\", :id=&gt;1},\n#                       {:name=&gt;\"delta\", :id=&gt;3},\n#                       {:name=&gt;\"epsilon\", :id=&gt;4}]},\n#    {:gid=&gt;2, :roles=&gt;[{:name=&gt;\"beta\", :id=&gt;2}]},\n#    {:gid=&gt;3, :roles=&gt;[{:name=&gt;\"zeta\", :id=&gt;5}]}]\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user762579"}, "edited": false, "score": 0, "creation_date": 1449073713, "post_id": 34047538, "comment_id": 55850361, "body": "Your answer is the faster"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1449072850, "creation_date": 1449072850, "answer_id": 34047538, "question_id": 34046075, "link": "https://stackoverflow.com/questions/34046075/how-to-group-multiple-hashes-with-same-key-into-an-array-of-hashes/34047538#34047538", "title": "How to group multiple hashes with same key into an array of hashes", "body": "<p>An answer to your question is:</p>\n\n<pre><code>gid = nil\nh = [\n  {:id=&gt;1, :name=&gt;\"alpha\", :gid=&gt;1},\n  {:id=&gt;3, :name=&gt;\"delta\", :gid=&gt;1},\n  {:id=&gt;4, :name=&gt;\"epsilon\", :gid=&gt;1}\n]\n.each{|h| gid = h.delete(:gid)}\n{gid: gid, roles: h}\n</code></pre>\n\n<p>but the whole thing can be done like this:</p>\n\n<pre><code>roles.group_by{|h| h.delete(:gid)}.map{|k, v| {gid: k, roles: v}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1449097117, "creation_date": 1449097117, "answer_id": 34054716, "question_id": 34046075, "link": "https://stackoverflow.com/questions/34046075/how-to-group-multiple-hashes-with-same-key-into-an-array-of-hashes/34054716#34054716", "title": "How to group multiple hashes with same key into an array of hashes", "body": "<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-update\" rel=\"nofollow\">Hash#update</a> (aka <code>merge!</code>) that employs a block to determine the values of keys that are present in both hashes being merged. Here that block is:</p>\n\n<pre><code>{ |k,ov,nv| { :gid=&gt;ov[:gid], :roles=&gt;ov[:roles]+nv[:roles] } }\n</code></pre>\n\n<p>where <code>k</code> is the common key, <code>ov</code> is the value of the key in the being constructed and <code>nv</code> is the value of the hash being merged in. </p>\n\n<p>The calculation:</p>\n\n<pre><code>roles.each_with_object({}) do |g,h|\n  h.update(g[:gid]=&gt;{ :gid=&gt;g[:gid],\n                      :roles=&gt;[{:id=&gt;g[:id], :name=&gt;g[:name]}]\n                    }\n          ) { |k,ov,nv| { :gid=&gt;ov[:gid], :roles=&gt;ov[:roles]+nv[:roles] } }\nend.values\n  #=&gt; [{:gid=&gt;1, :roles=&gt;[{:id=&gt;1, :name=&gt;\"alpha\"},\n  #                       {:id=&gt;3, :name=&gt;\"delta\"},\n  #                       {:id=&gt;4, :name=&gt;\"epsilon\"}]},\n  #    {:gid=&gt;2, :roles=&gt;[{:id=&gt;2, :name=&gt;\"beta\"}]},\n  #    {:gid=&gt;3, :roles=&gt;[{:id=&gt;5, :name=&gt;\"zeta\"}]}] \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user762579"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1244, "favorite_count": 2, "accepted_answer_id": 34047538, "answer_count": 4, "score": 1, "last_activity_date": 1449097117, "creation_date": 1449068887, "last_edit_date": 1449075613, "question_id": 34046075, "link": "https://stackoverflow.com/questions/34046075/how-to-group-multiple-hashes-with-same-key-into-an-array-of-hashes", "title": "How to group multiple hashes with same key into an array of hashes", "body": "<p>Starting form an array of hashes:</p>\n\n<pre><code>roles =[\n {:id=&gt;1, :name=&gt;\"alpha\", :gid=&gt;1}, \n {:id=&gt;2, :name=&gt;\"beta\", :gid=&gt;2},   \n {:id=&gt;3, :name=&gt;\"delta\", :gid=&gt;1}, \n {:id=&gt;4, :name=&gt;\"epsilon\", :gid=&gt;1}, \n {:id=&gt;5, :name=&gt;\"zeta\", :gid=&gt;3}\n]\n</code></pre>\n\n<p>I am trying to get another structure:</p>\n\n<pre><code>groups = [\n {:gid=&gt;1, :roles=&gt;[\n    {:id=&gt;1, :name=&gt;\"alpha\"}, \n    {:id=&gt;3, :name=&gt;\"delta\"}, \n    {:id=&gt;4, :name=&gt;\"epsilon\"}]}, \n {:gid=&gt;2, :roles=&gt;[{:id=&gt;2, :name=&gt;\"beta\"}]}, \n {:gid=&gt;3, :roles=&gt;[{:id=&gt;5, :name=&gt;\"zeta\"}]}\n]\n</code></pre>\n\n<p>ANSWERS -- all answers output the same .. however I have to vote for the fastest one ..</p>\n\n<pre><code>time1 = Benchmark.measure do\n (1..10000).each do \n   roles.group_by { |e| e.slice(:gid) }.map{\n     |k,v| k.merge(:roles =&gt; v.map { |e| e.except(:gid)}) }\n end\nend\nputs time1\nuser       system      total        real\n1.150000   0.010000   1.160000 (  1.165781)\n\ntime2 = Benchmark.measure do\n  (1..10000).each do\n   roles.group_by{|el| el[:gid]}.map{|gid, els|\n   {gid: gid, roles: els.map{ |el| { id: el[:id], name: el[:name]}}}}\n   end\nend\nputs time2\nuser       system      total        real\n0.270000   0.000000   0.270000 (  0.278286)\n\ntime3 = Benchmark.measure do\n  (1..10000).each do\n roles.group_by{|h| h.delete(:gid)}.map{|k, v| {gid: k, roles: v}}\n  end\nend\nputs time3\nuser       system      total        real\n0.130000   0.000000   0.130000 (  0.134478)\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 775104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e589ac46b5cd4e24f02cf8c4f3313a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/775104/dennis"}, "edited": false, "score": 0, "creation_date": 1449067726, "post_id": 34045651, "comment_id": 55845770, "body": "so I guess I should be doing something different entirely. :-)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1449067751, "last_edit_date": 1449067751, "creation_date": 1449067679, "answer_id": 34045651, "question_id": 34045617, "link": "https://stackoverflow.com/questions/34045617/generate-a-custom-date-range/34045651#34045651", "title": "Generate a custom date range", "body": "<p>That is impossible in general. A range has to be continuous. Unless the date you want to reject is at either end of the original range, that is impossible.</p>\n\n<p>However, by converting the range to an array, you can do a similar thing:</p>\n\n<pre><code>(Date.today..Date.today+5.days).to_a.reject(&amp;:sunday?)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1449069942, "creation_date": 1449069942, "answer_id": 34046458, "question_id": 34045617, "link": "https://stackoverflow.com/questions/34045617/generate-a-custom-date-range/34046458#34046458", "title": "Generate a custom date range", "body": "<p>This cannot be done with a <code>Range</code> as @sawa already pointed out. </p>\n\n<p>I think you need to use an array filled with qualified days:</p>\n\n<pre><code>def working_days(number)\n  [].tap do |days|\n    date = Date.today\n    while days.size &lt; number\n      days &lt;&lt; date unless date.sunday? || date.saturday?\n      date = date.next\n    end\n  end\nend\n\nworking_days(5)\n#=&gt; [02 Dec 2015, 03 Dec 2015, 04 Dec 2015, 07 Dec 2015, 08 Dec 2015]\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 775104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e589ac46b5cd4e24f02cf8c4f3313a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/775104/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 34046458, "answer_count": 2, "score": 0, "last_activity_date": 1449069942, "creation_date": 1449067605, "question_id": 34045617, "link": "https://stackoverflow.com/questions/34045617/generate-a-custom-date-range", "title": "Generate a custom date range", "body": "<p>How I can generate a date range, reject some days for example sundays or some holidays and extend the range with a next available day? Obviously I can do something like <code>(Date.today..Date.today+5.days).reject{|day| day.sunday?}</code> but this would remove sunday and make my range smaller. How can I solve this? Should I implement a custom Range class? </p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax", "regex"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449071473, "post_id": 34045915, "comment_id": 55848650, "body": "tried that, still pops up the validate alert on page load."}, {"owner": {"reputation": 111, "user_id": 1768546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ag0Py.png?s=128&g=1", "display_name": "luca3003", "link": "https://stackoverflow.com/users/1768546/luca3003"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449133766, "post_id": 34045915, "comment_id": 55876953, "body": "that&#39;s because you write it directly into a &lt;script&gt; block.  Try to wrapper it into a function and run the function on the click"}], "tags": [], "owner": {"reputation": 111, "user_id": 1768546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ag0Py.png?s=128&g=1", "display_name": "luca3003", "link": "https://stackoverflow.com/users/1768546/luca3003"}, "is_accepted": false, "score": 0, "last_activity_date": 1449068473, "creation_date": 1449068473, "answer_id": 34045915, "question_id": 34045115, "link": "https://stackoverflow.com/questions/34045115/regex-before-form-submit-with-rails-and-ajax/34045915#34045915", "title": "Regex before form submit with Rails and AJAX", "body": "<p>as I don't know ruby, I'll try to answer about the client side.\nDid you try to validate the form on button click?\nFor instance, with such a similar code?</p>\n\n<pre><code>&lt;form class=\"form-inline form_ip\" name=\"ping-form\" method=\"post\"&gt;\n    &lt;input type=\"text\" id=\"ip\" class=\"form-control\"&gt;\n    &lt;input type=\"button\" class=\"btn btn-default\" onclick=\"$('.form_ip').validate(...)\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449068473, "creation_date": 1449066199, "question_id": 34045115, "link": "https://stackoverflow.com/questions/34045115/regex-before-form-submit-with-rails-and-ajax", "title": "Regex before form submit with Rails and AJAX", "body": "<p>How can I do form validation on an AJAX form that I have?  As it stands right now, I've made a customer jQuery validator to check for a valid IP address, but it seems that the validation is only happening on initial page load or when I refresh the page, which is totally wrong.</p>\n\n<p><strong>assets/javascripts/tools.js</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//Validation\r\njQuery.validator.addMethod('validIP', function(value) {\r\n    var split = value.split('.');\r\n    if (split.length != 4)\r\n        return false;\r\n\r\n    for (var i=0; i&lt;split.length; i++) {\r\n        var s = split[i];\r\n        if (s.length==0 || isNaN(s) || s&lt;0 || s&gt;255)\r\n            return false;\r\n    }\r\n    return true;\r\n}, alert('Invalid IP Address'));\r\n\r\n$(\".form_ip\").validate({\r\n\t\trules: {\r\n\t\t\tip: {\r\n          validIP: true\r\n          }\r\n\t\t}\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>views/tools/ping.js.erb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(\".output\").html(\"&lt;%= j (@results) %&gt;\");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>views/tools/forms/_ping.html.erb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= form_tag ping_tool_path(1), role: \"form\", class: \"form-inline form_ip\", name: \"ping-form\", method: \"post\", remote: true do %&gt;\r\n    &lt;%= text_field_tag :ip, params[:ip], class: \"form-control\" %&gt;\r\n    &lt;%= submit_tag \"Ping\", name: nil, class: \"btn btn-default\" %&gt;\r\n  &lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "google-chrome", "watir-webdriver", "client-certificates", "rautomation"], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 1745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff06eaf3aa877d8499f8bf18094a5925?s=128&d=identicon&r=PG", "display_name": "fing", "link": "https://stackoverflow.com/users/1745169/fing"}, "edited": false, "score": 0, "creation_date": 1449080934, "post_id": 34045962, "comment_id": 55855043, "body": "It doesn&#39;t seem to me that you understood my question. I am talking about client certificates which are used for application login. Your advice is about server certificates. Also, it&#39;s clear that Watir alone cannot deal with Chrome certificates, that&#39;s why I&#39;m using <b>rautomation</b> gem which does the job quite nicely."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 308, "user_id": 1745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff06eaf3aa877d8499f8bf18094a5925?s=128&d=identicon&r=PG", "display_name": "fing", "link": "https://stackoverflow.com/users/1745169/fing"}, "edited": false, "score": 0, "creation_date": 1449095848, "post_id": 34045962, "comment_id": 55863131, "body": "Currently Watir is blocking while a page is loading. When browsers begin to adopt the new WebDriver W3C standard, you will be able to set a page load strategy of none (<a href=\"https://w3c.github.io/webdriver/webdriver-spec.html#dfn-page-loading-strategy\" rel=\"nofollow noreferrer\">w3c.github.io/webdriver/&hellip;</a>). Until then you&#39;re stuck with rescuing the exception if you want to do something before the page finishes loading. Would creating a Firefox Profile with the certificates pre-imported work? <a href=\"http://stackoverflow.com/questions/10889085/automating-ssl-client-side-certificates-in-firefox-and-selenium-testing\" title=\"automating ssl client side certificates in firefox and selenium testing\">stackoverflow.com/questions/10889085/&hellip;</a>"}, {"owner": {"reputation": 308, "user_id": 1745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff06eaf3aa877d8499f8bf18094a5925?s=128&d=identicon&r=PG", "display_name": "fing", "link": "https://stackoverflow.com/users/1745169/fing"}, "edited": false, "score": 0, "creation_date": 1449126564, "post_id": 34045962, "comment_id": 55873231, "body": "Thanks @titusfortner, the new WebDriver certainly seems interesting. The <i>Firefox</i> solution might work, however that browser is not the focus of my automation efforts as nobody is using it to access the mentioned application (it&#39;s not easy for end users to make <i>Firefox</i> work with Smart card certificates). There are some <i>IE</i> users though and certificate selection behavior is different there so I can even get it to work, but my main focus remains <i>Google Chrome</i>."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1449068579, "creation_date": 1449068579, "answer_id": 34045962, "question_id": 34045044, "link": "https://stackoverflow.com/questions/34045044/handling-chrome-client-certificates-in-watir-tests/34045962#34045962", "title": "Handling Chrome client certificates in Watir tests", "body": "<p>Watir only works on browser rendered pages. Try ignoring the certificate completely. <a href=\"http://watirwebdriver.com/browser-certificates/\" rel=\"nofollow\">http://watirwebdriver.com/browser-certificates/</a></p>\n"}, {"comments": [{"owner": {"reputation": 308, "user_id": 1745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff06eaf3aa877d8499f8bf18094a5925?s=128&d=identicon&r=PG", "display_name": "fing", "link": "https://stackoverflow.com/users/1745169/fing"}, "edited": false, "score": 0, "creation_date": 1451985412, "post_id": 34299965, "comment_id": 56961026, "body": "Yes, you were right! However, it takes a bit for the certificate selection window to appear, so after <code>t = Thread.start { b.goto }</code> I had to put a short <i>sleep</i> time: <code>sleep(2)</code>. Thanks! I didn&#39;t use your window handle code though but my original with window title."}, {"owner": {"reputation": 1755, "user_id": 352648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff97ca87af59ee68ceff5877a8365788?s=128&d=identicon&r=PG", "display_name": "Jarmo Pertman", "link": "https://stackoverflow.com/users/352648/jarmo-pertman"}, "reply_to_user": {"reputation": 308, "user_id": 1745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff06eaf3aa877d8499f8bf18094a5925?s=128&d=identicon&r=PG", "display_name": "fing", "link": "https://stackoverflow.com/users/1745169/fing"}, "edited": false, "score": 0, "creation_date": 1452012904, "post_id": 34299965, "comment_id": 56979550, "body": "Using handle instead of a title is better since this means you will operate with a browser window, which Watir uses and not some other one you might have open. Also <code>sleep</code> is never a good solution because you do not know what&#39;s the magic time it has to wait (or it might wait too long, e.g. waste valuable time). I&#39;ve updated my answer with a possible better solution."}, {"owner": {"reputation": 308, "user_id": 1745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff06eaf3aa877d8499f8bf18094a5925?s=128&d=identicon&r=PG", "display_name": "fing", "link": "https://stackoverflow.com/users/1745169/fing"}, "edited": false, "score": 0, "creation_date": 1452153051, "post_id": 34299965, "comment_id": 57044947, "body": "Well, I completely agree with all your points, however, <code>b.window.handle</code> says: <code>NoMethodError: protected method &#39;handle&#39; called</code>, maybe this worked in <i>watir-classic</i>? I have also tried <code>b.window.inspect</code>, <code>b.driver.window_handle</code>, <code>b.window.hash</code> but RAutomation couldn&#39;t locate the window with this. As for the second part with <code>RAutomation::WaitHelper.wait_until</code>, I&#39;m afraid it doesn&#39;t work. I think the problem is that &quot;<i>Select a certificate</i>&quot; is not really a text on the parent window, but on some kind of submodal window. I couldn&#39;t reach it and check if it exits in any way I tried..."}], "tags": [], "owner": {"reputation": 1755, "user_id": 352648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff97ca87af59ee68ceff5877a8365788?s=128&d=identicon&r=PG", "display_name": "Jarmo Pertman", "link": "https://stackoverflow.com/users/352648/jarmo-pertman"}, "is_accepted": true, "score": 3, "last_activity_date": 1452012872, "last_edit_date": 1452012872, "creation_date": 1450215805, "answer_id": 34299965, "question_id": 34045044, "link": "https://stackoverflow.com/questions/34045044/handling-chrome-client-certificates-in-watir-tests/34299965#34299965", "title": "Handling Chrome client certificates in Watir tests", "body": "<p>Wouldn't <code>Thread</code> help you out in here? Not sure if it would, because it depends on Ruby's <code>GIL</code> (global interpreter lock) and underlying Webdriver's technicalities, but you could give it a try.</p>\n\n<p>Something along in these lines <em>could</em> work (not tested):</p>\n\n<pre><code>t = Thread.start { b.goto }\n\n# Not sure if getting handle works or not, but if it does\n# then it should be a better way to locate the browser window\nwindow = RAutomation::Window.new(:hwnd =&gt; b.window.handle)\n\n# Wait until client certificate window exists\nRAutomation::WaitHelper.wait_until { window.windows.any? { |w| w.text =~ /Select a certificate/ }}\n\n# Select client certificate     \nwindow.send_keys :return\n\n# Wait for the page load to finish\nt.join\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 1745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff06eaf3aa877d8499f8bf18094a5925?s=128&d=identicon&r=PG", "display_name": "fing", "link": "https://stackoverflow.com/users/1745169/fing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 34299965, "answer_count": 2, "score": 0, "last_activity_date": 1452012872, "creation_date": 1449065994, "last_edit_date": 1449067058, "question_id": 34045044, "link": "https://stackoverflow.com/questions/34045044/handling-chrome-client-certificates-in-watir-tests", "title": "Handling Chrome client certificates in Watir tests", "body": "<p>I have an application with client-certificate based authentication which I have been trying to automate. By selecting different certificates the user can get different application rights. The idea is to use <code>watir-webdriver</code> based script and <code>rautomation</code> gem and login into the application. In Chrome web browser it looks pretty much like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/G7lRq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G7lRq.png\" alt=\"client-certificate\"></a></p>\n\n<p>The basic idea is the following: </p>\n\n<pre><code>require 'watir-webdriver'\nrequire 'rautomation'\n\nb = Watir::Browser.new :chrome  \nb.goto 'https://example.com' \n\n# Get the Chrome window\nwindow = RAutomation::Window.new(:title =&gt; /Chrome/i)\n# Select client certificate     \nwindow.send_keys :return\n</code></pre>\n\n<p>However, when the script executes and reaches <code>b.goto 'https://example.com'</code> it is stuck because the page is not loaded until certificate is selected. After 60 seconds this results in client timeout and I get a <code>Net::ReadTimeout</code> exception. Thus, the code for certificate selection is never reached. </p>\n\n<p>I have solved this by catching the <code>Net::ReadTimeout</code> exception:</p>\n\n<pre><code>begin\n b.goto 'https://example.com' \nrescue      \n  window = RAutomation::Window.new(:title =&gt; /Chrome/i)   \n  window.send_keys :return\nend\n</code></pre>\n\n<p>This solution is far from optimal as the script has to wait 60 seconds to start the execution. The timeout can be lowered to reasonable wait times with the following piece of code:</p>\n\n<pre><code>client = Selenium::WebDriver::Remote::Http::Default.new\nclient.timeout = 5 # seconds \u2013 default is 60\nb = Watir::Browser.new :chrome, :http_client =&gt; client\n</code></pre>\n\n<p>But for the rest of the script <code>client.timeout</code> of 5 seconds would be far too low.  </p>\n\n<p>I thought the problem was with <code>goto</code> so I've tried other methods but it seems they all behave in the same way: </p>\n\n<pre><code>b.driver.navigate.to 'https://example.com' # =&gt; Net::ReadTimeout\nb.execute_script('window.location.href = \"https://example.com\"') # =&gt; Net::ReadTimeout\n</code></pre>\n\n<p>Can anyone provide me with an optimization advice or some other optimal way to handle the mentioned client certificates?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "edited": false, "score": 0, "creation_date": 1449066180, "post_id": 34044995, "comment_id": 55844618, "body": "Could you paste the output of <code>rake routes</code> for agencies."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "edited": false, "score": 0, "creation_date": 1449066575, "post_id": 34044995, "comment_id": 55844907, "body": "@Dusht added. Thanks."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1449067393, "post_id": 34044995, "comment_id": 55845504, "body": "Could you explain why you need to post to <code>index</code>? Problem seems to be that the named route is assigned automatically to the route routing to <code>agencies#index</code> and in your case the POST route comes first, so the url is build incorrectly to hit the index action, and it will hit the show action with id index. So I am wondering why you need to post to <code>index</code>, to see how we can avoid that :)"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1449067646, "post_id": 34044995, "comment_id": 55845695, "body": "@nathanvda the agencies#index page both lists all the agencies, and also provides a search form for the agencies.  That way the user can alter the search criteria to further condense their search if need be.  <code>GET agencies#index</code> is just a typical request that shows an empty form and lists all the agencies by default.  <code>POST agencies#index</code> is when the user submits a search.  The view shows the searched criteria and the resulting agencies matching that criteria."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 1, "creation_date": 1449068112, "post_id": 34044995, "comment_id": 55846103, "body": "Generally/semantically a search form is not considered a post, because you do not &quot;change&quot; data, you just hand down extra parameters (to filter/limit your result set). So just use GET for your search form."}], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1449066855, "post_id": 34045297, "comment_id": 55845093, "body": "I need the link to do the Get request to Agencies because I am not submitting the form here.  I am just doing a typical Get request to agencies#index.  However, adding that <code>post &#39;index&#39;</code> makes it not work for some reason and routes it to agencies#show.  So doing the Post request for this link is not what I need it to do.  I need it to do the Get request to agencies#index."}, {"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1449067058, "post_id": 34045297, "comment_id": 55845238, "body": "Then you need to write <code>:method=&gt; :get</code>"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1449067227, "post_id": 34045297, "comment_id": 55845374, "body": "Unfortunately it is still not working.  Specifying <code>method: :get</code> for the link is still making it route to agencies#show for some reason."}, {"owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1449067256, "post_id": 34045297, "comment_id": 55845392, "body": "@Neil - routes for common CRUD actions for a resource are already provided by Rails, so index action route is agencies_path by default. So the link_to will work when you delete the route for index you wrote."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1449067431, "post_id": 34045297, "comment_id": 55845525, "body": "@AlokSwain the one I wrote is different in that it is a POST request and not a GET request.  I thought that the server would be abel to tell the difference, but I guess not?  I guess you can&#39;t have a GET and a POST request with the same action name?"}], "tags": [], "owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "is_accepted": false, "score": 0, "last_activity_date": 1449066718, "creation_date": 1449066718, "answer_id": 34045297, "question_id": 34044995, "link": "https://stackoverflow.com/questions/34044995/rails-post-request-to-an-action-being-routed-to-unintended-action-and-throwing/34045297#34045297", "title": "Rails: Post request to an action being routed to unintended action and throwing error", "body": "<p>This should work: </p>\n\n<pre><code>&lt;%= link_to 'Agencies List', agencies_path, :method=&gt; :post %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1449068406, "creation_date": 1449068406, "answer_id": 34045892, "question_id": 34044995, "link": "https://stackoverflow.com/questions/34044995/rails-post-request-to-an-action-being-routed-to-unintended-action-and-throwing/34045892#34045892", "title": "Rails: Post request to an action being routed to unintended action and throwing error", "body": "<p>I got it working by making a change to the routes.rb file, but am still not sure why the above did not work as intended.  Anyways: this got it working as expected:</p>\n\n<pre><code>#config/routes.rb\nRails.application.routes.draw do\n  resources :agencies do\n    member do\n      get 'pdf'\n    end\n    collection do\n      # Took out post `index` below\n      # post 'index'\n    end\n  end\n  post 'agencies/name_search', to: 'agencies#index'\nend\n</code></pre>\n\n<p>And then I just had my search form point to <code>agencies_name_search_path</code>, and when I want to do a GET request to agencies#index I can do <code>agencies_path</code> as usual and everything works.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 34045892, "answer_count": 2, "score": 0, "last_activity_date": 1449068406, "creation_date": 1449065865, "last_edit_date": 1449066562, "question_id": 34044995, "link": "https://stackoverflow.com/questions/34044995/rails-post-request-to-an-action-being-routed-to-unintended-action-and-throwing", "title": "Rails: Post request to an action being routed to unintended action and throwing error", "body": "<p>Here are my routes:</p>\n\n<pre><code>#config/routes.rb\n  resources :agencies do\n    member do\n      get 'pdf'\n    end\n    collection do\n      post 'index'\n    end\nend\n</code></pre>\n\n<p>When the user clicks the following link, I expect it to take them to <code>agencies#index</code></p>\n\n<pre><code>    &lt;%= link_to('Agencies List', agencies_path) %&gt;\n</code></pre>\n\n<p>Instead of being processed in #index, it is being processed in #show.  When clicked, here is what is shown in the server log:</p>\n\n<blockquote>\n  <p>Started GET \"/agencies/index\" </p>\n  \n  <p>Processing by AgenciesController#show as HTML   </p>\n  \n  <p>Parameters: {\"id\"=>\"index\"}</p>\n</blockquote>\n\n<p>When I remove <code>post 'index'</code> from the agencies routes, it does what is expected:</p>\n\n<blockquote>\n  <p>Started GET \"/agencies\" </p>\n  \n  <p>Processing by AgenciesController#index as HTML</p>\n</blockquote>\n\n<p>So clearly the issue is that I have <code>post 'index'</code>, but I am stumped on why this is happening.  I need a Post request to agencies#index for a form submission, and I also need a Get request to agencies#index for typical usage. </p>\n\n<p>I am missing something fundamental about Rails Routing.  I did review <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">Rails Routing From the Outside In</a> but am still stumped.</p>\n\n<p><strong>Update</strong>  Here is the <code>rake routes</code> results:</p>\n\n<pre><code>agencies    POST   /agencies/index(.:format)        agencies#index\n            GET    /agencies(.:format)              agencies#index\n            POST   /agencies(.:format)              agencies#create\nnew_agency  GET    /agencies/new(.:format)          agencies#new\nedit_agency GET    /agencies/:id/edit(.:format)     agencies#edit\nagency      GET    /agencies/:id(.:format)          agencies#show\n            PATCH  /agencies/:id(.:format)          agencies#update\n            PUT    /agencies/:id(.:format)          agencies#update\n            DELETE /agencies/:id(.:format)          agencies#destroy\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2854, "user_id": 804928, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/cEwIy.jpg?s=128&g=1", "display_name": "Abdullah Rasheed", "link": "https://stackoverflow.com/users/804928/abdullah-rasheed"}, "edited": false, "score": 3, "creation_date": 1449066470, "post_id": 34044942, "comment_id": 55844824, "body": "Please let us know what error you are getting"}, {"owner": {"reputation": 9, "user_id": 4539628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55efea80811312baaccc2f8932bf93f4?s=128&d=identicon&r=PG", "display_name": "user4539628", "link": "https://stackoverflow.com/users/4539628/user4539628"}, "reply_to_user": {"reputation": 2854, "user_id": 804928, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/cEwIy.jpg?s=128&g=1", "display_name": "Abdullah Rasheed", "link": "https://stackoverflow.com/users/804928/abdullah-rasheed"}, "edited": false, "score": 0, "creation_date": 1449067231, "post_id": 34044942, "comment_id": 55845377, "body": "if i provide 2+2 i get 2.0 instead of 4"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1449068005, "post_id": 34044942, "comment_id": 55846005, "body": "Your code only defines a local variable, a module, a class, and a method. It does not do anything useful."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1449069467, "post_id": 34044942, "comment_id": 55847136, "body": "<a href=\"https://www.youtube.com/watch?v=5mdy8bFiyzY\" rel=\"nofollow noreferrer\">Stop trying to write, WRITE!</a>"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 3432167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TlA9i.jpg?s=128&g=1", "display_name": "gajewsky", "link": "https://stackoverflow.com/users/3432167/gajewsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1449073787, "creation_date": 1449073787, "answer_id": 34047898, "question_id": 34044942, "link": "https://stackoverflow.com/questions/34044942/i-am-trying-to-write-a-simple-calculator/34047898#34047898", "title": "I am trying to write a simple calculator", "body": "<p>Hey you were returning input instead of result. Here is quick fix for your calculate method. Its working but still need to be rebuild, for ex you can parse string to find operator first and then use it instead of trying to calculate for all operators.</p>\n\n<pre><code>def calculate(string)\n  operators = [:+, :-, :*, :/]\n  operators.map do |op|\n    splits = string.split(op.to_s)\n    splits.map(&amp;:to_f).inject(op) if splits.size &gt; 1\n  end.compact.first\nend\n</code></pre>\n\n<p>Happy coding!</p>\n"}, {"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1449077485, "post_id": 34048022, "comment_id": 55853028, "body": "Fantastic !  A very insightful solution.  Loved it"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1449099835, "post_id": 34048022, "comment_id": 55864692, "body": "What exactly do the <code>$1</code> and <code>$2</code> represent? I kind of get it, but I&#39;m not entirely sure."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1449129905, "post_id": 34048022, "comment_id": 55874823, "body": "@c650 They refer to the capturing groups in the regular expression, i.e. the part enclosed by <code>(</code> and <code>)</code>. For example: <code>&#47;(.*)\\+(.*)&#47;.match(&quot;foo+bar&quot;)</code> returns <code>#&lt;MatchData &quot;foo+bar&quot; 1:&quot;foo&quot; 2:&quot;bar&quot;&gt;</code> and assigns <code>&quot;foo&quot;</code> to <code>$1</code> and <code>&quot;bar&quot;</code> to <code>$2</code>. See <a href=\"http://ruby-doc.org/core-2.2.3/Regexp.html#class-Regexp-label-Capturing\" rel=\"nofollow noreferrer\">Capturing</a> and <a href=\"http://ruby-doc.org/core-2.2.3/Regexp.html#class-Regexp-label-Special+global+variables\" rel=\"nofollow noreferrer\">Special global variables</a> for details. Another good resource is <a href=\"http://www.regular-expressions.info\" rel=\"nofollow noreferrer\">regular-expressions.info</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449130502, "post_id": 34048022, "comment_id": 55875101, "body": "... there&#39;s also a pretty good online editor / analyzer here: <a href=\"https://regex101.com/r/gF2iS7/1\" rel=\"nofollow noreferrer\">regex101.com/r/gF2iS7/1</a>."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1449160281, "post_id": 34048022, "comment_id": 55895685, "body": "Thanks a lot, @Stefan. I rarely use regex, but, still: I don&#39;t know how I hadn&#39;t seen this before."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1449074678, "last_edit_date": 1449074678, "creation_date": 1449074116, "answer_id": 34048022, "question_id": 34044942, "link": "https://stackoverflow.com/questions/34044942/i-am-trying-to-write-a-simple-calculator/34048022#34048022", "title": "I am trying to write a simple calculator", "body": "<blockquote>\n  <p>What am I doing wrong in my code?</p>\n</blockquote>\n\n<p>You're splitting the string by operators, e.g.:</p>\n\n<pre><code>\"1+2+3\".split(\"+\")\n#=&gt; [\"1\", \"2\", \"3\"]\n</code></pre>\n\n<p>This looks like the wrong approach. Addition, subtraction, multiplication and division are <em>binary</em> operations, i.e. they combine <em>two</em> elements (operands), not <em>n</em> elements.</p>\n\n<p>In your code, 1 + 2 + 3 is treated like:</p>\n\n<pre><code>  +\n /|\\\n1 2 3\n</code></pre>\n\n<p>This makes it much harder to combine the (results of) different operations.</p>\n\n<p>It's easier to treat 1 + 2 + 3 like:</p>\n\n<pre><code>  +              +\n / \\            / \\ \n1   +    or    +   3\n   / \\        / \\\n  2   3      1   2\n</code></pre>\n\n<p>Obviously, this can be solved using recursion. Here's a very basic parser / calculator:</p>\n\n<pre><code>def parse(string)\n  case string\n  when /(.*)\\+(.*)/ then parse($1) + parse($2)\n  when /(.*)\\*(.*)/ then parse($1) * parse($2)\n  when /^(\\d+)$/    then $1.to_i\n  else\n    raise SyntaxError\n  end\nend\n</code></pre>\n\n<p>The rules are simple:</p>\n\n<ol>\n<li><code>/(.*)\\+(.*)/</code> matches <code>a+b</code> and returns <code>parse(a) + parse(b)</code></li>\n<li><code>/(.*)\\*(.*)/</code> matches <code>a*b</code> and returns <code>parse(a) * parse(b)</code></li>\n<li><code>/^(\\d+)$/</code> matches or more digits and returns the corresponding integer</li>\n<li>anything else results in a <code>SyntaxError</code></li>\n</ol>\n\n<p>Note that <code>a</code> and <code>b</code> can be anything, not just numbers.</p>\n\n<h3>Examples</h3>\n\n<p>Digits are turned into numbers (3rd \"rule\"):</p>\n\n<pre><code>parse(\"1\")\n#=&gt; \"1\".to_i\n#=&gt; 1\n\nparse(\"123\")\n#=&gt; \"123\".to_i\n#=&gt; 123\n</code></pre>\n\n<p><code>a+b</code> is evaluated as <code>parse(a) + parse(b)</code>:</p>\n\n<pre><code>parse(\"3+4\")\n#=&gt; parse(\"3\") + parse(\"4\")\n#=&gt;   \"3\".to_i + \"4\".to_i\n#=&gt;          3 + 4\n#=&gt;            7\n</code></pre>\n\n<p><code>a+b*c</code> is evaluated as:</p>\n\n<pre><code>parse(\"1+2*3\")\n#=&gt; parse(\"1\") + parse(\"2*3\")\n#=&gt;   \"1\".to_i + parse(\"2*3\")\n#=&gt;          1 + parse(\"2*3\")\n#=&gt;          1 + parse(\"2\") * parse(\"3\")\n#=&gt;          1 +   \"2\".to_i * parse(\"3\")\n#=&gt;          1 +          2 * parse(\"3\")\n#=&gt;          1 +          2 * \"3\".to_i\n#=&gt;          1 +          2 * 3\n#=&gt;          1 +            6\n#=&gt;\u00a0\u00a0          7\n</code></pre>\n\n<p>The order of operations depends on the matching order. <code>a+b</code> matches before <code>a*b</code>, therefore:</p>\n\n<pre><code>parse(\"2*3+1\")\n#=&gt;            parse(\"2*3\") + parse(\"1\")\n#=&gt;            parse(\"2*3\") + parse(\"1\")\n#=&gt;            parse(\"2*3\") + parse(\"1\")\n#=&gt; parse(\"2\") * parse(\"3\") + parse(\"1\")\n#=&gt;   \"2\".to_i * parse(\"3\") + parse(\"1\")\n#=&gt;          2 * parse(\"3\") + parse(\"1\")\n#=&gt;          2 * \"3\".to_i   + parse(\"1\")\n#=&gt;          2 * 3          + parse(\"1\")\n#=&gt;            6            + parse(\"1\")\n#=&gt;            6            + \"1\".to_i\n#=&gt;            6            + 1\n#=&gt;\u00a0\u00a0                       7\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4539628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55efea80811312baaccc2f8932bf93f4?s=128&d=identicon&r=PG", "display_name": "user4539628", "link": "https://stackoverflow.com/users/4539628/user4539628"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1449074678, "creation_date": 1449065670, "last_edit_date": 1449066832, "question_id": 34044942, "link": "https://stackoverflow.com/questions/34044942/i-am-trying-to-write-a-simple-calculator", "title": "I am trying to write a simple calculator", "body": "<p>I am trying to write a calculator that takes string as input, for example <code>\"2+4-7/2\"</code>, and calculates it. It is supposed to handle the order of operation.</p>\n\n<pre><code>string = '1+1'\nmodule Simple_calculator\n  class &lt;&lt; self\n    def calculate(string)\n      operators = [:+, :-, :*, :/]\n      res = string\n      operators.each do |op|\n        splits = string.split(op.to_s)\n        if splits.size &gt; 1\n          resMap = splits.map do |sp|\n            calculate(sp)\n          end\n          resMap.map(&amp;:to_f).inject(op)\n        end\n      end\n      res.to_f\n    end\n  end\nend\n</code></pre>\n\n<p>What am I doing wrong in my code?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 43885, "user_id": 25645, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b02cab91fb3c5604163c116c494de2a5?s=128&d=identicon&r=PG", "display_name": "Nathan H", "link": "https://stackoverflow.com/users/25645/nathan-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1449066401, "creation_date": 1449066401, "answer_id": 34045176, "question_id": 34044858, "link": "https://stackoverflow.com/questions/34044858/using-wicked-pdf-in-a-non-rails-project/34045176#34045176", "title": "Using `wicked_pdf` in a non-rails project", "body": "<p>I had to add <code>gem 'activesupport'</code> to my gemfile, then use <code>require 'wicked_pdf'</code> in my source code.</p>\n"}, {"tags": [], "owner": {"reputation": 3663, "user_id": 226622, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/01cda64f5be17aec3429166eb88182cd?s=128&d=identicon&r=PG", "display_name": "Oto Brglez", "link": "https://stackoverflow.com/users/226622/oto-brglez"}, "is_accepted": false, "score": 1, "last_activity_date": 1449066776, "creation_date": 1449066776, "answer_id": 34045318, "question_id": 34044858, "link": "https://stackoverflow.com/questions/34044858/using-wicked-pdf-in-a-non-rails-project/34045318#34045318", "title": "Using `wicked_pdf` in a non-rails project", "body": "<p><a href=\"https://github.com/mileszs/wicked_pdf\" rel=\"nofollow\">wicked_pdf</a> depends on <code>active_support/core_ext</code> - as you can see in <a href=\"https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf.rb#L14-L24\" rel=\"nofollow\">lib/wicked_pdf.rb</a>. However you can use it outside of controller \"context\" like this...</p>\n\n<pre><code>pdf = WickedPdf.new.pdf_from_string('&lt;h1&gt;My life is wicked.&lt;/h1&gt;')\n</code></pre>\n"}], "owner": {"reputation": 43885, "user_id": 25645, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b02cab91fb3c5604163c116c494de2a5?s=128&d=identicon&r=PG", "display_name": "Nathan H", "link": "https://stackoverflow.com/users/25645/nathan-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1449066776, "creation_date": 1449065445, "question_id": 34044858, "link": "https://stackoverflow.com/questions/34044858/using-wicked-pdf-in-a-non-rails-project", "title": "Using `wicked_pdf` in a non-rails project", "body": "<p>All the documentation for <code>wicked_pdf</code> assume you are using <code>rails</code>.</p>\n\n<p>But I want to use this feature in a non-rails environment (a Jekyll plugin, written in Ruby).</p>\n\n<p>Trying to use <code>pdf = WickedPdf.new.pdf_from_string(page.content)</code> returns <code>Error:  uninitialized constant WickedPdf</code>.</p>\n\n<p>How do I initialize <code>WickedPdf</code> without the <code>rails generate wicked_pdf</code> provided in their documentation?</p>\n"}, {"tags": ["javascript", "ruby", "gulp", "middleman"], "answers": [{"comments": [{"owner": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "edited": false, "score": 0, "creation_date": 1450198537, "post_id": 34194407, "comment_id": 56331502, "body": "One more question, is there a way to run gulp before build, as I have some files ignored in order to keep build folder clean."}, {"owner": {"reputation": 1320, "user_id": 561990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8d628a0f266563db40c23190b778c75a?s=128&d=identicon&r=PG", "display_name": "torbinsky", "link": "https://stackoverflow.com/users/561990/torbinsky"}, "reply_to_user": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "edited": false, "score": 0, "creation_date": 1450200169, "post_id": 34194407, "comment_id": 56332569, "body": "Yes, you should be able to hook into the <code>after_configuration</code> and <code>before</code> callbacks. <code>after_configuration</code> is called right after config.rb is executed, but before any building happens. <code>before</code> is called right before any page is rendered. <a href=\"https://middlemanapp.com/advanced/custom_extensions/\" rel=\"nofollow noreferrer\">the custom extension docs</a> show examples of implementing both of these. I think <code>after_configuration</code> is likely what you are looking for."}], "tags": [], "owner": {"reputation": 1320, "user_id": 561990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8d628a0f266563db40c23190b778c75a?s=128&d=identicon&r=PG", "display_name": "torbinsky", "link": "https://stackoverflow.com/users/561990/torbinsky"}, "is_accepted": true, "score": 3, "last_activity_date": 1450200738, "last_edit_date": 1450200738, "creation_date": 1449725598, "answer_id": 34194407, "question_id": 34043754, "link": "https://stackoverflow.com/questions/34043754/run-gulp-tasks-on-middleman-build-execution/34194407#34194407", "title": "Run gulp tasks on middleman build execution", "body": "<p>You can using a <a href=\"https://middlemanapp.com/advanced/custom_extensions/\" rel=\"nofollow\">custom extension</a>.</p>\n\n<p>For example, if you want to run your gulp tasks at the end of the build cycle, you could create an <code>after_build</code> extension like this:</p>\n\n<p>In <strong>config.rb</strong>:</p>\n\n<pre><code>class MyFeature &lt; Middleman::Extension\n  def initialize(app, options_hash={}, &amp;block)\n    super\n    app.after_build do |builder|\n      builder.run 'gulp default'\n    end\n  end\nend\n::Middleman::Extensions.register(:my_feature, MyFeature)\n\nactivate :my_feature\n</code></pre>\n\n<p>I tested the above with gulp installed (<code>npm install --global gulp</code>) and the following <strong>gulpfile.js</strong>:</p>\n\n<pre><code>var gulp = require('gulp');\n\ngulp.task('default', function() {\n  console.log('Hello, world');\n});\n</code></pre>\n\n<p>and after running <code>middleman build</code> I get output like the following:</p>\n\n<pre><code>[21:25:24] Using gulpfile ~/dev/projects/demo/gulpfile.js\n[21:25:24] Starting 'default'...\nHello, world\n[21:25:24] Finished 'default' after 98 \u03bcs\n</code></pre>\n\n<p>The <a href=\"https://middlemanapp.com/advanced/custom_extensions/\" rel=\"nofollow\">extension docs</a> have other examples of extensions that allow you to hook into other areas of Middleman for similar purposes.</p>\n\n<p><strong>Edit</strong>\nExample of <code>after_configuration</code> (untested):</p>\n\n<pre><code>class MyFeature &lt; Middleman::Extension\n  def initialize(app, options_hash={}, &amp;block)\n    super\n  end\n\n  def after_configuration\n    # add your pre-build, post config.rb execution code here...\n    `gulp default`\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 1, "accepted_answer_id": 34194407, "answer_count": 1, "score": 2, "last_activity_date": 1450200738, "creation_date": 1449062267, "question_id": 34043754, "link": "https://stackoverflow.com/questions/34043754/run-gulp-tasks-on-middleman-build-execution", "title": "Run gulp tasks on middleman build execution", "body": "<p>Is it possible to run gulpfile tasks during middleman build process? Tried searching for this, but wasn't able to find anything.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1449063750, "post_id": 34043641, "comment_id": 55842912, "body": "@Wand Maker: Have edited my question. So I would like to do the same with directories as I do with the creation of files like shown in the snipet."}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 0, "last_activity_date": 1449064245, "creation_date": 1449064245, "answer_id": 34044424, "question_id": 34043641, "link": "https://stackoverflow.com/questions/34043641/fileutils-mkdir-p-support-for-wildcards-in-ruby/34044424#34044424", "title": "FileUtils.mkdir_p support for wildcards in ruby?", "body": "<p>To create directory, you need to specify full path of new directory using the current folder name:</p>\n\n<pre><code>Dir['/DIRECTORY/PROJECT_*/*/'].each do |f| \n  FileUtils.mkdir_p \"#{f}/TheNewDirectory\" if File.directory?(f) \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 1, "last_activity_date": 1449064300, "creation_date": 1449064300, "answer_id": 34044442, "question_id": 34043641, "link": "https://stackoverflow.com/questions/34043641/fileutils-mkdir-p-support-for-wildcards-in-ruby/34044442#34044442", "title": "FileUtils.mkdir_p support for wildcards in ruby?", "body": "<p>FileUtils is a module. It doesn't make sense to claim that a module \"does not use wildcards\".</p>\n\n<p>Moreover, you are using only the function mkdir_p from FileUtils, and do not use any wildcard in its argument, so what you say, doesn't apply to your case either.</p>\n\n<p>What happened is, that your are iterating through all the directories entries created by your <em>Dir[...]</em> expression, but then don't use the actual directory! A first step to write this better would be</p>\n\n<pre><code>Dir['/DIRECTORY/PROJECT_*/*/'].each { |d| FileUtils.mkdir_p(\"#{d}/TheNewDirectory\") }\n</code></pre>\n\n<p>This works however only if it is guaranteed that d never takes the value of a plain file, and of course you can run this code only once (because the second time, you would obviously create directories of the form /DIRECTORY/PROJECT_FOO/BAR/TheNewDirectory/TheNewDirectory. I would therefore check, for the safe side, that it indeed makes sense to create the directory, before doing it.</p>\n"}], "owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 34044424, "answer_count": 2, "score": -1, "last_activity_date": 1449064300, "creation_date": 1449061951, "last_edit_date": 1449063672, "question_id": 34043641, "link": "https://stackoverflow.com/questions/34043641/fileutils-mkdir-p-support-for-wildcards-in-ruby", "title": "FileUtils.mkdir_p support for wildcards in ruby?", "body": "<p>I have for example directory structure like this:</p>\n\n<pre><code>./DIRECTORY/PROJECT_A/cars/\n./DIRECTORY/PROJECT_B/planes/\n./DIRECTORY/PROJECT_C/bikes/\n</code></pre>\n\n<p>I would like to recourse through them using wildcards and create other directory's, like this:</p>\n\n<pre><code>Dir['/DIRECTORY/PROJECT_*/*/'].each do FileUtils.mkdir_p 'TheNewDirectory'.\n</code></pre>\n\n<p>It seems \"FileUtils\" doesn't support wildcards.</p>\n\n<p>I'm doing the same for creation of files on this way:</p>\n\n<pre><code>  Dir['/DIRECTORY/PROJECT_*/*/'].each do |dir|\n    File.new File.join(dir, 'myFile.txt'), 'w+'\n  end\n</code></pre>\n\n<p>So I would like to do the same but for creation of directories. Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 2, "creation_date": 1449061614, "post_id": 34043544, "comment_id": 55841494, "body": "There is no  default JSON specification in Ruby on Rails."}, {"owner": {"reputation": 563, "user_id": 1146001, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100002925624517/picture?type=large", "display_name": "Nelson Patricio Jimenez", "link": "https://stackoverflow.com/users/1146001/nelson-patricio-jimenez"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449061712, "post_id": 34043544, "comment_id": 55841560, "body": "I a best practice if I build an API without a json specification ?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1449062220, "post_id": 34043544, "comment_id": 55841881, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Nonono. Programmers.SE is only about software engineering <i>concepts</i>. Questions about using a specific API are not well received there, and will be quickly downvoted, closed, and deleted. Please read their <a href=\"https://programmers.stackexchange.com/help/on-topic\">on-topic help center page</a>."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1449062302, "post_id": 34043544, "comment_id": 55841946, "body": "okey, my bad, but i thinking it&#39;s about API design. Is an API design about software engineering concepts?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1449062623, "post_id": 34043544, "comment_id": 55842161, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 You may have a point there. I read the question as the concrete programming problem \u201cWhat is the default behaviour of RoR for JSON responses?\u201d, not as the conceptual design question \u201cWhen designing an API, is it OK to rely on framework conventions and default behaviour?\u201d. Those two are very different questions."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1449062728, "post_id": 34043544, "comment_id": 55842235, "body": "that&#39;s make sense, thx for clarify  @amon"}], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 10466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09555e63d1932c71ccdb12886bab4ebe?s=128&d=identicon&r=PG", "display_name": "Mike Desjardins", "link": "https://stackoverflow.com/users/10466/mike-desjardins"}, "is_accepted": true, "score": 1, "last_activity_date": 1449063142, "creation_date": 1449063142, "answer_id": 34044040, "question_id": 34043544, "link": "https://stackoverflow.com/questions/34043544/what-is-the-default-json-specification-used-in-ror-response/34044040#34044040", "title": "What is The default JSON specification used in RoR response?", "body": "<p>One specific thing that may or may not be helpful...</p>\n\n<p>One thing that bothers me about the default rendering of JSON w/ Rails is that it leaves the key names unquoted when serializing a Hash, which is (technically) not valid JSON. The way to fix this is to add </p>\n\n<pre><code>ActiveSupport::JSON.unquote_hash_key_identifiers = false\n</code></pre>\n\n<p>to a configuration file like environment.rb.  Once you've done that, serializing </p>\n\n<pre><code>my_hash = { post: { id: 1, title: 'Stackoverflow rised 1 billion of alien money', description: 'blablabla' } }\n</code></pre>\n\n<p>to JSON would change to</p>\n\n<pre><code>post: {\n  \"id\": 1,\n  \"title\": 'Stackoverflow rised 1 billion of alien money',\n  \"description\": 'blablabla'\n}\n</code></pre>\n\n<p>vs. what you have above without the quotes.</p>\n"}], "owner": {"reputation": 563, "user_id": 1146001, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100002925624517/picture?type=large", "display_name": "Nelson Patricio Jimenez", "link": "https://stackoverflow.com/users/1146001/nelson-patricio-jimenez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 34044040, "answer_count": 1, "score": 2, "last_activity_date": 1449064464, "creation_date": 1449061580, "last_edit_date": 1449064464, "question_id": 34043544, "link": "https://stackoverflow.com/questions/34043544/what-is-the-default-json-specification-used-in-ror-response", "title": "What is The default JSON specification used in RoR response?", "body": "<p>I'm using RoR for a couple of time. But after read many json specification for example <a href=\"http://jsonapi.org/examples/\" rel=\"nofollow\">jsonapi.org</a> and <a href=\"http://json-schema.org/examples.html\" rel=\"nofollow\">json-schema.org</a> I have the next question: What is the default JSON specification used in RoR ?</p>\n\n<p>Because when you render a json in RoR you get this for example:</p>\n\n<pre><code>post: {\n id: 1,\n title: 'Stackoverflow rised 1 billion of alien money',\n description: 'blablabla'\n}\n</code></pre>\n\n<p>Is it a good practice if I used the default response in RoR when I'm creating an API ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 754, "user_id": 3506853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc12fa793f4d13924e0cfef39d4bd9cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3506853", "link": "https://stackoverflow.com/users/3506853/user3506853"}, "is_accepted": false, "score": 2, "last_activity_date": 1449061334, "creation_date": 1449061334, "answer_id": 34043452, "question_id": 34043403, "link": "https://stackoverflow.com/questions/34043403/view-not-showing-data-from-associated-table-in-ruby-on-rails/34043452#34043452", "title": "View not showing data from associated table in Ruby On Rails", "body": "<pre><code>&lt;%= email_address.email %&gt;\nor\n&lt;%= email_address.field_name %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 1665862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Zhaao.jpg?s=128&g=1", "display_name": "Saqib", "link": "https://stackoverflow.com/users/1665862/saqib"}, "is_accepted": true, "score": 1, "last_activity_date": 1449061475, "creation_date": 1449061475, "answer_id": 34043516, "question_id": 34043403, "link": "https://stackoverflow.com/questions/34043403/view-not-showing-data-from-associated-table-in-ruby-on-rails/34043516#34043516", "title": "View not showing data from associated table in Ruby On Rails", "body": "<p>In your view code you are rendering email object, instead render a field of email object, something like </p>\n\n<pre><code>&lt;table&gt;\n  &lt;% @candidates.each do |candidate| %&gt; \n    &lt;tr&gt; \n      &lt;td&gt; Name: &lt;%= candidate.name %&gt; &lt;/td&gt;\n      &lt;%  candidate.emails.each do |email_address| %&gt; \n        &lt;td&gt; &lt;%= email_address.email %&gt; &lt;/td&gt;\n      &lt;% end %&gt;    \n    &lt;/tr&gt;\n  &lt;% end %&gt; \n&lt;/table&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1449062005, "creation_date": 1449062005, "answer_id": 34043665, "question_id": 34043403, "link": "https://stackoverflow.com/questions/34043403/view-not-showing-data-from-associated-table-in-ruby-on-rails/34043665#34043665", "title": "View not showing data from associated table in Ruby On Rails", "body": "<p><code>#&lt;Email:0xbd41114&gt;</code> this shows object of active record. You need to specify your field name from <code>emails</code> table in which column <code>email-ids</code> are stored.</p>\n\n<p>for eg: you have stored all email-ids in <code>emails</code> table under <code>email_id</code> column then do it like:</p>\n\n<pre><code>&lt;%  candidate.emails.each do |email_address| %&gt; \n  &lt;td&gt; &lt;%= email_address.email_id %&gt; &lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>In short</strong> you need to specify field name like:</p>\n\n<pre><code>&lt;%= email_address.column_name %&gt;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5166396, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153028706974562/picture?type=large", "display_name": "Zubair Ahmed", "link": "https://stackoverflow.com/users/5166396/zubair-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "accepted_answer_id": 34043516, "answer_count": 3, "score": 0, "last_activity_date": 1449062005, "creation_date": 1449061167, "question_id": 34043403, "link": "https://stackoverflow.com/questions/34043403/view-not-showing-data-from-associated-table-in-ruby-on-rails", "title": "View not showing data from associated table in Ruby On Rails", "body": "<p>I'm very new to Rails and I've a problem with displaying data from associated table</p>\n\n<p>here is what i have</p>\n\n<pre><code>class Candidate &lt; ActiveRecord::Base\n  has_many :emails  \nend\n\nclass Email &lt; ActiveRecord::Base\n  belongs_to :candidate\nend\n\nclass CandidatesController &lt; ApplicationController \n  def index\n  @candidates = Candidate.includes(:emails).all \n  end\nend\n</code></pre>\n\n<p>in my view index.html.erb I have</p>\n\n<pre><code>&lt;table&gt;\n &lt;% @candidates.each do |candidate| %&gt; \n  &lt;tr&gt; \n    &lt;td&gt; Name: &lt;%= candidate.name %&gt; &lt;/td&gt;\n     &lt;%  candidate.emails.each do |email_address| %&gt; \n     &lt;td&gt; &lt;%= email_address %&gt; &lt;/td&gt;\n     &lt;% end %&gt;    \n  &lt;/tr&gt;\n &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Here is the output I'm getting in browser:</p>\n\n<pre><code>Name: Mohsin  #&lt;Email:0xbd41114&gt;\nName: Faysal  #&lt;Email:0xbd40f0c&gt;\nName: Adeel  #&lt;Email:0xbd40d68&gt;\n</code></pre>\n\n<p>Its only showing the data from candidates, not from the associated emails table, why? Can someone please help me??? I'm stuck here!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 657, "user_id": 1665862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Zhaao.jpg?s=128&g=1", "display_name": "Saqib", "link": "https://stackoverflow.com/users/1665862/saqib"}, "edited": false, "score": 2, "creation_date": 1449060327, "post_id": 34043040, "comment_id": 55840616, "body": "rails does this for you, take a look at this answer <a href=\"http://stackoverflow.com/questions/18855178/how-are-rails-instance-variables-passed-to-views\" title=\"how are rails instance variables passed to views\">stackoverflow.com/questions/18855178/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4932805"}, "edited": false, "score": 0, "creation_date": 1449060874, "post_id": 34043040, "comment_id": 55841005, "body": "The way I see it, It&#39;s the same class since you&#39;re calling the variable from the view template of <code>users</code>."}], "answers": [{"tags": [], "owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "is_accepted": false, "score": 1, "last_activity_date": 1449060870, "creation_date": 1449060870, "answer_id": 34043318, "question_id": 34043040, "link": "https://stackoverflow.com/questions/34043040/instance-variables-in-the-view/34043318#34043318", "title": "Instance Variables In The View", "body": "<p>So,</p>\n\n<p>Ruby on Rails is framework, where <strong>Convention over Configuration</strong> rule is really important. Behind the scenes, Rails matches proper controller actions with views files, which have the same name eg. <code>index</code> action will be matched with <code>index.html.erb</code>.</p>\n\n<p>This special connection enables Rails to use in views instance variables, which are set in particular index.\nAs you can see instance variable <code>@users</code> is available in view file, but any other is not.</p>\n"}, {"comments": [{"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1449179604, "post_id": 34043441, "comment_id": 55907250, "body": "Note you can also explicitly pass local variables to the view in Rails if you have concerns about using ivars. <code>render &#39;view&#39;, locals: {user: @user}</code>"}], "tags": [], "owner": {"reputation": 12784, "user_id": 1373987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bca7defe7b8087d8e261d32b29cf425e?s=128&d=identicon&r=PG", "display_name": "joshua.paling", "link": "https://stackoverflow.com/users/1373987/joshua-paling"}, "is_accepted": false, "score": 1, "last_activity_date": 1449174389, "last_edit_date": 1449174389, "creation_date": 1449061292, "answer_id": 34043441, "question_id": 34043040, "link": "https://stackoverflow.com/questions/34043040/instance-variables-in-the-view/34043441#34043441", "title": "Instance Variables In The View", "body": "<p>You're correct - you can't access an instance variable outside the class. The <code>@users</code> in your controller isn't actually the exact same instance variable as the <code>@users</code> in your view. For practical purposes it is, but what actually happens is that Rails, behind the scenes, will look at all the instance variables you have in your controller, and copy them across to your view. This is a convenience thing - rails just does this to save you having to worry about it.</p>\n\n<p>It's worth noting, not all frameworks take this approach. So in some frameworks, you have to explicitly say which variable you want to make available to the view. If rails did this, some code might look like:</p>\n\n<pre><code>def index\n\n  @users = User.all\n  first_user = User.first\n\n  set_for_view(first_user, :the_first_user)\nend\n</code></pre>\n\n<p>Only the <code>set_for_view</code> method would set variables available to be used in your view. So, <code>@users</code> would NOT be available in the view (doesn't matter that it's an instance variable), and likewise, <code>first_user</code> WOULD be available - doesn't matter that it is NOT an instance variable, as long as it's passed in to <code>set_for_view</code>. And in this example, <code>first_user</code> would be available in the view under the variable name <code>the_first_user</code> - since that's the name we passed in the second parameter to <code>set_for_view</code>.</p>\n\n<p>Rails, as a framework, opts for 'convention over configuration', and does a lot of magic under the hood to save you having to write extra code like this. Rails just says \"anything instance variable you set in your controller, we'll copy it over and make it available in your view - that way you don't have to worry about it\".</p>\n\n<p>Some people like this about rails, others criticise it. Takes all types!</p>\n"}], "owner": {"reputation": 115, "user_id": 5630303, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153104270176036/picture?type=large", "display_name": "morales257", "link": "https://stackoverflow.com/users/5630303/morales257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1433, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449174389, "creation_date": 1449060067, "last_edit_date": 1449061520, "question_id": 34043040, "link": "https://stackoverflow.com/questions/34043040/instance-variables-in-the-view", "title": "Instance Variables In The View", "body": "<p>I have recently started learning Ruby on Rails and came across something that confused me based on what I learned in Ruby. In The Rails Tutorial, the following code is used to retrieve all the users from the Model, and pass it on to the view:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  .\n  .\n  .\n  def index\n    @users = User.all\n  end\n  .\n  .\n  .\n</code></pre>\n\n<p>In the view:</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= user.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= user.email %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>It was my understanding that instance variables cannot be accessed outside their class without accessor methods, but here the View can access @users. Why is that so? And why do we have to use an instance variable to loop through the users?</p>\n"}, {"tags": ["javascript", "ruby", "selenium-webdriver", "automated-tests", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 3542013, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/509080100/picture?type=large", "display_name": "Ethranes", "link": "https://stackoverflow.com/users/3542013/ethranes"}, "edited": false, "score": 0, "creation_date": 1449593890, "post_id": 34076976, "comment_id": 56069963, "body": "Thanks to steel for the answer provided, however even when the element is placed directly into the wait statement I get the same error, was there anything else that I can try to resolve the issue?"}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "reply_to_user": {"reputation": 199, "user_id": 3542013, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/509080100/picture?type=large", "display_name": "Ethranes", "link": "https://stackoverflow.com/users/3542013/ethranes"}, "edited": false, "score": 0, "creation_date": 1449594512, "post_id": 34076976, "comment_id": 56070361, "body": "If you udpate that code, I can take another look. Mind marking line 63, the error line, in your code as well? I also updated my answer with some more ideas, including addressing your second variable storing a reference, and why that&#39;s a bad pattern."}, {"owner": {"reputation": 199, "user_id": 3542013, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/509080100/picture?type=large", "display_name": "Ethranes", "link": "https://stackoverflow.com/users/3542013/ethranes"}, "edited": false, "score": 0, "creation_date": 1449689490, "post_id": 34076976, "comment_id": 56121077, "body": "Thanks steel, I&#39;ve updated my code and my error in the main post"}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "reply_to_user": {"reputation": 199, "user_id": 3542013, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/509080100/picture?type=large", "display_name": "Ethranes", "link": "https://stackoverflow.com/users/3542013/ethranes"}, "edited": false, "score": 0, "creation_date": 1449692757, "post_id": 34076976, "comment_id": 56122959, "body": "Why are you using <code>as.each</code> ? Can you just use <code>.each</code> ?"}, {"owner": {"reputation": 199, "user_id": 3542013, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/509080100/picture?type=large", "display_name": "Ethranes", "link": "https://stackoverflow.com/users/3542013/ethranes"}, "edited": false, "score": 0, "creation_date": 1449753478, "post_id": 34076976, "comment_id": 56150332, "body": "I get a no method error using as.each or just .each"}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "reply_to_user": {"reputation": 199, "user_id": 3542013, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/509080100/picture?type=large", "display_name": "Ethranes", "link": "https://stackoverflow.com/users/3542013/ethranes"}, "edited": false, "score": 0, "creation_date": 1449760857, "post_id": 34076976, "comment_id": 56155463, "body": "@Ethranes I think I&#39;m out of suggestions, since I don&#39;t really know Watir that well. If I were in your shoes, I&#39;d start throwing in <code>binding.pry</code>, assuming you&#39;ve added and required the <code>pry</code> gem, to see what&#39;s going on."}], "tags": [], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "is_accepted": false, "score": 0, "last_activity_date": 1449594386, "last_edit_date": 1449594386, "creation_date": 1449179753, "answer_id": 34076976, "question_id": 34042980, "link": "https://stackoverflow.com/questions/34042980/watir-element-is-no-longer-attached-to-the-dom-error/34076976#34076976", "title": "Watir &quot;Element is no longer attached to the DOM&quot; error", "body": "<p>I don't know Watir that well, but I suspect the problem is that you're storing the reference in a variable. Maybe try this:</p>\n\n<pre><code>Watir::Wait.for_condition(10, 2, \"Waiting for room data to load\") {\n  @browser.iframe(:id, 'iconsole-plugin-session_iframe__').div(:id, 'lobby_rooms').present?\n}\n</code></pre>\n\n<p>And also</p>\n\n<pre><code>Watir::Wait.for_condition(10, 2, \"Waiting for button to be present\") {\n @browser.iframe(:id, 'iconsole-plugin-session_iframe__').button(:id, 'create_room_form_button').present?\n}\n@browser.iframe(:id, 'iconsole-plugin-session_iframe__').button(:id, 'create_room_form_button').click\n</code></pre>\n\n<p>The problem is that each time you call @browser.find_element... you're looking through the DOM afresh. When you store the variable, you aren't storing the procedure to find or not, you're storing the actual element, found or not. When you try to call a found element variable that is no longer there, you get this Selenium StaleObjectError.</p>\n\n<p>Going out on another limb here, but you might also <strong>try wrapping those calls</strong> in a Proc or Lambda, instead of a variable.</p>\n\n<pre><code>createpress = -&gt; { @browser.iframe(:id, 'iconsole-plugin-session_iframe__').button(:id, 'create_room_form_button') }\n</code></pre>\n\n<p>Then, when you want to trigger it, call it:</p>\n\n<pre><code>create_press.call.present?\n</code></pre>\n\n<p>That's pretty verbose and repetitive. If you ever head over to Capybara, you could try the Dill gem to wrap these elements up in widgets, which are like procs. <a href=\"https://github.com/mojotech/dill\" rel=\"nofollow\">https://github.com/mojotech/dill</a></p>\n"}, {"tags": [], "owner": {"reputation": 505, "user_id": 1904740, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4f706fc49994f5194f5961f371f6723e?s=128&d=identicon&r=PG", "display_name": "Abe Heward", "link": "https://stackoverflow.com/users/1904740/abe-heward"}, "is_accepted": false, "score": 0, "last_activity_date": 1452815441, "creation_date": 1452815441, "answer_id": 34801977, "question_id": 34042980, "link": "https://stackoverflow.com/questions/34042980/watir-element-is-no-longer-attached-to-the-dom-error/34801977#34801977", "title": "Watir &quot;Element is no longer attached to the DOM&quot; error", "body": "<p>Your code...</p>\n\n<p><code>@browser.iframe(:id, 'iconsole-plugin-session_iframe__').div(:id, 'lobby_rooms').div(:id, 'room_list').as</code></p>\n\n<p>....is, at the moment you declare it, a static Array containing a list of link elements.</p>\n\n<p>If, while you're iterating over that list of elements, the DOM updates, then those elements become stale. This is why you get that error.</p>\n\n<p>As for how to solve your underlying problem of iterating over a list of updating link elements...</p>\n\n<p>One thing you might do is get the size of the list, and then reference the links directly like this:</p>\n\n<pre><code>count = @browser.iframe(:id, 'iconsole-plugin-session_iframe__').div(:id, 'lobby_rooms').div(:id, 'room_list').as\n\ncount.times do |x|\n  rooms &lt;&lt; @browser.iframe(:id, 'iconsole-plugin-session_iframe__').div(:id, 'lobby_rooms').div(:id, 'room_list').a(index: x-1).attribute_value('data-room-id')\nend\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 3542013, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/509080100/picture?type=large", "display_name": "Ethranes", "link": "https://stackoverflow.com/users/3542013/ethranes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1452815441, "creation_date": 1449059915, "last_edit_date": 1449689105, "question_id": 34042980, "link": "https://stackoverflow.com/questions/34042980/watir-element-is-no-longer-attached-to-the-dom-error", "title": "Watir &quot;Element is no longer attached to the DOM&quot; error", "body": "<p>I'm having an issue with a test that I've created where I will randomly get this issue, from what I understand it's because there is java script running that is periodically refreshing the element. I'm unsure of how I can stop this error from happening, here is my code for the test;</p>\n\n<p>EDIT: As advised I've removed the elements from variables and are calling them directly, but the error remains, here is my updated code and error message (including line numbers)</p>\n\n<pre><code>47 When(/^I click the create room button$/) do\n\n  49 Watir::Wait.for_condition(10, 2, \"Waiting for room data to load\") {\n    50 @browser.iframe(:id, 'iconsole-plugin-session_iframe__').div(:id, 'lobby_rooms').div(:id, 'room_list').present?\n  51 }\n\n  53 rooms = []\n\n  55 @browser.iframe(:id, 'iconsole-plugin-session_iframe__').div(:id, 'lobby_rooms').div(:id, 'room_list').as.each do |room |\n    56 rooms &lt;&lt; room.attribute_value('data-room-id')\n  57 end\n\n  59 puts roomvalue = rooms.size.to_i\n\n  61 @current_rooms = rooms\n\n  63 roomvalue\n\n  65 Watir::Wait.for_condition(10, 2, \"Waiting for button to be present\") {\n    66 @browser.iframe(:id, 'iconsole-plugin-session_iframe__').button(:id, 'create_room_form_button').present?\n  67 }\n  68 @browser.iframe(:id, 'iconsole-plugin-session_iframe__').button(:id, 'create_room_form_button').click\n69 end\n</code></pre>\n\n<p>The error that I'm getting is;</p>\n\n<pre><code>Element is no longer attached to the DOM - {:element=&gt;#&lt;Selenium::WebDriver::Element:0x68d78665e583d27c id=\"{80a6296c-fc63-4d63-917c-9a2bf35bb429}\"&gt;} (Watir::Exception::UnknownObjectException)\n  ./features/step_definitions/multiplayer_fe_steps.rb:56:in `block (2 levels) in &lt;top (required)&gt;'\n  ./features/step_definitions/multiplayer_fe_steps.rb:55:in `/^I click the create room button$/'\n  features/multiplayer_fe.feature:21:in `When I click the create room button'\n</code></pre>\n\n<p>Thanks to steel for the answer provided, however even when the element is placed directly into the wait statement I get the same error, was there anything else that I can try to resolve the issue?</p>\n\n<p>Edit: I've tried using a lamda for my list however, when I did, I would get a different error saying 'undefined method 'as' on my .as.each do |room |</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 3, "creation_date": 1449058161, "post_id": 34042153, "comment_id": 55839273, "body": "First you need to identify the root cause. Are the database queries slow - what if you run that queries directly on the database without Rails? Are there too many request (N+1 queries)? Do you load too many objects into the memory?"}, {"owner": {"reputation": 1395, "user_id": 606167, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a4cae679f8986fad8e3883c60b1f27ad?s=128&d=identicon&r=PG", "display_name": "Martijn", "link": "https://stackoverflow.com/users/606167/martijn"}, "edited": false, "score": 3, "creation_date": 1449058534, "post_id": 34042153, "comment_id": 55839507, "body": "I&#39;m asking this since you mention it are course projects: Are you measuring in the production environment? Because the default development environment is not designed to scale, but to ease development."}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1449059143, "post_id": 34042153, "comment_id": 55839901, "body": "all before my comment should be followed also I can add one you can use bullet for n+1 <a href=\"http://railscasts.com/episodes/372-bullet?view=asciicast\" rel=\"nofollow noreferrer\">railscasts.com/episodes/372-bullet?view=asciicast</a> read this also for counter cache and for prod increase buffer size maxclient for pg concurrent ness"}], "answers": [{"tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": false, "score": 4, "last_activity_date": 1449061958, "last_edit_date": 1449061958, "creation_date": 1449058431, "answer_id": 34042481, "question_id": 34042153, "link": "https://stackoverflow.com/questions/34042153/how-to-scale-rails-applications/34042481#34042481", "title": "How to scale Rails applications", "body": "<p>I recommend setting up <a href=\"http://railscasts.com/episodes/368-miniprofiler\" rel=\"nofollow\">Mini Profiler</a> to try to identify your bottlenecks. In particular look for the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow\">N+1 problem</a> (consider using <a href=\"https://github.com/flyerhzm/bullet\" rel=\"nofollow\">Bullet</a> if this <em>is</em> an issue).</p>\n\n<p>Avoid looping over all your rows and instantiating a model for every one, thus sucking up memory:</p>\n\n<pre><code>User.all.each do # Bad\nUser.find_each do # Better\n</code></pre>\n\n<p>Use pagination (check out <a href=\"https://github.com/amatsuda/kaminari\" rel=\"nofollow\">Kaminari</a> or <a href=\"https://github.com/mislav/will_paginate\" rel=\"nofollow\">WillPaginate</a>) to avoid rendering pages with too many rows.</p>\n"}, {"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1482526963, "last_edit_date": 1482526963, "creation_date": 1449058685, "answer_id": 34042573, "question_id": 34042153, "link": "https://stackoverflow.com/questions/34042153/how-to-scale-rails-applications/34042573#34042573", "title": "How to scale Rails applications", "body": "<p>Before optimizing - gather statistics (for example use request-log-analyzer gem) and determine which requests take the most in average slowness.</p>\n\n<p>For example you may have a 8-seconds request, that is executed once a week, and a 0.5-second one, which runs every second, to make app faster first optimize the latter.</p>\n\n<p>For slow requests - just look into their logs and further narrow down bottlenecks - db/views/etc. </p>\n\n<p>Then go generic advice - \"no code runs faster than no code\", before going into raw SQL queries, writing C extensions etc. first look into complexity of your algorithms, poorly written O(n) will run faster than highly-optimized O(n^2), O(1) faster than O(n)</p>\n\n<p>More specific to web programming - every query to anything external (db/webservices/memcache/etc.) costs time, transferring lots of data counts too, avoid separate querying each element in collection, if you can fetch them all at once or in less number of requests (rails has eager loading for associations for this very reason)</p>\n\n<p>First i'd look into excessive db querying, remove unnecessary queries and look into execution plans (aka <code>explain ..</code>) for those that remain</p>\n\n<p>Third thing is garbage collection, but I don't think it's a bottleneck for you at the moment</p>\n"}], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "closed_date": 1449643550, "answer_count": 2, "score": 2, "last_activity_date": 1482526963, "creation_date": 1449057385, "last_edit_date": 1449059214, "question_id": 34042153, "link": "https://stackoverflow.com/questions/34042153/how-to-scale-rails-applications", "closed_reason": "Needs more focus", "title": "How to scale Rails applications", "body": "<p>I use apache and puma to deploy app. I use PostgreSQL. <a href=\"https://github.com/starwars25/Project\" rel=\"nofollow\">Code on github</a>. My apps are slow. when I generate several thousand rows in one table, productivity starts to get worse but still acceptable. I still can process 5 requests per second. When I added one million rows to one table, one query is executed in 8 seconds, and views seem to be generated forever. I added indexes and wrote raw SQL queries several times, but productivity is still very slow.</p>\n\n<p>Where can I start optimizing rails application? How can I reach at least 50 requests per second?</p>\n"}, {"tags": ["ruby", "selenium", "gem", "capybara", "osx-elcapitan"], "answers": [{"comments": [{"owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "edited": false, "score": 0, "creation_date": 1449588175, "post_id": 34049883, "comment_id": 56065877, "body": "I need to use cucumber beacuse CI scripts depend on it."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "edited": false, "score": 0, "creation_date": 1449592724, "post_id": 34049883, "comment_id": 56069198, "body": "huh?  bundle exec cucumber just sets up the environment so the specified version of gems in your Gemfile are being used, and then executes cucumber in that environment."}, {"owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "edited": false, "score": 0, "creation_date": 1449593881, "post_id": 34049883, "comment_id": 56069955, "body": "I know it runs the cucumber but I need to run <code>cucumber ... </code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "edited": false, "score": 0, "creation_date": 1449594067, "post_id": 34049883, "comment_id": 56070084, "body": "well unless the  cucumber executable you&#39;re running is setup as a binstub (which basically does bundle exec cucumber ... ) you&#39;re bypassing the environment set in your Gemfile and you&#39;re going to have all sorts of issues since you&#39;ll never be able to guarantee which version of an installed gem you&#39;re running"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1449079573, "creation_date": 1449079573, "answer_id": 34049883, "question_id": 34041946, "link": "https://stackoverflow.com/questions/34041946/unable-load-selenium-webdriver-on-mac-os-el-capitan/34049883#34049883", "title": "unable load selenium-webdriver on mac os el capitan", "body": "<p>Try running</p>\n\n<pre><code>bundle exec cucumber\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "is_accepted": true, "score": 0, "last_activity_date": 1449588085, "creation_date": 1449588085, "answer_id": 34159567, "question_id": 34041946, "link": "https://stackoverflow.com/questions/34041946/unable-load-selenium-webdriver-on-mac-os-el-capitan/34159567#34159567", "title": "unable load selenium-webdriver on mac os el capitan", "body": "<p>May someone need this solution. </p>\n\n<p>After many trials, eventually I found something solves the problem. First the version of <code>rbenv</code> and <code>ruby</code> were different so install the same version of ruby with rbenv as <code>ruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]</code>. After that install the <code>bundle</code> again and finally <code>bundle install</code> installed the webkit and other gems successfully.</p>\n\n<pre><code>~/P/m/web-automation (responsive \u26a1=) rbenv version\n2.0.0-p645 (set by /Users/mesutgunes/.rbenv/version)\n~/P/m/web-automation (responsive \u26a1=) ruby -v\nruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]\n~/P/m/web-automation (responsive \u26a1=) bundle install\nFailed to execute process '/usr/local/bin/bundle'. Reason:\nThe file '/usr/local/bin/bundle' specified the interpreter '/usr/local/opt/ruby/bin/ruby', which is not an executable command.\n~/P/m/web-automation (responsive \u26a1=)\n~/P/m/web-automation (responsive \u26a1=)\n~/P/m/web-automation (responsive \u26a1=) gem install bundler\nSuccessfully installed bundler-1.10.6\nParsing documentation for bundler-1.10.6\n1 gem installed\n~/P/m/web-automation (responsive \u26a1=) bundle install\n</code></pre>\n"}], "owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 34159567, "answer_count": 2, "score": 1, "last_activity_date": 1449588085, "creation_date": 1449056712, "question_id": 34041946, "link": "https://stackoverflow.com/questions/34041946/unable-load-selenium-webdriver-on-mac-os-el-capitan", "title": "unable load selenium-webdriver on mac os el capitan", "body": "<p>I upgraded to El Capitan then problem started. When I run <code>cucumber features</code> it gives following error:</p>\n\n<pre><code>Background: Member should open homepage # features/m001_top_header.feature:6\nCapybara's selenium driver is unable to load `selenium-webdriver`, please install the gem and add `gem 'selenium-webdriver'` to your Gemfile if you are using bundler. (LoadError)\n./features/support/env.rb:47:in `new'\n./features/support/env.rb:47:in `block in &lt;top (required)&gt;'\n./features/support/app_life_cycle_hooks.rb:22:in `Before'\nCapybara's selenium driver is unable to load `selenium-webdriver`, please install the gem and add `gem 'selenium-webdriver'` to your Gemfile if you are using bundler. (LoadError)\n./features/support/env.rb:47:in `new'\n./features/support/env.rb:47:in `block in &lt;top (required)&gt;'\n./features/support/app_life_cycle_hooks.rb:22:in `Before'\n</code></pre>\n\n<p>when I run <code>bundle install</code> then <code>selenium-webdriver</code> is installed:</p>\n\n<pre><code>~/P/m/web-automation (responsive \u26a1=) bundle install\n...\nUsing websocket 1.2.2\nUsing selenium-webdriver 2.48.1\nUsing spec 5.3.4\n...\nBundle complete! 13 Gemfile dependencies, 61 gems now installed.\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n~/P/m/web-automation (responsive \u26a1=) bundle show selenium-webdriver\n/usr/local/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.48.1\n</code></pre>\n\n<p>But when I check the <code>which selenium-webdriver</code>, it returns nothing:</p>\n\n<pre><code>~/P/m/web-automation (responsive \u26a1=) which selenium-webdriver\n~/P/m/web-automation (responsive \u26a1=) which rspec\n/usr/local/bin/rspec\n~/P/m/web-automation (responsive \u26a1=) which ruby\n/usr/local/bin/ruby\n~/P/m/web-automation (responsive \u26a1=) which selenium-webdriver\n~/P/m/web-automation (responsive \u26a1=) \n</code></pre>\n\n<p>My ruby version is:</p>\n\n<pre><code>~/P/m/web-automation (responsive \u26a1=) ruby -v\nruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-darwin15]\n</code></pre>\n\n<p>I guess the problem is related to path and configuration because I can require <code>selenium-webdriver</code> irb,  but I couldnt solve it. Any gurus please help me on the problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "answers": [{"comments": [{"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "edited": false, "score": 0, "creation_date": 1449062172, "post_id": 34042289, "comment_id": 55841848, "body": "If you do profile_params you will get the sanized list just of the profile subset. Consider calling it like: ReportLogger.usageLog(params) instead."}, {"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1449062351, "post_id": 34042289, "comment_id": 55841970, "body": "I&#39;ll have a go at this now. Thanks rlarcombe for the quick response and help."}, {"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "reply_to_user": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1449062444, "post_id": 34042289, "comment_id": 55842037, "body": "I tweaked my answer a little bit."}, {"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1449062704, "post_id": 34042289, "comment_id": 55842222, "body": "That works now rlarcombe. It pulls in the params for everything and I can pull the name from this. Perfect.   One other thing if i may as I notice if i try just call two particular params from the controller and want only them printed to the log but the amount could change so in the log i kind of need to have them undefined, like i had originally with the *params in the Gem and then loop through how many are input for logging. is this possible? I keep getting argument error (1 0) when trying this. Thanks again for the help. I understand that much more clearly now."}, {"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1449076543, "post_id": 34042289, "comment_id": 55852414, "body": "Hi rlarcombe. That was spot on. Got it all working and understand the process a lot better now. Thanks again. Big respect."}], "tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": true, "score": 0, "last_activity_date": 1449064303, "last_edit_date": 1449064303, "creation_date": 1449057814, "answer_id": 34042289, "question_id": 34041941, "link": "https://stackoverflow.com/questions/34041941/how-can-i-pull-in-the-rails-action-or-controller-names-into-my-ruby-gem-for-use/34042289#34042289", "title": "How can I pull in the Rails action or controller names into my Ruby Gem for use in a log file?", "body": "<p>The params always contain the Controller name and the Action name:</p>\n\n<pre><code>def index\n  puts params\nend\n&gt; {\"controller\"=&gt;\"home\", \"action\"=&gt;\"index\"}\n</code></pre>\n\n<p>So if you make your usageLog method accept the whole params hash, you can just access these, like:</p>\n\n<pre><code>def self.usageLog(params)\n\n  controller_name = params[\"controller\"]\n  action_name = params[\"action\"]\n  other_params = params.reject{|k,v| %w(action controller).include? k }\n\nend\n</code></pre>\n\n<p>Then where ever you want to log from a controller, just do:</p>\n\n<pre><code>ReportLogger.usageLog(params)\n</code></pre>\n\n<p>Or if you want to pass in multiple arguments, you might call it this way:</p>\n\n<pre><code>ReportLogger.usageLog(params[:controller], params[:action], model_params, \"anything else\")\n</code></pre>\n\n<p>where model_params is your sanitized white list method for the model you are dealing with.</p>\n\n<p>Then you would define your method like:</p>\n\n<pre><code>def self.usageLog(controller_name, action_name, *items)\n  ....\n  items.each do |item|\n    @filename.print(item.to_s + \"\\n\")\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 34042289, "answer_count": 1, "score": 0, "last_activity_date": 1449171011, "creation_date": 1449056702, "last_edit_date": 1449171011, "question_id": 34041941, "link": "https://stackoverflow.com/questions/34041941/how-can-i-pull-in-the-rails-action-or-controller-names-into-my-ruby-gem-for-use", "title": "How can I pull in the Rails action or controller names into my Ruby Gem for use in a log file?", "body": "<p>First question on here so go easy please. I am writing a gem for use in my rails application. The gem will simply print to a log file the information passed via the params from an action in the controller. I have this working up until the point where I would like for the report file to also print the name of the action from where the information is coming from. So example output would be: </p>\n\n<p>Logged Details: date and time\nReport from action: (Controller + actions name like) Profile.update and then the params information. I have it working to pull in the params information with the code below. </p>\n\n<p>I have commented out the part where I thought would bring in the data for me. getting an error on it. Any advise would be much appreciated. Thanks. </p>\n\n<pre><code># initializes file and writes-only at end of file if exists or creates new one\ndef self.open(filename)\n    @filename = File.open(filename,'a+')\nend\n\n\n# method to take in any amount of parameters and write to file\ndef self.usageLog (*items)\n    ReportLogger.open(\"UsageLogging.txt\")\n    # string actionName = controllerContext.RouteData.values[\"action\"].ToString()\n    @filename.print(\"Logged Details: \" + Time.now.strftime(\"%d/%m/%Y %H:%M:%S\") + \"\\n\")\n    # @filename.print(\"Report Action: :\" + actionName)\n        items.each do |item|\n            @filename.print(item)\n        end\n\n        @filename.puts( \" -EndLog\" + \"\\n\" + \" - - - - - - - - - - - - - - \")\n    end \n</code></pre>\n\n<p>Amended - I've played about with this but couldn't seem to get it working. I've changed the controller to call ReportLogger.usageLog(profile_params) so this should pull in all the params? I've amended the Gem code like below but it doesn't seem to want to pull in the controller details to the log. </p>\n\n<pre><code># method to take in any amount of parameters and write to file\ndef self.usageLog(params)\n    ReportLogger.open(\"UsageLogging.txt\")\n    # string actionName = controllerContext.RouteData.values[\"action\"].ToString()\n    #controller_name = params[\"controller\"]\n    #action_name = params[\"action\"]\n    #other_params = params.reject do |k,v| \n    #   %w(action controller).include? k\n    #end\n\n    @filename.print(\"Logged Details: \" + Time.now.strftime(\"%d/%m/%Y %H:%M:%S\") + \"\\n\")\n    #@filename.puts(controller_name)\n\n    #@filename.print(\"Report Action: :\" + controller_name)\n\n    controller_name = params[:controller]\n    @filename.puts(controller_name)\n\n    params.each do |param|\n        @filename.print(param.to_s + \"\\n\")\n    end\n\n        @filename.puts( \" -EndLog\" + \"\\n\" + \" - - - - - - - - - - - - - - \")\n    end\n</code></pre>\n\n<p>Report log looks like:</p>\n\n<p>Logged Details: 02/12/2015 13:11:11</p>\n\n<p>[\"name\", \"Bradley\"]\n[\"phone_number\", \"087 6312683\"]\n[\"image\", #, @original_filename=\"IMG_0001.jpg\", @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data; name=\\\"profile[image]\\\"; filename=\\\"IMG_0001.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\">]\n[\"bio\", \"New feck, shit!\"]\n -EndLog</p>\n\n<hr>\n"}, {"tags": ["ruby", "rubygems", "gemspecs"], "comments": [{"owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "edited": false, "score": 0, "creation_date": 1449062818, "post_id": 34041684, "comment_id": 55842292, "body": "Did you think of providing two different versions of your gem for that scenarios?"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "reply_to_user": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "edited": false, "score": 0, "creation_date": 1449064460, "post_id": 34041684, "comment_id": 55843426, "body": "@iltempo, I can even use the one version for both scenarios. Just add note that we have to add <code>gem &quot;foreigner&quot;</code> to <code>Gemfile</code> if Rails version is less than <code>4.2</code> and we want to use foreign keys."}], "answers": [{"comments": [{"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1449060683, "post_id": 34042681, "comment_id": 55840868, "body": "Unfortunately it seems we have no access to <code>Rails</code> inside the gemspec.  I&#39;ve just got the following error:  <code>uninitialized constant Rails from   &#47;Users&#47;kont&#47;projects&#47;theblog&#47;theblog.gemspec:21:in &#39;block in &lt;main&gt;&#39;</code>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1449061827, "post_id": 34042681, "comment_id": 55841635, "body": "Updated the answer to use <code>rubygems</code> API.  Please check whether this will work for you"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1449065204, "post_id": 34042681, "comment_id": 55843943, "body": "I tried this in both engine itself and in the app using this engine. It seems to work properly. Thanks!"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1453802086, "post_id": 34042681, "comment_id": 57749259, "body": "Recently The CI failed with the following error: <code>There was a NoMethodError while loading theblog.gemspec: undefined method </code>version&#39; for nil:NilClass from   /Users/kont/projects/drevo/theblog/theblog.gemspec:26:in <code>block in &lt;main&gt;&#39;</code>  I found that <code>Gem::Specification</code> does not contain <code>Rails</code> yet"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 2, "last_activity_date": 1449061814, "last_edit_date": 1495542805, "creation_date": 1449059045, "answer_id": 34042681, "question_id": 34041684, "link": "https://stackoverflow.com/questions/34041684/conditional-ruby-gem-dependencies-within-a-gemspec/34042681#34042681", "title": "Conditional ruby gem dependencies within a gemspec", "body": "<p>To access rails version, we can use something like below (based on <a href=\"https://stackoverflow.com/a/5177807/794242\">this answer</a>):</p>\n\n<pre><code>require 'rubygems'\n\nrails_gem = Gem::Specification.select {|z| z.name == \"rails\"}.max_by {|a| a.version}\np rails_gem.version.version\n#=&gt; \"4.2.5\"\n</code></pre>\n"}], "owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 3, "accepted_answer_id": 34042681, "answer_count": 1, "score": 7, "last_activity_date": 1449061814, "creation_date": 1449055875, "question_id": 34041684, "link": "https://stackoverflow.com/questions/34041684/conditional-ruby-gem-dependencies-within-a-gemspec", "title": "Conditional ruby gem dependencies within a gemspec", "body": "<p>I'm building a rails engine which uses foreign keys in migrations.</p>\n\n<pre><code>    add_foreign_key \"theblog_content_nodes\",\n                    \"theblog_content_statuses\", column: :content_status_id\n</code></pre>\n\n<p>From the version <code>4.2</code> rails supports foreign keys by itself but before we used <code>foreigner</code> gem for this. If we try to use <code>foreigner</code> with <code>rails 4.2</code> and newer we get an error.</p>\n\n<p>So since I'm going to support rails starting from 4.0.1 I have to use conditional dependency in my gemspec.</p>\n\n<p>I found possible solution <a href=\"https://www.tiredpixel.com/2014/01/05/curses-conditional-ruby-gem-installation-within-a-gemspec/\" rel=\"noreferrer\">here</a> but I have no idea how to check rails version in the gemspec.</p>\n\n<pre><code># sidekiq-spy.gemspec\n\nif RUBY_VERSION &gt;= '2.1'\n  spec.add_development_dependency \"curses\", \"~&gt; 1.0\"\nend\n</code></pre>\n\n<p><strong>NOTE:</strong></p>\n\n<p>I have another temporary solution: I just check <code>Foreigner</code> availability in my migrations. If it is unavailable I just don't create foreign keys:</p>\n\n<pre><code>if defined?(Foreigner)\n  add_foreign_key \"theblog_content_nodes\",\n                  \"theblog_content_statuses\", column: :content_status_id\nend\n</code></pre>\n\n<p>But I'd like to add <code>foreigner</code> dependency for old rails versions.</p>\n"}, {"tags": ["ios", "ruby", "cucumber", "calabash", "calabash-ios"], "comments": [{"owner": {"reputation": 1145, "user_id": 1165581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79a078e06a93f25eaba903217bd388f?s=128&d=identicon&r=PG", "display_name": "Lasse", "link": "https://stackoverflow.com/users/1165581/lasse"}, "edited": false, "score": 1, "creation_date": 1449122272, "post_id": 34041400, "comment_id": 55871440, "body": "I am also stuck with this FIFO error right now. I tried looking at the resources on Xamarins page about it, but I have not found anything that I could apply to fix it."}], "answers": [{"tags": [], "owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "is_accepted": false, "score": 1, "last_activity_date": 1449135397, "creation_date": 1449135397, "answer_id": 34062391, "question_id": 34041400, "link": "https://stackoverflow.com/questions/34041400/running-cucumber-on-device-app-immediately-crashes-error-error-while-writing/34062391#34062391", "title": "Running Cucumber on device, app immediately crashes, error: &quot;Error while writing to fifo. RunLoop::Fifo::NoReaderConfiguredError&quot;", "body": "<p>+100 for a good report.</p>\n\n<blockquote>\n  <p>APP_BUNDLE_PATH=\"/Users/roishmueli/Mekomi/Mekomi/Mekomi/iOS/bin/iPhone/Testing/2.821/Mekomi/Payload/MekomiiOS.app\"</p>\n</blockquote>\n\n<p>When testing against physical devices, you don't need to set the <code>APP</code> or <code>APP_BUNDLE_PATH</code>; it will be ignored.  Further, I want to make sure that you understand that this .app is only for physical devices; you could not use this .app on a simulator.</p>\n\n<p>Is the .ipa installed on the target device?  My guess it is not and that is the cause of this error.  Calabash iOS cannot install ipas on devices.  </p>\n\n<p>Here is a link to everything you need to know about testing on physical devices.</p>\n\n<ul>\n<li><a href=\"https://github.com/calabash/calabash-ios/wiki/Testing-on-Physical-Devices\" rel=\"nofollow\">Testing on Physical Devices</a></li>\n</ul>\n\n<p>To see more about Environment Variables, see the <a href=\"http://calabashapi.xamarin.com/ios/file.ENVIRONMENT_VARIABLES.html\" rel=\"nofollow\">API Documentation</a>.</p>\n\n<p>If you have an .app and you need to generate a .ipa, we recommend using <code>xcrun ditto</code> - <a href=\"https://github.com/calabash/calabash-ios-server/blob/develop/bin/make/ipa-cal.sh#L130\" rel=\"nofollow\">here is an example</a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 5594644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4543a72098da8ff55469c9b5716f79e?s=128&d=identicon&r=PG&f=1", "display_name": "Roi Shmueli", "link": "https://stackoverflow.com/users/5594644/roi-shmueli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1449147454, "creation_date": 1449055046, "last_edit_date": 1449133251, "question_id": 34041400, "link": "https://stackoverflow.com/questions/34041400/running-cucumber-on-device-app-immediately-crashes-error-error-while-writing", "title": "Running Cucumber on device, app immediately crashes, error: &quot;Error while writing to fifo. RunLoop::Fifo::NoReaderConfiguredError&quot;", "body": "<p>So I started building my local iOS device environment. \nI have got my Simulator environment fully set up and running.\nI have got my distribution and provisioning profile set up correctly to the app through the iOS developer.\nWhile trying to run the app, I follow these steps:\nConnecting my iPhone 4s (iOS 8.4.1) with USB cable to my Mac.\nSearching for my device in the Terminal with the following command:</p>\n\n<pre><code>xcrun instruments -s devices\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Known Devices:\nOved's iMac [2E984C21-8F30-5B90-9844-C49F071F8433]\nQA1 (8.4.1) [7640b16200d8c553efda3de85291253e95d229ce]\nApple TV 1080p (9.0) [336265EC-E047-4489-9896-03CB47382325]\niPad 2 (8.4) [12A95700-E253-4CF8-ADA7-D9BD4FBE51A9]\niPad 2 (9.0) [72D123E8-8140-41C6-B80C-31F8DA57DCB7]\niPad 2 (9.1) [7EAA1D9F-C4E7-4232-B754-B5FB10A29DDE]\niPad Air (8.4) [7210E244-F1E2-4BD5-92B6-F57E59B1D988]\niPad Air (9.0) [996AA70D-BFE2-48F3-AF96-98BAA453B43B]\niPad Air (9.1) [46D290BB-B89E-4F96-8134-BDE208EE793E]\niPad Air 2 (9.0) [8EA4A50B-D8A7-44C7-9E94-01DDDF3CC494]\niPad Air 2 (9.1) [77E90261-FB18-4B76-81C6-CDB5D5F0206D]\niPad Pro (9.1) [59474C51-4A80-433F-92FE-4A72E6324EFA]\niPad Retina (8.4) [4A4E0612-3BCC-4D09-9DFB-6CAEBD7A39FE]\niPad Retina (9.0) [BF1499FA-2399-48E0-94BC-D9CB92203656]\niPad Retina (9.1) [5DF2678B-AD5D-4C83-9BCF-500901E82A21]\niPhone 4s (8.4) [D130373E-9BD6-46BB-A119-4D0DB572E2EE]\niPhone 4s (9.0) [54C0853C-A2EB-4056-A6D1-69897F4E129E]\niPhone 4s (9.1) [13AEB071-8DB6-433F-9DEE-7354ACB5DD66]\niPhone 5 (8.4) [764C88BF-6E68-4EFA-B4F3-43CECE650D83]\niPhone 5 (9.0) [A6330DF5-1234-45E4-9C50-8360AD277133]\niPhone 5 (9.1) [E1B14CC6-33AA-430C-8C7D-33285F1854C5]\niPhone 5s (8.4) [0A271188-66AB-45F3-97A9-551EAD033509]\niPhone 5s (9.0) [BDD8A84E-1193-4945-9D75-7C812303BA61]\niPhone 5s (9.1) [F540230C-6CA3-4AC5-83C5-08646A14DBD3]\niPhone 6 (8.4) [60724F5F-F91E-4358-B02C-C3BFFC4E0D45]\niPhone 6 (9.0) [159105BB-0C5B-471A-B0B3-C0F29433D7FC]\niPhone 6 (9.1) [BD8D0506-AD7D-44DE-861F-31AE875540D3]\niPhone 6 Plus (8.4) [0FD52166-86F3-4A42-9B60-0BC4F0AB229F]\niPhone 6 Plus (9.0) [B869364C-9BD4-40EA-B856-E92733256F90]\niPhone 6 Plus (9.1) [76CB8D84-A43C-47EC-ADAB-27AAAFA1EC35]\niPhone 6s (9.0) [AC299644-A221-4258-B61E-98D4C5E2DB01]\niPhone 6s (9.1) [90B8A72B-B98D-497F-B4EE-D3B57B6B4D0B]\niPhone 6s (9.1) + Apple Watch - 38mm (2.0) [6D03FF30-74B9-4DD1-A90B-309353F74B49]\niPhone 6s Plus (9.0) [1D797C85-8848-470B-A0AC-42D081BE2DBF]\niPhone 6s Plus (9.1) [96622DF5-2F94-40F4-9C0C-D30ADF3F0ECB]\niPhone 6s Plus (9.1) + Apple Watch - 42mm (2.0) [D428E666-334B-423A-806B-6775FF8FE7BA]\n</code></pre>\n\n<p>My physical device is called QA1.</p>\n\n<p>My next step was to build and compile my app on Xamarin for testing.\nI have searched the .ipa file in my finder, changed it's extension to .zip and then could see my .app file.\nI have got the .app file exported as my app bundle path in this command:</p>\n\n<pre><code>export APP_BUNDLE_PATH=\"/Users/roishmueli/Mekomi/Mekomi/Mekomi/iOS/bin/iPhone/Testing/2.821/Mekomi/Payload/MekomiiOS.app\"\n</code></pre>\n\n<p>Then I Unlocked my device and ran this command for running the app on the device:</p>\n\n<pre><code>DEBUG=1 BUNDLE_ID=\"com.kimaia.mekomi\" DEVICE_TARGET=\"7640b16200d8c553efda3de85291253e95d229ce\" DEVICE_ENDPOINT=http://192.168.1.40 cucumber\n</code></pre>\n\n<p>The <code>DEBUG=1</code> gives me additional output, which is:</p>\n\n<pre><code>/Users/roishmueli/Mekomi/Mekomi/Mekomi/features/step_definitions/calabash_steps.rb:7: warning: Insecure world writable dir /Android/android-sdk-macosx in PATH, mode 040757\n\nFeature: Login\n\n  Scenario: Registration              # features/1-FirstPage.feature:3\n\nINFO: Using uia strategy: 'host'\nDEBUG: Searching for run-loop results with glob: /Users/roishmueli/.run-loop/results/*\nDEBUG: Found 6 previous run-loop results\nDEBUG: Will delete 1 previous run-loop results\nDEBUG: Deleted 1 previous results in 0.001425 seconds\nDEBUG: Searching for instruments caches with glob: /Library/Caches/com.apple.dt.instruments/xrtmp__*\nDEBUG: Found 5 instruments caches\nDEBUG: Will delete 0 instruments caches\nDEBUG: Deleted 0 instruments caches in 0.00014 seconds\n2015-12-02 11:50:55 +0200 [RunLoop:debug]: \n{\n                        :app =&gt; \"com.kimaia.mekomi\",\n                       :args =&gt; [],\n    :bundle_dir_or_bundle_id =&gt; \"com.kimaia.mekomi\",\n                  :bundle_id =&gt; \"com.kimaia.mekomi\",\n                     :device =&gt; \"com.kimaia.mekomi\",\n              :device_target =&gt; \"7640b16200d8c553efda3de85291253e95d229ce\",\n                :instruments =&gt; #&lt;Instruments 7.1.1&gt;,\n              :launch_method =&gt; :instruments,\n             :launch_retries =&gt; 5,\n                   :log_file =&gt; \"/Users/roishmueli/.run-loop/results/2015-12-02_11-50-55/run_loop.out\",\n                  :no_launch =&gt; false,\n                    :no_stop =&gt; false,\n         :relaunch_simulator =&gt; true,\n                      :reset =&gt; false,\n                :results_dir =&gt; \"/Users/roishmueli/.run-loop/results/2015-12-02_11-50-55\",\n          :results_dir_trace =&gt; \"/Users/roishmueli/.run-loop/results/2015-12-02_11-50-55/trace\",\n                     :script =&gt; \"/Users/roishmueli/.run-loop/results/2015-12-02_11-50-55/_run_loop.js\",\n                :sdk_version =&gt; nil,\n                       :udid =&gt; \"7640b16200d8c553efda3de85291253e95d229ce\",\n               :uia_strategy =&gt; :host,\n                      :xcode =&gt; \"7.1.1\",\n                 :xcode_path =&gt; \"/Applications/Xcode.app/Contents/Developer\"\n}\nEXEC: xcrun instruments -s templates\n\nStarting on 7640b16200d8c553efda3de85291253e95d229ce App: com.kimaia.mekomi \n2015-12-02 11:50:56 +0200 [RunLoop:debug]: xcrun instruments -w 7640b16200d8c553efda3de85291253e95d229ce -D /Users/roishmueli/.run-loop/results/2015-12-02_11-50-55/trace -t Automation com.kimaia.mekomi -e UIARESULTSPATH /Users/roishmueli/.run-loop/results/2015-12-02_11-50-55 -e UIASCRIPT /Users/roishmueli/.run-loop/results/2015-12-02_11-50-55/_run_loop.js &gt;&amp; /Users/roishmueli/.run-loop/results/2015-12-02_11-50-55/run_loop.out\n2015-12-02 11:50:56 +0200 [RunLoop:debug]: Preparation took 0.877732 seconds\n</code></pre>\n\n<p>Then every 30 seconds I get this:</p>\n\n<pre><code>2015-12-02 11:51:26 +0200 [RunLoop:debug]: Error while writing to fifo. RunLoop::Fifo::NoReaderConfiguredError\n2015-12-02 11:51:26 +0200 [RunLoop:debug]: Failed to launch. Error while writing to fifo. RunLoop::Fifo::NoReaderConfiguredError: Error while writing to fifo. RunLoop::Fifo::NoReaderConfiguredError\n</code></pre>\n\n<p>I get these logs 5 times and then there is a timeout with this message:</p>\n\n<pre><code>Unable to start. Make sure you've set APP_BUNDLE_PATH to a build supported by this simulator version\n  Calabash::Cucumber::Launcher::StartError: \n\n  \"Timed out waiting for UIAutomation run-loop Error while writing to fifo. RunLoop::Fifo::NoReaderConfiguredError.\n\n  Logfile: /Users/roishmueli/.run-loop/results/2015-12-03_10-58-35/run_loop.out\n\n  2015-12-03 10:58:37.013 instruments[86757:6604129] Failed to start Instruments daemon on 'QA1 (8.4.1)' (The service is invalid.)\n  Instruments Usage Error : Specified target process is invalid: com.kimaia.mekomi\n  instruments, version 7.1.1 (59040)\n  usage: instruments [-t template] [-D document] [-l timeLimit] [-i #] [-w device] [[-p pid] | [application [-e variable value] [argument ...]]]\n\n\n   (Calabash::Cucumber::Launcher::StartError)\n  /Library/Ruby/Gems/2.0.0/gems/calabash-cucumber-0.16.4/lib/calabash-cucumber/launcher.rb:778:in `new_run_loop'\n  /Library/Ruby/Gems/2.0.0/gems/calabash-cucumber-0.16.4/lib/calabash-cucumber/launcher.rb:635:in `relaunch'\n  /Users/roishmueli/Mekomi/Mekomi/Mekomi/features/support/01_launch.rb:27:in `Before'\n    Then I see the first page         # features/step_definitions/calabash_steps.rb:13\n    Then I press on the verify button # features/step_definitions/calabash_steps.rb:23\n\nFailing Scenarios:\ncucumber features/1-FirstPage.feature:3 # Scenario: Registration\n\n1 scenario (1 failed)\n2 steps (2 skipped)\n2m35.735s\n</code></pre>\n\n<p>I have enabled my UIAutomation on my Device, through the developer settings and through the instruments.app.\nI have tried multiple different <code>APP_BUNDLE_PATH</code>s but none of them seem to fix this. \nWhat am I missing?\nThanks in advance.</p>\n"}, {"tags": ["ruby", "proxy", "environment-variables", "charles-proxy"], "answers": [{"comments": [{"owner": {"reputation": 1162, "user_id": 314509, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/UWf0h.jpg?s=128&g=1", "display_name": "Brynjar", "link": "https://stackoverflow.com/users/314509/brynjar"}, "edited": false, "score": 0, "creation_date": 1449067137, "post_id": 34043753, "comment_id": 55845307, "body": "So simple, but I didn&#39;t think to try that variation!"}], "tags": [], "owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "is_accepted": true, "score": 3, "last_activity_date": 1449062259, "creation_date": 1449062259, "answer_id": 34043753, "question_id": 34040990, "link": "https://stackoverflow.com/questions/34040990/using-ruby-with-charles-proxy-via-export-http-proxy-on-mac/34043753#34043753", "title": "Using Ruby with Charles Proxy via export http_proxy on Mac", "body": "<p>The <em>http_proxy</em> environment variable should include the protocol as well. Curl seems to be lazy in that sense.</p>\n\n<p>Try setting the proxy via</p>\n\n<p><code>export http_proxy=\"http://localhost:8888\"</code></p>\n"}], "owner": {"reputation": 1162, "user_id": 314509, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/UWf0h.jpg?s=128&g=1", "display_name": "Brynjar", "link": "https://stackoverflow.com/users/314509/brynjar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1201, "favorite_count": 0, "accepted_answer_id": 34043753, "answer_count": 1, "score": 2, "last_activity_date": 1449063061, "creation_date": 1449053810, "last_edit_date": 1449063061, "question_id": 34040990, "link": "https://stackoverflow.com/questions/34040990/using-ruby-with-charles-proxy-via-export-http-proxy-on-mac", "title": "Using Ruby with Charles Proxy via export http_proxy on Mac", "body": "<p>I have a simple Ruby script (Ruby 2.0) that I want to run on Mac OSX Yosemite and I want to proxy the network requests via Charles Proxy.</p>\n\n<pre><code>require 'json'\nrequire 'net/http'\nrequire 'net/https'\n\nclass Charles\n\ndef go\n\n    uri = URI.parse('http://example.com')\n    req = Net::HTTP::Get.new(uri.request_uri)\n    http = Net::HTTP.new(uri.host, uri.port)\n    http.use_ssl = false\n    res = http.request req\n\n    puts res\n    puts res.body\n\nend\n\nend\n\nnet = Charles.new\nnet.go\n</code></pre>\n\n<p>If I execute this script, all is fine but I don't see the request in Charles.</p>\n\n<p>As soon as I set an http proxy via the command line, the script errors:</p>\n\n<pre><code>export http_proxy=192.168.1.108:8888\n</code></pre>\n\n<p>/Users/hug/.rvm/rubies/ruby-2.0.0-p643/lib/ruby/2.0.0/uri/common.rb:176:in `split': bad URI(is not URI?): 192.168.1.108:8888 (URI::InvalidURIError)</p>\n\n<p>After I</p>\n\n<pre><code>unset http_proxy\n</code></pre>\n\n<p>it works again. I also tried</p>\n\n<pre><code>export http_proxy=locahost:8888\nexport http_proxy=machinename.local:8888\n</code></pre>\n\n<p>All these ways of setting the proxy work fine for curl, but none for Ruby.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "file", "file-read"], "comments": [{"owner": {"reputation": 339, "user_id": 1433751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba45a9042e4c86b9787c77cd5423c0e5?s=128&d=identicon&r=PG", "display_name": "Noxx", "link": "https://stackoverflow.com/users/1433751/noxx"}, "edited": false, "score": 1, "creation_date": 1449053080, "post_id": 34040359, "comment_id": 55836024, "body": "Take a look here: <a href=\"http://stackoverflow.com/a/5052929/1433751\">stackoverflow.com/a/5052929/1433751</a> That should answer your question"}], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 2953137, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83acc33ec2016bdab658fa16317a7206?s=128&d=identicon&r=PG&f=1", "display_name": "koxta", "link": "https://stackoverflow.com/users/2953137/koxta"}, "edited": false, "score": 0, "creation_date": 1449072090, "post_id": 34041605, "comment_id": 55849152, "body": "Thank you for the quick response. That last solution solved my problem."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1449057394, "last_edit_date": 1495541242, "creation_date": 1449055664, "answer_id": 34041605, "question_id": 34040359, "link": "https://stackoverflow.com/questions/34040359/how-to-read-a-file-block-in-rails-without-read-it-again-from-beginning/34041605#34041605", "title": "How to read a file block in Rails without read it again from beginning", "body": "<p><strong>Solution 1: Reading the whole file</strong></p>\n\n<p>The proposed solution here:<br>\n<a href=\"https://stackoverflow.com/a/5052929/1433751\">https://stackoverflow.com/a/5052929/1433751</a></p>\n\n<p>..is not an efficient solution in your case, because it requires you to read all the lines from the file for each AJAX request, even if you just need the last 10 lines of the logfile. </p>\n\n<p>That's an enormous waste of time, and in computing terms the solving time (i.e. process the whole logfile in blocks of size N) approaches exponential solving time.</p>\n\n<p><strong>Solution 2: Seeking</strong></p>\n\n<p>Since your AJAX calls request sequential lines we can implement a much more efficient approach by <strong>seeking to the correct position before reading</strong>, using <a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-i-seek\" rel=\"nofollow noreferrer\"><code>IO.seek</code></a> and <a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-i-pos\" rel=\"nofollow noreferrer\"><code>IO.pos</code></a>.</p>\n\n<p>This requires you to return some extra data (the last file position) back to the AJAX client at the same time you return the requested lines.</p>\n\n<p>The AJAX request then becomes a function call of this form <code>request_lines(position, line_count)</code>, which enables the server to <code>IO.seek(position)</code> before reading the requested count of lines.</p>\n\n<p>Here's the pseudocode for the solution:</p>\n\n<p><em>Client code</em>:</p>\n\n<pre><code>LINE_COUNT = 10\npos = 0\n\nloop {\n  data = server.request_lines(pos, LINE_COUNT)\n  display_lines(data.lines)\n  pos = data.pos\n  break if pos == -1  # Reached end of file\n}\n</code></pre>\n\n<p><em>Server code</em>:</p>\n\n<pre><code>def request_lines(pos, line_count)\n  file = File.open('logfile')\n\n  # Seek to requested position\n  file.seek(pos)\n\n  # Read the requested count of lines while checking for EOF\n  lines = count.times.map { file.readline if !file.eof? }.compact\n\n  # Mark pos with -1 if we reached EOF during reading\n  pos = file.eof? ? -1 : file.pos\n  f.close\n\n  # Return data\n  data = { lines: lines, pos: pos }\nend\n</code></pre>\n"}], "owner": {"reputation": 687, "user_id": 2953137, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83acc33ec2016bdab658fa16317a7206?s=128&d=identicon&r=PG&f=1", "display_name": "koxta", "link": "https://stackoverflow.com/users/2953137/koxta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "accepted_answer_id": 34041605, "answer_count": 1, "score": 2, "last_activity_date": 1449057394, "creation_date": 1449052069, "last_edit_date": 1449052431, "question_id": 34040359, "link": "https://stackoverflow.com/questions/34040359/how-to-read-a-file-block-in-rails-without-read-it-again-from-beginning", "title": "How to read a file block in Rails without read it again from beginning", "body": "<p>I have a growing file (log) that I need to read by blocks. \nI make a call by Ajax to get a specified number of lines.\nI used File.foreach to read the lines I want, but it reads always from the beginning and I need to return only the lines I want, directly.</p>\n\n<p>Example Pseudocode:</p>\n\n<pre><code> #First call:\n  File.open and return 0 to 10 lines\n\n #Second call:\n  File.open and return 11 to 20 lines\n\n #Third call:\n  File.open and return 21 to 30 lines\n\n #And so on...\n</code></pre>\n\n<p>Is there anyway to make this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1449052446, "post_id": 34040130, "comment_id": 55835602, "body": "Have you check this <a href=\"http://stackoverflow.com/questions/88311/how-best-to-generate-a-random-string-in-ruby\">Question: How best to generate a random string in Ruby</a>?"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1449052696, "post_id": 34040130, "comment_id": 55835766, "body": "just update the setter"}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 1, "creation_date": 1449053044, "post_id": 34040130, "comment_id": 55836004, "body": "Do you intend to prepend the email with the random string <i>once</i> or on <i>every</i> update?"}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 1, "creation_date": 1449054883, "post_id": 34040130, "comment_id": 55837241, "body": "I&#39;ll just warn you that the current solutions will all lead to emails updated on every update call. Resulting in <code>foo1_foo2_foo3_.._foo100_champ@gmail.com</code>. I this really what you want?"}], "answers": [{"tags": [], "owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "is_accepted": false, "score": 1, "last_activity_date": 1449051717, "creation_date": 1449051717, "answer_id": 34040228, "question_id": 34040130, "link": "https://stackoverflow.com/questions/34040130/add-a-random-string-while-updating-attribute/34040228#34040228", "title": "Add a random string while updating attribute", "body": "<pre><code>(1..8).map{|i| ('a'..'z').to_a[rand(26)]}.join\n</code></pre>\n\n<p>8 is the number of characters you want to generate randomly.</p>\n"}, {"comments": [{"owner": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "edited": false, "score": 0, "creation_date": 1449053469, "post_id": 34040231, "comment_id": 55836299, "body": "how can i get a random string only in digits ?"}, {"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "reply_to_user": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "edited": false, "score": 0, "creation_date": 1449053601, "post_id": 34040231, "comment_id": 55836363, "body": "Use <code>&#39;%011d&#39; % rand(1e10)</code> instead of <code>SecureRandom.hex(10)</code>. To change the number of digits in the string change the number after <code>e</code> here: <code>1e10</code>"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1449059877, "post_id": 34040231, "comment_id": 55840346, "body": "SecureRandom is part of <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow noreferrer\">the standard lib</a>, no ActiveSupport needed."}], "tags": [], "owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "is_accepted": true, "score": 4, "last_activity_date": 1449060033, "last_edit_date": 1449060033, "creation_date": 1449051724, "answer_id": 34040231, "question_id": 34040130, "link": "https://stackoverflow.com/questions/34040130/add-a-random-string-while-updating-attribute/34040231#34040231", "title": "Add a random string while updating attribute", "body": "<p>You can use the <code>SecureRandom</code> library:</p>\n\n<pre><code>@user.email = \"#{SecureRandom.hex(10)}_#{user.email}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 2, "creation_date": 1449052061, "post_id": 34040308, "comment_id": 55835320, "body": "Adding this method to <code>before_update</code> will prepend to the current email_adress on each update. Resulting in <code>foo1_foo2_foo3_dipak@gmail.com</code>. I doubt this is useful or required. You should use <code>before_create</code> instead."}, {"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1449052104, "post_id": 34040308, "comment_id": 55835349, "body": "<code>before_action</code> is a method for controllers, it has nothing to do with models"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1449052116, "post_id": 34040308, "comment_id": 55835355, "body": "Yes it will, But I thought they need same functionality."}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "reply_to_user": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1449052157, "post_id": 34040308, "comment_id": 55835387, "body": "@YuryLebedev, the answer states: &quot;before_update <i>in your model</i>&quot;"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1449052253, "post_id": 34040308, "comment_id": 55835450, "body": "Thanks @TheCha\u0362mp fixed typo."}, {"owner": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "edited": false, "score": 0, "creation_date": 1449052268, "post_id": 34040308, "comment_id": 55835463, "body": "what if i want a method in the application_helper and create a method there and use it in the controller , this is because i am using this method in different model as well"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1449052358, "post_id": 34040308, "comment_id": 55835526, "body": "You need to add it in every model, If you want to save it in db. Where you want to do this ?"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1449052400, "post_id": 34040308, "comment_id": 55835565, "body": "Yes @TheCha\u0362mp It will add on each update. and question is for same."}, {"owner": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "edited": false, "score": 0, "creation_date": 1449052471, "post_id": 34040308, "comment_id": 55835625, "body": "@Dipak in the controller i want to call the method and pass the email as the arguement"}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1449052484, "post_id": 34040308, "comment_id": 55835633, "body": "Yes, the question states that, but I assume he did not think of that behavior... you should correct thinking errors as well, or assure he really wants this useless functionality."}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1449052581, "post_id": 34040308, "comment_id": 55835692, "body": "So you can add action in application controller and then call that action in any controller where you want. Updating answer"}], "tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": -1, "last_activity_date": 1449053043, "last_edit_date": 1449053043, "creation_date": 1449051936, "answer_id": 34040308, "question_id": 34040130, "link": "https://stackoverflow.com/questions/34040130/add-a-random-string-while-updating-attribute/34040308#34040308", "title": "Add a random string while updating attribute", "body": "<p>create an action in your application controller like this :</p>\n\n<pre><code>private \n  def generate_random_string\n    SecureRandom.urlsafe_base64(nil, false)\n  end\n</code></pre>\n\n<p>And use it like this in any controller you want:</p>\n\n<pre><code>def update\n  @user = User.find_by_id(4)\n  @user.email = generate_random_string + @user.email\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1449052399, "post_id": 34040385, "comment_id": 55835564, "body": "just a small thing: i think the author if the question wanted to prepend a random string to the email address, not replace the whole string before <code>@</code> completely"}, {"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1449052507, "post_id": 34040385, "comment_id": 55835645, "body": "@YuryLebedev Yes it might be the case. But he didn&#39;t mentioned. It might be the case, he wants to replace before <code>@</code>. Author needs to confirm on this.:("}, {"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1449052734, "post_id": 34040385, "comment_id": 55835791, "body": "Yes, you are right. He mentioned at the starting, that he wants to <code>generate a random string in the starting of the email</code>."}], "tags": [], "owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "is_accepted": false, "score": 2, "last_activity_date": 1449052517, "last_edit_date": 1449052517, "creation_date": 1449052142, "answer_id": 34040385, "question_id": 34040130, "link": "https://stackoverflow.com/questions/34040130/add-a-random-string-while-updating-attribute/34040385#34040385", "title": "Add a random string while updating attribute", "body": "<p>Why not use <code>SecureRandom</code>?</p>\n\n<pre><code>require 'securerandom'\nrandom_string = SecureRandom.hex # provide argument to limit the no. of characters\n\n# outputs: 5b5cd0da3121fc53b4bc84d0c8af2e81 (i.e. 32 chars of 0..9, a..f)\n</code></pre>\n\n<p>For appending before email, you can do something like</p>\n\n<pre><code>@user.email = \"#{SecureRandom.hex(5))_#{@user.email}\" # 5 is no. of characters\n</code></pre>\n\n<p>Hope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1449054753, "post_id": 34040981, "comment_id": 55837143, "body": "how does this add to the existing answers in any way?"}], "tags": [], "owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "is_accepted": false, "score": -1, "last_activity_date": 1449053798, "creation_date": 1449053798, "answer_id": 34040981, "question_id": 34040130, "link": "https://stackoverflow.com/questions/34040130/add-a-random-string-while-updating-attribute/34040981#34040981", "title": "Add a random string while updating attribute", "body": "<p>I hope this will help you.</p>\n\n<pre><code>def update\n  @user = User.find_by_id(4)\n  @user.email = \"#{generate_random_string(8)}_#{@user.email}\"\n  ## You can pass any length to generate_random_string method, in this I have passed 8.\nend\n\nprivate\n\ndef generate_random_string(length)\n  options = { :length =&gt; length.to_i, :chars =&gt; ('a'..'z').to_a + ('A'..'Z').to_a + ('0'..'9').to_a }\n  Array.new(options[:length]) { options[:chars].to_a[rand(options[:chars].to_a.size)] }.join\nend\n</code></pre>\n"}], "owner": {"reputation": 883, "user_id": 4965201, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/305f81f75cbae6b8177ecaa1e681f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "user4965201", "link": "https://stackoverflow.com/users/4965201/user4965201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 34040231, "answer_count": 5, "score": 0, "last_activity_date": 1449060033, "creation_date": 1449051423, "last_edit_date": 1449051940, "question_id": 34040130, "link": "https://stackoverflow.com/questions/34040130/add-a-random-string-while-updating-attribute", "title": "Add a random string while updating attribute", "body": "<p>I am looking for a method that can generate a random string in the starting of the email field while updating the record.</p>\n\n<pre><code>def update\n  @user = User.find_by_id(4)\n  @user.email = #method to update email with random string\nend\n</code></pre>\n\n<p>So if I have the email record <code>abc@gmail.com</code> and I want to update it like this:</p>\n\n<pre><code>dssaakj123_abc@gmail.com\n</code></pre>\n\n<p>How it can be done in rails?</p>\n"}, {"tags": ["ruby", "if-statement", "inline"], "comments": [{"owner": {"reputation": 2602, "user_id": 1563325, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/61fc59dcb58364ad1be48abcbf4c5244?s=128&d=identicon&r=PG", "display_name": "muichkine", "link": "https://stackoverflow.com/users/1563325/muichkine"}, "edited": false, "score": 0, "creation_date": 1449050221, "post_id": 34039491, "comment_id": 55834165, "body": "Yes it&#39;s possible. I use it all the time."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449050956, "post_id": 34039491, "comment_id": 55834611, "body": "<code>rescue</code> is used to handle exceptions. Don&#39;t use exceptions for control flow."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1449051075, "post_id": 34039491, "comment_id": 55834683, "body": "Do you want to <code>retry</code> in case of an exception. Or do you want to re-run the block if the condition is met? You might want to use a <code>while</code> block in the second case..."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449050534, "post_id": 34039719, "comment_id": 55834353, "body": "The <code>rescue</code> block is only called if an exception is raised."}, {"owner": {"reputation": 352, "user_id": 3272592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rq0op.jpg?s=128&g=1", "display_name": "ddnomad", "link": "https://stackoverflow.com/users/3272592/ddnomad"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449051207, "post_id": 34039719, "comment_id": 55834773, "body": "@Stefan yes, you&#39;re right. And that&#39;s why this implementation is not what I want (my mistake, maybe I should explain what I need more clearly).  I selfanswered this question with a possible workaround to make things work."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1449050247, "creation_date": 1449050247, "answer_id": 34039719, "question_id": 34039491, "link": "https://stackoverflow.com/questions/34039491/is-it-possible-to-use-retry-keyword-inline-with-if/34039719#34039719", "title": "Is it possible to use `retry` keyword inline with `if`?", "body": "<p><code>retry</code> works in <code>rescue</code> blocks (or in iterators). And it works with <code>if</code>. Try this:</p>\n\n<pre><code>begin\n  bet = Dialogs.enter_your_bet\n  approx.calculate_average_profit(bet)\n  approx.print_profits_table\nrescue\n  retry if Dialogs.play_again?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449051110, "post_id": 34040013, "comment_id": 55834706, "body": "<code>if !Dialogs.play_again?</code> is equivalent to <code>unless Dialogs.play_again?</code>"}, {"owner": {"reputation": 352, "user_id": 3272592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rq0op.jpg?s=128&g=1", "display_name": "ddnomad", "link": "https://stackoverflow.com/users/3272592/ddnomad"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449051290, "post_id": 34040013, "comment_id": 55834835, "body": "@Stefan yes, surly. Yet I have a terrible headache using &#39;unless&#39; keyword, so I got rid of it :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449051723, "post_id": 34040013, "comment_id": 55835086, "body": "Note that you are <code>retry</code>-ing the whole <code>loop</code> in case of an exception. I would wrap the <code>loop</code>&#39;s body in a <code>begin-rescue-end</code> block and remove the <code>retry</code>."}, {"owner": {"reputation": 352, "user_id": 3272592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rq0op.jpg?s=128&g=1", "display_name": "ddnomad", "link": "https://stackoverflow.com/users/3272592/ddnomad"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449052028, "post_id": 34040013, "comment_id": 55835293, "body": "@Stefan in my particular case it&#39;s ok, as I store all the necessary info in approx object instance that was created before. But again - thanks for an observation."}], "tags": [], "owner": {"reputation": 352, "user_id": 3272592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rq0op.jpg?s=128&g=1", "display_name": "ddnomad", "link": "https://stackoverflow.com/users/3272592/ddnomad"}, "is_accepted": true, "score": 1, "last_activity_date": 1449051063, "creation_date": 1449051063, "answer_id": 34040013, "question_id": 34039491, "link": "https://stackoverflow.com/questions/34039491/is-it-possible-to-use-retry-keyword-inline-with-if/34040013#34040013", "title": "Is it possible to use `retry` keyword inline with `if`?", "body": "<p>Ok, thank you all for answers! I understood what was a problem, but your workarounds wasn't what I need. Actually, rescue part was for restarting input prompt in case of illegal input from a user, while my 'retry' inside begin was to restart block from another user input (y/n question). </p>\n\n<p>So after some investigation, this code would work flawlessly:</p>\n\n<pre><code>begin\n  loop do\n    bet = Dialogs.enter_your_bet(gapes[0],gapes[1])\n    approx.calculate_average_profit(bet)\n    approx.print_profits_table\n  break if !Dialogs.play_again?\n  end\nrescue;retry\nend\n</code></pre>\n\n<p>And again, thanks for been so awesomely active community. Take care!</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449052435, "post_id": 34040440, "comment_id": 55835594, "body": "There&#39;s no way to exit the loop."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1449052949, "last_edit_date": 1449052949, "creation_date": 1449052275, "answer_id": 34040440, "question_id": 34039491, "link": "https://stackoverflow.com/questions/34039491/is-it-possible-to-use-retry-keyword-inline-with-if/34040440#34040440", "title": "Is it possible to use `retry` keyword inline with `if`?", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.0/doc/syntax/control_expressions_rdoc.html#label-redo+Statement\" rel=\"nofollow\">redo</a> is used for control flow.</p>\n\n<p>Quoting the docs: \"In Ruby 1.8 you could also use retry where you used redo. This is no longer true, now you will receive a SyntaxError when you use retry outside of a rescue block. See Exceptions for proper usage of retry.\"</p>\n"}], "owner": {"reputation": 352, "user_id": 3272592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rq0op.jpg?s=128&g=1", "display_name": "ddnomad", "link": "https://stackoverflow.com/users/3272592/ddnomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 34040013, "answer_count": 3, "score": 1, "last_activity_date": 1449052949, "creation_date": 1449049588, "last_edit_date": 1449050325, "question_id": 34039491, "link": "https://stackoverflow.com/questions/34039491/is-it-possible-to-use-retry-keyword-inline-with-if", "title": "Is it possible to use `retry` keyword inline with `if`?", "body": "<p>I have to surround everything with <code>begin</code>-<code>rescue</code>-<code>end</code> block. I've written code that looks like:</p>\n\n<pre><code>begin\n  bet = Dialogs.enter_your_bet\n  approx.calculate_average_profit(bet)\n  approx.print_profits_table\n  retry if Dialogs.play_again?\nrescue;retry\nend\n</code></pre>\n\n<p>The line <code>retry if Dialogs.play_again?</code> caused the following error:</p>\n\n<pre><code>./main:14: Invalid retry\n./main: compile error (SyntaxError)\n</code></pre>\n\n<p>Is it possible to make this kind of inline <code>retry</code> to work with <code>if</code> clause without regular <code>if</code>-<code>end</code> multiline approach?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "deployment"], "answers": [{"tags": [], "owner": {"reputation": 568, "user_id": 1564977, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3f4db92ad29be80404958f7773b80727?s=128&d=identicon&r=PG", "display_name": "Siva Gollapalli", "link": "https://stackoverflow.com/users/1564977/siva-gollapalli"}, "is_accepted": false, "score": 1, "last_activity_date": 1449049527, "creation_date": 1449049527, "answer_id": 34039466, "question_id": 34039465, "link": "https://stackoverflow.com/questions/34039465/too-many-authentication-failures-for-ubuntu-mina-deploy/34039466#34039466", "title": "Too many authentication failures for ubuntu mina deploy", "body": "<p>To fix this issue add <code>set :ssh_options, \"-o 'IdentitiesOnly yes'\"</code> to your <code>config/deploy.rb</code></p>\n"}], "owner": {"reputation": 568, "user_id": 1564977, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3f4db92ad29be80404958f7773b80727?s=128&d=identicon&r=PG", "display_name": "Siva Gollapalli", "link": "https://stackoverflow.com/users/1564977/siva-gollapalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449049527, "creation_date": 1449049527, "question_id": 34039465, "link": "https://stackoverflow.com/questions/34039465/too-many-authentication-failures-for-ubuntu-mina-deploy", "title": "Too many authentication failures for ubuntu mina deploy", "body": "<p>When we do <code>ssh</code> it works fine but when we do <code>mina deploy</code> it gives <code>Too many authentication failures for ubuntu</code> this error. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "phantomjs", "watir", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "edited": false, "score": 0, "creation_date": 1449051146, "post_id": 34039859, "comment_id": 55834727, "body": "Hey i pasted the code it is showing an error undefined method `maximiz&#39; for #&lt;Watir::Window:0x75dcffacef69afd4 located=true&gt;"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "edited": false, "score": 0, "creation_date": 1449051297, "post_id": 34039859, "comment_id": 55834838, "body": "Ok jjust change it with <code>browser.window.maximize</code> I forgot e there :)"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "edited": false, "score": 0, "creation_date": 1449052045, "post_id": 34039859, "comment_id": 55835303, "body": "Try remove phantomjs from <code>browser = Watir::Browser.new :phantomjs</code> and change to <code>browser = Watir::Browser.new</code> it will open your browser. See if site is loading in mobile view or not"}, {"owner": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "edited": false, "score": 0, "creation_date": 1449052322, "post_id": 34039859, "comment_id": 55835502, "body": "site is opening but now getting this error end of file reached"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "edited": false, "score": 0, "creation_date": 1449052460, "post_id": 34039859, "comment_id": 55835615, "body": "I have tested it and it working fine for me. [DEPRECATION] requiring &quot;RMagick&quot; is deprecated. Use &quot;rmagick&quot; instead Happy deals Buy for Rs 9,499 Rs. 22,799 | 58% Discount"}, {"owner": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "edited": false, "score": 0, "creation_date": 1449052692, "post_id": 34039859, "comment_id": 55835762, "body": "Which was given from also available from sellers"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "edited": false, "score": 0, "creation_date": 1449053260, "post_id": 34039859, "comment_id": 55836157, "body": "It&#39;s in ul and li tag and both work similar to h2 tag in my code. Try change some code there and you are done :)"}], "tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1449051309, "last_edit_date": 1449051309, "creation_date": 1449050617, "answer_id": 34039859, "question_id": 34039346, "link": "https://stackoverflow.com/questions/34039346/rails-phantomjs-for-scraping/34039859#34039859", "title": "Rails PhantomJS for scraping", "body": "<p>You don't need to add <code>Nokogiri</code> or <code>mechanize</code> here. <code>watir</code> will get all element you want. Try run below code, It will solve your issue.</p>\n\n<pre><code>require 'selenium-webdriver'\nrequire 'phantomjs'\nrequire 'watir'\n\nbrowser = Watir::Browser.new :phantomjs\nbrowser.window.maximize\nbrowser.goto \"https://paytm.com/shop/p/gionee-e7-mini-black-MOBGIONEE-E7-MIHAPP44414CBBDB36C?psearch=organic|undefined|gionee%20e7|grid\"\nputs browser.div(:class =&gt; 'profile-description').a.h2.text\nputs browser.div(:class =&gt; 'buy-bar').button.span.text\nputs browser.div(:class =&gt; 'effPrc').span.text\nbrowser.close\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5620892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b20160884082cae26397c6318f9b1ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/5620892/aniket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1517, "favorite_count": 1, "accepted_answer_id": 34039859, "answer_count": 1, "score": 0, "last_activity_date": 1475157160, "creation_date": 1449049178, "last_edit_date": 1449057544, "question_id": 34039346, "link": "https://stackoverflow.com/questions/34039346/rails-phantomjs-for-scraping", "title": "Rails PhantomJS for scraping", "body": "<p>I am new to rails and have never use angular js. I want to extract price and seller name from this link <a href=\"https://paytm.com/shop/p/gionee-e7-mini-black-MOBGIONEE-E7-MIHAPP44414CBBDB36C?psearch=organic%7Cundefined%7Cgionee%20e7%7Cgrid\" rel=\"nofollow\">link</a></p>\n\n<pre><code>module HomesHelper\nrequire 'selenium-webdriver'\nrequire 'mechanize'\nrequire 'nokogiri'\nrequire 'phantomjs'\nrequire 'watir'\n\nb = Watir::Browser.new(:phantomjs)\n\nb.goto url\ndoc = Nokogiri::HTML(b.html)    \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1449048507, "post_id": 34039033, "comment_id": 55833047, "body": "how you want to create a link"}, {"owner": {"reputation": 1158, "user_id": 2747638, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dWpWy.jpg?s=128&g=1", "display_name": "Mio", "link": "https://stackoverflow.com/users/2747638/mio"}, "reply_to_user": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1449048668, "post_id": 34039033, "comment_id": 55833149, "body": "@RORDeveloper ? Everything works expect the comma."}, {"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1449049063, "post_id": 34039033, "comment_id": 55833407, "body": "so your logic is wrong with the <code>index&gt;0</code> part, is that the only problem? :/"}, {"owner": {"reputation": 1158, "user_id": 2747638, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dWpWy.jpg?s=128&g=1", "display_name": "Mio", "link": "https://stackoverflow.com/users/2747638/mio"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1449049199, "post_id": 34039033, "comment_id": 55833481, "body": "Yes @sevenseacat. I have &quot;group1 group2, group3,&quot; and I want &quot;group1, group2, group3&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 2, "last_activity_date": 1449049435, "creation_date": 1449049435, "answer_id": 34039434, "question_id": 34039033, "link": "https://stackoverflow.com/questions/34039033/separate-link-to-with-comma/34039434#34039434", "title": "Separate link_to with comma", "body": "<p>First, are you sure that you pasted here the <em>exact</em> code which gave the posted result? In your code, you have</p>\n\n<pre><code>(index &gt; 0 ? '' : ',')\n</code></pre>\n\n<p>which means: <em>Do not add a comma UNLESS we are on the first element</em>. The result you posted had the comma the otherway round: It has a comma everywhere, EXCEPT for the first element. With other words: The code you posted, can't produce the output you posted.</p>\n\n<p>Now for your problem: You want to add a comma on every element, except the last. This means that you need to know the highest (last) index value:</p>\n\n<pre><code>last_index = game_publication.groups.size - 1\n</code></pre>\n\n<p>With this, you can write your expression as</p>\n\n<pre><code>(index == last_index ? '' : ',')\n</code></pre>\n"}], "owner": {"reputation": 1158, "user_id": 2747638, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dWpWy.jpg?s=128&g=1", "display_name": "Mio", "link": "https://stackoverflow.com/users/2747638/mio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 34039434, "answer_count": 1, "score": 0, "last_activity_date": 1449049637, "creation_date": 1449048271, "last_edit_date": 1449049637, "question_id": 34039033, "link": "https://stackoverflow.com/questions/34039033/separate-link-to-with-comma", "title": "Separate link_to with comma", "body": "<p>I want to separate this block with commas :</p>\n\n<pre><code>  - game_publication.groups.each_with_index do |group, index|\n    = link_to store_group_path(current_store, group) do\n      %span= @groups.find(group).name.to_s + (index &gt; 0 ? ', ' : '')\n</code></pre>\n\n<p>But for the moment it returns something like</p>\n\n<pre><code>&lt;label&gt;Groups :&lt;/label&gt;\n  &lt;a href=\"/66-store/groups/4594?locale=en\"&gt;\n    &lt;span&gt;party hard&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;a href=\"/66-store/groups/5063?locale=en\"&gt;\n    &lt;span&gt;b0m,&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;a href=\"/66-store/groups/5066?locale=en\"&gt;\n    &lt;span&gt;test,&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/label&gt;\n</code></pre>\n\n<p>It doesn't seems a situation where I can use any rails helpers.</p>\n\n<p>I would like something like <strong>group1, group2, group3</strong>.</p>\n\n<pre><code>&lt;label&gt;Groups :&lt;/label&gt;\n  &lt;a href=\"/66-store/groups/4594?locale=en\"&gt;\n    &lt;span&gt;party hard,&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;a href=\"/66-store/groups/5063?locale=en\"&gt;\n    &lt;span&gt;b0m,&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;a href=\"/66-store/groups/5066?locale=en\"&gt;\n    &lt;span&gt;test&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/label&gt;\n</code></pre>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1449516991, "post_id": 34038839, "comment_id": 56031504, "body": "You do know that Yelp has an <a href=\"https://www.yelp.com/developers/documentation/v2/overview\" rel=\"nofollow noreferrer\">API</a> designed to help you avoid scraping pages? I&#39;d recommend taking advantage of it."}, {"owner": {"reputation": 145, "user_id": 3600060, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7861fa643d93ee5a4e106b239369895a?s=128&d=identicon&r=PG&f=1", "display_name": "boogiewonder", "link": "https://stackoverflow.com/users/3600060/boogiewonder"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1449610785, "post_id": 34038839, "comment_id": 56080369, "body": "@theTinMan I tried it but it doesn&#39;t give the same results and it&#39;s limited to a number of results. It&#39;s obviously much easier to use but scraping was giving me better results."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1449613163, "post_id": 34038839, "comment_id": 56081667, "body": "Be aware that their TOS probably bans scraping so you run a good risk of being banned."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1449608995, "post_id": 34049624, "comment_id": 56079370, "body": "You probably want to use <code>doc3.search(&#39;li.yloca-search-result&#39;).unlink</code>. That will remove all ads from the page in a single pass."}, {"owner": {"reputation": 145, "user_id": 3600060, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7861fa643d93ee5a4e106b239369895a?s=128&d=identicon&r=PG&f=1", "display_name": "boogiewonder", "link": "https://stackoverflow.com/users/3600060/boogiewonder"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1449610843, "post_id": 34049624, "comment_id": 56080393, "body": "@theTinMan Thank you!"}], "tags": [], "owner": {"reputation": 145, "user_id": 3600060, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7861fa643d93ee5a4e106b239369895a?s=128&d=identicon&r=PG&f=1", "display_name": "boogiewonder", "link": "https://stackoverflow.com/users/3600060/boogiewonder"}, "is_accepted": true, "score": 0, "last_activity_date": 1449078706, "creation_date": 1449078706, "answer_id": 34049624, "question_id": 34038839, "link": "https://stackoverflow.com/questions/34038839/ignore-element-inside-only-certain-divs/34049624#34049624", "title": "Ignore element inside only certain divs", "body": "<p>I figured it out. Wasn't difficult but I just couldn't see the answer.</p>\n\n<pre><code>ad = doc3.at_css(\"li.yloca-search-result\")\nad.remove\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 3600060, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7861fa643d93ee5a4e106b239369895a?s=128&d=identicon&r=PG&f=1", "display_name": "boogiewonder", "link": "https://stackoverflow.com/users/3600060/boogiewonder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 34049624, "answer_count": 1, "score": 0, "last_activity_date": 1449608624, "creation_date": 1449047722, "last_edit_date": 1449608624, "question_id": 34038839, "link": "https://stackoverflow.com/questions/34038839/ignore-element-inside-only-certain-divs", "title": "Ignore element inside only certain divs", "body": "<p>I have a basic web scraper written which pulls short sections of text from a webpage and puts them into a list. My problem is that there are dynamic ads that appear on the page and mess up the lists. \nThe page I'm scraping is a Yelp restaurant listing page.</p>\n\n<p>I pull out the biz-name (business name) and add it to the list and it works fine but when the ads appear the scraper pulls the biz-name also.</p>\n\n<p>This is the structure but I can't figure out how to ignore the 'AD element' and just scrape the normal business names. I've cut it down a lot and removed the 'unimportant' elements.</p>\n\n<p>This is with an AD:</p>\n\n<pre><code>&lt;li class=\"yloca-search-result\"&gt;\n   ...\n      ... \n         &lt;a class=\"biz-name\"...&gt;&lt;span&gt;San Lorenzo\u2019s&lt;/span&gt;&lt;/a&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>This is a normal listing:</p>\n\n<pre><code>&lt;li class=\"regular-search-result\"&gt;\n   ...\n      ...\n         &lt;a class=\"biz-name\"...&gt;&lt;span&gt;BigGrill&lt;/span&gt;&lt;/a&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>I've been trying to make Nokogiri ignore the business name inside the <code>&lt;li class=\"yloca-search-result\"&gt;</code> and only select the others inside the <code>regular-search-result</code> class.\nI can't figure it out. Can someone point me in the right direction at least? Is it possible?</p>\n"}, {"tags": ["ruby", "read-eval-print-loop", "pry", "hanami"], "answers": [{"tags": [], "owner": {"reputation": 1146, "user_id": 498386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76aa5b311fb40fdc2bb70c0282d66af3?s=128&d=identicon&r=PG", "display_name": "Luca Guidi", "link": "https://stackoverflow.com/users/498386/luca-guidi"}, "is_accepted": true, "score": 1, "last_activity_date": 1449049915, "creation_date": 1449049915, "answer_id": 34039604, "question_id": 34038428, "link": "https://stackoverflow.com/questions/34038428/method-call-in-repl-returns-weirdly-nothing/34039604#34039604", "title": "method-call in REPL returns weirdly nothing", "body": "<p>@florian You picked the wrong configuration.</p>\n\n<p>You should refer to <code>Web::Assets.configuration.prefix</code>, instead of <code>Web::Application.configuration.assets</code>.</p>\n\n<p>The latter is a proxy that \"accumulates\" all the commands and then apply them to the target configuration.</p>\n"}], "owner": {"reputation": 4369, "user_id": 432696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d5f6518275df828ce4640a09c84b1244?s=128&d=identicon&r=PG", "display_name": "Florian Neumann", "link": "https://stackoverflow.com/users/432696/florian-neumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34039604, "answer_count": 1, "score": 0, "last_activity_date": 1454247006, "creation_date": 1449046423, "last_edit_date": 1454247006, "question_id": 34038428, "link": "https://stackoverflow.com/questions/34038428/method-call-in-repl-returns-weirdly-nothing", "title": "method-call in REPL returns weirdly nothing", "body": "<p>I am recently trying to implement a mixin, which accesses a <code>configuration</code>-object based on the namespace of the point of execution. The following snippet from my mixin extracts that namespace-part and caches it in an instance-variable of the mixin-target:</p>\n\n<pre><code>    if @asset_uri_helpers_config_ref.nil? == true then # initialize configuration-cache\n      application_name = self.class.name.split('::').first # extract app-name from class-name\n      @asset_uri_helpers_config_ref = Object.const_get(\"#{application_name}::Application\").configuration\n    end\n    binding.pry # start the repl-session here\n</code></pre>\n\n<p>After that i'm accessing the method <code>@asset_uri_helpers_config_ref.assets()</code> which originally is defined at <code>&lt;&lt;namespace&gt;&gt;::Application.configuration.assets()</code>. The addicted unit-tests (where i stubbed the <code>configuration</code>-object) run (of course) fine.</p>\n\n<p>The subsequent integration tests fail and to find out what happens, i added the above outlined repl-invokation. Now, when investigating the return values i get the following output:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>[1] pry(#&lt;Collaboration::Views::Assets::UseUriHelpers&gt;)&gt; @asset_uri_helpers_config_ref.assets\n=&gt; \n[2] pry(#&lt;Collaboration::Views::Assets::UseUriHelpers&gt;)&gt; defined? @asset_uri_helpers_config_ref.assets()\n=&gt; \"method\"\n[3] pry(#&lt;Collaboration::Views::Assets::UseUriHelpers&gt;)&gt; @asset_uri_helpers_config_ref.assets.pretty_inspect\n=&gt; [[:object_id, [], nil],\n [:pretty_print,\n  [#&lt;Pry::ColorPrinter:0x007fb47b971058\n    @buffer=[],\n...\n[4] pry(#&lt;Collaboration::Views::Assets::UseUriHelpers&gt;)&gt; @asset_uri_helpers_config_ref.assets.nil?\n=&gt; [[:object_id, [], nil],\n [:pretty_print,\n  [#&lt;Pry::ColorPrinter:0x007fb47b971058\n    @buffer=[],\n...\n</code></pre>\n\n<p>I have no clue what i am getting here - any attempt to check the return value agains f.e. <code>nil?</code> (command #4) fails. It somehow looks like an exception - but then an Error should be thrown even when i call <code>.assets()</code> directly (command #1).</p>\n\n<p>Can anybody explain what i am getting here?</p>\n\n<h3>The output above come from a <code>BasicObject</code></h3>\n\n<p>I am accessing the wrong Class and therefore get a <code>BasicObject</code>-derivation back which appends all method_missing-invokations into an Array.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "ruby-on-rails-4", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "edited": false, "score": 1, "creation_date": 1449044585, "post_id": 34037823, "comment_id": 55830728, "body": "I don&#39;t think the problem is the regexp, but maybe a change in the validation. For your specific problem, you can use the Money gem to handle currencies, it helps a lot ;)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1449044685, "post_id": 34037823, "comment_id": 55830771, "body": "Just FYI: if you do not want <code>1.</code> to be valid, use <code>{1,2}</code> instead of <code>{0,2}</code>."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1449045089, "post_id": 34037823, "comment_id": 55830967, "body": "I am surprised that it was ever possible to validate a floating point number with a regexp. Doesn&#39;t make much sense in IMHO. That was probably a bug and was fixed in the latest version."}, {"owner": {"reputation": 10453, "user_id": 872514, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a42591877295d7b253af219057635ba7?s=128&d=identicon&r=PG", "display_name": "alexs333", "link": "https://stackoverflow.com/users/872514/alexs333"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1449045644, "post_id": 34037823, "comment_id": 55831283, "body": "@spickermann the underlying data structure for the amount is decimal, so the validation is trying to validate decimal precision.  Was doing those types of validations since Rails 3 until this moment."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1449046325, "post_id": 34037823, "comment_id": 55831715, "body": "Decimal precision is not something you can vary and validate. It is fixed for the computer. Even if you apply <code>to_s</code> to it, that does not change the situation."}], "answers": [{"tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": false, "score": 0, "last_activity_date": 1449047170, "creation_date": 1449047170, "answer_id": 34038652, "question_id": 34037823, "link": "https://stackoverflow.com/questions/34037823/rails-regexp-validation-for-number-of-decimal-points/34038652#34038652", "title": "Rails - regexp validation for number of decimal points", "body": "<p>Could this be achieved with a custom validation, rather than a regular expression? \nSomething like:</p>\n\n<pre><code>validates :amount, numericality: {less_than: 1000000}, allow_blank: true\nvalidate :amount_has_ok_decimal_places\n\ndef amount_has_ok_decimal_places\n  decimals = amount.to_s.split('.')\n  if decimals.size == 2 &amp;&amp; decimals.last.size &gt; 2\n    errors.add(:amount, \"can't be more than 2 decimal places\")\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2602, "user_id": 1563325, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/61fc59dcb58364ad1be48abcbf4c5244?s=128&d=identicon&r=PG", "display_name": "muichkine", "link": "https://stackoverflow.com/users/1563325/muichkine"}, "is_accepted": false, "score": 1, "last_activity_date": 1449049389, "creation_date": 1449049389, "answer_id": 34039421, "question_id": 34037823, "link": "https://stackoverflow.com/questions/34037823/rails-regexp-validation-for-number-of-decimal-points/34039421#34039421", "title": "Rails - regexp validation for number of decimal points", "body": "<pre><code>class Loan\n  include ActiveModel::Model\n  attr_accessor :amount\n  validates :amount, format: {with: /\\A\\d+(?:\\.\\d{0,2})?\\z/}, numericality: {less_than: 1000000}, allow_blank: true\n end\n</code></pre>\n\n<p>in Rails 4.2.5:</p>\n\n<pre><code>l = Loan.new\nl.amount = 1.1111\nl.valid? # false\n</code></pre>\n\n<p>so this must come from somewhere else. </p>\n\n<p>If you changed your version of Ruby, that could be.</p>\n\n<p>It could be that Rails changed the way it handled format conversion (regex work on strings so giving a Numeric there must be some conversion somewhere). I doubt that though (check release notes).</p>\n"}], "owner": {"reputation": 10453, "user_id": 872514, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a42591877295d7b253af219057635ba7?s=128&d=identicon&r=PG", "display_name": "alexs333", "link": "https://stackoverflow.com/users/872514/alexs333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449049389, "creation_date": 1449044324, "question_id": 34037823, "link": "https://stackoverflow.com/questions/34037823/rails-regexp-validation-for-number-of-decimal-points", "title": "Rails - regexp validation for number of decimal points", "body": "<p>I have a model that validates a decimal precision by regular expression:</p>\n\n<pre><code>    class Loan &lt; ActiveRecord::Base\n      validates :amount,\n                format: {with: /\\A\\d+(?:\\.\\d{0,2})?\\z/}, numericality: {less_than: 1000000}, allow_blank: true\n    end\n</code></pre>\n\n<p>In Rails <strong>4.2.4</strong></p>\n\n<pre><code>l = Loan.new\nl.amount = 1.1111\nl.valid? # false\n</code></pre>\n\n<p>In Rails <strong>4.2.5</strong></p>\n\n<pre><code>l = Loan.new\nl.amount = 1.1111\nl.valid? # true\n</code></pre>\n\n<p>I there a problem in my regular expression that is exposed by newer version or Rails, Rails validation itself or perhaps something else?</p>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "edited": false, "score": 0, "creation_date": 1449049165, "post_id": 34037624, "comment_id": 55833466, "body": "What should the &quot;user1@resource1&quot; hash contain, the array [user1,resource1]?  Also, what type of data are the user and resource objects?"}, {"owner": {"reputation": 1, "user_id": 2231455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c534e1a9cff8d80bd98bf47fcfd36d?s=128&d=identicon&r=PG", "display_name": "user2231455", "link": "https://stackoverflow.com/users/2231455/user2231455"}, "reply_to_user": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "edited": false, "score": 0, "creation_date": 1449065842, "post_id": 34037624, "comment_id": 55844363, "body": "It&#39;s of the type rabbitmq_user_permissions form the official rabbitmq puppet module. They contain permissions for a given vhost on a rabbit node/cluster. They are strings."}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 5494294, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4oaf4Q9Q5jA/AAAAAAAAAAI/AAAAAAAAbkA/_-1VuNhGeSg/photo.jpg?sz=128", "display_name": "Alex A", "link": "https://stackoverflow.com/users/5494294/alex-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1449063835, "creation_date": 1449063835, "answer_id": 34044277, "question_id": 34037624, "link": "https://stackoverflow.com/questions/34037624/generate-hash-for-create-resources-from-two-arrays/34044277#34044277", "title": "Generate hash for create_resources from two arrays", "body": "<p>With the information you provided on how to do the the combining part:</p>\n\n<pre><code>myHashes = {}\nusers = [\"user1\", \"user2\", \"user3\"]\nresources = [\"resource1\", \"resource2\", \"resource3\"]\n\nusers.each.with_index do |user, i|\n        myHashes[\"#{user}@#{resources[i]}\"] = {}\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2231455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c534e1a9cff8d80bd98bf47fcfd36d?s=128&d=identicon&r=PG", "display_name": "user2231455", "link": "https://stackoverflow.com/users/2231455/user2231455"}, "is_accepted": false, "score": 0, "last_activity_date": 1449066103, "creation_date": 1449066103, "answer_id": 34045076, "question_id": 34037624, "link": "https://stackoverflow.com/questions/34037624/generate-hash-for-create-resources-from-two-arrays/34045076#34045076", "title": "Generate hash for create_resources from two arrays", "body": "<p>I ended up doing it in puppet:</p>\n\n<pre><code>$users.each |String $user| {\n  $resources.each |String $vhost| {\n    rabbitmq_user_permissions {\"${user}@${vhost}\":\n                    configure_permission =&gt; '.*',\n                    read_permission      =&gt; '.*',\n                    write_permission     =&gt; '.*',}\n                        }\n                      }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2231455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c534e1a9cff8d80bd98bf47fcfd36d?s=128&d=identicon&r=PG", "display_name": "user2231455", "link": "https://stackoverflow.com/users/2231455/user2231455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449066103, "creation_date": 1449043535, "question_id": 34037624, "link": "https://stackoverflow.com/questions/34037624/generate-hash-for-create-resources-from-two-arrays", "title": "Generate hash for create_resources from two arrays", "body": "<p>I need to create quite a lot of resources, more precisely permission sets for RabbitMQ vhosts.</p>\n\n<p>I'd like to create these from 2 hiera lookups. 2 arrays holding the users and the vhosts.</p>\n\n<pre><code>$users = [user1, user2, user3]\n$resources = [resource1, resource2, resource3]\n</code></pre>\n\n<p>Should become:</p>\n\n<pre><code>$myhashes = {\n'user1@resource1' =&gt; { \n    },\n'user1@resource2' =&gt; { \n    },\n'user1@resource3' =&gt; { \n    },\n'user2@resource1' =&gt; { \n    },\n'user2@resource2' =&gt; { \n    },\n'user2@resource3' =&gt; { \n    },\n'user3@resource1' =&gt; { \n    },\n'user3@resource2' =&gt; { \n    },\n'user3@resource3' =&gt; { \n    },\n}\n</code></pre>\n\n<p>This hash could then be fed to create_resources. I have no idea how to go about this in Puppet or Ruby. It's no trouble creating resources from one array, but when I need each entry in that array to hold data from another array I get lost.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1449047868, "post_id": 34037513, "comment_id": 55832681, "body": "The result array contains a company that appears <i>exactly</i> 2 times (not <i>more than</i>). Please clarify your question."}], "answers": [{"comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449047108, "post_id": 34037602, "comment_id": 55832219, "body": "@Stefan The code doesn&#39;t work without the backslashes. Alternativly you can move the dot to the end of the line before. But <code>rubocop</code> prefers the the backslash version."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1449047455, "post_id": 34037602, "comment_id": 55832434, "body": "It does work. A trailing backslash is only needed in a REPL like irb."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449048053, "post_id": 34037602, "comment_id": 55832793, "body": "@Stefan Thanks. Works with 2.2.3 but not with 1.8.7."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1449048180, "post_id": 34037602, "comment_id": 55832881, "body": "IIRC, that syntax was introduces in Ruby 1.9."}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 1, "last_activity_date": 1449048088, "last_edit_date": 1449048088, "creation_date": 1449043435, "answer_id": 34037602, "question_id": 34037513, "link": "https://stackoverflow.com/questions/34037513/how-to-select-hashes-from-array-of-hashes-that-appears-more-than-2-times-by-a-sp/34037602#34037602", "title": "How to select hashes from array of hashes that appears more than 2 times by a specified key", "body": "<p>Just another way.</p>\n\n<pre><code>companies.group_by { |e| e[:code] }\n         .select { |_, v| v.size &gt; 1 }\n         .flat_map { |_, v| v }\n#=&gt; [{:code=&gt;10, :value=&gt;3}, {:code=&gt;10, :value=&gt;4}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1152, "user_id": 1579663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fc5b6c6724e4be36ec9a46d7e5e9eb0?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/1579663/raman"}, "is_accepted": false, "score": 1, "last_activity_date": 1449045819, "creation_date": 1449045819, "answer_id": 34038244, "question_id": 34037513, "link": "https://stackoverflow.com/questions/34037513/how-to-select-hashes-from-array-of-hashes-that-appears-more-than-2-times-by-a-sp/34038244#34038244", "title": "How to select hashes from array of hashes that appears more than 2 times by a specified key", "body": "<p>This code uses a n iterations instead of n^2 iterations:</p>\n\n<pre><code>companies = [{code: 10, value: 3}, {code: 3, value: 5}, {code: 10, value: 4}, {code: 5, value: 10}]\nfinal_value = []\ncompanies.each.with_object({}) do |c, hash|\n  hash[c[:code]] = [] if hash[c[:code]] == nil\n  hash[c[:code]] &lt;&lt; c\n  if hash[c[:code]].count == 2\n    final_value += hash[c[:code]]\n  elsif hash[c[:code]].count &gt; 2\n    final_value &lt;&lt; c\n  end\nend\n\nputs final_value\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1449049257, "post_id": 34038383, "comment_id": 55833513, "body": "You can omit the <code>_k</code> argument if you move the <code>.values</code> call before the <code>.select</code> call."}, {"owner": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1449049725, "post_id": 34038383, "comment_id": 55833818, "body": "Thanks for the suggestion, I&#39;ve implemented this change."}], "tags": [], "owner": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "is_accepted": true, "score": 2, "last_activity_date": 1449049669, "last_edit_date": 1449049669, "creation_date": 1449046310, "answer_id": 34038383, "question_id": 34037513, "link": "https://stackoverflow.com/questions/34037513/how-to-select-hashes-from-array-of-hashes-that-appears-more-than-2-times-by-a-sp/34038383#34038383", "title": "How to select hashes from array of hashes that appears more than 2 times by a specified key", "body": "<p>Here's another option:</p>\n\n<pre><code>companies.group_by{ |hsh| hsh[:code] }\n  .values\n  .select{ |val| val.count &gt; 1 }\n  .flatten\n\n#=&gt; [{:code=&gt;10, :value=&gt;3}, {:code=&gt;10, :value=&gt;4}]\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 34038383, "answer_count": 3, "score": 0, "last_activity_date": 1449049669, "creation_date": 1449043098, "question_id": 34037513, "link": "https://stackoverflow.com/questions/34037513/how-to-select-hashes-from-array-of-hashes-that-appears-more-than-2-times-by-a-sp", "title": "How to select hashes from array of hashes that appears more than 2 times by a specified key", "body": "<p>I want to select <code>companies</code> when their <code>code</code> appears more than 2 times.</p>\n\n<pre><code>companies = [{code: 10, value: 3}, {code: 3, value: 5}, {code: 10, value: 4}, {code: 5, value: 10}]\n\ncompanies.select{|c| companies.select{|c_inside| c_inside[:code] == c[:code]}.count &gt; 1 }\n=&gt; [{:code=&gt;10, :value=&gt;3}, {:code=&gt;10, :value=&gt;4}]\n</code></pre>\n\n<p>This code works, but it seems a bit redundant. Is there better way to write the function like this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "heroku", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 5211, "user_id": 101421, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/335fc20f7203bda8fdcd109410ad1683?s=128&d=identicon&r=PG", "display_name": "kostia", "link": "https://stackoverflow.com/users/101421/kostia"}, "is_accepted": false, "score": 0, "last_activity_date": 1449041935, "last_edit_date": 1495535428, "creation_date": 1449041935, "answer_id": 34037226, "question_id": 34037225, "link": "https://stackoverflow.com/questions/34037225/using-heroku-mongolab-with-mongoid-5/34037226#34037226", "title": "Using Heroku MongoLab with Mongoid 5", "body": "<p>While looking for this answer, I found either solutions for older versions of Mongoid or solutions that work with MongoHQ (the other Heroku mongoDB hosting solution).</p>\n\n<p>I ended up using <a href=\"https://stackoverflow.com/a/11247030/101421\">this answer</a> which demonstrated a way to do it with Mongoid 4 for MongoHQ. I adapted it to work with Mongoid 5 and MongoLab and ended up with the following:</p>\n\n<pre><code>&lt;% if ENV['MONGOLAB_URI'] %&gt;\n  &lt;% uri = URI.parse(ENV['MONGOLAB_URI']) %&gt;\nproduction:\n  clients:\n    default:\n      database: &lt;%= uri.path.sub('/','') %&gt;\n      hosts:\n        - &lt;%= uri.host %&gt;:&lt;%= uri.port %&gt;\n      options:\n        user: &lt;%= uri.user %&gt;\n        password: &lt;%= uri.password %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Hope that helps you.</p>\n"}], "owner": {"reputation": 5211, "user_id": 101421, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/335fc20f7203bda8fdcd109410ad1683?s=128&d=identicon&r=PG", "display_name": "kostia", "link": "https://stackoverflow.com/users/101421/kostia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449041935, "creation_date": 1449041935, "question_id": 34037225, "link": "https://stackoverflow.com/questions/34037225/using-heroku-mongolab-with-mongoid-5", "title": "Using Heroku MongoLab with Mongoid 5", "body": "<p>I have been learning Ruby on Rails lately and was using Heroku as a free production environment for learning. I got to the point I wanted to add MongoDB to my setup. I chose <a href=\"https://github.com/mongodb/mongoid\" rel=\"nofollow\">Mongoid 5</a> (the latest version right now) and MongoLab - which offers a free plan on Heroku.</p>\n\n<p>I got stumped configuring mongoid.yml because most of the answers I found on stackoverflow are outdated - talking about version 4, 3 or even 2.</p>\n\n<p>So after I found a solution that works, I decided to post it here, mostly as a way of documenting it. If you have a better way to configure mongoid.yml to work with MongoLab on Heroku, it will be more than welcome.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "function", "plot", "real-time"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1449042306, "post_id": 34037091, "comment_id": 55829653, "body": "chekout this <a href=\"http://blog.scoutapp.com/articles/2012/05/31/the-nuts-and-bolts-of-our-ruby-based-realtime-charts-solution\" rel=\"nofollow noreferrer\">blog</a> may help you."}, {"owner": {"reputation": 352, "user_id": 3272592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rq0op.jpg?s=128&g=1", "display_name": "ddnomad", "link": "https://stackoverflow.com/users/3272592/ddnomad"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1449064001, "post_id": 34037091, "comment_id": 55843115, "body": "@GaganGami as I understood, it&#39;s some kind of server sided resource monitor while I need a simple math plot. Yet thanks for an answer!"}], "owner": {"reputation": 352, "user_id": 3272592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rq0op.jpg?s=128&g=1", "display_name": "ddnomad", "link": "https://stackoverflow.com/users/3272592/ddnomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1449041303, "creation_date": 1449041303, "question_id": 34037091, "link": "https://stackoverflow.com/questions/34037091/real-time-function-ploting-using-ruby", "title": "Real time function ploting using ruby", "body": "<p>For my university assignment I need to plot (preferably in a real time second thread) a function where on every iteration I would get an 3 x-y pairs. What is the best library to do so? </p>\n\n<p>I tried <a href=\"http://amardaxini.github.io/rchart/line_plot_chart.html\" rel=\"nofollow\">rchart</a> gem but it's not a real time solution and also a need of creation Rdata object to add a points to is quite annoying. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1449048352, "post_id": 34037046, "comment_id": 55832965, "body": "@sawa : there is difference in <code>Digital Throttle,LLC</code>(example) and <code>Digital Throttle LLC</code> (expected)"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1449048824, "post_id": 34037046, "comment_id": 55833247, "body": "@sawa It should remove commas in quoted strings."}, {"owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "edited": false, "score": 1, "creation_date": 1449052015, "post_id": 34037046, "comment_id": 55835282, "body": "Provide reason before downvote"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 2, "creation_date": 1449052500, "post_id": 34037046, "comment_id": 55835642, "body": "Can you please edit your question to explain why the comma in &quot;Throttle,LLC&quot; should be replaced with a space, but the other commas should not?"}, {"owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1449052575, "post_id": 34037046, "comment_id": 55835686, "body": "@WayneConrad I have to apply split method on that string (&quot;&quot;.split(&#39;,&#39;))"}], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1449050096, "post_id": 34037141, "comment_id": 55834069, "body": "You do not need to repeat this call. <code>gsub</code> does this implicitly. That&#39;s what the <code>g</code> stands for."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1449050160, "post_id": 34037141, "comment_id": 55834114, "body": "@pramod: The solution proposed by sschmeck returns the modified copy of the string. If you want to change the variable <code>x</code> itself, use <code>gsub!</code> instead of <code>gsub</code>."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1449050169, "post_id": 34037141, "comment_id": 55834123, "body": "@user1934428 There is a problem when the additional comma is part of the captures. Therefore you have to repeat."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1449063449, "post_id": 34037141, "comment_id": 55842726, "body": "You are right .... this would occur, if we have more than one comma in a quoted string. In this case, I would write it like this: <code>x.gsub(&#47;(\\&quot;.*?),(.*?\\&quot;)&#47;) { |m| m.gsub(&#47;,&#47;,&#39;&#39;) }</code>. This would capture the quoted parts, and then have undergo each one a second substitution."}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": true, "score": -1, "last_activity_date": 1449041937, "last_edit_date": 1449041937, "creation_date": 1449041572, "answer_id": 34037141, "question_id": 34037046, "link": "https://stackoverflow.com/questions/34037046/remove-comma-from-sub-string/34037141#34037141", "title": "Remove comma from sub string", "body": "<p>You can use <code>gsub()</code> for your example.</p>\n\n<pre><code>x.gsub(/(\\\".*?),(.*?\\\")/, '\\1 \\2')\n</code></pre>\n\n<p>For more than one comma between the quotes you can repeat this call until the values doesn't change anymore.</p>\n"}], "owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "accepted_answer_id": 34037141, "answer_count": 1, "score": -2, "last_activity_date": 1449041937, "creation_date": 1449041092, "question_id": 34037046, "link": "https://stackoverflow.com/questions/34037046/remove-comma-from-sub-string", "title": "Remove comma from sub string", "body": "<p>I have to eliminate comma from a substring of a string using gsub . Here is the example sting.</p>\n\n<pre><code>\"2015-12-01,20615715,93801,\\\"Digital Throttle,LLC\\\",176333,Hemmings Motor News,300x600,180\"\n</code></pre>\n\n<p>So the expected output should be</p>\n\n<pre><code>\"2015-12-01,20615715,93801,\\\"Digital Throttle LLC\\\",176333,Hemmings Motor News,300x600,180\"\n</code></pre>\n\n<p>Please share your thoughts.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-4", "nested-attributes"], "answers": [{"tags": [], "owner": {"reputation": 923, "user_id": 4571024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e0e628ebf7d0183680a8482bd76e94c?s=128&d=identicon&r=PG", "display_name": "richfisher", "link": "https://stackoverflow.com/users/4571024/richfisher"}, "is_accepted": false, "score": 4, "last_activity_date": 1449034804, "creation_date": 1449034804, "answer_id": 34035665, "question_id": 34035604, "link": "https://stackoverflow.com/questions/34035604/rails-4-nested-model-how-to-create-record-using-json-data/34035665#34035665", "title": "Rails 4 nested model: How to create record using json data", "body": "<p>from </p>\n\n<pre><code>\"project\": {\n      \"name\": \"My Project Name\",\n      \"tasks\": [\n        {\"name\": \"Design prototype\"},\n        {\"name\": \"Home page UI  prototype\"},\n        {\"name\": \"Other Miscellaneous task\"}\n     ]\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>\"project\": {\n      \"name\": \"My Project Name\",\n      \"tasks_attributes\": [\n        {\"name\": \"Design prototype\"},\n        {\"name\": \"Home page UI  prototype\"},\n        {\"name\": \"Other Miscellaneous task\"}\n     ]\n}\n</code></pre>\n\n<p>in controller</p>\n\n<pre><code>project_params = params.require(:project).permit(:name, tasks_attributes: [:name])\nProject.new(project_params)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 754, "user_id": 3506853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc12fa793f4d13924e0cfef39d4bd9cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3506853", "link": "https://stackoverflow.com/users/3506853/user3506853"}, "is_accepted": false, "score": -2, "last_activity_date": 1449037480, "creation_date": 1449037480, "answer_id": 34036198, "question_id": 34035604, "link": "https://stackoverflow.com/questions/34035604/rails-4-nested-model-how-to-create-record-using-json-data/34036198#34036198", "title": "Rails 4 nested model: How to create record using json data", "body": "<p>On project new form page do this:-</p>\n\n<pre><code>&lt;%= form_for @project do |f| %&gt;\n    &lt;%= f.fields_for :tasks do |task| %&gt;\n        &lt;%= task.text_field :name %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Project controller:-</p>\n\n<pre><code>def new\n    @project = Project.new\n    @project.tasks.build\nend\n\ndef create\n    @project = Project.new(project_params)\n    if @project.save\n        redirect_to success_path\n    else\n        render 'new'\n    end\nend\n\nprivate\ndef project_params\n    params.require(:project).permit(:name, tasks_attributes: [:id, :name])\nend\n</code></pre>\n\n<p>Also, attr_accessible is removed from Rails 4. In Rails 4 We need to permit attributes in controller like \"project_params\" method in project cntroller.</p>\n"}], "owner": {"reputation": 331, "user_id": 1324914, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/LiVso.jpg?s=128&g=1", "display_name": "Nilay Anand", "link": "https://stackoverflow.com/users/1324914/nilay-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449037480, "creation_date": 1449034413, "last_edit_date": 1449035629, "question_id": 34035604, "link": "https://stackoverflow.com/questions/34035604/rails-4-nested-model-how-to-create-record-using-json-data", "title": "Rails 4 nested model: How to create record using json data", "body": "<p>I have nested model like following:</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  has_many :tasks\n  accepts_nested_attributes_for :tasks\nend\n\nclass Project::Task &lt; ActiveRecord::Base\n  attr_accessible :task_id, :name\n  belongs_to :Project\nend\n</code></pre>\n\n<p>I have json data coming from outside:</p>\n\n<pre><code>\"project\": {\n      \"name\": \"My Project Name\",\n      \"tasks\": [\n        {\"name\": \"Design prototype\"},\n        {\"name\": \"Home page UI  prototype\"},\n        {\"name\": \"Other Miscellaneous task\"}\n     ]\n}\n</code></pre>\n\n<p>How can I create controller in Rails 4 which receives above json data as POST vars and store it in DB?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "helper"], "answers": [{"comments": [{"owner": {"reputation": 1516, "user_id": 1504931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8ad610b198817e7df2399b06f36443e?s=128&d=identicon&r=PG", "display_name": "daslicious", "link": "https://stackoverflow.com/users/1504931/daslicious"}, "edited": false, "score": 0, "creation_date": 1449034631, "post_id": 34035362, "comment_id": 55826483, "body": "yeah, even <code>def num_to_phone(phone_number, options={area_code: true})</code>"}, {"owner": {"reputation": 1516, "user_id": 1504931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8ad610b198817e7df2399b06f36443e?s=128&d=identicon&r=PG", "display_name": "daslicious", "link": "https://stackoverflow.com/users/1504931/daslicious"}, "edited": false, "score": 0, "creation_date": 1449282540, "post_id": 34035362, "comment_id": 55953082, "body": "no, because what you have wouldn&#39;t, for instance, let me add an extension to the output.  <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_phone\" rel=\"nofollow noreferrer\"><code>num_to_phone(phone_number, extension: 555)</code></a>"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 1516, "user_id": 1504931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8ad610b198817e7df2399b06f36443e?s=128&d=identicon&r=PG", "display_name": "daslicious", "link": "https://stackoverflow.com/users/1504931/daslicious"}, "edited": false, "score": 0, "creation_date": 1449286508, "post_id": 34035362, "comment_id": 55953869, "body": "I&#39;ve updated it to allow for other options to be passed into the custom method and merged with the default <code>{area_code: true}</code>"}, {"owner": {"reputation": 1516, "user_id": 1504931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8ad610b198817e7df2399b06f36443e?s=128&d=identicon&r=PG", "display_name": "daslicious", "link": "https://stackoverflow.com/users/1504931/daslicious"}, "edited": false, "score": 0, "creation_date": 1449393274, "post_id": 34035362, "comment_id": 55980820, "body": "that&#39;s better but you&#39;re forcing that option instead of gracefully falling back to it.  the code in the pastebin is probably a bad idea and method should be given a different name rather than calling super? <a href=\"http://pastebin.com/4EKhJnCg\" rel=\"nofollow noreferrer\">pastebin.com/4EKhJnCg</a>"}], "tags": [], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "is_accepted": false, "score": 1, "last_activity_date": 1449286473, "last_edit_date": 1449286473, "creation_date": 1449033103, "answer_id": 34035362, "question_id": 34035264, "link": "https://stackoverflow.com/questions/34035264/defaulting-area-code-to-true-for-number-to-phone-in-rails/34035362#34035362", "title": "Defaulting area_code to true for number_to_phone in rails", "body": "<p>One way to do this would be to write your own method that only takes a phone number argument and some options, merges the options with a default value for <code>:area_code</code>, and calls <code>#number_to_phone</code>. You could do this in <code>ApplicationHelper</code> like so:</p>\n\n<pre><code># application_helper.rb\n\ndef num_to_phone(phone_number, opts={})\n  opts = {area_code: true}.merge(opts)\n  number_to_phone(phone_number, opts)\nend\n</code></pre>\n\n<p>This way, you can just use your wrapper method without having to worry about trying to monkey patch the original one. </p>\n"}, {"comments": [{"owner": {"reputation": 1516, "user_id": 1504931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8ad610b198817e7df2399b06f36443e?s=128&d=identicon&r=PG", "display_name": "daslicious", "link": "https://stackoverflow.com/users/1504931/daslicious"}, "edited": false, "score": 0, "creation_date": 1449096438, "post_id": 34036337, "comment_id": 55863375, "body": "<code>number_to_phone</code> is primarily meant for formatting a number for display purposes.  Which is how I&#39;m using it.  <code>ActionView::Helpers::NumberHelper</code>"}], "tags": [], "owner": {"reputation": 754, "user_id": 3506853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc12fa793f4d13924e0cfef39d4bd9cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3506853", "link": "https://stackoverflow.com/users/3506853/user3506853"}, "is_accepted": false, "score": -1, "last_activity_date": 1449038041, "creation_date": 1449038041, "answer_id": 34036337, "question_id": 34035264, "link": "https://stackoverflow.com/questions/34035264/defaulting-area-code-to-true-for-number-to-phone-in-rails/34036337#34036337", "title": "Defaulting area_code to true for number_to_phone in rails", "body": "<p>1) You can set area_code: true through callback method like:-</p>\n\n<pre><code>Class Model\n    before_create :set_area_code_to_true\n\n    private\n    def set_area_code_to_true\n        self.area_code = true\n    end\nend\n</code></pre>\n\n<p>2) You can set default value of area code, when added a new attribute in table through migration like:-</p>\n\n<pre><code>rails g migration add_default_value_to_table\n\ndef change\n    change_column :table_name, :area_code, :boolean, default: true\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1516, "user_id": 1504931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8ad610b198817e7df2399b06f36443e?s=128&d=identicon&r=PG", "display_name": "daslicious", "link": "https://stackoverflow.com/users/1504931/daslicious"}, "is_accepted": true, "score": 0, "last_activity_date": 1449393754, "creation_date": 1449393754, "answer_id": 34115856, "question_id": 34035264, "link": "https://stackoverflow.com/questions/34035264/defaulting-area-code-to-true-for-number-to-phone-in-rails/34115856#34115856", "title": "Defaulting area_code to true for number_to_phone in rails", "body": "<p>I guess this is what I was looking for.</p>\n\n<pre><code># application_helper.rb\n\ndef formatted_phone(number, options={area_code: true})\n  number_to_phone(number, options)\nend\n</code></pre>\n"}], "owner": {"reputation": 1516, "user_id": 1504931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8ad610b198817e7df2399b06f36443e?s=128&d=identicon&r=PG", "display_name": "daslicious", "link": "https://stackoverflow.com/users/1504931/daslicious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 34115856, "answer_count": 3, "score": 0, "last_activity_date": 1449393754, "creation_date": 1449032491, "question_id": 34035264, "link": "https://stackoverflow.com/questions/34035264/defaulting-area-code-to-true-for-number-to-phone-in-rails", "title": "Defaulting area_code to true for number_to_phone in rails", "body": "<p>I'm using <code>NumberHelper</code>'s <code>number_to_phone</code> method many times in my app. It looks like this...</p>\n\n<pre><code>number_to_phone(phone_number, area_code: true)\n</code></pre>\n\n<p>But there's never a place where I want the <code>area_code</code> to be <code>false</code>.  How should I have it default to true?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "hash", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 2261346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f145ee3c618007eda2a6da0cdfe8dd19?s=128&d=identicon&r=PG", "display_name": "cherrypick", "link": "https://stackoverflow.com/users/2261346/cherrypick"}, "edited": false, "score": 0, "creation_date": 1449030424, "post_id": 34034897, "comment_id": 55825102, "body": "Thanks your answer. No error but don&#39;t pass data. I don&#39;t know @store_list return type."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1449030547, "last_edit_date": 1449030547, "creation_date": 1449030137, "answer_id": 34034897, "question_id": 34034558, "link": "https://stackoverflow.com/questions/34034558/rails-render-html-from-mysql2/34034897#34034897", "title": "Rails render html from mysql2", "body": "<h3>Problem</h3>\n\n<pre><code>undefined method `name' for #&lt;Hash:0x007f627f0cf808&gt;\n</code></pre>\n\n<p>Looking at your error message, <code>stores</code> is a Hash. You can't access the hash key/value using <code>.</code> operator.</p>\n\n<h3>Solution</h3>\n\n<p>You should be able to access the <code>name</code> of the store by using: <code>stores[:name]</code> or <code>stores['name]</code>. See the <a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-5B-5D\" rel=\"nofollow\">documentation</a> on how to retrieve the value of a key in a Hash. </p>\n\n<p>So, this should fix your problem:</p>\n\n<pre><code>&lt;% @store_list.each do |stores| %&gt;\n    &lt;tr&gt;\n      &lt;th&gt;&lt;%= stores['name'] %&gt; &lt;/th&gt;\n      &lt;td&gt;&lt;%= stores['address'] %&gt;&lt;/td&gt;\n      &lt;th&gt;&lt;%= stores['phone'] %&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 2261346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f145ee3c618007eda2a6da0cdfe8dd19?s=128&d=identicon&r=PG", "display_name": "cherrypick", "link": "https://stackoverflow.com/users/2261346/cherrypick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 34034897, "answer_count": 1, "score": 1, "last_activity_date": 1449031429, "creation_date": 1449028047, "last_edit_date": 1449031429, "question_id": 34034558, "link": "https://stackoverflow.com/questions/34034558/rails-render-html-from-mysql2", "title": "Rails render html from mysql2", "body": "<p>I want render html from mysql2. What is wrong?\nHere is Error code</p>\n\n<pre><code>NoMethodError in Admin::Stores#index\nShowing /home/rok/Development/Pan/app/views/admin/stores/index.html.erb \n</code></pre>\n\n<p>where line #15 raised:</p>\n\n<pre><code>undefined method `name' for #&lt;Hash:0x007f627f0cf808&gt;\nExtracted source (around line #15):\n\n    13   &lt;% @store_list.each do |stores| %&gt;\n    14      &lt;tr&gt;\n    15         &lt;th&gt;&lt;%= stores.name %&gt; &lt;/th&gt;\n    16         &lt;td&gt;&lt;%= stores.address %&gt;&lt;/td&gt;\n    17         &lt;th&gt;&lt;%= stores.phone %&gt;&lt;/th&gt;\n    18      &lt;/tr&gt;\n</code></pre>\n\n<p>Here is my view code<br>\nindex.html.erb</p>\n\n<pre><code>  &lt;% @store_list.each do |stores| %&gt;\n  &lt;tr&gt;\n     &lt;th&gt;&lt;%= stores.name %&gt; &lt;/th&gt;\n     &lt;td&gt;&lt;%= stores.address %&gt;&lt;/td&gt;\n     &lt;th&gt;&lt;%= stores.phone %&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Here is my controller code</p>\n\n<pre><code>    class Admin::StoresController &lt; ApplicationController\n      $client = Mysql2::Client.new(:host =&gt; \"localhost\", :username =&gt; \"rok\", :password =&gt; \"xxxxxx@\", :database =&gt; \"Pan_development\")\n\n      def index\n        @store_list = $client.query('select * from stores')\n      end\n\n    end\n</code></pre>\n\n<p>my routes</p>\n\n<pre><code>namespace :admin do\n  resources :stores\nend\n</code></pre>\n\n<p>rake routes</p>\n\n<pre><code>admin_stores GET    /admin/stores(.:format)           admin/stores#index\n             POST   /admin/stores(.:format)           admin/stores#create\nnew_admin_store GET    /admin/stores/new(.:format)       admin/stores#new\nedit_admin_store GET    /admin/stores/:id/edit(.:format)  admin/stores#edit\nadmin_store GET    /admin/stores/:id(.:format)       admin/stores#show\n             PATCH  /admin/stores/:id(.:format)       admin/stores#update\n             PUT    /admin/stores/:id(.:format)       admin/stores#update\n             DELETE /admin/stores/:id(.:format)       admin/stores#destroy\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rbenv"], "answers": [{"comments": [{"owner": {"reputation": 1083, "user_id": 1450226, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c7c23329b9bc3b6d62c06673452e2410?s=128&d=identicon&r=PG", "display_name": "Scott Fister", "link": "https://stackoverflow.com/users/1450226/scott-fister"}, "edited": false, "score": 0, "creation_date": 1449082878, "post_id": 34050518, "comment_id": 55856118, "body": "Thanks for your comment! I got the error <code>&#47;Users&#47;scott&#47;.rbenv&#47;versions&#47;2.2.3&#47;lib&#47;ruby&#47;site_ruby&#47;2.2.0&#47;&zwnj;&#8203;rubygems&#47;core_ext&#47;ke&zwnj;&#8203;rnel_require.rb:54:i&zwnj;&#8203;n &#39;require&#39;: cannot load such file -- thor&#47;group (LoadError)</code> so I did <code>gem install thor</code> and now getting the same error but for <code>concurrent</code> which isn&#39;t installing easily. It looks like dependencies aren&#39;t installed, even though running <code>bundle install</code> inside the <code>rails</code> directory succeeds. Is there a fix?"}, {"owner": {"reputation": 1083, "user_id": 1450226, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c7c23329b9bc3b6d62c06673452e2410?s=128&d=identicon&r=PG", "display_name": "Scott Fister", "link": "https://stackoverflow.com/users/1450226/scott-fister"}, "edited": false, "score": 0, "creation_date": 1449146823, "post_id": 34050518, "comment_id": 55885753, "body": "I fixed it combining your solution with deleting the ruby version I had installed, reinstalling bundler and updating system gem files with <code>gem update --system</code>. Then when I ran <code>bundle install</code> inside the rails directory once more it properly installed all dependencies."}], "tags": [], "owner": {"reputation": 4253, "user_id": 812660, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dNqSt.png?s=128&g=1", "display_name": "Mark Locklear", "link": "https://stackoverflow.com/users/812660/mark-locklear"}, "is_accepted": true, "score": 1, "last_activity_date": 1449081689, "creation_date": 1449081689, "answer_id": 34050518, "question_id": 34033885, "link": "https://stackoverflow.com/questions/34033885/after-installing-ruby-2-2-3-with-rbenv-it-has-a-different-version/34050518#34050518", "title": "After installing ruby 2.2.3 with rbenv it has a different version", "body": "<p>Instead of <code>bundle exec railties/exe/rails new /parent-folder/api --api --edge</code> try <code>./rails/railties/exe/rails new myapp --edge --dev</code> where 'rails' is the rails git repo.</p>\n"}], "owner": {"reputation": 1083, "user_id": 1450226, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c7c23329b9bc3b6d62c06673452e2410?s=128&d=identicon&r=PG", "display_name": "Scott Fister", "link": "https://stackoverflow.com/users/1450226/scott-fister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 34050518, "answer_count": 1, "score": 3, "last_activity_date": 1449081689, "creation_date": 1449023542, "question_id": 34033885, "link": "https://stackoverflow.com/questions/34033885/after-installing-ruby-2-2-3-with-rbenv-it-has-a-different-version", "title": "After installing ruby 2.2.3 with rbenv it has a different version", "body": "<p>I'm trying to use Rails 5, which requires Ruby version >= 2.2.2.</p>\n\n<p>I installed 2.2.3 with <code>rbenv install 2.2.3</code> and set it global. When I check with <code>ruby -v</code> I get <code>ruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-darwin15]</code>.</p>\n\n<p>However when I run <code>bundle exec railties/exe/rails new /parent-folder/api --api --edge</code> I get the error:</p>\n\n<pre><code>Rails 5 requires Ruby 2.2.2 or newer.\n\nYou're running\n  ruby 2.1.1p76 (2014-02-24 revision 45161) [x86_64-darwin14.0]\n</code></pre>\n\n<p>If I explicitly set the local version to the exact version number <code>2.2.3p173</code> or <code>2.2.3</code> then it says <code>rbenv: version '2.2.3' is not installed</code> (or <code>2.2.3p173</code> accordingly).</p>\n\n<p>When I perform <code>rbenv install -l</code> to check available versions only <code>2.2.3</code> is listed, not the <code>2.2.3p173</code>.</p>\n\n<p>Don't understand how to get this to work.</p>\n\n<p>Side notes: I have updated ruby build, my $PATH has rbenv setup correctly, I don't have rvm installed.</p>\n"}, {"tags": ["arrays", "ruby", "indexing", "minimum"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1449029480, "post_id": 34033877, "comment_id": 55824844, "body": "In future, please boil your question down to its essentials. All the code you have given and your sample input are irrelevent.  You obtain an array <code>arr</code> of arrays (e.g., <code>[[0],[67],[4]]</code>), each of the latter containing a single integer. As I understand, your question is how you can convert <code>arr</code> to an array containing the integers from the inner arrays (i.e., <code>[0,67,4]</code>). How you obtained <code>arr</code> is irrelevant."}, {"owner": {"reputation": 23, "user_id": 5628314, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_sT0AKkSDo/AAAAAAAAAAI/AAAAAAAAADw/kpp22x25Fdo/photo.jpg?sz=128", "display_name": "Jo Den", "link": "https://stackoverflow.com/users/5628314/jo-den"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1449036344, "post_id": 34033877, "comment_id": 55827095, "body": "I&#39;m sorry Cary, if most of I&#39;ve written are irrelevant. I&#39;m just thinking that someone might just look at the code and point out how I obtained an array with integers in an array form. I&#39;ll ask clearly next time. Thanks for the pointers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1449038413, "post_id": 34033877, "comment_id": 55827936, "body": "No need to apologize. You may wish to look through this <a href=\"http://stackoverflow.com/help\">faq</a> when you have time."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1449044504, "post_id": 34033877, "comment_id": 55830688, "body": "I see. If you would like suggestions on how to restructure your code--both to produce the desired result and to make it more &quot;Ruby-like&quot; (sorry), you could edit your question to ask for that, and to supply the additional code that is needed (that in <code>Amatch</code>, at least the class definition for <code>Sellers</code>). In addition, it would be better to replace the code that constructs <code>ing_array</code> from user inputs with an example of what that array might look like (e.g., <code>ing_array = [&quot;Onion&quot;, &quot;Salt&quot;,..]</code>) and then show the array you want as the desired result that corresponds to that value of <code>ing_array</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1449044937, "post_id": 34033877, "comment_id": 55830902, "body": "Also, don&#39;t be too hasty to select an answer. If an answer does not address your actual question, clarify your question with an edit and possibly leave a comment on the answer. Once you&#39;ve selected an answer readers will naturally conclude that your question is the one that has been answered. Even if the answerer has interpreted your question correctly, selecting an answer may discourage other, possibly better, answers.  There&#39;s no rush. Many SO members wait at least a couple of hours--sometimes much longer--before applying the green checkmark."}, {"owner": {"reputation": 23, "user_id": 5628314, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_sT0AKkSDo/AAAAAAAAAAI/AAAAAAAAADw/kpp22x25Fdo/photo.jpg?sz=128", "display_name": "Jo Den", "link": "https://stackoverflow.com/users/5628314/jo-den"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1449046763, "post_id": 34033877, "comment_id": 55831998, "body": "Thanks Cary. Actually it&#39;s my first time joining in this kind of forum. It even took me half an hour just to post and compose that query because I don&#39;t know how everything works. So again thanks for entertaining my question. And of course for the tips."}], "answers": [{"tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1449025124, "creation_date": 1449025124, "answer_id": 34034123, "question_id": 34033877, "link": "https://stackoverflow.com/questions/34033877/how-can-i-return-the-index-of-the-minimum-integer-in-an-array/34034123#34034123", "title": "How can I return the index of the minimum integer in an array?", "body": "<p>If you want to collapse your sub-arrays, use the <code>flatten</code> method. <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-flatten\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Array.html#method-i-flatten</a></p>\n\n<pre><code>[[0],[67],[4]].flatten == [0,67,4]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5628314, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_sT0AKkSDo/AAAAAAAAAAI/AAAAAAAAADw/kpp22x25Fdo/photo.jpg?sz=128", "display_name": "Jo Den", "link": "https://stackoverflow.com/users/5628314/jo-den"}, "edited": false, "score": 0, "creation_date": 1449036740, "post_id": 34034577, "comment_id": 55827236, "body": "I can&#39;t sort it because what I need is the given position of the smallest value since it will be used to extract the corresponding element in another array. Anyway, I have discovered that the values from &#39;y = rating_arr.each.with_index.find_all{|a, i| a == rating_arr.min }.map{|a, b| b}&#39; is an array. So what I&#39;ve been doing is wrong, plugging an array inside an array. Thanks for your time!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1449049301, "post_id": 34034577, "comment_id": 55833541, "body": "Jo, that will do it. You could also write, <code>min_rating = rating_arr.min; rating_arr.each_index.select { |i| rating_arr[I] = min_rating }</code>. <code>Array#select</code>. has the same effect as <code>Enumerable#find_all</code> (aka <code>Enumerable#select</code>)."}], "tags": [], "owner": {"reputation": 11, "user_id": 5628512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed38a0cb6b72cd1bcd003943eced51ca?s=128&d=identicon&r=PG&f=1", "display_name": "Witold Krak", "link": "https://stackoverflow.com/users/5628512/witold-krak"}, "is_accepted": false, "score": 1, "last_activity_date": 1449028107, "creation_date": 1449028107, "answer_id": 34034577, "question_id": 34033877, "link": "https://stackoverflow.com/questions/34033877/how-can-i-return-the-index-of-the-minimum-integer-in-an-array/34034577#34034577", "title": "How can I return the index of the minimum integer in an array?", "body": "<p>I'm not sure if I understood You correctly. \nIf you want to get index of the smalleest integer in the array You can simply sort it. </p>\n\n<blockquote>\n  <p>array=[2,9,90,345]<br>\n  array.sort<br>\n  => [2, 9, 90, 345]</p>\n</blockquote>\n\n<p>In this case the lowest integer would have always an index=0 </p>\n\n<p>When you have array=[2,3,4] it is already numeric:<br></p>\n\n<blockquote>\n  <p>array[0].class<br>\n  => Fixnum</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 5628314, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_sT0AKkSDo/AAAAAAAAAAI/AAAAAAAAADw/kpp22x25Fdo/photo.jpg?sz=128", "display_name": "Jo Den", "link": "https://stackoverflow.com/users/5628314/jo-den"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1449034941, "creation_date": 1449023484, "last_edit_date": 1449034941, "question_id": 34033877, "link": "https://stackoverflow.com/questions/34033877/how-can-i-return-the-index-of-the-minimum-integer-in-an-array", "title": "How can I return the index of the minimum integer in an array?", "body": "<p>I'm returning the index of the smallest integer in an array. I found a solution from this forum. Here is what I did:</p>\n\n<pre><code>require 'amatch'\ninclude Amatch\n\ningredients_arr = [\n  \"All purpose\", \"Ammoniaco\", \"Assorted sprinkles\", \"Baking Powder\",\n  \"Baking soda\", \"Banana\", \"Banana flavor\", \"Bread improver\", \"Brown Sugar\",\n  \"Buko pandan flavor\", \"Butter\", \"Butter flavor\", \"Butter oil subs\",\n  \"Cake Flour\", \"Cake emulsi\\nfier\", \"Canyon baking powder\", \"Cheese\",\n  \"Chiffon oil\", \"Choco flavor\", \"Choco spri\\nnkles\", \"Cocoa (imp)\",\n  \"Cocoa (loc)\", \"Coconut\", \"Condensada\", \"Cooking\\nOil\", \"\\n    Corn Starch\",\n  \"Dessicated\", \"Dutch choco fudge premium\", \"Dutch cocoa premium\", \"Egg\",\n  \"Evaporad\\n    a (B)\", \"Evaporada (S)\", \"Evaporadaorated\\n(B)\", \"First Class\",\n  \"Food color\", \"Glucose\", \"Go\\n    ld coin\", \"Heart sprinkles\", \"LPG\", \"Lard\",\n  \"Linga\", \"Margarine\", \"Mocha flavor\", \"Mongo paste red\", \"Onion\", \"Ovalet\",\n  \"Powdered sugar\", \"Rhum\", \"Royal\", \"Salt\", \"Sibuyas\", \"Skim milk (h-end)\",\n  \"Skim milk (l-end)\", \"\\n    Star sprinkles\", \"Strawberry flavor\",\n  \"Styro (l. plan)\", \"Super syrup\", \"Taba\", \"Tartar\", \"\\n    Third Class\",\n  \"Ube Paste\", \"Ube flavor\", \"Vanilla\", \"Vanilla 1G\", \"Vivid icing\",\n  \"Wash Sugar\", \"Water\", \"White Sugar\"\n]\ni, ingredient = 1, \"Flour\"\ning_array = Array.new\nuntil ingredient == \"\"\n  puts \"Enter ingredient #{i}: \"\n  ingredient = gets.chomp\n  ing_array &lt;&lt; ingredient\n  i += 1\nend\ning_array.pop\nm = Sellers.new(\"margarine\")\nno_words = ing_array.length\ning_index_arr = Array.new\ni = 0\nwhile i &lt; no_words\n  rating_arr = Array.new\n  m = Sellers.new(ing_array[i])\n  j = 0\n  while j &lt; ingredients_arr.length\n    x = m.match(ingredients_arr[j])\n    rating_arr &lt;&lt; x\n    j += 1\n  end\n  y = rating_arr.each.with_index.find_all{|a, i| a == rating_arr.min }.map{|a, b| b}\n  ing_index_arr &lt;&lt; y\n  i += 1\nend\ning_index_arr # =&gt; [[0], [67], [4]]\n</code></pre>\n\n<p>but I need something like this:</p>\n\n<pre><code>[0, 67, 4]\n</code></pre>\n\n<p>Hope someone can help me.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1449052783, "post_id": 34033838, "comment_id": 55835820, "body": "What does &quot;doesn&#39;t seem to properly convert&quot; mean?  Please show the input, the actual output, and what the output should be."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1449028942, "post_id": 34034064, "comment_id": 55824686, "body": "You don&#39;t have to split a string to iterate over its characters. That&#39;s what <code>each_char</code> is for"}], "tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1449024756, "creation_date": 1449024756, "answer_id": 34034064, "question_id": 34033838, "link": "https://stackoverflow.com/questions/34033838/takes-user-input-string-and-convert-it-to-secret-code-from-hash/34034064#34034064", "title": "Takes user input string and convert it to secret code from hash", "body": "<p>You're iterating through the hash <code>replace</code> rather than the <code>input</code> string. So, if your <code>input = \"HELLO\"</code>...</p>\n\n<pre><code>Input: HELLO\nInput: HVLLO\nInput: SVLLO\nInput: SVOOO\nInput: SVLLL   #changing back O to L\nInput: HVLLL   #changing back S to H\nInput: HELLL   #changing back V to E\n</code></pre>\n\n<p>Since you're iterating through <code>replace</code> you will end up switching letters more than once.</p>\n\n<p>My solution to this problem would have been to iterate through each of the letters in <code>input</code> and then replace them according to <code>replace</code>. In order to iterate through <code>input</code> I would have to split it and then eventually join it later into a string.</p>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1449029078, "post_id": 34034353, "comment_id": 55824724, "body": "Or: <code>output = input.each_char.with_object(&#39;&#39;) {|c, out| out &lt;&lt; replace[c] }</code>"}], "tags": [], "owner": {"reputation": 1152, "user_id": 1579663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fc5b6c6724e4be36ec9a46d7e5e9eb0?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/1579663/raman"}, "is_accepted": true, "score": 0, "last_activity_date": 1449026656, "creation_date": 1449026656, "answer_id": 34034353, "question_id": 34033838, "link": "https://stackoverflow.com/questions/34033838/takes-user-input-string-and-convert-it-to-secret-code-from-hash/34034353#34034353", "title": "Takes user input string and convert it to secret code from hash", "body": "<p>Try something like this:</p>\n\n<pre><code>replace = {\n  \"A\" =&gt; \"Z\",\n  \"B\" =&gt; \"Y\",\n  \"C\" =&gt; \"X\",\n  \"D\" =&gt; \"W\",\n  \"E\" =&gt; \"V\",\n  \"F\" =&gt; \"U\",\n  \"G\" =&gt; \"T\",\n  \"H\" =&gt; \"S\",\n  \"I\" =&gt; \"R\",\n  \"J\" =&gt; \"Q\",\n  \"K\" =&gt; \"P\",\n  \"L\" =&gt; \"O\",\n  \"M\" =&gt; \"N\",\n  \"N\" =&gt; \"M\",\n  \"O\" =&gt; \"L\",\n  \"P\" =&gt; \"K\",\n  \"Q\" =&gt; \"K\",\n  \"R\" =&gt; \"I\",\n  \"S\" =&gt; \"H\",\n  \"T\" =&gt; \"G\",\n  \"U\" =&gt; \"F\",\n  \"V\" =&gt; \"E\",\n  \"W\" =&gt; \"D\",\n  \"X\" =&gt; \"C\",\n  \"Y\" =&gt; \"B\",\n  \"Z\" =&gt; \"A\"\n}\n\nputs \"Time to decipher some code: \"\ninput = gets.chomp.upcase\n\noutput = \"\"\ninput.each_char do |c|\n    output &lt;&lt; replace[c]\nend\nputs output\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1449037015, "post_id": 34035754, "comment_id": 55827340, "body": "It works fine for single word but what about none existing keys or white space? anyways 1+"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1449037197, "post_id": 34035754, "comment_id": 55827413, "body": "@GaganGami Good point. I did&#39;t assume such characters. I fixed it."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1449037694, "post_id": 34035754, "comment_id": 55827616, "body": "now it looks more pretty. I wish I could upvote more then 1 time. :D"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1449037285, "last_edit_date": 1449037285, "creation_date": 1449035297, "answer_id": 34035754, "question_id": 34033838, "link": "https://stackoverflow.com/questions/34033838/takes-user-input-string-and-convert-it-to-secret-code-from-hash/34035754#34035754", "title": "Takes user input string and convert it to secret code from hash", "body": "<p>Your problem is not Ruby-specific. It is a very very very elementary (school) level algorithm mistake. You got your result because the replaced characters can later match to be replaced with something else.</p>\n\n<p>It is reminiscent of a mistake when one has variables <code>a = \"foo\"</code> and <code>b = \"bar\"</code> and is trying to switch their values, doing:</p>\n\n<pre><code>b = a\na = b\n</code></pre>\n\n<hr>\n\n<p>A typical way to do it correctly is:</p>\n\n<pre><code>input.gsub!(/./, Hash.new{|_, k| k}.merge(replace))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1449046962, "post_id": 34037760, "comment_id": 55832127, "body": "Yours is better than mine."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1449044060, "creation_date": 1449044060, "answer_id": 34037760, "question_id": 34033838, "link": "https://stackoverflow.com/questions/34033838/takes-user-input-string-and-convert-it-to-secret-code-from-hash/34037760#34037760", "title": "Takes user input string and convert it to secret code from hash", "body": "<pre><code>input = gets.chomp.upcase\np input.gsub(/[A-Z]/, replace)\n</code></pre>\n\n<p>The mysterious <code>/[A-Z]/</code> part is a regular expression, which searches a string for any uppercase character. <code>gsub</code> then replaces it with what's in the <code>replace</code> hash.</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 5628350, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-jTPova0j4l4/AAAAAAAAAAI/AAAAAAAABNo/_2lozpQXtIk/photo.jpg?sz=128", "display_name": "Neal Deters", "link": "https://stackoverflow.com/users/5628350/neal-deters"}, "is_accepted": false, "score": 0, "last_activity_date": 1449067954, "creation_date": 1449067954, "answer_id": 34045745, "question_id": 34033838, "link": "https://stackoverflow.com/questions/34033838/takes-user-input-string-and-convert-it-to-secret-code-from-hash/34045745#34045745", "title": "Takes user input string and convert it to secret code from hash", "body": "<p>Thanks everyone for all of the help! I was able to solve it using many of your posts, but Raman's seemed to be the simplest. </p>\n\n<pre><code>replace = {\n  \"A\" =&gt; \"Z\",\n  \"B\" =&gt; \"Y\",\n  \"C\" =&gt; \"X\",\n  \"D\" =&gt; \"W\",\n  \"E\" =&gt; \"V\",\n  \"F\" =&gt; \"U\",\n  \"G\" =&gt; \"T\",\n  \"H\" =&gt; \"S\",\n  \"I\" =&gt; \"R\",\n  \"J\" =&gt; \"Q\",\n  \"K\" =&gt; \"P\",\n  \"L\" =&gt; \"O\",\n  \"M\" =&gt; \"N\",\n  \"N\" =&gt; \"M\",\n  \"O\" =&gt; \"L\",\n  \"P\" =&gt; \"K\",\n  \"Q\" =&gt; \"K\",\n  \"R\" =&gt; \"I\",\n  \"S\" =&gt; \"H\",\n  \"T\" =&gt; \"G\",\n  \"U\" =&gt; \"F\",\n  \"V\" =&gt; \"E\",\n  \"W\" =&gt; \"D\",\n  \"X\" =&gt; \"C\",\n  \"Y\" =&gt; \"B\",\n  \"Z\" =&gt; \"A\"\n}\n\nputs \"Time to decipher some code: \"\ninput = gets.chomp.upcase\n\noutput = \"\"\ninput.each_char do |c|\n    output &lt;&lt; replace[c]\nend\n\nputs output\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5628350, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-jTPova0j4l4/AAAAAAAAAAI/AAAAAAAABNo/_2lozpQXtIk/photo.jpg?sz=128", "display_name": "Neal Deters", "link": "https://stackoverflow.com/users/5628350/neal-deters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 34034353, "answer_count": 5, "score": 0, "last_activity_date": 1449067954, "creation_date": 1449023136, "last_edit_date": 1449035638, "question_id": 34033838, "link": "https://stackoverflow.com/questions/34033838/takes-user-input-string-and-convert-it-to-secret-code-from-hash", "title": "Takes user input string and convert it to secret code from hash", "body": "<p>I was given a code challenge of taking a user input and converting that input using the following cipher information:</p>\n\n<pre><code>replace = {\n  \"A\" =&gt; \"Z\",\n  \"B\" =&gt; \"Y\",\n  \"C\" =&gt; \"X\",\n  \"D\" =&gt; \"W\",\n  \"E\" =&gt; \"V\",\n  \"F\" =&gt; \"U\",\n  \"G\" =&gt; \"T\",\n  \"H\" =&gt; \"S\",\n  \"I\" =&gt; \"R\",\n  \"J\" =&gt; \"Q\",\n  \"K\" =&gt; \"P\",\n  \"L\" =&gt; \"O\",\n  \"M\" =&gt; \"N\",\n  \"N\" =&gt; \"M\",\n  \"O\" =&gt; \"L\",\n  \"P\" =&gt; \"K\",\n  \"Q\" =&gt; \"K\",\n  \"R\" =&gt; \"I\",\n  \"S\" =&gt; \"H\",\n  \"T\" =&gt; \"G\",\n  \"U\" =&gt; \"F\",\n  \"V\" =&gt; \"E\",\n  \"W\" =&gt; \"D\",\n  \"X\" =&gt; \"C\",\n  \"Y\" =&gt; \"B\",\n  \"Z\" =&gt; \"A\"\n}\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>puts \"Time to decipher some code: \"\ninput = gets.chomp.upcase\nreplace.each do |k, v| \n  input.gsub!(k,v)\nend\nputs input\n</code></pre>\n\n<p>In my <code>each</code> block, my cipher doesn't seem to properly convert. Can anyone explain why this might be?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "messaging", "faye", "private-pub"], "comments": [{"owner": {"reputation": 1401, "user_id": 2723934, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/025a08b4c87bf427fffab6600dea6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "miler350", "link": "https://stackoverflow.com/users/2723934/miler350"}, "edited": false, "score": 1, "creation_date": 1449023121, "post_id": 34033517, "comment_id": 55822971, "body": "That gem hasn&#39;t been maintained in 3 years. You may want to look at more up-to-date solutions. The gem was written for rails 3, we&#39;re about to get rails 5."}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "reply_to_user": {"reputation": 1401, "user_id": 2723934, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/025a08b4c87bf427fffab6600dea6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "miler350", "link": "https://stackoverflow.com/users/2723934/miler350"}, "edited": false, "score": 0, "creation_date": 1449064388, "post_id": 34033517, "comment_id": 55843378, "body": "It works and solves the problem I needed it to. It still works at Rails 4 so I don&#39;t see the need in completely changing Gems, this is just a small extension to what is already there."}], "answers": [{"comments": [{"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1450213941, "post_id": 34235115, "comment_id": 56340803, "body": "So which application do I put this Code? Is it to go into the application which runs Faye, or should it go in the application with the PrivatePub client gem?"}], "tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": true, "score": 3, "last_activity_date": 1449883358, "creation_date": 1449883358, "answer_id": 34235115, "question_id": 34033517, "link": "https://stackoverflow.com/questions/34033517/how-can-i-find-the-number-of-current-subscriptions-using-privatepub-and-faye-in/34235115#34235115", "title": "How can I find the number of current subscriptions using PrivatePub and Faye in rails", "body": "<p>Since version 0.7, Faye includes an API for monitoring activity going on within the engine. This means you can attach event listeners to monitor the creation and destruction of client sessions, find out when clients subscribe and unsubscribe from channels, and watch published messages.</p>\n\n<p>You attach an event listener to your server like so:</p>\n\n<pre><code>var bayeux = new Faye.NodeAdapter({mount: '/faye', timeout: 45})\n\nbayeux.on('handshake', function(clientId) {\n  // event listener logic\n})\n</code></pre>\n\n<p>The available events are:</p>\n\n<ul>\n<li><p><strong>handshake [clientId]</strong> \u2013 Triggered when a new client connects and is issued with an ID.</p></li>\n<li><p><strong>subscribe [clientId, channel]</strong> \u2013 Triggered when a client subscribes to a channel. This does not fire if a /meta/subscribe message is received for a subscription that already exists.</p></li>\n<li><p><strong>unsubscribe [clientId, channel]</strong> \u2013 Triggered when a client unsubscribes from a channel. This can fire either because the client explicitly sent a /meta/unsubscribe message, or because its session was timed out by the server.</p></li>\n<li><p><strong>publish [clientId, channel, data]</strong> \u2013 Triggered when a non-/meta/** message is published. Includes the client ID of the publisher (which may be null), the channel the message was sent to and the data payload.</p></li>\n<li><p><strong>disconnect [clientId]</strong> \u2013 Triggered when a client session ends, either because it explicitly sent a /meta/disconnect message or because its session was timed out by the server.</p></li>\n</ul>\n\n<p>I hope that this helps </p>\n"}], "owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 34235115, "answer_count": 1, "score": 4, "last_activity_date": 1449883358, "creation_date": 1449020511, "last_edit_date": 1449880306, "question_id": 34033517, "link": "https://stackoverflow.com/questions/34033517/how-can-i-find-the-number-of-current-subscriptions-using-privatepub-and-faye-in", "title": "How can I find the number of current subscriptions using PrivatePub and Faye in rails", "body": "<p>I am using a ruby gem called <a href=\"https://github.com/ryanb/private_pub\" rel=\"noreferrer\">PrivatePub</a> and this uses <a href=\"https://github.com/jamesotron/faye-rails\" rel=\"noreferrer\">Faye</a> to offer PubSub messaging</p>\n\n<p>The PrivatePub gem offers a couple of view based helpers to subscribe / send a message to a particular topic. I am looking to extend PrivatePub to include an API call which will give me the ID of each of the current subscription objects connected to Faye. Can somebody explain how this can be achieved or help me find another way to work out all the current subscriptions from the PrivatePub api.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1449018365, "post_id": 34033125, "comment_id": 55821650, "body": "Works for me. Can you show the value of <code>query</code> at the top of the method?"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1449018526, "post_id": 34033125, "comment_id": 55821688, "body": "Try <code>statistic[:sell] &lt;&lt; q.total_sell.to_i</code>."}, {"owner": {"reputation": 63, "user_id": 3223239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1389273374/picture?type=large", "display_name": "Alessio.Bussolari", "link": "https://stackoverflow.com/users/3223239/alessio-bussolari"}, "edited": false, "score": 0, "creation_date": 1449018885, "post_id": 34033125, "comment_id": 55821789, "body": "already try this but overwrites the values every time"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1449019152, "post_id": 34033125, "comment_id": 55821863, "body": "Please show the output of <code>puts query.inspect</code> or similar (in text); not a screenshot of your app, as we don&#39;t know what you did to produce the screenshot."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1449019212, "post_id": 34033125, "comment_id": 55821881, "body": "@Gene: <code>Array#push</code> and <code>Array#&lt;&lt;</code> are almost identical, where one works the other should too (except for the valence of <code>push</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3223239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1389273374/picture?type=large", "display_name": "Alessio.Bussolari", "link": "https://stackoverflow.com/users/3223239/alessio-bussolari"}, "edited": false, "score": 0, "creation_date": 1449019388, "post_id": 34033295, "comment_id": 55821933, "body": "I see the problem, every times when i call the model I re-initialize the Hash for that i delete every times the old values.  Thanks !!! A lot !!! with your terminal screen I see my error !!!"}], "tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": true, "score": 1, "last_activity_date": 1449019413, "last_edit_date": 1449019413, "creation_date": 1449019111, "answer_id": 34033295, "question_id": 34033125, "link": "https://stackoverflow.com/questions/34033125/hash-with-array-rails-not-chain-value-but-delete/34033295#34033295", "title": "hash with array rails not chain value but delete", "body": "<p>I'll answer here because the comment section doesn't allow enough room. You're wrong about <code>&lt;&lt;</code>.  It ought to work fine.</p>\n\n<pre><code>$ irb\nirb(main):001:0&gt; s = Hash.new {|h, k| h[k] = [] }\n=&gt; {}\nirb(main):002:0&gt; s[:sell] &lt;&lt; 1\n=&gt; [1]\nirb(main):003:0&gt; s[:sell] &lt;&lt; 2\n=&gt; [1, 2]\nirb(main):004:0&gt; s[:sell]\n=&gt; [1, 2]\nirb(main):005:0&gt; s[:price]\n=&gt; []\n</code></pre>\n\n<p>But <code>push</code> should work, too.</p>\n\n<pre><code>irb(main):006:0&gt; s[:sell].push(3)\n=&gt; [1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3223239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1389273374/picture?type=large", "display_name": "Alessio.Bussolari", "link": "https://stackoverflow.com/users/3223239/alessio-bussolari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 34033295, "answer_count": 1, "score": 0, "last_activity_date": 1449019413, "creation_date": 1449017947, "last_edit_date": 1449018941, "question_id": 34033125, "link": "https://stackoverflow.com/questions/34033125/hash-with-array-rails-not-chain-value-but-delete", "title": "hash with array rails not chain value but delete", "body": "<p>I've tried to insert some Values into this hash were every key is an array but when I print all result just the last value </p>\n\n<pre><code>def self.hash_builder(query)\n\n       statistic = Hash.new { |hash, key| hash[key] = [] }    \n\n          if !query.empty?\n\n            query.each do |q|\n\n              statistic[:sell].push(q.total_sell.to_i)\n              statistic[:price].push(q.total_price.to_f)\n\n            end\n          else\n            statistic[:sell].push(0)\n            statistic[:price].push(0.0)\n\n          end\n\n        return statistic\nend\n</code></pre>\n\n<p>I call this method after make a query, and I send to this the query with the new params, but every time i see inside this hash just the last query value</p>\n\n<p><strong>THIS IS THE RESULT</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/ez2Tx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ez2Tx.png\" alt=\"right output\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "production-environment", "formatter"], "comments": [{"owner": {"reputation": 481, "user_id": 1419464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FlZVa.jpg?s=128&g=1", "display_name": "LukeS", "link": "https://stackoverflow.com/users/1419464/lukes"}, "edited": false, "score": 1, "creation_date": 1449017779, "post_id": 34033018, "comment_id": 55821482, "body": "Looks like you call <code>config.log_formatter = CustomLogFormatter.new</code> in your production setup but the name of your Log Formatter isn&#39;t &quot;CustomLogFormatter&quot;"}, {"owner": {"reputation": 45, "user_id": 5628065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4042d9a74ca07f3d2865ae500a50f69e?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/5628065/jeff"}, "reply_to_user": {"reputation": 481, "user_id": 1419464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FlZVa.jpg?s=128&g=1", "display_name": "LukeS", "link": "https://stackoverflow.com/users/1419464/lukes"}, "edited": false, "score": 0, "creation_date": 1449179600, "post_id": 34033018, "comment_id": 55907245, "body": "@LukeS Oh yes sorry, I was trying to make it call a custom method instead of overriding the default one, so that line should be: config.log_formatter = Logger::Formatter.new"}], "answers": [{"comments": [{"owner": {"reputation": 1585, "user_id": 948899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40aec85116bcb1ef142fbd8722f88bb?s=128&d=identicon&r=PG", "display_name": "Artem Vasiliev", "link": "https://stackoverflow.com/users/948899/artem-vasiliev"}, "edited": false, "score": 0, "creation_date": 1460560375, "post_id": 36601844, "comment_id": 60802345, "body": "And if you&#39;re on Heroku that&#39;s a different story: <a href=\"https://github.com/heroku/rails_12factor/issues/24\" rel=\"nofollow noreferrer\">github.com/heroku/rails_12factor/issues/24</a> In that case you&#39;ll also have to remove the rails_12factor gem to make custom formatting work."}], "tags": [], "owner": {"reputation": 1585, "user_id": 948899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40aec85116bcb1ef142fbd8722f88bb?s=128&d=identicon&r=PG", "display_name": "Artem Vasiliev", "link": "https://stackoverflow.com/users/948899/artem-vasiliev"}, "is_accepted": false, "score": 1, "last_activity_date": 1460558401, "creation_date": 1460558401, "answer_id": 36601844, "question_id": 34033018, "link": "https://stackoverflow.com/questions/34033018/rails-log-formatter-works-in-development-but-not-production/36601844#36601844", "title": "Rails Log Formatter works in Development, but not Production", "body": "<p>Looks like you just got a naming clash - Logger::Formatter class is included in Ruby 2.0+, and it got loaded instead of your custom class due to different class loading strategy in production. Just rename your class to e.g. MyLoggerFormatter and it should work:</p>\n\n<pre><code>class MyLoggerFormatter\n  def call(severity, time, progname, msg)\n    \"#{Time.now.strftime(\"%F %T\").to_s} #{severity} #{msg}\\n\"\n  end\nend\n\nRails.application.configure do\n  config.logger = ActiveSupport::Logger.new(STDOUT)\n  config.log_level = :info\n  config.log_formatter = MyLoggerFormatter.new\nend\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5628065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4042d9a74ca07f3d2865ae500a50f69e?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/5628065/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3817, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1460558401, "creation_date": 1449017283, "last_edit_date": 1449179659, "question_id": 34033018, "link": "https://stackoverflow.com/questions/34033018/rails-log-formatter-works-in-development-but-not-production", "title": "Rails Log Formatter works in Development, but not Production", "body": "<p>I am making my Rails logger more detailed by adding Time, User ID, and Severity to each log statement. </p>\n\n<p>I created a new file in config/initializers called log_formatter.rb to format the logging messages. Here is the file:</p>\n\n<pre><code>class Logger::Formatter\n  def call(severity, time, progname, msg)\n    \"#{Time.now.strftime(\"%F %T\").to_s} #{severity} #{msg}\\n\"\n  end\nend\n\nRails.configuration.log_tags = [\n  proc do |req|\n    if req.session[\"warden.user.user.key\"].nil?\n      \"Anonym\"\n    else\n      \"uid:#{req.session[\"warden.user.user.key\"][0][0]}\"\n    end\n  end\n]\n</code></pre>\n\n<p>My config/environments/development.rb contains:</p>\n\n<pre><code>Rails.application.configure do\n  config.log_level = :info\n  config.log_formatter = Logger::Formatter.new\nend\n</code></pre>\n\n<p>This works perfectly when I am in development and I get an output to the log file of:</p>\n\n<pre><code>2015-12-02 00:33:30 INFO [uid:1] &lt;Message&gt;\n</code></pre>\n\n<p>My config/environments/production.rb contains:</p>\n\n<pre><code>require_relative './../initializers/log_formatter'\nRails.application.configure do\n  config.logger = ActiveSupport::Logger.new(STDOUT)\n  config.log_level = :info\n  config.log_formatter = Logger::Formatter.new\nend\n</code></pre>\n\n<p>However, while in production, the only message I get is from the log_tags</p>\n\n<pre><code>[uid:1] &lt;Message&gt;\n</code></pre>\n\n<p>I am not sure what is being changed here, but it looks like the function 'call' is not being called when the logger is being formatted. I have been working on this issue for about a week now, and I would really appreciate the help!</p>\n\n<p>Let me know if you have any clarification questions, and thank you very much!</p>\n"}, {"tags": ["ruby", "algorithm", "nlp"], "comments": [{"owner": {"reputation": 16822, "user_id": 560073, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-A_vJq0ilPI8/AAAAAAAAAAI/AAAAAAAAAJI/dKesA-ExUzA/photo.jpg?sz=128", "display_name": "Linus Oleander", "link": "https://stackoverflow.com/users/560073/linus-oleander"}, "edited": false, "score": 0, "creation_date": 1449014445, "post_id": 34032509, "comment_id": 55820473, "body": "What&#39;s the use case?"}, {"owner": {"reputation": 1801, "user_id": 4701050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2be1035e138471971112dd021ba6aae9?s=128&d=identicon&r=PG", "display_name": "pthamm", "link": "https://stackoverflow.com/users/4701050/pthamm"}, "reply_to_user": {"reputation": 16822, "user_id": 560073, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-A_vJq0ilPI8/AAAAAAAAAAI/AAAAAAAAAJI/dKesA-ExUzA/photo.jpg?sz=128", "display_name": "Linus Oleander", "link": "https://stackoverflow.com/users/560073/linus-oleander"}, "edited": false, "score": 0, "creation_date": 1449014533, "post_id": 34032509, "comment_id": 55820495, "body": "I&#39;m building a chat bot and I want to be able to parse out numeric responses. For example, I ask <code>&quot;How old are you?&quot;</code> and the user may say  <code>&quot;26&quot;</code> or <code>&quot;twenty-six&quot;</code> and I the bot to understand it as <code>26.0</code>"}, {"owner": {"reputation": 159, "user_id": 2468417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab16aa8afebfcdb5520915e1c0acc30?s=128&d=identicon&r=PG", "display_name": "Viraj Shah", "link": "https://stackoverflow.com/users/2468417/viraj-shah"}, "edited": false, "score": 0, "creation_date": 1449014819, "post_id": 34032509, "comment_id": 55820576, "body": "or just use a splitting dictionary"}, {"owner": {"reputation": 159, "user_id": 2468417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab16aa8afebfcdb5520915e1c0acc30?s=128&d=identicon&r=PG", "display_name": "Viraj Shah", "link": "https://stackoverflow.com/users/2468417/viraj-shah"}, "edited": false, "score": 0, "creation_date": 1449014842, "post_id": 34032509, "comment_id": 55820584, "body": "&quot;one&quot; - &gt; 1;    &quot;two&quot; - &gt; 2;    ....."}, {"owner": {"reputation": 159, "user_id": 2468417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab16aa8afebfcdb5520915e1c0acc30?s=128&d=identicon&r=PG", "display_name": "Viraj Shah", "link": "https://stackoverflow.com/users/2468417/viraj-shah"}, "edited": false, "score": 0, "creation_date": 1449014957, "post_id": 34032509, "comment_id": 55820619, "body": "then when a number is greater than hundred just append two zeros; for example: &quot;one hundred&quot; will return 1 (because of the dictionary matching), and the +&quot;00&quot; because we replace a &quot;hundred&quot; with two zeros... which will return 100"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1449017032, "post_id": 34032509, "comment_id": 55821243, "body": "What would be some sample input for say... 126?"}, {"owner": {"reputation": 16822, "user_id": 560073, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-A_vJq0ilPI8/AAAAAAAAAAI/AAAAAAAAAJI/dKesA-ExUzA/photo.jpg?sz=128", "display_name": "Linus Oleander", "link": "https://stackoverflow.com/users/560073/linus-oleander"}, "edited": false, "score": 0, "creation_date": 1449017148, "post_id": 34032509, "comment_id": 55821274, "body": "I would suggest using a lexer/parser for this. I would recommend <a href=\"https://github.com/chriswailes/RLTK\" rel=\"nofollow noreferrer\">Ruby Language Tool kit</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1449017242, "post_id": 34032998, "comment_id": 55821307, "body": "Great answer! Totally outshines mine, i&#39;m deleting it! +1. I think that you could improve your answer with some comments saying how it works step by step though. Definitely would help me with my learning."}, {"owner": {"reputation": 16822, "user_id": 560073, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-A_vJq0ilPI8/AAAAAAAAAAI/AAAAAAAAAJI/dKesA-ExUzA/photo.jpg?sz=128", "display_name": "Linus Oleander", "link": "https://stackoverflow.com/users/560073/linus-oleander"}, "edited": false, "score": 0, "creation_date": 1449017544, "post_id": 34032998, "comment_id": 55821406, "body": "Use <code>inject</code> instead of <code>each</code> as that don&#39;t have any side-effects."}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": true, "score": 4, "last_activity_date": 1547844139, "last_edit_date": 1547844139, "creation_date": 1449017175, "answer_id": 34032998, "question_id": 34032509, "link": "https://stackoverflow.com/questions/34032509/how-to-convert-an-english-string-of-a-number-into-a-float-e-g-twenty-six-26/34032998#34032998", "title": "How to convert an English string of a number into a float (e.g. &quot;twenty-six&quot;=&gt;26.0)", "body": "<p>This is a solution that just looks for number words in the input string and adds them together. This works in English for ages &lt; 100.</p>\n\n<pre><code>def parse(string)\n  dict = {\n    half: 0.5, one: 1, two: 2, three: 3, four: 4,\n    five: 5, six: 6, seven: 7, eight: 8, nine: 9,\n    ten: 10, eleven: 11, twelve: 12, thirteen: 13,\n    fourteen: 14, fifteen: 15, sixteen: 16,\n    seventeen: 17, eighteen: 18, nineteen: 19,\n    twenty: 20, thirty: 30, forty: 40, fifty: 50,\n    sixty: 60, seventy: 70, eighty: 80, ninety: 90\n  }\n\n  age = 0.0\n\n  dict.each do |s, n|\n    # Scans string for each number name, adding numeric value if found\n    age += n if string[/\\b#{s}\\b/]\n  end\n\n  return age\nend\n\nparse \"six\"              # =&gt; 6.0\nparse \"twenty-five\"      # =&gt; 25.0\nparse \"three and a half\" # =&gt; 3.5\nparse \"four and twenty\"  # =&gt; 24.0\n</code></pre>\n"}], "owner": {"reputation": 1801, "user_id": 4701050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2be1035e138471971112dd021ba6aae9?s=128&d=identicon&r=PG", "display_name": "pthamm", "link": "https://stackoverflow.com/users/4701050/pthamm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1449031148, "accepted_answer_id": 34032998, "answer_count": 1, "score": 1, "last_activity_date": 1547844139, "creation_date": 1449014012, "last_edit_date": 1451079172, "question_id": 34032509, "link": "https://stackoverflow.com/questions/34032509/how-to-convert-an-english-string-of-a-number-into-a-float-e-g-twenty-six-26", "closed_reason": "Needs details or clarity", "title": "How to convert an English string of a number into a float (e.g. &quot;twenty-six&quot;=&gt;26.0)", "body": "<p>I'm building a chatbot and I want to be able to parse strings representing numerical amounts that represent a human age. When I ask <code>\"How old are you?\"</code> the user should be able to input <code>\"26\"</code> or <code>\"twenty-six\"</code> and have the bot understand it as <code>26.0</code>. The method should handle converting fractions to decimals.</p>\n\n<p>Examples:</p>\n\n<pre><code>parse(\"six\")              # =&gt; 6.0\nparse(\"twenty-five\")      # =&gt; 25.0\nparse(\"three and a half\") # =&gt; 3.5\n</code></pre>\n\n<p>Is there a gem that handles this in Ruby already, or is it easy enough to write a simple <code>parse</code> method?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 4054, "user_id": 3626701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401db4625e42a7797db528d1f7ddcb00?s=128&d=identicon&r=PG", "display_name": "Oss", "link": "https://stackoverflow.com/users/3626701/oss"}, "is_accepted": false, "score": 0, "last_activity_date": 1449017840, "last_edit_date": 1449017840, "creation_date": 1449014569, "answer_id": 34032592, "question_id": 34032322, "link": "https://stackoverflow.com/questions/34032322/sum-operation-on-attributes-of-children-of-multiple-parent-records/34032592#34032592", "title": "SUM operation on attributes of children of multiple parent records", "body": "<p>This creates a number of queries equal to the number of products you have due to the <code>sum</code> query. Here is a way I though of that will reduce database queries.</p>\n\n<pre><code>map = Sale.joins(:product)\n  .group(\"products.id\", \"products.quantity\").sum(:quantity).to_a\n</code></pre>\n\n<p>Which will produce an array similar to </p>\n\n<pre><code>[[[1,20],30], [[2,45], 20]]\n</code></pre>\n\n<p>this corresponds to <code>[[[product_id, product_quantity], sold_quantity ]]</code></p>\n\n<p>Now loop over this array and compare the values.</p>\n\n<pre><code>available = []\nmap.each do |item|\n  if item[0][1] &gt; item[1]\n    available &lt;&lt; item[0][0]\n  end\nend\n</code></pre>\n\n<p>Now that you have the <code>available</code> array populated, perform another query. </p>\n\n<pre><code>available = Product.where(id: available)\n</code></pre>\n\n<p>Now you got your same output in two queries instead of <code>Product.count (N)</code> number of queries. This solution can be inefficient sometimes but I will be updating it regularly if I had any ideas.</p>\n"}, {"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": true, "score": 3, "last_activity_date": 1449044155, "last_edit_date": 1449044155, "creation_date": 1449015828, "answer_id": 34032799, "question_id": 34032322, "link": "https://stackoverflow.com/questions/34032322/sum-operation-on-attributes-of-children-of-multiple-parent-records/34032799#34032799", "title": "SUM operation on attributes of children of multiple parent records", "body": "<p>Well you might try:</p>\n\n<pre><code>Product.where(\"products.quantity &gt; Coalesce((select sum(s.quantity) from sales s where s.product_id = products.id), 0)\")\n</code></pre>\n"}], "owner": {"reputation": 569, "user_id": 3727991, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cfcb571cef1157ec73a58c860f78da2c?s=128&d=identicon&r=PG&f=1", "display_name": "agustaf", "link": "https://stackoverflow.com/users/3727991/agustaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 34032799, "answer_count": 2, "score": 3, "last_activity_date": 1449044155, "creation_date": 1449013005, "last_edit_date": 1449018768, "question_id": 34032322, "link": "https://stackoverflow.com/questions/34032322/sum-operation-on-attributes-of-children-of-multiple-parent-records", "title": "SUM operation on attributes of children of multiple parent records", "body": "<p>I have this method in my Product model that does what I need:</p>\n\n<pre><code>def self.available\n  available = []\n  Product.all.each do |product|\n    if product.quantity &gt; product.sales.sum(:quantity)\n      available &lt;&lt; product\n    end\n  end\n  return available\nend\n</code></pre>\n\n<p>But, I am wondering if there is a more efficient way to do this, maybe with only one call to the database.</p>\n"}, {"tags": ["ruby", "chess"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "edited": false, "score": 0, "creation_date": 1449017873, "post_id": 34032411, "comment_id": 55821518, "body": "thanks for the great answer. Can you explain the purpose of the splat operator before the &#39;a&#39;?"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1449033736, "last_edit_date": 1449033736, "creation_date": 1449013418, "answer_id": 34032411, "question_id": 34032307, "link": "https://stackoverflow.com/questions/34032307/ruby-naming-square-objects-for-chess-grid/34032411#34032411", "title": "Ruby naming Square objects for chess grid", "body": "<p>For each square, you are (re-)assigning each values from <code>\"a1\"</code> to <code>\"h8\"</code> in turn, ending up assigning <code>\"h8\"</code>.</p>\n\n<p>To do it correctly, you can do like this:</p>\n\n<pre><code>class Board\n  Letters = (\"a\"..\"h\").to_a\n  Numbers = (\"1\"..\"8\").to_a\n  def initialize\n    @square_array = Array.new(64){Square.new}\n    assign_coordinates\n  end\n  def assign_coordinates\n    Letters.product(Numbers).zip(@square_array){|a, e| e.coordinates = a.join}\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1449013647, "creation_date": 1449013647, "answer_id": 34032445, "question_id": 34032307, "link": "https://stackoverflow.com/questions/34032307/ruby-naming-square-objects-for-chess-grid/34032445#34032445", "title": "Ruby naming Square objects for chess grid", "body": "<p>You want to do </p>\n\n<pre><code>@square_array[i].coordinates = \"#{x}#{n}\"\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 34032411, "answer_count": 2, "score": 0, "last_activity_date": 1449033736, "creation_date": 1449012923, "question_id": 34032307, "link": "https://stackoverflow.com/questions/34032307/ruby-naming-square-objects-for-chess-grid", "title": "Ruby naming Square objects for chess grid", "body": "<p>I am writing a Chess program in Ruby. I'm attempting to create a Board of 64 Square objects, which will keep track of <code>piece_on_square</code>, <code>x</code> position, <code>y</code> position, and <code>coordinates</code>. The <code>coordinates</code> variable will hold the letter-number combo of that particular space, such as 'a8' or 'a1'. However, I am having trouble generating these letter-number combinations, using my <code>#assign_coordinates</code> method. </p>\n\n<p>Here's what I have:</p>\n\n<h3>Square Class</h3>\n\n<pre><code>class Square\n  attr_accessor :piece_on_square, :x, :y, :coordinates\n  def initialize(piece_on_square=nil, x=nil, y=nil, coordinates=nil)\n    @piece_on_square = piece_on_square\n    @x = x\n    @y = y\n    @coordinates = coordinates\n  end\nend\n</code></pre>\n\n<h3>Board Class</h3>\n\n<pre><code>class Board\n  def initialize\n    @square_array = Array.new(64)\n    setup_new_board\n    assign_coordinates\n  end\n\n  def setup_new_board\n    @square_array.each_with_index do |n, index|\n      square_array[index] = Square.new\n    end\n  end\n\n  def assign_coordinates\n    letters = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n    numbers = [1, 2, 3, 4, 5, 6, 7, 8]\n    @square_array.each do |i|\n      letters.each do |x|\n        numbers.each do |n|\n          i.coordinates = \"#{x}#{n}\"\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>When I do this, <em>all</em> of the <code>coordinates</code> are listed as \"h8\". For example, when looking in IRB, <code>@square_array[0]</code> returns:</p>\n\n<p><code>=&gt; #&lt;Square:0x007fd74317a0a8 @piece_on_square=nil, @x=nil, @y=nil, @coordinates=\"h8\"&gt;</code></p>\n\n<p>What am I doing wrong? How can I properly create and name each of these Square objects? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1449012224, "post_id": 34032095, "comment_id": 55819614, "body": "1. Is it possible you have a number or ruby installations on the same machine (so you install a gem and it installs for one version and than you try to require it from a different Ruby version)? 2. Did you reinstall the gem after installing Ruby (try uninstalling and reinstalling)?"}, {"owner": {"reputation": 481, "user_id": 1419464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FlZVa.jpg?s=128&g=1", "display_name": "LukeS", "link": "https://stackoverflow.com/users/1419464/lukes"}, "edited": false, "score": 0, "creation_date": 1449018427, "post_id": 34032095, "comment_id": 55821659, "body": "Definitely looks like a ruby install issue. Uninstall everything. Install just one version (I recommend using rbenv to manage it, totally worth the extra step). Install the gems properly and retry."}], "owner": {"reputation": 1299, "user_id": 1130176, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3618314d500643b06b1b88c8671eb840?s=128&d=identicon&r=PG", "display_name": "user1130176", "link": "https://stackoverflow.com/users/1130176/user1130176"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1449012004, "creation_date": 1449012004, "question_id": 34032095, "link": "https://stackoverflow.com/questions/34032095/cannot-compile-ruby-2-1-require-cannot-load-such-file-rubygems-rb", "title": "cannot compile ruby 2.1+ `require&#39;: cannot load such file -- rubygems.rb", "body": "<p>I am not using rvm, this is for deploying to a server, I have tried downloading 2.1.7 and 2.2.3, I run configure, make and when I run ruby I get</p>\n\n<pre><code>&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n</code></pre>\n\n<p>Is there a workaround for this?</p>\n\n<p>Thanks,\nKevin</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 1332, "user_id": 2217676, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/hnEt0.jpg?s=128&g=1", "display_name": "Amir Nabaei", "link": "https://stackoverflow.com/users/2217676/amir-nabaei"}, "edited": false, "score": 1, "creation_date": 1449013886, "post_id": 34032040, "comment_id": 55820260, "body": "Thank you again, I follow ( railscasts.com  #290 SOAP with Savon) but since it is old tutorial, I have faced problems."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1449012465, "last_edit_date": 1449012465, "creation_date": 1449011766, "answer_id": 34032040, "question_id": 34031841, "link": "https://stackoverflow.com/questions/34031841/params-always-nil-in-controller/34032040#34032040", "title": "Params always nil in controller", "body": "<p>You should use <code>params[:zip_code]</code> in your controller, but <strong>NOT</strong> in your view.</p>\n\n<p>In your <code>index.html.erb</code> view, replace:</p>\n\n<pre><code>&lt;%= text_field_tag :zip_code, params[:zip_code] %&gt;\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>&lt;%= text_field_tag :zip_code %&gt;\n</code></pre>\n\n<p>Then, grab the <code>zip_code</code> value using <code>params[:zip_code]</code> in your controller action.</p>\n\n<p>So, your view (<code>index.html.erb)</code>) becomes:</p>\n\n<pre><code>   &lt;%= form_tag(:controller =&gt; \"zip_code_lookup\", :action =&gt; 'index') do  %&gt;\n     &lt;%= text_field_tag :zip_code %&gt;\n     &lt;%= submit_tag(\"go\") %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>See <a href=\"http://www.saalonmuyo.com/2010/01/27/using-form_tag-in-ruby-on-rails/\" rel=\"nofollow\">this article</a> for some more information on how <code>form_tag</code> works.</p>\n"}], "owner": {"reputation": 1332, "user_id": 2217676, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/hnEt0.jpg?s=128&g=1", "display_name": "Amir Nabaei", "link": "https://stackoverflow.com/users/2217676/amir-nabaei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 34032040, "answer_count": 1, "score": 1, "last_activity_date": 1449077363, "creation_date": 1449010781, "last_edit_date": 1449077363, "question_id": 34031841, "link": "https://stackoverflow.com/questions/34031841/params-always-nil-in-controller", "title": "Params always nil in controller", "body": "<p>I am trying to just get an input and send it to controller.\n But the params in controller is always nil</p>\n\n<p>View (index.html.erb)</p>\n\n<pre><code>   &lt;%= form_tag(:controller =&gt; \"zip_code_lookup\", :action =&gt; 'index') do  %&gt;\n     &lt;%= text_field_tag :zip_code, params[:zip_code] %&gt;\n     &lt;%= submit_tag(\"go\") %&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>Controller </p>\n\n<pre><code> class ZipCodeLookupController &lt; ApplicationController\n    def index\n         render :text =&gt; params[:zip_code].inspect\n      end\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "asset-sync"], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 5522798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca03387e0294e139c95113cfdf6a34c5?s=128&d=identicon&r=PG&f=1", "display_name": "tomjohn", "link": "https://stackoverflow.com/users/5522798/tomjohn"}, "is_accepted": false, "score": 0, "last_activity_date": 1449018052, "creation_date": 1449018052, "answer_id": 34033141, "question_id": 34031707, "link": "https://stackoverflow.com/questions/34031707/rails-asset-pipeline-flattens-directories/34033141#34033141", "title": "Rails asset pipeline flattens directories", "body": "<p>Have you configured asset_sync correctly for the application you are creating?</p>\n\n<pre><code>AssetSync.configure do |config|\n  config.fog_provider = 'AWS'\n  config.fog_directory = ENV['FOG_DIRECTORY']\n  config.aws_access_key_id = ENV['AWS_ACCESS_KEY_ID']\n  config.aws_secret_access_key = ENV['AWS_SECRET_ACCESS_KEY']\n  config.prefix = 'assets'\n  config.public_path = Pathname('./public')\nend\n</code></pre>\n\n<p>Depending on the type of application you need to configure the prefix and the public_path. Check out the Sinatra/Rack support section <a href=\"https://github.com/AssetSync/asset_sync\" rel=\"nofollow\">https://github.com/AssetSync/asset_sync</a> for more information. Hope puts you on the right path.</p>\n"}], "owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469223861, "creation_date": 1449010182, "last_edit_date": 1469223861, "question_id": 34031707, "link": "https://stackoverflow.com/questions/34031707/rails-asset-pipeline-flattens-directories", "title": "Rails asset pipeline flattens directories", "body": "<p>I've been using <a href=\"https://github.com/AssetSync/asset_sync\" rel=\"nofollow\"><code>asset_sync</code></a>, to move our static assets to Amazon S3, and I've noticed that when I precompile my assets (using <code>foreman run rake assets:precompile</code>), the base directories get flattened. They go from:</p>\n\n<pre><code>/app\n  /assets/\n    /images\n      image.png\n      image2.png\n      /subdir\n        image3.png\n    /javascripts\n      script.js\n    /stylesheets\n      style.css\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>/public\n  /assets/\n    image.png\n    image2.png\n    /subdir\n      image3.png\n    script.js\n    style.css\n</code></pre>\n\n<p>It keeps any subdirectories, but the base directories get removed for some reason.</p>\n\n<p>Is it possible to disable this? I'd like to keep my S3 assets organized into directories. I could probably resolve this by adding additional directories so that the structure is the following.</p>\n\n<pre><code>/app\n  /assets/\n    /images\n      /images\n        image.png\n        image2.png\n        /subdir\n          image3.png\n    /javascripts\n      /javascripts\n        script.js\n    /stylesheets\n      /stylesheets\n        style.css\n</code></pre>\n\n<p>But that just seems like a dirty solution.</p>\n\n<p>I'm configuring my assets for precompiling with:</p>\n\n<pre><code>Rails.application.config.assets.precompile = []\nRails.application.config.assets.precompile += ['application.js']\nRails.application.config.assets.precompile += Loader.js_files\nRails.application.config.assets.precompile += ['*.css', '*.png', '*.svg', '*.jpg']\n</code></pre>\n\n<p>My environment has the following variables\":</p>\n\n<pre><code>ASSET_SYNC_GZIP_COMPRESSION=true\nASSET_SYNC_MANIFEST=true\nASSET_SYNC_EXISTING_REMOTE_FILES=keep\nAWS_ACCESS_KEY_ID=xxxxxxx\nAWS_SECRET_ACCESS_KEY=xxxxxxx\nFOG_DIRECTORY=aws-example\nFOG_PREFIX=/assets/\nFOG_PROVIDER=AWS\nFOG_REGION=us-west-1\n</code></pre>\n"}, {"tags": ["ruby", "macos", "ruby-ffi"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1449010846, "post_id": 34031478, "comment_id": 55819070, "body": "I can replicate the error on my Mac OS X (10.11.1)... but I have no idea what you might need in order to start working on a fix."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1449011499, "post_id": 34031478, "comment_id": 55819336, "body": "I noticed you don&#39;t have a <code>ext&#47;Rakefile</code> with a task called <code>aragon2_wrap</code> <a href=\"https://github.com/ffi/ffi-compiler#extrakefile\" rel=\"nofollow noreferrer\">like the example would show</a>... Also, I noticed that I have a <code>libargon2_wrap.so</code> file in my <code>ext</code> folder. I assume it was compiled during the install process... So I&#39;m slightly at a loss as to what might be missing."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1449012049, "post_id": 34031478, "comment_id": 55819551, "body": "P.S. When I compile libraries on my Mac, using Rust, I get the extension <code>dylib</code> and not <code>so</code>. My <code>&#47;usr&#47;lib</code> folder is filled with files with the extensions <code>o</code> and <code>dylib</code>, never an <code>so</code>... it could be that FFI compiled the library but since you forced the output in the <code>makefile</code> to an <code>so</code> extension, the library name isn&#39;t valid on OS X,"}, {"owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1449012218, "post_id": 34031478, "comment_id": 55819611, "body": "This is a relevant point. OSX definitely wants different extensions, and I had thought this commit had fixed it:  <a href=\"https://github.com/technion/ruby-argon2/commit/b7bf0cf675f45132ab1698176064aa370e271b8e\" rel=\"nofollow noreferrer\">github.com/technion/ruby-argon2/commit/&hellip;</a> Edit: Would you be able to run &quot;make&quot; from that ext/argon2_wrap folder and watch the commands that get executed? Anything breaking the extension there will be the issue."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1449012976, "post_id": 34031478, "comment_id": 55819877, "body": "I just installed the gem for the first time, and the makefile I got was pre-commit. It states: <code>$(CC) $(CFLAGS) $(LIB_CFLAGS) $^ -o libargon2_wrap.so</code> ... The version I got in the version file is 0.1.1... it was updated 6 days ago on github (your commit is from 5 days ago). The release of the version was on November 26, same day as the commit... maybe the released version doesn&#39;t include the fix?"}, {"owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1449013539, "post_id": 34031478, "comment_id": 55820131, "body": "@myst the user who reported the issue claimed this commit did not help - which is why I did not tag a new release with that commit. However if it would be possible for you to clone the repo and try the commit from there, it sounds likely it will show us what&#39;s wrong."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1449014911, "post_id": 34031478, "comment_id": 55820604, "body": "The commit wouldn&#39;t help him after the installation... since it only applies to the installation process. I have no idea who the user is or what their experience is. For me, the new makefile broke the installation completely... I&#39;m posting the data in an answer. I&#39;ll edit the answer as we go along."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449015186, "post_id": 34032637, "comment_id": 55820710, "body": "I really can&#39;t thank you enough for this assistance. I believe you are looking at a different issue here, related to the local submodule build. You should be able to resolve it by running: <code>git submodule update --init --recursive</code> from the repository root directory, before running make."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449016526, "post_id": 34032637, "comment_id": 55821089, "body": "Okay, now the install works, the library is compiled... but we&#39;re back to square zero."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449016919, "post_id": 34032637, "comment_id": 55821213, "body": "Seems the complied library might not be valid... could it be we need some compile flags? it states <code>image not found</code>"}, {"owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449017229, "post_id": 34032637, "comment_id": 55821302, "body": "Regarding compile flags, they are the ones that the official Argon2 library ships with. I&#39;m certainly happy to change them but I don&#39;t know what OSX needs that would be different."}, {"owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449017828, "post_id": 34032637, "comment_id": 55821504, "body": "I seem to be finding tonnes of related discussions for OSX: <a href=\"https://github.com/jordansissel/fpm/issues/1010\" rel=\"nofollow noreferrer\">github.com/jordansissel/fpm/issues/1010</a>"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449019019, "post_id": 34032637, "comment_id": 55821823, "body": "Yeah... I tested two different paths and it seems that the path&#39;s content somehow breaks the library loading on FFI."}, {"owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449019205, "post_id": 34032637, "comment_id": 55821877, "body": "Seems to be a documented issue for MySQL: <a href=\"http://cgarvey.ie/archive/2015/10/01/mysql-client-library-issues-on-os-x-el-capitan/\" rel=\"nofollow noreferrer\">cgarvey.ie/archive/2015/10/01/&hellip;</a>"}, {"owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449187577, "post_id": 34032637, "comment_id": 55910689, "body": "Although it&#39;s not &quot;solved&quot;, you&#39;ve identified exactly the upstream issue, so I&#39;ll mark as correct."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "edited": false, "score": 0, "creation_date": 1449189828, "post_id": 34032637, "comment_id": 55911311, "body": "Thanks. I just wish we could have actually solved it."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 1, "last_activity_date": 1451131418, "last_edit_date": 1451131418, "creation_date": 1449014811, "answer_id": 34032637, "question_id": 34031478, "link": "https://stackoverflow.com/questions/34031478/ruby-ffi-loading-osx/34032637#34032637", "title": "Ruby FFI loading - OSX", "body": "<p>Success!!! :-(</p>\n\n<p>Why a sad face? because it IS an FFI issue and I have no idea how to go around it.</p>\n\n<p>It seems the naming of the path causes the FFI library loading to fail on OS X.</p>\n\n<p>I Tried this:</p>\n\n<pre><code>require 'ffi'\nmodule Hello\n    extend FFI::Library\n    ffi_lib \"Users/USERNAME/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/argon2-0.1.1/ext/argon2_wrap/libargon2_wrap.dylib\"\nend\n # =&gt; FAILS to load library\n</code></pre>\n\n<p>I copied the compiled library to my desktop and loaded it using FFI and a clean path:</p>\n\n<pre><code>require 'ffi'\nmodule Hello\n    extend FFI::Library\n    ffi_lib \"/Users/USERNAME/Desktop/libargon2_wrap.dylib\"\nend\n# =&gt; Success, the library loaded\n</code></pre>\n\n<p>Now we know where the issue comes from and we might be able to help resolve the issue with the FFI library.</p>\n\n<h3>Edit</h3>\n\n<p>I would (I'm sorry to say) attempt porting the FFI to <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/fiddle/rdoc/index.html\" rel=\"nofollow\">Ruby's core <code>fiddle</code> library</a>. You can see a <a href=\"http://blog.honeybadger.io/use-any-c-library-from-ruby-via-fiddle-the-ruby-standard-librarys-best-kept-secret/\" rel=\"nofollow\">Fiddle tutorial here</a>.</p>\n"}], "owner": {"reputation": 39, "user_id": 3988789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bebe004e2efc32cfa654eebd8b1a78e?s=128&d=identicon&r=PG&f=1", "display_name": "technion", "link": "https://stackoverflow.com/users/3988789/technion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 1, "accepted_answer_id": 34032637, "answer_count": 1, "score": 0, "last_activity_date": 1451131418, "creation_date": 1449009105, "question_id": 34031478, "link": "https://stackoverflow.com/questions/34031478/ruby-ffi-loading-osx", "title": "Ruby FFI loading - OSX", "body": "<p>I'm wondering if someone can assist with the issue that has been opened here:</p>\n\n<p><a href=\"https://github.com/technion/ruby-argon2/issues/1\" rel=\"nofollow\">https://github.com/technion/ruby-argon2/issues/1</a></p>\n\n<p>Specifically, I have released a gem, and I've received advise a user is experiencing an issue. That being the following error when loading my gem:</p>\n\n<pre><code>LoadError: cannot find 'argon2_wrap' library\nfrom /Users/me/.rvm/gems/ruby-2.2.1/gems/ffi-compiler-0.1.3/lib/ffi-compiler/loader.rb:21:in `find'\n</code></pre>\n\n<p>I'm considering it extremely likely to be an OSX issue, as I've done my damndest to replicate this and had no success. And the error basically shows what happens on my Linux machine if I don't actually compile the shared library. I do not however have a Mac available, and therefore any ability to test this.</p>\n\n<p>I really want to take supporting this gem seriously and anyone who can give me some pointers would be really appreciated.</p>\n"}, {"tags": ["ruby", "session", "sinatra"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1449008526, "post_id": 34031232, "comment_id": 55818156, "body": "Works fine for me. How are you starting the app? Are you using <code>shotgun</code> or something similar?"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1449008600, "post_id": 34031232, "comment_id": 55818190, "body": "It&#39;s on Passenger.  require File.expand_path(&#39;app&#39;, File.dirname(<b>FILE</b>)) run MyApp"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1449008961, "post_id": 34031232, "comment_id": 55818371, "body": "That might explain it. I suspect each request is being routed to a different Ruby process by Passenger, so the session (stored in process) isn\u2019t available in the second request. Try running your app directly with <code>rackup</code> and see if it works there."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1449009565, "post_id": 34031232, "comment_id": 55818597, "body": "I just renamed always_restart.txt and the session is carrying from /first to /second, but /third doesn&#39;t show the session.  It only has the erb file :third and nothing else.  Do I have to call something to carry that through?"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1449009926, "post_id": 34031232, "comment_id": 55818715, "body": "Sorry, I don\u2019t know \u2013 I\u2019ve reached the limit of my knowledge about Passenger. (There\u2019s no <code>third</code> route in your question btw.)"}], "answers": [{"tags": [], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1449039679, "creation_date": 1449039679, "answer_id": 34036716, "question_id": 34031232, "link": "https://stackoverflow.com/questions/34031232/racksessionpool-sessions-in-sinatra/34036716#34036716", "title": "Rack::Session::Pool Sessions in Sinatra", "body": "<p>Just needed a restart.  Figure that.  </p>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449039679, "creation_date": 1449008085, "question_id": 34031232, "link": "https://stackoverflow.com/questions/34031232/racksessionpool-sessions-in-sinatra", "title": "Rack::Session::Pool Sessions in Sinatra", "body": "<p>I can't seem to get these sessions to continue into other pages.  </p>\n\n<p>app.rb:</p>\n\n<pre><code>    class MyApp &lt; Sinatra::Base\n        use Rack::Session::Pool, :expire_after =&gt; 60 * 1\n\n        get \"/\" do\n            @foo = \"one two three\"\n            erb :index\n        end\n\n        get \"/first\" do\n            session[:foo] = Time.now\n            session[:message] = \"ALPHA\"\n            session[:message1] = \"CHARLIE\"\n\n            erb :first\n        end\n\n        get \"/second\" do\n            session[:message2] = \"BRAVO2\"\n\n            erb :second\n        end\n    end\n</code></pre>\n\n<p>Inside /first and /second:</p>\n\n<pre><code>Sess: &lt;%= session.inspect %&gt;&lt;br&gt;\n</code></pre>\n\n<p>The session doesn't want to carry across pages.  On /first I'm displaying this:</p>\n\n<pre><code>Sess: {\"message\"=&gt;\"ALPHA\", \"message1\"=&gt;\"CHARLIE\", \"foo\"=&gt;2015-12-01 17:05:31 -0500}\n</code></pre>\n\n<p>On /second I'm displaying this:</p>\n\n<pre><code>Sess: {\"message2\"=&gt;\"BRAVO2\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 2889046, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FeCy0.jpg?s=128&g=1", "display_name": "girbic", "link": "https://stackoverflow.com/users/2889046/girbic"}, "edited": false, "score": 0, "creation_date": 1449008383, "post_id": 34031275, "comment_id": 55818076, "body": "Thanks, perfect explaination"}], "tags": [], "owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1449008264, "creation_date": 1449008264, "answer_id": 34031275, "question_id": 34031056, "link": "https://stackoverflow.com/questions/34031056/confused-about-data-model-in-hartls-railstutorial-in-chapter-12/34031275#34031275", "title": "Confused about data model in Hartl&#39;s railstutorial in Chapter 12", "body": "<p>It is a way to access the <code>Users</code> that are either following or being followed by a particular user instead of the relationships.</p>\n\n<p>If you just had <code>@user.active_relationships</code> that would return back the relationships in the join table. But with <code>@user.following</code> you get an association array of <code>User</code> objects.</p>\n\n<p>And as for your second question, a relationship between two users takes 2 objects not one, and would be pointless to have just a single <code>belongs_to :user</code>.</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow\">Ruby on Rails Guides - Associations | Has many :through</a></p>\n"}], "owner": {"reputation": 131, "user_id": 2889046, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FeCy0.jpg?s=128&g=1", "display_name": "girbic", "link": "https://stackoverflow.com/users/2889046/girbic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 34031275, "answer_count": 1, "score": 1, "last_activity_date": 1449008264, "creation_date": 1449007393, "question_id": 34031056, "link": "https://stackoverflow.com/questions/34031056/confused-about-data-model-in-hartls-railstutorial-in-chapter-12", "title": "Confused about data model in Hartl&#39;s railstutorial in Chapter 12", "body": "<p>So in chapter 12 or Hartl's Railstutorial, we're building the ability for users to follow one another's \"twitter\" feeds. This is modeled as users forming relationships and we create a relationship model with a table that has a follower_id and a followed_id. Also in the model, we associate it with the user model as follows:</p>\n\n<pre><code>class Relationship &lt; ActiveRecord::Base\n  belongs_to :follower, class_name: \"User\"\n  belongs_to :followed, class_name: \"User\"\nend\n</code></pre>\n\n<p>We also associate the user model with the relationship model as follows:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :active_relationships,  class_name:  \"Relationship\",\n                                   foreign_key: \"follower_id\",\n                                   dependent:   :destroy\n  has_many :passive_relationships, class_name:  \"Relationship\",\n                                   foreign_key: \"followed_id\",\n                                   dependent:   :destroy\n  has_many :following, through: :active_relationships,  source: :followed\n  has_many :followers, through: :passive_relationships, source: :follower\n</code></pre>\n\n<p>I'm confused as to why we need to have has_many :following in the user model. It says in the tutorial that following someone is an active relationship, so why do we need to say users have many active relationships, and users are also following many (which is an active relationship). What exactly is has_many :following doing that has_many :active_relationships cannot do?</p>\n\n<p>Also my second question is why the belongs_to is split into follower and followed, instead of just user. What do we gain by using two belongs_to instead of just one on the user?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-ec2"], "comments": [{"owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "edited": false, "score": 0, "creation_date": 1449008917, "post_id": 34030983, "comment_id": 55818346, "body": "Are you sending emails through mailguns http post option or using their stmp gateway?"}, {"owner": {"reputation": 943, "user_id": 3861062, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003054720441/picture?type=large", "display_name": "Sungpah Lee", "link": "https://stackoverflow.com/users/3861062/sungpah-lee"}, "reply_to_user": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "edited": false, "score": 0, "creation_date": 1449035775, "post_id": 34030983, "comment_id": 55826866, "body": "I&#39;m sending an email using STMP gateway! The setting is done in config/production.rb file!"}, {"owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "edited": false, "score": 0, "creation_date": 1449042065, "post_id": 34030983, "comment_id": 55829549, "body": "Can you post a snippet from your rails log file near where that 502 is being rendered and what errors its spitting out?"}], "owner": {"reputation": 943, "user_id": 3861062, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003054720441/picture?type=large", "display_name": "Sungpah Lee", "link": "https://stackoverflow.com/users/3861062/sungpah-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449007073, "creation_date": 1449007073, "question_id": 34030983, "link": "https://stackoverflow.com/questions/34030983/ruby-on-rails-with-badgateway-issue-and-mailer-using-mailgun", "title": "Ruby on rails with Badgateway issue and mailer ( using mailgun ).", "body": "<p>I'm Ruby user! My amazon EC2 server went into \"502 Badgateway\" at exactly X:00 suddenly. </p>\n\n<p>At that timing, a mailer function was expected to be run. ( and it was ).</p>\n\n<p>The system started to send an email but the system was stopped. I went to Mailgun service log and there was one email that was not sent ( error message ).</p>\n\n<p>I didn't use \"begin-rescue\" format when running mailer. </p>\n\n<pre><code>every :tuesday, :at =&gt; '1pm' do\n    runner \"User.email_tutor_apply\" #\ud655\uc778\nend\n\n###below is a mail function.\n\ndef self.email_tutor_apply \n\n @user = User.where(:role =&gt; 1).where(:mock_session_passed =&gt; true)\n @user.each do |user|\n   wowmailer.tutor_apply(user).deliver_now\n end\n</code></pre>\n\n<p>Do you guys think that this was caused by mailgun issue because i didn't use 'begin-rescue' statement?</p>\n\n<p>If something went wrong, I assumed that the page would lead me to \"Something went wrong\" instead of burning the server.</p>\n\n<p>When is the case the server went to \"502 Badgateway\" permanently in EC2 ( NGNIX )?</p>\n\n<p>Please let me know. !!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 4, "creation_date": 1449005896, "post_id": 34030623, "comment_id": 55816726, "body": "that&#39;s how floating point numbers work. &quot;we are float of borg. accuracy is irrelevant, you will be approximated&quot;"}, {"owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "edited": false, "score": 1, "creation_date": 1449005985, "post_id": 34030623, "comment_id": 55816775, "body": "please read this <a href=\"http://www.rails-troubles.com/2011/12/ruby-float-quirks.html?m=1\" rel=\"nofollow noreferrer\">rails-troubles.com/2011/12/ruby-float-quirks.html?m=1</a>"}, {"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "edited": false, "score": 0, "creation_date": 1449006450, "post_id": 34030623, "comment_id": 55817038, "body": "I read it. The author suggests using BigDecimal among other things. I&#39;m now reading . What do you do in your code base if you&#39;ve addressed this problem before? I&#39;m looking at &#39;What Every Computer Scientist Should Know About Floating-Point Arithmetic&#39; as well. There&#39;s also a good article comparing different languages <a href=\"http://itreallymatters.net/post/386327451/floating-point-arithmetics-in-19-programming#.Vl4WN3arRpg\" rel=\"nofollow noreferrer\">itreallymatters.net/post/386327451/&hellip;</a>."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1449007236, "post_id": 34030623, "comment_id": 55817479, "body": "It all boils down to the fact that computers can&#39;t represent <b><i>every</i></b> float accurately in binary. Thus, arithmetic gets weird."}], "answers": [{"comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1449008290, "post_id": 34031011, "comment_id": 55818034, "body": "I guess you mean &#39;rational&#39; instead of &#39;real&#39;."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1449008317, "post_id": 34031011, "comment_id": 55818047, "body": "<code>0.009r</code> is a Rational number, which is a subset of real numbers"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1449008526, "post_id": 34031011, "comment_id": 55818154, "body": "@sschmeck, thanks for the correction, you are right."}, {"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "edited": false, "score": 0, "creation_date": 1449009009, "post_id": 34031011, "comment_id": 55818390, "body": "That&#39;s a great idea. I&#39;m carrying about this on the context of testing the calculations of a web app, though."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1449008498, "last_edit_date": 1449008498, "creation_date": 1449007220, "answer_id": 34031011, "question_id": 34030623, "link": "https://stackoverflow.com/questions/34030623/unexpected-ruby-float-behavior-during-multiplication/34031011#34031011", "title": "Unexpected Ruby Float behavior during multiplication", "body": "<p>Since you already found materials on the <em>why</em> subject, I will just answer the <em>what to do</em> part of the question. If you absolutely don't want to approximate, you have to use rational numbers:</p>\n\n<pre><code>30 * 0.009r # =&gt; (27/100)\n</code></pre>\n"}], "owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1449007984, "answer_count": 1, "score": 0, "last_activity_date": 1449008498, "creation_date": 1449005658, "last_edit_date": 1449007322, "question_id": 34030623, "link": "https://stackoverflow.com/questions/34030623/unexpected-ruby-float-behavior-during-multiplication", "closed_reason": "Duplicate", "title": "Unexpected Ruby Float behavior during multiplication", "body": "<pre><code>30.0 * 0.009 # =&gt; 0.26999999999999996\n</code></pre>\n\n<p>Does anybody know why this is not <code>0.27</code>?</p>\n\n<p>Any recommendations on what to do about this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "html-select"], "answers": [{"comments": [{"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449011221, "post_id": 34031644, "comment_id": 55819207, "body": "Thank you for the response.  I think my associations always confuse me.  When you say I should have that in my parameter that means upon clicking update yes then it would be there (in the right controller action of course that I need to also fix based on your first part of response).   Secondly If I do have these ids in a param how do I connect them?  @provider.provider_location &lt;&lt; group_id wouldn&#39;t work I think...I would have to first grab the object using that id (GroupLocation find) then assign it  using an array &lt;&lt;  add yes?  Lastly you are right they are to reflect the exact state..."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449011289, "post_id": 34031644, "comment_id": 55819231, "body": "...if you remove from the provider locations then indeed the provider locations has to be updated upon clicking submit.  Also with the first part of your response pertaining to my error, I was confused because just clicking &#39;add&#39; or something did a form submit, do all buttons by default submit?"}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449013382, "post_id": 34031644, "comment_id": 55820061, "body": "To put it in terms of your web view when you click &#39;Add&#39; or &#39;Add All&#39; you want your program to send an array of GroupLocation id&#39;s with the other parameters to the appropriate controller action. In terms of connecting them, correct me if I&#39;m wrong here, but to my understanding you&#39;re trying to connect Providers to GroupLocations. If this is the case that the ProviderLocations are the connection Ex: I have a provider with id=1 and a GroupLocation with id=1 and I want to connect them. I can do ProviderLocation.create(provider_id: 1, group_location_id: 1). Now if I call &#39;.group_locations&#39; on..."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449013424, "post_id": 34031644, "comment_id": 55820078, "body": "I actually envisioned it to say when I say add or add all it puts it to the other side in the select box.  Then when save/update is called then it saves what was on that other select box (the one on the left)  array out to @provider.provider_locations"}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449013780, "post_id": 34031644, "comment_id": 55820221, "body": "that provider it will return an array of GroupLocations, including that one. Yes, all the buttons will submit but default since they&#39;re in a form_for, but you should be able to change where they each submit to in the controller and so you can handle them appropriately (I would probably send the removing to one controller action and the adding to another)"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449013977, "post_id": 34031644, "comment_id": 55820294, "body": "Ahhh do sending those to the controller would allow me to update the provider object without having to do it all at once.  How does the provider return an array of group locations is that the argument to select tag &quot;provider_ location&quot;  ?   That&#39;s the key in params it comes back as an array?"}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449014118, "post_id": 34031644, "comment_id": 55820345, "body": "I&#39;m pretty sure you&#39;d need some JavaScript to do that since it sounds like you want it to happen auto-synchronously. A a server side language the Ruby in your page is just displaying how it&#39;s associated in your database so to update the data on the page you&#39;ll need to update the database if you&#39;re just using vanilla Ruby on Rails"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449014280, "post_id": 34031644, "comment_id": 55820403, "body": "You are right.  So I can hold all the add removes let them update the select in the home page then upon actually clicking submit , then deal with the data in whatever parameter it comes across creating those provider locations on the fly in @provider.  More or less"}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449014350, "post_id": 34031644, "comment_id": 55820424, "body": "No that&#39;s setup through your associations,  <code>has_many :group_locations, through: :provider_locations</code> in the Providers table in particular. Because of the way you have that set up you&#39;ll have a &#39;.group_locations&#39; method on any provider instance and a &#39;.providers&#39; method for and GroupLocation instance"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449014445, "post_id": 34031644, "comment_id": 55820472, "body": "Perhaps my associations are not right.  I was always using @provider.provider_locations to get an array of group locations.   Since it was a thorough"}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449014494, "post_id": 34031644, "comment_id": 55820484, "body": "Oops lied about the second one, you&#39;ll need to add a <code>has_many :providers,  through: :provider_locations</code> to the GroupLocations model if you want the .providers method"}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1449014604, "post_id": 34031644, "comment_id": 55820519, "body": "using &#39;@provider.provider_locations&#39; would return an array of provider_locations"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 0, "creation_date": 1449014710, "post_id": 34031644, "comment_id": 55820547, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/96744/discussion-between-codejoy-and-rocco-basso\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1449009934, "last_edit_date": 1495540340, "creation_date": 1449009934, "answer_id": 34031644, "question_id": 34030608, "link": "https://stackoverflow.com/questions/34030608/dealing-with-select-tags-in-controller-after-a-submit/34031644#34031644", "title": "dealing with select_tags in controller after a submit", "body": "<p>I'm pretty sure the reason you're getting an error when you try to submit is because you're submission is trying to go to the update action (because your parameters '_method' is 'patch'). When it gets there it hits the line </p>\n\n<p><code>if @provider.update(provider_params)</code> </p>\n\n<p>which directs it to your <code>provider_params</code> method. This method is designed to only let through certain parameters, mainly a provider and its associated information (denoted by the ':provider' symbol). Since that information isn't there it stops the submission and errors out. There are several ways you can fix this.</p>\n\n<ol>\n<li>Have your form_for submit to a different controller action (<a href=\"https://stackoverflow.com/questions/7136126/routing-form-submission-to-a-different-controller\">Routing form submission to a different controller</a>)</li>\n<li>Change your update action to support the lack of provider parameters</li>\n</ol>\n\n<p>Personally I recommend the first option, though it is getting away for rails REST architecture. </p>\n\n<p>As for handling the data, if I understand correctly you're trying to create the link between the provider and the group_location (i.e. a provider_location). Forgetting anything else that object might require it will certainly need</p>\n\n<ol>\n<li>The provider's id</li>\n<li>The group_location's id</li>\n</ol>\n\n<p>Which I believe you already have coming through in your params, assuming 'id' refers to your provider's id and 'group_providers' is an array of the group_location ids (if it's not then you need to use the form_for to get that info in the parameter since you'll need it). Then it's as simple as looping through the group_location ids and creating a provider_location with the group_location id and the provider id.</p>\n\n<pre><code>params[:group_providers].each do |g_id|\n   # using 'find_or_create_by' may be unnecessary but\n   # can help avoid duplicate entries\n   ProviderLocation.find_or_create_by(provider_id: params[:id].to_i, group_location_id: g_id.to_i)\nend\n</code></pre>\n\n<p>Note: if the IDs that come through are meant to reflect the exact state of the provider_location (i.e. if when you submit you also want to delete provider_locations that currently exist but who's ids aren't included in the params) then the loop becomes significantly more complicated algorithmically so if that's what you're trying to do let me know and I'll try to help </p>\n"}], "owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449009934, "creation_date": 1449005620, "question_id": 34030608, "link": "https://stackoverflow.com/questions/34030608/dealing-with-select-tags-in-controller-after-a-submit", "title": "dealing with select_tags in controller after a submit", "body": "<p>Trying to figure out how to use section </p>\n\n<p>3.2 Select Boxes for Dealing with Models \n<a href=\"http://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/form_helpers.html</a></p>\n\n<p>With my deeply nested models. (A provider can have a provider location, which is a join on provider id and  group locationid.  A group location is a group and an address).  This is the nesting of like how do I deal/consume the data thats in those select boxes once the user adds/removes locations that way.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8UK9S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8UK9S.png\" alt=\"enter image description here\"></a></p>\n\n<p>This takes all the group locations and lists them and lets me add them to the current provider under proivder_locations.</p>\n\n<p>Basically get what is working 'dumbly' on the controller side upon f.submit</p>\n\n<p>Flow is:</p>\n\n<p>User creates a provider, then the show it asks if they would like to add location to their newly created provider.\nIf so it takes them to add_location.html.erb file where they have two select boxes.  One with all the locations they can add and one \nthat shows any current locations the provider already has.  </p>\n\n<p>I have the page handling displaying of the right locations and that and \nhandling the form adding/deleting.   This is great, but the form_for breaks (see bottom) and even then I have no idea how to handle or deal with the data that is on the client side in these select tags.  Do I consume it in the controller somehow?  Again the section 3.2 talks about it but the part that really stumps me is it doesn't seem applicable to my models in their 3.2 section.</p>\n\n<p><strong>(Side note, I had that f.form_for in there not really tested, without it the form works great in terms of buttons adding subtracting from the lists on the html side, with\nit breaks when I click any of the buttons to add/remove things from lists)</strong>\n(error screen shot at bottom)</p>\n\n<p>All the code:</p>\n\n<p>Provider.rb</p>\n\n<pre><code>class Provider &lt; ActiveRecord::Base\n\n    validates :first_name, presence: true\n    validates :last_name, presence: true\n    #validates :credentialing_contact, presence: true\n\n    has_many :provider_locations\n    has_many :group_locations, through: :provider_locations\n    has_many :groups, through: :group_locations \n    belongs_to :designation\n    belongs_to :specialty\n    #has_many :provider_locations\n    has_many :invoices\n    has_many :provider_terms\nend\n</code></pre>\n\n<p>provider_location.rb</p>\n\n<pre><code>class ProviderLocation &lt; ActiveRecord::Base\n  belongs_to :provider  \n  belongs_to :group_location\n\nend\n</code></pre>\n\n<p>group_location.rb</p>\n\n<pre><code>class GroupLocation &lt; ActiveRecord::Base  \n  belongs_to :address\n  belongs_to :group\n  has_many :provider_locations\nend\n</code></pre>\n\n<p>providers_controller.rb</p>\n\n<pre><code>class ProvidersController &lt; ApplicationController\n    before_action :set_provider, only: [:show, :edit, :update, :destroy]\n\n\n  def index\n    @providers = Provider.all\n  end\n\n  def show\n    #@provider = Provider.find(params[:id])\n  end\n\n  def new\n    @provider=Provider.new\n\n     respond_to do |format|\n        format.html # new.html.erb\n        format.json { render json: ghouse }\n      end\n\n  end\n\n  def edit\n  end\n\n  def add_location\n    @provider = Provider.find(params[:id])\n    @group_locations = GroupLocation.all\n    if @provider.nil?\n      puts 'Error here!'\n    end\n    #throw an error if the provider is nil\n\n  end\n\n  def create\n    @provider = Provider.new(provider_params)\n\n    respond_to do |format|\n        if @provider.save\n            format.html { redirect_to @provider, notice: 'Provider was successfully created.'}\n            format.json { render :show, status: :created, location: @provider }\n        else\n            format.html { render :new }\n            format.json { render json: @provider.errors, status: :unprocessable_entity }\n        end\n    end\n  end\n\n  # PATCH/PUT /groups/1\n  # PATCH/PUT /groups/1.json\n  def update\n    respond_to do |format|\n      if @provider.update(provider_params)\n        format.html { redirect_to @provider, notice: 'provider was successfully updated.' }\n        format.json { render :show, status: :ok, location: @provider }\n      else\n        format.html { render :edit }\n        format.json { render json: @provider.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /groups/1\n  # DELETE /groups/1.json\n  def destroy\n    #@group = Group.find(params[:id])\n    #if(@group.present?)\n    #   @group.destroy\n    #end\n    @provider.destroy\n    respond_to do |format|\n      format.html { redirect_to providers_url, notice: 'provider was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_provider\n      @provider = Provider.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def provider_params\n      params.require(:provider).permit(:last_name, :first_name, :dob, :license_num, :license_exp, :dea_num, \n        :dea_exp, :ptan, :caqh_num, :provider_npi, :effective_date, :provisional_effective_date, :date_joined, \n        :provider_contact, :credentialing_contact, :hospitalaffiliation, :group_id, :specialty_id, :designation_id, :notes, :created_at, :updated_at)    \n    end\nend\n</code></pre>\n\n<p>(add_location.html.erb this is gotten to from the show controller)</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;div class=\"row\"&gt;\n  &lt;%= form_for (@provider) do |f| %&gt;\n    &lt;div class=\"col-md-4\"&gt;\n            &lt;table&gt;\n              &lt;tr&gt;\n                &lt;th&gt;            \n                  &lt;h3&gt; &lt;%= @provider.last_name %&gt; , &lt;%= @provider.first_name %&gt; 's Locations&lt;/h3&gt;\n                &lt;/th&gt;\n              &lt;/tr&gt;\n              &lt;tr&gt;\n                &lt;td&gt;          \n                 &lt;% if @provider.provider_locations.count &gt;0 %&gt;\n                    &lt;%= select_tag \"provider_locations\", options_from_collection_for_select(@provider.provider_locations.map{|j| j.group_location}, :id , :dba), :multiple =&gt; true %&gt;\n                  &lt;% else %&gt;\n                    &lt;%= select_tag \"provider_locations\", \"&lt;option&gt;&lt;/option&gt;\".html_safe, :multiple =&gt; true, :style =&gt; \"width: 300px\" %&gt;       \n                  &lt;% end %&gt;\n                &lt;/td&gt;\n              &lt;/tr&gt;\n              &lt;tr&gt;\n                &lt;td&gt;          \n                   &lt;button class=\"remove\"&gt;Remove&lt;/button&gt; \n\n                &lt;/td&gt;\n                &lt;td&gt;          \n                  &lt;button class=\"removeAll\"&gt;Remove All&lt;/button&gt;\n                &lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/table&gt;         \n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n         &lt;table&gt;\n              &lt;tr&gt;\n                &lt;th&gt;            &lt;!-- maybe some buttons here --&gt;\n\n                &lt;/th&gt;\n              &lt;/tr&gt;                   \n            &lt;/table&gt;\n     &lt;/div&gt;\n     &lt;div class=\"col-md-4\"&gt;\n            &lt;table&gt;\n              &lt;tr&gt;\n                &lt;th&gt;            \n                 &lt;h3&gt; All Group Locations &lt;/h3&gt; &lt;!-- might need a search here too --&gt;\n                &lt;/th&gt;\n              &lt;/tr&gt;\n              &lt;tr&gt;\n                &lt;td&gt;          \n                  &lt;% if @group_locations.count &gt;0 %&gt;\n                    &lt;%= select_tag \"group_providers\", options_from_collection_for_select(GroupLocation.all, :id , :dba), :multiple =&gt; true %&gt;\n                  &lt;% else %&gt;\n                    &lt;%= select_tag \"group_providers\", \"&lt;option&gt;Add new...&lt;/option&gt;\".html_safe, :multiple =&gt; true, :style =&gt; \"width: 300px\" %&gt;       \n                  &lt;% end %&gt;\n\n                &lt;/td&gt;\n              &lt;/tr&gt;\n              &lt;tr&gt;\n                &lt;td&gt;          \n                    &lt;button class=\"add\"&gt;Add&lt;/button&gt;\n\n                &lt;/td&gt;\n                &lt;td&gt;          \n                    &lt;button class=\"addAll\"&gt;Add All&lt;/button&gt;\n                &lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/table&gt;        \n    &lt;/div&gt;\n    &lt;div class=\"actions\"&gt;\n      &lt;%= f.submit %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Second issue the form_for in general is breaking my code:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nvGAm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nvGAm.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1449006628, "creation_date": 1449006628, "answer_id": 34030871, "question_id": 34030551, "link": "https://stackoverflow.com/questions/34030551/activeadmin-csv-export-records-order/34030871#34030871", "title": "ActiveAdmin csv export records order", "body": "<p>See <a href=\"https://github.com/activeadmin/activeadmin/pull/4209\" rel=\"nofollow\">this issue</a> on github. Basically: it's not possible without changing the code yourself. </p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 34030871, "answer_count": 1, "score": 0, "last_activity_date": 1449006628, "creation_date": 1449005398, "question_id": 34030551, "link": "https://stackoverflow.com/questions/34030551/activeadmin-csv-export-records-order", "title": "ActiveAdmin csv export records order", "body": "<p>I have ActiveAdmin in my rails app. I was trying to disable default order which ActiveAdmin apply when retrieve records, I've add this to my resource:</p>\n\n<pre><code> config.sort_order = ''\n</code></pre>\n\n<p>Now when I visit html version of page it properly get the records without order but when I export to csv it retrieves records with order:</p>\n\n<pre><code>SELECT  \"vw_survey_packs\".* FROM \"vw_survey_packs\" WHERE (\"vw_survey_packs\".\"id\" &gt; 22542)  ORDER BY \"vw_survey_packs\".\"id\" ASC LIMIT 1000\n</code></pre>\n\n<p>How can I change that?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "calendar"], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1449596644, "post_id": 34031016, "comment_id": 56071720, "body": "ok, I have been looking at FullCalendar (<a href=\"http://fullcalendar.io/docs/google_calendar/\" rel=\"nofollow noreferrer\">fullcalendar.io/docs/google_calendar</a>) would this speed up the process at all? I only want the calendar to reflect their google calendar, I wouldn&#39;t want to have another separate calendar system"}], "tags": [], "owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1449007244, "creation_date": 1449007244, "answer_id": 34031016, "question_id": 34030434, "link": "https://stackoverflow.com/questions/34030434/how-to-display-visual-interactive-calendar-on-own-web-app-using-google-client-ap/34031016#34031016", "title": "How to display visual interactive calendar on own web app using Google Client API gem", "body": "<p>You're doing too much at once. Specifically you want to:</p>\n\n<ul>\n<li>Create, Update, Read &amp; Delete calendar events (on your server, in your database)</li>\n<li>Consume a google API to synchronise your copy of the user's calendar with google </li>\n<li>Add some javascript whizzbang to make it all snappy and buzzword-compliant.</li>\n</ul>\n\n<p>That's too much too start. Focus on doing these three things sequentially. Start with a rails app that has the following models: User, Calendar, Event and allows users to edit their calendars. </p>\n\n<p>Don't start thinking about google until you get that first version working.</p>\n"}], "owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1449007244, "creation_date": 1449004958, "question_id": 34030434, "link": "https://stackoverflow.com/questions/34030434/how-to-display-visual-interactive-calendar-on-own-web-app-using-google-client-ap", "title": "How to display visual interactive calendar on own web app using Google Client API gem", "body": "<p>I'm very new to Ruby on Rails and I was wondering how I would go about implementing a calendar on my web app that a user could sync with their own google calendar, so that it would show their events. Ideally they would be able to add events to this calendar too, which would update their google calendar. I just don't know how I would start this. I know that there are insert and get methods provided by the gem, but I don't know where I would be calling them?</p>\n\n<p>At the moment I have a User model (+controller) and a sessions controller, with a few views for the website. Would I need to create another model 'Calendar and a controller for that? Would calendar events also be another model or should they be handled within the calendar class? Would the google client api gem methods be used in the sessions controller or the calendar controller? </p>\n\n<p>I haven't made my calendar yet, but I want to do it using javascript. Could any of you recommend any pre-made javascript calendars? </p>\n\n<p>Thanks in advance and sorry for all the questions, I'm just trying to get my head round this! </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "edited": false, "score": 0, "creation_date": 1449005298, "post_id": 34030385, "comment_id": 55816392, "body": "What happens when you do &lt;%= form_tag ping_tool_path(1), method: &quot;post&quot;, remote: true do %&gt;"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "edited": false, "score": 0, "creation_date": 1449005452, "post_id": 34030385, "comment_id": 55816483, "body": "@MattW. From the backend, both my <code>tool_hit_count</code> and <code>host_hitcount</code> are updated, however, my view stays on <code>index.html.erb</code>.  So, from the UI perspective, nothing happens."}], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449006061, "post_id": 34030635, "comment_id": 55816817, "body": "Well, at least I wasn&#39;t far off!  Ok, I made the change, I see that in console log that <code>Rendered tools&#47;ping.js.erb (0.6ms)</code> did happen, however nothing is displayed in the <code>&lt;div id=&quot;output&quot;&gt;&lt;&#47;div&gt;</code> area yet."}, {"owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449006430, "post_id": 34030635, "comment_id": 55817023, "body": "@Godzilla74 if you&#39;re on Google Chrome you can open up the inspect element -&gt; then click the Network tab, it should show you what is being called on the network and what response is being sent back."}, {"owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449006729, "post_id": 34030635, "comment_id": 55817200, "body": "@Godzilla74 my response does require you to have jQuery. That could be it."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449006744, "post_id": 34030635, "comment_id": 55817207, "body": "I added a screenshot of what the Network Tab shows after the form submit.  I don&#39;t see a reference to the <code>ping</code>"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449006771, "post_id": 34030635, "comment_id": 55817223, "body": "I do have the <code>jquery-rails</code> gem installed"}, {"owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449007244, "post_id": 34030635, "comment_id": 55817485, "body": "@Godzilla74 the remote:true call should show up on that page."}, {"owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449007343, "post_id": 34030635, "comment_id": 55817544, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/96738/discussion-between-john-and-godzilla74\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 856, "user_id": 3145038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i2fhc.png?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3145038/john"}, "is_accepted": true, "score": 2, "last_activity_date": 1449007656, "last_edit_date": 1449007656, "creation_date": 1449005717, "answer_id": 34030635, "question_id": 34030385, "link": "https://stackoverflow.com/questions/34030385/convert-working-ruby-on-rails-form-to-ajax/34030635#34030635", "title": "Convert working Ruby on Rails form to AJAX", "body": "<p>You're on the right track, now you need to modify the <code>def ping</code> action with a <code>respond_to</code> block.</p>\n\n<pre><code>def ping\n  ping_host(params[:ip])\n  save_host(params[:ip])\n\n  respond_to do |format|\n    format.html { redirect_to tools_path } ## if you still want to have html\n    format.js\n  end\nend\n</code></pre>\n\n<p>and create a file called <code>view/tools/ping.js.erb</code> where you have javascript that will be run and returned asynchronously </p>\n\n<pre><code>$(\"#output\").html(\"&lt;%= j @results %&gt;\"); \n</code></pre>\n\n<p>The &lt;%= %> block will be evaluated first and replaced with the output of that ruby code. Then this will be inserted into the #output div.</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 34030635, "answer_count": 1, "score": 1, "last_activity_date": 1449007656, "creation_date": 1449004782, "last_edit_date": 1449006435, "question_id": 34030385, "link": "https://stackoverflow.com/questions/34030385/convert-working-ruby-on-rails-form-to-ajax", "title": "Convert working Ruby on Rails form to AJAX", "body": "<p>I have a working Ruby on Rails form that currently posts my results and redirects the user to another view and posts the results.  The flow is:</p>\n\n<pre><code>views/tools/index.html.erb -&gt; views/tools/ping.html.erb\n</code></pre>\n\n<p>Since I have it working now, I'd like to convert it to AJAX and keep the user on the <code>views/tools/index.html.erb</code> view, getting rid of the redirect to enhance the user experience.  However, I'm unsure of how to proceed based on the way that my <code>Tools</code> controller is currently setup, and my incredibly lacking knowledge of AJAX.</p>\n\n<p>So, here's what I currently have:</p>\n\n<p><strong>views/tools/index.html.erb (added 'remote: true' to form)</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;h1&gt; Tools &lt;/h1&gt;\r\n\r\n&lt;h3&gt; Ping &lt;/h3&gt;\r\n\r\n&lt;%= form_tag ping_tool_path(1), method: \"post\", remote: true do %&gt;\r\n  &lt;%= text_field_tag :ip, params[:ip] %&gt;\r\n  &lt;%= submit_tag \"Ping\", name: nil %&gt;\r\n&lt;% end %&gt;\r\n\r\n&lt;!-- this is where I'd like to put the results via AJAX --&gt;\r\n&lt;div id=\"output\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>controllers/tools_controller.rb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class ToolsController &lt; ApplicationController\r\n\r\n  def index\r\n    \r\n  end\r\n\r\n  def ping\r\n    ping_host(params[:ip])\r\n    save_host(params[:ip])\r\n\r\n    # Adds based on recommendations\r\n    respond_to do |format|\r\n     format.html { redirect_to tools_path }\r\n     format.js\r\n    end\r\n  end\r\n\r\n\r\n  protected\r\n\r\n    def ping_host(host)\r\n      f = IO.popen(\"ping -c 3 #{host}\")\r\n      @output = f.readlines\r\n\r\n      tool_type = \"ping\"\r\n      tool = Tool.find_by(tool_type: tool_type)\r\n      tool.increment(:tool_hit_count, by = 1)\r\n      tool.save\r\n\r\n      @results = \"&lt;pre&gt;#{@output.join}&lt;/pre&gt;\".html_safe\r\n    end\r\n\r\n    def save_host(host)\r\n      host = Host.find_or_create_by(host_ip: host)\r\n      host.increment(:host_hitcount, by = 1)\r\n      host.save\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>views/tools/ping.html.erb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= @results %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>views/tools/ping.js.erb (New file based on suggestion)</strong> </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>$(\"#output\").html(\"&lt;%= @results %&gt;\");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>routes.rb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Rails.application.routes.draw do\r\n  root 'tools#index'\r\n\r\n  resources :tools do\r\n    member do\r\n      post 'ping'\r\n    end\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>This is what I see on the Network tab in Google Chrome after submitting the form:</strong>\n<a href=\"https://i.stack.imgur.com/eGtUs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eGtUs.png\" alt=\"Network Tab of Google Chrome\"></a></p>\n\n<p>So, what I know at this point is that <strong>I'll need to add <code>remote: true</code></strong> to my form in <code>views/tools/index.html.erb</code>, and this is where I get lost.</p>\n\n<p>It seems that I have an issue ATM with the fact that I've abstracted the form to use my <code>ping</code> method in the <code>Tools</code> controller, whereas all of the tutorials (and railscasts) I've gone through are doing AJAX on CRUD methods and a given model, not something like what I've build here so far.  <strong>Please help me understand AJAX!</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1449004925, "post_id": 34030324, "comment_id": 55816174, "body": "you do not need all here: <code>Team.includes(:matchups)</code>"}, {"owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1449006915, "post_id": 34030324, "comment_id": 55817298, "body": "Thanks, I&#39;ve edited it to reflect that."}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1449010215, "post_id": 34030324, "comment_id": 55818820, "body": "Why not use <code>Team.includes(:home_matchups, :away_matchups)</code> and then merge them?"}], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "edited": false, "score": 0, "creation_date": 1449023291, "post_id": 34031762, "comment_id": 55823030, "body": "Thank you so much, I think this is exactly what I needed. From what I can see this won&#39;t query the db when I call matchups on a relation that has included away and home matchups, is that correct?"}, {"owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "reply_to_user": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "edited": false, "score": 0, "creation_date": 1449028433, "post_id": 34031762, "comment_id": 55824538, "body": "Yes, that&#39;s right.  It will check to see if the association is loaded and not retry the query"}], "tags": [], "owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "is_accepted": true, "score": 2, "last_activity_date": 1449010452, "creation_date": 1449010452, "answer_id": 34031762, "question_id": 34030324, "link": "https://stackoverflow.com/questions/34030324/using-includes-on-a-custom-association-in-rails/34031762#34031762", "title": "Using includes on a custom association in rails", "body": "<p>Like Sean Huber said, include the home and away matchups, then refer to them with <code>.matchups</code></p>\n\n<pre><code>def matchups\n  (home_matchups + away_matchups).sort_by(&amp;:week)\nend\n</code></pre>\n\n<p>It's a little slower (maybe), but you'll be guaranteed to use the relation if it's loaded.</p>\n\n<p>The general approach here - include the relations like you would, then use convenience methods that refer to those relations - whether it's in a view or another model method like this example.</p>\n"}], "owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 34031762, "answer_count": 1, "score": 1, "last_activity_date": 1449010452, "creation_date": 1449004586, "last_edit_date": 1449006898, "question_id": 34030324, "link": "https://stackoverflow.com/questions/34030324/using-includes-on-a-custom-association-in-rails", "title": "Using includes on a custom association in rails", "body": "<p>I have a class <code>Team</code> that has many <code>Matchups</code></p>\n\n<pre><code>class Team &lt; ActiveRecord::Base\n  has_many(\n    :home_matchups,\n    class_name: \"Matchup\",\n    foreign_key: :team_1_id,\n    primary_key: :id\n  )\n\n  has_many(\n    :away_matchups,\n    class_name: \"Matchup\",\n    foreign_key: :team_2_id,\n    primary_key: :id\n  )\n\n  def matchups\n    Matchup.where(\"team_1_id = ? OR team_2_id = ?\", id, id)\n  end\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Matchup &lt; ActiveRecord::Base\n  validates :team_1_id, :team_2_id, :week, presence: true\n\n  belongs_to(\n    :team_1,\n    class_name: \"Team\",\n    foreign_key: :team_1_id,\n    primary_key: :id\n  )\n\n  belongs_to(\n    :team_2,\n    class_name: \"Team\",\n    foreign_key: :team_2_id,\n    primary_key: :id\n  )\n\n  has_one :league, through: :team_1, source: :league\nend\n</code></pre>\n\n<p>This all works fine, until I want to use <code>includes</code> like this: <code>Team.includes(:matchups)</code> because although matchups returns an active record relation I can't use it. This is a problem later because I need this kind of information for many teams and I don't want to make a query for every team. Can anyone tell me how I could use includes to get the combination?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "edited": false, "score": 0, "creation_date": 1449004936, "post_id": 34030275, "comment_id": 55816182, "body": "I don&#39;t understand your question but I gave it a shot. Please let me know if I had the right idea."}, {"owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "edited": false, "score": 0, "creation_date": 1449005128, "post_id": 34030275, "comment_id": 55816285, "body": "You should really ask better questions. What&#39;s the common theme of &quot;3-&quot;, &quot;4-&quot; &quot;*4&quot; etc.. It&#39;s also generally appreciated if you try it yourself and show where you got stuck."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5627568, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Kl1ovQIpvyk/AAAAAAAAAAI/AAAAAAAAALU/EX5aP-Kk1Ak/photo.jpg?sz=128", "display_name": "felicia nelson", "link": "https://stackoverflow.com/users/5627568/felicia-nelson"}, "edited": false, "score": 0, "creation_date": 1449005110, "post_id": 34030378, "comment_id": 55816275, "body": "Thank you. Let&#39;s say I have an array [&quot;2&quot;, &quot;+&quot;, &quot;3&quot;, &quot;+-&quot;, &quot;-3&quot;]. I want to identify the last two items in the array."}, {"owner": {"reputation": 11, "user_id": 5627568, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Kl1ovQIpvyk/AAAAAAAAAAI/AAAAAAAAALU/EX5aP-Kk1Ak/photo.jpg?sz=128", "display_name": "felicia nelson", "link": "https://stackoverflow.com/users/5627568/felicia-nelson"}, "edited": false, "score": 0, "creation_date": 1449005352, "post_id": 34030378, "comment_id": 55816437, "body": "Thank you again, but I don&#39;t know what&#39;s in the array yet. I need to able to find if some strings are in that format inside my array."}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 11, "user_id": 5627568, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Kl1ovQIpvyk/AAAAAAAAAAI/AAAAAAAAALU/EX5aP-Kk1Ak/photo.jpg?sz=128", "display_name": "felicia nelson", "link": "https://stackoverflow.com/users/5627568/felicia-nelson"}, "edited": false, "score": 0, "creation_date": 1449005475, "post_id": 34030378, "comment_id": 55816500, "body": "Check the last part of my answer. It will return true or false if any strings match the format"}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 11, "user_id": 5627568, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Kl1ovQIpvyk/AAAAAAAAAAI/AAAAAAAAALU/EX5aP-Kk1Ak/photo.jpg?sz=128", "display_name": "felicia nelson", "link": "https://stackoverflow.com/users/5627568/felicia-nelson"}, "edited": false, "score": 0, "creation_date": 1449006549, "post_id": 34030378, "comment_id": 55817102, "body": "Happy to help. Don&#39;t forget to upvote and accept this post if you found it helpful"}, {"owner": {"reputation": 11, "user_id": 5627568, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Kl1ovQIpvyk/AAAAAAAAAAI/AAAAAAAAALU/EX5aP-Kk1Ak/photo.jpg?sz=128", "display_name": "felicia nelson", "link": "https://stackoverflow.com/users/5627568/felicia-nelson"}, "edited": false, "score": 0, "creation_date": 1449006803, "post_id": 34030378, "comment_id": 55817241, "body": "Sure! I accepted your post but don&#39;t yet have enough reputation to upvote. Thanks again!"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": true, "score": 0, "last_activity_date": 1449005363, "last_edit_date": 1449005363, "creation_date": 1449004754, "answer_id": 34030378, "question_id": 34030275, "link": "https://stackoverflow.com/questions/34030275/how-to-find-2-assignment-operator-in-regex/34030378#34030378", "title": "How to find 2 Assignment operator in regex", "body": "<p>If I understand your question correctly, you are trying to match a symbol followed by a number or a number followed by a symbol</p>\n\n<p>the regex would look something like this</p>\n\n<pre><code>/^[+-\\/\\*]\\d$|^\\d[+-\\/\\*]$/\n</code></pre>\n\n<p>Breakdown</p>\n\n<p><code>^</code> - Start of line</p>\n\n<p><code>[+-\\/\\*]</code> - Any one of the symbols. Asterisk and forward slash must be escaped</p>\n\n<p><code>\\d</code> - Matches any digit (0 through 9)</p>\n\n<p><code>$</code> - End of line</p>\n\n<p><code>|</code> - Or</p>\n\n<p><code>^\\d[+-\\/\\*]$</code> - starts with a digit and ends with a symbol.</p>\n\n<p>Please let me know if this is what you are looking for. Otherwise I can fix this.</p>\n\n<p>In Ruby, let's pretend you have an array as follows</p>\n\n<pre><code>array = [\"2\" , \"+\", \"3\",\"/\" , \"2\"]\n</code></pre>\n\n<p>You can find if any two consecutive elements match the above pattern as follows</p>\n\n<pre><code>array.each_cons(2).to_a.any? { |combo| combo.join.match(/^[+-\\/\\*]\\d$|^\\d[+-\\/\\*]$/) } \n</code></pre>\n\n<p>Breakdown</p>\n\n<ol>\n<li>Use the <code>each_cons(2)</code> function to find every two consecutive characters in the array</li>\n<li>use the <code>any?</code> method to find if any elements in the array satisfy a condition</li>\n<li>Iterate over every element and find if any of the two joined together match the regex pattern</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1449005051, "creation_date": 1449005051, "answer_id": 34030457, "question_id": 34030275, "link": "https://stackoverflow.com/questions/34030275/how-to-find-2-assignment-operator-in-regex/34030457#34030457", "title": "How to find 2 Assignment operator in regex", "body": "<p>I don't get the second part about \"3-\" etc. But the basic idea for the rest is:</p>\n\n<pre><code>your_array.each do |element|\n  result element.match([/\\+\\/-]{2}/)\nend\n</code></pre>\n\n<p>Note that the following characters have to be escaped with a backslash when used in ruby:</p>\n\n<pre><code>. | ( ) [ ] { } + \\ ^ $ * ?.\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5627568, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Kl1ovQIpvyk/AAAAAAAAAAI/AAAAAAAAALU/EX5aP-Kk1Ak/photo.jpg?sz=128", "display_name": "felicia nelson", "link": "https://stackoverflow.com/users/5627568/felicia-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 34030378, "answer_count": 2, "score": 0, "last_activity_date": 1449006277, "creation_date": 1449004402, "last_edit_date": 1449006277, "question_id": 34030275, "link": "https://stackoverflow.com/questions/34030275/how-to-find-2-assignment-operator-in-regex", "title": "How to find 2 Assignment operator in regex", "body": "<p>I am trying to find 2 symbols together \"+*\" , \"-/\", or such and also I want to identify if it's  \"3-\", \"4-\" \"*4\" and such. I will be looking for it inside and array or strings like such [\"2\" , \"+\", \"3\",\"/\" , \"2\"]</p>\n"}, {"tags": ["ruby", "xml", "selenium-webdriver", "rspec", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 482, "user_id": 5100490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24f72d3931d92a25e7f9c457bd70613?s=128&d=identicon&r=PG", "display_name": "BamBam22", "link": "https://stackoverflow.com/users/5100490/bambam22"}, "edited": false, "score": 0, "creation_date": 1449014032, "post_id": 34030679, "comment_id": 55820311, "body": "Only problem is needs to be dynamic. So it needs to run any file upload against the form being filled out by the file upload."}, {"owner": {"reputation": 481, "user_id": 2696928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k7co9.jpg?s=128&g=1", "display_name": "Joseworks", "link": "https://stackoverflow.com/users/2696928/joseworks"}, "reply_to_user": {"reputation": 482, "user_id": 5100490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24f72d3931d92a25e7f9c457bd70613?s=128&d=identicon&r=PG", "display_name": "BamBam22", "link": "https://stackoverflow.com/users/5100490/bambam22"}, "edited": false, "score": 0, "creation_date": 1449082686, "post_id": 34030679, "comment_id": 55856003, "body": "Dynamic or not, once you upload you have a file. All you need is to test against all the possible cases/variations."}], "tags": [], "owner": {"reputation": 481, "user_id": 2696928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k7co9.jpg?s=128&g=1", "display_name": "Joseworks", "link": "https://stackoverflow.com/users/2696928/joseworks"}, "is_accepted": true, "score": 1, "last_activity_date": 1449082631, "last_edit_date": 1449082631, "creation_date": 1449005910, "answer_id": 34030679, "question_id": 34030226, "link": "https://stackoverflow.com/questions/34030226/rspec-test-uploaded-xml-file-that-fills-out-dynamic-form/34030679#34030679", "title": "RSpec test uploaded xml file that fills out dynamic form", "body": "<p>John, you could create a fixture that reproduces an XML file like the one you pasted. Then you run your services, methods etc against it, and expect (or not) to parse back the contents of the fixture. You could also test another fixtures with invalid fields to ensure your app has contingencies to break down gracefully if there are any invalid fields.</p>\n"}], "owner": {"reputation": 482, "user_id": 5100490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24f72d3931d92a25e7f9c457bd70613?s=128&d=identicon&r=PG", "display_name": "BamBam22", "link": "https://stackoverflow.com/users/5100490/bambam22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 34030679, "answer_count": 1, "score": -1, "last_activity_date": 1449082631, "creation_date": 1449004259, "last_edit_date": 1449008251, "question_id": 34030226, "link": "https://stackoverflow.com/questions/34030226/rspec-test-uploaded-xml-file-that-fills-out-dynamic-form", "title": "RSpec test uploaded xml file that fills out dynamic form", "body": "<p>I am writing an automation test suite using RSpec, capybara, selenium web driver, and poltergeist. I do not have access to the codebase of the web app itself, only the test suite.</p>\n\n<p>What happens is the client uploads an xml file, pieces of that xml file populate a form. The form is also dynamic, so fields can be added dependent on the contents of the xml file. </p>\n\n<p>My mission is to write a test that ensures that the values of the xml file match what is being populated within the form. </p>\n\n<p>Any help would be greatly appreciated. Below is a sample of one of the xml files I am attempting to test.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;LOAN_APPLICATION&gt;\n&lt;_DATA_INFORMATION&gt;\n&lt;DATA_VERSION _Name=\"Date\" _Number=\"20140926\"/&gt;\n&lt;DATA_VERSION _Name=\"1003\" _Number=\"3.20\"/&gt;\n&lt;/_DATA_INFORMATION&gt;\n&lt;ADDITIONAL_CASE_DATA&gt;\n&lt;TRANSMITTAL_DATA BelowMarketSubordinateFinancingIndicator=\"N\" BuydownRatePercent=\"0.000\" /&gt;\n&lt;/ADDITIONAL_CASE_DATA&gt;\n&lt;ASSET _CashOrMarketValueAmount=\"10000.00\" /&gt;\n&lt;ASSET _AccountIdentifier=\"123456\"/&gt;\n&lt;ASSET _AccountIdentifier=\"1234567\" _CashOrMarketValueAmount=\"100000.00\" /&gt;\n&lt;ASSET _AccountIdentifier=\"6465456\" _CashOrMarketValueAmount=\"50000.00\" /&gt;\n&lt;InterviewersEmployerPostalCode=\"200121234\" InterviewersTelephoneNumber=\"2023333333\" ApplicationTakenMethodType=\"FaceToFace\" InterviewerApplicationSignedDate=\"20111011\" InterviewersEmployerName=\"ABC Mortgage\" InterviewersName=\"John Done\"/&gt;\n\n&lt;CONTACT_POINT _Type=\"Email\" _Value=\"Jimmy.Johns@abc.com\"/&gt;\n&lt;/BORROWER&gt;\n&lt;/LOAN_APPLICATION&gt;\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 19, "last_activity_date": 1473426626, "last_edit_date": 1473426626, "creation_date": 1449003229, "answer_id": 34029944, "question_id": 34029797, "link": "https://stackoverflow.com/questions/34029797/rails-mysql-ilike-query/34029944#34029944", "title": "Rails MySQL ILIKE query", "body": "<p>I think it should be: </p>\n\n<pre><code> scope :by_name, lambda { |agency_name| \n   where('name LIKE ?', \"%#{agency_name}%\") # not ILIKE\n }\n</code></pre>\n\n<p><a href=\"http://www.postgresql.org/docs/current/static/functions-matching.html\" rel=\"noreferrer\">It is in PostgreSQL</a> the keyword ILIKE can be used instead of LIKE to make the match case-insensitive according to the active locale. This is not in the SQL standard but is a PostgreSQL extension.</p>\n\n<p>In MySQL you do not have ILIKE. Checkout <a href=\"http://dev.mysql.com/doc/refman/5.7/en/string-comparison-functions.html#operator_like\" rel=\"noreferrer\">MySQL docs on string comparison functions</a>.</p>\n\n<hr>\n\n<p><strong>Bonus</strong> - you can also use <a href=\"https://github.com/rails/arel\" rel=\"noreferrer\">Arel</a>. Take a look:</p>\n\n<pre><code>scope :by_name, lambda { |agency_name| \n  where(Agency.arel_table[:name].matches(\"%#{agency_name}%\"))\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 489, "user_id": 95326, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/785450b4697eaf6d130e09577b18e766?s=128&d=identicon&r=PG", "display_name": "Gary Benade", "link": "https://stackoverflow.com/users/95326/gary-benade"}, "edited": false, "score": 2, "creation_date": 1526730370, "post_id": 34030061, "comment_id": 87864585, "body": "This is not an ideal solution because this will not allow the query optimiser to use an index if one exists on the name column, a better solution would be to set the collation of your table to utf8_general_ci - the ci means case insensitive, doing this will make all text matches case insensitive"}, {"owner": {"reputation": 3142, "user_id": 547489, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e4be6ee1e801dd741378e1a086128fdb?s=128&d=identicon&r=PG", "display_name": "Vael Victus", "link": "https://stackoverflow.com/users/547489/vael-victus"}, "reply_to_user": {"reputation": 489, "user_id": 95326, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/785450b4697eaf6d130e09577b18e766?s=128&d=identicon&r=PG", "display_name": "Gary Benade", "link": "https://stackoverflow.com/users/95326/gary-benade"}, "edited": false, "score": 0, "creation_date": 1557688477, "post_id": 34030061, "comment_id": 98839774, "body": "@GaryBenade What if I want to allow the user to search with a case-sensitivity flag on or off?"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 3142, "user_id": 547489, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e4be6ee1e801dd741378e1a086128fdb?s=128&d=identicon&r=PG", "display_name": "Vael Victus", "link": "https://stackoverflow.com/users/547489/vael-victus"}, "edited": false, "score": 1, "creation_date": 1563358504, "post_id": 34030061, "comment_id": 100670655, "body": "@VaelVictus that would be, admittedly, stretching MySQL&#39;s purpose, but for lack of functional indexes, both versions (wrt. case insensitivity) can be stored and indexed instead. Or a separate search server like ElasticSearch could be used for this purpose instead."}], "tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": false, "score": 11, "last_activity_date": 1449003709, "last_edit_date": 1495540375, "creation_date": 1449003709, "answer_id": 34030061, "question_id": 34029797, "link": "https://stackoverflow.com/questions/34029797/rails-mysql-ilike-query/34030061#34030061", "title": "Rails MySQL ILIKE query", "body": "<p>Why yes, because <a href=\"https://stackoverflow.com/questions/4838079/sql-like-syntax\">there's no such thing as <code>ILIKE</code> in MySQL</a>. Only <code>LIKE</code>. You may have seen <code>ILIKE</code> as a case-insensitive version of <code>LIKE</code> in PostgreSQL, but your current RDBMS is different.</p>\n\n<p>Your best bet is using <code>LOWER</code> on both sides to achieve mostly equivalent effect:</p>\n\n<pre><code>.where('LOWER(name) LIKE LOWER(?)', \"%#{agency_name}%\")\n</code></pre>\n\n<p>Credit to <a href=\"https://stackoverflow.com/users/479863/mu-is-too-short\">@mu is too short</a> for his <a href=\"https://stackoverflow.com/a/4838104/2076787\">answer</a>.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22335, "favorite_count": 0, "accepted_answer_id": 34029944, "answer_count": 2, "score": 14, "last_activity_date": 1576143190, "creation_date": 1449002755, "last_edit_date": 1576143190, "question_id": 34029797, "link": "https://stackoverflow.com/questions/34029797/rails-mysql-ilike-query", "title": "Rails MySQL ILIKE query", "body": "<p>My syntax is off.  I want to create a scope <code>by_name</code> that finds all <code>agencies</code> whose name attribute contains the passed in string (case insensitive). </p>\n\n<p>Here is what I have:</p>\n\n<pre><code>class Agency &lt; ActiveRecord::Base\n  scope :by_name, -&gt;(agency_name) { where('name ILIKE ?', \"%#{agency_name}%\") }\nend\n</code></pre>\n\n<p>In the rails console I type in <code>agencies = Agency.by_name(\"foo\")</code>.  Here is the query generated:</p>\n\n<pre><code>SELECT `agencies`.* FROM `agencies`  WHERE (name ILIKE '%foo%')\n</code></pre>\n\n<p>Here is the error message:</p>\n\n<blockquote>\n  <p>Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right\n  syntax to use near 'ILIKE '%foo%')</p>\n</blockquote>\n"}, {"tags": ["python", "ruby", "shapefile", "esri"], "comments": [{"owner": {"reputation": 2167, "user_id": 2118067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6M8I.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/2118067/erica"}, "edited": false, "score": 0, "creation_date": 1449145489, "post_id": 34029715, "comment_id": 55884903, "body": "Few ideas for resources: <a href=\"https://www.esri.com/library/whitepapers/pdfs/shapefile.pdf\" rel=\"nofollow noreferrer\">esri whitepaper about shapefiles</a>, a blog post about <a href=\"http://www.andresblog.net/ruby-on-rails/opening-a-shapefile-using-ruby-on-rails/\" rel=\"nofollow noreferrer\">shapefiles in ruby</a>, and <a href=\"https://github.com/nofxx/georuby/\" rel=\"nofollow noreferrer\">some code on github that might help</a>"}], "answers": [{"tags": [], "owner": {"reputation": 799, "user_id": 289688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fnB6s.jpg?s=128&g=1", "display_name": "MichaelStoner", "link": "https://stackoverflow.com/users/289688/michaelstoner"}, "is_accepted": false, "score": 0, "last_activity_date": 1479317886, "last_edit_date": 1592644375, "creation_date": 1479316829, "answer_id": 40638369, "question_id": 34029715, "link": "https://stackoverflow.com/questions/34029715/parsing-esri-shapefiles-in-ruby/40638369#40638369", "title": "Parsing ESRI Shapefiles in Ruby", "body": "<p>The <code>shp</code> file is the geometry, is in a binary format, and includes bug endian and little endian integer and floats.</p>\n<p>The <code>shx</code> file is the optional index file, and as such is very simple, and mainly big endian.</p>\n<p>Is it that the shapefile has been read by a tool, library or an existing program, but the <code>shx</code> is not being used?  Your solution is not to use it, or point the other tool to it's existence.</p>\n<p>It's a optimisation for reading the records out of the <code>shp</code> file, so it not needed, or can be recreated by parsing the shapefile.</p>\n<p>But if you did need it then open the file in <code>binary mode</code> and covert the 2 byte big endian values to the offset, and length.</p>\n<p>The crazy characters are from reading it, or displaying it as <code>ASCII</code>, as a picture tells a thousand words:</p>\n<p><a href=\"https://i.stack.imgur.com/Cxi42.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cxi42.png\" alt=\"Hex Edit view of shp and shx file\" /></a></p>\n<p>Look at row 96 (<code>decimal</code>), the highlight on the left in blue is the <code>shp</code> Record <code>0x000001</code> and it's length ( 1 = 2 bytes) is <code>0x0002c8</code>, and the left is the <code>shx</code> index, offset for Record 1 is <code>0x32</code>, which is <code>50</code> 2 bytes pairs, thus <code>100</code> bytes into the file and the record length, again, of <code>0x2c8</code>, or <code>0x590</code> bytes.</p>\n<p>The crazy characters are the <code>ASCII</code> representation of these and is meaningless, this is the narrow column to the right of the hex numbers, mainly <code>.</code>'s</p>\n<p>Note the Record Info is Big endian, hence the file 2 bytes <code>0x 00 00 27 0A</code> corresponds to the spec the <code>FILE CODE</code> which is given as <code>9994</code> (<code>decimal</code>).</p>\n<p>The values within the <code>shp</code> records themselves, and the bounding box in the header (first 100 bytes) are little endian.</p>\n<p>[edited as I initial had my little and big endian swapped around]</p>\n"}], "owner": {"reputation": 1030, "user_id": 2997644, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1419960053/picture?type=large", "display_name": "yburyug", "link": "https://stackoverflow.com/users/2997644/yburyug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1479317886, "creation_date": 1449002489, "question_id": 34029715, "link": "https://stackoverflow.com/questions/34029715/parsing-esri-shapefiles-in-ruby", "title": "Parsing ESRI Shapefiles in Ruby", "body": "<p>So I currently am trying to get some map data that is being given by a 3rd party provider. They have given us nothing except the data dump, so no documentation or a point of contact to see what they were using prior.</p>\n\n<p>I have 4 files:</p>\n\n<p><code>30083_parcel.dbf</code> </p>\n\n<p><code>30083_parcel.prj</code></p>\n\n<p><code>30083_parcel.shp</code></p>\n\n<p><code>30083_parcel.shx</code></p>\n\n<p>Now, without going into unnecessary detail I have already managed to extract out and get working data from the <code>dbf</code> <code>prj</code> and <code>shp</code> files. However, I am having a lot of trouble with <code>shx</code>.</p>\n\n<p>Per Wikipedia's entry on the specification for SHX files:</p>\n\n<pre><code>The index contains the same 100-byte header as the .shp file, followed by any number of 8-byte fixed-length records which consist of the following two fields:\n\nBytes   Type    Endianness  Usage\n0\u20133 int32   big Record offset (in 16-bit words)\n4\u20137 int32   big Record length (in 16-bit words)\n</code></pre>\n\n<p>So, I tried something along these lines:</p>\n\n<pre><code>File.open('test.txt') do|file|\n  until file.eof?\n    buffer = file.read(100)\n    # Do something with buffer\n    puts buffer\n  end\nend\n</code></pre>\n\n<p>And all I'm getting is some crazy characters, like \n<code>H</code>, <code>\ufffd</code>, and <code>P</code>. I am not sure where to go to get anything further to usefully retrieve the record offset and record length.</p>\n\n<p>Any ideas? I thought by using the <code>file.read(100)</code> that I would get the headers and atleast be able to see them, but that is not the case. And after trying to access the rest after that first 100 bytes, I am getting similar random unicode.</p>\n\n<p>Its at a point where I'd be open to non-ruby solutions, as well.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "edited": false, "score": 1, "creation_date": 1449002057, "post_id": 34029441, "comment_id": 55814535, "body": "Thank you very much, I like how your approach allows you to make changes to everything, and also individual elements as well."}], "tags": [], "owner": {"reputation": 437, "user_id": 10466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09555e63d1932c71ccdb12886bab4ebe?s=128&d=identicon&r=PG", "display_name": "Mike Desjardins", "link": "https://stackoverflow.com/users/10466/mike-desjardins"}, "is_accepted": true, "score": 2, "last_activity_date": 1449001494, "creation_date": 1449001494, "answer_id": 34029441, "question_id": 34029338, "link": "https://stackoverflow.com/questions/34029338/how-to-add-one-integer-to-a-feature-in-a-rails-data-set-using-the-rails-console/34029441#34029441", "title": "How to add one integer to a feature in a rails data set using the rails console", "body": "<p>You can do something like this:</p>\n\n<pre><code>MyModel.where(id: 1).update_all('times_used = times_used + 1')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 1185244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d279589125e3f97fec0be6c7212b835?s=128&d=identicon&r=PG", "display_name": "fltiago", "link": "https://stackoverflow.com/users/1185244/fltiago"}, "is_accepted": false, "score": 0, "last_activity_date": 1449001755, "creation_date": 1449001755, "answer_id": 34029509, "question_id": 34029338, "link": "https://stackoverflow.com/questions/34029338/how-to-add-one-integer-to-a-feature-in-a-rails-data-set-using-the-rails-console/34029509#34029509", "title": "How to add one integer to a feature in a rails data set using the rails console", "body": "<p>You can use the <code>increment!</code> method, take a look: <a href=\"http://apidock.com/rails/ActiveRecord/Base/increment\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/Base/increment</a>!</p>\n\n<pre><code>//would be something like\np.increment!(:times_used)\n</code></pre>\n"}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 34029441, "answer_count": 2, "score": 2, "last_activity_date": 1449004066, "creation_date": 1449001067, "last_edit_date": 1449004066, "question_id": 34029338, "link": "https://stackoverflow.com/questions/34029338/how-to-add-one-integer-to-a-feature-in-a-rails-data-set-using-the-rails-console", "title": "How to add one integer to a feature in a rails data set using the rails console", "body": "<p>I have a database full of some information, but I need to go into the rails console and add one integer to a specific data set in my local database. </p>\n\n<p>I have a column named <code>times_used</code>, within that column I need to add one more integer into it. </p>\n\n<p>I've tried, </p>\n\n<pre><code>p.update_attribute(:times_used, add: 1)\np.update_attribute(:times_used, add: :1)\np.update_attribute(:times_used, add: [:1])\np.update_attribute(:times_used, + 1)\np.update_attribute(:times_used) + 1\n</code></pre>\n\n<p>I'm wondering, what I am trying to do, is possible? Do I need to loop through these?\nMuch thanks to anybody for taking a quick look at this. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "popen"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1449002526, "post_id": 34029361, "comment_id": 55814799, "body": "Snazzy!  As I&#39;m good at doing... I was making it too complicated!"}], "tags": [], "owner": {"reputation": 437, "user_id": 10466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09555e63d1932c71ccdb12886bab4ebe?s=128&d=identicon&r=PG", "display_name": "Mike Desjardins", "link": "https://stackoverflow.com/users/10466/mike-desjardins"}, "is_accepted": true, "score": 1, "last_activity_date": 1449001133, "creation_date": 1449001133, "answer_id": 34029361, "question_id": 34029218, "link": "https://stackoverflow.com/questions/34029218/ruby-on-rails-popen-output-conversion/34029361#34029361", "title": "Ruby on Rails Popen output conversion", "body": "<p>Something like this maybe?</p>\n\n<pre><code>def ping_host(host)\n  f = IO.Popen(\"ping -c 3 #{host}\")\n  @output = f.readlines\n  return \"&lt;pre&gt;#{@output.join}&lt;/pre&gt;\".html_safe\nend\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 34029361, "answer_count": 1, "score": 0, "last_activity_date": 1449001133, "creation_date": 1449000610, "question_id": 34029218, "link": "https://stackoverflow.com/questions/34029218/ruby-on-rails-popen-output-conversion", "title": "Ruby on Rails Popen output conversion", "body": "<p>I'm stuck trying to convert an array to a string.  Ultimately, what I need to do is:</p>\n\n<ol>\n<li>Convert the array to string</li>\n<li>Remove the <code>\\n</code> characters</li>\n<li>Remove the quotes</li>\n<li>Place each line on a newline in the view</li>\n</ol>\n\n<p>I should also say that I'm trying to do this without creating a temp file to read from.</p>\n\n<p><strong>tools_controller.rb</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def ping_host(host)\r\n  f = IO.Popen(\"ping -c 3 #{host}\")\r\n  @output = f.readlines\r\n  return @output\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>views/tools/ping.html.erb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= @output %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This works fine and dandy, however, the output presented in the view leaves much to be desired:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>[\"PING 10.10.10.1 (10.10.10.1): 56 data bytes\\n\", \"64 bytes from 10.10.10.1: icmp_seq=0 ttl=64 time=1.614 ms\\n\", \"64 bytes from 10.10.10.1: icmp_seq=1 ttl=64 time=1.716 ms\\n\", \"64 bytes from 10.10.10.1: icmp_seq=2 ttl=64 time=1.658 ms\\n\", \"\\n\", \"--- 10.10.10.1 ping statistics ---\\n\", \"3 packets transmitted, 3 packets received, 0.0% packet loss\\n\", \"round-trip min/avg/max/stddev = 1.614/1.663/1.716/0.042 ms\\n\"]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm trying to figure out how to get it into a format like this:</p>\n\n<pre><code>PING 10.10.10.1 (10.10.10.1): 56 data bytes\n64 bytes from 10.10.10.1: icmp_seq=0 ttl=64 time=1.614 ms\n64 bytes from 10.10.10.1: icmp_seq=1 ttl=64 time=1.716 ms\n64 bytes from 10.10.10.1: icmp_seq=2 ttl=64 time=1.658 ms\n--- 10.10.10.1 ping statistics ---\n3 packets transmitted, 3 packets received, 0.0% packet loss\nround-trip min/avg/max/stddev = 1.614/1.663/1.716/0.042 ms\n</code></pre>\n\n<p>Which strips out all of the quotes and newlines and present in console like fashion to the user, but on a webpage instead.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "comments": [{"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1448999196, "post_id": 34028738, "comment_id": 55812939, "body": "How do you print that data to the view?"}, {"owner": {"reputation": 5644, "user_id": 9908141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seDql.jpg?s=128&g=1", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/9908141/imran-ahmad"}, "reply_to_user": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1448999256, "post_id": 34028738, "comment_id": 55812974, "body": "I am rendering it in controller only."}, {"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 1, "creation_date": 1448999316, "post_id": 34028738, "comment_id": 55813007, "body": "Yes, obviously. Could you post that code as well?"}, {"owner": {"reputation": 5644, "user_id": 9908141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seDql.jpg?s=128&g=1", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/9908141/imran-ahmad"}, "reply_to_user": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1448999502, "post_id": 34028738, "comment_id": 55813125, "body": "No, I want to convert it to json so that it could be read by android developer. Depending upon &lt;result&gt; he will show some message to user."}, {"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 1, "creation_date": 1448999602, "post_id": 34028738, "comment_id": 55813183, "body": "I just wanted to see if you&#39;re passing the data through a hash, because if you are, there&#39;s a neat thing called to_json that you could use, <a href=\"http://apidock.com/rails/Hash/to_json\" rel=\"nofollow noreferrer\">apidock.com/rails/Hash/to_json</a>"}, {"owner": {"reputation": 5644, "user_id": 9908141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seDql.jpg?s=128&g=1", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/9908141/imran-ahmad"}, "reply_to_user": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1448999927, "post_id": 34028738, "comment_id": 55813351, "body": "Initially I did .to_json but then I realized it works with array not with html,"}, {"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1449000042, "post_id": 34028738, "comment_id": 55813413, "body": "I don&#39;t believe you can parse html objects to JSON (someone more front end, feel free to correct me), but you have to do it in your Ruby code, preferably in your model and not in the controller."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1449013190, "post_id": 34028738, "comment_id": 55819968, "body": "Hi @Emmy and welcome to Stack Overflow. It&#39;s really hard for us to debug a verbal description of your code. We need to see the <i>actual</i> code in order to help you. Can you please edit your question and add in all the relevant code (the controller code etc). If you don&#39;t do this, then we cannot help you. Note: please don&#39;t put code in comments (like here), because the formatting is dreadful - edit your question and add the code there."}], "answers": [{"tags": [], "owner": {"reputation": 1234, "user_id": 3093312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sh2eh.jpg?s=128&g=1", "display_name": "Bryan Dimas", "link": "https://stackoverflow.com/users/3093312/bryan-dimas"}, "is_accepted": true, "score": 2, "last_activity_date": 1449003387, "last_edit_date": 1495541713, "creation_date": 1449003387, "answer_id": 34029983, "question_id": 34028738, "link": "https://stackoverflow.com/questions/34028738/convert-html-response-to-json/34029983#34029983", "title": "Convert html response to json", "body": "<p>Unfortunately at this time you cannot convert html straight to json, but you can convert html to a hash and then the hash to json.</p>\n\n<pre><code>YOUR_HTML_CODE = '&lt;!DOCTYPE RESULT SYSTEM \"http: api_link \"&gt;&lt;html&gt;&lt;body&gt; &lt;result reqid=\"57469\"&gt; &lt;mid submitdate=\"2015-12-02 00:51:55\" id=\"1\" tag=\"null\" tid=\"103335\"&gt; &lt;/mid&gt;&lt;/result&gt;&lt;/body&gt;&lt;/html&gt;'\n\n@data = Hash.from_xml(YOUR_HTML_CODE).to_json\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>=&gt; \"{\\\"html\\\":{\\\"body\\\":{\\\"result\\\":{\\\"reqid\\\":\\\"57469\\\",\\\"mid\\\":{\\\"submitdate\\\":\\\"2015-12-02 00:51:55\\\",\\\"id\\\":\\\"1\\\",\\\"tag\\\":\\\"null\\\",\\\"tid\\\":\\\"103335\\\",\\\"__content__\\\":\\\"\\\\n\\\\n    \\\"}}}}}\"\n</code></pre>\n\n<p>To find more ways to do what you want, search for rails xml to json, you will find more answers <a href=\"https://stackoverflow.com/questions/1530324/ruby-xml-to-json-converter\">on this question</a>. <a href=\"https://github.com/jnunemaker/crack\" rel=\"nofollow noreferrer\">Crack gem</a> seems to be <a href=\"http://caseyscarborough.com/blog/2013/08/03/dead-simple-xml-and-json-parsing-in-ruby/\" rel=\"nofollow noreferrer\">excellent</a> for this.</p>\n\n<p><strong>Note</strong> that if you are using rails you should be handling this on the backend, but that was not as helpful of an answer by itself, thus my answer above.</p>\n"}, {"tags": [], "owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "is_accepted": false, "score": 0, "last_activity_date": 1449009263, "last_edit_date": 1449009263, "creation_date": 1449004955, "answer_id": 34030433, "question_id": 34028738, "link": "https://stackoverflow.com/questions/34028738/convert-html-response-to-json/34030433#34030433", "title": "Convert html response to json", "body": "<p>If your api only returns <code>json</code> you can set format resource.</p>\n\n<p>Example:</p>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do  \n  resources :posts, defaults: { format: :json }\nend\n</code></pre>\n\n<p>If your api returns <code>html</code>, <code>xml</code>,and <code>json</code> you can set in your controller(remove <code>defaults: { format: :json }</code> in <code>config/routes.rb</code>):</p>\n\n<p><strong>app/controller/posts_controller.rb</strong></p>\n\n<pre><code>respond_to do |format|\n  format.html # index.html.erb\n  format.xml  { render :xml =&gt; @post }\n  format.json { render :json =&gt; @post }\nend\n</code></pre>\n"}], "owner": {"reputation": 5644, "user_id": 9908141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seDql.jpg?s=128&g=1", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/9908141/imran-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5035, "favorite_count": 0, "accepted_answer_id": 34029983, "answer_count": 2, "score": 1, "last_activity_date": 1513274838, "creation_date": 1448998994, "last_edit_date": 1513274838, "question_id": 34028738, "link": "https://stackoverflow.com/questions/34028738/convert-html-response-to-json", "title": "Convert html response to json", "body": "<p>I am trying to implement SMS API in rails, when I hit the API url I get following html response:</p>\n\n<pre><code>&lt;!DOCTYPE RESULT SYSTEM \"http: api_link \"&gt;\n&lt;html&gt;&lt;body&gt;\n&lt;result reqid=\"57469\"&gt;\n    &lt;mid submitdate=\"2015-12-02 00:51:55\" id=\"1\" tag=\"null\" tid=\"103335\"&gt;\n\n    &lt;/mid&gt;\n&lt;/result&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>How can I convert this to <code>json</code>? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cucumber", "rake", "exec"], "answers": [{"tags": [], "owner": {"reputation": 716, "user_id": 3500013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13606a3eb7144e28ba19075e3a0925a6?s=128&d=identicon&r=PG&f=1", "display_name": "irnmn", "link": "https://stackoverflow.com/users/3500013/irnmn"}, "is_accepted": true, "score": 0, "last_activity_date": 1448997274, "creation_date": 1448997274, "answer_id": 34028262, "question_id": 34028146, "link": "https://stackoverflow.com/questions/34028146/run-exec-rake-dbdrop-dbcreate-dbmigrate-dbseed-in-cucumber-before-each-sce/34028262#34028262", "title": "Run exec &#39;rake db:drop db:create db:migrate db:seed&#39; in cucumber before each scenario", "body": "<p>Have you looked into the <a href=\"https://github.com/DatabaseCleaner/database_cleaner\" rel=\"nofollow\">Database Cleaner gem</a>?\nIt might help you out with this.</p>\n"}, {"tags": [], "owner": {"reputation": 277, "user_id": 4846422, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a494b24a9c63ea80fcebe6fd4b5183c5?s=128&d=identicon&r=PG", "display_name": "mahu", "link": "https://stackoverflow.com/users/4846422/mahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1449044529, "creation_date": 1449044529, "answer_id": 34037877, "question_id": 34028146, "link": "https://stackoverflow.com/questions/34028146/run-exec-rake-dbdrop-dbcreate-dbmigrate-dbseed-in-cucumber-before-each-sce/34037877#34037877", "title": "Run exec &#39;rake db:drop db:create db:migrate db:seed&#39; in cucumber before each scenario", "body": "<p>Didn't understand database_cleaner at first, but now I do.... there was the problem for seeding the \"cleaned\" DB.\nWhat I did now is (in the env.rb)</p>\n\n<pre><code>begin\n    require 'database_cleaner'\n    require 'database_cleaner/cucumber'\n    DatabaseCleaner.strategy = :truncation\n  rescue NameError\n    raise \"You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it.\"\nend\nBefore do |scenario|\n    load Rails.root.join('db/seeds.rb')\nend\nAround do |scenario, block|\n    DatabaseCleaner.cleaning(&amp;block)\nend\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 4846422, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a494b24a9c63ea80fcebe6fd4b5183c5?s=128&d=identicon&r=PG", "display_name": "mahu", "link": "https://stackoverflow.com/users/4846422/mahu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 34028262, "answer_count": 2, "score": 2, "last_activity_date": 1449044529, "creation_date": 1448996890, "question_id": 34028146, "link": "https://stackoverflow.com/questions/34028146/run-exec-rake-dbdrop-dbcreate-dbmigrate-dbseed-in-cucumber-before-each-sce", "title": "Run exec &#39;rake db:drop db:create db:migrate db:seed&#39; in cucumber before each scenario", "body": "<p>I searched and tried a lot, but did not find my answer.\nI have some feature files for my project written in gherkin (in a rails project). All steps are defined and the features themselves run pretty good if I start them each single.\nThat I can run all scenarios together with cucumber I need to perform \nrake db:drop db:create db:migrate db:seed before each scenario.\nI tried  exec 'rake db:drop db:create db:migrate db:seed' in a begin function in the env.rb and I tried the same in a backgound step in the features. The command is executed but after that cucumber stops and the scenarios are not executed. How can I use this so?</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 905, "user_id": 2641483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849d311ae1e79d161a6c93b2f9f881bf?s=128&d=identicon&r=PG&f=1", "display_name": "sourcx", "link": "https://stackoverflow.com/users/2641483/sourcx"}, "is_accepted": false, "score": 0, "last_activity_date": 1449759379, "creation_date": 1449759379, "answer_id": 34205049, "question_id": 34028070, "link": "https://stackoverflow.com/questions/34028070/rails-admin-has-many-through-relationship-leading-to-errors/34205049#34205049", "title": "rails admin has_many through relationship leading to errors", "body": "<p>perhaps a late response, but could you compare the relevant part of your database schema with the following and let me know the difference? I believe the relations are setup correctly so that should be the problem.</p>\n\n<pre><code>create_table \"companies\", force: :cascade do |t|\n  t.string \"name\"\nend\n\ncreate_table \"company_talent_infos\", force: :cascade do |t|\n  t.string  \"metadata\"\n  t.integer \"company_id\"\n  t.integer \"talent_id\"\nend\n\ncreate_table \"talents\", force: :cascade do |t|\n  t.string \"name\"\nend\n</code></pre>\n"}], "owner": {"reputation": 688, "user_id": 1930053, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3cfa0f5170e627390fdd2acaec874b86?s=128&d=identicon&r=PG", "display_name": "Ashish Singh", "link": "https://stackoverflow.com/users/1930053/ashish-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449759379, "creation_date": 1448996603, "question_id": 34028070, "link": "https://stackoverflow.com/questions/34028070/rails-admin-has-many-through-relationship-leading-to-errors", "title": "rails admin has_many through relationship leading to errors", "body": "<p>I am using rails_admin gem for admin interface.</p>\n\n<p>I have a <strong>has_many through</strong> relationship which doesn't seem to work with rails admin.</p>\n\n<pre><code>class Company &lt; ActiveRecord::Base\n    has_many :talent_infos, class_name: 'CompanyTalentInfo'\n    has_many :talents, through: :talent_infos\nend\n\nclass CompanyTalentInfo &lt; ActiveRecord::Base\n    belongs_to :company\n    belongs_to :talent\nend\n\nclass Talent &lt; ActiveRecord::Base\n    has_many :talent_infos, class_name: 'CompanyTalentInfo'\n    has_many :companies, through: :talent_infos\nend\n</code></pre>\n\n<p>I get error every time I try to create a new company and my guess is that its the first time when rails_admin tries to check the relationships and it doesn't accept my current associations.</p>\n\n<p>The error I get is this file gems/rails_admin-0.7.0/app/views/rails_admin/main/_form_filtering_multiselect.html.haml:21</p>\n\n<pre><code>21     controller.list_entries(config, :index, field.associated_collection_scope, false).map { |o| [o.send(field.associated    _object_label_method), o.send(field.associated_primary_key)] }.sort_by {|a| [selected_ids.index(a[1]) || selected_ids.si    ze, i+=1] }\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code> undefined method `klass' for nil:NilClass`\n</code></pre>\n\n<p>Can anyone help me with this association how can I fix it.</p>\n"}]