[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1432770383, "post_id": 30494890, "comment_id": 49067476, "body": "Your question is unclear. How do you intend to get that result? What do the keys have to do with it?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1432833725, "post_id": 30494890, "comment_id": 49101483, "body": "You can have the hold released if you editt to clarify. If the first paragraph of my answer is accurate, feel free to use it, modified or <i>verbayim</i>. Also, I suggest you explain why, in your example, <code>array1.last</code> was kept but <code>array1.first</code> was not."}], "answers": [{"comments": [{"owner": {"reputation": 32522, "user_id": 419075, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/90b33a04a2ccc63534d1d9f4aac1fb7a?s=128&d=identicon&r=PG", "display_name": "Amir Raminfar", "link": "https://stackoverflow.com/users/419075/amir-raminfar"}, "edited": false, "score": 1, "creation_date": 1432770449, "post_id": 30494982, "comment_id": 49067492, "body": "Note that I just wrote it and it worked. But I didn&#39;t really test it. You should try it your self. It&#39;s pretty easy with <code>irb</code>"}], "tags": [], "owner": {"reputation": 32522, "user_id": 419075, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/90b33a04a2ccc63534d1d9f4aac1fb7a?s=128&d=identicon&r=PG", "display_name": "Amir Raminfar", "link": "https://stackoverflow.com/users/419075/amir-raminfar"}, "is_accepted": false, "score": 1, "last_activity_date": 1432770402, "creation_date": 1432770402, "answer_id": 30494982, "question_id": 30494890, "link": "https://stackoverflow.com/questions/30494890/ruby-compare-two-arrays-of-hash-with-certain-keys/30494982#30494982", "title": "ruby compare two arrays of hash, with certain keys", "body": "<p>So you really should try this out yourself because I am basically solving it for you. </p>\n\n<p>The general approach would be: </p>\n\n<ol>\n<li>For every time in array1</li>\n<li>Check to see the same value in array2 has any keys and values with the same value</li>\n<li>If they do then, delete it </li>\n</ol>\n\n<p>You would probably end up with something like <code>array1.each_with_index { |h, i|  h.delete_if {|k,v| array2[i].has_key?(k) &amp;&amp; array2[i][k] == v }  }</code></p>\n"}, {"comments": [{"owner": {"reputation": 32522, "user_id": 419075, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/90b33a04a2ccc63534d1d9f4aac1fb7a?s=128&d=identicon&r=PG", "display_name": "Amir Raminfar", "link": "https://stackoverflow.com/users/419075/amir-raminfar"}, "edited": false, "score": 0, "creation_date": 1432784997, "post_id": 30495256, "comment_id": 49070801, "body": "you deserve an up one because. Damn. That&#39;s a lot to write lol"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 32522, "user_id": 419075, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/90b33a04a2ccc63534d1d9f4aac1fb7a?s=128&d=identicon&r=PG", "display_name": "Amir Raminfar", "link": "https://stackoverflow.com/users/419075/amir-raminfar"}, "edited": false, "score": 2, "creation_date": 1432785441, "post_id": 30495256, "comment_id": 49070901, "body": "Thanks, @AmirRaminfar. I realize that for &gt; 90% of readers this is gross overkill. They will look at the code and know what&#39;s going on. I often include such gory detail because I think it&#39;s helpful to newbies to be able work through the details, particularly to help them understand how enumerators work."}, {"owner": {"reputation": 2430, "user_id": 1174306, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uGMjO.jpg?s=128&g=1", "display_name": "Bruce Xinda Lin", "link": "https://stackoverflow.com/users/1174306/bruce-xinda-lin"}, "edited": false, "score": 0, "creation_date": 1432837815, "post_id": 30495256, "comment_id": 49103928, "body": "@CarySwoveland  Thanks for the detailed answer! It&#39;s really clear and helpful."}, {"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1501535006, "post_id": 30495256, "comment_id": 77811851, "body": "@CarySwoveland, when you get a chance, can you peek over at <a href=\"https://stackoverflow.com/questions/45336535/ruby-show-deltas-between-2-array-of-hashes-based-on-subset-of-hash-keys\" title=\"ruby show deltas between 2 array of hashes based on subset of hash keys\">stackoverflow.com/questions/45336535/&hellip;</a> and confirm my suspicion that your solution here will also solve my problem?  Thanks in advance!"}, {"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1503977568, "post_id": 30495256, "comment_id": 78819019, "body": "@CarySwoveland, would you be so kind to suggest how I might go about  modifying this to show deltas on both sides of two similar data sets.  In my data, <code>array1</code> is an array of hashes for July and <code>array2</code> an array of hashes for Aug.  I&#39;d like to be able to see what was in July that no longer exists in August (fixed), what  was not in July that now exists in August (found), and what is the same.  I&#39;m using your short answer above and only focused on a subset of keys.  I believe the answer above produces what exists in August that didn&#39;t in July - how might I adapt it to show all 3 &quot;sides&quot;?Thx!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1503988526, "post_id": 30495256, "comment_id": 78822479, "body": "@KurtW, I&#39;ll have a look at that tomorrow AM..."}, {"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1504021932, "post_id": 30495256, "comment_id": 78845124, "body": "@CarySwoveland, you&#39;re the best.  Thank you so much."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 9, "last_activity_date": 1474300636, "last_edit_date": 1474300636, "creation_date": 1432772591, "answer_id": 30495256, "question_id": 30494890, "link": "https://stackoverflow.com/questions/30494890/ruby-compare-two-arrays-of-hash-with-certain-keys/30495256#30495256", "title": "ruby compare two arrays of hash, with certain keys", "body": "<p>As I understand, you are given two arrays of hashes and a set of keys. You want to reject all elements (hashes) of the first array whose values match the values of any element (hash) of the second array, for all specified keys. You can do that as follows.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>require 'set'\n\ndef reject_partial_dups(array1, array2, keys)\n  set2 = array2.each_with_object(Set.new) do |h,s|\n     s &lt;&lt; h.values_at(*keys) if (keys-h.keys).empty? \n  end\n  array1.reject do |h|\n    (keys-h.keys).empty? &amp;&amp; set2.include?(h.values_at(*keys))\n  end\nend\n</code></pre>\n\n<p>The line:</p>\n\n<pre><code>(keys-h.keys).empty? &amp;&amp; set2.include?(h.values_at(*keys))\n</code></pre>\n\n<p>can be simplified to:</p>\n\n<pre><code>set2.include?(h.values_at(*keys))\n</code></pre>\n\n<p>if none of the values of keys in the elements (hashes) of <code>array1</code> are <code>nil</code>. I created a set (rather than an array) from <code>array2</code> in order to speed the lookup of <code>h.values_at(*keys)</code> in that line. </p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>keys = [:a, :b]\narray1 = [{a: '1', b:'2', c:'3'}, {a: '4', b: '5', c:'6'}, {a: 1, c: 4}]\narray2 = [{a: '1', b:'2', c:'10'}, {a: '3', b: '5', c:'6'}]\nreject_partial_dups(array1, array2, keys)\n  #=&gt; [{:a=&gt;\"4\", :b=&gt;\"5\", :c=&gt;\"6\"}, {:a=&gt;1, :c=&gt;4}] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p><strong><em>First create <code>set2</code></em></strong></p>\n\n<pre><code>e0 = array2.each_with_object(Set.new)\n  #=&gt; #&lt;Enumerator: [{:a=&gt;\"1\", :b=&gt;\"2\", :c=&gt;\"10\"}, {:a=&gt;\"3\", :b=&gt;\"5\", :c=&gt;\"6\"}]\n  #     #:each_with_object(#&lt;Set: {}&gt;)&gt; \n</code></pre>\n\n<p>Pass the first element of <code>e0</code> and perform the block calculation.</p>\n\n<pre><code>h,s = e0.next\n  #=&gt; [{:a=&gt;\"1\", :b=&gt;\"2\", :c=&gt;\"10\"}, #&lt;Set: {}&gt;]\nh #=&gt; {:a=&gt;\"1\", :b=&gt;\"2\", :c=&gt;\"10\"} \ns #=&gt; #&lt;Set: {}&gt; \n(keys-h.keys).empty?\n  #=&gt; ([:a,:b]-[:a,:b,:c]).empty? =&gt; [].empty? =&gt; true\n</code></pre>\n\n<p>so compute:</p>\n\n<pre><code>s &lt;&lt; h.values_at(*keys)\n  #=&gt; s &lt;&lt; {:a=&gt;\"1\", :b=&gt;\"2\", :c=&gt;\"10\"}.values_at(*[:a,:b] }\n  #=&gt; s &lt;&lt; [\"1\",\"2\"] =&gt; #&lt;Set: {[\"1\", \"2\"]}&gt; \n</code></pre>\n\n<p>Pass the second (last) element of <code>e0</code> to the block:</p>\n\n<pre><code>h,s = e0.next\n  #=&gt; [{:a=&gt;\"3\", :b=&gt;\"5\", :c=&gt;\"6\"}, #&lt;Set: {[\"1\", \"2\"]}&gt;] \n(keys-h.keys).empty?\n  #=&gt; true\n</code></pre>\n\n<p>so compute:</p>\n\n<pre><code>s &lt;&lt; h.values_at(*keys)\n  #=&gt; #&lt;Set: {[\"1\", \"2\"], [\"3\", \"5\"]}&gt; \n\nset2\n  #=&gt; #&lt;Set: {[\"1\", \"2\"], [\"3\", \"5\"]}&gt; \n</code></pre>\n\n<p><strong><em>Reject elements from <code>array1</code></em></strong></p>\n\n<p>We now iterate through <code>array1</code>, rejecting elements for which the block evaluates to <code>true</code>.</p>\n\n<pre><code>e1 = array1.reject\n  #=&gt; #&lt;Enumerator: [{:a=&gt;\"1\", :b=&gt;\"2\", :c=&gt;\"3\"},\n  #                  {:a=&gt;\"4\", :b=&gt;\"5\", :c=&gt;\"6\"}, {:a=&gt;1, :c=&gt;4}]:reject&gt; \n</code></pre>\n\n<p>The first element of <code>e1</code> is passed to the block:</p>\n\n<pre><code>h = e1.next\n  #=&gt; {:a=&gt;\"1\", :b=&gt;\"2\", :c=&gt;\"3\"} \na = (keys-h.keys).empty?\n  #=&gt; ([:a,:b]-[:a,:b,:c]).empty? =&gt; true\nb = set2.include?(h.values_at(*keys))\n  #=&gt; set2.include?([\"1\",\"2\"] =&gt; true\na &amp;&amp; b\n  #=&gt; true\n</code></pre>\n\n<p>so the first element of <code>e1</code> is rejected. Next:</p>\n\n<pre><code> h = e1.next\n   #=&gt; {:a=&gt;\"4\", :b=&gt;\"5\", :c=&gt;\"6\"} \n a = (keys-h.keys).empty?\n   #=&gt; true \n b = set2.include?(h.values_at(*keys))\n   #=&gt; set2.include?([\"4\",\"5\"] =&gt; false\n a &amp;&amp; b\n   #=&gt; false\n</code></pre>\n\n<p>so the second element of <code>e1</code> is not rejected. Lastly:</p>\n\n<pre><code>h = e1.next\n  #=&gt; {:a=&gt;1, :c=&gt;4} \na = (keys-h.keys).empty?\n  #=&gt; ([:a,:c]-[:a,:b]).empty? =&gt; [:c].empty? =&gt; false\n</code></pre>\n\n<p>so return true (meaning the last element of <code>e1</code> is not rejected), as there is no need to compute:</p>\n\n<pre><code> b = set2.include?(h.values_at(*keys))\n</code></pre>\n"}], "owner": {"reputation": 2430, "user_id": 1174306, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uGMjO.jpg?s=128&g=1", "display_name": "Bruce Xinda Lin", "link": "https://stackoverflow.com/users/1174306/bruce-xinda-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2403, "favorite_count": 1, "closed_date": 1432803237, "accepted_answer_id": 30495256, "answer_count": 2, "score": 0, "last_activity_date": 1474300636, "creation_date": 1432769796, "last_edit_date": 1432835991, "question_id": 30494890, "link": "https://stackoverflow.com/questions/30494890/ruby-compare-two-arrays-of-hash-with-certain-keys", "closed_reason": "Needs details or clarity", "title": "ruby compare two arrays of hash, with certain keys", "body": "<p>There's two arrays of hash and I want remove the 'common' elements from the two arrays, based on certain keys. For example:</p>\n\n<pre><code>array1 = [{a: '1', b:'2', c:'3'}, {a: '4', b: '5', c:'6'}]\narray2 = [{a: '1', b:'2', c:'10'}, {a: '3', b: '5', c:'6'}]\n</code></pre>\n\n<p>and the criteria keys are <strong>a</strong> and <strong>b</strong>. So when I get the result of something like </p>\n\n<pre><code>array1-array2 (don't have to overwrite '-' if there's better approach)\n</code></pre>\n\n<p>it will expect to get\n    [{a: '4', b: '5', c:'6'}]\nsine we were using a and b as the comparing criteria. It will wipe the second element out since the value for a is different for array1.last and array2.last.</p>\n"}, {"tags": ["ruby", "websocket", "redis", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1432872433, "post_id": 30497718, "comment_id": 49116157, "body": "I should point out that the Redis guidelines state that you should not use the same connection for both publishing and subscribing. so <code>store</code> should be split into <code>store</code> for publishing and data and <code>store_sub</code> for subscribing."}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 5, "last_activity_date": 1432790026, "creation_date": 1432790026, "answer_id": 30497718, "question_id": 30494841, "link": "https://stackoverflow.com/questions/30494841/redis-pub-sub-causes-web-socket-connection-to-hang/30497718#30497718", "title": "Redis Pub/Sub causes web socket connection to hang", "body": "<p>I think the problem here is that Faye uses EventMachine which means there's a reactor on your thread that is handling events, and calling your callbacks <code>ws.on(:open)</code> and <code>ws.on(:close)</code>.</p>\n\n<p>Now when you hit</p>\n\n<pre><code>store.subscribe(:updates) do |on|\n  on.message do |ch, payload|\n    puts \"Got update\"\n    ws.send(payload) if payload\n  end\nend\n</code></pre>\n\n<p>This is a blocking operation - it entirely blocks the current thread. If your current thread is blocked, the reactor can't listen for events and then call your callbacks.</p>\n\n<p>One solution to this is to run your <code>store.subscribe</code> on a different thread so it doesn't matter if it blocks that thread. </p>\n\n<p>But I think a better solution is to use a <a href=\"https://github.com/mloughran/em-hiredis\" rel=\"noreferrer\">non-blocking version of the Redis library:</a> </p>\n\n<p>From the documentation:</p>\n\n<pre><code>redis = EM::Hiredis.connect\npubsub = redis.pubsub\n\npubsub.subscribe(:updates).callback do\n    puts \"Got update\"\n    ws.send(payload) if payload\nend\n</code></pre>\n\n<p>Both of these (Redis + Faye) should register with the EventMachine reactor loop, so that it dispatches events to both.</p>\n"}], "owner": {"reputation": 2326, "user_id": 1387396, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8233eb19111b538007c1afa31416f99f?s=128&d=identicon&r=PG", "display_name": "aaronk6", "link": "https://stackoverflow.com/users/1387396/aaronk6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 2, "accepted_answer_id": 30497718, "answer_count": 1, "score": 1, "last_activity_date": 1432790026, "creation_date": 1432769475, "question_id": 30494841, "link": "https://stackoverflow.com/questions/30494841/redis-pub-sub-causes-web-socket-connection-to-hang", "title": "Redis Pub/Sub causes web socket connection to hang", "body": "<p>I'm building a web application that connects to a server via web sockets. The server component is a small Ruby application based on <code>sinatra</code>, <code>redis</code>, and <code>faye-websocket</code>. The server is running on Phusion Passenger. A separate updater daemon is constantly pulling updates from various sources and publishes them to redis (using the <code>redis</code> gem and <code>Redis::publish</code>).</p>\n\n<p>In order to push the updates to the clients I tried the following in my Sinatra app:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>get '/' do\n  if Faye::WebSocket.websocket?(request.env)\n    store = Redis.new\n    ws = Faye::WebSocket.new(request.env)\n\n    ws.on(:open) do |event|\n      store.incr('connection_count')\n      puts 'Client connected (connection count: %s)' % store.get('connection_count')\n    end\n\n    ws.on(:close) do |event|\n      store.decr('connection_count')\n      puts 'Client disconnected (connection count: %s)' % store.get('connection_count')\n    end\n\n    ws.rack_response\n\n    store.subscribe(:updates) do |on|\n      on.message do |ch, payload|\n        puts \"Got update\"\n        ws.send(payload) if payload\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This works only partially. A client can connect successfully and also receives updates but the <code>store.incr</code> and <code>store.decr</code> calls don't work. Also, the connections don't seem to be closed correctly\u2014when I fire up multiple clients, I noticed that the connections pile up and the Passenger server stops working eventually.</p>\n\n<p>Log output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>devserver_1 | App 614 stdout: Got update\ndevserver_1 | App 614 stdout: Got update\ndevserver_1 | App 614 stdout: Got update\n</code></pre>\n\n<p>When I comment out the following block, keeping track of the connections suddenly works:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>store.subscribe(:updates) do |on|\n  on.message do |ch, payload|\n    puts \"Got update\"\n    ws.send(payload) if payload\n  end\nend\n</code></pre>\n\n<p>Log output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>devserver_1 | App 1028 stdout: Client connected (connection count: 1)\ndevserver_1 | App 1039 stdout: Client connected (connection count: 2)\ndevserver_1 | App 1039 stdout: Client disconnected (connection count: 1)\ndevserver_1 | App 1028 stdout: Client disconnected (connection count: 0)\n</code></pre>\n\n<p>So using <code>Redis::subscribe</code> seems to somehow interfere with the web socket connection.</p>\n\n<p>How can I solve this?</p>\n\n<ul>\n<li>Phusion Passenger version 4.0.58</li>\n<li>ruby 2.2.0p0 (2014-12-25 revision 49005) [x86_64-linux-gnu]</li>\n<li>sinatra (1.4.6)</li>\n<li>faye-websocket (0.9.2)</li>\n</ul>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 1, "creation_date": 1432769655, "post_id": 30494767, "comment_id": 49067279, "body": "Is the <code>X</code> literal or a variable for anything?"}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 3592474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cuIL1.jpg?s=128&g=1", "display_name": "Lowell Mower", "link": "https://stackoverflow.com/users/3592474/lowell-mower"}, "edited": false, "score": 0, "creation_date": 1432770806, "post_id": 30494875, "comment_id": 49067577, "body": "Thank you this is perfect"}], "tags": [], "owner": {"reputation": 3070, "user_id": 903163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/229511d26cfadb3a4f6bec973577fe1e?s=128&d=identicon&r=PG", "display_name": "Exupery", "link": "https://stackoverflow.com/users/903163/exupery"}, "is_accepted": true, "score": 0, "last_activity_date": 1432770363, "last_edit_date": 1432770363, "creation_date": 1432769700, "answer_id": 30494875, "question_id": 30494767, "link": "https://stackoverflow.com/questions/30494767/grabbing-data-from-a-string-with-regex-in-ruby/30494875#30494875", "title": "grabbing data from a string with regex in Ruby", "body": "<p>The pattern <code>.*\\[(.*?)\\].*</code> should suit your needs (note escaping of the brackets) and put whatever is between the brackets in the first/only match group.</p>\n\n<p>e.g. <code>'2.[X]: Eat a pancake'.match('.*\\[(.*?)\\].*')[1]</code> will return <code>X</code> and <code>'4.[ ]: Make a model airplane'.match('.*\\[(.*?)\\].*')[1]</code> will return a space.</p>\n\n<p>If you don't want any matches returned if there is no X (or whatever) replace the <code>.*?</code> in brackets with what you would like to match, like <code>.*\\[([A-Z]*)\\].*</code> if you're only expecting a capital letter.</p>\n"}, {"comments": [{"owner": {"reputation": 263, "user_id": 3592474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cuIL1.jpg?s=128&g=1", "display_name": "Lowell Mower", "link": "https://stackoverflow.com/users/3592474/lowell-mower"}, "edited": false, "score": 0, "creation_date": 1432770871, "post_id": 30494947, "comment_id": 49067595, "body": "I appreciate this answer but in my case, though not stated above, the string could also contain an X somewhere else, thus I need to grab the one between the hard brackets"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 263, "user_id": 3592474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cuIL1.jpg?s=128&g=1", "display_name": "Lowell Mower", "link": "https://stackoverflow.com/users/3592474/lowell-mower"}, "edited": false, "score": 0, "creation_date": 1432775739, "post_id": 30494947, "comment_id": 49068691, "body": "@LowellMower, I edited a couple of times. I don&#39;t know which version you saw, but the last version does what you want."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1432770179, "creation_date": 1432770179, "answer_id": 30494947, "question_id": 30494767, "link": "https://stackoverflow.com/questions/30494767/grabbing-data-from-a-string-with-regex-in-ruby/30494947#30494947", "title": "grabbing data from a string with regex in Ruby", "body": "<pre><code>line = '53.[X]: Change the sheets'\n\nif line.include? '[X]'\n  puts 'This answer was selected'\nend\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 3592474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cuIL1.jpg?s=128&g=1", "display_name": "Lowell Mower", "link": "https://stackoverflow.com/users/3592474/lowell-mower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 30494875, "answer_count": 2, "score": 1, "last_activity_date": 1432770363, "creation_date": 1432768978, "last_edit_date": 1432769381, "question_id": 30494767, "link": "https://stackoverflow.com/questions/30494767/grabbing-data-from-a-string-with-regex-in-ruby", "title": "grabbing data from a string with regex in Ruby", "body": "<p>I could use some help writing a regex to select only the \"X\" in between the hard brackets. The information is in a text file and I can each line will be its own string.</p>\n\n<pre><code>1.[ ]: Build a blanket fort\n2.[X]: Eat a pancake\n53.[X]: Change the sheets\n4.[ ]: Make a model airplane\n10.[X]: FizzBuzz\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "braintree", "activemerchant"], "answers": [{"comments": [{"owner": {"reputation": 5972, "user_id": 58876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPdGs.jpg?s=128&g=1", "display_name": "Jordan Brough", "link": "https://stackoverflow.com/users/58876/jordan-brough"}, "edited": false, "score": 0, "creation_date": 1460397986, "post_id": 30509802, "comment_id": 60712389, "body": "Is this still the case?"}, {"owner": {"reputation": 743, "user_id": 1661737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RvVjG.gif?s=128&g=1", "display_name": "Jessica d", "link": "https://stackoverflow.com/users/1661737/jessica-d"}, "edited": false, "score": 1, "creation_date": 1461879958, "post_id": 30509802, "comment_id": 61413183, "body": "I work at Braintree. The ActiveMerchant gem now supports nonces with Braintree, so as long as you pass a <code>payment_method_nonce</code> instead of a credit card number when creating a transaction or payment method, the PCI compliance implications are the same as a direct Braintree integration using nonces. However, ActiveMerchant does not support all features Braintree offers, such as recurring billing (<a href=\"https://github.com/activemerchant/active_merchant/wiki/gatewayfeaturematrix#features-by-gateway\" rel=\"nofollow noreferrer\">github.com/activemerchant/active_merchant/wiki/&hellip;</a>)."}, {"owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "reply_to_user": {"reputation": 5972, "user_id": 58876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPdGs.jpg?s=128&g=1", "display_name": "Jordan Brough", "link": "https://stackoverflow.com/users/58876/jordan-brough"}, "edited": false, "score": 0, "creation_date": 1461909636, "post_id": 30509802, "comment_id": 61421158, "body": "@JordanBrough see Jessica&#39;s comment."}], "tags": [], "owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "is_accepted": true, "score": 0, "last_activity_date": 1432824144, "creation_date": 1432824144, "answer_id": 30509802, "question_id": 30494730, "link": "https://stackoverflow.com/questions/30494730/advantages-of-braintree-gem-over-activemerchant-braintree-gem/30509802#30509802", "title": "Advantages of braintree gem over ActiveMerchant braintree gem", "body": "<p><sub>I work at Braintree. You can always <a href=\"https://support.braintreepayments.com/\" rel=\"nofollow\">get in touch with our support team</a> if you have more questions.</sub></p>\n\n<p>The ActiveMerchant gem uses an outdated integration method to integrate with Braintree. It may have different PCI compliance implications than a <a href=\"https://www.braintreepayments.com/v.zero\" rel=\"nofollow\">v.zero integration</a>, as well as lacking new features of the Braintree API.</p>\n\n<p>Until ActiveMerchant is upgraded, I'd suggest using the Braintree gem directly.</p>\n"}], "owner": {"reputation": 43, "user_id": 4021604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Hxw-mEBz174/AAAAAAAAAAI/AAAAAAAAADY/bqDKSF4P9ZQ/photo.jpg?sz=128", "display_name": "Mark Agbuya", "link": "https://stackoverflow.com/users/4021604/mark-agbuya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 30509802, "answer_count": 1, "score": 2, "last_activity_date": 1432824144, "creation_date": 1432768727, "last_edit_date": 1432823775, "question_id": 30494730, "link": "https://stackoverflow.com/questions/30494730/advantages-of-braintree-gem-over-activemerchant-braintree-gem", "title": "Advantages of braintree gem over ActiveMerchant braintree gem", "body": "<p>I'm in the process of switching from a gateway implemented in ActiveMerchant to the Braintree gateway. I noticed that there was a braintree gateway in ActiveMerchant and there is also a braintree_ruby gem by braintree.</p>\n\n<p>Since our system is already designed around active merchant, there will be quite a bit of refactoring needed to switch over to the Braintree gem.</p>\n\n<p>Is there anything you can't do with the ActiveMerchant Braintree gem that you can in the Braintree gem?</p>\n\n<p>What advantages does using the Braintree gem have over the ActiveMerchant Braintree gem?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "makefile", "gem"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1432767997, "post_id": 30494322, "comment_id": 49066766, "body": "How would you perform that check <i>outside</i> of a makefile?"}, {"owner": {"reputation": 7134, "user_id": 571230, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0TYLx.jpg?s=128&g=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/571230/karol"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1432769044, "post_id": 30494322, "comment_id": 49067071, "body": "@EtanReisner If I know how to do it, I wouldn&#39;t have a problem with a <code>Makefile</code>. The example checks are here but don&#39;t help me much: <a href=\"http://stackoverflow.com/questions/1032114/check-for-ruby-gem-availability\" title=\"check for ruby gem availability\">stackoverflow.com/questions/1032114/&hellip;</a> I could probably write a <code>.rb</code> script to perform a check and output/return something, but I&#39;m leaving it as a last resort."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1432769646, "post_id": 30494322, "comment_id": 49067277, "body": "My point is the &quot;in a makefile&quot; bit here isn&#39;t material to the question. If you can check outside of a makefile you can check inside one. So if your question is how to check then you should ask that (and leave out the makefile bit) and that question you linked to would seem to be have your answer already. So if that&#39;s not the question then what is the question? You can&#39;t magically do anything in a makefile that you can&#39;t do normally. So if you normally need a ruby script then you need one in a makefile too."}, {"owner": {"reputation": 7134, "user_id": 571230, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0TYLx.jpg?s=128&g=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/571230/karol"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1432805528, "post_id": 30494322, "comment_id": 49080943, "body": "@EtanReisner yeah you&#39;re right - there was nothing I could do within <code>Makefile</code> itself, so I created a simple <code>ruby</code> script to cope with the problem."}], "answers": [{"comments": [{"owner": {"reputation": 7134, "user_id": 571230, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0TYLx.jpg?s=128&g=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/571230/karol"}, "edited": false, "score": 0, "creation_date": 1432805723, "post_id": 30495913, "comment_id": 49081083, "body": "Yep, I need a raw <code>sass</code> gem. It&#39;s not a <code>ruby</code> application I&#39;m developing. I came up with an idea and added my answer."}], "tags": [], "owner": {"reputation": 13349, "user_id": 224334, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bfeafb6026cbf6128309744296c6d726?s=128&d=identicon&r=PG", "display_name": "RyanWilcox", "link": "https://stackoverflow.com/users/224334/ryanwilcox"}, "is_accepted": false, "score": 0, "last_activity_date": 1432777878, "creation_date": 1432777878, "answer_id": 30495913, "question_id": 30494322, "link": "https://stackoverflow.com/questions/30494322/how-to-install-gem-via-makefile-if-it-doesnt-exist/30495913#30495913", "title": "How to install gem via Makefile if it doesn&#39;t exist", "body": "<p>It's now traditional in the Ruby community to use <a href=\"http://bundler.io/\" rel=\"nofollow\">Bundler</a> to manage / install dependencies. This will install Gems without you having sudo privs, and also will keep different Ruby project's gems separate.</p>\n\n<p>If you must install the gem raw, look into <a href=\"http://rvm.io\" rel=\"nofollow\">RVM</a> or <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow\">rbenv</a> which both install Ruby and any future gems in your home directory. There' some logic you'd have to add to your Makefile to get it to use the new Ruby in your home folder (rbenv may make this easier than rvm, although Idon't know for sure)... but it's not hard.</p>\n"}, {"tags": [], "owner": {"reputation": 7134, "user_id": 571230, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0TYLx.jpg?s=128&g=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/571230/karol"}, "is_accepted": false, "score": 0, "last_activity_date": 1433114499, "last_edit_date": 1433114499, "creation_date": 1432805424, "answer_id": 30502554, "question_id": 30494322, "link": "https://stackoverflow.com/questions/30494322/how-to-install-gem-via-makefile-if-it-doesnt-exist/30502554#30502554", "title": "How to install gem via Makefile if it doesn&#39;t exist", "body": "<p>One quick way to accomplish the task is writing an <code>.rb</code> script and execute it from a <code>Makefile</code>. The simplest script I came up with goes as follows:</p>\n\n<pre><code>#!/usr/bin/env ruby\nif !Gem::Specification::find_all_by_name('sass').any?\n  exec(\"sudo gem install sass\")\nend\n</code></pre>\n\n<p><code>find_all_by_name</code> is always returning an array and doesn't raise an error when it can't find anything (as <code>find_by_name</code> does).</p>\n\n<p>Makefile:</p>\n\n<pre><code>default:\n    ./install.rb\n</code></pre>\n\n<p>Make sure <code>install.rb</code> is executable:</p>\n\n<pre><code>chmod +x install.rb\n</code></pre>\n\n<p>Run it using <code>make</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1432820463, "last_edit_date": 1432820463, "creation_date": 1432819678, "answer_id": 30507966, "question_id": 30494322, "link": "https://stackoverflow.com/questions/30494322/how-to-install-gem-via-makefile-if-it-doesnt-exist/30507966#30507966", "title": "How to install gem via Makefile if it doesn&#39;t exist", "body": "<p>From the command line you can see if a gem is installed with <code>gem list &lt;gemname&gt;</code>. This prints out a list of installed gems that match <code>&lt;gemname&gt;</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ gem list sass\n\n*** LOCAL GEMS ***\n\nsass (3.4.13, 3.4.1, 3.2.19)\nsass-rails (5.0.1, 4.0.3)\n</code></pre>\n\n<p>The argument is actually a regex, so you can be more specific, checking e.g. only the Sass gem itself:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ gem list \\^sass\\$\n\n*** LOCAL GEMS ***\n\nsass (3.4.13, 3.4.1, 3.2.19)\n</code></pre>\n\n<p>The <code>-i</code> flag to <code>list</code> makes it produce output more usable in scripts, printing <code>true</code> or <code>false</code>, and having a suitable exit status:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ gem list \\^sass\\$ -i\ntrue\n$ echo $?\n0\n$ gem list \\^notsass\\$ -i\nfalse\n$ echo $?\n1\n</code></pre>\n\n<p>You can combine this with Make\u2019s conditionals, and the <a href=\"https://www.gnu.org/software/make/manual/html_node/Shell-Function.html\" rel=\"nofollow\"><code>shell</code> function</a> (assuming GNU make) to check if a gem is installed from your <code>makefile</code>:</p>\n\n<pre><code>ifeq ($(shell gem list \\^sass\\$$ -i), false)\n    gem install sass\nendif\n</code></pre>\n\n<p>(The extra <code>$</code> is needed to prevent make trying to expand it as a variable.)</p>\n"}], "owner": {"reputation": 7134, "user_id": 571230, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0TYLx.jpg?s=128&g=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/571230/karol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 0, "accepted_answer_id": 30507966, "answer_count": 3, "score": 0, "last_activity_date": 1433114499, "creation_date": 1432766380, "question_id": 30494322, "link": "https://stackoverflow.com/questions/30494322/how-to-install-gem-via-makefile-if-it-doesnt-exist", "title": "How to install gem via Makefile if it doesn&#39;t exist", "body": "<p>I'm creating a <code>Makefile</code> for my project:</p>\n\n<pre><code>build:\n    sudo gem install sass\n</code></pre>\n\n<p>Any time I build it's asking me for my superuser password. If I remove <code>sudo</code> it will not install at all, but throw an error instead, as I don't have permissions to install a <code>gem</code>.</p>\n\n<p>So I came up with an idea, that I want to check whether the <code>gem</code> already exists, and run installing command only when it doesn't.</p>\n\n<p>So the question is how to perform this check inside <code>Makefile</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encoding", "utf-8", "ftp"], "comments": [{"owner": {"reputation": 324, "user_id": 905987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a0c7d88ecacb16e0fa21b4d43446425?s=128&d=identicon&r=PG", "display_name": "Ollie", "link": "https://stackoverflow.com/users/905987/ollie"}, "edited": false, "score": 0, "creation_date": 1432804919, "post_id": 30494001, "comment_id": 49080563, "body": "Does this help? <a href=\"https://stackoverflow.com/questions/9905268/ruby-1-9-netftp-encodingundefinedconversionerror\" title=\"ruby 1 9 netftp encodingundefinedconversionerror\">stackoverflow.com/questions/9905268/&hellip;</a>"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1442374099, "post_id": 30494001, "comment_id": 53051168, "body": "what line is the exception actually being raised from? Look at the exception trace, and find the line in your source file above that is actually included.  is it the line <code>files = ftp.list(&#39;*&#39; + value + &#39;*&#39;)</code>?"}, {"owner": {"reputation": 1691, "user_id": 2564673, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0KPFu.jpg?s=128&g=1", "display_name": "Cyrus Zei", "link": "https://stackoverflow.com/users/2564673/cyrus-zei"}, "edited": false, "score": 0, "creation_date": 1453192227, "post_id": 30494001, "comment_id": 57481874, "body": "since people are upvoting my answer you can mark my respons as correct maybe ?"}], "answers": [{"comments": [{"owner": {"reputation": 626, "user_id": 539529, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/99b9813828c1980aaed21241da0739d1?s=128&d=identicon&r=PG", "display_name": "Ken", "link": "https://stackoverflow.com/users/539529/ken"}, "edited": false, "score": 0, "creation_date": 1458259754, "post_id": 33422125, "comment_id": 59793784, "body": "Thank you for posting this! I&#39;ve been struggling with this error for a while and this fixed it."}, {"owner": {"reputation": 1691, "user_id": 2564673, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0KPFu.jpg?s=128&g=1", "display_name": "Cyrus Zei", "link": "https://stackoverflow.com/users/2564673/cyrus-zei"}, "reply_to_user": {"reputation": 626, "user_id": 539529, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/99b9813828c1980aaed21241da0739d1?s=128&d=identicon&r=PG", "display_name": "Ken", "link": "https://stackoverflow.com/users/539529/ken"}, "edited": false, "score": 1, "creation_date": 1458285547, "post_id": 33422125, "comment_id": 59801548, "body": "yeah no problem, same here, I tried to encode it after, but when I refactor my code I noticed that I always tried to encode it after, but never before I assigned it to a variable. Glad it helped you"}, {"owner": {"reputation": 631, "user_id": 5585943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a364cbb3ba5972c13ec5440c1113c9ed?s=128&d=identicon&r=PG&f=1", "display_name": "jacob.mccrumb", "link": "https://stackoverflow.com/users/5585943/jacob-mccrumb"}, "edited": false, "score": 1, "creation_date": 1472837136, "post_id": 33422125, "comment_id": 65929468, "body": "Also useful to know, check the default encoding for external things with <code>Encoding.default_external</code> and set it to UTF-8 (if that is what you are primarially dealing with) <code>Encoding.default_external = Encoding::UTF_8</code>. I had a similar problem but with something in a gem, so I couldn&#39;t force_encoding too easily."}, {"owner": {"reputation": 116, "user_id": 1285831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3678d1663d0ac383659b3f4f1fe162a?s=128&d=identicon&r=PG", "display_name": "Jen", "link": "https://stackoverflow.com/users/1285831/jen"}, "edited": false, "score": 0, "creation_date": 1496335879, "post_id": 33422125, "comment_id": 75631767, "body": "I had the same problem, except that the occasional encoding errors was on file write.  The fix for this case is <code>file.write(str.force_encoding(&quot;UTF-8&quot;))</code>"}], "tags": [], "owner": {"reputation": 1691, "user_id": 2564673, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0KPFu.jpg?s=128&g=1", "display_name": "Cyrus Zei", "link": "https://stackoverflow.com/users/2564673/cyrus-zei"}, "is_accepted": true, "score": 23, "last_activity_date": 1446143821, "creation_date": 1446143821, "answer_id": 33422125, "question_id": 30494001, "link": "https://stackoverflow.com/questions/30494001/ruby-on-rails-encodingundefinedconversionerror-xc3-from-ascii-8bit-to-ut/33422125#33422125", "title": "Ruby on Rails - Encoding::UndefinedConversionError: &quot;\\xC3&quot; from ASCII-8BIT to UTF-8", "body": "<p>For anybody that are coming here from google this is how I fixed my encoding error.</p>\n\n<p>right before you declare of open your file add this code</p>\n\n<pre><code>.force_encoding(\"UTF-8\")\n</code></pre>\n\n<p>so before you declare the file to a variable like this :</p>\n\n<pre><code>csv_file = params[:file].read.force_encoding(\"UTF-8\")\n</code></pre>\n\n<p>Hope this will help some since I had this problem for a long time, but now it works yay!</p>\n"}], "owner": {"reputation": 701, "user_id": 1231828, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e949afa293307ddd6bcddda3bed222ed?s=128&d=identicon&r=PG", "display_name": "Dvex", "link": "https://stackoverflow.com/users/1231828/dvex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9671, "favorite_count": 0, "accepted_answer_id": 33422125, "answer_count": 1, "score": 13, "last_activity_date": 1446143821, "creation_date": 1432764738, "last_edit_date": 1432771916, "question_id": 30494001, "link": "https://stackoverflow.com/questions/30494001/ruby-on-rails-encodingundefinedconversionerror-xc3-from-ascii-8bit-to-ut", "title": "Ruby on Rails - Encoding::UndefinedConversionError: &quot;\\xC3&quot; from ASCII-8BIT to UTF-8", "body": "<p>I have a process that fetches a flat file from a mainframe via FTP. This usually works fine for some files. In others, I get: <code>Encoding::UndefinedConversionError: \"\\xC3\" from ASCII-8BIT to UTF-8</code></p>\n\n<p>That's using <code>Net::FTP's</code> <code>gettextfile</code> method.\nHere is my code:</p>\n\n<pre><code>def find_file( position, value ) # =&gt; Value = CLKDRP03.txt, Forget the variable Position\n\n    ftp = Net::FTP.new('IP') # =&gt; status 200\n    ftp.login('user','pass') # =&gt; True\n\n    files = ftp.list('*' + value + '*') # =&gt; Obtain the file\n\n    if files[0] != nil\n\n      str_file = files[0].split(\" \").last # =&gt; Obtain the name of the file. In this case CLKDRP03.txt\n\n      ftp.gettextfile(str_file,'data/input/' + str_file) # =&gt; ERROR!, str_file = CLKDRP03.txt\n      # =&gt; data/input is the path where I put the files from FTP.\n      return str_file\n\n    else  \n      return false\n    end\n\nend\n</code></pre>\n\n<p>If I comment the line of <code>ftp.gettextfile</code>, the error keeps coming.</p>\n\n<p>Thanks in advance! Sorry for my english.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-model-serializers"], "answers": [{"tags": [], "owner": {"reputation": 439, "user_id": 797881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GvLs.jpg?s=128&g=1", "display_name": "ShallmentMo", "link": "https://stackoverflow.com/users/797881/shallmentmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1440648657, "creation_date": 1440648657, "answer_id": 32240566, "question_id": 30493846, "link": "https://stackoverflow.com/questions/30493846/using-rails-serializers-active-model-serializers-to-render-key-value-pairs-bas/32240566#32240566", "title": "Using Rails Serializers (active_model_serializers) to render key/value pairs based on incremental primary keys", "body": "<p>It seems that active_model_serializer is following 1.0 of the format specified in <a href=\"http://jsonapi.org/format/\" rel=\"nofollow\">jsonapi.org/format</a>. I don't think you can do something like that, maybe you can try <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow\">jbuilder</a> or <a href=\"https://github.com/nesquena/rabl\" rel=\"nofollow\">rabl</a></p>\n\n<p>PS: Actually I have this problem, too. I can't figure it out by using active_model_serializer, If you have fixed this, please let me know.</p>\n"}], "owner": {"reputation": 1757, "user_id": 1713534, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/eb273ca665f79b6448737435eef17a6a?s=128&d=identicon&r=PG", "display_name": "Synthead", "link": "https://stackoverflow.com/users/1713534/synthead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440648657, "creation_date": 1432763915, "question_id": 30493846, "link": "https://stackoverflow.com/questions/30493846/using-rails-serializers-active-model-serializers-to-render-key-value-pairs-bas", "title": "Using Rails Serializers (active_model_serializers) to render key/value pairs based on incremental primary keys", "body": "<p>I'm trying to format the serialized output from <a href=\"https://github.com/rails-api/active_model_serializers\" rel=\"nofollow\">the active_model_serializers gem</a> as key/value pairs.</p>\n\n<p>By default, <code>ActiveModel::Serializer</code> renders an output like this:</p>\n\n<pre><code>[\n  {\n    \"id\": 1,\n    \"value\": \"foo\"\n  },\n  {\n    \"id\": 2,\n    \"value\": \"bar\"\n  }\n]\n</code></pre>\n\n<p>I'm looking to format the output like this:</p>\n\n<pre><code>{\n  1: {\n    \"value\": \"foo\"\n  },\n  2: {\n    \"value\": \"bar\"\n  }\n}\n</code></pre>\n\n<p>Is this possible using active_model_serializers?</p>\n"}, {"tags": ["ruby", "cloud9-ide"], "answers": [{"tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 0, "last_activity_date": 1432764604, "creation_date": 1432764604, "answer_id": 30493979, "question_id": 30493814, "link": "https://stackoverflow.com/questions/30493814/code-doesnt-work-in-coderbytes-but-it-works-in-cloud9/30493979#30493979", "title": "Code doesn&#39;t work in coderbytes but it works in Cloud9", "body": "<p>Coderbyte is running your code on an old version of Ruby - Ruby 1.8.7</p>\n\n<p>In this version of Ruby, using an index into a string like <code>sen[i]</code> doesn't return the character at <code>i</code>, it returns the numeric ASCII value of that character instead. That's where the numbers are coming from.</p>\n\n<p>To get the code to work on Ruby 1.8.7 you can replace <code>some_string[i]</code> with <code>some_string[i, 1]</code> - this variation returns the substring of length 1 starting at <code>i</code> so is the same as the behaviour of <code>some_string[i]</code> in more recent Ruby versions. See the docs <a href=\"http://ruby-doc.org/core-1.8.7/String.html#method-i-5B-5D\" rel=\"nofollow\">here</a> for more details.</p>\n"}], "owner": {"reputation": 329, "user_id": 4333020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gT2G3.jpg?s=128&g=1", "display_name": "coyr", "link": "https://stackoverflow.com/users/4333020/coyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 30493979, "answer_count": 1, "score": 0, "last_activity_date": 1432764604, "creation_date": 1432763707, "question_id": 30493814, "link": "https://stackoverflow.com/questions/30493814/code-doesnt-work-in-coderbytes-but-it-works-in-cloud9", "title": "Code doesn&#39;t work in coderbytes but it works in Cloud9", "body": "<p>In Cloud9 I use the following code and it works.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def LongestWord(sen)\n  i = 0\n  cha =\"&amp;@%*^$!~(){}|?&lt;&gt;\"\n  new = \"\"\n  while i &lt; sen.length\n    i2 = 0\n    ch = false\n    while i2 &lt; cha.length\n      if sen[i] == cha[i2]\n        ch = true\n      end\n      i2 += 1\n    end\n\n    if ch == false\n      new += sen[i].to_s\n    end\n    i += 1\n  end\n\n  words = new.split(\" \")\n  longest = \"\"\n  idx = 0\n  count = 0\n  while idx &lt; words.length\n    word = words[idx]\n\n    if word.length &gt; count\n      longest = word\n      count = word.length\n    end\n    idx += 1\n  end   \n  # code goes here\n  return longest\n\nend\n\n# keep this function call here \n# to see how to enter arguments in Ruby scroll down   \nLongestWord(\"beautifull word\") \n</code></pre>\n\n<p>In Codebytes in the exercise \"Longest Word\" you have to use the same STDIN in the arguments. It is the same code but changing the argument but it doesn't work:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def LongestWord(sen)\n  i = 0\n  cha =\"&amp;@%*^$!~(){}|?&lt;&gt;\"\n  new = \"\"\n  while i &lt; sen.length\n    i2 = 0\n    ch = false\n    while i2 &lt; cha.length\n      if sen[i] == cha[i2]\n        ch = true\n      end\n      i2 += 1\n    end\n\n    if ch == false\n      new += sen[i].to_s\n    end\n    i += 1\n  end\n\n  words = new.split(\" \")\n  longest = \"\"\n  idx = 0\n  count = 0\n  while idx &lt; words.length\n    word = words[idx]\n\n    if word.length &gt; count\n      longest = word\n      count = word.length\n    end\n    idx += 1\n  end   \n  # code goes here\n  return longest\n\nend\n\n# keep this function call here \n# to see how to enter arguments in Ruby scroll down   \nLongestWord(STDIN.gets) \n</code></pre>\n\n<p>I think may be something is creating some kind of conflict with the browser. The output shows a lot of numbers. Can some one help me testing the code?. Any feedback is appreciated, thanks!</p>\n"}, {"tags": ["arrays", "ruby", "find"], "answers": [{"tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 1, "last_activity_date": 1432763729, "creation_date": 1432763729, "answer_id": 30493820, "question_id": 30493793, "link": "https://stackoverflow.com/questions/30493793/return-first-value-of-an-array-that-matches-an-element-from-a-different-array/30493820#30493820", "title": "Return first value of an array that matches an element from a different array", "body": "<p>Simply do this</p>\n\n<pre><code> array_1.find { |x| array_2.include?(x) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1432763739, "creation_date": 1432763739, "answer_id": 30493822, "question_id": 30493793, "link": "https://stackoverflow.com/questions/30493793/return-first-value-of-an-array-that-matches-an-element-from-a-different-array/30493822#30493822", "title": "Return first value of an array that matches an element from a different array", "body": "<pre><code>array_1 = [ 'green', 'yellow' ]\narray_2 = [\"red\", \"yellow\", \"blue\"]\n( array_1 &amp; array_2 ).first\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1432767242, "creation_date": 1432767242, "answer_id": 30494473, "question_id": 30493793, "link": "https://stackoverflow.com/questions/30493793/return-first-value-of-an-array-that-matches-an-element-from-a-different-array/30494473#30494473", "title": "Return first value of an array that matches an element from a different array", "body": "<p>If performance is important, first convert <code>array_2</code> to a <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/set/rdoc/Set.html\" rel=\"nofollow\">Set</a>:</p>\n\n<pre><code>array_1 = %w{ green yellow orange purple mauve black blue }\narray_2 = %w{ pink red mauve white brown }\n\nrequire 'set'\n\nset_2 = array_2.to_set\narray_1.find { |e| set_2.include? e }\n  #=&gt; \"mauve\"\n</code></pre>\n\n<p>By converting <code>array_2</code> to a set at the onset, <code>set_2.include? e</code> can be executed quickly (similar to looking up the value of a hash key). By contrast, with <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-include-3F\" rel=\"nofollow\">Array#include?</a>, <code>array_2</code> must be enumerated for each element of <code>array_1</code> until a match is found.</p>\n"}], "owner": {"reputation": 1, "user_id": 4946643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654452fd0bd6660880b31cd189bc7912?s=128&d=identicon&r=PG&f=1", "display_name": "ROgbonna1", "link": "https://stackoverflow.com/users/4946643/rogbonna1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1432767242, "creation_date": 1432763595, "question_id": 30493793, "link": "https://stackoverflow.com/questions/30493793/return-first-value-of-an-array-that-matches-an-element-from-a-different-array", "title": "Return first value of an array that matches an element from a different array", "body": "<p>I would like to compare two arrays and return the first value of array 1 that matches an item from array two.  Here is what I have so far:</p>\n\n<pre><code>def find_the_color(array_1)\n  array_2 = [\"red\", \"yellow\", \"blue\"]\n  sample.find do |x|\n    x==\"red\"||x==\"yellow\"||x==\"blue\"\n  end\nend\n</code></pre>\n\n<p>I would like to do this using the array instead of separating it into 3 conditional statements.  Is there a way?</p>\n"}, {"tags": ["ruby", "process", "pid"], "answers": [{"tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": true, "score": 46, "last_activity_date": 1432762396, "creation_date": 1432762396, "answer_id": 30493537, "question_id": 30493424, "link": "https://stackoverflow.com/questions/30493424/what-is-the-difference-between-a-process-pid-ppid-uid-euid-gid-and-egid/30493537#30493537", "title": "What is the difference between a Process&#39; pid, ppid, uid, euid, gid and egid?", "body": "<p>In order:</p>\n\n<ul>\n<li><code>pid</code>: The is the process ID (PID) of the process you call the <code>Process.pid</code> method in.</li>\n<li><code>ppid</code>: The PID of the parent process (the process that spawned the current one). For example, if you run <code>ruby test.rb</code> in a bash shell, PPID in that process would be the PID of Bash. </li>\n<li><code>uid</code>: The UNIX ID of the user the process is running under. </li>\n<li><code>euid</code>: The <em>effective</em> user ID that the process is running under. The EUID determines what a program is allowed to do, based on what the user with this UID is allowed to do. Typically the same as <code>uid</code>, but can be different with commands like <code>sudo</code>. </li>\n<li><code>gid</code>: The UNIX group ID the program is running under.</li>\n<li><code>egid</code>: Like <code>euid</code>, but for groups.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1502, "user_id": 3281476, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RaC33.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/3281476/srini"}, "is_accepted": false, "score": 18, "last_activity_date": 1432825358, "last_edit_date": 1592644375, "creation_date": 1432762469, "answer_id": 30493555, "question_id": 30493424, "link": "https://stackoverflow.com/questions/30493424/what-is-the-difference-between-a-process-pid-ppid-uid-euid-gid-and-egid/30493555#30493555", "title": "What is the difference between a Process&#39; pid, ppid, uid, euid, gid and egid?", "body": "<p><strong>PID:</strong></p>\n<blockquote>\n<p>In Linux, an executable stored on disk is called a program, and a program loaded into memory and running is called a process. When a process is started, it is given a unique number called process ID (PID) that identifies that process to the system. If you ever need to kill a process, for example, you can refer to it by its PID.</p>\n</blockquote>\n<p><strong>PPID:</strong></p>\n<blockquote>\n<p>In addition to a unique process ID, each process is assigned a parent process ID (PPID) that tells which process started it. The PPID is the PID of the process\u2019s parent.</p>\n<p>For example, if process1 with a PID of 101 starts a process named process2, then process2 will be given a unique PID, such as 3240, but it will be given the PPID of 101. It\u2019s a parent-child relationship. A single parent process may spawn several child processes, each with a unique PID but all sharing the same PPID.</p>\n</blockquote>\n<p><strong>UID:</strong></p>\n<blockquote>\n<p>Unix-like operating systems identify users within the kernel by a value called a user identifier, often abbreviated to UID or User ID. The UID, along with the GID and other access control criteria, is used to determine which system resources a user can access. The password file maps textual usernames to UIDs, but in the kernel, only UID's are used.</p>\n</blockquote>\n<p><strong>EUID:</strong></p>\n<blockquote>\n<p>The effective UID (euid) of a process is used for most access checks. It is also used as the owner for files created by that process.</p>\n</blockquote>\n<p><strong>GID:</strong></p>\n<blockquote>\n<p>A group identifier, often abbreviated to GID, is a numeric value used to represent a specific group. The range of values for a GID varies amongst different systems; at the very least, a GID can be between 0 and 32,767, with one restriction: the login group for the superuser must have GID 0.</p>\n</blockquote>\n<p><strong>EGID:</strong></p>\n<blockquote>\n<p>The effective GID (egid) of a process also affects access control and may also affect file creation, depending on the semantics of the specific kernel implementation in use and possibly the mount options used.</p>\n</blockquote>\n<p>Refer these articles for more information:</p>\n<ol>\n<li><a href=\"https://delightlylinux.wordpress.com/2012/06/25/what-is-pid-and-ppid/\" rel=\"noreferrer\">What are PID and PPID?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14342773/meaning-of-pid-ppid-and-tgid\">Meaning of PID, PPID and TGID</a></li>\n<li><a href=\"http://en.wikipedia.org/wiki/User_identifier\" rel=\"noreferrer\">User identifier</a></li>\n<li><a href=\"http://en.wikipedia.org/wiki/Group_identifier\" rel=\"noreferrer\">Group identifier</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 359, "user_id": 4325630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-AqTumlgrdcA/AAAAAAAAAAI/AAAAAAAAAEY/BMldnFss8Kw/photo.jpg?sz=128", "display_name": "Nazmul Hoque Shafin", "link": "https://stackoverflow.com/users/4325630/nazmul-hoque-shafin"}, "is_accepted": false, "score": 0, "last_activity_date": 1595599901, "creation_date": 1595599901, "answer_id": 63075347, "question_id": 30493424, "link": "https://stackoverflow.com/questions/30493424/what-is-the-difference-between-a-process-pid-ppid-uid-euid-gid-and-egid/63075347#63075347", "title": "What is the difference between a Process&#39; pid, ppid, uid, euid, gid and egid?", "body": "<p>In addition to the above comprehensive answers, I would like to share few linux commands and corresponding outputs which may help  materialize the difference between <strong>real</strong> and <strong>effective</strong> user id/group for current logged in user <em>myuser</em>:</p>\n<p><strong>Real user and group names and numeric ID</strong></p>\n<pre><code>$ id\n\nuid=1000(myuser) gid=1000(myuser) groups=1000(myuser),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),119(lpadmin),130(lxd),131(sambashare)\n</code></pre>\n<p><strong>Effective user and group names and numeric ID</strong></p>\n<pre><code>$ sudo id\n\nuid=0(root) gid=0(root) groups=0(root)\n</code></pre>\n"}], "owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32732, "favorite_count": 11, "accepted_answer_id": 30493537, "answer_count": 3, "score": 44, "last_activity_date": 1595599901, "creation_date": 1432761895, "last_edit_date": 1549126752, "question_id": 30493424, "link": "https://stackoverflow.com/questions/30493424/what-is-the-difference-between-a-process-pid-ppid-uid-euid-gid-and-egid", "title": "What is the difference between a Process&#39; pid, ppid, uid, euid, gid and egid?", "body": "<p><em>Context: I'm getting the current Ruby process ID.</em></p>\n\n\n\n<pre><code>Process.pid  #=&gt; 95291\n\nProcess.ppid #=&gt; 95201\n\nProcess.uid  #=&gt; 501\n\nProcess.gid  #=&gt; 20\n\nProcess.euid #=&gt; 501\n\nProcess.egid #=&gt; 20\n</code></pre>\n"}, {"tags": ["ruby", "powershell-2.0", "winrm", "exchange-management-shell"], "answers": [{"comments": [{"owner": {"reputation": 819, "user_id": 3524468, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3632d43837fe92fda15ddf3b6ad5a8c2?s=128&d=identicon&r=PG&f=1", "display_name": "KMG", "link": "https://stackoverflow.com/users/3524468/kmg"}, "edited": false, "score": 0, "creation_date": 1480683263, "post_id": 30847484, "comment_id": 69076330, "body": "I tried to get exchange server using winrm python. could you pls help on this."}], "tags": [], "owner": {"reputation": 61, "user_id": 3272955, "user_type": "registered", "profile_image": "https://graph.facebook.com/23403049/picture?type=large", "display_name": "dmautz", "link": "https://stackoverflow.com/users/3272955/dmautz"}, "is_accepted": true, "score": 2, "last_activity_date": 1434377748, "creation_date": 1434377748, "answer_id": 30847484, "question_id": 30492804, "link": "https://stackoverflow.com/questions/30492804/run-exchange-powershell-commands-from-linux-using-ruby-winrm/30847484#30847484", "title": "Run Exchange Powershell commands from Linux using Ruby/WinRM", "body": "<p>We managed to get it to work. I had to first connect to a 'management' server to initiate the powershell command.</p>\n\n<p><code>endpoint = 'http://YOURSERVER:5985/wsman'\nkrb5_realm = 'YOURREALM'\nwinrm = WinRM::WinRMWebService.new(endpoint, :kerberos, :realm =&gt; krb5_realm)</code></p>\n\n<p>Then I had to modify the exchange command to this:</p>\n\n<p><code>exch_cmd = \"Enable-Mailbox -Identity:'DOMAIN/OU/#{fullname}' -Alias:'#{username}' -Database:'#{MailboxDB}'\"\n</code></p>\n\n<p><code>command = \"powershell -NonInteractive -WindowStyle Hidden -command \\\" $username = '#{account}'; $password = ConvertTo-SecureString '#{password}' -asplaintext -force; $UserCredential = New-Object -TypeName System.Management.Automation.PSCredential -argumentlist $username,$password; $Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri #{server} -Authentication Kerberos -Credential $UserCredential; Invoke-Command -Session $Session {#{exch_cmd}}\\\"\"</code></p>\n\n<p>On the Management and Exchange servers, the service account needs to be in the Remote Management Group. You also need to update the SDDL according to this guide: <a href=\"http://www.sevecek.com/Lists/Posts/Post.aspx?ID=280\" rel=\"nofollow\">http://www.sevecek.com/Lists/Posts/Post.aspx?ID=280</a> Depending on your server config this will be different.</p>\n"}], "owner": {"reputation": 61, "user_id": 3272955, "user_type": "registered", "profile_image": "https://graph.facebook.com/23403049/picture?type=large", "display_name": "dmautz", "link": "https://stackoverflow.com/users/3272955/dmautz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1778, "favorite_count": 1, "accepted_answer_id": 30847484, "answer_count": 1, "score": 3, "last_activity_date": 1434377748, "creation_date": 1432759538, "question_id": 30492804, "link": "https://stackoverflow.com/questions/30492804/run-exchange-powershell-commands-from-linux-using-ruby-winrm", "title": "Run Exchange Powershell commands from Linux using Ruby/WinRM", "body": "<p>I am attempting to run the enable-mailbox command for existing users in Active Directory from a ruby script. I'm using <a href=\"https://github.com/WinRb/WinRM\" rel=\"nofollow\">this winrm gem</a>. So far I have been able to connect to the exchange server using winrm and kerberos authentication. I can run an exchange management shell from powershell. From there I can execute exchange commands.</p>\n\n<p>However, when I try to run enable-mailbox I get the following error:</p>\n\n<blockquote>\n  <p>Active Directory operation failed on . The supplied credential for\n  'domain\\account' is invalid.</p>\n</blockquote>\n\n<p>The 'operation failed on .' is verbatim. There is no text in the space where you would think there should be. The domain\\account is the same one I'm using to successfully connect with winrm via kerberos.</p>\n\n<p>Here's my simple code:</p>\n\n<pre><code>endpoint = 'http://server:5985/wsman'\nkrb5_realm = 'myrealm'\nwinrm = WinRM::WinRMWebService.new(endpoint, :kerberos, :realm =&gt; krb5_realm)\n\n#exch_cmd = \"Get-Help Enable-Mailbox\" NOTE THAT THIS COMMAND WORKS FINE\nexch_cmd = \"Enable-Mailbox -Identity:'user DN' -Alias:'username' -Database:'mailbox'\"\ncommand = \"powershell -psconsolefile \\\"C:\\\\Program Files\\\\Microsoft\\\\Exchange Server\\\\V15\\\\bin\\\\exshell.psc1\\\" -command \\\". \"+exch_cmd+\"\\\"\"\n\nwinrm.cmd(command) do |stdout, stderr|\n  STDOUT.print stdout\n  STDERR.print stderr\nend\n</code></pre>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1432757833, "post_id": 30492275, "comment_id": 49062555, "body": "Could you provide a minimum working example so we can actually see what&#39;s going on? Also, double-check that your <code>eql?</code> (I think that&#39;s what&#39;s used) is implemented correctly."}, {"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "edited": false, "score": 0, "creation_date": 1432758084, "post_id": 30492275, "comment_id": 49062677, "body": "How does bad work? Could it be that they become bad between the call to delete_bad_widgets and the next call to all?"}, {"owner": {"reputation": 1339, "user_id": 3715522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HebJi.jpg?s=128&g=1", "display_name": "MCBama", "link": "https://stackoverflow.com/users/3715522/mcbama"}, "edited": false, "score": 0, "creation_date": 1432758303, "post_id": 30492275, "comment_id": 49062788, "body": "I just created a minimalist version of what you have and it worked fine when i called the delete function manually. Make sure your <code>widget.bad</code> conditional is working as you think it is."}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 2230548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93cb61a076b9a46ba5b1166e8ba70dd2?s=128&d=identicon&r=PG", "display_name": "erdostom", "link": "https://stackoverflow.com/users/2230548/erdostom"}, "edited": false, "score": 1, "creation_date": 1432823163, "post_id": 30492689, "comment_id": 49094260, "body": "Thank you, I accepted the answer below, but your answer really helped me understand what&#39;s going on!"}], "tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": false, "score": 3, "last_activity_date": 1432759069, "creation_date": 1432759069, "answer_id": 30492689, "question_id": 30492275, "link": "https://stackoverflow.com/questions/30492275/ruby-class-variable-behaving-in-unexpected-way/30492689#30492689", "title": "Ruby class variable behaving in unexpected way", "body": "<p>If you delete entries during an each it influences the loop.</p>\n\n<p>Just see this example:</p>\n\n<pre><code>a = [1,2,3,4,5,6,7]\n\np a\na.each{|x|\n  p x\n  a.delete(x) if x == 3\n}\np a\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>  [1, 2, 3, 4, 5, 6, 7]\n  1\n  2\n  3\n  5\n  6\n  7\n  [1, 2, 4, 5, 6, 7]\n</code></pre>\n\n<p>The entry 4 is not printed!\nThe each-loop keeps the index, but the sequences changed with your deletion.</p>\n\n<p>I would recommend to implement a class method <code>delete_bad</code> or a <code>delete_if</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "is_accepted": true, "score": 2, "last_activity_date": 1432759634, "last_edit_date": 1432759634, "creation_date": 1432759177, "answer_id": 30492711, "question_id": 30492275, "link": "https://stackoverflow.com/questions/30492275/ruby-class-variable-behaving-in-unexpected-way/30492711#30492711", "title": "Ruby class variable behaving in unexpected way", "body": "<p>Try using <code>reject!</code> to remove the bad widgets instead of doing the iteration yourself.</p>\n\n<pre><code>module Somemodule\n  def self.delete_bad_widgets\n    Widget.all.reject! {|widget| widget.bad}\n  end\nend\n</code></pre>\n\n<p>As knut's answer points out, using delete while iterating over an array will cause some elements to be skipped. It's generally not a good idea to insert/delete elements of a collection at the same time you are iterating over that collection.</p>\n\n<p>Also, using <code>reject!</code> (a.k.a. <code>delete_if</code>) will perform better since <code>delete</code> will essentially iterate through the entire array with each call (i.e. <code>reject!</code> give O(n) performance where -- the way you've used it -- <code>delete</code> will give O(n^2) worst case performance).</p>\n"}], "owner": {"reputation": 347, "user_id": 2230548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93cb61a076b9a46ba5b1166e8ba70dd2?s=128&d=identicon&r=PG", "display_name": "erdostom", "link": "https://stackoverflow.com/users/2230548/erdostom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 30492711, "answer_count": 2, "score": 1, "last_activity_date": 1432759634, "creation_date": 1432757587, "question_id": 30492275, "link": "https://stackoverflow.com/questions/30492275/ruby-class-variable-behaving-in-unexpected-way", "title": "Ruby class variable behaving in unexpected way", "body": "<p>I have a class variable that collects all the instance variables. It also had a method for getting them and deleting them.</p>\n\n<pre><code>module Somemodule\n  class Widget\n    @@widgets = []\n    def initialize\n      ...\n      @@widgets &lt;&lt; self\n    end\n    def self.all\n      @@widgets\n    end\n    def delete\n      @@widgets.delete(self)\n    end\n  end\nend\n</code></pre>\n\n<p>In my code, I want to delete widgets sometimes. </p>\n\n<pre><code>module Somemodule\n  def self.delete_bad_widgets\n    Widget.all.each do |widget|\n      if widget.bad\n        widget.delete\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The problem is that this doesn't delete all the bad widgets. If I call Widget.all afterwards, I can still see bad widgets. Anyone have any idea what's going on? I'm running Ruby 2.2.1.</p>\n\n<p>Thank you</p>\n\n<p>EDIT: all in all there are about 4500 widgets and the code changes them a couple of times. But I can still run something like the following (in the same delete_bad_widgets method!) and still see bad widgets:</p>\n\n<pre><code>Widget.all.each {|w| pp w if w.bad}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "edited": false, "score": 1, "creation_date": 1432757424, "post_id": 30491866, "comment_id": 49062303, "body": "Thanks :-) Easier than i thought"}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1432756128, "creation_date": 1432756128, "answer_id": 30491866, "question_id": 30491795, "link": "https://stackoverflow.com/questions/30491795/compress-two-dir-glob-to-if-else/30491866#30491866", "title": "Compress two Dir.glob to if - else", "body": "<p>Yes, I can :</p>\n\n<pre><code>Dir.glob('*.{ogg,m4a}') do |file|\n  filename = File.basename(file, File.extname(file))\nend\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Dir.html#method-c-glob\" rel=\"nofollow\">Dir::glob</a> says :</p>\n\n<blockquote>\n  <p><code>{p,q}</code> - Matches either literal <code>p</code> or literal <code>q</code>. Equivalent to pattern alternation in regexp. Matching literals may be more than one character in length. More than two literals may be specified.</p>\n</blockquote>\n"}], "owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 30491866, "answer_count": 1, "score": 0, "last_activity_date": 1432756128, "creation_date": 1432755902, "question_id": 30491795, "link": "https://stackoverflow.com/questions/30491795/compress-two-dir-glob-to-if-else", "title": "Compress two Dir.glob to if - else", "body": "<p>Actually i'm trying to compress that Dir.glob to one if-then.</p>\n\n<pre><code>Dir.glob('*.ogg') do |ogg_file|\ntestfile = ogg_file\nfilename = File.basename(testfile,File.extname(testfile))\nend\n# Submethod for searching for *.m4a files\nDir.glob('*.m4a') do |m4a_file|\ntestfile = m4a_file\nfilename = File.basename(testfile,File.extname(testfile))\nend\n</code></pre>\n\n<p>Can anyone help me to do that, so it returns just one variable \"filename\"?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4946228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1bf48a2ecf43d2aa38b77027cd4f4b?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Meeks", "link": "https://stackoverflow.com/users/4946228/brandon-meeks"}, "edited": false, "score": 0, "creation_date": 1432755691, "post_id": 30491654, "comment_id": 49061273, "body": "That did the trick. Crazy how a little thing like an equals sign can throw the whole thing off. Thanks for the help!"}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 2, "last_activity_date": 1432755691, "last_edit_date": 1432755691, "creation_date": 1432755496, "answer_id": 30491654, "question_id": 30491617, "link": "https://stackoverflow.com/questions/30491617/ruby-on-rails-view-rendering-db-info-on-page/30491654#30491654", "title": "Ruby on Rails View Rendering DB Info On Page", "body": "<p>Yes, fix is:</p>\n\n<pre><code>&lt;div class=\"categories\"&gt;\n    &lt;div class=\"container blurbs\"&gt;\n        &lt;div class=\"cards row\"&gt;\n            &lt;% @categories.each do |c| %&gt;\n            &lt;div class=\"card col-xs-4\" %&gt;\n                &lt;%= image_tag c.image, :class =&gt; \"cat\" %&gt;\n                &lt;h4 class=\"title\"&gt;&lt;%= c.title %&gt;&lt;/h4&gt;\n            &lt;/div&gt;\n            &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Look I removed <code>=</code> from this <code>&lt;%=</code>.. In the below line :</p>\n\n<pre><code>&lt;% @categories.each do |c| %&gt;\n</code></pre>\n\n<p><code>#each</code> method returns the collection after it completed its iterations. And due to this <code>&lt;%=</code>, the return value of <code>each</code> which is <code>@categories</code> printed back. But if you use <code>&lt;%..</code> only, all above things will happen, but it wouldn't print back the object <code>@categories</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4946228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1bf48a2ecf43d2aa38b77027cd4f4b?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Meeks", "link": "https://stackoverflow.com/users/4946228/brandon-meeks"}, "edited": false, "score": 0, "creation_date": 1432756571, "post_id": 30491673, "comment_id": 49061830, "body": "Gotcha. Thanks for the explanation about the use of &lt;%=  ...  %&gt;"}], "tags": [], "owner": {"reputation": 1339, "user_id": 3715522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HebJi.jpg?s=128&g=1", "display_name": "MCBama", "link": "https://stackoverflow.com/users/3715522/mcbama"}, "is_accepted": false, "score": 2, "last_activity_date": 1432826700, "last_edit_date": 1432826700, "creation_date": 1432755601, "answer_id": 30491673, "question_id": 30491617, "link": "https://stackoverflow.com/questions/30491617/ruby-on-rails-view-rendering-db-info-on-page/30491673#30491673", "title": "Ruby on Rails View Rendering DB Info On Page", "body": "<p>when you use the tags <code>&lt;%= ... %&gt;</code> whatever is within the tags gets displayed on the page. In your current view you have</p>\n\n<pre><code>&lt;%= @categories.each do |c| %&gt;\n  &lt;div class=\"card col-xs-4\" %&gt;\n    &lt;%= image_tag c.image, :class =&gt; \"cat\" %&gt;\n    &lt;h4 class=\"title\"&gt;&lt;%= c.title %&gt;&lt;/h4&gt;\n  &lt;/div&gt; \n&lt;% end %&gt;\n</code></pre>\n\n<p>Which displays the entirety of whatever the loop returns which is where you're getting the display. Change the tags to be <code>&lt;% @categories.each do |c| %&gt;</code> and you'll be good to go.</p>\n"}], "owner": {"reputation": 3, "user_id": 4946228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1bf48a2ecf43d2aa38b77027cd4f4b?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Meeks", "link": "https://stackoverflow.com/users/4946228/brandon-meeks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 30491654, "answer_count": 2, "score": 0, "last_activity_date": 1432826700, "creation_date": 1432755387, "question_id": 30491617, "link": "https://stackoverflow.com/questions/30491617/ruby-on-rails-view-rendering-db-info-on-page", "title": "Ruby on Rails View Rendering DB Info On Page", "body": "<p>I am working on a project and currently working on one of the views which is a page of different categories. Everything is rendering correctly however it's also putting the db info in the page. </p>\n\n<p>Here is the code of my view</p>\n\n<pre><code>&lt;div class=\"categories\"&gt;\n    &lt;div class=\"container blurbs\"&gt;\n        &lt;div class=\"cards row\"&gt;\n            &lt;%= @categories.each do |c| %&gt;\n            &lt;div class=\"card col-xs-4\" %&gt;\n                &lt;%= image_tag c.image, :class =&gt; \"cat\" %&gt;\n                &lt;h4 class=\"title\"&gt;&lt;%= c.title %&gt;&lt;/h4&gt;\n            &lt;/div&gt;\n            &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is a link to a \n<a href=\"https://sjconfections.tinytake.com/sf/MTcwOTAzXzEwODEzOTk\" rel=\"nofollow\">screenshot of rendered page</a></p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "mysql2"], "comments": [{"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1432755702, "post_id": 30491483, "comment_id": 49061282, "body": "Is the indenting of <code>sql_mode: &#39;&#39;</code> and <code>strict: false</code> in line with the other entries? Seems like these two lines are indented one more level."}, {"owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "reply_to_user": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1432756999, "post_id": 30491483, "comment_id": 49062073, "body": "&#39;variables&#39; is indented 2 spaces from left, sql_mode and strict are indented 4 space from left.  What I thought I saw was that these were relative to the variables branch"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "edited": false, "score": 0, "creation_date": 1432763543, "post_id": 30493669, "comment_id": 49065267, "body": "I modified the sequence, no love... I had reviewed the link you referenced before posting and that&#39;s what lead me to the variables and mode settings.  The MySQL site documentation states:   Beginning with MySQL 4.1, you can change the SQL mode at runtime.... You can retrieve the current global or session sql_mode value with the following statements:  SELECT @@GLOBAL.sql_mode; SELECT @@SESSION.sql_mode; This mode changes syntax and behavior to conform more closely to standard SQL, and is available beginning in MySQL 4.1.1."}, {"owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "edited": false, "score": 0, "creation_date": 1432763650, "post_id": 30493669, "comment_id": 49065307, "body": "So I somehow need to prevent these from being sent on the connection init."}], "tags": [], "owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1432762956, "creation_date": 1432762956, "answer_id": 30493669, "question_id": 30491483, "link": "https://stackoverflow.com/questions/30491483/rails-4-2-connect-to-old-legacy-mysql-db-error/30493669#30493669", "title": "Rails 4.2 connect to old legacy Mysql DB - Error", "body": "<p>Modify the <code>./config/database.yml</code> file as follows:</p>\n\n<pre><code>server1:\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  host: &lt;ip&gt;\n  port: 3306\n  username: &lt;user&gt;\n  password: &lt;passwd&gt;\n  database: monitor\n  strict: false\n  variables: \n    sql_mode: ''\n</code></pre>\n\n<p>Only <code>sql_mode</code> should be under the variables section. <code>strict</code> will be part of the main params. </p>\n\n<p>See <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/MysqlAdapter.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/MysqlAdapter.html</a> for an explanation of each of these params, including the <code>variables</code> param.</p>\n"}], "owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432764601, "creation_date": 1432754973, "last_edit_date": 1432764601, "question_id": 30491483, "link": "https://stackoverflow.com/questions/30491483/rails-4-2-connect-to-old-legacy-mysql-db-error", "title": "Rails 4.2 connect to old legacy Mysql DB - Error", "body": "<p>After hours of googleing, trying this and that, I'm wondering if anyone here has any suggestions on how to overcome this error.</p>\n\n<p>First, I am dealing with a very old MySQL v3.23.58 DB/Server which at this time I can't upgrade.  A migration from this db is in the works, but I have need to access it via a Rails UI at the moment.  So the error I get below appears to be an incompatibility with the initial connection string sent setting some sessions variables, yes?  I can connect to the remote DD/Server using the *nix command line mysql-client and perform queries.   I've tried changing the init values via the connection definition, no success..  I'm considering alternative options to send data from remote server to the local rails DB and query the local DB remotely.  But I'd, at this juncture, prefer to read/write directly to the remote DB.  Any assistance would be appreciated!</p>\n\n<p>Thank you</p>\n\n<pre><code>td@noc:~/rails_workspace/SC$ rails c\nLoading development environment (Rails 4.2.1)\n2.2.1 :001 &gt; ServerBan\n =&gt; ServerBan (call 'ServerBan.connection' to establish a connection) \n2.2.1 :002 &gt; b = ServerBan.first()\nMysql::Error: You have an error in your SQL syntax near 'NAMES latin1,  @@SESSION.sql_mode = '', @@SESSION.strict = 0, @@SESSION.sql_auto' at line 1\n</code></pre>\n\n<h2>./config/database.yml</h2>\n\n<pre><code>server1:\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  host: &lt;ip&gt;\n  port: 3306\n  username: &lt;user&gt;\n  password: &lt;passwd&gt;\n  database: monitor\n  strict: false\n  variables: \n    sql_mode: ''\n</code></pre>\n\n<h2>./app/models/serverban.rb</h2>\n\n<pre><code>class ServerBan &lt; ActiveRecord::Base\n    establish_connection :server1\n    self.table_name='rules'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "integration-testing"], "comments": [{"owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1432756078, "post_id": 30491480, "comment_id": 49061519, "body": "I don&#39;t think you should pass @user to the <code>get new_post_path(@user)</code> because the get new_post_path is just a form. When you create the post, the create action should take care of creating a post that is associated with the current user. Try <code>get new_post_path</code>"}, {"owner": {"reputation": 198, "user_id": 3799287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ddssd.jpg?s=128&g=1", "display_name": "Harish Ramachandran", "link": "https://stackoverflow.com/users/3799287/harish-ramachandran"}, "reply_to_user": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1432757364, "post_id": 30491480, "comment_id": 49062266, "body": "I just tried that and it&#39;s giving me the same eror."}, {"owner": {"reputation": 198, "user_id": 3799287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ddssd.jpg?s=128&g=1", "display_name": "Harish Ramachandran", "link": "https://stackoverflow.com/users/3799287/harish-ramachandran"}, "reply_to_user": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1432762095, "post_id": 30491480, "comment_id": 49064644, "body": "Is it possible to use Unit::Test integration tests with devise?  Or should I just stick with controller &amp; model tests?"}], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "is_accepted": true, "score": 6, "last_activity_date": 1441129743, "last_edit_date": 1441129743, "creation_date": 1432829156, "answer_id": 30511774, "question_id": 30491480, "link": "https://stackoverflow.com/questions/30491480/integration-testing-devise-using-testunit/30511774#30511774", "title": "Integration testing Devise using Test::Unit", "body": "<p>After you create your post in <code>post posts_path, post: @post</code> you are not being redirected to the the post/show. Type <code>follow_redirect!</code> right after like so:\n<code>\npost posts_path, post: @post\nfollow_redirect!\n</code>\nor alternatively you can do <code>post_via_redirect posts_path, post: @post</code> which will do the same. Post and then redirect to post/show.</p>\n\n<p><strong>A few notes</strong> Devise.bcrypt is deprecated as of a few days ago. So in the future if you update your Gemfile you will get an deprecation error.\nYes you can do integration tests with Rails default testing. This is an example testing if the user gets the root path with or with out signing in.  </p>\n\n<pre><code>require 'test_helper'\n\nclass UserFlowsTest &lt; ActionDispatch::IntegrationTest\n  test \"user can see home page after login\" do\n    get user_session_path\n    assert_equal 200, status\n    @david = User.create(email: \"david@mail.com\", password: Devise::Encryptor.digest(User, \"helloworld\"))\n    post user_session_path, 'user[email]' =&gt; @david.email, 'user[password]' =&gt;  @david.password\n    follow_redirect!\n    assert_equal 200, status\n    assert_equal \"/\", path\n  end\n\n  test \"user can not see home page without login\" do\n    get \"/\"\n    assert_equal 302, status\n    follow_redirect!\n    assert_equal \"/users/sign_in\", path\n    assert_equal 200, status\n  end\nend\n</code></pre>\n\n<p>Rails classes for testing (ActiveSupport::TestCase, ActionController::TestCase, ActionMailer::TestCase, ActionView::TestCase and ActionDispatch::IntegrationTest) inherit assertions from <a href=\"http://docs.seattlerb.org/minitest/Minitest/Assertions.html\" rel=\"nofollow\">minitest assertions</a> not <a href=\"http://ruby-doc.org/stdlib-2.1.0/libdoc/test/unit/rdoc/Test/Unit/Assertions.html\" rel=\"nofollow\">test unit</a>. This is true for your Rails version. </p>\n"}], "owner": {"reputation": 198, "user_id": 3799287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ddssd.jpg?s=128&g=1", "display_name": "Harish Ramachandran", "link": "https://stackoverflow.com/users/3799287/harish-ramachandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1873, "favorite_count": 1, "accepted_answer_id": 30511774, "answer_count": 1, "score": 2, "last_activity_date": 1441129743, "creation_date": 1432754969, "question_id": 30491480, "link": "https://stackoverflow.com/questions/30491480/integration-testing-devise-using-testunit", "title": "Integration testing Devise using Test::Unit", "body": "<p>I've installed and integrated Devise into my app and now I'm building its testing suite.  I'm using the default testing suite (Test::Unit?) that comes with Rails 4.2.1 and am currently working on the integration suite.  </p>\n\n<p><strong>INTEGRATION TEST:</strong></p>\n\n<pre><code>  def setup\n    @user = User.create(email: \"user@hlist.com\", \n                        encrypted_password: Devise.bcrypt(User, 'password1'))\n    @post = { title: \"This is the title\",\n               content: \"Detailed comment.\"*10,\n               phone: 9991118888,\n               email: \"email@hlist.com\",\n               user_id: users(:spiderman).id }\n    @p = @user.posts.build(@post)\n  end\n\n  test \"creates a new post successfully\" do \n    sign_in_as(@user)\n    get new_post_path(@user)\n    assert_template 'posts/new'\n    assert_difference 'Post.count', 1 do \n      post posts_path, post: @post\n    end\n    assert_template 'posts/show'\n  end\n</code></pre>\n\n<p>I also created the following method in my <strong>test_helper.rb</strong> file:</p>\n\n<pre><code>  def sign_in_as(user)\n     post_via_redirect user_session_path, 'user[:email]' =&gt; user.email, \n                           'user[:encrypted_password]' =&gt; Devise.bcrypt(User, 'password1')\n  end\n</code></pre>\n\n<p>However, I get the following error when I run the test:</p>\n\n<pre><code>  1) Failure:\nPostsCrudTest#test_creates_a_new_post_successfully [/Users/harishramachandran/dropbox/documents/harish/coding/workspace/h_list/test/integration/posts_crud_test.rb:19]:\nexpecting &lt;\"posts/new\"&gt; but rendering with &lt;[]&gt;\n</code></pre>\n\n<p>I looked for the solution online and all I've been able to find is solutions that involve RSpec or Capybara.  This is an app I'm creating to learn, among other things, the default suite before I move on to RSpec and Capybara in a different app.  Is there a way to resolve this issue in Test::Unit?</p>\n"}, {"tags": ["ruby", "hash", "stringify"], "comments": [{"owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 0, "creation_date": 1432754955, "post_id": 30491196, "comment_id": 49060780, "body": "The reverse of this: <a href=\"http://stackoverflow.com/q/8379596/1157054\">stackoverflow.com/q/8379596/1157054</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "edited": false, "score": 1, "creation_date": 1432754469, "post_id": 30491197, "comment_id": 49060521, "body": "Did you ask a question, only to answer it yourself immediately?"}, {"owner": {"reputation": 1626, "user_id": 159762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03896e8a1ac27618c696edb9bb150365?s=128&d=identicon&r=PG", "display_name": "Leigh  McCulloch", "link": "https://stackoverflow.com/users/159762/leigh-mcculloch"}, "reply_to_user": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "edited": false, "score": 1, "creation_date": 1432800141, "post_id": 30491197, "comment_id": 49077352, "body": "@AlexPan Yes I did. It&#39;s a feature of StackOverflow to provide an answer when submitting a question. The goal is knowledge sharing."}, {"owner": {"reputation": 22421, "user_id": 306478, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f790d6d3f1a75a30f6e525890f1d1964?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/306478/bijan"}, "edited": false, "score": 0, "creation_date": 1486133663, "post_id": 30491197, "comment_id": 71227947, "body": "In newer Rails you use &quot;hash.stringify_keys&quot; <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-stringify_keys\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/Hash.html#method-i-stringify_key&zwnj;&#8203;s</a>"}], "tags": [], "owner": {"reputation": 1626, "user_id": 159762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03896e8a1ac27618c696edb9bb150365?s=128&d=identicon&r=PG", "display_name": "Leigh  McCulloch", "link": "https://stackoverflow.com/users/159762/leigh-mcculloch"}, "is_accepted": false, "score": 3, "last_activity_date": 1432753961, "creation_date": 1432753961, "answer_id": 30491197, "question_id": 30491196, "link": "https://stackoverflow.com/questions/30491196/how-do-i-convert-a-ruby-hash-so-that-all-of-its-keys-are-strings/30491197#30491197", "title": "How do I convert a Ruby hash so that all of its keys are strings", "body": "<p>If you are using Rails or ActiveSupport:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>hash = { id: 123, description: \"desc\" }\nhash.stringify #=&gt; { \"id\" =&gt; 123, \"name\" =&gt; \"test\" }\n</code></pre>\n\n<p>If you are not:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>hash = { id: 123, name: \"test\" }\nHash[hash.map { |key, value| [key.to_s, value] }] #=&gt; { \"id\" =&gt; 123, \"name\" =&gt; \"test\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 4, "last_activity_date": 1432754460, "creation_date": 1432754460, "answer_id": 30491337, "question_id": 30491196, "link": "https://stackoverflow.com/questions/30491196/how-do-i-convert-a-ruby-hash-so-that-all-of-its-keys-are-strings/30491337#30491337", "title": "How do I convert a Ruby hash so that all of its keys are strings", "body": "<p>I love <code>each_with_object</code> in this case :</p>\n\n<pre><code>hash = { id: 123, name: \"test\" }\nhash.each_with_object({}) { |(key, value), h| h[key.to_s] = value }\n#=&gt; { \"id\" =&gt; 123, \"name\" =&gt; \"test\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "is_accepted": true, "score": 2, "last_activity_date": 1432754913, "creation_date": 1432754913, "answer_id": 30491465, "question_id": 30491196, "link": "https://stackoverflow.com/questions/30491196/how-do-i-convert-a-ruby-hash-so-that-all-of-its-keys-are-strings/30491465#30491465", "title": "How do I convert a Ruby hash so that all of its keys are strings", "body": "<p>In pure Ruby (without Rails), you can do this with a combination of <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>Enumerable#map</code></a> and <a href=\"http://ruby-doc.org/core/Array.html#method-i-to_h\" rel=\"nofollow\"><code>Array#to_h</code></a>:</p>\n\n<pre><code>hash = { id: 123, name: \"test\" }\nhash.map{|key, v| [key.to_s, v] }.to_h\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1434343707, "creation_date": 1434343707, "answer_id": 30837525, "question_id": 30491196, "link": "https://stackoverflow.com/questions/30491196/how-do-i-convert-a-ruby-hash-so-that-all-of-its-keys-are-strings/30837525#30837525", "title": "How do I convert a Ruby hash so that all of its keys are strings", "body": "<pre><code>h = { id: 123, name: \"test\" }\n</code></pre>\n\n<p>Assuming you want to mutate <code>h</code>:</p>\n\n<pre><code>h.keys.each { |k| h[k.to_s] = h.delete(k) }\nh #=&gt; {\"id\"=&gt;123, \"name\"=&gt;\"test\"}  \n</code></pre>\n"}], "owner": {"reputation": 1626, "user_id": 159762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03896e8a1ac27618c696edb9bb150365?s=128&d=identicon&r=PG", "display_name": "Leigh  McCulloch", "link": "https://stackoverflow.com/users/159762/leigh-mcculloch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 30491465, "answer_count": 4, "score": 1, "last_activity_date": 1434343707, "creation_date": 1432753961, "question_id": 30491196, "link": "https://stackoverflow.com/questions/30491196/how-do-i-convert-a-ruby-hash-so-that-all-of-its-keys-are-strings", "title": "How do I convert a Ruby hash so that all of its keys are strings", "body": "<p>I have a ruby hash which looks like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>{ id: 123, name: \"test\" }\n</code></pre>\n\n<p>I would like to convert it to:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>{ \"id\" =&gt; 123, \"name\" =&gt; \"test\" }\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "multithreading", "sqlite"], "comments": [{"owner": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "edited": false, "score": 1, "creation_date": 1432754160, "post_id": 30490909, "comment_id": 49060362, "body": "it should be possible yes. Are the 2 MySql databases completely different things, or are the contents of them similar to the point where you would dynamically select between the two? Is the local database taking the 5-10 most recent things gotten from either of the MySql databases?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1432760459, "post_id": 30490909, "comment_id": 49063810, "body": "Have you seen this <a href=\"http://ilikestuffblog.com/2012/09/21/establishing-a-connection-to-a-non-default-database-in-rails-3-2-2/\" rel=\"nofollow noreferrer\">Blog Post</a> while it is from 2012 the functionality and advice remains true."}, {"owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "reply_to_user": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "edited": false, "score": 0, "creation_date": 1433362246, "post_id": 30490909, "comment_id": 49325214, "body": "@Clark it should dynamically set between the two, and it&#39;s not taking any data from MySQL databases, but application should write directly into it (Though I don&#39;t know if it&#39;s a smart idea). Engineer - thank you for the tip, I haven&#39;t actually seen that blog post :)"}, {"owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "edited": false, "score": 0, "creation_date": 1476469945, "post_id": 30490909, "comment_id": 67375703, "body": "For a good place to start I would look at these answers. <a href=\"http://stackoverflow.com/questions/6808645/use-two-different-databases-in-one-project\" title=\"use two different databases in one project\">stackoverflow.com/questions/6808645/&hellip;</a>"}], "owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1432753033, "creation_date": 1432753033, "last_edit_date": 1495542797, "question_id": 30490909, "link": "https://stackoverflow.com/questions/30490909/ruby-on-rails-two-completely-different-databases-on-the-same-project", "title": "Ruby on Rails two completely different databases on the same project", "body": "<p>I spent last couple of hours searching the web for this solution and I didn't find any, so I wanted to ask here if anyone has experience with something like this. </p>\n\n<p>I started working on a very big Rails project and I've got some very strange request from the project manager. </p>\n\n<p>He wants me to use 2 different MySQL databases for different environments (which I already found how to do <a href=\"https://stackoverflow.com/questions/17311199/connecting-to-multiple-databases-in-ruby-on-rails\">here</a></p>\n\n<p>Apart from this he wants to make a small local database which would serve as an autosave vault for the recent documents (maybe 5-10 recent documents) and he wants this database to be a SQLite.</p>\n\n<p>Since I just started with the Rails recently I didn't even know if this sort of connection is possible, and is something like this even possible in Rails. </p>\n\n<p>I also thought of using a <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html\" rel=\"nofollow noreferrer\">Connection Pool</a> to ensure thread safety. </p>\n\n<p>Any advice and help is appreciated. </p>\n"}, {"tags": ["ruby", "caching", "thread-safety", "active-model-serializers", "rails-api"], "owner": {"reputation": 426, "user_id": 4655619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-4Z6TyozsxfM/AAAAAAAAAAI/AAAAAAAAJCo/81X2gZ6Pggg/photo.jpg?sz=128", "display_name": "Eli Duke", "link": "https://stackoverflow.com/users/4655619/eli-duke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 478, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1432751129, "creation_date": 1432751129, "question_id": 30490334, "link": "https://stackoverflow.com/questions/30490334/activemodelserializer-caching-undefined-method-fetch-or-store-for-threadsa", "title": "ActiveModel::Serializer Caching - undefined method `fetch_or_store&#39; for ThreadSafe::Cache", "body": "<p>I just upgraded my AMS gem to <code>0.10.0.rc1</code> in hopes of getting some better caching functionality. I am trying to cache some AppLabels and the serializer there looks like this:</p>\n\n<pre><code>class AppLabelSerializer &lt; ActiveModel::Serializer\n  cache key: 'app_label', expires_in: 3.hours\n  attributes :id, :key, :label, :label_plural\n\n  def key\n    object.app_label_dictionary.key\n  end\n\nend\n</code></pre>\n\n<p>And then I hit one of the AppLabel end points with PostMan and I get this error:</p>\n\n<pre><code>NoMethodError (undefined method `fetch_or_store' for #&lt;ThreadSafe::Cache:0x007fcf70821378&gt;):\n  app/controllers/v1/app_labels_controller.rb:22:in `auth_index'\n</code></pre>\n\n<p>I checked <code>app_labels_controller.rb</code> on line 22 and it is this method:</p>\n\n<pre><code>def auth_index\n  render json: AppLabel.non_event\nend\n</code></pre>\n\n<p>Which is calling an AppLabel scope:</p>\n\n<pre><code>scope :non_event, -&gt; {joins(:app_label_dictionary).where(app_label_dictionary: {event_label: false} )}\n</code></pre>\n\n<p>I'm not familiar enough with AMS caching or Rails' Threadsafe elements to know what's going on here.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby", "coordinates", "libgosu"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1432749457, "post_id": 30489794, "comment_id": 49057751, "body": "Okay. What have you tried?"}], "answers": [{"tags": [], "owner": {"reputation": 1624, "user_id": 2146777, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ac2b9b9092dd8e83e1a8f9baea6862c4?s=128&d=identicon&r=PG", "display_name": "Giancarlo Manuel Guerra Salv&#225;", "link": "https://stackoverflow.com/users/2146777/giancarlo-manuel-guerra-salv%c3%a1"}, "is_accepted": false, "score": 0, "last_activity_date": 1448288520, "creation_date": 1448288520, "answer_id": 33873306, "question_id": 30489794, "link": "https://stackoverflow.com/questions/30489794/how-do-you-get-gosu-ruby-to-save-the-x-and-y-coordinates-of-a-sprite/33873306#33873306", "title": "How do you get Gosu - Ruby to save the x and y coordinates of a sprite?", "body": "<p>Basically, you have to add the @x and @y coordinates into a Sprite class, and call that sprite from your window class. So it'll look something like this:</p>\n\n<pre><code>class Player \n    attr_accessor :x, :y #this will allow you to both read x,y and write to (save) x, y\n    def initialize x, y\n        @tiles = Image.new(...) #load your images for your sprite\n        @x = x\n        @y = y\n    end\n    (...other methodds...)\nend\n</code></pre>\n\n<p>then in your GameWindow class's #update, you do whatever to the @x and @y, here:</p>\n\n<pre><code>class GameWindow &lt; Gosu::Window\n    def initialize\n         ....window init code....\n        @sprite = Player.new(width/2, height/2)\n        ...other vars...\n    end\n\n    def update\n        #this is where your game physics will go, and where you will store your x and y coords for the sprite \n        @sprite.y+= 1\n        @sprite.x+= 1\n    end\n</code></pre>\n\n<p>end</p>\n\n<p>Obviously this is an approximation just to give you an idea. Don't copy paste this directly cuz it won't work :P</p>\n"}], "owner": {"reputation": 11, "user_id": 4607848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a138ae2331c01c45be4f9a6d459b0cf5?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4607848/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448288520, "creation_date": 1432749327, "last_edit_date": 1440698106, "question_id": 30489794, "link": "https://stackoverflow.com/questions/30489794/how-do-you-get-gosu-ruby-to-save-the-x-and-y-coordinates-of-a-sprite", "title": "How do you get Gosu - Ruby to save the x and y coordinates of a sprite?", "body": "<p>I am making a drag-and-drop game with Gosu - Ruby and need to know how to get the computer to save a sprite's x and y coordinates. This is so that I can check if the user dragged the sprite to the correct spot.</p>\n"}, {"tags": ["ruby", "mongodb", "mongify"], "answers": [{"tags": [], "owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "is_accepted": true, "score": 2, "last_activity_date": 1432749504, "creation_date": 1432749504, "answer_id": 30489851, "question_id": 30489713, "link": "https://stackoverflow.com/questions/30489713/what-is-the-location-of-database-config-in-mongify/30489851#30489851", "title": "What is the location of &quot;database.config&quot; in Mongify?", "body": "<p>Put this file to any place of disk and specify path to it in command line as recommended in <a href=\"https://github.com/anlek/mongify/blob/master/README.rdoc\" rel=\"nofollow\">README</a>.</p>\n"}], "owner": {"reputation": 253, "user_id": 4871679, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-aT1umkX0nWM/AAAAAAAAAAI/AAAAAAAAACg/BmZvsDIxRcY/photo.jpg?sz=128", "display_name": "Anders", "link": "https://stackoverflow.com/users/4871679/anders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "accepted_answer_id": 30489851, "answer_count": 1, "score": 3, "last_activity_date": 1443125834, "creation_date": 1432749065, "last_edit_date": 1443125834, "question_id": 30489713, "link": "https://stackoverflow.com/questions/30489713/what-is-the-location-of-database-config-in-mongify", "title": "What is the location of &quot;database.config&quot; in Mongify?", "body": "<p>I'm using Mongify to convert a SQL Server database to a Mongo database. I was following the documentation and got lost when they referenced the <code>database.config</code> file.</p>\n\n<p>I tried creating it and dropping it into:</p>\n\n<pre><code>C:\\Ruby21-x64\\lib\\ruby\\gems\\2.1.0\\gems\\mongify-1.2.4\n</code></pre>\n\n<p>But this didn't work when I ran:</p>\n\n<pre><code>mongify check database.config\n</code></pre>\n\n<p>Where should I put <code>database.config</code>?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 76, "user_id": 3976821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa5b68495eabc71f4f54c4d2e8a5c527?s=128&d=identicon&r=PG", "display_name": "Ryan Faulhaber", "link": "https://stackoverflow.com/users/3976821/ryan-faulhaber"}, "edited": false, "score": 0, "creation_date": 1432748749, "post_id": 30489571, "comment_id": 49057366, "body": "The function JavaScript needs to tell the server to execute is just generating a few integer values."}, {"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1432749522, "post_id": 30489571, "comment_id": 49057789, "body": "From the web page, you use Javascript to make an Ajax call to your Rails controller.  The controller maps the request to a route and to your ruby code that handles the request.  That code returns the value which becomes the return value from the Ajax call which your client-side Javascript receives and can then do something with.  There are tons of articles written on this topic on the web.  A search for &quot;Javascript Ajax Rails&quot; yields a lot of reading material.  Here&#39;s one such article: <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/working_with_javascript_in_rails.html</a>"}, {"owner": {"reputation": 473, "user_id": 1888057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0ae28461488b97193e1957043fb995?s=128&d=identicon&r=PG", "display_name": "Rahul Roy", "link": "https://stackoverflow.com/users/1888057/rahul-roy"}, "edited": false, "score": 0, "creation_date": 1432749752, "post_id": 30489571, "comment_id": 49057923, "body": "@RyanFaulhaber Your question is very similar to this question[1]. Have you tried the solution provided in the same thread? Just curious. Also, Railscasts are always your good friend[2]   [1] <a href=\"http://stackoverflow.com/questions/5933261/how-to-call-a-rails-method-from-in-jquery\" title=\"how to call a rails method from in jquery\">stackoverflow.com/questions/5933261/&hellip;</a>   [2] <a href=\"http://railscasts.com/episodes?utf8=%E2%9C%93&amp;search=ajax\" rel=\"nofollow noreferrer\">railscasts.com/episodes?utf8=%E2%9C%93&amp;search=ajax</a>"}, {"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1432750151, "post_id": 30489571, "comment_id": 49058134, "body": "This question is probably too broad for Stackoverflow because this requires a fairly wide ranging tutorial on both client-side Ajax and handling Ajax requests in Rails."}, {"owner": {"reputation": 76, "user_id": 3976821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa5b68495eabc71f4f54c4d2e8a5c527?s=128&d=identicon&r=PG", "display_name": "Ryan Faulhaber", "link": "https://stackoverflow.com/users/3976821/ryan-faulhaber"}, "reply_to_user": {"reputation": 473, "user_id": 1888057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0ae28461488b97193e1957043fb995?s=128&d=identicon&r=PG", "display_name": "Rahul Roy", "link": "https://stackoverflow.com/users/1888057/rahul-roy"}, "edited": false, "score": 0, "creation_date": 1432750428, "post_id": 30489571, "comment_id": 49058277, "body": "@RahulRoy I have tried the solution but the line <code>$.ajax(&quot;&#47;users&#47;render_read&quot;)</code> generates a 404 error even when I set everything up similarly."}, {"owner": {"reputation": 76, "user_id": 3976821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa5b68495eabc71f4f54c4d2e8a5c527?s=128&d=identicon&r=PG", "display_name": "Ryan Faulhaber", "link": "https://stackoverflow.com/users/3976821/ryan-faulhaber"}, "reply_to_user": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1432750464, "post_id": 30489571, "comment_id": 49058302, "body": "@jfriend00 yeah fair enough, that is becoming evident."}], "answers": [{"comments": [{"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 1, "creation_date": 1432750079, "post_id": 30489938, "comment_id": 49058100, "body": "You should mention that your ajax example requires the jQuery library.  jQuery is convenient to use for Ajax, but is not required."}, {"owner": {"reputation": 1047, "user_id": 1274147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b27b6db2d10538468d2ed934096e96?s=128&d=identicon&r=PG", "display_name": "rockusbacchus", "link": "https://stackoverflow.com/users/1274147/rockusbacchus"}, "reply_to_user": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1433124960, "post_id": 30489938, "comment_id": 49200656, "body": "@jfriend00 good catch, thanks for the heads up.  It&#39;s been so long since I wrote ajax calls without jQuery that I didn&#39;t even realize I was making an assumption."}], "tags": [], "owner": {"reputation": 1047, "user_id": 1274147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b27b6db2d10538468d2ed934096e96?s=128&d=identicon&r=PG", "display_name": "rockusbacchus", "link": "https://stackoverflow.com/users/1274147/rockusbacchus"}, "is_accepted": true, "score": 0, "last_activity_date": 1433124851, "last_edit_date": 1433124851, "creation_date": 1432749785, "answer_id": 30489938, "question_id": 30489571, "link": "https://stackoverflow.com/questions/30489571/how-to-call-ruby-method-on-server-from-javascript/30489938#30489938", "title": "How to call Ruby method on server from JavaScript", "body": "<p>You are right that the answer lies in ajax.  Assuming you're using jQuery, you will need to submit a request to the server like so:</p>\n\n<pre><code>                $.ajax({ \n                    type: \"GET\", \n                    url: '/get_info_action',  \n                    data: {some_data: some_value}, \n                    dataType: \"script\" \n                });\n</code></pre>\n\n<p>Make sure the value you choose for url is set up in your routes.rb file.  There is a good Railscast about this sort of thing that helped me a lot when learning how to do this: \n<a href=\"http://railscasts.com/episodes/136-jquery-ajax-revised\" rel=\"nofollow\">http://railscasts.com/episodes/136-jquery-ajax-revised</a> </p>\n"}], "owner": {"reputation": 76, "user_id": 3976821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa5b68495eabc71f4f54c4d2e8a5c527?s=128&d=identicon&r=PG", "display_name": "Ryan Faulhaber", "link": "https://stackoverflow.com/users/3976821/ryan-faulhaber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1963, "favorite_count": 0, "accepted_answer_id": 30489938, "answer_count": 1, "score": 1, "last_activity_date": 1433124851, "creation_date": 1432748595, "question_id": 30489571, "link": "https://stackoverflow.com/questions/30489571/how-to-call-ruby-method-on-server-from-javascript", "title": "How to call Ruby method on server from JavaScript", "body": "<p>This seems really simple but I can't find a straightforward answer to this problem anywhere. Basically, I have a JavaScript application that is sitting on a server and it needs to pass information back and forth between the JS application and the server, which is built on Rails. First, the JS application needs to tell the server to execute a function that generates said values, and then it needs a way to get them back to the JS application so it can use them, and they communicate back and forth like this during any given session of the application.</p>\n\n<p>Is there any easy way to do this? I realize Ajax is somehow involved but I can't figure out how.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multidimensional-array", "hash"], "comments": [{"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1432749192, "post_id": 30489558, "comment_id": 49057613, "body": "Are you sure about the key names? you said you are using the form <code>hash[&quot;www.example.com&quot;][&quot;sublink&quot;][&quot;hi&quot;]</code>, however the correct form is <code>hash[:&quot;www.example.com&quot;][:sublink][:hi]</code> see the difference ? ... symbols!"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 2, "creation_date": 1432749422, "post_id": 30489558, "comment_id": 49057731, "body": "You might be influenced by another language, like JavaScript. In Ruby, you should use the operator <code>=&gt;</code> when the keys are not symbols. Also what you got is a nested <code>Hash</code> and not <code>a multi-dimensional</code>   <code>{name goes here}</code>"}, {"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "reply_to_user": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1432749529, "post_id": 30489558, "comment_id": 49057792, "body": "if the keys are in quotes should it always be <code>[:&quot;key&quot;]</code>? I am getting <code>undefined method </code>[]=&#39; for nil:NilClass`"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1432749793, "post_id": 30489558, "comment_id": 49057948, "body": "not always, one use the form <code>:&quot;key&quot;</code> when <code>key</code> has special (but valid) characters, like dots <code>.</code>.  This worked for me without changing your code <code>hash[:&quot;www.example.com&quot;][:sublink][:hi] &lt;&lt; &#39;as&#39;</code> check it out."}, {"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "reply_to_user": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1432749983, "post_id": 30489558, "comment_id": 49058051, "body": "I made it a little more simple in my example above, my keys all have spaces, <code>-</code>, <code>.</code>, etc in them should I do it in the format <code>hash[:&quot;www.example.com&quot;][:&quot;sublink&quot;][:&quot;hi&quot;] &lt;&lt; &#39;as&#39;</code>"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 1, "creation_date": 1432750171, "post_id": 30489558, "comment_id": 49058147, "body": "Don&#39;t use symbols then, it&#39;s too much trouble. I&#39;ll post an answer."}, {"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "reply_to_user": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1432750279, "post_id": 30489558, "comment_id": 49058196, "body": "Thank you! Hashes always seem to confuse me :("}, {"owner": {"reputation": 29579, "user_id": 316700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f952bee7570a3db2ecba5b06c0062b3?s=128&d=identicon&r=PG", "display_name": "fguillen", "link": "https://stackoverflow.com/users/316700/fguillen"}, "edited": false, "score": 0, "creation_date": 1432751232, "post_id": 30489558, "comment_id": 49058757, "body": "Your code examples are too noisy, you should try to reproduce the issue with the less amount of code posible (Most of the cases doing so you end up solving the issue on your own). Also the way you are initialising the <code>Hash</code> is not using <i>Ruby syntax</i>."}, {"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "reply_to_user": {"reputation": 29579, "user_id": 316700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f952bee7570a3db2ecba5b06c0062b3?s=128&d=identicon&r=PG", "display_name": "fguillen", "link": "https://stackoverflow.com/users/316700/fguillen"}, "edited": false, "score": 1, "creation_date": 1432752920, "post_id": 30489558, "comment_id": 49059697, "body": "@fguillen I have made my question and code example easier to understand"}, {"owner": {"reputation": 29579, "user_id": 316700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f952bee7570a3db2ecba5b06c0062b3?s=128&d=identicon&r=PG", "display_name": "fguillen", "link": "https://stackoverflow.com/users/316700/fguillen"}, "edited": false, "score": 0, "creation_date": 1432808900, "post_id": 30489558, "comment_id": 49083337, "body": "As you can see I can&#39;t reproduce your issue: <a href=\"http://ideone.com/UdcWSh\" rel=\"nofollow noreferrer\">ideone.com/UdcWSh</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1432751432, "post_id": 30490330, "comment_id": 49058903, "body": "Okay and how would I dynamically create the keys as strings? I am creating the keys in a loop.... e.g. <code>hash[key] = {}</code>"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "reply_to_user": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1432751721, "post_id": 30490330, "comment_id": 49059044, "body": "Not sure what you mean... To create a new key just assign a value (any value) to that key inside the <code>Hash</code> object. <code>hash[&quot;a key&quot;] = &quot;value&quot;</code> as you will normally do in JavaScript (though with the ruby syntax in mind). Ruby is very dynamic unlike C or C++, you don&#39;t have to reserve memory or anything else whatsoever to create new objects."}, {"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1432752538, "post_id": 30490330, "comment_id": 49059500, "body": "It doesnt seem to be working for me. I have no Idea what I am doing wrong. I will edit my example above to be more clear"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "reply_to_user": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1432753022, "post_id": 30490330, "comment_id": 49059757, "body": "@MaxRose-Collins All the examples are tested, please check your code or put a more complete version of your script."}, {"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1432755137, "post_id": 30490330, "comment_id": 49060900, "body": "Hi, sorry you are right. I just checked how I was building my nested hash and in the loop I was using it was using some keys twice, so that&#39;s why I was getting data put into both parts of the hash I assume?"}], "tags": [], "owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "is_accepted": true, "score": 3, "last_activity_date": 1432755512, "last_edit_date": 1432755512, "creation_date": 1432751112, "answer_id": 30490330, "question_id": 30489558, "link": "https://stackoverflow.com/questions/30489558/ruby-adding-value-to-hash-adds-duplicate-data/30490330#30490330", "title": "Ruby - Adding value to hash adds duplicate data", "body": "<p>Use strings instead of symbols as keys. I took your hash and changed the keys to be strings. Now it looks like this:</p>\n\n<pre><code>{\"http://example.com\"=&gt;\n   {\"sublink\"=&gt;\n      {\"A word\"=&gt;[], :\"Another word\"=&gt;[]},\n   \"sublinktwo\"=&gt;\n      {\"Hello\"=&gt;[], \"World\"=&gt;[]}},\n \"www.example.com\"=&gt;\n   {\"sublink\"=&gt;\n      {\"hi\"=&gt;[], \"goodbye\"=&gt;[]},\n    \"sublinkthree\"=&gt;\n      {\"word\"=&gt;[], \"bye\"=&gt;[]}\n   }\n}\n</code></pre>\n\n<p>If you haven't see the difference, for keys I'm using <code>=&gt;</code> instead of <code>:</code>. In that way Ruby will not convert the keys into symbols, it will leave it as they are.</p>\n\n<p>How to access the values? Check out the following <code>irb</code> session.</p>\n\n<pre><code>&gt; hash[\"www.example.com\"]\n =&gt; {\"sublink\"=&gt;{\"hi\"=&gt;[], \"goodbye\"=&gt;[]}, \"sublinkthree\"=&gt;{\"word\"=&gt;[], \"bye\"=&gt;[]}}\n&gt; hash[\"www.example.com\"][\"sublink\"]\n =&gt; {\"hi\"=&gt;[], \"goodbye\"=&gt;[]}\n&gt; hash[\"www.example.com\"][\"sublink\"][\"hi\"]\n =&gt; []\n</code></pre>\n\n<p>Change value:</p>\n\n<pre><code>&gt; hash[\"www.example.com\"][\"sublink\"][\"hi\"] &lt;&lt; {\"key\"=&gt;\"value\"}\n =&gt; [{\"key\"=&gt;\"value\"}]\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 30490330, "answer_count": 1, "score": 2, "last_activity_date": 1432755512, "creation_date": 1432748565, "last_edit_date": 1432752870, "question_id": 30489558, "link": "https://stackoverflow.com/questions/30489558/ruby-adding-value-to-hash-adds-duplicate-data", "title": "Ruby - Adding value to hash adds duplicate data", "body": "<p>When I access my nested hash something weird happens.\nBelow is my nested hash.</p>\n\n<pre><code>{\n  \"http://example.com\"=&gt;{\n     \"a-big_word\"=&gt;{\n        \"Another word\"=&gt;[]\n     }\n}, \n  \"www.example.com\"=&gt;{\n     \"a-big_word\"=&gt;{\n        \"Another word\"=&gt;[]\n     }\n  }\n}\n</code></pre>\n\n<p>If I try and add something to it with the following</p>\n\n<p><code>hash['www.example.com']['a-big_word']['Another word'] &lt;&lt; {\"key\"=&gt;\"value\"}</code></p>\n\n<p>This happens</p>\n\n<pre><code>   {\n      \"http://example.com\"=&gt;{\n         \"a-big_word\"=&gt;{\n            \"Another word\"=&gt;[{\"key\"=&gt;\"value\"}]\n         }\n    }, \n      \"www.example.com\"=&gt;{\n         \"a-big_word\"=&gt;{\n            \"Another word\"=&gt;[{\"key\"=&gt;\"value\"}]\n         }\n      }\n    }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-4", "hash"], "answers": [{"comments": [{"owner": {"reputation": 906, "user_id": 2029643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a4649859518d4d636423b788d7538624?s=128&d=identicon&r=PG", "display_name": "Evolutio", "link": "https://stackoverflow.com/users/2029643/evolutio"}, "edited": false, "score": 0, "creation_date": 1432749459, "post_id": 30489622, "comment_id": 49057753, "body": "thanks :) I didn&#39;t find the problem or any solution on the internet."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user684934"}, "is_accepted": true, "score": 1, "last_activity_date": 1432748803, "creation_date": 1432748803, "answer_id": 30489622, "question_id": 30489418, "link": "https://stackoverflow.com/questions/30489418/rails-array-hash-from-an-association/30489622#30489622", "title": "rails array/hash from an association", "body": "<p>Your controller logic is the problem:</p>\n\n<pre><code>  def index\n    @ftp_accounts = Hash.new\n\n    current_user.ftp_accounts.to_ary.each do |ftp_acc|\n      @ftp_accounts[ftp_acc.packet_id] = Hash.new # &lt;-- this line is a problem\n      @ftp_accounts[ftp_acc.packet_id][ftp_acc.id] = Hash.new\n      @ftp_accounts[ftp_acc.packet_id][ftp_acc.id] = ftp_acc\n    end\n  end\n</code></pre>\n\n<p>The first line inside the loop will wipe out everything that was put into the variable in previous iterations if they share the same <code>packet_id</code>.</p>\n\n<p>You can change this to:</p>\n\n<pre><code>@ftp_accounts[ftp_acc.packet_id] ||= Hash.new\n</code></pre>\n\n<p>Note: the second line inside the loop does nothing, because you're setting a value to a new Hash, then immediately overwriting it with <code>ftp_acc</code>.</p>\n"}], "owner": {"reputation": 906, "user_id": 2029643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a4649859518d4d636423b788d7538624?s=128&d=identicon&r=PG", "display_name": "Evolutio", "link": "https://stackoverflow.com/users/2029643/evolutio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 30489622, "answer_count": 1, "score": 0, "last_activity_date": 1432748803, "creation_date": 1432748084, "question_id": 30489418, "link": "https://stackoverflow.com/questions/30489418/rails-array-hash-from-an-association", "title": "rails array/hash from an association", "body": "<p>I'm new to Ruby on Rails and i didn't get my code working with the array and hashes combination.</p>\n\n<p>I have view with a @ftp_accounts[p.id].each:</p>\n\n<pre><code>- current_user.packets.each do |p|\n  .row\n    .widget.col-6\n      .widget-header\n        = fa_icon 'info'\n        FTP-Accounts f\u00fcr das Paket: #{ p.name }\n      .widget-body\n        .widget-title\n          Sie haben ##USED_FTP_ACCOUNTS## von #{ p.ftp_accs } genutzt.\n        %p\n          Um einen FTP-Account Ihrem Paket hinzuzuf\u00fcgen, klicken Sie bitte&amp;nbsp;\n          %a{ href:'' }&gt;hier\n          \\.\n\n        %table\n          %thead\n            %tr\n              %th #\n              %th Benutzer\n              %th Kommentar\n              %th Verzeichnis\n              %th Quota\n              %th Aktion\n          %tbody\n            - if @ftp_accounts[p.id].nil?\n              %tr\n            - else\n              - @ftp_accounts[p.id].each do |ftp_acc|\n                %tr\n                  %td\n                    = ftp_acc.id\n                  %td\n                    = ftp_acc.username\n                  %td\n                    = ftp_acc.comment\n                  %td\n                    = ftp_acc.dir\n                  %td\n                    = number_to_human_size(ftp_acc.quota_size)\n                  %td asd\n</code></pre>\n\n<p>With <code>- @ftp_accounts[p.id].each do |ftp_acc|</code> I want to display all entries from my @ftp_accounts[p.id] array.</p>\n\n<p>I get with <code>= @ftp_accounts[p.id].inspect</code> with this output:</p>\n\n<pre><code>{2=&gt;#&lt;FtpAccount id: 2, username: \"example_2\", status: 1, password: \"88ea39439e74fa27c09a4fc0bc8ebe6d00978392\", uid: 2000, gid: 2000, dir: \"/home/test\", ul_bandwidth: 100, dl_bandwidth: 100, comment: \"Jop\", ipaccess: \"*\", quota_size: 20, quota_files: 0, user_id: 1, packet_id: 1, created_at: nil, updated_at: nil&gt;} \n</code></pre>\n\n<p>and I want my two ftp-accounts:</p>\n\n<pre><code>#&lt;ActiveRecord::Associations::CollectionProxy [#&lt;FtpAccount id: 1, username: \"example\", status: 1, password: \"a94a8fe5ccb19ba61c4c0873d391e987982fbbd3\", uid: 2000, gid: 2000, dir: \"/home/customer/ftp60047\", ul_bandwidth: 500, dl_bandwidth: 500, comment: \"SEEDS ACCOUNT 2GB\", ipaccess: \"*\", quota_size: 2048, quota_files: 0, user_id: 1, packet_id: 1, created_at: \"2015-05-27 15:34:36\", updated_at: \"2015-05-27 15:34:36\"&gt;, #&lt;FtpAccount id: 2, username: \"example_2\", status: 1, password: \"88ea39439e74fa27c09a4fc0bc8ebe6d00978392\", uid: 2000, gid: 2000, dir: \"/home/test\", ul_bandwidth: 100, dl_bandwidth: 100, comment: \"Jop\", ipaccess: \"*\", quota_size: 20, quota_files: 0, user_id: 1, packet_id: 1, created_at: nil, updated_at: nil&gt;]&gt; \n</code></pre>\n\n<p>My Controller:</p>\n\n<pre><code>  def index\n    @ftp_accounts = Hash.new\n\n    current_user.ftp_accounts.to_ary.each do |ftp_acc|\n      @ftp_accounts[ftp_acc.packet_id] = Hash.new\n      @ftp_accounts[ftp_acc.packet_id][ftp_acc.id] = Hash.new\n      @ftp_accounts[ftp_acc.packet_id][ftp_acc.id] = ftp_acc\n    end\n  end\n</code></pre>\n\n<p>My user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable\n  has_and_belongs_to_many :packets, :join_table =&gt; :users_packets, dependent: :destroy\n\n  # BackUp\n  has_many :backups, dependent: :destroy\n  has_many :ftp_accounts, dependent: :destroy\nend\n</code></pre>\n\n<p>and my ftp_account.rb</p>\n\n<pre><code>class FtpAccount &lt; ActiveRecord::Base\n\n  belongs_to :user\n  belongs_to :packet\nend\n</code></pre>\n\n<p>and my packet.rb</p>\n\n<pre><code>class Packet &lt; ActiveRecord::Base\n\n  has_and_belongs_to_many :users, :join_table =&gt; :users_packets\n  belongs_to :resource, :polymorphic =&gt; true\n\n  belongs_to :user\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "serialization"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1432749140, "post_id": 30489238, "comment_id": 49057591, "body": "Welcome to Stack Overflow. Here are some tips for writing a question: Don&#39;t tack on &quot;Ruby on Rails&quot; or similar tags. Stack Overflow (and search engines) use the tags you&#39;ve defined for the question. Instead simply write a short descriptive sentence. In the body, it&#39;s not necessary to use headings. Instead, write normally, as you would when writing to a co-worker. Stack Overflow is somewhat like an encyclopedia of programming Q&amp;A but with a less formal style. Emulate the style of other questions to maintain the common look and feel. Also learn inline code formatting."}, {"owner": {"reputation": 261, "user_id": 4867990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p9JLR.png?s=128&g=1", "display_name": "hsidar", "link": "https://stackoverflow.com/users/4867990/hsidar"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1432842083, "post_id": 30489238, "comment_id": 49106514, "body": "Thanks for the advice and for the edit! I will keep this advice in mind for future inquiries.   Can you elaborate on the inline code formatting? I was using console output for my post because I thought it best showcased the issue."}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 4867990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p9JLR.png?s=128&g=1", "display_name": "hsidar", "link": "https://stackoverflow.com/users/4867990/hsidar"}, "edited": false, "score": 0, "creation_date": 1432841821, "post_id": 30492086, "comment_id": 49106377, "body": "Setting and saving as just nil works as long as it does not try to save the blank array first.  The [nil] solution saves as well, but leaves any .length calls returning 1 which is non-optimal.  My main hope here is to figure out why adding Array to the serialize line illicits different behavior on a blank save than if it is not there.  My current workaround is to just use Serialize on its own, sans Array and then check for &#39;nil&#39; when the create method is called:   <code>test.example = [ ] if !test.example</code>"}], "tags": [], "owner": {"reputation": 316, "user_id": 2329984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a6bf1989586f5cf1060e0b5d8839d1?s=128&d=identicon&r=PG", "display_name": "Abraham Sangha", "link": "https://stackoverflow.com/users/2329984/abraham-sangha"}, "is_accepted": false, "score": 1, "last_activity_date": 1432758022, "last_edit_date": 1432758022, "creation_date": 1432756972, "answer_id": 30492086, "question_id": 30489238, "link": "https://stackoverflow.com/questions/30489238/cannot-save-empty-array-to-database-when-serialized/30492086#30492086", "title": "Cannot save empty array to database when serialized", "body": "<p>SQLite does not support an Array column type. I think what's happening is when you try to save the User with an empty array for the example attribute, it's being interpreted as no change to the example column. What happens if you try this after you create your test user with example data?</p>\n\n<pre><code>test.example = nil\ntest.save\n</code></pre>\n\n<p>Alternatively, what happens with this?</p>\n\n<pre><code>test.example = [nil]\ntest.save\n</code></pre>\n\n<p>It seems like the solution would be to use an <a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow\">ActiveRecord callback</a> such as <code>before_save</code> to check the user model's example attribute to determine if it is an empty array. If so, set the attribute to <code>nil</code> or <code>[nil]</code> (whichever works) and then the data should persist accordingly.</p>\n"}], "owner": {"reputation": 261, "user_id": 4867990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p9JLR.png?s=128&g=1", "display_name": "hsidar", "link": "https://stackoverflow.com/users/4867990/hsidar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1432758022, "creation_date": 1432747395, "last_edit_date": 1592644375, "question_id": 30489238, "link": "https://stackoverflow.com/questions/30489238/cannot-save-empty-array-to-database-when-serialized", "title": "Cannot save empty array to database when serialized", "body": "<p>In Ruby on Rails, a model with a serialized array field will not update on <code>.save()</code> if the array is empty, where it previously had data.</p>\n<p>I'm using:</p>\n<ul>\n<li><p>Ruby 2.2.1</p>\n</li>\n<li><p>Rails 4.2.1</p>\n</li>\n<li><p>sqlite3 1.3.10</p>\n<p>I created a new model with a field set as text:</p>\n<p>rails g model User name:string example:text</p>\n</li>\n</ul>\n<p>In the User.rb file I added:</p>\n<pre><code>serialize :example, Array\n</code></pre>\n<p>I instantiated a new instance of the User class:</p>\n<pre><code>test = User.new\n&lt;User id: nil, name: nil, example: [], created_at: nil, updated_at: nil&gt;\n</code></pre>\n<p>Then I save the user to make sure it saves correctly:</p>\n<pre><code>test.save()\n(0.1ms)  begin transaction\nSQL (0.4ms)  INSERT INTO &quot;users&quot; (&quot;created_at&quot;, &quot;updated_at&quot;) VALUES (?, ?)  [[&quot;created_at&quot;, &quot;2015-05-27 16:17:31.902342&quot;], [&quot;updated_at&quot;, &quot;2015-05-27 16:17:31.902342&quot;]]\n(0.7ms)  commit transaction\n=&gt; true\n</code></pre>\n<p>And added some data in so that it feels happy and purposeful:</p>\n<pre><code>test.example.push(1)\ntest.example.push(2)\n</code></pre>\n<p>And save it up:</p>\n<pre><code>test.save()\n(0.1ms)  begin transaction\nSQL (0.3ms)  UPDATE &quot;users&quot; SET &quot;example&quot; = ?, &quot;updated_at&quot; = ? WHERE &quot;users&quot;.&quot;id&quot; = ?  [[&quot;example&quot;, &quot;---\\n- 1\\n- 2\\n&quot;], [&quot;updated_at&quot;, &quot;2015-05-27 16:17:50.331777&quot;], [&quot;id&quot;, 1]]\n(0.8ms)  commit transaction\n=&gt; true\n</code></pre>\n<p>And made sure everything saved nicely:</p>\n<pre><code>test\n&lt;User id: 1, name: nil, example: [1, 2], created_at: &quot;2015-05-27 16:17:31&quot;, updated_at: &quot;2015-05-27 16:17:50&quot;&gt;\n</code></pre>\n<p>I deleted one item, verified it has been deleted, and saved it, making sure the SQL output shows the UPDATE:</p>\n<pre><code>test.example.delete(1)\n =&gt; 1\ntest\n&lt;User id: 1, name: nil, example: [2], created_at: &quot;2015-05-27      16:17:31&quot;, updated_at: &quot;2015-05-27 16:17:50&quot;&gt;\ntest.save()\n(0.1ms)  begin transaction\nSQL (0.9ms)  UPDATE &quot;users&quot; SET &quot;example&quot; = ?, &quot;updated_at&quot; = ? WHERE &quot;users&quot;.&quot;id&quot; = ?  [[&quot;example&quot;, &quot;---\\n- 2\\n&quot;], [&quot;updated_at&quot;, &quot;2015-05-27 16:18:30.148553&quot;], [&quot;id&quot;, 1]]\n(8.9ms)  commit transaction\n=&gt; true\n</code></pre>\n<p>I deleted the last piece of data from array, verified empty array, and saved it. Note the lack of an UPDATE action and that it returns true:</p>\n<pre><code>test.example.delete(2)\n=&gt; 2\ntest\n&lt;User id: 1, name: nil, example: [], created_at: &quot;2015-05-27 16:17:31&quot;, updated_at: &quot;2015-05-27 16:18:30&quot;&gt;\ntest.save()\n(0.1ms)  begin transaction\n(0.1ms)  commit transaction\n=&gt; true\n</code></pre>\n<p>Multiple saves get the same result. A new User object still has that last piece of data in it:</p>\n<pre><code>test = User.find(1)\nUser Load (0.2ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot; WHERE &quot;users&quot;.&quot;id&quot; = ? LIMIT 1  [[&quot;id&quot;, 1]]\n&lt;User id: 1, name: nil, example: [2], created_at: &quot;2015-05-27 16:17:31&quot;, updated_at: &quot;2015-05-27 16:18:30&quot;&gt;\n</code></pre>\n<p>A workaround is removing the &quot;Array&quot; from the serialize line in the model initializes the field as nil. But this means the first time I add data to a new instance I have to set the field manually to an empty array (<code>test.example = []</code>) in order to call <code>.push()</code> on it. Everything works fine in this setup, and the newly emptied array saves happily to the DB.</p>\n<p>I saw a closed issue on the Rails Github indicating that serialized columns should always be saved, but have no idea if this is pertinent:</p>\n<p><a href=\"https://github.com/rails/rails/issues/8328\" rel=\"noreferrer\">https://github.com/rails/rails/issues/8328</a></p>\n<p>I could not discern anything from the serialize source code that could illuminate me:</p>\n<p><a href=\"http://apidock.com/rails/ActiveModel/Serializers/Xml/Serializer/serialize\" rel=\"noreferrer\">http://apidock.com/rails/ActiveModel/Serializers/Xml/Serializer/serialize</a></p>\n<p>Why does adding &quot;Array&quot; at the end of the serialize line cause empty arrays to not be saved to the database?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5578, "user_id": 530189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/216f4518434f8eba33dc0a5871b46a15?s=128&d=identicon&r=PG", "display_name": "Peter Huene", "link": "https://stackoverflow.com/users/530189/peter-huene"}, "edited": false, "score": 1, "creation_date": 1432747741, "post_id": 30489082, "comment_id": 49056809, "body": "The block is being passed to <code>print</code> due to precedence.  Add parenthesis: <code>print (arr.my_all? do |num| ... end)</code>."}, {"owner": {"reputation": 183, "user_id": 3355098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51a71d86c555599740d43e0daa63cc03?s=128&d=identicon&r=PG&f=1", "display_name": "user3355098", "link": "https://stackoverflow.com/users/3355098/user3355098"}, "reply_to_user": {"reputation": 5578, "user_id": 530189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/216f4518434f8eba33dc0a5871b46a15?s=128&d=identicon&r=PG", "display_name": "Peter Huene", "link": "https://stackoverflow.com/users/530189/peter-huene"}, "edited": false, "score": 0, "creation_date": 1432751061, "post_id": 30489082, "comment_id": 49058669, "body": "This is exactly it, Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1432747283, "post_id": 30489184, "comment_id": 49056564, "body": "<code>return false unless yield(item)</code> maybe, and I tend to discourage people from using unnecessary explicit <code>return</code>s, but I know you were just copying the OP&#39;s code."}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1432747409, "post_id": 30489184, "comment_id": 49056627, "body": "I don&#39;t like using an explicit <code>return</code> unless I&#39;m returning from several points in a function i.e. inside of an <code>if</code> or a <code>case</code>. But yeah, I decided against altering the code too much as It might end up confusing for the OP if the example I&#39;ve given strays too far from the original."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1432748017, "post_id": 30489184, "comment_id": 49056955, "body": "@user3536548 I think Dave Newton was pointing out that it&#39;s a bad idea to have multiple return points from inside of a function, period.  Much better to have a single point at which the return occurs.  Much safer and cleaner."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1432748601, "post_id": 30489184, "comment_id": 49057275, "body": "@DavidHoelzer Definitely not what I was pointing out. I disagree: guard clauses with returns make sense. The second breaks out of a tiny loop; also makes sense. I strongly disagree with the &quot;Only One Return&quot; rule, particularly in short methods such as this; it reads far, <i>far</i> cleaner with them in. E.g., <a href=\"http://stackoverflow.com/a/36714/438992\">stackoverflow.com/a/36714/438992</a>, <a href=\"http://programmers.stackexchange.com/q/118703\">programmers.stackexchange.com/q/118703</a>, <a href=\"http://forums.xkcd.com/viewtopic.php?f=11&amp;t=95359\" rel=\"nofollow noreferrer\">forums.xkcd.com/viewtopic.php?f=11&amp;t=95359</a>, <a href=\"http://www.hackerchick.com/2009/02/religious-war-48293-single-vs-multiple.html\" rel=\"nofollow noreferrer\">hackerchick.com/2009/02/&hellip;</a>."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1432749760, "post_id": 30489184, "comment_id": 49057930, "body": "@DaveNewton Well, I don&#39;t strongly enforce it and the short circuit that you&#39;re mentioning is a great place for it, but lots of secure coding folks will disagree:  <a href=\"http://www.cs.rit.edu/~tmh/courses/SecureCoding/2014/docs/ErrorMessages.pdf\" rel=\"nofollow noreferrer\">cs.rit.edu/~tmh/courses/SecureCoding/2014/docs/&hellip;</a>  The piece of advice that I&#39;ll often offer is that if you are creating multiple returns (more specifically, if they are sprinkled throughout a function) then that function is ripe for refactoring into smaller bits."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1432750445, "post_id": 30489184, "comment_id": 49058292, "body": "@DavidHoelzer Sure--but this function is already minute. It&#39;s also less of an issue when you don&#39;t have to manually handle resource deallocation, etc. The argument that it&#39;s easier to test (with multiple returns) is dependent on the language and the method; that the number of exits is lower doesn&#39;t explicitly reduce complexity or the number of paths through the method."}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1432751698, "post_id": 30489184, "comment_id": 49059034, "body": "I prefer to have one &#39;point of return&#39;, but when I do have multiple points then I explicitly state <code>return</code> to indicate that."}], "tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": false, "score": 0, "last_activity_date": 1432747190, "creation_date": 1432747190, "answer_id": 30489184, "question_id": 30489082, "link": "https://stackoverflow.com/questions/30489082/ruby-function-wont-detect-do-end-blocks/30489184#30489184", "title": "Ruby function won&#39;t detect do...end blocks", "body": "<p>You might want to look at <a href=\"http://www.tutorialspoint.com/ruby/ruby_iterators.htm\" rel=\"nofollow\">iterators</a> rather then using the <code>for</code> construct.</p>\n\n<p>so using <code>.each</code> it would look like:</p>\n\n<pre><code>def my_all?\n    return false unless block_given?\n    self.each do |item|\n        unless yield(item)\n            return false\n        end\n    end\n    return true\nend\n</code></pre>\n\n<p>I also switched out the <code>if !</code> for <code>unless</code> as it reads better (just don't use <code>unless</code> with <code>else</code> >_&lt;)</p>\n"}], "owner": {"reputation": 183, "user_id": 3355098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51a71d86c555599740d43e0daa63cc03?s=128&d=identicon&r=PG&f=1", "display_name": "user3355098", "link": "https://stackoverflow.com/users/3355098/user3355098"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "closed_date": 1432747828, "answer_count": 1, "score": 0, "last_activity_date": 1432747190, "creation_date": 1432746844, "question_id": 30489082, "link": "https://stackoverflow.com/questions/30489082/ruby-function-wont-detect-do-end-blocks", "closed_reason": "Duplicate", "title": "Ruby function won&#39;t detect do...end blocks", "body": "<p>Let me preface this by saying I am very new to Ruby.  I am going through couple exercises writing my own versions of some enumerable functions.  Everything was working fine until it kinda just stopped working.  I don't think I changed anything.  I have function that looks as follows:</p>\n\n<pre><code>def my_all?\n    return false unless block_given?\n    for i in self\n        if !yield(i)\n            return false\n        end\n    end\n    return true\nend\n</code></pre>\n\n<p>and I call it as follows:</p>\n\n<pre><code>arr = [1,2,3,4]\nprint arr.my_all? do |num|\n    num == num\nend\n</code></pre>\n\n<p>This should return true because every num is obviously equal to itself.  However I get a false return value.  After some mucking around I found out that ruby is not detecting the do...end block passed to the my_all? method (block_given? is returning false).  The method DOES work if I change the do..end block to a single line bracket block as follows:</p>\n\n<pre><code>{ |num| num == num}\n</code></pre>\n\n<p>Can somebody please tell me what I am doing wrong regarding the do..end version?  Thanks</p>\n"}, {"tags": ["ruby", "ssl", "amazon-ec2", "chef-infra", "aws-sdk"], "answers": [{"comments": [{"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1432747596, "post_id": 30489253, "comment_id": 49056739, "body": "So it&#39;s a version problem? Don&#39;t quote me on this but I think we might be using version 11.somthing, If that&#39;s true then yeah, update should fix the issue. If that&#39;s not possible, I&#39;ll just (as you suggested) manually update the root Certs."}, {"owner": {"reputation": 1376, "user_id": 427117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c91d05b02cc6a43fadcbe417b66bceb4?s=128&d=identicon&r=PG", "display_name": "Roland", "link": "https://stackoverflow.com/users/427117/roland"}, "reply_to_user": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1432747984, "post_id": 30489253, "comment_id": 49056940, "body": "Technically, it&#39;s not a version and/or Chef problem. It&#39;s a SSL/TLS issue and recent Chef releases (starting October 2014) ship with a workaround. &lt;img src=&quot;<a href=\"http://i.imgur.com/qlvCE20.png&quot;/\" rel=\"nofollow noreferrer\">i.imgur.com/qlvCE20.png&quot;</a>&gt;"}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1432809233, "post_id": 30489253, "comment_id": 49083559, "body": "Ok, I tried manually updating the root certs but that didn&#39;t work, and upgrading chef to version 12+ is not viable. How do I turn off SSL_verify with ruby Aws sdk v2?"}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1432819592, "post_id": 30489253, "comment_id": 49091395, "body": "nvm found it like this: <code>Aws.config[:ssl_verify_peer] = false</code>"}, {"owner": {"reputation": 1376, "user_id": 427117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c91d05b02cc6a43fadcbe417b66bceb4?s=128&d=identicon&r=PG", "display_name": "Roland", "link": "https://stackoverflow.com/users/427117/roland"}, "reply_to_user": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1432821644, "post_id": 30489253, "comment_id": 49092960, "body": "The recent chef11 versions contain the fix, too. You shouldn&#39;t disable peer verification, as it renders all the TLS useless and vulnerable to MITM attacks. :("}], "tags": [], "owner": {"reputation": 1376, "user_id": 427117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c91d05b02cc6a43fadcbe417b66bceb4?s=128&d=identicon&r=PG", "display_name": "Roland", "link": "https://stackoverflow.com/users/427117/roland"}, "is_accepted": true, "score": 1, "last_activity_date": 1432747464, "creation_date": 1432747464, "answer_id": 30489253, "question_id": 30488750, "link": "https://stackoverflow.com/questions/30488750/using-the-aws-sdk-during-a-chef-run-errors-but-running-it-outside-of-chef-works/30489253#30489253", "title": "Using the AWS SDK during a chef run errors but running it outside of chef works", "body": "<p>As far as I know this is related to Mozilla, who removed 1024 bit Root CA certs in late 2014. Technically, this is good but unfortunately broke many legacy certificate chains.</p>\n\n<p>The issue is described here in the section \"RSA-1024 removed\" <a href=\"http://curl.haxx.se/docs/caextract.html\" rel=\"nofollow\">http://curl.haxx.se/docs/caextract.html</a>.</p>\n\n<p>And in ChefDK at <a href=\"https://github.com/chef/chef-dk/issues/199#issuecomment-60643682\" rel=\"nofollow\">https://github.com/chef/chef-dk/issues/199#issuecomment-60643682</a></p>\n\n<p>Recent ChefDK and Chef-Client releases from Omnibus (<a href=\"https://downloads.chef.io/\" rel=\"nofollow\">https://downloads.chef.io/</a>) include a root trust with the old RSA-1024  root certificates.</p>\n\n<p>I suggest you update the chef client. </p>\n\n<p>If you have not used the Omnibus installer from chef.io, you need to manually update the root Certs of your distro/OpenSSL.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 30489253, "answer_count": 1, "score": 0, "last_activity_date": 1432747464, "creation_date": 1432745780, "last_edit_date": 1432746097, "question_id": 30488750, "link": "https://stackoverflow.com/questions/30488750/using-the-aws-sdk-during-a-chef-run-errors-but-running-it-outside-of-chef-works", "title": "Using the AWS SDK during a chef run errors but running it outside of chef works", "body": "<p>I have a helper library that AWS-SDK to pull information so it can return a list of names like so:</p>\n\n<pre><code>def get_load_balancer_names\n    self.elb_client.describe_load_balancers[:load_balancer_descriptions].map { |elb| elb[:load_balancer_name] }\nend\n</code></pre>\n\n<p>when this code is run during the chef run I get this error:</p>\n\n<pre><code>SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed[0m\n</code></pre>\n\n<p>But when I run the code outside of the chef run it works (I get a list of ELB names like I expect).</p>\n\n<p>I use an IAM role for authentication.</p>\n\n<p>I did find <a href=\"https://forums.aws.amazon.com/thread.jspa?threadID=85553\" rel=\"nofollow\">this</a> that added a (potential) fix so you can do:</p>\n\n<pre><code>AWS.config(:ssl_ca_path =&gt; '/...')\n</code></pre>\n\n<p>but this isn't really an option as I would rather deal with the problem itself (unless there is no other way of course).</p>\n\n<p>I think it might be that AWS-SDK is using the chef SSL cert during the chef run and that this might be the cause.  </p>\n\n<p>Why is it erroring like this and how do I fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "datatable"], "answers": [{"tags": [], "owner": {"reputation": 824, "user_id": 4547921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3193d2112b1a382aa03cbc747d7dba2e?s=128&d=identicon&r=PG&f=1", "display_name": "jpriebe", "link": "https://stackoverflow.com/users/4547921/jpriebe"}, "is_accepted": true, "score": 1, "last_activity_date": 1432746695, "creation_date": 1432746695, "answer_id": 30489033, "question_id": 30488674, "link": "https://stackoverflow.com/questions/30488674/categorizing-a-hash-of-arrays-into-a-datatable-rails/30489033#30489033", "title": "Categorizing a hash of arrays into a datatable. rails", "body": "<p>In this case you can just call <code>flatten</code> twice.</p>\n\n<pre><code>myhash = {\"Level 1\" =&gt; [\"foo\", \"bar\"], \"Level 2\" =&gt; [\"foo\", \"bar\", \"foobar\"]}  \n\nmyhash.flatten.flatten\n=&gt; [\"Level 1\", \"foo\", \"bar\", \"Level 2\", \"foo\", \"bar\", \"foobar\"]\n</code></pre>\n"}], "owner": {"reputation": 838, "user_id": 4107375, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/92eb78c7c4b20429f9d22a1d5e38be57?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/4107375/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 30489033, "answer_count": 1, "score": 0, "last_activity_date": 1432746695, "creation_date": 1432745539, "question_id": 30488674, "link": "https://stackoverflow.com/questions/30488674/categorizing-a-hash-of-arrays-into-a-datatable-rails", "title": "Categorizing a hash of arrays into a datatable. rails", "body": "<p>I'm not sure how to go about categorizing a hash of arrays. My hash would look something like this: </p>\n\n<pre><code>{\"Level 1\" =&gt; [foo, bar], \"Level 2\" =&gt; [foo, bar, foobar]}  \n</code></pre>\n\n<p>I want to be able to display the hash key in a row, and then place the objects of that keys value in rows below that.</p>\n\n<p>Heres an example of how the view should look:</p>\n\n<p><img src=\"https://i.stack.imgur.com/HZRDP.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "gem", "bundle"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1432749507, "post_id": 30488169, "comment_id": 49057776, "body": "Ruby&#39;s <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/open-uri/rdoc/index.html\" rel=\"nofollow noreferrer\">OpenURI</a> is built-in and is probably what you want to use. Try <code>require &#39;open-uri&#39;</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "is_accepted": false, "score": 3, "last_activity_date": 1432744389, "creation_date": 1432744389, "answer_id": 30488282, "question_id": 30488169, "link": "https://stackoverflow.com/questions/30488169/require-open-url-load-error-when-executing-nokogiri-tester/30488282#30488282", "title": "Require &quot;open-url&quot; load error when executing Nokogiri tester", "body": "<p>Just a typo. Use <code>open-uri</code> (not <code>open-url</code>).</p>\n"}], "owner": {"reputation": 319, "user_id": 4883464, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10200587255120272/picture?type=large", "display_name": "AlexWang", "link": "https://stackoverflow.com/users/4883464/alexwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432749410, "creation_date": 1432744032, "last_edit_date": 1432749410, "question_id": 30488169, "link": "https://stackoverflow.com/questions/30488169/require-open-url-load-error-when-executing-nokogiri-tester", "title": "Require &quot;open-url&quot; load error when executing Nokogiri tester", "body": "<p>I am trying to follow the RailsCast to use Nokogiri. </p>\n\n<p>Just a few very basic lines in my testing script file:</p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'open-url'\n\nurl = \"http://www.walmart.com/search/search-ng.do?search_constraint=0&amp;ic=48_0&amp;search_query=Batman&amp;Find.x=0&amp;Find.y=0&amp;Find=Find\"\ndoc = Nokogiri::HTML(open(url))\nputs doc.at_css(\"title\").text\n</code></pre>\n\n<p>But when I execute it, I run into an error: </p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- open-url (LoadError)\n    from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from nokogiri.test.rb:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>I did install open url gem following this instruction:<a href=\"https://github.com/openurl/openurl\" rel=\"nofollow\">https://github.com/openurl/openurl</a>\nHow do I fix the error message? </p>\n"}, {"tags": ["ruby", "methods", "hash", "arguments"], "comments": [{"owner": {"reputation": 439, "user_id": 797881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GvLs.jpg?s=128&g=1", "display_name": "ShallmentMo", "link": "https://stackoverflow.com/users/797881/shallmentmo"}, "edited": false, "score": 0, "creation_date": 1432745598, "post_id": 30488147, "comment_id": 49055513, "body": "maybe you can set  &quot;@entries&quot; to be Hash.new(nil), so the value of @entries with any key will be nil, then you add entry just judge whether entry is a Hash, and merge it"}], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 0, "last_activity_date": 1432744449, "creation_date": 1432744449, "answer_id": 30488303, "question_id": 30488147, "link": "https://stackoverflow.com/questions/30488147/add-hash-argument-or-string-argument-in-a-method-to-a-hash-ruby/30488303#30488303", "title": "Add hash argument or string argument in a method to a hash (Ruby)", "body": "<p>I refactored the code:</p>\n\n<pre><code>class Test\n  attr_accessor :entries\n\n  def initialize\n    @entries = {}\n  end\n\n  def add(entry)\n    entry.is_a?(Hash) ? @entries.merge!(entry) : @entries[entry] = nil\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2756091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7503ae11d1e5aef55c9235972fbceebd?s=128&d=identicon&r=PG&f=1", "display_name": "user2756091", "link": "https://stackoverflow.com/users/2756091/user2756091"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 30488303, "answer_count": 1, "score": 0, "last_activity_date": 1432744449, "creation_date": 1432743976, "question_id": 30488147, "link": "https://stackoverflow.com/questions/30488147/add-hash-argument-or-string-argument-in-a-method-to-a-hash-ruby", "title": "Add hash argument or string argument in a method to a hash (Ruby)", "body": "<p>If the argument \"entry\" to the method add is a hash I need to add it to the :entries hash. If \"entry\" is a string \"entry\" needs to be set as a key in the hash and its value to nil. I have a solution below but is there a cleaner way to do this?</p>\n\n<pre><code>class Test\n    attr_accessor :entries\n\n    def initialize\n        @entries = {}\n    end\n\n    def add(entry)\n        if entry.is_a?(Hash)\n          entry.each do |word, definition|\n            @entries[word] = definition\n          end\n        else\n          @entries[entry] = nil\n        end\n    end\nend\n\n@test = Test.new\n@test.add(\"the\")\n#{\"the\" =&gt; nil}\n@test.add(\"the\" =&gt; \"one\")\n#{\"the\"=&gt;\"one\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "rubygems", "therubyracer"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1432743717, "post_id": 30487976, "comment_id": 49054346, "body": "... Is Python 2 installed?"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1432744008, "post_id": 30487976, "comment_id": 49054552, "body": "Possible duplicate <a href=\"http://stackoverflow.com/questions/6356450/therubyracer-gem-on-windows\" title=\"therubyracer gem on windows\">stackoverflow.com/questions/6356450/therubyracer-gem-on-wind&zwnj;&#8203;ows</a>"}, {"owner": {"reputation": 115, "user_id": 4019789, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e9a8be13b45bc7cbd65b5c8b05c643fa?s=128&d=identicon&r=PG&f=1", "display_name": "webDev", "link": "https://stackoverflow.com/users/4019789/webdev"}, "edited": false, "score": 0, "creation_date": 1432744485, "post_id": 30487976, "comment_id": 49054833, "body": "yes I have python2.7 installed and working fine at command prompt"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4019789, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e9a8be13b45bc7cbd65b5c8b05c643fa?s=128&d=identicon&r=PG&f=1", "display_name": "webDev", "link": "https://stackoverflow.com/users/4019789/webdev"}, "edited": false, "score": 0, "creation_date": 1432744920, "post_id": 30488110, "comment_id": 49055076, "body": "I have removed both gems &#39;therubyracer&#39;, &#39;less-rails&#39; coz I don&#39;t need them, my bundle got installed successfully but getting errors saying &quot;LoadError - cannot load such file -- less&quot;"}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 115, "user_id": 4019789, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e9a8be13b45bc7cbd65b5c8b05c643fa?s=128&d=identicon&r=PG&f=1", "display_name": "webDev", "link": "https://stackoverflow.com/users/4019789/webdev"}, "edited": false, "score": 0, "creation_date": 1432745988, "post_id": 30488110, "comment_id": 49055759, "body": "<a href=\"http://stackoverflow.com/questions/13888381/ruby-on-rails-error-cannot-load-such-file-less\" title=\"ruby on rails error cannot load such file less\">stackoverflow.com/questions/13888381/&hellip;</a>"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 1, "last_activity_date": 1432743882, "creation_date": 1432743882, "answer_id": 30488110, "question_id": 30487976, "link": "https://stackoverflow.com/questions/30487976/therubyracer-not-installing-on-windows/30488110#30488110", "title": "therubyracer not installing on Windows", "body": "<p>Unfortunately, the <code>rubyracer</code> gem does not work on Windows. See this</p>\n\n<p><a href=\"https://github.com/cowboyd/libv8/issues/133\" rel=\"nofollow\">https://github.com/cowboyd/libv8/issues/133</a></p>\n"}], "owner": {"reputation": 115, "user_id": 4019789, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e9a8be13b45bc7cbd65b5c8b05c643fa?s=128&d=identicon&r=PG&f=1", "display_name": "webDev", "link": "https://stackoverflow.com/users/4019789/webdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2215, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456855980, "creation_date": 1432743475, "last_edit_date": 1456855980, "question_id": 30487976, "link": "https://stackoverflow.com/questions/30487976/therubyracer-not-installing-on-windows", "title": "therubyracer not installing on Windows", "body": "<p>When attempting to install gem I am getting following error</p>\n\n<pre><code>C:\\xampp\\htdocs\\mg&gt;gem install therubyracer\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing therubyracer:\nERROR: Failed to build gem native extension.\nC:/RailsInstaller/Ruby2.1.0/bin/ruby.exe -r ./siteconf20150527-5032-1urwkwd.\nrb extconf.rb\ncreating Makefile\nThe system cannot find the path specified.\nThe system cannot find the path specified.\nThe system cannot find the path specified.\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/libv8-3.16.14.7/ext/libv8/b\nuilder.rb:68:in `setup_python!': libv8 requires python 2 to be installed in orde\nr to build, but it is currently not available (RuntimeError)\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/libv8-3.16.14.\n7/ext/libv8/builder.rb:52:in `block in build_libv8!'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/libv8-3.16.14.\n7/ext/libv8/builder.rb:49:in `chdir'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/libv8-3.16.14.\n7/ext/libv8/builder.rb:49:in `build_libv8!'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/libv8-3.16.14.\n7/ext/libv8/location.rb:24:in `install!'\n        from extconf.rb:7:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1\n.0/gems/libv8-3.16.14.7 for inspection.\nResults logged to C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/extensions/x86\n-mingw32/2.1.0/libv8-3.16.14.7/gem_make.out\n</code></pre>\n\n<p>I have tried adding this in Gemfile</p>\n\n<pre><code>gem 'therubyracer',\ngem 'less-rails\n</code></pre>\n\n<p>Tried</p>\n\n<pre><code>gem uninstall libv8\ngem install therubyracer -v=0.10.1\n</code></pre>\n\n<p>Everything above failed and therubyracer never installed.</p>\n"}, {"tags": ["ruby", "hash", "searchkick"], "comments": [{"owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1432744591, "post_id": 30487910, "comment_id": 49054899, "body": "it sounds like you just need one more step to go from your converted hash to an &amp;&amp; of filters. Don&#39;t try and get fancy, just make it work :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1432753287, "post_id": 30487910, "comment_id": 49059891, "body": "Please provide the output expected. I am not that familiar with <code>searchkick</code> but there are many users on here that can certainly help with <code>Hash</code> manipulation if you specify input and output."}, {"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1432754001, "post_id": 30487910, "comment_id": 49060285, "body": "Thanks @engineersmnky. The output needs to look like the example above <code>Observation.search(&quot;something&quot;, boost_by: {biz_trv:{factor: 10}} &amp;&amp; {day_com:{factor:100}})</code>. The dynamic part is the part after <code>boost_by:</code>. That search produces a list of search kick results, and information about the quality of the results and other things that aren&#39;t relevant to the question."}], "answers": [{"comments": [{"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1433339928, "post_id": 30605793, "comment_id": 49310587, "body": "<code>filters.all?</code> just returns <code>true</code>"}, {"owner": {"reputation": 6881, "user_id": 477047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Qh2bO.gif?s=128&g=1", "display_name": "David Unric", "link": "https://stackoverflow.com/users/477047/david-unric"}, "reply_to_user": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1433368632, "post_id": 30605793, "comment_id": 49328517, "body": "@Arel I&#39;m sorry, the question was probably not clear to me. Updating my answer with more generic solution which is equivalent to your example but works for arbitrary number of <code>boost_by</code> arguments and <code>&amp;&amp;</code> can by freely interchanged."}], "tags": [], "owner": {"reputation": 6881, "user_id": 477047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Qh2bO.gif?s=128&g=1", "display_name": "David Unric", "link": "https://stackoverflow.com/users/477047/david-unric"}, "is_accepted": false, "score": 1, "last_activity_date": 1433368702, "last_edit_date": 1433368702, "creation_date": 1433276314, "answer_id": 30605793, "question_id": 30487910, "link": "https://stackoverflow.com/questions/30487910/building-a-dynamic-query-with-separate-hashes/30605793#30605793", "title": "Building a dynamic query with separate hashes", "body": "<p>I'm not sure if correctly understand your question, but if you need apply <code>&amp;&amp;</code> between arbitrary number of elements<del>, you may simply use <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-all-3F\" rel=\"nofollow\">Enumerable#all?</a> method, like</p>\n\n<pre><code>filters = [{biz_trv:{factor: 10}}, {day_com:{factor:100}}, \u2026]\nObservation.search(\"something\", boost_by: filters.all?)\n</code></pre>\n\n<p></del>\n<strong>Update:</strong></p>\n\n<pre><code>filters = [{biz_trv:{factor: 12}}, {day_com:{factor:50}},\n           {location:{factor:40}}]\nObservation.search(\"something\",\n                   boost_by: filters.inject {|ac,e| ac &amp;&amp; e})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "is_accepted": false, "score": 0, "last_activity_date": 1433282196, "creation_date": 1433282196, "answer_id": 30607317, "question_id": 30487910, "link": "https://stackoverflow.com/questions/30487910/building-a-dynamic-query-with-separate-hashes/30607317#30607317", "title": "Building a dynamic query with separate hashes", "body": "<p>Assuming you always want to use the same operator, you want to pass the output of your <code>map</code> to something that behaves like <code>inject</code>:</p>\n\n<pre><code>(params[:filter].map {|k,v| {k.to_sym =&gt; {factor:v}}}).inject() { |r,c| r &amp;&amp; c }\n</code></pre>\n\n<p>Note: not tested!</p>\n"}, {"comments": [{"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1433347079, "post_id": 30609962, "comment_id": 49316215, "body": "That&#39;s a great solution! Thanks Ian. I&#39;ll award you the bounty in an hour when it lets me."}, {"owner": {"reputation": 320, "user_id": 4348887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sSvraDbLK8Q/AAAAAAAAAAI/AAAAAAAAAAA/5w1jBSPHUxA/photo.jpg?sz=128", "display_name": "ian root", "link": "https://stackoverflow.com/users/4348887/ian-root"}, "reply_to_user": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 1, "creation_date": 1433357895, "post_id": 30609962, "comment_id": 49322710, "body": "thank, arel. also occurs to me, you may want to have some safety checks in there for bad input data or sql injection attacks."}], "tags": [], "owner": {"reputation": 320, "user_id": 4348887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sSvraDbLK8Q/AAAAAAAAAAI/AAAAAAAAAAA/5w1jBSPHUxA/photo.jpg?sz=128", "display_name": "ian root", "link": "https://stackoverflow.com/users/4348887/ian-root"}, "is_accepted": true, "score": 3, "last_activity_date": 1433299432, "creation_date": 1433299432, "answer_id": 30609962, "question_id": 30487910, "link": "https://stackoverflow.com/questions/30487910/building-a-dynamic-query-with-separate-hashes/30609962#30609962", "title": "Building a dynamic query with separate hashes", "body": "<p>i have a solution that involves forming a string of your query, and then using the #send method to deliver your query string to the object.</p>\n\n<pre><code>hash = {\"luxury_shopper\"=&gt;\"10\", \"movie_goer\"=&gt;\"80\"}\nBLANK_PARAMS = \"boost_by: \"\nparams = BLANK_PARAMS\nhash.each do |k, v|\n  if params == BLANK_PARAMS\n    params += \"{#{k}: {factor: #{v}}}\"\n  else\n    params += \" &amp;&amp; {#{k}: {factor: #{v}}}\"\n  end\nend\n</code></pre>\n\n<p>at the end of this operation, the params string will be the following:</p>\n\n<pre><code>\"boost_by: {luxury_shopper: {factor: 10}} &amp;&amp; {movie_goer: { factor: 80}}\"\n</code></pre>\n\n<p>so if you now wanted to run the following command:</p>\n\n<pre><code>Observation.search(\"something\", boost_by: {luxury_shopper: {factor: 10}} &amp;&amp; {movie_goer: {factor: 80}})\n</code></pre>\n\n<p>you could do so using #send as such:</p>\n\n<pre><code>Observation.send('search', 'something', params)\n</code></pre>\n"}], "owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 30609962, "answer_count": 3, "score": 0, "last_activity_date": 1433368702, "creation_date": 1432743311, "last_edit_date": 1433265819, "question_id": 30487910, "link": "https://stackoverflow.com/questions/30487910/building-a-dynamic-query-with-separate-hashes", "title": "Building a dynamic query with separate hashes", "body": "<p>Ok, I've been trying to figure out how to approach this all morning. Let's say you have a hash that looks like this: </p>\n\n<pre><code>{\"luxury_shopper\"=&gt;\"10\", \"movie_goer\"=&gt;\"80\"}\n</code></pre>\n\n<p>and you want to build a query that looks like this:</p>\n\n<pre><code>Observation.search(\"something\", boost_by: {biz_trv:{factor: 10}} &amp;&amp; {day_com:{factor:100}})\n</code></pre>\n\n<p>My approach so far is to convert the incoming hash to look like this:</p>\n\n<pre><code>[{:luxury_shopper=&gt;{:factor=&gt;\"10\"}}, {:movie_goer=&gt;{:factor=&gt;\"80\"}}]\n</code></pre>\n\n<p>by iterating over the original hash like this:</p>\n\n<pre><code>params[:filter].map {|k,v| {k.to_sym =&gt; {factor:v}}}\n</code></pre>\n\n<p>The problem I'm having is that since the query I'm trying to build is made up of an unknown number of hashes that I will \"boost_by\", I can't just do something like <code>filters[0] &amp;&amp; filters[1]</code> I'm stumped here. Does anyone know how I could dynamically insert hashes into my query and place the operator between them? </p>\n\n<p>EDIT:</p>\n\n<p>The query looks like this:</p>\n\n<pre><code>Observation.search(\"someting\", boost_by: `insert hash` `insert operator` `insert hash` etc...)\n</code></pre>\n\n<p>The above query could have any number of hashes and operators. So if a user wanted to pass in 10 fields to boost_by, I need to be able to accept all 10 of those hashes and whatever operator goes between them, so for example, my query could look like either of the below examples:</p>\n\n<pre><code>Observation.search(\"something\", boost_by: {biz_trv:{factor: 10}})\n\nObservation.search(\"something\", boost_by: {biz_trv:{factor: 12}} &amp;&amp; {day_com:{factor:50}} &amp;&amp; {location:{factor:40}})\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "cron", "whenever"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1432744124, "post_id": 30487831, "comment_id": 49054622, "body": "What&#39;s wrong with the first one?  It will parse just fine by cron.  All of mine look that way."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1432746146, "post_id": 30487831, "comment_id": 49055872, "body": "Why do you believe that first crontab entry is incorrect? That&#39;s how you embed single-quotes inside a single-quoted string. (That happens to not be necessary in this case and so could be simplified to the second example but should work just fine I would think.)"}, {"owner": {"reputation": 279, "user_id": 4279189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3Gy5u.jpg?s=128&g=1", "display_name": "Colton Seal", "link": "https://stackoverflow.com/users/4279189/colton-seal"}, "edited": false, "score": 0, "creation_date": 1432748607, "post_id": 30487831, "comment_id": 49057279, "body": "Ya it doesnt work on our server though, I thought that it was illegal syntax."}], "owner": {"reputation": 279, "user_id": 4279189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3Gy5u.jpg?s=128&g=1", "display_name": "Colton Seal", "link": "https://stackoverflow.com/users/4279189/colton-seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432770415, "creation_date": 1432743099, "last_edit_date": 1432770415, "question_id": 30487831, "link": "https://stackoverflow.com/questions/30487831/whenever-gem-is-generating-illegal-crontab-syntax", "title": "&quot;whenever&quot; gem is generating illegal crontab syntax", "body": "<p>I'm using the <a href=\"https://github.com/javan/whenever\" rel=\"nofollow\"><code>whenever</code> gem</a> for my crontab scheduling.  The syntax being generated is incorrect.  Below you will notice it is adding these quotes and forward slashes<code>'\\''AddressGeocodeWorker.perform_async'\\''</code></p>\n\n<p>Incorrect crontab</p>\n\n<p><code>0 4 * * * /bin/bash -l -c 'cd /var/lib/streetcred/agency/releases/streetcred &amp;&amp; bin/rails runner -e production '\\''AddressGeocodeWorker.perform_async'\\'''</code></p>\n\n<p>Correct crontab would look like this</p>\n\n<p><code>0 4 * * * /bin/bash -l -c 'cd /var/lib/streetcred/agency/releases/streetcred &amp;&amp; bin/rails runner -e production AddressGeocodeWorker.perform_async'</code></p>\n\n<p>schedule.rb </p>\n\n<p><code>every 1.day, :at =&gt; '4:00 am' do\n  runner \"AddressGeocodeWorker.perform_async\"\nend\n</code></p>\n\n<p>How would I get <code>whenever</code> to generate the correct crontab entry?</p>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 0, "last_activity_date": 1432760041, "last_edit_date": 1432760041, "creation_date": 1432756128, "answer_id": 30491867, "question_id": 30487826, "link": "https://stackoverflow.com/questions/30487826/defining-specific-attr-accessor-methods-in-order-to-distinguish-several-types-of/30491867#30491867", "title": "Defining specific attr_accessor methods in order to distinguish several types of instance variables", "body": "<p>Do you mean something like this? </p>\n\n<pre><code>module CustomAttributeCollector\n  def self.included(base)\n    base.extend(ClassMethods)\n  end\n  module ClassMethods\n    def attrs_1(*args)\n      @_attrs_1 ||= []\n      (args - @_attrs_1).each do |arg|\n        attr_accessor arg\n        @_attrs_1 &lt;&lt; arg\n      end\n    end\n    def attrs_2(*args)\n      @_attrs_2 ||= []\n      (args - @_attrs_2).each do |arg|\n        attr_accessor arg\n        @_attrs_2 &lt;&lt; arg\n      end    \n    end\n  end\n  def attrs_1 \n    self.class.instance_variable_get(\"@_attrs_1\")\n  end\n  def attrs_2\n    self.class.instance_variable_get(\"@_attrs_2\")\n  end \nend     \n\nclass DesignUnit\n include CustomAttributeCollector\n  attrs_1 :a,:b\n  attrs_2 :c\nend\n</code></pre>\n\n<p>then </p>\n\n<pre><code>du = DesignUnit.new\ndu.attrs_1\n#=&gt; [:a,:b]\ndu.attrs_2\n#=&gt; [:c]\ndu.methods.sort - Object.methods\n#=&gt; [:a, :a=, :attrs_1, :attrs_2, :b, :b=, :c, :c=]\n</code></pre>\n\n<p>Obviously this could clearly use some clean up and refactoring but I think as an example it accomplishes your goal.</p>\n"}], "owner": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 30491867, "answer_count": 1, "score": 2, "last_activity_date": 1432760041, "creation_date": 1432743080, "question_id": 30487826, "link": "https://stackoverflow.com/questions/30487826/defining-specific-attr-accessor-methods-in-order-to-distinguish-several-types-of", "title": "Defining specific attr_accessor methods in order to distinguish several types of instance variables", "body": "<p>When describing classes, I would like to be able to diffentiate different kind of instance variables, using a dedicated class methods (let's call it my_attrs_1, my_attrs_2). Something like : </p>\n\n<pre><code>class DesignUnit\n  attrs_1 :a,:b\n  attrs_2 :c  \nend\n</code></pre>\n\n<p>So that I can iterate through these different instance variables like this :</p>\n\n<pre><code>du=DesignUnit.new\n#...\ndu.attrs_1.each do ...\n   #I get a, and b\nend\n</code></pre>\n\n<p>My starting point is to have a look at how to customize attr_acessor definition (for instance <a href=\"http://maxivak.com/ruby-metaprogramming-and-own-attr_accessor/\" rel=\"nofollow\">here</a>), but I didn't succeed to make it work.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "is_accepted": true, "score": 3, "last_activity_date": 1432743271, "last_edit_date": 1432743271, "creation_date": 1432742408, "answer_id": 30487584, "question_id": 30487532, "link": "https://stackoverflow.com/questions/30487532/output-array-in-elem-elem-elem-format/30487584#30487584", "title": "Output array in (elem,elem,elem) format?", "body": "<pre><code>puts \"(#{array.join ','})\"\n</code></pre>\n\n<p>This is a pretty simple solution that uses Ruby's <a href=\"http://en.wikipedia.org/wiki/String_interpolation#Ruby\" rel=\"nofollow\">string interpolation</a> and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-join\" rel=\"nofollow\"><code>Array#join</code></a>. I can give a more detailed explanation if you need it.</p>\n\n<p>Of course, you can use <code>print</code> or anything, really; the string that contains the result you want is just this:</p>\n\n<pre><code>\"(#{array.join ','})\"\n</code></pre>\n\n<p>Note that you <em>must</em> use double-quotes (<code>\"</code>) for the external pair. The internal pair can be either single or double and it will work.</p>\n"}, {"comments": [{"owner": {"reputation": 35424, "user_id": 81071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a0cc4d1c55ee3ae48437c4e7774355b7?s=128&d=identicon&r=PG", "display_name": "Koraktor", "link": "https://stackoverflow.com/users/81071/koraktor"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1432801001, "post_id": 30487602, "comment_id": 49077907, "body": "@QPaysTaxes <code>#join</code> concatenates the array elements into a string using the given separator. The <code>%</code> operator uses the left-hand string as a format string, replacing the format sequences with the elements in the right-side array."}], "tags": [], "owner": {"reputation": 35424, "user_id": 81071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a0cc4d1c55ee3ae48437c4e7774355b7?s=128&d=identicon&r=PG", "display_name": "Koraktor", "link": "https://stackoverflow.com/users/81071/koraktor"}, "is_accepted": false, "score": 1, "last_activity_date": 1432742451, "creation_date": 1432742451, "answer_id": 30487602, "question_id": 30487532, "link": "https://stackoverflow.com/questions/30487532/output-array-in-elem-elem-elem-format/30487602#30487602", "title": "Output array in (elem,elem,elem) format?", "body": "<pre><code>arr = [ 2, 3, 4 ]\nresult = '(%s)' % [ arr.join(',') ]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1432751190, "post_id": 30488687, "comment_id": 49058733, "body": "I&#39;d like to note that you should just use <code>&quot;(#{arr.join(&#39;,&#39;)})&quot;</code> if you don&#39;t want it to be outputted as well; if you do, then what you have is good."}, {"owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1432752623, "post_id": 30488687, "comment_id": 49059550, "body": "@QPaysTaxes Yes you are right. This is answer is for th e people who would like to print and store the result"}], "tags": [], "owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "is_accepted": false, "score": 0, "last_activity_date": 1432752802, "last_edit_date": 1432752802, "creation_date": 1432745593, "answer_id": 30488687, "question_id": 30487532, "link": "https://stackoverflow.com/questions/30487532/output-array-in-elem-elem-elem-format/30488687#30488687", "title": "Output array in (elem,elem,elem) format?", "body": "<p>We can do this by joining the array. See the below code</p>\n\n<pre><code>array = [2, 3, 4]\nvalue = \"(#{arr.join(',')})\"\nvalue = p \"(#{arr.join(',')})\"  # if you want to assign the result into variable after print it in console\n</code></pre>\n"}], "owner": {"reputation": 47363, "user_id": 146780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ea519fede5177604945a5c430e6e19?s=128&d=identicon&r=PG", "display_name": "jmasterx", "link": "https://stackoverflow.com/users/146780/jmasterx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 30487584, "answer_count": 3, "score": 1, "last_activity_date": 1432752802, "creation_date": 1432742275, "last_edit_date": 1432744637, "question_id": 30487532, "link": "https://stackoverflow.com/questions/30487532/output-array-in-elem-elem-elem-format", "title": "Output array in (elem,elem,elem) format?", "body": "<p>Is there a way to output an array like so:</p>\n\n<pre><code>(elem,elem,elem)\n</code></pre>\n\n<p>For example, if the array is <code>[2, 3, 4]</code>, it would print:</p>\n\n<pre><code>(2,3,4)\n</code></pre>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1432741996, "post_id": 30487086, "comment_id": 49053208, "body": "what does your watir code look like?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1432742410, "post_id": 30487086, "comment_id": 49053503, "body": "Did you try <a href=\"http://www.rubydoc.info/github/watir/watir-classic/Watir/FileField\" rel=\"nofollow noreferrer\"><code>file_field</code></a>?"}, {"owner": {"reputation": 143, "user_id": 3005787, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e7f8c3e6900779cacb089a0f531ea02?s=128&d=identicon&r=PG&f=1", "display_name": "shaik", "link": "https://stackoverflow.com/users/3005787/shaik"}, "reply_to_user": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 1, "creation_date": 1432886165, "post_id": 30487086, "comment_id": 49121877, "body": "@Jeff Price,@orde I tried with @ie.file_field(:elementname,&#39;elementvalue&#39;).set(&#39;excelfilena&zwnj;&#8203;me.xls&#39;),with these I am able to uplaod the file my concern how to capture the error of the pop-up box in case if i upload wrong file xl/file missing for example,if I say @ie.file_field(:elementname,&#39;elementvalue&#39;).set(&#39;excelfilena&zwnj;&#8203;me.xl&#39;) here I am entering wrong format so it will give an error,how to capture that error"}, {"owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "edited": false, "score": 0, "creation_date": 1433331753, "post_id": 30487086, "comment_id": 49304140, "body": "Just try to not get such error.  While executing, you check that file exists in the first place? While developing you can look at the browser window to see your code is correct. You don&#39;t have to test browser giving an error for missing file. This is not part of your site, it is something implemented in the browser so there is nothing to worry about."}], "answers": [{"tags": [], "owner": {"reputation": 3822, "user_id": 477068, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/8rhcs.jpg?s=128&g=1", "display_name": "sbs", "link": "https://stackoverflow.com/users/477068/sbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1434410310, "creation_date": 1434410310, "answer_id": 30856513, "question_id": 30487086, "link": "https://stackoverflow.com/questions/30487086/unable-to-upload-the-file-using-watir/30856513#30856513", "title": "Unable to Upload the File using Watir", "body": "<pre><code>BROWSER.file_field.set(\"/path/to/file.xls\") if File.exist? \"/path/to/file.xls\"\n</code></pre>\n\n<p>Do the file type check before the <code>set</code> method if necessary. </p>\n"}], "owner": {"reputation": 143, "user_id": 3005787, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e7f8c3e6900779cacb089a0f531ea02?s=128&d=identicon&r=PG&f=1", "display_name": "shaik", "link": "https://stackoverflow.com/users/3005787/shaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1434410310, "creation_date": 1432741141, "question_id": 30487086, "link": "https://stackoverflow.com/questions/30487086/unable-to-upload-the-file-using-watir", "title": "Unable to Upload the File using Watir", "body": "<p>I am trying to upload the file through running the automation scripts but I am unable to do so can someone help me with these</p>\n\n<p>System Configurations</p>\n\n<pre><code> Windows:7\n Ruby:1.8.7\n\nThe HTML code is as below\n\n&lt;td id=\"fileNameArea\" colspan=\"2\"&gt;\n&lt;br&gt;\n Set up File\n&lt;input id=\"file\" type=\"file\" name=\"file\"&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/LtRMT.png\" alt=\"Following is the image on the web\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "edited": false, "score": 0, "creation_date": 1432742316, "post_id": 30487033, "comment_id": 49053435, "body": "Not familiar with the gem but maybe you can try dup (<a href=\"http://apidock.com/rails/ActiveRecord/Core/dup\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Core/dup</a>) the periods and assign the new ones to the current_user as a workaround?"}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1432742756, "last_edit_date": 1432742756, "creation_date": 1432742366, "answer_id": 30487564, "question_id": 30487033, "link": "https://stackoverflow.com/questions/30487033/ruby-on-rails-dependent-object-destroyed-when-transfered-from-guest-user-to-reg/30487564#30487564", "title": "Ruby on Rails: dependent object destroyed when transfered from guest user to registered user", "body": "<p>Even though <code>Period#user_id</code> has changed, <code>guest_user.periods</code> is still loaded in memory and is what gets destroyed when you destroy the guest user. If you <code>guest_user.reload</code>, its associations will clear out and it becomes safe to destroy. You could also <code>guest_user.periods(true)</code> to force reload of just the periods.</p>\n\n<p>Another option is:</p>\n\n<pre><code>guest_user.periods.update_all(user_id: current_user.id)\n</code></pre>\n\n<p>This executes a single query to perform the update, which will be nice if there are a lot of periods, and also doesn't load the <code>guest_user.periods</code> association, so it will load fresh during the destroy and find the correct empty set.</p>\n"}], "owner": {"reputation": 103, "user_id": 4062992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86eca5247806361b24c39dc6285a4b5d?s=128&d=identicon&r=PG", "display_name": "norydev", "link": "https://stackoverflow.com/users/4062992/norydev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "accepted_answer_id": 30487564, "answer_count": 1, "score": 2, "last_activity_date": 1432742756, "creation_date": 1432740978, "question_id": 30487033, "link": "https://stackoverflow.com/questions/30487033/ruby-on-rails-dependent-object-destroyed-when-transfered-from-guest-user-to-reg", "title": "Ruby on Rails: dependent object destroyed when transfered from guest user to registered user", "body": "<p>Here is my problem:</p>\n\n<p>I'm using <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Create-a-guest-user\" rel=\"nofollow\">Devise's guest_user</a>, that contains a logging_in method to transfer guest_user parameters to the registered user when he logs in. So in my case, the user <code>has_many periods, dependent: :destroy</code>, so here is the logging_in method:</p>\n\n<pre><code>def logging_in\n  guest_periods = guest_user.periods.all\n  guest_periods.each do |p|\n    p.user_id = current_user.id\n    p.save!\n  end\n\n  current_user.latest_entry = guest_user.latest_entry\n  current_user.is_in_zone = guest_user.is_in_zone\n  current_user.save\nend\n</code></pre>\n\n<p>However, when a guest_user logs in, his periods gets destroyed instead of being transfered. Here is the log:</p>\n\n<pre><code>Started GET \"/\" for ::1 at 2015-05-11 00:18:03 +0300\nProcessing by WelcomeController#index as HTML\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 24]]\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT 1  [[\"id\", 23]]\n  Period Load (0.3ms)  SELECT \"periods\".* FROM \"periods\" WHERE \"periods\".\"user_id\" = $1  [[\"user_id\", 23]]\n   (0.2ms)  BEGIN\n  CACHE (0.0ms)  SELECT \"periods\".* FROM \"periods\" WHERE \"periods\".\"user_id\" = $1  [[\"user_id\", 23]]\n  SQL (0.8ms)  UPDATE \"periods\" SET \"user_id\" = $1, \"updated_at\" = $2 WHERE \"periods\".\"id\" = $3  [[\"user_id\", 24], [\"updated_at\", \"2015-05-10 21:18:03.863162\"], [\"id\", 170]]\n   (0.9ms)  COMMIT\n   (0.2ms)  BEGIN\n  SQL (2.1ms)  UPDATE \"users\" SET \"is_in_zone\" = $1, \"latest_entry\" = $2, \"updated_at\" = $3 WHERE \"users\".\"id\" = $4  [[\"is_in_zone\", \"t\"], [\"latest_entry\", \"2015-05-04\"], [\"updated_at\", \"2015-05-10 21:18:03.875572\"], [\"id\", 24]]\n   (15.8ms)  COMMIT\n   (0.5ms)  BEGIN\n  SQL (0.3ms)  DELETE FROM \"periods\" WHERE \"periods\".\"id\" = $1  [[\"id\", 170]]\n  SQL (0.7ms)  DELETE FROM \"users\" WHERE \"users\".\"id\" = $1  [[\"id\", 23]]\n   (1.2ms)  COMMIT\n</code></pre>\n\n<p>So we can see that the transfer is done, but then in the end, the periods are destroyed anyway. They should not be, as they are not belonging to the user to be destroyed any more.</p>\n\n<p>Why is it happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations", "models"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1432741137, "post_id": 30486952, "comment_id": 49052601, "body": "Are you saying that the associated user determines the category?  If so, could you use that information in the controller to set category when you create the guide?  Otherwise, how is the category determined?"}, {"owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 1, "creation_date": 1432741238, "post_id": 30486952, "comment_id": 49052676, "body": "When you assign @guide in your controller, you need to build it from the category. Something like <code>@guide = category.guides.build</code>. You will need to assign category first (e.g., <code>category = Category.find(params[:id])</code> if you are passing the id in to the controller). Would need to see the relevant controller and params to be more specific."}, {"owner": {"reputation": 31, "user_id": 4511117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/286300320/picture?type=large", "display_name": "Nathan Miller", "link": "https://stackoverflow.com/users/4511117/nathan-miller"}, "edited": false, "score": 0, "creation_date": 1432741902, "post_id": 30486952, "comment_id": 49053145, "body": "Have added the guide controller. Would love to see what you suggest. Will try to implement some of the above comment in the meantime. Cheers"}, {"owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1432743635, "post_id": 30486952, "comment_id": 49054294, "body": "What params are passed to the new method?"}, {"owner": {"reputation": 31, "user_id": 4511117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/286300320/picture?type=large", "display_name": "Nathan Miller", "link": "https://stackoverflow.com/users/4511117/nathan-miller"}, "edited": false, "score": 0, "creation_date": 1432744259, "post_id": 30486952, "comment_id": 49054703, "body": "Not sure what you mean, have edited in the controller above so you can have a look."}, {"owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1432745135, "post_id": 30486952, "comment_id": 49055204, "body": "The params are the values passed to the controller that you can use to find  (in this case) the Category. You can see them in the output dumped to terminal if you are running on localhost. I don&#39;t have a ton of time right now, but check out this question/answer: <a href=\"http://stackoverflow.com/questions/15665546/rails-pass-parameter-from-view-to-controller\">link</a>. The one difference would be you would use the &#39;build&#39; option to create a new @guide. By using nested routes, you will be getting the Category id in your params, which is what you need here."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4511117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/286300320/picture?type=large", "display_name": "Nathan Miller", "link": "https://stackoverflow.com/users/4511117/nathan-miller"}, "edited": false, "score": 0, "creation_date": 1432742635, "post_id": 30487391, "comment_id": 49053644, "body": "Now getting a no method error on the following   &#39;  &lt;strong&gt;Guides:&lt;/strong&gt;   &lt;p&gt;&lt;% @category.guides.each do |guide| %&gt;      &lt;p&gt;&lt;%= link_to guide.name, guide_path(guide) %&gt;&lt;p&gt;   &lt;% end %&gt;&lt;/p&gt;&#39;"}, {"owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "edited": false, "score": 0, "creation_date": 1432743703, "post_id": 30487391, "comment_id": 49054340, "body": "Try changing <code>guide_path(guide)</code> to <code>category_guide_path(guide)</code>."}, {"owner": {"reputation": 31, "user_id": 4511117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/286300320/picture?type=large", "display_name": "Nathan Miller", "link": "https://stackoverflow.com/users/4511117/nathan-miller"}, "edited": false, "score": 0, "creation_date": 1432744839, "post_id": 30487391, "comment_id": 49055027, "body": "Not working either <code>No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;guides&quot;, :format=&gt;nil,</code>"}], "tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 1, "last_activity_date": 1432741918, "creation_date": 1432741918, "answer_id": 30487391, "question_id": 30486952, "link": "https://stackoverflow.com/questions/30486952/basic-rails-how-do-automatically-assign-a-new-database-entry-to-an-associated/30487391#30487391", "title": "Basic Rails - how do automatically assign a new database entry to an associated entry it belongs to?", "body": "<p>Seems to me that you could go for something like a nested route here :</p>\n\n<pre><code>resources :categories do\n  resources :guides\nend\n</code></pre>\n\n<p>and then use your new route</p>\n\n<pre><code>&lt;%= link_to 'New Guide', new_category_guide_path(@category) %&gt;\n</code></pre>\n\n<p>This should make it easier to get the guide's category back when getting the form back.</p>\n"}, {"tags": [], "owner": {"reputation": 329, "user_id": 4839054, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10152888192793471/picture?type=large", "display_name": "Chris Brown", "link": "https://stackoverflow.com/users/4839054/chris-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1432747767, "creation_date": 1432747767, "answer_id": 30489346, "question_id": 30486952, "link": "https://stackoverflow.com/questions/30486952/basic-rails-how-do-automatically-assign-a-new-database-entry-to-an-associated/30489346#30489346", "title": "Basic Rails - how do automatically assign a new database entry to an associated entry it belongs to?", "body": "<p>Assuming that you have a column on your guide table that stores category ID, and your routes are nested as has been recommended, you should be able to add </p>\n\n<pre><code>@guide.category_id = @category.id\n</code></pre>\n\n<p>To your guides controller create action. And in your form change the first line to </p>\n\n<pre><code>&lt;%= form_for[@category, @guide] do |f| %&gt;\n</code></pre>\n\n<p>Now this should work </p>\n\n<pre><code>&lt;%= link_to 'new guide', new_category_guide_path(@category) %&gt;\n</code></pre>\n\n<p>And the current category should be assigned to your guide when it's created.</p>\n"}], "owner": {"reputation": 31, "user_id": 4511117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/286300320/picture?type=large", "display_name": "Nathan Miller", "link": "https://stackoverflow.com/users/4511117/nathan-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432747767, "creation_date": 1432740795, "last_edit_date": 1432741807, "question_id": 30486952, "link": "https://stackoverflow.com/questions/30486952/basic-rails-how-do-automatically-assign-a-new-database-entry-to-an-associated", "title": "Basic Rails - how do automatically assign a new database entry to an associated entry it belongs to?", "body": "<p>I'd like to automatically associate a new database entry with the database entry it belongs to without having to make a choice while on the form as the user can only come from the category page, so that once you're in a category and you decide to make a new entry within that category, the newly created entry is automatically within that category upon submission. Can anyone offer any help? </p>\n\n<p>My models are as follows:</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n\n  has_many :guides\n\nend\n\n\nclass Guide &lt; ActiveRecord::Base\n\n  belongs_to :user\n  belongs_to :category\n  has_many :ratings\n\n  def average_rating\n    average = ratings.inject(0.0){ |sum, el| sum + el.value }.to_f / ratings.size\n    average.round(2)\n  end\n\nend\n</code></pre>\n\n<p>The link to create the new guide for the category is pretty standard, though I thought that adding an instance variable might automatically associate the entry with the category though it doesn't:</p>\n\n<pre><code>&lt;%= link_to 'New Guide', new_guide_path(@category) %&gt;\n</code></pre>\n\n<p>Here is the controller for the guide:</p>\n\n<pre><code>class GuidesController &lt; ApplicationController\n  before_action :set_guide, only: [:show, :edit, :update, :destroy]\n\n  # GET /guides\n  # GET /guides.json\n  def index\n    @guides = Guide.all\n  end\n\n  # GET /guides/1\n  # GET /guides/1.json\n  def show\n  end\n\n  # GET /guides/new\n  def new\n    @guide = Guide.new\n  end\n\n  # GET /guides/1/edit\n  def edit\n  end\n\n  # POST /guides\n  # POST /guides.json\n  def create\n    @guide = Guide.new(guide_params)\n\n    respond_to do |format|\n      if @guide.save\n        format.html { redirect_to @guide, notice: 'Guide was successfully created.' }\n        format.json { render :show, status: :created, location: @guide }\n      else\n        format.html { render :new }\n        format.json { render json: @guide.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /guides/1\n  # PATCH/PUT /guides/1.json\n  def update\n    respond_to do |format|\n      if @guide.update(guide_params)\n        format.html { redirect_to @guide, notice: 'Guide was successfully updated.' }\n        format.json { render :show, status: :ok, location: @guide }\n      else\n        format.html { render :edit }\n        format.json { render json: @guide.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /guides/1\n  # DELETE /guides/1.json\n  def destroy\n    @guide.destroy\n    respond_to do |format|\n      format.html { redirect_to guides_url, notice: 'Guide was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_guide\n      @guide = Guide.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def guide_params\n      params.require(:guide).permit(:name, :category_id, :user_id, :stepOneText, :stepOnePhoto, :stepTwoText, :stepTwoPhoto, :stepThreeText, :stepThreePhoto)\n    end\nend\n</code></pre>\n\n<p>Form is pretty standard too, is there anything I should put in here to automatically assign it to the category entry it belongs to? </p>\n\n<pre><code>&lt;%= form_for(@guide) do |f| %&gt;\n  &lt;% if @guide.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@guide.errors.count, \"error\") %&gt; prohibited this guide from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @guide.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :stepOneText %&gt;\n    &lt;%= f.text_field :stepOneText %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :stepOnePhoto %&gt;\n    &lt;%= f.text_field :stepOnePhoto %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :stepTwoText %&gt;\n    &lt;%= f.text_field :stepTwoText %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :stepTwoPhoto %&gt;\n    &lt;%= f.text_field :stepTwoPhoto %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :stepThreeText %&gt;\n    &lt;%= f.text_field :stepThreeText %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :stepThreePhoto %&gt;\n    &lt;%= f.text_field :stepThreePhoto %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 819, "user_id": 3733382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6fa56bc2463bfe717912fb6b45a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "raviture", "link": "https://stackoverflow.com/users/3733382/raviture"}, "edited": false, "score": 1, "creation_date": 1432739916, "post_id": 30486603, "comment_id": 49051674, "body": "find_by will find only one element matching conditions. use Commen.where(post_id: 2)"}], "answers": [{"tags": [], "owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1432740268, "creation_date": 1432740268, "answer_id": 30486739, "question_id": 30486603, "link": "https://stackoverflow.com/questions/30486603/i-am-getting-a-limit-of-1-comment-while-finding-the-comment-using-post-id-in-rai/30486739#30486739", "title": "i am getting a limit of 1 comment while finding the comment using post_id in rails console", "body": "<p>You Can find all comments of post using following.</p>\n\n<pre><code>Comment.where(post_id: 2)\n</code></pre>\n\n<p>This will return collection of result.</p>\n\n<p>Please take a look at this link <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_querying.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 0, "last_activity_date": 1432742168, "creation_date": 1432742168, "answer_id": 30487500, "question_id": 30486603, "link": "https://stackoverflow.com/questions/30486603/i-am-getting-a-limit-of-1-comment-while-finding-the-comment-using-post-id-in-rai/30487500#30487500", "title": "i am getting a limit of 1 comment while finding the comment using post_id in rails console", "body": "<p>Provided your post class is registered to have many comments :</p>\n\n<pre><code>class Post\n  has_many :comments\nend\n</code></pre>\n\n<p>you can go for :</p>\n\n<pre><code>Post.find(2).comments\n</code></pre>\n"}], "owner": {"reputation": 8, "user_id": 4945377, "user_type": "registered", "profile_image": "https://graph.facebook.com/861050160633875/picture?type=large", "display_name": "Ajay Aneja", "link": "https://stackoverflow.com/users/4945377/ajay-aneja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432920044, "creation_date": 1432739861, "last_edit_date": 1432920044, "question_id": 30486603, "link": "https://stackoverflow.com/questions/30486603/i-am-getting-a-limit-of-1-comment-while-finding-the-comment-using-post-id-in-rai", "title": "i am getting a limit of 1 comment while finding the comment using post_id in rails console", "body": "<p>I am able to retrieve just one comment while there are multiple comments for a post using <code>Comment.find_by_post_id(2)</code> command in rails. I am a newbie to rails and currently following a course on coursera.org. I am using ubuntu14.10</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 1, "creation_date": 1432743048, "post_id": 30486535, "comment_id": 49053914, "body": "What exactly do you mean by &quot;I am only dealing with integers&quot;? Are you saying that <code>MedicalInterventionCategory.find_by_category_text</code> returns an integer?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1432743183, "post_id": 30486756, "comment_id": 49054003, "body": "How does this handle dupes?"}], "tags": [], "owner": {"reputation": 1473, "user_id": 3173665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4f32eea9b60872a87bf1a04847ce267?s=128&d=identicon&r=PG&f=1", "display_name": "bhanu", "link": "https://stackoverflow.com/users/3173665/bhanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1432745811, "last_edit_date": 1432745811, "creation_date": 1432740317, "answer_id": 30486756, "question_id": 30486535, "link": "https://stackoverflow.com/questions/30486535/call-the-same-function-on-a-list-and-return-a-list-with-no-duplicates/30486756#30486756", "title": "Call the same function on a list and return a list with no duplicates?", "body": "<p>I think this would work</p>\n\n<pre><code>    category_list = []\n    categories.each do |category|\n      category_list &lt;&lt; MedicalInterventionCategory.find_by_category_text(category.category.text).distinct\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 1, "last_activity_date": 1432742542, "last_edit_date": 1432742542, "creation_date": 1432742160, "answer_id": 30487495, "question_id": 30486535, "link": "https://stackoverflow.com/questions/30486535/call-the-same-function-on-a-list-and-return-a-list-with-no-duplicates/30487495#30487495", "title": "Call the same function on a list and return a list with no duplicates?", "body": "<pre><code>    @result=Array.new\n   ##assuming that it returns an array\n    medIntCategory = MedicalInterventionCategory.find_by_category_text(category.category.text)\n    ##get the first category obtained\n    @result &lt;&lt; medIntCategory \n    if medIntCategory.present?\n      medIntCategory.each do |m|\n         ##add in same array only if not present\n         if !@result.include?(m)\n             @result &lt;&lt; m.find_by_category_text(c.category.text)\n         end\n      end\n    ##return a unique value array\n    @result.flatten.compact.uniq unless @result.blank?\n    end\n</code></pre>\n\n<p><strong>HOPE IT HELPS</strong></p>\n"}, {"tags": [], "owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "is_accepted": true, "score": 1, "last_activity_date": 1432742994, "creation_date": 1432742994, "answer_id": 30487796, "question_id": 30486535, "link": "https://stackoverflow.com/questions/30486535/call-the-same-function-on-a-list-and-return-a-list-with-no-duplicates/30487796#30487796", "title": "Call the same function on a list and return a list with no duplicates?", "body": "<p>This sounds like a job for <a href=\"http://ruby-doc.org/core/Array.html#method-i-map\" rel=\"nofollow\"><code>Array#map</code></a> and <a href=\"http://ruby-doc.org/core/Array.html#method-i-uniq\" rel=\"nofollow\"><code>Array#uniq</code></a>:</p>\n\n<pre><code>category_list = categories.map{|category|\n  MedicalInterventionCategory.find_by_category_text(category.category.text)\n}.uniq\n</code></pre>\n"}], "owner": {"reputation": 47363, "user_id": 146780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ea519fede5177604945a5c430e6e19?s=128&d=identicon&r=PG", "display_name": "jmasterx", "link": "https://stackoverflow.com/users/146780/jmasterx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 30487796, "answer_count": 3, "score": 0, "last_activity_date": 1432745811, "creation_date": 1432739693, "question_id": 30486535, "link": "https://stackoverflow.com/questions/30486535/call-the-same-function-on-a-list-and-return-a-list-with-no-duplicates", "title": "Call the same function on a list and return a list with no duplicates?", "body": "<p>I have this function:</p>\n\n<pre><code>medIntCategory = MedicalInterventionCategory.find_by_category_text(category.category.text)\n</code></pre>\n\n<p>However now I have a list of categories called categories.</p>\n\n<p>I would like to execute the above code for each category and get back a list of medIntCategories, but with no duplicates.</p>\n\n<p>Is there a simple way to do this since I am only dealing with integers?</p>\n\n<p>in simple terms:</p>\n\n<pre><code>categoryList = []\nfor each category in categories do\ncategoryList += MedicalInterventionCategory.find_by_category_text(category.category.text)\nend\n</code></pre>\n\n<p>But with duplicate checking</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 39151, "user_id": 2291321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24a41cddd8faf69e3fbd0a778ba6fedf?s=128&d=identicon&r=PG&f=1", "display_name": "ydaetskcoR", "link": "https://stackoverflow.com/users/2291321/ydaetskcor"}, "edited": false, "score": 0, "creation_date": 1432743290, "post_id": 30486509, "comment_id": 49054067, "body": "Can you show what happens when you run <code>eb init</code>?"}, {"owner": {"reputation": 499, "user_id": 2974739, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/aa0b69edfbd9f807b1d66c9afa3e8b9b?s=128&d=identicon&r=PG&f=1", "display_name": "user2974739", "link": "https://stackoverflow.com/users/2974739/user2974739"}, "reply_to_user": {"reputation": 39151, "user_id": 2291321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24a41cddd8faf69e3fbd0a778ba6fedf?s=128&d=identicon&r=PG&f=1", "display_name": "ydaetskcoR", "link": "https://stackoverflow.com/users/2291321/ydaetskcor"}, "edited": false, "score": 0, "creation_date": 1432744512, "post_id": 30486509, "comment_id": 49054854, "body": "When I ran eb init the first time it asked for app name, region, etc.  When I run it now it doesn&#39;t ask for it.  I assume it&#39;s stored in a config file, so it just looks there.  However, it didn&#39;t ask for my account information as to what IAM user to use.  It defaulted to my other project, so it ended up creating and deploying an application to the wrong AWS account."}, {"owner": {"reputation": 39151, "user_id": 2291321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24a41cddd8faf69e3fbd0a778ba6fedf?s=128&d=identicon&r=PG&f=1", "display_name": "ydaetskcoR", "link": "https://stackoverflow.com/users/2291321/ydaetskcor"}, "edited": false, "score": 0, "creation_date": 1432746155, "post_id": 30486509, "comment_id": 49055880, "body": "Can you try running <code>printenv | grep &quot;AWS_CREDENTIAL_FILE&quot;</code> from Terminal?"}, {"owner": {"reputation": 499, "user_id": 2974739, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/aa0b69edfbd9f807b1d66c9afa3e8b9b?s=128&d=identicon&r=PG&f=1", "display_name": "user2974739", "link": "https://stackoverflow.com/users/2974739/user2974739"}, "reply_to_user": {"reputation": 39151, "user_id": 2291321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24a41cddd8faf69e3fbd0a778ba6fedf?s=128&d=identicon&r=PG&f=1", "display_name": "ydaetskcoR", "link": "https://stackoverflow.com/users/2291321/ydaetskcor"}, "edited": false, "score": 0, "creation_date": 1432757336, "post_id": 30486509, "comment_id": 49062253, "body": "$ printenv | grep &quot;AWS_CREDENTIAL_FILE&quot;  Nothing came up."}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 2974739, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/aa0b69edfbd9f807b1d66c9afa3e8b9b?s=128&d=identicon&r=PG&f=1", "display_name": "user2974739", "link": "https://stackoverflow.com/users/2974739/user2974739"}, "edited": false, "score": 0, "creation_date": 1432764764, "post_id": 30493519, "comment_id": 49065698, "body": "Thank you.  This is what I was looking for."}], "tags": [], "owner": {"reputation": 2770, "user_id": 4179009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gv61U.jpg?s=128&g=1", "display_name": "greg_diesel", "link": "https://stackoverflow.com/users/4179009/greg-diesel"}, "is_accepted": true, "score": 3, "last_activity_date": 1432762328, "creation_date": 1432762328, "answer_id": 30493519, "question_id": 30486509, "link": "https://stackoverflow.com/questions/30486509/managing-multiple-aws-accounts-using-eb-deploy/30493519#30493519", "title": "Managing Multiple AWS Accounts using EB deploy", "body": "<p>The config data should be stored in <code>~/.aws/config</code></p>\n\n<p>You could maintain two different config files and simple swap them before deploying.  That would be easy if you work on one all day and then another all day, but if you are switching between the two throughout the day that could get confusing.</p>\n\n<p>You could write a simple script to swap them prior to running eb init.</p>\n\n<p>Since you listed Ruby as your language I found this neat write up of exactly what you need.\n<a href=\"http://jtimberman.housepub.org/blog/2013/10/19/managing-multiple-aws-account-credentials/\" rel=\"nofollow\">http://jtimberman.housepub.org/blog/2013/10/19/managing-multiple-aws-account-credentials/</a></p>\n"}, {"comments": [{"owner": {"reputation": 6341, "user_id": 1226020, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/6af606149e832996a335d459cdafb88e?s=128&d=identicon&r=PG", "display_name": "JHH", "link": "https://stackoverflow.com/users/1226020/jhh"}, "edited": false, "score": 0, "creation_date": 1497869376, "post_id": 44148303, "comment_id": 76242537, "body": "I had a look at my configs and I have both an <code>.aws&#47;config</code> and an <code>.aws&#47;credentials</code>. Credentials contains a <code>[default]</code> section, whereas <code>config</code> contains a <code>[profile eb-cli]</code> section. Is the latter a hard-coded profile needed for the EB CLI (or did I create this at some point and forgot about giving it that name)? Anyway, this page <a href=\"http://docs.aws.amazon.com/cli/latest/userguide/cli-multiple-profiles.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/cli/latest/userguide/&hellip;</a> is relevant to also be able to use other non-EB AWS CLI:s."}], "tags": [], "owner": {"reputation": 1055, "user_id": 1296700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636908e649ef99b883d488e37636b809?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1296700/aaron"}, "is_accepted": false, "score": 2, "last_activity_date": 1495595491, "creation_date": 1495595491, "answer_id": 44148303, "question_id": 30486509, "link": "https://stackoverflow.com/questions/30486509/managing-multiple-aws-accounts-using-eb-deploy/44148303#44148303", "title": "Managing Multiple AWS Accounts using EB deploy", "body": "<p>The proper way to do this is with \"named profiles\". Let's say for example that you have a work/default AWS account and also a personal AWS account.</p>\n\n<p>Edit <code>~/.aws/credentials</code> to look like this:</p>\n\n<pre><code>[default]\naws_access_key_id = abcd1234KEY1\naws_secret_access_key = abcd1234SECRET1\n\n[personal]\naws_access_key_id = efghij6789KEY2\naws_secret_access_key = efghij6789SECRET2    \n</code></pre>\n\n<p>Then use <code>eb init --profile personal</code> to use your personal account.</p>\n\n<p>AWS docs here:\n<a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-configuration.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-configuration.html</a></p>\n"}], "owner": {"reputation": 499, "user_id": 2974739, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/aa0b69edfbd9f807b1d66c9afa3e8b9b?s=128&d=identicon&r=PG&f=1", "display_name": "user2974739", "link": "https://stackoverflow.com/users/2974739/user2974739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 30493519, "answer_count": 2, "score": 1, "last_activity_date": 1495595491, "creation_date": 1432739642, "last_edit_date": 1432743344, "question_id": 30486509, "link": "https://stackoverflow.com/questions/30486509/managing-multiple-aws-accounts-using-eb-deploy", "title": "Managing Multiple AWS Accounts using EB deploy", "body": "<p>I am working on two different projects for two different companies. Each of them gave me access to their AWS management console to deploy Ruby applications. I'm writing the code on my Mac OS/X.</p>\n\n<p>I can't see where to change the configuration for the eb commands to point to the different accounts. I did <code>eb init</code>, but it seems to point to the same AWS account and creates the application and server instance on that account. Can someone please help or guide me to instructions when using two different AWS accounts for two different projects and trying to deploy using the eb command?</p>\n"}, {"tags": ["ruby", "file-io", "binary"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1432739331, "post_id": 30485840, "comment_id": 49051205, "body": "At the very least you need to read the bytes from the file (check the file you&#39;ve just created - it will only be a few bytes long)"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1432748651, "post_id": 30485840, "comment_id": 49057311, "body": "<code>function</code> that word is vague, at least in the context of Ruby. What is a function in <code>Ruby</code> and how do you create one? That&#39;s a good question to ask yourself, though it may not be interesting enough for to ask or you already know the answer, but yet the human mistake is there, you wanted to say <code>method</code> instead of <code>function</code>."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4945029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHAow.jpg?s=128&g=1", "display_name": "Hspazio", "link": "https://stackoverflow.com/users/4945029/hspazio"}, "edited": false, "score": 0, "creation_date": 1432802726, "post_id": 30487103, "comment_id": 49078966, "body": "Thank you very much @tadman! that worked nicely! Realized about the <code>puts</code> mistake instead of <code>write</code>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1432741196, "creation_date": 1432741196, "answer_id": 30487103, "question_id": 30485840, "link": "https://stackoverflow.com/questions/30485840/xor-binary-file-in-ruby/30487103#30487103", "title": "XOR binary file in Ruby", "body": "<p>Calling <code>to_i</code> on a file handle returns the low-level identifier for it, a singular number, nothing more.</p>\n\n<p>If you want to operate on the bytes themselves:</p>\n\n<pre><code>File.open(input_file, 'rb') do |f|\n  File.open(output_file, 'wb') do |o|\n    o.write(\n      f.read.bytes.collect do |byte|\n        byte ^ xor_value\n      end.pack(\"C*\")\n    )\n  end\nend\n</code></pre>\n\n<p>The key here is to apply the XOR operation on each of the bytes in the file, then write out that result. Using <code>puts</code> is a mistake since it appends a linefeed.</p>\n"}], "owner": {"reputation": 63, "user_id": 4945029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHAow.jpg?s=128&g=1", "display_name": "Hspazio", "link": "https://stackoverflow.com/users/4945029/hspazio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 30487103, "answer_count": 1, "score": 1, "last_activity_date": 1432741196, "creation_date": 1432737882, "last_edit_date": 1432739385, "question_id": 30485840, "link": "https://stackoverflow.com/questions/30485840/xor-binary-file-in-ruby", "title": "XOR binary file in Ruby", "body": "<p>I'm trying to create a \"xor\" function in Ruby that takes in input a binary file and an hex value and generates a xored binary file in output.</p>\n\n<pre><code>File.open(\"myfile.exe.xor\",'w') do |f_xor|\n  f_xor.puts File.open(\"myfile.exe\", 'rb').to_i ^ 0xFF\nend\n</code></pre>\n\n<p>This code seems not to return the correct xored file as the expected MD5 is different. \nI've been using a XOR command line tool for Linux so far but I want to switch to an OS-agnostic version to also deploy the code on Windows.</p>\n\n<p>Could you help me understand what's wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "limits"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3605748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/KapiZ.jpg?s=128&g=1", "display_name": "ThreeWest", "link": "https://stackoverflow.com/users/3605748/threewest"}, "edited": false, "score": 0, "creation_date": 1432823820, "post_id": 30486507, "comment_id": 49094797, "body": "Thank you for your quick reply gdpelican. I&#39;m hoping for a solution that won&#39;t cause performance issues in the future so I&#39;ll avoid self.X.count unless there are no other options."}, {"owner": {"reputation": 1546, "user_id": 1376201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbb3062bb6626fd79d1b118d34829342?s=128&d=identicon&r=PG", "display_name": "toobulkeh", "link": "https://stackoverflow.com/users/1376201/toobulkeh"}, "edited": false, "score": 0, "creation_date": 1435532576, "post_id": 30486507, "comment_id": 50226377, "body": "if you&#39;re worried about performance behind count, you can always use counter-caches - <a href=\"http://railscasts.com/episodes/23-counter-cache-column\" rel=\"nofollow noreferrer\">railscasts.com/episodes/23-counter-cache-column</a>"}], "tags": [], "owner": {"reputation": 568, "user_id": 969421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e26b8671e7473dc24eb7c76f39e4456d?s=128&d=identicon&r=PG", "display_name": "gdpelican", "link": "https://stackoverflow.com/users/969421/gdpelican"}, "is_accepted": true, "score": 2, "last_activity_date": 1432739635, "creation_date": 1432739635, "answer_id": 30486507, "question_id": 30485612, "link": "https://stackoverflow.com/questions/30485612/how-to-set-activerecord-limits-by-subscription-plan-type-in-rails-4-2-app/30486507#30486507", "title": "How To Set ActiveRecord Limits by Subscription Plan Type in Rails 4.2 App?", "body": "<p>I'd break this down into bite-sized methods / chunks of logic, then build the functionality you want based on that. Something along the lines of:</p>\n\n<pre><code>INDIVIDUAL_USER_LIMIT = 5\nINDIVIDUAL_PLAN_LIMIT = 5\n\ndef individual_plan?\n  self.plan.type == :individual # or some such logic.\nend\n\ndef over_user_limit?\n  self.individual_plan? &amp;&amp; self.users.count &gt; INDIVIDUAL_USER_LIMIT\nend\n\ndef over_plan_limit?\n  self.individual_plan? &amp;&amp; self.plans.count &gt; INDIVIDUAL_PLANS_LIMIT\nend\n</code></pre>\n\n<p>Probably also worth your time to take a good look at implementing a <a href=\"http://guides.rubyonrails.org/active_record_validations.html#custom-validators\" rel=\"nofollow\">custom validator</a>, which would look something like</p>\n\n<pre><code>class UserLimitValidator &lt; ActiveModel::Validator\n  def validate(account)\n    if account.over_user_limit?\n      account.errors[:users] &lt;&lt; 'Too many users for your plan!'\n    end\n  end\nend\n</code></pre>\n\n<p>And allow you to validate that the models you are saving have the intended restraints on them.</p>\n\n<p>As a thing to be aware of while implementing this, be wary of calling <code>self.plans.count</code> or <code>self.users.count</code>, as it makes an additional database query and can cause some nasty performance issues at scale, such as the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow\">N+1 query problem</a>.</p>\n"}], "owner": {"reputation": 33, "user_id": 3605748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/KapiZ.jpg?s=128&g=1", "display_name": "ThreeWest", "link": "https://stackoverflow.com/users/3605748/threewest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 1, "accepted_answer_id": 30486507, "answer_count": 1, "score": 3, "last_activity_date": 1432740581, "creation_date": 1432737234, "last_edit_date": 1495540101, "question_id": 30485612, "link": "https://stackoverflow.com/questions/30485612/how-to-set-activerecord-limits-by-subscription-plan-type-in-rails-4-2-app", "title": "How To Set ActiveRecord Limits by Subscription Plan Type in Rails 4.2 App?", "body": "<p>I have a multi-tenant Rails 4.2 app using Devise for Authentication. I have setup subscription plans as follows: Individual{Monthly &amp; Yearly}, Business{Monthly &amp; Yearly}. The Individual plan has a limit of 5 users and 5 plans. The Business plan has unlimited users and plans. </p>\n\n<p>I have been trying to setup a way to stop users on the Individual plans from being able to create new Plan and User records when they have reached their limit. </p>\n\n<p>I have tried this: <a href=\"https://stackoverflow.com/questions/18923125/in-rails-how-to-limit-users-post-count-saved-in-database-before-asking-to-upgrad\">in rails how to limit users post count saved in database before asking to upgrade their account</a></p>\n\n<p>My code looked like this in the \"plan\" model:</p>\n\n<pre><code>before_save :check_plan_quota\nprivate\n\ndef check_plan_quota\nif self.account.plans.count &gt;= 5\n  @quota_warning = \"Plan limit reached.\"\n  return false\n end\nend\n</code></pre>\n\n<p>And I had this in my \"dashboard\" controller (because this is where the plans are created and listed):</p>\n\n<pre><code>before_filter :check_quota\n  private\n\n def check_quota\n  if Plan.count &gt;= 5\n    @quota_warning = \"Plan limit reached.\"\n  end\nend\n</code></pre>\n\n<p>I was able to get it to work where the user could not add any more records once they reached 5 plans and also made it so the \"add plan\" button went away based on the @quota_warning. </p>\n\n<pre><code>          &lt;p&gt;\n      &lt;% if @quota_warning.present? %&gt;\n       &lt;button type=\"button\" class=\"btn btn-default\"&gt; You have &lt;%= Plan.count %&gt; Plans &lt;/button&gt; &amp;nbsp;&amp;nbsp; - &amp;nbsp;&amp;nbsp; &lt;button type=\"button\" class=\"btn btn-secondary\"&gt; &lt;%= @quota_warning %&gt;&lt;/button&gt; \n       &lt;% else %&gt;\n        &lt;a href=\"/plans/new\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#styledModal\"&gt;New Plan&lt;/a&gt; &amp;nbsp;&amp;nbsp; - &amp;nbsp;&amp;nbsp; &lt;button type=\"button\" class=\"btn btn-default\"&gt; You have &lt;%= Plan.count %&gt; Plans &lt;/button&gt;\n        &lt;% end %&gt; \n      &lt;/p&gt;\n</code></pre>\n\n<p>BUT This restricted all users to only 5 plans and try as I may I was not able to get an \"if\" statement working that would only apply this limit to users of the individual monthly or yearly plans.</p>\n\n<p>Then I tried this on the \"user\" controller.</p>\n\n<pre><code>before_filter :check_user_limit, :only =&gt; :create\n\ndef check_user_limit\n  redirect_to new_user_url if current_account.reached_user_limit?\nend\n</code></pre>\n\n<p>And in the \"account\" model I put.</p>\n\n<pre><code>class Account &lt; ActiveRecord::Base\n\nhas_many :users, dependent: :destroy, :inverse_of =&gt; :account\naccepts_nested_attributes_for :users\n\nhas_one :admin, -&gt; { where(admin: true) }, :class_name =&gt; \"User\"\naccepts_nested_attributes_for :admin\n\n:user_limit =&gt; Proc.new {|a| a.users.count }\n\nhas_many :plans, dependent: :destroy, :inverse_of =&gt; :account\naccepts_nested_attributes_for :plans\n\n:plan_limit =&gt; Proc.new {|a| a.plans.count }\n</code></pre>\n\n<p>The user_limit and plan_limit fields were added to the account column in the database so each account should have these limits set on signup.  As you can imagine one can't use the above code like that but being new to rails, I don't know how to use it better or even if it's the best route. </p>\n\n<p>The first way I tried seemed simple but I couldn't get it work with something like</p>\n\n<pre><code>if account.user.plan.stripe_id = 'monthly' or 'yearly and Plan.count &gt;= 5\n@quota_warning = \"Limit reached\"\nend\n</code></pre>\n\n<p>My app structure is like so:</p>\n\n<ul>\n<li>Account - owns all the features and the user.</li>\n<li>User - belongs to the account and owns the subscription via User.plan but the features don't belong to user. I don't want the features tied to the user via belongs_to.</li>\n</ul>\n\n<p>The only limit I need to focus on is for individual accounts since the pro accounts have no limits.</p>\n\n<p>It seems like using the user_limit and plan_limit code in the model and the simple check on create in the controller is a little better than the other but I can't get it to work. I'm not sure if I like having the db fields for that either. I understand what the Proc.new code is doing but not what I can apply it to. I tried applying it to the end of has_one :admin but got the following error:</p>\n\n<pre><code>Unknown key: :user_limit. Valid keys are: :class_name, :class, :foreign_key, :validate, :autosave, :dependent, :primary_key, :inverse_of, :required, :as, :foreign_type\n</code></pre>\n\n<p>I'm not sure if this is enough info to help me but if I need to add more info, please let me know.</p>\n"}, {"tags": ["ruby", "parsing", "markdown", "parslet"], "answers": [{"comments": [{"owner": {"reputation": 1139, "user_id": 1575202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7rScQ.png?s=128&g=1", "display_name": "Joel Hamme", "link": "https://stackoverflow.com/users/1575202/joel-hamme"}, "edited": false, "score": 2, "creation_date": 1432889092, "post_id": 30494428, "comment_id": 49123683, "body": "Thank you for your gem and thank you for your answer! Just for documentation, the fix: <code>rule :line do   str(&#39;a&#39;).repeat(1,3) &gt;&gt; newline end; \u2026 rule :blank_line do   str(&quot;\\n&quot;) | chunk.absent? end</code> It&#39;s so simple when you know how to do it."}, {"owner": {"reputation": 1139, "user_id": 1575202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7rScQ.png?s=128&g=1", "display_name": "Joel Hamme", "link": "https://stackoverflow.com/users/1575202/joel-hamme"}, "edited": false, "score": 1, "creation_date": 1432889474, "post_id": 30494428, "comment_id": 49123986, "body": "Also, <code>parslet&#47;convenience</code> is to be recommended: <code>require &#39;parslet&#47;convenience&#39;; \u2026 expect{subject.parse_with_debug &quot;a&quot;}.not_to raise_error</code>"}], "tags": [], "owner": {"reputation": 19268, "user_id": 23963, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d9a5280831aec1b4b614eb1e5bf40baf?s=128&d=identicon&r=PG", "display_name": "Nigel Thorne", "link": "https://stackoverflow.com/users/23963/nigel-thorne"}, "is_accepted": true, "score": 3, "last_activity_date": 1432855559, "last_edit_date": 1495542606, "creation_date": 1432766981, "answer_id": 30494428, "question_id": 30485292, "link": "https://stackoverflow.com/questions/30485292/parse-markdown-indented-code-block/30494428#30494428", "title": "Parse markdown indented code block", "body": "<p>In this case newline can be eof.  In which case newline. repeat(2)  repeatedly matches eof.  You want \"repeat(2,2)\".  You can made these bugs easy to find :)...  Just use my fork. </p>\n\n<p>You can detect how it's looping by using <a href=\"https://github.com/NigelThorne/parslet\" rel=\"nofollow noreferrer\">my fork of parslet</a>. \nIt catches loops and tells you what's happening.\nIt's slower than the usual parslet, so switch back for production parsing.</p>\n\n<p>Use this Gemfile:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem \"parslet\" , :git =&gt; \"https://github.com/NigelThorne/parslet.git\"\ngem 'rspec'\n</code></pre>\n\n<p>And you get these results:</p>\n\n<pre><code> 9:23:40.20 &gt; bundle exec rspec parser.rb\nFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n\nFailures:\n\n  1) RecurringGroupParser should parse a\n     Failure/Error: is_expected.to parse \"a\"\n     RuntimeError:\n       Grammar contains an infinite loop applying 'NEWLINE{2, }' at char position 1\n       ...a&lt;-- here\n     # ./parser.rb:33:in `block (2 levels) in &lt;top (required)&gt;'\n\n  2) RecurringGroupParser should parse aa\n     Failure/Error: is_expected.to parse \"a\\na\"\n     RuntimeError:\n       Grammar contains an infinite loop applying 'NEWLINE{2, }' at char position 3\n       ...a\n       a&lt;-- here\n     # ./parser.rb:37:in `block (2 levels) in &lt;top (required)&gt;'\n\n  3) RecurringGroupParser should parse aaa\n     Failure/Error: is_expected.to parse \"a\\na\\na\"\n     RuntimeError:\n       Grammar contains an infinite loop applying 'NEWLINE{2, }' at char position 5\n       ...a\n       a\n       a&lt;-- here\n     # ./parser.rb:41:in `block (2 levels) in &lt;top (required)&gt;'\n\n  4) RecurringGroupParser should parse a a\n     Failure/Error: is_expected.to parse \"a\\n\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\"\n     # ./parser.rb:45:in `block (2 levels) in &lt;top (required)&gt;'\n\n  5) RecurringGroupParser should parse aa a\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\"\n     # ./parser.rb:49:in `block (2 levels) in &lt;top (required)&gt;'\n\n  6) RecurringGroupParser should parse aaa a\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\"\n     # ./parser.rb:53:in `block (2 levels) in &lt;top (required)&gt;'\n\n  7) RecurringGroupParser should parse a aa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\na\"\n     # ./parser.rb:57:in `block (2 levels) in &lt;top (required)&gt;'\n\n  8) RecurringGroupParser should parse a aaa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\na\\na\"\n     # ./parser.rb:61:in `block (2 levels) in &lt;top (required)&gt;'\n\n  9) RecurringGroupParser should parse aa a\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\"\n     # ./parser.rb:65:in `block (2 levels) in &lt;top (required)&gt;'\n\n  10) RecurringGroupParser should parse aa aa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\na\"\n     # ./parser.rb:69:in `block (2 levels) in &lt;top (required)&gt;'\n\n  11) RecurringGroupParser should parse aa aaa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\na\\na\"\n     # ./parser.rb:73:in `block (2 levels) in &lt;top (required)&gt;'\n\n  12) RecurringGroupParser should parse aaa aa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\na\"\n     # ./parser.rb:77:in `block (2 levels) in &lt;top (required)&gt;'\n\n  13) RecurringGroupParser should parse aaa aaa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\na\\na\"\n     # ./parser.rb:81:in `block (2 levels) in &lt;top (required)&gt;'\n\n  14) RecurringGroupParser should parse a a a\n     Failure/Error: is_expected.to parse \"a\\n\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\n\\na\"\n     # ./parser.rb:85:in `block (2 levels) in &lt;top (required)&gt;'\n\n  15) RecurringGroupParser should parse aa a a\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\n\\na\"\n     # ./parser.rb:89:in `block (2 levels) in &lt;top (required)&gt;'\n\n  16) RecurringGroupParser should parse aaa a a\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\n\\na\"\n     # ./parser.rb:93:in `block (2 levels) in &lt;top (required)&gt;'\n\n  17) RecurringGroupParser should parse a aa a\n     Failure/Error: is_expected.to parse \"a\\n\\na\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\na\\n\\na\"\n     # ./parser.rb:97:in `block (2 levels) in &lt;top (required)&gt;'\n\n  18) RecurringGroupParser should parse aa aa a\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\na\\n\\na\"\n     # ./parser.rb:101:in `block (2 levels) in &lt;top (required)&gt;'\n\n  19) RecurringGroupParser should parse aaa aa a\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\na\\n\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\na\\n\\na\"\n     # ./parser.rb:105:in `block (2 levels) in &lt;top (required)&gt;'\n\n  20) RecurringGroupParser should parse a aaa a\n     Failure/Error: is_expected.to parse \"a\\n\\na\\naa\\n\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\naa\\n\\na\"\n     # ./parser.rb:109:in `block (2 levels) in &lt;top (required)&gt;'\n\n  21) RecurringGroupParser should parse aa aaa a\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\naa\\n\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\naa\\n\\na\"\n     # ./parser.rb:113:in `block (2 levels) in &lt;top (required)&gt;'\n\n  22) RecurringGroupParser should parse aaa aaa a\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\naa\\n\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\naa\\n\\na\"\n     # ./parser.rb:117:in `block (2 levels) in &lt;top (required)&gt;'\n\n  23) RecurringGroupParser should parse a a aa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\n\\na\\na\"\n     # ./parser.rb:121:in `block (2 levels) in &lt;top (required)&gt;'\n\n  24) RecurringGroupParser should parse aa a aa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\n\\na\\na\"\n     # ./parser.rb:125:in `block (2 levels) in &lt;top (required)&gt;'\n\n  25) RecurringGroupParser should parse aaa a aa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\n\\na\\na\"\n     # ./parser.rb:129:in `block (2 levels) in &lt;top (required)&gt;'\n\n  26) RecurringGroupParser should parse a aa aa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\na\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\na\\n\\na\\na\"\n     # ./parser.rb:133:in `block (2 levels) in &lt;top (required)&gt;'\n\n  27) RecurringGroupParser should parse aa aa aa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\na\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\na\\n\\na\\na\"\n     # ./parser.rb:137:in `block (2 levels) in &lt;top (required)&gt;'\n\n  28) RecurringGroupParser should parse aaa aa aa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\na\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\na\\n\\na\\na\"\n     # ./parser.rb:141:in `block (2 levels) in &lt;top (required)&gt;'\n\n  29) RecurringGroupParser should parse a aaa aa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\naa\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\naa\\n\\na\\na\"\n     # ./parser.rb:145:in `block (2 levels) in &lt;top (required)&gt;'\n\n  30) RecurringGroupParser should parse aa aaa aa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\naa\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\naa\\n\\na\\na\"\n     # ./parser.rb:149:in `block (2 levels) in &lt;top (required)&gt;'\n\n  31) RecurringGroupParser should parse aaa aaa aa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\naa\\n\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\naa\\n\\na\\na\"\n     # ./parser.rb:153:in `block (2 levels) in &lt;top (required)&gt;'\n\n  32) RecurringGroupParser should parse a a aaa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\n\\na\\na\\na\"\n     # ./parser.rb:157:in `block (2 levels) in &lt;top (required)&gt;'\n\n  33) RecurringGroupParser should parse aa a aaa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\n\\na\\na\\na\"\n     # ./parser.rb:161:in `block (2 levels) in &lt;top (required)&gt;'\n\n  34) RecurringGroupParser should parse aaa a aaa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\n\\na\\na\\na\"\n     # ./parser.rb:165:in `block (2 levels) in &lt;top (required)&gt;'\n\n  35) RecurringGroupParser should parse a aa aaa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\na\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\na\\n\\na\\na\\na\"\n     # ./parser.rb:169:in `block (2 levels) in &lt;top (required)&gt;'\n\n  36) RecurringGroupParser should parse aa aa aaa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\na\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\na\\n\\na\\na\\na\"\n     # ./parser.rb:173:in `block (2 levels) in &lt;top (required)&gt;'\n\n  37) RecurringGroupParser should parse aaa aa aaa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\na\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\na\\n\\na\\na\\na\"\n     # ./parser.rb:177:in `block (2 levels) in &lt;top (required)&gt;'\n\n  38) RecurringGroupParser should parse a aaa aaa\n     Failure/Error: is_expected.to parse \"a\\n\\na\\naa\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\n\\na\\naa\\n\\na\\na\\na\"\n     # ./parser.rb:181:in `block (2 levels) in &lt;top (required)&gt;'\n\n  39) RecurringGroupParser should parse aa aaa aaa\n     Failure/Error: is_expected.to parse \"a\\na\\n\\na\\naa\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\na\\n\\na\\naa\\n\\na\\na\\na\"\n     # ./parser.rb:185:in `block (2 levels) in &lt;top (required)&gt;'\n\n  40) RecurringGroupParser should parse aaa aaa aaa\n     Failure/Error: is_expected.to parse \"a\\naa\\n\\na\\naa\\n\\na\\na\\na\"\n       expected BLOCK to be able to parse \"a\\naa\\n\\na\\naa\\n\\na\\na\\na\"\n     # ./parser.rb:189:in `block (2 levels) in &lt;top (required)&gt;'\n\nFinished in 0.01702 seconds (files took 0.26725 seconds to load)\n40 examples, 40 failures    \n</code></pre>\n\n<p>see <a href=\"https://stackoverflow.com/questions/16504958/indentation-sensitive-parser-using-parslet-in-ruby\">this question</a> on parsing indentation with Parslet. </p>\n"}], "owner": {"reputation": 1139, "user_id": 1575202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7rScQ.png?s=128&g=1", "display_name": "Joel Hamme", "link": "https://stackoverflow.com/users/1575202/joel-hamme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 30494428, "answer_count": 1, "score": 2, "last_activity_date": 1432884606, "creation_date": 1432736504, "last_edit_date": 1432884606, "question_id": 30485292, "link": "https://stackoverflow.com/questions/30485292/parse-markdown-indented-code-block", "title": "Parse markdown indented code block", "body": "<p>I am trying to parse Markdown using a grammar written with Parslet. However, I cannot get past indented code blocks because everything I tried so far got stuck in recursion. They look like this:</p>\n\n<pre><code>    This is a indented code block.\n    Second line.\n\n    Code block continues after blank line.\n\n    There can be any number of chunks, \n    separated by not more than one blank line.\n</code></pre>\n\n<p>In order to solve this I wrote a minimal example wich replaces the lines (including <code>\\n</code>) with <code>a</code> and blank lines (<code>\\n\\n</code>) with spaces, eg: <code>a aaa aa</code>.</p>\n\n<pre><code># recurring_group_parser.rb\n\nrequire 'parslet'\nrequire 'rspec'\nrequire 'parslet/rig/rspec'\n\nclass RecurringGroupParser &lt; Parslet::Parser\n  root(:block)\n\n  rule :block do\n    chunk.repeat(1,3)\n  end\n\n  rule :chunk do\n    str('a').repeat(1,3) &gt;&gt; space\n  end\n\n  rule :space do\n    str(' ') | chunk.absent?\n  end\nend\n\ndescribe RecurringGroupParser do\n  it 'should parse a' do\n    is_expected.to parse \"a\"\n  end\n\n  it 'should parse aa' do\n    is_expected.to parse \"aa\"\n  end\n\n  it 'should parse aaa' do\n    is_expected.to parse \"aaa\"\n  end\n\n  it 'should parse a a' do\n    is_expected.to parse \"a a\"\n  end\n\n  it 'should parse aa a' do\n    is_expected.to parse \"aa a\"\n  end\n\n  it 'should parse aaa a' do\n    is_expected.to parse \"aaa a\"\n  end\n\n  it 'should parse a aa' do\n    is_expected.to parse \"a aa\"\n  end\n\n  it 'should parse a aaa' do\n    is_expected.to parse \"a aaa\"\n  end\n\n  it 'should parse aa a' do\n    is_expected.to parse \"aa a\"\n  end\n\n  it 'should parse aa aa' do\n    is_expected.to parse \"aa aa\"\n  end\n\n  it 'should parse aa aaa' do\n    is_expected.to parse \"aa aaa\"\n  end\n\n  it 'should parse aaa aa' do\n    is_expected.to parse \"aaa aa\"\n  end\n\n  it 'should parse aaa aaa' do\n    is_expected.to parse \"aaa aaa\"\n  end\n\n  it 'should parse a a a' do\n    is_expected.to parse \"a a a\"\n  end\n\n  it 'should parse aa a a' do\n    is_expected.to parse \"aa a a\"\n  end\n\n  it 'should parse aaa a a' do\n    is_expected.to parse \"aaa a a\"\n  end\n\n  it 'should parse a aa a' do\n    is_expected.to parse \"a aa a\"\n  end\n\n  it 'should parse aa aa a' do\n    is_expected.to parse \"aa aa a\"\n  end\n\n  it 'should parse aaa aa a' do\n    is_expected.to parse \"aaa aa a\"\n  end\n\n  it 'should parse a aaa a' do\n    is_expected.to parse \"a aaa a\"\n  end\n\n  it 'should parse aa aaa a' do\n    is_expected.to parse \"aa aaa a\"\n  end\n\n  it 'should parse aaa aaa a' do\n    is_expected.to parse \"aaa aaa a\"\n  end\n\n  it 'should parse a a aa' do\n    is_expected.to parse \"a a aa\"\n  end\n\n  it 'should parse aa a aa' do\n    is_expected.to parse \"aa a aa\"\n  end\n\n  it 'should parse aaa a aa' do\n    is_expected.to parse \"aaa a aa\"\n  end\n\n  it 'should parse a aa aa' do\n    is_expected.to parse \"a aa aa\"\n  end\n\n  it 'should parse aa aa aa' do\n    is_expected.to parse \"aa aa aa\"\n  end\n\n  it 'should parse aaa aa aa' do\n    is_expected.to parse \"aaa aa aa\"\n  end\n\n  it 'should parse a aaa aa' do\n    is_expected.to parse \"a aaa aa\"\n  end\n\n  it 'should parse aa aaa aa' do\n    is_expected.to parse \"aa aaa aa\"\n  end\n\n  it 'should parse aaa aaa aa' do\n    is_expected.to parse \"aaa aaa aa\"\n  end\n\n  it 'should parse a a aaa' do\n    is_expected.to parse \"a a aaa\"\n  end\n\n  it 'should parse aa a aaa' do\n    is_expected.to parse \"aa a aaa\"\n  end\n\n  it 'should parse aaa a aaa' do\n    is_expected.to parse \"aaa a aaa\"\n  end\n\n  it 'should parse a aa aaa' do\n    is_expected.to parse \"a aa aaa\"\n  end\n\n  it 'should parse aa aa aaa' do\n    is_expected.to parse \"aa aa aaa\"\n  end\n\n  it 'should parse aaa aa aaa' do\n    is_expected.to parse \"aaa aa aaa\"\n  end\n\n  it 'should parse a aaa aaa' do\n    is_expected.to parse \"a aaa aaa\"\n  end\n\n  it 'should parse aa aaa aaa' do\n    is_expected.to parse \"aa aaa aaa\"\n  end\n\n  it 'should parse aaa aaa aaa' do\n    is_expected.to parse \"aaa aaa aaa\"\n  end\nend\n</code></pre>\n\n<p>Running <code>rspec recurring_group_parser.rb</code> works fine. Only when I put the newlines back in, it stalls:</p>\n\n<pre><code># recurring_group_parser.rb\n\nrequire 'parslet'\nrequire 'rspec'\nrequire 'parslet/rig/rspec'\n\nclass RecurringGroupParser &lt; Parslet::Parser\n  root(:block)\n\n  rule :block do\n    chunk.repeat(1,3)\n  end\n\n  rule :chunk do\n    line.repeat(1,3) &gt;&gt; blank_line\n  end\n\n  rule :line do\n    str('a') &gt;&gt; newline\n  end\n\n  rule :blank_line do\n    newline.repeat(2) | chunk.absent?\n  end\n\n  rule :newline do\n    str(\"\\n\") | any.absent?\n  end\nend\n\ndescribe RecurringGroupParser do\n  it 'should parse a' do\n    is_expected.to parse \"a\"\n  end\n\n  it 'should parse aa' do\n    is_expected.to parse \"a\\na\"\n  end\n\n  it 'should parse aaa' do\n    is_expected.to parse \"a\\na\\na\"\n  end\n\n  it 'should parse a a' do\n    is_expected.to parse \"a\\n\\na\"\n  end\n\n  it 'should parse aa a' do\n    is_expected.to parse \"a\\na\\n\\na\"\n  end\n\n  it 'should parse aaa a' do\n    is_expected.to parse \"a\\naa\\n\\na\"\n  end\n\n  it 'should parse a aa' do\n    is_expected.to parse \"a\\n\\na\\na\"\n  end\n\n  it 'should parse a aaa' do\n    is_expected.to parse \"a\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aa a' do\n    is_expected.to parse \"a\\na\\n\\na\"\n  end\n\n  it 'should parse aa aa' do\n    is_expected.to parse \"a\\na\\n\\na\\na\"\n  end\n\n  it 'should parse aa aaa' do\n    is_expected.to parse \"a\\na\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aaa aa' do\n    is_expected.to parse \"a\\naa\\n\\na\\na\"\n  end\n\n  it 'should parse aaa aaa' do\n    is_expected.to parse \"a\\naa\\n\\na\\na\\na\"\n  end\n\n  it 'should parse a a a' do\n    is_expected.to parse \"a\\n\\na\\n\\na\"\n  end\n\n  it 'should parse aa a a' do\n    is_expected.to parse \"a\\na\\n\\na\\n\\na\"\n  end\n\n  it 'should parse aaa a a' do\n    is_expected.to parse \"a\\naa\\n\\na\\n\\na\"\n  end\n\n  it 'should parse a aa a' do\n    is_expected.to parse \"a\\n\\na\\na\\n\\na\"\n  end\n\n  it 'should parse aa aa a' do\n    is_expected.to parse \"a\\na\\n\\na\\na\\n\\na\"\n  end\n\n  it 'should parse aaa aa a' do\n    is_expected.to parse \"a\\naa\\n\\na\\na\\n\\na\"\n  end\n\n  it 'should parse a aaa a' do\n    is_expected.to parse \"a\\n\\na\\naa\\n\\na\"\n  end\n\n  it 'should parse aa aaa a' do\n    is_expected.to parse \"a\\na\\n\\na\\naa\\n\\na\"\n  end\n\n  it 'should parse aaa aaa a' do\n    is_expected.to parse \"a\\naa\\n\\na\\naa\\n\\na\"\n  end\n\n  it 'should parse a a aa' do\n    is_expected.to parse \"a\\n\\na\\n\\na\\na\"\n  end\n\n  it 'should parse aa a aa' do\n    is_expected.to parse \"a\\na\\n\\na\\n\\na\\na\"\n  end\n\n  it 'should parse aaa a aa' do\n    is_expected.to parse \"a\\naa\\n\\na\\n\\na\\na\"\n  end\n\n  it 'should parse a aa aa' do\n    is_expected.to parse \"a\\n\\na\\na\\n\\na\\na\"\n  end\n\n  it 'should parse aa aa aa' do\n    is_expected.to parse \"a\\na\\n\\na\\na\\n\\na\\na\"\n  end\n\n  it 'should parse aaa aa aa' do\n    is_expected.to parse \"a\\naa\\n\\na\\na\\n\\na\\na\"\n  end\n\n  it 'should parse a aaa aa' do\n    is_expected.to parse \"a\\n\\na\\naa\\n\\na\\na\"\n  end\n\n  it 'should parse aa aaa aa' do\n    is_expected.to parse \"a\\na\\n\\na\\naa\\n\\na\\na\"\n  end\n\n  it 'should parse aaa aaa aa' do\n    is_expected.to parse \"a\\naa\\n\\na\\naa\\n\\na\\na\"\n  end\n\n  it 'should parse a a aaa' do\n    is_expected.to parse \"a\\n\\na\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aa a aaa' do\n    is_expected.to parse \"a\\na\\n\\na\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aaa a aaa' do\n    is_expected.to parse \"a\\naa\\n\\na\\n\\na\\na\\na\"\n  end\n\n  it 'should parse a aa aaa' do\n    is_expected.to parse \"a\\n\\na\\na\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aa aa aaa' do\n    is_expected.to parse \"a\\na\\n\\na\\na\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aaa aa aaa' do\n    is_expected.to parse \"a\\naa\\n\\na\\na\\n\\na\\na\\na\"\n  end\n\n  it 'should parse a aaa aaa' do\n    is_expected.to parse \"a\\n\\na\\naa\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aa aaa aaa' do\n    is_expected.to parse \"a\\na\\n\\na\\naa\\n\\na\\na\\na\"\n  end\n\n  it 'should parse aaa aaa aaa' do\n    is_expected.to parse \"a\\naa\\n\\na\\naa\\n\\na\\na\\na\"\n  end\nend\n</code></pre>\n\n<p>To simplify this, lines can only consist of a single <code>a</code> and are not indented but that can easily be changed later and are not related to the failure to finish parsing. I am also pretty sure that there is a collision between <code>chunk.absent?</code> in <code>rule :blank_line</code> and <code>any.absent?</code> in <code>rule :newline</code> but I have no idea how to fix this and provide criteria to break the recursion. Any help wanted!</p>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1432736645, "post_id": 30485280, "comment_id": 49049039, "body": "same. Its just optional to add <code>do</code>"}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 3553454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98f8f8e3a23a3eb0af0e05ef21d36108?s=128&d=identicon&r=PG", "display_name": "qedk", "link": "https://stackoverflow.com/users/3553454/qedk"}, "edited": false, "score": 0, "creation_date": 1432736649, "post_id": 30485333, "comment_id": 49049045, "body": "Do-while and while loops are different. One is exit-controlled, the other is entry-controlled."}, {"owner": {"reputation": 4772, "user_id": 1217989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9d5b9a79ef0f88807303db67594b5d06?s=128&d=identicon&r=PG", "display_name": "Luan Nico", "link": "https://stackoverflow.com/users/1217989/luan-nico"}, "reply_to_user": {"reputation": 353, "user_id": 3553454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98f8f8e3a23a3eb0af0e05ef21d36108?s=128&d=identicon&r=PG", "display_name": "qedk", "link": "https://stackoverflow.com/users/3553454/qedk"}, "edited": false, "score": 1, "creation_date": 1432741118, "post_id": 30485333, "comment_id": 49052590, "body": "@therewillbecoffee I meant <code>while [condition] do [exp] end</code>. Surely <code>do [exp] while [condition]</code> works differently. Will make it clear, though :)"}], "tags": [], "owner": {"reputation": 4772, "user_id": 1217989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9d5b9a79ef0f88807303db67594b5d06?s=128&d=identicon&r=PG", "display_name": "Luan Nico", "link": "https://stackoverflow.com/users/1217989/luan-nico"}, "is_accepted": false, "score": 0, "last_activity_date": 1432741190, "last_edit_date": 1432741190, "creation_date": 1432736600, "answer_id": 30485333, "question_id": 30485280, "link": "https://stackoverflow.com/questions/30485280/whats-the-difference-between-until-and-until-do-loops-in-ruby/30485333#30485333", "title": "What&#39;s the difference between `until` and `until do` loops in Ruby?", "body": "<p>There is absolutely no difference. It is like the <code>while [condition] [block] end</code> vs <code>while [condition] do [block] end</code> or <code>if [condition] [block] end</code> vs <code>if [condition] then [block] end</code>.</p>\n\n<p>In Ruby, often there are tons of ways of doing the same thing - the important is to be consistent, either way.</p>\n"}, {"tags": [], "owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1432736609, "creation_date": 1432736609, "answer_id": 30485337, "question_id": 30485280, "link": "https://stackoverflow.com/questions/30485280/whats-the-difference-between-until-and-until-do-loops-in-ruby/30485337#30485337", "title": "What&#39;s the difference between `until` and `until do` loops in Ruby?", "body": "<p>There is no difference between <code>until</code> and <code>until do</code>. <code>Do</code> is optional and both will show same output. If want to get some more idea about this <a href=\"http://www.techotopia.com/index.php/Ruby_While_and_Until_Loops\" rel=\"nofollow\">while and while do</a> </p>\n"}, {"comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1432738010, "post_id": 30485381, "comment_id": 49050218, "body": "The only thing not mentioned in this answer is that we (Rubyists) mostly use iterators, that look like <code>something.each do ... end</code>, so using <code>do</code> here makes the loop look much like another iterator."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 2, "last_activity_date": 1432736701, "creation_date": 1432736701, "answer_id": 30485381, "question_id": 30485280, "link": "https://stackoverflow.com/questions/30485280/whats-the-difference-between-until-and-until-do-loops-in-ruby/30485381#30485381", "title": "What&#39;s the difference between `until` and `until do` loops in Ruby?", "body": "<p><code>do</code> is optional. It indicates the beginning of the block of code to be repeatedly executed.</p>\n\n<p>In your example it makes no difference. However if you try re-writing the code in one line, you can see why its needed:</p>\n\n<pre><code>c = 5\nuntil c == 0 do print c; c -= 1 end\n# 54321 =&gt; nil\n</code></pre>\n\n<p>Now try this without <code>do</code>:</p>\n\n<pre><code>c = 5\nuntil c == 0 print c; c -= 1 end\n# SyntaxError: (irb):115: syntax error, unexpected tIDENTIFIER, expecting keyword_do_cond or ';' or '\\n'\n</code></pre>\n\n<p>As you can see there is no clear beginning for block, Ruby will throw a <code>SyntaxError</code>.</p>\n"}], "owner": {"reputation": 353, "user_id": 3553454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98f8f8e3a23a3eb0af0e05ef21d36108?s=128&d=identicon&r=PG", "display_name": "qedk", "link": "https://stackoverflow.com/users/3553454/qedk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 30485381, "answer_count": 3, "score": 2, "last_activity_date": 1432741190, "creation_date": 1432736467, "question_id": 30485280, "link": "https://stackoverflow.com/questions/30485280/whats-the-difference-between-until-and-until-do-loops-in-ruby", "title": "What&#39;s the difference between `until` and `until do` loops in Ruby?", "body": "<pre><code>c = 5\nuntil c == 0 do\n  print c\n  c -= 1\nend\n</code></pre>\n\n<p>/break</p>\n\n<pre><code>c = 5\nuntil c == 0 \n  print c\n  c -= 1\nend\n</code></pre>\n\n<p>What's the difference?\nBoth of them display <code>54321</code> as output.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara", "sorcery"], "answers": [{"tags": [], "owner": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "is_accepted": false, "score": 0, "last_activity_date": 1432898677, "creation_date": 1432898677, "answer_id": 30528365, "question_id": 30485229, "link": "https://stackoverflow.com/questions/30485229/capybara-sorcery-helpers/30528365#30528365", "title": "Capybara + Sorcery helpers", "body": "<p>I finally fixed it. The problem was that I included Capybara in my env.rb so my ActiveRecord class were inheriting Capybara methods and find_by_id method for finding elements in a webpage was run instead of ActiveRecord find_by_id.</p>\n\n<p>After deleting \"include Capybara\" line everything works fine.</p>\n"}], "owner": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432898677, "creation_date": 1432736347, "question_id": 30485229, "link": "https://stackoverflow.com/questions/30485229/capybara-sorcery-helpers", "title": "Capybara + Sorcery helpers", "body": "<p>I'm currently working on a project using Sorcery to authenticate users and I have some integration tests done with capybara. When I call <strong>current_user</strong> or <strong>logged_in?</strong> sorcery helpers I get this error:</p>\n\n<pre><code>ArgumentError Exception: wrong number of arguments calling `page` (0 for 1)\n</code></pre>\n\n<p>but when I call them in development mode, it doesn't happen.</p>\n\n<p>After some research I found out that the problem comes from find_by_id method. So if I call <strong>Model.find_by_id(1)</strong>, I get this error. I am very confused because I cannot understand why page method is called and where.</p>\n\n<p>I fixed it by overriding the find_by_id method of my model, but I completely disagree doing this way, so...</p>\n\n<p>Does anybody know what's going on?</p>\n\n<p>Thank you in advance guys</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "time", "updates"], "answers": [{"tags": [], "owner": {"reputation": 1150, "user_id": 2476257, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4897f73627f361b897c3b8fa368ab58f?s=128&d=identicon&r=PG&f=1", "display_name": "borisano", "link": "https://stackoverflow.com/users/2476257/borisano"}, "is_accepted": false, "score": 0, "last_activity_date": 1432735998, "creation_date": 1432735998, "answer_id": 30485091, "question_id": 30484960, "link": "https://stackoverflow.com/questions/30484960/ruby-initialize-a-variable-to-current-time/30485091#30485091", "title": "Ruby Initialize a Variable to Current Time", "body": "<p>It seems like you are looking for <a href=\"http://api.rubyonrails.org/classes/DateTime.html#method-c-current\" rel=\"nofollow\">DateTime#current</a></p>\n\n<pre><code>lastPopulation = DateTime.current\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 4231819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c7de07ac922c7f8e5ef1edd4ab22b?s=128&d=identicon&r=PG&f=1", "display_name": "user107680", "link": "https://stackoverflow.com/users/4231819/user107680"}, "edited": false, "score": 0, "creation_date": 1432736634, "post_id": 30485231, "comment_id": 49049024, "body": "What exactly is <code>after_filter</code>?"}, {"owner": {"reputation": 883, "user_id": 2310942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6875f4d0ffcadb39ce63ba805a79d6e?s=128&d=identicon&r=PG", "display_name": "Triveni Badgujar", "link": "https://stackoverflow.com/users/2310942/triveni-badgujar"}, "reply_to_user": {"reputation": 71, "user_id": 4231819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c7de07ac922c7f8e5ef1edd4ab22b?s=128&d=identicon&r=PG&f=1", "display_name": "user107680", "link": "https://stackoverflow.com/users/4231819/user107680"}, "edited": false, "score": 0, "creation_date": 1432736768, "post_id": 30485231, "comment_id": 49049164, "body": "This is filter which will be called after populateTable method is executed."}], "tags": [], "owner": {"reputation": 883, "user_id": 2310942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6875f4d0ffcadb39ce63ba805a79d6e?s=128&d=identicon&r=PG", "display_name": "Triveni Badgujar", "link": "https://stackoverflow.com/users/2310942/triveni-badgujar"}, "is_accepted": true, "score": 2, "last_activity_date": 1432736352, "creation_date": 1432736352, "answer_id": 30485231, "question_id": 30484960, "link": "https://stackoverflow.com/questions/30484960/ruby-initialize-a-variable-to-current-time/30485231#30485231", "title": "Ruby Initialize a Variable to Current Time", "body": "<p>You can write after_filter to set the lastPopulation, Like</p>\n\n<pre><code>after_filter :set_last_polulated, :only =&gt; ['populateTable']\n\ndef set_last_polulated\n@lastPolulation = DateTime.now\nend\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4231819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c7de07ac922c7f8e5ef1edd4ab22b?s=128&d=identicon&r=PG&f=1", "display_name": "user107680", "link": "https://stackoverflow.com/users/4231819/user107680"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 30485231, "answer_count": 2, "score": 0, "last_activity_date": 1432736352, "creation_date": 1432735713, "question_id": 30484960, "link": "https://stackoverflow.com/questions/30484960/ruby-initialize-a-variable-to-current-time", "title": "Ruby Initialize a Variable to Current Time", "body": "<p>I have a Rails 3 Application that needs to use the current time. Every time an admin uses a function <code>populateTable</code>, the <code>lastPopulation</code> variable needs to update to the current time. Two questions:</p>\n\n<p>1) How can I initially set the <code>lastPopulation</code> variable to the current time right now?</p>\n\n<p>2) Is there an assignment similar to <code>@lastUpdate = Time.now</code> for whenever the <code>populateTable</code> method is called?</p>\n\n<p>All help is appreciated. Thanks!!!</p>\n"}, {"tags": ["ruby", "gem", "bundler", "rdoc"], "comments": [{"owner": {"reputation": 228, "user_id": 4028429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569d0e956240f70577b3c4378664f558?s=128&d=identicon&r=PG&f=1", "display_name": "Balaji Ravichandran", "link": "https://stackoverflow.com/users/4028429/balaji-ravichandran"}, "edited": false, "score": 0, "creation_date": 1488371144, "post_id": 30484605, "comment_id": 72198978, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1381725/how-to-make-no-ri-no-rdoc-the-default-for-gem-install\">How to make --no-ri --no-rdoc the default for gem install?</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2908819"}, "is_accepted": false, "score": 0, "last_activity_date": 1433007360, "creation_date": 1433007360, "answer_id": 30549288, "question_id": 30484605, "link": "https://stackoverflow.com/questions/30484605/bundle-install-fails-with-rdoc-internal-server-error/30549288#30549288", "title": "bundle install fails with rdoc Internal Server Error", "body": "<p>Try reinstalling <code>rdoc</code>. Maybe there was a problem with the rubygems server when you last tried.</p>\n"}], "owner": {"reputation": 7165, "user_id": 120480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f1519b17a158c7f2e51ad3e0be29f076?s=128&d=identicon&r=PG", "display_name": "RoelF", "link": "https://stackoverflow.com/users/120480/roelf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488371042, "creation_date": 1432734833, "question_id": 30484605, "link": "https://stackoverflow.com/questions/30484605/bundle-install-fails-with-rdoc-internal-server-error", "title": "bundle install fails with rdoc Internal Server Error", "body": "<p>while trying to install a Ruby application with Bundler, the dependent rdoc gem fails with an <code>Internal Server Error</code>:</p>\n\n<pre><code>user@machine:/home/user/someapp# bundle\nFetching gem metadata from http://rubygems.org/...........\nFetching gem metadata from http://rubygems.org/..\nUsing rake (10.0.3)\nUsing i18n (0.6.1)\nUsing multi_json (1.6.1)\nUsing activesupport (3.2.12)\nUsing builder (3.0.4)\nUsing activemodel (3.2.12)\nUsing erubis (2.7.0)\nUsing journey (1.0.4)\nUsing rack (1.4.5)\nUsing rack-cache (1.2)\nUsing rack-test (0.6.2)\nUsing hike (1.2.1)\nUsing tilt (1.3.3)\nUsing sprockets (2.2.2)\nUsing actionpack (3.2.12)\nUsing mime-types (1.21)\nUsing polyglot (0.3.3)\nUsing treetop (1.4.12)\nUsing mail (2.4.4)\nUsing actionmailer (3.2.12)\nUsing arel (3.0.2)\nUsing tzinfo (0.3.35)\nUsing activerecord (3.2.12)\nUsing activeresource (3.2.12)\nUsing addressable (2.3.3)\nUsing bcrypt-ruby (3.0.1)\nUsing coderay (1.0.9)\nUsing better_errors (0.7.0)\nUsing debug_inspector (0.0.2)\nUsing binding_of_caller (0.7.1)\nUsing cancan (1.6.9)\nUsing nokogiri (1.5.6)\nUsing ffi (1.4.0)\nUsing childprocess (0.3.8)\nUsing rubyzip (0.9.9)\nUsing websocket (1.0.7)\nUsing selenium-webdriver (2.30.0)\nUsing xpath (1.0.0)\nUsing capybara (2.0.2)\nUsing coffee-script-source (1.4.0)\nUsing execjs (1.4.0)\nUsing coffee-script (2.2.0)\nUsing rack-ssl (1.3.3)\nUsing json (1.7.7)\n\nGem::RemoteFetcher::FetchError: bad response Internal Server Error 500 (http://aws-eu-cache01.rubygems.org/gems/rdoc-3.12.1.gem)\nAn error occured while installing rdoc (3.12.1), and Bundler cannot continue.\nMake sure that `gem install rdoc -v '3.12.1'` succeeds before bundling.\n</code></pre>\n\n<p>What I have tried:  </p>\n\n<ul>\n<li>gem install rdoc -v '3.12.1': <code>ERROR:  While executing gem ... Gem::RemoteFetcher::FetchError) bad response Internal Server Error 500 (http://aws-eu-cache01.rubygems.org/gems/rdoc-3.12.1.gem)</code></li>\n<li>adding <code>gem: --no-document</code> to the <code>/etc/gemrc</code> file</li>\n<li>adding <code>gem: --no-rdoc --no-ri</code> to the <code>/etc/gemrc</code> file</li>\n</ul>\n\n<p>How can I get rdoc to install, or how do I get the application to install without rdoc?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "rails-geocoder"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1432736776, "creation_date": 1432736776, "answer_id": 30485412, "question_id": 30484531, "link": "https://stackoverflow.com/questions/30484531/using-ruby-geocoder-for-retrieving-nearby-users-and-return-distance/30485412#30485412", "title": "Using Ruby Geocoder for retrieving nearby users and return distance", "body": "<blockquote>\n  <p>When you run a location-aware query the returned objects have two\n  attributes added to them:</p>\n  \n  <ul>\n  <li>obj.distance - number of miles from the search point to this object</li>\n  <li>obj.bearing - direction from the search point to this object\n  <a href=\"http://www.rubydoc.info/gems/rails-geocoder/0.9.11/frames#Distance_and_Bearing\" rel=\"nofollow\">http://www.rubydoc.info/gems/rails-geocoder/0.9.11/frames#Distance_and_Bearing</a></li>\n  </ul>\n</blockquote>\n\n<pre><code>User.near(@me, 10, units: :km).each do |user|\n  puts \"#{user.name} is #{user.distance} clicks to the #{user.bearing}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 2654815, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/XbA87.jpg?s=128&g=1", "display_name": "Vasco", "link": "https://stackoverflow.com/users/2654815/vasco"}, "edited": false, "score": 0, "creation_date": 1432820874, "post_id": 30486303, "comment_id": 49092348, "body": "Thank you @Valerie, it all makes sense now!"}], "tags": [], "owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "is_accepted": false, "score": 1, "last_activity_date": 1432739508, "last_edit_date": 1432739508, "creation_date": 1432739046, "answer_id": 30486303, "question_id": 30484531, "link": "https://stackoverflow.com/questions/30484531/using-ruby-geocoder-for-retrieving-nearby-users-and-return-distance/30486303#30486303", "title": "Using Ruby Geocoder for retrieving nearby users and return distance", "body": "<p>I'm using this embedded Ruby version of the logic, which is similar logically to the answer given by @maxcal above. I'm including it because the trace below relates to this code.</p>\n\n\n\n<pre><code>&lt;% for location in @location.nearbys(20) %&gt;\n  &lt;li&gt; &lt;span class=\"badge\"&gt;&lt;%= location.distance.round(2) %&gt; miles&lt;/span&gt; from here you'll find &lt;strong&gt;\n  &lt;%= link_to location.name, location %&gt; &lt;/strong&gt; at &lt;%= location.full_address %&gt;.&lt;/li&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>But, I think the answer is that Geocoder is creating a temp data store for the set of conforming records. <em>.distance</em> is the key variable.</p>\n\n<p>If I look at the trace, it shows the initial database hits, but no subsequent hits for each item in the loop. One could look at the Geocoder code and confirm, but the trace seems to be conclusive.</p>\n\n\n\n<pre><code>  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM \"reviews\" WHERE \"reviews\".\"user_id\" = $1[0m  [[\"user_id\", 8]]\n  Rendered shared/_user_posted_badge.html.erb (15.6ms)\n// Comment Geocoding starts here\n  Rendered locations/_map_show.html.erb (0.0ms)\n  [1m[35mLocation Load (0.0ms)[0m  SELECT locations.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((30.267153 - locations.latitude) * PI() / 180 / 2), 2) + COS(30.267153 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-97.7430608 - locations.longitude) * PI() / 180 / 2), 2))) AS distance, MOD(CAST((ATAN2( ((locations.longitude - -97.7430608) / 57.2957795), ((locations.latitude - 30.267153) / 57.2957795)) * 57.2957795) + 360 AS decimal), 360) AS bearing FROM \"locations\" WHERE (locations.latitude BETWEEN 29.977689433778306 AND 30.556616566221695 AND locations.longitude BETWEEN -98.07821040202988 AND -97.40791119797011 AND (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((30.267153 - locations.latitude) * PI() / 180 / 2), 2) + COS(30.267153 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((-97.7430608 - locations.longitude) * PI() / 180 / 2), 2)))) BETWEEN 0.0 AND 20 AND locations.id != 65)  ORDER BY distance ASC\n// Geocoding section complete\n  [1m[36mPhotograph Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM \"photographs\" WHERE \"photographs\".\"location_id\" = $1 LIMIT 1[0m  [[\"location_id\", 65]]\n  [1m[35mPhotograph Load (0.0ms)[0m  SELECT \"photographs\".* FROM \"photographs\" WHERE \"photographs\".\"location_id\" = $1  ORDER BY \"photographs\".\"created_at\" DESC  [[\"location_id\", 65]]\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 2654815, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/XbA87.jpg?s=128&g=1", "display_name": "Vasco", "link": "https://stackoverflow.com/users/2654815/vasco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 1, "accepted_answer_id": 30485412, "answer_count": 2, "score": 2, "last_activity_date": 1432739508, "creation_date": 1432734685, "question_id": 30484531, "link": "https://stackoverflow.com/questions/30484531/using-ruby-geocoder-for-retrieving-nearby-users-and-return-distance", "title": "Using Ruby Geocoder for retrieving nearby users and return distance", "body": "<p>Is it possible to use Geocoder for retrieving, say, nearby users within a certain radius, and make it return the result of the distance calculation without having to repeat for display?</p>\n\n<p>For example, say we use this (in a Rails application):</p>\n\n<pre><code>User.near(@me, 10, units: :km)\n</code></pre>\n\n<p>It will return an <code>ActiveRecord::Relation</code> with all the users that are within 10 kilometres of user <code>@me</code>. </p>\n\n<p>If I now want to display a list with all the returned users and their distance to <code>@me</code>, do I need to actually recompute the distances one by one using <code>distance_to</code>, or is there are a way to make <code>Geocoder</code> return the computed distances in an added model attribute (for example)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "pkcs#7"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1432739463, "post_id": 30484162, "comment_id": 49051316, "body": "Improve your question by editing it, rather than adding stuff in the comments - comments are ephemeral and don&#39;t handle code well"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1432847421, "post_id": 30484162, "comment_id": 49109318, "body": "I believe the internal OpenSSL function is <code>PKCS7_bio_add_digest</code>. Its located in <code>&lt;openssl src&gt;&#47;crypto&#47;pkcs7&#47;pk7_doit.c</code>."}], "owner": {"reputation": 21, "user_id": 1428665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df5ff109bc546aeb6b7e07a24c5a654?s=128&d=identicon&r=PG", "display_name": "herenk", "link": "https://stackoverflow.com/users/1428665/herenk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 552, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1432846757, "creation_date": 1432733836, "last_edit_date": 1432846757, "question_id": 30484162, "link": "https://stackoverflow.com/questions/30484162/how-to-use-sha256-during-signing-with-opensslpkcs7-sign", "title": "How to use SHA256 during signing with OpenSSL::PKCS7.sign?", "body": "<p>I need to use sha256 instead of the default sha1. How to override the same?</p>\n\n<pre><code>pkcs7 = OpenSSL::PKCS7.sign certificate, private_key, content \nsigned = OpenSSL::PKCS7.write_smime pkcs7, content\npkcs7 = OpenSSL::PKCS7.encrypt receiver_certificate, signed, OpenSSL::Cipher::Cipher::new(\"des-ede3-cbc\")\nencrypted_data = OpenSSL::PKCS7.write_smime pkcs7\n</code></pre>\n\n<p>This the code that I have tried, I have 2 things to be done. Need to override the signing algorithm and also the encryption algorithm. In the code I have mentioned <code>OpenSSL::Cipher::Cipher::new(\"des-ede3-cbc\")</code>, but that I not working, the encryption happening is aes-256-cbc.</p>\n"}, {"tags": ["ruby", "if-statement", "selenium", "rspec", "selenium-webdriver"], "comments": [{"owner": {"reputation": 184, "user_id": 3170623, "user_type": "registered", "profile_image": "https://graph.facebook.com/703956801/picture?type=large", "display_name": "Andreas Waldahl", "link": "https://stackoverflow.com/users/3170623/andreas-waldahl"}, "edited": false, "score": 0, "creation_date": 1432731682, "post_id": 30482854, "comment_id": 49045025, "body": "Create a function named displayed. Check if element is displayed. If exception is thrown, catch it and return false."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1432734484, "post_id": 30482854, "comment_id": 49047279, "body": "There is example: <a href=\"http://elementalselenium.com/tips/44-exception-handling\" rel=\"nofollow noreferrer\">elementalselenium.com/tips/44-exception-handling</a>"}, {"owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1432735123, "post_id": 30482854, "comment_id": 49047827, "body": "In fact, I do not want to use rescue because it gives error &quot;Selenium WebDriver :: :: Error :: NoSuchElementError&quot;, will run the rescue method &quot;Remove and add new expense&quot;. Understand me?"}, {"owner": {"reputation": 1167, "user_id": 387529, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/520bb4ce077d7e08437a7225c894e680?s=128&d=identicon&r=PG", "display_name": "ArashM", "link": "https://stackoverflow.com/users/387529/arashm"}, "edited": false, "score": 0, "creation_date": 1433194560, "post_id": 30482854, "comment_id": 49237211, "body": "What you&#39;re doing is totally wrong. Each test should ONLY test one thing at a time. Write one test for testing when the button appears and write another for the other case. You shouldn&#39;t really use an IF statement at all, if you have to, it&#39;s a code smell and you&#39;re doing it wrong."}, {"owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "reply_to_user": {"reputation": 1167, "user_id": 387529, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/520bb4ce077d7e08437a7225c894e680?s=128&d=identicon&r=PG", "display_name": "ArashM", "link": "https://stackoverflow.com/users/387529/arashm"}, "edited": false, "score": 0, "creation_date": 1433196018, "post_id": 30482854, "comment_id": 49237763, "body": "@Arash M - You have an example?"}], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1433192230, "post_id": 30549668, "comment_id": 49236050, "body": "But How I can user IF and ELSE? With this your solution, and if not found the element?"}, {"owner": {"reputation": 369, "user_id": 893329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0279e2488a72d7cac1310a19c57056?s=128&d=identicon&r=PG", "display_name": "ajahongir", "link": "https://stackoverflow.com/users/893329/ajahongir"}, "reply_to_user": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1433272461, "post_id": 30549668, "comment_id": 49277435, "body": "@Rafael am I right, you are not waiting while element appears. you just want to check element existings? may be this will work:  if driver.find_elements(:css, &quot;.btn.btn-lg.btn-success.btn-block&quot;).present? ... else ... end"}, {"owner": {"reputation": 369, "user_id": 893329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0279e2488a72d7cac1310a19c57056?s=128&d=identicon&r=PG", "display_name": "ajahongir", "link": "https://stackoverflow.com/users/893329/ajahongir"}, "reply_to_user": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1433272561, "post_id": 30549668, "comment_id": 49277484, "body": "find_element will return nil if element doesnt exists and you cant call methos - displayed?. you have to use find_elements instead."}], "tags": [], "owner": {"reputation": 369, "user_id": 893329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0279e2488a72d7cac1310a19c57056?s=128&d=identicon&r=PG", "display_name": "ajahongir", "link": "https://stackoverflow.com/users/893329/ajahongir"}, "is_accepted": false, "score": 1, "last_activity_date": 1433009664, "creation_date": 1433009664, "answer_id": 30549668, "question_id": 30482854, "link": "https://stackoverflow.com/questions/30482854/fail-to-use-statement-if-in-selenium/30549668#30549668", "title": "Fail to use statement IF in Selenium", "body": "<p><a href=\"https://code.google.com/p/selenium/wiki/RubyBindings\" rel=\"nofollow\">https://code.google.com/p/selenium/wiki/RubyBindings</a>\nUse the Wait class to explicitly wait for some condition:</p>\n\n<pre><code>wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 3)\nwait.until { driver.find_element(:css, \".btn.btn-lg.btn-success.btn-block\").displayed? }\n....\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433009664, "creation_date": 1432730684, "question_id": 30482854, "link": "https://stackoverflow.com/questions/30482854/fail-to-use-statement-if-in-selenium", "title": "Fail to use statement IF in Selenium", "body": "<p>Currently I'm trying use a statement IF (If a button appears in the page, then run the IF), see the method <strong>Login in the system</strong>:</p>\n\n<p>If the button doesn't appear in the page, I would like to run the next method <strong>Remove and add new expense</strong></p>\n\n<pre><code>require \"selenium-webdriver\"\nrequire \"rspec\"\nrequire \"rspec/expectations\"\n\ndescribe \"#Add simple expense and after add a receipt\", :suitee =&gt; true do\n\nbefore(:all) do\n  @driver = Selenium::WebDriver.for :chrome\n  @base_url = \"http://sitetest.com\"\n  @driver.manage.window.maximize\nend\n\nit \"Login in the system\" do\n  @driver.get(@base_url)\n  @driver.find_element(:id, \"user_email\").send_keys \"rafael@gmail.com\"\n  @driver.find_element(:id, \"user_password\").send_keys \"123456\"\n  @driver.find_element(:name, \"commit\").click\n    if(@driver.find_element(:css, \".btn.btn-lg.btn-success.btn-block\").displayed?)\n        @driver.find_element(:css, \".btn.btn-lg.btn-success.btn-block\").click\n        @driver.find_element(:css, \".introjs-button.introjs-skipbutton\").click\n        @driver.find_element(:css, \".i.i-pencil\").click\n    end\nend\n\nit \"Remove and add new expense\" do\n  begin \n    while(@driver.find_element(:css, \".i.i-pencil.icon\").displayed?)\n     button = @driver.find_element(:id, \"expense-bulk-select\")\n     @driver.action.click(button).perform \n     delete = @driver.find_element(:id, \"delete-multi-btn\")\n     @driver.action.click(delete).perform\n     waitDisplayModal = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\n     waitDisplayModal.until {@driver.find_element(:class =&gt; \"bootstrap-dialog-footer-buttons\")}\n     @driver.find_element(:xpath, \"//div[3]/div/div/button[2]\").click \n     sleep 3\n  end \nrescue Selenium::WebDriver::Error::NoSuchElementError \n   @driver.find_element(:id, \"current_expense_merchant\").send_keys \"Taxi to work\" \n   @driver.find_element(:id, \"current_expense_amount\").send_keys \"50\"\n   @driver.find_element(:id, \"button-add-expense\").click\n   waitDisplayIconTrash = Selenium::WebDriver::Wait.new(:timeout =&gt; 20)\n   waitDisplayIconTrash.until {@driver.find_element(:css =&gt; \".i.i-pencil.icon\")}\n end\nend\n\n after(:all) do\n  @driver.quit   \n end\nend\n</code></pre>\n\n<p>My problem: When I run this script, appears this in my console:</p>\n\n<pre><code>Failure/Error: if(@driver.find_element(:css, \".btn.btn-lg.btn-success.btn-block\").displayed?)\n Selenium::WebDriver::Error::NoSuchElementError:\n   no such element\n     (Session info: chrome=42.0.2311.135)\n     (Driver info: chromedriver=2.9.248304,platform=Linux 3.13.0-24-generic x86_64)\n</code></pre>\n\n<p>That is, the IF is not working as I would like. How can I fix it?</p>\n\n<p>CHeers</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "mongodb"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1432729863, "post_id": 30482429, "comment_id": 49043590, "body": "Did you check your Rails logs (<i>e.g.</i>, <code>log&#47;development.log</code>)?"}, {"owner": {"reputation": 141, "user_id": 413007, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2df048c36d2777506ca690509f30afa4?s=128&d=identicon&r=PG", "display_name": "harryBundles", "link": "https://stackoverflow.com/users/413007/harrybundles"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1432730244, "post_id": 30482429, "comment_id": 49043869, "body": "Yeah, I tail it while I&#39;m in dev and often refer to it. There are no errors there."}, {"owner": {"reputation": 2805, "user_id": 918365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTr91.jpg?s=128&g=1", "display_name": "Yosep Kim", "link": "https://stackoverflow.com/users/918365/yosep-kim"}, "edited": false, "score": 0, "creation_date": 1432730261, "post_id": 30482429, "comment_id": 49043883, "body": "I have never seen or heard anything like this before in my 4+ years of doing Rails dev. Share with us your OS/Ruby/Rails version info and the development logs. Do you use Webrick for running the app?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1432730343, "post_id": 30482429, "comment_id": 49043948, "body": "In Rails you can run in production, development, or test. If your failing case is one of these and success case is another, then you&#39;ll need to examine what&#39;s different and focus on that. For example, what gems are loaded, etc."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1432730781, "post_id": 30482429, "comment_id": 49044304, "body": "Is this random (or seemingly random)?  That is, can you just refresh a page repeatedly and get different html each time?"}, {"owner": {"reputation": 141, "user_id": 413007, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2df048c36d2777506ca690509f30afa4?s=128&d=identicon&r=PG", "display_name": "harryBundles", "link": "https://stackoverflow.com/users/413007/harrybundles"}, "edited": false, "score": 0, "creation_date": 1432731874, "post_id": 30482429, "comment_id": 49045207, "body": "It is completely random. There are no errors anywhere... like it just times out and says &quot;here&#39;s what you can have, i&#39;m done&quot;. I can click a link, get 20 results, click the same link and get 23 results, then click it again and get all 30. (this is just a random example). the issue is that anything below the HTML that is output doesn&#39;t display or fire (such as any inline scripts)."}, {"owner": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "edited": false, "score": 0, "creation_date": 1432734348, "post_id": 30482429, "comment_id": 49047173, "body": "Can you give an example of an .erb that has this happen? Also the view source on a page that didn&#39;t load properly."}, {"owner": {"reputation": 141, "user_id": 413007, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2df048c36d2777506ca690509f30afa4?s=128&d=identicon&r=PG", "display_name": "harryBundles", "link": "https://stackoverflow.com/users/413007/harrybundles"}, "edited": false, "score": 0, "creation_date": 1432735671, "post_id": 30482429, "comment_id": 49048236, "body": "It happens on several pages, randomly. It&#39;ll cut off sometimes just in the middle of writing and element: <code>&lt;a href=&quot;link_to_something_somewh</code>"}, {"owner": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "edited": false, "score": 0, "creation_date": 1432736821, "post_id": 30482429, "comment_id": 49049204, "body": "Hmm then what lurker suggested is probably the best way to find it, look at your gemfile for things like <code>group :development do</code>, and in <code>config&#47;environments&#47;development.rb</code> compared to <code>config&#47;environments&#47;production.rb</code> and start isolating differences. Other things you can try are looking at the response in your browser (network tab in chrome, select the actual html page). Additionally, add <code>after_filter do    puts response.body    end</code> to your controller, this will show everything that rails sent to the browser."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "edited": false, "score": 0, "creation_date": 1432737411, "post_id": 30482429, "comment_id": 49049732, "body": "Looks to me more like os/memory/network bugs, try to isolate the problem, run it on another machine, look at the system logs, try to write simple test to get a guaranteed failure and disable everything gradually until it will pass... try another rails app and look for similar behavior."}, {"owner": {"reputation": 141, "user_id": 413007, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2df048c36d2777506ca690509f30afa4?s=128&d=identicon&r=PG", "display_name": "harryBundles", "link": "https://stackoverflow.com/users/413007/harrybundles"}, "reply_to_user": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "edited": false, "score": 0, "creation_date": 1432741524, "post_id": 30482429, "comment_id": 49052858, "body": "@Clark: looks like you might be on to something... my gemfile has a :development block and after process of elimination, <code>gem &#39;thin&#39;</code> seems to be causing some sort of issue. (not using it causes other issues, but it&#39;s a great start). if you make it an answer, i&#39;ll accept it as such...."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 413007, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2df048c36d2777506ca690509f30afa4?s=128&d=identicon&r=PG", "display_name": "harryBundles", "link": "https://stackoverflow.com/users/413007/harrybundles"}, "edited": false, "score": 0, "creation_date": 1432815396, "post_id": 30487517, "comment_id": 49088099, "body": "After a process of elimination, the gemfile was using the &#39;thin&#39; gem in dev and this was causing the issues that I was having. Defaulting to Webrick helped fix the loading issue, but we were using Thin to allow longer URIs in queries. The production enviro is using apache, so this issue doesn&#39;t exist there. At least I know where to look now, thanks!"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1615001572, "post_id": 30487517, "comment_id": 117564203, "body": "This isn&#39;t an answer. What was the actual problem? Any idea what &quot;thin&quot; was doing (and consequently why removing it helped)?"}], "tags": [], "owner": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "is_accepted": true, "score": 1, "last_activity_date": 1432742247, "creation_date": 1432742247, "answer_id": 30487517, "question_id": 30482429, "link": "https://stackoverflow.com/questions/30482429/incomplete-page-load-in-ruby-on-rails/30487517#30487517", "title": "Incomplete page load in Ruby On Rails", "body": "<p>As per the comments, and Lurker's suggestion of searching for development specific configurations.</p>\n\n<p><code>group :development do</code> in the gemfile and differences between <code>config/environments/development.rb</code> and <code>config/environments/production.rb</code> are a good start to help isolate problems specific to the development environment.</p>\n"}], "owner": {"reputation": 141, "user_id": 413007, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2df048c36d2777506ca690509f30afa4?s=128&d=identicon&r=PG", "display_name": "harryBundles", "link": "https://stackoverflow.com/users/413007/harrybundles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 30487517, "answer_count": 1, "score": 0, "last_activity_date": 1432742247, "creation_date": 1432729652, "question_id": 30482429, "link": "https://stackoverflow.com/questions/30482429/incomplete-page-load-in-ruby-on-rails", "title": "Incomplete page load in Ruby On Rails", "body": "<p>I'm fairly new to Ruby on Rails so I'm not sure what to search for because I'm just not finding the answers I need to the problem.</p>\n\n<p>I have several pages in a web app and after a few clicks in my development environment, some pages just stop loading data without any errors in the console or firebug. Looking at the HTML generated, it doesn't cut off the code in any consistent fashion... sometimes it'll cut off in the middle of writing an element's properties. It happens in Firefox and Chrome.</p>\n\n<p>I've spent the last 3 or 4 days moving a lot of logic out of the .erb pages and into controllers and helpers and presenters, and triple checking missing HTML tags, missing javascript semi-colons... but still it persists. I haven't encountered this on our test and production sites, but seeing it in the development environment concerns me.</p>\n\n<p>Anyone have any idea where a good place to look would be? </p>\n\n<p>My code is all in an intranet machine, and there is a lot of it, so I'm not sure what kind of code to post. The data that fails to load is coming from a mongoDB and we're putting it lists and tables, and both are victims of the fail.</p>\n"}, {"tags": ["ruby", "delegation"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 1, "creation_date": 1432729420, "post_id": 30482245, "comment_id": 49043269, "body": "Should&#39;nt it be <code>def_delegators ModuleName::Data, :config</code> (as your class is not just self now)"}, {"owner": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1432729592, "post_id": 30482245, "comment_id": 49043400, "body": "@Tensibai yes You&#39;re right, that is what I tried (I copied it wrong)... but it didn&#39;t work. See updated code above"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1432729718, "post_id": 30482245, "comment_id": 49043493, "body": "You cannot delegate <code>:run</code> to <code>ModuleName::Data</code>, because <code>ModuleName::Data.run</code> does not exist. Are you looking to define <code>ModuleName::Data.run</code> or delegate the call to an instance of <code>ModuleName::Data</code>? Usually with delegation, you expect to have something dynamic to delegate to - delegating direct to a singleton method is unusual (since you already have other mechanisms for making that static link in code)"}, {"owner": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1432730344, "post_id": 30482245, "comment_id": 49043951, "body": "@NeilSlater I&#39;m not too sure what you mean, I&#39;m trying to what is done in the first bit of code - i.e. making the instance variable <code>config</code> accessible to the second class..."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1432730431, "post_id": 30482245, "comment_id": 49044014, "body": "OK, I am writing an answer - but in short your instance variable is associated with an instance, but you provide no instance for the delegation to call. It won&#39;t construct one for you by naming the class"}], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 2, "last_activity_date": 1432742496, "last_edit_date": 1432742496, "creation_date": 1432730692, "answer_id": 30482858, "question_id": 30482245, "link": "https://stackoverflow.com/questions/30482245/specify-class-with-forwardable/30482858#30482858", "title": "Specify class with forwardable", "body": "<p>Typically when you delegate between two classes, one object contains an <em>instance</em> of the other. The fact that you call <code>(ModuleName::Data.new).run</code> implies to me that is what you are trying to do, but are somehow missing the fact that you need an instance of the contained class to be stored somewhere in order to receive the call to <code>:config</code> </p>\n\n<p>This variation of your second piece of code is closer to what I would expect to see in a delegation scenario:</p>\n\n<pre><code>require 'forwardable'\nmodule ModuleName\n  #\n  class Data\n    attr_accessor :config\n\n    def initialize\n      @config = {hey: 'hi', jay: 'ji'}\n    end\n\n    def run\n      puts \"1) Config = #{config}\"\n    end\n  end\n\n  #\n  class Start\n    extend Forwardable\n\n    def initialize data_obj = Data.new()\n      @data = data_obj\n    end\n\n    def_delegators :@data, :config\n\n    def run\n      puts \"2) Config = #{config}\"\n    end\n  end\nend\n\n\n(ModuleName::Data.new).run\n(ModuleName::Start.new).run\n</code></pre>\n\n<p>I changed the constructor to <code>ModuleName::Start</code> in order to show a common pattern, not used here. Namely, you often pass in the wrapped object, or even more commonly the params that allow you to construct a new one and assign it to the instance variable that you wish to delegate to.</p>\n\n<p>A minor related change: In your original code, the value of <code>@config</code> was only set via calling <code>:run</code>, so delegating direct to <code>:config</code> won't read the value you expect in the test. It worked in the first version because <code>@config</code> was set in the first call to <code>run</code> on the module, and then read globally as a singleton method on the second delegated call. I have worked around that here by setting it in <code>Data</code>s constructor, but of course anything that sets the value of <code>@config</code> on the instance you are delegating to would work.</p>\n"}], "owner": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 30482858, "answer_count": 1, "score": 1, "last_activity_date": 1432742496, "creation_date": 1432729151, "last_edit_date": 1432729514, "question_id": 30482245, "link": "https://stackoverflow.com/questions/30482245/specify-class-with-forwardable", "title": "Specify class with forwardable", "body": "<p>I'm trying to use ruby's <a href=\"http://ruby-doc.org/stdlib-2.0/libdoc/forwardable/rdoc/Forwardable.html\" rel=\"nofollow\"><code>forwardable</code> module</a> to make some variables in one class accessible to another class. However I am having some trouble doing this.</p>\n\n<p>It seems that I'm able to 'forward' some variables within the <code>self</code> (first bit of code) but I'm unable to forward some variable within a class (second bit of code)</p>\n\n<p>The following works:</p>\n\n<pre><code>require 'forwardable'\nmodule ModuleName\n  #\n  class &lt;&lt; self\n    attr_accessor :config\n    def run\n      @config = {hey: 'hi', jay: 'ji'}\n      puts \"1) Config = #{config}\"\n    end\n  end\n\n  #\n  class Start\n    extend Forwardable\n    def_delegators ModuleName, :config\n    def run\n      puts \"2) Config = #{config}\"\n    end\n  end\nend\n\n\nModuleName.run\n(ModuleName::Start.new).run\n\n#=&gt; 1) Config = {:hey=&gt;\"hi\", :jay=&gt;\"ji\"}\n#=&gt; 2) Config = {:hey=&gt;\"hi\", :jay=&gt;\"ji\"}\n</code></pre>\n\n<p>BUT this doesn't </p>\n\n<pre><code>require 'forwardable'\nmodule ModuleName\n  #\n  class Data\n    attr_accessor :config\n    def run\n      @config = {hey: 'hi', jay: 'ji'}\n      puts \"1) Config = #{config}\"\n    end\n  end\n\n  #\n  class Start\n    extend Forwardable\n    def_delegators ModuleName::Data, :config\n    def run\n      puts \"2) Config = #{config}\"\n    end\n  end\nend\n\n\n(ModuleName::Data.new).run\n(ModuleName::Start.new).run\n\n#=&gt; 1) Config = {:hey=&gt;\"hi\", :jay=&gt;\"ji\"}\n#=&gt; /Users/ismailm/Desktop/ex.rb:17:in `run': undefined method `config' for ModuleName::Data:Class (NoMethodError)\n</code></pre>\n\n<p>Can you help in fixing this part of the code...</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1432728447, "post_id": 30481929, "comment_id": 49042597, "body": "You are having main_controller..right?"}, {"owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "reply_to_user": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1432728488, "post_id": 30481929, "comment_id": 49042626, "body": "yes I surely have that, but dont have methods for it"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432728728, "post_id": 30481929, "comment_id": 49042810, "body": "You can not check for a logic in an HTML file, you must have them as .haml or .erb."}, {"owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "edited": false, "score": 0, "creation_date": 1432728830, "post_id": 30481929, "comment_id": 49042868, "body": "but when i change them to haml or erb it shows &quot;No route matches [GET] &quot;/projects-and-tutorials&quot;"}, {"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "edited": false, "score": 0, "creation_date": 1432729193, "post_id": 30481929, "comment_id": 49043118, "body": "public folder can only contain the files that can be rendered to browser directly without any processing on server."}], "answers": [{"comments": [{"owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "edited": false, "score": 0, "creation_date": 1432728699, "post_id": 30482002, "comment_id": 49042781, "body": "but how can i check if user is logged in or not in html files as i mentioned i have html files in public folder and routes mentioned are showing outputs from these html files"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "edited": false, "score": 0, "creation_date": 1432728807, "post_id": 30482002, "comment_id": 49042854, "body": "you are having contact.html.erb in main folder..right?"}, {"owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "edited": false, "score": 0, "creation_date": 1432729352, "post_id": 30482002, "comment_id": 49043219, "body": "yes i just created it main folder, will try for user conditions in these files"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "edited": false, "score": 1, "creation_date": 1432729444, "post_id": 30482002, "comment_id": 49043287, "body": "so there you can check if user_signed_in? it will return true if user is signed in else false"}], "tags": [], "owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "is_accepted": false, "score": 1, "last_activity_date": 1432728589, "creation_date": 1432728589, "answer_id": 30482002, "question_id": 30481929, "link": "https://stackoverflow.com/questions/30481929/check-whether-user-is-logged-in-or-not-in-public-files/30482002#30482002", "title": "Check whether user is logged in or not in public files", "body": "<p>just add following line to main_controller.</p>\n\n<pre><code>before_filter :authenticate_user!\n</code></pre>\n\n<p>and check in view file is user logged in or not</p>\n"}, {"tags": [], "owner": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "is_accepted": false, "score": 0, "last_activity_date": 1432731999, "creation_date": 1432731999, "answer_id": 30483408, "question_id": 30481929, "link": "https://stackoverflow.com/questions/30481929/check-whether-user-is-logged-in-or-not-in-public-files/30483408#30483408", "title": "Check whether user is logged in or not in public files", "body": "<p>Seeing your route, the final url would be </p>\n\n<ul>\n<li>/main/about</li>\n<li>/main/blog </li>\n</ul>\n\n<p>and so on.</p>\n\n<p>You need to specific methods for those views in the main controller. And in the main controller, you need to do the user validation.</p>\n"}], "owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432731999, "creation_date": 1432728377, "question_id": 30481929, "link": "https://stackoverflow.com/questions/30481929/check-whether-user-is-logged-in-or-not-in-public-files", "title": "Check whether user is logged in or not in public files", "body": "<p>I on my projects i have routes like </p>\n\n<pre><code>resources :main, path: '/' do\n    collection do\n      get 'about'\n      get 'blog'\n      get 'resources'\n      get 'contact'\n      get 'projects-and-tutorials'\n    end\n  end\n</code></pre>\n\n<p>and public files for them like contact.html and about.html</p>\n\n<p>Is it possible to have haml files for public routes ?</p>\n\n<p>also how can check if user is logged in or not in public files </p>\n\n<p>( i think it can be done with haml but not in html files but right now i am having html public files)</p>\n\n<p>System is using Devise gem for authentication </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432728179, "post_id": 30481833, "comment_id": 49042424, "body": "What error does it show when you try to run the newer version of Rails on your system? Could you paste the error log ?"}, {"owner": {"reputation": 3322, "user_id": 3972769, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FlScV.jpg?s=128&g=1", "display_name": "Bendy", "link": "https://stackoverflow.com/users/3972769/bendy"}, "edited": false, "score": 0, "creation_date": 1432728703, "post_id": 30481833, "comment_id": 49042784, "body": "Please update your question to include the error messages you are getting"}, {"owner": {"reputation": 1, "user_id": 4944548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdc66d05073db28fe9dabaf709b705f?s=128&d=identicon&r=PG&f=1", "display_name": "Dhanasekar", "link": "https://stackoverflow.com/users/4944548/dhanasekar"}, "edited": false, "score": 0, "creation_date": 1432729359, "post_id": 30481833, "comment_id": 49043225, "body": "while running rails -v its shows  Could not find kgio-2.9.3 in any of the sources Run <code>bundle install</code> to install missing gems."}, {"owner": {"reputation": 2391, "user_id": 1581358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LpxS1.jpg?s=128&g=1", "display_name": "Karan Purohit", "link": "https://stackoverflow.com/users/1581358/karan-purohit"}, "edited": false, "score": 0, "creation_date": 1432729845, "post_id": 30481833, "comment_id": 49043582, "body": "what does it say, when you run <code>bundle install</code>?"}, {"owner": {"reputation": 1, "user_id": 4944548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdc66d05073db28fe9dabaf709b705f?s=128&d=identicon&r=PG&f=1", "display_name": "Dhanasekar", "link": "https://stackoverflow.com/users/4944548/dhanasekar"}, "edited": false, "score": 0, "creation_date": 1432730230, "post_id": 30481833, "comment_id": 49043859, "body": "i have posted error in question. please check while running bundle install"}, {"owner": {"reputation": 2805, "user_id": 918365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTr91.jpg?s=128&g=1", "display_name": "Yosep Kim", "link": "https://stackoverflow.com/users/918365/yosep-kim"}, "edited": false, "score": 0, "creation_date": 1432730401, "post_id": 30481833, "comment_id": 49043990, "body": "What is the message, when you run &quot;gem install kgio -v &#39;2.9.3&#39;&quot; command?"}, {"owner": {"reputation": 1, "user_id": 4944548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdc66d05073db28fe9dabaf709b705f?s=128&d=identicon&r=PG&f=1", "display_name": "Dhanasekar", "link": "https://stackoverflow.com/users/4944548/dhanasekar"}, "edited": false, "score": 0, "creation_date": 1432730522, "post_id": 30481833, "comment_id": 49044091, "body": "same issue has thrown"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1432733910, "post_id": 30481833, "comment_id": 49046803, "body": "Maybe your Ruby installation is broken ? Anyway, you want to switch to a different Ruby version, but do you have it installed on your system ? The file .ruby-version should be placed at the root of your project to indicate which version of Ruby you want using."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1432734009, "post_id": 30481833, "comment_id": 49046889, "body": "Oh, and make sure you&#39;re using the latest version of bundler <code>gem update bundler</code>"}, {"owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1432756974, "post_id": 30481833, "comment_id": 49062063, "body": "Your Gemfile is stating <code>ruby &#39;2.2.0&#39;</code> but you want to use Ruby - 2.2.2 same with the rails version."}, {"owner": {"reputation": 1, "user_id": 4944548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdc66d05073db28fe9dabaf709b705f?s=128&d=identicon&r=PG&f=1", "display_name": "Dhanasekar", "link": "https://stackoverflow.com/users/4944548/dhanasekar"}, "edited": false, "score": 0, "creation_date": 1432786599, "post_id": 30481833, "comment_id": 49071168, "body": "i have erased that line ruby &#39;2.2.0&#39; from the gemfile... and also its same err"}, {"owner": {"reputation": 1, "user_id": 4944548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdc66d05073db28fe9dabaf709b705f?s=128&d=identicon&r=PG&f=1", "display_name": "Dhanasekar", "link": "https://stackoverflow.com/users/4944548/dhanasekar"}, "edited": false, "score": 0, "creation_date": 1432797759, "post_id": 30481833, "comment_id": 49075898, "body": "Guys, one doubt - in ubuntu using RVM is it possible to install ruby 2.2.0.... so that if possible i can able to run my project in it"}], "owner": {"reputation": 1, "user_id": 4944548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdc66d05073db28fe9dabaf709b705f?s=128&d=identicon&r=PG&f=1", "display_name": "Dhanasekar", "link": "https://stackoverflow.com/users/4944548/dhanasekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432730183, "creation_date": 1432728071, "last_edit_date": 1432730183, "question_id": 30481833, "link": "https://stackoverflow.com/questions/30481833/how-to-run-a-ruby-on-rails-project-previous-version-with-new-version-in-window", "title": "How to run a Ruby on Rails project (previous version) with new version in Windows", "body": "<p>My previous version ruby project is </p>\n\n<pre><code>Ruby - 2.2.0\nRails - 4.2.0\n</code></pre>\n\n<p>I need to update my project to a new version</p>\n\n<pre><code>Ruby - 2.2.2\nRails - 4.2.1\n(currently)\n</code></pre>\n\n<p>But its showing errors in loading rails</p>\n\n<pre><code>Could you please suggest how to update my previous version to run in new version ?\n</code></pre>\n\n<p>Note: I am using Windows 8.1 OS </p>\n\n<p>This my error while i run rails -v and ruby bin/rails s</p>\n\n<pre><code>Could not find kgio-2.9.3 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>This my Gem File,</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.2.0'\n\ngem 'rails', '4.2.0'\ngem 'unicorn-rails'\ngem 'unicorn-worker-killer'\ngem 'rack-timeout'\ngem 'responders', '~&gt; 2.0'\ngem 'ar-as-batches', github: 'telent/ar-as-batches', branch: 'master'\n\ngem 'sass-rails', github: 'rails/sass-rails', branch: '4-0-stable'\ngem 'coffee-rails'\ngem 'compass-rails'\ngem 'uglifier'\n\ngem 'angularjs-rails-resource'\ngem 'angular-rails-templates'\ngem 'ngannotate-rails'\ngem 'lodash-rails'\n\ngem 'stripe-rails'\n\ngem 'bcrypt'\ngem 'active_model_serializers', github: 'rails-api/active_model_serializers',\n  branch: '0-8-stable'\ngem 'gon'\n\ngem 'acts_as_tenant'\ngem 'acts_as_relation', '~&gt; 1.0'\n\ngem 'will_paginate'\ngem 'api-pagination'\n\ngem 'activemerchant'\ngem 'therubyracer'\ngem 'unirest'\n\ngroup :development do\n  gem 'spring'\n  gem 'fontcustom'\nend\n\ngroup :development, :test do\n  gem 'sqlite3'\nend\n\ngroup :production do\n  gem 'pg'\n  gem 'rails_12factor'\n  gem 'aws-sdk'\nend\n</code></pre>\n\n<p>While running bundle install</p>\n\n<pre><code>Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension\n.\n\n    C:/Ruby/Ruby22/bin/ruby.exe extconf.rb\nchecking for CLOCK_MONOTONIC in time.h... yes\nchecking for clockid_t in time.h... yes\nchecking for clock_gettime() in -lrt... no\nchecking for t_open() in -lnsl... no\nchecking for socket() in -lsocket... no\nchecking for poll() in poll.h... no\nchecking for getaddrinfo() in sys/types.h,sys/socket.h,netdb.h... no\ngetaddrinfo required\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby/Ruby22/bin/$(RUBY_BASE_NAME)\n        --with-rtlib\n        --without-rtlib\n        --with-nsllib\n        --without-nsllib\n        --with-socketlib\n        --without-socketlib\n\n\nGem files will remain installed in C:/Ruby/Ruby22/lib/ruby/gems/2.2.0/gems/kgio-\n2.9.3 for inspection.\nResults logged to C:/Ruby/Ruby22/lib/ruby/gems/2.2.0/gems/kgio-2.9.3/ext/kgio/ge\nm_make.out\nAn error occurred while installing kgio (2.9.3), and Bundler cannot continue.\nMake sure that `gem install kgio -v '2.9.3'` succeeds before bundling.\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3.2", "pdfkit"], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432728490, "post_id": 30481835, "comment_id": 49042628, "body": "@ user123 : Ok one problem solved..But inside my app/views/users folder i have download.html.erb file present.How can i make it pdf file here instead of passing &quot;&lt;h1&gt;Hello&lt;/h1&gt;&lt;p&gt;This is PDF!!!&lt;/p&gt;&quot;."}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432730692, "post_id": 30481835, "comment_id": 49044237, "body": "it&#39;s possible with wicked_pdf"}, {"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432731248, "post_id": 30481835, "comment_id": 49044679, "body": "@ user123 : I am trying also this wicked_pdf gem but getting the error which is explained in my updated question."}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432731389, "post_id": 30481835, "comment_id": 49044789, "body": "you are getting a correct path for wkhtmltopdf then you can create using wicked_pdf"}, {"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432731511, "post_id": 30481835, "comment_id": 49044885, "body": "@ user123 : now you can check the error in my question section."}, {"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432731622, "post_id": 30481835, "comment_id": 49044971, "body": "@ user123 : The wkhtmltopdf path is correct other wise it should not run when i am passing html tag inside this.When i am trying to convert .erb extension file it is throwing the error."}, {"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "reply_to_user": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1432732053, "post_id": 30481835, "comment_id": 49045338, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/78910/discussion-between-rajat-474-and-user123\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "is_accepted": true, "score": 1, "last_activity_date": 1432731772, "last_edit_date": 1432731772, "creation_date": 1432728077, "answer_id": 30481835, "question_id": 30481724, "link": "https://stackoverflow.com/questions/30481724/convert-embedded-ruby-file-to-pdf-file-instead-of-only-html-file-using-rails-3/30481835#30481835", "title": "convert embedded ruby file to PDF file instead of only HTML file using Rails 3", "body": "<p>You can include your stylesheets by following:</p>\n\n<pre><code>def download_pdf\n  kit = PDFKit.new(File.open(Rails.root.join('app', 'views', 'users', 'download.html.erb')))\n  kit.stylesheets &lt;&lt; Rails.root.join(\"app\",\"assets\",\"application.css\")\n  send_data(kit.to_pdf, :filename =&gt; 'report.pdf', :type =&gt; 'application/pdf', :disposition =&gt; 'inline')\nend\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 0, "accepted_answer_id": 30481835, "answer_count": 1, "score": 0, "last_activity_date": 1432731772, "creation_date": 1432727788, "last_edit_date": 1432731448, "question_id": 30481724, "link": "https://stackoverflow.com/questions/30481724/convert-embedded-ruby-file-to-pdf-file-instead-of-only-html-file-using-rails-3", "title": "convert embedded ruby file to PDF file instead of only HTML file using Rails 3", "body": "<p>I want to convert my embedded ruby file to PDF file after clicking on a link using Rails 3.I became able to convert simple html file to PDF file using <code>pdfkit gem</code>.I am explaining my code below.</p>\n\n<blockquote>\n  <p>users_controller.rb:</p>\n</blockquote>\n\n<pre><code>class UsersController &lt; ApplicationController\n    def index\n\n    end\n    def download_pdf\n       #html = render_to_string(:action =&gt; \"/users/download_pdf.html.erb\")\n       #kit = PDFKit.new('http://google.com')\n       #kit = PDFKit.new(html)\n       #send_data(kit.to_pdf, :filename =&gt; 'report.pdf', :type =&gt; 'application/pdf', :disposition =&gt; 'inline')\n       kit = PDFKit.new(\"&lt;h1&gt;Hello&lt;/h1&gt;&lt;p&gt;This is PDF!!!&lt;/p&gt;\", :page_size =&gt; \"A4\")\n       send_data(kit.to_pdf, :filename =&gt; 'report.pdf', :type =&gt; 'application/pdf', :disposition =&gt; 'inline')\n      #file = kit.to_file('my_file_name.pdf')\n    end\nend\n</code></pre>\n\n<p>In this controller page i did and got success to convert from HTML to PDF.</p>\n\n<blockquote>\n  <p>users/index.html.erb:</p>\n</blockquote>\n\n<pre><code>&lt;p&gt;\n    &lt;%= link_to \"Download pdf\",download_pdf_path(:format =&gt; 'pdf') %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>When user will click on the above <code>\"download_pdf\"</code> link the <code>download.html.erb</code> will convert to PDF file and it should display as well as download in specified folder.The <code>download.html.erb</code> file is given below.</p>\n\n<blockquote>\n  <p>users/download.html.erb:</p>\n</blockquote>\n\n<pre><code>&lt;h1&gt;Hello Rails&lt;/h1&gt;\n</code></pre>\n\n<p>The above file should convert into PDF file with proper css .If i have css for this like below.</p>\n\n<blockquote>\n  <p>application.css:</p>\n</blockquote>\n\n<pre><code>h1{\nwidth:100px;\nheight:100px;\nbackground-color:red;\n}\n</code></pre>\n\n<p>How can i include this CSS in that PDF file.My other files are given below.</p>\n\n<blockquote>\n  <p>pdfkit.rb:</p>\n</blockquote>\n\n<pre><code>PDFKit.configure do |config|\n    #config.wkhtmltopdf =Rails.root.join('bin', 'wkhtmltopdf-i386').to_s\n    config.wkhtmltopdf='C:/wkhtmltopdf/bin/wkhtmltopdf.exe'\n    #config.default_options[:ignore_load_errors] = true\nend\n</code></pre>\n\n<p>Please help me to resolve this issue and make this successfully.</p>\n\n<p>By using <code>wicked_pdf gem</code> i am getting the following error.</p>\n\n<blockquote>\n  <p>error:</p>\n</blockquote>\n\n<p>RuntimeError in UsersController#download_pdf</p>\n\n<pre><code>Error: Failed to execute:\n[\"C:/wkhtmltopdf/bin/wkhtmltopdf.exe\", \"file://C:/DOCUME~1/SUBHRA~1/LOCALS~1/Temp/wicked_pdf20150527-3204-calx6j.html\", \"C:/DOCUME~1/SUBHRA~1/LOCALS~1/Temp/wicked_pdf_generated_file20150527-3204-59mbli.pdf\"]\nError: PDF could not be generated!\n Command Error: Loading pages (1/6)\n[&gt;                                                           ] 0%\n[======&gt;                                                     ] 10%\nError: Failed loading page file://c/DOCUME~1/SUBHRA~1/LOCALS~1/Temp/wicked_pdf20150527-3204-calx6j.html (sometimes it will work just to ignore this error with --load-error-handling ignore)\nExit with code 1 due to network error: ContentNotFoundError\n</code></pre>\n\n<p>check the below code for this gem.</p>\n\n<blockquote>\n  <p>users/users_controller.rb:</p>\n</blockquote>\n\n<pre><code>class UsersController &lt; ApplicationController\n    def index\n\n    end\n    def download_pdf\n         render pdf: 'test',\n           layout: '/layouts/test',\n           template: '/users/test',\n           handlers: [:erb],\n           formats: [:pdf],\n           :save_to_file =&gt; Rails.root.join('public', \"test.pdf\")\n\n    end\nend\n</code></pre>\n\n<blockquote>\n  <p>wicked_pdf.rb:</p>\n</blockquote>\n\n<pre><code>WickedPdf.config = {\n  #:wkhtmltopdf =&gt; '/usr/local/bin/wkhtmltopdf',\n  #:layout =&gt; \"pdf.html\",\n  :exe_path =&gt; 'C:/wkhtmltopdf/bin/wkhtmltopdf.exe'\n}\n</code></pre>\n"}, {"tags": ["ruby", "calabash", "calabash-ios", "calabash-android"], "comments": [{"owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "edited": false, "score": 0, "creation_date": 1432741023, "post_id": 30481607, "comment_id": 49052528, "body": "Could you clarify what you&#39;re trying to do please?  If you&#39;re looking for the index of the duplicate day, what is the currentDay variable used for?"}, {"owner": {"reputation": 1, "user_id": 4944430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb8009a6a2449773afb9249cfbc9f99?s=128&d=identicon&r=PG&f=1", "display_name": "meg", "link": "https://stackoverflow.com/users/4944430/meg"}, "reply_to_user": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "edited": false, "score": 0, "creation_date": 1432849610, "post_id": 30481607, "comment_id": 49110308, "body": "currentDay will be the baseline for the selection of the date today in the calendar screen.      **Please note that the queried objects of calendar screen are as follows to have an idea.     [     [ 0] &quot;Part day&quot;     [ 1] May     [ 2] nil     [ 3] &quot;&quot;     [ 4] 1     [ 5] 11     so on...     ]"}, {"owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "edited": false, "score": 0, "creation_date": 1432890416, "post_id": 30481607, "comment_id": 49124614, "body": "It sounds like you need something like this to find the duplicate value - <a href=\"http://stackoverflow.com/questions/9599769/how-do-i-detect-duplicate-values-within-an-array-in-ruby\" title=\"how do i detect duplicate values within an array in ruby\">stackoverflow.com/questions/9599769/&hellip;</a> and then to look for the second instance of the dupliacate in your original array."}], "owner": {"reputation": 1, "user_id": 4944430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb8009a6a2449773afb9249cfbc9f99?s=128&d=identicon&r=PG&f=1", "display_name": "meg", "link": "https://stackoverflow.com/users/4944430/meg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432849721, "creation_date": 1432727401, "last_edit_date": 1432849721, "question_id": 30481607, "link": "https://stackoverflow.com/questions/30481607/calabash-ios-how-to-get-the-index-having-2-same-label-mark", "title": "calabash-ios: how to get the index having 2 same label mark", "body": "<p>Calendar screen shows duplicate day (example there are two 30) therefore would like to get the index of the second 30. \nSince I am just a beginner in ruby, my code below does NOT work as I intend.</p>\n\n<pre><code>def getIndex()\n    calendarArray = query(\"label\", :text);\n    currentDay = Time.now.day.to_s;\n    filterArray=Array.new\n    calendarArray.length.times do |i|\n        if calendarArray[i] == currentDay\n            [filterArray.push(calendarArray[i])]\n        end\n        if (filterArray.count&gt;0)\n            sortArray = filterArray.sort!{|obj1,obj2| obj2&lt;=&gt;obj1}\n            index1 = obj1;\n            index2 = obj2;\n            index2 eql? index1;\n            sortArray.index{ |index2| index2 == currentDay}\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "windows", "gem"], "answers": [{"comments": [{"owner": {"reputation": 1102, "user_id": 1954881, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/9Wpxg.jpg?s=128&g=1", "display_name": "Bangash", "link": "https://stackoverflow.com/users/1954881/bangash"}, "edited": false, "score": 0, "creation_date": 1432758088, "post_id": 30481695, "comment_id": 49062683, "body": "I created a variable named EDITOR and set its value to subl, but it didn&#39;t work, now its saying &quot;could not locate Gemfile&quot;,but when I list gems its there in the list."}], "tags": [], "owner": {"reputation": 16143, "user_id": 171183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13381166d87f50a05d5f9ee1077adbb2?s=128&d=identicon&r=PG", "display_name": "pdobb", "link": "https://stackoverflow.com/users/171183/pdobb"}, "is_accepted": false, "score": 0, "last_activity_date": 1432727676, "creation_date": 1432727676, "answer_id": 30481695, "question_id": 30481586, "link": "https://stackoverflow.com/questions/30481586/how-do-i-open-a-ruby-gem-in-sublime-on-windows-7-using-command-prompt/30481695#30481695", "title": "How do I open a ruby gem in Sublime on Windows 7 using command prompt?", "body": "<p>The command is <code>bundle open xyz</code>, as you've said. The editor you want to use is set in the <code>$EDITOR</code> or <code>$BUNDLER_EDITOR</code> environment variable. In effect, bundler checks this environment variable for what editor to open the gem in. So, you just need to set the environment variable <code>$EDITOR</code> to <code>subl</code>. This is done in the same place as where you set your <code>$PATH</code> environment variable. See <a href=\"http://www.computerhope.com/issues/ch000549.htm\" rel=\"nofollow\">here</a> for a guide.</p>\n"}, {"tags": [], "owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1432729025, "creation_date": 1432729025, "answer_id": 30482199, "question_id": 30481586, "link": "https://stackoverflow.com/questions/30481586/how-do-i-open-a-ruby-gem-in-sublime-on-windows-7-using-command-prompt/30482199#30482199", "title": "How do I open a ruby gem in Sublime on Windows 7 using command prompt?", "body": "<p>you can go to the directory where the gem is installed and open the directory with your editor.</p>\n\n<p>For example,</p>\n\n<p>If the ruby gems are installed on .rvm/ruby-2.1.0/gems/. Let's say, you want to open 'capybara' gem. then open the .rvm/ruby-2.1.0/gems/capybara in your editor</p>\n"}], "owner": {"reputation": 1102, "user_id": 1954881, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/9Wpxg.jpg?s=128&g=1", "display_name": "Bangash", "link": "https://stackoverflow.com/users/1954881/bangash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432758325, "creation_date": 1432727336, "last_edit_date": 1495535213, "question_id": 30481586, "link": "https://stackoverflow.com/questions/30481586/how-do-i-open-a-ruby-gem-in-sublime-on-windows-7-using-command-prompt", "title": "How do I open a ruby gem in Sublime on Windows 7 using command prompt?", "body": "<p>I have added Sublime's directory to the system path, so when I enter \"<code>subl</code>\" in comman promot it opens the Sublime, that's fine. But,<br><br>\nWhen I tried to open a ruby gem, I remembered the command used in Linux etc which is \"<code>bundle open xyz</code>\", I entered this command to Windows 7's command prompt it gave me an error as \"<strong><em>To open a bundled gem, set $EDITOR or $BUNDLER_EDITOR</em></strong>\".<br><br>\nI assumed that I must mention that i wanna open it through sublime, so I edited the command as \"<code>subl bundle open sass</code>\", but it <strong><em>opened a new file named ''bundle open sass''</em></strong> in sublime (not the sass gem).\nDoes anyone know how to open a ruby gem in sublime or whatever editor from command prompt in Windows?\nThank You!</p>\n\n<p><strong>Edit:</strong> After <a href=\"https://stackoverflow.com/users/171183/pdobb\">pdobb</a>'s <a href=\"https://stackoverflow.com/a/30481695/1954881\"><strong>answer</strong></a> I created a variable named EDITOR in my environment variables, and set its value to subl (I assumed that the path is not needed along the \"subl\" because its path is already set in the path variable), but now its showing the error as \"Could not locate gemfile\", but when I list my gems its there.</p>\n\n<p>Here is the snapshot of how I set the EDITOR variable.\n<img src=\"https://i.stack.imgur.com/UBcZz.png\" alt=\"EDITOR variable in system environment variables.\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 0, "creation_date": 1432725649, "post_id": 30480857, "comment_id": 49040530, "body": "Great, But how can I get <code>2.hours.ago</code> (suppose) with that time"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 2, "creation_date": 1432725804, "post_id": 30480857, "comment_id": 49040632, "body": "@SujitS See this method... <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_ago_in_words\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a> .. Just do <code>time_ago_in_words(&quot;06:00 AM&quot;.to_time -  2.hours)</code>.."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 4, "last_activity_date": 1432725287, "creation_date": 1432725287, "answer_id": 30480857, "question_id": 30480798, "link": "https://stackoverflow.com/questions/30480798/ruby-string-to-time-conversion/30480857#30480857", "title": "Ruby String to Time conversion", "body": "<p>You can do call <a href=\"http://api.rubyonrails.org/classes/String.html#method-i-to_time\" rel=\"nofollow\"><code>to_time</code></a> method.</p>\n\n<pre><code>\"06:00 AM\".to_time\n# =&gt; 2015-05-27 06:00:00 +0530\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 0, "creation_date": 1432725695, "post_id": 30480966, "comment_id": 49040562, "body": "Great, But how can I get 2.hours.ago (suppose) with that time"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 0, "creation_date": 1432726047, "post_id": 30480966, "comment_id": 49040790, "body": "@SujitS arup has already answered that correctly, so im not updating it here. :)"}, {"owner": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 1, "creation_date": 1432726079, "post_id": 30480966, "comment_id": 49040808, "body": "Thank you. Unfortunately I cannot accept both answer as correct. :)"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1432725897, "last_edit_date": 1432725897, "creation_date": 1432725589, "answer_id": 30480966, "question_id": 30480798, "link": "https://stackoverflow.com/questions/30480798/ruby-string-to-time-conversion/30480966#30480966", "title": "Ruby String to Time conversion", "body": "<p>Using <code>to_time</code> with older version of Rails might give:</p>\n\n<blockquote>\n  <p>ArgumentError: invalid date</p>\n</blockquote>\n\n<p>In such case you can use:</p>\n\n<pre><code>Time.parse(\"06:00 AM\")\n# =&gt; 2015-05-27 06:00:00 +0530\n</code></pre>\n"}], "owner": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1631, "favorite_count": 0, "accepted_answer_id": 30480857, "answer_count": 2, "score": 1, "last_activity_date": 1432725897, "creation_date": 1432725113, "question_id": 30480798, "link": "https://stackoverflow.com/questions/30480798/ruby-string-to-time-conversion", "title": "Ruby String to Time conversion", "body": "<p>In ruby on rails, how can I convert <code>string</code> (e.g. \"06:00 AM\") to <code>Time</code> (\"06:00 AM\"). </p>\n\n<p>I am trying to get the time <code>3hrs</code> after the given time. The problem is that, the field I am using to hold the <code>time</code> is in <code>string</code>. With my understanding, we cannot evaluate <code>string</code> or can we? I just want a time <code>3hrs</code> after the given time, but without converting the <code>string</code> field to <code>Time</code> field, it seems not possible. </p>\n\n<p>I can get the time <code>(06:00 AM)</code> in <code>Time</code> format with <code>strftime(\"%I:%M %p\")</code>, but this is not my scenario. I just want to convert the <code>string</code> into the <code>time</code> format.</p>\n\n<p>Please can someone help with this.</p>\n"}, {"tags": ["ruby", "date", "time", "timestamp"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1432725358, "post_id": 30480779, "comment_id": 49040322, "body": "Does this help? <a href=\"http://ruby-doc.org/core-2.2.0/Time.html#method-i-strftime\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Time.html#method-i-strftime</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1432725508, "creation_date": 1432725508, "answer_id": 30480937, "question_id": 30480779, "link": "https://stackoverflow.com/questions/30480779/ruby-convert-formatted-date-to-timestamp/30480937#30480937", "title": "Ruby - Convert formatted date to timestamp", "body": "<pre><code>string.tr!('TO',' ')\nTime.parse(string)\n</code></pre>\n\n<p>Try this one</p>\n"}, {"tags": [], "owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "is_accepted": true, "score": 7, "last_activity_date": 1432726016, "last_edit_date": 1432726016, "creation_date": 1432725672, "answer_id": 30480999, "question_id": 30480779, "link": "https://stackoverflow.com/questions/30480779/ruby-convert-formatted-date-to-timestamp/30480999#30480999", "title": "Ruby - Convert formatted date to timestamp", "body": "<p>Your date string is in RFC3339 format. You can parse it into a <code>DateTime</code> object, then convert it to <code>Time</code> and finally to a UNIX timestamp.</p>\n\n<pre><code>require 'date'\n\nDateTime.rfc3339('2015-05-27T07:39:59Z')\n#=&gt; #&lt;DateTime: 2015-05-27T07:39:59+00:00 ((2457170j,27599s,0n),+0s,2299161j)&gt;\n\nDateTime.rfc3339('2015-05-27T07:39:59Z').to_time\n#=&gt; 2015-05-27 09:39:59 +0200\n\nDateTime.rfc3339('2015-05-27T07:39:59Z').to_time.to_i\n#=&gt; 1432712399\n</code></pre>\n\n<p>For a more general approach, you can use <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/date/rdoc/Date.html#method-c-parse\" rel=\"noreferrer\"><code>DateTime.parse</code></a> instead of <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/date/rdoc/Date.html#method-c-rfc3339\" rel=\"noreferrer\"><code>DateTime.rfc3339</code></a>, but it is better to use the more specific method if you know the format, because it prevents errors due to ambiguities in the date string. If you have a custom format, you can use <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/date/rdoc/Date.html#method-c-strptime\" rel=\"noreferrer\"><code>DateTime.strptime</code></a> to parse it</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1432726901, "last_edit_date": 1432726901, "creation_date": 1432726324, "answer_id": 30481236, "question_id": 30480779, "link": "https://stackoverflow.com/questions/30480779/ruby-convert-formatted-date-to-timestamp/30481236#30481236", "title": "Ruby - Convert formatted date to timestamp", "body": "<pre><code>require 'time'\n\nstr = \"2015-05-27T07:39:59Z\"\nTime.parse(str).to_i # =&gt; 1432712399\n</code></pre>\n\n<p>Or, using Rails:</p>\n\n<pre><code>str.to_time.to_i\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25845, "user_id": 1133932, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5oN3M.jpg?s=128&g=1", "display_name": "Manish Shrivastava", "link": "https://stackoverflow.com/users/1133932/manish-shrivastava"}, "is_accepted": false, "score": 2, "last_activity_date": 1464265634, "creation_date": 1464265634, "answer_id": 37460850, "question_id": 30480779, "link": "https://stackoverflow.com/questions/30480779/ruby-convert-formatted-date-to-timestamp/37460850#37460850", "title": "Ruby - Convert formatted date to timestamp", "body": "<p>In rails 4, you can use like - <code>string.to_datetime.to_i</code></p>\n\n<pre><code>\"Thu, 26 May 2016 11:46:31 +0000\".to_datetime.to_i\n</code></pre>\n"}], "owner": {"reputation": 886, "user_id": 4175566, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/19f065b3c092a02e9fc8add086b5ddd1?s=128&d=identicon&r=PG", "display_name": "romanzipp", "link": "https://stackoverflow.com/users/4175566/romanzipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13544, "favorite_count": 1, "accepted_answer_id": 30480999, "answer_count": 4, "score": 3, "last_activity_date": 1464265634, "creation_date": 1432725076, "question_id": 30480779, "link": "https://stackoverflow.com/questions/30480779/ruby-convert-formatted-date-to-timestamp", "title": "Ruby - Convert formatted date to timestamp", "body": "<p>I need to convert a date string to the Unix timestamp format.\nThe string I get from an API looks like:</p>\n\n<pre><code>2015-05-27T07:39:59Z\n</code></pre>\n\n<p>with <code>.tr()</code> i get:</p>\n\n<pre><code>2015-05-27 07:39:59\n</code></pre>\n\n<p>which is a pretty regular date format. Nonetheless, Ruby isn't able to convert it to Unix TS format. I tried <code>.to_time.to_i</code> but I keep getting <code>NoMethodError</code> Errors.</p>\n\n<p>In PHP the function <code>strtotime()</code> just works perfectly for this.\nIs there some similar method for Ruby?</p>\n"}, {"tags": ["ruby", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1432729562, "last_edit_date": 1432729562, "creation_date": 1432728889, "answer_id": 30482135, "question_id": 30480770, "link": "https://stackoverflow.com/questions/30480770/declaring-a-global-method-in-cucumber/30482135#30482135", "title": "Declaring a global method in Cucumber", "body": "<p>I think you can define a module method</p>\n\n<pre><code>module UserSession\n\n  def self.factory_girl_users\n    Hash[:user_1 =&gt; FactoryGirl.attributes_for(:automated_user), :user_2 =&gt; FactoryGirl.attributes_for(:automated_user_1)]\n   end\n\n  def self.user_array\n    factory_girl_users.values\n  end\nend\n</code></pre>\n\n<p>To access the <code>user_array</code> You would do <code>UserSession.user_array</code>.</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 30482135, "answer_count": 1, "score": 0, "last_activity_date": 1611537037, "creation_date": 1432725055, "last_edit_date": 1611537037, "question_id": 30480770, "link": "https://stackoverflow.com/questions/30480770/declaring-a-global-method-in-cucumber", "title": "Declaring a global method in Cucumber", "body": "<p>If I have the following module</p>\n<pre><code>module UserSession\n $user_array = factory_girl_users.values\n\n def factory_girl_users\n  Hash[:user_1 =&gt; FactoryGirl.attributes_for(:automated_user), :user_2 =&gt; FactoryGirl.attributes_for(:automated_user_1)]\n end\nend\nWorld(UserSession)\n</code></pre>\n<p>How do I access the factory_girl_users method, since at the moment I'm getting:</p>\n<pre><code>undefined method `factory_girl_users' for UserSession:Module (NoMethodError)\n</code></pre>\n<p>I can't think what is responsible for this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "edited": false, "score": 0, "creation_date": 1432725139, "post_id": 30480595, "comment_id": 49040174, "body": "use this command <code>net user postgres &#47;delete</code> to uninstall Postgres"}, {"owner": {"reputation": 2599, "user_id": 39223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/39e19e0acb0d2809f60f57cec9b50512?s=128&d=identicon&r=PG", "display_name": "RJHunter", "link": "https://stackoverflow.com/users/39223/rjhunter"}, "reply_to_user": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "edited": false, "score": 0, "creation_date": 1432725264, "post_id": 30480595, "comment_id": 49040258, "body": "Hi James, welcome to Stack Overflow! Your question is good, although the formatting got messed up a bit on the long &quot;ruby -e&quot; line. Be careful with the <code>net user</code> command that @rick mentions, that deletes the postgres <i>user</i> (nothing to do with Ruby or gems)."}], "answers": [{"tags": [], "owner": {"reputation": 2599, "user_id": 39223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/39e19e0acb0d2809f60f57cec9b50512?s=128&d=identicon&r=PG", "display_name": "RJHunter", "link": "https://stackoverflow.com/users/39223/rjhunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1432726198, "creation_date": 1432726198, "answer_id": 30481194, "question_id": 30480595, "link": "https://stackoverflow.com/questions/30480595/uninstalling-postgres-rubygem-on-windows-8-1/30481194#30481194", "title": "Uninstalling Postgres Rubygem on Windows 8.1", "body": "<p>Try <code>gem list --details</code> to see where your \"pg\" gems are installed. Perhaps they're in a different directory from where you expect (perhaps with unusual permissions).</p>\n\n<p>Try <code>bundle clean --force</code> to remove all the gems that aren't part of the bundle. (You can also add <code>--dry-run</code> to see what it plans to do.)</p>\n\n<p>And depending on how you installed it, you might consider re-installing Ruby.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 11, "user_id": 4944214, "user_type": "registered", "profile_image": "https://graph.facebook.com/1599221580355243/picture?type=large", "display_name": "James Alvin", "link": "https://stackoverflow.com/users/4944214/james-alvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432748685, "creation_date": 1432724568, "last_edit_date": 1432727194, "question_id": 30480595, "link": "https://stackoverflow.com/questions/30480595/uninstalling-postgres-rubygem-on-windows-8-1", "title": "Uninstalling Postgres Rubygem on Windows 8.1", "body": "<p><em>copy and paste</em> \"Hi, I'm new to Ruby/Ruby on Rails.\"</p>\n\n<p>I'm running Windows 8.1. I have two outdated versions of the PostgresSQL Rubygem (<code>pg</code>) installed on my device: -v <code>0.9.0</code> and -v <code>0.18.2</code>. I'm trying to uninstall both, but when I enter the command <code>gem uninstall pg -v '0.9.0'</code> for example, it's as if nothing happened. I installed <code>-v 0.9.0</code> apart from bundle install. </p>\n\n<p>I have already tried using the command:</p>\n\n<pre><code>ruby -e \"`gem list`.split(/$/).each { |line| puts `gem uninstall -Iax #{line.split(' ')[0]}` unless line.empty? }\" \n</code></pre>\n\n<p>This was supposed to remove everything - but it removed everything except the <code>pg</code> gems. What command should I be using to uninstall the <code>pg</code> gems?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara", "cocoon-gem"], "comments": [{"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "edited": false, "score": 0, "creation_date": 1432724359, "post_id": 30480337, "comment_id": 49039606, "body": "based on what you are generating the name?"}, {"owner": {"reputation": 2662, "user_id": 657003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jWDY7.jpg?s=128&g=1", "display_name": "Perry Horwich", "link": "https://stackoverflow.com/users/657003/perry-horwich"}, "reply_to_user": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "edited": false, "score": 0, "creation_date": 1432724736, "post_id": 30480337, "comment_id": 49039866, "body": "Thanks kamesh.  Question updated with associated code."}], "answers": [{"comments": [{"owner": {"reputation": 2662, "user_id": 657003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jWDY7.jpg?s=128&g=1", "display_name": "Perry Horwich", "link": "https://stackoverflow.com/users/657003/perry-horwich"}, "edited": false, "score": 0, "creation_date": 1432725407, "post_id": 30480752, "comment_id": 49040351, "body": "I see.  Can you add some example ruby code using cocoon that will assign an id?"}, {"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "reply_to_user": {"reputation": 2662, "user_id": 657003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jWDY7.jpg?s=128&g=1", "display_name": "Perry Horwich", "link": "https://stackoverflow.com/users/657003/perry-horwich"}, "edited": false, "score": 0, "creation_date": 1432725668, "post_id": 30480752, "comment_id": 49040548, "body": "@PerryHorwich   &lt;%= link_to_add_association &#39;Add a Document&#39;, f, :documents, :class=&gt;&quot;btn btn-primary btn-xs&quot;, :id =&gt; &quot;test&quot; , title: &quot;Click here to add a document.&quot;, data: {toggle: &quot;tooltip&quot;, placement: &quot;right&quot;, animation: true, delay: {show: 700, hide: 100}}%&gt;"}, {"owner": {"reputation": 2662, "user_id": 657003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jWDY7.jpg?s=128&g=1", "display_name": "Perry Horwich", "link": "https://stackoverflow.com/users/657003/perry-horwich"}, "edited": false, "score": 0, "creation_date": 1432725888, "post_id": 30480752, "comment_id": 49040683, "body": "kamesh, I think this will not account for how cocoon supports the creation of multiple children for a given parent.  Thanks though.  The answer is here <a href=\"http://stackoverflow.com/questions/23184690/testing-fields-added-dynamically-by-cocoon-using-rspec-and-capybara\" title=\"testing fields added dynamically by cocoon using rspec and capybara\">stackoverflow.com/questions/23184690/&hellip;</a>  or here: <a href=\"http://stackoverflow.com/questions/23360046/selecting-element-from-dropdown-without-id-capybara\" title=\"selecting element from dropdown without id capybara\">stackoverflow.com/questions/23360046/&hellip;</a>  ... but it seems to be too many layers of abstraction for me to figure it out.  ??"}], "tags": [], "owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1432724974, "creation_date": 1432724974, "answer_id": 30480752, "question_id": 30480337, "link": "https://stackoverflow.com/questions/30480337/capybara-select-from-nested-dropdown-when-both-css-id-and-name-are-dynamically-g/30480752#30480752", "title": "Capybara select from nested dropdown when both css id and name are dynamically generated", "body": "<p>You can assign an id for the dropdown. and then you can select the element by the id.</p>\n\n<p>The following link tells you how to select an element by id.\n<a href=\"http://www.rubydoc.info/github/jnicklas/capybara/Capybara/Node/Finders#find_by_id-instance_method\" rel=\"nofollow\">http://www.rubydoc.info/github/jnicklas/capybara/Capybara/Node/Finders#find_by_id-instance_method</a></p>\n"}, {"tags": [], "owner": {"reputation": 2662, "user_id": 657003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jWDY7.jpg?s=128&g=1", "display_name": "Perry Horwich", "link": "https://stackoverflow.com/users/657003/perry-horwich"}, "is_accepted": false, "score": 0, "last_activity_date": 1432740027, "creation_date": 1432740027, "answer_id": 30486661, "question_id": 30480337, "link": "https://stackoverflow.com/questions/30480337/capybara-select-from-nested-dropdown-when-both-css-id-and-name-are-dynamically-g/30486661#30486661", "title": "Capybara select from nested dropdown when both css id and name are dynamically generated", "body": "<p>This works:  </p>\n\n<pre><code>  orientations=page.all('html body main form#new_protocol.simple_form.form-horizontal div.form-inline div#step_items.ui-sortable div div#step_lists div div#tips div div#images div div#documents div div.links div.nested-fields div.form-inputs.row div.form-group.select.required.protocol_step_items_orientation_id.col-sm-3 div.col-sm-9 select')\n  orientations.first.select('Axial')\n</code></pre>\n\n<p>... but it feels pretty brittle.  Is there a better way?</p>\n"}], "owner": {"reputation": 2662, "user_id": 657003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/jWDY7.jpg?s=128&g=1", "display_name": "Perry Horwich", "link": "https://stackoverflow.com/users/657003/perry-horwich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 536, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1432740027, "creation_date": 1432723829, "last_edit_date": 1495539825, "question_id": 30480337, "link": "https://stackoverflow.com/questions/30480337/capybara-select-from-nested-dropdown-when-both-css-id-and-name-are-dynamically-g", "title": "Capybara select from nested dropdown when both css id and name are dynamically generated", "body": "<p>I am trying to select an item from a dropdown using capybara.</p>\n\n<p>The dropdown is a nested item generated using the cocoon gem.  Both the css id and name are dynamically generated.  </p>\n\n<p>A copy/paste of the page source looks like this:  </p>\n\n<pre><code>&lt;div class=\"form-group select required protocol_step_items_orientation_id col-sm-3\" title=\"Select an orientation for the plane of imaging.\" data-toggle=\"tooltip\" data-placement=\"auto\" data-delay=\"{\"show\":700,\"hide\":100}\" data-animation=\"true\"&gt;\n&lt;div class=\"col-sm-9\"&gt;\n&lt;select id=\"protocol_step_items_attributes_1432720278702_orientation_id\" class=\"select required form-control\" name=\"protocol[step_items_attributes][1432720278702][orientation_id]\"&gt;\n&lt;option value=\"\"&gt;Orientation&lt;/option&gt;\n&lt;option value=\"74\"&gt;Axial&lt;/option&gt;\n&lt;option value=\"75\"&gt;Sagittal&lt;/option&gt;\n&lt;option value=\"76\"&gt;Coronal&lt;/option&gt;\n&lt;option value=\"77\"&gt;Sagital Oblique&lt;/option&gt;\n&lt;option value=\"78\"&gt;Coronal Oblique&lt;/option&gt;\n&lt;option value=\"79\"&gt;Axial Oblique&lt;/option&gt;\n&lt;/select&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>What syntax can I give to a capybara finder to select from:  </p>\n\n<pre><code>&lt;select id=\"protocol_step_items_attributes_1432720278702_orientation_id\" class=\"select required form-control\" name=\"protocol[step_items_attributes][1432720278702][orientation_id]\"&gt;\n</code></pre>\n\n<p>EDIT:\nThis code generates the select box:  </p>\n\n<pre><code>&lt;div class=\"links\" &gt;\n        &lt;div class=\"row\"&gt;               \n      &lt;%= link_to_add_association 'Add Imaging Step', f, :step_items, :wrap_object =&gt; Proc.new{|item| item=StepItem.new}, :class=&gt;\"btn btn-primary btn-xs add_imaging_step\", title: \"Click here to add an imaging step.\", data: {toggle: \"tooltip\", placement: \"right\", animation: true, delay: {show: 700, hide: 100}}%&gt;\n\n  &lt;%= link_to_add_association 'Add an Imaging Step List', f, :step_lists, :wrap_object =&gt; Proc.new{|item| item=StepList.new}, :class=&gt;\"btn btn-primary btn-xs\",title: \"Click here to add an imaging step list.\", data: {toggle: \"tooltip\", placement: \"right\", animation: true, delay: {show: 700, hide: 100}}%&gt;\n\n  &lt;%= link_to_add_association 'Add an Imaging Tip', f, :tips, :class=&gt;\"btn btn-primary btn-xs\", title: \"Click here to add an imaging tip.\", data: {toggle: \"tooltip\", placement: \"right\", animation: true, delay: {show: 700, hide: 100}}%&gt;\n\n  &lt;%= link_to_add_association 'Add an Image', f, :images, :class=&gt;\"btn btn-primary btn-xs\", title: \"Click here to add an image.\", data: {toggle: \"tooltip\", placement: \"right\", animation: true, delay: {show: 700, hide: 100}}%&gt;\n\n  &lt;%= link_to_add_association 'Add a Document', f, :documents, :class=&gt;\"btn btn-primary btn-xs\", title: \"Click here to add a document.\", data: {toggle: \"tooltip\", placement: \"right\", animation: true, delay: {show: 700, hide: 100}}%&gt;\n    &lt;/div&gt;&lt;!--row--&gt;\n</code></pre>\n\n<p></p>\n\n<p>EDIT2:\nI think the answer may be here:  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/23184690/testing-fields-added-dynamically-by-cocoon-using-rspec-and-capybara\">Testing fields added dynamically by cocoon using rspec and capybara</a></p>\n\n<p>or here:  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/23360046/selecting-element-from-dropdown-without-id-capybara\">Selecting element from dropdown without id Capybara</a></p>\n\n<p>... but I can not seem to figure out the correct syntax to give the capybara finder.  </p>\n"}, {"tags": ["ruby", "middleman"], "comments": [{"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1432728161, "post_id": 30480284, "comment_id": 49042406, "body": "If you need to generate text from a template, have you considered trying <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/erb/rdoc/ERB.html\" rel=\"nofollow noreferrer\">erb</a> ?"}, {"owner": {"reputation": 6503, "user_id": 3675188, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/38ad90bb6d16a1a2201cf88699d0ebf9?s=128&d=identicon&r=PG&f=1", "display_name": "user3675188", "link": "https://stackoverflow.com/users/3675188/user3675188"}, "reply_to_user": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1432732562, "post_id": 30480284, "comment_id": 49045728, "body": "hi @floum is there any simple tutorial or link about erb to generate?"}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1432735514, "post_id": 30480284, "comment_id": 49048118, "body": "check this excellent guide : <a href=\"http://www.stuartellis.eu/articles/erb/\" rel=\"nofollow noreferrer\">stuartellis.eu/articles/erb</a>"}], "answers": [{"tags": [], "owner": {"reputation": 324, "user_id": 905987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a0c7d88ecacb16e0fa21b4d43446425?s=128&d=identicon&r=PG", "display_name": "Ollie", "link": "https://stackoverflow.com/users/905987/ollie"}, "is_accepted": false, "score": 1, "last_activity_date": 1432806262, "creation_date": 1432806262, "answer_id": 30502903, "question_id": 30480284, "link": "https://stackoverflow.com/questions/30480284/how-do-i-generate-pages-dynamically-by-a-json-file/30502903#30502903", "title": "how do I generate pages dynamically by a JSON file", "body": "<p>Looks like you are using Haml, you can do it like this <a href=\"http://haml.info/docs/yardoc/Haml/Engine.html\" rel=\"nofollow\">http://haml.info/docs/yardoc/Haml/Engine.html</a>:</p>\n\n<pre><code>class SomeClass\n  def generate_product_files\n    products.each do |product|\n      save_product_as_html(product)\n    end\n  end\n\n  private\n\n  def save_product_as_html(product)\n    html = product_template_engine.render(\n      Object.new,\n      product_name:        product.fetch(:name),\n      product_price:       product.fetch(:price),\n      product_description: product.fetch(:description),\n      product_images_link: product.fetch(:product_images_link)\n    )\n\n    file_path = \"products/product-#{ product.fetch(:id) }\"\n\n    File.open(file_path, 'w') do |file|\n      file.puts(html)\n    end\n  end\n\n  def product_template_engine\n    @product_template_engine ||= Haml::Engine.new(File.read('some_template.html.haml'))\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 3675188, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/38ad90bb6d16a1a2201cf88699d0ebf9?s=128&d=identicon&r=PG&f=1", "display_name": "user3675188", "link": "https://stackoverflow.com/users/3675188/user3675188"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432806262, "creation_date": 1432723651, "question_id": 30480284, "link": "https://stackoverflow.com/questions/30480284/how-do-i-generate-pages-dynamically-by-a-json-file", "title": "how do I generate pages dynamically by a JSON file", "body": "<p>I need to create hundreds of static <strong>product</strong> html pages by a data JSON file</p>\n\n<p>First, I will load all the products information from <strong>data.json</strong></p>\n\n<p>Then, load it into <strong>product-page</strong> template,</p>\n\n<p>Finally, apply it into <strong>layout</strong> template</p>\n\n<p>How could I finish it in <strong>middleman</strong> </p>\n\n<p>Or if I can generate all the product static pages with <strong>product-page</strong> by any   exsiting gem</p>\n\n<h1>data.json</h1>\n\n<pre><code>```json\n[\n  {\n    product_name: \"~~\"\n    product_images_link: \"~~\"\n    product_price: \"~~\"\n    product_description: \"~~\"\n  },\n  {\n    product_name: \"~~\"\n    product_images_link: \"~~\"\n    product_price: \"~~\"\n    product_description: \"~~\"\n  }\n]\n\n```\n</code></pre>\n\n<h1>layout</h1>\n\n<pre><code>%html\n  %head\n    %link{:href =&gt; \"/stylesheets/bootstrap.css\", :rel =&gt; \"stylesheet\", :type =&gt; \"text/css\"}/\n  %body.overview\n    = yield\n    %script{:src =&gt; \"/javascripts/overview.js\"}\n</code></pre>\n\n<h1>product-page</h1>\n\n<pre><code>.head\n  .product_info\n    %h1= product_name\n    %h1= product_price\n    = product_description\n  .image\n    %img{:alt =&gt; \"\", :src =&gt; \"#{product_images_link}\"}/\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 2, "last_activity_date": 1432735859, "last_edit_date": 1432735859, "creation_date": 1432723534, "answer_id": 30480242, "question_id": 30480156, "link": "https://stackoverflow.com/questions/30480156/why-do-i-need-to-call-attr-writer-methods-with-self-to-get-them-to-work-inside/30480242#30480242", "title": "Why do I need to call attr_writer methods with `self` to get them to work inside a class?", "body": "<p>You have to create an instance variable with the '@' character :</p>\n\n<pre><code>value = 6 # create a local variable 'value' and set it to 6\n\n@value = 6 # create an instance variable named 'value' and set it to 6, it will be accessible through the accessor #value\n</code></pre>\n\n<h3>EDIT</h3>\n\n<pre><code>self.value = 6 \n</code></pre>\n\n<p>calls the method #value=(new_value), implicitly declared from attr_accessor, which sets the @value instance variable to new_value (possible from other scopes)</p>\n\n<pre><code>@value = 6\n</code></pre>\n\n<p>directly sets the instance variable to 6 (only possible from instance scope)</p>\n"}, {"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 6, "last_activity_date": 1432723680, "creation_date": 1432723680, "answer_id": 30480294, "question_id": 30480156, "link": "https://stackoverflow.com/questions/30480156/why-do-i-need-to-call-attr-writer-methods-with-self-to-get-them-to-work-inside/30480294#30480294", "title": "Why do I need to call attr_writer methods with `self` to get them to work inside a class?", "body": "<p><em>Why do I need <code>self</code> when the method is defined already?</em></p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/doc/syntax/assignment_rdoc.html#label-Assignment+Methods\">Assignment Methods</a></p>\n\n<blockquote>\n  <p>When using method assignment you must always have a receiver. If you do not have a receiver Ruby assumes you are assigning to a local variable</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "is_accepted": false, "score": 0, "last_activity_date": 1432723794, "creation_date": 1432723794, "answer_id": 30480325, "question_id": 30480156, "link": "https://stackoverflow.com/questions/30480156/why-do-i-need-to-call-attr-writer-methods-with-self-to-get-them-to-work-inside/30480325#30480325", "title": "Why do I need to call attr_writer methods with `self` to get them to work inside a class?", "body": "<p>You always need to use self so ruby can know if you're not instantiating a new variable:</p>\n\n<pre><code>self.value = 6 #ruby knows it's your class variable\n\nvalue = 6 #ruby thinks you're creating a new variable called value\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/doc/syntax/assignment_rdoc.html#label-Assignment+Methods\" rel=\"nofollow\">Assignment Methods</a></p>\n"}], "owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 1, "closed_date": 1432724498, "answer_count": 3, "score": 2, "last_activity_date": 1432735859, "creation_date": 1432723324, "question_id": 30480156, "link": "https://stackoverflow.com/questions/30480156/why-do-i-need-to-call-attr-writer-methods-with-self-to-get-them-to-work-inside", "closed_reason": "Duplicate", "title": "Why do I need to call attr_writer methods with `self` to get them to work inside a class?", "body": "<p>This does not output anything:</p>\n\n<pre><code>class Test\n\n  attr_accessor :value\n\n  def run\n    set_value\n    puts value\n  end\n\n  def set_value\n    value = 6 # No 'self'\n  end\nend\n\nTest.new.run\n</code></pre>\n\n<p>Whereas this outputs '6'</p>\n\n<pre><code>class Test\n\n  attr_accessor :value\n\n  def run\n    set_value\n    puts value\n  end\n\n  def set_value\n    self.value = 6 # With 'self'\n  end\nend\n\nTest.new.run\n</code></pre>\n\n<p>Why do I need <code>self</code> when the method is defined already? Surely Ruby should use the method rather than creating a local variable in the set_value function?</p>\n"}, {"tags": ["ruby", "openssl", "digital-signature"], "owner": {"reputation": 21, "user_id": 4395733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443ebc29c0391f149c7bd2db15674c1d?s=128&d=identicon&r=PG&f=1", "display_name": "mille-printemps", "link": "https://stackoverflow.com/users/4395733/mille-printemps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1432722784, "creation_date": 1432722784, "last_edit_date": 1495540403, "question_id": 30479950, "link": "https://stackoverflow.com/questions/30479950/how-secure-openssl-rsautl-sign-is-comparing-to-openssl-dgst-sign", "title": "How secure `openssl rsautl -sign` is comparing to `openssl dgst -sign`?", "body": "<p>I was doing research about a way to generate a digital signature of a file and found that there were at least two ways: <code>openssl rsautl -sign</code> and <code>openssl dgst -sign</code>.</p>\n\n<p>I understand the difference between them at an algorithm level by reading <a href=\"https://stackoverflow.com/questions/9951559/difference-between-openssl-rsautl-and-dgst\">Difference between openSSL rsautl and dgst</a></p>\n\n<p>I am wondering if there is a difference between them at a security level . I suppose that the difference between them is the ASN1 encoding and that does not affect the strength of the security level of <code>openssl rsautl -sign</code>. But if possible, I would like to make sure it. </p>\n\n<p>I am planning to implement this in Ruby. It seems to me that <code>openssl dgst -sign</code> can be implemented by using <code>sign</code> in <code>OpenSSL::PKey::RSA</code> and <code>openssl rsautl -sign</code> can be implemented by using <code>private_encrypt</code> in <code>OpenSSL::PKey::RSA</code>. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13563, "user_id": 2790174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78ecc89e845b86c885f53f24981fea44?s=128&d=identicon&r=PG&f=1", "display_name": "NoDisplayName", "link": "https://stackoverflow.com/users/2790174/nodisplayname"}, "edited": false, "score": 0, "creation_date": 1432722495, "post_id": 30479713, "comment_id": 49038316, "body": "I didn&#39;t even heard that Rails had <code>or</code> method"}, {"owner": {"reputation": 13563, "user_id": 2790174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78ecc89e845b86c885f53f24981fea44?s=128&d=identicon&r=PG&f=1", "display_name": "NoDisplayName", "link": "https://stackoverflow.com/users/2790174/nodisplayname"}, "edited": false, "score": 0, "creation_date": 1432722538, "post_id": 30479713, "comment_id": 49038351, "body": "if you have long queries, I&#39;d say it&#39;s a good idea to create a class for it"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 2, "creation_date": 1432722931, "post_id": 30479713, "comment_id": 49038655, "body": "As far as I know, this feature has been merged to rails master branch but has not been released yet."}, {"owner": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 0, "creation_date": 1432723232, "post_id": 30479713, "comment_id": 49038858, "body": "It is there on the master <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/null_relation.rb#L87-89\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/master/activerecord/lib/&hellip;</a> . Link of the full commit : <a href=\"https://github.com/rails/rails/commit/9e42cf019f2417473e7dcbfcb885709fa2709f89\" rel=\"nofollow noreferrer\">github.com/rails/rails/commit/&hellip;</a>"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 0, "creation_date": 1432723321, "post_id": 30479713, "comment_id": 49038910, "body": "@AmitThawait Ok,. it is in master... I checked <a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/querying.rb\" rel=\"nofollow noreferrer\">here</a>..and <a href=\"https://github.com/rails/rails/blob/2366cc5e3488878adf3459fb1221d0b08a7254f9/activerecord/lib/active_record/querying.rb#L12\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "edited": false, "score": 0, "creation_date": 1432723864, "post_id": 30480045, "comment_id": 49039279, "body": "<code>ActiveRecord::RecordNotFound in SearchesController#search</code> Couldn&#39;t find Version without an ID, but I think that is not related to this specific problem."}, {"owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "reply_to_user": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "edited": false, "score": 0, "creation_date": 1432724234, "post_id": 30480045, "comment_id": 49039523, "body": "where you have written query to find Version?"}, {"owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "edited": false, "score": 0, "creation_date": 1432724504, "post_id": 30480045, "comment_id": 49039705, "body": "models/version.rb  <code>def self.find_version(params)     Version.friendly.find(params[&#39;version&#39;])   end</code>"}, {"owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "reply_to_user": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "edited": false, "score": 0, "creation_date": 1432724643, "post_id": 30480045, "comment_id": 49039813, "body": "Check logs and find out what value is the in <code>params[&#39;version&#39;]</code>"}], "tags": [], "owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "is_accepted": true, "score": 2, "last_activity_date": 1432723055, "creation_date": 1432723055, "answer_id": 30480045, "question_id": 30479713, "link": "https://stackoverflow.com/questions/30479713/rails-4-2-1-undefined-method-or-for-activerecordrelation/30480045#30480045", "title": "Rails - 4.2.1 undefined method `or&#39; for #&lt;ActiveRecord::Relation []&gt;", "body": "<p>You can reduce long queries of controller by creating Scope.</p>\n\n<p><strong>in model</strong></p>\n\n<pre><code>scope :find_verse, -&gt;(search_term) { where(\"LOWER(verse) LIKE LOWER (?) OR LOWER(verse) LIKE LOWER(%#{search_term}%)\", search_term ) }\n</code></pre>\n\n<p><strong>In controller</strong></p>\n\n<pre><code>@verses = Verse.find_verse(params[:search_term])\n</code></pre>\n"}], "owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1569, "favorite_count": 0, "accepted_answer_id": 30480045, "answer_count": 1, "score": 3, "last_activity_date": 1432723760, "creation_date": 1432722194, "last_edit_date": 1432723760, "question_id": 30479713, "link": "https://stackoverflow.com/questions/30479713/rails-4-2-1-undefined-method-or-for-activerecordrelation", "title": "Rails - 4.2.1 undefined method `or&#39; for #&lt;ActiveRecord::Relation []&gt;", "body": "<p>I am trying to use the <code>or</code> statement with @verses but for some reason I keep getting <code>activerecord</code> relation error.</p>\n\n<p>searches_controller.rb</p>\n\n<pre><code>class SearchesController &lt; ApplicationController\n  def search\n    @verses = Verse.where(\"LOWER(verse) LIKE LOWER(?)\", params[:search_term]).or.where(\"LOWER(verse) LIKE LOWER(?)\", \"%#{params[:search_term]}%\")\n    @books = Book.where(\"LOWER(book_name) LIKE LOWER(?)\", \"%\" + params[:search_term] + \"%\")\n    @versions = Version.where(\"LOWER(name) LIKE LOWER(?)\", \"%\" + params[:search_term] + \"%\")\n    @results = @verses.paginate(:page =&gt; params[:page])\n    # @json = @results.map { |item| {name: item.name, link: url_for(item)} }\n    respond_to do |format|\n      format.html\n      # format.json { render json: @json }\n    end\n  end\nend\n</code></pre>\n\n<p>The application error shows this </p>\n\n<pre><code>app/controllers/searches_controller.rb:3:in `search'\n</code></pre>\n\n<p>Which makes me think it is the use of the .or in the @verses </p>\n\n<p>Here is the full application trace:</p>\n\n<pre><code>activerecord (4.2.1) lib/active_record/relation/delegation.rb:136:in `method_missing'\nactiverecord (4.2.1) lib/active_record/relation/delegation.rb:99:in `method_missing'\nactionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'\nactionview (4.2.1) lib/action_view/rendering.rb:30:in `process'\nrack-mini-profiler (0.9.3) lib/mini_profiler/profiling_methods.rb:106:in `block in profile_method'\nactionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `call'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `each'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'\nomniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'\nomniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'\nomniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'\nomniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'\nomniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'\nwarden (1.2.3) lib/warden/manager.rb:35:in `block in call'\nwarden (1.2.3) lib/warden/manager.rb:34:in `catch'\nwarden (1.2.3) lib/warden/manager.rb:34:in `call'\nrack (1.6.1) lib/rack/etag.rb:24:in `call'\nrack (1.6.1) lib/rack/conditionalget.rb:25:in `call'\nrack (1.6.1) lib/rack/head.rb:13:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'\nrack (1.6.1) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.6.1) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'\nactiverecord (4.2.1) lib/active_record/migration.rb:378:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\nbetter_errors (2.1.1) lib/better_errors/middleware.rb:59:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.2.1) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.6.1) lib/rack/methodoverride.rb:22:in `call'\nrack (1.6.1) lib/rack/runtime.rb:18:in `call'\nactivesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nrack (1.6.1) lib/rack/lock.rb:17:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'\nrack (1.6.1) lib/rack/sendfile.rb:113:in `call'\nrack-mini-profiler (0.9.3) lib/mini_profiler/profiler.rb:276:in `call'\nrailties (4.2.1) lib/rails/engine.rb:518:in `call'\nrailties (4.2.1) lib/rails/application.rb:164:in `call'\nrack (1.6.1) lib/rack/lock.rb:17:in `call'\nrack (1.6.1) lib/rack/content_length.rb:15:in `call'\nrack (1.6.1) lib/rack/handler/webrick.rb:89:in `service'\n/usr/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'\n/usr/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'\n/usr/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "controller"], "comments": [{"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "edited": false, "score": 0, "creation_date": 1432721573, "post_id": 30479371, "comment_id": 49037726, "body": "@show_column must be the parameter to the Grid class"}, {"owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1432721746, "post_id": 30479371, "comment_id": 49037843, "body": "You can try this by using session e.g. in controller  <code>session[:show_column] = true</code> instead of @show_column = true and in model <code>:if =&gt; proc {session[:show_column] == true}</code> instead of :if =&gt; proc {@show_column == true}"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1432805902, "post_id": 30479371, "comment_id": 49081206, "body": "You shouldn&#39;t evolve questions like this. It invalidates existing answers. Ask another question instead."}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432806319, "post_id": 30479371, "comment_id": 49081514, "body": "Thanks Sergio, I&#39;ve rolled back the post to the original question and will ask a new question."}], "answers": [{"comments": [{"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432722479, "post_id": 30479550, "comment_id": 49038308, "body": "I initally thought this worked but it didn&#39;t. <code>@show_column</code> is still nil in the grid class (I know this because it only shows the column if I use <code>proc {@show_column == nil}</code>."}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432723017, "post_id": 30479550, "comment_id": 49038708, "body": "I also tried it with <code>@show_column = true</code> in the controller. But then still <code>@show_column</code> is nil in the class and it shows the column only it I use <code>proc {@show_column == nil}</code>. So it doesn&#39;t seem to correctly pass on the <code>@show_column</code> value to the grid class."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "reply_to_user": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432726885, "post_id": 30479550, "comment_id": 49041417, "body": "@Nick : Add <code>attr_reader :show_column</code> in your <code>UsersGrid</code> class and then use it so: <code>proc {show_column == true}</code>. It should work."}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432727266, "post_id": 30479550, "comment_id": 49041715, "body": "Thanks, this gave the error message <code>undefined local variable or method </code>show_column&#39; for UsersGrid:Class` referring to the line <code>proc {show_column == true}</code>. Changing this to <code>@show_column</code> removed the error message but got me back to original problem that the column only shows if I change that to <code>proc {show_column == nil}</code>."}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432728947, "post_id": 30479550, "comment_id": 49042948, "body": "Also noticeable is that adding the <code>debugger</code> <i>inside</i>  <code>def initialize</code> shows <code>@show_column</code> as true, while <i>outside</i> <code>def initialize</code> it says <code>nil</code> for <code>@show_column</code> and it says <code>NameError Exception: undefined local variable or method &#39;show_column&#39;</code> for <code>show_column</code>."}], "tags": [], "owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "is_accepted": true, "score": 1, "last_activity_date": 1432721775, "creation_date": 1432721775, "answer_id": 30479550, "question_id": 30479371, "link": "https://stackoverflow.com/questions/30479371/how-to-make-a-variable-set-in-controller-available-in-other-class/30479550#30479550", "title": "How to make a variable set in controller, available in other class?", "body": "<p>You can pass down the variable when creating the <code>UsersGrid</code> instance, then save it in an instance variable there.</p>\n\n<p>In controller:</p>\n\n<pre><code>def index\n  @show_column = (current_user &amp;&amp; current_users.admin?)\n  @grid = UsersGrid.new(params[:users_grid], @show_column) do |scope|\n    scope.where(admin: false).page(params[:page]).per_page(30)\n  end\n  @grid.assets\nend\n</code></pre>\n\n<p>In the grid class:</p>\n\n<pre><code>class UsersGrid\n  def initialize(*params, show_column)\n    super *params\n    @show_column = show_column\n  end\n\n  # ...\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432722693, "post_id": 30479553, "comment_id": 49038466, "body": "This gave an error message <code>undefined method </code>[]=&#39; for nil:NilClass` referring to the line <code>params[:users_grid][:show_column] = (current_user &amp;&amp; current_users.admin?)</code>"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432722996, "post_id": 30479553, "comment_id": 49038693, "body": "is params[:users_grid] nil?"}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432723251, "post_id": 30479553, "comment_id": 49038869, "body": "I think so, <code>undefined method &#39;[]=&#39; for nil:NilClass</code> I think refers to <code>[:show_column]</code>. I&#39;m pretty sure it doesn&#39;t refer to <code>(current_user &amp;&amp; current_users.admin?)</code> since these are used in other views as well and function properly there."}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432723451, "post_id": 30479553, "comment_id": 49038999, "body": "try to do binding.pry and check for params[:users_grid] and then check for current_user &amp;&amp; current_users.admin? condition and let me know"}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432724870, "post_id": 30479553, "comment_id": 49039959, "body": "I&#39;ve tried using byebug debugger. If I place <code>debugger</code> before the <code>params</code> line, I can confirm that <code>current_user.admin?</code> is <code>true</code>. If I place the <code>debugger</code> after the <code>params</code> line, the debugger doesn&#39;t run because the original error message gets produced."}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1432725089, "post_id": 30479553, "comment_id": 49040136, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/78893/discussion-between-user123-and-nick\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1432721779, "creation_date": 1432721779, "answer_id": 30479553, "question_id": 30479371, "link": "https://stackoverflow.com/questions/30479371/how-to-make-a-variable-set-in-controller-available-in-other-class/30479553#30479553", "title": "How to make a variable set in controller, available in other class?", "body": "<p>You can use <strong>attr_accessor</strong> for a variable that is not a column of a table.</p>\n\n<pre><code>def index\n    params[:users_grid][:show_column] = (current_user &amp;&amp; current_users.admin?)\n    @grid = UsersGrid.new(params[:users_grid]) do |scope|\n      scope.where(admin: false).page(params[:page]).per_page(30)\n    end\n    @grid.assets    \n  end\n\nclass UsersGrid\n\n  include Datagrid\n  scope do\n    User.order(\"users.created_at desc\")\n  end\nattr_accessor :show_column\n\n  column(:abc, :header =&gt; \"abc?\", :html =&gt; true, :if =&gt; proc {self.show_column == true}) do |user|\n    image_tag(\"abc.png\", title: \"abc\") if user.abc\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 30479550, "answer_count": 2, "score": 1, "last_activity_date": 1432806271, "creation_date": 1432721292, "last_edit_date": 1432806271, "question_id": 30479371, "link": "https://stackoverflow.com/questions/30479371/how-to-make-a-variable-set-in-controller-available-in-other-class", "title": "How to make a variable set in controller, available in other class?", "body": "<p>In my controller I have:</p>\n\n<pre><code>  def index\n    @grid = UsersGrid.new(params[:users_grid]) do |scope|\n      scope.where(admin: false).page(params[:page]).per_page(30)\n    end\n    @grid.assets\n    if (current_user &amp;&amp; current_users.admin?)\n      @show_column = true\n    else\n      @show_column = false\n    end\n  end\n</code></pre>\n\n<p>In my grid class:</p>\n\n<pre><code>class UsersGrid\n\n  include Datagrid\n  scope do\n    User.order(\"users.created_at desc\")\n  end\n\n  column(:abc, :header =&gt; \"abc?\", :html =&gt; true, :if =&gt; proc {@show_column == true}) do |user|\n    image_tag(\"abc.png\", title: \"abc\") if user.abc\n  end\nend\n</code></pre>\n\n<p>So in the controller I set <code>@show_column</code>, and in the class it should show the column <code>:abc</code> depending on whether <code>@show_column</code> is true or false. This goes wrong as <code>@show_column</code> is an instance variable and not available in the grid class. So it's nil. How should I change this to make this work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "mocking"], "answers": [{"comments": [{"owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "edited": false, "score": 0, "creation_date": 1432797915, "post_id": 30479382, "comment_id": 49075991, "body": "Thanks for pointing me in the right direction. I used the code <code>expect(SomeGem.username).to eq &#39;hello&#39;</code> instead."}, {"owner": {"reputation": 309, "user_id": 3056122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65edb09c67885b3e90a6f308a3df478a?s=128&d=identicon&r=PG&f=1", "display_name": "user3056122", "link": "https://stackoverflow.com/users/3056122/user3056122"}, "edited": false, "score": 0, "creation_date": 1449750466, "post_id": 30479382, "comment_id": 56148456, "body": "This syntax won&#39;t work, because <code>is_expected</code> is simply <code>expect(subject)</code>, not <code>expect { subject }</code>, you have to write it explicitly."}], "tags": [], "owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "is_accepted": true, "score": 3, "last_activity_date": 1432721323, "creation_date": 1432721323, "answer_id": 30479382, "question_id": 30479186, "link": "https://stackoverflow.com/questions/30479186/how-can-i-expect-that-a-certain-method-is-called-with-a-specific-block/30479382#30479382", "title": "How can I expect that a certain method is called with a specific block?", "body": "<p>I would rather try to assert the externally visible effects. Suppose you have a <code>SomeGem.configuration</code> method that you can use to retrieve the configured values, then you could write</p>\n\n<pre><code>describe 'configuration block' do\n  subject do\n    lambda do\n      SomeGem.configure do |config|\n        config.username = \"hello\"\n        config.password = \"world\"\n      end\n    end\n  end\n\n  it { is_expected.to change(SomeGem.configuration, :username).to(\"hello\") }\n  it { is_expected.to change(SomeGem.configuration, :password).to(\"world\") }\nend\n</code></pre>\n"}], "owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 30479382, "answer_count": 1, "score": 0, "last_activity_date": 1432721323, "creation_date": 1432720849, "question_id": 30479186, "link": "https://stackoverflow.com/questions/30479186/how-can-i-expect-that-a-certain-method-is-called-with-a-specific-block", "title": "How can I expect that a certain method is called with a specific block?", "body": "<p>I want to be able to test with rspec that a specific gem called with a specific block:</p>\n\n<p>The code looks like this</p>\n\n<pre><code>SomeGem.configure do |config|\n  config.username = \"hello\"\n  config.password = \"world\"\nend\n</code></pre>\n\n<p>and the spec that I have written looks like this:</p>\n\n<pre><code>it 'sets valid gem configuration' do\n  credentials = lambda do |config|\n    config.username = \"hello\"\n    config.password = \"world\"\n  end\n\n  expect(SomeGem).to receive(:configure).with(credentials)\nend\n</code></pre>\n\n<p>The error I'm getting:</p>\n\n<pre><code>Failure/Error: expect(SomeGem).to receive(:configure).with(credentials)\nWrong number of arguments. Expected 0, got 1.\n</code></pre>\n\n<p>Any ideas on how I should be testing this?</p>\n"}, {"tags": ["ruby", "datetime", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1432721174, "post_id": 30479104, "comment_id": 49037474, "body": "That worked for one example and failed for another? I&#39;ve edited my question."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1432724909, "post_id": 30479104, "comment_id": 49039990, "body": "Excellent! thanks so much. I just need to figure out how to deal with bad user input now, like <code>0300pm 05&#47;29&#47;2015</code> or <code>03:00pm05&#47;29&#47;2015</code>. Any useful regex around? :)"}, {"owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432728723, "post_id": 30479104, "comment_id": 49042805, "body": "@shivam Why has it returned year 2020 for an input of 2015?"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432729186, "post_id": 30479104, "comment_id": 49043111, "body": "@kaybee99 cause of my mistake. Identifier for year is <code>%Y</code> and not <code>%y</code> which was a typo. I have updated it. Thanks for pointing out. PS: <code>%y</code> is used for two digit year representation."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 2, "last_activity_date": 1432729057, "last_edit_date": 1432729057, "creation_date": 1432720665, "answer_id": 30479104, "question_id": 30479032, "link": "https://stackoverflow.com/questions/30479032/rails-datetime-gives-invalid-date-sometimes-and-not-others/30479104#30479104", "title": "Rails DateTime gives invalid date sometimes and not others", "body": "<p>Try using <a href=\"http://apidock.com/rails/String/to_datetime\" rel=\"nofollow\"><code>to_datetime</code></a>:</p>\n\n<pre><code>date.to_datetime\n# =&gt; Fri, 06 Mar 2015 13:00:00 +0000\n</code></pre>\n\n<p>Also if you read the documentation for <code>DateTime#strptime</code>, <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-strptime\" rel=\"nofollow\">here</a>. It states:</p>\n\n<blockquote>\n  <p>Parses the given representation of date and time with the given\n  template, and creates a date object.</p>\n</blockquote>\n\n<p>Its important to note that the template sequence must match to that of input string sequence, which don't in your case - leading to error.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Using <code>to_datetime</code> over second example will generate  </p>\n\n<blockquote>\n  <p>ArgumentError: invalid date</p>\n</blockquote>\n\n<p>This is because it expects the date to be in <code>dd-mm-yy</code> format. Same error will be raised for <code>DateTime.parse</code> as <code>to_datetime</code> is nothing but an api for the later. You should use <code>strptime</code> in-case of non-standard custom date formats. Here:</p>\n\n<pre><code>date2 = \"03:30pm 05/28/2015\"\nDateTime.strptime(date2, \"%I:%M%p %m/%d/%Y\")\n# =&gt; Thu, 28 May 2015 15:30:00 +0000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1432720975, "post_id": 30479118, "comment_id": 49037352, "body": "So that works for that string but fails for this one? <code>&quot;03:30pm 05&#47;28&#47;2015&quot;</code> any ideas?"}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 1, "last_activity_date": 1432720712, "creation_date": 1432720712, "answer_id": 30479118, "question_id": 30479032, "link": "https://stackoverflow.com/questions/30479032/rails-datetime-gives-invalid-date-sometimes-and-not-others/30479118#30479118", "title": "Rails DateTime gives invalid date sometimes and not others", "body": "<pre><code>date = \"01:00pm  06/03/2015\"    \nDateTime.parse(date)\n=&gt; Fri, 06 Mar 2015 13:00:00 +0000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1432721289, "post_id": 30479139, "comment_id": 49037539, "body": "Try now. Didn&#39;t see the pm"}, {"owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1432722771, "post_id": 30479139, "comment_id": 49038531, "body": "@CD-RUM this will work in both cases. <code>parse</code> and <code>to_datetime</code> both expect values in UK date format"}], "tags": [], "owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "is_accepted": false, "score": 0, "last_activity_date": 1432721193, "last_edit_date": 1432721193, "creation_date": 1432720756, "answer_id": 30479139, "question_id": 30479032, "link": "https://stackoverflow.com/questions/30479032/rails-datetime-gives-invalid-date-sometimes-and-not-others/30479139#30479139", "title": "Rails DateTime gives invalid date sometimes and not others", "body": "<p>You haven't got your parameters in the correct order.</p>\n\n<pre><code>DateTime.strptime(date, '%H:%M%p %m/%d/%Y')\n</code></pre>\n\n<p>You'll also need to add <code>%p</code> for the am/pm suffix</p>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1584, "favorite_count": 0, "accepted_answer_id": 30479104, "answer_count": 3, "score": 1, "last_activity_date": 1432729057, "creation_date": 1432720526, "last_edit_date": 1432721152, "question_id": 30479032, "link": "https://stackoverflow.com/questions/30479032/rails-datetime-gives-invalid-date-sometimes-and-not-others", "title": "Rails DateTime gives invalid date sometimes and not others", "body": "<p>I've got a bunch of user-inputted dates and times like so:</p>\n\n<pre><code>date = \"01:00pm  06/03/2015\"\n</code></pre>\n\n<p>I'm trying to submit them to a <code>datetime</code> column in a database, and I'm trying to systemize them like this:</p>\n\n<pre><code>DateTime.strptime(date, '%m/%d/%Y %H:%M')\n</code></pre>\n\n<p>But I <em>consistently</em> get an invalid date error. What am I doing wrong? If I submit the string without <code>strptime</code> the record will save but it sometimes gets the date wrong.</p>\n\n<p>Also, how can I append a timezone to a <code>DateTime</code> object?</p>\n\n<p><strong>Edit:</strong> </p>\n\n<p>So <code>.to_datetime</code> and <code>DateTime.parse(date)</code> work for the <code>date</code> string and fail for <code>date2</code>. What's going on?</p>\n\n<pre><code>date2 = \"03:30pm 05/28/2015\"\n</code></pre>\n"}, {"tags": ["ruby", "session", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 4220, "user_id": 528617, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4hEuv.png?s=128&g=1", "display_name": "Arnab Datta", "link": "https://stackoverflow.com/users/528617/arnab-datta"}, "edited": false, "score": 0, "creation_date": 1461107422, "post_id": 30478867, "comment_id": 61045855, "body": "This might solve your problem <a href=\"http://stackoverflow.com/a/36721112/528617\">stackoverflow.com/a/36721112/528617</a>"}], "answers": [{"tags": [], "owner": {"reputation": 344, "user_id": 979995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/70048b54c86ac3657cc2405e2d584bda?s=128&d=identicon&r=PG", "display_name": "Kaplan Ilya", "link": "https://stackoverflow.com/users/979995/kaplan-ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1462782204, "last_edit_date": 1462782204, "creation_date": 1462720589, "answer_id": 37101406, "question_id": 30478867, "link": "https://stackoverflow.com/questions/30478867/keeping-a-track-of-sessions-in-ruby-and-capybara/37101406#37101406", "title": "Keeping a track of sessions in Ruby and Capybara", "body": "<p>Not sure I understand your exact problem, but assuming it's having single browser for few tests that run in parallel, and thus having one user's login, affecting other test that runs in the same time.</p>\n\n<p>One solution, is having named session per test. Not sure it's reliable.</p>\n\n<p>Other is having each of your process that parallel runs, open its own browser and then you won't have any sessions problem.\nIt's requiring more memory, but doesn't seem to effect tests speed.\nAlso instead of logging out, after each test, you could just use reset_sessions! in global teardown.</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549183523, "creation_date": 1432720132, "last_edit_date": 1549183523, "question_id": 30478867, "link": "https://stackoverflow.com/questions/30478867/keeping-a-track-of-sessions-in-ruby-and-capybara", "title": "Keeping a track of sessions in Ruby and Capybara", "body": "<p>I am using the <code>parallel_tests</code> gem to be able to run multiple features at the same time, the problem I face with my scenario is that I have user based sessions (SSO) so only one user can be logged in at a time.</p>\n\n<p>To combat this I was thinking of being able to randomly select users if they are available, but tracking their <code>login</code> status globally presents an issue for me.</p>\n\n<h2>My setup</h2>\n\n<p>Before and after each scenario a user will login:</p>\n\n<pre><code>Before('@login_automated_user') do\n  @user = FactoryGirl.attributes_for(:automated_user)\n login_steps(\"#{APP}\")\nend\n\nAfter('@login_automated_user') do\n logout_steps\nend\n</code></pre>\n\n<p>I was thinking of having a pool of users in an array and randomly selecting one to use and once finished return the user to the pool:</p>\n\n<pre><code>module UserSession\n  def choose_user\n    user_array = factory_girl_users.values\n    if user_array.length &gt; 0\n     @user = user_array.pop\n   end\n  end\n\n   def return_user\n     user_array &lt;&lt; @user\n   end\n\n  def factory_girl_users\n    Hash[:user_1 =&gt; FactoryGirl.attributes_for(:automated_user), :user_2 =&gt; FactoryGirl.attributes_for(:automated_user_1)]\n end\nend\nWorld(UserSession)\n</code></pre>\n\n<p>This would then make my Before and After hooks look like:</p>\n\n<pre><code>Before('@login_automated_user') do\n @user = choose_user\n login_steps(\"#{APP}\")\nend\n\nAfter('@login_automated_user') do\n logout_steps\n return_user\nend\n</code></pre>\n\n<p>One issue I can see here is I'm using <code>@user</code> across two sessions (or more if I had more users) so do I need to separate them out?</p>\n\n<p>Would anyone offer some tips/solutions to contemplate please?</p>\n"}, {"tags": ["ruby", "operator-keyword"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1432718458, "post_id": 30478116, "comment_id": 49035424, "body": "<a href=\"http://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Short-circuit_evaluation</a>"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 9, "user_id": 4943926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f74653296836f94a4b782c8919a4a4?s=128&d=identicon&r=PG&f=1", "display_name": "noobie", "link": "https://stackoverflow.com/users/4943926/noobie"}, "edited": false, "score": 0, "creation_date": 1444563800, "post_id": 30478660, "comment_id": 53947928, "body": "Thanks. I just realized I forgot to mention the short-circuiting behavior. (You weren&#39;t asking about it, but I added it in anyway.)"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 6, "last_activity_date": 1444563919, "last_edit_date": 1444563919, "creation_date": 1432719586, "answer_id": 30478660, "question_id": 30478116, "link": "https://stackoverflow.com/questions/30478116/ruby-operator-on-integers/30478660#30478660", "title": "Ruby &amp;&amp; operator on integers", "body": "<p>The boolean operators <code>&amp;&amp;</code>, <code>||</code>, <code>and</code> and <code>or</code> are among the few that are not syntactic sugar for method calls, and thus, there are no different implementations in different classes.</p>\n\n<p>In other words: they behave <em>exactly</em> the same for <em>all</em> objects, i.e. they behave the same for <code>Integer</code>s as they do for <code>String</code>s, <code>Hash</code>es, <code>Float</code>s, <code>Symbol</code>s, and any other object.</p>\n\n<pre><code>a &amp;&amp; b\n</code></pre>\n\n<p>evaluates to <code>a</code> if <code>a</code> is falsey (and will not evaluate <code>b</code> at all in this case), otherwise it evaluates to <code>b</code> (and only then will <code>b</code> be evaluated)</p>\n\n<pre><code>a || b\n</code></pre>\n\n<p>evaluates to <code>a</code> if <code>a</code> is truthy (and will not evaluate <code>b</code> at all in this case), otherwise it evaluates to <code>b</code> (and only then will <code>b</code> be evaluated)</p>\n\n<p><code>nil</code> and <code>false</code> are falsey, everything else is truthy, including <code>0</code>, <code>0.0</code>, <code>''</code>, <code>[]</code>, and <code>{}</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 4943926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f74653296836f94a4b782c8919a4a4?s=128&d=identicon&r=PG&f=1", "display_name": "noobie", "link": "https://stackoverflow.com/users/4943926/noobie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1444563919, "creation_date": 1432718270, "last_edit_date": 1432724144, "question_id": 30478116, "link": "https://stackoverflow.com/questions/30478116/ruby-operator-on-integers", "title": "Ruby &amp;&amp; operator on integers", "body": "<p>does anyone know the meaning of &amp;&amp; and || when applied to integers in Ruby?</p>\n\n<p>Here are some examples in IRB when &amp;&amp; and || are applied to integers:</p>\n\n<pre><code>&gt;&gt; 1 &amp;&amp; 2\n=&gt; 2\n\n&gt;&gt; 2 &amp;&amp; 1\n=&gt; 1\n\n&gt;&gt; 15 &amp;&amp; 20\n=&gt; 20\n\n&gt;&gt; 20 &amp;&amp; 15\n=&gt; 15\n\n&gt;&gt; 0 &amp;&amp; -1\n=&gt; -1\n\n&gt;&gt; -1 &amp;&amp; -2\n=&gt; -2\n\n&gt;&gt; 1 || 2\n=&gt; 1\n\n&gt;&gt; 2 || 1\n=&gt; 2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "string", "sidekiq"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 3, "creation_date": 1432718344, "post_id": 30478077, "comment_id": 49035335, "body": "Do <code>YAML.load(string)</code>.. you have a YAML file it seems.."}, {"owner": {"reputation": 241, "user_id": 4804167, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48558baaa8886060b1c5583c537148d7?s=128&d=identicon&r=PG&f=1", "display_name": "Purry", "link": "https://stackoverflow.com/users/4804167/purry"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1432719093, "post_id": 30478077, "comment_id": 49035931, "body": "I&#39;m trying to extract a scheduled newsletter from Sidekiq. i got this string after running  $ r= Sidekiq::ScheduledSet.new $jobs = r.map {|re| re.args[0]}  output : -  [&quot;---\\n- !ruby/class &#39;Subscriber&#39;\\n- :send_in_batch_now!\\n- - !ruby/hash:NewsletterOption\\n    welcome_message: &#39;&#39;\\n    body_message: &#39;&#39;\\n    sender_id: 1\\n    sender_name: 8Share Malaysia\\n    from_email: malaysia@8share.com\\n    country_code: my\\n    test: false\\n    subject: jkhkjh\\n    campaign_ids:\\n    - &#39;3&#39;\\n    scheduled: true\\n    scheduled_at: 2015-05-28 08:45:00.000000000 Z\\n    errors: []\\n  ]"}, {"owner": {"reputation": 241, "user_id": 4804167, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48558baaa8886060b1c5583c537148d7?s=128&d=identicon&r=PG&f=1", "display_name": "Purry", "link": "https://stackoverflow.com/users/4804167/purry"}, "edited": false, "score": 0, "creation_date": 1432719357, "post_id": 30478077, "comment_id": 49036137, "body": "im getting this error : TypeError: no implicit conversion of Array into String"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1432725052, "post_id": 30478077, "comment_id": 49040104, "body": "Can you show how do you schedule this task? It seems you are trying  to pass model via <code>perform_async</code> which is not the best approach. Pass model id instead and load model from the database within your worker instead."}], "answers": [{"tags": [], "owner": {"reputation": 755, "user_id": 3707018, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/qvj9A.png?s=128&g=1", "display_name": "AshokGK", "link": "https://stackoverflow.com/users/3707018/ashokgk"}, "is_accepted": false, "score": 0, "last_activity_date": 1432719458, "creation_date": 1432719458, "answer_id": 30478598, "question_id": 30478077, "link": "https://stackoverflow.com/questions/30478077/split-a-long-string-ruby/30478598#30478598", "title": "Split A Long String Ruby", "body": "<p>try this</p>\n\n<pre><code>require 'yaml'\nresult = YAML.load(string)\nputs result\n</code></pre>\n\n<p>if you want load from file</p>\n\n<pre><code>require 'yaml'\nresult = YAML.load_file(file.yml)\nputs result\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 4804167, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48558baaa8886060b1c5583c537148d7?s=128&d=identicon&r=PG&f=1", "display_name": "Purry", "link": "https://stackoverflow.com/users/4804167/purry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432719458, "creation_date": 1432718130, "last_edit_date": 1432718202, "question_id": 30478077, "link": "https://stackoverflow.com/questions/30478077/split-a-long-string-ruby", "title": "Split A Long String Ruby", "body": "<p>I'm working on retrieving scheduled newsletter on Sidekiq. The details such subject, created at and scheduled at, are suppose to be displayed on the frontend as a notification to the admin. I have been able to go as further as below. How do I breakdown this string even more in order to display only the subject, created at, and scheduled at at the frontend ?? </p>\n\n<p>String : </p>\n\n<pre><code>\"---\\n- !ruby/class 'Subscriber'\\n- :send_in_batch_now!\\n- - !ruby/hash:NewsletterOption\\n    welcome_message: ''\\n    body_message: ''\\n    sender_id: 1\\n    sender_name: 8Share Malaysia\\n    from_email: malaysia@8share.com\\n    country_code: my\\n    test: false\\n    subject: testnewsletter1\\n    campaign_ids:\\n    - '3'\\n    scheduled: true\\n    scheduled_at: 2015-05-28 08:45:00.000000000 Z\\n    errors: []\\n    category: version2/d/my/2015/05/26/jkhkjh\\n\"\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1432718385, "post_id": 30477956, "comment_id": 49035373, "body": "thanks, is it also possible to do it as a ajax call?"}, {"owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 1, "creation_date": 1432718700, "post_id": 30477956, "comment_id": 49035617, "body": "basically remote:true does <code>ajax request</code> and gives <code>response in js</code>. To handle js response you need to have <code>&lt;action_name&gt;.js</code> file in application views folder"}], "tags": [], "owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "is_accepted": true, "score": 1, "last_activity_date": 1432717814, "creation_date": 1432717814, "answer_id": 30477956, "question_id": 30477849, "link": "https://stackoverflow.com/questions/30477849/rails-calling-a-action-with-jquery/30477956#30477956", "title": "Rails calling a action with jquery?", "body": "<p>you can directly write <code>link_to</code> instead of <code>button</code> as,</p>\n\n<pre><code>&lt;%= link_to \"Save Changes\", url_for(:action =&gt; :first, :id =&gt; @xyz.id, :mail =&gt; @xyz.hash_for_url), remote:true, class:\"btn btn-primary\" %&gt;\n</code></pre>\n\n<p><code>remote:true</code> will serve you request as js</p>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 30477956, "answer_count": 1, "score": 0, "last_activity_date": 1432717814, "creation_date": 1432717546, "question_id": 30477849, "link": "https://stackoverflow.com/questions/30477849/rails-calling-a-action-with-jquery", "title": "Rails calling a action with jquery?", "body": "<p>I have a Rails application were I want to introduce some jquery code.</p>\n\n<p>I have button</p>\n\n<pre><code>&lt;button type=\"button\" id=\"savesettings\" class=\"btn btn-primary\"&gt;Save changes&lt;/button&gt;\n</code></pre>\n\n<p>Now I want when I press this button </p>\n\n<pre><code>$(\"#savesettings\").click(function(){\n\n                        })\n</code></pre>\n\n<p>A controller action should be called. like this:</p>\n\n<pre><code>&lt;%=url_for(:action =&gt; :first, :id =&gt; @xyz.id, :mail =&gt; @xyz.hash_for_url)%&gt;\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 1719, "user_id": 1950763, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NzirI.jpg?s=128&g=1", "display_name": "Caffeine Coder", "link": "https://stackoverflow.com/users/1950763/caffeine-coder"}, "edited": false, "score": 0, "creation_date": 1432732583, "post_id": 30478690, "comment_id": 49045742, "body": "Also he might need to install the heroku toolbelt for further things to be done"}], "tags": [], "owner": {"reputation": 1958, "user_id": 515991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/319b6176a2b56541cbf44182fd3987a1?s=128&d=identicon&r=PG&f=1", "display_name": "usmanali", "link": "https://stackoverflow.com/users/515991/usmanali"}, "is_accepted": false, "score": 0, "last_activity_date": 1432719671, "creation_date": 1432719671, "answer_id": 30478690, "question_id": 30477565, "link": "https://stackoverflow.com/questions/30477565/the-odin-project-git-push-heroku-master/30478690#30478690", "title": "The Odin Project // Git push heroku master", "body": "<p>You need to have a <code>heroku</code> account to push it to heroku. If you don't have one you can one <a href=\"https://signup.heroku.com/\" rel=\"nofollow\">here</a></p>\n\n<p>Once you have a <code>heroku</code> account. All you need to do is to type this in terminal:</p>\n\n<p><code>heroku login</code></p>\n\n<p>Enter your Heroku credentials and you shall be able to push code to your website.</p>\n"}, {"tags": [], "owner": {"reputation": 1967, "user_id": 2355344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5309fb1bc1f467ac017b7fdd89ce5154?s=128&d=identicon&r=PG", "display_name": "Collin Graves", "link": "https://stackoverflow.com/users/2355344/collin-graves"}, "is_accepted": false, "score": 0, "last_activity_date": 1432854150, "creation_date": 1432854150, "answer_id": 30518469, "question_id": 30477565, "link": "https://stackoverflow.com/questions/30477565/the-odin-project-git-push-heroku-master/30518469#30518469", "title": "The Odin Project // Git push heroku master", "body": "<p>Firstly, you're going to need to ensure you have your Heroku Toolbelt installed. If you haven't installed it, you can check it out here: <a href=\"https://toolbelt.heroku.com/\" rel=\"nofollow\">https://toolbelt.heroku.com/</a>.</p>\n\n<p>Secondly, visit <a href=\"https://www.heroku.com/\" rel=\"nofollow\">https://www.heroku.com/</a> and sign up for an account.</p>\n\n<p>Once you've successfully registered, you can run <code>heroku login</code> from your terminal and enter the credentials you just used for your account creation.</p>\n\n<p>Lastly, re-run your <code>git push heroku master</code> command and enjoy your successful push!</p>\n"}], "owner": {"reputation": 1, "user_id": 4943738, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152945246438182/picture?type=large", "display_name": "Michael Karim", "link": "https://stackoverflow.com/users/4943738/michael-karim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432854150, "creation_date": 1432716764, "last_edit_date": 1432748197, "question_id": 30477565, "link": "https://stackoverflow.com/questions/30477565/the-odin-project-git-push-heroku-master", "title": "The Odin Project // Git push heroku master", "body": "<p>I am a total newbie in all of this, so forgive my ignorance.</p>\n\n<p>Recently bumped into The Odin Project &amp; wanted to learn how to code.\nGot busy with downloading all the necessary programs [Installfest] , when this occurred:</p>\n\n<p><a href=\"http://installfest.railsbridge.org/installfest/deploy_a_rails_app\" rel=\"nofollow\">http://installfest.railsbridge.org/installfest/deploy_a_rails_app</a></p>\n\n<p>On <strong>Step 2.5</strong>: Deploy (push) to heroku, they ask me to do the following:</p>\n\n<hr>\n\n<p>Type this in terminal --> <code>git push heroku master</code></p>\n\n<p><strong>Expected result:</strong></p>\n\n<p></p>\n\n<pre><code>The authenticity of host 'heroku.com (75.101.145.87)' can't be established.\nRSA key fingerprint is 8b:48:5e:67:0e:c9:16:47:32:f2:87:0c:1f:c8:60:ad.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added 'heroku.com,75.101.145.87' (RSA) to the list of known hosts.\nCounting objects: 60, done.\nCompressing objects: 100% (54/54), done.\nWriting objects: 100% (60/60), 79.03 KiB, done.\nTotal 60 (delta 10), reused 0 (delta 0)\n\n-----&gt; Heroku receiving push\n-----&gt; Rails app detected\n   Compiled slug size is 080K\n-----&gt; Launching...... done\n   App deployed to Heroku\n\nTo git@heroku.com:floating-winter-18.git\n  * [new branch]      master -&gt; master\n</code></pre>\n\n<hr>\n\n<p>When running this command in the command prompt With Ruby &amp; Rails, I get the following message/issue/error:</p>\n\n<p><strong>Actual result:</strong></p>\n\n<blockquote>\n  <p>Username for '<a href=\"https://git.heroku.com\" rel=\"nofollow\">https://git.heroku.com</a>':</p>\n</blockquote>\n\n<hr>\n\n<p>This is totally not what should be showing up, and I don't really know anything about how to solve this problem. Does any of you guys know how I can solve this so I can continue installing the programs necessary to start coding?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1432717150, "post_id": 30477647, "comment_id": 49034532, "body": "Thaks, also just found out i could make it easier for myself by making an array of just the <code>hash</code> values,  <code>user_array = factory_girl_users.values</code> your answer helps though, thanks"}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 1, "last_activity_date": 1432716996, "creation_date": 1432716996, "answer_id": 30477647, "question_id": 30477473, "link": "https://stackoverflow.com/questions/30477473/dealing-with-array-of-hashes/30477647#30477647", "title": "Dealing with array of hashes", "body": "<p>(1) access the username and password values</p>\n\n<pre><code>hash = [:user_2, {:username=&gt;\"username_2\", :password=&gt;\"password\"}]\nhash[1]\n=&gt; {:username=&gt;\"username_2\", :password=&gt;\"password\"}\nhash[1][:username]\n=&gt; \"username_2\"\nhash[1][:password]\n=&gt; \"password\"\n</code></pre>\n\n<p>(2)</p>\n\n<pre><code> user_array.pop[1]\n =&gt; {:username=&gt;\"username_2\", :password=&gt;\"password\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1432717323, "post_id": 30477721, "comment_id": 49034649, "body": "what is the difference in doing <code>factory_girl_users.values.to_a</code> and <code>factory_girl_users.values</code>. What i mean is both create an array dont they?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1432717404, "post_id": 30477721, "comment_id": 49034709, "body": "@Richlewis: you&#39;re right, <code>.to_a</code> is redundant here. Thanks :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1432717386, "last_edit_date": 1432717386, "creation_date": 1432717191, "answer_id": 30477721, "question_id": 30477473, "link": "https://stackoverflow.com/questions/30477473/dealing-with-array-of-hashes/30477721#30477721", "title": "Dealing with array of hashes", "body": "<p>Since you don't care about the keys (from the hash), you can do this:</p>\n\n<pre><code>user_array = factory_girl_users.values\n@user = user_array.pop\n@user[:password]\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 30477721, "answer_count": 2, "score": 0, "last_activity_date": 1534328394, "creation_date": 1432716508, "last_edit_date": 1534328394, "question_id": 30477473, "link": "https://stackoverflow.com/questions/30477473/dealing-with-array-of-hashes", "title": "Dealing with array of hashes", "body": "<p>I have an array of hashes</p>\n\n<pre><code>def factory_girl_users\n  Hash[user_1: FactoryGirl.attributes_for(:automated_user), user_2: FactoryGirl.attributes_for(:automated_user_1)]\nend\n# {:user_1=&gt;{:username=&gt;\"username_1\", :password=&gt;\"password\"}, :user_2=&gt;{:username=&gt;\"username_2\", :password=&gt;\"password\"}}\n</code></pre>\n\n<p>I then want to select a random user so put the hash of factory_girl_users into an array and select one using <code>pop</code></p>\n\n<pre><code>def choose_user\n  user_array = factory_girl_users.to_a\n  @user = user_array.pop\nend\n</code></pre>\n\n<p>So at this stage @user would look like</p>\n\n<pre><code>[:user_2, {:username=&gt;\"username_2\", :password=&gt;\"password\"}]\n</code></pre>\n\n<p>My first question is how do i access the username and password values</p>\n\n<p>And secondly how would i just get <code>{:username=&gt;\"username_2\", :password=&gt;\"password\"}</code> returned</p>\n\n<p>I want to be able to access the values by doing</p>\n\n<pre><code>@user[:username]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rmagick", "prawn"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3821253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ba4852fb98e7c59976e6566ee85ced5?s=128&d=identicon&r=PG&f=1", "display_name": "user3821253", "link": "https://stackoverflow.com/users/3821253/user3821253"}, "edited": false, "score": 0, "creation_date": 1432927491, "post_id": 30533096, "comment_id": 49148536, "body": "Thank you for the answer."}], "tags": [], "owner": {"reputation": 2634, "user_id": 1301083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4166ff1a21e41131ab7196a31877a31?s=128&d=identicon&r=PG", "display_name": "Alper Karap\u0131nar", "link": "https://stackoverflow.com/users/1301083/alper-karap%c4%b1nar"}, "is_accepted": true, "score": 0, "last_activity_date": 1432912272, "creation_date": 1432912272, "answer_id": 30533096, "question_id": 30477193, "link": "https://stackoverflow.com/questions/30477193/prawn-gmagick-conflit-with-rmagick/30533096#30533096", "title": "Prawn-gmagick conflit with RMagick", "body": "<p>If you don't absolutely have to use rmagick, you can use <a href=\"https://github.com/minimagick/minimagick\" rel=\"nofollow\">minimagick</a> instead.</p>\n"}], "owner": {"reputation": 3, "user_id": 3821253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ba4852fb98e7c59976e6566ee85ced5?s=128&d=identicon&r=PG&f=1", "display_name": "user3821253", "link": "https://stackoverflow.com/users/3821253/user3821253"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 1, "accepted_answer_id": 30533096, "answer_count": 1, "score": 0, "last_activity_date": 1432912272, "creation_date": 1432715733, "last_edit_date": 1432717141, "question_id": 30477193, "link": "https://stackoverflow.com/questions/30477193/prawn-gmagick-conflit-with-rmagick", "title": "Prawn-gmagick conflit with RMagick", "body": "<p>I'm using the <code>rmagick</code> and <code>prawn-gmagick</code> gems. When I run <code>rails server</code>, I get the following error:</p>\n\n<blockquote>\n  <p>Exiting\n      /home/macon10/.rvm/gems/ruby-2.1.2/gems/polyglot-\n      0.3.5/lib/polyglot.rb:65:in `require': This installation of RMagick was \n      configured with ImageMagick 6.7.7 but GraphicsMagick 1.3.18 is in use. \n      (RuntimeError)</p>\n</blockquote>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby", "oauth-2.0", "yahoo-api", "ringcentral"], "answers": [{"tags": [], "owner": {"reputation": 11161, "user_id": 1908967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vPwiV.jpg?s=128&g=1", "display_name": "Grokify", "link": "https://stackoverflow.com/users/1908967/grokify"}, "is_accepted": true, "score": 3, "last_activity_date": 1432739884, "last_edit_date": 1432739884, "creation_date": 1432721246, "answer_id": 30479356, "question_id": 30477165, "link": "https://stackoverflow.com/questions/30477165/oauth2-intridea-gem-and-http-basic-authentication-header/30479356#30479356", "title": "OAuth2 INTRIDEA gem and HTTP basic authentication header", "body": "<p>After looking at the docs for the <code>auth_code</code> strategy and <a href=\"https://github.com/intridea/oauth2/\" rel=\"nofollow\">the code</a> for <code>oauth2/strategy/password.rb</code>, <code>oauth2/strategy/base.rb</code> and <code>oauth2/client.rb</code>, it appears the OAuth2 gem will add the <code>client_id</code> and <code>client_secret</code> form parameters to the body but not the header. This is permitted but <code>NOT RECOMMENDED</code> by <a href=\"https://tools.ietf.org/html/rfc6749\" rel=\"nofollow\">IETF RFC 6749</a>. To add the IETF recommended <code>Authorization</code> header, it appears you need to add it as parameter as shown above.</p>\n\n<p>More info: <a href=\"https://github.com/intridea/oauth2/pull/192\" rel=\"nofollow\">Pull request #192</a> covers this but may be stalled due to backward compatibility issues.</p>\n"}], "owner": {"reputation": 11161, "user_id": 1908967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vPwiV.jpg?s=128&g=1", "display_name": "Grokify", "link": "https://stackoverflow.com/users/1908967/grokify"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 30479356, "answer_count": 1, "score": 3, "last_activity_date": 1484587143, "creation_date": 1432715638, "last_edit_date": 1484587143, "question_id": 30477165, "link": "https://stackoverflow.com/questions/30477165/oauth2-intridea-gem-and-http-basic-authentication-header", "title": "OAuth2 INTRIDEA gem and HTTP basic authentication header", "body": "<p>Using INTRIDEA's OAuth2 Ruby gem, is there a recommended way to add the HTTP basic authentication header using the password strategy?</p>\n\n<p>This approach is recommended by <a href=\"https://tools.ietf.org/html/rfc6749\" rel=\"nofollow noreferrer\">IETF RFC 6749</a> and required by the Yahoo and RingCentral OAuth 2.0 implementations.</p>\n\n<p>The required header I'm working with is of the following format:</p>\n\n<pre><code>Authorization: Basic &lt;base 64 encoded \"CLIENT_ID:CLIENT_SECRET\"&gt;\n</code></pre>\n\n<p>The following doesn't work and doesn't seem to add the Authorization header:</p>\n\n<pre><code>client = OAuth2::Client.new('CLIENT_ID', 'CLIENT_SECRET', :site =&gt; 'https://example.com)\ntoken  = client.password.get_token('USERNAME', 'PASSWORD')\n</code></pre>\n\n<p>The following works, but is verbose:</p>\n\n<pre><code>client = OAuth2::Client.new('CLIENT_ID', 'CLIENT_SECRET', :site =&gt; 'https://example.com)\ntoken  = client.password.get_token('USERNAME', 'PASSWORD', \\\n  :headers =&gt; { 'Authorization' =&gt; 'Basic ' + Base64.strict_encode64(\"CLIENT_ID:CLIENT_SECRET\") \\\n)\n</code></pre>\n\n<p>The password strategy examples I've seen don't explicitly include the header so I'm wondering how it's done.</p>\n"}, {"tags": ["ruby", "email", "gem", "mime-types", "mime-mail"], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 3612491, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000907896915/picture?type=large", "display_name": "user3612491", "link": "https://stackoverflow.com/users/3612491/user3612491"}, "edited": false, "score": 0, "creation_date": 1432715707, "post_id": 30477119, "comment_id": 49033590, "body": "You right! I didn&#39;t think about it. It works now! :-)"}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "reply_to_user": {"reputation": 213, "user_id": 3612491, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000907896915/picture?type=large", "display_name": "user3612491", "link": "https://stackoverflow.com/users/3612491/user3612491"}, "edited": false, "score": 0, "creation_date": 1453467827, "post_id": 30477119, "comment_id": 57625966, "body": "@user3612491 remember that you can accept the most helpful answer (this is completely optional, but a nice way to say thanks)"}], "tags": [], "owner": {"reputation": 118, "user_id": 3532150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/392ebd7d59ecd1ec1c88d2721d07c0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Luc", "link": "https://stackoverflow.com/users/3532150/luc"}, "is_accepted": false, "score": 4, "last_activity_date": 1432719176, "last_edit_date": 1432719176, "creation_date": 1432715505, "answer_id": 30477119, "question_id": 30476924, "link": "https://stackoverflow.com/questions/30476924/ruby-how-to-parse-e-mail-mime-from-the-stdin/30477119#30477119", "title": "Ruby: how to parse e-mail mime from the stdin", "body": "<p><strong>readlines</strong> returns an <em>array</em>... of lines! You might want to try <strong>read</strong> on <strong>ARGF</strong> which is the input provided by $stdin instead.</p>\n\n<pre><code>mail = Mail.new ARGF.read\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-1.9.3/ARGF.html\" rel=\"nofollow\">the relevant documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1432715519, "creation_date": 1432715519, "answer_id": 30477123, "question_id": 30476924, "link": "https://stackoverflow.com/questions/30476924/ruby-how-to-parse-e-mail-mime-from-the-stdin/30477123#30477123", "title": "Ruby: how to parse e-mail mime from the stdin", "body": "<p><code>IO#readlines</code> produces an array. You want a string there:</p>\n\n<pre><code># readmail.rb\nrequire 'mail'\nmail = Mail.new(STDIN.read)\np mail.from\np mail.to\n\n# mail.eml\nFrom: bob@test.lindsaar.net\nTo: mikel@test.lindsaar.net\nSubject: This is an email\n\nThis is the body\n\n# command line\n$ ruby readmail.rb &lt; mail.eml\n# =&gt; [\"bob@test.lindsaar.net\"]\n# =&gt; [\"mikel@test.lindsaar.net\"]\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 3612491, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000907896915/picture?type=large", "display_name": "user3612491", "link": "https://stackoverflow.com/users/3612491/user3612491"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1432719176, "creation_date": 1432714937, "question_id": 30476924, "link": "https://stackoverflow.com/questions/30476924/ruby-how-to-parse-e-mail-mime-from-the-stdin", "title": "Ruby: how to parse e-mail mime from the stdin", "body": "<p>Anyone know how I can parse the E-mail MIME from Ruby when the input is from STDIN? I have found a gem called \"mail\" which looks really nice but so far as I can see it's able to read a mail only from the file:</p>\n\n<pre><code>require 'mail'\nmail = Mail.read('/path/to/message.eml')\n</code></pre>\n\n<p>This is how I'm testing it:</p>\n\n<pre><code># First one is from stdin:\nrequire 'mail'\nmail = Mail.new($stdin.readlines)\np mail.from\np mail.to\n</code></pre>\n\n<p>returns:\nnil\nnil</p>\n\n<pre><code># This one is from the file:\nmail2 = Mail.new(\"my_email.txt\")\np mail2.from\np mail2.to\n</code></pre>\n\n<p>returns:\nnil\nnil</p>\n\n<pre><code># The same file but I'm using Mail.read:\nmail3 = Mail.read(\"my_email.txt\")\np mail3.from\np mail3.to\n</code></pre>\n\n<p>returns:\n[\"test@gmail.com\"]\n[\"test2@gmail.com\"]</p>\n\n<p>STDIN I'm testing like:</p>\n\n<pre><code># cat my_email.txt | ruby code.rb\n</code></pre>\n\n<p>So the method Mail.read works fine with my e-mail, but when I want to put my stdin to the Mail.read I have:</p>\n\n<pre><code>mail/mail.rb:176:in `initialize': no implicit conversion of Array into String (TypeError)\n</code></pre>\n\n<p>I know that I can save that file from stdin to the temp folder and then open it by Mail.read but I don't want to do this in that way since it will be slow.</p>\n\n<p>The full url to the gem is: <a href=\"https://github.com/mikel/mail\" rel=\"nofollow\">https://github.com/mikel/mail</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "base64"], "comments": [{"owner": {"reputation": 1007, "user_id": 3683576, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/90750714d4cbe8c8dececd2e2b0afbbf?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Munsch", "link": "https://stackoverflow.com/users/3683576/guillaume-munsch"}, "edited": false, "score": 3, "creation_date": 1432714934, "post_id": 30476873, "comment_id": 49033161, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/8571501/how-to-check-whether-the-string-is-base64-encoded-or-not\">How to check whether the string is base64 encoded or not</a>"}, {"owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "reply_to_user": {"reputation": 1007, "user_id": 3683576, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/90750714d4cbe8c8dececd2e2b0afbbf?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Munsch", "link": "https://stackoverflow.com/users/3683576/guillaume-munsch"}, "edited": false, "score": 0, "creation_date": 1432715527, "post_id": 30476873, "comment_id": 49033484, "body": "please read the question again i have updated. i have already seen that post"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1432715899, "post_id": 30476873, "comment_id": 49033724, "body": "&quot;but this would be very heavy if the file is big.&quot; Unfortunately, there is no other way to know. Is this sentence valid English skagpoople? You don&#39;t know until you find something in it that tells you it isn&#39;t. This is not the same &quot;encoding&quot; that <code>String#encoding</code> reports - that is character encoding, not file format that you are interested in."}], "answers": [{"comments": [{"owner": {"reputation": 6677, "user_id": 515584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b5061ce187c7a272c053a00968822436?s=128&d=identicon&r=PG", "display_name": "shanet", "link": "https://stackoverflow.com/users/515584/shanet"}, "edited": false, "score": 4, "creation_date": 1542253019, "post_id": 46731971, "comment_id": 93504758, "body": "You may want to use <code>strict_encode64</code> if you have a long string to avoid Ruby from inserting newlines inadvertently. See <a href=\"https://stackoverflow.com/a/2621023/515584\">stackoverflow.com/a/2621023/515584</a> for details."}, {"owner": {"reputation": 1410, "user_id": 2454036, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/746251016e806bec7aaa34b12930d387?s=128&d=identicon&r=PG", "display_name": "Juan Fuentes", "link": "https://stackoverflow.com/users/2454036/juan-fuentes"}, "edited": false, "score": 0, "creation_date": 1590006289, "post_id": 46731971, "comment_id": 109521708, "body": "Using <code>strict_encode64</code> is definitely the right choice"}, {"owner": {"reputation": 3572, "user_id": 770627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f60b4f21d3929d8195bfae6fe8f68694?s=128&d=identicon&r=PG", "display_name": "Albert.Qing", "link": "https://stackoverflow.com/users/770627/albert-qing"}, "edited": false, "score": 0, "creation_date": 1598486496, "post_id": 46731971, "comment_id": 112477899, "body": "<code>Base64.encode64</code> not work, using <code>strict_encode64</code>"}], "tags": [], "owner": {"reputation": 16847, "user_id": 177776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5b92898d3543a8478d925617ecefe0?s=128&d=identicon&r=PG", "display_name": "Mirek Rusin", "link": "https://stackoverflow.com/users/177776/mirek-rusin"}, "is_accepted": true, "score": 6, "last_activity_date": 1613516315, "last_edit_date": 1613516315, "creation_date": 1507904169, "answer_id": 46731971, "question_id": 30476873, "link": "https://stackoverflow.com/questions/30476873/check-if-string-is-base64/46731971#46731971", "title": "check if string is base64", "body": "<p>You can use something like this, not very performant but you are guaranteed not to get false positives:</p>\n<pre><code>require 'base64'\n\ndef base64?(value)\n  value.is_a?(String) &amp;&amp; Base64.strict_encode64(Base64.decode64(value)) == value\nend\n</code></pre>\n<p>The use of <code>strict_encode64</code> versus <code>encode64</code> prevents Ruby from inadvertently inserting newlines if you have a long string. See <a href=\"https://stackoverflow.com/a/2621023/515584\">this post</a> for details.</p>\n"}], "owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6961, "favorite_count": 1, "accepted_answer_id": 46731971, "answer_count": 1, "score": 9, "last_activity_date": 1613516315, "creation_date": 1432714781, "last_edit_date": 1495540742, "question_id": 30476873, "link": "https://stackoverflow.com/questions/30476873/check-if-string-is-base64", "title": "check if string is base64", "body": "<p>i may recieve these two strings:</p>\n\n<pre><code>    base = Base64.encode64(File.open(\"/home/usr/Desktop/test\", \"rb\").read)\n    =&gt; \"YQo=\\n\"\n\n    string = File.open(\"/home/usr/Desktop/test\", \"rb\").read\n    =&gt; \"a\\n\"\n</code></pre>\n\n<p>what i have tried so far is to check string with regular expression i-e. <code>/([A-Za-z0-9+\\/]{4})*([A-Za-z0-9+\\/]{4}|[A-Za-z0-9+\\/]{3}=|[A-Za-z0-9+\\/]{2}==$)/</code> but this would be very heavy if the file is big.</p>\n\n<p>I also have tried <code>base.encoding.name</code> and <code>string.encoding.name</code> but both returns the same.</p>\n\n<p>I have also seen <a href=\"https://stackoverflow.com/questions/8571501/how-to-check-whether-the-string-is-base64-encoded-or-not\">this post</a> and got regular expression solution but any other solution ?</p>\n\n<p>Any idea ? I just want to get is the string is actually text or base64 encoded text....</p>\n"}, {"tags": ["ruby", "vagrant", "vagrantfile"], "answers": [{"comments": [{"owner": {"reputation": 1995, "user_id": 2847264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/64a32bcfd9ea149eeca10a9663536e87?s=128&d=identicon&r=PG&f=1", "display_name": "tehK", "link": "https://stackoverflow.com/users/2847264/tehk"}, "edited": false, "score": 0, "creation_date": 1432720760, "post_id": 30478629, "comment_id": 49037190, "body": "Thanks for your answer.  Unfortunately, I need to do execute a specific method for the optional boxes, so I think I&#39;ll likely need two for-loops anyway. Apart from that I was looking for a solution without the need to use an environment variable (if such a solution exists)"}, {"owner": {"reputation": 5698, "user_id": 270280, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8209c0118ceb99fe4ed98c0c079c0bf?s=128&d=identicon&r=PG", "display_name": "harald", "link": "https://stackoverflow.com/users/270280/harald"}, "reply_to_user": {"reputation": 1995, "user_id": 2847264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/64a32bcfd9ea149eeca10a9663536e87?s=128&d=identicon&r=PG&f=1", "display_name": "tehK", "link": "https://stackoverflow.com/users/2847264/tehk"}, "edited": false, "score": 0, "creation_date": 1432724184, "post_id": 30478629, "comment_id": 49039485, "body": "The <code>optional_boxes</code> list will still be there if you want to iterate over it too. Don&#39;t think there&#39;s a way to pass custom command line args that you can check in the vagrantfile."}], "tags": [], "owner": {"reputation": 5698, "user_id": 270280, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8209c0118ceb99fe4ed98c0c079c0bf?s=128&d=identicon&r=PG", "display_name": "harald", "link": "https://stackoverflow.com/users/270280/harald"}, "is_accepted": false, "score": 0, "last_activity_date": 1432719522, "creation_date": 1432719522, "answer_id": 30478629, "question_id": 30476785, "link": "https://stackoverflow.com/questions/30476785/how-to-make-virtual-boxes-in-vagrant-optional/30478629#30478629", "title": "How to make virtual boxes in Vagrant optional?", "body": "<p>You should be able to something like this:</p>\n\n<pre><code>boxes += optional_boxes if ENV['START_OPTIONAL_BOXES']\n\nboxes.each |box| do\n  # start box here\nend\n</code></pre>\n\n<p>That way you will merge both lists into one if the <code>START_OPTIONAL_BOXES</code> env var is set, and only start the mandatory boxes if not.</p>\n"}, {"comments": [{"owner": {"reputation": 1995, "user_id": 2847264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/64a32bcfd9ea149eeca10a9663536e87?s=128&d=identicon&r=PG&f=1", "display_name": "tehK", "link": "https://stackoverflow.com/users/2847264/tehk"}, "edited": false, "score": 0, "creation_date": 1432800469, "post_id": 30486575, "comment_id": 49077554, "body": "That would be amazing. I&#39;m trying <code>vagrant up without-optional-boxes</code> and indeed I can print out the whole ARGV array and see each parameter.   Unfortunately all I get is &quot;The machine with the name &#39;without-optional-boxes&#39; was not found configured for this Vagrant environment.&quot; So while the parameters are parsed somehow, Vagrant tries to use them as machine names. Am I missing something?"}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 1995, "user_id": 2847264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/64a32bcfd9ea149eeca10a9663536e87?s=128&d=identicon&r=PG&f=1", "display_name": "tehK", "link": "https://stackoverflow.com/users/2847264/tehk"}, "edited": false, "score": 0, "creation_date": 1432822602, "post_id": 30486575, "comment_id": 49093772, "body": "@tehK hmm didn&#39;t thought vagrant is so strict about arguments, will look further later, maybe it&#39;s possible to add a plugin that would make unknown arguments legitimate."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 1995, "user_id": 2847264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/64a32bcfd9ea149eeca10a9663536e87?s=128&d=identicon&r=PG&f=1", "display_name": "tehK", "link": "https://stackoverflow.com/users/2847264/tehk"}, "edited": false, "score": 0, "creation_date": 1432949931, "post_id": 30486575, "comment_id": 49155862, "body": "@tehK updated my answer, seems to be working solution. (Also note there is <a href=\"https://github.com/gosuri/vagrant-env\" rel=\"nofollow noreferrer\">vagrant-env</a> plugin available, which loads evironment variables from <code>.env</code> file, which may be handy in some cases too.)"}, {"owner": {"reputation": 1995, "user_id": 2847264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/64a32bcfd9ea149eeca10a9663536e87?s=128&d=identicon&r=PG&f=1", "display_name": "tehK", "link": "https://stackoverflow.com/users/2847264/tehk"}, "edited": false, "score": 0, "creation_date": 1433154060, "post_id": 30486575, "comment_id": 49212151, "body": "Awesome, this works like a charm. Thanks a lot for that!"}], "tags": [], "owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "is_accepted": true, "score": 2, "last_activity_date": 1432950063, "last_edit_date": 1432950063, "creation_date": 1432739792, "answer_id": 30486575, "question_id": 30476785, "link": "https://stackoverflow.com/questions/30476785/how-to-make-virtual-boxes-in-vagrant-optional/30486575#30486575", "title": "How to make virtual boxes in Vagrant optional?", "body": "<h2>updated answer</h2>\n\n<p>Played a little bit with vagrant, was almost writing a plugin, but found out in its source that it actually not so strict on its arguments if they go before command and prepended with dash or double dash(to differ from command).</p>\n\n<p>So you need to call it as follows:</p>\n\n<pre><code>$ vagrant --without-optional-boxes up\n\n# or, works too: #\n\n$ vagrant -without-optional-boxes up\n</code></pre>\n\n<p>And now it will not bark on unknown argument while you are still able to get it from <code>ARGV</code>:</p>\n\n<pre><code>boxes += optional_boxes unless (ARGV[0] == \"--without-optional-boxes\")\n</code></pre>\n"}], "owner": {"reputation": 1995, "user_id": 2847264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/64a32bcfd9ea149eeca10a9663536e87?s=128&d=identicon&r=PG&f=1", "display_name": "tehK", "link": "https://stackoverflow.com/users/2847264/tehk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 30486575, "answer_count": 2, "score": 1, "last_activity_date": 1432950063, "creation_date": 1432714502, "last_edit_date": 1432716001, "question_id": 30476785, "link": "https://stackoverflow.com/questions/30476785/how-to-make-virtual-boxes-in-vagrant-optional", "title": "How to make virtual boxes in Vagrant optional?", "body": "<p>i got a small problem with Vagrant. <br />\nIn the Vagrant file, we defined a list of several virtual boxes that basically use the same configuration and are set up by vagrant:</p>\n\n<pre><code>boxes = [\n{\n  :name =&gt; \"box1\",\n  :vmnumber =&gt; \"1\",\n  :mem =&gt; \"256\",\n  :cpu =&gt; \"1\"\n},\n{\n  :name =&gt; \"box2\",\n  :vmnumber =&gt; \"6\",\n  :mem =&gt; \"256\",\n  :cpu =&gt; \"1\"\n},\n...\n]\n</code></pre>\n\n<p>... and in the same format a second list called <code>boxes_optional</code>. When calling <code>vagrant up</code>, for example, vagrant loops both lists and starts the VMs. So far, so good. </p>\n\n<p>My problem is that I want to give the user the option to <strong>not</strong> start the boxes in <code>boxes_optional</code>. As far as I know you can't add more parameters to the <code>vagrant up</code> command and you can only query environment variables via <code>ENV[variable]</code>, but that's kind of inconvenient. </p>\n\n<p>Is there mybe another more elegant way of making those boxes optional? I'm quite new to Vagrant and Ruby and I haven't been able to google a nice solution, so I'm basically looking for ideas here. </p>\n\n<p>Thanks and best regards,</p>\n\n<p>/tehK</p>\n"}, {"tags": ["ruby", "rspec", "rspec-rails", "rspec3"], "answers": [{"comments": [{"owner": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 0, "creation_date": 1432715718, "post_id": 30476810, "comment_id": 49033599, "body": "Unfortunately that doesn&#39;t work since it&#39;s no hash but a Object. I will clarify the question"}, {"owner": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 0, "creation_date": 1432715841, "post_id": 30476810, "comment_id": 49033683, "body": "I also can&#39;t check for equality of the matching object since the object is constructed inside the class and I don&#39;t want to break visibility rules."}, {"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "reply_to_user": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 0, "creation_date": 1432716236, "post_id": 30476810, "comment_id": 49033906, "body": "In that case  &quot;expect(changes).to be_include { |x| x.key == &#39;name&#39; &amp;&amp; value == &#39;test&#39; }&quot; would do the job"}, {"owner": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 0, "creation_date": 1432725284, "post_id": 30476810, "comment_id": 49040274, "body": "<code>be_include</code> throws an argument error but you pointed me in the right direction. <code>be_any { |x| .. }</code> solved the issue for me. Please update the answer so I can mark it as accepted"}], "tags": [], "owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1432725445, "last_edit_date": 1432725445, "creation_date": 1432714571, "answer_id": 30476810, "question_id": 30476624, "link": "https://stackoverflow.com/questions/30476624/rspec-matcher-that-checks-collection-to-include-item-that-satisfies-lambda/30476810#30476810", "title": "RSpec matcher that checks collection to include item that satisfies lambda", "body": "<p>Try this</p>\n\n<pre><code>expect(changes).to be_any{ |x| //logic to match }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 0, "creation_date": 1432798641, "post_id": 30489073, "comment_id": 49076441, "body": "That&#39;s excellent. I didn&#39;t know about <code>an_object_having_attributes</code>. Thank you!"}, {"owner": {"reputation": 20292, "user_id": 29262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?s=128&d=identicon&r=PG", "display_name": "Myron Marston", "link": "https://stackoverflow.com/users/29262/myron-marston"}, "reply_to_user": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 1, "creation_date": 1432800371, "post_id": 30489073, "comment_id": 49077488, "body": "It&#39;s an alias of <code>have_attributes</code>, a new matcher introduced in RSpec 3.1: <a href=\"http://rspec.info/blog/2014/09/rspec-3-1-has-been-released/#expectations-new-haveattributes-matcher\" rel=\"nofollow noreferrer\">rspec.info/blog/2014/09/rspec-3-1-has-been-released/&hellip;</a>"}], "tags": [], "owner": {"reputation": 20292, "user_id": 29262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?s=128&d=identicon&r=PG", "display_name": "Myron Marston", "link": "https://stackoverflow.com/users/29262/myron-marston"}, "is_accepted": true, "score": 5, "last_activity_date": 1432746818, "creation_date": 1432746818, "answer_id": 30489073, "question_id": 30476624, "link": "https://stackoverflow.com/questions/30476624/rspec-matcher-that-checks-collection-to-include-item-that-satisfies-lambda/30489073#30489073", "title": "RSpec matcher that checks collection to include item that satisfies lambda", "body": "<p>In RSpec 3, <a href=\"http://rspec.info/blog/2014/01/new-in-rspec-3-composable-matchers/\" rel=\"noreferrer\">matchers are fully composable</a>, which means you can pass any object which implements Ruby's <code>===</code> protocol (including a matcher!) to <code>include</code> and it will work properly.  Lambdas in Ruby 1.9 implement the <code>===</code> protocol, which means you can do this:</p>\n\n<pre><code>expect(changes).to include(lambda { |x| x.key == 'name' &amp;&amp; value == 'test' })\n</code></pre>\n\n<p>That said, that's not going to give you a great failure message (since RSpec has no way to generate a description of the lambda).  I'm not sure where <code>value</code> comes from in your example, but if it is intended to be <code>x.value</code>, you could use the <code>have_attributes</code> (or <code>an_object_having_attributes</code> for better readability) matcher:</p>\n\n<pre><code>expect(changes).to include an_object_having_attributes(key: 'name', value: 'test')\n</code></pre>\n"}], "owner": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 30489073, "answer_count": 2, "score": 2, "last_activity_date": 1432798607, "creation_date": 1432714025, "last_edit_date": 1432798607, "question_id": 30476624, "link": "https://stackoverflow.com/questions/30476624/rspec-matcher-that-checks-collection-to-include-item-that-satisfies-lambda", "title": "RSpec matcher that checks collection to include item that satisfies lambda", "body": "<p>I am a bit at a loss as to how to write a RSpec 3.2.x spec that checks wether a list contains at least one item that satisfies a condition.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>model = Invoice.new\nmodel.name = 'test'\nchanges = model.changes\nexpect(changes).to include { |x| x.key == 'name' &amp;&amp; x.value == 'test' }\n</code></pre>\n\n<p>There will be other (automated) changes in the changes list too so I don't want to verify that there is only one specific change and I also don't want to rely on ordering <code>expect(changes.first)...</code> so I basically need a way to specify that at least one change in the list satisfies the condition.</p>\n\n<p>I could do something like this:</p>\n\n<pre><code>result = changes.any? { |x| x.key == 'name' .. }\nexpect(result).to eq(true)\n</code></pre>\n\n<p>But then the rspec failure would not give me any meaningful output so I thought there must be a built-in way to match this.</p>\n\n<p>Any other suggestions on how to structure the test are also welcome.</p>\n\n<p>Edit: To be clear - the changes are a list of ChangeObject so I need to access their <code>.key</code> and <code>.value</code> method</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3.2", "pdfkit"], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432716667, "post_id": 30477397, "comment_id": 49034210, "body": "@ sufinsha : But after editing your code this error had gone but when i am trying to generate pdf file it is throwing the error which has posted in question as error-2."}, {"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432785389, "post_id": 30477397, "comment_id": 49070888, "body": "@ sufinsha : I updated your latest code again the same error as error-2 in post.Let me to make you confirm i am using windows system."}, {"owner": {"reputation": 697, "user_id": 1682293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0caa4864d04632fa954d50d416002d6?s=128&d=identicon&r=PG", "display_name": "sufinsha", "link": "https://stackoverflow.com/users/1682293/sufinsha"}, "reply_to_user": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432786215, "post_id": 30477397, "comment_id": 49071082, "body": "@rajat_474 Can you please mention ruby version, rails version and wickedpdf version?"}, {"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432786358, "post_id": 30477397, "comment_id": 49071116, "body": "@ sufinsha : Ruby version 1.9.3,Rails version 3.2.19 and wicked_pdf version i have not mentioned simple added gem &#39;wicked_pdf&#39;."}, {"owner": {"reputation": 697, "user_id": 1682293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0caa4864d04632fa954d50d416002d6?s=128&d=identicon&r=PG", "display_name": "sufinsha", "link": "https://stackoverflow.com/users/1682293/sufinsha"}, "reply_to_user": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432786501, "post_id": 30477397, "comment_id": 49071144, "body": "@rajat_474 Please check Gemfile.lock for the wicked_pdf version?"}, {"owner": {"reputation": 697, "user_id": 1682293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0caa4864d04632fa954d50d416002d6?s=128&d=identicon&r=PG", "display_name": "sufinsha", "link": "https://stackoverflow.com/users/1682293/sufinsha"}, "reply_to_user": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1432786605, "post_id": 30477397, "comment_id": 49071170, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/78967/discussion-between-sufinsha-and-rajat-474\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 697, "user_id": 1682293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0caa4864d04632fa954d50d416002d6?s=128&d=identicon&r=PG", "display_name": "sufinsha", "link": "https://stackoverflow.com/users/1682293/sufinsha"}, "is_accepted": true, "score": 2, "last_activity_date": 1432788828, "last_edit_date": 1432788828, "creation_date": 1432716318, "answer_id": 30477397, "question_id": 30476571, "link": "https://stackoverflow.com/questions/30476571/getting-wrong-number-argument-error-using-rails/30477397#30477397", "title": "getting wrong number argument error using Rails", "body": "<p>Assuming, you are trying to download the pdf file.</p>\n\n<p>see the code below:</p>\n\n<pre><code>#users_controller.rb:\nclass UsersController &lt; ApplicationController\n  def download_pdf\n    pdf = render_to_string(pdf: \"test.pdf\", template:  \"users/test.html.erb\", encoding: \"UTF-8\")\n    send_data pdf\n  end\nend\n\n# Gemfile\n\nsource 'https://rubygems.org'\n\ngem 'rails', '3.2.19'\n\ngem 'sqlite3'\ngroup :assets do\n  gem 'sass-rails',   '~&gt; 3.2.3'\n  gem 'coffee-rails', '~&gt; 3.2.1'\n\n  gem 'uglifier', '&gt;= 1.0.3'\nend\n\ngem 'jquery-rails'\n\ngem 'wicked_pdf', :github =&gt; 'mileszs/wicked_pdf', :branch =&gt; 'master'\n</code></pre>\n\n<p>Please check if it works.</p>\n"}], "owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 30477397, "answer_count": 1, "score": 0, "last_activity_date": 1432788828, "creation_date": 1432713895, "last_edit_date": 1432786674, "question_id": 30476571, "link": "https://stackoverflow.com/questions/30476571/getting-wrong-number-argument-error-using-rails", "title": "getting wrong number argument error using Rails", "body": "<p>Hi i am getting the following errors while using wicked_pdf gem in Rails3.</p>\n\n<blockquote>\n  <p>error:</p>\n</blockquote>\n\n<pre><code>ArgumentError in UsersController#download_pdf\n\nwrong number of arguments (0 for 1)\nRails.root: C:/Site/generate4\n\nApplication Trace | Framework Trace | Full Trace\napp/controllers/users_controller.rb:6:in `download_pdf'\n</code></pre>\n\n<p>After clicking on download pdf link the following error is coming.</p>\n\n<blockquote>\n  <p>error-2:</p>\n</blockquote>\n\n<pre><code>RuntimeError in UsersController#download_pdf\n\nError: Failed to execute:\n[\"C:/Program Files/wkhtmltopdf/bin/wkhtmltopdf.exe\", \"--encoding\", \"UTF-8\", \"file://C:/DOCUME~1/SUBHRA~1/LOCALS~1/Temp/wicked_pdf20150527-1192-1qf0ac.html\", \"C:/DOCUME~1/SUBHRA~1/LOCALS~1/Temp/wicked_pdf_generated_file20150527-1192-fijfxt.pdf\"]\nError: PDF could not be generated!\n Command Error: Loading pages (1/6)\n[&gt;                                                           ] 0%\n[======&gt;                                                     ] 10%\nError: Failed loading page file://c/DOCUME~1/SUBHRA~1/LOCALS~1/Temp/wicked_pdf20150527-1192-1qf0ac.html (sometimes it will work just to ignore this error with --load-error-handling ignore)\nExit with code 1 due to network error: ContentNotFoundError\n</code></pre>\n\n<p>Please check my code below.</p>\n\n<blockquote>\n  <p>users_controller.rb:</p>\n</blockquote>\n\n<pre><code>class UsersController &lt; ApplicationController\n    def index\n\n    end\n    def download_pdf\n        pdf=WickedPdf.new.pdf_from_string(\n         render_to_string pdf: \"test.pdf\", template: \"users/test.html.erb\", encoding: \"UTF-8\")\n\n        @save_path = 'C:\\Site\\download_pdf.pdf'\n    end\nend\n</code></pre>\n\n<blockquote>\n  <p>users/test.html.erb:</p>\n</blockquote>\n\n<pre><code>&lt;h1&gt;Hello rails&lt;/h1&gt;\n</code></pre>\n\n<blockquote>\n  <p>wicked_pdf.rb:</p>\n</blockquote>\n\n<pre><code>WickedPdf.config = {\n  #:wkhtmltopdf =&gt; '/usr/local/bin/wkhtmltopdf',\n  #:layout =&gt; \"pdf.html\",\n  :exe_path =&gt; 'C:/Program Files/wkhtmltopdf/bin/wkhtmltopdf.exe'\n}\n</code></pre>\n\n<blockquote>\n  <p>Gemfile:</p>\n</blockquote>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '3.2.19'\n\ngem 'sqlite3'\ngroup :assets do\n  gem 'sass-rails',   '~&gt; 3.2.3'\n  gem 'coffee-rails', '~&gt; 3.2.1'\n\n  gem 'uglifier', '&gt;= 1.0.3'\nend\n\ngem 'jquery-rails'\n\ngem 'wicked_pdf'\n</code></pre>\n\n<p>My requirement is convert HTML to PDF using Rails 3.Please help me to resolve this error and successfully get the PDF file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "installation"], "comments": [{"owner": {"reputation": 3694, "user_id": 3374591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24276eb856ed7cbcb5f02d6bacf29ca1?s=128&d=identicon&r=PG", "display_name": "Arnon Zilca", "link": "https://stackoverflow.com/users/3374591/arnon-zilca"}, "edited": false, "score": 0, "creation_date": 1432713658, "post_id": 30476467, "comment_id": 49032368, "body": "<a href=\"http://ss64.com/bash/chmod.html\" rel=\"nofollow noreferrer\">chmod</a>?"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1432713684, "post_id": 30476467, "comment_id": 49032391, "body": "You could use <code>rvm</code> or just run <code>sudo chown ... </code> to Gems directory, or <code>chmod ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 110, "user_id": 6211459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WwAF.jpg?s=128&g=1", "display_name": "lut", "link": "https://stackoverflow.com/users/6211459/lut"}, "edited": false, "score": 0, "creation_date": 1538651870, "post_id": 30476642, "comment_id": 92222737, "body": "It&#39;s generally a bad idea to use <code>chmod 777</code>, especially on the directory where third parties code will be stored (in case of @JoshZandman it&#39;s a ruby gems directory).  You should better consider using at least 755 (full permissions for the owner and read and execute permission for others) or <code>chown user:group</code> on that directory."}], "tags": [], "owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1432714063, "creation_date": 1432714063, "answer_id": 30476642, "question_id": 30476467, "link": "https://stackoverflow.com/questions/30476467/how-to-grant-a-folder-with-write-permissions-for-installing-gems-in-ruby/30476642#30476642", "title": "How to grant a folder with write permissions for installing gems in Ruby", "body": "<pre><code>sudo chmod 777 directory_name\n</code></pre>\n\n<p>It grants all permissions to the user.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4536120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1664, "favorite_count": 0, "accepted_answer_id": 30476642, "answer_count": 1, "score": 1, "last_activity_date": 1432714063, "creation_date": 1432713554, "question_id": 30476467, "link": "https://stackoverflow.com/questions/30476467/how-to-grant-a-folder-with-write-permissions-for-installing-gems-in-ruby", "title": "How to grant a folder with write permissions for installing gems in Ruby", "body": "<p>the biggest problem I have with installing anything on my computer related to Ruby and Rails, is not having 'write' permissions to a specific folder.</p>\n\n<p><strong>For example:</strong> \"You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory\"</p>\n\n<p>Instead of always using Sudo command, which sometimes doesn't solve the problem, how can I give myself 'write' permissions?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432714214, "post_id": 30476389, "comment_id": 49032694, "body": "You can create <code>app&#47;assets&#47;javascripts&#47;application.js</code> file and Rails 4 should automatically pick it up. Then you need to write this: <code>&#47;&#47;= require jquery</code> in your file after adding jquery-rails gem in your Gemfile and running <code>bundle install</code>. Did you do that before asking this question?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432714599, "post_id": 30476389, "comment_id": 49032932, "body": "Hi no I haven&#39;t done this. I wanted to know what the advanteges are when I use the gem instead of putting jquery.js in public folder"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432714735, "post_id": 30476389, "comment_id": 49033027, "body": "There&#39;s no advantage, it&#39;s a matter of preference. Sure, you can download the jquery file and put it in <code>app&#47;assets&#47;javascripts&#47;jquery-2.1.4.min.js</code> and then in application.js: <code>&#47;&#47;= require jquery-2.1.4.min</code>."}, {"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "edited": false, "score": 0, "creation_date": 1432714829, "post_id": 30476389, "comment_id": 49033091, "body": "@Felix better you should put the jquery-2.1.4.min.js in vendor folder. Third party libraries should be inside of vendor directory"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "reply_to_user": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "edited": false, "score": 1, "creation_date": 1432719008, "post_id": 30476389, "comment_id": 49035862, "body": "@kamesh : Rails 4 has deprecated and discourage the usage of vendor directory."}, {"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432719065, "post_id": 30476389, "comment_id": 49035908, "body": "@Surya Thanks for informing"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 1, "creation_date": 1443290092, "post_id": 30476389, "comment_id": 53437775, "body": "the advantage of a gem is that you can manage updates like you do with all other gems."}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443284695, "creation_date": 1432713350, "last_edit_date": 1443284695, "question_id": 30476389, "link": "https://stackoverflow.com/questions/30476389/rails-application-and-jquery-use-cases", "title": "Rails application and jQuery use-cases?", "body": "<p>I've got a Rails (4.2.1) application which is using scriptaculous and prototype ... </p>\n\n<p>Now I want to migrate to Jquery ... what would be the best way?</p>\n\n<p>using this gem: <a href=\"https://github.com/rails/jquery-rails\" rel=\"nofollow\">https://github.com/rails/jquery-rails</a></p>\n\n<p>or adding the sources in public folder?</p>\n\n<p>When using the gem ... how do I use it? I haven't got this </p>\n\n<pre><code>app/assets/javascripts/application.js\n</code></pre>\n\n<p>like it's mentioned in installation guide? ... </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432714357, "post_id": 30476295, "comment_id": 49032785, "body": "What do you mean by sequence? Do you only care about the year, or do you also want it to flag when the month/day change?"}], "answers": [{"comments": [{"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 1, "creation_date": 1432716900, "post_id": 30476859, "comment_id": 49034363, "body": "Actually, this returns 1 and 4. I believe you have a fencepost / one-off error in your loop - for the first array element, arr[idx-1] = arr[-1]; this wraps around and accesses the last array element."}, {"owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "reply_to_user": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1432718427, "post_id": 30476859, "comment_id": 49035405, "body": "Ahh duh. For some reason i thought doing the shift on the array beforehand would remedy that, but of course it was still taking the -1 of the new array. Thanks for the feedabck. Fixing."}, {"owner": {"reputation": 25, "user_id": 3911191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425758897b8f48b492e482231aac8047?s=128&d=identicon&r=PG&f=1", "display_name": "c.nj", "link": "https://stackoverflow.com/users/3911191/c-nj"}, "edited": false, "score": 0, "creation_date": 1432719599, "post_id": 30476859, "comment_id": 49036318, "body": "Thanks a lot. Works perfectly!"}], "tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": true, "score": 0, "last_activity_date": 1432718545, "last_edit_date": 1432718545, "creation_date": 1432714759, "answer_id": 30476859, "question_id": 30476295, "link": "https://stackoverflow.com/questions/30476295/how-to-spot-a-change-in-a-date-sequence/30476859#30476859", "title": "How to spot a change in a date sequence?", "body": "<p>A method can be written, which returns an array of indexes where the sequence breaks (regresses to an older year and breaks the ascending order):</p>\n\n<pre><code>def sequence_break_points(arr)\n  change_points = []\n  arr.each_with_index do |e, idx|\n    next if idx == 0\n    change_points &lt;&lt; idx if (e &lt; arr[idx-1])\n  end\n  change_points\nend\n</code></pre>\n\n<p>In this case you can use the method as follows:</p>\n\n<pre><code>arr = [\"2005-12-31\",\"2006-12-31\",\"2007-12-31\",\"2008-12-31\",\"2006-12-31\",\"2007-12-31\"]\nyears_arr = arr.map { |date| date.split(\"-\").first.to_i }\n\nsequence_break_points(years_arr)\n=&gt; [4]\n# This is the point in the array where the sequence broke.\n# The results of this method can be used to tell the script\n# when to start a new line\n</code></pre>\n\n<p>I'm sure there's better ways of doing this, but I believe this will get the job done.</p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 25, "user_id": 3911191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425758897b8f48b492e482231aac8047?s=128&d=identicon&r=PG&f=1", "display_name": "c.nj", "link": "https://stackoverflow.com/users/3911191/c-nj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 30476859, "answer_count": 1, "score": 1, "last_activity_date": 1432718545, "creation_date": 1432713098, "question_id": 30476295, "link": "https://stackoverflow.com/questions/30476295/how-to-spot-a-change-in-a-date-sequence", "title": "How to spot a change in a date sequence?", "body": "<p>I'd like to know if there's a way to find the value where a sequence of dates switches.</p>\n\n<p>For example, I have an array like this:</p>\n\n<p>[\"2005-12-31\",\"2006-12-31\",\"2007-12-31\",\"2008-12-31\",\"2006-12-31\",\"2007-12-31\"]</p>\n\n<p>The dates all move from 2005 to 2007 before switching to 2006 and then starting again. I need to start writing to a new line when this happens but just can't figure out a way to monitor it and tell my script to move to a new line at this point.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web", "nginx"], "comments": [{"owner": {"reputation": 821, "user_id": 685547, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f8f79142af64b6fb759f11c22fcf73ca?s=128&d=identicon&r=PG", "display_name": "Stugal", "link": "https://stackoverflow.com/users/685547/stugal"}, "edited": false, "score": 1, "creation_date": 1432712532, "post_id": 30475733, "comment_id": 49031671, "body": "can you show nginx config? do you have upstream server defined in  the config?"}, {"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "reply_to_user": {"reputation": 821, "user_id": 685547, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f8f79142af64b6fb759f11c22fcf73ca?s=128&d=identicon&r=PG", "display_name": "Stugal", "link": "https://stackoverflow.com/users/685547/stugal"}, "edited": false, "score": 0, "creation_date": 1432770655, "post_id": 30475733, "comment_id": 49067545, "body": "@Stugal - I edited my post to include my <code>ngingx</code> config files. I do have <code>updatream</code> defined, it points to the <code>unicorn</code> socket connected to my rails app <code>my_app</code>. Thanks!"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432770546, "creation_date": 1432711384, "last_edit_date": 1432770546, "question_id": 30475733, "link": "https://stackoverflow.com/questions/30475733/domain-name-rejected-by-nginx", "title": "Domain name rejected by nginx", "body": "<p>I have a server running a very simple rails app. It has <code>nginx</code> set up to listen on port <code>80</code>, which further forwards the request to a <code>unicorn</code> socket file under <code>(Rails.root)/tmp/unicorn.sock</code>. </p>\n\n<p>I bought a domain name from domain.com and pointed it to my server's address=.</p>\n\n<p>e.g. </p>\n\n<pre><code>Domain: mydomain.com -&gt; Server: 110.56.45.12\n</code></pre>\n\n<p>Everything works great when I hit the server directly, by either visiting <code>110.56.45.12</code> in my browser or <code>ssh</code>-ing into the box and running <code>curl 127.0.0.1</code>. I assume this is because both these actions hit port <code>80</code> and <code>nginx</code> serves back the correct content.</p>\n\n<p>However when I try to use the public domain name <code>domain.com</code> or I try <code>curl localhost</code> I get the classic \"We're sorry, but something went wrong.\" rails page.</p>\n\n<p>I checked the rails <code>production</code> log and there is nothing there. I then checked <code>nginx</code> error log at <code>/var/log/nginx/error.log</code> and only got </p>\n\n<pre><code>2015/05/27 07:01:24 [error] 20041#0: *143 connect() to unix:/home/jeeves/my_app/tmp/unicorn.sock failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: mydomain.com, request: \"GET / HTTP/1.1\", upstream: \"http://unix:/home/jeeves/my_app/tmp/unicorn.sock:/\", host: \"localhost\"\n</code></pre>\n\n<p>Is there any reason my server is rejecting that connection?</p>\n\n<p>Thanks!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here's my <code>nginx.conf</code> file</p>\n\n<pre><code>user  jeeves;\nworker_processes  1;\n\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n\n    ##\n    # Basic Settings\n    ##\n\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay off;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    ##\n    # Logging Settings\n    ##\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n    error_log /var/log/nginx/error.log;\n\n    ##\n    # Gzip Settings\n    ##\n\n    gzip on;\n    gzip_disable \"msie6\";\n    gzip_http_version 1.1;\n    gzip_proxied any;\n    gzip_min_length 500;\n    gzip_types text/plain text/xml text/css\n      text/comma-separated-values text/javascript\n      application/x-javascript application/atom+xml;\n\n    ##\n    # Unicorn Rails\n    ##\n\n    upstream unicorn {  \n      server unix:/home/jeeves/my_app/tmp/unicorn.sock fail_timeout=0;\n    }\n\n    ##\n    # Includes\n    ##\n\n    include /etc/nginx/sites-enabled/*;\n}\n</code></pre>\n\n<p>The last line includes everything in the <code>sites-enabled</code> directory, which is only one file - <code>mydomain.com</code></p>\n\n<pre><code>server {\n  listen 80;\n  server_name mydomain.com; # Replace this with your site's domain.\n\n  keepalive_timeout 300;\n\n  client_max_body_size 4G;\n\n  # Set this to the public folder location of your Rails application.\n  root /home/jeeves/my_app/public; \n\n  try_files $uri/index.html $uri.html $uri @unicorn;\n\n  location @unicorn {\n          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n          proxy_set_header Host $http_host;\n          proxy_set_header X-Forwarded_Proto $scheme;\n          proxy_redirect off;\n          # This passes requests to unicorn, as defined in /etc/nginx/nginx.conf\n          proxy_pass http://unicorn;\n          proxy_read_timeout 300s;\n          proxy_send_timeout 300s;\n  }\n\n  # You can override error pages by redirecting the requests to a file in your\n  # application's public folder, if you so desire:\n  error_page 500 502 503 504 /500.html;\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "heroku", "sqlite"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1432711875, "post_id": 30475707, "comment_id": 49031262, "body": "sqlite is not supported by heroku"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 3468521, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9459431de078b6e6a4db518a74dd80f5?s=128&d=identicon&r=PG&f=1", "display_name": "bitfrost41", "link": "https://stackoverflow.com/users/3468521/bitfrost41"}, "edited": false, "score": 0, "creation_date": 1432712558, "post_id": 30475965, "comment_id": 49031692, "body": "Cool. But can I switch from SQLite3 to PostgreSQL now? I still don&#39;t have data in it. Just several tables I always clean up. I&#39;m using RubyMine and initialized my app to have SQLite3."}, {"owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "reply_to_user": {"reputation": 119, "user_id": 3468521, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9459431de078b6e6a4db518a74dd80f5?s=128&d=identicon&r=PG&f=1", "display_name": "bitfrost41", "link": "https://stackoverflow.com/users/3468521/bitfrost41"}, "edited": false, "score": 0, "creation_date": 1432713482, "post_id": 30475965, "comment_id": 49032251, "body": "You can definitely switch over. You would have to install PostgreSQL on your local machine and modify your config/database.yml adapters to use postgres. If you want to keep using SQLite, I have updated my answer with another option."}, {"owner": {"reputation": 119, "user_id": 3468521, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9459431de078b6e6a4db518a74dd80f5?s=128&d=identicon&r=PG&f=1", "display_name": "bitfrost41", "link": "https://stackoverflow.com/users/3468521/bitfrost41"}, "edited": false, "score": 0, "creation_date": 1432714417, "post_id": 30475965, "comment_id": 49032814, "body": "No, man. Will be switching now so that on both development and production I&#39;ll have a common database. I&#39;ll follow what the instructions on the link you gave (<a href=\"https://devcenter.heroku.com/articles/sqlite3\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/sqlite3</a>) on switching. Really helpful! Thank you!"}, {"owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "reply_to_user": {"reputation": 119, "user_id": 3468521, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9459431de078b6e6a4db518a74dd80f5?s=128&d=identicon&r=PG&f=1", "display_name": "bitfrost41", "link": "https://stackoverflow.com/users/3468521/bitfrost41"}, "edited": false, "score": 0, "creation_date": 1432715896, "post_id": 30475965, "comment_id": 49033721, "body": "Yeah it&#39;s def a good idea for your dev/production environments to be as close to each other as possible. Glad it was helpful!"}], "tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": true, "score": 1, "last_activity_date": 1432713431, "last_edit_date": 1592644375, "creation_date": 1432712023, "answer_id": 30475965, "question_id": 30475707, "link": "https://stackoverflow.com/questions/30475707/rails-angular-sqlite3-deployment/30475965#30475965", "title": "Rails + Angular + sqlite3 Deployment", "body": "<p>If you are using Rails to serve the API to the Angular-powered frontend in your app, there shouldn't be a problem with Heroku hosting your app. Here is a <a href=\"https://young-fortress-5170.herokuapp.com/posts\" rel=\"nofollow noreferrer\">live example</a> of an Angular/Rails app being hosted on Heroku.</p>\n<p><strong>However</strong>, Heroku does not support SQLite.</p>\n<blockquote>\n<p>While easy to use, SQLite is not intended as a production grade database. Instead Heroku provides production grade PostgreSQL databases as a service.</p>\n<p><a href=\"https://devcenter.heroku.com/articles/sqlite3\" rel=\"nofollow noreferrer\">- SQLite on Heroku</a></p>\n</blockquote>\n<p>The article above shows you how to configure your app from using SQLite to Postgres, which Heroku supports.</p>\n<hr />\n<p><strong>Note:</strong> It's <em>always</em> a good idea to have the same database setup for both your development and production environments. However, if you're starting out and building a very simple application, and want to quickly get started with Heroku, there's another option below:</p>\n<p>If you want to continue using SQLite3 in development, you can leave your <code>sqlite3</code> gem in your <code>:development</code> group, and add the <code>pg</code> gem to the <code>:production</code> group in the app's Gemfile:</p>\n<pre><code>group :development do\n  gem 'sqlite3'\n  ...\nend\n\ngroup :production do \n  gem 'pg'\n  gem 'rails_12factor'\n  ...\nend\n</code></pre>\n<p>And then set up your <code>config/database.yml</code> file accordingly (sqlite for development/test, postgres in production):</p>\n<pre><code>development:\n  adapter: sqlite3\n  database: db/development.sqlite3\n  pool: 5\n  timeout: 5000\n\nproduction:\n  adapter: postgres\n  pool: 5\n  timeout: 5000\n</code></pre>\n<p>This way you wouldn't need to install/configure Postgres locally if you only want to make a simple application to host on Heroku.</p>\n<p>Hope this helped!</p>\n"}], "owner": {"reputation": 119, "user_id": 3468521, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9459431de078b6e6a4db518a74dd80f5?s=128&d=identicon&r=PG&f=1", "display_name": "bitfrost41", "link": "https://stackoverflow.com/users/3468521/bitfrost41"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 30475965, "answer_count": 1, "score": 1, "last_activity_date": 1432713431, "creation_date": 1432711310, "question_id": 30475707, "link": "https://stackoverflow.com/questions/30475707/rails-angular-sqlite3-deployment", "title": "Rails + Angular + sqlite3 Deployment", "body": "<p>I'm a beginner for this and currently finding a free web host and has a couple of questions. </p>\n\n<ul>\n<li>Will <strong>Heroku</strong> be able to handle all of this: <strong>AngularJS</strong>, <strong>Ruby on Rails</strong>, and <strong>sqlite3</strong>?</li>\n<li>What are other good free web hosts? This is just for a personal portfolio/blog. </li>\n</ul>\n\n<p>I'm seeing several tutorials in the internet and just like to have the simplest one.</p>\n\n<p>If it helps, my root/home page is at <em>app>views>application>application.html.erb</em> and I don't have an index.html. I also develop on Windows 8.1.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "facebook", "facebook-graph-api", "koala-gem"], "comments": [{"owner": {"reputation": 118, "user_id": 380537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWsU3.jpg?s=128&g=1", "display_name": "tehspark", "link": "https://stackoverflow.com/users/380537/tehspark"}, "edited": false, "score": 0, "creation_date": 1433315896, "post_id": 30475687, "comment_id": 49293386, "body": "What permissions are you using with your access token to get this information?"}, {"owner": {"reputation": 101, "user_id": 4943481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf74ba5173039a884dfa29b2cf77aca?s=128&d=identicon&r=PG&f=1", "display_name": "user4943481", "link": "https://stackoverflow.com/users/4943481/user4943481"}, "reply_to_user": {"reputation": 118, "user_id": 380537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWsU3.jpg?s=128&g=1", "display_name": "tehspark", "link": "https://stackoverflow.com/users/380537/tehspark"}, "edited": false, "score": 0, "creation_date": 1433321459, "post_id": 30475687, "comment_id": 49296879, "body": "I have given read_stream permission. I am just reading the post."}], "answers": [{"tags": [], "owner": {"reputation": 44, "user_id": 3579158, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000965903183/picture?type=large", "display_name": "Nathalie Post", "link": "https://stackoverflow.com/users/3579158/nathalie-post"}, "is_accepted": false, "score": 1, "last_activity_date": 1433107907, "creation_date": 1433107907, "answer_id": 30562924, "question_id": 30475687, "link": "https://stackoverflow.com/questions/30475687/get-facebook-posts-on-timeline-using-koala-gem/30562924#30562924", "title": "Get Facebook Posts on Timeline using Koala gem", "body": "<p>Instead of 'get_connections', do:</p>\n\n<pre><code>graph.get_object(\"me/feed?fields=message\")\n</code></pre>\n\n<p>to get the messages in your feed.</p>\n"}], "owner": {"reputation": 101, "user_id": 4943481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf74ba5173039a884dfa29b2cf77aca?s=128&d=identicon&r=PG&f=1", "display_name": "user4943481", "link": "https://stackoverflow.com/users/4943481/user4943481"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433107907, "creation_date": 1432711223, "last_edit_date": 1432711639, "question_id": 30475687, "link": "https://stackoverflow.com/questions/30475687/get-facebook-posts-on-timeline-using-koala-gem", "title": "Get Facebook Posts on Timeline using Koala gem", "body": "<p>I am trying to get all the posts on my facebook profile using Koala. I am using the following method - </p>\n\n<blockquote>\n  <p>feed = graph.get_connections(\"me\", \"feed\")</p>\n</blockquote>\n\n<p>But this method returns an array of hash whose element is  - </p>\n\n<blockquote>\n  <p>{\"updated_time\"=>\"some time\", \"is_hidden\"=>false, \"story\"=>\"someone\n  and 10 others wrote on your timeline.\", \"from\"=>{\"id\"=>\"some id\",\n  \"name\"=>\"some name\"}, \"id\"=>\"some id\", \"privacy\"=>{\"deny\"=>\"\",\n  \"value\"=>\"\", \"friends\"=>\"\", \"description\"=>\"\", \"allow\"=>\"\"},\n  \"type\"=>\"status\", \"created_time\"=>\"some time\",\n  \"status_type\"=>\"wall_post\"}</p>\n</blockquote>\n\n<p>The problem in this case is I am not able to retrieve individual posts on timeline. </p>\n\n<p>There is \"<strong>story</strong>\" present in the hash but no \"<strong>Message</strong>\". I expected that there would be 11 elements in the array as 11 friends posted on timeline.</p>\n\n<p>Is there any other method from which I can retrieve? Also, this is plain ruby program without any rails integration.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1142, "user_id": 148410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df52d66587c2fa8cf9178b20869a843?s=128&d=identicon&r=PG", "display_name": "Chris O&#39;Sullivan", "link": "https://stackoverflow.com/users/148410/chris-osullivan"}, "edited": false, "score": 0, "creation_date": 1432719021, "post_id": 30475272, "comment_id": 49035873, "body": "In this situation though it will note destroy the associated <code>team_memberships</code> association"}], "tags": [], "owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "is_accepted": false, "score": 0, "last_activity_date": 1432709942, "creation_date": 1432709942, "answer_id": 30475272, "question_id": 30475182, "link": "https://stackoverflow.com/questions/30475182/how-can-i-skip-active-record-validations-in-some-special-cases/30475272#30475272", "title": "How can I skip active record validations in some special cases?", "body": "<p>You can call <code>user.delete</code> which will skip the callbacks.</p>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 2781287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba664166fac9bed91ce5a186f89a4d7e?s=128&d=identicon&r=PG", "display_name": "sascha.daniels", "link": "https://stackoverflow.com/users/2781287/sascha-daniels"}, "edited": false, "score": 0, "creation_date": 1432795288, "post_id": 30475556, "comment_id": 49074520, "body": "That was the idea, I was looking for! THX"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1432711266, "last_edit_date": 1432711266, "creation_date": 1432710835, "answer_id": 30475556, "question_id": 30475182, "link": "https://stackoverflow.com/questions/30475182/how-can-i-skip-active-record-validations-in-some-special-cases/30475556#30475556", "title": "How can I skip active record validations in some special cases?", "body": "<p>You could add a new method to your model that set a variable and use that as a return value of the callback:</p>\n\n<pre><code>before_destroy :check_permission\n\ndef allow_deletion!\n  @allow_deletion = true\nend\n\ndef check_permission\n  if !@allow_deletion &amp;&amp; self.slot.start_time &lt; Time.now.beginning_of_day\n    errors.add(:base, \"Historische Eintr\u00e4ge k\u00f6nnen nicht gel\u00f6scht werden\")\n    return false\n  end\nend\n</code></pre>\n\n<p>That allows you to write something like this:</p>\n\n<pre><code>user.allow_deletion!\nuser.destroy\n</code></pre>\n\n<p>This method has the benefit over <code>delete</code> that you only skip this specific callback and not all callbacks and dependent destroy operations.</p>\n"}], "owner": {"reputation": 131, "user_id": 2781287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba664166fac9bed91ce5a186f89a4d7e?s=128&d=identicon&r=PG", "display_name": "sascha.daniels", "link": "https://stackoverflow.com/users/2781287/sascha-daniels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1432714189, "creation_date": 1432709670, "last_edit_date": 1432711121, "question_id": 30475182, "link": "https://stackoverflow.com/questions/30475182/how-can-i-skip-active-record-validations-in-some-special-cases", "title": "How can I skip active record validations in some special cases?", "body": "<p>I am having a RoR application for human resource planning. Normaly it is not allowed to delete entries from the past. From time to time I have to delete users and of course I want to delete all entries.</p>\n\n<p>My user model:</p>\n\n<pre><code>has_many :team_memberships, dependent: :destroy\nhas_many :slots, through: :team_memberships, source: :slot\n</code></pre>\n\n<p>TeamMembership model:</p>\n\n<pre><code>before_destroy :check_permission\ndef check_permission\n  if self.slot.start_time &lt; Time.now.beginning_of_day\n    errors.add(:base, \"Historische Eintr\u00e4ge k\u00f6nnen nicht gel\u00f6scht werden\")\n    return false\n   end\nend\n</code></pre>\n\n<p>A rake task just destroys the old users, but that does not work, when they have historical entries.</p>\n\n<p>How can I skip the before_destroy validation when User.destroy is called by a rake task?</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "web-scraping", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 2, "last_activity_date": 1432711801, "creation_date": 1432711801, "answer_id": 30475893, "question_id": 30474503, "link": "https://stackoverflow.com/questions/30474503/how-is-ruby-mechanize-fast-after-first-get-request/30475893#30475893", "title": "How is Ruby Mechanize fast after first get request?", "body": "<p>There are lots of possible sources for a speed change between requests. A few that immediately spring to mind:</p>\n\n<ul>\n<li><p>DNS lookup cached on your client. The first call must convert \"xyz.com\" to \"123.45.67.89\", involving a DNS lookup which may be slow.</p></li>\n<li><p>HTTP keep-alive. There is an initial conversation between client and server to start an HTTP data transfer. On a high-latency connection you will notice this. If server and client both respect HTTP keep-alive, then a connection can be established once to cover multiple requests.</p></li>\n<li><p>Server-side caching. The server you are scraping uses caching to speed up multiple similar requests. It might be caching data to do with your current session for example, or even just not fully compiled the script yet until your first request.</p></li>\n<li><p>Server-side VM resource allocation. If the server is sharing space on a virtualised system, and does not serve high traffic, then it may become more responsive after the first request ensures everything is in RAM and has CPU allocated.</p></li>\n</ul>\n\n<p>This is by no means exhaustive. The above examples are just to illustrate that this behaviour - initial slow response, followed by faster ones - is  very common for web services, and has multiple causes.</p>\n"}], "owner": {"reputation": 35, "user_id": 4506963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ef8b2becd43bb6247e489007ae75b7?s=128&d=identicon&r=PG&f=1", "display_name": "gnirut_tds", "link": "https://stackoverflow.com/users/4506963/gnirut-tds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 30475893, "answer_count": 1, "score": 0, "last_activity_date": 1432711801, "creation_date": 1432707356, "question_id": 30474503, "link": "https://stackoverflow.com/questions/30474503/how-is-ruby-mechanize-fast-after-first-get-request", "title": "How is Ruby Mechanize fast after first get request?", "body": "<p>I recently programmed a scraper with Ruby's Mechanize gem for the first time. It had to hit the server (some 'xyz.com/a/<em>number</em>') where the number will be generated by the script. Like 'xyz.com/a/2' and 'xyz.com/a/3'. \nIt turned out that the first request took a lot of time -- around 1.5s on a 512kbps connection. But the next request was done in 0.3ms. </p>\n\n<p>How could it be done so fast? Did it have some caching mechanism?</p>\n"}, {"tags": ["ruby", "conways-game-of-life"], "comments": [{"owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432710275, "post_id": 30474131, "comment_id": 49030272, "body": "Please add the complete error message to your question."}, {"owner": {"reputation": 131, "user_id": 4943174, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-D0UafSZ3_3Y/AAAAAAAAAAI/AAAAAAAAAE8/oPvb-QOttrI/photo.jpg?sz=128", "display_name": "Manish Singh", "link": "https://stackoverflow.com/users/4943174/manish-singh"}, "reply_to_user": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432713919, "post_id": 30474131, "comment_id": 49032518, "body": "1) GameOfLife::Cell factory can be dead       Failure/Error: expect(GameOfLife::Cell.new_dead_cell).to be_dead        expected dead to respond to <code>dead?</code>      # ./spec/game_of_life/cell_spec.rb:10:in <code>block (3 levels) in &lt;top (required)&gt;&#39;    2) GameOfLife::Cell factory can be alive      Failure&#47;Error: expect(GameOfLife::Cell.new_live_cell).to be_alive        expected alive to respond to </code>alive?`      # ./spec/game_of_life/cell_spec.rb:14:in `block (3 levels) in &lt;top (required)&gt;&#39;"}, {"owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432717546, "post_id": 30474131, "comment_id": 49034789, "body": "It pretty much tells you what&#39;s wrong with your code. In order to make the <code>be_dead</code> matcher work, you need to implement the <code>dead?</code> method in the <code>GameOfLife::Cell</code> class."}, {"owner": {"reputation": 131, "user_id": 4943174, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-D0UafSZ3_3Y/AAAAAAAAAAI/AAAAAAAAAE8/oPvb-QOttrI/photo.jpg?sz=128", "display_name": "Manish Singh", "link": "https://stackoverflow.com/users/4943174/manish-singh"}, "reply_to_user": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432718478, "post_id": 30474131, "comment_id": 49035440, "body": "i have implemented dead? method..but this the error is &quot;expected dead to respond to dead?&quot;.. how will this problem   be solved                                                                                                  def dead?                                                                                                dead                                                                                                        end"}, {"owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432718716, "post_id": 30474131, "comment_id": 49035633, "body": "What do you return from the <code>new_dead_cell</code> method? It should return the instance, so the last line should be <code>self</code>, unless the last statement in the method already returns the instance."}, {"owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432718808, "post_id": 30474131, "comment_id": 49035700, "body": "Please edit your post if you want to paste longer text and useful info for other readers. If you want to get good answers, you need to make it as easy as possible for readers to quickly get all the necessary information."}, {"owner": {"reputation": 131, "user_id": 4943174, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-D0UafSZ3_3Y/AAAAAAAAAAI/AAAAAAAAAE8/oPvb-QOttrI/photo.jpg?sz=128", "display_name": "Manish Singh", "link": "https://stackoverflow.com/users/4943174/manish-singh"}, "reply_to_user": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432719192, "post_id": 30474131, "comment_id": 49036012, "body": "this is code for cell class.. what i need to write in dead? and alive? methods. i  am stuck here        class GameOfLife::Cell        ALIVE = &quot;alive&quot;          DEAD = &quot;dead&quot;          # lost implementation           def self.new_dead_cell              return DEAD           end                def self.new_live_cell              return ALIVE           end                def dead?            end             def alive?                end              end"}, {"owner": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432720858, "post_id": 30474131, "comment_id": 49037260, "body": "Please add your cell class to the original question, you can edit it."}, {"owner": {"reputation": 131, "user_id": 4943174, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-D0UafSZ3_3Y/AAAAAAAAAAI/AAAAAAAAAE8/oPvb-QOttrI/photo.jpg?sz=128", "display_name": "Manish Singh", "link": "https://stackoverflow.com/users/4943174/manish-singh"}, "reply_to_user": {"reputation": 49824, "user_id": 192702, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/aec924d6fd4f693e4a93c1f463c5023a?s=128&d=identicon&r=PG", "display_name": "Patrick Oscity", "link": "https://stackoverflow.com/users/192702/patrick-oscity"}, "edited": false, "score": 0, "creation_date": 1432745931, "post_id": 30474131, "comment_id": 49055715, "body": "i have added cell.rb file.  i want to know about implmentation of dead? and alive? methods"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1432746523, "post_id": 30474131, "comment_id": 49056097, "body": "What do you want to know about them?"}, {"owner": {"reputation": 131, "user_id": 4943174, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-D0UafSZ3_3Y/AAAAAAAAAAI/AAAAAAAAAE8/oPvb-QOttrI/photo.jpg?sz=128", "display_name": "Manish Singh", "link": "https://stackoverflow.com/users/4943174/manish-singh"}, "edited": false, "score": 0, "creation_date": 1432747489, "post_id": 30474131, "comment_id": 49056679, "body": "the code inside dead? and alive?.  i am not able to get what will come inside these methods"}], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 404328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e7f7b260cb6ac75fbbf47096872e84b?s=128&d=identicon&r=PG", "display_name": "sinjed", "link": "https://stackoverflow.com/users/404328/sinjed"}, "is_accepted": true, "score": 0, "last_activity_date": 1432993199, "creation_date": 1432993199, "answer_id": 30546869, "question_id": 30474131, "link": "https://stackoverflow.com/questions/30474131/conways-game-of-life-in-ruby/30546869#30546869", "title": "conways game of life in ruby", "body": "<p>Here's one obvious way of doing this.\nYou simply create a new instance of Cell and store its state (as :dead or :alive).\ndead? and alive? methods then simply check the state.</p>\n\n<pre><code> class Cell\n  ALIVE = :alive\n  DEAD = :dead\n\n  def self.new_dead_cell\n     new(DEAD)\n  end\n\n  def self.new_live_cell\n    new(ALIVE)\n  end\n\n  def initialize state\n    @state = state\n  end\n  attr_reader :state\n\n  def dead?\n    state == DEAD\n  end\n\n  def alive?\n    state == ALIVE\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 4943174, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-D0UafSZ3_3Y/AAAAAAAAAAI/AAAAAAAAAE8/oPvb-QOttrI/photo.jpg?sz=128", "display_name": "Manish Singh", "link": "https://stackoverflow.com/users/4943174/manish-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 30546869, "answer_count": 1, "score": 3, "last_activity_date": 1432993199, "creation_date": 1432705715, "last_edit_date": 1432745850, "question_id": 30474131, "link": "https://stackoverflow.com/questions/30474131/conways-game-of-life-in-ruby", "title": "conways game of life in ruby", "body": "<p>I am making conway game of life in ruby. This is my <strong>cell_spec.rb</strong> file. I'm getting failure/error in line 10 as:  </p>\n\n<pre><code>expect(GameOfLife::Cell.new_dead_cell).to be_dead \n</code></pre>\n\n<p>I have a another file <strong>cell.rb</strong> where class cell is defined. How will implement custom predicate mather in this file?</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe GameOfLife::Cell do \n  def build_neighbours(live_count)\n    [GameOfLife::Cell.new_live_cell] * live_count +\n       [GameOfLife::Cell.new_dead_cell] * (8 - live_count)\n  end\n  context \"factory\" do\n    it \"can be dead\" do\n      expect(GameOfLife::Cell.new_dead_cell).to be_dead\n    end\n\n    it \"can be alive\" do\n      expect(GameOfLife::Cell.new_live_cell).to be_alive\n    end\n  end\n\n  context \"live cell generation rules\" do\n    let(:cell) { GameOfLife::Cell.new_live_cell }\n\n    [0, 1].each do |i|\n      it \"dies when there are #{i} live neighbours\" do\n        expect(cell.next_generation(build_neighbours(i))).to be_dead\n      end\n    end\n\n    [2, 3].each do |i|\n      it \"lives when there are #{i} live neighbours\" do\n        expect(cell.next_generation(build_neighbours(i))).to be_alive\n      end\n    end\n\n    (4..8).each do |i|\n      it \"dead when there are #{i} live neighbours\" do\n        expect(cell.next_generation(build_neighbours(i))).to be_dead\n      end\n    end\n  end\n\n  context \"dead cell generation rules\" do\n    let(:cell) { GameOfLife::Cell.new_dead_cell }\n\n    (0..2).each do |i|\n      it \"dies when there are #{i} live neighbours\" do\n        expect(cell.next_generation(build_neighbours(i))).to be_dead\n      end\n    end\n\n    [3].each do |i|\n      it \"lives when there are #{i} live neighbours\" do\n        expect(cell.next_generation(build_neighbours(i))).to be_alive\n      end\n    end\n\n    (4..8).each do |i|\n      it \"dead when there are #{i} live neighbours\" do\n        expect(cell.next_generation(build_neighbours(i))).to be_dead\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>this is my cell.rb file having cell class.. i want to know the inplementation of code for dead? and alive? methods. plz help me out</p>\n\n<pre><code>class GameOfLife::Cell\n  ALIVE = \"alive\"\n  DEAD = \"dead\"\n\n # lost implementation\n  def self.new_dead_cell\n     return DEAD\n  end\n\n  def self.new_live_cell\n    return ALIVE\n  end\n\n  def dead?\n\n  end\n\n  def alive?\n\n  end\n\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "swagger", "grape"], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 934104, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/39ec999a8055943759e2e3454991952c?s=128&d=identicon&r=PG", "display_name": "Kirity", "link": "https://stackoverflow.com/users/934104/kirity"}, "edited": false, "score": 0, "creation_date": 1432797934, "post_id": 30483715, "comment_id": 49076003, "body": "Thanks Sachin! If I add hide_documentation_path: true, API path for swagger_doc is removed. But I am concerned as I am not getting localhost:9292/ap1/v1/charges because it is returning as localhost:9292/api/v1/swagger/charges. Is there any way out or I am doing any mistake?"}, {"owner": {"reputation": 230, "user_id": 3022649, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9f6caa44c0eaeac41d99d439f01ba591?s=128&d=identicon&r=PG&f=1", "display_name": "mGm", "link": "https://stackoverflow.com/users/3022649/mgm"}, "edited": false, "score": 0, "creation_date": 1609148496, "post_id": 30483715, "comment_id": 115758035, "body": "I followed all instructions as described above and I am getting following error:  failed to parse JSON/YAML response"}], "tags": [], "owner": {"reputation": 1077, "user_id": 4269239, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/jTw9F.jpg?s=128&g=1", "display_name": "Sachin Gevariya", "link": "https://stackoverflow.com/users/4269239/sachin-gevariya"}, "is_accepted": false, "score": 1, "last_activity_date": 1432733662, "last_edit_date": 1432733662, "creation_date": 1432732781, "answer_id": 30483715, "question_id": 30474098, "link": "https://stackoverflow.com/questions/30474098/api-documentation-issue-using-grape-swagger/30483715#30483715", "title": "API documentation issue using grape-swagger", "body": "<p>In end of api class add below params for hide documentation path:</p>\n\n<pre><code>add_swagger_documentation hide_documentation_path: true, api_version: 'v1'\n</code></pre>\n\n<p>If you want to use this gem <a href=\"https://github.com/BrandyMint/grape-swagger-rails\" rel=\"nofollow\">grape-swagger-rails</a> then use this configuration as per documentation:</p>\n\n<p>Then create file named config/intializers/swagger.rb and add this line for customization:</p>\n\n<pre><code>GrapeSwaggerRails.options.url      = \"/api/v1/swagger_doc\"\nGrapeSwaggerRails.options.app_url  = \"#{ENV['APPLICATION_URL']}\"\n</code></pre>\n\n<p>where you can set APPLICATION_URL in environment variables like : <code>localhost:3000</code></p>\n\n<p>And your config/routes.rb file set route as </p>\n\n<pre><code>mount GrapeSwaggerRails::Engine =&gt; '/swagger'\n</code></pre>\n\n<p>Then you can access all docs from here: <code>localhost:3000/swagger</code></p>\n\n<p>This way you can customize your swagger documentation with grape api.</p>\n"}], "owner": {"reputation": 283, "user_id": 934104, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/39ec999a8055943759e2e3454991952c?s=128&d=identicon&r=PG", "display_name": "Kirity", "link": "https://stackoverflow.com/users/934104/kirity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1889, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542351401, "creation_date": 1432705541, "last_edit_date": 1542351401, "question_id": 30474098, "link": "https://stackoverflow.com/questions/30474098/api-documentation-issue-using-grape-swagger", "title": "API documentation issue using grape-swagger", "body": "<p>I am trying to use grape-swagger gem for creating the auto-generated documentation for my Grape API.</p>\n\n<p>Using <code>'grape'</code> gem I have created few APIs.</p>\n\n<p><strong>Example:</strong></p>\n\n<p><a href=\"http://localhost:9292/api/v1/charges\" rel=\"nofollow noreferrer\">http://localhost:9292/api/v1/charges</a></p>\n\n<p>This API is working fine.</p>\n\n<p>Following documentation of '<a href=\"https://github.com/tim-vandecasteele/grape-swagger\" rel=\"nofollow noreferrer\">grape-sagger'</a>, I am not able to generate the API documentation properly.</p>\n\n<p>My steps:</p>\n\n<p>1) I added below in the gemfile</p>\n\n<pre><code>gem 'grape-swagger'\n</code></pre>\n\n<p>2) I also used rack-cors to enable CORS by adding below in config.ru</p>\n\n<pre><code>require 'rack/cors'\nuse Rack::Cors do\n  allow do\n    origins '*'\n    resource '*', headers: :any, methods: [ :get, :post, :put, :delete, :options ]\n  end\nend\n</code></pre>\n\n<p>Also added below in gemfile.</p>\n\n<pre><code>gem 'rack-cors', :require =&gt; 'rack/cors'\n</code></pre>\n\n<p>3) Also I added below at the end in my API class</p>\n\n<pre><code>add_swagger_documentation\n</code></pre>\n\n<p>But when I run <a href=\"http://localhost:9292/api/v1/swagger_doc\" rel=\"nofollow noreferrer\">http://localhost:9292/api/v1/swagger_doc</a>, I am not getting the proper paths.\nI need the API path like <a href=\"http://localhost:9292/api/v1/charges\" rel=\"nofollow noreferrer\">http://localhost:9292/api/v1/charges</a>, but it is returning as <a href=\"http://localhost:9292/api/v1/swagger_doc/charges\" rel=\"nofollow noreferrer\">http://localhost:9292/api/v1/swagger_doc/charges</a></p>\n\n<p>Do I need to set any other configuration?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "edited": false, "score": 0, "creation_date": 1432704759, "post_id": 30473780, "comment_id": 49027578, "body": "Great, thank worked. How do I prevent other users from changing other users pages? <code>&lt;% if current_user %&gt;</code> doesn&#39;t seem to work"}], "tags": [], "owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "is_accepted": true, "score": 2, "last_activity_date": 1432704128, "creation_date": 1432704128, "answer_id": 30473780, "question_id": 30473728, "link": "https://stackoverflow.com/questions/30473728/rails-nomethoderror-how-do-i-show-users-profiles/30473780#30473780", "title": "Rails: NoMethodError, how do I show users profiles?", "body": "<p>users_controller.rb</p>\n\n<pre><code>def show\n  @user = User.find(params[:id])\nend\n</code></pre>\n\n<p>You are trying to find user with his name and you are passing id. Change the query as above and check and you have added two routes for show method so remove first route.</p>\n"}, {"tags": [], "owner": {"reputation": 324, "user_id": 2622326, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/RyEPd.jpg?s=128&g=1", "display_name": "saran", "link": "https://stackoverflow.com/users/2622326/saran"}, "is_accepted": false, "score": 1, "last_activity_date": 1432704131, "creation_date": 1432704131, "answer_id": 30473781, "question_id": 30473728, "link": "https://stackoverflow.com/questions/30473728/rails-nomethoderror-how-do-i-show-users-profiles/30473781#30473781", "title": "Rails: NoMethodError, how do I show users profiles?", "body": "<p>do you have show page under user.if do not means create one..i think it may be also a problem</p>\n"}, {"comments": [{"owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "edited": false, "score": 0, "creation_date": 1432704972, "post_id": 30473813, "comment_id": 49027649, "body": "Thanks. How do I prevent other users from changing other users pages? <code>&lt;% if current_user %&gt;</code> doesn&#39;t seem to work?"}, {"owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "reply_to_user": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "edited": false, "score": 0, "creation_date": 1432706767, "post_id": 30473813, "comment_id": 49028377, "body": "you can check it in controlller as, <code>def show       @user = User.find_by_name(params[:id])        unless current_user == @user            redirect_to root_path        end   end</code>"}], "tags": [], "owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "is_accepted": false, "score": 1, "last_activity_date": 1432704262, "creation_date": 1432704262, "answer_id": 30473813, "question_id": 30473728, "link": "https://stackoverflow.com/questions/30473728/rails-nomethoderror-how-do-i-show-users-profiles/30473813#30473813", "title": "Rails: NoMethodError, how do I show users profiles?", "body": "<p>You have created two routes for <code>users/show</code> show page. Remove <code>get 'users/show'</code> and try again</p>\n"}, {"tags": [], "owner": {"reputation": 1958, "user_id": 515991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/319b6176a2b56541cbf44182fd3987a1?s=128&d=identicon&r=PG&f=1", "display_name": "usmanali", "link": "https://stackoverflow.com/users/515991/usmanali"}, "is_accepted": false, "score": 1, "last_activity_date": 1432707145, "creation_date": 1432707145, "answer_id": 30474439, "question_id": 30473728, "link": "https://stackoverflow.com/questions/30473728/rails-nomethoderror-how-do-i-show-users-profiles/30474439#30474439", "title": "Rails: NoMethodError, how do I show users profiles?", "body": "<p>You are using <code>current_user</code> in your <code>show</code> page, that is why you always get the same result every time. The route is not the problem. You should change your controller's action to:</p>\n\n<pre><code>def show\n  @user = User.find params[:id]\nend  \n</code></pre>\n\n<p>And then update your view to:</p>\n\n<pre><code>Avatar, &lt;%= image_tag(@user.avatar.url(:medium)) %&gt;\nHello, &lt;%= @user.name %&gt;\n</code></pre>\n"}], "owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 30473780, "answer_count": 4, "score": 1, "last_activity_date": 1432707145, "creation_date": 1432703876, "last_edit_date": 1432705075, "question_id": 30473728, "link": "https://stackoverflow.com/questions/30473728/rails-nomethoderror-how-do-i-show-users-profiles", "title": "Rails: NoMethodError, how do I show users profiles?", "body": "<p>When I type at the top, <code>/users/1</code> or <code>/users/2</code> I get the same page yet there are 2 users. It just redirects me back to show.html.rb page. I'm not sure but maybe I don't have a page for each user. Maybe you can look at my code. I am unable to show <code>&lt;%= @user.name %&gt;</code>, I get a <code>NoMethodError in Users#show</code>. Maybe that is the problem...</p>\n\n<p><strong>show.html.rb</strong></p>\n\n<pre><code>Avatar, &lt;%= image_tag(current_user.avatar.url(:medium)) %&gt;\n\nHello, &lt;%= current_user.name %&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n   resources :products\n\n\n   get 'users/index'\n   get 'users/show'\n\n   devise_for :users do\n       resources :posts \n   end\n\n   get 'users/:id' =&gt; 'users#show', as: :user\n\n\n   resources :posts do\n     member do\n         get \"like\", to: \"posts#upvote\"\n         get \"dislike\", to: \"posts#downvote\"\n\n\n     end\n     resources :comments\n   end\n\n   root 'posts#index'\n\nend\n</code></pre>\n\n<p>I have each user in Show.html.rb and an index showing all the users at Index.html.rb</p>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n    before_action :authenticate_user!\n\n    def index\n        @users = User.all\n    end\n\n    def edit\n        @user = User.create( user_params )\n    end\n\n  def show\n      @user = User.find_by_name(params[:id])\n  end\n\n\n private\n\n    def user_params\n        params.require(:user).permit(:name, :email, :avatar)\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rspec", "actionmailer"], "answers": [{"comments": [{"owner": {"reputation": 2943, "user_id": 3751534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IejGt.jpg?s=128&g=1", "display_name": "Damon Yuan", "link": "https://stackoverflow.com/users/3751534/damon-yuan"}, "edited": false, "score": 0, "creation_date": 1432713654, "post_id": 30473930, "comment_id": 49032364, "body": "which delegates to a new instance of the Mail::Message object. Thank you,!"}], "tags": [], "owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "is_accepted": true, "score": 3, "last_activity_date": 1432704744, "creation_date": 1432704744, "answer_id": 30473930, "question_id": 30473664, "link": "https://stackoverflow.com/questions/30473664/why-rails-instance-method-can-be-used-as-class-method-in-rspec/30473930#30473930", "title": "Why Rails instance method can be used as class method in rspec", "body": "<p>It's not an rspec thing, it's an ActionMailer thing. Looking at:</p>\n\n<p><a href=\"https://github.com/rails/rails/blob/master/actionmailer/lib/action_mailer/base.rb\" rel=\"nofollow\">https://github.com/rails/rails/blob/master/actionmailer/lib/action_mailer/base.rb</a></p>\n\n<p>Take a look at the comments in lines 135-146:</p>\n\n<pre><code># = Sending mail\n#\n# Once a mailer action and template are defined, you can deliver your message or defer its creation and\n# delivery for later:\n#\n#   NotifierMailer.welcome(User.first).deliver_now # sends the email\n#   mail = NotifierMailer.welcome(User.first)      # =&gt; an ActionMailer::MessageDelivery object\n#   mail.deliver_now                               # generates and sends the email now\n#\n# The &lt;tt&gt;ActionMailer::MessageDelivery&lt;/tt&gt; class is a wrapper around a delegate that will call\n# your method to generate the mail. If you want direct access to delegator, or &lt;tt&gt;Mail::Message&lt;/tt&gt;,\n# you can call the &lt;tt&gt;message&lt;/tt&gt; method on the &lt;tt&gt;ActionMailer::MessageDelivery&lt;/tt&gt; object.\n</code></pre>\n\n<p>The functionality is implemented by defining a method_missing method on the ActionMailer::Base class that looks like:</p>\n\n<pre><code>  def method_missing(method_name, *args) # :nodoc:\n    if action_methods.include?(method_name.to_s)\n      MessageDelivery.new(self, method_name, *args)\n    else\n      super\n    end\n  end\n</code></pre>\n\n<p>Essentially, defining a method on an ActionMailer instance (NotifierMailer in the comment example) and then calling it on the class creates a new MessageDelivery instance which delegates to a new instance of the ActionMailer class.</p>\n"}], "owner": {"reputation": 2943, "user_id": 3751534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IejGt.jpg?s=128&g=1", "display_name": "Damon Yuan", "link": "https://stackoverflow.com/users/3751534/damon-yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 30473930, "answer_count": 1, "score": 2, "last_activity_date": 1470380743, "creation_date": 1432703539, "last_edit_date": 1432705669, "question_id": 30473664, "link": "https://stackoverflow.com/questions/30473664/why-rails-instance-method-can-be-used-as-class-method-in-rspec", "title": "Why Rails instance method can be used as class method in rspec", "body": "<p>I found a snippet in an article about sending mails in a Rails application:</p>\n\n<pre><code>class ExampleMailerPreview &lt; ActionMailer::Preview\n  def sample_mail_preview\n    ExampleMailer.sample_email(User.first)\n  end\nend\n</code></pre>\n\n<p>in this link: <a href=\"http://www.gotealeaf.com/blog/handling-emails-in-rails\" rel=\"nofollow\">http://www.gotealeaf.com/blog/handling-emails-in-rails</a>.</p>\n\n<p>I do not know why the method: <code>sample_email()</code>, which in my mind should be an instance method, can be accessed like class method here as <code>ExampleMailer.sample_email()</code>. Can anyone explain?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "versions", "paper-trail-gem"], "comments": [{"owner": {"reputation": 129, "user_id": 1300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SWseF.jpg?s=128&g=1", "display_name": "Rajendran_R", "link": "https://stackoverflow.com/users/1300151/rajendran-r"}, "edited": false, "score": 0, "creation_date": 1432706352, "post_id": 30473183, "comment_id": 49028195, "body": "Do you want to display the difference between last version and current version record?"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432707435, "post_id": 30474383, "comment_id": 49028691, "body": "This doesn&#39;t seem to be working. Yes, definitely installed paper_gem...the versioning is working for me. I restarted the server. What do you mean by &quot;crate&quot;?  Does the @quarterback.versions.last.changeset just go in the html file? For instance:    &#39;&lt;tr&gt;      &lt;th&gt;XOI +/-&lt;/th&gt;       &lt;td&gt;&lt;%= quarterback.versions.last.changeset %&gt;&lt;/td&gt; &lt;/tr&gt;&#39;"}, {"owner": {"reputation": 129, "user_id": 1300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SWseF.jpg?s=128&g=1", "display_name": "Rajendran_R", "link": "https://stackoverflow.com/users/1300151/rajendran-r"}, "reply_to_user": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432707848, "post_id": 30474383, "comment_id": 49028906, "body": "Im assuming quarterback is your table name.. So after restart the server, create one more record.(i.e) Ex: Quarterback.create(name: &#39;test&#39;) depends on your table. Then try, Quarterback.last.versions.last.changeset"}, {"owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432755371, "post_id": 30474383, "comment_id": 49061046, "body": "I&#39;m sorry, this still isn&#39;t working. I am very new to rails. Is it possible that it&#39;s because in my &quot;versions&quot; model (created for paper_trail) already has &quot;change&quot; defined as:    <code>def change     create_table :versions do |t|       t.string   :item_type, :null =&gt; false       t.integer  :item_id,   :null =&gt; false       t.string   :event,     :null =&gt; false       t.string   :whodunnit       t.text     :object       t.datetime :created_at       t.datetime :updated_at     end     add_index :versions, [:item_type, :item_id]   end</code>"}, {"owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432755395, "post_id": 30474383, "comment_id": 49061067, "body": "Also, I&#39;m using RubyMine as an IDE, which I find very helpful."}], "tags": [], "owner": {"reputation": 129, "user_id": 1300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SWseF.jpg?s=128&g=1", "display_name": "Rajendran_R", "link": "https://stackoverflow.com/users/1300151/rajendran-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1432707682, "last_edit_date": 1432707682, "creation_date": 1432706908, "answer_id": 30474383, "question_id": 30473183, "link": "https://stackoverflow.com/questions/30473183/paper-trail-show-diff-between-versions/30474383#30474383", "title": "Paper_Trail: Show Diff Between Versions", "body": "<p>I am assuming you have installed paper_trail gem.\nYou can add an object_changes text column to your versions table either manually or through migration.</p>\n\n<pre><code>rails g migration AddColumnToVersions\nclass AddColumnToVersions &lt; ActiveRecord::Migration\n  def change\n    execute \"ALTER TABLE versions ADD object_changes TEXT\"\n  end\nend\n</code></pre>\n\n<p>Then restart the server. Create the records.</p>\n\n<p>Check the difference between last version and current version</p>\n\n<pre><code>@quarterback.versions.last.changeset\n</code></pre>\n\n<p>You can get the difference.</p>\n\n<p>Source: <a href=\"https://github.com/airblade/paper_trail\" rel=\"nofollow\">https://github.com/airblade/paper_trail</a> - Diffing Versions</p>\n"}, {"tags": [], "owner": {"reputation": 3158, "user_id": 348701, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50a2c96aabbc1351a354405846136f45?s=128&d=identicon&r=PG", "display_name": "Maysam Torabi", "link": "https://stackoverflow.com/users/348701/maysam-torabi"}, "is_accepted": false, "score": 6, "last_activity_date": 1484930840, "last_edit_date": 1484930840, "creation_date": 1444993556, "answer_id": 33168967, "question_id": 30473183, "link": "https://stackoverflow.com/questions/30473183/paper-trail-show-diff-between-versions/33168967#33168967", "title": "Paper_Trail: Show Diff Between Versions", "body": "<p>Take a look at <a href=\"https://github.com/airblade/paper_trail#3c-diffing-versions\" rel=\"nofollow noreferrer\">the documentation on diffing versions with PaperTrail</a>. In particular, here's what you want to take note of:</p>\n\n<p>If you add an <strong>object_changes</strong> text column to your <strong>versions</strong> table, either at installation time with the <strong>rails generate paper_trail:install --with-changes</strong> option or manually, PaperTrail will store the changes diff (excluding any attributes PaperTrail is ignoring) in each update version.</p>\n\n<p>With this behavior enabled, it is reasonably simple to get <strong>object.versions.map{|v| [v.created_at, v.changeset]}</strong> and then iterate over that structure to render your change log.</p>\n"}], "owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4135, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1484930840, "creation_date": 1432700860, "last_edit_date": 1433046708, "question_id": 30473183, "link": "https://stackoverflow.com/questions/30473183/paper-trail-show-diff-between-versions", "title": "Paper_Trail: Show Diff Between Versions", "body": "<p>I'm new to Rails...using RubyMine as an IDE. </p>\n\n<p>I have Paper_Trail saving previous versions of the data \"xoi_qb\". My view is currently showing the current and previous data as I'd like, but I would like to show the diff between the current version \"xoi_qb\" and the previous version \"xoi_qb\". For instance, the current version may be \"97\" and the previous version may be \"94\", and I would like to display \"XOI +/-: +3\". I would like to display this difference and add the \"+\" or \"-\" based on the positive or negative change. </p>\n\n<p>In my model, Paper Trail is set to create versions like this:</p>\n\n<pre><code>  def get_xoi_qb\n    xoi_qb = []\n    self.versions.each do |version|\n      unless version.reify.nil?\n        xoi_qb &lt;&lt; version.reify.xoi_qb\n      end\n    end\n    return xoi_qb\n  end\n</code></pre>\n\n<p>And in my HTML set to display the versions like this:</p>\n\n<pre><code>  &lt;th&gt;Previous XOI&lt;/th&gt;\n  &lt;table&gt;\n    &lt;% @quarterback.versions.each do |version| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= version.reify.xoi_qb %&gt; dated &lt;%= version.created_at %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Not sure how to show the difference between the two.</p>\n\n<p>Really appreciate the help.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1432700577, "creation_date": 1432700577, "answer_id": 30473124, "question_id": 30473088, "link": "https://stackoverflow.com/questions/30473088/illegal-nesting-nothing-may-be-nested-beneath-import-directives/30473124#30473124", "title": "Illegal nesting: Nothing may be nested beneath import directives", "body": "<p>Try this out:</p>\n\n<p>Don't indent you styles, create a class or put it in an html tag.</p>\n\n<p>Example:</p>\n\n<pre><code>@import \"bootstrap\"\n\nbody {\n    height: 5px\n    border-top: 0\n    background: #c4e17f\n    border-radius: 5px\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>@import \"bootstrap\"\n\nbody\n  height: 5px\n  border-top: 0\n  background: #c4e17f\n  border-radius: 5px\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 940, "user_id": 944938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dad58c591bf025166e8529cca7b67c?s=128&d=identicon&r=PG&f=1", "display_name": "user944938", "link": "https://stackoverflow.com/users/944938/user944938"}, "is_accepted": true, "score": 0, "last_activity_date": 1432700715, "creation_date": 1432700715, "answer_id": 30473150, "question_id": 30473088, "link": "https://stackoverflow.com/questions/30473088/illegal-nesting-nothing-may-be-nested-beneath-import-directives/30473150#30473150", "title": "Illegal nesting: Nothing may be nested beneath import directives", "body": "<p>From your code sample I see that you have not associated the style to any class or id.</p>\n\n<p>It can look like</p>\n\n<pre><code>.container\n  height: 5px       \n  border-top: 0\n  background: #c4e17f\n  border-radius: 5px\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4943013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4efa3774661241d0d3f83d4bd49042d?s=128&d=identicon&r=PG&f=1", "display_name": "svetl", "link": "https://stackoverflow.com/users/4943013/svetl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 30473150, "answer_count": 2, "score": 0, "last_activity_date": 1432700715, "creation_date": 1432700317, "question_id": 30473088, "link": "https://stackoverflow.com/questions/30473088/illegal-nesting-nothing-may-be-nested-beneath-import-directives", "title": "Illegal nesting: Nothing may be nested beneath import directives", "body": "<p>Im working with rails 4.2 and bootstrap-sass -> 3.2.0 gem. I converted css into sass and added to application.css.sass file. </p>\n\n<p>Im getting <code>Illegal nesting: Nothing may be nested beneath import directives.</code></p>\n\n<pre><code>@import \"bootstrap\"\n\n  height: 5px\n  border-top: 0\n  background: #c4e17f\n  border-radius: 5px\n</code></pre>\n\n<p>any ideas as to why I'm encourtering this issue.</p>\n"}, {"tags": ["ruby", "node.js", "macos", "debugging", "visual-studio-code"], "comments": [{"owner": {"reputation": 6966, "user_id": 445322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1d76639525a17531e9275fdf49e28c20?s=128&d=identicon&r=PG", "display_name": "Brandon Buck", "link": "https://stackoverflow.com/users/445322/brandon-buck"}, "edited": false, "score": 0, "creation_date": 1432698875, "post_id": 30472845, "comment_id": 49025847, "body": "Node is a JavaScript engine - you have an error listing JavaScript files (hence <code>.js</code> instead of <code>.rb</code>). Do you expect a JavaScript engine to execute Ruby code?"}, {"owner": {"reputation": 53, "user_id": 4285360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3928e9f084579c08357ae845f9e374fc?s=128&d=identicon&r=PG", "display_name": "chixco", "link": "https://stackoverflow.com/users/4285360/chixco"}, "reply_to_user": {"reputation": 6966, "user_id": 445322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1d76639525a17531e9275fdf49e28c20?s=128&d=identicon&r=PG", "display_name": "Brandon Buck", "link": "https://stackoverflow.com/users/445322/brandon-buck"}, "edited": false, "score": 0, "creation_date": 1432699370, "post_id": 30472845, "comment_id": 49025988, "body": "The configuration instructions with regards to debugging in VSCode only refer to the launch.json  config. I need to know what to do specifically in relation to the VSCode editor to get it to debug ruby"}, {"owner": {"reputation": 6966, "user_id": 445322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1d76639525a17531e9275fdf49e28c20?s=128&d=identicon&r=PG", "display_name": "Brandon Buck", "link": "https://stackoverflow.com/users/445322/brandon-buck"}, "edited": false, "score": 0, "creation_date": 1432699604, "post_id": 30472845, "comment_id": 49026071, "body": "My understanding (very basic, as I haven&#39;t spent any significant time with VSCode) is that it&#39;s geared to web development with Node.js so I&#39;d hazard it doesn&#39;t support debugging ruby code."}], "answers": [{"tags": [], "owner": {"reputation": 1653, "user_id": 4860305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1b296ca4a5bd3295ab15638c7eed42?s=128&d=identicon&r=PG", "display_name": "Andre Weinand", "link": "https://stackoverflow.com/users/4860305/andre-weinand"}, "is_accepted": true, "score": 3, "last_activity_date": 1432735374, "last_edit_date": 1432735374, "creation_date": 1432714944, "answer_id": 30476928, "question_id": 30472845, "link": "https://stackoverflow.com/questions/30472845/error-when-debugging-ruby-code-in-vscode-mac-os-x/30476928#30476928", "title": "Error when debugging Ruby code in VSCode (Mac OS X)", "body": "<p>Visual Studio Code Preview does not support debugging Ruby.\nIf you would like to see this feature in a future version of VSCode you can vote for it <a href=\"http://visualstudio.uservoice.com/forums/293070-visual-studio-code\" rel=\"nofollow\">here</a>.\nIn your launch configuration from above you've tried to configure \"node\" to run your ruby program (which cannot work).</p>\n\n<p>Source: I am a member of the Visual Studio Code Team.</p>\n"}, {"tags": [], "owner": {"reputation": 5135, "user_id": 1315634, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b74dec58d6bc6d2cf31a0ea5011c4bde?s=128&d=identicon&r=PG", "display_name": "Rebornix", "link": "https://stackoverflow.com/users/1315634/rebornix"}, "is_accepted": false, "score": 0, "last_activity_date": 1456711061, "creation_date": 1456711061, "answer_id": 35690783, "question_id": 30472845, "link": "https://stackoverflow.com/questions/30472845/error-when-debugging-ruby-code-in-vscode-mac-os-x/35690783#35690783", "title": "Error when debugging Ruby code in VSCode (Mac OS X)", "body": "<p>As VS Code already exposes the debugging API and allow us to customize, we can easily create a ruby debugger ourselves. </p>\n\n<p>Currently I'm working on this <a href=\"https://github.com/rebornix/vscode-ruby.git\" rel=\"nofollow\">VS Code Ruby Debugger</a>, you can download it from <a href=\"https://marketplace.visualstudio.com/items?itemName=rebornix.Ruby\" rel=\"nofollow\">marketplace</a>. It's still in progress and of coz, non-official.</p>\n"}], "owner": {"reputation": 53, "user_id": 4285360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3928e9f084579c08357ae845f9e374fc?s=128&d=identicon&r=PG", "display_name": "chixco", "link": "https://stackoverflow.com/users/4285360/chixco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 1, "accepted_answer_id": 30476928, "answer_count": 2, "score": 1, "last_activity_date": 1456711061, "creation_date": 1432698721, "question_id": 30472845, "link": "https://stackoverflow.com/questions/30472845/error-when-debugging-ruby-code-in-vscode-mac-os-x", "title": "Error when debugging Ruby code in VSCode (Mac OS X)", "body": "<p>I'm trying to figure out this new Visual Studio Code (VSCode) Editor while also learning Ruby. Whenever I try to debug a simple ruby program (even Hello World) I receive the following error VSCode</p>\n\n<blockquote>\n  <p>Error: could not launch 'node' in debug mode</p>\n</blockquote>\n\n<p>And this is what shows up in my Terminal:</p>\n\n<pre><code>/Users/Chixco/Documents/RubyProjects/FirstApp/test.rb:1\n(function (exports, require, module, __filename, __dirname) { puts \"Hello!\"\n                                                               ^^^^^^^^\nSyntaxError: Unexpected string\nat exports.runInThisContext (vm.js:73:16)\nat Module._compile (module.js:443:25)\nat Object.Module._extensions..js (module.js:478:10)\nat Module.load (module.js:355:32)\nat Function.Module._load (module.js:310:12)\nat Module.runMain [as _onTimeout] (module.js:501:10)\nat Timer.listOnTimeout (timers.js:110:15)\n</code></pre>\n\n<p>This is how I have my launch.json file is configured:</p>\n\n<pre><code>{\n\"version\": \"0.1.0\",\n// List of configurations. Add new configurations or edit existing ones.  \n// ONLY \"node\" and \"mono\" are supported, change \"type\" to switch.\n\"configurations\": [\n    {\n        // Name of configuration; appears in the launch configuration drop down menu.\n        \"name\": \"Launch test.rb\",\n        // Type of configuration. Possible values: \"node\", \"mono\".\n        \"type\": \"node\",\n        // Workspace relative or absolute path to the program.\n        \"program\": \"test.rb\",\n        // Automatically stop program after launch.\n        \"stopOnEntry\": true,\n        // Command line arguments passed to the program.\n        \"args\": [],\n        // Workspace relative or absolute path to the working directory of the program being debugged. Default is the current workspace.\n        \"cwd\": \".\",\n        // Workspace relative or absolute path to the runtime executable to be used. Default is the runtime executable on the PATH.\n        \"runtimeExecutable\": null,\n        // Environment variables passed to the program.\n        \"env\": { }\n    }, \n    {\n        \"name\": \"Attach\",\n        \"type\": \"node\",\n        // TCP/IP address. Default is \"localhost\".\n        \"address\": \"localhost\",\n        // Port to attach to.\n        \"port\": 5858\n    }\n]\n}\n</code></pre>\n\n<p>Does anyone know what could be causing this?</p>\n\n<p>P.S. When I use my Aptana Studio plugin in Eclipse, I don't have any issues.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1432698695, "post_id": 30472813, "comment_id": 49025788, "body": "It&#39;s yaml, parse and display what you want?"}, {"owner": {"reputation": 241, "user_id": 4804167, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48558baaa8886060b1c5583c537148d7?s=128&d=identicon&r=PG&f=1", "display_name": "Purry", "link": "https://stackoverflow.com/users/4804167/purry"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1432698971, "post_id": 30472813, "comment_id": 49025875, "body": "You mean to say, the newsletter is stored in Sidekiq as yaml ?"}], "owner": {"reputation": 241, "user_id": 4804167, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48558baaa8886060b1c5583c537148d7?s=128&d=identicon&r=PG&f=1", "display_name": "Purry", "link": "https://stackoverflow.com/users/4804167/purry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1432700558, "creation_date": 1432698503, "last_edit_date": 1432700558, "question_id": 30472813, "link": "https://stackoverflow.com/questions/30472813/sidekiq-accessing-stored-messages-ror", "title": "Sidekiq - Accessing stored messages ROR", "body": "<p>I'm new to Sidekiq and RoR. Scheduled newsletters are stored in Sidekiq until they're posted. The task is that a notification the scheduled details of the newsletter (subject, scheduled at, created at) should be displayed in the form. How do I break it down even further only wanting the specific details? Each scheduled newsletter happens to be a really long string in an array. </p>\n\n<pre><code>$r = Sidekiq::ScheduledSet.new\n\n$r.map {|re| re.args[0]}\n\noutput:\n$ [\"---\\n- !ruby/class 'Subscriber'\\n- :send_in_batch_now!\\n- - \n!ruby/hash:NewsletterOption\\n    welcome_message: ''\\n    \nbody_message: ''\\n    sender_id: 1\\n    sender_name: 8Share Malaysia\\n    \nfrom_email: malaysia@8share.com\\n    country_code: my\\n    test: \nfalse\\n    subject: jkhkjh\\n    campaign_ids:\\n    - '3'\\n    \nscheduled: true\\n    scheduled_at: 2015-05-28 08:45:00.000000000 Z\\n    \nerrors: []\\n    category: version2/d/my/2015/05/26/jkhkjh\\n\"]\n</code></pre>\n\n<p>Many thanks folks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "postgresql", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4880051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2ywZ7.png?s=128&g=1", "display_name": "Dio Void", "link": "https://stackoverflow.com/users/4880051/dio-void"}, "edited": false, "score": 0, "creation_date": 1432714013, "post_id": 30473537, "comment_id": 49032572, "body": "I have installed it, but it didn&#39;t change anything. I am not sure about the second line, you wrote. Where can I find it? Thank you for your response."}, {"owner": {"reputation": 21, "user_id": 4880051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2ywZ7.png?s=128&g=1", "display_name": "Dio Void", "link": "https://stackoverflow.com/users/4880051/dio-void"}, "edited": false, "score": 0, "creation_date": 1432714051, "post_id": 30473537, "comment_id": 49032599, "body": "And actually it is rails_12factor"}, {"owner": {"reputation": 119, "user_id": 2867927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ddb72db1caae6fbbf53721a96ee5254?s=128&d=identicon&r=PG", "display_name": "Mike Skott", "link": "https://stackoverflow.com/users/2867927/mike-skott"}, "reply_to_user": {"reputation": 21, "user_id": 4880051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2ywZ7.png?s=128&g=1", "display_name": "Dio Void", "link": "https://stackoverflow.com/users/4880051/dio-void"}, "edited": false, "score": 0, "creation_date": 1432728789, "post_id": 30473537, "comment_id": 49042844, "body": "Yes, sorry for the typo. The second line should be in your config/environments/production.rb file."}, {"owner": {"reputation": 21, "user_id": 4880051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2ywZ7.png?s=128&g=1", "display_name": "Dio Void", "link": "https://stackoverflow.com/users/4880051/dio-void"}, "edited": false, "score": 0, "creation_date": 1432748239, "post_id": 30473537, "comment_id": 49057085, "body": "I did all you&#39;ve said, but I am still getting this error... (/usr/bin/env: ruby2.2: No such file or directory)"}, {"owner": {"reputation": 21, "user_id": 4880051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2ywZ7.png?s=128&g=1", "display_name": "Dio Void", "link": "https://stackoverflow.com/users/4880051/dio-void"}, "edited": false, "score": 0, "creation_date": 1432748342, "post_id": 30473537, "comment_id": 49057143, "body": "I really don&#39;t know what is wrong with it... Maybe it has something to do with  the BrightBox?"}], "tags": [], "owner": {"reputation": 119, "user_id": 2867927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ddb72db1caae6fbbf53721a96ee5254?s=128&d=identicon&r=PG", "display_name": "Mike Skott", "link": "https://stackoverflow.com/users/2867927/mike-skott"}, "is_accepted": false, "score": 0, "last_activity_date": 1432702807, "creation_date": 1432702807, "answer_id": 30473537, "question_id": 30472709, "link": "https://stackoverflow.com/questions/30472709/deploying-ruby-on-rails-to-heroku/30473537#30473537", "title": "Deploying Ruby on Rails to Heroku", "body": "<p>Do you have the gem rails12_factor installed and <code>config.assets.compile = true</code> ?</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4880051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2ywZ7.png?s=128&g=1", "display_name": "Dio Void", "link": "https://stackoverflow.com/users/4880051/dio-void"}, "edited": false, "score": 0, "creation_date": 1432713841, "post_id": 30474841, "comment_id": 49032474, "body": "Actually, they both doesn&#39;t work. What the log file tells, I&#39;ve wrote above. Thank you for the response."}], "tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1432708439, "creation_date": 1432708439, "answer_id": 30474841, "question_id": 30472709, "link": "https://stackoverflow.com/questions/30472709/deploying-ruby-on-rails-to-heroku/30474841#30474841", "title": "Deploying Ruby on Rails to Heroku", "body": "<p>Not sure you mistyped or something else. but <code>heroku run rails db:migrate</code> will not work it should be <code>heroku run rake db:migrate</code> . It might be because you don't have root page. Precompile issue etc.</p>\n\n<p>Run <code>heroku logs -a app_name</code> to see actual logs.</p>\n"}], "owner": {"reputation": 21, "user_id": 4880051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2ywZ7.png?s=128&g=1", "display_name": "Dio Void", "link": "https://stackoverflow.com/users/4880051/dio-void"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432708439, "creation_date": 1432697764, "question_id": 30472709, "link": "https://stackoverflow.com/questions/30472709/deploying-ruby-on-rails-to-heroku", "title": "Deploying Ruby on Rails to Heroku", "body": "<p>I am trying to upload RoR application to Heroku.</p>\n\n<p>OS - Ubuntu, ruby version - 2.2.2p95, rails version - 4.2.1, database - PostgreSQL, installed RoR via BrightBox (Tutorial from treehouse), using git push heroku master to upload.</p>\n\n<p>On the local server app works fine. When I push it to heroku, it gives out an error:</p>\n\n<pre><code>The page you were looking for doesn't exist.\nYou may have mistyped the address or the page may have moved.\nIf you are the application owner check the logs for more information.\n</code></pre>\n\n<p>Log files say:</p>\n\n<pre><code>/usr/bin/env: ruby2.2: No such file or directory\n</code></pre>\n\n<p>I've tried all the possible variants, I could find on the Internet:</p>\n\n<pre><code>rake rails:update:bin\n\nRemove bin from ~/.gitignore (But there is no such file)\n\nheroku config:set PATH=bin:vendor/bundle/ruby/2.2.2/bin:/usr/local/bin:/usr/bin:/bin\n\nAdding this to the GemFile: ruby '2.2.2'\n\nChanged #!/usr/bin/env ruby2.2(.2 (not sure about \".2\")) to #!/usr/bin/env ruby (in bin/rake, bin/bundle and bin/rails)\n\nheroku run rails db:migrate\nrake rails:update:bin\n\nln -s /usr/bin/nodejs /usr/bin/node\n</code></pre>\n\n<p>To upload to heroku, I've configured git, after that logged in heroku, after that \"heroku create\", after that \"git push heroku master\", then \"heroku open\"</p>\n\n<p>And many others... Any ideas how to solve that problem?</p>\n"}]