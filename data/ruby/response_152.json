[{"tags": ["ruby-on-rails", "ruby", "plugins", "rake", "redmine"], "comments": [{"owner": {"reputation": 3176, "user_id": 218211, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AgAxP.jpg?s=128&g=1", "display_name": "Caleb Hearth", "link": "https://stackoverflow.com/users/218211/caleb-hearth"}, "edited": false, "score": 1, "creation_date": 1512602547, "post_id": 47685038, "comment_id": 82329910, "body": "What have you configured in config/database.yml? It sounds like that may be the culprit so seeing that file may help us answer your question."}, {"owner": {"reputation": 1, "user_id": 9064467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e724261debfb07a94e1bb197614e854?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Miller", "link": "https://stackoverflow.com/users/9064467/alexander-miller"}, "reply_to_user": {"reputation": 3176, "user_id": 218211, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AgAxP.jpg?s=128&g=1", "display_name": "Caleb Hearth", "link": "https://stackoverflow.com/users/218211/caleb-hearth"}, "edited": false, "score": 0, "creation_date": 1512689846, "post_id": 47685038, "comment_id": 82371287, "body": "I just configured the Production Variables firsts, then i tried with the development and test Commented out, then I created seperate databases for Production, Development and Test I&#39;m still gettin the error Here are the Contents of the file:"}, {"owner": {"reputation": 1, "user_id": 9064467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e724261debfb07a94e1bb197614e854?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Miller", "link": "https://stackoverflow.com/users/9064467/alexander-miller"}, "reply_to_user": {"reputation": 3176, "user_id": 218211, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AgAxP.jpg?s=128&g=1", "display_name": "Caleb Hearth", "link": "https://stackoverflow.com/users/218211/caleb-hearth"}, "edited": false, "score": 0, "creation_date": 1512689886, "post_id": 47685038, "comment_id": 82371298, "body": "production:   adapter: mysql2   database: redmine   host: localhost   username: redmine   password: &quot;***********&quot;   encoding: utf8  development:   adapter: mysql2   database: redmine_dev   host: localhost   username: redmine-dev   password: &quot;***********&quot;   encoding: utf8"}, {"owner": {"reputation": 1, "user_id": 9064467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e724261debfb07a94e1bb197614e854?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Miller", "link": "https://stackoverflow.com/users/9064467/alexander-miller"}, "reply_to_user": {"reputation": 3176, "user_id": 218211, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AgAxP.jpg?s=128&g=1", "display_name": "Caleb Hearth", "link": "https://stackoverflow.com/users/218211/caleb-hearth"}, "edited": false, "score": 0, "creation_date": 1512689964, "post_id": 47685038, "comment_id": 82371316, "body": "# Warning: The database defined as &quot;test&quot; will be erased and # re-generated from your development database when you run &quot;rake&quot;. # Do not set this db to the same as development or production. test:   adapter: mysql2   database: redmine_test   host: localhost   username: redmine_test   password: &quot;************&quot;   encoding: utf8"}, {"owner": {"reputation": 1, "user_id": 9064467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e724261debfb07a94e1bb197614e854?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Miller", "link": "https://stackoverflow.com/users/9064467/alexander-miller"}, "reply_to_user": {"reputation": 3176, "user_id": 218211, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AgAxP.jpg?s=128&g=1", "display_name": "Caleb Hearth", "link": "https://stackoverflow.com/users/218211/caleb-hearth"}, "edited": false, "score": 0, "creation_date": 1512689972, "post_id": 47685038, "comment_id": 82371318, "body": "# PostgreSQL configuration example #production: #  adapter: postgresql #  database: redmine #  host: localhost #  username: postgres #  password: &quot;postgres&quot; # SQLite3 configuration example #production: #  adapter: sqlite3 #  database: db/redmine.sqlite3  # SQL Server configuration example #production: #  adapter: sqlserver #  database: redmine #  host: localhost #  username: jenkins #  password: jenkins"}, {"owner": {"reputation": 1, "user_id": 9064467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e724261debfb07a94e1bb197614e854?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Miller", "link": "https://stackoverflow.com/users/9064467/alexander-miller"}, "reply_to_user": {"reputation": 3176, "user_id": 218211, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AgAxP.jpg?s=128&g=1", "display_name": "Caleb Hearth", "link": "https://stackoverflow.com/users/218211/caleb-hearth"}, "edited": false, "score": 0, "creation_date": 1512690071, "post_id": 47685038, "comment_id": 82371353, "body": "Sorry for splitting up the file like that it was only allowing me 600 characters... Thank doe the Quick Reply I really need to get this working ASAP!"}, {"owner": {"reputation": 3176, "user_id": 218211, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AgAxP.jpg?s=128&g=1", "display_name": "Caleb Hearth", "link": "https://stackoverflow.com/users/218211/caleb-hearth"}, "edited": false, "score": 0, "creation_date": 1512746487, "post_id": 47685038, "comment_id": 82394709, "body": "Can you add it to the question so it&#39;s nicely formatted?"}], "owner": {"reputation": 1, "user_id": 9064467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e724261debfb07a94e1bb197614e854?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Miller", "link": "https://stackoverflow.com/users/9064467/alexander-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512785865, "creation_date": 1512601852, "last_edit_date": 1512785865, "question_id": 47685038, "link": "https://stackoverflow.com/questions/47685038/installing-redmine-plugins-gives-me-long-error-list", "title": "Installing Redmine Plugins Gives me Long Error List", "body": "<p>I am having trouble installing plugins in Redmine 3.1.0-stable. I have placed the plugins in the plugin directory and restarted my server using: </p>\n\n<pre><code>bundle exec ruby bin/rails server -b 162.209.99.106 webrick -e production\n</code></pre>\n\n<p>I have also tried to use the command rake redmine:plugins:migrate which gives me this. I see that is says Access denied for user root@localhost but that doesn't make sense as that isn't what is configured in my config/databases.yml? Any advice?</p>\n\n<pre><code>rake aborted!\nMysql2::Error: Access denied for user 'root'@'localhost' (using password: NO)\n/usr/local/rvm/gems/ruby-2.1.0/gems/mysql2-0.3.21/lib/mysql2/client.rb:70:in `connect'\n/usr/local/rvm/gems/ruby-2.1.0/gems/mysql2-0.3.21/lib/mysql2/client.rb:70:in `initialize'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/mysql2_adapter.rb:18:in `new'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/mysql2_adapter.rb:18:in `mysql2_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:436:in `new_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:446:in `checkout_new_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:422:in `acquire_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:349:in `block in checkout'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:348:in `checkout'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:263:in `block in connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:262:in `connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:565:in `retrieve_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_handling.rb:113:in `retrieve_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_handling.rb:87:in `connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/model_schema.rb:230:in `table_exists?'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/attribute_methods/primary_key.rb:97:in `get_primary_key'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/attribute_methods/primary_key.rb:85:in `reset_primary_key'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/attribute_methods/primary_key.rb:73:in `primary_key'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_record/mass_assignment_security/attribute_assignment.rb:15:in `attributes_protected_by_default'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:337:in `block in protected_attributes_configs'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:222:in `yield'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:222:in `protected_attributes'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:126:in `block in attr_protected'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:125:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:125:in `attr_protected'\n/opt/redmine/redmine-3.0.1/app/models/custom_field.rb:32:in `&lt;class:CustomField&gt;'\n/opt/redmine/redmine-3.0.1/app/models/custom_field.rb:18:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:457:in `load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:457:in `block in load_file'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:647:in `new_constants_in'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:456:in `load_file'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:354:in `require_or_load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:494:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:526:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:526:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:526:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:83:in `field_attributes'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:86:in `&lt;class:Base&gt;'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:48:in `&lt;module:FieldFormat&gt;'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:19:in `&lt;module:Redmine&gt;'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:18:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `block in require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/opt/redmine/redmine-3.0.1/lib/redmine.rb:38:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `block in require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/opt/redmine/redmine-3.0.1/config/initializers/30-redmine.rb:6:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `block in load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:652:in `block in load_config_initializer'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:166:in `instrument'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:651:in `load_config_initializer'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:616:in `block (2 levels) in &lt;class:Engine&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:615:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:615:in `block in &lt;class:Engine&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:30:in `instance_exec'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:30:in `run'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:55:in `block in run_initializers'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:44:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:44:in `tsort_each_child'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:54:in `run_initializers'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:352:in `initialize!'\n/opt/redmine/redmine-3.0.1/config/environment.rb:14:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:328:in `require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:328:in `require_environment!'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:443:in `block in run_tasks_blocks'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/exe/rake:27:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `eval'\n/usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; redmine:plugins:migrate =&gt; environment\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>HERE IS THE COMMAND RUN WITH --TRACE flag ( Looks the same to me)</p>\n\n<pre><code>** Invoke redmine:plugins:migrate (first_time)\n** Invoke environment (first_time)\n** Execute environment\nrake aborted!\nMysql2::Error: Access denied for user 'root'@'localhost' (using password: NO)\n/usr/local/rvm/gems/ruby-2.1.0/gems/mysql2-0.3.21/lib/mysql2/client.rb:70:in `connect'\n/usr/local/rvm/gems/ruby-2.1.0/gems/mysql2-0.3.21/lib/mysql2/client.rb:70:in `initialize'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/mysql2_adapter.rb:18:in `new'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/mysql2_adapter.rb:18:in `mysql2_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:436:in `new_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:446:in `checkout_new_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:422:in `acquire_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:349:in `block in checkout'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:348:in `checkout'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:263:in `block in connection'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:262:in `connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:565:in `retrieve_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_handling.rb:113:in `retrieve_connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/connection_handling.rb:87:in `connection'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/model_schema.rb:230:in `table_exists?'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/attribute_methods/primary_key.rb:97:in `get_primary_key'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/attribute_methods/primary_key.rb:85:in `reset_primary_key'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activerecord-4.2.0/lib/active_record/attribute_methods/primary_key.rb:73:in `primary_key'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_record/mass_assignment_security/attribute_assignment.rb:15:in `attributes_protected_by_default'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:337:in `block in protected_attributes_configs'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:222:in `yield'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:222:in `protected_attributes'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:126:in `block in attr_protected'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:125:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/protected_attributes-1.1.4/lib/active_model/mass_assignment_security.rb:125:in `attr_protected'\n/opt/redmine/redmine-3.0.1/app/models/custom_field.rb:32:in `&lt;class:CustomField&gt;'\n/opt/redmine/redmine-3.0.1/app/models/custom_field.rb:18:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:457:in `load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:457:in `block in load_file'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:647:in `new_constants_in'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:456:in `load_file'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:354:in `require_or_load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:494:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:526:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:526:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:526:in `load_missing_constant'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:184:in `const_missing'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:83:in `field_attributes'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:86:in `&lt;class:Base&gt;'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:48:in `&lt;module:FieldFormat&gt;'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:19:in `&lt;module:Redmine&gt;'\n/opt/redmine/redmine-3.0.1/lib/redmine/field_format.rb:18:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `block in require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/opt/redmine/redmine-3.0.1/lib/redmine.rb:38:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `block in require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n/opt/redmine/redmine-3.0.1/config/initializers/30-redmine.rb:6:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `block in load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:652:in `block in load_config_initializer'\n/usr/local/rvm/gems/ruby-2.1.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:166:in `instrument'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:651:in `load_config_initializer'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:616:in `block (2 levels) in &lt;class:Engine&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:615:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/engine.rb:615:in `block in &lt;class:Engine&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:30:in `instance_exec'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:30:in `run'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:55:in `block in run_initializers'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:226:in `block in tsort_each'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:418:in `block (2 levels) in each_strongly_connected_component_from'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:427:in `each_strongly_connected_component_from'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:417:in `block in each_strongly_connected_component_from'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:44:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:44:in `tsort_each_child'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:411:in `call'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:411:in `each_strongly_connected_component_from'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:347:in `block in each_strongly_connected_component'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:345:in `each'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:345:in `call'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:345:in `each_strongly_connected_component'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:224:in `tsort_each'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/tsort.rb:205:in `tsort_each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/initializable.rb:54:in `run_initializers'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:352:in `initialize!'\n/opt/redmine/redmine-3.0.1/config/environment.rb:14:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:328:in `require'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:328:in `require_environment!'\n/usr/local/rvm/gems/ruby-2.1.0/gems/railties-4.2.0/lib/rails/application.rb:443:in `block in run_tasks_blocks'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:251:in `call'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:251:in `block in execute'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:251:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:251:in `execute'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:195:in `block in invoke_with_call_chain'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:188:in `invoke_with_call_chain'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:217:in `block in invoke_prerequisites'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:215:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:215:in `invoke_prerequisites'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'\n/usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:188:in `invoke_with_call_chain'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/task.rb:181:in `invoke'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:160:in `invoke_task'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:116:in `each'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:116:in `block in top_level'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:125:in `run_with_threads'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:110:in `top_level'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:83:in `block in run'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:186:in `standard_exception_handling'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/lib/rake/application.rb:80:in `run'\n/usr/local/rvm/gems/ruby-2.1.0/gems/rake-12.3.0/exe/rake:27:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/bin/rake:23:in `load'\n/usr/local/rvm/gems/ruby-2.1.0/bin/rake:23:in `&lt;main&gt;'\n/usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `eval'\n/usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; redmine:plugins:migrate =&gt; environment\n</code></pre>\n\n<p>HERE IS THE ERROR -------- </p>\n\n<pre><code> # production: adapter: mysql2 database: redmine host: localhost username: \n redmine password: \"***********\" encoding: utf8 development: adapter: mysql2 \n database: redmine_dev host: localhost username: redmine-dev password: \n \"***********\" encoding: utf8 \n # Warning: The database defined as \"test\" will be erased and \n # re-generated from your development database when you run \"rake\". \n # Do not set this db to the same as development or production. test: adapter: \n mysql2 database: redmine_test host: localhost username: redmine_test \n password: \n \"************\" encoding: utf8 \n\n # PostgreSQL configuration example \n #production: # adapter: postgresql \n # database: redmine \n # host: localhost \n # username: postgres \n # password: \"postgres\" \n\n # SQLite3 configuration example \n #production: \n # adapter: sqlite3 \n # database: db/redmine.sqlite3 \n # SQL Server configuration example #production: \n # adapter: sqlserver \n # database: redmine \n # host: localhost \n # username: jenkins \n # password: jenkins \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "drop-down-menu", "rubygems"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1512597906, "post_id": 47684097, "comment_id": 82328054, "body": "Is the select rendered correctly? If you&#39;re having problems saving to the database (and not rendering the select), then you should show us, minimally, your console output and the code where you expect the data to be saved. Otherwise, there&#39;s nothing we can do to help you."}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1512599413, "post_id": 47684097, "comment_id": 82328707, "body": "@jvillian ,I am just going through the example provided by the city-state gem ,here is the link: <a href=\"https://www.learnwithdaniel.com/2015/02/citystate-list-of-countries-cities-and-states-ruby/\" rel=\"nofollow noreferrer\">learnwithdaniel.com/2015/02/&hellip;</a>   , I have also put up the logs, please do take a look. Thanks :-)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 0, "creation_date": 1512600717, "post_id": 47684683, "comment_id": 82329203, "body": "Damn your absolutely correct, it worked... Thanks mate :-D"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1512599999, "creation_date": 1512599999, "answer_id": 47684683, "question_id": 47684097, "link": "https://stackoverflow.com/questions/47684097/states-not-getting-stored-in-database-using-city-state-gem-in-ruby-on-rails/47684683#47684683", "title": "States not getting stored in database using city-state gem in ruby on rails", "body": "<p>I'm guessing (since you didn't show us your controller code) that you expect <code>state</code> to be a part of the <code>user</code> params. But, as you can see, it is not:</p>\n\n<pre><code>{\n  \"utf8\"=&gt;\"\u2713\",\n  \"authenticity_token\"=&gt;\"w1dXvna7zYZ96f9pNtCdm3ruIHu/J9+kXZ6rxoPy+7QJCqTDAs+Y1ZcOgUvRiJEEZpyJ3S0qpLEbfoKEr+15bw==\", \n  \"user\"=&gt;{\n    \"firstname\"=&gt;\"Han\", \n    \"lastname\"=&gt;\"Park\", \n    \"gender\"=&gt;\"Male\", \n    \"dob(1i)\"=&gt;\"1996\", \n    \"dob(2i)\"=&gt;\"12\", \n    \"dob(3i)\"=&gt;\"6\", \n    \"ssn\"=&gt;\"1432229824\", \n    \"driver_license\"=&gt;\"D768765764\", \n    \"street_address\"=&gt;\"1000 north\", \n    \"city\"=&gt;\"New York\", \n    \"zip\"=&gt;\"60098\", \n    \"email\"=&gt;\"han@gmail.com\", \n    \"password\"=&gt;\"[FILTERED]\", \n    \"password_confirmation\"=&gt;\"[FILTERED]\", \n    \"tandc\"=&gt;\"true\"\n  }, \n  \"state\"=&gt;\"MD\", \n  \"commit\"=&gt;\"Sign Up\"\n}\n</code></pre>\n\n<p>I <em>think</em> it's because you do:</p>\n\n<pre><code>&lt;select name=\"form[state]\"&gt;\n</code></pre>\n\n<p>You probably want something like:</p>\n\n<pre><code>&lt;select name=\"user[state]\"&gt;\n</code></pre>\n\n<p>I'm not sure about that syntax, so you'll have to monkey with it. </p>\n"}, {"tags": [], "owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "is_accepted": false, "score": 2, "last_activity_date": 1512606934, "creation_date": 1512606934, "answer_id": 47685760, "question_id": 47684097, "link": "https://stackoverflow.com/questions/47684097/states-not-getting-stored-in-database-using-city-state-gem-in-ruby-on-rails/47685760#47685760", "title": "States not getting stored in database using city-state gem in ruby on rails", "body": "<p>Instead of building out the form tag and options manually wouldn\u2019t it be cleaner to let rails do it? This would also have fixed the name issue for you:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, :class=&gt;'well form-horizontal' ,:style=&gt;\"margin-top:30px\",url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= f.select :state, CS.states(:us) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Rails will also handle populating the current value when editing for you this way. </p>\n"}], "owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512606934, "creation_date": 1512597388, "last_edit_date": 1512600118, "question_id": 47684097, "link": "https://stackoverflow.com/questions/47684097/states-not-getting-stored-in-database-using-city-state-gem-in-ruby-on-rails", "title": "States not getting stored in database using city-state gem in ruby on rails", "body": "<p>so I am using a gem called city-state gem in my web application to populate a dropdown list with the 50 states of US, but I am unable to save the selected value in the database,maybe I am missing something here, I have the following code:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, :class=&gt;'well form-horizontal' ,:style=&gt;\"margin-top:30px\",url: registration_path(resource_name)) do |f| %&gt;\n  &lt;select name=\"form[state]\"&gt;\n    &lt;% CS.states(:us).each do |key, value| %&gt;\n      &lt;option value=\"&lt;%= key %&gt;\"&gt;&lt;%= value %&gt;&lt;/option&gt;\n    &lt;% end %&gt;\n  &lt;/select&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I tried using </p>\n\n<pre><code>&lt;%= f.select :state, value %&gt; \n</code></pre>\n\n<p>but that would give me an empty dropdown list, any help appreciated.Thanks in advance. </p>\n\n<pre><code>Processing by Devise::RegistrationsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\",\"authenticity_token\"=&gt;\"w1dXvna7zYZ96f9pNtCdm3ruIHu/J9+kXZ6rxoPy+7QJCqTDAs+Y1ZcOgUvRiJEEZpyJ3S0qpLEbfoKEr+15bw==\", \"user\"=&gt;{\"firstname\"=&gt;\"Han\", \"lastname\"=&gt;\"Park\", \"gender\"=&gt;\"Male\", \"dob(1i)\"=&gt;\"1996\", \"dob(2i)\"=&gt;\"12\", \"dob(3i)\"=&gt;\"6\", \"ssn\"=&gt;\"1432229824\", \"driver_license\"=&gt;\"D768765764\", \"street_address\"=&gt;\"1000 north\", \"city\"=&gt;\"New York\", \"zip\"=&gt;\"60098\", \"email\"=&gt;\"han@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"tandc\"=&gt;\"true\"}, \"state\"=&gt;\"MD\", \"commit\"=&gt;\"Sign Up\"}\nDEPRECATION WARNING: ssn is not an attribute known to Active Record. This \nbehavior is deprecated and will be removed in the next version of Rails. If \nyou'd like ssn to be managed by Active Record, add `attribute :ssn to your \nclass. (called from block in attr_encrypted at /Users/reynold/.rvm/gems/ruby-\n2.2.2/gems/attr_encrypted-\n3.0.3/lib/attr_encrypted/adapters/active_record.rb:75)\n(0.3ms)  BEGIN \nUser Exists (0.8ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"email\" = $1 \nLIMIT $2  [[\"email\", \"han@saveup.com\"], [\"LIMIT\", 1]]\nSQL (6.2ms)  INSERT INTO \"users\" (\"email\", \"encrypted_password\", \"created_at\", \n\"updated_at\", \"firstname\", \"lastname\", \"gender\", \"encrypted_ssn\", \n\"encrypted_ssn_iv\", \"street_address\", \"city\", \"zip\", \"driver_license\", \n\"tandc\", \"dob\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, \n$13, $14, $15) RETURNING \"id\"  [[\"email\", \"han@saveup.com\"], \n[\"encrypted_password\", \n\"$2a$11$asC6.rG.aYUXJa8Ps.Gbeu3FzTFw64urmIB2KK9rxj94sH71gXaYm\"], \n[\"created_at\", \"2017-12-06 22:17:55.383121\"], [\"updated_at\", \"2017-12-06 \n22:17:55.383121\"], [\"firstname\", \"Han\"], [\"lastname\", \"Park\"], [\"gender\", \n\"Male\"], [\"encrypted_ssn\", \"eWjL/lDpivR3T9cXx1w6rg==\\n\"], [\"encrypted_ssn_iv\", \n\"Rt/5Tl6PkwvqOjDC9nN1ng==\\n\"], [\"street_address\", \"1000 north\"], [\"city\", \n\"New York\"], [\"zip\", \"60098\"], [\"driver_license\", \"D768765764\"], [\"tandc\", \n\"t\"], [\"dob\", \"1996-12-06\"]]\n(0.6ms)  COMMIT\n(0.3ms)  BEGIN\nSQL (2.4ms)  UPDATE \"users\" SET \"sign_in_count\" = $1, \"current_sign_in_at\" = \n$2, \"last_sign_in_at\" = $3, \"current_sign_in_ip\" = $4, \"last_sign_in_ip\" = $5, \n\"updated_at\" = $6 WHERE \"users\".\"id\" = $7  [[\"sign_in_count\", 1], \n[\"current_sign_in_at\", \"2017-12-06 22:17:55.397080\"], [\"last_sign_in_at\", \n\"2017-12-06 22:17:55.397080\"], [\"current_sign_in_ip\", \"127.0.0.1/32\"], \n[\"last_sign_in_ip\", \"127.0.0.1/32\"], [\"updated_at\", \"2017-12-06 \n22:17:55.398231\"], [\"id\", 18]]\n(0.5ms)  COMMIT\nRedirected to http://localhost:3000/\nCompleted 302 Found in 276ms (ActiveRecord: 11.1ms)\n\n\nStarted GET \"/\" for 127.0.0.1 at 2017-12-06 16:17:55 -0600\nUser Load (0.8ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 \nORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 18], [\"LIMIT\", 1]]\nProcessing by HomeController#roothome as HTML\nRendering home/roothome.html.erb within layouts/application\nRendered shared/_comparechart.html.erb (1.0ms)\nRendered shared/_disclaimer.html.erb (0.7ms)\nRendered home/roothome.html.erb within layouts/application (8.1ms)\nRendered _navbar.html.erb (4.6ms)\nCompleted 200 OK in 478ms (Views: 474.8ms | ActiveRecord: 0.0ms)\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 2, "creation_date": 1512594537, "post_id": 47683144, "comment_id": 82326393, "body": "That partial doesn&#39;t render anything, it just adds the javascript to the <code>:javascript</code> content store. Usually this <code>content_for</code> technique has a corresponding <code>&lt;%= yield :javascript %&gt;</code> or <code>&lt;%= content_for :javascript %&gt;</code> elsewhere in a layout."}, {"owner": {"reputation": 69, "user_id": 1591185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f1807311e94158e06dcd5eb3d0147ff0?s=128&d=identicon&r=PG", "display_name": "zack", "link": "https://stackoverflow.com/users/1591185/zack"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1512627820, "post_id": 47683144, "comment_id": 82336792, "body": "Thanks Aaron Breckenridge going to try yeild :)"}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 2803000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4d0572c8d751a958944afd8c55ed88?s=128&d=identicon&r=PG", "display_name": "Hitesh Ranaut", "link": "https://stackoverflow.com/users/2803000/hitesh-ranaut"}, "is_accepted": true, "score": 2, "last_activity_date": 1512628584, "creation_date": 1512628584, "answer_id": 47689013, "question_id": 47683144, "link": "https://stackoverflow.com/questions/47683144/rails-partial-rendering-html-does-not-run-javascript/47689013#47689013", "title": "rails partial rendering html does not run javascript", "body": "<p>If you want to render Javascript in rails use below method.</p>\n\n<p>Controller Code looks like:</p>\n\n<pre><code>def create\n  @user = User.find(params[:id])\n  respond_to do |format|\n    format.html {redirect_to @user }\n    format.js\n  end\nend\n</code></pre>\n\n<p>template this code going to render will look like.</p>\n\n<p>filename:  create.js.erb</p>\n\n<pre><code> $(\"#someidname\").html(\"&lt;%= @user.email %&gt;\");\n</code></pre>\n\n<p>Note @user is also available here. you can render other partial also like:</p>\n\n<pre><code>$(\"#someit\").html(\"&lt;%= escape_javascript(render('users/email')) %&gt;\");\n</code></pre>\n\n<p>Also, make sure you are sending ajax request. </p>\n"}], "owner": {"reputation": 69, "user_id": 1591185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f1807311e94158e06dcd5eb3d0147ff0?s=128&d=identicon&r=PG", "display_name": "zack", "link": "https://stackoverflow.com/users/1591185/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "accepted_answer_id": 47689013, "answer_count": 1, "score": 1, "last_activity_date": 1512628584, "creation_date": 1512593036, "question_id": 47683144, "link": "https://stackoverflow.com/questions/47683144/rails-partial-rendering-html-does-not-run-javascript", "title": "rails partial rendering html does not run javascript", "body": "<p>Hi I am calling a partial from controller file but the javascript inside the partial is not executing . The partial is of .html.erb format.</p>\n\n<pre><code>&lt;% content_for :javascript do %&gt;\n\n  &lt;script type=\"text/javascript\"&gt;\n    var eventName = typeof(Turbolinks) !== 'undefined' ? 'page:change' : 'DOMContentLoaded';\n\n    document.addEventListener(eventName, function() {\n      console.log(\"hello\");\n\n\n      &lt;% if flash[:notice] %&gt;\n        ShopifyApp.flashNotice(\"&lt;%= escape_javascript flash[:notice].html_safe %&gt;\");\n      &lt;% end %&gt;\n\n      &lt;% if flash[:error] %&gt;\n        ShopifyApp.flashError(\"&lt;%= escape_javascript flash[:error].html_safe %&gt;\");\n      &lt;% end %&gt;\n    });\n  &lt;/script&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>is the code for partial </p>\n\n<pre><code> respond_to do |format| \n    if @timer.save\n\n\n\n      flash[:notice]=\"updated\"\n      format.html{render :partial =&gt; \"layouts/flash_messages\", :locals =&gt; {:flash =&gt; flash}}\n\n\n\n\n\n    else\n        flash[:error]=\"error\"\n      format.html{render :partial =&gt; \"layouts/flash_messages\", :locals =&gt; {:flash =&gt; flash}}\n    end\n</code></pre>\n\n<p>is the controller code .</p>\n"}, {"tags": ["ruby", "sinatra", "ruby-datamapper", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "edited": false, "score": 0, "creation_date": 1512590588, "post_id": 47681724, "comment_id": 82324273, "body": "Any suggestions would be great"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1512592020, "post_id": 47681724, "comment_id": 82325065, "body": "I&#39;m not very familiar with DataMapper, but the standard way to do this would be as a one-to-many relationship where each name has many rows in a Popularity table. So you need another model."}, {"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1512594744, "post_id": 47681724, "comment_id": 82326514, "body": "okay, but wouldnt all the numbers get seperated, then I wouldnt know which set of numbers are for which person"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1512595567, "post_id": 47681724, "comment_id": 82326916, "body": "You need a foreign key from popularity to name."}, {"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1512596694, "post_id": 47681724, "comment_id": 82327485, "body": "okay, i guess ill  try to figure that out...aside from that. the code i have above doesnt work when i do User.create()..its causing an internal server error and idk why"}, {"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1512598103, "post_id": 47681724, "comment_id": 82328132, "body": "nevermind fixed it"}], "owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512600398, "creation_date": 1512587171, "last_edit_date": 1512600398, "question_id": 47681724, "link": "https://stackoverflow.com/questions/47681724/how-do-i-save-large-amount-of-data-into-db-using-datamapper", "title": "how do i save large amount of data into DB using DataMapper", "body": "<p>Im trying to insert into the database but sinatra throws this error</p>\n\n<p>DataObjects::ConnectionError at /\ndatabase is locked</p>\n\n<p>at line  Name.create(babyname: name ,year1900: results[0] ,year1910: results[1] ,year1920: results[2] ,year1930: results[3],year1940: results[4],year1950: results[5] ,year1960: results[6],year1970: results[7] ,year1980: results[8] ,year1990: results[9] ,year2000: results[10])</p>\n\n<p>This is how im reading the text file and creating the name</p>\n\n<pre><code>File.open(\"names-data.txt\", \"r\") do |f|\nf.each_line do |line|\n  item = line.split(/\\n/)\n  array = item[0].split(/\\s+/)\n  name = array[0]\n  array.shift\n  pop = array\n  results = pop.map { |number| if number =~ /0/ then 1001 else number.to_i end }\n Name.create(babyname: name ,year1900: results[0] ,year1910: results[1] ,year1920: results[2] ,year1930: results[3],year1940: results[4],year1950: results[5] ,year1960: results[6],year1970: results[7] ,year1980: results[8] ,year1990: results[9] ,year2000: results[10])\nend\n</code></pre>\n\n<p>end</p>\n\n<p>Here are a few lines in the text file that i am reading</p>\n\n<p>Abbigail 0 0 0 0 0 0 0 0 0 953 562</p>\n\n<p>Abby 0 0 0 0 0 906 782 548 233 211 209</p>\n\n<p>Abdiel 0 0 0 0 0 0 0 0 0 925 721</p>\n\n<p>There are over 4000 lines</p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512589328, "post_id": 47681712, "comment_id": 82323603, "body": "Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your code, and a clear description of what you&#39;re trying to achieve (and why it&#39;s not working)? What is <code>start</code>? How are <code>menu_one</code> and <code>menu_three</code> defined? (Is there a <code>menu_two</code>?!)"}, {"owner": {"reputation": 1, "user_id": 8789813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11e7debb54e4d2d482b40fecef16?s=128&d=identicon&r=PG&f=1", "display_name": "Frederikstubbe", "link": "https://stackoverflow.com/users/8789813/frederikstubbe"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512590737, "post_id": 47681712, "comment_id": 82324368, "body": "@TomLord I have just updatet my question and sorry still pretty new in this"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512591323, "post_id": 47681712, "comment_id": 82324693, "body": "Your code is broken in multiple ways... It needs significant restructuring to even execute. <code>select</code> is a name collision with a <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-select\" rel=\"nofollow noreferrer\">built-in method</a>, you should use another name; <code>loop do (condition)</code> should be <code>while(condition) do</code>; and you&#39;re trying to reference variables all over the place without passing them into the methods."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512591672, "post_id": 47681712, "comment_id": 82324867, "body": "For example, how is <code>Start#method_one</code> supposed to know the value of <code>select</code>? Unless you make it a global variable (don&#39;t!), it needs to be passed in as a parameter to the method."}, {"owner": {"reputation": 1, "user_id": 8789813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11e7debb54e4d2d482b40fecef16?s=128&d=identicon&r=PG&f=1", "display_name": "Frederikstubbe", "link": "https://stackoverflow.com/users/8789813/frederikstubbe"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512592107, "post_id": 47681712, "comment_id": 82325103, "body": "@TomLord dont quite sure I understand you, if you take out the start.menu_three the code works fine until you get to the menu_two?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512597244, "post_id": 47681712, "comment_id": 82327738, "body": "So you&#39;e changed the code significantly since my last comment... But it&#39;s still very much broken, in many ways. You&#39;re defining <code>menu_one</code> <i>inside</i> the definition of <code>menu_two</code> (fix the indentation, and it becomes much easier to see!); you&#39;re still not passing variables around; your code still raises the above mentioned error: &quot;&#39;select&#39;: wrong number of arguments (given 0, expected 1..4) (ArgumentError)&quot;; ..."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512597303, "post_id": 47681712, "comment_id": 82327763, "body": "I advise you to scrap this for now, and start on something smaller and simpler. There are so many issues that it basically needs to be re-written anyway. Why not start with a simple method definition <i>that takes in some parameters</i>, so you can learn the basics of passing arguments to a method?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512602488, "post_id": 47681712, "comment_id": 82329884, "body": "&quot;I can&#39;t run the code?&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512602589, "post_id": 47681712, "comment_id": 82329931, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with a focus on <i>minimal</i>. You shouldn&#39;t really need 43 lines to demonstrate your problem, I&#39;m willing to bet 3-4 lines are more than enough."}, {"owner": {"reputation": 1, "user_id": 8789813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11e7debb54e4d2d482b40fecef16?s=128&d=identicon&r=PG&f=1", "display_name": "Frederikstubbe", "link": "https://stackoverflow.com/users/8789813/frederikstubbe"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512603589, "post_id": 47681712, "comment_id": 82330311, "body": "@J&#246;rgWMittag So the code should end out to be a program that include this: Admins should be able to: - create a new multiple choice test - view test results for each student (the specific answers and the score)  Student users should able to - take the test and get a test score - view his/her own answers  I&#39;m just trying to get all the differents menus to work right now"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512604012, "post_id": 47681712, "comment_id": 82330468, "body": "You still haven&#39;t told us what the problem is with your code. &quot;I can&#39;t run the code?&quot; is not a precise enough problem statement that we would be able to help you. It isn&#39;t even a statement <i>at all</i>, it is a <i>question</i> \u2026 how should we know whether you can run the code? Is there an error message? If yes, what does it say? Where does it occur? Under what conditions does it occur? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512604052, "post_id": 47681712, "comment_id": 82330482, "body": "Can you narrow down the problematic code some more? I highly doubt it requires over 40 lines of code to demonstrate the problem, usually about 3-4 lines are enough."}, {"owner": {"reputation": 1, "user_id": 8789813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11e7debb54e4d2d482b40fecef16?s=128&d=identicon&r=PG&f=1", "display_name": "Frederikstubbe", "link": "https://stackoverflow.com/users/8789813/frederikstubbe"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512604537, "post_id": 47681712, "comment_id": 82330659, "body": "@J&#246;rgWMittag, okay I will try to be more specific. When I run the program and presses 1 to &quot;login as admin&quot; it says:   /Users/frederikstubbe/Documents/Ruby/ITeksamen.rb:8:in <code>select&#39;: wrong number of arguments (0 for 1..4) (ArgumentError) from &#47;Users&#47;frederikstubbe&#47;Documents&#47;Ruby&#47;ITeksamen.rb:8:in </code>menu_one&#39; from/Users/frederikstubbe/Documents/Ruby/ITeksamen.rb:55:in<code>&lt;&zwnj;&#8203;class:Start&gt;&#39; from &#47;Users&#47;frederikstubbe&#47;Documents&#47;Ruby&#47;ITeksamen.rb:4:in </code>&lt;main&gt;&#39;   If I take away the &quot; start.menu_three&quot; is working finte. But I want to be able to go in the Method menu_three from the method menu_one."}, {"owner": {"reputation": 1, "user_id": 8789813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11e7debb54e4d2d482b40fecef16?s=128&d=identicon&r=PG&f=1", "display_name": "Frederikstubbe", "link": "https://stackoverflow.com/users/8789813/frederikstubbe"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512604577, "post_id": 47681712, "comment_id": 82330677, "body": "@J&#246;rgWMittag sorry I&#39;m really new at Ruby, only got like 6 lessons in school and still trying to learn"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512604851, "post_id": 47681712, "comment_id": 82330761, "body": "Frederikstubbe, I already told you why this error is appearing. Twice. You are not passing a variable to the method, and your variable name conflicts with another built-in ruby method."}, {"owner": {"reputation": 1, "user_id": 8789813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11e7debb54e4d2d482b40fecef16?s=128&d=identicon&r=PG&f=1", "display_name": "Frederikstubbe", "link": "https://stackoverflow.com/users/8789813/frederikstubbe"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512605744, "post_id": 47681712, "comment_id": 82331027, "body": "@TomLord how do I pass the variable to the method?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512638632, "post_id": 47681712, "comment_id": 82342163, "body": "@Frederikstubbe <code>def method_one(var1, var2, ...)</code>. Honestly, my advice would be to park this project for now and start by reading some beginners programming guides (e.g. <a href=\"https://www.tutorialspoint.com/ruby/ruby_methods.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/ruby/ruby_methods.htm</a>) or even follow some basic tutorials (e.g. <a href=\"https://www.codecademy.com/learn/learn-ruby\" rel=\"nofollow noreferrer\">codecademy.com/learn/learn-ruby</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 6248, "user_id": 3421652, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/myqs7.jpg?s=128&g=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/3421652/roman"}, "edited": false, "score": 0, "creation_date": 1554397460, "post_id": 55520145, "comment_id": 97747192, "body": "I&#39;ve edited your code to be more readible.  SO renders code blocks as everything with 4 spaces before.  There is a little button <code>{ }</code> that does code formatting. Additionally, please add some explanation.  SO frowns on code-only answers. Happy contributing, and welcome to SO!"}], "tags": [], "owner": {"reputation": 1, "user_id": 10998875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a014d757b43e5a9fab1b6b8d580f4bf?s=128&d=identicon&r=PG&f=1", "display_name": "Caddaawe", "link": "https://stackoverflow.com/users/10998875/caddaawe"}, "is_accepted": false, "score": 0, "last_activity_date": 1554397384, "last_edit_date": 1554397384, "creation_date": 1554392881, "answer_id": 55520145, "question_id": 47681712, "link": "https://stackoverflow.com/questions/47681712/use-loop-do-to-creat-a-text-menu-in-a-method/55520145#55520145", "title": "Use loop do to creat a text menu in a method", "body": "<pre><code>class Start\n\n  def menu_one \n\n    while (select !=2)  \n    puts \"Press 1 to make a new test\"\n    puts \"Press 2 to search after test results\"\n    if (select == 1)\n      start.menu_three\n      break\n    elsif (select == 2) # its here the problem is? \n    end\n\n  def menu_two\n    puts \"Press 1 to see the overview of the tests\"\n  end\nend\n\n  def menu_three\n    puts \"hej\"\n  end\nend \n\n  start = Start.new\n  require 'io/console'\n  select = 0\n\n\n  puts \"Welcome to the multiple choice test\"\n\n  while (select !=3)\n    puts \"Press 1 to login as admin\"\n      puts \"\\n\"\n    puts \"Press 2 to login as student\"\n      puts \"\\n\"\n    puts \"Press 3 to exit \"\n      puts \"\\n\"\n    select = STDIN.getch.to_i \n\n    if (select == 1)\n    start.menu_one\n    break\n\n  elsif (select == 2)\n\n    start.menu_two\n    break \n\n  elsif (select == 3)\n    puts \"You have now exited the program\"\n    abort\n  end\n\nend \nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8789813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c11e7debb54e4d2d482b40fecef16?s=128&d=identicon&r=PG&f=1", "display_name": "Frederikstubbe", "link": "https://stackoverflow.com/users/8789813/frederikstubbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554397384, "creation_date": 1512587123, "last_edit_date": 1512591551, "question_id": 47681712, "link": "https://stackoverflow.com/questions/47681712/use-loop-do-to-creat-a-text-menu-in-a-method", "title": "Use loop do to creat a text menu in a method", "body": "<p>I'm really new in Ruby.</p>\n\n<p>So I did make one menu in the loop, that send me to \"start.menu_one\" but can I make another loop in the \"def menu_one\" that can send me to \"def menu_three\"</p>\n\n<p>The problem is I can't run the code? Do any of you know what the problem is, because I can't find it. </p>\n\n<pre><code>file = File.new(\".txt\", \"a\")\n\n\nclass Start\n\n  def menu_one \n\n    while (select !=2)  \n    puts \"Press 1 to make a new test\"\n    puts \"Press 2 to search after test results\"\n    if (select == 1)\n      start.menu_three\n      break\n    elsif (select == 2) # its here the problem is? \n    end\n\n  def menu_two\n    puts \"Press 1 to see the overview of the tests\"\n  end\nend\n\n  def menu_three\n    puts \"hej\"\n  end\nend \n\n  start = Start.new\n  require 'io/console'\n  select = 0\n\n\n  puts \"Welcome to the multiple choice test\"\n\n  while (select !=3)\n    puts \"Press 1 to login as admin\"\n      puts \"\\n\"\n    puts \"Press 2 to login as student\"\n      puts \"\\n\"\n    puts \"Press 3 to exit \"\n      puts \"\\n\"\n    select = STDIN.getch.to_i \n\n    if (select == 1)\n    start.menu_one\n    break\n\n  elsif (select == 2)\n\n    start.menu_two\n    break \n\n  elsif (select == 3)\n    puts \"You have now exited the program\"\n    abort\n  end\n\nend \nend\n</code></pre>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 3217, "user_id": 995931, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/800518b9616592cb23fb1654925db06f?s=128&d=identicon&r=PG&f=1", "display_name": "user-44651", "link": "https://stackoverflow.com/users/995931/user-44651"}, "edited": false, "score": 0, "creation_date": 1512583760, "post_id": 47680663, "comment_id": 82320759, "body": "What error are you having?"}, {"owner": {"reputation": 27872, "user_id": 105518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e47ca9372faad8084cbaf9f90c6a75?s=128&d=identicon&r=PG", "display_name": "Marc LaFleur", "link": "https://stackoverflow.com/users/105518/marc-lafleur"}, "edited": false, "score": 0, "creation_date": 1512587040, "post_id": 47680663, "comment_id": 82322358, "body": "Welcome to Stack Overflow! Since you are new user, I recommend you read <a href=\"https://stackoverflow.com/help/how-to-ask\">&quot;How to Ask a Good Question&quot;</a>."}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1512598262, "post_id": 47680663, "comment_id": 82328184, "body": "Did you install the <a href=\"https://rubyinstaller.org/add-ons/devkit.html\" rel=\"nofollow noreferrer\">devkit</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 6328, "user_id": 515774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HEi63.jpg?s=128&g=1", "display_name": "Muthukumar", "link": "https://stackoverflow.com/users/515774/muthukumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1512586216, "creation_date": 1512586216, "answer_id": 47681472, "question_id": 47680663, "link": "https://stackoverflow.com/questions/47680663/error-error-installing-yajl-ruby/47681472#47681472", "title": "ERROR: Error installing yajl-ruby:", "body": "<p>Most probably, the issue is due to msys2 not being installed properly. Check by updating msys2 by running <code>ridk install</code></p>\n\n<p>check here for more info on successfully ypdating msys2 <a href=\"https://stackoverflow.com/questions/47328474/install-ruby-2-4-1-in-windows-within-corporate-proxy-msys2-update-fails\">Install Ruby 2.4.1 in windows within corporate proxy. MSYS2 update fails</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9062954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/933192aa1dcf61c3f4c778fc3963e902?s=128&d=identicon&r=PG&f=1", "display_name": "yewoxihuwi", "link": "https://stackoverflow.com/users/9062954/yewoxihuwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512589972, "creation_date": 1512583180, "last_edit_date": 1512589972, "question_id": 47680663, "link": "https://stackoverflow.com/questions/47680663/error-error-installing-yajl-ruby", "title": "ERROR: Error installing yajl-ruby:", "body": "<p>Please help... i was tryed all ruby versions and have the same error.</p>\n\n<p>!!!!THIS IS WINDOWS!!!!</p>\n\n<pre><code>    gem install yajl-ruby\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing yajl-ruby:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/Ruby/lib/ruby/gems/2.4.0/gems/yajl-ruby-1.3.1/ext/yajl\nC:/Ruby/bin/ruby.exe -r ./siteconf20171206-2828-1djbqt4.rb extconf.rb\ncreating Makefile\n\ncurrent directory: C:/Ruby/lib/ruby/gems/2.4.0/gems/yajl-ruby-1.3.1/ext/yajl\nmake \"DESTDIR=\" clean\n\"make\" \ufffd\ufffd \uf8ab\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\u096d\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\u8b65\ufffd\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd, \ufffd\u1bee\ufffd\ufffd\uf96c\ufffd\ufffd \ufffd\u0ba3\u082c\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u4829\ufffd\ufffd\ufffd.\n\ncurrent directory: C:/Ruby/lib/ruby/gems/2.4.0/gems/yajl-ruby-1.3.1/ext/yajl\nmake \"DESTDIR=\"\n\"make\" \ufffd\ufffd \uf8ab\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\u096d\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\u8b65\ufffd\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd, \ufffd\u1bee\ufffd\ufffd\uf96c\ufffd\ufffd \ufffd\u0ba3\u082c\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u4829\ufffd\ufffd\ufffd.\n\nmake failed, exit code 1\n\nGem files will remain installed in C:/Ruby/lib/ruby/gems/2.4.0/gems/yajl-ruby-1.3.1 for inspection.\nResults logged to C:/Ruby/lib/ruby/gems/2.4.0/extensions/x64-mingw32/2.4.0/yajl-ruby-1.3.1/gem_make.out\n</code></pre>\n\n<p>google does not help me also.</p>\n\n<p><strong>UPDATE:</strong> the problem was fixed by installing kali linux.\nthe problem was the windows. \nthank you all.\ni lost my day on it.</p>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 1, "creation_date": 1512584450, "post_id": 47680384, "comment_id": 82321094, "body": "Please fix your code indentation so it is readable."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 2, "creation_date": 1512584603, "post_id": 47680384, "comment_id": 82321170, "body": "What @coderanger said and also It appears you have an extra <code>end</code> prior to <code>EOH</code> as well"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5562536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50397efc156637501d777d2b92c45f37?s=128&d=identicon&r=PG&f=1", "display_name": "padmaksha roy", "link": "https://stackoverflow.com/users/5562536/padmaksha-roy"}, "edited": false, "score": 0, "creation_date": 1512715572, "post_id": 47683753, "comment_id": 82377939, "body": "Thanks for the reply. Indentation is not the issue. I just want to know if there is some way I can use the &quot;version&quot; variable outside the ruby resource of my recipe code. Just like making a variable global. Thanks again."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 135, "user_id": 5562536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50397efc156637501d777d2b92c45f37?s=128&d=identicon&r=PG&f=1", "display_name": "padmaksha roy", "link": "https://stackoverflow.com/users/5562536/padmaksha-roy"}, "edited": false, "score": 0, "creation_date": 1512757596, "post_id": 47683753, "comment_id": 82400800, "body": "My answer isn&#39;t related to indentation."}, {"owner": {"reputation": 135, "user_id": 5562536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50397efc156637501d777d2b92c45f37?s=128&d=identicon&r=PG&f=1", "display_name": "padmaksha roy", "link": "https://stackoverflow.com/users/5562536/padmaksha-roy"}, "edited": false, "score": 0, "creation_date": 1512907741, "post_id": 47683753, "comment_id": 82437565, "body": "Hi, sorry I missed it. Yes, I got it now. The chef resources do not run in the same process as the main ruby code,hence variables are out of scope. Does it create a separate subprocess for each resource I declare ,normally subprocess.popen etc also creates a subprocess from the main process but the execution of the subprocess can be returned to the main process.Anything similar is possible here? Thanks in advance."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1512595769, "creation_date": 1512595769, "answer_id": 47683753, "question_id": 47680384, "link": "https://stackoverflow.com/questions/47680384/using-global-variables-in-chef-ruby/47683753#47683753", "title": "Using global variables in chef ruby", "body": "<p>The <code>ruby</code> resource doesn't run in the same process, it runs <code>ruby -E</code> as a subprocess. What you want is a <code>ruby_block</code> resource, which is unrelated.</p>\n"}], "owner": {"reputation": 135, "user_id": 5562536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50397efc156637501d777d2b92c45f37?s=128&d=identicon&r=PG&f=1", "display_name": "padmaksha roy", "link": "https://stackoverflow.com/users/5562536/padmaksha-roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 0, "accepted_answer_id": 47683753, "answer_count": 1, "score": 0, "last_activity_date": 1512595769, "creation_date": 1512582174, "last_edit_date": 1512593266, "question_id": 47680384, "link": "https://stackoverflow.com/questions/47680384/using-global-variables-in-chef-ruby", "title": "Using global variables in chef ruby", "body": "<p>Is it possible to define some variable as global in a chef recipe.Like I am declaring &amp; changing a var in a chef resource and later i want to use this changed value in the recipe code.</p>\n\n<pre><code>version=\"\"\nruby 'extract_module' do\n    #cwd ::File.dirname(C:\\\\chef\\\\cache)\n    code &lt;&lt;-EOH\n        require 'win32/registry'\n        Win32::Registry::HKEY_LOCAL_MACHINE.open(\n        'Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Uninstall') do |reg|\n            reg.each_key do |key|\n                k = reg.open(key)\n                app = k[\"DisplayName\"] rescue nil\n\n                if app == \"Qlik Sense 3.2\"\n                    version = k[\"DisplayVersion\"] rescue nil\n                    puts version\n                end\n            end\n        end\n    EOH\nend\n\nputs \"#{version}\"\n</code></pre>\n\n<p>This variable is not printing outside the ruby resource. Can we do something like python, declare with global keyword &amp; modify the value. Any similar here?</p>\n"}, {"tags": ["ruby", "dry-rb"], "answers": [{"comments": [{"owner": {"reputation": 4845, "user_id": 745359, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/25da42a68fcf79b0842fbc1607259092?s=128&d=identicon&r=PG", "display_name": "wintersolutions", "link": "https://stackoverflow.com/users/745359/wintersolutions"}, "edited": false, "score": 0, "creation_date": 1512593719, "post_id": 47680311, "comment_id": 82325987, "body": "Thanks for taking the time to answer! I had to add a <code>super</code> call in the first line of the <code>self.inherited</code> method since dry-configuration uses the same method. But then still the issue remains that <code>__dir__</code> always points to the directory of the base class. Have any ideas? I tried a few things from here <a href=\"https://stackoverflow.com/questions/13012109/get-class-location-from-class-object\" title=\"get class location from class object\">stackoverflow.com/questions/13012109/&hellip;</a> but they don&#39;t work since the views don&#39;t declare methods on their own."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 4845, "user_id": 745359, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/25da42a68fcf79b0842fbc1607259092?s=128&d=identicon&r=PG", "display_name": "wintersolutions", "link": "https://stackoverflow.com/users/745359/wintersolutions"}, "edited": false, "score": 0, "creation_date": 1512594112, "post_id": 47680311, "comment_id": 82326190, "body": "Try to use dynamic current directory lookup instead of <code>__dir__</code>, like <a href=\"https://ruby-doc.org/core/Dir.html#method-c-getwd\" rel=\"nofollow noreferrer\"><code>Dir#getwd</code></a>. Also, you might want to dynamically declare <code>self.inherited</code> on children for nested inheritance."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1512581935, "creation_date": 1512581935, "answer_id": 47680311, "question_id": 47680139, "link": "https://stackoverflow.com/questions/47680139/find-directory-of-subclass-before-initialization-to-configure-dry-view-paths/47680311#47680311", "title": "Find directory of subclass before initialization to configure dry-view paths", "body": "<pre><code>class BaseView &lt; Dry::View::Controller\n  def self.inherited(child)\n    child.class_eval do\n      configure do |c|\n        c.paths = [File.join(__dir__, 'templates')]\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Callback <a href=\"http://ruby-doc.org/core/Class.html#method-i-inherited\" rel=\"nofollow noreferrer\"><code>Class#inherited</code></a>.</p>\n"}], "owner": {"reputation": 4845, "user_id": 745359, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/25da42a68fcf79b0842fbc1607259092?s=128&d=identicon&r=PG", "display_name": "wintersolutions", "link": "https://stackoverflow.com/users/745359/wintersolutions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512581935, "creation_date": 1512581239, "question_id": 47680139, "link": "https://stackoverflow.com/questions/47680139/find-directory-of-subclass-before-initialization-to-configure-dry-view-paths", "title": "Find directory of subclass before initialization to configure dry-view paths", "body": "<p>I'm using <a href=\"http://dry-rb.org/gems/dry-view/\" rel=\"nofollow noreferrer\">dry-views</a> in multiple Rails engines and I have to duplicate the configuration in every subclass.</p>\n\n<pre><code>class BaseView &lt; Dry::View::Controller\n  configure do |c|\n    c.paths = [File.join(__dir__, 'templates')]\n  end\nend\n\nclass SubView &lt; BaseView\n  configure do |c|\n    c.paths = [File.join(__dir__, 'templates')] # todo: remove me\n  end\nend\n</code></pre>\n\n<p>The reason is, that my views can be deeply nested in a sub folder of <code>app</code> ie.:</p>\n\n<pre><code>app/\napp/foo/index.rb\napp/foo/templates/index.html.erb\napp/foo/bar/show.rb\napp/foo/bar/templates/show.html.erb\n</code></pre>\n\n<p>Additionally the <code>BaseView</code> class does not live in the same gem in most of the cases.</p>\n\n<p>If I delete the <code>configure</code> block from the <code>SubView</code> class, the template is not found anymore. The <code>__dir__</code> variable contains the directory path of the <code>BaseView</code> class.</p>\n\n<p>I've tried to implement a after initialization method in the base class that has access to the directory of the subclass. But at that point the configuration is not possible anymore due to restrictions in <code>dry-rb</code> configuration. The configuration must happen before initialization.</p>\n\n<p>The only solution I could come up with is to duplicate the <code>configure</code> block in each class, or have a gem/engine specific parent class that configures all possible template paths.</p>\n\n<p>The usual approach of looking for the directory of a certain method that is implemented in each subclass does also not work in this case, since most views don't even define methods.</p>\n\n<p>Is there better ways to access the directory of a given class during the load phase of this class in a method of the parent class?</p>\n"}, {"tags": ["ruby", "enumerator"], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "edited": false, "score": 0, "creation_date": 1512584143, "post_id": 47680351, "comment_id": 82320948, "body": "Thank you for this answer, it&#39;s super informative and clear."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1512582515, "last_edit_date": 1512582515, "creation_date": 1512582053, "answer_id": 47680351, "question_id": 47680005, "link": "https://stackoverflow.com/questions/47680005/enumerators-loop-magic-no-break-and-no-endless-loop-at-the-same-time/47680351#47680351", "title": "Enumerator&#39;s loop magic (No break and no endless loop at the same time)", "body": "<p>Consider the following:</p>\n\n<pre><code>enum = Enumerator.new do |x|\n  x &lt;&lt; \"hello\"\n  x &lt;&lt; \"world\"\nend\n\nenum.take(1)\n #=&gt; [\"hello\"]\nenum.take(100)\n #=&gt; [\"hello\", \"world\"]\n</code></pre>\n\n<p>What's going on here?</p>\n\n<p>Well, the yielded variable <code>x</code> is an instance of <a href=\"https://ruby-doc.org/core/Enumerator/Yielder.html\" rel=\"nofollow noreferrer\"><code>Enumerator::Yielder</code></a>. Whenever you call <code>&lt;&lt;</code> or <code>yield</code> on the variable, a value will be appended to the final array of results.</p>\n\n<p><code>enum.take(n)</code> is saying \"try to collect up to <code>n</code> values for this enumerable\".</p>\n\n<p>So, looking back at your original example, we had:</p>\n\n<pre><code>loop do\n  x &lt;&lt; a\n  a *= 2\nend\n</code></pre>\n\n<p>Because you called <code>take(4)</code> on the enumerable, the <code>Enumerator::Yielder</code> will know to return immediately, if has collected <code>4</code> items.</p>\n\n<p>...On the other hand, if you try running e.g. <code>enumer.to_a</code> then the loop <strong>will</strong> just go on forever - as it wasn't given any condition to exit early!</p>\n\n<p>From what I've found, the ruby documentation on how this works is a little sparse; but there is <a href=\"https://github.com/ruby/ruby/blob/05fee6c108e1452d9481e6fe488dede5fc6613c4/enumerator.c#L344-L381\" rel=\"nofollow noreferrer\">this helpful description of the behaviour in the source code</a>:</p>\n\n<pre><code>/*\n * call-seq:\n *   Enumerator.new(size = nil) { |yielder| ... }\n *   Enumerator.new(obj, method = :each, *args)\n *\n * Creates a new Enumerator object, which can be used as an\n * Enumerable.\n *\n * In the first form, iteration is defined by the given block, in\n * which a \"yielder\" object, given as block parameter, can be used to\n * yield a value by calling the +yield+ method (aliased as +&lt;&lt;+):\n *\n *   fib = Enumerator.new do |y|\n *     a = b = 1\n *     loop do\n *       y &lt;&lt; a\n *       a, b = b, a + b\n *     end\n *   end\n *\n *   p fib.take(10) # =&gt; [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]\n *\n * The optional parameter can be used to specify how to calculate the size\n * in a lazy fashion (see Enumerator#size). It can either be a value or\n * a callable object.\n *\n * In the second, deprecated, form, a generated Enumerator iterates over the\n * given object using the given method with the given arguments passed.\n *\n * Use of this form is discouraged.  Use Kernel#enum_for or Kernel#to_enum\n * instead.\n *\n *   e = Enumerator.new(ObjectSpace, :each_object)\n *       #-&gt; ObjectSpace.enum_for(:each_object)\n *\n *   e.select { |obj| obj.is_a?(Class) }  #=&gt; array of all classes\n *\n */\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 47680351, "answer_count": 1, "score": 3, "last_activity_date": 1569522681, "creation_date": 1512580758, "last_edit_date": 1569522681, "question_id": 47680005, "link": "https://stackoverflow.com/questions/47680005/enumerators-loop-magic-no-break-and-no-endless-loop-at-the-same-time", "title": "Enumerator&#39;s loop magic (No break and no endless loop at the same time)", "body": "<p>How do loop inside a Enumerator.new knows where to stop?</p>\n\n<p>Now more descriptive example. Here are tow snippets of code both of them return same array: <code>[1,2,4,8]</code>. But in first example <code>break</code> condition in <code>loop</code> exists, when second example stops somehow.</p>\n\n<p>Example #1 with <code>break</code></p>\n\n<pre><code>def simple n\n  x  = []\n  a = 1\n  i = 0\n  loop do\n    x &lt;&lt; a\n    a *= 2\n    i += 1\n    break unless i &lt; n # in this case condition for stop used\n  end\n  x\nend\np simple(4)== [1,2,4,8]\n</code></pre>\n\n<p>Example #2 \"magical\"</p>\n\n<pre><code>def enumer\n  Enumerator.new do |x|\n      a = 1\n      loop do # How do this loop know where to stop?\n       x &lt;&lt; a\n       a *= 2\n      end\n  end\nend\np enumer.take(4) == [1,2,4,8]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 303, "user_id": 3707261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000290502490/picture?type=large", "display_name": "xHocquet", "link": "https://stackoverflow.com/users/3707261/xhocquet"}, "edited": false, "score": 0, "creation_date": 1512580760, "post_id": 47679921, "comment_id": 82319148, "body": "What&#39;s wrong with round? <a href=\"https://ruby-doc.org/core-2.1.2/Float.html#method-i-round\" rel=\"nofollow noreferrer\">#round docs</a> say that the first parameter says the decimal place. <code>123.45.round(0) = 123</code>. Is this not what you need?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1512580763, "post_id": 47679921, "comment_id": 82319149, "body": "What do you mean, &quot;the <code>round</code> function does not work&quot;?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512580813, "post_id": 47679921, "comment_id": 82319184, "body": "You could also use <code>.to_i</code> to round <i>down</i> to the nearest integer."}, {"owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512580923, "post_id": 47679921, "comment_id": 82319253, "body": "I incorrectly used the .round function outside of the brackets when as stated below I needed to put inside."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512580953, "post_id": 47680004, "comment_id": 82319277, "body": "Thankyou, this has resolved my problem. I will accept the answer as soon as it allows me to."}, {"owner": {"reputation": 412, "user_id": 5947585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUkEe.jpg?s=128&g=1", "display_name": "Ishtiaque05", "link": "https://stackoverflow.com/users/5947585/ishtiaque05"}, "reply_to_user": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512589390, "post_id": 47680004, "comment_id": 82323644, "body": "@George123 no problem :D"}], "tags": [], "owner": {"reputation": 412, "user_id": 5947585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUkEe.jpg?s=128&g=1", "display_name": "Ishtiaque05", "link": "https://stackoverflow.com/users/5947585/ishtiaque05"}, "is_accepted": true, "score": 0, "last_activity_date": 1512580758, "creation_date": 1512580758, "answer_id": 47680004, "question_id": 47679921, "link": "https://stackoverflow.com/questions/47679921/rounding-numbers-in-xml-using-ruby/47680004#47680004", "title": "Rounding Numbers in XML Using Ruby", "body": "<p>To round to nearest integer:</p>\n\n<pre><code>#{row[7].round} \n</code></pre>\n\n<p>To round to specific decimal place use:</p>\n\n<pre><code>#{row[7].round(no_of_decimal_place)}\n</code></pre>\n\n<p>example lets say I have a = 2.3456. If I do</p>\n\n<pre><code>#{row[7].round(2)} this will give me 2.35\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "closed_date": 1512595388, "accepted_answer_id": 47680004, "answer_count": 1, "score": -1, "last_activity_date": 1512580770, "creation_date": 1512580469, "last_edit_date": 1512580770, "question_id": 47679921, "link": "https://stackoverflow.com/questions/47679921/rounding-numbers-in-xml-using-ruby", "closed_reason": "Not suitable for this site", "title": "Rounding Numbers in XML Using Ruby", "body": "<p>Task Goal: I am pulling data from a column in Excel and converting this information into the XML format.</p>\n\n<p>I want to round numbers which have been extracted from an excel sheet using ruby and I want these to be 0 decimal places instead of 1 decimal places for example 24 instead of 24.0</p>\n\n<pre><code>xml.PLZ \"#{row[7]}\" is the code which produces: \n&lt;PLZ&gt;74544.0&lt;/PLZ&gt; in XML\n</code></pre>\n\n<p>I have looked at the .round function but this does not work for me as I am pulling the PLZ value from column 7 of an excel sheet. This PLZ value changes as the program works its way down the excel sheet. What could I do to remove the decimal point in the output?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "paperclip"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1512581533, "post_id": 47679645, "comment_id": 82319621, "body": "can you copy the full model code ? and where do you get custom_width from ? is it a column in database, an attr accessor ... ? you can try <code>self.custom_width</code> instead"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1512581694, "post_id": 47679645, "comment_id": 82319692, "body": "Its a column on the attachment model"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1512581807, "post_id": 47679645, "comment_id": 82319747, "body": "just now added full model code"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1512581986, "post_id": 47679645, "comment_id": 82319835, "body": "I am not used to adding styles in function so can&#39;t comment on that. But I am not too sure if you can put <code>#</code> anywhee else but at the end like <code>250x250#</code>. You may have to chose between <code>&gt;</code> and <code>#</code>"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1512582065, "post_id": 47679645, "comment_id": 82319875, "body": "# &amp; &gt; are two different ways of resizing"}], "owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512581793, "creation_date": 1512579587, "last_edit_date": 1512581793, "question_id": 47679645, "link": "https://stackoverflow.com/questions/47679645/paperclip-resize-not-working-for-dynamic-columns-on-attachment-model", "title": "paperclip resize not working for dynamic columns on attachment model", "body": "<p>I have a two columns on my attachment model on which the user sets the dimension to which they want to resize the image.</p>\n\n<p>However, the variables when the resize happens are nil, but set to actual values after the resize happens.</p>\n\n<p>below is the code</p>\n\n<pre><code>  has_attached_file :file, :styles =&gt; lambda { |a|\n                          { :logo =&gt; [\"200x50&gt;\",:png],\n                            :user_defined =&gt; [\"#{a.instance.custom_width}x#{a.instance.custom_height}&gt;\",:png] }\n                        }\n</code></pre>\n\n<p><strong><code>the custom_width &amp; custom_height are nil when conversion happens however the logo conversion works as expected.</code></strong></p>\n\n<p><strong><code>I am using ruby 2.2.4p230 &amp; Rails 4.2.4</code></strong></p>\n\n<p>below is the full mode code</p>\n\n<pre><code>class Attachment &lt; ActiveRecord::Base\n  belongs_to :model_one\n\n  belongs_to :attachable, polymorphic: true\n  #has_attached_file :file, styles: { logo: ['200x50&gt;',:png] }\n  has_attached_file :file, styles: lambda { |attachment| attachment.instance.styles }\n\n  def styles\n    Rails.logger.info self.inspect\n    Rails.logger.info self.attachable\n    styles = {}\n    m = \"200x50&gt;\"\n    l = \"#{self.custom_width}x#{self.custom_height}&gt;\"\n    styles[:logo] = [m, :png]\n    styles[:user_defined] = [l, :png]\n    styles\n  end\n\nend\n</code></pre>\n\n<p>Can anyone please help and let me know if i am doing something wrong?</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "selenium-chromedriver", "watir"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512579183, "post_id": 47679346, "comment_id": 82318150, "body": "Is this an early April Fools question? ;)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512579518, "post_id": 47679346, "comment_id": 82318346, "body": "Another possible fix (see the other comments in this thread, too): <a href=\"https://github.com/angular/protractor/issues/698#issuecomment-187783747\" rel=\"nofollow noreferrer\">github.com/angular/protractor/issues/698#issuecomment-187783&zwnj;&#8203;747</a>"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1512678071, "post_id": 47679346, "comment_id": 82366397, "body": "if you have updated chromedriver, be sure there is not an older version somewhere on your path ahead of wherever you stored the latest version when you updated.  you can use <code>chromedriver.exe -v</code> to see what version is being found.  Also if using a package manager or homebrew be sure it&#39;s really installing the latest version you can download manually, sometimes things like homebrew lag behind and will want to install an older version."}], "owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1512585603, "answer_count": 0, "score": 0, "last_activity_date": 1512750674, "creation_date": 1512578626, "question_id": 47679346, "link": "https://stackoverflow.com/questions/47679346/the-number-3-gets-skipped-in-ruby-cucumber-autoamtion", "closed_reason": "Duplicate", "title": "The number &#39;3&#39; gets skipped in ruby-cucumber autoamtion", "body": "<p>I have no idea why this is happening. I updated chromedriver. Updated Waitr. Updated Selenium. Asked on the page-object gems. </p>\n\n<p>Whener I enter a number in my text fields the number three gets skipped. For example if I have '43241' it will bcome '4241'</p>\n\n<pre><code>text_field(:thisfield ,:id=&gt;'IDforit',:frame=&gt;frame)\non(myPage).thisField = 1037734912\n</code></pre>\n\n<p>I am using it like that (Where I have a myPage defined). This will for example output 10774912. </p>\n\n<p>I am using page object, watir, ruby-cucumber</p>\n"}, {"tags": ["ruby", "webrick"], "comments": [{"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512579934, "post_id": 47679264, "comment_id": 82318603, "body": "There are bindings to most GUI toolkits. The question is also a bit: who are your users, what system(s) do they run and how do they access your program? How is it distributed?"}], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 0, "last_activity_date": 1512598404, "creation_date": 1512598404, "answer_id": 47684322, "question_id": 47679264, "link": "https://stackoverflow.com/questions/47679264/web-interface-for-command-line-application/47684322#47684322", "title": "Web interface for command line application", "body": "<p>If I'm understanding everything properly, one thing you might want to consider is breaking out the command line interface and the web-based (or desktop GUI-based) interface. So, for example, if I'm creating a calculator CLI, which you use in the fashion of</p>\n\n<pre><code>$ myscript -a 2 3\n</code></pre>\n\n<p>where <code>-a</code> is for the \"add\" function and then you might have <code>-s</code>, <code>-d</code>, and <code>-m</code> (subtract, divide, multiply)...not very friendly having to remember that for the average Joe user. You could create a class such as</p>\n\n<pre><code>class Calculator\n  class&lt;&lt;self\n    def perform(operation, left_side, right_side)\n      # figure out from operation what I need to do and do it or delegate it\n    end\n  end\nend\n</code></pre>\n\n<p>and then you create a CLI script</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'calculator'\n\n# parse options, couple ways to do this, you probably already have one in mind\noperation_option = ... # check for -a or -s or -d or -m\nleft_side_option = ...\nright_side_option = ...\n\nCalculator.perform(operation_option, left_side_option, right_side_option)\n</code></pre>\n\n<p>and now you can also create a web based (or desktop based) interface for it that also just calls out to the calculator class:</p>\n\n<pre><code>require 'calculator'\n\n# read from text fields/drop downs/whatever\noperation_option = ...\nleft_side_option = ...\nright_side_option = ...\n\nCalculator.perform(operation_option, left_side_option, right_side_option)\n</code></pre>\n\n<p>This way is a tiny little bit of duplication, but not really...either way you would need to parse the text fields from the interface and just instead of writing them to an intermediate file that the CLI then reads from, you just bypass the CLI and go straight to the code you want to execute. So you have 2 (or more) interface files that are just responsible for showing (if applicable) and  reading from their specific interface and passing the data to the \"work horse\" class in a common format.</p>\n\n<p>In terms of what to make the second interface, Ruby does have support for <code>curses</code> (I have a gem installed by that name) though you'll need to build the forms and interactions on your own (as far as I'm aware, I've never looked for gems to help make forms easier in curses) and a desktop based one is probably better than writing a web based thing, from your description (ruby does have a fair number of GUI gems, but I've never used any except for the curses one), but at this point it's all just \"what's right for your project\".</p>\n"}], "owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512598404, "creation_date": 1512578349, "question_id": 47679264, "link": "https://stackoverflow.com/questions/47679264/web-interface-for-command-line-application", "title": "Web interface for command line application", "body": "<p>I'm developing an application in Ruby. It is used at the command line and has a lot of options, some of them fairly complex. I'd like to provide the ability to use the application through a web interface.</p>\n\n<p>So I'm asking the general question of the best way to do that, or if there might be a better way to do this.</p>\n\n<p>The idea I'm currently working with is that the application would fork itself and use WEBrick to create an http server on some 1024+ port. Then, in the parent process, it would launch the user's web browser using sensible-browser, sending the browser to localhost:port.</p>\n\n<p>The user uses the web application. When they click some particular button (probably \"save\") then the server would send a final page and shut itself down. That last message would include a message telling the user to close the browser.</p>\n\n<p>The parent process sees that the browser and server processes have closed and proceeds to use the information that was saved to some local file.</p>\n\n<p>All that sounds rather complicated, which is why I'm not crazy about the idea. However, I'm setting out to create a really easy interface, which means not requiring the user to learn a bunch of command line parameters (though I probably will provide those too).</p>\n\n<p>I can't find any gems that provides cursors-based forms, which is why I'm considering the web browser concept.</p>\n\n<p>Opinions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 956, "user_id": 4234853, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81648a1ba49fe19be31389c0c08146a3?s=128&d=identicon&r=PG&f=1", "display_name": "nao", "link": "https://stackoverflow.com/users/4234853/nao"}, "edited": false, "score": 0, "creation_date": 1512621254, "post_id": 47682787, "comment_id": 82334655, "body": "Almost perfect. The only thing I had to change was replacing joins with left_outer_joins and adding .distinct, because with joins it will not return tasks that have no responses. Other than that, awesome answer! :)"}], "tags": [], "owner": {"reputation": 698, "user_id": 5617424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmoz.jpg?s=128&g=1", "display_name": "Vane Trajkov", "link": "https://stackoverflow.com/users/5617424/vane-trajkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1512591490, "creation_date": 1512591490, "answer_id": 47682787, "question_id": 47679192, "link": "https://stackoverflow.com/questions/47679192/activerecord-queries-accessing-outer-field-in-subquery/47682787#47682787", "title": "ActiveRecord queries: Accessing outer field in subquery", "body": "<p>For this, you can try utilizing SQL GROUP BY and HAVING clauses that will help you count the responses and filter them based on a condition </p>\n\n<pre><code>Task.select(\"tasks.*, COUNT(responses.id) AS response_count\")\n    .joins(:responses)\n    .group(\"tasks.id\")\n    .where.not(id: Response.select(:task_id).where(user_id: params[:user_id]))\n    .having(\"COUNT(responses.id) &lt; tasks.response_limit\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 168, "user_id": 8244886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1765070086843444/picture?type=large", "display_name": "Pranav Singhal", "link": "https://stackoverflow.com/users/8244886/pranav-singhal"}, "is_accepted": false, "score": 1, "last_activity_date": 1512600982, "creation_date": 1512600982, "answer_id": 47684882, "question_id": 47679192, "link": "https://stackoverflow.com/questions/47679192/activerecord-queries-accessing-outer-field-in-subquery/47684882#47684882", "title": "ActiveRecord queries: Accessing outer field in subquery", "body": "<p>you can the number of responses to a task by </p>\n\n<pre><code>    Task.response.count\n</code></pre>\n\n<p>then simply compare it with the task's response_limit</p>\n"}], "owner": {"reputation": 956, "user_id": 4234853, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81648a1ba49fe19be31389c0c08146a3?s=128&d=identicon&r=PG&f=1", "display_name": "nao", "link": "https://stackoverflow.com/users/4234853/nao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 47682787, "answer_count": 2, "score": 0, "last_activity_date": 1512600982, "creation_date": 1512578141, "question_id": 47679192, "link": "https://stackoverflow.com/questions/47679192/activerecord-queries-accessing-outer-field-in-subquery", "title": "ActiveRecord queries: Accessing outer field in subquery", "body": "<p>I'm confused at how to do an active record join. I have three models, User, Task, and Response. A user submits responses to tasks. I'm using the has_many, through: pattern in ActiveRecord.</p>\n\n<pre><code>class Task &lt; ApplicationRecord\n  has_many :users, through: :responses\n  has_many :responses\n  validates :response_limit, presence: true\n\nclass User &lt; ApplicationRecord\n  has_many :responses\n  has_many :tasks, through: :responses\n\nclass Response &lt; ApplicationRecord\n  belongs_to :task, optional: false\n  belongs_to :user, optional: false\n</code></pre>\n\n<p>In plain English, I'd like to create a query that given a query, returns all tasks that:</p>\n\n<ol>\n<li>Has a Response count less than the :response_limit field in Task</li>\n<li>The User has not responded to already.</li>\n</ol>\n\n<p>I'm able to satisfy #2 with this nested query, which I got from an earlier question.</p>\n\n<pre><code>Task.where.not(id: Response.select(:task_id).where(user_id: params[:user_id]))\n</code></pre>\n\n<p>However, I'm having difficulty satisfying the first. I took at stab at it and got this:</p>\n\n<pre><code>Task.where.not(id: Response.select(:task_id).where(user_id: params[:user_id])).where('response_limit &gt; (?)', Response.where(task_id:task.id).count)\n</code></pre>\n\n<p>My issue is that I'm not sure how to get the task_id from the outer query into the Response subquery.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 1736, "user_id": 2864109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9921ee3e2e9f493feba6cf9fb5a1e744?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/2864109/hans"}, "edited": false, "score": 0, "creation_date": 1512576359, "post_id": 47678315, "comment_id": 82316321, "body": "You need lot more logic in your code. Ruby does not have magic helpers to help you. You might want to start reading <a href=\"http://ruby-doc.org/\" rel=\"nofollow noreferrer\">ruby-doc.org</a>. Other thing to note is your question is very vague and seems like you asking people for the whole solution."}, {"owner": {"reputation": 1, "user_id": 9007846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277847c02a718dec557bab6bbfa65f7c?s=128&d=identicon&r=PG&f=1", "display_name": "cool87", "link": "https://stackoverflow.com/users/9007846/cool87"}, "reply_to_user": {"reputation": 1736, "user_id": 2864109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9921ee3e2e9f493feba6cf9fb5a1e744?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/2864109/hans"}, "edited": false, "score": 0, "creation_date": 1512577024, "post_id": 47678315, "comment_id": 82316769, "body": "Thank you @hans  I was trying to make the question as clear as possible, but I understand that I might be off. I am very new to Ruby and stack overflow, but I&#39;ve been trying to figure my own way out of this using The Book of Ruby, Stack Overflow etc. but so far I haven&#39;t been able to find anything. I just want to know if there is a way to read files/display arrays like this, or if I am completely off track."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512578126, "post_id": 47678315, "comment_id": 82317480, "body": "You have to find a suitable representation for the quiz data using Ruby objects. That could be custom classes or a combination of hashes and arrays. Then you can read the file and create / fill your objects accordingly. Finally you can loop through your questions and collect answers."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9007846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277847c02a718dec557bab6bbfa65f7c?s=128&d=identicon&r=PG&f=1", "display_name": "cool87", "link": "https://stackoverflow.com/users/9007846/cool87"}, "edited": false, "score": 0, "creation_date": 1512593136, "post_id": 47682216, "comment_id": 82325671, "body": "Thank you! This definitely put me on the right path!"}], "tags": [], "owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "is_accepted": true, "score": 1, "last_activity_date": 1512591931, "last_edit_date": 1512591931, "creation_date": 1512589215, "answer_id": 47682216, "question_id": 47678315, "link": "https://stackoverflow.com/questions/47678315/using-arrays-to-build-a-multiple-choice-quiz-in-ruby/47682216#47682216", "title": "Using Arrays to build a multiple choice quiz in Ruby", "body": "<p>There are many ways to do things in Ruby. This is one among many solutions, quickly made, just to put you on the right track. It lacks tests, for example to verify that the content of lines conforms to expectations.</p>\n\n<pre><code>class Question\n    def initialize(p_text)\n        @choices = []\n        @text    = p_text\n    end\n\n    def add_answer(p_choice, p_validity)\n        @choices &lt;&lt; [p_choice, p_validity]\n    end\n\n    def ask\n        valid_number = nil\n        puts\n        puts @text\n        @choices.each_with_index do | choice_and_validity, i |\n            choice, validity = choice_and_validity\n            valid_number     = i if validity\n            puts \"#{i + 1}. #{choice}\"\n        end\n\n        print 'Please enter answer', ' &gt; '\n        answer = gets.chomp.to_i - 1\n\n        unless answer == valid_number\n            puts 'Wrong answer.'\n            ask\n        end\n    end\nend\n\n@questions = []\n\nIO.foreach('input.txt') do | line |\n    case line[0]\n    when 'Q'\n        code, text = line.chomp.split(';')\n        @question  = Question.new(text)\n        @questions &lt;&lt; @question\n    when 'A'\n        code, choice, validity = line.chomp.split(';')\n        @question.add_answer(choice, validity.strip == '1' ? true : false)\n    else\n        puts \"Wrong code #{line[0]}\"\n    end\nend\n\np @questions\n\n@questions.each{ | question | question.ask }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class Question\n    attr_reader :choices, :text\n\n    def initialize(p_text)\n        @choices = []\n        @text    = p_text\n    end\n\n    def add_answer(p_choice, p_validity)\n        @choices &lt;&lt; [p_choice, p_validity]\n    end\nend\n\n@questions = []\n\nIO.foreach('input.txt') do | line |\n    code, text, validity = line.chomp.split(';')\n\n    case code\n    when 'Q'\n        @question  = Question.new(text)\n        @questions &lt;&lt; @question\n    when 'A'\n        @question.add_answer(text, validity.strip == '1' ? true : false)\n    else\n        puts \"Wrong code #{code}\"\n    end\nend\n\np @questions\n\n@questions.each do | question |\n    answer       = nil\n    valid_number = question.choices.index{ | item | item.last } # find the item [x, true]\n\n    until answer == valid_number\n        puts\n        puts question.text\n        question.choices.each_with_index do | choice, i |\n            puts \"#{i + 1}. #{choice.first}\"\n        end\n\n        print 'Please enter answer &gt; '\n        answer = gets.chomp.to_i - 1\n\n        puts 'Wrong answer.' unless answer == valid_number\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9007846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277847c02a718dec557bab6bbfa65f7c?s=128&d=identicon&r=PG&f=1", "display_name": "cool87", "link": "https://stackoverflow.com/users/9007846/cool87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "closed_date": 1512603128, "accepted_answer_id": 47682216, "answer_count": 1, "score": -2, "last_activity_date": 1512591931, "creation_date": 1512575382, "question_id": 47678315, "link": "https://stackoverflow.com/questions/47678315/using-arrays-to-build-a-multiple-choice-quiz-in-ruby", "closed_reason": "Needs more focus", "title": "Using Arrays to build a multiple choice quiz in Ruby", "body": "<p>I want to create a Ruby program where users can take a multiple choice test. </p>\n\n<p>I have a file for each test, where the questions and answers are stored like this:</p>\n\n<pre><code>Q;Who is the President of the USA?\nA;Obama;0 \nA;Trump;1 \nA;Bush;0\nQ;When did Iceland gain independence?\nA;1944;1\nA;1901;0\nA;1974;0\n</code></pre>\n\n<p>Q signifies a question and A signifies an answer option. \nValue 1 is assigned to correct answers and 0 to incorrect answers. </p>\n\n<p>I've converted the lines into arrays like so:</p>\n\n<pre><code>IO.foreach(\"#{test_name}.txt\") do |line|\n  line.chomp! \n  exam = line.split(\";\") \nend\n</code></pre>\n\n<p>My issue is that I want to display a Question\nand then the Answer options UNTIL I get to the next Question</p>\n\n<p>I've been using <code>puts</code> inside the IO like so:</p>\n\n<pre><code>IO.foreach(\"#{test_name}.txt\") do |line|\n  line.chomp!\n  exam = line.split(\";\") \nputs exam[1] + \"\\n\" \n  end\nend\n</code></pre>\n\n<p>But of course that just returns the entire list from the file. </p>\n\n<p>Essentially, I want the output to look like this:</p>\n\n<pre><code>    Who is the President of the USA?\n    1. Obama\n    2. Trump\n    3. Bush\nPlease enter answer\n\n    When did Iceland gain independence?\n    1. 1944\n    2. 1901\n    3. 1974\nPlease enter answer\n</code></pre>\n\n<p>Basically, I want to know if there is a method for reading a file like this, preferably numbering the answer options?</p>\n"}, {"tags": ["ruby", "rubygems", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8697281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1nGsn.jpg?s=128&g=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/8697281/diego"}, "is_accepted": true, "score": 0, "last_activity_date": 1512576763, "creation_date": 1512576763, "answer_id": 47678770, "question_id": 47678037, "link": "https://stackoverflow.com/questions/47678037/oj-gem-incompatible-library-version/47678770#47678770", "title": "Oj gem: incompatible library version", "body": "<p>Finally I changed my ruby version to ruby 2.3.3 and works. </p>\n"}], "owner": {"reputation": 1, "user_id": 8697281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1nGsn.jpg?s=128&g=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/8697281/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 47678770, "answer_count": 1, "score": 0, "last_activity_date": 1512576763, "creation_date": 1512574635, "last_edit_date": 1512574829, "question_id": 47678037, "link": "https://stackoverflow.com/questions/47678037/oj-gem-incompatible-library-version", "title": "Oj gem: incompatible library version", "body": "<p>I'm trying to start up an application in localhost made it with Sinatra and after running <code>bundle install</code> I got the following error:</p>\n\n<blockquote>\n  <p>/home/diego/.rvm/gems/ruby-2.3.1/gems/oj-2.14.6/lib/oj.rb:42:in `require': incompatible library version - /home/diego/.rvm/gems/ruby-2.3.1/gems/oj-2.14.6/lib/oj/oj.so (LoadError)</p>\n</blockquote>\n\n<p>when I told rackup to start.</p>\n\n<p>I already tried to uninstall the gem and re-install it. I also tried using the last version, but still got the same error.</p>\n\n<p>Here is my <code>Gemfile</code>:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rack', '1.6.4'\ngem 'sinatra', '1.4.5'\ngem 'sinatra-advanced-routes', '0.5.3' ,:require =&gt; 'sinatra/advanced_routes'\ngem 'rake', '10.5.0'\ngem 'activerecord', '4.2.6'\ngem 'activesupport', '4.2.6'\ngem 'sinatra-activerecord', '2.0.9'\ngem 'mysql2', '0.4.3'\ngem 'unicorn', '5.0.1'\ngem \"typhoeus\", '1.0.1'\ngem 'i18n', '0.7.0'\ngem 'newrelic_rpm', '3.15.0.314'\ngem 'oj', '2.14.6'\ngem 'oj_mimic_json', '1.0.1'\ngem 'active_model_serializers', '0.9.5'\ngem 'sinatra-respond_to', '0.9.0'\ngem 'shotgun', '~&gt; 0.9.1'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1512576147, "post_id": 47677980, "comment_id": 82316170, "body": "You are not including rails_helper in your spec file. And is FactoryBot.create(:user) inside a <code>it</code> block?"}, {"owner": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "edited": false, "score": 1, "creation_date": 1512578703, "post_id": 47677980, "comment_id": 82317826, "body": "It is recommended to use <code>sequence</code> for unique field when creating record with <code>FactoryBot</code>. You can find cheatsheet <a href=\"https://devhints.io/factory_bot\" rel=\"nofollow noreferrer\">here at devhints.io</a>"}, {"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "reply_to_user": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1512580131, "post_id": 47677980, "comment_id": 82318750, "body": "@SujanAdiga i didn&#39;t include the <code>require &quot;rails_helper&quot;</code> but its in my spec files. My <code>FactoryBot.create</code> is in a <code>before do</code> block."}, {"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "reply_to_user": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "edited": false, "score": 0, "creation_date": 1512580242, "post_id": 47677980, "comment_id": 82318821, "body": "@yeuem1vannam I figure that if i use sequence for the Email, that should resolve my problem since unique emails would be created. But would that be &quot;sweeping the problem under the carpet&quot;? Meaning to say, is my test DB wiping before every run of RSpec?"}], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "edited": false, "score": 0, "creation_date": 1512617658, "post_id": 47681433, "comment_id": 82333853, "body": "My creation was done in a <code>before do</code> block. The problems were due to Devise requiring unique emails. My problem was solved by using <code>sequence</code> for creating the emails in my FactoryBot. I&#39;ve updated my answer to explain my uncertainties. With regards to <code>config.use_transactional_fixtures</code>, it use to be <code>true</code> before running into this problem which prompted me to use <code>DatabaseCleaner</code>"}, {"owner": {"reputation": 94, "user_id": 2731463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9f4859177520937680756a7036246b?s=128&d=identicon&r=PG&f=1", "display_name": "Leepoff", "link": "https://stackoverflow.com/users/2731463/leepoff"}, "reply_to_user": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "edited": false, "score": 0, "creation_date": 1512669295, "post_id": 47681433, "comment_id": 82361892, "body": "Sequences are kind of dodging the problem like you suggested before. Do you have any other factories you&#39;re using where a user is created by association? <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">pry</a> is a useful tool that will let you jump into your tests at various points to poke around and see what the state of your database or objects are in. You can also go back into console and manually run your factories to see what they are creating."}, {"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "edited": false, "score": 0, "creation_date": 1512670799, "post_id": 47681433, "comment_id": 82362659, "body": "I&#39;ve actually updated my answer after using sequences. It definitely seems like DatabaseCleaner was working fine. I&#39;ve even printed my User.email just to take a look at their sequencing in an attempt to figure out whats going on under the hood. But i dont understand rspec well enough to do so. Running the individual spec files should have yielded a sequence of 1 no? But mine was being funky. I&#39;ll definitely checkout pry though."}, {"owner": {"reputation": 94, "user_id": 2731463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9f4859177520937680756a7036246b?s=128&d=identicon&r=PG&f=1", "display_name": "Leepoff", "link": "https://stackoverflow.com/users/2731463/leepoff"}, "reply_to_user": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "edited": false, "score": 0, "creation_date": 1512672648, "post_id": 47681433, "comment_id": 82363566, "body": "Ya, they should be starting at 1. Without seeing your app it&#39;s hard to tell where specifically the other users are being created, but I would say look in your before hooks or factories for any that are creating more users implicitly. Something else is creating additional ones."}], "tags": [], "owner": {"reputation": 94, "user_id": 2731463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9f4859177520937680756a7036246b?s=128&d=identicon&r=PG&f=1", "display_name": "Leepoff", "link": "https://stackoverflow.com/users/2731463/leepoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1512586055, "creation_date": 1512586055, "answer_id": 47681433, "question_id": 47677980, "link": "https://stackoverflow.com/questions/47677980/rails-5-unable-to-cleanse-test-db/47681433#47681433", "title": "Rails 5 - Unable to Cleanse Test DB", "body": "<p>Seeing your full spec files would help. If you are running the specs as you've written - creating a user outside of an example group or a before block - that will cause records to be written outside of the cleaning strategy scope and can cause data to remain across examples. Your DBcleaner config looks to be set up fine otherwise.</p>\n\n<p><code>rake db:test:prepare</code> is the correct way to clean out your test db but shouldn't need to be ran often unless you have migration changes. You can jump into a rails console within the test environment <code>rails c test</code> and look around to see if there are any records left behind.</p>\n\n<p>As a side note you can flip <code>config.use_transactional_fixtures</code> from <code>false</code> to <code>true</code> and remove DBcleaner altogether from your app. Just make sure there is no residual data in your database before going this route.</p>\n"}], "owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512617234, "creation_date": 1512574454, "last_edit_date": 1512617234, "question_id": 47677980, "link": "https://stackoverflow.com/questions/47677980/rails-5-unable-to-cleanse-test-db", "title": "Rails 5 - Unable to Cleanse Test DB", "body": "<p>I've recently started testing my app using <code>RSpec</code>. Being the testing noob that i am, i did not install the full suite of tools that people normally use (namely <code>FactoryGirl</code>, also now known as <code>FactoryBot</code>. And <code>DatabaseCleaner</code>).</p>\n\n<p>Anyway here's what happened. After getting my feet wet with <code>RSpec</code>, i started using <code>FactoryBot</code> so that my tests looks less convoluted. Note that <code>:user</code> is a <code>Devise</code> object.</p>\n\n<pre><code># spec/models/first_test_spec.rb\n\nFactoryBot.create(:user) \n#Other Code\n</code></pre>\n\n<p>So i'm doing stuff with my <code>first_test_spec.rb</code> and i run it and everything is working perfectly fine. I then create my 2nd spec file</p>\n\n<pre><code># spec/models/second_test_spec.rb\n\nFactoryBot.create(:user)\n#Other Code\n</code></pre>\n\n<p>Now here comes the problem. My tests are failing because <code>FactoryBot.create(:user)</code> is invalid, due to <code>Devise</code> requiring unique emails. Clearly this indicates that the data from my <code>first_test_spec</code> is persisting hence the error. </p>\n\n<p>So i attempt to install <code>DatabaseCleaner</code> and hopefully clear my Test DB after each run. My <code>rails_helper</code> looks like this:</p>\n\n<pre><code>require 'spec_helper'\nENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\nabort(\"The Rails environment is running in production mode!\") if Rails.env.production?\nrequire 'rspec/rails'\nrequire 'support/factory_bot'\n\n# Dir[Rails.root.join('spec/support/**/*.rb')].each { |f| require f }\nActiveRecord::Migration.maintain_test_schema!\n\nRSpec.configure do |config|\n  config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n  config.use_transactional_fixtures = false\n\n  config.before(:suite) do\n    DatabaseCleaner.clean_with(:truncation)\n  end\n\n  config.before(:each) do\n    DatabaseCleaner.strategy = :transaction\n  end\n\n  config.before(:each, js: true) do\n    DatabaseCleaner.strategy = :truncation\n  end\n\n  config.before(:each) do\n    DatabaseCleaner.start\n  end\n\n  config.after(:each) do\n    DatabaseCleaner.clean\n  end\n\n  config.infer_spec_type_from_file_location!\n  config.filter_rails_from_backtrace!\nend\n</code></pre>\n\n<p>I think i've got everything set up correctly, so i'm uncertain if the errors are still occurring due to my <code>DatabaseCleaner</code> being set up wrongly.</p>\n\n<p>Anyway, running <code>rspec</code> still throws the same error, where <code>second_test_spec</code> cannot create the <code>user</code> object because the email already exists (a validation that comes with Devise itself).</p>\n\n<p>I then proceed to run the following:</p>\n\n<pre><code>rake db:test:prepare\nrspec spec/models/second_test_spec.rb\n</code></pre>\n\n<p>And it still throws the same error. So right now, i have no idea if my database is being cleanse after running rspec. But i'm quite certain that i have been unable to purge my test database.</p>\n\n<p>So i guess i really have 2 questions/problems:</p>\n\n<p>1) How do you purge your test database? (Googling reveals that <code>rake db:test:prepare</code> is the way)</p>\n\n<p>2) Is my <code>DatabaseCleaner</code> setup correctly? If so, shouldn't it be purging the database? </p>\n\n<p>UPDATE:\nAs suggested to me in the comments, using <code>sequence</code> for creating unique fields with FactoryBot is recommended. Obviously that made the problem go away because there would no longer be validation errors from Devise. </p>\n\n<p>I then went on to test a couple of things.</p>\n\n<ol>\n<li><p><code>rails c test</code>\nI ran this to check my test database and it was indeed empty. This indicates that DatabaseCleaner is working perfectly fine. What i fail to understand then, is why the need to sequence my email creation in FactoryBot? Or i suppose, i fail to understand how does RSpec \"compile &amp; run\". </p></li>\n<li><p><code>puts @user.email</code>\nSo i wanted to print out the emails to look at the sequencing to see if i'm able to decipher the problem. Here's what happens:</p></li>\n</ol>\n\n<p>running <code>rspec spec/models/first_test_spec.rb</code>\nTutor email yields the number 2.</p>\n\n<p>running <code>rspec spec/models/second_test_spec.rb</code>\nTutor email yields the number 3.</p>\n\n<p>running <code>rspec</code>\nTutor email yields the numbers 2 &amp; 5. </p>\n\n<p>So i'm not sure if there are \"problems\" with my test suite. Clearly my original problem has been fixed, and this is a separate topic altogether. But i figured if anyone would like to explain this mystery to anyone else who chances upon this thread may wish to do so. </p>\n"}, {"tags": ["ruby", "enumerator"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1512575778, "post_id": 47677930, "comment_id": 82315884, "body": "<code>x.upto(x + n)</code> includes <code>x + n</code>, so shouldn&#39;t your example include <code>15</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1512611392, "post_id": 47678412, "comment_id": 82332248, "body": "You can also do <code>5.step(to:10).to_a #=&gt; [5, 6, 7, 8, 9, 10]</code> etc. Also worth mentioning for the OP that <code>steps</code> by default increments by 1, but this can be changed e.g., <code>5.step(by:2).take(3) #=&gt; [5, 7, 9]</code> or <code>5.step(to:20,by:2).to_a #=&gt; [5, 7, 9, 11, 13, 15, 17, 19]</code>."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 4, "last_activity_date": 1512575671, "creation_date": 1512575671, "answer_id": 47678412, "question_id": 47677930, "link": "https://stackoverflow.com/questions/47677930/create-iterator-from-total-difference/47678412#47678412", "title": "Create iterator from total difference", "body": "<pre><code>5.step.take(10) # =&gt; [5, 6, 7, 8, 9, 10, 11, 12, 13, 14]\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 4261762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IqlOi.png?s=128&g=1", "display_name": "Sinthorion", "link": "https://stackoverflow.com/users/4261762/sinthorion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 47678412, "answer_count": 1, "score": 1, "last_activity_date": 1512665543, "creation_date": 1512574299, "last_edit_date": 1512665543, "question_id": 47677930, "link": "https://stackoverflow.com/questions/47677930/create-iterator-from-total-difference", "title": "Create iterator from total difference", "body": "<p>I want to iterate through the integers from <code>x</code> up to <code>n</code> values further. I can do this for example with:</p>\n\n<pre><code>x.upto(x + n - 1)\n</code></pre>\n\n<p>or many other ways, but all of them require me to calculate the end myself, which seems not very elegant. Is there any way to create an iterator directly from the total difference to be iterated?</p>\n\n<p>I imagine something like this:</p>\n\n<pre><code>5.up(10).to_a\n# returns [5, 6, 7, 8, 9, 10, 11, 12, 13, 14]\n</code></pre>\n\n<p>I know I could easily write it myself, but I want to know if what I want already exists in the core.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest-client"], "comments": [{"owner": {"reputation": 2230, "user_id": 6337957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1177d893bf3115edf0119cf56e7220?s=128&d=identicon&r=PG", "display_name": "Greg Navis", "link": "https://stackoverflow.com/users/6337957/greg-navis"}, "edited": false, "score": 1, "creation_date": 1512573562, "post_id": 47677653, "comment_id": 82314379, "body": "Could you past the code you&#39;re using? Also, are you sure there&#39;re no redirects? What does <code>curl -v YOUR_HTTPS_ADDRESS</code> return?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7646302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35248258395e688ffcbfffb968b4cbe3?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell", "link": "https://stackoverflow.com/users/7646302/mitchell"}, "edited": false, "score": 0, "creation_date": 1512590575, "post_id": 47679018, "comment_id": 82324262, "body": "I tried that, but the values didn&#39;t appear in the query string then, only the keys did. So I switched the double quotes to single quotes which solved the problem. Could try again though, maybe I overlooked something."}], "tags": [], "owner": {"reputation": 1325, "user_id": 3295284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdP8.jpg?s=128&g=1", "display_name": "patkoperwas", "link": "https://stackoverflow.com/users/3295284/patkoperwas"}, "is_accepted": false, "score": 1, "last_activity_date": 1512577583, "creation_date": 1512577583, "answer_id": 47679018, "question_id": 47677653, "link": "https://stackoverflow.com/questions/47677653/ruby-rest-client-keeps-correcting-the-uri/47679018#47679018", "title": "Ruby Rest-client keeps correcting the uri", "body": "<p>Could be that your variables aren't getting <a href=\"https://www.google.com/search?q=ruby+string+interpolation&amp;rlz=1C5CHFA_enUS694US695&amp;oq=ruby+string+int&amp;aqs=chrome.0.0j69i57j0l4.2358j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">interpolated</a>. With single quotes <code>'#{@variable}'</code> doesn't work. Try switching the single quotes to double quotes (<code>'' =&gt; \"\"</code>). What is happening is that instead of sending the actual client id and secret, you are sending the string <code>#{@client_id}</code>.</p>\n\n<p>Try</p>\n\n<pre><code>uri = 'https://sandbox.api.online.unit4.nl/V19/OAuth/Token'\n\n  payload = {\n    code: params[:code],\n    client_id: @client_id,\n    client_secret: @client_secret,\n    redirect_uri: @client_redirect_url,\n    grant_type: 'authorization_code'\n  }\n\n  response = RestClient::Request.execute(method: :post, url: uri, headers: {params: payload})\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7646302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35248258395e688ffcbfffb968b4cbe3?s=128&d=identicon&r=PG&f=1", "display_name": "Mitchell", "link": "https://stackoverflow.com/users/7646302/mitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512577583, "creation_date": 1512573460, "last_edit_date": 1512575113, "question_id": 47677653, "link": "https://stackoverflow.com/questions/47677653/ruby-rest-client-keeps-correcting-the-uri", "title": "Ruby Rest-client keeps correcting the uri", "body": "<p>I'm using rest-client to make a post request to a certain address. Unfortunately rest-client keeps correcting the web adres from 'https' to 'http'. Which then gives back an error.</p>\n\n<p>I already looked at the documentation whether this maybe was a setting for the gem. Anyone knows how I can 'force' rest-client to access the desired address.</p>\n\n<p>Thx in advance!</p>\n\n<p>used code is:</p>\n\n<pre><code>  uri = 'https://sandbox.api.online.unit4.nl/V19/OAuth/Token'\n\n  payload = {\n    code: params[:code],\n    client_id: '#{@client_id}',\n    client_secret: '#{@client_secret}',\n    redirect_uri: '#{@client_redirect_url}',\n    grant_type: 'authorization_code'\n  }\n\n  response = RestClient::Request.execute(method: :post, url: uri,      headers: {params: payload})\n</code></pre>\n\n<p>curl:</p>\n\n<pre><code>&gt; GET /V19/OAuth/Token HTTP/1.1\n&gt; Host: sandbox.api.online.unit4.nl\n&gt; User-Agent: curl/7.54.0\n&gt; Accept: */*\n&gt; \n&lt; HTTP/1.1 400 Bad Request\n&lt; content-length: 27\n&lt; content-type: application/json; charset=utf-8\n&lt; date: Wed, 06 Dec 2017 15:21:44 GMT\n&lt; p3p: CP=\"NON CUR OTPi OUR NOR UNI\"\n&lt; server: Microsoft-IIS/7.5\n&lt; x-aspnetmvc-version: 5.2\n&lt; cache-control: no-cache, no-store, max-age=0, must-revalidate\n&lt; access-control-allow-origin: *\n&lt; x-powered-by: ASP.NET\n&lt; x-aspnet-version: 4.0.30319\n&lt; pragma: no-cache\n&lt; Set-Cookie: PD_STATEFUL_88eb7504-dfe9-11e2-8624-005056af4a32=sandbox.api.online.unit4.nl; Path=/\n&lt; Set-Cookie: LB_online_unit4=1493375404.20480.0000; path=/\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "carrierwave"], "comments": [{"owner": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "edited": false, "score": 0, "creation_date": 1512578959, "post_id": 47677476, "comment_id": 82318001, "body": "Your route said that the ID of <code>Item</code> is <code>params[:item_id]</code> but you use <code>params[:id]</code> instead for your <code>set_item</code> method."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "edited": false, "score": 0, "creation_date": 1512636258, "post_id": 47677476, "comment_id": 82340729, "body": "Thanks @yeuem1vannam... I completely missed that!!"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512572927, "creation_date": 1512572927, "question_id": 47677476, "link": "https://stackoverflow.com/questions/47677476/rails-5-carrierwave-gem-delete-single-attachment", "title": "Rails 5: carrierwave gem delete single attachment", "body": "<p>I'm using the the <code>carrierwave gem</code> with my rails app in order to upload multiple images(attachments).</p>\n\n<p>The attachments are being saved inside the item model:</p>\n\n<pre><code>create_table \"items\", force: :cascade do |t|\n  t.string \"title\"\n  t.string \"description\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.json \"attachments\"\nend\n</code></pre>\n\n<p>and this the item create action along with the params permitted:</p>\n\n<pre><code>def items_create\n  @categories = Category.all\n  @item = Item.new(item_params)\n  @item.store_id = current_store.id\n  @item.account_id = current_store.account.id\n\n  respond_to do |format|\n    if @item.save\n      format.html { redirect_to store_items_show_path_path(current_store), notice: 'Item was successfully created.' }\n      format.json { render :template =&gt; \"stores/items/show\", status: :created, location: @item }\n    else\n      format.html { render :template =&gt; \"stores/items/new\" }\n      format.json { render json: @item.errors, status: :unprocessable_entity }\n    end\n  end\nend\n\ndef item_params\n    params.require(:item).permit(:title, :description, attachments: [])\n  end\n</code></pre>\n\n<p>Now I'm trying to implement <code>How to: Add more files and remove single file when using default multiple file uploads feature</code> from <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Add-more-files-and-remove-single-file-when-using-default-multiple-file-uploads-feature\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>and this is the setup I have:</p>\n\n<pre><code>  def create_image\n    add_more_images(images_params[:attachments])\n    flash[:error] = \"Failed uploading attachments\" unless @item.save\n    redirect_back(fallback_location: root_path)\n  end\n\n  def destroy_image\n    remove_image_at_index(params[:id].to_i)\n    flash[:error] = \"Failed deleting attachment\" unless @item.save\n    redirect_back(fallback_location: root_path)\n  end\n\n private\n  def add_more_images(new_images)\n    attachments = @item.attachments\n    attachments += new_images\n    @item.attachments = attachments\n  end\n\n  def remove_image_at_index(index)\n    remain_attachments = @item.attachments # copy the array\n    deleted_attachment = remain_attachments.delete_at(index) # delete the target attachment\n    deleted_attachment.try(:remove!) # delete attachment from S3\n    @item.attachments = remain_attachments # re-assign back\n    @item.remove_attachments! if remain_attachments.empty?\n  end\n\n  def images_params\n    params.require(:item).permit({attachments: []}) # allow nested params as array\n  end\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>match 'stores/items/:item_id/attachments/:id'=&gt; 'stores#destroy_image', :via =&gt; :delete, :as =&gt; :remove_attachment\npost \"store/items/:item_id/attachments/:id\"=&gt; \"stores#create_image\", :as =&gt; :create_image\n</code></pre>\n\n<p>I got it to upload a single file with this:</p>\n\n<pre><code>&lt;%= form_for @item, url: create_image_path(@item), method: :post do |form| %&gt;\n     &lt;div class=\"form-group\"&gt;\n       &lt;label class=\"btn btn-default\"&gt;Keep old and add more images&lt;span style=\"display:none;\"&gt;\n          &lt;%= form.file_field :attachments, multiple: true, id: \"files\" %&gt;&lt;/span&gt;&lt;/label&gt;\n     &lt;/div&gt;\n\n         &lt;%= form.submit \"Upload new images\",  :class=&gt;\"btn btn-default\" %&gt;&amp;nbsp;&amp;nbsp;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>but can't remove each attachment I loop thru with this:</p>\n\n<pre><code>&lt;h3&gt;Currently uploaded images&lt;/h3&gt;\n  &lt;% @item.attachments.each_with_index do |attachments, index| #grab the index %&gt;\n    &lt;%= image_tag(attachments.url(:mini)) %&gt;\n    &lt;%= link_to 'Remove', remove_attachment_path(@item, index), data: { confirm: \"Are you sure you want to delete this image?\" }, :method =&gt; :delete %&gt;\n   &lt;% end %&gt;\n</code></pre>\n\n<p>This is the error I'm getting each time i click on remove:</p>\n\n<pre><code>ActiveRecord::RecordNotFound in StoresController#destroy_image\nCouldn't find Item with 'id'=2\n</code></pre>\n\n<p>in this url : <code>https://localhost:3000/stores/items/29/attachments/2</code></p>\n\n<p>and at this line:</p>\n\n<pre><code>def set_item\n  @item = Item.find(params[:id])\nend\n</code></pre>\n\n<p>Any ideas on how to fix the remove a single attachment feature??</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 1, "creation_date": 1512571669, "post_id": 47677011, "comment_id": 82312948, "body": "One red flag in your process is you&#39;re allowing the front end to tell the back end what prices are. You should ideally be storing prices on the back end, representing them to the front end and then retrieving them again on form submission based on the product id or something. Never trust the front end."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1512574559, "post_id": 47677011, "comment_id": 82315028, "body": "@OneNeptune You are right but I think this end-user defined price for a Karaoke is a feature OP wants (because we see a label &amp; text_field tags in the form)."}, {"owner": {"reputation": 753, "user_id": 1829889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be58c4bbe56e757e46d3f488f5c209bf?s=128&d=identicon&r=PG", "display_name": "adc", "link": "https://stackoverflow.com/users/1829889/adc"}, "edited": false, "score": 1, "creation_date": 1512576041, "post_id": 47677011, "comment_id": 82316095, "body": "You can change a value before saving to db using the callback before_save :convert_price in your model but than the value in frontend shows in cents unless you convert it."}], "answers": [{"tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 2, "last_activity_date": 1512574478, "creation_date": 1512574478, "answer_id": 47677988, "question_id": 47677011, "link": "https://stackoverflow.com/questions/47677011/how-to-convert-the-passed-in-price-value-to-cents-before-saving-to-database/47677988#47677988", "title": "how to convert the passed in price value to cents before saving to database?", "body": "<p>You can rewrite the setter for <code>price</code> in the <code>Karaoke</code> model in order to convert any <code>Float</code> into <code>Integer</code>:</p>\n\n<pre><code>def price=(value)\n  value = (value * 100).to_i if value.kind_of?(Float)\n  super(value)\nend\n</code></pre>\n\n<p>So now every time you pass a Float for the price of a Karaoke, it will be multiplied by 100 and converted to an Integer.</p>\n"}, {"tags": [], "owner": {"reputation": 1038, "user_id": 6124030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/990002717754994/picture?type=large", "display_name": "Emilio Men&#233;ndez", "link": "https://stackoverflow.com/users/6124030/emilio-men%c3%a9ndez"}, "is_accepted": false, "score": 0, "last_activity_date": 1512751447, "creation_date": 1512751447, "answer_id": 47718651, "question_id": 47677011, "link": "https://stackoverflow.com/questions/47677011/how-to-convert-the-passed-in-price-value-to-cents-before-saving-to-database/47718651#47718651", "title": "how to convert the passed in price value to cents before saving to database?", "body": "<p>If what you want is to convert the price passed in from the controller to an Integer (or a float in your case) when you save it to the database, you can use money-rails gem:</p>\n\n<p><a href=\"https://github.com/RubyMoney/money-rails\" rel=\"nofollow noreferrer\">https://github.com/RubyMoney/money-rails</a></p>\n"}], "owner": {"reputation": 2821, "user_id": 734861, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/898cac257f853f8bf0a1a84a67d88c40?s=128&d=identicon&r=PG", "display_name": "kofhearts", "link": "https://stackoverflow.com/users/734861/kofhearts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 47677988, "answer_count": 2, "score": 0, "last_activity_date": 1512751447, "creation_date": 1512571517, "question_id": 47677011, "link": "https://stackoverflow.com/questions/47677011/how-to-convert-the-passed-in-price-value-to-cents-before-saving-to-database", "title": "how to convert the passed in price value to cents before saving to database?", "body": "<p>I have create action that will create a karaoke object. </p>\n\n<pre><code>  def create\n    @user = current_user\n    @karaoke = @user.karaokes.build(karaoke_params)\n\n    respond_to do |format|\n      if @karaoke.save\n        format.html { redirect_to @karaoke, notice: 'Karaoke was successfully created.' }\n        format.json { render :show, status: :created, location: @karaoke }\n      else\n        format.html { render :new }\n        format.json { render json: @karaoke.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>i have allowed the following parameters to bind</p>\n\n<pre><code># Never trust parameters from the scary internet, only allow the white list through.\ndef karaoke_params\n  params.require(:karaoke).permit(:name, :audio, :price)\nend\n</code></pre>\n\n<p>Now what i want to do is in database the price field is of type integers because i am saving money as cents in database. So, in create action, before saving the user parameter for price, i want to multiply by 100 to convert it to cents. How can i multiply the passed in price form value by 100 and assign it to price field of Karaoke object? I appreciate any help! Thanks!</p>\n\n<p>The form to accept the karaoke parameters are as follows</p>\n\n<pre><code>&lt;%= form_for(@karaoke) do |f| %&gt;\n  &lt;% if @karaoke.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@karaoke.errors.count, \"error\") %&gt; prohibited this karaoke from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @karaoke.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :name %&gt;&lt;br&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :price %&gt;&lt;br&gt;\n    &lt;%= f.text_field :price %&gt;\n  &lt;/div&gt;\n\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :audio %&gt;&lt;br&gt;\n    &lt;%= f.file_field :audio %&gt;\n  &lt;/div&gt;\n\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "browser-cache"], "answers": [{"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1512572485, "post_id": 47677240, "comment_id": 82313564, "body": "I&#39;ve already got the site running in production on another server so I have been able to identify the weak points (browser caching). So, I figured that if I could fix the browser caching in development then I would be able to easily transfer that code to work as expected in production and fix the browser caching."}, {"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 1, "creation_date": 1512572605, "post_id": 47677240, "comment_id": 82313662, "body": "Check out the official rails documentation for caching in development: <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#caching-in-development\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1512576207, "post_id": 47677240, "comment_id": 82316216, "body": "I got everything to work in development with the guide you sent earlier. Dropped the code I posted in the original question to the production.rb, restarted everything and the expiration and max ages aren&#39;t set. Is there another config or something required for production? I do have this line of code in my production.rb file also. config.action_controller.perform_caching = true"}, {"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 1, "creation_date": 1512578093, "post_id": 47677240, "comment_id": 82317450, "body": "How are you serving assets? Does your rails app sit behind nginx or apache? The code in the original question is only for public files (assets, images, javascript). If you&#39;re serving them with nginx/apache, these settings won&#39;t take effect."}], "tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": true, "score": 1, "last_activity_date": 1512572184, "creation_date": 1512572184, "answer_id": 47677240, "question_id": 47676955, "link": "https://stackoverflow.com/questions/47676955/rails-5-google-page-speed-insights-leverage-browser-caching/47677240#47677240", "title": "Rails 5 - Google Page Speed Insights - Leverage Browser Caching", "body": "<p>Testing a rails server in development is like trying to empty the oceans of water. The main changes in the production environment are performance enhancing configurations (caching, class reloading, asset compilation, etc). </p>\n\n<p>I'd suggest copying the default production configurations over to your development config if you want to test performance in development mode. This will probably make development painful for you, however.</p>\n\n<p>Or switch environments to production.</p>\n\n<p>What's your real goal here?</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 47677240, "answer_count": 1, "score": 0, "last_activity_date": 1512572184, "creation_date": 1512571358, "question_id": 47676955, "link": "https://stackoverflow.com/questions/47676955/rails-5-google-page-speed-insights-leverage-browser-caching", "title": "Rails 5 - Google Page Speed Insights - Leverage Browser Caching", "body": "<p>I've got a Rails 5 development site running on a public server. The project is also in development mode. I have been scanning the site with Google Page Speed Insights and one of the largest suggestions has been to leverage browser caching. So, I looked around on google and every answer says to use this code:</p>\n\n<pre><code>config.public_file_server.headers = {\n  'Cache-Control' =&gt; 'public, s-maxage=31536000, maxage=15552000',\n  'Expires' =&gt; \"#{1.year.from_now.to_formatted_s(:rfc822)}\"\n}\n</code></pre>\n\n<p>Because the project is in development mode I put this code in my development.rb file rather than production.rb. I haven't been able to get any different results by doing this. No errors either. I could use some guidance! Thanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1512572748, "post_id": 47676948, "comment_id": 82313772, "body": "Your two snippets do different things.  For example, in the first one you do nothing with <code>p3</code>. And in the second one, <code>MyClass.new</code> receives <code>p3</code> along with others."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 2, "creation_date": 1512573695, "post_id": 47676948, "comment_id": 82314455, "body": "If you want to <i>take out certain key and use it later</i> then you might want to <code>delete(:that_key)</code> from the source hash and store it in a separate variable <i>before</i> calling <code>MyClass.new(some_h)</code>. Unless you want to keep the source hash the same all the way, then <code>except</code> is your friend."}, {"owner": {"reputation": 675, "user_id": 8672443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5nJJX.jpg?s=128&g=1", "display_name": "ZpfSysn", "link": "https://stackoverflow.com/users/8672443/zpfsysn"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1512576201, "post_id": 47676948, "comment_id": 82316214, "body": "@MrYoshiji Doesn&#39;t &quot;slice&quot; do the same thing as &quot;delete&quot;?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1512576284, "post_id": 47676948, "comment_id": 82316268, "body": "No, <code>slice</code> does not remove the key/value pair from the hash, <code>delete</code> does: <code>{ a: 1, b: 2 }.tap { |h| h.slice(:a) }.key?(:a)</code> returns <code>true</code> but <code>{ a: 1, b: 2 }.tap { |h| h.delete(:a) }.key?(:a)</code> returns <code>false</code>"}, {"owner": {"reputation": 675, "user_id": 8672443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5nJJX.jpg?s=128&g=1", "display_name": "ZpfSysn", "link": "https://stackoverflow.com/users/8672443/zpfsysn"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1512576610, "post_id": 47676948, "comment_id": 82316490, "body": "@MrYoshiji thanks for the input. I see what I wanted to do now."}], "answers": [{"tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": true, "score": 2, "last_activity_date": 1512572512, "creation_date": 1512572512, "answer_id": 47677342, "question_id": 47676948, "link": "https://stackoverflow.com/questions/47676948/rails-except-vs-slice-to-take-out-certain-parameter/47677342#47677342", "title": "Rails: &quot;except&quot; vs &quot;slice&quot; to take out certain parameter?", "body": "<p>Using <code>except</code> with parameter hashes is dangerous because you're saying \"allow any parameter other than this one\" so it opens your model up to mass-assignment attacks. </p>\n\n<p>Unless I'm not thinking of another attack vector you should be fine, because you're filtering your acceptable parameter hash with <a href=\"https://github.com/rails/strong_parameters\" rel=\"nofollow noreferrer\">strong_parameters</a> in your <code>whiteList_function</code>. So, you're fine further filtering that hash with either <code>slice</code> or <code>except</code>, whichever is more appealing to you.</p>\n"}, {"comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1512576373, "post_id": 47678042, "comment_id": 82316330, "body": "I think OP wants to omit the <code>p3</code> key/value pair only for a specific context but still keep it as whitelisted in other contexts (to be confirmed though)"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1512574656, "creation_date": 1512574656, "answer_id": 47678042, "question_id": 47676948, "link": "https://stackoverflow.com/questions/47676948/rails-except-vs-slice-to-take-out-certain-parameter/47678042#47678042", "title": "Rails: &quot;except&quot; vs &quot;slice&quot; to take out certain parameter?", "body": "<p>I'm no Rails user and maybe I misunderstand your question but in plain Ruby here is what I would do</p>\n\n<pre><code>class MyClass\n  attr_reader :params\n  def initialize params\n    @params = whiteList_function params\n  end\n  def whiteList_function params\n    whiteList = [:p1, :p2]\n    params.select{|key| whiteList.include? key }\n  end\nend\n\nMyClass.new({\"p1\": \"foo\", \"p2\": \"bar\", \"p3\":\"param that i want to extract\"})\n# #&lt;MyClass:0x00000002802a58 @params={:p1=&gt;\"foo\", :p2=&gt;\"bar\"}&gt;\n</code></pre>\n"}], "owner": {"reputation": 675, "user_id": 8672443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5nJJX.jpg?s=128&g=1", "display_name": "ZpfSysn", "link": "https://stackoverflow.com/users/8672443/zpfsysn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 47677342, "answer_count": 2, "score": 1, "last_activity_date": 1512574656, "creation_date": 1512571344, "last_edit_date": 1512571673, "question_id": 47676948, "link": "https://stackoverflow.com/questions/47676948/rails-except-vs-slice-to-take-out-certain-parameter", "title": "Rails: &quot;except&quot; vs &quot;slice&quot; to take out certain parameter?", "body": "<p>I am trying to create a class instance with one particular key extracted out and save for later</p>\n\n<p>consider this is the type of param:</p>\n\n<pre><code>Parameters: {\"p1\": \"foo\", \"p2\": \"bar\", \"p3\":\"param that i want to extract\" &gt;\n</code></pre>\n\n<p>I would do something like: </p>\n\n<pre><code>@my_class = MyClass.new(whiteList_function.except(:p3))\n</code></pre>\n\n<p>or something like</p>\n\n<pre><code>@my_class = MyClass.new(whiteList_function)\n@my_class_key = @my_class.slice(:p3)\n</code></pre>\n\n<p>My whiteList_function:</p>\n\n<pre><code>def whiteList_function\n    params.require(:my_class).permit(:p1,:p2,p3)\nend\n</code></pre>\n\n<p>My concern is that, I have searched on SO and some have mentioned the security risk of using <code>except</code>.</p>\n\n<p>So my question is, in this particular usage(take out certain key and use them for later), should I use <code>except</code> or <code>slice</code>?</p>\n"}, {"tags": ["ruby", "passenger"], "answers": [{"tags": [], "owner": {"reputation": 2340, "user_id": 2250791, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e72d4f734d39c777f543025d36d4de4e?s=128&d=identicon&r=PG", "display_name": "Camden Narzt", "link": "https://stackoverflow.com/users/2250791/camden-narzt"}, "is_accepted": true, "score": 1, "last_activity_date": 1512570294, "creation_date": 1512570294, "answer_id": 47676587, "question_id": 47676484, "link": "https://stackoverflow.com/questions/47676484/phusion-passenger-5-1-11-doesnt-recognize-start-timeout-option/47676587#47676587", "title": "Phusion Passenger 5.1.11 doesn&#39;t recognize --start-timeout option", "body": "<p>This is an enterprise-only flag. The release announcement should have been more clear. </p>\n"}], "owner": {"reputation": 147, "user_id": 419735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f2a71e4cb6f248d0a37c05977b1f641?s=128&d=identicon&r=PG", "display_name": "Serhiy Yakovyn", "link": "https://stackoverflow.com/users/419735/serhiy-yakovyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 47676587, "answer_count": 1, "score": 1, "last_activity_date": 1512570294, "creation_date": 1512569996, "question_id": 47676484, "link": "https://stackoverflow.com/questions/47676484/phusion-passenger-5-1-11-doesnt-recognize-start-timeout-option", "title": "Phusion Passenger 5.1.11 doesn&#39;t recognize --start-timeout option", "body": "<p>According to the blog <a href=\"https://blog.phusion.nl/2017/10/16/passenger-5-1-11/\" rel=\"nofollow noreferrer\">https://blog.phusion.nl/2017/10/16/passenger-5-1-11/</a> </p>\n\n<blockquote>\n  <p>[Standalone] passenger start now accepts the --start-timeout configuration option.</p>\n</blockquote>\n\n<p>I have passenger gem installed and it has a version: \"Phusion Passenger 5.1.11\".</p>\n\n<p>But, when I run <code>passenger start --start-timeout 300</code> it says:\n<code>*** ERROR: invalid option: --start-timeout</code></p>\n\n<p>Is there a way to make --start-timeout option work? Do I miss anything?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1512569689, "post_id": 47676200, "comment_id": 82311562, "body": "Do not use regex to parse HTML. Use a proper HTML parser and add the <code>&lt;span&gt;</code> tag to the DOM."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512569759, "post_id": 47676200, "comment_id": 82311605, "body": "hi Stefan, I am doing it as admin on Active Admin inputs. Why shouldn&#39;t I do it with a regexp? I&#39;m a ruby newbie so I thought that could work. Are there security issues ? I want to change the input that I enter so that the one with &lt;span&gt; are saved to the database (instead of the one without &lt;span&gt;s)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512570016, "post_id": 47676200, "comment_id": 82311796, "body": "See <a href=\"https://stackoverflow.com/a/22944075/477037\">The Stack Overflow Regular Expressions FAQ</a>, there are several links explaining why you should not use regular expressions to parse HTML."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512570240, "post_id": 47676200, "comment_id": 82311954, "body": "thanks will check out. Learning sth new everyday:)"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512573351, "post_id": 47676200, "comment_id": 82314221, "body": "Thanks a lot. I went through the very &quot;intense&quot; debate betwene people for and agaisnt using regexp to parse html.In the end I&#39;ll go for using it , agreeing with this person &quot;If you have a small set of HTML pages that you want to scrape data from and then stuff into a database, regexes might work fine. For example, I recently wanted to get the names, parties, and districts of Australian federal Representatives, which I got off of the Parliament&#39;s web site. This was a limited, one-time job&quot; (source: <a href=\"https://stackoverflow.com/a/1733489/1467802\">stackoverflow.com/a/1733489/1467802</a>)"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512573382, "post_id": 47676200, "comment_id": 82314237, "body": "Indeed it&#39;s not like i am parsing 10k pages, it&#39;s just me and wanting to add a tag when I add an input i control 100% in my Active Admin Rails panel"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512573434, "post_id": 47676200, "comment_id": 82314275, "body": "But the reading was very interesting and definiitely detered me from ever using regexp when parsing will be on volatile/uncontrollable/random/mass html parsing"}], "answers": [{"comments": [{"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1512574621, "post_id": 47676378, "comment_id": 82315082, "body": "could you add just a little more info: indeed this works the first time but if i change the text/input in my admin panel, then the script kick in again and i end up with 4 spans instead of 2:) Could I use some if string contains no span yet, then do this..."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1512576030, "post_id": 47676378, "comment_id": 82316079, "body": "aweosme, let me check it. i must really try learning regexp, it seems powerful !"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1512576090, "post_id": 47676378, "comment_id": 82316132, "body": "how does $1.present work I mean don&#39;t you have to say where you check the presence of $1 ? like on orig_string?"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1512576159, "post_id": 47676378, "comment_id": 82316178, "body": "i get undefined method `present?&#39; for nil:NilClass:)"}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "reply_to_user": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1512577268, "post_id": 47676378, "comment_id": 82316922, "body": "<code>nil</code> should return false for <code>present?</code>. Can you try <code>unless $1.blank?</code>"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 1, "last_activity_date": 1512575923, "last_edit_date": 1512575923, "creation_date": 1512569675, "answer_id": 47676378, "question_id": 47676200, "link": "https://stackoverflow.com/questions/47676200/ruby-2-3-add-strings-after-and-before-certain-regexp-match/47676378#47676378", "title": "Ruby 2.3 - Add strings after and before certain regexp match", "body": "<pre><code>orig_string =~ /(?&lt;=&gt;)([^&lt;]*)(?=&lt;\\/a&gt;)/\nif $1.present?\n  end_result = orig_strig.gsub(/(?&lt;=&gt;)([^&lt;]*)(?=&lt;\\/a&gt;)/, '&lt;span&gt;\\1&lt;/span&gt;')\nend\n</code></pre>\n\n<p>Break down</p>\n\n<pre><code>(?&lt;=&gt;) # to have character &gt;  before\n([^&lt;]*) # match everything until character &lt;, match everything in a tag\n(?=&lt;\\/a&gt;) # to have &lt;/a&gt; after\n</code></pre>\n\n<p>Will result in</p>\n\n<pre><code>print end_result\n'text 6ffdfd &lt;a href=\"http://example.com\" target=\"_blank\"&gt;&lt;span&gt;toto&lt;/span&gt;&lt;/a&gt; sdsdsd'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1512573525, "post_id": 47676382, "comment_id": 82314349, "body": "Hi Sebastian, thanks for your help. Please refer to my comments under my question where I explain why in the end i still opted for a regexp. On top of those reasons, i also did not want to make my Ruby on Rails 4 more heavy than it already is for a very simple need by importing/requiring another library (nokogiri)"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1512569683, "creation_date": 1512569683, "answer_id": 47676382, "question_id": 47676200, "link": "https://stackoverflow.com/questions/47676200/ruby-2-3-add-strings-after-and-before-certain-regexp-match/47676382#47676382", "title": "Ruby 2.3 - Add strings after and before certain regexp match", "body": "<p>If you don't necessarily need a regex, then you could use Nokogiri:</p>\n\n<pre><code>require 'nokogiri'\n\ntext = &lt;&lt;-TEXT\n  text 6ffdfd &lt;a href=\"http://worldnews.com\" target=\"_blank\"&gt;toto&lt;/a&gt; sdsdsd\n  6ffdfd text &lt;a href=\"http://worldnews.com\" target=\"_blank\"&gt;tete&lt;/a&gt; sdsdsd\n  6ffdfd text &lt;a href=\"http://worldnews.com\"&gt;titi&lt;/a&gt; sdsdsd\nTEXT\n\ndoc = Nokogiri.HTML text\ndoc.css('a[target=\"_blank\"]').each { |anchor| anchor.add_next_sibling '&lt;span&gt;span&lt;/span&gt;' }\n</code></pre>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 47676378, "answer_count": 2, "score": 0, "last_activity_date": 1512575923, "creation_date": 1512569083, "last_edit_date": 1512569508, "question_id": 47676200, "link": "https://stackoverflow.com/questions/47676200/ruby-2-3-add-strings-after-and-before-certain-regexp-match", "title": "Ruby 2.3 - Add strings after and before certain regexp match", "body": "<p>I have a string</p>\n\n<pre><code>text 6ffdfd &lt;a href=\"http://worldnews.com\" target=\"_blank\"&gt;toto&lt;/a&gt; sdsdsd\n</code></pre>\n\n<p>I would like to find a regex that would </p>\n\n<ul>\n<li><ol>\n<li>add a opening span tag just after the end of the a tag html link (that is to say to be precise after the string \"target=\"_blank\">\"</li>\n</ol></li>\n<li><ol start=\"2\">\n<li>add a closing span tag just before the a tag closing</li>\n</ol></li>\n</ul>\n\n<p>The desired end result would be:</p>\n\n<pre><code> &lt;a href=\"http://worldnews.com\" target=\"_blank\"&gt;&lt;span&gt;toto&lt;/span&gt;&lt;/a&gt; sdsdsd\n</code></pre>\n\n<p>For the moment , I don't find how to achieve 1, and I only partially managed 2. because my current code is wrongly adding white space that I don't want between /span and the closing a tag</p>\n\n<p>Current code</p>\n\n<pre><code>orig_string = 'text 6ffdfd &lt;a href=\"http://example.com\" target=\"_blank\"&gt;toto&lt;/a&gt; sdsdsd'\nend_result = orig_string.gsub(/&lt;\\/a&gt;/, '&lt;/span&gt; \\\\0')\nprint end_result\n</code></pre>\n\n<p>I have a set up a online editable DEMO here: <a href=\"https://repl.it/repls/SecondCapitalPika\" rel=\"nofollow noreferrer\">https://repl.it/repls/SecondCapitalPika</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "table-relationships"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 3325872, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8cca47f538f7782cf47905b9a38fc3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3325872/bruno"}, "edited": false, "score": 0, "creation_date": 1513528673, "post_id": 47676115, "comment_id": 82678666, "body": "Thank you Nermin, It helped a lot! But I noticed that in the table matches the fields hosting_team_id and visiting_team_id are not foreign keys. How can I mark them to be foreign keys?"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 1, "last_activity_date": 1512568808, "creation_date": 1512568808, "answer_id": 47676115, "question_id": 47675867, "link": "https://stackoverflow.com/questions/47675867/how-to-structure-relationships-between-models-in-ruby-on-rails/47676115#47676115", "title": "How to structure relationships between models in Ruby On Rails", "body": "<p>The logic is, to have a match, and two teams in a match. One team will be hosting and one will be a visitor. Even if they play on neutral ground one team is still technically a host.</p>\n\n<pre><code>class Team &lt; ApplicationRecord\n  has_many :hosted_matches, class_name: 'Match', foreign_key: :hosting_team_id\n  has_many :visited_matches, class_name: 'Match', foreign_key: :visiting_team_id\nend\n\nclass Match &lt; ApplicationRecord\n  belongs_to :hosting_team, class_name: 'Team'\n  belongs_to :visiting_team, class_name: 'Team'\nend\n\n...    \n\n# create team here\n# create team2 here\n\nmatch = Match.new(hosting_team: team, visiting_team: team2)\nmatch.save!\n</code></pre>\n\n<p>Migrations</p>\n\n<pre><code>class CreateTeams &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :teams do |t|\n      t.timestamps\n    end\n  end\nend\n\nclass CreateMatches &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :matches do |t|\n      t.integer :hosting_team_id\n      t.integer :visiting_team_id\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 3325872, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8cca47f538f7782cf47905b9a38fc3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/3325872/bruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "closed_date": 1512581716, "answer_count": 1, "score": -1, "last_activity_date": 1512568808, "creation_date": 1512568041, "question_id": 47675867, "link": "https://stackoverflow.com/questions/47675867/how-to-structure-relationships-between-models-in-ruby-on-rails", "closed_reason": "Opinion-based", "title": "How to structure relationships between models in Ruby On Rails", "body": "<p>I'm developing an application to schedule soccer matches for two teams at a time. So, for example I need to schedule a match for two teams, but I'm not sure how can I structure the database relation between these two entities.</p>\n\n<p>One solution I thought is a relation many to many between them, and in the Associative Table(match_teams) I put a is_visitor field, to indicate which team is playing outside home:</p>\n\n<p>team model:</p>\n\n<pre><code>class Team &lt; ApplicationRecord\n    has_many :match_team\n    has_many :matches, through: :match_team\nend\n</code></pre>\n\n<p>match model:</p>\n\n<pre><code>class Match &lt; ApplicationRecord\n    has_many :match_team\n    has_many :teams, through: :match_team\nend\n</code></pre>\n\n<p>match_team model:</p>\n\n<pre><code>class MatchTeam &lt; ApplicationRecord\n  belongs_to :match\n  belongs_to :team\nend\n</code></pre>\n\n<p>team migration:</p>\n\n<pre><code>class CreateTeams &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :teams do |t|\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>match migration:</p>\n\n<pre><code>class CreateMatches &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :matches do |t|\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>match_teams migration:</p>\n\n<pre><code>class CreateMatchTeams &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :match_teams do |t|\n        t.belongs_to :match, index: true, foreign_key: true\n        t.belongs_to :team, index: true, foreign_key: true\n        t.boolean \"is_visitor\", default: false\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>So, I can do something like:</p>\n\n<pre><code>#create team here\n#create team2 here\n\nmatch = Match.new()\nmatch.teams = [team, team2]\nmatch.save!\n\nmatch_team_associative = match.match_team\nmatch_team_associative.each do |item|\n  if item.team_id == team.id\n    item.is_visitor = true\n    item.save!\n  end\nend\n</code></pre>\n\n<p>I don't know if this is the better solution, or if it's ok the manner I'm changing the value of is_visitor field in the associative table.</p>\n\n<p>Another soluction I think would be has two relations one to many between these entitties team and match. A table matches would have a foreign key for teams called team, and another foreign key for teams called visitor_team, like:</p>\n\n<p>matches table:</p>\n\n<pre><code>id | team | visitor_team\n1  |    1 | 2\n</code></pre>\n\n<p>But this second soluction I could't implement, I don't know how to do that. I find something <a href=\"https://stackoverflow.com/questions/30468368/2-or-more-one-to-many-relationships-between-two-tables-in-rails\">here</a> but I could't make it work. Does anyone can help me telling me how to make it work that way?</p>\n\n<p>Which of these two solution is better? I think maybe the second, but it couldn't make it work.</p>\n\n<p>I appreciate any help.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "wicked-pdf"], "answers": [{"tags": [], "owner": {"reputation": 452, "user_id": 2075165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CBx1B.jpg?s=128&g=1", "display_name": "Tomasz Giba", "link": "https://stackoverflow.com/users/2075165/tomasz-giba"}, "is_accepted": true, "score": 5, "last_activity_date": 1512567843, "creation_date": 1512567843, "answer_id": 47675811, "question_id": 47675591, "link": "https://stackoverflow.com/questions/47675591/wicked-pdf-doesnt-find-my-assets-in-production/47675811#47675811", "title": "wicked pdf doesnt find my assets in production", "body": "<p>Have you added <code>pdf.css</code> to precompiled assets in <code>initializers/assets.rb</code>?</p>\n\n<pre><code>Rails.application.config.assets.precompile += ['pdf.css']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 319, "user_id": 9524228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025c48c80ff33aaa4053169c10d6ada4?s=128&d=identicon&r=PG&f=1", "display_name": "greenridinghood", "link": "https://stackoverflow.com/users/9524228/greenridinghood"}, "is_accepted": false, "score": 0, "last_activity_date": 1609272493, "creation_date": 1609272493, "answer_id": 65498114, "question_id": 47675591, "link": "https://stackoverflow.com/questions/47675591/wicked-pdf-doesnt-find-my-assets-in-production/65498114#65498114", "title": "wicked pdf doesnt find my assets in production", "body": "<p>Every issue could be happen because of different reasons. So I wanted to share mine if somebody have possibly same situation.</p>\n<ul>\n<li>Ruby updated at some point (this error happened after update).\nand we were getting 'pdf.css not find error' on the heroku console.</li>\n</ul>\n<p>we run <code>gem update sass-rails</code> <code>gem update wicked_pdf</code> and <code>gem update wkhtmltopdf-binary</code> on the heroku console.</p>\n<p>best</p>\n"}], "owner": {"reputation": 145, "user_id": 8615460, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10209612018527286/picture?type=large", "display_name": "Antoine Wako", "link": "https://stackoverflow.com/users/8615460/antoine-wako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1227, "favorite_count": 0, "accepted_answer_id": 47675811, "answer_count": 2, "score": 3, "last_activity_date": 1609272493, "creation_date": 1512567130, "question_id": 47675591, "link": "https://stackoverflow.com/questions/47675591/wicked-pdf-doesnt-find-my-assets-in-production", "title": "wicked pdf doesnt find my assets in production", "body": "<p>I have a problem with my CSS of wicked pdf\nEverything work in local but it not find the pdf.css in production</p>\n\n<pre><code>ActionView::Template::Error (The asset \"components/pdf.css\" is not present in the asset pipeline.):\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n&lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css\" integrity=\"sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb\" crossorigin=\"anonymous\"&gt;\n&lt;%= wicked_pdf_stylesheet_link_tag 'components/pdf.css' %&gt;\n &lt;/head&gt;\n&lt;body&gt;\n&lt;%= yield %&gt;\n</code></pre>\n\n<p>My pdf.html.erb</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css\" integrity=\"sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb\" crossorigin=\"anonymous\"&gt;\n    &lt;%= wicked_pdf_stylesheet_link_tag 'components/pdf' %&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n      &lt;%= yield %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>my components/pdf.css</p>\n\n<pre><code>.document-pdf {\n  background-image: asset-data-url(\"fond.png\");\n  background-size: 23cm 13cm;\n  background-color: white;\n  background-repeat: no-repeat;\n  background-position: 50% 70%;\n  font-family: \"Helvetica Neue\", Helvetica;\n}\n</code></pre>\n"}, {"tags": ["ruby", "ssl", "amazon-rds", "ruby-datamapper"], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 2372603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4c2cc684a3f83a206b9fdf53e57ea3?s=128&d=identicon&r=PG", "display_name": "stmllr", "link": "https://stackoverflow.com/users/2372603/stmllr"}, "edited": false, "score": 0, "creation_date": 1512592927, "post_id": 47676565, "comment_id": 82325557, "body": "Thanks. This wiki section is obvious about the option. Unfortunately it does not work using <code>ssl[ca_cert]=path_to_cert</code> uri.  However if I use <code>DataMapper.setup</code> with <code>:ssl =&gt; {:ca_cert  =&gt; &#39;&#47;path&#47;to&#47;rds-combined-ca-bundle.pem&#39;}</code> option then it works"}, {"owner": {"reputation": 632, "user_id": 2372603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4c2cc684a3f83a206b9fdf53e57ea3?s=128&d=identicon&r=PG", "display_name": "stmllr", "link": "https://stackoverflow.com/users/2372603/stmllr"}, "edited": false, "score": 0, "creation_date": 1512599670, "post_id": 47676565, "comment_id": 82328804, "body": "After debugging for a while I came to the conclusion that the reason is a limitation of <code>Addressable::Uri</code>. It seems that it cannot handle query strings which aim to represent hashes with more than 1 level. I tested by using it successively in both directions: 1. Create the query string from the hash. 2. Use the result to recreate the hash. Result was <code>{&quot;ssl&quot;=&gt;&quot;{:ca_cert=&gt;\\&quot;&#47;path&#47;to&#47;cert\\&quot;}&quot;}</code> instead of <code>{&quot;ssl&quot;=&gt;{:ca_cert=&gt;&quot;&#47;path&#47;to&#47;cert&quot;}}</code>"}], "tags": [], "owner": {"reputation": 2941, "user_id": 3514821, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ed65fecd7bfa78124bb7f0e4346aba73?s=128&d=identicon&r=PG&f=1", "display_name": "sanath meti", "link": "https://stackoverflow.com/users/3514821/sanath-meti"}, "is_accepted": false, "score": 0, "last_activity_date": 1512570233, "creation_date": 1512570233, "answer_id": 47676565, "question_id": 47672977, "link": "https://stackoverflow.com/questions/47672977/ruby-datamapper-connection-with-ssl-to-mariadb-on-amazon-rds/47676565#47676565", "title": "Ruby Datamapper connection with SSL to MariaDB on Amazon RDS", "body": "<p>In doc </p>\n\n<p><a href=\"https://github.com/datamapper/do/wiki/MySQL\" rel=\"nofollow noreferrer\">https://github.com/datamapper/do/wiki/MySQL</a></p>\n\n<p>It also says </p>\n\n<ul>\n<li><h1>as tested only ca_cert was required to connect to RDS.</h1></li>\n</ul>\n\n<p>So try adding only ca_cert path and do a test</p>\n"}, {"tags": [], "owner": {"reputation": 632, "user_id": 2372603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4c2cc684a3f83a206b9fdf53e57ea3?s=128&d=identicon&r=PG", "display_name": "stmllr", "link": "https://stackoverflow.com/users/2372603/stmllr"}, "is_accepted": true, "score": 0, "last_activity_date": 1512656371, "last_edit_date": 1512656371, "creation_date": 1512600727, "answer_id": 47684845, "question_id": 47672977, "link": "https://stackoverflow.com/questions/47672977/ruby-datamapper-connection-with-ssl-to-mariadb-on-amazon-rds/47684845#47684845", "title": "Ruby Datamapper connection with SSL to MariaDB on Amazon RDS", "body": "<p>There's only one parameter required: <code>:ssl =&gt; {:ca_cert =&gt; 'pem_file'}</code>.</p>\n\n<p>However it looks like using uri string for configuration does not work. The reason is a limitation in Addressable::Uri. It cannot handle query strings which aim to represent hashes with more than 1 level.</p>\n\n<p>The good news is that it works using <code>DataMapper.setup</code> with a config Hash:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>DataMapper.setup(:default, \n    :adapter  =&gt; 'mysql', \n    :user     =&gt; 'user',\n    :database =&gt; 'db_name',\n    :host     =&gt; 'host',\n    :password =&gt; 'pass',\n    :ssl =&gt; { \n        :ca_cert  =&gt; '/path/to/rds-combined-ca-bundle.pem'\n    }\n)\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 2372603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4c2cc684a3f83a206b9fdf53e57ea3?s=128&d=identicon&r=PG", "display_name": "stmllr", "link": "https://stackoverflow.com/users/2372603/stmllr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 47684845, "answer_count": 2, "score": 0, "last_activity_date": 1512656371, "creation_date": 1512558800, "question_id": 47672977, "link": "https://stackoverflow.com/questions/47672977/ruby-datamapper-connection-with-ssl-to-mariadb-on-amazon-rds", "title": "Ruby Datamapper connection with SSL to MariaDB on Amazon RDS", "body": "<p>How do I establish a ruby Datamapper connection to MariaDB on Amazon RDS with SSL?</p>\n\n<p>Here's what I did:</p>\n\n<p>A non-SSL connection works when testing with:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>uri = 'mysql://user:pass@host:port/db_name'\nconnection = DataObjects::Connection.new(uri)\n=&gt; #&lt;DataObjects::Mysql::Connection:0x000056179a3a5921\n\nconnection.secure?\n=&gt; false\n</code></pre>\n\n<p>According to the <a href=\"https://github.com/datamapper/do/wiki/MySQL\" rel=\"nofollow noreferrer\">MySQL datamapper wiki</a>, an ssl connection requires the following options: <code>:ssl_ca, :client_key, and :client_cert</code>.</p>\n\n<p>This would result in the following code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>uri = 'mysql://user:pass@host:port/db_name?'\nssl_opts = 'ssl[ssl_ca]=file&amp;ssl[client_key]=file&amp;ssl[client_cert]=file'\n\nconnection = DataObjects::Connection.new(uri + ssl_opts)\nconnection.secure?\n=&gt; false\n</code></pre>\n\n<p>However the only files get is the <a href=\"https://s3.amazonaws.com/rds-downloads/rds-combined-ca-bundle.pem\" rel=\"nofollow noreferrer\">RDS combind CA bundle</a>, refered from the <a href=\"http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_MariaDB.html#MariaDB.Concepts.SSLSupport\" rel=\"nofollow noreferrer\">RDS docs</a></p>\n\n<p>I do not have a client_cert at all.</p>\n\n<p>Connecting with the mysql client on cli works with SSL:</p>\n\n<pre><code>mysql --ssl -h host -u user -p pass db_name\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 1638\nServer version: 10.1.26-MariaDB MariaDB Server\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1512558761, "post_id": 47672763, "comment_id": 82304701, "body": "Are you using nokogiri for this? If so, take a look at the examples here: <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Builder\" rel=\"nofollow noreferrer\">rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Buil&zwnj;&#8203;der</a>"}, {"owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1512558903, "post_id": 47672763, "comment_id": 82304795, "body": "Hi, Yes using Nokogiri, I am ok with the language used and how it should be formatted just not when there is a tag within a tag this is confusing me."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512574108, "post_id": 47672763, "comment_id": 82314726, "body": "Please include the nokigiri-part in your question, otherwise its hard to guess what the xml-Object refers to"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512560487, "post_id": 47673182, "comment_id": 82305706, "body": "This does not work, xml.Betrag (&quot;waehrung&quot;: &quot;EUR&quot;) |e| e &lt;&lt; &quot;#{row[13]}&quot;"}, {"owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512560502, "post_id": 47673182, "comment_id": 82305712, "body": "it says unexpected keyword_end, expecting end-of-input end"}, {"owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "reply_to_user": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512560785, "post_id": 47673182, "comment_id": 82305854, "body": "you are not using the correct syntax. Use this <code>xml.Betrag(waehrung: &#39;EUR&#39;) { |e| e &lt;&lt; &#39;15000&#39; } </code>"}, {"owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512560980, "post_id": 47673182, "comment_id": 82305990, "body": "E is determined by the value in a cell in a particular row so I cant declare it as a constant because its changing all the time so betrag column in excel could be like this: 1,2,3,4,5,6 and each representation of e should be 1,2,3,4,5,6 like this."}, {"owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "reply_to_user": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512561118, "post_id": 47673182, "comment_id": 82306069, "body": "Can&#39;t you replace <code>&#39;15000&#39;</code> with <code>&quot;#{row[13]}&quot;</code>? It will be like <code>xml.Betrag(waehrung: &#39;EUR&#39;) { |e| e &lt;&lt; &quot;#{row[13]}&quot; }</code>"}, {"owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 0, "creation_date": 1512565168, "post_id": 47673182, "comment_id": 82308538, "body": "I would if I knew how to!"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "reply_to_user": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "edited": false, "score": 1, "creation_date": 1512574255, "post_id": 47673182, "comment_id": 82314807, "body": "@George123 Come on! Use your favorite internet search engine or the stackoverflow help! If you can read excel and write XML using ruby you can ***** find that out in under 2 minutes!"}], "tags": [], "owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "is_accepted": true, "score": 0, "last_activity_date": 1512560103, "last_edit_date": 1512560103, "creation_date": 1512559562, "answer_id": 47673182, "question_id": 47672763, "link": "https://stackoverflow.com/questions/47672763/declaring-xml-tags-in-ruby/47673182#47673182", "title": "Declaring XML Tags in Ruby", "body": "<pre><code>require 'nokogiri'\nbuilder = Nokogiri::XML::Builder.new do |xml|\n  xml.Betrag(waehrung: 'EUR') do  |e|\n    e &lt;&lt; '150000'\n  end\nend\nputs builder.to_xml\n\n\n=&gt;\n&lt;?xml version=\"1.0\"?&gt;\n&lt;Betrag waehrung=\"EUR\"&gt;150000&lt;/Betrag&gt;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8196937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/aa68e63003ea4cf27fed9c7951f9e657?s=128&d=identicon&r=PG&f=1", "display_name": "George123", "link": "https://stackoverflow.com/users/8196937/george123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 47673182, "answer_count": 1, "score": 0, "last_activity_date": 1512560103, "creation_date": 1512558161, "last_edit_date": 1512558671, "question_id": 47672763, "link": "https://stackoverflow.com/questions/47672763/declaring-xml-tags-in-ruby", "title": "Declaring XML Tags in Ruby", "body": "<p>I am using Ruby to pull information from an excel sheet and with this information produce an xml file. I need to produce this in Ruby: </p>\n\n<p>What I want: </p>\n\n<pre><code>&lt;Betrag waehrung=\"EUR\"&gt;150000&lt;/Betrag&gt;\n</code></pre>\n\n<p>What I have: </p>\n\n<pre><code>&lt;Betrag waehrung =\"EUR\"/&gt;\n</code></pre>\n\n<p>I am currently trying <code>xml.Betrag \"Waehrung\": \"Eur\"</code>\n the Betrag has a row Identifier of \"#{row[13]}\" which is where it can be found on the excel sheet I am using. I have tried: <code>xml.Betrag \"Waehrung\": (\"Eur\"), (\"#{row[13]}\")</code> with no success, could you please advise?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1512556163, "post_id": 47671861, "comment_id": 82302941, "body": "As I see, <code>user</code> has <code>tasks</code> <code>through</code> <code>responses</code>. How can there be a <code>task</code> for which a user has no <code>response</code> but he is connected to it ? Or the user just does not have to be connected with that task at all ?"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1512556960, "post_id": 47671861, "comment_id": 82303464, "body": "Could you provide the SQL statement?"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1512571363, "post_id": 47672196, "comment_id": 82312735, "body": "The first will not work correctly as <code>!=</code> with a non-scalar list of <code>Response</code> is invalid and will raise a SQL level error because the query is essentially <code>SELECT tasks.* FROM tasks WHERE tasks.user_id !=(SELECT responses.* FROM responses WHERE user_id = [USER_ID_HERE])</code>"}, {"owner": {"reputation": 956, "user_id": 4234853, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81648a1ba49fe19be31389c0c08146a3?s=128&d=identicon&r=PG&f=1", "display_name": "nao", "link": "https://stackoverflow.com/users/4234853/nao"}, "edited": false, "score": 0, "creation_date": 1512575082, "post_id": 47672196, "comment_id": 82315413, "body": "The second answer is the cleanest since it avoids the subquery. As engineersmnky pointed out, the first one will not run."}, {"owner": {"reputation": 956, "user_id": 4234853, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81648a1ba49fe19be31389c0c08146a3?s=128&d=identicon&r=PG&f=1", "display_name": "nao", "link": "https://stackoverflow.com/users/4234853/nao"}, "edited": false, "score": 0, "creation_date": 1512577278, "post_id": 47672196, "comment_id": 82316928, "body": "Actually, I&#39;ve looked over this, and I&#39;m not sure the second answer works. First, there&#39;s an error because it should simply be user id, not User.find(user_id) at the end for the comparison. Second, shouldn&#39;t it be a left_outer_join because we want to get tasks that don&#39;t have any responses as well? I tried doing that, but it&#39;s still not working and I&#39;m not sure why."}, {"owner": {"reputation": 956, "user_id": 4234853, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81648a1ba49fe19be31389c0c08146a3?s=128&d=identicon&r=PG&f=1", "display_name": "nao", "link": "https://stackoverflow.com/users/4234853/nao"}, "edited": false, "score": 0, "creation_date": 1512577324, "post_id": 47672196, "comment_id": 82316956, "body": "My rewritten version. Hoping someone can weigh in on what&#39;s wrong with this  <code>Task.left_outer_joins(:responses).where(&#39;responses.user_id != (?)&#39;, user_id)</code>"}, {"owner": {"reputation": 956, "user_id": 4234853, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81648a1ba49fe19be31389c0c08146a3?s=128&d=identicon&r=PG&f=1", "display_name": "nao", "link": "https://stackoverflow.com/users/4234853/nao"}, "edited": false, "score": 0, "creation_date": 1512577470, "post_id": 47672196, "comment_id": 82317042, "body": "I believe the error is coming from responses.user_id being blank on tasks that have no responses and not being returned because the inverse (equals instead of not equals) works."}, {"owner": {"reputation": 698, "user_id": 5617424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmoz.jpg?s=128&g=1", "display_name": "Vane Trajkov", "link": "https://stackoverflow.com/users/5617424/vane-trajkov"}, "edited": false, "score": 0, "creation_date": 1512588921, "post_id": 47672196, "comment_id": 82323410, "body": "I am not sure that simple join approach will solve your problem. The thing is if you have many responses to Task=1, where one belongs to User=1 but the rest of the responses are coming from other users, with join you will only filter the one match that is for User=1, but still, Task=1 will be returned because of the other responses for Task=1."}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 1, "last_activity_date": 1512557429, "last_edit_date": 1512557429, "creation_date": 1512556653, "answer_id": 47672196, "question_id": 47671861, "link": "https://stackoverflow.com/questions/47671861/complicated-join-in-activerecord/47672196#47672196", "title": "Complicated join in ActiveRecord", "body": "<p>Try this:</p>\n\n<pre><code>Task.where('user_id != (?)', User.find(user_id).responses)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Task.joins(:responses).where('responses.user_id != (?)', User.find(user_id))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 698, "user_id": 5617424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmoz.jpg?s=128&g=1", "display_name": "Vane Trajkov", "link": "https://stackoverflow.com/users/5617424/vane-trajkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1512558339, "creation_date": 1512558339, "answer_id": 47672825, "question_id": 47671861, "link": "https://stackoverflow.com/questions/47671861/complicated-join-in-activerecord/47672825#47672825", "title": "Complicated join in ActiveRecord", "body": "<p>One possible solution is to use a subquery to select all Task records that the User has Response to and they will be excluded from the main query. This will give you all Task records that the User (params[:user_id]) doesn't have Response to</p>\n\n<pre><code>Task.where.not(id: Response.select(:task_id).where(user_id: params[:user_id]))\n</code></pre>\n"}], "owner": {"reputation": 956, "user_id": 4234853, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81648a1ba49fe19be31389c0c08146a3?s=128&d=identicon&r=PG&f=1", "display_name": "nao", "link": "https://stackoverflow.com/users/4234853/nao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 47672825, "answer_count": 2, "score": 0, "last_activity_date": 1512558339, "creation_date": 1512555546, "question_id": 47671861, "link": "https://stackoverflow.com/questions/47671861/complicated-join-in-activerecord", "title": "Complicated join in ActiveRecord", "body": "<p>I'm having an issue with a tricky ActiveRecord query.</p>\n\n<p>I have three models, User, Task, and Response. A user submits responses to tasks. I'm using the has_many, through: pattern in ActiveRecord.</p>\n\n<pre><code>class Task &lt; ApplicationRecord\n  has_many :users, through: :responses\n  has_many :responses\n\nclass User &lt; ApplicationRecord\n  has_many :responses\n  has_many :tasks, through: :responses\n\nclass Response &lt; ApplicationRecord\n  belongs_to :task, optional: false\n  belongs_to :user, optional: false\n</code></pre>\n\n<p>I'm trying to write a query that says, given a user_id, get all tasks where there is no Response from that User linked to it.</p>\n\n<p>So if User 1 is querying, and he only has a Response to task 1, he should see all tasks except task 1.</p>\n"}, {"tags": ["ruby", "powershell"], "comments": [{"owner": {"reputation": 10981, "user_id": 2208505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b30f13eba910edd70ffd2c62920a3169?s=128&d=identicon&r=PG", "display_name": "James C.", "link": "https://stackoverflow.com/users/2208505/james-c"}, "edited": false, "score": 0, "creation_date": 1512555006, "post_id": 47671159, "comment_id": 82302139, "body": "Any reason you&#39;re saving it to system32? That&#39;s a System/OS directory and it&#39;s bad practice to use them for file storage. As System folders are protected on modern versions of Windows, you need elevation to write to them. If you chose another directory, that&#39;s not in the Windows folder, you most likely won&#39;t have this issue anymore."}, {"owner": {"reputation": 135, "user_id": 5562536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50397efc156637501d777d2b92c45f37?s=128&d=identicon&r=PG&f=1", "display_name": "padmaksha roy", "link": "https://stackoverflow.com/users/5562536/padmaksha-roy"}, "reply_to_user": {"reputation": 10981, "user_id": 2208505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b30f13eba910edd70ffd2c62920a3169?s=128&d=identicon&r=PG", "display_name": "James C.", "link": "https://stackoverflow.com/users/2208505/james-c"}, "edited": false, "score": 0, "creation_date": 1512556590, "post_id": 47671159, "comment_id": 82303194, "body": "HI James, thanks for the reply. Changing the path also causes the same issue. In powershell it works fine, but as soon as i change to ruby interpreter &amp; run the script like i mentioned above, it doesnt create the file."}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 7855261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/708760b50b248de29ba4e9d414c6513b?s=128&d=identicon&r=PG&f=1", "display_name": "hustlecoder", "link": "https://stackoverflow.com/users/7855261/hustlecoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1512555000, "creation_date": 1512555000, "answer_id": 47671677, "question_id": 47671159, "link": "https://stackoverflow.com/questions/47671159/powershell-command-doesnt-run-successfully-via-ruby-interpreter/47671677#47671677", "title": "powershell command doesn&#39;t run successfully via ruby interpreter", "body": "<p>This snippet will run the powershell console with administrative rights</p>\n\n<pre><code>PS&gt; Start-Process powershell -Verb runAs\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5562536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50397efc156637501d777d2b92c45f37?s=128&d=identicon&r=PG&f=1", "display_name": "padmaksha roy", "link": "https://stackoverflow.com/users/5562536/padmaksha-roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512558093, "creation_date": 1512553454, "last_edit_date": 1512558093, "question_id": 47671159, "link": "https://stackoverflow.com/questions/47671159/powershell-command-doesnt-run-successfully-via-ruby-interpreter", "title": "powershell command doesn&#39;t run successfully via ruby interpreter", "body": "<p>I was trying to run some commands inside  a powershell script. The scrpt execution doesn't show any error. Script content is like:</p>\n\n<pre><code>Export-PfxCertificate \u2013Cert $selectedcert_CA \u2013FilePath \"C:\\\\Windows\\\\System32\\\\CA_cert.pfx\" -Password $SecurePassword -Verbose -force\n</code></pre>\n\n<p>But when I  execute the powershell script from ruby as:\n<code>powershell.exe -file  file.ps1 arg1 arg2</code></p>\n\n<p>It displays file is created on path but I don't see any file created. If I run the same command separately (not in script just as a powershell command), it creates the file perfectly.</p>\n\n<p>Is there any rights issue or I need to run the script with some permissions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1512553476, "post_id": 47671035, "comment_id": 82301114, "body": "gives me an error #&lt;NoMethodError: undefined method `+&#39; for nil:NilClass&gt;"}, {"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1512553712, "post_id": 47671035, "comment_id": 82301258, "body": "unfortunately I got the same error. Though it worked perfectly like this @users.map{|u| [&quot;#{u.account_code}:  #{u.name}&quot;, u.account_code] } Thanks for pointing the direction!"}], "tags": [], "owner": {"reputation": 599, "user_id": 5963504, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ae80b53abdd383a7339ead329343cb66?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5963504/vishal"}, "is_accepted": false, "score": 1, "last_activity_date": 1512553545, "last_edit_date": 1512553545, "creation_date": 1512553080, "answer_id": 47671035, "question_id": 47670978, "link": "https://stackoverflow.com/questions/47670978/options-for-select-with-multiple-values/47671035#47671035", "title": "options_for_select with multiple values", "body": "<p>Try this:</p>\n\n<pre><code>&lt;%= select_tag :user_id, options_for_select(@users.map{|u| [u&amp;.account_code+\" \"+u&amp;.name, u.account_code] }) %&gt;\n</code></pre>\n\n<p>Hope this helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "is_accepted": false, "score": 0, "last_activity_date": 1512553498, "creation_date": 1512553498, "answer_id": 47671170, "question_id": 47670978, "link": "https://stackoverflow.com/questions/47670978/options-for-select-with-multiple-values/47671170#47671170", "title": "options_for_select with multiple values", "body": "<p>Worked like this:</p>\n\n<p><code>@users.map{|u| [\"#{u.account_code}:  #{u.name}\", u.account_code] }</code></p>\n"}], "owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512553545, "creation_date": 1512552928, "question_id": 47670978, "link": "https://stackoverflow.com/questions/47670978/options-for-select-with-multiple-values", "title": "options_for_select with multiple values", "body": "<p>\nWhat I'm trying to get is a dropdown with 2 fields (<code>name</code> and <code>account_code</code>) as a value</p>\n\n<p><code>&lt;option value=\"1\"&gt;ACC: John Doe&lt;/option&gt;</code></p>\n\n<p>But current code</p>\n\n<p></p>\n\n<pre><code>&lt;%= select_tag :user_id, options_for_select(@users.map{|u| [u.name, u.account_code] }) %&gt;\n</code></pre>\n\n<p>outputs the following:\n<code>&lt;option value=\"1\"&gt;John Doe&lt;/option&gt;</code></p>\n\n<p>How do I make it display both user's <code>account_code</code> and <code>name</code>? Thanks!</p>\n\n\n\n\n"}, {"tags": ["ruby-on-rails", "ruby", "angular", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1527699488, "last_edit_date": 1527699488, "creation_date": 1527687642, "answer_id": 50606246, "question_id": 47670657, "link": "https://stackoverflow.com/questions/47670657/uploading-images-using-angular-4-and-carrierwave/50606246#50606246", "title": "uploading images using Angular 4 and carrierwave", "body": "<p>I can't see any errors in your code and i am a bit surprised that no params are shown in your rails console.</p>\n\n<p>But i can show you how i did.</p>\n\n<hr>\n\n<h2>A simple solution (in Angular 2):</h2>\n\n<p>With the way you've set it up, i've found that it's very complex to save an image like that with Carrierwave and Angular. </p>\n\n<p>A simpler solution is to use Base64 and the gem <a href=\"https://github.com/lebedev-yury/carrierwave-base64\" rel=\"nofollow noreferrer\">Carrierwave Base64</a> and Angulars FormGroup and FormController.</p>\n\n<p>You could then use FileReader on change to set your file-input to the value: </p>\n\n<pre><code>&lt;!-- part of a FormGroup called imageForm --&gt;\n&lt;input formControlName=\"file\" (change)=\"setImageFile($event)\" type=\"file\" id=\"selectFile\" name=\"selectFile\" class=\"btn btn-success\"&gt;\n</code></pre>\n\n<p>And then in your component: </p>\n\n<pre><code>setImageFile(event) {\n  this.image_file = event.target.files[0];\n  if(this.image_file) {\n    const file_reader = new FileReader();\n    file_reader.readAsDataURL(this.image_file);\n    file_reader.onload = (e: any) =&gt; {\n      this.imageForm.get('file').setValue(file_reader.result);\n    }\n  }\n}\n</code></pre>\n\n<p>And then on your upload you can send <code>imageForm.value</code> in your post request.</p>\n\n<p>With the base64 gem you have to change one line (read on the GitHub page) but otherwise things will work as before and you are now able to save the image to the AWS etc..</p>\n\n<p>I hope you get the idea - it worked for me! :) </p>\n"}], "owner": {"reputation": 635, "user_id": 4232109, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/70307f472e7a6b98d1bd99ff4cca4fd9?s=128&d=identicon&r=PG&f=1", "display_name": "Phill ", "link": "https://stackoverflow.com/users/4232109/phill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1527699488, "creation_date": 1512551945, "last_edit_date": 1512552115, "question_id": 47670657, "link": "https://stackoverflow.com/questions/47670657/uploading-images-using-angular-4-and-carrierwave", "title": "uploading images using Angular 4 and carrierwave", "body": "<p>I am trying to make an app that uses an angular 4 front end with a rails back end. I am currently trying to figure out how to upload images to my rails back end server using carrierwave. I am very stuck, there is very little information out there on how to implement Angular 4 with rails and carrierwave. I cannot figure out how to get it to upload the image to the rails server, when I inspect the rails console I get the below message. from what I can tell there is nothing being posted for some reason and I do not know why this is. If anyone who knows more about angular and rails could help that would be great.</p>\n\n<p>rails console message when I try to upload image:</p>\n\n<pre><code>Processing by ImagesController#create as HTML\nParameters: {\"images\"=&gt;{}}\nCompleted 400 Bad Request in 1ms (ActiveRecord: 6.0ms)\n</code></pre>\n\n<p>HTML</p>\n\n<pre><code>&lt;input type=\"file\" #selectFile id=\"selectFile\" name=\"selectFile\" class=\"btn btn-success\"&gt;\n&lt;input type=\"button\" class=\"btn btn-primary\" (click)=\"uploadImage()\" value=\"Upload Image\"&gt;\n</code></pre>\n\n<p>upload-image.component.ts</p>\n\n<pre><code>export class UploadImageComponent{\n\n    @ViewChild('selectFile') selectFile;\n    constructor(private uploadService: UploadService) {}\n\n    uploadImage(){\n        let files = this.selectFile.nativeElement.files[0];\n        this.uploadService.uploadImage(files).subscribe(data =&gt; {return true},\n        error =&gt; {\n                console.log(\"error uploading image\");\n                return Observable.throw(error);\n        })\n}\n</code></pre>\n\n<p>upload-service.ts</p>\n\n<pre><code>@Injectable()\nexport class StallionService {\n    headers: Headers;\n    options: RequestOptions;\n\n    private imagesUrl = 'http://localhost:3000/images';\n\n    constructor(private http: Http) {\n        this.headers = new Headers({'Content-Type':'application/json'});\n        this.options = new RequestOptions({headers: this.headers});\n    }\n\n    uploadImage(image: File){\n        console.log(image);\n        const formData = new FormData();\n        formData.append(\"img\", image);\n        console.log(formData);\n        return this.http.post(this.imagesUrl, formData,\n            this.options).map((res: Response) =&gt; res.json());\n    }\n}\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1512551407, "post_id": 47670289, "comment_id": 82299733, "body": "Don&#39;t you know the complete list of gems required at the beginning?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1512551489, "post_id": 47670289, "comment_id": 82299783, "body": "Are you literally writing <code>&#39;&lt;gem name here&gt;&#39;</code> in the code?"}, {"owner": {"reputation": 1490, "user_id": 5003256, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MQcIp.jpg?s=128&g=1", "display_name": "SV Madhava Reddy", "link": "https://stackoverflow.com/users/5003256/sv-madhava-reddy"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1512552116, "post_id": 47670289, "comment_id": 82300178, "body": "@JagdeepSingh I know complete list of the gems. For production systems, If we write like this we don&#39;t have to do any manual installation of gems. For that purpose I was doing like this."}, {"owner": {"reputation": 1490, "user_id": 5003256, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MQcIp.jpg?s=128&g=1", "display_name": "SV Madhava Reddy", "link": "https://stackoverflow.com/users/5003256/sv-madhava-reddy"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1512552249, "post_id": 47670289, "comment_id": 82300282, "body": "@sawa nope. actually I was installing jira-ruby gem. But for generic purpose, I mentioned it like that."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512554394, "post_id": 47670289, "comment_id": 82301725, "body": "I think you have to reload some ruby environment stuff to get the gem list read in new (kindof, tenderlove knows that stuff better ;) ). Would shipping the gem with your script be the better solution?"}, {"owner": {"reputation": 1490, "user_id": 5003256, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MQcIp.jpg?s=128&g=1", "display_name": "SV Madhava Reddy", "link": "https://stackoverflow.com/users/5003256/sv-madhava-reddy"}, "reply_to_user": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512554627, "post_id": 47670289, "comment_id": 82301890, "body": "@Felix Its kind of have to do like that situation for me. so if there is any other alternative to install gem, please let me know."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512555100, "post_id": 47670289, "comment_id": 82302218, "body": "@SVMadhavaReddy Of course. I dont know how you call your ruby script, but you can download a .gem-file (or the folder) and make your ruby understand that it should use it (e.g. <code>ruby -I&#47;my&#47;gem&#47;folder</code>). Read up on rubygems and your ruby interpreter."}, {"owner": {"reputation": 1490, "user_id": 5003256, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MQcIp.jpg?s=128&g=1", "display_name": "SV Madhava Reddy", "link": "https://stackoverflow.com/users/5003256/sv-madhava-reddy"}, "reply_to_user": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512555243, "post_id": 47670289, "comment_id": 82302305, "body": "@Felix I appreciate your help. But I want to done it in the script and require at the same time. Is that possible? Is my question. :)"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 8455792, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10154620878171277/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/8455792/martin"}, "edited": false, "score": 0, "creation_date": 1561171178, "post_id": 47672261, "comment_id": 99987275, "body": "Bless you for coming back and answering your question."}], "tags": [], "owner": {"reputation": 1490, "user_id": 5003256, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MQcIp.jpg?s=128&g=1", "display_name": "SV Madhava Reddy", "link": "https://stackoverflow.com/users/5003256/sv-madhava-reddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1512556845, "creation_date": 1512556845, "answer_id": 47672261, "question_id": 47670289, "link": "https://stackoverflow.com/questions/47670289/install-ruby-gem-in-rescue-block-when-loaderror-occurs/47672261#47672261", "title": "Install ruby gem in rescue block when &#39;LoadError&#39; occurs", "body": "<p>After rigorous searching, I found an answer. If we use <code>Gem.clear_paths</code> after installing the gem, it will now available to the script. Total updated code is :</p>\n\n<pre><code>begin\nrequire '&lt;gem name here&gt;'\nrescue LoadError\n  puts `gem install &lt;gem name here&gt;`\n  Gem.clear_paths\n  require '&lt;gem name here&gt;'\nend\n</code></pre>\n"}], "owner": {"reputation": 1490, "user_id": 5003256, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MQcIp.jpg?s=128&g=1", "display_name": "SV Madhava Reddy", "link": "https://stackoverflow.com/users/5003256/sv-madhava-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "accepted_answer_id": 47672261, "answer_count": 1, "score": 0, "last_activity_date": 1512556845, "creation_date": 1512550573, "last_edit_date": 1512551425, "question_id": 47670289, "link": "https://stackoverflow.com/questions/47670289/install-ruby-gem-in-rescue-block-when-loaderror-occurs", "title": "Install ruby gem in rescue block when &#39;LoadError&#39; occurs", "body": "<p>I am trying to install a ruby gem from a ruby script when it can't load the required gem from local system. Here is my code.</p>\n\n<pre><code>begin\n  require '&lt;gem name here&gt;'\nrescue LoadError\n  puts `gem install &lt;gem name here&gt;`\n  require '&lt;gem name here&gt;'\nend\n</code></pre>\n\n<p>The code above installs the gem in the <code>rescue</code> block. But when it requires the gem, it shows this error:</p>\n\n<pre><code>.rvm/rubies/ruby-2.4.2/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb\n:55:in require': cannot load such file -- &lt;gem name here&gt; (LoadError)\n</code></pre>\n\n<p>How can this be solved? I want the gem to be loaded within the <code>rescue</code> block if not already present in the system.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 6, "last_activity_date": 1512550329, "creation_date": 1512550329, "answer_id": 47670218, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element/47670218#47670218", "title": "Iterate through two dimensional array while changing each element", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-c-new\" rel=\"noreferrer\"><code>Array.new</code></a> accepts a block in which you can define the element directly:</p>\n\n<pre><code>Array.new(3){|i| Array.new(3){|j| \"Num#{i}#{j}\" } }\n# [[\"Num00\", \"Num01\", \"Num02\"], [\"Num10\", \"Num11\", \"Num12\"], [\"Num20\", \"Num21\", \"Num22\"]]\n</code></pre>\n\n<p>When you call <code>Array.new(3, Array.new(3))</code>, you create an array which contains 3 times the exact same object : <code>Array.new(3)</code>. When you modify an element in an inner-array, you modify it on every array!</p>\n\n<p>If you initialize <code>game_field</code> like this : <code>game_field = Array.new(3){ Array.new(3) }</code>, your code works fine.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1512551875, "post_id": 47670275, "comment_id": 82300016, "body": "<code>divmod</code> is definitely the most elegant solution."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1512550601, "last_edit_date": 1512550601, "creation_date": 1512550549, "answer_id": 47670275, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element/47670275#47670275", "title": "Iterate through two dimensional array while changing each element", "body": "<pre><code>9.times.map{|i| \"Num#{i.divmod(3).join}\"}.each_slice(3).to_a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1512551391, "post_id": 47670340, "comment_id": 82299718, "body": "2.4.2 :002 &gt; <code>game_field = (0..2).map {|i|(0..2).map {|j| &quot;Num#{i}#{j}&quot; }  }  =&gt; [[&quot;Num00&quot;, &quot;Num01&quot;, &quot;Num02&quot;], [&quot;Num10&quot;, &quot;Num11&quot;, &quot;Num12&quot;], [&quot;Num20&quot;, &quot;Num21&quot;, &quot;Num22&quot;]] </code> 2.4.2 :003 &gt; <code>game_field  =&gt; [[&quot;Num00&quot;, &quot;Num01&quot;, &quot;Num02&quot;], [&quot;Num10&quot;, &quot;Num11&quot;, &quot;Num12&quot;], [&quot;Num20&quot;, &quot;Num21&quot;, &quot;Num22&quot;]] </code>"}, {"owner": {"reputation": 1228, "user_id": 5594008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/05617707e2d7092fc6e202cdcf38c629?s=128&d=identicon&r=PG&f=1", "display_name": "Headmaster", "link": "https://stackoverflow.com/users/5594008/headmaster"}, "edited": false, "score": 0, "creation_date": 1512716360, "post_id": 47670340, "comment_id": 82378249, "body": "very elegant answer in one line"}], "tags": [], "owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "is_accepted": false, "score": 1, "last_activity_date": 1512551684, "last_edit_date": 1512551684, "creation_date": 1512550750, "answer_id": 47670340, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element/47670340#47670340", "title": "Iterate through two dimensional array while changing each element", "body": "<p>you can also try </p>\n\n<pre><code>game_field = (0..2).map do |i|\n  (0..2).map do |j|\n    \"Num#{i}#{j}\"\n  end\nend\n</code></pre>\n\n<p>One liner </p>\n\n<pre><code>game_field = (0..2).map {|i| (0..2).map {|j|  \"Num#{i}#{j}\"} }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1512551439, "creation_date": 1512551439, "answer_id": 47670537, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element/47670537#47670537", "title": "Iterate through two dimensional array while changing each element", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>([(?0..?2)] * 2).\n  map(&amp;:to_a).\n  reduce(:product).\n  each_slice(3).\n  map { |e| e.map(&amp;:join).map(&amp;'Num'.method(:+)) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1512554348, "last_edit_date": 1512554348, "creation_date": 1512554037, "answer_id": 47671350, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element/47671350#47671350", "title": "Iterate through two dimensional array while changing each element", "body": "<p>Ternary numbers?</p>\n\n<pre><code>(0...9).map{|n| \"Num#{n.to_s(3).rjust(2,\"0\")}\"}.each_slice(3).to_a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1512641227, "creation_date": 1512641227, "answer_id": 47692478, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element/47692478#47692478", "title": "Iterate through two dimensional array while changing each element", "body": "<p>Well using Eric and Sawa's answer along with <code>repeated_permutation</code> we have</p>\n\n<pre><code>[0,1,2].repeated_permutation(2)\n       .map { |a, b| \"Num#{a}#{b}\" }\n       .each_slice(3).to_a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1512770383, "post_id": 47696318, "comment_id": 82406112, "body": "Interesting. Note that you need <code>require &#39;matrix&#39;</code> and possibly <code>to_a</code> for the desired format."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1512653652, "creation_date": 1512653652, "answer_id": 47696318, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element/47696318#47696318", "title": "Iterate through two dimensional array while changing each element", "body": "<p>Just a note that building a <code>Matrix</code> is simple because it has an inherent notion of rows and columns:</p>\n\n<pre><code>Matrix.build(3){|i,j| \"Num#{i}#{j}\"}\n</code></pre>\n\n<p>I think the Matrix class is often overlooked. The built-in methods to operate on rows, columns, submatrices, etc, can sometimes be really handy.</p>\n"}], "owner": {"reputation": 1228, "user_id": 5594008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/05617707e2d7092fc6e202cdcf38c629?s=128&d=identicon&r=PG&f=1", "display_name": "Headmaster", "link": "https://stackoverflow.com/users/5594008/headmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 47670218, "answer_count": 7, "score": 0, "last_activity_date": 1512653652, "creation_date": 1512549257, "last_edit_date": 1512550382, "question_id": 47669948, "link": "https://stackoverflow.com/questions/47669948/iterate-through-two-dimensional-array-while-changing-each-element", "title": "Iterate through two dimensional array while changing each element", "body": "<p>I want to fill a two dimensional array with certain values. I want to get:</p>\n\n<pre><code>[\n  ['Num00', 'Num01', 'Num02'],\n  ['Num10', 'Num11', 'Num12'],\n  ['Num20', 'Num21', 'Num22']\n]\n</code></pre>\n\n<p>How can I do it?</p>\n\n<p>This is my code:</p>\n\n<pre><code>game_field = Array.new(3, Array.new(3))\n3.times do |i|\n  3.times do |j|\n    game_field[i][j] = 'Num' + i.to_s + j.to_s\n  end\nend\ngame_field\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rspec", "exception-handling"], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": false, "score": 1, "last_activity_date": 1512552082, "creation_date": 1512552082, "answer_id": 47670702, "question_id": 47669884, "link": "https://stackoverflow.com/questions/47669884/constraintexception-does-not-raise-in-rspec/47670702#47670702", "title": "ConstraintException does not raise in rspec", "body": "<p>That is because your foreign key constraints are not in the test database.</p>\n\n<p>Add following to application.rb file </p>\n\n<pre><code>config.active_record.schema_format = :sql\n</code></pre>\n\n<p>and run </p>\n\n<pre><code>rake db:test:prepare\n</code></pre>\n\n<p>should fix the problem</p>\n\n<p>more information can be found here <a href=\"http://davidvg.com/2010/04/06/missing-foreign-key-constraints-in-rails-test-database\" rel=\"nofollow noreferrer\">missing foreign key in test database</a></p>\n"}], "owner": {"reputation": 111, "user_id": 2003391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4194af7d43b6ba71c3066476b91d508d?s=128&d=identicon&r=PG", "display_name": "Masamoto Miyata", "link": "https://stackoverflow.com/users/2003391/masamoto-miyata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512552082, "creation_date": 1512549007, "question_id": 47669884, "link": "https://stackoverflow.com/questions/47669884/constraintexception-does-not-raise-in-rspec", "title": "ConstraintException does not raise in rspec", "body": "<p>I want to write a test that handles <code>FOREIGN KEY constraint</code> error when deleting a record, but ConstraintException is not raised.</p>\n\n<p>the table's schema like below</p>\n\n<pre><code>class CreateCountries &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :countries do |t|\n      t.string :name\n      t.integer :sequence\n    end\n  end\nend\n\nclass CreateStates &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :states do |t|\n      t.string :name\n      t.integer :sequence\n      t.references :country, foreign_key: true\n    end\n  end\nend\n</code></pre>\n\n<p>I confirmed to raise ConstraintException on delete it in <code>rails console</code>.</p>\n\n<pre><code>c = Country.create!(name: 'country')\nState.create!(name: 'state', country: c)\nc.destroy\n</code></pre>\n\n<blockquote>\n  <p>(0.1ms)  begin transaction\n    SQL (0.8ms)  DELETE FROM \"countries\" WHERE \"countries\".\"id\" = ?  [[\"id\", 10]]\n     (6.1ms)  rollback transaction\n  ActiveRecord::InvalidForeignKey: SQLite3::ConstraintException: FOREIGN KEY constraint failed: DELETE FROM \"countries\" WHERE \"countries\".\"id\" = ?\n  from /Users/masamoto/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sqlite3-1.3.13/lib/sqlite3/statement.rb:108:in `step'</p>\n</blockquote>\n\n<p>However, no error occurred in the rspec, and it seemed to me that it was deleted normally.</p>\n\n<pre><code>describe 'Error' do\n  it 'Destroy' do\n    country = Country.create!(name: 'hohooho')\n    State.create!(name: 'oooooo', country: country)\n    country.destroy\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>Error\n        Destroy</p>\n  \n  <p>Finished in 0.0339 seconds (files took 3.27 seconds to load)\n  1 example, 0 failures</p>\n</blockquote>\n\n<p>I thought that the transaction was not committed, I tried setting <code>config.use_transactional_fixtures = false</code>, but it did not change.</p>\n\n<p>And I tried explicit commit, but the result is the same.</p>\n\n<pre><code>describe 'Error' do\n  it 'Destroy' do\n    country = nil\n    ActiveRecord::Base.transaction do\n      country = Country.create!(name: 'hohooho')\n      State.create!(name: 'oooooo', country: country)\n    end\n\n    ActiveRecord::Base.transaction do\n      country.destroy\n    end\n  end\nend\n</code></pre>\n\n<p>Does anyone have an idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1512548350, "post_id": 47669560, "comment_id": 82298094, "body": "Generally, it is good practice to include more of your stack trace to help folks help you."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512548440, "post_id": 47669666, "comment_id": 82298143, "body": "Do you have any recomended books for learning ruby and rails correctly?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512548920, "post_id": 47669666, "comment_id": 82298395, "body": "Like many people, I started with Michael Hartl&#39;s <a href=\"https://www.railstutorial.org/book\" rel=\"nofollow noreferrer\">tutorial</a>. <a href=\"https://pragprog.com/book/ruby/programming-ruby\" rel=\"nofollow noreferrer\">Programming Ruby</a> is also popular. There are many other good books and tutorial, too many to mention."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 0, "last_activity_date": 1512548120, "creation_date": 1512548120, "answer_id": 47669666, "question_id": 47669560, "link": "https://stackoverflow.com/questions/47669560/saving-values-from-a-http-post-from-a-nested-resource/47669666#47669666", "title": "Saving values from a http post from a nested resource?", "body": "<p>Give this a go:</p>\n\n<pre><code>@entry = Entry.new(\n  user_id:  current_user.id, \n  event_id: params[:event_id], \n  course:   params[:entry][:course], \n  siCard:   params[:entry][:siCard]\n)\n</code></pre>\n\n<p>You don't need to <code>@user = current_user</code>, just use <code>current_user.id</code>.</p>\n\n<p><code>event_id: :event_id</code> is just going to set <code>event_id</code> to a symbol. You want to access the params value, I am guessing. So:</p>\n\n<pre><code>event_id: params[:event_id]\n</code></pre>\n\n<p>Here: </p>\n\n<pre><code>course: :entry.course\n</code></pre>\n\n<p>you're trying to call the <code>course</code> method on the <code>:entry</code> symbol. What?!? </p>\n\n<p>Instead:</p>\n\n<pre><code>course: params[:entry][:course]\n</code></pre>\n\n<p>Same thing with <code>siCard</code>. </p>\n\n<p>BTW, <code>siCard</code> is not very Ruby-ish. Rather, you should do <code>si_card</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 47669666, "answer_count": 1, "score": 0, "last_activity_date": 1512548462, "creation_date": 1512547634, "last_edit_date": 1512548462, "question_id": 47669560, "link": "https://stackoverflow.com/questions/47669560/saving-values-from-a-http-post-from-a-nested-resource", "title": "Saving values from a http post from a nested resource?", "body": "<p>I am trying to use a nested resource in rails to create a new record. I am attempting to use of <code>/events/id/entries/new</code> where there is a </p>\n\n<pre><code>&lt;%= form_for([@event, @entry]) do |f| %&gt;\n</code></pre>\n\n<p>on the new page.</p>\n\n<p>My models are:</p>\n\n<pre><code>class Entry &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :event\n\nclass User &lt; ApplicationRecord\n  has_many :entries, dependent: :destroy\n\nclass Event &lt; ApplicationRecord\n  has_many :entries, dependent: :destroy\n</code></pre>\n\n<p>The controller is:</p>\n\n<pre><code>def new\n  @event = Event.find(params[:event_id])\n  @entry = @event.entries.build\nend\n\ndef create\n  @user = current_user\n  @entry = Entry.new(user_id: @user.id, event_id: :event_id , course: :entry.course , siCard: :entry.siCard)\n  if @entry.save\n    redirect_to @user\n    flash.now[:info] = \"Event Created\"\n  else\n    render '/create'\n    flash.now[:danger] = \"Somthing went wrong\"\n  end\nend\n</code></pre>\n\n<p>But the record does not save <code>NoMethodError in EntriesController#create</code>despite it saying that the parameters passed are. </p>\n\n<pre><code>\"utf8\"=&gt;\"\u2713\",\n\"entry\"=&gt;{\"course\"=&gt;\"Orange\", \"siCard\"=&gt;\"23232323\"},\n\"commit\"=&gt;\"Enter\",\n\"event_id\"=&gt;\"2\"}\n</code></pre>\n\n<p>How do I modify the create controller to save the record?</p>\n"}, {"tags": ["ruby", "command-line-interface", "optparse"], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 2944955, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7774e748f4082571a6920f5de8175b42?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Teli", "link": "https://stackoverflow.com/users/2944955/amit-teli"}, "edited": false, "score": 1, "creation_date": 1512544311, "post_id": 47668711, "comment_id": 82296191, "body": "But now everything has become true. Any quick hint? {:username=&gt;true, :password=&gt;true, :keyspace=&gt;true}"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 715, "user_id": 2944955, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7774e748f4082571a6920f5de8175b42?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Teli", "link": "https://stackoverflow.com/users/2944955/amit-teli"}, "edited": false, "score": 1, "creation_date": 1512544511, "post_id": 47668711, "comment_id": 82296311, "body": "Put the type explicitly as a second parameter of a call to <code>opts.on</code>. What is the issue to <a href=\"http://ruby-doc.org/stdlib/libdoc/optparse/rdoc/OptionParser.html\" rel=\"nofollow noreferrer\">read the documentation</a>?"}, {"owner": {"reputation": 715, "user_id": 2944955, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7774e748f4082571a6920f5de8175b42?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Teli", "link": "https://stackoverflow.com/users/2944955/amit-teli"}, "edited": false, "score": 0, "creation_date": 1512544551, "post_id": 47668711, "comment_id": 82296331, "body": "The options I am putting out are showing as--- {:username=&gt;true, :password=&gt;true, :keyspace=&gt;true}"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 715, "user_id": 2944955, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7774e748f4082571a6920f5de8175b42?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Teli", "link": "https://stackoverflow.com/users/2944955/amit-teli"}, "edited": false, "score": 0, "creation_date": 1512544899, "post_id": 47668711, "comment_id": 82296491, "body": "@AmitTeli: yes, because you don&#39;t specify the type. Have you read the link mudasobwa provided?"}, {"owner": {"reputation": 715, "user_id": 2944955, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7774e748f4082571a6920f5de8175b42?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Teli", "link": "https://stackoverflow.com/users/2944955/amit-teli"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1512545206, "post_id": 47668711, "comment_id": 82296650, "body": "Yes I am going through the link. I was lost in so many unrelated links, And the example I referred was not using type. Thanks @SergioTulentsev"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1512545337, "post_id": 47668711, "comment_id": 82296711, "body": "Don\u2019t refer \u201cexamples,\u201d refer the documentation."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512549468, "post_id": 47668711, "comment_id": 82298689, "body": "@mudasobwa First time I downvote you I think! :) You can have the OP desired behaviour, see my answer: <a href=\"https://stackoverflow.com/a/47669963/1680728\">stackoverflow.com/a/47669963/1680728</a> ."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512550299, "post_id": 47668711, "comment_id": 82299130, "body": "@Felix I know it\u2019s possible. The thing is it contradicts the unix-desired behavior, make shell completion harder to implement and in general is a code smell."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512550667, "post_id": 47668711, "comment_id": 82299339, "body": "@mudasobwa I see most core utils working this way (accepting both &quot;=&quot; and space). About shell completion I cannot say anything, but as it is already implemented this sounds like a &#39;should not have happened&#39; argument."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1512551577, "post_id": 47668711, "comment_id": 82299835, "body": "@Felix oh, indeed; Thanks. I have no idea why I had this erroneous impression, my bad. Thanks again!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1512544202, "last_edit_date": 1512544202, "creation_date": 1512544020, "answer_id": 47668711, "question_id": 47668627, "link": "https://stackoverflow.com/questions/47668627/needless-argument-in-ruby-optparser/47668711#47668711", "title": "Needless Argument in Ruby optparser", "body": "<p>Remove equal signs. <code>OptParser</code> expects spaces between arg names and args:</p>\n\n<pre><code>./testopt.rb --username uuuuu --password xxxxxx --keyspace test\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 715, "user_id": 2944955, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7774e748f4082571a6920f5de8175b42?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Teli", "link": "https://stackoverflow.com/users/2944955/amit-teli"}, "edited": false, "score": 0, "creation_date": 1512551057, "post_id": 47669963, "comment_id": 82299546, "body": "Thanks @Felix ! This explains well."}], "tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": false, "score": 5, "last_activity_date": 1543405382, "last_edit_date": 1543405382, "creation_date": 1512549321, "answer_id": 47669963, "question_id": 47668627, "link": "https://stackoverflow.com/questions/47668627/needless-argument-in-ruby-optparser/47669963#47669963", "title": "Needless Argument in Ruby optparser", "body": "<p>Although <a href=\"https://stackoverflow.com/a/47668711/1680728\">@mudasobwas answer</a> is not wrong in itself, you can have <code>\"option=value\"</code> parsing by specifying the option like in the example below (mmh, <strong>tested with ruby 2.3.1 only</strong>).</p>\n\n<p>Key is to use <code>opts.on('--username=USER',...</code> vs. <code>opts.on('--username',...</code> .</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'optparse'\n\noptions = {:username=&gt;nil}\noptparse = OptionParser.new do|opts|\n    # Define the options, and what they do\n    opts.on( \"--username=USER\", 'Cassandra username' ) do |username|\n        options[:username] = username\n    end\n\n    opts.on( '--password=PASSWORD', 'Cassandra password' ) do |password|\n        options[:password] = password\n    end\n\n    opts.on( '--keyspace=KEY', 'Cassandra keyspace' ) do |keyspace|\n        options[:keyspace] = keyspace\n    end\nend\nputs ARGV\n\noptparse.parse!(ARGV)\n\nputs options\n</code></pre>\n\n<p>You do not loose the ability to pass the value without the equal-sign using this approach and have it converted to string:</p>\n\n<pre><code>\u279c  ~  /tmp/op.rb --username myuser           \n--username\nmyuser\n{:username=&gt;\"myuser\"}\n\u279c  ~  /tmp/op.rb --username=myuser\n--username=myuser\n{:username=&gt;\"myuser\"}\n</code></pre>\n"}], "owner": {"reputation": 715, "user_id": 2944955, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7774e748f4082571a6920f5de8175b42?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Teli", "link": "https://stackoverflow.com/users/2944955/amit-teli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1543405382, "creation_date": 1512543698, "last_edit_date": 1512550932, "question_id": 47668627, "link": "https://stackoverflow.com/questions/47668627/needless-argument-in-ruby-optparser", "title": "Needless Argument in Ruby optparser", "body": "<p>I am facing issue with following code for parsing command line options</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'optparse'\n\noptions = {:username=&gt;nil}\noptparse = OptionParser.new do|opts|\n    # Define the options, and what they d\n    opts.on( \"--username\", \"Cassandra username\" ) do |username|\n        options[:username] = username\n    end\n\n    opts.on( '--password', 'Cassandra password' ) do |password|\n        options[:password] = password\n    end\n\n    opts.on( '--keyspace', 'Cassandra keyspace' ) do |keyspace|\n        options[:keyspace] = keyspace\n    end\nend\nputs ARGV\n\noptparse.parse!(ARGV)\n\nputs options\n</code></pre>\n\n<p>When I run this code from commandline as</p>\n\n<pre><code>./testopt.rb --username=uuuuu --password=xxxxxx --keyspace=test\n</code></pre>\n\n<p>I get following output</p>\n\n<pre><code>--username=uuuuu\n--password=xxxxxx\n--keyspace=test\n./testopt.rb:25:in `&lt;main&gt;': needless argument: --username=uuuuu (OptionParser::NeedlessArgument)\n</code></pre>\n\n<p>What am missing?\nI am in <code>ruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-linux]</code></p>\n\n<p>Thanks in advance </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1512544009, "post_id": 47668457, "comment_id": 82296025, "body": "Can you rephrase your question a bit about what function/method exactly are you calling? What you expect to happen? What error are you getting?"}, {"owner": {"reputation": 13, "user_id": 8242526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d996d19976f7bf67e8f308eca4ad80?s=128&d=identicon&r=PG&f=1", "display_name": "Daigauu", "link": "https://stackoverflow.com/users/8242526/daigauu"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1512574512, "post_id": 47668457, "comment_id": 82314989, "body": "Sorry, what I&#39;m referring to is: &lt;%= form_tag(:remote =&gt; true) do %&gt;   &lt;%= text_field_tag(&quot;answer&quot;, nil, :onkeypress =&gt; &#39;check()&#39;) %&gt;   &lt;%= submit_tag(&quot;Check&quot;, :type =&gt; &#39;button&#39;, :onclick =&gt; &quot;check()&quot;) %&gt; &lt;% end %&gt;  It runs the js function check(), I want to ajaxify it to make it re-render the partial when I call the check function and I have added :remote =&gt; true to the form.  I&#39;m getting no errors, but I do not know how to reload the partial asynchronously."}], "owner": {"reputation": 13, "user_id": 8242526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d996d19976f7bf67e8f308eca4ad80?s=128&d=identicon&r=PG&f=1", "display_name": "Daigauu", "link": "https://stackoverflow.com/users/8242526/daigauu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512542963, "creation_date": 1512542963, "question_id": 47668457, "link": "https://stackoverflow.com/questions/47668457/rails-5-1-ajax-load-database-object", "title": "Rails 5.1 AJAX Load Database Object", "body": "<p>I am quite new to programming/Rails and am currently trying to asynchronously load a database object in my rails webapp.  I'm asking this because all of the guides I've seen on how to make ajax requests haven't been for rails 5.1 and don't deal with simply ajax rendering a partial that has a database object. </p>\n\n<p>What I'm making is a quiz application.  Essentially, the desired behavior is that the user chooses a verb form, which renders a partial with the specified attributes of a random Vocab from the database and displays them on the page. </p>\n\n<p>The user then puts the his answer in a text field and hits enter or a 'check' button which runs the js function 'check()' to make sure what's in the field matches the correct attribute, if it's correct it counts how many the user has correct and then does an AJAX call to the database to load another Vocab so that the user can try to answer another question.  </p>\n\n<p>So far what I have is the main page: </p>\n\n<pre><code>    &lt;body&gt;\n&lt;%= link_to \"Start Vocab\", vocab_path(:id), id: \"vocab_link\" %&gt;\n&lt;%= render @vocab %&gt;\n\n&lt;a href='#1' id='executer-button' class='btn btn-default' onclick='check()'&gt;Check&lt;/a&gt;\n\n\n&lt;%= form_tag(:remote =&gt; true) do %&gt;\n  &lt;%= text_field_tag(\"answer\", nil, :onkeypress =&gt; 'check()') %&gt;\n  &lt;%= submit_tag(\"Check\", :type =&gt; 'button', :onclick =&gt; \"check()\") %&gt;\n&lt;% end %&gt;\n\n&lt;%= form_tag(method: \"get\", remote: true) do %&gt;\n  &lt;%= label_tag(:q, \"Select form\") %&gt;\n  &lt;%= select_tag \"formID\", \"&lt;option value = \"\"&gt; Select a form: &lt;/option&gt;&lt;option value = '1'&gt;Non-past &lt;/option&gt;&lt;option value = '2'&gt;Plain Past &lt;/option&gt;&lt;option value = '3'&gt;Te Form &lt;/option&gt;&lt;option value = '4'&gt;I Form &lt;/option&gt;&lt;option value = '5'&gt;Ifs &lt;/option&gt;&lt;option value = '6'&gt;Potential &lt;/option&gt;&lt;option value = '7'&gt;Passive &lt;/option&gt;&lt;option value = '8'&gt;Causative &lt;/option&gt;&lt;option value = '9'&gt;Causative Passive &lt;/option&gt;&lt;option value = '10'&gt;Volitional &lt;/option&gt;&lt;option value = '11'&gt;Conjectural &lt;/option&gt;&lt;option value = '12'&gt;Alternative &lt;/option&gt;&lt;option value = '13'&gt;Imperative &lt;/option&gt;&lt;option value = '14'&gt;Honorific &lt;/option&gt;\".html_safe, :onchange =&gt; 'chooseForm()'%&gt;\n&lt;% end %&gt;\n\n&lt;div id=\"showValue\"&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;div id = \"after_submit\"&gt;\n  &lt;p id = \"number_correct\"&gt;&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\nfunction check(){\n\n  var answer1 = document.getElementById(\"answer\").value;\n  var correct = 0;\n\n  if (answer1 == document.getElementById(\"japaneseform\").innerHTML ) {\n    correct++;\n\n  }\n  document.getElementById(\"after_submit\").style.visibility = \"visible\";\n  document.getElementById(\"number_correct\").innerHTML = \"You got \" + correct + \" correct\" ;\n}\n\n&lt;/script&gt;\n</code></pre>\n\n<p>I have a partial _vocab.html.erb:</p>\n\n<pre><code>&lt;% verb = @vocab %&gt;\n\n&lt;div id=\"parts of speech\"&gt;\n  &lt;div id = \"multi_part_question\"&gt;\n    &lt;p id = \"japaneseform\"&gt;&lt;/p&gt;\n    &lt;p id = \"casual\"&gt; &lt;/p&gt;\n    &lt;p id = \"hiragana\"&gt; &lt;/p&gt;\n    &lt;p id = \"english form\"&gt;&lt;/p&gt;\n    &lt;p id = \"definition\"&gt; &lt;/p&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n\nvar js_verb = '&lt;%= raw verb.to_json %&gt;'\n\nfunction getKeyByValue(object, value) {\n  return Object.keys(object).find(key =&gt; object[key] === value);\n}\n\nfunction rand(a, b) { return Math.floor(Math.random() * (b - a + 1) + a); }\n\nvar randomVerbObject = JSON.parse(js_verb)\nvar verbValuesArray = Object.values(randomVerbObject)\nvar arrayOfValues = [[1,2],[3,6],[7,10],[11,15],[16,16],[17,28],[29,32],[33,36],[37,44],[45,52],[53,56],[57,60],[61,64],[65,68],[69,72]];\n\nfunction chooseForm(){\n\n  var i = document.getElementById(\"formID\").value;\n  var randI = arrayOfValues[i];\n  var randomizer = rand(randI[0],randI[1]);\n  var japanese_form = verbValuesArray[randomizer];\n  document.getElementById(\"showValue\").innerHTML = randomizer;\n  document.getElementById(\"casual\").innerHTML = verbValuesArray[3];\n  document.getElementById(\"hiragana\").innerHTML = verbValuesArray[2];\n  document.getElementById(\"english form\").innerHTML = getKeyByValue(randomVerbObject, japanese_form);\n  document.getElementById(\"definition\").innerHTML =  verbValuesArray[1];\n  document.getElementById(\"japaneseform\").innerHTML = japanese_form;\n\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>I have a controller conjugationer_controller.rb:</p>\n\n<pre><code>class ConjugationerController &lt; ApplicationController\n  def index\n    @vocab = Vocab.find(rand(1..190))\n\n\n  end\n\n\n  def show\n    @vocab = Vocab.find(rand(1..190))\n\n  end\nend\n</code></pre>\n\n<p>and I have these routes: </p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'vocabs/show'\n  post 'vocabs/id' =&gt; 'vocabs#show'\n  post 'vocabs/show' =&gt; 'vocabs#show'\n  get 'welcome/index'\n  resources :vocabs\n  post 'conjugationer/index' =&gt; 'conjugationer#show'\n  get 'conjugationer/index' =&gt; 'conjugationer'\n  get 'conjugationer/show' =&gt; 'conjugationer#show'\n root 'conjugationer#index'\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n"}, {"tags": ["ruby", "templates"], "comments": [{"owner": {"reputation": 280615, "user_id": 75170, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dee3c76d4bb3d44677c839ef281e52f9?s=128&d=identicon&r=PG", "display_name": "John Feminella", "link": "https://stackoverflow.com/users/75170/john-feminella"}, "edited": false, "score": 0, "creation_date": 1512542618, "post_id": 47668154, "comment_id": 82295304, "body": "Can you link to where you saw this?"}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "reply_to_user": {"reputation": 280615, "user_id": 75170, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dee3c76d4bb3d44677c839ef281e52f9?s=128&d=identicon&r=PG", "display_name": "John Feminella", "link": "https://stackoverflow.com/users/75170/john-feminella"}, "edited": false, "score": 0, "creation_date": 1512542719, "post_id": 47668154, "comment_id": 82295358, "body": "@JohnFeminella just added now, thanks!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1512545349, "post_id": 47668154, "comment_id": 82296716, "body": "<a href=\"https://github.com/ioquatix/trenni\" rel=\"nofollow noreferrer\">github.com/ioquatix/trenni</a>"}, {"owner": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "edited": false, "score": 0, "creation_date": 1512545786, "post_id": 47668154, "comment_id": 82296947, "body": "Yeah, it&#39;s the gem author&#39;s own template engine. He even created a linter for it: <code>&#39;begin&#39;: &#39;(^\\\\s+)?&lt;\\\\?r(?!&gt;)&#39;</code> <a href=\"https://github.com/ioquatix/language-trenni/blob/master/grammars/trenni.cson\" rel=\"nofollow noreferrer\">github.com/ioquatix/language-trenni/blob/master/grammars/&hellip;</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1512546464, "post_id": 47668154, "comment_id": 82297248, "body": "I was just <a href=\"https://github.com/ioquatix?tab=repositories&amp;q=template\" rel=\"nofollow noreferrer\">searching ioquatix&#39;s repositories for &quot;template&quot;</a> and Trenni was the first (and only) hit :-)"}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512546616, "post_id": 47668154, "comment_id": 82297327, "body": "@Stefan Thanks! I originally searched on <a href=\"http://symbolhound.com/\" rel=\"nofollow noreferrer\">symbolhound.com</a> but it was not indexed there :P"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1512547929, "creation_date": 1512547929, "answer_id": 47669625, "question_id": 47668154, "link": "https://stackoverflow.com/questions/47668154/what-template-system-uses-r/47669625#47669625", "title": "What template system uses &lt;?r ... ?&gt;", "body": "<p>The code's author, Samuel Williams also created a templating system called <a href=\"https://github.com/ioquatix/trenni\" rel=\"nofollow noreferrer\">Trenni</a> which uses the syntax:</p>\n\n<pre><code>&lt;?r expression ?&gt;\n</code></pre>\n\n<p>to evaluate the given expression in Ruby.</p>\n\n<p>According to Trenni's <a href=\"https://github.com/ioquatix/trenni#motivation\" rel=\"nofollow noreferrer\">README</a>, it was influenced / inspired by the template engines <a href=\"https://github.com/manveru/ezamar\" rel=\"nofollow noreferrer\">ezamar</a> and <a href=\"https://github.com/manveru/nagoro\" rel=\"nofollow noreferrer\">nagoro</a> by Michael Fellinger.</p>\n"}], "owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 47669625, "answer_count": 1, "score": 2, "last_activity_date": 1512548756, "creation_date": 1512541806, "last_edit_date": 1512548756, "question_id": 47668154, "link": "https://stackoverflow.com/questions/47668154/what-template-system-uses-r", "title": "What template system uses &lt;?r ... ?&gt;", "body": "<p>I saw <a href=\"https://raw.githubusercontent.com/ioquatix/latinum/master/README.md\" rel=\"nofollow noreferrer\">this strange looking template</a> code, and want to know which templating system it belongs to:</p>\n\n<pre><code>        &lt;?r currencies.each do |currency| ?&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"5\"&gt;#{currency} Summary:&lt;/td&gt;\n            &lt;td class=\"total\"&gt;#{f.text summary[:total][currency]}&lt;/td&gt;\n            &lt;td&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;?r end ?&gt;\n</code></pre>\n\n<p>The inline language is certainly Ruby, but <code>&lt;?r ... ?&gt;</code> is not ERB's <code>&lt;% ... %&gt;</code> that I am familiar with.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email"], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "edited": false, "score": 0, "creation_date": 1512553192, "post_id": 47670836, "comment_id": 82300905, "body": "Thank you. But I parsed the <code>emails</code> like this <code>&lt;% gmail.inbox.find(:unread).take(5).sort_by(&amp;:date).reverse!.e&zwnj;&#8203;ach do |email| %&gt;</code>"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "reply_to_user": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "edited": false, "score": 0, "creation_date": 1512553304, "post_id": 47670836, "comment_id": 82300986, "body": "But you must be getting still the raw HTML as well"}, {"owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "edited": false, "score": 0, "creation_date": 1512553364, "post_id": 47670836, "comment_id": 82301029, "body": "When I tried your code, it&#39;s said that <code>undefined method </code>text_part&#39; for &quot;Thu, 30 Nov 2017 17:34:12 -0800&quot;:String`"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "reply_to_user": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "edited": false, "score": 0, "creation_date": 1512553398, "post_id": 47670836, "comment_id": 82301064, "body": "Try this Gmail.connect(&quot;username&quot;,&quot;password&quot;).inbox.emails.first.text&zwnj;&#8203;_part.body.decoded.g&zwnj;&#8203;sub(&quot;\\n&quot;, &#39; &#39;).squeeze(&#39; &#39;)"}, {"owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "edited": false, "score": 0, "creation_date": 1512553452, "post_id": 47670836, "comment_id": 82301095, "body": "It&#39;s working, but I still don&#39;t understand why when I parsed it, it become not working."}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "reply_to_user": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "edited": false, "score": 0, "creation_date": 1512553536, "post_id": 47670836, "comment_id": 82301149, "body": "you may be trying to read unread messages which are already been read by you. So when you are running the code again it is giving you nil. That&#39;s is why text_part method is saying undefined"}], "tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": true, "score": 1, "last_activity_date": 1512553371, "last_edit_date": 1512553371, "creation_date": 1512552567, "answer_id": 47670836, "question_id": 47667909, "link": "https://stackoverflow.com/questions/47667909/how-to-get-text-only-from-the-email-content-ruby-on-rails-gmail-for-ruby-gem/47670836#47670836", "title": "How to get text only from the email content ? Ruby on Rails - GMail for Ruby Gem", "body": "<p>Try this code</p>\n\n<pre><code>Gmail.connect(\"username\",\"password\").inbox.emails.first.text_part.body.decoded\n</code></pre>\n\n<p>Also if you want to remove \"\\n\" so can use <strong>gsub</strong> for it.</p>\n\n<pre><code>Gmail.connect(\"username\",\"password\").inbox.emails.first.text_part.body.decoded.gsub(\"\\n\", ' ').squeeze(' ')\n</code></pre>\n\n<p>If you want to do for all emails then you can do something like this</p>\n\n<pre><code>arr = []\nGmail.connect(\"username\",\"password\").inbox.emails.each do |email|\n   arr &lt;&lt; email.text_part.body.decoded.gsub(\"\\n\", ' ').squeeze(' ')\nend\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 47670836, "answer_count": 1, "score": 2, "last_activity_date": 1512553371, "creation_date": 1512540806, "question_id": 47667909, "link": "https://stackoverflow.com/questions/47667909/how-to-get-text-only-from-the-email-content-ruby-on-rails-gmail-for-ruby-gem", "title": "How to get text only from the email content ? Ruby on Rails - GMail for Ruby Gem", "body": "<p>I am developing a Ruby on Rails website where I need to fetch emails from GMail. I am using <a href=\"https://github.com/gmailgem/gmail\" rel=\"nofollow noreferrer\">GMail for Ruby Gem</a>. I can fetch subject, date, etc, and even the body, but, when I fetched the body, I got a full content of the email. I am not sure if there is another field that only contains text only, but I already tried <code>content</code>, <code>text</code>, and <code>mail</code> but none of them are working.</p>\n\n<p>This is the <a href=\"https://gist.github.com/anonymous/814b1ddf13f1539008d4f4a42609ed35\" rel=\"nofollow noreferrer\">sample</a> of content when I used <code>body</code>. I am using GIST since it's very long.</p>\n\n<p>Are there anyone that can help me for this issue? Thank you.</p>\n"}, {"tags": ["ruby", "byebug"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 4, "creation_date": 1512540060, "post_id": 47667682, "comment_id": 82294353, "body": "The README suggests <code>eval h</code> might work?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 2, "creation_date": 1512544627, "post_id": 47667682, "comment_id": 82296369, "body": "Or you can do <code>p h</code>. <code>p</code> for print."}], "answers": [{"tags": [], "owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "is_accepted": false, "score": 8, "last_activity_date": 1512540296, "creation_date": 1512540296, "answer_id": 47667779, "question_id": 47667682, "link": "https://stackoverflow.com/questions/47667682/how-do-we-access-manipulate-variable-names-which-conflicts-with-byebug-reserved/47667779#47667779", "title": "How do we access/manipulate variable names which conflicts with byebug reserved keywords?", "body": "<p>You can use: </p>\n\n<pre><code>eval h\n</code></pre>\n\n<p>Byebug Guide: <a href=\"https://github.com/deivid-rodriguez/byebug/blob/master/GUIDE.md\" rel=\"noreferrer\">https://github.com/deivid-rodriguez/byebug/blob/master/GUIDE.md</a></p>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 26, "last_activity_date": 1610647016, "last_edit_date": 1610647016, "creation_date": 1512540356, "answer_id": 47667800, "question_id": 47667682, "link": "https://stackoverflow.com/questions/47667682/how-do-we-access-manipulate-variable-names-which-conflicts-with-byebug-reserved/47667800#47667800", "title": "How do we access/manipulate variable names which conflicts with byebug reserved keywords?", "body": "<p>You can surround it in parentheses:</p>\n<pre><code>[1, 4] in /Users/max/test.rb\n   1: require 'byebug'\n   2:\n   3: byebug\n=&gt; 4: false\n(byebug) (h = 1)\n1\n(byebug) (h)\n1\n(byebug)\n</code></pre>\n"}], "owner": {"reputation": 1941, "user_id": 5175180, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh6.googleusercontent.com/-I_nczIHX9-A/AAAAAAAAAAI/AAAAAAAAAHg/HDcjrT0N8gw/photo.jpg?sz=128", "display_name": "enator", "link": "https://stackoverflow.com/users/5175180/enator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2459, "favorite_count": 3, "accepted_answer_id": 47667800, "answer_count": 2, "score": 17, "last_activity_date": 1610647016, "creation_date": 1512539760, "last_edit_date": 1590398551, "question_id": 47667682, "link": "https://stackoverflow.com/questions/47667682/how-do-we-access-manipulate-variable-names-which-conflicts-with-byebug-reserved", "title": "How do we access/manipulate variable names which conflicts with byebug reserved keywords?", "body": "<p>How do we access those variable names which conflict with <code>byebug</code> reserved name?</p>\n\n<pre><code>(byebug) var local\nh = {\"hierarchyId\"=&gt;\"59f0b029e4b037ef11a055f7\", \"level\"=&gt;2, ...\nself =                   &lt;div class=\"index_as_table\"&gt;&lt;/div&gt;\n\n(byebug) \n</code></pre>\n\n<p>I want to access variable \"h\"</p>\n\n<p>but typing <code>h</code> would show up the \"help dialog box for byebug\"</p>\n\n<pre><code>(byebug) h\n\n  break      -- Sets breakpoints in the source code\n  catch      -- Handles exception catchpoints\n  condition  -- Sets conditions on breakpoints\n  continue   -- Runs until program ends, hits a breakpoint or reaches a line\n  debug      -- Spawns a subdebugger\n  delete     -- Deletes breakpoints\n  disable    -- Disables breakpoints or displays\n  display    -- Evaluates expressions every time the debugger stops\n  down       -- Moves to a lower frame in the stack trace\n  edit       -- Edits source files\n  enable     -- Enables breakpoints or displays\n  finish     -- Runs the program until frame returns\n  frame      -- Moves to a frame in the call stack\n  help       -- Helps you using byebug\n  history    -- Shows byebug's history of commands\n  info       -- Shows several informations about the program being debugged\n  interrupt  -- Interrupts the program\n  irb        -- Starts an IRB session\n  kill       -- Sends a signal to the current process\n  list       -- Lists lines of source code\n  method     -- Shows methods of an object, class or module\n  next       -- Runs one or more lines of code\n  pry        -- Starts a Pry session\n  quit       -- Exits byebug\n  restart    -- Restarts the debugged program\n  save       -- Saves current byebug session to a file\n  set        -- Modifies byebug settings\n  show       -- Shows byebug settings\n  source     -- Restores a previously saved byebug session\n  step       -- Steps into blocks or methods one or more times\n  thread     -- Commands to manipulate threads\n  tracevar   -- Enables tracing of a global variable\n  undisplay  -- Stops displaying all or some expressions when program stops\n  untracevar -- Stops tracing a global variable\n  up         -- Moves to a higher frame in the stack trace\n  var        -- Shows variables and its values\n  where      -- Displays the backtrace\n\n(byebug) \n</code></pre>\n\n<p>Is there any way to access variables who conflicts with these reserved keyword names. like exclamation prefix in python's pdb? (<code>!h</code> didn't work for byebug)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "passenger", "semantic-ui"], "comments": [{"owner": {"reputation": 2340, "user_id": 2250791, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e72d4f734d39c777f543025d36d4de4e?s=128&d=identicon&r=PG", "display_name": "Camden Narzt", "link": "https://stackoverflow.com/users/2250791/camden-narzt"}, "edited": false, "score": 1, "creation_date": 1512558084, "post_id": 47666915, "comment_id": 82304241, "body": "Check your browser console, it&#39;s likely that the fonts are being blocked because the browser wants extra cors headers for font files."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9059724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LsLPNhzOx1I/AAAAAAAAAAI/AAAAAAAABKg/JRHO1gpnxo8/photo.jpg?sz=128", "display_name": "Michael Vasallo", "link": "https://stackoverflow.com/users/9059724/michael-vasallo"}, "is_accepted": true, "score": 0, "last_activity_date": 1512656699, "creation_date": 1512656699, "answer_id": 47697206, "question_id": 47666915, "link": "https://stackoverflow.com/questions/47666915/rails-nginx-passenger-not-serving-font-icon-files/47697206#47697206", "title": "Rails Nginx Passenger not serving font icon files", "body": "<p>Not a fix, but I found a better solution. In my <code>semantic/src/site/globals/site.variables</code> I set the font path to the Semantic UI CDN instead of fetching from local files.</p>\n\n<pre><code>@fontPath: 'https://cdn.jsdelivr.net/npm/semantic-ui@2.2.13/dist/themes/default/assets/fonts';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 1050601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab6de6bd7f316dbcb03c6bfba81725d?s=128&d=identicon&r=PG", "display_name": "Wally", "link": "https://stackoverflow.com/users/1050601/wally"}, "is_accepted": false, "score": 0, "last_activity_date": 1525006566, "last_edit_date": 1525006566, "creation_date": 1525006060, "answer_id": 50086724, "question_id": 47666915, "link": "https://stackoverflow.com/questions/47666915/rails-nginx-passenger-not-serving-font-icon-files/50086724#50086724", "title": "Rails Nginx Passenger not serving font icon files", "body": "<p>I had the same problem in production, check <a href=\"https://stackoverflow.com/questions/47367424/semantic-ui-in-rails-stylesheet-could-not-be-loaded-a-lot-of-errors-in-parsing/50086486#50086486\">this answer</a> to see how I got it working.</p>\n\n<p>In your case you probably need to add:</p>\n\n<pre><code>Rails.application.config.assets.paths &lt;&lt; Rails.root.join('semantic', 'dist', 'themes', 'default')\n</code></pre>\n\n<p>in <code>config/initializers/assets.rb</code>  </p>\n\n<p>set <code>@fontPath</code> to:</p>\n\n<pre><code>@fontPath  : \"assets/fonts\";\n</code></pre>\n\n<p>and use <code>font-url</code> helper in <code>icon.variables</code></p>\n\n<pre><code>/*******************************\n             Icon\n*******************************/\n\n/*--------------\n   Font Files\n---------------*/\n@fontName: 'icons';\n@src:\n  font-url(\"@{fontPath}/@{fontName}.eot?#iefix\") format('embedded-opentype'),\n  font-url(\"@{fontPath}/@{fontName}.woff2\") format('woff2'),\n  font-url(\"@{fontPath}/@{fontName}.woff\") format('woff'),\n  font-url(\"@{fontPath}/@{fontName}.ttf\") format('truetype'),\n  font-url(\"@{fontPath}/@{fontName}.svg#icons\") format('svg')\n;\n@fallbackSRC: font-url(\"@{fontPath}/@{fontName}.eot\");\n\n/*--------------\n Optional Files\n---------------*/\n\n/* Outline Icons */\n@importOutlineIcons: true;\n@outlineFontName: 'outline-icons';\n@outlineSrc:\n  font-url(\"@{fontPath}/@{outlineFontName}.eot?#iefix\") format('embedded-opentype'),\n  font-url(\"@{fontPath}/@{outlineFontName}.woff2\") format('woff2'),\n  font-url(\"@{fontPath}/@{outlineFontName}.woff\") format('woff'),\n  font-url(\"@{fontPath}/@{outlineFontName}.ttf\") format('truetype'),\n  font-url(\"@{fontPath}/@{outlineFontName}.svg#icons\") format('svg')\n;\n@outlineFallbackSRC: font-url(\"@{fontPath}/@{outlineFontName}.eot\");\n\n/* Brand Icons */\n@importBrandIcons: true;\n@brandFontName: 'brand-icons';\n@brandSrc:\n  font-url(\"@{fontPath}/@{brandFontName}.eot?#iefix\") format('embedded-opentype'),\n  font-url(\"@{fontPath}/@{brandFontName}.woff2\") format('woff2'),\n  font-url(\"@{fontPath}/@{brandFontName}.woff\") format('woff'),\n  font-url(\"@{fontPath}/@{brandFontName}.ttf\") format('truetype'),\n  font-url(\"@{fontPath}/@{brandFontName}.svg#icons\") format('svg')\n;\n@brandFallbackSRC: font-url(\"@{fontPath}/@{brandFontName}.eot\");\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9059724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LsLPNhzOx1I/AAAAAAAAAAI/AAAAAAAABKg/JRHO1gpnxo8/photo.jpg?sz=128", "display_name": "Michael Vasallo", "link": "https://stackoverflow.com/users/9059724/michael-vasallo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 47697206, "answer_count": 2, "score": 1, "last_activity_date": 1525006566, "creation_date": 1512535368, "question_id": 47666915, "link": "https://stackoverflow.com/questions/47666915/rails-nginx-passenger-not-serving-font-icon-files", "title": "Rails Nginx Passenger not serving font icon files", "body": "<p>\nI am running a Rails 5.1.4 app in production mode. I am using Semantic UI as my css framework and have already ran <code>RAILS_ENV=production rails assets:precompile</code> to compile my assets and font files in the <code>public/assets</code> folder. When I load my website everything works except the icons are replaced by squares.</p>\n\n<p>Here is my config/application.rb:</p>\n\n<pre><code>class Application &lt; Rails::Application\n  config.load_defaults 5.1\n\n  config.assets.paths &lt;&lt; Rails.root.join('semantic', 'dist')\n  config.assets.precompile &lt;&lt; 'themes/default/assets/fonts/*'\nend\n</code></pre>\n\n<p>My Nginx file:</p>\n\n<pre><code>server {\n    listen       80;\n    server_name  atrium.michaelvasallo.com;\n    passenger_enabled on;\n    rails_env production;\n    root /var/www/atrium/public;\n}\n</code></pre>\n\n<p>As you can see Semantic UI is looking in <code>themes/default/assets/fonts/</code> and that is where my icon files are located. They are all showing up in the <code>public/assets</code> folder when I precompile but they are not being served when the page is loaded.</p>\n"}, {"tags": ["ruby", "apache-kafka"], "comments": [{"owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 1, "creation_date": 1512539692, "post_id": 47666415, "comment_id": 82294241, "body": "Which ruby kafka are you using ? documentation link please ?"}, {"owner": {"reputation": 11, "user_id": 7788988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273665ef693ea47ebe829eadbcb9323c?s=128&d=identicon&r=PG&f=1", "display_name": "Ananth K", "link": "https://stackoverflow.com/users/7788988/ananth-k"}, "reply_to_user": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 0, "creation_date": 1512541544, "post_id": 47666415, "comment_id": 82294851, "body": "Ruby 2.4.2, kafka-0.0.2"}, {"owner": {"reputation": 11, "user_id": 7788988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273665ef693ea47ebe829eadbcb9323c?s=128&d=identicon&r=PG&f=1", "display_name": "Ananth K", "link": "https://stackoverflow.com/users/7788988/ananth-k"}, "reply_to_user": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 1, "creation_date": 1514294682, "post_id": 47666415, "comment_id": 82927057, "body": "I found out it was an issue with the ruby version on mac. Once I have upgraded to ruby 2.4.1 , issue got resolved."}], "owner": {"reputation": 11, "user_id": 7788988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273665ef693ea47ebe829eadbcb9323c?s=128&d=identicon&r=PG&f=1", "display_name": "Ananth K", "link": "https://stackoverflow.com/users/7788988/ananth-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512531626, "creation_date": 1512531581, "last_edit_date": 1512531626, "question_id": 47666415, "link": "https://stackoverflow.com/questions/47666415/ruby-kafka-parse-error", "title": "ruby kafka parse error", "body": "<p>I am trying to parse a kafka topic using Ruby.</p>\n\n<p>my code :</p>\n\n<pre><code>require 'kafka'\n\nkafka = Kafka.new(seed_brokers: [\"someserver\"])\n\nkafka.each_message(topic: \"topicname\") do |message|\n  puts message.offset, message.key, message.value\nend\n</code></pre>\n\n<p>I am getting below error:</p>\n\n<pre><code>/Users/someuser/.rbenv/versions/2.4.2/lib/ruby/2.4.0/optparse.rb:1644:in `parse!': unknown keywords: seed_brokers, client_id (ArgumentError)\nfrom /Users/someuser/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/kafka-0.0.2/lib/kafka.rb:66:in `parse'\n    from /Users/someuser/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/kafka-0.0.2/lib/kafka.rb:16:in `initialize'\n    from KafkaConnect.rb:4:in `new'\n    from KafkaConnect.rb:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Not sure what is the issue, I have checked the documentation and there seems to be no problem.</p>\n\n<p>I have also checked using kafkacat and it is able to stream the data without no issues. challenge is with Ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": true, "score": 3, "last_activity_date": 1512526136, "creation_date": 1512526136, "answer_id": 47665728, "question_id": 47665418, "link": "https://stackoverflow.com/questions/47665418/nomethoderrorundefined-method-id-for-nilnilclass/47665728#47665728", "title": "NoMethodError:undefined method `id&#39; for nil:NilClass", "body": "<p><code>@current_user</code> is nil in your test.</p>\n\n<p>Your problem is here.</p>\n\n<pre><code>allow_any_instance_of(ApplicationController).to receive(:set_current_user).and_return(fuser)\n</code></pre>\n\n<p><code>set_current_user</code> doesn't actually return a user object, it assigns one to a <code>@current_user</code> variable and then possibly redirects.</p>\n\n<p>It's much more the rails way do set your user in this manner:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_action :verify_current_user!\n\n  def current_user\n    @current_user || User.find_by_session_token(cookies[:session_token])\n  end\n\n  def verify_current_user!\n    redirect_to login_path unless current_user\n  end\nend\n</code></pre>\n\n<p>Then when referencing your currently signed in user, call the <code>current_user</code> method. The value will be memoized, so there is no performance penalty. You'll also be able to stub the <code>current_user</code> method as you are attempting in your test. In your controllers, always call <code>current_user</code> instead of <code>@current_user</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 9059049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c2d6d4c0e742c20bee45d93e2efd6f1?s=128&d=identicon&r=PG&f=1", "display_name": "amazingPuppy", "link": "https://stackoverflow.com/users/9059049/amazingpuppy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1109, "favorite_count": 0, "accepted_answer_id": 47665728, "answer_count": 1, "score": 1, "last_activity_date": 1512526136, "creation_date": 1512523994, "question_id": 47665418, "link": "https://stackoverflow.com/questions/47665418/nomethoderrorundefined-method-id-for-nilnilclass", "title": "NoMethodError:undefined method `id&#39; for nil:NilClass", "body": "<p>I'm new to Rspec and I am trying to do the TDD. In the Application Controller, I have a method called set current user.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n   protect_from_forgery with: :exception\n   protected  \n    def set_current_user\n      @current_user ||= User.find_by_session_token(cookies[:session_token]) \n      redirect_to login_path unless @current_user\n    end\n  end\n</code></pre>\n\n<p>and here is the BlogsController.rb</p>\n\n<pre><code>class BlogsController &lt; ApplicationController\n  before_action :set_current_user\n  before_action :has_user_and_hobby\n  def blog_params\n    params.require(:blog).permit(:title, :hobby_id, :user_id, :body, :rating)\n  end\n\n ...\n\n  def destroy\n    @blog = Blog.find(params[:id])\n    if @blog.user_id != @current_user.id\n      flash[:notice] = \"The blog #{@blog.title} only can be deleted by the author! It cannot be deleted by others.\"\n      redirect_to hobby_blogs_path(@blog)\n    else\n      @blog.destroy\n      flash[:notice] = \"Blog '#{@blog.title}' deleted.\"\n      redirect_back(fallback_location: root_path)\n    end\n  end\nend\n</code></pre>\n\n<p>And the rspec I wrote to test the destroy route is:</p>\n\n<pre><code>require 'spec_helper'\nrequire 'rails_helper'\n\ndescribe BlogsController do\n    let(:fuser) { FactoryGirl.create(:fuser) }\n    let(:hobby) { FactoryGirl.create(:hobby)}\n    let(:blog) { FactoryGirl.create(:blog, hobby_id: hobby.id, user_id: fuser.id)}\n    let(:comment) { FactoryGirl.create(:comment)}\n\n...\n\n    describe 'delete a blog' do\n      before :each do\n          allow_any_instance_of(ApplicationController).to receive(:set_current_user).and_return(fuser)\n          allow_any_instance_of(BlogsController).to receive(:has_user_and_hobby).and_return(blog.user_id,hobby)\n          allow(User).to receive(:find).with(blog.user_id).and_return(blog.user_id)\n\n      it 'should redirect_back' do\n          delete :destroy, params:{:hobby_id =&gt;hobby.id, :id =&gt; blog.id}\n          expect(response).to be_redirect\n      end\n   end\nend\n</code></pre>\n\n<p>When I try to run the spec, I get the error:</p>\n\n<pre><code>Failure/Error: if @blog.user_id != @current_user.id\n NoMethodError:\n   undefined method `id' for nil:NilClass\n</code></pre>\n\n<p>Does anyone know how to assist me in this? Greatly appreciate all the help.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 94, "user_id": 9059082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0c3f8ac1b1a148327cac6b313b1bbb?s=128&d=identicon&r=PG&f=1", "display_name": "dbJoker", "link": "https://stackoverflow.com/users/9059082/dbjoker"}, "edited": false, "score": 0, "creation_date": 1512525051, "post_id": 47664911, "comment_id": 82290341, "body": "Thanks for the correction. But I was wondering what this line do : <code>&lt;script src=&quot;https:&#47;&#47;ajax.googleapis.com&#47;ajax&#47;libs&#47;jquery&#47;2.1.1&#47;jque&zwnj;&#8203;ry.min.js&quot;&gt;&lt;&#47;script&gt;</code> Do I need it?"}, {"owner": {"reputation": 1659, "user_id": 5358917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740934c774047116c5d6eebaf0bb7724?s=128&d=identicon&r=PG&f=1", "display_name": "Kavindra", "link": "https://stackoverflow.com/users/5358917/kavindra"}, "reply_to_user": {"reputation": 94, "user_id": 9059082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0c3f8ac1b1a148327cac6b313b1bbb?s=128&d=identicon&r=PG&f=1", "display_name": "dbJoker", "link": "https://stackoverflow.com/users/9059082/dbjoker"}, "edited": false, "score": 1, "creation_date": 1512525264, "post_id": 47664911, "comment_id": 82290392, "body": "No, you don&#39;t need it. (I hope you have already included jQuery in your app). I included this so that the code snippet works here. Unless it won&#39;t work since we need jQuery to run the code."}], "tags": [], "owner": {"reputation": 1659, "user_id": 5358917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740934c774047116c5d6eebaf0bb7724?s=128&d=identicon&r=PG&f=1", "display_name": "Kavindra", "link": "https://stackoverflow.com/users/5358917/kavindra"}, "is_accepted": false, "score": 1, "last_activity_date": 1512520177, "creation_date": 1512520177, "answer_id": 47664911, "question_id": 47664811, "link": "https://stackoverflow.com/questions/47664811/ruby-rails-add-field-to-form-with-javascript/47664911#47664911", "title": "Ruby rails add field to form with javascript", "body": "<p>The problem in your code was that you refer a wrong id in javascript. In your HTML the id is <code>FormationSet</code> and in javascript you try to append form into <code>formationSet</code> div. Change the id in HTML and it works fine.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function(){\r\n    $('#addNewFormation').click(function(){\r\n        $('div#formationSet').append('&lt;div class =\"FormationsForm\"&gt;&lt;input type=\"text\" class=\"input-large\" placeholder=\"Caption\"&gt;'+\r\n            '&lt;button class=\"removeNewFormation\" type=\"button\"&gt;remove&lt;/button&gt;    &lt;/div&gt;');\r\n    });\r\n\r\n    $(\"div#formationSet\").on('click', '.removeNewFormation', function(){\r\n        $(this).closest('.FormationsForm').remove();\r\n    });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"formationSet\" class=\"form-group row\"&gt;\r\n&lt;/div&gt;\r\n&lt;a href=\"javascript:\" id=\"addNewFormation\"&gt;Add Formations&lt;/a&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 9059082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0c3f8ac1b1a148327cac6b313b1bbb?s=128&d=identicon&r=PG&f=1", "display_name": "dbJoker", "link": "https://stackoverflow.com/users/9059082/dbjoker"}, "is_accepted": false, "score": 0, "last_activity_date": 1512680921, "creation_date": 1512680921, "answer_id": 47703802, "question_id": 47664811, "link": "https://stackoverflow.com/questions/47664811/ruby-rails-add-field-to-form-with-javascript/47703802#47703802", "title": "Ruby rails add field to form with javascript", "body": "<p>Above ruby 4.0 aparently $(document).ready dont get notify as before. So I had to change it like this: </p>\n\n<pre><code>var ready = function() {\n    $('#addNewFormation').click(function(){\n        $('div#formationSet').append('&lt;div class =\"FormationsForm\"&gt; &lt;%=     f.label :email %&gt; \\n &lt;%= f.text_field :email %&gt;' +\n\n        '&lt;button class=\"removeNewFormation\" type=\"button\"&gt;remove&lt;/button&gt;&lt;/div&gt;');\n    });\n\n\n    $(\"div#formationSet\").on('click', '.removeNewFormation', function(){\n        $(this).closest('.FormationsForm').remove();\n    });\n};\n\n$(document).ready(ready);\n$(document).on('page:change', ready);\n</code></pre>\n"}], "owner": {"reputation": 94, "user_id": 9059082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0c3f8ac1b1a148327cac6b313b1bbb?s=128&d=identicon&r=PG&f=1", "display_name": "dbJoker", "link": "https://stackoverflow.com/users/9059082/dbjoker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1512680921, "creation_date": 1512519540, "last_edit_date": 1512524742, "question_id": 47664811, "link": "https://stackoverflow.com/questions/47664811/ruby-rails-add-field-to-form-with-javascript", "title": "Ruby rails add field to form with javascript", "body": "<p>Ok so I am using ruby on rails and javaScript. I want to do a form in wich one field can have more than one \"object\". In my example an employe can add multiple formation.</p>\n\n<p>Just to let you know, I dont know much in javaScript and I am not an expert in Web languages. So please explaine me what are my problems in the following code.</p>\n\n<p>This is the code in my employe _form.html.erb</p>\n\n<pre><code>&lt;div id=\"formationSet\" class=\"form-group row\"&gt;\n&lt;/div&gt;\n&lt;a href=\"javascript:\" id=\"addNewFormation\"&gt;Add Formations&lt;/a&gt;\n</code></pre>\n\n<p>this is my code in employeFormation.js</p>\n\n<pre><code>$(document).ready(function(){\n    $('#addNewFormation').click(function(){\n        $('div#formationSet').append('&lt;div class =\"FormationsForm\"&gt;&lt;input type=\"text\" class=\"input-large\" placeholder=\"Caption\"&gt;'+\n            '&lt;button class=\"removeNewFormation\" type=\"button\"&gt;remove&lt;/button&gt;    &lt;/div&gt;');\n    });\n\n    $(\"div#formationSet\").on('click', '.removeNewFormation', function(){\n        $(this).closest('.FormationsForm').remove();\n    });\n});\n</code></pre>\n\n<p>and this is my code in application.js</p>\n\n<pre><code>//= require employeFormation\n</code></pre>\n\n<p>what I actually want is that when I click on addFormation its add a field below the other and I can remove it and is added to my object when I create the new employe</p>\n\n<p>Thanks you for you answer.</p>\n\n<p>Edit : corrected some typo in the code (thanks to KKK). But its still not working</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "math", "logging"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1512513218, "post_id": 47663617, "comment_id": 82286834, "body": "You could look at a tool like <a href=\"http://docs.seattlerb.org/ruby2ruby/\" rel=\"nofollow noreferrer\"><code>ruby2ruby</code></a> which helps give you a parse tree, something you can navigate and potentially evaluate bit by bit."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512514045, "post_id": 47663617, "comment_id": 82287146, "body": "I&#39;m not entirely clear what you&#39;re trying to achieve, but perhaps <a href=\"https://github.com/banister/method_source#example-display-method-source\" rel=\"nofollow noreferrer\">the <code>method_source</code></a> gem solves your issue? This is, incidentally, what <code>pry</code> uses under the hood to display the source code of methods."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1512520478, "post_id": 47663617, "comment_id": 82289129, "body": "you could make the function return <code>&quot;(#{numerator} + 3) &#47; #{denominator}&quot;</code> and then pass that string to <code>eval</code>."}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1512572283, "post_id": 47663617, "comment_id": 82313412, "body": "@maxpleaner That actually works really well! Thank you. Creative solution"}], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512512509, "creation_date": 1512512509, "question_id": 47663617, "link": "https://stackoverflow.com/questions/47663617/how-to-show-partially-evaluated-method-source-in-ruby", "title": "How to show partially evaluated method source in Ruby?", "body": "<p>Bear with me, this is an off-beat questions.</p>\n\n<p>What I want to achieve is being able to log how a calculation was performed in a method.</p>\n\n<p>Lets say we have this simple method inside a model. It performs a calculation and returns a result. Awesome.</p>\n\n<pre><code>def calc_reduction_factor\n  (numerator + 3) / denominator \nend\n</code></pre>\n\n<p>The issue I am having is that the auditing requires all the calculations to be logged (when report is produced, not when function is run). So for this example with numbers:</p>\n\n<pre><code>puts \"(#{model.numenator} + 3) / #{model.denominator} = #{model.calc_reduction_factor}\"\n&gt;&gt; (5 + 3) / 2 = 4\n</code></pre>\n\n<p>I am lazy and sometimes forgetful. If the function requires a change the logging would have to be changed too. This is a small example but in the future there might be hundreds different calc methods. </p>\n\n<p>I am looking for a solution that will be able to print out the source of the function and also do the math. Closest I found was <a href=\"https://github.com/rubysolo/dentaku\" rel=\"nofollow noreferrer\">dentaku</a> library. Could store string in a repo and then print them for loggin or evaluate for calc purposes. But it looks like it haven't been updated in a while and is a little slow.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb"], "comments": [{"owner": {"reputation": 4315, "user_id": 2502126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fae66f557902359d7cc278076d1a9ef7?s=128&d=identicon&r=PG", "display_name": "Buzz Moschetti", "link": "https://stackoverflow.com/users/2502126/buzz-moschetti"}, "edited": false, "score": 1, "creation_date": 1512513318, "post_id": 47663541, "comment_id": 82286877, "body": "Wha?  Try this;  edit and add 2 or three more input docs (they&#39;re small) and show an example of you&#39;d like the output document to look like."}], "answers": [{"tags": [], "owner": {"reputation": 959, "user_id": 3268304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7qDzJ.png?s=128&g=1", "display_name": "Jeff F.", "link": "https://stackoverflow.com/users/3268304/jeff-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1512533360, "creation_date": 1512533360, "answer_id": 47666634, "question_id": 47663541, "link": "https://stackoverflow.com/questions/47663541/group-a-collection-by-a-certain-criteria/47666634#47666634", "title": "Group a collection by a certain criteria", "body": "<p>In ruby you can do:</p>\n\n<pre><code>original_list.group_by {|x| x[:number]}.values\n</code></pre>\n\n<p>It's not clear if you were asking for a Ruby solution, though.</p>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 9030790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4037273fba75800aa1dd6e249a9d9817?s=128&d=identicon&r=PG&f=1", "display_name": "lg86", "link": "https://stackoverflow.com/users/9030790/lg86"}, "is_accepted": true, "score": 2, "last_activity_date": 1512542681, "creation_date": 1512542681, "answer_id": 47668386, "question_id": 47663541, "link": "https://stackoverflow.com/questions/47663541/group-a-collection-by-a-certain-criteria/47668386#47668386", "title": "Group a collection by a certain criteria", "body": "<p>You can also try below code</p>\n\n<pre><code>original_list.group_by(&amp;:number).values\n</code></pre>\n"}], "owner": {"reputation": 947, "user_id": 5245639, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/21816950a17786bc7cd721a7f5934d5f?s=128&d=identicon&r=PG&f=1", "display_name": "ravelinx", "link": "https://stackoverflow.com/users/5245639/ravelinx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 47668386, "answer_count": 2, "score": -1, "last_activity_date": 1512542681, "creation_date": 1512512102, "last_edit_date": 1512513653, "question_id": 47663541, "link": "https://stackoverflow.com/questions/47663541/group-a-collection-by-a-certain-criteria", "title": "Group a collection by a certain criteria", "body": "<p>so I have a collection in mongoDB that has an structure like the following: </p>\n\n<pre><code>{\n    \"_id\": 129flaslkfja,\n    \"number\": 10\n}\n</code></pre>\n\n<p>in this collection some elements have the number field set to 1 others to 2, others to 3, etc. in random order. I want to get an array that has in the first position all models with the number 1 in the next position all the models with the number  2 and so on. I know I can do this with a loop and a simple find or where but I want to know if there's a simpler, cleaner and more effective way in terms of performance. </p>\n\n<p>I have tried with $group, $match but this is not what I want. </p>\n\n<p>For example this is the data in my database:</p>\n\n<pre><code>[{\n  \"_id\": a1,\n  \"number\": 1\n},\n{\n  \"_id\": a2,\n  \"number\": 3\n},\n{\n  \"_id\": a3,\n  \"number\": 2\n},\n{\n  \"_id\": a4,\n  \"number\": 2\n},\n{\n  \"_id\": a5,\n  \"number\": 2\n},\n{\n  \"_id\": a6,\n  \"number\": 1\n}]\n</code></pre>\n\n<p>So I want to group by number value like this:</p>\n\n<pre><code>[\n    [{\n      \"_id\": a1,\n      \"number\": 1\n    },\n    {\n      \"_id\": a6,\n      \"number\": 1\n    }],\n\n    [{\n      \"_id\": a3,\n      \"number\": 2\n    },\n    {\n      \"_id\": a4,\n      \"number\": 2\n    },\n    {\n      \"_id\": a5,\n      \"number\": 2\n    }],\n\n    [{\n      \"_id\": a2,\n      \"number\": 3\n    }]\n]\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1512536185, "post_id": 47663826, "comment_id": 82293104, "body": "<code>split</code> is functionally equivalent to <code>split(&#39; &#39;)</code>."}], "tags": [], "owner": {"reputation": 1167, "user_id": 387529, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/520bb4ce077d7e08437a7225c894e680?s=128&d=identicon&r=PG", "display_name": "ArashM", "link": "https://stackoverflow.com/users/387529/arashm"}, "is_accepted": false, "score": 0, "last_activity_date": 1512588840, "last_edit_date": 1512588840, "creation_date": 1512513574, "answer_id": 47663826, "question_id": 47663540, "link": "https://stackoverflow.com/questions/47663540/what-is-this-rspec-syntax-exactly-asking-for/47663826#47663826", "title": "What is this Rspec syntax exactly asking for?", "body": "<p><code>yield</code> means \"execute the code inside the block and give me the result\". Your <code>reverser</code> method can be simply written like this:</p>\n\n<pre><code>def reverser\n  yield.split.map(&amp;:reverse).join(' ') if block_given?\nend\n\nresult = reverser do\n  'hello world'\nend\n\nputs result\n# =&gt; olleh dlrow\n</code></pre>\n\n<p>Ruby automatically returns the last thing called as the return value, so the return value of the block given to <code>reverser</code> is <code>hello world</code> which is what will be assigned to <code>yield</code>.</p>\n\n<p>You could check the documentation for <code>block_given?</code> <a href=\"http://devdocs.io/ruby~2.4/kernel#method-i-block_given-3F\" rel=\"nofollow noreferrer\">here</a>. Take a look at <a href=\"https://stackoverflow.com/questions/3066703/blocks-and-yields-in-ruby\">this answer</a> for deeper explanation of blocks</p>\n"}, {"tags": [], "owner": {"reputation": 809, "user_id": 1945990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/edcJw.gif?s=128&g=1", "display_name": "Mike W", "link": "https://stackoverflow.com/users/1945990/mike-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1512515530, "last_edit_date": 1512515530, "creation_date": 1512514538, "answer_id": 47664028, "question_id": 47663540, "link": "https://stackoverflow.com/questions/47663540/what-is-this-rspec-syntax-exactly-asking-for/47664028#47664028", "title": "What is this Rspec syntax exactly asking for?", "body": "<p>I think the point of the question should be to explain about RSpec and TDD if you're going on a bootcamp. I think giving you the answer to the problem is only part of what you need to know in this case. So... </p>\n\n<p>One of the principles of TDD is to write the least amount of code to get the tests to pass. If I go back to the start.</p>\n\n<p>You have written a <code>reverser</code> method that takes <code>sentence</code> as an argument:</p>\n\n<pre><code>def reverser sentence\n  'olleh'\nend\n</code></pre>\n\n<p>Run the test and the test should fail with an error: <code>wrong number of arguments</code>. Remove the argument and try that and run RSpec again:</p>\n\n<pre><code>def reverser\n  'olleh'\nend\n</code></pre>\n\n<p>The first test should pass, but it will fail the second test as we've hard coded the return value of <code>olleh</code>. Clearly it's no good returning a hard coded value \u2014 it just helped the test to pass \u2014 so I need to figure out how to <code>yield</code> a return value.</p>\n\n<pre><code>def reverser\n  yield.reverse\nend\n</code></pre>\n\n<p>And this perhaps will get the second test to pass...</p>\n\n<p>This is the guiding principle of TDD, take small steps and get your code to pass. Once it's passing then go back and refactor and improve your code.</p>\n\n<p>As you probably know already TDD is invaluable for writing good quality code - it makes writing code fun, it helps with refactoring.</p>\n\n<p>I found a page with some <a href=\"https://coderwall.com/p/kr8yww/tdd-in-ruby-for-non-believers\" rel=\"nofollow noreferrer\">resources</a> and I would recommend codeschool but they've retired their course which is a pity but there is a <a href=\"https://www.pluralsight.com/courses/rspec-the-right-way\" rel=\"nofollow noreferrer\">PluralSight TDD course</a> that might be useful and also there is a <a href=\"https://www.udemy.com/complete-tdd-course-ruby-rspec/\" rel=\"nofollow noreferrer\">Udemy course on TDD</a> that might be useful too in giving you a head start.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7452246"}, "edited": false, "score": 0, "creation_date": 1512523975, "post_id": 47664515, "comment_id": 82290083, "body": "That is a really interesting solution to the problem! I really never thought about the <code>result = reserver {&quot;hello dolly&quot; }</code> being the input in the test case. Thanks for the thorough explanation!"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1512517356, "creation_date": 1512517356, "answer_id": 47664515, "question_id": 47663540, "link": "https://stackoverflow.com/questions/47663540/what-is-this-rspec-syntax-exactly-asking-for/47664515#47664515", "title": "What is this Rspec syntax exactly asking for?", "body": "<p>This is really more about TDD than about Ruby. The approach would be much the same in any other language as well.</p>\n\n<p>The point of TDD is to write the simplest test that could possibly fail, and then write the simplest code that could possibly change the error message. Step #1 is already provided to you in this example, so this is really about step #2: write the simplest code that could possibly change the message.</p>\n\n<p>Let's run the tests! The message says:</p>\n\n<blockquote>\n<pre><code> NoMethodError:\n   undefined method `reverser' \u2026\n</code></pre>\n</blockquote>\n\n<p>What's the simplest code that could possibly change a message that says a method doesn't exist? Well, make the method exist, of course!</p>\n\n<pre><code>def reverser; end\n</code></pre>\n\n<p>Now, the message is:</p>\n\n<blockquote>\n<pre><code>expected: \"olleh\"\n     got: nil\n</code></pre>\n</blockquote>\n\n<p>Okay, so it expected us to return the string <code>'olleh'</code>, but we actually returned <code>nil</code>. That's easy:</p>\n\n<pre><code>def reverser; 'olleh' end\n</code></pre>\n\n<p>Great! The first test passes. But the second still fails. It says:</p>\n\n<blockquote>\n<pre><code>expected: \"olleh yllod\"\n     got: \"olleh\"\n</code></pre>\n</blockquote>\n\n<p>Hmm \u2026 apparently, it is not enough to just return something statically. We have to return something different every time. The obvious source would be an argument, but our method doesn't have any parameters. Or does it? Yes! In Ruby, all methods have an implicit block parameter! You can evaluate it using the <code>yield</code> keyword, so let's try that:</p>\n\n<pre><code>def reverser; yield end\n</code></pre>\n\n<p>Damn! We're back to two errors! That was a step backwards. Or was it? Let's look at the first error message:</p>\n\n<blockquote>\n<pre><code>expected: \"olleh\"\n     got: \"hello\"\n</code></pre>\n</blockquote>\n\n<p>Do you notice something? The expected value is exactly the reverse of the value we are currently returning. So, all we need to do is reverse the return value:</p>\n\n<pre><code>def reverser; yield.reverse end\n</code></pre>\n\n<p>Hooray! We're back to 1 error:</p>\n\n<blockquote>\n<pre><code>expected: \"olleh yllod\"\n     got: \"yllod olleh\"\n</code></pre>\n</blockquote>\n\n<p>Again, can you spot what is happening? The order of the words is reversed! We need to separate the words and then reverse them, then put them back together:</p>\n\n<pre><code>def reverser; yield.reverse.split.reverse.join end\n</code></pre>\n\n<p>So close!</p>\n\n<blockquote>\n<pre><code>expected: \"olleh yllod\"\n     got: \"ollehyllod\"\n</code></pre>\n</blockquote>\n\n<p>We just need to put the space back in:</p>\n\n<pre><code>def reverser; yield.reverse.split.reverse.join(' ') end\n</code></pre>\n\n<p>Yippieh!</p>\n\n<blockquote>\n<pre><code>2 examples, 0 failures\n</code></pre>\n</blockquote>\n\n<p>The important thing is: at no point did we actually have to <em>think</em>. Every step of the way, the <em>tests</em> told us what to do, what to do next, and when we were done. That's what TDD is about: the tests <em>drive</em> the development.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7452246"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 47664515, "answer_count": 3, "score": 0, "last_activity_date": 1512588840, "creation_date": 1512512097, "question_id": 47663540, "link": "https://stackoverflow.com/questions/47663540/what-is-this-rspec-syntax-exactly-asking-for", "title": "What is this Rspec syntax exactly asking for?", "body": "<p>TL;DR I am going to a bootcamp next year and one their assessments to get in is learning ruby. I have a background in JS and am very new to ruby. I have this assessment in which case I am not familiar with what the test wants me to do. Below is the test case(Rspec) and right below that is my answer.</p>\n\n<pre><code>describe \"some silly block functions\" do\n  describe \"reverser\" do\n    it \"reverses the string returned by the default block\" do\n      result = reverser do\n        \"hello\"\n      end\n\n  expect(result).to eq(\"olleh\")\nend\n\nit \"reverses each word in the string returned by the default block\" do\n  result = reverser do\n    \"hello dolly\"\n  end\n\n  expect(result).to eq(\"olleh yllod\")\n  end\nend\n</code></pre>\n\n<p>This is my answer code: </p>\n\n<pre><code>def reverser sentence\n  words = sentence.split(\" \")\n  result = []\n\n  words.length.times do |i|\n    result.push(yield(words[i]))\n  end\n\n  result.join(\" \")\nend\n\nreverser(\"hello dolly\") {|n| n.reverse} #=&gt; 'olleh yllod'\n</code></pre>\n\n<p>As I mentioned above I am new to ruby and the idea of yielding is like a callback function for JS. I am having a hard time figuring out what expected code the test case wants me to write. It says that 'it reverses each word in the string returned by the default block' from the statement I just created a block outside of the function where the words are being reversed. I appreciate the help and guidance from whoever can give advice. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1512510445, "post_id": 47663064, "comment_id": 82285608, "body": "<code>No route matches [POST] &quot;&#47;events&#47;1&#47;entries&#47;new&quot;</code> @Simple Lime"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1512510451, "post_id": 47663064, "comment_id": 82285610, "body": "form_for should be passed the instance variable <code>@entry</code>. e.g. <code>form_for(@entry)</code>. The instance variable should be built from the nesting e.g. <code>@event = Event.find(params[:event_id]); @entry = @event.entries.build</code> I have no idea how you are accessing &quot;user&quot; in this case but that should also be built in to the entry object."}, {"owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512510826, "post_id": 47663064, "comment_id": 82285789, "body": "With <code>&lt;%= form_for(@entry) do |f| %&gt;</code> I get a <code>NoMethodError in Entries#new</code>. Where `def new&#39; contains the code you suggested. I fully understand your frustration as I am currently a beginner. Are there any good resources you can suggest to learn from?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512511652, "post_id": 47663366, "comment_id": 82286167, "body": "Sorry, I understand that my <code>form_for</code> is wrong, are you saying that is should be replaced with <code>form_for([@event , @entry] ,event_entries_path(@event))</code>"}, {"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "reply_to_user": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512512668, "post_id": 47663366, "comment_id": 82286635, "body": "Use <code>form_for([@event, @entry]) do</code>"}], "tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": true, "score": 0, "last_activity_date": 1512511243, "creation_date": 1512511243, "answer_id": 47663366, "question_id": 47663064, "link": "https://stackoverflow.com/questions/47663064/how-to-save-data-from-a-new-object-in-a-nested-resource-in-rails/47663366#47663366", "title": "How to save data from a new object in a nested resource in rails?", "body": "<p>The route you've provided in <code>form_for</code> does not accept POSTs. You've provided the route that renders the <code>new</code> page, not the route that accepts new records, which is the <code>create</code> route. For that, you'll want to use <code>event_entries_path(@event)</code> route helper.</p>\n\n<p>With nested resources, the form_for's first argument should be an array: <code>&lt;%= form_for([@event, @entry], ...</code>. Rails will intelligently choose the route you need based on whether the <code>@entry</code> is persisted or not.</p>\n"}], "owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 47663366, "answer_count": 1, "score": 0, "last_activity_date": 1512511243, "creation_date": 1512509810, "last_edit_date": 1512510357, "question_id": 47663064, "link": "https://stackoverflow.com/questions/47663064/how-to-save-data-from-a-new-object-in-a-nested-resource-in-rails", "title": "How to save data from a new object in a nested resource in rails?", "body": "<p>I am looking to create a new record within a nested resource in rails as according to <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/routing.html</a>.</p>\n\n<p>My model is:</p>\n\n<pre><code>class Entry &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :event\n\nclass User &lt; ApplicationRecord\n  has_many :entries, dependent: :destroy\n\nclass Event &lt; ApplicationRecord\n   has_many :entries, dependent: :destroy\n</code></pre>\n\n<p>And I have declared my route as</p>\n\n<pre><code>Rails.application.routes.draw do\n    resources :users\n    resources :events do\n        resources :entries\n   end\n</code></pre>\n\n<p>What is the syntax for the entries controller for me to be able to create an entry on a link like <code>events/2/entries/new</code>. This is what I was trying: </p>\n\n<pre><code>class EntriesController &lt; ApplicationController\n\n def new\n    @entry = Entry.new\n end\n\n\ndef create\n    @entry = Entry.new(params[:entry])\n    if @entry.save\n        redirect_to @user\n        flash.now[:info] = \"Event Created\"\n    else\n        render '/create'\n        flash.now[:danger] = \"Somthing went wrong\"\n    end\nend\n\n\n  def entry_params\n        params.require(:event_id).permit(:siCard, :course)\n    end\n\n end\n</code></pre>\n\n<p>On by <code>new.html.erb</code> I am using </p>\n\n<pre><code>&lt;%= form_for(new_event_entry_path) do |f| %&gt;.\n</code></pre>\n\n<p>But I cant get it to work as <code>No route matches [POST] \"/events/1/entries/new\"</code>\nMany thanks</p>\n"}, {"tags": ["ruby", "automated-tests", "watir", "pageobjects", "page-object-gem"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1512518896, "post_id": 47662975, "comment_id": 82288757, "body": "What is the complete stack trace? Can you run with --backtrace"}, {"owner": {"reputation": 13, "user_id": 9058555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee66021ea2c40e5531bfd68f7dbd1947?s=128&d=identicon&r=PG&f=1", "display_name": "notinigo", "link": "https://stackoverflow.com/users/9058555/notinigo"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1512572440, "post_id": 47662975, "comment_id": 82313519, "body": "Added stack trace"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1512584807, "post_id": 47662975, "comment_id": 82321281, "body": "That&#39;s part of the po code that I get lost in, but getting that error is a bug, even if there might be a workaround. I&#39;d file a bug with the project and see if cheezy can reproduce &amp; fix it it: <a href=\"https://github.com/cheezy/page-object/issues/new\" rel=\"nofollow noreferrer\">github.com/cheezy/page-object/issues/new</a>"}], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1512530698, "creation_date": 1512530698, "answer_id": 47666305, "question_id": 47662975, "link": "https://stackoverflow.com/questions/47662975/argumenterror-when-accessing-pageobject-widget/47666305#47666305", "title": "ArgumentError when accessing pageobject widget", "body": "<p>It is not clear to me which change in Watir would cause this issue. It seems more likely a change in Page-Object. At any rate, here are 2 solutions. Note that this was tested with Page-Object v 2.2.4.</p>\n\n<p><strong>Using Widgets</strong></p>\n\n<p>As pointed out by <a href=\"https://github.com/cheezy/page-object/issues/263\" rel=\"nofollow noreferrer\">Alexis in Page-Object Issue 263</a>, including page object accessor methods in widgets is not as straight forward as one would expect. In the <code>MainTabsWidget</code> class, instead of <code>include PageObject</code>, you need to do:</p>\n\n<pre><code>extend PageObject::Accessors  # to get the accessor methods\nattr_reader :platform         # the accessor methods don't work without a platform\n</code></pre>\n\n<p>With this change, your page object should work.</p>\n\n<p><strong>Using Page Section</strong></p>\n\n<p>Page-Object has a page section feature that might better suit your needs. It simplifies some of the code (ie address the above issue).</p>\n\n<p>You define a class to represent your main tabs section. Note that you do not need to register the section or have the multi-line setup as with Widgets.</p>\n\n<pre><code>class MainTabs\n  include PageObject\n  include PageObject::PageFactory\n\n  link(:first_link, :text =&gt; 'First')\n  link(:second_link, :text =&gt; 'Second')\n  link(:third_link, :text =&gt; 'Third')\n  link(:category_link, :text =&gt; 'Category')\n  link(:subcat1_link, :text =&gt; 'Subcat1')\n  link(:subcat2_link, :text =&gt; 'Subcat2')\n\n  def select_menu_item(tab_item)\n    items = tab_item.split /\\//\n    items.each do |item|\n      case item\n        when 'First'\n          first_link\n        when 'Second'\n          second_link\n        when 'Third'\n          third_link\n        when 'Category'\n          category_link\n        when 'Subcat1'\n          subcat1_link\n        when 'Subcat2'\n          subcat2_link\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The page object can simply become:</p>\n\n<pre><code>class LandingPage\n  include PageObject\n  include PageObject::PageFactory\n\n  page_section(:menu_tabs, MainTabs, :id =&gt; 'mainMenu')\nend\n</code></pre>\n\n<p>The clicking of the menu would change to:</p>\n\n<pre><code>page.menu_tabs.select_menu_item('First')\n</code></pre>\n\n<p>(or you could continue to define a <code>#select_menu_item</code> method in <code>LandingPage</code> to avoid downstream changes)</p>\n"}], "owner": {"reputation": 13, "user_id": 9058555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee66021ea2c40e5531bfd68f7dbd1947?s=128&d=identicon&r=PG&f=1", "display_name": "notinigo", "link": "https://stackoverflow.com/users/9058555/notinigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 47666305, "answer_count": 1, "score": 1, "last_activity_date": 1512572402, "creation_date": 1512509403, "last_edit_date": 1512572402, "question_id": 47662975, "link": "https://stackoverflow.com/questions/47662975/argumenterror-when-accessing-pageobject-widget", "title": "ArgumentError when accessing pageobject widget", "body": "<pre><code>class MainTabsWidget  &lt; PageObject::Elements::UnorderedList\n  include  PageObject\n  include  PageObject::PageFactory\n\n  link(:first_link, :text =&gt; 'First')\n  link(:second_link, :text =&gt; 'Second')\n  link(:third_link, :text =&gt; 'Third')\n  link(:category_link, :text =&gt; 'Category')\n  link(:subcat1_link, :text =&gt; 'Subcat1')\n  link(:subcat2_link, :text =&gt; 'Subcat2')\n\n  def goto_tab_item(tab_item)\n    items = tab_item.split /\\//\n    items.each do |item|\n      case item\n        when 'First'\n          first_link\n        when 'Second'\n          second_link\n        when 'Third'\n          third_link\n        when 'Category'\n          category_link\n        when 'Subcat1'\n          subcat1_link\n        when 'Subcat2'\n          subcat2_link\n      end\n    end\n  end\nend\n\nPageObject.register_widget :main_menu, MainTabsWidget , :ul\n</code></pre>\n\n<p>I have a page called landing page that uses the widget in the following manner....</p>\n\n<pre><code>class LandingPage\n  include  PageObject\n  include  PageObject::PageFactory\n\n\n  main_menu(:menu_tabs, :id =&gt; 'mainMenu')\n\n\n  def select_menu_item(item)\n    menu_tabs_element.go_to_tab_item item\n  end\nend\n</code></pre>\n\n<p>This actually did work at one point.  If you pass 'First' for  select_menu_item, it will click to the page specified by first_link.  If you specify 'Category/Subcat1' it will click on the category link and then subcat1.  </p>\n\n<p>Howerver, something changed.  We are transition from watir-webdriver gem to watir (6.10) gem, and now the code gets the argument exeption </p>\n\n<pre><code>'ArgumentError: wrong number of arguments (0 for 1..2)'\n</code></pre>\n\n<p>This occurs when menu_tabs_element gets referenced in any way.  I've run out of ideas to remedy this.</p>\n\n<p>Stack Trace:</p>\n\n<pre><code>ArgumentError: wrong number of arguments (0 for 1..2)\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object/element_locators.rb:10:in `element'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object/elements/element.rb:191:in `respond_to_missing?'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object.rb:53:in `respond_to_missing?'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object.rb:70:in `respond_to?'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object.rb:70:in `initialize'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object/platforms/watir/page_object.rb:1047:in `new'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object/platforms/watir/page_object.rb:1047:in `find_watir_element'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object/platforms/watir/page_object.rb:1118:in `block in define_widget_singular_accessor'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page-object-2.2.4/lib/page-object/widgets.rb:38:in `block (3 levels) in define_accessors'\n./lib/pages/menu.rb:13:in `select_menu_item'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page_navigation-0.10/lib/page_navigation.rb:134:in `block in navigate_through_pages'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page_navigation-0.10/lib/page_navigation.rb:129:in `each'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page_navigation-0.10/lib/page_navigation.rb:129:in `navigate_through_pages'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/page_navigation-0.10/lib/page_navigation.rb:67:in `navigate_to'\n./spec/refactor/test_spec.rb:6:in `block (2 levels) in &lt;top (required)&gt;'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/hooks.rb:350:in `instance_exec'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/hooks.rb:350:in `run'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/hooks.rb:509:in `block in run_owned_hooks_for'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/hooks.rb:508:in `each'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/hooks.rb:508:in `run_owned_hooks_for'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/hooks.rb:460:in `run'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/example_group.rb:537:in `block in run_before_context_hooks'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/memoized_helpers.rb:186:in `block in isolate_for_context_hook'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/memoized_helpers.rb:182:in `instance_exec'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/memoized_helpers.rb:182:in `isolate_for_context_hook'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/example_group.rb:536:in `run_before_context_hooks'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/example_group.rb:589:in `run'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:118:in `block (3 levels) in run_specs'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:118:in `map'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:118:in `block (2 levels) in run_specs'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/configuration.rb:1896:in `with_suite_hooks'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:113:in `block in run_specs'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/reporter.rb:79:in `report'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:112:in `run_specs'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:87:in `run'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:71:in `run'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/lib/rspec/core/runner.rb:45:in `invoke'\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rspec-core-3.7.0/exe/rspec:4:in `&lt;top (required)&gt;'\nC:/Ruby22/bin/rspec:23:in `load'\nC:/Ruby22/bin/rspec:23:in `&lt;top (required)&gt;'\n-e:1:in `load'\n-e:1:in `&lt;main&gt;'\n\n1 example, 1 failure, 0 passed\n\nFinished in 6.087 seconds\n\nProcess finished with exit code 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-postgresql"], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1512512187, "post_id": 47663489, "comment_id": 82286406, "body": "For getting conversations and specific users would work, but for getting a specific conversation between two specific users or more, I think maybe something&#39;s missing there."}, {"owner": {"reputation": 698, "user_id": 5617424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmoz.jpg?s=128&g=1", "display_name": "Vane Trajkov", "link": "https://stackoverflow.com/users/5617424/vane-trajkov"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1512512579, "post_id": 47663489, "comment_id": 82286595, "body": "Not sure what defines the specific conversations, but you can extend the where clause with additional conversation query attributes. Something like:  Conversation.joins(:users).where( conversation_attr: some_value, users: { id:  [user_id1, user_id2, ...]})"}, {"owner": {"reputation": 1, "user_id": 7898246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aAS4Z.jpg?s=128&g=1", "display_name": "pere slop", "link": "https://stackoverflow.com/users/7898246/pere-slop"}, "edited": false, "score": 0, "creation_date": 1512568286, "post_id": 47663489, "comment_id": 82310643, "body": "I made join table user_conversations between user and conversation. <b>Conversation.joins(:user_conversations).where(user_conversat&zwnj;&#8203;ions: { user_id: user_ids }).group(&#39;conversations.id&#39;).having(&quot;COUNT(user_conversation&zwnj;&#8203;s.user_id) = #{user_ids.size}&quot;).to_a</b>"}], "tags": [], "owner": {"reputation": 698, "user_id": 5617424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmoz.jpg?s=128&g=1", "display_name": "Vane Trajkov", "link": "https://stackoverflow.com/users/5617424/vane-trajkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1512513912, "last_edit_date": 1512513912, "creation_date": 1512511783, "answer_id": 47663489, "question_id": 47662966, "link": "https://stackoverflow.com/questions/47662966/find-conversations-between-users/47663489#47663489", "title": "Find conversations between users", "body": "<p>You can join and put the query as a hash</p>\n\n<pre><code>Conversation.joins(:users).where(conversation_attr: some_value, users: { id:  current_user.id })\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Conversation.joins(:users).where(conversation_attr: some_value, users: { id:  [user_id1, user_id2, ...]})\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7898246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aAS4Z.jpg?s=128&g=1", "display_name": "pere slop", "link": "https://stackoverflow.com/users/7898246/pere-slop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512513912, "creation_date": 1512509351, "last_edit_date": 1512510171, "question_id": 47662966, "link": "https://stackoverflow.com/questions/47662966/find-conversations-between-users", "title": "Find conversations between users", "body": "<p>I need an ActiveRecord query to find conversations for current_user and any another user</p>\n\n<p>Conversations can have many users. I need to set users ids in that query(it can be two or more users). </p>\n\n<pre><code>class Conversation &lt; ActiveRecord::Base\n  has_many :users\nend\n\nclass User &lt; ActiveRecord::Base\n  belongs_to :conversations\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "exception-handling"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1512508582, "post_id": 47662612, "comment_id": 82284670, "body": "Does this help? <a href=\"https://stackoverflow.com/questions/22141601/how-to-test-exception-raising-in-rails-rspec\">how-to-test-exception-raising-in-rails-rspec</a>"}, {"owner": {"reputation": 7468, "user_id": 303675, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/87dff789ba8bd4c43d82360c9a23b514?s=128&d=identicon&r=PG", "display_name": "TheDelChop", "link": "https://stackoverflow.com/users/303675/thedelchop"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1512509146, "post_id": 47662612, "comment_id": 82284960, "body": "No, that doesn&#39;t help, the spec after that handles the fact that I expect an exception to be thrown, here I&#39;m trying to assert that we send the error to our service <i>before</i> the exception is thrown."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1512509483, "post_id": 47662612, "comment_id": 82285126, "body": "Just wrap the call to <code>available_channels.fetch</code> in a <code>begin ... rescue RemoteService::InvalidRequest</code> block."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512509530, "post_id": 47662612, "comment_id": 82285151, "body": "@Stefan beat me to it"}], "answers": [{"comments": [{"owner": {"reputation": 7468, "user_id": 303675, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/87dff789ba8bd4c43d82360c9a23b514?s=128&d=identicon&r=PG", "display_name": "TheDelChop", "link": "https://stackoverflow.com/users/303675/thedelchop"}, "edited": false, "score": 0, "creation_date": 1512511065, "post_id": 47663194, "comment_id": 82285907, "body": "Yeah this is what I also concluded, thank you for confirming this approach might be the best way to handle it."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 1, "last_activity_date": 1512510478, "creation_date": 1512510478, "answer_id": 47663194, "question_id": 47662612, "link": "https://stackoverflow.com/questions/47662612/testing-methods-that-eventually-throw-an-exception-in-rspec/47663194#47663194", "title": "Testing methods that eventually throw an exception in RSpec", "body": "<p>You can <a href=\"https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher\" rel=\"nofollow noreferrer\">expect errors</a> to be raised in code. In order for the exception to be caught by RSpec, you need to use a block as follows:</p>\n\n<pre><code>it 'records the failure with our error reporting service' do\n  expect(ErrorReporter).to receive(:increment).with(\n    'bad_request',\n    source: {\n      account_id:  1\n    },\n    sporadic: true\n  )\n\n  expect { available_channels.fetch }\n    .to raise_error RemoteService::InvalidRequest\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": -2, "last_activity_date": 1611040825, "last_edit_date": 1611040825, "creation_date": 1512544228, "answer_id": 47668751, "question_id": 47662612, "link": "https://stackoverflow.com/questions/47662612/testing-methods-that-eventually-throw-an-exception-in-rspec/47668751#47668751", "title": "Testing methods that eventually throw an exception in RSpec", "body": "<p>The exception causes your example to fail because it is not rescued. To prevent the error, you can wrap the method call in a <code>begin ... rescue</code> block:</p>\n<pre><code>it 'records the failure with our error reporting service' do\n  expect(ErrorReporter).to receive(:increment).with(\n    'bad_request',\n     source: {\n       account_id:  1\n     },\n     sporadic: true\n   )\n\n   begin\n     available_channels.fetch\n   rescue =&gt; RemoteService::InvalidRequest\n     # would cause the example to fail\n   end\nend\n</code></pre>\n<p>In another example, you should also <code>expect</code> the error to be raised.</p>\n"}], "owner": {"reputation": 7468, "user_id": 303675, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/87dff789ba8bd4c43d82360c9a23b514?s=128&d=identicon&r=PG", "display_name": "TheDelChop", "link": "https://stackoverflow.com/users/303675/thedelchop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1714, "favorite_count": 0, "accepted_answer_id": 47663194, "answer_count": 2, "score": 0, "last_activity_date": 1611040825, "creation_date": 1512507818, "last_edit_date": 1512510600, "question_id": 47662612, "link": "https://stackoverflow.com/questions/47662612/testing-methods-that-eventually-throw-an-exception-in-rspec", "title": "Testing methods that eventually throw an exception in RSpec", "body": "<p>I've got a method as follows:</p>\n\n<pre><code> if response.fetch('ok')\n    response.fetch(response_key) { [] }\n  elsif response.fetch('error') == 'token_revoked'\n    ErrorReporter.increment('access_revoked', source: { account_id: account_id }, sporadic: true)\n    fail(RemoteService::AccessRevoked, 'Our access to your account was revoked, please re-authorize.')\n  else\n    ErrorReporter.increment(\n      'bad_request',\n      source: {\n        account_id: account_id\n        error: response.fetch('error')\n      },\n      sporadic: true\n    )\n    fail(RemoteService::InvalidRequest, 'Something went wrong communicating with the remote service, please try again')\n  end\n</code></pre>\n\n<p>And I'm trying to test the scenario when the request returns with the <code>token_revoked</code> error.  I'd like to ensure the test specifies that in this scenario, that we report the error to our ErrorReporting service.</p>\n\n<p>So, my spec looks like this:</p>\n\n<pre><code>it 'records the failure with our error reporting service' do\n  expect(ErrorReporter).to receive(:increment).with(\n    'bad_request',\n     source: {\n       account_id:  1\n     },\n     sporadic: true\n   )\n\n   available_channels.fetch\nend\n</code></pre>\n\n<p>However, this spec always fails, because after the call is made to the ErrorReporter, the code immediately calls <code>fail</code> which makes my spec fail.  Does anyone have any idea how I can verify that the call to my error reporter is made while handling the inevitable exception that I know the code is now going to throw?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": false, "score": 3, "last_activity_date": 1512572823, "last_edit_date": 1512572823, "creation_date": 1512572459, "answer_id": 47677324, "question_id": 47662568, "link": "https://stackoverflow.com/questions/47662568/delegating-method-to-has-many-association-ignores-preloading/47677324#47677324", "title": "Delegating method to has_many association ignores preloading", "body": "<p>Here is a solution that follows law of demeter AND honors the preloaded data (doesn't hit the database all over again).  It is certainly a bit odd, but I could not find any other solution, and I really want to know what others think about this:</p>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord     \n  has_many :blogs\n\n  def all_blogs_have_title?\n    blogs.all_have_title_present?(self)\n  end\nend\n\nclass Blog &lt; ApplicationRecord\n  belongs_to :user\n\n  def self.all_have_title_present?(user)\n    user.blogs.any? &amp;&amp; user.blogs.all? {|blog| blog.title.present?}\n  end\nend\n</code></pre>\n\n<p><strong>Usage</strong></p>\n\n<pre><code>user = User.includes(:blogs).first\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n  Blog Load (0.1ms)  SELECT \"blogs\".* FROM \"blogs\" WHERE \"blogs\".\"user_id\" = 1\n  =&gt; #&lt;User id: 1, name: \"all yes\", created_at: \"2017-12-05 20:28:00\", updated_at: \"2017-12-05 20:28:00\"&gt; \n\nuser.all_blogs_have_title?\n=&gt; true \n</code></pre>\n\n<p>So we notice that it is not hitting the database again (honoring the preloaded data), and instead of the <code>user</code> reaching into the attributes of it's neighbor (<code>Blog</code>), it delegates the question to it's neighbor and allows the neighbor (again: <code>Blog</code>) to answer questions about <em>it's own attributes</em>.</p>\n\n<p>The odd thing is clearly inside the <code>Blog</code> model where the class method asks <code>user.blogs</code>, so <code>Blog</code> knows about the association on <code>User</code>.  But perhaps this is ok because, after all, <code>Blog</code> and <code>User</code> share an association with each other. </p>\n"}, {"tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 4, "last_activity_date": 1513304048, "last_edit_date": 1513304048, "creation_date": 1512965847, "answer_id": 47746359, "question_id": 47662568, "link": "https://stackoverflow.com/questions/47662568/delegating-method-to-has-many-association-ignores-preloading/47746359#47746359", "title": "Delegating method to has_many association ignores preloading", "body": "<p><strong>Explanation</strong></p>\n\n<p>The reason why <code>all_have_title?</code> delegation doesn't work properly in your example is that your are delegating the method to <code>blogs</code> association, but yet defining it as a <code>Blog</code> class method, which are different entities and thus receivers. </p>\n\n<p>At this point everybody following would be asking a question why there is no <code>NoMethodError</code> exception raised when calling <code>user.all_have_title?</code> in the second example provided by OP. The reason behind this is elaborated in the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html\" rel=\"nofollow noreferrer\"><code>ActiveRecord::Associations::CollectionProxy</code></a> documentation (which is the resulting object class of the <code>user.blogs</code> call), which rephrasing due to our example namings states:</p>\n\n<blockquote>\n  <p>that the association proxy in <code>user.blogs</code> has the object in <code>user</code> as <code>@owner</code>, the collection of his <code>blogs</code> as <code>@target</code>, and the <code>@reflection</code> object represents a <code>:has_many</code> macro.<br>\n  This class delegates unknown methods to <code>@target</code> via <code>method_missing</code>.</p>\n</blockquote>\n\n<p>So the order of things that are happening is as follows:</p>\n\n<ol>\n<li><code>delegate</code> defines <code>all_have_title?</code> instance method in <code>has_many</code> scope in <code>User</code> model on initialization;</li>\n<li>when called on <code>user</code> <code>all_have_title?</code> method is delegated to the <code>has_many</code> association;</li>\n<li>as there is no such method defined there it is delegated to <code>Blog</code> class <code>all_have_title?</code> method via <code>method_missing</code>;</li>\n<li><p><a href=\"https://apidock.com/rails/ActiveRecord/Scoping/Named/ClassMethods/all\" rel=\"nofollow noreferrer\"><code>all</code></a> method is  called on <code>Blog</code> with <code>current_scope</code> which holds <code>user_id</code> condition (<code>scoped_attributes</code> at this point is holding <code>{\"user_id\"=&gt;1}</code> value), so there is no information about preloading, because basically what is happening is:</p>\n\n<pre><code>Blog.where(user_id: 1)\n</code></pre>\n\n<p>for each <code>user</code> separately, which is the key difference in comparison with the preloading that was performed before, which queries associated records by multiple values using <code>in</code>, but the one performed here queries a single record with <code>=</code> (this is the reason why the query itself is not even cached between these two calls).</p></li>\n</ol>\n\n<p><strong>Solution</strong></p>\n\n<p>To both encapsulate the method explicitly and mark it as a relation-based (between <code>User</code> and <code>Blog</code>) you should define and describe it's logic in the <code>has_many</code> association scope:</p>\n\n<pre><code>class User\n  delegate :all_have_title?, to: :blogs, prefix: false, allow_nil: false\n\n  has_many :blogs do\n    def all_have_title?\n      all? { |blog| blog.title.present? }\n    end\n  end\nend\n</code></pre>\n\n<p>Thus the calling you do should result in the following 2 queries only:</p>\n\n<pre><code>user = User.includes(:blogs).first\n=&gt; #&lt;User:0x00007f9ace1067e0\n  User Load (0.8ms)  SELECT  `users`.* FROM `users`  ORDER BY `users`.`id` ASC LIMIT 1\n  Blog Load (1.4ms)  SELECT `blogs`.* FROM `blogs` WHERE `blogs`.`user_id` IN (1)\nuser.all_have_title?\n=&gt; true\n</code></pre>\n\n<p>this way <code>User</code> doesn't implicitly operate with <code>Blog</code>'s attributes and you don't lose you preloaded data. If you don't want association methods operating with <code>title</code> attribute directly (block in the <code>all</code> method ), you can define an instance method in <code>Blog</code> model and define all the logic there:</p>\n\n<pre><code>class Blog\n  def has_title?\n    title.present?\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1513261418, "creation_date": 1513261418, "answer_id": 47815635, "question_id": 47662568, "link": "https://stackoverflow.com/questions/47662568/delegating-method-to-has-many-association-ignores-preloading/47815635#47815635", "title": "Delegating method to has_many association ignores preloading", "body": "<p>This  <a href=\"https://github.com/foraker/scope_delegation\" rel=\"nofollow noreferrer\">scope_delegation gem</a> will do your work.</p>\n\n<p>if you will define your work like this </p>\n\n<pre><code>class User &lt; ApplicationRecord\n   has_many :blogs\n\n   delegate :all_have_title?, to: :blogs, prefix: false, allow_nil: false\nend\n\nclass Blog &lt; ApplicationRecord\n  belongs_to :user\n\n  def self.all_have_title?\n    where.not(title: nil)\n  end\nend\n</code></pre>\n\n<p>This should work :)</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "accepted_answer_id": 47746359, "answer_count": 3, "score": 10, "last_activity_date": 1513333805, "creation_date": 1512507576, "last_edit_date": 1513333805, "question_id": 47662568, "link": "https://stackoverflow.com/questions/47662568/delegating-method-to-has-many-association-ignores-preloading", "title": "Delegating method to has_many association ignores preloading", "body": "<p>Is it possible to delegate a method to a <code>has_many</code> association in rails, AND still save the preloaded data on that association, all while following the law of demeter?  Currently it seems to me that you are forced to choose one or the other. That is: keep your preloaded data by NOT delegating, or lose your preloaded data and delegate.</p>\n\n<p>Example: I have the following two models:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :blogs\n\n  delegate :all_have_title?, to: :blogs, prefix: false, allow_nil: false\n\n  def all_blogs_have_title?\n    blogs.all? {|blog| blog.title.present?}\n  end\nend\n\n\nclass Blog &lt; ApplicationRecord\n  belongs_to :user\n\n  def self.all_have_title?\n    all.all? {|blog| blog.title.present?}\n  end\nend\n</code></pre>\n\n<p>Notice: that <code>User#all_blogs_have_title?</code> does the exact same thing as the delegation method of <code>all_have_title?</code>.</p>\n\n<p>The following, as I understand it, violates law of demeter.  However: it maintains your preloaded data:</p>\n\n<pre><code>user = User.includes(:blogs).first\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n  Blog Load (0.1ms)  SELECT \"blogs\".* FROM \"blogs\" WHERE \"blogs\".\"user_id\" = 1\n  =&gt; #&lt;User id: 1, name: \"all yes\", created_at: \"2017-12-05 20:28:00\", updated_at: \"2017-12-05 20:28:00\"&gt;\n\nuser.all_blogs_have_title?\n =&gt; true\n</code></pre>\n\n<p>Notice: when I called  <code>user.all_blogs_have_title?</code> it DID NOT do an additional query.  However, notice that the method <code>all_blogs_have_title?</code> is asking about <code>Blog</code> attributes, which is violating law of demeter.</p>\n\n<p>Other way which applies law of demeter but you lose the preloaded data:</p>\n\n<pre><code>user = User.includes(:blogs).first\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n  Blog Load (0.1ms)  SELECT \"blogs\".* FROM \"blogs\" WHERE \"blogs\".\"user_id\" = 1\n  =&gt; #&lt;User id: 1, name: \"all yes\", created_at: \"2017-12-05 20:28:00\", updated_at: \"2017-12-05 20:28:00\"&gt;\n\nuser.all_have_title?\n  Blog Load (0.2ms)  SELECT \"blogs\".* FROM \"blogs\" WHERE \"blogs\".\"user_id\" = ?  [[\"user_id\", 1]]\n  =&gt; true \n</code></pre>\n\n<p>Hopefully the downside of both implementations is apparent. Ideally: I would like to do it the second way with the delegate implementation, but to maintain that preloaded data.  Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 838, "user_id": 4107375, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/92eb78c7c4b20429f9d22a1d5e38be57?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/4107375/jay"}, "is_accepted": true, "score": 1, "last_activity_date": 1512511185, "creation_date": 1512511185, "answer_id": 47663353, "question_id": 47662536, "link": "https://stackoverflow.com/questions/47662536/mailer-send-nil-records/47663353#47663353", "title": "Mailer send nil records", "body": "<p>Your after_create callback to trigger the email is being called before you update your <code>Concert</code> object with data. Instead of creating a empty object, try adding values to your fields before you save the <code>Concert</code> object. </p>\n\n<p>Something like this: </p>\n\n<pre><code>data.each do |concert|\n  c = Concert.new\n  c.date = concert[0]\n  c.city = concert[1]\n  c.save\nend\n</code></pre>\n\n<p>Or this : </p>\n\n<pre><code>data.each do |concert| \n  Concert.create(date: concert[0], city: concert[1]) \nend \n</code></pre>\n\n<p>This way you will have values saved before the <code>after_create</code> callback is triggered.</p>\n"}], "owner": {"reputation": 646, "user_id": 8919469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f51a8277c113b7415c6b2bbd82be9615?s=128&d=identicon&r=PG&f=1", "display_name": "johan", "link": "https://stackoverflow.com/users/8919469/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 47663353, "answer_count": 1, "score": 0, "last_activity_date": 1512511185, "creation_date": 1512507424, "last_edit_date": 1512507953, "question_id": 47662536, "link": "https://stackoverflow.com/questions/47662536/mailer-send-nil-records", "title": "Mailer send nil records", "body": "<p>I am running tasks to scrap a website to get some concert dates.</p>\n\n<p>My tasks are finding/updating the concerts (date and city), and record them in the data base. I can find them in my rails console and also they can be displayed in my index and show views.\nBTW it seems it doesn't go through the create method in the ConcertController (I tried with binding.pry)</p>\n\n<p>After the task is run, I want to get an email alert if a new record was found. When I receive the email it's not complete:</p>\n\n<p><strong>concert_mailer/new_dates.html.erb</strong></p>\n\n<pre><code>&lt;p&gt;The boys are playing at &lt;%= @concert.city %&gt; on &lt;%= @concert.date %&gt;&lt;/p&gt;\n#returns The boys are playing at on \n\n&lt;p&gt;The boys are playing at &lt;%= @concert.inspect %&gt; &lt;/p&gt;\n\n#returns: The boys are playing at &lt;Concert id: 1, date: nil, city: nil, created_at: \"2017-12-05 20:32:09\", updated_at: \"2017-12-05 20:32:09\"&gt; \n</code></pre>\n\n<p>In rails console I have the record: </p>\n\n<pre><code>&lt;Concert id: 1, date: \"2017-12-08 00:00:00\", city: \"ECHANGE CULTUREL CAMEROUN (0)  | au 18 d\u00e9cembre 20...\", created_at: \"2017-12-05 20:32:09\", updated_at: \"2017-12-05 20:32:10\"&gt;\n</code></pre>\n\n<p><strong>Btw here are my tasks:</strong></p>\n\n<pre><code> namespace :scrap do\n  desc \"This get MM concerts\"\n\n    url = \"http://mountain-men.fr/concerts/\"\n    doc = Nokogiri::HTML(open(url))\n    data = doc.search('#dateconcert table')\n    data = data.css('.jaunec' ).map { |tr| tr.css('td').map(&amp;:text) } + doc.css('.jaunef' ).map { |tr| tr.css('td').map(&amp;:text) }\n\n  task :find_concerts  =&gt; :environment do\n\n    data.each do |concert|\n      c = Concert.create!\n      c.date = concert[0]\n      c.city = concert[1]\n      c.save\n    end\n\n  end\n\n  task :update_concerts  =&gt; :environment do\n\n    existing_date = Concert.all.map { |c| [c.date, c.city] }\n\n    data.each do |concert|\n      c = Concert.create!\n      c.date = concert[0]\n      c.city = concert[1]\n      c.save unless existing_date.include?([concert[0], concert[1]])\n    end\n      Concert.where(city: nil, date:nil).destroy_all\n\n  end\nend\n</code></pre>\n\n<p><strong>concert.rb</strong></p>\n\n<pre><code>class Concert &lt; ApplicationRecord\n   after_create :send_notification\n\n   def send_notification\n    ConcertMailer.new_dates(self).deliver_now\n   end\nend\n</code></pre>\n\n<p><strong>concert_mailer.rb</strong></p>\n\n<pre><code>class ConcertMailer &lt; ApplicationMailer\n\n  default from: \"concert@mountain-men.fr\"\n\n  def new_dates(concert)\n    @concert = concert\n\n    mail( to:   \"email@exemple.com\",\n         subject:  \"The boys are back in town\"\n        )\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "logstash"], "answers": [{"tags": [], "owner": {"reputation": 459, "user_id": 468361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfd64ab75e1111c832a7f40b67d5143?s=128&d=identicon&r=PG", "display_name": "Grant Neufeld", "link": "https://stackoverflow.com/users/468361/grant-neufeld"}, "is_accepted": true, "score": 3, "last_activity_date": 1512506702, "last_edit_date": 1512506702, "creation_date": 1512506351, "answer_id": 47662298, "question_id": 47662200, "link": "https://stackoverflow.com/questions/47662200/ruby-gem-can-search-for-but-not-install-some-gems/47662298#47662298", "title": "ruby gem can search for, but not install some gems", "body": "<p>Previously asked and answered: <a href=\"https://stackoverflow.com/questions/29770821/could-not-find-gem-logstash-devutils-0-ruby-in-any-of-the-gem-sources\">Could not find gem &#39;logstash-devutils (&gt;= 0) ruby&#39; in any of the gem sources</a></p>\n\n<p>Specifically, the <code>java</code> tag on the gem version means it requires a java-based Ruby interpreter. So the default ruby (MRI) won\u2019t work. You need to be running <a href=\"http://jruby.org/\" rel=\"nofollow noreferrer\">JRuby</a> (which you can more easily install, and not mess with your other Ruby projects, using a Ruby manager such as <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">RVM</a>).</p>\n"}], "owner": {"reputation": 826, "user_id": 2819525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/830e2fecdd962110e83555e0d2ee8ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Benedikt Bock", "link": "https://stackoverflow.com/users/2819525/benedikt-bock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 47662298, "answer_count": 1, "score": 1, "last_activity_date": 1512506702, "creation_date": 1512505985, "last_edit_date": 1512506392, "question_id": 47662200, "link": "https://stackoverflow.com/questions/47662200/ruby-gem-can-search-for-but-not-install-some-gems", "title": "ruby gem can search for, but not install some gems", "body": "<p>I'm currently trying to setup a ruby environment to develop a logstash plugin. This ruby installation is absolutely untouched (I've installed ruby 2.4.2 with DevKit on Windows)</p>\n\n<p>I can search and find the <code>logstash-devutils</code> gem:</p>\n\n<pre><code>$ gem search devutils\n\n*** REMOTE GEMS ***\n\ndevutils (0.0.1)\ndevutils-docs (0.0.1)\ndevutils-guard (0.0.1)\ndevutils-metrics (0.0.2)\nlogstash-devutils (1.3.6 java)\n</code></pre>\n\n<p>But if I try to install it I get an error:</p>\n\n<pre><code>$ gem install logstash-devutils\nERROR:  Could not find a valid gem 'logstash-devutils' (&gt;= 0) in any repository\nERROR:  Possible alternatives: logstash-input-xls, logstash-input-irc, logstash-output-xls, logstash-input-sqs, logstash_rails\n</code></pre>\n\n<p>While trying to download and install the gem manually I've found some other gems with a similar behaviour (I didn't examine it until the and):</p>\n\n<ul>\n<li>logstash-core </li>\n<li>logstash-core-plugin-api </li>\n<li>manticore</li>\n</ul>\n\n<p>Furthermore I get the error in 2 diffrent VMs (both linux with different ruby versions, I think 1.9.x and 2.3.x).</p>\n\n<p>Also an update of <code>gem</code> itself didn't change something.</p>\n\n<p>I'm not new to ruby but I've never observed something like this.</p>\n\n<p>Just to make it clear: There are gems (e.g. bundler) that can be installed as expected.</p>\n"}, {"tags": ["ruby", "cryptography"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1512503597, "post_id": 47661306, "comment_id": 82282267, "body": "1. Add the data that is encrypted and the data from the DB in hex to the question. 2. This may be a padding issue. 3. Are the IV and keyreallythe same, that is generally a security error. 4. <code>c.update(ciphertext) + c.final</code>: so cute."}, {"owner": {"reputation": 311, "user_id": 3396324, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/39703398/picture?type=large", "display_name": "Ethan Kent", "link": "https://stackoverflow.com/users/3396324/ethan-kent"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1512503673, "post_id": 47661306, "comment_id": 82282314, "body": "1. Will do. 2. That seems plausible. 3. No, only in the development database."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1512504055, "post_id": 47661306, "comment_id": 82282510, "body": "So, <code>QEVuQwBAEAAuR5vRj&#47;iFbaEsXKtpjubrWgyEhK5Pji2EWPDPoT4CyQ==</code> is Base64 not hex so I have to do the conversion&gt;? Base64 is binary encoding for <b>computers</b>, hex is binary encoding for developers."}, {"owner": {"reputation": 311, "user_id": 3396324, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/39703398/picture?type=large", "display_name": "Ethan Kent", "link": "https://stackoverflow.com/users/3396324/ethan-kent"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1512504334, "post_id": 47661306, "comment_id": 82282640, "body": "Okay, got it. If I understand correctly from <a href=\"https://stackoverflow.com/questions/18923515/why-is-hex-base64-so-different-from-base64-hex-using-pack-and-unpack\" title=\"why is hex base64 so different from base64 hex using pack and unpack\">stackoverflow.com/questions/18923515/&hellip;</a>, the hex of the data in the database is &quot;40456e43004010002e479bd18ff8856da12c5cab698ee6eb5a0c8484ae4&zwnj;&#8203;f8e2d8458f0cfa13e02c&zwnj;&#8203;9&quot;."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1512506020, "post_id": 47661306, "comment_id": 82283436, "body": "<b>Updated:</b> Some things are not matching up and some are. 1. <code>&quot;QEVuQwBAEAAuR5vRj&#47;iFbaEsXKtpjubrWgyEhK5Pji2EWPDPoT4CyQ==&quot;</code> decodes to  40 bytes but <code>&quot;Lurline&quot;</code> is 7-characters with padding 16-bytes. Even allowinfg for UTF-16 it would be 14-bytes still padding to 16-bytes. 2. AES encryption &quot;Lurline&quot; (7 characters) in ASCII/UTF-8 would be padded to 16 bytes and the encrypted data would be 16-bytes and matt discovered there is 6-bytes of leading header and <code>&quot;QEVuQwAAlRBeYptjK0Fg76jFQkjLtA==&quot;</code> decodes to 22 bytes  so this works out."}], "answers": [{"comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 2, "creation_date": 1512505724, "post_id": 47662089, "comment_id": 82283293, "body": "Yes, that is it, see Cryptomathic <a href=\"http://extranet.cryptomathic.com/aescalc?key=31323334353637383930414243444546&amp;iv=31323334353637383930414243444546&amp;input=95105E629B632B4160EFA8C54248CBB4&amp;mode=cbc&amp;action=Decrypt&amp;output=936647A2C52E4931181587E7518FFF9A2E229FB59BD98AC34DFBE8A6CAA76DCEDB9CECAFC9B7932E50915C8E2A95F483\" rel=\"nofollow noreferrer\">AES CALCULATOR</a>. But damn, it should not be necessary to look at the source code to find out what it is doing!"}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 6, "last_activity_date": 1519935154, "last_edit_date": 1519935154, "creation_date": 1512505567, "answer_id": 47662089, "question_id": 47661306, "link": "https://stackoverflow.com/questions/47661306/how-do-i-decrypt-data-encrypted-by-rubys-symmetric-encryption-gem-in-another/47662089#47662089", "title": "How do I decrypt data encrypted by Ruby&#39;s `symmetric-encryption` gem in another language?", "body": "<p>Looking at the <a href=\"https://github.com/rocketjob/symmetric-encryption\" rel=\"nofollow noreferrer\">source for the symmetric-encryption gem</a>, by default it <a href=\"https://github.com/rocketjob/symmetric-encryption/blob/v4.0.0/lib/symmetric_encryption/cipher.rb#L266\" rel=\"nofollow noreferrer\">adds a header</a> to the output and <a href=\"https://github.com/rocketjob/symmetric-encryption/blob/v4.0.0/lib/symmetric_encryption/cipher.rb#L139\" rel=\"nofollow noreferrer\">base64 encodes it</a>, although both of these are configurable.</p>\n\n<p>To decrypt using Ruby\u2019s OpenSSL directly, you will need to decode it and strip off this header, <a href=\"https://github.com/rocketjob/symmetric-encryption/blob/v4.0.0/lib/symmetric_encryption/header.rb#L199\" rel=\"nofollow noreferrer\">which is 6 bytes long in this simple case</a>:</p>\n\n<pre><code>ciphertext = Base64.decode64(ciphertext)\nciphertext = ciphertext[6..-1]\n\nc = OpenSSL::Cipher.new(\"aes-128-cbc\")\nc.decrypt\nc.iv = \"1234567890ABCDEF\"\nc.key = \"1234567890ABCDEF\"\n\nresult = c.update(ciphertext) + c.final\n</code></pre>\n\n<p>Of course, you may need to alter this depending on what settings you are using in symmetric-encryption, e.g. the header length may vary. In order to decrypt the result from the database you will need to parse the header. Have a look at the <a href=\"https://github.com/rocketjob/symmetric-encryption/blob/v4.0.0/lib/symmetric_encryption/header.rb#L125-L144\" rel=\"nofollow noreferrer\">source</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 3396324, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/39703398/picture?type=large", "display_name": "Ethan Kent", "link": "https://stackoverflow.com/users/3396324/ethan-kent"}, "is_accepted": false, "score": 2, "last_activity_date": 1520373573, "last_edit_date": 1520373573, "creation_date": 1520364545, "answer_id": 49138576, "question_id": 47661306, "link": "https://stackoverflow.com/questions/47661306/how-do-i-decrypt-data-encrypted-by-rubys-symmetric-encryption-gem-in-another/49138576#49138576", "title": "How do I decrypt data encrypted by Ruby&#39;s `symmetric-encryption` gem in another language?", "body": "<p>Based on the Rust implementation done by @Shepmaster in my <a href=\"https://stackoverflow.com/questions/49054778/how-do-i-get-rusts-openssl-crate-to-decrypt-data-from-the-symmetric-encryption?noredirect=1&amp;lq=1\">other question</a> (and the source code for the <code>symmetric-encryption</code> gem), I have a working version in TypeScript. @matt is close with his answer, but the header can actually have additional bytes containing metadata about the encrypted data. Note that this doesn't handle (1) compressed encrypted data, or (2) setting the encryption algorithm from the header itself; neither situation is relevant to my use case.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { createDecipher, createDecipheriv, Decipher } from \"crypto\";\n\n// We use two types of encoding with SymmetricEncryption: Base64 and UTF-8. We\n// define them in an `enum` for type safety.\nconst enum Encoding {\n    Base64 = \"base64\",\n    Utf8 = \"utf8\",\n}\n\n// Symmetric encryption's header contains the following data:\ninterface IHeader {\n    version: number, // The version of the encryption algo\n    isCompressed: boolean, // Whether the data is compressed (TODO: Implement)\n    hasIv: boolean, // Whether the header itself has the IV\n    hasKey: boolean, // Whether the header itself has the Key\n    hasCipherName: boolean, // Whether the header contains the cipher name\n    hasAuthTag: boolean, // Whether the header has an authorization tag\n    offset: number, // How many bytes into the encoded ciphertext the actual encrypted data starts\n    iv?: Buffer, // The IV, present only if `hasIv` is true\n    key?: Buffer, // The key, present only if `hasKey` is true\n    // The cipher name, present only if `hasCipherName` is true. Currently ignored.\n    cipherName?: string,\n    authTag?: string, // The authorization tag, present only if // `hasAuthTag` is true\n}\n\n// Byte 6 of the header contain bit flags\ninterface IFlags {\n    isCompressed: boolean,\n    hasIv: boolean,\n    hasKey: boolean,\n    hasCipherName: boolean,\n    hasAuthTag: boolean\n}\n\n// The 7th byte until the end of the header have the actual values. If all\n// of the flags are false, the header ends at the 6th byte.\ninterface IValues {\n    iv?: Buffer,\n    key?: Buffer,\n    cipherName?: string,\n    authTag?: string,\n    size: number,\n}\n\n/**\n * Represent the encoded ciphertext, complete with the SymmetricEncryption header.\n */\nclass Ciphertext {\n    // Bit flags corresponding to the data encoded in byte 6 of the\n    // header.\n    readonly FLAG_COMPRESSED = 0b1000_0000;\n    readonly FLAG_IV = 0b0100_0000;\n    readonly FLAG_KEY = 0b0010_0000;\n    readonly FLAG_CIPHER_NAME = 0b0001_0000;\n    readonly FLAG_AUTH_TAG = 0b0000_1000;\n\n    // The literal data encoded in bytes 1 - 4 of the header\n    readonly MAGIC_HEADER = \"@EnC\";\n\n    // If any of the values represented by the bit flags is present, the first 2\n    // bytes of the data tells us how long the actual value is. In other words,\n    // the first 2 bytes aren't the value itself, but rather give the info about\n    // the length of the rest of the value.\n    readonly LENGTH_INFO_SIZE = 2;\n\n    public header: IHeader | null;\n    public data: Buffer;\n\n    private cipherBuffer: Buffer;\n\n    constructor(private input: string) {\n        this.cipherBuffer = new Buffer(input, Encoding.Base64);\n        this.header = this.getHeader();\n        const offset = this.header ? this.header.offset : 0; // If no header, then no offset\n        this.data = this.cipherBuffer.slice(offset);\n    }\n\n    /**\n     * Extract the header from the data\n     */\n    private getHeader(): IHeader | null {\n        let offset = 0;\n\n        // Bytes 1 - 4 are the literal `@EnC`. If that's absent, there's no\n        // SymmetricEncryption header.\n        if (this.cipherBuffer.toString(Encoding.Utf8, offset, offset += 4) != this.MAGIC_HEADER) {\n            return null;\n        }\n\n        // Byte 5 is the version\n        const version = this.cipherBuffer.readInt8(offset++); // Post increment\n\n        // Byte 6 is the flags\n        const rawFlags = this.cipherBuffer.readInt8(offset++);\n        const flags = this.readFlags(rawFlags);\n\n        // Bytes 7 - end are the values.\n        const values = this.getValues(offset, flags);\n\n        offset += values.size;\n\n        return Object.assign({ version, offset }, flags, values);\n    }\n\n    /**\n     * Get the values for `iv`, `key`, `cipherName`, and `authTag`, if any are\n     * set, based on the bitflags. Return that data, plus how many bytes in the\n     * header those values represent.\n     * \n     * @param offset - What byte we're on when we get to the values. Should be 7\n     * @param flags - The flags we've extracted, showing us which values to expect\n     */\n    private getValues(offset: number, flags: IFlags): IValues {\n        let iv: Buffer | undefined = undefined;\n        let key: Buffer | undefined = undefined;\n        let cipherName: string | undefined = undefined;\n        let authTag: string | undefined = undefined;\n\n        let size = 0; // If all of the bit flags are false, there is no additional data.\n\n        // For each value, see if the flag is set to true. If it is, we need to\n        // read the value. Keys and IVs need to be `Buffer` types; other values\n        // should be strings.\n        [iv, size] = flags.hasIv ? this.readBuffer(offset) : [undefined, size];\n        [key, size] = flags.hasKey ? this.readBuffer(offset + size) : [undefined, size];\n        [cipherName, size] = flags.hasCipherName ? this.readString(offset + size) : [undefined, size];\n        [authTag, size] = flags.hasAuthTag ? this.readString(offset + size) : [undefined, size];\n\n        return { iv, key, cipherName, authTag, size };\n    }\n\n    /**\n     * Parse the 16-bit integer representing the bit flags into an object for\n     * easier handling\n     * \n     * @param flags - The 16-bit integer that contains the bit flags\n     */\n    private readFlags(flags: number): IFlags {\n        return {\n            isCompressed: (flags &amp; this.FLAG_COMPRESSED) != 0,\n            hasIv: (flags &amp; this.FLAG_IV) != 0,\n            hasKey: (flags &amp; this.FLAG_KEY) != 0,\n            hasCipherName: (flags &amp; this.FLAG_CIPHER_NAME) != 0,\n            hasAuthTag: (flags &amp; this.FLAG_AUTH_TAG) != 0\n        }\n    }\n\n    /**\n     * Read a string out of the value at the specified offset. Return the value\n     * itself, plus the number of bytes consumed by the value (including the\n     * 2-byte encoding of the length of the actual value).\n     * \n     * @param offset - The offset (bytes from the beginning of the encoded,\n     * encrypted Buffer) at which the value in question begins\n     */\n    private readString(offset: number): [string, number] {\n        // The length is the first 2 bytes, encoded as a little-endian 16-bit integer\n        const length = this.cipherBuffer.readInt16LE(offset);\n        // The total size occupied in the header is the 2 bytes encoding length plus the length itself\n        const size = this.LENGTH_INFO_SIZE + length;\n\n        const value = this.cipherBuffer.toString(Encoding.Base64, offset + this.LENGTH_INFO_SIZE, offset + size);\n        return [value, size];\n    }\n\n    /**\n     * Read a Buffer out of the value at the specified offset. Return the value\n     * itself, plus the number of bytes consumed by the value (including the\n     * 2-byte encoding of the length of the actual value).\n     * \n     * @param offset - The offset (bytes from the beginning of the encoded,\n     * encrypted Buffer) at which the value in question begins\n     */\n    private readBuffer(offset: number): [Buffer, number] {\n        // The length is the first 2 bytes, encoded as a little-endian 16-bit integer\n        const length = this.cipherBuffer.readInt16LE(offset);\n        // The total size occupied in the header is the 2 bytes encoding length plus the length itself\n        const size = this.LENGTH_INFO_SIZE + length;\n\n        const value = this.cipherBuffer.slice(offset + this.LENGTH_INFO_SIZE, offset + size);\n        return [value, size];\n    }\n}\n\n/**\n * Allow decryption of data encrypted by Ruby's `symmetric-encryption` gem\n */\nclass SymmetricEncryption {\n    private key: Buffer;\n    private iv?: Buffer;\n\n    constructor(key: string, private algo: string, iv?: string) {\n        this.key = new Buffer(key);\n        this.iv = iv ? new Buffer(iv) : undefined;\n    }\n\n    public decrypt(input: string): string {\n        const ciphertext = new Ciphertext(input);\n\n        // IV can be specified by the user. But if it's encoded in the header\n        // itself, go with that instead.\n        const iv = (ciphertext.header &amp;&amp; ciphertext.header.iv) ? ciphertext.header.iv : this.iv;\n\n        // Key can be specified by the user. but if it's encoded in the header,\n        // go with that instead.\n        const key = (ciphertext.header &amp;&amp; ciphertext.header.key) ? ciphertext.header.key : this.key;\n\n        const decipher: Decipher = iv ?\n            createDecipheriv(this.algo, key, iv) :\n            createDecipher(this.algo, key);\n\n        // Terse version of `update()` + `final()` that passes type checking\n        return Buffer.concat([decipher.update(ciphertext.data), decipher.final()]).toString();\n    }\n}\n\nconst s = new SymmetricEncryption(\"1234567890ABCDEF\", \"aes-128-cbc\", \"1234567890ABCDEF\");\n\nconsole.log(s.decrypt(\"QEVuQwAADWK0cKzgFIovdIThq9Scrg==\")); // =&gt; \"Hello world\"\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 3396324, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/39703398/picture?type=large", "display_name": "Ethan Kent", "link": "https://stackoverflow.com/users/3396324/ethan-kent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1406, "favorite_count": 0, "accepted_answer_id": 47662089, "answer_count": 2, "score": 4, "last_activity_date": 1520373573, "creation_date": 1512502396, "last_edit_date": 1512503934, "question_id": 47661306, "link": "https://stackoverflow.com/questions/47661306/how-do-i-decrypt-data-encrypted-by-rubys-symmetric-encryption-gem-in-another", "title": "How do I decrypt data encrypted by Ruby&#39;s `symmetric-encryption` gem in another language?", "body": "<p>I want to access data in a database created by Rails for use by non-Ruby code. Some fields use <code>attr_encrypted</code> accessors, and the library in use is the <code>symmetric-encryption</code> gem. I consistently get a \"wrong final block length\" error if I try to decrypt the data with, e.g., the NodeJS <code>crypto</code> library. </p>\n\n<p>I suspect this has to do either with character encoding or with padding, but I can't figure it out based on the docs.</p>\n\n<p>As an experiment, I tried decrypting data from <code>symmetric-encryption</code> in Ruby's own OpenSSL library, and I get either a \"bad decrypt\" error or the same problem:</p>\n\n<pre><code>SymmetricEncryption.cipher = SymmetricEncryption::Cipher.new(\n  key: \"1234567890ABCDEF\",\n  iv:  \"1234567890ABCDEF\",\n  cipher_name: \"aes-128-cbc\"\n)\n\nciphertext = SymmetricEncryption.encrypt(\"Hello world\")\n\nc = OpenSSL::Cipher.new(\"aes-128-cbc\")\nc.iv = c.key = \"1234567890ABCDEF\"\nc.update(ciphertext) + c.final\n</code></pre>\n\n<p>That gives me a \"bad decrypt\" error.</p>\n\n<p>Interestingly, the encrypted data in the database can be decrypted by the <code>symmetric-encryption</code> gem, but isn't the same as the output of <code>SymmetricEncryption.encrypt</code> (and OpenSSL doesn't successfully decrypt it, either).</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<pre><code>psql=# SELECT \"encrypted_firstName\" FROM people LIMIT 1;\n                   encrypted_firstName                    \n----------------------------------------------------------\n QEVuQwBAEAAuR5vRj/iFbaEsXKtpjubrWgyEhK5Pji2EWPDPoT4CyQ==\n(1 row)\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>irb&gt; SymmetricEncryption.decrypt \"QEVuQwBAEAAuR5vRj/iFbaEsXKtpjubrWgyEhK5Pji2EWPDPoT4CyQ==\"\n=&gt; \"Lurline\"\nirb&gt; SymmetricEncryption.encrypt \"Lurline\"\n=&gt; \"QEVuQwAAlRBeYptjK0Fg76jFQkjLtA==\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "edited": false, "score": 1, "creation_date": 1512501847, "post_id": 47660976, "comment_id": 82281333, "body": "type &#39;ruby -v&#39; and &#39;which bundle&#39; in console, what do they say?"}], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "is_accepted": false, "score": 0, "last_activity_date": 1512502576, "creation_date": 1512502576, "answer_id": 47661357, "question_id": 47660976, "link": "https://stackoverflow.com/questions/47660976/ruby-on-rails-bundler-issues-loaderror/47661357#47661357", "title": "Ruby on Rails Bundler issues LoadError", "body": "<p>Have you tried to uninstall all old versions of bundler with <code>gem uninstall bundler</code>?</p>\n"}], "owner": {"reputation": 63, "user_id": 6447726, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10209275822469633/picture?type=large", "display_name": "Fabien Bessez", "link": "https://stackoverflow.com/users/6447726/fabien-bessez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512502576, "creation_date": 1512501079, "question_id": 47660976, "link": "https://stackoverflow.com/questions/47660976/ruby-on-rails-bundler-issues-loaderror", "title": "Ruby on Rails Bundler issues LoadError", "body": "<p>I believe I am having some PATH issues for my gems.</p>\n\n<p>I am using rvm (version 1.29.3) with ruby (version 2.4.1) and rails (version 5.1.4)</p>\n\n<p>I tried to run <code>rails new myapp</code> to which I get the following LoadErrors:</p>\n\n<pre><code>remove  config/initializers/new_framework_defaults_5_1.rb\nrun  bundle install\n   /Users/fabienbessez/.rvm/rubies/ruby-2.4.1/bin/ruby: No such file or directory \n-- /Users/fabienbessez/.rvm/rubies/ruby-\n   2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.16.0/exe/bundle (LoadError)\nrun  bundle exec spring binstub --all\n   /Users/fabienbessez/.rvm/rubies/ruby-2.4.1/bin/ruby: No such file or directory \n   -- /Users/fabienbessez/.rvm/rubies/ruby \n   2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.16.0/exe/bundle (LoadError)\n</code></pre>\n\n<p>I get the same error when I try to then run <code>bundle install</code></p>\n\n<p>I checked the contents of <code>~/.rvm/rubies/ruby-2.4.1/lib/ruby/gems/2.4.0/gems</code> to which I found that <code>bundler-1.15.4</code> but not <code>bundler-1.16.0</code>. I assume that that is the issue. But I can't figure out how to update those gems. <code>gem install bundler</code> says it has installed bundler 1.16.0 but this is not being updated. </p>\n\n<p>Any ideas??</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["mysql", "ruby", "join", "model", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "edited": false, "score": 0, "creation_date": 1512608421, "post_id": 47678629, "comment_id": 82331631, "body": "I don&#39;t know why, but when I try the above statement, it&#39;s saying <code>undefined method &#39;node_id&#39; for #&lt;MyApp::Model::Node:0x37ae1d57&gt;</code>. Seems to be trying to interpret <code>node_id</code> as a method"}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1512576310, "creation_date": 1512576310, "answer_id": 47678629, "question_id": 47660842, "link": "https://stackoverflow.com/questions/47660842/changing-a-complex-join-into-a-sequel-association/47678629#47678629", "title": "Changing a complex join into a Sequel association", "body": "<p>If you have the association in <code>SystemStatus</code>, you need to use <code>many_to_one</code>, as the foreign key is in the that model's table, not the associated model's table.  You can just transfer your where condition to the association using a block:</p>\n\n<pre><code>SystemStatus.many_to_one :live_node, class: :Node, key: :node_id do |ds|\n  ds.where{last_heartbeat &gt; Time.now - HEARTBEAT_TIMEOUT.seconds}\nend\n</code></pre>\n"}], "owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512576310, "creation_date": 1512500489, "question_id": 47660842, "link": "https://stackoverflow.com/questions/47660842/changing-a-complex-join-into-a-sequel-association", "title": "Changing a complex join into a Sequel association", "body": "<p>Right now I have a relatively complex piece of code (it's not that complex) that I'd like to simplify through Sequel associations</p>\n\n<pre><code>MyApp::Model::Node.where { last_heartbeat &gt; Time.now - HEARTBEAT_TIMEOUT.seconds }.join(:system_status, node_id: Sequel.expr(:node__id))\n</code></pre>\n\n<p>Pretty nasty, this statement. </p>\n\n<p>So I'd like to accomplish one thing, pretty much: simplify the above statement by replacing the join with an association in my <code>SystemStatus</code> Model. </p>\n\n<p>Let me explain the above join:</p>\n\n<p>I have two tables <code>Node</code> and <code>SystemStatus</code>. The comparison <code>last_heartbeat &gt; Time.now - HEARTBEAT_TIMEOUT.seconds</code> essentially gives me all the \"live nodes\" in my application (my application is clustered, meaning the user can spawn multiple instances of it at the same time).</p>\n\n<p>So that mess of a statement gives me \"all the statuses of my live nodes\" which is joined by <code>system_status.node_id</code> to <code>node.id</code>. </p>\n\n<p>So I started this out by establishing my one to one relation in <code>SystemStatus</code> - this sets the association to the <code>node</code> table</p>\n\n<pre><code>one_to_one :node\n</code></pre>\n\n<p>Next, I needed to join it by a specific key <code>node.id</code> because it's not a straightforward join</p>\n\n<pre><code>one_to_one :node, key: :id\n</code></pre>\n\n<p>But my question is:</p>\n\n<ol>\n<li><p>How do I do the rest of this association</p></li>\n<li><p>Should I perform the association in <code>Node</code> as opposed to <code>SystemStatus</code>? It seems I could simply do <code>one_to_one :system_status</code> and not have to specify a key.. The above complex join resides in the <code>node</code> Model anyways.</p></li>\n</ol>\n"}, {"tags": ["ruby", "api", "sms", "messagebird"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1512504542, "post_id": 47660779, "comment_id": 82282753, "body": "Have you checked the value of that <code>@document.id.to_s</code>?"}, {"owner": {"reputation": 145, "user_id": 8615460, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10209612018527286/picture?type=large", "display_name": "Antoine Wako", "link": "https://stackoverflow.com/users/8615460/antoine-wako"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1512507456, "post_id": 47660779, "comment_id": 82284156, "body": "Yes @SebastianPalma, i think the problem from them, i create a new account and it works with the test credits"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1512507621, "post_id": 47660779, "comment_id": 82284246, "body": "You can use <code>byebug</code> before the message initialization and to check what&#39;s really the value of @document, or @document.id at that point, because aren&#39;t you seeing nothing in the logs?"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 8615460, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10209612018527286/picture?type=large", "display_name": "Antoine Wako", "link": "https://stackoverflow.com/users/8615460/antoine-wako"}, "edited": false, "score": 1, "creation_date": 1514925398, "post_id": 47934021, "comment_id": 83108434, "body": "Its from there security system, if its worked with the free credits and since you have &quot;prenium&quot; account you must contact the support"}, {"owner": {"reputation": 44, "user_id": 5591854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205a30dc87df9b1e49924f6c4f9dcc8d?s=128&d=identicon&r=PG", "display_name": "fatima", "link": "https://stackoverflow.com/users/5591854/fatima"}, "reply_to_user": {"reputation": 145, "user_id": 8615460, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10209612018527286/picture?type=large", "display_name": "Antoine Wako", "link": "https://stackoverflow.com/users/8615460/antoine-wako"}, "edited": false, "score": 0, "creation_date": 1515157908, "post_id": 47934021, "comment_id": 83204407, "body": "thank you for your reply , yes it was a security problem i contacted the support and the problem was fixed"}, {"owner": {"reputation": 55, "user_id": 8838871, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174432309356385/picture?type=large", "display_name": "Youssef El Garny", "link": "https://stackoverflow.com/users/8838871/youssef-el-garny"}, "edited": false, "score": 0, "creation_date": 1588115528, "post_id": 47934021, "comment_id": 108775682, "body": "hi, please how they fixed the problem for you?"}, {"owner": {"reputation": 44, "user_id": 5591854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205a30dc87df9b1e49924f6c4f9dcc8d?s=128&d=identicon&r=PG", "display_name": "fatima", "link": "https://stackoverflow.com/users/5591854/fatima"}, "edited": false, "score": 1, "creation_date": 1588210036, "post_id": 47934021, "comment_id": 108815124, "body": "I contacted the support directly"}], "tags": [], "owner": {"reputation": 44, "user_id": 5591854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205a30dc87df9b1e49924f6c4f9dcc8d?s=128&d=identicon&r=PG", "display_name": "fatima", "link": "https://stackoverflow.com/users/5591854/fatima"}, "is_accepted": true, "score": 1, "last_activity_date": 1513898432, "creation_date": 1513898432, "answer_id": 47934021, "question_id": 47660779, "link": "https://stackoverflow.com/questions/47660779/link-in-message-bird-message-never-deliverd/47934021#47934021", "title": "Link in message bird message never deliverd", "body": "<p>I encounter the same problem , please what solution works for you?</p>\n"}], "owner": {"reputation": 145, "user_id": 8615460, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10209612018527286/picture?type=large", "display_name": "Antoine Wako", "link": "https://stackoverflow.com/users/8615460/antoine-wako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "accepted_answer_id": 47934021, "answer_count": 1, "score": 1, "last_activity_date": 1525402630, "creation_date": 1512500139, "last_edit_date": 1525402630, "question_id": 47660779, "link": "https://stackoverflow.com/questions/47660779/link-in-message-bird-message-never-deliverd", "title": "Link in message bird message never deliverd", "body": "<p>Hi i would know how make my links work in my SMS with MessageBird</p>\n\n<p>I send messages like this:</p>\n\n<pre><code>message = \"Hello http://foxfinder.fr/documents/\"+@document.id.to_s+\".pdf\"\n            client = MessageBird::Client.new('KEY')\n            client.message_create('FoxFinder', '+33647654886', message, :reference =&gt; 'Foobar')\n</code></pre>\n\n<p>When i dont add link the message is send and delivered but when i add a link with a '/' in it, the message is send but never delivered</p>\n\n<p>UPDATE</p>\n\n<p>I solve the problem, it was security check from messagebird</p>\n"}, {"tags": ["ruby", "capistrano"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1512500141, "post_id": 47660549, "comment_id": 82280459, "body": "do you have the gem <code>rack</code>? maybe <code>bundle exec rackup</code> instead?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1512500347, "post_id": 47660549, "comment_id": 82280561, "body": "do I need the gem rackup? I don&#39;t have it locally, neither in my Gemfile but it works locally. Do I need it?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1512500482, "post_id": 47660549, "comment_id": 82280629, "body": "When I <code>ssh</code> onto the remote server and do <code>rackup -p 9210</code> it works perfectly fine."}, {"owner": {"reputation": 452, "user_id": 2075165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CBx1B.jpg?s=128&g=1", "display_name": "Tomasz Giba", "link": "https://stackoverflow.com/users/2075165/tomasz-giba"}, "edited": false, "score": 1, "creation_date": 1512501981, "post_id": 47660549, "comment_id": 82281408, "body": "It may be that capistrano uses different user than you are. Presumably it&#39;s <code>deploy</code>. Maybe check <code>rackup</code> availability for <code>deploy</code> user?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1512502375, "post_id": 47660549, "comment_id": 82281605, "body": "I don&#39;t have a deploy user at this time. It&#39;s root."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1512562861, "post_id": 47660549, "comment_id": 82307080, "body": "<code>which rvm</code>: /usr/local/rvm/bin/rvm, <code>which rackup</code>: /usr/local/rvm/gems/ruby-2.3.0/bin/rackup. Everything set up correctly so why does this task not work?"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512499189, "creation_date": 1512499189, "question_id": 47660549, "link": "https://stackoverflow.com/questions/47660549/capistrano-task-to-start-sinatra", "title": "Capistrano task to start Sinatra", "body": "<p>I have a simple Sinatra app which I run locally by `rackup -p 9210' command and I want to write a capistrano task which, after deployment to my server, will start my Sinatra app just I would do locally.</p>\n\n<p>Here'is my task:</p>\n\n<pre><code>desc 'Start application'\n  task :start do\n    on roles(:app), in: :sequence, wait: 5 do\n      within '/my/app/folder/' do\n        execute \"rackup -p 9210\"\n    end\n  end\nend\n</code></pre>\n\n<p>but it errors out with the message:</p>\n\n<pre><code>Caused by:\nSSHKit::Command::Failed: rackup -p 9210 exit status: 127\nrackup -p 9210 stdout: Nothing written\nrackup -p 9210 stderr: bash: rackup: command not found\n</code></pre>\n\n<p>I have tried executing this command:</p>\n\n<pre><code>desc 'Start application'\n  task :start do\n    on roles(:app), in: :sequence, wait: 5 do\n       execute \"cd /my/app/folder/ &amp;&amp; rackup -p 9210\"\n    end\n  end\nend\n</code></pre>\n\n<p>but got the same error message. \nMy Cap file:</p>\n\n<pre><code>require 'capistrano/setup'\nrequire 'capistrano/deploy'\nrequire 'capistrano/bundler'\nrequire 'capistrano/rvm'\n\nset :rvm_type, :user\nset :rvm_ruby_version, '2.3.0p0'\n\nDir.glob('lib/capistrano/tasks/*.cap').each { |r| import r }\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "captcha", "nested-form-for"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1512500393, "post_id": 47660461, "comment_id": 82280581, "body": "<code>Captcha.find(rand(1..3))</code> -- Does this sound like a good idea to you, from a security perspective? If you&#39;re building this &quot;just for fun&quot; then fair enough, but from a security standpoint your implementation sounds incredibly easy to bypass."}, {"owner": {"reputation": 213, "user_id": 8725207, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7f4084b5adc3677e77b5b27ca8710db4?s=128&d=identicon&r=PG&f=1", "display_name": "john seymour ", "link": "https://stackoverflow.com/users/8725207/john-seymour"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512503652, "post_id": 47660461, "comment_id": 82282302, "body": "No no this is purely for fun/learning."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1512505908, "post_id": 47660461, "comment_id": 82283384, "body": "Do you know how other Captcha APIs work? It would be a good starting point to understand that, before trying to build your own. (A &quot;naive&quot; implementation could be <i>even easier</i> to bypass!)"}], "owner": {"reputation": 213, "user_id": 8725207, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7f4084b5adc3677e77b5b27ca8710db4?s=128&d=identicon&r=PG&f=1", "display_name": "john seymour ", "link": "https://stackoverflow.com/users/8725207/john-seymour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531371226, "creation_date": 1512498855, "last_edit_date": 1531371226, "question_id": 47660461, "link": "https://stackoverflow.com/questions/47660461/integrating-a-homemade-captcha-to-sign-up-and-sign-in", "title": "integrating a homemade captcha to sign up and sign in?", "body": "<p>So I have a basic sign up, sign in site with username and password. I don't want to use recaptcha and was wondering whether i can create my own? \nSo have for example 'what colour is an orange'. </p>\n\n<p>I was wondering how you could integrate this (if you can that is) into the form_for as it wouldn't be part of the @user object and throws an error.</p>\n\n<p>Here is the controller</p>\n\n<pre><code>def new\n @user = User.new\n @captcha = Captcha.find(rand(1..3))\nend\n\ndef create\n @user = User.new(user_params)\n if @user.save\n  session[:user_id] = @user.id\n  redirect_to root_path\n else\n  render 'new'\n end\nend\n\nprivate\n\ndef user_params\n params.require(:user).permit(:username, :password, :release_pin)\nend\n</code></pre>\n\n<p>Here is the view</p>\n\n<pre><code>    &lt;div class=\"sign-in-form\"&gt;\n      &lt;%= form_for @user do |form| %&gt;\n        &lt;div class=\"form-text\"&gt;\n          &lt;%= form.label :username %&gt; &lt;br&gt;\n          &lt;%= form.text_field :username %&gt;\n        &lt;/div&gt;\n        &lt;br&gt;\n        &lt;div class=\"form-text\"&gt;\n          &lt;%= form.label :password %&gt; &lt;br&gt;\n          &lt;%= form.text_field :password %&gt;\n        &lt;/div&gt;\n        &lt;br&gt;\n\n     ############## this here obviously throws \n     an error but this is the kind of thing i would want #########\n\n\n        &lt;div class=\"form-text\"&gt;\n          &lt;p&gt; &lt;%=@captcha.question%&gt; &lt;/p&gt;   \n          &lt;%= form.text_field :captcha_answer %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-text\"&gt;\n          &lt;%= form.submit \"Submit\" %&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>I've looked into nested forms but don't think that's the correct answer... but I could wrong as I'm only a beginner. thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3894, "user_id": 1121568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13eedc2642303b1a2251a4da7f157e?s=128&d=identicon&r=PG", "display_name": "Steven Schobert", "link": "https://stackoverflow.com/users/1121568/steven-schobert"}, "edited": false, "score": 1, "creation_date": 1512497153, "post_id": 47659904, "comment_id": 82278745, "body": "Can you explain in more detail what specifically isn&#39;t working? Are you seeing any errors? What happens vs. what do you expect to happen?"}], "answers": [{"tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": false, "score": 0, "last_activity_date": 1512497683, "creation_date": 1512497683, "answer_id": 47660153, "question_id": 47659904, "link": "https://stackoverflow.com/questions/47659904/search-box-not-appearing-on-rails-application/47660153#47660153", "title": "Search box not appearing on rails application", "body": "<p>The form is not displaying because it's being evaluated via <code>&lt;%</code>, which only executes the code without returning a value to print to the page. Try using <code>&lt;%=</code> instead, like so:</p>\n\n<pre><code>&lt;%= form_tag(profiles_path, :method =&gt; \"get\", id: \"search-form\") do %&gt;\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 304, "user_id": 1174641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25586ebb16415e024c63037954a274e7?s=128&d=identicon&r=PG", "display_name": "JEMaddux", "link": "https://stackoverflow.com/users/1174641/jemaddux"}, "is_accepted": false, "score": 0, "last_activity_date": 1512502902, "creation_date": 1512502902, "answer_id": 47661450, "question_id": 47659904, "link": "https://stackoverflow.com/questions/47659904/search-box-not-appearing-on-rails-application/47661450#47661450", "title": "Search box not appearing on rails application", "body": "<p>In ERB <code>&lt;% code here %&gt;</code> tags won't display. You need to change it to <code>&lt;%= code here %&gt;</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9056634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9908928768916dd28aa85cd69c238f?s=128&d=identicon&r=PG&f=1", "display_name": "Taz", "link": "https://stackoverflow.com/users/9056634/taz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512502902, "creation_date": 1512496842, "last_edit_date": 1512497096, "question_id": 47659904, "link": "https://stackoverflow.com/questions/47659904/search-box-not-appearing-on-rails-application", "title": "Search box not appearing on rails application", "body": "<p>I'm attempting to launch an MVC project on ruby on rails. Having a few issues.\nSpecifically with the search functionality. This is for a rental website. but unable to get the search box to appear and work.</p>\n\n<p>I have 3 models items, profile and users.\nSpecifically I want to be able to search users by first name and last name.</p>\n\n<p>Within the profile model I have:</p>\n\n<pre><code>def self.search(search)\n  where(\"lastname LIKE ?\", \"%#{search}%\")\nend\n</code></pre>\n\n<p>Within in the profile_controller I have:</p>\n\n<pre><code>def index\n  if params[:search]\n    @profiles = Profile.search(params[:search]).order(\"created_at DESC\")\n  else  \n   @profiles = Profile.all.order(\"created_at DESC\")\n  end\nend\n</code></pre>\n\n<p>The application has the following code layout <code>application.html</code> page:</p>\n\n<pre><code>&lt;p&gt; search &lt;/p&gt;\n&lt;% form_tag(profiles_path, :method =&gt; \"get\", id: \"search-form\") do %&gt;\n&lt;%= text_field_tag :search, params[:search], placeholder: \"Search Profile by Lastname\" %&gt;\n&lt;%= submit_tag \"Search\" %&gt;\n</code></pre>\n\n<p>Would also like to extend this further to see what items the users have rented as well.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 4, "creation_date": 1512496130, "post_id": 47659227, "comment_id": 82278115, "body": "Could you post the code providing the link to your <code>destroy</code> action please? It looks as if this is passing the wrong <code>id</code> to the <code>params</code>, but I&#39;m not sure without seeing that :) Edit: also, the relevant content of <code>routes.rb</code> would help out."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1512499031, "post_id": 47659227, "comment_id": 82279904, "body": "@SRack information updated..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "edited": false, "score": 0, "creation_date": 1512502258, "post_id": 47660939, "comment_id": 82281555, "body": "Yes sir this works.  I greatly appreciate your help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "edited": false, "score": 0, "creation_date": 1512502371, "post_id": 47660939, "comment_id": 82281602, "body": "rails console Avatar.all displays: [#&lt;Avatar id: 5, avatarpic: &quot;cat_astronaut.jpg&quot;, user_id: 1, created_at: &quot;2017-12-05 19:32:51&quot;, updated_at: &quot;2017-12-05 19:32:51&quot;&gt;]  The Avatar id is still incrementing even though I delete the avatar.  The page is displaying properly at least.  No error messages."}, {"owner": {"reputation": 1325, "user_id": 3295284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdP8.jpg?s=128&g=1", "display_name": "patkoperwas", "link": "https://stackoverflow.com/users/3295284/patkoperwas"}, "edited": false, "score": 0, "creation_date": 1512503385, "post_id": 47660939, "comment_id": 82282149, "body": "Yes, IDs are never re-used even if you delete the object. New objects always get a new ID"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "edited": false, "score": 0, "creation_date": 1512505503, "post_id": 47660939, "comment_id": 82283177, "body": "Interesting.  Thank you so much!"}], "tags": [], "owner": {"reputation": 1325, "user_id": 3295284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdP8.jpg?s=128&g=1", "display_name": "patkoperwas", "link": "https://stackoverflow.com/users/3295284/patkoperwas"}, "is_accepted": true, "score": 1, "last_activity_date": 1512505813, "last_edit_date": 1512505813, "creation_date": 1512500925, "answer_id": 47660939, "question_id": 47659227, "link": "https://stackoverflow.com/questions/47659227/delete-avatar-from-database/47660939#47660939", "title": "Delete Avatar from Database", "body": "<p>Your <code>link_to</code> is missing the <code>avatar_id</code>. Change</p>\n\n<pre><code>user_avatar_path(@user)\n</code></pre>\n\n<p>To</p>\n\n<pre><code>user_avatar_path(@user, @user.avatar)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 47660939, "answer_count": 1, "score": 2, "last_activity_date": 1512505813, "creation_date": 1512494441, "last_edit_date": 1512498934, "question_id": 47659227, "link": "https://stackoverflow.com/questions/47659227/delete-avatar-from-database", "title": "Delete Avatar from Database", "body": "<p>I have created a destroy action for my user profile picture. The destroy action works properly and the photo is deleted. I can add another picture without any problem, but when I try to delete the picture again I receive the following error message:</p>\n\n<p>Couldn't find Avatar with 'id'=1</p>\n\n<p>This is what is stored in my database Avatar.all reads:</p>\n\n<pre><code>[#&lt;Avatar id: 2, avatarpic: \"cat_astronaut.jpg\", user_id: 1, created_at: \"2017-12-05 17:02:08\", updated_at: \"2017-12-05 17:02:08\"&gt;]\n</code></pre>\n\n<p>The id is at 2 and not 1, even though I successfully deleted the first  picture with an id of 1. Every time I delete a picture and upload a new one, the id is incremented. So when I try to delete the second uploaded picture, it can't find the right id.  I need the id to be reset to 1 every time I delete the picture.</p>\n\n<p>Controller is as follows:</p>\n\n<pre><code>class AvatarsController &lt; ApplicationController\n\n  def create\n    @user = User.find(params[:user_id])\n    @avatar = Avatar.new(avatar_params)\n    @avatar.user = @user\n    @avatar.save\n    # Three lines above can be replaced with \n    # @user.create_avatar(params)\n    redirect_to user_path(@user)\n  end\n\ndef destroy\n  @user = User.find(params[:user_id])\n  @avatar = Avatar.find(params[:id])\n  @avatar.user = @user\n  @avatar.destroy\n  redirect_to user_path(@user)\nend\n\nprivate\n\ndef avatar_params\n  params.require(:avatar).permit(:avatarpic)\nend\n\nend\n</code></pre>\n\n<p>There is only 1 photo according to my user model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :places\n  has_many :comments, dependent: :destroy\n  has_one :avatar, dependent: :destroy\nend\n</code></pre>\n\n<p>Code for User's view profile page:</p>\n\n<pre><code>&lt;%= link_to user_avatar_path(@user), :title =&gt; \"Upload New Photo\", method: :delete, data: { confirm: 'Are you sure you want to change your Photo?' } do %&gt;\n  &lt;%= image_tag @user.avatar.avatarpic %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>rake routes:</p>\n\n<pre><code>root GET    /                                     places#index\n          place_comments POST   /places/:place_id/comments(.:format)  comments#create\n            place_photos POST   /places/:place_id/photos(.:format)    photos#create\n                  places GET    /places(.:format)                     places#index\n                         POST   /places(.:format)                     places#create\n               new_place GET    /places/new(.:format)                 places#new\n              edit_place GET    /places/:id/edit(.:format)            places#edit\n                   place GET    /places/:id(.:format)                 places#show\n                         PATCH  /places/:id(.:format)                 places#update\n                         PUT    /places/:id(.:format)                 places#update\n                         DELETE /places/:id(.:format)                 places#destroy\n            user_avatars POST   /users/:user_id/avatars(.:format)     avatars#create\n             user_avatar DELETE /users/:user_id/avatars/:id(.:format) avatars#destroy\n                    user GET    /users/:id(.:format)                  users#show\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  root 'places#index'\n  resources :places do\n    resources :comments, only: :create\n    resources :photos, only: :create\n  end\n  resources :users, only: [:show] do\n    resources :avatars, only: [:create]\n    resources :avatars, only: [:destroy]\n    # or resources :avatars, only: [:create, :destroy]\nend \nend\n</code></pre>\n\n<p>Avatar Model:</p>\n\n<pre><code>class Avatar &lt; ApplicationRecord\n  belongs_to :user\n  mount_uploader :avatarpic, AvatarUploader\nend\n</code></pre>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["ruby", "refactoring"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 5, "creation_date": 1512498218, "post_id": 47658797, "comment_id": 82279406, "body": "Working code is a better fit for <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1512498519, "post_id": 47658797, "comment_id": 82279600, "body": "What is <code>@array</code> and where did it come from? I would look into using scopes and doing some of the lifting in ActiveRecord if possible."}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1512665569, "post_id": 47658797, "comment_id": 82359835, "body": "I&#39;m voting to close this question as off-topic because it belongs on codereview.stackexchange.com"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9033985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452bccdefd75a64dd3134c681dd210b9?s=128&d=identicon&r=PG&f=1", "display_name": "Leo lou", "link": "https://stackoverflow.com/users/9033985/leo-lou"}, "edited": false, "score": 0, "creation_date": 1512495894, "post_id": 47659043, "comment_id": 82277962, "body": "your code helped a lot. I will submit to code climate and verify if it pass"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1512493768, "creation_date": 1512493768, "answer_id": 47659043, "question_id": 47658797, "link": "https://stackoverflow.com/questions/47658797/how-to-refactor-and-reduce-complexity/47659043#47659043", "title": "How to refactor and reduce complexity", "body": "<pre><code>def grouped\n   @array.each_with_object(Hash.new { |h, k| h[k] = [] }) do |r, grouped|\n     case field = r.car.send(@model)\n     when ActiveRecord::Associations::CollectionProxy\n        field.each do |obj|\n          grouped[obj.send(@attribute)] &lt;&lt; r\n        end\n     else\n       grouped[field.send(@attribute)] &lt;&lt; r\n     end\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9033985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452bccdefd75a64dd3134c681dd210b9?s=128&d=identicon&r=PG&f=1", "display_name": "Leo lou", "link": "https://stackoverflow.com/users/9033985/leo-lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512531942, "creation_date": 1512492987, "last_edit_date": 1512531942, "question_id": 47658797, "link": "https://stackoverflow.com/questions/47658797/how-to-refactor-and-reduce-complexity", "title": "How to refactor and reduce complexity", "body": "<p>I have the following code:</p>\n\n<pre><code>@model = \"ford\"\n@attribute = \"name\"\n\ndef grouped\n   grouped = {}\n\n   @array.each do |r|\n     field = r.car.send(@model)\n\n     if field.is_a? ActiveRecord::Associations::CollectionProxy\n        field.each do |obj|\n           key = obj.send(@attribute)\n           grouped[key] = [] unless grouped.has_key?(key)\n           grouped[key].push(r)\n       end\n     else\n       key = field.send(@attribute)\n       grouped[key] = [] unless grouped.has_key?(key)\n       grouped[key].push(r)\n     end\n   end\n\n  grouped\nend\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>{ford: [a, b, c]}\n</code></pre>\n\n<p>The codeclimate says that it has cognitive complexity.</p>\n\n<p>How can I refactor this method to something cleaner?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "answers": [{"tags": [], "owner": {"reputation": 2421, "user_id": 8110396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kRd8sbkFS6c/AAAAAAAAAAI/AAAAAAAAAcU/9sHJrKIjxaU/photo.jpg?sz=128", "display_name": "Rik Schoonbeek", "link": "https://stackoverflow.com/users/8110396/rik-schoonbeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1533820595, "creation_date": 1533820595, "answer_id": 51768088, "question_id": 47658217, "link": "https://stackoverflow.com/questions/47658217/how-to-perform-a-partial-match-query-in-elasticsearch/51768088#51768088", "title": "How to perform a partial match query in ElasticSearch?", "body": "<p>I had the exact same question, these pages in the official ElasticSearch documentation explain quite well how to achieve this:</p>\n\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/_ngrams_for_partial_matching.html\" rel=\"nofollow noreferrer\">Ngrams for Partial Matching</a></p>\n\n<p>That page links to the following page, which gives a great example of how to achieve what you want:</p>\n\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/ngrams-compound-words.html\" rel=\"nofollow noreferrer\">Ngrams for Compound Words</a></p>\n\n<p>These links are both part of the following chapter in the ES documentation:</p>\n\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/partial-matching.html\" rel=\"nofollow noreferrer\">Partial Matching</a></p>\n"}], "owner": {"reputation": 1660, "user_id": 4051942, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/bCeCe.png?s=128&g=1", "display_name": "Marcelo Ribeiro", "link": "https://stackoverflow.com/users/4051942/marcelo-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533820595, "creation_date": 1512491031, "last_edit_date": 1512492067, "question_id": 47658217, "link": "https://stackoverflow.com/questions/47658217/how-to-perform-a-partial-match-query-in-elasticsearch", "title": "How to perform a partial match query in ElasticSearch?", "body": "<p>I have been trying to perform a partial match query in ElasticSearch but haven't been successful yet (despite my attempts to follow instructions on similar questions here in SO). </p>\n\n<p>I have an index with 5 fields:</p>\n\n<pre><code>author_name, title, content, chapter_name, email\n</code></pre>\n\n<p>Ideally, I would like to search for a term and have it find results as long as it partially matches any of these fields. </p>\n\n<p>For the following data:</p>\n\n<pre><code>{\n  \"author_name\": \"John Doe\",\n  \"title\": \"A Nice Summer\",\n  \"content\": \"It was a nice summer back in 1969\",\n  \"chapter_name\": \"The 60s\",\n  \"email\": \"johndoe@email.com\"\n }\n</code></pre>\n\n<p>I should get it if I query for <code>Doe</code>, <code>1969</code>, <code>60s</code>, <code>it was</code></p>\n\n<p>(Note the space in the last term. I have been having issues with spaces as well)</p>\n\n<p>Maybe I am just using the wrong elements in building my query</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wicked-gem"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1512490870, "post_id": 47658029, "comment_id": 82274814, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3411403/cattr-accessor-in-rails\">cattr_accessor in Rails?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 9050348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qqpq.png?s=128&g=1", "display_name": "maguri", "link": "https://stackoverflow.com/users/9050348/maguri"}, "is_accepted": false, "score": 4, "last_activity_date": 1512496510, "creation_date": 1512496510, "answer_id": 47659780, "question_id": 47658029, "link": "https://stackoverflow.com/questions/47658029/understanding-the-usage-of-cattr-accessor-in-rails-model-class/47659780#47659780", "title": "understanding the usage of cattr_accessor in Rails Model Class", "body": "<p>First of all, this method is deprecated or moved.\nWhich version do you use, Rails 4 or Rails ?</p>\n\n<p><code>cattr_accessor</code> > replaced for <code>mattr_accessor(*syms, &amp;blk)</code> for <code>Module</code> which is the superclass of the class <code>Class</code>. I recomend to use <strong>attr_accessor</strong>, which is just a method to set attributes for the class, it works like a getter or a setter for the class but only works for an instance (in memory), the attribute is saved anywhere.</p>\n\n<p><code>cattr_accessor</code> is like the <code>attr_*</code> methods, but for the class level. One thing you wouldn't expect is because it uses a backing <code>@@form_steps</code>, the value shared between the class and all instances.</p>\n\n<h3>Api docs:</h3>\n\n<p>Defines both class and instance accessors for class attributes.</p>\n\n<pre><code>module HairColors\n  mattr_accessor :hair_colors\nend\n\nclass Person\n  include HairColors\nend\n\nPerson.hair_colors = [:brown, :black, :blonde, :red]\nPerson.hair_colors     # =&gt; [:brown, :black, :blonde, :red]\nPerson.new.hair_colors # =&gt; [:brown, :black, :blonde, :red]\n</code></pre>\n\n<p>If a subclass changes the value then that would also change the value for parent class. Similarly if parent class changes the value then that would change the value of subclasses too.</p>\n\n<pre><code>class Male &lt; Person\nend\n\nMale.hair_colors &lt;&lt; :blue\nPerson.hair_colors # =&gt; [:brown, :black, :blonde, :red, :blue]\n</code></pre>\n\n<p>To opt out of the instance writer method, pass instance_writer: false. To opt out of the instance reader method, pass instance_reader: false.</p>\n\n<pre><code>module HairColors\n  mattr_accessor :hair_colors, instance_writer: false, instance_reader:             false\nend\n\nclass Person\n  include HairColors\nend\n\nPerson.new.hair_colors = [:brown]  # =&gt; NoMethodError\nPerson.new.hair_colors             # =&gt; NoMethodError\n</code></pre>\n\n<p>Or pass <code>instance_accessor: false</code>, to opt out both instance methods.</p>\n\n<pre><code>module HairColors\n  mattr_accessor :hair_colors, instance_accessor: false\nend\n\nclass Person\n  include HairColors\nend\n\nPerson.new.hair_colors = [:brown]  # =&gt; NoMethodError\nPerson.new.hair_colors             # =&gt; NoMethodError\n</code></pre>\n\n<p>Also you can pass a block to set up the attribute with a default value.</p>\n\n<pre><code>module HairColors\n  mattr_accessor :hair_colors do\n[:brown, :black, :blonde, :red]\n  end\nend\n\nclass Person\n  include HairColors\nend\n\nPerson.class_variable_get(\"@@hair_colors\") #=&gt; [:brown, :black, :blonde, :red]\n</code></pre>\n\n<p><strong>1)</strong></p>\n\n<ul>\n<li>attr_accessor: is a ruby method that makes a getter and a setter</li>\n<li>cattr_accessor:is a ruby method that makes a getter and a setter for the class (quite strange).</li>\n</ul>\n\n<p><strong>2)</strong>\nClass variable have a tendency to wander from class to class. @@form_steps class variable can be exposed through inheritance tree.</p>\n\n<p><strong>3)</strong> To set which attributes will have this class. <code>form_steps</code></p>\n\n<pre><code>p = Pet.new\np.form_steps = \"var\"\n</code></pre>\n\n<p>and use the <code>form_steps</code> attribute inside your current instance Pet (like you do in the method <code>required_for_step?</code>).</p>\n"}], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512496510, "creation_date": 1512490404, "last_edit_date": 1512492281, "question_id": 47658029, "link": "https://stackoverflow.com/questions/47658029/understanding-the-usage-of-cattr-accessor-in-rails-model-class", "title": "understanding the usage of cattr_accessor in Rails Model Class", "body": "<p>I am a newbie to ruby and rails.\nIn my Rails app, I am trying to use Wicked Wizard gem and need some help in Understanding about the cattr_accessor which I have come across in  the code</p>\n\n<pre><code>  create_table \"pets\", force: :cascade do |t|\n            t.string   \"name\"\n            t.string   \"colour\"\n            t.string   \"owner_name\"\n            t.text     \"identifying_characteristics\"\n            t.text     \"special_instructions\"\n            t.datetime \"created_at\"\n            t.datetime \"updated_at\"\n            t.string   \"email\"\n            t.string   \"password\"\n          end\n</code></pre>\n\n<p>model</p>\n\n<pre><code> class Pet &lt; ActiveRecord::Base\n  has_many :pet_photos\n  cattr_accessor :form_steps do\n    %w(identity characteristics instructions)\n  end\n\n  attr_accessor :form_step\n  validates :email, presence: true\n  validates :name, :owner_name, presence: true, if: -&gt; { required_for_step?(:identity) }\n  validates :identifying_characteristics, :colour, presence: true, if: -&gt; { required_for_step?(:characteristics) }\n  validates :special_instructions, presence: true, if: -&gt; { required_for_step?(:instructions) }\n\n  def required_for_step?(step)\n    return true if form_step.nil?\n    return true if self.form_steps.index(step.to_s) &lt;= self.form_steps.index(form_step)\n  end\n\n\n\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>      class Pet::StepsController &lt; ApplicationController\n        include Wicked::Wizard\n        steps *Pet.form_steps\n\n        def show\n          @pet = Pet.find(params[:pet_id])\n          render_wizard\n        end\n\n        def update\n          @pet = Pet.find(params[:pet_id])\n          @pet.update(pet_params(step))\n\n            if params[:images]\n\n                params[:images].each do |image|\n                @pet.pet_photos.create(image: image)\n              end\n            end\n\n          render_wizard @pet\n        end\n\n        private\n\n        def pet_params(step)\n          permitted_attributes = case step\n                                 when \"identity\"\n                                   [:name, :owner_name]\n                                 when \"characteristics\"\n                                   [:colour, :identifying_characteristics]\n                                 when \"instructions\"\n                                   [:special_instructions]\n                                 end\n\n          params.require(:pet).permit(permitted_attributes).merge(form_step: step)\n        end\n\n      end\n</code></pre>\n\n<p>routes</p>\n\n<pre><code>  PetThing::Application.routes.draw do\n          resources :pets, only: [:new, :create, :index, :destroy] do\n            resources :steps, only: [:show, :update], controller: 'pet/steps'\n          end\n\n          root to: 'pets#index'\n</code></pre>\n\n<p>Now my Questions are </p>\n\n<p><strong>1)</strong> what is the difference between the <code>cattr_accessor</code> and <code>attr_accessor</code>?</p>\n\n<pre><code>       cattr_accessor :form_steps do\n       %w(identity characteristics instructions)\n       end\n       attr_accessor :form_step\n</code></pre>\n\n<p><strong>2)</strong> why two different symbols(<code>:form_steps</code> , <code>:form_step</code>) are used as method parameters for <code>cattr_accessor</code> and <code>attr_accessor</code> methods respectively?</p>\n\n<p><strong>3)</strong> why is a block passed as a parameter to <code>cattr_accessor</code> method?</p>\n\n<p>Any Help is highly Appreciated.Thank you</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1512489893, "post_id": 47657586, "comment_id": 82274167, "body": "Note that <code>arr[&#39;person&#39;]</code> and <code>arr.person</code> are the same thing in JavaScript, but not in Ruby. A hash is not the same as an object. There are things you can do to make Ruby hash behave that way, but it is not encouraged, as it can cause both subtle and not-so-subtle bugs."}, {"owner": {"reputation": 275, "user_id": 8016360, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a30be4c216a1d7c1546ea2bd5db83c77?s=128&d=identicon&r=PG&f=1", "display_name": "RedOster", "link": "https://stackoverflow.com/users/8016360/redoster"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1512490706, "post_id": 47657586, "comment_id": 82274717, "body": "@Amadan Understand that. I&#39;m actually working with associated records in rails. Where each entry has_one person and a person belongs_to :entry, inverse_of: :entry, optional: true"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1512528834, "post_id": 47657586, "comment_id": 82291277, "body": "You said &quot;array of hashes&quot;, tagged it as &quot;hash&quot;... if you actually have an array of objects, <code>arr.select { |x| x&amp;.person&amp;.known }</code> is clearest."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1512489473, "post_id": 47657620, "comment_id": 82273882, "body": "Or even <code>arr.select { |x| x[:person]&amp;.[](:known) }</code> (but <code>dig</code> is really nice)."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1512489993, "post_id": 47657620, "comment_id": 82274241, "body": "Or that. But I think there are enough options :D"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 6, "last_activity_date": 1512490075, "last_edit_date": 1512490075, "creation_date": 1512489115, "answer_id": 47657620, "question_id": 47657586, "link": "https://stackoverflow.com/questions/47657586/search-array-of-dissimilar-hashes/47657620#47657620", "title": "Search array of dissimilar hashes", "body": "<p>Try this one</p>\n\n<pre><code>arr.select { |item| item.fetch(:person, {})[:known] }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>arr.select { |item| (item[:person] || {})[:known] }\n</code></pre>\n\n<p>or, from Ruby 2.3.0</p>\n\n<pre><code>arr.select {\u00a0|item| item.dig(:person, :known) }\n</code></pre>\n\n<p>More verbose but maybe clearer</p>\n\n<pre><code>arr.select do |item|\n  person = item.fetch(:person, {})\n  person[:known]\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>arr.select { |item| item[:person] &amp;&amp; item[:person][:known] }\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 8016360, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a30be4c216a1d7c1546ea2bd5db83c77?s=128&d=identicon&r=PG&f=1", "display_name": "RedOster", "link": "https://stackoverflow.com/users/8016360/redoster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 47657620, "answer_count": 1, "score": 0, "last_activity_date": 1512532384, "creation_date": 1512489018, "last_edit_date": 1512532384, "question_id": 47657586, "link": "https://stackoverflow.com/questions/47657586/search-array-of-dissimilar-hashes", "title": "Search array of dissimilar hashes", "body": "<p>I have an array of hashes, each of which has non-normalized values like this:</p>\n\n<pre><code>arr = [{\n    id: 0,\n    type: 'character',\n    person: {\n      name: 'Steve Rogers',\n      weapon: 'Shield',\n      known: true\n    }\n  },\n  {\n    id: 1,\n    type: 'organization',\n    company: \"Pym Industries\",\n    tech: 'Shrinking suit'\n  },\n  {\n    id: 2,\n    type: 'character',\n    person: {\n      name: 'Tony Stark',\n      weapon: 'Ironman Suit',\n      known: false\n    }\n  }]\n</code></pre>\n\n<p>Some of the hashes are different. I want to get a subarray of hashes whose person I know, i.e., <code>arr.person.known</code> is <code>true</code>. The result should be like:</p>\n\n<pre><code>subarr = [{\n    id: 0,\n    type: 'character',\n    person: {\n      name: 'Steve Rogers',\n      weapon: 'Shield',\n      known: true\n    }\n  }]\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>b = arr.select{|x| x.person.known}\nb = arr.reject{|x| if x.person then x.person.known}\n</code></pre>\n\n<p>But I bump into <code>NoMethodError: undefined method `person' for Hash:0x007fc5f6f587f0</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-follower"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1512488949, "post_id": 47657019, "comment_id": 82273528, "body": "Can you verify the users are indeed blocked?  Do they show up on <code>current_user.blocks</code> ?  If that works, you could put a conditional like... <code>&lt;% current_user.all_following.each do |user| %&gt;</code>  and in the next line, <code>&lt;% next if current_user.blocks.include? user %&gt;</code>"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1512560578, "post_id": 47657019, "comment_id": 82305748, "body": "It works! Thanks!"}], "owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512487659, "creation_date": 1512487147, "last_edit_date": 1512487659, "question_id": 47657019, "link": "https://stackoverflow.com/questions/47657019/rails-acts-as-follower-listing-blocked-users", "title": "Rails: acts_as_follower listing blocked users", "body": "<p>I'm doing a job with <a href=\"https://github.com/tcocca/acts_as_follower\" rel=\"nofollow noreferrer\">acts_as_follower</a> gem that users can follow others users. The documentation says:</p>\n\n<blockquote>\n  <p>To get all of the records that an object is following that have not\n  been blocked use the following</p>\n</blockquote>\n\n<pre><code>user.all_following\n# Returns an array of every followed object for the user, this can be a collection of different object types, eg: User, Book\n</code></pre>\n\n<p>I did that and I'm stiil getting blocked users on loop.</p>\n\n<p>I tried to put a conditional:</p>\n\n<pre><code>&lt;% if current_user.following?(user) %&gt;\n</code></pre>\n\n<p>But this line also show blocked users, because even with user blocked, it stiil followin user in the follow model.</p>\n\n<p>Currently my call is like this:</p>\n\n<pre><code>&lt;% current_user.all_following.each do |user| %&gt;\n</code></pre>\n\n<p>Someone knows how I can definitely prevent blocked users from being listed on loop?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1512485326, "post_id": 47656072, "comment_id": 82270902, "body": "What&#39;s your question?? The application has installed and booted without errors."}, {"owner": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "edited": false, "score": 0, "creation_date": 1512486014, "post_id": 47656072, "comment_id": 82271363, "body": "Yes but when i go to the homepage, the font didn&#39;t change and i see the old html homepage"}, {"owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "edited": false, "score": 0, "creation_date": 1512487056, "post_id": 47656072, "comment_id": 82272153, "body": "What is the HTML on the home page that you are expecting to see changed?"}, {"owner": {"reputation": 1238, "user_id": 5501716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NUNlx.jpg?s=128&g=1", "display_name": "Alex Zakruzhetskyi", "link": "https://stackoverflow.com/users/5501716/alex-zakruzhetskyi"}, "edited": false, "score": 0, "creation_date": 1512488535, "post_id": 47656072, "comment_id": 82273246, "body": "Give bottstrap classes to the elements. For example create this: <code>&lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot;&gt;Some text&lt;&#47;a&gt;</code>, and see if it works."}, {"owner": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "reply_to_user": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "edited": false, "score": 0, "creation_date": 1512490260, "post_id": 47656072, "comment_id": 82274402, "body": "@Jared like this : <a href=\"https://www.google.fr/search?q=welcome+page+ruby&amp;num=100&amp;safe=active&amp;rlz=1C1CHBF_frFR741FR741&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwj9mKTSoPPXAhVE1hoKHbzwAdwQ_AUICigB&amp;biw=1745&amp;bih=885#imgrc=WqQWv8vtmHsejM\" rel=\"nofollow noreferrer\">google.fr/&hellip;</a>: and i want something like this : <a href=\"https://www.google.fr/search?q=welcome+page+ruby&amp;num=100&amp;safe=active&amp;rlz=1C1CHBF_frFR741FR741&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwj9mKTSoPPXAhVE1hoKHbzwAdwQ_AUICigB&amp;biw=1745&amp;bih=885#imgrc=dB85npOYZFa7TM\" rel=\"nofollow noreferrer\">google.fr/&hellip;</a>: Thank"}], "answers": [{"comments": [{"owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "reply_to_user": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "edited": false, "score": 0, "creation_date": 1512507973, "post_id": 47661522, "comment_id": 82284395, "body": "Whats happening now?"}, {"owner": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "edited": false, "score": 0, "creation_date": 1512508181, "post_id": 47661522, "comment_id": 82284496, "body": "The same as in the begining, i have an html homepage with no Boostap design"}, {"owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "reply_to_user": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "edited": false, "score": 0, "creation_date": 1512510060, "post_id": 47661522, "comment_id": 82285415, "body": "So you&#39;re still getting the same page displayed that says &quot;welcome to rails&quot;?  That shouldn&#39;t be the case.  It should redirect you to the new page that was created if the <code>routes.rb</code> file was updated.  That welcome page is just a placeholder for user generated content"}, {"owner": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "edited": false, "score": 0, "creation_date": 1512553935, "post_id": 47661522, "comment_id": 82301410, "body": "Yes i&#39;m redirect to the new page but the bootstrap is not displayed. It is like a basic html page"}, {"owner": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "edited": false, "score": 0, "creation_date": 1512557590, "post_id": 47661522, "comment_id": 82303895, "body": "Hi @Jared i edited my post and put an screenshot. It seems bootstrap is not displayed totaly"}], "tags": [], "owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "is_accepted": false, "score": 0, "last_activity_date": 1512503199, "creation_date": 1512503199, "answer_id": 47661522, "question_id": 47656072, "link": "https://stackoverflow.com/questions/47656072/cant-install-bootstrap-on-ruby-on-rails/47661522#47661522", "title": "can&#39;t install bootstrap on ruby on rails", "body": "<p>Bootstrap has been installed successfully you however need to create an HTML page to leverage that new CSS you have.</p>\n\n<p>Run this in your terminal to make your own custom page.   </p>\n\n<pre><code>rails generate controller home index\n</code></pre>\n\n<p>You can now update the <code>app/views/home/index.html.erb</code> file to contain whatever Bootstrap styled HTML you want.</p>\n\n<p>The last step in order for you to view your page would be to modify the <code>routes.rb</code> file.\nIn that file, add the line <code>root 'home#index'</code> to see your new page when you visit your Rails app.</p>\n"}], "owner": {"reputation": 1, "user_id": 9056773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630f11999c241fc9a19f2038b3edf4fd?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane75", "link": "https://stackoverflow.com/users/9056773/othmane75"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512557548, "creation_date": 1512484381, "last_edit_date": 1512557548, "question_id": 47656072, "link": "https://stackoverflow.com/questions/47656072/cant-install-bootstrap-on-ruby-on-rails", "title": "can&#39;t install bootstrap on ruby on rails", "body": "<p>I'm a beginer in Ruby on rails and i tried to install <strong>Bootstrap</strong> but always it failed</p>\n\n<p>Here is how i proceded to install it .</p>\n\n<p><strong>1)</strong> </p>\n\n<pre><code>source 'https://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.0.6'\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.0'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\ngem 'bootstrap', '~&gt; 4.0.0.beta2.1'\ngem 'sprockets-rails', '~&gt; 3.2', '&gt;= 3.2.1'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p><strong>2)</strong></p>\n\n<pre><code> @import \"bootstrap\";\n</code></pre>\n\n<p><strong>3)</strong> In the file <strong>application.js</strong> i paste this :</p>\n\n<pre><code>//= require jquery3\n//= require popper  \n//= require bootstrap-sprockets  \n//= require turbolinks  \n//= require_tree .\n</code></pre>\n\n<p>4) I got an error in the application.html.erb file so i changed \"application\" in the two lines to \"application.scss\" and \"application.js\" and then i installed Node.js</p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Bali&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n\n    &lt;%= stylesheet_link_tag    'application.scss', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application.js', 'data-turbolinks-track': 'reload' %&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;%= yield %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I did Bundle Install and reset the server. Then nothing happen to the homepage, the font didn't change...</p>\n\n<p>Thank for your help</p>\n\n<p><a href=\"https://i.stack.imgur.com/5scNO.png\" rel=\"nofollow noreferrer\">Ok now i have this, it seem that bootstrap is not displayed totaly</a></p>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1512484297, "post_id": 47655884, "comment_id": 82270137, "body": "@mudasobwa gives me the same error minus the globalize gem stuff."}], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1512484126, "post_id": 47655929, "comment_id": 82270025, "body": "<code>eager_load(:foo).where(foo: { price: 0 })</code> or <code>includes(:foo).where(foo: { price: 0 }).references(:foos)</code> give me the same error."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1512484481, "post_id": 47655929, "comment_id": 82270269, "body": "Uhhh.. I am sorry, I did not need to add <code>references</code> as I am not using SQL directly, but I missed that you&#39;ve changed <code>foo:</code> to <code>foos:</code>. It&#39;s working now. Thanks for your assistance!"}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 5, "last_activity_date": 1512484525, "last_edit_date": 1512484525, "creation_date": 1512483965, "answer_id": 47655929, "question_id": 47655884, "link": "https://stackoverflow.com/questions/47655884/unknown-column-error-in-where-clause-when-using-includes/47655929#47655929", "title": "Unknown column error in where clause when using includes", "body": "<p>You should replace <code>foo:</code> (the name of your association) with <code>foos:</code> (the name of your table) in the <code>where</code> clause.</p>\n\n<pre><code>includes(:foo).where(foos: { price: 0 })\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 47655929, "answer_count": 1, "score": 0, "last_activity_date": 1512484693, "creation_date": 1512483828, "last_edit_date": 1512484693, "question_id": 47655884, "link": "https://stackoverflow.com/questions/47655884/unknown-column-error-in-where-clause-when-using-includes", "title": "Unknown column error in where clause when using includes", "body": "<p>I have this query:</p>\n\n<pre><code>includes(:foo).where(foo: { price: 0 })\n</code></pre>\n\n<p>I am calling it from a class called <code>Recipe</code>.</p>\n\n<p>Foo's have the decimal type column <code>price</code>:</p>\n\n<pre><code>&gt;&gt; Recipe.first.foo\n=&gt; #&lt;Foo id: 1, price: #&lt;BigDecimal:928b000,'0.0',9(18)&gt;, slug: \"something\", created_at: \"2017-12-05 07:54:29\", updated_at: \"2017-12-05 13:00:51\"&gt;\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>Mysql2::Error: Unknown column 'foo.price' in 'where clause': SELECT <code>recipes</code>.<code>id</code> AS t0_r0, <code>recipes</code>.<code>foo_id</code> AS t0_r1, <code>recipes</code>.<code>parent_recipe_id</code> AS t0_r2, <code>recipes</code>.<code>name</code> AS t0_r3, <code>recipes</code>.<code>description</code> AS t0_r4, <code>quantities</code>.<code>slug</code> AS t0_r5, <code>recipes</code>.<code>created_at</code> AS t0_r6, <code>quantities</code>.<code>updated_at</code> AS t0_r7, <code>foos</code>.<code>id</code> AS t1_r0, <code>foos</code>.<code>category_id</code> AS t1_r1, <code>foos</code>.<code>price</code> AS t1_r2, <code>foos</code>.<code>slug</code> AS t1_r3, <code>foos</code>.<code>created_at</code> AS t1_r4, <code>foos</code>.<code>updated_at</code> AS t1_r5 FROM <code>recipes</code> LEFT OUTER JOIN <code>foos</code> ON <code>foos</code>.<code>id</code> = <code>recipes</code>.<code>foo_id</code> WHERE <code>foo</code>.<code>price</code> = 0.0</p>\n</blockquote>\n\n<p>Why isn't this working? I am using other queries which are all working perfectly fine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "update-all"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512483823, "post_id": 47655624, "comment_id": 82269806, "body": "<code>where(...).last(n)</code> returns an <code>Array</code>, whereas <code>where(...).limit(n)</code> returns an <code>ActiveRecord::Collection</code>. That&#39;s why your code fails, and the answer below works."}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1512483424, "post_id": 47655688, "comment_id": 82269525, "body": "Cool exactly what I&#39;m looking for, thanks @Ursul !! So I guess the method .last or .reverse is not working for update_all"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1512483464, "post_id": 47655688, "comment_id": 82269562, "body": "Something like that. It&#39;s a method that exit from the &quot;sql mode&quot; let&#39;s say :)"}, {"owner": {"reputation": 71, "user_id": 7146257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZFdOi.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7146257/joe"}, "reply_to_user": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 2, "creation_date": 1512483492, "post_id": 47655688, "comment_id": 82269574, "body": "hey @stigGaret one thing to note when using update_all that it doesn&#39;t update the updated_at attribute incase you didn&#39;t know. (I know this is irrelevant but I found this while trying to solve your problem so I thought you should know ;D)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1512483526, "post_id": 47655688, "comment_id": 82269601, "body": "Because last returns an Array, not an ActiveRecord::Relation"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 5, "last_activity_date": 1512483192, "creation_date": 1512483192, "answer_id": 47655688, "question_id": 47655624, "link": "https://stackoverflow.com/questions/47655624/use-update-all-with-conditions/47655688#47655688", "title": "Use Update_all with conditions", "body": "<p>Try something like</p>\n\n<pre><code>@group.questions.where(user_id: current_user.id).\n    order('questions.id DESC').limit(@post.question_counter).\n    update_all(post_id: @post.id)\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "accepted_answer_id": 47655688, "answer_count": 1, "score": 0, "last_activity_date": 1512483192, "creation_date": 1512482978, "question_id": 47655624, "link": "https://stackoverflow.com/questions/47655624/use-update-all-with-conditions", "title": "Use Update_all with conditions", "body": "<p>I'm trying to update all the elements of an Array, but I've this error </p>\n\n<blockquote>\n  <p>undefined method `update_all' for ...</p>\n</blockquote>\n\n<pre><code>@group.questions.where(user_id: current_user.id).last(@post.question_counter).update_all(post_id: @post.id)\n</code></pre>\n\n<p>While when I try to update_all without condition like :</p>\n\n<pre><code>@group.questions.update_all(post_id: @post.id)\n</code></pre>\n\n<p>The method is working. Do you have a solution to run this method ? I could do something like this to solve it, but i think is not really elegant &amp; performant</p>\n\n<pre><code>@questions = @group.questions.where(user_id: current_user.id).last(@post.question_counter)\n@questions.each do |question|\n  question.update(post_id: @post.id)\nend \n</code></pre>\n"}, {"tags": ["ruby", "date", "datetime", "time"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1512483853, "creation_date": 1512483853, "answer_id": 47655892, "question_id": 47655565, "link": "https://stackoverflow.com/questions/47655565/convert-number-to-date-in-ruby/47655892#47655892", "title": "Convert number to date in Ruby", "body": "<pre><code>DateTime.strptime('1512387277084', '%Q')\n#\u21d2 #&lt;DateTime: 2017-12-04T11:34:37+00:00\n#       ((2458092j,41677s,84000000n),+0s,2299161j)&gt;\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/stdlib/libdoc/date/rdoc/DateTime.html#method-i-strftime\" rel=\"noreferrer\"><code>DateTime</code> formatting</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512572832, "post_id": 47662278, "comment_id": 82313835, "body": "You do have to divide <code>number</code> by 1000 in order to use <code>Time.at</code>, but using floating point division will <b>not</b> give the correct result: <code>Time.at(number2).nsec</code> returns <code>84000110</code>. The correct result would be <code>84000000</code> \u2013 yours is 110 nanoseconds off."}, {"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512592625, "post_id": 47662278, "comment_id": 82325407, "body": "@Stefan updated my answer to take your input into account. Thx."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1512594035, "post_id": 47662278, "comment_id": 82326146, "body": "Doesn&#39;t have to be that complicated: <code>Time.at(number.quo(1000))</code>"}], "tags": [], "owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "is_accepted": false, "score": 1, "last_activity_date": 1512642654, "last_edit_date": 1512642654, "creation_date": 1512506290, "answer_id": 47662278, "question_id": 47655565, "link": "https://stackoverflow.com/questions/47655565/convert-number-to-date-in-ruby/47662278#47662278", "title": "Convert number to date in Ruby", "body": "<p>According to <a href=\"https://ruby-doc.org/core-2.4.0/Time.html#method-c-at\" rel=\"nofollow noreferrer\">the ruby documentation</a> takes the <code>at</code> method, of the <code>Time</code> class, as argument \"the number of seconds\" since the Epoch not the \"milliseconds\" since the Epoch.\nAnother variant takes as arguments the \"seconds\" since the Epoch and \"Microseconds with frac\".</p>\n\n<p>You need to convert <code>number</code> (the input) from <code>ms</code> to <code>sec</code> and <code>us</code> to get the expected / correct result.</p>\n\n<p><strong>Examples</strong> </p>\n\n<p>Wrong (ms interpeted as seconds):</p>\n\n<pre><code>&gt; number = 1512387277084 # ms since epoch\n=&gt; 1512387277084\n&gt; Time.at(number)\n=&gt; 49895-08-24 10:58:04 +0200\n</code></pre>\n\n<p>Seconds with fractal:</p>\n\n<pre><code>&gt; number2 = number / 1000.0\n=&gt; 1512387277.084\n&gt; Time.at(number2)\n=&gt; 2017-12-04 12:34:37 +0100\n&gt; Time.at(number2).usec\n=&gt; 84000\n&gt; Time.at(number2).nsec\n=&gt; 84000110 # Wrong of by 110 ns \n\n&gt; Time.at(number2.round(3)).nsec\n=&gt; 84000110 # Wrong of by 110 ns\n&gt; Time.at(number2.round(2)).usec\n=&gt; 79999 # Wrong\n&gt; Time.at(number2.round(2)).nsec\n=&gt; 79999923 # Wrong\n</code></pre>\n\n<p>Seconds only:</p>\n\n<pre><code>&gt; number3 = number / 1000\n=&gt; 1512387277\n&gt; Time.at(number3)\n=&gt; 2017-12-04 12:34:37 +0100\n&gt; Time.at(number3).usec\n=&gt; 0 # Wrong\n&gt; Time.at(number3).nsec\n=&gt; 0 # Wrong\n</code></pre>\n\n<p>Seconds and Microseconds:</p>\n\n<pre><code>ms = number % 1000 # Milliseconds\n=&gt; 84\n&gt; us = ms * 1000 # Microseconds\n=&gt; 84000\n&gt; Time.at(number3, us)\n=&gt; 2017-12-04 12:34:37 +0100\n&gt; Time.at(number3, us).usec\n=&gt; 84000 # OK\n&gt; Time.at(number3, us).nsec\n=&gt; 84000000 # OK\n&gt; Time.at(number3, us).to_f\n=&gt; 1512387277.084 # OK\n</code></pre>\n\n<p><strong>Update 2</strong></p>\n\n<p>Seconds as Rational</p>\n\n<pre><code>&gt; number4 = number.quo(1000)\n=&gt; (378096819271/250)\n&gt; Time.at(number4)\n=&gt; 2017-12-04 12:34:37 +0100\n&gt; Time.at(number4).usec\n=&gt; 84000 # OK\n&gt; Time.at(number4).nsec\n=&gt; 84000000 # OK\n&gt; Time.at(number4).to_f\n=&gt; 1512387277.084 # OK\n</code></pre>\n"}], "owner": {"reputation": 7503, "user_id": 2339405, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K0wMk.jpg?s=128&g=1", "display_name": "Rainmaker", "link": "https://stackoverflow.com/users/2339405/rainmaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1620, "favorite_count": 0, "accepted_answer_id": 47655892, "answer_count": 2, "score": 0, "last_activity_date": 1512642654, "creation_date": 1512482858, "last_edit_date": 1512543182, "question_id": 47655565, "link": "https://stackoverflow.com/questions/47655565/convert-number-to-date-in-ruby", "title": "Convert number to date in Ruby", "body": "<p>I get a number representing date from a back-end, and I'm trying to convert it to a date this way:</p>\n\n<pre><code>number = item[\"created\"].to_i\nnumber #=&gt; 1512387277084\nDateTime.strptime(number.to_s ,'%s') #=&gt; 49895-08-24T08:58:04+00:00\nTime.at(number).utc #=&gt; 49895-08-24 08:58:04 UTC\nTime.at(number) #=&gt; 49895-08-24 11:58:04 +0300\n</code></pre>\n\n<p>But this is a wrong result.</p>\n\n<p>If I use Epoch &amp; Unix Timestamp Conversion Tools, I get this result:</p>\n\n<pre><code>1512387277084\nAssuming that this timestamp is in milliseconds:\nGMT: Monday, December 4, 2017 11:34:37.084 AM\nYour time zone: Monday, December 4, 2017 2:34:37.084 PM GMT+03:00\n</code></pre>\n\n<p><code>Time.at(number)</code> doesn't work.</p>\n\n<p>How to convert it correctly?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1512479621, "post_id": 47654224, "comment_id": 82267129, "body": "Looks like a <a href=\"https://stackoverflow.com/questions/97197/what-is-n1-select-query-issue\"><code>N+1</code> problem</a>. One should prefetch the data needed upfront to prevent different threads reading the same values multiple times."}], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512480922, "post_id": 47654793, "comment_id": 82267956, "body": "Thanks a lot @Aetherus, that makes sense and clears my understanding, hope it helps others too."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 1, "last_activity_date": 1512480500, "creation_date": 1512480500, "answer_id": 47654793, "question_id": 47654224, "link": "https://stackoverflow.com/questions/47654224/multi-threaded-slower-without-mutex-when-benchmarking-ruby-2-0-rails-rails-4-2/47654793#47654793", "title": "Multi threaded slower without mutex when benchmarking (ruby 2.0, rails Rails 4.2.7.1)", "body": "<ol>\n<li><p>According to <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#sql-caching\" rel=\"nofollow noreferrer\">Caching with Rails # SQL Caching</a>,</p>\n\n<blockquote>\n  <p>If Rails encounters the same query again for that request, it will use the cached result set as opposed to running the query against the database again... Query caches are created at the start of an action and destroyed at the end of that action and thus persist only for the duration of the action.</p>\n</blockquote></li>\n<li><p>ActiveRecord checks out from the pool one connection per thread.</p></li>\n<li><p>If your Ruby implementation is MRI, then because of the GVL, CPU works are not in parallel. </p></li>\n</ol>\n\n<p>So when you run the code in single threaded mode inside an action, the query result is cached. When you run the code in multi-threaded mode, each thread acquires its own database connection, and the query result is not cached, so each thread has to access the database, so it could be slow.</p>\n"}], "owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 47654793, "answer_count": 1, "score": 0, "last_activity_date": 1512480500, "creation_date": 1512478728, "question_id": 47654224, "link": "https://stackoverflow.com/questions/47654224/multi-threaded-slower-without-mutex-when-benchmarking-ruby-2-0-rails-rails-4-2", "title": "Multi threaded slower without mutex when benchmarking (ruby 2.0, rails Rails 4.2.7.1)", "body": "<p>I am trying to benchmark the below code and see that the non-threaded version runs faster than the treaded version.</p>\n\n<pre><code>      puts Benchmark.measure{\n        100.times do |i|\n          carrier.services.map do |service_obj|\n            Thread.new {\n              rate &lt;&lt; Rate.rate_by_service(service_obj,@package,@from,@to,@credentials)\n            }\n          end.each(&amp;:join)\n        end\n      }\n</code></pre>\n\n<p>below are the timings</p>\n\n<pre><code>#threading\n4.940000   0.730000   5.670000 (  5.795008)\n4.740000   0.740000   5.480000 (  5.554500)\n4.740000   0.730000   5.470000 (  5.436129)\n4.840000   0.710000   5.550000 (  5.524418)\n4.710000   0.720000   5.430000 (  5.431673)\n\n#no threading\n3.640000   0.190000   3.830000 (  3.962347)\n3.670000   0.220000   3.890000 (  4.402259)\n3.430000   0.200000   3.630000 (  3.780768)\n3.480000   0.190000   3.670000 (  3.830547)\n3.650000   0.210000   3.860000 (  4.065442)\n</code></pre>\n\n<p><strong>one thing i have observed in the log is when non-threaded version runs, the queries results are returned from cache like below and in threaded version it does not fetch from cache but accessed the DB.</strong></p>\n\n<pre><code>  CACHE (0.0ms)  SELECT \n  CACHE (0.0ms)  SELECT \n  CACHE (0.0ms)  SELECT \n  CACHE (0.0ms)  SELECT  \n  CACHE (0.0ms)  SELECT  \n  CACHE (0.0ms)  SELECT  \n  CACHE (0.0ms)  SELECT \n  CACHE (0.0ms)  SELECT \n  CACHE (0.0ms)  SELECT  \n  CACHE (0.0ms)  SELECT  \n  CACHE (0.0ms)  SELECT \n</code></pre>\n\n<p>Note: I have removed the actual queries for readability purpose.</p>\n\n<p>Can anyone please explain as to what could be causing the threaded version to run a bit slow than non-threaded</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1512477888, "post_id": 47653857, "comment_id": 82265973, "body": "What you named <code>@entry</code> is not, in fact, a single Entry object. It is a <i>collection</i> of entries. Change your code accordingly."}, {"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1512479693, "post_id": 47653857, "comment_id": 82267172, "body": "People seem to speculate a lot about what you&#39;re trying to achieve. Please clarify what you intend to show in the result. One user, one event, one or more entries? Add <code>:course</code>to the models and associations. While we can guess with <code>@entry.course</code> it&#39;s probably better you would add <code>@course</code> to the controller so your code is more organized"}, {"owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512483940, "post_id": 47653857, "comment_id": 82269883, "body": "I have tried to clarfiy what I am asking about."}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1512478576, "post_id": 47653989, "comment_id": 82266373, "body": "i think he wants the entry to a specific event so       <code>@entry = @user.entries.where(event_id: 1).first</code>"}], "tags": [], "owner": {"reputation": 51, "user_id": 8947527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/915952428ad729abb95dfae916b427bf?s=128&d=identicon&r=PG&f=1", "display_name": "dreadman", "link": "https://stackoverflow.com/users/8947527/dreadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1512477986, "creation_date": 1512477986, "answer_id": 47653989, "question_id": 47653857, "link": "https://stackoverflow.com/questions/47653857/how-to-show-a-specific-unit-of-data-from-a-record-queried-in-rails/47653989#47653989", "title": "How to show a specific unit of data from a record queried in rails?", "body": "<p>Why are you using such a complicated query with <code>joins</code>? If you are looking for the <code>Entry</code>s of <code>@user</code> just use <code>@user.entries</code>. ActiveRecord knows from the <code>has_many</code> how to deal with that.</p>\n\n<p>If you posted a simplified example, you should try to find your Entry with something like <code>.where(user_id: user.id)</code> as long as <code>id</code> is the foreign key. With that you don't need that <code>join</code>, too.</p>\n"}, {"comments": [{"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1512478863, "post_id": 47654185, "comment_id": 82266589, "body": "That&#39;s alot more than 1 query. In fact only one in the Controller and many more triggered from the view which would break the MVC pattern horribly."}, {"owner": {"reputation": 1761, "user_id": 8944610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a07tQ.jpg?s=128&g=1", "display_name": "Mikhail Katrin", "link": "https://stackoverflow.com/users/8944610/mikhail-katrin"}, "reply_to_user": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 1, "creation_date": 1512479169, "post_id": 47654185, "comment_id": 82266822, "body": "You right.  I spoke too soon. Answer updated. Using <code>eager_load</code> allows to make one query."}, {"owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512482615, "post_id": 47654185, "comment_id": 82269069, "body": "<code>ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  missing FROM-clause entry for table &quot;user&quot;</code> The error rails console spits out."}, {"owner": {"reputation": 1761, "user_id": 8944610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a07tQ.jpg?s=128&g=1", "display_name": "Mikhail Katrin", "link": "https://stackoverflow.com/users/8944610/mikhail-katrin"}, "edited": false, "score": 0, "creation_date": 1512484531, "post_id": 47654185, "comment_id": 82270302, "body": "There should be user<b>s</b> in <code>where</code>. Answer updated."}], "tags": [], "owner": {"reputation": 1761, "user_id": 8944610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a07tQ.jpg?s=128&g=1", "display_name": "Mikhail Katrin", "link": "https://stackoverflow.com/users/8944610/mikhail-katrin"}, "is_accepted": false, "score": 0, "last_activity_date": 1512484486, "last_edit_date": 1512484486, "creation_date": 1512478620, "answer_id": 47654185, "question_id": 47653857, "link": "https://stackoverflow.com/questions/47653857/how-to-show-a-specific-unit-of-data-from-a-record-queried-in-rails/47654185#47654185", "title": "How to show a specific unit of data from a record queried in rails?", "body": "<p>You could confine with one query using\n<a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/eager_load\" rel=\"nofollow noreferrer\"><code>eager_load</code></a></p>\n\n<pre><code>def show\n    @user = User.eager_load(:entries =&gt; [:event]).where(users: {id: params[:id]})\nend\n</code></pre>\n\n<p>According to your models you can access entries though user.</p>\n\n<pre><code>@user.entries\n\n@user.entries.map{|entry| entry.course} \n</code></pre>\n\n<p>Also you can access event (which belongs to entry) though entry.</p>\n\n<pre><code>@user.entries[1].event\n\n@user.entries.map{|entry| entry.event}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1761, "user_id": 8944610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a07tQ.jpg?s=128&g=1", "display_name": "Mikhail Katrin", "link": "https://stackoverflow.com/users/8944610/mikhail-katrin"}, "edited": false, "score": 0, "creation_date": 1512479754, "post_id": 47654457, "comment_id": 82267207, "body": "Using <code>includes</code> associations will be loaded  in separated queries."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 1761, "user_id": 8944610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a07tQ.jpg?s=128&g=1", "display_name": "Mikhail Katrin", "link": "https://stackoverflow.com/users/8944610/mikhail-katrin"}, "edited": false, "score": 0, "creation_date": 1512479808, "post_id": 47654457, "comment_id": 82267235, "body": "Yes. I know  it."}, {"owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512484009, "post_id": 47654457, "comment_id": 82269947, "body": "This works perfectly but is it possible to get the infomation from the event table from the foreign key in the entry"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "edited": false, "score": 0, "creation_date": 1512536188, "post_id": 47654457, "comment_id": 82293107, "body": "@TomSnow Yes, it is possible, i updated answer as per your requirement."}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": true, "score": 1, "last_activity_date": 1512536028, "last_edit_date": 1512536028, "creation_date": 1512479388, "answer_id": 47654457, "question_id": 47653857, "link": "https://stackoverflow.com/questions/47653857/how-to-show-a-specific-unit-of-data-from-a-record-queried-in-rails/47654457#47654457", "title": "How to show a specific unit of data from a record queried in rails?", "body": "<p>You can find it in 2 ways</p>\n\n<p>1)</p>\n\n<pre><code> @entries = Entry.includes(:user,:event).where(user: { id: (params[:id]) })\n</code></pre>\n\n<p>2)</p>\n\n<pre><code> @entries = User.includes(entries: :event).find(params[:id]).entries\n</code></pre>\n\n<p>Than in the loop of entries you can access value course of particular entry</p>\n\n<p>e.g.</p>\n\n<pre><code>@entries.each do |entry|\n  puts \"#{entry.course}\"\n  puts \"#{entry.event&amp;.name}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8781218, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BHhrq.jpg?s=128&g=1", "display_name": "Tom Snow", "link": "https://stackoverflow.com/users/8781218/tom-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 47654457, "answer_count": 3, "score": 0, "last_activity_date": 1512536028, "creation_date": 1512477578, "last_edit_date": 1512483903, "question_id": 47653857, "link": "https://stackoverflow.com/questions/47653857/how-to-show-a-specific-unit-of-data-from-a-record-queried-in-rails", "title": "How to show a specific unit of data from a record queried in rails?", "body": "<p>I am really stuck with dealing with querys from multiple tables in rails. If this is my controller:</p>\n\n<pre><code> def show\n    @user = User.find(params[:id])\n    @entry = Entry.joins(:event, :user).where(users: { id: '2' })\n    @event = Event.find(1)\n  end\n</code></pre>\n\n<p>and this is my models</p>\n\n<pre><code>class Entry &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :event\n\nclass User &lt; ApplicationRecord\n   has_many :entries, dependent: :destroy\n\nclass Event &lt; ApplicationRecord\n    has_many :entries, dependent: :destroy\n</code></pre>\n\n<p>The query runs happily in rails console and returns the records but I don't know how to access specific units like <code>entry.course</code> in my embeded ruby. </p>\n\n<p><strong>Update</strong></p>\n\n<p><strong>To clarify</strong> On a page I woulk like to output somthing for all the entries assosiated with the user logged in to the page.</p>\n\n<p>eventName eventLocation eventDate course siCard</p>\n\n<p>The schema:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20171204183458) do\n\n    # These are extensions that must be enabled in order to support this \n  database\n  enable_extension \"plpgsql\"\n\ncreate_table \"entries\", force: :cascade do |t|\n  t.string \"course\"\n  t.string \"siCard\"\n  t.bigint \"user_id\"\n  t.bigint \"event_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.index [\"event_id\"], name: \"index_entries_on_event_id\"\n  t.index [\"user_id\", \"created_at\"], name: \n  \"index_entries_on_user_id_and_created_at\"\n  t.index [\"user_id\"], name: \"index_entries_on_user_id\"\n end\n\ncreate_table \"events\", force: :cascade do |t|\n t.string \"eventName\"\n t.string \"location\"\n t.date \"eventDate\"\n t.text \"description\"\n t.datetime \"created_at\", null: false\n t.datetime \"updated_at\", null: false\n t.string \"eventLink\"\n t.string \"eventCoordinates\"\n t.index [\"eventName\"], name: \"index_events_on_eventName\", unique: true\nend\n\ncreate_table \"users\", force: :cascade do |t|\n  t.string \"name\"\n  t.string \"email\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.string \"password_digest\"\n  t.string \"firstName\"\n  t.string \"remember_digest\"\n  t.boolean \"admin\"\n  t.index [\"email\"], name: \"index_users_on_email\", unique: true\nend\n\nadd_foreign_key \"entries\", \"events\"\nadd_foreign_key \"entries\", \"users\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "lazy-sequences"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1512477197, "post_id": 47653131, "comment_id": 82265561, "body": "Allocation of a memory does not affect the performance at all. It\u2019s a single CPU instruction. I would bet the issue is in <code>reduce</code> that cannot be efficient for lazy operations, but in general the difference \u201ctwo times faster\u201d does basically mean \u201cthe execution time equals.\u201d"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 8665413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5MdNgW6-3h4/AAAAAAAAAAI/AAAAAAAAAH0/j8XUag7iWz4/photo.jpg?sz=128", "display_name": "David Bodow", "link": "https://stackoverflow.com/users/8665413/david-bodow"}, "edited": false, "score": 1, "creation_date": 1533662247, "post_id": 47655036, "comment_id": 90425199, "body": "In your <a href=\"https://bugs.ruby-lang.org/issues/6183\" rel=\"nofollow noreferrer\">linked thread</a>, it seems that the Ruby team did attempt to juice some performance out of lazy enumerators in <a href=\"https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/56185\" rel=\"nofollow noreferrer\">Revision 56158</a>. Is there any way to know which Ruby version applies that revision? The feature number doesn&#39;t seem to show up on the roadmap"}, {"owner": {"reputation": 4545, "user_id": 5641227, "user_type": "registered", "profile_image": "https://graph.facebook.com/563844727113033/picture?type=large", "display_name": "Khalil Gharbaoui", "link": "https://stackoverflow.com/users/5641227/khalil-gharbaoui"}, "edited": false, "score": 0, "creation_date": 1566551278, "post_id": 47655036, "comment_id": 101700048, "body": "It was improved to be 30~40% faster: <a href=\"http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/77130\" rel=\"nofollow noreferrer\">blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/77130</a>"}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": true, "score": 8, "last_activity_date": 1512485118, "last_edit_date": 1512485118, "creation_date": 1512481230, "answer_id": 47655036, "question_id": 47653131, "link": "https://stackoverflow.com/questions/47653131/rubys-lazy-less-performant-than-allocating-huge-lists/47655036#47655036", "title": "Ruby&#39;s `lazy` less performant than allocating huge lists?", "body": "<p>I'd say an Enumerator is a far slower middle man than memory is.</p>\n\n<p>This was also <a href=\"https://bugs.ruby-lang.org/issues/6183\" rel=\"noreferrer\">reported</a> a while back and Ruby core team member <a href=\"https://bugs.ruby-lang.org/issues/6183#note-2\" rel=\"noreferrer\">Yusuke Endoh said</a>:</p>\n\n<blockquote>\n  <p>Enumerator::Lazy is not a silver bullet; it removes the overhead for\n  creating an intermediate array, but brings the drawback for calling\n  a block. Unfortunately, the latter is much bigger than the former.\n  Thus, in general, Lazy does bring performance drawback.</p>\n</blockquote>\n\n<hr>\n\n<p>An analogy I just thought of: Imagine you're building some furniture for a friend.</p>\n\n<ul>\n<li><p>Non-lazy: You build the whole thing, rent a truck, and drive it to your friend.</p></li>\n<li><p>Lazy: You build a little piece and drive it to your friend with your car. You build the next little piece and drive it to your friend with your car. You build the next little piece and drive it to your friend with your car. And so on.</p></li>\n</ul>\n\n<p>Yes, renting that truck is extra overhead, but it's nothing compared to driving over and over again with your car.</p>\n\n<p>The real reason that being lazy can save time is that after the first few pieces your friend finds out that you slept with his wife so now you're no longer friends and he doesn't want your stupid furniture anymore and you're not building the remaining pieces at all.</p>\n"}], "owner": {"reputation": 11682, "user_id": 794380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tLc9e.jpg?s=128&g=1", "display_name": "Idan Arye", "link": "https://stackoverflow.com/users/794380/idan-arye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 47655036, "answer_count": 1, "score": 5, "last_activity_date": 1512485118, "creation_date": 1512475157, "question_id": 47653131, "link": "https://stackoverflow.com/questions/47653131/rubys-lazy-less-performant-than-allocating-huge-lists", "title": "Ruby&#39;s `lazy` less performant than allocating huge lists?", "body": "<p>I'm trying to process a large list of numbers:</p>\n\n<pre><code>require 'benchmark'\n\nN = 999999\n\nBenchmark.bm 10 do |bm|\n   bm.report 'Eager:' do\n (0..N).select(&amp;:even?).map{|x| x * x}.reduce(&amp;:+)\n   end  \n   bm.report 'Lazy:' do\n (0..N).lazy.select(&amp;:even?).map{|x| x * x}.reduce(&amp;:+)\n   end  \n end;\n</code></pre>\n\n<p>To my understanding, the lazy version should be much faster, because the eager version needs to allocate two lists of half a million items each(one for <code>select</code> and one for <code>map</code>) while the lazy version is streaming everything.</p>\n\n<p>However, when I run it, the lazy version takes more than twice as long as the eager one! (<a href=\"http://rextester.com/OTEX7399\" rel=\"noreferrer\">http://rextester.com/OTEX7399</a>)</p>\n\n<pre><code>         user     system      total        real\nEager:       0.210000   0.010000   0.220000 (  0.216572)\nLazy:        0.580000   0.000000   0.580000 (  0.635091)\n</code></pre>\n\n<p>How can it be?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "chef-solo", "cookbook"], "answers": [{"tags": [], "owner": {"reputation": 675, "user_id": 771555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969a742cb368841cd092bf01cee0a01f?s=128&d=identicon&r=PG", "display_name": "andyfeller", "link": "https://stackoverflow.com/users/771555/andyfeller"}, "is_accepted": false, "score": 1, "last_activity_date": 1512476154, "creation_date": 1512476154, "answer_id": 47653433, "question_id": 47652903, "link": "https://stackoverflow.com/questions/47652903/edit-file-using-chef/47653433#47653433", "title": "Edit file using chef", "body": "<p>There is a fundamental flaw with this logic as chef-client will append the lines regardless if they are already in the file every time it runs.  I also don't think Chef really likes this approach.</p>\n\n<p>If you don't want to manage the whole file as a template, then you should use the <a href=\"https://github.com/sous-chefs/line-cookbook\" rel=\"nofollow noreferrer\">sous-chef/line-cookbook</a> as it has conditionals / guards built into it to prevent this problem.</p>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 2, "last_activity_date": 1512505913, "creation_date": 1512505913, "answer_id": 47662179, "question_id": 47652903, "link": "https://stackoverflow.com/questions/47652903/edit-file-using-chef/47662179#47662179", "title": "Edit file using chef", "body": "<p>Check out the <code>poise-file</code> and <code>line</code> cookbooks for examples of how to do this more safely.</p>\n\n<p>We overall do not recommend this approach as it creates very brittle code that is often non-convergent (as you noticed). The better method is to use a <code>template</code> resource to control the entire file in a convergent manner.</p>\n"}], "owner": {"reputation": 198, "user_id": 5720354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-XopWyeUMJmU/AAAAAAAAAAI/AAAAAAAAAEg/Cp_x2coVJoA/photo.jpg?sz=128", "display_name": "Malware Skiddie", "link": "https://stackoverflow.com/users/5720354/malware-skiddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1512505913, "creation_date": 1512474432, "question_id": 47652903, "link": "https://stackoverflow.com/questions/47652903/edit-file-using-chef", "title": "Edit file using chef", "body": "<p>I know there are a lot of answers plus solved ones too but nothing seems to work for me, What I'm trying to do is I want to add few lines of code after tomcat is completed with it's installation in /var/lib/tomcat8/conf/catalina.properties file.</p>\n\n<p>here is what i have tried so far the simple ruby way and with chef utils too.</p>\n\n<pre><code>File.open(\"/var/lib/tomcat8/conf/catalina.properties\", \"a+\") do |f|\n  f &lt;&lt; \"\\n\"\n  f &lt;&lt; \"javax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\"\nend\n\n\nruby_block \"insert_line\" do\n  block do\n    file = Chef::Util::FileEdit.new(\"/var/lib/tomcat8/conf/catalina.properties\")\n    file.insert_line_if_no_match(\"/javax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl/\", \"javax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\")\n    file.write_file\n  end\nend\n\n\n\nfile '/var/lib/tomcat8/conf/catalina.properties' do\n   action :create\n   owner 'root'\n   group 'root'\n   content File.open(\"/var/lib/tomcat8/conf/catalina.properties\", \"a+\") do |f|\n      f &lt;&lt; \"\\n\"\n      f &lt;&lt; \"javax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\"\n    end\nend\n\n\n\nfile '/var/lib/tomcat8/conf/catalina.properties' do\n   action :create\n   owner 'root'\n   group 'root'\n   content File.open(\"/var/lib/tomcat8/conf/catalina.properties\", \"a+\") do |f|\n      f &lt;&lt; \"\\n\"\n      f &lt;&lt; \"javax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\"\n    end\nend\n</code></pre>\n\n<p>I tried putting puts \"testing\" and it seems that chef isn't even getting into code.</p>\n"}, {"tags": ["ruby", "multithreading", "ruby-on-rails-3", "mutex"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1512474264, "post_id": 47652747, "comment_id": 82263722, "body": "The mutex emsures that your logic <code>Rate.rate_by_service</code> will be executed sequentielly but adds threading overhead. Without the mutex, it should faster. ;-)"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "reply_to_user": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1512474450, "post_id": 47652747, "comment_id": 82263852, "body": "but then won&#39;t it cause some values to be inconsistent? i.e. by removing mutex"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1512474679, "post_id": 47652747, "comment_id": 82263980, "body": "Depends on your implementation of <code>Rate.rate_by_service</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512475478, "post_id": 47653019, "comment_id": 82264502, "body": "Thanks @mudasobwa, but when i do as above, mutex.synchronize {rate &lt;&lt; result} i get &quot;Circular dependency detected while autoloading constant ServiceOption&quot;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512476109, "post_id": 47653019, "comment_id": 82264871, "body": "This is completely unrelated to the original question that was about why for this code multiple <code>Thread</code>s are not as performant as a single one."}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512477367, "post_id": 47653019, "comment_id": 82265653, "body": "i updated the code to how you sufggsted but still non-threading mode is faster. Could it be because of Active record cache? i see many results being fetched from cache in non-threading mode."}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512477546, "post_id": 47653019, "comment_id": 82265760, "body": "I have updated the questions with new readings post removing mutex"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512477552, "post_id": 47653019, "comment_id": 82265763, "body": "Cache? <code>ActiveRecord</code>? Are you kidding me? I am not a fortuneteller and not a spiritualist. Also, please immediately stop updating the question inplace after you have an answer received."}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512477630, "post_id": 47653019, "comment_id": 82265805, "body": "Hi Sorry, but i just want to clear my understanding, I did as you said, but I see difference, i just want to understand it better"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1512477631, "post_id": 47653019, "comment_id": 82265806, "body": "If you have any other question, don\u2019t hesitate to ask <i>a new other question</i>. This site is not a service to help you, what matters is a consistency between questions and answers for future readers."}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1512477887, "post_id": 47653019, "comment_id": 82265972, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/160514/discussion-between-opensource-developer-and-mudasobwa\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1512487855, "last_edit_date": 1512487855, "creation_date": 1512474796, "answer_id": 47653019, "question_id": 47652747, "link": "https://stackoverflow.com/questions/47652747/multi-thread-slower-than-single-thread-in-ruby/47653019#47653019", "title": "multi thread slower than single thread in ruby", "body": "<p>The whole executable block of every <code>Thread</code> is synchronized, making the code <em>fully synchronous</em>, but introducing an overhead on thread creation and context switch. What did you expect?</p>\n\n<p>To make it asynchronous, one should synchronize the original array update only:</p>\n\n<pre><code>1000.times do |_|\n  services.map do |service_obj|\n    Thread.new do\n      result = Rate.rate_by_service(...)\n      mutex.synchronize { rate &lt;&lt; result }\n    end\n  end.each(&amp;:join)\nend\n</code></pre>\n\n<p>Notice that the database query, <code>Rate.rate_by_service</code>, is made outside of the mutex synchronize.</p>\n"}], "owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 47653019, "answer_count": 1, "score": 0, "last_activity_date": 1512487855, "creation_date": 1512473986, "last_edit_date": 1512477565, "question_id": 47652747, "link": "https://stackoverflow.com/questions/47652747/multi-thread-slower-than-single-thread-in-ruby", "title": "multi thread slower than single thread in ruby", "body": "<p>I am trying to benchmark the below code, </p>\n\n<p>the method Rate.rate_by_service, does some DB calls / processing and returns a value</p>\n\n<pre><code>mutex = Mutex.new\nthread_arr = []\nputs Benchmark.measure{\n1000.times do |i|\n  services.each_with_index do |service_obj,index|\n    thread_arr[index] = Thread.new {\n      mutex.synchronize {\n        rate &lt;&lt; Rate.rate_by_service(service_obj,@package,@from,@to,@credentials) #does database calls / calcualtions and returns a value\n      }\n    }\n    #rate &lt;&lt; \n  end\n  thread_arr.each {|t| t.join}\nend\n}\n</code></pre>\n\n<p>The strange thing i have observed is that the multi threaded version is slower that the regular version(without threads)</p>\n\n<p>Here are the benchmarking results.</p>\n\n<pre><code> #threading\n 4.870000   0.490000   5.360000 (  6.846712)\n 5.300000   0.520000   5.820000 (  7.550946)\n 4.640000   0.480000   5.120000 (  6.720078)\n 4.580000   0.460000   5.040000 (  6.344415)\n 4.510000   0.450000   4.960000 (  6.312238)\n\n\n\n\n#no threading\n3.610000   0.240000   3.850000 (  4.088772)\n3.360000   0.200000   3.560000 (  3.721254)\n3.380000   0.190000   3.570000 (  3.795252)\n3.500000   0.200000   3.700000 (  4.156553)\n3.580000   0.210000   3.790000 (  4.183601)\n</code></pre>\n\n<p>is there something wrong that I am doing? Can anyone please elaborate as to why this behaviour could be happening.</p>\n\n<p><strong>I am using ruby 2.0, rails Rails 4.2.7.1</strong></p>\n"}, {"tags": ["arrays", "ruby", "activesupport"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 5, "creation_date": 1512473949, "post_id": 47652607, "comment_id": 82263518, "body": "<code>[responses].flatten</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1512479395, "post_id": 47652607, "comment_id": 82266961, "body": "Also <code>ActiveSupport</code> introduces <a href=\"http://api.rubyonrails.org/classes/Array.html#method-c-wrap\" rel=\"nofollow noreferrer\"><code>Array#wrap</code></a> that does exactly what you want."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1512481232, "post_id": 47652607, "comment_id": 82268159, "body": "@mudasobwa Perfect, <code>Array#wrap</code> is my choice."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512481435, "post_id": 47652607, "comment_id": 82268284, "body": "<i>&quot;either a hash or an array of hashes&quot;</i> \u2013 any chance to fix the API?"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 2, "last_activity_date": 1512475351, "creation_date": 1512475351, "answer_id": 47653187, "question_id": 47652607, "link": "https://stackoverflow.com/questions/47652607/array-method-versus-hashes/47653187#47653187", "title": "Array method versus hashes", "body": "<p>As @mudasobwa suggested, <code>[responses].flatten</code> is perhaps the cleanest solution:</p>\n\n<pre><code>[{a: 1}].flatten           #=&gt; [{:a=&gt;1}]\n[[{a: 1}, {b: 2}]].flatten #=&gt; [{:a=&gt;1}, {:b=&gt;2}]\n</code></pre>\n\n<p>Clearly this inconsistent response format is not a great API design; but that's unfortunately the nature of working with external resources...</p>\n\n<p>If each hash in the above array does represent a unique object, then I would leave that code as-is. However, if you actually have a different hash for each attribute of a single entity (?!), then you could further clean up the API response as follows:</p>\n\n<pre><code>[{a: 1}].flatten.reduce(:merge)           #=&gt; {:a=&gt;1}\n[[{a: 1}, {b: 2}]].flatten.reduce(:merge) #=&gt; {:a=&gt;1, :b=&gt;2}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1512481308, "creation_date": 1512481308, "answer_id": 47655063, "question_id": 47652607, "link": "https://stackoverflow.com/questions/47652607/array-method-versus-hashes/47655063#47655063", "title": "Array method versus hashes", "body": "<blockquote>\n  <p>I want to enclose it in an array if it is not already an array.</p>\n</blockquote>\n\n<p>What about:</p>\n\n<pre><code>result = [result] unless result.is_a? Array\n</code></pre>\n\n<p>Alternatively, using <a href=\"http://ruby-doc.org/core-2.4.2/Array.html#method-c-try_convert\" rel=\"nofollow noreferrer\"><code>try_convert</code></a>:</p>\n\n<pre><code>result = Array.try_convert(result) || [result]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1512498789, "last_edit_date": 1512498789, "creation_date": 1512491403, "answer_id": 47658334, "question_id": 47652607, "link": "https://stackoverflow.com/questions/47652607/array-method-versus-hashes/47658334#47658334", "title": "Array method versus hashes", "body": "<p><code>ActiveSupport</code> introduces <a href=\"http://api.rubyonrails.org/classes/Array.html#method-c-wrap\" rel=\"nofollow noreferrer\"><code>Array#wrap</code></a> that does exactly what you want:</p>\n\n<pre><code>Array.wrap(responses)\n</code></pre>\n\n<p>I personally prefer to never use any Rails helpers for many reasons, so I would stick with <code>[responses].flatten</code>, or, even better, with the most explicit version:</p>\n\n<pre><code>case responses\nwhen Hash then [responses]\nwhen Array then responses\nelse raise \"shit happened\"\nend\n</code></pre>\n"}], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 47658334, "answer_count": 3, "score": 1, "last_activity_date": 1512498789, "creation_date": 1512473519, "last_edit_date": 1512482268, "question_id": 47652607, "link": "https://stackoverflow.com/questions/47652607/array-method-versus-hashes", "title": "Array method versus hashes", "body": "<p>I have an object (returned from and API) that is either a hash or an array of hashes. I want to enclose it in an array if it is not already an array.</p>\n\n<p>I tried to apply <code>Array</code> on it, which functions in an expected way with numbers or arrays:</p>\n\n<pre><code>Array(1) # =&gt; [1]\nArray([1, 2]) # =&gt; [1, 2]\nArray([{a: 1}, {b: 2}]) # =&gt; [{:a=&gt;1}, {:b=&gt;2}]\n</code></pre>\n\n<p>but it fails with hashes:</p>\n\n<pre><code>Array({a: 1}) # =&gt; [[:a, 1]]\n</code></pre>\n\n<p>which should be <code>[{:a=&gt;1}]</code>.</p>\n\n<p>Alternatively, I could add a type check:</p>\n\n<pre><code>responses = [responses] if responses.is_a?(Hash)\n</code></pre>\n\n<p>Is there a better solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 4602, "user_id": 1141264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4af75d466ec6c84e3a0a9f1de61233ae?s=128&d=identicon&r=PG", "display_name": "DickieBoy", "link": "https://stackoverflow.com/users/1141264/dickieboy"}, "edited": false, "score": 0, "creation_date": 1512474284, "post_id": 47652515, "comment_id": 82263741, "body": "Its a little unclear what you are asking, can you reword your question."}, {"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1512475992, "post_id": 47652515, "comment_id": 82264804, "body": "Maybe you want to redirect rspec output into file? In this case unix stream might help you: <code>rspec spec &gt; rspec_result.txt</code>"}, {"owner": {"reputation": 115, "user_id": 7840402, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5T21u6_f_FI/AAAAAAAAAAI/AAAAAAAAACg/2rBSKgJ1CY0/photo.jpg?sz=128", "display_name": "Shubham Khandare", "link": "https://stackoverflow.com/users/7840402/shubham-khandare"}, "edited": false, "score": 0, "creation_date": 1512476136, "post_id": 47652515, "comment_id": 82264892, "body": "I want to write into Rspec output file from my ruby Rspec testcase code..like writing in std out"}, {"owner": {"reputation": 115, "user_id": 7840402, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5T21u6_f_FI/AAAAAAAAAAI/AAAAAAAAACg/2rBSKgJ1CY0/photo.jpg?sz=128", "display_name": "Shubham Khandare", "link": "https://stackoverflow.com/users/7840402/shubham-khandare"}, "reply_to_user": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1512476272, "post_id": 47652515, "comment_id": 82264974, "body": "@nattfodd thanks but  I have generated Rspec report with me. I just want to add some data to that file from testcases itself."}], "answers": [{"tags": [], "owner": {"reputation": 1178, "user_id": 2772562, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1544504978/picture?type=large", "display_name": "Goko Gorgiovski", "link": "https://stackoverflow.com/users/2772562/goko-gorgiovski"}, "is_accepted": true, "score": 3, "last_activity_date": 1512488531, "creation_date": 1512488531, "answer_id": 47657439, "question_id": 47652515, "link": "https://stackoverflow.com/questions/47652515/how-to-write-into-rspec-output-log-file-from-rspec-test-case/47657439#47657439", "title": "How to write into Rspec output log file from rspec test case?", "body": "<p>In your <code>spec_helper.rb</code> file write down this code</p>\n\n<pre><code>RSpec.configure do |config|\n  config.example_status_persistence_file_path = 'spec/examples.txt'\nend\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7840402, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5T21u6_f_FI/AAAAAAAAAAI/AAAAAAAAACg/2rBSKgJ1CY0/photo.jpg?sz=128", "display_name": "Shubham Khandare", "link": "https://stackoverflow.com/users/7840402/shubham-khandare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "accepted_answer_id": 47657439, "answer_count": 1, "score": 1, "last_activity_date": 1512488531, "creation_date": 1512473216, "last_edit_date": 1512477172, "question_id": 47652515, "link": "https://stackoverflow.com/questions/47652515/how-to-write-into-rspec-output-log-file-from-rspec-test-case", "title": "How to write into Rspec output log file from rspec test case?", "body": "<p>I have Rspec test cases but I want write some data from variables into Rspec output file for further processing, so how to write into output file generated by <code>--out rspec_results.html</code></p>\n\n\n\n\n\n\n"}, {"tags": ["ruby", "regex", "string-literals"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1512470044, "post_id": 47651429, "comment_id": 82261032, "body": "The backslash inside a double quoted string literal must be doubled. Or use a single quoted string literal. See <a href=\"https://ideone.com/NqLSk3\" rel=\"nofollow noreferrer\">ideone.com/NqLSk3</a>"}, {"owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "edited": false, "score": 3, "creation_date": 1512470050, "post_id": 47651429, "comment_id": 82261041, "body": "Your string does not have any backslashes in it."}, {"owner": {"reputation": 1, "user_id": 9055662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca884b99058315b2ad5d628444370e56?s=128&d=identicon&r=PG&f=1", "display_name": "explorer", "link": "https://stackoverflow.com/users/9055662/explorer"}, "edited": false, "score": 0, "creation_date": 1512470584, "post_id": 47651429, "comment_id": 82261370, "body": "If I put it in a variable it is coming as a=&#39;hello\\c /123&#39;.gsub(/\\s+|\\//, &quot;_&quot;) =&gt; &quot;hello\\\\c__123&quot; .   But puts gives correct output. How to get it in variable?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1512470802, "post_id": 47651429, "comment_id": 82261499, "body": "@explorer <code>&quot;hello\\h &#47;123&quot;</code> is not the same as <code>&#39;hello\\h &#47;123&#39;</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1512483603, "post_id": 47651429, "comment_id": 82269663, "body": "<code>\\h</code> is not an escape sequence. Therefore, <code>&quot;\\h&quot;</code> is equivalent to <code>&quot;h&quot;</code>.  From the <a href=\"http://ruby-doc.org/core-2.4.2/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\">documentation</a>: <i>&quot;Any other character following a backslash is interpreted as the character itself.&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 299351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3aa7f7e577ea8cd620462724ddf73b?s=128&d=identicon&r=PG", "display_name": "Rob Biedenharn", "link": "https://stackoverflow.com/users/299351/rob-biedenharn"}, "is_accepted": false, "score": 0, "last_activity_date": 1512604781, "creation_date": 1512604781, "answer_id": 47685476, "question_id": 47651429, "link": "https://stackoverflow.com/questions/47651429/retain-backslash-in-regex-in-gsub/47685476#47685476", "title": "Retain backslash in regex in &#39;gsub&#39;", "body": "<p>So, if you just want to convert space and slash with underscore, you might prefer:</p>\n\n<pre><code>\"hello\\h /123\".tr('/ ','__') # 2nd arg is two underscores\n#=&gt; \"helloh__123\"\n</code></pre>\n\n<p>(But I agree with the comments on the question so far.)</p>\n"}], "owner": {"reputation": 1, "user_id": 9055662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca884b99058315b2ad5d628444370e56?s=128&d=identicon&r=PG&f=1", "display_name": "explorer", "link": "https://stackoverflow.com/users/9055662/explorer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1512604781, "creation_date": 1512469950, "last_edit_date": 1512470175, "question_id": 47651429, "link": "https://stackoverflow.com/questions/47651429/retain-backslash-in-regex-in-gsub", "title": "Retain backslash in regex in &#39;gsub&#39;", "body": "<p>I want to replace spaces and forward slashes with an underscore, and retain backslashes.</p>\n\n<p>How do I do this?</p>\n\n<p>I have the following regex:</p>\n\n<pre><code>\"hello\\h /123\".gsub(/[\\s+\\/]/, \"_\")\n#=&gt; \"helloh__123\"\n</code></pre>\n\n<p>But it also replaces backslashes in the string.</p>\n"}, {"tags": ["ruby", "macos", "rhomobile", "rhodes"], "owner": {"reputation": 111, "user_id": 1213245, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/a58efeee01e2d1e85e12137430fa0374?s=128&d=identicon&r=PG", "display_name": "Priya Saini", "link": "https://stackoverflow.com/users/1213245/priya-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512465091, "creation_date": 1512465091, "question_id": 47649810, "link": "https://stackoverflow.com/questions/47649810/rubymacmalloc-error-for-object-0x802600-incorrect-checksum-for-freed-objec", "title": "RubyMacmalloc: *** error for object 0x802600: incorrect checksum for freed object - object was probably modified after being freed", "body": "<p>I am trying to generate the android/IOS build of Rhomobile. I tried generating it from both command line and Rhostudio.</p>\n\n<p>Getting this error:\nRubyMac(24369,0xa9a9e1c0) malloc: <strong>* error for object 0x802600: incorrect checksum for freed object - object was probably modified after being freed.\n*</strong> set a breakpoint in malloc_error_break to debug</p>\n\n<p>I am on mac with OS as high Sierra(10.13.1). While googling, I noticed RubyMac has some problem with Sierra. There were few hacks available, I tried but didn't work.</p>\n\n<p>Here is the reference link I followed.\n<a href=\"https://github.com/rhomobile/rhodes/commit/35a0e37ea790b22465b9d8b3c46d9936b3ca7ef0\" rel=\"nofollow noreferrer\">https://github.com/rhomobile/rhodes/commit/35a0e37ea790b22465b9d8b3c46d9936b3ca7ef0</a> </p>\n\n<p>Please suggest.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": false, "score": 0, "last_activity_date": 1512465172, "creation_date": 1512465172, "answer_id": 47649834, "question_id": 47649517, "link": "https://stackoverflow.com/questions/47649517/seed-images-using-carrierwave/47649834#47649834", "title": "seed images using carrierwave", "body": "<p>1 - in your app folder there should be a file called image_uploader.rb. And it should have a <code>def store_dir</code> which indicates where is your files are stored.</p>\n\n<p>2 - because full url is generated based on the above image_uploader.rb configuration file. You can simply get the url for example if your model instance variable is @picture</p>\n\n<pre><code>@picture = Picture.first\n@picture.image.thumb.url \n</code></pre>\n"}], "owner": {"reputation": 635, "user_id": 4232109, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/70307f472e7a6b98d1bd99ff4cca4fd9?s=128&d=identicon&r=PG&f=1", "display_name": "Phill ", "link": "https://stackoverflow.com/users/4232109/phill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512465172, "creation_date": 1512464035, "question_id": 47649517, "link": "https://stackoverflow.com/questions/47649517/seed-images-using-carrierwave", "title": "seed images using carrierwave", "body": "<p>I am trying to create a Angular 4 app that uses a rails API to display and upload images. to upload images using the rails API I have decided to use carrierwave. what I would like to know is how do I seed some initial images and store the url in the database? below is what I have done in my db.seed file</p>\n\n<pre><code>Pictures.create!(\n    image: Rails.root.join(\"C:/Ciaran/admin/src/assets/images/test_img1.jpg\").open,\n)\n</code></pre>\n\n<p>However where is the image stored in my rails app folder? I do not see it anywhere.</p>\n\n<p>And when I inspect the pictures table in MySQL for the image column the whole url is not displayed only test_img1.jpg? How do I make it show the full url?</p>\n\n<p>So basically if someone who knows more about rails and carrierwave could please explain to me:</p>\n\n<ol>\n<li><p>For the code snippet that I have shown above does that create a copy of the image into my rails app? because I do not see it in any of the apps folders once I have seeded the database?</p></li>\n<li><p>why is the full url not displayed in the database table for pictures and how do I get it to display the full url so I can access it from my angular front end?</p></li>\n</ol>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["android", "ruby", "cucumber", "appium", "watir"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512490495, "post_id": 47651118, "comment_id": 82274566, "body": "Nope , it doesn&#39;t work..  Most of the touch_action does work for mobile apps, whereas it does not work for mobile web view."}, {"owner": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512490662, "post_id": 47651118, "comment_id": 82274685, "body": "swipe is working fine in mobile app.. like Appium::TouchAction.new.swipe(start_x: 0.5, start_y: 0.2, end_x: 0.5, end_y: 0.8, duration:600).perform  works well in one of the app, but giving problem in mobile web view"}, {"owner": {"reputation": 488, "user_id": 3685973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e756c310d9a5f90650e26deb75d628fa?s=128&d=identicon&r=PG&f=1", "display_name": "barbudito", "link": "https://stackoverflow.com/users/3685973/barbudito"}, "reply_to_user": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512491408, "post_id": 47651118, "comment_id": 82275171, "body": "I am using it for both, mobile apps and mobile web view apps... How is exactly your line? What x,y, end_x, end_y, duration are you using? And what is your Appium version?"}, {"owner": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512492096, "post_id": 47651118, "comment_id": 82275600, "body": "appium version is 1.2.7....... start x, y co-ordinates  (Starting point from where we need to swipe) which i got from uiautomatiorviewer  .... and end x,y are the end point ."}, {"owner": {"reputation": 488, "user_id": 3685973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e756c310d9a5f90650e26deb75d628fa?s=128&d=identicon&r=PG&f=1", "display_name": "barbudito", "link": "https://stackoverflow.com/users/3685973/barbudito"}, "reply_to_user": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512493449, "post_id": 47651118, "comment_id": 82276463, "body": "First, could you please update your appium? I am working for example with v1.7.0 (and is not the latest one) And second, just for you to know. TouchAction coordinates are relative, so end_x and end_y don&#39;t represent coordinates from UIAutomatorViewer...  So if you want to move 200 to the right from start_x, end_x will be 200 (your limit is the screen size). If you want to move horizontally your end_y will be 0"}], "tags": [], "owner": {"reputation": 488, "user_id": 3685973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e756c310d9a5f90650e26deb75d628fa?s=128&d=identicon&r=PG&f=1", "display_name": "barbudito", "link": "https://stackoverflow.com/users/3685973/barbudito"}, "is_accepted": false, "score": 0, "last_activity_date": 1512469070, "creation_date": 1512469070, "answer_id": 47651118, "question_id": 47647946, "link": "https://stackoverflow.com/questions/47647946/horizontal-swipe-in-mobile-web-view-using-combination-of-appium-and-watir/47651118#47651118", "title": "Horizontal swipe in mobile web view using combination of appium and watir", "body": "<p>@Manmohan_singh answer might work but swipe method is <strong>deprecated</strong>... So you should use TouchScreen</p>\n\n<p><strong><em>Python code</em></strong>:</p>\n\n<pre><code>screenSize = driver.get_window_size()\nscreenWidth = screenSize['width']\nscreenHeight = screenSize['height']   \n\ntouchAction = TouchAction(driver)\n#Move slider from left to right (finger movement simulation goes from right to left)\ntouchAction.press(None, screenWidth - (screenWidth/3), y).wait(500).move_to(None, (screenWidth/3), 0).release().perform()\n</code></pre>\n\n<p>Hope it works</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512490301, "post_id": 47651247, "comment_id": 82274430, "body": "I have tried it but it shows error   &quot;NoMethodError: undefined method `touch_action&#39; for #&lt;Watir::Div:0x526a5e0&gt;&quot;"}, {"owner": {"reputation": 3036, "user_id": 4103101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wg02v.jpg?s=128&g=1", "display_name": "dmle", "link": "https://stackoverflow.com/users/4103101/dmle"}, "reply_to_user": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512490562, "post_id": 47651247, "comment_id": 82274613, "body": "Post exact code to your question that doesn&#39;t work for you. It will help understand the problem"}, {"owner": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "edited": false, "score": 0, "creation_date": 1512491473, "post_id": 47651247, "comment_id": 82275212, "body": "element =page.slide_display_element element returns element of that slider image                                                             then i performed touch action on that, element.touch_action(:swipe,distance: -100)   (this is for left move) element.touch_action(:flick,axis: &#39;y&#39;, distance:100,duration:50)  (Move downward)"}], "tags": [], "owner": {"reputation": 3036, "user_id": 4103101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wg02v.jpg?s=128&g=1", "display_name": "dmle", "link": "https://stackoverflow.com/users/4103101/dmle"}, "is_accepted": false, "score": 0, "last_activity_date": 1512469418, "creation_date": 1512469418, "answer_id": 47651247, "question_id": 47647946, "link": "https://stackoverflow.com/questions/47647946/horizontal-swipe-in-mobile-web-view-using-combination-of-appium-and-watir/47651247#47651247", "title": "Horizontal swipe in mobile web view using combination of appium and watir", "body": "<p>Take a look for <a href=\"https://github.com/Ricardonacif/touch_action\" rel=\"nofollow noreferrer\">https://github.com/Ricardonacif/touch_action</a>\nTouch action is what you should use for swiping</p>\n"}], "owner": {"reputation": 111, "user_id": 6760979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HX3Si7VFLck/AAAAAAAAAAI/AAAAAAAAGPc/4vmaDb0ErTI/photo.jpg?sz=128", "display_name": "Girish Bhamare", "link": "https://stackoverflow.com/users/6760979/girish-bhamare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 934, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512469418, "creation_date": 1512457691, "last_edit_date": 1512461801, "question_id": 47647946, "link": "https://stackoverflow.com/questions/47647946/horizontal-swipe-in-mobile-web-view-using-combination-of-appium-and-watir", "title": "Horizontal swipe in mobile web view using combination of appium and watir", "body": "<p>I am using  combination of <code>appium-android</code> and <code>watir-cucumber</code> in our automation  framework.<br/>\nIn mobile emulator i am opening one site in chrome browser.<br>\nI want to do horizontal swipe for one of the slider images.</p>\n\n<p>Let me know if anyone know any idea to swipe image from left to right or vice a versa?</p>\n\n<p>I have tried Appium's touch action but no luck so far.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "is_accepted": false, "score": 4, "last_activity_date": 1512467071, "last_edit_date": 1512467071, "creation_date": 1512459311, "answer_id": 47648353, "question_id": 47647897, "link": "https://stackoverflow.com/questions/47647897/usage-of-attr-accessor-in-a-rails-model-class/47648353#47648353", "title": "usage of attr_accessor in a rails model class", "body": "<p>Lets starts with OOPs, basically <code>class</code> is template which defines properties and behavior of its instances i.e. objects.</p>\n\n<p>The rails model also a ruby class. Its properties are being defined by <code>attr_accessor</code> and behaviors are defined by <code>static and instance methods</code>.</p>\n\n<p>Consider a class <code>with attr_accessor</code></p>\n\n<pre><code>class Animal\n      //defines animal properties\n      attr_accessor :legs\n      //defines animal behavior\n      def talk\n      end\nend\n</code></pre>\n\n<p>and <code>without attr_accessor</code></p>\n\n<pre><code>class Animal\n      //defines animal properties\n      //getter\n      def legs\n        @legs\n      end\n      //setter\n      def legs=(value)\n        @legs = value\n      end\n\n      //defines animal behavior\n      def talk\n      end\nend\n</code></pre>\n\n<p>Both representations are exactly same. The <code>attr_accessor</code> automatically add getter and setter for us and makes the life of developer easier.</p>\n\n<p>Lets answer you questions</p>\n\n<ol>\n<li><p>Ruby <code>attr_accessor</code> automatically adds these for you as explained earlier.</p></li>\n<li><p><code>form_step</code> its a attribute of <code>Pet class</code> and can be accessed as <code>petObj.form_step</code>.</p></li>\n<li><p>If table is associated/mapped with Model, then you don't have to define columns in tables as <code>attr_accessor</code>, Rails automatically takes care for you. If field or attribute not exists in table, then you need to manually define it as <code>attr_accessor</code> in <code>Model</code>.</p></li>\n</ol>\n\n<p>I hope this answers your question.</p>\n"}, {"tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": false, "score": 1, "last_activity_date": 1512467109, "last_edit_date": 1512467109, "creation_date": 1512459683, "answer_id": 47648434, "question_id": 47647897, "link": "https://stackoverflow.com/questions/47647897/usage-of-attr-accessor-in-a-rails-model-class/47648434#47648434", "title": "usage of attr_accessor in a rails model class", "body": "<p>Part of the Rails' magic is that when you have a class Pet and a table pets, you get the accessors for all the columns in the table for free. It's as if you've declared <code>attr-accessor</code> for all of them, only you don't need to. </p>\n\n<p>In your example, <code>#form_step</code> is not created in the table. But it is declared using <code>attr_accessor</code>. It works just like plain old ruby. This gives you a getter/setter (answer to your Q1). </p>\n\n<p>It's an instance method of Pet class. You call it on a Pet object, like <code>Pet.new.form_step = 5</code>(answer to Q2). </p>\n\n<p>But you can't persist whatever value you assign to <code>#form_step</code> to db. So the answer to Q3 is that you usually do this when you need to pass some messages (i.e. call methods) between your objects, but you don't need to persist them to db.</p>\n"}], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3998, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1512467109, "creation_date": 1512457496, "question_id": 47647897, "link": "https://stackoverflow.com/questions/47647897/usage-of-attr-accessor-in-a-rails-model-class", "title": "usage of attr_accessor in a rails model class", "body": "<p>Excuse me for the noob question.I am a newbie to ruby and rails and Needed some help in Understanding the attr_accessor which I have come across in the code</p>\n\n<pre><code>  create_table \"pets\", force: :cascade do |t|\n            t.string   \"name\"\n            t.string   \"colour\"\n            t.string   \"owner_name\"\n            t.text     \"identifying_characteristics\"\n            t.text     \"special_instructions\"\n            t.datetime \"created_at\"\n            t.datetime \"updated_at\"\n            t.string   \"email\"\n            t.string   \"password\"\n          end\n</code></pre>\n\n<p>model</p>\n\n<pre><code> class Pet &lt; ActiveRecord::Base\n  has_many :pet_photos\n  cattr_accessor :form_steps do\n    %w(identity characteristics instructions)\n  end\n\n  attr_accessor :form_step\n  validates :email, presence: true\n  validates :name, :owner_name, presence: true, if: -&gt; { required_for_step?(:identity) }\n  validates :identifying_characteristics, :colour, presence: true, if: -&gt; { required_for_step?(:characteristics) }\n  validates :special_instructions, presence: true, if: -&gt; { required_for_step?(:instructions) }\n\n  def required_for_step?(step)\n    return true if form_step.nil?\n    return true if self.form_steps.index(step.to_s) &lt;= self.form_steps.index(form_step)\n  end\n\n\n\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>      class Pet::StepsController &lt; ApplicationController\n        include Wicked::Wizard\n        steps *Pet.form_steps\n\n        def show\n          @pet = Pet.find(params[:pet_id])\n          render_wizard\n        end\n\n        def update\n          @pet = Pet.find(params[:pet_id])\n          @pet.update(pet_params(step))\n\n            if params[:images]\n\n                params[:images].each do |image|\n                @pet.pet_photos.create(image: image)\n              end\n            end\n\n          render_wizard @pet\n        end\n\n        private\n\n        def pet_params(step)\n          permitted_attributes = case step\n                                 when \"identity\"\n                                   [:name, :owner_name]\n                                 when \"characteristics\"\n                                   [:colour, :identifying_characteristics]\n                                 when \"instructions\"\n                                   [:special_instructions]\n                                 end\n\n          params.require(:pet).permit(permitted_attributes).merge(form_step: step)\n        end\n\n      end\n</code></pre>\n\n<p>routes</p>\n\n<pre><code>  PetThing::Application.routes.draw do\n          resources :pets, only: [:new, :create, :index, :destroy] do\n            resources :steps, only: [:show, :update], controller: 'pet/steps'\n          end\n\n          root to: 'pets#index'\n</code></pre>\n\n<p><strong>1)</strong> what  I all only know about  <code>attr_accessor</code>  is, it nothing more than a getter/setter for an object.I do not have a <code>form_step</code> as an attribute of my Pet Model(pets table).But in the model, there is <code>attr_accessor :form_step</code>.How is getter/setter generated to <code>:form_step</code> ?</p>\n\n<p><strong>2)</strong> Is <code>:form_step</code> an object of Pet class?</p>\n\n<p>I am not totally understanding the usage of <code>attr_accessor</code> method in Rails model class.</p>\n\n<p><strong>3)</strong> Kindly explain me a scenario where I must generate getter/setter for Model attributes (pets table attributes or fields)</p>\n\n<p>eg: <code>attr_accessor :name</code>\n      <code>attr_accessor :colour</code> ..etc</p>\n\n<p>when do we use <code>attr_accessor</code> for model attributes or fields?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "slim-lang"], "comments": [{"owner": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "edited": false, "score": 1, "creation_date": 1512457192, "post_id": 47646797, "comment_id": 82253755, "body": "You can find some useful syntax for slim <a href=\"https://stackoverflow.com/questions/12851843/ruby-slim-how-do-you-define-an-elements-class-with-a-rails-helper-or-variable?answertab=active#tab-top\">here</a>. However, I think if you want to stick with current syntax then there is no way to do."}], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "edited": false, "score": 0, "creation_date": 1512465898, "post_id": 47649156, "comment_id": 82258317, "body": "Yes, this works but I am looking for a way(if that is supported) to chain class attribute without doing a splat or using a delimiter."}, {"owner": {"reputation": 1079, "user_id": 3550170, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Pu9Na.png?s=128&g=1", "display_name": "Snake", "link": "https://stackoverflow.com/users/3550170/snake"}, "reply_to_user": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "edited": false, "score": 0, "creation_date": 1512466169, "post_id": 47649156, "comment_id": 82258474, "body": "I don&#39; believe that is possible."}], "tags": [], "owner": {"reputation": 1079, "user_id": 3550170, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Pu9Na.png?s=128&g=1", "display_name": "Snake", "link": "https://stackoverflow.com/users/3550170/snake"}, "is_accepted": false, "score": 3, "last_activity_date": 1512462693, "creation_date": 1512462693, "answer_id": 47649156, "question_id": 47646797, "link": "https://stackoverflow.com/questions/47646797/how-to-do-a-multi-line-class-attribute-with-slim-rails/47649156#47649156", "title": "How to do a multi-line class attribute with slim-rails?", "body": "<p>You need to use splat attribute that allows you to turn a hash into attribute/value pairs and then append a backslash to do multiline : </p>\n\n<pre><code>.first-class *{class: [\"second-class\", \\\n                       \"third-class\"]}\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2087, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1512462693, "creation_date": 1512452545, "question_id": 47646797, "link": "https://stackoverflow.com/questions/47646797/how-to-do-a-multi-line-class-attribute-with-slim-rails", "title": "How to do a multi-line class attribute with slim-rails?", "body": "<p>Element needs a lot of class attributes but I don't want them to be chucked in one line, as the line length will be too long and it would require heavy side scrolling.</p>\n\n<p>Preferably, I don't want to use the delimiter syntax <code>[class= \"\"]</code> as this syntax would be entirely inconsistent with the whole file.</p>\n\n<p>I tried doing this way:</p>\n\n<pre><code>span.select2.select2-container.select2-container--default \\\n  .select2-container--below.select2-container--focus\n</code></pre>\n\n<p>But the <code>\\</code> and the remaining class attribute names just gets rendered as text.</p>\n\n<p>Is there any possible way that I can chain class attributes in slim-lang a la ruby style, like this?</p>\n\n<pre><code>span.select2.select2-container.select2-container--default\n    .additional-cssklass\n    .whatever-class\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "comments": [{"owner": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "edited": false, "score": 0, "creation_date": 1512479499, "post_id": 47646796, "comment_id": 82267035, "body": "I would try googling \u201csearch with ransack\u201d. The first few results should be some excellent tutorials on getting started."}, {"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "reply_to_user": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "edited": false, "score": 0, "creation_date": 1512481158, "post_id": 47646796, "comment_id": 82268109, "body": "@ inveterateliterate I have implemented the advanced search, but problem is customer asking save these details and we can able to edit the search criteria. I am not getting any blog related to this."}, {"owner": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "edited": false, "score": 1, "creation_date": 1512491297, "post_id": 47646796, "comment_id": 82275099, "body": "I see. I recommend you share what you&#39;ve done so far, what you&#39;ve attempted to achieve your goals, and specifically where you&#39;re seeing issues."}], "owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1512458428, "creation_date": 1512452540, "last_edit_date": 1512458428, "question_id": 47646796, "link": "https://stackoverflow.com/questions/47646796/ransack-save-search-form-value-in-advanced-form-search-save-and-edit-these-deta", "title": "Ransack save search form value in advanced form search, save and edit these details", "body": "<p>I am developing an application for advanced search using ransack gem in ruby on rails. I am got stuck with the below problems</p>\n\n<ul>\n<li>How to save an form search value and save these details for later\nquery</li>\n<li>Edit the saved query by generating an form by taking the existing\nquery</li>\n<li>delete the query</li>\n</ul>\n\n<p>Please help me find the solution for this. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1512457986, "post_id": 47646794, "comment_id": 82254130, "body": "I think you&#39;re looking for concerns. <a href=\"https://stackoverflow.com/questions/14541823/how-to-use-concerns-in-rails-4\" title=\"how to use concerns in rails 4\">stackoverflow.com/questions/14541823/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "is_accepted": false, "score": 2, "last_activity_date": 1512504260, "creation_date": 1512504260, "answer_id": 47661785, "question_id": 47646794, "link": "https://stackoverflow.com/questions/47646794/dynamically-adding-activerecord-scopes/47661785#47661785", "title": "Dynamically adding ActiveRecord scopes", "body": "<p>Applying the concept of concerns, you may group together dependent scopes inside a module and include that module in the models as you need. Moreover as your scopes do accept arguments, using a class method is the preferred way in place of scopes. For more, please check <a href=\"http://guides.rubyonrails.org/active_record_querying.html#passing-in-arguments\" rel=\"nofollow noreferrer\">Passing in arguments.</a></p>\n\n<pre><code>module Clickable\n  extend ActiveSupport::Concern\n\n  class_methods do\n    def clicks_between(start_date, end_date)\n      # ...\n    end\n\n    def clicks_during(year)\n      year = Year.new(year) if year.is_a?(Integer)\n      send('clicks_between', year.start, year.end)\n    end\n  end\nend\n</code></pre>\n\n<p>In your model:</p>\n\n<pre><code>class SomeModel &lt; ActiveRecord::Base\n  include Clickable\nend\n\nclass OtherModel &lt; ActiveRecord::Base\n  has_many :some_models\nend\n</code></pre>\n\n<p>Now you can call scopes as usual:</p>\n\n<pre><code>SomeModel.clicks_during(2017)\nother_model.some_models.clicks_during(2017)\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\">ActiveSupport::Concern api</a></p>\n"}], "owner": {"reputation": 2055, "user_id": 120191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f8ab061502145dc35168e1b8735e755?s=128&d=identicon&r=PG", "display_name": "Huey", "link": "https://stackoverflow.com/users/120191/huey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512504260, "creation_date": 1512452530, "question_id": 47646794, "link": "https://stackoverflow.com/questions/47646794/dynamically-adding-activerecord-scopes", "title": "Dynamically adding ActiveRecord scopes", "body": "<p>I have many scopes that use date ranges to do something, e.g. clicks_between(start_date, end_date). I also have want to support adding in a school year string, where we have an existing SchoolYear that has a start and end methods.</p>\n\n<p>I could do something like:</p>\n\n<pre><code>scope :clicks_during, -&gt; (year) {\n    year = Year.new(year) if year.is_a?(Integer)\n    send('clicks_between', year.start, year.end) \n}\n</code></pre>\n\n<p>However, I'd rather not have to copy and paste this code everywhere. Is there a way to just dynamically add this scope if the \"betweeen\" scope exists already?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "search", "spree"], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1512451998, "post_id": 47646402, "comment_id": 82251886, "body": "I have tried adding the above in review.rb (model) file. But it results in an error ` no implicit conversion of true into Array `."}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1512460623, "post_id": 47646402, "comment_id": 82255552, "body": "solved the issue by defining the ranksackable method in the model. Thanks for your support."}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1512466864, "post_id": 47646402, "comment_id": 82258878, "body": "my bad, I didn&#39;t notice that you are inheriting it from ActiveRecord::Base and not from Spree::Base Updated my answer"}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 1, "last_activity_date": 1512466813, "last_edit_date": 1512466813, "creation_date": 1512450131, "answer_id": 47646402, "question_id": 47646380, "link": "https://stackoverflow.com/questions/47646380/undefined-method-for-variable-cont-in-spree-ruby-on-rails/47646402#47646402", "title": "Undefined method for &lt;variable&gt;_cont in spree - Ruby on Rails", "body": "<p>@cliffs - To be able to search by using ransack gem, you will first have to whitelist all those fields on which you wanna perform the search. So in your <code>review.rb</code> model add the following line if you are inheriting it from <code>Spree::Base</code> -</p>\n\n<p><code>self.whitelisted_ransackable_attributes = %w[title, review]</code></p>\n\n<p>else if you are inheriting it from <code>ActiveRecord::Base</code> you have to define <code>ransackable_attributes</code> as a class method</p>\n\n<pre><code>def self.ransackable_attributes(auth_object = nil)\n    ['title','review','user']\nend\n</code></pre>\n\n<p>and now try to search using <code>ransack</code>.</p>\n\n<p>Hope this helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "is_accepted": true, "score": 1, "last_activity_date": 1512476367, "last_edit_date": 1512476367, "creation_date": 1512460531, "answer_id": 47648641, "question_id": 47646380, "link": "https://stackoverflow.com/questions/47646380/undefined-method-for-variable-cont-in-spree-ruby-on-rails/47648641#47648641", "title": "Undefined method for &lt;variable&gt;_cont in spree - Ruby on Rails", "body": "<p>Issue has been solved! </p>\n\n<p>Defined the ransackable_attributes method in associated model <code>Review.rb</code> for custom searchable attributes of that model.</p>\n\n<pre><code>def self.ransackable_attributes(auth_object = nil)\n    ['title','review','user']\nend\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 47648641, "answer_count": 2, "score": 0, "last_activity_date": 1512533977, "creation_date": 1512449970, "last_edit_date": 1512533977, "question_id": 47646380, "link": "https://stackoverflow.com/questions/47646380/undefined-method-for-variable-cont-in-spree-ruby-on-rails", "title": "Undefined method for &lt;variable&gt;_cont in spree - Ruby on Rails", "body": "<p>I am trying to do a search in the spree backend in reviews listing page. \nBut am getting <strong><em>undefined method error</em></strong> for the fields. Eg: undefined method <code>title_cont' , undefined method</code>review _cont'. </p>\n\n<p>Hereby am posting my controller:</p>\n\n<p><strong><em>reviews_controller.rb</em></strong></p>\n\n<pre><code>class Spree::Admin::ReviewsController &lt; Spree::Admin::ResourceController\n      helper Spree::ReviewsHelper\n\n     def index\n     @reviews = Spree::Review.ransack(params[:q]).result\n     end\n\n      def approve\n      r = Spree::Review.find(params[:id])\n\n      if r.update_attribute(:approved, true)\n      flash[:notice] = Spree.t(\"info_approve_review\")\n      else\n      flash[:error] = Spree.t(\"error_approve_review\")\n      end\n      redirect_to admin_reviews_path\n      end\n\n      def edit\n      if @review.product.nil?\n      flash[:error] = Spree.t(\"error_no_product\")\n      redirect_to admin_reviews_path and return\n      end\n      end\n\n      private\n\n      def collection\n      params[:q] ||= {}\n      @search = Spree::Review.ransack(params[:q])\n      @collection = @search.result.includes([:product, :user, :feedback_reviews]).page(params[:page]).per(params[:per_page])\n      end\n      end\n</code></pre>\n\n<p>Model File : <strong><em>review.rb</em></strong></p>\n\n<pre><code>class Spree::Review &lt; ActiveRecord::Base\n\n      belongs_to :product, touch: true\n      belongs_to :user, :class_name =&gt; Spree.user_class.to_s\n      has_many   :feedback_reviews\n\n      after_save :recalculate_product_rating, :if =&gt; :approved?\n      after_destroy :recalculate_product_rating\n\n      validates :name, presence: true\n      validates :review, presence: true\n\n      validates :rating, numericality: { only_integer: true,\n      greater_than_or_equal_to: 1, \n      less_than_or_equal_to: 5,\n      message: Spree.t('you_must_enter_value_for_rating') }\n\n\n      default_scope { order(\"spree_reviews.created_at DESC\") }\n\n      scope :localized, -&gt;(lc) { where('spree_reviews.locale = ?', lc) }\n      scope :most_recent_first, -&gt; { order('spree_reviews.created_at DESC') }\n      scope :oldest_first, -&gt; { reorder('spree_reviews.created_at ASC') }\n      scope :preview, -&gt; { limit(Spree::Reviews::Config[:preview_size]).oldest_first }\n      scope :approved, -&gt; { where(approved: true) }\n      scope :not_approved, -&gt; { where(approved: false) }\n      scope :default_approval_filter, -&gt; { Spree::Reviews::Config[:include_unapproved_reviews] ? all : approved }\n\n      def feedback_stars\n      return 0 if feedback_reviews.size &lt;= 0\n      ((feedback_reviews.sum(:rating) / feedback_reviews.size) + 0.5).floor\n      end\n\n      def set_search\n      @search=Product.search(params[:q])\n      end\n\n      def recalculate_product_rating\n      self.product.recalculate_rating if product.present?\n      end\n      end\n</code></pre>\n\n<p><strong><em>Index.html.erb</em></strong></p>\n\n<pre><code>&lt;% content_for :table_filter do %&gt;\n&lt;div data-hook=\"admin_reviews_index_search\"&gt;\n &lt;%= search_form_for [:admin, @search] do |f| %&gt;   \n &lt;div class=\"alpha three columns\"&gt;\n    &lt;div class=\"field\"&gt;\n    &lt;%= label_tag nil, Spree.t(:user) %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :name_cont,:size =&gt; 25 %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"four columns\"&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= label_tag nil, Spree.t(:title) -%&gt;&lt;br/&gt;\n        &lt;%= f.text_field :title_cont, :size =&gt; 25%&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"four columns\"&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= label_tag nil, Spree.t(:review) -%&gt;&lt;br/&gt;\n        &lt;%= f.text_field :review_cont, :size =&gt; 25 ,:value =&gt; \"\"%&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"two columns omega\"&gt;\n\n&lt;/div&gt;\n\n    &lt;div class=\"clear\"&gt;&lt;/div&gt;\n\n    &lt;div class=\"form-buttons actions filter-actions\" data-hook=\"admin_reviews_index_search_buttons\"&gt;\n        &lt;%= button Spree.t(:search), 'icon-search' %&gt;\n    &lt;/div&gt;\n&lt;%- end -%&gt;\n</code></pre>\n\n<p></p>\n\n\n\n<p>Getting undefined when i use the above mentioned variables. Please help me to solve this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1512451214, "last_edit_date": 1512451214, "creation_date": 1512450861, "answer_id": 47646513, "question_id": 47646072, "link": "https://stackoverflow.com/questions/47646072/confusion-on-ruby-symbols-in-to-json/47646513#47646513", "title": "Confusion on Ruby symbols in to_json", "body": "<p>It has nothing to do with values being taken from instance variables instead of strings; all it has to do with is keys being symbols.</p>\n\n<p>Old Ruby had only one object literal syntax, with each key/value pair</p>\n\n<pre><code>key =&gt; value\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>{ \"foo\" =&gt; \"bar\", 2 =&gt; 4, :name =&gt; \"value\" }\n</code></pre>\n\n<p>where <code>\"foo\"</code> is a string key, <code>2</code> an integer key, and <code>:name</code> a symbol key.</p>\n\n<p>However, it was found that symbol keys were used very, very often, especially as an alternative to (then missing from language) keyword parameters to functions:</p>\n\n<pre><code>link_to \"Delete\", thing, :method =&gt; :delete, :data =&gt; { :confirm =&gt; \"Sure?\" }\n</code></pre>\n\n<p>which is actually a shortcut for</p>\n\n<pre><code>link_to(\"Delete\", thing, { :method =&gt; :delete, :data =&gt; { :confirm =&gt; \"Sure?\" } })\n</code></pre>\n\n<p>To make this kind of construction less verbose, and more intuitive as using keywords, a new syntax was developed as a shortcut, specifically for keys that are symbols, where</p>\n\n<pre><code>key: value\n</code></pre>\n\n<p>is an alternative to the older but identical</p>\n\n<pre><code>:key =&gt; value\n</code></pre>\n\n<p>So the above hash could have been written as</p>\n\n<pre><code>{ \"foo\" =&gt; \"bar\", 2 =&gt; 4, name: \"value\" }\n</code></pre>\n\n<p>(although I don't recommend it in this case, because mixing the two styles is kind of icky.)</p>\n\n<p>Using this new syntax, the above command could be written so:</p>\n\n<pre><code>link_to \"Delete\", thing, method: :delete, data: { confirm: \"Sure?\" }\n</code></pre>\n\n<p>Thus, there is absolutely no difference if you write</p>\n\n<pre><code>{ :email =&gt; @email, :name =&gt; @name, :permissions =&gt; @permissions }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>{ email: @email, name: @name, permissions: @permissions }\n</code></pre>\n\n<p>Currently, the latter one is preferred, as it is shorter and more readable. However, in many cases if the code has been around since pre-Ruby-1.9, one can still find the old syntax floating around.</p>\n"}], "owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "closed_date": 1512451095, "accepted_answer_id": 47646513, "answer_count": 1, "score": -1, "last_activity_date": 1512451214, "creation_date": 1512447909, "question_id": 47646072, "link": "https://stackoverflow.com/questions/47646072/confusion-on-ruby-symbols-in-to-json", "closed_reason": "Duplicate", "title": "Confusion on Ruby symbols in to_json", "body": "<p>im working through a Rails udemy course and were touching on the part of just ruby right now (Which I have NO experience with so this is all new to me).</p>\n\n<p>In this portion were basically taking \"permissions\" from a permissions file and putting it into a \"user json\".</p>\n\n<pre><code>require 'json'\n\nclass User\n\n\n  attr_accessor :email, :name, :permissions \n\n  def initialize(*args)\n    @email = args[0]\n    @name = args[1]\n    @permissions = User.permissions_from_template\n\n  end\n\n  def self.permissions_from_template\n    file = File.read 'user_permissions_template.json'\n    JSON.load(file, nil, symbolize_names: true)\n  end\n\n  def save\n   self_json = {email: @email, name: @name, permissions: @permissions}.to_json\n   open('users.json', 'a') do |file|\n     file.puts self_json\n   end\n  end\nend\n</code></pre>\n\n<p>There is a simple <code>runner.rb</code> file which creates the user and initializes it, thats not my question though. Basically my question is the <code>self_json = {email: @email, name: @name, permissions: @permissions}.to_json</code></p>\n\n<p>Ive read the <code>to_json</code> API and it's simple enough, but every example of a ruby object i've seen looks like this: <code>{:email =&gt; @email, :name =&gt; @name, :permissions =&gt; @permissions}</code> except replace the <code>@</code> symbols with <code>\"strings\"</code> </p>\n\n<p>Im getting confused between the variable types of <code>@variable</code> and <code>:variable</code>. </p>\n\n<p>Are we not using <code>:var =&gt; @whatever</code> since were using <code>@</code> variables or?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "edited": false, "score": 0, "creation_date": 1512457326, "post_id": 47645923, "comment_id": 82253824, "body": "Add in <code>data: { confirm: &#39;Are you sure?&#39; } </code>"}, {"owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "reply_to_user": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "edited": false, "score": 0, "creation_date": 1512465268, "post_id": 47645923, "comment_id": 82257945, "body": "Thanks @jemonsanto. Edited the answer to include the data confirmation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "edited": false, "score": 0, "creation_date": 1512494555, "post_id": 47645923, "comment_id": 82277177, "body": "&lt;%= link_to user_avatar_path(@user), method: :delete, data: { confirm: &#39;Are you sure&#39; } do %&gt; &lt;%= image_tag @user.avatar.avatarpic %&gt; &lt;% end %&gt; works  You are basically right."}, {"owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "edited": false, "score": 0, "creation_date": 1512532973, "post_id": 47645923, "comment_id": 82292269, "body": "Great. Well, an answer is already accepted so could you please upvote this :)"}], "tags": [], "owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "is_accepted": false, "score": 0, "last_activity_date": 1512465241, "last_edit_date": 1512465241, "creation_date": 1512446789, "answer_id": 47645923, "question_id": 47645885, "link": "https://stackoverflow.com/questions/47645885/converting-an-image-tag-into-a-link-that-goes-to-the-destroy-route/47645923#47645923", "title": "Converting an image_tag into a link that goes to the destroy route", "body": "<p>I'm not in front of my PC but this should work:</p>\n\n<pre><code>&lt;%= link_to destroy_path, method: :delete, data: { confirm: 'Are you sure?' } do %&gt;\n   &lt;%= image_tag @user.avatar.avatarpic %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Please try and let me know if it does.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "edited": false, "score": 1, "creation_date": 1512491801, "post_id": 47648072, "comment_id": 82275423, "body": "&lt;%= link_to user_avatar_path(@user), method: :delete, data: { confirm: &#39;Are you sure&#39; } do %&gt;   &lt;%= image_tag @user.avatar.avatarpic %&gt; &lt;% end %&gt;  works"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "edited": false, "score": 0, "creation_date": 1512494506, "post_id": 47648072, "comment_id": 82277135, "body": "Thank you for your help."}], "tags": [], "owner": {"reputation": 307, "user_id": 5109793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36498fee1b7985307360dc86bbba25a8?s=128&d=identicon&r=PG&f=1", "display_name": "Chivorn Kouch", "link": "https://stackoverflow.com/users/5109793/chivorn-kouch"}, "is_accepted": true, "score": 0, "last_activity_date": 1512458187, "creation_date": 1512458187, "answer_id": 47648072, "question_id": 47645885, "link": "https://stackoverflow.com/questions/47645885/converting-an-image-tag-into-a-link-that-goes-to-the-destroy-route/47648072#47648072", "title": "Converting an image_tag into a link that goes to the destroy route", "body": "<p>Following the route you give above, please try this:</p>\n\n<pre><code>&lt;%= link_to user_avatar_path, method: :delete, data: { confirm: 'Are you sure' } do %&gt;\n  &lt;%= image_tag @user.avatar.avatarpic %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7944307"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 47648072, "answer_count": 2, "score": 0, "last_activity_date": 1512465241, "creation_date": 1512446514, "question_id": 47645885, "link": "https://stackoverflow.com/questions/47645885/converting-an-image-tag-into-a-link-that-goes-to-the-destroy-route", "title": "Converting an image_tag into a link that goes to the destroy route", "body": "<p>I would like to convert this line of code into a link that goes to the destroy route in my routes table.  When this picture is pressed it will delete the current photo.</p>\n\n<pre><code>&lt;%= image_tag @user.avatar.avatarpic %&gt;\n</code></pre>\n\n<p>The route is as follows:</p>\n\n<pre><code>user_avatar DELETE /users/:user_id/avatars/:id(.:format) avatars#destroy\n</code></pre>\n\n<p>The Avatar controller is as follow:</p>\n\n<pre><code>class AvatarsController &lt; ApplicationController\n\n  def create\n    @user = User.find(params[:user_id])\n    @avatar = Avatar.new(avatar_params)\n    @avatar.user = @user\n    @avatar.save\n    # Three lines above can be replaced with \n    # @user.create_avatar(params)\n    redirect_to user_path(@user)\n  end\n\nprivate\n\ndef avatar_params\n  params.require(:avatar).permit(:avatarpic)\nend\n\nend\n</code></pre>\n\n<p>Currently I have an if/else statement that will display a default image if an avatar photo isn't available:</p>\n\n<pre><code>&lt;% if @user.avatar.present? %&gt;\n  &lt;%= image_tag @user.avatar.avatarpic %&gt;\n&lt;% else %&gt;\n  &lt;%= image_tag 'user.png' %&gt;\n  &lt;a href=\"#\" class=\"add-image\" data-toggle=\"modal\" data-\n  target=\"#avatarpic\"&gt;\n    Add a Picture\n  &lt;/a&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I would also like for a message to display once the mouse is hovering over the current avatar photo.  It will say something to the effect of \"Upload a different image\".  Once pressed, there should be a warning that asks the user \"Are you sure you would like to delete this image?\".  Thank you for your help.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1512450536, "post_id": 47645404, "comment_id": 82251413, "body": "@sawa, the question you reference asks whether <code>do...end</code> or <code>{...}</code> should be used, generally, which is different than this question, but the selected answer to the referenced question is indeed the answer to this question. Does that make this a dup of the earlier question? Interesting."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4502060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12dc0de6eebc2e695983c495b78f0f09?s=128&d=identicon&r=PG&f=1", "display_name": "Fluffy Ribbit", "link": "https://stackoverflow.com/users/4502060/fluffy-ribbit"}, "edited": false, "score": 0, "creation_date": 1512445463, "post_id": 47645507, "comment_id": 82250030, "body": "So, why doesn&#39;t calling p with a block not throw an error and also not seem to do anything?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 169, "user_id": 4502060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12dc0de6eebc2e695983c495b78f0f09?s=128&d=identicon&r=PG&f=1", "display_name": "Fluffy Ribbit", "link": "https://stackoverflow.com/users/4502060/fluffy-ribbit"}, "edited": false, "score": 1, "creation_date": 1512446851, "post_id": 47645507, "comment_id": 82250399, "body": "@FluffyRibbit Why would it throw an error? You can call any method with a block, it is up to the method to use the block if it wants it. Unfortunately, there is no way for a method to say that it requires a block or doesn&#39;t want one."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1512469980, "post_id": 47645507, "comment_id": 82260985, "body": "@muistooshort Can&#39;t a method say that with <code>raise &quot;I require a block&quot; unless block_given?</code> and <code>raise &quot;I don&#39;t want a block&quot; if block_given?</code>?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1512498461, "post_id": 47645507, "comment_id": 82279551, "body": "@StefanPochmann It can but that&#39;s very different than saying <code>def m(x)</code> to indicate that one parameter is required, or <code>def m(x:)</code> to require a keyword argument, or some hypothetical <code>def m(something_something_I_require_a_block)</code>, ... Taking a block is by convention rather than part of the method signature. You can do it by hand but no one does so it isn&#39;t very Rubyish (a word which gets autocorrected to &quot;Rubbish&quot;, ha ha). Ruby has some odd ideas about how you should do things."}], "tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": true, "score": 3, "last_activity_date": 1512444140, "last_edit_date": 1512444140, "creation_date": 1512443840, "answer_id": 47645507, "question_id": 47645404, "link": "https://stackoverflow.com/questions/47645404/ruby-blocks-behave-unexpectedly-when-using-do/47645507#47645507", "title": "Ruby blocks behave unexpectedly when using &quot;do&quot;", "body": "<p>It is due to argument precedence with the <code>do</code> block.</p>\n\n<p>Your first example is equivalent to:</p>\n\n<p><code>p(passphrases.count {|phrase| validate(phrase)})</code></p>\n\n<p>The second one with the <code>do</code> block is equivalent to:</p>\n\n<pre><code>p(passphrases.count) do |phrase| \n  validate(phrase)\nend\n</code></pre>\n\n<p>Where the <code>do</code> is being applied to the <code>p</code> function.</p>\n\n<p>If you want the second case to match the first, wrap the whole block in parenthesis:</p>\n\n<pre><code>p(passphrases.count do |phrase| \n  validate(phrase)\nend)\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4502060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12dc0de6eebc2e695983c495b78f0f09?s=128&d=identicon&r=PG&f=1", "display_name": "Fluffy Ribbit", "link": "https://stackoverflow.com/users/4502060/fluffy-ribbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1512445968, "accepted_answer_id": 47645507, "answer_count": 1, "score": 1, "last_activity_date": 1512445915, "creation_date": 1512443030, "last_edit_date": 1512445915, "question_id": 47645404, "link": "https://stackoverflow.com/questions/47645404/ruby-blocks-behave-unexpectedly-when-using-do", "closed_reason": "Duplicate", "title": "Ruby blocks behave unexpectedly when using &quot;do&quot;", "body": "<p>I was trying to solve a <a href=\"https://adventofcode.com/2017/day/4\" rel=\"nofollow noreferrer\">coding puzzle</a>: Take strings, and count the ones that don't include repeated words.</p>\n\n<p>This code works:</p>\n\n<pre><code>def validate(passphrase)\n  words = passphrase.split\n  words == words.uniq\nend\n\npassphrases = File.readlines(\"../input/passphrases.txt\")\n\np passphrases.count {|phrase| validate(phrase)}\n#=&gt; 337\n</code></pre>\n\n<p>If I make one minor change with the count block, it counts all of the passphrases instead of just the ones that would return true when passed through the block:</p>\n\n<pre><code>p passphrases.count do |phrase| \n  validate(phrase)\nend\n#=&gt;512\n</code></pre>\n\n<p>What's up with this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "answers": [{"tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": true, "score": 1, "last_activity_date": 1512462250, "creation_date": 1512462250, "answer_id": 47649028, "question_id": 47645168, "link": "https://stackoverflow.com/questions/47645168/errors-when-making-spree-to-work/47649028#47649028", "title": "errors when making spree to work?", "body": "<p>given this <a href=\"https://stackoverflow.com/questions/27526332/cant-create-a-new-spree-app-undefined-method-raise-in-transactional-callback?noredirect=1&amp;lq=1\">post</a>, I would try to do <code>bundle update</code> or follow the instruction in that post </p>\n\n<p><a href=\"https://stackoverflow.com/questions/27526332/cant-create-a-new-spree-app-undefined-method-raise-in-transactional-callback?noredirect=1&amp;lq=1\">Can&#39;t create a new Spree app: &quot;undefined method `raise_in_transactional_callbacks=&#39;&quot;</a> </p>\n"}], "owner": {"reputation": 2821, "user_id": 734861, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/898cac257f853f8bf0a1a84a67d88c40?s=128&d=identicon&r=PG", "display_name": "kofhearts", "link": "https://stackoverflow.com/users/734861/kofhearts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 47649028, "answer_count": 1, "score": 0, "last_activity_date": 1512462250, "creation_date": 1512441135, "question_id": 47645168, "link": "https://stackoverflow.com/questions/47645168/errors-when-making-spree-to-work", "title": "errors when making spree to work?", "body": "<p>First of all i am following the steps from the official documentation</p>\n\n<p><a href=\"https://github.com/spree/spree\" rel=\"nofollow noreferrer\">https://github.com/spree/spree</a></p>\n\n<p>I have Rails 5.1 installed so i copied the following gems and ran bundle install</p>\n\n<pre><code>gem 'spree', '~&gt; 3.4.0'\ngem 'spree_auth_devise', '~&gt; 3.3'\ngem 'spree_gateway', '~&gt; 3.3'\n</code></pre>\n\n<p>Also i ran</p>\n\n<pre><code>bundle update i18n\n</code></pre>\n\n<p>When i run the first generator</p>\n\n<pre><code>rails g spree:install --user_class=Spree::User\n</code></pre>\n\n<p>i get the following error</p>\n\n<pre><code>rails g spree:install --user_class=Spree::User\n/usr/local/rvm/gems/ruby-2.3.4/gems/activerecord-5.1.4/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activerecord-5.1.4/lib/active_record/railtie.rb:112:in `block (3 levels) in &lt;class:Railtie&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activerecord-5.1.4/lib/active_record/railtie.rb:111:in `each'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activerecord-5.1.4/lib/active_record/railtie.rb:111:in `block (2 levels) in &lt;class:Railtie&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `instance_eval'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `block in execute_hook'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:60:in `with_execution_control'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:65:in `execute_hook'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:41:in `block in on_load'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:40:in `each'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:40:in `on_load'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activerecord-5.1.4/lib/active_record/railtie.rb:110:in `block in &lt;class:Railtie&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/railties-5.1.4/lib/rails/initializable.rb:30:in `instance_exec'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/railties-5.1.4/lib/rails/initializable.rb:30:in `run'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/railties-5.1.4/lib/rails/initializable.rb:59:in `block in run_initializers'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:347:in `each'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:347:in `call'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/railties-5.1.4/lib/rails/initializable.rb:58:in `run_initializers'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/railties-5.1.4/lib/rails/application.rb:353:in `initialize!'\n        from /home/ubuntu/workspace/config/environment.rb:5:in `&lt;top (required)&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `block in require'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:258:in `load_dependency'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/spring-2.0.2/lib/spring/application.rb:102:in `preload'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/spring-2.0.2/lib/spring/application.rb:153:in `serve'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/spring-2.0.2/lib/spring/application.rb:141:in `block in run'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/spring-2.0.2/lib/spring/application.rb:135:in `loop'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/spring-2.0.2/lib/spring/application.rb:135:in `run'\n        from /usr/local/rvm/gems/ruby-2.3.4/gems/spring-2.0.2/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from /usr/local/rvm/rubies/ruby-2.3.4/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from -e:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["arrays", "json", "ruby", "hash"], "comments": [{"owner": {"reputation": 5219, "user_id": 4724167, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/2CiEe.jpg?s=128&g=1", "display_name": "Nandu Kalidindi", "link": "https://stackoverflow.com/users/4724167/nandu-kalidindi"}, "edited": false, "score": 0, "creation_date": 1512438428, "post_id": 47644777, "comment_id": 82248265, "body": "Well, that&#39;s how you access any array usually."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1512465142, "post_id": 47644777, "comment_id": 82257857, "body": "&quot;I know this is wrong&quot; is not a precise enough error description for us to help you. <i>What</i> is wrong? <i>How</i> is it wrong? How do you know? What doesn&#39;t work? How doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6294406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42b9115b07024695f3ff80af3708cde?s=128&d=identicon&r=PG&f=1", "display_name": "megatron_6560", "link": "https://stackoverflow.com/users/6294406/megatron-6560"}, "edited": false, "score": 0, "creation_date": 1512440949, "post_id": 47644954, "comment_id": 82248868, "body": "Thank you! However irb is returning nil when entering the second code suggestion."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 19, "user_id": 6294406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42b9115b07024695f3ff80af3708cde?s=128&d=identicon&r=PG&f=1", "display_name": "megatron_6560", "link": "https://stackoverflow.com/users/6294406/megatron-6560"}, "edited": false, "score": 1, "creation_date": 1512441283, "post_id": 47644954, "comment_id": 82248983, "body": "What does <code>Mentions.data[1]</code> return?"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1512439534, "creation_date": 1512439534, "answer_id": 47644954, "question_id": 47644777, "link": "https://stackoverflow.com/questions/47644777/accessing-specific-elements-in-nested-array/47644954#47644954", "title": "Accessing specific elements in nested array", "body": "<p>Print <code>Mentions.data[1]</code> to see what Ruby sees.</p>\n\n<pre><code>{:Book =&gt; \"1: SS\",\n :Concordance =&gt; \n  \"oh, move over, hermione snarled, she grabbed Harry\u2019s \\n\" +\n  \"    wand, tapped the lock, and whispered, alohomora! the lock clicked and \\n\" +\n  \"    the door swung open \u2014 they piled through it, shut it quickly,\",\n :Position =&gt; 47346,\n :Spell =&gt; \"alohomora\"}\n</code></pre>\n\n<p>Then it's clear to see we use:</p>\n\n<pre><code>Mentions.data[1][:Spell] #=&gt; \"alohomora\"\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6294406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42b9115b07024695f3ff80af3708cde?s=128&d=identicon&r=PG&f=1", "display_name": "megatron_6560", "link": "https://stackoverflow.com/users/6294406/megatron-6560"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512446148, "creation_date": 1512438209, "last_edit_date": 1512446148, "question_id": 47644777, "link": "https://stackoverflow.com/questions/47644777/accessing-specific-elements-in-nested-array", "title": "Accessing specific elements in nested array", "body": "<p>I am trying to access this array of hashes:</p>\n\n<pre><code>[  \n  {\n    \"Book\": \"1: SS\",\n    \"Concordance\": \". they tugged and heaved at the door, but it \n    wouldn\u2019tbudge, not even when hermione tried her alohomora charm, now \n    what? said ron, these birds \u2026 they can\u2019t be here just for decoration,\",\n    \"Position\": 82471,\n    \"Spell\": \"alohomora\"\n  },\n  {\n    \"Book\": \"1: SS\",\n    \"Concordance\": \"oh, move over, hermione snarled, she grabbed Harry\u2019s \n    wand, tapped the lock, and whispered, alohomora! the lock clicked and \n    the door swung open \u2014 they piled through it, shut it quickly,\",\n    \"Position\": 47346,\n    \"Spell\": \"alohomora\"\n  },\n  {\n    \"Book\": \"1: SS\",\n    \"Concordance\": \"it on snape if he showed any sign of wanting to hurt \n    Harry, now, don\u2019t forget, it\u2019s locomotormortis, hermione muttered as \n     ron slipped his wand up his sleeve, i know, ron snapped, don\u2019t\",\n    \"Position\": 65427,\n    \"Spell\": \"locomotormortis\"\n  },\n]\n</code></pre>\n\n<p>How will I access the <code>Spell</code> within the second array element? How can I access a specific field of this array?</p>\n\n<p>I have tried to do <code>Mentions.data[1][\"Spell\"]</code> but I know this is wrong.</p>\n"}, {"tags": ["javascript", "python", "ruby", "regex"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1512436654, "post_id": 47644570, "comment_id": 82247824, "body": "Did you try playing around with one of the online regex tools?"}, {"owner": {"reputation": 21, "user_id": 3929544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e50bd2b249e70622003653d92911490?s=128&d=identicon&r=PG&f=1", "display_name": "therhino", "link": "https://stackoverflow.com/users/3929544/therhino"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1512436747, "post_id": 47644570, "comment_id": 82247857, "body": "yes, <a href=\"http://rubular.com/r/EzaW9Jju5Y\" rel=\"nofollow noreferrer\">rubular.com/r/EzaW9Jju5Y</a>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1512436942, "post_id": 47644570, "comment_id": 82247899, "body": "Remove the <code>?</code> which makes <code>+</code> lazy."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1512439151, "post_id": 47644570, "comment_id": 82248422, "body": "@SagarPandya: This will fail if a line break enters inside the CHECK parentheses. And if you make the expression multiline, then the regexp swallows too much."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3929544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e50bd2b249e70622003653d92911490?s=128&d=identicon&r=PG&f=1", "display_name": "therhino", "link": "https://stackoverflow.com/users/3929544/therhino"}, "edited": false, "score": 0, "creation_date": 1512440777, "post_id": 47644895, "comment_id": 82248826, "body": "Wow, looks little complicated. How can i also capture the name of constraint  (ex. <code>price_check</code>) and remove parentheses from captured expression (from this <code>(price &gt; 0)</code>)?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 21, "user_id": 3929544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e50bd2b249e70622003653d92911490?s=128&d=identicon&r=PG&f=1", "display_name": "therhino", "link": "https://stackoverflow.com/users/3929544/therhino"}, "edited": false, "score": 0, "creation_date": 1512449487, "post_id": 47644895, "comment_id": 82251114, "body": "To do that, we&#39;d flip the recursion a bit: <code>&#47;CONSTRAINT\\s+(?&lt;name&gt;\\w+)\\s+CHECK\\s+\\((?&lt;content&gt;(?&lt;token&gt;[&zwnj;&#8203;^()]|\\(\\g&lt;content&gt;\\)&zwnj;&#8203;)+)\\)&#47;i</code>, then check the <code>name</code> and <code>content</code> captures."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 21, "user_id": 3929544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e50bd2b249e70622003653d92911490?s=128&d=identicon&r=PG&f=1", "display_name": "therhino", "link": "https://stackoverflow.com/users/3929544/therhino"}, "edited": false, "score": 0, "creation_date": 1512489107, "post_id": 47644895, "comment_id": 82273648, "body": "@therhino: Indeed, for some reason there&#39;s extra <code>\\u200c\\u200b</code> in two places (ZERO WIDTH NONJOINER, ZERO WIDTH SPACE) if you copy from my comment, that prevent the regexp from working. No idea how they snuck in there. Here is a correct one (even if it looks exactly the same): <a href=\"http://rubular.com/r/ziY9RWdCJ6\" rel=\"nofollow noreferrer\">rubular.com/r/ziY9RWdCJ6</a>"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1512439060, "creation_date": 1512439060, "answer_id": 47644895, "question_id": 47644570, "link": "https://stackoverflow.com/questions/47644570/what-my-regexp-should-be/47644895#47644895", "title": "What my Regexp should be?", "body": "<p>Ruby's Onigmo engine is quite powerful, and allows you to check parentheses nesting.</p>\n\n<pre><code>/CONSTRAINT\\s+(\\w+)\\s+CHECK\\s+(?&lt;paren&gt;\\((?:[^()]|\\g&lt;paren&gt;)+\\))/i\n</code></pre>\n\n<p>The bit at the end, <code>(?&lt;paren&gt;\\((?:[^()]|\\g&lt;paren&gt;)+\\))</code>, is a recursive definition of a balanced parentheses expression: a \"paren\" is open parenthesis, then either a non-parenthesis character or a \"paren\", repeating any number of times; then a closed parenthesis; we want one of those now.</p>\n\n<p>Unfortunately, neither Python nor JavaScript allow you to do this.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 9051066, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pDMKt2ZdTag/AAAAAAAAAAI/AAAAAAAAAAc/aEww7GMVnbY/photo.jpg?sz=128", "display_name": "user9051066", "link": "https://stackoverflow.com/users/9051066/user9051066"}, "is_accepted": false, "score": 0, "last_activity_date": 1512486545, "creation_date": 1512486545, "answer_id": 47656811, "question_id": 47644570, "link": "https://stackoverflow.com/questions/47644570/what-my-regexp-should-be/47656811#47656811", "title": "What my Regexp should be?", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>console.log(\"CREATE TABLE products(\\nid INT PRIMARYNULL,\\npriceREAL,\\ntitleTEXT,\\nCONSTRAINT price_check CHECK (  price &gt; 0),\\nconstraint title_check CHECK (length(title) &gt; 5 AND (price &lt;= 100.0))\\n  );\".match(/^.*constraint.*check.*$/gim));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 21, "user_id": 3929544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e50bd2b249e70622003653d92911490?s=128&d=identicon&r=PG&f=1", "display_name": "therhino", "link": "https://stackoverflow.com/users/3929544/therhino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 47644895, "answer_count": 2, "score": -1, "last_activity_date": 1512486545, "creation_date": 1512436556, "question_id": 47644570, "link": "https://stackoverflow.com/questions/47644570/what-my-regexp-should-be", "title": "What my Regexp should be?", "body": "<p>I am trying to get all check constraints from string definition looking like this</p>\n\n<pre><code>  CREATE TABLE products(\n     id INT PRIMARY KEY     NOT NULL,\n     price         REAL,\n     title         TEXT,\n     CONSTRAINT price_check CHECK (  price &gt; 0),\n     constraint title_check CHECK (length(title) &gt; 5 AND (price &lt;= 100.0))\n  );\n</code></pre>\n\n<p>with following regexp <code>/CONSTRAINT\\s+(\\w+)\\s+CHECK\\s+\\((.+?)\\)/i</code> but it does't match second constraint, only <code>constraint title_check CHECK (length(title)</code> part of it.</p>\n\n<p>How should I change my regexp (if can at all) to get this to work? Specific language dialect of regexp doesn't matter. Thanks for help.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1512436710, "post_id": 47644422, "comment_id": 82247845, "body": "You are a genius :D Thank you!"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1512443637, "post_id": 47644422, "comment_id": 82249591, "body": "We could use <code>oldval ||= newval</code> as well."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1512450733, "post_id": 47644422, "comment_id": 82251474, "body": "@Sagar, not if <code>oldval</code> could be <code>false</code>."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": true, "score": 2, "last_activity_date": 1512467892, "last_edit_date": 1512467892, "creation_date": 1512435361, "answer_id": 47644422, "question_id": 47644351, "link": "https://stackoverflow.com/questions/47644351/how-to-merge-two-the-same-objects-in-ruby/47644422#47644422", "title": "How to merge two the same objects in Ruby", "body": "<p>With <a href=\"http://ruby-doc.org/core-2.4.2/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>merge</code></a>?</p>\n\n<pre><code>obj1.merge(obj2) { |key, oldval, newval| oldval.nil? ? newval : oldval }\n=&gt; {:hostname=&gt;\"test\", :cpu=&gt;20, :disk_space=&gt;3000, :ram=&gt;nil, :check_time=&gt;\"2017-12-05 01:28\"}\n</code></pre>\n\n<p>In short:</p>\n\n<pre><code>obj1.merge(obj2) { |_, v, w| v.nil? ? w : v }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1512451419, "creation_date": 1512451419, "answer_id": 47646591, "question_id": 47644351, "link": "https://stackoverflow.com/questions/47644351/how-to-merge-two-the-same-objects-in-ruby/47646591#47646591", "title": "How to merge two the same objects in Ruby", "body": "<p>I prefer @StefanPochman's answer, but since that approach was taken, here's another.</p>\n\n<pre><code>obj1.merge obj2.select { |k,_| obj1[k].nil? }\n  #=&gt; {:hostname=&gt;\"test\", :cpu=&gt;20, :disk_space=&gt;3000, :ram=&gt;nil,\n  #    :check_time=&gt;\"2017-12-05 01:28\"}\n</code></pre>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1512464848, "accepted_answer_id": 47644422, "answer_count": 2, "score": -1, "last_activity_date": 1512467892, "creation_date": 1512434798, "last_edit_date": 1512459736, "question_id": 47644351, "link": "https://stackoverflow.com/questions/47644351/how-to-merge-two-the-same-objects-in-ruby", "closed_reason": "Duplicate", "title": "How to merge two the same objects in Ruby", "body": "<p>I have two objects that look like this:</p>\n\n<pre><code>obj1 = { hostname: \"test\",\n         cpu: 20, \n         disk_space: nil,\n         ram: nil,\n         check_time: \"2017-12-05 01:28\" }\n\nobj2 = { hostname: \"test\",\n         cpu: nil,\n         disk_space: 3000,\n         ram: nil, \n         check_time: \"2017-12-05 01:28\"}\n</code></pre>\n\n<p>I want to overwrite <code>disk_space: nil</code> with <code>disk_space: 3000</code> from <code>obj2</code>. I want to basicaly overwrite <code>nils</code>.</p>\n\n<pre><code>new_obj = { hostname: \"test\",\n            cpu: 20,\n            disk_space: 3000,\n            ram: nil,\n            check_time: \"2017-12-05 01:28\" }\n</code></pre>\n\n<p>How can I achieve this in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 0, "creation_date": 1512434956, "post_id": 47644342, "comment_id": 82247382, "body": "What if the page contains &quot;Good food&quot; - wouldn&#39;t that also show as a match?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 0, "creation_date": 1512435018, "post_id": 47644342, "comment_id": 82247396, "body": "I misunderstood and you clarified me, does <code>Good day|Good night</code> fit well in this scenario?"}, {"owner": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 0, "creation_date": 1512435248, "post_id": 47644342, "comment_id": 82247461, "body": "That seems the ticket yea"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 0, "creation_date": 1512435835, "post_id": 47644342, "comment_id": 82247619, "body": "Wondering the difference between <code>Good (day|night)</code> and <code>Good day|Good night</code> despite the matching groups."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1512442183, "post_id": 47644342, "comment_id": 82249236, "body": "What about&quot;Good nightclubs are rare&quot;?"}, {"owner": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 1, "creation_date": 1512446712, "post_id": 47644342, "comment_id": 82250369, "body": "Actually that&#39;s a good catch Cary.  My suggestion is that the OP actually wrap the specific string in a &lt;span&gt; tag with a specific ID or class, and expand the match to use that as the basis.  That can remove the chances of unintended matches like you suggest."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 3, "last_activity_date": 1512434994, "last_edit_date": 1512434994, "creation_date": 1512434747, "answer_id": 47644342, "question_id": 47644311, "link": "https://stackoverflow.com/questions/47644311/assert-if-any-of-two-strings-are-present/47644342#47644342", "title": "Assert if any of two strings are present", "body": "<p>If using MiniTest then you can use <code>assert_match</code>:</p>\n\n<pre><code>assert_match /Good day|Good night/, string\n</code></pre>\n\n<p>If using RSpec then you can use <code>match</code>:</p>\n\n<pre><code>expect(string).to match /Good day|Good night/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1512449797, "post_id": 47644715, "comment_id": 82251209, "body": "Nice improvement. Instead thinking in a regex and all the scenarios to cover."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1512437723, "creation_date": 1512437723, "answer_id": 47644715, "question_id": 47644311, "link": "https://stackoverflow.com/questions/47644311/assert-if-any-of-two-strings-are-present/47644715#47644715", "title": "Assert if any of two strings are present", "body": "<p>While Sebastian's answer will work as long as the page is loaded when you go to check, it loses Capybaras waiting/retrying behavior and can lead to flaky tests if used to check content while a page is changing (immediately after clicking a button, etc). </p>\n\n<p>When using minitest a better solution would be to continue using the Capybara provided <code>assert_content</code> matcher but pass it a regex</p>\n\n<pre><code>assert_content(/Good day|Good night/)\n</code></pre>\n\n<p>If using RSpec you can do the same</p>\n\n<pre><code>expect(page).to have_content(/Good day|Good night/)\n</code></pre>\n\n<p>or you can write it in a potentially more readable manner</p>\n\n<pre><code>expect(page).to have_content('Good day').or(have_content('Good night'))\n</code></pre>\n"}], "owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47644715, "answer_count": 2, "score": 3, "last_activity_date": 1512446250, "creation_date": 1512434557, "last_edit_date": 1512446250, "question_id": 47644311, "link": "https://stackoverflow.com/questions/47644311/assert-if-any-of-two-strings-are-present", "title": "Assert if any of two strings are present", "body": "<p>I have a webpage with two different strings depending on time of the day - \"Good day\" or \"Good night\".</p>\n\n<p>Is there any way to do some sort of <code>assert_content(my_string)</code> that check if one of the two given strings is present?</p>\n\n<p>It doesn't matter which one is present, just that one is.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "edited": false, "score": 0, "creation_date": 1512449631, "post_id": 47642436, "comment_id": 82251161, "body": "Please share what you\u2019ve tried so far, and how what you\u2019ve tried isn\u2019t aligning with what you would like to achieve. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 21, "user_id": 682379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29291348d2ccaff2940bacf5e7d76ed0?s=128&d=identicon&r=PG", "display_name": "cgrant", "link": "https://stackoverflow.com/users/682379/cgrant"}, "reply_to_user": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "edited": false, "score": 0, "creation_date": 1512486918, "post_id": 47642436, "comment_id": 82272043, "body": "Thank you. I&#39;ve added my current attempt to the original post."}], "owner": {"reputation": 21, "user_id": 682379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29291348d2ccaff2940bacf5e7d76ed0?s=128&d=identicon&r=PG", "display_name": "cgrant", "link": "https://stackoverflow.com/users/682379/cgrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512489453, "creation_date": 1512423652, "last_edit_date": 1512489453, "question_id": 47642436, "link": "https://stackoverflow.com/questions/47642436/grouping-and-ordering-through-multiple-associations-in-rails", "title": "Grouping and Ordering through multiple associations in Rails", "body": "<p>Models:</p>\n\n<pre><code>class BacklinkReport\n  has_many :backlinks, :dependent =&gt; :destroy\n  has_many :domains, through: :backlinks\n  has_many :pages, through: :backlinks\n  has_many :domain_scores, through: :domains\n  has_many :page_scores, through: :pages\nend\n\nclass Backlink\n  belongs_to :domain\n  has_many :domain_scores, through: :domains\nend\n\nclass Domain \n  has_many :pages\n  has_many :domain_scores\nend\n\nclass DomainScores\n  belongs_to :domain\nend\n</code></pre>\n\n<p>Through ActiveRecord, I need a list of the unique domains for a given backlink_report, sorted by their MAX(domain_score.date) and ultimately ordered by their domain_score.pa score.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I'm currently breaking the query up into two parts. The first joins the backlinks from a particular report on all Domains and groups by ID to receive a list of unique domains for this particular report. Then I map the list by most recent DomainScore for each domain and sort by domain_score.da. This second query takes quite some time as it runs a DomainScore lookup on each of the 15k or so domains associated with the report. With the associations above, is there a more efficient way to achieve my outcome? I'd also like to be able to limit the number of highest ranking domains I'm requesting vs. fetching the entire site.</p>\n\n<pre><code>domains = Domain.joins(:backlinks).where(:backlinks =&gt; {:backlink_report_id =&gt; report_id}).group('domains.id')\ndomains = domains.map{|d| d.domain_scores.sort_by{|x| x['date']}.last}.compact.sort_by(&amp;:da).reverse!\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "eager-loading", "active-model-serializers"], "answers": [{"tags": [], "owner": {"reputation": 698, "user_id": 5617424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmoz.jpg?s=128&g=1", "display_name": "Vane Trajkov", "link": "https://stackoverflow.com/users/5617424/vane-trajkov"}, "is_accepted": true, "score": 5, "last_activity_date": 1512423224, "creation_date": 1512423224, "answer_id": 47642339, "question_id": 47642234, "link": "https://stackoverflow.com/questions/47642234/active-model-serializers-not-eager-loading-relationships/47642339#47642339", "title": "Active model Serializers not eager loading relationships", "body": "<p>You need to include taggings in your query first then the serializer will be able to read the loaded records instead of separately asking for the taggings association record by record </p>\n\n<pre><code>@products = Product.includes(:taggings)\nrender json: @products, each_serializer: ::V1::ProductSerializer, includes: [:taggings], links: links, status: :ok\n</code></pre>\n"}], "owner": {"reputation": 838, "user_id": 4107375, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/92eb78c7c4b20429f9d22a1d5e38be57?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/4107375/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "accepted_answer_id": 47642339, "answer_count": 1, "score": 3, "last_activity_date": 1512504741, "creation_date": 1512422777, "last_edit_date": 1512504741, "question_id": 47642234, "link": "https://stackoverflow.com/questions/47642234/active-model-serializers-not-eager-loading-relationships", "title": "Active model Serializers not eager loading relationships", "body": "<p>I'm using the Bullet gem to see where there are n+1 queries in my application.  It's telling me to eager load my association <code>taggings</code> when calling my serializer.  My code looks something like this:  </p>\n\n<pre><code>render json: @products, each_serializer: ::V1::ProductSerializer, includes: [:taggings], links: links, status: :ok\n</code></pre>\n\n<p>But after I add that, i'm still getting the same warning from the Bullet gem.  Which looks like this: </p>\n\n<pre><code>GET /api/v1/product_feed?state=CA&amp;page=1\nUSE eager loading detected\n  Product =&gt; [:taggings]\n  Add to your finder: :includes =&gt; [:taggings]\nCall stack\n  /home/jay/current_projects/api/app/controllers/api/v1/products_controller.rb:111:in `product_feed'\n</code></pre>\n\n<p>Does anyone have any idea why the taggings table is not being eager loaded.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "devise"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7560920, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qt6dZ2xSMGU/AAAAAAAAAAI/AAAAAAAACJM/W5h9d5Ds2Tc/photo.jpg?sz=128", "display_name": "marting", "link": "https://stackoverflow.com/users/7560920/marting"}, "edited": false, "score": 0, "creation_date": 1512651970, "post_id": 47692927, "comment_id": 82351005, "body": "Thanks you !! I was able to make it work perfectly with your help :-)"}], "tags": [], "owner": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "is_accepted": true, "score": 0, "last_activity_date": 1512642583, "creation_date": 1512642583, "answer_id": 47692927, "question_id": 47641814, "link": "https://stackoverflow.com/questions/47641814/rails-devise-devise-token-auth-redirect-upon-unlocking-account/47692927#47692927", "title": "Rails / Devise (Devise token auth) Redirect upon unlocking account", "body": "<p>To do any customization with Devise, one must override the default controllers by creating a new controller and inheriting from it in your case that would be Devise::UnlocksController</p>\n\n<p>For example:\n<code>CustomUnlocksController &lt; Devise::UnlocksController</code></p>\n\n<p><a href=\"https://github.com/plataformatec/devise/blob/master/app/controllers/devise/unlocks_controller.rb\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/blob/master/app/controllers/devise/unlocks_controller.rb</a></p>\n\n<p>Override <code>after_unlock_path_for</code> to the path which you are going to redirect after.</p>\n"}], "owner": {"reputation": 3, "user_id": 7560920, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qt6dZ2xSMGU/AAAAAAAAAAI/AAAAAAAACJM/W5h9d5Ds2Tc/photo.jpg?sz=128", "display_name": "marting", "link": "https://stackoverflow.com/users/7560920/marting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 47692927, "answer_count": 1, "score": 0, "last_activity_date": 1512642583, "creation_date": 1512420946, "last_edit_date": 1512422110, "question_id": 47641814, "link": "https://stackoverflow.com/questions/47641814/rails-devise-devise-token-auth-redirect-upon-unlocking-account", "title": "Rails / Devise (Devise token auth) Redirect upon unlocking account", "body": "<p>I'm currently trying to find a way to change my redirection url upon unlocking an account. Currently when an account is locked the user is getting a email to unlock is account but then the te user get redirect on a default url. Since my rails project is an api it would be nice to redirect to my front-end</p>\n\n<pre><code>Started GET \"/api/auth/unlock?unlock_token=YvR4nNssxhB9h8hvDAse\" for \n127.0.0.1 at 2017-12-04 15:28:08 -0500\nProcessing by Devise::UnlocksController#show as JSON\nParameters: {\"unlock_token\"=&gt;\"YvR4nNssxhB9h8hvDAse\"}\nUser Load (0.8ms)  SELECT  \"users\".* FROM \"users\" WHERE \n\"users\".\"unlock_token\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  \n[[\"unlock_token\", \n\"6f3c4d7aa5254e143f89cd7f187e22ce56b11e6abe1f5eb252e34d86ac101908\"], \n[\"LIMIT\", 1]]\n(0.1ms)  BEGIN\nSQL (0.7ms)  UPDATE \"users\" SET \"locked_at\" = $1, \"failed_attempts\" = $2, \n\"unlock_token\" = $3, \"updated_at\" = $4 WHERE \"users\".\"id\" = $5  \n[[\"locked_at\", nil], [\"failed_attempts\", 0], [\"unlock_token\", nil], \n[\"updated_at\", \"2017-12-04 20:28:08.783744\"], [\"id\", 1]]\n(3.4ms)  COMMIT\nRedirected to http://localhost:3000/api/auth/sign_in\nCompleted 302 Found in 17ms (ActiveRecord: 5.0ms)\n\n\nStarted GET \"/api/auth/sign_in\" for 127.0.0.1 at 2017-12-04 15:28:08 \n-0500\nProcessing by DeviseTokenAuth::SessionsController#new as JSON\n[active_model_serializers] Rendered ActiveModel::Serializer::Null with \nHash (0.14ms)\nCompleted 405 Method Not Allowed in 2ms (Views: 0.9ms | ActiveRecord: \n0.0ms)\n\n\nStarted GET \"/api/auth/sign_in\" for 127.0.0.1 at 2017-12-04 15:31:26 \n-0500\nProcessing by DeviseTokenAuth::SessionsController#new as JSON\n[active_model_serializers] Rendered ActiveModel::Serializer::Null with \nHash (0.11ms) \nCompleted 405 Method Not Allowed in 1ms (Views: 0.7ms | ActiveRecord: \n0.0ms)\n</code></pre>\n"}]