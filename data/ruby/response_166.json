[{"tags": ["ruby", "chef-infra", "rubocop"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521071610, "post_id": 49289378, "comment_id": 85582014, "body": "Are you sure this is a good idea to name a hash key? <code>[&#39;debian&#39;, &#39;rhel&#39;] =&gt; [22, 443, 4172, 60443]</code>, to work with it would be a bit &quot;uncomfortable&quot;."}, {"owner": {"reputation": 11, "user_id": 9494433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J3uQarUdX54/AAAAAAAAAAI/AAAAAAAAAe0/qkSP_UD4T_o/photo.jpg?sz=128", "display_name": "robb breckenridge", "link": "https://stackoverflow.com/users/9494433/robb-breckenridge"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521071717, "post_id": 49289378, "comment_id": 85582055, "body": "Awesome, thanks! That triggered &quot;Style/PercentLiteralDelimiters: %w-literals should be delimited by ( and ).&quot; but that is easy to solve.. changed the brackets and everything is skookum."}, {"owner": {"reputation": 11, "user_id": 9494433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J3uQarUdX54/AAAAAAAAAAI/AAAAAAAAAe0/qkSP_UD4T_o/photo.jpg?sz=128", "display_name": "robb breckenridge", "link": "https://stackoverflow.com/users/9494433/robb-breckenridge"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1521071769, "post_id": 49289378, "comment_id": 85582074, "body": "what do you mean name a hash key? The left side is the platform family and the right side is the ports that need to be opened for each platform. I think it&#39;s good. I just reference &quot;tcp_ports&quot; wherever i need to and it picks up the correct ports depending what system it&#39;s running on."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521071880, "post_id": 49289378, "comment_id": 85582100, "body": "Great, but is that a constraint of Chef?, because &quot;any&quot; character would work for a case like yours <code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] == %w[a b c] &amp;&amp; %w[a b c] &amp;&amp; %w(a b c) &amp;&amp; %w(a b c) == %w!a b c!</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9494433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J3uQarUdX54/AAAAAAAAAAI/AAAAAAAAAe0/qkSP_UD4T_o/photo.jpg?sz=128", "display_name": "robb breckenridge", "link": "https://stackoverflow.com/users/9494433/robb-breckenridge"}, "edited": false, "score": 0, "creation_date": 1521071646, "post_id": 49289411, "comment_id": 85582023, "body": "Thanks, if you switch the good example to have () instead of [] it works."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1521077783, "post_id": 49289411, "comment_id": 85583520, "body": "Can you clarify &quot;this is bad from the view point in the Ruby Style Guide&quot;?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1521078678, "post_id": 49289411, "comment_id": 85583716, "body": "Which part @muistooshort?, it&#39;s in the <a href=\"https://github.com/bbatsov/ruby-style-guide#percent-w\" rel=\"nofollow noreferrer\">repository</a>, same as added above."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1521080755, "post_id": 49289411, "comment_id": 85584236, "body": "So you&#39;re saying that <code>STATES = [&#39;draft&#39;, &#39;open&#39;, &#39;closed&#39;]</code> is bad according to the style guide? It was unclear what &quot;this&quot; was referring to in &quot;this is bad&quot;."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521082182, "post_id": 49289411, "comment_id": 85584521, "body": "Maybe &quot;<i>this <b>bad is</b> from the view point in the Ruby Style Guide</i>&quot; would be more clear?"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1521071508, "creation_date": 1521071508, "answer_id": 49289411, "question_id": 49289378, "link": "https://stackoverflow.com/questions/49289378/array-for-platform-family-vs-rubocop/49289411#49289411", "title": "Array for platform family vs rubocop", "body": "<p>When working with collections Rubocop adds:</p>\n\n<blockquote>\n  <p>Prefer %w to the literal array syntax when you need an array of words\n  (non-empty strings without spaces and special characters in them).\n  Apply this rule only to arrays with two or more elements.</p>\n</blockquote>\n\n<pre><code># bad\nSTATES = ['draft', 'open', 'closed']\n\n# good\nSTATES = %w[draft open closed]\n</code></pre>\n\n<p>Notice, this is bad from the view point in the Ruby Style Guide, but still working code.</p>\n\n<p>So your example would be:</p>\n\n<pre><code>%w[debian rhel]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9494433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J3uQarUdX54/AAAAAAAAAAI/AAAAAAAAAe0/qkSP_UD4T_o/photo.jpg?sz=128", "display_name": "robb breckenridge", "link": "https://stackoverflow.com/users/9494433/robb-breckenridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521071508, "creation_date": 1521071229, "question_id": 49289378, "link": "https://stackoverflow.com/questions/49289378/array-for-platform-family-vs-rubocop", "title": "Array for platform family vs rubocop", "body": "<p>I am trying to use an array in Chef for platform_family, and according to the chef docs I have the right syntax, but rubocop is kicking my butt. </p>\n\n<p>Chef docs: <a href=\"https://docs.chef.io/dsl_recipe.html#value-for-platform-family\" rel=\"nofollow noreferrer\">https://docs.chef.io/dsl_recipe.html#value-for-platform-family</a></p>\n\n<p>Any thoughts for a ruby newb?</p>\n\n<pre><code> 12 tcp_ports = value_for_platform_family(\n 13   ['debian', 'rhel'] =&gt; [22, 443, 4172, 60443],\n 14   'windows' =&gt; [443, 3389, 4172, 60443]\n 15 )\n</code></pre>\n\n<p>And the rubocop error is</p>\n\n<pre><code>recipes/recipe.rb:13:3: C: Style/WordArray: Use %w or %W for an array of words.\n  ['debian', 'rhel'] =&gt; [22, 443, 4172, 60443],\n  ^^^^^^^^^^^^^^^^^^\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521070835, "post_id": 49289236, "comment_id": 85581796, "body": "What would be the output if the length of the arrays differ?"}, {"owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521071964, "post_id": 49289236, "comment_id": 85582116, "body": "if there is no value for its position would be a blank string &quot;&quot;, [&#39;id&#39;, &#39;price&#39;, &#39;&#39;, &#39;stock_2&#39;] for example"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1521072137, "post_id": 49289236, "comment_id": 85582177, "body": "Do all the sub-arrays in <code>warehouses_stocks</code> contain the same string elements multiple times?"}, {"owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "edited": false, "score": 0, "creation_date": 1521074611, "post_id": 49289236, "comment_id": 85582789, "body": "yes, all the arrays contains the same length, even if is an empty string"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1521137474, "post_id": 49289236, "comment_id": 85615130, "body": "Did any of the answers help you? Some feedback would be nice."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "edited": false, "score": 0, "creation_date": 1521215185, "post_id": 49289610, "comment_id": 85650737, "body": "Thanks, adding the * sign works, I never thought about that."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 4, "last_activity_date": 1521072825, "creation_date": 1521072825, "answer_id": 49289610, "question_id": 49289236, "link": "https://stackoverflow.com/questions/49289236/ruby-zip-3-arrays-in-two-steps/49289610#49289610", "title": "Ruby zip 3 arrays in two steps", "body": "<pre><code>product_ids = ['id_1', 'id_2']\nproduct_prices = ['price_1', 'price_2']\nwarehouses_stocks = [['stock_1', 'stock_1'],['stock_2','stock_2']]\n</code></pre>\n\n<p><code>zip</code> can take more than one argument:</p>\n\n<pre><code>product_ids.zip(product_prices, *warehouses_stocks)\n#=&gt; [[\"id_1\", \"price_1\", \"stock_1\", \"stock_2\"],\n#    [\"id_2\", \"price_2\", \"stock_1\", \"stock_2\"]]\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3754535, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3e9a6cd050b583ed82c84e99a0e0eb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3754535", "link": "https://stackoverflow.com/users/3754535/user3754535"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 49289610, "answer_count": 1, "score": 1, "last_activity_date": 1550980724, "creation_date": 1521070289, "last_edit_date": 1550980724, "question_id": 49289236, "link": "https://stackoverflow.com/questions/49289236/ruby-zip-3-arrays-in-two-steps", "title": "Ruby zip 3 arrays in two steps", "body": "<p>I have the following arrays:</p>\n\n<pre><code>product_ids = ['id', 'id', 'id'...'id']\nproduct_prices = ['price', 'price', 'price'...'price']\n</code></pre>\n\n<p>on the first step I do the following</p>\n\n<pre><code>list_1 = product_ids.zip(product_prices)\n</code></pre>\n\n<p>at this point I have a list with the form</p>\n\n<pre><code>list_1 -&gt; [['id', 'price'],['id','price']...]\n</code></pre>\n\n<p>after some calculation I get another array</p>\n\n<pre><code>warehouses_stocks = [['stock_1', 'stock_1'..],['stock_2','stock_2'...]]\n</code></pre>\n\n<p>how do I merge this two(list_1 and warehouses_stocks) to obtain another array with the form</p>\n\n<pre><code>[['id','price', 'stock_1', 'stock_2'],['id','price', 'stock_1', 'stock_2'],...]\n</code></pre>\n"}, {"tags": ["ruby", "inheritance"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1521064900, "post_id": 49288287, "comment_id": 85579723, "body": "Try it and see:)"}, {"owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1521064938, "post_id": 49288287, "comment_id": 85579736, "body": "I&#39;m actually answering this myself :P I just wanted to post it for others who may have been wondering the same thing!"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1521100759, "post_id": 49288501, "comment_id": 85590471, "body": "&quot;Constants are public by default&quot; suggests that constants can be made to be something other than &quot;public&quot;. What did you have in mind?"}, {"owner": {"reputation": 505, "user_id": 9318057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1224462695f938176ef92ea2687fec7a?s=128&d=identicon&r=PG", "display_name": "Max Friederichs", "link": "https://stackoverflow.com/users/9318057/max-friederichs"}, "edited": false, "score": 0, "creation_date": 1521125647, "post_id": 49288501, "comment_id": 85607111, "body": "It might be worth mentioning, for those less versed in Ruby, that identifiers starting with a capital letter are automatically constants and can not be redefined."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 505, "user_id": 9318057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1224462695f938176ef92ea2687fec7a?s=128&d=identicon&r=PG", "display_name": "Max Friederichs", "link": "https://stackoverflow.com/users/9318057/max-friederichs"}, "edited": false, "score": 2, "creation_date": 1521129963, "post_id": 49288501, "comment_id": 85610398, "body": "@MaxFriederichs constants can be redefined. All you get is a warning for example try this <code>String = Integer</code>"}, {"owner": {"reputation": 505, "user_id": 9318057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1224462695f938176ef92ea2687fec7a?s=128&d=identicon&r=PG", "display_name": "Max Friederichs", "link": "https://stackoverflow.com/users/9318057/max-friederichs"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1521130365, "post_id": 49288501, "comment_id": 85610665, "body": "@engineersmnky thanks for the clarification, did not notice it was only a warning :)."}, {"owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1521133663, "post_id": 49288501, "comment_id": 85612887, "body": "@CarySwoveland I suppose I was referring to uses of the method <code>private_constant</code>. Will fix."}], "tags": [], "owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "is_accepted": true, "score": 4, "last_activity_date": 1521179026, "last_edit_date": 1521179026, "creation_date": 1521065860, "answer_id": 49288501, "question_id": 49288287, "link": "https://stackoverflow.com/questions/49288287/what-is-the-difference-between-class-constants-and-class-instance-variables-in-r/49288501#49288501", "title": "What is the difference between class constants and class instance variables in Ruby?", "body": "<p></p>\n\n<h1>Access</h1>\n\n<p>Constants are public by default (we're disregarding <a href=\"http://ruby-doc.org/core-2.3.4/Module.html#method-i-private_constant\" rel=\"nofollow noreferrer\">private constants</a> here). Class instance variables are not accessible (except with stuff like <code>Object#instance_variable_get</code>, but that's typically not very good style) without a reader and/or writer method.</p>\n\n<h1>Inheritance</h1>\n\n<p>Constants will refer to the value in the context in which they are used, not the current value of <code>self</code>. For example,</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Foo\n  BAR = 'Parent'\n\n  def self.speak\n    puts BAR\n  end\nend\n\nclass FooChild &lt; Foo\n  BAR = 'Child'\nend\n\nFoo.speak # Parent\nFooChild.speak # Parent\n</code></pre>\n\n<p>While class instance variables are dependent on the value of <code>self</code>:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Foo\n  @bar = 'Parent'\n\n  def self.speak\n    puts @bar\n  end\nend\n\nclass FooChild &lt; Foo\n  @bar = 'Child'\nend\n\nFoo.speak # Parent\nFooChild.speak # Child\n</code></pre>\n\n<p>If you use an explicit reference to <code>self</code>, you can get the same behavior as constants, however:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Foo\n  BAR = 'Parent'\n\n  def self.speak\n    puts self::BAR\n  end\nend\n\nclass FooChild &lt; Foo\n  BAR = 'Child'\nend\n\nFoo.speak # Parent\nFooChild.speak # Child\n</code></pre>\n"}], "owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 49288501, "answer_count": 1, "score": 1, "last_activity_date": 1521179026, "creation_date": 1521064748, "question_id": 49288287, "link": "https://stackoverflow.com/questions/49288287/what-is-the-difference-between-class-constants-and-class-instance-variables-in-r", "title": "What is the difference between class constants and class instance variables in Ruby?", "body": "<p>I will note that there are a lot of similarly worded questions that are distinct from what I believe I'm asking.</p>\n\n<p>What is the difference between the following in terms of functionality? E.g. how do they behave with regards to inheritance?</p>\n\n<pre><code>class Foo\n  BAR = 'Hello'\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Foo\n  @bar = 'Hello'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1521063899, "post_id": 49288034, "comment_id": 85579332, "body": "Why not give it a go and see what happens? You can always just delete the results if they are not what you expect."}], "answers": [{"tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": false, "score": 0, "last_activity_date": 1521064952, "creation_date": 1521064952, "answer_id": 49288339, "question_id": 49288034, "link": "https://stackoverflow.com/questions/49288034/creating-a-new-rails-application-rails-new-path/49288339#49288339", "title": "Creating a new rails application, rails new ~path", "body": "<p>If you run <code>rails new foo/bar/baz</code>, the new app will be created inside of <code>foo/bar/baz</code> and will be named after the last segment of the provided path, <code>Baz</code> in this instance.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 3530349, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1529409245/picture?type=large", "display_name": "styling", "link": "https://stackoverflow.com/users/3530349/styling"}, "is_accepted": false, "score": 0, "last_activity_date": 1521080749, "creation_date": 1521080749, "answer_id": 49290611, "question_id": 49288034, "link": "https://stackoverflow.com/questions/49288034/creating-a-new-rails-application-rails-new-path/49290611#49290611", "title": "Creating a new rails application, rails new ~path", "body": "<p>if you run \"rails new myapp -d mysql\", a new folder will be created with the name myapp</p>\n\n<p>if you run  \"rails new path/myapp -d mysql\", a new folder called \"path/myapp\" will be created. The project name is myapp</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 2353813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac512a9973cd02d71f1340716d864f0?s=128&d=identicon&r=PG", "display_name": "Kapil Bhosale", "link": "https://stackoverflow.com/users/2353813/kapil-bhosale"}, "is_accepted": false, "score": 1, "last_activity_date": 1521096129, "last_edit_date": 1521096129, "creation_date": 1521095570, "answer_id": 49292914, "question_id": 49288034, "link": "https://stackoverflow.com/questions/49288034/creating-a-new-rails-application-rails-new-path/49292914#49292914", "title": "Creating a new rails application, rails new ~path", "body": "<p>If you run a command with <code>rails new app-path -d postgresql --skip-test</code> it will create rails app with last part of the <code>app-path</code>.</p>\n\n<p>for example\nIf you run <code>rails new /Users/apple/work/demo_app -d postgresql --skip-test</code> it will create app named <code>demo_app</code> inside directory <code>/Users/apple/work</code>.</p>\n\n<p>If directory specified doesn't exists it will create the path and last part of the path will be app name.</p>\n"}], "owner": {"reputation": 25, "user_id": 9494105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TgUs4iFVqwc/AAAAAAAAAAI/AAAAAAAAAEI/yNIXbPXTH6I/photo.jpg?sz=128", "display_name": "MattyP", "link": "https://stackoverflow.com/users/9494105/mattyp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1521096129, "creation_date": 1521063513, "question_id": 49288034, "link": "https://stackoverflow.com/questions/49288034/creating-a-new-rails-application-rails-new-path", "title": "Creating a new rails application, rails new ~path", "body": "<p>When I run the command <code>rails new app-path -d postgresql --skip-test</code>, what does it call my app?</p>\n\n<p>Or is it just the path I put it in?</p>\n"}, {"tags": ["ruby", "text", "shoes", "green-shoes"], "comments": [{"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1528905662, "post_id": 49287902, "comment_id": 88686737, "body": "You got to use <code>#replace</code> if you want to modify the widget."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7559984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ad5e16645444f6bc2b12b0f0cfb43dc?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter", "link": "https://stackoverflow.com/users/7559984/hunter"}, "edited": false, "score": 0, "creation_date": 1528463305, "post_id": 50749695, "comment_id": 88530138, "body": "Thanks for your answer. I graduated this Spring, and no longer work in the office (it was a student job for my college). However I will send this answer to my replacement and if it fixes the problem Ill mark this as the right answer."}], "tags": [], "owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "is_accepted": false, "score": 0, "last_activity_date": 1528403242, "creation_date": 1528403242, "answer_id": 50749695, "question_id": 49287902, "link": "https://stackoverflow.com/questions/49287902/editing-text-from-outside-shoes-app-overlaps-text/50749695#50749695", "title": "Editing text from outside shoes app overlaps text", "body": "<p>without more specific information I've just tested a bare minimum for a scenario similar to yours (using Red Shoes though) and this works:</p>\n\n<pre><code>Shoes.app do\n\n@test_stack = stack do\n@edit_box = edit_box\n@edit_box.text = \"first text\"\n\n@edit_text = para \"second text\"\nend\n\nbutton \"change\" do\n  @edit_box.text = \"first replacement\"\n  @edit_text.text = \"second replacement\"\nend\n\nend\n</code></pre>\n\n<p>You could also try clearing the element first.</p>\n\n<p>hth\nseba</p>\n"}], "owner": {"reputation": 39, "user_id": 7559984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ad5e16645444f6bc2b12b0f0cfb43dc?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter", "link": "https://stackoverflow.com/users/7559984/hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528403242, "creation_date": 1521062893, "question_id": 49287902, "link": "https://stackoverflow.com/questions/49287902/editing-text-from-outside-shoes-app-overlaps-text", "title": "Editing text from outside shoes app overlaps text", "body": "<p>I am working on a ruby app that needs to update text on the GUI at unknown times. The process I am using overlaps the text with text from the previous edit.</p>\n\n<p>class_text is the element I need to edit. I have about 8 different places in the program that could potentially change the text. Sometimes when the text is changed the previous text does not get removed and instead the text overlaps itself.</p>\n\n<pre><code>$class_text.text = \"Nothing scheduled to take attendance at this time.\" \n</code></pre>\n\n<p>This project was started by people before me and this is my first experience with Ruby. Thank you for any info you can send my way!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ransack", "kaminari"], "comments": [{"owner": {"reputation": 3853, "user_id": 18197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68162a00c688d604d5514e0b719b90e?s=128&d=identicon&r=PG", "display_name": "Pavling", "link": "https://stackoverflow.com/users/18197/pavling"}, "edited": false, "score": 0, "creation_date": 1521095617, "post_id": 49287594, "comment_id": 85588268, "body": "Your change to the &quot;sorts&quot; line is the same as the above example. Have you got a typo in there?"}, {"owner": {"reputation": 1166, "user_id": 7044625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/80daf516453640dcd23184fbf8b8df11?s=128&d=identicon&r=PG&f=1", "display_name": "felipeecst", "link": "https://stackoverflow.com/users/7044625/felipeecst"}, "reply_to_user": {"reputation": 3853, "user_id": 18197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68162a00c688d604d5514e0b719b90e?s=128&d=identicon&r=PG", "display_name": "Pavling", "link": "https://stackoverflow.com/users/18197/pavling"}, "edited": false, "score": 0, "creation_date": 1521144685, "post_id": 49287594, "comment_id": 85618892, "body": "Sorry, I didn&#39;t noticed. I updated the question with the correct line"}], "answers": [{"tags": [], "owner": {"reputation": 3853, "user_id": 18197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68162a00c688d604d5514e0b719b90e?s=128&d=identicon&r=PG", "display_name": "Pavling", "link": "https://stackoverflow.com/users/18197/pavling"}, "is_accepted": false, "score": 1, "last_activity_date": 1521184477, "last_edit_date": 1521184477, "creation_date": 1521095835, "answer_id": 49292988, "question_id": 49287594, "link": "https://stackoverflow.com/questions/49287594/kaminari-ransack-sort-and-pagination-issue/49292988#49292988", "title": "Kaminari/Ransack - Sort and Pagination issue", "body": "<p>You have some <code>includes</code> in your results, and each of those tables will presumably have a <code>created_at</code> field, so your sort could be ambiguous.</p>\n\n<p>It's worth looking in the console at what SQL gets generated when you run this query, but you may find that changing your 'sorts' line to:</p>\n\n<p><code>ransack.sorts = 'contacts.created_at desc' if ransack.sorts.empty?</code> (or whatever table name is correct for you)</p>\n\n<p>...helps to disambiguate the sorting.</p>\n"}], "owner": {"reputation": 1166, "user_id": 7044625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/80daf516453640dcd23184fbf8b8df11?s=128&d=identicon&r=PG&f=1", "display_name": "felipeecst", "link": "https://stackoverflow.com/users/7044625/felipeecst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521184477, "creation_date": 1521061401, "last_edit_date": 1521144654, "question_id": 49287594, "link": "https://stackoverflow.com/questions/49287594/kaminari-ransack-sort-and-pagination-issue", "title": "Kaminari/Ransack - Sort and Pagination issue", "body": "<p>I'm using Ransack, Kaminari and Postgres to perform queries/pagination inside my Rails controllers, and I have the following code:</p>\n\n<pre><code>ransack = current_user.condition? ? @company.contacts.ransack(params[:q]) :\ncurrent_user.contacts.ransack(params[:q])\nransack.sorts = 'id desc' if ransack.sorts.empty?\ncontacts = ransack.result.includes(:table1, :table2)\ncontacts = contacts.page(params[:page]).per(params[:per])\nrender json: contacts,\n       meta: pagination(contacts, total_count: true)\n</code></pre>\n\n<p>The pagination method is defined as follow:</p>\n\n<pre><code>def pagination(kaminari, total_count: false)\n   return unless kaminari.respond_to?(:current_page)\n   pagination = {\n      current_page: kaminari.current_page,\n      next_page: kaminari.next_page,\n      prev_page: kaminari.prev_page\n   }\n   pagination[:total_count] = kaminari.total_count if total_count\n   pagination\nend\n</code></pre>\n\n<p>With this code, everything work as expected. However, if I change the sorts line to:</p>\n\n<pre><code>ransack.sorts = 'created_at desc' if ransack.sorts.empty?\n</code></pre>\n\n<p>Then I start to receive duplicate and unwanted entries in my results. Can anyone tell me why could this be happening?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 0, "last_activity_date": 1521082014, "creation_date": 1521082014, "answer_id": 49290765, "question_id": 49287447, "link": "https://stackoverflow.com/questions/49287447/parsing-times-with-non-local-zone-abbreviations-in-ruby-offset-is-correct-but-z/49290765#49290765", "title": "Parsing times with non-local zone abbreviations in Ruby: offset is correct but zone name is lost", "body": "<p>You can not get <code>zone</code> name from Time object, instead you can get the <code>offset</code> value from it. There is no support for <a href=\"https://github.com/tzinfo/tzinfo/issues/38\" rel=\"nofollow noreferrer\">timezone abbreviations in ruby</a></p>\n\n<pre><code>time = Time.parse(\"12:00 AM PST\")\ntime.gmt_offset\n</code></pre>\n\n<p>Please note that <code>Time.zone</code> is a feature of <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html\" rel=\"nofollow noreferrer\">Rails' ActiveSupport</a> - it is not provided by TZInfo. ActiveSupport uses TZInfo internally to implement support for time zones.</p>\n\n<p>You can pass zone name to ActiveSupport to construct new time with zone name information.</p>\n\n<pre><code>time = ActiveSupport::TimeZone['Hawaii'].parse('12 AM')\ntime.zone # 'HST'\n</code></pre>\n\n<p>You can also use <code>in_time_zone</code> method in rails.</p>\n\n<pre><code>time = Time.parse('12 AM').in_time_zone('Hawaii')\ntime.zone # 'HST'\n</code></pre>\n\n<p>Hope it helps !</p>\n"}], "owner": {"reputation": 472, "user_id": 260337, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c31bf761e71300faf1fcf7238b4f48d7?s=128&d=identicon&r=PG", "display_name": "wizzard", "link": "https://stackoverflow.com/users/260337/wizzard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521082014, "creation_date": 1521060816, "question_id": 49287447, "link": "https://stackoverflow.com/questions/49287447/parsing-times-with-non-local-zone-abbreviations-in-ruby-offset-is-correct-but-z", "title": "Parsing times with non-local zone abbreviations in Ruby: offset is correct but zone name is lost", "body": "<p>Ruby's Time only seems to \"remember\" my local zone name and UTC. The time object that is created has the correct offset, but #zone is nil. This is easy to see in the console (I am on MDT):</p>\n\n<pre><code>&gt;&gt; Time.parse(\"12:00 AM MDT\")\n=&gt; 2018-03-14 00:00:00 -0600\n&gt;&gt; Time.parse(\"12:00 AM MDT\").zone\n=&gt; \"MDT\"\n\n&gt;&gt; Time.parse(\"12:00 AM PST\")\n=&gt; 2018-03-14 00:00:00 -0800\n&gt;&gt; Time.parse(\"12:00 AM PST\").zone\n=&gt; nil\n\n&gt;&gt; Time.parse(\"12:00 AM EDT\")\n=&gt; 2018-03-14 00:00:00 -0400\n&gt;&gt; Time.parse(\"12:00 AM EDT\").zone\n=&gt; nil\n</code></pre>\n\n<p>UTC also works, but that seems to be about it.</p>\n\n<p>Is there a way to preserve the abbreviation for other time zones?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1521102070, "post_id": 49287255, "comment_id": 85591049, "body": "What if the address were <code>str = &quot;fdsfd 2-8126 E Bowen...&quot;</code>? Note the end of your regex, <code>.+&#47;</code> is the same as <code>.&#47;</code> (and also the same as <code>.+$&#47;</code>). Also, if your regex included just a few state abbreviations (say, 4), that would not change the question and readers would not have to scroll horizontally to read it."}], "answers": [{"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 2, "creation_date": 1521092220, "post_id": 49287279, "comment_id": 85586994, "body": "or, use <code>\\D</code> instead <code>[^\\d]</code>... similarly, <code>\\S</code>, <code>\\H</code>, <code>\\W</code>, etc see <a href=\"https://ruby-doc.org/core-2.5.0/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.0/&hellip;</a>"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1521120073, "post_id": 49287279, "comment_id": 85602764, "body": "If you shorten the regex to use character classes for the second letter of state abbreviations you can greatly reduce the number of steps required to match the string <a href=\"https://regex101.com/r/YWZPKY/2\" rel=\"nofollow noreferrer\">as seen here</a>"}], "tags": [], "owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "is_accepted": true, "score": 7, "last_activity_date": 1521060694, "last_edit_date": 1521060694, "creation_date": 1521060138, "answer_id": 49287279, "question_id": 49287255, "link": "https://stackoverflow.com/questions/49287255/why-is-d-not-matching-all-digits/49287279#49287279", "title": "why is \\d+ not matching all digits?", "body": "<p>The below regex works properly, as you can see at <a href=\"https://regex101.com/r/YWZPKY/1\" rel=\"nofollow noreferrer\">Regex101</a></p>\n\n<pre><code>REGEX = /^.+?(\\d+.+(?=AL|AK|AS|AZ|AR|CA|CO|CT|DE|DC|FM|FL|GA|GU|HI|ID|IL|IN|IA|KS|KY|LA|ME|MH|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|MP|OH|OK|OR|PW|PA|PR|RI|SC|SD|TN|TX|UT|VT|VI|VA|WA|WV|WI|WY)[A-Z]{2}[, ]+\\d{5}(?:-\\d{4})?).+/\n</code></pre>\n\n<p>Note the addition of the question mark near the beginning of the regex</p>\n\n<pre><code>/^.+?(\\d+...\n    ^ \n</code></pre>\n\n<p>By default, your first <code>.+</code> is being greedy, consuming all digits it can, and still allowing the regex pass. By adding <code>?</code> after the plus, you can make it lazy instead of greedy.</p>\n\n<p>An alternative would be to not capture digits, like this:</p>\n\n<pre><code>/^[^\\d]+(\\d+...\n</code></pre>\n\n<p><code>[^\\d]+</code> will capture everything except for digits.</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "accepted_answer_id": 49287279, "answer_count": 1, "score": 5, "last_activity_date": 1521060694, "creation_date": 1521059997, "question_id": 49287255, "link": "https://stackoverflow.com/questions/49287255/why-is-d-not-matching-all-digits", "title": "why is \\d+ not matching all digits?", "body": "<p>I have the following regular expression:</p>\n\n<pre><code>REGEX = /^.+(\\d+.+(?=AL|AK|AS|AZ|AR|CA|CO|CT|DE|DC|FM|FL|GA|GU|HI|ID|IL|IN|IA|KS|KY|LA|ME|MH|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|MP|OH|OK|OR|PW|PA|PR|RI|SC|SD|TN|TX|UT|VT|VI|VA|WA|WV|WI|WY)[A-Z]{2}[, ]+\\d{5}(?:-\\d{4})?).+/\n</code></pre>\n\n<p>I have the following string:</p>\n\n<pre><code>str = \"fdsfd 8126 E Bowen AVE Bensalem, PA 19020-1642 dfdf\"\n</code></pre>\n\n<p>Notice my capturing group begins with one or more digits that match the pattern. Yet this is what I get:</p>\n\n<pre><code>str =~ REGEX\n$1\n =&gt; \"6 E Bowen AVE Bensalem, PA 19020-1642\" \n</code></pre>\n\n<p>Or</p>\n\n<pre><code>match = str.match(REGEX)\nmatch[1]\n=&gt; \"6 E Bowen AVE Bensalem, PA 19020-1642\"\n</code></pre>\n\n<p>Why is it missing the first 3 digits of 812?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activemodel"], "comments": [{"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 1, "creation_date": 1521057733, "post_id": 49286685, "comment_id": 85576377, "body": "The issue is with <code>active_model-errors_details</code>. It depends on less than <code>5.0.0.beta1</code> but your version of <code>5.0.0</code> is greater than that. Either update <code>active_model-errors_details</code> to a version which supports rails 5.0.0 (not beta) or remove it"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1521067711, "creation_date": 1521067711, "answer_id": 49288852, "question_id": 49286685, "link": "https://stackoverflow.com/questions/49286685/updating-rails-4-2-5-to-rails-5-keep-having-activemodel-dependencies-issues/49288852#49288852", "title": "updating rails 4.2.5 to rails 5, keep having ActiveModel dependencies issues", "body": "<p>There is no version of the <code>active_model-errors_details</code> that supports Ruby on Rails <code>5.x</code> (see its <a href=\"https://rubygems.org/gems/active_model-errors_details\" rel=\"nofollow noreferrer\">Rubygems</a> page).</p>\n\n<p>But the <a href=\"https://github.com/cowbell/active_model-errors_details\" rel=\"nofollow noreferrer\">documentation</a> of the <code>active_model-errors_details</code> says that it is a <em>feature backported from Rails 5.0 to use with Rails 3.2.x and 4.x apps</em>.</p>\n\n<p>Therefore I think there is no need to keep that gem in your application once you update to Ruby 5.0. Just remove the <code>gem 'active_model-errors_details'</code> line from your <code>Gemfile</code> and run <code>bundle install</code> again. </p>\n"}], "owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521067711, "creation_date": 1521057577, "question_id": 49286685, "link": "https://stackoverflow.com/questions/49286685/updating-rails-4-2-5-to-rails-5-keep-having-activemodel-dependencies-issues", "title": "updating rails 4.2.5 to rails 5, keep having ActiveModel dependencies issues", "body": "<p>when updating a rails 4.2.5 app (thats in production on heroku) to rails 5, i keep running into the below incompatible version for the gem, i've tried the bundle update, bundle install, done everything asked by the upgrade docs on rails site and stackoverflow. </p>\n\n<pre><code>Bundler could not find compatible versions for gem \"activemodel\":\n   In snapshot (Gemfile.lock):\n     activemodel (= 5.0.0)\n\n   In Gemfile:\n     active_model-errors_details was resolved to 1.3.0, which depends \n on\n      activemodel (&lt; 5.0.0.beta1, &gt;= 3.2.13)\n\n     carrierwave was resolved to 1.2.2, which depends on\n       activemodel (&gt;= 4.0.0)\n\n     rails (= 5.0.0) was resolved to 5.0.0, which depends on\n       activemodel (= 5.0.0)\n\n     web-console (~&gt; 2.0) was resolved to 2.3.0, which depends on\n       activemodel (&gt;= 4.0)\n\n   Running `bundle update` will rebuild your snapshot from scratch, \n using only\n the gems in your Gemfile, which may resolve the conflict.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1521059123, "post_id": 49286635, "comment_id": 85577147, "body": "no it won&#39;t. but you should use activejob."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 8094853, "user_type": "registered", "profile_image": "https://graph.facebook.com/319565471813969/picture?type=large", "display_name": "Nessa Jane Marin", "link": "https://stackoverflow.com/users/8094853/nessa-jane-marin"}, "is_accepted": true, "score": 3, "last_activity_date": 1521059485, "creation_date": 1521059485, "answer_id": 49287134, "question_id": 49286635, "link": "https://stackoverflow.com/questions/49286635/will-starting-an-async-process-within-a-rails-begin-end-block-cause-an-issue/49287134#49287134", "title": "Will starting an async process within a Rails begin-end block cause an issue?", "body": "<p>The short version is a Sidekiq job that's run asynchronously will not hold up the <code>begin...end</code>. That said, it looks like you're maybe trying to do something with a deeper down Sidekiq class.</p>\n\n<p>The longer explanation:</p>\n\n<p>So if you're trying to kick of a single run of a single task you usually create a new class that includes the <code>Sidekiq::Worker</code> module. Then you define a method called <code>perform</code> that does the work you want to do asynchronously. Then you call <code>perform_async</code> on your worker. It looks something like this:</p>\n\n<pre><code># in app/workers\nclass MyCoolWorker\n  include Sidekiq::Worker\n\n  def perform(numbers)\n    crunch_numbers_for_a_long_time(numbers)\n  end\nend\n\n# wherever you want to kick off a task\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nMyCoolWorker.perform_async(numbers)\n</code></pre>\n\n<p>You can also schedule a task for a specific time</p>\n\n<pre><code>MyCoolWorker.perform_in(1.hour)\n</code></pre>\n\n<p>You will need to have Redis installed and run Sideqik with <code>bundle exec sidekiq</code></p>\n\n<p><code>perform_async</code> and <code>perform_in</code> will just tell sidekiq \"Hey please do this for me when you can / at the time I tell you\" It's very quick and then done. The actually work gets done by Sidekiq in a different Ruby process.</p>\n\n<p>Here's a good place for help in Sidekiq's documentation: </p>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Getting-Started\" rel=\"nofollow noreferrer\">https://github.com/mperham/sidekiq/wiki/Getting-Started</a></p>\n\n<p>There's even a presentation :) </p>\n"}], "owner": {"reputation": 271, "user_id": 5379719, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8636f3628ea4d7d29a5938668fa99725?s=128&d=identicon&r=PG&f=1", "display_name": "tnaught", "link": "https://stackoverflow.com/users/5379719/tnaught"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 49287134, "answer_count": 1, "score": 2, "last_activity_date": 1521059485, "creation_date": 1521057341, "question_id": 49286635, "link": "https://stackoverflow.com/questions/49286635/will-starting-an-async-process-within-a-rails-begin-end-block-cause-an-issue", "title": "Will starting an async process within a Rails begin-end block cause an issue?", "body": "<p>I am looking to start an async worker task within a begin-end block in rails. Ex:</p>\n\n<pre><code>begin\n a = 1\n b = a + 2\n Workers::SideKiqAsynTask.new().process\nend\n</code></pre>\n\n<p>I am having trouble understanding if the begin will wait for the Workers task which is a Sidekiq async process to complete.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec-rails", "faker"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1521057761, "post_id": 49286602, "comment_id": 85576387, "body": "In the child factory, the <code>f.user_id</code> should refer to an existing User record. Currently it is not, which raises this blank error on the Child creation. Use <code>f.assocation(:user, :factory =&gt; :user)</code> instead of the <code>f.user_id</code> line. If your test suite is not requiring the <code>Child</code> object to have an associated <code>User</code> record, you could mock the <code>user</code> method of <code>Child</code> just for this Test context, saving you some performances"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521057864, "post_id": 49286602, "comment_id": 85576457, "body": "BTW, <code>FactoryGirl.create_list(:factory_name, 3)</code> is more effective than <code>3.times { create(:factory_name) }</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521062407, "post_id": 49286602, "comment_id": 85578651, "body": "@MrYoshiji you should leave this as ann annswer"}, {"owner": {"reputation": 123, "user_id": 9424324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90d18cc7c0f628aa07f0ce863b2aec9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pyrmon55", "link": "https://stackoverflow.com/users/9424324/pyrmon55"}, "edited": false, "score": 0, "creation_date": 1521064633, "post_id": 49286602, "comment_id": 85579604, "body": "Thank you for your help. I&#39;ve tried it like you said with the replace of the line <b>f.user_id</b> but I got a new error with wrong number of arguments                                                                   <b>Failure/Error: f.assocation(:user, :factory =&gt; :user) {Faker::Number.between(1,10)}</b>  ArgumentError:   wrong number of arguments (given 3, expected 1..2)"}, {"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1521066952, "post_id": 49286602, "comment_id": 85580566, "body": "you can just say <code>association :user</code> or even just <code>user</code>"}, {"owner": {"reputation": 123, "user_id": 9424324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90d18cc7c0f628aa07f0ce863b2aec9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pyrmon55", "link": "https://stackoverflow.com/users/9424324/pyrmon55"}, "edited": false, "score": 0, "creation_date": 1521069633, "post_id": 49286602, "comment_id": 85581444, "body": "Okay sorry for my stuoid questions, but I&#39;m really bad in rspec... I&#39;ve rewritten my <code>f.user_id</code>  to <code>f.association(:user, :factory =&gt; :user) {Faker::Number.between(1,10)}</code> but my test doesn&#39;t work, because there are now problems with the code in the test. I&#39;ve changed to vary the part <code>id: user.id</code> but I get the error     <code>Failure&#47;Error: before { get :show, id: user.id}            ArgumentError:        unknown keyword: id</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9424324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90d18cc7c0f628aa07f0ce863b2aec9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pyrmon55", "link": "https://stackoverflow.com/users/9424324/pyrmon55"}, "edited": false, "score": 0, "creation_date": 1521105433, "post_id": 49290605, "comment_id": 85593013, "body": "Thank you very much for yout help! I&#39;ve replaced this part in my code but the <code>before { get :show, id: user.id}</code>  produces an error. Is it possible to show me, how I can rearrange the first test? The error is the following <code>NameError:        undefined local variable or method </code>user&#39; for #&lt;RSpec::ExampleGroups::UsersController::GETShow`"}, {"owner": {"reputation": 123, "user_id": 9424324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90d18cc7c0f628aa07f0ce863b2aec9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pyrmon55", "link": "https://stackoverflow.com/users/9424324/pyrmon55"}, "edited": false, "score": 0, "creation_date": 1521108575, "post_id": 49290605, "comment_id": 85595112, "body": "thank you for your help! I think I have an fundamental error in my code. I have changed my code like your&#39;s and now I get the error, that the method create isn&#39;s defined <code>undefined method create</code>"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 123, "user_id": 9424324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90d18cc7c0f628aa07f0ce863b2aec9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pyrmon55", "link": "https://stackoverflow.com/users/9424324/pyrmon55"}, "edited": false, "score": 0, "creation_date": 1521110865, "post_id": 49290605, "comment_id": 85596667, "body": "@Pyrmon55, change <code>create</code> to <code>FactoryGirl.create</code>. Why do you have line <code>require &#39;factory_girl_rails&#39;</code> in the test? It should work automagically if you have this gem in Gemfile"}, {"owner": {"reputation": 123, "user_id": 9424324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90d18cc7c0f628aa07f0ce863b2aec9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pyrmon55", "link": "https://stackoverflow.com/users/9424324/pyrmon55"}, "edited": false, "score": 0, "creation_date": 1521146166, "post_id": 49290605, "comment_id": 85619657, "body": "Thank you very much for your help!"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 0, "last_activity_date": 1521107383, "last_edit_date": 1521107383, "creation_date": 1521080709, "answer_id": 49290605, "question_id": 49286602, "link": "https://stackoverflow.com/questions/49286602/rails-testing-with-rspec/49290605#49290605", "title": "Rails testing with rspec", "body": "<p>I think that it would be better to post the whole factory for you. And I think you don't need to <code>require faker</code> if you have it in Gemfile.</p>\n\n<pre><code>FactoryGirl.define do\n  factory :child do \n    name { Faker::Name}\n    city { Faker::Address.city}\n    postalcode {Faker::Number.between(30000,35000)}\n    streed {Faker::Address.street_name}\n    add_number {Faker::Address.secondary_address}\n    disability { Faker::Boolean.boolean}\n    halal { Faker::Boolean.boolean}\n    koscha {Faker::Boolean.boolean}\n    vegetarian {Faker::Boolean.boolean}\n    vegan {Faker::Boolean.boolean}\n    allday { Faker::Boolean.boolean}\n    gender { Faker::Number.between(0,1)}\n    user\n  end\nend\n</code></pre>\n\n<p>Inside specs when you need to create a child for the particular user:</p>\n\n<pre><code>let(:current_user) { create :user }\nlet(:child) { create :child, user: current_user }\n</code></pre>\n\n<p>Try to change your controller spec:</p>\n\n<pre><code> describe UsersController do\n   let(:user) { create(:user) }\n\n   describe \"GET #show\" do\n\n     before { get :show, params: { id: user.id } }\n     it \"assigns the requested user to @user\" do\n       assigns(:user).should eq user\n     end\n     it \"renders  the :show template\"\n     it { expect(response).to have_http_status 200 }\n   end\n\n   describe \"GET #new\" do\n     before { get :new }\n\n     it \"assigns a new User to @user\" do\n       assigns(:user).should be_a_new(User)\n     end\n     it \"renders  the :new template\"\n   end\n end\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9424324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90d18cc7c0f628aa07f0ce863b2aec9c?s=128&d=identicon&r=PG&f=1", "display_name": "Pyrmon55", "link": "https://stackoverflow.com/users/9424324/pyrmon55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 49290605, "answer_count": 1, "score": 0, "last_activity_date": 1521107383, "creation_date": 1521057238, "question_id": 49286602, "link": "https://stackoverflow.com/questions/49286602/rails-testing-with-rspec", "title": "Rails testing with rspec", "body": "<p>I have a problem with my testing in rails with rspec. All in all I have a structure between 4 models, but for the moment I try to solve my testing for two of them. I'm using faker and FactoryGirl and have the following factories:</p>\n\n<pre><code> require 'faker'\n\n FactoryGirl.define do\n   factory :user do |f|\n     f.name { Faker::Name}\n     f.email { Faker::Internet.email}\n     f.password {Faker::Internet.password}\n     f.role {\"Kindergarten\"}\n   end\n end\n\n\n\n\n require 'faker'\n\n FactoryGirl.define do\n   factory :child do |f|\n     f.name { Faker::Name}\n     f.city { Faker::Address.city}\n     f.postalcode {Faker::Number.between(30000,35000)}\n     f.streed {Faker::Address.street_name}\n     f.add_number {Faker::Address.secondary_address}\n     f.disability { Faker::Boolean.boolean}\n     f.halal { Faker::Boolean.boolean}\n     f.koscha {Faker::Boolean.boolean}\n     f.vegetarian {Faker::Boolean.boolean}\n     f.vegan {Faker::Boolean.boolean}\n     f.allday { Faker::Boolean.boolean}\n     f.gender { Faker::Number.between(0,1)}\n     f.user_id {Faker::Number.between(1,10)}\n   end\n end\n</code></pre>\n\n<p>and my controller test looks like that</p>\n\n<pre><code> require 'rails_helper'\n require 'factory_girl_rails'\n\n describe UsersController do\n\n   before do\n     3.times { FactoryGirl.create(:child)}\n   end\n\n   describe \"GET #show\" do\n     let(:user) { FactoryGirl.create(:user) }\n     before { get :show, id: user.id}\n     it \"assigns the requested user to @user\" do\n       assigns(:user).should eq user\n     end\n     it \"renders  the :show template\"\n   end\n\n   describe \"GET #new\" do\n     let(:user) { FactoryGirl.create(:user) }\n     it \"assigns a new User to @user\" do\n       get :new, id: user.id\n       assigns(:user).should be_a_new(User)\n     end\n     it \"renders  the :new template\"\n   end\n\n end\n</code></pre>\n\n<p>When I try to run the test, I got this error message</p>\n\n<pre><code>  UsersController GET #new assigns a new User to @user\n      Failure/Error: 3.times { FactoryGirl.create(:child)}\n\n      ActiveRecord::RecordInvalid:\n        Validation failed: User can't be blank\n</code></pre>\n\n<p>My relations and validations in the models are as follow</p>\n\n<pre><code> class Child &lt; ApplicationRecord\n\n   has_many :relations, :dependent =&gt; :destroy\n   accepts_nested_attributes_for :relations\n   belongs_to :user\n   validates :user, presence: true\n   validates :name, presence: true, length: { maximum: 50 }\n   validates :city, presence: true, :on =&gt; :create\n     validates :postalcode, presence: true, numericality: true\n       validates :streed, presence: true\n         validates :add_number, presence: true\n\n validates :disability, inclusion: { in: [true, false] }\n validates :halal, inclusion: { in: [true, false] }\n validates :koscha, inclusion: { in: [true, false] }\n validates :vegetarian, inclusion: { in: [true, false] }\n validates :vegan, inclusion: { in: [true, false] }\n validates :allday, inclusion: { in: [true, false] }\n\n validates :gender, presence: true\n\n end\n\n\n class User &lt; ApplicationRecord\n   attr_accessor :remember_token, :activation_token, :reset_token\n   has_many :children, dependent: :destroy\n   has_many :kindergartens, dependent: :destroy\n   has_many :relations, dependent: :destroy\n   before_save   :downcase_email\n   before_create :create_activation_digest\n   validates :name, presence: true, length: { maximum: 50 }\n   VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n   validates :email, presence: true, length: { maximum: 255 },\n                     format: { with: VALID_EMAIL_REGEX },\n                     uniqueness: { case_sensitive: false }\n\n validates :role, presence: true\n\n\n   has_secure_password\n   validates :password, presence: true, length: { minimum: 6 }, allow_nil: true\n end\n</code></pre>\n\n<p>My problem is, that I'm not sure if there is a fault in my rspec code or if I have made a mistake in my validations and relations in my normal models. Can someone help me?</p>\n"}, {"tags": ["ruby", "postgresql"], "comments": [{"owner": {"reputation": 447, "user_id": 5808721, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/73475d222139b2eb3117f416d1fe97c2?s=128&d=identicon&r=PG&f=1", "display_name": "RalphShnelvar", "link": "https://stackoverflow.com/users/5808721/ralphshnelvar"}, "reply_to_user": {"reputation": 434877, "user_id": 330315, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4b152262d9ba55197f609625358ff7e0?s=128&d=identicon&r=PG", "display_name": "a_horse_with_no_name", "link": "https://stackoverflow.com/users/330315/a-horse-with-no-name"}, "edited": false, "score": 0, "creation_date": 1521125037, "post_id": 49286377, "comment_id": 85606616, "body": "The programming language is Ruby.  My apologies for not making that clear."}], "answers": [{"tags": [], "owner": {"reputation": 447, "user_id": 5808721, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/73475d222139b2eb3117f416d1fe97c2?s=128&d=identicon&r=PG&f=1", "display_name": "RalphShnelvar", "link": "https://stackoverflow.com/users/5808721/ralphshnelvar"}, "is_accepted": false, "score": 0, "last_activity_date": 1521106860, "creation_date": 1521106860, "answer_id": 49295939, "question_id": 49286377, "link": "https://stackoverflow.com/questions/49286377/pgconn-connect-exception-repeats-error-message-twice/49295939#49295939", "title": "PGconn.connect exception repeats error message twice", "body": "<p>The following is a hack and does not get to the root of the question.  It just cures the symptom of the problem.</p>\n\n<p>The \"answer\" is deliberately verbose.</p>\n\n<pre><code>begin\n  conn = PGconn.connect(\"localhost\", 5432, \"\" , \"\", db_name, postgres_username, postgres_password)\n  # Do some stuff\nrescue PG::ConnectionBad =&gt; e\n  # There seems to be a bug in PG::ConnectionBad where the error message is doubled.  Get only a single error message\n  puts e\n  theDoubledMsg = e.to_s\n  theSingleMsg = theDoubledMsg.split(\"\\n\")[0]\n  # See https://stackoverflow.com/questions/2823748/how-do-i-add-information-to-an-exception-message-in-ruby\n  raise $!, theSingleMsg, $!.backtrace\nrescue Exception =&gt; e\n  puts e\n  raise # reraise exception\nensure\n  conn.close if conn\nend\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 5808721, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/73475d222139b2eb3117f416d1fe97c2?s=128&d=identicon&r=PG&f=1", "display_name": "RalphShnelvar", "link": "https://stackoverflow.com/users/5808721/ralphshnelvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521125923, "creation_date": 1521056265, "last_edit_date": 1521125923, "question_id": 49286377, "link": "https://stackoverflow.com/questions/49286377/pgconn-connect-exception-repeats-error-message-twice", "title": "PGconn.connect exception repeats error message twice", "body": "<p>When I do</p>\n\n<pre><code>conn = PGconn.connect(\"localhost\", 5432, \"\" , \"\", db_name, postgres_username, postgres_password)\n</code></pre>\n\n<p>and the password is incorrect, an exception (PG::ConnectionBad) is thrown (which is what I expect)</p>\n\n<pre><code>begin\n  conn = PGconn.connect(\"localhost\", 5432, \"\" , \"\", db_name, postgres_username, postgres_password)\n  # Do some stuff\nrescue PG::ConnectionBad =&gt; e\n  puts e\n  raise # reraise exception\nrescue Exception =&gt; e\n  puts e\n  raise # reraise exception\nensure\n  conn.close if conn\nend\n</code></pre>\n\n<p>when I do a \"puts e\" I get</p>\n\n<pre><code>FATAL:  password authentication failed for user \"something@something.com\"\nFATAL:  password authentication failed for user \"something@something.com\"\n</code></pre>\n\n<p>That is, the failure message is repeated.</p>\n\n<p>I'm using</p>\n\n<ul>\n<li><p>PostgreSQL 9.6.3 on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu\n5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609, 64-bit</p>\n\n<p>ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]</p>\n\n<p>Ubuntu 16.04</p></li>\n</ul>\n\n<p>Is this a bug? Is it to be expected?</p>\n"}, {"tags": ["ruby", "openssl", "rvm"], "comments": [{"owner": {"reputation": 18142, "user_id": 1515819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7d0a1373a2312378f6563acf2a8f937?s=128&d=identicon&r=PG&f=1", "display_name": "St&#233;phane Bruckert", "link": "https://stackoverflow.com/users/1515819/st%c3%a9phane-bruckert"}, "edited": false, "score": 1, "creation_date": 1537297130, "post_id": 49286361, "comment_id": 91731095, "body": "If possible please write your own answer and remove the answer from your question. Also don&#39;t hesitate to mark your answer as accepted."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 1257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7858f3de7073f9a378223803fa7fa7d?s=128&d=identicon&r=PG", "display_name": "Harvey Dent", "link": "https://stackoverflow.com/users/1257574/harvey-dent"}, "edited": false, "score": 0, "creation_date": 1580198885, "post_id": 53420816, "comment_id": 106009052, "body": "Thanks! But this does not work. I run  rvm reinstall 2.4.2 --with-openssl-dir=&quot;$(brew --prefix openssl)&quot; bundle install  Still now working.   I run openssl version, it returns:  LibreSSL 2.8.3  My colleage 2.6.5 works, which has OpenSSL::Digest::DSS1"}, {"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "reply_to_user": {"reputation": 197, "user_id": 1257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7858f3de7073f9a378223803fa7fa7d?s=128&d=identicon&r=PG", "display_name": "Harvey Dent", "link": "https://stackoverflow.com/users/1257574/harvey-dent"}, "edited": false, "score": 0, "creation_date": 1580315983, "post_id": 53420816, "comment_id": 106059861, "body": "I wrote this almost 2 years ago for OS X High Sierra.  If you&#39;re not using OS X 10.13, this answer may not work for you.  Sorry."}, {"owner": {"reputation": 197, "user_id": 1257574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7858f3de7073f9a378223803fa7fa7d?s=128&d=identicon&r=PG", "display_name": "Harvey Dent", "link": "https://stackoverflow.com/users/1257574/harvey-dent"}, "edited": false, "score": 0, "creation_date": 1580409244, "post_id": 53420816, "comment_id": 106097787, "body": "yeah, its catalina now. Thanks for reply."}], "tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": true, "score": 0, "last_activity_date": 1542836261, "creation_date": 1542836261, "answer_id": 53420816, "question_id": 49286361, "link": "https://stackoverflow.com/questions/49286361/fixing-uninitialized-constant-openssldigestdss-on-mac-os-sierra-with-rvm/53420816#53420816", "title": "Fixing uninitialized constant OpenSSL::Digest::DSS on Mac OS Sierra with RVM", "body": "<p>It took me a while to get this right, but ultimately the following worked:</p>\n\n<pre><code>rvm reinstall 2.4.2 --with-openssl-dir=\"$(brew --prefix openssl)\"\n</code></pre>\n\n<p>It'll take a while to reinstall because rvm will run <code>rvm pristine</code>, but when its done just run <code>bundle install</code> again and you should be good to go.</p>\n\n<p>To verify, just open your console via <code>irb</code> or <code>rails console</code> and enter:</p>\n\n<p><code>OpenSSL::Digest::DSS</code></p>\n\n<p>That module should exist after you're done.  </p>\n"}], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 2, "accepted_answer_id": 53420816, "answer_count": 1, "score": 2, "last_activity_date": 1542836261, "creation_date": 1521056190, "last_edit_date": 1542836250, "question_id": 49286361, "link": "https://stackoverflow.com/questions/49286361/fixing-uninitialized-constant-openssldigestdss-on-mac-os-sierra-with-rvm", "title": "Fixing uninitialized constant OpenSSL::Digest::DSS on Mac OS Sierra with RVM", "body": "<p>I just solved a difficult problem on my Mac (High Sierra) and wanted to share so others can fix it more quickly than it took me.</p>\n\n<p>The specific error was <code>uninitialized constant OpenSSL::Digest::DSS</code> when trying to use any Ruby gem that used Net::SSH.  In my case the Net::SFTP gem would not connect to any server.</p>\n\n<p>At first I tried <code>bundle update net-ssh</code>, but that didn't fix it.</p>\n\n<p>Then I decided that this is probably a Ruby issue and <code>openssl</code> isn't linked properly. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "ide"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521057484, "post_id": 49286286, "comment_id": 85576245, "body": "Do you want to share the source-code or the running application? if source-code, go with <code>github</code> or other another public &amp; free service for versioning."}, {"owner": {"reputation": 31, "user_id": 6861709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6137eb7904fb7eb5dfb46f7650868110?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel M", "link": "https://stackoverflow.com/users/6861709/rachel-m"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521058038, "post_id": 49286286, "comment_id": 85576567, "body": "I want to share a running application. I can run the c9 server but I don&#39;t think it stays running for long periods."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 2, "creation_date": 1521058804, "post_id": 49286286, "comment_id": 85576975, "body": "You can take a look at Heroku, I never really used it but I recall that their free version is acceptable for this kind of needs."}, {"owner": {"reputation": 31, "user_id": 6861709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6137eb7904fb7eb5dfb46f7650868110?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel M", "link": "https://stackoverflow.com/users/6861709/rachel-m"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521060799, "post_id": 49286286, "comment_id": 85577874, "body": "I&#39;ll check it out, thanks."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1521062027, "post_id": 49286286, "comment_id": 85578455, "body": "The correct terminology here is &quot;I want to deploy a Ruby application&quot; and &quot;Is there a way to deploy to a server such as AWS?&quot; Most Ruby projects use something like <a href=\"http://capistranorb.com\" rel=\"nofollow noreferrer\">Capistrano</a> to help with deployment. Heroku is an interesting option that&#39;s really easy to get started with, and also worth considering."}], "owner": {"reputation": 31, "user_id": 6861709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6137eb7904fb7eb5dfb46f7650868110?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel M", "link": "https://stackoverflow.com/users/6861709/rachel-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1521055870, "creation_date": 1521055870, "question_id": 49286286, "link": "https://stackoverflow.com/questions/49286286/sharing-an-ide-ruby-app-with-employers", "title": "Sharing an IDE Ruby app with employers", "body": "<p>I'm a student trying to share a Ruby application I created over the summer.\nIs there a way to convert an application created in an IDE (C9) to a server such as AWS? I want to be able to share my application with employers at any time. But I'm not sure what type of service to use with AWS. I've explored Lamda and web hosting but I'm not sure that they're the right services. Any insight would be helpful.</p>\n"}, {"tags": ["ruby", "date"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521055833, "post_id": 49286185, "comment_id": 85575309, "body": "There&#39;s no way &#39;0019&#39; can be converted to 1900, use <code>Date.strptime(&quot;1900-1-1&quot;, &quot;%Y-%m-%d&quot;)</code> instead, if you need, concatenate the needed zeros."}, {"owner": {"reputation": 23, "user_id": 9493475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2164ae70f12f6b5b503102a35cef1e85?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie Wayn", "link": "https://stackoverflow.com/users/9493475/eddie-wayn"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521057464, "post_id": 49286185, "comment_id": 85576236, "body": "but in Excel the date come in this format 17/01/01 when i use the code change 0017-01-01"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1521057789, "post_id": 49286185, "comment_id": 85576413, "body": "Are you absolutely sure that <code>19-1-1</code> is suppose to January 1st 1900 and not 2019? The latter seems much more likely to me..."}, {"owner": {"reputation": 23, "user_id": 9493475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2164ae70f12f6b5b503102a35cef1e85?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie Wayn", "link": "https://stackoverflow.com/users/9493475/eddie-wayn"}, "edited": false, "score": 0, "creation_date": 1521060248, "post_id": 49286185, "comment_id": 85577645, "body": "Just i need 19 to 2019 thx this work"}], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1521057878, "creation_date": 1521057878, "answer_id": 49286765, "question_id": 49286185, "link": "https://stackoverflow.com/questions/49286185/ruby-date-strftime-format-date-with-19-1-1-to-1900-01-01-not-work/49286765#49286765", "title": "Ruby Date.strftime format date with 19-1-1 to 1900-01-01 not work", "body": "<p>I'm assuming an error in your question. </p>\n\n<p>You're parsing the date incorrectly. <code>%Y</code> is for the year <em>with century</em>, so \"19\" is just the year 19.</p>\n\n<p>You want <code>%y</code> which is year <em>without century</em> (<a href=\"http://ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html#method-i-strftime\" rel=\"nofollow noreferrer\">docs</a>). So it interprets \"19\" as the year 2019.</p>\n\n<pre><code>Date.strptime(\"19-1-1\", \"%y-%m-%d\").strftime('%Y/%m/%d')\n# \"2019/01/01\"\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9493475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2164ae70f12f6b5b503102a35cef1e85?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie Wayn", "link": "https://stackoverflow.com/users/9493475/eddie-wayn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 49286765, "answer_count": 1, "score": 2, "last_activity_date": 1521116276, "creation_date": 1521055556, "last_edit_date": 1521116276, "question_id": 49286185, "link": "https://stackoverflow.com/questions/49286185/ruby-date-strftime-format-date-with-19-1-1-to-1900-01-01-not-work", "title": "Ruby Date.strftime format date with 19-1-1 to 1900-01-01 not work", "body": "<p><strong>Using Ruby for Reading a sheet of Excel, I have a problem with the date format.</strong></p>\n\n<p>My code is:</p>\n\n<pre><code>Date.strptime(\"19-1-1\", \"%Y-%m-%d\").strftime('%Y/%m/%d') /* i try this\n'0019-01-01' /* result\n</code></pre>\n\n<p>I need:</p>\n\n<pre><code>'1900-01-01' \n</code></pre>\n\n<p>Any idea how to change?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rabbitmq"], "answers": [{"tags": [], "owner": {"reputation": 6400, "user_id": 1466825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b420d86764ffe237a2fdc52e28b73f4?s=128&d=identicon&r=PG", "display_name": "Luke Bakken", "link": "https://stackoverflow.com/users/1466825/luke-bakken"}, "is_accepted": false, "score": 0, "last_activity_date": 1521130037, "creation_date": 1521130037, "answer_id": 49304199, "question_id": 49285299, "link": "https://stackoverflow.com/questions/49285299/rabbitmq-in-ruby-on-mac-not-received-message/49304199#49304199", "title": "rabbitmq in ruby on mac not received message", "body": "<p>The RabbitMQ team monitors <a href=\"https://groups.google.com/forum/#!forum/rabbitmq-users\" rel=\"nofollow noreferrer\">this mailing list</a> and only sometimes answers questions on StackOverflow.</p>\n\n<hr>\n\n<p>I recommend carefully studying the <a href=\"https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/ruby\" rel=\"nofollow noreferrer\">tutorial code</a> and compare it with what you have written.</p>\n\n<p>Since you did not provide your code for <code>new_task.rb</code>, I assume you are using the code as it appears <a href=\"https://github.com/rabbitmq/rabbitmq-tutorials/blob/master/ruby/new_task.rb\" rel=\"nofollow noreferrer\">here</a>. That code expects a queue named <code>task_queue</code>, yet the code you provide above uses a queue named <code>hello</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6587222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5df27c6b45f8e78a9a28fb5f57b12925?s=128&d=identicon&r=PG&f=1", "display_name": "Tracey Wang", "link": "https://stackoverflow.com/users/6587222/tracey-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521130037, "creation_date": 1521052353, "question_id": 49285299, "link": "https://stackoverflow.com/questions/49285299/rabbitmq-in-ruby-on-mac-not-received-message", "title": "rabbitmq in ruby on mac not received message", "body": "<p>I am new to rabbitmq. I tried to follow a tutorial on mac using ruby and rabbitmq. I created two .rb files.</p>\n\n<p>worker.rb</p>\n\n<pre><code>require 'bunny'\nconnection=Bunny.new\nconnection.start\nchannel= connection.create_channel\nqueue=channel.queue('hello')\n\nbegin\n  puts ' Waiting for messages. To exit press CTRL+C'\n  queue.subscribe(block: true) do |delivery_info, _properties, body|\n  puts \" [x] Received #{body}\"\n  # imitate some work\n  sleep body.count('.').to_i\n  puts ' [x] Done'\nend\nrescue Interrupt =&gt; _\n  conn.close\n\n  exit(0)\nend\n</code></pre>\n\n<p>and receive.rb</p>\n\n<pre><code> require 'bunny'\n    connection=Bunny.new\n    connection.start\n    channel= connection.create_channel\n    queue=channel.queue('hello')\n    begin\n      puts ' Waiting for messages. To exit press CTRL+C'\n      queue.subscribe(block: true) do |_delivery_info, _properties, body|\n        puts \"  Received #{body}\"\n    end\nrescue Interrupt =&gt; _\n  conn.close\n\n  exit(0)\nend\n</code></pre>\n\n<p>the rabbitmq server is open. When I run ruby new_task.rb, I see the output [x] Sent Hello World!, which is as expected. When I run ruby worker.rb. It show waiting for message... but never receive the message. Anyone can help? </p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 13, "last_activity_date": 1521047693, "creation_date": 1521047693, "answer_id": 49283929, "question_id": 49283895, "link": "https://stackoverflow.com/questions/49283895/non-mutating-array-push-method-equivalent/49283929#49283929", "title": "Non-mutating array push method equivalent", "body": "<p>As simple as this:</p>\n\n<pre><code>new_arr = arr + [3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2757, "user_id": 1042144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d1bc195cf067a719735316e970a5449?s=128&d=identicon&r=PG", "display_name": "Brian Kung", "link": "https://stackoverflow.com/users/1042144/brian-kung"}, "is_accepted": false, "score": 3, "last_activity_date": 1555278521, "creation_date": 1555278521, "answer_id": 55680322, "question_id": 49283895, "link": "https://stackoverflow.com/questions/49283895/non-mutating-array-push-method-equivalent/55680322#55680322", "title": "Non-mutating array push method equivalent", "body": "<p>I'll add another solution using array splats that might seem less awkward:</p>\n\n<pre><code>new_arr = [*arr, 3]\n</code></pre>\n"}], "owner": {"reputation": 2774, "user_id": 3668967, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/tcSwe.png?s=128&g=1", "display_name": "Karol Selak", "link": "https://stackoverflow.com/users/3668967/karol-selak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2598, "favorite_count": 0, "accepted_answer_id": 49283929, "answer_count": 2, "score": 4, "last_activity_date": 1585573218, "creation_date": 1521047582, "last_edit_date": 1521048830, "question_id": 49283895, "link": "https://stackoverflow.com/questions/49283895/non-mutating-array-push-method-equivalent", "title": "Non-mutating array push method equivalent", "body": "<p>I'd like to add a new element to an array in a non-mutating way. In JS, I can do this:</p>\n\n<pre><code>var new_arr = arr.concat(3)\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>arr.push(3)\n</code></pre>\n\n<p>How can I do the same thing in Ruby? The <code>concat</code> method in Ruby is mutating.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1521050637, "post_id": 49283708, "comment_id": 85572473, "body": "What are the exact associations defined on the TargetMarket and Company models (i.e has_many, belongs_to)?"}, {"owner": {"reputation": 57, "user_id": 7973321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NtSue9MXgs/AAAAAAAAAAI/AAAAAAAAAGo/90n6aQGfAsc/photo.jpg?sz=128", "display_name": "Brian O Halloran", "link": "https://stackoverflow.com/users/7973321/brian-o-halloran"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1521106665, "post_id": 49283708, "comment_id": 85593800, "body": "A company has_and_belongs_to_many :target_markets"}], "answers": [{"tags": [], "owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "is_accepted": false, "score": 0, "last_activity_date": 1521048219, "last_edit_date": 1521048219, "creation_date": 1521047585, "answer_id": 49283897, "question_id": 49283708, "link": "https://stackoverflow.com/questions/49283708/only-select-from-seeds-if-they-appear-in-the-database-multiple-times/49283897#49283897", "title": "Only select from seeds if they appear in the database multiple times", "body": "<p>When a user selects up to 5 countries they wish to have as a target market for their Company, do you store that selection as an association between the Company and the target market? If you do, then you can return only the target markets associated with the current company</p>\n\n<pre><code>class Company &lt; ActiveRecord::Base\n    has_many :target_markets\nend\n</code></pre>\n\n<p>Adding the target markets</p>\n\n<pre><code>@company.target_markets &lt;&lt; TargetMarkets.find_by_name('Finland')\n</code></pre>\n\n<p>Displaying the target markets</p>\n\n<pre><code># assuming `@company` is set based on the route (`/company/:id`), `current_user` settings, or however you determine what the current company is\n&lt;%= f.select :target_markets_id_in, @company.target_markets.map{ |u| u.name, u.id] }, { include_blank: \"All\" }, {class: 'selectize-this', multiple: true} %&gt;\n</code></pre>\n\n<h1>Further reading</h1>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/18114492/3012550\">adding records with a has_many association (StackOverflow answer)</a>\n\n<ul>\n<li>Note that because you create the <code>TargetMarket</code>s in the seed, you shouldn't be <code>create</code>ing them again when you associate them, you  should find them from the database and associate the found records.</li>\n</ul></li>\n<li><a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-association\" rel=\"nofollow noreferrer\">the has-many association</a></li>\n<li><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow noreferrer\">general info on associations</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7973321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NtSue9MXgs/AAAAAAAAAAI/AAAAAAAAAGo/90n6aQGfAsc/photo.jpg?sz=128", "display_name": "Brian O Halloran", "link": "https://stackoverflow.com/users/7973321/brian-o-halloran"}, "edited": false, "score": 0, "creation_date": 1521129715, "post_id": 49300471, "comment_id": 85610203, "body": "Thank you! Works like a charm."}], "tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": true, "score": 1, "last_activity_date": 1521119758, "creation_date": 1521119758, "answer_id": 49300471, "question_id": 49283708, "link": "https://stackoverflow.com/questions/49283708/only-select-from-seeds-if-they-appear-in-the-database-multiple-times/49300471#49300471", "title": "Only select from seeds if they appear in the database multiple times", "body": "<p>JOINing and DISTINCTing will give you a unique list of objects with associations. This is because the default Rails' ActiveRecord <a href=\"http://guides.rubyonrails.org/active_record_querying.html#joins\" rel=\"nofollow noreferrer\">join</a> is an <code>INNER JOIN</code>, which filters for the presence of the association. ActiveRecord will still only <code>SELECT</code> columns from the original table, so <code>DISTINCT</code> will return a unique list of objects.</p>\n\n<p>In your case, you need to add a habtm association to TargetMarket if it does not already exist:</p>\n\n<pre><code>class TargetMarket &lt; ApplicationRecord\n  has_and_belongs_to_many :companies\nend\n</code></pre>\n\n<p>Then replace this line:</p>\n\n<pre><code>TargetMarket.all.map{ |u| u.name, u.id] }\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>TargetMarket.joins(:companies).distinct.map { |u| [u.name, u.id] }\n</code></pre>\n\n<p>While you're at it, you may want to take a peek at the result of</p>\n\n<pre><code>TargetMarket.joins(:companies).distinct.to_sql\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7973321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NtSue9MXgs/AAAAAAAAAAI/AAAAAAAAAGo/90n6aQGfAsc/photo.jpg?sz=128", "display_name": "Brian O Halloran", "link": "https://stackoverflow.com/users/7973321/brian-o-halloran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 49300471, "answer_count": 2, "score": 0, "last_activity_date": 1521119758, "creation_date": 1521047054, "last_edit_date": 1521106639, "question_id": 49283708, "link": "https://stackoverflow.com/questions/49283708/only-select-from-seeds-if-they-appear-in-the-database-multiple-times", "title": "Only select from seeds if they appear in the database multiple times", "body": "<p>I have a TargetMarket class that has been seeded with all of the countries in the world like so </p>\n\n<pre><code>TargetMarket.create([\n {name: 'Andorra'},\n {name: 'United Arab Emirates'},\n {name: 'Afghanistan'},\n {name: 'Antigua and Barbuda'},\n ....\n ....\n {name: 'South Africa'},\n {name: 'Zambia'},\n {name: 'Zimbabwe'}\n])\n</code></pre>\n\n<p>A user can then select up to 5 countries they wish to have as a target market for their Company. </p>\n\n<p>On the public search page, I have a dropdown selection of all the TargetMarkets. </p>\n\n<p>The current code reads as</p>\n\n<pre><code>&lt;%= f.select :target_markets_id_in, TargetMarket.all.map{ |u| u.name, u.id] }, { include_blank: \"All\" }, {class: 'selectize-this', multiple: true} %&gt;\n</code></pre>\n\n<p>However, this obviously shows up ALL of the countries. I only want the countries that have been used as a target market by a company to populate the dropdown. </p>\n\n<p>For example; A company has target markets of \"Ireland\", \"Belgium\", \"Australia\" and \"Japan\". </p>\n\n<p>On the target_markets search option, I only want Ireland, Belgium, Australia and Japan to appear as possible search options as they are the only countries used in the database. </p>\n\n<p>Is this possible? </p>\n\n<p>Something like</p>\n\n<pre><code>&lt;%= f.select target_market_ids_in, TargetMarkets.where('name' count &gt;= 1) %&gt; \n</code></pre>\n\n<h1>Edit #</h1>\n\n<h2>Relationship</h2>\n\n<pre><code>class Company &lt; ApplicationRecord\n has_and_belongs_to_many :target_markets\n accepts_nested_attributes_for :target_markets, allow_destroy: true\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "capistrano", "capistrano3"], "answers": [{"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1521048919, "post_id": 49284248, "comment_id": 85571413, "body": "Thanks the <code>Bundler.with_clean_env</code> works like a charm. Haven&#39;t tried <code>su -l</code> but I&#39;m not sure this would work well with rvm"}, {"owner": {"reputation": 3411, "user_id": 294022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsrDd.jpg?s=128&g=1", "display_name": "GorillaApe", "link": "https://stackoverflow.com/users/294022/gorillaape"}, "reply_to_user": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1521048997, "post_id": 49284248, "comment_id": 85571456, "body": "It should however try printing env with Bundler.with_clean_env and without. It doesnt unset all variables and in some cases you might not want that. However for many cases it works"}], "tags": [], "owner": {"reputation": 3411, "user_id": 294022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsrDd.jpg?s=128&g=1", "display_name": "GorillaApe", "link": "https://stackoverflow.com/users/294022/gorillaape"}, "is_accepted": true, "score": 2, "last_activity_date": 1521049081, "last_edit_date": 1521049081, "creation_date": 1521048640, "answer_id": 49284248, "question_id": 49283643, "link": "https://stackoverflow.com/questions/49283643/executing-capistrano-from-a-different-application/49284248#49284248", "title": "Executing capistrano from a different application", "body": "<p>The problem is that in unix systems environment is inherited. So when you call Capistrano from your rails app you don't have access to other gems. <code>bash -c</code> doesn't seem to clean env. You can with <code>su -l</code> probably.</p>\n\n<p>One solution is to use</p>\n\n<pre><code>Bundler.with_clean_env do\n  Dir.chdir(ENV['HOME'] + '/app-to-deploy') do      \n    result = system('bundle', 'exec', \"cap\", \"staging\", \"deploy\")\n  end\nend\n</code></pre>\n\n<p>Just for reference: <a href=\"http://bundler.io/man/bundle-exec.1.html#Shelling-out\" rel=\"nofollow noreferrer\">http://bundler.io/man/bundle-exec.1.html#Shelling-out</a></p>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 49284248, "answer_count": 1, "score": 0, "last_activity_date": 1521049081, "creation_date": 1521046825, "question_id": 49283643, "link": "https://stackoverflow.com/questions/49283643/executing-capistrano-from-a-different-application", "title": "Executing capistrano from a different application", "body": "<p>I need to trigger a capistrano deployment from within an existing ruby scrpit.</p>\n\n<p>For example, assume I want to start service that will listen to some messages, and on some messages I want to trigger a capistrano deployment of another app using <code>cap staging deploy</code> (which does work if I run this command directly from a shell). </p>\n\n<pre><code>~/app-to-deploy\n  - Gemfile       #including many dependencies\n  - config/deploy # capistrano files\n~/my-service\n  - Gemfile       # including different dependencies than `app-to-deploy`\n  - my_script.rb  # that wishes to call `cap app-to-deploy deploy`\n</code></pre>\n\n<p>I was thinking I could run the capistrano bash script from my service using something like</p>\n\n<pre><code># my_service.rb\nDir.chdir(ENV['HOME'] + '/app-to-deploy') do\n  result = system('bash', '-c', \"cap staging deploy\")\nend\n</code></pre>\n\n<p>If I run it with or without <code>bundle exec</code> this gives something like </p>\n\n<pre><code>cap aborted!\nLoadError: cannot load such file -- active_support/all\n/deploy/hermes/Capfile:2:in `require'\n/deploy/hermes/Capfile:2:in `&lt;top (required)&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>(I have ActiveSupport as a gem in my <code>app-to-deploy</code> but I don't have it in the Gemfile of <code>my-service</code>)</p>\n\n<p>Seems like I have a lib dependency problem, but I'm not sure how to solve it... </p>\n\n<p>Anyone has ideas or ways to go around the problem ? (or even better a way to call capistrano without using bash, assuming I may still have different dependencies ?)</p>\n\n<p>(Note that <code>app-to-deploy</code> is an actual Rails app with many capistrano scripts that I don't want to touch if possible...)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1521039349, "post_id": 49280841, "comment_id": 85564423, "body": "<code>Dir.glob</code> will give directories and files."}, {"owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521039409, "post_id": 49280841, "comment_id": 85564464, "body": "I tryed that no luck unless im using it wrong?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521039453, "post_id": 49280841, "comment_id": 85564501, "body": "Give example of the code you have used."}, {"owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521039551, "post_id": 49280841, "comment_id": 85564593, "body": "ok :               Dir.foreach(&quot;lfw/&quot;) do |item| \t \tDir.glob(&quot;lfw/&quot;) do |filename| \tDir.glob(&quot;lfw/#{filename}/&quot;) do |file|"}, {"owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521039593, "post_id": 49280841, "comment_id": 85564630, "body": "this might be a bad example"}, {"owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521039645, "post_id": 49280841, "comment_id": 85564662, "body": "ill find a better one ive been writing a lot of these files"}, {"owner": {"reputation": 126, "user_id": 616256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35ef71da5861ed68ee079bf4fc325d8?s=128&d=identicon&r=PG", "display_name": "lhdv", "link": "https://stackoverflow.com/users/616256/lhdv"}, "edited": false, "score": 0, "creation_date": 1521041211, "post_id": 49280841, "comment_id": 85565837, "body": "Something like this? <a href=\"https://stackoverflow.com/questions/13629634/find-a-file-in-a-nested-directory-structure/\" title=\"find a file in a nested directory structure\">stackoverflow.com/questions/13629634/&hellip;</a>"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521045766, "post_id": 49280841, "comment_id": 85569231, "body": "Edit your answer to add the code you have tried."}, {"owner": {"reputation": 6100, "user_id": 3704297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjB9f.jpg?s=128&g=1", "display_name": "omikes", "link": "https://stackoverflow.com/users/3704297/omikes"}, "edited": false, "score": 0, "creation_date": 1521063269, "post_id": 49280841, "comment_id": 85579049, "body": "upvoted for getting a gold medal before breaking 20 reputation"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "edited": false, "score": 0, "creation_date": 1521040651, "post_id": 49281025, "comment_id": 85565411, "body": "I put the folder name and I get this error: `open&#39;: No such file or directory @ dir_initialize - lfw/ (Errno::ENOENT)"}, {"owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "edited": false, "score": 0, "creation_date": 1521041150, "post_id": 49281025, "comment_id": 85565787, "body": "if I set it outside the main folder(the picture ive shown you I get this error: <code>block in &lt;main&gt;&#39;: undefined method </code>each&#39; for nil:NilClass (NoMethodError)"}, {"owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "edited": false, "score": 0, "creation_date": 1521041191, "post_id": 49281025, "comment_id": 85565823, "body": "its talking about the foreach loop"}], "tags": [], "owner": {"reputation": 586, "user_id": 6149526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VCDnD.jpg?s=128&g=1", "display_name": "James Stewart", "link": "https://stackoverflow.com/users/6149526/james-stewart"}, "is_accepted": false, "score": 1, "last_activity_date": 1521039557, "creation_date": 1521039557, "answer_id": 49281025, "question_id": 49280841, "link": "https://stackoverflow.com/questions/49280841/how-do-i-loop-through-a-list-of-folders-and-grab-a-picture-file-in-ruby/49281025#49281025", "title": "how do I loop through a list of folders and grab a picture file in ruby", "body": "<p>If I understand you correctly, you want a list of each file if it's an image? </p>\n\n<p>If your images are all the same format, IE .jpg, you could use:</p>\n\n<pre><code>folder_results = Dir.foreach(\"your_folder_name\") {|x| File.extname(x) }\n\nfor file in folder_results\n    if (file === '.jpg')\n    # do something\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1521045293, "creation_date": 1521045293, "answer_id": 49283175, "question_id": 49280841, "link": "https://stackoverflow.com/questions/49280841/how-do-i-loop-through-a-list-of-folders-and-grab-a-picture-file-in-ruby/49283175#49283175", "title": "how do I loop through a list of folders and grab a picture file in ruby", "body": "<p>If you run following code from the base directory of your file structure, then it will list all files ending in \".jpg\" or \".png\".</p>\n\n<pre><code>Dir.glob(\"./**/*.{jpg,png}\").each do |file|\n  puts file\nend\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 3879676, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2f2f6a377d3e3e41c25817c263a66a58?s=128&d=identicon&r=PG&f=1", "display_name": "BobTheCat", "link": "https://stackoverflow.com/users/3879676/bobthecat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1521045293, "creation_date": 1521039093, "question_id": 49280841, "link": "https://stackoverflow.com/questions/49280841/how-do-i-loop-through-a-list-of-folders-and-grab-a-picture-file-in-ruby", "title": "how do I loop through a list of folders and grab a picture file in ruby", "body": "<p>I need ruby code where i can loop throught a list of folders and then loop through each image individually in that folder </p>\n\n<p><a href=\"https://i.stack.imgur.com/hJ0cU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hJ0cU.png\" alt=\"List of folders\"></a></p>\n\n<p>by grabing the pictures file and its name, </p>\n\n<p>I know Dir.foreach is great to get the folder names but how do I get the pictures</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1521039066, "post_id": 49280603, "comment_id": 85564214, "body": "<a href=\"http://rubyquicktips.com/post/603292403/accessing-a-hash-with-either-string-or-symbol-keys\" rel=\"nofollow noreferrer\">rubyquicktips.com/post/603292403/&hellip;</a>  <a href=\"https://apidock.com/rails/Hash/symbolize_keys\" rel=\"nofollow noreferrer\">apidock.com/rails/Hash/symbolize_keys</a>"}, {"owner": {"reputation": 10324, "user_id": 409617, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fQkEw.jpg?s=128&g=1", "display_name": "Mr. Black", "link": "https://stackoverflow.com/users/409617/mr-black"}, "edited": false, "score": 3, "creation_date": 1521039994, "post_id": 49280603, "comment_id": 85564939, "body": "It&#39;s so straightforward. <code>delete</code> method is perfect. As @simone, @Kris comments, It should work for you."}, {"owner": {"reputation": 10324, "user_id": 409617, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fQkEw.jpg?s=128&g=1", "display_name": "Mr. Black", "link": "https://stackoverflow.com/users/409617/mr-black"}, "edited": false, "score": 0, "creation_date": 1521040050, "post_id": 49280603, "comment_id": 85564984, "body": "Don&#39;t use the reserved keywords."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521045601, "post_id": 49280603, "comment_id": 85569134, "body": "is <code>data</code> a key? or do you mean to say <code>hashval = [{:id =&gt; 1, .... }]</code>?"}, {"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "edited": false, "score": 0, "creation_date": 1521045932, "post_id": 49280603, "comment_id": 85569336, "body": "When I print out the hash that&#39;s what it shows... it prefixes data in there. I didn&#39;t write the code but it comes from this:  hashval= { data:vehicles.map(&amp;:table_data) }"}, {"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521135540, "post_id": 49280603, "comment_id": 85614024, "body": "@MrYoshiji are you going to review this to see it is not a duplicate? The data is very different and I have tried everything in that link. I&#39;m guessing my issue is the data but don&#39;t know how to get around it."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521136225, "post_id": 49280603, "comment_id": 85614422, "body": "<code>hashval = { data: vehicles.map { |v| v.table_data.except(:color) } }</code> should fix your problem"}, {"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1521139970, "post_id": 49280603, "comment_id": 85616401, "body": "@MrYoshiji that was it!  very nice solution... thanks!!!!"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1521039602, "post_id": 49280699, "comment_id": 85564634, "body": "FYI <code>hash</code> is a method: <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-hash\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.4.0/Object.html#method-i-hash</a>"}, {"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "edited": false, "score": 0, "creation_date": 1521045108, "post_id": 49280699, "comment_id": 85568807, "body": "thanks... I have renamed it to hashval so that&#39;s not an issue. See my comment below to Simones answer... I updated my problem with actual dataset."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521045522, "post_id": 49280699, "comment_id": 85569078, "body": "also: <a href=\"https://stackoverflow.com/questions/2505824/how-hash-string-method-work\" title=\"how hash string method work\">stackoverflow.com/questions/2505824/how-hash-string-method-w&zwnj;&#8203;ork</a>"}], "tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 2, "last_activity_date": 1521039265, "last_edit_date": 1521039265, "creation_date": 1521038709, "answer_id": 49280699, "question_id": 49280603, "link": "https://stackoverflow.com/questions/49280603/ruby-delete-value-from-hash/49280699#49280699", "title": "Ruby - Delete value from Hash", "body": "<p>You keys are symbols so, <code>hash.delete(:color)</code> should work:</p>\n\n<pre><code>h = {:id=&gt;1, :make=&gt;\"Ford\", :model=&gt;\"Excursion\", :year=&gt;2018, :color=&gt;\"silver\", :vin=&gt;\"123456789F22\"}\n\nh.key?(:color) # =&gt; true\n\nh.delete(:color)\n\nh.key?(:color) # =&gt; false\n\nh # =&gt; {:id=&gt;1, :make=&gt;\"Ford\", :model=&gt;\"Excursion\", :year=&gt;2018, :vin=&gt;\"123456789F22\"}\n</code></pre>\n\n<p>Also <code>hash</code> might be a reserved word since if I open irb or console and type <code>hash</code> I get back an integer. I have no idea what it is, but it makes me think <code>hash</code> shouldn't be used as a var.</p>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "edited": false, "score": 0, "creation_date": 1521044981, "post_id": 49280707, "comment_id": 85568713, "body": "thanks... when I try my earlier example in IRB it works! I have since edited my problem to put the larger dataset. I cant paste that into IRB without getting errors. Maybe that&#39;s the problem... since the hash is multiple sets?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521045676, "post_id": 49280707, "comment_id": 85569190, "body": "You have pretty much asked a new question now."}, {"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "edited": false, "score": 1, "creation_date": 1521046206, "post_id": 49280707, "comment_id": 85569538, "body": "Sorry... I thought I was making the question easier by only putting a subset of the hash... turns out I was wrong!"}], "tags": [], "owner": {"reputation": 17289, "user_id": 801544, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/70034fa76ec3ada7dc95ecb8dc01f74f?s=128&d=identicon&r=PG", "display_name": "Simone", "link": "https://stackoverflow.com/users/801544/simone"}, "is_accepted": false, "score": 0, "last_activity_date": 1521038738, "creation_date": 1521038738, "answer_id": 49280707, "question_id": 49280603, "link": "https://stackoverflow.com/questions/49280603/ruby-delete-value-from-hash/49280707#49280707", "title": "Ruby - Delete value from Hash", "body": "<p><code>hash#delete</code> works if you use a symbol:</p>\n\n<pre><code>irb\nirb(main):001:0&gt; hash = {:id=&gt;1, :make=&gt;\"Ford\", :model=&gt;\"Excursion\", :year=&gt;2018, :color=&gt;\"silver\", :vin=&gt;\"123456789F22\"}\n=&gt; {:id=&gt;1, :make=&gt;\"Ford\", :model=&gt;\"Excursion\", :year=&gt;2018, :color=&gt;\"silver\", :vin=&gt;\"123456789F22\"}\nirb(main):002:0&gt; hash.delete(:color)\n=&gt; \"silver\"\nirb(main):003:0&gt; hash\n=&gt; {:id=&gt;1, :make=&gt;\"Ford\", :model=&gt;\"Excursion\", :year=&gt;2018, :vin=&gt;\"123456789F22\"}\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5922, "favorite_count": 0, "closed_date": 1521041602, "answer_count": 2, "score": 1, "last_activity_date": 1521201636, "creation_date": 1521038440, "last_edit_date": 1521201636, "question_id": 49280603, "link": "https://stackoverflow.com/questions/49280603/ruby-delete-value-from-hash", "closed_reason": "Duplicate", "title": "Ruby - Delete value from Hash", "body": "<p>I'm trying to delete an attribute and its value from a hash. Its seems simple based on answers I see on here but it doesn't appear to work for me. Curious if anyone has any thoughts as to why? Also... this is NOT a duplicate of the question that was linked. I have tried except and slice... neither of those work as well. I'm guessing my dataset it different.</p>\n\n<p>Here is an example hash I have:</p>\n\n<pre><code> {:data=&gt;[{:id=&gt;1, :make=&gt;\"Ford\", :model=&gt;\"Excursion\", :year=&gt;2018, :color=&gt;\"silver\", :vin=&gt;\"123456789F22\"},{=&gt;[{:id=&gt;2, :make=&gt;\"Mazda\", :model=&gt;\"RX7\", :year=&gt;1980, :color=&gt;\"blue\", :vin=&gt;\"123456789F22\"},{=&gt;[{:id=&gt;3, :make=&gt;\"Chevy\", :model=&gt;\"Dorado\", :year=&gt;2018, :color=&gt;\"white\", :vin=&gt;\"123456789F22\"}]}\n</code></pre>\n\n<p>I have tried the following:</p>\n\n<pre><code> hashval.delete(\"color\")\n hashval.except!(\"color\")\n hashval.each {|h| h.delete(\"color\")}  \n</code></pre>\n\n<p>I also tried :color in case the string format was wrong</p>\n\n<pre><code> hashval.delete(:color)\n hashval.except!(:color)\n hashval.each {|h| h.delete(:color)}  \n</code></pre>\n\n<p>but when I try to display the resulting hash</p>\n\n<pre><code> logger.info \"hash result: #{hashval}\"\n</code></pre>\n\n<p>I still see the original hash with the color still in there. Any thoughts on what I am doing wrong?</p>\n\n<p>Ok... more info!  If I do this:</p>\n\n<pre><code> hashval.delete(:data)\n</code></pre>\n\n<p>It does delete :data (and everything else after that). So it has something to do with the attributes in that hash array? </p>\n\n<p>As it turns out, the answer is:</p>\n\n<pre><code> hashval = { data: vehicles.map { |v| v.table_data.except(:color) } }\n</code></pre>\n\n<p>I guess this issue was marked closed as a duplicate (even though it wasn't) so I cant add the solution. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "brakeman"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1521045028, "post_id": 49280250, "comment_id": 85568750, "body": "Don&#39;t use the <code>&quot;#{x}&quot;</code> anti-pattern. Just use <code>x</code>."}, {"owner": {"reputation": 991, "user_id": 3667635, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/651a17344e675a5a4d2fb46a538b1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "gintoki27", "link": "https://stackoverflow.com/users/3667635/gintoki27"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1521045203, "post_id": 49280250, "comment_id": 85568884, "body": "@tadman i have tried but the same result :("}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1521045231, "post_id": 49280250, "comment_id": 85568905, "body": "That&#39;s just a bad habit you need to shake. The answer is posted below."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1521045194, "creation_date": 1521045194, "answer_id": 49283134, "question_id": 49280250, "link": "https://stackoverflow.com/questions/49280250/brakeman-generates-command-injection-warning-when-using-nokogiri-to-open-an-user/49283134#49283134", "title": "Brakeman generates Command Injection warning when using Nokogiri to open an user inputed url", "body": "<p>You're getting this warning because <code>open</code> can open a lot of things, URLs being just one of them. If someone sends in a \"url\" of <code>|rm -rf /</code> then you're in for a bad time because the leading <code>|</code> character indicates \"open using shell and get output\".</p>\n\n<p>This warning is serious. Pay attention to it and <strong>DO NOT</strong> send in arbitrary parameters to <code>open</code>. If you're looking to fetch just URLs, use an HTTP library like <a href=\"https://github.com/lostisland/faraday\" rel=\"nofollow noreferrer\">Faraday</a> to do that reliably and safely. <code>open-uri</code> is a quick and dirty hack that can get you into trouble.</p>\n"}], "owner": {"reputation": 991, "user_id": 3667635, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/651a17344e675a5a4d2fb46a538b1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "gintoki27", "link": "https://stackoverflow.com/users/3667635/gintoki27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521045194, "creation_date": 1521037548, "question_id": 49280250, "link": "https://stackoverflow.com/questions/49280250/brakeman-generates-command-injection-warning-when-using-nokogiri-to-open-an-user", "title": "Brakeman generates Command Injection warning when using Nokogiri to open an user inputed url", "body": "<p>I encountered a problem with my rails project.\nBrakeman gem generates Command Injection warning when using Nokogiri to open an user inputed url. This is my code</p>\n\n<pre><code>    require 'open-uri'\n    url = params[:url]\n    doc = Nokogiri::HTML(open(\"#{url}\", \"User-Agent\" =&gt; \"Ruby/#{request.user_agent}\"))\n</code></pre>\n\n<p>And this is brakeman's warning message</p>\n\n<blockquote>\n  <p>Possible command injection in open() near line 101: open(\"#{params[:url]}\", \"User-Agent\" => (\"Ruby/#{request.user_agent}\"))</p>\n</blockquote>\n\n<p>Does anyone know the solution that can fix brakeman's warning? Thank you!</p>\n"}, {"tags": ["ruby", "net-http"], "comments": [{"owner": {"reputation": 181, "user_id": 9838592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anand Bait", "link": "https://stackoverflow.com/users/9838592/anand-bait"}, "edited": false, "score": 0, "creation_date": 1600400029, "post_id": 49279645, "comment_id": 113082142, "body": "Did you get some solution? I am facing same issue."}], "owner": {"reputation": 1174, "user_id": 1438735, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/304d6cf1abce29ed9d38688f7975c690?s=128&d=identicon&r=PG", "display_name": "Ratatouille", "link": "https://stackoverflow.com/users/1438735/ratatouille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 960, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1521035785, "creation_date": 1521035785, "question_id": 49279645, "link": "https://stackoverflow.com/questions/49279645/errnoebadf-bad-file-descriptor-with-ruby-net-http", "title": "Errno::EBADF: Bad file descriptor with ruby net/http", "body": "<p>What can cause while making an HTTP connection to return <strong>EBADF (Bad file descriptor).</strong></p>\n\n<p>Here is my following code wherein the HTTP connection is made. Although the error is very less now(happening very less) but before I put those error on rescue I need to understand what is the reason for the <strong>EBADF</strong></p>\n\n<pre><code>def make_http_request(url, headers={})\n  uri = URI(url)\n  Net::HTTP.start(uri.host, uri.port) do |http|\n    req = Net::HTTP::Get.new(uri, headers)\n    resp = http.request(req)\n    if resp.code.to_i != 200\n      logger.error \"Retrieve #{resp.code} with #{url} and #{headers}\"\n      return false\n    end\n    return resp.body\n  end\nrescue SocketError, Net::ReadTimeout, Errno::ECONNREFUSED =&gt; e\n  logger.error \"make_http_request #{url} with #{headers} resulted in #{e.message} \\n #{e.backtrace}\"\n  return false\nend\n</code></pre>\n\n<p>I have a feeling that <code>connect syscall</code> is receiving an FD which ain't valid at that given point in time. But still unable to understand how can that happens.</p>\n\n<p>If it helps the code is used in an application that operates with multiple threads.</p>\n\n<p>In a nutshell, the definition of the above method looks like this...</p>\n\n<pre><code>module Eval\n  def make_http_request(url, headers={})\n    ...\n    ...\n    ..\n  end\n\n  def request_local_endpoint(url, headers)\n     response = make_http_request(url, headers)\n     response &amp;&amp; response.fetch('bravo',nil)\n  end\n\n  def request_external_endpoint(url, headers)\n    response = make_http_request(url, headers)\n    response &amp;&amp; response.fetch('token',nil)\n  end\nend\n\nclass RequestBuilder\n  include Eval\n  attr_reader :data\n  def initialize(data)\n    @data = data\n  end\n\n  def start\n    token = request_external_endpoint('http://external.com/endpoint1',{'Content-Type'.freeze =&gt; 'application/json', 'Authorization' =&gt; 'abcdef'})\n    return unless token\n\n    result = request_local_endpoint('http://internal.com/endpoint1',{'Content-Type'.freeze =&gt; 'application/json'})\n    return result\n  end\nend\n\n10.times { \n   Thread.new { RequestBuilder.new('sample data').start }\n}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1521036278, "post_id": 49279566, "comment_id": 85562229, "body": "What you did to get this error? What is the project you&#39;re working on? Rails/no-rails?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521039395, "post_id": 49279566, "comment_id": 85564455, "body": "First I&#39;d try deleting <code>Gemfile.lock</code> and doing <code>bundle install</code> just to be sure."}, {"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1521039962, "post_id": 49279566, "comment_id": 85564919, "body": "Deleting <code>Gemfile.lock</code> is a bad idea. Show us both <code>Gemfile</code> &amp; <code>Gemfile.lock</code> first."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521045963, "post_id": 49279566, "comment_id": 85569362, "body": "Why is deleting Gemfile.lock a bad idea?"}, {"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1521051142, "post_id": 49279566, "comment_id": 85572783, "body": "@Kris that would upgrade all gems that are not locked in the Gemfile. You generally want to do that with caution since blind upgrades to Gems may break other things."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521114749, "post_id": 49279566, "comment_id": 85599183, "body": "Gemfile.lock would get recreated anyway if you do <code>bundle update</code>. If Gemfile uses <code>~&gt;4.0</code> providing the gem authors use semver it should be fine, i.e. no breaking changes."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7551650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4bebe05674379d70986518418f95fa?s=128&d=identicon&r=PG", "display_name": "iSkaltes iSkalt", "link": "https://stackoverflow.com/users/7551650/iskaltes-iskalt"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521121141, "post_id": 49285733, "comment_id": 85603603, "body": "In case you&#39;re using bundler, yes. If you use the internal rubygems, you should be fine without it."}], "tags": [], "owner": {"reputation": 15, "user_id": 7551650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4bebe05674379d70986518418f95fa?s=128&d=identicon&r=PG", "display_name": "iSkaltes iSkalt", "link": "https://stackoverflow.com/users/7551650/iskaltes-iskalt"}, "is_accepted": false, "score": 0, "last_activity_date": 1521053803, "creation_date": 1521053803, "answer_id": 49285733, "question_id": 49279566, "link": "https://stackoverflow.com/questions/49279566/ruby-gem-conflicterror/49285733#49285733", "title": "Ruby Gem ConflictError", "body": "<p>This issue is caused by some gem requiring an older version of rake. If I'm not entirely mistaken, try running <code>gem update</code>. In my case, that has solved some issues.</p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2535, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521053803, "creation_date": 1521035584, "last_edit_date": 1521039222, "question_id": 49279566, "link": "https://stackoverflow.com/questions/49279566/ruby-gem-conflicterror", "title": "Ruby Gem ConflictError", "body": "<p>I receive this error:</p>\n\n<pre><code>Gem::ConflictError: Unable to activate standalone_migrations-4.0.5, because rake-12.3.0 conflicts with rake (~&gt; 10.0)\n</code></pre>\n\n<p>How I can fix this version conflict?</p>\n\n<pre><code>error stack:\nrake aborted!\nGem::ConflictError: Unable to activate standalone_migrations-4.0.5, because rake-12.3.0 conflicts with rake (~&gt; 10.0)\n/Users/Desktop/Genesis/gw_plugin/Rakefile:12:in `&lt;top (required)&gt;'\n/Users/.rvm/gems/ruby-2.2.2/gems/rake-12.3.0/exe/rake:27:in `&lt;top (required)&gt;'\n/Users/.rvm/gems/ruby-2.2.2/bin/ruby_executable_hooks:15:in `eval'\n/Users/.rvm/gems/ruby-2.2.2/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "sql-injection"], "comments": [{"owner": {"reputation": 808, "user_id": 6532640, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-8Uw3zcKUw5c/AAAAAAAAAAI/AAAAAAAAACE/yaXF1QrLkjM/photo.jpg?sz=128", "display_name": "NatNgs", "link": "https://stackoverflow.com/users/6532640/natngs"}, "edited": false, "score": 0, "creation_date": 1521034089, "post_id": 49278951, "comment_id": 85560476, "body": "(I don&#39;t know Ruby) Why not, just before composing the request with your input, replacing all occurrences of <code>&#39;</code> in the input by <code>&#39;&#39;</code> (2 simple quotes, to escape them); and others changes of that kind before executing the request"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 808, "user_id": 6532640, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-8Uw3zcKUw5c/AAAAAAAAAAI/AAAAAAAAACE/yaXF1QrLkjM/photo.jpg?sz=128", "display_name": "NatNgs", "link": "https://stackoverflow.com/users/6532640/natngs"}, "edited": false, "score": 1, "creation_date": 1521034627, "post_id": 49278951, "comment_id": 85560880, "body": "@NatNgs sanitizing SQL (or other input) is actually quite complex and your aproach potentially misses other attack vectors."}], "answers": [{"comments": [{"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1521035989, "post_id": 49279217, "comment_id": 85562006, "body": "Can you add a gist to prove that this works as expected?"}, {"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1521107325, "post_id": 49279217, "comment_id": 85594248, "body": "@siegy22 what do you mean exactly? Should I post some example SQL output?"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1521189281, "post_id": 49279217, "comment_id": 85633669, "body": "Yeah, just try to do an SQL injection"}, {"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1535550423, "post_id": 49279217, "comment_id": 91107979, "body": "@siegy22 Added examples with the resulting output."}], "tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 3, "last_activity_date": 1535550397, "last_edit_date": 1535550397, "creation_date": 1521034651, "answer_id": 49279217, "question_id": 49278951, "link": "https://stackoverflow.com/questions/49278951/dynamic-where-clause-in-active-record-avoiding-sql-injection/49279217#49279217", "title": "Dynamic where clause in active record avoiding sql injection", "body": "<pre><code>SomeObject.where(\n  \"#{SomeObject.connection.quote_column_name(property)} &gt; :value\", \n  value: value\n)\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Example 1 (trying to end the statement and inject a new one):</p>\n\n<pre><code>property = '; DROP TABLE users; --'\nUser.where(\"#{User.connection.quote_column_name(property)} &gt; :value\", value: 3)\n# =&gt; SELECT \"users\".* FROM \"users\" WHERE (\"; DROP TABLE users; --\" &gt; 3)\n</code></pre>\n\n<p>Example 2 (trying to end the column name quote):</p>\n\n<pre><code>property = '\"; DELETE FROM users;--'\nUser.where(\"#{User.connection.quote_column_name(property)} &gt; :value\", value: 3)\n# =&gt; SELECT \"users\".* FROM \"users\" WHERE (\"\"\"; DELETE FROM users;--\" &gt; 3)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1521035235, "post_id": 49279242, "comment_id": 85561416, "body": "- Error messages like &quot;Hey...don&#39;t do this&quot; aren&#39;t saying anything. - Why not give the method a good name, rather than &quot;do_something&quot;? - Eye candy: use <code>unless</code> instead of <code>if !</code> (that&#39;s probably preference)"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1521035436, "post_id": 49279242, "comment_id": 85561578, "body": "@siegy22: eye candy i don&#39;t like unless. I think it should not exist:-) I&#39;ll updated the response for the rest of your comments though it is difficult to give meaningful method names when the context is unknown..."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1521036015, "post_id": 49279242, "comment_id": 85562032, "body": "I agree that searchable columns should be a declaration although maintaining the congruence between the database and a frozen <code>Array</code> could become more cumbersome than it is worth. Also tisk tisk for liking ruby and hating <code>unless</code>. I find its readability far superior to &quot;I will do this if not you are true&quot;"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1521036890, "post_id": 49279242, "comment_id": 85562678, "body": "@engineersmnky I hear from a lot of german speaking Rubyists that they don&#39;t like <code>unless</code>...."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1521037697, "post_id": 49279242, "comment_id": 85563181, "body": "<i>Warum das?</i> I am going to have to assume that has something to do with the fact that <i>wenn nicht</i> (literally &quot;if not&quot;) is the common terminology for the english word unless"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1521038670, "post_id": 49279242, "comment_id": 85563887, "body": "Ich weiss es nicht. The only explanation I came up with is the same as you have: &quot;if not&quot; translates to &quot;wenn nicht&quot;/&quot;falls nicht&quot;.  Also I&#39;m coming (though this is a long time ago) from languages that do not know &quot;unless&quot;."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1521042285, "last_edit_date": 1521042285, "creation_date": 1521034749, "answer_id": 49279242, "question_id": 49278951, "link": "https://stackoverflow.com/questions/49278951/dynamic-where-clause-in-active-record-avoiding-sql-injection/49279242#49279242", "title": "Dynamic where clause in active record avoiding sql injection", "body": "<p>A simple but secure way would be to whitelist the allowed property names:</p>\n\n<pre><code>PROPERTIES = [\"foo\", \"bar\", \"baz\"].freeze\ndef find_greater_than(property, value)\n  raise \"'#{property}' is not a valid property, only #{PROPERTIES.join(\", \")} are allowed!\" if !PROPERTIES.include?(property)\n  SomeObject.where(\"#{property} &gt; ?\", value)\nend\n</code></pre>\n\n<p>You can (as @engineersmnky pointed out) dynamically check for available columns: </p>\n\n<pre><code>raise \"Some Message\" if SomeObject.column_names.include?(property)\n</code></pre>\n\n<p>but I don't like this aproach as having columns searchable should be a decission, not automated.</p>\n\n<p>Another aproach is to use the sanitizing provided by Rails. </p>\n\n<pre><code>def find_greater_than(property, value)\n  sanitized_property = ActiveRecord::Base.connection.quote_column_name(property)\n  SomeObject.where(\"#{sanitized_property} &gt; ?\", value)\nend\n</code></pre>\n\n<p>The quoting logic is implemented by the DB specific connection adapters.</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1521035559, "last_edit_date": 1521035559, "creation_date": 1521035152, "answer_id": 49279388, "question_id": 49278951, "link": "https://stackoverflow.com/questions/49278951/dynamic-where-clause-in-active-record-avoiding-sql-injection/49279388#49279388", "title": "Dynamic where clause in active record avoiding sql injection", "body": "<p>Not sure of your use case but <code>arel</code> can help you with this like so </p>\n\n<pre><code>some_object_table = SomeObject.arel_table\nSomeObject.where(some_object_table[property.intern].gt(value))\n</code></pre>\n\n<p>This will execute the query appropriately with all the escaping you have come to love with rails. </p>\n\n<p>This works because <code>arel</code> is the underlying query assembler used by rails so <code>ActiveRecord</code> where clauses can understand <code>Arel::Nodes</code> without issue (its actually how they are assembled to begin with)   </p>\n\n<p>Also given the dynamic nature you may want to check that <code>property</code> is a valid column to avoid SQL level errors something like </p>\n\n<pre><code>raise AgrumentError unless some_object_table.engine.columns.map {|c| c.name.intern}.include?(property.intern)\n# or \nraise AgrumentError unless SomeObject.column_names.map(&amp;:to_sym).include?(property.to_sym)\n</code></pre>\n"}], "owner": {"reputation": 494, "user_id": 992630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/132938e1f98b5e92547a901167e705d7?s=128&d=identicon&r=PG", "display_name": "Math", "link": "https://stackoverflow.com/users/992630/math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 49279242, "answer_count": 3, "score": 2, "last_activity_date": 1535550397, "creation_date": 1521033854, "question_id": 49278951, "link": "https://stackoverflow.com/questions/49278951/dynamic-where-clause-in-active-record-avoiding-sql-injection", "title": "Dynamic where clause in active record avoiding sql injection", "body": "<p>do you know how to build a dynamic query avoiding sql injection\n?</p>\n\n<pre><code>property = 'foo'\nvalue = 'bar'\nSomeObject.where(\"#{property} &gt; ?\", value)\n# works but permit sql inj\nSomeObject.where(\":property &gt; :value\", property: property, value: value)\n# create select * from some_object where 'foo' &gt; 'bar'\n# and the 'foo' I need without the quotes\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1521033773, "post_id": 49278581, "comment_id": 85560230, "body": "This however doesn&#39;t provide the new application params."}, {"owner": {"reputation": 485, "user_id": 1287376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1a295f7e8bccd5d8b9fdc0a3bf9a0b?s=128&d=identicon&r=PG", "display_name": "Matheus Santana", "link": "https://stackoverflow.com/users/1287376/matheus-santana"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1521034209, "post_id": 49278581, "comment_id": 85560561, "body": "Thanks @JohanWentholt. I&#39;ve updated the answer. What do you think?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1521035294, "post_id": 49278581, "comment_id": 85561463, "body": "I don&#39;t want to be the annoying one, but you&#39;ve added the step 3 params, but still left out step 2."}, {"owner": {"reputation": 2274, "user_id": 7390929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WPB1g.jpg?s=128&g=1", "display_name": "Lucas Andrade", "link": "https://stackoverflow.com/users/7390929/lucas-andrade"}, "edited": false, "score": 0, "creation_date": 1521035880, "post_id": 49278581, "comment_id": 85561933, "body": "@MatheusSantana this works for step 1 but I can&#39;t make it work for step 2 and 3. Code of step 2: <code>post :create, application: application_params { \t\t\t\tmotivation: &quot;Motivation&quot;, \t\t\t\tbackground: &quot;Background&quot;, \t\t\t\tteam_work_experience: &quot;Team Work Experience&quot; }, \t\t\t\tstep: &quot;2&quot;, steps: &quot;3&quot;</code>"}, {"owner": {"reputation": 485, "user_id": 1287376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1a295f7e8bccd5d8b9fdc0a3bf9a0b?s=128&d=identicon&r=PG", "display_name": "Matheus Santana", "link": "https://stackoverflow.com/users/1287376/matheus-santana"}, "reply_to_user": {"reputation": 2274, "user_id": 7390929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WPB1g.jpg?s=128&g=1", "display_name": "Lucas Andrade", "link": "https://stackoverflow.com/users/7390929/lucas-andrade"}, "edited": false, "score": 0, "creation_date": 1521036325, "post_id": 49278581, "comment_id": 85562258, "body": "@LucasAndrade @JohanWentholt I&#39;m sorry, I hadn&#39;t noticed the differing params for these steps. I&#39;ve updated the answer (but the main idea remains the same: using <code>let</code>s). Does it work now?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1521039649, "post_id": 49278581, "comment_id": 85564664, "body": "@MatheusSantana I deleted my answer since it doesn&#39;t add anything anymore. Your answer seems pretty solid now. (Y)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1521039888, "post_id": 49278581, "comment_id": 85564862, "body": "One last thing to keep in mind by having the merge with the previous params at the end, is that it overwrites the hash you&#39;re creating. This means if you have two conflicting keys the value of the previous params is chosen. If you don&#39;t want this behavior you have to change the order and call <i>#merge</i> on the previous params, supplying the new additions."}], "tags": [], "owner": {"reputation": 485, "user_id": 1287376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1a295f7e8bccd5d8b9fdc0a3bf9a0b?s=128&d=identicon&r=PG", "display_name": "Matheus Santana", "link": "https://stackoverflow.com/users/1287376/matheus-santana"}, "is_accepted": true, "score": 2, "last_activity_date": 1521036732, "last_edit_date": 1521036732, "creation_date": 1521032812, "answer_id": 49278581, "question_id": 49278298, "link": "https://stackoverflow.com/questions/49278298/rspec-how-to-create-an-method-to-dry-only-some-params-of-a-request/49278581#49278581", "title": "Rspec how to create an method to &quot;DRY&quot; only some params of a request?", "body": "<p><code>let</code> blocks allow you to define variables for using within the tests cases (<code>it</code>s). Some key points to be aware of:</p>\n\n<ul>\n<li>They are lazily evaluated: code within the block is not run until you call the variable (unless you use a bang -- <code>let!</code> -- which forces the evaluation)</li>\n<li>They might be overridden within inner <code>context</code>s</li>\n</ul>\n\n<p>Head to <a href=\"https://relishapp.com/rspec/rspec-core/v/3-7/docs/helper-methods/let-and-let\" rel=\"nofollow noreferrer\">RSpec docs</a> to know more about them.</p>\n\n<hr>\n\n<p>The code you provided could make use of <code>let</code>s just like this:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Api::MenteeApplicationsController, type: :controller do\n    describe \"Api Mentee Application controller tests\" do\n        let(:edition) { create(:edition) }\n        let(:first_step_params) do\n          {\n            first_name: 'Mentee',\n            last_name: 'Rspec',\n            #...\n            previous_programming_experience: false,\n          }\n        end\n        let(:second_step_params) do\n          {\n            motivation: \"Motivation\",\n            background: \"Background\",\n            team_work_experience: \"Team Work Experience\",\n          }.merge(first_step_params)\n        end\n        let(:third_step_params) do\n          {\n            operating_system: \"mac_os\",\n            project_proposal: \"Project Proposal\",\n            roadmap: \"Roadmap\",\n            time_availability: 3,\n            engagements: [\"master_student\", \"part_time\", \"volunteer\", \"one_project\"],\n          }.merge(third_step_params)\n        end\n\n        it 'should start create a Mentee Application, step 1' do\n            edition                                                          \n\n            post :create, application: first_step_params, step: \"1\", steps: \"3\"\n\n            expect(response).to have_http_status(200)                        \n        end                                                                  \n\n        it 'should continue to create a Mentee Application, step 2' do       \n            post :create, application: second_step_params, step: \"2\", steps: \"3\"\n\n            expect(response).to have_http_status(200)                        \n        end\n\n        it 'should not create a Mentee Application in api format' do\n            applications = MenteeApplication.count\n\n            post :create, application: third_step_params, step: \"3\", steps: \"3\"\n\n            expect(response).to have_http_status(:unprocessable_entity)\n            expect(MenteeApplication.count).to be(0)\n        end\n    end\nend\n</code></pre>\n\n<h2>Additional suggestions</h2>\n\n<h3>1. Do not implement controller specs</h3>\n\n<p>Controllers are meant to be a thin software layer between the user interface and background services. Their tests can hardly be acknowledged as integration (end-to-end) nor unit tests.</p>\n\n<p>I'd suggest you to implement feature specs instead. (<a href=\"https://github.com/teamcapybara/capybara/#using-capybara-with-rspec\" rel=\"nofollow noreferrer\">capybara</a> is a great match for Rails testing with RSpec)</p>\n\n<p>This <a href=\"https://medium.com/table-xi/whats-up-with-rails-controller-tests-f0ece1fdd9f0\" rel=\"nofollow noreferrer\">blog post</a> might provide more insights on this.</p>\n\n<h3>2. Do not use should in your test cases descriptions</h3>\n\n<p>See <a href=\"http://www.betterspecs.org/#should\" rel=\"nofollow noreferrer\">betterspecs.org</a>.</p>\n\n<h3>3. Mind the last trailing comma in</h3>\n\n<pre><code>let(:application_params) do                                                      \n  {                                                                  \n    first_name: 'Mentee',                                            \n    last_name: 'Rspec',                                              \n    #...                          \n    previous_programming_experience: false,\n  }                                                                  \nend\n</code></pre>\n\n<p>It prevents <a href=\"https://www.rubytapas.com/2012/11/16/episode-024-incidental-change/\" rel=\"nofollow noreferrer\">incidental changes</a>.</p>\n\n<h3>4. Use a .rspec file</h3>\n\n<p>With contents such as</p>\n\n<pre><code>--require rails_helper\n</code></pre>\n\n<p>So you don't need <code>require 'rails_helper'</code> on top of each spec file.</p>\n\n<h3>5. Use <code>context</code>s</h3>\n\n<p>This is also a guidance from betterspecs.org. You could do something like</p>\n\n<pre><code>RSpec.describe Api::MenteeApplicationsController, type: :controller do\n    describe \"Api Mentee Application controller tests\" do\n        let(:edition) { create(:edition) }\n        let(:application_params) do\n          {\n            #...\n          }\n        end\n        let(:step) { 1 }\n\n        it 'should start create a Mentee Application' do\n            edition\n\n            post :create, application: application_params, step: step, steps: \"3\"\n\n            expect(response).to have_http_status(200)\n        end\n\n        context 'in second step' do\n          let(:step) { 2 }\n\n          it 'should continue to create a Mentee Application' do\n              post :create, application: application_params, step: step, steps: \"3\"\n\n              expect(response).to have_http_status(200)\n          end\n        end\n    end\nend\n</code></pre>\n\n<p><code>context</code>s might also be handy for handling additional params:</p>\n\n<pre><code>RSpec.describe Api::MenteeApplicationsController, type: :controller do\n  describe \"Api Mentee Application controller tests\" do\n    let(:edition) { create(:edition) }\n    let(:application_params) do\n      common_params.merge(additional_params)\n    end\n    let(:commom_params) do\n      {\n        #...\n      }\n    end\n    let(:additional_params) { {} }\n\n    it 'creates an application' do\n      post :create, application: application_params\n    end\n\n    context 'with API params' do\n      let(:additional_params) do\n        {\n          #...\n        }\n      end\n\n      it 'creates an application' do\n        post :create, application: application_params\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Note that the <code>post</code> method call became exactly the same in both contexts. This would allow for reusing it (in a <code>before</code> block or even another <code>let</code> block).</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1521035418, "post_id": 49279008, "comment_id": 85561561, "body": "Why use <code>arr1.dup.concat(arr2)</code> over <code>arr1 + arr2</code>? Or did you not know about the <code>+</code> method on arrays?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1521036083, "post_id": 49279008, "comment_id": 85562079, "body": "Oh, wow! There&#39;s a <code>+</code> method on arrays?!? BTW, <code>concat</code> and <code>+</code> are not the same. <a href=\"https://stackoverflow.com/questions/1801516/how-do-you-add-an-array-to-another-array-in-ruby-and-not-end-up-with-a-multi-dim\">Here&#39;s</a> one Q&amp;A on the topic, although there are a lot of them out there. In this particular instance, the OP could probably go either way without great consequence."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1521036200, "last_edit_date": 1521036200, "creation_date": 1521034033, "answer_id": 49279008, "question_id": 49278298, "link": "https://stackoverflow.com/questions/49278298/rspec-how-to-create-an-method-to-dry-only-some-params-of-a-request/49279008#49279008", "title": "Rspec how to create an method to &quot;DRY&quot; only some params of a request?", "body": "<p>I think I would be tempted to do it something like below. Essentially:</p>\n\n<ol>\n<li><p>Create a memoized variable called <code>@full_application</code> and wrap it in a method (I've done this at the bottom of the test).</p></li>\n<li><p>Create constants stipulating the subsets of the values that you want for each test, such as <code>STEP_ONE_PARAMS</code>, <code>STEP_TWO_PARAMS</code>, etc.</p></li>\n<li><p>In each <code>it</code> block, use <code>.slice</code> and the constants defined above to \"grab\" the values from <code>full_application</code> that you want to use.</p></li>\n</ol>\n\n<p>Something  like this: </p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Api::MenteeApplicationsController, type: :controller do\n\n  STEP_ONE_PARAMS = %w(\n    first_name\n    last_name\n    email\n    gender\n    country\n    communicating_in_english\n    send_to_mentor_confirmed\n    time_availability\n    previous_programming_experience\n  ).freeze\n\n  STEP_TWO_PARAMS = STEP_ONE_PARAMS.dup.concat(%w(\n    motivation\n    background\n    team_work_experience\n  )).freeze\n\n  STEP_THREE_PARAMS = STEP_TWO_PARAMS.dup.concat(%w(\n    operating_system\n    project_proposal\n    roadmap\n    engagements\n  )).freeze\n\n    describe \"Api Mentee Application controller tests\" do\n        let(:edition) { create(:edition) }\n\n        it 'should start create a Mentee Application, step 1' do\n            edition\n            post :create, application: full_application.slice(*STEP_ONE_PARAMS),\n                step: \"1\", steps: \"3\"\n\n            expect(response).to have_http_status(200)\n        end\n\n        it 'should continue to create a Mentee Application, step 2' do\n            post :create, application: full_application.slice(*STEP_TWO_PARAMS),\n                step: \"2\", steps: \"3\"\n\n            expect(response).to have_http_status(200)\n        end\n\n        it 'should not create a Mentee Application in api format' do\n            applications = MenteeApplication.count\n            post :create, application: full_application.slice(*STEP_THREE_PARAMS),\n            step: \"3\", steps: \"3\"\n\n            expect(response).to have_http_status(:unprocessable_entity)\n            expect(MenteeApplication.count).to be(0)\n        end\n\n        it 'should create a Mentee Application in api format (step 3)' do\n            applications = MenteeApplication.count\n            post :create, application: full_application,\n            step: \"3\", steps: \"3\"\n\n            expect(response).to have_http_status(200)\n            expect(MenteeApplication.count).to be(applications+1)\n            expect(flash[:notice]).to eq(\"Thank you for your application!\")\n        end\n\n    end\nend\n\n\ndef full_application\n  @full_application ||= {\n    first_name:                       \"Mentee\", \n    last_name:                        \"Rspec\", \n    email:                            \"mentee@email.com\",\n    gender:                           \"female\", \n    country:                          \"IN\", \n    program_country:                  \"IN\",\n    time_zone:                        \"5 - Mumbai\", \n    communicating_in_english:         \"true\",\n    send_to_mentor_confirmed:         \"true\",\n    motivation:                       \"Motivation\",\n    background:                       \"Background\",\n    programming_language:             \"ruby\",\n    team_work_experience:             \"Team Work Experience\",\n    previous_programming_experience:  \"false\", \n    experience:                       \"\",\n    operating_system:                 \"mac_os\",\n    project_proposal:                 \"Project Proposal\",\n    roadmap:                          \"Roadmap\",\n    time_availability:                3,\n    engagements: [\n      \"master_student\", \n      \"part_time\", \n      \"volunteer\", \n      \"one_project\"\n    ] \n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 2274, "user_id": 7390929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WPB1g.jpg?s=128&g=1", "display_name": "Lucas Andrade", "link": "https://stackoverflow.com/users/7390929/lucas-andrade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 49278581, "answer_count": 2, "score": 1, "last_activity_date": 1521039280, "creation_date": 1521032039, "question_id": 49278298, "link": "https://stackoverflow.com/questions/49278298/rspec-how-to-create-an-method-to-dry-only-some-params-of-a-request", "title": "Rspec how to create an method to &quot;DRY&quot; only some params of a request?", "body": "<p>I want to test a create method of my project, but this create method has 3 steps in my form and I want to test all of them. To test each step I need to send a create request with their respective params of the step. </p>\n\n<p>The problem is: I am repeating many params in each step, I want to know how can I put the common params in a method and then just call it.</p>\n\n<p>Here is my rspec file</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Api::MenteeApplicationsController, type: :controller do\n    describe \"Api Mentee Application controller tests\" do\n        let(:edition) { create(:edition) }\n\n        it 'should start create a Mentee Application, step 1' do\n            edition\n            post :create, application: {\n                first_name: \"Mentee\", last_name: \"Rspec\", email: \"mentee@email.com\",\n                gender: \"female\", country: \"IN\", program_country: \"IN\",\n                time_zone: \"5 - Mumbai\", communicating_in_english: \"true\",\n                send_to_mentor_confirmed: \"true\",\n                time_availability: 3,\n                previous_programming_experience: \"false\" },\n                step: \"1\", steps: \"3\"\n\n            expect(response).to have_http_status(200)\n        end\n\n        it 'should continue to create a Mentee Application, step 2' do\n            post :create, application: {\n                first_name: \"Mentee\", last_name: \"Rspec\", email: \"mentee@email.com\",\n                gender: \"female\", country: \"IN\", program_country: \"IN\",\n                time_zone: \"5 - Mumbai\", communicating_in_english: \"true\",\n                send_to_mentor_confirmed: \"true\",\n                time_availability: 3,\n                motivation: \"Motivation\",\n                background: \"Background\",\n                team_work_experience: \"Team Work Experience\",\n                previous_programming_experience: \"false\" },\n                step: \"2\", steps: \"3\"\n\n            expect(response).to have_http_status(200)\n        end\n\n        it 'should not create a Mentee Application in api format' do\n            applications = MenteeApplication.count\n            post :create, application: {\n                first_name: \"Mentee\", last_name: \"Rspec\", email: \"mentee@email.com\",\n                gender: \"female\", country: \"IN\", program_country: \"IN\",\n                time_zone: \"5 - Mumbai\", communicating_in_english: \"true\",\n                send_to_mentor_confirmed: \"true\",\n                motivation: \"Motivation\",\n                background: \"Background\",\n                team_work_experience: \"Team Work Experience\",\n                previous_programming_experience: \"false\", experience: \"\",\n                operating_system: \"mac_os\",\n                project_proposal: \"Project Proposal\",\n                roadmap: \"Roadmap\",\n                time_availability: 3,\n                engagements: [\"master_student\", \"part_time\", \"volunteer\", \"one_project\"] },\n            step: \"3\", steps: \"3\"\n\n            expect(response).to have_http_status(:unprocessable_entity)\n            expect(MenteeApplication.count).to be(0)\n        end\n\n        it 'should create a Mentee Application in api format (step 3)' do\n            applications = MenteeApplication.count\n            post :create, application: {\n                first_name: \"Mentee\", last_name: \"Rspec\", email: \"mentee@email.com\",\n                gender: \"female\", country: \"IN\", program_country: \"IN\",\n                time_zone: \"5 - Mumbai\", communicating_in_english: \"true\",\n                send_to_mentor_confirmed: \"true\",\n                motivation: \"Motivation\",\n                background: \"Background\",\n                programming_language: \"ruby\",\n                team_work_experience: \"Team Work Experience\",\n                previous_programming_experience: \"false\", experience: \"\",\n                operating_system: \"mac_os\",\n                project_proposal: \"Project Proposal\",\n                roadmap: \"Roadmap\",\n                time_availability: 3,\n                engagements: [\"master_student\", \"part_time\", \"volunteer\", \"one_project\"] },\n            step: \"3\", steps: \"3\"\n\n            expect(response).to have_http_status(200)\n            expect(MenteeApplication.count).to be(applications+1)\n            expect(flash[:notice]).to eq(\"Thank you for your application!\")\n        end\n\n    end\nend\n</code></pre>\n\n<p>As you can see, the params in step 1 are used in steps 2 and 3, so I was thinking in something like this:</p>\n\n<pre><code>def some_params\n    params.require(:application).permit(first_name: \"Mentee\", last_name: \"Rspec\", email: \"mentee@email.com\",\n            gender: \"female\", country: \"IN\", program_country: \"IN\",\n            time_zone: \"5 - Mumbai\", communicating_in_english: \"true\",\n            send_to_mentor_confirmed: \"true\",\n            time_availability: 3,\n            previous_programming_experience: \"false\")\nend\n</code></pre>\n\n<p>But didn't work, how can I do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "edited": false, "score": 0, "creation_date": 1521034436, "post_id": 49278013, "comment_id": 85560738, "body": "so to use the existing script I should move to <code>1.9</code> ?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "edited": false, "score": 0, "creation_date": 1521034591, "post_id": 49278013, "comment_id": 85560858, "body": "Yes, for that syntax you need at least ruby 1.9. Is that script a gem, just a file you have or what?"}, {"owner": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "edited": false, "score": 0, "creation_date": 1521035532, "post_id": 49278013, "comment_id": 85561656, "body": "Its just a .rb file"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "edited": false, "score": 0, "creation_date": 1521035681, "post_id": 49278013, "comment_id": 85561760, "body": "You can either use ruby 1.9 or fix that file to the old syntax. But other changes could be needed."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "edited": false, "score": 0, "creation_date": 1521059289, "post_id": 49278013, "comment_id": 85577230, "body": "@aaj if changing ruby versions is an option you should do it even 1.9 has been out of support for quite some time"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1521031100, "creation_date": 1521031100, "answer_id": 49278013, "question_id": 49277982, "link": "https://stackoverflow.com/questions/49277982/syntax-errors-with-parsing-csv-file-with-headers/49278013#49278013", "title": "Syntax errors with parsing CSV file with headers", "body": "<p>Move from</p>\n\n<pre><code>CSV.foreach(tscm_hosts_file, headers: tscm_hosts_file_col_headers)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>CSV.foreach(tscm_hosts_file, :headers =&gt; tscm_hosts_file_col_headers)\n</code></pre>\n\n<p>The new hash syntax for symbols has been introduced in Ruby 1.9</p>\n"}], "owner": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 49278013, "answer_count": 1, "score": 0, "last_activity_date": 1521031100, "creation_date": 1521031012, "question_id": 49277982, "link": "https://stackoverflow.com/questions/49277982/syntax-errors-with-parsing-csv-file-with-headers", "title": "Syntax errors with parsing CSV file with headers", "body": "<p>I am using <code>ruby 1.8.7 (2013-06-27 patchlevel 374) [x86_64-linux]</code> where I am trying to test a script. The following does not work as expected</p>\n\n<pre><code>CSV.foreach(tscm_hosts_file, headers: tscm_hosts_file_col_headers) do |row|\n  catch :bad_data do\n    tscm_hosts_file_col_headers.each do |header|\n      throw :bad_data if row[header].nil?\n    end\n.\n.....\n</code></pre>\n\n<p>And error received is </p>\n\n<pre><code>[root@fmsprdchef001 ~]# ./generate_autoreg_output.rb\n./generate_autoreg_output.rb:75: syntax error, unexpected ':', expecting ')'\n...each(tscm_hosts_file, headers: tscm_hosts_file_col_headers) ...\n</code></pre>\n\n<p>I think this is the because of the ruby version I am using. Can someone tell which RUby version supports this syntax?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521028300, "post_id": 49276706, "comment_id": 85556397, "body": "Not sure if this is intended but <code>Arr</code> is a constant. If you wanted to have a local variable, it should be <code>arr</code> (lowercase)."}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521027434, "post_id": 49276739, "comment_id": 85555844, "body": "Why the <code>!</code>?, the empty parenthesis?"}, {"owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1521028116, "post_id": 49276739, "comment_id": 85556284, "body": "@SebastianPalma: Please see my explanation in the updated answer."}], "tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": false, "score": 2, "last_activity_date": 1521029657, "last_edit_date": 1521029657, "creation_date": 1521027266, "answer_id": 49276739, "question_id": 49276706, "link": "https://stackoverflow.com/questions/49276706/how-to-remove-spaces-from-array-using-ruby/49276739#49276739", "title": "How to remove spaces from array using Ruby", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-map-21\" rel=\"nofollow noreferrer\">Array#map!</a> or <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">Array.map</a>. <code>Array#map!</code> changes the original array and <code>Array#map</code> returns a new array so the original array keeps unchanged. The <code>map</code> functions iterate about the array and execute the given block for each element in the array.</p>\n\n<pre><code>arr = [\"abcd\", \"1223\", \" 10829380\", \"pqrs\"]\narr.map!{ |el| el.strip }\narr\n# =&gt; [\"abcd\", \"1223\", \"10829380\", \"pqrs\"]\n\n# or\n\narr = [\"abcd\", \"1223\", \" 10829380\", \"pqrs\"]\narr.map{ |el| el.strip }\n# =&gt; [\"abcd\", \"1223\", \"10829380\", \"pqrs\"]\narr\n# =&gt; [\"abcd\", \"1223\", \" 10829380\", \"pqrs\"]\n</code></pre>\n\n<p>Btw: Variables in ruby begin with a lowercase letter or _ (<code>arr</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1521030173, "post_id": 49276926, "comment_id": 85557698, "body": "I didn&#39;t downvote, but <code>arr.map { |item| item.strip }</code>does not work because the result is discarded. <code>arr.map!{ |item| item.strip }</code> does work."}, {"owner": {"reputation": 1237, "user_id": 798577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5394742dbcfc5393c52683b4fa98bb88?s=128&d=identicon&r=PG", "display_name": "b73", "link": "https://stackoverflow.com/users/798577/b73"}, "edited": false, "score": 0, "creation_date": 1521031262, "post_id": 49276926, "comment_id": 85558482, "body": "The difference here is that <code>map</code> is non-destructive, whereas <code>map!</code> modifies in place - mutating the variable. The proposed solution by @pascalbetz is imo the best solution. You just need to bind the return value to a variable e.g. <code>arr = arr.map(&amp;:strip)</code>. In this case we are re-binding <code>arr</code> to the return value of calling <code>map</code> on <code>arr</code>."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1521034204, "post_id": 49276926, "comment_id": 85560558, "body": "@steenslag thanks for the hint. I improved my answer."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 3, "last_activity_date": 1521034524, "last_edit_date": 1521034524, "creation_date": 1521027784, "answer_id": 49276926, "question_id": 49276706, "link": "https://stackoverflow.com/questions/49276706/how-to-remove-spaces-from-array-using-ruby/49276926#49276926", "title": "How to remove spaces from array using Ruby", "body": "<p>You should follow naming patterns and not use <code>Arr</code> as this usually is used \nfor class names.</p>\n\n<pre><code>arr = [\"abcd\",\"1223\",\" 10829380\",\"pqrs\"]\nwhitespace_removed_arr = arr.map { |item| item.strip }\n</code></pre>\n\n<p><code>map</code> iterates the array of strings (<code>arr</code>) and builds a new array containing the return values of the block.</p>\n\n<p>You can use the shorter version if you like:</p>\n\n<pre><code>arr = [\"abcd\",\"1223\",\" 10829380\",\"pqrs\"]\nwhitespace_removed_arr = arr.map(&amp;:strip)\n</code></pre>\n\n<p>Please note that the solutions proposing <code>strip!</code> and <code>map</code> (inplace version iof <code>strip</code>) will most likely not work or work in a confusing way since <code>strip!</code> (oddly enough) returns <code>nil</code> when the string was not changed.</p>\n\n<pre><code>\"\".strip =&gt; \"\"\n\"\".strip! =&gt; nil\n\"\".strip =&gt; \"\"\n\" \".strip! =&gt; \"\"\n</code></pre>\n\n<p>If you want to use the inplace variant of strip and modify the original array you will need to use <code>each</code></p>\n\n<pre><code>arr.each(&amp;:strip!)\n</code></pre>\n\n<p><code>each</code> discards the return value from the block, and <code>strip!</code> modifies the string in place.</p>\n"}], "owner": {"reputation": 1, "user_id": 9442259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913b60c654bfd7cc37e83b3faf54f04d?s=128&d=identicon&r=PG&f=1", "display_name": "surabhi8960", "link": "https://stackoverflow.com/users/9442259/surabhi8960"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1521044946, "creation_date": 1521027169, "last_edit_date": 1521028098, "question_id": 49276706, "link": "https://stackoverflow.com/questions/49276706/how-to-remove-spaces-from-array-using-ruby", "title": "How to remove spaces from array using Ruby", "body": "<pre><code>Arr= [\"abcd\",\"1223\",\"  10829380\",\"pqrs\"]\n</code></pre>\n\n<p>I want to print array like this-</p>\n\n<pre><code>Arr=[\"abcd\",\"1223\",\"10829380\",\"pqrs\"]\n</code></pre>\n"}, {"tags": ["ruby", "initialization", "block"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1521023033, "post_id": 49274907, "comment_id": 85552729, "body": "Use <code>self.first_name=</code>. It will use the accessor. <code>first_name = </code> sets a local variable with that name."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1521023370, "post_id": 49274907, "comment_id": 85552985, "body": "Thank you for clarifying that point for me."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "edited": false, "score": 0, "creation_date": 1521022957, "post_id": 49275142, "comment_id": 85552670, "body": "Thank you, but I was hoping to do this without the block parameter."}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1521023031, "post_id": 49275142, "comment_id": 85552724, "body": "You will have to pass argument to the block to get it executed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "edited": false, "score": 0, "creation_date": 1521023216, "post_id": 49275142, "comment_id": 85552860, "body": "The block is being executed.  I know this because - although it is not included in the above example - when I remove the accessor, I get a method missing error when the block is executed."}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1521023666, "post_id": 49275142, "comment_id": 85553197, "body": "Check this: <a href=\"https://stackoverflow.com/questions/34065817/initialize-an-object-with-a-block\" title=\"initialize an object with a block\">stackoverflow.com/questions/34065817/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 0, "last_activity_date": 1521022845, "creation_date": 1521022845, "answer_id": 49275142, "question_id": 49274907, "link": "https://stackoverflow.com/questions/49274907/ruby-object-initialization-using-instance-eval/49275142#49275142", "title": "Ruby object initialization using instance_eval", "body": "<p>Try this:</p>\n\n<pre><code>person = Person.new do |obj|\n  obj.first_name = \"Adam\"\nend\n\nputs person.first_name\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "edited": false, "score": 0, "creation_date": 1521023125, "post_id": 49275198, "comment_id": 85552789, "body": "Please don&#39;t tell me what to experiment on. I  am providing a simple example so that the issue isn&#39;t hard to see.  That is, I want to call accessors from an initialization block.  Can you tell me how to do this or not?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1521023301, "post_id": 49275198, "comment_id": 85552923, "body": "I did explain it in the original version of the answer, but since you did not seem to understand the explanation, I put the exact code for your case as well."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "edited": false, "score": 0, "creation_date": 1521023330, "post_id": 49275198, "comment_id": 85552955, "body": "Thank you.  Your edit was made after my comment.  Check the timestamps."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1521023219, "last_edit_date": 1521023219, "creation_date": 1521023035, "answer_id": 49275198, "question_id": 49274907, "link": "https://stackoverflow.com/questions/49274907/ruby-object-initialization-using-instance-eval/49275198#49275198", "title": "Ruby object initialization using instance_eval", "body": "<p>Ruby setters cannot be called without an explicit receiver since local variables take a precedence over method calls.</p>\n\n<p>You don\u2019t need to experiment with such an overcomplicated example, the below won\u2019t work as well:</p>\n\n<pre><code>class Person\n  attr_accessor :name\n  def set_name(new_name)\n    name = new_name\n  end\nend\n</code></pre>\n\n<p>only this will:</p>\n\n<pre><code>class Person\n  attr_accessor :name\n  def set_name(new_name)\n    # name = new_name does not call `#name=`\n    self.name = new_name\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>For your example, you must explicitly call the method on a receiver:</p>\n\n<pre><code>person = Person.new do\n  self.first_name = \"Adam\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1521024358, "creation_date": 1521024358, "answer_id": 49275673, "question_id": 49274907, "link": "https://stackoverflow.com/questions/49274907/ruby-object-initialization-using-instance-eval/49275673#49275673", "title": "Ruby object initialization using instance_eval", "body": "<p>If the code is run with warnings enabled (that is <code>ruby -w yourprogram.rb</code>)\nit responds with : \"warning: assigned but unused variable - first_name\", with a line-number pointing to <code>first_name = \"Adam\"</code>. So Ruby interprets <code>first_name</code> as a variable, not as a method. As others have said, use an explicit reciever: <code>self.first_name</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "edited": false, "score": 0, "creation_date": 1521026588, "post_id": 49275840, "comment_id": 85555265, "body": "Thank you, but I understand that it instance_eval undermines encapsulation: that is not at issue here."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521026767, "post_id": 49275840, "comment_id": 85555381, "body": "@Adam I see, I thought you meant <i>&quot;I don&#39;t want the block to be able to set the attributes directly&quot;</i>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "edited": false, "score": 0, "creation_date": 1521027456, "post_id": 49275840, "comment_id": 85555868, "body": "I can see why you thought that.  I&#39;m following my way through the book &quot;Mastering Ruby Closures&quot; and one of the examples uses blocks that invoke accessors instead of attributes.  Turns out, the author forgot to put in the &quot;self&quot; references, hence my confusion.  He does mention it in the errata, which I happened upon after reading the answer given by mudasobwa!"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1521025166, "last_edit_date": 1521025166, "creation_date": 1521024826, "answer_id": 49275840, "question_id": 49274907, "link": "https://stackoverflow.com/questions/49274907/ruby-object-initialization-using-instance-eval/49275840#49275840", "title": "Ruby object initialization using instance_eval", "body": "<blockquote>\n  <p>I want to use the attr_accessor in the initialization block, and not the attributes directly</p>\n</blockquote>\n\n<p><code>instance_eval</code> undermines encapsulation. It gives the block access to instance variables and private methods.</p>\n\n<p>Consider passing the person instance into the block instead:</p>\n\n<pre><code>class Person\n  attr_accessor :first_name\n\n  def initialize\n    yield(self) if block_given?\n  end\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>adam = Person.new do |p|\n  p.first_name = 'Adam'\nend\n#=&gt; #&lt;Person:0x00007fb46d093bb0 @first_name=\"Adam\"&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3887150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 49275198, "answer_count": 4, "score": 0, "last_activity_date": 1521025166, "creation_date": 1521022227, "question_id": 49274907, "link": "https://stackoverflow.com/questions/49274907/ruby-object-initialization-using-instance-eval", "title": "Ruby object initialization using instance_eval", "body": "<p>Consider the following class:</p>\n\n<pre><code>class Person\n    attr_accessor :first_name\n\n    def initialize(&amp;block)\n        instance_eval(&amp;block) if block_given?\n    end\nend\n</code></pre>\n\n<p>When I create an instance of Person as follows:</p>\n\n<pre><code>person = Person.new do\n    first_name = \"Adam\"\nend\n</code></pre>\n\n<p>I expected the following:</p>\n\n<pre><code>puts person.first_name\n</code></pre>\n\n<p>to output \"Adam\".  Instead, it outputs only a blank line: the first_name attribute has ended up with a value of nil.</p>\n\n<p>When I create a person likes this, though:</p>\n\n<pre><code>person = Person.new do\n    @first_name = \"Adam\"\nend\n</code></pre>\n\n<p>The first_name attribute is set to the expected value.</p>\n\n<p>The problem is that I want to use the attr_accessor in the initialization block, and not the attributes directly.  Can this be done?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "comments": [{"owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 0, "creation_date": 1521196944, "post_id": 49274211, "comment_id": 85638561, "body": "what is your rails version ? is it 5 ?"}, {"owner": {"reputation": 1319, "user_id": 5060959, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2d7af66fc79160e5872515869fad813c?s=128&d=identicon&r=PG&f=1", "display_name": "thedudecodes", "link": "https://stackoverflow.com/users/5060959/thedudecodes"}, "reply_to_user": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "edited": false, "score": 0, "creation_date": 1521197158, "post_id": 49274211, "comment_id": 85638675, "body": "yes rails 5.0.6"}, {"owner": {"reputation": 5647, "user_id": 1162143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rLSfS.jpg?s=128&g=1", "display_name": "Alexander Presber", "link": "https://stackoverflow.com/users/1162143/alexander-presber"}, "edited": false, "score": 0, "creation_date": 1521469214, "post_id": 49274211, "comment_id": 85730731, "body": "So you are looking for <i>exact matches</i> only, no subset matches (e.g. <code>t2</code> on <code>c1</code>), right?"}, {"owner": {"reputation": 1319, "user_id": 5060959, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2d7af66fc79160e5872515869fad813c?s=128&d=identicon&r=PG&f=1", "display_name": "thedudecodes", "link": "https://stackoverflow.com/users/5060959/thedudecodes"}, "edited": false, "score": 0, "creation_date": 1521528089, "post_id": 49274211, "comment_id": 85756186, "body": "yes no subset match I need a exact match.. I actually figured out a to do it."}], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": false, "score": 1, "last_activity_date": 1521198906, "creation_date": 1521198906, "answer_id": 49319436, "question_id": 49274211, "link": "https://stackoverflow.com/questions/49274211/ransack-exact-match-with-array-values/49319436#49319436", "title": "Ransack exact match with array values", "body": "<p>ok, with rails 5.1 simple Ransack search will works fine.  For example assuming one of your columns with serialised array name is 'column_data'</p>\n\n<pre><code>t.text :column_data, array: true, default: []\n</code></pre>\n\n<p>you can search the array columns by following this syntax:</p>\n\n<pre><code>\u2018{ val1, val2, \u2026 }\u2019\n</code></pre>\n\n<p>for example in console </p>\n\n<pre><code>some_search = Model.search(column_data_eq: '{1,3}')\nsome_search.result\n</code></pre>\n\n<p>should give you the following results</p>\n\n<pre><code>SELECT  \"model\".* FROM \"mdole\" WHERE \"model\".\"column_data\" = '{1,3}' LIMIT $1  [[\"LIMIT\", 11]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1319, "user_id": 5060959, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2d7af66fc79160e5872515869fad813c?s=128&d=identicon&r=PG&f=1", "display_name": "thedudecodes", "link": "https://stackoverflow.com/users/5060959/thedudecodes"}, "is_accepted": true, "score": 5, "last_activity_date": 1521528964, "creation_date": 1521528964, "answer_id": 49377996, "question_id": 49274211, "link": "https://stackoverflow.com/questions/49274211/ransack-exact-match-with-array-values/49377996#49377996", "title": "Ransack exact match with array values", "body": "<p>I am answering my own question.</p>\n\n<p>It may vary to the requirement.</p>\n\n<p>I had to take the user params and search in the database if any exact data matches then put the user in same group else make a new group with the searched data and at the end save each searched data for respective user also.</p>\n\n<p>As all the fields were multi select dropdowns checkboxes etc all params was coming as an array of strings.</p>\n\n<p>My workaround for the problem:\n1. sorted the array params and joined it with comma and made string.\nex: </p>\n\n<pre><code>    a = [1,2,3,4,5,6]\n    a.sort.join(',')\n    \"1,2,3,4,5,6\"\n</code></pre>\n\n<p>I stored this string in the database column which is in text.\nNo when user searches for a group I take its params and convert it again in comma separated string and using where clause query to database is done.</p>\n\n<p>In UI I convert this string to array again and show it to user.</p>\n\n<p>I dont know its a correct way of doing it or not but it is working for me.</p>\n\n<p>still any good solutions are welcome. </p>\n"}], "owner": {"reputation": 1319, "user_id": 5060959, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2d7af66fc79160e5872515869fad813c?s=128&d=identicon&r=PG&f=1", "display_name": "thedudecodes", "link": "https://stackoverflow.com/users/5060959/thedudecodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 1, "accepted_answer_id": 49377996, "answer_count": 2, "score": 12, "last_activity_date": 1521528964, "creation_date": 1521020366, "last_edit_date": 1521032091, "question_id": 49274211, "link": "https://stackoverflow.com/questions/49274211/ransack-exact-match-with-array-values", "title": "Ransack exact match with array values", "body": "<p>I have to perform a search on a database using ransack. A few columns in the database have data stored in serialized arrays. I want to match the exact data stored in the arrays with data sent by user to perform search (users' data are also arrays). For example, in database, one column has data as (<code>c1</code>, <code>c2</code> are test cases):</p>\n\n<pre><code>c1.column_data = [1, 2, 3, 4, 5]\nc2.column_data = []\n</code></pre>\n\n<p>User searches for data (<code>t1</code>, <code>t2</code>, <code>t3</code> are test cases):</p>\n\n<pre><code>t1.user_data = [1]\nt2.user_data = [1, 3]\nt3.user_data = [1, 2, 3, 4, 5]\nt4.user_data = []\n</code></pre>\n\n<ul>\n<li>For case <code>c1</code> with <code>t1</code>, <code>t2</code>, <code>t4</code>, it should return <code>no match found</code>.</li>\n<li>With <code>t3</code>, it should result with <code>match found</code>.</li>\n<li>For case <code>c2</code> with <code>t1</code>, <code>t2</code>, <code>t3</code>, it should return <code>no match found</code>.</li>\n<li>With <code>t4</code>, it return `match found.</li>\n</ul>\n\n<p>I found <a href=\"https://github.com/activerecord-hackery/ransack/issues/321\" rel=\"noreferrer\">postgres_ext gem</a>, but I cannot make it work. Can anyone suggest how I can do this or suggest any alternative method for search like this? Any alternative solution is also welcome.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-api", "ruby-on-rails-5.1"], "answers": [{"tags": [], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "is_accepted": false, "score": 0, "last_activity_date": 1521057017, "last_edit_date": 1521057017, "creation_date": 1521020966, "answer_id": 49274446, "question_id": 49273776, "link": "https://stackoverflow.com/questions/49273776/rails-5-api-how-to-respond-with-html-on-a-specific-controllers-as-an-exception/49274446#49274446", "title": "Rails 5 API - How to respond with HTML on a specific controllers as an exception?", "body": "<p>Most new APIs only need to serve JSON, yet it is common to see <code>respond_to</code> in API controllers. Here is an example:</p>\n\n<pre><code>def show\n  html = \"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Holololo&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\"\n  respond_to do |format|\n    format.html { render :json =&gt; html }\n  end\nend\n</code></pre>\n\n<p>We can drop the <code>respond_to</code>, but if you hit the url without .json you\u2019ll see it thinking you\u2019re using HTML in the logs</p>\n\n<pre><code>Processing by PeopleController#index as HTML\n</code></pre>\n\n<p>If you want your route to respond as HTML, you can default that in the route to HTML</p>\n\n<pre><code>namespace :api, :defaults =&gt; {:format =&gt; :html} do\n  namespace :v1 do\n    resources :people\n  end\nend\n</code></pre>\n\n<p>So you can drop the <code>respond_to</code> and let it have its curse, then default your route to take effect as HTML.</p>\n"}, {"comments": [{"owner": {"reputation": 1517, "user_id": 2125211, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/1878fa72482ac377c3131b4a8047a904?s=128&d=identicon&r=PG", "display_name": "Ilya Libin", "link": "https://stackoverflow.com/users/2125211/ilya-libin"}, "edited": false, "score": 0, "creation_date": 1521025785, "post_id": 49275082, "comment_id": 85554699, "body": "Now this looks like the exact answer I needed. Thanks!"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1521022669, "creation_date": 1521022669, "answer_id": 49275082, "question_id": 49273776, "link": "https://stackoverflow.com/questions/49273776/rails-5-api-how-to-respond-with-html-on-a-specific-controllers-as-an-exception/49275082#49275082", "title": "Rails 5 API - How to respond with HTML on a specific controllers as an exception?", "body": "<p>According to the <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-html\" rel=\"nofollow noreferrer\">Layouts and Rendering Guide</a>:</p>\n\n<blockquote>\n  <p>When using html: option, HTML entities will be escaped if the string is not marked as HTML safe by using html_safe method.</p>\n</blockquote>\n\n<p>So you just need to tell it the string is safe to render as html:</p>\n\n<pre><code># modified this line, though could be done in the actual render call as well\nhtml = \"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Holololo&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\".html_safe\n\nrespond_to do |format|\n  format.html {render html: html, :content_type =&gt; 'text/html'}\nend\n</code></pre>\n"}], "owner": {"reputation": 1517, "user_id": 2125211, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/1878fa72482ac377c3131b4a8047a904?s=128&d=identicon&r=PG", "display_name": "Ilya Libin", "link": "https://stackoverflow.com/users/2125211/ilya-libin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1530, "favorite_count": 0, "accepted_answer_id": 49275082, "answer_count": 2, "score": 0, "last_activity_date": 1521057017, "creation_date": 1521019233, "question_id": 49273776, "link": "https://stackoverflow.com/questions/49273776/rails-5-api-how-to-respond-with-html-on-a-specific-controllers-as-an-exception", "title": "Rails 5 API - How to respond with HTML on a specific controllers as an exception?", "body": "<p>I have Rails API app. And 99% of the routes are JSON routes. however, I want to add one single route that will response with HTML. How can I do that?</p>\n\n<p>This is my current setup and when I browse the route I see a string of HTML tags on the screen.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n   include ActionController::MimeResponds      \nend\n\nclass DocumentPublicController &lt; ApplicationController\n  respond_to :html\n\n  def show\n    html = \"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Holololo&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\"#, :content_type =&gt; 'text/html'\n    respond_to do |format|\n      format.html {render html: html, :content_type =&gt; 'text/html'}\n    end\n  end\nend\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "ruby-hash"], "comments": [{"owner": {"reputation": 29582, "user_id": 1427098, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Bvdm0.jpg?s=128&g=1", "display_name": "Darshan Rivka Whittle", "link": "https://stackoverflow.com/users/1427098/darshan-rivka-whittle"}, "edited": false, "score": 0, "creation_date": 1521019187, "post_id": 49273642, "comment_id": 85550072, "body": "It looks like you want a data structure where the hash values are arrays, e.g. <code>{&quot;Rahul&quot; =&gt; [&quot;273&quot;,&quot;217&quot;], &quot;John&quot;=&gt; [&quot;202&quot;], &quot;coventry&quot; =&gt; [&quot;194&quot;]}</code>."}, {"owner": {"reputation": 3, "user_id": 8208975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4cfa40071340c0ac457d9dbc72180340?s=128&d=identicon&r=PG&f=1", "display_name": "Hameed Basha", "link": "https://stackoverflow.com/users/8208975/hameed-basha"}, "reply_to_user": {"reputation": 29582, "user_id": 1427098, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Bvdm0.jpg?s=128&g=1", "display_name": "Darshan Rivka Whittle", "link": "https://stackoverflow.com/users/1427098/darshan-rivka-whittle"}, "edited": false, "score": 0, "creation_date": 1521019782, "post_id": 49273642, "comment_id": 85550444, "body": "@Darshan Not necessarily arrays all I want is my script should not skip writing the value into the hash though the key already exists"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521020170, "post_id": 49273642, "comment_id": 85550711, "body": "<i>&quot;My ruby script filters a log and generates a hash like this&quot;</i> \u2013 how? Please show your code."}, {"owner": {"reputation": 3, "user_id": 8208975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4cfa40071340c0ac457d9dbc72180340?s=128&d=identicon&r=PG&f=1", "display_name": "Hameed Basha", "link": "https://stackoverflow.com/users/8208975/hameed-basha"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521021808, "post_id": 49273642, "comment_id": 85551841, "body": "@Stefan Here is the code: Scores = Hash.new; file = &#39;LOG.txt&#39;; F = File.open(file,&#39;r&#39;); F.each do |line|; score = line.split(&#39;has&#39;)[1];  player = line.split(&#39;has&#39;)[0]; scores.store(player,score); end."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1521022940, "post_id": 49273642, "comment_id": 85552658, "body": "@HameedBasha: &quot;not necessarily array&quot; - yes, necessarily arrays, if you want to keep all the values. If you want to keep only the last value, then you simply write it normally. No &quot;force&quot; needed."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1521023320, "post_id": 49273642, "comment_id": 85552948, "body": "@HameedBasha: &quot;all I want is my script should not skip writing the value into the hash&quot; - it does not skip already. No work needed. :)"}, {"owner": {"reputation": 3, "user_id": 8208975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4cfa40071340c0ac457d9dbc72180340?s=128&d=identicon&r=PG&f=1", "display_name": "Hameed Basha", "link": "https://stackoverflow.com/users/8208975/hameed-basha"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1521023957, "post_id": 49273642, "comment_id": 85553399, "body": "@SergioTulentsev If the key is existing in the hash then it is skipping the  writing of duplicate key and its value into hash. how can we append a value for an existing key"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1521024302, "post_id": 49273642, "comment_id": 85553630, "body": "@HameedBasha by definition, hashes cannot contain duplicate keys. Keys in a hash are always unique."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1521024393, "post_id": 49273642, "comment_id": 85553678, "body": "@HameedBasha: yes, it doesn&#39;t add a duplicate key, but it overwrites the old value for that key. So, not skipping."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1521024502, "post_id": 49273642, "comment_id": 85553757, "body": "@HameedBasha: &quot;how can we append a value for an existing key&quot; - now that we established that we need arrays as values, you can no longer do <code>scores.store(player, score)</code>. Rather something like <code>scores[player] ||= []; scores[player].push(score)</code>"}, {"owner": {"reputation": 3, "user_id": 8208975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4cfa40071340c0ac457d9dbc72180340?s=128&d=identicon&r=PG&f=1", "display_name": "Hameed Basha", "link": "https://stackoverflow.com/users/8208975/hameed-basha"}, "edited": false, "score": 0, "creation_date": 1521179649, "post_id": 49273642, "comment_id": 85629439, "body": "I was searching a way to append multiple values to the existing key.Thanks all for your inputs"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1521021210, "post_id": 49273850, "comment_id": 85551407, "body": "<code>group_by(&amp;:shift)</code> \u2013 the kind of code that keeps me awake at night ;-)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521021320, "post_id": 49273850, "comment_id": 85551493, "body": "@Stefan :) indeed, but here it\u2019s called on the result of <code>scan</code> which is always a temporary array, so here it\u2019s safe."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1521021977, "post_id": 49273850, "comment_id": 85551974, "body": "And for removing the nested arrays you can call <code>.each_value(&amp;:flatten!)</code>, resulting in: <code>{&quot;Rahul&quot;=&gt;[&quot;273&quot;, &quot;217&quot;], &quot;John&quot;=&gt;[&quot;202&quot;], &quot;Coventry&quot;=&gt;[&quot;194&quot;]}</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521038433, "post_id": 49273850, "comment_id": 85563705, "body": "@Stefan I actually find <code>group_by(&amp;:shift)</code> very useful when the first value is the identifier and the continuing values are data points. I use this quite a bit when aggregating data since it is better than <code>group_by(&amp;:first)</code> followed by dropping the first value or selecting all but the first value"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1521038942, "post_id": 49273850, "comment_id": 85564113, "body": "@engineersmnky despite the additional nesting?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521039050, "post_id": 49273850, "comment_id": 85564202, "body": "@Stefan yes because I am usually aggregating rows of data and I intend to retain the row data in groups so it becomes <code>{identifier: [[row],[row],[row]]}</code>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1521022587, "last_edit_date": 1521022587, "creation_date": 1521019445, "answer_id": 49273850, "question_id": 49273642, "link": "https://stackoverflow.com/questions/49273642/add-a-value-to-an-existing-key-value-pair-ruby-hash/49273850#49273850", "title": "Add a value to an existing Key value pair ruby hash", "body": "<pre><code>\"Rahul has 273 Rahul has 217 John has 202 Coventry has 194\".\n  scan(/(\\w+) has (\\d+)/).group_by(&amp;:shift)\n#\u21d2 {\"Rahul\"=&gt;[[\"273\"], [\"217\"]],\n#   \"John\"=&gt;[[\"202\"]],\n#   \"Coventry\"=&gt;[[\"194\"]]}\n</code></pre>\n\n<p>For the values flattening please check the comment by Johan Wentholt below.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1521027620, "creation_date": 1521027620, "answer_id": 49276864, "question_id": 49273642, "link": "https://stackoverflow.com/questions/49273642/add-a-value-to-an-existing-key-value-pair-ruby-hash/49276864#49276864", "title": "Add a value to an existing Key value pair ruby hash", "body": "<p>To store your scores, you could create a hash which has an empty array as its default value:</p>\n\n<pre><code>scores = Hash.new { |hash, key| hash[key] = [] }\n\nscores['Rahul'] #=&gt; [] &lt;- a fresh and empty array\n</code></pre>\n\n<p>You can now extract the values from the log and add it to the respective key's value. I'm using <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><code>scan</code></a> with a block: (using the pattern from <a href=\"https://stackoverflow.com/a/49273850/477037\">mudasobwa's answer</a>)</p>\n\n<pre><code>log = 'Rahul has 273 Rahul has 217 John has 202 Coventry has 194'\n\nlog.scan(/(\\w+) has (\\d+)/) { |name, score| scores[name] &lt;&lt; score.to_i }\n\nscores #=&gt; {\"Rahul\"=&gt;[273, 217], \"John\"=&gt;[202], \"Coventry\"=&gt;[194]}\n</code></pre>\n\n<p>Although not required, I've converted each score to an integer before adding it to the array.</p>\n"}], "owner": {"reputation": 3, "user_id": 8208975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4cfa40071340c0ac457d9dbc72180340?s=128&d=identicon&r=PG&f=1", "display_name": "Hameed Basha", "link": "https://stackoverflow.com/users/8208975/hameed-basha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1415, "favorite_count": 0, "accepted_answer_id": 49276864, "answer_count": 2, "score": 0, "last_activity_date": 1521027620, "creation_date": 1521018840, "last_edit_date": 1521022729, "question_id": 49273642, "link": "https://stackoverflow.com/questions/49273642/add-a-value-to-an-existing-key-value-pair-ruby-hash", "title": "Add a value to an existing Key value pair ruby hash", "body": "<p>My ruby script filters a log and generates a hash like this</p>\n\n<pre><code>scores = {\"Rahul\" =&gt; \"273\", \"John\"=&gt; \"202\", \"coventry\" =&gt; \"194\"}\n</code></pre>\n\n<p>by skipping  multiple values for a key which is obvious</p>\n\n<p>log file will be like this</p>\n\n<blockquote>\n  <p>Rahul has 273 Rahul has 217 John has 202 Coventry has 194</p>\n</blockquote>\n\n<p>Is it Possible to generate something like this</p>\n\n<pre><code>scores = {\"Rahul\" =&gt; \"273\", \"Rahul\" =&gt;\"217\",\n          \"John\"=&gt; \"202\", \"coventry\" =&gt; \"194\"}\n\nscores = {\"Rahul\" =&gt; \"273\",\"217\",\n          \"John\"=&gt; \"202\", \"coventry\" =&gt; \"194\"}\n</code></pre>\n\n<p>Is there a way to forcefully write into a hash even though the key is already existing in the hash</p>\n\n<p>I will be grateful to any help or suggestions</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1521016887, "post_id": 49272919, "comment_id": 85548723, "body": "Why would you use an ancient ruby (v1.9.1) in the first place?"}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1521018770, "post_id": 49272919, "comment_id": 85549811, "body": "Can we see your gemfile as well?"}, {"owner": {"reputation": 41, "user_id": 5051678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OR2EVTOswBg/AAAAAAAAAAI/AAAAAAAAAFM/5EloN9pEp4I/photo.jpg?sz=128", "display_name": "Piyush Chaudhary", "link": "https://stackoverflow.com/users/5051678/piyush-chaudhary"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1521020231, "post_id": 49272919, "comment_id": 85550763, "body": "@mudasobwa  I am working on an old app so there is nothing I can do about the ruby version."}], "answers": [{"tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1521018038, "last_edit_date": 1521018038, "creation_date": 1521017246, "answer_id": 49273166, "question_id": 49272919, "link": "https://stackoverflow.com/questions/49272919/ask-budler-not-to-upgrade-a-gem/49273166#49273166", "title": "Ask budler not to upgrade a gem", "body": "<p>From the log trace given it seems like you have specified the version 2.2.4 in gemfile for devise.</p>\n\n<p>Just remove the version from gemfile and then run bundle update, rubygems will itself find the dependent gem version based on the ruby version and lock it the gemfile.lock.</p>\n"}, {"tags": [], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "is_accepted": false, "score": 0, "last_activity_date": 1521019561, "creation_date": 1521019561, "answer_id": 49273893, "question_id": 49272919, "link": "https://stackoverflow.com/questions/49272919/ask-budler-not-to-upgrade-a-gem/49273893#49273893", "title": "Ask budler not to upgrade a gem", "body": "<p>The problem being that your Devise Gem is locked to a particular version which is the problem. If you check your <code>gemfile.lock</code> you will see its fixed. </p>\n\n<p>Changing version in a Gemfile will not affect which gem version is loaded. bundle install / bundle update is actually needed. </p>\n\n<p>Example of how you can go about that is in the Devise Gem <a href=\"https://github.com/plataformatec/devise#getting-started\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>Change your gemfile to <code>gem 'devise'</code> and run <code>bundle install</code> rubygems will itself find the dependent gem version based on the ruby version and lock it to the gemfile.lock.</p>\n"}], "owner": {"reputation": 41, "user_id": 5051678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OR2EVTOswBg/AAAAAAAAAAI/AAAAAAAAAFM/5EloN9pEp4I/photo.jpg?sz=128", "display_name": "Piyush Chaudhary", "link": "https://stackoverflow.com/users/5051678/piyush-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521019561, "creation_date": 1521016407, "question_id": 49272919, "link": "https://stackoverflow.com/questions/49272919/ask-budler-not-to-upgrade-a-gem", "title": "Ask budler not to upgrade a gem", "body": "<p>I am not able to run <code>bundle update devise</code> or <code>bundle install</code></p>\n\n<p><code>$ bundle update devise</code></p>\n\n<pre><code>Fetching gem metadata from http://rubygems.org/.............\nFetching gem metadata from http://rubygems.org/..\nResolving dependencies............\nFetching rake 12.3.0 (was 10.1.0)\nInstalling rake 12.3.0 (was 10.1.0)\nGem::RuntimeRequirementNotMetError: rake requires Ruby version &gt;= 2.0.0. The current ruby version is 1.9.1.\nAn error occurred while installing rake (12.3.0), and Bundler cannot continue.\nMake sure that `gem install rake -v '12.3.0'` succeeds before bundling.\n</code></pre>\n\n<p>and this is what I am getting on <code>$ bundle install</code></p>\n\n<pre><code>Fetching gem metadata from http://rubygems.org/.............\nFetching gem metadata from http://rubygems.org/..\nYou have requested:\n  devise = 2.2.4\n\nThe bundle currently has devise locked at 3.1.0.\nTry running `bundle update devise`\n\nIf you are updating multiple gems in your Gemfile at once,\ntry passing them all to `bundle update`\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521016271, "post_id": 49272806, "comment_id": 85548350, "body": "Have you tried anything so far?"}, {"owner": {"reputation": 45, "user_id": 7059521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bf824238d9357225cb6ea6b10c359e?s=128&d=identicon&r=PG&f=1", "display_name": "Khalid A.", "link": "https://stackoverflow.com/users/7059521/khalid-a"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521017201, "post_id": 49272806, "comment_id": 85548888, "body": "yes  i test some methods , but i am new with programming"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1521017260, "post_id": 49272806, "comment_id": 85548914, "body": "It&#39;s always good to include your attempts, regardless of their quality."}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 2, "last_activity_date": 1521017064, "last_edit_date": 1521017064, "creation_date": 1521016492, "answer_id": 49272942, "question_id": 49272806, "link": "https://stackoverflow.com/questions/49272806/how-to-extract-values-from-hashes-into-separate-arrays/49272942#49272942", "title": "How to extract values from hashes into separate arrays?", "body": "<p>A simple solution is to iterate the array of hashes and add the required values to two separate arrays:</p>\n\n<pre><code>months = []\ncounts = []\narray_of_hash.each do |hash|\n  months &lt;&lt; hash[\"month\"]\n  counts &lt;&lt; hash[\"count\"]\nend\n</code></pre>\n\n<p>But you could also use <code>each_with_object</code></p>\n\n<pre><code>months, count = array_of_hash.each_with_object([[], []]) do |hash, accu|\n  accu[0] &lt;&lt; hash[\"month\"]\n  accu[1] &lt;&lt; hash[\"count\"]\nend\n</code></pre>\n\n<p>or iterate twice and get the months and counts separately:</p>\n\n<pre><code>months = array_of_hash.map { |hash| hash[\"month\"] }\ncounts = array_of_hash.map { |hash| hash[\"count\"] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1521019723, "post_id": 49272953, "comment_id": 85550416, "body": "Your solution is always unique and always using the complete power of Ruby!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1521022761, "last_edit_date": 1521022761, "creation_date": 1521016520, "answer_id": 49272953, "question_id": 49272806, "link": "https://stackoverflow.com/questions/49272806/how-to-extract-values-from-hashes-into-separate-arrays/49272953#49272953", "title": "How to extract values from hashes into separate arrays?", "body": "<pre><code>months, counts =\n  array_of_hash.\n    flat_map(&amp;:values).\n    partition(&amp;String.method(:===))\n</code></pre>\n\n<hr>\n\n<pre><code>months, counts =\n  %w|month count|.map { |key| array_of_hash.map { |h| h[key] } }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2700, "user_id": 8126658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KCd.jpg?s=128&g=1", "display_name": "GGO", "link": "https://stackoverflow.com/users/8126658/ggo"}, "edited": false, "score": 0, "creation_date": 1521021932, "post_id": 49272964, "comment_id": 85551942, "body": "Please add some explanations, avoid code only answer"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1521025921, "post_id": 49272964, "comment_id": 85554793, "body": "Thank you for this code snippet, which might provide some limited short-term help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its long-term value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with other, similar questions.  Please <a href=\"https://stackoverflow.com/posts/49272964/edit\">edit</a> your answer to add some explanation, including the assumptions you&#39;ve made."}], "tags": [], "owner": {"reputation": 11, "user_id": 8532257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LGHuQx40AbY/AAAAAAAAAAI/AAAAAAAAAAk/DL3SgwQZ2Fo/photo.jpg?sz=128", "display_name": "Dmitry Gusev", "link": "https://stackoverflow.com/users/8532257/dmitry-gusev"}, "is_accepted": false, "score": 0, "last_activity_date": 1521016550, "creation_date": 1521016550, "answer_id": 49272964, "question_id": 49272806, "link": "https://stackoverflow.com/questions/49272806/how-to-extract-values-from-hashes-into-separate-arrays/49272964#49272964", "title": "How to extract values from hashes into separate arrays?", "body": "<pre><code>month = []\ncount = []\narray_of_hash.each do |hash|\n   month &lt;&lt; hash['month']\n   count &lt;&lt; hash['count']\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1521023043, "post_id": 49273083, "comment_id": 85552736, "body": "&quot;transpose&quot; is nice."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1521048851, "post_id": 49273083, "comment_id": 85571375, "body": "<code>array_of_hash.map(&amp;:values).transpose</code> is another option."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1521050193, "post_id": 49273083, "comment_id": 85572191, "body": "@SagarPandya yeah, but it relies on the value order."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1521017622, "last_edit_date": 1521017622, "creation_date": 1521016936, "answer_id": 49273083, "question_id": 49272806, "link": "https://stackoverflow.com/questions/49272806/how-to-extract-values-from-hashes-into-separate-arrays/49273083#49273083", "title": "How to extract values from hashes into separate arrays?", "body": "<p>To extract a single value (e.g. <code>'month'</code>), you could use <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>map</code></a>:</p>\n\n<pre><code>array_of_hash.map { |hash| hash['month'] }\n#=&gt; [\"January\", \"February\", \"March\"]\n</code></pre>\n\n<p>Which can be extended to return the values for both, <code>'month</code> and <code>'count'</code>:</p>\n\n<pre><code>array_of_hash.map { |h| [h['month'], h['count']] }\n#=&gt; [[\"January\", 67241], [\"February\", 60464], [\"March\", 30403]]\n</code></pre>\n\n<p>There's also a method to fetch multiple values at once \u2013 <a href=\"http://ruby-doc.org/core-2.5.0/Hash.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>values_at</code></a>:</p>\n\n<pre><code>array_of_hash.map { |h| h.values_at('month', 'count') }\n#=&gt; [[\"January\", 67241], [\"February\", 60464], [\"March\", 30403]]\n</code></pre>\n\n<p>The resulting array can then be rearranged via <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>transpose</code></a>:</p>\n\n<pre><code>array_of_hash.map { |h| h.values_at('month', 'count') }.transpose\n#=&gt; [[\"January\", \"February\", \"March\"], [67241, 60464, 30403]]\n</code></pre>\n\n<p>The two inner arrays can be assigned to separate variables using Ruby's <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">array decomposition</a>:</p>\n\n<pre><code>months, counts = array_of_hash.map { |h| h.values_at('month', 'count') }.transpose\n\nmonths #=&gt; [\"January\", \"February\", \"March\"]\ncounts #=&gt; [67241, 60464, 30403]\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7059521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bf824238d9357225cb6ea6b10c359e?s=128&d=identicon&r=PG&f=1", "display_name": "Khalid A.", "link": "https://stackoverflow.com/users/7059521/khalid-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 49272942, "answer_count": 4, "score": 0, "last_activity_date": 1521022761, "creation_date": 1521016022, "last_edit_date": 1521016423, "question_id": 49272806, "link": "https://stackoverflow.com/questions/49272806/how-to-extract-values-from-hashes-into-separate-arrays", "title": "How to extract values from hashes into separate arrays?", "body": "<p>How can i change this:</p>\n\n<pre><code>array_of_hash = [{\"month\"=&gt;\"January\", \"count\"=&gt;67241},\n                 {\"month\"=&gt;\"February\", \"count\"=&gt;60464},\n                 {\"month\"=&gt;\"March\", \"count\"=&gt;30403}] \n</code></pre>\n\n<p>To this : </p>\n\n<pre><code>month = [\"January\", \"February\", \"March\"]\ncount = [67241, 60464,30403]\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1521013705, "creation_date": 1521013705, "answer_id": 49272193, "question_id": 49272031, "link": "https://stackoverflow.com/questions/49272031/ruby-regex-that-starts-with-only-one-opening-bracket/49272193#49272193", "title": "Ruby regex that starts with ONLY one opening bracket", "body": "<p>This regex may suit:</p>\n\n<pre><code>str1 = \"{word_or_not}}}}}}}\"\nstr2 = \"{{word_or_not}}}}}}}}\"\n\nstr1.match?(/\\A\\{[^{]*?\\}+\\z/) #=&gt; true\nstr2.match?(/\\A\\{[^{]*?\\}+\\z/) #=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "is_accepted": false, "score": 0, "last_activity_date": 1521013711, "creation_date": 1521013711, "answer_id": 49272194, "question_id": 49272031, "link": "https://stackoverflow.com/questions/49272031/ruby-regex-that-starts-with-only-one-opening-bracket/49272194#49272194", "title": "Ruby regex that starts with ONLY one opening bracket", "body": "<p><a href=\"http://rubular.com/r/29KQKpNazQ\" rel=\"nofollow noreferrer\">Try</a> this regex:</p>\n\n<pre><code>(?&lt;!{){\\w*}+\n</code></pre>\n\n<p>This uses a negative lookbehind to assert that there is not a <code>{</code> before the first <code>{</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1521013717, "creation_date": 1521013717, "answer_id": 49272196, "question_id": 49272031, "link": "https://stackoverflow.com/questions/49272031/ruby-regex-that-starts-with-only-one-opening-bracket/49272196#49272196", "title": "Ruby regex that starts with ONLY one opening bracket", "body": "<p>One might explicitly check for <a href=\"http://www.rexegg.com/regex-lookarounds.html\" rel=\"nofollow noreferrer\">negative lookbehind</a>:</p>\n\n<pre><code>%w|{word_or_not}}}}}}} {{word_or_not}}}}}}}|.\n  map(&amp;/(?&lt;!{){\\w+}+/.method(:=~))\n#\u21d2 [0, nil]\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 8068825, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155774011138055/picture?type=large", "display_name": "Dylan Y", "link": "https://stackoverflow.com/users/8068825/dylan-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1521014237, "creation_date": 1521013110, "last_edit_date": 1521014237, "question_id": 49272031, "link": "https://stackoverflow.com/questions/49272031/ruby-regex-that-starts-with-only-one-opening-bracket", "title": "Ruby regex that starts with ONLY one opening bracket", "body": "<p>I'm looking for a regex that checks for a pattern that starts with only 1 opening curly bracket and any number of closing brackets so:  </p>\n\n<pre><code>\"something{word_or_not}}}}}}}\"  \n#should return true.  \n\n\"something{{word_or_not}}}}}}}}\"  \n#should return false.  \n</code></pre>\n\n<p>This is how far I've gotten <code>\"\\{\\w*\\}\\}+\"</code> except not that far since this returns <code>true</code> for the second example.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1521012618, "post_id": 49271569, "comment_id": 85546618, "body": "Chrome is default in WATIR, you don&#39;t have to pass argument as <code>:chrome</code>"}, {"owner": {"reputation": 1106, "user_id": 782713, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/20b309cdcea1aa280b617c318af99274?s=128&d=identicon&r=PG", "display_name": "Gijs Paulides", "link": "https://stackoverflow.com/users/782713/gijs-paulides"}, "edited": false, "score": 2, "creation_date": 1521030957, "post_id": 49271569, "comment_id": 85558256, "body": "Why are you running these old versions of Watir and Selenium? Often Timeout errors are caused by a browser / webdriver / selenium version mismatch. I&#39;d recommend getting everything up-to date."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1521231584, "post_id": 49271569, "comment_id": 85659731, "body": "What is the full text of the error?"}, {"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1521312316, "post_id": 49271569, "comment_id": 85681269, "body": "It just through timeout error. I added gem &#39;headless&#39; and call it before waitir. I think It still can not init"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1521645002, "post_id": 49271569, "comment_id": 85821366, "body": "How are you executing this? You shouldn&#39;t be executing this in the context of a Rails console. Use a test runner like RSpec or MiniTest to kick off your code against your Rails app."}], "owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521045937, "creation_date": 1521011212, "last_edit_date": 1521045937, "question_id": 49271569, "link": "https://stackoverflow.com/questions/49271569/ruby-watir-could-not-init-watir-when-running-at-server", "title": "ruby watir, could not init watir when running at server", "body": "<p>Watir Version: (6.1.0)</p>\n\n<p>Selenium Version: selenium-webdriver (3.0.5)</p>\n\n<p>In code I call init:</p>\n\n<pre><code>Watir::Browser.new :chrome\n</code></pre>\n\n<p>It running in minute and return :</p>\n\n<pre><code>Timeout::Error (Rails Rack application timed out during \n</code></pre>\n\n<p>But I call that in rails console, That work. </p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1521008746, "creation_date": 1521008746, "answer_id": 49271007, "question_id": 49270564, "link": "https://stackoverflow.com/questions/49270564/only-if-chef-code-fails-error-should-be-captured-by-ignore-failure-true-and-di/49271007#49271007", "title": "only if chef code fails , error should be captured by ignore_failure_true and display error message", "body": "<p><code>ignore_failure true</code> means that if there is an error, we show the usual error display but don't abort the converge. If you want behavior other than that, you'll probably have to write something yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 9024766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6127fb285fcb61d67f07d1123548082?s=128&d=identicon&r=PG&f=1", "display_name": "Ambareesh V", "link": "https://stackoverflow.com/users/9024766/ambareesh-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1521089519, "last_edit_date": 1521089519, "creation_date": 1521089218, "answer_id": 49291778, "question_id": 49270564, "link": "https://stackoverflow.com/questions/49270564/only-if-chef-code-fails-error-should-be-captured-by-ignore-failure-true-and-di/49291778#49291778", "title": "only if chef code fails , error should be captured by ignore_failure_true and display error message", "body": "<p>If you want to capture output and take decission based on that then please use Mixlib shellout instead of execute.</p>\n\n<p><code>if ::File.exist?('abc')\n        require 'mixlib/shellout'\n        cmnd = Mixlib::ShellOut.new(reg_cmd)\n        cmnd.run_command\n        if cmnd.error?\n          puts cmnd.stderr\n          else\n          &lt;write your code here to continue with installation&gt;\n        end\n    end</code></p>\n"}], "owner": {"reputation": 5, "user_id": 9222537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cdb0f64fe3e1dc444db7285dcf8747?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/9222537/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521089519, "creation_date": 1521006748, "last_edit_date": 1521007349, "question_id": 49270564, "link": "https://stackoverflow.com/questions/49270564/only-if-chef-code-fails-error-should-be-captured-by-ignore-failure-true-and-di", "title": "only if chef code fails , error should be captured by ignore_failure_true and display error message", "body": "<pre><code>execute 'install_insatller' do\n  cwd \"abc\"\n  command reg_cmd\n  ignore_failure true\n  log 'STDERROR'\n  only_if { ::File.exist?('abc') }\nend\n</code></pre>\n\n<p>this is just an expample code \nI want to print the log message only if the failure occurs else continue the installation.</p>\n"}, {"tags": ["ruby", "macos", "character-encoding"], "comments": [{"owner": {"reputation": 167, "user_id": 6207036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/db323ece9cd722993eb050c42852acf7?s=128&d=identicon&r=PG&f=1", "display_name": "\u0427\u0435\u0447\u0438\u043b \u041a\u0440\u044b\u043c", "link": "https://stackoverflow.com/users/6207036/%d0%a7%d0%b5%d1%87%d0%b8%d0%bb-%d0%9a%d1%80%d1%8b%d0%bc"}, "edited": false, "score": 0, "creation_date": 1521014995, "post_id": 49270203, "comment_id": 85547716, "body": "closed due to wrong investigation."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6207036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/db323ece9cd722993eb050c42852acf7?s=128&d=identicon&r=PG&f=1", "display_name": "\u0427\u0435\u0447\u0438\u043b \u041a\u0440\u044b\u043c", "link": "https://stackoverflow.com/users/6207036/%d0%a7%d0%b5%d1%87%d0%b8%d0%bb-%d0%9a%d1%80%d1%8b%d0%bc"}, "edited": false, "score": 0, "creation_date": 1521012349, "post_id": 49270679, "comment_id": 85546487, "body": "it works with irb, but not with project stopped with pry or byebug"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 167, "user_id": 6207036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/db323ece9cd722993eb050c42852acf7?s=128&d=identicon&r=PG&f=1", "display_name": "\u0427\u0435\u0447\u0438\u043b \u041a\u0440\u044b\u043c", "link": "https://stackoverflow.com/users/6207036/%d0%a7%d0%b5%d1%87%d0%b8%d0%bb-%d0%9a%d1%80%d1%8b%d0%bc"}, "edited": false, "score": 0, "creation_date": 1521016230, "post_id": 49270679, "comment_id": 85548331, "body": "How did you start this &quot;project&quot;? What is this &quot;project&quot;? Just ruby script, a Rails application? You need to make sure that the project is started with correct settings. Also: if you have CP1252 as default encoding? Where is it running, sounds like Windows?"}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 2, "last_activity_date": 1521007679, "last_edit_date": 1521007679, "creation_date": 1521007300, "answer_id": 49270679, "question_id": 49270203, "link": "https://stackoverflow.com/questions/49270203/how-to-change-encoding-default-external-for-whole-system-osx/49270679#49270679", "title": "How to change Encoding.default_external for whole system? OSX", "body": "<p>You can use the <code>LANG</code> env variable to influence the default external encoding:</p>\n\n<pre><code>ruby-2.3.4 Desktop$ LANG=en_US.US-ASCII irb\n2.3.4 :001 &gt; Encoding.default_external\n =&gt; #&lt;Encoding:US-ASCII&gt;\n\nruby-2.3.4 Desktop$ LANG=de_CH.UTF-8 irb\n2.3.4 :001 &gt; Encoding.default_external\n =&gt; #&lt;Encoding:UTF-8&gt;\n</code></pre>\n\n<p>it is also possible to override it with the <code>-E</code> options:</p>\n\n<pre><code>ruby-2.3.4 Desktop$ LANG=en_US.US-ASCII irb -E utf-8\n2.3.4 :001 &gt; Encoding.default_external\n =&gt; #&lt;Encoding:UTF-8&gt;\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 6207036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/db323ece9cd722993eb050c42852acf7?s=128&d=identicon&r=PG&f=1", "display_name": "\u0427\u0435\u0447\u0438\u043b \u041a\u0440\u044b\u043c", "link": "https://stackoverflow.com/users/6207036/%d0%a7%d0%b5%d1%87%d0%b8%d0%bb-%d0%9a%d1%80%d1%8b%d0%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521007679, "creation_date": 1521004707, "question_id": 49270203, "link": "https://stackoverflow.com/questions/49270203/how-to-change-encoding-default-external-for-whole-system-osx", "title": "How to change Encoding.default_external for whole system? OSX", "body": "<p>I stopped program with pry, then I type </p>\n\n<pre><code>[1] pry(Module1::Class1)&gt; Encoding.default_external\n=&gt; #&lt;Encoding:Windows-1252&gt;\n</code></pre>\n\n<p>In another mac, default value of <code>Encoding.default_external</code> is <strong>UTF-8</strong>. I changed locale variables to UTF-8, and encoding in <strong><em>irb</em></strong> works fine, but not in project stopped. With byebug is the same.</p>\n\n<p>System is <strong>macOSX</strong>, <strong>ruby 2.3.3</strong> through <strong>rbenv</strong>.</p>\n"}, {"tags": ["ruby", "rounding"], "comments": [{"owner": {"reputation": 2551, "user_id": 4739247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwOaK.jpg?s=128&g=1", "display_name": "assefamaru", "link": "https://stackoverflow.com/users/4739247/assefamaru"}, "edited": false, "score": 0, "creation_date": 1521004616, "post_id": 49269680, "comment_id": 85543411, "body": "See <a href=\"https://stackoverflow.com/questions/33802099/ruby-round-off-to-two-decimal-place-and-keep-zero\">ruby round off to two decimal place and keep zero</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1521012133, "post_id": 49269680, "comment_id": 85546378, "body": "You shouldn&#39;t use floats for monetary values."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1521038787, "post_id": 49269680, "comment_id": 85563988, "body": "@Stefan why not? If we collect all the small inaccuracies in floating point math as currency we could be rich :)"}, {"owner": {"reputation": 21, "user_id": 9255459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXpc4.jpg?s=128&g=1", "display_name": "Jake Metz", "link": "https://stackoverflow.com/users/9255459/jake-metz"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522369667, "post_id": 49269680, "comment_id": 86142028, "body": "@stefan thank you for the insight. I have now covered that topic and will not be using float to reflect monetary value."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9255459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXpc4.jpg?s=128&g=1", "display_name": "Jake Metz", "link": "https://stackoverflow.com/users/9255459/jake-metz"}, "edited": false, "score": 0, "creation_date": 1521006816, "post_id": 49269788, "comment_id": 85544100, "body": "unfortunately this still returns the total cost as 23.0 and not 23.00 as I wanted. Thank you for your reply however"}], "tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": false, "score": 0, "last_activity_date": 1521001511, "creation_date": 1521001511, "answer_id": 49269788, "question_id": 49269680, "link": "https://stackoverflow.com/questions/49269680/how-do-i-display-2-decimals-when-there-is-a-trailing-0-in-a-float/49269788#49269788", "title": "How do I display 2 decimals when there is a trailing 0 in a float", "body": "<p>hash[:cost] is still returns a String. you could just cover it to a float before adding it to sum </p>\n\n<pre><code>totalcost = items.inject(0) {|sum, hash| sum + hash[:cost].to_f}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9255459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXpc4.jpg?s=128&g=1", "display_name": "Jake Metz", "link": "https://stackoverflow.com/users/9255459/jake-metz"}, "edited": false, "score": 0, "creation_date": 1521006884, "post_id": 49270320, "comment_id": 85544131, "body": "This one did the trick!! Thank you for the help. I&#39;m just starting out in this programming path and I was able to burn this off my backlog"}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": true, "score": 3, "last_activity_date": 1521005521, "creation_date": 1521005521, "answer_id": 49270320, "question_id": 49269680, "link": "https://stackoverflow.com/questions/49269680/how-do-i-display-2-decimals-when-there-is-a-trailing-0-in-a-float/49270320#49270320", "title": "How do I display 2 decimals when there is a trailing 0 in a float", "body": "<p>You can calculate the sum of cost values after converting it to number(Integer/Float).</p>\n\n<pre><code>totalcost  = items.map { |x| x[:cost].to_f }.sum\n</code></pre>\n\n<p>The value of <code>totalcost</code> can be formatted with <a href=\"http://ruby-doc.org/core-2.0.0/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\">sprintf method</a> in whatever way we want to display.</p>\n\n<pre><code>sprintf(\"%.2f\", totalcost)\n</code></pre>\n\n<p>Hope it helps !</p>\n"}], "owner": {"reputation": 21, "user_id": 9255459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXpc4.jpg?s=128&g=1", "display_name": "Jake Metz", "link": "https://stackoverflow.com/users/9255459/jake-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "accepted_answer_id": 49270320, "answer_count": 2, "score": 1, "last_activity_date": 1521007011, "creation_date": 1521000822, "last_edit_date": 1521007011, "question_id": 49269680, "link": "https://stackoverflow.com/questions/49269680/how-do-i-display-2-decimals-when-there-is-a-trailing-0-in-a-float", "title": "How do I display 2 decimals when there is a trailing 0 in a float", "body": "<p>How can I display 2 decimal places (padding) on a float even if the trailing number is a 0. So, if I sum only the :cost values in the example below I would like it to return 23.00</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>items = [\n    {customer: \"John\", item: \"Soup\", cost:(\"%.2f\"% 8.50)}, \n    {customer: \"Sarah\", item: \"Pasta\", cost:(\"%.2f\"% 12.00)}, \n    {customer: \"John\", item: \"Coke\", cost:(\"%.2f\" % 2.50)}\n]\n</code></pre>\n\n<p>PROBLEM: \nI have success displaying cost: values with two decimal places. However, the result returns a \"string\". I have tried <strong><em>(\"%.2f\" % 2.50).to_f</em></strong> with no such luck. I need a float so that I can complete the following inject code.</p>\n\n<pre><code>totalcost = items.inject(0) {|sum, hash| sum + hash[:cost]}\n\nputs totalcost\n</code></pre>\n\n<p>When running this to sum the total cost I receive the following error because I cannot convert the string to a float successfully. <strong>String can't be coerced into Integer (TypeError)</strong></p>\n"}, {"tags": ["ruby", "arguments", "proc"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9489003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21ac06d189ef26ca272391257437971?s=128&d=identicon&r=PG&f=1", "display_name": "user9489003", "link": "https://stackoverflow.com/users/9489003/user9489003"}, "edited": false, "score": 0, "creation_date": 1520998383, "post_id": 49269266, "comment_id": 85541868, "body": "thank you so much! this is exacted what i needed and my code runs. Question, what is the name of this notation and how can I learn more about it? What does -&gt;{} does?"}, {"owner": {"reputation": 15, "user_id": 9489003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21ac06d189ef26ca272391257437971?s=128&d=identicon&r=PG&f=1", "display_name": "user9489003", "link": "https://stackoverflow.com/users/9489003/user9489003"}, "edited": false, "score": 0, "creation_date": 1521000553, "post_id": 49269266, "comment_id": 85542374, "body": "thanks! how come that it does not execute the function when written between -&gt; {} but executes it if I omit -&gt;{}"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1521041082, "post_id": 49269266, "comment_id": 85565731, "body": "@SimpleLime technically that is a <code>lambda</code> which is a particular kind of <code>Proc</code>. <code>lambda</code>s act more like an anonymous method than a traditional <code>Proc</code> created via <code>Proc.new</code>"}], "tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 1, "last_activity_date": 1521040699, "last_edit_date": 1521040699, "creation_date": 1520997817, "answer_id": 49269266, "question_id": 49269181, "link": "https://stackoverflow.com/questions/49269181/arguments-for-proc-in-ruby/49269266#49269266", "title": "arguments for proc in ruby", "body": "<p>When you call <code>inner[1,2]</code> inside <code>middle</code> proc, you're actually executing the function which will return a value <code>3</code> then the argument to <code>log</code> will be <code>\"inner\", 3</code> and since 3 does not respond to <code>call</code> your script fails.</p>\n\n<p>If you want to fix your script your middle proc should look something like this</p>\n\n<pre><code>middle=Proc.new do |x| \n  log(\"inner\", -&gt; { inner[1, 2] })\n  \"check2\"\nend\n</code></pre>\n\n<p>The reason your code was not working was because you were executing the function <code>inner</code> with <code>[]</code>. You can execute a block in ruby in different ways <code>.call</code>, <code>.yield</code>, <code>.()</code>, <code>[]</code>. As you can see, you were passing in the result of inner instead of the proc itself. By wrapping the call to <code>inner[1,2]</code> inside another block to be executed later inside <code>log</code> by doing <code>proc.call</code>, you delayed inner's execution.</p>\n"}], "owner": {"reputation": 15, "user_id": 9489003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21ac06d189ef26ca272391257437971?s=128&d=identicon&r=PG&f=1", "display_name": "user9489003", "link": "https://stackoverflow.com/users/9489003/user9489003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 49269266, "answer_count": 1, "score": 0, "last_activity_date": 1521040699, "creation_date": 1520997131, "last_edit_date": 1520997331, "question_id": 49269181, "link": "https://stackoverflow.com/questions/49269181/arguments-for-proc-in-ruby", "title": "arguments for proc in ruby", "body": "<p>I am trying to run this code. I am trying to pass arguments into inner proc but my code does not run because of this. What am I doing wrong?</p>\n\n<pre><code>def log (descriptionOfProc,proc)\n  puts \"I have started proc #{descriptionOfProc}\"\n  puts \"#{descriptionOfProc} is finished, returning #{proc.call}\"\nend\n\ninner=Proc.new do |x,y|\n  x+y\nend\n\nmiddle=Proc.new do |x| \n  log(\"inner\", inner[1, 2])\n  \"check2\"\nend\n\nouter=Proc.new do |x| \n  log(\"middle\", middle)\n  \"check3\"\nend\n\nputs log(\"outer\", outer)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 8060203, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/28KXC.jpg?s=128&g=1", "display_name": "David Dacruz", "link": "https://stackoverflow.com/users/8060203/david-dacruz"}, "edited": false, "score": 0, "creation_date": 1521032688, "post_id": 49269138, "comment_id": 85559439, "body": "Sure did thanks it worked up a point but it was making the job harder I&#39;m new at programing, I will stick to conventions rather than configuration but I think it will be usefull for me to learn so I have this on the side so I can learn how to use namespace correctly in a rails app. Thanks again for yout time to help."}, {"owner": {"reputation": 951, "user_id": 1812872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBQWs.jpg?s=128&g=1", "display_name": "Benito Serna", "link": "https://stackoverflow.com/users/1812872/benito-serna"}, "reply_to_user": {"reputation": 127, "user_id": 8060203, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/28KXC.jpg?s=128&g=1", "display_name": "David Dacruz", "link": "https://stackoverflow.com/users/8060203/david-dacruz"}, "edited": false, "score": 1, "creation_date": 1521045157, "post_id": 49269138, "comment_id": 85568848, "body": "I added an example using &quot;has_many :through&quot; association. If you are new in the Rails world, maybe you can read about it, and see if is better for your use case =)"}], "tags": [], "owner": {"reputation": 951, "user_id": 1812872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBQWs.jpg?s=128&g=1", "display_name": "Benito Serna", "link": "https://stackoverflow.com/users/1812872/benito-serna"}, "is_accepted": true, "score": 1, "last_activity_date": 1521045039, "last_edit_date": 1521045039, "creation_date": 1520996793, "answer_id": 49269138, "question_id": 49268325, "link": "https://stackoverflow.com/questions/49268325/ruby-on-rails-using-namespaces-saving-record/49269138#49269138", "title": "Ruby on Rails using namespaces saving record", "body": "<p>I think there are some problems with the rails conventions. As far as I know you should name the join table in a special way.</p>\n\n<p>You can look the rails guides, specially in the section for <a href=\"http://guides.rubyonrails.org/association_basics.html#creating-join-tables-for-has-and-belongs-to-many-associations\" rel=\"nofollow noreferrer\">creating join tables for has and belongs to many associations</a>.</p>\n\n<p>Following the guide I was able build more less what you are building, but without devise.</p>\n\n<p>In the example I have this three migrations...</p>\n\n<pre><code>class CreateFrontendUsers &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :frontend_users do |t|\n      t.string :email\n\n      t.timestamps\n    end\n  end\nend\n\nclass CreateFrontendEvents &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :frontend_events do |t|\n      t.string :name\n\n      t.timestamps\n    end\n  end\nend\n\nclass CreateFrontendEventsUsersJoinTable &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :frontend_events_users, id: false do |t|\n      t.integer :event_id\n      t.integer :user_id\n    end\n\n    add_index :frontend_events_users, :event_id\n    add_index :frontend_events_users, :user_id\n  end\nend\n</code></pre>\n\n<p>And this two models...</p>\n\n<pre><code>class Frontend::Event &lt; ApplicationRecord\n  has_and_belongs_to_many :users\nend\n\nclass Frontend::User &lt; ApplicationRecord\n  has_and_belongs_to_many :events\nend\n</code></pre>\n\n<p>And with that in the rails console I was able to do...</p>\n\n<pre><code>user = Frontend::User.create(email: \"asdf\")\nevent = user.events.create(name: \"event1\")\nuser.events # =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Frontend::Event id: 1, name: \"event1\", created_at: \"...\", updated_at: \"...\"&gt;]&gt;\nevent.users # =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Frontend::User id: 1, email: \"asdf\", created_at: \"...\", updated_at: \"...\"&gt;]&gt;\n</code></pre>\n\n<p><strong>Consider use has_many through associations</strong></p>\n\n<p>If you want to have more control over the joining table records, is a common practice to use \"has many\" through associations. If you have not heard about about them you can also look at the guides in the section <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\">The has_many :through association</a>.</p>\n\n<p>You can also recreate the example changing the <code>CreateFrontendEventsUsersJoinTable</code> migration for...</p>\n\n<pre><code>class CreateFrontendEventInvitations &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :frontend_event_invitations do |t|\n      t.integer :event_id\n      t.integer :user_id\n\n      t.timestamps\n    end\n\n    add_index :frontend_event_invitations, :event_id\n    add_index :frontend_event_invitations, :user_id\n  end\nend\n</code></pre>\n\n<p>And now your models would be like...</p>\n\n<pre><code>class Frontend::Event &lt; ApplicationRecord\n  has_many :event_invitations\n  has_many :users, through: :event_invitations\nend\n\nclass Frontend::User &lt; ApplicationRecord\n  has_many :event_invitations\n  has_many :events, through: :event_invitations\nend\n\nclass Frontend::EventInvitation &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :event\nend\n</code></pre>\n\n<p>I almos always prefer to use this kind of association instead of the <code>has_many_and_belongs_to</code> association. But you can decide which is better for you =)</p>\n\n<p>Sometimes is hard to know all the rails conventions, even if you have been working with Rails several years =S ... but the <a href=\"http://guides.rubyonrails.org/index.html\" rel=\"nofollow noreferrer\">Rails Guides</a> and <a href=\"http://api.rubyonrails.org/\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/</a> help a lot!</p>\n\n<p>I hope it helps =)</p>\n"}], "owner": {"reputation": 127, "user_id": 8060203, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/28KXC.jpg?s=128&g=1", "display_name": "David Dacruz", "link": "https://stackoverflow.com/users/8060203/david-dacruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 49269138, "answer_count": 1, "score": 0, "last_activity_date": 1521045039, "creation_date": 1520989892, "last_edit_date": 1520991499, "question_id": 49268325, "link": "https://stackoverflow.com/questions/49268325/ruby-on-rails-using-namespaces-saving-record", "title": "Ruby on Rails using namespaces saving record", "body": "<p>I'm using Rails 5.1 to build an app, I'm trying to organize the models in namespaces but when I try to save an instance I get an error <code>no such table: main.users</code> maybe someone here can show me the way !</p>\n\n<p><code>app/models/frontend.rb</code></p>\n\n<pre><code>module Frontend\n  def self.table_name_prefix\n   'frontend_'\n  end\nend\n</code></pre>\n\n<p>I'm using devise for the User migrations here's the <code>Frontend::User</code> model\n<code>app/models/frontend/user.rb</code></p>\n\n<pre><code>   class Frontend::User &lt; ApplicationRecord\n     # a user has many events (event creator)\n     has_many :events\n     # a user has and belongs to many event invitations\n     has_and_belongs_to_many :event_invitations, class_name: \n     \"Frontend::Event\"\n\n     # Include default devise modules. Others available are:\n     # :timeoutable and :omniauthable, :confirmable\n     devise :database_authenticatable, :registerable, :lockable,\n      :recoverable, :rememberable, :trackable, :validatable\n  end\n</code></pre>\n\n<p><code>Frontend::Event</code> model : \n<code>app/models/frontend/event.rb</code></p>\n\n<pre><code>class Frontend::Event &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>Migration for <code>Frontend::Event</code> model : </p>\n\n<pre><code>class CreateFrontendEvents &lt; ActiveRecord::Migration[5.1]\n def change\n  create_table :frontend_events do |t|\n   t.references :user, foreign_key: true\n   t.string :title, :null =&gt; false\n   t.text :description, :null =&gt; false\n   t.string :short_description, :null =&gt; false\n   t.datetime :start_date, :null =&gt; true\n   t.datetime :end_date, :null =&gt; true\n   t.string :address, :null =&gt; true\n   t.float :latitude, :null =&gt; true\n   t.float :longitude, :null =&gt; true\n   t.integer :number_of_guest, :null =&gt; true\n   t.boolean :published, default: false\n   t.timestamps\n  end\n end\nend\n</code></pre>\n\n<p>In rails console : </p>\n\n<p>I can create a user</p>\n\n<pre><code>u = Frontend::User.create(email: \"user@user.com\", password: \"secret\")\n</code></pre>\n\n<p>I can use the build method with the <code>has_many :events</code> relationship</p>\n\n<pre><code>e = u.events.build\n\n &lt;Frontend::Event id: nil, user_id: 1, title: nil, description: \n nil, short_description: nil, start_date: nil, end_date: nil, address: \n nil, latitude: nil, longitude: nil, number_of_guest: nil, published: \n false, created_at: nil, updated_at: nil&gt;\n</code></pre>\n\n<p>The problem occurs when trying to save a record <code>e.save</code></p>\n\n<pre><code>ActiveRecord::StatementInvalid (SQLite3::SQLException: no such table: \nmain.users: INSERT INTO \"frontend_events\" (\"user_id\", \n\"created_at\",\"updated_at\") VALUES (?, ?, ?))\n</code></pre>\n"}, {"tags": ["ruby", "method-missing"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 8897657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da3730d695601a2bbb25eb0c7e4aada?s=128&d=identicon&r=PG&f=1", "display_name": "not_user9123", "link": "https://stackoverflow.com/users/8897657/not-user9123"}, "edited": false, "score": 0, "creation_date": 1521045655, "post_id": 49268444, "comment_id": 85569167, "body": "Haha oops. Thanks for your help."}, {"owner": {"reputation": 374, "user_id": 399058, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a5402f4bcca02fbeab1ad3e8d514665d?s=128&d=identicon&r=PG", "display_name": "Tails", "link": "https://stackoverflow.com/users/399058/tails"}, "edited": false, "score": 0, "creation_date": 1536266658, "post_id": 49268444, "comment_id": 91373136, "body": "did the same thing after dong Python at work... thanks"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 4, "last_activity_date": 1520991004, "creation_date": 1520991004, "answer_id": 49268444, "question_id": 49268092, "link": "https://stackoverflow.com/questions/49268092/throw-custom-exception-in-method-missing-without-calling-new/49268444#49268444", "title": "Throw custom exception in `method_missing` without calling .new", "body": "<p>I don't think you can raise an exception by calling the exception class as a method like that. It can't find a method named <code>ArgumentError</code> so it tries calling your <code>method_missing</code> to see if you can handle it, then you try calling it again, and the cycle repeats (try it in a fresh <code>irb</code> session without your code loaded, you'll see it raises a <code>NoMethodError</code>).</p>\n\n<p>I believe the most popular way to throw an exception would be 2 parameters to <code>raise</code>:</p>\n\n<pre><code>raise ArgumentError, \"Here: #{symbol}\"\n</code></pre>\n\n<p>although if you want to be a bit more explicit you can also pass in an instance of the exception class:</p>\n\n<pre><code>raise ArgumentError.new(\"Here: #{symbol}\")\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 8897657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da3730d695601a2bbb25eb0c7e4aada?s=128&d=identicon&r=PG&f=1", "display_name": "not_user9123", "link": "https://stackoverflow.com/users/8897657/not-user9123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 49268444, "answer_count": 1, "score": 0, "last_activity_date": 1521045690, "creation_date": 1520988085, "last_edit_date": 1521045690, "question_id": 49268092, "link": "https://stackoverflow.com/questions/49268092/throw-custom-exception-in-method-missing-without-calling-new", "title": "Throw custom exception in `method_missing` without calling .new", "body": "<p>I'm redefining <code>method_missing</code> for a proxy-style object. I would like to be able to throw a custom <code>NoMethodError</code> (or some other error if <code>NoMethodError</code> is a particular problem, I used an <code>ArgumentError</code> below) to give the caller more information as to why the particular proxy object doesn't have the method.</p>\n\n<p>However, when I try to throw any exception from <code>method_missing</code> I get into a recursive loop that eventually results in <code>SystemStackError: stack level too deep</code>.</p>\n\n<p><strong>I would like to be able to do something like this:</strong></p>\n\n<pre><code>class X\n  define method_missing(symbol, *args)\n    raise ArgumentError(\"Here: #{symbol} \")\n  end\nend\n\nx = X.new\nx.a # Raise an ArgumentError, not a SystemStackError\n</code></pre>\n"}, {"tags": ["ruby", "xcode", "curl", "terminal", "homebrew"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1520989840, "post_id": 49268004, "comment_id": 85539961, "body": "Changing the owner of /usr/local to your current user doesn&#39;t work? <code>sudo chown -R &quot;$USER&quot;:admin &#47;usr&#47;local</code>"}, {"owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520991190, "post_id": 49268004, "comment_id": 85540272, "body": "When I try running that as the root user, I get this message:  <code>chown: \\u: illegal user name</code> and when I tried running that as the non-root admin user, I got a permission denied error: <code>chown: &#47;usr&#47;local: Operation not permitted</code>."}, {"owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520992180, "post_id": 49268004, "comment_id": 85540518, "body": "I was able to get homebrew installed by following these instructions: <code>cd &#47;usr&#47;local&#47;Homebrew</code>,        <code>git init</code>,       <code>git remote add origin https:&#47;&#47;github.com&#47;Homebrew&#47;brew</code>,    <code>git fetch --all</code>,      <code>git checkout -B master origin&#47;master</code>,     <code>cd &#47;usr&#47;local</code>,     <code>ln -s &#47;usr&#47;local&#47;Homebrew&#47;bin&#47;brew &#47;usr&#47;local&#47;bin</code>, and note I did this on my non-root admin user account.  I&#39;m not sure if it would&#39;ve worked on my root admin account.  source: <a href=\"https://github.com/Homebrew/homebrew-core/issues/5084#issuecomment-248834806\" rel=\"nofollow noreferrer\">github.com/Homebrew/homebrew-core/issues/&hellip;</a>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520992508, "post_id": 49268004, "comment_id": 85540601, "body": "Great!, you can create the detailed answer and accept it."}, {"owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520992657, "post_id": 49268004, "comment_id": 85540628, "body": "Thanks! Will do when it lets me (it says I have to wait for a day or something)."}], "answers": [{"comments": [{"owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "edited": false, "score": 0, "creation_date": 1520988727, "post_id": 49268064, "comment_id": 85539719, "body": "Thanks for your suggestion, but yes, I tried that, and I get the same error message.  When I run the xcode command again it says &quot;command line tools are already installed&quot;."}, {"owner": {"reputation": 42, "user_id": 6361895, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2f5eb2993d15286ad98e42a0bcf3a5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Lara", "link": "https://stackoverflow.com/users/6361895/daniel-lara"}, "reply_to_user": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "edited": false, "score": 0, "creation_date": 1520989404, "post_id": 49268064, "comment_id": 85539868, "body": "It seems that somehow you are not the admin of the system. You can try sudo su and then the ruby command to switch to root user before issuing the command or simply check that you are the admin in the system settings. It seems that Homebrew issued a warning in other versions: &quot;set your user to be an Administrator in System Preferences or `su&#39; to a non-root user with Administrator privileges&quot;. See: <a href=\"https://teamtreehouse.com/community/what-is-the-correct-way-to-install-homebrew\" rel=\"nofollow noreferrer\">teamtreehouse.com/community/&hellip;</a>"}, {"owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "edited": false, "score": 0, "creation_date": 1520989683, "post_id": 49268064, "comment_id": 85539915, "body": "When I open System Preferences and look under the &quot;Users &amp; Groups&quot; menu item, it says the &quot;Current User&quot; is myself and it says &quot;Admin&quot; under that.  It&#39;s probable that I&#39;m the &quot;root&quot; user, but I&#39;m not sure how to switch to a non-root user or how to use &quot;su&quot;."}, {"owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "edited": false, "score": 0, "creation_date": 1520990895, "post_id": 49268064, "comment_id": 85540203, "body": "I created another user with Admin privileges and logged out of my root account, then logged back in as this other user.  I was able to run the homebrew installation command, but it quit midway through with the below error: /usr/local/homebrew/.git: Permission denied Failed during: git init -q"}, {"owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "edited": false, "score": 0, "creation_date": 1520993924, "post_id": 49268064, "comment_id": 85540881, "body": "Do you have git installed? run <code>git --version</code> whats the output?"}], "tags": [], "owner": {"reputation": 42, "user_id": 6361895, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2f5eb2993d15286ad98e42a0bcf3a5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Lara", "link": "https://stackoverflow.com/users/6361895/daniel-lara"}, "is_accepted": false, "score": 0, "last_activity_date": 1520987811, "creation_date": 1520987811, "answer_id": 49268064, "question_id": 49268004, "link": "https://stackoverflow.com/questions/49268004/cant-install-homebrew/49268064#49268064", "title": "Can&#39;t install homebrew", "body": "<p>Have you tried installing Xcode first? </p>\n\n<pre><code>xcode-select --install\nruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n</code></pre>\n\n<p>Then see if the installation was correct with \"brew doctor\" </p>\n\n<p>Source: <a href=\"https://www.howtogeek.com/211541/homebrew-for-os-x-easily-installs-desktop-apps-and-terminal-utilities/\" rel=\"nofollow noreferrer\">https://www.howtogeek.com/211541/homebrew-for-os-x-easily-installs-desktop-apps-and-terminal-utilities/</a></p>\n"}, {"tags": [], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "is_accepted": false, "score": 0, "last_activity_date": 1520994254, "creation_date": 1520994254, "answer_id": 49268844, "question_id": 49268004, "link": "https://stackoverflow.com/questions/49268004/cant-install-homebrew/49268844#49268844", "title": "Can&#39;t install homebrew", "body": "<p>Uninstall and reinstall reinstall Homebrew.\nRun <code>sudo chown -R $USER /usr/local</code> and then reinstall</p>\n"}, {"comments": [{"owner": {"reputation": 406, "user_id": 3245621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b166b5c91799be3ceab327979c94e69?s=128&d=identicon&r=PG&f=1", "display_name": "Janet", "link": "https://stackoverflow.com/users/3245621/janet"}, "edited": false, "score": 0, "creation_date": 1555554437, "post_id": 49282638, "comment_id": 98154119, "body": "I was created as a standard user and could not run this command:  /usr/bin/ruby -e &quot;$(curl -fsSL <a href=\"https://raw.githubusercontent.com/Homebrew/install/master/install\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/Homebrew/install/master/install</a>)&quot;      so I logged out, logged in using admin username and password and made my account admin, logged back in and reran the command, it worked."}, {"owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "reply_to_user": {"reputation": 406, "user_id": 3245621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b166b5c91799be3ceab327979c94e69?s=128&d=identicon&r=PG&f=1", "display_name": "Janet", "link": "https://stackoverflow.com/users/3245621/janet"}, "edited": false, "score": 0, "creation_date": 1555608817, "post_id": 49282638, "comment_id": 98178853, "body": "Yeah, as long as you&#39;re not the root user admin and just a non-root user admin, that is what worked for me, though I wonder if things have changed since this was a while ago."}, {"owner": {"reputation": 192, "user_id": 6266336, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1191156864229842/picture?type=large", "display_name": "Diana", "link": "https://stackoverflow.com/users/6266336/diana"}, "edited": false, "score": 0, "creation_date": 1588248536, "post_id": 49282638, "comment_id": 108829239, "body": "just for those who are a bit slow like me: make the directory <code>mkdir &#47;usr&#47;loca&#47;Homebrew</code>, probably you will need to put <code>sudo</code> before it"}], "tags": [], "owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "is_accepted": true, "score": 11, "last_activity_date": 1521043763, "creation_date": 1521043763, "answer_id": 49282638, "question_id": 49268004, "link": "https://stackoverflow.com/questions/49268004/cant-install-homebrew/49282638#49282638", "title": "Can&#39;t install homebrew", "body": "<p>I was able to install Homebrew using the following steps.  Note I did this on a non-root admin user account.  I had to create this user account separately and give it admin access just to do this.  Once I logged out of my root account and logged into the admin non-root account, I typed the following commands into terminal:</p>\n\n<p><code>\nxcode-select --install\ncd /usr/local/Homebrew\ngit init\ngit remote add origin https://github.com/Homebrew/brew\ngit fetch --all\ngit checkout -B master origin/master\ncd /usr/local\nln -s /usr/local/Homebrew/bin/brew /usr/local/bin\n</code></p>\n\n<p>I found most of these steps here:</p>\n\n<p><a href=\"https://github.com/Homebrew/homebrew-core/issues/5084#issuecomment-248834806\" rel=\"noreferrer\">https://github.com/Homebrew/homebrew-core/issues/5084#issuecomment-248834806</a></p>\n\n<p>Hope this helps someone else.</p>\n"}], "owner": {"reputation": 3011, "user_id": 3089840, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BSs2k.png?s=128&g=1", "display_name": "user3089840", "link": "https://stackoverflow.com/users/3089840/user3089840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9428, "favorite_count": 6, "accepted_answer_id": 49282638, "answer_count": 3, "score": 5, "last_activity_date": 1610942680, "creation_date": 1520987388, "last_edit_date": 1520990976, "question_id": 49268004, "link": "https://stackoverflow.com/questions/49268004/cant-install-homebrew", "title": "Can&#39;t install homebrew", "body": "<p>I have a fairly new macbook pro and I'm simply trying to install homebrew according to the directions on their site:</p>\n\n<p><code>/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"</code></p>\n\n<p>However, when I run this I get the following output:</p>\n\n<p><code>The user \\u cannot be found\nThere was an unknown error.\nThis script requires the user \\u to be an Administrator.\n</code></p>\n\n<p>My macbook only has 1 user, which is me, the Administrator.  That's who I'm logged in as on the computer.  </p>\n\n<p>Another thing I've tried is running the command with <code>sudo</code>, in which case I get the following message:</p>\n\n<p><code>Don't run this as root!</code></p>\n\n<p>Another thing I've tried is downloading <code>Command Line Tools (CLT) for Xcode: xcode-select --install</code> as I saw this suggested on Homebrew's site and elsewhere online. </p>\n\n<p>After creating a new user with \"Admin\" privileges apart from my root account, the homebrew install command above started to run but then quit with the following error:</p>\n\n<p><code>/usr/local/homebrew/.git: Permission denied\nFailed during: git init -q\n</code></p>\n\n<p>At this point I'm stuck and not sure what to do.</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "edited": false, "score": 4, "creation_date": 1521006478, "post_id": 49267951, "comment_id": 85543980, "body": "the conflict means you already have <code>Bundler</code> installed.. You can try proceeding with <code>gem install jekyll</code>"}, {"owner": {"reputation": 181, "user_id": 4877535, "user_type": "registered", "profile_image": "https://graph.facebook.com/986133591406090/picture?type=large", "display_name": "Jeffrey Wang", "link": "https://stackoverflow.com/users/4877535/jeffrey-wang"}, "reply_to_user": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "edited": false, "score": 0, "creation_date": 1521253522, "post_id": 49267951, "comment_id": 85665828, "body": "Thanks a lot!! Got it."}], "answers": [{"tags": [], "owner": {"reputation": 1084, "user_id": 2076090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2542587ae5680cdf11a63da299ba4092?s=128&d=identicon&r=PG", "display_name": "belindanju", "link": "https://stackoverflow.com/users/2076090/belindanju"}, "is_accepted": false, "score": 5, "last_activity_date": 1539305636, "creation_date": 1539305636, "answer_id": 52770741, "question_id": 49267951, "link": "https://stackoverflow.com/questions/49267951/bundlers-executable-bundle-conflicts-with-usr-local-bin-bundle-overwrite-the/52770741#52770741", "title": "bundler&#39;s executable &quot;bundle&quot; conflicts with /usr/local/bin/bundle Overwrite the executable?", "body": "<p>In my case, I have to overwrite both <code>/usr/local/bin/bundle</code>  and <code>/usr/local/bin/bundler</code> in order to successfully installed bundler-1.16.6. Otherwise, when running <code>jekyll new websitedir</code>, an error with the following message occurs. </p>\n\n<blockquote>\n  <p>Bundler: ruby: No such file or directory -- /usr/local/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/exe/bundle (LoadError)</p>\n</blockquote>\n\n<p>In most cases, I think it is safe to overwrite. But it is always good to check what you are actually overwriting. For example, running <code>ls -alh /usr/local/bin/bundle</code> in the terminal gives us the following output. Thus, it is safe to overwrite. </p>\n\n<blockquote>\n  <p>/usr/local/bin/bundle -> ../Cellar/ruby/2.5.1/libexec/gembin/bundle</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 8720250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5274a92982f2d63d8edde7bbbac269b?s=128&d=identicon&r=PG&f=1", "display_name": "Gail Parsloe", "link": "https://stackoverflow.com/users/8720250/gail-parsloe"}, "is_accepted": false, "score": 1, "last_activity_date": 1547899808, "last_edit_date": 1547899808, "creation_date": 1547899443, "answer_id": 54266895, "question_id": 49267951, "link": "https://stackoverflow.com/questions/49267951/bundlers-executable-bundle-conflicts-with-usr-local-bin-bundle-overwrite-the/54266895#54266895", "title": "bundler&#39;s executable &quot;bundle&quot; conflicts with /usr/local/bin/bundle Overwrite the executable?", "body": "<p>This answer is not related to Jekyll, but I'm adding it here because I got a similar error when I ran <code> > gem install bundler </code>.</p>\n\n<p>Message I saw: bundler's executable \"bundle\" conflicts with C:/Ruby25-x64/bin/bundle\nOverwrite the executable? (I chose 'n'.)</p>\n\n<p>As ashmaroli wrote above, <strong>the conflict meant I already had Bundler installed</strong>.</p>\n\n<p><strong>How to check if Bundler is installed:</strong> \n<code> > bundler --version </code></p>\n\n<p>If it returns a version, it's installed. Bundler version 1.17.3 is what I get when I run that command.</p>\n\n<p><strong>The action I took:</strong> I chose not to overwrite the executable. I just needed Bundler installed and didn't realize that it was already.</p>\n"}], "owner": {"reputation": 181, "user_id": 4877535, "user_type": "registered", "profile_image": "https://graph.facebook.com/986133591406090/picture?type=large", "display_name": "Jeffrey Wang", "link": "https://stackoverflow.com/users/4877535/jeffrey-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5130, "favorite_count": 1, "answer_count": 2, "score": 15, "last_activity_date": 1547899808, "creation_date": 1520986900, "question_id": 49267951, "link": "https://stackoverflow.com/questions/49267951/bundlers-executable-bundle-conflicts-with-usr-local-bin-bundle-overwrite-the", "title": "bundler&#39;s executable &quot;bundle&quot; conflicts with /usr/local/bin/bundle Overwrite the executable?", "body": "<p>When I install jekyll bundle and entering the command of <code>gem install jekyll bundler</code>.\nThe terminal pop up the message of bundler's executable \"bundle\" conflicts with /usr/local/bin/bundle</p>\n\n<p>Overwrite the executable?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224814cafeed6bd955553ddcd95deca6?s=128&d=identicon&r=PG&f=1", "display_name": "zeus54", "link": "https://stackoverflow.com/users/6875652/zeus54"}, "edited": false, "score": 0, "creation_date": 1520995281, "post_id": 49267394, "comment_id": 85541160, "body": "I just tested this method, and while it is much easier to read, it slows down the execution of my program by ~9%"}], "tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": false, "score": 0, "last_activity_date": 1520983848, "last_edit_date": 1520983848, "creation_date": 1520983175, "answer_id": 49267394, "question_id": 49267279, "link": "https://stackoverflow.com/questions/49267279/fastest-way-to-parse-this-string-in-ruby/49267394#49267394", "title": "Fastest Way to Parse this String in Ruby", "body": "<p>You can use regex inside your <code>#split</code> method to achieve the same result:</p>\n\n<pre><code>string = \"Hello&gt;World(25)\"\nresult = string.split(/[&gt;,()]/)\nresult[-1] = result[-1].to_i\n\nresult\n# =&gt; [\"Hello\", \"World\", 25]\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224814cafeed6bd955553ddcd95deca6?s=128&d=identicon&r=PG&f=1", "display_name": "zeus54", "link": "https://stackoverflow.com/users/6875652/zeus54"}, "edited": false, "score": 1, "creation_date": 1520995250, "post_id": 49267578, "comment_id": 85541148, "body": "I just tested this method, and while it is much easier to read, it slows down the execution of my program by ~12%"}], "tags": [], "owner": {"reputation": 1331, "user_id": 2201664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dfd512fac818e9180a4b851a714206e2?s=128&d=identicon&r=PG", "display_name": "Roma149", "link": "https://stackoverflow.com/users/2201664/roma149"}, "is_accepted": false, "score": 1, "last_activity_date": 1520984161, "creation_date": 1520984161, "answer_id": 49267578, "question_id": 49267279, "link": "https://stackoverflow.com/questions/49267279/fastest-way-to-parse-this-string-in-ruby/49267578#49267578", "title": "Fastest Way to Parse this String in Ruby", "body": "<p>You could use regex capture groups to obtain these values:</p>\n\n<pre><code>str = \"Hello&gt;World(25)\"\ns1, s2, i = str.match(/(\\w+)&gt;(\\w+)\\((\\d+)\\)/i).captures\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224814cafeed6bd955553ddcd95deca6?s=128&d=identicon&r=PG&f=1", "display_name": "zeus54", "link": "https://stackoverflow.com/users/6875652/zeus54"}, "edited": false, "score": 0, "creation_date": 1520999503, "post_id": 49269373, "comment_id": 85542119, "body": "Way #1 worked perfectly, chopped off ~5ms off of my average runtime. Way #2 added ~15ms to it however. Either way, way #1 answered my question perfectly. Thanks."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1520998622, "creation_date": 1520998622, "answer_id": 49269373, "question_id": 49267279, "link": "https://stackoverflow.com/questions/49267279/fastest-way-to-parse-this-string-in-ruby/49269373#49269373", "title": "Fastest Way to Parse this String in Ruby", "body": "<p>If you want speed over readability, you're probably really close to the fastest you're going to get. I was able to shave a little bit of time off of your implementation by passing the optional <code>limit</code> parameter to <code>split</code> and omitting the <code>chomp(')')</code> which isn't needed:</p>\n\n<pre><code>  # Way #1\n  str = str.split('&gt;', 2)\n  newStr = str[1].split('(', 2)\n  str[1] = newStr[0]\n  str[2] = newStr[1].to_i\n</code></pre>\n\n<p>or, at right about the same speed (it's faster in some runs, slower in others):</p>\n\n<pre><code>  # Way #2\n  str = str.split(/[&gt;(]/, 3)\n  str[2] = str[2].to_i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1521046903, "post_id": 49271530, "comment_id": 85570038, "body": "This is indeed the fastest way"}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 2, "last_activity_date": 1521011011, "creation_date": 1521011011, "answer_id": 49271530, "question_id": 49267279, "link": "https://stackoverflow.com/questions/49267279/fastest-way-to-parse-this-string-in-ruby/49271530#49271530", "title": "Fastest Way to Parse this String in Ruby", "body": "<p>String <a href=\"https://apidock.com/ruby/String/partition\" rel=\"nofollow noreferrer\">partition method</a> is even faster than <code>split</code> method.</p>\n\n<pre><code>str = \"Hello&gt;World(25)\"\n\na, _, b = str.partition('&gt;')\nb, _, c = b.partition('(')\nc = c.to_i\n\nputs a, b, c\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224814cafeed6bd955553ddcd95deca6?s=128&d=identicon&r=PG&f=1", "display_name": "zeus54", "link": "https://stackoverflow.com/users/6875652/zeus54"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 49269373, "answer_count": 4, "score": 0, "last_activity_date": 1521011011, "creation_date": 1520982384, "question_id": 49267279, "link": "https://stackoverflow.com/questions/49267279/fastest-way-to-parse-this-string-in-ruby", "title": "Fastest Way to Parse this String in Ruby", "body": "<p>I am currently looking for the fastest way to parse a string in Ruby. The string has the format:</p>\n\n<blockquote>\n  <p>\"#{String1}>#{String2}(#{Integer})\", for example \"Hello>World(25)\"</p>\n</blockquote>\n\n<p>and I am looking to retrieve the values of String1, String2, and Integer out of it. My current way of doing it is just</p>\n\n<pre><code>s1 = \"Hello\"\ns2 = \"World\"\ni = 25\nstr = \"#{s1}&gt;#{s2}(#{i})\"\nstr = str.split('&gt;')\nnewStr = str[1].split('(')\nstr[1] = newStr[0]\nstr[2] = newStr[1].chomp(')').to_i\nprint(str)   # =&gt; [\"Hello\", \"World\", 25]`\n</code></pre>\n\n<p>I am looking for any way faster than this to speed up my program. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520980206, "post_id": 49266714, "comment_id": 85537154, "body": "Since you&#39;re calling <code>uniq</code> on the fetch it shouldn&#39;t be necessary to check that your local array includes the thing. They&#39;re unique already."}, {"owner": {"reputation": 135, "user_id": 7858350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2def96ee1bc978089e10efbda103e8a?s=128&d=identicon&r=PG&f=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7858350/david-s"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520980481, "post_id": 49266714, "comment_id": 85537255, "body": "There may be duplicate values in each column. So uniq.pluck(:reactivity_1) would be Human, Rat, Mouse. uniq.pluck(:reactivity_2) would be Human, Chimpanzee. I want to avoid pushing Human to the array twice."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520980710, "post_id": 49266714, "comment_id": 85537338, "body": "It sounds like you&#39;ve violated the <a href=\"http://en.wikipedia.org/wiki/Zero_one_infinity_rule\" rel=\"nofollow noreferrer\">Zero, One or Infinity Rule</a> of  <a href=\"http://en.wikipedia.org/wiki/Database_normalization\" rel=\"nofollow noreferrer\">database normalization</a> if those are your actual column names. A proper relational structure would help here, where that record <code>has_many :reactivities</code>. In any case, <code>react &lt;&lt; r</code> and then later <code>react.flatten.uniq</code> can handle it."}, {"owner": {"reputation": 135, "user_id": 7858350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2def96ee1bc978089e10efbda103e8a?s=128&d=identicon&r=PG&f=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7858350/david-s"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520982070, "post_id": 49266714, "comment_id": 85537808, "body": "The supplied data set violates normalization. What I&#39;m attempting is to do is parse a flat, unrelational data set, into a relational structure. Unfortunately the supplied data is a complete mess."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1521043931, "post_id": 49266714, "comment_id": 85567977, "body": "Hopefully fixing it isn&#39;t too painful because this sounds pretty awful. The <code>flatten.uniq</code> approach is pretty easy if you&#39;re not dealing with tons of data."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520980015, "post_id": 49266780, "comment_id": 85537100, "body": "You can also use <code>%i[ ... ]</code> for long lists of symbols, like <code>%[ reactivity1 reactivity_2 ]</code> etc."}, {"owner": {"reputation": 135, "user_id": 7858350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2def96ee1bc978089e10efbda103e8a?s=128&d=identicon&r=PG&f=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7858350/david-s"}, "edited": false, "score": 0, "creation_date": 1520980130, "post_id": 49266780, "comment_id": 85537127, "body": "Derp. Thanks much! That worked. I&#39;m trying to populate a Join table. I&#39;ve been supplied a spreadsheet with columns of reactivity_1, reactivity_2, etc. and I need to pull out the unique values to populate a reference table, and then populate the Join table with the reactivity ID and the Item ID."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1520981547, "last_edit_date": 1520981547, "creation_date": 1520979768, "answer_id": 49266780, "question_id": 49266714, "link": "https://stackoverflow.com/questions/49266714/iterate-through-array-of-column-names-to-pass-to-uniq-pluck/49266780#49266780", "title": "Iterate through array of column names to pass to uniq.pluck()?", "body": "<p>You will need to make the column names strings or symbols, like this Ruby thinks it is a local varaible or method.</p>\n\n<pre><code>react = Set.new\nfields = [:reactivity_1, :reactivity_2, :reactivity_3, :reactivity_4]\nfields.each do |field|\n  puts \"Parsing #{field}\"\n  Raw.all.uniq.pluck(field).each do |r|\n    react &lt;&lt; r\n  end\nend\n</code></pre>\n\n<p>If you want to make sure that a collection does not contain duplicate, you can use a <code>Set</code>:</p>\n\n<pre><code>require \"set\"\nset = Set.new\nset &lt;&lt; \"foo\"\nset &lt;&lt; \"bar\"\nset &lt;&lt; \"bar\"\nputs set.size #&gt; 2\n</code></pre>\n\n<p>I've rewritten your code sample to use <code>Set</code>.</p>\n\n<p>Can you describe what you are trying to achieve? Perhaps there is an easier way to get the data out of the DB.</p>\n"}], "owner": {"reputation": 135, "user_id": 7858350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2def96ee1bc978089e10efbda103e8a?s=128&d=identicon&r=PG&f=1", "display_name": "David S", "link": "https://stackoverflow.com/users/7858350/david-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 49266780, "answer_count": 1, "score": 0, "last_activity_date": 1520981547, "creation_date": 1520979351, "last_edit_date": 1520979973, "question_id": 49266714, "link": "https://stackoverflow.com/questions/49266714/iterate-through-array-of-column-names-to-pass-to-uniq-pluck", "title": "Iterate through array of column names to pass to uniq.pluck()?", "body": "<p>I have multiple columns I need to pull unique values from and compile an array of each unique value. Using uniq.pluck(:column_name) works, but how do I iterate over an array of column names? </p>\n\n<pre><code>react = []\nfields = [reactivity_1, reactivity_2, reactivity_3, reactivity_4]\nfields.each do |field|\n  puts \"Parsing #{field}\"\n  Raw.all.uniq.pluck(field).each do |r|\n    unless react.include? r\n      puts \"Adding #{r} to Array.\"\n      react &lt;&lt; r\n    else\n      puts \"#{r} Exists.\"\n    end\n  end\nend\n\nError:\nNameError: undefined local variable or method `reactivity_1' for main:Object\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "html"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9488069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XQUZz1xRPkM/AAAAAAAAAAI/AAAAAAAADVc/N7_eIOi7MD8/photo.jpg?sz=128", "display_name": "Diane", "link": "https://stackoverflow.com/users/9488069/diane"}, "edited": false, "score": 0, "creation_date": 1520983087, "post_id": 49266370, "comment_id": 85538145, "body": "I&#39;m going to now go and beat my head against the wall for thinking this was so much harder than it was..."}, {"owner": {"reputation": 3, "user_id": 9488069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XQUZz1xRPkM/AAAAAAAAAAI/AAAAAAAADVc/N7_eIOi7MD8/photo.jpg?sz=128", "display_name": "Diane", "link": "https://stackoverflow.com/users/9488069/diane"}, "edited": false, "score": 0, "creation_date": 1521032205, "post_id": 49266370, "comment_id": 85559109, "body": "Sorry. Thought I did. Thanks."}, {"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "reply_to_user": {"reputation": 3, "user_id": 9488069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XQUZz1xRPkM/AAAAAAAAAAI/AAAAAAAADVc/N7_eIOi7MD8/photo.jpg?sz=128", "display_name": "Diane", "link": "https://stackoverflow.com/users/9488069/diane"}, "edited": false, "score": 0, "creation_date": 1550441054, "post_id": 49266370, "comment_id": 96258647, "body": "@Diane, sorry for the late reaction on your first comment, I hope you did not beat your head against the wall, this happens to the best of us, just don&#39;t give up and keep facing with problems :)"}], "tags": [], "owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1520977621, "creation_date": 1520977621, "answer_id": 49266370, "question_id": 49266278, "link": "https://stackoverflow.com/questions/49266278/clearing-search-text-field-tag-in-rendered-form-on-submit/49266370#49266370", "title": "Clearing Search text_field_tag In Rendered Form on Submit", "body": "<p>Actually you are the one setting this value in your form. You can set it to nil, like so;</p>\n\n<pre><code>&lt;%= text_field_tag :search, nil, id: 'search_field', placeholder: \"Search\", :required =&gt; 'required'%&gt;\n</code></pre>\n\n<p>The documentation for the text_field_tag can be found <a href=\"http://api.rubyonrails.org/v5.0/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9488069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XQUZz1xRPkM/AAAAAAAAAAI/AAAAAAAADVc/N7_eIOi7MD8/photo.jpg?sz=128", "display_name": "Diane", "link": "https://stackoverflow.com/users/9488069/diane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 49266370, "answer_count": 1, "score": 0, "last_activity_date": 1520977621, "creation_date": 1520977190, "question_id": 49266278, "link": "https://stackoverflow.com/questions/49266278/clearing-search-text-field-tag-in-rendered-form-on-submit", "title": "Clearing Search text_field_tag In Rendered Form on Submit", "body": "<p>I am using Rails 5.1 to create a simple search that uses a single text field in a form that gets data from a SQLITE3 DB and returns the data in a table on a new HTML page. The search form is a rendered form which passes the value of the search to the controller</p>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;%= render 'search', foo: @foo %&gt;\n</code></pre>\n\n<p><strong>_search.html.erb</strong></p>\n\n<pre><code>&lt;div&gt;\n    &lt;%= form_tag(search_home_index_path, :method =&gt; 'get', id: 'search_form') do %&gt;\n        &lt;%= text_field_tag :search, params[:search], id: 'search_field', placeholder: \"Search\", :required =&gt; 'required'%&gt;\n        &lt;%= submit_tag(\"Search\", :class =&gt; \"button\", :name =&gt; nil) %&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>application_record.rb</strong></p>\n\n<pre><code>def self.search(search)\n    where(\"(foo) LIKE ?\", \"%#{search}%\")\nend\n</code></pre>\n\n<p><strong>home_controller.rb</strong></p>\n\n<pre><code>def search\n   if params[:search]\n   @foo = Foo.search(params[:search]).order(\"id ASC\")\n       else\n   @foo = Foo.all.order(\"id ASC\")\n   end\nend\n</code></pre>\n\n<p>The search is working fine and returning values. However, (and I believe it's because I am rendering the same form on multiple pages), when the search returns, the text_field_tag value retains the search criteria entered on the original page and populates that same value in the text_field_tag on the new page. I have attempted to use JavaScript to clear the text_field_tag by using</p>\n\n<pre><code>document.getElementById('search_field').value='';\n</code></pre>\n\n<p>as a function in the </p>\n\n<pre><code>&lt;body onload...\n</code></pre>\n\n<p>but it is not working - the text_field_tag retains the value. I have also tried using</p>\n\n<pre><code>document.getElementById('search_form').reset();\n</code></pre>\n\n<p>but this ends up sending a blank value in my search variable and returns all the items in the database.</p>\n\n<p>I have seen some references to placing the code for the field value in a Coffee script, but I'm not sure how to implement this (I've been coding Ruby for a grand total of about 2 months now).</p>\n\n<p>Any suggestions would be appreciated!</p>\n"}, {"tags": ["ruby", "performance", "parsing", "lookup"], "comments": [{"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "edited": false, "score": 0, "creation_date": 1520976590, "post_id": 49265916, "comment_id": 85535676, "body": "You can put all the records into one sorted array and whenever you want to search in this array, you can use binary search algorithm to search the number quickly. For the question, holding the entries as arrays or objects; array in ruby is already object, the size of the objects you will create may vary depending on your needs but actually you can check the size of it with <code>require &#39;objspace&#39;; ObjectSpace.memsize_of(object)</code>. I recommend you to implement both versions and check the memory usage on your own. Also you may consider using hash(dictionary) to avoid the complexity of binary search."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1520978132, "post_id": 49265916, "comment_id": 85536338, "body": "This use-case is where databases shine. If you don&#39;t want to install a DB server (mysql/pg, etc.), then at least use an embedded sqlite. Why reinvent a 50 years old technology?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "edited": false, "score": 1, "creation_date": 1520978333, "post_id": 49265916, "comment_id": 85536441, "body": "@FooBarZoo: finding multiple entries with binary search is unnecessarily involved. What they need is a B-Tree or similar."}, {"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520979946, "post_id": 49265916, "comment_id": 85537072, "body": "@SergioTulentsev yes, in that case you can use another data structure which makes it fast to access to the entry or you can still use sorted array with unique pointers to related set of records."}], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 2201664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dfd512fac818e9180a4b851a714206e2?s=128&d=identicon&r=PG", "display_name": "Roma149", "link": "https://stackoverflow.com/users/2201664/roma149"}, "is_accepted": false, "score": 2, "last_activity_date": 1520977548, "creation_date": 1520977548, "answer_id": 49266359, "question_id": 49265916, "link": "https://stackoverflow.com/questions/49265916/ruby-storing-data-for-queries/49266359#49266359", "title": "Ruby storing data for queries", "body": "<p>If you only want to make queries for the number the call originated from, you could store the data in a hash where the keys are the \"call from\" numbers and the value is an array, or another hash, containing the rest of the data. For example:</p>\n\n<pre><code>{ '4813243948': { call_to: 1234433948, duration: 1.3, line_type: 'Type2' }, ... }\n</code></pre>\n\n<p>If the dataset is very large, or you need more complex queries, it might be better to store it in a database and just query it directly.</p>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "edited": false, "score": 0, "creation_date": 1521125681, "post_id": 49266696, "comment_id": 85607146, "body": "This did seem to work and isnt too slow.. gives me a mvp without needing a database.. Any way to take the sum of all the lengths after selecting a specific number? Thanks!"}, {"owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "edited": false, "score": 0, "creation_date": 1521135625, "post_id": 49266696, "comment_id": 85614078, "body": "Also how would I move this data into a B-Tree. You dont have to provide code but what would be the steps you would take with this dataset and search objective"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1520979255, "creation_date": 1520979255, "answer_id": 49266696, "question_id": 49265916, "link": "https://stackoverflow.com/questions/49265916/ruby-storing-data-for-queries/49266696#49266696", "title": "Ruby storing data for queries", "body": "<blockquote>\n  <p>I have a string\n  <code>\n  \"4813243948,1234433948,1.3,Type2\n   1234433948,4813243948,1.3,Type1</code></p>\n</blockquote>\n\n<p>This looks like a CSV. If you slap some headers on top, you can parse it into an array of hashes.</p>\n\n<pre><code>str = \"4813243948,1234433948,1.3,Type2\n1234433948,4813243948,1.3,Type1\"\n\nrequire 'csv'\n\ncalls = CSV.parse(str, headers: %w[from to length type], header_converters: :symbol).map(&amp;:to_h) \n# =&gt; [{:from=&gt;\"4813243948\", :to=&gt;\"1234433948\", :length=&gt;\"1.3\", :type=&gt;\"Type2\"}, \n#     {:from=&gt;\"1234433948\", :to=&gt;\"4813243948\", :length=&gt;\"1.3\", :type=&gt;\"Type1\"}]\n</code></pre>\n\n<p>This is essentially the same as your original string, only it trades some memory for ease of access. You can now \"query\" this dataset like this:</p>\n\n<pre><code>calls.select{ |c| c[:from] == '4813243948' }\n</code></pre>\n\n<p>And then aggregate for presentation however you wish.</p>\n\n<p>Naturally, searching through this array takes linear time, so if you have millions of calls you might want to organize them in a more efficient search structure (like a B-Tree) or move the whole dataset to a real database.</p>\n"}], "owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 49266696, "answer_count": 2, "score": 1, "last_activity_date": 1520979255, "creation_date": 1520975418, "question_id": 49265916, "link": "https://stackoverflow.com/questions/49265916/ruby-storing-data-for-queries", "title": "Ruby storing data for queries", "body": "<p>I have a string </p>\n\n<pre><code>\"4813243948,1234433948,1.3,Type2\n 1234433948,4813243948,1.3,Type1\n 1234433948,6345635414,1.3,Type1\n 4813243948,2435677524,1.3,Type2\n 4813243948,5245654367,1.3,Type2\n 2345243524,6754846756,1.3,Type1\n 1234512345,2345124354,1.3,Type1\n 1342534332,4565346546,1.3,Type1\"\n</code></pre>\n\n<p>This is telephone outbound call data where each new line represents a new phone call. \n(Call From, Call To, Duration, Line Type)\nI want to save this data in a way that allows me to query a specific number and get a string output of the number, its type, its total minutes used, and all the calls that it made (outbound calls). I just want to do this in a single ruby file. </p>\n\n<p>Thus typing in this </p>\n\n<pre><code>4813243948\n</code></pre>\n\n<p>Returns</p>\n\n<pre><code>4813243948, Type 2, 3.9 Minutes total\n 1234433948, 1.3\n 2435677524, 1.3\n 5245654367, 1.3\n</code></pre>\n\n<p>I am wondering if I should try to store values in arrays, or create a custom class and make each number an object of a class then append the calls to each number.. not sure how to do the class method. Having a different array for each number seems like it would get cluttered as there are thousands of numbers and millions of calls. Of course, the provided input string is a very small portion of the real source.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xor"], "comments": [{"owner": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "reply_to_user": {"reputation": 167, "user_id": 8641969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639367cddcc673c2b9e73beaca864381?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus Christiansen", "link": "https://stackoverflow.com/users/8641969/marcus-christiansen"}, "edited": false, "score": 0, "creation_date": 1520972000, "post_id": 49264845, "comment_id": 85533529, "body": "I do not want to output hex number. Instead, I intend to output a ASCII character."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1520972184, "post_id": 49264845, "comment_id": 85533638, "body": "The code difference between printing the hex number and printing the ASCII character is very small.  For that reason, and because SO is not a code-writing service, I&#39;ll second the nominated exemplar."}, {"owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "edited": false, "score": 0, "creation_date": 1520972987, "post_id": 49264845, "comment_id": 85534037, "body": "<a href=\"https://stackoverflow.com/questions/348991/xor-of-string-in-ruby\">stackoverflow.com/questions/348991/xor-of-string-in-ruby</a> use <code>.bytes</code> or <code>.each_byte</code> instead of <code>.chars</code>."}], "owner": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "closed_date": 1520972192, "answer_count": 0, "score": 1, "last_activity_date": 1520970989, "creation_date": 1520970989, "question_id": 49264845, "link": "https://stackoverflow.com/questions/49264845/ruby-xor-each-char-in-a-string", "closed_reason": "Duplicate", "title": "Ruby: XOR each char in a string", "body": "<p>In C++, I can use the following code to implement the functions.</p>\n\n<pre><code>char result=0;\nfor(char c:s)\n   result^=c;\n</code></pre>\n\n<p>However, when I try to implement this in Ruby, it fails.</p>\n\n<pre><code>result=0\ns.chars.each do |c|\n   result^=c\nend\n</code></pre>\n\n<p>How should I XOR each char in a string in Ruby? Thanks very much!</p>\n"}, {"tags": ["ruby", "class", "methods"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9406374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_517dU3rnXc/AAAAAAAAAAI/AAAAAAAAE2E/VRYXHgDJDvY/photo.jpg?sz=128", "display_name": "Alexander Keefe", "link": "https://stackoverflow.com/users/9406374/alexander-keefe"}, "edited": false, "score": 0, "creation_date": 1521037177, "post_id": 49264776, "comment_id": 85562849, "body": "thanks, looks like some basic mistakes.  I tried editing the code and it&#39;s running now, but the output is just a bunch of numbers. They aren&#39;t in the [idx, idx2] pair array format I&#39;m trying to specify. Any thoughts on what I&#39;m doing wrong? Thanks again."}, {"owner": {"reputation": 167, "user_id": 8641969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639367cddcc673c2b9e73beaca864381?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus Christiansen", "link": "https://stackoverflow.com/users/8641969/marcus-christiansen"}, "reply_to_user": {"reputation": 13, "user_id": 9406374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_517dU3rnXc/AAAAAAAAAAI/AAAAAAAAE2E/VRYXHgDJDvY/photo.jpg?sz=128", "display_name": "Alexander Keefe", "link": "https://stackoverflow.com/users/9406374/alexander-keefe"}, "edited": false, "score": 0, "creation_date": 1521038532, "post_id": 49264776, "comment_id": 85563777, "body": "That is because you are using <code>puts</code> to print your output. <code>puts</code> adds a new line to the end of each argument if there is not one already. You can print your output in your desired format if you change <code>puts</code> to <code>p</code> or <code>print</code>, which does not add a new line. This should get you the format that you want. If you want to customize your output, I would suggest iterating through the <code>pairs_array</code> and printing out each pair how you want them to be displayed"}, {"owner": {"reputation": 13, "user_id": 9406374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_517dU3rnXc/AAAAAAAAAAI/AAAAAAAAE2E/VRYXHgDJDvY/photo.jpg?sz=128", "display_name": "Alexander Keefe", "link": "https://stackoverflow.com/users/9406374/alexander-keefe"}, "edited": false, "score": 0, "creation_date": 1521043324, "post_id": 49264776, "comment_id": 85567509, "body": "oh, duh. Thanks!"}], "tags": [], "owner": {"reputation": 167, "user_id": 8641969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639367cddcc673c2b9e73beaca864381?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus Christiansen", "link": "https://stackoverflow.com/users/8641969/marcus-christiansen"}, "is_accepted": false, "score": 1, "last_activity_date": 1520971818, "last_edit_date": 1520971818, "creation_date": 1520970691, "answer_id": 49264776, "question_id": 49264600, "link": "https://stackoverflow.com/questions/49264600/wrong-number-of-arguments-ruby-class-method/49264776#49264776", "title": "Wrong number of arguments Ruby class method", "body": "<p>the problem is that ruby is interpreting the line</p>\n\n<pre><code>pairs\n</code></pre>\n\n<p>as a function call to the function</p>\n\n<pre><code>pairs(target)\n</code></pre>\n\n<p>and not as a return statement. In order to fix this, rename your <code>pairs</code> array variable so that it does not match your function name. I believe you have already done this in the form of <code>pairs_array = []</code>, so instead of calling <code>pairs &lt;&lt; [idx, idx2]</code>, you should be calling <code>pairs_array</code> &lt;&lt; [idx, idx2] to store the pairs. Then, to return the array, call <code>pair_array</code> at the end of your function.</p>\n\n<p>Another error is that you are passing in the numbers as strings and not ints, so when you are adding the two variable together, ruby is doing string concatenation, and not simply adding the two numbers together, to fix this, pass in the numbers as ints (i.e. remove the quotation marks around the numbers)</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9406374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_517dU3rnXc/AAAAAAAAAAI/AAAAAAAAE2E/VRYXHgDJDvY/photo.jpg?sz=128", "display_name": "Alexander Keefe", "link": "https://stackoverflow.com/users/9406374/alexander-keefe"}, "edited": false, "score": 0, "creation_date": 1521036759, "post_id": 49264831, "comment_id": 85562594, "body": "thanks, looks like some rookie mistakes. I changed my code but I am still just getting a bunch of numbers printed out, not the array pairs even though I&#39;m using this:  pairs_array &lt;&lt; [idx, idx2]  Any thoughts on what I&#39;m doing wrong?"}], "tags": [], "owner": {"reputation": 1936, "user_id": 9487478, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1qsdAI-3A8I/AAAAAAAAAAI/AAAAAAAAAAc/pfyjZ9jAaKg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/9487478/paul"}, "is_accepted": false, "score": 2, "last_activity_date": 1520970948, "creation_date": 1520970948, "answer_id": 49264831, "question_id": 49264600, "link": "https://stackoverflow.com/questions/49264600/wrong-number-of-arguments-ruby-class-method/49264831#49264831", "title": "Wrong number of arguments Ruby class method", "body": "<p>The problem is, that your last statement in your pairs method is \"pairs\", which means that you do another (and this time recursive) function call. This function call happens without arguments, which causes the error.</p>\n\n<p>I assume, that you actually want to put all your results into the variable \"pairs_array\" and return it (instead of \"pairs\").</p>\n\n<p>Moreover</p>\n\n<pre><code>  if (number + number2 == target)\n    #some code\n  end\n</code></pre>\n\n<p>in combination with</p>\n\n<pre><code>arr = Array.new\narr &lt;&lt; \"1\" &lt;&lt; \"3\" &lt;&lt; \"1\" &lt;&lt; \"2\" &lt;&lt; \"3\" &lt;&lt; \"0\"\nputs arr.pairs(3)\n</code></pre>\n\n<p>will always return false, since e.g. \"1\" + \"2\" is \"12\", whereas 1 + 2 is 3. => Take care of the data types you are using.</p>\n"}], "owner": {"reputation": 13, "user_id": 9406374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_517dU3rnXc/AAAAAAAAAAI/AAAAAAAAE2E/VRYXHgDJDvY/photo.jpg?sz=128", "display_name": "Alexander Keefe", "link": "https://stackoverflow.com/users/9406374/alexander-keefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520971818, "creation_date": 1520970042, "question_id": 49264600, "link": "https://stackoverflow.com/questions/49264600/wrong-number-of-arguments-ruby-class-method", "title": "Wrong number of arguments Ruby class method", "body": "<pre><code>class Array\ndef pairs(target)\n  pairs_array = []\n  self.each_with_index do |number, idx|\n    self.each_with_index do |number2, idx2|\n      if (number + number2 == target)\n        pairs &lt;&lt; [idx, idx2]\n      end\n    end\n  end\n  pairs\nend\nend\n\narr = Array.new\narr &lt;&lt; \"1\" &lt;&lt; \"3\" &lt;&lt; \"1\" &lt;&lt; \"2\" &lt;&lt; \"3\" &lt;&lt; \"0\"\nputs arr.pairs(3)\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>Traceback (most recent call last):\n    2: from main.rb:42:in `&lt;main&gt;'\n    1: from main.rb:36:in `pairs'\nmain.rb:27:in `pairs': wrong number of arguments (given 0, expected 1) (ArgumentError)\n</code></pre>\n\n<p>I am relatively new to this so I'm sorry if this is a stupid question but am I simply calling the method incorrectly? I am trying to call this and pass 3 as the target value.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "string", "loops", "parsing", "split"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1520971752, "post_id": 49264359, "comment_id": 85533413, "body": "Just pointing out some idioms. First example would be just <code>arr = string.split &quot;;&quot;</code> and second would use <code>string.split(&quot;;&quot;).each_with_index do |x, i|</code> rather than maintain your own index."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1520969361, "creation_date": 1520969361, "answer_id": 49264417, "question_id": 49264359, "link": "https://stackoverflow.com/questions/49264359/ruby-select-multiple-elements-from-a-split/49264417#49264417", "title": "Ruby select multiple elements from a .split", "body": "<p>Sure. Use <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>Array#values_at</code></a>:</p>\n\n<pre><code>string = \"this;is;a;string;yes\"\nstring.split(\";\").values_at(0, 2, 3)\n# =&gt; [\"this\", \"a\", \"string\"]\n</code></pre>\n\n<p>See it on repl.it: <a href=\"https://repl.it/@jrunning/FussyRecursiveSpools\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/FussyRecursiveSpools</a></p>\n"}], "owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 49264417, "answer_count": 1, "score": 1, "last_activity_date": 1520969361, "creation_date": 1520969139, "question_id": 49264359, "link": "https://stackoverflow.com/questions/49264359/ruby-select-multiple-elements-from-a-split", "title": "Ruby select multiple elements from a .split", "body": "<p>String:</p>\n\n<pre><code>string = \"this;is;a;string;yes\"\n</code></pre>\n\n<p>I can split the string and append each element to an array like this </p>\n\n<pre><code>arr = []\nstring.split(\";\").each do |x|\n  arr &lt;&lt; x\nend\n</code></pre>\n\n<p>Is there an easy way to take the first third and fourth values other than something like this.</p>\n\n<pre><code>x = 0 \nstring.split(\";\").each do |x|\n  if x == 0 or x == 2 or x == 3 then arr &lt;&lt; x end\n  x += 1\nend\n</code></pre>\n"}, {"tags": ["ruby", "ssh", "timeout"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1520968981, "post_id": 49263928, "comment_id": 85531982, "body": "Please post working code. Calling <code>timeout</code> without a block is an error and you have <code>rescue</code> with no <code>begin</code> which is a syntax error."}, {"owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1520972538, "post_id": 49263928, "comment_id": 85533819, "body": "yes, this was from a function with an implicit begin. i will edit."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1520972837, "post_id": 49263928, "comment_id": 85533954, "body": "Still invalid. Please make a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1520973986, "post_id": 49263928, "comment_id": 85534553, "body": "omg. done. can you please answer the question if you know the answer? thanks."}, {"owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1520974057, "post_id": 49263928, "comment_id": 85534591, "body": "this also seems to be happening with backtick kernel execution. so likely ssh is the problem."}, {"owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "edited": false, "score": 0, "creation_date": 1520996129, "post_id": 49263928, "comment_id": 85541336, "body": "I&#39;m not smart enough to know exactly what is going on here, but this is a fun read on why Timeouts in Ruby can cause serious issues: <a href=\"http://blog.headius.com/2008/02/rubys-threadraise-threadkill-timeoutrb.html\" rel=\"nofollow noreferrer\">blog.headius.com/2008/02/&hellip;</a>"}, {"owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1521229997, "post_id": 49263928, "comment_id": 85658943, "body": "Yes, the problem was due to the link @Max posted and the process not ending on the remote machine. Used timeout --kill-after option to make it work. Will post my own answer later or delete this one upon mod suggestion."}], "owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1521230099, "answer_count": 0, "score": 2, "last_activity_date": 1520973947, "creation_date": 1520967532, "last_edit_date": 1520973947, "question_id": 49263928, "link": "https://stackoverflow.com/questions/49263928/ruby-timeouttimeout-not-working-on-open3-ssh-command", "closed_reason": "Duplicate", "title": "Ruby Timeout::timeout not working on open3 ssh command", "body": "<p>I'm trying to use Ruby's Timeout::timeout mechanism to abort a hanging ssh command but it doesn't seem to be working. If I slip in an infinite loop before the ssh call though, it will terminate so I know that I'm doing it right. What's the deal? Is it ssh or open3?</p>\n\n<p>The code is simple enough:</p>\n\n<pre><code>require 'timeout'\nrequire 'open3'\n\nbegin\n  status = Timeout::timeout(5) do\n    r = Open3.capture3('ssh root@192.168.1.1')\n    puts 'Debug 1'\n  end\nrescue Timeout::Error\n  puts 'Timeout exceeded'\nend\n</code></pre>\n\n<p>If there is any kind of prompt it will remain there indefinitely without printing either 'Timeout exceeded' or 'Debug 1'.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "geocoder"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1520968949, "post_id": 49263779, "comment_id": 85531972, "body": "Where getting from these <code>geocoded_by and reverse_....</code> ? I&#39;s&#39;t gem?"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 1, "creation_date": 1520976662, "post_id": 49263779, "comment_id": 85535707, "body": "@7urkm3n <a href=\"https://github.com/alexreisner/geocoder\" rel=\"nofollow noreferrer\">github.com/alexreisner/geocoder</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 2201664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dfd512fac818e9180a4b851a714206e2?s=128&d=identicon&r=PG", "display_name": "Roma149", "link": "https://stackoverflow.com/users/2201664/roma149"}, "is_accepted": false, "score": 1, "last_activity_date": 1520979185, "creation_date": 1520979185, "answer_id": 49266671, "question_id": 49263779, "link": "https://stackoverflow.com/questions/49263779/can-i-have-reverse-geocoded-by-and-geocoded-by-at-the-same-time-in-a-model-rail/49266671#49266671", "title": "Can I have reverse_geocoded_by and geocoded_by at the same time in a model? Rails", "body": "<p>It works but it's redundant. That's because with <code>geocoded_by</code> you have the full street address and obtain the latitude and longitude, which is your case. But <code>reverse_geocoded_by</code> allows you to obtain an address from a latitude and longitude, but you already have it.</p>\n\n<p>Just remove the <code>reverse_geocoded_by</code> and if you want to use the latitude and longitude simply call the fields in your database: <code>self.latitude</code> and <code>self.longitude</code>, for example, which you should have defined (and the geocoding service is filling out for you).</p>\n"}, {"tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 3, "last_activity_date": 1521015692, "last_edit_date": 1521015692, "creation_date": 1521015323, "answer_id": 49272635, "question_id": 49263779, "link": "https://stackoverflow.com/questions/49263779/can-i-have-reverse-geocoded-by-and-geocoded-by-at-the-same-time-in-a-model-rail/49272635#49272635", "title": "Can I have reverse_geocoded_by and geocoded_by at the same time in a model? Rails", "body": "<p>Yes, You can use it, by default it will overwrite if giving address and lat/lng addresses.</p>\n\n<p>You can split into two classes and call <code>Address.near([:lat, :lng])</code> too later after save.</p>\n\n<h3>Models</h3>\n\n<pre><code>- /model/address.rb\n   class Address &lt; ApplicationRecord\n      #any association/validations here\n\n      geocoded_by :full_street_address\n\n      #by default it will save full address to address field. \n      reverse_geocoded_by :latitude, :longitude do |obj,results|\n        if geo = results.first\n            #customize as you want\n              obj.street  = geo.address.split(',')[0]\n              obj.city    = geo.city\n              obj.zip     = geo.postal_code\n              obj.state   = geo.state\n        end\n      end\n\n      def full_street_address\n         self.street + self.city + self.country\n      end\n   end\n\n- /model/address/with_address.rb\n   class Address::WithAddress &lt; Address\n      after_validation :geocode\n   end\n\n- /model/address/with_lat_lng.rb\n   class Address::WithLatLng &lt; Address\n     after_validation :reverse_geocode\n   end\n</code></pre>\n\n<h3>Controller</h3>\n\n<pre><code>   address = Address::WithLatLng.create(latitude: 40.5236803, longitude: -80.2249546)\n   # returns: will save lat/lng and address/city/state/zip fields saved from api\n   address.full_street_address\n   #or\n   address = Address::WithAddress.create(address: \"601 fake st.\", city: \"brooklyn\", state: \"ny\", zip: \"11220\")\n   # returns: will save address and latitude:, longitude: will fetch from api.\n   address.full_street_address\n</code></pre>\n"}], "owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521015692, "creation_date": 1520967080, "question_id": 49263779, "link": "https://stackoverflow.com/questions/49263779/can-i-have-reverse-geocoded-by-and-geocoded-by-at-the-same-time-in-a-model-rail", "title": "Can I have reverse_geocoded_by and geocoded_by at the same time in a model? Rails", "body": "<p>I'm looking to allow my model to be <strong>geocoded</strong> by <em>full_street_address</em> and <strong>reverse_geocoded_by</strong> <em>:latitude</em> and <em>:longitude</em> so that I can call Address.near and get them either by one or the other way.</p>\n\n<p>This seems to work but could this approach cause potential issue or is it correct?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>class Address &lt; ApplicationRecord\n  geocoded_by :full_street_address\n  after_validation :geocode\n  reverse_geocoded_by :latitude, :longitude\n\n  def full_street_address\n    self.street + self.city + self.country\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "atom-editor", "atom-beautify"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1520966774, "post_id": 49263630, "comment_id": 85530836, "body": "Is there a chance that you switched to ruby version without rubocop gem installed?"}, {"owner": {"reputation": 154, "user_id": 7712502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1160926393975820/picture?type=large", "display_name": "L&#233;o Rocha", "link": "https://stackoverflow.com/users/7712502/l%c3%a9o-rocha"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1520967375, "post_id": 49263630, "comment_id": 85531158, "body": "It will give a lot of work.  The project is already advanced. The problem can be this?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1520970619, "post_id": 49263630, "comment_id": 85532827, "body": "I mean error message says that <code>rubocop</code> command exists in ruby 2.4.3 but if you switched to a project with different ruby version you might need to install <code>rubycop</code> for that"}, {"owner": {"reputation": 154, "user_id": 7712502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1160926393975820/picture?type=large", "display_name": "L&#233;o Rocha", "link": "https://stackoverflow.com/users/7712502/l%c3%a9o-rocha"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1520972071, "post_id": 49263630, "comment_id": 85533573, "body": "But my project is in the version 2.4.3 of ruby and rubocop is installed on it :S"}], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 5253210, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K7T8LYxyRDQ/AAAAAAAAAAI/AAAAAAAAAH0/i54Za1YzuMU/photo.jpg?sz=128", "display_name": "Danilo Rodrigues", "link": "https://stackoverflow.com/users/5253210/danilo-rodrigues"}, "is_accepted": true, "score": 6, "last_activity_date": 1529777086, "last_edit_date": 1529777086, "creation_date": 1529775887, "answer_id": 51003648, "question_id": 49263630, "link": "https://stackoverflow.com/questions/49263630/atom-beautify-ruby-with-rubocop-doenst-work/51003648#51003648", "title": "Atom Beautify Ruby with rubocop doens&#39;t work", "body": "<p>I was having the same problem. My project was on version 2.2.2 and rubocop gem was installed on this version.</p>\n\n<p>Atom was running <code>atom-beautify</code>, but using the global <code>rbenv</code> version (in my case was 2.4.0) and that was causing the error. So the solution was:</p>\n\n<pre><code>$ cd ~\n$ rbenv version\n2.4.0\n$ gem install rubocop\n</code></pre>\n\n<p>Then restart Atom, run <code>atom-beautify</code> and everything should be fine now.</p>\n"}], "owner": {"reputation": 154, "user_id": 7712502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1160926393975820/picture?type=large", "display_name": "L&#233;o Rocha", "link": "https://stackoverflow.com/users/7712502/l%c3%a9o-rocha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 51003648, "answer_count": 1, "score": 3, "last_activity_date": 1529777086, "creation_date": 1520966533, "last_edit_date": 1521060481, "question_id": 49263630, "link": "https://stackoverflow.com/questions/49263630/atom-beautify-ruby-with-rubocop-doenst-work", "title": "Atom Beautify Ruby with rubocop doens&#39;t work", "body": "<p>I have Atom Beautify plugin installed in Atom and the rubocop gem installed in my app. Even after these steps the beautify don't work. </p>\n\n<p>My rubocop location: </p>\n\n<pre><code>  $ which rubocop \n  /home/leonardo/.rbenv/shims/rubocop\n</code></pre>\n\n<p>In my config.cson i have the code:</p>\n\n<pre><code>...\n    ruby:\n      rubocop_path: \"/home/leonardo/.rbenv/shims/rubocop\"\n...\n</code></pre>\n\n<p>When I try using Beatify(<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>B</kbd>) this return the error:</p>\n\n<pre><code>Error: rbenv: rubocop: command not found\nThe `rubocop' command exists in these Ruby versions:\n  2.4.3\n    at /home/leonardo/.atom/packages/atom-beautify/src/beautifiers/executable.coffee:182:23\n    at tryCatcher (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/util.js:16:23)\n    at Promise._settlePromiseFromHandler (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/promise.js:512:31)\n    at Promise._settlePromise (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/promise.js:569:18)\n    at Promise._settlePromise0 (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/promise.js:614:10)\n    at Promise._settlePromises (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/promise.js:693:18)\n    at Async._drainQueue (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/async.js:133:16)\n    at Async._drainQueues (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/async.js:143:10)\n    at Async.drainQueues (/home/leonardo/.atom/packages/atom-beautify/node_modules/bluebird/js/release/async.js:17:14)\n    at process._tickCallback (internal/process/next_tick.js:103:7)\n</code></pre>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1520965291, "creation_date": 1520965291, "answer_id": 49263263, "question_id": 49263218, "link": "https://stackoverflow.com/questions/49263218/convert-string-to-nokogiri-node/49263263#49263263", "title": "Convert String to Nokogiri node", "body": "<p>Yes and it's quite straightforward, just do</p>\n\n<pre><code>Nokogiri::XML(\"&lt;count&gt;2&lt;/count&gt;\")\n</code></pre>\n\n<p>For instance:</p>\n\n<pre><code>pry(main)&gt; Nokogiri::XML(\"&lt;count&gt;2&lt;/count&gt;\").children.first.to_s                                              \n=&gt; \"&lt;count&gt;2&lt;/count&gt;\"                                                                                             \n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 49263263, "answer_count": 1, "score": 2, "last_activity_date": 1520965306, "creation_date": 1520965089, "question_id": 49263218, "link": "https://stackoverflow.com/questions/49263218/convert-string-to-nokogiri-node", "title": "Convert String to Nokogiri node", "body": "<p>Is it possible to convert a string looking like this : <code>\"&lt;count&gt;2&lt;/count&gt;\"</code> in Nokogiri node <code>&lt;count&gt;2&lt;/count&gt;</code> ? Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-and-belongs-to-many"], "comments": [{"owner": {"reputation": 790, "user_id": 859927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3409350caa2b30c1157bc45e9cc18097?s=128&d=identicon&r=PG", "display_name": "Gonzalo S", "link": "https://stackoverflow.com/users/859927/gonzalo-s"}, "edited": false, "score": 0, "creation_date": 1520991977, "post_id": 49262791, "comment_id": 85540464, "body": "rails version?, also can you add what is in params in the controller?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7567137"}, "reply_to_user": {"reputation": 790, "user_id": 859927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3409350caa2b30c1157bc45e9cc18097?s=128&d=identicon&r=PG", "display_name": "Gonzalo S", "link": "https://stackoverflow.com/users/859927/gonzalo-s"}, "edited": false, "score": 0, "creation_date": 1520993243, "post_id": 49262791, "comment_id": 85540733, "body": "Rails version 5.1"}, {"owner": {"reputation": 790, "user_id": 859927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3409350caa2b30c1157bc45e9cc18097?s=128&d=identicon&r=PG", "display_name": "Gonzalo S", "link": "https://stackoverflow.com/users/859927/gonzalo-s"}, "edited": false, "score": 0, "creation_date": 1520993624, "post_id": 49262791, "comment_id": 85540812, "body": "params appear in the server log after each request"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7567137"}, "reply_to_user": {"reputation": 790, "user_id": 859927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3409350caa2b30c1157bc45e9cc18097?s=128&d=identicon&r=PG", "display_name": "Gonzalo S", "link": "https://stackoverflow.com/users/859927/gonzalo-s"}, "edited": false, "score": 0, "creation_date": 1520994573, "post_id": 49262791, "comment_id": 85541018, "body": "controller params params.require(:user).permit(:username,:email, :password, :password_confirmation, role_ids: [])"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4736461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/42R7m.jpg?s=128&g=1", "display_name": "Viet Nguyen", "link": "https://stackoverflow.com/users/4736461/viet-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1521007074, "creation_date": 1521007074, "answer_id": 49270636, "question_id": 49262791, "link": "https://stackoverflow.com/questions/49262791/strong-params-on-nested-attributes-in-rails/49270636#49270636", "title": "Strong params on nested attributes in rails", "body": "<p>It seems have problem in your model relation. It need change to below:</p>\n\n<pre><code>users:\nhas_and_belongs_to_many :roles\n\n\nroles:\nhas_and_belongs_to_many :users\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7567137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521020176, "creation_date": 1520963758, "last_edit_date": 1521020176, "question_id": 49262791, "link": "https://stackoverflow.com/questions/49262791/strong-params-on-nested-attributes-in-rails", "title": "Strong params on nested attributes in rails", "body": "<p>I'm having a problem when specifying a nested param in the strong param whitelist</p>\n\n<p>whitelisting with <code>permit!</code> works</p>\n\n<pre><code>def sign_up_params\n  params.require(:user).permit!\nend\n</code></pre>\n\n<p>but specifying the param fails</p>\n\n<pre><code>def sign_up_params\n  params.require(:user).permit(:name, ......, role_ids: [])\nend\n</code></pre>\n\n<p>error: unpermitted params role_ids: []</p>\n\n<p>My models: </p>\n\n<pre><code>Roles: \n  has_and_belongs_to_many :users\n\nUsers:\n  has_and_belongs_to_many :roles\n\njoin table: roles_users\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VGCNu.png\" rel=\"nofollow noreferrer\">habtm error</a></p>\n\n<p>I added a console screenshot. It an habtm error (displaying like a link)</p>\n\n<p>Thank you..\nfinally found an answer\ncreate</p>\n\n<pre><code>@user = User.new(sign_up_params)\n@user.role_ids = params[:user][:role_ids]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "devise"], "owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520963497, "creation_date": 1520963497, "question_id": 49262718, "link": "https://stackoverflow.com/questions/49262718/devise-confirmation-instructions-test-is-not-working", "title": "Devise confirmation instructions test is not working", "body": "<p>I am using request_confirmation_test.rb file from devise</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/blob/f39c6fd92774cb66f96f546d8d5e8281542b4e78/test/mailers/confirmation_instructions_test.rb\" rel=\"nofollow noreferrer\">confirmation test from devise</a></p>\n\n<p>I have included the helper too but the file is showing errors on each line. Looks like something is missing that is necessary for the file to work correctly.This is the error that I am getting currently</p>\n\n<pre><code>ConfirmationInstructionsTest#test_set_up_sender_from_custom_mailer_defaults:\nNoMethodError: undefined method `from' for nil:NilClass\n    test/integration/request_confirmation_test.rb:46:in `block in &lt;class:ConfirmationInstructionsTest&gt;'\n</code></pre>\n\n<p>this is my code for testing file</p>\n\n<pre><code>require 'test_helper'\n\nclass ConfirmationInstructionsTest &lt; ActionMailer::TestCase\n\n  def setup\n    setup_mailer\n    Devise.mailer = 'Devise::Mailer'\n    Devise.mailer_sender = 'johnmax.rtc@gmail.com'\n  end\n\n  def teardown\n    Devise.mailer = 'Devise::Mailer'\n    Devise.mailer_sender = 'please-change-me@config-initializers-devise.com'\n  end\n\n  def user\n    @user ||= create_user\n  end\n\n  def mail\n    @mail ||= begin\n      user\n      ActionMailer::Base.deliveries.first\n    end\n  end\n\n  test 'email sent after creating the user' do\n    assert_not_nil mail\n  end\n\n  # test 'content type should be set to html' do\n  #   assert mail.content_type.include?('text/html')\n  # end\n\n  test 'send confirmation instructions to the user email' do\n    mail\n    assert_equal [user.email], mail.to\n  end\n\n  test 'set up sender from configuration' do\n    assert_equal ['johnmax.rtc@gmail.com'], mail.from\n  end\n\n  test 'set up sender from custom mailer defaults' do\n    Devise.mailer = 'Users::Mailer'\n    assert_equal ['johnmax.rtc@gmail.com'], mail.from\n  end\n\n  # test 'set up sender from custom mailer defaults with proc' do\n  #   Devise.mailer = 'Users::FromProcMailer'\n  #   assert_equal ['johnmax.rtc@gmail.com'], mail.from\n  # end\n\n  # test 'custom mailer renders parent mailer template' do\n  #   Devise.mailer = 'Users::Mailer'\n  #   assert_present mail.body.encoded\n  # end\n\n  # test 'set up reply to as copy from sender' do\n  #   assert_equal ['johnmax.rtc@gmail.com'], mail.reply_to\n  # end\n\n  # test 'set up reply to as different if set in defaults' do\n  #   Devise.mailer = 'Users::ReplyToMailer'\n  #   assert_equal ['johnmax.rtc@gmail.com'], mail.from\n  #   assert_equal ['johnmax.rtc@gmail.com'], mail.reply_to\n  # end\n\n  test 'set up subject from I18n' do\n    store_translations :en, devise: { mailer: { confirmation_instructions: { subject: 'Account Confirmation' } } } do\n      assert_equal 'Account Confirmation', mail.subject\n    end\n  end\n\n  test 'subject namespaced by model' do\n    store_translations :en, devise: { mailer: { confirmation_instructions: { user_subject: 'User Account Confirmation' } } } do\n      assert_equal 'User Account Confirmation', mail.subject\n    end\n  end\n\n  test 'body should have user info' do\n    assert_match user.email, mail.body.encoded\n  end\n\n  test 'body should have link to confirm the account' do\n    host, port = ActionMailer::Base.default_url_options.values_at :host, :port\n\n    if mail.body.encoded =~ %r{&lt;a href=\\\"http://#{host}:#{port}/users/confirmation\\?confirmation_token=([^\"]+)\"&gt;}\n      assert_equal $1, user.confirmation_token\n    else\n      flunk \"expected confirmation url regex to match\"\n    end\n  end\n\n  # test 'renders a scoped if scoped_views is set to true' do\n  #   swap Devise, scoped_views: true do\n  #     assert_equal user.email, mail.body.decoded\n  #   end\n  # end\n\n  # test 'renders a scoped if scoped_views is set in the mailer class' do\n  #   begin\n  #     Devise::Mailer.scoped_views = true\n  #     assert_equal user.email, mail.body.decoded\n  #   ensure\n  #     Devise::Mailer.send :remove_instance_variable, :@scoped_views\n  #   end\n  # end\n\n  test 'mailer sender accepts a proc' do\n    swap Devise, mailer_sender: proc { \"another@example.com\" } do\n      assert_equal ['another@example.com'], mail.from\n    end\n  end\nend\n</code></pre>\n\n<p>This is the helper file</p>\n\n<pre><code>require 'active_support/test_case'\n\nclass ActiveSupport::TestCase\n  VALID_AUTHENTICATION_TOKEN = 'AbCdEfGhIjKlMnOpQrSt'.freeze\n\n  def setup_mailer\n    ActionMailer::Base.deliveries = []\n  end\n\n  def store_translations(locale, translations, &amp;block)\n    # Calling 'available_locales' before storing the translations to ensure\n    # that the I18n backend will be initialized before we store our custom\n    # translations, so they will always override the translations for the\n    # YML file.\n    I18n.available_locales\n    I18n.backend.store_translations(locale, translations)\n    yield\n  ensure\n    I18n.reload!\n  end\n\n  def generate_unique_email\n    @@email_count ||= 0\n    @@email_count += 1\n    \"test#{@@email_count}@example.com\"\n  end\n\n  def valid_attributes(attributes={})\n    { first_name: \"usertest\",\n      email: generate_unique_email,\n      password: '12345678',\n      password_confirmation: '12345678' }.update(attributes)\n  end\n\n  def new_user(attributes={})\n    User.new(valid_attributes(attributes))\n  end\n\n  def create_user(attributes={})\n    User.create!(valid_attributes(attributes))\n  end\n\n  def create_admin(attributes={})\n    valid_attributes = valid_attributes(attributes)\n    valid_attributes.delete(:first_name)\n    Admin.create!(valid_attributes)\n  end\n\n  def create_user_without_email(attributes={})\n    UserWithoutEmail.create!(valid_attributes(attributes))\n  end\n\n  def create_user_with_validations(attributes={})\n    UserWithValidations.create!(valid_attributes(attributes))\n  end\n\n  # Execute the block setting the given values and restoring old values after\n  # the block is executed.\n  def swap(object, new_values)\n    old_values = {}\n    new_values.each do |key, value|\n      old_values[key] = object.send key\n      object.send :\"#{key}=\", value\n    end\n    clear_cached_variables(new_values)\n    yield\n  ensure\n    clear_cached_variables(new_values)\n    old_values.each do |key, value|\n      object.send :\"#{key}=\", value\n    end\n  end\n\n  def clear_cached_variables(options)\n    if options.key?(:case_insensitive_keys) || options.key?(:strip_whitespace_keys)\n      Devise.mappings.each do |_, mapping|\n        mapping.to.instance_variable_set(:@devise_parameter_filter, nil)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Any help would be highly appreciated.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520962835, "post_id": 49262382, "comment_id": 85528659, "body": "Still this doesn&#39;t quite make sense, I&#39;m afraid. Why do you need to copy <i>constants</i> across namespaces?"}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520963004, "post_id": 49262382, "comment_id": 85528746, "body": "Because I want, given an object which I know to be a type of <code>Container</code>, for <code>object.class::Things</code> to contain all the types of things that can be stored in <code>object</code>."}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520963032, "post_id": 49262382, "comment_id": 85528767, "body": "(The actual use case involves types of journals in a journal-replay system, but the analogy is pretty close)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520963054, "post_id": 49262382, "comment_id": 85528776, "body": "Could you do with a method? <code>container.class.acceptable_things</code> or something?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1520963422, "post_id": 49262382, "comment_id": 85528979, "body": "&quot;Mantlepiece correctly nests Mantlepiece::Things::Ornament&quot; - not <b>quite</b>. Through the magic of ruby name resolution, <code>Mantlepiece::Things</code> is resolved to <code>Properties::OrnamentThings::Things</code>. Mantlepiece never has its own things."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520963834, "post_id": 49262382, "comment_id": 85529206, "body": "But you&#39;re right, I feel that this should somehow be possible. I&#39;ll give it another try later."}], "answers": [{"comments": [{"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1521019023, "post_id": 49264629, "comment_id": 85549979, "body": "Ahh, very nice. It&#39;s a bit of a shame with the required order of defining; but a little metaprogramming should let me define an empty <code>Things</code> on <code>.included()</code>, and add to it both from the class definition and <code>has_ornament</code>."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1521028266, "post_id": 49264629, "comment_id": 85556374, "body": "@Chowlett there is no required order. This works whether you call it before or after you declare <code>module Things</code>. That&#39;s what I was trying to explain :P"}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1521029195, "post_id": 49264629, "comment_id": 85557027, "body": "Oh, I see! I managed to read it with exactly the opposite sense. I&#39;ll give it a go, thanks!"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1520970448, "last_edit_date": 1520970448, "creation_date": 1520970132, "answer_id": 49264629, "question_id": 49262382, "link": "https://stackoverflow.com/questions/49262382/defining-nested-classes-both-directly-and-via-include/49264629#49264629", "title": "Defining nested classes both directly and via include", "body": "<p>Even though your mantlepiece and bookcase both have things, those things are different (because they contain different classes). So they can't just include some common <code>Things</code> module; they instead have to define their own separate <code>Things</code>, just like you did in <code>Bookcase</code> by declaring <code>module Things</code>.</p>\n\n<pre><code>def has_ornament\n  const_set(:Things, Module.new) unless const_defined? :Things, false\n  self::Things.include OrnamentThings\nend\n\nmodule OrnamentThings\n  class Ornament\n  end\nend\n</code></pre>\n\n<p>This works because Ruby lets you reopen modules using the same syntax you use to declare them. <code>has_ornament</code> defines a brand new <code>Things</code> module, which you then open to add more things. If you call <code>has_ornament</code> after your custom things it instead skips the creation and adds to the module <em>you</em> made (the <code>false</code> makes sure we're looking for <code>Things</code> only in the current class).</p>\n"}], "owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 49264629, "answer_count": 1, "score": 4, "last_activity_date": 1520970448, "creation_date": 1520962239, "question_id": 49262382, "link": "https://stackoverflow.com/questions/49262382/defining-nested-classes-both-directly-and-via-include", "title": "Defining nested classes both directly and via include", "body": "<p>Suppose I'm modelling my home storage system. I have a bunch of different types of <code>Container</code>, and I've found that so many of them have ornaments in or on them that I've set up a bit of helper code for that common case.</p>\n\n<p>Among my containers are my <code>Mantlepiece</code> and my <code>Bookcase</code>. I only store ornaments on the former; while the latter has all of ornaments, and hardback and softback books.</p>\n\n<p>Here's an initial attempt:</p>\n\n<pre><code>module Properties\n  def has_ornament\n    include OrnamentThings\n  end\n\n  module OrnamentThings\n    module Things\n      class Ornament\n      end\n    end\n  end\nend\n\nclass Container\n  extend Properties\nend\n\nclass Mantlepiece &lt; Container\n  has_ornament\nend\n\nclass Bookcase &lt; Container\n  has_ornament\n\n  module Things\n    class Hardback\n    end\n\n    class Paperback\n    end\n  end\nend\n\n[Mantlepiece, Bookcase].each do |place|\n  puts place.name\n  puts place.constants.inspect\n  puts place::Things.constants.inspect\nend\n\n# Output:\n# Mantlepiece\n# [:Things]\n# [:Ornament]\n# Bookcase\n# [:Things]\n# [:Hardback, :Paperback]\n</code></pre>\n\n<p>You can see that the <code>Mantlepiece</code> correctly nests <code>Mantlepiece::Things::Ornament</code>; but the in-class declaration of <code>Things</code> for <code>Bookcase</code> means that <code>Bookcase::Things</code> only nests <code>Hardback</code> and <code>Paperback</code>. <code>Bookcase::Things::Ornament</code> is missing.</p>\n\n<p>Can I write this neatly so that <code>Bookcase</code> can call <code>has_ornament</code>, then declare its own set of <code>Things</code>, and have all of them nested in the same namespace?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1520960220, "post_id": 49261603, "comment_id": 85527091, "body": "How have you installed Ruby? I assume this is not the Ruby from the Ubuntu packages?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1520963492, "post_id": 49261603, "comment_id": 85529013, "body": "Again, <b>how</b> have you installed Ruby? Have you compiled it yourself, using rbenv, RVM, anything else? It seems that zlib was not available during compilation of your Ruby and is thus not supported by your Ruby. You probably need to re-compile it with zlib support."}, {"owner": {"reputation": 3114, "user_id": 252518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3FDkH.jpg?s=128&g=1", "display_name": "Freeman", "link": "https://stackoverflow.com/users/252518/freeman"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1520963705, "post_id": 49261603, "comment_id": 85529123, "body": "I done this : sudo apt-get install ruby-full"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1520963848, "post_id": 49261603, "comment_id": 85529218, "body": "That would have given you a Ruby 1.9.3 on Ubuntu Trusty. Find how you actually installed your current Ruby and then (probably) reinstall it."}], "answers": [{"tags": [], "owner": {"reputation": 3114, "user_id": 252518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3FDkH.jpg?s=128&g=1", "display_name": "Freeman", "link": "https://stackoverflow.com/users/252518/freeman"}, "is_accepted": true, "score": 0, "last_activity_date": 1520974600, "creation_date": 1520974600, "answer_id": 49265727, "question_id": 49261603, "link": "https://stackoverflow.com/questions/49261603/how-to-fix-zlib-error-in-ruby/49265727#49265727", "title": "How to fix zlib error in ruby?", "body": "<p>Thanks to all of you, My problem solved via this:</p>\n\n<pre><code>aptitude purge ruby\n</code></pre>\n\n<p>I hope you will find this command useful.</p>\n"}], "owner": {"reputation": 3114, "user_id": 252518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3FDkH.jpg?s=128&g=1", "display_name": "Freeman", "link": "https://stackoverflow.com/users/252518/freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 49265727, "answer_count": 1, "score": 0, "last_activity_date": 1520974600, "creation_date": 1520959668, "last_edit_date": 1520961345, "question_id": 49261603, "link": "https://stackoverflow.com/questions/49261603/how-to-fix-zlib-error-in-ruby", "title": "How to fix zlib error in ruby?", "body": "<p>When I write this command :</p>\n\n<pre><code>gem install bundler &amp;&amp; bundle install --without test\n</code></pre>\n\n<p>the output is :</p>\n\n<pre><code>ERROR:  Loading command: install (LoadError)\n    cannot load such file -- zlib\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `invoke_with_build_args' for nil:NilClass\n</code></pre>\n\n<p>so, obviously I tried to install <code>zlib1g-dev</code> and <code>libssl-dev</code> but it was already installed on my system, </p>\n\n<pre><code>#sudo apt-get install zlib1g-dev libssl-dev\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nzlib1g-dev is already the newest version.\nlibssl-dev is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 180 not upgraded.\n</code></pre>\n\n<p>any idea ?\nmy OS info :</p>\n\n<pre><code>Distributor ID: Ubuntu\nDescription:    Ubuntu 14.04.5 LTS\nRelease:    14.04\nCodename:   trusty\n</code></pre>\n\n<p>I installed this version of ruby :</p>\n\n<pre><code># ruby -v\nruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-linux]\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520957778, "post_id": 49260906, "comment_id": 85525503, "body": "That doesn&#39;t help - all <code>extend</code> would do is place <code>ThingOne</code> into <code>Shelf</code>&#39;s namespace directly. I don&#39;t want that - I&#39;ve edited the question to make that clear."}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520958178, "post_id": 49260906, "comment_id": 85525777, "body": "1) Yes, that much is clear; 2) that&#39;s not how Ruby works in other cases - <code>class Foo; def hi; puts &#39;Hi&#39;; end; end; class Foo; def bye; puts &#39;Bye&#39;; end end</code> works fine; 3) I want to know how I can end up <i>not</i> overriding it."}, {"owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "reply_to_user": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520958225, "post_id": 49260906, "comment_id": 85525803, "body": "@Chowlett sorry I&#39;m new to stackoverflow, my answer was just edited"}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 1, "creation_date": 1520958598, "post_id": 49260906, "comment_id": 85526042, "body": "No worries about being new. The thing is, if you re-open a class  definition in Ruby, <i>usually</i> you end up <i>adding</i> to the class (as in my second comment). That&#39;s obviously not the case here; I want to know how I can make it work."}], "tags": [], "owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1520958732, "last_edit_date": 1520958732, "creation_date": 1520957580, "answer_id": 49260906, "question_id": 49260832, "link": "https://stackoverflow.com/questions/49260832/how-to-add-to-an-included-module/49260906#49260906", "title": "How to add to an included module", "body": "<p>It looks like you are intentionally overriding module <code>Things</code>, nesting a <code>ThingTwo</code> class inside <code>Shelf</code>, asking ruby to look for a constants in <code>Shelf</code> class. You don't have to declare the same module twice, try:</p>\n\n<pre><code>module Things\n  class ThingOne\n  end\nend\n\nclass Shelf\n  include Things\n  class ThingTwo\n  end\nend\n</code></pre>\n\n<p>You will get </p>\n\n<pre><code>=&gt; [:Things, :ThingTwo, :ThingOne] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 2, "creation_date": 1520958829, "post_id": 49261266, "comment_id": 85526202, "body": "&quot;When you include a module to a class, they&#39;re methods not classes that are included&quot; - not strictly true. It&#39;s as if the module is &quot;pasted in&quot; to the class. So, if <code>ThingOne</code> defined a function <code>foo</code>, then <code>Shelf</code> instances couldn&#39;t call <code>foo</code>. But <code>Shelf::ThingOne</code> would be a class, and <code>Shelf::ThingOne</code> instances <i>could</i> call <code>foo</code>."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1520959121, "last_edit_date": 1520959121, "creation_date": 1520958617, "answer_id": 49261266, "question_id": 49260832, "link": "https://stackoverflow.com/questions/49260832/how-to-add-to-an-included-module/49261266#49261266", "title": "How to add to an included module", "body": "<p>When you include a module to a class, their methods are included, not classes. So after doing what you did, you can use methods from <code>Things::ThingOne</code> in <code>Shelf</code> instances.</p>\n\n<p>If you want to use <code>Shelf::Things::ThingOne</code> and <code>Shelf::Things::ThingTwo</code>, you need to nest both declarations in the modules (modules and classes in Ruby can be defined in multiple files):</p>\n\n<pre><code># file shelf/things/thing_one.rb\nmodule Shelf\n  module Things\n    class ThingOne\n    end\n  end\nend\n\n# file shelf/things/thing_two.rb\nmodule Shelf\n  module Things\n    class ThingTwo\n    end\n  end\nend\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/49197182/add-ruby-classes-to-a-module-when-defined-in-separate-files/49197345#49197345\">this answer</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520959599, "post_id": 49261455, "comment_id": 85526674, "body": "...oh! I hadn&#39;t spotted that, even if I didn&#39;t open <code>Things</code> directly in <code>Shelf</code>, I didn&#39;t get <code>Shelf::Things::ThingOne</code> from the include. Huh. So - is there a way I can get what I want? Both <code>Shelf::Things::ThingOne</code> and <code>Shelf::Things::ThingTwo</code>, where <code>ThingOne</code> is from including a module?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520959825, "post_id": 49261455, "comment_id": 85526831, "body": "@Chowlett see the update, though you might not like the answer :)"}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520959922, "post_id": 49261455, "comment_id": 85526908, "body": "Hmm, I see. I&#39;ve potentially over-simplified (my actual situation is buried in the guts of a complex Rails app). I&#39;ll see if I can produce a minimal example that&#39;s closer to the problem I&#39;m actually facing."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520959992, "post_id": 49261455, "comment_id": 85526960, "body": "@Chowlett: yep, a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be perfect. Ask it as another question, though. Don&#39;t completely change this one."}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520960060, "post_id": 49261455, "comment_id": 85527001, "body": "Yeah, I had thought I had one when I posted, but I was a step or two short of &quot;complete&quot;. I&#39;ll link when I have it."}, {"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1520962323, "post_id": 49261455, "comment_id": 85528334, "body": "Thank you, yes. Now crosslinked to a better question."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 4, "last_activity_date": 1520960227, "last_edit_date": 1520960227, "creation_date": 1520959225, "answer_id": 49261455, "question_id": 49260832, "link": "https://stackoverflow.com/questions/49260832/how-to-add-to-an-included-module/49261455#49261455", "title": "How to add to an included module", "body": "<blockquote>\n  <p>The second declaration of module <code>Things</code> has overridden the first one</p>\n</blockquote>\n\n<p>No, it didn't. <code>Shelf::Things</code> is a module totally unrelated to <code>::Things</code>.</p>\n\n<pre><code>Things.constants # =&gt; [:ThingOne]\nShelf::Things.constants # =&gt; [:ThingTwo]\n</code></pre>\n\n<blockquote>\n  <p>which would ideally result in me being able to refer to <code>Shelf::Things::ThingOne</code> and <code>Shelf::Things::ThingTwo</code></p>\n</blockquote>\n\n<pre><code>module Things\n  class ThingOne\n  end\nend\n\nclass Shelf\n  module Things\n    ThingOne = ::Things::ThingOne\n\n    class ThingTwo\n    end\n  end\nend\n\nShelf::Things.constants # =&gt; [:ThingOne, :ThingTwo]\n</code></pre>\n\n<p>But as it's been hinted at already in the other answers, this is quite unidiomatic, this kind of \"inheriting\" constants. It is very likely you chose a wrong tool for the job, but it's hard to tell since <a href=\"https://meta.stackexchange.com/q/66377/174926\">we don't know the actual job</a>.</p>\n"}], "owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 49261455, "answer_count": 3, "score": 3, "last_activity_date": 1520962302, "creation_date": 1520957387, "last_edit_date": 1520962302, "question_id": 49260832, "link": "https://stackoverflow.com/questions/49260832/how-to-add-to-an-included-module", "title": "How to add to an included module", "body": "<p>Consider the following code, which would ideally result in me being able to refer to <code>Shelf::Things::ThingOne</code> and <code>Shelf::Things::ThingTwo</code>:</p>\n\n<pre><code>module Things\n  class ThingOne\n  end\nend\n\nclass Shelf\n  include Things\n  module Things\n    class ThingTwo\n    end\n  end\nend\n\nShelf::Things.constants # =&gt; [:ThingTwo]\n</code></pre>\n\n<p>The second declaration of <code>module Things</code> has overridden the first one. Is it possible to re-open an included module, so that more (e.g.) classes can be nested within it?</p>\n\n<p>Edit: It turns out this isn't actually the question I wanted answered. I've asked a followup, <a href=\"https://stackoverflow.com/questions/49262382/defining-nested-classes-both-directly-and-via-include\">here</a></p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520957293, "post_id": 49260778, "comment_id": 85525133, "body": "I do this often for adding debug printing into gems."}, {"owner": {"reputation": 453, "user_id": 4468210, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9e8955206c61a545792f437436a2856f?s=128&d=identicon&r=PG&f=1", "display_name": "sel", "link": "https://stackoverflow.com/users/4468210/sel"}, "edited": false, "score": 0, "creation_date": 1520957359, "post_id": 49260778, "comment_id": 85525175, "body": "I&#39;m trying and getting &quot;Unable to find gem &#39;gemName&#39;&quot;."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 453, "user_id": 4468210, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9e8955206c61a545792f437436a2856f?s=128&d=identicon&r=PG&f=1", "display_name": "sel", "link": "https://stackoverflow.com/users/4468210/sel"}, "edited": false, "score": 0, "creation_date": 1520957527, "post_id": 49260778, "comment_id": 85525306, "body": "@sel: enough with the fake gem names. Show the exact command you&#39;re running and its output, <i>verbatim</i>."}, {"owner": {"reputation": 453, "user_id": 4468210, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9e8955206c61a545792f437436a2856f?s=128&d=identicon&r=PG&f=1", "display_name": "sel", "link": "https://stackoverflow.com/users/4468210/sel"}, "edited": false, "score": 0, "creation_date": 1520957722, "post_id": 49260778, "comment_id": 85525460, "body": "C:\\Users\\jeff\\Desktop\\logstash&gt;gem open logstash-output-jdbc-5.2.1-java Unable to find gem &#39;logstash-output-jdbc-5.2.1-java&#39;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 453, "user_id": 4468210, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9e8955206c61a545792f437436a2856f?s=128&d=identicon&r=PG&f=1", "display_name": "sel", "link": "https://stackoverflow.com/users/4468210/sel"}, "edited": false, "score": 0, "creation_date": 1520957792, "post_id": 49260778, "comment_id": 85525509, "body": "@sel: but the gem name is <code>logstash-output-jdbc</code>. Try that."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 453, "user_id": 4468210, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9e8955206c61a545792f437436a2856f?s=128&d=identicon&r=PG&f=1", "display_name": "sel", "link": "https://stackoverflow.com/users/4468210/sel"}, "edited": false, "score": 0, "creation_date": 1521003186, "post_id": 49260778, "comment_id": 85543036, "body": "@sel: so, how did it go?"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1520957209, "creation_date": 1520957209, "answer_id": 49260778, "question_id": 49260412, "link": "https://stackoverflow.com/questions/49260412/unpacking-editing-and-rebuilding-ruby-gem/49260778#49260778", "title": "unpacking, editing and rebuilding ruby gem", "body": "<p>Try a simpler workflow</p>\n\n<pre><code>gem open my_gem\n</code></pre>\n\n<p>This will open the installed gem's source code in your EDITOR. Make your edits. Save, restart your app to see the effects.</p>\n"}, {"tags": [], "owner": {"reputation": 2722, "user_id": 1259990, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fba514d7862cf70beb2b3e5f8279d234?s=128&d=identicon&r=PG", "display_name": "blindsnowmobile", "link": "https://stackoverflow.com/users/1259990/blindsnowmobile"}, "is_accepted": false, "score": 0, "last_activity_date": 1618960578, "creation_date": 1618960578, "answer_id": 67187412, "question_id": 49260412, "link": "https://stackoverflow.com/questions/49260412/unpacking-editing-and-rebuilding-ruby-gem/67187412#67187412", "title": "unpacking, editing and rebuilding ruby gem", "body": "<p>A little late for OP, but these steps worked for me.  Perhaps they'll help someone else:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>gem spec pkg-1.2.3.gem --ruby &gt; pkg.spec\ngem unpack pkg-1.2.3.gem\nmv pkg.spec pkg-1.2.3\ncd pkg-1.2.3\ngem build pkg.spec\n</code></pre>\n<p>Need the <code>--ruby</code>, otherwise the spec file is yaml.</p>\n"}], "owner": {"reputation": 453, "user_id": 4468210, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9e8955206c61a545792f437436a2856f?s=128&d=identicon&r=PG&f=1", "display_name": "sel", "link": "https://stackoverflow.com/users/4468210/sel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1618960578, "creation_date": 1520956113, "last_edit_date": 1520956707, "question_id": 49260412, "link": "https://stackoverflow.com/questions/49260412/unpacking-editing-and-rebuilding-ruby-gem", "title": "unpacking, editing and rebuilding ruby gem", "body": "<p>I need to edit the contents of a ruby gem, call him <strong><em>a.gem</em></strong>.<br/>\nI used <code>gem unpack a.gem</code> ,got the insides of it, and <code>gem unpack --spec a.gem</code> to get a <em>.gemspec</em>.<br/>\nI've added a new file, updated the <code>files:</code> section of the <em>.gemspec</em> to include it. <br/>I've put <em>a.gemspec</em> inside the folder resulted from unpacking the gem. <br/><br/>\nNow I'm try to <code>gem build a.gemspec</code>, and I'm getting the following error:<br/></p>\n\n<pre><code>Invalid gemspec in [logstash-output-jdbc-5.2.1-java.gemspec]: logstash-output-jdbc-5.2.1-java.gemspec:1: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('\n--- !ruby/object:Gem::Specification\n                 ^\nlogstash-output-jdbc-5.2.1-java.gemspec:2: syntax error, unexpected ':', expecting end-of-input\nname: logstash-output-jdbc\n     ^\nERROR:  Error loading gemspec. Aborting.\n</code></pre>\n\n<p>What am I doing something wrong? I'm not a ruby programmer and I just need to edit something there.</p>\n"}, {"tags": ["ruby", "sungridengine"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520955405, "post_id": 49260040, "comment_id": 85523630, "body": "Grep that repository for string &quot;class Queue&quot;. Are there really two (or more) conflicting definitions? Also, that code targets ruby 1.8.1, it seems. Ruby has gone a long way since then."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520955465, "post_id": 49260040, "comment_id": 85523685, "body": "Have you tried ruby 1.8.1? You <i>might</i> be able to install 1.8.6/1.8.7."}, {"owner": {"reputation": 18644, "user_id": 50065, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8b1ed37a47da3547e6f0b6f60a916a3?s=128&d=identicon&r=PG", "display_name": "BioGeek", "link": "https://stackoverflow.com/users/50065/biogeek"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520957795, "post_id": 49260040, "comment_id": 85525510, "body": "@SergioTulentsev Yes, I was able to downgrade Ruby, which made the <code>typeError</code> dissepear, but then other errors popped up. See my updated question."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1520958161, "post_id": 49260040, "comment_id": 85525763, "body": "Ruby 1.9 is a <i>major</i> upgrade over 1.8. In particular, it added string encodings (which on your machine, as well as mine, default to utf-8). You <i>really need</i> a 1.8.x"}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 3, "last_activity_date": 1521016162, "last_edit_date": 1521016162, "creation_date": 1520974805, "answer_id": 49265783, "question_id": 49260040, "link": "https://stackoverflow.com/questions/49260040/superclass-mismatch-for-class-queue-typeerror/49265783#49265783", "title": "superclass mismatch for class Queue (TypeError)", "body": "<p>The script adds a class <code>Queue</code> like this:</p>\n\n<pre><code>class Queue &lt; Debitable \nend\n</code></pre>\n\n<p>Ruby 2.1 introduced its own <code>Queue</code> class which inherits from <code>Object</code>. This leads to the error you mention.</p>\n\n<p>Following script demonstrates the problem:</p>\n\n<pre><code>class Thing &lt; Object\nend\n\nclass Thing &lt; String\nend\n</code></pre>\n\n<p>If you run it then Ruby will tell you that it has a <code>superclass mismatch for class Thing (TypeError)</code></p>\n\n<p>Two ways to solve this:</p>\n\n<ul>\n<li>Use Ruby &lt; 2.1 so the <code>Queue</code> class does not exist (which is kind of sad and not recommended)</li>\n<li>update the script, replace all occurences of <code>Queue</code> with <code>MyQueue</code> (you are free to come up with a better name)</li>\n</ul>\n\n<p>Potentially a 6 year old script contains other problems as well... so good luck.</p>\n\n<p>Also: if you really need different ruby version you can look at a ruby version manager like RVM or RBEnv.</p>\n"}], "owner": {"reputation": 18644, "user_id": 50065, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8b1ed37a47da3547e6f0b6f60a916a3?s=128&d=identicon&r=PG", "display_name": "BioGeek", "link": "https://stackoverflow.com/users/50065/biogeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 49265783, "answer_count": 1, "score": 0, "last_activity_date": 1521016162, "creation_date": 1520955039, "last_edit_date": 1520957722, "question_id": 49260040, "link": "https://stackoverflow.com/questions/49260040/superclass-mismatch-for-class-queue-typeerror", "title": "superclass mismatch for class Queue (TypeError)", "body": "<p>When running the <a href=\"https://github.com/gridengine/gridengine/blob/master/source/scripts/analyze.rb\" rel=\"nofollow noreferrer\">analyze.rb</a> script from <a href=\"https://github.com/gridengine/gridengine\" rel=\"nofollow noreferrer\">Univa Grid Engine Open Core</a> , I get a TypeError:</p>\n\n<pre><code>$ ./analyze.rb \n./analyze.rb:214:in `&lt;main&gt;': superclass mismatch for class Queue (TypeError)\n</code></pre>\n\n<p>The script was developed for Ruby 1.8.1, but I am using a more recent version:</p>\n\n<pre><code>$ ruby -v\nruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-linux]\n$ uname -a\nLinux &lt;hostname&gt; 2.6.32-642.4.2.el6.x86_64 #1 SMP Mon Aug 15 02:06:41 EDT 2016 x86_64 x86_64 x86_64 GNU/Linux\n$ head -n1 /etc/issue\nRed Hat Enterprise Linux Server release 6.8 (Santiago)\n</code></pre>\n\n<p>I've opened <a href=\"https://github.com/gridengine/gridengine/issues/9\" rel=\"nofollow noreferrer\">a GitHub issue</a>, but the last activity on the repro was from 6 years ago, so that's why I am also asking here.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>If I downgrade my Ruby version to <code>1.9.3</code>, the <code>TypeError</code> dissapears...</p>\n\n<pre><code>$ conda uninstall ruby\nFetching package metadata .......\nSolving package specifications: ..........\n\nPackage plan for package removal in environment /tools/general/app/anaconda-python-3.4/envs/accounting:\n\nThe following packages will be REMOVED:\n\n    ruby: 2.2.3-0 bioconda\n\nProceed ([y]/n)? y\n\nUnlinking packages ...\n[      COMPLETE      ]|###############################################################################################################| 100%\n\n$ conda install -c kalefranz ruby=1.9\nFetching package metadata .........\nSolving package specifications: ..........\n\nPackage plan for installation in environment /tools/general/app/anaconda-python-3.4/envs/accounting:\n\nThe following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    libffi-3.2.1               |                1          38 KB\n    ncurses-5.9                |                5         640 KB  kalefranz\n    ruby-1.9.3.551             |                0        12.8 MB  kalefranz\n    ------------------------------------------------------------\n                                           Total:        13.4 MB\n\nThe following NEW packages will be INSTALLED:\n\n    libffi:  3.2.1-1              \n    ncurses: 5.9-5       kalefranz\n    ruby:    1.9.3.551-0 kalefranz\n\nProceed ([y]/n)? y\n\nFetching packages ...\nlibffi-3.2.1-1 100% |############################################################################################| Time: 0:00:00 852.02 kB/s\nncurses-5.9-5. 100% |############################################################################################| Time: 0:00:01 504.77 kB/s\nruby-1.9.3.551 100% |############################################################################################| Time: 0:00:22 606.26 kB/s\nExtracting packages ...\n[      COMPLETE      ]|###############################################################################################################| 100%\nLinking packages ...\n[      COMPLETE      ]|###############################################################################################################| 100%\n$ ruby -v\nruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-linux]\n$ ruby ./analyze.rb \nusage: analyze.rb &lt;options&gt; accounting_file\n        -help\n        -r                                records table\n        -u                                users table\n        -h                                hosts table\n        -par                              parallel environment table\n        -q                                queues table\n        -p                                projects table\n        -c                                categories table\n        -ts                               timesteps table\n        -ts_c                             categories per timestep\n        -ts_j                             jobs per timestep\n        -t \"first\"|&lt;first&gt; \"last\"|&lt;last&gt;  full analysis, but print these timesteps only\n</code></pre>\n\n<p>...but as soon as I try to process the accounting file, other errors pop up:</p>\n\n<pre><code>$ ./analyze.rb -ts /gridware/uge/default//common/accounting \ninvalid record 14473350 submitted 1503752102682 started 0 ended 0 wallclock 0\ninvalid record 14473350 submitted 1503752102682 started 0 ended 0 wallclock 0\ninvalid record 14473350 submitted 1503752102682 started 0 ended 0 wallclock 0\ninvalid record 14473350 submitted 1503752102682 started 0 ended 0 wallclock 0\ninvalid record 14473350 submitted 1503752102682 started 0 ended 0 wallclock 0\n./analyze.rb:151:in `split': invalid byte sequence in UTF-8 (ArgumentError)\n    from ./analyze.rb:151:in `block in initialize'\n    from ./analyze.rb:149:in `each_line'\n    from ./analyze.rb:149:in `initialize'\n    from ./analyze.rb:557:in `new'\n    from ./analyze.rb:557:in `read_records'\n    from ./analyze.rb:774:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "edited": false, "score": 0, "creation_date": 1520954143, "post_id": 49259682, "comment_id": 85522718, "body": "the nokogiri is the dependent gem"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1520956109, "post_id": 49259682, "comment_id": 85524169, "body": "You have to find the gem that&#39;s requiring Nokogiri 1.8.2 and use a version that is compatible with your (ancient) version of Ruby."}, {"owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 1, "creation_date": 1520956920, "post_id": 49259682, "comment_id": 85524825, "body": "It&#39;s really difficult to figure out from where it came. is there any way to figure out this?"}], "answers": [{"comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1520956132, "post_id": 49260058, "comment_id": 85524198, "body": "The OP isn&#39;t directly including Nokogiri; it&#39;s a dependency of something else he/she is pulling in."}, {"owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "edited": false, "score": 0, "creation_date": 1520956827, "post_id": 49260058, "comment_id": 85524733, "body": "nokogiri is the dependency of something and not sure what level is it. is there any way to find where it came? Due to some reason if ruby version is not upgraded then how we can resolve this type of issues."}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1520964598, "post_id": 49260058, "comment_id": 85529661, "body": "as of now to debug this issue, if you are using git or svn, then you can check the version of nokogiri in a gemlock file on the previous commits. which will confirm that whether the version of nokogiri is changed or not. To make sure this type of issues could not come in future you have to mention the version of every gem in gem file, which will not update the version of any gem while bundle install."}], "tags": [], "owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "is_accepted": true, "score": -1, "last_activity_date": 1520955092, "creation_date": 1520955092, "answer_id": 49260058, "question_id": 49259682, "link": "https://stackoverflow.com/questions/49259682/installerror-nokogiri-requires-ruby-version-2-1-0/49260058#49260058", "title": "InstallError: nokogiri requires Ruby version &gt;= 2.1.0", "body": "<p>You need to install the compatible version of nokogiri with ruby version 1.9.3</p>\n\n<p><code>gem 'nokogiri', '~&gt; 1.6', '&gt;= 1.6.8.1'</code> in your Gemfile.</p>\n\n<p>But note, that Ruby versions below 2.1 are no longer maintained and no longer supported by nokogiri.</p>\n\n<p>hope it will help you out</p>\n"}], "owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 49260058, "answer_count": 1, "score": 1, "last_activity_date": 1520960684, "creation_date": 1520954005, "last_edit_date": 1520960684, "question_id": 49259682, "link": "https://stackoverflow.com/questions/49259682/installerror-nokogiri-requires-ruby-version-2-1-0", "title": "InstallError: nokogiri requires Ruby version &gt;= 2.1.0", "body": "<p>My current rails application has been built on ruby 1.9.3 and rails 3. I am doing bundle install one of the rails engines and I am received following error</p>\n\n<pre><code>Gem::InstallError: nokogiri requires Ruby version &gt;= 2.1.0.\nAn error occurred while installing nokogiri (1.8.2), and Bundler cannot continue.\nMake sure that `gem install nokogiri -v '1.8.2'` succeeds before bundling.\n</code></pre>\n\n<p>How I can get rid of this issue without updating ruby version. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "error-handling", "find-by-sql"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1520954787, "post_id": 49259530, "comment_id": 85523177, "body": "show how you generate the activation links"}, {"owner": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520955609, "post_id": 49259530, "comment_id": 85523796, "body": "I added it to the post"}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 1, "creation_date": 1520959589, "post_id": 49259530, "comment_id": 85526669, "body": "<code>Started GET &quot;&#47;account_activations&#47;3ntNspTHh-PVOYo9xIHS=cg&#47;edit?email=3Da&zwnj;&#8203;b1%40stud.uni-hannov&zwnj;&#8203;er.de&quot; for 127.0.0.1 at 2018-03-13 16:49:41 +0100</code> this link in your log indicates you did not encode the email at the right spot.  Your params currently looks like <code>Parameters: {&quot;email&quot;=&gt;&quot;ab1@stud.uni-hannover.de&quot;, &quot;id&quot;=&gt;&quot;3ntNspTHh-PVOYo9xIHS=cg&quot;}</code> so the value of <code>params[:email]</code> is not encoded with 64bit therefore it cannot be decoded with 64bit."}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 1, "creation_date": 1520959794, "post_id": 49259530, "comment_id": 85526813, "body": "Secondly revert the code in your mailer from <code>mail to: Base64.urlsafe_encode64(user.email)</code> back to <code>mail to: user.email</code>, you do not want to tell the mailer to send it to a 64bit converted hash.  We want the email to go out to the actual email."}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 1, "creation_date": 1520960525, "post_id": 49259530, "comment_id": 85527291, "body": "So what do your routes look like for account_activations currently?  Please edit your current post and paste.  Thanks"}, {"owner": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "edited": false, "score": 0, "creation_date": 1520962334, "post_id": 49259530, "comment_id": 85528342, "body": "My original post has the routes file added now. I want to add the encoding correctly now but I can&#39;t find a spot in my code where I can put it in. I thought it needs to be before the creation process (visible in the users.controller) but I can&#39;t find a point to edit the email information of the form, directly after it gets into the application. I thought the better way is to first of all solve the original problem and add more complexity by encoding the email afterwards."}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 1, "creation_date": 1520978366, "post_id": 49259530, "comment_id": 85536458, "body": "You should be calling the params hash as params[:user][:email] since it&#39;s nested.  params[:email] shouldn&#39;t work as is.  Look at your parameters hash in the log you posted under the POST request by the server and you&#39;ll see it&#39;s nested.  user=&gt; {email: value} needs to be called as params[:user][:email]"}, {"owner": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "edited": false, "score": 0, "creation_date": 1520989125, "post_id": 49259530, "comment_id": 85539798, "body": "Ohh thanks god, that there is still somebody looking at this post. Now it&#39;s 2 am here in Germany and I still didn&#39;t get the solution. It woud be a big loss to cut out this functionality :(. So I tried it how you recommended. First of all thanks for trying, but it gave me a new error: &quot;undefined method `[]&#39; for nil:NilClass&quot;. I will add a picture and the log to the original post."}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 0, "creation_date": 1521043927, "post_id": 49259530, "comment_id": 85567973, "body": "@Mostah, we can figure it out, it&#39;s not too difficult a problem, let&#39;s not give up on it.  So upon looking at the code further, I believe this is the code that is generating your activation_link, and here is where you should do your 64bitENCODING of the email: <code>&lt;%= link_to &quot;Aktivieren&quot;, edit_account_activation_url(@user.activation_token, email: @user.email) %&gt;</code> change that to: <code>&lt;%= link_to &quot;Aktivieren&quot;, edit_account_activation_url(@user.activation_token, email: Base64.urlsafe_encode64(@user.email)) %&gt;</code> and revert the code back to using <code>params[:email]</code> not <code>params[:user][:email]</code>"}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1521044418, "post_id": 49259530, "comment_id": 85568332, "body": "@bkunzi01, this is his the params hash he is dealing with and it is not nested:  <code>Parameters: {&quot;email&quot;=&gt;&quot;3Dsamikhedira@stud.uni-hannover.de&quot;, &quot;id&quot;=&gt;&quot;WFJAfA0Ed4h-eL13PApg=ng&quot;}</code>, so <code>params[:email]</code> is the correct way to grab the email in this case."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "edited": false, "score": 1, "creation_date": 1520955690, "post_id": 49260030, "comment_id": 85523864, "body": "We verify the uniqueness like that in the model:     VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@(stud.uni-hannover.de|wiwi.uni-hannover.de)+\\z/&zwnj;&#8203;i     validates :email, presence: true, length: { maximum: 255 }, format: { with: VALID_EMAIL_REGEX }, uniqueness: {case_sensitive: false}"}, {"owner": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "edited": false, "score": 0, "creation_date": 1520957644, "post_id": 49260030, "comment_id": 85525396, "body": "Yes, I am fine with my validation, but the problem of the unsuccessful &quot;find_by&quot; still remains"}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "reply_to_user": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "edited": false, "score": 0, "creation_date": 1520959207, "post_id": 49260030, "comment_id": 85526425, "body": "ok so let&#39;s start with this.... first of all you should only edit your original post to reflect any changes you want to make to your question so it&#39;s easier and more organized so that the community can help you answer your question more quickly.  So please delete all of your posts that are answers and I will start leaving my comments on your original question which you should be editing.  So my next comments will be up there."}], "tags": [], "owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "is_accepted": false, "score": 3, "last_activity_date": 1520955651, "last_edit_date": 1520955651, "creation_date": 1520955017, "answer_id": 49260030, "question_id": 49259530, "link": "https://stackoverflow.com/questions/49259530/find-by-function-isnt-successful-eventhough-it-should/49260030#49260030", "title": "find_by function isn&#39;t successful eventhough it should", "body": "<p>You could convert the email and make it url safe like below.  You should be alright as long as you are verifying the uniqueness of all the emails in your database.  Hope this helps.</p>\n\n<pre><code>Base64.urlsafe_encode64(\"uglas@stud.uni-hannover.de\")\n# \"dWdsYXNAc3R1ZC51bmktaGFubm92ZXIuZGU=\" \n\nBase64.urlsafe_decode64(\"dWdsYXNAc3R1ZC51bmktaGFubm92ZXIuZGU=\")\n#  \"uglas@stud.uni-hannover.de\" \n</code></pre>\n\n<p>So wherever you are generating your activation link, make the 64bit conversion there so that the new link will now look like:</p>\n\n<pre><code>http://localhost:3000/account_activations/9rxXuiQEEXmeOnqcS_m-=\nVQ/edit?email=\"dWdsYXNAc3R1ZC51bmktaGFubm92ZXIuZGU=\"\n</code></pre>\n\n<p>And now when you are getting your <code>params[:email]</code> you can simply convert it back like so:</p>\n\n<pre><code>user = User.find_by(Base64.urlsafe_decode64(params[:email]))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 0, "creation_date": 1521044192, "post_id": 49275011, "comment_id": 85568149, "body": "I just saw this, glad you got it working.  But if you get the chance see my last comment above."}], "tags": [], "owner": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "is_accepted": false, "score": 0, "last_activity_date": 1521023681, "last_edit_date": 1521023681, "creation_date": 1521022469, "answer_id": 49275011, "question_id": 49259530, "link": "https://stackoverflow.com/questions/49259530/find-by-function-isnt-successful-eventhough-it-should/49275011#49275011", "title": "find_by function isn&#39;t successful eventhough it should", "body": "<p>I solved the issue by setting the View/Mailer back to an older version.</p>\n\n<p>Here you can see the difference between a successful link at the top and a false one at the bottom!</p>\n\n<p><a href=\"http://localhost:3000/account_activations/iTIWL74dAzPlsVckrOc6Uw/edit?email=dana%40stud.uni-hannover.de\" rel=\"nofollow noreferrer\">http://localhost:3000/account_activations/iTIWL74dAzPlsVckrOc6Uw/edit?email=dana%40stud.uni-hannover.de</a></p>\n\n<p><a href=\"http://localhost:3000/account_activations/iTIWL74dAzPlsVckrOc6Uw/edit?ema=il=3Ddana%40stud.uni-hannover.de\" rel=\"nofollow noreferrer\">http://localhost:3000/account_activations/iTIWL74dAzPlsVckrOc6Uw/edit?ema=il=3Ddana%40stud.uni-hannover.de</a></p>\n\n<p>The suggestion from the beginning that the 3D causes the problem was right. I didn't even change the activation link. It was enough to put a German letter \"\u00fc\" in the email text. That fucked up the link to. I don't really understand that connection but now everything is fine. I hope that someone in the future can profit from my experiences.</p>\n\n<p>Kind regards to everyone who helped, you are heroes!</p>\n"}], "owner": {"reputation": 25, "user_id": 9377256, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1082ef9e27342d7cd93f04e30507a723?s=128&d=identicon&r=PG&f=1", "display_name": "Mostah", "link": "https://stackoverflow.com/users/9377256/mostah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521023681, "creation_date": 1520953581, "last_edit_date": 1521021095, "question_id": 49259530, "link": "https://stackoverflow.com/questions/49259530/find-by-function-isnt-successful-eventhough-it-should", "title": "find_by function isn&#39;t successful eventhough it should", "body": "<p>my programming team created an account activation function like in Michael Hartl's Rails tutorial. Now after a few weeks of coding the function stopped working. So that is the full function:</p>\n\n<pre><code>class AccountActivationsController &lt; ApplicationController\n\n#Dieser Controller ist notwendig, um einen neu registrierten Account via Aktivierungsmail zu aktivieren.\n\n  def edit\n    user = User.find_by(email: params[:email])\n    if user &amp;&amp; !user.activated? &amp;&amp; user.authenticated?(:activation, params[:id])\n      user.activate\n      log_in user\n      flash[:success] = \"Account aktiviert!\"\n      redirect_to user\n    else\n      flash[:danger] = \"Ung\u00fcltiger Aktivierungslink\"\n      redirect_to root_url\n    end\n  end\nend\n</code></pre>\n\n<p>We get the danger message coming from the else loop. We tried to break the problem down into pieces and now we know that the condition:</p>\n\n<pre><code>user = User.find_by(email: params[:email]) \n</code></pre>\n\n<p>is not successful.</p>\n\n<p>I would like to have some suggestions, why this activation link:</p>\n\n<pre><code>http://localhost:3000/account_activations/hX1eY83-wcs8VqZcPa0H=\n3g/edit?email=3Dsami.khedira%40stud.uni-hannover.de\n</code></pre>\n\n<p>doesn't give the right information to find the User \"sami.khedira@stud.uni-hannover.de\" in the data base. We can see the user in the data base and the save function before worked. I also looked through an earlier version of the app, where it worked. I don't see any changes in the functions, so maybe something that we added somewhere destroyed the registration, but from my point of view there is nothing missing.</p>\n\n<p>Additionally the password_reset function doesn't work as well.</p>\n\n<p>The create User function from the user controller:</p>\n\n<pre><code>  def create\n    @user = User.new(user_params)\n    if @user.save\n      @user.send_activation_email\n      flash[:info] = \"Bitte \u00f6ffnen Sie Ihr E-Mail Postfach, um den Account zu aktivieren.\"\n      redirect_to root_url\n    else\n      render 'new'\n    end\n  end\n</code></pre>\n\n<p>Here is how we create the digest:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n\n  # Activates an account.\n  def activate\n    update_columns(activated: true, activated_at: Time.zone.now)\n  end\n\n  # Sends activation email.\n  def send_activation_email\n    UserMailer.account_activation(self).deliver_now\n  end\n\n  # Sets the password reset attributes.\n  def create_reset_digest\n    self.reset_token = User.new_token\n    update_columns(reset_digest:  User.digest(reset_token), reset_sent_at: Time.zone.now)\n  end\n\n  # Sends password reset email.\n  def send_password_reset_email\n    UserMailer.password_reset(self).deliver_now\n  end\n\n  # Returns true if a password reset has expired.\n  def password_reset_expired?\n    reset_sent_at &lt; 2.hours.ago\n  end\n\n  private\n\n    # Converts email to all lower-case.\n    def downcase_email\n      self.email = email.downcase\n    end\n\n    # Creates and assigns the activation token and digest.\n    def create_activation_digest\n      self.activation_token  = User.new_token\n      self.activation_digest = User.digest(activation_token)\n    end\n\nend\n</code></pre>\n\n<p>Views/User Mailer/Account_activation.html.erb:</p>\n\n<pre><code>&lt;h1&gt;Bachelorarbeitszuordnung&lt;/h1&gt;\n\n&lt;p&gt;Sehr geehrter Herr / Sehr geehrte Frau &lt;%= @user.name %&gt;,&lt;/p&gt;\n\n&lt;p&gt;\nSie haben sich f\u00fcr die Bachelorarbeit registriert! Klicken Sie auf den untenstehenden Link, um ihren Account zu aktivieren:\n&lt;/p&gt;\n\n&lt;%= link_to \"Aktivieren\", edit_account_activation_url(@user.activation_token,\n                                                    email: @user.email) %&gt;\n</code></pre>\n\n<p>User Mailer:</p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n\n\n  def account_activation(user)\n    @user = user\n    mail to: user.email, subject: \"Account activation\"\n  end\n\n  def password_reset(user)\n    @user = user\n    mail to: user.email, subject: \"Password reset\"\n  end\nend\n</code></pre>\n\n<p>Application Mailer:</p>\n\n<pre><code>class ApplicationMailer &lt; ActionMailer::Base\n  default from: \"noreply@stud.uni-hannover.de\"\n  layout 'mailer'\nend\n</code></pre>\n\n<p>Here is the routes file, I already know by other users, that it is not perfect, but I currently don't know how to improve it. I read the guide on rails routing, but I don't see why my routing is not good:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  resources :deadlines\n  resources :preferences\n  resources :institutes\n  resources :users\n  resources :admin, to: 'users#admin'\n\n  get 'password_resets/new'\n  get 'password_resets/edit'\n\n  root 'static_pages#home'\n  get '/home', to: 'static_pages#home'\n  get '/help', to: 'static_pages#help'\n  get '/about', to: 'static_pages#about'\n  get '/contact', to: 'static_pages#contact'\n  get '/matching', to: 'static_pages#matching'\n  get '/cockpit', to: 'static_pages#cockpit'\n\n  get '/signup', to: 'users#new'\n  post '/signup',  to: 'users#create'\n\n  get '/performance_show', to: 'users#performance_show'\n  get '/performance_update', to: 'users#performance_update'\n\n  post 'preferences/create_all', to: 'preferences#create_all'\n\n  get '/login', to: 'sessions#new'\n  post '/login', to: 'sessions#create'\n  delete '/logout', to: 'sessions#destroy'\n\n  resources :account_activations, only: [:edit]\n  resources :password_resets,     only: [:new, :create, :edit, :update]\n\n  # Routes f\u00fcr die Buttons der GAMS Berechnung\n  post 'read_matching', to: 'static_pages#read_matching'\n  post 'delete_matching', to: 'static_pages#delete_matching'\n  post 'optimize', to: 'static_pages#optimize'\n\n  # Route f\u00fcr Button zum L\u00f6schen aller Studenten\n  delete 'delete_all', to: 'users#delete_all'\n\n  #Route f\u00fcr Page zum L\u00f6schen des eigenen Accounts.\n  get 'delete_account', to: 'users#delete_account'\n  delete 'delete_account_sure', to: 'users#delete_account_sure'\n\nend\n</code></pre>\n\n<p>And here is my log. It starts with the registration of the user \"Sami Khedira\":</p>\n\n<pre><code>Started POST \"/users\" for 127.0.0.1 at 2018-03-13 17:41:09 +0100\nProcessing by UsersController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"hbZ8A9CWC60nyXYd3nf6Dv0M+d/ViCp0PJ8AmG/fI5ZvyE+hFBt5n8W54gg9yNqZQTfSuOa8PyUD16a3qoRGsg==\", \"user\"=&gt;{\"name\"=&gt;\"Sami Khedira\", \"mat_number\"=&gt;\"1234567\", \"email\"=&gt;\"sami.khedira@stud.uni-hannover.de\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Erstelle meinen Account\"}\n  [1m[35m (1.0ms)[0m  [1m[36mbegin transaction[0m\n  [1m[36mUser Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER(?) LIMIT ?[0m  [[\"email\", \"sami.khedira@stud.uni-hannover.de\"], [\"LIMIT\", 1]]\n  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO \"users\" (\"name\", \"email\", \"created_at\", \"updated_at\", \"password_digest\", \"activation_digest\", \"mat_number\") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [[\"name\", \"Sami Khedira\"], [\"email\", \"sami.khedira@stud.uni-hannover.de\"], [\"created_at\", \"2018-03-13 16:41:10.395281\"], [\"updated_at\", \"2018-03-13 16:41:10.395281\"], [\"password_digest\", \"$2a$10$2BLl1RzF2SOPB9/S5y.oC.W3vUY64GX9jOtd9EfOhrhs3Wnd7Z0Ky\"], [\"activation_digest\", \"$2a$10$MaFRiFb195HRm8AQ14OU.ey5ds5qDvR9nznFLBgClNXM21VqQh0AK\"], [\"mat_number\", 1234567]]\n  [1m[35m (11.9ms)[0m  [1m[36mcommit transaction[0m\n  Rendering user_mailer/account_activation.html.erb within layouts/mailer\n  Rendered user_mailer/account_activation.html.erb within layouts/mailer (29.8ms)\n  Rendering user_mailer/account_activation.text.erb within layouts/mailer\n  Rendered user_mailer/account_activation.text.erb within layouts/mailer (7.8ms)\nUserMailer#account_activation: processed outbound mail in 80.2ms\nSent mail to sami.khedira@stud.uni-hannover.de (31.7ms)\nDate: Tue, 13 Mar 2018 17:41:11 +0100\n\nFrom: noreply@stud.uni-hannover.de\n\nTo: sami.khedira@stud.uni-hannover.de\n\nMessage-ID: &lt;5aa7ff27a2570_3afe126dc7462164@studi-VirtualBox.mail&gt;\n\nSubject: Account activation\n\nMime-Version: 1.0\n\nContent-Type: multipart/alternative;\n\n boundary=\"--==_mimepart_5aa7ff279cbd7_3afe126dc74620d2\";\n\n charset=UTF-8\n\nContent-Transfer-Encoding: 7bit\n\n\n\n\n\n----==_mimepart_5aa7ff279cbd7_3afe126dc74620d2\n\nContent-Type: text/plain;\n\n charset=UTF-8\n\nContent-Transfer-Encoding: quoted-printable\n\n\n\nSehr geehrter Herr Sami Khedira,\n\nSie haben sich f=C3=BCr die Bachelorarbeit registriert! Klicken Sie auf d=\nen untenstehenden Link, um ihren Account zu aktivieren:\n\n&lt;a href=3D\"http://localhost:3000/account_activations/hX1eY83-wcs8VqZcPa0H=\n3g/edit?email=3Dsami.khedira%40stud.uni-hannover.de\"&gt;Aktivieren&lt;/a&gt;\n\n\n\n----==_mimepart_5aa7ff279cbd7_3afe126dc74620d2\n\nContent-Type: text/html;\n\n charset=UTF-8\n\nContent-Transfer-Encoding: quoted-printable\n\n\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta http-equiv=3D\"Content-Type\" content=3D\"text/html; charset=3Dutf=\n-8\" /&gt;\n    &lt;style&gt;\n      /* Email styles need to be inline */\n    &lt;/style&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;Bachelorarbeitszuordnung&lt;/h1&gt;\n\n&lt;p&gt;Sehr geehrter Herr Sami Khedira,&lt;/p&gt;\n\n&lt;p&gt;\nSie haben sich f=C3=BCr die Bachelorarbeit registriert! Klicken Sie auf d=\nen untenstehenden Link, um ihren Account zu aktivieren:\n&lt;/p&gt;\n\n&lt;a href=3D\"http://localhost:3000/account_activations/hX1eY83-wcs8VqZcPa0H=\n3g/edit?email=3Dsami.khedira%40stud.uni-hannover.de\"&gt;Aktivieren&lt;/a&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n\n\n----==_mimepart_5aa7ff279cbd7_3afe126dc74620d2--\n\n\nRedirected to http://localhost:3000/\nCompleted 302 Found in 1972ms (ActiveRecord: 65.1ms)\n\n\nStarted GET \"/\" for 127.0.0.1 at 2018-03-13 17:41:11 +0100\nProcessing by StaticPagesController#home as HTML\n  Rendering static_pages/home.html.erb within layouts/application\n  Rendered static_pages/home.html.erb within layouts/application (22.8ms)\n  Rendered layouts/_rails_default.html.erb (604.6ms)\n  Rendered layouts/_shim.html.erb (0.4ms)\n  Rendered layouts/_header.html.erb (7.5ms)\n  Rendered layouts/_footer.html.erb (3.8ms)\nCompleted 200 OK in 765ms (Views: 755.8ms | ActiveRecord: 0.0ms)  \n\nStarted GET \"/\" for 127.0.0.1 at 2018-03-13 17:47:23 +0100\nProcessing by StaticPagesController#home as HTML\n  Rendering static_pages/home.html.erb within layouts/application\n  Rendered static_pages/home.html.erb within layouts/application (965.2ms)\n  Rendered layouts/_rails_default.html.erb (11813.6ms)\n  Rendered layouts/_shim.html.erb (66.2ms)\n  Rendered layouts/_header.html.erb (194.1ms)\n  Rendered layouts/_footer.html.erb (53.3ms)\nCompleted 200 OK in 14350ms (Views: 14125.1ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>Thank you very much!</p>\n\n<p>Edit:\nUser bkunzi01 recommended me to exchange (email: params[:email]) with params[:user][:email]. That gave me the following error:\n<a href=\"https://i.stack.imgur.com/JU8BJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JU8BJ.png\" alt=\"Error Message\"></a></p>\n\n<p>Logfile:</p>\n\n<pre><code>Started POST \"/users\" for 127.0.0.1 at 2018-03-14 02:07:04 +0100\nProcessing by UsersController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"6vTYSvvGONUEC7hEP/C/AqEHAeQ+oQToqHQGKuBsM7ozw/N+w11mWnIb1x4Io5CWU/eYpYwncObyWWC+zKY4Jg==\", \"user\"=&gt;{\"name\"=&gt;\"Sami Khedira\", \"mat_number\"=&gt;\"12345678\", \"email\"=&gt;\"samikhedira@stud.uni-hannover.de\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Erstelle meinen Account\"}\n   (0.1ms)  begin transaction\n  User Exists (1.9ms)  SELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER(?) LIMIT ?  [[\"email\", \"samikhedira@stud.uni-hannover.de\"], [\"LIMIT\", 1]]\n  SQL (14.4ms)  INSERT INTO \"users\" (\"name\", \"email\", \"created_at\", \"updated_at\", \"password_digest\", \"activation_digest\", \"mat_number\") VALUES (?, ?, ?, ?, ?, ?, ?)  [[\"name\", \"Sami Khedira\"], [\"email\", \"samikhedira@stud.uni-hannover.de\"], [\"created_at\", \"2018-03-14 01:07:04.901137\"], [\"updated_at\", \"2018-03-14 01:07:04.901137\"], [\"password_digest\", \"$2a$10$whjEx3oPnLxyNFZomWst4uCAPqweV0jBtN342mlx.sJwAm6A4JD7a\"], [\"activation_digest\", \"$2a$10$EG9MOsxQYUJC2//VGj6Iyu1CB7/39NP3mMpv1BjE2QrYx2WeZCM7K\"], [\"mat_number\", 12345678]]\n   (62.6ms)  commit transaction\n  Rendering user_mailer/account_activation.html.erb within layouts/mailer\n  Rendered user_mailer/account_activation.html.erb within layouts/mailer (9.2ms)\n  Rendering user_mailer/account_activation.text.erb within layouts/mailer\n  Rendered user_mailer/account_activation.text.erb within layouts/mailer (9.3ms)\nUserMailer#account_activation: processed outbound mail in 142.7ms\nSent mail to samikhedira@stud.uni-hannover.de (116.4ms)\nDate: Wed, 14 Mar 2018 02:07:05 +0100\nFrom: noreply@stud.uni-hannover.de\nTo: samikhedira@stud.uni-hannover.de\nMessage-ID: &lt;5aa875b964bd3_4c5f1f7f0d42644@studi-VirtualBox.mail&gt;\nSubject: Account activation\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_5aa875b94bfdf_4c5f1f7f0d4257f\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n\n----==_mimepart_5aa875b94bfdf_4c5f1f7f0d4257f\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: quoted-printable\n\nSehr geehrter Herr Sami Khedira,\n\nSie haben sich f=C3=BCr die Bachelorarbeit registriert! Klicken Sie auf d=\nen untenstehenden Link, um ihren Account zu aktivieren:\n\n&lt;a href=3D\"http://localhost:3000/account_activations/WFJAfA0Ed4h-eL13PApg=\nng/edit?email=3Dsamikhedira%40stud.uni-hannover.de\"&gt;Aktivieren&lt;/a&gt;\n\n\n----==_mimepart_5aa875b94bfdf_4c5f1f7f0d4257f\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: quoted-printable\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta http-equiv=3D\"Content-Type\" content=3D\"text/html; charset=3Dutf=\n-8\" /&gt;\n    &lt;style&gt;\n      /* Email styles need to be inline */\n    &lt;/style&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;Bachelorarbeitszuordnung&lt;/h1&gt;\n\n&lt;p&gt;Sehr geehrter Herr / Sehr geehrte Frau Sami Khedira,&lt;/p&gt;\n\n&lt;p&gt;\nSie haben sich f=C3=BCr die Bachelorarbeit registriert! Klicken Sie auf d=\nen untenstehenden Link, um ihren Account zu aktivieren:\n&lt;/p&gt;\n\n&lt;a href=3D\"http://localhost:3000/account_activations/WFJAfA0Ed4h-eL13PApg=\nng/edit?email=3Dsamikhedira%40stud.uni-hannover.de\"&gt;Aktivieren&lt;/a&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n\n----==_mimepart_5aa875b94bfdf_4c5f1f7f0d4257f--\n\nRedirected to http://localhost:3000/\nCompleted 302 Found in 1177ms (ActiveRecord: 128.8ms)\n\n\nStarted GET \"/\" for 127.0.0.1 at 2018-03-14 02:07:05 +0100\nProcessing by StaticPagesController#home as HTML\n  Rendering static_pages/home.html.erb within layouts/application\n  Rendered static_pages/home.html.erb within layouts/application (6.4ms)\n  Rendered layouts/_rails_default.html.erb (234.4ms)\n  Rendered layouts/_shim.html.erb (0.6ms)\n  Rendered layouts/_header.html.erb (12.3ms)\n  Rendered layouts/_footer.html.erb (1.9ms)\nCompleted 200 OK in 305ms (Views: 301.8ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/account_activations/WFJAfA0Ed4h-eL13PApg=ng/edit?email=3Dsamikhedira%40stud.uni-hannover.de\" for 127.0.0.1 at 2018-03-14 02:07:44 +0100\nProcessing by AccountActivationsController#edit as HTML\n  Parameters: {\"email\"=&gt;\"3Dsamikhedira@stud.uni-hannover.de\", \"id\"=&gt;\"WFJAfA0Ed4h-eL13PApg=ng\"}\nCompleted 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)\n\n\n\nNoMethodError (undefined method `[]' for nil:NilClass):\n\napp/controllers/account_activations_controller.rb:6:in `edit'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "centos"], "comments": [{"owner": {"reputation": 1392, "user_id": 2922609, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/JRouJ.png?s=128&g=1", "display_name": "ivanibash", "link": "https://stackoverflow.com/users/2922609/ivanibash"}, "edited": false, "score": 0, "creation_date": 1520952721, "post_id": 49259201, "comment_id": 85521659, "body": "<a href=\"https://stackoverflow.com/questions/25814210/opensslsslsslerror-ssl-connect-syscall-returned-5-errno-0-state-sslv3-read\" title=\"opensslsslsslerror ssl connect syscall returned 5 errno 0 state sslv3 read\">stackoverflow.com/questions/25814210/&hellip;</a> is this of help?"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1520955359, "post_id": 49259201, "comment_id": 85523597, "body": "can you please check once to make sure that your SSL certificate is recently updated or not. This might occur because of certification expiration."}, {"owner": {"reputation": 1489, "user_id": 1502265, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a8ac24cd3d45380561f03f3da6cf5de?s=128&d=identicon&r=PG", "display_name": "Guy Segev", "link": "https://stackoverflow.com/users/1502265/guy-segev"}, "edited": false, "score": 0, "creation_date": 1520955739, "post_id": 49259201, "comment_id": 85523903, "body": "We check the certificate and it is fine. We running <code>openssl ciphers -v | awk &#39;{print $2}&#39; | sort | uniq</code> we get: <code>SSLv3</code> and <code>TLSv1.2</code>"}], "owner": {"reputation": 1489, "user_id": 1502265, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a8ac24cd3d45380561f03f3da6cf5de?s=128&d=identicon&r=PG", "display_name": "Guy Segev", "link": "https://stackoverflow.com/users/1502265/guy-segev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1358, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520952514, "creation_date": 1520952514, "question_id": 49259201, "link": "https://stackoverflow.com/questions/49259201/error-ssl-connect-syscall-returned-5-errno-0-state-sslv2-v3-read-server-hello-a", "title": "Error: SSL_connect SYSCALL returned=5 errno=0 state=SSLv2/v3 read server hello A", "body": "<p>I getting the following error on Rails 2.2.4 and openssl 1.0.2 on CentOS</p>\n\n<pre><code>SSL_connect SYSCALL returned=5 errno=0 state=SSLv2/v3 read server hello A\n\nbacktrace:\n\n\"/opt/issues_service/ruby/lib/ruby/2.2.0/net/http.rb:923:in `connect'\",\n\"/opt/issues_service/ruby/lib/ruby/2.2.0/net/http.rb:923:in `block in connect'\",\n\"/opt/issues_service/ruby/lib/ruby/2.2.0/timeout.rb:73:in `timeout'\",\n\"/opt/issues_service/ruby/lib/ruby/2.2.0/net/http.rb:923:in `connect'\",\n\"/opt/issues_service/ruby/lib/ruby/gems/2.2.0/gems/httplog-0.3.2/lib/httplog/adapters/net_http.rb:38:in `connect'\",\n\"/opt/issues_service/ruby/lib/ruby/2.2.0/net/http.rb:863:in `do_start'\",\n\"/opt/issues_service/ruby/lib/ruby/2.2.0/net/http.rb:852:in `start'\",\n\"/opt/issues_service/ruby/lib/ruby/2.2.0/net/http.rb:1375:in `request'\",\n...\n</code></pre>\n\n<p>Any idea? </p>\n"}, {"tags": ["ruby", "http"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1520952556, "post_id": 49259081, "comment_id": 85521526, "body": "Can you show us the code where this is happening because as the error mentions <code>Hash</code> does not have a <code>&lt;&lt;</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 1916, "user_id": 89082, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ed77c0d1c8da409c4f69f67f934ff0bb?s=128&d=identicon&r=PG", "display_name": "Martinos", "link": "https://stackoverflow.com/users/89082/martinos"}, "edited": false, "score": 0, "creation_date": 1520954973, "post_id": 49259351, "comment_id": 85523305, "body": "Thanks the issue is caused by the fakeweb gem. I removed it and the problem disappeared.  Note that the fakeweb gem does not have any recent release so I just diched it."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1916, "user_id": 89082, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ed77c0d1c8da409c4f69f67f934ff0bb?s=128&d=identicon&r=PG", "display_name": "Martinos", "link": "https://stackoverflow.com/users/89082/martinos"}, "edited": false, "score": 0, "creation_date": 1520955427, "post_id": 49259351, "comment_id": 85523648, "body": "You can use the git version, as noted in <a href=\"https://github.com/chrisk/fakeweb/issues/62\" rel=\"nofollow noreferrer\">this issue</a>"}, {"owner": {"reputation": 1916, "user_id": 89082, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ed77c0d1c8da409c4f69f67f934ff0bb?s=128&d=identicon&r=PG", "display_name": "Martinos", "link": "https://stackoverflow.com/users/89082/martinos"}, "edited": false, "score": 0, "creation_date": 1520955739, "post_id": 49259351, "comment_id": 85523901, "body": "It was not used extensively, so removing it is just a good thing. Thanks"}, {"owner": {"reputation": 14802, "user_id": 649006, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30f02cca8b01ab9e60490075b0447ecb?s=128&d=identicon&r=PG", "display_name": "nzifnab", "link": "https://stackoverflow.com/users/649006/nzifnab"}, "edited": false, "score": 1, "creation_date": 1552525335, "post_id": 49259351, "comment_id": 97047116, "body": "In my case we were including both fakeweb and webmock. We weren&#39;t really using fakeweb, so removing it and updating webmock solved it."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 5, "last_activity_date": 1520953027, "creation_date": 1520953027, "answer_id": 49259351, "question_id": 49259081, "link": "https://stackoverflow.com/questions/49259081/nomethoderror-undefined-method-net-protocol-rb/49259351#49259351", "title": "NoMethodError: undefined method `&lt;&lt;&#39; net/protocol.rb", "body": "<p>You probably need to assure to have gem versions compatible with ruby 2.4. There are several issues similar to yours:</p>\n\n<ul>\n<li><a href=\"https://github.com/chrisk/fakeweb/commit/5bd70b72962081e46c7b22a39d00b7660d0ad30e\" rel=\"noreferrer\">Fakeweb</a></li>\n<li><a href=\"https://github.com/bundler/bundler/issues/5268\" rel=\"noreferrer\">Bundler</a></li>\n<li><a href=\"https://github.com/bblimke/webmock/issues/683\" rel=\"noreferrer\">Webmock</a> (not the same but similar)</li>\n</ul>\n"}], "owner": {"reputation": 1916, "user_id": 89082, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ed77c0d1c8da409c4f69f67f934ff0bb?s=128&d=identicon&r=PG", "display_name": "Martinos", "link": "https://stackoverflow.com/users/89082/martinos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 49259351, "answer_count": 1, "score": 0, "last_activity_date": 1520953138, "creation_date": 1520952170, "last_edit_date": 1520953138, "question_id": 49259081, "link": "https://stackoverflow.com/questions/49259081/nomethoderror-undefined-method-net-protocol-rb", "title": "NoMethodError: undefined method `&lt;&lt;&#39; net/protocol.rb", "body": "<p>I have upgraded an app to ruby from 2.1 to 2.4 and I got the following error message:</p>\n\n<pre><code>NoMethodError: undefined method `&lt;&lt;' for {:read_timeout=&gt;60, :continue_timeout=&gt;nil, :debug_output=&gt;nil}:Hash\nDid you mean?  &lt;\nfrom /Users/me/.rubies/ruby-2.4.3/lib/ruby/2.4.0/net/protocol.rb:219:in `writing'\n</code></pre>\n\n<p>It seems that something has changed in the net/http library. Anyone knows what changed and/or how to fix it?</p>\n\n<pre><code>def writing\n  @written_bytes = 0\n  @debug_output &lt;&lt; '&lt;- ' if @debug_output\n  yield\n  @debug_output &lt;&lt; \"\\n\" if @debug_output\n  bytes = @written_bytes\n  @written_bytes = nil\n  bytes\nend\n</code></pre>\n\n<p>The exception is raised at the first <code>@debug_output</code> line.</p>\n"}, {"tags": ["ruby", "xml", "xpath", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1520953380, "post_id": 49259265, "comment_id": 85522132, "body": "This will return &quot;2&quot; ... but I want to see the tags around to make the difference between &lt;count&gt;2&lt;/count&gt; and &lt;moreThan&gt;2&lt;/moreThan&gt;. I have only one tag &quot;creditors&quot;, but the tag in it can be &quot;count&quot; OR &quot;moreThan&quot;. Thanks !"}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "reply_to_user": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1520953472, "post_id": 49259265, "comment_id": 85522211, "body": "No, this will select <code>count</code> elements.  If you&#39;re only seeing <code>2</code>, then you&#39;re passing the node results through a function that is selecting the string value of the results (or of the first of the results).  Include your actual XPath library call if you still need further help beyond this explanation.  Thanks."}, {"owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "edited": false, "score": 0, "creation_date": 1520954029, "post_id": 49259265, "comment_id": 85522626, "body": "@kjhughes OP tagged the question, it&#39;s <code>nokogiri</code>."}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "reply_to_user": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "edited": false, "score": 0, "creation_date": 1520954210, "post_id": 49259265, "comment_id": 85522767, "body": "@BartoszPietraszko: You misunderstand.  By requesting the <i>actual XPath library call</i>, I&#39;m requesting to see the <i>actual</i> line of Nokogiri code; I&#39;m not asking about which XPath library is being used."}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "reply_to_user": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1520954886, "post_id": 49259265, "comment_id": 85523233, "body": "@No&#233;mieHarvey: Well, sure.  Answer updated to show a single XPath that&#39;ll select both <code>count</code> and <code>moreThan</code> child elements of <code>creditors</code>."}, {"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1520955111, "post_id": 49259265, "comment_id": 85523420, "body": "@kjhughes You&#39;re right, this is the line you talk about : <code>xml_data = xml_data.map { |node| node.text }.join(&#39;-&#39;) unless xml_data.is_a?(String)</code>.  Thanks again !"}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "reply_to_user": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1520955191, "post_id": 49259265, "comment_id": 85523486, "body": "@No&#233;mieHarvey: I see no XPath in the code in your comment."}, {"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1520955488, "post_id": 49259265, "comment_id": 85523700, "body": "@kjhughes  <code>xml_data = xpath.blank? ? &#39;&#39; : nokogiri_element.xpath(xpath)</code> <code>xml_data = xml_data.map { |node| node.text }.join(&#39;-&#39;) unless xml_data.is_a?(String)</code>"}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "reply_to_user": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1520955780, "post_id": 49259265, "comment_id": 85523932, "body": "@No&#233;mieHarvey:  If you examine <code>xml_data</code> after the first line, before the mapping that takes <code>.text</code>, you&#39;ll see that the XPath actually returns elements, not strings at that point.  It&#39;s the next line of the code that&#39;s taking the <code>.text</code> of the nodes, leading to your earlier confusion regarding <code>&lt;count&gt;2&lt;&#47;count&gt;</code> vs <code>2</code>."}, {"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 1, "creation_date": 1520955871, "post_id": 49259265, "comment_id": 85524004, "body": "@kjhughes I see that, thank you a lot for your time and your help :)"}], "tags": [], "owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "is_accepted": true, "score": 1, "last_activity_date": 1520954849, "last_edit_date": 1520954849, "creation_date": 1520952759, "answer_id": 49259265, "question_id": 49258717, "link": "https://stackoverflow.com/questions/49258717/xpath-expression-nokogiri-to-get-tags-child-element/49259265#49259265", "title": "Xpath expression (nokogiri) to get tag&#39;s child element?", "body": "<p>This XPath,</p>\n\n<pre><code>//creditors/count\n</code></pre>\n\n<p>will select all <code>count</code> child elements of all <code>creditors</code> elements in the XML document.</p>\n\n<hr>\n\n<p>Update per OP's request in comments for a single XPath that selects both <code>count</code> and <code>moreThan</code> elements:</p>\n\n<p>This XPath,</p>\n\n<pre><code>//creditors/*[self::count or self::moreThan]\n</code></pre>\n\n<p>will select all <code>count</code> or <code>moreThan</code> child elements of all <code>creditors</code> elements in the XML document.</p>\n"}, {"tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": false, "score": 0, "last_activity_date": 1520955039, "last_edit_date": 1520955039, "creation_date": 1520953421, "answer_id": 49259486, "question_id": 49258717, "link": "https://stackoverflow.com/questions/49258717/xpath-expression-nokogiri-to-get-tags-child-element/49259486#49259486", "title": "Xpath expression (nokogiri) to get tag&#39;s child element?", "body": "<p>Assuming that your xpath expression is OK, you just need to convert the element to string:</p>\n\n<p><code>doc.xpath(\"home/creditors/*\").to_s\n =&gt; \"&lt;count&gt;2&lt;/count&gt;\"\n</code></p>\n\n<p>Please check with queries returning more than one element, to make sure that it's desired behaviour.</p>\n"}], "owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 49259265, "answer_count": 2, "score": 1, "last_activity_date": 1520955039, "creation_date": 1520951164, "last_edit_date": 1520953171, "question_id": 49258717, "link": "https://stackoverflow.com/questions/49258717/xpath-expression-nokogiri-to-get-tags-child-element", "title": "Xpath expression (nokogiri) to get tag&#39;s child element?", "body": "<p>From my xml, I can get this :</p>\n\n<pre><code>&lt;home&gt;\n    &lt;creditors&gt;\n          &lt;count&gt;2&lt;/count&gt;\n    &lt;/creditors&gt;\n&lt;/home&gt;\n</code></pre>\n\n<p>OR even this :</p>\n\n<pre><code>&lt;home&gt;\n    &lt;creditors&gt;\n          &lt;moreThan&gt;2&lt;/moreThan&gt;\n    &lt;/creditors&gt;\n&lt;/home&gt;\n</code></pre>\n\n<p>Which xpath expression can I use to get <code>\"&lt;count&gt;2&lt;/count&gt;\"</code> instead of getting only \"2\" OR to get <code>\"&lt;moreThan&gt;2&lt;/moreThan&gt;\"</code> instead of getting \"2\" ? </p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520951278, "post_id": 49258514, "comment_id": 85520527, "body": "Hey pascal! Thanks for your answer.  I just tried this again: followers = f_collections.flatten And afterwards when I check the size it still says 5. When I check the value of followers[1], it is still a collection of 200 hashes, not a single hash.  In your example you only show one hash key/value pair, but in each hash there are about 10. Does that change anything? For example:  sub1 = [{a: 1, b: 3, c:6, ...}, {a: 2}] sub2 = [{a: 3}, {a: 4}] collection = [sub1, sub2]"}, {"owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520951343, "post_id": 49258514, "comment_id": 85520578, "body": "Also - I removed the variable name to make the example simpler, but I was not aware of this each_with_index function! Awesome tip!"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520951376, "post_id": 49258514, "comment_id": 85520598, "body": "Hello @gallant No, the number of keys in the hash or the number of elements in the arrays does not make a difference. Can you provide a simplified set of data so i can run my code against it?  Are you sure you checked on the new collection that is returned by &quot;flatten&quot;?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520951532, "post_id": 49258514, "comment_id": 85520719, "body": "I updated the sample to show the differences between &quot;flatten&quot; and &quot;flatten!&quot;"}, {"owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520952009, "post_id": 49258514, "comment_id": 85521089, "body": "Hey Pascal. Yeah I am familiar with the &quot;!&quot; operator for in-line, but the way I wrote it should work. The problem is when I do mock-ups of the data it never represents it well. Here is an example of the data from one of the collections: <a href=\"https://pastebin.com/Gxa344F0\" rel=\"nofollow noreferrer\">pastebin.com/Gxa344F0</a>  (I hope that works!) It seems to be within a &quot;hashie&quot; wrapper."}, {"owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520952323, "post_id": 49258514, "comment_id": 85521348, "body": "Ps. I am just on my way home but I will be back in about 1 hour. Really appreciate your help on this one Pascal and just wanted to let you know I am not ignoring you if I don&#39;t respond quickly :)"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 1, "creation_date": 1520952992, "post_id": 49258514, "comment_id": 85521862, "body": "Hello @gallant  If your datastructure is indeed an &quot;array of array of hashes&quot; then &quot;flatten&quot; should work. Perhaps you can provide a simple example set of data, that has the same structure?"}, {"owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520960189, "post_id": 49258514, "comment_id": 85527067, "body": "Hi Pascal - unfortunately I am not sure how to mock up this data as I get it from an external API request.  I called it an array of array of hashes because I can access a hash by using the following command: f_collections[0].collection[0]  This would give me the first user in the first collection. If I <code>puts</code> this, it shows me the entire hash with all the user data.  For instance I can query the hash like this: <code>f_collections[0].collection[0].user_name</code> and it gives me the user name. Would that not imply an array of arrays of hashes??"}, {"owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1520960614, "post_id": 49258514, "comment_id": 85527351, "body": "One more thing - if you have any ideas how I could give you a sample of this data I am all ears, I just am not sure how I would export the data to a format that would be useful"}, {"owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "edited": false, "score": 0, "creation_date": 1521020549, "post_id": 49258514, "comment_id": 85550962, "body": "Hi Pascal! Yes! It worked, oh man thank you so much for this. I will mark it answered.  Can I ask - what did you mean by &quot;so It is not an array objects that hold collections of hashes.&quot;?   I will do some research into this flat_map method, but interested if you could give any information on what lead you to that approach. Thank you so much"}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1521022967, "last_edit_date": 1521022967, "creation_date": 1520950537, "answer_id": 49258514, "question_id": 49258379, "link": "https://stackoverflow.com/questions/49258379/how-to-collapse-a-multi-dimensional-array-of-hashes-in-ruby/49258514#49258514", "title": "How to collapse a multi-dimensional array of hashes in Ruby?", "body": "<p>Oh... so It is not an array objects that hold collections of hashes. Kind of. Lets give it another try:</p>\n\n<pre><code>flat = f_collection.map do |col|\n  col.collection\nend.flatten\n</code></pre>\n\n<p>which can be shortened (and is more performant) to:</p>\n\n<pre><code>flat = f_collection.flat_map do |col|\n  col.collection\nend\n</code></pre>\n\n<p>This works because the items in the <code>f_collection</code> array are objects that have a <code>collection</code> attribute, which in turn is an array.</p>\n\n<p>So it is \"array of things that have an array that contains hashes\"</p>\n\n<hr>\n\n<p>Old Answer follows below. I leave it here for documentation purpose. It was based on the assumption that the data structure is an array of array of hashes.</p>\n\n<p>Just use <code>#flatten</code> (or <code>#flatten!</code> if you want this to be \"inline\")</p>\n\n<pre><code>flat = f_collections.flatten\n</code></pre>\n\n<p>Example</p>\n\n<pre><code>sub1 = [{a: 1}, {a: 2}]\nsub2 = [{a: 3}, {a: 4}]\ncollection = [sub1, sub2]\n\nflat = collection.flatten # returns a new collection\nputs flat #&gt; [{:a=&gt;1}, {:a=&gt;2}, {:a=&gt;3}, {:a=&gt;4}]\n\n# or use the \"inplace\"/\"destructive\" version \ncollection.flatten! # modifies existing collection\nputs collection #&gt; [{:a=&gt;1}, {:a=&gt;2}, {:a=&gt;3}, {:a=&gt;4}]\n</code></pre>\n\n<p>Some recommendations for your existing code:</p>\n\n<p>Do not use <code>for n in 1..5</code>, use Ruby-Style enumeration:</p>\n\n<pre><code>[\"some\", \"values\"].each do |value|\n  puts value\nend\n</code></pre>\n\n<p>Like this you do not need to hardcode the length (<code>5</code>) of the array (did not realize you removed the variables that specify these magic numbers). If you you want to detect the last iteration you can use <code>each_with_index</code>:</p>\n\n<pre><code>a = [\"some\", \"home\", \"rome\"]\na.each_with_index do |value, index|\n  if index == a.length - 1\n    puts \"Last value is #{value}\"\n  else\n    puts \"Values before last: #{value}\"\n  end\nend\n</code></pre>\n\n<p>While <code>#flatten</code> will solve your problem you might want to see how DIY-solution could look like:</p>\n\n<pre><code>def flatten_recursive(collection, target = [])\n  collection.each do |item|\n    if item.is_a?(Array)\n      flatten_recursive(item, target)\n    else\n      target &lt;&lt; item\n    end\n  end\n  target\nend\n</code></pre>\n\n<p>Or an iterative solution (that is limited to two levels):</p>\n\n<pre><code>def flatten_iterative(collection)\n  target = []\n  collection.each do |sub|\n    sub.each do |item|\n      target &lt;&lt; item\n    end\n  end\n  target\nend\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9236065, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/19dbeee73ae13dd69f4cbb436a6fa0e7?s=128&d=identicon&r=PG&f=1", "display_name": "gallant", "link": "https://stackoverflow.com/users/9236065/gallant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 49258514, "answer_count": 1, "score": 0, "last_activity_date": 1521022967, "creation_date": 1520950208, "question_id": 49258379, "link": "https://stackoverflow.com/questions/49258379/how-to-collapse-a-multi-dimensional-array-of-hashes-in-ruby", "title": "How to collapse a multi-dimensional array of hashes in Ruby?", "body": "<p><strong>Background:</strong></p>\n\n<p>Hey all, I am experimenting with external APIs and am trying to pull in all of the followers of a User from a site and apply some sorting.</p>\n\n<p>I have refactored a lot of the code, HOWEVER, there is one part that is giving me a really tough time. I am convinced there is an easier way to implement this than what I have included and would be really grateful on any tips to do this in a much more eloquent way.</p>\n\n<p>My goal is simple. I want to collapse an array of arrays of hashes (I hope that is the correct way to explain it) into one array of hashes.</p>\n\n<p><strong>Problem Description:</strong></p>\n\n<p>I have an array named <code>f_collections</code>which has 5 elements. Each element is an array of size 200. Each sub-element of these arrays is a hash of about 10 key-value pairs. My best representation of this is as follows:</p>\n\n<pre><code>f_collections = [ collection1, collection2, ..., collection5 ]\ncollection1 = [ hash1, hash2, ..., hash200]\nhash1 = { user_id: 1, user_name: \"bob\", ...}\n</code></pre>\n\n<p>I am trying to collapse this multi-dimensional array into one array of hashes. Since there are five collection arrays, this means the results array would have 1000 elements - all of which would be hashes. </p>\n\n<pre><code>followers = [hash1, hash2, ..., hash1000]\n</code></pre>\n\n<p><strong>Code (i.e. my attempt which I do not want to keep):</strong></p>\n\n<p>I have gotten this to work with a <strong>very ugly</strong> piece of code (see below), with nested if statements, blocks, for loops, etc... This thing is a nightmare to read and I have tried my hardest to research ways to do this in a simpler way, I just cannot figure out how. I have tried flatten but it doesn't seem to work.</p>\n\n<p>I am mostly just including this code to show I have tried very hard to solve this problem, and while yes I solved it, there must be a better way!</p>\n\n<p>Note: I have simplified some variables to integers in the code below to make it more readable.</p>\n\n<pre><code>for n in 1..5 do\n        if n &lt; 5\n          (0..199).each do |j|\n            if n == 1\n              nj = j\n            else\n              nj = (n - 1) * 200 + j\n            end\n\n            @followers[nj] = @f_collections[n-1].collection[j]\n          end\n        else\n          (0..199).each do |jj|\n            njj = (4) * 200  + jj\n            @followers[njj] = @f_collections[n-1].collection[jj]\n          end\n        end\n\n      end\n</code></pre>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1520952682, "post_id": 49258237, "comment_id": 85521623, "body": "<code>alias_method</code> might be what you are looking for or maybe <code>super</code> your question is a bit unclear"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1520953190, "post_id": 49258237, "comment_id": 85521983, "body": "What is the problem you are trying to solve? &quot;dynamically&quot; modifying a methods behavior (and then restore the original version) sounds like something you want to avoid."}, {"owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1520953505, "post_id": 49258237, "comment_id": 85522229, "body": "This does not relate to any problem. I am new to ruby&#39;s metaprogramming and want to learn how to do this. Alias seems promising but how could I still execute the old method behavior (and could I use a special keyword to trigger the old method behavior so that I could execute the old code wherever I want in the new one)"}], "answers": [{"comments": [{"owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1520958107, "post_id": 49260803, "comment_id": 85525718, "body": "In terms of goal, yes, plus the ability to revert back to the simple &quot;hello&quot;. But I don&#39;t think this is what I am looking for. I don&#39;t want to simply add parameters or one instruction. I would like to add the instructions inside the module&#39;s method inside the class&#39; method. In essence, a bit as if my local code was a git and at runtime I could &quot;commit&quot; new code in functions and go back to the previous version when needed."}, {"owner": {"reputation": 261, "user_id": 4775075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--r2FXnoJbH0/AAAAAAAAAAI/AAAAAAAAAC0/zLkkemoqxQ0/photo.jpg?sz=128", "display_name": "David Foley", "link": "https://stackoverflow.com/users/4775075/david-foley"}, "reply_to_user": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1520958217, "post_id": 49260803, "comment_id": 85525797, "body": "Ok, I&#39;m starting to understand. Can you give an example of how you&#39;d like to be able to reference these different psudo-branches?"}, {"owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1520960701, "post_id": 49260803, "comment_id": 85527401, "body": "Great ! So I was thinking about a linked list where the first node is the base method (inside the class), then everytime you &quot;add&quot; a module (here MyWorldModule), a new node is created. The call to the method would only call the one on the last node (LIFO), but with a keyword I could call the method from the previous node. Ideally this would work for an unknown amount of nodes where each node could execute its own code, then the code from the previous node if requested (or before, depending on the place of the special keyword)."}, {"owner": {"reputation": 261, "user_id": 4775075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--r2FXnoJbH0/AAAAAAAAAAI/AAAAAAAAAC0/zLkkemoqxQ0/photo.jpg?sz=128", "display_name": "David Foley", "link": "https://stackoverflow.com/users/4775075/david-foley"}, "reply_to_user": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1520962995, "post_id": 49260803, "comment_id": 85528740, "body": "Does that get us closer? I think lambdas might be a better route for this functionality. Then you can manage a simple array rather than a hierarchy of classes. And if you wanted keywords instead of indexes, you could replace the array with a hash."}, {"owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 0, "creation_date": 1520963359, "post_id": 49260803, "comment_id": 85528939, "body": "Thank you. This is not exactly what I want to achieve, but I&#39;ll work with it. I&#39;m trying to use the same method call. Anyway, It does give me some hindsight. Thank you for your time"}, {"owner": {"reputation": 261, "user_id": 4775075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--r2FXnoJbH0/AAAAAAAAAAI/AAAAAAAAAC0/zLkkemoqxQ0/photo.jpg?sz=128", "display_name": "David Foley", "link": "https://stackoverflow.com/users/4775075/david-foley"}, "reply_to_user": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "edited": false, "score": 1, "creation_date": 1520974448, "post_id": 49260803, "comment_id": 85534782, "body": "Good. Let me know if there is any way I can change my answer to get an up-vote. Also, in your journey to solve this problem, you may want to look at &#39;define_method&#39;, &#39;method_missing&#39; and the &#39;Class.ancestors&#39; methods. They are critical in starting to look into ruby meta programming. Good luck!"}], "tags": [], "owner": {"reputation": 261, "user_id": 4775075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--r2FXnoJbH0/AAAAAAAAAAI/AAAAAAAAAC0/zLkkemoqxQ0/photo.jpg?sz=128", "display_name": "David Foley", "link": "https://stackoverflow.com/users/4775075/david-foley"}, "is_accepted": false, "score": 1, "last_activity_date": 1520962897, "last_edit_date": 1520962897, "creation_date": 1520957286, "answer_id": 49260803, "question_id": 49258237, "link": "https://stackoverflow.com/questions/49258237/ruby-modifying-methods-at-runtime-from-modules/49260803#49260803", "title": "Ruby modifying methods at runtime from modules", "body": "<p>This doesn't use extension, but I think it gets closer to what your after:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class MyClass\n  def initialize\n    @nodes = []\n    @nodes.push( -&gt;() {\"hello 0\"})\n    @nodes.push( -&gt;() {\"hello 1\"})\n    @nodes.push( -&gt;() {\"hello 2\"})\n  end\n\n  def my_method(version = 0)\n    @nodes[version].call\n  end\nend\n\nmy_instance = MyHelloClass.new\nmy_instance.my_method\n#=&gt; 'hello 0'\nmy_instance.my_method(1)\n#=&gt; 'hello 1'\nmy_instance.my_method(2)\n#=&gt; 'hello 2'\n</code></pre>\n"}], "owner": {"reputation": 270, "user_id": 4338129, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c09a5e1192978af05563ed740e0cf03?s=128&d=identicon&r=PG&f=1", "display_name": "Dranna", "link": "https://stackoverflow.com/users/4338129/dranna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520962897, "creation_date": 1520949841, "last_edit_date": 1520950170, "question_id": 49258237, "link": "https://stackoverflow.com/questions/49258237/ruby-modifying-methods-at-runtime-from-modules", "title": "Ruby modifying methods at runtime from modules", "body": "<p>I have <code>my_class</code> which contains <code>my_method</code> with behaviour A. In <code>my_module</code> I have the same method with behaviour B.</p>\n\n<p>Wanting to dynamically modify the behaviour of <code>my_class</code>, I am trying to use metaprogramming to change the methods at runtime.</p>\n\n<p>How could I make <code>my_class</code> have behaviour A, then change it to behaviour AB, or B, then back to A ?</p>\n\n<p>I wanted to keep the source code of previous versions in a history array so that I would be able to retrieve the old version and restore it, but another thread told me that we cannot just get methods' source code.</p>\n\n<p>Small example :</p>\n\n<pre><code>class MyClass\n  def my_method\n    puts \"Hello\"\n  end\nend\n\nmodule World\n  def my_method\n    puts \" World !\"\n  end\nend\n</code></pre>\n\n<p>Then, at runtime I could call my_method, the result being \"Hello\", then make the method from the module extend the method and it would print \"Hello World !\" (on two lines, that's not the point, I do not seek to \"merge\" them)</p>\n"}, {"tags": ["ruby", "module", "include"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1520950401, "creation_date": 1520950401, "answer_id": 49258454, "question_id": 49258053, "link": "https://stackoverflow.com/questions/49258053/typeerror-when-including-a-clone-of-a-module-in-ruby/49258454#49258454", "title": "TypeError when including a clone of a Module in Ruby", "body": "<p>That is because the scope of <code>clone</code> as a local variable does not go inside the class body of <code>MyClass</code>. There, <code>clone</code> is interpreted as a method applied to <code>self</code>. Hence, your last three lines are equivalent to:</p>\n\n<pre><code>class MyClass\n  include MyClass.clone\nend\n</code></pre>\n\n<p>And since <code>MyClass</code> is a class, so is its clone <code>MyClass.clone</code>. You cannot include a class.</p>\n"}], "owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 49258454, "answer_count": 1, "score": 0, "last_activity_date": 1520950401, "creation_date": 1520949320, "question_id": 49258053, "link": "https://stackoverflow.com/questions/49258053/typeerror-when-including-a-clone-of-a-module-in-ruby", "title": "TypeError when including a clone of a Module in Ruby", "body": "<p>I'm testing a Module that has a state. Currently I restore that state after each testcase. Instead I would like to use a throwaway clone of the module.</p>\n\n<p>Consider the following simple example:</p>\n\n<pre><code>module MyModule; end\nclone = MyModule.clone\nclone.class # =&gt; Module\nclone.class == MyModule.class # =&gt; true\nclass MyClass\n  include clone # =&gt; TypeError: wrong argument type Class (expected Module)\nend\n</code></pre>\n\n<p>Why doesn't this work? Is there a way to achieve what I'm aiming for?</p>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "edited": false, "score": 0, "creation_date": 1520949091, "post_id": 49257798, "comment_id": 85518887, "body": "Take a look at the methods <code>Array.combination()</code>, <code>Array.permutation()</code>, <code>Array.repeated_combination()</code>, <code>Array.repeated_permutation()</code>. They might solve the problem your trying to solve in an easier way."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1520949192, "post_id": 49257798, "comment_id": 85518969, "body": "just a stylistic thing but I&#39;d put <code>seq</code> as the last argument, then you do not need to pass it in the initial call to <code>h</code>, just change the method signature to <code>h(symbols, length, seq = [])</code>."}, {"owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "reply_to_user": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "edited": false, "score": 0, "creation_date": 1520949201, "post_id": 49257798, "comment_id": 85518978, "body": "@JoshVoigts I wrote the logic in ruby because it&#39;s easy to avoid thinking about variable types and what not; I&#39;m planning to write this in C++ after I get the correct logic"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1520949240, "post_id": 49257798, "comment_id": 85519009, "body": "Also using <code>$pos</code> seems odd, because it is global."}, {"owner": {"reputation": 79, "user_id": 5663022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd63145a04ebf23b3772eddd5d551c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5663022/jacob"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1521033552, "post_id": 49257798, "comment_id": 85560056, "body": "@Kris probably just a shortcut to avoid returns / have it available in all levels of the recursion."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 5663022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd63145a04ebf23b3772eddd5d551c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5663022/jacob"}, "is_accepted": true, "score": 0, "last_activity_date": 1521036143, "creation_date": 1521036143, "answer_id": 49279764, "question_id": 49257798, "link": "https://stackoverflow.com/questions/49257798/recursive-program-never-enters-recursion/49279764#49279764", "title": "Recursive program never enters recursion?", "body": "<p>Well, okay, I'll play along.</p>\n\n<p>As you can check on <a href=\"https://repl.it/@jgabzdyl/MeagerIdolizedNumber\" rel=\"nofollow noreferrer\">my repl.it</a>, I used exactly your code, just added two \"puts\". I ran it with the same parameters as you.</p>\n\n<pre><code>h([], [\"a\", \"b\", \"c\"], 3)\n&gt; first\n&gt; first\n&gt; first\n&gt; second\n&gt; second\n&gt; second\n=&gt; [[\"a\", \"a\", \"a\"], [\"a\", \"a\", \"a\"], [\"a\", \"a\", \"a\"], [\"a\", \"a\", \"a\"]]\n</code></pre>\n\n<p>For explanation what this causes we need to look at this part of your code:</p>\n\n<pre><code>else\n  h(seq &lt;&lt; symbols[0], symbols, length)\n  h(seq, symbols[1..-1], length)\nend\n</code></pre>\n\n<p>You always call <code>h &lt;&lt; seq symbols[0]</code> in your execution. This always puts \"a\" in your seq variable. Once you have three characters in your seq, you append it for the first time. Thanks to the if else structure of your script, the execution of this level of the function ends. </p>\n\n<p>Then you call <code>h(seq, symbols[1..-1], length)</code> again. The problem here is, that you already have <code>seq.length == 3</code>, so you just append it again and end the execution of the function.</p>\n\n<p>Then again, you call <code>h(seq, symbols[1..-1], length)</code>, you get the idea.</p>\n\n<p>So, that is the fault of your logic explained.</p>\n\n<p>I won't code this for you, but hopefully this explains where the fault is.</p>\n\n<blockquote>\n  <p>Hint: you could use seq.dup as the parameter for both these functions, as this will do what it would in C. However, this also won't work as you expect it to thanks to <code>symbols[1..-1]</code> eliminating \"a\" from the permutation. </p>\n</blockquote>\n"}], "owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 49279764, "answer_count": 1, "score": 0, "last_activity_date": 1521036143, "creation_date": 1520948682, "last_edit_date": 1520949935, "question_id": 49257798, "link": "https://stackoverflow.com/questions/49257798/recursive-program-never-enters-recursion", "title": "Recursive program never enters recursion?", "body": "<p>I'm trying to build a recursive program that prints all arrays of size <code>length</code> composed of the elements in <code>symbols</code>. I push the results into <code>$pos</code>.</p>\n\n<pre><code>def h(seq, symbols, length)\n  if seq.length == length\n    $pos &lt;&lt; seq\n  elsif symbols.empty?\n    nil\n  else\n    h(seq &lt;&lt; symbols[0], symbols, length)\n    h(seq, symbols[1..-1], length)\n  end\nend\n</code></pre>\n\n<p>I ran it with <code>length = 3</code> and <code>symbols = ['a', 'b', 'c']</code> as follows:</p>\n\n<pre><code>symbols = ['a', 'b', 'c']\nlength = 3\nseq = []\nh(seq, symbols, length)\n$pos\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>[[\"a\", \"a\", \"a\"], [\"a\", \"a\", \"a\"], [\"a\", \"a\", \"a\"], [\"a\", \"a\", \"a\"]]\n</code></pre>\n\n<p>How does this happen, and where is the fault in my logic?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "integration-testing"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1520948500, "post_id": 49257718, "comment_id": 85518465, "body": "How do you check that record was not inserted to the DB?"}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1520948570, "post_id": 49257718, "comment_id": 85518504, "body": "@mrzasa I have installed database client &quot;dbeaver&quot;. No new record is showing in the database(test)."}], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1520949016, "post_id": 49257838, "comment_id": 85518821, "body": "This is what I have got after inserting your code  Run options: --seed 25384  # Running:  .  Finished in 3.650668s, 0.2739 runs/s, 0.5478 assertions/s. 1 runs, 2 assertions, 0 failures, 0 errors, 0 skips  Is this correct result?"}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1520949117, "post_id": 49257838, "comment_id": 85518909, "body": "Can you please guide me that how to run a single test currently when I enter this command rails test:integration all the tests start running."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1520949225, "post_id": 49257838, "comment_id": 85518994, "body": "Yup, see that assertion number increased - that&#39;s the one for the user. You can also try to make the test fail (e.g. by commenting some parts of the production code. Regarding running a single test, see <a href=\"https://stackoverflow.com/a/1507074/580346\">this answer</a>"}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1520949368, "post_id": 49257838, "comment_id": 85519093, "body": "no it is not working  ruby -I test test/integration/signup_test.rb -n signup  result is   Run options: -n signup --seed 46418  # Running:    Finished in 0.002650s, 0.0000 runs/s, 0.0000 assertions/s. 0 runs, 0 assertions, 0 failures, 0 errors, 0 skips"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1520949512, "post_id": 49257838, "comment_id": 85519189, "body": "it&#39;s rather  <code>ruby -I test test&#47;integration&#47;signup_test.rb -n &quot;user signup&quot;</code>"}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1520949648, "post_id": 49257838, "comment_id": 85519285, "body": "same results 0 0 0 0."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1520948787, "creation_date": 1520948787, "answer_id": 49257838, "question_id": 49257718, "link": "https://stackoverflow.com/questions/49257718/user-registration-integration-test-is-not-inserting-values-in-database/49257838#49257838", "title": "User registration integration test is not inserting values in database", "body": "<p>Test database is cleaned up after each test run so you will not be able to see any records after you run your test suite (depending on the cleaning method you won't be able to see anything in the DB even <em>during</em> the test if you use different connection to the DB). </p>\n\n<p>If you want to test that user was saved, you need to do it inside the integration test. For example</p>\n\n<pre><code># ...\nassert_text \"Welcome! You have signed up successfully.\"\nassert(User.where(email: \"abc@gmail.com\").exists?)\n</code></pre>\n\n<p>Or event better - write a unit test that checks it.</p>\n\n<p><a href=\"https://stackoverflow.com/a/49210133/580346\">Related answer</a></p>\n"}], "owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 49257838, "answer_count": 1, "score": 0, "last_activity_date": 1520948814, "creation_date": 1520948450, "last_edit_date": 1520948814, "question_id": 49257718, "link": "https://stackoverflow.com/questions/49257718/user-registration-integration-test-is-not-inserting-values-in-database", "title": "User registration integration test is not inserting values in database", "body": "<p>I am new in rails testing and I have written an integration test for user signup. Test is working fine but it is not inserting record in the database.</p>\n\n<p>Here is the code</p>\n\n<pre><code>require 'test_helper'\n\nclass SignupTest &lt; ActionDispatch::IntegrationTest\n  test \"user signup\" do\n    visit new_user_registration_path\n    fill_in \"user_email\",    with: \"abc@gmail.com\"\n    fill_in \"user_password\", with: \"password\"\n    fill_in \"user_password_confirmation\", with: \"password\"\n    click_button \"Sign up\"\n    assert_text \"Welcome! You have signed up successfully.\"\n  end\nend\n</code></pre>\n\n<p>This is the command that I am using to run the test</p>\n\n<pre><code>rake test:integration\n</code></pre>\n\n<p>When I run the test the results are </p>\n\n<pre><code>Run options: --seed 62721\n\n# Running:\n\n.\n\nFinished in 3.116669s, 0.3209 runs/s, 0.3209 assertions/s.\n1 runs, 1 assertions, 0 failures, 0 errors, 0 skips\n</code></pre>\n\n<p>I have also checked the logs but nothing in the log.</p>\n\n<p>This is my gemlist for testing </p>\n\n<pre><code>group :test do\n  gem 'capybara'\n  gem 'capybara-webkit'\n  gem 'vcr'\n  gem 'webmock'\n  gem 'launchy'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 1856, "user_id": 848915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/uTSIa.png?s=128&g=1", "display_name": "Daryll Santos", "link": "https://stackoverflow.com/users/848915/daryll-santos"}, "edited": false, "score": 0, "creation_date": 1520956444, "post_id": 49256927, "comment_id": 85524416, "body": "Would <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Flash.html\" rel=\"nofollow noreferrer\">flash messages</a> work here? You can refresh the same page, but see something else. If not, you can introduce a new variable in the controller <code>@answer</code> or something, and do an <code>if @answer ... show this message</code> in the view."}], "answers": [{"tags": [], "owner": {"reputation": 2422, "user_id": 219915, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/80c07bab068c17f486cefbbc09d8b162?s=128&d=identicon&r=PG", "display_name": "Mike A", "link": "https://stackoverflow.com/users/219915/mike-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1520952445, "creation_date": 1520952445, "answer_id": 49259175, "question_id": 49256927, "link": "https://stackoverflow.com/questions/49256927/controller-view-interactions-in-rails/49259175#49259175", "title": "Controller-View Interactions in Rails", "body": "<p>The cleanest way to do this in the \"Rails\" way would be to have a new path in your controller, for example <code>show_result</code>, and render a javascript view (<code>show_result.js.erb</code>). Then use a simple line of javascript to update the current DOM. Remember to set your form submission or your link to <code>:remote =&gt; true</code> and you're good to go.</p>\n"}], "owner": {"reputation": 85, "user_id": 8107625, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/23ad4e1df6e307f5ca4188331e7daec7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/8107625/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520952445, "creation_date": 1520946103, "last_edit_date": 1520949025, "question_id": 49256927, "link": "https://stackoverflow.com/questions/49256927/controller-view-interactions-in-rails", "title": "Controller-View Interactions in Rails", "body": "<p>I'm endeavoring to learn rails and am doing so by completing some super basic projects. The current thing I'm working on is a higher-lower game - the user guesses a number, and the server checks the guess against a randomly generated secret number, and responds if the guess is 'higher' or 'lower' than the actual number.</p>\n\n<p>I've got most of the game complete, but I've realized I have no idea how to actually implement notifying the user if the guess was too high or too low. Other view changes in the game are handled by rendering a whole other page, but for this one I wish to display <strong>new</strong> text in the <strong>current</strong> page.</p>\n\n<p>This question isn't really to solve my problem per se, I'm just trying to get pointed in the right general direction with controller-view interactions such as these.</p>\n\n<p>Currently the only way I can think to do this is</p>\n\n<p><strong>Logic in the View</strong></p>\n\n<p>Make the data of whether the user guessed higher or lower available by using an instance variable, then use ruby in the html.erb view to determine what text to display based off this. </p>\n\n<p>This seems ... dumb, and in violation of things I've learned about MVC in the past. Any other suggestions would be appreciated.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1520972461, "last_edit_date": 1520972461, "creation_date": 1520955400, "answer_id": 49260157, "question_id": 49256551, "link": "https://stackoverflow.com/questions/49256551/can-you-simultaneously-test-a-state-change-and-a-return-value-in-rspec/49260157#49260157", "title": "Can you simultaneously test a state change and a return value in RSpec?", "body": "<p>You could implement your own custom <code>Matcher</code> for this specific case like:</p>\n\n<pre><code>RSpec::Matchers.define :respond_with do |expected| \n  match do |actual|\n    actual.call == expected\n  end\n  # allow the matcher to support block expectations\n  supports_block_expectations\n  # make sure this executes in the correct context\n  def expects_call_stack_jump?\n    true\n  end\nend\n</code></pre>\n\n<p>Then your expectation would be something like </p>\n\n<pre><code>it \"Updates myvalue if condition is met\" do\n  wojit = MyKlass.new\n  expect{wojit.do_thing}.to change(wojit, :value).and(respond_with(true))\nend\n</code></pre>\n\n<p>The key here is that <code>be</code>,<code>eq</code>, etc. does not support block expectations and thus cannot be used in conjuction with <code>expect{...}</code> so we implemented an equality matcher that does support block expectations (<code>supports_block_expectations? #=&gt; true</code>) and jumped it up the stack (this is very important in this case otherwise the change block creates a conflicting actual *Not sure I 100% understand why but trust me it does). </p>\n\n<p>In this case <code>actual</code> will be the block body (as a <code>Proc</code>) so we just have to call it to compare the result to the expected value.</p>\n\n<p>You could however abstract this out further to something like </p>\n\n<pre><code>RSpec::Matchers.define :have_response do |expectation| \n\n  supports_block_expectations\n\n  def expects_call_stack_jump?\n    true\n  end\n  #Actual matching logic \n  match do |actual|\n     @actual_value = actual.respond_to?(:call) ? actual.call : actual\n    expect(@actual_value).to(expectation)\n  end\n\n  failure_message do |actual|\n    \"expected response to be #{expectation.expected} but response was #{@actual_value}\"\n  end\n  failure_message_when_negated do |actual|\n    \"expected response not to be #{expectation.expected} but response was #{@actual_value}\"\n  end\n\nend\n\n#define negation for chaining purposes as needed\nRSpec::Matchers.define_negated_matcher :not_have_response, :have_response\n</code></pre>\n\n<p>Which would allow you to use all the methods that do not support block expectations like so </p>\n\n<pre><code>it \"Updates myvalue if condition is met\" do\n  wojit = MyKlass.new\n  expect{wojit.do_thing}.to change(wojit, :value).and(have_response(be true))\n  # or \n  # expect{wojit.do_thing}.to not_have_response(be false).and(change(wojit, :value))\nend\n</code></pre>\n\n<p>Only issue with either one of these approaches is that the block will be called once for the change and once for the response check so depending on your circumstances this could cause issues.  </p>\n"}, {"comments": [{"owner": {"reputation": 11573, "user_id": 473792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/bwv8P.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/473792/kevin"}, "edited": false, "score": 0, "creation_date": 1598370475, "post_id": 49269218, "comment_id": 112434274, "body": "+1 Each test should ideally only check one thing, so splitting up into multiple tests is usually the idiomatic approach."}], "tags": [], "owner": {"reputation": 951, "user_id": 1812872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBQWs.jpg?s=128&g=1", "display_name": "Benito Serna", "link": "https://stackoverflow.com/users/1812872/benito-serna"}, "is_accepted": false, "score": 2, "last_activity_date": 1520997446, "creation_date": 1520997446, "answer_id": 49269218, "question_id": 49256551, "link": "https://stackoverflow.com/questions/49256551/can-you-simultaneously-test-a-state-change-and-a-return-value-in-rspec/49269218#49269218", "title": "Can you simultaneously test a state change and a return value in RSpec?", "body": "<p>Maybe is not what you are looking for, but I actually think that \"something more idiomatic\" would be to make to tests using a <code>describe</code> or <code>context</code> block to express better that you testing the same case.</p>\n\n<pre><code>describe \"When condition is met\" do\n  it \"updates the value\" do\n    wojit = Wojit.new\n    expect { wojit.do_thing }.to change { wojit.value }\n  end\n\n  it \"returns true\" do\n    wojit = Wojit.new\n    expect(wojit.do_thing).to be_true\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3056, "user_id": 443839, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6efc474c451224403d20b9e0b0d39a8?s=128&d=identicon&r=PG", "display_name": "Mark G.", "link": "https://stackoverflow.com/users/443839/mark-g"}, "edited": false, "score": 0, "creation_date": 1576083846, "post_id": 52785748, "comment_id": 104786283, "body": "I wish there was better syntax than this.  Guilty of writing this code as well.  Sorta wish <code>expect { }</code> would return the result of the block so you could do <code>return_value = expect { blah }.to change...</code> but that could be confusing too.  Not sure I like more complicated approaches like shimming in functionality/matchers to support this.  Jury&#39;s definitely out on whether nested expects are better/worse... \ud83e\udd37\u200d\u2642\ufe0f"}], "tags": [], "owner": {"reputation": 81784, "user_id": 9859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KEZOL.jpg?s=128&g=1", "display_name": "rampion", "link": "https://stackoverflow.com/users/9859/rampion"}, "is_accepted": false, "score": 4, "last_activity_date": 1539371797, "creation_date": 1539371797, "answer_id": 52785748, "question_id": 49256551, "link": "https://stackoverflow.com/questions/49256551/can-you-simultaneously-test-a-state-change-and-a-return-value-in-rspec/52785748#52785748", "title": "Can you simultaneously test a state change and a return value in RSpec?", "body": "<p>Another approach is just to stick the return value in a variable.</p>\n\n<pre><code>return_value = nil\nexpect{ return_value = wojit.do_thing }.to change{ wojit.value }\nexpect( return_value ).to be true\n</code></pre>\n\n<p>YMMV as to whether it's better or worse than nested <code>expect</code>s.</p>\n"}], "owner": {"reputation": 607, "user_id": 3210927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/9c32b2beefffc67829ebf32bba7c7ea4?s=128&d=identicon&r=PG", "display_name": "Arepo", "link": "https://stackoverflow.com/users/3210927/arepo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1539371797, "creation_date": 1520945014, "question_id": 49256551, "link": "https://stackoverflow.com/questions/49256551/can-you-simultaneously-test-a-state-change-and-a-return-value-in-rspec", "title": "Can you simultaneously test a state change and a return value in RSpec?", "body": "<p>Say I have a method <code>MyKlass#do_thing</code> that I want to call exactly once in a test (because it might change a state), and that should return <code>true</code> on successful state change and <code>false</code> otherwise. I want to write a spec that looks something like this:</p>\n\n<pre><code>it \"Updates myvalue if condition is met\" do\n  wojit = MyKlass.new\n\n  # ... assuming condition is met\n  expect { wojit.do_thing }.to change { wojit.value }.and.be true\nend\n</code></pre>\n\n<p>But this particular approach gets an ArgumentError, because <code>#and</code> expects 1 argument. </p>\n\n<p>I can make it work with the following abomination:</p>\n\n<pre><code>expect { expect(wojit.do_thing).to be true }.to change { wojit.value }\n</code></pre>\n\n<p>But that is hiiiiideous. Am I missing something more idiomatic?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "time"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1520940587, "post_id": 49254942, "comment_id": 85512998, "body": "what do you want to receive? Could you give us examples of the output you need?"}, {"owner": {"reputation": 99, "user_id": 9452689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643289a279589f3c10fc25fc70c079f2?s=128&d=identicon&r=PG&f=1", "display_name": "a-ta-ta", "link": "https://stackoverflow.com/users/9452689/a-ta-ta"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1520940925, "post_id": 49254942, "comment_id": 85513230, "body": "Some thing like: x hour y minutes or just xxx minutes"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520942752, "post_id": 49254942, "comment_id": 85514414, "body": "<i>&quot;It gives something like 3601688.541388227&quot;</i> \u2013 that&#39;s the <b>difference in seconds</b>. 3,601,688 seconds \u2248 60,028 minutes \u2248 1,000 hours \u2248 41 days. And no, it doesn&#39;t make much sense to feed that number into <a href=\"http://ruby-doc.org/core-2.5.0/Time.html#method-c-at\" rel=\"nofollow noreferrer\"><code>Time.at</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 164, "user_id": 3547800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5681ac4c589f11207407950f5fcc8075?s=128&d=identicon&r=PG&f=1", "display_name": "Yogesh Waghmare", "link": "https://stackoverflow.com/users/3547800/yogesh-waghmare"}, "is_accepted": true, "score": 2, "last_activity_date": 1520941179, "creation_date": 1520941179, "answer_id": 49255217, "question_id": 49254942, "link": "https://stackoverflow.com/questions/49254942/how-to-convert-the-difference-between-dates-in-any-human-format-using-ruby/49255217#49255217", "title": "How to convert the difference between dates in any human format using Ruby?", "body": "<p>Are you talking about ago timestamp like a facebook?\nlike: \nday ago\n1 min ago\nweek ago\n3 months ago\nyear ago\nplease follow this document: \n<a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html</a>\n<a href=\"http://stevenyue.com/blogs/date-time-datetime-in-ruby-and-rails/\" rel=\"nofollow noreferrer\">http://stevenyue.com/blogs/date-time-datetime-in-ruby-and-rails/</a></p>\n"}], "owner": {"reputation": 99, "user_id": 9452689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/643289a279589f3c10fc25fc70c079f2?s=128&d=identicon&r=PG&f=1", "display_name": "a-ta-ta", "link": "https://stackoverflow.com/users/9452689/a-ta-ta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 49255217, "answer_count": 1, "score": 0, "last_activity_date": 1520941179, "creation_date": 1520940285, "last_edit_date": 1520940658, "question_id": 49254942, "link": "https://stackoverflow.com/questions/49254942/how-to-convert-the-difference-between-dates-in-any-human-format-using-ruby", "title": "How to convert the difference between dates in any human format using Ruby?", "body": "<p>Sorry for the title of the question! I really tried, but I don't even know how to explain my problem in right programatic terms. So it <em>might be duplicate</em> (if so - i'm sorry for that). Please, be so kind to <em>edit my question</em> or just <em>make a suggestion in comments</em>!</p>\n\n<p><strong>Situation:</strong></p>\n\n<pre><code>time_passed = Time.now - Post.find(id).created_at\n</code></pre>\n\n<p>It gives something like: <code>3601688.541388227</code> and it is \"Float\"</p>\n\n<p>How to make this look like something time-like which a human can understand), because now when I use <code>Time.at(time_passed)</code> it gives a predictable rubbish.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "bootstrap-4"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 9484757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fd88500407c70cea407bd0b51cce8ff?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/9484757/sridhar"}, "edited": false, "score": 0, "creation_date": 1520939379, "post_id": 49254479, "comment_id": 85512318, "body": "Thank you lg86, I already did the above step but it didnt work. Any other idea?"}], "tags": [], "owner": {"reputation": 346, "user_id": 9030790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4037273fba75800aa1dd6e249a9d9817?s=128&d=identicon&r=PG&f=1", "display_name": "lg86", "link": "https://stackoverflow.com/users/9030790/lg86"}, "is_accepted": true, "score": 0, "last_activity_date": 1520938879, "creation_date": 1520938879, "answer_id": 49254479, "question_id": 49254248, "link": "https://stackoverflow.com/questions/49254248/database-migration-issue-in-ruby-on-rails/49254479#49254479", "title": "Database migration issue in Ruby_on_Rails", "body": "<p>Yes, you can create a database by using following</p>\n\n<pre><code>rake db:create\n</code></pre>\n\n<p>These will create database for you.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 9484757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fd88500407c70cea407bd0b51cce8ff?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/9484757/sridhar"}, "edited": false, "score": 0, "creation_date": 1520940368, "post_id": 49254795, "comment_id": 85512866, "body": "Thanks a lot Rohan"}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520939835, "creation_date": 1520939835, "answer_id": 49254795, "question_id": 49254248, "link": "https://stackoverflow.com/questions/49254248/database-migration-issue-in-ruby-on-rails/49254795#49254795", "title": "Database migration issue in Ruby_on_Rails", "body": "<p>Yes, you can create the database using the following</p>\n\n<pre><code>1) rake db:create\n\n2) rake db:migrate\n</code></pre>\n\n<p>Note: </p>\n\n<p>Step 1) will only create the database  </p>\n\n<p>While 2) will migrate the table with its attributes to the database created in step 1) .</p>\n\n<p>For Step 2) you need to first generate model using the following command:</p>\n\n<pre><code>rails g model User name email\n</code></pre>\n\n<p>then use step 2)</p>\n"}], "owner": {"reputation": 67, "user_id": 9484757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fd88500407c70cea407bd0b51cce8ff?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/9484757/sridhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49254479, "answer_count": 2, "score": 0, "last_activity_date": 1520945475, "creation_date": 1520938256, "last_edit_date": 1520945475, "question_id": 49254248, "link": "https://stackoverflow.com/questions/49254248/database-migration-issue-in-ruby-on-rails", "title": "Database migration issue in Ruby_on_Rails", "body": "<p>I am now creating a teacher registration form using Ruby on Rails. I did not create a database to store the Data of users. Is it possible to create a database to store all the users data in the middle of the progress? If possible how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "merit-gem"], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 3308003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AiKlE.png?s=128&g=1", "display_name": "rony", "link": "https://stackoverflow.com/users/3308003/rony"}, "edited": false, "score": 0, "creation_date": 1520946530, "post_id": 49255510, "comment_id": 85517025, "body": "no, it won&#39;t work. I have tried it. since Gem Merit doesn&#39;t use ActiveRecord <code>ActiveRecord::ConfigurationError: Can&#39;t join &#39;User&#39; to association named &#39;badges&#39;; perhaps you misspelled it?</code>"}], "tags": [], "owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "is_accepted": false, "score": 0, "last_activity_date": 1520942014, "creation_date": 1520942014, "answer_id": 49255510, "question_id": 49253982, "link": "https://stackoverflow.com/questions/49253982/rails-order-user-based-on-number-of-badges-with-gem-merit/49255510#49255510", "title": "Rails order user based on number of badges with Gem Merit", "body": "<p>I never tried merit. But if u are able to get badges from user. then following query would give the USER_ID ==> BADGES_COUNT in descending order.</p>\n\n<p><code>User.joins(:badges).group('users.id').order(\"count(badges.id) DESC\").count</code></p>\n"}], "owner": {"reputation": 382, "user_id": 3308003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AiKlE.png?s=128&g=1", "display_name": "rony", "link": "https://stackoverflow.com/users/3308003/rony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520942014, "creation_date": 1520937530, "question_id": 49253982, "link": "https://stackoverflow.com/questions/49253982/rails-order-user-based-on-number-of-badges-with-gem-merit", "title": "Rails order user based on number of badges with Gem Merit", "body": "<p>I have a problem ordering users based on numbers of badges he/she has collected. I'm using Gem Merit to make the badges system.\nso if I want to collect user's badges, the code would be <code>user.badges</code> that would convert to sql as</p>\n\n<pre><code>Merit::Sash Load (1.6ms)  SELECT  \"sashes\".* FROM \"sashes\" WHERE \"sashes\".\"id\" = ? LIMIT ?  [[\"id\", 5], [\"LIMIT\", 1]]\nMerit::BadgesSash Load (1.4ms)  SELECT \"badges_sashes\".* FROM \"badges_sashes\" WHERE \"badges_sashes\".\"sash_id\" = ?  [[\"sash_id\", 5]]\n</code></pre>\n\n<p>in User model I include Merit and <code>has_merit</code> code as merit documentation said, and when I write <code>users = User.where(id: user_ids).left_joins(:merit).order(is_verified: :desc).group(:id).order(\"count(badges.id) desc\")</code> it says errors because it cannot recognize either the <code>merit</code> or <code>badges.id</code></p>\n\n<p>How do I actually order the users based on who has the most badges? THank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1520937079, "post_id": 49253610, "comment_id": 85510857, "body": "Why are you wrapping <code>@account.images</code> in another array?"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520937492, "post_id": 49253610, "comment_id": 85511125, "body": "Hmmm good point @Stefan I deleted the array brackets and I&#39;m still getting the error <code>no implicit conversion of nil into String</code>"}, {"owner": {"reputation": 126, "user_id": 616256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35ef71da5861ed68ee079bf4fc325d8?s=128&d=identicon&r=PG", "display_name": "lhdv", "link": "https://stackoverflow.com/users/616256/lhdv"}, "edited": false, "score": 0, "creation_date": 1520940896, "post_id": 49253610, "comment_id": 85513205, "body": "How is defined your Account model and the view you upload the image?"}, {"owner": {"reputation": 182, "user_id": 7519771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rDntF.png?s=128&g=1", "display_name": "Cyril Lemaire", "link": "https://stackoverflow.com/users/7519771/cyril-lemaire"}, "edited": false, "score": 0, "creation_date": 1520947959, "post_id": 49253610, "comment_id": 85518073, "body": "The fact that you have some images equal to nil is not link to the function you showed us. It is present beforehand in @account.images as stated in your logs (the question is now why is it thee and do you actualy want to have <code>Nil</code> images?). BTW <code>new_images</code> is overwrapped too, you could just write <code>@images = @account.images + new_images</code> (not sure if @images should be an attribute here, but that depends on the rest of your code)"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 182, "user_id": 7519771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rDntF.png?s=128&g=1", "display_name": "Cyril Lemaire", "link": "https://stackoverflow.com/users/7519771/cyril-lemaire"}, "edited": false, "score": 0, "creation_date": 1520949664, "post_id": 49253610, "comment_id": 85519295, "body": "Thanks for the reply @Cyril Lemaire... that is exactly the problem which I can&#39;t seem to fix. The nil value! The new images are getting added but the old ones become nil. Also, I tried this <code>@images = @account.images + new_images</code> but it returns the same behavior, it updates the new images and deletes the old images. Any ideas why this is happening?"}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "edited": false, "score": 0, "creation_date": 1520939515, "post_id": 49254502, "comment_id": 85512399, "body": "@thanks for the reply @Anija Sara Thomas... the syntax of this  <code>@account.images : []</code> is showing wrong"}, {"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520940216, "post_id": 49254502, "comment_id": 85512788, "body": "@Sebastian Palma .... I still get the error <code>no implicit conversion of nil into String</code> at this line: <code>@account.update_attributes(images: images)</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 8081028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561cb1cb7e8adf456da2d3f4708a4c90?s=128&d=identicon&r=PG&f=1", "display_name": "Anija Sara Thomas", "link": "https://stackoverflow.com/users/8081028/anija-sara-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1520939889, "last_edit_date": 1520939889, "creation_date": 1520938939, "answer_id": 49254502, "question_id": 49253610, "link": "https://stackoverflow.com/questions/49253610/rails-keep-existing-value-and-add-more-values-to-array/49254502#49254502", "title": "Rails keep existing value and add more values to array", "body": "<p>You have to use something like this:</p>\n\n<pre><code>def add_more_images(new_images)\n    @account = Account.find(params[:id])\n    images = @account.images.present? ? @account.images : []\n    images &lt;&lt; new_images\n    @account.update_attributes(images: images)\nend\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520939889, "creation_date": 1520936397, "question_id": 49253610, "link": "https://stackoverflow.com/questions/49253610/rails-keep-existing-value-and-add-more-values-to-array", "title": "Rails keep existing value and add more values to array", "body": "<p>I'm trying to keep the exist value of an array <code>@account.images</code> and add the values of <code>new_images</code> to the array like this:</p>\n\n<pre><code>def add_more_images(new_images)\n    @account = Account.find(params[:id])\n    @images = [@account.images]\n    @images += [new_images]\n    @account.assign_attributes({ :images =&gt; @images })\nend\n</code></pre>\n\n<p>This what I have in the strong params <code>{images: []}</code></p>\n\n<p>This is what I get from `@account.images:</p>\n\n<p><code>[#&lt;AttachmentUploader:0x007f98699482f8 @model=#&lt;Account id: 1, business_name: \"Example Account\", business_description: \"There are many variations of passages of Lorem Ips...\", web_site: \"www.example.com\", phone_number: \"\", street: \"\", zip_code: \"6021\", country: \"\", store_id: 1, city: \"\", state: \"\", created_at: \"2018-03-04 14:39:23\", updated_at: \"2018-03-13 09:19:30\", images: [nil, nil, nil, \"image8.jpg\"]&gt;, @mounted_as=:images, @storage=#&lt;CarrierWave::Storage::File:0x007f9869948258 @uploader=#&lt;AttachmentUploader:0x007f98699482f8 ...&gt;&gt;, @file=#&lt;CarrierWave::SanitizedFile:0x007f986a1f3ce0 @file=\"/Users/RubymineProjects/pinsle/public/uploads/account/images/1/image8.jpg\", @original_filename=nil, @content_type=nil&gt;, @versions={:thumb=&gt;#&lt;AttachmentUploader::Uploader70146304658160:0x007f986a1f3c90 @model=#&lt;Account id: 1, business_name: \"Example Account\", business_description: \"There are many variations of passages of Lorem Ips...\", web_site: \"www.example.com\", phone_number: \"2349875678\", street: \"\", zip_code: \"\", country: \"\", store_id: 1, city: \"\", state: \"\", created_at: \"2018-03-04 14:39:23\", updated_at: \"2018-03-13 09:19:30\", images: [nil, nil, nil, \"image8.jpg\"]&gt;, @mounted_as=:images, @parent_version=#&lt;AttachmentUploader:0x007f98699482f8 ...&gt;, @storage=#&lt;CarrierWave::Storage::File:0x007f986a1f3bc8 @uploader=#&lt;AttachmentUploader::Uploader70146304658160:0x007f986a1f3c90 ...&gt;&gt;, @file=#&lt;CarrierWave::SanitizedFile:0x007f986a1f36a0 @file=\"/Users/RubymineProjects/pinsle/public/uploads/account/images/1/thumb_image8.jpg\", @original_filename=nil, @content_type=nil&gt;, @versions={}&gt;, :mini=&gt;#&lt;AttachmentUploader::Uploader70146304645520:0x007f986a1f3c68 @model=#&lt;Account id: 1, business_name: \"Example Account\", business_description: \"There are many variations of passages of Lorem Ips...\", web_site: \"www.example.com\", phone_number: \"2349875678\", street: \"\", zip_code: \"\", country: \"\", store_id: 1, city: \"\", state: \"\", created_at: \"2018-03-04 14:39:23\", updated_at: \"2018-03-13 09:19:30\", images: [nil, nil, nil, \"image8.jpg\"]&gt;, @mounted_as=:images, @parent_version=#&lt;AttachmentUploader:0x007f98699482f8 ...&gt;, @storage=#&lt;CarrierWave::Storage::File:0x007f986a1f35d8 @uploader=#&lt;AttachmentUploader::Uploader70146304645520:0x007f986a1f3c68 ...&gt;&gt;, @file=#&lt;CarrierWave::SanitizedFile:0x007f986a1f30b0 @file=\"/Users/RubymineProjects/pinsle/public/uploads/account/images/1/mini_image8.jpg\", @original_filename=nil, @content_type=nil&gt;, @versions={}&gt;}&gt;]</code></p>\n\n<p>This is what I get from <code>new_images</code> :</p>\n\n<p><code>[#&lt;ActionDispatch::Http::UploadedFile:0x007f986a2096a8 @tempfile=#&lt;Tempfile:/var/folders/hq/pr4rt14n7s31v3f6292wtjm00000gn/T/RackMultipart20180313-2377-yox8g6.jpg&gt;, @original_filename=\"image1.jpg\", @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data; name=\\\"account[images][]\\\"; filename=\\\"image1.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;]\n</code></p>\n\n<p>And this is the error I get <code>no implicit conversion of nil into String</code> on this line : <code>@account.assign_attributes({ :images =&gt; @images })</code></p>\n\n<p>Any ideas what I'm doing wrong here and how to make this work?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rspec3"], "answers": [{"comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 2, "creation_date": 1574836217, "post_id": 49251315, "comment_id": 104367180, "body": "What if you&#39;re trying to test a class method that you can&#39;t initialize, and want to test many different inputs for?"}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 15, "last_activity_date": 1520931309, "last_edit_date": 1520931309, "creation_date": 1520929186, "answer_id": 49251315, "question_id": 49250745, "link": "https://stackoverflow.com/questions/49250745/how-to-pass-argument-to-subject-in-rspec/49251315#49251315", "title": "How to pass argument to subject in rspec", "body": "<p>You're not supposed to pass arguments to <code>subject</code>. And, by the way, it's a wrong place to make assertions (things like <code>expect</code>), they need to be done inside <code>it</code> blocks.\nHowever, you can define (and redefine) your dependencies inside <code>let</code> blocks, like this:</p>\n\n<pre><code>class MyClass\n  attr_reader :arg\n  def initialize(arg)\n    @arg = arg\n  end\nend\n\nRSpec.describe MyClass do\n  subject { MyClass.new(dynamic) }\n  let(:dynamic) { 'default value' }\n\n  context 'it works with default value' do\n    it { expect(subject.arg).to eq 'default value' }\n  end\n  context 'it works with dynamic value' do\n    let(:dynamic) { 'dynamic value' }\n    it { expect(subject.arg).to eq 'dynamic value' }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 9413016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXyHUIVEmt8/AAAAAAAAAAI/AAAAAAAAAAc/C31jaItXCGU/photo.jpg?sz=128", "display_name": "Sanjay Salunkhe", "link": "https://stackoverflow.com/users/9413016/sanjay-salunkhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6345, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1520932203, "creation_date": 1520926998, "last_edit_date": 1520932203, "question_id": 49250745, "link": "https://stackoverflow.com/questions/49250745/how-to-pass-argument-to-subject-in-rspec", "title": "How to pass argument to subject in rspec", "body": "<p>I have one subject block that I want to reuse in various places. </p>\n\n<pre><code>subject(:stubbed_data) do\n  expect(response.body).to eq(dynamic_var)\nend\n</code></pre>\n\n<p>The <code>dynamic_var</code> variable will be different for different test cases. Is there any way to call <code>subbed_data</code> subject with arguments so that I can have dynamic value for <code>dynamic_var</code> variable?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 2, "creation_date": 1520925074, "post_id": 49250034, "comment_id": 85503758, "body": "You can not get actual password text back from encrypted value instead you can cross check newly entered password against the encrypted password value."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7979002, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3abNP.jpg?s=128&g=1", "display_name": "raja", "link": "https://stackoverflow.com/users/7979002/raja"}, "edited": false, "score": 0, "creation_date": 1520925733, "post_id": 49250333, "comment_id": 85504071, "body": "then how to check the particular password is present in users table or not guys"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 5, "user_id": 7979002, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3abNP.jpg?s=128&g=1", "display_name": "raja", "link": "https://stackoverflow.com/users/7979002/raja"}, "edited": false, "score": 1, "creation_date": 1520925952, "post_id": 49250333, "comment_id": 85504192, "body": "@raja why do you want to check that?"}], "tags": [], "owner": {"reputation": 340, "user_id": 9335023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UciBB.png?s=128&g=1", "display_name": "Maciej N\u0119dza", "link": "https://stackoverflow.com/users/9335023/maciej-n%c4%99dza"}, "is_accepted": false, "score": 1, "last_activity_date": 1520931244, "last_edit_date": 1520931244, "creation_date": 1520925477, "answer_id": 49250333, "question_id": 49250034, "link": "https://stackoverflow.com/questions/49250034/how-to-print-the-user-password-in-rails-view/49250333#49250333", "title": "How to print the user password in rails view", "body": "<p>Passwords shouldn't be stored as plain text in database and the whole point of hashing them is that they are very hard (in terms of computation power) to reverse.</p>\n\n<p>Assuming you are using Devise for authentication you can read <a href=\"http://www.rubydoc.info/github/plataformatec/devise/master/Devise/Models/DatabaseAuthenticatable#password=-instance_method\" rel=\"nofollow noreferrer\">here</a> \nwhat <code>password</code> method do:</p>\n\n<blockquote>\n  <p>Generates a hashed password based on the given value. For legacy reasons, we use <code>encrypted_password</code> to store the hashed password.</p>\n</blockquote>\n\n<p>Its only responsibility is to set a password, not to return any value. </p>\n\n<p>By looking at your <code>schema.rb</code> or commands like <code>User.column_names</code> you can see there is no such column as password in your database.</p>\n\n<hr>\n\n<p>But If you really need to store passwords as plain text then according to this <a href=\"https://stackoverflow.com/a/12032073/9335023\">answer</a> you should write your own <a href=\"https://github.com/plataformatec/devise/wiki/How-To%3a-Create-a-custom-encryptor\" rel=\"nofollow noreferrer\">encryptor method</a></p>\n\n<hr>\n\n<p>If you are interested only in checking if particular password is same as the one stored in database then you can use <a href=\"http://www.rubydoc.info/github/plataformatec/devise/Devise/Models/DatabaseAuthenticatable#valid_password%3F-instance_method\" rel=\"nofollow noreferrer\">valid_password?</a></p>\n\n<blockquote>\n  <p>Verifies whether a password (ie from sign in) is the user password.</p>\n</blockquote>\n\n<p>like this:</p>\n\n<pre><code>@user = User.last \n@user.valid_password?('password')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520931611, "creation_date": 1520931611, "answer_id": 49251980, "question_id": 49250034, "link": "https://stackoverflow.com/questions/49250034/how-to-print-the-user-password-in-rails-view/49251980#49251980", "title": "How to print the user password in rails view", "body": "<p>The whole concept of storing passwords in encrypted form is to maintain the security of the user information.</p>\n\n<p>Moreover, you can match using</p>\n\n<p>Bcrypt Calculator:</p>\n\n<p><a href=\"https://www.dailycred.com/article/bcrypt-calculator\" rel=\"nofollow noreferrer\">https://www.dailycred.com/article/bcrypt-calculator</a>.</p>\n\n<p>If you are using devise then you can use recoverable module or the custom logic you have written to reset password.</p>\n"}], "owner": {"reputation": 5, "user_id": 7979002, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3abNP.jpg?s=128&g=1", "display_name": "raja", "link": "https://stackoverflow.com/users/7979002/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1520933538, "creation_date": 1520924364, "last_edit_date": 1520933538, "question_id": 49250034, "link": "https://stackoverflow.com/questions/49250034/how-to-print-the-user-password-in-rails-view", "title": "How to print the user password in rails view", "body": "<p>In my controller</p>\n\n<pre><code>@user = User.last\n</code></pre>\n\n<p>In my view</p>\n\n<pre><code>&lt;%= @user.password.inspect %&gt;\n</code></pre>\n\n<p>returns nil value, but if i am using </p>\n\n<pre><code>&lt;%= @user.encrypted_password.inspect %&gt;\n</code></pre>\n\n<p>it shows <code>\"$2a$11$LXD0UDB3kvwxqG/w/0icGuy6iXEOFZ264ushzSi6LfXSdAitwPmNO\"</code> </p>\n\n<p>How do I print the password instead of the encrypted password.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 1, "creation_date": 1520922146, "post_id": 49249388, "comment_id": 85502398, "body": "Use single quotes:  &#39;\\t\\n&#39; . Otherwise escape the character with a backslash :  &quot;\\\\t\\\\n&quot;"}, {"owner": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "edited": false, "score": 0, "creation_date": 1520924209, "post_id": 49249388, "comment_id": 85503350, "body": "I want to change all \\ to \\\\ .However, s.gsub!(&#39;\\&#39;,&#39;\\\\&#39;) does not make sense"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1520926242, "post_id": 49249388, "comment_id": 85504314, "body": "Why do you want to output <code>\\t\\n</code>? What are you trying to achieve?"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "edited": false, "score": 0, "creation_date": 1520922178, "post_id": 49249456, "comment_id": 85502415, "body": "If I can not achieve this when initialization, what should I do?"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "reply_to_user": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "edited": false, "score": 0, "creation_date": 1520922256, "post_id": 49249456, "comment_id": 85502452, "body": "@XINLIU initialization of what, some context would help us understand your problem better"}, {"owner": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "edited": false, "score": 0, "creation_date": 1520922489, "post_id": 49249456, "comment_id": 85502557, "body": "For example, I got the string from a function, so I can not modify &quot; to &#39; in this way."}, {"owner": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "edited": false, "score": 0, "creation_date": 1520924309, "post_id": 49249456, "comment_id": 85503402, "body": "I want to change all \\ to \\\\ .However, <b>s.gsub!(&#39;\\&#39;,&#39;\\\\&#39;)</b> does not make sense"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520936960, "post_id": 49249456, "comment_id": 85510785, "body": "The OP is aware that these are escape sequences. The question is how to print them."}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 2, "last_activity_date": 1520921795, "creation_date": 1520921795, "answer_id": 49249456, "question_id": 49249388, "link": "https://stackoverflow.com/questions/49249388/output-string-containing-escape-characters/49249456#49249456", "title": "Output string containing escape characters", "body": "<p>That's because <code>\\n</code> and <code>\\t</code> are escape sequences </p>\n\n<blockquote>\n  <p>A single-quoted strings don\u2019t process ASCII escape codes, and they don\u2019t do string interpolation while double-quoted does both.</p>\n</blockquote>\n\n<p>So if you want that behaviour, you should do</p>\n\n<pre><code>s = '\\t\\n'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1520931551, "creation_date": 1520931551, "answer_id": 49251959, "question_id": 49249388, "link": "https://stackoverflow.com/questions/49249388/output-string-containing-escape-characters/49251959#49251959", "title": "Output string containing escape characters", "body": "<p>Just use <code>inspect</code> to see the \"raw\" escape sequences.</p>\n\n<pre><code>s = \"\\t\\n\"\nputs s.inspect\n# &gt;&gt; \"\\t\\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520931657, "post_id": 49251961, "comment_id": 85507250, "body": "beat you by two seconds, haha"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1520931553, "creation_date": 1520931553, "answer_id": 49251961, "question_id": 49249388, "link": "https://stackoverflow.com/questions/49249388/output-string-containing-escape-characters/49251961#49251961", "title": "Output string containing escape characters", "body": "<pre><code>p s # &gt;&gt; \"\\t\\n\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>puts s.inspect[1...-1] # &gt;&gt; \\t\\n\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9128358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e055b265ca0f17f1c344d18763b9039e?s=128&d=identicon&r=PG&f=1", "display_name": "XIN LIU", "link": "https://stackoverflow.com/users/9128358/xin-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1520931553, "creation_date": 1520921494, "last_edit_date": 1520931448, "question_id": 49249388, "link": "https://stackoverflow.com/questions/49249388/output-string-containing-escape-characters", "title": "Output string containing escape characters", "body": "<p>I have a string:</p>\n\n<pre><code>s = \"\\t\\n\"\n</code></pre>\n\n<p>I intend to output:</p>\n\n<pre><code>\\t\\n\n</code></pre>\n\n<p>When I do </p>\n\n<pre><code>puts s\n</code></pre>\n\n<p>I see nothing. How should I do it?</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1520921546, "post_id": 49249262, "comment_id": 85502124, "body": "paste a sample hash of the school and students info, it&#39;ll help us understand what you actually want"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1521223903, "post_id": 49249262, "comment_id": 85655863, "body": "To save yourself headaches use objects instead of primitives and add a <code>to_h</code> and <code>to_json</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 901790, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6135e82f0207633412073bcc8425fb80?s=128&d=identicon&r=PG", "display_name": "user901790", "link": "https://stackoverflow.com/users/901790/user901790"}, "edited": false, "score": 0, "creation_date": 1520921522, "post_id": 49249362, "comment_id": 85502116, "body": "wait what? how do i append my objects in there?"}, {"owner": {"reputation": 11, "user_id": 9423514, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-22RO33VCckE/AAAAAAAAAAI/AAAAAAAAABg/92NNKhDWvEQ/photo.jpg?sz=128", "display_name": "Muhammad Hashir", "link": "https://stackoverflow.com/users/9423514/muhammad-hashir"}, "reply_to_user": {"reputation": 287, "user_id": 901790, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6135e82f0207633412073bcc8425fb80?s=128&d=identicon&r=PG", "display_name": "user901790", "link": "https://stackoverflow.com/users/901790/user901790"}, "edited": false, "score": 0, "creation_date": 1520922176, "post_id": 49249362, "comment_id": 85502413, "body": "you can follow the above format to store the data as json object. To get only school data .try =&gt; data.schools.school, it will return only school information"}, {"owner": {"reputation": 287, "user_id": 901790, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6135e82f0207633412073bcc8425fb80?s=128&d=identicon&r=PG", "display_name": "user901790", "link": "https://stackoverflow.com/users/901790/user901790"}, "edited": false, "score": 0, "creation_date": 1520922859, "post_id": 49249362, "comment_id": 85502720, "body": "The issue is not the structure, I need to know how to append my array into that structure? is it something like [&#39;data&#39;][&#39;schools&#39;] &lt;&lt; schools?"}], "tags": [], "owner": {"reputation": 11, "user_id": 9423514, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-22RO33VCckE/AAAAAAAAAAI/AAAAAAAAABg/92NNKhDWvEQ/photo.jpg?sz=128", "display_name": "Muhammad Hashir", "link": "https://stackoverflow.com/users/9423514/muhammad-hashir"}, "is_accepted": false, "score": 0, "last_activity_date": 1520921360, "creation_date": 1520921360, "answer_id": 49249362, "question_id": 49249262, "link": "https://stackoverflow.com/questions/49249262/how-to-nest-multiple-json-objects-together-in-a-single-response/49249362#49249362", "title": "How to nest multiple json objects together in a single response", "body": "<pre><code>data:{\n   schools:{ \n       school:{[ ], []}\n       student: {[], [] }   \n   }\n}\n</code></pre>\n\n<p>Try something like this</p>\n"}, {"tags": [], "owner": {"reputation": 287, "user_id": 901790, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6135e82f0207633412073bcc8425fb80?s=128&d=identicon&r=PG", "display_name": "user901790", "link": "https://stackoverflow.com/users/901790/user901790"}, "is_accepted": false, "score": 0, "last_activity_date": 1520923282, "creation_date": 1520923282, "answer_id": 49249791, "question_id": 49249262, "link": "https://stackoverflow.com/questions/49249262/how-to-nest-multiple-json-objects-together-in-a-single-response/49249791#49249791", "title": "How to nest multiple json objects together in a single response", "body": "<p>Figured it out, here's the spill.</p>\n\n<pre><code>hash = {}\n\nhash[:schools] = {schools hash object}\nhash[:students] = {student hash}\n\nhash.to_json \n</code></pre>\n\n<p>and BOOMSHAKALAKA, DONE!</p>\n"}], "owner": {"reputation": 287, "user_id": 901790, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6135e82f0207633412073bcc8425fb80?s=128&d=identicon&r=PG", "display_name": "user901790", "link": "https://stackoverflow.com/users/901790/user901790"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520923282, "creation_date": 1520920855, "question_id": 49249262, "link": "https://stackoverflow.com/questions/49249262/how-to-nest-multiple-json-objects-together-in-a-single-response", "title": "How to nest multiple json objects together in a single response", "body": "<p>I need to send a response from a sinatra server with multiple json object.</p>\n\n<p>I have an array of hashes similar to these:</p>\n\n<pre><code>{:a=&gt;5, :school=&gt;\"some school\"} &amp;&amp; {:id=&gt;5, :name=&gt;\"michael\"} \n</code></pre>\n\n<p>I would like to append a key to each one say 'school' and 'student' then send that back to the browser in one request like:</p>\n\n<pre><code>[schools:[{werererererwre},{werwrwerwewe}],\n student:[{student1}, {student2}]\n</code></pre>\n\n<p>that's probably not fully formatted json but you understand what I'm trying to do, so then on the frontend I can just go </p>\n\n<pre><code>data.schools\n</code></pre>\n\n<p>to get an array of the schools</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1520916348, "post_id": 49248306, "comment_id": 85500425, "body": "Please check my answer"}], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1520916060, "post_id": 49248391, "comment_id": 85500330, "body": "Refactoring the instance method would require modifying the view. How do you reckon I display the date format without <code>@job_days</code>?"}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1520924538, "post_id": 49248391, "comment_id": 85503513, "body": "You can use <code>DATE</code> with any of aggregate function like count. Fetching records will raise <code>PG::GroupingError</code> error"}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1521025603, "post_id": 49248391, "comment_id": 85554553, "body": "Yeah,  we can not just fetch records, instead can be used with any other aggregate function like <code>count</code>"}], "tags": [], "owner": {"reputation": 144, "user_id": 1699858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/346026d73c323575d19a18ebc6fc28f2?s=128&d=identicon&r=PG", "display_name": "Aditya", "link": "https://stackoverflow.com/users/1699858/aditya"}, "is_accepted": false, "score": -1, "last_activity_date": 1520915593, "creation_date": 1520915593, "answer_id": 49248391, "question_id": 49248306, "link": "https://stackoverflow.com/questions/49248306/rails-group-a-list-of-records-by-created-at/49248391#49248391", "title": "Rails - Group a list of records by created_at", "body": "<p>Wouldn\u2019t just,</p>\n\n<pre><code>Job.where(\u2018your conditions\u2019).group(\u201cDATE(created_at)\u201d)\n</code></pre>\n\n<p>Work?</p>\n\n<p>PS: This isn\u2019t tested since I\u2019m adding this from my phone. </p>\n"}, {"comments": [{"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1520916448, "post_id": 49248441, "comment_id": 85500457, "body": "I&#39;ll try this and report back to you the results."}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1520922287, "post_id": 49248441, "comment_id": 85502465, "body": "Refactoring the method requires modifying the view. It&#39;s unclear how how to display the date in view @vishal"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1520925782, "post_id": 49248441, "comment_id": 85504095, "body": "@VegaStudios Updated answer please check it. :)"}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1520953000, "post_id": 49248441, "comment_id": 85521869, "body": "How is this query more performant than what I&#39;ve already got? @vishal"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1520999672, "post_id": 49248441, "comment_id": 85542165, "body": "@VegaStudios may be you got what you want.  right ?"}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1521000457, "post_id": 49248441, "comment_id": 85542346, "body": "Doesn&#39;t really answer my question; I&#39;m wondering if there is a more performant way than my current approach"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1521004230, "post_id": 49248441, "comment_id": 85543305, "body": "@VegaStudios this is the best way to group by particular field."}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 1, "last_activity_date": 1520925756, "last_edit_date": 1520925756, "creation_date": 1520916028, "answer_id": 49248441, "question_id": 49248306, "link": "https://stackoverflow.com/questions/49248306/rails-group-a-list-of-records-by-created-at/49248441#49248441", "title": "Rails - Group a list of records by created_at", "body": "<p>Try below query:</p>\n\n<pre><code>@results = Job.(Job.arel_table[:created_at].gteq(\"%D\")).\n  order(\"created_at DESC\").\n  group_by {\n    |job| job.created_at.strftime(\"%B %d\")\n  }\n</code></pre>\n\n<p>View would become:</p>\n\n<p><strong>index.html.haml</strong></p>\n\n<pre><code>- @results.each do |date, items|\n  = date\n  - items.each do |job|\n    = link_to(job.url) do\n      %h2= job.title\n      %p= job.company\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 1, "creation_date": 1521088628, "post_id": 49259314, "comment_id": 85586001, "body": "Thanks a lot for the answer @MikeA"}], "tags": [], "owner": {"reputation": 2422, "user_id": 219915, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/80c07bab068c17f486cefbbc09d8b162?s=128&d=identicon&r=PG", "display_name": "Mike A", "link": "https://stackoverflow.com/users/219915/mike-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1520952921, "creation_date": 1520952921, "answer_id": 49259314, "question_id": 49248306, "link": "https://stackoverflow.com/questions/49248306/rails-group-a-list-of-records-by-created-at/49259314#49259314", "title": "Rails - Group a list of records by created_at", "body": "<p><code>Job.where('your conditions').group_by(&amp;:created_at)</code></p>\n"}], "owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 49259314, "answer_count": 3, "score": 0, "last_activity_date": 1520952921, "creation_date": 1520914994, "question_id": 49248306, "link": "https://stackoverflow.com/questions/49248306/rails-group-a-list-of-records-by-created-at", "title": "Rails - Group a list of records by created_at", "body": "<p>I'm creating a job board, and to make it easy to navigate postings I'm hoping to group Jobs by on the day they were created. My current implementation works OK, but I'm wondering if there is a more performant way to approach this; something about adding two instance variables in the <em>new</em> method of the JobsController. </p>\n\n<p>Below would be a great outcome for the list, ordered in descending order:</p>\n\n<h3>March 11</h3>\n\n<ul>\n<li>Job F [id:6]</li>\n<li>Job E [id:5]</li>\n<li>Job D [id:4]</li>\n</ul>\n\n<h3>March 10</h3>\n\n<ul>\n<li>Job C [id:3]</li>\n<li>Job B [id:2]</li>\n<li>Job A [id:1]</li>\n</ul>\n\n<p><strong>JobsController &lt; ApplicationController</strong></p>\n\n<pre><code>def index\n  @jobs = Job.where(Job.arel_table[:created_at].gteq(\"%D\")).order(\"created_at DESC\")\n  @job_days = @jobs.group_by { |job| job.created_at.to_date }\nend\n</code></pre>\n\n<p><strong>index.html.haml</strong></p>\n\n<pre><code>- @job_days.each do |day, jobs|\n  = day.strftime(\"%B %d\")\n  - jobs.each do |job|\n    = link_to(job.url) do\n      %h2= job.title\n      %p= job.company\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1520959061, "post_id": 49248189, "comment_id": 85526351, "body": "updated my question. Thanks @CarySwoveland!"}, {"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1520964156, "post_id": 49248189, "comment_id": 85529388, "body": "Thanks for clarification, i updated the question."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "edited": false, "score": 0, "creation_date": 1520914572, "post_id": 49248231, "comment_id": 85499956, "body": "it returns me only one hash <code>{:created_at=&gt;1520049341, :event_id=&gt;&quot;890&quot;, :album_id=&gt;&quot;765&quot;}</code> but i need all <code>event_ids</code> except  duplicated  based on earliest <code>:created_at</code>"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "reply_to_user": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "edited": false, "score": 0, "creation_date": 1520914665, "post_id": 49248231, "comment_id": 85499974, "body": "You mean you only need the <code>event_ids</code> or the whole hash?"}, {"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "edited": false, "score": 0, "creation_date": 1520914770, "post_id": 49248231, "comment_id": 85500004, "body": "i expect to get only this [ {:created_at =&gt; 1520740541, :event_id =&gt; &#39;234&#39;, :album_id =&gt; &#39;999&#39;}, {:created_at =&gt; 1520654141, :event_id =&gt; &#39;111&#39;, :album_id =&gt; &#39;777&#39;}, {:created_at =&gt; 1520394941, :event_id =&gt; &#39;233&#39;, :album_id =&gt; &#39;444&#39;}, {:created_at =&gt; 1520049341, :event_id =&gt; &#39;890&#39;, :album_id =&gt; &#39;765&#39;}  ]"}, {"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "edited": false, "score": 0, "creation_date": 1520914881, "post_id": 49248231, "comment_id": 85500042, "body": "the first hash form the  array needs to be filtered out because 1. it&#39;s duplicated event_id 2. :created_at is later than for the third hash"}, {"owner": {"reputation": 2985, "user_id": 1918618, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/4Lh3o.jpg?s=128&g=1", "display_name": "Manoj Monga", "link": "https://stackoverflow.com/users/1918618/manoj-monga"}, "edited": false, "score": 3, "creation_date": 1520915579, "post_id": 49248231, "comment_id": 85500222, "body": "You should sort the array first and then call uniq on it. <code>array.sort_by {|t| t[:created_at]}.uniq {|t| [t[:event_id]]}</code> so that it keeps the the correct one."}, {"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "edited": false, "score": 0, "creation_date": 1520915737, "post_id": 49248231, "comment_id": 85500258, "body": "Thank you, guys! I appreciate this!"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1520917537, "post_id": 49248231, "comment_id": 85500742, "body": "Rather than editing your answer with a near-identical answer to mine, the sporting thing to do would have been to point out the final array in my answer wasn&#39;t sorted."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520918204, "post_id": 49248231, "comment_id": 85500947, "body": "@SagarPandya Yes, you are right, my last edit was somewhat based from your answer, I was testing mine on the console and just wanted it to produce the exact result, sorry if you feel ripped off."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520918452, "post_id": 49248231, "comment_id": 85501015, "body": "Okay, no worries. In future you may wish to credit or acknowledge another user if you have based your answer on theirs. I&#39;ve upvoted your answer and deleted mine now."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1520918706, "post_id": 49248231, "comment_id": 85501096, "body": "I&#39;ll keep that in mind, thank you for upvoting my answer, that was really nice of you."}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 3, "last_activity_date": 1520915629, "last_edit_date": 1520915629, "creation_date": 1520914343, "answer_id": 49248231, "question_id": 49248189, "link": "https://stackoverflow.com/questions/49248189/how-to-filter-array-of-hashes-by-two-pairs-of-key-value-in-ruby/49248231#49248231", "title": "How to filter array of hashes by two pairs of `key =&gt; value` in ruby?", "body": "<p>Try this</p>\n\n<pre><code>array.group_by { |t| t[:event_id] }.map { |_,hash| hash.min_by { |t| t[:created_at]} }.sort_by {|t| -t[:created_at]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1520921318, "post_id": 49249217, "comment_id": 85502021, "body": "After posting I saw that my answer was given earlier by @ManojMonga in a comment posted on Subash&#39;s answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1520921433, "post_id": 49249217, "comment_id": 85502072, "body": "@ManojMonga, if you wish to post your answer I will happily delete mine."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1520953567, "last_edit_date": 1520953567, "creation_date": 1520920706, "answer_id": 49249217, "question_id": 49248189, "link": "https://stackoverflow.com/questions/49248189/how-to-filter-array-of-hashes-by-two-pairs-of-key-value-in-ruby/49249217#49249217", "title": "How to filter array of hashes by two pairs of `key =&gt; value` in ruby?", "body": "<pre><code>array.sort_by { |h| h[:created_at] }.uniq { |h| h[:event_id] }\n  #=&gt; [{:created_at=&gt;1520049341, :event_id=&gt;\"890\", :album_id=&gt;\"765\"},\n  #    {:created_at=&gt;1520394941, :event_id=&gt;\"233\", :album_id=&gt;\"444\"},\n  #    {:created_at=&gt;1520654141, :event_id=&gt;\"111\", :album_id=&gt;\"777\"},\n  #    {:created_at=&gt;1520740541, :event_id=&gt;\"234\", :album_id=&gt;\"999\"}]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-uniq\" rel=\"nofollow noreferrer\">Array#uniq</a>, in particular, \"<code>self</code> is traversed in order, and the first occurrence is kept.\".</p>\n"}], "owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1520964030, "creation_date": 1520913967, "last_edit_date": 1520964030, "question_id": 49248189, "link": "https://stackoverflow.com/questions/49248189/how-to-filter-array-of-hashes-by-two-pairs-of-key-value-in-ruby", "title": "How to filter array of hashes by two pairs of `key =&gt; value` in ruby?", "body": "<p>I have an array of hashes:</p>\n\n<pre><code>array = [\n{:created_at =&gt; 1520913341, :event_id =&gt; '111', :album_id =&gt; '123'},\n{:created_at =&gt; 1520740541, :event_id =&gt; '234', :album_id =&gt; '999'},\n{:created_at =&gt; 1520654141, :event_id =&gt; '111', :album_id =&gt; '777'},\n{:created_at =&gt; 1520394941, :event_id =&gt; '233', :album_id =&gt; '444'},\n{:created_at =&gt; 1520049341, :event_id =&gt; '890', :album_id =&gt; '765'}\n ]\n</code></pre>\n\n<p>i need to keep hashes with all <code>:event_id</code> and if <code>:event_id</code> is duplicated keep the one with earliest <code>:created_at</code>.How can i do that in ruby?</p>\n\n<p>i expect to get in the response following:</p>\n\n<pre><code>[\n{:created_at =&gt; 1520740541, :event_id =&gt; '234', :album_id =&gt; '999'},\n{:created_at =&gt; 1520654141, :event_id =&gt; '111', :album_id =&gt; '777'},\n{:created_at =&gt; 1520394941, :event_id =&gt; '233', :album_id =&gt; '444'},\n{:created_at =&gt; 1520049341, :event_id =&gt; '890', :album_id =&gt; '765'}\n ]\n</code></pre>\n"}, {"tags": ["ruby", "alias"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1520912782, "post_id": 49247996, "comment_id": 85499505, "body": "I don&#39;t think you can alias modules, if its really long and used in multiple places you could define a function that exposes that module or you could inject it in your initialize method and use as instance variables"}], "answers": [{"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 3, "last_activity_date": 1520915107, "creation_date": 1520915107, "answer_id": 49248322, "question_id": 49247996, "link": "https://stackoverflow.com/questions/49247996/in-ruby-is-there-analog-like-import-as-in-python/49248322#49248322", "title": "In Ruby, is there analog like &quot;import ... as ...&quot; in Python?", "body": "<p>There is no such thing(<code>import .. as ..</code>) in Ruby, Still you can make the method easily accessible via different methods. </p>\n\n<p>Everything in ruby is an object which can be assigned to another variable just like any other object. You can just assign the submodule to a variable and the variable can be treated like the submodule reference.</p>\n\n<pre><code># Assume you have followed the rails conventions for naming and file structure\n# 'bigmodule/bigobject/somethingbig'\ncutie = Bigmodule::Bigobject::Something\n\n# Now you can access module methods with `cutie` reference variable.\n# You can also define a method, which access the submodule\ndef cutie\n  Bigmodule::Bigobject::Something\nend\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code># Assigning String class to a variable\na = String\na.new(\"Hello World\") # It will produce a new string with value as 'Hello World'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 343, "user_id": 2621059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d99570b8a334aa7d62a69b6b9cde0a4?s=128&d=identicon&r=PG&f=1", "display_name": "MicahT", "link": "https://stackoverflow.com/users/2621059/micaht"}, "is_accepted": false, "score": 0, "last_activity_date": 1520915141, "creation_date": 1520915141, "answer_id": 49248325, "question_id": 49247996, "link": "https://stackoverflow.com/questions/49247996/in-ruby-is-there-analog-like-import-as-in-python/49248325#49248325", "title": "In Ruby, is there analog like &quot;import ... as ...&quot; in Python?", "body": "<p>Nope. If you are going from python to Ruby it is one of those things you'll get used to. You will learn that it really doesn't make sense to do it the python way.  </p>\n\n<p>But do you have an example of some code that you don't like as a result of this? There may be a better way.</p>\n"}], "owner": {"reputation": 665, "user_id": 4946720, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/622978bee90b9bd34da2af337578bf32?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/4946720/some-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520915141, "creation_date": 1520912613, "question_id": 49247996, "link": "https://stackoverflow.com/questions/49247996/in-ruby-is-there-analog-like-import-as-in-python", "title": "In Ruby, is there analog like &quot;import ... as ...&quot; in Python?", "body": "<p>In Python, I can import a subset of a module, give it a short name and reference only the short name from the code. e.g.</p>\n\n<pre><code>import bigmodule.bigobject.somethingbig as cutie\n</code></pre>\n\n<p>Is there something similar in ruby so I don't have to type the long string?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authorize.net"], "answers": [{"tags": [], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "is_accepted": true, "score": 2, "last_activity_date": 1521046768, "creation_date": 1521046768, "answer_id": 49283631, "question_id": 49247456, "link": "https://stackoverflow.com/questions/49247456/authorize-net-there-is-one-or-more-missing-or-invalid-required-fields-but-it/49283631#49283631", "title": "Authorize.net: &quot;There is one or more missing or invalid required fields.&quot; But it doesn&#39;t say what&#39;s missing or invalid", "body": "<p>I found I was missing the zip code in the view.</p>\n\n<pre><code>  .form-group\n    =f.label :zip\n    =f.text_field :zip, class: 'form-control'\n</code></pre>\n\n<p>I wish it would have told me.</p>\n"}], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 49283631, "answer_count": 1, "score": 2, "last_activity_date": 1521046768, "creation_date": 1520908672, "question_id": 49247456, "link": "https://stackoverflow.com/questions/49247456/authorize-net-there-is-one-or-more-missing-or-invalid-required-fields-but-it", "title": "Authorize.net: &quot;There is one or more missing or invalid required fields.&quot; But it doesn&#39;t say what&#39;s missing or invalid", "body": "<p>I'm implementing customer profiles. I took the code almost verbatim from the example. When I try to create a customer profile, it complains a field is missing, but doesn't specify which one. What is wrong?</p>\n\n<p><a href=\"https://developer.authorize.net/api/reference/index.html#customer-profiles-create-customer-profile\" rel=\"nofollow noreferrer\">https://developer.authorize.net/api/reference/index.html#customer-profiles-create-customer-profile</a></p>\n\n<code>payment_profiles_controller.rb</code>\n\n<pre><code>  def create\n    @payment_profile = ::PaymentProfile.new pp_params # my model, not theirs\n    unless @payment_profile.valid?\n      flash.now.alert = @payment_profile.errors.full_messages.join(', ')\n      render :new and return\n    end\n    # create authorize.net customer profile\n    if Rails.env == 'production'\n      transaction = Transaction.new(ENV['AUTHORIZENET_LOGIN_ID'], ENV['AUTHORIZENET_TRANSACTION_KEY'], :gateway =&gt; :production)\n    else\n      transaction = Transaction.new(ENV['AUTHORIZENET_LOGIN_ID'], ENV['AUTHORIZENET_TRANSACTION_KEY'], :gateway =&gt; :sandbox)\n    end\n\n    # Build the payment object\n    payment = PaymentType.new(CreditCardType.new)\n    payment.creditCard.cardNumber = pp_params[:card_number]\n    payment.creditCard.expirationDate = pp_params[:expiration_date]\n\n    # Build an address object\n    billTo = CustomerAddressType.new\n    billTo.firstName = pp_params[:first_name]\n    billTo.lastName = pp_params[:last_name]\n    billTo.company = pp_params[:company]\n    billTo.phoneNumber = pp_params[:phone]\n    billTo.address = pp_params[:address]\n    billTo.city = pp_params[:city]\n    billTo.state = pp_params[:state]\n    billTo.zip = pp_params[:zip]\n    billTo.country = pp_params[:country]\n\n    # Use the previously defined payment and billTo objects to\n    # build a payment profile to send with the request\n    paymentProfile = CustomerPaymentProfileType.new\n    paymentProfile.customerType = 'business'\n    paymentProfile.payment = payment\n    paymentProfile.billTo = billTo\n    paymentProfile.defaultPaymentProfile = true\n\n    # Build the request object\n    request = CreateCustomerProfileRequest.new\n    # Build the profile object containing the main information about the customer profile\n    request.profile = CustomerProfileType.new\n    request.profile.merchantCustomerId = @user.id\n    request.profile.email = @user.email\n    # Add the payment profile and shipping profile defined previously\n    request.profile.paymentProfiles = [paymentProfile]\n    request.validationMode = ValidationModeEnum::LiveMode    \n\n    response = transaction.create_customer_profile(request)\n\n    if response != nil\n      byebug\n      puts response.messages.resultCode\n      if response.messages.resultCode == MessageTypeEnum::Ok\n        puts \"Successfully created a customer profile with id: #{response.customerProfileId}\"\n        puts \"  Customer Payment Profile Id List:\"\n        response.customerPaymentProfileIdList.numericString.each do |id|\n          puts \"    #{id}\"\n        end\n        puts \"  Customer Shipping Address Id List:\"\n        response.customerShippingAddressIdList.numericString.each do |id|\n          puts \"    #{id}\"\n        end\n        puts \n        @subscription.create_authorizenet user: @user, customer_profile_id: response.customerProfileId, customer_payment_profile_id: response.customerPaymentProfileIdList.numericString.first\n        redirect_to dashboard_path, notice: 'Customer payment profile saved.'\n      else\n        puts response.messages.messages[0].code\n        puts response.messages.messages[0].text\n        flash.now.alert = \"Failed to create a new customer profile: #{response.messages.messages[0].code} #{response.messages.messages[0].text}\"\n        render :new\n      end\n    else\n      puts \"Response is null\"\n      flash.now.alert = \"Failed to create a new customer profile.\"\n      render :new\n    end\n  end\n</code></pre>\n\n<h3>Console</h3>\n\n<pre><code>Started POST \"/users/1/subscription/payment_profile\" for 127.0.0.1 at 2018-03-12 22:02:32 -0400\nProcessing by PaymentProfilesController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u221a\", \"authenticity_token\"=&gt;\"HsKjEiR6ulTSPN0GzwfmAa2bG1LV6Lixp8TW4lNcJZVlxPP1v/46GAr7NGqdjQ47eV20ZWWDVjsf1TwpsfaRhQ==\", \"payment_profile\"=&gt;{\"card_number\"=&gt;\"4111111111111111\", \"expiration_date\"=&gt;\"2018-11\", \"first_name\"=&gt;\"Sue\", \"last_name\"=&gt;\"D. Nym\", \"company\"=&gt;\"Acme Corp.\", \"phone\"=&gt;\"212-222-3333\", \"address\"=&gt;\"2 Wall St.\", \"city\"=&gt;\"New York\", \"state\"=&gt;\"NY\", \"country\"=&gt;\"United States\"}, \"commit\"=&gt;\"Save\", \"user_id\"=&gt;\"1\"}\n...\n(byebug) response.messages\n#&lt;AuthorizeNet::API::MessagesType:0x000000102e5a08 @resultCode=\"Error\", @messages=[#&lt;AuthorizeNet::API::MessagesType::Message:0x000000102bd148 @code=\"E00027\", @text=\"There is one or more missing or invalid required fields.\", @roxml_references=[#&lt;ROXML::XMLTextRef:0x000000102bd030 @opts=#&lt;ROXML::Definition:0x000000066e5d88 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"code\", @array=false, @blocks=[], @sought_type=:text, @attr_name=\"code\", @name=\"code\"&gt;, @instance=#&lt;AuthorizeNet::API::MessagesType::Message:0x000000102bd148 ...&gt;, @default_namespace=\"xmlns\"&gt;, #&lt;ROXML::XMLTextRef:0x000000102bd008 @opts=#&lt;ROXML::Definition:0x000000066e5540 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"text\", @array=false, @blocks=[], @sought_type=:text, @attr_name=\"text\", @name=\"text\"&gt;, @instance=#&lt;AuthorizeNet::API::MessagesType::Message:0x000000102bd148 ...&gt;, @default_namespace=\"xmlns\"&gt;]&gt;], @roxml_references=[#&lt;ROXML::XMLTextRef:0x000000102e5760 @opts=#&lt;ROXML::Definition:0x000000066e4ac8 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"resultCode\", @array=false, @blocks=[], @sought_type=:text, @attr_name=\"resultCode\", @name=\"resultCode\"&gt;, @instance=#&lt;AuthorizeNet::API::MessagesType:0x000000102e5a08 ...&gt;, @default_namespace=\"xmlns\"&gt;, #&lt;ROXML::XMLObjectRef:0x000000102e5738 @opts=#&lt;ROXML::Definition:0x00000008cc7fb0 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"messages\", @array=true, @blocks=[], @sought_type=AuthorizeNet::API::MessagesType::Message, @attr_name=\"messages\", @name=\"message\"&gt;, @instance=#&lt;AuthorizeNet::API::MessagesType:0x000000102e5a08 ...&gt;, @default_namespace=\"xmlns\"&gt;]&gt;\n(byebug) response.messages.messages.length\n1\n(byebug) c\nError\nE00027\nThere is one or more missing or invalid required fields.\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1520929782, "post_id": 49247331, "comment_id": 85506153, "body": "Why would you have <code>File#binread</code> tried when the intent is clearly to <code>File#binwrite</code>?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520973659, "post_id": 49247331, "comment_id": 85534375, "body": "@mudasobwa yes binread was a silly idea. But what is the difference between binwrite and Temfile.new? binwrite did work, but not Tempfile."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520977340, "post_id": 49247331, "comment_id": 85535976, "body": "Tempfile uses simple write, not binwrite, that in turn expects a valid utf-8 string."}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520909026, "creation_date": 1520907722, "last_edit_date": 1520909026, "question_id": 49247331, "link": "https://stackoverflow.com/questions/49247331/create-pdf-file-from-raw-pdf-bytes", "title": "Create PDF file from raw PDF bytes", "body": "<p>I use <code>Net::HTTP</code> to retrieve a pdf file from the web. When I read the response, it shows raw bytes:</p>\n\n<pre><code>uri = URI.parse(url_str)\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.read_timeout = 10\nhttp.use_ssl = true\n\nrequest = Net::HTTP::Get.new(uri.path)\nrequest['User-Agent'] = get_user_agent\nrequest['Referer'] = get_referer\nrequest['Cookie'] = get_cookies\n\nresponse = http.request(request)\n\nresponse.body\n =&gt; \"%PDF-1.4\\r\\n%\\xF9\\xFA\\x9A\\xE7\\r\\n4 0 obj\\r\\n&lt;&lt;\\n/E 377518\\n/H [1743 145]\\n/L 377862\\n/Linearized 1\\n/N 1\\n/O 8\\n/T 377734\\n&gt;&gt; ...\n</code></pre>\n\n<p>I need a file not raw bytes. My goal is to pass it into the convert command to turn it into an image:</p>\n\n<pre><code>convert -verbose -density 300 -trim pdf_file -quality 100 output.png \n</code></pre>\n\n<p>So I tried to convert those bytes into a pdf file with a resource id I can reference. But I am not sure what utility to use for this:</p>\n\n<pre><code>IO.copy_stream(response.body, tmp.pdf)\n=&gt; ArgumentError: string contains null byte\n    from (irb):49:in `copy_stream'\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code>Tempfile.new bytes\n=&gt; ArgumentError: string contains null byte\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code> f = File.binread(bytes)\n=&gt; ArgumentError: string contains null byte\n</code></pre>\n\n<p>They all give the same error. Why does this error occur?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": true, "score": 3, "last_activity_date": 1520906356, "creation_date": 1520906356, "answer_id": 49247158, "question_id": 49247121, "link": "https://stackoverflow.com/questions/49247121/expect-errors-and-other-status-in-rspec/49247158#49247158", "title": "Expect errors AND other status in Rspec", "body": "<pre><code>it 'raises a VeryBad::NotCool error' do\n  expect(instance.name).to eq 'old_value'\n  expect { instance.err! }.to raise_error(VeryBad::NotCool)\n  expect(instance.reload.name).to eq 'erroring instance'\nend\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 4872315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a4491331fe1fb2e0f4184501a961eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Polar", "link": "https://stackoverflow.com/users/4872315/polar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 49247158, "answer_count": 1, "score": 1, "last_activity_date": 1520906356, "creation_date": 1520906105, "question_id": 49247121, "link": "https://stackoverflow.com/questions/49247121/expect-errors-and-other-status-in-rspec", "title": "Expect errors AND other status in Rspec", "body": "<p>In an Rspec test, I want to expect an error. However, I also want to expect that the code makes (or does not make) some changes before I get to that error.</p>\n\n<p>I have something like this:</p>\n\n<pre><code>it 'raises a VeryBad::NotCool error' do\n  expect { instance.err! }.to raise_error(VeryBad::NotCool)\nend\n</code></pre>\n\n<p>This passes. However, when I do:</p>\n\n<pre><code>it 'changes the instance status' do\n  expect{ instance.err! }.to change{ instance.name }\n    .from('nice instance').to('erroring instamce')\nend\n</code></pre>\n\n<p>This fails, because</p>\n\n<pre><code>Failure/Error: raise VeryBad::NotCool\n</code></pre>\n\n<p>The failure makes sense. \nHowever, on the other hand, I think it is also useful to be able to check if a change happened before we get to the error, since the code could be something like:</p>\n\n<pre><code>def err!\n  instance.name = 'erroring instance'\n  raise VeryBad::NotCool if instance.save!\nend\n</code></pre>\n\n<p>How can I check if the change happened even if there is an (expected) error raised during the test?</p>\n"}, {"tags": ["arrays", "ruby", "hash", "nested-loops"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1520905174, "post_id": 49246949, "comment_id": 85497687, "body": "Right here you&#39;re overwriting the key each iteration <code>hh[&quot;customer_name&quot;] = c[&quot;Last Name&quot;]</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1520905802, "post_id": 49246949, "comment_id": 85497867, "body": "I think you should rethink your data structures ... do you want an array of hashes, each with a customer_name and feet_to_fiber list? Or possible a single hash with keys that are customer names and values that are feet_to_fiber vals?"}, {"owner": {"reputation": 1217, "user_id": 1180008, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/FdMdK.jpg?s=128&g=1", "display_name": "Nubtacular", "link": "https://stackoverflow.com/users/1180008/nubtacular"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520906867, "post_id": 49246949, "comment_id": 85498127, "body": "I think a single hash with keys: key1 being customer_name, then key2 being feet_to_fiber which has many values."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520912260, "post_id": 49246949, "comment_id": 85499388, "body": "If you make a hash with a single customer_name key and a single feet_to_fiber key, then you can only store one customer&#39;s data. You need to either make the keys dynamic (e.g. use .the name as the key, as @NateSHolland suggests), or use an array"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1520913360, "post_id": 49246949, "comment_id": 85499642, "body": "I agree with @max that you reconsider your data structure, but I would like to point out that whenever you have two arrays, <code>a</code> and <code>b</code> and for each element of <code>a</code> you want to perform some operation on each element of <code>b</code> (as here), you should consider using the method <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a>. By way of example, suppose <code>a = [:a, :b]</code> and <code>b = [1, 2]</code>. Then <code>c = a.product b #=&gt; [[:a, 1], [:a, 2], [:b, 1], [:b, 2]]</code>. You could then use <code>c</code> to construct the hash you want."}, {"owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "edited": false, "score": 0, "creation_date": 1521039148, "post_id": 49246949, "comment_id": 85564282, "body": "@DnfD what do you mean you would like to use the values outside of the program/command line? What exactly are you trying to do with this data?"}, {"owner": {"reputation": 1217, "user_id": 1180008, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/FdMdK.jpg?s=128&g=1", "display_name": "Nubtacular", "link": "https://stackoverflow.com/users/1180008/nubtacular"}, "reply_to_user": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "edited": false, "score": 0, "creation_date": 1521046331, "post_id": 49246949, "comment_id": 85569628, "body": "@NateSHolland well since there&#39;s 21,000 customers, I need the  min value per customer: 21k results. Not like I could copy and paste 21k results from CLI to a file, so I thought a CSV would be best. Given the above implementation, I set up some logging and it&#39;s taking roughly 2-3 seconds PER customer for min value. So with 21k customers and 170k fiber pairs, I need to come up with a different type of algorithm I&#39;m thinking."}, {"owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "edited": false, "score": 0, "creation_date": 1521046432, "post_id": 49246949, "comment_id": 85569687, "body": "So you want the min value per customer? You could speed the current algorithm up slightly if that\u2019s what you\u2019re looking for. Also could you mark my answer as correct since it properly answered the original question?"}, {"owner": {"reputation": 1217, "user_id": 1180008, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/FdMdK.jpg?s=128&g=1", "display_name": "Nubtacular", "link": "https://stackoverflow.com/users/1180008/nubtacular"}, "edited": false, "score": 0, "creation_date": 1521049206, "post_id": 49246949, "comment_id": 85571582, "body": "Just marked it :) Yes, looking to speed it up since if my rough calcs are correct: 2-3seconds per min val calculation within the inner loop."}], "answers": [{"comments": [{"owner": {"reputation": 1217, "user_id": 1180008, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/FdMdK.jpg?s=128&g=1", "display_name": "Nubtacular", "link": "https://stackoverflow.com/users/1180008/nubtacular"}, "edited": false, "score": 0, "creation_date": 1520946991, "post_id": 49247225, "comment_id": 85517341, "body": "Hi Nate, you are correct and was able to figure out the overwriting thing before checking your answer this morning (thank you, btw). The issue I&#39;m running into now is there are so many customer lat long pairs (about 22k) and even more fiber pairs (170k). So it takes forever to run (had it going for a few hours last night with no end in sight). Will update my OP."}, {"owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "reply_to_user": {"reputation": 1217, "user_id": 1180008, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/FdMdK.jpg?s=128&g=1", "display_name": "Nubtacular", "link": "https://stackoverflow.com/users/1180008/nubtacular"}, "edited": false, "score": 0, "creation_date": 1520950614, "post_id": 49247225, "comment_id": 85520043, "body": "Yea this is a mxn algorithm to run so it&#39;s going to be pretty slow with numbers that large and it&#39;s going to take up a bunch of space in memory. You could also store all the customers in a DB and all the fiber values in a DB and then do a lookup and a calculation each time you want to know the value."}], "tags": [], "owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "is_accepted": true, "score": 3, "last_activity_date": 1520906801, "creation_date": 1520906801, "answer_id": 49247225, "question_id": 49246949, "link": "https://stackoverflow.com/questions/49246949/ruby-hash-key-with-multiple-values-returning-the-minimum-value-in-a-timely-mann/49247225#49247225", "title": "Ruby Hash Key with Multiple Values: returning the minimum value in a timely manner", "body": "<p>I think the problem is that you are overriding your name space with each loop. I would do something like this:</p>\n\n<pre><code>hh = Hash.new { |hsh,key| hsh[key] = [] }\n#for each customer, loop through all the fiber coords\ncustomers.each do |c|      \n  fiber.each do |f|\n    hh[c[\"last Name\"]].push Haversine.distance(c[\"lat\"], c[\"lng\"], f[\"lat\"], f[\"lng\"])\n  end\nend\n</code></pre>\n\n<p>That way the keys will be the customer's last name and the values will be an array of distances.\nSo the resulting data structure will look like this:</p>\n\n<pre><code>{ \n   \"DOE\" =&gt; [922224.16, 920129.46, 919214.42],\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 1217, "user_id": 1180008, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/FdMdK.jpg?s=128&g=1", "display_name": "Nubtacular", "link": "https://stackoverflow.com/users/1180008/nubtacular"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 49247225, "answer_count": 1, "score": 0, "last_activity_date": 1520947331, "creation_date": 1520904690, "last_edit_date": 1520947331, "question_id": 49246949, "link": "https://stackoverflow.com/questions/49246949/ruby-hash-key-with-multiple-values-returning-the-minimum-value-in-a-timely-mann", "title": "Ruby Hash Key with Multiple Values: returning the minimum value in a timely manner", "body": "<p><strong>UPDATE:</strong> I was initially overwriting the hash keys, but have since resolved that. Thank you for everyone's input so far. </p>\n\n<p>The issue now is how long the iterations are taking hours to produce data:</p>\n\n<p>customers csv has <strong>22,000</strong> rows.</p>\n\n<p>fiber csv has <strong>170,000</strong> rows. </p>\n\n<pre><code>fiber = CSV.read(\"fiber.csv\", {headers: true})\ncustomers = CSV.read(\"customers.csv\", {headers: true})\n\nhh = Hash.new { |hsh,key| hsh[key] = [] }\n\n#for each customer, loop through all the fiber coords\ncustomers.each do |c|\n  fiber.each do |f|\n    hh[customer[\"cid\"]].push Haversine.distance(c[\"lat\"], c[\"lng\"], f[\"lat\"], f[\"lng\"])\n  end\nend\n\nvals = hh.map { |k, v| v.min } #returns the minimum value per row (which I want)\n</code></pre>\n\n<p>Since I'd like to use these values outside of the program/command line, I thought writing to a CSV would be an okay approach (other suggestions welcome). </p>\n\n<p>However, since the above nested loop takes hours on hours to run without ever finishing, this is not an ideal approach.</p>\n\n<pre><code>CSV.open(\"hash_output.csv\", \"wb\") {|csv| vals.each {|elem| csv &lt;&lt; [elem]} }\n</code></pre>\n\n<p>Any ideas on how to speed this process up?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "nginx", "passenger"], "comments": [{"owner": {"reputation": 7832, "user_id": 2497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d33a294d8b03b0eec187cb1dc4d8d7?s=128&d=identicon&r=PG", "display_name": "Srdjan Pejic", "link": "https://stackoverflow.com/users/2497/srdjan-pejic"}, "edited": false, "score": 0, "creation_date": 1520911525, "post_id": 49246828, "comment_id": 85499252, "body": "Why not determine what is actually using up that much CPU? Maybe it&#39;s a CPU-intensive task that shouldn&#39;t be run during the request?  Best way going about doing that is looking at logs when your CPU usage spikes and determining what was the last request/action <i>or</i> simply clicking around the site until you hit that exception"}, {"owner": {"reputation": 1, "user_id": 9482609, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Petro", "link": "https://stackoverflow.com/users/9482609/ben-petro"}, "reply_to_user": {"reputation": 7832, "user_id": 2497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d33a294d8b03b0eec187cb1dc4d8d7?s=128&d=identicon&r=PG", "display_name": "Srdjan Pejic", "link": "https://stackoverflow.com/users/2497/srdjan-pejic"}, "edited": false, "score": 0, "creation_date": 1520989396, "post_id": 49246828, "comment_id": 85539863, "body": "I know what is using the CPU, it&#39;s the ruby process when exporting/processing a huge amount of data.  The request has to run and it takes a long time to process (only runs a couple of times a day at most), I just want to allow it to run, but only allow it to use 80% of available CPU."}, {"owner": {"reputation": 2389, "user_id": 2060502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1fc204e0d848dd1c9720cd37610bf3?s=128&d=identicon&r=PG", "display_name": "Alexander Altshuler", "link": "https://stackoverflow.com/users/2060502/alexander-altshuler"}, "edited": false, "score": 0, "creation_date": 1521014259, "post_id": 49246828, "comment_id": 85547365, "body": "Do you know what google.com is? Just first search results <a href=\"http://blog.scoutapp.com/articles/2014/11/04/restricting-process-cpu-usage-using-nice-cpulimit-and-cgroups\" rel=\"nofollow noreferrer\">blog.scoutapp.com/articles/2014/11/04/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7832, "user_id": 2497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d33a294d8b03b0eec187cb1dc4d8d7?s=128&d=identicon&r=PG", "display_name": "Srdjan Pejic", "link": "https://stackoverflow.com/users/2497/srdjan-pejic"}, "is_accepted": false, "score": 0, "last_activity_date": 1521079649, "creation_date": 1521079649, "answer_id": 49290457, "question_id": 49246828, "link": "https://stackoverflow.com/questions/49246828/how-do-i-limit-rubys-cpu-usage-for-passenger-nginx/49290457#49290457", "title": "How do I limit ruby&#39;s CPU usage for Passenger/NGINX?", "body": "<p>Turning my follow-up comment into an answer. You can probably use the link supplied by Alexander to limit the CPU.</p>\n\n<p>However, this is a bad architectural approach. In Rails land, CPU-intensive, and long-running tasks are usually done in a background job. Examples of tasks like this include exporting/processing amounts of data, sending e-mails, making third-party API calls triggered by user action.</p>\n\n<p>So, what I advise is that you set up a background job system. You can use Sidekiq, for example. The request that kicks off \"exporting/processing huge amounts of data\" simply enqueues a job that is picked up by a worker process and done. This way, you can scale that worker process (or a group of them) separately from your Nginx/Passenger setup. If you need to give that process more CPU or less has nothing to do with your web layer. Same goes for memory.</p>\n\n<p>If you serve this data to the browser or whatever, you also have options. You can store this file on S3 and return a link to it. You can store it locally in a path accessible to nginx and allow nginx to serve it as any other file by again providing a link. If it takes 30 seconds to generate a response, you can either e-mail that link to the user <em>or</em> hook up a short-lived websocket and push the link to the data over it.</p>\n\n<p>I hope you can consider this approach as an alternative to limiting CPU usage of your web processes.</p>\n"}], "owner": {"reputation": 1, "user_id": 9482609, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Petro", "link": "https://stackoverflow.com/users/9482609/ben-petro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521079649, "creation_date": 1520903810, "question_id": 49246828, "link": "https://stackoverflow.com/questions/49246828/how-do-i-limit-rubys-cpu-usage-for-passenger-nginx", "title": "How do I limit ruby&#39;s CPU usage for Passenger/NGINX?", "body": "<p>I'm running Passenger on Nginx for my Ruby on Rails apps.</p>\n\n<p>My app occasionally runs some very intensive processes that max the ruby processes CPU out at 100% while processing for up to 30 seconds at a time.</p>\n\n<p>I want to be able to limit the available CPU that my ruby processes have access to.</p>\n\n<p>Passenger and NGINX are setup fine, I simply need to limit the available CPU that my passenger/ruby processes can access.</p>\n\n<p>If I can set this to 80% per process, then my intensive process will take a little longer to process (maxed out at 80%), but my total CPU won't be maxed out at 100%, leaving CPU for other processes to access.</p>\n\n<p>Is there a Linux config/application that can do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1520898649, "post_id": 49246078, "comment_id": 85496145, "body": "Not related to your question: It seems like (1) you may have an errant <code>end</code>, and (2) the <code>STEP 2</code> conditional is unnecessary given your <code>STEP 1</code> conditional."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1520899790, "post_id": 49246078, "comment_id": 85496436, "body": "Instead of going through nested hash one by one, try using <code>dig</code> from ruby <a href=\"http://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig</a>, you can rewrite your <code>if session[:loc_search] &amp;&amp; session[:loc_search] != &quot;&quot;</code> line using that in a much cleaner way"}], "answers": [{"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1520926575, "post_id": 49246327, "comment_id": 85504490, "body": "<code>session[:loc_search]</code> can return 3 things: nil, non-blank string, blank string.  If it&#39;s nil, then the else executes.  If it&#39;s blank, then the else executes.  If it&#39;s a non-blank string, then the if clause executes.  Now, let&#39;s see what happens if your if statement were just: <code>if session[:loc_search] != &quot;&quot;</code>.  If it&#39;s nil, the else executes.  If it&#39;s blank then the else executes.  If it&#39;s non-blank, then the if clause executes.  In other words, exactly the same result as your compound conditional."}, {"owner": {"reputation": 620, "user_id": 7974603, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4a562a0f406264652b195171ad0059?s=128&d=identicon&r=PG", "display_name": "Amer Bearat", "link": "https://stackoverflow.com/users/7974603/amer-bearat"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1520958127, "post_id": 49246327, "comment_id": 85525733, "body": "@7stud so do I should just use either one not both"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1521002776, "post_id": 49246327, "comment_id": 85542929, "body": "Let&#39;s see what happens if you use just: <code>if session[:loc_search]</code>.  If it&#39;s nil, then the else executes.  If it&#39;s blank then the if clause executes--that&#39;s because the only things that are false in ruby are false and nil.  if it&#39;s non-blank, then the if clause executes.  Not what you want."}], "tags": [], "owner": {"reputation": 620, "user_id": 7974603, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4a562a0f406264652b195171ad0059?s=128&d=identicon&r=PG", "display_name": "Amer Bearat", "link": "https://stackoverflow.com/users/7974603/amer-bearat"}, "is_accepted": true, "score": 1, "last_activity_date": 1520899817, "creation_date": 1520899817, "answer_id": 49246327, "question_id": 49246078, "link": "https://stackoverflow.com/questions/49246078/change-address-search-function-to-a-name-ruby-on-rails/49246327#49246327", "title": "change address search function to a name ruby on rails", "body": "<p>I got to work by doing this </p>\n\n<pre><code>  if session[:loc_search] &amp;&amp; session[:loc_search] != \"\"\n     @items_names = Item.where('item_name LIKE ?', \"%#{params[:search]}%\")\n  else\n    @items_names = Item.where(active: true).all\n  end\n\n  @search = @items_names.ransack(params[:q])\n  @items = @search.result\n\n  @arrItems = @items.to_a\n</code></pre>\n"}], "owner": {"reputation": 620, "user_id": 7974603, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4a562a0f406264652b195171ad0059?s=128&d=identicon&r=PG", "display_name": "Amer Bearat", "link": "https://stackoverflow.com/users/7974603/amer-bearat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 49246327, "answer_count": 1, "score": 0, "last_activity_date": 1520899817, "creation_date": 1520898002, "last_edit_date": 1520898431, "question_id": 49246078, "link": "https://stackoverflow.com/questions/49246078/change-address-search-function-to-a-name-ruby-on-rails", "title": "change address search function to a name ruby on rails", "body": "<p>Im new to ruby on rails, i have a code currently it searches for address I need to change it. instead of searching for address i need to search for a field called item_name. </p>\n\n<p>home.html.erb</p>\n\n<pre><code>&lt;%= form_tag search_path, method: :get do %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;%= text_field_tag :search, params[:search], placeholder: \"What you looking for?\", class: \"form-control\", id: \"autolocation\" %&gt;\n    &lt;/div&gt;\n &lt;/div&gt; \n</code></pre>\n\n<p>pages_controller.rb</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n\n  def home\n    @items = Item.where(active: true).limit(3)\n  end\n\n  def search\n\n    # STEP 1\n    if params[:search].present? &amp;&amp; params[:search].strip != \"\"\n      session[:loc_search] = params[:search]\n    end\n\n    # STEP 2\n    if session[:loc_search] &amp;&amp; session[:loc_search] != \"\"\n      @items_address = Item.where(active: true).near(session[:loc_search], 100, order: 'distance')\n    else\n      @items_address = Item.where(active: true).all\n    end\n\n    # STEP 3\n    @search = @items_address.ransack(params[:q])\n    @items = @search.result\n    @arrItems = @items.to_a\n\n  end\n\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 1447, "user_id": 6020034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20fc6f63f649759b7b7c10ca5e7adef0?s=128&d=identicon&r=PG&f=1", "display_name": "mdo123", "link": "https://stackoverflow.com/users/6020034/mdo123"}, "edited": false, "score": 0, "creation_date": 1520892852, "post_id": 49244998, "comment_id": 85494333, "body": "Thanks it was very helpful.   I want to give you and Jorg both credit for the answer,  but I had to pick one.  I went with his because I liked his explanation on the different ways to get around it.  Hopefully the community will help pick the better answer too."}, {"owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "reply_to_user": {"reputation": 1447, "user_id": 6020034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20fc6f63f649759b7b7c10ca5e7adef0?s=128&d=identicon&r=PG&f=1", "display_name": "mdo123", "link": "https://stackoverflow.com/users/6020034/mdo123"}, "edited": false, "score": 0, "creation_date": 1520893301, "post_id": 49244998, "comment_id": 85494481, "body": "@mdo123 thanks! I&#39;m glad you found the answers helpful :)"}], "tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": false, "score": 4, "last_activity_date": 1520893589, "last_edit_date": 1520893589, "creation_date": 1520891584, "answer_id": 49244998, "question_id": 49244924, "link": "https://stackoverflow.com/questions/49244924/symbols-as-constants-in-ruby/49244998#49244998", "title": "Symbols as constants in Ruby", "body": "<p>RSpec's <code>let</code> defines a memoized helper method for use in your specs. By convention, method names that start with uppercased letters are treated as constants. So when you call <code>STACK_OVERFLOW</code>, Ruby attempts to look for a constant with that name - you can explicitly tell Ruby to invoke the method by appending parenthesis to it:</p>\n\n<pre><code>puts \"Stack Overflow is helpful: #{ STACK_OVERFLOW() }\"\n</code></pre>\n\n<p>Also, if you'd like to use constants in your specs, you can leverage RSpec's <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-7/docs/mutating-constants\" rel=\"nofollow noreferrer\"><code>stub_const</code></a>:</p>\n\n<pre><code>describe 'Stack Overflow' do\n  stub_const('STACK_OVERFLOW', true)\n\n  it 'Interpolation should now work' do\n    puts \"Stack Overflow is helpful: #{ STACK_OVERFLOW }\"\n  end\nend\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1520892393, "creation_date": 1520892393, "answer_id": 49245159, "question_id": 49244924, "link": "https://stackoverflow.com/questions/49244924/symbols-as-constants-in-ruby/49245159#49245159", "title": "Symbols as constants in Ruby", "body": "<p><code>let</code> defines a method with the name you pass to it. So, in your first example, you define a method named <code>stack_overflow</code> and you call it in your string interpolation.</p>\n\n<p>In your second example, you define a method named <code>STACK_OVERFLOW</code>, but you <em>do not</em> call that method! <code>STACK_OVERFLOW</code> is dereferencing a constant, if you want Ruby to treat it as a method call, you have to make it obvious that it is a method call by either adding a receiver or an argument list or both (since only method calls can have a receiver or an argument list):</p>\n\n<pre><code>puts \"Stack Overflow is helpful: #{self.STACK_OVERFLOW}\"\nputs \"Stack Overflow is helpful: #{STACK_OVERFLOW()}\"\nputs \"Stack Overflow is helpful: #{self.STACK_OVERFLOW()}\"\n</code></pre>\n"}], "owner": {"reputation": 1447, "user_id": 6020034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20fc6f63f649759b7b7c10ca5e7adef0?s=128&d=identicon&r=PG&f=1", "display_name": "mdo123", "link": "https://stackoverflow.com/users/6020034/mdo123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 49245159, "answer_count": 2, "score": 1, "last_activity_date": 1520932077, "creation_date": 1520891183, "last_edit_date": 1520932077, "question_id": 49244924, "link": "https://stackoverflow.com/questions/49244924/symbols-as-constants-in-ruby", "title": "Symbols as constants in Ruby", "body": "<p>There is no document that says a symbol cannot have a capital letter. As it makes for nice readability in my code to use symbols as strings, specifically constants I would like to do so. This works:</p>\n\n<pre><code>describe 'Stack Overflow' do\n  let(:stack_overflow) { true }\n\n  it 'Interpolation works' do\n    puts \"Stack Overflow is helpful: #{stack_overflow}\"\n  end\nend\n\n# &gt;&gt; Stack Overflow is helpful: true\n</code></pre>\n\n<p>This does not work:</p>\n\n<pre><code>describe 'Stack Overflow' do\n  let(:STACK_OVERFLOW) { true }\n\n  it 'Interplation does not work' do\n    puts \"Stack Overflow is helpful: #{STACK_OVERFLOW}\"\n  end\nend\n\n# &gt;&gt; NameError:\n     uninitialized constant STACK_OVERFLOW\n</code></pre>\n\n<p>I can't figure out why I cannot use a capital letter in a symbol name (and get it to interpolate), or if the issue has more to do with using rspec's <a href=\"https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/memoized_helpers.rb#L284\" rel=\"nofollow noreferrer\"><code>let</code></a>.</p>\n"}, {"tags": ["ruby", "regex", "word-wrap"], "comments": [{"owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "edited": false, "score": 1, "creation_date": 1520892349, "post_id": 49244740, "comment_id": 85494168, "body": "Generally it would be better to phrase this as a question and not as a command. Perhaps &quot;I&#39;m trying to take a long one lined string and convert it into a multi line string where no line is longer than a given length. What is the best way to go about this?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9387811, "user_type": "registered", "profile_image": "https://graph.facebook.com/508916406132586/picture?type=large", "display_name": "Danil Panshin", "link": "https://stackoverflow.com/users/9387811/danil-panshin"}, "edited": false, "score": 0, "creation_date": 1520946015, "post_id": 49245289, "comment_id": 85516698, "body": "Thanks, but problem is here:  <code>to be -that is</code> The problem is in the dash, and your solution is missing.  how to make a dash stay? Thanks."}], "tags": [], "owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "is_accepted": false, "score": 0, "last_activity_date": 1520893169, "creation_date": 1520893169, "answer_id": 49245289, "question_id": 49244740, "link": "https://stackoverflow.com/questions/49244740/wrap-the-long-lines-in-ruby/49245289#49245289", "title": "Wrap the long lines in Ruby", "body": "<p>This solves your problem:</p>\n\n<pre><code>max_length = 5\n\nresult = \"\"\nword_array = 'To be or not to be-that is the question'.split(/\\s|-/)\nline = word_array.shift\nword_array.each do |word|\n  if (line + \" \" + word).length &lt;= max_length\n    line &lt;&lt; \" \" + word\n  elsif word.length &gt; max_length\n    result &lt;&lt; line + \"\\n\" unless line.empty?\n    line = \"\"\n    word.each_char do |c|\n      line &lt;&lt; c\n      if line.length == max_length\n        result &lt;&lt; line + \"\\n\"\n        line = \"\"\n      end\n    end\n  else\n    result &lt;&lt; line + \"\\n\"\n    line = word\n  end\nend\nresult &lt;&lt; line\nputs result\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 9387811, "user_type": "registered", "profile_image": "https://graph.facebook.com/508916406132586/picture?type=large", "display_name": "Danil Panshin", "link": "https://stackoverflow.com/users/9387811/danil-panshin"}, "edited": false, "score": 0, "creation_date": 1520946424, "post_id": 49247069, "comment_id": 85516957, "body": "thanks, I tried to solve this way, but the whole problem in the dash"}, {"owner": {"reputation": 73, "user_id": 9387811, "user_type": "registered", "profile_image": "https://graph.facebook.com/508916406132586/picture?type=large", "display_name": "Danil Panshin", "link": "https://stackoverflow.com/users/9387811/danil-panshin"}, "edited": false, "score": 0, "creation_date": 1521032993, "post_id": 49247069, "comment_id": 85559650, "body": "you are now my hero. Thank you!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 73, "user_id": 9387811, "user_type": "registered", "profile_image": "https://graph.facebook.com/508916406132586/picture?type=large", "display_name": "Danil Panshin", "link": "https://stackoverflow.com/users/9387811/danil-panshin"}, "edited": false, "score": 0, "creation_date": 1521072005, "post_id": 49247069, "comment_id": 85582136, "body": "@DanilPan&#39;shin - You&#39;re welcome. I added the punctuation word-break bias for before and after to flesh it out. I&#39;m using this one."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 0, "last_activity_date": 1521071926, "last_edit_date": 1521071926, "creation_date": 1520905519, "answer_id": 49247069, "question_id": 49244740, "link": "https://stackoverflow.com/questions/49244740/wrap-the-long-lines-in-ruby/49247069#49247069", "title": "Wrap the long lines in Ruby", "body": "<p>This might help  </p>\n\n<pre><code> # http://stackoverflow.com/questions/20431801/word-wrapping-with-regular-expressions/20434776#20434776\n\n # MS-Windows  \"Notepad.exe Word Wrap\" simulation\n # ( N = 16 )\n # ------------------\n # Trims optional non-linebreak whitespace\n # external to the viewport\n # ============================\n # Find:     @\"(?:(?:(?&gt;(.{1,16})(?:(?&lt;=[^\\S\\r\\n])[^\\S\\r\\n]?|(?&lt;=[,.;:!/?])|(?=\\r?\\n|[-#%&amp;*@_])|[^\\S\\r\\n]))|(.{1,16}))(?:\\r?\\n)?|(?:\\r?\\n))\"\n # Replace:  @\"$1$2\\r\\n\"\n # Flags:    Global     \n</code></pre>\n\n<p><a href=\"https://regex101.com/r/E7FxHg/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/E7FxHg/1</a></p>\n\n<pre><code> # Note - Through trial and error discovery, it apparears Notepad accepts an extra whitespace\n # (possibly in the N+1 position) to help alignment. This matters not because thier viewport hides it.\n # There is no trimming of any whitespace, so the wrapped buffer could be reconstituted by inserting/detecting a\n # wrap point code which is different than a linebreak.\n # This regex works on un-wrapped source, but could probably be adjusted to produce/work on wrapped buffer text.\n # To reconstitute the source all that is needed is to remove the wrap code which is probably just an extra \"\\r\".\n\n (?:\n      # -- Words/Characters \n      (?:\n           (?&gt;                     # Atomic Group - Match words with valid breaks\n                ( .{1,16} )             # (1), 1-N characters\n                                        #  Followed by one of 4 prioritized, non-linebreak whitespace\n                (?:                     #  break types:\n                     (?&lt;= [^\\S\\r\\n] )        # 1. - Behind a non-linebreak whitespace\n                     [^\\S\\r\\n]?              #      ( optionally accept an extra non-linebreak whitespace )\n                  |  (?&lt;= [,.;:!/?] )        # 2. - Behind sepcial punctuation breaks\n                  |  (?=                     # 3. - Ahead a linebreak or special punctuation breaks\n                          \\r? \\n \n                       |  [-#%&amp;*@_] \n                     )\n                  |  [^\\S\\r\\n]               # 4. - Accept an extra non-linebreak whitespace\n                )\n           )                       # End atomic group\n        |  \n           ( .{1,16} )             # (2), No valid word breaks, just break on the N'th character\n      )\n      (?: \\r? \\n )?           # Optional linebreak after Words/Characters\n   |  \n      # -- Or, Linebreak\n      (?: \\r? \\n )            # Stand alone linebreak\n )\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 9387811, "user_type": "registered", "profile_image": "https://graph.facebook.com/508916406132586/picture?type=large", "display_name": "Danil Panshin", "link": "https://stackoverflow.com/users/9387811/danil-panshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 49247069, "answer_count": 2, "score": -4, "last_activity_date": 1521071926, "creation_date": 1520890411, "question_id": 49244740, "link": "https://stackoverflow.com/questions/49244740/wrap-the-long-lines-in-ruby", "title": "Wrap the long lines in Ruby", "body": "<p>Wrap the long lines in the given text to the given length. Example:\n  <code>\n    'To be or not to be-that is the question', 5 =&gt;\n    To be\n    or\n    not\n    to be\n    -that\n    is\n    the\n    quest\n    ion\n</code></p>\n"}, {"tags": ["ruby", "chatbot", "twitch"], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 7572104, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/i976n.png?s=128&g=1", "display_name": "Tearzz", "link": "https://stackoverflow.com/users/7572104/tearzz"}, "edited": false, "score": 0, "creation_date": 1520892718, "post_id": 49245007, "comment_id": 85494287, "body": "Wow... Thank you so much! Been having so much trouble with it."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1520891615, "creation_date": 1520891615, "answer_id": 49245007, "question_id": 49244194, "link": "https://stackoverflow.com/questions/49244194/ruby-include-method-not-working/49245007#49245007", "title": "Ruby &quot;include?&quot; method not working", "body": "<p>The problem isn't with</p>\n\n<pre><code>if msg.include?(\"!project\")\n</code></pre>\n\n<p>it's with the line before it:</p>\n\n<pre><code>admin_commands.include?(msg)\n</code></pre>\n\n<p><code>admin_commands</code> is an array which contains the 2 strings <code>[\"!disconnect\",\"!project\"]</code>. It <em>does not</em>, however, contain the string <code>\"!project Then some substring here\"</code>, so you are never checking if <code>msg.include?(\"!project\")</code>. You should be seeing your log messages about an unrecognized command, which means you aren't making it into your first <code>if</code> statement. What you'll want to be doing is something like:</p>\n\n<pre><code>if admin_commands.any? { |command| msg.include?(command) }\n  if msg.include?(\"!project\")\n    # ...\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 7572104, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/i976n.png?s=128&g=1", "display_name": "Tearzz", "link": "https://stackoverflow.com/users/7572104/tearzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 49245007, "answer_count": 1, "score": 0, "last_activity_date": 1520891615, "creation_date": 1520887792, "question_id": 49244194, "link": "https://stackoverflow.com/questions/49244194/ruby-include-method-not-working", "title": "Ruby &quot;include?&quot; method not working", "body": "<p>I have a few commands from a Twitch chat, it works and it's awesome! People can type commands like <strong>!about</strong> and it's going to send a response. There's just one problem, if you go down to the <code>thread</code> and look under <code># // COMMANDS // COMMANDS // COMMANDS</code>. There's a problem, there\u00b4s a few admin commands (look under <code># ADMIN COMMANDS // ADMIN COMMANDS</code>). I have this: <code>if msg.include?(\"!project\")</code> then <code>msg.slice!(\"!project \")</code>, but it's not working like I want it to. I want to be able to type <strong>!project Then some substring here</strong>. But when a substring is attached it doesn't work, even though I can print <code>msg</code> and it clearly includes <strong>!project</strong>. Both the <strong>!disconnect</strong> and <strong>!project</strong> command work when it's only those commands by themselves. Meaning that something like <strong>!disconnect Hello World</strong> wouldn't work even though it clearly includes <strong>!disconnect</strong>. </p>\n\n<pre><code># Message formatting in console\nclass String\n    def red;            \"\\e[31m#{self}\\e[0m\" end\n    def yellow;        \"\\e[33m#{self}\\e[0m\" end\n    def green;          \"\\e[32m#{self}\\e[0m\" end\n    def cyan;           \"\\e[36m#{self}\\e[0m\" end\n    def bold;           \"\\e[1m#{self}\\e[22m\" end\nend\n\n# Requied packages / modules\nrequire 'socket'\nrequire 'logger'\nrequire 'open-uri'\n\n# Create logger\nFile.delete(\"log.txt\") # Clear previous log\nlog = Logger.new(\"log.txt\", formatter: proc {|severity, datetime, progname, msg|\n    \"#{datetime}: #{msg}\\n\"})\n\n# Required Info\nload \"credentials.txt\"\nlog.info(\"Loading \\\"credentials.txt\\\"\")\n\n# -------- IGNORE -------- #\nOAUTH.downcase!\nBOTNAME.downcase!\nCHANNEL.downcase!.gsub!(\"#\", \"\")\n\n# //- AGE -// #\ntime = Time.new\nage = time.year - 2000\nif time.month == 10\n    if time.day &lt; 28\n        age -= 1\n    end\nelsif time.month &lt; 10\n    age -= 1\nend\n# -------- IGNORE -------- #\n\n# Save \"Preparing to connect\" to \"log.txt\"\nlog.info(\"Preparing to connect\")\n\n# Variables\nsocket = TCPSocket.new('irc.chat.twitch.tv', 6667)\nsend = \"PRIVMSG ##{CHANNEL} :\"                      # shortcut for sending messages\nrunning = true\ncontent = nil\nmessage_count = 0\nmessage_limit = Time.now.to_i\n\n# Commands\ncommands = [\"!about\",\"!uptime\",\"!commands\",\"!cortexio\",\"!followed\"]\napi_commands = [\"!followed\",\"!uptime\"]\nadmin_commands = [\"!disconnect\",\"!project\"]\n\n# Authorization Login\nsocket.puts(\"PASS #{OAUTH}\")                    # Send the password(oauth) to Twitch\nsocket.puts(\"NICK #{BOTNAME}\")                  # Send the botname to Twitch\nsocket.puts(\"JOIN ##{CHANNEL}\")                 # Send the channel to Twitch\n\n# Save \"Connected!\" to \"log.txt\nlog.info(\"Joining #{CHANNEL.capitalize} as #{BOTNAME.capitalize} using OAUTH Token: #{OAUTH[6,OAUTH.length-12]}\" + \"*\"*12)\n\n# Thread.abort_on_exception = true\n\n# Loop (Background Thread) for recieving Twitch chat data\nThread.start do\n    socket.puts(send + \"Connected!\")                # Send \"Connected!\" to the Twitch channel\n    puts \"#{BOTNAME} Joined ##{CHANNEL}\"                # Connection Status\n    puts \"You should be fully connected now\"        # Connection Status\n    puts \"\"\n    puts \"Type \\\"clear\\\" to clear terminal\"\n    puts \"\"\n    while (running) do\n        ready = IO.select([socket])\n\n        ready[0].each do |s|\n            line = s.gets\n            # Respond to Twitch IRC \"PING\" Message\n            if line.index(\"PING\") == 0\n                line.strip!\n                socket.puts(\"PONG :tmi.twitch.tv\\r\\n\")\n                log.info(\"[IRC Message]: \" + line)\n                log.info(\"[IRC Response]: PONG :tmi.twitch.tv\")\n                puts(\"-\".bold.red*line.length)\n                puts \"[Twitch] \".bold.cyan + \"IRC:  \".bold.yellow + line.bold.green\n                puts \"[Response] \".bold.cyan + \"IRC: \".bold.yellow + \"PONG :tmi.twitch.tv\".bold.green\n                puts(\"-\".bold.red*line.length)\n            end\n            match = line.match(/^:(.+)!(.+)PRIVMSG ##{CHANNEL} :(.+)$/)\n            message = match &amp;&amp; match[3]\n            if message =~ /^/\n                message.strip!\n                user = match[1]         # Get username\n\n                # Twitch message limit - (Max 100 messages in 30 secs - Applies to mods and above)\n                # Avoid global ban\n                if Time.now.to_i - message_limit &gt; 30 # If more than 30 seconds has passed\n                    message_count = 0 # Reset \"message_count\"\n                end\n                if message_count == 0 # If \"message_count\" is 0\n                    message_limit = Time.now.to_i # Start counting to 30 again\n                end\n                message_count = message_count + 1\n            end\n\n            # // COMMANDS // COMMANDS // COMMANDS\n            if message != nil\n                msg = message.downcase\n                # ADMIN COMMANDS // ADMIN COMMANDS\n                if admin_commands.include?(msg) and user == CHANNEL\n                    if msg.include?(\"!disconnect\")\n                        socket.puts(send + \"Disconnecting\") # Disconnect from the channel\n                        socket.puts(\"PART ##{CHANNEL}\")     # Disconnect from the channel\n                        Disconnect()\n                        log.info(\"[Command] #{user}: #{message}\")\n                    elsif msg.include?(\"!project\")\n                        msg.slice!(\"!project \")\n                        File.write(\"Responses/project.txt\", msg)\n                    end\n                user = user.capitalize  # Capitalize first letter (Cuz I'm that kind of person)\n                elsif commands.include?(msg) and message_count &lt; 80\n                    puts \"[Command] \".bold.cyan + \"#{user}: \".bold + \"#{message}\".bold.cyan\n                    # API COMMANDS // API COMMANDS\n                    if api_commands.include?(msg)\n                        if msg.include?(\"!uptime\")\n                            file = open(\"https://decapi.me/twitch/uptime?channel=#{CHANNEL}\")\n                            content = \"#{CHANNEL} has been streaming for: \" + file.read\n                        elsif msg.include?(\"!followed\")\n                            file = open(\"https://decapi.me/twitch/followage/#{CHANNEL}/#{user}\")\n                            content = file.read\n                            if content == \"Follow not found\"\n                                content = \"#{user} is not following #{CHANNEL}\"\n                            else\n                                content = \"#{user} has been following #{CHANNEL} for \" + content\n                            end\n                        end\n                        puts \"[Response] \".bold.red + \"Cortexio: \".bold + \"API: \".bold.yellow + \"\\\"#{content}\\\"\".bold.red\n                    else\n                        file = open \"Responses/\" + msg.gsub!(\"!\",\"\") + \".txt\" # open matching file\n                        content = file.read\n                        file.close\n                        puts \"[Response] \".bold.red + \"Cortexio: \".bold + \"File: \".bold.yellow + \"\\\"#{msg}.txt\\\"\".bold.red\n                    end\n                    file.close\n                    log.info(\"[Command] #{user}: #{message}\")\n                else\n                    puts \"[Message] \".bold.green + \"#{user}: \".bold + \"#{message}\".bold.green\n                    log.info(\"[Message] #{user}: #{message}\")\n                    if message[0] == \"!\" # Unrecognized command\n                        content = \"Unrecognized command: \\\"#{message}\\\" - Type !commands to see a list of available commands.\"\n                    end\n                end\n                # Response handling\n                if content != nil\n                    content.gsub!(\"USER\", \"@#{user}\")\n                    content.gsub!(\"AGE\", \"#{age}\")\n                    content.gsub!(\"CHANNEL\", \"#{CHANNEL}\")\n                    if content.include?(\"COMMANDS\")\n                        content.gsub!(\"COMMANDS\", \"#{commands}\")\n                        content.gsub!(\"\\\"\", \"\")\n                        content.gsub!(\"[\",\"\")\n                        content.gsub!(\"]\",\"\")\n                    end\n                    socket.puts(send + content) # Send response if any\n                    content = nil # Too avoid multiple messages with the same response\n                end\n            end\n        end\n    end\nend\n\ndef Disconnect() # End script\n    running = false\n    exit\nend\n\n# Loop to keep bot going\nwhile (running) do\n    input = gets.chomp\n    if input == \"clear\"\n        system \"clear\" or system \"cls\"\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "devise", "recaptcha"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9481764, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8g7H6GD7M3Q/AAAAAAAAAAI/AAAAAAAAAAs/ZnBWw8jOO1c/photo.jpg?sz=128", "display_name": "michaelnoinc", "link": "https://stackoverflow.com/users/9481764/michaelnoinc"}, "edited": false, "score": 0, "creation_date": 1520955392, "post_id": 49244837, "comment_id": 85523623, "body": "My output is this: Verify recaptcha: false Unpermitted parameters: username, email Signup params: {&quot;password&quot;=&gt;&quot;asdfasdf&quot;, &quot;password_confirmation&quot;=&gt;&quot;asdfasdf&quot;} Unpermitted parameters: username, email Validation errors: [&quot;Email can&#39;t be blank&quot;, &quot;Username can&#39;t be blank&quot;]"}, {"owner": {"reputation": 3, "user_id": 9481764, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8g7H6GD7M3Q/AAAAAAAAAAI/AAAAAAAAAAs/ZnBWw8jOO1c/photo.jpg?sz=128", "display_name": "michaelnoinc", "link": "https://stackoverflow.com/users/9481764/michaelnoinc"}, "edited": false, "score": 0, "creation_date": 1520955775, "post_id": 49244837, "comment_id": 85523929, "body": "I believe it&#39;s the &quot;unpermitted parameters&quot; line, does the recaptcha just cause the request to be rejected by clearing or blocking those parameters specifically or is there something I&#39;m missing?"}, {"owner": {"reputation": 4797, "user_id": 177154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f719bc9e36272f09feca03728b4a160c?s=128&d=identicon&r=PG", "display_name": "draganstankovic", "link": "https://stackoverflow.com/users/177154/draganstankovic"}, "reply_to_user": {"reputation": 3, "user_id": 9481764, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8g7H6GD7M3Q/AAAAAAAAAAI/AAAAAAAAAAs/ZnBWw8jOO1c/photo.jpg?sz=128", "display_name": "michaelnoinc", "link": "https://stackoverflow.com/users/9481764/michaelnoinc"}, "edited": false, "score": 0, "creation_date": 1520959292, "post_id": 49244837, "comment_id": 85526477, "body": "You need to handle strong params requirement and explicitly permit the params (before the line: <code>self.resource = resource_class.new sign_up_params</code>). See: <a href=\"http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 9481764, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8g7H6GD7M3Q/AAAAAAAAAAI/AAAAAAAAAAs/ZnBWw8jOO1c/photo.jpg?sz=128", "display_name": "michaelnoinc", "link": "https://stackoverflow.com/users/9481764/michaelnoinc"}, "edited": false, "score": 0, "creation_date": 1521039786, "post_id": 49244837, "comment_id": 85564767, "body": "Adding: &quot;devise_parameter_sanitizer.permit(:sign_up, keys: [:username, :email])&quot; before that line worked! Thank you for your help."}], "tags": [], "owner": {"reputation": 4797, "user_id": 177154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f719bc9e36272f09feca03728b4a160c?s=128&d=identicon&r=PG", "display_name": "draganstankovic", "link": "https://stackoverflow.com/users/177154/draganstankovic"}, "is_accepted": true, "score": 0, "last_activity_date": 1520890808, "creation_date": 1520890808, "answer_id": 49244837, "question_id": 49243773, "link": "https://stackoverflow.com/questions/49243773/ruby-on-rails-devise-bootstrap-recaptcha-errors-displaying-incorrectly-on-captch/49244837#49244837", "title": "Ruby on Rails Devise Bootstrap Recaptcha errors displaying incorrectly on captcha failure", "body": "<p>Assuming you have used the code from the how-to link - just try adding a few <code>puts</code> logs to console and see what you're getting:</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n  prepend_before_action :check_captcha, only: [:create] # Change this to be any actions you want to protect.\n\n  private\n    def check_captcha\n      # v---- (1) One log here\n      puts \"Verify recaptcha: #{verify_recaptcha}\"\n      unless verify_recaptcha\n        # v---- (2) Another one here\n        puts \"Signup params: #{sign_up_params}\"\n        self.resource = resource_class.new sign_up_params\n        resource.validate # Look for any other validation errors besides Recaptcha\n        # v---- (3) And one here\n        puts \"Validation errors: #{resource.errors.full_messages}\"\n        respond_with_navigational(resource) { render :new }\n      end \n    end\nend\n</code></pre>\n\n<p>Hopefully, this will give you enough info to sort this out.</p>\n\n<p><strong>Bonus</strong>: <a href=\"https://tenderlovemaking.com/2016/02/05/i-am-a-puts-debuggerer.html\" rel=\"nofollow noreferrer\">https://tenderlovemaking.com/2016/02/05/i-am-a-puts-debuggerer.html</a> is a great source of ideas on how to debug code and find your way out by using simple <code>puts</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9481764, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8g7H6GD7M3Q/AAAAAAAAAAI/AAAAAAAAAAs/ZnBWw8jOO1c/photo.jpg?sz=128", "display_name": "michaelnoinc", "link": "https://stackoverflow.com/users/9481764/michaelnoinc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 49244837, "answer_count": 1, "score": 0, "last_activity_date": 1520890808, "creation_date": 1520885946, "question_id": 49243773, "link": "https://stackoverflow.com/questions/49243773/ruby-on-rails-devise-bootstrap-recaptcha-errors-displaying-incorrectly-on-captch", "title": "Ruby on Rails Devise Bootstrap Recaptcha errors displaying incorrectly on captcha failure", "body": "<p>I'm running rails 4.2.5 and I've generated all of my user creation pages through devise/twitter-bootstrap-rails/devise-bootstrap-views and then just added recaptcha through this tutorial: \n<a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Use-Recaptcha-with-Devise\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Use-Recaptcha-with-Devise</a></p>\n\n<p>The sign up process works fine when clicking the recaptcha but when you put in information and don't do the recaptcha, the whole page reloads and clears and it throws an \"email can't be blank\" error despite having filled that in.</p>\n\n<p>Any help figuring out how to fix the error handling would be appreciated.</p>\n"}, {"tags": ["ruby", "rubygems", "require"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1520885524, "post_id": 49243555, "comment_id": 85491149, "body": "What&#39;s the error message verbatim?"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1520886091, "post_id": 49243555, "comment_id": 85491416, "body": "And the calling code? Are you using Bundler? binstubs? A version manager like RVM or chruby?"}, {"owner": {"reputation": 15, "user_id": 7551650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4bebe05674379d70986518418f95fa?s=128&d=identicon&r=PG", "display_name": "iSkaltes iSkalt", "link": "https://stackoverflow.com/users/7551650/iskaltes-iskalt"}, "edited": false, "score": 0, "creation_date": 1521053363, "post_id": 49243555, "comment_id": 85573993, "body": "First of all, some troll has removed the error message from here. It said, &quot;LoadError - Can&#39;t require such file&quot;. I am not using bundler or alike, just the normal ruby with the devkit installed. I&#39;ve re-added the entire error message again."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7551650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4bebe05674379d70986518418f95fa?s=128&d=identicon&r=PG", "display_name": "iSkaltes iSkalt", "link": "https://stackoverflow.com/users/7551650/iskaltes-iskalt"}, "edited": false, "score": 0, "creation_date": 1521895339, "post_id": 49307816, "comment_id": 85932487, "body": "Cerebrum does show up in that list. But I get the idea of what you mean. I will try digging into it..."}], "tags": [], "owner": {"reputation": 878, "user_id": 3256048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmJzF.png?s=128&g=1", "display_name": "slashpai", "link": "https://stackoverflow.com/users/3256048/slashpai"}, "is_accepted": false, "score": 0, "last_activity_date": 1521142322, "creation_date": 1521142322, "answer_id": 49307816, "question_id": 49243555, "link": "https://stackoverflow.com/questions/49243555/ruby-cant-require-gem-properly/49307816#49307816", "title": "Ruby - Can&#39;t require gem properly", "body": "<p>You get the load error when gem is not installed. First check if this gem is installed in this ruby version using <strong>gem list cerebrum</strong>. It may be installed in your jruby that's why it didn't throw error. </p>\n"}], "owner": {"reputation": 15, "user_id": 7551650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4bebe05674379d70986518418f95fa?s=128&d=identicon&r=PG", "display_name": "iSkaltes iSkalt", "link": "https://stackoverflow.com/users/7551650/iskaltes-iskalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1521142322, "creation_date": 1520884910, "last_edit_date": 1521053449, "question_id": 49243555, "link": "https://stackoverflow.com/questions/49243555/ruby-cant-require-gem-properly", "title": "Ruby - Can&#39;t require gem properly", "body": "<p>I'm trying to require the gem 'cerebrum'. I tried requiring it using the irb, and that worked, and also running the program in JRuby worked too. However, Ruby throws a LoadError.\n<code>\nC:/Ruby23-x64/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- cerebrum (LoadError)\n        from C:/Ruby23-x64/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'</code></p>\n\n<p>What am I doing wrong? Has anyone had that issue too?</p>\n"}, {"tags": ["ruby", "activesupport"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520873351, "post_id": 49240276, "comment_id": 85484498, "body": "Before <i>what</i> though?"}, {"owner": {"reputation": 1702, "user_id": 703161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/21f3889b711ae6dd796913170199899e?s=128&d=identicon&r=PG", "display_name": "DogEatDog", "link": "https://stackoverflow.com/users/703161/dogeatdog"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520873686, "post_id": 49240276, "comment_id": 85484731, "body": "When I call <code>my_first_function</code>, the function <code>my_function_to_run_before</code> should run right before it"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520874070, "post_id": 49240276, "comment_id": 85484971, "body": "This method chaining gets pretty ugly in terms of implementations since you have to redefine <code>x</code> to wrap around <code>x</code>. ActiveRecord doesn&#39;t wrap methods because it has a better internal dispatch system."}, {"owner": {"reputation": 1702, "user_id": 703161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/21f3889b711ae6dd796913170199899e?s=128&d=identicon&r=PG", "display_name": "DogEatDog", "link": "https://stackoverflow.com/users/703161/dogeatdog"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520874189, "post_id": 49240276, "comment_id": 85485031, "body": "I have a use case where before specific methods, I want to check if a timeout has expired in an instance variable. so, before each specified method is run in the class, I want to run a method to check the expiration. The easy way would be to just put that method call at the top of each method, but that would be a lot of bloat."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520874251, "post_id": 49240276, "comment_id": 85485074, "body": "To avoid <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problems</a> it might make sense to make an example that better represents your intent than something that returns toy strings."}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "edited": false, "score": 1, "creation_date": 1520874859, "post_id": 49240276, "comment_id": 85485497, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5513558/executing-code-for-every-method-call-in-a-ruby-module\">Executing code for every method call in a Ruby module</a>"}, {"owner": {"reputation": 1702, "user_id": 703161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/21f3889b711ae6dd796913170199899e?s=128&d=identicon&r=PG", "display_name": "DogEatDog", "link": "https://stackoverflow.com/users/703161/dogeatdog"}, "edited": false, "score": 0, "creation_date": 1520874960, "post_id": 49240276, "comment_id": 85485554, "body": "@Tagman I added clarification for the specific question. Thank you for recommending the XY problems."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1520876449, "post_id": 49240276, "comment_id": 85486394, "body": "@DogEatDog you&#39;re incuding <code>ActiveSupport::Callbacks</code>, but don&#39;t seem to be using it as far as I can tell. Have you tried implementing something analogous to <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Callbacks.html\" rel=\"nofollow noreferrer\">their example</a>?"}, {"owner": {"reputation": 1702, "user_id": 703161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/21f3889b711ae6dd796913170199899e?s=128&d=identicon&r=PG", "display_name": "DogEatDog", "link": "https://stackoverflow.com/users/703161/dogeatdog"}, "edited": false, "score": 0, "creation_date": 1520877592, "post_id": 49240276, "comment_id": 85486919, "body": "That can be ommitted. It was one of the attempts I had made earlier."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1520884795, "post_id": 49240276, "comment_id": 85490824, "body": "@DogEatDog it is worth a try. Maybe you can show your previous attempt"}], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "is_accepted": true, "score": 3, "last_activity_date": 1520887088, "creation_date": 1520887088, "answer_id": 49244040, "question_id": 49240276, "link": "https://stackoverflow.com/questions/49240276/using-method-callbacks-in-plain-ruby-class/49244040#49244040", "title": "Using method callbacks in plain Ruby class", "body": "<p>A naive implementation would be;</p>\n\n<pre><code>module Callbacks\n\n  def self.extended(base)\n    base.send(:include, InstanceMethods)\n  end\n\n  def overridden_methods\n    @overridden_methods ||= []\n  end\n\n  def callbacks\n    @callbacks ||= Hash.new { |hash, key| hash[key] = [] }\n  end\n\n  def method_added(method_name)\n    return if should_override?(method_name)\n\n    overridden_methods &lt;&lt; method_name\n    original_method_name = \"original_#{method_name}\"\n    alias_method(original_method_name, method_name)\n\n    define_method(method_name) do |*args|\n      run_callbacks_for(method_name)\n      send(original_method_name, *args)\n    end\n  end\n\n  def should_override?(method_name)\n    overridden_methods.include?(method_name) || method_name =~ /original_/\n  end\n\n  def before_run(method_name, callback)\n    callbacks[method_name] &lt;&lt; callback\n  end\n\n  module InstanceMethods\n    def run_callbacks_for(method_name)\n      self.class.callbacks[method_name].to_a.each do |callback|\n        send(callback)\n      end\n    end\n  end\nend\n\nclass Foo\n  extend Callbacks\n\n  before_run :bar, :zoo\n\n  def bar\n    puts 'bar'\n  end\n\n  def zoo\n    puts 'This runs everytime you call `bar`'\n  end\n\nend\n\nFoo.new.bar #=&gt; This runs everytime you call `bar`\n            #=&gt; bar\n</code></pre>\n\n<p>The tricky point in this implementation is, <code>method_added</code>. Whenever a method gets bind, <code>method_added</code> method gets called by ruby with the name of the method. Inside of this method, what I am doing is just name mangling and overriding the original method with the new one which first runs the callbacks then calls the original method.</p>\n\n<p>Note that, this implementation neither supports block callbacks nor callbacks for super class methods. Both of them could be implemented easily though.</p>\n"}], "owner": {"reputation": 1702, "user_id": 703161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/21f3889b711ae6dd796913170199899e?s=128&d=identicon&r=PG", "display_name": "DogEatDog", "link": "https://stackoverflow.com/users/703161/dogeatdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1169, "favorite_count": 0, "accepted_answer_id": 49244040, "answer_count": 1, "score": 3, "last_activity_date": 1520887088, "creation_date": 1520872747, "last_edit_date": 1520874919, "question_id": 49240276, "link": "https://stackoverflow.com/questions/49240276/using-method-callbacks-in-plain-ruby-class", "title": "Using method callbacks in plain Ruby class", "body": "<p>I have a plain ruby class <code>Espresso::MyExampleClass</code>.</p>\n\n<pre><code>module Espresso\n  class MyExampleClass\n    def my_first_function(value)\n      puts \"my_first_function\"\n    end\n\n    def my_function_to_run_before\n      puts \"Running before\"\n    end\n  end\nend\n</code></pre>\n\n<p>With some of the methods in the class, I want to perform a <code>before</code> or <code>after</code> callback similar to ActiveSupport callbacks <code>before_action</code> or <code>before_filter</code>. I'd like to put something like this in my class, which will run <code>my_function_to_run_before</code> before <code>my_first_function</code>:</p>\n\n<pre><code>before_method :my_function_to_run_before, only: :my_first_function\n</code></pre>\n\n<p>The result should be something like:</p>\n\n<pre><code>klass = Espresso::MyExampleClass.new\nklass.my_first_function(\"yes\")\n\n&gt; \"Running before\"\n&gt; \"my_first_function\"\n</code></pre>\n\n<p>How do I use call backs in a plain ruby class like in Rails to run a method before each specified method?</p>\n\n<p>Edit2: </p>\n\n<p>Thanks @tadman for recommending <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. The real issue we have is with an API client that has a token expiration. Before each call to the API, we need to check to see if the token is expired. If we have a ton of function for the API, it would be cumbersome to check if the token was expired each time. </p>\n\n<p>Here is the example class:</p>\n\n<pre><code>require \"rubygems\"\nrequire \"bundler/setup\"\nrequire 'active_support/all'\nrequire 'httparty'\nrequire 'json'\n\nmodule Espresso\n\n  class Client\n    include HTTParty\n    include ActiveSupport::Callbacks\n\n    def initialize\n      login(\"admin@example.com\", \"password\")\n    end\n\n    def login(username, password)\n      puts \"logging in\"\n      uri = URI.parse(\"localhost:3000\" + '/login')\n      http = Net::HTTP.new(uri.host, uri.port)\n      http.use_ssl = true\n      http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n      request = Net::HTTP::Post.new(uri.request_uri)\n      request.set_form_data(username: username, password: password)\n      response = http.request(request)\n      body = JSON.parse(response.body)\n      @access_token = body['access_token']\n      @expires_in = body['expires_in']\n      @expires = @expires_in.seconds.from_now\n      @options = {\n          headers: {\n              Authorization: \"Bearer #{@access_token}\"\n          }\n      }\n    end\n\n    def is_token_expired?\n      #if Time.now &gt; @expires.\n      if 1.hour.ago &gt; @expires\n        puts \"Going to expire\"\n      else\n        puts \"not going to expire\"\n      end\n\n      1.hour.ago &gt; @expires ? false : true\n    end\n\n    # Gets posts\n    def get_posts\n      #Check if the token is expired, if is login again and get a new token\n      if is_token_expired?\n        login(\"admin@example.com\", \"password\")\n      end\n      self.class.get('/posts', @options)\n    end\n\n    # Gets comments\n    def get_comments\n      #Check if the token is expired, if is login again and get a new token\n      if is_token_expired?\n        login(\"admin@example.com\", \"password\")\n      end\n      self.class.get('/comments', @options)\n    end\n  end\nend\n\nklass = Espresso::Client.new\nklass.get_posts\nklass.get_comments\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1520868473, "post_id": 49238749, "comment_id": 85481152, "body": "Can you describe what you want this function to do?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1520868779, "post_id": 49238749, "comment_id": 85481397, "body": "You write that you &quot;want to raise [an] error <b>if</b> ... these two conditions [are met].&quot; Why are you using <b><code>unless</code></b> instead? It&#39;s totally opposite."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1520868943, "post_id": 49238749, "comment_id": 85481518, "body": "Issue is not clear. What is <code>command_options</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1520868881, "last_edit_date": 1520868881, "creation_date": 1520868349, "answer_id": 49238837, "question_id": 49238749, "link": "https://stackoverflow.com/questions/49238749/check-value-for-containing-string/49238837#49238837", "title": "Check value for containing String", "body": "<p>The proper way would be to compare comparable types. From the naming it looks like <code>command_options[:env]</code> is meant to be a single string. And you're comparing it to an array, <code>%w(all)</code>. This won't work, naturally (the comparison will be always false). Make up your mind and compare apples with apples. </p>\n\n<p>As for the actual error message, it's unrelated to the comparisons. Looks like <code>command_options</code> is an array and not a hash (as you probably meant it to be). </p>\n\n<p>Also read up on <code>Array#include?</code>, this is what you'll need, I think.</p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1520912602, "creation_date": 1520868114, "question_id": 49238749, "link": "https://stackoverflow.com/questions/49238749/check-value-for-containing-string", "title": "Check value for containing String", "body": "<p>I want to raise error if I have these two conditions:</p>\n\n<pre><code>command_options[:gateways] == %w(staging_bank) &amp;&amp; command_options[:env] == %w(all)\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>raise \"Testing All gateways is not allowed in staging_bank.\" unless command_options[:gateways] == %w(staging_bank) &amp;&amp; command_options[:env] == %w(all)\n</code></pre>\n\n<p>But I get error `[]': no implicit conversion of Symbol into Integer (TypeError)</p>\n\n<p>What is the proper way to implement this?</p>\n"}, {"tags": ["ruby", "oop"], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1520867448, "creation_date": 1520867448, "answer_id": 49238533, "question_id": 49238323, "link": "https://stackoverflow.com/questions/49238323/with-subscribers-and-status-updates-whos-responsibility-is-it-to-notify-subscr/49238533#49238533", "title": "With subscribers and status updates, who&#39;s responsibility is it to notify subscribers?", "body": "<p>Several things, and this is of course something you can do one way or another: </p>\n\n<ul>\n<li>you might want to move the notification (sending text message) to a background job, as this is potentially blocking</li>\n<li>neither Subscriber nor StatusUpdate should do the notification, they just hold the information relavant to that status update</li>\n<li>I'd create a Service which takes care of the notification</li>\n</ul>\n\n<p>Something like</p>\n\n<pre><code>class SendNotifications\n  def initialize(status_update)\n    @status_update = status_update\n  end\n\n  def call\n    Subscriber.find_each do |subscriber|\n      Notifier.perform_async(subscriber.mobile, status_update.body)\n    end\n  end\n\n  private\n  attr_reader :status_update\nend\n</code></pre>\n"}], "owner": {"reputation": 446, "user_id": 6298150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac2b85cf603248a2fd6fd7ac4c6fdd9?s=128&d=identicon&r=PG&f=1", "display_name": "Yechiel K", "link": "https://stackoverflow.com/users/6298150/yechiel-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 49238533, "answer_count": 1, "score": 0, "last_activity_date": 1520867448, "creation_date": 1520866803, "question_id": 49238323, "link": "https://stackoverflow.com/questions/49238323/with-subscribers-and-status-updates-whos-responsibility-is-it-to-notify-subscr", "title": "With subscribers and status updates, who&#39;s responsibility is it to notify subscribers?", "body": "<p>Let's say I have a <code>Subscriber</code> class and a <code>StatusUpdate</code> class. I want all subscribers to receive a notification whenever there's a new <code>StatusUpdate</code>.</p>\n\n<p>Here's the way it looks now:</p>\n\n<pre><code>class Subscriber\n    attr_accessor :number\nend\n</code></pre>\n\n<p>And the <code>StatusUpdate</code> class:</p>\n\n<pre><code>class StatusUpdate\n    attr_accessor :status\n\n    def initializer(body)\n        @body = body\n        notify_subscribers\n    end\n\n    private\n\n    def notify_subscribers\n        Subscriber.all.each do |subscriber|\n            # some code to send an SMS to the subscriber\n        end\n    end\nend   \n</code></pre>\n\n<p>But looking at this code it occurred to me that the responsibility of notifying subscribers should perhaps lie with the <code>Subscriber</code> class, and I should perhaps move the <code>notify_subscribers</code> method there and call it from <code>StatusUpdate</code>'s <code>initialize</code> (something like <code>Subscriber.notify_all(message)</code>), but that also looked kind of messy to me.</p>\n\n<p>What would be the proper OO way to do this? Is notifying subscribers the responsibility of the <code>Subscriber</code> class? <code>StatusUpdate</code> class? Or perhaps some third class? </p>\n\n<p>P.S. The code is in Ruby, but I guess it's more of a general Object Oriented design question.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "render"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 4, "creation_date": 1520862551, "post_id": 49236753, "comment_id": 85476812, "body": "We will not be able to help you without seeing the code.  In this case the  <code>index.html.erb</code> file that has the images in it that you cannot render will be needed to start."}, {"owner": {"reputation": 2551, "user_id": 4739247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwOaK.jpg?s=128&g=1", "display_name": "assefamaru", "link": "https://stackoverflow.com/users/4739247/assefamaru"}, "edited": false, "score": 0, "creation_date": 1520866930, "post_id": 49236753, "comment_id": 85480027, "body": "Have you tested any of your linked paths? For example, instead of <code>&lt;img class=&quot;img-fluid&quot; src=&quot;test1&#47;app&#47;assets&#47;images&#47;portfolio&#47;thumbnails&#47;3.jpg&quot; alt=&quot;&quot;&gt;</code>, try <code>&lt;%= image_tag(&#39;portfolio&#47;thumbnails&#47;3.jpg&#39;, class: &quot;img-fluid&quot;) %&gt;</code>"}, {"owner": {"reputation": 13, "user_id": 9452283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r1ecgfEmipU/AAAAAAAAAAI/AAAAAAAAAEY/ZFDhvxxRhHA/photo.jpg?sz=128", "display_name": "adiush", "link": "https://stackoverflow.com/users/9452283/adiush"}, "edited": false, "score": 0, "creation_date": 1520877250, "post_id": 49236753, "comment_id": 85486759, "body": "^it works almost perfectly! but what to do with something like that:     &lt;a class=&quot;portfolio-box&quot; href=&quot;test1/assets/imgages/portfoliofullsize/5.jpg&quot;&gt;               &lt;img class=&quot;img-fluid&quot; src=&quot;test1/assets/imgages/portfolio/thumbnails/5.jpg&quot; alt=&quot;&quot;&gt;"}, {"owner": {"reputation": 13, "user_id": 9452283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r1ecgfEmipU/AAAAAAAAAAI/AAAAAAAAAEY/ZFDhvxxRhHA/photo.jpg?sz=128", "display_name": "adiush", "link": "https://stackoverflow.com/users/9452283/adiush"}, "edited": false, "score": 0, "creation_date": 1520877285, "post_id": 49236753, "comment_id": 85486781, "body": "and i also realize that scripts are not working too. how can i fix that?"}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1520866912, "creation_date": 1520866912, "answer_id": 49238360, "question_id": 49236753, "link": "https://stackoverflow.com/questions/49236753/images-not-rendering-in-rails-app/49238360#49238360", "title": "Images not rendering in Rails App", "body": "<p>Use the helper classes:</p>\n\n<pre><code>&lt;img class=\"img-fluid\" src=\"test1/app/assets/images/portfolio/thumbnails/3.jpg\" alt=\"\"&gt;\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>image_tag(\"portfolio/thumbnails/3.jpg\", class: \"img-fluid\")\n</code></pre>\n\n<p>Which should set the path correctly, assuming the file <strong>/app/assets/images/portfolio/thumbnails/3.jpg</strong> exists.</p>\n"}], "owner": {"reputation": 13, "user_id": 9452283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r1ecgfEmipU/AAAAAAAAAAI/AAAAAAAAAEY/ZFDhvxxRhHA/photo.jpg?sz=128", "display_name": "adiush", "link": "https://stackoverflow.com/users/9452283/adiush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520866912, "creation_date": 1520862240, "last_edit_date": 1520866312, "question_id": 49236753, "link": "https://stackoverflow.com/questions/49236753/images-not-rendering-in-rails-app", "title": "Images not rendering in Rails App", "body": "<p>i'm total beginner with all programming stuff. I decided to create a website (or should I say application? ;p) using bootstrap. Since i found Ruby very attractive i decided to integrate these 2 frameworks. So i did following this: <a href=\"https://github.com/twbs/bootstrap-rubygem\" rel=\"nofollow noreferrer\">https://github.com/twbs/bootstrap-rubygem</a>\nIt went fine, i downloaded some bootstrap theme, throw all the files to my app files, change img paths in index.html.erb and when i started the server i got a website without any image. What am i doing wrong? I would appriciate any help.</p>\n\n<blockquote>\n  <p>my index.html.erb (which i copied from template folder)</p>\n</blockquote>\n\n<p>\n</p>\n\n<p></p>\n\n<pre><code>&lt;meta charset=\"utf-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"&gt;\n&lt;meta name=\"description\" content=\"\"&gt;\n&lt;meta name=\"author\" content=\"\"&gt;\n\n&lt;title&gt;Creative - Start Bootstrap Theme&lt;/title&gt;\n\n&lt;!-- Bootstrap core CSS --&gt;\n&lt;link href=\"test1/vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"&gt;\n\n&lt;!-- Custom fonts for this template --&gt;\n&lt;link href=\"test1/vendor/font-awesome/css/font-awesome.min.css\" rel=\"stylesheet\" type=\"text/css\"&gt;\n&lt;link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'&gt;\n&lt;link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'&gt;\n\n&lt;!-- Plugin CSS --&gt;\n&lt;link href=\"test1/vendor/magnific-popup/magnific-popup.css\" rel=\"stylesheet\"&gt;\n\n&lt;!-- Custom styles for this template --&gt;\n&lt;link href=\"test1/assets/stylesheets/creative.min.css\" rel=\"stylesheet\"&gt;\n</code></pre>\n\n<p></p>\n\n<p></p>\n\n<pre><code>&lt;!-- Navigation --&gt;\n&lt;nav class=\"navbar navbar-expand-lg navbar-light fixed-top\" id=\"mainNav\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;a class=\"navbar-brand js-scroll-trigger\" href=\"#page-top\"&gt;Start Bootstrap&lt;/a&gt;\n    &lt;button class=\"navbar-toggler navbar-toggler-right\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"&gt;\n      &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n    &lt;/button&gt;\n    &lt;div class=\"collapse navbar-collapse\" id=\"navbarResponsive\"&gt;\n      &lt;ul class=\"navbar-nav ml-auto\"&gt;\n        &lt;li class=\"nav-item\"&gt;\n          &lt;a class=\"nav-link js-scroll-trigger\" href=\"#about\"&gt;About&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n          &lt;a class=\"nav-link js-scroll-trigger\" href=\"#services\"&gt;Services&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n          &lt;a class=\"nav-link js-scroll-trigger\" href=\"#portfolio\"&gt;Portfolio&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n          &lt;a class=\"nav-link js-scroll-trigger\" href=\"#contact\"&gt;Contact&lt;/a&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/nav&gt;\n\n&lt;header class=\"masthead text-center text-white d-flex\"&gt;\n  &lt;div class=\"container my-auto\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-lg-10 mx-auto\"&gt;\n        &lt;h1 class=\"text-uppercase\"&gt;\n          &lt;strong&gt;Your Favorite Source of Free Bootstrap Themes&lt;/strong&gt;\n        &lt;/h1&gt;\n        &lt;hr&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-8 mx-auto\"&gt;\n        &lt;p class=\"text-faded mb-5\"&gt;Start Bootstrap can help you build better websites using the Bootstrap CSS framework! Just download your template and start going, no strings attached!&lt;/p&gt;\n        &lt;a class=\"btn btn-primary btn-xl js-scroll-trigger\" href=\"#about\"&gt;Find Out More&lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/header&gt;\n\n&lt;section class=\"bg-primary\" id=\"about\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-lg-8 mx-auto text-center\"&gt;\n        &lt;h2 class=\"section-heading text-white\"&gt;We've got what you need!&lt;/h2&gt;\n        &lt;hr class=\"light my-4\"&gt;\n        &lt;p class=\"text-faded mb-4\"&gt;Start Bootstrap has everything you need to get your new website up and running in no time! All of the templates and themes on Start Bootstrap are open source, free to download, and easy to use. No strings attached!&lt;/p&gt;\n        &lt;a class=\"btn btn-light btn-xl js-scroll-trigger\" href=\"#services\"&gt;Get Started!&lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\n\n&lt;section id=\"services\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-lg-12 text-center\"&gt;\n        &lt;h2 class=\"section-heading\"&gt;At Your Service&lt;/h2&gt;\n        &lt;hr class=\"my-4\"&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-lg-3 col-md-6 text-center\"&gt;\n        &lt;div class=\"service-box mt-5 mx-auto\"&gt;\n          &lt;i class=\"fa fa-4x fa-diamond text-primary mb-3 sr-icons\"&gt;&lt;/i&gt;\n          &lt;h3 class=\"mb-3\"&gt;Sturdy Templates&lt;/h3&gt;\n          &lt;p class=\"text-muted mb-0\"&gt;Our templates are updated regularly so they don't break.&lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-3 col-md-6 text-center\"&gt;\n        &lt;div class=\"service-box mt-5 mx-auto\"&gt;\n          &lt;i class=\"fa fa-4x fa-paper-plane text-primary mb-3 sr-icons\"&gt;&lt;/i&gt;\n          &lt;h3 class=\"mb-3\"&gt;Ready to Ship&lt;/h3&gt;\n          &lt;p class=\"text-muted mb-0\"&gt;You can use this theme as is, or you can make changes!&lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-3 col-md-6 text-center\"&gt;\n        &lt;div class=\"service-box mt-5 mx-auto\"&gt;\n          &lt;i class=\"fa fa-4x fa-newspaper-o text-primary mb-3 sr-icons\"&gt;&lt;/i&gt;\n          &lt;h3 class=\"mb-3\"&gt;Up to Date&lt;/h3&gt;\n          &lt;p class=\"text-muted mb-0\"&gt;We update dependencies to keep things fresh.&lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-3 col-md-6 text-center\"&gt;\n        &lt;div class=\"service-box mt-5 mx-auto\"&gt;\n          &lt;i class=\"fa fa-4x fa-heart text-primary mb-3 sr-icons\"&gt;&lt;/i&gt;\n          &lt;h3 class=\"mb-3\"&gt;Made with Love&lt;/h3&gt;\n          &lt;p class=\"text-muted mb-0\"&gt;You have to make your websites with love these days!&lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\n\n&lt;section class=\"p-0\" id=\"portfolio\"&gt;\n  &lt;div class=\"container-fluid p-0\"&gt;\n    &lt;div class=\"row no-gutters popup-gallery\"&gt;\n      &lt;div class=\"col-lg-4 col-sm-6\"&gt;\n        &lt;a class=\"portfolio-box\" href=\"test1/app/assets/imgages/portfolio/fullsize/1.jpg\"&gt;\n          &lt;img class=\"img-fluid\" src=\"test1/app/assets/imgages/portfoliothumbnails/1.jpg\" alt=\"\"&gt;\n          &lt;div class=\"portfolio-box-caption\"&gt;\n            &lt;div class=\"portfolio-box-caption-content\"&gt;\n              &lt;div class=\"project-category text-faded\"&gt;\n                Category\n              &lt;/div&gt;\n              &lt;div class=\"project-name\"&gt;\n                Project Name\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-4 col-sm-6\"&gt;\n        &lt;a class=\"portfolio-box\" href=\"test1/app/assets/images/portfolio/fullsize/2.jpg\"&gt;\n          &lt;img class=\"img-fluid\" src=\"test1/app/assets/images/portfoliothumbnails/2.jpg\" alt=\"\"&gt;\n          &lt;div class=\"portfolio-box-caption\"&gt;\n            &lt;div class=\"portfolio-box-caption-content\"&gt;\n              &lt;div class=\"project-category text-faded\"&gt;\n                Category\n              &lt;/div&gt;\n              &lt;div class=\"project-name\"&gt;\n                Project Name\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-4 col-sm-6\"&gt;\n        &lt;a class=\"portfolio-box\" href=\"test1/app/assets/images/portfolio/fullsize/3.jpg\"&gt;\n          &lt;img class=\"img-fluid\" src=\"test1/app/assets/images/portfolio/thumbnails/3.jpg\" alt=\"\"&gt;\n          &lt;div class=\"portfolio-box-caption\"&gt;\n            &lt;div class=\"portfolio-box-caption-content\"&gt;\n              &lt;div class=\"project-category text-faded\"&gt;\n                Category\n              &lt;/div&gt;\n              &lt;div class=\"project-name\"&gt;\n                Project Name\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-4 col-sm-6\"&gt;\n        &lt;a class=\"portfolio-box\" href=\"test1/app/assets/imgages/portfolio/fullsize/4.jpg\"&gt;\n          &lt;img class=\"img-fluid\" src=\"test1/app/assets/imgages/portfolio/thumbnails/4.jpg\" alt=\"\"&gt;\n          &lt;div class=\"portfolio-box-caption\"&gt;\n            &lt;div class=\"portfolio-box-caption-content\"&gt;\n              &lt;div class=\"project-category text-faded\"&gt;\n                Category\n              &lt;/div&gt;\n              &lt;div class=\"project-name\"&gt;\n                Project Name\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-4 col-sm-6\"&gt;\n        &lt;a class=\"portfolio-box\" href=\"test1/assets/images/portfoliofullsize/5.jpg\"&gt;\n          &lt;img class=\"img-fluid\" src=\"test1/assets/images/portfoliothumbnails/5.jpg\" alt=\"\"&gt;\n          &lt;div class=\"portfolio-box-caption\"&gt;\n            &lt;div class=\"portfolio-box-caption-content\"&gt;\n              &lt;div class=\"project-category text-faded\"&gt;\n                Category\n              &lt;/div&gt;\n              &lt;div class=\"project-name\"&gt;\n                Project Name\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-4 col-sm-6\"&gt;\n        &lt;a class=\"portfolio-box\" href=\"test1/assets/images/portfolio/fullsize/6.jpg\"&gt;\n          &lt;img class=\"img-fluid\" src=\"test1/assets/images/portfolio/thumbnails/6.jpg\" alt=\"\"&gt;\n          &lt;div class=\"portfolio-box-caption\"&gt;\n            &lt;div class=\"portfolio-box-caption-content\"&gt;\n              &lt;div class=\"project-category text-faded\"&gt;\n                Category\n              &lt;/div&gt;\n              &lt;div class=\"project-name\"&gt;\n                Project Name\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\n\n&lt;section class=\"bg-dark text-white\"&gt;\n  &lt;div class=\"container text-center\"&gt;\n    &lt;h2 class=\"mb-4\"&gt;Free Download at Start Bootstrap!&lt;/h2&gt;\n    &lt;a class=\"btn btn-light btn-xl sr-button\" href=\"http://startbootstrap.com/template-overviews/creative/\"&gt;Download Now!&lt;/a&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\n\n&lt;section id=\"contact\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-lg-8 mx-auto text-center\"&gt;\n        &lt;h2 class=\"section-heading\"&gt;Let's Get In Touch!&lt;/h2&gt;\n        &lt;hr class=\"my-4\"&gt;\n        &lt;p class=\"mb-5\"&gt;Ready to start your next project with us? That's great! Give us a call or send us an email and we will get back to you as soon as possible!&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-lg-4 ml-auto text-center\"&gt;\n        &lt;i class=\"fa fa-phone fa-3x mb-3 sr-contact\"&gt;&lt;/i&gt;\n        &lt;p&gt;123-456-6789&lt;/p&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-lg-4 mr-auto text-center\"&gt;\n        &lt;i class=\"fa fa-envelope-o fa-3x mb-3 sr-contact\"&gt;&lt;/i&gt;\n        &lt;p&gt;\n          &lt;a href=\"mailto:your-email@your-domain.com\"&gt;feedback@startbootstrap.com&lt;/a&gt;\n        &lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\n\n&lt;!-- Bootstrap core JavaScript --&gt;\n&lt;script src=\"test1/vendor/jquery/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"test1/vendor/bootstrap/js/bootstrap.bundle.min.js\"&gt;&lt;/script&gt;\n\n&lt;!-- Plugin JavaScript --&gt;\n&lt;script src=\"test1/vendor/jquery-easing/jquery.easing.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"test1/vendor/scrollreveal/scrollreveal.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"test1/vendor/magnific-popup/jquery.magnific-popup.min.js\"&gt;&lt;/script&gt;\n\n&lt;!-- Custom scripts for this template --&gt;\n&lt;script src=\"test1/app/assets/javascript/creative.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p></p>\n\n<p></p>\n"}]