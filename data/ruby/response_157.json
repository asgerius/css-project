[{"tags": ["ruby-on-rails", "ruby", "join", "dynamic", "where"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1515628910, "post_id": 48197986, "comment_id": 83377081, "body": "Do you mean by using <code>AND</code> or <code>OR</code> operators?"}, {"owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1515629083, "post_id": 48197986, "comment_id": 83377145, "body": "I want to use AND operators. I think that is what the above code does seeing as it works. Just need to load them from the array somehow"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1515629970, "post_id": 48197986, "comment_id": 83377418, "body": "If you want to use AND, why would you ask two times for the same attribute, with different value? wouldn&#39;t it be an OR?"}, {"owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1515630206, "post_id": 48197986, "comment_id": 83377481, "body": "As far as I&#39;m aware my code essentially uses the AND operator? I&#39;m not sure but it seems to work when I test it in the console. It will only return Trails which have both associated filters. Any idea how I load these dynamically?"}, {"owner": {"reputation": 471, "user_id": 6566084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45801635c6a07b99be0bf392ceb60cd1?s=128&d=identicon&r=PG&f=1", "display_name": "w_hile", "link": "https://stackoverflow.com/users/6566084/w-hile"}, "edited": false, "score": 0, "creation_date": 1515632116, "post_id": 48197986, "comment_id": 83377958, "body": "@MikeHolford You should be careful; including the <code>param</code> key twice does not use an AND operator. Rather, the last value assigned to the <code>param</code> key (&quot;over-18&quot;) is used to generate the query. Is your goal to select all <code>Trails</code> containing all of the <code>Filters</code> specified in an array?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 471, "user_id": 6566084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45801635c6a07b99be0bf392ceb60cd1?s=128&d=identicon&r=PG&f=1", "display_name": "w_hile", "link": "https://stackoverflow.com/users/6566084/w-hile"}, "edited": false, "score": 0, "creation_date": 1515632312, "post_id": 48197986, "comment_id": 83378011, "body": "Asking twice for the same attribute results in <code>warning: key :&lt;attribute&gt; is duplicated and overwritten on line &lt;line&gt;</code>. You might want to clarify what you&#39;re trying to do as pointed @w_hile."}, {"owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "reply_to_user": {"reputation": 471, "user_id": 6566084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45801635c6a07b99be0bf392ceb60cd1?s=128&d=identicon&r=PG&f=1", "display_name": "w_hile", "link": "https://stackoverflow.com/users/6566084/w-hile"}, "edited": false, "score": 0, "creation_date": 1515632642, "post_id": 48197986, "comment_id": 83378091, "body": "Ah thanks guys, Yes @w_hile I&#39;m trying to find all trails that contain ALL the filters in the array. A trail <code>has_many :filters, :through =&gt; :trail_filters</code>. Thanks for the heads up! Any ideas on how to find them with join/where?   I want to do get an active record result &amp; not an array result so I can use <code>where</code> etc in the view"}, {"owner": {"reputation": 471, "user_id": 6566084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45801635c6a07b99be0bf392ceb60cd1?s=128&d=identicon&r=PG&f=1", "display_name": "w_hile", "link": "https://stackoverflow.com/users/6566084/w-hile"}, "edited": false, "score": 0, "creation_date": 1515633673, "post_id": 48197986, "comment_id": 83378322, "body": "@MikeHolford Which database are you using? If it&#39;s PostgreSQL I may have a solution."}, {"owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "reply_to_user": {"reputation": 471, "user_id": 6566084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45801635c6a07b99be0bf392ceb60cd1?s=128&d=identicon&r=PG&f=1", "display_name": "w_hile", "link": "https://stackoverflow.com/users/6566084/w-hile"}, "edited": false, "score": 0, "creation_date": 1515633874, "post_id": 48197986, "comment_id": 83378357, "body": "Yup using PG @w_hile"}], "answers": [{"comments": [{"owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "edited": false, "score": 1, "creation_date": 1515635780, "post_id": 48198672, "comment_id": 83378741, "body": "Thanks @w_hile checked but I&#39;m using SQLite in dev so it doesn&#39;t work for me"}], "tags": [], "owner": {"reputation": 471, "user_id": 6566084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45801635c6a07b99be0bf392ceb60cd1?s=128&d=identicon&r=PG&f=1", "display_name": "w_hile", "link": "https://stackoverflow.com/users/6566084/w-hile"}, "is_accepted": false, "score": 1, "last_activity_date": 1515638419, "last_edit_date": 1515638419, "creation_date": 1515634865, "answer_id": 48198672, "question_id": 48197986, "link": "https://stackoverflow.com/questions/48197986/multiple-dynamic-variables-within-a-ruby-where-clause/48198672#48198672", "title": "Multiple dynamic variables within a Ruby where clause", "body": "<p>To select all <code>Trails</code> containing all of the <code>Filters</code> specified in an array <code>f</code>, you could use a <code>GROUP BY</code> with a <code>HAVING</code> clause in PostgreSQL:</p>\n\n<pre><code>f = [\"family-friendly\", \"over-18\"]\nTrail.joins(:filters).group('trails.id').having(\n  'array_agg(CAST(filters.param AS text)) @&gt; ARRAY[?]', f)\n</code></pre>\n\n<p>The downside to this solution is that it works only with PostgreSQL.</p>\n\n<p>Also see:</p>\n\n<ul>\n<li><a href=\"https://www.postgresql.org/docs/9.5/static/functions-aggregate.html\" rel=\"nofollow noreferrer\">PostgreSQL aggregate functions</a> - <code>array_agg</code></li>\n<li><a href=\"https://www.postgresql.org/docs/9.1/static/functions-array.html\" rel=\"nofollow noreferrer\">PostgreSQL array operators</a> - <code>@&gt;</code> operator</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 471, "user_id": 6566084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45801635c6a07b99be0bf392ceb60cd1?s=128&d=identicon&r=PG&f=1", "display_name": "w_hile", "link": "https://stackoverflow.com/users/6566084/w-hile"}, "edited": false, "score": 0, "creation_date": 1515638244, "post_id": 48198739, "comment_id": 83379265, "body": "As written, you have a N+2 query problem. To improve the performance, you could write <code>trails.includes(:filters).each ...</code> to eager load the filters for each trail. In that case, you would be executing only three queries instead of N+2 (N = number of trails in DB)."}], "tags": [], "owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "is_accepted": false, "score": 0, "last_activity_date": 1515637511, "last_edit_date": 1515637511, "creation_date": 1515635517, "answer_id": 48198739, "question_id": 48197986, "link": "https://stackoverflow.com/questions/48197986/multiple-dynamic-variables-within-a-ruby-where-clause/48198739#48198739", "title": "Multiple dynamic variables within a Ruby where clause", "body": "<p>This may not be the best solution but it seems to work:</p>\n\n<pre><code>filtered_trails = []\ntrails.each do |t|\n  if (filters -  t.filters.collect(&amp;:param)).empty?\n    filtered_trails &lt;&lt; t.id\n  end\nend\nresult = Trail.where(id: filtered_trails)\n</code></pre>\n"}], "owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1515638419, "creation_date": 1515628786, "last_edit_date": 1515633403, "question_id": 48197986, "link": "https://stackoverflow.com/questions/48197986/multiple-dynamic-variables-within-a-ruby-where-clause", "title": "Multiple dynamic variables within a Ruby where clause", "body": "<p>I've got a joins/where clause of the following:</p>\n\n<pre><code>Trail.joins(:filters).where(filters: { param: \"family-friendly\", param: \"over-18\" })\n</code></pre>\n\n<p>The variables <code>family-friendly</code> and <code>over-18</code> will be dynamically loaded from the array:</p>\n\n<pre><code>f = [\"family-friendly\", \"over-18\"]\n</code></pre>\n\n<p>How can I adjust the above where clause to dynamically add the elements from the array assuming I don't know how many elements there will be?</p>\n\n<p>I've tried using a <code>.each do |f|</code> method on the array and replaced with <code>param: f</code> but this seems to overwrite the first findings. </p>\n\n<p>Any ideas?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Looks like my code does not in fact work. It only returns the secodn instance of param ('over-18'). I'm looking to find ALL trails which have ALL associated filters stated in the array.</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515720247, "post_id": 48198263, "comment_id": 83418519, "body": "My personal experience has been that <code>Symbol</code>s are easy to explain, <i>unless</i> you explain that they are &quot;like a string except not&quot;. If you simply explain them for what they are, a separate datatype for specific kind of data, namely a datatype for labels or identifiers, the same way <code>Integer</code> is a datatype for whole numbers or <code>String</code> is a datatype for text, then they are typically easy to understand, and there is little confusion with <code>String</code>s."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515720450, "post_id": 48198263, "comment_id": 83418563, "body": "Remember a lot of people are coming to Chef from an ops background. They might, at best, know bash scripting, but that&#39;s often it. The word &quot;datatype&quot; is way beyond our expectations of initial knowledge :)"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1515630946, "creation_date": 1515630946, "answer_id": 48198263, "question_id": 48197572, "link": "https://stackoverflow.com/questions/48197572/chef-attributes-symbols-vs-string/48198263#48198263", "title": "Chef attributes symbols vs string", "body": "<p>Strings are slightly clearer to people that don't know Ruby because double-quoted (or single-quoted) strings are a thing in almost all languages. It's a lot harder to explain both the syntax weirdness for symbols and what they are beyond \"like a string except not\". And it only saves one character so we say to just use strings.</p>\n"}], "owner": {"reputation": 867, "user_id": 1481428, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0aa7c170538dd181317f19312d461cde?s=128&d=identicon&r=PG", "display_name": "Haris Farooqui", "link": "https://stackoverflow.com/users/1481428/haris-farooqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515657662, "creation_date": 1515625693, "last_edit_date": 1515657662, "question_id": 48197572, "link": "https://stackoverflow.com/questions/48197572/chef-attributes-symbols-vs-string", "title": "Chef attributes symbols vs string", "body": "<p>Is there any particular advantage in using one other the other?\nIt appears that by using symbols, you would have a ruby friendly syntax, and some performance gains. However, many supermarket cookbooks seem to use strings, which are newer user friendly syntax. Chef document recommends using string, but does not provide any clear explanation.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1515622139, "post_id": 48196906, "comment_id": 83374822, "body": "have you ran your migrations? <code>heroku run rake db:migrate</code>"}, {"owner": {"reputation": 89, "user_id": 8245776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffbeff0440402e1294c98f38e0c5ddd?s=128&d=identicon&r=PG&f=1", "display_name": "mocqoro", "link": "https://stackoverflow.com/users/8245776/mocqoro"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1515622189, "post_id": 48196906, "comment_id": 83374852, "body": "@Josh Brody Um? actually, don&#39;t remember :P let me try that..."}, {"owner": {"reputation": 89, "user_id": 8245776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffbeff0440402e1294c98f38e0c5ddd?s=128&d=identicon&r=PG&f=1", "display_name": "mocqoro", "link": "https://stackoverflow.com/users/8245776/mocqoro"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1515622345, "post_id": 48196906, "comment_id": 83374904, "body": "@Josh Brody Thank you! wow... that&#39;s embarrassing :)"}, {"owner": {"reputation": 89, "user_id": 8245776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffbeff0440402e1294c98f38e0c5ddd?s=128&d=identicon&r=PG&f=1", "display_name": "mocqoro", "link": "https://stackoverflow.com/users/8245776/mocqoro"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1515622417, "post_id": 48196906, "comment_id": 83374936, "body": "@Josh Brody if you answer it, I can mark it as accepted/closed, thanks for the super fast reply!"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1515622497, "post_id": 48196906, "comment_id": 83374964, "body": ":) it happens to everyone!"}], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 1, "last_activity_date": 1515622477, "creation_date": 1515622477, "answer_id": 48196980, "question_id": 48196906, "link": "https://stackoverflow.com/questions/48196906/cant-get-resources-to-work-on-rails-on-heroku/48196980#48196980", "title": "Can&#39;t get resources to work on rails on Heroku", "body": "<p>Assuming you haven't done anything absolutely with where you're putting your mdoels, <code>ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"characters\" does not exist</code> is indicative of not having the table inside of PostgreSQL.</p>\n\n<p><code>heroku run rake db:migrate</code> should do the trick.</p>\n"}], "owner": {"reputation": 89, "user_id": 8245776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffbeff0440402e1294c98f38e0c5ddd?s=128&d=identicon&r=PG&f=1", "display_name": "mocqoro", "link": "https://stackoverflow.com/users/8245776/mocqoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 48196980, "answer_count": 1, "score": -1, "last_activity_date": 1515622477, "creation_date": 1515622068, "last_edit_date": 1515622216, "question_id": 48196906, "link": "https://stackoverflow.com/questions/48196906/cant-get-resources-to-work-on-rails-on-heroku", "title": "Can&#39;t get resources to work on rails on Heroku", "body": "<p>I'm a rails newbie having trouble getting <code>resources</code> to work on rails when deployed on Heroku. It works in my development environment (Cloud9), but not on Heroku. My routes.rb is as follows:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'pages#home'\n  get '/home', to: 'pages#home'\n\n  resources :characters\nend\n</code></pre>\n\n<p>When I run it on Cloud9, it works as it should and <code>rake routes</code> returns:</p>\n\n<pre><code>        Prefix Verb   URI Pattern                    Controller#Action\n          root GET    /                              pages#home\n          home GET    /home(.:format)                pages#home\n               GET    /home(.:format)                pages#home\n    characters GET    /characters(.:format)          characters#index\n               POST   /characters(.:format)          characters#create\n new_character GET    /characters/new(.:format)      characters#new\nedit_character GET    /characters/:id/edit(.:format) characters#edit\n     character GET    /characters/:id(.:format)      characters#show\n               PATCH  /characters/:id(.:format)      characters#update\n               PUT    /characters/:id(.:format)      characters#update\n               DELETE /characters/:id(.:format)      characters#destroy\n</code></pre>\n\n<p>but on Heroku, I get an error message saying <code>We're sorry, but something went wrong. If you are the application owner check the logs for more information.</code> and the logs show me this:</p>\n\n<pre><code>2018-01-10T21:58:43.431137+00:00 app[web.1]: Completed 500 Internal Server Error in 6ms (ActiveRecord: 4.1ms)\n2018-01-10T21:58:43.433165+00:00 app[web.1]:                 FROM pg_attribute a LEFT JOIN pg_attrdef d\n2018-01-10T21:58:43.433157+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"characters\" does not exist\n2018-01-10T21:58:43.433168+00:00 app[web.1]:                WHERE a.attrelid = '\"characters\"'::regclass\n2018-01-10T21:58:43.433154+00:00 app[web.1]: \n2018-01-10T21:58:43.433166+00:00 app[web.1]:                   ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n2018-01-10T21:58:43.433159+00:00 app[web.1]:                                           ^\n2018-01-10T21:58:43.433174+00:00 app[web.1]: \n2018-01-10T21:58:43.433169+00:00 app[web.1]:                ORDER BY a.attnum\n2018-01-10T21:58:43.425295+00:00 app[web.1]: Processing by CharactersController#new as HTML\n2018-01-10T21:58:43.433172+00:00 app[web.1]:   app/controllers/characters_controller.rb:7:in `new'\n2018-01-10T21:58:43.433158+00:00 app[web.1]: LINE 5:                WHERE a.attrelid = '\"characters\"'::regclass\n2018-01-10T21:58:43.433170+00:00 app[web.1]: ):\n2018-01-10T21:58:43.422364+00:00 app[web.1]: Started GET \"/characters/new\" for 24.155.28.170 at 2018-01-10 21:58:43 +0000\n2018-01-10T21:58:43.433168+00:00 app[web.1]:                  AND a.attnum &gt; 0 AND NOT a.attisdropped\n2018-01-10T21:58:43.433161+00:00 app[web.1]: :               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n2018-01-10T21:58:43.433164+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod\n2018-01-10T21:58:43.433173+00:00 app[web.1]: \n2018-01-10T21:58:58.637394+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod\n2018-01-10T21:58:58.637395+00:00 app[web.1]:                 FROM pg_attribute a LEFT JOIN pg_attrdef d\n2018-01-10T21:58:58.626386+00:00 app[web.1]: Started GET \"/characters/new\" for 24.155.28.170 at 2018-01-10 21:58:58 +0000\n2018-01-10T21:58:58.637397+00:00 app[web.1]:                WHERE a.attrelid = '\"characters\"'::regclass\n2018-01-10T21:58:58.637402+00:00 app[web.1]: \n2018-01-10T21:58:58.637392+00:00 app[web.1]: :               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n2018-01-10T21:58:58.637389+00:00 app[web.1]: LINE 5:                WHERE a.attrelid = '\"characters\"'::regclass\n2018-01-10T21:58:58.637400+00:00 app[web.1]: ):\n2018-01-10T21:58:58.637401+00:00 app[web.1]:   app/controllers/characters_controller.rb:7:in `new'\n2018-01-10T21:58:58.635689+00:00 app[web.1]: Completed 500 Internal Server Error in 6ms (ActiveRecord: 4.0ms)\n2018-01-10T21:58:58.637399+00:00 app[web.1]:                ORDER BY a.attnum\n2018-01-10T21:58:58.637385+00:00 app[web.1]: \n2018-01-10T21:58:58.637391+00:00 app[web.1]:                                           ^\n2018-01-10T21:58:58.637396+00:00 app[web.1]:                   ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n2018-01-10T21:58:58.637398+00:00 app[web.1]:                  AND a.attnum &gt; 0 AND NOT a.attisdropped\n2018-01-10T21:58:58.629873+00:00 app[web.1]: Processing by CharactersController#new as HTML\n2018-01-10T21:58:58.637388+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"characters\" does not exist\n2018-01-10T21:58:58.637403+00:00 app[web.1]: \n</code></pre>\n\n<p>What's wrong and how do I fix it?</p>\n"}, {"tags": ["ruby", "email", "google-api", "gmail-api", "inboxsdk"], "answers": [{"comments": [{"owner": {"reputation": 2714, "user_id": 531677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fef2d4be2097d10e2fbe652dd1c71ea5?s=128&d=identicon&r=PG", "display_name": "brianrhea", "link": "https://stackoverflow.com/users/531677/brianrhea"}, "edited": false, "score": 0, "creation_date": 1515728970, "post_id": 48198475, "comment_id": 83420349, "body": "This is a really great suggestion. However, the user will be sending the email from Gmail in the web browser and so even with a Chrome Extension in place to intercept some events, I don&#39;t think I&#39;ll be able to add an X-header to the email."}, {"owner": {"reputation": 12703, "user_id": 584597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d519ba6b69a89cc8ec99001eea2059b?s=128&d=identicon&r=PG", "display_name": "payne", "link": "https://stackoverflow.com/users/584597/payne"}, "reply_to_user": {"reputation": 2714, "user_id": 531677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fef2d4be2097d10e2fbe652dd1c71ea5?s=128&d=identicon&r=PG", "display_name": "brianrhea", "link": "https://stackoverflow.com/users/531677/brianrhea"}, "edited": false, "score": 0, "creation_date": 1515778709, "post_id": 48198475, "comment_id": 83444978, "body": "Ah, understood.  Consider updating your question with this detail (it was tagged as &quot;gmail-api&quot;, so I assumed that was used for sending)?"}], "tags": [], "owner": {"reputation": 12703, "user_id": 584597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d519ba6b69a89cc8ec99001eea2059b?s=128&d=identicon&r=PG", "display_name": "payne", "link": "https://stackoverflow.com/users/584597/payne"}, "is_accepted": false, "score": 0, "last_activity_date": 1515632949, "creation_date": 1515632949, "answer_id": 48198475, "question_id": 48196601, "link": "https://stackoverflow.com/questions/48196601/gmail-api-able-for-sender-to-add-a-label-to-recipient-email/48198475#48198475", "title": "Gmail API: Able for sender to add a label to recipient email?", "body": "<p>A Gmail mailbox label is the domain of the mailbox owner and can't be specified by the sender.</p>\n\n<p>The sender can, however, add extra headers to the message.  By convention, headers that begin with X- are \"private\" and are (generally) ignored by the mail transport agents.</p>\n\n<p>So, your sender could add the header:</p>\n\n<pre><code>X-Private-Information:  rt45ggx45t\n</code></pre>\n\n<p>Of course, the header payload can be anything, as long as it meets the formatting requirements for email headers.</p>\n\n<p>As an example, here are some headers for an email sent recently by Make magazine:</p>\n\n<pre><code>Received: by mailer.inboxpartner.com id hapk2e28 for &lt;andy@xxx.yyy.zzz&gt;; Wed, 10 Jan 2018 19:23:10 +0000 (envelope-from &lt;noreply@mailer.inboxpartner.com&gt;)\nDate: Wed, 10 Jan 2018 19:23:02 +0000\nTo: \"andy@xxx.yyy.zzz\" &lt;andy@xxx.yyy.zzz&gt;\nFrom: \"Make: magazine\" &lt;noreply@mailer.inboxpartner.com&gt;\nReply-To: \"Make: magazine\" &lt;noreply@mailer.inboxpartner.com&gt;\nSubject: Your Make: Vol. 61 Digital Edition is Here!\nx-track-version: 4\nx-track-source: notifire_bluetoad\nx-track-spooler-id: 39466\nx-track-spooler-split-id: 39508\nx-track-spooler-segment-id: 70820\nx-render: pmta-4-003\n</code></pre>\n\n<p>For some additional context, see:  <a href=\"https://stackoverflow.com/questions/14469110/what-do-x-headers-in-mails-stand-for\">What do X-headers in mails stand for?</a></p>\n"}], "owner": {"reputation": 2714, "user_id": 531677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fef2d4be2097d10e2fbe652dd1c71ea5?s=128&d=identicon&r=PG", "display_name": "brianrhea", "link": "https://stackoverflow.com/users/531677/brianrhea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515632949, "creation_date": 1515620728, "question_id": 48196601, "link": "https://stackoverflow.com/questions/48196601/gmail-api-able-for-sender-to-add-a-label-to-recipient-email", "title": "Gmail API: Able for sender to add a label to recipient email?", "body": "<p>I'm working on a collaboration tool and I need the ability for the <em>sender</em> to add a label as defined by the recipient to an email.</p>\n\n<p>I'm using a combination of InboxSDK within a Chrome Extension and a backend Rails application that talks to the Gmail API.</p>\n\n<p>From what I can tell though, the Gmail message id is different for the sender and the recipient. So if the sender flags the message as relating to a label that the two have agreed upon, I can't see a way to programmatically label the message for the recipient.</p>\n\n<p>Is there a unique identifier in a Gmail message that I could use as the key for both sender and recipient?</p>\n\n<p>I've considered creating a hash of the email based on metadata and body, but was hoping someone might have some insight into how to make this connection between sender and recipient.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1515620780, "post_id": 48196540, "comment_id": 83374243, "body": "You probably just need to remember to <code>require &#39;bar&#39;</code> at the top of your <code>foo.rb</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515643553, "post_id": 48196540, "comment_id": 83380309, "body": "Nope. File names are irrelevant to class names, and whether they are loaded unless you are using something special, such as a particular framework."}], "answers": [{"comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1515621345, "post_id": 48196657, "comment_id": 83374496, "body": "And what if I want to keep the namespace Foo?"}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1515621576, "post_id": 48196657, "comment_id": 83374605, "body": "Do you mean split up a module into multiple files? <a href=\"https://stackoverflow.com/questions/12035057/breaking-ruby-module-across-several-files\" title=\"breaking ruby module across several files\">stackoverflow.com/questions/12035057/&hellip;</a> if you find your answer there, please mark this question as a duplicate."}], "tags": [], "owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "is_accepted": false, "score": 0, "last_activity_date": 1515620946, "creation_date": 1515620946, "answer_id": 48196657, "question_id": 48196540, "link": "https://stackoverflow.com/questions/48196540/how-to-move-classes-into-their-own-file/48196657#48196657", "title": "How to move classes into their own file", "body": "<p>At the interpreter level, modules are similar to classes. Following rails conventions, you would have a separate file called bar.rb and require it at the top of module foo.</p>\n\n<p>bar.rb:</p>\n\n<pre><code>class Bar\nend\n</code></pre>\n\n<p>foo.rb:</p>\n\n<pre><code>require 'bar'\n\nmodule Foo\n\n  def self.bar\n     Bar.new\n  end\n\nend\n</code></pre>\n\n<p>If you want to put the bar file in a different folder, see info about require_relative which allows you to require a file from a path relative to the current file.</p>\n"}], "owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515643509, "creation_date": 1515620448, "last_edit_date": 1515643509, "question_id": 48196540, "link": "https://stackoverflow.com/questions/48196540/how-to-move-classes-into-their-own-file", "title": "How to move classes into their own file", "body": "<p>I have a structure like this in file <code>foo.rb</code>:</p>\n\n<pre><code>module Foo\n  def self.bar\n    Bar.new\n  end\n\n  class Bar\n    ...\n  end\nend\n</code></pre>\n\n<p>I want to extract the <code>Bar</code> class, and put it in a separate file, ideally in a folder. I'm struggling to extract the classes from the module into separate files. It is difficult to understand the difference between modules and classes, and where they should reside. I get the error <code>uninitialized constant</code> in my attempts.</p>\n\n<p>Is there some naming convention to follow to make this work?</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1515708105, "post_id": 48196483, "comment_id": 83414988, "body": "<code>&lt;product&gt;</code> is not a valid HTML element. Using invalid elements is undefined behaviour - browsers can handle it as they choose. Use valid HTML, otherwise you run a significant risk of encountering weird bugs like this and breaking things cross-browser. (If you&#39;re using the new custom elements spec, bear in mind that it&#39;s only supported in a limited number of browsers.)"}, {"owner": {"reputation": 163, "user_id": 6432023, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbf6670724daaa9b481e1521a81666c2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian O&#39;Rourke", "link": "https://stackoverflow.com/users/6432023/christian-orourke"}, "reply_to_user": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1515776768, "post_id": 48196483, "comment_id": 83443993, "body": "Thanks! I was using the custom elements spec, but I&#39;ll switch it to a valid HTML element to prevent any bugs from showing up. However, using a valid HTML element instead has the same effect in terms of the problem I&#39;m having."}, {"owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "edited": false, "score": 0, "creation_date": 1515781675, "post_id": 48196483, "comment_id": 83446415, "body": "The only thing I can see right now is that the code sample at the top of this question is missing an <code>&lt;% end %&gt;</code> for the <code>for</code>, but I don&#39;t think that&#39;s it."}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 6432023, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbf6670724daaa9b481e1521a81666c2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian O&#39;Rourke", "link": "https://stackoverflow.com/users/6432023/christian-orourke"}, "is_accepted": false, "score": 0, "last_activity_date": 1515777618, "creation_date": 1515777618, "answer_id": 48231117, "question_id": 48196483, "link": "https://stackoverflow.com/questions/48196483/four-products-per-row-bootstrap-ror-stops-working-with-added-info/48231117#48231117", "title": "Four products per row Bootstrap/ROR stops working with added info?", "body": "<p>I don't think that this is the correct way of solving this but I got it to work using cards and a nav-bar class</p>\n\n<pre><code>&lt;div class=\"container-center\"&gt;\n&lt;% @products.in_groups_of(4, false) do |group| %&gt;\n  &lt;% for product in group %&gt;\n    &lt;ul class=\"nav navbar-nav\"&gt;\n      &lt;li&gt;\n        &lt;div class=\"card\" style=\"width: 25rem;\"&gt;\n\n          &lt;%= image_tag product.picture.url if product.picture? %&gt;\n\n          &lt;div class=\"card-block\"&gt;\n            &lt;h3 class=\"card-title\"&gt;\n              &lt;u&gt;&lt;%= link_to \"#{product.title}\", product_path(product) %&gt;&lt;/u&gt;\n            &lt;/h3&gt;\n\n            &lt;div class=\"center\"&gt;\n              &lt;% if product.active == false %&gt;\n                &lt;p class=\"card-text\"&gt;Sorry, this product is not available at this time.&lt;/p&gt;\n              &lt;% else %&gt;\n                &lt;div class=\"card-text\" id=\"paypalbutton\"&gt;&lt;%= raw product.paypalbutton %&gt;&lt;/div&gt;\n              &lt;% end %&gt;\n            &lt;/div&gt;\n\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 6432023, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbf6670724daaa9b481e1521a81666c2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian O&#39;Rourke", "link": "https://stackoverflow.com/users/6432023/christian-orourke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515777618, "creation_date": 1515620250, "question_id": 48196483, "link": "https://stackoverflow.com/questions/48196483/four-products-per-row-bootstrap-ror-stops-working-with-added-info", "title": "Four products per row Bootstrap/ROR stops working with added info?", "body": "<p>Im having trouble using Ruby on Rail's in_groups_of method to show rows of products in groups of 4. When my code is as follows it works perfectly:</p>\n\n<pre><code>&lt;% @products.in_groups_of(4, false).each do |row| %&gt;\n&lt;div class=\"center\"&gt;\n  &lt;td&gt;\n    &lt;tr&gt;\n        &lt;% for product in row %&gt;\n          &lt;product&gt;\n            &lt;u&gt;&lt;%= link_to \"#{product.title}\", product_path(product) %&gt;&lt;/u&gt;\n          &lt;/product&gt;    \n    &lt;/tr&gt;    \n  &lt;/td&gt;        \n&lt;/div&gt;\n</code></pre>\n\n<p>However when I try to add additional product info all of the products are centered. This is the page with the additional info added:</p>\n\n<pre><code>&lt;% @products.in_groups_of(4, false).each do |row| %&gt;\n&lt;div class=\"center\"&gt;\n  &lt;td&gt;\n    &lt;tr&gt;\n        &lt;% for product in row %&gt;\n          &lt;product&gt;\n            &lt;u&gt;&lt;%= link_to \"#{product.title}\", product_path(product) %&gt;&lt;/u&gt;\n          &lt;/product&gt;\n\n          &lt;%= image_tag product.picture.url if product.picture? %&gt;\n          &lt;% if product.active == false %&gt;\n            &lt;p&gt;Sorry, this product is not available at this time.&lt;/p&gt;\n          &lt;% else %&gt;\n             &lt;div id=\"paypalbutton\"&gt;&lt;%= raw product.paypalbutton %&gt;&lt;/div&gt;\n          &lt;% end %&gt;\n\n        &lt;% end %&gt;  \n    &lt;/tr&gt;    \n  &lt;/td&gt;        \n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I think my SCSS may be the problem but I'm not sure what's causing it to break. All SCSS used in the page is as followed:</p>\n\n<pre><code>.products {\n  list-style: none;\n  margin: 0;\n  li {\n    overflow: auto;\n    padding: 10px 0;\n    border-bottom: 1px solid $gray-lighter;\n  }\n}\n\nproduct {\n  font-size: 1.5em;\n  letter-spacing: -1px;\n  margin-bottom: 30px;\n  font-weight: normal;\n  color: $dark-gray-darker;\n  u {\n    text-decoration: underline;\n  }\n}\n\n#paypalbutton {\n  height: 50px;\n  width: 200px;\n  margin:0 auto;\n}\n</code></pre>\n\n<p>Removing the 'margin:0 auto;' from #paypalbutton doesn't change anything either.</p>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1515630212, "post_id": 48196362, "comment_id": 83377482, "body": "The bottleneck is the network so the only thing that will make it faster is concurrency, but that&#39;s not going to be fun to implement."}, {"owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 2, "creation_date": 1515632391, "post_id": 48196362, "comment_id": 83378034, "body": "Coinmarketcap has an api <code>https:&#47;&#47;coinmarketcap.com&#47;api&#47;</code>. Are you looking for information not available there?"}], "owner": {"reputation": 323, "user_id": 6942847, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lntXq.jpg?s=128&g=1", "display_name": "mxvx", "link": "https://stackoverflow.com/users/6942847/mxvx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515619692, "creation_date": 1515619692, "question_id": 48196362, "link": "https://stackoverflow.com/questions/48196362/speeding-up-webscraping-with-nokogiri-ruby", "title": "Speeding up webscraping with Nokogiri &amp; Ruby", "body": "<p>I'm brand new to using Nokogiri and Ruby, so bear with me here. I wrote a script to access a bunch of different pages on a website, each of which contains some links, which I want to extract. It works as intended, but I was wondering if theres a faster, more efficient way of accomplishing this. As it stand, the <b>get_urls</b> method collects the name used for the url of the pages where the links are located, so it will get 'bitcoin', 'ethereum', etc, then in the <b>get_websites</b> method it puts that string into the url where the links are located and scrapes each page.</p>\n\n<p>I'm wondering if the way I'm doing this is inefficient and if there is a better way to do it. It takes a fairly long time to run, but as I said, this is my first foray into web scraping so I'm not sure if that is normal. </p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\nrequire 'csv'\n\ndef get_urls    \n  url               = \"https://coinmarketcap.com/\"\n  document          = open(url)\n  content           = document.read\n  parsed_content    = Nokogiri::HTML(content)\n  cointable         = parsed_content.css('.col-lg-10').css('.row').css('.col-xs-12').css('#currencies')\n\n  cointable.css(\"tbody\").css(\"tr\").each do |row|\n    currency_name   = row.css('.currency-name-container').inner_text\n    currency_link   = row.css('.currency-name').css('.currency-symbol').css(\"a\").first.values\n    link_name       = currency_link[0].gsub(\"/currencies/\", \"\").gsub(\"/\",\"\")\n    $url_list &lt;&lt; [link_name, currency_name]\n  end\nend\n\ndef get_websites\n  $url_list.each do |url|\n    coin_arr        = Array.new\n    url_name        = url[0]\n    coin_name       = url[1]\n    url             = \"https://coinmarketcap.com/currencies/#{url_name}\"\n    document        = open(url)\n    content         = document.read\n    parsed_content  = Nokogiri::HTML(content)\n    links           = parsed_content.css('.container').css('.list-unstyled')\n    puts \"Adding #{url_name}...\"\n\n    links.css(\"li\").css(\"a\").each do |row|\n        website = row.first[1]\n        website_name = row.inner_text\n        coin_arr.push([website_name, website])\n        CSV.open('crypto_websites.csv', 'a+') do |csv|\n            csv &lt;&lt; [coin_name, website_name, website]\n        end\n    end\n    $list_of_sites[url_name] = coin_arr \n  end\nend\n\n$url_list = Array.new\n$list_of_sites = {}\nget_urls\nget_websites\n</code></pre>\n"}, {"tags": ["ruby", "gemfile", "middleman"], "comments": [{"owner": {"reputation": 4924, "user_id": 2862719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yzhk5.png?s=128&g=1", "display_name": "m00am", "link": "https://stackoverflow.com/users/2862719/m00am"}, "edited": false, "score": 0, "creation_date": 1515623967, "post_id": 48195636, "comment_id": 83375552, "body": "Welcome to SO. I took the liberty to reformat your question, rephrase it a little, and format your code. You can format text as code by indenting it by four spaces."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 5833170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aa9b228a1789c35d01ebb36f292fb10?s=128&d=identicon&r=PG&f=1", "display_name": "zaidan", "link": "https://stackoverflow.com/users/5833170/zaidan"}, "is_accepted": false, "score": 0, "last_activity_date": 1515850402, "creation_date": 1515850402, "answer_id": 48240363, "question_id": 48195636, "link": "https://stackoverflow.com/questions/48195636/can-t-start-middleman-server/48240363#48240363", "title": "Can\u2019t start middleman server", "body": "<p>You have to add middleman to your Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.4.2'\n\n# For faster file watcher updates on Windows:\ngem 'wdm', '~&gt; 0.1.1', platforms: [:mswin, :mingw]\n\n# windows does not come with time zone data\ngem 'tzinfo-data', platforms: [:mswin, :mingw]\n\n# Middleman Gems\ngem 'middleman', '~&gt; 4.2', '&gt;= 4.2.1'\ngem 'middleman-livereload'\n\n# Your Gems\ngem 'nokogiri', '~&gt; 1.8', '&gt;= 1.8.1'\ngem 'rack', '~&gt; 2.0', '&gt;= 2.0.3'\n\n# Development\ngroup :development, :test do\n  gem 'rspec', '~&gt; 3.7'\nend\n</code></pre>\n\n<p>and run:</p>\n\n<pre><code>bundle install\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9200676, "user_type": "registered", "profile_image": "https://graph.facebook.com/601557280175803/picture?type=large", "display_name": "Vitalik Melnik", "link": "https://stackoverflow.com/users/9200676/vitalik-melnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515850402, "creation_date": 1515616543, "last_edit_date": 1515654881, "question_id": 48195636, "link": "https://stackoverflow.com/questions/48195636/can-t-start-middleman-server", "title": "Can\u2019t start middleman server", "body": "<p>I Installed <em>middlemanapp</em>, and after trying to start a local server was asked to install <strong>bundle</strong>. I installed it and all was well.</p>\n\n<p>This is my Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org\u2019\ngem 'nokogiri\u2019\ngem \u2018rack\u2019, '~&gt; 2.0.1\u2019\ngem \u2018rspec\u2019\n</code></pre>\n\n<p>And when I enter <em>middleman server</em> I get the following error:</p>\n\n<pre><code>Please report a bug if this causes problems.\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/middleman-cli-4.2.1/bin/middleman:12:in require': cannot load such file -- dotenv (LoadError) from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/middleman-cli-4.2.1/bin/middleman:12:in&lt;top (required)&gt;'\nfrom C:/Ruby24-x64/bin/middleman:23:in load' from C:/Ruby24-x64/bin/middleman:23:in\u2019\n</code></pre>\n\n<p>What shall I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6933, "user_id": 26604, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e94ddf54b3d31c6eda0e1c76a58c3e74?s=128&d=identicon&r=PG", "display_name": "Kyle Heironimus", "link": "https://stackoverflow.com/users/26604/kyle-heironimus"}, "edited": false, "score": 0, "creation_date": 1515617657, "post_id": 48195600, "comment_id": 83372782, "body": "Checkout this question and answer for a possible solution: <a href=\"https://stackoverflow.com/q/7744459/26604\">stackoverflow.com/q/7744459/26604</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515618262, "post_id": 48195877, "comment_id": 83373072, "body": "So I do see the authenticity token in my meta tags but not embedded within my form. The token is NOT being submitted (I can see it in my rails console). I am submitting these forms with ajax. What would cause this to fail only 1% of the time? I would expect none of them to work."}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515618582, "post_id": 48195877, "comment_id": 83373239, "body": "follow the step above and you will see it in your form as well, that will guarantee it. It could be ajax interacting with it. I hade same experience"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515619296, "post_id": 48195877, "comment_id": 83373553, "body": "Ok, I will give this a shot. It still doesn&#39;t make sense why I wouldn&#39;t at least be seeing the auth token in my logs from the request."}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515619446, "post_id": 48195877, "comment_id": 83373622, "body": "if you Inspect the element on the form you would see it. Am also still researching what is taken the original authenticity_token away"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515622842, "post_id": 48195877, "comment_id": 83375112, "body": "So I added in the code you suggested and the authenticity token now renders as a hidden input in the form. However, I decided to change the value manually and rails still accepted the altered auth token that was submitted and did not throw any errors. I&#39;m testing this in dev mode."}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515623895, "post_id": 48195877, "comment_id": 83375522, "body": "yep, that&#39;s it."}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515624110, "post_id": 48195877, "comment_id": 83375604, "body": "Sounds like something is still wrong though. It&#39;s accepting invalid auth codes. When I do the same thing on a non ajax form the validation fails."}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515625023, "post_id": 48195877, "comment_id": 83375940, "body": "Hum... mine did not fail though I have file upload in my form but I noticed the form was submitted without Ajax. To address that I installed remotipart gem. Learned this is a weakness in rails when dealing with ajax file upload. To fix it, I installed remotipart gem. Sorry, this comment is becoming extended and I don&#39;t know how we can move this discussion to chat"}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515626630, "post_id": 48195877, "comment_id": 83376482, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/162940/discussion-between-olucube-and-cannon-moyer\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "is_accepted": false, "score": 0, "last_activity_date": 1515619058, "last_edit_date": 1515619058, "creation_date": 1515617557, "answer_id": 48195877, "question_id": 48195600, "link": "https://stackoverflow.com/questions/48195600/ruby-on-rails-occasional-invalid-authenticity-token/48195877#48195877", "title": "Ruby on Rails - Occasional Invalid Authenticity Token", "body": "<p>You can inspect the element (use the developer tools) on the form to see if there is hidden input that holds the token. Otherwise you can manually add authenticity_token to the form helper  e.g.</p>\n\n<pre><code>&lt;%= form_for(@model, ... authenticity_token: true) do |f| %&gt;\n</code></pre>\n\n<p>after that try to show the form to make sure you can see a hidden input authenticity_token already added to the form. I had same experience when using ajax and I implemented it this way: </p>\n\n<pre><code>&lt;%= form_for(@model, html: { multipart: true }, remote: local_assigns[:ajax_form], authenticity_token: true) do |f| %&gt; or\n\n&lt;%= form_for(@model, html: { multipart: true }, remote: true, authenticity_token: true) do |f| %&gt; \n</code></pre>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1515619058, "creation_date": 1515616318, "question_id": 48195600, "link": "https://stackoverflow.com/questions/48195600/ruby-on-rails-occasional-invalid-authenticity-token", "title": "Ruby on Rails - Occasional Invalid Authenticity Token", "body": "<p>I've had a few instances where it appears that a user may go idle for quite some time and then may come back to a page with or without refreshing and upon submission of the form on the page, the user receives an HTTP 422 Invalid Authenticity Token error. </p>\n\n<p>I understand what this error means but I am unsure how to properly handle the error. I don't want to remove the validation for the token in my controller. All of the other questions I have seen just talk about what the token is and not how to solve the issue. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 263, "user_id": 5979872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AEHWa.jpg?s=128&g=1", "display_name": "Adittya Verma", "link": "https://stackoverflow.com/users/5979872/adittya-verma"}, "edited": false, "score": 0, "creation_date": 1515616046, "post_id": 48195331, "comment_id": 83371988, "body": "Your database schema looks complicated. You should follow some rules to create schema and also you must use associations to make this bit easy."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1515631155, "post_id": 48195331, "comment_id": 83377695, "body": "have you looked at <code>accepts_nested-attriutes_for</code>? especially the section in the Rails Guides on Complex Forms: <a href=\"http://guides.rubyonrails.org/form_helpers.html#building-complex-forms\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/form_helpers.html#building-complex-fo&zwnj;&#8203;rms</a>"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515615093, "creation_date": 1515615093, "question_id": 48195331, "link": "https://stackoverflow.com/questions/48195331/ruby-on-rails-duplicate-records-with-nested-attributes", "title": "Ruby on Rails - Duplicate Records with Nested Attributes", "body": "<p>On my checkout page, I am loading a form that has two addresses. One for billing and another for shipping. I have these setup as nested attributes of my cart object. When the user creates/updates their addresses the code in my controller action is executed like so:</p>\n\n<pre><code>def update_addresses\n\n    @countries = Country.all\n    @states = State.all \n    @cart = Cart.find(params[:cart][:id])   \n    if params[:cart][:cart_addresses_attributes][\"0\"][:address_type] == \"Billing\" &amp;&amp; params[:cart][:cart_addresses_attributes][\"1\"][:address_type] == \"Shipping\"\n\n      bla = @cart.cart_addresses.find_by(address_type: \"Billing\")\n      spa = @cart.cart_addresses.find_by(address_type: \"Shipping\")\n      if (params[:cart][:cart_addresses_attributes][\"0\"][:id].blank?) &amp;&amp; !(bla.blank?)\n        params[:cart][:cart_addresses_attributes][\"0\"][:id] = bla.id\n      end\n\n      if (params[:cart][:cart_addresses_attributes][\"1\"][:id].blank?) &amp;&amp; !(spa.blank?)\n        params[:cart][:cart_addresses_attributes][\"1\"][:id] = spa.id\n      end\n\n        @cart.update(params.require(:cart).permit(cart_addresses_attributes: [:id, :address_type, :first_name, :last_name, :email, :telephone, :address_line_one, :address_line_two, :city, :zip_code, :country, :state]))\n\n\n    #more code to render response here\n\nend\n</code></pre>\n\n<p>Upon update, the browser posts the form data with an id attribute and all works fine. Upon create, the browser posts the form data without the id and the address records are created.</p>\n\n<p>I've had a couple of instances where a user opened up 2 browser windows on my checkout page before they had created addresses, after they created the addresses the first time, the user went back to the page where they had not created the addresses. This second page still has the form for creating the records (not updating the ones that were previously created. This results in 2 shipping addresses and 2 billing addresses which is wrong.</p>\n\n<p>So, I added in these lines of code to check for this case and set the id param to the previously created id if one already existed. </p>\n\n<pre><code>bla = @cart.cart_addresses.find_by(address_type: \"Billing\")\n  spa = @cart.cart_addresses.find_by(address_type: \"Shipping\")\n  if (params[:cart][:cart_addresses_attributes][\"0\"][:id].blank?) &amp;&amp; !(bla.blank?)\n    params[:cart][:cart_addresses_attributes][\"0\"][:id] = bla.id\n  end\n\n  if (params[:cart][:cart_addresses_attributes][\"1\"][:id].blank?) &amp;&amp; !(spa.blank?)\n    params[:cart][:cart_addresses_attributes][\"1\"][:id] = spa.id\n  end\n</code></pre>\n\n<p>This works just fine, but as you can see I keep having to hard code in the param values in my code. To me it seems like this is a bad approach but I don't know how else to check the parameters and alter then if needed. I've done some searching but nothing I've seen has really pointed me in any direction. </p>\n\n<p>Any guidance would be appreciated. Thanks in advance. </p>\n"}, {"tags": ["ruby", "date", "datetime"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1515616638, "post_id": 48194819, "comment_id": 83372257, "body": "<code>DateTime.iso8601(&quot;2016-06-16T23:26:25.252Z&quot;)</code> is less fuss."}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 3, "last_activity_date": 1515613334, "creation_date": 1515613334, "answer_id": 48194920, "question_id": 48194819, "link": "https://stackoverflow.com/questions/48194819/iso-string-to-datetime-in-ruby-invalid-date/48194920#48194920", "title": "ISO String to Datetime in ruby invalid date?", "body": "<p>You put an extra quotation mark in the string.</p>\n\n<pre><code>str = \"2016-06-16T23:26:25.252Z\"\nDateTime.strptime(str,\"'%Y-%m-%dT%H:%M:%S.%L%z\") #=&gt; ArgumentError: invalid date\nDateTime.strptime(str,\"%Y-%m-%dT%H:%M:%S.%L%z\")  #=&gt; #&lt;DateTime: 2016-06-16T23:26:25+00:00 ((2457556j,84385s,252000000n),+0s,2299161j)&gt;\n                      ^^^\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8926819"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "closed_date": 1515630952, "answer_count": 1, "score": 0, "last_activity_date": 1515615826, "creation_date": 1515612853, "last_edit_date": 1515615826, "question_id": 48194819, "link": "https://stackoverflow.com/questions/48194819/iso-string-to-datetime-in-ruby-invalid-date", "closed_reason": "Not suitable for this site", "title": "ISO String to Datetime in ruby invalid date?", "body": "<p>I am trying to convert a string to a date time object. The string looks like this </p>\n\n<p><code>\"2016-06-16T23:26:25.252Z\"</code> </p>\n\n<p>I have been trying to convert it using <code>DateTime.strptime(str,\"'%Y-%m-%dT%H:%M:%S.%L%z\")</code> but gives invalid date error.</p>\n\n<p>Do any of you know the issue?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "string-literals"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1515609819, "post_id": 48194059, "comment_id": 83368859, "body": "JFYI, there are no escape sequences here. Backslash is a &quot;line continuation character&quot; in this context."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1515609951, "post_id": 48194059, "comment_id": 83368913, "body": "Options 1 and 2 <b>both</b> produce a combination of newlines and spaces. And all three produce one string."}, {"owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "edited": false, "score": 1, "creation_date": 1515610101, "post_id": 48194059, "comment_id": 83368989, "body": "What if you use single quoted strings in the third example? That way the IDE won&#39;t complain :D"}], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 1, "creation_date": 1515792199, "post_id": 48194160, "comment_id": 83450889, "body": "And in Rails, that helper function calls to_query on the hash))"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1515609986, "creation_date": 1515609986, "answer_id": 48194160, "question_id": 48194059, "link": "https://stackoverflow.com/questions/48194059/methods-to-concatenate-strings-on-separate-lines/48194160#48194160", "title": "Methods to concatenate strings on separate lines", "body": "<p>Normally you'd put something like this on one line, readability be damned, because the alternatives are going to be problematic. There's no way of declaring a string with whitespace ignored, but you can do this:</p>\n\n<pre><code>url = %w[ https://api.foursquare.com/v2/venues/search\n  ?ll=80.914207,%2030.328466&amp;radius=200\n  &amp;v=20161201&amp;m=foursquare&amp;categoryId=4d4b7105d754a06374d81259\n  &amp;intent=browse\n].join\n</code></pre>\n\n<p>Where you explicitly remove the whitespace.</p>\n\n<p>I'd actually suggest avoiding this whole mess by properly composing this URI:</p>\n\n<pre><code>uri = url(\"https://api.foursquare.com/v2/venues/search\",\n  ll: [ 80.914207,30.328466 ],\n  radius: 200,\n  v: 20161201,\n  m: 'foursquare',\n  categoryId: '4d4b7105d754a06374d81259',\n  intent: 'browse'\n)\n</code></pre>\n\n<p>Where you have some kind of helper function that properly encodes that using URI or other tools. By keeping your parameters as data, not as encoded strings, for as long as possible you make it easier to spot bugs as well as make last-second changes to them.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1515617901, "post_id": 48194329, "comment_id": 83372883, "body": "Why didn&#39;t anyone mention the most obvious way, the <i>actual</i> concatenation via <code>+</code>? Requires no further explanation, acceptable overhead, works in most any language. :shrug:"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1515610628, "creation_date": 1515610628, "answer_id": 48194329, "question_id": 48194059, "link": "https://stackoverflow.com/questions/48194059/methods-to-concatenate-strings-on-separate-lines/48194329#48194329", "title": "Methods to concatenate strings on separate lines", "body": "<p>The answer by @tadman definitely suggests the proper way to do it; I\u2019ll post another approach just for the sake of diversity:</p>\n\n<pre><code>query = \"https://api.foursquare.com/v2/venues/search\"\n        \"?ll=80.914207,%2030.328466&amp;radius=200\"\n        \"&amp;v=20161201&amp;m=foursquare&amp;categoryId=4d4b7105d754a06374d81259\"\n        \"&amp;intent=browse\"\n</code></pre>\n\n<p>Yes, without any visible concatenation, 4 strings in quotes one by one in a row. This example won\u2019t work in <code>irb</code>/<code>pry</code> (due to it\u2019s REPL nature,) but the above is the <em>most efficient</em> way to concatenate strings in ruby without producing any intermediate result.</p>\n\n<hr>\n\n<p>Contrived example to test in <code>pry</code>/<code>irb</code>:</p>\n\n<pre><code>value = \"a\" \"b\" \"c\" \"d\"\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 48194160, "answer_count": 2, "score": 0, "last_activity_date": 1515643822, "creation_date": 1515609543, "last_edit_date": 1515643822, "question_id": 48194059, "link": "https://stackoverflow.com/questions/48194059/methods-to-concatenate-strings-on-separate-lines", "title": "Methods to concatenate strings on separate lines", "body": "<p>This produces newlines:</p>\n\n<pre><code>%(https://api.foursquare.com/v2/venues/search\n                          ?ll=80.914207,%2030.328466&amp;radius=200\n                          &amp;v=20161201&amp;m=foursquare&amp;categoryId=4d4b7105d754a06374d81259\n                          &amp;intent=browse)\n</code></pre>\n\n<p>This produces spaces:    </p>\n\n<pre><code>\"https://api.foursquare.com/v2/venues/search\n ?ll=80.914207,%2030.328466&amp;radius=200\n &amp;v=20161201&amp;m=foursquare&amp;categoryId=4d4b7105d754a06374d81259\n &amp;intent=browse\"\n</code></pre>\n\n<p>This produces one string:</p>\n\n<pre><code>\"https://api.foursquare.com/v2/venues/search\"\\\n\"?ll=80.914207,%2030.328466&amp;radius=200\"\\\n\"&amp;v=20161201&amp;m=foursquare&amp;categoryId=4d4b7105d754a06374d81259\"\\\n\"&amp;intent=browse\"\n</code></pre>\n\n<p>When I want to separate one string on multiple lines to read it better on screen, is it preferred to use the escape character?</p>\n\n<p>My IDE complains that I should use single quoted strings rather than double quoted strings since there is no interpolation.    </p>\n"}, {"tags": ["php", "ruby", "shell", "google-app-engine"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515611059, "post_id": 48193959, "comment_id": 83369454, "body": "Can you elaborate a little on what you&#39;ve done so far? I&#39;m not clear. What do you mean by &quot;I specifically set it to Ruby 2.4.2 in the yaml file&quot;? What do you mean by &quot;the console&quot;? What do you mean by &quot;my app engine&quot;?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515611106, "post_id": 48193959, "comment_id": 83369473, "body": "<a href=\"https://cloud.google.com/appengine/docs/flexible/ruby/runtime\" rel=\"nofollow noreferrer\">This page</a> contains lots of official documentation about how ruby versions are managed by google cloud. Does that answer your question? Is there anything you&#39;re unclear about from the official documentation?"}, {"owner": {"reputation": 1261, "user_id": 217696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e336fa382f1f6a7d14ef242b2a972444?s=128&d=identicon&r=PG", "display_name": "Ian Lewis", "link": "https://stackoverflow.com/users/217696/ian-lewis"}, "edited": false, "score": 0, "creation_date": 1550087222, "post_id": 48193959, "comment_id": 96145488, "body": "I am also grappling with the use of alternate versions of Ruby inside the Cloudshell. The cloudshell I am using right now has Ruby 2.6.5 and I can only partially get an alternate Ruby working with <code>rbenv</code>. The issue comes when I try to <code>bundle install</code> because <code>rbenv rehash</code> fails and the shell defaults to the installed version."}], "owner": {"reputation": 11, "user_id": 9200154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a48c1a93397305ba483ffabbb6839755?s=128&d=identicon&r=PG&f=1", "display_name": "P. Hepp", "link": "https://stackoverflow.com/users/9200154/p-hepp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1515609001, "creation_date": 1515609001, "question_id": 48193959, "link": "https://stackoverflow.com/questions/48193959/how-to-change-ruby-or-php-version-in-google-cloud-shell-console", "title": "How to change ruby or php version in google cloud shell console", "body": "<p>Is it possible to change the ruby or php version used in google cloud shell console?</p>\n\n<p>Specifically, I'd like like to keep the console using the ruby version used by my app engine, after I had to specifically set it to Ruby 2.42 (or whatever) in the yaml file. </p>\n\n<p>Or more generally, can I customize the cloud shell to use specific language versions.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber"], "comments": [{"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1515610211, "post_id": 48193853, "comment_id": 83369044, "body": "please share line <code>custom_steps.rb:55</code> and <code>brc_epic03_emp_F_bulk_pp.feature:23</code>"}, {"owner": {"reputation": 65, "user_id": 8901451, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4677509aa264f14c33276033a9f0a5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Majid", "link": "https://stackoverflow.com/users/8901451/majid"}, "reply_to_user": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1515610480, "post_id": 48193853, "comment_id": 83369180, "body": "line 55 is in the code, I put &lt;-- LINE 55"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1515610359, "last_edit_date": 1515610359, "creation_date": 1515610041, "answer_id": 48194174, "question_id": 48193853, "link": "https://stackoverflow.com/questions/48193853/selenium-cucumber-hash-ruby/48194174#48194174", "title": "selenium Cucumber hash (ruby)", "body": "<p>It would be much easier to see the cause of the problem if you narrow it down to a <strong>Minimal</strong>, Complete and Verifiable example.</p>\n\n<p>The problem is that you are defining:</p>\n\n<pre><code>@hashes = [\n  # ...\n  { \n    # ...\n    'fname' =&gt; \"Joe\",\n    # ...\n  },\n  # ...\n]\n</code></pre>\n\n<p>and then trying to access the value <code>\"Joe\"</code> via:</p>\n\n<pre><code>@hashes['fname']\n</code></pre>\n\n<p>This does not work, because <code>@hashes</code> is actually an <strong>Array</strong>. The error message:</p>\n\n<pre><code>no implicit conversion of String into Integer (TypeError) \n</code></pre>\n\n<p>is saying that you can only look up an array element by its <code>Integer</code> index.</p>\n\n<p>There are various ways you could fix this, such as explicitly using the <em>first</em> hash of user properties in your list. (I'd also recommend using a more descriptive variable name than <code>@hashes</code>, but that's a separate issue!)</p>\n\n<pre><code>Then /^I can populate full name from the transformed data$/ do\n  @hashes.each do |hash|\n    puts hash\n  end\n\n  fname = $driver.find_element(:id,\"applicant_first_name\")\n  fname.send_keys(@hashes.first['fname']) # &lt;-- !!!\n\n  lname = $driver.find_element(:id,\"applicant_last_name\")\n  lname.send_keys(@hashes.first['lname']) # &lt;-- !!!\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8901451, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4677509aa264f14c33276033a9f0a5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Majid", "link": "https://stackoverflow.com/users/8901451/majid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 48194174, "answer_count": 1, "score": 0, "last_activity_date": 1515610359, "creation_date": 1515608527, "question_id": 48193853, "link": "https://stackoverflow.com/questions/48193853/selenium-cucumber-hash-ruby", "title": "selenium Cucumber hash (ruby)", "body": "<p>I am writing some testing features, I started with a table, then I changed data in the table and got a copy and wanted to start population a form from the hash, here is my code :</p>\n\n<pre><code> Given /^I start with this table$/ do |table|\n  @hashes = []\n  table.hashes.each do |hash|\n  Faker::Config.locale = 'en-US'\n    hash['fname'] = \"Joe\"\n  hash['lname'] = \"Doe\"\n\n    @hashes &lt;&lt; hash\n  end\nend\n</code></pre>\n\n<p>and the code that will populate the data form from the hash :</p>\n\n<pre><code>Then /^I can populate full name from the transformed data$/ do\n  @hashes.each do |hash|\n    puts hash\n  end\n\n  fname = $driver.find_element(:id,\"applicant_first_name\")\n  fname.send_keys(@hashes['fname'])   &lt;-- LINE 55\n\n  lname = $driver.find_element(:id,\"applicant_last_name\")\n  lname.send_keys(@hashes['lname'])\n\nend\n</code></pre>\n\n<p>But I got this error :</p>\n\n<p>no implicit conversion of String into Integer (TypeError)\n./features/step_definitions/custom_steps.rb:55:in <code>[]'\n./features/step_definitions/custom_steps.rb:55:in</code>/^I can populate full name from the transformed data$/'\nfeatures/brc_epic03_emp_F_bulk_pp.feature:23:in `Then I can populate full name from the transformed data'</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encryption", "access-token", "rails-api"], "comments": [{"owner": {"reputation": 1127, "user_id": 436112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301b3c350bcbbd99ea65ee2c467d38e9?s=128&d=identicon&r=PG", "display_name": "Sascha Kaestle", "link": "https://stackoverflow.com/users/436112/sascha-kaestle"}, "edited": false, "score": 1, "creation_date": 1515756623, "post_id": 48193785, "comment_id": 83432275, "body": "it all depends on your usecase: if it&#39;s truly a token (it is usable once and then gets recreated, such as a password reset token) then yes, it is probably pretty save to store it as plain text. however, your usecase seems to imply that you think of the token more as a password replacement, without any form of automatic invalidation. in this case i would strongly advise against storing it as plain text (or even using <code>has_secure_token</code>!)  also: your API better use HTTPS :)"}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 3294675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03487b6418edf7c7cb59ae629be6a04e?s=128&d=identicon&r=PG&f=1", "display_name": "mph", "link": "https://stackoverflow.com/users/3294675/mph"}, "is_accepted": true, "score": 2, "last_activity_date": 1556688983, "last_edit_date": 1556688983, "creation_date": 1556255318, "answer_id": 55861124, "question_id": 48193785, "link": "https://stackoverflow.com/questions/48193785/rails-5-has-secure-token-encryption/55861124#55861124", "title": "Rails 5 has_secure_token encryption", "body": "<p>Rails 6 <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html\" rel=\"nofollow noreferrer\">ActiveModel::SecurePassword#has_secure_password</a> accepts an attribute name argument and will use BCrypt to set the value of a corresponding <code>#{attribute}_digest</code> column. The default attribute name is <code>password</code> and the model must have an accessor for a <code>#{attribute}_digest</code> attribute.</p>\n\n<p>A simplified example with both a password and an api_token:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>rails generate model User password_digest:string api_token_digest:string\n</code></pre>\n\n<p>Rails 6</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_secure_password #create a `password` attribute\n  has_secure_password :api_token, validations: false\n\n  before_create do\n    self.reset_token = SecureRandom.urlsafe_base64\n  end\nend\n</code></pre>\n\n<p>Prior to Rails 6 you can directly invoke BCrypt to encrypt the token.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_secure_password #create a `password` attribute\n\n  before_create do\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST : BCrypt::Engine.cost    \n    self.api_token = SecureRandom.urlsafe_base64\n    self.api_token_digest = BCryptt::Password.create(api_token, cost: cost)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1808, "favorite_count": 1, "accepted_answer_id": 55861124, "answer_count": 1, "score": 3, "last_activity_date": 1556688983, "creation_date": 1515608317, "question_id": 48193785, "link": "https://stackoverflow.com/questions/48193785/rails-5-has-secure-token-encryption", "title": "Rails 5 has_secure_token encryption", "body": "<p>In the Ruby on Rails <code>has_secure_token</code> gem/feature, it creates a unique token upon record creation and stores it in the database as plain text. If I am using that token to grant users access to an API, is there a security risk in storing that token as plain text in the database?</p>\n\n<p>I was hoping there would be a way to encrypt the <code>token</code> column when the <code>has_secure_token</code> method commits the token to the database, similar to how <code>bcrypt</code> encrypts passwords into a database.</p>\n\n<p>I have tried using gems such as <code>attr_encrypted</code> to store a hashed value of the token, but it seems to be incompatible with <code>has_secure_token</code>. Here is how my model is currently set up:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_secure_token :token\n  # attr_encrypted :token, key: :encrypt_token, attribute: 'token'\n\n  # def encrypt_token\n  #   SecureRandom.random_bytes(32)\n  # end\nend\n</code></pre>\n\n<p>The commented code is <code>attr_encrypted</code> code that has proven to be incompatible. If someone knew if there was a way to safely encrypt a column in the database, while also using <code>has_secure_token</code>, I would greatly appreciate it!</p>\n\n<p>Let me know if any more information is needed or this is confusing. Thanks in advance!</p>\n"}, {"tags": ["ruby", "session", "sinatra", "logout"], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 2188607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fwVLd.jpg?s=128&g=1", "display_name": "Stefan R", "link": "https://stackoverflow.com/users/2188607/stefan-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1515610227, "creation_date": 1515610227, "answer_id": 48194221, "question_id": 48193397, "link": "https://stackoverflow.com/questions/48193397/sinatra-log-out-button-works-but-when-you-press-back-on-browser-it-is-still-sh/48194221#48194221", "title": "Sinatra - Log out button works but when you press back on browser it is still shows the logged in page?", "body": "<p>It sounds like you're being served stale content from the browser cache. </p>\n\n<p>Depending on the browser and its configured settings, unless instructed otherwise (e.g. with a Cache-Control header) the browser will use its local cache when you press the back button.</p>\n\n<p>You can use Sinatra's cache_control helper: <a href=\"http://www.rubydoc.info/github/sinatra/sinatra/Sinatra%2FHelpers%3Acache_control\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/sinatra/sinatra/Sinatra%2FHelpers%3Acache_control</a></p>\n\n<p>Some <a href=\"http://sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">more info here</a> (under \"Cache Control\") and if you're interested, here's the <a href=\"https://tools.ietf.org/html/rfc2616#section-14.9\" rel=\"nofollow noreferrer\">relevant RFC</a></p>\n"}], "owner": {"reputation": 114, "user_id": 7399928, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/SUL1K.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/7399928/mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515610227, "creation_date": 1515606857, "last_edit_date": 1515607187, "question_id": 48193397, "link": "https://stackoverflow.com/questions/48193397/sinatra-log-out-button-works-but-when-you-press-back-on-browser-it-is-still-sh", "title": "Sinatra - Log out button works but when you press back on browser it is still shows the logged in page?", "body": "<p>I am logging out using a link to a logout controller as shown below</p>\n\n<pre><code>get '/logout' do\n  protected!\n  session[:id]=nil\n  redirect back\nend\n</code></pre>\n\n<p><code>protected!</code> is a helper method:</p>\n\n<pre><code>def protected!\n  redirect '/login' if session[:id] == nil\nend\n</code></pre>\n\n<p>When I click on the logout button, the page logs out and displays the login page as expected. BUT when I click back on the browser, a page [that requires a session] is displayed when it should not be. </p>\n\n<p>The session was set to nil in <code>/logout</code> and any pages that require a session should not display. Is there a cache or another session I need to destroy?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass", "rubygems"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 3, "creation_date": 1515607135, "post_id": 48193127, "comment_id": 83367377, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48171022/cannot-install-gem-ffi-windows-7-64bit\">Cannot Install gem ffi - Windows 7 64bit</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1583, "user_id": 5253108, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/o5DQ1.jpg?s=128&g=1", "display_name": "Trenton Tyler", "link": "https://stackoverflow.com/users/5253108/trenton-tyler"}, "is_accepted": true, "score": 3, "last_activity_date": 1515606516, "creation_date": 1515606516, "answer_id": 48193307, "question_id": 48193127, "link": "https://stackoverflow.com/questions/48193127/error-on-installing-sass-on-windows-10-and-ruby-version-2-5-0-1/48193307#48193307", "title": "Error on installing SASS on WIndows 10 and ruby version 2.5.0-1", "body": "<p>ffi doesn't support 2.5 yet. Downgrade to 2.4.</p>\n\n<p>Source: <a href=\"https://stackoverflow.com/questions/48142031/error-installing-sass-ruby-2-5-0-1-msys2-20161025-0-0\">Error installing sass (Ruby 2.5.0.1, MSYS2 20161025.0.0)</a></p>\n"}], "owner": {"reputation": 9, "user_id": 4838367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MAkVB.jpg?s=128&g=1", "display_name": "Jagan", "link": "https://stackoverflow.com/users/4838367/jagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "accepted_answer_id": 48193307, "answer_count": 1, "score": 1, "last_activity_date": 1515607100, "creation_date": 1515605923, "last_edit_date": 1515607100, "question_id": 48193127, "link": "https://stackoverflow.com/questions/48193127/error-on-installing-sass-on-windows-10-and-ruby-version-2-5-0-1", "title": "Error on installing SASS on WIndows 10 and ruby version 2.5.0-1", "body": "<p>I have tried to install Sass in Windows 10 with <code>Ruby version 2.5.0-1</code> but i'm getting following error:</p>\n\n<blockquote>\n  <p>ERROR:  Error installing sass:\n          The last version of ffi (&lt; 2, >= 0.5.0) to support your Ruby &amp; RubyGems was 1.9.18. Try installing it with <code>gem install ffi -v 1.9.18</code> and then running the current command again\n          ffi requires Ruby version &lt; 2.5, >= 2.0. The current ruby version is 2.5.0.</p>\n</blockquote>\n\n<p>Windows 10\nRuby Installer - 2.5.0-1 (64 bit)\nGem version - 2.7.3</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515606295, "post_id": 48193017, "comment_id": 83366905, "body": "<code>@@var</code> is a class variable, whereas <code>@var</code> (within the scope of the class) is a class <b>instance</b> variable. See <a href=\"https://stackoverflow.com/q/15773552/477037\">stackoverflow.com/q/15773552/477037</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515606403, "post_id": 48193017, "comment_id": 83366979, "body": "@Stefan sorry, i got my terminology wrong. I&#39;m meaning to use a class variable."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515606751, "post_id": 48193017, "comment_id": 83367168, "body": "Class variables don&#39;t work well with inheritance (did you read the linked question?). They are often considered a code smell: <a href=\"https://github.com/troessner/reek/blob/master/docs/Class-Variable.md\" rel=\"nofollow noreferrer\">github.com/troessner/reek/blob/master/docs/Class-Variable.md</a>"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1515610208, "answer_count": 0, "score": 0, "last_activity_date": 1516561980, "creation_date": 1515605503, "last_edit_date": 1516561980, "question_id": 48193017, "link": "https://stackoverflow.com/questions/48193017/class-variables-being-overwritten-with-inheritance", "closed_reason": "Duplicate", "title": "Class variables being overwritten with inheritance", "body": "<p>I have class factory which looks like this:</p>\n\n<pre><code>class Base\n\n  def self.attributes=(**keyvals)\n    attr_accessor *@@attributes.keys\n    define_singleton_method(:default) { new(**keyvals) }\n  end\n\n  def self.attributes\n    @@attributes\n  end\n\n  def initialize(opts={})\n    opts.each do |k,v|\n      instance_variable_set(\"@#{k}\", v)\n    end\n  end\n\nend\n</code></pre>\n\n<p>Usage looks like this:</p>\n\n<pre><code># the game\nclass Game &lt; Base\n  self.attributes = {\n    players: {} # Hash of Player instances, keyed by name\n  }\nend\n\nprint Game.default.instance_variables\n# =&gt; [:@player]\n\n# a single tile\nclass Tile &lt; Base\n  self.attributes = {\n    type: '',\n    data: {}\n  }\nend\n\nprint Tile.default.instance_variables\n# =&gt; [:@type, :@data]\n\n# -----------------\n# PROBLEM IS HERE:\n# -----------------\n\nprint Game.default.instance_variables\n# =&gt; [:@type, :@data]\n</code></pre>\n\n<p>The problem is that <code>Game.attributes</code> is being overwritten when I define <code>Tile.attributes</code>. I was expecting that the class instance variable set from <code>Tile</code> would be unique to <code>Tile</code>, but apparently this is not the case.</p>\n\n<p>Is there a way to change class instance variables of a single descendent using an inherited method? Or what am I doing wrong here?</p>\n"}, {"tags": ["ruby", "hash", "reference", "copy"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1515610008, "creation_date": 1515610008, "answer_id": 48194168, "question_id": 48192922, "link": "https://stackoverflow.com/questions/48192922/how-do-i-copy-contents-into-a-hash-without-changing-the-memory-address-to-which/48194168#48194168", "title": "How do I copy contents into a hash without changing the memory address to which that hash points?", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-replace\" rel=\"nofollow noreferrer\"><code>Hash#replace</code></a> to replace the contents of the hash:</p>\n\n<pre><code>def copy(h)\n  new_hash = { 'a' =&gt; 1 }\n\n  h.replace(new_hash)\nend\n\nh = { 'b' =&gt; 2 }\ncopy(h)\nh == { 'a' =&gt; 1 } # =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 48194168, "answer_count": 1, "score": 0, "last_activity_date": 1515610680, "creation_date": 1515605143, "question_id": 48192922, "link": "https://stackoverflow.com/questions/48192922/how-do-i-copy-contents-into-a-hash-without-changing-the-memory-address-to-which", "title": "How do I copy contents into a hash without changing the memory address to which that hash points?", "body": "<p>I'm using Ruby 2.4.  I'm confused about the whole reference vs value thing when copying the contents of a hash.  How do I copy the contents of one hash into another without changing the reference (memory address?) of the hash?  Below is the example of the problem I'm having ....</p>\n\n<pre><code>2.4.0 :003 &gt;   def copy_hash(h)\n2.4.0 :004?&gt;     new_hash = {\"a\" =&gt; 1}\n2.4.0 :005?&gt;     h = new_hash\n2.4.0 :006?&gt;   end\n =&gt; :copy_hash\n2.4.0 :007 &gt; h = {\"b\" =&gt; 2}\n =&gt; {\"b\"=&gt;2}\n2.4.0 :008 &gt; copy_hash(h)\n =&gt; {\"a\"=&gt;1}\n2.4.0 :009 &gt; h\n =&gt; {\"b\"=&gt;2}\n</code></pre>\n\n<p>In the function, I'm assigning the parameter to a new hash ...</p>\n\n<pre><code>h = new_hash\n</code></pre>\n\n<p>But once the function returns the original hash is unchanged.  What's the right way to change the hash in the function so that when it returns the value of the parameter is also changed?  That is, if my hash started out as </p>\n\n<pre><code> {\"b\" =&gt; 2}\n</code></pre>\n\n<p>I'd like the value to be</p>\n\n<pre><code>{\"a\"=&gt;1}\n</code></pre>\n\n<p>after I invoke the \"copy_hash\" function.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "error-handling", "channel", "error-logging"], "comments": [{"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1515605701, "post_id": 48192899, "comment_id": 83366594, "body": "Sorry, but what&#39;s your question?"}, {"owner": {"reputation": 15, "user_id": 7953216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89664325ce9912eb026bae265371af42?s=128&d=identicon&r=PG&f=1", "display_name": "L K", "link": "https://stackoverflow.com/users/7953216/l-k"}, "reply_to_user": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1515605968, "post_id": 48192899, "comment_id": 83366721, "body": "Sorry about that ---     in the call method if the disribute_statement_by_email fails, the following methods are not executed.   Id like to just log an error and ensure the following methods are executed despite an error in another method (mainly the email method). Not too sure what the best way to go about that is."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1515612442, "post_id": 48192899, "comment_id": 83370112, "body": "You could of course put the statements in a method, returning where appropriate. For exampple: <code>def meth(*args); &lt;do taske 1&gt;; return if &lt;condition 1&gt;; &lt;do task 2&gt;; return if &lt;condition 2&gt;; &lt;do task 3&gt;; return if &lt;condition 3&gt;; end</code>."}], "owner": {"reputation": 15, "user_id": 7953216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89664325ce9912eb026bae265371af42?s=128&d=identicon&r=PG&f=1", "display_name": "L K", "link": "https://stackoverflow.com/users/7953216/l-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515801602, "creation_date": 1515605045, "last_edit_date": 1515606161, "question_id": 48192899, "link": "https://stackoverflow.com/questions/48192899/handling-ruby-errors-with-multiple-methods-that-must-be-executed-if-one-fails", "title": "Handling Ruby Errors with multiple methods that must be executed if one fails", "body": "<p>I've inherited a codebase where they have a call method to send out a document via multiple channels - FTP, SMS, and an Email service.</p>\n\n<p>The way its currently set up is that if the email distribution fails, it will exit out of the method and ensure the other channels run. There currently seems to be very basic error handling and thats about it. </p>\n\n<p>I need it to log an error then move on to the following methods -- without hopefully rewriting all the existing code</p>\n\n<p>How can I go about doing this? Will the following work? </p>\n\n<p>the main call method:</p>\n\n<pre><code>def call\n  add_customers_to_statement_distribution\n\n  statement.final!\n\n  copy_generated_pdf_to_final_version\n\n  copy_detailed_csv_to_final_version\n\n  copy_png_thumbnails_with_days_key_to_public_storage\n\n  copy_statement_to_public_storage\n\n  disribute_statement_by_email\n\n  DistributeToFTP.call(statement)\n\n  NotifyCustomersBySms.call(statement)\nend\n</code></pre>\n\n<p>The method with my possible rescue statement added in: </p>\n\n<pre><code>def distribute_statement_by_email\n  DistributeStatementByEmail.call(statement_distribution, \n                                  SENDER_EMAIL, \n                                  final_customers_with_csv, \n                                  with_csv: true)\n\n  DistributeStatementByEmail.call(statement_distribution, \n                                  SENDER_EMAIL, \n                                  final_customers_without_csv, \n                                  with_csv: false)\n\nrescue StandardDistributionError =&gt; error\n  error.new(\"Statement distributed by email has raised an issue: \"\\\n              \"#{error.message}\")\nend\n</code></pre>\n\n<p>I want to make sure I handle the error in a graceful way. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "restforce"], "comments": [{"owner": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1515614857, "post_id": 48192783, "comment_id": 83371350, "body": "I&#39;ve never used that API, but it looks like you would expect to find <code>:oauth_token</code> on <code>client</code> not <code>accounts</code>. What are you trying to accomplish?"}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "reply_to_user": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1515615329, "post_id": 48192783, "comment_id": 83371588, "body": "i am trying to retrieve the <code>:oauth_token</code>"}, {"owner": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1515616051, "post_id": 48192783, "comment_id": 83371990, "body": "How did you instantiate <code>client</code>? You might try something like <code>accounts.client.options[:oauth_token]</code>."}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "reply_to_user": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1515616281, "post_id": 48192783, "comment_id": 83372107, "body": "i have tried that, ``&lt;main&gt;&#39;: undefined method <code>client&#39; for #&lt;Restforce::Collection:0x00000000a26e80&gt; (NoMethodError)</code> .. this gem uses something call hashie::Mash <a href=\"https://github.com/intridea/hashie/tree/v1.2.0\" rel=\"nofollow noreferrer\">github.com/intridea/hashie/tree/v1.2.0</a>   and so may be the retrieval is weird"}, {"owner": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 1, "creation_date": 1515616409, "post_id": 48192783, "comment_id": 83372158, "body": "How about using client directly, as thats how you get accounts anyway. eg: <code>client.options[:oauth_token]</code>. API: <a href=\"http://www.rubydoc.info/gems/restforce/Restforce\" rel=\"nofollow noreferrer\">rubydoc.info/gems/restforce/Restforce</a>."}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "reply_to_user": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1515616479, "post_id": 48192783, "comment_id": 83372186, "body": "yeah!!! that did it"}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "reply_to_user": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1515616535, "post_id": 48192783, "comment_id": 83372213, "body": "pls put that as the answer and i will accept it"}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "reply_to_user": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1515616906, "post_id": 48192783, "comment_id": 83372390, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/162932/discussion-between-ok999-and-jacob-vanus\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "is_accepted": true, "score": 0, "last_activity_date": 1515616650, "creation_date": 1515616650, "answer_id": 48195669, "question_id": 48192783, "link": "https://stackoverflow.com/questions/48192783/accessing-the-restforce-collection-to-retrive-data-in-a-ruby-script/48195669#48195669", "title": "Accessing the restforce collection to retrive data in a ruby script", "body": "<p>Based on the <a href=\"http://www.rubydoc.info/gems/restforce/Restforce\" rel=\"nofollow noreferrer\">API</a> you can get the <code>oauth_token</code> from the <code>client</code> like so:</p>\n\n<pre><code>client.options[:oauth_token]\n</code></pre>\n"}], "owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 48195669, "answer_count": 1, "score": 0, "last_activity_date": 1515616650, "creation_date": 1515604637, "question_id": 48192783, "link": "https://stackoverflow.com/questions/48192783/accessing-the-restforce-collection-to-retrive-data-in-a-ruby-script", "title": "Accessing the restforce collection to retrive data in a ruby script", "body": "<p>This seems to be a basic thing, but kind of not sure on how to access the data from restforce::collection </p>\n\n<pre><code>require 'restforce'\n\n##set up the connection  part here\n\naccounts = client.query('select Id, EventType, Logdate from EventLogFile where LogDate = Last_n_Days:2')\np accounts\n</code></pre>\n\n<p>the accounts object return as restforce::collection like this:</p>\n\n<pre><code>#&lt;Restforce::Collection:0x00000002197218 @client=#&lt;Restforce::Data::Client @options={:api_version=&gt;\"41.0\", :username=&gt;\"sfdc.dev\", :password=&gt;\"somepass!\", :security_token=&gt;nil, :client_id=&gt;\"3MVG9A2kN3Bn1XgTalsb2qZ0e7r9tzLavy7o_V7AAQG7jKctPLq.qDq\", :client_secret=&gt;\"87623\", :host=&gt;\"login.salesforce.com\", :oauth_token=&gt;\"DIZcbAJBBdKtF67Vm3pBI1vasRBp41PQpDCz2yfghnqwXYpyvcecLvpUx\", :refresh_token=&gt;nil, :instance_url=&gt;\"https://myorg.my.salesforce.com\", :cache=&gt;nil, :authentication_retries=&gt;3, :compress=&gt;nil, :mashify=&gt;nil, :timeout=&gt;nil, :adapter=&gt;:net_http, :proxy_uri=&gt;nil, :authentication_callback=&gt;nil, :ssl=&gt;{}, :request_headers=&gt;nil, :logger=&gt;#&lt;Logger:0x00000002158158 @level=0, @progname=nil, @default_formatter=#&lt;Logger::Formatter:0x000000021580e0 @datetime_format=nil&gt;, @formatter=nil, @logdev=#&lt;Logger::LogDevice:0x00000002158068 @shift_period_suffix=nil, @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#&lt;IO:&lt;STDOUT&gt;&gt;, @mon_owner=nil, @mon_count=0, @mon_mutex=#&lt;Thread::Mutex:0x00000002158798&gt;&gt;&gt;, :log_level=&gt;:debug}&gt;, @raw_page={\"totalSize\"=&gt;2, \"done\"=&gt;true, \"records\"=&gt;[{\"attributes\"=&gt;{\"type\"=&gt;\"Account\", \"url\"=&gt;\"/services/data/v41.0/sobjects/Account/001i000002EF7iDAAT\"}, \"Id\"=&gt;\"001i000002EF7iDAAT\", \"Name\"=&gt;\"Sterlidge Pty Ltd\", \"AccountNumber\"=&gt;nil}, {\"attributes\"=&gt;{\"type\"=&gt;\"Account\", \"url\"=&gt;\"/services/data/v41.0/sobjects/Account/001i000002EF7iEAAT\"}, \"Id\"=&gt;\"001i000002EF7iEAAT\", \"Name\"=&gt;\"Sherwood Gem Pty Ltd\", \"AccountNumber\"=&gt;nil}]}&gt;\n</code></pre>\n\n<p>How can i retrieve the values for say like <code>:oauth_token</code> ? doing something like\n<code>accounts[:oauth_token]</code>, throws an exception </p>\n\n<pre><code>undefined method `[]' for #&lt;Restforce::Collection:0x000000010ead70&gt; (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby", "methods", "naming-conventions"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515636287, "post_id": 48192916, "comment_id": 83378857, "body": "<code>size</code> and <code>length</code> do different things AFAIK. One of them always exists, but may not be efficient. The other always is O(1) and doesn&#39;t exist if that isn&#39;t possible. At least, that&#39;s how I remember it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515651235, "post_id": 48192916, "comment_id": 83382593, "body": "@J&#246;rgWMittag Depends on the object in question. On things like <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-size\" rel=\"nofollow noreferrer\"><code>Array</code></a> it&#39;s explicitly listed as &quot;Alias for <code>length</code>&quot;."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515664535, "post_id": 48192916, "comment_id": 83389272, "body": "Yeah, that always rubbed me the wrong way. IMO <code>size</code> should exist for objects that support it, and <code>length</code> should be an alias for <code>size</code> <i>if possible</i>, not the other way around."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515664642, "post_id": 48192916, "comment_id": 83389342, "body": "However, I just noticed that <code>Enumerator</code> has <code>size</code> but not <code>length</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515692208, "post_id": 48192916, "comment_id": 83407160, "body": "Could be something the core team hasn&#39;t been paying attention to. Some elements of the core library are quite dated and need some review to see how consistent the naming conventions are."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1515605119, "creation_date": 1515605119, "answer_id": 48192916, "question_id": 48192762, "link": "https://stackoverflow.com/questions/48192762/did-ruby-deprecate-the-wrong-file-exists-method/48192916#48192916", "title": "Did Ruby deprecate the wrong File exists method?", "body": "<p>This is largely a subjective call. Do you read the call as \"Does this file exist?\" or \"File exists\"? Both readings have their merits.</p>\n\n<p>Historically Ruby has had a lot of aliased methods like <code>size</code> vs. <code>length</code>, but lately it seems like the core team is trying to focus on singular, consistent conventions that apply more broadly.</p>\n\n<p>You'd have to look closely at the conversations on the internal mailing list surrounding the decisions here. I can't find them easily, only people dealing with the changes as deprecation warnings pop up.</p>\n\n<p>The Ruby core team is a mix of people who speak different languages but the native language is Japanese, so perhaps that's guiding some of these decisions. It could be a preference to avoid odd inflections on verbs.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 4305171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ce90y.jpg?s=128&g=1", "display_name": "zor-el", "link": "https://stackoverflow.com/users/4305171/zor-el"}, "is_accepted": false, "score": 0, "last_activity_date": 1619039954, "creation_date": 1619039954, "answer_id": 67203628, "question_id": 48192762, "link": "https://stackoverflow.com/questions/48192762/did-ruby-deprecate-the-wrong-file-exists-method/67203628#67203628", "title": "Did Ruby deprecate the wrong File exists method?", "body": "<p>I agree that <code>if File.exists?('x.txt')</code> reads much more natural than the plural form, which was probably Matz's intention for the alias. As far as I'm concerned, this particular deprecation was misguided.</p>\n<p>However <em>the general preference of a plural form may well be routed in handling enumarables/collections</em>, where plural makes a sense when used with idioms like this:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>pathnames.select(&amp;:exist?)\n</code></pre>\n"}], "owner": {"reputation": 14292, "user_id": 1268003, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fd2bfef83bc07bfe03aeb5f0ef08dc03?s=128&d=identicon&r=PG", "display_name": "Martin Andersson", "link": "https://stackoverflow.com/users/1268003/martin-andersson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1619039954, "creation_date": 1515604552, "question_id": 48192762, "link": "https://stackoverflow.com/questions/48192762/did-ruby-deprecate-the-wrong-file-exists-method", "title": "Did Ruby deprecate the wrong File exists method?", "body": "<p>The docs of <a href=\"https://ruby-doc.org/core-2.5.0/File.html#method-c-exist-3F\" rel=\"nofollow noreferrer\"><code>File.exist?</code></a> says:</p>\n\n<blockquote>\n  <p>Return <code>true</code> if the named file exists.</p>\n</blockquote>\n\n<p>Note that last word used; \"exists\". This is correct. \"File exist\" without the ending <em>s</em> is not correct.</p>\n\n<p>The method <code>File.exists?</code> <strong>exists</strong>, but they deprecated this method. I am thinking it should have been the other way around. What am I missing?</p>\n\n<p>Also, it's noteworthy that other languages/libraries use <em>exists</em>, for example <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#exists-java.nio.file.Path-java.nio.file.LinkOption...-\" rel=\"nofollow noreferrer\">Java</a> and <a href=\"https://msdn.microsoft.com/en-us/library/system.io.file.exists(v=vs.110).aspx\" rel=\"nofollow noreferrer\">.NET</a>.</p>\n\n<p>Similarly, \"this <em>equals</em> that\" - but Ruby uses <a href=\"https://ruby-doc.org/core-2.5.0/BasicObject.html#method-i-equal-3F\" rel=\"nofollow noreferrer\"><em>equal</em></a>, again dropping the ending <em>s</em>. I am getting a feeling that Ruby is actively walking in another direction than mainstream. But then there has to be a reason?</p>\n"}, {"tags": ["ruby", "regex", "haml"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 3, "creation_date": 1515602913, "post_id": 48192231, "comment_id": 83364985, "body": "What about <code>(?&lt;!\\.)btn</code>? Not quite sure what you&#39;re trying to accomplish otherwise. If you post some sample input and its expected output it may be easier to assist you."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1515603919, "post_id": 48192231, "comment_id": 83365587, "body": "In general you should be escaping all of those periods so they match a literal <code>.</code>"}, {"owner": {"reputation": 1104, "user_id": 819246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed65e9515f4bfc235ba57817335b11c?s=128&d=identicon&r=PG", "display_name": "Christoph Eicke", "link": "https://stackoverflow.com/users/819246/christoph-eicke"}, "edited": false, "score": 0, "creation_date": 1515605297, "post_id": 48192231, "comment_id": 83366369, "body": "Yes, I updated the first version already to escape the ."}, {"owner": {"reputation": 6167, "user_id": 244811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVPtR.jpg?s=128&g=1", "display_name": "Scott Weaver", "link": "https://stackoverflow.com/users/244811/scott-weaver"}, "edited": false, "score": 0, "creation_date": 1515605739, "post_id": 48192231, "comment_id": 83366608, "body": "I agree with ctwheels.  For one, you ARE matching &quot;.btn&quot;. so your title is wrong. Secondly, you give zero expected input and output. Thirdly, you give no error.  We&#39;re not clairvoyant."}, {"owner": {"reputation": 6167, "user_id": 244811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVPtR.jpg?s=128&g=1", "display_name": "Scott Weaver", "link": "https://stackoverflow.com/users/244811/scott-weaver"}, "edited": false, "score": 0, "creation_date": 1515605852, "post_id": 48192231, "comment_id": 83366668, "body": "also: your first substitution is looking for &quot;(dot)btn(space)(wildcard)&quot; which isn&#39;t even a use case, according to your input!"}, {"owner": {"reputation": 1104, "user_id": 819246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed65e9515f4bfc235ba57817335b11c?s=128&d=identicon&r=PG", "display_name": "Christoph Eicke", "link": "https://stackoverflow.com/users/819246/christoph-eicke"}, "edited": false, "score": 0, "creation_date": 1515606910, "post_id": 48192231, "comment_id": 83367257, "body": "So, sweaver2112, as you might know there is no &quot;error&quot; with regex, only that it doesn&#39;t match, like I wrote. Also, everything you need to know is in the first HAML line combined with the first solution. There you have the expected output. To spell it out for you: &quot;btn&quot; or &quot;.btn&quot; should be replaced with &quot;btn btn-default&quot; or &quot;.btn .btn-default&quot; respectively. So, if you would pay a little more attention and not just read the title and the code, you would better understand..."}, {"owner": {"reputation": 1104, "user_id": 819246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed65e9515f4bfc235ba57817335b11c?s=128&d=identicon&r=PG", "display_name": "Christoph Eicke", "link": "https://stackoverflow.com/users/819246/christoph-eicke"}, "edited": false, "score": 0, "creation_date": 1515607021, "post_id": 48192231, "comment_id": 83367308, "body": "ctwheels is correct, thanks for the help, mate!"}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1515617881, "creation_date": 1515617881, "answer_id": 48195957, "question_id": 48192231, "link": "https://stackoverflow.com/questions/48192231/regex-match-btn-but-not-btn/48195957#48195957", "title": "Regex: match btn but not .btn", "body": "<p>Your regex <code>btn\\s(?&lt;!\\.btn)</code> is not working because the negative lookbehind <code>(?&lt;!\\.btn)</code> is run <em>after</em> <code>btn</code> <em>and</em> a whitespace char is matched. Consider a <code>btn 123</code> string: <code>btn</code> is matched, then the space is matched, and the lookbehind returns <em>true</em> because <code>btn </code> is not equal to <code>.btn</code>.</p>\n\n<p>To make <em>your</em> pattern work (to some extent), you might move the lookbehind right before <code>\\s</code>: <a href=\"https://regex101.com/r/ssFW9b/1\" rel=\"nofollow noreferrer\"><code>btn(?&lt;!\\.btn)\\s</code></a>. In this case, after matching <code>btn</code>, the regex engine makes sure there is no <code>.btn</code> immediately to the left of the current location. </p>\n\n<p>However, your pattern looks as if you want to match <code>btn</code> as a whole word.\nThus, I suggest fixing the pattern the following way (see <a href=\"https://regex101.com/r/ssFW9b/2\" rel=\"nofollow noreferrer\">demo</a>):</p>\n\n<pre><code>/\\bbtn\\b(?&lt;!\\.btn)/\n</code></pre>\n\n<p>Or, making it a bit shorter (as already been <a href=\"https://stackoverflow.com/questions/48192231/regex-match-btn-but-not-btn/48195957#comment83364985_48192231\">mentioned by @ctwheels</a>):</p>\n\n<pre><code>/(?&lt;!\\.)\\bbtn\\b/\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/ssFW9b/4\" rel=\"nofollow noreferrer\">this regex demo</a>. Note that this version is more efficient because it has to match <code>btn</code> only if <code>.</code> does not appear before (it won't have to check for word boundaries and <code>btn</code> that appear in non-matching contexts).</p>\n\n<p>If you want to study more details about positioning lookbehinds, see <a href=\"http://www.rexegg.com/regex-lookarounds.html#position\" rel=\"nofollow noreferrer\">the <em>\"Positioning the Lookaround\"</em> section at rexegg.com</a>.</p>\n\n<p><strong>Pattern details</strong></p>\n\n<ul>\n<li><code>(?&lt;!\\.)</code> - a negative lookbehind that fails the match if a <code>.</code> appears immediately to the left of the current position</li>\n<li><code>\\b</code> - a word boundary</li>\n<li><code>btn</code> - a <code>btn</code> word</li>\n<li><code>\\b</code> - a word boundary.</li>\n</ul>\n"}], "owner": {"reputation": 1104, "user_id": 819246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed65e9515f4bfc235ba57817335b11c?s=128&d=identicon&r=PG", "display_name": "Christoph Eicke", "link": "https://stackoverflow.com/users/819246/christoph-eicke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 48195957, "answer_count": 1, "score": 1, "last_activity_date": 1515617881, "creation_date": 1515602676, "last_edit_date": 1515605264, "question_id": 48192231, "link": "https://stackoverflow.com/questions/48192231/regex-match-btn-but-not-btn", "title": "Regex: match btn but not .btn", "body": "<p>In the process of upgrading an old bootstrap version, I have trouble to come up with the correct regex to handle the various ways in which my classes are written in the HAML code. </p>\n\n<p>Here are some examples how the <code>.btn</code> class appears in my code:</p>\n\n<pre><code>%a.btn.btn-primary\n</code></pre>\n\n<p>or</p>\n\n<pre><code>= f.submit \"Save\", class: \"btn btn-primary\"\n</code></pre>\n\n<p>In a migration Ruby script, I can very easily fix the first version through the following line (<code>haml_string</code> is the variable the contains my line):</p>\n\n<pre><code>haml_string.gsub(/(.*)\\.btn\\s(.*)/, '\\1.btn .btn-default \\2')\n</code></pre>\n\n<p>But I am struggling really hard to fix the second version, especially since the first one has already run. I have tried the following thing (which negative look ahead to see if we somehow matched the <code>.btn</code> version that we already fixed in the previous run:</p>\n\n<pre><code>haml_string.gsub(/btn\\s(?&lt;!\\.btn)/, 'btn btn-default ')\n</code></pre>\n\n<p>Maybe I am just standing on the tub here, but this somehow seems non-trivial to me as a casual regex user... any hints would be greatly appreciated!</p>\n"}, {"tags": ["ruby", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8958964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7570e91f5f3227b0d4ae600d5eb7fa?s=128&d=identicon&r=PG&f=1", "display_name": "TylerP3358", "link": "https://stackoverflow.com/users/8958964/tylerp3358"}, "edited": false, "score": 0, "creation_date": 1515603514, "post_id": 48192429, "comment_id": 83365362, "body": "Awesome, and thanks for the response.  I was taught open-uri through our curriculum but I stumbled across HTTParty and for some reason, that is what I have been using since then.  Glad to know I can continue without any qualms!"}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": true, "score": 2, "last_activity_date": 1515603365, "creation_date": 1515603365, "answer_id": 48192429, "question_id": 48192141, "link": "https://stackoverflow.com/questions/48192141/is-there-a-significant-difference-between-the-open-uri-gem-and-httparty-gem/48192429#48192429", "title": "Is there a significant difference between the &quot;open-uri&quot; gem and &quot;httparty&quot; gem?", "body": "<p>actually <code>open-uri</code> is a part of standard library (it's enough when you write <code>require \"open-uri\"</code> in your ruby code, but you don't have to declare dependency to it in gemspec,</p>\n\n<p>whereas <code>httparty</code> is external gem.</p>\n\n<p>Answering your question - if working with <code>open-uri</code> is easy enough for you just stick with it. All http libraries eventually are just wrappers for <code>net</code> library so you can't be wrong using one or another. I use <code>httparty</code> on a daily basis because I'm accustomed to it.</p>\n"}], "owner": {"reputation": 65, "user_id": 8958964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7570e91f5f3227b0d4ae600d5eb7fa?s=128&d=identicon&r=PG&f=1", "display_name": "TylerP3358", "link": "https://stackoverflow.com/users/8958964/tylerp3358"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 1, "accepted_answer_id": 48192429, "answer_count": 1, "score": 0, "last_activity_date": 1515603365, "creation_date": 1515602348, "question_id": 48192141, "link": "https://stackoverflow.com/questions/48192141/is-there-a-significant-difference-between-the-open-uri-gem-and-httparty-gem", "title": "Is there a significant difference between the &quot;open-uri&quot; gem and &quot;httparty&quot; gem?", "body": "<p>I am scripting a few scrapers for fun and trying to learn the best way to go about it, and I stumbled across these two gems.  On the surface they seem to do the same thing but I was curious if I am missing something glaring that separates the two?</p>\n"}, {"tags": ["c#", "json", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1515599622, "post_id": 48190919, "comment_id": 83362744, "body": "Your question is unclear. When you say &quot;Ruby hash,&quot; do you mean, perhaps, a string that contains Ruby hash syntax?"}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1515599717, "post_id": 48190919, "comment_id": 83362817, "body": "Yes but in Ruby it&#39;s not really a string... well in the database it is save as something else than a string (hstore) so I just tried to avoid using the word &quot;string&quot; to avoid confusion. It seems that it create confusion actually. Sorry I&#39;m not Ruby developer."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1515599875, "post_id": 48190919, "comment_id": 83362931, "body": "You didn&#39;t mention a database in your question. It would be helpful if you could back up a bit. Where does this data come from? How does your program receive or retrieve it?"}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1515600107, "post_id": 48190919, "comment_id": 83363093, "body": "We don&#39;t care. I actually receive this string from a C# web API from a ruby client. I receive it as a string. Normally I must receive a json string but sometime I receive this ruby hash string. I can deserialize json data but not this ruby hash format. But I find that stupid to reject this string because I think I can easely transform it to json because a ruby hash is just another format to write something very similar to json."}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1515600218, "post_id": 48190919, "comment_id": 83363183, "body": "Ok. The question is, or can be reas as &quot;is there something similar to to_json in C#?&quot;"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1515600474, "post_id": 48190919, "comment_id": 83363357, "body": "&quot;a ruby hash is just another format to write something very similar to json&quot; What you&#39;ve shown is not &quot;just another format,&quot; it&#39;s Ruby <i>code</i>. Ruby code is not a generic data serialization format. Short of writing your own Ruby parser\u2014or invoking <code>ruby</code>\u2014there is not a reliable way to parse Ruby code in C#. If a third-party API is occasionally (but not always) sending you Ruby code instead of JSON then it&#39;s a problem with the API and you should contact the API vendor, as you&#39;re probably not the only user for whom this is a problem."}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1515600478, "post_id": 48190919, "comment_id": 83363360, "body": "So I can start by creating a method that replace the =&gt; by : and remove the \\ but after this this become more complicate."}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1515600560, "post_id": 48190919, "comment_id": 83363421, "body": "I receive this string in my API from Ruby developer for for me this is a string... Ah you are a ruby developer. So I think you cannot help me because my question is more about C#. And no I don&#39;t use an API I m the API."}, {"owner": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 0, "creation_date": 1515600662, "post_id": 48190919, "comment_id": 83363483, "body": "It would be strange if there was built-in method to convert ruby hash to json in c#. So you have to write it yourself I guess."}, {"owner": {"reputation": 4956, "user_id": 5762332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LhBOT.jpg?s=128&g=1", "display_name": "Magnetron", "link": "https://stackoverflow.com/users/5762332/magnetron"}, "edited": false, "score": 0, "creation_date": 1515600815, "post_id": 48190919, "comment_id": 83363577, "body": "If there is the native <code>to_json</code> in ruby, couldn&#39;t you ask the Ruby developer to send you the json instead?"}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "reply_to_user": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 0, "creation_date": 1515600820, "post_id": 48190919, "comment_id": 83363580, "body": "@Evk Agree but who knows. Maube this format is more than just Ruby hash. Now after comment of Jordan I realize this is very specific to Ruby only. So I will write my method and post my solution here for the community."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1515600883, "post_id": 48190919, "comment_id": 83363622, "body": "Talk to the developer and tell them you&#39;re not using Ruby so you can&#39;t parse Ruby, and ask them to provide a way for you to get JSON instead. There&#39;s a reason other languages don&#39;t know how to parse Ruby: We have great, well-documented, standardized data serialization formats like JSON already, and every major platform knows how to both generate and parse that data."}, {"owner": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 1, "creation_date": 1515600940, "post_id": 48190919, "comment_id": 83363665, "body": "I guess simple replace will not work, because these symbols might appear inside values. I&#39;d agree with others - returning ruby hash from web api is quite a bad idea."}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "reply_to_user": {"reputation": 4956, "user_id": 5762332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LhBOT.jpg?s=128&g=1", "display_name": "Magnetron", "link": "https://stackoverflow.com/users/5762332/magnetron"}, "edited": false, "score": 0, "creation_date": 1515601000, "post_id": 48190919, "comment_id": 83363702, "body": "@Magnetron Yes of course this is the first think I will ask now. But again if this hash is a common format and something exist or is easy to do I will do it."}, {"owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "edited": false, "score": 0, "creation_date": 1515601096, "post_id": 48190919, "comment_id": 83363768, "body": "I just try to ease the work of these Ruby developer that send me this hash data in place of correct API :-) But I will do as you suggest."}, {"owner": {"reputation": 12016, "user_id": 1603820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4yI1V.jpg?s=128&g=1", "display_name": "Felipe Skinner", "link": "https://stackoverflow.com/users/1603820/felipe-skinner"}, "edited": false, "score": 0, "creation_date": 1515604034, "post_id": 48190919, "comment_id": 83365656, "body": "You should ask the ruby dev to just pass the hash to you using the <code>.to_json</code> syntax. That&#39;s the correct way, since the code is interacting with other languages"}], "answers": [{"tags": [], "owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "is_accepted": false, "score": 0, "last_activity_date": 1515720018, "creation_date": 1515720018, "answer_id": 48218238, "question_id": 48190919, "link": "https://stackoverflow.com/questions/48190919/convert-ruby-hash-to-json-in-c/48218238#48218238", "title": "Convert Ruby hash to Json in C#", "body": "<p>I found a dirty but working alternative by replacing element of my string by others step by step. It works perfectly.</p>\n\n<pre><code>// Define other methods and classes here\npublic string ToJson(string hash)\n{\n    hash = Regex.Replace(hash, @\":(\\w+)=&gt;\", @\"\"\"$1\"\": \");\n    hash = Regex.Replace(hash, @\"\\\\\"\"\", @\"\"\"\");\n    hash = Regex.Replace(hash, @\"\\\\\\\\\", @\"\");\n    hash = Regex.Replace(hash, @\"=&gt;\", @\": \");\n    hash = Regex.Replace(hash, @\"\"\"\\[\", @\"[\");\n    hash = Regex.Replace(hash, @\"\\]\"\"\", @\"]\");\n    hash = Regex.Replace(hash, @\"\"\"\\{\", @\"{\");\n    hash = Regex.Replace(hash, @\"\\}\"\"\", @\"}\");\n    hash = Regex.Replace(hash, @\"NULL\", @\"null\");\n    hash = $\"{{{hash}}}\";\n    //JObject jObject = (JObject)JsonConvert.DeserializeObject(hash);\n    return hash;\n}\n</code></pre>\n"}], "owner": {"reputation": 15116, "user_id": 196526, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0woAd.png?s=128&g=1", "display_name": "Bastien Vandamme", "link": "https://stackoverflow.com/users/196526/bastien-vandamme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515720018, "creation_date": 1515598466, "last_edit_date": 1515600406, "question_id": 48190919, "link": "https://stackoverflow.com/questions/48190919/convert-ruby-hash-to-json-in-c", "title": "Convert Ruby hash to Json in C#", "body": "<p>I'm looking for help to write a method to convert Ruby hash to Json in C#.</p>\n\n<p>FYI A Ruby hash is like this:</p>\n\n<pre><code>{\"tiger\"=&gt;3, \"lion\"=&gt;2, \"dog\"=&gt;2, \"cat\"=&gt;3}\n</code></pre>\n\n<p>But can also contains array like this</p>\n\n<pre><code>{\"section\"=&gt;\"Gar\", \"code\"=&gt;2, \"collections\"=&gt;\"[{:key=&gt;\\\"emotion\\\", :value=&gt;\\\"Emotion\\\"}]\", \"batch\"=&gt;\"M\"}\n</code></pre>\n\n<p>I know it is very easy to convert a Ruby hash to Json with the to_json instruction in Ruby but I'm looking for similar instruction in C# (if exist).</p>\n\n<p>In other word I receive a string in this format:</p>\n\n<pre><code>{\"section\"=&gt;\"Gar\", \"code\"=&gt;2, \"collections\"=&gt;\"[{:key=&gt;\\\"emotion\\\", :value=&gt;\\\"Emotion\\\"}]\", \"batch\"=&gt;\"M\"}\n</code></pre>\n\n<p>and I want this</p>\n\n<pre><code>{\"section\": \"Gar\", \"code\": 2, \"batch\": \"M\", \"collections\": [{\"key\": \"emotion\", \"value\": \"Emotion\"}]}\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1515599826, "post_id": 48191089, "comment_id": 83362903, "body": "Thanks it works! i&#39;ve had a Pro dyno and never new about this!"}], "tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 1, "last_activity_date": 1515598965, "creation_date": 1515598965, "answer_id": 48191089, "question_id": 48190863, "link": "https://stackoverflow.com/questions/48190863/how-to-keep-my-tracking-pixel-from-hanging-other-peoples-websites-when-i-restart/48191089#48191089", "title": "How to keep my tracking pixel from hanging other peoples websites when i restart my server", "body": "<p>You are looking for <a href=\"https://devcenter.heroku.com/articles/preboot\" rel=\"nofollow noreferrer\">zero downtime deployment</a>. Heroku calls it \"Preboot\".</p>\n\n<p>But it can't be done for free and hobby dynos.</p>\n\n<blockquote>\n  <p>Preboot is only available to apps that are using professional dyno\n  types (standard and performance). Applications using free or hobby\n  dynos do not have access to preboot.</p>\n</blockquote>\n"}], "owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 48191089, "answer_count": 1, "score": 0, "last_activity_date": 1515598965, "creation_date": 1515598290, "question_id": 48190863, "link": "https://stackoverflow.com/questions/48190863/how-to-keep-my-tracking-pixel-from-hanging-other-peoples-websites-when-i-restart", "title": "How to keep my tracking pixel from hanging other peoples websites when i restart my server", "body": "<p>I created a tracking pixel for one of my web applications. </p>\n\n<p>The issue that i am having is that when a website has my tracking pixel and i restart my server, any user that has my tracking pixel on their site, their website will stay loading until my server is done restarting so it can run my javascript code.</p>\n\n<p>I am currently using Heroku to host my Ruby on Rails app so every time i push an update this will happen, is there any way i can prevent this from happening?</p>\n"}, {"tags": ["ruby", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "is_accepted": true, "score": 2, "last_activity_date": 1515598282, "creation_date": 1515598282, "answer_id": 48190854, "question_id": 48190702, "link": "https://stackoverflow.com/questions/48190702/can-i-determine-if-ruby-code-is-executing-in-a-sidekiq-job/48190854#48190854", "title": "Can I determine if Ruby code is executing in a Sidekiq job?", "body": "<p>You can use <code>Sidekiq.server?</code> for that, i.e.:</p>\n\n<pre><code>def method_for_anyone_to_call\n  if Sidekiq.server?\n    puts \"hey! I'm running in a Sidekiq job.\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21877, "user_id": 131227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/60e3c03e227b84e2898c29fd711cae5b?s=128&d=identicon&r=PG", "display_name": "z5h", "link": "https://stackoverflow.com/users/131227/z5h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 48190854, "answer_count": 1, "score": 1, "last_activity_date": 1515598282, "creation_date": 1515597923, "question_id": 48190702, "link": "https://stackoverflow.com/questions/48190702/can-i-determine-if-ruby-code-is-executing-in-a-sidekiq-job", "title": "Can I determine if Ruby code is executing in a Sidekiq job?", "body": "<p>Can I do something like the following? If yes, how do I implement <code>in_sidekiq_job</code>?</p>\n\n<pre><code>def method_for_anyone_to_call\n  if in_sidekiq_job\n    puts \"hey! I'm running in a Sidekiq job.\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "google-chrome", "ssl", "curl", "jekyll"], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 6684182, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mS1Lj.jpg?s=128&g=1", "display_name": "Danis Fermi", "link": "https://stackoverflow.com/users/6684182/danis-fermi"}, "is_accepted": true, "score": 0, "last_activity_date": 1515764673, "creation_date": 1515764673, "answer_id": 48227531, "question_id": 48190546, "link": "https://stackoverflow.com/questions/48190546/error-ssl-protocol-erro-error-bad-uri/48227531#48227531", "title": "Error SSL Protocol Erro: ERROR bad URI", "body": "<p>The issue was with how Jekyll forces clients to connect over HTTPS without SSL certificates, resulting in browsers like Safari and Chrome not trusting the site.<br>\nI just had to make the following change in _config.yml file:</p>\n\n<pre><code>force-https: False\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 6684182, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mS1Lj.jpg?s=128&g=1", "display_name": "Danis Fermi", "link": "https://stackoverflow.com/users/6684182/danis-fermi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 48227531, "answer_count": 1, "score": 0, "last_activity_date": 1515764673, "creation_date": 1515597450, "question_id": 48190546, "link": "https://stackoverflow.com/questions/48190546/error-ssl-protocol-erro-error-bad-uri", "title": "Error SSL Protocol Erro: ERROR bad URI", "body": "<p>I have the following remote Jekyll environment setup:<br></p>\n\n<pre><code>sudo apt-get install ruby ruby-dev make gcc\ngem install jekyll bundler\nsudo ufw allow 4000\nsudo iptables -I INPUT -p tcp --dport 4000 -j ACCEPT\nJEKYLL_ENV=production jekyll serve --host \"ip-address\" --baseurl \"\"\n</code></pre>\n\n<p>* ip-addess is replaced with the real IP Address (hidden for privacy purposes).</p>\n\n<p>When I try to serve the blog and access it, I get the following error on my browser(screenshot from Chrome. Same on Safari as well):\n<a href=\"https://i.stack.imgur.com/yzh8d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yzh8d.png\" alt=\"enter image description here\"></a>\nThis is the server side error message:\n<a href=\"https://i.stack.imgur.com/9lgFd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9lgFd.png\" alt=\"enter image description here\"></a>\nHowever, everything works fine when I run curl.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1515597404, "post_id": 48190460, "comment_id": 83361110, "body": "If you can delete them based on <code>created_at</code> you certainly should be able to find and delete based on <code>date</code> instead, it is just a different field in the same table, can you share the code you have so far?  In reference to the question you shared, you would replace the <code>created_at</code> in red with <code>date</code> or whatever the column is called."}, {"owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1515598141, "post_id": 48190460, "comment_id": 83361650, "body": "Yeah here is what I have in my events.rake file: <code>namespace :events do desc &quot;Delete event after 12 hours from date&quot; task delete_12_hours_old::environment do .where([&#39;date &lt; ?&#39;, 12.hours.ago]).destroy_all endend</code>"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1515598191, "post_id": 48190460, "comment_id": 83361691, "body": "post code in the question by editing it please, just add it into the question and format it"}, {"owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1515598230, "post_id": 48190460, "comment_id": 83361717, "body": "@RockwellRice sorry will do!"}, {"owner": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 0, "creation_date": 1515605438, "post_id": 48190460, "comment_id": 83366440, "body": "What exactly is not working with your solution? To me it looks correct, although you might shorten it to <code>Event.destroy_all(&#39;date &lt; ?&#39;, 12.hours.ago)</code>. If you want to trigger actions in reaction to this, you can use the &#39;before_destroy&#39; callback."}, {"owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "reply_to_user": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 0, "creation_date": 1515607441, "post_id": 48190460, "comment_id": 83367537, "body": "@morgler I created an event with an end_date of 1AM, hoping it would be destroyed at 1PM (a few minutes ago) but I didn&#39;t notice any deletions. I have my server running but I am using localhost:3000 so I&#39;m not sure if that has anything to do with it."}, {"owner": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 1, "creation_date": 1515616333, "post_id": 48190460, "comment_id": 83372126, "body": "This might not be the cause, but I know <code>12.hours.ago</code> to cause timezone issues. It calculates a different time than say <code>Time.zone.now - 12.hours</code>. You might want to check that time calculation separately from the deletion problem. If that wasn&#39;t the cause, you might want to check the collection your query delivers (<code>Event.where(\u2026)</code>). If that is correct, you might want to check the destroy lifecycle callbacks (<code>before_destroy</code> and so on)."}, {"owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "reply_to_user": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 0, "creation_date": 1515617465, "post_id": 48190460, "comment_id": 83372670, "body": "@morgler that&#39;s actually what I ended up doing! I also utilized the whenever gem and made a rake task that checks the database every two minutes to check for events who&#39;s <code>end_time</code>&#39;s are less than <code>Time.now = 12.hours</code>! I will post an answer shortly but there is a lot of great documentation for whenever! Thanks for all the help :)"}], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": false, "score": 0, "last_activity_date": 1515597690, "creation_date": 1515597690, "answer_id": 48190631, "question_id": 48190460, "link": "https://stackoverflow.com/questions/48190460/is-there-a-way-destroy-an-object-based-on-a-date-attribute-as-opposed-to-created/48190631#48190631", "title": "Is there a way destroy an object based on a date attribute as opposed to created_at in Ruby on Rails?", "body": "<p>You can create an attribute of <code>delete_after</code> and set a date on it. Then you'd probably want to create a rake task that will select all events in the db where <code>current_data &gt; delete_at</code>. Then you'd want a cron or scheduler to handle automatically running this rake task for you on some sort of maintenance interval (refer to the original link you posted for delayed jobs or scheduled tasks that happen in the future).</p>\n\n<p>Setting this attribute will also allow the user to update the event if they ever need to reschedule.</p>\n"}, {"tags": [], "owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "is_accepted": true, "score": 1, "last_activity_date": 1515617947, "creation_date": 1515617947, "answer_id": 48195978, "question_id": 48190460, "link": "https://stackoverflow.com/questions/48190460/is-there-a-way-destroy-an-object-based-on-a-date-attribute-as-opposed-to-created/48195978#48195978", "title": "Is there a way destroy an object based on a date attribute as opposed to created_at in Ruby on Rails?", "body": "<p>I ended up using the <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">whenever gem</a> and was able to make a rake task that runs every 2 minutes checking the database for events who's <code>end_date</code> is less than <code>Time.now - 12.hours</code>. Any that meet this criteria are removed from the database. I ran into some issues but <a href=\"https://github.com/javan/whenever/issues/665\" rel=\"nofollow noreferrer\">this thread</a> was extremely helpful.</p>\n\n<p>Following the steps I ended up writing a schedule.rb in my config directory which housed the rake task. In my schedule.rb file: </p>\n\n<pre><code>set :environment, \"development\"\nset :output, {:error =&gt; \"log/cron_error_log.log\", :standard =&gt; \"log/cron_log.log\"}\nevery 2.minutes do\n  rake \"events:delete_12_hours_old\"\nend\n</code></pre>\n\n<p>In lib/tasks/events.rake file:</p>\n\n<pre><code>namespace :events do\n\n  desc \"Delete event after 12 hours from date\"\n  task delete_12_hours_old: :environment do\n    Event.where('end_date &lt;= ?', Time.now-12.hours).destroy_all\n  end\n\nend\n</code></pre>\n\n<p>Thank you guys for all of the help and advice!</p>\n"}], "owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48195978, "answer_count": 2, "score": 0, "last_activity_date": 1515617947, "creation_date": 1515597138, "last_edit_date": 1515605901, "question_id": 48190460, "link": "https://stackoverflow.com/questions/48190460/is-there-a-way-destroy-an-object-based-on-a-date-attribute-as-opposed-to-created", "title": "Is there a way destroy an object based on a date attribute as opposed to created_at in Ruby on Rails?", "body": "<p>I am aware that there is another <a href=\"https://stackoverflow.com/questions/17058344/how-to-automatically-delete-a-record-from-the-database-in-rails\">question</a> similar to what I am asking but this question is in regards to deletion a certain time after object creation (created_at) but I have many event objects with a specific date when they take place. I want to destroy that event object after that date, which will then trigger an email either thanking attendees or apologizing for missing them if they did not attend. Is there a way to accomplish destroying the object based on one of it's attributes? Or can this only be accomplished using the created_at attribute? </p>\n\n<p>The dates are currently a string but eventually I will have them become a datetime attribute if that makes a difference.</p>\n\n<p>In my events.rake file:</p>\n\n<pre><code>namespace :events do\n  desc \"Delete event after 12 hours from date\"\n  task delete_12_hours_old: :environment do\n    Event.where(['date &lt; ?', 12.hours.ago]).destroy_all\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 1670, "user_id": 3475163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce396a4249c07f19902779e54c7a40b?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed Anees", "link": "https://stackoverflow.com/users/3475163/muhammed-anees"}, "edited": false, "score": 0, "creation_date": 1515599895, "post_id": 48190132, "comment_id": 83362947, "body": "to which action you are trying to post? <code>create</code> or <code>import</code>?"}, {"owner": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 0, "creation_date": 1515604175, "post_id": 48190132, "comment_id": 83365722, "body": "Is there a reason you&#39;re circumventing strong params in the <code>import</code> action? You use <code>params[:file]</code> instead of <code>incident_datum_params[:file]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 0, "creation_date": 1515604746, "post_id": 48190463, "comment_id": 83366031, "body": "I think, @inye found your problem. Your form fields (and in consequence your params) are not named according to Rails conventions. Your field should be <code>&lt;%= file_field_tag &#39;incident_data_file&#39;, :style=&gt;&#39;width: 600px;&#39; %&gt;</code>, but it&#39;s much cleaner and easier to use Rails&#39; form builder, as inye pointed out above!"}], "tags": [], "owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "is_accepted": false, "score": 0, "last_activity_date": 1515597158, "creation_date": 1515597158, "answer_id": 48190463, "question_id": 48190132, "link": "https://stackoverflow.com/questions/48190132/param-is-missing-or-the-value-is-empty-incident-datum/48190463#48190463", "title": "param is missing or the value is empty: incident_datum", "body": "<p>I think your problem is your Form (if you want keep rails convention), you have to create a IncidentDatum element and create a form for this element like:</p>\n\n<pre><code>&lt;%= form_for @incident_data , multipart: true do %&gt;\n...\n</code></pre>\n\n<p>With this you create a form like incident_datum : { file: .... }</p>\n\n<p>This format you spec in the <code>def incident_datum_params</code> method</p>\n\n<pre><code>params.require(:incident_datum).permit( :number , ....\n</code></pre>\n\n<p>Also you need to add <code>file</code> to <code>permit</code> </p>\n\n<pre><code>params.require(:incident_datum).permit( :number , :file , ....\n</code></pre>\n\n<p>You can see the format of your post in your console browser network tab and also in the log you post in the question:</p>\n\n<blockquote>\n  <p>Processing by IncidentDataController#create as HTML   Parameters:\n  {\"utf8\"=>\"\u2713\",\n  \"authenticity_token\"=>\"lBXX210GVPazui46U8rATpzrXCMJw8DAqb7Hc3WWK2uTU3WGojClRU7+ZKkakCjUblweOV7UpM+FiIvRSNzSng==\",\n  \"file\"=>#,\n  @original_filename=\"incident_datum.csv\",\n  @content_type=\"application/vnd.ms-excel\",\n  @headers=\"Content-Disposition: form-data; name=\\\"file\\\";\n  filename=\\\"incident_datum.csv\\\"\\r\\nContent-Type:\n  application/vnd.ms-excel\\r\\n\">, \"commit\"=>\"Import CSV\"} Completed 400\n  Bad Request in 2ms (ActiveRecord: 0.0ms)</p>\n</blockquote>\n\n<p>You can see <code>file</code> direct in the params ( no inside incident_data incident_data: { fiel: .... } )</p>\n"}], "owner": {"reputation": 1, "user_id": 9198984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20245100975864cfb3627cad65397c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/9198984/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1515597158, "creation_date": 1515596150, "question_id": 48190132, "link": "https://stackoverflow.com/questions/48190132/param-is-missing-or-the-value-is-empty-incident-datum", "title": "param is missing or the value is empty: incident_datum", "body": "<p>I'm new to ruby on rails and I'm having trouble with importing a csv file with data to db. I have been looking around but most of the similar questions on here did not solve this issue.</p>\n\n<p>Problem: param is missing or the value is empty: incident_datum</p>\n\n<p>I understand that this issue is caused by the action controller due to the params.require( but removing it doesn't help because the csv file just gets temporarily uploaded but no data gets extracted from it.</p>\n\n<p>Here are the supporting files =></p>\n\n<p>Controller:</p>\n\n<pre><code>class IncidentDataController &lt; ApplicationController\n  before_action :set_incident_datum, only: [:show, :edit, :update, :destroy]\n\n  # GET /incident_data\n  # GET /incident_data.json\n  def index\n    @incident_data = IncidentDatum.all\n    @incident_data_first_20 = IncidentDatum.first(20)\n  end\n\n  def import\n      IncidentDatum.import(params[:file])\n      if @IncidentDatum.save\n        # after import, redirect and let us know the method worked!\n        redirect_to root_url, notice: \"Incident Data Imported!\"\n      else\n        render :new\n      end\n  end\n\n  # GET /incident_data/1\n  # GET /incident_data/1.json\n  def show\n    @distinct_number = IncidentDatum.distinct.pluck(:number).sort\n  end\n\n  # GET /incident_data/new\n  def new\n    @incident_datum = IncidentDatum.new\n  end\n\n  # GET /incident_data/1/edit\n  def edit\n  end\n\n  # POST /incident_data\n  # POST /incident_data.json\n  def create\n    @incident_datum = IncidentDatum.new(incident_datum_params)\n\n    respond_to do |format|\n      if @incident_datum.save\n        format.html { redirect_to @incident_datum, notice: 'Incident datum was successfully created.' }\n        format.json { render :show, status: :created, location: @incident_datum }\n      else\n        format.html { render :new }\n        format.json { render json: @incident_datum.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /incident_data/1\n  # PATCH/PUT /incident_data/1.json\n  def update\n    respond_to do |format|\n      if @incident_datum.update(incident_datum_params)\n        format.html { redirect_to @incident_datum, notice: 'Incident datum was successfully updated.' }\n        format.json { render :show, status: :ok, location: @incident_datum }\n      else\n        format.html { render :edit }\n        format.json { render json: @incident_datum.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /incident_data/1\n  # DELETE /incident_data/1.json\n  def destroy\n    @incident_datum.destroy\n    respond_to do |format|\n      format.html { redirect_to incident_data_url, notice: 'Incident datum was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_incident_datum\n    @incident_datum = IncidentDatum.find(params[:id])\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def incident_datum_params\n    params.require(:incident_datum).permit(\n      :number, \n      :priority, \n      :state, \n      :description, \n      :short_description1, \n      :ticket_type, \n      :task_type, \n      :opened, \n      :closed, \n      :initial_contact, \n      :configuration_item, \n      :environment, \n      :assignment_group, \n      :reassignment_count, \n      :department, \n      :name, \n      :problem, \n      :short_description2)\n    #MG what to do with '.require(:incident_datum)' after params?\n  end\n\nend\n</code></pre>\n\n<p>Import:\n    </p>\n\n<pre><code>&lt;div id=\"import\" class=\"well\" style=\"display:inline-block;width:100%\"&gt;\n    &lt;h3 style=\"margin-top:0px;\"&gt;Import Data&lt;/h3&gt;\n    &lt;div id=\"\" style=\"float:left; flex:1;\"&gt; \n        &lt;%= form_tag incident_data_path, multipart: true do %&gt;\n        &lt;%= file_field_tag :file, :style=&gt;'width: 600px;' %&gt;\n    &lt;/div&gt;\n    &lt;div style=\"float:right; flex:1;\"&gt;\n        &lt;%= submit_tag \"Import CSV\" %&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n\n\n&lt;a class=\"btn btn-info\" href=\"/incident_data/\"&gt;Incident Data&lt;/a&gt;\n</code></pre>\n\n<p>Index.html.erb</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;h1 style=\"float:left;\"&gt;Incident Data&lt;/h1&gt;&lt;br /&gt;\n&lt;div class=\"btn btn-info\" style=\"float:right;\"&gt;\n  &lt;%= link_to 'New Incident Datum', new_incident_datum_path%&gt;\n&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;\n\n\n&lt;div style=\"overflow-y:auto;height:600px;\"&gt;\n  &lt;%= flash[:notice] %&gt;           &lt;!-- Why was this commented out? &lt;/th--&gt;\n  &lt;table class=\"table table-striped\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Number&lt;/th&gt;\n        &lt;th&gt;Priority&lt;/th&gt;\n        &lt;th&gt;State&lt;/th&gt;\n        &lt;th&gt;Description&lt;/th&gt;\n        &lt;th&gt;Short description1&lt;/th&gt;     &lt;!-- Why was this commented out? &lt;/th--&gt;\n        &lt;th&gt;Ticket type&lt;/th&gt;\n        &lt;th&gt;Task type&lt;/th&gt;\n        &lt;th style=\"display:none\"&gt;Opened&lt;/th&gt;\n        &lt;th style=\"display:none\"&gt;Closed&lt;/th&gt;\n        &lt;th style=\"display:none\"&gt;Initial contact&lt;/th&gt;\n        &lt;th&gt;Configuration item&lt;/th&gt;\n        &lt;th&gt;Environment&lt;/th&gt;\n        &lt;th&gt;Assignment group&lt;/th&gt;\n        &lt;th&gt;Reassignment count&lt;/th&gt;\n        &lt;th&gt;Department&lt;/th&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;th&gt;Problem&lt;/th&gt;\n        &lt;th&gt;Short description2&lt;/th&gt;   &lt;!-- Why was this commented out? &lt;/th--&gt;\n\n        &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;!----------------------------------------------------------------------------\n        [] BREADCRUMS - SHOWS WHERE WE ARE IN THE PAGE\n        [] PAGEINATOR - GOOGLE THING THAT ALLOWS YOU TO CHOOSE BETWEEN MULTIPLE PAGES //look on main_page.html \n    -----------------------------------------------------------------------------&gt;\n    &lt;tbody id=\"descList\"&gt;\n      &lt;% @incident_data_first_20.each do |incident_datum| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= incident_datum.number %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.priority %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.state %&gt;&lt;/td&gt;\n          &lt;td data-toggle=\"modal\" data-target=\"#descModal\"&gt;&lt;%= incident_datum.short_description1 %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.ticket_type %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.task_type %&gt;&lt;/td&gt;\n          &lt;td style=\"display:none\"&gt;&lt;%= incident_datum.opened %&gt;&lt;/td&gt;\n          &lt;td style=\"display:none\"&gt;&lt;%= incident_datum.closed %&gt;&lt;/td&gt;\n          &lt;td style=\"display:none\"&gt;&lt;%= incident_datum.initial_contact %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.configuration_item %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.environment %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.assignment_group %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.reassignment_count %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.department %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.name %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= incident_datum.problem %&gt;&lt;/td&gt;\n          &lt;td style=\"display:none\"&gt;&lt;%= incident_datum.description %&gt;&lt;/td&gt;\n          &lt;td style=\"display:none\"&gt;&lt;%= incident_datum.short_description2 %&gt;&lt;/td&gt;\n\n          &lt;td&gt;&lt;%= link_to 'Show', incident_datum %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Edit', edit_incident_datum_path(incident_datum) %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Destroy', incident_datum, method: :destroy, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;\n\n\n\n&lt;%= render partial: \"modal\", locals: {zone: @zone} %&gt;\n</code></pre>\n\n<p>routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  #resources :incident_data\n  # INDEX\n  #root to: 'analysis#main_page'\n\n  # Database Tables\n  resources :incident_data do\n    collection { post :import }\n  end\n  root to: 'analysis#main_page' #MG\n\n  # ADDITIONAL PAGES\n  get 'analysis/main_page'\n  get 'analysis/new_tile'\n  get 'analysis/ticket_identification'\n  get 'analysis/detailed_view'\n  get 'analysis/import_data'\n  get 'analysis/test'\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n\n\nend\n</code></pre>\n\n<p>Console:</p>\n\n<pre><code>Processing by IncidentDataController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"lBXX210GVPazui46U8rATpzrXCMJw8DAqb7Hc3WWK2uTU3WGojClRU7+ZKkakCjUblweOV7UpM+FiIvRSNzSng==\", \"file\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x00000002829388 @tempfile=#&lt;Tempfile:/tmp/RackMultipart20180110-11292-jzqi2l.csv&gt;, @original_filename=\"incident_datum.csv\", @content_type=\"application/vnd.ms-excel\", @headers=\"Content-Disposition: form-data; name=\\\"file\\\"; filename=\\\"incident_datum.csv\\\"\\r\\nContent-Type: application/vnd.ms-excel\\r\\n\"&gt;, \"commit\"=&gt;\"Import CSV\"}\nCompleted 400 Bad Request in 2ms (ActiveRecord: 0.0ms)\n\n\n\nActionController::ParameterMissing (param is missing or the value is empty: incident_datum):\n\napp/controllers/incident_data_controller.rb:84:in `incident_datum_params'\napp/controllers/incident_data_controller.rb:39:in `create'\n^C- Gracefully stopping, waiting for requests to finish\n=== puma shutdown: 2018-01-10 14:20:33 +0000 ===\n- Goodbye!\nExiting\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "passwords", "form-for"], "comments": [{"owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "edited": false, "score": 0, "creation_date": 1515594883, "post_id": 48189288, "comment_id": 83359373, "body": "Thanks for sharing your code. Do you know where you&#39;re having issues? I notice you have <code>@review.password = nil</code> in your controller. It looks like the review password will always be nil. Is that intended?"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1515596183, "post_id": 48189288, "comment_id": 83360289, "body": "when you define <code>@product</code> in your <code>create</code> action?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 9153861, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10155971858703554/picture?type=large", "display_name": "SamyCha", "link": "https://stackoverflow.com/users/9153861/samycha"}, "edited": false, "score": 0, "creation_date": 1515597793, "post_id": 48190310, "comment_id": 83361390, "body": "Thks for your fast replies, But I still have the following issue:   NoMethodError in ReviewsController#create undefined method `password&#39; for nil:NilClass Extracted source (around line #27): def check_password     return @review.password == @product.reviewcode   end  end"}, {"owner": {"reputation": 75, "user_id": 9153861, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10155971858703554/picture?type=large", "display_name": "SamyCha", "link": "https://stackoverflow.com/users/9153861/samycha"}, "edited": false, "score": 0, "creation_date": 1515668111, "post_id": 48190310, "comment_id": 83391736, "body": "Thks Chester, but still not working :-(  And not so far to succeed...... Well...Without the condition: &quot;if check_password&quot; in my Review Controller /create action: The review is correctly created for the product. But if I add this condition it returns me: NoMethodError in ReviewsController#create       undefined method `password&#39; for nil:NilClass... (I don&#39;t use new method in my Review Controller: I display directly the form in my product show by calling &lt;%= render:&#39;reviews/form&#39; %&gt;)"}, {"owner": {"reputation": 458, "user_id": 6895995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056e4cb8e5efce7a2a872108206f8caa?s=128&d=identicon&r=PG&f=1", "display_name": "ChesterLaborde", "link": "https://stackoverflow.com/users/6895995/chesterlaborde"}, "reply_to_user": {"reputation": 75, "user_id": 9153861, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10155971858703554/picture?type=large", "display_name": "SamyCha", "link": "https://stackoverflow.com/users/9153861/samycha"}, "edited": false, "score": 0, "creation_date": 1515676901, "post_id": 48190310, "comment_id": 83396996, "body": "So if instead of calling check_password you run that bit of code directly on the create action it works?"}, {"owner": {"reputation": 75, "user_id": 9153861, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10155971858703554/picture?type=large", "display_name": "SamyCha", "link": "https://stackoverflow.com/users/9153861/samycha"}, "edited": false, "score": 0, "creation_date": 1515677795, "post_id": 48190310, "comment_id": 83397554, "body": "It is not working...even with integrating the condition directly in the create metod instead  of def check_password"}, {"owner": {"reputation": 458, "user_id": 6895995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056e4cb8e5efce7a2a872108206f8caa?s=128&d=identicon&r=PG&f=1", "display_name": "ChesterLaborde", "link": "https://stackoverflow.com/users/6895995/chesterlaborde"}, "reply_to_user": {"reputation": 75, "user_id": 9153861, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10155971858703554/picture?type=large", "display_name": "SamyCha", "link": "https://stackoverflow.com/users/9153861/samycha"}, "edited": false, "score": 0, "creation_date": 1515681147, "post_id": 48190310, "comment_id": 83399791, "body": "You have a new instance of review after that bit of code. As i sad before in your show method for product you should do somehting like <code>@review = @product.reviews.new</code> and pass it as a parameter to the form"}], "tags": [], "owner": {"reputation": 458, "user_id": 6895995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056e4cb8e5efce7a2a872108206f8caa?s=128&d=identicon&r=PG&f=1", "display_name": "ChesterLaborde", "link": "https://stackoverflow.com/users/6895995/chesterlaborde"}, "is_accepted": false, "score": 1, "last_activity_date": 1515603055, "last_edit_date": 1515603055, "creation_date": 1515596716, "answer_id": 48190310, "question_id": 48189288, "link": "https://stackoverflow.com/questions/48189288/add-a-password-validation-in-a-form-for-before-submitting-review-ruby-on-rails/48190310#48190310", "title": "Add a password validation in a form_for before submitting review (Ruby on Rails)", "body": "<p>I think the problem is that you are using unless.\nUnless is basically saying \"if not \", so in your code <br>\n<code>unless @review.password == @product.reviewcode</code> means <code>if @review.password != @product.reviewcode</code>. Additionally as <a href=\"https://stackoverflow.com/users/9104680/derek-hopper\">Derek Hopper</a> commented, you are setting the password alway to <code>nil</code>, I don't know if that's intended.</p>\n\n<p><code>reviews_controller.rb</code></p>\n\n<pre><code>class ReviewsController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def create\n    # @review.password = nil I think this should be deleted\n    if check_password\n      @review = current_user.reviews.new(review_params)\n      @review.save\n      redirect_to @review.product\n    else\n      render :create, notice: \"Le code n'est pas bon\"\n    end\n  end\n\nprivate\n\n  def review_params\n    params.require(:review).permit(:comment, :star, :product_id, :user_id, :password)\n  end\n\n  def set_product\n    @product = Product.find(params[:product_id, :reviewcode])\n  end\n\n  def check_password\n    return @review.password == @product.reviewcode\n  end\n\nend\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>As for you comment, I'm guessing you have another method in your <code>reviews_controller.rb</code> in which you \"call\" the view. In this method you should have something like this: </p>\n\n<pre><code>def new\n  @review = @product.reviews.new\n  #Use this @review insted of @product.reviews.new in the html file\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 9153861, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10155971858703554/picture?type=large", "display_name": "SamyCha", "link": "https://stackoverflow.com/users/9153861/samycha"}, "is_accepted": false, "score": 0, "last_activity_date": 1515778496, "creation_date": 1515778496, "answer_id": 48231344, "question_id": 48189288, "link": "https://stackoverflow.com/questions/48189288/add-a-password-validation-in-a-form-for-before-submitting-review-ruby-on-rails/48231344#48231344", "title": "Add a password validation in a form_for before submitting review (Ruby on Rails)", "body": "<p>Thk to: @ChesterLaborde , @Derek Hopper , @ inye\nSo here is the final issue. No need to create a method in the Product model. And new action is directly included in the Product Show then in the Review Controller just need to proceed this way (if I need for exemple a code equal to my product.price*10):</p>\n\n<pre><code>class ReviewsController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def create\n    @review = current_user.reviews.new(review_params)\n    if check_password\n      @review.save\n      redirect_to @review.product\n    else\n      redirect_to @review.product, notice: \"Le code est incorrect\"\n    end\n  end\n\n  private\n\n  def review_params\n    params.require(:review).permit(:comment, :star, :product_id, :user_id, :password)\n  end\n\n  def check_password\n  @product = Product.find(params[:product_id])\n    return @review.password == @product.price*10\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 9153861, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/10155971858703554/picture?type=large", "display_name": "SamyCha", "link": "https://stackoverflow.com/users/9153861/samycha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515778496, "creation_date": 1515593465, "last_edit_date": 1515607819, "question_id": 48189288, "link": "https://stackoverflow.com/questions/48189288/add-a-password-validation-in-a-form-for-before-submitting-review-ruby-on-rails", "title": "Add a password validation in a form_for before submitting review (Ruby on Rails)", "body": "<p>I m new on Ror.</p>\n\n<p>I would like to add a password_field in my form_for before creating a review for a specific product. This review.password should match with a product.reviewcode: </p>\n\n<ul>\n<li>if it matches the review is created for this product.</li>\n<li>if not you have a notification: \"Wrong password...Try again..\"</li>\n</ul>\n\n<p>I'm working on it for days, but impossible to do this feature on my app... :-( Any Ideas... Please :-)</p>\n\n<p>Here is my code:</p>\n\n<hr>\n\n<pre><code>views/reviews.form.html.erb:\n&lt;% if @reviews.present? %&gt;\nIl y a deja un commentaire.\n&lt;% else %&gt;\n&lt;%= form_for([@product, @product.reviews.new]) do |f| %&gt;\n&lt;div id=\"user_stars\"&gt;&lt;/div&gt;\n&lt;%= f.text_area :comment, rows: 3, class: \"form-control\" %&gt;\n&lt;%= f.hidden_field :product_id, value: @product.id %&gt;&lt;br&gt;\n\n&lt;%=f.label \"Mot de passe communiqu\u00e9 par le vendeur:\" %&gt;\n&lt;%=f.password_field :password %&gt;\n\n\n&lt;div class=\"actions\"&gt;\n  &lt;%= f.submit \"Evaluez\", class: \"btn btn-primary\" %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>reviews_controller.rb:\nclass ReviewsController &lt; ApplicationController\n before_action :authenticate_user!\n\n def create\n  @review.password = nil\n  unless @review.password == @product.reviewcode\n   @review = current_user.reviews.new(review_params)\n   @review.save\n   redirect_to @review.product\n else\n  render :create, notice: \"Le code n'est pas bon\"\n  end\nend\n\nprivate\n\ndef review_params\n  params.require(:review).permit(:comment, :star, :product_id, :user_id, :password)\nend\n\ndef set_product\n  @product = Product.find(params[:product_id, :reviewcode])\nend\n\nend\n</code></pre>\n\n<hr>\n\n<pre><code>product.rb:\nclass Product &lt; ApplicationRecord\n  belongs_to :user\n  has_many :photos\n  has_many :reservations\n  has_many :reviews\n\n  validates :category, presence: true\n  validates :state, presence: true\n  validates :color, presence: true\n  validates :brand, presence: true\n  validates :size, presence: true\n  validates :name, presence: true, length: { maximum: 25 }\n  validates :description, presence: true, length: { maximum: 70 }\n  validates :address, presence: true\n  validates :price, numericality: { only_integer: true, greater_than: 1 }\n  validates :status, inclusion: { in: [true, false] }\n  validates :reviewcode, presence: true\n\n  def reviewcode\n    reviewcode = \"1234\"\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>review.rb:\nclass Review &lt; ApplicationRecord\n  belongs_to :product\n  belongs_to :user\n\nvalidates :comment, presence: true\nvalidates :star, presence: true\nvalidates :product_id, presence: true\nvalidates :password, presence: true\nend\n</code></pre>\n"}, {"tags": ["ruby", "coding-style"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1515592854, "post_id": 48188925, "comment_id": 83358024, "body": "You could just use <a href=\"https://ruby-doc.org/core-2.5.0/Kernel.html#method-i-warn\" rel=\"nofollow noreferrer\"><code>Kernel#warn</code></a> I guess"}, {"owner": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 1, "creation_date": 1515592865, "post_id": 48188925, "comment_id": 83358034, "body": "What&#39;s wrong with adding a comment before the method? Also, a good practice is to add more details about a change you do in the codebase in the Git history. That way, it will stay with the project for a long time, and people can go back in history and see why a method was implemented in such a (slow) way. For example, take this <a href=\"https://github.com/rails/rails/pull/29685\" rel=\"nofollow noreferrer\">pull request</a> from Rails&#39; repo - the person that worked on the fix explained the problem clearly, showed benchmarks and the difference before/after the fix."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515594738, "post_id": 48188925, "comment_id": 83359255, "body": "Slower than what? Can you be more specific?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515595224, "post_id": 48188925, "comment_id": 83359627, "body": "You should note it in the method&#39;s documentation. For example, the documentation for Ruby&#39;s <a href=\"http://ruby-doc.org/core-2.5.0/Time.html\" rel=\"nofollow noreferrer\"><code>Time</code></a> class says: <i>&quot;When Bignum or Rational is used [...] Time works slower as when integer is used.&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1515644191, "creation_date": 1515644191, "answer_id": 48199666, "question_id": 48188925, "link": "https://stackoverflow.com/questions/48188925/best-practic-to-mark-slow-block-of-code-or-method-in-ruby/48199666#48199666", "title": "Best practic to mark slow block of code or method in Ruby?", "body": "<p>Profiler such as <a href=\"https://github.com/ruby-prof/ruby-prof\" rel=\"nofollow noreferrer\">https://github.com/ruby-prof/ruby-prof</a> is the standard way.</p>\n"}], "owner": {"reputation": 542, "user_id": 1064501, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5c83b9b945e2fbad3cd254dc98650679?s=128&d=identicon&r=PG", "display_name": "Sergey Blohin", "link": "https://stackoverflow.com/users/1064501/sergey-blohin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515644191, "creation_date": 1515592236, "last_edit_date": 1515644156, "question_id": 48188925, "link": "https://stackoverflow.com/questions/48188925/best-practic-to-mark-slow-block-of-code-or-method-in-ruby", "title": "Best practic to mark slow block of code or method in Ruby?", "body": "<p>I'd like to mark blocks of code and methods as being slow so that people understand that they work slowly (long).</p>\n\n<p>Is there a preferred way (or tools) to mark blocks of code and methods as being slow in Ruby? May be use special prefix/postfix in method name?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "templates"], "answers": [{"tags": [], "owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "is_accepted": true, "score": 2, "last_activity_date": 1515590583, "creation_date": 1515590583, "answer_id": 48188454, "question_id": 48188399, "link": "https://stackoverflow.com/questions/48188399/escape-template-characters-for-ror-generators/48188454#48188454", "title": "Escape template characters for RoR generators", "body": "<p>As soon as I created question i found the answer.</p>\n\n<p>the template should look like this </p>\n\n<pre><code>&lt;%%# Render list for XHR requests %&gt;\n&lt;%%= smart_listing_update :&lt;%= plural_table_name %&gt; %&gt;\n</code></pre>\n\n<p>Notice double <code>%%</code> at the beggining of the tag,. </p>\n"}], "owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 48188454, "answer_count": 1, "score": 1, "last_activity_date": 1515590583, "creation_date": 1515590370, "question_id": 48188399, "link": "https://stackoverflow.com/questions/48188399/escape-template-characters-for-ror-generators", "title": "Escape template characters for RoR generators", "body": "<p>I'm trying to persuade the template that tags that use a template language are not meant to be commands but as plain text.</p>\n\n<p>My output file should look like this (path: app/views/projects/index.js.erb):</p>\n\n<pre><code>&lt;%# Render list for XHR requests %&gt;\n&lt;%= smart_listing_update :projects %&gt;\n</code></pre>\n\n<p>where the <code>:projects</code> is a variable</p>\n\n<p>I have a template, which should generate this file(path: lib/templates/haml/scaffold/template.js.erb):</p>\n\n<pre><code>&lt;%# Render list for XHR requests %&gt;\n&lt;%= smart_listing_update :&lt;%= plural_table_name %&gt; %&gt;\n</code></pre>\n\n<p>I have 2 problems with this template</p>\n\n<ol>\n<li><code>&lt;%#</code> makes a comment, so the first line in output is invisible</li>\n<li><code>&lt;%= smart_listing_update</code> looks for variable, but i need to display it as a text</li>\n</ol>\n\n<p>Could anybody help me write <code>&lt;%=</code> and <code>&lt;%#</code> as it looks?</p>\n\n<p>With current template I'll end up with an error</p>\n\n<blockquote>\n  <p>/home/vagrant/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/erb.rb:896:in\n  `eval': (erb):5: syntax error, unexpected tOP_ASGN, expecting ')'\n  (SyntaxError) at(( smart_listing_update :&lt;%= plural_table_name\n  ).to_s); @o</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "file"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1515590399, "post_id": 48188346, "comment_id": 83356396, "body": "<code>xlsx</code> files and <code>zip</code> files have <b>exactly the same file structure</b>!!! The <i>only</i> difference is the extension name! Don&#39;t believe me? - Rename the file, and open it. So no, there is no way to distinguish between these particular &quot;file types&quot; other than looking at the extension."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1515590495, "post_id": 48188346, "comment_id": 83356466, "body": "Anyway, the concept you are looking at here is <i>reading the file&#39;s MIME-TYPE</i>. There are <a href=\"https://github.com/mime-types/ruby-mime-types\" rel=\"nofollow noreferrer\">various libraries</a> that do this; you don&#39;t need to make an external system call."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515594567, "post_id": 48188346, "comment_id": 83359127, "body": "What @TomLord said. These files adhere to <a href=\"https://en.wikipedia.org/wiki/Office_Open_XML\" rel=\"nofollow noreferrer\">Office Open XML</a>.  <i>&quot;[OOXML] is a zipped, XML-based file format developed by Microsoft for representing spreadsheets, charts, presentations and word processing documents.&quot;</i> This format which has been standardized to allow for reading and writing for these document types beyond Microsoft. Prior to this standard microsoft used things like <code>xls</code> and <code>doc</code> which were proprietary binary formats making it more difficult to share files with non-microsoft users."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1515594835, "post_id": 48188346, "comment_id": 83359338, "body": "Appropriate MIME Types can be found <a href=\"http://filext.com/faq/office_mime_types.php\" rel=\"nofollow noreferrer\">Here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1290, "user_id": 4066118, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EjVrc.jpg?s=128&g=1", "display_name": "Richa Sinha", "link": "https://stackoverflow.com/users/4066118/richa-sinha"}, "edited": false, "score": 0, "creation_date": 1522318447, "post_id": 48191279, "comment_id": 86113983, "body": "The file that you shared helped me a lot in finding the answer. Also there was a limitation on upgrading the file command as it was on its latest version available for RHEL7(OS on which the app is hosted). So I could not use this approach, so went ahead with Mimemagic."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1515599550, "creation_date": 1515599550, "answer_id": 48191279, "question_id": 48188346, "link": "https://stackoverflow.com/questions/48188346/how-to-distinguish-xlsx-and-docx-files-from-zip-archives/48191279#48191279", "title": "How to distinguish xlsx and docx files from zip archives?", "body": "<p>You have to update your <code>file</code> command (or its <em>magic</em> file).</p>\n\n<p>Recent versions do recognize <a href=\"https://github.com/file/file/blob/master/magic/Magdir/msooxml\" rel=\"nofollow noreferrer\">MSOOXML</a> files:</p>\n\n<pre><code>$ file -b test.docx\nMicrosoft Word 2007+\n\n$ file --version\nfile-5.32\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1290, "user_id": 4066118, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EjVrc.jpg?s=128&g=1", "display_name": "Richa Sinha", "link": "https://stackoverflow.com/users/4066118/richa-sinha"}, "is_accepted": true, "score": 1, "last_activity_date": 1522318478, "creation_date": 1522318478, "answer_id": 49553455, "question_id": 48188346, "link": "https://stackoverflow.com/questions/48188346/how-to-distinguish-xlsx-and-docx-files-from-zip-archives/49553455#49553455", "title": "How to distinguish xlsx and docx files from zip archives?", "body": "<p>I used <a href=\"https://github.com/minad/mimemagic\" rel=\"nofollow noreferrer\">Mimemagic Gem</a> and added custom magic(as it is called by the Gem) to identify xlsx, docx, and pptx file format. Also this does not relies on the file extension. </p>\n\n<p>Following are the list of magic that I added:</p>\n\n<pre><code>[['application/vnd.openxmlformats-officedocument.wordprocessingml.document.custom', [[0, \"PK\\x03\\x04\", [[30, '_rels/.rels', [[0..5000, 'word/']]]]]]],\n['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.custom', [[0, \"PK\\003\\004\", [[30, '_rels/.rels', [[0..5000, 'xl/']]]]]]],\n['application/vnd.openxmlformats-officedocument.presentationml.presentation.custom', [[0, \"PK\\003\\004\", [[30, '_rels/.rels', [[0..5000, 'ppt/']]]]]]],['application/vnd.openxmlformats-officedocument.wordprocessingml.document.custom', [[0, \"PK\\x03\\x04\", [[30, 'word/']]]]],\n['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.custom', [[0, \"PK\\003\\004\", [[30, 'xl/']]]]],\n['application/vnd.openxmlformats-officedocument.presentationml.presentation.custom', [[0, \"PK\\003\\004\", [[30, 'ppt/']]]]]].each do |magic|\n  MimeMagic.add(magic[0], magic: magic[1])\nend\n</code></pre>\n"}], "owner": {"reputation": 1290, "user_id": 4066118, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EjVrc.jpg?s=128&g=1", "display_name": "Richa Sinha", "link": "https://stackoverflow.com/users/4066118/richa-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 1, "accepted_answer_id": 49553455, "answer_count": 2, "score": 1, "last_activity_date": 1522318478, "creation_date": 1515590150, "last_edit_date": 1515600220, "question_id": 48188346, "link": "https://stackoverflow.com/questions/48188346/how-to-distinguish-xlsx-and-docx-files-from-zip-archives", "title": "How to distinguish xlsx and docx files from zip archives?", "body": "<p>I have a use case where I need to know the file type of a file to identify and blacklist the executables(exe,installers etc), archive files(zip, rar etc.). Therefore relying on the extension is not enough for me as the extension of a file can be changed but the file property will remain the same. I tried using the linux command:</p>\n\n<pre><code>file --b filename\n</code></pre>\n\n<p>The above solution is working perfectly with all the file types except the .xlsx and .docx file because the command is giving the following for the .xlsx and .docx</p>\n\n<blockquote>\n  <p>Zip archive data, at least v2.0 to extract</p>\n</blockquote>\n\n<p>And because of this I end up blacklisting the .xlsx and .docx file as well.</p>\n\n<p>Can anybody suggest me a way to get the file type without using the extension that works for the xlsx and docx as well.</p>\n"}, {"tags": ["ruby", "transactions", "broadcast", "bitcoin", "bitcoin-testnet"], "comments": [{"owner": {"reputation": 4924, "user_id": 2862719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yzhk5.png?s=128&g=1", "display_name": "m00am", "link": "https://stackoverflow.com/users/2862719/m00am"}, "edited": false, "score": 1, "creation_date": 1515591393, "post_id": 48188066, "comment_id": 83357027, "body": "Welcome to SO. I took the liberty to remove your rant. Question length restrictions are in place to encourage new users to provide enough information to make the question specific. Right now, I still do not 100% know what you are struggling with. Please add to your question what you are trying to achieve, what your code does and (if applicable) any error messages. This makes it a lot easier to answer your question."}, {"owner": {"reputation": 11, "user_id": 9198363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3OEGa.jpg?s=128&g=1", "display_name": "Ayan Nurbolat", "link": "https://stackoverflow.com/users/9198363/ayan-nurbolat"}, "reply_to_user": {"reputation": 4924, "user_id": 2862719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yzhk5.png?s=128&g=1", "display_name": "m00am", "link": "https://stackoverflow.com/users/2862719/m00am"}, "edited": false, "score": 0, "creation_date": 1515597133, "post_id": 48188066, "comment_id": 83360907, "body": "@m00am I am using bitcoin-ruby gem to make transaction. So, transaction created successfully, but during pushing it to network, I had an error : #Error sending transaction: Transaction 4a762238529450737b85ad481deae0e836e623afd63e04a29a5b90363c03&zwnj;&#8203;45fd has too high fees: 12372992."}, {"owner": {"reputation": 172, "user_id": 3252449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CF7Xg.jpg?s=128&g=1", "display_name": "m2pathan", "link": "https://stackoverflow.com/users/3252449/m2pathan"}, "edited": false, "score": 0, "creation_date": 1518584502, "post_id": 48188066, "comment_id": 84561521, "body": "@AyanNurbolat generally the transaction fee should be less that 0.1 BTC, and you are sending &quot;value = 50000 #0.0005 btc&quot; the remaining bitcoins are treated as transaction fee. So increase the amount value of transaction and try it."}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 3252449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CF7Xg.jpg?s=128&g=1", "display_name": "m2pathan", "link": "https://stackoverflow.com/users/3252449/m2pathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1518585509, "creation_date": 1518585509, "answer_id": 48780136, "question_id": 48188066, "link": "https://stackoverflow.com/questions/48188066/how-to-broadcast-raw-transaction-using-bitcoin-ruby/48780136#48780136", "title": "How to broadcast raw transaction using bitcoin-ruby?", "body": "<p>The fee of a transaction is just the difference between the input and the output value. In you case, your output value is 0.0005 BTC. If you choose an input which is larger than the output you want to send as well as the fee, you have to create a change output to send the rest back to your wallet as well, otherwise it will all go to the miners as fees. For example, if your input was 0.25 BTC, and you wanted to send 0.15 BTC and only pay 0.01 BTC fee, your transaction would need to have two outputs, one for 0.15 BTC, and one for 0.09 BTC back to an address you own, so that the total fee is just (0.25-(0.15+0.9) = 0.01)</p>\n"}, {"tags": [], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "is_accepted": false, "score": 0, "last_activity_date": 1554916748, "creation_date": 1554916748, "answer_id": 55618139, "question_id": 48188066, "link": "https://stackoverflow.com/questions/48188066/how-to-broadcast-raw-transaction-using-bitcoin-ruby/55618139#55618139", "title": "How to broadcast raw transaction using bitcoin-ruby?", "body": "<p>You can use <a href=\"https://github.com/yegor256/sibit\" rel=\"nofollow noreferrer\">sibit</a>, my Ruby gem:</p>\n\n<pre><code>require 'sibit'\nsibit = Sibit.new\npkey = sibit.generate\naddress = sibit.create(pkey)\nbalance = sibit.balance(address)\ntarget = sibit.create(pkey) # where to send coins to\nchange = sibit.create(pkey) # where the change will sent to\ntx = sibit.pay(pkey, 10_000_000, 'XL', [address], target, change)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9198363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3OEGa.jpg?s=128&g=1", "display_name": "Ayan Nurbolat", "link": "https://stackoverflow.com/users/9198363/ayan-nurbolat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 492, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1554916748, "creation_date": 1515589153, "last_edit_date": 1515591393, "question_id": 48188066, "link": "https://stackoverflow.com/questions/48188066/how-to-broadcast-raw-transaction-using-bitcoin-ruby", "title": "How to broadcast raw transaction using bitcoin-ruby?", "body": "<p>How to broadcast raw transaction using bitcoin-ruby?\nI used bitcoin-ruby gem from <a href=\"https://github.com/lian/bitcoin-ruby\" rel=\"nofollow noreferrer\">https://github.com/lian/bitcoin-ruby</a></p>\n\n<pre><code>    Bitcoin.network = :testnet\n\n    address=\"muLGqMS6tkqb9sBQ4sqeXjMzaV8rk8o3gv\"\n\n    url = \"https://testnet.blockexplorer.com/api/addr/#{address}\"\n    uri = URI(url)\n    response = Net::HTTP.get(uri)\n    if Connect.valid_json(response)\n      response = JSON.parse(response)\n      $transactions = response[\"transactions\"]\n    end\n\n    prev_hash = $transactions[0]\n\n    url = \"https://testnet.blockexplorer.com/api/rawtx/#{prev_hash}\"\n    uri = URI(url)\n    response = Net::HTTP.get(uri)\n    if Connect.valid_json(response)\n      response = JSON.parse(response)\n      response = response['rawtx'].to_s\n      $prev_tx = Bitcoin::P::Tx.new(response.htb)\n    end\n\n    prev_tx = $prev_tx\n    prev_tx_output_index = 0\n    value = 50000 #0.0005 btc\n\n    tx = Bitcoin::Protocol::Tx.new\n    tx.add_in Bitcoin::Protocol::TxIn.new(prev_tx.binary_hash, prev_tx_output_index, 0)\n\n    tx.add_out Bitcoin::Protocol::TxOut.value_to_address(value, \"msPHTrHSktDLMwPXcMYwWTqth3ZyykN17H\") # &lt;- dest address (our donation address)\n\n    # if all in and outputs are defined, start signing inputs.\n    key = Bitcoin.open_key(Connect.get_private_key) # &lt;- privkey\n    sig = Bitcoin.sign_data(key, tx.signature_hash_for_input(0, prev_tx))\n    tx.in[0].script_sig = Bitcoin::Script.to_signature_pubkey_script(sig, [key.public_key_hex].pack(\"H*\"))\n    #tx.in[0].add_signature_pubkey_script(sig, key.public_key_hex)\n\n    # finish check\n    tx = Bitcoin::Protocol::Tx.new( tx.to_payload )\n    p tx.verify_input_signature(0, prev_tx) == true\n    hex =  tx.to_payload.unpack(\"H*\")[0] # hex binary\n    puts hex.to_s\n#Error sending transaction: Transaction 4a762238529450737b85ad481deae0e836e623afd63e04a29a5b90363c0345fd has too high fees: 12372992.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "cookies", "login"], "answers": [{"comments": [{"owner": {"reputation": 13553, "user_id": 643500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c66ad2afcf08e4a22f7b3cf5ca7ebc2?s=128&d=identicon&r=PG", "display_name": "Hitham S. AlQadheeb", "link": "https://stackoverflow.com/users/643500/hitham-s-alqadheeb"}, "edited": false, "score": 2, "creation_date": 1515588067, "post_id": 48187681, "comment_id": 83355025, "body": "I was about to write the answer to read more.  Just focus on &quot;9.1.4 Two subtle bugs&quot;"}, {"owner": {"reputation": 645, "user_id": 2218297, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5a21b9c3b2b534548e0f20ca7de97a22?s=128&d=identicon&r=PG", "display_name": "B537B7725DC58715F6E6BFA7AFC20C", "link": "https://stackoverflow.com/users/2218297/b537b7725dc58715f6e6bfa7afc20c"}, "reply_to_user": {"reputation": 13553, "user_id": 643500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c66ad2afcf08e4a22f7b3cf5ca7ebc2?s=128&d=identicon&r=PG", "display_name": "Hitham S. AlQadheeb", "link": "https://stackoverflow.com/users/643500/hitham-s-alqadheeb"}, "edited": false, "score": 0, "creation_date": 1515588148, "post_id": 48187681, "comment_id": 83355069, "body": "Thanks @HithamS.AlQadheeb"}], "tags": [], "owner": {"reputation": 645, "user_id": 2218297, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5a21b9c3b2b534548e0f20ca7de97a22?s=128&d=identicon&r=PG", "display_name": "B537B7725DC58715F6E6BFA7AFC20C", "link": "https://stackoverflow.com/users/2218297/b537b7725dc58715f6e6bfa7afc20c"}, "is_accepted": true, "score": 1, "last_activity_date": 1515587948, "creation_date": 1515587948, "answer_id": 48187681, "question_id": 48187508, "link": "https://stackoverflow.com/questions/48187508/undefined-method-forget-for-nil-in-test-file-railstutorial-9-12/48187681#48187681", "title": "undefined method forget for nil in test file - RailsTutorial 9.12", "body": "<p>I noticed that I got ahead of myself in the tutorial and skipped a bit too far ahead by accident and added a second 'delete logout_path' to the test which was meant to demonstrate that the second call to delete logout_path in Listing 9.14 should raise an error due to the missing current_user. I just removed it and passed the test. I'll try to slow down as I continue through the tutorial :)</p>\n"}], "owner": {"reputation": 645, "user_id": 2218297, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5a21b9c3b2b534548e0f20ca7de97a22?s=128&d=identicon&r=PG", "display_name": "B537B7725DC58715F6E6BFA7AFC20C", "link": "https://stackoverflow.com/users/2218297/b537b7725dc58715f6e6bfa7afc20c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48187681, "answer_count": 1, "score": 3, "last_activity_date": 1515587948, "creation_date": 1515587250, "question_id": 48187508, "link": "https://stackoverflow.com/questions/48187508/undefined-method-forget-for-nil-in-test-file-railstutorial-9-12", "title": "undefined method forget for nil in test file - RailsTutorial 9.12", "body": "<p>I am new to rails so please forgive the following noob question and thanks in advance...</p>\n\n<p>I am following the <a href=\"https://www.railstutorial.org/book/advanced_login\" rel=\"nofollow noreferrer\">rails tutorial</a> however, once I got to section 9.12 where we add the forget logic to sessions_helper.rb, I get the below error which is confusing to me since I see the forget method defined properly. The error occurs when trying to run the users_login_test.rb file</p>\n\n<pre><code>Error:\nUsersLoginTest#test_login_with_valid_information_followed_by_logout:\nNoMethodError: undefined method `forget' for nil:NilClass\n    app/helpers/sessions_helper.rb:10:in `forget'\n    app/helpers/sessions_helper.rb:42:in `log_out'\n    app/controllers/sessions_controller.rb:18:in `destroy'\n    test/integration/users_login_test.rb:34:in `block in &lt;class:UsersLoginTest&gt;'\n</code></pre>\n\n<p>Here is my Sessions Helper:</p>\n\n<pre><code>module SessionsHelper\n\n  # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n  # Remembers a user in a persistent session.\n  def remember(user)\n    user.remember\n    cookies.permanent.signed[:user_id] = user.id\n    cookies.permanent[:remember_token] = user.remember_token\n  end\n\n  # Returns the user corresponding to the remember token cookie.\n  def current_user\n    if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    elsif (user_id = cookies.signed[:user_id])\n      user = User.find_by(id: user_id)\n      if user &amp;&amp; user.authenticated?(cookies[:remember_token])\n        log_in user\n        @current_user = user\n      end\n    end\n  end\n\n  # Returns true if the user is logged in, false otherwise.\n  def logged_in?\n    !current_user.nil?\n  end\n\n  # Forgets a persistent session.\n  def forget(user)\n    user.forget\n    cookies.delete(:user_id)\n    cookies.delete(:remember_token)\n  end\n\n  # Logs out the current user.\n  def log_out\n    forget(current_user)\n    session.delete(:user_id)\n    @current_user = nil\n  end\nend\n</code></pre>\n\n<p>Here is my user.rb:</p>\n\n<pre><code>    class User &lt; ApplicationRecord\n  attr_accessor :remember_token\n  before_save { self.email = email.downcase }\n  validates :name,  presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }\n\n  # Returns the hash digest of the given string.\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  # Returns a random token.\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  # Remembers a user in the database for use in persistent sessions.\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(remember_token))\n  end\n\n  # Returns true if the given token matches the digest.\n  def authenticated?(remember_token)\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\nend\n</code></pre>\n\n<p>Here is my failing testfile: </p>\n\n<pre><code>    require test_helper\n\nclass UsersLoginTest &lt; ActionDispatch::IntegrationTest\n\n def setup\n    @user = users(:michael)\n end\n\n test \"login with invalid information\" do\n    get login_path\n    assert_template 'sessions/new'\n    post login_path, params: { session: { email: \"\", password: \"\" } }\n    assert_template 'sessions/new'\n    assert_not flash.empty?\n    get root_path\n    assert flash.empty?\n  end\n\n test \"login with valid information followed by logout\" do\n    get login_path\n    post login_path, params: { session: { email:    @user.email,\n                                          password: 'password' } }\n    assert is_logged_in?\n    assert_redirected_to @user\n    follow_redirect!\n    assert_template 'users/show'\n    assert_select \"a[href=?]\", login_path, count: 0\n    assert_select \"a[href=?]\", logout_path\n    assert_select \"a[href=?]\", user_path(@user)\n    delete logout_path\n    assert_not is_logged_in?\n    assert_redirected_to root_url\n    # Simulate a user clicking logout in a second window.\n    delete logout_path\n    follow_redirect!\n    assert_select \"a[href=?]\", login_path\n    assert_select \"a[href=?]\", logout_path,      count: 0\n    assert_select \"a[href=?]\", user_path(@user), count: 0\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 2230, "user_id": 6337957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1177d893bf3115edf0119cf56e7220?s=128&d=identicon&r=PG", "display_name": "Greg Navis", "link": "https://stackoverflow.com/users/6337957/greg-navis"}, "edited": false, "score": 0, "creation_date": 1515588078, "post_id": 48187312, "comment_id": 83355030, "body": "What&#39;s your Ruby and Rails version? It works in Ruby 2.4.1p111 and Rails 5.1.3."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 2230, "user_id": 6337957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1177d893bf3115edf0119cf56e7220?s=128&d=identicon&r=PG", "display_name": "Greg Navis", "link": "https://stackoverflow.com/users/6337957/greg-navis"}, "edited": false, "score": 1, "creation_date": 1515588281, "post_id": 48187312, "comment_id": 83355155, "body": "@GregNavis Are you sure?? One thing I found is that if you run <code>&quot;10000.000%&quot;.sub(...)</code> <b>first</b>, then <code>$1</code> gets set. So, <code>number_to_percentage(10000).sub(...)</code> works <i>if</i> you run that first method <b>first</b>!"}, {"owner": {"reputation": 4897, "user_id": 159550, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/34205585521ce1c24635ee233a9f4390?s=128&d=identicon&r=PG", "display_name": "valodzka", "link": "https://stackoverflow.com/users/159550/valodzka"}, "edited": false, "score": 0, "creation_date": 1515588325, "post_id": 48187312, "comment_id": 83355175, "body": "ruby 2.3.1 and rails  5.1.2"}, {"owner": {"reputation": 2230, "user_id": 6337957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1177d893bf3115edf0119cf56e7220?s=128&d=identicon&r=PG", "display_name": "Greg Navis", "link": "https://stackoverflow.com/users/6337957/greg-navis"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515599241, "post_id": 48187312, "comment_id": 83362469, "body": "Good point, @TomLord. This is exactly what I did."}], "answers": [{"comments": [{"owner": {"reputation": 4897, "user_id": 159550, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/34205585521ce1c24635ee233a9f4390?s=128&d=identicon&r=PG", "display_name": "valodzka", "link": "https://stackoverflow.com/users/159550/valodzka"}, "edited": false, "score": 0, "creation_date": 1515588268, "post_id": 48187695, "comment_id": 83355147, "body": "Thank , i also found way with \\1 but still very curious why original codes isn&#39;t working (but working with literal!)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 4897, "user_id": 159550, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/34205585521ce1c24635ee233a9f4390?s=128&d=identicon&r=PG", "display_name": "valodzka", "link": "https://stackoverflow.com/users/159550/valodzka"}, "edited": false, "score": 0, "creation_date": 1515589082, "post_id": 48187695, "comment_id": 83355657, "body": "@valodzka Edited."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1515589651, "last_edit_date": 1515589651, "creation_date": 1515588020, "answer_id": 48187695, "question_id": 48187312, "link": "https://stackoverflow.com/questions/48187312/rails-number-to-percentage-and-sub-weird-behaviour/48187695#48187695", "title": "Rails number_to_percentage and sub weird behaviour", "body": "<p>The key difference is:</p>\n\n<pre><code>\"10000.000%\".class #=&gt; String\nnumber_to_percentage(10000).class # =&gt; ActiveSupport::SafeBuffer\n</code></pre>\n\n<p><code>ActiveSupport::SafeBuffer</code> is a subclass of <code>String</code>, and contains the concept of <code>UNSAFE_STRING_METHODS</code> (including <code>sub</code> and <code>gsub</code>). This concept is useful for rails views (which is where <code>number_to_percentage</code> is normally used!), in relation to security; preventing XSS vulnerabilities.</p>\n\n<p>A workaround would be to explicitly convert the variable to a <code>String</code>:</p>\n\n<pre><code>number_to_percentage(10000).to_str.sub(/(\\d\\d)\\d\\d\\d(?:[.,]\\d+)?\\%$/){ \"#{$1}k%\" }\n=&gt; \"10k%\"\n</code></pre>\n\n<p>(Note that it's <strong><code>to_str</code></strong>, not <code>to_s</code>! <code>to_s</code> just returns <code>self</code>, i.e. an instance of <code>ActiveSupport::SafeBuffer</code>; whereas <code>to_str</code> returns a regular <code>String</code>.)</p>\n\n<p><a href=\"https://makandracards.com/makandra/11171-how-to-fix-gsub-on-safebuffer-objects\" rel=\"nofollow noreferrer\"><code>This article</code></a>, and <a href=\"https://github.com/rails/rails/issues/1555\" rel=\"nofollow noreferrer\"><code>this rails issue</code></a> go into more detail on the issue.</p>\n\n<p>Alternatively, you could write your code like this, and it works as expected:</p>\n\n<pre><code>number_to_percentage(10000).sub(/(\\d\\d)\\d\\d\\d(?:[.,]\\d+)?%$/, '\\1k%')\n#=&gt; \"10k%\"\n</code></pre>\n\n<p>I would actually prefer this approach, since you are no longer relying on modification to the (non-threadsafe) global variable.</p>\n"}, {"tags": [], "owner": {"reputation": 284, "user_id": 8060293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e181c9a20f3d9825fdeae4aef73236?s=128&d=identicon&r=PG", "display_name": "Alexis", "link": "https://stackoverflow.com/users/8060293/alexis"}, "is_accepted": false, "score": 3, "last_activity_date": 1515588450, "creation_date": 1515588450, "answer_id": 48187850, "question_id": 48187312, "link": "https://stackoverflow.com/questions/48187312/rails-number-to-percentage-and-sub-weird-behaviour/48187850#48187850", "title": "Rails number_to_percentage and sub weird behaviour", "body": "<p>Because number_to_percentage returns an ActiveSupport::SafeBuffer and not a String.</p>\n\n<pre><code>helper.number_to_percentage(10000).class # =&gt; ActiveSupport::SafeBuffer\n</code></pre>\n\n<p>ActiveSupport::SafeBuffer (which is a subclass of String) does some magic around unsafe methods like sub. That's why you can have some surprises.</p>\n"}], "owner": {"reputation": 4897, "user_id": 159550, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/34205585521ce1c24635ee233a9f4390?s=128&d=identicon&r=PG", "display_name": "valodzka", "link": "https://stackoverflow.com/users/159550/valodzka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 48187695, "answer_count": 2, "score": 2, "last_activity_date": 1515589651, "creation_date": 1515586581, "last_edit_date": 1515587282, "question_id": 48187312, "link": "https://stackoverflow.com/questions/48187312/rails-number-to-percentage-and-sub-weird-behaviour", "title": "Rails number_to_percentage and sub weird behaviour", "body": "<p>I'm trying to replace big % numbers to shorters versions (10000% -> 10k%). Generally code works, but if <code>number_to_percentage</code> used it stop working (with <em>TOTALY SAME</em> string). </p>\n\n<pre><code>Loading development environment (Rails 5.1.2)\n2.3.1 :001 &gt; \"10000.000%\".bytes\n=&gt; [49, 48, 48, 48, 48, 46, 48, 48, 48, 37]    \n2.3.1 :002 &gt; helper.number_to_percentage(10000).bytes\n=&gt; [49, 48, 48, 48, 48, 46, 48, 48, 48, 37] # totally same\n2.3.1 :003 &gt; helper.number_to_percentage(10000).sub(/(\\d\\d)\\d\\d\\d(?:[.,]\\d+)?\\%$/){ \"#{$1}k%\" }\n=&gt; \"k%\"  # doesn't work\n2.3.1 :004 &gt; \"10000.000%\".sub(/(\\d\\d)\\d\\d\\d(?:[.,]\\d+)?\\%$/){ \"#{$1}k%\" }\n=&gt; \"10k%\" # works\n</code></pre>\n\n<p>What can cause this? Any ideas?</p>\n"}, {"tags": ["android", "ruby-on-rails", "json", "ruby", "google-plus-signin"], "answers": [{"tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1515589205, "creation_date": 1515589205, "answer_id": 48188078, "question_id": 48186210, "link": "https://stackoverflow.com/questions/48186210/cannot-load-google-api-client-on-ruby-on-rails/48188078#48188078", "title": "Cannot load Google API Client on Ruby on Rails", "body": "<p><a href=\"https://github.com/google/google-api-ruby-client/blob/master/lib/google/api_client/client_secrets.rb\" rel=\"nofollow noreferrer\">It seems</a>, <code>ClientSecrets.load</code> accepts optional argument which is config filename path. So I believe it's okay if you specify filename directly:</p>\n\n<pre><code>Google::APIClient::ClientSecrets.load(\"#{Rails.root}/config/client_secrets.json\")\n</code></pre>\n"}], "owner": {"reputation": 382, "user_id": 3308003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AiKlE.png?s=128&g=1", "display_name": "rony", "link": "https://stackoverflow.com/users/3308003/rony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515589205, "creation_date": 1515582920, "question_id": 48186210, "link": "https://stackoverflow.com/questions/48186210/cannot-load-google-api-client-on-ruby-on-rails", "title": "Cannot load Google API Client on Ruby on Rails", "body": "<p>I want to verify user profile from Google Authorization code sent by android client, to do that, we have to download client_secrets.json and put it inside our rails app. Just like this tutorial <a href=\"https://developers.google.com/identity/protocols/OAuth2WebServer\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/protocols/OAuth2WebServer</a></p>\n\n<p>But when I try to follow this step</p>\n\n<pre><code>require 'google/apis/drive_v2'\nrequire 'google/api_client/client_secrets'\n\nclient_secrets = Google::APIClient::ClientSecrets.load\nauth_client = client_secrets.to_authorization\nauth_client.update!(\n  :scope =&gt; 'https://www.googleapis.com/auth/drive.metadata.readonly',\n  :redirect_uri =&gt; 'http://www.example.com/oauth2callback',\n  :additional_parameters =&gt; {\n    \"access_type\" =&gt; \"offline\",         # offline access\n    \"include_granted_scopes\" =&gt; \"true\"  # incremental auth\n  }\n)\n</code></pre>\n\n<p>Rails throws an error said \"<strong>No client_secrets.json filename supplied and/or could not be found in search path.</strong>\"\nThe errors shows up even though I have insert client_secrets.json inside config/client_secrets.json</p>\n\n<p>Do you know what's the problem or what's the alternative for this solution, thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515583675, "post_id": 48186014, "comment_id": 83352424, "body": "Please show us some code. What have you tried so far?"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515584029, "post_id": 48186014, "comment_id": 83352602, "body": "Hi @TomLord, I&#39;ve edited my answer to show you"}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1515584310, "post_id": 48186534, "comment_id": 83352739, "body": "Hi @Manishh, thanks for your answer. Yep, devise provide  uniqueness on email, but that&#39;s the problem. I would like to check if the User which have email is already registred. And if not, Edit this existing User with the params of the registration. I&#39;ve put some code that I&#39;ve tried to give you better explaination. If you have any solution to do that would be great"}, {"owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "reply_to_user": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1515584664, "post_id": 48186534, "comment_id": 83352917, "body": "So you can search for email instead of having a column. consider that <code>user = User.where(email: &#39;test@email.com&#39;)</code> and <code>if user.present?</code> do your stuff. else create user with it and do your stuff.."}], "tags": [], "owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "is_accepted": false, "score": 1, "last_activity_date": 1515585078, "last_edit_date": 1515585078, "creation_date": 1515583996, "answer_id": 48186534, "question_id": 48186014, "link": "https://stackoverflow.com/questions/48186014/registration-if-email-already-exist-with-devise/48186534#48186534", "title": "Registration if email already exist with devise", "body": "<p>I think devise already provide uniqueness on email. Apart from this instead of having another column you can put validation of <a href=\"https://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_uniqueness_of\" rel=\"nofollow noreferrer\">uniqueness</a> also <a href=\"http://guides.rubyonrails.org/active_record_validations.html#uniqueness\" rel=\"nofollow noreferrer\">here</a>. Apart from this you can also set database level <a href=\"https://stackoverflow.com/questions/1449459/how-do-i-make-a-column-unique-and-index-it-in-a-ruby-on-rails-migration\">uniqueness constraint</a>. </p>\n\n<p>Update :\nhave a look at the below code.</p>\n\n<pre><code>user = User.where(email: 'test@email.com').first_or_initialize\nif user.new_record?\n  user.save\n  Do your stuff.\nelse\n  user.update_attributes(attributes goes here)\n  and do your other stuff\nend\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515585078, "creation_date": 1515582360, "last_edit_date": 1515583968, "question_id": 48186014, "link": "https://stackoverflow.com/questions/48186014/registration-if-email-already-exist-with-devise", "title": "Registration if email already exist with devise", "body": "<p>I've a variable registered(boolean) in my table User. Because when a connected user want to use an Email, if this email is not existing into the table User, a new line is created in the Users (only with the variable email, and registered = false).\nSo I would like that when a user registers, he will not be blocked if(email exist &amp;&amp; registered == false).\nIn this case, the password will be replaced, and the variable registered change to true.</p>\n\n<p>I would like to run something like that :</p>\n\n<pre><code>def create\n    @user_registred = User.find(email: params[user: :email])\n    if @user_registred.any?\n      if @user_registred.registred == false\n        @user = User.update(params[:user])\n      else \n        notice: \"Email already taked\"\n      end\n    else\n      @user = User.new(params[:user])\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "firefox", "selenium-webdriver", "watir", "geckodriver"], "answers": [{"tags": [], "owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "is_accepted": false, "score": 1, "last_activity_date": 1515581530, "creation_date": 1515581530, "answer_id": 48185771, "question_id": 48185770, "link": "https://stackoverflow.com/questions/48185770/how-to-take-full-page-screenshots-with-watir-and-geckodriver-firefox/48185771#48185771", "title": "How to take full page screenshots with Watir and geckodriver + Firefox?", "body": "<p>Using Watir's <code>.execute_script</code>, it is possible to repeatedly take screenshots of the viewport while moving the scroll position. It is then possible to stitch images together using MiniMagick.</p>\n\n<p>I developed <a href=\"https://github.com/samnissen/watir-screenshot-stitch\" rel=\"nofollow noreferrer\">the watir-screenshot-stitch gem</a> to encapsulate my best approach to solving this problem, though it comes with caveats, which you can read about there. It is also memory intensive and can be slow.</p>\n\n<p>This is not a true full-page screenshot solution, and I would gladly accept any alternative approaches that improve on this.</p>\n"}, {"comments": [{"owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "edited": false, "score": 1, "creation_date": 1516476236, "post_id": 48186436, "comment_id": 83707088, "body": "Thank you for sharing this approach. I was able to add this to my Ruby gem."}, {"owner": {"reputation": 482, "user_id": 1099834, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d35ddb762640943879766f54ba6765e2?s=128&d=identicon&r=PG", "display_name": "Tybs", "link": "https://stackoverflow.com/users/1099834/tybs"}, "edited": false, "score": 0, "creation_date": 1533113826, "post_id": 48186436, "comment_id": 90222571, "body": "What version of HTML2Canvas was used for this solution? I only get parsing errors using this approach (or timeouts if I manually fix the parsing issues)."}, {"owner": {"reputation": 1677, "user_id": 3501502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd16ffa4debd8196786c490e06c398f?s=128&d=identicon&r=PG", "display_name": "Anton Angelov", "link": "https://stackoverflow.com/users/3501502/anton-angelov"}, "edited": false, "score": 0, "creation_date": 1533127189, "post_id": 48186436, "comment_id": 90231202, "body": "the version from 6 months ago. It worked perfectly with it."}], "tags": [], "owner": {"reputation": 1677, "user_id": 3501502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd16ffa4debd8196786c490e06c398f?s=128&d=identicon&r=PG", "display_name": "Anton Angelov", "link": "https://stackoverflow.com/users/3501502/anton-angelov"}, "is_accepted": false, "score": 1, "last_activity_date": 1515583720, "creation_date": 1515583720, "answer_id": 48186436, "question_id": 48185770, "link": "https://stackoverflow.com/questions/48185770/how-to-take-full-page-screenshots-with-watir-and-geckodriver-firefox/48186436#48186436", "title": "How to take full page screenshots with Watir and geckodriver + Firefox?", "body": "<p>I solved the problem in C#. But the solution I guess can be rewritten on any language. I used a JavaScript library called HTML2Canvas to generate the full page screenshots. Here is the C# code:</p>\n\n<pre><code>[Test]\npublic void TakingHTML2CanvasFullPageScreenshot()\n{\n    using (var driver = new ChromeDriver())\n    {\n        driver.Manage().Timeouts().PageLoad = TimeSpan.FromSeconds(5);\n        driver.Navigate().GoToUrl(@\"https://automatetheplanet.com\");\n        IJavaScriptExecutor js = driver;\n        var html2canvasJs = File.ReadAllText($\"{GetAssemblyDirectory()}html2canvas.js\");\n        js.ExecuteScript(html2canvasJs);\n        string generateScreenshotJS = @\"function genScreenshot () {\n                                            var canvasImgContentDecoded;\n                                            html2canvas(document.body, {\n                                                onrendered: function (canvas) {                                          \n                                                    window.canvasImgContentDecoded = canvas.toDataURL(\"\"image/png\"\");\n                                            }});\n                                        }\n                                        genScreenshot();\";\n        js.ExecuteScript(generateScreenshotJS);\n        var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));\n        wait.IgnoreExceptionTypes(typeof(InvalidOperationException));\n        wait.Until(\n            wd =&gt;\n            {\n                string response = (string)js.ExecuteScript\n                    (\"return (typeof canvasImgContentDecoded === 'undefined' || canvasImgContentDecoded === null)\");\n                if (string.IsNullOrEmpty(response))\n                {\n                    return false;\n                }\n                return bool.Parse(response);\n            });\n        wait.Until(wd =&gt; !string.IsNullOrEmpty((string)js.ExecuteScript(\"return canvasImgContentDecoded;\")));\n        var pngContent = (string)js.ExecuteScript(\"return canvasImgContentDecoded;\");\n        pngContent = pngContent.Replace(\"data:image/png;base64,\", string.Empty);\n        byte[] data = Convert.FromBase64String(pngContent);\n        var tempFilePath = Path.GetTempFileName().Replace(\".tmp\", \".png\");\n        Image image;\n        using (var ms = new MemoryStream(data))\n        {\n            image = Image.FromStream(ms);\n        }\n        image.Save(tempFilePath, ImageFormat.Png);\n    }\n}\n</code></pre>\n\n<p>You can find more examples and explanations in the <a href=\"https://automatetheplanet.com/full-page-screenshots-webdriver-html2canvas/\" rel=\"nofollow noreferrer\">article</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "is_accepted": true, "score": 0, "last_activity_date": 1594373581, "creation_date": 1594373581, "answer_id": 62831347, "question_id": 48185770, "link": "https://stackoverflow.com/questions/48185770/how-to-take-full-page-screenshots-with-watir-and-geckodriver-firefox/62831347#62831347", "title": "How to take full page screenshots with Watir and geckodriver + Firefox?", "body": "<p>It is now possible to do this in Firefox, employing a geckodriver feature. As far as I know, this feature is not baked into Selenium / probably not a part of the W3C spec.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>require 'watir'\n\nbrowser = Watir::Browser.new :firefox\nbridge = browser.driver.session_storage.instance_variable_get(:@bridge)\n\nserver_uri = bridge.instance_variable_get(:@http).instance_variable_get(:@server_url)\nsid = bridge.instance_variable_get(:@session_id)\ndriver_path = &quot;session/#{sid}/moz/screenshot/full&quot;\nrequest_url = server_uri.to_s + driver_path\n\nurl = URI.parse(request_url)\nreq = Net::HTTP::Get.new(request_url)\nraw = Net::HTTP.start(url.host, url.port) {|http| http.request(req) }.body\n\nbase64_screenshot = JSON.parse(raw, symbolize_names: true)[:value]\n</code></pre>\n<p>This approach is also now an option in <a href=\"https://github.com/samnissen/watir-screenshot-stitch#using-geckodriver\" rel=\"nofollow noreferrer\">the watir-screenshot-stitch gem</a>:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>require 'watir-screenshot-stitch'\nb = Watir::Browser.new :firefox\nb.goto &quot;https://github.com/mozilla/geckodriver/issues/570&quot;\nbase64_screenshot = b.base64_geckodriver\n</code></pre>\n"}], "owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 0, "accepted_answer_id": 62831347, "answer_count": 3, "score": 2, "last_activity_date": 1594373581, "creation_date": 1515581530, "question_id": 48185770, "link": "https://stackoverflow.com/questions/48185770/how-to-take-full-page-screenshots-with-watir-and-geckodriver-firefox", "title": "How to take full page screenshots with Watir and geckodriver + Firefox?", "body": "<p>I upgraded my Watir / Firefox automation stack to the latest version, and added geckodriver with it. I was surprised to see that now screenshots are of the viewport only by default. </p>\n\n<pre><code>require 'watir'\nrequire 'mini_magick'\n\nb = Watir::Browser.new :firefox\nb.goto \"https://daringfireball.net\"\nbase = b.screenshot.base64\nblob = Base64.decode64(base)\nimage = MiniMagick::Image.read(blob)\nimage.height\n =&gt; 1760 # macOS 'Retina' resolution doubling\nb.execute_script \"return window.innerHeight\"\n =&gt; 880 # 880 * 2 = 1760\nb.execute_script \"return document.documentElement.scrollHeight\"\n =&gt; 34692\n</code></pre>\n\n<p><a href=\"https://github.com/mozilla/geckodriver/issues/570\" rel=\"nofollow noreferrer\">geckodriver does not have any API for full page screenshots, though reintroducing this feature is planned (on an infinite timescale).</a></p>\n\n<p>How can I take screenshots of the full page with Watir driving Firefox without rolling back my environment?</p>\n"}, {"tags": ["ruby", "http", "http-headers", "webrick"], "answers": [{"comments": [{"owner": {"reputation": 9182, "user_id": 3066467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/VQ7Yr.jpg?s=128&g=1", "display_name": "Guntram Blohm", "link": "https://stackoverflow.com/users/3066467/guntram-blohm"}, "edited": false, "score": 0, "creation_date": 1515605209, "post_id": 48188050, "comment_id": 83366319, "body": "I made a little change so the Expires header is in the format that&#39;s expected by the client in case someone else comes here later to copy-paste. But indeed, this is exactly what I needed. Thank you!"}], "tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 4, "last_activity_date": 1515605061, "last_edit_date": 1515605061, "creation_date": 1515589077, "answer_id": 48188050, "question_id": 48185460, "link": "https://stackoverflow.com/questions/48185460/how-to-add-code-to-set-headers-to-a-simple-ruby-webrick-command-line/48188050#48188050", "title": "How to add code to set headers to a simple ruby webrick command line?", "body": "<p>Ok. Put this into a file <em>server.rb</em> for example:</p>\n\n<pre><code>require 'webrick'                                                                                                          \n\nclass Server &lt; WEBrick::HTTPServer                                                                                         \n  def service(req, res)                                                                                                    \n    super                                                                                                                  \n    one_hour = 60 * 60                                                                                                     \n    t = Time.now.gmtime + one_hour\n    res['Expires'] = t.strftime(\"%a, %d %b %Y %H:%M:%S GMT\")\n  end                                                                                                                      \nend                                                                                                                        \n\nroot = File.expand_path('.')                                                                                               \nserver = Server.new(Port: 8000, DocumentRoot: root)                                                                        \n\ntrap('INT') { server.shutdown } # Ctrl-C to stop                                                                                            \n\nserver.start \n</code></pre>\n\n<p>Then run this in console:</p>\n\n<pre><code>ruby server.rb\n</code></pre>\n\n<p>It will serve files list from current directory.</p>\n"}], "owner": {"reputation": 9182, "user_id": 3066467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/VQ7Yr.jpg?s=128&g=1", "display_name": "Guntram Blohm", "link": "https://stackoverflow.com/users/3066467/guntram-blohm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 48188050, "answer_count": 1, "score": 2, "last_activity_date": 1515605061, "creation_date": 1515580671, "question_id": 48185460, "link": "https://stackoverflow.com/questions/48185460/how-to-add-code-to-set-headers-to-a-simple-ruby-webrick-command-line", "title": "How to add code to set headers to a simple ruby webrick command line?", "body": "<p>When I need a test web server that can serve a few files from some directory, I really like the simplicity of</p>\n\n<p><code>ruby -run -e httpd . -p 8888</code></p>\n\n<p>then browse to <code>localhost:8888</code>.</p>\n\n<p>However, sometimes I'd like to add a tiny little bit to that, for example, set a specific mime type for a specific extension (I can edit <code>/usr/lib/ruby/2.3.0/webrick/httputils.rb</code>, but I'd rather not mess with system files), or add an <code>Expires:</code> header.</p>\n\n<p>It seems like adding a header isn't that complicated, for example, looking at <a href=\"https://www.thecodingforums.com/threads/setting-expires-http-response-header.822995/\" rel=\"nofollow noreferrer\">https://www.thecodingforums.com/threads/setting-expires-http-response-header.822995/</a>.</p>\n\n<p>However, I have <em>zero</em> knowledge about ruby, so I have no clue about how to add that to my command line. I guess it's just \"create a file that has a subclass, pull it in, and tell ruby to use the subclass\", but well .. that answer is 3 steps beyond me.</p>\n\n<p>So, I'd be grateful for an answer that says \"Put <code>this</code> into a file, then add <code>that</code> to your command line\", with copy/pasteable examples of <code>this</code> and <code>that</code>.</p>\n"}, {"tags": ["ruby", "oracle", "activerecord", "oracle11g"], "owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517563815, "creation_date": 1515580450, "last_edit_date": 1517563815, "question_id": 48185395, "link": "https://stackoverflow.com/questions/48185395/investigate-if-activerecord-connection-pool-in-ruby-process-leak-pool", "title": "Investigate if ActiveRecord Connection Pool in Ruby process leak Pool", "body": "<p>I have configured database.yml as below</p>\n\n<pre><code>development:\n  adapter: oracle_enhanced\n  host: 10.80.70.58\n  port: 1521\n  database: TTSDB\n  username: TTSADMIN\n  password: xxxxx\n  encoding: utf8\n  pool: 20\n</code></pre>\n\n<p>I have spawned ruby processes which give me error for connection timeout\n<code>[ExceptionHandler] Exception ActiveRecord::ConnectionTimeoutError: could not obtain a database connection within 5.000 seconds (waited 5.029 seconds)</code> I have 8 of these ruby processes which does some computation, these processes use the configuration from database.yml.</p>\n\n<p>Now when I see sessions in v$session among 78 sessions I find, 71 are <code>INACTIVE</code> and only 7 are in <code>ACTIVE</code>. I found out this number from \nthe query is given below</p>\n\n<p><code>select count(*) from v$session where schema name = 'TTSADMIN' and osuser = 'tuts0001' and status = 'INACTIVE'\n</code></p>\n\n<p>Now the question </p>\n\n<ol>\n<li>Does my ruby process leaking ActiveRecord::Connection pool(as described in this <a href=\"https://bibwild.wordpress.com/2014/07/17/activerecord-concurrency-in-rails4-avoid-leaked-connections/\" rel=\"nofollow noreferrer\">link</a>), due to which I do not have any connection in ActiverecordConnectionPool which is why I am receiving connection timeout error?</li>\n<li>If Not Why am I seeing 71 sessions <code>INVALID</code> in <code>v$session</code> table? I have checked the docs from this <a href=\"https://docs.oracle.com/cloud/latest/db112/REFRN/dynviews_3016.htm#REFRN30223\" rel=\"nofollow noreferrer\">link</a></li>\n</ol>\n"}, {"tags": ["ruby", "chef-infra", "require"], "answers": [{"comments": [{"owner": {"reputation": 1208, "user_id": 1994642, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6d10dec11b43697624be6ce3b87c6a2c?s=128&d=identicon&r=PG", "display_name": "stiller_leser", "link": "https://stackoverflow.com/users/1994642/stiller-leser"}, "edited": false, "score": 0, "creation_date": 1515669589, "post_id": 48197365, "comment_id": 83392649, "body": "Can&#39;t share any code here yet, but what it is is a ressource to install and configure Kubernetes on a multi os basis. In this ressource I have various action, e.g. install, configure (for general configuration), configure_master (for master configuration), configure_node (for node configuration). I guess I could just create sub-ressources for the seperate tasks. Or would you rather recomment recipes for such a thing?"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1515624581, "creation_date": 1515624581, "answer_id": 48197365, "question_id": 48185051, "link": "https://stackoverflow.com/questions/48185051/split-chef-resource-in-multiple-files/48197365#48197365", "title": "Split chef resource in multiple files", "body": "<p>No, you cannot. Ruby doesn't offer that as a feature. That said, a single resource being that long is almost certainly a code smell, can you show what kind of code this is?</p>\n"}], "owner": {"reputation": 1208, "user_id": 1994642, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6d10dec11b43697624be6ce3b87c6a2c?s=128&d=identicon&r=PG", "display_name": "stiller_leser", "link": "https://stackoverflow.com/users/1994642/stiller-leser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515624581, "creation_date": 1515579362, "question_id": 48185051, "link": "https://stackoverflow.com/questions/48185051/split-chef-resource-in-multiple-files", "title": "Split chef resource in multiple files", "body": "<p>I have a fairly long chef resource and would like to split its actions into multiple files, so I would end up with a file resource_main.rb, resource_action_configure.rb, resource_action_load.rb and so forth. Is something like this achievable in Chef?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "edited": false, "score": 0, "creation_date": 1515578336, "post_id": 48184672, "comment_id": 83349187, "body": "Means you have to add your params to the body of the request."}, {"owner": {"reputation": 546, "user_id": 3287048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36b40607bbc3612711620959345d87c?s=128&d=identicon&r=PG&f=1", "display_name": "Arun Mathew Kurian", "link": "https://stackoverflow.com/users/3287048/arun-mathew-kurian"}, "edited": false, "score": 1, "creation_date": 1515578385, "post_id": 48184672, "comment_id": 83349218, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29103568/redirect-user-to-external-url-with-post-method-and-params\">Redirect user to external url with post method and params</a>"}, {"owner": {"reputation": 187, "user_id": 9129624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16834aa4400776c8805844dc0a497fc?s=128&d=identicon&r=PG", "display_name": "L11", "link": "https://stackoverflow.com/users/9129624/l11"}, "edited": false, "score": 0, "creation_date": 1515578473, "post_id": 48184672, "comment_id": 83349270, "body": "it works perfectly fine"}], "owner": {"reputation": 1, "user_id": 8730945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d31e251bc9bac5046ebb93b2c4c82b54?s=128&d=identicon&r=PG&f=1", "display_name": "Hrvoje Jesenovic", "link": "https://stackoverflow.com/users/8730945/hrvoje-jesenovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515578196, "creation_date": 1515578196, "question_id": 48184672, "link": "https://stackoverflow.com/questions/48184672/how-do-i-redirect-with-post-params", "title": "How do I redirect with POST params?", "body": "<p>I'm integrating a credit card payment system to my Rails app. In their documentation it says that I have to redirect the user to the payment form with POST parameters. </p>\n\n<p><strong>Here is what it says in the documentation:</strong></p>\n\n<p>When creating an post please use UTF8 encoding.</p>\n\n<p>When a merchant redirects a buyer to the Corvus Form Service he must redirect to the following url:</p>\n\n<ul>\n<li>For testing purposes: \n<a href=\"https://testcps.corvus.hr/redirect/\" rel=\"nofollow noreferrer\">https://testcps.corvus.hr/redirect/</a></li>\n</ul>\n\n<p>With the following POST parameters:</p>\n\n<pre><code>target=_top&amp;mode=form&amp;store_id=101&amp;order_number=1233&amp;language=hr&amp;currency=H\nRK&amp;amount=123.54&amp;cart=2xLCDTV&amp;hash=6cb317d8b6ade738cb9dc02cae220b3bd2b4bc82\n&amp;require_complete=false\n</code></pre>\n\n<p>The redirect url must look like:</p>\n\n<p><a href=\"https://testcps.corvus.hr/redirect/\" rel=\"nofollow noreferrer\">https://testcps.corvus.hr/redirect/</a></p>\n\n<p>The redirect url must <strong>not</strong> look like:</p>\n\n<pre><code>https://testcps.corvus.hr/redirect/?target=_top&amp;mode=form&amp;store_id=101&amp;orde\nr_number=1233&amp;language=hr&amp;currency=HRK&amp;amount=123.54&amp;cart=2xLCDTV&amp;hash=c9a5\n3c3525e557da\n</code></pre>\n\n<p>Do not use the GET method to redirect a user to CorvusPay payment form.</p>\n\n<p>The redirect of a user does not require the use of an SSL certificate.</p>\n"}, {"tags": ["ruby", "win32ole"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1515577658, "post_id": 48184452, "comment_id": 83348744, "body": "It&#39;s not very clear what you&#39;re trying to do. You can&#39;t load a 32bit DLL into a 64bit process (or vice-versa)."}, {"owner": {"reputation": 674, "user_id": 1180245, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fe9bbe4d1ae33dab5d1caca5c5e242ae?s=128&d=identicon&r=PG", "display_name": "nimish", "link": "https://stackoverflow.com/users/1180245/nimish"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1515608801, "post_id": 48184452, "comment_id": 83368277, "body": "Mat, I tried to fork out a process and used 64 bit ruby to launch my app which registered the dll using regsrv32 from the system32 folder and then load the dll using Win32OLE. I will again try this tomorrow and revert back"}], "owner": {"reputation": 674, "user_id": 1180245, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fe9bbe4d1ae33dab5d1caca5c5e242ae?s=128&d=identicon&r=PG", "display_name": "nimish", "link": "https://stackoverflow.com/users/1180245/nimish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515577555, "creation_date": 1515577555, "question_id": 48184452, "link": "https://stackoverflow.com/questions/48184452/register-and-load-dll-in-64-bit", "title": "Register and load DLL in 64 bit", "body": "<p>I have two variants of DLLs 32 bit and 64 bit .. I registered them using <code>regsrv</code> and load them using <code>win32ole</code> API and register the methods .. </p>\n\n<p>Now this works for me if I am registering a 32 bit DLL with a 32 bit Ruby process and 64bit DLL with a 64 bit ruby process </p>\n\n<p>But my end goal is to use one variant 32 or 64 and register the DLL and get the result ..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "soap", "savon"], "comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1515573689, "post_id": 48182523, "comment_id": 83346201, "body": "I started reading <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/openssl/rdoc/OpenSSL/Buffering.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.0/libdoc/openssl/rdoc/OpenSSL/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "is_accepted": true, "score": 0, "last_activity_date": 1516716596, "creation_date": 1516716596, "answer_id": 48403749, "question_id": 48182523, "link": "https://stackoverflow.com/questions/48182523/eoferror-end-of-file-reached-calling-a-soap-api-via-savon-ruby-client/48403749#48403749", "title": "EOFError: end of file reached calling a SOAP API via Savon ruby client", "body": "<p>The problem was <code>@additional_attributes</code> was being <code>nil</code> while the WSDL was expecting an array.</p>\n"}], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 48403749, "answer_count": 1, "score": 2, "last_activity_date": 1516716596, "creation_date": 1515570297, "last_edit_date": 1515599286, "question_id": 48182523, "link": "https://stackoverflow.com/questions/48182523/eoferror-end-of-file-reached-calling-a-soap-api-via-savon-ruby-client", "title": "EOFError: end of file reached calling a SOAP API via Savon ruby client", "body": "<p>The mentioned error comes calling an API behind a firewall but and I am trying to access the API from an EngineYard instance. The EngineYard instances IPs are white listed in their firewall.</p>\n\n<pre><code>client = Savon.client(wsdl: \"https://amagentostore.com/api/v2_soap?wsdl\", read_timeout: 300, follow_redirects: true)\nproducts = client.\n          call(:dcapimodule_product_list, message: { session_id: session_id, additional_attributes: @additional_attributes }).\n          body[:dcapimodule_product_list_response][:products][:item]\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>File \"/usr/lib64/ruby/2.3.0/openssl/buffering.rb\" line 178 in sysread_nonblock\nFile \"/usr/lib64/ruby/2.3.0/openssl/buffering.rb\" line 178 in read_nonblock\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/excon-0.59.0/lib/excon/socket.rb\" line 46 in readline\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/excon-0.59.0/lib/excon/response.rb\" line 63 in parse\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/excon-0.59.0/lib/excon/middlewares/response_parser.rb\" line 7 in response_call\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/excon-0.59.0/lib/excon/connection.rb\" line 389 in response\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/excon-0.59.0/lib/excon/connection.rb\" line 253 in request\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/excon-0.59.0/lib/excon/connection.rb\" line 314 in post\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/httpi-2.4.2/lib/httpi/adapter/excon.rb\" line 25 in request\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/httpi-2.4.2/lib/httpi.rb\" line 161 in request\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/httpi-2.4.2/lib/httpi.rb\" line 133 in post\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/savon-2.11.2/lib/savon/operation.rb\" line 94 in block in call_with_logging\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/savon-2.11.2/lib/savon/request_logger.rb\" line 12 in log\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/savon-2.11.2/lib/savon/operation.rb\" line 94 in call_with_logging\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/savon-2.11.2/lib/savon/operation.rb\" line 54 in call\nFile \"/data/feed_champion/shared/bundled_gems/ruby/2.3.0/gems/savon-2.11.2/lib/savon/client.rb\" line 36 in call\nFile \"/data/feed_champion/releases/20180110042633/app/services/magento/product.rb\" line 84 in products\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku", "query-performance"], "comments": [{"owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "edited": false, "score": 0, "creation_date": 1549305312, "post_id": 48181562, "comment_id": 95847157, "body": "You have a typo in your example, which may be part of the problem. You are missing a closing parenthesis before your <code>.first</code>/<code>.last</code> calls. Should look like this: <code>Bucket.where({issued_date: nil, bucket_type: &#39;PR&#39;}).first</code>"}, {"owner": {"reputation": 713, "user_id": 5648840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be04e1b63b846039df362ee78fde9ada?s=128&d=identicon&r=PG&f=1", "display_name": "tkhuynh", "link": "https://stackoverflow.com/users/5648840/tkhuynh"}, "reply_to_user": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "edited": false, "score": 0, "creation_date": 1549404587, "post_id": 48181562, "comment_id": 95888750, "body": "@Andrew good catch it was just a typo when I typed in the question."}], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 5648840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be04e1b63b846039df362ee78fde9ada?s=128&d=identicon&r=PG&f=1", "display_name": "tkhuynh", "link": "https://stackoverflow.com/users/5648840/tkhuynh"}, "edited": false, "score": 0, "creation_date": 1515569178, "post_id": 48181821, "comment_id": 83344027, "body": "Thanks for your response. <code>Bucket.where({issued_date: nil, bucket_type: &#39;PR&#39;}.first</code> is equivalent to <code>SELECT  &quot;buckets&quot;.* FROM &quot;buckets&quot; WHERE &quot;buckets&quot;.&quot;bucket_type&quot; = $1 AND &quot;buckets&quot;.&quot;issued_date&quot; IS NULL  ORDER BY &quot;buckets&quot;.&quot;id&quot; ASC LIMIT 1  [[&quot;bucket_type&quot;, &quot;PR&quot;]]</code>  and same for <code>.last</code> the order will become <code>DESC</code>."}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "reply_to_user": {"reputation": 713, "user_id": 5648840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be04e1b63b846039df362ee78fde9ada?s=128&d=identicon&r=PG&f=1", "display_name": "tkhuynh", "link": "https://stackoverflow.com/users/5648840/tkhuynh"}, "edited": false, "score": 0, "creation_date": 1515569310, "post_id": 48181821, "comment_id": 83344099, "body": "I know, have a look at the mariaDB part of the first code block of my answer. <code>limit</code> will remove the &quot;useless&quot; <code>ORDER BY</code>."}, {"owner": {"reputation": 713, "user_id": 5648840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be04e1b63b846039df362ee78fde9ada?s=128&d=identicon&r=PG&f=1", "display_name": "tkhuynh", "link": "https://stackoverflow.com/users/5648840/tkhuynh"}, "edited": false, "score": 0, "creation_date": 1515570003, "post_id": 48181821, "comment_id": 83344412, "body": "surprisingly when i remove ORDER BY the query time is longer :( as I did try <code>SELECT buckets.* FROM buckets WHERE issued_date IS NULL and bucket_type = &#39;PR&#39; LIMIT 1</code>. This <code>SELECT buckets.* FROM buckets WHERE issued_date IS NULL and bucket_type = &#39;PR&#39; ORDER BY id DESC LIMIT 1</code> is still the winner"}], "tags": [], "owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "is_accepted": false, "score": 2, "last_activity_date": 1515567521, "last_edit_date": 1515567521, "creation_date": 1515567184, "answer_id": 48181821, "question_id": 48181562, "link": "https://stackoverflow.com/questions/48181562/rails-activerecord-where-clause-with-first-vs-last-in-local-vs-production/48181821#48181821", "title": "Rails ActiveRecord where clause with .first vs .last in local vs production", "body": "<p>I can't really tell you then answer of the first question, but for the second,\nwell, you should use <code>limit</code>.</p>\n\n<p>Lets have a look at the difference:</p>\n\n<pre><code>User.where(is_disabled: 0).first\n# Oracle\nSELECT * FROM ( \n  SELECT  \"USERS\".* FROM \"USERS\" WHERE \"USERS\".\"IS_DISABLED\" = :a1 \n  ORDER BY \"USERS\".\"ID\" ASC \n) WHERE ROWNUM &lt;= :a2\n# MariaDB\nSELECT  `users`.* FROM `users` WHERE `users`.`is_disabled` = 0 \nORDER BY `users`.`id` ASC LIMIT 1\n</code></pre>\n\n<p>you see in oracle first all users are selected, and then the query is wrapped to only select the first. This is of course bad, MySQL/MariaDB doesn't do that. but sorts by the user_id (well rails does not MariaDB)</p>\n\n<pre><code>User.where(is_disabled: 0).limit(1)\n# Oracle\nSELECT  \"USERS\".* FROM \"USERS\" WHERE \"USERS\".\"IS_DISABLED\" = :a1 \nAND ROWNUM &lt;= :a2 \n#MariaDB\nSELECT  `users`.* FROM `users` WHERE `users`.`is_disabled` = 1 LIMIT 1\n</code></pre>\n\n<p>Here in Oracle only one user gets selected from the start, which is faster.\nMariaDB does not sort the users which is also faster.</p>\n\n<p>P.S. This can maybe change depending on the used Database, but <code>limit</code> is the way to go anyway. But your question 1 is not solvable as long as we don't know the used database. Furthermore, this should be splitted in two questions</p>\n"}], "owner": {"reputation": 713, "user_id": 5648840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be04e1b63b846039df362ee78fde9ada?s=128&d=identicon&r=PG&f=1", "display_name": "tkhuynh", "link": "https://stackoverflow.com/users/5648840/tkhuynh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549404522, "creation_date": 1515566002, "last_edit_date": 1549404522, "question_id": 48181562, "link": "https://stackoverflow.com/questions/48181562/rails-activerecord-where-clause-with-first-vs-last-in-local-vs-production", "title": "Rails ActiveRecord where clause with .first vs .last in local vs production", "body": "<p>I use Rails 5 and Postgres. I have a table name <code>buckets</code>, none of the columns are indexed. On my local machine I create 55,000 dummy record. I only need to get one record with has bucket_type is equal PR and issued_date is nil (there are 7 different bucket_type such as PR, CA, US, EU, VN, BU, and GY), so I try 2 different query one with <code>.first</code> and one with <code>.last</code> to see which one performs faster.</p>\n\n<p><code>Bucket.where({issued_date: nil, bucket_type: 'PR'}).first</code> and this query take about 1.5ms</p>\n\n<p><code>Bucket.where({issued_date: nil, bucket_type: 'PR'}).last</code> and this query take about 6.5ms</p>\n\n<p>However when on production (Heroku), with 2.1 million record in buckets table, the result come out opposite:</p>\n\n<p><code>Bucket.where({issued_date: nil, bucket_type: 'PR'}).first</code> and this query take about 750ms</p>\n\n<p><code>Bucket.where({issued_date: nil, bucket_type: 'PR'}).last</code> and this query take about 150ms</p>\n\n<p>I have 2 questions:</p>\n\n<ol>\n<li>Why the performance of <code>.first</code> and <code>.last</code> after <code>where</code> clause is different on local vs on production?</li>\n<li>Is there any better way than above query to get one record with has bucket_type is equal PR and issued_date is nil <strong>without having to add any index</strong> to either <code>bucket_type</code> or <code>issued_date</code>, or both columns?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "search"], "owner": {"reputation": 1433, "user_id": 703997, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c4bda24c22a7e56894feb140e6b79c77?s=128&d=identicon&r=PG&f=1", "display_name": "Shruthi R", "link": "https://stackoverflow.com/users/703997/shruthi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1515663029, "creation_date": 1515563818, "last_edit_date": 1515663029, "question_id": 48181138, "link": "https://stackoverflow.com/questions/48181138/rails-5-how-to-search-a-string-as-per-the-order-which-we-enter", "title": "Rails 5 - How to search a string as per the order which we enter?", "body": "<p>In rails 5, I am using <code>searchkick</code> gem for the first time, I want a search result for auto-complete list as per the letter which I enter.</p>\n\n<p>\"Cleanliness\", \"Taste\", \"Service\" these are data which I want to show as a suggestions(list)</p>\n\n<p>Now the current search is working like,</p>\n\n<p>When <code>misspellings: false</code>, if I type \"c\" then only \"Cleanliness\" will show.</p>\n\n<p>When <code>misspellings: 2</code>, if I type \"c\" then all 3 \"Cleanliness\", \"Taste\", \"Service\" will show.</p>\n\n<p>I want to show first \"Cleanliness\" and then \"Service\"</p>\n\n<p>In model,</p>\n\n<pre><code>searchkick word_start: [:name], index_name: -&gt; { \"#{name.tableize}-#{Rails.application.secrets.elasticsearch_index}-#{I18n.locale}\" }\ninclude ReIndex\n</code></pre>\n\n<p>In controller,</p>\n\n<pre><code>Model.search(params[:attribute], fields: [:name], match: :word_start, misspellings: 2).results\n</code></pre>\n\n<p>In Gemfile.lock,</p>\n\n<pre><code>searchkick (2.3.0)\nelasticsearch (5.0.4)\n</code></pre>\n\n<p>Working scenario should be like,</p>\n\n<ul>\n<li><p>If I type \"c\" then 'Cleanliness' should come first then 'Service' should display. Two values should display in auto-completion list,\nright now it is fetching only 'Cleanliness' because of first letter \"c\". </p></li>\n<li><p>In 'Service', \"c\" is not taking for search, it should fetch the same.</p></li>\n<li><p>If I type \"a\" then no results, actually it should show \"Taste\" because \"a\" is present over here.</p></li>\n</ul>\n\n<p>Please help me to solve this issue. Also let me know how this <code>misspellings</code> works in detail.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 1544, "user_id": 3214471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfbjq.jpg?s=128&g=1", "display_name": "Aswin Ramesh", "link": "https://stackoverflow.com/users/3214471/aswin-ramesh"}, "edited": false, "score": 0, "creation_date": 1515561848, "post_id": 48180627, "comment_id": 83341472, "body": "If you are trying for image upload, then you need to pass it as <code>FormData</code> plz refer <a href=\"https://stackoverflow.com/a/8244082/3214471\">stackoverflow.com/a/8244082/3214471</a>"}, {"owner": {"reputation": 47, "user_id": 4283721, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100002364228187/picture?type=large", "display_name": "Thilanka Umayanga Jayarathna", "link": "https://stackoverflow.com/users/4283721/thilanka-umayanga-jayarathna"}, "reply_to_user": {"reputation": 1544, "user_id": 3214471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfbjq.jpg?s=128&g=1", "display_name": "Aswin Ramesh", "link": "https://stackoverflow.com/users/3214471/aswin-ramesh"}, "edited": false, "score": 0, "creation_date": 1515562471, "post_id": 48180627, "comment_id": 83341656, "body": "@AswinRamesh I&#39;m not trying to upload images it&#39;s fine using carrierwave. I&#39;ll try to store that uploaded images in javascript array and pass that array to rails controller using ajax"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1515575193, "post_id": 48180627, "comment_id": 83347111, "body": "<a href=\"https://stackoverflow.com/questions/19447435/ajax-upload-image#20462576\" title=\"ajax upload image%2320462576\">stackoverflow.com/questions/19447435/ajax-upload-image#20462&zwnj;&#8203;576</a>"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 4283721, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100002364228187/picture?type=large", "display_name": "Thilanka Umayanga Jayarathna", "link": "https://stackoverflow.com/users/4283721/thilanka-umayanga-jayarathna"}, "is_accepted": true, "score": 0, "last_activity_date": 1515575864, "creation_date": 1515575864, "answer_id": 48183937, "question_id": 48180627, "link": "https://stackoverflow.com/questions/48180627/how-to-pass-javascript-image-array-to-rails-controller-using-ajax/48183937#48183937", "title": "how to pass javascript image array to rails controller using ajax", "body": "<p>I fixed my issue. remove contentType &amp; processData works fine for me. Thanks all who comment ideas for support </p>\n"}], "owner": {"reputation": 47, "user_id": 4283721, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100002364228187/picture?type=large", "display_name": "Thilanka Umayanga Jayarathna", "link": "https://stackoverflow.com/users/4283721/thilanka-umayanga-jayarathna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 48183937, "answer_count": 1, "score": 0, "last_activity_date": 1515575864, "creation_date": 1515560787, "last_edit_date": 1515562618, "question_id": 48180627, "link": "https://stackoverflow.com/questions/48180627/how-to-pass-javascript-image-array-to-rails-controller-using-ajax", "title": "how to pass javascript image array to rails controller using ajax", "body": "<p>view</p>\n\n<pre><code>&lt;div class=\"top-main-section-area\"&gt;\n   &lt;div id=\"upload-area\" class=\"uploader1\"  onclick=\"$('#post_image').click()\"&gt;\n      &lt;div class=\"message\" id=\"slider-message\"&gt;\n         &lt;center&gt;\n            &lt;font color=\"#808080\"&gt;click here to upload sliderimages&lt;/font&gt;\n         &lt;/center&gt;\n      &lt;/div&gt;\n      &lt;%= f.file_field :images , array: true , type:'file' ,:onchange =&gt; 'readURL(this)',class:'slide-img',multiple: true, id:'files' %&gt;\n      &lt;img id=\"slide_image\" src=\"#\" alt=\"image\" style=\"display: none;\" class=\"slide_image\" /&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>js file</p>\n\n<pre><code>window.onload = function() {\n    var array = [];\n    document.getElementById('files').addEventListener('change', handleFileSelect, false);\n\n    function handleFileSelect(evt) {\n\n        var count = 0;\n        console.log(\"hariii\");\n        var files = evt.target.files;\n        // Loop through the FileList and render image files as thumbnails.\n        for (var i = 0, f; f = files[i]; i++) {\n            count++;\n            // Only process image files.\n            if (!f.type.match('image.*')) {\n                continue;\n            }\n\n            var reader = new FileReader();\n\n            // Closure to capture the file information.\n            reader.onload = (function(theFile) {\n                return function(e) {\n                    // Render thumbnail.\n                    var span = document.createElement('span');\n\n\n                    span.innerHTML = [\n\n                        '&lt;img style=\"height: 75px; border: 1px solid #000; margin: 5px\" src=\"',\n                        e.target.result,\n                        '\" title=\"', escape(theFile.name),\n                        '\"/&gt;'\n                    ].join('');\n\n                    array.push(theFile.name);\n\n                    document.getElementById('thumbnail').insertBefore(span, null);\n                };\n            })(f);\n\n            // Read in the image file as a data URL.\n            reader.readAsDataURL(f);\n            //console.log(array);\n        }\n        //console.log(count);\n\n        //console.log(array);\n\n        return array;\n\n\n\n\n    }\n\n\n    $(function() {\n        $('#slider-submit').on('click', function() {\n\n            //console.log(array)\n\n            console.log(JSON.stringify(array));\n\n            $.ajax({\n                type: \"POST\",\n                url: \"/usr_vendor_website/slidecreate\",\n                dataType: \"json\",\n                data: {\n                    A: JSON.stringify(array)\n                },\n                processData: false,\n                contentType: 'application/json;',\n                success: function(result) {\n                    console.log('ok');\n                    //alert(\"Item scuessfully added to the Cart\");\n\n                }\n            })\n\n\n        });\n\n    })\n\n}\n</code></pre>\n\n<p>rails method access line</p>\n\n<pre><code>@usr_vendor_web_slide.images = params[:A]\n</code></pre>\n\n<p>I try to store rails uploaded images in javascript array and pass this array to rails controller. ajax part gives success result in console log but in rails controller got nil object. I cannot identify what is the issue of this.  My target is carrierwave upload images store in jquery array and pass it in to postgresql array column using rails controller.appreciate your ideas and helps.</p>\n"}, {"tags": ["ruby", "google-api", "gmail-api"], "answers": [{"comments": [{"owner": {"reputation": 2714, "user_id": 531677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fef2d4be2097d10e2fbe652dd1c71ea5?s=128&d=identicon&r=PG", "display_name": "brianrhea", "link": "https://stackoverflow.com/users/531677/brianrhea"}, "edited": false, "score": 0, "creation_date": 1515562126, "post_id": 48180500, "comment_id": 83341554, "body": "Thank you! <code>gmail.list_user_threads(&#39;me&#39;, &quot;include_spam_trash&quot;: false, &quot;label_ids&quot;: [&#39;Label_69&#39;])</code> is the fix I needed."}, {"owner": {"reputation": 2714, "user_id": 531677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fef2d4be2097d10e2fbe652dd1c71ea5?s=128&d=identicon&r=PG", "display_name": "brianrhea", "link": "https://stackoverflow.com/users/531677/brianrhea"}, "edited": false, "score": 0, "creation_date": 1515594831, "post_id": 48180500, "comment_id": 83359333, "body": "Out of curiosity, when you say, &quot;Document says it takes one obligatory argument, and several optional keyword arguments&quot;, how do you infer that from the documentation?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 2714, "user_id": 531677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fef2d4be2097d10e2fbe652dd1c71ea5?s=128&d=identicon&r=PG", "display_name": "brianrhea", "link": "https://stackoverflow.com/users/531677/brianrhea"}, "edited": false, "score": 0, "creation_date": 1515642715, "post_id": 48180500, "comment_id": 83380162, "body": "It is not inferring. You can say for sure. (Keyword) arguments without a default value are obligatory. Those with a default value are optional."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1515559880, "creation_date": 1515559880, "answer_id": 48180500, "question_id": 48180442, "link": "https://stackoverflow.com/questions/48180442/wrong-number-of-arguments-from-gmail-api-when-requesting-list-user-threads/48180500#48180500", "title": "wrong number of arguments from Gmail API when requesting list_user_threads", "body": "<p>Document says it takes one obligatory argument, and several optional keywords arguments. However, you are passing three ordinary arguments, just as the error message says.</p>\n"}], "owner": {"reputation": 2714, "user_id": 531677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fef2d4be2097d10e2fbe652dd1c71ea5?s=128&d=identicon&r=PG", "display_name": "brianrhea", "link": "https://stackoverflow.com/users/531677/brianrhea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 48180500, "answer_count": 1, "score": 0, "last_activity_date": 1515559880, "creation_date": 1515559448, "question_id": 48180442, "link": "https://stackoverflow.com/questions/48180442/wrong-number-of-arguments-from-gmail-api-when-requesting-list-user-threads", "title": "wrong number of arguments from Gmail API when requesting list_user_threads", "body": "<p>I am successfully authenticating with the API, as I can request messages, add labels, etc. However, when trying to use <code>list_user_threads</code> I am clearly misunderstanding the API.</p>\n\n<p>See the method here:\n<a href=\"http://www.rubydoc.info/github/google/google-api-ruby-client/Google%2FApis%2FGmailV1%2FGmailService%3Alist_user_threads\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/google/google-api-ruby-client/Google%2FApis%2FGmailV1%2FGmailService%3Alist_user_threads</a></p>\n\n<p>When I execute my code:</p>\n\n<pre><code>gmail = Google::Apis::GmailV1::GmailService.new\ngmail.authorization = current_user.token.fresh_token\nthreads = gmail.list_user_threads('me', false, ['Label_69'])\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>ArgumentError: wrong number of arguments (given 3, expected 1)\n</code></pre>\n\n<p>Any help with understanding how I am misreading the code and passing the arguments incorrectly is greatly appreciated.</p>\n"}, {"tags": ["ruby", "makefile", "compilation", "rbenv"], "answers": [{"comments": [{"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "edited": false, "score": 1, "creation_date": 1588764771, "post_id": 48180387, "comment_id": 109022540, "body": "AFAICS <code>ruby</code> defaults to <a href=\"https://github.com/ruby/ruby/blob/v2_6_6/configure.ac#L227\" rel=\"nofollow noreferrer\"><code>-O3</code></a> and <a href=\"https://github.com/ruby/ruby/blob/v2_6_6/configure.ac#L655\" rel=\"nofollow noreferrer\"><code>-ggdb3</code></a> (which is equivalent to <code>-g3</code>). Before finishing <code>.&#47;configure</code> reports which options it&#39;s going to use (<code>CFLAGS</code>, <code>optflags</code>, <code>debugflags</code>). The <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gcc/Debugging-Options.html\" rel=\"nofollow noreferrer\">latter</a> is fine for debugging, as for the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">former</a> it&#39;s best to build with <code>-Og</code>. To use that run <code>.&#47;configure optflags=-Og</code>."}], "tags": [], "owner": {"reputation": 27866, "user_id": 66725, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b56c8754ce3d1b04690ccab04a8522b?s=128&d=identicon&r=PG&f=1", "display_name": "horseyguy", "link": "https://stackoverflow.com/users/66725/horseyguy"}, "is_accepted": false, "score": 5, "last_activity_date": 1515559063, "creation_date": 1515559063, "answer_id": 48180387, "question_id": 48180110, "link": "https://stackoverflow.com/questions/48180110/how-to-compile-ruby-from-source-with-debugging-symbols-on-osx/48180387#48180387", "title": "How to compile ruby from source with debugging symbols on osx?", "body": "<p>I figured it out in the end, you do this:</p>\n\n<blockquote>\n  <p>CFLAGS=\"-O0 -ggdb\" ./configure </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1588930284, "creation_date": 1588930284, "answer_id": 61676080, "question_id": 48180110, "link": "https://stackoverflow.com/questions/48180110/how-to-compile-ruby-from-source-with-debugging-symbols-on-osx/61676080#61676080", "title": "How to compile ruby from source with debugging symbols on osx?", "body": "<p>I recently needed to build <code>ruby</code> inside a <code>docker</code> container. Here's what I did:</p>\n\n<p><code>1.sh</code>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\nset -eux\napk add build-base autoconf bison linux-headers git ruby zlib-dev openssl-dev readline-dev libffi-dev gdbm-dev\ngit clone https://github.com/ruby/ruby\ncd ruby\ngit checkout v2_6_6\nautoconf\n./configure optflags=-Og\nmake install\n</code></pre>\n\n<pre><code>$ docker run --rm -itv $PWD:/app alpine:3.11 sh\n/ # /app/1.sh\n</code></pre>\n"}], "owner": {"reputation": 27866, "user_id": 66725, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b56c8754ce3d1b04690ccab04a8522b?s=128&d=identicon&r=PG&f=1", "display_name": "horseyguy", "link": "https://stackoverflow.com/users/66725/horseyguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1588930284, "creation_date": 1515556863, "last_edit_date": 1515605941, "question_id": 48180110, "link": "https://stackoverflow.com/questions/48180110/how-to-compile-ruby-from-source-with-debugging-symbols-on-osx", "title": "How to compile ruby from source with debugging symbols on osx?", "body": "<p>I'm trying to compile Ruby from source with debugging symbols. I am not using <code>rbenv</code> or <code>rvm</code>, etc.</p>\n\n<p>I have already tried </p>\n\n<blockquote>\n  <p>./configure optflags=\"-O0\" debugflags=\"-g3 -ggdb\"</p>\n</blockquote>\n\n<p>To no avail :( (the debugger claims it has no symbols)</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "hash", "lambda"], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 4119004, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-AYhjTWVrGTc/AAAAAAAAAAI/AAAAAAAAAN0/u_1BqARfLDg/photo.jpg?sz=128", "display_name": "Conor O&#39;Brien", "link": "https://stackoverflow.com/users/4119004/conor-obrien"}, "edited": false, "score": 0, "creation_date": 1515631204, "post_id": 48179968, "comment_id": 83377706, "body": "This does not entirely solve the problem, as <code>arity</code> cannot distinguish between <code>lambda { |*args, **opts| ... }</code> and <code>lambda { |*args| ... }</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 895, "user_id": 4119004, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-AYhjTWVrGTc/AAAAAAAAAAI/AAAAAAAAAN0/u_1BqARfLDg/photo.jpg?sz=128", "display_name": "Conor O&#39;Brien", "link": "https://stackoverflow.com/users/4119004/conor-obrien"}, "edited": false, "score": 0, "creation_date": 1515724060, "post_id": 48179968, "comment_id": 83419342, "body": "@ConorO&#39;Brien You cannot find such distinction between them anywhere. <code>|*args, **opts|</code> can accept whatever <code>|*args|</code> can, and vice versa."}, {"owner": {"reputation": 895, "user_id": 4119004, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-AYhjTWVrGTc/AAAAAAAAAAI/AAAAAAAAAN0/u_1BqARfLDg/photo.jpg?sz=128", "display_name": "Conor O&#39;Brien", "link": "https://stackoverflow.com/users/4119004/conor-obrien"}, "edited": false, "score": 0, "creation_date": 1515727344, "post_id": 48179968, "comment_id": 83419980, "body": "I see. So it seems, my question is based on a misunderstanding of the way ruby processes arguments. Thanks for the clarification!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1515576351, "last_edit_date": 1515576351, "creation_date": 1515555684, "answer_id": 48179968, "question_id": 48179862, "link": "https://stackoverflow.com/questions/48179862/passing-a-hash-with-a-double-splat-only-when-the-lambda-requests-one/48179968#48179968", "title": "Passing a hash with a double splat only when the lambda requests one", "body": "<p>In <code>*args</code> case, the <code>arity</code> is <code>-1</code>. To separate all the cases with when there is no argument, you can do <code>nonzero?</code> instead of <code>&lt; 0</code>.</p>\n"}], "owner": {"reputation": 895, "user_id": 4119004, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-AYhjTWVrGTc/AAAAAAAAAAI/AAAAAAAAAN0/u_1BqARfLDg/photo.jpg?sz=128", "display_name": "Conor O&#39;Brien", "link": "https://stackoverflow.com/users/4119004/conor-obrien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515576351, "creation_date": 1515554810, "question_id": 48179862, "link": "https://stackoverflow.com/questions/48179862/passing-a-hash-with-a-double-splat-only-when-the-lambda-requests-one", "title": "Passing a hash with a double splat only when the lambda requests one", "body": "<p>I have a <code>lambda</code> in a variable, whose argument signature I do not know. I want to pass an options hash to it with <code>**</code>, but only if it requires options.</p>\n\n<p>So far, I have this:</p>\n\n<pre><code>def call_func(func, *args, **options)\n    if func.arity &lt; 0\n        func[*args, **options]\n    else\n        func[*args]\n    end\nend\n</code></pre>\n\n<p>But this only works for lambdas like</p>\n\n<pre><code>lambda { |x, y| x + y }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>lambda { |x, **opts| opts[:y] + x }\n</code></pre>\n\n<p>but fails for lambdas that consume an array of arguments, like </p>\n\n<pre><code>lambda { |*args| args.join \", \" }\n</code></pre>\n\n<p>Is there a way I can detect for a lambda whose signature only consumes an array of arguments while not requesting an option hash?</p>\n"}, {"tags": ["ruby", "utf-8", "io", "buffer"], "answers": [{"tags": [], "owner": {"reputation": 90, "user_id": 2682818, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c4ee39b98ec3f9b759d4d22d1da04844?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Remes", "link": "https://stackoverflow.com/users/2682818/chuck-remes"}, "is_accepted": true, "score": 1, "last_activity_date": 1515623670, "creation_date": 1515623670, "answer_id": 48197203, "question_id": 48179787, "link": "https://stackoverflow.com/questions/48179787/use-cases-for-unbuffered-reads/48197203#48197203", "title": "Use-cases for unbuffered reads", "body": "<p>After much rumination, I have decided that there are no compelling use-cases requiring unbuffered reads. So, my IO classes will default to buffering reads and trying to satisfy read requests from that cache. This will be true for both Block as well as Stream objects.</p>\n\n<p>However, an interesting detail arose. The read cache will likely be 32k or so. Sometimes a user will try to read in excess of that size. In that event, the cache detects the large read, invalidates itself, and then passes through the read request to a <code>__read__</code> \"primitive\" which does unbuffered reads. By electing to make that semi-private <strong>read</strong> available as part of the API, users can bypass the read cache altogether and do a direct unbuffered read.</p>\n\n<p>So I'll offer the best of both worlds without cluttering up the API.</p>\n"}], "owner": {"reputation": 90, "user_id": 2682818, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c4ee39b98ec3f9b759d4d22d1da04844?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Remes", "link": "https://stackoverflow.com/users/2682818/chuck-remes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 48197203, "answer_count": 1, "score": 1, "last_activity_date": 1515623670, "creation_date": 1515554217, "question_id": 48179787, "link": "https://stackoverflow.com/questions/48179787/use-cases-for-unbuffered-reads", "title": "Use-cases for unbuffered reads", "body": "<p>I'm working on a new set of IO classes for Ruby (to be used as replacements for the built-in core IO classes).</p>\n\n<p>While doing this clean sheet redesign I've encountered an issue regarding buffered vs unbuffered read IO. Buffered IO has the advantage of reducing the number of syscalls and is particularly useful when trying to read and parse UTF-8 where a char may be anywhere from 1 to 4 bytes in length. I can read ahead 4k, parse my encoded string, and unused bytes can be put back by modifying the file pointer via seek.</p>\n\n<p>However, this choice does not exist for reading from a stream like a pipe or socket because seeking is not allowed. I can't put those bytes back once I've read them.</p>\n\n<p>So now I'm forced to read 1 (to 4) bytes at a time to complete a byte string that can be force encoded to UTF-8. If I try to do larger reads, I improve my string encoding performance but now am left with unused bytes. Any unused bytes (i.e. I read too far) need to be \"put back\" or \"unget\" by storing them in my IO object, however now I'm back to <em>requiring</em> buffered IO.</p>\n\n<p>So, I'm wondering if I am making this decision more complex than it needs to be. If there are no good use-cases for unbuffered IO, then my path is clear. If there are good reasons for unbuffered IO, my path is also clear.</p>\n\n<p>Does anyone have one or more real world use-cases for unbuffered reads?</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 11, "user_id": 6597381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DfUcG.jpg?s=128&g=1", "display_name": "Lucia", "link": "https://stackoverflow.com/users/6597381/lucia"}, "edited": false, "score": 0, "creation_date": 1515565413, "post_id": 48179783, "comment_id": 83342569, "body": "I have solved the first problem by using test_step_finished event to replace  afterstep."}, {"owner": {"reputation": 11, "user_id": 6597381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DfUcG.jpg?s=128&g=1", "display_name": "Lucia", "link": "https://stackoverflow.com/users/6597381/lucia"}, "edited": false, "score": 0, "creation_date": 1515586863, "post_id": 48179783, "comment_id": 83354284, "body": "I solved the second problem."}, {"owner": {"reputation": 859, "user_id": 120136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5e09e42fd5e92f240f0860680fcd7f7?s=128&d=identicon&r=PG", "display_name": "L.R.", "link": "https://stackoverflow.com/users/120136/l-r"}, "edited": false, "score": 0, "creation_date": 1551430238, "post_id": 48179783, "comment_id": 96644950, "body": "how did you solve the second problem?"}, {"owner": {"reputation": 11, "user_id": 6597381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DfUcG.jpg?s=128&g=1", "display_name": "Lucia", "link": "https://stackoverflow.com/users/6597381/lucia"}, "reply_to_user": {"reputation": 859, "user_id": 120136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5e09e42fd5e92f240f0860680fcd7f7?s=128&d=identicon&r=PG", "display_name": "L.R.", "link": "https://stackoverflow.com/users/120136/l-r"}, "edited": false, "score": 1, "creation_date": 1551971829, "post_id": 48179783, "comment_id": 96844552, "body": "actually, still using test_step_finished event. check this <a href=\"https://luciaca.cn/2018/01/12/how-to-get-logger-info-of-every-step-in-cucumber/\" rel=\"nofollow noreferrer\">luciaca.cn/2018/01/12/&hellip;</a> for more details. hope the chinese words doesn&#39;t make you more confused."}], "owner": {"reputation": 11, "user_id": 6597381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DfUcG.jpg?s=128&g=1", "display_name": "Lucia", "link": "https://stackoverflow.com/users/6597381/lucia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515554200, "creation_date": 1515554200, "question_id": 48179783, "link": "https://stackoverflow.com/questions/48179783/how-to-get-the-logger-info-of-every-step-in-cucumber", "title": "how to get the logger info of every step in cucumber?", "body": "<p>I'm using Cucumber to test a web application. and I use <code>AfterStep</code> hook to capture the screenshot in every step. it works well and I love it.but there are two problems:</p>\n\n<p>1\u3001 When a step is failed, <code>AfterStep</code> can't work, so no screenshot will be captured, and I really really want to get a failed step's screenshot. you may say that Capybara screenshot can capture a failed screenshot. yeah, it is useful, but I want to rename the screenshot and get screenshot of every step even it is passed.</p>\n\n<p>2\u3001I have no idea about using <code>AfterStep</code> to get every step's logger info no matter it's failed or passed.</p>\n\n<p>I googled and tried some solutions such as  <a href=\"https://github.com/cucumber/cucumber-ruby/issues/1026\" rel=\"nofollow noreferrer\">Cucumber does not go to AfterStep if the step is failed!</a></p>\n\n<p>, <a href=\"https://stackoverflow.com/questions/29146107/how-can-i-have-ruby-logger-log-for-each-line-of-execution\">How can I have ruby logger log for each line of execution?\n</a></p>\n\n<p>but all failed. Does anyone have any ideas? Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot", "factory"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1515569969, "post_id": 48179555, "comment_id": 83344390, "body": "Does this model work as expected if you create a record outside of FactoryBot? For example, if you do <code>Item.create(team: &#39;TheTeam&#39;, feature_id: &#39;123&#39;, feature: &#39;Description of feature&#39;)</code>, do you get a record with all attributes saved?"}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1515610220, "post_id": 48179555, "comment_id": 83369047, "body": "Great question, @moveson. Yes, it works via console to just do what you had there. I don&#39;t have any validations on fields and don&#39;t have any relationships (at this time). The Item class doesn&#39;t reference anything else. So Rails itself is fine with it. It just seems to be something within FactoryBot"}], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1515613290, "post_id": 48194797, "comment_id": 83370548, "body": "This looks good, although is there a way to still get the <code>sequence</code> part for <code>feature_id</code> in the <code>after()</code> block? It&#39;s a quibble, but it would be nice to have the <code>feature_id</code> be a sequentially incrementing <code>Feature1</code>, <code>Feature2</code>, etc like <code>sequence</code> provides"}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1515620891, "post_id": 48194797, "comment_id": 83374296, "body": "I like this a lot! I think instead of providing a constant, though, it could be this: <code>item.feature_id = &quot;Feature#{item.class.count + 1}&quot; unless evaluator.without_feature_id </code> which then just adds 1 to the number of items. So it won&#39;t reset, but otherwise should work. It does add an extra DB call for each creation, but at least for now that&#39;s not a problem."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1515621331, "post_id": 48194797, "comment_id": 83374488, "body": "Keep in mind that you may not want to create items in the database every time. Often (hopefully very often) you will instead want to just build items in memory using <code>build</code> or <code>build_stubbed</code>. For that reason, I would avoid an incremental value that relies on the database. That said, I misstated the way this incremental variable works. In fact, it will reset at the beginning of a test run, not at the start of each unit test, which is probably what you want in any case."}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1515623043, "post_id": 48194797, "comment_id": 83375192, "body": "Ahhh... good call. Yes, having it rely on the DB count would be problematic in this regard. Thanks!"}, {"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1515680493, "post_id": 48194797, "comment_id": 83399273, "body": "One interesting thing to note: if I change the attributes to be <code>feature_id</code> and <code>feature_title</code>, everything works in the original setup. So it definitely is because of the <code>X_id</code> and <code>X</code> naming pattern somehow."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1515685080, "post_id": 48194797, "comment_id": 83402557, "body": "Yes, I&#39;m not surprised at all by this, as it follows <a href=\"http://guides.rubyonrails.org/active_record_basics.html#naming-conventions\" rel=\"nofollow noreferrer\">ActiveRecord naming convention</a>."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 4, "last_activity_date": 1515621933, "last_edit_date": 1515621933, "creation_date": 1515612781, "answer_id": 48194797, "question_id": 48179555, "link": "https://stackoverflow.com/questions/48179555/how-do-i-set-an-id-value-in-factorybot-that-isnt-a-foreign-key/48194797#48194797", "title": "How do I set an _id value in FactoryBot that isn&#39;t a foreign key?", "body": "<p>It does appear that FactoryBot is making assumptions, and I haven't found a way to change those assumptions. It might be worth opening an issue to see what the maintainers have to offer. </p>\n\n<p>In the mean time, here's a workaround:</p>\n\n<pre><code>FactoryBot.define do\n  FEATURE_IDS ||= (1..1000).cycle\n\n  factory :item do\n    team \"TheTeam\"\n\n    transient { without_feature_id false }\n    transient { without_feature false }\n\n    after(:build, :stub) do |item, evaluator|\n      item.feature_id = \"Feature#{FEATURE_IDS.next}\" unless evaluator.without_feature_id\n      item.feature = Faker::Lorem.sentence unless evaluator.without_feature\n    end\n  end\nend\n</code></pre>\n\n<p>This will function properly in the cases you described above. </p>\n\n<p>The incrementing is tricky. I was not able to find a way to use FactoryBot sequences outside of the resource-construction context, so I use an Enumerator and call <code>#next</code> to create the sequence. This works similar to a FactoryBot sequence, except that there is no way to reset to 1 in the middle of a test run.</p>\n\n<p>RSpec tests prove it works as expected, whether we are creating items in the database or building them in memory:</p>\n\n<pre><code>context 'when more than one item is created' do\n  let(:item_1) { create(:item) }\n  let(:item_2) { create(:item) }\n\n  it 'increments feature_id by 1' do\n    expect(item_1.feature_id).to be_present\n    expect(item_2.feature_id).to eq(item_1.feature_id.next)\n  end\nend\n\ncontext 'when using build instead of create' do\n  let(:item_1) { build(:item) }\n  let(:item_2) { build(:item) }\n\n  it 'increments feature_id by 1' do\n    expect(item_1.feature_id).to be_present\n    expect(item_2.feature_id).to eq(item_1.feature_id.next)\n  end\nend\n</code></pre>\n\n<p>Note that you cannot create an item without a feature_id or a feature using the typical construct; for example:</p>\n\n<pre><code>&gt;&gt; item = create(:item, feature_id: nil)\n</code></pre>\n\n<p>Will result in </p>\n\n<pre><code>&gt;&gt; item.feature_id\n#&gt; \"Feature1\"\n</code></pre>\n\n<p>If you wish to create an object without the feature and feature_id fields, you can do:</p>\n\n<pre><code>create(:item, without_feature_id: true, without_feature: true)\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2520, "favorite_count": 1, "accepted_answer_id": 48194797, "answer_count": 1, "score": 5, "last_activity_date": 1515621933, "creation_date": 1515552308, "last_edit_date": 1515553529, "question_id": 48179555, "link": "https://stackoverflow.com/questions/48179555/how-do-i-set-an-id-value-in-factorybot-that-isnt-a-foreign-key", "title": "How do I set an _id value in FactoryBot that isn&#39;t a foreign key?", "body": "<p>I'm using FactoryBot (formerly FactoryGirl) to create some factory data for my tests. I have a model that looks like this via the schema (stripped down to just the relevant stuff):</p>\n\n<pre><code>create_table \"items\", force: :cascade do |t|\n    t.text \"team\"\n    t.text \"feature_id\"\n    t.text \"feature\"\n    t.timestamps\nend\n</code></pre>\n\n<p>However, <code>feature_id</code> and <code>feature</code> are NOT references to a feature object... they are just strings.</p>\n\n<p>I've defined my factory like this:</p>\n\n<pre><code>FactoryBot.define do\n  factory :item do\n    team \"TheTeam\"\n    sequence(:feature_id) {|n| \"Feature#{n}\" }\n    feature { Faker::Lorem.sentence }\n  end\nend\n</code></pre>\n\n<p>And the simple case works:</p>\n\n<pre><code>&gt; FactoryBot.create(:item)\n=&gt; #&lt;Item:0x007fad8cbfc048\n id: 1,\n team: \"TheTeam\",\n feature_id: \"Feature1\",\n feature: \"Qui voluptatem animi et rerum et.\",\n created_at: Wed, 10 Jan 2018 02:40:01 UTC +00:00,\n updated_at: Wed, 10 Jan 2018 02:40:01 UTC +00:00&gt;\n</code></pre>\n\n<p>But when I want to specify my own <code>feature_id</code> this is what happens:</p>\n\n<pre><code>&gt; FactoryBot.create(:item, feature_id: \"123\")\n=&gt; #&lt;Item:0x007fad8d30a880\n id: 2,\n team: \"TheTeam\",\n feature_id: \"123\",\n feature: nil,\n created_at: Wed, 10 Jan 2018 02:40:59 UTC +00:00,\n updated_at: Wed, 10 Jan 2018 02:40:59 UTC +00:00&gt;\n</code></pre>\n\n<p>You can see that <code>feature</code> is now <code>nil</code>. I'm assuming this is because it's trying to infer that <code>feature_id</code> and <code>feature</code> are somehow related. But in this case, I don't want them to be.</p>\n\n<p><strong>Is there a better way to define the factory so that it just treats them as unrelated fields?</strong></p>\n\n<p>BTW, if I try to set both the <code>feature_id</code> and <code>feature</code> it looks like this:</p>\n\n<pre><code>&gt; FactoryBot.create(:item, feature_id: \"123\", feature: \"hi\")\n=&gt; #&lt;Item:0x007fad8d262810\n id: 3,\n team: \"TheTeam\",\n feature_id: nil,\n feature: nil,\n created_at: Wed, 10 Jan 2018 02:45:01 UTC +00:00,\n updated_at: Wed, 10 Jan 2018 02:45:01 UTC +00:00&gt;\n</code></pre>\n\n<p>So it just sets both fields to <code>nil</code>. I suspect FactoryBot is trying to be \"smart\" about these fields based on their names. I'd change them but they are already set that way in the Db.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515552710, "post_id": 48179532, "comment_id": 83339307, "body": "The logic is not clear. How do you get that array?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515552752, "post_id": 48179532, "comment_id": 83339315, "body": "And what is your question?"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1515552927, "post_id": 48179532, "comment_id": 83339352, "body": "@codeObserver actually the sum for 1 should be 10"}, {"owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "reply_to_user": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1515557585, "post_id": 48179532, "comment_id": 83340358, "body": "@user3309314 you are correct. I corrected it. Thanks!"}, {"owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "edited": false, "score": 0, "creation_date": 1515558329, "post_id": 48179532, "comment_id": 83340523, "body": "Also, I realize there is possible a better way to say the title of the question indicating what we are doing with this operation. Sounds like a very common operation while parsing data."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515636573, "post_id": 48179532, "comment_id": 83378920, "body": "Your result data structure is strange. Why is this an array of hashes and not a hash?"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515552850, "post_id": 48179613, "comment_id": 83339330, "body": "That is not what is expected."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515552999, "post_id": 48179613, "comment_id": 83339372, "body": "the author says ending result&#39;s structure doesn&#39;t matter"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515553084, "post_id": 48179613, "comment_id": 83339393, "body": "It&#39;s not about the structure. It is about the particular value."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515553144, "post_id": 48179613, "comment_id": 83339408, "body": "8 + 0 + 1 + 1 = 10. there is a typo in the question I guess"}, {"owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "edited": false, "score": 0, "creation_date": 1515557677, "post_id": 48179613, "comment_id": 83340387, "body": "Sorry for the confusion. There is a typo in the question. I corrected it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1515559180, "post_id": 48179613, "comment_id": 83340724, "body": "I suggest a slight simplification to  <code>data.each_with_object({}) { |(k, v), res| res[k] = (res[k] ||= 0) + v }</code> or <code>data.each_with_object(Hash.new { |h,k| h[k] = 0 }) { |(k, v), res| res[k] += v }</code>. Another way is <code>data.each_with_object({}) { |(k, v), res| res.update(k=&gt;v) { |_,o,n| o+n } }</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1515569115, "post_id": 48179613, "comment_id": 83344005, "body": "@CarySwoveland <code>0</code> is immutable, no need for long form hash initialization: <code>arr.each_with_object(Hash.new(0)) { |(k, v), acc| acc[k] += v }</code>."}], "tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 1, "last_activity_date": 1515553403, "last_edit_date": 1515553403, "creation_date": 1515552823, "answer_id": 48179613, "question_id": 48179532, "link": "https://stackoverflow.com/questions/48179532/array-of-tuples-sum-the-values-when-the-the-first-element-is-the-same/48179613#48179613", "title": "Array of tuples, sum the values when the the first element is the same", "body": "<pre><code>data = [[1, 8], [3, 16], [1, 0], [1, 1], [1, 1]]\ndata.each_with_object({}) { |(k, v), res| res[k] ||= 0; res[k] += v } \n</code></pre>\n\n<p>gives</p>\n\n<pre><code>{1=&gt;10, 3=&gt;16}\n</code></pre>\n\n<p>there is also <code>inject</code> version although it's not so laconic:</p>\n\n<pre><code>data.inject({}) { |res, (k, v)| res[k] ||= 0; res[k] += v; res }\n</code></pre>\n\n<p><a href=\"https://medium.com/@Fdel15/ruby-each-with-object-or-inject-a737bb90cdd8\" rel=\"nofollow noreferrer\">inject vs each_with_object</a></p>\n"}, {"tags": [], "owner": {"reputation": 493, "user_id": 3840858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534f215d73d93dae9314db40d9746acd?s=128&d=identicon&r=PG", "display_name": "tegon", "link": "https://stackoverflow.com/users/3840858/tegon"}, "is_accepted": false, "score": 0, "last_activity_date": 1515554409, "last_edit_date": 1515554409, "creation_date": 1515553201, "answer_id": 48179662, "question_id": 48179532, "link": "https://stackoverflow.com/questions/48179532/array-of-tuples-sum-the-values-when-the-the-first-element-is-the-same/48179662#48179662", "title": "Array of tuples, sum the values when the the first element is the same", "body": "<p>You're pretty close, some changes are needed on your code:</p>\n\n<pre><code>k.inject({}) do |hash, (a, b)|\n  if hash[a].nil?\n    hash[a] = b\n  else\n    hash[a] += b\n  end\n\n  hash\nend\n</code></pre>\n\n<p>First of all, you don't need the <code>h</code> variable. <code>#inject</code> accepts an argument, often called the accumulator, which you can change it for each array element and then get as the return. Since you're already passing an empty hash to inject, you don't need the variable.</p>\n\n<p>Next, you have to handle the case where the key doesn't yet exist on the hash, hence the <code>if hash[a].nil?</code>. In that case, we assign the value of <code>b</code> to the hash where the key is <code>a</code>. When the key exists in the hash, we can safely sum the value.</p>\n\n<p>Another thing to notice is that you are using the wrong arguments of the block. When calling <code>#inject</code>, you first receive the accumulator (in this case, the hash), then the iteration element.</p>\n\n<p>Documentation for <a href=\"http://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>#inject</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1515636952, "creation_date": 1515636952, "answer_id": 48198886, "question_id": 48179532, "link": "https://stackoverflow.com/questions/48179532/array-of-tuples-sum-the-values-when-the-the-first-element-is-the-same/48198886#48198886", "title": "Array of tuples, sum the values when the the first element is the same", "body": "<pre><code>k.group_by(&amp;:first).transform_values {|v| v.map(&amp;:last).sum }\n</code></pre>\n\n<p>You actually used the words \"group by\" in your question, but you never grouped the array in your code. Here, I first group the inner arrays by their first elements, ending up with:</p>\n\n<pre><code>{ 1 =&gt; [[1, 8], [1, 0], [1, 1], [1, 1]], 3 =&gt; [[3, 16]] }\n</code></pre>\n\n<p>Next, I only want the last element of all of the inner arrays, since I already know that the first is always going to be the key, so I use <code>Hash#transform_values</code> to map the two-element arrays to their last element. Lastly, I <code>Enumerable#sum</code> those numbers.</p>\n"}], "owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 48179613, "answer_count": 3, "score": -1, "last_activity_date": 1515636952, "creation_date": 1515552146, "last_edit_date": 1515557564, "question_id": 48179532, "link": "https://stackoverflow.com/questions/48179532/array-of-tuples-sum-the-values-when-the-the-first-element-is-the-same", "title": "Array of tuples, sum the values when the the first element is the same", "body": "<p>I am trying to sum the elements of an array by grouping by the first element.</p>\n\n<pre><code>ex:\n[[1, 8], [3, 16], [1, 0], [1, 1], [1, 1]]\n</code></pre>\n\n<p>should give</p>\n\n<pre><code>[ {1 =&gt; 10},  {3 =&gt; 16} ]\n</code></pre>\n\n<p>It is summing the values in the original array where the first element was 1 and 3. The data structures in the end result don't matter, ex: an array of arrays, an array of hash or just a hash is fine. </p>\n\n<p>Some tries:</p>\n\n<pre><code>k = [[1, 8], [3, 16], [1, 0], [1, 1], [1, 1]]\nh = {}\nk.inject({}) { |(a,b)| h[a] += b}\n#=&gt;    undefined method `+' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "activeadmin", "carrierwave", "cloudinary"], "comments": [{"owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "edited": false, "score": 0, "creation_date": 1516139229, "post_id": 48179348, "comment_id": 83565752, "body": "Have you seen <a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/1653\" rel=\"nofollow noreferrer\">github.com/carrierwaveuploader/carrierwave/issues/1653</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 223, "user_id": 8858637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3822c7f2b30d4e9546a2e16fc92221?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Madan", "link": "https://stackoverflow.com/users/8858637/aditi-madan"}, "is_accepted": false, "score": 0, "last_activity_date": 1515610103, "creation_date": 1515610103, "answer_id": 48194191, "question_id": 48179348, "link": "https://stackoverflow.com/questions/48179348/upload-and-show-multiple-images-in-cloudinary-using-carrierwave/48194191#48194191", "title": "upload and show multiple images in cloudinary using carrierwave", "body": "<p>You can include folder parameter on your upload like this(Ruby)-Cloudinary::Uploader.upload(\"sample_image.jpg\", :public_id => \"multiple/folders/sample\")</p>\n\n<p>or\nadd it to your public id separated by '/'.</p>\n\n<p>Example:<a href=\"http://res.cloudinary.com/demo/image/upload/v1364158979/multiple/folders/sample.jpg\" rel=\"nofollow noreferrer\">http://res.cloudinary.com/demo/image/upload/v1364158979/multiple/folders/sample.jpg</a>\nHere 'multiple' and 'folders' are folder name and 'sample' is the image name.</p>\n\n<p>For more information: <a href=\"https://support.cloudinary.com/hc/en-us/articles/202520902-Can-I-create-folders-in-my-Cloudinary-account-\" rel=\"nofollow noreferrer\">https://support.cloudinary.com/hc/en-us/articles/202520902-Can-I-create-folders-in-my-Cloudinary-account-</a></p>\n"}], "owner": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515654427, "creation_date": 1515550578, "last_edit_date": 1515654427, "question_id": 48179348, "link": "https://stackoverflow.com/questions/48179348/upload-and-show-multiple-images-in-cloudinary-using-carrierwave", "title": "upload and show multiple images in cloudinary using carrierwave", "body": "<p>I have a form field as below through which I can add multiple images at once. I am uploading image in admin panel which uses active-admin gem.</p>\n\n<pre><code>form(html: { multipart: true }) do |f|\nf.inputs do\n  f.input :title\n  f.file_field :photos, multiple: true\nend\nf.actions\nend\n</code></pre>\n\n<p>I want to be able to add multiple images so that I could create a folder for each upload in cloudinary and also view those images on my frontend (like photo album).\nSo far, I could upload multiple images on cloudinary looking at the carrierwave+cloudinary documentation but I could not create a folder for each upload and show each images on the site.\nThis is my code on photo_uploader.rb</p>\n\n<pre><code>class PhotosUploader &lt; CarrierWave::Uploader::Base\n include Cloudinary::CarrierWave\n include CarrierWave::MiniMagick\n #storage :file\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "sidekiq", "icecast"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1515539672, "post_id": 48177698, "comment_id": 83336214, "body": "Your question is a little vague because we don&#39;t know how you&#39;re ingesting the feeds. And, admittedly, I know very little about Icecast but make sure you&#39;re running things in a multi-threaded environment, both in your Sidekiq instance and Rails server. <a href=\"https://github.com/mperham/sidekiq/wiki/Advanced-Options\" rel=\"nofollow noreferrer\">github.com/mperham/sidekiq/wiki/Advanced-Options</a> and <a href=\"https://stackoverflow.com/questions/17902386/is-puma-the-only-multi-threaded-rails-4-http-server\" title=\"is puma the only multi threaded rails 4 http server\">stackoverflow.com/questions/17902386/&hellip;</a> for more info."}, {"owner": {"reputation": 7832, "user_id": 2497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d33a294d8b03b0eec187cb1dc4d8d7?s=128&d=identicon&r=PG", "display_name": "Srdjan Pejic", "link": "https://stackoverflow.com/users/2497/srdjan-pejic"}, "edited": false, "score": 0, "creation_date": 1515555380, "post_id": 48177698, "comment_id": 83339885, "body": "What does &quot;2 workers on rails&quot; mean? 2 processes? 1 process with 2 threads?  Further, why Sidekiq? Your description sounds like you need a persistent connection. Why not run a Ruby process, use <code>fork</code> and spawn sub-processes that connect to the icecast endpoints?"}], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 9195649, "user_type": "registered", "profile_image": "https://graph.facebook.com/1258528060959779/picture?type=large", "display_name": "Stiliyan Hristov", "link": "https://stackoverflow.com/users/9195649/stiliyan-hristov"}, "is_accepted": false, "score": 0, "last_activity_date": 1515593495, "creation_date": 1515593495, "answer_id": 48189293, "question_id": 48177698, "link": "https://stackoverflow.com/questions/48177698/multiple-worker-streams-sidekiq-icecast-rails/48189293#48189293", "title": "Multiple Worker Streams Sidekiq Icecast Rails", "body": "<p>All I had to do was run 2 sidekiq processes 1 running with the params -q radioworker and 1 running with -q testworker. Sorry if the problem description was vague.I was trying to run 2 processes with 1 thread each.Not 1 process with 2 threads. Thanks for the help</p>\n"}], "owner": {"reputation": 77, "user_id": 9195649, "user_type": "registered", "profile_image": "https://graph.facebook.com/1258528060959779/picture?type=large", "display_name": "Stiliyan Hristov", "link": "https://stackoverflow.com/users/9195649/stiliyan-hristov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515593495, "creation_date": 1515537633, "question_id": 48177698, "link": "https://stackoverflow.com/questions/48177698/multiple-worker-streams-sidekiq-icecast-rails", "title": "Multiple Worker Streams Sidekiq Icecast Rails", "body": "<p>Wondering why I can only have 1 stream listening on a specific port on sidekiq/redis/icecast Rails Stream app. My files are as following:</p>\n\n<p>icecast.xml</p>\n\n<pre><code>&lt;!-- You may have multiple &lt;listener&gt; elements --&gt;\n&lt;listen-socket&gt;\n    &lt;port&gt;35687&lt;/port&gt;\n    &lt;shoutcast-mount&gt;/hiphop&lt;/shoutcast-mount&gt;\n    &lt;!-- &lt;bind-address&gt;127.0.0.1&lt;/bind-address&gt; --&gt;\n    &lt;!-- &lt;shoutcast-mount&gt;/stream&lt;/shoutcast-mount&gt; --&gt;\n&lt;/listen-socket&gt;\n&lt;listen-socket&gt;\n    &lt;port&gt;35690&lt;/port&gt;\n    &lt;shoutcast-mount&gt;/rock&lt;/shoutcast-mount&gt;\n&lt;/listen-socket&gt;\n</code></pre>\n\n<p>2 workers on rails </p>\n\n<pre><code>class RadioWorker\n  include Sidekiq::Worker\n  sidekiq_options :queue =&gt; :radioworker\n  def perform(*_args)\n    prev_song = nil\n    s = Shout.new # ruby-shout instance\n    s.mount = \"/rock\" # our mountpoint\n    s.charset = \"UTF-8\"\n    s.port = 35690 # the port we've specified earlier\n    s.host = 'localhost' # hostname\n    s.user = 'source' # credentials\n    s.pass = 'parolata'\n    s.format = Shout::MP3 # format is MP3\n    s.description = 'Geek Radio' # an arbitrary name\n    s.connect \n\n\nclass TestWorker\n  include Sidekiq::Worker\n  sidekiq_options :queue =&gt; :testworker\n  def perform(*_args)\n    prev_song = nil\n    s = Shout.new # ruby-shout instance\n    s.mount = \"/hiphop\" # our mountpoint\n    s.charset = \"UTF-8\"\n    s.port = 35687 # the port we've specified earlier\n    s.host = 'localhost' # hostname\n    s.user = 'source' # credentials\n    s.pass = 'parolata'\n    s.format = Shout::MP3 # format is MP3\n    s.description = 'Geek Radio' # an arbitrary name\n    s.connect \n</code></pre>\n\n<p>both workers have been set to perform async in initializer/sidekiq.rb\nand I have the sidekiq queues defined in config/sidekiq.yml</p>\n\n<pre><code>:queues:\n  - [\"radioworker\", 1]\n  - [\"testworker\", 1]\n</code></pre>\n\n<p>Currently It seems as if on an instance of bundle exec sidekick -C config/sidekiq.yml I can only listen to 1 of the 2 streams. How can I have them both running at the same time and be able to listen to them?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515552643, "post_id": 48177606, "comment_id": 83339291, "body": "I think that this case is illustrating that in multiple assignment, you cannot omit the braces around a hash."}, {"owner": {"reputation": 1700, "user_id": 627806, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c6022ce776b5415ea90bddd94355fffa?s=128&d=identicon&r=PG", "display_name": "Jon Burgess", "link": "https://stackoverflow.com/users/627806/jon-burgess"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515553502, "post_id": 48177606, "comment_id": 83339469, "body": "How is it multiple assignment, though? <code>a, b = c, d</code> I understand, but this is more like <code>b = c, d</code> (braces or not)."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1515553552, "post_id": 48177606, "comment_id": 83339480, "body": "Exactly. Ruby tries to interpret that as an array. What I am saying is that <code>a = b, c</code> (which is short for <code>a = [b, c]</code>) and <code>a = [b, c: d]</code> (short for <code>a = [b, {c: d}]</code>) are allowed, but perhaps <code>a = b, c: d</code> is not."}, {"owner": {"reputation": 1700, "user_id": 627806, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c6022ce776b5415ea90bddd94355fffa?s=128&d=identicon&r=PG", "display_name": "Jon Burgess", "link": "https://stackoverflow.com/users/627806/jon-burgess"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515554365, "post_id": 48177606, "comment_id": 83339664, "body": "Right, now I get it! <code>a = b, c</code> being equivalent to <code>a = [b, c]</code> is what I was missing."}], "answers": [{"comments": [{"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 1, "creation_date": 1515540600, "post_id": 48178138, "comment_id": 83336486, "body": "Great answer. Why would a default argument of <code>options = {}</code> resolve OP&#39;s problem (which appears to be a parse error)?"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1515541148, "post_id": 48178138, "comment_id": 83336641, "body": "Great question that I&#39;m not fully qualified to answer because I know very little about how the Ruby interpreter works, but in my experience, it is indicative of an expression or block not ending correctly. I&#39;m not sure where along the stack the parser hit this error so I can&#39;t answer to the specific method that was called that invoked this."}, {"owner": {"reputation": 1700, "user_id": 627806, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c6022ce776b5415ea90bddd94355fffa?s=128&d=identicon&r=PG", "display_name": "Jon Burgess", "link": "https://stackoverflow.com/users/627806/jon-burgess"}, "edited": false, "score": 1, "creation_date": 1515547415, "post_id": 48178138, "comment_id": 83338130, "body": "I&#39;m not sure if I understand.  Are you saying (that because of metaprogramming) that the line is roughly equivalent to: <code>config.cache_store = RedisCacheStore</code>? I don&#39;t understand how the trailing <code>, url: ...</code> fits in."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515552483, "post_id": 48178138, "comment_id": 83339244, "body": "The explanation in this answer is all about what happens after parsing is done without a syntax error. The question, however, is regarding a syntax error. Hence, this answer is irrelevant to the question."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 0, "last_activity_date": 1515552429, "last_edit_date": 1515552429, "creation_date": 1515540408, "answer_id": 48178138, "question_id": 48177606, "link": "https://stackoverflow.com/questions/48177606/ruby-syntax-error-unexpected-tlabel/48178138#48178138", "title": "Ruby syntax error unexpected tLABEL", "body": "<p>When the config block hits <code>cache_store</code> and a symbol is given, it assumes it is a cache store class and does things like:</p>\n\n<pre><code>:redis_cache_store.to_s.classify.constantize\n# =&gt; RedisCacheStore\n</code></pre>\n\n<p>which is presumably a class. You can infer that Rails does this by looking at <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-store\" rel=\"nofollow noreferrer\">the docs</a> and seeing that you can also pass a class.</p>\n\n<p>RedisCacheStore is defined inside the <code>ActiveSupport::Cache</code> namespace, which inherits from <code>ActiveSupport::Cache::Store</code>, which is defined in <code>cache.rb</code>. This store class only initializes with a single argument of <code>options = nil</code>:</p>\n\n<pre><code>def initialize(options = nil)\n  @options = options ? options.dup : {}\nend\n</code></pre>\n\n<p>which is indicative of a requirement to pass a hash. For one reason or another, it doesn't initialize with <code>options = {}</code>, which would make your initial code correct. Hence, passing a hash like in your second example resolved the error.</p>\n"}], "owner": {"reputation": 1700, "user_id": 627806, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c6022ce776b5415ea90bddd94355fffa?s=128&d=identicon&r=PG", "display_name": "Jon Burgess", "link": "https://stackoverflow.com/users/627806/jon-burgess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 997, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1515552544, "creation_date": 1515537117, "last_edit_date": 1515552544, "question_id": 48177606, "link": "https://stackoverflow.com/questions/48177606/ruby-syntax-error-unexpected-tlabel", "title": "Ruby syntax error unexpected tLABEL", "body": "<p>I have the following configuration for <a href=\"https://github.com/rails/rails/pull/31134\" rel=\"nofollow noreferrer\">using redis as a rails cache</a>, adapted closely from the rails doc:</p>\n\n<pre><code>Rails.application.configure do\n  ...\n  config.cache_store = :redis_cache_store, url: \"redis://example.com:6379/0\"\n  ...\nend\n</code></pre>\n\n<p>Using rails 5.2.0.beta2 and ruby 2.3.1p112, my IDE is telling me the following things about the <code>config.cache_store =</code> line:</p>\n\n<ul>\n<li>unused literal ignored</li>\n<li>syntax error, unexpected tLABEL</li>\n</ul>\n\n<p>If I enclose the hash in <code>{}</code>, the errors go away, i.e.:</p>\n\n<pre><code>config.cache_store = :redis_cache_store, { url: \"redis://example.com:6379/0\" }\n</code></pre>\n\n<p>Is the documentation in error, or is it a ruby version thing (e.g. maybe the doc is assuming ruby >= 2.4)?</p>\n\n<p>In any case, I don't understand what the assignment is actually doing - how can two things be assigned to one?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "encryption", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1516654891, "post_id": 48310522, "comment_id": 83768157, "body": "I guess my question how does this command encrypt the private key: openssl pkcs12 -in test.pfx -out test.pem whereas  \u201copenssl pkcs12\u201d with \u201c-nodes\u201d does not. How do i get the same results using ruby"}, {"owner": {"reputation": 1546, "user_id": 2989337, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/JoDFi.png?s=128&g=1", "display_name": "JawguyChooser", "link": "https://stackoverflow.com/users/2989337/jawguychooser"}, "reply_to_user": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1516657122, "post_id": 48310522, "comment_id": 83769274, "body": "Specifically, &#39;-nodes&#39; is &quot;no DES&quot; no DES encryption.  I&#39;m sorry that my example shows AES encryption.  If you want to get ruby to encrypt with DES, you&#39;ll just need to specify that Cipher, I&#39;ll look it up and modify the answer for you."}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1516724972, "post_id": 48310522, "comment_id": 83801815, "body": "that answers most of my questions. One thing I was curious was the starting line &#39;BEGIN ENCRYPTED KEY&#39; when you run pcks12 via command line. Through ruby i always get &#39;BEGIN RSA KEY&#39;."}], "tags": [], "owner": {"reputation": 1546, "user_id": 2989337, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/JoDFi.png?s=128&g=1", "display_name": "JawguyChooser", "link": "https://stackoverflow.com/users/2989337/jawguychooser"}, "is_accepted": true, "score": 1, "last_activity_date": 1516683045, "last_edit_date": 1516683045, "creation_date": 1516225574, "answer_id": 48310522, "question_id": 48177521, "link": "https://stackoverflow.com/questions/48177521/ruby-open-ssl-api-for-encrypted-key-without-nodes-option/48310522#48310522", "title": "ruby open ssl api for encrypted key (without nodes option)", "body": "<p>There must be something more to this.  Perhaps the question needs refined.  From what I can tell, you want to print a private key in PEM format.  I'm not a ruby programmer but I got <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL.html\" rel=\"nofollow noreferrer\">this</a> working in about 3 minutes by reading the on <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL.html\" rel=\"nofollow noreferrer\">ruby-docs.org</a>:</p>\n\n<pre><code>$ cat ssl.rb \nrequire 'openssl'\nkey = OpenSSL::PKey::RSA.new 2048\ncipher = OpenSSL::Cipher.new 'AES-128-CBC'\npass_phrase = 'my secure pass phrase goes here'\nkey_secure = key.export cipher, pass_phrase\nputs key_secure\n</code></pre>\n\n<p>Choose your cipher and your passphrase and voila,  you have encrypted a key with a symmetric cipher:</p>\n\n<pre><code>$ ruby ssl.rb\n-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: AES-128-CBC,D8062F93C8854E593602D503E1FAC309\n\nUsNQt/Bq7QBldOBU7NW6miCDuC+ODpeplaWQ9BvJW4Wg7j0AbKgMZAn7juegAbjG\nJVkpdDNzhs37UVWmqwg64yYP6KEBGg4zCog2a993UHRvFTQb6tyugKHc+uFeyY+D\n...\n-----END RSA PRIVATE KEY-----\n</code></pre>\n\n<p>Is there something more you're trying to do?</p>\n\n<p>--</p>\n\n<p>EDIT: The Asker has clarified that the question is about which encryption is used by <code>openssl pkcs12</code> when not using the <code>-nodes</code> option.</p>\n\n<p>The <code>-nodes</code> option turns off DES encryption.  <a href=\"https://wiki.openssl.org/index.php/Manual:PKCS12_create(3)\" rel=\"nofollow noreferrer\">This page</a> shows that the default encryption for private key creation is triple DES, but I don't see the detail there about which DES option.  This is also referred to in the manual for <code>man pkcs12</code>.  In any case, it's not yet clear to me if you need to know exactly which cipher is used by openssl or if your question is now answered.</p>\n\n<p>You can list ruby's available ciphers like this:</p>\n\n<pre><code>puts OpenSSL::Cipher.cipher \n</code></pre>\n\n<p>(as specified in <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/Cipher.html\" rel=\"nofollow noreferrer\">the docs</a>)</p>\n\n<p>On my system, quite a few DES ciphers are available with varying parameters:</p>\n\n<pre><code>des\ndes-cbc\ndes-cfb\ndes-cfb1\ndes-cfb8\ndes-ecb\ndes-ede\ndes-ede-cbc\ndes-ede-cfb\ndes-ede-ofb\ndes-ede3\ndes-ede3-cbc\ndes-ede3-cfb\ndes-ede3-cfb1\ndes-ede3-cfb8\ndes-ede3-ofb\ndes-ofb\ndes3\ndesx\ndesx-cbc\n</code></pre>\n\n<p>I'm not sure if the PKCS12 spec says which DES cipher should be used or if openssl just has a default.  Are you trying to figure out which DES cipher is used by OpenSSL?</p>\n\n<p>I looked a bit further through the <a href=\"https://wiki.openssl.org/index.php/Command_Line_Utilities\" rel=\"nofollow noreferrer\">openssl wiki</a> and I found references to DES in CBC mode, so I'm guessing that the cipher you are looking for is DES-EDE3-CBC.</p>\n\n<p>Sorry, I guess it's still not completely clear exactly what question you're trying to answer.  If what you're trying to do is to find out exactly how openssl is encoding the private key when you don't use <code>-nodes</code> you can see that by <code>cat</code>ing the file into <code>openssl asn1parse</code>.  Maybe this helps: you can start with your rsa private key in plain text as you got it from your ruby program:</p>\n\n<pre><code>$ cat key.pem\n-----BEGIN RSA PRIVATE KEY-----\nMIIEpA....\n-----END RSA PRIVATE KEY\n$ cat key.pem | openssl asn1parse\n    0:d=0  hl=4 l=1188 cons: SEQUENCE          \n4:d=1  hl=2 l=   1 prim: INTEGER           :00\n7:d=1  hl=4 l= 257 prim: INTEGER       ...\n</code></pre>\n\n<p>You'll see that this is encoded as an <a href=\"https://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One\" rel=\"nofollow noreferrer\">ASN1 SEQUENCE</a> of long integers.</p>\n\n<p>But if you put your key through a roundtrip of <code>pkcs12</code>:</p>\n\n<pre><code>$ openssl pkcs12 -inkey key.pem -out key.pfx -export -nocerts -nodes\n(choose a password)\n$ openssl pkcs12 -in key.pfx -out outkey.pem -nodes\n(enter password)\n</code></pre>\n\n<p>You'll find your key now wrapped in a new structure, which you can cat to <code>asn1parse</code>:</p>\n\n<pre><code>cat keyout.pem | openssl asn1parse\n    0:d=0  hl=4 l=1214 cons: SEQUENCE          \n    4:d=1  hl=2 l=   1 prim: INTEGER           :00\n    7:d=1  hl=2 l=  13 cons: SEQUENCE          \n    9:d=2  hl=2 l=   9 prim: OBJECT            :rsaEncryption\n</code></pre>\n\n<p>You now have an ASN1 rsaEncryption Object with a payload of a large octet string.</p>\n\n<p>Is this what you were trying to learn about?  How these values are encapsulated in ASN1?</p>\n"}], "owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 48310522, "answer_count": 1, "score": 6, "last_activity_date": 1516683045, "creation_date": 1515536677, "last_edit_date": 1516655026, "question_id": 48177521, "link": "https://stackoverflow.com/questions/48177521/ruby-open-ssl-api-for-encrypted-key-without-nodes-option", "title": "ruby open ssl api for encrypted key (without nodes option)", "body": "<p>On a linux machine with openssl lib installed, when you perform \u201copenssl pkcs12\u201d with \u201c-nodes\u201d option then you get output with unencrypted private key but if you skip the \u2013nodes option then output will have encrypted private key. </p>\n\n<pre><code>     e.g.\n             openssl pkcs12 -in test.pfx -out test.pem \n</code></pre>\n\n<p>You should see private key encrypted like below</p>\n\n<blockquote>\n  <p>-----BEGIN ENCRYPTED PRIVATE KEY-----<br>\n  MIIFDjBABgkqhkiGG7s=<br>\n  -----END ENCRYPTED PRIVATE KEY-----</p>\n</blockquote>\n\n<p>How do I achive the above using ruby's open ssl library?</p>\n\n<p>This is how I am generating the private key with ruby:</p>\n\n<pre><code>    @private_key = OpenSSL::PKey::RSA.new 2048\n    @private_key.to_pem.to_s\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I guess my question how does this command encrypt the private key: </p>\n\n<blockquote>\n  <p>openssl pkcs12 -in test.pfx -out test.pem</p>\n</blockquote>\n\n<p>whereas:</p>\n\n<blockquote>\n  <p>\u201copenssl pkcs12 -nodes -in test.pfx -out test.pem\"</p>\n</blockquote>\n\n<p>does not. How do i get the same results using ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1515537889, "post_id": 48177285, "comment_id": 83335629, "body": "Are you sure it is the <code>batch_action</code> rather than the <code>input :cohort ... collection: -&gt; { ... }</code>? I don&#39;t know ActiveAdmin that well but the docs (ha ha) suggest that your <code>batch_action</code> is fine."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1515538712, "post_id": 48177285, "comment_id": 83335907, "body": "If you want to ignore lambda arguments then you probably want <code>-&gt;(*) { ... }</code> but you should make sure that&#39;s what you want to do."}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1515612072, "creation_date": 1515612072, "answer_id": 48194636, "question_id": 48177285, "link": "https://stackoverflow.com/questions/48177285/error-using-lambda-in-batch-action-active-admin-rails-5/48194636#48194636", "title": "Error using lambda in batch_action (Active Admin, Rails 5)", "body": "<p>To specifically answer your question, this being an older library not much updated, I expect lambda is not supported, though <code>proc{...}</code> should be fine. As to why the list is not updated I'm not clear on your intent here, typically batch_action blocks end with a <code>redirect_to</code>, eg.</p>\n\n<pre><code>redirect_to({action: :index}, {notice: 'Cohorts selected.'})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 376, "user_id": 6369687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_JOpqni_WmE/AAAAAAAAAAI/AAAAAAAAAC8/IrWDOpRpUq0/photo.jpg?sz=128", "display_name": "Rabi", "link": "https://stackoverflow.com/users/6369687/rabi"}, "is_accepted": true, "score": 1, "last_activity_date": 1539692549, "creation_date": 1539692549, "answer_id": 52835394, "question_id": 48177285, "link": "https://stackoverflow.com/questions/48177285/error-using-lambda-in-batch-action-active-admin-rails-5/52835394#52835394", "title": "Error using lambda in batch_action (Active Admin, Rails 5)", "body": "<p>I worked around this error in Rails4.4.2 </p>\n\n<pre><code>wrong number of arguments (given 1, expected 0)\n</code></pre>\n\n<p>with the following obvious workaround</p>\n\n<pre><code>form_lambda = lambda do |id = nil|\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5691440, "user_type": "registered", "profile_image": "https://graph.facebook.com/484442348395493/picture?type=large", "display_name": "David Barrientos", "link": "https://stackoverflow.com/users/5691440/david-barrientos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 52835394, "answer_count": 2, "score": 0, "last_activity_date": 1539692549, "creation_date": 1515535272, "question_id": 48177285, "link": "https://stackoverflow.com/questions/48177285/error-using-lambda-in-batch-action-active-admin-rails-5", "title": "Error using lambda in batch_action (Active Admin, Rails 5)", "body": "<p>I have a problem when I want to use a lambda inside a batch_action in Active Admin. This error only appears when I use a lambda since when I use a block the error disappears but the list is not updated. This is my code</p>\n\n<pre><code>batch_action :set_cohorts, form: -&gt; {{cohort: Cohort.order(:name).pluck(:name, :id)}} do |ids, inputs|\n  cohort = Cohort.find(inputs[:cohort])        \nend\n\nform do |f|\n  inputs 'Secci\u00f3n' do\n    f.semantic_errors\n    input :cohort, as: :select, collection: -&gt; {Cohort.order(:name).pluck(:name, :id)}\n    input :name\n    input :position\n    input :active, as: :radio\n  end\n  f.actions\nend\n</code></pre>\n\n<p>And the error is </p>\n\n<pre><code>wrong number of arguments (given 1, expected 0)\n</code></pre>\n\n<ul>\n<li>I am using \n\n<ul>\n<li>Rails 5.1.4</li>\n<li>Ruby 2.4.3</li>\n<li>Active Admin 2.0.0.alpha</li>\n</ul></li>\n</ul>\n\n<p>Any suggestion is welcome. Tnks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rack"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1515535033, "post_id": 48177142, "comment_id": 83334554, "body": "What errors are you getting? They&#39;re usually informative."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1515535064, "post_id": 48177142, "comment_id": 83334566, "body": "One thing I note here is you&#39;re creating a new router for every request. You probably want a persistent one that&#39;s used repeatedly."}, {"owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515536827, "post_id": 48177142, "comment_id": 83335255, "body": "In responding to your question I tried a bunch of different ways, so I just tried a new way to give the error message but this time it actually worked. If I put the block inside a method and put it in a separate folder, require the folder, and call the method in initialize it works. Pretty simple."}, {"owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515537175, "post_id": 48177142, "comment_id": 83335396, "body": "But your point about creating the new routes hash for each request is valid. But each request is to a different url so it has to go through the route matching each time. Persisting the @routes variable would be good but I don&#39;t think there&#39;s any way to do it without saving it to a session or cookie."}], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 2, "last_activity_date": 1515537280, "creation_date": 1515537280, "answer_id": 48177636, "question_id": 48177142, "link": "https://stackoverflow.com/questions/48177142/in-ruby-how-do-i-move-a-block-out-of-a-class-into-its-own-file/48177636#48177636", "title": "In Ruby, how do I move a block out of a class into it&#39;s own file?", "body": "<p>Although it's not so pretty like Rails you can try to adjust it to your case:</p>\n\n<p>File <strong>routes.rb</strong>:</p>\n\n<pre><code>class Routes                                                                                                            \n  def self.routes                                                                                                       \n    Proc.new do                                                                                                         \n      match 'url', 'foo#bar'                                                                                            \n      match 'url2', 'foo#baz'                                                                                           \n    end                                                                                                                 \n  end                                                                                                                   \nend \n</code></pre>\n\n<p>File <strong>router.rb</strong>:</p>\n\n<pre><code>require_relative './routes'                                                                                             \n\nclass Router                                                                                                            \n  attr_reader :routes                                                                                                   \n\n  def initialize                                                                                                        \n    @routes = {}                                                                                                        \n\n    draw Routes.routes                                                                                                  \n  end                                                                                                                   \n\n  def draw(block)                                                                                                       \n    instance_eval(&amp;block)                                                                                               \n  end                                                                                                                   \n\n  def match(url, handler)                                                                                               \n    @routes[url] = handler                                                                                              \n  end                                                                                                                   \nend \n</code></pre>\n\n<p>So you can have defined in a separated file routes:                                                                                                         </p>\n\n<pre><code>p Router.new.routes # =&gt; {\"url\"=&gt;\"foo#bar\", \"url2\"=&gt;\"foo#baz\"}\n</code></pre>\n"}], "owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 48177636, "answer_count": 1, "score": 1, "last_activity_date": 1515537280, "creation_date": 1515534518, "question_id": 48177142, "link": "https://stackoverflow.com/questions/48177142/in-ruby-how-do-i-move-a-block-out-of-a-class-into-its-own-file", "title": "In Ruby, how do I move a block out of a class into it&#39;s own file?", "body": "<p>As a learning exercise I am making a simplified Rails-like MVC framework.\nHere is a simplified version of the flow. The framework and app are combined here.</p>\n\n<p>1) Initiate a new Rack application.</p>\n\n<pre><code># config.ru\nrequire_relative 'config/application.rb'\nrun Application.new\n</code></pre>\n\n<p>2) Instantiate a Rack request object, then instantiate a new Router class instance, passing the request object, and call the resolve method.</p>\n\n<pre><code># config/application.rb\nrequire_relative '../lib/router.rb'\nclass Application\n  def call(env)\n    request = Rack::Request.new(env)\n    Router.new(request).resolve\n  end\nend\n</code></pre>\n\n<p>3) When the Router instance is created, I am building a @routes variable assigned to a hash of the application's routes and their corresponding controller and action. Like Rails this is a block. The draw and match methods are defined in this same Router class. Draw runs the block and the match method adds each route to the @routes hash. This works fine.</p>\n\n<pre><code># lib/router.rb\nclass Router\n  attr_reader :request, :routes\n\n  def initialize(request)\n    @request = request\n    @routes = {}\n    draw do\n      match \"/\", \"pages#home\"\n      match \"/contact\", \"pages#contact\"\n      match \"/about\", \"pages#about\"\n    end\n  end\n\n  def draw(&amp;block)\n    instance_eval(&amp;block)\n  end\n\n  def match(url, controller_action)\n    @routes[\"#{url}\"] = controller_action\n  end\n  # more code... def resolve, etc.\nend\n</code></pre>\n\n<p>Like Rails I want the draw block in it's own file so the routes can be set in the app's config/routes.rb file and manipulated in the framework's lib/router.rb file. How do I do this? Everything I've tried throws errors.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 4679332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6A3_vIZehYw/AAAAAAAAAAI/AAAAAAAACI0/ExTSSO1w_l4/photo.jpg?sz=128", "display_name": "Christopher Warrington", "link": "https://stackoverflow.com/users/4679332/christopher-warrington"}, "edited": false, "score": 0, "creation_date": 1515534552, "post_id": 48176836, "comment_id": 83334330, "body": "Thank you! That did it. I didn&#39;t know that it was looking for a nested params. Thank you for that, @Derek!"}], "tags": [], "owner": {"reputation": 3437, "user_id": 301059, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79b1b001d5ff186c9bd02e7487aa4142?s=128&d=identicon&r=PG", "display_name": "Derek Prior", "link": "https://stackoverflow.com/users/301059/derek-prior"}, "is_accepted": true, "score": 2, "last_activity_date": 1515532906, "creation_date": 1515532906, "answer_id": 48176836, "question_id": 48176647, "link": "https://stackoverflow.com/questions/48176647/how-to-bypass-the-form-and-pass-information-straight-to-the-create-action-with-a/48176836#48176836", "title": "How to bypass the form and pass information straight to the create action with a link_to in Rails", "body": "<p>The issue is with how you are passing the parameters to the controller vs how you are consuming them in the controller. Your controller does this:</p>\n\n<pre><code>def involvement_params\n  params.require(:involvement).permit(:member_id, :support_id)\nend\n</code></pre>\n\n<p>This expects <code>:member_id</code> and <code>:support_id</code> to be nested under <code>involvement</code> but you are passing them as top-level parameters in the URL. Try updating your link like so:</p>\n\n<pre><code>&lt;%= link_to \"Start Supporting\",\n  involvements_path(\n    involvement: {\n      member_id: current_member.id,\n      support_id: support_area.id\n    }\n  ),\n  method: :post \n%&gt;\n</code></pre>\n\n<p>This should properly nest the parameters.</p>\n"}], "owner": {"reputation": 628, "user_id": 4679332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6A3_vIZehYw/AAAAAAAAAAI/AAAAAAAACI0/ExTSSO1w_l4/photo.jpg?sz=128", "display_name": "Christopher Warrington", "link": "https://stackoverflow.com/users/4679332/christopher-warrington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 48176836, "answer_count": 1, "score": 1, "last_activity_date": 1515532906, "creation_date": 1515532016, "question_id": 48176647, "link": "https://stackoverflow.com/questions/48176647/how-to-bypass-the-form-and-pass-information-straight-to-the-create-action-with-a", "title": "How to bypass the form and pass information straight to the create action with a link_to in Rails", "body": "<p><strong>Setup</strong></p>\n\n<p>App has 3 models. A Member model, a Support model and an Involvement model. The member model keeps track of all of the users for my web app. The support model keeps track of the many different ways a user can support our organization. The Involvement model connects the other two models by keeping track of the member_id and support_id showing in which support areas the member is active. </p>\n\n<p><strong>Current Functionality</strong></p>\n\n<p>In a member's profile, they can look at a support tab which queries all the different areas that they can support from the support model. It then checks if there is a involvement that includes both their id and the id of that support area and states whether they are currently supporting or not. </p>\n\n<p><strong>Desired Outcome</strong></p>\n\n<p>I want to have a link that they can click on that will either create or delete an involvement. So, if they are currently supporting financially, it will state that they are and provide a link to stop supporting that way, which when clicked will delete the involvement record; and vise versa, if they are not supporting financially, a link will show to start supporting and that link will create the involvement record. (Ultimately I am going to integrate a toggle function which will allow a member to just toggle back and forth, but I need to work this out first.)</p>\n\n<p><strong>Question</strong></p>\n\n<p>Is there a way to send params via <code>link_to</code> to the 'create' or 'destroy' actions to bring about this functionality? Currently I am doing the following but get an error: </p>\n\n<pre><code>&lt;%= \n    link_to \"Start Supporting\", \n    involvements_path(member_id: current_member.id, \n                      support_id: support_area.id), \n    method: :post \n%&gt;\n</code></pre>\n\n<p>Error</p>\n\n<pre><code>ActionController::ParameterMissing in InvolvementsController#create\nparam is missing or the value is empty: involvement\n</code></pre>\n\n<p>When I do byebug, I get the following output for params:</p>\n\n<pre><code>(byebug) params\n&lt;ActionController::Parameters {\"_method\"=&gt;\"post\", \n                               \"member_id\"=&gt;\"1\", \n                               \"support_id\"=&gt;\"2\",                                                                                                                                             \n                               \"controller\"=&gt;\"involvements\", \n                               \"action\"=&gt;\"create\"} \n                                permitted: false&gt;\n</code></pre>\n\n<p>So, it doesn't look like params is empty... is it not passing through the whitelist? Any ideas?</p>\n\n<p><strong>Code</strong></p>\n\n<p>rake routes</p>\n\n<pre><code>    involvements GET    /involvements(.:format)           involvements#index\n                 POST   /involvements(.:format)           involvements#create\n new_involvement GET    /involvements/new(.:format)       involvements#new\nedit_involvement GET    /involvements/:id/edit(.:format)  involvements#edit\n     involvement GET    /involvements/:id(.:format)       involvements#show\n                 PATCH  /involvements/:id(.:format)       involvements#update\n                 PUT    /involvements/:id(.:format)       involvements#update\n                 DELETE /involvements/:id(.:format)       involvements#destroy\n</code></pre>\n\n<p>app/models/involvement.rb</p>\n\n<pre><code>class Involvement &lt; ApplicationRecord\n  belongs_to :member\nend\n</code></pre>\n\n<p>db/schema.rb</p>\n\n<pre><code>create_table \"involvements\", force: :cascade do |t|\n   t.bigint \"member_id\"\n   t.integer \"support_id\"\n   t.datetime \"created_at\", null: false\n   t.datetime \"updated_at\", null: false\n   t.index [\"member_id\"], name: \"index_involvements_on_member_id\"\nend\n</code></pre>\n\n<p>app/views/profiles/show.html.erb</p>\n\n<pre><code>&lt;% if @user == 'Owner' %&gt;\n\n  &lt;% if @show_page == 'account' %&gt;\n    &lt;%= render 'profile_account' %&gt;\n  &lt;% elsif @show_page == 'main' %&gt;\n    &lt;%= render 'profile_main', locals: { profile: @profile, \n                                         user: @user } %&gt;\n  &lt;% elsif @show_page == 'support' %&gt;\n    &lt;%= render 'profile_support', locals: { profile: @profile, \n                                            user: @user, \n                                            supports: @supports, \n                                            involvement: @involvements \n                                          } %&gt;\n  &lt;% else %&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        window.location.href=\"&lt;%= \n               member_profile_path(current_member.profile.u_name) \n        %&gt;\"\n    &lt;/script&gt;\n  &lt;% end %&gt;\n\n&lt;% else %&gt;\n  &lt;%= render 'profile_main', locals: { profile: @profile, \n                                       user: @user } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>app/views/profiles/_profile_support.html.erb</p>\n\n<pre><code>&lt;h1&gt;This is the Support Page&lt;/h1&gt;\n\n&lt;table style=\"width:50%\"&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Support Area&lt;/th&gt;\n    &lt;th&gt;Support Status&lt;/th&gt;\n    &lt;th&gt;Change Status&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;% @supports.each do |support_area| %&gt;\n    &lt;tr&gt;  \n      &lt;th&gt;\n        &lt;%= link_to support_area.title, support_page_path(support_area.title) %&gt;\n      &lt;/th&gt;\n      &lt;th&gt;\n        &lt;% @presence_check = Involvement.exists?(member_id: current_member.id, \n                                                 support_id: support_area.id) %&gt;\n        &lt;% if @presence_check %&gt;\n          Supporting\n        &lt;% else %&gt;\n          Not Supporting\n        &lt;% end %&gt;\n      &lt;/th&gt;\n      &lt;th&gt;\n        &lt;%= link_to \"Start Supporting\", \n                    involvements_path(member_id: current_member.id, \n                                      support_id: support_area.id), \n                    method: :post %&gt;\n      &lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>app/controllers/involvements_controller.rb</p>\n\n<pre><code>class InvolvementsController &lt; ApplicationController\n  before_action :set_involvement, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @involvements = Involvement.all\n  end\n\n  def show\n  end\n\n  def new\n    @involvement = Involvement.new\n  end\n\n  def edit\n  end\n\n  def create    \n    @involvement = Involvement.new(involvement_params)\n    # byebug\n    respond_to do |format|\n      if @involvement.save\n        format.html { redirect_to @involvement, \n                      notice: 'Involvement was successfully created.' }\n      else\n        format.html { render :new }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @involvement.update(involvement_params)\n        format.html { redirect_to @involvement, \n                      notice: 'Involvement was successfully updated.' }\n      else\n        format.html { render :edit }\n      end\n    end\n  end\n\n  def destroy\n    @involvement.destroy\n    respond_to do |format|\n      format.html { redirect_to involvements_url, \n                    notice: 'Involvement was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_involvement\n      @involvement = Involvement.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, \n    # only allow the white list through.\n\n    def involvement_params\n      # byebug\n      params.require(:involvement).permit(:member_id, :support_id)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "linux", "google-chrome", "selenium", "amazon-ec2"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1515574374, "post_id": 48176354, "comment_id": 83346680, "body": "Your code trials please?"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 4749378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec03a176e985e048ab14b4de7970825b?s=128&d=identicon&r=PG&f=1", "display_name": "Lloydo", "link": "https://stackoverflow.com/users/4749378/lloydo"}, "is_accepted": false, "score": 2, "last_activity_date": 1521573047, "last_edit_date": 1521573047, "creation_date": 1521565704, "answer_id": 49390276, "question_id": 48176354, "link": "https://stackoverflow.com/questions/48176354/unable-to-connect-to-chromedriver-127-0-0-19515-amazon-linux-ami/49390276#49390276", "title": "unable to connect to chromedriver 127.0.0.1:9515. Amazon Linux AMI", "body": "<p>Firstly, locate your chromedriver (possibly /usr/bin) and check your dependencies:</p>\n\n<pre><code>ldd /usr/bin/chromedriver\n</code></pre>\n\n<p>It is likely you'll be missing at least libgconf-2</p>\n\n<p>If this is the case, try this to resolve: <a href=\"https://forums.aws.amazon.com/thread.jspa?threadID=229187\" rel=\"nofollow noreferrer\">https://forums.aws.amazon.com/thread.jspa?threadID=229187</a></p>\n"}], "owner": {"reputation": 55, "user_id": 8172461, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20867da9160bcd0a4989c60f0c5c4746?s=128&d=identicon&r=PG&f=1", "display_name": "belshnickleson97", "link": "https://stackoverflow.com/users/8172461/belshnickleson97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1521573047, "creation_date": 1515530510, "question_id": 48176354, "link": "https://stackoverflow.com/questions/48176354/unable-to-connect-to-chromedriver-127-0-0-19515-amazon-linux-ami", "title": "unable to connect to chromedriver 127.0.0.1:9515. Amazon Linux AMI", "body": "<p>I am setting up my <code>selenium-webdriver</code> tests with Linux and working on automating my tests with Cron Jobs. When running my script I am receiving this error </p>\n\n<pre><code>Selenium::WebDriver::Error::WebDriverError:\n   unable to connect to chromedriver 127.0.0.1:9515\n</code></pre>\n\n<p><code>which chromedriver</code> returns:</p>\n\n<p><code>/usr/bin/chromedriver</code></p>\n\n<p>and <code>which google-chrome-stable</code> returns: </p>\n\n<p><code>/usr/bin/google-chrome-stable</code></p>\n\n<p>I thought that the error was related to not having Chrome installed yet, so I did that, but has not seemed to fix my issue. </p>\n\n<p>How can I work through this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "encryption"], "comments": [{"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 6, "creation_date": 1515530384, "post_id": 48176209, "comment_id": 83332461, "body": "Please don&#39;t take offense, if you need to ask this question, you&#39;re probably in over your head. What you&#39;re making is pretty much a password manager, or some form of it, and what you are asking about is the key part. Hire a security expert."}, {"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 1, "creation_date": 1515530484, "post_id": 48176209, "comment_id": 83332510, "body": "If you insist on doing this yourself, I would approach the problem by using the users password client side to derive a key using PBKDF2 or similar and then encrypt the login information client side with a symmetric algorithm.  You can then reverse the process when the login information is required."}, {"owner": {"reputation": 67, "user_id": 3573216, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/524115281/picture?type=large", "display_name": "Tomas Campos", "link": "https://stackoverflow.com/users/3573216/tomas-campos"}, "reply_to_user": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1515536141, "post_id": 48176209, "comment_id": 83334992, "body": "Thanks, i didnt take it as an offense. The process run synchronously in the server side, therefore the user will never see the passwords again. Decrypting in the client side wouldnt work."}], "owner": {"reputation": 67, "user_id": 3573216, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/524115281/picture?type=large", "display_name": "Tomas Campos", "link": "https://stackoverflow.com/users/3573216/tomas-campos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515530237, "creation_date": 1515529797, "last_edit_date": 1515530237, "question_id": 48176209, "link": "https://stackoverflow.com/questions/48176209/how-to-scrape-a-website-login-to-a-user-account-and-avoid-to-see-its-user-passw", "title": "How to scrape a website, login to a user account and avoid to see its user password?", "body": "<p>Im building an application based in Ruby-On-Rails that facilitate users to obtain their information from different websites into one centralized dashboard. To do that, at the beginning the app asks for their login information (user+password) of every website.</p>\n\n<p>Because we are working with sensitive information we have to save the users data encrypted in our database. Afterwards, to login into the users account, we decrypt the password in the database and login to the webpage using his/her info.</p>\n\n<p>We want to avoid to see the user private information at any moment during the web-scraping.<strong>Is there a way to use their information to login into their account and obtain the data that they are looking for, avoiding any chance for us to see their private information ?</strong></p>\n"}, {"tags": ["json", "ruby", "rendering", "padrino"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1515534636, "post_id": 48176107, "comment_id": 83334364, "body": "have you tried adding <code>.json</code> to the url e.g. (<a href=\"http://localhost:3000/mymodels.json\" rel=\"nofollow noreferrer\">localhost:3000/mymodels.json</a>). Just a suggestion No Guarantees"}], "owner": {"reputation": 4754, "user_id": 1209628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa17169df5962bb7d05e661c3b6ba4f1?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/1209628/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1515529310, "creation_date": 1515529310, "question_id": 48176107, "link": "https://stackoverflow.com/questions/48176107/padrino-rendering-json-raises-template-not-found", "title": "Padrino rendering json raises template not found", "body": "<p>I am using Padrino and facing the next issue. I would like to render jsons, the controller is the following and then the error I always get.</p>\n\n<p>I call the end point with:</p>\n\n<pre><code>curl -i -H \"Accept: application/json\" http://localhost:3000/mymodels\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>get :index, provides: [:html, :json] do\n  @models = MyModel.all\n  case content_type # is json!\n  when :html then\n    render \"index\", collection: @models\n  when :json then\n    # render @models.to_json, layout: false # does not work either\n    render @models\n  end\nend\n</code></pre>\n\n<p>The error msg is: <code>Padrino::Rendering::TemplateNotFound</code>\nThe above code based on this <a href=\"https://stackoverflow.com/questions/8386446/padrino-model-from-json-data\">SO answer</a></p>\n\n<p>Do you have any idea how I can make it render pure json and avoid tempate rendering in case of json?</p>\n"}, {"tags": ["ruby", "api"], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": false, "score": 0, "last_activity_date": 1515531527, "last_edit_date": 1515531527, "creation_date": 1515530654, "answer_id": 48176379, "question_id": 48175503, "link": "https://stackoverflow.com/questions/48175503/ruby-http-post-request-authorization-in-header/48176379#48176379", "title": "Ruby HTTP post request authorization in header", "body": "<p>Here is a little example:</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\n\nurl = URI.parse('http://some.url')\n\nreq = Net::HTTP::Get.new(url.path)\nreq.add_field('X-Forwarded-For', '0.0.0.0')\n# For content type, you could also use content_type=(type, params={})\n# req.set_form_data({'query' =&gt; 'search me'})\n# req['X-Forwarded-For'] = '0.0.0.0'\n\nres = Net::HTTP.new(url.host, url.port).start do |http|\n  http.request(req)\nend\n\nputs res.body\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8593629, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ywgo3XOFCNc/AAAAAAAAAAI/AAAAAAAAH8Y/zj_OPTMUCPg/photo.jpg?sz=128", "display_name": "Austin", "link": "https://stackoverflow.com/users/8593629/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515531527, "creation_date": 1515526642, "last_edit_date": 1515526792, "question_id": 48175503, "link": "https://stackoverflow.com/questions/48175503/ruby-http-post-request-authorization-in-header", "title": "Ruby HTTP post request authorization in header", "body": "<p>I'm trying to write some scripts in Ruby to interface with Guild Wars 2's API (<a href=\"https://api.guildwars2.com/v2\" rel=\"nofollow noreferrer\">https://api.guildwars2.com/v2</a>)</p>\n\n<p>At the bottom of that page it has this info:</p>\n\n<blockquote>\n  <p>APIs which require authentication need to be passed an API key belonging to\n  the account to be accessed. The API key must have the appropriate permissions\n  associated with it (/v2/tokeninfo can be used to inspect key permissions). Keys\n  can be generated on the ArenaNet account site.</p>\n  \n  <p>Keys can be passed either via query parameter or HTTP header. Our servers do\n  not support preflighted CORS requests, so if your application is running\n  in the user's browser you'll need to user the query parameter.</p>\n  \n  <p>To pass via query parameter, include \"?access_token=\" in your request.</p>\n  \n  <p>To pass via HTTP header, include \"Authentication: Bearer (API key)\".</p>\n</blockquote>\n\n<p>The code I'm working with right now is as follows:</p>\n\n<pre><code>class Gw2\n  attr_reader :response, :uri, :http\n\n  def initialize\n    @uri = URI.parse('https://api.guildwars2.com/v2')\n\n    @http = Net::HTTP.new(@uri.host, @uri.port)\n    @http.use_ssl = true\n\n    @http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n  end\n\n  def wallet\n    path =\"/v2/account/wallet\"\n    @response = @http.get(path).body\n  end\nend\n</code></pre>\n\n<p>I'm not sure how to go about setting that up.</p>\n"}, {"tags": ["json", "ruby", "discogs-api"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 1, "creation_date": 1515526318, "post_id": 48175374, "comment_id": 83330492, "body": "<code>puts p[location]</code> is looking for a variable named <code>location</code>.  Do you mean either <code>&#39;location&#39;</code> or <code>:location</code>?  Though, going back to your original implementation, <code>aw.get_user_inventory</code> appears to already return a Hash-type object, and not JSON, so you don&#39;t need to <code>JSON.parse</code> what it returns."}, {"owner": {"reputation": 79, "user_id": 9194880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491d3d73b2a80eb434e7034a36e04704?s=128&d=identicon&r=PG&f=1", "display_name": "rtuz2th", "link": "https://stackoverflow.com/users/9194880/rtuz2th"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1515526511, "post_id": 48175374, "comment_id": 83330582, "body": "When I try puts p[&#39;location&#39;] I just get an empty response.  I&#39;m sorry, I&#39;m pretty new to this whole stuff, I do not get your second sentence. I tried referring inv without parsing it, but I could not get anything from it."}, {"owner": {"reputation": 79, "user_id": 9194880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491d3d73b2a80eb434e7034a36e04704?s=128&d=identicon&r=PG&f=1", "display_name": "rtuz2th", "link": "https://stackoverflow.com/users/9194880/rtuz2th"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1515526613, "post_id": 48175374, "comment_id": 83330637, "body": "Just tried pp inv[&#39;location&#39;] without parsing it at all, just got a nil as a response."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1515527824, "last_edit_date": 1515527824, "creation_date": 1515527677, "answer_id": 48175736, "question_id": 48175374, "link": "https://stackoverflow.com/questions/48175374/problems-parsing-a-json-file-in-ruby/48175736#48175736", "title": "Problems Parsing a Json File in Ruby", "body": "<pre><code>inv = inv.to_json\np = JSON.parse(inv)\n</code></pre>\n\n<p>The above is a noop. Use <code>inv</code> as is, it\u2019s a hash already.</p>\n\n<hr>\n\n<pre><code>puts p[location]\n</code></pre>\n\n<p>You cannot just lookup whatever key located deeply in the tree hierarchy or you hash. You hash has stings as keys, it has a two top-level elements, <code>'pagination'</code> and <code>'listings'</code>, the latter is an array, and each element of this array is a hash having <code>location</code> key.</p>\n\n<hr>\n\n<p>While you were cutting the long value, you dropped the ending comma, making me unable to copy-paste the input and provide the exact answer.</p>\n"}], "owner": {"reputation": 79, "user_id": 9194880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491d3d73b2a80eb434e7034a36e04704?s=128&d=identicon&r=PG&f=1", "display_name": "rtuz2th", "link": "https://stackoverflow.com/users/9194880/rtuz2th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515527824, "creation_date": 1515526126, "question_id": 48175374, "link": "https://stackoverflow.com/questions/48175374/problems-parsing-a-json-file-in-ruby", "title": "Problems Parsing a Json File in Ruby", "body": "<p>I'm pretty new to programming ruby and using json packages, I think I'm facing a typical noob-error, but I just cant find my mistake for two days now.. I've started like this:</p>\n\n<pre><code>require 'discogs-wrapper'\nrequire 'json'\n\naw = Discogs::Wrapper.new(\"my_application\", user_token: \"my_user_token\")\ninv = aw.get_user_inventory('my_user_name', :per_page =&gt; 1, :page =&gt; 1)\np=JSON.parse(inv)\n</code></pre>\n\n<p>What I recieve is this:</p>\n\n<pre><code>C:/Ruby24-x64/lib/ruby/2.4.0/json/common.rb:156:in `initialize': no implicit conversion of Hashie::Mash into String (TypeError)\nfrom C:/Ruby24-x64/lib/ruby/2.4.0/json/common.rb:156:in `new'\nfrom C:/Ruby24-x64/lib/ruby/2.4.0/json/common.rb:156:in `parse'\nfrom C:/Users/rtuz2th/.RubyMine2017.3/config/scratches/scratch.rb:6:in `&lt;top (required)&gt;'\nfrom -e:1:in `load'\nfrom -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>I've already been searching your forum and I've learned that this error probably means that I do not have a correct JSON-file (although it comes straight from the discogs-api, I basically thought these guys know what they do). So what I tried next was</p>\n\n<pre><code>require 'discogs-wrapper'\nrequire 'json'\n\naw = Discogs::Wrapper.new(\"my_application\", user_token: \"my_user_token\")\ninv = aw.get_user_inventory('my_user_name', :per_page =&gt; 1, :page =&gt; 1)\ninv = inv.to_json    \np=JSON.parse(inv)\n</code></pre>\n\n<p>So at least, my code runs without any errors now. But when I try to refer to any information in inv, I just get empty responses. inv (without the .to_json looks like this:</p>\n\n<pre><code>  {\"pagination\"=&gt;\n  {\"per_page\"=&gt;1,\n   \"items\"=&gt;13692,\n   \"page\"=&gt;1,\n   \"urls\"=&gt;\n    {\"last\"=&gt;\n      \"URL containing tokens\",\n     \"next\"=&gt;\n      \"URL containing tokens\"},\n   \"pages\"=&gt;13692},\n \"listings\"=&gt;\n  [{\"status\"=&gt;\"Draft\",\n    \"original_price\"=&gt;\n     {\"curr_abbr\"=&gt;\"EUR\",\n      \"formatted\"=&gt;\"\\u20AC10.46\",\n      \"value\"=&gt;10.46,\n      \"curr_id\"=&gt;3},\n    \"weight\"=&gt;230.0,\n    \"original_shipping_price\"=&gt;\n     {\"curr_abbr\"=&gt;\"EUR\",\n      \"formatted\"=&gt;\"\\u20AC5.90\",\n      \"value\"=&gt;5.9,\n      \"curr_id\"=&gt;3},\n    \"price\"=&gt;{\"currency\"=&gt;\"EUR\", \"value\"=&gt;10.46},\n    \"allow_offers\"=&gt;true,\n    \"uri\"=&gt;\"https://www.discogs.com/sell/item/437965910\",\n    \"sleeve_condition\"=&gt;\"Very Good Plus (VG+)\",\n    \"format_quantity\"=&gt;1,\n    \"id\"=&gt;437965910,\n    \"shipping_price\"=&gt;{\"currency\"=&gt;\"EUR\", \"value\"=&gt;5.9},\n    \"posted\"=&gt;\"2017-02-07T23:43:01-08:00\",\n    \"ships_from\"=&gt;\"Germany\",\n    \"in_cart\"=&gt;false,\n    \"comments\"=&gt;\"\",\n    \"seller\"=&gt;\n     {\"username\"=&gt;\"zweischeiben.de\",\n      \"stats\"=&gt;{\"rating\"=&gt;\"100.0\", \"total\"=&gt;143, \"stars\"=&gt;5.0},\n      \"uid\"=&gt;3359767,\n      \"url\"=&gt;\"https://api.discogs.com/users/zweischeiben.de\",\n      \"html_url\"=&gt;\"https://www.discogs.com/user/zweischeiben.de\",\n      \"shipping\"=&gt;\n       \"(Lots of information about shipping, cut just cut it out)\"\n      \"payment\"=&gt;\"Bank Transfer, PayPal\",\n      \"avatar_url\"=&gt;\n       \"(cut out url)\",\n      \"resource_url\"=&gt;\"https://api.discogs.com/users/zweischeiben.de\",\n      \"id\"=&gt;3359767},\n    \"condition\"=&gt;\"Near Mint (NM or M-)\",\n    \"release\"=&gt;\n     {\"thumbnail\"=&gt;\n       \"(cut out url)\",\n      \"description\"=&gt;\"Steamhammer - Mountains (LP, Album, RE)\",\n      \"artist\"=&gt;\"Steamhammer\",\n      \"format\"=&gt;\"LP, Album, RE\",\n      \"resource_url\"=&gt;\"https://api.discogs.com/releases/7303333\",\n      \"title\"=&gt;\"Mountains\",\n      \"year\"=&gt;0,\n      \"id\"=&gt;7303333,\n      \"catalog_number\"=&gt;\"201.006, 0201.006\"},\n                        \"resource_url\"=&gt;\"https://api.discogs.com/marketplace/listings/437965910\",\n\"audio\"=&gt;false,\n\"external_id\"=&gt;\"3, 16\",\n\"location\"=&gt;\"T52574\"}]}\n</code></pre>\n\n<p>But if I now try to refer to eg the location:</p>\n\n<pre><code>require 'discogs-wrapper'\nrequire 'json'\n\naw = Discogs::Wrapper.new(\"my_application\", user_token: \"my_token\")\ninv=aw.get_user_inventory('my_username', :per_page =&gt; 1, :page =&gt; 1)\ninv=inv.to_json\np=JSON.parse(inv)\nputs p[location]\n</code></pre>\n\n<p>I'm just getting an error like this</p>\n\n<pre><code>C:\\Ruby24-x64\\bin\\ruby.exe -e     $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift)             C:/Users/rtuz2th/.RubyMine2017.3/config/scratches/scratch.rb\nC:/Users/rtuz2th/.RubyMine2017.3/config/scratches/scratch.rb:9:in `&lt;top (required)&gt;': undefined local variable or method `location' for main:Object (NameError)\nfrom -e:1:in `load'\nfrom -e:1:in `&lt;main&gt;'\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>or an empty response. I'm trying to solve this for two days now, but I'm absolutely out of ideas. Thanks for your help in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1515530557, "post_id": 48175106, "comment_id": 83332545, "body": "Un-set values (including hidden) will be blank, not nil."}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1515531092, "post_id": 48175106, "comment_id": 83332789, "body": "@DaveNewton So is my original implementation the way to go? Thoughts?"}], "tags": [], "owner": {"reputation": 1, "user_id": 6884557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edb2e209eab7c24b195572c128d9b83?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Doss", "link": "https://stackoverflow.com/users/6884557/jacob-doss"}, "is_accepted": false, "score": -1, "last_activity_date": 1515524977, "creation_date": 1515524977, "answer_id": 48175106, "question_id": 48174936, "link": "https://stackoverflow.com/questions/48174936/set-parameter-if-blank/48175106#48175106", "title": "Set Parameter if blank", "body": "<pre><code>if params[:record_type][:id].nil? # or replace \".nil?\" with \"== nil\"\nparams[:record_type][:id] = 1234\nend\n</code></pre>\n\n<p>personally, this is the way I prefer to do it. Some ways are more efficient than others, but if that works for you I'd roll with it.</p>\n"}, {"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1515530275, "post_id": 48175170, "comment_id": 83332398, "body": "Ok, so I have a case where I have nested address attributes on a shopping cart. I&#39;m wanting to set the id in case the user goes to another tab and submits the original form (which creates addresses rather than updates the addresses saved in the database). With this case, instead of updating the current addresses, more addresses are created. I figured that setting the id parameter of the nested attribute would solve the issue. How would this need to look with the reverse_merge? I&#39;ve updated the question with the exact param value I am trying to change."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1515530633, "post_id": 48175170, "comment_id": 83332578, "body": "I wouldn&#39;t embed this logic directly into the model, though (most likely). Here it&#39;s specific to a submitted form/API call, which may not be universally applicable."}], "tags": [], "owner": {"reputation": 3437, "user_id": 301059, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79b1b001d5ff186c9bd02e7487aa4142?s=128&d=identicon&r=PG", "display_name": "Derek Prior", "link": "https://stackoverflow.com/users/301059/derek-prior"}, "is_accepted": false, "score": 0, "last_activity_date": 1515525205, "creation_date": 1515525205, "answer_id": 48175170, "question_id": 48174936, "link": "https://stackoverflow.com/questions/48174936/set-parameter-if-blank/48175170#48175170", "title": "Set Parameter if blank", "body": "<p>There's a chance <code>[:record_type]</code> is nil which will lead to an undefined method error when you attempt to call <code>[:id]</code> on <code>nil</code>. Additionally, I'd find it a bit weird to directly mutate params, even though you technically <em>can</em> do that. I'd consider using Strong Parameter processing methods like so (added a full action, which isn't in your sample, to give more context on how this would be used):</p>\n\n<pre><code>def create\n  @record_type = RecordType.new(record_type_params)\n\n  if record_type.save\n    redirect_to @record_type\n  else\n    render :new\n  end\nend\n\ndef record_type_params\n  params.require(:record_type).permit(:id).reverse_merge(id: 1234)\nend\n</code></pre>\n\n<p>The <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-reverse_merge\" rel=\"nofollow noreferrer\"><code>reverse_merge</code></a> call is a way to merge the user-supplied parameters into your defaults. This accomplishes what you're after in what I would consider a more conventional way and doesn't mutate <code>params</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3887, "user_id": 7914637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x_BhuHcC8Ww/AAAAAAAAAAI/AAAAAAAAABg/hiPWIjRXbhI/photo.jpg?sz=128", "display_name": "Alexander", "link": "https://stackoverflow.com/users/7914637/alexander"}, "edited": false, "score": 1, "creation_date": 1515555619, "post_id": 48178734, "comment_id": 83339921, "body": "While this code may answer the question, providing additional context regarding <b>how</b> and <b>why</b> it solves the problem would improve the answer&#39;s long-term value."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 0, "last_activity_date": 1515544790, "creation_date": 1515544790, "answer_id": 48178734, "question_id": 48174936, "link": "https://stackoverflow.com/questions/48174936/set-parameter-if-blank/48178734#48178734", "title": "Set Parameter if blank", "body": "<pre><code>def cart_params\n  params.require(:cart).permit(:cart_addresses_attributes =&gt; [:id]).tap do |p|\n    p[:cart_addresses_attributes][\"0\"][:id] ||= 1234\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1515553182, "creation_date": 1515524114, "last_edit_date": 1515553182, "question_id": 48174936, "link": "https://stackoverflow.com/questions/48174936/set-parameter-if-blank", "title": "Set Parameter if blank", "body": "<p>I need to set the <code>id</code> parameter to a value if it is wasn't submitted with the form. </p>\n\n<p>Is it ok to do something like this in Rails or does this violate any standards or cause possible issues?</p>\n\n<pre><code>if params[:cart][:cart_addresses_attributes][\"0\"][:id].blank?\n  params[:cart][:cart_addresses_attributes][\"0\"][:id] = 1234 #default id\nend\n</code></pre>\n\n<p>My implementation works with this logic, but I am not sure if this is the proper way to handle the issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "utf-8", "console"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1515522873, "post_id": 48174592, "comment_id": 83328838, "body": "You are not saving the Course after you change it. Try <code>course.shortname.gsub!(&#47;&amp;nbsp;&#47;i,&quot; &quot;); course.save!</code>"}, {"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1515524057, "post_id": 48174592, "comment_id": 83329470, "body": "Hmm. This doesn&#39;t quite seem to work. I looked at the UTF-8 encoding and want to replace \\xC2\\xA0 with \\x20. Any idea how this would work with gsub?"}], "answers": [{"comments": [{"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 0, "creation_date": 1515524113, "post_id": 48174653, "comment_id": 83329512, "body": "It throws the error <code>NoMethodError: undefined method &#39;save!&#39; for nil:NilClass </code>and says <code>&#39;block in irb_binding&#39;</code>"}, {"owner": {"reputation": 3437, "user_id": 301059, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79b1b001d5ff186c9bd02e7487aa4142?s=128&d=identicon&r=PG", "display_name": "Derek Prior", "link": "https://stackoverflow.com/users/301059/derek-prior"}, "reply_to_user": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 1, "creation_date": 1515525396, "post_id": 48174653, "comment_id": 83330076, "body": "Sorry, <code>gsub!</code> doesn&#39;t return the <code>course</code> itself, so that was wrong. I have updated."}, {"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 0, "creation_date": 1515527079, "post_id": 48174653, "comment_id": 83330859, "body": "It still doesn&#39;t seem to be working. Is there anything I have to do other than <code>.save!</code> to make it change the db? Also, is there a way to see the UTF-8 encoded results for a test. For example if I were to try this out on the course &quot;MATH 231&quot;, could I have it return \\x4D\\x41\\x54\\x48\\x20\\x32\\x33\\x31 in normal UTF encoding?"}], "tags": [], "owner": {"reputation": 3437, "user_id": 301059, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79b1b001d5ff186c9bd02e7487aa4142?s=128&d=identicon&r=PG", "display_name": "Derek Prior", "link": "https://stackoverflow.com/users/301059/derek-prior"}, "is_accepted": false, "score": 0, "last_activity_date": 1515525365, "last_edit_date": 1515525365, "creation_date": 1515523030, "answer_id": 48174653, "question_id": 48174592, "link": "https://stackoverflow.com/questions/48174592/change-all-nbsp-to-normal-blank-space-ruby/48174653#48174653", "title": "Change all &amp;nbsp; to normal blank space Ruby", "body": "<p>You're not saving the course. Try:</p>\n\n<pre><code>Course.all.each do |course|\n  course.shortname.gsub!(/&amp;nbsp;/i,\" \")\n  course.save!\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "edited": false, "score": 0, "creation_date": 1515789656, "post_id": 48175822, "comment_id": 83449908, "body": "@Jack please let me know weather my anser helped you or not by accepting and voting,"}, {"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 0, "creation_date": 1515793983, "post_id": 48175822, "comment_id": 83451577, "body": "I have accepted your answer after editing it for brevity."}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": true, "score": 1, "last_activity_date": 1515532086, "last_edit_date": 1515532086, "creation_date": 1515528029, "answer_id": 48175822, "question_id": 48174592, "link": "https://stackoverflow.com/questions/48174592/change-all-nbsp-to-normal-blank-space-ruby/48175822#48175822", "title": "Change all &amp;nbsp; to normal blank space Ruby", "body": "<p>Yes, Your changes aren't working in the first place, as you have used wrong pattern, You are supposed to add an \"\\\" before an special character which in your case is \"&amp;\".</p>\n\n<p>So try this:</p>\n\n<pre><code>courses = Course.all\ncourses.each {|course| course.shortname.gsub!(/\\&amp;nbsp;/,\" \")}\n</code></pre>\n\n<p><code>&amp;nbsp</code> is same as <code>ASCII code 160</code>, so </p>\n\n<pre><code>courses = Course.all\ncourses.each {|course| course.shortname.gsub!(160.chr(\"UTF-8\"),\" \")}\n</code></pre>\n\n<p>Also while trying i noticed the &amp;nbsp is same as \"\\u00A0\" as i got an error as undefined method `html' for \"\\u00A0\":String. I don't know what it is but this might also works,</p>\n\n<pre><code>courses = Course.all\ncourses.each {|course| course.shortname.gsub!(\"/\\u00a0/\", \"\")}\n</code></pre>\n"}], "owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 48175822, "answer_count": 2, "score": 1, "last_activity_date": 1515532086, "creation_date": 1515522772, "last_edit_date": 1515522960, "question_id": 48174592, "link": "https://stackoverflow.com/questions/48174592/change-all-nbsp-to-normal-blank-space-ruby", "title": "Change all &amp;nbsp; to normal blank space Ruby", "body": "<p>How do I gsub all <code>&amp;nbsp;</code> to normal blank spaces from the Rails console? I have a model called Course and want to replace each course that has <code>&amp;nbsp;</code> with the course with a normal blank used rather than the non-breaking space.</p>\n\n<p>So far, I have tried these in the console:</p>\n\n<pre><code>courses = Course.all\ncourses.each { |course| course.gsub!(/\\302\\240/,\" \")}\n\ncourses = Course.all\ncourses.each {|course| course.shortname.gsub!(/&amp;nbsp;/i,\" \")}\n</code></pre>\n\n<p>After restarting my rails server, it still doesn't seem like the changes have taken place. Am I overlooking a simple mistake. It seems like the changes either aren't working in the first place, or they aren't saving.</p>\n"}, {"tags": ["ruby", "internationalization"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515519722, "post_id": 48173865, "comment_id": 83327259, "body": "If you&#39;re saving your YAML as a UTF-8 encoded file this should work. If it&#39;s something else, like Latin1 or Windows-1252, you&#39;ll need to match that encoding when you load it in, or convert it properly."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1515519805, "post_id": 48173865, "comment_id": 83327292, "body": "Yeah, if that &quot;weird d&quot; works, the e should too...."}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515520173, "post_id": 48173865, "comment_id": 83327477, "body": "@tadman saving as a UTF-8 encoded file..  what does that mean? My <code>es.yml</code> file is just a <code>yml</code> file.. nothing more or less.. How would I do that?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515520298, "post_id": 48173865, "comment_id": 83327540, "body": "It means that whatever editor you&#39;re using needs to be able to save in UTF-8 encoding. Some programs make their encoding explicit, you can adjust it as necessary. Others assume some kind of default that might be wrong. Most code editors have a clear setting when saving files, and an option to convert if necessary."}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515522580, "post_id": 48173865, "comment_id": 83328684, "body": "Shoot, no that wasn&#39;t it.. @tadman everything is UTF-8.. even the HTML is being rendered correctly.. can&#39;t figure this out.."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515522834, "post_id": 48173865, "comment_id": 83328818, "body": "Have a look at what bytes are being emitted. If it&#39;s 195, 169 then that&#39;s UTF-8. If it&#39;s 233 that&#39;s perhaps Windows-1252."}], "answers": [{"tags": [], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "is_accepted": false, "score": 0, "last_activity_date": 1515602069, "creation_date": 1515602069, "answer_id": 48192056, "question_id": 48173865, "link": "https://stackoverflow.com/questions/48173865/e%cc%81-character-with-ruby-i18ln-translations/48192056#48192056", "title": "&#39;e\u0301&#39; character with Ruby i18ln translations", "body": "<p>Oh wow, it ended up being the font. I was using Helvetica and it didn't have the right characters. I switched over to Roboto, which does have that character and everything is golden. Wow, lesson learned.</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1515602069, "creation_date": 1515519644, "last_edit_date": 1515598890, "question_id": 48173865, "link": "https://stackoverflow.com/questions/48173865/e%cc%81-character-with-ruby-i18ln-translations", "title": "&#39;e\u0301&#39; character with Ruby i18ln translations", "body": "<p>I'm using i18ln in Ruby and providing translations for my views. My spanish translations require an acute e, or this <code>e\u0301</code> . This is my simplified translation in my <code>es.yml</code> file</p>\n\n<pre><code>es:\n  headline: \"Hola, tus cre\u0301ditos son:\"\n</code></pre>\n\n<p>I am trying to make the <code>e\u0301</code> appear correctly, and as this is not HTML, I can't use those escaped characters. However I THINK I can use unicode. But it doesn't work for me.. I'm getting the unicode characters from here:<a href=\"https://www.compart.com/en/unicode/based\" rel=\"nofollow noreferrer\">unicode resource</a></p>\n\n<p>I've tried all of the following with no luck:</p>\n\n<pre><code>\\X*U+00E9\\\n\\X**U+00E9\\\n\\x*U+00E9\\\n\\U+00E9\\\n</code></pre>\n\n<p>I just want an <code>e\u0301</code> any help here?</p>\n\n<p><a href=\"http://nimb.ws/56Tzq8\" rel=\"nofollow noreferrer\">Here is a screen shot to see what's happening:</a></p>\n\n<p>And I realized you can pass along HTML in the <code>es.yml</code> file but that hasn't helped.</p>\n"}, {"tags": ["ruby", "bitnami", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6884557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edb2e209eab7c24b195572c128d9b83?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Doss", "link": "https://stackoverflow.com/users/6884557/jacob-doss"}, "is_accepted": false, "score": 0, "last_activity_date": 1515525795, "creation_date": 1515525795, "answer_id": 48175295, "question_id": 48172856, "link": "https://stackoverflow.com/questions/48172856/build-and-deploy-packaged-ror-application-on-windows-machine-that-got-no-interne/48175295#48175295", "title": "Build and deploy packaged RoR application on Windows machine that got no Internet access", "body": "<p>It is possible to build a RoR application without internet access but it is not possible to deploy it. You could, however, run a hotspot off of a phone or something purely for deployments.</p>\n"}, {"tags": [], "owner": {"reputation": 6667, "user_id": 6512567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dtmiMlwPbG0/AAAAAAAAAAI/AAAAAAAAACA/tb1ShyDyNG0/photo.jpg?sz=128", "display_name": "Javier Salmeron", "link": "https://stackoverflow.com/users/6512567/javier-salmeron"}, "is_accepted": false, "score": 1, "last_activity_date": 1515574239, "creation_date": 1515574239, "answer_id": 48183500, "question_id": 48172856, "link": "https://stackoverflow.com/questions/48172856/build-and-deploy-packaged-ror-application-on-windows-machine-that-got-no-interne/48183500#48183500", "title": "Build and deploy packaged RoR application on Windows machine that got no Internet access", "body": "<p>You can use Bitnami Ruby stack <a href=\"https://bitnami.com/stack/ruby\" rel=\"nofollow noreferrer\">https://bitnami.com/stack/ruby</a>. The only moment where you may require internet is for downloading the gems that your application may require. After that, you should be able to work in your local environment without issues. Another alternative is to download the gems from another machine and install it in your local system. </p>\n"}, {"tags": [], "owner": {"reputation": 1054, "user_id": 801343, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1181779036/picture?type=large", "display_name": "Sivakumar", "link": "https://stackoverflow.com/users/801343/sivakumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1531804683, "creation_date": 1531804683, "answer_id": 51373683, "question_id": 48172856, "link": "https://stackoverflow.com/questions/48172856/build-and-deploy-packaged-ror-application-on-windows-machine-that-got-no-interne/51373683#51373683", "title": "Build and deploy packaged RoR application on Windows machine that got no Internet access", "body": "<p>You can save you image to tar and copy with USB and loaded it back.</p>\n\n<p>Save your mage: <a href=\"https://docs.docker.com/engine/reference/commandline/save/\" rel=\"nofollow noreferrer\">https://docs.docker.com/engine/reference/commandline/save/</a></p>\n\n<pre><code>docker save image_name &gt; filename.tar\n</code></pre>\n\n<p>Load image from Tar(No internet access required): \n <a href=\"https://docs.docker.com/engine/reference/commandline/load/#examples\" rel=\"nofollow noreferrer\">https://docs.docker.com/engine/reference/commandline/load/#examples</a></p>\n\n<pre><code>docker load --input filename.tar\n</code></pre>\n"}], "owner": {"reputation": 1140, "user_id": 3248148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLgGs.jpg?s=128&g=1", "display_name": "praaveen V R", "link": "https://stackoverflow.com/users/3248148/praaveen-v-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 51373683, "answer_count": 3, "score": 0, "last_activity_date": 1531804683, "creation_date": 1515516183, "question_id": 48172856, "link": "https://stackoverflow.com/questions/48172856/build-and-deploy-packaged-ror-application-on-windows-machine-that-got-no-interne", "title": "Build and deploy packaged RoR application on Windows machine that got no Internet access", "body": "<p>Is it possible and if so what is the best way to do it? I heard a friend talking about bitnami and so  on. Please advice</p>\n"}, {"tags": ["ruby", "bash", "git"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1515518257, "post_id": 48172809, "comment_id": 83326477, "body": "I think you could probably state your question much more simply. That would help me and others get to it quickly to respond. You could probably omit all the history and context and simply provide the input and your desired output."}, {"owner": {"reputation": 2269, "user_id": 1329396, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Cg8rf.png?s=128&g=1", "display_name": "Robert Snyder", "link": "https://stackoverflow.com/users/1329396/robert-snyder"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1515525217, "post_id": 48172809, "comment_id": 83329985, "body": "sorry I wanted to show that I had given it some effort instead of it seeming like I was &quot;asking for teh codez&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2269, "user_id": 1329396, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Cg8rf.png?s=128&g=1", "display_name": "Robert Snyder", "link": "https://stackoverflow.com/users/1329396/robert-snyder"}, "edited": false, "score": 1, "creation_date": 1515526237, "post_id": 48173723, "comment_id": 83330463, "body": "That worked great. The only difference I did was <code>local PROJECT=...</code> and <code>local REPO_NAME=...</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515530662, "post_id": 48173723, "comment_id": 83332592, "body": "You could also write a Ruby script to output things like <code>export PROJECT=...</code> and then import it, couldn&#39;t you? That would allow you to define multiple inputs at once."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515562822, "post_id": 48173723, "comment_id": 83341773, "body": "@tadman What would that look like? The Ruby script would output the export commands as a single (probably multiline) string? Would you then need to redirect its output to a file, and then source that file? Seems to me that would be a good solution if performance were critical, but would add more complexity than it&#39;s worth in this case."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515604600, "post_id": 48173723, "comment_id": 83365941, "body": "If the Ruby script outputs valid shell statements it should be importable. That is the output would be one <code>export X=y</code> per line such that if you saved that output into <code>variables.sh</code> and imported it then it would work."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 3, "last_activity_date": 1515519126, "creation_date": 1515519126, "answer_id": 48173723, "question_id": 48172809, "link": "https://stackoverflow.com/questions/48172809/bash-use-ruby-code-and-save-as-variable/48173723#48173723", "title": "bash use ruby code and save as variable", "body": "<p>Here is a way you can get the values into environment variables using Ruby:</p>\n\n<p>Assuming you have a URL environment variable containing the git repo url, such as created by the line below:</p>\n\n<pre><code>export URL='ssh://mycompany@vs-ssh.visualstudio.com:22/someProject/_ssh/myRepo'\n</code></pre>\n\n<p>You can do the following to put your desired values into other environment variables:</p>\n\n<pre><code>export PROJECT=`ruby -e \"puts ENV['URL'].split('/')[3]\"`\nexport REPO_NAME=`ruby -e \"puts ENV['URL'].split('/')[5]\"`\n</code></pre>\n"}], "owner": {"reputation": 2269, "user_id": 1329396, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Cg8rf.png?s=128&g=1", "display_name": "Robert Snyder", "link": "https://stackoverflow.com/users/1329396/robert-snyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 48173723, "answer_count": 1, "score": 0, "last_activity_date": 1515519126, "creation_date": 1515516012, "question_id": 48172809, "link": "https://stackoverflow.com/questions/48172809/bash-use-ruby-code-and-save-as-variable", "title": "bash use ruby code and save as variable", "body": "<p>my end goal is to parse a visual studio team services ssh git url and use it to clone origin and my fork. I'm in windows and I use git bash I've made a few shell scripts to help me to clone it. Before when we used gitweb it was easy for me to parse as I could either run <code>git_clone myproject</code> or <code>git_clone myproject.git</code> or <code>git_clone git://ourgitserver.ourcompany.com/myproject.git</code> and the script would clone the above as origin and also add a remote with my user name in the form of <code>ssh://git@outgitserver.ourcompany.com/myproject.git</code> (and it handled name spaces well too). Well we started using vsts and I want to do the same thing.</p>\n\n<p>The git_clone method changed a few times because of how people would tell/im/email me the link for the git project. I wanted to be able to just copy and paste it with minimal changes. thus far I have a simple <code>git_vsts_close</code> which requires two parameters the name of the project and the name of the repository. (in gitweb we would reference the namespace as vsts's project and the project would be vsts's repository). For the time being I'd like to take either the ssh url or the two parameters and do all the git things. in brief this is what i have so far</p>\n\n<pre><code>function git_vsts_clone {\n    local projectName=$1\n    local repositoryName=$2\n    if MISSING_ARG \"usage: git_vsts_clone &lt;project name&gt; &lt;repositoryName&gt;\\n  projectName must be provided\\n  repositoryName must be provided\" $projectName; then return 1; fi;\n    if MISSING_ARG \"usage: git_vsts_clone &lt;project name&gt; &lt;repositoryName&gt;\\n  projectName must be provided\\n  repositoryName must be provided\" $repositoryName; then return 1; fi;\n\n    local gitServer=\"ssh://mycompany@vs-ssh.visualstudio.com:22/${projectName}/_ssh/${repositoryName}\"\n    local clonePath=\"/c/git/${projectName}/${repositoryName}\"\n    local user_name=${USER:-${USERNAME}}\n\n    if [ ! -d $clonePath ]; then\n        INFO \"Cloning $gitServer\"\n        git clone $gitServer $clonePath || { ERROR \"ERROR cloning $gitServer\"; return 1;}\n\n        pushd $clonePath\n\n        INFO \"Updating Submodules (gsui)\"\n        git submodule update --init\n\n        INFO \"adding user fork ${user_name}\"\n        git remote add $user_name $gitServer.$user_name\n        git fetch $user_name\n\n        popd\n        INFO \"Opening $clonePath in vscode\"\n    fi\n    code $clonePath\n}\n</code></pre>\n\n<p>last time when I tried to parse a url in bash I struggled with the whole split an item into an array. so I decided i'd try to use ruby (since it has a easy split method) so i've tried things like</p>\n\n<pre><code>$ gitServer='ssh://mycompany@vs-ssh.visualstudio.com:22/someProject/_ssh/myRepo'\n$ ruby -e \"a = '$gitServer'; b=a.split('/'); p b\"\n[\"ssh:\", \"\", \"mycompany@vs-ssh.visualstudio.com:22\", \"someProject\", \"_ssh\", \"myRepo\"]\n$ foo=`ruby -e \"a = '$gitServer'; b=a.split('/'); p b\"`\n$ echo \"${c[3]}\"\n\n$ echo \"${c[0]}\"\n[\"ssh:\", \"\", \"mycompany@vs-ssh.visualstudio.com:22\", \"someProject\", \"_ssh\", \"myRepo\"]\n</code></pre>\n\n<p>so I dunno. I don't have to use ruby it just seemed like a easy solution... now not so much. So how can I get the project and repository name out of the url in either bash or bash using ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "is_accepted": true, "score": 1, "last_activity_date": 1515515719, "last_edit_date": 1515515719, "creation_date": 1515514886, "answer_id": 48172491, "question_id": 48172204, "link": "https://stackoverflow.com/questions/48172204/how-to-render-500internal-server-error-page-using-an-erb-instead-of-a-static-h/48172491#48172491", "title": "How to render 500(Internal Server Error) page using an erb instead of a static HTML in Rails?", "body": "<p>You could take the following approach. </p>\n\n<p>1.Create a controller like <code>app/controllers/http_errors_controller.rb</code></p>\n\n<pre><code>class HttpErrorsController &lt; ApplicationController\n   def internal_server_error\n     render(:status =&gt; 500)\n   end\nend\n</code></pre>\n\n<p>2.Have a corresponding view - <code>app/views/http_errors/internal_server_error.html.erb</code></p>\n\n<p>3.Configure your routes</p>\n\n<pre><code>match \"/500\", :to =&gt; \"http_errors#internal_server_error\", :via =&gt; :all\n</code></pre>\n\n<p>4.Configure Rails to pick up your views instead of the default ones in the public folder. This you can achieve by adding the below line to <code>config/application.rb</code></p>\n\n<pre><code>config.exceptions_app = self.routes\n</code></pre>\n\n<p>5.Remove the corresponding static files in the pubilc folder. <code>public/500.html</code> in your case.</p>\n\n<p>For more on this, and its drawbacks, refer <a href=\"https://mattbrictson.com/dynamic-rails-error-pages\" rel=\"nofollow noreferrer\">https://mattbrictson.com/dynamic-rails-error-pages</a></p>\n\n<p>Also, there is this gem that addresses such problems stated in the above link that will acheive what you are trying to do : <a href=\"https://github.com/richpeck/exception_handler\" rel=\"nofollow noreferrer\">https://github.com/richpeck/exception_handler</a></p>\n\n<p>Though, I would suggest against using a gem for something as simple as this.</p>\n"}], "owner": {"reputation": 13, "user_id": 8250220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc1444a09135a5ae27189362c7f1870f?s=128&d=identicon&r=PG&f=1", "display_name": "adv", "link": "https://stackoverflow.com/users/8250220/adv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 1, "accepted_answer_id": 48172491, "answer_count": 1, "score": 1, "last_activity_date": 1515551205, "creation_date": 1515513862, "last_edit_date": 1515551205, "question_id": 48172204, "link": "https://stackoverflow.com/questions/48172204/how-to-render-500internal-server-error-page-using-an-erb-instead-of-a-static-h", "title": "How to render 500(Internal Server Error) page using an erb instead of a static HTML in Rails?", "body": "<p>Is there a way to have errors render a 500.html.erb file instead of the 500.html page in the public folder? I want to be able to use partials and make the page dynamic.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "sidekiq", "delayed-job", "rails-activejob"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1515513579, "post_id": 48172060, "comment_id": 83323672, "body": "Switching to sidekiq will decrease the overhead of the job processor, yes. Naturally, it can&#39;t bring down the time consumption of the Sheets API."}, {"owner": {"reputation": 197, "user_id": 4527138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b6dac61ca770a6c8589f872589fcebe?s=128&d=identicon&r=PG&f=1", "display_name": "yesyoukenn", "link": "https://stackoverflow.com/users/4527138/yesyoukenn"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1515514088, "post_id": 48172060, "comment_id": 83323991, "body": "Thanks! I understand that Google is a limitation here, but will switching to Sidekiq allow more jobs to run at a given time? Right now 10 workers can run 10 jobs, is there way to get 10 workers to run 20 jobs?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1515515829, "post_id": 48172060, "comment_id": 83325062, "body": "I&#39;ve heard stories of replacing 25 resque machines with just 1 sidekiq machine. YMMV."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1515516062, "post_id": 48172060, "comment_id": 83325216, "body": "For example: <a href=\"https://twitter.com/mperham/status/188016632071860224\" rel=\"nofollow noreferrer\">twitter.com/mperham/status/188016632071860224</a>"}], "owner": {"reputation": 197, "user_id": 4527138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b6dac61ca770a6c8589f872589fcebe?s=128&d=identicon&r=PG&f=1", "display_name": "yesyoukenn", "link": "https://stackoverflow.com/users/4527138/yesyoukenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516352985, "creation_date": 1515513427, "last_edit_date": 1515555532, "question_id": 48172060, "link": "https://stackoverflow.com/questions/48172060/how-to-increase-efficiency-of-background-jobs-in-rails", "title": "How to increase efficiency of background jobs in Rails", "body": "<p>I'm currently running ActiveJob with DelayedJob as the backend for my background jobs on Heroku with <strong>10</strong> worker dynos. Daily, I need to run ~2000+ jobs which require lots of interaction with Google Sheets API that can take ~60+ seconds after the worksheet has run its calculations.</p>\n\n<p>As each job could potentially take more than a minute to run, I'm wondering how I can increase the efficiency of these workers? It seems to me that these 10 workers can only take on 1 task at a time. Is it possible for 1 worker to take on my jobs? Would switching my background service to Sidekiq or another service allow these workers to take on more jobs? </p>\n\n<p>Any insight would be appreciated, thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515513498, "post_id": 48171027, "comment_id": 83323614, "body": "What have you tried so far? Have you written any code? What libraries, of any, are you using? What&#39;s not working? Are uploaded files intended to be publicly accessible? (In which case, you could place them in <code>.&#47;public</code>.) Is there a good reason for you to store them locally on the server? This is a valid approach, but uncommon; it would be more normal to store them in the database or perhaps on some cloud storage - e.g. S3."}, {"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 0, "creation_date": 1515522936, "post_id": 48171027, "comment_id": 83328878, "body": "Carrierwave is a great gem to use as mentioned below."}], "answers": [{"tags": [], "owner": {"reputation": 1583, "user_id": 5253108, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/o5DQ1.jpg?s=128&g=1", "display_name": "Trenton Tyler", "link": "https://stackoverflow.com/users/5253108/trenton-tyler"}, "is_accepted": false, "score": 2, "last_activity_date": 1515510418, "creation_date": 1515510418, "answer_id": 48171105, "question_id": 48171027, "link": "https://stackoverflow.com/questions/48171027/how-to-upload-and-save-an-image-to-assets-images-in-rails/48171105#48171105", "title": "How to upload and save an image to /assets/images in Rails", "body": "<p>So as not to further increase the size of the project folder I recommend storing images in a database. </p>\n\n<p>This gem will help you achieve image uploads - <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/paperclip</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7906814, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RvnQz01zi7I/AAAAAAAAAAI/AAAAAAAAAEo/0wv-R81mmdA/photo.jpg?sz=128", "display_name": "Ajay sharma", "link": "https://stackoverflow.com/users/7906814/ajay-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1515522527, "creation_date": 1515522527, "answer_id": 48174536, "question_id": 48171027, "link": "https://stackoverflow.com/questions/48171027/how-to-upload-and-save-an-image-to-assets-images-in-rails/48174536#48174536", "title": "How to upload and save an image to /assets/images in Rails", "body": "<p>Rails provide many gems for uploading like :</p>\n\n<p>Paperclip: <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/paperclip</a></p>\n\n<p>CarrierWave : <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow noreferrer\">https://github.com/carrierwaveuploader/carrierwave</a></p>\n\n<hr>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 3288238, "user_type": "registered", "profile_image": "https://graph.facebook.com/730155321/picture?type=large", "display_name": "Pablo E. Lujambio", "link": "https://stackoverflow.com/users/3288238/pablo-e-lujambio"}, "is_accepted": false, "score": 0, "last_activity_date": 1515558222, "creation_date": 1515558222, "answer_id": 48180278, "question_id": 48171027, "link": "https://stackoverflow.com/questions/48171027/how-to-upload-and-save-an-image-to-assets-images-in-rails/48180278#48180278", "title": "How to upload and save an image to /assets/images in Rails", "body": "<p>The <code>assets/images</code> folder in rails is intended for assets that your project uses, such as the company/site/project logo, icons, favicons, etcetera. It isn't meant to be a folder for uploading user nor admin  generated assets. </p>\n\n<p>If it is an image that needs to be user administered, then you should use a server for that such as Amazon S3. </p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/direct-to-s3-image-uploads-in-rails\" rel=\"nofollow noreferrer\">Here is a nice Heroku tutorial on that</a> </p>\n"}, {"tags": [], "owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1515612584, "creation_date": 1515612584, "answer_id": 48194756, "question_id": 48171027, "link": "https://stackoverflow.com/questions/48171027/how-to-upload-and-save-an-image-to-assets-images-in-rails/48194756#48194756", "title": "How to upload and save an image to /assets/images in Rails", "body": "<p>If you are using ActiveAdmin visit the <a href=\"https://github.com/activeadmin/activeadmin/wiki\" rel=\"nofollow noreferrer\">wiki page</a> for links to various tutorials and how-tos, including <a href=\"https://spin.atomicobject.com/2016/07/23/file-upload-active-admin-paperclip/\" rel=\"nofollow noreferrer\">this one for PaperClip</a></p>\n"}], "owner": {"reputation": 41, "user_id": 4351893, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e536cb57018260dfd1537489ff9ecdd?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Leslie", "link": "https://stackoverflow.com/users/4351893/grant-leslie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3453, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1515612584, "creation_date": 1515510191, "question_id": 48171027, "link": "https://stackoverflow.com/questions/48171027/how-to-upload-and-save-an-image-to-assets-images-in-rails", "title": "How to upload and save an image to /assets/images in Rails", "body": "<p>Total noob question here, but how would I make a simple upload portal that allows me to upload an image to the /assets/images folder?  It doesn't need to be saved to an object at all.  I just need to upload an image. </p>\n\n<p>I have active admin, if that is of any assistance.  </p>\n\n<p>Thanks so much! </p>\n"}, {"tags": ["ruby", "rubygems", "cucumber"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1515512810, "post_id": 48171022, "comment_id": 83323140, "body": "Looks like you need to install an older version of Ruby"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1515513255, "post_id": 48171022, "comment_id": 83323459, "body": "They haven&#39;t updated to support Ruby 2.5 yet - <a href=\"https://github.com/ffi/ffi/issues/598\" rel=\"nofollow noreferrer\">github.com/ffi/ffi/issues/598</a> - though there are ways to force it"}], "answers": [{"tags": [], "owner": {"reputation": 1215, "user_id": 255119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d48c5f37e2cac9cf215897f79c5e831?s=128&d=identicon&r=PG", "display_name": "Jason L Perry", "link": "https://stackoverflow.com/users/255119/jason-l-perry"}, "is_accepted": false, "score": 2, "last_activity_date": 1515513199, "creation_date": 1515513199, "answer_id": 48171997, "question_id": 48171022, "link": "https://stackoverflow.com/questions/48171022/cannot-install-gem-ffi-windows-7-64bit/48171997#48171997", "title": "Cannot Install gem ffi - Windows 7 64bit", "body": "<p>There is an <a href=\"https://github.com/ffi/ffi/pull/599\" rel=\"nofollow noreferrer\">open pull request</a> to update <code>ffi</code> for Ruby 2.5. You will need to wait for this update, roll back to ruby Ruby &lt;= 2.4.x, or try to install the branch from that pull request.</p>\n"}, {"tags": [], "owner": {"reputation": 3492, "user_id": 8790406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LGsJC.jpg?s=128&g=1", "display_name": "Krzysztof Janiszewski", "link": "https://stackoverflow.com/users/8790406/krzysztof-janiszewski"}, "is_accepted": false, "score": 3, "last_activity_date": 1527253556, "last_edit_date": 1527253556, "creation_date": 1516115635, "answer_id": 48284389, "question_id": 48171022, "link": "https://stackoverflow.com/questions/48171022/cannot-install-gem-ffi-windows-7-64bit/48284389#48284389", "title": "Cannot Install gem ffi - Windows 7 64bit", "body": "<p>After a long research I finally found an answer that worked for me :)</p>\n\n<pre><code>gem install ffi -f\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9193748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0db7b5a9a0f5b6306e89d2e9606b93f4?s=128&d=identicon&r=PG&f=1", "display_name": "NateG", "link": "https://stackoverflow.com/users/9193748/nateg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1154, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527253556, "creation_date": 1515510173, "last_edit_date": 1515512965, "question_id": 48171022, "link": "https://stackoverflow.com/questions/48171022/cannot-install-gem-ffi-windows-7-64bit", "title": "Cannot Install gem ffi - Windows 7 64bit", "body": "<p>I am new to learning Cucumber/Ruby.</p>\n\n<p>I have tried to install the gem 'ffi' however when I do so from the console I get the following message:</p>\n\n<blockquote>\n  <p>Error installing ffi:\n      The last version of ffi (>= 0) to support your Ruby &amp; RubyGems\n      nstalling it with <code>gem install ffi -v 1.9.18</code>\n      ffi requires Ruby version &lt; 2.5, >= 2.0. The current ruby version 2.5.0.</p>\n</blockquote>\n"}, {"tags": ["ruby", "clearance"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1515506070, "post_id": 48169428, "comment_id": 83318709, "body": "I haven&#39;t seen such articles. Password is needed much more often, that&#39;s why you see more info about it. You&#39;d be inventing the wheel here, not reinventing :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1515526245, "post_id": 48169428, "comment_id": 83330467, "body": "Ooops, I meant &quot;password <b>change</b> is needed much more often&quot;. Noticed just now. :)"}], "answers": [{"comments": [{"owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "edited": false, "score": 1, "creation_date": 1515514418, "post_id": 48172150, "comment_id": 83324161, "body": "This seems reasonable. We actually aren&#39;t confirming email addresses at all at the moment, though. So it does not apply to my case."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "edited": false, "score": 0, "creation_date": 1515526330, "post_id": 48172150, "comment_id": 83330496, "body": "@hoffm &quot;aren&#39;t confirming email addresses&quot; - then what is the question even? Just go ahead and update email, like any other field. :shrug:"}, {"owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1515526413, "post_id": 48172150, "comment_id": 83330537, "body": "@SergioTulentsev Email addresses are used as log-in credentials, and also as recipients for transactional emails. We just don&#39;t confirm that you own the email address you give us (by sending you a confirmation email and requiring you to click through it)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "edited": false, "score": 1, "creation_date": 1515527314, "post_id": 48172150, "comment_id": 83330980, "body": "@hoffm: yes, but none of this requires any more work (assuming you already have a unique index on email column in the db, as you should)"}], "tags": [], "owner": {"reputation": 1215, "user_id": 255119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d48c5f37e2cac9cf215897f79c5e831?s=128&d=identicon&r=PG", "display_name": "Jason L Perry", "link": "https://stackoverflow.com/users/255119/jason-l-perry"}, "is_accepted": false, "score": 2, "last_activity_date": 1515513717, "creation_date": 1515513717, "answer_id": 48172150, "question_id": 48169428, "link": "https://stackoverflow.com/questions/48169428/feature-user-updates-her-email-address/48172150#48172150", "title": "Feature: User updates her email address", "body": "<p>There's not a canonical way, as far as I know. The simplest way to handle this, I think is to reset <code>current_user.confirmed_at</code> when the user changes their email address. Something like this should work:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  before_update :reset_confirmation_on_email_change\n\n  private\n\n  def reset_confirmation_on_email_change\n    self.confirmed_at = nil if email_changed?\n  end\nend\n</code></pre>\n\n<p>The rest should be pretty straight forward like editing anything else. You might also want them to confirm their password when the email changes, this would look similar to requiring old password when the password is changed.</p>\n"}, {"comments": [{"owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "edited": false, "score": 0, "creation_date": 1515526460, "post_id": 48175363, "comment_id": 83330554, "body": "I&#39;ve used Devise. This app just happens to use Clearance."}], "tags": [], "owner": {"reputation": 1, "user_id": 6884557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edb2e209eab7c24b195572c128d9b83?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Doss", "link": "https://stackoverflow.com/users/6884557/jacob-doss"}, "is_accepted": false, "score": -1, "last_activity_date": 1515526071, "creation_date": 1515526071, "answer_id": 48175363, "question_id": 48169428, "link": "https://stackoverflow.com/questions/48169428/feature-user-updates-her-email-address/48175363#48175363", "title": "Feature: User updates her email address", "body": "<p>Checkout the gem 'Devise'...very useful for user logins and updating passwords and emails. Makes creating a login page a breeze, along with logging users into the database.</p>\n"}], "owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1515526071, "creation_date": 1515505072, "question_id": 48169428, "link": "https://stackoverflow.com/questions/48169428/feature-user-updates-her-email-address", "title": "Feature: User updates her email address", "body": "<p>Is there a canonical way to build an \u201cupdate email\u201d feature on top of the Clearance gem?</p>\n\n<p>To spell it out: I want a logged in users to be able to visit the site and update the email address associated with her account.</p>\n\n<p>There\u2019s lots of info about building a \u201cchange password\u201d feature, but nothing about changing emails. I wanted to make sure I wasn\u2019t missing anything before I invent a wheel. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inherited-resources"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1515506690, "post_id": 48169306, "comment_id": 83319087, "body": "Sorry if this is a dumb question, but have you checked that the file actually <i>exists</i> on production?? Maybe you&#39;ve not pushed the branch / deployed it correctly?!"}, {"owner": {"reputation": 6593, "user_id": 1769515, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d8ad342de0fb7ec1532e967042f1e285?s=128&d=identicon&r=PG", "display_name": "a14m", "link": "https://stackoverflow.com/users/1769515/a14m"}, "edited": false, "score": 0, "creation_date": 1515507119, "post_id": 48169306, "comment_id": 83319335, "body": "also can you indicate how your view folder look like? (<code>tree app&#47;views</code> if you have <code>tree</code> installed)"}, {"owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "edited": false, "score": 0, "creation_date": 1515507794, "post_id": 48169306, "comment_id": 83319833, "body": "In addition, to the above comments, be sure to show the file ownership and permissions, since these are likely to be more strictly enforced on a production box. What web  / application server are you using and which OS?"}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515504616, "creation_date": 1515504616, "question_id": 48169306, "link": "https://stackoverflow.com/questions/48169306/rails-inherited-resource-missing-template-in-one-environment-only", "title": "Rails - Inherited Resource - missing template in one environment only", "body": "<p>Question as above - I'm trying to create a new booking which happens fine in development, however the same code on the staging server gives me:</p>\n\n<pre><code>ActionView::MissingTemplatebooking_system/bookings#new\nMissing template booking_system/bookings/new, booking_system/base/new, inherited_resources/base/new, application/new with {:locale=&gt;[:en], :formats=&gt;[:html].....\n</code></pre>\n\n<p>I can see it's trying to look for a template in the inherited resources folder but not finding one... I've googled and can't find anyone with a similar issue.. my controller code if its needed:</p>\n\n<pre><code>module BookingSystem\n  class BaseController &lt; InheritedResources::Base\n  end\nend\n\nmodule BookingSystem\n  class BookingsController &lt; BaseController\n     authorize_resource\n  end\nend\n</code></pre>\n\n<p>Any help is greatly appreciated</p>\n"}, {"tags": ["ruby", "overriding", "refinements"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1515514147, "post_id": 48169296, "comment_id": 83324022, "body": "The main point of confusion might probably be that with the code above, you are <b>not</b> creating a new class named <code>String</code> which effectively shadows the core <code>String</code> class. Instead, what actually happens is that you are altering the single core String class and add a new method. Thus, the method will be available on each and every strings. This is due to an important concept in Ruby called &quot;open classes&quot;. The rather new concept of Refinements is an attempt to ensure that such extensions don&#39;t pollute the global namespace, e.g. when different libraries each try to add a <code>word_count</code> method."}, {"owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1515566335, "post_id": 48169296, "comment_id": 83342892, "body": "Oh, this is clearer now, thank you very much @HolgerJust"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1515507784, "creation_date": 1515507784, "answer_id": 48170255, "question_id": 48169296, "link": "https://stackoverflow.com/questions/48169296/difference-between-refinements-and-redefine-class-in-ruby/48170255#48170255", "title": "Difference between Refinements and redefine class in ruby", "body": "<p>From <a href=\"https://ruby-doc.org/core/doc/syntax/refinements_rdoc.html\" rel=\"nofollow noreferrer\">the ruby documentation</a>:</p>\n\n<blockquote>\n  <p>You may activate refinements at top-level, and inside classes and\n  modules. You may not activate refinements in method scope. <strong>Refinements</strong>\n  <strong>are activated until the end of the current class or module definition,</strong>\n  <strong>or until the end of the current file if used at the top-level.</strong></p>\n</blockquote>\n\n<p>The <em>whole point</em> of refinements (as opposed to just extending a core class) is that they are <strong>scoped</strong>.</p>\n\n<p>In your code above, <code>String#word_count</code> will be defined <em>everywhere</em> - for example, if you have multiple files.</p>\n\n<p>On the other hand, if you define that method as a <em>refinement</em> then it will only be defined in places where you are explicitly <em><code>using</code></em> it.</p>\n\n<p>The motivation for this is that you can add/alter behaviour in one location without it impacting code elsewhere.</p>\n"}], "owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 48170255, "answer_count": 1, "score": 0, "last_activity_date": 1515507784, "creation_date": 1515504597, "question_id": 48169296, "link": "https://stackoverflow.com/questions/48169296/difference-between-refinements-and-redefine-class-in-ruby", "title": "Difference between Refinements and redefine class in ruby", "body": "<p>I'm reading some book for ruby programming language and was wondering how something like this works</p>\n\n<pre><code>class String\n  def word_count\n    frequencies = Hash.new(0)\n    downcase.scan(/\\w+/) { |word| frequencies[word] += 1 }\n    return frequencies\n  end\nend\n</code></pre>\n\n<p>I know there is a build-in string, I came from (C++) btw, So creating <code>class string</code> will make ambiguity when defining an object <code>string x = new string()</code>, I search about that and i found some concept is named <code>refinement</code> which is allowing us to modify and add functions to <code>String</code> class, I see them using keyword <code>refine</code> to make these things(according to the docs), but here my questions come, When i just put the above class on the <code>irb</code> and started to test it like that <code>\"amr adel\".word_count</code>, It gave me the correct result, I expected not to work at first, So if it works why could i even use <code>refine</code> in my code why don't i only create a class with same name of the built-in one and put additional function and modify functions, Are this way doing the refinement process implicitly?</p>\n\n<p>I admit that ruby is amazing and so easy to work with, but i want to know things goes on.</p>\n\n<p>If you could refer some articles or something it will be extremely appreciated\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515503275, "post_id": 48168638, "comment_id": 83316981, "body": "<i>&quot;What is faster?&quot;</i> \u2013 measure it."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 6040776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09bf544476832e38323f66dfb9c7c0b7?s=128&d=identicon&r=PG", "display_name": "hezanathos", "link": "https://stackoverflow.com/users/6040776/hezanathos"}, "is_accepted": false, "score": 0, "last_activity_date": 1515503550, "creation_date": 1515503550, "answer_id": 48168983, "question_id": 48168638, "link": "https://stackoverflow.com/questions/48168638/ruby-on-rails-performance-update-row-or-check-first/48168983#48168983", "title": "Ruby on Rails Performance - update row or check first", "body": "<p>You should use the ruby <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">Benchmark</a> module and directly measure that !</p>\n\n<pre><code>require 'benchmark'\n\nBenchmark.bm do |x|\n  x.report('sort!') do\n    @p = Product.find_by(code: row[:code])\n    if @p.description != row[:desc]\n      @p.description = row[:desc]\n      p.save\n    end\n  end\n\n  x.report('sort')  do\n    @p = Product.find_by(code: row[:code])\n    @p.description = row[:desc]\n    p.save\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 8243988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d28285e10b0ae267a2b86d753abf6b4?s=128&d=identicon&r=PG", "display_name": "ejdraper", "link": "https://stackoverflow.com/users/8243988/ejdraper"}, "is_accepted": false, "score": 0, "last_activity_date": 1515503807, "creation_date": 1515503807, "answer_id": 48169072, "question_id": 48168638, "link": "https://stackoverflow.com/questions/48168638/ruby-on-rails-performance-update-row-or-check-first/48169072#48169072", "title": "Ruby on Rails Performance - update row or check first", "body": "<p>Ruby on Rails is clever enough to know whether an attribute has actually changed, and so won't roundtrip to the database to update a field when it hasn't changed. You can see this on the Rails console (<code>rails c</code>) if you run your <code>update_attribute</code> code with the same value, and then with a changed value - you'll only see the SQL log output when it's changed.</p>\n\n<p>If you use <code>update_attributes</code> instead (which takes a hash of attributes to change) and there is nothing to update, you'll see it does begin and end a transaction with the database, albeit with no commands within it.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 376, "user_id": 7271772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef9b3cffd3ca044729a43c23f7232d9?s=128&d=identicon&r=PG&f=1", "display_name": "George Morris", "link": "https://stackoverflow.com/users/7271772/george-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515503807, "creation_date": 1515502339, "question_id": 48168638, "link": "https://stackoverflow.com/questions/48168638/ruby-on-rails-performance-update-row-or-check-first", "title": "Ruby on Rails Performance - update row or check first", "body": "<p>I have a model Product that has attribute description and code which is an index.</p>\n\n<p>I would like to alter the product in code based on a CSV file.</p>\n\n<p>What is faster?</p>\n\n<pre><code>@p = Product.find_by_code(row[:code])\nif @p.description != row[:desc]\n   @p.update_attribute(:description, row[:desc])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@p = Product.find_by_code(row[:code])\n@p.update_attribute(:description, row[:desc])\n</code></pre>\n\n<p>Let's consider all cases, such as descriptions are equal and not equal at all. </p>\n\n<p>How is = comparison implemented for strings and texts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "logrotate", "clockwork"], "comments": [{"owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "edited": false, "score": 1, "creation_date": 1516283948, "post_id": 48168564, "comment_id": 83631224, "body": "If you were using regular logrotate then you need to use the copytruncate option ( <a href=\"https://gorails.com/guides/rotating-rails-production-logs-with-logrotate\" rel=\"nofollow noreferrer\">gorails.com/guides/&hellip;</a> ). I&#39;m guessing that the same principle applies here: copy the current log file, then empty the open, live one, so that the one Rails is attached to doesn&#39;t disappear."}], "owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1516696104, "creation_date": 1515502077, "last_edit_date": 1516696104, "question_id": 48168564, "link": "https://stackoverflow.com/questions/48168564/log-rotation-inter-process-lock-failed-opswork-clockwork", "title": "log rotation inter-process lock failed opswork clockwork", "body": "<p>I am using opswork with t2.medium machine with ruby clockwork running in it.</p>\n\n<p>every 30 seconds we are triggering a job. </p>\n\n<pre><code>SPAWNED BG JOB FOR TASK: 20 for SC: 20 with Sidekiq id: 3afda705eaf597edb4bcc257\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nlog rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\nSPAWNED BG JOB FOR TASK: 25 for SC: 25 with Sidekiq id: f9142190bd44736815c10645\n</code></pre>\n\n<p>in clockwork logs i am seeing below error and clockwork functionally getting stopped. when i restart clockwork it is started working. i don't have any idea.</p>\n\n<pre><code>log rotation inter-process lock failed. No such file or directory @ rb_sysopen - log/sql.log\n</code></pre>\n\n<p>help please</p>\n\n<p><strong>Updated :</strong>  few more information we are using ruby Logger to log messages in sql.log. it has a default log rotation option.  <a href=\"https://stackoverflow.com/questions/48394406/disable-logrotation-ruby-logger\">Link</a></p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "serialization"], "comments": [{"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1515500198, "post_id": 48167972, "comment_id": 83315095, "body": "it looks like Result object within the database is a empty object."}, {"owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "reply_to_user": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1515500514, "post_id": 48167972, "comment_id": 83315285, "body": "@RaymondNijland No, that meta field is from database, it has status and result keys"}, {"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1515501834, "post_id": 48167972, "comment_id": 83316085, "body": "You might clearify better when you add some ruby-on-rails code."}, {"owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "reply_to_user": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1515502172, "post_id": 48167972, "comment_id": 83316304, "body": "@RaymondNijland what else data you need ?  i haven&#39;t write any ruby code. i have Test model. i am just doing Test.select(&#39;meta&#39;).where(:id=&gt; 726345). it is throwing error"}, {"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1515502228, "post_id": 48167972, "comment_id": 83316348, "body": "And how did you save that data within your example data? Sure it must be ruby-on-rail code right?"}, {"owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "reply_to_user": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1515502582, "post_id": 48167972, "comment_id": 83316557, "body": "@RaymondNijland. yes, result = c.exec(sql), c is connection to postgres. i am running some sql query. and storing result returned by c.exec(sql) in mysql."}], "answers": [{"comments": [{"owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 0, "creation_date": 1515507301, "post_id": 48168612, "comment_id": 83319488, "body": "Thanks for you explanation,  i have lot of records in my database with same PG::Result object, some of columns have object with keys, some of columns are empty like above. can u please suggest me proper way to query even though if PG::Result object is empty"}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "reply_to_user": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 0, "creation_date": 1515592042, "post_id": 48168612, "comment_id": 83357424, "body": "@shakeel sorry, didn&#39;t have time. I&#39;ll reply with a workaround in couple hours"}, {"owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 0, "creation_date": 1515593222, "post_id": 48168612, "comment_id": 83358241, "body": "Thank u, waiting for reply"}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "reply_to_user": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 0, "creation_date": 1515667687, "post_id": 48168612, "comment_id": 83391438, "body": "@shakeel sorry to keep you waiting. Hope the question is still relevant. I&#39;ve looked at it again. It seems that <i>any</i> <code>PG::Result</code> converted to yaml would be empty. Do I understand you correctly that in your meta are lots of other data, besides <code>PG::Result</code> and you can&#39;t simply remove column?"}, {"owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "edited": false, "score": 0, "creation_date": 1515734196, "post_id": 48168612, "comment_id": 83421547, "body": "Yes, for example if i run <code>connection.exec(&quot;select * from table&quot;);</code> then <code>PG::Result</code> is not going to be empty."}], "tags": [], "owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "is_accepted": false, "score": 0, "last_activity_date": 1515502249, "creation_date": 1515502249, "answer_id": 48168612, "question_id": 48167972, "link": "https://stackoverflow.com/questions/48167972/pgerror-result-has-been-cleared-rails-serilization/48168612#48168612", "title": "PG::Error : result has been cleared rails serilization", "body": "<p>On write, you serialized empty <code>PG::Result</code> object. When querying, rails is trying to deserializes it with <code>PG::Result.new</code>, which fails</p>\n\n<pre><code>&gt; PG::Result.new\n\nPG::Error: result has been cleared\n</code></pre>\n\n<p>To fix this, you can just clear the column. It has no practical use, anyway.</p>\n\n<p><em>I don't really understand why you serialize from result postgtresql to mysql, though</em></p>\n"}], "owner": {"reputation": 631, "user_id": 6508904, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd8276832406ed7148917eebcc08f04?s=128&d=identicon&r=PG&f=1", "display_name": "shakeel", "link": "https://stackoverflow.com/users/6508904/shakeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515502249, "creation_date": 1515499858, "question_id": 48167972, "link": "https://stackoverflow.com/questions/48167972/pgerror-result-has-been-cleared-rails-serilization", "title": "PG::Error : result has been cleared rails serilization", "body": "<p>in my database we have a serialized value in one column as like below</p>\n\n<p>consider table is <strong>test</strong> and filed is <strong>meta</strong></p>\n\n<pre><code>---------------------------------------------------------------------\nID          Name                meta\n------------------------------------------------------------------------\n726345      test               - :status: :success\n                                 :result: !ruby/object:PG::Result {}\n-------------------------------------------------------------------------\n</code></pre>\n\n<p>while writing query using Active record  <code>Test.select('meta').where(:id=&gt; 726345)</code></p>\n\n<p>it is throwing error is  : <code>PG::Error Exception: result has been cleared</code></p>\n\n<p>for remaning columns Name and ID is working fine. i figured out error with result key, but i don't know how to solve this issue. </p>\n\n<p>any help ??</p>\n\n<p>Rails - 5.1, ruby - 2.2.5, mysql - 5.6 </p>\n\n<p>Thanks in advance </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1515502444, "post_id": 48167915, "comment_id": 83316484, "body": "<code>after_rollback</code> isn&#39;t executed in tests, right?"}, {"owner": {"reputation": 93, "user_id": 5990280, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a9a1aa7bd8a127769c03c10c171a9aa0?s=128&d=identicon&r=PG&f=1", "display_name": "keerthana", "link": "https://stackoverflow.com/users/5990280/keerthana"}, "reply_to_user": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1515575286, "post_id": 48167915, "comment_id": 83347160, "body": "By testing, I meant verifying if the code works properly. Not the rails tests. Changed the question, my bad."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5990280, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a9a1aa7bd8a127769c03c10c171a9aa0?s=128&d=identicon&r=PG&f=1", "display_name": "keerthana", "link": "https://stackoverflow.com/users/5990280/keerthana"}, "edited": false, "score": 0, "creation_date": 1516008962, "post_id": 48243985, "comment_id": 83503053, "body": "My question was how to check the working of &#39;revert_method&#39; by throwing an exception explicitly. The problem is I&#39;m not able to trigger the after_rollback callback method."}], "tags": [], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "is_accepted": false, "score": 0, "last_activity_date": 1515875116, "creation_date": 1515875116, "answer_id": 48243985, "question_id": 48167915, "link": "https://stackoverflow.com/questions/48167915/run-after-rollback-callback-for-rollbacks-due-to-another-callback/48243985#48243985", "title": "Run after_rollback callback for rollbacks due to another callback", "body": "<p>You could use a debugger like the <strong><a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow noreferrer\">Byebug</a></strong> gem to follow and inspect the flow of your application step by step.</p>\n\n<p>See Rails Guides section <a href=\"http://edgeguides.rubyonrails.org/debugging_rails_applications.html#debugging-with-the-byebug-gem\" rel=\"nofollow noreferrer\">Debugging with the byebug gem</a></p>\n"}], "owner": {"reputation": 93, "user_id": 5990280, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a9a1aa7bd8a127769c03c10c171a9aa0?s=128&d=identicon&r=PG&f=1", "display_name": "keerthana", "link": "https://stackoverflow.com/users/5990280/keerthana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515875116, "creation_date": 1515499687, "last_edit_date": 1515575950, "question_id": 48167915, "link": "https://stackoverflow.com/questions/48167915/run-after-rollback-callback-for-rollbacks-due-to-another-callback", "title": "Run after_rollback callback for rollbacks due to another callback", "body": "<p>I want to raise a dummy exception while doing 'save'(while creating) and see if the method in <code>after_rollback</code> callback works fine.</p>\n\n<p>I'm doing something like this:</p>\n\n<pre><code>before_create :do_something\nafter_create :raise_exception\nafter_rollback :revert_method\n</code></pre>\n\n<p>Here, rollback is happening, but revert_method in <code>after_rollback</code> isn't executed.</p>\n\n<p>(I want the before_create callbacks to run as well, so cannot raise the exception before that.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-paranoia", "rails-administrate"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515498687, "post_id": 48167156, "comment_id": 83314246, "body": "I don&#39;t understand your question. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your current code. I <b>think</b> what you&#39;re asking is &quot;I&#39;d like a page to view soft-deleted records&quot; - is that right? Why are you using such non-standard config for <code>paranoia</code>? Normally, deleted records are <i>automatically</i> hidden; but you can explicitly display them via <code>Model.with_deleted</code> or <code>acts_as_paranoid without_default_scope: true</code> - as explained in the project&#39;s README."}, {"owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515501662, "post_id": 48167156, "comment_id": 83315985, "body": "Yes, I already read all the README from <code>paranoia</code>, and I saw that it&#39;s possible to use <code>Model.with_deleted</code> to get the values that I&#39;m finding. But the problem actually is with <code>Administrate</code> because, it is not possible for me right now to change the resources that would be displayed on the admin panel of administrate."}, {"owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515502009, "post_id": 48167156, "comment_id": 83316197, "body": "And I&#39;m sorry but I&#39;m not so fluent in english, so it&#39;s kind of difficult to explain problems sometimes. I would ask you to show a little indulgence."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1515502927, "post_id": 48167156, "comment_id": 83316756, "body": "I just looked at the <code>administrate</code> code (I&#39;ve never used this library before, by the way), and it <a href=\"https://github.com/thoughtbot/administrate/blob/64c7eba217c2e368865a81b4eab0813331d6774f/app/controllers/administrate/application_controller.rb#L118-L120\" rel=\"nofollow noreferrer\">looks like you can override the <code>scoped_resource </code> method</a>? So just something like: <code>def scoped_resource; Foo.with_deleted; end</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "is_accepted": true, "score": 2, "last_activity_date": 1515504780, "creation_date": 1515504780, "answer_id": 48169354, "question_id": 48167156, "link": "https://stackoverflow.com/questions/48167156/rails-using-paranoia-and-administrate-is-there-a-way-to-get-deleted-record-with/48169354#48169354", "title": "Rails using Paranoia and Administrate, Is there a way to get deleted record with administrate for user?", "body": "<p>First of all a big thanks to @Tom Lord, that help me to solved my problem, and that is the solution:</p>\n\n<ol>\n<li>First of all override in your <code>app/controllers/admin/application_controller.rb</code> generate by <code>Administrate</code> as below:</li>\n</ol>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Admin\n  class ApplicationController &lt; Administrate::ApplicationController\n\n    ...\n\n    def index\n      search_term = params[:search].to_s.strip\n      resources = Administrate::Search.new(scoped_resource,\n                                       dashboard_class,\n                                       search_term).run\n      resources = resources.includes(*resource_includes) if resource_includes.any?\n      resources = order.apply(resources)\n      resources = resources.page(params[:page]).per(records_per_page)\n      resources = finder_chain_additions(resources)\n      page = Administrate::Page::Collection.new(dashboard, order: order)\n\n      render locals: {\n        resources: resources,\n        search_term: search_term,\n        page: page,\n        show_search_bar: show_search_bar?\n      }\n    end\n\n  private\n    def scoped_resource\n      begin\n        # Provide resource with deleted_at field generate with Paranoia\n        resource_class.unscoped\n      rescue\n        # Used for models whose don't have Paranoia field\n        resource_class\n      end\n    end\n\n    def finder_chain_additions resources\n      begin\n        resources.with_deleted\n      rescue\n        resources\n      end\n    end\n  end\nend\n</code></pre>\n\n<ol start=\"2\">\n<li>In your <code>app/dashboards/foo_dashboard.rb</code></li>\n</ol>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"administrate/base_dashboard\"\n\nclass ArticleDashboard &lt; Administrate::BaseDashboard\n  # ATTRIBUTE_TYPES\n  # a hash that describes the type of each of the model's fields.\n  #\n  # Each different type represents an Administrate::Field object,\n  # which determines how the attribute is displayed\n  # on pages throughout the dashboard.\n  ATTRIBUTE_TYPES = {\n    id: Field::Number,\n    ...\n    created_at: Field::DateTime,\n    updated_at: Field::DateTime,\n    deleted_at: Field::DateTime,\n  }.freeze\n\n  # COLLECTION_ATTRIBUTES\n  # an array of attributes that will be displayed on the model's index page.\n  #\n  # By default, it's limited to four items to reduce clutter on index pages.\n  # Feel free to add, remove, or rearrange items.\n  COLLECTION_ATTRIBUTES = [\n    :id,\n    ...\n    :deleted_at,\n    :hide,\n  ].freeze\n\n  # SHOW_PAGE_ATTRIBUTES\n  # an array of attributes that will be displayed on the model's show page.\n  SHOW_PAGE_ATTRIBUTES = [\n    :id,\n    ...\n    :deleted_at,    \n    :created_at,\n    :updated_at,\n  ].freeze\n\n  # FORM_ATTRIBUTES\n  # an array of attributes that will be displayed\n  # on the model's form (`new` and `edit`) pages.\n  FORM_ATTRIBUTES = [\n    ...\n    :deleted_at,\n  ].freeze\n\n  # Overwrite this method to customize how articles are displayed\n  # across all pages of the admin dashboard.\n  #\n  # def display_resource(article)\n  #   \"Article ##{article.id}\"\n  # end\nend\n</code></pre>\n\n<p>Of course change <code>deleted_at</code> field depends on the migration you may have done in order to add paranoia gem.</p>\n"}], "owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 1, "accepted_answer_id": 48169354, "answer_count": 1, "score": 2, "last_activity_date": 1515504780, "creation_date": 1515497176, "last_edit_date": 1515501817, "question_id": 48167156, "link": "https://stackoverflow.com/questions/48167156/rails-using-paranoia-and-administrate-is-there-a-way-to-get-deleted-record-with", "title": "Rails using Paranoia and Administrate, Is there a way to get deleted record with administrate for user?", "body": "<p>I would like to get all deleted records change by <a href=\"https://github.com/rubysherpas/paranoia\" rel=\"nofollow noreferrer\">paranoia</a> on admin panel with <a href=\"https://github.com/thoughtbot/administrate\" rel=\"nofollow noreferrer\">administrate</a>. My problem is that I'm finding a way to do this stuff but until now without success</p>\n\n<p>Actually what I'm trying to do is to override index method on a specific controller generate with <code>Administrate</code>, in order to get all elements (deleted or not) as resources for the current controller. Like so:</p>\n\n<p><code>controllers/admin/foo_controller.rb</code></p>\n\n<pre><code>module Admin\n  class FooController &lt; Admin::ApplicationController\n    super\n    resources = Foo.where(\"at_delete IS NOT NULL\").page(params[:page])\n  end\nend\n</code></pre>\n\n<p>But when I create a foo object from the admin panel, and after removed it. The record isn't display anymore and I would like to get it still visible for giving the possibility to admin to change it. </p>\n\n<p>If anyone has an opinion to make this possible, it would be nice.</p>\n\n<p>Thank you in advance for your help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shopify", "liquid"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515495030, "post_id": 48164891, "comment_id": 83312063, "body": "Works for me! ;)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515495063, "post_id": 48164891, "comment_id": 83312085, "body": "No, but seriously, you <i>need</i> to <b>show us some code</b>. I can&#39;t magically fix the problem without seeing it!"}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "is_accepted": true, "score": 0, "last_activity_date": 1515502406, "creation_date": 1515502406, "answer_id": 48168646, "question_id": 48164891, "link": "https://stackoverflow.com/questions/48164891/how-to-hide-footer-on-customized-rails-404-page-in-liquid-shopify-template/48168646#48168646", "title": "How to hide footer on customized rails 404 page in liquid shopify template", "body": "<p>I fixed it by changing the erb templates to liquid. Then i put this as the first line in the views that i changed from erb to liquid.</p>\n\n<pre><code>&lt;style&gt;\n   footer { display:none; }\n&lt;/style&gt;\n</code></pre>\n\n<p>`</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 9212275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vyiCiUAIWCk/AAAAAAAAAAI/AAAAAAAAADY/0vA_rtNjNsg/photo.jpg?sz=128", "display_name": "Tanay Soft", "link": "https://stackoverflow.com/users/9212275/tanay-soft"}, "is_accepted": false, "score": 0, "last_activity_date": 1515839415, "creation_date": 1515839415, "answer_id": 48238996, "question_id": 48164891, "link": "https://stackoverflow.com/questions/48164891/how-to-hide-footer-on-customized-rails-404-page-in-liquid-shopify-template/48238996#48238996", "title": "How to hide footer on customized rails 404 page in liquid shopify template", "body": "<p>if you are working on Shopify template with liquid code. you can use:</p>\n\n<pre><code>{% unless template contains '404' %}\n{% include 'footer' %}\n{% endunless %}\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 48168646, "answer_count": 2, "score": 1, "last_activity_date": 1515839415, "creation_date": 1515489651, "question_id": 48164891, "link": "https://stackoverflow.com/questions/48164891/how-to-hide-footer-on-customized-rails-404-page-in-liquid-shopify-template", "title": "How to hide footer on customized rails 404 page in liquid shopify template", "body": "<p>I am working on a rails website with views made predominantly with liquid shopify. I customized the default rails 404 error message to something more dynamic that would display an animation and the top menu of the website. My new error pages are named not_found.html.erb and internal_server_error.html.erb. Aside the top menu that displays automatically on the new error page, the footer displays as well and i want to take it out. The top menu and the footer are liquid templates. I want to take out the liquid footer on only the two error pages i mentioned above. </p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5697070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be224442a29516f4e5cc812df48fabf0?s=128&d=identicon&r=PG&f=1", "display_name": "mobios", "link": "https://stackoverflow.com/users/5697070/mobios"}, "edited": false, "score": 0, "creation_date": 1515491836, "post_id": 48164932, "comment_id": 83310127, "body": "Hello Robin, thanks for your answer it was very helpfull. My issue is solved.  Best regards mobios"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 103, "user_id": 5697070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be224442a29516f4e5cc812df48fabf0?s=128&d=identicon&r=PG&f=1", "display_name": "mobios", "link": "https://stackoverflow.com/users/5697070/mobios"}, "edited": false, "score": 0, "creation_date": 1515493700, "post_id": 48164932, "comment_id": 83311232, "body": "@mobios In case it&#39;s not clear, this (perfectly good) answer is not using a regular expression. You don&#39;t <i>need</i> a regular expression for this."}, {"owner": {"reputation": 103, "user_id": 5697070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be224442a29516f4e5cc812df48fabf0?s=128&d=identicon&r=PG&f=1", "display_name": "mobios", "link": "https://stackoverflow.com/users/5697070/mobios"}, "edited": false, "score": 0, "creation_date": 1515493804, "post_id": 48164932, "comment_id": 83311304, "body": "Hello Tom,  if you have a better idea please let me know. How can i do this better? Regards mobios"}, {"owner": {"reputation": 103, "user_id": 5697070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be224442a29516f4e5cc812df48fabf0?s=128&d=identicon&r=PG&f=1", "display_name": "mobios", "link": "https://stackoverflow.com/users/5697070/mobios"}, "edited": false, "score": 0, "creation_date": 1515494224, "post_id": 48164932, "comment_id": 83311573, "body": "I tried to get certificate Information wirth. &quot;certutil.exe -view -restrict&quot; but i get always a errormessage -&gt; the System cannot find the file specified&quot; Therefore i try to use regularexpressions with ruby."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 103, "user_id": 5697070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be224442a29516f4e5cc812df48fabf0?s=128&d=identicon&r=PG&f=1", "display_name": "mobios", "link": "https://stackoverflow.com/users/5697070/mobios"}, "edited": false, "score": 0, "creation_date": 1515498175, "post_id": 48164932, "comment_id": 83313926, "body": "@mobios I&#39;m not suggesting a better idea; this answer is perfectly good. My point was that your question seems heavily focused on a &quot;regex solution&quot;, when in actual fact this is <i>better</i> solved <i>without</i> a regex."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 103, "user_id": 5697070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be224442a29516f4e5cc812df48fabf0?s=128&d=identicon&r=PG&f=1", "display_name": "mobios", "link": "https://stackoverflow.com/users/5697070/mobios"}, "edited": false, "score": 0, "creation_date": 1515498287, "post_id": 48164932, "comment_id": 83313999, "body": "@mobios If you have any additional issues like this, please raise them as new questions in an appropriate place. (Possibly that belongs in <a href=\"https://serverfault.com/\">server fault</a>?) It&#39;s not advised to raise such unrelated questions within the comments."}], "tags": [], "owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "is_accepted": false, "score": 1, "last_activity_date": 1515489837, "creation_date": 1515489837, "answer_id": 48164932, "question_id": 48164195, "link": "https://stackoverflow.com/questions/48164195/ruby-regular-expression-for-empty-line/48164932#48164932", "title": "ruby regular expression for empty line", "body": "<p>You can use</p>\n\n<pre><code>cert_util_output.split(/\\n\\n/)\n</code></pre>\n\n<p>This splits the string on empty lines.</p>\n"}], "owner": {"reputation": 103, "user_id": 5697070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be224442a29516f4e5cc812df48fabf0?s=128&d=identicon&r=PG&f=1", "display_name": "mobios", "link": "https://stackoverflow.com/users/5697070/mobios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1515493609, "creation_date": 1515487105, "last_edit_date": 1515493609, "question_id": 48164195, "link": "https://stackoverflow.com/questions/48164195/ruby-regular-expression-for-empty-line", "title": "ruby regular expression for empty line", "body": "<p>I have a little issue with ruby expressions.<br>\nRuby Version: 2.3.0</p>\n\n<p>I have following String:</p>\n\n<pre><code>================ Certificate 0 ================\nSerial Number: 039de8\nIssuer: E=test-support@test.de, CN=test-CA, OU=testou, O=test GmbH, L=Ber\nlin, S=Berlin, C=DE\n NotBefore: 08.01.2018 11:10\n NotAfter: 08.01.2019 11:10\nSubject: C=DE, S=Berlin, L=Berlin, OU=Testou, O=test, CN=test-1.test.tc\nNon-root Certificate\nTemplate:\nCert Hash(sha1): ea 61 42 ad 80 eb b7 94 b0 fb 90 90 39 ce 44 6e a9 ee f4 1b\n  Key Container = {DE49D597-C00C-4433-9619-506FD234FF81}\n  Unique container name: 73ab698919e3dcc47cad8c7543f78ff0_ae268432-4b90-4c10-adf\ne-8c743fdedffa\n  Provider = Microsoft Enhanced Cryptographic Provider v1.0\nPrivate key is NOT exportable\nEncryption test passed\n\n================ Certificate 1 ================\nSerial Number: 0a4cd4\nIssuer: E=test-support@bdr.de, CN=test-CA, OU=testou, O=test GmbH, L=Ber\nlin, S=Berlin, C=DE\n NotBefore: 05.01.2018 10:07\n NotAfter: 05.01.2019 10:07\nSubject: C=DE, S=Berlin, L=Berlin, OU=testou, O=test, CN=test-2.test.tc\nNon-root Certificate\nTemplate:\nCert Hash(sha1): b2 49 95 e1 5c 47 4a 75 5c 1a 68 59 eb 26 05 bc 43 43 0e e9\n  Key Container = {A4F9D180-3391-4D9F-855A-6BD5457CF719}\n  Unique container name: 2b06a7fd8659046a8520a72ee921f2e9_ae268432-4b90-4c10-adf\ne-8c743fdedffa\n  Provider = Microsoft Enhanced Cryptographic Provider v1.0\nPrivate key is NOT exportable\nEncryption test passed\nCertUtil: -store command completed successfully.\n</code></pre>\n\n<p>String was generated with:</p>\n\n<pre><code>certutil -store MY\n</code></pre>\n\n<p>How can I get this output in an Array?\nI want that all information from <code>Certificate 0</code> and <code>Certificate 1</code> into a 2-element array.</p>\n\n<p>Sometimes I have just one certificate (<code>Certificate 0</code>), without \n<code>Certificate 1</code>. In this case, my array should have just one element.</p>\n\n<p>What I need is the correct regular expression. I want a regular expression\nfrom <code>================ Certificate 0 ================</code> till to the blank line.</p>\n\n<p>For example:</p>\n\n<pre><code>cert_util_output = %x(certutil -store MY)\ncertificate_array = cert_util_output.scan(/the_regular_expression/).flatten\n</code></pre>\n\n<p>Sorry for my bad english :)  </p>\n\n<p>Anybody a idea?<br>\nBest regards\nmobios</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "rake", "searchkick"], "answers": [{"comments": [{"owner": {"reputation": 2821, "user_id": 734861, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/898cac257f853f8bf0a1a84a67d88c40?s=128&d=identicon&r=PG", "display_name": "kofhearts", "link": "https://stackoverflow.com/users/734861/kofhearts"}, "edited": false, "score": 0, "creation_date": 1515487233, "post_id": 48164164, "comment_id": 83307571, "body": "ok please look above for update. i fixed the issue with running Book.reindex directly in console but still want to know why rake command is breaking with sqlite missing error."}, {"owner": {"reputation": 2821, "user_id": 734861, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/898cac257f853f8bf0a1a84a67d88c40?s=128&d=identicon&r=PG", "display_name": "kofhearts", "link": "https://stackoverflow.com/users/734861/kofhearts"}, "edited": false, "score": 0, "creation_date": 1515487631, "post_id": 48164164, "comment_id": 83307771, "body": "i want to reduce the number of gems for production. can you tell what exactly the gem does and how does it solve the problem?"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1515486933, "creation_date": 1515486933, "answer_id": 48164164, "question_id": 48164064, "link": "https://stackoverflow.com/questions/48164064/specified-sqlite3-for-database-adapter-but-the-gem-is-not-loaded-when-running/48164164#48164164", "title": "Specified &#39;sqlite3&#39; for database adapter, but the gem is not loaded when running searchkick reindex?", "body": "<p>You can try the adding <code>gem 'rails_12factor'</code> on production group</p>\n\n<p>Gemfile</p>\n\n<pre><code> group :production do \n    gem 'pg'\n    gem 'rails_12factor'\n end\n</code></pre>\n\n<p>Then </p>\n\n<pre><code>bundle install\nbundle update \n</code></pre>\n\n<p>Then push to production and test it</p>\n\n<p>Hope to help</p>\n"}], "owner": {"reputation": 2821, "user_id": 734861, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/898cac257f853f8bf0a1a84a67d88c40?s=128&d=identicon&r=PG", "display_name": "kofhearts", "link": "https://stackoverflow.com/users/734861/kofhearts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 740, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515487189, "creation_date": 1515486496, "last_edit_date": 1515487189, "question_id": 48164064, "link": "https://stackoverflow.com/questions/48164064/specified-sqlite3-for-database-adapter-but-the-gem-is-not-loaded-when-running", "title": "Specified &#39;sqlite3&#39; for database adapter, but the gem is not loaded when running searchkick reindex?", "body": "<p>First of all i have separated database according to the environment</p>\n\n<pre><code>group :production do \n  gem 'pg'\nend\n\n\ngroup :development, :test do\n  gem 'byebug'\n  gem 'sqlite3'\n  gem 'rspec-rails'\nend\n</code></pre>\n\n<p>after adding few records. I ran the following reindex command in production.</p>\n\n<pre><code>bundle exec rake searchkick:reindex CLASS=Book\n</code></pre>\n\n<p>but it gives the following error</p>\n\n<pre><code>rake aborted!\nGem::LoadError: Specified 'sqlite3' for database adapter, but the gem is not loaded. Add `gem 'sqlite3'` to your Gemfile (and ensure its v                                                   ersion is at the minimum required by ActiveRecord).\n/book/shared/bundle/ruby/2.4.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/connection_specification.                                                   rb:176:in `rescue in spec'\n/book/shared/bundle/ruby/2.4.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/connection_specification.                                                   rb:173:in `spec'\n/book/shared/bundle/ruby/2.4.0/gems/activerecord-5.0.6/lib/active_record/connection_handling.rb:53:in `establish_conne                                                   ction'\n/book/shared/bundle/ruby/2.4.0/gems/activerecord-5.0.6/lib/active_record/railtie.rb:125:in `block (2 levels) in &lt;class                                                   :Railtie&gt;'\n\nCaused by:\nGem::LoadError: sqlite3 is not part of the bundle. Add it to your Gemfile.\n/home/deploy/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/rubygems_integration.rb:404:in `block (2 levels) in replace_gem'\n/book/shared/bundle/ruby/2.4.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/sqlite3_adapter.rb:7:in `                                                   &lt;top (required)&gt;'\n</code></pre>\n\n<p>I appreciate any help as to why it is searching for sql although pg is set for production?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Ok i solved the issue by doing Book.reindex in rails console production but i still want to know why </p>\n\n<pre><code>bundle exec rake searchkick:reindex CLASS=Book\n</code></pre>\n\n<p>fails with the above error? It was working at the start. After making few upgrades like adding aws-sdk then it started showing the error. Could aws-sdk be breaking it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vps", "bluehost"], "comments": [{"owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 0, "creation_date": 1515492685, "post_id": 48163731, "comment_id": 83310643, "body": "If it&#39;s just a regular VPS, you should access if via <code>&lt;ip_address&gt;:3000</code> (no app name). Also, make sure Rails server is bound to <code>0.0.0.0</code>, not to <code>127.0.0.1</code>."}, {"owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "reply_to_user": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 0, "creation_date": 1515644356, "post_id": 48163731, "comment_id": 83380461, "body": "I did that too, but it doesn&#39;t work."}], "owner": {"reputation": 513, "user_id": 2269396, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EaJ6Y.png?s=128&g=1", "display_name": "Irwan", "link": "https://stackoverflow.com/users/2269396/irwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515485031, "creation_date": 1515485031, "question_id": 48163731, "link": "https://stackoverflow.com/questions/48163731/run-ruby-on-rails-on-vps-bluehost", "title": "Run Ruby on Rails on VPS BlueHost", "body": "<p>I just upload all my Ruby on Rails into BlueHost VPS Server. I already setup the application and command \"rails s\" is working. But when I tried to access the application, I got 404 error.</p>\n\n<p>I tried : </p>\n\n<pre><code>1. &lt;ip_address&gt;/APPNAME:3000\n2. &lt;ip_address&gt;/APPNAME\n</code></pre>\n\n<p>Both are return 404. I already tried to followed BlueHost documentation, and I tried to asked support too, but they didn't help at all. </p>\n\n<p>I had once deploy a Ruby on Rails application into BlueHost too, and when I try to access it with port, just like what I did, I can see the application, but not with this one. </p>\n\n<p>Could somebody help me? Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 0, "creation_date": 1515485041, "post_id": 48163674, "comment_id": 83306530, "body": "<a href=\"https://stackoverflow.com/a/44742417/297087\">stackoverflow.com/a/44742417/297087</a>"}, {"owner": {"reputation": 1809, "user_id": 4966705, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-33GGBSJvG1o/AAAAAAAAAAI/AAAAAAAAAEw/l3yn5OOYHKA/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/4966705/rob"}, "edited": false, "score": 0, "creation_date": 1515494731, "post_id": 48163674, "comment_id": 83311883, "body": "have you run <code>bundle install</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1515497017, "creation_date": 1515497017, "answer_id": 48167109, "question_id": 48163674, "link": "https://stackoverflow.com/questions/48163674/cannot-load-such-file-mysql2-2-4-mysql2-loaderror/48167109#48167109", "title": "cannot load such file -- mysql2/2.4/mysql2 (LoadError)", "body": "<p>Currently, There is no mysql2 binary for Ruby 2.4 for Windows available at this time.</p>\n\n<p>Please see <a href=\"https://github.com/brianmario/mysql2/issues/861\" rel=\"nofollow noreferrer\">this</a> github issue for more info\n<a href=\"https://github.com/brianmario/mysql2/issues/861\" rel=\"nofollow noreferrer\">https://github.com/brianmario/mysql2/issues/861</a></p>\n\n<p>Hope this may help you. </p>\n"}, {"tags": [], "owner": {"reputation": 1097, "user_id": 2932688, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8017413754ada26e96888723e7915c52?s=128&d=identicon&r=PG&f=1", "display_name": "user2932688", "link": "https://stackoverflow.com/users/2932688/user2932688"}, "is_accepted": false, "score": 0, "last_activity_date": 1522360489, "creation_date": 1522360489, "answer_id": 49565577, "question_id": 48163674, "link": "https://stackoverflow.com/questions/48163674/cannot-load-such-file-mysql2-2-4-mysql2-loaderror/49565577#49565577", "title": "cannot load such file -- mysql2/2.4/mysql2 (LoadError)", "body": "<p>compile your mysql comment worked for me\n<a href=\"https://github.com/brianmario/mysql2/issues/923#issuecomment-361346864\" rel=\"nofollow noreferrer\">https://github.com/brianmario/mysql2/issues/923#issuecomment-361346864</a></p>\n\n<p><strong>but be aware that at step #3</strong>\ninstead of </p>\n\n<blockquote>\n  <p>cd  \"C:\\Ruby24-x64\\bin\\ruby\" extconf.rb --with-mysql-dir=\"C:\\Program\n  Files\\MySQL\\MySQL Connector.C 6.1\"</p>\n</blockquote>\n\n<p>I did</p>\n\n<blockquote>\n  <p>\"C:\\Ruby24-x64\\bin\\ruby\" extconf.rb --with-mysql-dir=\"C:\\Program Files\n  (x86)\\MySQL\\MySQL Connector.C 6.1\"</p>\n</blockquote>\n\n<p>no \"cd\" at the begging and my connector was in \"C:\\Program Files (x86)\" folder.</p>\n\n<p><strong>also at step #6</strong>\nI was copying</p>\n\n<blockquote>\n  <p>C:\\Ruby24-x64\\lib\\ruby\\gems\\2.4.0\\gems\\mysql2-0.4.10-x64-mingw32\\ext\\mysql2\\mysql2.so</p>\n</blockquote>\n\n<p>to newly created folder</p>\n\n<blockquote>\n  <p>C:\\Ruby24-x64\\lib\\ruby\\gems\\2.4.0\\gems\\mysql2-0.4.10-x64-mingw32\\lib\\mysql2\\2.4</p>\n</blockquote>\n\n<p>compiling process was showing plenty warnings but eventually rake db:migrate started work for me, so should yours code</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 1501473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b8c42c3e041abbc1dd6f52932d0f83f?s=128&d=identicon&r=PG", "display_name": "Bala1225", "link": "https://stackoverflow.com/users/1501473/bala1225"}, "is_accepted": false, "score": 0, "last_activity_date": 1522408212, "creation_date": 1522408212, "answer_id": 49573298, "question_id": 48163674, "link": "https://stackoverflow.com/questions/48163674/cannot-load-such-file-mysql2-2-4-mysql2-loaderror/49573298#49573298", "title": "cannot load such file -- mysql2/2.4/mysql2 (LoadError)", "body": "<p>Please install Mysql server .\nInstall below gems. </p>\n\n<p>Libmysqlclient-dev \nOr \nMysql-devl </p>\n"}], "owner": {"reputation": 120, "user_id": 9191717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RxnK3.jpg?s=128&g=1", "display_name": "Faizul Hassan", "link": "https://stackoverflow.com/users/9191717/faizul-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1719, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1522408212, "creation_date": 1515484771, "last_edit_date": 1515511875, "question_id": 48163674, "link": "https://stackoverflow.com/questions/48163674/cannot-load-such-file-mysql2-2-4-mysql2-loaderror", "title": "cannot load such file -- mysql2/2.4/mysql2 (LoadError)", "body": "<p>I am new to Ruby On Rails. I have been trying to create a model called Book using <strong><em>rails generate model Book</em></strong> command but I am getting the following error message:</p>\n\n<pre><code>F:\\Faizul\\Noah-Data\\Backup\\Ruby\\Rails App\\library&gt;rails generate model Book\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/mysql2-0.4.10-x64-mingw32/lib/mysql2/mysql2.rb:2:in `require': cannot load such file -- mysql2/2.4/mysql2 (LoadError)\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/mysql2-0.4.10-x64-mingw32/lib/mysql2/mysql2.rb:2:in `&lt;top (required)&gt;'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/mysql2-0.4.10-x64-mingw32/lib/mysql2.rb:31:in `require'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/mysql2-0.4.10-x64-mingw32/lib/mysql2.rb:31:in `&lt;top (required)&gt;'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:81:in `require'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:81:in `block (2 levels) in require'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `each'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `block in require'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `each'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `require'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.1/lib/bundler.rb:114:in `require'\n        from F:/Faizul/Noah-Data/Backup/Ruby/Rails App/library/config/application.rb:7:in `&lt;top (required)&gt;'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/railties-5.1.4/lib/rails/command/actions.rb:15:in `require'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/railties-5.1.4/lib/rails/command/actions.rb:15:in `require_application_and_environment!'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/railties-5.1.4/lib/rails/commands/generate/generate_command.rb:19:in `perform'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/railties-5.1.4/lib/rails/command/base.rb:63:in `perform'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/railties-5.1.4/lib/rails/command.rb:44:in `invoke'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/railties-5.1.4/lib/rails/commands.rb:16:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Made the below actions to overcome the issue but failed though :(</p>\n\n<ul>\n<li>Uninstalled mysql2</li>\n<li>Installed mysql2 using <strong>gem install mysql2 command</strong></li>\n<li>Added 'msql2' to my Gemfile</li>\n<li>Configured <strong>database.yml</strong> file as below:</li>\n</ul>\n\n<blockquote>\n<pre><code>default: &amp;default\n  adapter: mysql2\n  pool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\n  timeout: 5000\n\ndevelopment:\n   adapter: mysql2\n   database: library_development\n   username: root\n   password: root\n   host: localhost\n   port: 3309\ntest:\n   adapter: mysql2\n   database: library_test\n   username: root\n   password: root\n   host: localhost\n   port: 3309\nproduction:\n   adapter: mysql2\n   database: library_production\n   username: root\n   password: root\n   host: localhost\n   port: 3309\n</code></pre>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "class", "module", "dry"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1515510567, "post_id": 48162921, "comment_id": 83321649, "body": "Why is <code>ClassAwesome</code> defining these constants? This binding seems unnatural to me. Why not allow the <code>ExportNames</code>  to define them instead?"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1515510283, "post_id": 48162959, "comment_id": 83321434, "body": "dependency injection is exactly the way I was thinking of going about it too. glad I scrolled down this far because I would not have bothered with such a detailed explanation."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1515510976, "post_id": 48162959, "comment_id": 83321937, "body": "@engineersmnky apparently somebody had this answer downvoted, so maybe the explanation is <i>too damn boring detailed</i> :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1515566001, "last_edit_date": 1515566001, "creation_date": 1515481707, "answer_id": 48162959, "question_id": 48162921, "link": "https://stackoverflow.com/questions/48162921/inheriting-sharing-code-across-two-ruby-modules/48162959#48162959", "title": "Inheriting/sharing code across two Ruby modules", "body": "<p>This is usually called \u201ca dependency injection\u201d and there are many articles on the subject over the internet. The main approach would be to accept a parameter in the call to <code>#perform</code> method:</p>\n\n<pre><code>module DoManyDifferentThings\n  class ExportNames\n    def initialize(names, limit = 1000)\n      @names = names\n      @limit = limit\n    end\n\n    def perform(report)\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(report)\n    end\n  end\nend\n</code></pre>\n\n<p>and call it like:</p>\n\n<pre><code>DoManyDifferentThings::ExportNames.perform(\n  ::ClassAwesome::EXPORT_DEFAULTS\n)\n</code></pre>\n\n<hr>\n\n<p>Whether the report method is supposed to have a predefined signature, one might go with class inheritance:</p>\n\n<pre><code>module DoManyDifferentThings\n  class ExportNames\n    def initialize(names, limit = 1000)\n      @names = names\n      @limit = limit\n    end\n\n    def perform\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(self.class.constant_get('REPORT'))\n    end\n  end\n\n  class ExportNames1 &lt; ExportNames\n    REPORT = ::ClassAwesome::EXPORT_DEFAULTS_1\n  end\n\n  class ExportNames1 &lt; ExportNames\n    REPORT = ::ClassAwesome::EXPORT_DEFAULTS_2\n  end\nend\n</code></pre>\n\n<p>or, as an alternative, one might declare a method to be overwritten in descendants:</p>\n\n<pre><code>module DoManyDifferentThings\n  class ExportNames\n    def initialize(names, limit = 1000)\n      @names = names\n      @limit = limit\n    end\n\n    def perform\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(report)\n    end\n\n    protected\n\n    def report\n      raise \"DO NOT CALL ME DIRECTLY\"\n    end\n  end\n\n  class ExportNames1 &lt; ExportNames\n    def report\n      ::ClassAwesome::EXPORT_DEFAULTS_1\n    end\n  end\n\n  class ExportNames2 &lt; ExportNames\n    def report\n      ::ClassAwesome::EXPORT_DEFAULTS_2\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1515481912, "creation_date": 1515481912, "answer_id": 48163016, "question_id": 48162921, "link": "https://stackoverflow.com/questions/48162921/inheriting-sharing-code-across-two-ruby-modules/48163016#48163016", "title": "Inheriting/sharing code across two Ruby modules", "body": "<p>If the namespace for both the classes can be same than I would have clean up the code by rewriting the code like this</p>\n\n<pre><code>module DoAThing\n  class ExportNames\n    def initialize(names, limit = 1000)\n      @names = names\n      @limit = limit\n    end\n\n    def perform(value)\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(value)\n    end\n  end\nend \n</code></pre>\n\n<p>Now I would call</p>\n\n<pre><code>DoAThing::ExportNames.new('your names').perform(::ClassAwesome::EXPORT_DEFAULTS)\nDoAThing::ExportNames.new('your names').perform(::ClassAwesome::DIFFERENT_EXPORT_DEFAULTS)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 284, "user_id": 8060293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e181c9a20f3d9825fdeae4aef73236?s=128&d=identicon&r=PG", "display_name": "Alexis", "link": "https://stackoverflow.com/users/8060293/alexis"}, "is_accepted": false, "score": 2, "last_activity_date": 1515482136, "creation_date": 1515482136, "answer_id": 48163065, "question_id": 48162921, "link": "https://stackoverflow.com/questions/48162921/inheriting-sharing-code-across-two-ruby-modules/48163065#48163065", "title": "Inheriting/sharing code across two Ruby modules", "body": "<p>Either you move this constant as a parameter or you can use ihneritance.</p>\n\n<p><strong>Provide defaults as a parameter</strong></p>\n\n<pre><code>module DoAThing\n  class ExportNames\n    def initialize(names, limit = 1000, defaults = ::ClassAwesome::EXPORT_DEFAULTS)\n      @names = names\n      @limit = limit\n      @defaults = defaults\n    end\n\n    def perform\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(@defaults)\n    end\n  end\nend\n</code></pre>\n\n<p>Instead of calling DoASlightDifferentThing::ExportNames, you do:</p>\n\n<pre><code>DoAThing::ExportNames.perform_now(names, 1000, ::ClassAwesome::DIFFERENT_EXPORT_DEFAULTS)\n</code></pre>\n\n<p><strong>Ihneritance</strong></p>\n\n<p>Or you can use ihneritance where we add a default method which will be overriden:</p>\n\n<pre><code>module DoAThing\n  class ExportNames\n    def initialize(names, limit = 1000)\n      @names = names\n      @limit = limit\n    end\n\n    def perform\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(defaults)\n    end\n\n    def defaults\n      ::ClassAwesome::EXPORT_DEFAULTS\n    end\n  end\nend\n\nmodule DoASlightDifferentThing\n  class ExportNames &lt; DoAThing::ExportNames\n    def defaults\n      ::ClassAwesome::DIFFERENT_EXPORT_DEFAULTS\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1049, "user_id": 2403445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f84b31d5451887e968e4870254bc0c9?s=128&d=identicon&r=PG", "display_name": "TheNovice", "link": "https://stackoverflow.com/users/2403445/thenovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 48162959, "answer_count": 3, "score": 2, "last_activity_date": 1515566001, "creation_date": 1515481541, "question_id": 48162921, "link": "https://stackoverflow.com/questions/48162921/inheriting-sharing-code-across-two-ruby-modules", "title": "Inheriting/sharing code across two Ruby modules", "body": "<p>Noob here, looking for help DRYing this up. Let's say I have <code>module DoAThing</code> that looks like this:</p>\n\n<pre><code>module DoAThing\n  class ExportNames\n    def initialize(names, limit = 1000)\n      @names = names\n      @limit = limit\n    end\n\n    def perform\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(::ClassAwesome::EXPORT_DEFAULTS)\n    end\n  end\nend\n</code></pre>\n\n<p>And then I want to add a module that does the exact same thing except when it comes to generating a report, I want to pass a different constant, so something like this:</p>\n\n<pre><code>module DoASlightDifferentThing\n  class ExportNames\n    def initialize(names, limit = 1000)\n      @names = names\n      @limit = limit\n    end\n\n    def perform\n      awesome = ::ClassAwesome.sort_names(names, per_page: @limit)\n      awesome.generate_export(::ClassAwesome::DIFFERENT_EXPORT_DEFAULTS)\n    end\n  end\nend\n</code></pre>\n\n<p>How can I elegantly DRY this up? Literally all I need to be able to do is pass in a different constant, namely I want to swap <code>EXPORT_DEFAULTS</code> for <code>DIFFERENT_EXPORT_DEFAULTS</code></p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1515479129, "creation_date": 1515479129, "answer_id": 48162481, "question_id": 48162321, "link": "https://stackoverflow.com/questions/48162321/activerecord-where-condtion-on-selected-query-result/48162481#48162481", "title": "ActiveRecord where condtion on selected query result", "body": "<p>Use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-having\" rel=\"nofollow noreferrer\"><code>ActiveRecord::QueryMethods#having</code></a> instead of <code>where</code>:</p>\n\n<pre><code>Borrower.\n  joins(\"INNER JOIN receivables ON receivables.borrower_id = borrowers.id\").\n  where(\"borrowers.type = 'moulde_b'\").\n  select(\"borrowers.id as id, sum(receivables.amount) as invoice_amount\").\n  group(\"borrowers.id\"). # mandatory for having\n  having(\"invoice_amount = 12323.33\")\n</code></pre>\n\n<p>The order of chaining these methods does not really matter, since <code>AR</code> would rearrange it while building the real SQL query anyway.</p>\n"}], "owner": {"reputation": 618, "user_id": 1235422, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oZTbX.jpg?s=128&g=1", "display_name": "Ferdinand Rosario", "link": "https://stackoverflow.com/users/1235422/ferdinand-rosario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515479129, "creation_date": 1515478190, "question_id": 48162321, "link": "https://stackoverflow.com/questions/48162321/activerecord-where-condtion-on-selected-query-result", "title": "ActiveRecord where condtion on selected query result", "body": "<pre><code>Borrower.joins(\"INNER JOIN receivables ON receivables.borrower_id = borrowers.id\")\n.where(\"borrowers.type='moulde_b'\")\n.select(\" borrowers.id as id,sum(receivables.amount) as invoice_amount\");\n</code></pre>\n\n<p>from the above result set I'm trying to do <strong>where</strong> condition after the select statement. </p>\n\n<p>I'm trying something like the below,</p>\n\n<pre><code>Borrower.joins(\"INNER JOIN receivables ON receivables.borrower_id = borrowers.id\")\n    .where(\"borrowers.type='moulde_b'\")\n    .select(\" borrowers.id as id,sum(receivables.amount) as invoice_amount\").where(\"receivables.amount = 12323.23\");\n</code></pre>\n\n<p>is this really possible to do after select <strong>where</strong> condtion on the <strong>SUM</strong> column.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515476824, "post_id": 48161822, "comment_id": 83303518, "body": "What is your question?"}, {"owner": {"reputation": 161, "user_id": 7082309, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/cX6PF.jpg?s=128&g=1", "display_name": "Paul Noe", "link": "https://stackoverflow.com/users/7082309/paul-noe"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1515477957, "post_id": 48161822, "comment_id": 83303876, "body": "how do I perform a search for all shipping methods that correspond to a zone?"}], "answers": [{"tags": [], "owner": {"reputation": 1078, "user_id": 4071171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83da5d07e25227a9e448769bc86ca33?s=128&d=identicon&r=PG", "display_name": "Renaud Kern", "link": "https://stackoverflow.com/users/4071171/renaud-kern"}, "is_accepted": false, "score": 0, "last_activity_date": 1517415364, "creation_date": 1517415364, "answer_id": 48546689, "question_id": 48161822, "link": "https://stackoverflow.com/questions/48161822/spree-commerce-perform-a-search-for-payment-methods-using-zone/48546689#48546689", "title": "Spree Commerce, Perform a search for payment methods using zone", "body": "<p>Basically, Spree zone is a bunch of states (one or many). So for a given coutry, you can have many zones.</p>\n\n<p>Then for a Spree shipping method, you can associate it to one or more zones.</p>\n"}], "owner": {"reputation": 161, "user_id": 7082309, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/cX6PF.jpg?s=128&g=1", "display_name": "Paul Noe", "link": "https://stackoverflow.com/users/7082309/paul-noe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517415364, "creation_date": 1515475032, "question_id": 48161822, "link": "https://stackoverflow.com/questions/48161822/spree-commerce-perform-a-search-for-payment-methods-using-zone", "title": "Spree Commerce, Perform a search for payment methods using zone", "body": "<p>In my region, we use a different way to organize countries/states and zones. </p>\n\n<p>It is way more relevant to ask the customer directly for his zone on the address form.. This is why I need to perform a search for all shipping methods that correspond to said zone. The problem is that I cannot understand the way the relationship is made, maybe due to lack of knowledge with apis. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "canvas-lms"], "comments": [{"owner": {"reputation": 289, "user_id": 4810811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vXi1E0cZ7Tw/AAAAAAAAAAI/AAAAAAAAAIE/52imSQINK8Q/photo.jpg?sz=128", "display_name": "Niklas", "link": "https://stackoverflow.com/users/4810811/niklas"}, "edited": false, "score": 0, "creation_date": 1515474308, "post_id": 48161690, "comment_id": 83302785, "body": "Look at the config/routes.rb"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8957268, "user_type": "registered", "profile_image": "https://graph.facebook.com/1810256738984481/picture?type=large", "display_name": "Anup Kumar Mondal", "link": "https://stackoverflow.com/users/8957268/anup-kumar-mondal"}, "edited": false, "score": 0, "creation_date": 1515475663, "post_id": 48161804, "comment_id": 83303176, "body": "Thank you!It&#39;s too long to reply , But i&#39;m giving you root portion  -  get &#39;accounts/:account_id/theme-preview&#39; =&gt; &#39;brand_configs#show&#39;   root to: &#39;users#user_dashboard&#39;, as: &#39;root&#39;, via: :get   # backwards compatibility with the old /dashboard url"}, {"owner": {"reputation": 187, "user_id": 9129624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16834aa4400776c8805844dc0a497fc?s=128&d=identicon&r=PG", "display_name": "L11", "link": "https://stackoverflow.com/users/9129624/l11"}, "reply_to_user": {"reputation": 43, "user_id": 8957268, "user_type": "registered", "profile_image": "https://graph.facebook.com/1810256738984481/picture?type=large", "display_name": "Anup Kumar Mondal", "link": "https://stackoverflow.com/users/8957268/anup-kumar-mondal"}, "edited": false, "score": 0, "creation_date": 1515476016, "post_id": 48161804, "comment_id": 83303289, "body": "change the part <b>get &#39;login/canvas&#39;</b> to <b>get &#39;login/something&#39;</b>"}, {"owner": {"reputation": 43, "user_id": 8957268, "user_type": "registered", "profile_image": "https://graph.facebook.com/1810256738984481/picture?type=large", "display_name": "Anup Kumar Mondal", "link": "https://stackoverflow.com/users/8957268/anup-kumar-mondal"}, "edited": false, "score": 0, "creation_date": 1515477830, "post_id": 48161804, "comment_id": 83303830, "body": "&#39;get &#39;login/canvas&#39; =&gt; &#39;login/canvas#new&#39;, as: :canvas_login   post &#39;login/canvas&#39; =&gt; &#39;login/canvas#create&#39;   # deprecated alias   post &#39;login&#39; =&gt; &#39;login/canvas#create&#39;&#39; - want to redirect to the same page, just want to change the url, what should i change here?"}, {"owner": {"reputation": 95, "user_id": 8938996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3234293126aaa196d5c64c5afbfecf?s=128&d=identicon&r=PG&f=1", "display_name": "Manisha Odedara", "link": "https://stackoverflow.com/users/8938996/manisha-odedara"}, "edited": false, "score": 0, "creation_date": 1550755594, "post_id": 48161804, "comment_id": 96392818, "body": "You can set path in route  Like get &#39;login/canvas&#39; =&gt; &#39;login/canvas#new&#39;, as: :canvas_login, path: &quot;login/something&quot;"}], "tags": [], "owner": {"reputation": 187, "user_id": 9129624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16834aa4400776c8805844dc0a497fc?s=128&d=identicon&r=PG", "display_name": "L11", "link": "https://stackoverflow.com/users/9129624/l11"}, "is_accepted": false, "score": 0, "last_activity_date": 1515474903, "creation_date": 1515474903, "answer_id": 48161804, "question_id": 48161690, "link": "https://stackoverflow.com/questions/48161690/change-url-on-canvas-lms-ruby/48161804#48161804", "title": "Change URL On Canvas LMS (Ruby)", "body": "<p>Change it in your <strong>config/routes.rb</strong> file\nIf you post the contents of the file, it will be easier to say.</p>\n"}], "owner": {"reputation": 43, "user_id": 8957268, "user_type": "registered", "profile_image": "https://graph.facebook.com/1810256738984481/picture?type=large", "display_name": "Anup Kumar Mondal", "link": "https://stackoverflow.com/users/8957268/anup-kumar-mondal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1515474903, "creation_date": 1515474102, "question_id": 48161690, "link": "https://stackoverflow.com/questions/48161690/change-url-on-canvas-lms-ruby", "title": "Change URL On Canvas LMS (Ruby)", "body": "<p>want to change url </p>\n\n<p>From This -\n<a href=\"https://localhost/login/canvas\" rel=\"nofollow noreferrer\">https://localhost/login/canvas</a></p>\n\n<p>To -\n<a href=\"https://localhost/login/Something\" rel=\"nofollow noreferrer\">https://localhost/login/Something</a></p>\n\n<p>Please tell me where or how i can change the URL, what file would i have to change?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "sublimetext3", "file-search"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1515473667, "post_id": 48161622, "comment_id": 83302590, "body": "You could script the <code>subl</code> command-line shortcut, possibly."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1515473985, "post_id": 48161622, "comment_id": 83302690, "body": "Ruby seems unrelated here... it&#39;s more about sublime."}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 2, "creation_date": 1515479396, "post_id": 48161622, "comment_id": 83304287, "body": "<code>Cmd+O</code> is <code>File &gt; Open</code>, which is a native OS open file dialog. If you meant <code>Cmd+P</code> (<code>Goto &gt; Anything</code>), the best you can do is just not enter the <code>::</code> at all. Generally speaking though if you&#39;re putting whole filenames into the Goto Anything panel you&#39;re not using it to it&#39;s full capabilities."}, {"owner": {"reputation": 9277, "user_id": 465915, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3a8fc598ccc6dc3c646717b0f76af23c?s=128&d=identicon&r=PG", "display_name": "ecoologic", "link": "https://stackoverflow.com/users/465915/ecoologic"}, "edited": false, "score": 0, "creation_date": 1515480362, "post_id": 48161622, "comment_id": 83304618, "body": "OH! Thank you, it was <code>cmd+T</code> - updated (:"}], "owner": {"reputation": 9277, "user_id": 465915, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3a8fc598ccc6dc3c646717b0f76af23c?s=128&d=identicon&r=PG", "display_name": "ecoologic", "link": "https://stackoverflow.com/users/465915/ecoologic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1576396788, "creation_date": 1515473517, "last_edit_date": 1576396788, "question_id": 48161622, "link": "https://stackoverflow.com/questions/48161622/sublime-global-file-search-interpret-as", "title": "Sublime global file search: interpret `::` as `/`", "body": "<p>In Ruby, namespaces are separated by <code>::</code> (e.g.: <code>Services::ProductService</code>), and it's good practice to keep the file system structure consistent (e.g. above: <code>services/product_service.rb</code>.</p>\n\n<p>When looking up a class file using <code>cmd+T</code>, it would be very handy if <code>::</code> were excluded by the search, or even better, considered like folder delimiters <code>/</code>, so that pasting <code>Services::ProductService</code> in the search could match <code>services/product_service.rb</code>.</p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1515478740, "post_id": 48161418, "comment_id": 83304094, "body": "You could do this without: <code>File.basename &quot;&#47;currencies&#47;avoncoin&#47;&quot;</code>. This would suggest that the string contains some kind of &quot;path&quot;, similar to the pathes in a directory structure."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515483421, "post_id": 48161418, "comment_id": 83305820, "body": "That&#39;s not a string, but an array containing a string. However, where does that string come from? Is it a filename, an URL path or something else? And how do you determine the substring&#39;s location?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515473409, "post_id": 48161440, "comment_id": 83302527, "body": "You can also do this with a one-shot regular expression if you use capturing brackets and <code>\\1</code> in the substitution."}], "tags": [], "owner": {"reputation": 2840, "user_id": 6400294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KtX2z.jpg?s=128&g=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6400294/shannon"}, "is_accepted": true, "score": 1, "last_activity_date": 1515472079, "creation_date": 1515472079, "answer_id": 48161440, "question_id": 48161418, "link": "https://stackoverflow.com/questions/48161418/ruby-extracting-a-substring-from-a-string/48161440#48161440", "title": "Ruby - extracting a substring from a string", "body": "<p>You can use <code>gsub</code>:</p>\n\n<pre><code>arr = [\"/currencies/avoncoin/\"]\narr = arr.map{ |s| s.gsub(\"/currencies/\", \"\").gsub(\"/\",\"\") }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "is_accepted": false, "score": 1, "last_activity_date": 1515473298, "creation_date": 1515473298, "answer_id": 48161596, "question_id": 48161418, "link": "https://stackoverflow.com/questions/48161418/ruby-extracting-a-substring-from-a-string/48161596#48161596", "title": "Ruby - extracting a substring from a string", "body": "<p>Besides the one suggested by Shannon, you can also use the following approach.</p>\n\n<pre><code>arr = [\"/currencies/avoncoin/\"]\narr = arr.map{ |s| s.split(\"/\").last }\n</code></pre>\n\n<p>This performs fewer operations and is shorter.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1515483790, "post_id": 48161608, "comment_id": 83305972, "body": "Instead of <code>scan</code>, you could also use <code>map</code> and <code>e[%r[\\A&#47;currencies&#47;([^&#47;]+)&#47;], 1]</code>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1515473373, "creation_date": 1515473373, "answer_id": 48161608, "question_id": 48161418, "link": "https://stackoverflow.com/questions/48161418/ruby-extracting-a-substring-from-a-string/48161608#48161608", "title": "Ruby - extracting a substring from a string", "body": "<p>You can use something like <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><code>scan</code></a> or its shorthand equivalent:</p>\n\n<pre><code>data.flat_map do |e|\n  e.scan(%r[\\A/currencies/([^/]+)/])[0]\nend.compact\n</code></pre>\n\n<p>Here the <code>%r[...]</code> notation for regular expressions is used since your string contains <code>/</code> which is has significant meaning in the <code>/.../</code> default form. <code>flat_map</code> helps extract the matches, and <code>compact</code> strips out misses.</p>\n\n<p>Operating on data like:</p>\n\n<pre><code>data = [\"/currencies/avoncoin/\", \"/currencies/xcoin/\", \"/false/positive/\"]\n</code></pre>\n\n<p>You'll get:</p>\n\n<pre><code>[\"avoncoin\", \"xcoin\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 535, "user_id": 3134957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qutnS.jpg?s=128&g=1", "display_name": "Anurag Aryan", "link": "https://stackoverflow.com/users/3134957/anurag-aryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1515473877, "creation_date": 1515473877, "answer_id": 48161665, "question_id": 48161418, "link": "https://stackoverflow.com/questions/48161418/ruby-extracting-a-substring-from-a-string/48161665#48161665", "title": "Ruby - extracting a substring from a string", "body": "<p>If the match should be independent of the key, you can try</p>\n\n<pre><code>arr = [\"/currencies/avoncoin/\", \"/currencies/xcoin/\", \"/something/else/\"]    \nre = /^\\/[^\\/]+\\/([^\\/]+)\\//\n\narr.map{ |str| re.match(str)[1] }\n</code></pre>\n\n<p>Or if using regex is not compulsory, you can do</p>\n\n<pre><code>arr.map{ |str| str.split('/').dig(2) }\n</code></pre>\n\n<p>which is more readable and rubyist.</p>\n\n<p>The output for both will be <code>['avoncoin', 'xcoin', 'else']</code></p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1515474347, "creation_date": 1515474347, "answer_id": 48161729, "question_id": 48161418, "link": "https://stackoverflow.com/questions/48161418/ruby-extracting-a-substring-from-a-string/48161729#48161729", "title": "Ruby - extracting a substring from a string", "body": "<p>Given:</p>\n\n<pre><code>&gt; s\n=&gt; \"/currencies/avoncoin/\"\n</code></pre>\n\n<p>You can do a regex slice in ruby:</p>\n\n<pre><code>&gt; s[/([^\\/]+)\\/$/,1]\n=&gt; \"avoncoin\"\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 6942847, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lntXq.jpg?s=128&g=1", "display_name": "mxvx", "link": "https://stackoverflow.com/users/6942847/mxvx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1606, "favorite_count": 0, "accepted_answer_id": 48161440, "answer_count": 5, "score": -3, "last_activity_date": 1515523651, "creation_date": 1515471852, "last_edit_date": 1515523651, "question_id": 48161418, "link": "https://stackoverflow.com/questions/48161418/ruby-extracting-a-substring-from-a-string", "title": "Ruby - extracting a substring from a string", "body": "<p>I have an array of strings in the form </p>\n\n<pre><code>[\"/currencies/avoncoin/\"] \n</code></pre>\n\n<p>and i need to just get the name out (in this case, the string would be                 </p>\n\n<pre><code>avoncoin\n</code></pre>\n\n<p>How would I form a regular expression to do this with Ruby?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 174, "user_id": 8211949, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5973d3bcc3861af6f9b9fd17b4cebaf3?s=128&d=identicon&r=PG&f=1", "display_name": "kuwantum", "link": "https://stackoverflow.com/users/8211949/kuwantum"}, "edited": false, "score": 0, "creation_date": 1515479166, "post_id": 48161303, "comment_id": 83304216, "body": "&#39;/mypage/baloon&#39; &lt;- is that the right url? Balloon is spelled differently. But then it doesn&#39;t explain why the manual trigger works :-/"}, {"owner": {"reputation": 64, "user_id": 8970404, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065078676873698/picture?type=large", "display_name": "hoang.vx", "link": "https://stackoverflow.com/users/8970404/hoang-vx"}, "reply_to_user": {"reputation": 174, "user_id": 8211949, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5973d3bcc3861af6f9b9fd17b4cebaf3?s=128&d=identicon&r=PG&f=1", "display_name": "kuwantum", "link": "https://stackoverflow.com/users/8211949/kuwantum"}, "edited": false, "score": 0, "creation_date": 1515483151, "post_id": 48161303, "comment_id": 83305702, "body": "@kuwantum thanks for announced me. my typing error. sorry just fixed my question"}, {"owner": {"reputation": 174, "user_id": 8211949, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5973d3bcc3861af6f9b9fd17b4cebaf3?s=128&d=identicon&r=PG&f=1", "display_name": "kuwantum", "link": "https://stackoverflow.com/users/8211949/kuwantum"}, "edited": false, "score": 0, "creation_date": 1515483347, "post_id": 48161303, "comment_id": 83305788, "body": "Ah, so I didn&#39;t get lucky and find the answer then haha! Have you checked the test can find #my_balloon on the page?"}, {"owner": {"reputation": 64, "user_id": 8970404, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065078676873698/picture?type=large", "display_name": "hoang.vx", "link": "https://stackoverflow.com/users/8970404/hoang-vx"}, "reply_to_user": {"reputation": 174, "user_id": 8211949, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5973d3bcc3861af6f9b9fd17b4cebaf3?s=128&d=identicon&r=PG&f=1", "display_name": "kuwantum", "link": "https://stackoverflow.com/users/8211949/kuwantum"}, "edited": false, "score": 0, "creation_date": 1515483748, "post_id": 48161303, "comment_id": 83305963, "body": "@kuwantum yup, did it. but, do not work. i search a lot on the internet but do not get the answer."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515499392, "post_id": 48161303, "comment_id": 83314638, "body": "@hoang.vx What do you mean by &quot;trigger click manually&quot;? Are you saying if you run <code>find(&quot;#my_balloon&quot;).click</code> in the console, it works? If yes, then does adding a <code>sleep</code> above that line also make the test pass? Or alternatively, are you saying that you&#39;re <i>clicking the button manually with the mouse</i>?"}, {"owner": {"reputation": 64, "user_id": 8970404, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065078676873698/picture?type=large", "display_name": "hoang.vx", "link": "https://stackoverflow.com/users/8970404/hoang-vx"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515543961, "post_id": 48161303, "comment_id": 83337307, "body": "@TomLord yeah i mean to do it in the console and it work. i am try to using the wait_util too but it go to timeout!"}, {"owner": {"reputation": 64, "user_id": 8970404, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065078676873698/picture?type=large", "display_name": "hoang.vx", "link": "https://stackoverflow.com/users/8970404/hoang-vx"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515549053, "post_id": 48161303, "comment_id": 83338501, "body": "@TomLord Thanks, just try to sleep before click the button and it work like a champ."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515578768, "post_id": 48161303, "comment_id": 83349461, "body": "@hoang.vx OK, that&#39;s a great start! Now, using <code>sleep</code> is of course a &quot;poor man&#39;s fix&quot;. Since we now know the issue is that <i>something</i> isn&#39;t initialized fully when the code gets run, ideally you want to figure out <i>what&#39;s</i> not initialized and then <i>explicitly wait for it</i> (rather than just <code>sleep</code>ing an arbitrary period)."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515578817, "post_id": 48161303, "comment_id": 83349484, "body": "...But of course, this may end up being more trouble than it&#39;s worth. If you can live with a <code>sleep</code>, and life is too short to improve the test, then just leave it as that. It&#39;s your call."}, {"owner": {"reputation": 64, "user_id": 8970404, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065078676873698/picture?type=large", "display_name": "hoang.vx", "link": "https://stackoverflow.com/users/8970404/hoang-vx"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515581146, "post_id": 48161303, "comment_id": 83350991, "body": "@TomLord thanks a lots."}], "owner": {"reputation": 64, "user_id": 8970404, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065078676873698/picture?type=large", "display_name": "hoang.vx", "link": "https://stackoverflow.com/users/8970404/hoang-vx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1515483181, "creation_date": 1515470903, "last_edit_date": 1515483181, "question_id": 48161303, "link": "https://stackoverflow.com/questions/48161303/rspec-javascript-event-test-do-not-match", "title": "RSpec, JavaScript event test do not match", "body": "<p>I am working on a rails project and i have a test like below</p>\n\n<p>slim file</p>\n\n<pre><code>a href=\"#\" title=\"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u30eb\u30fc\u30eb\u8aac\u660e\" id=\"my_balloon\"\n</code></pre>\n\n<p>js file</p>\n\n<pre><code>$(function() {\n  var shown = false;\n  $('#my_balloon')\n    .showBalloon()\n    .hideBalloon() //\u4e00\u65e6\u975e\u8868\u793a\n    .on(\"click\", function(){\n       shown ? $(this).hideBalloon() : $(this).showBalloon();\n       shown = !shown;\n    }).showBalloon({\n      contents: \"\u6b21\u306e\u6587\u5b57\u306f\u539f\u5247\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002/ ! \u201c@ # $ % &amp; \u2018 ( ) = ~ | \\ ^ : ; * + ? &lt; &gt; , ` [ ] { }&lt;br&gt;\uff20\u306e\u76f4\u524d\u306b\u306f\u82f1\u6570\u5b57\u306e\u307f\u3068\u306a\u308a\u307e\u3059\u3002&lt;br&gt;.\uff08\u30c9\u30c3\u30c8\uff09\u306f2\u3064\u4ee5\u4e0a\u9023\u7d9a\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002\",\n      html: true,\n      classname: \"balloon\",\n      position: \"right\",\n      tipSize: 10,\n      showDuration: 0,\n      css: {\n      opacity: \"1\",\n      color: \"#000\",\n      backgroundColor: \"#F8F8FF\",\n      fontSize: \"8px\",\n      borderRadius: \"10px\",\n      border: \"solid 1px #222\"\n    }\n  });\n});\n</code></pre>\n\n<p>rspec file</p>\n\n<pre><code>RSpec.describe 'Balloon', type: :feature, js: true do\n  before do\n    WebMock.disable_net_connect!(:allow_localhost =&gt; true)\n  end\n\n  ...\n\n  scenario \"balloon\", focus: true do\n    visit '/mypage/balloon'\n\n    find(\"#my_balloon\").click\n\n    # if balloon worked, below div will display with class balloon\n    expect(page).to have_selector(:css, \"div.balloon\")\n  end\nend\n</code></pre>\n\n<p>But i can not make it work on test. in debug mode it work normally</p>\n\n<blockquote>\n  <p>If i stop <code>byebug</code> at line <code>find(\"#my_balloon\").click</code> and trigger click manually next expect will pass.</p>\n</blockquote>\n\n<p>anyone have idea about this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "comments": [{"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1515469657, "post_id": 48160914, "comment_id": 83301789, "body": "Have you followed this steps properly <a href=\"https://dradisframework.com/ce/documentation/install_kali.html\" rel=\"nofollow noreferrer\">dradisframework.com/ce/documentation/install_kali.html</a>"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1515469887, "post_id": 48160914, "comment_id": 83301837, "body": "Try to follow this <a href=\"https://github.com/dradis/dradis-ce/\" rel=\"nofollow noreferrer\">github.com/dradis/dradis-ce</a>"}, {"owner": {"reputation": 183, "user_id": 1129050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7912a2eed4905a2be7139921e89b2727?s=128&d=identicon&r=PG", "display_name": "Marcelo Alves", "link": "https://stackoverflow.com/users/1129050/marcelo-alves"}, "edited": false, "score": 0, "creation_date": 1515479907, "post_id": 48160914, "comment_id": 83304448, "body": "There&#39;s a space between <code>:</code> and <code>work</code>, might that be it?"}], "owner": {"reputation": 33, "user_id": 9017710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H1qwG30Im_g/AAAAAAAAAAI/AAAAAAAAABY/MbT9QPLZ6lI/photo.jpg?sz=128", "display_name": "notyeat", "link": "https://stackoverflow.com/users/9017710/notyeat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515478016, "creation_date": 1515467168, "last_edit_date": 1515478016, "question_id": 48160914, "link": "https://stackoverflow.com/questions/48160914/bundle-exec-rake-resque-work", "title": "bundle exec rake resque\uff1awork", "body": "<p>I want install dradis in my ubuntu 17.10 server.But,When I runing bundle exec rake resque:work.Command can not be executed.Before I never use ruby\uff0cplease help me.Thanks</p>\n\n<p>And I want update my bundler version,After I runing  <code>gem install bundler</code> \uff0cbut the bundler still == 1.15.1\uff0cvery confused.</p>\n\n<pre><code>root@ubuntu:/opt/dradis-ce/bin# bundle exec rake resque\uff1awork --trace\n(in /opt/dradis-ce)\nrake aborted!\nDon't know how to build task 'resque\uff1awork' (see --tasks)\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/task_manager.rb:59:in `[]'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:159:in `invoke_task'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:116:in `each'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:116:in `block in top_level'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:125:in `run_with_threads'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:110:in `top_level'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:83:in `block in run'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:186:in `standard_exception_handling'\n/opt/dradis-ce/ruby/2.3.0/gems/rake-12.3.0/lib/rake/application.rb:80:in `run'\nrake:4:in `&lt;top (required)&gt;'\n/usr/lib/ruby/vendor_ruby/bundler/cli/exec.rb:74:in `load'\n/usr/lib/ruby/vendor_ruby/bundler/cli/exec.rb:74:in `kernel_load'\n/usr/lib/ruby/vendor_ruby/bundler/cli/exec.rb:27:in `run'\n/usr/lib/ruby/vendor_ruby/bundler/cli.rb:360:in `exec'\n/usr/lib/ruby/vendor_ruby/thor/command.rb:27:in `run'\n/usr/lib/ruby/vendor_ruby/thor/invocation.rb:126:in `invoke_command'\n/usr/lib/ruby/vendor_ruby/thor.rb:369:in `dispatch'\n/usr/lib/ruby/vendor_ruby/bundler/cli.rb:20:in `dispatch'\n/usr/lib/ruby/vendor_ruby/thor/base.rb:444:in `start'\n/usr/lib/ruby/vendor_ruby/bundler/cli.rb:10:in `start'\n/var/lib/gems/2.3.0/gems/bundler-1.16.1/exe/bundle:30:in `block in &lt;top (required)&gt;'\n/usr/lib/ruby/vendor_ruby/bundler/friendly_errors.rb:121:in `with_friendly_errors'\n/var/lib/gems/2.3.0/gems/bundler-1.16.1/exe/bundle:22:in `&lt;top (required)&gt;'\n/usr/local/bin/bundle:22:in `load'\n/usr/local/bin/bundle:22:in `&lt;main&gt;'\nThe latest bundler is 1.16.1, but you are currently running 1.15.1.\nTo update, run `gem install bundler`\nroot@ubuntu:/opt/dradis-ce/bin# \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1515559795, "post_id": 48160160, "comment_id": 83340880, "body": "I find it curious that none of the five members who put this question on hold claims on their profile to have any experience with Ruby. I thought the question was clear and my understanding seems to have been ratified by the asker. I voted to reopen."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8990745"}, "edited": false, "score": 0, "creation_date": 1515467922, "post_id": 48160838, "comment_id": 83301488, "body": "I get such error,` merg.rb:2:in <code>map&#39;: wrong number of arguments (given 1, expected 0) (ArgumentError) \tfrom merg.rb:2:in </code>&lt;main&gt;&#39; `"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515474404, "post_id": 48160838, "comment_id": 83302819, "body": "You can also use <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>Array#to_h</code></a> instead of <code>Hash[]</code>."}, {"owner": {"reputation": 11, "user_id": 3000207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d54af861defbeba3aeca91556d1475f?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Smith", "link": "https://stackoverflow.com/users/3000207/benjamin-smith"}, "edited": false, "score": 0, "creation_date": 1515501419, "post_id": 48160838, "comment_id": 83315828, "body": "Ah, there was I typo that I thought I&#39;d already fixed before posting it."}], "tags": [], "owner": {"reputation": 11, "user_id": 3000207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d54af861defbeba3aeca91556d1475f?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Smith", "link": "https://stackoverflow.com/users/3000207/benjamin-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1515501372, "last_edit_date": 1515501372, "creation_date": 1515466451, "answer_id": 48160838, "question_id": 48160160, "link": "https://stackoverflow.com/questions/48160160/how-can-i-merge-two-txt-files-based-on-a-column-name-and-string-similarity/48160838#48160838", "title": "how can I merge two txt files based on a column name and string similarity", "body": "<p>Caveats: This assumes that entries in the from column are unique. If the files are very large, more efficient solutions probably exist.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Read in data1, convert it to an array, strip trailing newlines/whitespace and drop the header row.\ndata1 = File.new('/path/to/data1').read.lines.map(&amp;:chomp)[1..-1]\n\n# Read in data2 with the same conversions as data1 and split on whitespace.\ndata2_pairs = File.new('/path/to/data2').read.lines.map { |str| str.chomp.split(/\\s+/) }[1..-1]\n\ndata2 = Hash[data2_pairs]\n\n# Iterate through data1 and build up an array representing the new data2.\n# For each data1 line, check if it exists in the data2 hash, if so use that\n# value for the new line, else use '-'\nnew_data2 = data1.reduce([]) do |new_data2, d1_entry|\n  value = data2.fetch(d1_entry, '-')\n\n  new_data2 &lt;&lt; \"#{d1_entry}  #{value}\\n\"\nend\n\n# add the header back\nnew_data2.unshift(\"From       To\\n\")\n\nFile.new('/path/to/data2', 'w').write(new_data2)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8990745"}, "edited": false, "score": 0, "creation_date": 1515472970, "post_id": 48161367, "comment_id": 83302427, "body": "thanks for your message. so I should have the two data set on my desktop and then invoke them somehow ? because I still do not get how to use your steps"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8990745"}, "edited": false, "score": 0, "creation_date": 1515473360, "post_id": 48161367, "comment_id": 83302515, "body": "basically the first part of your code is just to paste the data in whenever you are . then we I execute this part <code>h2 = File.readlines(FName2).drop(1).map(&amp;:split).to_h arr = File.readlines(FName1).drop(1).map do |line|     line.chomp!           &quot;%s  %s\\n&quot; % [line, h2.fetch(line, &#39;-&#39;)] end puts File.write(FName3, &quot;from    to\\n&quot; &lt;&lt; arr.join)</code> it gives me an error like <code>merg3.rb:1:in </code>&lt;main&gt;&#39;: uninitialized constant FName2 (NameError)`"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8990745"}, "edited": false, "score": 0, "creation_date": 1515473697, "post_id": 48161367, "comment_id": 83302599, "body": "can you please tell me how to use your code when I have the two data.txt in a folder ? I am using terminal and Mac"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1515474639, "post_id": 48161367, "comment_id": 83302872, "body": "The error suggests that you did not execute the line <code>FName2 = &#39;temp2&#39;</code> in my code. If the files are not in the current directory you need to change to the constants <code>FName1</code>, <code>FName2</code> and  <code>FName3</code> accordingly. For example, <code>FName1 = .&#47;dir1&#47;dir2&#47;temp1</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1515478119, "post_id": 48161367, "comment_id": 83303930, "body": "In constructing the hash <code>h2</code> from the contents of your second file, each line is separated into two parts, <code>k</code> and <code>v1</code>, to form a key-value pair in <code>h2</code> such that <code>h2[k] #=&gt; v1</code>. If a second line gives rise to the key-value pair <code>k</code> and <code>v2</code> (the same key <code>k</code>), setting <code>h2[k] = v2</code> will overwrite <code>v1</code> with <code>v2</code>. If the lines are identical, <code>v2 = v1</code>, so the second line will not change the hash. The upshot is that duplicate lines in the second file may not be a problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8990745"}, "edited": false, "score": 0, "creation_date": 1515510506, "post_id": 48161367, "comment_id": 83321608, "body": "I know what you mean but I dont want to discard them, I want to take their <code>to</code> and merge it with the other one by a ; . Please look above if I demonstrated it ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1515512918, "post_id": 48161367, "comment_id": 83323215, "body": "Latter today I&#39;ll show you one way to handle that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1515557952, "post_id": 48161367, "comment_id": 83340460, "body": "I updated my answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1515557925, "last_edit_date": 1515557925, "creation_date": 1515471489, "answer_id": 48161367, "question_id": 48160160, "link": "https://stackoverflow.com/questions/48160160/how-can-i-merge-two-txt-files-based-on-a-column-name-and-string-similarity/48161367#48161367", "title": "how can I merge two txt files based on a column name and string similarity", "body": "<p>Let's first construct the two files.</p>\n\n<pre><code>data1 = &lt;&lt;_\nfrom\nA0A0A6YXQ7\nA0A0A6YXS5\nA0A0A6YXW8\nA0A0A6YXX6\nA0A0A6YXZ1\nA0A0A6YY28\nA0A0A6YY43\nA0A0A6YY47\nA0A0A6YY78\nA0A0A6YY89\nA0A0A6YY91\nA0A0A7NQN9\n_\n\ndata2 =&lt;&lt;_\nfrom    to\nA0A0A6YXQ7  Myo1f\nA0A0A6YXW8  Pak2\nA0A0A6YXX6  Arhgap15\nA0A0A6YXZ1  Igtp\nA0A0A6YY28  pol\nA0A0A6YY47  MumuTL\nA0A0A6YY78  MumuTL\nA0A0A6YY91  MumuTL\nA0A0A6YY78  MumuTLm\nA0A0A6YY91  MumuTLm\nA0A0A6YY78  MumuTLx\n_\n</code></pre>\n\n<p></p>\n\n<pre><code>FName1 = 'temp1'\nFName2 = 'temp2'\n\nFile.write(FName1, data1)\n  #=&gt; 137\nFile.write(FName2, data2)\n  #=&gt; 217\n</code></pre>\n\n<p>We can then write the desired result to a third file as follows.</p>\n\n<pre><code>FName3 = 'temp3'\n</code></pre>\n\n<p>Begin by reading <code>FName2</code> and constructing a hash.</p>\n\n<pre><code>h2 = File.readlines(FName2).\n          drop(1).\n          uniq.\n          each_with_object({}) do |s,h|\n            h.update([s.split].to_h) { |k,o,n| \"#{o};#{n}\" }\n          end\n  #=&gt; {\"A0A0A6YXQ7\"=&gt;\"Myo1f\", \"A0A0A6YXW8\"=&gt;\"Pak2\", \"A0A0A6YXX6\"=&gt;\"Arhgap15\",\n  #    \"A0A0A6YXZ1\"=&gt;\"Igtp\", \"A0A0A6YY28\"=&gt;\"pol\", \"A0A0A6YY47\"=&gt;\"MumuTL\",\n  #    \"A0A0A6YY78\"=&gt;\"MumuTL;MumuTLm;MumuTLx\", \"A0A0A6YY91\"=&gt;\"MumuTL;MumuTLm\"}\n</code></pre>\n\n<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-update\" rel=\"nofollow noreferrer\">Hash#update</a> (aka <code>merge!</code>) that uses a block (<code>{ |k,o,n| \"#{o};#{n}\" }</code>) to determine the values of keys that are present in both hashes being merged. See the doc for the definitions of the three block variables, <code>k</code> (the common key), <code>o</code> (\"old\") and <code>n</code> (\"new\").<sup>1</sup></p>\n\n<p>Now read <code>FName1</code> and map each line other than the first to the desired string, using the method <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-fetch\" rel=\"nofollow noreferrer\">Hash#fetch</a> with <code>\"-\"</code> as the default value (meaning that if <code>h2</code> does not have a key <code>k</code> <code>h2.fetch(k, '-')</code> returns <code>'-'</code>).</p>\n\n<pre><code>arr = File.readlines(FName1).drop(1).map do |line|\n    line.chomp!      \n    \"%s  %s\\n\" % [line, h2.fetch(line, '-')]\nend\n  #=&gt; [\"A0A0A6YXQ7  Myo1f\\n\", \"A0A0A6YXS5  -\\n\", \"A0A0A6YXW8  Pak2\\n\",\n  #    \"A0A0A6YXX6  Arhgap15\\n\", \"A0A0A6YXZ1  Igtp\\n\", \"A0A0A6YY28  pol\\n\",\n  #    \"A0A0A6YY43  -\\n\", \"A0A0A6YY47  MumuTL\\n\", \"A0A0A6YY78  MumuTL;MumuTLm;MumuTLx\\n\",\n  #    \"A0A0A6YY89  -\\n\", \"A0A0A6YY91  MumuTL;MumuTLm\\n\", \"A0A0A7NQN9  -\\n\"]\n</code></pre>\n\n<p>Lastly, we write the desired string to <code>FName3</code>.</p>\n\n<pre><code>FName3 = \"out\" \nFile.write(FName3, \"from    to\\n\" &lt;&lt; arr.join)\n  #=&gt; 237 \n</code></pre>\n\n<p>Let's confirm that.</p>\n\n<pre><code>puts File.read(FName3)\nfrom    to\nA0A0A6YXQ7  Myo1f\nA0A0A6YXS5  -\nA0A0A6YXW8  Pak2\nA0A0A6YXX6  Arhgap15\nA0A0A6YXZ1  Igtp\nA0A0A6YY28  pol\nA0A0A6YY43  -\nA0A0A6YY47  MumuTL\nA0A0A6YY78  MumuTL;MumuTLm;MumuTLx\nA0A0A6YY89  -\nA0A0A6YY91  MumuTL;MumuTLm\nA0A0A7NQN9  -\n</code></pre>\n\n<p><sup>1 When a block variable is not used in the block calculation (here the common key), it is customary to replace it with the local variable <code>'_'</code> or with a local variable that begins with <code>'_'</code>). We therefore might write this block <code>{ |_,o,n| \"#{o};#{n}\" }</code> or  <code>{ |_k,o,n| \"#{o};#{n}\" }</code></sup>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8990745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1515484134, "accepted_answer_id": 48161367, "answer_count": 2, "score": 1, "last_activity_date": 1515557925, "creation_date": 1515459966, "last_edit_date": 1515510445, "question_id": 48160160, "link": "https://stackoverflow.com/questions/48160160/how-can-i-merge-two-txt-files-based-on-a-column-name-and-string-similarity", "closed_reason": "Needs details or clarity", "title": "how can I merge two txt files based on a column name and string similarity", "body": "<p>I have two data saved at .txt in a folder  </p>\n\n<p>data1 which is called data 1 includes of one column data as follows </p>\n\n<pre><code>from\nA0A0A6YXQ7\nA0A0A6YXS5\nA0A0A6YXW8\nA0A0A6YXX6\nA0A0A6YXZ1\nA0A0A6YY28\nA0A0A6YY43\nA0A0A6YY47\nA0A0A6YY78\nA0A0A6YY89\nA0A0A6YY91\nA0A0A7NQN9\n</code></pre>\n\n<p>and the second data has two columns <code>from</code>and <code>to</code></p>\n\n<pre><code>from    to\nA0A0A6YXQ7  Myo1f\nA0A0A6YXW8  Pak2\nA0A0A6YXX6  Arhgap15\nA0A0A6YXZ1  Igtp\nA0A0A6YY28  pol\nA0A0A6YY47  MumuTL\nA0A0A6YY78  MumuTL\nA0A0A6YY91  MumuTL\n</code></pre>\n\n<p>data1 and data2 have a column named <code>from</code> \nall strings in data1 should be in data2. if they are not.</p>\n\n<p>I want to load the two data, and if the any string does not exist in the data2, I want to put it there as data1</p>\n\n<p>for example, in data2 the following strings are missing </p>\n\n<p>A0A0A6YXS5 and A0A0A6YY43 and A0A0A6YY89 and A0A0A7NQN9 </p>\n\n<p>so the output will look like this </p>\n\n<pre><code>From       To\nA0A0A6YXQ7  Myo1f\nA0A0A6YXS5  -\nA0A0A6YXW8  Pak2\nA0A0A6YXX6  Arhgap15\nA0A0A6YXZ1  Igtp\nA0A0A6YY28  pol\nA0A0A6YY43  -\nA0A0A6YY47  MumuTL\nA0A0A6YY78  MumuTL\nA0A0A6YY89  -\nA0A0A6YY91  MumuTL\nA0A0A7NQN9  -\n</code></pre>\n\n<p>If the data2 is like below </p>\n\n<pre><code>from    to\nA0A0A6YXQ7  Myo1f\nA0A0A6YXW8  Pak2\nA0A0A6YXX6  Arhgap15\nA0A0A6YXZ1  Igtp\nA0A0A6YY28  pol\nA0A0A6YY47  MumuTL\nA0A0A6YY78  MumuTL\nA0A0A6YY91  MumuTL\nA0A0A6YY78  MumuTLm\nA0A0A6YY91  MumuTLm\n</code></pre>\n\n<p>which means we have A0A0A6YY78 and A0A0A6YY91 to be replicate but their <code>to</code>is different </p>\n\n<p>so the answer I want is to be this </p>\n\n<pre><code>From       To\n    A0A0A6YXQ7  Myo1f\n    A0A0A6YXS5  -\n    A0A0A6YXW8  Pak2\n    A0A0A6YXX6  Arhgap15\n    A0A0A6YXZ1  Igtp\n    A0A0A6YY28  pol\n    A0A0A6YY43  -\n    A0A0A6YY47  MumuTL\n    A0A0A6YY78  MumuTL;MumuTLm\n    A0A0A6YY89  -\n    A0A0A6YY91  MumuTL;MumuTLm\n    A0A0A7NQN9  -\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 717, "user_id": 8033983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TiXi8.png?s=128&g=1", "display_name": "xSkrappy", "link": "https://stackoverflow.com/users/8033983/xskrappy"}, "edited": false, "score": 0, "creation_date": 1515457656, "post_id": 48159897, "comment_id": 83299372, "body": "I think this would help you : <a href=\"https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation\" title=\"a comprehensive regex for phone number validation\">stackoverflow.com/questions/123559/&hellip;</a>  for online regex testing I would suggest this: <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a>"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1515457988, "post_id": 48159897, "comment_id": 83299443, "body": "Is the substring <code>: +</code> always before your number? Does it end with a end of line? More precisions about the phone number format? Use the context as much as possible."}, {"owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "reply_to_user": {"reputation": 717, "user_id": 8033983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TiXi8.png?s=128&g=1", "display_name": "xSkrappy", "link": "https://stackoverflow.com/users/8033983/xskrappy"}, "edited": false, "score": 0, "creation_date": 1515458322, "post_id": 48159897, "comment_id": 83299518, "body": "@xSkrappy Unfortunately, the other stack overflow link wasn&#39;t much help considering all the other numbers surrounding.  @Casimir et Hippolyte In another example, the number doesn&#39;t come with the + beforehand. I don&#39;t really want to select the <code>+</code> anyway, but if they all came with the <code>+</code> it would be as simple as selecting the numbers with the plus and stripping it. :(  I have just added another example with a different number"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1515458536, "post_id": 48159897, "comment_id": 83299556, "body": "Is there always a country name at the start of the line and after eventual other characters a colon and a space before the number (with or without a <code>+</code>)? One more time, does the number ends the line?"}, {"owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "edited": false, "score": 0, "creation_date": 1515458985, "post_id": 48159897, "comment_id": 83299639, "body": "Yes and yes. I&#39;m unsure of how the country is typed beforehand though. Sometimes it might have <code>(Toll Free)</code> beforehand, sometimes not."}], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "edited": false, "score": 1, "creation_date": 1515459696, "post_id": 48160067, "comment_id": 83299766, "body": "Be careful, in this case try to add eventual horizontal spaces <code>\\h*</code> before <code>$</code> to be sure that the line isn&#39;t something else. Also test the pattern on <a href=\"http://rubular.com\" rel=\"nofollow noreferrer\">rubular.com</a> (that is designed for ruby), not with regex101 or other."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 1, "last_activity_date": 1515458978, "creation_date": 1515458978, "answer_id": 48160067, "question_id": 48159897, "link": "https://stackoverflow.com/questions/48159897/regex-select-phone-number-surrounded-by-other-numbers/48160067#48160067", "title": "Regex: Select phone number surrounded by other numbers", "body": "<p>Without all informations, I suggest this pattern:</p>\n\n<pre><code>: \\+?\\K\\d+(?: \\d+)*$\n</code></pre>\n\n<p>Perhaps it is better to add an exhaustive list of countries in an alternation anchored to the start of the line before. It depends of your requirements. Something like this:</p>\n\n<pre><code>^(?:Argentine|France|Singapoure)\\b[^\\n\\r:]*: \\+?\\K\\d+(?: \\d+)*$\n</code></pre>\n\n<p>(all on the left of <code>\\K</code> isn't in the whole match result).</p>\n"}], "owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 48160067, "answer_count": 1, "score": 0, "last_activity_date": 1515458978, "creation_date": 1515457458, "last_edit_date": 1515458402, "question_id": 48159897, "link": "https://stackoverflow.com/questions/48159897/regex-select-phone-number-surrounded-by-other-numbers", "title": "Regex: Select phone number surrounded by other numbers", "body": "<p>I'm trying to select with regex the (fake) phone number in the code below. Sometimes, the phone number has spaces and sometimes it doesn't. Obviously, I want to avoid selecting the other numbers, and I would also like to avoid the <code>+</code> symbol. </p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<h3>Example 1:</h3>\n\n<pre><code>Test Meeting \nMon, Jan 8, 2018 5:00 PM - 5:30 PM AEDT \n\nPlease join my meeting from your computer, tablet or smartphone. \nhttps://example.com/join/132124483\n\nYou can also dial in using your phone. \nAustralia: +61 2 3017 3203\n\nAccess Code: 132-124-483 \n\nFirst meeting? Let's do a quick system check: https://link.example.com/system-check \n</code></pre>\n\n<h3>Example 2:</h3>\n\n<pre><code>Conference link and details to come. \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nPlease join my meeting from your computer, tablet or smartphone.\nhttps://example.com/join/829203911\n\nYou can also dial in using your phone.\nSingapore (Toll Free): 18007932321\n\nAccess Code: 829-203-911\n\nFirst GoToMeeting? Try a test session: https://care.example.com/g2m/getready\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre>\n"}]