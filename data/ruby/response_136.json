[{"tags": ["ruby", "imagemagick", "rmagick"], "comments": [{"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1502930240, "post_id": 45724409, "comment_id": 78407507, "body": "Does the image really exist?"}, {"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1502930616, "post_id": 45724409, "comment_id": 78407588, "body": "Use the full path to the image and see if that works. Nominally the image should be in the directory from which you issue the command (your working directory) if you do not want to provide the full path"}, {"owner": {"reputation": 7, "user_id": 6395867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209631730975427/picture?type=large", "display_name": "Alex Petersen", "link": "https://stackoverflow.com/users/6395867/alex-petersen"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1502940606, "post_id": 45724409, "comment_id": 78409775, "body": "@aristotll the image does really exist, and is in the directory it should be."}], "owner": {"reputation": 7, "user_id": 6395867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209631730975427/picture?type=large", "display_name": "Alex Petersen", "link": "https://stackoverflow.com/users/6395867/alex-petersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502925943, "creation_date": 1502925943, "question_id": 45724409, "link": "https://stackoverflow.com/questions/45724409/rmagick-unable-to-open-image-in-the-documentation-demo", "title": "RMagick unable to open image in the documentation demo", "body": "<p>I could not get RMagick to open any file (I started with a pdf, but moved to png, thinking the problem lied with the pdf). I just tried the <em>RMagick equivalent of \"Hello, world\"</em> </p>\n\n<pre><code>require 'RMagick'\ninclude Magick\ncat = ImageList.new(\"Cheetah.jpg\")\ncat.display \n</code></pre>\n\n<p>and I continue to get 'unable to open image' 'no such file or directory'errors. I double checked to make sure the Cheetah.png file was in the correct spot (ex/images subdirectory where I installed the RMagick documentation) and it is. </p>\n\n<pre><code>Magick::ImageMagickError: unable to open image `Cheetah.jpg': No such file or directory @ error/blob.c/OpenBlob/2701\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/rmagick-2.16.0/lib/rmagick_internal.rb:1616:in `read'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/rmagick-2.16.0/lib/rmagick_internal.rb:1616:in `block in initialize'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/rmagick-2.16.0/lib/rmagick_internal.rb:1615:in `each'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/rmagick-2.16.0/lib/rmagick_internal.rb:1615:in `initialize'\nfrom (irb):11:in `new'\nfrom (irb):11\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/railties-4.2.0/lib/rails/commands/console.rb:110:in `start'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/railties-4.2.0/lib/rails/commands/console.rb:9:in `start'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:68:in `console'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `block in require'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/alexpetersen/Desktop/FormFinder/FormFinderApp/bin/rails:9:in `&lt;top (required)&gt;'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `block in load'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/gems/2.1.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /Users/alexpetersen/.rbenv/versions/2.1.3/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["ruby", "string", "parsing"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1502943989, "post_id": 45724166, "comment_id": 78410572, "body": "Could your string be <code>&quot;ab12 $ab&quot;</code>? If not you should say that the string contains only letters, digits and spaces."}], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1502926013, "last_edit_date": 1502926013, "creation_date": 1502925552, "answer_id": 45724352, "question_id": 45724166, "link": "https://stackoverflow.com/questions/45724166/how-do-i-extract-the-part-of-a-string-whose-individual-words-begin-with-letters/45724352#45724352", "title": "How do I extract the part of a string whose individual words begin with letters?", "body": "<p>If you can spare the extra spaces between words, you could then <code>split</code> the string and iterate the resulting array with <code>take_while</code>, using a regex to get the desired output; something like this:</p>\n\n<pre><code>str = \"abc def 123ffg\"\nstr.split.take_while { |word| word[0] =~ /[[:alpha:]]/ }\n#=&gt; [\"abc\", \"def\"]\n</code></pre>\n\n<p>The output is an array, but if a string is needed, you could use <code>join</code> at the end:</p>\n\n<pre><code>str.split.take_while { |word| word[0] =~ /[[:alpha:]]/ }.join(\" \")\n#=&gt; \"abc def\"\n</code></pre>\n\n<hr>\n\n<p>More examples:</p>\n\n<pre><code>\"aa22 b    cc 33d  ff\".split.take_while { |word| word[0] =~ /[[:alpha:]]/ }\n#=&gt; [\"aa22\", \"b\", \"cc\"]\n\n\"66dd eee ff\".split.take_while { |word| word[0] =~ /[[:alpha:]]/ }\n#=&gt; []\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 304, "user_id": 3189164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5abd125fce74126efeb29a540c7bcaf6?s=128&d=identicon&r=PG&f=1", "display_name": "spuente", "link": "https://stackoverflow.com/users/3189164/spuente"}, "is_accepted": false, "score": 0, "last_activity_date": 1502945571, "last_edit_date": 1502945571, "creation_date": 1502925883, "answer_id": 45724401, "question_id": 45724166, "link": "https://stackoverflow.com/questions/45724166/how-do-i-extract-the-part-of-a-string-whose-individual-words-begin-with-letters/45724401#45724401", "title": "How do I extract the part of a string whose individual words begin with letters?", "body": "<p>The <code>sub</code> method can be used to replace with an empty string <code>''</code> everything that needs to be removed from the expression.</p>\n\n<p>In this case, a first <code>sub</code> method is needed to remove the whole text if it starts with a digit. Then another <code>sub</code> will remove everything starting from any word that starts with a digit.</p>\n\n<p><strong>Answer:</strong></p>\n\n<pre><code>str.sub(/^\\d+.*/, '').sub(/\\s+\\d+.*/, '')\n</code></pre>\n\n<p><strong>Outputs:</strong></p>\n\n<pre><code>str = \"abc def 123ffg\"\n# =&gt; \"abc def\"\n\nstr = \"aa22 b    cc 33d  ff\"\n# =&gt; \"aa22 b    cc\"\n\nstr = \"66dd eee ff\"\n# =&gt; \"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1502927779, "creation_date": 1502927779, "answer_id": 45724658, "question_id": 45724166, "link": "https://stackoverflow.com/questions/45724166/how-do-i-extract-the-part-of-a-string-whose-individual-words-begin-with-letters/45724658#45724658", "title": "How do I extract the part of a string whose individual words begin with letters?", "body": "<h2>The Regular Expression</h2>\n\n<p>There's usually more than one way to match a pattern, although some are simpler than others. A relatively simple regular express that works with your inputs and expected outputs is as follows:</p>\n\n<pre><code>/(?:(?:\\A|\\s*)\\p{L}\\S*)+/\n</code></pre>\n\n<p>This matches one or more strings when all of the following conditions are met:</p>\n\n<ol>\n<li>start-of-string, or zero or more whitespace characters</li>\n<li>followed by a Unicode category of \"letter\"</li>\n<li>followed by zero or more non-whitespace characters</li>\n</ol>\n\n<p>The first item in the list, which is the second non-capturing group, is what allows the match to be repeated until a word starts with a non-letter.</p>\n\n<h2>The Proofs</h2>\n\n<pre><code>regex = /(?:(?:\\A|\\s*)\\p{L}\\S*)+/\n\nregex.match 'aa22 b    cc 33d  ff' #=&gt; #&lt;MatchData \"aa22 b    cc\"&gt;\nregex.match 'abc def 123ffg'       #=&gt; #&lt;MatchData \"abc def\"&gt;\nregex.match '66dd eee ff'          #=&gt; #&lt;MatchData \"\"&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 45724352, "answer_count": 3, "score": 1, "last_activity_date": 1502945571, "creation_date": 1502924195, "question_id": 45724166, "link": "https://stackoverflow.com/questions/45724166/how-do-i-extract-the-part-of-a-string-whose-individual-words-begin-with-letters", "title": "How do I extract the part of a string whose individual words begin with letters?", "body": "<p>I'm using Ruby 2.4.  Let's say I have a string that has a number of spaces in it</p>\n\n<pre><code>str = \"abc def 123ffg\"\n</code></pre>\n\n<p>How do I capture all the consecutive words at the beginning of the string that begin with a letter?  So for example, in the above, I would want to capture</p>\n\n<pre><code>\"abc def\"\n</code></pre>\n\n<p>And if I had a string like</p>\n\n<pre><code>\"aa22 b    cc 33d  ff\"\n</code></pre>\n\n<p>I would want to capture</p>\n\n<pre><code>\"aa22 b    cc\"\n</code></pre>\n\n<p>but if my string were </p>\n\n<pre><code>\"66dd eee ff\"\n</code></pre>\n\n<p>I would want to return nothing because the first word of that string does not begin with a letter.</p>\n"}, {"tags": ["ruby", "sass", "yaml"], "comments": [{"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1502932800, "post_id": 45723959, "comment_id": 78408041, "body": "How do you use the <code>$ranges</code> variable?"}, {"owner": {"reputation": 1606, "user_id": 1293725, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e8a5ba504e7af9140eae699014a5b8e?s=128&d=identicon&r=PG", "display_name": "Neograph734", "link": "https://stackoverflow.com/users/1293725/neograph734"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1502947834, "post_id": 45723959, "comment_id": 78411771, "body": "@aristotll, at the moment I am not using it. Just the assignment already gives an error. Though I assumed that it could replace the <code>$map: ( foo: bar );</code> definition and I could then use map-get to obtain values."}], "answers": [{"comments": [{"owner": {"reputation": 1606, "user_id": 1293725, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e8a5ba504e7af9140eae699014a5b8e?s=128&d=identicon&r=PG", "display_name": "Neograph734", "link": "https://stackoverflow.com/users/1293725/neograph734"}, "edited": false, "score": 0, "creation_date": 1503068948, "post_id": 45732416, "comment_id": 78477524, "body": "Thanks, that somewhat makes sense. I will try this out in a few hours. It seems that the last line is missing a return though?"}, {"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "reply_to_user": {"reputation": 1606, "user_id": 1293725, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e8a5ba504e7af9140eae699014a5b8e?s=128&d=identicon&r=PG", "display_name": "Neograph734", "link": "https://stackoverflow.com/users/1293725/neograph734"}, "edited": false, "score": 0, "creation_date": 1503069157, "post_id": 45732416, "comment_id": 78477649, "body": "@Neograph734 Ruby implicitly returns the value of last evaluated expression in a method."}, {"owner": {"reputation": 1606, "user_id": 1293725, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e8a5ba504e7af9140eae699014a5b8e?s=128&d=identicon&r=PG", "display_name": "Neograph734", "link": "https://stackoverflow.com/users/1293725/neograph734"}, "edited": false, "score": 1, "creation_date": 1503085822, "post_id": 45732416, "comment_id": 78486425, "body": "Awsome, I had to add another case for Fixnum&#39;s (coversion to Sass::Script::Value::Number) and now it is working. Full code is here: <a href=\"https://github.com/Neograph734/sass-yaml/blob/master/lib/sass-yaml.rb\" rel=\"nofollow noreferrer\">github.com/Neograph734/sass-yaml/blob/master/lib/sass-yaml.r&zwnj;&#8203;b</a>"}], "tags": [], "owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "is_accepted": true, "score": 1, "last_activity_date": 1502964989, "creation_date": 1502964989, "answer_id": 45732416, "question_id": 45723959, "link": "https://stackoverflow.com/questions/45723959/parse-yaml-file-content-to-scss-via-ruby/45732416#45732416", "title": "Parse yaml file content to scss via ruby", "body": "<p>All values in the map should be an instance of <code>Sass::Script::Value::Base</code> so that sass can use them.\nBut <code>Sass::Script::Value::Map.new</code> method does not do the conversion for us according to <code>sass</code> source code: <a href=\"https://github.com/sass/sass/blob/be02da0e955a4e172a3ad24d2d479947580849a1/lib/sass/script/value/map.rb#L15\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://github.com/sass/sass/blob/1d9eedac5c42fc40c432f9f3224ea56f630d47ea/lib/sass/script/value/base.rb#L22-L26\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>So  a conversion method is needed.</p>\n\n<pre><code># @param [Hash]  value\n# @return [Sass::Script::Value::Map or Sass::Script::Value::List] \n  def convert_to_base(value) # part of this function is copied from https://github.com/fabiofabbrucci/sass-yaml/blob/master/lib/sass-yaml.rb\n    if value.is_a?(String) \n      return Sass::Script::Value::String.new(value.to_s)\n    elsif value.is_a?(Array)\n      value.each_with_index do |elem, i|\n        value[i]= Sass::Script::Value::String.new(elem.to_s)\n      end\n      return Sass::Script::Value::List.new(value, \",\")\n    end\n    result = Hash.new\n    value.each {|the_key, the_value|\n      result[convert_to_base(the_key)]=convert_to_base(the_value)\n    }\n    Sass::Script::Value::Map.new(result)\n  end\n</code></pre>\n\n<p>Also changes <code>return Sass::Script::Value::Map.new(file_content)</code> to <code>return convert_to_base(file_content)</code></p>\n"}], "owner": {"reputation": 1606, "user_id": 1293725, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e8a5ba504e7af9140eae699014a5b8e?s=128&d=identicon&r=PG", "display_name": "Neograph734", "link": "https://stackoverflow.com/users/1293725/neograph734"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 45732416, "answer_count": 1, "score": 1, "last_activity_date": 1502964989, "creation_date": 1502922640, "question_id": 45723959, "link": "https://stackoverflow.com/questions/45723959/parse-yaml-file-content-to-scss-via-ruby", "title": "Parse yaml file content to scss via ruby", "body": "<p>I am trying to obtain the contents of a yaml (.yml) file in my scss. The aim is to make the contents of the yaml file available as an SCSS map, so the values can be read and iterated over.</p>\n\n<p>So far I have this:</p>\n\n<p>SCSS file:</p>\n\n<pre><code>$ranges: yaml_load('path/to/file');\n</code></pre>\n\n<p>Ruby file (a hacked version of <a href=\"https://github.com/fabiofabbrucci/sass-yaml\" rel=\"nofollow noreferrer\">this gem</a>):</p>\n\n<pre><code>require 'yaml'\n\nmodule Sass::Script::Functions\n  def yaml_load(file_name)\n    # Required because the filename is escaped: \"\\\"path/to/file.yml\\\"\"\n    file_name = file_name.to_s[1..-2]\n    if (File.file?(file_name))\n      file_content = YAML::load_file(file_name)\n\n      if (file_content.is_a?(Hash))\n        p 'is indeed a hash'\n        return Sass::Script::Value::Map.new(file_content)\n      end\n\n      p 'Parse error'\n    else\n      p 'The requested file could not be found'\n    end\n  end\nend\n</code></pre>\n\n<p>It was my understanding that <code>YAML::load_file</code> returns a hash, and that <a href=\"http://sass-lang.com/documentation/Sass/Script/Value/Map.html\" rel=\"nofollow noreferrer\"><code>Sass::Script::Value::Map</code></a> would take a hash as input. But I get the following error I do not understand:</p>\n\n<blockquote>\n  <p>C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/sass-3.5.1/lib/sass/script/value/map.rb:22:in\n  `block in options=': undefined method `options=' for\n  \"<code>first.value.in.yaml.file</code>\":String (NoMethodError)</p>\n</blockquote>\n\n<p>Using a yaml file like this:</p>\n\n<pre><code>first.value.in.yaml.file:\n  name: MyName\n  color: red\n</code></pre>\n\n<p>What is this options method, and how should I be converting the yaml file's contents into a SASS map?</p>\n\n<p>(And if you know how to properly use a filename without it getting escaped, please share :) )</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "comments": [{"owner": {"reputation": 6559, "user_id": 382520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f73868bd13eba39cab490c897f1333?s=128&d=identicon&r=PG", "display_name": "JCorcuera", "link": "https://stackoverflow.com/users/382520/jcorcuera"}, "edited": false, "score": 0, "creation_date": 1502918896, "post_id": 45723083, "comment_id": 78404392, "body": "In your rake task are you loading the environment? like <code>task mytask: :environment do</code>"}, {"owner": {"reputation": 4980, "user_id": 23723, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vHpoJ.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/23723/matt"}, "reply_to_user": {"reputation": 6559, "user_id": 382520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f73868bd13eba39cab490c897f1333?s=128&d=identicon&r=PG", "display_name": "JCorcuera", "link": "https://stackoverflow.com/users/382520/jcorcuera"}, "edited": false, "score": 0, "creation_date": 1502919085, "post_id": 45723083, "comment_id": 78404466, "body": "@JCorcuera I updated my question with my task definition"}], "answers": [{"comments": [{"owner": {"reputation": 4980, "user_id": 23723, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vHpoJ.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/23723/matt"}, "edited": false, "score": 0, "creation_date": 1503049291, "post_id": 45723612, "comment_id": 78463868, "body": "tried this, I named the alias DocumentFileList and change it in my <code>TYPE</code> array, but I&#39;m getting <code>NameError: uninitialized constant DocumentFileList</code> now"}], "tags": [], "owner": {"reputation": 6559, "user_id": 382520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f73868bd13eba39cab490c897f1333?s=128&d=identicon&r=PG", "display_name": "JCorcuera", "link": "https://stackoverflow.com/users/382520/jcorcuera"}, "is_accepted": false, "score": 0, "last_activity_date": 1502920506, "creation_date": 1502920506, "answer_id": 45723612, "question_id": 45723083, "link": "https://stackoverflow.com/questions/45723083/class-name-conflict-between-rails-app-and-rake/45723612#45723612", "title": "Class name conflict between Rails app and Rake", "body": "<p>One think you can try is to give it an alias to <code>FileList</code>, at the end of you class definition:</p>\n\n<pre><code>class FileList &lt; ActiveRecord::Base\n  ...\nend\n\nFileListCopy = FileList\n</code></pre>\n\n<p>then in your rake access to <code>FileListCopy</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4980, "user_id": 23723, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vHpoJ.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/23723/matt"}, "edited": false, "score": 0, "creation_date": 1503048569, "post_id": 45723835, "comment_id": 78463404, "body": "Thanks for a thorough explanation. I realise I can put my model into a namespace, but that&#39;s not what you usually do with Rails models, unless they&#39;re in an engine. I leave it as a last resort, as I don&#39;t want to introduce a namespace just for this case."}], "tags": [], "owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "is_accepted": false, "score": 0, "last_activity_date": 1502921782, "creation_date": 1502921782, "answer_id": 45723835, "question_id": 45723083, "link": "https://stackoverflow.com/questions/45723083/class-name-conflict-between-rails-app-and-rake/45723835#45723835", "title": "Class name conflict between Rails app and Rake", "body": "<p>When you're calling FileList from Document model, it tries to resolve this constant in the following order:</p>\n\n<ol>\n<li>It tries to find the constant in the elements of the <a href=\"http://ruby-doc.org/core-2.3.0/Module.html#method-c-nesting\" rel=\"nofollow noreferrer\">Module.nesting</a> chain. In your case nesting is just <code>[Document]</code> and it does not contain <code>FileList</code> constant.</li>\n<li>Then it tries to find constant in object's ancestors.</li>\n<li>And finally the constant is looked up in <code>Object</code>.</li>\n</ol>\n\n<p>Rake exposes its DSL globally by extending <code>Object</code> with <a href=\"https://github.com/ruby/rake/blob/master/lib/rake/dsl_definition.rb\" rel=\"nofollow noreferrer\">Rake::DSL</a> module. Thus, while using rake you're always getting <code>FileList</code> from the rake.</p>\n\n<p>To overcome this issue you may move all your code into namespace. For example <code>MyApp::FileList</code> and <code>MyApp::Document</code>. In that case constant lookup algorithm will try to find constant in the elements of the nesting (<code>[MyApp::Document, MyApp]</code>). The second element of the nesting (<code>MyApp</code>) contain <code>FileList</code> constant. So, it would be resolved from <code>MyApp</code> module instead of <code>Rake</code>.</p>\n\n<p>To avoid such kind of issues it's always a good idea to put your code into some namespace.</p>\n"}], "owner": {"reputation": 4980, "user_id": 23723, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vHpoJ.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/23723/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1502921782, "creation_date": 1502917985, "last_edit_date": 1502919055, "question_id": 45723083, "link": "https://stackoverflow.com/questions/45723083/class-name-conflict-between-rails-app-and-rake", "title": "Class name conflict between Rails app and Rake", "body": "<p>I have a <code>Document</code> model in my Rails 4 app which starts like this:</p>\n\n<pre><code>class Document &lt; ActiveRecord::Base\n  TYPES = [FileList, Article, VariantList, LinkedItemsList].collect(&amp;:model_name)\n  ...\nend\n</code></pre>\n\n<p>The <code>TYPES</code> array contains a list of other models in my app and is used in a few places, for example to display a list of possible document types in one of my forms.</p>\n\n<p>Now I'm writing a Rake task to automate some stuff and I get this error at line 2 in my Document model when I run the task:</p>\n\n<p><code>NoMethodError: undefined method 'model_name' for Rake::FileList:Class</code></p>\n\n<p>So apparently there's the <code>Rake::FileList</code> class which is being loaded first and I get a name conflict. Using <code>::FileList</code> in my code doesn't help, I get the same error.</p>\n\n<p>Any idea how to get around this without renaming my model?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>My Rake task definition looks like this:</p>\n\n<pre><code>namespace :store do\n  desc 'Some description'\n  task :my_task_name, [:a_parameter_name] =&gt; [:environment] do |t, args|\n    ...\n  end\nend\n</code></pre>\n\n<p>I think this is loading the environment correctly, as I'm calling (loading from DB) some other models before I get to <code>Document</code> and that is working correctly.</p>\n"}, {"tags": ["ruby", "testing", "cucumber", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1502916020, "post_id": 45722480, "comment_id": 78403201, "body": "There are a number places that this could be failing. It would help if you can share a page that reproduces the exception, as well as the exact exception."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1502916245, "post_id": 45722480, "comment_id": 78403317, "body": "As a random guess, I would try simplifying the approach. Are there really that many search buttons that require being so specific on where to find the button? Do all of those CSS classes actually help be more specific? I&#39;d start off with <code>@browser.button(class: &#39;search-button&#39;).click</code> and then only add more specifics if needed."}, {"owner": {"reputation": 3, "user_id": 1669556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d428faedea14e26022a8dbdfca604767?s=128&d=identicon&r=PG", "display_name": "user1669556", "link": "https://stackoverflow.com/users/1669556/user1669556"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1502936873, "post_id": 45722480, "comment_id": 78408920, "body": "There are 5 buttons which are in the different section have the same class name &quot;search-button&quot;."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 1, "creation_date": 1502944733, "post_id": 45722480, "comment_id": 78410757, "body": "Also, which Watir version? Locating multiple classes with the <code>:class</code> key has been deprecated. With the latest version (6.7.1 was released today), you would want to put the ones you care about into an array <code>[&#39;cta-1st&#39;, &#39;clrboth&#39;, &#39;primary&#39;, &#39;search-button&#39;]</code>. Also prefer the <code>#button</code> method over the generic <code>#input</code> method"}, {"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 0, "creation_date": 1502977365, "post_id": 45722480, "comment_id": 78431263, "body": "@user1669556 can you show what put <code>@browser.button(class: &#39;search-button&#39;).length</code> returns? I would be willing to bet it is returning an array and you need to put <code>@browser.button(class: &#39;search-button&#39;).first.click</code>"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1503701145, "post_id": 45722480, "comment_id": 78740154, "body": "a larger sample of the page HTML might help, or if you could provide a link to the page in question?"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 1669556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d428faedea14e26022a8dbdfca604767?s=128&d=identicon&r=PG", "display_name": "user1669556", "link": "https://stackoverflow.com/users/1669556/user1669556"}, "is_accepted": true, "score": 0, "last_activity_date": 1503727014, "creation_date": 1503727014, "answer_id": 45892377, "question_id": 45722480, "link": "https://stackoverflow.com/questions/45722480/can-not-find-element-using-watir-webdriver/45892377#45892377", "title": "can not find element using watir webdriver", "body": "<p>Thank you for all the help here. the problem was, I had a wrong reading in one of the elements.<br>\nI was missing this part.</p>\n\n<pre><code>@browser.div(:id=&gt;'ember730').section(:class=&gt;'tab-pane fade active in').form(:class=&gt;'flight-search ').text_field(:class=&gt;'cta-1st clrboth primary search-button firepath-matching-node').click\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 3985538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mP4Mk.jpg?s=128&g=1", "display_name": "Nawshad Rehan Rasha", "link": "https://stackoverflow.com/users/3985538/nawshad-rehan-rasha"}, "is_accepted": false, "score": 0, "last_activity_date": 1505730132, "creation_date": 1505730132, "answer_id": 46276927, "question_id": 45722480, "link": "https://stackoverflow.com/questions/45722480/can-not-find-element-using-watir-webdriver/46276927#46276927", "title": "can not find element using watir webdriver", "body": "<p>As there is <code>value=\"Search Now\"</code> section of <code>type=\"button\"</code> here, following simple code snippet should do. I have made this working using Watir in my project..</p>\n\n<pre><code>@browser.button(value: \"Search Now\").click\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1669556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d428faedea14e26022a8dbdfca604767?s=128&d=identicon&r=PG", "display_name": "user1669556", "link": "https://stackoverflow.com/users/1669556/user1669556"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 45892377, "answer_count": 2, "score": 0, "last_activity_date": 1505730132, "creation_date": 1502915447, "last_edit_date": 1502932166, "question_id": 45722480, "link": "https://stackoverflow.com/questions/45722480/can-not-find-element-using-watir-webdriver", "title": "can not find element using watir webdriver", "body": "<p>I am trying to click on the button. </p>\n\n<pre><code>&lt;input data-ember-action=\"797\" value=\"Search Now\" class=\"cta-1st clrboth primary search-button firepath-matching-node\" type=\"button\"&gt;\n</code></pre>\n\n<p>but it keep showing an error of not finding the element to click. \nit finds all the elements until the end but when it comes to \"click\" it throws an error. My code is like this: </p>\n\n<pre><code> @browser.div(:id=&gt;'ember730').section(:class=&gt;'tab-pane fade active in').form(:class=&gt;'flight-search ').input(:class=&gt;'cta-1st clrboth primary search-button').click\n</code></pre>\n\n<p>Am I missing something?\nI am using Watir </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 8427550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad9914fe927c79935f065419c73dae5?s=128&d=identicon&r=PG&f=1", "display_name": "R.Mirana", "link": "https://stackoverflow.com/users/8427550/r-mirana"}, "is_accepted": false, "score": 0, "last_activity_date": 1503017465, "creation_date": 1503017465, "answer_id": 45746916, "question_id": 45722379, "link": "https://stackoverflow.com/questions/45722379/rails-5-unable-to-deploy-on-heroku-due-to-actionviewtemplateerror/45746916#45746916", "title": "Rails 5 unable to deploy on Heroku due to ActionView::Template::Error", "body": "<p>I saw the same problem with building ruby on rails to Heroku.</p>\n\n<p>If you use the statements above to check if an asset exists, remove the little to_s in the end because nil.to_s = \"\" = tru</p>\n\n<p>There is the same question like this. For more details, please try it.\n<a href=\"https://stackoverflow.com/questions/35251759/undefined-method-find-asset-for-nilnilclass\">`undefined method `find_asset&#39; for nil:NilClass`</a></p>\n"}], "owner": {"reputation": 87, "user_id": 7438959, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-oTIyL0JubPE/AAAAAAAAAAI/AAAAAAAAAWY/0416SyDI6zw/photo.jpg?sz=128", "display_name": "Luis Mejia", "link": "https://stackoverflow.com/users/7438959/luis-mejia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503017465, "creation_date": 1502914994, "last_edit_date": 1503016186, "question_id": 45722379, "link": "https://stackoverflow.com/questions/45722379/rails-5-unable-to-deploy-on-heroku-due-to-actionviewtemplateerror", "title": "Rails 5 unable to deploy on Heroku due to ActionView::Template::Error", "body": "<p>I am unable to load a Rails 5 app on Heroku due to the following as per Heroku</p>\n\n<pre><code>ActionView::Template::Error (undefined methodfind_asset' for nil:NilClass)\n</code></pre>\n\n<p>I am using a theme called <a href=\"http://webapplayers.com/inspinia_admin-v2.5/package.html\" rel=\"nofollow noreferrer\">Inspinia</a></p>\n\n<p>I believe I have located the code that is causing the issue, the theme precompiles the assets and when in production heroku is having issues and produces errors. I can't find any clear solution to this issue, heroku won't be able to assist me any further and suggested Stack and not sure there is another way to get the desired effects on the app. I tried remove the find_assets method and it works locally, but causes an H10 error on heroku. </p>\n\n<p>application.html.erb</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Get Leased Up!&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n\n    &lt;!-- Include style per-controller - vendor plugins --&gt;\n    &lt;!-- this is where the error comes from --&gt; \n    &lt;%= stylesheet_link_tag params[:controller] if ::Rails.application.assets.find_asset(\"#{params[:controller]}.css\") %&gt;\n\n    &lt;!-- Main css styles --&gt;\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n\n    &lt;!-- Main javascript files --&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n\n\n  &lt;/head&gt;\n  &lt;body&gt;\n...\n&lt;/body&gt;\n</code></pre>\n\n<p>assets.rb</p>\n\n<pre><code>Rails.application.config.assets.precompile += %w{ ... }\n</code></pre>\n\n<p>heroku message and logs</p>\n\n<pre><code>Thanks for reaching out. A 200 status response indicates the request has succeeded, so the log you shared isn't the error. That said, I went ahead and monitored your app while loading the root page and found the following:\n\n2017-08-10T17:27:02.482836+00:00 app[web.1]: I, [2017-08-10T17:27:02.482635 #4]  INFO -- : [3c945419-e22f-428f-9212-bebdad98f929] Started GET \"/\" for 71.198.136.218 at 2017-08-10 17:27:02 +0000\n2017-08-10T17:27:02.533224+00:00 app[web.1]: I, [2017-08-10T17:27:02.533084 #4]  INFO -- : [3c945419-e22f-428f-9212-bebdad98f929] Processing by LandingController#index as HTML\n2017-08-10T17:27:02.596368+00:00 app[web.1]: I, [2017-08-10T17:27:02.596232 #4]  INFO -- : [3c945419-e22f-428f-9212-bebdad98f929]   Rendering landing/index.html.erb within layouts/application\n2017-08-10T17:27:02.645104+00:00 app[web.1]: I, [2017-08-10T17:27:02.644968 #4]  INFO -- : [3c945419-e22f-428f-9212-bebdad98f929]   Rendered landing/index.html.erb within layouts/application (48.5ms)\n2017-08-10T17:27:02.675935+00:00 app[web.1]: I, [2017-08-10T17:27:02.675800 #4]  INFO -- : [3c945419-e22f-428f-9212-bebdad98f929] Completed 500 Internal Server Error in 142ms\n2017-08-10T17:27:02.677803+00:00 app[web.1]: F, [2017-08-10T17:27:02.677709 #4] FATAL -- : [3c945419-e22f-428f-9212-bebdad98f929]\n2017-08-10T17:27:02.677879+00:00 app[web.1]: F, [2017-08-10T17:27:02.677804 #4] FATAL -- : [3c945419-e22f-428f-9212-bebdad98f929] ActionView::Template::Error (undefined method `find_asset' for nil:NilClass):\nThe issue is ActionView::Template::Error (undefined methodfind_asset' for nil:NilClass)`, so you will need to fix that in order to resolve the issue. \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "materialize"], "comments": [{"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1503077173, "post_id": 45722286, "comment_id": 78481965, "body": "Thanks, i finally figured out the issue. I had to wrap the checkbox inside a <code>&lt;p&gt;</code> and not a <code>&lt;div&gt;</code> tag"}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "is_accepted": false, "score": 0, "last_activity_date": 1502923630, "creation_date": 1502923630, "answer_id": 45724087, "question_id": 45722286, "link": "https://stackoverflow.com/questions/45722286/rails-materialize-css-form-checkbox-not-displaying/45724087#45724087", "title": "rails materialize css. Form checkbox not displaying", "body": "<p>Because of the way Materialize build its custom checkboxes, adding a <code>&lt;br&gt;</code> in between the checkbox and the label will break it. All you need to do is remove <code>&lt;br&gt;</code> from your code and it should work.</p>\n"}], "owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1502923630, "creation_date": 1502914623, "last_edit_date": 1502915043, "question_id": 45722286, "link": "https://stackoverflow.com/questions/45722286/rails-materialize-css-form-checkbox-not-displaying", "title": "rails materialize css. Form checkbox not displaying", "body": "<p>Everyone, I am having issues rendering check box with materialize css in rails 5.</p>\n\n<h3>Here is my form helper</h3>\n\n<pre><code>&lt;div class=\"input-field\"&gt;\n  &lt;%= f.check_box :is_furnished %&gt; &lt;br&gt;\n  &lt;%= f.label :is_furnished %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<h3>inspect source code</h3>\n\n<pre><code>&lt;div class=\"input-field\"&gt;\n  &lt;input name=\"listing[is_furnished]\" type=\"hidden\" value=\"0\"&gt;&lt;input type=\"checkbox\" value=\"1\" name=\"listing[is_furnished]\" id=\"listing_is_furnished\"&gt; &lt;br&gt;\n  &lt;label for=\"listing_is_furnished\"&gt;Is furnished&lt;/label&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1502916095, "post_id": 45722264, "comment_id": 78403238, "body": "What error does it throw?"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1502917616, "post_id": 45722264, "comment_id": 78403879, "body": "updated the question with the error.."}, {"owner": {"reputation": 927, "user_id": 2392172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e8a52db22ee2eeabb994dced226773?s=128&d=identicon&r=PG", "display_name": "sshaw", "link": "https://stackoverflow.com/users/2392172/sshaw"}, "edited": false, "score": 1, "creation_date": 1502937574, "post_id": 45722264, "comment_id": 78409085, "body": "CSV code looks fine. <code>ArgumentError: Invalid arguments!</code> <a href=\"https://github.com/zdennis/activerecord-import/search?utf8=%E2%9C%93&amp;q=Invalid+arguments%21\" rel=\"nofollow noreferrer\">comes from activerecord-import</a>. A stacktrace would be nice."}, {"owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "edited": false, "score": 0, "creation_date": 1502983955, "post_id": 45722264, "comment_id": 78436321, "body": "Have a look at this answer: <a href=\"https://stackoverflow.com/questions/45074980/rspec-and-rails-4-update-skip-callback/45077040#45077040\" title=\"rspec and rails 4 update skip callback\">stackoverflow.com/questions/45074980/&hellip;</a>, and debug your code to see exactly what&#39;s the problem."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5518721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mSvylyd9jRo/AAAAAAAAAAI/AAAAAAAAEhE/-OjX_gdOK38/photo.jpg?sz=128", "display_name": "abhinav cherukuru", "link": "https://stackoverflow.com/users/5518721/abhinav-cherukuru"}, "is_accepted": false, "score": 0, "last_activity_date": 1612602239, "last_edit_date": 1612602239, "creation_date": 1600350717, "answer_id": 63939592, "question_id": 45722264, "link": "https://stackoverflow.com/questions/45722264/csv-foreach-breaking-when-null-value-reached/63939592#63939592", "title": "CSV.foreach breaking when NULL value reached", "body": "<p>While working with CSV for bulk uploads, it's better to catch the errors using rescue exceptions, and store the error items in a temp object, if you need to keep track of failed lines. And then use <code>next</code> in the <code>rescue</code> to continue to the next line. It would go something like this:</p>\n<pre><code>def add\n  rows_to_insert = []\n  error_rows = []\n  CSV.foreach(&quot;customers.csv&quot;, headers: true) do |row|\n    begin\n      pp row\n      rows_to_insert &lt;&lt; row\n    rescue =&gt; Exception\n      error_rows &lt;&lt; row\n      next\n    end\n  end\n  Customer.import(rows_to_insert)\n  # export/show your error_rows here\nend\n</code></pre>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1612602239, "creation_date": 1502914540, "last_edit_date": 1502917601, "question_id": 45722264, "link": "https://stackoverflow.com/questions/45722264/csv-foreach-breaking-when-null-value-reached", "title": "CSV.foreach breaking when NULL value reached", "body": "<p>I have this <code>rake</code> task where I'm trying to import a CSV file into my db. Some reason it doesn't just finish, but instead throws an error on the very last line. I tried stopping it earlier but it still throws the same error. I also made sure there weren't any other lines past the last valid value. To <code>import</code> I'm using the <code>activerecord-import</code> gem. See my code below:</p>\n\n<pre><code>desc 'add customer to my db'\n  task :add_my_db =&gt; :environment do\n  puts \"adding to my internal database.. hold the line\"\n  add\nend\nrequire 'csv'\nrequire 'pp'\n\ndef add\n  rows_to_insert = []\n  CSV.foreach(\"customers.csv\", headers: true) do |row|\n    pp row\n    rows_to_insert &lt;&lt; row\n  end\n  Customer.import(rows_to_insert)\nend\n</code></pre>\n\n<p>The error it throws is: <code>ArgumentError: Invalid arguments!</code></p>\n\n<p>Where did I go wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 4436480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D84Dp.jpg?s=128&g=1", "display_name": "Ketan Doshi", "link": "https://stackoverflow.com/users/4436480/ketan-doshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1503158971, "creation_date": 1503158971, "answer_id": 45773661, "question_id": 45722174, "link": "https://stackoverflow.com/questions/45722174/rails-serialization-not-dumping-hash-correctly/45773661#45773661", "title": "Rails serialization not dumping hash correctly", "body": "<p>Why do you want to use MySerializer class?</p>\n\n<p>Instead you can simply use as below:</p>\n\n<pre><code>serialize :configuration, Hash\n</code></pre>\n\n<p>Now do,</p>\n\n<pre><code>MyModel.create(configuration: {\"key\" =&gt; 1})\n</code></pre>\n\n<p>And try</p>\n\n<pre><code>MyModel.first\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 3162721, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/v314b.jpg?s=128&g=1", "display_name": "luispcosta", "link": "https://stackoverflow.com/users/3162721/luispcosta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503158971, "creation_date": 1502914108, "question_id": 45722174, "link": "https://stackoverflow.com/questions/45722174/rails-serialization-not-dumping-hash-correctly", "title": "Rails serialization not dumping hash correctly", "body": "<p>I have an active record model that has a column called <code>configuration</code> of type text. That column is serialized with a custom class, like so:</p>\n\n<pre><code>class MyModel &lt; ApplicationRecord\n  serialize :configuration, MySerializer\nend\n</code></pre>\n\n<p>The class <code>MySerializer</code> has the following class methods:</p>\n\n<pre><code>def dump(configuration)\n  configuration.to_json if configuration\nend\n\ndef load(configuration)\n  obj = new\n  obj.json_hash = JSON.parse(configuration) if configuration.present?\n  obj\nend\n</code></pre>\n\n<p>This instantiates an instance of the class <code>MySerializer</code> with the attr accessor <code>json_hash</code>.</p>\n\n<p>Now, here's the problem, I'm doing:</p>\n\n<p><code>MyModel.create(configuration: {\"key\" =&gt; 1})</code></p>\n\n<p>And once I do <code>MyModel.first</code>, i get this:</p>\n\n<pre><code>...\nconfiguration:\n  #&lt;MySerializer:0x00000007faa558\n   @json_hash={\"json_hash\"=&gt;{\"key\" =&gt; 1}\n</code></pre>\n\n<p>I was expecting getting something like:</p>\n\n<pre><code>@json_hash = {\"key\" =&gt; 1}\n</code></pre>\n\n<p>Any idea why I'd get the repeated key <code>json_hash</code> inside the attr accessor <code>@json_hash</code> ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "recursion", "collatz"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1502916136, "post_id": 45721698, "comment_id": 78403263, "body": "What is the specific problem that happens currently?"}, {"owner": {"reputation": 63, "user_id": 7637442, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/0W8WC.jpg?s=128&g=1", "display_name": "Natasha Kelly", "link": "https://stackoverflow.com/users/7637442/natasha-kelly"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1502917544, "post_id": 45721698, "comment_id": 78403862, "body": "@whodini9 the recursive call is not running the output is stuck at {5=&gt;[5, 16], 4=&gt;[4, 2], 3=&gt;[3, 10], 2=&gt;[2, 1], 1=&gt;[1]} and as mentioned I would like to populate the hash sub arrays until the last element equals 1"}, {"owner": {"reputation": 63, "user_id": 7637442, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/0W8WC.jpg?s=128&g=1", "display_name": "Natasha Kelly", "link": "https://stackoverflow.com/users/7637442/natasha-kelly"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1502917667, "post_id": 45721698, "comment_id": 78403904, "body": "I also tried to implement the same logic with a different approach:             def collatzSum(maxNumber)  sequenceHash = Hash.new(0) # take in a number # check number againgst sequence  # populate hash with numbers from the sequence check  checkNum = lambda do |n|   until n == 1    if n.even?      (n/2)    else       (n*3+1)    end     n -= 1    end end   checkNum.call(maxNumber)  sequence = lambda do |i|   until i == 1 do      sequenceHash[i] = [checkNum.call(i)]   end    i -= 1 end  sequence.call(maxNumber) end      collatzSum(5)"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7637442, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/0W8WC.jpg?s=128&g=1", "display_name": "Natasha Kelly", "link": "https://stackoverflow.com/users/7637442/natasha-kelly"}, "edited": false, "score": 0, "creation_date": 1502918987, "post_id": 45723082, "comment_id": 78404428, "body": "this is EXACTLY what I was trying to achieve! Thank you for the detailed explanation"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1502917970, "creation_date": 1502917970, "answer_id": 45723082, "question_id": 45721698, "link": "https://stackoverflow.com/questions/45721698/collatz-chain-algorithm-ruby/45723082#45723082", "title": "Collatz Chain Algorithm RUBY", "body": "<p>So you mention that you wanted a recursive algorithm, your current approach looks iterative to me. To be recursive, you need to call the method you're in with values closer and closer to a base condition and then, once you hit the base condition, you return back out, up the call chain building up your return values. So, for the Collatz sequence a recursive approach would look like:</p>\n\n<pre><code>def build_collatz_chain(max_number)\n  return_value = [max_number]\n  # our base condition is when the number passed in is equal to 1, so\n  # when we get 1 as the max_number, we'll return an array looking like\n  # [1]\n  return return_value if max_number == 1\n\n  if max_number.even?\n    # here, with an even max_number, we'll recurse and call our method\n    # again, passing in the new max_number, which is the current\n    # max_number / 2.\n    return_value + build_collatz_chain(max_number / 2)\n  else\n    # same as above, but we're odd, so we'll recurse with 3 * max_number + 1\n    return_value + build_collatz_chain(3 * max_number + 1)\n  end\nend\n</code></pre>\n\n<p>and now when we call this with a value of <code>5</code>, what will end up happening is something like:</p>\n\n<pre><code>call build_collatz_chain(5)\n  call build_collatz_chain(16)\n    call build_collatz_chain(8)\n      call build_collatz_chain(4)\n        call build_collatz_chain(2)\n          call build_collatz_chain(1)\n          We have hit the base condition! return with [1]\n        return from 2 with [2, 1]\n      return from 4 with [4, 2, 1]\n    return from 8 with [8, 4, 2, 1]\n  return from 16 with [16, 8, 4, 2, 1]\nreturn from 5 with [5, 16, 8, 4, 2, 1]\n</code></pre>\n\n<p>So, now if you want a hash of all numbers up to the passed in <code>max_number</code> with their Collatz chains as values you can use a helper to call this for each value, up to max (this helper is iterative, but could be made recursive...exercise for the viewer if you want it recursive):</p>\n\n<pre><code>def collatz_sum(max_number)\n  { }.tap do |sequence_hash|\n    max_number.downto(1) do |i|\n      sequence_hash[i] = build_collatz_chain(i)\n    end\n  end\nend\n</code></pre>\n\n<p>and then when you call <code>collatz_sum(5)</code> you get back:</p>\n\n<pre><code>{5=&gt;[5, 16, 8, 4, 2, 1], 4=&gt;[4, 2, 1], 3=&gt;[3, 10, 5, 16, 8, 4, 2, 1], 2=&gt;[2, 1], 1=&gt;[1]}\n</code></pre>\n\n<p>The reason your approach is iterative is in the <code>collatzChain</code> lambda, you are setting a value (<code>j</code>) and then incrementing it and just looping through until <code>k</code> is equal to <code>1</code>. It's also an infinite loop because you initially set <code>k</code> as:</p>\n\n<pre><code>j = 0\nk = j[-1]\n</code></pre>\n\n<p>and so <code>k == 0</code>, and then you iterate until <code>k == 1</code> and then you never update what the value of <code>k</code> is again.</p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1502918325, "creation_date": 1502918325, "answer_id": 45723162, "question_id": 45721698, "link": "https://stackoverflow.com/questions/45721698/collatz-chain-algorithm-ruby/45723162#45723162", "title": "Collatz Chain Algorithm RUBY", "body": "<p>It's not clear that a recursive operation is necessary here since this seems to be a straightforward mapping between a value <em>x</em> and <em>f(x)</em>. By switching to a simple array output you can achieve what you want with:</p>\n\n<pre><code>def collatz_sum(max)\n  (2..max).map do |i|\n    [\n      i,\n      if (i.even?)\n        i / 2\n      else\n        3 * i + 1\n      end\n    ]\n  end.reverse + [ [ 1 ] ]\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7637442, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/0W8WC.jpg?s=128&g=1", "display_name": "Natasha Kelly", "link": "https://stackoverflow.com/users/7637442/natasha-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 45723082, "answer_count": 2, "score": 2, "last_activity_date": 1502918325, "creation_date": 1502912315, "last_edit_date": 1502917228, "question_id": 45721698, "link": "https://stackoverflow.com/questions/45721698/collatz-chain-algorithm-ruby", "title": "Collatz Chain Algorithm RUBY", "body": "<p>I am trying to populate an array according to the Collatz sequence. The constraints for the sequence are as follows:</p>\n\n<p>positive integers:</p>\n\n<p>n \u2192 n/2 (n is even)</p>\n\n<p>n \u2192 3n + 1 (n is odd)</p>\n\n<p>Example Output </p>\n\n<p>3 -> 10 -> 5 -> 16 -> 8 -> 4 -> 2 -> 1</p>\n\n<p>Ideally, I wanted to construct a recursive call that would populate the array according to the constraints of the sequence. However, I believe my logic for the recursive call is extremely flawed. The intended behavior is to iterate over the nested array, manipulating only the last element of each sub array until the element reaches 1. I am trying to build my understanding of recursion and would appreciate any suggestions on how to fix this problem.</p>\n\n<pre><code>def collatzSum(maxNumber)\n\n sequenceHash = Hash.new(0)\n  i = maxNumber\n  until i == 0 do \n    if i.even?\n      sequenceHash[i] = [(i), (i / 2)]\n    elsif i.odd? &amp;&amp; i != 1\n      sequenceHash[i] = [(i), (3 * i + 1)]\n   elsif i == 1 \n      sequenceHash[i] = [i]\n  end \n    i -= 1\n end\n p sequenceHash\n</code></pre>\n\n<p>helper_method recursion. Method should take in hash values and iterate    according to if statements.</p>\n\n<pre><code>=begin \n    desired output\n    hash = {5=&gt;[5,16, 8, 4, 2,1],\n            4=&gt;[4,2,1],\n            3=&gt;[3,10,5,16,8,4,2,1],\n            2=&gt;[2,1],\n            1=&gt;[1]}\n=end \n</code></pre>\n\n<p>Code:</p>\n\n<pre><code> collatzChain = lambda do |k|\n  j = 0\n  k = j[-1]\n   until k == 1 do\n      if k.even?\n        sequenceHash[k] &lt;&lt; (k / 2)\n     elsif k.odd?\n       sequenceHash[k] &lt;&lt; (3 * k + 1)\n      end \n    end\n  j += 1\nend \ncollatzChain.call(sequenceHash.values)\nsequenceHash\nend \n\ncollatzSum(5)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara", "rubocop"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1502926149, "last_edit_date": 1502926149, "creation_date": 1502913305, "answer_id": 45721947, "question_id": 45721592, "link": "https://stackoverflow.com/questions/45721592/can-i-whitelist-a-rubocop-rails-dynamicfindby-method-on-a-per-file-basis/45721947#45721947", "title": "Can I whitelist a RuboCop Rails/DynamicFindBy method on a per-file basis", "body": "<p>You should be able to set this in your rubocop config file like</p>\n\n<pre><code># In .rubocop.yml\nRails/DynamicFindBy:\n  Include:\n    - tests/integrations/**/*.rb\n  Whitelist:\n    - find_by_id\n    - find_by_something_else\n</code></pre>\n\n<p>Or you could add a new .rubocop.yml file to the directory that contains the files in which you want the methods whitelisted and inherit from the overall config - see <a href=\"https://github.com/bbatsov/rubocop/blob/master/manual/configuration.md#inheritance\" rel=\"nofollow noreferrer\">https://github.com/bbatsov/rubocop/blob/master/manual/configuration.md#inheritance</a> </p>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 2069311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5648e7f8dcaf9d64e4a4cfd7b03b89b1?s=128&d=identicon&r=PG", "display_name": "user2069311", "link": "https://stackoverflow.com/users/2069311/user2069311"}, "is_accepted": false, "score": 0, "last_activity_date": 1502942520, "creation_date": 1502942520, "answer_id": 45726395, "question_id": 45721592, "link": "https://stackoverflow.com/questions/45721592/can-i-whitelist-a-rubocop-rails-dynamicfindby-method-on-a-per-file-basis/45726395#45726395", "title": "Can I whitelist a RuboCop Rails/DynamicFindBy method on a per-file basis", "body": "<p>That answer is almost it, and can be easily modified to do exactly what I want. The answer isn't perfect, because it's directory-by-directory, rather than file-by-file.  So the only change is to list specific files in the <code>Include</code>:</p>\n\n<pre><code># In .rubocop.yml\nRails/DynamicFindBy:\n  Include:\n    - tests/integrations/first_test.rb\n    - tests/integrations/second_test.rb\n  Whitelist:\n    - find_by_id\n   - find_by_something_else\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 2069311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5648e7f8dcaf9d64e4a4cfd7b03b89b1?s=128&d=identicon&r=PG", "display_name": "user2069311", "link": "https://stackoverflow.com/users/2069311/user2069311"}, "edited": false, "score": 0, "creation_date": 1503007428, "post_id": 45739139, "comment_id": 78448697, "body": "Maybe a way to fine-tune this is to move all the capybara test files to a separate directory, and whitelist <code>find_by_id</code> only for that directory. My concern: I&#39;d like -- as much as reasonably possible -- to continue blacklisting <b>ActiveRecord&#39;s</b> <code>find_by_id</code> dynamic method."}, {"owner": {"reputation": 1518, "user_id": 3984943, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/DdHWC.jpg?s=128&g=1", "display_name": "jayqui", "link": "https://stackoverflow.com/users/3984943/jayqui"}, "edited": false, "score": 0, "creation_date": 1567642178, "post_id": 45739139, "comment_id": 102026780, "body": "Can you please provide more context about how someone would &quot;whitelist #find_by_id for all files in /integrations, using another configuration file&quot;?"}], "tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1502983423, "creation_date": 1502983423, "answer_id": 45739139, "question_id": 45721592, "link": "https://stackoverflow.com/questions/45721592/can-i-whitelist-a-rubocop-rails-dynamicfindby-method-on-a-per-file-basis/45739139#45739139", "title": "Can I whitelist a RuboCop Rails/DynamicFindBy method on a per-file basis", "body": "<p>There is no way to do this on a file-by-file basis. Closest you can get is having a particular configuration on a directory level, by putting another <code>.rubocop.yml</code> configuration file inside.</p>\n\n<p>It might look like this is a solution at first:</p>\n\n<pre><code># .rubocop.yml\nRails/DynamicFindBy:\n  Include:\n    - tests/integrations/first_test.rb\n    - tests/integrations/second_test.rb\n  Whitelist:\n    - find_by_id\n</code></pre>\n\n<p>But <code>Include</code> means \"included for inspection\", not \"included for configuration\", so this actually excludes all other project files from being inspected by the cop entirely. (Which you wouldn't notice if there were no offences in the other files to begin with.)</p>\n\n<p>That leaves two options:</p>\n\n<ol>\n<li>Whitelist <code>#find_by_id</code> for all files in <code>/integrations</code>, using another configuration file.</li>\n<li>Use inline disables and -enables.</li>\n</ol>\n\n<p>The former would probably be the recommended one, unless there's a strong reason for why <code>#find_by_id</code> should not be allowed in the other integration tests.</p>\n"}], "owner": {"reputation": 125, "user_id": 2069311, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5648e7f8dcaf9d64e4a4cfd7b03b89b1?s=128&d=identicon&r=PG", "display_name": "user2069311", "link": "https://stackoverflow.com/users/2069311/user2069311"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1502983423, "creation_date": 1502911860, "question_id": 45721592, "link": "https://stackoverflow.com/questions/45721592/can-i-whitelist-a-rubocop-rails-dynamicfindby-method-on-a-per-file-basis", "title": "Can I whitelist a RuboCop Rails/DynamicFindBy method on a per-file basis", "body": "<p>RuboCop's Rails/DynamicFindBy cop gives false positives when it encounters Capybara's (as opposed to Rail's) <code>find_by_id</code> method.<br>\nThere's apparently a way to whitelist methods so that they are ignored by this cop. See <a href=\"http://rubocop.readthedocs.io/en/latest/cops_rails/#railsdynamicfindby\" rel=\"nofollow noreferrer\">http://rubocop.readthedocs.io/en/latest/cops_rails/#railsdynamicfindby</a> (mentioning Whitelist attribute).</p>\n\n<p>I would like to whitelist <code>find_by_id</code>, but <strong>only</strong> for certain files (the ones with Capybara tests) in my tests/integration directory.  Is this possible?</p>\n\n<p>(I am aware that I can turn off the entire cop on a file by file basis, but I don't want to turn off the cop entirely. I am also aware that I can turn off the cop for portions of a file, or on a line-by-line basis, but those are not preferred solutions.)</p>\n"}, {"tags": ["ruby", "module"], "comments": [{"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 0, "creation_date": 1556655300, "post_id": 45720739, "comment_id": 98509786, "body": "&quot;I&#39;m not sure how to phrase my question...&quot; Indeed! Glad I found your question."}], "answers": [{"comments": [{"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 0, "creation_date": 1556655259, "post_id": 45721142, "comment_id": 98509768, "body": "Thanks! Just what I needed...and a hard thing to search for!"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1502910215, "creation_date": 1502910215, "answer_id": 45721142, "question_id": 45720739, "link": "https://stackoverflow.com/questions/45720739/ruby-calling-gem-subclass-within-module-produces-uninitialized-constant/45721142#45721142", "title": "Ruby: Calling gem subclass within module produces uninitialized constant", "body": "<p>Since you have a class called <code>Common::RestClient</code> and are using a ruby gem which defines a class <code>RestClient</code>, when you're within your <code>Common</code> module, you'll need to reference the gems <code>RestClient</code> with a <code>::</code> prefix, otherwise, it assumes you're talking about <code>Common::RestClient</code></p>\n\n<pre><code>module Common\n  module RestClient\n\n  def call_rest_service_get(url)\n    begin\n      response = ::RestClient.get(url, {accept: :json})\n    rescue ::RestClient::Exception =&gt; err\n      return err.response\n    else\n      return response\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 45721142, "answer_count": 1, "score": 2, "last_activity_date": 1502910215, "creation_date": 1502908539, "question_id": 45720739, "link": "https://stackoverflow.com/questions/45720739/ruby-calling-gem-subclass-within-module-produces-uninitialized-constant", "title": "Ruby: Calling gem subclass within module produces uninitialized constant", "body": "<p>I have 2 projects, a \"common code\" project that i have made into a big module that pulls in other modules like so:</p>\n\n<p>Here is the folder structure of \"my-common-project\":</p>\n\n<ul>\n<li><strong>my-common-project</strong>\n\n<ul>\n<li><strong>common</strong>\n\n<ul>\n<li>rest-client.rb</li>\n<li>other ruby files with modules...</li>\n</ul></li>\n<li>common.rb</li>\n<li>Gemfile</li>\n<li>etc...</li>\n</ul></li>\n</ul>\n\n<h1>common.rb</h1>\n\n<pre><code>require 'bundler'\nBundler.require\nrequire_relative './common/rest_client.rb'\n...\n\nmodule Common\n  include RestClient\n  # include other modules here...\n</code></pre>\n\n<h1>rest-client.rb</h1>\n\n<pre><code>module Common\n  module RestClient\n\n  def call_rest_service_get(url)\n    begin\n      response = RestClient.get(url, {accept: :json})\n    rescue RestClient::Exception =&gt; err\n      return err.response\n    else\n      return response\n    end\n  end\nend\n</code></pre>\n\n<h1>Gemfile</h1>\n\n<pre><code># frozen_string_literal: true\nsource 'https://rubygems.org'\n\ngem 'rest-client'\n# other gems here...\n</code></pre>\n\n<p>Then in another project called \"my-other-project\":</p>\n\n<ul>\n<li><strong>my-other-project</strong>\n\n<ul>\n<li><strong>service</strong>\n\n<ul>\n<li>service.rb</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<h1>service.rb</h1>\n\n<pre><code>require_relative './../../../common/common.rb'\n\nclass Service\n\n  include Common\n\n  def get_rest_data\n    call_rest_service_get('http://some-url.com)\n  end\nend\n</code></pre>\n\n<p>I get an Error when the code makes it to the rescue block in rest-client.rb:</p>\n\n<pre><code>NameError - uninitialized constant Common::RestClient::Exception\n</code></pre>\n\n<p>I'm not sure how to phrase my question, but somewhere along the line it seems the common module is losing out on the rest client modules other classes, in this example Exception. Can someone explain why this method of lumping and then including many modules isn't working?</p>\n"}, {"tags": ["ruby-on-rails", "node.js", "ruby", "reactjs", "yarnpkg"], "comments": [{"owner": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "edited": false, "score": 0, "creation_date": 1503307812, "post_id": 45720650, "comment_id": 78544900, "body": "What operating system are you using and how did you install yarn?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1503337795, "post_id": 45720650, "comment_id": 78563831, "body": "can you run <code>yarn install</code>? What is the output?"}, {"owner": {"reputation": 362, "user_id": 2787566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c8f0b4fc470756aa44845c610c7c94?s=128&d=identicon&r=PG&f=1", "display_name": "iskvmk", "link": "https://stackoverflow.com/users/2787566/iskvmk"}, "edited": false, "score": 0, "creation_date": 1503351041, "post_id": 45720650, "comment_id": 78569471, "body": "Would be better if you install yarn with brew. But anyway, add following to your <code>.bashrc</code>: <code>export PATH=&quot;$PATH:&#39;yarn global bin&#39;&quot;</code> as it is described in <a href=\"https://yarnpkg.com/en/docs/install\" rel=\"nofollow noreferrer\">docs</a> to have access to Yarn\u2019s executables globally and make sure you have reloaded your <code>~&#47;.bashrc</code> file with <code>source ~&#47;.bash_profile</code>."}, {"owner": {"reputation": 2977, "user_id": 8459787, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c4efeb3c2303d4b6b22f3ccf5d149c9b?s=128&d=identicon&r=PG&f=1", "display_name": "artgb", "link": "https://stackoverflow.com/users/8459787/artgb"}, "edited": false, "score": 0, "creation_date": 1503397262, "post_id": 45720650, "comment_id": 78587424, "body": "Have you installed webpack gem?"}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1503402934, "post_id": 45720650, "comment_id": 78591133, "body": "Looks like un-setting my http_proxy did it."}], "answers": [{"tags": [], "owner": {"reputation": 15106, "user_id": 1117851, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9FMVK.jpg?s=128&g=1", "display_name": "itsnikolay", "link": "https://stackoverflow.com/users/1117851/itsnikolay"}, "is_accepted": false, "score": 0, "last_activity_date": 1503415432, "creation_date": 1503415432, "answer_id": 45821620, "question_id": 45720650, "link": "https://stackoverflow.com/questions/45720650/react-on-rails-install-yarn-is-required-error/45821620#45821620", "title": "react_on_rails install: yarn is required error", "body": "<p>Can you use just <code>yarn</code> instead of <code>yarnpkg</code>?</p>\n\n<pre><code>exec \"yarn #{ARGV.join(\" \")}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "is_accepted": false, "score": 0, "last_activity_date": 1503433402, "creation_date": 1503433402, "answer_id": 45826356, "question_id": 45720650, "link": "https://stackoverflow.com/questions/45720650/react-on-rails-install-yarn-is-required-error/45826356#45826356", "title": "react_on_rails install: yarn is required error", "body": "<p>Not sure if one the following fixed it:</p>\n\n<pre><code>unset https_proxy\nunset http_proxy\n\nnpm config set proxy http://user:****@ip\nnpm config set https-proxy http://user:***@ip\n</code></pre>\n\n<p>After that yarn worked.</p>\n"}], "owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1503433402, "creation_date": 1502908189, "last_edit_date": 1503229473, "question_id": 45720650, "link": "https://stackoverflow.com/questions/45720650/react-on-rails-install-yarn-is-required-error", "title": "react_on_rails install: yarn is required error", "body": "<p>I am trying to setup react_on_rails for an existing rails 5.0 app as per the following instructions:\n<a href=\"https://github.com/shakacode/react_on_rails\" rel=\"noreferrer\">https://github.com/shakacode/react_on_rails</a></p>\n\n<ol>\n<li>gem \"react_on_rails\", \"8.0.0\"</li>\n<li>rails generate react_on_rails:install</li>\n</ol>\n\n<p>I get the following error:</p>\n\n<pre><code>ERROR: yarn is required. Please install it before continuing. https://yarnpkg.com/en/docs/install\n</code></pre>\n\n<p>now this is my yarn, npm and node path:</p>\n\n<pre><code>[user@server]$ which node\n/usr/bin/node\n[user@server]$ which npm\n/usr/bin/npm\n[user@server]$ which yarn\n~/.yarn/bin/yarn\n</code></pre>\n\n<p>How do i ensure it's using the appropriate yarn and help install react_on_rails?</p>\n\n<p>EDIT: This is my ~/.bashrc file:</p>\n\n<pre><code>export PATH=\"$HOME/.rbenv/bin:$PATH\"\neval \"$(rbenv init -)\"\n\n\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] &amp;&amp; \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n\nexport PATH=\"$PATH:$HOME/.yarn/bin\"\n</code></pre>\n\n<p>This is my /bin/yarn file under my app:</p>\n\n<pre><code>#!/usr/bin/env ruby\nVENDOR_PATH = File.expand_path('..', __dir__)\nDir.chdir(VENDOR_PATH) do\n  begin\n    exec \"yarnpkg #{ARGV.join(\" \")}\"\n  rescue Errno::ENOENT\n    $stderr.puts \"Yarn executable was not detected in the system.\"\n    $stderr.puts \"Download Yarn at https://yarnpkg.com/en/docs/install\"\n    exit 1\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1502903307, "post_id": 45719260, "comment_id": 78396911, "body": "Are you <b>sure</b> you are running Ruby 2.4.1? Since the method was only introduced in Ruby 2.4, earlier Ruby versions will raise a <code>NoMethodError</code>."}, {"owner": {"reputation": 83, "user_id": 5760232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KeypSj_8RKs/AAAAAAAAAAI/AAAAAAAAGJE/hDptpaOKezY/photo.jpg?sz=128", "display_name": "Joe Ercolino", "link": "https://stackoverflow.com/users/5760232/joe-ercolino"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1502903443, "post_id": 45719260, "comment_id": 78397001, "body": "In irb I&#39;ve got:  RUBY_VERSION  =&gt; &quot;2.4.1&quot;"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1502903627, "post_id": 45719260, "comment_id": 78397120, "body": "I can duplicate this...."}, {"owner": {"reputation": 83, "user_id": 5760232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KeypSj_8RKs/AAAAAAAAAAI/AAAAAAAAGJE/hDptpaOKezY/photo.jpg?sz=128", "display_name": "Joe Ercolino", "link": "https://stackoverflow.com/users/5760232/joe-ercolino"}, "edited": false, "score": 0, "creation_date": 1502903966, "post_id": 45719260, "comment_id": 78397329, "body": "How else can I verify the version?"}, {"owner": {"reputation": 83, "user_id": 5760232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KeypSj_8RKs/AAAAAAAAAAI/AAAAAAAAGJE/hDptpaOKezY/photo.jpg?sz=128", "display_name": "Joe Ercolino", "link": "https://stackoverflow.com/users/5760232/joe-ercolino"}, "edited": false, "score": 0, "creation_date": 1502904191, "post_id": 45719260, "comment_id": 78397470, "body": "Also:  <code>ruby -v</code> produces   <code>ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin15]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "edited": false, "score": 0, "creation_date": 1561658635, "post_id": 45719685, "comment_id": 100147531, "body": "<code>Dir.entries()</code> and <code>Dir.children()</code> are different: assuming you have testdir/test1 and testdir/.test2, <code>Dir.entries(&quot;testdir&quot;)</code> returns <code>[&quot;.&quot;, &quot;..&quot;, &quot;.test2&quot;, &quot;test1&quot;]</code> and <code>Dir.children(&quot;testdir&quot;)</code> returns <code>[&quot;.test2&quot;, &quot;test1&quot;]</code>."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "edited": false, "score": 0, "creation_date": 1561660972, "post_id": 45719685, "comment_id": 100148465, "body": "@michau And that  is exactly why I removed those two dot entries (the current directory <code>.</code> and the parent directory <code>..</code>) in my code example."}, {"owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "edited": false, "score": 0, "creation_date": 1561722154, "post_id": 45719685, "comment_id": 100166503, "body": "Aaah, I thought <code>[&quot;.&quot;, &quot;..&quot;]</code> was the result of the <code>entries</code> call, I didn&#39;t notice the subtraction. You&#39;re right, after subtracting <code>.</code> and <code>..</code>, the result will be exactly the same."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 13, "last_activity_date": 1552492343, "last_edit_date": 1552492343, "creation_date": 1502904429, "answer_id": 45719685, "question_id": 45719260, "link": "https://stackoverflow.com/questions/45719260/ruby-2-4-1-dir-children-dirname-returns-undefined-method-children-for-dir/45719685#45719685", "title": "Ruby 2.4.1 Dir.children( dirname ) returns &quot;undefined method `children&#39; for Dir:Class&quot;", "body": "<p>This seems to be some kind of documentation mess.</p>\n\n<p>The <code>Dir.children</code> method was introduced with <a href=\"https://bugs.ruby-lang.org/issues/11302\" rel=\"nofollow noreferrer\">Feature #11302</a> into Ruby and was <a href=\"https://github.com/ruby/ruby/commit/944c455b38f85c5fa1b91390d43d89b692e4c812\" rel=\"nofollow noreferrer\">committed to trunk</a> and eventually released with Ruby 2.5.0. However, it appears that the patch adding this method was not actually backported to Ruby 2.4 since <a href=\"https://github.com/ruby/ruby/blob/v2_4_1/dir.c\" rel=\"nofollow noreferrer\"><code>dir.c</code> of Ruby 2.4.1</a> doesn't mention the method. It's not immediately clear why the documentation for this method turned up at <a href=\"http://ruby-doc.org/\" rel=\"nofollow noreferrer\">http://ruby-doc.org/</a></p>\n\n<p>In any case, it appears you are yet out of luck with this method. You can however use the following equivalent code with your Ruby version:</p>\n\n<pre><code>Dir.entries('testdir') - [\".\", \"..\"]\n</code></pre>\n\n<p>It will return the exact same values as <code>Dir.children('testdir')</code> would in Ruby 2.5 and newer.</p>\n"}], "owner": {"reputation": 83, "user_id": 5760232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KeypSj_8RKs/AAAAAAAAAAI/AAAAAAAAGJE/hDptpaOKezY/photo.jpg?sz=128", "display_name": "Joe Ercolino", "link": "https://stackoverflow.com/users/5760232/joe-ercolino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 1, "accepted_answer_id": 45719685, "answer_count": 1, "score": 8, "last_activity_date": 1552492343, "creation_date": 1502902963, "last_edit_date": 1502905038, "question_id": 45719260, "link": "https://stackoverflow.com/questions/45719260/ruby-2-4-1-dir-children-dirname-returns-undefined-method-children-for-dir", "title": "Ruby 2.4.1 Dir.children( dirname ) returns &quot;undefined method `children&#39; for Dir:Class&quot;", "body": "<p>I'm new to Ruby and trying to learn it. I'm using the latest Ruby version (2.4.1) and the interactive Ruby Shell.</p>\n\n<p>I've come across the <code>children</code> method in the <code>Dir</code> class. I've tried the example <a href=\"http://ruby-doc.org/core-2.4.1/Dir.html#method-c-children\" rel=\"nofollow noreferrer\">from the documentation</a>:</p>\n\n<pre><code>Dir.children(\"testdir\")   #=&gt; [\"config.h\", \"main.rb\"]\n</code></pre>\n\n<p>but it doesn't seem to work, because I get the following message:</p>\n\n<pre><code>undefined method `children' for Dir:Class\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "heroku", "delayed-job"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1502902059, "post_id": 45718986, "comment_id": 78396222, "body": "You could split the CSV into several files, or simply use a Worker to actually parse the CSV and store the data and respond directly to the user that &quot;Your CSV is being parsed, come back in few minutes&quot;."}, {"owner": {"reputation": 13, "user_id": 3277176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0cc6a1180f44cd43c15cf12913f26a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3277176", "link": "https://stackoverflow.com/users/3277176/user3277176"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502902255, "post_id": 45718986, "comment_id": 78396324, "body": "tried that, sending the file to the worker causes an active record error since it is too large for the delayed jobs table"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1502903723, "post_id": 45718986, "comment_id": 78397185, "body": "My process is basically to have the controller save the file and do any operations that potentially involve enormous files in a background process / worker. If you parse the file line by line or in batch it should not cause an active record error"}], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 2, "last_activity_date": 1502902765, "creation_date": 1502902765, "answer_id": 45719210, "question_id": 45718986, "link": "https://stackoverflow.com/questions/45718986/how-to-best-import-and-process-very-large-csv-files-with-rails/45719210#45719210", "title": "How to best import and process very large csv files with rails", "body": "<ul>\n<li>to import csv faster, my suggestion is using gem smarter_csv, you can cek from their website <a href=\"https://github.com/tilo/smarter_csv\" rel=\"nofollow noreferrer\">tilo/smarter_csv</a> </li>\n<li>as stated from their site: > smarter_csv is a Ruby Gem for smarter importing of CSV Files as Array(s) of Hashes, suitable for direct processing with Mongoid or ActiveRecord, and parallel processing with Resque or Sidekiq</li>\n<li>I use this gem and combined with resque </li>\n</ul>\n\n<p>below is sample code to import file</p>\n\n<pre><code>  n = SmarterCSV.process(params[:file].path) do |chunk|\n    Resque.enqueue(ImportDataMethod, chunk)\n  end\n</code></pre>\n\n<p>after it read file, passed the data record to resque and then import it in background (if you using rails 4.2 above you can combine with rails active job)</p>\n"}], "owner": {"reputation": 13, "user_id": 3277176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0cc6a1180f44cd43c15cf12913f26a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3277176", "link": "https://stackoverflow.com/users/3277176/user3277176"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1662, "favorite_count": 0, "accepted_answer_id": 45719210, "answer_count": 1, "score": 1, "last_activity_date": 1502902765, "creation_date": 1502901890, "question_id": 45718986, "link": "https://stackoverflow.com/questions/45718986/how-to-best-import-and-process-very-large-csv-files-with-rails", "title": "How to best import and process very large csv files with rails", "body": "<p>I am building a rails app that I am deploying with Heroku, and I need to be able to import and process large csv files (5000+ lines).</p>\n\n<p>Doing it in the controller using the built in ruby csv parser takes over 30 seconds and causes the Heroku dyno to time out</p>\n\n<p>I was thinking of putting the csv into the database then processing it with a delayed_job but this method limits out at just over 4200 lines.</p>\n\n<p>I am using mysql and longtext for the column containing the file so the db should be able to handle it</p>\n\n<p>Any ideas for this use case?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1502902615, "post_id": 45718963, "comment_id": 78396517, "body": "Remember the way a number is rendered is rather arbitrary and internally it will always have more information than is shown. All floating point numbers are approximations when represented in decimal. If you need six places precisely then you need a fixed-point method like <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a> can provide."}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 1, "creation_date": 1502907239, "post_id": 45718963, "comment_id": 78399109, "body": "Rounding &quot;several hundred numbers&quot; should be relatively fast. On my machine rounding one thousand numbers took 1.5ms. So, it&#39;s probably fast enough for your needs."}, {"owner": {"reputation": 507, "user_id": 6484367, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8e9d26d6946fc918749adbefd5dd751c?s=128&d=identicon&r=PG&f=1", "display_name": "dsomel21", "link": "https://stackoverflow.com/users/6484367/dsomel21"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502907415, "post_id": 45718963, "comment_id": 78399198, "body": "@tadman, yep, you are right. I ended up doing a migration from integer to a decimal with a scale of 6 and max precision of 16.@Jared Beck, yeah, I don&#39;&#39;t know why I was worried."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1502908081, "post_id": 45718963, "comment_id": 78399530, "body": "If you got it working it&#39;s worth adding a self-answer with the code you used."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502936154, "post_id": 45718963, "comment_id": 78408783, "body": "Having a log of digits below the decimal point does not mean that it is accurate. It only means that it not a best fit for decimal expression."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1503893927, "post_id": 45718963, "comment_id": 78782063, "body": "If the sole answer is satisfactory, please consider selecting it."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1502936277, "creation_date": 1502936277, "answer_id": 45725615, "question_id": 45718963, "link": "https://stackoverflow.com/questions/45718963/is-there-a-more-efficient-way-of-generating-a-float-to-a-specific-decimal-value/45725615#45725615", "title": "Is there a more efficient way of generating a float to a specific decimal value in Ruby?", "body": "<p>What about this?</p>\n\n<pre><code>rand(1000000)/1000000.0\n#=&gt; 0.071203\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 6484367, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8e9d26d6946fc918749adbefd5dd751c?s=128&d=identicon&r=PG&f=1", "display_name": "dsomel21", "link": "https://stackoverflow.com/users/6484367/dsomel21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502936277, "creation_date": 1502901789, "question_id": 45718963, "link": "https://stackoverflow.com/questions/45718963/is-there-a-more-efficient-way-of-generating-a-float-to-a-specific-decimal-value", "title": "Is there a more efficient way of generating a float to a specific decimal value in Ruby?", "body": "<p>I basically want a float that is accurate to the <strong>sixth</strong> place after the decimal.</p>\n\n<p>Something like <code>0.123456</code></p>\n\n<p>This is what I tried to do: </p>\n\n<pre><code>irb(main):001:0&gt; rand = rand(1.000000..100.000000)\n=&gt; 97.63428182481212\n</code></pre>\n\n<p>But I obviously don't want it that precise, so I decided to do </p>\n\n<pre><code>irb(main):002:0&gt; rand = rand(1.000000..100.000000).round(6)\n=&gt; 12.944086\n</code></pre>\n\n<p>But now there's an extra step involved, when it seems like I should be able to do it another way. I am going to have to generate several hundred numbers, so I am not sure if I should screw it and just use <code>.round()</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "variables", "model"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502901544, "post_id": 45718839, "comment_id": 78395927, "body": "any instance variable (starting with <code>@</code>) defined in the controller should be available in the corresponding view(s) and partial(s). So if your action <code>new</code> defines the <code>@general_goal</code>, then in your <code>new</code> view you should be able to access to <code>@general_goal</code> (it could be <code>nil</code> though)."}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502901697, "post_id": 45718839, "comment_id": 78396016, "body": "I can access the @general_goal in the view with, <code>&lt;h3&gt;generalGoal&lt;&#47;h3&gt;  &lt;%= @general_goal %&gt;</code>  and it is not empty since this is the out put from the console <code>#&lt;Goal id: 6, date: &quot;2017-08-16 00:00:00&quot;, general_goal: #&lt;BigDecimal:7ff542eb67b8,&#39;0.5E3&#39;,9(18)&gt;, user_id: 3, created_at: &quot;2017-08-16 15:29:55&quot;, updated_at: &quot;2017-08-16 15:29:55&quot;&gt;</code>"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502901856, "post_id": 45718839, "comment_id": 78396113, "body": "Then what are you trying to achieve? It is not clear what you are asking"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502902075, "post_id": 45718839, "comment_id": 78396231, "body": "sorry @MrYoshiji I&#39;ve added more to the question, at the bottom"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502902875, "post_id": 45718839, "comment_id": 78396654, "body": "Its unclear what is <code>general_goal</code> by looking at <code>@general_goal.user.general_goal</code>. Is it an attribute in ``users table?"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502902973, "post_id": 45718839, "comment_id": 78396713, "body": "No it&#180;s an attribute in the goal table"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502903062, "post_id": 45718839, "comment_id": 78396760, "body": "So you want to fetch a <code>general_goal</code> of a <code>goal</code> for a specific user? Is that what you are trying to do?"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502903174, "post_id": 45718839, "comment_id": 78396819, "body": "Yes, please see my edit, I added schema.rb and goal.rb. I am basically asking, if the user sets the general goal to maybe &quot;5&quot; how can I grab that &quot;5&quot; from the database and assign it to a variable?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502903502, "post_id": 45718839, "comment_id": 78397033, "body": "As per your code, <code>&lt;%= goal.general_goal  %&gt;</code> should work. What it returns? Isn&#39;t it showing the correct value?"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502903767, "post_id": 45718839, "comment_id": 78397214, "body": "no its not working, not even if I do <code>&lt;%= @goal.general_goal %&gt; </code>or <code>&lt;%= @goals.general_goal %&gt; </code>   I can display the general_goal with the <code>each</code>loop... I wan&#180;t to be able to assign the general_goal value to a instance variable such as @general_goal"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1502906398, "post_id": 45718839, "comment_id": 78398686, "body": "maybe you should try to figure out how to get the data in rails console. It will look the same in the controller/view, except you pass data between the constants by assigning to instance variables."}, {"owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "edited": false, "score": 0, "creation_date": 1502906580, "post_id": 45718839, "comment_id": 78398774, "body": "Does your user model have <code>has_many :goals</code> relation defined in it?"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "reply_to_user": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "edited": false, "score": 0, "creation_date": 1502906650, "post_id": 45718839, "comment_id": 78398807, "body": "@LauraPaakkinen Yes it has <code>has_many :goals</code>"}, {"owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "edited": false, "score": 0, "creation_date": 1502907125, "post_id": 45718839, "comment_id": 78399043, "body": "I see 2 ways to access goals in the examples you have provided. In the beginning you have provided <code>user.general_goal</code> and later in the index action <code>current_user.goals</code> do both of them work?"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502907172, "post_id": 45718839, "comment_id": 78399074, "body": "nope neither of them works"}, {"owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "edited": false, "score": 0, "creation_date": 1502907232, "post_id": 45718839, "comment_id": 78399105, "body": "Can you provide the user model? Can you also describe what is not working? Are you getting and empty relation? Or some kind of error message?"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "reply_to_user": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "edited": false, "score": 0, "creation_date": 1502907682, "post_id": 45718839, "comment_id": 78399345, "body": "I edited the question @LauraPaakkinen, added user model and described the error messages"}, {"owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502908059, "post_id": 45718839, "comment_id": 78399524, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/152085/discussion-between-laura-paakkinen-and-codegirl\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 1, "creation_date": 1502962738, "post_id": 45724473, "comment_id": 78420683, "body": "Thank you @DaudiHell this code works, but it shows me the sum of all the <code>general_goal</code>, I changed the code to <code>current_general_goal = @current_user.goals(:general_goal).last          @general_goal =  (current_general_goal.nil? ? 0 : current_general_goal) </code>   but then it gives me this <code>#&lt;Goal:0x007fd4734aa818&gt;</code>in the view.... why is it not showing the last number instead of this <code>#&lt;Goal:0x007fd4734aa818&gt;</code>?"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502976210, "post_id": 45724473, "comment_id": 78430424, "body": "Ok I get it, you want the last <code>current_goal</code>from <code>current_user</code>. The way you changed the code it is showing the objects string in the output, I&#39;ll edit the answer."}], "tags": [], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "is_accepted": true, "score": 1, "last_activity_date": 1502976384, "last_edit_date": 1502976384, "creation_date": 1502926417, "answer_id": 45724473, "question_id": 45718839, "link": "https://stackoverflow.com/questions/45718839/accessing-data-from-model-in-ruby-on-rails-app/45724473#45724473", "title": "Accessing data from model in Ruby on rails app", "body": "<p>If I understand you correctly, You want to show the value of <code>:general_goal</code> for <code>current_user</code>? </p>\n\n<p>This might do the trick for you, just put this code in the <code>index</code>in the controller. I haven't tested it, but it might work.</p>\n\n<pre><code>current_general_goal = @current_user.goals.sum(:general_goal)     \n@general_goal =  current_general_goal.nil? ? 0 : current_general_goal\n</code></pre>\n\n<p>It checks if the :general_goal is nil, if so it displays 0, if not it displays the general goal value. </p>\n\n<p><strong>update</strong></p>\n\n<p>If you want the value from the last <code>general_goal</code>from the current user. You can add this code to your index view.</p>\n\n<pre><code>current_general_goal = @current_user.goals.last.general_goal\n@general_goal =  (current_general_goal.nil? ? 0 : current_general_goal) \n</code></pre>\n\n<p>Please let me know if this works for you</p>\n"}], "owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 45724473, "answer_count": 1, "score": 2, "last_activity_date": 1502976384, "creation_date": 1502901300, "last_edit_date": 1502907629, "question_id": 45718839, "link": "https://stackoverflow.com/questions/45718839/accessing-data-from-model-in-ruby-on-rails-app", "title": "Accessing data from model in Ruby on rails app", "body": "<p>In my app Current user sets his general goal through a form in the <code>index.html.erb</code></p>\n\n<p>now I want to bind that value to a instance variable and display this instance variable in the view.</p>\n\n<p>I'm rather new to ruby on rails so I'm not sure how to manage that.</p>\n\n<p>I have tried various types of code to access the data with out any luck.\nCan anyone help me with that?</p>\n\n<p>for example:</p>\n\n<pre><code>@general_goal = Goal.find(params[:id])\ngeneral_goal = @general_goal.user.general_goal\n</code></pre>\n\n<p>gives the error: <code>Couldn't find Goal with 'id'=</code>\nand</p>\n\n<pre><code>@general_goal = Goal.find(params[:general_goal])\n</code></pre>\n\n<p>also gives the error: <code>Couldn't find Goal with 'id'=</code></p>\n\n<p>this is the <code>goals_controller.rb</code></p>\n\n<pre><code>class GoalsController &lt; ApplicationController\n\n  before_action :set_goal, only: [:edit, :update, :show, :destroy]\n  #before_action :goal_owner, only: [ :edit, :update, :destroy]\n\n  def new\n    @goal = current_user.goals.build\n  end\n\n  def index\n    @Newgeneralgoal = Goal.new\n\n    @goals = current_user.goals.order(created_at: :desc).limit(5)   \n  end\n\n  def create \n    @goal = Goal.new(goal_params)\n    @goal.user_id = current_user.id\n\n    if (@goal.save)\n      redirect_to transaction_path(current_user), :notice =&gt; \"Goal has been saved successfully.\"\n    else\n      f.html { redirect_to \"\", notice: \"Error: Goal Not created!!\"}\n    end \n\n  end\n\n  def update\n    if @goal.update(goal_params)\n    flash[:success] = \"Goal was successfully updated\"\n    redirect_to goals_path(@goal)\n  else\n    render 'edit'\n  end       \n\n  def destroy\n    @goal.destroy\n    flash[:danger] = \"Goal was successfully destroyed\"\n    redirect_to goal_path(current_user) \n  end\n\n  private\n\n  def set_goal\n    @goal = Goal.find(params[:id])\n  end\n\n  def goal_params\n    params.require(:goal).permit(:user_id, :general_goal, :date)\n  end\nend\n</code></pre>\n\n<p>I can access the goal in the view with:</p>\n\n<pre><code>&lt;% @goals.each do |goal| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= goal.date.try(:strftime,\"%Y/%m/%d\")%&gt;&lt;/td&gt;                      \n    &lt;td&gt;&lt;%= goal.general_goal  %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>so I am basically asking, if the user sets the general goal to maybe \"5\" how can I grab that \"5\" from the database and assign it to a variable?</p>\n\n<p>here is the <code>schema.rb</code>for goals</p>\n\n<pre><code>create_table \"goals\", force: :cascade do |t|\n  t.datetime \"date\"\n  t.decimal  \"general_goal\"\n  t.integer  \"user_id\"\n  t.datetime \"created_at\",     null: false\n  t.datetime \"updated_at\",     null: false\nend\n</code></pre>\n\n<p>and here is the goal.rb model</p>\n\n<pre><code>class Goal &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>here is the user.rb model</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n # Include default devise modules. Others available are:\n # :confirmable, :lockable, :timeoutable and :omniauthable\n devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable\n\n     has_many :goals\n\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "certificate", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9404460, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/677bd16c9ee50023750cd41bccf2842f?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/9404460/kyle"}, "is_accepted": false, "score": 0, "last_activity_date": 1519446479, "creation_date": 1519446479, "answer_id": 48959370, "question_id": 45718565, "link": "https://stackoverflow.com/questions/45718565/ruby-connect-with-ssl-and-authenticate-via-client-certificate-sslv3-alert-ba/48959370#48959370", "title": "Ruby - Connect with SSL and authenticate via client certificate - sslv3 alert bad certificate", "body": "<pre><code># mypki will prompt you for certificates\nrequire 'mypki'\n\n# faraday will use certificates from mypki\nrequire 'faraday'\n\nfaraday = Faraday::Connection.new 'https://example-site.com'\nfaraday.get '/login_path'\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5858344, "user_type": "registered", "profile_image": "https://graph.facebook.com/1113533308679079/picture?type=large", "display_name": "Matheus Porto", "link": "https://stackoverflow.com/users/5858344/matheus-porto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519446479, "creation_date": 1502900323, "question_id": 45718565, "link": "https://stackoverflow.com/questions/45718565/ruby-connect-with-ssl-and-authenticate-via-client-certificate-sslv3-alert-ba", "title": "Ruby - Connect with SSL and authenticate via client certificate - sslv3 alert bad certificate", "body": "<p>I'm trying to connect a webcrawler that accesses a certain site via SSL and queries my data on that site. The authentication of this site is via a self-signed Digital Certificate. At the moment I want to access the site, I upload this certificate in .pfx format to my api, convert it to .pem, and when I try to access the site with this certificate, the response comes with status 403 (forbidden ).\nHowever, when I try to access the site through a browser with the certificate in .pfx format I usually get it.\nI already tried using Mechanize, and it worked for a while (until a few months ago it worked), but then it started to give the error:\n<code>SSL_connect returned = 1 errno = 0 state = SSLv3 read finished A: sslv3 alert bad certificate</code>\nThe site is old, it does not receive updates frequently.\nAfter that I already tried to use the net / http lib and the error persisted, I tried to use the httprb gem and lastly I tried with Faraday. All attempts ended either in that error quoted above or with the response status == 403.\nWhat can I do to be able to connect? Is there something wrong with my script? Is it missing any information I need to get through?</p>\n\n<p>Code:</p>\n\n<pre><code># Faraday customs method:\n\nclass FaradayHttp\n  def with_openssl\n    system \"openssl pkcs12 -in my-certificate-path -out certificate-output-path -nodes -password pass:certificate-password\"\n\n    def cert_object\n      OpenSSL::X509::Certificate.new File.read(\"certificate-output-path\")\n    end\n\n    # create PKey\n    def key_object\n      OpenSSL::PKey.read File.read(\"certificate-output-path\")\n    end\n\n\n    faraday = Faraday::Connection.new 'https://example-site.com',\n    :ssl =&gt; {\n      certificate: cert_object,\n      private_key: key_object,\n      version: :SSLv3,\n      verify: false\n    }\n    faraday\n  end\nend\n\n# Controller that try to connect with the ssl server:\n\nagent = FaradayHttp.new.with_openssl\npage = agent.get '/login_path'\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502902859, "post_id": 45719028, "comment_id": 78396647, "body": "Nothing is happening. The create method is working correctly. But, I have to refresh the page to see the post. The slideDown effect is not firing off, even though I made the changes that you requested."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502902949, "post_id": 45719028, "comment_id": 78396704, "body": "@JohnnyC Can you update the question with the server logs that has fired?"}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502903631, "post_id": 45719028, "comment_id": 78397122, "body": "I added &lt;% if @-post.save @-post = Post.new %&gt; to refresh the form. It went to the update action without it."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502903765, "post_id": 45719028, "comment_id": 78397211, "body": "@JohnnyC Ok now I understood. But there are better ways handling that. First can you update the question with entire logs that appeared in the server?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502904764, "post_id": 45719028, "comment_id": 78397779, "body": "@JohnnyC Well there is an error in fetching the partial that is why the slideDown isn&#39;t fired. I will update my answer."}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502905138, "post_id": 45719028, "comment_id": 78398003, "body": "It may be the way I am rendering the partial templates for the different post. I just realized that &lt;%= render partial: &quot;posts/#{post.post_type}&quot;, locals: {post: post} %&gt;. I don&#39;t exactly know yet."}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502906464, "post_id": 45719028, "comment_id": 78398720, "body": "It no longer recognizes the method from my user class. I edited the post to show you that  ActionView::Template::Error (undefined method `user_full_name&#39; for nil:NilClass)"}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1502907923, "post_id": 45719028, "comment_id": 78399459, "body": "I believe that I cannot use AJAX to render a multi-partial view link such as this one. I may need an if else or case statement of some sort to get the partial view types. &lt;%= render partial: &quot;posts/#{post.post_type}&quot;, locals: { post: post  %&gt;"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1502906842, "last_edit_date": 1502906842, "creation_date": 1502902033, "answer_id": 45719028, "question_id": 45718514, "link": "https://stackoverflow.com/questions/45718514/rails-ajax-loading-posts-after-submitting-form-in-view/45719028#45719028", "title": "Rails - AJAX loading posts after submitting form in view", "body": "<p>The problem is you referenced the <code>id</code> <strong>wrongly</strong>. You have defined the <code>div</code> with <code>id</code> as <code>posts-items</code>, but in <code>create.js.erb</code> you are using <code>post-items</code> which is incorrect, so <strong>JS</strong> unable to find the selector with <code>post-items</code> which is the reason for the problem. Changing it to <code>posts-items</code> should fix your problem.</p>\n\n<pre><code>#create.js.erb\n&lt;% if @post.save\n  @post = Post.new\n%&gt;\n  $('#post-index-form').html('&lt;%= escape_javascript(render 'posts/form') %&gt;');\n  $('#post-text-area').val('');\n  $('#posts-items').html('&lt;%= escape_javascript(render 'posts/post') %&gt;');\n  $('#posts-items').slideDown(350);\n&lt;% end %&gt;\n</code></pre>\n\n<p>Also, this part of the code.</p>\n\n<pre><code>&lt;% if @post.save\n  @post = Post.new\n%&gt;\n</code></pre>\n\n<p>seems strange. I don't see any reason including it in <code>create.js.erb</code> unless there is a use. So remove it</p>\n\n<pre><code>#create.js.erb\n$('#post-index-form').html('&lt;%= escape_javascript(render 'posts/form') %&gt;');\n$('#post-text-area').val('');\n$('#posts-items').html('&lt;%= escape_javascript(render 'posts/post') %&gt;');\n$('#posts-items').slideDown(350);\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>ActionView::Template::Error (undefined local variable or method `post'\n  for #&lt;#&lt;Class:0x18937128>:0x1a9f6688></p>\n</blockquote>\n\n<p>Rails unable to find the <code>post</code> variable defined in <code>_post.html.erb</code> in this situation. Send it as a local variable in the partial. The final <code>create.js.erb</code> should like this</p>\n\n<pre><code>#create.js.erb\n$('#post-index-form').html('&lt;%= escape_javascript(render 'posts/form') %&gt;');\n$('#post-text-area').val('');\n$('#posts-items').html('&lt;%= escape_javascript(render 'posts/post', post: @post) %&gt;');\n$('#posts-items').slideDown(350);\n</code></pre>\n\n<p>Also, change <code>@post</code> to <code>Post.new</code> in the <code>form</code> so it won't conflict with <code>@post</code> in <code>create</code> action and always create a form for new instance</p>\n\n<pre><code>&lt;%= simple_form_for(Post.new, id: '', multipart: true, remote: true) do |f| %&gt;\n</code></pre>\n\n<blockquote>\n  <p>ActionView::Template::Error (undefined method `user_full_name' for\n  nil:NilClass)</p>\n</blockquote>\n\n<p>This error is because that particular post doesn't have an associated user to it, so it errors out in this line <code>&lt;%= post.user.user_full_name %&gt;</code> To quickly resolve the error, use <code>try</code> method</p>\n\n<pre><code>&lt;%= post.try(:user).user_full_name %&gt;\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502908040, "creation_date": 1502900147, "last_edit_date": 1502908040, "question_id": 45718514, "link": "https://stackoverflow.com/questions/45718514/rails-ajax-loading-posts-after-submitting-form-in-view", "title": "Rails - AJAX loading posts after submitting form in view", "body": "<p>I'm having trouble with loading/populating the view with posts after submitting them through AJAX. The form itself is firing off and inserting the posts into the db. To be more clear, I need to load the posts after submission in the container below the post with JQuery slideDown. I have a normal post/shared post/commented post, partial render in the index action as well. </p>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;div class=\"col-md-5\"&gt;\n      &lt;div class=\"posts-feed-bg\"&gt;\n        &lt;div id=\"post-index-form\"&gt;\n          &lt;%= render 'posts/form' %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"post-textarea-bottom-border\"&gt;&lt;/div&gt;\n        &lt;div class=\"post-feed-container\" id=\"posts-items\"&gt;\n          &lt;% @posts.each do |post| %&gt;\n              &lt;%= render partial: \"posts/#{post.post_type}\", locals: {post: post} %&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>create.js.erb</p>\n\n<pre><code>&lt;% if @post.save\n      @post = Post.new\n%&gt;\n    $('#post-index-form').html('&lt;%= escape_javascript(render 'posts/form') %&gt;');\n    $('#post-text-area').val('');\n    $('#post-items').html('&lt;%= escape_javascript(render 'posts/post') %&gt;');\n    $('#post-items').slideDown(350);\n    &lt;% end %&gt;\n</code></pre>\n\n<p>_post.html.erb</p>\n\n<pre><code>  &lt;div class=\"post-container\"&gt;\n    &lt;%= post.user.username %&gt;\n    &lt;%= link_to post.title, post %&gt;\n    &lt;%= post.body %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>posts_controller.rb</p>\n\n<pre><code>def index\n        following_ids = current_user.following_users.map(&amp;:id)\n        following_ids &lt;&lt; current_user.id\n        @posts = Post.where(user_id: following_ids).order('created_at DESC').paginate(page: params[:page])\n        @users = User.same_background_focus_as(current_user).paginate :page =&gt; params[:page], :per_page =&gt; 5\n        @post = Post.new\n      end\n\n def create\n    @post = current_user.posts.build(post_params)\n\n    respond_to do |format|\n      if @post.save\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\n        format.json { render :show, status: :created, location: @post }\n        format.js\n      else\n        format.html { render :new }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;%= simple_form_for(@post, id: '', multipart: true, remote: true) do |f| %&gt;\n        &lt;%= f.error_notification %&gt;\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"col-6 emoji-picker-container post-textarea\"&gt;\n            &lt;%= f.input :body_text, class: 'form-control', label: false, id: 'post-text-area' %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"col-md-5\"&gt;\n            &lt;%= f.button :submit, class: 'btn btn-outline-success' %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Server Log After Submitting Form</p>\n\n<pre><code>Started POST \"/posts\" for 127.0.0.1 at 2017-08-16 13:25:25 -0400\nProcessing by PostsController#create as JS\n  Parameters: {\"utf8\"=&gt;\"\u00e2\u0153\u201c\", \"post\"=&gt;{\"body_text\"=&gt;\"AJAX\"}, \"commit\"=&gt;\"Create Post\"}\n  User Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 4], [\"LIMIT\", 1]]\n   (1.0ms)  BEGIN\n  SQL (174.6ms)  INSERT INTO \"posts\" (\"body_text\", \"user_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"body_text\", \"AJAX\"], [\"user_id\", 4], [\"created_at\", \"2017-08-16 17:25:26.201583\"], [\"updated_at\", \"2017-08-16 17:25:26.201583\"]]\n   (0.5ms)  COMMIT\n  Rendering posts/create.js.erb\n   (1.0ms)  BEGIN\n   (0.0ms)  COMMIT\n  Rendered posts/_form.html.erb (8.0ms) [cache miss]\n  Rendered posts/_post.html.erb (1273.9ms)\n  Rendered posts/create.js.erb (1366.9ms)\nCompleted 500 Internal Server Error in 2282ms (ActiveRecord: 178.1ms)\n\n\n\nActionView::Template::Error (undefined local variable or method `post' for #&lt;#&lt;Class:0x18937128&gt;:0x1a9f6688&gt;\nDid you mean?  @post\n               post_url):\n    2:   &lt;div class=\"media\" style=\"padding-bottom: 2em;\"&gt;\n    3:     &lt;img class=\"d-flex align-self-start mr-3 purple-rounded rounded\" src=\"http://via.placeholder.com/60x60\"&gt;\n    4:     &lt;div class=\"media-body post-user-name\"&gt;\n    5:       &lt;h5&gt;&lt;%= fa_icon 'user' %&gt; &lt;%= post.user.user_full_name %&gt;&lt;%= link_to 'Delete', post_path(post), remote: true, method: :delete, data: {confirm: \"You sure?\"} if current_user == post.user %&gt; &lt;/h5&gt;\n    6:       &lt;p&gt;&lt;%= post.body_text %&gt; &lt;/p&gt;\n    7:     &lt;/div&gt;\n    8:   &lt;/div&gt;\n\napp/views/posts/_post.html.erb:5:in `_app_views_posts__post_html_erb__960034244_222460104'\napp/views/posts/create.js.erb:9:in `_app_views_posts_create_js_erb__1048995870_223328388'\n</code></pre>\n\n<p>New Error After making changes</p>\n\n<pre><code>ActionView::Template::Error (undefined method `user_full_name' for nil:NilClass):\n    2:   &lt;div class=\"media\" style=\"padding-bottom: 2em;\"&gt;\n    3:     &lt;img class=\"d-flex align-self-start mr-3 purple-rounded rounded\" src=\"http://via.placeholder.com/60x60\"&gt;\n    4:     &lt;div class=\"media-body post-user-name\"&gt;\n    5:       &lt;h5&gt;&lt;%= fa_icon 'user' %&gt; &lt;%= post.user.user_full_name %&gt;&lt;%= link_to 'Delete', post_path(post), remote: true, method: :delete, data: {confirm: \"You sure?\"} if current_user == post.user %&gt; &lt;/h5&gt;\n    6:       &lt;p&gt;&lt;%= post.body_text %&gt; &lt;/p&gt;\n    7:     &lt;/div&gt;\n    8:   &lt;/div&gt;\n\napp/views/posts/_post.html.erb:5:in `_app_views_posts__post_html_erb__960034244_199162944'\napp/views/posts/create.js.erb:9:in `_app_views_posts_create_js_erb__1048995870_199612656'\n</code></pre>\n\n<p>method for partial view changer\n post.rb</p>\n\n<pre><code>def post_type\n    if post_id? &amp;&amp; body_text?\n      \"quote_share\"\n    elsif post_id?\n      \"share\"\n    else\n      \"post\"\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1502899036, "post_id": 45718142, "comment_id": 78394444, "body": "<code>app&#47;services</code>."}, {"owner": {"reputation": 479, "user_id": 4948150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WuAlE.jpg?s=128&g=1", "display_name": "Leo Much", "link": "https://stackoverflow.com/users/4948150/leo-much"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1502973953, "post_id": 45718142, "comment_id": 78428617, "body": "i second @Anthony, you can even have subfolders in the services folder. Note, as you put your logic into a service, it is also good not to have all your logic in one service class, each service should have a single responisbility...you could have a service class to create data, and another for getting data. For further reference you can also check out this <a href=\"http://blog.arkency.com/2013/09/services-what-they-are-and-why-we-need-them/\" rel=\"nofollow noreferrer\">link</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1502899603, "post_id": 45718320, "comment_id": 78394806, "body": "I often add a class method for convenience: <code>def self.perform(args); new(args).perform; end</code>. This allows a client to call the class in a more natural style: <code>RegisterUser.perform(args)</code>."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1502899929, "post_id": 45718320, "comment_id": 78394997, "body": "You might also look in to the <a href=\"https://github.com/collectiveidea/interactor\" rel=\"nofollow noreferrer\">interactor gem</a>, either to adopt it or just to learn from people who have thought a lot about service classes."}, {"owner": {"reputation": 405, "user_id": 4844496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0c346134010553b980e6e727ff78f43?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4844496/jason"}, "edited": false, "score": 0, "creation_date": 1502900665, "post_id": 45718320, "comment_id": 78395431, "body": "Thanks for your input, so would I still call the module method in <code>seeds.rb</code>?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502900784, "post_id": 45718320, "comment_id": 78395510, "body": "It depends on when you want this to happen. If you want to seed you DB with that data, then yes. If you want to make sure it exists every time the rails environnement is loaded, then it could be in an initializer (but it would have to handle the possible duplicates)."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1502929607, "post_id": 45718320, "comment_id": 78407380, "body": "Make sure you remove the api_key from the code as well and use an ENV  var."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 0, "last_activity_date": 1502899475, "creation_date": 1502899475, "answer_id": 45718320, "question_id": 45718142, "link": "https://stackoverflow.com/questions/45718142/how-to-refactor-code-into-a-service-class/45718320#45718320", "title": "How to refactor code into a service class", "body": "<p>Yes, you can create an <code>app/services/</code> folder.</p>\n\n<p>Some comments I have (opinion-based for most of them) on your code:</p>\n\n<ul>\n<li>A service class usually define the instance method <code>perform</code>, so you use it like this: <code>RegisterUser.new(some, args).perform</code></li>\n<li>Your current <code>ApiService</code> only contains class methods, so you don't need to instantiate that class. This is the purpose of a <code>module</code>, which cannot be instantiated but just provide methods.</li>\n<li>I would create a constant out of the url in your service object, like <code>URL = \"https://api.themoviedb.org [...]\".freeze</code> and use it then.</li>\n<li>several methods could be <code>private</code></li>\n<li>the class/module name should be an action like <code>CreateUser</code>, <code>SendWelcomeEmail</code>, etc. Your current service object could be named <code>CreateMoviesFromJSONFeed</code></li>\n</ul>\n"}], "owner": {"reputation": 405, "user_id": 4844496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0c346134010553b980e6e727ff78f43?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4844496/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1502899682, "creation_date": 1502898882, "last_edit_date": 1502899682, "question_id": 45718142, "link": "https://stackoverflow.com/questions/45718142/how-to-refactor-code-into-a-service-class", "title": "How to refactor code into a service class", "body": "<p>I have logic in my model that I think would better be fit into a service class. It grabs a list of movies from an API. Ideally, I'd like this service class to do the same and seed the database. Currently, I call <code>Movie.create_all_from_api</code> in the <code>seeds.rb</code> file. I'm new to Rails so I'm wondering where to put this service class and where I should call the service. Do I put it in a <code>/app/service</code> folder?</p>\n\n<p><strong>Movie.rb</strong></p>\n\n<pre><code>class Movie &lt; ApplicationRecord\n   require 'rest_client'\n   has_many :reviews\n\n   def self.create_all_from_api\n      moviedata = retrieve_results\n      moviedata['results'].each do |m|\n        Movie.create(title: m['title'], release: m['release_date'], genre: m['genre'])\n      end\n   end\n\n   def self.get_data(url)\n      RestClient.get(url, { :content_type =&gt; :json})\n   end\n\n   def self.retrieve_results\n      url = \"https://api.themoviedb.org/3/movie/popular?page=1&amp;language=en-US&amp;api_key=s0m3n1c3k3y\"\n      JSON.parse(get_data(url))\n   end\n\nend\n</code></pre>\n\n<p>My proposed service class</p>\n\n<pre><code>class ApiService\n   require 'rest_client'\n   def self.create_all_from_api\n      moviedata = retrieve_results\n      moviedata['results'].each do |m|\n         Movie.create(title: m['title'], release: m['release_date'], genre: m['genre'])\n      end\n   end\n\n   def self.get_data(url)\n      RestClient.get(url, { :content_type =&gt; :json})\n   end\n\n   def self.retrieve_results\n      url = \"https://api.themoviedb.org/3/movie/popular?page=1&amp;language=en-US&amp;api_key=s0m3n1c3k3y\"\n      JSON.parse(get_data(url))\n   end\nend\n</code></pre>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby", "database"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1502898592, "post_id": 45717933, "comment_id": 78394100, "body": "While you&#39;re largely correct here, there&#39;s no guarantee the <code>id</code> value is an integer. The model could use a string key here."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502899053, "post_id": 45717933, "comment_id": 78394455, "body": "...But it would be <b>very</b> unusual for the user to be able to choose the value of the <code>id</code> field! I&#39;ve never head of a scenario where someone&#39;s set the primary key to <code>&quot;; drop table users;--</code>!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502899151, "post_id": 45717933, "comment_id": 78394513, "body": "<i>&quot;which makes Rails sanitize the input for you&quot;</i> -- As you can see from the SQL, Rails has <i>parameterised</i> the values rather than sanitising them."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 1, "last_activity_date": 1502899773, "last_edit_date": 1502899773, "creation_date": 1502898274, "answer_id": 45717933, "question_id": 45717782, "link": "https://stackoverflow.com/questions/45717782/safe-better-sql-query-with-ruby-on-rails/45717933#45717933", "title": "Safe/Better SQL Query with Ruby on Rails", "body": "<p>Yes, they are both safe regarding the SQL injection for several reasons: </p>\n\n<ol>\n<li>the variables passed to it is the result of calling <code>id</code> on a User object and will always be either <code>nil</code> or an <code>integer</code> and will never be a string like <code>1;DELETE FROM users</code>. </li>\n<li>the variables are given as arguments to the <code>where</code> method, which makes Rails parameterise or sanitize the input for you. If you did some direct string interpolation like <code>User.where(\"name = '#{params[:search]}'\")</code> and the end-user submitted <code>bla';delete from users'</code> then yeah, SQL injection. </li>\n</ol>\n\n<p>The best option for you is to use the <code>.or</code> version which does not use any hard-coded SQL code. It just pass ruby code to the DB adapter you defined and ask it to translate it to SQL.</p>\n"}], "owner": {"reputation": 387, "user_id": 8152465, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/17b78615d8f648d8b9745b530b880422?s=128&d=identicon&r=PG&f=1", "display_name": "rod", "link": "https://stackoverflow.com/users/8152465/rod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 45717933, "answer_count": 1, "score": 1, "last_activity_date": 1502899773, "creation_date": 1502897880, "last_edit_date": 1502898565, "question_id": 45717782, "link": "https://stackoverflow.com/questions/45717782/safe-better-sql-query-with-ruby-on-rails", "title": "Safe/Better SQL Query with Ruby on Rails", "body": "<p>I wrote two queries doing the same thing, but result on console log is different. Which is better? Are both safe from <code>SQL</code> injection?</p>\n\n<pre><code>Order.where(user_id: current_user.id).or(Order.where(seller_id: current_user.id))\n</code></pre>\n\n<p>Log: </p>\n\n<pre><code>Order Load (0.3ms)\n  SELECT \"orders\".*\n  FROM \"orders\"\n  WHERE (\"orders\".\"user_id\" = ? OR \"orders\".\"seller_id\" = ?)\n  ORDER BY \"orders\".\"created_at\" DESC\n  [[\"user_id\", 1], [\"seller_id\", 1]]\n</code></pre>\n\n<hr>\n\n<pre><code>Order.where(\"user_id = ? OR seller_id = ?\", current_user.id, current_user.id)\n</code></pre>\n\n<p>Log: </p>\n\n<pre><code>Order Load (0.3ms)\n  SELECT \"orders\".*\n  FROM \"orders\"\n  WHERE (user_id = 1 OR seller_id = 1)\n  ORDER BY \"orders\".\"created_at\" DESC\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502897846, "post_id": 45717606, "comment_id": 78393561, "body": "Is there any code in your model / included modules in that model that could remove those <code>crop_*</code> attributes?"}, {"owner": {"reputation": 83, "user_id": 4756520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11b7a881b23761ce0482fd5779a86d1f?s=128&d=identicon&r=PG&f=1", "display_name": "MostXlent1", "link": "https://stackoverflow.com/users/4756520/mostxlent1"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502899211, "post_id": 45717606, "comment_id": 78394558, "body": "I&#39;ve added my model to the bottom of the question. I don&#39;t think there is anything removing them, but I&#39;m very new to Ruby/Rails so I&#39;m not entirely sure. Thanks for the response."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1502899636, "post_id": 45717606, "comment_id": 78394828, "body": "You should not use <code>attr_accessor</code>. It defines getter/setter methods for new object attributes that are not stored in the database. Remove that line and you should be fine."}, {"owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502900443, "post_id": 45717606, "comment_id": 78395303, "body": "The problem appears to be that the new crop info isn&#39;t being passed to the uploader - so <code>recreate_versions!</code> won&#39;t actually change anything.  Can you post how the uploader determines the version sizes?  Are these crop fields supposed to be saved in the database (as @MrYoshiji is presuming)?"}, {"owner": {"reputation": 83, "user_id": 4756520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11b7a881b23761ce0482fd5779a86d1f?s=128&d=identicon&r=PG&f=1", "display_name": "MostXlent1", "link": "https://stackoverflow.com/users/4756520/mostxlent1"}, "edited": false, "score": 0, "creation_date": 1502901485, "post_id": 45717606, "comment_id": 78395897, "body": "Thank you very much! I had that line in there from a previous tutorial and thought it was needed. Thanks for clearing that up!"}], "owner": {"reputation": 83, "user_id": 4756520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11b7a881b23761ce0482fd5779a86d1f?s=128&d=identicon&r=PG&f=1", "display_name": "MostXlent1", "link": "https://stackoverflow.com/users/4756520/mostxlent1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502899168, "creation_date": 1502897341, "last_edit_date": 1502899168, "question_id": 45717606, "link": "https://stackoverflow.com/questions/45717606/rails-form-isnt-updating-all-fields", "title": "Rails form isn&#39;t updating all fields", "body": "<p>I'm back with another Rails question. I have a form that is used for updating a user's profile, and part of it has a profile image for upload. I also have some cropping happening, so I am passing along some cropping information in hidden fields (crop_x, crop_y, crop_w, crop_h).</p>\n\n<p>Here is what seems to be happening in the log when I submit the form:</p>\n\n<pre><code>Started PATCH \"/talent_profiles/5\" for 127.0.0.1 at 2017-08-16 10:13:45 -0500\nProcessing by TalentProfilesController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"JO5VpUzKofGkNtf61LlfhzR3QbhI0GYuvyX5+Ev8lky272jkc7+ZpwnyRw2wZY4AIoWZlhZGvliGfSLvmXkKsw==\", \"talent_profile\"=&gt;{\"profile_image\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007fb277003198 @tempfile=#&lt;Tempfile:/var/folders/4b/ft8tw3cj0fv77lg1b8mhn72r0000gn/T/RackMultipart20170816-23354-1wjo797.png&gt;, @original_filename=\"Home.png\", @content_type=\"image/png\", @headers=\"Content-Disposition: form-data; name=\\\"talent_profile[profile_image]\\\"; filename=\\\"Home.png\\\"\\r\\nContent-Type: image/png\\r\\n\"&gt;, \"crop_x\"=&gt;\"622.0916920162501\", \"crop_y\"=&gt;\"2175.4168294233164\", \"crop_w\"=&gt;\"632.2108016602303\", \"crop_h\"=&gt;\"632.2108016602303\", \"first_name\"=&gt;\"Bob\", \"last_name\"=&gt;\"Bobson\"}, \"commit\"=&gt;\"Save Changes\", \"id\"=&gt;\"5\"}\n  TalentProfile Load (0.2ms)  SELECT  \"talent_profiles\".* FROM \"talent_profiles\" WHERE \"talent_profiles\".\"id\" = $1 LIMIT $2  [[\"id\", 5], [\"LIMIT\", 1]]\n   (0.1ms)  BEGIN\n  SQL (0.5ms)  UPDATE \"talent_profiles\" SET \"profile_image\" = $1, \"updated_at\" = $2 WHERE \"talent_profiles\".\"id\" = $3  [[\"profile_image\", \"Home.png\"], [\"updated_at\", \"2017-08-16 15:13:46.061927\"], [\"id\", 5]]\n   (6.1ms)  COMMIT\nRedirected to http://localhost:3000/talent_profiles/5\nCompleted 302 Found in 1064ms (ActiveRecord: 6.8ms)\n</code></pre>\n\n<p>As you can see, it is sending along the cropping information. However, on running @profile.update_attributes(talent_profile_update_params), it will never update the crop fields on the talent_profile. I have :crop_x, :crop_y, etc. added to the talent_profile_update_params like so:</p>\n\n<pre><code>def talent_profile_update_params\n        params.require(:talent_profile).permit(:first_name, :last_name, :profile_image, :remove_profile_image, :crop_x, :crop_y, :crop_w, :crop_h)\nend\n</code></pre>\n\n<p>In case this helps, here is the starting line of my form:</p>\n\n<pre><code>&lt;%= form_for(@profile,:html=&gt;{:id=&gt;\"update-profile\",:multipart =&gt; true}) do |f| %&gt;\n</code></pre>\n\n<p>Do any of you have any ideas why these fields aren't being updated, even though they are allowed in the talent_profile_update_params? I'm going a little crazy...</p>\n\n<p>UPDATE: Here is my model:</p>\n\n<pre><code>class TalentProfile &lt; ApplicationRecord\n    belongs_to :user\n    mount_uploader :profile_image, ProfileImageUploader\n    attr_accessor :crop_x, :crop_y, :crop_w, :crop_h\n    validates :profile_image, file_size: { less_than: 5.megabytes }\n    after_update :crop_profile_image\n\n    def crop_profile_image\n        if crop_x.present?\n            profile_image.recreate_versions!\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "connect"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 1, "creation_date": 1502894643, "post_id": 45716506, "comment_id": 78391294, "body": "<code>conn.close</code> should work"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502897469, "post_id": 45716506, "comment_id": 78393304, "body": "IIRC, you can pass a block, i.e. <code>PG.connect(...) { |conn| ... }</code> and the connection will be closed automatically afterwards."}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 5808721, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/73475d222139b2eb3117f416d1fe97c2?s=128&d=identicon&r=PG&f=1", "display_name": "RalphShnelvar", "link": "https://stackoverflow.com/users/5808721/ralphshnelvar"}, "edited": false, "score": 0, "creation_date": 1502916897, "post_id": 45716696, "comment_id": 78403589, "body": "Where is this documented?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 447, "user_id": 5808721, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/73475d222139b2eb3117f416d1fe97c2?s=128&d=identicon&r=PG&f=1", "display_name": "RalphShnelvar", "link": "https://stackoverflow.com/users/5808721/ralphshnelvar"}, "edited": false, "score": 0, "creation_date": 1502917623, "post_id": 45716696, "comment_id": 78403880, "body": "You can see the link in my answer"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1502896472, "last_edit_date": 1502896472, "creation_date": 1502894713, "answer_id": 45716696, "question_id": 45716506, "link": "https://stackoverflow.com/questions/45716506/pgconn-connect-where-is-disconnect/45716696#45716696", "title": "PGconn.connect .... where is disconnect?", "body": "<p>You can use <a href=\"http://www.rubydoc.info/gems/pg/PG/Connection#finish-instance_method\" rel=\"nofollow noreferrer\"><code>#finish</code></a> or <code>#close</code>, they're just alias' for the same thing.</p>\n"}, {"tags": [], "owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "is_accepted": false, "score": 3, "last_activity_date": 1502894778, "creation_date": 1502894778, "answer_id": 45716720, "question_id": 45716506, "link": "https://stackoverflow.com/questions/45716506/pgconn-connect-where-is-disconnect/45716720#45716720", "title": "PGconn.connect .... where is disconnect?", "body": "<p><code>.close()</code> can be used to close connection. Used <code>ensure</code> to make sure even after exception it will close database connection.</p>\n\n<pre><code>begin\n   conn = PGconn.connect(\"localhost\", 5432,\"\",\"\",\"db_development\",\"SomePostgresRole01\",\"SomePassword\")\nrescue PG::Error =&gt; e\n    puts e.message     \nensure\n    conn.close if conn\nend\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 5808721, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/73475d222139b2eb3117f416d1fe97c2?s=128&d=identicon&r=PG&f=1", "display_name": "RalphShnelvar", "link": "https://stackoverflow.com/users/5808721/ralphshnelvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1502896472, "creation_date": 1502894219, "question_id": 45716506, "link": "https://stackoverflow.com/questions/45716506/pgconn-connect-where-is-disconnect", "title": "PGconn.connect .... where is disconnect?", "body": "<p><strong>Environment:</strong></p>\n\n<p>psql (PostgreSQL) 9.6.3\nRails 5.1.1\nRuby 2.4.1p111</p>\n\n<p><strong>Question:</strong></p>\n\n<p>I may have a large group of (Devise) users each of whom is a separate Postgres user, e.g. SomePostgresRole01, SomePostgresRole02, etc.</p>\n\n<p>I can successfully do:</p>\n\n<pre><code>conn = PGconn.connect(\"localhost\", 5432,\"\",\"\",\"db_development\",\"SomePostgresRole01\",\"SomePassword\")\n</code></pre>\n\n<p>I cannot find a conn.disconnect method.  Does such functionality exist?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oop", "architecture"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502896514, "post_id": 45716482, "comment_id": 78392604, "body": "<b>Observers</b>: no, they are deprecated and it is difficult to find out if an object is observed. <b>Registration service</b> (service object): definitely! If you have this pattern, you can simply create other service objects that will be called in that Registration Service (ex: in <code>RegistrationService#perform</code> you could call <code>UserRegistration::SendWelcomeEmail.new(self.user).perform if self.user.allow_email_reception?</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "edited": false, "score": 0, "creation_date": 1502899773, "post_id": 45716983, "comment_id": 78394914, "body": "It is not always desirable to run callback each time user created. There are situations where database record creation is not equals to registration. For example in unit tests. So, it&#39;s better to separate database manipulations (in active record) and business logic."}, {"owner": {"reputation": 76, "user_id": 8447686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6813ff2515fabadfcc16992294fc2aee?s=128&d=identicon&r=PG&f=1", "display_name": "Colton Ulmer", "link": "https://stackoverflow.com/users/8447686/colton-ulmer"}, "reply_to_user": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "edited": false, "score": 0, "creation_date": 1502900590, "post_id": 45716983, "comment_id": 78395390, "body": "Appreciate the input."}], "tags": [], "owner": {"reputation": 76, "user_id": 8447686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6813ff2515fabadfcc16992294fc2aee?s=128&d=identicon&r=PG&f=1", "display_name": "Colton Ulmer", "link": "https://stackoverflow.com/users/8447686/colton-ulmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1502895485, "creation_date": 1502895485, "answer_id": 45716983, "question_id": 45716482, "link": "https://stackoverflow.com/questions/45716482/oop-architect-a-series-of-events-upon-user-creation/45716983#45716983", "title": "OOP architect a series of events upon user creation", "body": "<p>This sounds like a good situation to use ActiveRecord Callbacks</p>\n\n<p>URL: <a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/active_record_callbacks.html</a></p>\n\n<p>I would read that decide which callback fits your situation and then make a concern which contains all the \"series of events\" that you want to occur. Furthermore, include that concern on the model that needs it.</p>\n\n<p>Hope it helps!</p>\n"}, {"tags": [], "owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "is_accepted": false, "score": 2, "last_activity_date": 1502899404, "creation_date": 1502899404, "answer_id": 45718291, "question_id": 45716482, "link": "https://stackoverflow.com/questions/45716482/oop-architect-a-series-of-events-upon-user-creation/45718291#45718291", "title": "OOP architect a series of events upon user creation", "body": "<p>For user registration it's worth publishing an domain event to be handled by different subsystems. Thus, your objects are completely decoupled. But event driven architecture has its price -- it's a way harder to debug and understand and requires some discipline.</p>\n\n<p>If decoupling is not a goal, you may use decorator pattern by wrapping your service with additional behavior:</p>\n\n<pre><code>registration_service = WellconeNotification.new(UserRegistration.new)\nregistration_service.call(params)\n</code></pre>\n\n<p>The key idea here is to separate dependencies and parameters. I found very convenient to use constructor for dependencies and method arguments for parameters.</p>\n\n<p>This approach implies a bit harder dependency management and kind of service locator. I recommend looking at dry-container and dry-auto_inject gems. </p>\n\n<p>Writing all the code in one service object may be reasonable first step if you don't have a lot of business logic or still gathering requirements. </p>\n"}], "owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502899404, "creation_date": 1502894138, "question_id": 45716482, "link": "https://stackoverflow.com/questions/45716482/oop-architect-a-series-of-events-upon-user-creation", "title": "OOP architect a series of events upon user creation", "body": "<p>I'm writing an application where upon user account creation I want a series of events to happen - send gift, send email, etc. My question is in what way have you tackled a problem like this structurally, dependency injection?, observers? or did you just create a method that would handle all of those events? We have a user registration service, but i'm concerned that the more events we add the more random dependencies we will get.</p>\n"}, {"tags": ["javascript", "arrays", "ruby"], "comments": [{"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "edited": false, "score": 1, "creation_date": 1502894175, "post_id": 45716398, "comment_id": 78390937, "body": "You can use breakpoints/trace in Chrome dev tool to trace each step/variables as the program runs."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502894201, "post_id": 45716398, "comment_id": 78390962, "body": "What would <code>-3, -2, -1</code> return? Something like <code>-3--1</code>?"}, {"owner": {"reputation": 45, "user_id": 7180855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LdNPz.jpg?s=128&g=1", "display_name": "Prodigy_Internet", "link": "https://stackoverflow.com/users/7180855/prodigy-internet"}, "edited": false, "score": 0, "creation_date": 1502894864, "post_id": 45716398, "comment_id": 78391450, "body": "@sagarpandya82: Yes.  Always in ascending order."}, {"owner": {"reputation": 45, "user_id": 7180855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LdNPz.jpg?s=128&g=1", "display_name": "Prodigy_Internet", "link": "https://stackoverflow.com/users/7180855/prodigy-internet"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502894953, "post_id": 45716398, "comment_id": 78391511, "body": "@Stefan:  I have not tested an only negative integer range yet.  But I would have to say, yes that would be ideal."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1502896438, "post_id": 45716398, "comment_id": 78392555, "body": "Why the rush to select an answer?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1502900739, "post_id": 45716398, "comment_id": 78395484, "body": "The Ruby solution doesn&#39;t have to be long-winded: <code>list.chunk_while { |b,a| a == b + 1 }.map { |a| a.length &gt;= 3 ? [ a[0], a[-1] ].join(&#39;-&#39;) : a }.join(&#39;,&#39;)</code> works fine."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502894893, "post_id": 45716640, "comment_id": 78391469, "body": "The documentation for <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-chunk_while\" rel=\"nofollow noreferrer\"><code>chunk_while</code></a> contains a similar example :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502894956, "post_id": 45716640, "comment_id": 78391514, "body": "@Stefan: ooh, it does, indeed. :)"}, {"owner": {"reputation": 45, "user_id": 7180855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LdNPz.jpg?s=128&g=1", "display_name": "Prodigy_Internet", "link": "https://stackoverflow.com/users/7180855/prodigy-internet"}, "edited": false, "score": 0, "creation_date": 1502895051, "post_id": 45716640, "comment_id": 78391593, "body": "Thanks Sergio.  Perhaps, if I refactored my Ruby code first, the solution might have to me for JavaScript."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1502896029, "post_id": 45716640, "comment_id": 78392279, "body": "This is the best answer. Note that the OP&#39;s specified result doesn&#39;t include spaces between the groups. Obviously that&#39;s easily fixed."}, {"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "edited": false, "score": 0, "creation_date": 1502896620, "post_id": 45716640, "comment_id": 78392681, "body": "The power of ruby in this regard :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 5, "last_activity_date": 1502901742, "last_edit_date": 1502901742, "creation_date": 1502894569, "answer_id": 45716640, "question_id": 45716398, "link": "https://stackoverflow.com/questions/45716398/given-an-array-of-increasing-integers-how-do-you-return-a-range-for-every-three/45716640#45716640", "title": "Given an array of increasing integers: How do you return a range for every three or more consecutive integers?", "body": "<p>Here's a better ruby solution:</p>\n\n<pre><code>list = [-6, -3, -2, -1, 0, 1, 3, 4, 5, 7, 8, 9, 10, 11, 14, 15, 17, 18, 19, 20]\n\nstringified = list.chunk_while{|a, b| a == b - 1}.map do |seq|\n#                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the core of the solution\n  if seq.length &gt; 2 # long enough sequence\n    \"#{seq.first}-#{seq.last}\"\n  else\n    seq\n  end\nend.join(', ')\n\nstringified # =&gt; \"-6, -3-1, 3-5, 7-11, 14, 15, 17-20\"\n</code></pre>\n\n<p>This should also be a hint for your javascript implementation. Separate concerns as much as possible. Chunking, stringifying, turning a sequence into a range-like string: these all should be separate pieces of code. If they're not all tangled together, they're much easier to reason about. </p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 7180855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LdNPz.jpg?s=128&g=1", "display_name": "Prodigy_Internet", "link": "https://stackoverflow.com/users/7180855/prodigy-internet"}, "edited": false, "score": 0, "creation_date": 1502895243, "post_id": 45716790, "comment_id": 78391743, "body": "Much cleaner.  Thanks Nina!"}], "tags": [], "owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "is_accepted": false, "score": 3, "last_activity_date": 1502894973, "creation_date": 1502894973, "answer_id": 45716790, "question_id": 45716398, "link": "https://stackoverflow.com/questions/45716398/given-an-array-of-increasing-integers-how-do-you-return-a-range-for-every-three/45716790#45716790", "title": "Given an array of increasing integers: How do you return a range for every three or more consecutive integers?", "body": "<p>In Javascript, you could use a three pass approach, first for getting the grouped ranges, then get the ranges in an array and later join the whole array.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var array = [-6, -3, -2, -1, 0, 1, 3, 4, 5, 7, 8, 9, 10, 11, 14, 15, 17, 18, 19, 20],\r\n    result = array\r\n        .reduce(function (r, a) {\r\n            var last = r[r.length - 1];\r\n            if (last &amp;&amp; last[1] + 1 === a) {\r\n                last[1] = a;\r\n            } else {\r\n                r.push([a, a]);\r\n            }\r\n            return r;\r\n        }, [])\r\n        .reduce(function (r, a) {\r\n            return r.concat(a[0] === a[1] ? a[0] : a[1] - a[0] &lt; 2 ? a : a.join('-'));\r\n        }, [])\r\n        .join();\r\n\r\nconsole.log(result);</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.as-console-wrapper { max-height: 100% !important; top: 0; }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 7180855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LdNPz.jpg?s=128&g=1", "display_name": "Prodigy_Internet", "link": "https://stackoverflow.com/users/7180855/prodigy-internet"}, "edited": false, "score": 0, "creation_date": 1502896092, "post_id": 45717021, "comment_id": 78392316, "body": "I was unaware Math.min(); didn&#39;t accept arrays.  Thank you for clearing that up!"}, {"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1502896219, "post_id": 45717021, "comment_id": 78392403, "body": "@moveson The question is why the ruby code ported to javascript didn&#39;t work, as I understand it. ninasholz has a better answer in my opinion :) Again people prefer to keep code that they <i>understand</i>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502896343, "post_id": 45717021, "comment_id": 78392489, "body": "@sabithpocker: yep, that indeed was the question :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1502896382, "post_id": 45717021, "comment_id": 78392517, "body": "@moveson: also, there&#39;s no ruby in this answer :)"}, {"owner": {"reputation": 18926, "user_id": 3297291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d0d7237254b7a62c94e8e97cf1e0e29?s=128&d=identicon&r=PG&f=1", "display_name": "user3297291", "link": "https://stackoverflow.com/users/3297291/user3297291"}, "edited": false, "score": 0, "creation_date": 1502897665, "post_id": 45717021, "comment_id": 78393441, "body": "Note that <code>list.splice(0,1)[0];</code> is similar to <code>list.shift()</code>. Also, in es6, you can use the spread syntax instead of having to call <code>apply</code> like so: <code>Math.min(...range)</code>"}, {"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "reply_to_user": {"reputation": 18926, "user_id": 3297291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d0d7237254b7a62c94e8e97cf1e0e29?s=128&d=identicon&r=PG&f=1", "display_name": "user3297291", "link": "https://stackoverflow.com/users/3297291/user3297291"}, "edited": false, "score": 0, "creation_date": 1502897827, "post_id": 45717021, "comment_id": 78393545, "body": "@user3297291 This answer only points out <i>why it didn&#39;t work</i> NinaSholz already has a wonderful solution here."}, {"owner": {"reputation": 18926, "user_id": 3297291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d0d7237254b7a62c94e8e97cf1e0e29?s=128&d=identicon&r=PG&f=1", "display_name": "user3297291", "link": "https://stackoverflow.com/users/3297291/user3297291"}, "edited": false, "score": 1, "creation_date": 1502898055, "post_id": 45717021, "comment_id": 78393738, "body": "I know, but since this is the accepted answer and it shows <code>.splice(0, 1)[0]</code> in the first paragraph, I figured it might be nice to place a foot note saying that there are more easy fixes ;) Additionally, sometimes the OP learns more from an in depth analysis of their own code than a complete copy-pasteable replacement, so I think there&#39;s definitely value in this answer!"}, {"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "edited": false, "score": 0, "creation_date": 1502898347, "post_id": 45717021, "comment_id": 78393949, "body": "I do agree, I&#39;ll edit to add those markers. Again, thank you for the sugesstion."}, {"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "reply_to_user": {"reputation": 18926, "user_id": 3297291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d0d7237254b7a62c94e8e97cf1e0e29?s=128&d=identicon&r=PG&f=1", "display_name": "user3297291", "link": "https://stackoverflow.com/users/3297291/user3297291"}, "edited": false, "score": 0, "creation_date": 1502899413, "post_id": 45717021, "comment_id": 78394698, "body": "@user3297291 Its there now :)"}], "tags": [], "owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "is_accepted": true, "score": 2, "last_activity_date": 1502899388, "last_edit_date": 1502899388, "creation_date": 1502895570, "answer_id": 45717021, "question_id": 45716398, "link": "https://stackoverflow.com/questions/45716398/given-an-array-of-increasing-integers-how-do-you-return-a-range-for-every-three/45717021#45717021", "title": "Given an array of increasing integers: How do you return a range for every three or more consecutive integers?", "body": "<p>Splice returns an array, you have to take the first item from returned array</p>\n\n<pre><code>take = list.splice(0,1)[0];\n</code></pre>\n\n<blockquote>\n  <p>Also note that <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/shift\" rel=\"nofollow noreferrer\">shift</a> (<code>take = list.shift()</code>) is a better candidate for this operation.</p>\n</blockquote>\n\n<p>Math.min doesn't accept arrays, you can use a workaround with apply/call</p>\n\n<pre><code>Math.min.apply(null,range);\n</code></pre>\n\n<blockquote>\n  <p>In ES6 this can be done as <code>Math.min(...range)</code> using <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator\" rel=\"nofollow noreferrer\">spread syntax</a></p>\n</blockquote>\n\n<p>It is better to clear an array by assigning to a new array.</p>\n\n<pre><code>range = [];\n</code></pre>\n\n<p>I obviously prefer the functional and declarative method by @ninasholz This is just to explain <em>why my code didn't work</em></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var list = [-6, -3, -2, -1, 0, 1, 3, 4, 5, 7, 8, 9, 10, 11, 14, 15, 17, 18, 19, 20];\r\nconsole.log(solution(list));\r\n\r\nfunction solution(list) {\r\n  final = [];\r\n  range = [];\r\n  while (list.length &gt; 0) {\r\n         //splice returns array take first item\r\n        take = list.splice(0,1)[0];\r\n        range.push(take); \r\n        n = 1;\r\n        while (take + n === list[0]) {\r\n              a = list.splice(0,1)[0]; \r\n              range.push(a);\r\n              n++;\r\n        }\r\n        console.log(range);\r\n        if (range.length &gt;= 3) {\r\n        //Math.min doesnt accept arrays\r\n           min = Math.min.apply(null,range);\r\n           max = Math.max.apply(null,range);\r\n           final.push(min + \"-\" + max); \r\n           range = [];\r\n        } else if (range.length === 2) {\r\n                  final.push(range[0]);\r\n                  final.push(range[1]);\r\n                  range = [];\r\n        } else if (range.length === 1) {\r\n                  final.push(range[0]);\r\n                  range = [];\r\n        }\r\n  }\r\n  return final.join(\",\");\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 45, "user_id": 7180855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LdNPz.jpg?s=128&g=1", "display_name": "Prodigy_Internet", "link": "https://stackoverflow.com/users/7180855/prodigy-internet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 45717021, "answer_count": 3, "score": 1, "last_activity_date": 1502901742, "creation_date": 1502893920, "last_edit_date": 1502897151, "question_id": 45716398, "link": "https://stackoverflow.com/questions/45716398/given-an-array-of-increasing-integers-how-do-you-return-a-range-for-every-three", "title": "Given an array of increasing integers: How do you return a range for every three or more consecutive integers?", "body": "<p>Given the array (list) of integers below, I am looking to extract each integer and if three or more integers ascend consecutively, I want to replace the middle integers with a \"-\" to represent a range. And then lastly return values as a string.</p>\n\n<p>For example, the first 7 integers from list: <code>-6, -3, -2, -1, 0, 1, 3</code>\nWould become <code>'-6,-3-1,3'</code><br>\nBecause there is more than three consecutive integers from -3 to 1.</p>\n\n<p>Ultimately, <code>solution(list)</code> should return the following string: <code>\"-6,-3-1,3-5,7-11,14,15,17-20\"</code></p>\n\n<p>In its present form it returns the following string: <code>\"-6,-3,-2,-1,0,1,3,4,5,7,8,9,10,11,14,15,17,18,19,20\"</code>\nWhich is simply the array converted into a string.</p>\n\n<pre><code>var list = [-6, -3, -2, -1, 0, 1, 3, 4, 5, 7, 8, 9, 10, 11, 14, 15, 17, 18, 19, 20];\nsolution(list);\n\nfunction solution(list) {\n    final = [];\n    range = [];\n    while (list.length &gt; 0) {\n        take = list.splice(0,1);\n        range.push(take); \n        n = 1;\n        while (take+n === list[0]) {\n            a = list.splice(0,1); \n            range.push(a);\n            n++;\n        }\n        if (range.length &gt;= 3) {\n            min = Math.min(range).toString();\n            max = Math.max(range).toString();\n            final.push(min + \"-\" + max); \n            range.length = 0;\n        } else if (range.length === 2) {\n            final.push(range[0].toString());\n            final.push(range[1].toString());\n            range.length = 0;\n        } else if (range.length === 1) {\n            final.push(range[0].toString());\n            range.length = 0;\n        }\n    }\n    return final.join(\",\");\n}\n</code></pre>\n\n<p>However, I was able to get the desired result successfully in Ruby:</p>\n\n<pre><code>list = [-6, -3, -2, -1, 0, 1, 3, 4, 5, 7, 8, 9, 10, 11, 14, 15, 17, 18, 19, 20]\n\ndef solution(list)\n    final = []\n    range = []\n    while (list.length &gt; 0) do\n        take = list.shift\n        range &lt;&lt; take \n        n = 1\n        while (take+n == list[0]) do\n            a = list.slice!(0) \n            range &lt;&lt; a\n            n +=1\n        end\n        if (range.length &gt;= 3)\n            final &lt;&lt; (range.min.to_s + \"-\" + range.max.to_s) \n            range = []\n        elsif (range.length == 2)\n            final &lt;&lt; range[0]\n            final &lt;&lt; range[1]\n            range = []\n        elsif (range.length == 1)\n            final &lt;&lt; range[0].to_s\n            range = []\n        end\n    end\n    return final.join(\",\")\nend\n</code></pre>\n\n<p>My approach in Ruby is almost identical that of my JavaScript.  So, if I was wondering if someone could:</p>\n\n<p>1) Explain why this approach works with Ruby, but not Javascript.  Please feel free to inform me even if it is a simple syntax error on my part.</p>\n\n<p>2) How I could possibly go about extracting the integers and returning the correct ranges in JavaScript?</p>\n\n<p>Your help is greatly appreciated!  Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ubuntu", "activerecord"], "comments": [{"owner": {"reputation": 482, "user_id": 3609100, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6fte8.png?s=128&g=1", "display_name": "Krzysztof Witczak", "link": "https://stackoverflow.com/users/3609100/krzysztof-witczak"}, "edited": false, "score": 0, "creation_date": 1502893827, "post_id": 45716267, "comment_id": 78390680, "body": "It looks like your test db is not set. Maybe try this: <code>rake db:create RAILS_ENV=test</code> and see if prepare runs?"}, {"owner": {"reputation": 5, "user_id": 6205642, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/50b65d3c8b8158fa2bcbf6936b5c459d?s=128&d=identicon&r=PG&f=1", "display_name": "oisinmcdaid", "link": "https://stackoverflow.com/users/6205642/oisinmcdaid"}, "reply_to_user": {"reputation": 482, "user_id": 3609100, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6fte8.png?s=128&g=1", "display_name": "Krzysztof Witczak", "link": "https://stackoverflow.com/users/3609100/krzysztof-witczak"}, "edited": false, "score": 0, "creation_date": 1502894345, "post_id": 45716267, "comment_id": 78391072, "body": "@KrzysztofWitczak I&#39;ve tried this earlier as well, output being:   payments_test already exists"}, {"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1502912486, "post_id": 45716267, "comment_id": 78401573, "body": "try <code>rake db:reset RAILS_ENV=test</code>"}, {"owner": {"reputation": 5, "user_id": 6205642, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/50b65d3c8b8158fa2bcbf6936b5c459d?s=128&d=identicon&r=PG&f=1", "display_name": "oisinmcdaid", "link": "https://stackoverflow.com/users/6205642/oisinmcdaid"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1502959215, "post_id": 45716267, "comment_id": 78418189, "body": "@AaronBreckenridge Getting the same error as in my update again."}, {"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1503059505, "post_id": 45716267, "comment_id": 78470668, "body": "Looks like your application is misconfigured. Where are you calling <code>.mq</code>?"}], "owner": {"reputation": 5, "user_id": 6205642, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/50b65d3c8b8158fa2bcbf6936b5c459d?s=128&d=identicon&r=PG&f=1", "display_name": "oisinmcdaid", "link": "https://stackoverflow.com/users/6205642/oisinmcdaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502898307, "creation_date": 1502893572, "last_edit_date": 1502898307, "question_id": 45716267, "link": "https://stackoverflow.com/questions/45716267/error-when-trying-to-set-up-db-from-command-line-rake-aborted", "title": "Error when trying to set up db from command line &quot;rake aborted&quot;", "body": "<p>I've been trying to set up a test db, but when trying to create, I keep coming across an error that I can't seem to get past when trying to populate the db.</p>\n\n<p>When I execute:</p>\n\n<pre><code>bundle exec rake db:create db:migrate db:test:prepare --trace\n</code></pre>\n\n<p>create and migrate seem to run without errors when run separately, but test:prepare seems to throw the error.</p>\n\n<p>The error starts with:</p>\n\n<pre><code>** Invoke db:test:prepare (first_time)\n** Invoke db:abort_if_pending_migrations (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Execute db:abort_if_pending_migrations\n** Invoke environment\n** Execute db:test:prepare\n** Invoke db:test:load (first_time)\n** Invoke db:test:purge (first_time)\n** Invoke environment\n** Invoke db:load_config\n** Execute db:test:purge\n** Execute db:test:load\n** Invoke db:test:load_schema (first_time)\n** Invoke db:test:purge\n** Execute db:test:load_schema\n** Invoke db:schema:load (first_time)\n** Invoke environment\n** Invoke db:load_config\n** Execute db:schema:load\nrake aborted!\nActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation \"capabilities\" does not exist\nLINE 5:              \n</code></pre>\n\n<p>I've looked up, and tried a lot of the results shown on google, but none seem to help. New to this, so I'm completely stumped at this stage.</p>\n\n<p>UPDATE:\nI should mention that when doing:</p>\n\n<pre><code>rake db:create RAILS_ENV=test\n-&gt;payments_test already exists\nrake db:migrate RAILS_ENV=test\n-&gt;rake aborted!\nNoMethodError: undefined method `mq' for #&lt;Rails::Application::Configuration:0x0000000508acf0&gt; blah blah blah\n</code></pre>\n"}, {"tags": ["ruby", "command-line-interface", "thor"], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 3449673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJjRj.png?s=128&g=1", "display_name": "thutt", "link": "https://stackoverflow.com/users/3449673/thutt"}, "edited": false, "score": 1, "creation_date": 1502961582, "post_id": 45718959, "comment_id": 78419837, "body": "Your monkey patch is a bit too evil for me ;) I posted my own solution and will accept that for now. But big thanks for pointing me to the right place in the source code."}], "tags": [], "owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "is_accepted": false, "score": 2, "last_activity_date": 1502903942, "last_edit_date": 1502903942, "creation_date": 1502901777, "answer_id": 45718959, "question_id": 45716113, "link": "https://stackoverflow.com/questions/45716113/thor-cli-setting-a-custom-order-of-commands-in-help-output/45718959#45718959", "title": "Thor CLI: Setting a custom order of commands in help output", "body": "<p>From the <code>help</code> <a href=\"https://github.com/erikhuda/thor/blob/0211fd443238c83f332b3124b375c75151167025/lib/thor.rb#L195\" rel=\"nofollow noreferrer\">source code</a></p>\n\n<pre><code>list.sort! { |a, b| a[0] &lt;=&gt; b[0] }\n</code></pre>\n\n<p>It is sorted alphabetically as expected.</p>\n\n<hr>\n\n<p>Of course evil monkey patch is always allowed, add the following code before <code>MyCLI</code>.</p>\n\n<pre><code>SCRIPT = File.basename $PROGRAM_NAME\nclass String\n  alias old_compare &lt;=&gt;\n  # @param [String]  other_string\n  # @return [Fixnum]\n  def &lt;=&gt;(other_string)\n    # currently the command name is like `script_name+space+usage`\n    # a monkey patch to make z goes first\n    if other_string.start_with?(SCRIPT)\n      index = SCRIPT.size + 1\n      if other_string[index] == 'z'\n        return 1\n      elsif self[index] =='z'\n        return -1\n      end\n    end\n    old_compare other_string\n  end\nend\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>Commands:\n  thor-test z               # this should go first\n  thor-test a               # this should go second\n  thor-test help [COMMAND]  # Describe available commands or one specific command\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 3449673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJjRj.png?s=128&g=1", "display_name": "thutt", "link": "https://stackoverflow.com/users/3449673/thutt"}, "is_accepted": true, "score": 3, "last_activity_date": 1502960107, "creation_date": 1502960107, "answer_id": 45730659, "question_id": 45716113, "link": "https://stackoverflow.com/questions/45716113/thor-cli-setting-a-custom-order-of-commands-in-help-output/45730659#45730659", "title": "Thor CLI: Setting a custom order of commands in help output", "body": "<p>Seems as if Thor doesn't offer a configuration option for this. So I'll settle on some monkey-patching for now. <a href=\"https://stackoverflow.com/a/45718959/3449673\">aristotll's answer</a> pointed me to the right place in Thor's <a href=\"https://github.com/erikhuda/thor/blob/0211fd443238c83f332b3124b375c75151167025/lib/thor.rb#L195\" rel=\"nofollow noreferrer\">source code</a>.</p>\n\n<p>But instead of hacking the <code>&lt;=&gt;</code> method, I decided to change the implementation of the <code>help</code> method. This seems still cleaner to me and has the advantage that I can further influence the behavior of the help output:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire \"thor\"\n\nclass MyCLI &lt; Thor\n  class &lt;&lt; self\n    def help(shell, subcommand = false)\n      list = printable_commands(true, subcommand)\n      Thor::Util.thor_classes_in(self).each do |klass|\n        list += klass.printable_commands(false)\n      end\n\n      # Remove this line to disable alphabetical sorting\n      # list.sort! { |a, b| a[0] &lt;=&gt; b[0] }\n\n      # Add this line to remove the help-command itself from the output\n      list.reject! {|l| l[0].split[1] == 'help'}\n\n      if defined?(@package_name) &amp;&amp; @package_name\n        shell.say \"#{@package_name} commands:\"\n      else\n        shell.say \"Commands:\"\n      end\n\n      shell.print_table(list, :indent =&gt; 2, :truncate =&gt; true)\n      shell.say\n      class_options_help(shell)\n\n      # Add this line if you want to print custom text at the end of your help output.\n      # (similar to how Rails does it)\n      shell.say 'All commands can be run with -h (or --help) for more information.'\n    end\n  end\n\n  desc \"z\", \"this should go first\"\n  def z; end\n\n  desc \"a\", \"this should go second\"\n  def a; end\nend\n\nMyCLI.start(ARGV)\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 3449673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJjRj.png?s=128&g=1", "display_name": "thutt", "link": "https://stackoverflow.com/users/3449673/thutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 45730659, "answer_count": 2, "score": 1, "last_activity_date": 1502960107, "creation_date": 1502893211, "last_edit_date": 1502895003, "question_id": 45716113, "link": "https://stackoverflow.com/questions/45716113/thor-cli-setting-a-custom-order-of-commands-in-help-output", "title": "Thor CLI: Setting a custom order of commands in help output", "body": "<p>The <a href=\"https://github.com/erikhuda/thor\" rel=\"nofollow noreferrer\">thor</a> gem seems to always order the defined commands alphabetically when printing its help output. Example:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire \"thor\"\n\nclass MyCLI &lt; Thor\n  desc \"z\", \"this should go first\"\n  def z; end\n\n  desc \"a\", \"this should go second\"\n  def a; end\nend\n\nMyCLI.start(ARGV)\n</code></pre>\n\n<p>Saving this script as <code>thor-test</code> and calling it without arguments gives this output:</p>\n\n<pre><code>Commands:\n  thor-test a               # this should go second\n  thor-test help [COMMAND]  # Describe available commands or one specific command\n  thor-test z               # this should go first\n</code></pre>\n\n<p><strong>Question:</strong> How can I tell Thor to order the entries differently?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "time"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502891285, "post_id": 45715315, "comment_id": 78388750, "body": "are you 100% sure that you will always get a string containing exactly 4 digits, with the first 2 defining the amount of minutes and the last 2 the amount of seconds?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502891388, "post_id": 45715315, "comment_id": 78388812, "body": "What is <code>1456</code> \u2013 a string, an integer? Where does this data come from?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1502891963, "post_id": 45715315, "comment_id": 78389228, "body": "is the output another string or a <code>Time</code> object?"}, {"owner": {"reputation": 53, "user_id": 1439898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6b09a142da991a00d9d328ce46990a?s=128&d=identicon&r=PG", "display_name": "user1439898", "link": "https://stackoverflow.com/users/1439898/user1439898"}, "edited": false, "score": 0, "creation_date": 1502892719, "post_id": 45715315, "comment_id": 78389786, "body": "1456 is a integer stored in database"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502893745, "post_id": 45715315, "comment_id": 78390620, "body": "That&#39;s a really odd way to store durations :-)"}], "answers": [{"comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 3, "creation_date": 1502894543, "post_id": 45715467, "comment_id": 78391212, "body": "The OP specified that the starting value is an integer. It&#39;s also reasonable to assume that the integer will often be 5 digits or greater, since even a duration of 2 hours would be 5 digits. You can easily get the minutes and seconds like so: <code>min, sec = duration.divmod 100</code>, which would account for an integer of arbitrary size."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502898860, "post_id": 45715467, "comment_id": 78394320, "body": "Just like splitting the duration into <code>min</code> and <code>sec</code>, you can split <code>min</code> into hours and minutes via <code>hour, min = min.divmod(60)</code>. The three variables can then be formatted via <code>sprintf(&#39;%02d:%02d:%02d&#39;, hour, min, sec)</code>."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 1, "last_activity_date": 1502895965, "last_edit_date": 1502895965, "creation_date": 1502891513, "answer_id": 45715467, "question_id": 45715315, "link": "https://stackoverflow.com/questions/45715315/integer-minutes-hours-to-ruby-time/45715467#45715467", "title": "Integer minutes/hours to Ruby Time", "body": "<p>Updated (considering @eiko's comment), this code will handle any (positive) integer (inferior to <code>60*24*100</code>):</p>\n\n<pre><code>def custom_duration_to_hours_mn_sec_str(duration)\n  min, sec = duration.divmod(100)\n  total_in_seconds = min.minutes + sec.seconds\n  Time.at(total_in_seconds).utc.strftime(\"%H:%M:%S\")\nend\ncustom_duration_to_hours_mn_sec_str(56) # 56 seconds\n# =&gt; \"00:00:56\" \ncustom_duration_to_hours_mn_sec_str(1456) # 14 mn 56 seconds\n# =&gt; \"00:14:56\"\ncustom_duration_to_hours_mn_sec_str(12056) # 120 mn 56 seconds\n# =&gt; \"02:00:56\"\n</code></pre>\n\n<p><strong>Limitation:</strong> if the duration is over <code>60*24</code> minutes (quantity of minutes in a 24h day), it will start again to '00:00:00' and therefore ignore the quantity of days.</p>\n\n<pre><code>custom_duration_to_hours_mn_sec_str(60*24*100) # *100 to add the zeros for seconds\n# =&gt; \"00:00:00\"\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 1439898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6b09a142da991a00d9d328ce46990a?s=128&d=identicon&r=PG", "display_name": "user1439898", "link": "https://stackoverflow.com/users/1439898/user1439898"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 0, "closed_date": 1502897093, "answer_count": 1, "score": -1, "last_activity_date": 1502895965, "creation_date": 1502891092, "question_id": 45715315, "link": "https://stackoverflow.com/questions/45715315/integer-minutes-hours-to-ruby-time", "closed_reason": "Needs more focus", "title": "Integer minutes/hours to Ruby Time", "body": "<p>I have the following duration:</p>\n\n<p>1456</p>\n\n<p>14 minutes and 56 seconds\nAnd I need to convert to time and format like this:</p>\n\n<p>14:56</p>\n\n<p>In case of hours:</p>\n\n<p>6500</p>\n\n<p>01:05</p>\n\n<p>How can I do that with ruby/rails ?\nI'm looking for a solution but I can't.</p>\n"}, {"tags": ["ruby", "elasticsearch", "ruby-on-rails-5", "kaminari", "elasticsearch-model"], "comments": [{"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "edited": false, "score": 0, "creation_date": 1502891842, "post_id": 45715311, "comment_id": 78389128, "body": "You&#39;ve provided the code which is using <code>tire</code>. But the problem is with the code that is using elasticsearch-model, right?"}, {"owner": {"reputation": 23, "user_id": 4960972, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/56b6f6fb46dac46b7486be5c3f3503c4?s=128&d=identicon&r=PG&f=1", "display_name": "webber", "link": "https://stackoverflow.com/users/4960972/webber"}, "reply_to_user": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "edited": false, "score": 0, "creation_date": 1502892369, "post_id": 45715311, "comment_id": 78389496, "body": "i want to do the same operation with elasticsearch-model."}], "owner": {"reputation": 23, "user_id": 4960972, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/56b6f6fb46dac46b7486be5c3f3503c4?s=128&d=identicon&r=PG&f=1", "display_name": "webber", "link": "https://stackoverflow.com/users/4960972/webber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502891087, "creation_date": 1502891087, "question_id": 45715311, "link": "https://stackoverflow.com/questions/45715311/rails-elasticsearch-model-multiple-params-query", "title": "rails elasticsearch-model multiple params query", "body": "<p>I want to run multiple params of search with elasticsearch-model gem like below. Before i used <em>gem tire</em> to search records using multiple params of queries.</p>\n\n<p>My model:</p>\n\n<pre><code>class Book &lt; ApplicationRecord\n  include Tire::Model::Search\n  include Tire::Model::Callbacks\n\n  mapping do\n   indexes :id, type: 'integer'\n   indexes :title\n   indexes :author\n   indexes :category\n   indexes :price\n  end\n\n def self.search(params)\n  tire.search(load: true) do\n    query do\n      boolean do\n       must { string params[:title] } if params[:title].present?\n       must { string params[:author] } if params[:author].present?\n       must { string params[:category] } if params[:category].present?\n       should { range :price, { gte: params[:price_range_min], lte: \n       params[:price_range_max] } } if \n       params[:price_range_min].present? \n       &amp;&amp; params[:price_range_max].present?\n     end\n    end\n   end\n end\n\nend\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>class BookController &lt; ApplicationController\n   def index\n    @books = Book.search(params)\n    @books = \n    Kaminari.paginate_array(@books).page(params[:page]).per(10)\n   end\n end\n</code></pre>\n\n<p>I followed this documentation <a href=\"http://www.rubydoc.info/gems/elasticsearch-model/\" rel=\"nofollow noreferrer\">elasticsearch-model</a> but i am getting results only for two params of field.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1502889594, "post_id": 45714588, "comment_id": 78387526, "body": "If I recall correctly, you need to point the controller in routes file too with <code>devise_for</code>. Are you doing that? Also, add Rails.logger.info(&quot;Came here&quot;) in above to see if that line is logged and this method is actually being honored or not."}, {"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1502894041, "post_id": 45714588, "comment_id": 78390830, "body": "Already mapped my passwords_controller to devise passwords_controller, put a byebug in the create action it get stuck in there."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502904620, "post_id": 45714588, "comment_id": 78397699, "body": "Can you show us the necessary server logs?"}], "answers": [{"comments": [{"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1502894716, "post_id": 45716601, "comment_id": 78391349, "body": "I am submitting the password reset form."}, {"owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "reply_to_user": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1502899148, "post_id": 45716601, "comment_id": 78394511, "body": "ok, sorry for the confusion. I got it now. Did you check if the create action is accessed by placing loggers ?"}], "tags": [], "owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "is_accepted": false, "score": 0, "last_activity_date": 1502899162, "last_edit_date": 1502899162, "creation_date": 1502894485, "answer_id": 45716601, "question_id": 45714588, "link": "https://stackoverflow.com/questions/45714588/cannot-access-rails-request-object-in-devise-templates/45716601#45716601", "title": "cannot access rails request object in devise templates", "body": "<p>Make sure you have set routes file for devise and place a byebug or any logger statement in passwords_controller.rb to check if your customized passwords_controller.rb is being accessed.</p>\n\n<pre><code>devise_for :consumers, controllers: {passwords: \"passwords\"}\n</code></pre>\n"}], "owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1502899162, "creation_date": 1502889199, "question_id": 45714588, "link": "https://stackoverflow.com/questions/45714588/cannot-access-rails-request-object-in-devise-templates", "title": "cannot access rails request object in devise templates", "body": "<p>I am setting <code>@application_url</code> in passwords_controller and getting its value as <code>nil</code> in <code>/app/views/devise/mailer/reset_password_instructions.html.erb</code> template.\nI am even unable to access rails <code>request</code> object directly in this template. I don't know whats wrong. Please help.</p>\n\n<pre><code>class PasswordsController &lt; Devise::PasswordsController\n\n  def create\n    @application_url = request.host_with_port\n    super\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "mruby"], "comments": [{"owner": {"reputation": 790, "user_id": 722915, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/a14d1bca90d7ebeda50dca99aab381b9?s=128&d=identicon&r=PG", "display_name": "shevy", "link": "https://stackoverflow.com/users/722915/shevy"}, "edited": false, "score": 0, "creation_date": 1502898422, "post_id": 45714121, "comment_id": 78394006, "body": "Valid question - hopefully mruby can include the answer once that is resolved."}, {"owner": {"reputation": 35, "user_id": 4818542, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-52RIu4-5Z_8/AAAAAAAAAAI/AAAAAAAAABg/HDfnoB7GYaU/photo.jpg?sz=128", "display_name": "Filipe Correia", "link": "https://stackoverflow.com/users/4818542/filipe-correia"}, "reply_to_user": {"reputation": 790, "user_id": 722915, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/a14d1bca90d7ebeda50dca99aab381b9?s=128&d=identicon&r=PG", "display_name": "shevy", "link": "https://stackoverflow.com/users/722915/shevy"}, "edited": false, "score": 0, "creation_date": 1502898659, "post_id": 45714121, "comment_id": 78394148, "body": "once what is resolved?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4818542, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-52RIu4-5Z_8/AAAAAAAAAAI/AAAAAAAAABg/HDfnoB7GYaU/photo.jpg?sz=128", "display_name": "Filipe Correia", "link": "https://stackoverflow.com/users/4818542/filipe-correia"}, "edited": false, "score": 0, "creation_date": 1503322167, "post_id": 45781177, "comment_id": 78554499, "body": "I found the <code>system</code> in mruby-process but it doesn&#39;t return anything from the process. I actually implemented a version of the backtick operator, and got a simple version working but it makes a lot more sense to use mruby-io instead."}], "tags": [], "owner": {"reputation": 83, "user_id": 3778365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1821437561471e39413c95e1ae69493b?s=128&d=identicon&r=PG&f=1", "display_name": "take-cheeze", "link": "https://stackoverflow.com/users/3778365/take-cheeze"}, "is_accepted": true, "score": 1, "last_activity_date": 1503225295, "creation_date": 1503225295, "answer_id": 45781177, "question_id": 45714121, "link": "https://stackoverflow.com/questions/45714121/mruby-how-to-execute-shell-commands/45781177#45781177", "title": "mruby: How to execute shell commands?", "body": "<p>Try <code>mruby-io</code> which implementes <code>popen</code>:\n<a href=\"https://github.com/iij/mruby-io/blob/728d313b2c238ac0f41a4aa7e4a88e6a8fee8079/mrblib/kernel.rb#L2-L4\" rel=\"nofollow noreferrer\">https://github.com/iij/mruby-io/blob/728d313b2c238ac0f41a4aa7e4a88e6a8fee8079/mrblib/kernel.rb#L2-L4</a></p>\n\n<p>Or type <code>mruby-process</code> which implements <code>system</code>: <a href=\"https://github.com/iij/mruby-process/blob/c31010dc0440335a7693fd70ae005c79bd1378ec/src/process.c#L368\" rel=\"nofollow noreferrer\">https://github.com/iij/mruby-process/blob/c31010dc0440335a7693fd70ae005c79bd1378ec/src/process.c#L368</a></p>\n"}], "owner": {"reputation": 35, "user_id": 4818542, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-52RIu4-5Z_8/AAAAAAAAAAI/AAAAAAAAABg/HDfnoB7GYaU/photo.jpg?sz=128", "display_name": "Filipe Correia", "link": "https://stackoverflow.com/users/4818542/filipe-correia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 45781177, "answer_count": 1, "score": 0, "last_activity_date": 1503225295, "creation_date": 1502888097, "last_edit_date": 1502889067, "question_id": 45714121, "link": "https://stackoverflow.com/questions/45714121/mruby-how-to-execute-shell-commands", "title": "mruby: How to execute shell commands?", "body": "<p>In mruby how can I run shell commands with <code>%x()</code>, <code>``</code> or <code>system</code>?\nIs there an mgem I can use for it?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 7, "creation_date": 1502886658, "post_id": 45713603, "comment_id": 78385168, "body": "Because it doesn&#39;t. Do you mean to use <code>join(&#39;, &#39;)</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502886847, "post_id": 45713603, "comment_id": 78385341, "body": "x is an array. Arrays don&#39;t need splitting."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1502887086, "post_id": 45713603, "comment_id": 78385543, "body": "What is your expected result? What should <code>[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;].split(&quot;, &quot;)</code> return?"}], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 1103562, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ef07743a8a849d44a56f4f0e80169e33?s=128&d=identicon&r=PG", "display_name": "Simon Guldstrand", "link": "https://stackoverflow.com/users/1103562/simon-guldstrand"}, "is_accepted": false, "score": 0, "last_activity_date": 1502887003, "creation_date": 1502887003, "answer_id": 45713726, "question_id": 45713603, "link": "https://stackoverflow.com/questions/45713603/why-does-it-keep-saying-that-the-function-split-does-not-exist/45713726#45713726", "title": "Why does it keep saying that the function Split does not exist?", "body": "<p>Arrays can't be split. You are probably thinking of splitting a string?</p>\n\n<p>You will reach the desired value by simply x[0] for the 0 index, first object in the array.</p>\n\n<p>This to any help?</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 5856809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-01sM-dejRWU/AAAAAAAAAAI/AAAAAAAAACE/FNXYyY6pjJo/photo.jpg?sz=128", "display_name": "Ankur Pohekar", "link": "https://stackoverflow.com/users/5856809/ankur-pohekar"}, "is_accepted": false, "score": 2, "last_activity_date": 1502888721, "last_edit_date": 1502888721, "creation_date": 1502888112, "answer_id": 45714132, "question_id": 45713603, "link": "https://stackoverflow.com/questions/45713603/why-does-it-keep-saying-that-the-function-split-does-not-exist/45714132#45714132", "title": "Why does it keep saying that the function Split does not exist?", "body": "<p>The <code>String#split</code> method in ruby is used to divide a string into substrings</p>\n\n<pre><code>'a,b,c,d'.split(',') # =&gt; [\"a\", \"b\", \"c\", \"d\"]\n</code></pre>\n\n<p>You are trying to invoke <code>Array#split</code> (aka on an array object). As such array method doesn't exists, you get:</p>\n\n<pre><code>error undefined method split for [\"1\", \"2\", \"3\", \"4\"]:Array`\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f7600316dfbe1e6b2905a2b979d1093?s=128&d=identicon&r=PG&f=1", "display_name": "tristan lim", "link": "https://stackoverflow.com/users/8472482/tristan-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "closed_date": 1502903511, "answer_count": 2, "score": -3, "last_activity_date": 1502888721, "creation_date": 1502886612, "last_edit_date": 1502886905, "question_id": 45713603, "link": "https://stackoverflow.com/questions/45713603/why-does-it-keep-saying-that-the-function-split-does-not-exist", "closed_reason": "Needs details or clarity", "title": "Why does it keep saying that the function Split does not exist?", "body": "<pre><code>x = [\"1\", \"2\", \"3\", \"4\"]\n#=&gt; [\"1\", \"2\", \"3\", \"4\"]\n\nx.split(\", \")\n#=&gt; NoMethodError: undefined method `split' for [\"1\", \"2\", \"3\", \"4\"]:Array\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "relational-database"], "comments": [{"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "edited": false, "score": 1, "creation_date": 1502886199, "post_id": 45713344, "comment_id": 78384794, "body": "<code>will retrieve only some Posts</code> what does it mean? you don&#39;t get any results that you expected to get?"}, {"owner": {"reputation": 3299, "user_id": 1749638, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cERvr.jpg?s=128&g=1", "display_name": "coderhs", "link": "https://stackoverflow.com/users/1749638/coderhs"}, "edited": false, "score": 0, "creation_date": 1502886459, "post_id": 45713344, "comment_id": 78385002, "body": "If you want the post which has comments by user with id 1, the above query should work. Unless you expected some other response. Can you tell us the response you got."}, {"owner": {"reputation": 560, "user_id": 5232293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/gSyD1.jpg?s=128&g=1", "display_name": "Jakub Kopy\u015b", "link": "https://stackoverflow.com/users/5232293/jakub-kopy%c5%9b"}, "edited": false, "score": 0, "creation_date": 1502886767, "post_id": 45713344, "comment_id": 78385263, "body": "As I said, I want ALL OF THE POSTS, but do not load all of the posts comments, just comments that meet the condition."}], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 5232293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/gSyD1.jpg?s=128&g=1", "display_name": "Jakub Kopy\u015b", "link": "https://stackoverflow.com/users/5232293/jakub-kopy%c5%9b"}, "edited": false, "score": 1, "creation_date": 1503042560, "post_id": 45715161, "comment_id": 78459745, "body": "well - I do not get posts that do not have any comments - any ideas how to solve this?"}, {"owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "reply_to_user": {"reputation": 560, "user_id": 5232293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/gSyD1.jpg?s=128&g=1", "display_name": "Jakub Kopy\u015b", "link": "https://stackoverflow.com/users/5232293/jakub-kopy%c5%9b"}, "edited": false, "score": 0, "creation_date": 1503053480, "post_id": 45715161, "comment_id": 78466800, "body": "Can you try this, I am not sure this works or not &quot;Post.includes(:comments).where(&quot;comments.user_id = ? or comments.id is null&quot;, &quot;1&quot;).references(:comments)&quot;"}, {"owner": {"reputation": 560, "user_id": 5232293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/gSyD1.jpg?s=128&g=1", "display_name": "Jakub Kopy\u015b", "link": "https://stackoverflow.com/users/5232293/jakub-kopy%c5%9b"}, "edited": false, "score": 0, "creation_date": 1503060156, "post_id": 45715161, "comment_id": 78471104, "body": "Well, it was bad example on my part (I simplified given example, in reality where clause contained other value than foreign key). Translating here I used <code>includes(:comments).where(&#39;comments.user_id IS NULL OR (comments.message = ?&#39;, message).references(:comments)</code>. Thanks to that I get all the Posts (even these without commetns), with comments limited to ones containing specified message."}, {"owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "reply_to_user": {"reputation": 560, "user_id": 5232293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/gSyD1.jpg?s=128&g=1", "display_name": "Jakub Kopy\u015b", "link": "https://stackoverflow.com/users/5232293/jakub-kopy%c5%9b"}, "edited": false, "score": 0, "creation_date": 1503068094, "post_id": 45715161, "comment_id": 78476936, "body": "Great finally found the solution."}], "tags": [], "owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "is_accepted": true, "score": 1, "last_activity_date": 1502890699, "creation_date": 1502890699, "answer_id": 45715161, "question_id": 45713344, "link": "https://stackoverflow.com/questions/45713344/rails-get-associations-on-condition/45715161#45715161", "title": "Rails get associations on condition", "body": "<p>It can be achieved as below </p>\n\n<pre><code>Post.includes(:comments).where(\"comments.user_id = ?\", \"1\").references(:comments)\n</code></pre>\n\n<p>For more information go <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/includes\" rel=\"nofollow noreferrer\">here</a> </p>\n"}], "owner": {"reputation": 560, "user_id": 5232293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/gSyD1.jpg?s=128&g=1", "display_name": "Jakub Kopy\u015b", "link": "https://stackoverflow.com/users/5232293/jakub-kopy%c5%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 45715161, "answer_count": 1, "score": 0, "last_activity_date": 1502890699, "creation_date": 1502885839, "last_edit_date": 1502890584, "question_id": 45713344, "link": "https://stackoverflow.com/questions/45713344/rails-get-associations-on-condition", "title": "Rails get associations on condition", "body": "<p>I have a problem - I do not know how to get associated records only if condition is met.</p>\n\n<p>I have Posts model and Comments, Post <code>has_many :comments</code>, Comment <code>belongs_to :post</code>.</p>\n\n<p>Now, I want to retrieve All of the Posts, but only with specific comments (lets say with user_id = 1).\nHow can I achieve that?\nQuery like</p>\n\n<p><code>Post.includes(:comments).where(\"comments.user_id = ?\", \"1\")</code> will retrieve only some Posts, I want all of them, but only with comments with user_id equal to 1.</p>\n\n<p>I guess I should use LEFT JOIN of some sort, maybe something like </p>\n\n<p><code>posts.joins(\"LEFT JOIN comments ON posts.id comments.post_id\")</code></p>\n\n<p>but I am not sure how to put condition restricting right table results.</p>\n"}, {"tags": ["ruby", "hadoop", "apache-spark", "background-process"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1502887886, "post_id": 45712207, "comment_id": 78386136, "body": "This is a strange question. I work in a place that uses Ruby, Spark, and Hadoop and I can tell you that they&#39;re not architecturally interchangeable like that. Regardless of whether a hadoop-based solution is overall more appropriate for your situation, the issues you mentioned can be solved with an appropriately architected Ruby system. Provide more details about how it&#39;s architected and people can help you."}, {"owner": {"reputation": 4920, "user_id": 534329, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/869d2bd11abd845f2b28c135de7568c7?s=128&d=identicon&r=PG", "display_name": "Nazar Hussain", "link": "https://stackoverflow.com/users/534329/nazar-hussain"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1502916920, "post_id": 45712207, "comment_id": 78403615, "body": "@MarkThomas You are right its an opinionated question majorly based on the scenario of the application. Let me edit the question to add more thoughts into it."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1502937992, "post_id": 45712207, "comment_id": 78409165, "body": "You may want to try Resque with the resque-retry plugin. If they are small jobs you may also want the resque-multi-job-forks plugin. (And resque-kubernetes for scaling if you really need it)"}, {"owner": {"reputation": 336, "user_id": 7243426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f818b85dfe6c35e4e456065ad19b89d?s=128&d=identicon&r=PG&f=1", "display_name": "XYZ123", "link": "https://stackoverflow.com/users/7243426/xyz123"}, "edited": false, "score": 0, "creation_date": 1503442059, "post_id": 45712207, "comment_id": 78614148, "body": "Just to add another option there. Have you looked at open scheduling solutions? <a href=\"https://en.wikipedia.org/wiki/List_of_job_scheduler_software\" rel=\"nofollow noreferrer\">Wikipedia</a> created a simple list, some are open source and may fit your need of parallelization and dependency management."}], "answers": [{"tags": [], "owner": {"reputation": 5534, "user_id": 1938185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a903bd63a59121f73b74e75abd21fe3c?s=128&d=identicon&r=PG", "display_name": "AlainD", "link": "https://stackoverflow.com/users/1938185/alaind"}, "is_accepted": false, "score": 0, "last_activity_date": 1503053260, "creation_date": 1503053260, "answer_id": 45754824, "question_id": 45712207, "link": "https://stackoverflow.com/questions/45712207/long-running-etl-process-background-jobs-spark-hadoop/45754824#45754824", "title": "Long Running ETL Process - Background Jobs, Spark, Hadoop", "body": "<p>In my opinion, I would give a try to Pentaho Data Integrator (PDI) (or Talend).</p>\n\n<p>They where visual tools designed to solve problems like yours. And have a free version downloadable form <a href=\"https://sourceforge.net/projects/pentaho/files/Data%20Integration/\" rel=\"nofollow noreferrer\">SourceForge</a> (just unzip and press the spoon.bat button).</p>\n\n<p>They can a acquire data from FTP and HTTP (among others), decode JSON, and write databases like Postgres. PDI has a free plug-in able to run Ruby code out-of-the-box, so you can save start-up development.</p>\n\n<p>The PDI also has ready made Spark and Hadoop interfaces, so you can implement your hadoop/sparkle servers transparently at a later stage if you need a more <em>metal</em> solution.</p>\n\n<p>The PDI was build for heavy data load and gives you you control on concurrency and remote servers.</p>\n"}], "owner": {"reputation": 4920, "user_id": 534329, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/869d2bd11abd845f2b28c135de7568c7?s=128&d=identicon&r=PG", "display_name": "Nazar Hussain", "link": "https://stackoverflow.com/users/534329/nazar-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503053260, "creation_date": 1502882517, "last_edit_date": 1502917267, "question_id": 45712207, "link": "https://stackoverflow.com/questions/45712207/long-running-etl-process-background-jobs-spark-hadoop", "title": "Long Running ETL Process - Background Jobs, Spark, Hadoop", "body": "<p>I have a scenario in an application where; </p>\n\n<ol>\n<li>Have to load data from multiple sources (more than 10) </li>\n<li>Mostly sources are HTTP/JSON Web Services and some FTP</li>\n<li>Have to process those data and put into a central Database (Postgresql) </li>\n</ol>\n\n<p>Current implementation is done in Ruby using Background jobs. But I see following issues in it; </p>\n\n<ol>\n<li>Very high memory usage </li>\n<li>Jobs stuck sometimes without any error report </li>\n<li>Horizontal scaling is tricky to setup </li>\n</ol>\n\n<p>Does in this scenario, any way Spark or Hadoop can help or a better option. </p>\n\n<p>Please elaborate with some good reasoning. </p>\n\n<p>Update: \nAs per comment, I need to elaborate it further. Here are the points why I thought to Spark or Hadoop. </p>\n\n<ol>\n<li>If we scale the concurrency of running jobs, that also increase heavy load on DB server. I had read though, that Spark and Hadoop are build to face such heavy load even on DB side. </li>\n<li>We can't run more background process then the physical cores of CPU (as recommended by ruby and sidekiq community) </li>\n<li>Concurrency in Ruby is actually dependent on GIL, which is not actually real concurrency supported. So each job can fetch single central data source, if that stuck into an IO call then the source will be locked for it. </li>\n</ol>\n\n<p>All above points considered to be part of builtin architecture of Hadoop &amp; Spark. So I was thinking over lines to look into these tools. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "edited": false, "score": 0, "creation_date": 1502884153, "post_id": 45712062, "comment_id": 78383360, "body": "The <code>resources</code> method just ganerates the <code>&#47;dashboards</code> and <code>&#47;dashboards&#47;:id</code> routes in this case. You dont have a /show route (if you check the rake routes output, you can see your available routes)."}, {"owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "edited": false, "score": 0, "creation_date": 1502884564, "post_id": 45712062, "comment_id": 78383657, "body": "@stockholm_syndrome Try to change <code>show</code> at your form tag to <code>dashboard_path</code> (without quotes)"}, {"owner": {"reputation": 13, "user_id": 8469195, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xpyI2NGMArU/AAAAAAAAAAI/AAAAAAAAAB4/aE316ueRl_w/photo.jpg?sz=128", "display_name": "jjs", "link": "https://stackoverflow.com/users/8469195/jjs"}, "reply_to_user": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "edited": false, "score": 0, "creation_date": 1502898553, "post_id": 45712062, "comment_id": 78394085, "body": "@cnnr, thanks for comment. However using this solution i still receive &quot;No route matches...&quot;"}, {"owner": {"reputation": 13, "user_id": 8469195, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xpyI2NGMArU/AAAAAAAAAAI/AAAAAAAAAB4/aE316ueRl_w/photo.jpg?sz=128", "display_name": "jjs", "link": "https://stackoverflow.com/users/8469195/jjs"}, "reply_to_user": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "edited": false, "score": 0, "creation_date": 1502898557, "post_id": 45712062, "comment_id": 78394087, "body": "My case is the first comment by @Fede Bonisconti. Form works with &quot;/dashboards&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8469195, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xpyI2NGMArU/AAAAAAAAAAI/AAAAAAAAAB4/aE316ueRl_w/photo.jpg?sz=128", "display_name": "jjs", "link": "https://stackoverflow.com/users/8469195/jjs"}, "edited": false, "score": 0, "creation_date": 1503000851, "post_id": 45733563, "comment_id": 78445763, "body": "that is the simple solution and it was under my nose. Thanks for your help!"}], "tags": [], "owner": {"reputation": 2977, "user_id": 8459787, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c4efeb3c2303d4b6b22f3ccf5d149c9b?s=128&d=identicon&r=PG&f=1", "display_name": "artgb", "link": "https://stackoverflow.com/users/8459787/artgb"}, "is_accepted": true, "score": 0, "last_activity_date": 1502968379, "creation_date": 1502968379, "answer_id": 45733563, "question_id": 45712062, "link": "https://stackoverflow.com/questions/45712062/update-index-html-with-db-values-after-selecting-option-from-select-field-rails/45733563#45733563", "title": "Update index.html with db values after selecting option from select field rails", "body": "<p>In your case you have to use following code in <code>routes.rb</code>.</p>\n\n<pre><code>get '/show', to: 'dashboard#show'\n</code></pre>\n\n<p>If you use <code>resources :dashboards</code>, this will make show route automatically to  <code>/dashboards</code> or <code>/dashboards/:id</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 8469195, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xpyI2NGMArU/AAAAAAAAAAI/AAAAAAAAAB4/aE316ueRl_w/photo.jpg?sz=128", "display_name": "jjs", "link": "https://stackoverflow.com/users/8469195/jjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1503003727, "creation_date": 1503003727, "answer_id": 45744918, "question_id": 45712062, "link": "https://stackoverflow.com/questions/45712062/update-index-html-with-db-values-after-selecting-option-from-select-field-rails/45744918#45744918", "title": "Update index.html with db values after selecting option from select field rails", "body": "<p>To sum up, really the big deal for me was exactly the point i mentioned in the title of question. Well, it was written in many sources, however i stumbled.</p>\n\n<p>I want to provide solution that works for me(maybe helpful for someone like me).</p>\n\n<p><code>config/routes.rb</code>:</p>\n\n<pre><code>Rails.application.routes.draw do\n    resources :dashboards, only: [:index, :show] \n    get '/show', to: 'dashboards#show'\n    root to: 'dashboards#index'\nend\n</code></pre>\n\n<p><code>app/controllers/dashboards_controller.rb</code>:</p>\n\n<pre><code>class DashboardsController &lt; ApplicationController\n    def index\n        @dashboards = Dashboard.all\n    end\n\n    def show\n        @dashboard = Dashboard.find(params[:id])\n        respond_to do |format|\n            format.js\n            format.html\n            format.xml\n        end\n    end\nend\n</code></pre>\n\n<p><code>app/views/dashboards/index.html.slim</code>:</p>\n\n<pre><code>.container\n    .child-container\n        .show-date\n            = form_tag('/show',\n                method: :get,\n                remote: true,\n                enforce_utf8: false,\n                class: 'select_date')\n                do\n                = select_tag(:id, options_for_select(Dashboard.all.collect{|d| [d.update_date, d.id]}), {include_blank: true})\n                = submit_tag('Show', name: nil)\n\n        table[id=\"update-container\"]\n</code></pre>\n\n<p><code>app/views/dashboards/_dashboard.html.slim</code></p>\n\n<pre><code>thead\ntr\n  th Carousel\n  th Newbie\n  th Other\ntbody\n  tr\n      td #{dashboard.carousel_info}\n      td #{dashboard.newbie}\n      td #{dashboard.others}\n</code></pre>\n\n<p><code>app/views/dashboards/show.js.coffee</code>:</p>\n\n<pre><code>$('#update-container').empty()\n$('&lt;%= j(render @dashboard) %&gt;').appendTo(\"#update-container\")\n</code></pre>\n\n<p>I really appreciate all for their help! And i'm ready to answer any question.</p>\n"}], "owner": {"reputation": 13, "user_id": 8469195, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xpyI2NGMArU/AAAAAAAAAAI/AAAAAAAAAB4/aE316ueRl_w/photo.jpg?sz=128", "display_name": "jjs", "link": "https://stackoverflow.com/users/8469195/jjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 45733563, "answer_count": 2, "score": 1, "last_activity_date": 1503003727, "creation_date": 1502882121, "last_edit_date": 1502897183, "question_id": 45712062, "link": "https://stackoverflow.com/questions/45712062/update-index-html-with-db-values-after-selecting-option-from-select-field-rails", "title": "Update index.html with db values after selecting option from select field rails", "body": "<p>I'm new to RoR, and currently in process of achieving some testing task.\nWhat I need is to select <code>update_date</code> from <code>select_tag</code> of my form, hit Show button and after that i want to see on that same page(index.html in 'update-container' div) corresponding information from db according to that selected <code>updated_date</code>. I was trying to google it as well as 'stackoverflowed' it, but each time i have just got stuck more &amp; more.</p>\n\n<p>My index.html.slim:</p>\n\n<pre><code>.container\n    .child-container\n        .show-date\n            = form_tag('/show',\n                method: :get,\n                remote: true,\n                enforce_utf8: false,\n                :'data-update-target' =&gt; 'update-container',\n                class: 'select_date')\n                do\n                    = collection_select(:id, :id, Dashboard.all, :id, :update_date)\n\n                = submit_tag 'Show', name: nil\n\n        #update-container\n</code></pre>\n\n<p>My routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n    resources :dashboards, only: [:index, :show]\n    root to: 'dashboards#index'\nend\n</code></pre>\n\n<p>My dashboards_controller.rb: </p>\n\n<pre><code>class DashboardsController &amp;lt; ApplicationController\n    def index\n         @dashboards = Dashboard.all\n    end\n    def show\n        @dashboard = Dashboard.find(params[:id])\n    end\nend\n</code></pre>\n\n<p>From that point i`ve got \"ActionController::RoutingError (No route matches [GET] \"/show\"):\".</p>\n\n<p>I will very appreciate any help. Thanks in advance.</p>\n"}, {"tags": ["ruby", "documentation", "ri"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1502882166, "post_id": 45711752, "comment_id": 78382089, "body": "You are the first ruby dev (that I know) that uses <code>ri</code> :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502888214, "post_id": 45711752, "comment_id": 78386410, "body": "What do you mean you forget the syntax? This <a href=\"https://stackoverflow.com/a/20634180/1978251\">SO Post</a> has a great explanation of the argument order (maybe just book mark it)"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502890597, "post_id": 45711752, "comment_id": 78388232, "body": "@SergioTulentsev I&#39;m the most contrary person I know so that&#39;s not a surprise! :)"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502890739, "post_id": 45711752, "comment_id": 78388346, "body": "@engineersmnky The order of things when I want to hoover up stuff, I try to keep nothing in my head except logic :-) Ta for the link, it&#39;s helpful."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502890814, "post_id": 45711752, "comment_id": 78388402, "body": "NP although logic dictates that remembering syntax is important"}], "answers": [{"comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 2, "creation_date": 1502890852, "post_id": 45715167, "comment_id": 78388433, "body": "Ah! <code>ri ruby:syntax</code> brings up a kind of menu page too, in case I forget the <code>methods</code> part (I will forget:). Very nice, thanks."}, {"owner": {"reputation": 7056, "user_id": 1743811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKlxf.png?s=128&g=1", "display_name": "doubleDown", "link": "https://stackoverflow.com/users/1743811/doubledown"}, "edited": false, "score": 0, "creation_date": 1502982777, "post_id": 45715167, "comment_id": 78435493, "body": "Thanks for this. I&#39;ve been scouring over various ri/rdoc documentations/tutorial/help-pages and I don&#39;t think I&#39;ve seen this (i.e. use <code>ruby:</code> prefix) mentioned anywhere."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 7056, "user_id": 1743811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKlxf.png?s=128&g=1", "display_name": "doubleDown", "link": "https://stackoverflow.com/users/1743811/doubledown"}, "edited": false, "score": 2, "creation_date": 1502984206, "post_id": 45715167, "comment_id": 78436503, "body": "@doubleDown the prefix selects an rdoc data store which is usually a gem. The documentation for <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/rdoc/rdoc/RDoc/Store.html#method-i-source\" rel=\"nofollow noreferrer\"><code>RDoc::Store#source</code></a> mentions that it can also be &quot;home&quot;, &quot;site&quot; and &quot;ruby&quot;."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 1, "creation_date": 1502984260, "post_id": 45715167, "comment_id": 78436546, "body": "@iain there&#39;s also <code>ri ruby:</code> which will list all ruby core pages."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1502890711, "creation_date": 1502890711, "answer_id": 45715167, "question_id": 45711752, "link": "https://stackoverflow.com/questions/45711752/where-are-the-keyword-method-arguments-documented-in-ri/45715167#45715167", "title": "Where are the keyword method arguments documented in ri?", "body": "<p>You can access the static pages via:</p>\n\n<pre><code>$ ri ruby:syntax/methods\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>= Methods\n\nMethods implement the functionality of your program.  Here is a simple method\ndefinition:\n\n  def one_plus_one\n    1 + 1\n  end\n\nA method definition consists of the def keyword, a method name, the body of\nthe method, return value and the end keyword.  When called the method will\nexecute the body of the method.  This method returns 2.\n\nThis section only covers defining methods.  See also the {syntax documentation\non calling methods}[rdoc-ref:syntax/calling_methods.rdoc].\n\n[...]\n</code></pre>\n"}], "owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1513984464, "accepted_answer_id": 45715167, "answer_count": 1, "score": 3, "last_activity_date": 1502890711, "creation_date": 1502881204, "question_id": 45711752, "link": "https://stackoverflow.com/questions/45711752/where-are-the-keyword-method-arguments-documented-in-ri", "closed_reason": "Not suitable for this site", "title": "Where are the keyword method arguments documented in ri?", "body": "<p>I often forget the syntax for the newer keyword arguments when I want to scoop up extra arguments with double splats and the like. The online Ruby docs has articles such as <a href=\"http://ruby-doc.org/core-2.1.0/doc/syntax/methods_rdoc.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.1.0/doc/syntax/methods_rdoc.html</a> and <a href=\"http://ruby-doc.org/core-2.0.0/doc/syntax/calling_methods_rdoc.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.0.0/doc/syntax/calling_methods_rdoc.html</a>, but how could I access this info via <code>ri</code>?</p>\n\n<p>Or is <code>ri</code> (as implied by the interactive mode's question \"Enter the method name you want to look up\") the only sort of thing it will find?</p>\n\n<p>Any help or insight will be much appreciated.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": true, "score": 3, "last_activity_date": 1502880744, "creation_date": 1502880744, "answer_id": 45711600, "question_id": 45711520, "link": "https://stackoverflow.com/questions/45711520/ruby-what-does-star-prefix-means-in-a-loop-variable/45711600#45711600", "title": "Ruby what does star prefix means in a loop variable?", "body": "<p>It's called the <em>splat operator</em>, and it unpacks an array into single method arguments. In this case, because the function presumably expects two more arguments after the format string, it's equivalent to:</p>\n\n<pre><code>messages = EventNotification.where('user_id = ? AND message_template = ?',\n                                   combination[0], combination[1])\n</code></pre>\n\n<p>In other languages, this feature is often called \"varargs\".</p>\n"}], "owner": {"reputation": 57, "user_id": 4050248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gxTVtgGoQH4/AAAAAAAAAAI/AAAAAAAAABM/nAqvf6p3G2c/photo.jpg?sz=128", "display_name": "Ji\u0159&#237; Vojta", "link": "https://stackoverflow.com/users/4050248/ji%c5%99%c3%ad-vojta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1502888557, "accepted_answer_id": 45711600, "answer_count": 1, "score": 1, "last_activity_date": 1502880744, "creation_date": 1502880537, "question_id": 45711520, "link": "https://stackoverflow.com/questions/45711520/ruby-what-does-star-prefix-means-in-a-loop-variable", "closed_reason": "Duplicate", "title": "Ruby what does star prefix means in a loop variable?", "body": "<p>I've ecountered this today and I have no idea what it means. I tried to google it but I had no luck. Can someone explain this to me?</p>\n\n<pre><code>combinations.each do |combination|\n  messages = EventNotification.where('user_id = ? AND message_template = ?', *combination)\n  ...\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "cloudinary"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1502879367, "post_id": 45710798, "comment_id": 78380126, "body": "you upload them to local filesystem, not to cloudinary"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1502879710, "post_id": 45710798, "comment_id": 78380381, "body": "Do I just need to remove <code>def store_dir</code> ?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1502879847, "post_id": 45710798, "comment_id": 78380464, "body": "yes. and put a <code>public_id</code> method inside uploader. <a href=\"https://gist.github.com/marmeladze/3260c82263b6d2c30ab63184962380a0\" rel=\"nofollow noreferrer\">gist.github.com/marmeladze/3260c82263b6d2c30ab63184962380a0</a>"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1502880247, "post_id": 45710798, "comment_id": 78380741, "body": "I get this <code>undefined method title for #&lt;CoverAttachment:0x007fdd13a39038&gt;</code>. Is it the same if I do <code>model.class.name.parameterize</code> instead of <code>model.title.parametize</code> ?"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1502880725, "post_id": 45710798, "comment_id": 78381073, "body": "It works ! Thank you ! :)"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1502881091, "post_id": 45710798, "comment_id": 78381373, "body": "i forget to add, i have title method/property defined for all models. pick whatever you want."}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502878677, "creation_date": 1502878349, "last_edit_date": 1502878677, "question_id": 45710798, "link": "https://stackoverflow.com/questions/45710798/why-images-doesnt-save-in-cloudinary-using-cloudinary-carrierwave", "title": "Why images doesn&#39;t save in cloudinary using Cloudinary/Carrierwave?", "body": "<p>I'm uploading multiples <code>photos</code> and multiple <code>logos</code> in my model <code>Cover</code>. They are both correctly saved in DB but NOT in cloudinary.</p>\n\n<p>As the configuration is the same for <code>logos</code> and <code>photos</code> I'll show you just once.</p>\n\n<p>I've followed <a href=\"https://stackoverflow.com/questions/21411988/rails-4-multiple-image-or-file-upload-using-carrierwave\">this</a> to configurate multiple upload and <a href=\"http://cloudinary.com/blog/ruby_on_rails_image_uploads_with_carrierwave_and_cloudinary\" rel=\"nofollow noreferrer\">this</a> for cloudinary config.</p>\n\n<p><strong>cover.rb</strong></p>\n\n<pre><code>class Cover &lt; ApplicationRecord\n  has_many :cover_attachments\n  accepts_nested_attributes_for :cover_attachments\nend\n</code></pre>\n\n<p><strong>cover_attachment.rb</strong></p>\n\n<pre><code>class CoverAttachment &lt; ApplicationRecord\n  mount_uploader :photo, PhotoUploader\n  mount_uploader :logo, LogoUploader\n  belongs_to :cover\nend\n</code></pre>\n\n<p><strong>photo_uploader.rb</strong></p>\n\n<pre><code>class PhotoUploader &lt; CarrierWave::Uploader::Base\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  # include CarrierWave::MiniMagick\n  include Cloudinary::CarrierWave\n\n  process convert: 'png'\n  process tags: ['cover_photo']\n\n  version :standard do\n    process resize_to_fill: [100, 150, :north]\n  end\n\n  version :thumbnail do\n    resize_to_fit(50, 50)\n  end\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\nend\n</code></pre>\n\n<p><strong>_form.html.slim</strong></p>\n\n<pre><code>= simple_form_for [current_user, @book, @cover], html: { multipart: true } do |f|\n\n   = f.label :photo, 'photos'\n   = f.file_field :photo, multiple: true, name: \"cover_attachments[photo][]\"\n\n ...\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>  create_table \"cover_attachments\", force: :cascade do |t|\n    t.string   \"photo\"\n    t.string   \"logo\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer  \"cover_id\"\n  end\n\n  create_table \"cover_type_users\", force: :cascade do |t|\n    t.integer  \"cover_id\"\n    t.string   \"cover_type\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"cover_id\"], name: \"index_cover_type_users_on_cover_id\", using: :btree\n  end\n\n  create_table \"covers\", force: :cascade do |t|\n    ...\n  end\n</code></pre>\n\n<p><strong>covers_controller.rb</strong></p>\n\n<pre><code> def create\n    if @cover.save\n       params[:cover_attachments]['photo'].each do |a|\n         @cover_attachment = @cover.cover_attachments.create!(photo: a)\n       end\n    ...\n    end\n end\n</code></pre>\n\n<p><strong>terminal output</strong></p>\n\n<pre><code>Processing by CoversController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"VnBZ7iysnNsl8oVbBjqvPd8ZbsMQrn0JQCOtg5kSHnjovVOhFPBcyu1xzXCytVkXrHH1b+TcpbnCire7XB9hSg==\", \"cover\"=&gt;{\"design_tags\"=&gt;\"kjh\", \"client_wishes\"=&gt;\"kj\", \"format\"=&gt;\"12X24\", \"isbn\"=&gt;\"\", \"selling_price\"=&gt;\"\", \"book_id\"=&gt;\"210\"}, \"cover_attachments\"=&gt;{\"photo\"=&gt;[#&lt;ActionDispatch::Http::UploadedFile:0x007f8698ce73b0 @tempfile=#&lt;Tempfile:/var/folders/0w/pznf2h6j0q9gqcbcthg1kgm40000gn/T/RackMultipart20170816-9346-1qrdd6j.jpg&gt;, @original_filename=\"andrew-neel-266219.jpg\", @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data; name=\\\"cover_attachments[photo][]\\\"; filename=\\\"andrew-neel-266219.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;]}, \"commit\"=&gt;\"poursuivre\", \"user_id\"=&gt;\"112\", \"book_id\"=&gt;\"210\", \"id\"=&gt;\"188\"}\n\n ....\n\n SQL (6.8ms)  INSERT INTO \"cover_attachments\" (\"photo\", \"created_at\", \"updated_at\", \"cover_id\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"photo\", \"j43shp8bkjfg0wsc8y3r.png\"], [\"created_at\", 2017-08-16 10:12:58 UTC], [\"updated_at\", 2017-08-16 10:12:58 UTC], [\"cover_id\", 188]]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "whitelist", "blacklist"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6059539"}, "edited": false, "score": 0, "creation_date": 1502880247, "post_id": 45710956, "comment_id": 78380739, "body": "that requires blacklist_users and whitelist_users to be related to the users model but they are only related to the b_page model"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6059539"}, "edited": false, "score": 0, "creation_date": 1502881119, "post_id": 45710956, "comment_id": 78381396, "body": "plus what I want is to use the whitelist and the blacklist together"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1502878829, "creation_date": 1502878829, "answer_id": 45710956, "question_id": 45710781, "link": "https://stackoverflow.com/questions/45710781/ruby-on-rails-using-whitelist-and-blacklists-to-allow-current-user-to-see-page/45710956#45710956", "title": "Ruby on Rails using whitelist and blacklists to allow current user to see page", "body": "<p>If they're separate models, then you can do this in your controller action. Devise comes with a method, user_signed_in?, which will tell you if a user is signed in or not. In your case:</p>\n\n<pre><code>blacklist_user_signed_in?\nwhitelist_user_signed_in?\n</code></pre>\n\n<p>Then in your controller action for showing the page:</p>\n\n<pre><code>if blacklist_user_signed_in?\n  return redirect_to root_path,\n         notice: 'You are not alllowed to access this part of the site'\nend\n</code></pre>\n\n<p>This assumes your models are called blacklist_user and whitelist_user. If they simply have attributes and are the same model, you can do:</p>\n\n<pre><code> current_user.blacklisted?\n</code></pre>\n\n<p>and in your user model</p>\n\n<pre><code>def blacklisted?\n  blacklist\nend\n</code></pre>\n\n<p>Once more that assumes you have an attribute called 'blacklist' in your 'user' model.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6059539"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1502878829, "creation_date": 1502878303, "last_edit_date": 1502878616, "question_id": 45710781, "link": "https://stackoverflow.com/questions/45710781/ruby-on-rails-using-whitelist-and-blacklists-to-allow-current-user-to-see-page", "title": "Ruby on Rails using whitelist and blacklists to allow current user to see page", "body": "<p>basically I want to see if the user has added any blacklist_users or whitelist_users and then allow or disallow them according to that but I am having trouble figuring out the code properly:(us_id is basically user_id)</p>\n\n<p>Relationship:\n  Blacklist_user model:</p>\n\n<pre><code>belongs_to :b_page\n</code></pre>\n\n<p>Whitelist_user model:</p>\n\n<pre><code> belongs_to :b_page\n</code></pre>\n\n<p>B_page model:</p>\n\n<pre><code>   has_many :whitelist_user\n   has_many :blacklist_user\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>if !(@b_page.whitelist_user.empty?)\n   @whitelist_users = @b_page.whitelist_user.map(&amp;:us_id)\n   @whitelist_users.push(@b_page.user.id)\n else\n   @whitelist_users = []\n end    \n if !(@b_page.blacklist_user.empty?)\n   @blacklist_users = @b_page.blacklist_user.map(&amp;:us_id)\n  else\n   @b_page.blacklist_user = []\n   @blacklist_users = @b_page.blacklist_user.map(&amp;:us_id)\n end\n</code></pre>\n\n<p>views:</p>\n\n<pre><code>&lt;% if ((!(@whitelist_users.empty?)) &amp;&amp; @whitelist_users.include?(current_user.id)) || ((!(@blacklist_users.empty?)) &amp;&amp; @blacklist_users.exclude?(current_user.id)) %&gt;\n&lt;!-- show bpage --&gt;\n\n\n&lt;% elsif ! ((!((@whitelist_users.empty?)) &amp;&amp; @whitelist_users.include?(current_user.id)) || ((!(@blacklist_users.empty?)) &amp;&amp; @blacklist_users.exclude?(current_user.id)))%&gt;\n&lt;!-- user not allowed--&gt;\n&lt;% else %&gt;\n&lt;!-- show bpage--&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>but when I sign in as the @b_page.user i get the (btw I use devise)\nis there any better way to implement this, instead of complicating it even more</p>\n"}, {"tags": ["ruby", "rspec", "stub"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 7, "last_activity_date": 1502878356, "creation_date": 1502878356, "answer_id": 45710804, "question_id": 45710739, "link": "https://stackoverflow.com/questions/45710739/rspec-stub-same-method-in-loop/45710804#45710804", "title": "RSpec Stub same method in loop", "body": "<p>Just stub once and supply <a href=\"https://relishapp.com/rspec/rspec-mocks/docs/configuring-responses/returning-a-value#specify-different-return-values-for-multiple-calls\" rel=\"noreferrer\">all the return values</a>.</p>\n\n<pre><code>expect(Thing).to receive(:status)\n                .with(for: 'something')\n                .and_return('down', 'up')\n</code></pre>\n\n<p>First time <code>status</code> is called, it will return <code>'down'</code>. Second time it will return <code>'up'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "is_accepted": false, "score": 1, "last_activity_date": 1502878388, "creation_date": 1502878388, "answer_id": 45710816, "question_id": 45710739, "link": "https://stackoverflow.com/questions/45710739/rspec-stub-same-method-in-loop/45710816#45710816", "title": "RSpec Stub same method in loop", "body": "<p>You can specify multiple return values when stubbing rspec method calls</p>\n\n<p>see <a href=\"https://relishapp.com/rspec/rspec-mocks/docs/configuring-responses/returning-a-value#specify-different-return-values-for-multiple-calls\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-mocks/docs/configuring-responses/returning-a-value#specify-different-return-values-for-multiple-calls</a></p>\n"}], "owner": {"reputation": 4344, "user_id": 4852737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XcBMb.jpg?s=128&g=1", "display_name": "joshweir", "link": "https://stackoverflow.com/users/4852737/joshweir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 1, "accepted_answer_id": 45710804, "answer_count": 2, "score": 2, "last_activity_date": 1502878388, "creation_date": 1502878187, "question_id": 45710739, "link": "https://stackoverflow.com/questions/45710739/rspec-stub-same-method-in-loop", "title": "RSpec Stub same method in loop", "body": "<p>Using RSpec, I want to:</p>\n\n<pre><code>expect(Thing).to receive(:status)\n                .with(for: 'something')\n                .and_return('down')\n</code></pre>\n\n<p>on the first iteration, and the same stub should return a different return on the 2nd iteration: </p>\n\n<pre><code>expect(Thing).to receive(:status)\n                .with(for: 'something')\n                .and_return('up')\n</code></pre>\n\n<p>when testing the below code snippet:</p>\n\n<pre><code>2.times do |i|\n  break if Thing.status(for: 'something') == 'up'\n  sleep 2\n  raise MyError if i &gt; 0\nend\n</code></pre>\n\n<p>How would I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "ruby-on-rails-5", "has-one"], "comments": [{"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502878080, "post_id": 45710510, "comment_id": 78379323, "body": "Basically <code>selection.default_choice</code> returns always the first choice of <code>selection.choices</code>."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502878286, "post_id": 45710510, "comment_id": 78379441, "body": "Can you post the SQL query that runs when you do <code>selection.default_choice</code>"}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502879082, "post_id": 45710510, "comment_id": 78379947, "body": "I updated the question adding the SQL query"}], "answers": [{"comments": [{"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502879839, "post_id": 45711258, "comment_id": 78380457, "body": "This is clear to me. But how can I set a specific <code>default_choice</code> then?"}, {"owner": {"reputation": 428, "user_id": 2032148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R53PU.jpg?s=128&g=1", "display_name": "meshin", "link": "https://stackoverflow.com/users/2032148/meshin"}, "reply_to_user": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502880717, "post_id": 45711258, "comment_id": 78381069, "body": "That&#39;s a whole another question than you&#39;ve asked.  You can do something like add column on Choice that will be <code>true</code> if it&#39;s default choice. Then has_one relationship would need to have scope to get only choice that is default true like this:   <code>has_one  :default_choice, -&gt; { where default_choice: true }, class_name: &#39;Choice&#39;</code>"}], "tags": [], "owner": {"reputation": 428, "user_id": 2032148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R53PU.jpg?s=128&g=1", "display_name": "meshin", "link": "https://stackoverflow.com/users/2032148/meshin"}, "is_accepted": true, "score": 0, "last_activity_date": 1502880922, "last_edit_date": 1502880922, "creation_date": 1502879727, "answer_id": 45711258, "question_id": 45710510, "link": "https://stackoverflow.com/questions/45710510/get-unexpected-result-from-has-one-relationship/45711258#45711258", "title": "Get unexpected result from has_one relationship", "body": "<p>You're using the same model <code>Choice</code> for both relationships <code>has_many :choiches</code> and <code>has_one :default_choice</code>. So when you query <code>has_one :default_choice</code> result are all from <code>choices</code> table and with <code>has_one</code> you only get one result which is the first it finds referenced to Selection object.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>To implement default on has_many you can do something like add column on Choice model that will be true if it's default choice. Then has_one relationship would need to have scope to get only choice that is default true like this: </p>\n\n<pre><code>has_one :default_choice, -&gt; { where default_choice: true }, class_name: 'Choice'\n</code></pre>\n"}], "owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 45711258, "answer_count": 1, "score": 0, "last_activity_date": 1502880922, "creation_date": 1502877547, "last_edit_date": 1502879050, "question_id": 45710510, "link": "https://stackoverflow.com/questions/45710510/get-unexpected-result-from-has-one-relationship", "title": "Get unexpected result from has_one relationship", "body": "<p>I have a <code>Selection</code> model which has many <code>Choices</code> and one <code>DefaultChoice</code>.\nThe relation is structured this way.</p>\n\n<p>Models (I think here there is something wrong)\n</p>\n\n<pre><code>class Selection &lt; ApplicationRecord\n  has_many :choices, dependent: :delete_all\n  has_one  :default_choice, class_name: 'Choice'\nend\n\nclass Choice &lt; ApplicationRecord\n  belongs_to Selection\nend\n</code></pre>\n\n<p>Migration\n</p>\n\n<pre><code>create_table :selections do |t|\n  t.references :default_choice, index: true\nend\ncreate_table :choices do |t|\n  t.belongs_to :selection\nend\n</code></pre>\n\n<p>Somehow something is not right:</p>\n\n\n\n<pre><code># let's say:\nselection = Selection.find(1)\nselection.choices &lt;&lt; Choice.find(1)\nselection.choices &lt;&lt; Choice.find(2)\nselection.default_choice = Choice.find(2)\nselection.save!\n\n# then\nselection.default_choice_id = 2\n# but\nselection.default_choice.id = 1\n</code></pre>\n\n<p>How come?!</p>\n\n<p><code>selection.default_choice</code> generates this query:</p>\n\n<pre><code>Choice Load (0.5ms)  SELECT  \"choices\".* FROM \"choices\" WHERE \"choices\".\"selection_id\" = $1 LIMIT $2  [[\"selection_id\", 1], [\"LIMIT\", 1]]\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502878312, "post_id": 45710185, "comment_id": 78379459, "body": "Check the Rails logs, there should a full trace for the 500 error, which will tell you where&#39;s the problem"}, {"owner": {"reputation": 1977, "user_id": 6727030, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f95eb6d3502a06352809f5f843815b44?s=128&d=identicon&r=PG&f=1", "display_name": "PrepareFor", "link": "https://stackoverflow.com/users/6727030/preparefor"}, "reply_to_user": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502883662, "post_id": 45710185, "comment_id": 78383039, "body": "@a.barbieri it said  Processing by RecipesController#like as JSON   Parameters: {&quot;id&quot;=&gt;&quot;1&quot;} Can&#39;t verify CSRF token authenticity"}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502883778, "post_id": 45710185, "comment_id": 78383119, "body": "Do you have <code>&lt;%= csrf_meta_tags %&gt;</code> in your view?"}, {"owner": {"reputation": 1977, "user_id": 6727030, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f95eb6d3502a06352809f5f843815b44?s=128&d=identicon&r=PG&f=1", "display_name": "PrepareFor", "link": "https://stackoverflow.com/users/6727030/preparefor"}, "reply_to_user": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502883813, "post_id": 45710185, "comment_id": 78383137, "body": "@a.barbieri no! can i just  insert that code in my view?"}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "edited": false, "score": 0, "creation_date": 1502883850, "post_id": 45710185, "comment_id": 78383162, "body": "This might be a good starting point. It should go in the <code>head</code>."}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 8328756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4decaa38fd995e3b68d6024f8beb3b94?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Van Deuren", "link": "https://stackoverflow.com/users/8328756/leo-van-deuren"}, "is_accepted": true, "score": 4, "last_activity_date": 1502986696, "creation_date": 1502986696, "answer_id": 45740298, "question_id": 45710185, "link": "https://stackoverflow.com/questions/45710185/rails-xhr-send-options-hascontent-options-data-null-error/45740298#45740298", "title": "rails xhr.send( ( options.hasContent &amp;&amp; options.data ) || null ); error", "body": "<p>Looks like you are missing your data attribute in you post ajax request that might be throwing the error.</p>\n\n<pre><code>function like(id){\n    $.ajax({\n        url:\"/like/\" + id,\n        type:\"POST\",\n        dataType:\"json\",\n        data: my_data, // &lt;--- HERE\n        success: function(data){\n            if(data.result){\n                $(\"#countlike\").html(\"likes \" + data.count);\n                // $(\"#count\").removeAttr('onclick');\n                // $(\"#count\").attr('disabled', 'disabled');\n            }\n        }\n    });\n}\n</code></pre>\n\n<p>Hope it helps. Cheers!</p>\n"}], "owner": {"reputation": 1977, "user_id": 6727030, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f95eb6d3502a06352809f5f843815b44?s=128&d=identicon&r=PG&f=1", "display_name": "PrepareFor", "link": "https://stackoverflow.com/users/6727030/preparefor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14939, "favorite_count": 0, "accepted_answer_id": 45740298, "answer_count": 1, "score": 0, "last_activity_date": 1502986696, "creation_date": 1502876591, "question_id": 45710185, "link": "https://stackoverflow.com/questions/45710185/rails-xhr-send-options-hascontent-options-data-null-error", "title": "rails xhr.send( ( options.hasContent &amp;&amp; options.data ) || null ); error", "body": "<p>I trying to make like button for each recipe </p>\n\n<p>but if i click like button browser said </p>\n\n<p>xhr.send( ( options.hasContent &amp;&amp; options.data ) || null );</p>\n\n<p>return this errors</p>\n\n<p>I don't know why this error occurred</p>\n\n<p>this is my code in rails </p>\n\n<p><code>application.js</code></p>\n\n<pre><code>function like(id){\n    $.ajax({\n        url:\"/like/\" + id,\n        type:\"POST\",\n        dataType:\"json\",\n        success: function(data){\n            if(data.result){\n                $(\"#countlike\").html(\"likes \" + data.count);\n                // $(\"#count\").removeAttr('onclick');\n                // $(\"#count\").attr('disabled', 'disabled');\n            }\n        }\n    });\n}\n</code></pre>\n\n<p><code>route.rb</code></p>\n\n<pre><code>post '/like/:id'=&gt;'recipes#like' \n</code></pre>\n\n<p><code>views/recipes/show.html.erb</code></p>\n\n<pre><code>&lt;p&gt;\n  &lt;a id = \"countlike\" onclick=\"like(&lt;%=@recipe.id%&gt;)\"&gt;Like it&lt;/a&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p><code>recipes_controller.rb</code></p>\n\n<pre><code>  def like\n      likes = Recipe.find(params[:id]).likes           \n      result = likes.create \n      render json:{result: result, count: likes.count}\n  end\n</code></pre>\n\n<p>It was work correctly in other project same code</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncable"], "owner": {"reputation": 189, "user_id": 3978752, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e66d75a76c4af053305b0e2021788e7?s=128&d=identicon&r=PG&f=1", "display_name": "Rares R", "link": "https://stackoverflow.com/users/3978752/rares-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1502875585, "creation_date": 1502875585, "question_id": 45709829, "link": "https://stackoverflow.com/questions/45709829/actioncable-stream-only-if-the-user-is-on-a-specific-page", "title": "ActionCable Stream only if the user is on a specific page", "body": "<p>I'm trying to implement a new feature that requires a bit of real time functionality. My project is built using Rails 5.1 and I want to achieve my goals using ActionCable.</p>\n\n<p>Basically I have a dashboard with multiple widgets. Each widget displaying a certain informations like RAM &amp; CPU usage, Git Hub Pull Requests Count, Issues Count, Honey Badger errors count, etc..</p>\n\n<p>There is a Sidekiq job that runs every 30 seconds and saves the data in the DB. Right in the web page ( dashboards#show ) where the dashboard displays the widgets, I have a JS interval that pull data from the server every X (usually is set to 30s / 45s) seconds.</p>\n\n<p>I want from the job to stream the values to a dashboard channel ( each dashboard will have its own channel ) using ActionCable. </p>\n\n<p>My question is: how do I stream only to dashboards that are \"online\", how do I know if the page www.myapp.com/dashboards/1 is used?</p>\n\n<p>Lets say I have 1000 dashboards, I don't want to stream data to all of the from the job, only to the dashboards that are \"used\".</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reform", "trailblazer"], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1502873821, "post_id": 45709148, "comment_id": 78376346, "body": "The same pattern also works for regular arguments. A single splat parameter will accept any argument but does not assign them to a variable."}, {"owner": {"reputation": 341, "user_id": 4235629, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000135107066/picture?type=large", "display_name": "Raphael Monteiro", "link": "https://stackoverflow.com/users/4235629/raphael-monteiro"}, "edited": false, "score": 0, "creation_date": 1527867014, "post_id": 45709148, "comment_id": 88304013, "body": "Do you have a source for this info? Tks!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 341, "user_id": 4235629, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000135107066/picture?type=large", "display_name": "Raphael Monteiro", "link": "https://stackoverflow.com/users/4235629/raphael-monteiro"}, "edited": false, "score": 0, "creation_date": 1527868916, "post_id": 45709148, "comment_id": 88305063, "body": "@RaphaelMonteiro: I&#39;m pretty sure it&#39;s briefly described (or the description is linked to) in the ruby release notes."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 9, "last_activity_date": 1502873965, "last_edit_date": 1502873965, "creation_date": 1502873697, "answer_id": 45709148, "question_id": 45709089, "link": "https://stackoverflow.com/questions/45709089/what-does-double-splat-argument-mean-in-this-code-example-and-why-use-it/45709148#45709148", "title": "What does double splat (**) argument mean in this code example and why use it?", "body": "<blockquote>\n  <p>what does <code>**</code> mean in the block above?</p>\n</blockquote>\n\n<p>It's a kwsplat, but it's not assigned a name. So this method will accept arbitrary set of keyword arguments and ignore all but <code>:fragment</code>.</p>\n\n<blockquote>\n  <p>why use this syntax?</p>\n</blockquote>\n\n<p>To ignore arguments you're not interested in.</p>\n\n<hr>\n\n<p>A little demo</p>\n\n<pre><code>class Person\n  attr_reader :name, :age\n\n  def initialize(name:, age:)\n    @name = name\n    @age = age\n  end\n\n  def description\n    \"name: #{name}, age: #{age}\"\n  end\nend\n\nclass Rapper &lt; Person\n  def initialize(name:, **)\n    name = \"Lil #{name}\" # amend one argument\n    super # send name and the rest (however many there are) to super\n  end\nend\n\nPerson.new(name: 'John', age: 25).description # =&gt; \"name: John, age: 25\"\nRapper.new(name: 'John', age: 25).description # =&gt; \"name: Lil John, age: 25\"\n</code></pre>\n"}], "owner": {"reputation": 2451, "user_id": 597082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f4b3671d7e1ba608d1d9065fd3a964ff?s=128&d=identicon&r=PG", "display_name": "Dorian", "link": "https://stackoverflow.com/users/597082/dorian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 1, "accepted_answer_id": 45709148, "answer_count": 1, "score": 3, "last_activity_date": 1502873965, "creation_date": 1502873546, "question_id": 45709089, "link": "https://stackoverflow.com/questions/45709089/what-does-double-splat-argument-mean-in-this-code-example-and-why-use-it", "title": "What does double splat (**) argument mean in this code example and why use it?", "body": "<p>So I've been over Traiblazer and Reform documentation and I often see this kind of code</p>\n\n<pre><code>class AlbumForm &lt; Reform::Form\n  collection :songs, populate_if_empty: :populate_songs! do\n    property :name\n  end\n\n  def populate_songs!(fragment:, **)\n    Song.find_by(name: fragment[\"name\"]) or Song.new\n  end\nend\n</code></pre>\n\n<p>Notice the <code>def populate_songs!(fragment:, **)</code> definition?</p>\n\n<p>I'm well aware of double splat named arguments (like <code>**others</code>) that capture all other keyword arguments. But I've never seen <code>**</code> alone, without a name.</p>\n\n<p>So my 2 questions are:</p>\n\n<ol>\n<li>what does ** mean in the block above?</li>\n<li>why use this syntax?</li>\n</ol>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1502872410, "post_id": 45708723, "comment_id": 78375427, "body": "Do you know what is it that <code>inject</code> does? And how it uses its block? Reading the documentation might help."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502872657, "post_id": 45708723, "comment_id": 78375587, "body": "So, if your question is about using inject to do this, go read inject&#39;s documentation and maybe come back with a better question. if you don&#39;t care about inject and only need the hash, then use <code>data_arr.to_h</code> or <code>Hash[data_arr]</code> (if the first one doesn&#39;t work)"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1502874407, "post_id": 45709131, "comment_id": 78376697, "body": "Note that the question is &quot;why do I <b>not</b> need to initialize...&quot;. Is that &quot;not&quot; not supposed to be there? Or are they asking &quot;why don&#39;t I have to do <code>data_hash = {}</code> before the inject?&quot; Who knows! :shrug:"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502874653, "post_id": 45709131, "comment_id": 78376886, "body": "@SergioTulentsev thanks, totally overlooked that :-) I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1502874620, "last_edit_date": 1502874620, "creation_date": 1502873650, "answer_id": 45709131, "question_id": 45708723, "link": "https://stackoverflow.com/questions/45708723/issue-with-using-inject-to-convert-array-to-hash/45709131#45709131", "title": "issue with using inject to convert array to hash", "body": "<blockquote>\n  <p>why do I not need to initialize <code>data_hash</code> as an empty hash?</p>\n</blockquote>\n\n<p>You do, implicitly. The value passed to <code>inject</code>, i.e. <code>{}</code> will become the initial value for <code>hsh</code> which will eventually become the value for <code>data_hash</code>. According to the <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>At the end of the iteration, the final value of <em>memo</em> is the return value for the method.</p>\n</blockquote>\n\n<p>Let's see what happens if we don't pass <code>{}</code>:</p>\n\n<blockquote>\n  <p>If you do not explicitly specify an <em>initial</em> value for <em>memo</em>, then the first element of collection is used as the initial value of <em>memo</em>.</p>\n</blockquote>\n\n<p>The first element of your collection is the array <code>['dog', 'Fido']</code>. If you omit <code>{}</code>, then <code>inject</code> would use that array as the initial value for <code>hsh</code>. The subsequent call to <code>hsh[v[0]] = v[1]</code> would fail, because of:</p>\n\n<pre><code>hsh = ['dog', 'Fido']\nhsh['cat'] = 'Whiskers'\n#=&gt; TypeError: no implicit conversion of String into Integer\n</code></pre>\n\n<blockquote>\n  <p>why do I have to add hsh in the last line</p>\n</blockquote>\n\n<p>Again, let's check the documentation:</p>\n\n<blockquote>\n  <p>[...] the result [of the specified block] becomes the new value for <em>memo</em>.</p>\n</blockquote>\n\n<p><code>inject</code> expects you to return the new value for <code>hsh</code> at the end of the block.</p>\n\n<blockquote>\n  <p>if not it will result in an error.</p>\n</blockquote>\n\n<p>That's because an assignment like <code>hsh[v[0]] = v[1]</code> returns the assigned value, e.g. <code>'Fido'</code>. So if you omit the last line, <code>'Fido'</code> becomes the new value for <code>hsh</code>:</p>\n\n<pre><code>hsh = 'Fido'\nhsh['cat'] = 'Whiskers'\n#=&gt; IndexError: string not matched\n</code></pre>\n\n<hr>\n\n<p>There's also <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>each_with_object</code></a> which works similar to <code>inject</code>, but assumes that you want to mutate the same object within the block. It therefore doesn't require you to return it at the end of the block: (note that the argument order is reversed)</p>\n\n<pre><code>data_hash = data_arr.each_with_object({}) do |v, hsh|\n  hsh[v[0]] = v[1]\nend\n#=&gt; {\"dog\"=&gt;\"Fido\", \"cat\"=&gt;\"Whiskers\", \"fish\"=&gt;\"Fluffy\"}\n</code></pre>\n\n<p>or using <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/methods_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">array decomposition</a>:</p>\n\n<pre><code>data_hash = data_arr.each_with_object({}) do |(k, v), hsh|\n  hsh[k] = v\nend\n#=&gt; {\"dog\"=&gt;\"Fido\", \"cat\"=&gt;\"Whiskers\", \"fish\"=&gt;\"Fluffy\"}\n</code></pre>\n\n<p>Although to convert your array to a hash you can simply use <a href=\"http://ruby-doc.org/core-2.4.1/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>Array#to_h</code></a>, which is</p>\n\n<blockquote>\n  <p>[...] interpreting <em>ary</em> as an array of <code>[key, value]</code> pairs</p>\n</blockquote>\n\n<pre><code>data_arr.to_h\n#=&gt; {\"dog\"=&gt;\"Fido\", \"cat\"=&gt;\"Whiskers\", \"fish\"=&gt;\"Fluffy\"}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 45709131, "answer_count": 1, "score": -1, "last_activity_date": 1502874620, "creation_date": 1502872308, "question_id": 45708723, "link": "https://stackoverflow.com/questions/45708723/issue-with-using-inject-to-convert-array-to-hash", "title": "issue with using inject to convert array to hash", "body": "<pre><code>data_arr = [['dog', 'Fido'], ['cat', 'Whiskers'], ['fish', 'Fluffy']]\n\ndata_hash = data_arr.inject({}) do |hsh, v|\n    hsh[v[0]] = v[1]\n    hsh\nend\n</code></pre>\n\n<p>Hi, why do I not need to initialize data_hash as an empty hash? And why do I have to add hsh in the last line if not it will result in an error.</p>\n"}, {"tags": ["ruby", "rails-activerecord", "ruby-on-rails-5", "has-many-through", "has-many"], "comments": [{"owner": {"reputation": 3164, "user_id": 193785, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b9110bc3c6f788945c789bf190932dc1?s=128&d=identicon&r=PG", "display_name": "BookOfGreg", "link": "https://stackoverflow.com/users/193785/bookofgreg"}, "edited": false, "score": 0, "creation_date": 1502873224, "post_id": 45708294, "comment_id": 78375939, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19770888/rails-self-join-scheme-with-has-and-belongs-to-many\">Rails: self join scheme with has_and_belongs_to_many?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1373, "user_id": 3662277, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hvN2t.jpg?s=128&g=1", "display_name": "ThriceGood", "link": "https://stackoverflow.com/users/3662277/thricegood"}, "is_accepted": true, "score": 0, "last_activity_date": 1502966610, "creation_date": 1502966610, "answer_id": 45732993, "question_id": 45708294, "link": "https://stackoverflow.com/questions/45708294/ruby-on-rails-has-many-self-join/45732993#45732993", "title": "Ruby on Rails: has_many self join", "body": "<p>Ok so in the end I got it to work with some slight modification. First I renamed some things to make it make a little more sense (if only in my head).</p>\n\n<p>User model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :represented_link, foreign_key: :representative_id, class_name: 'RepresentativeGrouping'\n  has_many :represented, through: :represented_link, source: :represented\n\n  has_many :representive_link, foreign_key: :represented_id, class_name: 'RepresentativeGrouping'\n  has_many :representatives, through: :representive_link, source: :representative\nend\n</code></pre>\n\n<p>RepresentativeGrouping model:</p>\n\n<pre><code>class RepresentativeGrouping &lt; ApplicationRecord\n  belongs_to :representative, foreign_key: 'representative_id', class_name: 'User'\n  belongs_to :represented, foreign_key: 'represented_id', class_name: 'User'\nend\n</code></pre>\n\n<p>the representative_grouping table:</p>\n\n<pre><code>mysql&gt; describe representative_groupings;\n+-------------------+------------+------+-----+---------+----------------+\n| Field             | Type       | Null | Key | Default | Extra          |\n+-------------------+------------+------+-----+---------+----------------+\n| id                | bigint(20) | NO   | PRI | NULL    | auto_increment |\n| representative_id | bigint(20) | YES  | MUL | NULL    |                |\n| represented_id    | bigint(20) | YES  | MUL | NULL    |                |\n| created_at        | datetime   | NO   |     | NULL    |                |\n| updated_at        | datetime   | NO   |     | NULL    |                |\n+-------------------+------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>One thing that is vital here is the arrangement of the has _many definitions in the User model. In the question about you'll see that the has_many definition with the through: and source: in it was below the has_many definition with the class_name: and foreign_key:. After I had changed the names around I got passed my first error:</p>\n\n<pre><code>NameError: uninitialized constant User::representatives\n</code></pre>\n\n<p>But moved on to another error:</p>\n\n<pre><code>ActiveRecord::HasManyThroughOrderError: Cannot have a has_many :through association 'User#representatives' which goes through 'User#representive_link' before the through association is defined.\n</code></pre>\n\n<p>googling led me to here: <a href=\"https://github.com/rails/rails/issues/29123\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/29123</a>, where someone mentioned the issue with the arrangement of the definitions, and that you must have them in the reverse of my order.</p>\n\n<p>After these changes I was able to run code like this:</p>\n\n<pre><code>u1 = User.create(:id =&gt; 1, :username =&gt; 'john')\nu2 = User.create(:id =&gt; 2, :username =&gt; 'mike')\n\nu1.representatives = [u2]\nputs u1.representatives\n\n### displays u2's data\n\nputs u2.represented\n\n### displays u1's data\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 6895607, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BMhRG.jpg?s=128&g=1", "display_name": "Gaudam Thiyagarajan", "link": "https://stackoverflow.com/users/6895607/gaudam-thiyagarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1509358557, "creation_date": 1509358557, "answer_id": 47012778, "question_id": 45708294, "link": "https://stackoverflow.com/questions/45708294/ruby-on-rails-has-many-self-join/47012778#47012778", "title": "Ruby on Rails: has_many self join", "body": "<p>In UserModel</p>\n\n<p>To get <strong>representatives</strong> - \n<code>\nhas_and_belongs_to_many :representatives, \n   class_name: \"User\",\n   join_table: : representative_groupings,\n   foreign_key: :represented_id,\n   association_foreign_key: : representative_id</code></p>\n\n<p>To get <strong>represented_by</strong> - \n<code>\nhas_and_belongs_to_many : represented,\n   class_name: \"User\",\n   join_table: : representative_groupings,\n   foreign_key: :representative_id,\n   association_foreign_key: : represented_id</code></p>\n\n<blockquote>\n  <p>This also eliminates the need for your explicit model <strong><em>rails</em></strong> -\n   RepresentativeGrouping</p>\n</blockquote>\n"}], "owner": {"reputation": 1373, "user_id": 3662277, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hvN2t.jpg?s=128&g=1", "display_name": "ThriceGood", "link": "https://stackoverflow.com/users/3662277/thricegood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1164, "favorite_count": 0, "accepted_answer_id": 45732993, "answer_count": 2, "score": 1, "last_activity_date": 1509358557, "creation_date": 1502870850, "question_id": 45708294, "link": "https://stackoverflow.com/questions/45708294/ruby-on-rails-has-many-self-join", "title": "Ruby on Rails: has_many self join", "body": "<p>Rails 5.</p>\n\n<p>I have been trying to create a self referencing has_many relationship based on this tutorial:  <a href=\"https://medium.com/@jbmilgrom/active-record-many-to-many-self-join-table-e0992c27c1e\" rel=\"nofollow noreferrer\">https://medium.com/@jbmilgrom/active-record-many-to-many-self-join-table-e0992c27c1e</a> (the last piece: Has_many | Has_many\u200a\u2014\u200aSelf Join Table)</p>\n\n<p>I also see various threads here about this concept but I'm still a little lost when it comes to my problem and its terminology. And I am not sure what the database should look like. I should also mention that I am very new to Rails.</p>\n\n<p>I am trying to create 'representative' - 'represented' relationship between Users.</p>\n\n<p>A User can be represented by many Users (User has_many Representatives).\nAnd a User can represent many Users (User has_many Represented).</p>\n\n<p>Based on the tutorial in the link above I wrote my User model like this:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :representatives, through: :representive_link, source: :representative\n  has_many :representive_link, foreign_key: :represented_user_id, class_name: 'representatives'\n\n  has_many :represented, through: :represented_link, source: :represented\n  has_many :represented_link, foreign_key: :representative_user_id, class_name: 'representatives'\nend\n</code></pre>\n\n<p>Then I created a representatives table like so (I called it representatives but its really the group of representatives and represented):</p>\n\n<pre><code>class Representatives &lt; ActiveRecord::Base\n  belongs_to :representative, foreign_key: 'representative_user_id', class_name: 'User'\n  belongs_to :represented, foreign_key: 'represented_user_id', class_name: 'User'\nend\n</code></pre>\n\n<p>I also created a representatives table in the database which looks like this:</p>\n\n<pre><code>+----------------------+------------+------+-----+---------+----------------+\n| Field                | Type       | Null | Key | Default | Extra          |\n+----------------------+------------+------+-----+---------+----------------+\n| id                   | bigint(20) | NO   | PRI | NULL    | auto_increment |\n| representive_user_id | bigint(20) | YES  | MUL | NULL    |                |\n| represented_user_id  | bigint(20) | YES  | MUL | NULL    |                |\n| created_at           | datetime   | NO   |     | NULL    |                |\n| updated_at           | datetime   | NO   |     | NULL    |                |\n+----------------------+------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>So, In the Rails console I create two users:</p>\n\n<pre><code>u1 = User.create('id' =&gt; 1, 'username' =&gt; 'john')\nu2 = User.create('id' =&gt; 2, 'username' =&gt; 'mike')\n</code></pre>\n\n<p>I want u2 to represent u1:</p>\n\n<pre><code>u1.representatives = [u2]\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>NameError: uninitialized constant User::representatives\n</code></pre>\n\n<p>I'm finding this concept quite confusing and the other threads here don't clear it up for me. Can someone break this concept down in relation to my problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502871766, "post_id": 45707535, "comment_id": 78375003, "body": "Just to be sure..... Please tell me you&#39;re not storing the password in plain text?!"}, {"owner": {"reputation": 5, "user_id": 7324598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1439712416068814/picture?type=large", "display_name": "Philip Jay Fernandez", "link": "https://stackoverflow.com/users/7324598/philip-jay-fernandez"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502872257, "post_id": 45707535, "comment_id": 78375308, "body": "nope. i&#39;m using attr_encrypted to store my password"}, {"owner": {"reputation": 3758, "user_id": 4530440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y6kMf.png?s=128&g=1", "display_name": "Kruup&#246;s", "link": "https://stackoverflow.com/users/4530440/kruup%c3%b6s"}, "edited": false, "score": 0, "creation_date": 1502875283, "post_id": 45707535, "comment_id": 78377355, "body": "The <code>user_name</code> is not in your form nor in your code, how do you update it?"}, {"owner": {"reputation": 5, "user_id": 7324598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1439712416068814/picture?type=large", "display_name": "Philip Jay Fernandez", "link": "https://stackoverflow.com/users/7324598/philip-jay-fernandez"}, "edited": false, "score": 0, "creation_date": 1502875834, "post_id": 45707535, "comment_id": 78377760, "body": "sorry, typo error. it should&#39;ve been subscriber_number"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502876251, "post_id": 45707535, "comment_id": 78378053, "body": "Have you considered the built-in <a href=\"http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>has_secure_password</code></a>? It allows you to set the password via <code>password=</code>, but returns <code>nil</code> when attempting to retrieve <code>password</code> (the actual hash digest is stored as <code>password_digest</code>). This way, it doesn&#39;t interfere with your form."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7324598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1439712416068814/picture?type=large", "display_name": "Philip Jay Fernandez", "link": "https://stackoverflow.com/users/7324598/philip-jay-fernandez"}, "edited": false, "score": 0, "creation_date": 1502869618, "post_id": 45707703, "comment_id": 78373666, "body": "may i know what is the meaning of this code? edi_user_params.reject! {|k, v| v == &quot;&quot;}"}, {"owner": {"reputation": 5, "user_id": 7324598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1439712416068814/picture?type=large", "display_name": "Philip Jay Fernandez", "link": "https://stackoverflow.com/users/7324598/philip-jay-fernandez"}, "edited": false, "score": 0, "creation_date": 1502872659, "post_id": 45707703, "comment_id": 78375590, "body": "i&#39;m having this error  undefined method `reject!&#39; for nil:NilClass"}, {"owner": {"reputation": 1079, "user_id": 3550170, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Pu9Na.png?s=128&g=1", "display_name": "Snake", "link": "https://stackoverflow.com/users/3550170/snake"}, "reply_to_user": {"reputation": 5, "user_id": 7324598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1439712416068814/picture?type=large", "display_name": "Philip Jay Fernandez", "link": "https://stackoverflow.com/users/7324598/philip-jay-fernandez"}, "edited": false, "score": 0, "creation_date": 1502875818, "post_id": 45707703, "comment_id": 78377743, "body": "Your edi_user_params is nil. You need to keep your strong parameters. I edited my answer"}], "tags": [], "owner": {"reputation": 1079, "user_id": 3550170, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Pu9Na.png?s=128&g=1", "display_name": "Snake", "link": "https://stackoverflow.com/users/3550170/snake"}, "is_accepted": false, "score": 0, "last_activity_date": 1502875761, "last_edit_date": 1502875761, "creation_date": 1502869109, "answer_id": 45707703, "question_id": 45707535, "link": "https://stackoverflow.com/questions/45707535/rails-password-returns-nil-if-blank/45707703#45707703", "title": "Rails Password returns nil if blank", "body": "<p>You can reject blank params,</p>\n\n<pre><code>def update\n  @trader_edi_user = TraderEdiUser.find(params[:id])\n  @edi_user = EdiUser.find(@trader_edi_user.edi_user_id)\n  edi_user_params.reject! {|k, v| v.blank?}\n\n  if @edi_user.update_attributes(edi_user_params)\n    # Success\n  else\n    # Error\n  end\n  redirect_to :back\nend\n\nprivate\n\ndef edi_user_params\n  params.require(:edi_user).permit(:id, :subscriber_number, :password, :password_confirmation)\nend\n</code></pre>\n\n<p>I would still advise you to use something like Devise for security reasons.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 6223808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZqAhlSvhlLQ/AAAAAAAAAAI/AAAAAAAAAA4/ye0ky6xFdQM/photo.jpg?sz=128", "display_name": "Ray Lee", "link": "https://stackoverflow.com/users/6223808/ray-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1502873253, "creation_date": 1502873253, "answer_id": 45708995, "question_id": 45707535, "link": "https://stackoverflow.com/questions/45707535/rails-password-returns-nil-if-blank/45708995#45708995", "title": "Rails Password returns nil if blank", "body": "<p>Add following line to the first line of your method may slove your question</p>\n\n<pre><code>redirect_to password_blank_path if edi_user_params[:password].blank?\n</code></pre>\n\n<p>However, here are some advice for your code</p>\n\n<pre><code>@trader_edi_user = TraderEdiUser.find(params[:id])\n@edi_user = EdiUser.find(@trader_edi_user.edi_user_id)\n@edi_user.update_attributes(edi_user_params)\n</code></pre>\n\n<p>Permitting params before using it</p>\n\n<p>Recommand to using relationship between two models</p>\n\n<p>Using find_by instead of find, cause find may raise exception if nothing found</p>\n\n<pre><code># assuming TraderEdiUser belongs_to :edi_user\n@trader_edi_user = TraderEdiUser.find_by(id: edi_user_params[:id])\n@trader_edi_user.edi_user.update_attributes(edi_user_params) if @trader_edi_user.present?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "is_accepted": false, "score": 0, "last_activity_date": 1502876537, "creation_date": 1502876537, "answer_id": 45710170, "question_id": 45707535, "link": "https://stackoverflow.com/questions/45707535/rails-password-returns-nil-if-blank/45710170#45710170", "title": "Rails Password returns nil if blank", "body": "<p>I think you are looking for this:</p>\n\n<pre><code># edi_user.rb\nvalidates :password, presence: true, if: :should_validate?\n\ndef should_validate?\n  new_record? # other condition you could put here\nend\n</code></pre>\n\n<p>How about this regarding your controller:</p>\n\n<pre><code>def update\n  @trader_edi_user = TraderEdiUser.find(params[:id])\n  @edi_user = EdiUser.find(@trader_edi_user.edi_user_id)\n  if @edi_user.update(edi_user_params)\n    redirect_to some_where_path\n  else\n    redirect_to elsewhere_path\n  end\nend\n\nprivate\n\ndef edi_user_params\n  params.require(:edi_user).permit(:id, :subscriber_number, :password, :password_confirmation)\nend\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7324598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1439712416068814/picture?type=large", "display_name": "Philip Jay Fernandez", "link": "https://stackoverflow.com/users/7324598/philip-jay-fernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1502876537, "creation_date": 1502868619, "last_edit_date": 1502875878, "question_id": 45707535, "link": "https://stackoverflow.com/questions/45707535/rails-password-returns-nil-if-blank", "title": "Rails Password returns nil if blank", "body": "<p>Im kind of new to rails and i'm not using devise. My problem is that when i use password_field in my form for my password and i update only the subscriber_number, the password becomes blank in my database. but when i use a text_field for my password, the actual value can be seen and saved. this is what i'm trying to do:</p>\n\n<pre><code>class EdiUser &lt; ActiveRecord::Base\n\nvalidates_presence_of :subscriber_number\nvalidates_presence_of :password, :on =&gt; :create\n\nend\n</code></pre>\n\n<p>and in my controller:</p>\n\n<pre><code>    def update\n            @trader_edi_user = TraderEdiUser.find(params[:id])\n            @edi_user = EdiUser.find(@trader_edi_user.edi_user_id)\n            #@edi_user.update_attributes(edi_user_params)\n\n            if params[:edi_user][:password].blank? == true\n\n              @edi_user.update_attributes(edi_user_subscriber_number) \n            else\n                @edi_user.update_attributes(edi_user_params)\n            end\n        redirect_to :back\n    end\n\n private\n        def edi_user_params\n            params.require(:edi_user).permit(:id, :subscriber_number, :password, :password_confirmation)\n        end\n\n        def edi_user_subscriber_number\n            params.require(:edi_user).permit(:subscriber_number)\n        end\n</code></pre>\n\n<p>and this is my form:</p>\n\n<pre><code>&lt;%= form_for(@edi_user, url: {controller: 'maintenance/edi_users', action: 'update'}, html: {class: \"form-horizontal\", id: \"edit_edi\"}) do |f| %&gt;\n    &lt;div class=\"form-group edi subs\"&gt;\n        &lt;label class=\"col-sm-3 control-label has-feedback\"&gt;Subscriber Number&lt;/label&gt;\n        &lt;div class=\"col-sm-9\"&gt;\n           &lt;%= f.text_field :subscriber_number, :class =&gt; \"form-control req\", :required =&gt; 'true', :id =&gt; \"subscriber\" %&gt;\n           &lt;br&gt;\n        &lt;/div&gt;\n     &lt;/div&gt;\n     &lt;div class=\"form-group edi pass\"&gt;\n        &lt;label class=\"col-sm-3 control-label has-feedback\"&gt;Password&lt;/label&gt;\n        &lt;div class=\"col-sm-9\"&gt;\n           &lt;%#= f.text_field :password, :class =&gt; \"form-control\", :id =&gt; \"password\", :minlength =&gt; 6 %&gt;\n           &lt;%= f.password_field :password, :class =&gt; \"form-control\", :id =&gt; \"password\" %&gt;\n           &lt;br&gt;\n        &lt;/div&gt;\n     &lt;/div&gt;\n     &lt;div class=\"form-group edi confirm_pass\"&gt;\n        &lt;label class=\"col-sm-3 control-label has-feedback\"&gt;Confirm Password&lt;/label&gt;\n        &lt;div class=\"col-sm-9\"&gt;\n           &lt;%= f.password_field :password_confirmation, :class =&gt; \"form-control\", :id =&gt; \"confirm_password\", data: { :match =&gt; \"#password\"} %&gt;\n           &lt;br&gt;\n        &lt;/div&gt;\n     &lt;/div&gt;\n     &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-sm-12\"&gt;\n           &lt;div class=\"pull-right\"&gt;\n              &lt;%= button_tag type: \"submit\", class: \"btn btn-md btn-success raised pull-right\", id: \"update_btn2\" do %&gt;\n                   &lt;i class=\"fa fa-check\" aria-hidden=\"true\"&gt;&lt;/i&gt; &lt;%= t('Button.Update') %&gt; \n              &lt;% end %&gt;\n           &lt;/div&gt;\n        &lt;/div&gt;\n     &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>is my code for my update action on my controller wrong? or is there something i'm missing? </p>\n\n<p>thank you very much in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "session-cookies"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 7534274, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9TCm.jpg?s=128&g=1", "display_name": "Xullnn", "link": "https://stackoverflow.com/users/7534274/xullnn"}, "edited": false, "score": 0, "creation_date": 1526533355, "post_id": 45708329, "comment_id": 87782795, "body": "I&#39;m ruminating all my questions and I found your explanation is also helpful, so thanks! @Omurbek."}], "tags": [], "owner": {"reputation": 412, "user_id": 5305930, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/gl6vR.jpg?s=128&g=1", "display_name": "omurbek", "link": "https://stackoverflow.com/users/5305930/omurbek"}, "is_accepted": false, "score": 1, "last_activity_date": 1502870946, "creation_date": 1502870946, "answer_id": 45708329, "question_id": 45707368, "link": "https://stackoverflow.com/questions/45707368/whats-the-impact-of-sequence-between-cookies-and-session-when-implementing-cur/45708329#45708329", "title": "What&#39;s the impact of sequence between cookies and session when implementing &quot;current_user&quot;?", "body": "<p><a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">From Rails Guide</a></p>\n\n<blockquote>\n  <p>Using the find method, you can retrieve the object corresponding to the specified primary key that matches any supplied options. </p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code># Find the client with primary key (id) 10.\nclient = Client.find(10)\n# =&gt; #&lt;Client id: 10, first_name: \"Ryan\"&gt;\n</code></pre>\n\n<blockquote>\n  <p>User.find(session[:user_id]) returns all users that has matching primary_key</p>\n  \n  <p>In your second case: \"User.find(cookies[:remember_token])\", you should\n  search from \"remember_token\" column.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 363, "user_id": 7534274, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9TCm.jpg?s=128&g=1", "display_name": "Xullnn", "link": "https://stackoverflow.com/users/7534274/xullnn"}, "edited": false, "score": 0, "creation_date": 1502878248, "post_id": 45708698, "comment_id": 78379423, "body": "Thanks a lot @Robin van Dijk! That&#39;s what I want."}], "tags": [], "owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "is_accepted": true, "score": 1, "last_activity_date": 1502872215, "creation_date": 1502872215, "answer_id": 45708698, "question_id": 45707368, "link": "https://stackoverflow.com/questions/45707368/whats-the-impact-of-sequence-between-cookies-and-session-when-implementing-cur/45708698#45708698", "title": "What&#39;s the impact of sequence between cookies and session when implementing &quot;current_user&quot;?", "body": "<p>That is because if you use <code>find</code>, it finds a record by its database id.</p>\n\n<p>What you want is to find by the <code>remember_token</code> column, so <code>User.find_by(remember_token: cookies[:remember_token])</code></p>\n\n<pre><code>def current_user\n  if cookies[:remember_token]\n    @current_user ||= User.find_by(remember_token: cookies[:remember_token])\n  elsif session[:user_id]\n    @current_user ||= User.find(session[:user_id])\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 7534274, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9TCm.jpg?s=128&g=1", "display_name": "Xullnn", "link": "https://stackoverflow.com/users/7534274/xullnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 45708698, "answer_count": 2, "score": 0, "last_activity_date": 1502872215, "creation_date": 1502868027, "question_id": 45707368, "link": "https://stackoverflow.com/questions/45707368/whats-the-impact-of-sequence-between-cookies-and-session-when-implementing-cur", "title": "What&#39;s the impact of sequence between cookies and session when implementing &quot;current_user&quot;?", "body": "<p>I am learning how to build a simple authentication function with session and cookies.\nI have a <code>User</code> model, then <code>sessions_controller</code>. I also create <code>remember_token</code> column for users table to handle the \"remember_me\" situation.\nThis is the relevant code:</p>\n\n<hr>\n\n<p><strong>sessions_controller</strong></p>\n\n<pre><code>def create\n  user = User.find_by_email(params[:email])\n\n  if user &amp;&amp; user.authenticate(params[:password])\n    session[:user_id] = user.id\n    if params[:remember_me]\n      user.generate_token(:remember_token)\n      cookies.permanent[:remember_token] = user.remember_token\n    end\n    redirect_to root_url\n    flash[:notice] = \"Logged in.\"\n  else\n    render \"new\"\n    flash[:notice] = \"Invaid email or password.\"\n  end\nend\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>has_secure_password\n\ndef generate_token(column)\n  self[column] = SecureRandom.urlsafe_base64\n  self.save\nend\n</code></pre>\n\n<p><strong>application_controller</strong></p>\n\n<pre><code>helper_method :current_user\n\ndef current_user\n  if session[:user_id]\n    @current_user ||= User.find(session[:user_id])\n  elsif cookies[:remember_token]\n    @current_user ||= User.find(cookies[:remember_token])\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>The code above seems to be working. But at first I actually reversed the code's sequence in <code>:current_user</code>, like this:</p>\n\n<pre><code>def current_user\n  if cookies[:remember_token]\n    @current_user ||= User.find(cookies[:remember_token])\n  elsif session[:user_id]\n    @current_user ||= User.find(session[:user_id])\n  end\nend\n</code></pre>\n\n<p>This will raise an exception: \"Couldn't find User with 'id'= some_token_here\"</p>\n\n<p><strong>In this case, why I can't use the cookies[:remember_token] to find the user firstly. Does the sequence matter? Or, if I had some misunderstanding about how session and cookies work?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 224, "user_id": 6366616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgwr3.jpg?s=128&g=1", "display_name": "Max L.", "link": "https://stackoverflow.com/users/6366616/max-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1502868477, "creation_date": 1502868477, "answer_id": 45707492, "question_id": 45706832, "link": "https://stackoverflow.com/questions/45706832/creating-a-new-table-in-mongoid-for-has-and-belongs-to-many-relationship/45707492#45707492", "title": "Creating a new table in mongoid for has_and_belongs_to_many relationship", "body": "<p>You just need to include some code into your classes like this:</p>\n\n<pre><code>class Student\n  include Mongoid::Document\n  has_and_belongs_to_many :subjects\nend\n\nclass Subject\n  include Mongoid::Document\n  has_and_belongs_to_many :students\nend\n</code></pre>\n\n<p>There is a great <a href=\"https://mongoid.github.io/old/en/mongoid/docs/relations.html#has_and_belongs_to_many\" rel=\"nofollow noreferrer\">documentation</a> here.</p>\n\n<p>Hope it will help you!</p>\n"}], "owner": {"reputation": 73, "user_id": 8281986, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8c736edf0ba695092165ca4052dee6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Aaquib Khan", "link": "https://stackoverflow.com/users/8281986/aaquib-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 45707492, "answer_count": 1, "score": 1, "last_activity_date": 1502868477, "creation_date": 1502866224, "question_id": 45706832, "link": "https://stackoverflow.com/questions/45706832/creating-a-new-table-in-mongoid-for-has-and-belongs-to-many-relationship", "title": "Creating a new table in mongoid for has_and_belongs_to_many relationship", "body": "<p>I just started to code in rails using mongoid ,previously I coded in sql,sqlite etc,Now Iam a bit confused between associations.like in sql when you want a has_and_belongs_to_many association between two models you do in such a way</p>\n\n<p>for example</p>\n\n<pre><code>    class Student &lt; ActiveRecord::Base\n       has_and_belongs_to_many :subjects \n    end\n\n    class Subject &lt; ActiveRecord::Base\n       has_and_belongs_to_many :students\n    end\n</code></pre>\n\n<p>and we create a new table as </p>\n\n<pre><code>rails g migration CreateJoinTableStudentSubject student subject\n</code></pre>\n\n<p>In our migration file we do like this  </p>\n\n<pre><code>  def change\n   create_table :students_subjects do |t|\n    t.references :student\n    t.references :subject\n    t.timestamps\n end\n</code></pre>\n\n<p>end</p>\n\n<p>now my question is is this neccesary to create a new table when using mongoid or der is a alternative way for doing this.plz help Iam new to mongoid and rails.thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "prawn"], "comments": [{"owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "edited": false, "score": 0, "creation_date": 1502876719, "post_id": 45706804, "comment_id": 78378401, "body": "I think, you can try princexml <a href=\"https://www.princexml.com/\" rel=\"nofollow noreferrer\">princexml.com</a> to set passwords for  your pdfs, but I don&#39;t know, can it be applied to existing files or not.  Prince for setting password from command line example <code>--user-password=PASS</code> <a href=\"https://www.princexml.com/doc/command-line/\" rel=\"nofollow noreferrer\">princexml.com/doc/command-line</a>  Also I found gem which can merge pdfs, but I&#39;ve no experince with it <a href=\"https://github.com/boazsegev/combine_pdf\" rel=\"nofollow noreferrer\">github.com/boazsegev/combine_pdf</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1502912733, "creation_date": 1502912733, "answer_id": 45721807, "question_id": 45706804, "link": "https://stackoverflow.com/questions/45706804/generating-password-protected-pdfs-using-rails/45721807#45721807", "title": "generating password protected pdfs using rails", "body": "<p>Not really a gem, but is it possible to install and use a command line program like <code>pdftk</code>? I've been using it for years for similar problems with great success.</p>\n"}], "owner": {"reputation": 3276, "user_id": 1337630, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/48cb4a2446034dc6443a7a40f2b00608?s=128&d=identicon&r=PG", "display_name": "Deepak Kumar Padhy", "link": "https://stackoverflow.com/users/1337630/deepak-kumar-padhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502912733, "creation_date": 1502866156, "last_edit_date": 1502866586, "question_id": 45706804, "link": "https://stackoverflow.com/questions/45706804/generating-password-protected-pdfs-using-rails", "title": "generating password protected pdfs using rails", "body": "<p>Recently I was looking for some gem which can password protect our existing pdf files. </p>\n\n<p>Basically we are fetching some invoice PDFS from <code>aws</code> .  After fetching it from aws , we have to add password to the pdf and send it as an attachment in an email.</p>\n\n<p>I tried with <code>prawn/hexapdf/combined_pdf</code> , but no success. Because with prawn i can not find a way to read an existing pdf. but prawn can easily password encrypt any pdf generated via prawn.</p>\n\n<p>Any suggestion would be greatly appriciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.1"], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 4172020, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ef1b035f4f8b6b2ecdeba1dd6cc3cbb2?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/4172020/jeremy"}, "is_accepted": true, "score": 0, "last_activity_date": 1502862258, "creation_date": 1502862258, "answer_id": 45705868, "question_id": 45705867, "link": "https://stackoverflow.com/questions/45705867/rails-5-test-database-out-of-sync-with-development/45705868#45705868", "title": "Rails 5 test database out of sync with development", "body": "<p>This issue was caused because I had a migration creating a table, and trying to create and index on a column I had renamed, so an index on [null] was appearing in the schema, which apparently the development db can deal with, but the test db can't without some shenanigans involved in how the db is migrated</p>\n\n<p>In order to get both the dev and test DB working to the point where I could run tests. Eventually I tracked down the index on a null column in an existing table in <code>db/schema.rb</code> it was a fairly simple matter to find the index command in the table creation migration and wipe it out. After that the DB can be brought back into form with just </p>\n\n<pre><code>rails db:migrate\nrails db:seed\n</code></pre>\n"}], "owner": {"reputation": 555, "user_id": 4172020, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ef1b035f4f8b6b2ecdeba1dd6cc3cbb2?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/4172020/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 45705868, "answer_count": 1, "score": 1, "last_activity_date": 1502862258, "creation_date": 1502862258, "question_id": 45705867, "link": "https://stackoverflow.com/questions/45705867/rails-5-test-database-out-of-sync-with-development", "title": "Rails 5 test database out of sync with development", "body": "<p>I am encountering an issue with <code>Rails 5.1.2</code> running <code>ruby 2.4.1p111 (2017-03-22 revision 58053)</code> where every time I run a migration it puts the test DB into a state running tests is impossible, and to get both the test database and development database into a state where they are both working, the following migration commands must be run in this order: </p>\n\n<pre><code>rails db:drop\nrails db:migrate RAILS_ENV=test\nrails db:migrate\nrails db:seed\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "seed"], "answers": [{"tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 3, "last_activity_date": 1502861657, "creation_date": 1502861657, "answer_id": 45705763, "question_id": 45705624, "link": "https://stackoverflow.com/questions/45705624/rails-access-to-routes-from-seedfile/45705763#45705763", "title": "Rails - Access to routes from seedfile", "body": "<p>use url helpers with :</p>\n\n<pre><code>Rails.application.routes.url_helpers.my_page_path\n</code></pre>\n\n<p>For url:</p>\n\n<pre><code>Rails.application.routes.url_helpers.my_page_url\n</code></pre>\n\n<p>Note: url will add default host, to change host, you will need to add following in <code>application.rb</code>: \n<code>Rails.application.routes.default_url_options[:host] = \"mysite.com\"</code></p>\n\n<p>To access it across rake, you can <code>include Rails.application.routes.url_helpers</code> in file and access <code>my_page_path</code> normally.</p>\n"}], "owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 45705763, "answer_count": 1, "score": 1, "last_activity_date": 1502861657, "creation_date": 1502860864, "question_id": 45705624, "link": "https://stackoverflow.com/questions/45705624/rails-access-to-routes-from-seedfile", "title": "Rails - Access to routes from seedfile", "body": "<p>I want to seed a single Page, that has many files and now I do it like this:</p>\n\n<pre><code>PageFile.create!([\n  { file_body: seedfile('/file1.jpg'), page_id: Page.where(path: 'my_page').take.id }\n</code></pre>\n\n<p>But I think it's not flexible and I want it to depend on by routes.rb data:</p>\n\n<pre><code>get 'my_page' =&gt; 'pages#my_page', as: :my_page\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>page_id: Page.where(path: my_page_path) }\npage_id: Page.where(path: :my_page_path) }\npage_id: Page.where(path: Page.select(:my_page_path)) }\n</code></pre>\n\n<p>All of them return errors or nil. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twilio", "libxml2"], "comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1502860011, "post_id": 45704849, "comment_id": 78368990, "body": "did y try <code>gem install libxml-ruby -v &#39;3.0.0</code> and please include the result of that command"}, {"owner": {"reputation": 11, "user_id": 8470243, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213660643971146/picture?type=large", "display_name": "George Mikhail", "link": "https://stackoverflow.com/users/8470243/george-mikhail"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1502931016, "post_id": 45704849, "comment_id": 78407663, "body": "@FabrizioBertoglio: I&#39;ve tried that and this is the error I&#39;m receiving: <code>code</code>ERROR:  While executing gem ... (Errno::EACCES)     Permission denied @ rb_sysopen - /Users/George/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems&zwnj;&#8203;/libxml-ruby-3.0.0/H&zwnj;&#8203;ISTORY<code>code</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8470243, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213660643971146/picture?type=large", "display_name": "George Mikhail", "link": "https://stackoverflow.com/users/8470243/george-mikhail"}, "edited": false, "score": 0, "creation_date": 1502936927, "post_id": 45725520, "comment_id": 78408930, "body": "Thank you for the detailed reply. I will work on installing rbenv on my mac tonight. In the meantime, I just wanted to point out that I did try running the installation with sudo and this is a portion of the error which it returns: <code>Could not create Makefile due to some reason, probably lack of necessary libraries and&#47;or headers.  Check the mkmf.log file for more details.  You may need configuration options.</code>"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 11, "user_id": 8470243, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213660643971146/picture?type=large", "display_name": "George Mikhail", "link": "https://stackoverflow.com/users/8470243/george-mikhail"}, "edited": false, "score": 0, "creation_date": 1502938968, "post_id": 45725520, "comment_id": 78409393, "body": "@GeorgeMikhail you should locate <code>mkmf.log</code> and see what is the problem. Anyway you should not use <code>sudo</code>.  <code>mkmf.log</code> should be saved somewhere inside the folders of <code>&#47;Users&#47;George&#47;.rbenv</code>.."}], "tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": false, "score": 2, "last_activity_date": 1502935454, "creation_date": 1502935454, "answer_id": 45725520, "question_id": 45704849, "link": "https://stackoverflow.com/questions/45704849/libxml-issue-when-installing-twilio-ruby-gem/45725520#45725520", "title": "libxml issue when installing twilio-ruby gem", "body": "<p>to install correctly <code>rbenv</code> follow the instructions on github for your operating system (Mac or Linux)</p>\n\n<p><a href=\"https://github.com/rbenv/rbenv#installation\" rel=\"nofollow noreferrer\">rbenv installation</a></p>\n\n<p>While to better understand this problem, it is connected to security issues. Mac and Linux are Unix based system, where the user logs in and can execute commands on his home directory <code>~/&lt;user&gt;</code>. If you try to execute a command to run a script in another directory like the root directory <code>/</code> or <code>/bin</code>, you will get an authorization error and you will need to run the command with <code>sudo</code> that stands for <code>system user do</code>.</p>\n\n<p>For this reason, with linux you configure the <code>~/.bash_profile</code> file </p>\n\n<blockquote>\n  <p>Add ~/.rbenv/bin to your $PATH for access to the rbenv command-line utility.</p>\n  \n  <p>$ echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' >> ~/.bash_profile\n  Ubuntu Desktop note: Modify your ~/.bashrc instead of ~/.bash_profile.</p>\n  \n  <p>Zsh note: Modify your ~/.zshrc file instead of ~/.bash_profile.</p>\n</blockquote>\n\n<p>so that those command <code>irb</code>, <code>gem</code>, <code>rake</code>, <code>rails</code> when executed from the user they:</p>\n\n<blockquote>\n  <ul>\n  <li><p>Search your PATH for an executable file named rake</p></li>\n  <li><p>Find the rbenv shim named rake at the beginning of your PATH</p></li>\n  <li>Run the shim named rake, which in turn passes the command along to rbenv</li>\n  </ul>\n</blockquote>\n\n<p><a href=\"https://github.com/rbenv/rbenv#understanding-shims\" rel=\"nofollow noreferrer\">explanation of shims in rbenv</a></p>\n\n<p>You can also solve easily this problem by running the command with <code>sudo</code>, but it is not reccommended, as you can read also from the below post where they have the same problem but with <code>rvm</code>,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17550903/why-do-i-get-a-permission-denied-error-while-installing-a-gem\">Why do I get a &quot;permission denied&quot; error while installing a gem?</a></p>\n"}], "owner": {"reputation": 11, "user_id": 8470243, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213660643971146/picture?type=large", "display_name": "George Mikhail", "link": "https://stackoverflow.com/users/8470243/george-mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502935454, "creation_date": 1502855584, "last_edit_date": 1502856109, "question_id": 45704849, "link": "https://stackoverflow.com/questions/45704849/libxml-issue-when-installing-twilio-ruby-gem", "title": "libxml issue when installing twilio-ruby gem", "body": "<p>I've been running in circles trying to install the 'twilio-ruby' gem in my rails app to no avail. Every time I try to bundle install I receive errors around libxml. Below is a part of the error I'm receiving when I add 'twilio-ruby' to the gem-file and try to bundle install: </p>\n\n<pre><code>Errno::EACCES: Permission denied @ rb_sysopen - /Users/George/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/libxml-ruby-3.0.0/HISTORY\nAn error occurred while installing libxml-ruby (3.0.0), and Bundler cannot continue.\nMake sure that `gem install libxml-ruby -v '3.0.0'` succeeds before bundling.\n\nTrying to gem install libxml-ruby results in the error below:\n\nERROR:  While executing gem ... (Errno::EACCES)\n    Permission denied @ rb_sysopen - /Users/George/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/libxml-ruby-3.0.0/HISTORY \n</code></pre>\n\n<p>Any help that points me in the right direction would be much appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 1690, "user_id": 3034747, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac87bcd269dafa9171c0bcb5baa209ac?s=128&d=identicon&r=PG", "display_name": "Yana Agun Siswanto", "link": "https://stackoverflow.com/users/3034747/yana-agun-siswanto"}, "is_accepted": true, "score": 3, "last_activity_date": 1502848024, "creation_date": 1502848024, "answer_id": 45703911, "question_id": 45703766, "link": "https://stackoverflow.com/questions/45703766/ruby-on-rails-coverage-tool-that-shows-what-is-not-being-covered/45703911#45703911", "title": "Ruby on Rails coverage tool that shows what is not being covered", "body": "<p>If you click on the file name, simplecov will show you the line that is covered (with green) and not covered (with reds).\n<a href=\"https://i.stack.imgur.com/lYR06.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lYR06.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 5187790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LshIU.jpg?s=128&g=1", "display_name": "yusefu", "link": "https://stackoverflow.com/users/5187790/yusefu"}, "is_accepted": false, "score": 0, "last_activity_date": 1502852239, "creation_date": 1502852239, "answer_id": 45704425, "question_id": 45703766, "link": "https://stackoverflow.com/questions/45703766/ruby-on-rails-coverage-tool-that-shows-what-is-not-being-covered/45704425#45704425", "title": "Ruby on Rails coverage tool that shows what is not being covered", "body": "<p>We use this in my workplace: <a href=\"https://codecov.io/#features\" rel=\"nofollow noreferrer\">https://codecov.io/#features</a></p>\n\n<p>Codecov is used to help developers determine what lines of code were executed by their tests. There are three primary terms used to indicate the results of your tests: hit, partial and miss. </p>\n\n<p>The value of 54% comes from a calculation of hit / ( hits + partial + miss) = coverage.</p>\n\n<ol>\n<li>A hit is a line (aka statement) that is fully executed by your\ntests.</li>\n<li>A partial is a statement (typically a branch) that is not fully\nexecuted.</li>\n</ol>\n\n<p>Example if true:... will always be a partial hit because the branch was never skipped because true is always true.</p>\n\n<ol start=\"3\">\n<li>A miss is a statement that was not executed by tests.</li>\n</ol>\n\n<p>A grade of 54%, in simple terms, says \"Half my code is tested\". Use Codecov to investigate methods and statements in your code that are not tested to help guide you on where to write your next test and increase the coverage.</p>\n"}], "owner": {"reputation": 1768, "user_id": 7672985, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6233938657e3693fca648b313da8557?s=128&d=identicon&r=PG", "display_name": "Gabriel Mesquita", "link": "https://stackoverflow.com/users/7672985/gabriel-mesquita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 45703911, "answer_count": 2, "score": 0, "last_activity_date": 1502852239, "creation_date": 1502846796, "question_id": 45703766, "link": "https://stackoverflow.com/questions/45703766/ruby-on-rails-coverage-tool-that-shows-what-is-not-being-covered", "title": "Ruby on Rails coverage tool that shows what is not being covered", "body": "<p>I am developing an application using rails. Since the start we are using rspec to test our application. And we are using simplecov as a tool to show our test coverage.</p>\n\n<p>But simplecov only shows the percentage of coverage inside a file, My question is if there is a tool that shows what line of code is not being covered?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1502844051, "post_id": 45703141, "comment_id": 78365207, "body": "Do you have a password_digest column in your table?"}, {"owner": {"reputation": 1690, "user_id": 3034747, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac87bcd269dafa9171c0bcb5baa209ac?s=128&d=identicon&r=PG", "display_name": "Yana Agun Siswanto", "link": "https://stackoverflow.com/users/3034747/yana-agun-siswanto"}, "edited": false, "score": 0, "creation_date": 1502850008, "post_id": 45703141, "comment_id": 78366554, "body": "how is your controller?"}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 8080946, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/33ed775ce8607b3e2acec738c7ceab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Cory L", "link": "https://stackoverflow.com/users/8080946/cory-l"}, "edited": false, "score": 0, "creation_date": 1502876206, "post_id": 45703363, "comment_id": 78378014, "body": "Thanks I think the issue was in the controller with the abcense of :password_confirmation in my permits.  Oddly enough I had the validates statement in for :password_confirmation originally but it was giving me an error in the form so I took it out. However, I made both changes and now it is working."}], "tags": [], "owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "is_accepted": true, "score": 2, "last_activity_date": 1502843044, "creation_date": 1502843044, "answer_id": 45703363, "question_id": 45703141, "link": "https://stackoverflow.com/questions/45703141/rails-password-confirmation-not-working/45703363#45703363", "title": "Rails password_confirmation not working", "body": "<p>I think that you are not getting the password_confirmation, to do that you should add</p>\n\n<pre><code>validates :password_confirmation, presence: true\n</code></pre>\n\n<p>Also, in your controller, you should whitelist <code>:password_confirmation</code> into your permit section.</p>\n\n<p>Validates confirmation only validates if password_confirmation is not nil.</p>\n"}], "owner": {"reputation": 253, "user_id": 8080946, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/33ed775ce8607b3e2acec738c7ceab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Cory L", "link": "https://stackoverflow.com/users/8080946/cory-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "accepted_answer_id": 45703363, "answer_count": 1, "score": 0, "last_activity_date": 1502843044, "creation_date": 1502841116, "question_id": 45703141, "link": "https://stackoverflow.com/questions/45703141/rails-password-confirmation-not-working", "title": "Rails password_confirmation not working", "body": "<p>I need help getting my user signup form to validate that password and password_confirmation match exactly.</p>\n\n<p>Currently the form will pass the data entered into the password digest field in the database and will accept any input in the password_confirmation field, and will not give any errors.</p>\n\n<p>My code is as follows;</p>\n\n<p><strong>Model - user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n    before_save { self.email = email.downcase }\n    #attr_accessible :user_name, :email\n    validates_confirmation_of :password\n    has_secure_password\n\n    validates :user_name, presence: true, length: { maximum: 25 }\n    VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n    validates :email, presence: true, length: { maximum: 255 }, format: { with: VALID_EMAIL_REGEX }\n    validates :password, presence: true, confirmation: true, length: { minimum: 6 }\n\n    has_many :trips\n    has_many :countries, through: :trips\n\nend\n</code></pre>\n\n<p><strong>view - new.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;h1 class=\"text-center\" style=\"margin-top: 10px;\" &gt;Sign up&lt;/h1&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6 offset-md-3 \"&gt;\n      &lt;%=form_for(@user) do |f| %&gt;\n      &lt;%= render 'shared/error_messages' %&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :user_name, \"Username\" %&gt;\n        &lt;%= f.text_field :user_name, class: \"form-control\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :email %&gt;\n        &lt;%= f.email_field :email, class: \"form-control\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :password %&gt;\n        &lt;%= f.password_field :password, class: \"form-control\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :password_confirmation, \"Password Confirmation\" %&gt;\n        &lt;%= f.password_field :password_confirmation, class: \"form-control\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.submit \"Create an account\", class: 'form-control btn btn-primary' %&gt;\n      &lt;/div&gt;\n      &lt;% end %&gt; \n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I also have bcrypt -v 3.1.7 in my gemfile. If any other info is needed let me know and I am happy to provide.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "timeout", "net-http"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1502838067, "post_id": 45702314, "comment_id": 78363842, "body": "If you&#39;re doing a lot of work with JSON-type APIs you&#39;ll want to look at <a href=\"https://github.com/lostisland/faraday\" rel=\"nofollow noreferrer\">Faraday</a> and avoid Net::HTTP. The Net::HTTP library is provided as a really basic, bare-bones, no fuss interface that&#39;s intended to be used as a last resort."}, {"owner": {"reputation": 13, "user_id": 8469392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33baf85a35252ed8567f1fbe138acfd?s=128&d=identicon&r=PG&f=1", "display_name": "mrdmr", "link": "https://stackoverflow.com/users/8469392/mrdmr"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1504023029, "post_id": 45702314, "comment_id": 78845851, "body": "Thanks @tadman. I looked at faraday and changed my api call to faraday. Works great. Now I am struggling with the part about saving the data locally. But thank you!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1504023095, "post_id": 45702314, "comment_id": 78845906, "body": "Good to hear. If you&#39;ve got a new question, see if you can post it."}], "owner": {"reputation": 13, "user_id": 8469392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33baf85a35252ed8567f1fbe138acfd?s=128&d=identicon&r=PG&f=1", "display_name": "mrdmr", "link": "https://stackoverflow.com/users/8469392/mrdmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502837997, "creation_date": 1502834997, "last_edit_date": 1502837997, "question_id": 45702314, "link": "https://stackoverflow.com/questions/45702314/timeout-handling-in-rails-api-client", "title": "timeout handling in rails api client", "body": "<p>I 'm trying to build a Rails API client. There is an api where I can receive my data as json, which works great so far.</p>\n\n<p>Now I am trying to do some timeout handling but I don't know how. I mean literally. How should I even use timeout handling?</p>\n\n<p>I saw something in a tutorial which I translated for my used gem \"net/http\" but I cannot imagine that this has even any effect.</p>\n\n<p>Here is my controller code:</p>\n\n<pre><code>require 'net/http'\n\nclass OverviewController &lt; ApplicationController\n  def api_key\n    ENV[\"API_KEY\"]\n  end\n\n  def handle_timeouts\n    begin\n      yield\n    rescue Net::OpenTimeout, Net::ReadTimeout\n      {}\n    end\n  end\n\n\n  def index\n    handle_timeouts do\n      url = \"https://example.com/api/#{ api_key }\"\n      uri = URI(url)\n      response = Net::HTTP.get(uri) \n      @url_debug = url\n      @my_hash = response\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string", "concatenation"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 5, "creation_date": 1502834696, "post_id": 45702195, "comment_id": 78362866, "body": "What have you tried so far? What error are you getting?"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1502842057, "last_edit_date": 1502842057, "creation_date": 1502836047, "answer_id": 45702492, "question_id": 45702195, "link": "https://stackoverflow.com/questions/45702195/how-do-i-combine-elements-in-an-array-matching-a-pattern/45702492#45702492", "title": "How do I combine elements in an array matching a pattern?", "body": "<p>There are many ways to solve this; ruby is a highly expressive language. It would be most beneficial for you to show <em>what you have tried so far</em>, so that we can help debug/fix/improve your attempt.</p>\n\n<p>For example, here is one possible implementation that I came up with:</p>\n\n<pre><code>def combine_words(array)\n  array\n    .chunk {|string| string.match?(/\\A[a-z][a-z0-9]+\\z/i) }\n    .flat_map {|concat, strings| concat ? strings.join(' ') : strings}\nend\n\ncombine_words([\"aa\", \"b\", \"cde\", \"f1g\", \"hi\", \"2j\", \"l3m\", \"op\", \"q r\"])\n  # =&gt; [\"aa\", \"b\", \"cde f1g hi\", \"2j\", \"l3m op\", \"q r\"]\n</code></pre>\n\n<p>Note that I was a little unclear exactly how to interpret your requirement:</p>\n\n<blockquote>\n  <p>begin with a letter, have at least two characters, and do not contain a space</p>\n</blockquote>\n\n<p>Can strings contain punctuation? Underscores? Utf-8 characters? I took it to mean \"only a-z, A-Z or 0-9\", but you may want to tweak this.</p>\n\n<p>A literal interpretation of your requirement could be: <code>/\\A[[:alpha:]][^ ]+\\z/</code>, but I suspect that's not what you meant.</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-chunk\" rel=\"nofollow noreferrer\"><code>Enumerable#chunk</code></a> will iterate through the array and collect terms by the block's response value. In this case, it will find sequential elements that match/don't match the required regex.</li>\n<li><a href=\"https://ruby-doc.org/core/String.html#method-i-match-3F\" rel=\"nofollow noreferrer\"><code>String#match?</code></a> checks whether the string matches the pattern, and returns a boolean response. Note that if you were using ruby <code>v2.3</code> or below, you'd have needed some workaround such as <code>!!string.match</code>, to force a boolean response.</li>\n<li><a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-flat_map\" rel=\"nofollow noreferrer\"><code>Enumerable#flat_map</code></a> then loops through each \"result\", joining the strings if necessary, and flattens the result to avoid returning any nested arrays.</li>\n</ul>\n\n<hr>\n\n<p>Here is another, similar, solution:</p>\n\n<pre><code>def word?(string)\n  string.match?(/\\A[a-z][a-z0-9]+\\z/i)\nend\n\ndef combine_words(array)\n  array\n    .chunk_while {|x, y| word?(x) &amp;&amp; word?(y)}\n    .map {|group| group.join(' ')}\nend\n</code></pre>\n\n<p>Or, here's a more \"low-tech\" solution - which only uses more basic language features. (I'm re-using the same <code>word?</code> method here):</p>\n\n<pre><code>def combine_words(array)\n  previous_was_word = false\n  result = []\n  array.each do |string|\n    if previous_was_word &amp;&amp; word?(string)\n      result.last &lt;&lt; \" #{string}\"\n    else\n      result &lt;&lt; string\n    end\n    previous_was_word = word?(string)\n  end\n  result\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1502856257, "last_edit_date": 1502856257, "creation_date": 1502836933, "answer_id": 45702607, "question_id": 45702195, "link": "https://stackoverflow.com/questions/45702195/how-do-i-combine-elements-in-an-array-matching-a-pattern/45702607#45702607", "title": "How do I combine elements in an array matching a pattern?", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-chunk\" rel=\"nofollow noreferrer\">Enumerable#chunk</a>.</p>\n\n<pre><code>def chunk_it(arr)    \n  arr.chunk { |s|\n    (s.size &gt; 1) &amp;&amp; (s[0].match?(/\\p{Alpha}/)) &amp;&amp; !s.include?(' ')}.\n      flat_map { |tf,a| tf ? a.join(' ') : a }\nend\n\nchunk_it([\"123\", \"a\", \"cc\", \"dddd\", \"mi hello\", \"33\"])\n  #=&gt; [\"123\", \"a\", \"cc dddd\", \"mi hello\", \"33\"]\nchunk_it [\"mmm\", \"3ss\", \"foo\", \"bar\", \"foo\", \"55\"]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 45702492, "answer_count": 2, "score": 2, "last_activity_date": 1502866377, "creation_date": 1502834382, "last_edit_date": 1502866377, "question_id": 45702195, "link": "https://stackoverflow.com/questions/45702195/how-do-i-combine-elements-in-an-array-matching-a-pattern", "title": "How do I combine elements in an array matching a pattern?", "body": "<p>I have an array of strings</p>\n\n<pre><code>[\"123\", \"a\", \"cc\", \"dddd\", \"mi hello\", \"33\"]\n</code></pre>\n\n<p>I want to join by a space consecutive elements that begin with a letter, have at least two characters, and do not contain a space. Applying that logic to the above would yield</p>\n\n<pre><code>[\"123\", \"a\", \"cc dddd\", \"mi hello\", \"33\"]\n</code></pre>\n\n<p>Similarly if my array were</p>\n\n<pre><code>[\"mmm\", \"3ss\", \"foo\", \"bar\", \"foo\", \"55\"]\n</code></pre>\n\n<p>I would want the result to be</p>\n\n<pre><code>[\"mm\", \"3ss\", \"foo bar foo\", \"55\"]\n</code></pre>\n\n<p>How do I do this operation?</p>\n"}, {"tags": ["sql", "ruby", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 6112561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qxhkt.jpg?s=128&g=1", "display_name": "i-man", "link": "https://stackoverflow.com/users/6112561/i-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1504044499, "last_edit_date": 1504044499, "creation_date": 1502835037, "answer_id": 45702328, "question_id": 45702140, "link": "https://stackoverflow.com/questions/45702140/querying-between-two-tables-that-share-an-association/45702328#45702328", "title": "Querying between two tables that share an association", "body": "<p>I would structure the SQL statement as below. Which would provide you the resources objects that are associated with a specific task id through the join table.</p>\n\n<pre><code>SELECT r.*\nFROM resources r\nJOIN groups_resources gr ON gr.resources_id = r.id\nJOIN groups g ON gr.group_id = g.id\nJOIN task t ON t.id = g.id\nWHERE t.id = ?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1502835738, "creation_date": 1502835738, "answer_id": 45702450, "question_id": 45702140, "link": "https://stackoverflow.com/questions/45702140/querying-between-two-tables-that-share-an-association/45702450#45702450", "title": "Querying between two tables that share an association", "body": "<p>I think following is enough:</p>\n\n<pre><code>select res.* from resources res, task tk, groups_resources gr\nwhere res.resource_id = gr.resource_id and\ngr.group_id = tk.group_id and\ntk.group_id=&lt;&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "is_accepted": false, "score": 0, "last_activity_date": 1503076920, "creation_date": 1503076920, "answer_id": 45761912, "question_id": 45702140, "link": "https://stackoverflow.com/questions/45702140/querying-between-two-tables-that-share-an-association/45761912#45761912", "title": "Querying between two tables that share an association", "body": "<p>The other two answers are helpful for how to structure a SQL query, but thought I would answer my own question specifically as it relates to Sequel. Turns out there is a <code>many_through_many</code> plugin that makes this sort of querying simple, if you make both tables <code>many_to_many</code> :</p>\n\n<pre><code>Task.plugin :many_through_many\nTask.many_through_many :resources,\n  :through =&gt;[\n    [:groups_tasks, :task_id, :group_id],\n    [:groups, :id, :id],\n    [:groups_resources, :group_id, :resource_id]\n  ]\n</code></pre>\n\n<p>Now you can just call something like <code>task.resources</code> on a <code>Task</code> instance, even though your tables don't explicitly associate tasks and resources.</p>\n"}], "owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 45702328, "answer_count": 3, "score": 0, "last_activity_date": 1504044499, "creation_date": 1502834067, "last_edit_date": 1502834387, "question_id": 45702140, "link": "https://stackoverflow.com/questions/45702140/querying-between-two-tables-that-share-an-association", "title": "Querying between two tables that share an association", "body": "<p>New to seqeul and sql in general. I have two tables, <code>groups</code> and <code>resources</code>, that are associated <code>many_to_many</code> and therefore have a <code>groups_resources</code> join table. I also have a <code>task</code> table that has a <code>foreign_key :group_id, :groups</code> and is associated <code>many_to_one</code> with groups. </p>\n\n<p>I'm trying to figure out what query to use that will allow my to get the resources that are able to do a task, based on a task's group. Do I have to do a complicated query via the `groups_resources' join table, or is there a more straightforward query/ way of setting up my associations?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1502832171, "post_id": 45701663, "comment_id": 78361818, "body": "Without actually doing any research I would guess it&#39;s because the <code>self.</code> is needed to disambiguate it from assigning a local variable."}, {"owner": {"reputation": 20432, "user_id": 23323, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c919171cabf2ee333066deae271d80?s=128&d=identicon&r=PG", "display_name": "Zachary Wright", "link": "https://stackoverflow.com/users/23323/zachary-wright"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1502832416, "post_id": 45701663, "comment_id": 78361928, "body": "Yeah, I was thinking it has to do it this way because of that. I guess I&#39;m manly wondering if its a special case to prevent ambiguous calls like that, or if there was something about the object model I didn&#39;t understand that was allowing it."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1502832651, "post_id": 45701663, "comment_id": 78362050, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10811986/why-wont-ruby-allow-me-to-specify-self-as-a-receiver-inside-a-private-method\">Why won&#39;t Ruby allow me to specify self as a receiver inside a private method?</a>"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 2, "creation_date": 1502834465, "post_id": 45701663, "comment_id": 78362774, "body": "This is not a duplicate of the nominated exemplar.  The OP understands that you can&#39;t call a private method such as <code>attribute</code>  using <code>self.attribute</code>.  The question is why he <i>can</i> call the private mutator using <code>self.attribute =</code>.  This is indeed surprising, and a good question."}], "answers": [{"tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": true, "score": 2, "last_activity_date": 1502837843, "last_edit_date": 1592644375, "creation_date": 1502837843, "answer_id": 45702728, "question_id": 45701663, "link": "https://stackoverflow.com/questions/45701663/when-using-a-private-attr-accessor-why-does-self-attribute-work-but-self-attr/45702728#45702728", "title": "When using a private attr_accessor, why does self.attribute= work, but self.attribute doesn&#39;t?", "body": "<p>According to a comment by @J\u00f6rg W Mittag to Alan Skorkin's blog entry <a href=\"https://www.skorks.com/2010/04/ruby-access-control-are-private-and-protected-methods-only-a-guideline/\" rel=\"nofollow noreferrer\">Ruby Access Control \u2013 Are Private And Protected Methods Only A Guideline?</a>:</p>\n<blockquote>\n<p>Quick note: there is a special case where calling private methods with an explicit receiver is allowed:</p>\n<p>If the method name ends with '=' (i.e. it is an attribute writer) and the explicit receiver is 'self', then this works. This is necessary, because setters can only be called with an explicit receiver because of the method/variable ambiguity. Otherwise it wouldn't be possible to call private setters.</p>\n</blockquote>\n<p>J\u00f6rg cites no sources, but he's pretty reliable.</p>\n"}], "owner": {"reputation": 20432, "user_id": 23323, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c919171cabf2ee333066deae271d80?s=128&d=identicon&r=PG", "display_name": "Zachary Wright", "link": "https://stackoverflow.com/users/23323/zachary-wright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 1, "accepted_answer_id": 45702728, "answer_count": 1, "score": 3, "last_activity_date": 1502837843, "creation_date": 1502831723, "question_id": 45701663, "link": "https://stackoverflow.com/questions/45701663/when-using-a-private-attr-accessor-why-does-self-attribute-work-but-self-attr", "title": "When using a private attr_accessor, why does self.attribute= work, but self.attribute doesn&#39;t?", "body": "<p>Suppose I have a class where I define an <code>attr_accessor</code> like so:</p>\n\n<pre><code>private\n\nattr_accessor :attribute\n</code></pre>\n\n<p>I understand why using the <code>self.attribute</code> reader method doesn't work - in Ruby you can't call a private method on an explicit receiver.</p>\n\n<p>What I'm confused by is why doesn't this rule apply to the writer? Why can I call <code>self.attribute = 1</code>, and that doesn't throw any access violation errors?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "is_accepted": false, "score": 0, "last_activity_date": 1502832069, "creation_date": 1502832069, "answer_id": 45701740, "question_id": 45701613, "link": "https://stackoverflow.com/questions/45701613/nomethoderror-in-blogscontrollershow/45701740#45701740", "title": "NoMethodError in BlogsController#show", "body": "<p>It looks like that you are using friendly id gem, please, make sure that you properly configured your Blog model according to the gem readme and run the migration to include the slug field into the model.</p>\n\n<p>Also, if you have previous records without slug, open your rails console and run:</p>\n\n<pre><code>Blog.find_each(&amp;:save)\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 8469240, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10155793383973694/picture?type=large", "display_name": "Mason SB", "link": "https://stackoverflow.com/users/8469240/mason-sb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1502832069, "creation_date": 1502831478, "last_edit_date": 1502831691, "question_id": 45701613, "link": "https://stackoverflow.com/questions/45701613/nomethoderror-in-blogscontrollershow", "title": "NoMethodError in BlogsController#show", "body": "<p>I am working on a project blog of mine. I am a novice developer using Ruby on Rails.... </p>\n\n<p>I am install a slugging gem and then installed the devise gem for auth.. I think this is an auth error but I have no idea what is really happening. I can get the post to show on my index view, but when I try to click the link to the show view it present this error... Please Help!!! </p>\n\n<p>Below is my controller, routes and model....</p>\n\n<p>The error I keep getting is</p>\n\n<blockquote>\n  <p>NoMethodError in BlogsController#show</p>\n\n<pre><code>case filter\n  when Symbol\n    lambda { |target, _, &amp;blk| target.send filter, &amp;blk }\n  when String\n    l = eval \"lambda { |value| #{filter} }\"\n    lambda { |target, value| target.instance_exec(value, &amp;l) }\n......\n</code></pre>\n</blockquote>\n\n<p><strong>My CONTROLLER</strong></p>\n\n<pre><code>class BlogsController &lt; ApplicationController\n  before_action :set_blog, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, only: [:new, :create, :edit, :update, :destroy]\n\n  def index\n    @blog = Blog.all \n  end\n\n  def new \n    @blog = Blog.new\n  end \n\n  def create\n    current_user.blogs.create(blog_params)\n    redirect_to blogs_path\n  end \n\n  def show \n    @blog = Blog.friendly.find(params[:id])\n  end\n\n  def edit\n    @blog = Blog.friendly.find(params[:id])\n    if @blog.user != current_user\n      return render text: 'Not Allowed', status: :forbidden\n    end\n  end\n\n  def update\n    @blog = Blog.friendly.find(params[:id])\n\n    if @blog.user != current_user\n      return render text: 'Not Allowed', status: :forbidden\n    end\n\n    @blog.update_attributes(blog_params)\n    redirect_to root_path\n  end\n\n  def destroy\n    @blog = Blog.friendly.find(params[:id])\n    if @blog.user != current_user\n      return render text: 'Not Allowed', status: :forbidden\n    end\n\n    @blog.destroy\n    redirect_to root_path\n  end\n\nprivate\n\n  def blog_params\n    params.require(:blog).permit(:name, :description)\n  end\nend\n</code></pre>\n\n<p><strong>ROUTES</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  resources :blogs\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n  root 'portfolio#index'\n\nend\n</code></pre>\n\n<p><strong>MODEL</strong></p>\n\n<pre><code>class Blog &lt; ApplicationRecord\n  extend FriendlyId\n  friendly_id :name, use: :slugged\n\n  belongs_to :user\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "capistrano", "sshkit"], "comments": [{"owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1502840561, "post_id": 45701577, "comment_id": 78364419, "body": "How did you add the Devise key into the initializer? Did you use environment vars?"}, {"owner": {"reputation": 156, "user_id": 2360547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CnLXQ.jpg?s=128&g=1", "display_name": "JeffA", "link": "https://stackoverflow.com/users/2360547/jeffa"}, "reply_to_user": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1502842316, "post_id": 45701577, "comment_id": 78364833, "body": "@CV-Gate: I added the line <code>config.secret_key = &#39;config.secret_key = &#39;5067772487f76f8c11ac3b6b3e1ff45b6f3...&#39;</code>"}, {"owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1502842531, "post_id": 45701577, "comment_id": 78364878, "body": "Is that a typo or you are including <code>config.secret_key = </code> into your key? Also, you should use environment vars. Have a look at this: <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">github.com/bkeepers/dotenv</a>"}, {"owner": {"reputation": 156, "user_id": 2360547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CnLXQ.jpg?s=128&g=1", "display_name": "JeffA", "link": "https://stackoverflow.com/users/2360547/jeffa"}, "reply_to_user": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1502842897, "post_id": 45701577, "comment_id": 78364975, "body": "That is not a typo. The initializer had a commented out line with <code>config-secret_key=...</code> in it. I uncommented the line and used the error log recommended secret key. Also, I didn&#39;t set up the development environment and am pretty much a noob in this area. I&#39;ll look at the link. In addition, please note the update to my original question. That may be a clue to what is happening. Thanks for responding."}, {"owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1502843635, "post_id": 45701577, "comment_id": 78365118, "body": "You should use a valid key, if you want to generate one easily go into your rails console and type <code>SecureRandom.hex(64)</code>. I also read your edit and there is nothing wrong using <code>bundle exec</code>, doing that you are using the gems that are in your Gemfile with their corresponding versions. Maybe you are not getting any error just because of that, but the problem with your Devise secret key remains."}, {"owner": {"reputation": 156, "user_id": 2360547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CnLXQ.jpg?s=128&g=1", "display_name": "JeffA", "link": "https://stackoverflow.com/users/2360547/jeffa"}, "reply_to_user": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1502846591, "post_id": 45701577, "comment_id": 78365729, "body": "I generated the key and changed the <code>config.secret_key</code> in the initializer to the generated key. Same error with different suggested key. Also, I looked at the link the you sent but that will take me awhile to digest. I&#39;m the only developer in this case - not sure if that makes a difference."}, {"owner": {"reputation": 156, "user_id": 2360547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CnLXQ.jpg?s=128&g=1", "display_name": "JeffA", "link": "https://stackoverflow.com/users/2360547/jeffa"}, "reply_to_user": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1502906471, "post_id": 45701577, "comment_id": 78398725, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/152080/discussion-between-jeffa-and-cv-gate\">continue this discussion in chat</a>."}], "owner": {"reputation": 156, "user_id": 2360547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CnLXQ.jpg?s=128&g=1", "display_name": "JeffA", "link": "https://stackoverflow.com/users/2360547/jeffa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502927697, "creation_date": 1502831342, "last_edit_date": 1502927697, "question_id": 45701577, "link": "https://stackoverflow.com/questions/45701577/capistrano-aborts-sshkitrunnerexecuteerror-and-devise-secret-key-was-not-s", "title": "capistrano aborts - SSHKit::Runner::ExecuteError and Devise.secret_key was not set", "body": "<p>I'm trying to update an app (Rails 4.1.12; ruby 1.9.3p484) by deploying changes from development to production using capistrano. Below is log (I masked the IP address and suggested secret key).</p>\n\n<p>Previously never had a problem running a deploy. Have searched and found posts with similar errors but have not found a solution. I did follow the instructions to add Devise.secret_key to the Devise initializer and restarted the application (dev and prod). Next attempt to deploy received same error with suggestion for different secret key. </p>\n\n<p>All help, hints, suggestions are greatly appreciated. Thanks.</p>\n\n<p>UPDATE:I just tried to deploy using \n    bundle exec cap production deploy\nand did not get errors but still get errors when running\n    cap production deploy</p>\n\n<p>UPDATE 2: I used Figaro to generate an application.yml file (and append to gitignore). In the devise.rb file I created a line <code>config.secret_key = ENV[\"config.secret_key\"]</code> In the application.yml file I created a line <code>config.secret_key: 'random_128_chr_string'</code> I then restarted the development server and ran <code>cap production deploy</code> Unfortunately got same error.</p>\n\n<pre><code>cap production deploy\n.\n.\n.\n[deploy:migrate] Run `rake db:migrate`\n[e0c2c251] Running bundle exec rake db:migrate as deployer@123.123.123.12\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as deployer@123.123.123.12: rake exit status: 1\nrake stdout: Nothing written\nrake stderr: rake aborted!\nDevise.secret_key was not set. Please add the following to your Devise initializer:\nconfig.secret_key = 'looong_string_of_numbers_and_letters'\nPlease ensure you restarted your application after installing Devise or setting the key. \n</code></pre>\n\n<p>deploy.rb:</p>\n\n<pre><code>lock '&gt;=3.2.1'\n\nset :application, 'pepperslice'\nset :repo_url, 'git@github.com:jeffaltman/pepperslice.git'\nset :linked_dirs, %w{log tmp public/images/uploaded}\nset :linked_files, %w{config/database.yml config/initializers/devise.rb config/initializers/smtp_settings.rb}\n\nset :format, :pretty\nset :log_level, :info\n\nnamespace :deploy do\n\n  desc 'Restart application'\n  task :restart do\n    on roles(:app), in: :sequence, wait: 5 do\n      execute \"sudo /usr/sbin/service unicorn restart\"\n    end\n  end\n\n  after :publishing, :restart\n\n  after :restart, :clear_cache do\n    on roles(:web), in: :groups, limit: 3, wait: 10 do\n      # Here we can do anything such as:\n      # within release_path do\n      #   execute :rake, 'cache:clear'\n      # end\n    end\n  end\nend\n</code></pre>\n\n<p>capfile:</p>\n\n<pre><code># Load DSL and Setup Up Stages\nrequire 'capistrano/setup'\n\n# Includes default deployment tasks\nrequire 'capistrano/deploy'\n\n# Includes tasks from other gems included in your Gemfile\n#\n# For documentation on these, see for example:\n#\n#   https://github.com/capistrano/rvm\n#   https://github.com/capistrano/rbenv\n#   https://github.com/capistrano/chruby\n#   https://github.com/capistrano/bundler\n#   https://github.com/capistrano/rails\n#\n# require 'capistrano/rvm'\n# require 'capistrano/rbenv'\n# require 'capistrano/chruby'\nrequire 'capistrano/bundler'\n# require 'capistrano/rails/assets'\nrequire 'capistrano/rails/migrations'\n#require 'capistrano/ssh_doctor'\n# Loads custom tasks from `lib/capistrano/tasks' if you have any defined.\nDir.glob('lib/capistrano/tasks/*.rake').each { |r| import r }\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1502830870, "post_id": 45701370, "comment_id": 78361251, "body": "...Or if you need to make a more specific search, <code>&quot;&#47;&#47;MediaItem&#47;@ActualStartTime&quot;</code>"}, {"owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "edited": false, "score": 0, "creation_date": 1502842774, "post_id": 45701370, "comment_id": 78364940, "body": "@Simple Lime thanks but the solution is partially working. I updated the question."}, {"owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502842793, "post_id": 45701370, "comment_id": 78364948, "body": "@Tom Lord answer is not working.  I updated the question."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "edited": false, "score": 0, "creation_date": 1502843030, "post_id": 45701370, "comment_id": 78365012, "body": "@mamesaye <code>.xpath</code> returns a list of <code>Nokogiri::XML</code> objects. You can call <code>.map(&amp;:value)</code> to convert them to the plain text values."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "edited": false, "score": 0, "creation_date": 1502843267, "post_id": 45701370, "comment_id": 78365051, "body": "@mamesaye yeah that might be it...I just copied your updated code, and set the path variable to point to a file containing the XML you posted and ran it, and see <code>p : 8&#47;2&#47;2017 4:00:01 PM metadata[&#39;Duration&#39;]  : 01:04:59.8290000</code> being output, so I&#39;m not sure what&#39;s different...maybe what version of Ruby/Nokogiri are you using?"}, {"owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "edited": false, "score": 0, "creation_date": 1502901107, "post_id": 45701370, "comment_id": 78395701, "body": "ruby 1.9.3 and nokogiri 1.6.7.2"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1502904225, "post_id": 45701370, "comment_id": 78397491, "body": "yeah don&#39;t know what to tell you, the code you have posted above works with the file you gave us. Justed tested on ruby 1.9.3p125 with Nokogiri::VERSION =&gt;  &quot;1.6.7.2&quot;. I can&#39;t reproduce your issue."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 3, "last_activity_date": 1502830435, "creation_date": 1502830435, "answer_id": 45701370, "question_id": 45701038, "link": "https://stackoverflow.com/questions/45701038/ruby-nokogiri-not-reading-my-xml-file/45701370#45701370", "title": "ruby nokogiri not reading my xml file", "body": "<p>You're <a href=\"https://ruby-doc.org/core-2.1.4/File.html#method-c-new\" rel=\"nofollow noreferrer\">opening the file</a>, but you're never actually reading the file contents (and also not closing the file after). You can read the file through</p>\n\n<pre><code>begin\n  file = File.open './metadata.xml'\n  f = file.read\nensure\n  file.close\nend\n</code></pre>\n\n<p>or through one of the shortcuts:</p>\n\n<pre><code># closes file after block finishes\nf = File.open('./metadata.xml') { |f| f.read }\n</code></pre>\n\n<p>or, since reading is such a common thing, you can use <a href=\"https://ruby-doc.org/core-2.1.4/IO.html#method-c-read\" rel=\"nofollow noreferrer\"><code>File.read</code></a></p>\n\n<pre><code>f = File.read('./metadata.xml')\n</code></pre>\n\n<p>and now Nokogiri will read <code>f</code> just fine, though you'll need to use</p>\n\n<pre><code>p = doc.xpath(\"//@ActualStartTime\")\n</code></pre>\n\n<p>since it's an attribute.</p>\n"}], "owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502842694, "creation_date": 1502828898, "last_edit_date": 1502842694, "question_id": 45701038, "link": "https://stackoverflow.com/questions/45701038/ruby-nokogiri-not-reading-my-xml-file", "title": "ruby nokogiri not reading my xml file", "body": "<p>I have an metadata.xml file that has :    </p>\n\n<pre><code>&lt;MediaItem ActualEndTime=\"8/2/2017 5:05:01 PM\" ActualStartTime=\"8/2/2017 4:00:01 PM\" Clip=\"False\" ClipEndTime=\"1/1/0001 12:00:00 AM\" ClipParentId=\"00000000-0000-0000-0000-000000000000\" ClipStartTime=\"1/1/0001 12:00:00 AM\" CreatedDate=\"1/1/0001 12:00:00 AM\" DateAdded=\"1/1/0001 12:00:00 AM\" Duration=\"01:04:59.8290000\" FileFormat=\"0\" FileSize=\"0\" Genre=\"Interview\" GuideEndTime=\"8/2/2017 5:00:00 PM\" GuideStartTime=\"8/2/2017 4:00:00 PM\" MovieId=\"00000000-0000-0000-0000-000000000000\" MovieYear=\"0\" NumParts=\"0\" OriginalAirDate=\"8/2/2017 12:00:00 AM\" OriginalFileSize=\"3636725627\" PartNum=\"0\" RecordingType=\"Episodic\" ShowSqueeze=\"True\" TargetEndTime=\"8/2/2017 5:05:00 PM\" TargetStartTime=\"8/2/2017 4:00:00 PM\" UserId=\"\" VideoHeight=\"0\" VideoWidth=\"0\" /&gt;   \n</code></pre>\n\n<p>How do I parse it with ruby and nokogiri?<br>\nI've tried :     </p>\n\n<pre><code>f = File.open path\nputs \"f  : #{f}\"\nmetadata  = {}\ndoc = Nokogiri::XML(f)\nputs \"doc : #{doc}\"\np = doc.xpath(\"//ActualStartTime\")\nputs \"p : #{p}\"\nputs \"++++++++++++++++++++++++++++++++++++++\"\n</code></pre>\n\n<p>but I get this output :    </p>\n\n<pre><code>f  : #&lt;File:0x00000002755c40&gt;\ndoc : &lt;?xml version=\"1.0\"?&gt;\np : \n+++++++++++++++++++++++++++++++++++++++++++   \n</code></pre>\n\n<p>What I am missing? I want to get ActualStartTime value, Duration value and Genre value.</p>\n\n<p><strong>update</strong>   </p>\n\n<pre><code>metadata  = {}\nf = File.read(path)\nputs \"f  : #{f}\"\ndoc = Nokogiri::XML(f)\np = doc.xpath(\"//@ActualStartTime\")\nputs \"p : #{p}\"\nmetadata['Duration'] = doc.xpath(\"//MediaItem/@Duration\")\nputs \"metadata['Duration']  : #{metadata['Duration']}\"    \n</code></pre>\n\n<p>output:   </p>\n\n<pre><code>f : &lt;MediaItem ActualEndTime=\"8/2/2017 5:05:01 PM\" ActualStartTime=\"8/2/2017 4:00:01 PM\" Clip=\"False\" ClipEndTime=\"1/1/0001 12:00:00 AM\" ClipParentId=\"00000000-0000-0000-0000-000000000000\" ClipStartTime=\"1/1/0001 12:00:00 AM\" CreatedDate=\"1/1/0001 12:00:00 AM\" DateAdded=\"1/1/0001 12:00:00 AM\" Duration=\"01:04:59.8290000\" FileFormat=\"0\" FileSize=\"0\" Genre=\"Interview\" GuideEndTime=\"8/2/2017 5:00:00 PM\" GuideStartTime=\"8/2/2017 4:00:00 PM\" MovieId=\"00000000-0000-0000-0000-000000000000\" MovieYear=\"0\" NumParts=\"0\" OriginalAirDate=\"8/2/2017 12:00:00 AM\" OriginalFileSize=\"3636725627\" PartNum=\"0\" RecordingType=\"Episodic\" ShowSqueeze=\"True\" TargetEndTime=\"8/2/2017 5:05:00 PM\" TargetStartTime=\"8/2/2017 4:00:00 PM\" UserId=\"\" VideoHeight=\"0\" VideoWidth=\"0\" /&gt;   \np : \nmetadata['Duration']  : \n</code></pre>\n"}, {"tags": ["ruby", "linux", "shell", "exit-code"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1502825065, "post_id": 45699970, "comment_id": 78358433, "body": "Related: <a href=\"https://stackoverflow.com/questions/2232/calling-shell-commands-from-ruby\">Calling shell commands from Ruby</a>. You can do <code>exitCode = $?.exitstatus</code>"}, {"owner": {"reputation": 21, "user_id": 6058800, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4c8b794724e7264af1f6d81537f36d6?s=128&d=identicon&r=PG&f=1", "display_name": "InsertNameHere", "link": "https://stackoverflow.com/users/6058800/insertnamehere"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1502825599, "post_id": 45699970, "comment_id": 78358688, "body": "I just tried that, I got a TypeError     no implicit conversion of Integer into String.  So I tried doing exitCode = $?.exitstatus.to_i  I am still getting the same error though"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1502826203, "post_id": 45699970, "comment_id": 78358957, "body": "Interesting. Does <code>ruby -e &#39;%x[&#47;root&#47;script.sh -k -m -l -w -p]; exitCode=$?.exitstatus; print exitCode&#39;</code> fail, too?"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1502826347, "post_id": 45699970, "comment_id": 78359024, "body": "You two are on the wrong track. With backticks, the OP&#39;s current code contains a String (probably <code>0</code>), not an Integer exit status. Call #class on it and see."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1502826834, "post_id": 45699970, "comment_id": 78359277, "body": "Oh, my intent was to suggest that  <code>exitCode = %x[echo $?]</code> should be deleted and  <code>exitCode = $?.exitstatus</code> should be added."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1502829198, "post_id": 45699970, "comment_id": 78360469, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18728069/ruby-system-command-check-exit-code\">ruby system command check exit code</a>"}, {"owner": {"reputation": 21, "user_id": 6058800, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4c8b794724e7264af1f6d81537f36d6?s=128&d=identicon&r=PG&f=1", "display_name": "InsertNameHere", "link": "https://stackoverflow.com/users/6058800/insertnamehere"}, "edited": false, "score": 0, "creation_date": 1502830430, "post_id": 45699970, "comment_id": 78361047, "body": "Maybe I should of noted this, I didn&#39;t think it mattered but this code is being run through chef.  I tried the duplicate answer, even when it fails I still get a true and returns 0 for $? and 0 for $?.exitstatus. I am begining to think it may have to do with the script it is over 3,000 lines long and I did not write it. I skimmed through it and it should have an exit code of 1 when it fails but I am left wondering now after trying all these different ways without success."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1502866345, "post_id": 45699970, "comment_id": 78371649, "body": "In your Ruby code, you create two separate (unrelated) processes one after the other. The first process runs <code>script.sh</code>, collects the output, and throws it away (and you better had used <code>system</code> with a redirection to <code>&#47;dev&#47;null</code> instead of <code>%x</code>. The second process consists of a simple <code>echo $?</code>. This is the output you are catching. Since <code>$?</code> is always 0 when a shell script starts to run, you always get the string &#39;0&#39;  in return."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6058800, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4c8b794724e7264af1f6d81537f36d6?s=128&d=identicon&r=PG&f=1", "display_name": "InsertNameHere", "link": "https://stackoverflow.com/users/6058800/insertnamehere"}, "edited": false, "score": 0, "creation_date": 1502829178, "post_id": 45700336, "comment_id": 78360459, "body": "I still can&#39;t seem to get this to work  %x[ /root/script.sh -k -m -l -w -p] captured_output = &#39;false&#39; \t\t\tputs $?.exitstatus  It still always come back as 0."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1502866586, "post_id": 45700336, "comment_id": 78371788, "body": "You should <b>not</b> use <code>%x</code>. Look at the code which CodeGnome provided. The only variation to his code which I would propose, is to do <code>system(&#39;&#47;root&#47;script.sh -k -m -l -w -p  &gt;dev&#47;null&#39;)</code>, because you are not interested in the actual standard output from the script being executed."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": true, "score": 2, "last_activity_date": 1502832123, "last_edit_date": 1502832123, "creation_date": 1502826164, "answer_id": 45700336, "question_id": 45699970, "link": "https://stackoverflow.com/questions/45699970/using-ruby-to-call-a-shell-script-exit-code-always-returns-as-0/45700336#45700336", "title": "Using Ruby to call a shell script exit code always returns as 0", "body": "<h2>Echo <em>is</em> True; Inspect Your Last Process Instead</h2>\n\n<h3>What's Wrong</h3>\n\n<p>Your current code will almost always evaluate its if-statement as true because <code>/bin/echo</code> or the shell builtin <code>echo</code> return success unless standard output is closed or some other error occurs. Consider the following Bash snippet:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>echo `false`; echo $? # 0\necho &gt;&amp;-; echo $?     # 1\n</code></pre>\n\n<p>In addition, in your current code, <em>exitCode</em> is a String, not an Integer. It's being assigned the standard output of your echo command, so you'd have to call <a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-Integer\" rel=\"nofollow noreferrer\">Kernel#Integer</a> or <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-to_i\" rel=\"nofollow noreferrer\">String#to_i</a> on it to cast the variable before attempting a valid comparison. For example, consider the following Ruby:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>`echo $?`.class #=&gt; String\n\"0\" == 0        #=&gt; false\n\"0\".to_i == 0   #=&gt; true\n</code></pre>\n\n<h3>How to Fix the General Case</h3>\n\n<p>You need to test the <a href=\"https://ruby-doc.org/core-2.4.1/Process/Status.html#method-i-exitstatus\" rel=\"nofollow noreferrer\">exit status</a> directly, or inspect the captured output. For example, in Ruby, you can test the last status of the <em>/bin/false</em> command with:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>captured_output = `/bin/false`\n$?.exitstatus\n#=&gt; 1\n</code></pre>\n\n<h2>Fixing Your Specific Example</h2>\n\n<p>If you didn't understand anything above, just fix your code by stripping out all the non-essentials. Based on your example, you don't need the interim variable, nor do you actually need to store standard output. Unless you're evaluating specific non-zero exit statuses, you don't even need to inspect the process status directly or even use an equality statement.</p>\n\n<p>Follow the KISS principle, and just evaluate the truthiness of the <a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-system\" rel=\"nofollow noreferrer\">Kernel#system</a> call. For example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Just call system if you don't care about the output.\n# The result will be true, false, or nil.\nif system('/root/script.sh -k -m -l -w -p')\n  'clean exit'\nelse\n  \"non-zero exit: #{$?}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6058800, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4c8b794724e7264af1f6d81537f36d6?s=128&d=identicon&r=PG&f=1", "display_name": "InsertNameHere", "link": "https://stackoverflow.com/users/6058800/insertnamehere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 45700336, "answer_count": 1, "score": 0, "last_activity_date": 1502891216, "creation_date": 1502824652, "last_edit_date": 1502891216, "question_id": 45699970, "link": "https://stackoverflow.com/questions/45699970/using-ruby-to-call-a-shell-script-exit-code-always-returns-as-0", "title": "Using Ruby to call a shell script exit code always returns as 0", "body": "<p>I am using Ruby to call a shell script via:</p>\n\n<pre><code>%x[ /root/script.sh -k -m -l -w -p]\nexitCode = %x[echo $?]\n\nif exitCode != 0\n  do something\nelse\n  do something else\nend\n</code></pre>\n\n<p>My problem is the exit code is always equal to 0 even when I force the script to fail. How do I properly get the exit code of the script?</p>\n\n<p>EDIT:\nOk came in this morning and started digging through the script as I could not get an error code of anything besides 0. The script looks something like this...</p>\n\n<pre><code>failed() {\n      if [ \"$1\" -ne 0 ] ; then\n          echo \"$2 failed. INSTALLATION FAILED! Exiting.\";\n      exit 1;\n    fi\n}\n\n{\n\nfunction 1\nfunction 2..\nfunction ..20\n\n} | tee -a logFile.log \n</code></pre>\n\n<p>So the last thing that the script runs is always this log file meaning I never get the real exit code.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "algorithm"], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1502892858, "last_edit_date": 1502892858, "creation_date": 1502826183, "answer_id": 45700340, "question_id": 45699817, "link": "https://stackoverflow.com/questions/45699817/dynamically-create-hash-from-array-of-arrays/45700340#45700340", "title": "Dynamically create hash from array of arrays", "body": "<p>This is how I would handle this: </p>\n\n<pre><code>def new_h \n  Hash.new{|h,k| h[k] = new_h}\nend \n\nvalues.flatten.each_slice(2).each_with_object(new_h) do |(k,v),obj|\n  keys =  k.is_a?(String) ? k.split(':') : [k]\n  if keys.count &gt; 1\n    set_key = keys.pop\n    obj.merge!(keys.inject(new_h) {|memo,k1| memo[k1] = new_h})\n      .dig(*keys)\n      .merge!({set_key =&gt; v})\n  else\n    obj[k] = v\n  end\nend\n#=&gt; {\"income\"=&gt;{\n       \"concessions\"=&gt;0, \n       \"gross-income\"=&gt;\"900000\"}, \n    \"noi\"=&gt;\"722300\", \n    \"purpose\"=&gt;\"refinancing\", \n    \"fees\"=&gt;{\n        \"fee-one\"=&gt;\"0\", \n        \"fee-two\"=&gt;\"0\"}, \n    \"expenses\"=&gt;{\n        \"admin\"=&gt;\"7500\", \n        \"other\"=&gt;\"0\"}, \n    \"address\"=&gt;{\n        \"zip\"=&gt;\"10019\"}\n    }\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>Define a method (<code>new_h</code>) for setting up a new <code>Hash</code> with default <code>new_h</code> at any level (<code>Hash.new{|h,k| h[k] = new_h}</code>)</li>\n<li>First flatten the <code>Array</code> (<code>values.flatten</code>) </li>\n<li>then group each 2 elements together as sudo key value pairs (<code>.each_slice(2)</code>)</li>\n<li>then iterate over the pairs using an accumulator where each new element added is defaulted to a <code>Hash</code> (<code>.each_with_object(new_h.call) do |(k,v),obj|</code>)</li>\n<li>split the sudo key on a colon (<code>keys =  k.is_a?(String) ? k.split(':') : [k]</code>)</li>\n<li>if there is a split then create the parent key(s) (<code>obj.merge!(keys.inject(new_h.call) {|memo,k1| memo[k1] = new_h.call})</code>)</li>\n<li>merge the last child key equal to the value (<code>obj.dig(*keys.merge!({set_key =&gt; v})</code>)</li>\n<li>other wise set the single key equal to the value (<code>obj[k] = v</code>)</li>\n</ul>\n\n<p>This has infinite depth as long as the depth chain is not broken say <code>[[\"income:concessions:other\",12],[\"income:concessions\", 0]]</code> in this case the latter value will take precedence (<strong>Note:</strong> this applies to all the answers in one way or anther e.g. the accepted answer the former wins but a value is still lost dues to inaccurate data structure) </p>\n\n<p><a href=\"https://repl.it/KLET/7\" rel=\"nofollow noreferrer\">repl.it Example</a> </p>\n"}, {"tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": false, "score": 2, "last_activity_date": 1502829300, "last_edit_date": 1592644375, "creation_date": 1502826300, "answer_id": 45700382, "question_id": 45699817, "link": "https://stackoverflow.com/questions/45699817/dynamically-create-hash-from-array-of-arrays/45700382#45700382", "title": "Dynamically create hash from array of arrays", "body": "<p><code>merge</code> overwrites a duplicate key by default.</p>\n<p><code>{ &quot;income&quot;=&gt; { &quot;concessions&quot; =&gt; 0 } }.merge({ &quot;income&quot;=&gt; { &quot;gross-income&quot; =&gt; &quot;900000&quot; } }</code> completely overwrites the original value of <code>&quot;income&quot;</code>. What you want is a recursive merge, where instead of just merging the top level hash you're merging the nested values when there's duplication.</p>\n<p><code>merge</code> takes a block where you can specify what to do in the event of duplication. From the documentation:</p>\n<blockquote>\n<p><strong>merge!(other_hash){|key, oldval, newval| block} \u2192 hsh</strong></p>\n<p>Adds the contents of other_hash to hsh. If no block is specified, entries with duplicate keys are overwritten with the values from other_hash, otherwise the value of each duplicate key is determined by calling the block with the key, its value in hsh and its value in other_hash</p>\n</blockquote>\n<p>Using this you can define a simple <code>recursive_merge</code> in one line</p>\n<pre><code>def recursive_merge!(hash, other)\n  hash.merge!(other) { |_key, old_val, new_val| recursive_merge!(old_val, new_val) }\nend\n\nvalues.each do |row|\n  Hash[*row].each do |key, value|\n    keys = key.split(':')\n  \n    if !data.dig(*keys)\n      hh = keys.reverse.inject(value) { |a, n| { n =&gt; a } }\n      a = recursive_merge!(data, hh)\n    end\n  end\nend\n</code></pre>\n<p>A few more lines will give you a more robust solution, that will overwrite duplicate keys that are not hashes and even take a block just like <code>merge</code></p>\n<pre><code>def recursive_merge!(hash, other, &amp;block)\n  hash.merge!(other) do |_key, old_val, new_val|\n    if [old_val, new_val].all? { |v| v.is_a?(Hash) }\n      recursive_merge!(old_val, new_val, &amp;block)\n    elsif block_given?\n      block.call(_key, old_val, new_val)\n    else\n      new_val\n    end\n  end\nend\n\nh1 = { a: true, b: { c: [1, 2, 3] } }\nh2 = { a: false,  b: { x: [3, 4, 5] } }\nrecursive_merge!(h1, h2) { |_k, o, _n| o } # =&gt; { a: true,  b: { c: [1, 2, 3],  x: [3, 4, 5] } }\n</code></pre>\n<p><strong>Note:</strong> This method reproduces the results you would get from ActiveSupport's <code>Hash#deep_merge</code> if you're using Rails.</p>\n"}, {"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 4, "last_activity_date": 1502826342, "creation_date": 1502826342, "answer_id": 45700391, "question_id": 45699817, "link": "https://stackoverflow.com/questions/45699817/dynamically-create-hash-from-array-of-arrays/45700391#45700391", "title": "Dynamically create hash from array of arrays", "body": "<p>The code you've provided can be modified to merge hashes on conflict instead of overwriting:</p>\n\n<pre><code>values.each do |row|\n  Hash[*row].each do |key, value|\n    keys = key.split(':')\n\n    if !data.dig(*keys)\n      hh = keys.reverse.inject(value) { |a, n| { n =&gt; a } }\n      data.merge!(hh) { |_, old, new| old.merge(new) }\n    end\n  end\nend\n</code></pre>\n\n<p>But this code only works for the two levels of nesting.</p>\n\n<p>By the way, I noted <code>ruby-on-rails</code> tag on the question. There's <code>deep_merge</code> method that can fix the problem:</p>\n\n<pre><code>values.each do |row|\n  Hash[*row].each do |key, value|\n    keys = key.split(':')\n\n    if !data.dig(*keys)\n      hh = keys.reverse.inject(value) { |a, n| { n =&gt; a } }\n      data.deep_merge!(hh)\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 197, "user_id": 4527138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b6dac61ca770a6c8589f872589fcebe?s=128&d=identicon&r=PG&f=1", "display_name": "yesyoukenn", "link": "https://stackoverflow.com/users/4527138/yesyoukenn"}, "edited": false, "score": 0, "creation_date": 1502894754, "post_id": 45701020, "comment_id": 78391377, "body": "Thank you for the kind words. I&#39;m glad you found it helpful."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1601580459, "last_edit_date": 1601580459, "creation_date": 1502828858, "answer_id": 45701020, "question_id": 45699817, "link": "https://stackoverflow.com/questions/45699817/dynamically-create-hash-from-array-of-arrays/45701020#45701020", "title": "Dynamically create hash from array of arrays", "body": "<pre><code>values.flatten.each_slice(2).with_object({}) do |(f,v),h|\n  k,e = f.is_a?(String) ? f.split(':') : [f,nil]\n  h[k] = e.nil? ? v : (h[k] || {}).merge(e=&gt;v)\nend \n  #=&gt; {&quot;income&quot;=&gt;{&quot;concessions&quot;=&gt;0, &quot;gross-income&quot;=&gt;&quot;900000&quot;},\n  #    &quot;noi&quot;=&gt;&quot;722300&quot;,\n  #    &quot;purpose&quot;=&gt;&quot;refinancing&quot;,\n  #    &quot;fees&quot;=&gt;{&quot;fee-one&quot;=&gt;&quot;0&quot;, &quot;fee-two&quot;=&gt;&quot;0&quot;},\n  #    &quot;expenses&quot;=&gt;{&quot;admin&quot;=&gt;&quot;7500&quot;, &quot;other&quot;=&gt;&quot;0&quot;},\n  #    &quot;address&quot;=&gt;{&quot;zip&quot;=&gt;&quot;10019&quot;}}\n</code></pre>\n<p>The steps are as follows.</p>\n<pre><code>values = [\n  [&quot;income:concessions&quot;,  0, &quot;noi&quot;, &quot;722300&quot;,  &quot;purpose&quot;, &quot;refinancing&quot;],\n  [&quot;fees:fee-one&quot;, &quot;0&quot; ,&quot;income:gross-income&quot;, &quot;900000&quot;, &quot;expenses:admin&quot;, &quot;7500&quot;],\n  [&quot;fees:fee-two&quot;, &quot;0&quot;, &quot;address:zip&quot;, &quot;10019&quot;, &quot;expenses:other&quot;, &quot;0&quot;]\n]\n\na = values.flatten\n  #=&gt; [&quot;income:concessions&quot;, 0, &quot;noi&quot;, &quot;722300&quot;, &quot;purpose&quot;, &quot;refinancing&quot;,\n  #    &quot;fees:fee-one&quot;, &quot;0&quot;, &quot;income:gross-income&quot;, &quot;900000&quot;, &quot;expenses:admin&quot;, &quot;7500&quot;,\n  #    &quot;fees:fee-two&quot;, &quot;0&quot;, &quot;address:zip&quot;, &quot;10019&quot;, &quot;expenses:other&quot;, &quot;0&quot;]\nenum1 = a.each_slice(2)\n  #=&gt; #&lt;Enumerator: [&quot;income:concessions&quot;, 0, &quot;noi&quot;, &quot;722300&quot;,\n  #    &quot;purpose&quot;, &quot;refinancing&quot;, &quot;fees:fee-one&quot;, &quot;0&quot;, &quot;income:gross-income&quot;, &quot;900000&quot;,\n  #    &quot;expenses:admin&quot;, &quot;7500&quot;, &quot;fees:fee-two&quot;, &quot;0&quot;, &quot;address:zip&quot;, &quot;10019&quot;,\n  # &quot;expenses:other&quot;,&quot;0&quot;]:each_slice(2)&gt;\n</code></pre>\n<p>We can see what values this enumerator will generate by converting it to an array.</p>\n<pre><code>enum1.to_a\n  #=&gt; [[&quot;income:concessions&quot;, 0], [&quot;noi&quot;, &quot;722300&quot;], [&quot;purpose&quot;, &quot;refinancing&quot;],\n  #    [&quot;fees:fee-one&quot;, &quot;0&quot;], [&quot;income:gross-income&quot;, &quot;900000&quot;],\n  #    [&quot;expenses:admin&quot;, &quot;7500&quot;], [&quot;fees:fee-two&quot;, &quot;0&quot;],\n  #    [&quot;address:zip&quot;, &quot;10019&quot;], [&quot;expenses:other&quot;, &quot;0&quot;]]\n</code></pre>\n<p>Continuing,</p>\n<pre><code>enum2 = enum1.with_object({})\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator:\n  #     [&quot;income:concessions&quot;, 0, &quot;noi&quot;, &quot;722300&quot;, &quot;purpose&quot;, &quot;refinancing&quot;,\n  #      &quot;fees:fee-one&quot;, &quot;0&quot;, &quot;income:gross-income&quot;, &quot;900000&quot;, &quot;expenses:admin&quot;, &quot;7500&quot;,\n  #      &quot;fees:fee-two&quot;, &quot;0&quot;, &quot;address:zip&quot;, &quot;10019&quot;, &quot;expenses:other&quot;, &quot;0&quot;]\n  #      :each_slice(2)&gt;:with_object({})&gt;\nenum2.to_a\n  #=&gt; [[[&quot;income:concessions&quot;, 0], {}], [[&quot;noi&quot;, &quot;722300&quot;], {}],\n  #    [[&quot;purpose&quot;, &quot;refinancing&quot;], {}], [[&quot;fees:fee-one&quot;, &quot;0&quot;], {}],\n  #    [[&quot;income:gross-income&quot;, &quot;900000&quot;], {}], [[&quot;expenses:admin&quot;, &quot;7500&quot;], {}],\n  #    [[&quot;fees:fee-two&quot;, &quot;0&quot;], {}], [[&quot;address:zip&quot;, &quot;10019&quot;], {}],\n  #    [[&quot;expenses:other&quot;, &quot;0&quot;], {}]]\n</code></pre>\n<p><code>enum2</code> can be thought of as a <em>compound enumerator</em> (though Ruby has no such concept). The hash being generated is initially empty, as shown, but will be filled in as additional elements are generated by <code>enum2</code></p>\n<p>The first value is generated by <code>enum2</code> and passed to the block, and the block values are assigned values by a process called <a href=\"https://docs.ruby-lang.org/en/2.7.0/doc/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">array decomposition</a>.</p>\n<pre><code>(f,v),h = enum2.next\n  #=&gt; [[&quot;income:concessions&quot;, 0], {}]\nf #=&gt; &quot;income:concessions&quot;\nv #=&gt; 0\nh #=&gt; {}\n</code></pre>\n<p>We now perform the block calculation.</p>\n<pre><code>f.is_a?(String)\n  #=&gt; true\nk,e = f.is_a?(String) ? f.split(':') : [f,nil]\n  #=&gt; [&quot;income&quot;, &quot;concessions&quot;]\ne.nil?\n  #=&gt; false\nh[k] = e.nil? ? v : (h[k] || {}).merge(e=&gt;v)\n  #=&gt; {&quot;concessions&quot;=&gt;0}\n</code></pre>\n<p><code>h[k]</code> equals <code>nil</code> if <code>h</code> does not have a key <code>k</code>. In that case <code>(h[k] || {}) #=&gt; {}</code>. If <code>h</code> does have a key <code>k</code> (and <code>h[k]</code> in not <code>nil</code>).<code>(h[k] || {}) #=&gt; h[k]</code>.</p>\n<p>A second value is now generated by <code>enum2</code> and passed to the block.</p>\n<pre><code>(f,v),h = enum2.next\n  #=&gt; [[&quot;noi&quot;, &quot;722300&quot;], {&quot;income&quot;=&gt;{&quot;concessions&quot;=&gt;0}}]\nf #=&gt; &quot;noi&quot;\nv #=&gt; &quot;722300&quot;\nh #=&gt; {&quot;income&quot;=&gt;{&quot;concessions&quot;=&gt;0}}\n</code></pre>\n<p>Notice that the hash, <code>h</code>, has been updated. Recall it will be returned by the block after all elements of <code>enum2</code> have been generated. We now perform the block calculation.</p>\n<pre><code>f.is_a?(String)\n  #=&gt; true\nk,e = f.is_a?(String) ? f.split(':') : [f,nil]\n  #=&gt; [&quot;noi&quot;]\ne #=&gt; nil\ne.nil?\n  #=&gt; true\nh[k] = e.nil? ? v : (h[k] || {}).merge(e=&gt;v)\n  #=&gt; &quot;722300&quot;\nh #=&gt; {&quot;income&quot;=&gt;{&quot;concessions&quot;=&gt;0}, &quot;noi&quot;=&gt;&quot;722300&quot;}\n</code></pre>\n<p>The remaining calculations are similar.</p>\n"}], "owner": {"reputation": 197, "user_id": 4527138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b6dac61ca770a6c8589f872589fcebe?s=128&d=identicon&r=PG&f=1", "display_name": "yesyoukenn", "link": "https://stackoverflow.com/users/4527138/yesyoukenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 45700391, "answer_count": 4, "score": 3, "last_activity_date": 1601580459, "creation_date": 1502824105, "question_id": 45699817, "link": "https://stackoverflow.com/questions/45699817/dynamically-create-hash-from-array-of-arrays", "title": "Dynamically create hash from array of arrays", "body": "<p>I want to dynamically create a Hash without overwriting keys from an array of arrays. Each array has a string that contains the nested key that should be created. However, I am running into the issue where I am overwriting keys and thus only the last key is there</p>\n\n<pre><code>data = {}\n\nvalues = [\n  [\"income:concessions\",  0, \"noi\", \"722300\",  \"purpose\", \"refinancing\"],\n  [\"fees:fee-one\", \"0\" ,\"income:gross-income\", \"900000\", \"expenses:admin\", \"7500\"],\n  [\"fees:fee-two\", \"0\", \"address:zip\", \"10019\", \"expenses:other\", \"0\"]\n]\n</code></pre>\n\n<p>What it should look like:</p>\n\n<pre><code>{ \n  \"income\" =&gt; {\n    \"concessions\" =&gt; 0,\n    \"gross-income\" =&gt; \"900000\"\n    },\n    \"expenses\" =&gt; {\n      \"admin\" =&gt; \"7500\",\n      \"other\" =&gt; \"0\"\n    } \n  \"noi\" =&gt; \"722300\", \n  \"purpose\" =&gt; \"refinancing\", \n  \"fees\" =&gt; {\n    \"fee-one\" =&gt; 0,\n    \"fee-two\" =&gt; 0\n    },\n\n  \"address\" =&gt; {\n    \"zip\" =&gt; \"10019\"\n  }\n}\n</code></pre>\n\n<p>This is the code that I currently, have how can I avoid overwriting keys when I merge?</p>\n\n<pre><code>values.each do |row|\n  Hash[*row].each do |key, value|\n    keys = key.split(':')\n\n    if !data.dig(*keys)\n      hh = keys.reverse.inject(value) { |a, n| { n =&gt; a } }\n      a = data.merge!(hh)\n    end\n\n  end\nend\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 43, "user_id": 8146695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-73wGnDl_DSY/AAAAAAAAAAI/AAAAAAAAAAw/87A6cneCjZ8/photo.jpg?sz=128", "display_name": "Yves Ramos", "link": "https://stackoverflow.com/users/8146695/yves-ramos"}, "edited": false, "score": 0, "creation_date": 1502857626, "post_id": 45699456, "comment_id": 78368290, "body": "So far I have tried what @Chris told me with the $(document).ready(function() {});. The Same issue. Works on the localhost server but not in Heroku. Tried rearranging the //= requires again, the same result. Tried doing putting all the JS in a separate file and also in application but it does not work. Have gone back and forward on google with no results. I also followed the guide in GitHub for the turbolink, nothing yet. Getting frustrated now.  Any other suggestions. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8146695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-73wGnDl_DSY/AAAAAAAAAAI/AAAAAAAAAAw/87A6cneCjZ8/photo.jpg?sz=128", "display_name": "Yves Ramos", "link": "https://stackoverflow.com/users/8146695/yves-ramos"}, "edited": false, "score": 0, "creation_date": 1502824344, "post_id": 45699585, "comment_id": 78358083, "body": "Hi, thanks for the response. I am new to JS. When you say $(document).on(&#39;ready&#39;, function () { /* ... */ }); you are refering to $(document).on(&#39;turbolinks:load&#39;, function() {}?"}], "tags": [], "owner": {"reputation": 1, "user_id": 8221247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa75952f84aaa1909bdf031d751285f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Kiran", "link": "https://stackoverflow.com/users/8221247/ravi-kiran"}, "is_accepted": false, "score": 0, "last_activity_date": 1502828323, "last_edit_date": 1502828323, "creation_date": 1502823155, "answer_id": 45699585, "question_id": 45699456, "link": "https://stackoverflow.com/questions/45699456/js-jquery-not-working-with-heroku/45699585#45699585", "title": "JS, JQuery not working with heroku", "body": "<p>jQuery Turbolinks doesn't support ready events bound via <code>$(document).on('ready', function)</code>. Instead, use <code>$(document).ready(function)</code> or <code>$(function)</code>.</p>\n\n<p>This will <em>not</em> work:</p>\n\n<pre><code>$(document).on('ready', function () { /* ... */ });\n</code></pre>\n\n<p>These two are guaranteed to work:</p>\n\n<pre><code>$(document).ready(function () { /* ... */ });\n$(function () { /* ... */ });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "edited": false, "score": 0, "creation_date": 1607646482, "post_id": 45740400, "comment_id": 115345573, "body": "The best answer ever! I spent 2 days trying to fix it"}], "tags": [], "owner": {"reputation": 43, "user_id": 8146695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-73wGnDl_DSY/AAAAAAAAAAI/AAAAAAAAAAw/87A6cneCjZ8/photo.jpg?sz=128", "display_name": "Yves Ramos", "link": "https://stackoverflow.com/users/8146695/yves-ramos"}, "is_accepted": true, "score": 3, "last_activity_date": 1502986979, "creation_date": 1502986979, "answer_id": 45740400, "question_id": 45699456, "link": "https://stackoverflow.com/questions/45699456/js-jquery-not-working-with-heroku/45740400#45740400", "title": "JS, JQuery not working with heroku", "body": "<p>I managed to solve my problem. Eventually, after hours of research, I gave up about this issue and start doing some CSS style. When I tried to push the new CSS to Heroku I had the same issue. Not showing the updated CSS in Heroku. Again, did some research and found this;</p>\n\n<pre><code>bundle exec rake assets:precompile\n</code></pre>\n\n<p>At first, it did not work for me. It was saying that I needed to install yarnpkg, which I had already. So, did some more research and finally notice that I was not able to do the bundle exec rake assets:precompile because I was in a branch repository and not the master. Did a checkout to the master, ran the command again, checked the CSS and it was working.  as well as the JQuery. \nTo answer my question, </p>\n\n<pre><code>bundle exec rake assets:precompile\n</code></pre>\n\n<p>was the command that helped me. </p>\n\n<p>The steps are</p>\n\n<pre><code>bundle exec rake assets:precompile\ngit add --all\ngit commit -m \"some message\"\ngit push heroku master\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8146695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-73wGnDl_DSY/AAAAAAAAAAI/AAAAAAAAAAw/87A6cneCjZ8/photo.jpg?sz=128", "display_name": "Yves Ramos", "link": "https://stackoverflow.com/users/8146695/yves-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3437, "favorite_count": 1, "accepted_answer_id": 45740400, "answer_count": 2, "score": 1, "last_activity_date": 1549931407, "creation_date": 1502822729, "question_id": 45699456, "link": "https://stackoverflow.com/questions/45699456/js-jquery-not-working-with-heroku", "title": "JS, JQuery not working with heroku", "body": "<p>I am new to web development. As the title states, I have been having an issue with my JS in Heroku. I am using ruby on rails 5.1 and when I push my project to Heroku master everything is working fine but the JavaScript. I have been googling this for the last 2 days. I have tried organizing the //= require etcetc, have tried modifying my code, have tried changing config.assets.compile = false to true and have tried like 4 to 5 different results here in StackOverflow, like(<a href=\"https://stackoverflow.com/questions/10215416/javascript-features-work-on-localhost-but-not-when-deployed-to-heroku\">Javascript features work on localhost but not when deployed to Heroku</a>). Really don't know what else can I do. \nHere is my application.js</p>\n\n<pre><code>//= require jquery\n//= require rails-ujs\n//= require turbolinks\n//= require jquery.easing\n//= require bootstrap-sprockets\n//= require creative\n//= require_tree .\n\n$(document).on('turbolinks:load', function() {\n// Offset for Main Navigation\n$('#mainNav').affix({\n    offset: {\n    top: 50\n}\n});\n\n$(\"#button-transform\").click(function() {\n  $('.transform').toggleClass('transform-active');\n});\n\nwindow.setTimeout(function() {\n$(\"#flash\").fadeTo(2500, 0).slideUp(1750, function() \n{\n    $(this).remove();\n});\n}, 3000);\n\n});\n</code></pre>\n\n<p>Please let me know if you need more info. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502824537, "post_id": 45698808, "comment_id": 78358182, "body": "I&#39;m a little confused about this question. Aren&#39;t you describing the built in <code>product</code> method? How is what you&#39;re looking for different? Maybe I&#39;m misunderstanding. If what you&#39;re looking for is <code>[1,2].product([3,4], [5,6]) # =&gt; [[1,3,5],[1,3,6],[1,4,5],[1,4,6], ...]</code> that&#39;s exactly what <code>product</code> does"}, {"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502827178, "post_id": 45698808, "comment_id": 78359474, "body": "I have a variable number of arrays to put through the <code>product</code> method and didn&#39;t know the <code>*</code> prefix to an array separates it out as different arguments instead of the array becoming just the first argument."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1502820789, "post_id": 45698869, "comment_id": 78356252, "body": "Consider using <code>a.first</code> instead of <code>a[0]</code>:)"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502821080, "post_id": 45698869, "comment_id": 78356411, "body": "@engineersmnky : didn&#39;t get the last part - where it wouldn&#39;t have the impact? <code>a.shift</code> will change it for <code>*a</code> later, I think; like <code>a.slice!(0)</code> does. No?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502821290, "post_id": 45698869, "comment_id": 78356509, "body": "@kiddorails my apologies should be <code>def multi_product(*a); a.shift.product(*a); end</code> then called as <code>multi_product(*a)</code> since splat will create a new <code>Array</code> the original <code>a</code> would not be modified. Furthermore you could go with <code>def multi_product(a); first,*rest = a; first.product(*rest);end</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1502821726, "post_id": 45698869, "comment_id": 78356752, "body": "You could use <code>*a.drop(1)</code> as the argument."}, {"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1502827389, "post_id": 45698869, "comment_id": 78359576, "body": "I&#39;m accepting this as the answer since it made more since in my particular situation to see it spelled out in those suggestions."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 2, "last_activity_date": 1502821991, "last_edit_date": 1502821991, "creation_date": 1502820510, "answer_id": 45698869, "question_id": 45698808, "link": "https://stackoverflow.com/questions/45698808/adding-parameters-to-array-product-function-in-ruby/45698869#45698869", "title": "Adding parameters to Array Product function in Ruby", "body": "<p>Hope this helps</p>\n\n<pre><code>a =  [[\"a\", \"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"g\", \"h\", \"i\"]]\na[0].product(*a[1..a.length])\n#=&gt; [[\"a\", \"d\", \"g\"], [\"a\", \"d\", \"h\"], [\"a\", \"d\", \"i\"], [\"a\", \"e\", \"g\"], [\"a\", \"e\", \"h\"], [\"a\", \"e\", \"i\"], [\"a\", \"f\", \"g\"], [\"a\", \"f\", \"h\"], [\"a\", \"f\", \"i\"], [\"b\", \"d\", \"g\"], [\"b\", \"d\", \"h\"], [\"b\", \"d\", \"i\"], [\"b\", \"e\", \"g\"], [\"b\", \"e\", \"h\"], [\"b\", \"e\", \"i\"], [\"b\", \"f\", \"g\"], [\"b\", \"f\", \"h\"], [\"b\", \"f\", \"i\"], [\"c\", \"d\", \"g\"], [\"c\", \"d\", \"h\"], [\"c\", \"d\", \"i\"], [\"c\", \"e\", \"g\"], [\"c\", \"e\", \"h\"], [\"c\", \"e\", \"i\"], [\"c\", \"f\", \"g\"], [\"c\", \"f\", \"h\"], [\"c\", \"f\", \"i\"]]\n# or \na.slice!(0).product(*a) #Note: this mutates array.\n# or\na[0].product(*a.drop(1)) # suggested by Cary Swoveland\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1502827288, "post_id": 45698876, "comment_id": 78359528, "body": "Thank you for your answer. The piece of information I was missing was that putting <code>*</code> in front of an array separated it out to multiple method parameters."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 5, "last_activity_date": 1502822073, "last_edit_date": 1502822073, "creation_date": 1502820535, "answer_id": 45698876, "question_id": 45698808, "link": "https://stackoverflow.com/questions/45698808/adding-parameters-to-array-product-function-in-ruby/45698876#45698876", "title": "Adding parameters to Array Product function in Ruby", "body": "<p>How about something like:</p>\n\n<pre><code>def multi_product(base, *args)\n  base.product(*args)\nend\n</code></pre>\n\n<p>results:</p>\n\n<pre><code>multi_product(['A', 'B', 'C'])\n# =&gt; [[\"A\"], [\"B\"], [\"C\"]]\nmulti_product(['A', 'B', 'C'], [1, 2, 3])\n# =&gt; [[\"A\", 1], [\"A\", 2], [\"A\", 3], [\"B\", 1], [\"B\", 2], [\"B\", 3], [\"C\", 1], [\"C\", 2], [\"C\", 3]]\nmulti_product(['A', 'B', 'C'], [1, 2, 3], ['x', 'y', 'z'])\n# =&gt; [[\"A\", 1, \"x\"], [\"A\", 1, \"y\"], [\"A\", 1, \"z\"], [\"A\", 2, \"x\"], [\"A\", 2, \"y\"], [\"A\", 2, \"z\"], [\"A\", 3, \"x\"], [\"A\", 3, \"y\"], [\"A\", 3, \"z\"], [\"B\", 1, \"x\"], [\"B\", 1, \"y\"], [\"B\", 1, \"z\"], [\"B\", 2, \"x\"], [\"B\", 2, \"y\"], [\"B\", 2, \"z\"], [\"B\", 3, \"x\"], [\"B\", 3, \"y\"], [\"B\", 3, \"z\"], [\"C\", 1, \"x\"], [\"C\", 1, \"y\"], [\"C\", 1, \"z\"], [\"C\", 2, \"x\"], [\"C\", 2, \"y\"], [\"C\", 2, \"z\"], [\"C\", 3, \"x\"], [\"C\", 3, \"y\"], [\"C\", 3, \"z\"]]\nmulti_product(['A', 'B', 'C'], [1, 2, 3], ['x', 'y', 'z'], [4, 5, 6])\n# =&gt; [[\"A\", 1, \"x\", 4], [\"A\", 1, \"x\", 5], [\"A\", 1, \"x\", 6], [\"A\", 1, \"y\", 4], [\"A\", 1, \"y\", 5], [\"A\", 1, \"y\", 6], [\"A\", 1, \"z\", 4], [\"A\", 1, \"z\", 5], [\"A\", 1, \"z\", 6], [\"A\", 2, \"x\", 4], [\"A\", 2, \"x\", 5], [\"A\", 2, \"x\", 6], [\"A\", 2, \"y\", 4], [\"A\", 2, \"y\", 5], [\"A\", 2, \"y\", 6], [\"A\", 2, \"z\", 4], [\"A\", 2, \"z\", 5], [\"A\", 2, \"z\", 6], [\"A\", 3, \"x\", 4], [\"A\", 3, \"x\", 5], [\"A\", 3, \"x\", 6], [\"A\", 3, \"y\", 4], [\"A\", 3, \"y\", 5], [\"A\", 3, \"y\", 6], [\"A\", 3, \"z\", 4], [\"A\", 3, \"z\", 5], [\"A\", 3, \"z\", 6], [\"B\", 1, \"x\", 4], [\"B\", 1, \"x\", 5], [\"B\", 1, \"x\", 6], [\"B\", 1, \"y\", 4], [\"B\", 1, \"y\", 5], [\"B\", 1, \"y\", 6], [\"B\", 1, \"z\", 4], [\"B\", 1, \"z\", 5], [\"B\", 1, \"z\", 6], [\"B\", 2, \"x\", 4], [\"B\", 2, \"x\", 5], [\"B\", 2, \"x\", 6], [\"B\", 2, \"y\", 4], [\"B\", 2, \"y\", 5], [\"B\", 2, \"y\", 6], [\"B\", 2, \"z\", 4], [\"B\", 2, \"z\", 5], [\"B\", 2, \"z\", 6], [\"B\", 3, \"x\", 4], [\"B\", 3, \"x\", 5], [\"B\", 3, \"x\", 6], [\"B\", 3, \"y\", 4], [\"B\", 3, \"y\", 5], [\"B\", 3, \"y\", 6], [\"B\", 3, \"z\", 4], [\"B\", 3, \"z\", 5], [\"B\", 3, \"z\", 6], [\"C\", 1, \"x\", 4], [\"C\", 1, \"x\", 5], [\"C\", 1, \"x\", 6], [\"C\", 1, \"y\", 4], [\"C\", 1, \"y\", 5], [\"C\", 1, \"y\", 6], [\"C\", 1, \"z\", 4], [\"C\", 1, \"z\", 5], [\"C\", 1, \"z\", 6], [\"C\", 2, \"x\", 4], [\"C\", 2, \"x\", 5], [\"C\", 2, \"x\", 6], [\"C\", 2, \"y\", 4], [\"C\", 2, \"y\", 5], [\"C\", 2, \"y\", 6], [\"C\", 2, \"z\", 4], [\"C\", 2, \"z\", 5], [\"C\", 2, \"z\", 6], [\"C\", 3, \"x\", 4], [\"C\", 3, \"x\", 5], [\"C\", 3, \"x\", 6], [\"C\", 3, \"y\", 4], [\"C\", 3, \"y\", 5], [\"C\", 3, \"y\", 6], [\"C\", 3, \"z\", 4], [\"C\", 3, \"z\", 5], [\"C\", 3, \"z\", 6]]\n</code></pre>\n\n<p>What it does is take one required parameter (<em>base</em>) which responds to <code>product</code> and then the <code>*args</code> takes a variable number of other parameters and stores them in an array <em>args</em>. You can then use <code>*</code> to deconstruct an array back into an argument list, which is done inside the call to <code>product(*args)</code> so that (in the case of the second example) ends up looking like</p>\n\n<pre><code>['A', 'B', 'C'].product([1, 2, 3], ['x', 'y', 'z'])\n</code></pre>\n"}], "owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 45698869, "answer_count": 2, "score": 0, "last_activity_date": 1502822073, "creation_date": 1502820295, "question_id": 45698808, "link": "https://stackoverflow.com/questions/45698808/adding-parameters-to-array-product-function-in-ruby", "title": "Adding parameters to Array Product function in Ruby", "body": "<p>So I've been scratching my head trying to find a solution to this.</p>\n\n<p>I need a method that will take any number of arrays that I need to collect the <a href=\"https://apidock.com/ruby/Array/product\" rel=\"nofollow noreferrer\">product</a> of.</p>\n\n<p>1 array:</p>\n\n<pre><code>return [A, B, C] # =&gt; [A, B, C]\n</code></pre>\n\n<p>2 arrays:</p>\n\n<pre><code>return [A, B, C].product([1, 2, 3]) # =&gt; [[A, 1], [A, 2], [A, 3], [B, 1] ... [C, 3]]\n</code></pre>\n\n<p>3 arrays: </p>\n\n<pre><code>return [A, B, C].product([1, 2, 3,],[x, y, z]) # =&gt; [[A, 1, x], [A, 1, y], ... [C, 3, z]]\n</code></pre>\n\n<p>So my current solution is this case switch, which is functional but inconvenient. </p>\n\n<pre><code>case options.count\nwhen 1\n  options[0].values\nwhen 2\n  options[0].values.product(options[1].values)\nwhen 3\n  options[0].values.product(options[1].values,\n                            options[2].values)\nwhen 4\n  options[0].values.product(options[1].values,\n                            options[2].values,\n                            options[3].values)\nend\n</code></pre>\n\n<p>What I'm looking for is a method that procedurally or recursively returns the product of an unknown number of arrays. The output needs to be like the above arrays. </p>\n\n<p>I've tried:</p>\n\n<pre><code>array = options[0].values\noptions.each_with_index do |option, i|\n  array = array.product(option.values) if i &gt; 0\nend\nreturn array\n</code></pre>\n\n<p>But it returns:</p>\n\n<pre><code>[[[A, 1], x], [[A, 1], y], [[A, 1], z], [[A, 2], x], ... [[C, 3], z]]\n</code></pre>\n\n<p>Which groups the values incorrectly.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502820591, "post_id": 45698514, "comment_id": 78356138, "body": "@Jason are you not getting the results you expect? it looks like your code should work"}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 8468605, "user_type": "registered", "profile_image": "https://graph.facebook.com/1636531823037886/picture?type=large", "display_name": "Nazeef Ahmad Meer", "link": "https://stackoverflow.com/users/8468605/nazeef-ahmad-meer"}, "is_accepted": true, "score": 0, "last_activity_date": 1502822146, "creation_date": 1502822146, "answer_id": 45699297, "question_id": 45698514, "link": "https://stackoverflow.com/questions/45698514/how-to-output-specific-values-from-json-in-rails/45699297#45699297", "title": "How to output specific values from JSON in Rails", "body": "<pre><code>&lt;% @results['results'].each do |t| %&gt;\n  &lt;%= t['title'] %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Your code is fine. Just do not forget the &lt;% end %> to close the block.</p>\n"}], "owner": {"reputation": 405, "user_id": 4844496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0c346134010553b980e6e727ff78f43?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4844496/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 45699297, "answer_count": 1, "score": 0, "last_activity_date": 1502822146, "creation_date": 1502819235, "last_edit_date": 1502819680, "question_id": 45698514, "link": "https://stackoverflow.com/questions/45698514/how-to-output-specific-values-from-json-in-rails", "title": "How to output specific values from JSON in Rails", "body": "<p>I'm starting to learn Ruby on Rails and I have JSON data that looks like this:</p>\n\n<pre><code>{\n   \"page\": 1,\n   \"total_results\": 19601,\n   \"total_pages\": 981,\n   \"results\": [\n      {\n         \"vote_count\": 4064,\n         \"id\": 211672,\n         \"video\": false,\n         \"vote_average\": 6.4,\n         \"title\": \"Minions\",\n         \"popularity\": 197.218355,\n         \"poster_path\": \"/q0R4crx2SehcEEQEkYObktdeFy.jpg\",\n         \"original_language\": \"en\",\n         \"original_title\": \"Minions\",\n         \"genre_ids\": [\n            10751,\n            16,\n            12,\n            35\n         ],\n         \"backdrop_path\": \"/uX7LXnsC7bZJZjn048UCOwkPXWJ.jpg\",\n         \"adult\": false,\n         \"overview\": \"Minions Stuart, Kevin and Bob are recruited by Scarlet Overkill, a super-villain who, alongside her inventor husband Herb, hatches a plot to take over the world.\",\n         \"release_date\": \"2015-06-17\"\n      },\n      {\n         \"vote_count\": 4526,\n         \"id\": 321612,\n         \"video\": false,\n         \"vote_average\": 6.8,\n         \"title\": \"Beauty and the Beast\",\n         \"popularity\": 106.789987,\n         \"poster_path\": \"/tWqifoYuwLETmmasnGHO7xBjEtt.jpg\",\n         \"original_language\": \"en\",\n         \"original_title\": \"Beauty and the Beast\",\n         \"genre_ids\": [\n            10751,\n            14,\n            10749\n         ],\n         \"backdrop_path\": \"/6aUWe0GSl69wMTSWWexsorMIvwU.jpg\",\n         \"adult\": false,\n         \"overview\": \"A live-action adaptation of Disney's version of the classic 'Beauty and the Beast' tale of a cursed prince and a beautiful young woman who helps him break the spell.\",\n         \"release_date\": \"2017-03-16\"\n      },\n //snipped rest of JSON for brevity\n</code></pre>\n\n<p>and I want to only print out the \"<strong>title</strong>\" from each \"<strong>result</strong>.\"</p>\n\n<p>My <strong>model</strong> is</p>\n\n<pre><code>class ModelForMyApi &lt; ActiveRecord::Base\nrequire 'rest_client'\n\n   @url\n\n   def self.getData\n       response = RestClient(@url, { :content_type =&gt; :json, \"Api-Key\" =&gt; \"put your API key here\" }\n   end\n\n   def self.retrieve_results(myParameter)\n       @url = \"myApiUrl.com/stuff/?putYourParamNameHere=#{myParameter}\"\n       JSON.parse(ModelForMyApi.getData)\n   end\nend\n</code></pre>\n\n<p>And <strong>controller</strong> is</p>\n\n<pre><code>class ExamplesController &lt; ApplicationController\n    def index\n       @results = ModelForMyApi.retrieve_results(\"superCoolParameter\")\n    end\nend\n</code></pre>\n\n<p>How would I print out all the \"titles\"? I'm not sure I'm iterating and accessing the JSON correctly.\nDo I do:</p>\n\n<pre><code>&lt;% @results['results'].each do |t| %&gt;\n&lt;%= t['title'] %&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 2, "last_activity_date": 1502818901, "creation_date": 1502818901, "answer_id": 45698438, "question_id": 45698273, "link": "https://stackoverflow.com/questions/45698273/ruby-on-rails-reuse-code-across-other-multiple-actions/45698438#45698438", "title": "Ruby on Rails: reuse code across other multiple actions", "body": "<p>The problem is that you instantiate the variables after calling <code>render</code> method.</p>\n\n<p>Put <code>render :index</code> at the bottom of the <code>sold_to_winner</code> method and it should work:</p>\n\n<pre><code>def sold_to_winner\n  @soldcars = Soldcar.winner_username(params[:winnerusername]).order(\"auctioncarenddate DESC\").paginate(:page =&gt; params[:page], :per_page =&gt; 15)\n  @page_name = \"Cars Sold to: \" + params[:winnerusername]\n  authorize! :show, @soldcars\n  @car_buy_prices, @car_sell_prices, @car_status, @car_salesprice_background, @car_winnersalesprice_background = Soldcar.check_bibip_prices(@soldcars)\n  render :index\nend\n</code></pre>\n"}], "owner": {"reputation": 1216, "user_id": 154522, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8d88a2dfba196c0f83804b73a9aba905?s=128&d=identicon&r=PG", "display_name": "Tolga", "link": "https://stackoverflow.com/users/154522/tolga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 45698438, "answer_count": 1, "score": 2, "last_activity_date": 1502828728, "creation_date": 1502818272, "last_edit_date": 1502828728, "question_id": 45698273, "link": "https://stackoverflow.com/questions/45698273/ruby-on-rails-reuse-code-across-other-multiple-actions", "title": "Ruby on Rails: reuse code across other multiple actions", "body": "<p>I have multiple actions within a single controller and I want to reuse some of the codes in one of my actions. So I decided to put it in a model class method. Unfortunately, returned variables can not be accessed in the view. Here you can see the controller action (model method I am calling is check_bibip_prices)</p>\n\n<pre><code>def sold_to_winner\n  @soldcars = Soldcar.winner_username(params[:winnerusername]).order(\"auctioncarenddate DESC\").paginate(:page =&gt; params[:page], :per_page =&gt; 15)\n  @page_name = \"Cars Sold to: \" + params[:winnerusername]\n\n  render :index\n  authorize! :show, @soldcars\n\n  @car_buy_prices, @car_sell_prices, @car_status, @car_salesprice_background, @car_winnersalesprice_background = Soldcar.check_bibip_prices(@soldcars)\nend\n</code></pre>\n\n<p>Model can be seen as follows:</p>\n\n<pre><code>class Soldcar &lt; ApplicationRecord\n  belongs_to :bibipprice\n\n  scope :isongoingauction, -&gt;(isongoingauction) { where isongoingauction: isongoingauction }\n  scope :winner_username, -&gt;(winnerusername) { where(winnerusername: winnerusername) }\n\n  def self.check_bibip_prices(soldcars)\n    @car_buy_prices = {}\n    @car_sell_prices = {}\n    @car_status = {}\n    @car_salesprice_background = {}\n    @car_winnersalesprice_background = {}\n\n    @soldcars.each do |car|\n      if (car.paintbodydamage &lt; 10) and (car.mechanicaldamage &lt; 2)\n        @car_status[car.carid] = \"excellent\"\n        @car_buy_prices[car.carid] = car.bibipprice.dealer_price_three\n        @car_sell_prices[car.carid] = car.bibipprice.estimated_price_three\n      elsif (car.paintbodydamage &lt; 18) and (car.mechanicaldamage &lt; 5)\n        @car_status[car.carid] = \"good\"\n        @car_buy_prices[car.carid] = car.bibipprice.dealer_price_two\n        @car_sell_prices[car.carid] = car.bibipprice.estimated_price_two\n      else\n        @car_status[car.carid] = \"fair\"\n        @car_buy_prices[car.carid] = car.bibipprice.dealer_price_one\n        @car_sell_prices[car.carid] = car.bibipprice.estimated_price_one \n      end\n\n      if car.bibipprice.estimated_price_three &gt; 0 \n        if car.winnersalesprice &gt; @car_sell_prices[car.carid]\n          @car_winnersalesprice_background[car.carid] = \"pricealert\"\n        elsif car.winnersalesprice &gt; @car_buy_prices[car.carid]\n          @car_winnersalesprice_background[car.carid] = \"pricesoso\"\n        elsif car.winnersalesprice &gt; 0\n          @car_winnersalesprice_background[car.carid] = \"priceok\"\n        end\n\n        if car.salesprice &gt; @car_sell_prices[car.carid]\n          @car_salesprice_background[car.carid] = \"pricealert\"\n        elsif car.salesprice &gt; @car_buy_prices[car.carid]\n          @car_salesprice_background[car.carid] = \"pricesoso\"\n        else\n          @car_salesprice_background[car.carid] = \"priceok\"\n        end\n      else\n        @car_salesprice_background[car.carid] = \"\"\n        @car_winnersalesprice_background[car.carid] = \"\"\n      end\n    end\n\n    return @soldcarscar_buy_prices, @soldcarscar_sell_prices, @soldcarscar_status, @soldcarscar_salesprice_background, @soldcarscar_winnersalesprice_background \n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "excel", "rest", "microsoft-graph-api"], "comments": [{"owner": {"reputation": 1341, "user_id": 1023433, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4dbb799e1b5657f4d9985b2149ff9ca6?s=128&d=identicon&r=PG", "display_name": "Jay Kannan", "link": "https://stackoverflow.com/users/1023433/jay-kannan"}, "edited": false, "score": 0, "creation_date": 1503396605, "post_id": 45698131, "comment_id": 78586980, "body": "I&#39;m guessing it&#39;s related to this error as well, MS needs to open up on documentation on why this could happen <a href=\"https://stackoverflow.com/questions/41849729/ms-graph-rest-api-errors?rq=1\" title=\"ms graph rest api errors\">stackoverflow.com/questions/41849729/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 1023433, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4dbb799e1b5657f4d9985b2149ff9ca6?s=128&d=identicon&r=PG", "display_name": "Jay Kannan", "link": "https://stackoverflow.com/users/1023433/jay-kannan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503415903, "creation_date": 1503415903, "answer_id": 45821781, "question_id": 45698131, "link": "https://stackoverflow.com/questions/45698131/error-trying-to-create-session-on-an-excel-file-using-microsoft-graph/45821781#45821781", "title": "Error trying to create session on an Excel file using Microsoft Graph", "body": "<p>Turns out it's an issue with that particular file, I still don't know why though. it's not really an answer - but the lack of documentation for anything to do with this API is stunning. I'd appreciate links.</p>\n"}], "owner": {"reputation": 1341, "user_id": 1023433, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4dbb799e1b5657f4d9985b2149ff9ca6?s=128&d=identicon&r=PG", "display_name": "Jay Kannan", "link": "https://stackoverflow.com/users/1023433/jay-kannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1503415903, "creation_date": 1502817747, "last_edit_date": 1503408210, "question_id": 45698131, "link": "https://stackoverflow.com/questions/45698131/error-trying-to-create-session-on-an-excel-file-using-microsoft-graph", "title": "Error trying to create session on an Excel file using Microsoft Graph", "body": "<p>I'm trying to manipulate an Excel file using Ruby, while I seem to eb able to read it properly - I have trouble creating a session to start writing into it. There's not much help online on what this even means.</p>\n\n<p>I'm trying to create a session like this, just like it suggests on the documentation (but not in ruby)</p>\n\n<pre><code>url = \"https://graph.microsoft.com/v1.0/me/drive/items/#{@item_id}/workbook/createSession\"\nresponse = HTTParty.post(url, headers: { 'Authorization' =&gt; @access_token, \n           'Content-Type' =&gt; 'application/json' }, \n           body: '{ \"persistChanges\" : true }')\n</code></pre>\n\n<p>But I get the following response. </p>\n\n<pre><code>{\n  \"error\": {\n    \"code\": \"EditModeCannotAcquireLockUnknownUser\",\n    \"message\": \"\",\n    \"innerError\": {\n      \"request-id\": \"b088abbe-8353-4614-b9a7-d769ff85da50\",\n      \"date\": \"2017-08-15T17:12:41\"\n    }\n  }\n}\n\n@response=#&lt;Net::HTTPConflict 409 Conflict readbody=true&gt;\n</code></pre>\n\n<p>I've just started with this, what could be the problem? the error indicates that some unknown user has locked the file - but the file is editable and the access_token is derived from my own user profile</p>\n\n<p>Where do I go from here? has anybody manipulated excel files and formula using Microsoft Graph?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "environment-variables"], "answers": [{"comments": [{"owner": {"reputation": 1317, "user_id": 6679117, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/913b06fd0284b4d5a0b4ee59a9e019d7?s=128&d=identicon&r=PG&f=1", "display_name": "mangocaptain", "link": "https://stackoverflow.com/users/6679117/mangocaptain"}, "edited": false, "score": 0, "creation_date": 1502985632, "post_id": 45698508, "comment_id": 78437467, "body": "Thanks @sa77! On a follow-up question, when you deploy your app, how does the server know to use your .env.production file? Where is that set?"}, {"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "reply_to_user": {"reputation": 1317, "user_id": 6679117, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/913b06fd0284b4d5a0b4ee59a9e019d7?s=128&d=identicon&r=PG&f=1", "display_name": "mangocaptain", "link": "https://stackoverflow.com/users/6679117/mangocaptain"}, "edited": false, "score": 2, "creation_date": 1502987472, "post_id": 45698508, "comment_id": 78438662, "body": "@mangocaptain you just need to have  all your configurations on <code>.env.production</code> and have <code>RAILS_ENV=production</code> and have these lines: <code>require &#39;dotenv&#39;</code> folowed by <code>Dotenv.load</code> on your <code>config&#47;environments&#47;production.rb</code> file for this to work"}], "tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": true, "score": 4, "last_activity_date": 1502819219, "creation_date": 1502819219, "answer_id": 45698508, "question_id": 45698104, "link": "https://stackoverflow.com/questions/45698104/rails-config-local-env-yml-vs-env-vs-bashrc-environment-variables/45698508#45698508", "title": "Rails config/local_env.yml vs .env vs bashrc environment variables", "body": "<p>All of these methods are used to feed environment variables to your rails application. So, from an app's point of view, it serves the same purpose whether you export it from <code>.env</code> or <code>.bashrc</code> or <code>config/local_env.yml</code> files.</p>\n\n<p>The differences in these methods are really a matter of personal choice among the team members involved in maintaining the app's development and deployment environments. However, here are few things to consider while opting for either of these choices. </p>\n\n<p><strong><code>.bashrc</code></strong> - Use this if you manually configure deployment servers and really comfortable with linux/unix command line system administration. This configuration file is specific to bash shell (Bourne Again Shell). You need to configure different file if your server uses different shell (for example: <code>.zshrc</code> if it uses Z Shell)</p>\n\n<p><strong><code>.env</code></strong> - Use this if you want to keep your app centric environment variables within the app itself while maintaining different variations of environment variables for different runtime environments of your rails app. For example: <code>.env.development</code> and <code>.env.test</code> files with specific values of the environment variables for your development and test environments respectively. This gives you more control of your app's environment variables and do not have to rely on the platform (terminal shell) you want to deploy your app.</p>\n\n<p><strong><code>config/local_env.yml</code></strong> - This is similar to <code>.env</code> approach, which is provided out of the box by rails gem that allows you to configure environment variables for your app in yml format. This method also keeps your app's configuration within the app irrespective of the shell you are using to run your app.</p>\n"}], "owner": {"reputation": 1317, "user_id": 6679117, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/913b06fd0284b4d5a0b4ee59a9e019d7?s=128&d=identicon&r=PG&f=1", "display_name": "mangocaptain", "link": "https://stackoverflow.com/users/6679117/mangocaptain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 1, "accepted_answer_id": 45698508, "answer_count": 1, "score": 2, "last_activity_date": 1560543607, "creation_date": 1502817677, "last_edit_date": 1560543607, "question_id": 45698104, "link": "https://stackoverflow.com/questions/45698104/rails-config-local-env-yml-vs-env-vs-bashrc-environment-variables", "title": "Rails config/local_env.yml vs .env vs bashrc environment variables", "body": "<p>I was reading from this <a href=\"http://railsapps.github.io/rails-environment-variables.html\" rel=\"nofollow noreferrer\">article</a> that you can create a <code>config/local_env.yml</code> with environment variables and then use <code>config/application.rb</code> to read it to replace/take priority before the environment variables that you export in your <code>.bashrc</code>. What then is the <code>.env</code> used for then? Does it serve the same purpose as the <code>config/local_env.yml</code>?</p>\n"}, {"tags": ["ruby", "bash", "chef-infra"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1502817128, "post_id": 45697626, "comment_id": 78354314, "body": "Putting all of that Proc code on one line is pointless and severely impairs readability. Why are you doing that?"}, {"owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502817453, "post_id": 45697626, "comment_id": 78354476, "body": "@tadman No one  besides me will see this code. So it was not so important."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502818923, "post_id": 45697626, "comment_id": 78355198, "body": "Guess what, we&#39;re looking at your code right now. It&#39;s important."}, {"owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1502819149, "post_id": 45697626, "comment_id": 78355312, "body": "@tadman Yes. You are right. My bad."}], "answers": [{"comments": [{"owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "edited": false, "score": 0, "creation_date": 1502817369, "post_id": 45697725, "comment_id": 78354441, "body": "Thanks so much. It worked like charm. One question, If I attempt to run a command that does not exist on the server ( for instance &quot;finger&quot; where finger is not available ), it also throws me an error about &quot;Local Jump: Unexpected return&quot;. How can I catch that?"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 0, "last_activity_date": 1502816290, "creation_date": 1502816290, "answer_id": 45697725, "question_id": 45697626, "link": "https://stackoverflow.com/questions/45697626/process-throwing-unexpected-return-error/45697725#45697725", "title": "Process throwing &quot;Unexpected return&quot; error", "body": "<p>The problem is that <code>return</code> can't be called from <code>Ruby</code> procs. Just skip <code>return</code> to avoid the error:</p>\n\n<pre><code> def proc_test(command)\n     proc = Proc.new do |command|\n       command_out = Mixlib::ShellOut.new(command) \n       command_out.run_command\n       command_out.stdout + command_out.stderr\n     end\n\n     proc.call(command)\n end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "edited": false, "score": 0, "creation_date": 1502817520, "post_id": 45697924, "comment_id": 78354512, "body": "How do I do that? I dont mind using Processes. Its simply that when I attempted to use it directly on the code, it failed too."}, {"owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "edited": false, "score": 0, "creation_date": 1502818071, "post_id": 45697924, "comment_id": 78354776, "body": "Yes. Anyway, Igor response works perfectly. Only problem now, is that I get that exception if the command that I send to the process does not exist on the server. For instance this &quot;proc_test(command)&quot; will work perfectly if command equals &quot;pwd&quot; but it will throw an exception if command equals &quot;blahblahblah&quot;. I was expecting to get the Unix error stream, &quot;Command not found&quot; or something similar, not having Ruby to throw an exception. :("}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "edited": false, "score": 1, "creation_date": 1502818546, "post_id": 45697924, "comment_id": 78355010, "body": "We should probably take this to Slack, whatever you&#39;re trying to do is probably a bad idea."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1502817013, "creation_date": 1502817013, "answer_id": 45697924, "question_id": 45697626, "link": "https://stackoverflow.com/questions/45697626/process-throwing-unexpected-return-error/45697924#45697924", "title": "Process throwing &quot;Unexpected return&quot; error", "body": "<p>I don't understand why you think you need a Proc at all. Just use the normal <code>shell_out!</code> helper method or a <code>bash</code> resource.</p>\n"}], "owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 45697725, "answer_count": 2, "score": 0, "last_activity_date": 1502817013, "creation_date": 1502815945, "last_edit_date": 1502816541, "question_id": 45697626, "link": "https://stackoverflow.com/questions/45697626/process-throwing-unexpected-return-error", "title": "Process throwing &quot;Unexpected return&quot; error", "body": "<p>I am trying to create a <code>Chef</code> recipe that will read attributes from a <code>Role</code>, and one of those attributes will contain <code>Bash</code> code that needs to be executed on the server.</p>\n\n<p>Hence, I created the below process:</p>\n\n<pre><code>def proc_test(command)\n  proc = Proc.new { |command| command_out = Mixlib::ShellOut.new(command) ; command_out.run_command ; return command_out.stdout + command_out.stderr  }\n  proc.call(command)\nend\n</code></pre>\n\n<p>which, when run like this:</p>\n\n<pre><code>node.set['attributes']['nested_attribute'] = proc_test(\"hostname\")\n</code></pre>\n\n<p>works. But if I attempt to do this:</p>\n\n<pre><code>command=\"hostname\"\nnode.set['attributes']['nested_attribute'] = proc_test(command)\n</code></pre>\n\n<p>it throws this error:</p>\n\n<pre><code>LocalJumpError\n--------------\nunexpected return\n</code></pre>\n\n<p>Can someone help me with this?</p>\n\n<p>If, instead of using the <code>return</code> keyword, I use <code>put</code>, I get the same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "charts", "instance-variables", "chartkick"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 2, "creation_date": 1502822203, "post_id": 45697446, "comment_id": 78357005, "body": "the <code>data</code> must be an array of hashes, key is displayed on the horizontal axis while the value is the actual value for that key. Example: <code>data: [{&#39;2017-01-01&#39; =&gt; 12}]</code> will display &quot;2017-01-01&quot; on the horizontal axis and the value will be 12."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 2, "creation_date": 1502822422, "post_id": 45697446, "comment_id": 78357098, "body": "@MrYoshiji also it will accept a nested <code>Array</code> as well e.g. <code>[[&#39;2017-01-01&#39;,12]]</code> so <code>data: [[&#39;Total&#39;,@type1_total]]</code> would be acceptable"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502815297, "creation_date": 1502815297, "question_id": 45697446, "link": "https://stackoverflow.com/questions/45697446/using-instance-variables-in-chartkick-gives-empty-chart-ruby-on-rails", "title": "using instance variables in chartkick, gives empty chart, Ruby on Rails", "body": "<p>I've used <code>chartcick</code> to go through datasets.</p>\n\n<p>Now I want to only show the values of some instance variable in a column chart.</p>\n\n<p>the values are each bound to a different instance variable.</p>\n\n<pre><code>@type1_total = @trx2_1kg.to_f + @sam_1kg.to_f + @nest_1kg.to_f + @nav23_1kg.to_f\n</code></pre>\n\n<p>If I add this <code>@type1_total</code> variable to the chart the chart shows up empty without any columns.</p>\n\n<p>I've also tried to make another variable in the controller, like this.</p>\n\n<pre><code>        @data_for_types = [\n        {\n            name: \"Type_1\", \n            data: [@type1_total]\n        }\n\n]\n</code></pre>\n\n<p>And in the view <code>&lt;%= bar_chart @data_for_types %&gt;</code></p>\n\n<p>That also gives an empty graph.\nIs it not possible to show values from instant variables on charts?\nI don't see anything about it in the documentations?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8467308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35ce57e7345298812eb4fd0c64b0491?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Huh", "link": "https://stackoverflow.com/users/8467308/sean-huh"}, "edited": false, "score": 0, "creation_date": 1502814920, "post_id": 45697216, "comment_id": 78353042, "body": "Thanks for anwsering but it didn&#39;t work...  I got same error message.                    Even I delete that code you mention, I got an new error message (c:/Ruby22-x64/DevKit/git/bookmarker/app/views/bookmkfolders&zwnj;&#8203;/index.html.erb:17: syntax error, unexpected &#39;&lt;&#39;)   which means a code under the previous error code."}], "tags": [], "owner": {"reputation": 418, "user_id": 1612648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec33534bfc77e02779b4954cbe6a4ab7?s=128&d=identicon&r=PG", "display_name": "Jorge Vargas", "link": "https://stackoverflow.com/users/1612648/jorge-vargas"}, "is_accepted": false, "score": 0, "last_activity_date": 1502814531, "creation_date": 1502814531, "answer_id": 45697216, "question_id": 45697020, "link": "https://stackoverflow.com/questions/45697020/syntaxerror-in-bookmkfolderscontrollerindex-unknown-regexp-options-dv/45697216#45697216", "title": "SyntaxError in BookmkfoldersController#index, unknown regexp options - dv", "body": "<p>I think this is wrong:</p>\n\n<p><code>&lt;%= button_tag \"\", type: 'button', class: 'delete-button' , \"&lt;span class=\"fa fa-times fa-1x\" aria-hidden=\"true\"&gt;&lt;/span&gt;\".html_safe %&gt;</code></p>\n\n<p>You're trying to enclose <code>\"&lt;span class=\"fa fa-times fa-1x\" aria-hidden=\"true\"&gt;&lt;/span&gt;\"</code> in a weird way.</p>\n\n<p>This should work:</p>\n\n<p><code>'&lt;span class=\"fa fa-times fa-1x\" aria-hidden=\"true\"&gt;&lt;/span&gt;'</code></p>\n\n<p>(i replaced the start and end \" with ')</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8467308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35ce57e7345298812eb4fd0c64b0491?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Huh", "link": "https://stackoverflow.com/users/8467308/sean-huh"}, "edited": false, "score": 0, "creation_date": 1502815371, "post_id": 45697305, "comment_id": 78353297, "body": "Thanks for anwsering but it didn&#39;t work... I edited to codes you taught but I got same error message."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 3, "user_id": 8467308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35ce57e7345298812eb4fd0c64b0491?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Huh", "link": "https://stackoverflow.com/users/8467308/sean-huh"}, "edited": false, "score": 0, "creation_date": 1502815630, "post_id": 45697305, "comment_id": 78353439, "body": "@SeanHuh Check updated answer, i missed some error in <code>simple_form_for</code>."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1502815605, "last_edit_date": 1502815605, "creation_date": 1502814816, "answer_id": 45697305, "question_id": 45697020, "link": "https://stackoverflow.com/questions/45697020/syntaxerror-in-bookmkfolderscontrollerindex-unknown-regexp-options-dv/45697305#45697305", "title": "SyntaxError in BookmkfoldersController#index, unknown regexp options - dv", "body": "<p>You can't nest <code>&lt;% %&gt;</code> like this:</p>\n\n<pre><code>&lt;%= simple_form_for @bookmkfolder, remote: true, url: {action: \"&lt;%= @bookmkfolder.id %&gt;\"} do |k| %&gt;\n</code></pre>\n\n<p>Once you open a <code>&lt;%</code> you are using Ruby, so you can just use the variables in the code, like so:</p>\n\n<pre><code>&lt;%= simple_form_for @bookmkfolder, remote: true, url: { action: @bookmkfolder.id } do |k| %&gt;\n</code></pre>\n\n<hr>\n\n<p>Not related to current error, but also notice that the second <code>button_tag</code> is incorrect (aside from using nested double quotes), you can't pass an argument like you are trying to do with <code>\"&lt;span&gt;...&lt;/span&gt;\".html_safe</code>.</p>\n\n<p>What you are looking for is to pass a <em>block</em>, like this:</p>\n\n<pre><code>&lt;div class=\"add-card-form\"&gt;\n  &lt;%= button_tag \"\", type: 'button', class: 'delete-button' do %&gt;\n    &lt;span class=\"fa fa-times fa-1x\" aria-hidden=\"true\"&gt;&lt;/span&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>You can read about <code>button_tag</code> in <a href=\"http://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormTagHelper.html#method-i-button_tag\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 8467308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35ce57e7345298812eb4fd0c64b0491?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Huh", "link": "https://stackoverflow.com/users/8467308/sean-huh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 45697305, "answer_count": 2, "score": -1, "last_activity_date": 1502815605, "creation_date": 1502813851, "question_id": 45697020, "link": "https://stackoverflow.com/questions/45697020/syntaxerror-in-bookmkfolderscontrollerindex-unknown-regexp-options-dv", "title": "SyntaxError in BookmkfoldersController#index, unknown regexp options - dv", "body": "<p>I want to make an web application, and everything's been working fine so far. However, ActionView is suddenly wrong. It seems it can't recognize closed html tags. Every time it sees a closed parentheses, it claims that these are unclosed. However, I think they all are! I've posted the error log below, probably someone knows what's going on...! </p>\n\n<p>I get following error :</p>\n\n<pre><code> SyntaxError in BookmkfoldersController#index\n app/views/bookmkfolders/index.html.erb:16: unknown regexp options - dv\n app/views/bookmkfolders/index.html.erb:17: syntax error, unexpected '&lt;'\n</code></pre>\n\n<p>and this is file <code>index.html.erb</code></p>\n\n<pre><code>&lt;ul class=\"board-canvas\" data-update-url = \"&lt;%=sort_bookmkfolders_url %&gt;\"&gt;\n\n &lt;% @bookmkfolders.each do |bookmkfolder| %&gt;\n      &lt;div class=\"panel-wrapped\"&gt;\n          &lt;li id=\"&lt;%=bookmkfolder.id%&gt;\" class=\"panel\" style = \"background-color:&lt;%=bookmkfolder.bookmkfoldercolor%&gt;\"&gt;\n            &lt;%= text_field_tag :test, \"\", class: 'thVal' %&gt;\n            &lt;h2 class= \"panel-title\" &gt;&lt;%= bookmkfolder.bookmkfoldertitle %&gt;&lt;/h2&gt;\n            &lt;div class=\"panel-menu\"&gt;\n              &lt;%= button_tag \"Add a bookmark-url\", type: 'button', class: 'addfolder js-add-card' %&gt;\n              &lt;div class=\"add-card-form\"&gt;\n                &lt;%= simple_form_for @bookmkfolder, remote: true, url: {action: \"&lt;%= @bookmkfolder.id %&gt;\"} do |k| %&gt;\n                &lt;%= k.input_field :bookmktitle, class: 'board-make-input', autocomplete: :off, autocorrect: :off, spellcheck: false, placeholder: 'Add a bookmark' %&gt;\n                &lt;%= button_tag \"SAVE\", type: 'submit' , class: 'save-button js-save-card' %&gt;\n                &lt;%= button_tag \"\", type: 'button', class: 'delete-button' , \"&lt;span class=\"fa fa-times fa-1x\" aria-hidden=\"true\"&gt;&lt;/span&gt;\".html_safe %&gt;\n                &lt;% end %&gt;\n              &lt;/div&gt;   # this is error message app/views/bookmkfolders/index.html.erb:16\n            &lt;/div&gt;\n          &lt;/li&gt;\n\n          &lt;ul class=\"card-list\"&gt;\n            &lt;% bookmkfolder.@bookmks.each do |bookmk| %&gt;\n              &lt;li class =\"card-item\"&gt;\n                &lt;%= link_to \"\",\"&lt;%= bookmk.bookmktitle %&gt;\", class: 'card-link' %&gt;\n                &lt;%= image_tag \"#\", class: 'card-thumbnail' %&gt;\n                &lt;p class = \"card-txt\"&gt;&lt;%= bookmk.bookmktitle%&gt;&lt;/p&gt;\n              &lt;/li&gt;\n            &lt;%end%&gt;\n          &lt;/ul&gt;\n      &lt;/div&gt;\n &lt;%end%&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>and this is extracted sources from <code>bookmkfolders_controller</code>.</p>\n\n<pre><code>def index\n @bookmkfolders = Bookmkfolder.all\n @bookmkfolders = Bookmkfolder.order(\"sequence\")\n @bookmkfolder = Bookmkfolder.new\n @bookmks = Bookmk.all\n @bookmk = Bookmk.new\nend\n\ndef newfolder\n\n #  redirect_to '/bookmkfolder/createfolder'\nend\n\ndef createfolder\n colors = ['#c9ddff', '#c9ffdd', '#ffd2c9', '#c9caff', '#fdc9ff', '#fffdc9', \n '#c9fffc', '#ffc9c9', '#ffe5c9', '#eaffc9']\n  puts Bookmkfolder.methods\n  @bookmkfolder = Bookmkfolder.new(bookmkfolder_params)\n  @bookmkfolder.user = current_user\n  @bookmkfolder.sequence = Bookmkfolder.count + 1\n  @bookmkfolder.bookmkfoldercolor = colors.at(rand(colors.size))\n\n  respond_to do |format|\n    if @bookmkfolder.save\n      format.html { redirect_to @bookmkfolder, notice: 'Bookmkfolder was \nsuccessfully created.' }\n      format.js {}\n      format.json { render :show, status: :created, location: @bookmkfolder }\n\n    else\n      format.html { render :new }\n      format.json { render json: @bookmkfolder.errors, status: \n   :unprocessable_entity }\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "networking", "heroku", "dns"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502813709, "post_id": 45696794, "comment_id": 78352293, "body": "Could you put in some <code>Rails.logger.debug</code> to see if <code>matches?</code> is returning true?"}, {"owner": {"reputation": 274, "user_id": 4096282, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/65cfe8a3cacf01503600da57004f9f86?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Mou", "link": "https://stackoverflow.com/users/4096282/kai-mou"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502816648, "post_id": 45696794, "comment_id": 78354045, "body": "Would be kind of difficult as it is currently pointed to the production server. Any easy way to do this with ngrok?"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1502859582, "post_id": 45696794, "comment_id": 78368883, "body": "with rails and heroku I just run <code>heroku run rails c</code> in the terminal"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502879250, "post_id": 45696794, "comment_id": 78380057, "body": "You might be able to change <code>&#47;etc&#47;hosts</code> to point the production domains to localhost. Be sure to remember to change it back afterwards :)"}], "owner": {"reputation": 274, "user_id": 4096282, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/65cfe8a3cacf01503600da57004f9f86?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Mou", "link": "https://stackoverflow.com/users/4096282/kai-mou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502812994, "creation_date": 1502812994, "question_id": 45696794, "link": "https://stackoverflow.com/questions/45696794/rails-heroku-subdomain", "title": "Rails/Heroku Subdomain", "body": "<p>I'm currently trying to setup masking for one of my rails app subdomains.</p>\n\n<p>Hypothetically, my main app website is called www.cats.com</p>\n\n<p>I've got a subdomain on this main application called www.care.cats.com</p>\n\n<p>I've got another domain managed by GoDaddy called www.catscare.com</p>\n\n<p>Currently, I have it setup such that going to www.catscare.com goes to www.care.cats.com as it should. However, whenever I try to add a slug at the end of that link for example (www.catscare.com/blah), my rails application gives me a 404, whereas if I go to www.care.cats.com/blah, it gives me the correct page. I think this has something to do with my subdomain constraints in my routes.rb file.</p>\n\n<pre><code>scope \"/:slug\", module: :claims_portal, as: :claims_portal, constraints: ClaimsPortalConstraint.new do\n</code></pre>\n\n<p>My actual constraints file is here:</p>\n\n<pre><code>class ClaimsPortalConstraint\n  def matches?(request)\n    in_claims_subdomain?(request) &amp;&amp; merchant_exists?(request)\n  end\n\n  private\n\n  def in_claims_subdomain?(request)\n    request.subdomain =~ /^(claims|claims-sandbox|claims-staging|claims-regression|care|care-sandbox|care-staging|care-regression)$/\n  end\n\n  def merchant_exists?(request)\n    Company.find_by(slug: request.params[:slug]).present?\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "merge", "activeadmin"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502813890, "post_id": 45696644, "comment_id": 78352405, "body": "You could try using <code>pry-byebug</code> and putting a breakpoint with <code>binding.pry</code> to see what is actually being assigned to each var."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1502819330, "last_edit_date": 1502819330, "creation_date": 1502817926, "answer_id": 45698180, "question_id": 45696644, "link": "https://stackoverflow.com/questions/45696644/use-merge-or-deep-merge-to-update-hash-in-activerecord-model/45698180#45698180", "title": "Use merge! or deep_merge! to update hash in activerecord model", "body": "<p><a href=\"https://apidock.com/rails/Hash/reverse_merge\" rel=\"nofollow noreferrer\"><code>reverse_merge!</code></a> is the usual way to set defaults for a <code>Hash</code> in <code>rails</code>.</p>\n\n<pre><code>self[:config].reverse_merge!(default_config) \n</code></pre>\n\n<p>this is essentially equal to:</p>\n\n<pre><code>default_config.merge!(self[:config]) \n</code></pre>\n\n<p>Leaving everything in <code>self[:config]</code> untouched and just merging in the missing key value pairs from <code>default_config</code>. </p>\n\n<p>Also this ternary expression:</p>\n\n<pre><code>water ? nil : self[:config].deep_merge!(default_config) \n</code></pre>\n\n<p>is more idiomatically written as (using <code>Hash#reverse_merge!</code>) </p>\n\n<pre><code>self[:config].reverse_merge!(default_config) unless water\n</code></pre>\n\n<p>and since <code>water</code> returns a <code>boolean</code> value it is generally written as a question e.g. <code>water?</code> (like in <code>has_water?</code>) Not sure if the <code>water</code> method is used frequently but I would refactor as </p>\n\n<pre><code>def has_water?(include_parent=false)\n  utility(\"water\") == true || (include_parent &amp;&amp; parent.has_water?)\nend\n</code></pre>\n\n<p>Then call as:</p>\n\n<pre><code>self[:config].reverse_merge!(default_config) unless has_water?(true)\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 4699240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e7773344279542b5bf7957461880a151?s=128&d=identicon&r=PG&f=1", "display_name": "phizzy", "link": "https://stackoverflow.com/users/4699240/phizzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 0, "accepted_answer_id": 45698180, "answer_count": 1, "score": 0, "last_activity_date": 1502819330, "creation_date": 1502812501, "question_id": 45696644, "link": "https://stackoverflow.com/questions/45696644/use-merge-or-deep-merge-to-update-hash-in-activerecord-model", "title": "Use merge! or deep_merge! to update hash in activerecord model", "body": "<p>I have a JSON column in my model that by default is an empty hash.</p>\n\n<p>I want to check if specific keys are present and if not to merge the empty hash with a default hash with the keys. </p>\n\n<p>In my model I am checking if a utility (water, gas, or electric is present) and if not then insert this default hash:  </p>\n\n<pre><code>def default_config\n    {:config =&gt; {\"features\" =&gt; {\"utilities\" =&gt; {\"water\" =&gt; true, \"gas\" =&gt; true, \"electric\" =&gt; true}}}}\nend\n</code></pre>\n\n<p>this is how I'm checking for whether a utility key is present:</p>\n\n<pre><code>  def water \n    has_water? || parent.has_water?\n  end \n</code></pre>\n\n<p>which in turn calls these methods (all in my model):</p>\n\n<pre><code>  def utility(util)\n    self[:config].try(:fetch, \"features\", nil).try(:fetch, \"utilities\", nil).try(:fetch, \"#{util}\", nil)\n  end\n\n  def has_water?\n    utility(\"water\") == true\n  end\n</code></pre>\n\n<p>This is in order to be able to configure the JSON column whether or not the keys already present, which I'm attempting here:</p>\n\n<pre><code> def set_water(boolean) \n    new_val = cleaned_boolean(boolean)\n    water ? nil : self[:config].deep_merge!(default_config)\n    self[:config][\"features\"][\"utilities\"][\"water\"] = new_val\n  end\n</code></pre>\n\n<p>When I test this I'm getting </p>\n\n<pre><code>undefined method `[]=' for nil:NilClass\n</code></pre>\n\n<p>error when trying to set a utility value indicating that my <code>default_config</code> is not being merged into the existing empty hash.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "edited": false, "score": 0, "creation_date": 1502812441, "post_id": 45696504, "comment_id": 78351498, "body": "also your <code>#initialize</code> method is missing an <code>end</code>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5225507, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c2b36e20306d068e0900f7f5d13b03a5?s=128&d=identicon&r=PG&f=1", "display_name": "SO03112", "link": "https://stackoverflow.com/users/5225507/so03112"}, "edited": false, "score": 0, "creation_date": 1502812529, "post_id": 45696578, "comment_id": 78351573, "body": "Thanks for the suggestion. I removed self from my code, and added &#39;end&#39; to my initialize method, but it still throws the same &#39;nomethoderror&#39; for get_nums"}], "tags": [], "owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "is_accepted": false, "score": 0, "last_activity_date": 1502812305, "creation_date": 1502812305, "answer_id": 45696578, "question_id": 45696504, "link": "https://stackoverflow.com/questions/45696504/undefined-method-trying-to-match-string/45696578#45696578", "title": "undefined method trying to match string", "body": "<p>Since you have an <code>attr_accessor</code> defined for <code>hosts</code>, you don't need the <code>self.hosts</code>. You could just do:</p>\n\n<pre><code>hosts.each do |h|\n  # code here\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 5225507, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c2b36e20306d068e0900f7f5d13b03a5?s=128&d=identicon&r=PG&f=1", "display_name": "SO03112", "link": "https://stackoverflow.com/users/5225507/so03112"}, "edited": false, "score": 0, "creation_date": 1502812828, "post_id": 45696672, "comment_id": 78351765, "body": "Thanks for clearing that up. I totally missed that. Unfortunately I fixed it and am still getting &#39;undefined method&#39; &#39;nomethoderror&#39; on get_nums."}, {"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "reply_to_user": {"reputation": 169, "user_id": 5225507, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c2b36e20306d068e0900f7f5d13b03a5?s=128&d=identicon&r=PG&f=1", "display_name": "SO03112", "link": "https://stackoverflow.com/users/5225507/so03112"}, "edited": false, "score": 0, "creation_date": 1502812906, "post_id": 45696672, "comment_id": 78351811, "body": "I corrected the code. The problem is that <code>list_hostnames</code> returns an array, rather than instance of <code>Hostname</code>."}, {"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "reply_to_user": {"reputation": 169, "user_id": 5225507, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c2b36e20306d068e0900f7f5d13b03a5?s=128&d=identicon&r=PG&f=1", "display_name": "SO03112", "link": "https://stackoverflow.com/users/5225507/so03112"}, "edited": false, "score": 1, "creation_date": 1502812957, "post_id": 45696672, "comment_id": 78351848, "body": "return <code>self</code> from <code>list_hostnames</code> if you want to call <code>get_nums</code> on the object, that <code>list_hostnames</code> returns"}, {"owner": {"reputation": 169, "user_id": 5225507, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c2b36e20306d068e0900f7f5d13b03a5?s=128&d=identicon&r=PG&f=1", "display_name": "SO03112", "link": "https://stackoverflow.com/users/5225507/so03112"}, "edited": false, "score": 0, "creation_date": 1502813057, "post_id": 45696672, "comment_id": 78351909, "body": "Thank you Igor! That did it."}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 3, "last_activity_date": 1502812867, "last_edit_date": 1502812867, "creation_date": 1502812614, "answer_id": 45696672, "question_id": 45696504, "link": "https://stackoverflow.com/questions/45696504/undefined-method-trying-to-match-string/45696672#45696672", "title": "undefined method trying to match string", "body": "<p>It seems, that you've been confused by indentation and didn't correctly close the methods by <code>end</code>.</p>\n\n<p>I think that the following code is the correct version of the code you're trying to implement:</p>\n\n<pre><code>class Hostname\n  attr_accessor :hostname, :domain_controller_ip, :username, :password, :hosts\n\n  def initialize(hostname, domain_controller_ip, ad_username, ad_password)\n    @domain_controller_ip = domain_controller_ip\n    @ad_username = ad_username\n    @ad_password = ad_password\n    @hostname = hostname\n    @hosts = []\n  end\n\n  def list_hostnames\n    a = Ldap.new(@domain_controller_ip, @ad_username, @ad_password)\n    hostname = @hostname + \"*\"\n    a.ldap_con.search(:base =&gt; a.treebase, :filter =&gt; a.filter('cn', hostname)) do |entry|\n      self.hosts.push(entry.cn[0])\n    end\n    self.hosts.each do |x|\n      p x\n    end\n\n    self\n  end\n\n  def get_nums\n    self.hosts.each do |x|\n      i = x.match(/\\d+$/)\n      p i\n    end\n  end\nend\n\na = Hostname.new('prod-srv-1', '192.168.1.1', 'administrator', 'password')\nb = a.list_hostnames\nb.get_nums\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5225507, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c2b36e20306d068e0900f7f5d13b03a5?s=128&d=identicon&r=PG&f=1", "display_name": "SO03112", "link": "https://stackoverflow.com/users/5225507/so03112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 45696672, "answer_count": 2, "score": 0, "last_activity_date": 1502812867, "creation_date": 1502812099, "question_id": 45696504, "link": "https://stackoverflow.com/questions/45696504/undefined-method-trying-to-match-string", "title": "undefined method trying to match string", "body": "<p>I'm getting an 'undefined method' error on  the get_nums method below, and I can't figure out why. list_hostnames returns an array, but get_nums can't do anything with it. Could someone please point me in the right direction?</p>\n\n<pre><code>class Hostname\n  attr_accessor :hostname, :domain_controller_ip, :username, :password, :hosts\n\n  def initialize(hostname, domain_controller_ip, ad_username, ad_password)\n    @domain_controller_ip = domain_controller_ip\n    @ad_username = ad_username\n    @ad_password = ad_password\n    @hostname = hostname\n    @hosts = []\n\n  def list_hostnames\n    a = Ldap.new(@domain_controller_ip, @ad_username, @ad_password)\n    hostname = @hostname + \"*\"\n    a.ldap_con.search(:base =&gt; a.treebase, :filter =&gt; a.filter('cn', hostname)) do |entry|\n      self.hosts.push(entry.cn[0])\n    end\n    self.hosts.each do |x|\n      p x\n    end\n  end\n\n  def get_nums\n    self.hosts.each do |x|\n      i = x.match(/\\d+$/)\n      p i\n    end\nend\nend\n\na = Hostname.new('prod-srv-1', '192.168.1.1', 'administrator', 'password')\nb = a.list_hostnames\nb.get_nums\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502809753, "post_id": 45695761, "comment_id": 78349657, "body": "See the difference of <code>attr_accessor</code> (ruby level) vs <code>attr_accessible</code> (rails level) : <a href=\"https://stackoverflow.com/questions/3136420/difference-between-attr-accessor-and-attr-accessible\" title=\"difference between attr accessor and attr accessible\">stackoverflow.com/questions/3136420/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 3402565, "user_type": "registered", "profile_image": "https://graph.facebook.com/1418623240/picture?type=large", "display_name": "Mahir", "link": "https://stackoverflow.com/users/3402565/mahir"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502810065, "post_id": 45695761, "comment_id": 78349832, "body": "I get this error when i use attr_accessible  Undefined method `attr_accessible&#39; for #&lt;Class:0x0000000cd719f8&gt; Did you mean? attr_accessor"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502810191, "post_id": 45695761, "comment_id": 78349916, "body": "See first answer&#39;s comments as they explain why it is not working for Rails 4+"}], "answers": [{"tags": [], "owner": {"reputation": 382, "user_id": 4624718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153182656174208/picture?type=large", "display_name": "Josh Alexy", "link": "https://stackoverflow.com/users/4624718/josh-alexy"}, "is_accepted": false, "score": 1, "last_activity_date": 1502810000, "creation_date": 1502810000, "answer_id": 45695851, "question_id": 45695761, "link": "https://stackoverflow.com/questions/45695761/issue-with-inserting-data-into-database-via-rails-command/45695851#45695851", "title": "Issue with inserting data into database via rails command", "body": "<p>You should not be using the <code>attr_accessor</code> in your Rails class. Rails automatically make these attributes readable, and you should generally only be writing by saving records to the database.</p>\n"}], "owner": {"reputation": 31, "user_id": 3402565, "user_type": "registered", "profile_image": "https://graph.facebook.com/1418623240/picture?type=large", "display_name": "Mahir", "link": "https://stackoverflow.com/users/3402565/mahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1502810000, "creation_date": 1502809635, "question_id": 45695761, "link": "https://stackoverflow.com/questions/45695761/issue-with-inserting-data-into-database-via-rails-command", "title": "Issue with inserting data into database via rails command", "body": "<p>I have an issue with inserting data via rails command. Bellow you can see my model and the issue. The title is displaying nil even tho I created a new instance of Post with the title hash. I am aware you can do this in a different way. I am using this simple example to figure out why can't I insert or display data from the database.</p>\n\n<h1>Model</h1>\n\n<p>category.rb</p>\n\n<pre><code>class Category &lt; ApplicationRecord\n  attr_accessor :name\n  has_many :posts\nend\n</code></pre>\n\n<p>post.rb</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  attr_accessor :title, :body, :category_id, :author_id\n  belongs_to :category\nend\n</code></pre>\n\n<h1>Rails c</h1>\n\n<pre><code>post = Post.new(:title =&gt; 'Test')\n=&gt; #&lt;Post id: nil, title: nil, body: nil, category_id: nil, author_id: nil, created_at: nil, updated_at: nil&gt; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "edited": false, "score": 0, "creation_date": 1502810256, "post_id": 45695764, "comment_id": 78349967, "body": "As for the moving of this logic elsewhere, in this case I recommend moving it to one of your models. A <code>Team</code> model if you have one, otherwise your <code>User</code> model. So you would have a method <code>User.team_users_details</code> that returns a hash, then the controller would call that and pass it to the view as <code>@team_users_details</code>, then the view would display <code>The app has &lt;%= @team_users_details[:users_count] %&gt; \u2026</code>."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "edited": false, "score": 2, "creation_date": 1502810496, "post_id": 45695764, "comment_id": 78350126, "body": "@RoryO&#39;Kane I do not recommend to move this to the model. The model is responsible to handle the business logic, neither statistic logic nor display logic should be defined in the model. This is why you end up with fat models, skinny controllers and logic-heavy views. The decorator/presenter pattern would be great here, but if you don&#39;t want to setup this pattern, a simple Helper method should be enough."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1502810521, "post_id": 45695764, "comment_id": 78350149, "body": "I moved it to the controller for now, it works that way. Is it better  to move it to the model or should I keep it in the controller?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502810567, "post_id": 45695764, "comment_id": 78350179, "body": "I recommend you to move this in a helper. With this helper you will be able to call these methods anywhere in any of your views. If you are using the decorator/presenter pattern, use this instead of the helper."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1502810971, "post_id": 45695764, "comment_id": 78350462, "body": "@Slowboy also, is your app meant to be translated in other language(s) in the future? If this is an eventuality, I strongly recommend you to start using internationalization with I18n as soon as possible. It would be a real pain to have to translate a lot of hard-coded strings from all of your app&#39;s code."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1502811110, "post_id": 45695764, "comment_id": 78350550, "body": "Yes, that is the plan, I&#39;ve to take a look at the I18n documentation soon, thanks for the heads up @MrYoshiji"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 2, "last_activity_date": 1502809649, "creation_date": 1502809649, "answer_id": 45695764, "question_id": 45695644, "link": "https://stackoverflow.com/questions/45695644/adding-values-together-from-loop/45695764#45695764", "title": "Adding values together from loop", "body": "<p>This is a way to do it, but I strongly recommend you to move this count logic somewhere else than your view(s)</p>\n\n<pre><code>&lt;% teams_count = 0 %&gt;\n&lt;% users_count = 0 %&gt;\n&lt;% team_users_details = [] %&gt;\n&lt;% User.group(:team).count.each do |team, count| %&gt;\n  &lt;% team_users_details &lt;&lt; \"The '#{team}' has '#{count} User'\" %&gt;\n  &lt;% teams_count += 1 %&gt;\n  &lt;% users_count += count %&gt;\n&lt;% end %&gt;\n\n&lt;%= \"The app has '#{users_count}' users supporting '#{teams_count}' different teams\" %&gt;\n&lt;%= team_users_details.join(' ') %&gt;\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 45695764, "answer_count": 1, "score": 0, "last_activity_date": 1502811237, "creation_date": 1502809317, "last_edit_date": 1502811237, "question_id": 45695644, "link": "https://stackoverflow.com/questions/45695644/adding-values-together-from-loop", "title": "Adding values together from loop", "body": "<p>I have this <code>each</code> loop:</p>\n\n<pre><code>&lt;% User.group(:team).count.each do |team, count| %&gt;\n  &lt;%= \"The '#{team}' has '#{count} User'\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The output is like this:</p>\n\n<pre><code>The 'Vikings' has '1 User' The  \n'Redsocks' has '3 User' The 'Giants' has '1 User' The \n'Milan' has '2 User' The 'IKS' has '1 User' The 'Clampers' has '1 User'\n</code></pre>\n\n<p>I want <code>count</code> to be added together, and <code>team</code> to be added together. I want the output be something like:</p>\n\n<pre><code>the app has \" 9 \" users supporting \"6 \" different teams\n</code></pre>\n\n<p>Can someone advise me on how to do that?</p>\n"}, {"tags": ["ruby", "sequel", "sequel-gem"], "answers": [{"tags": [], "owner": {"reputation": 7568, "user_id": 492969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936bf1ffa62366b2c107de33361cc41?s=128&d=identicon&r=PG", "display_name": "three", "link": "https://stackoverflow.com/users/492969/three"}, "is_accepted": false, "score": 0, "last_activity_date": 1507960630, "creation_date": 1507960630, "answer_id": 46741407, "question_id": 45695182, "link": "https://stackoverflow.com/questions/45695182/sequel-gem-copy-database-to-another-with-username-and-password/46741407#46741407", "title": "Sequel gem copy database to another with username and password", "body": "<p>The usernames and passwords are stored in the user database. You first need to setup a user on your target database. Before that you can't copy anything to it. Copying the user database from mysql to postgres is not going to work either imho so you will have to setup your user manually first.</p>\n"}], "owner": {"reputation": 1770, "user_id": 697816, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/g2TUV.jpg?s=128&g=1", "display_name": "Maged Makled", "link": "https://stackoverflow.com/users/697816/maged-makled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581279418, "creation_date": 1502807922, "last_edit_date": 1581279418, "question_id": 45695182, "link": "https://stackoverflow.com/questions/45695182/sequel-gem-copy-database-to-another-with-username-and-password", "title": "Sequel gem copy database to another with username and password", "body": "<p>From the <a href=\"https://github.com/jeremyevans/sequel/blob/master/doc/bin_sequel.rdoc#copy-databases\" rel=\"nofollow noreferrer\">section</a> to copy another use is to use </p>\n\n<pre><code>sequel -C mysql://host1/database postgres://host2/database2\n</code></pre>\n\n<p>Is there a way to include username and password for both databases. \n    Tried with no luck</p>\n\n<pre><code>sequel -C mysql://user:password@host1/database postgres://user2:password2@host2/database2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502807938, "post_id": 45695101, "comment_id": 78348379, "body": "What do you mean to <b>optionally</b> append values?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502807955, "post_id": 45695101, "comment_id": 78348392, "body": "What error do you get?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1502807997, "post_id": 45695101, "comment_id": 78348425, "body": "I don&#39;t see an array anywhere in your code. <code>myObject</code> is a <a href=\"https://ruby-doc.org/core-2.4.1/Hash.html\" rel=\"nofollow noreferrer\">Hash</a>."}, {"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502808050, "post_id": 45695101, "comment_id": 78348459, "body": "@sawa by optionally, I mean only if that if statement is true in my controller, do I want to add the two extra fields."}, {"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 0, "creation_date": 1502808091, "post_id": 45695101, "comment_id": 78348483, "body": "Just added the error message"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502808166, "post_id": 45695101, "comment_id": 78348543, "body": "@AnApprentice use <code>myObject.merge(your_hash)</code> because <code>&lt;&lt;</code> is not a <code>Hash</code> method (use <code>merge!</code> to modify the same hash and not return a new one)"}], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 4, "last_activity_date": 1502808133, "creation_date": 1502808133, "answer_id": 45695270, "question_id": 45695101, "link": "https://stackoverflow.com/questions/45695101/how-to-append-items-to-an-array/45695270#45695270", "title": "How to append items to an array", "body": "<p><code>myObject</code> is a <em>hash</em>, so to add new items you can do this:</p>\n\n<pre><code>if current_user &amp;&amp; current_user.id == user.id\n  myObject[:notification_email] = user.notification_email\n  myObject[:notification_email2] = user.notification_email2\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 0, "creation_date": 1502808183, "post_id": 45695272, "comment_id": 78348560, "body": "thanks but that did not add the values... it had no effect"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 0, "creation_date": 1502808255, "post_id": 45695272, "comment_id": 78348624, "body": "I added that part."}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "reply_to_user": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 1, "creation_date": 1502808303, "post_id": 45695272, "comment_id": 78348651, "body": "@AnApprentice It does not modify the original object, but produced a copy of it with the new elements added. use the bang <code>!</code> version to modify the original object in place"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "reply_to_user": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 2, "creation_date": 1502808390, "post_id": 45695272, "comment_id": 78348710, "body": "@AnApprentice but if you&#39;re adding these elements to a params hash, you might want to leave the original params hash unchanged. you can pass the whole expression as an argument to another method e.g. <code>Object.create(object_params.merge(new_key: &#39;new_value&#39;))</code>"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 7, "last_activity_date": 1502808240, "last_edit_date": 1502808240, "creation_date": 1502808139, "answer_id": 45695272, "question_id": 45695101, "link": "https://stackoverflow.com/questions/45695101/how-to-append-items-to-an-array/45695272#45695272", "title": "How to append items to an array", "body": "<p>Perhaps you want <code>Hash#merge</code>.</p>\n\n<pre><code>myObject.merge(\n  notification_email: user.notification_email,\n  notification_email2: user.notification_email2\n)\n</code></pre>\n\n<p>If you want side effects, use the banged version.</p>\n\n<pre><code>myObject.merge!(\n  notification_email: user.notification_email,\n  notification_email2: user.notification_email2\n)\n</code></pre>\n"}], "owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 45695272, "answer_count": 2, "score": 1, "last_activity_date": 1502808240, "creation_date": 1502807656, "last_edit_date": 1502808086, "question_id": 45695101, "link": "https://stackoverflow.com/questions/45695101/how-to-append-items-to-an-array", "title": "How to append items to an array", "body": "<p>I have the following:</p>\n\n<pre><code>myObject = {\n  id: user.id,\n  email: user.email,\n}\n</code></pre>\n\n<p>I need to add values like so:</p>\n\n<pre><code>if current_user &amp;&amp; current_user.id == user.id\n  myObject &lt;&lt; {\n    notification_email: user.notification_email,\n    notification_email2: user.notification_email2\n  }\nend\n</code></pre>\n\n<p>The code above raises an error.</p>\n\n<p>What's the right way to optionally append values to the object?</p>\n\n<p><strong>ERROR</strong></p>\n\n<p>undefined method `&lt;&lt;' for # Did you mean? &lt;</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1502806802, "post_id": 45694576, "comment_id": 78347620, "body": "The file loaded there is <code>Library&#47;Homebrew&#47;tap.rb</code>. <code>Library&#47;Homebrew&#47;cmd&#47;tap.rb</code> contains the code that handles the <code>brew tap</code> command. It is explicitly loaded in <a href=\"https://github.com/Homebrew/brew/blob/8518ffdee19c0c985e8631e836b78624e4926c7f/Library/Homebrew/brew.rb#L61\" rel=\"nofollow noreferrer\">line 61</a> when <code>tap</code> is the Homebrew command provided in the command line (<code>brew tap ...</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 2267, "user_id": 2143275, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eMJGg.png?s=128&g=1", "display_name": "Richie Thomas", "link": "https://stackoverflow.com/users/2143275/richie-thomas"}, "is_accepted": true, "score": 0, "last_activity_date": 1502807943, "last_edit_date": 1502807943, "creation_date": 1502806363, "answer_id": 45694665, "question_id": 45694576, "link": "https://stackoverflow.com/questions/45694576/how-can-i-tell-which-file-is-being-required-here/45694665#45694665", "title": "How can I tell which file is being required here?", "body": "<p>I found this great explanation of how <code>require</code> works in Ruby:</p>\n\n<p><a href=\"https://github.com/ericmathison/articles/blob/master/understaning-require-in-ruby.md\" rel=\"nofollow noreferrer\">https://github.com/ericmathison/articles/blob/master/understaning-require-in-ruby.md</a></p>\n\n<p>Essentially, it works by looking at the Ruby <code>$LOAD_PATH</code> method, similar to how UNIX uses the $PATH variable to look for binary executables when it receives a command in the CLI.  I was able to test this out on my local by making two files in the same directory, like so:</p>\n\n<pre><code># file number 1- foobar.rb \n\nmodule Foobar\n  module_function\n\n  def bar\n    p \"foo\" \n  end\n\nend\n\n# file number 2- foobaz.rb\n\n$LOAD_PATH.unshift(\".\")\n\nclass Foobaz\n\n  def baz\n    require 'foobar'\n    p Foobar.bar\n  end\n\nend\n\nFoobaz.new.baz\n</code></pre>\n\n<p>Without the line <code>$LOAD_PATH.unshift(\".\")</code> in foobaz.rb, the code wouldn't execute with the simple <code>require 'foobar'</code> statement.  I instead had to use <code>require_relative 'foobar.rb'</code>.  But adding the current working directory to the $LOAD_PATH environment variable meant that I now had access to all the ruby files in the current dir, so it executed!</p>\n\n<p>NB- it's likely that adding <code>.</code> to the <code>$LOAD_PATH</code> should go in a config file somewhere, not in the same file as the <code>require</code> statement.</p>\n"}, {"tags": [], "owner": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "is_accepted": false, "score": 0, "last_activity_date": 1502806457, "creation_date": 1502806457, "answer_id": 45694694, "question_id": 45694576, "link": "https://stackoverflow.com/questions/45694576/how-can-i-tell-which-file-is-being-required-here/45694694#45694694", "title": "How can I tell which file is being required here?", "body": "<p>If you put a <code>binding.pry</code> before the <code>require</code> and execute <code>$:</code> that will be the list of directories in which the require will look up the 'tap.rb' files.</p>\n\n<p>See definition of require:\n<code>If the filename does not resolve to an absolute path, it will be searched for in the directories listed in $:.</code></p>\n"}], "owner": {"reputation": 2267, "user_id": 2143275, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eMJGg.png?s=128&g=1", "display_name": "Richie Thomas", "link": "https://stackoverflow.com/users/2143275/richie-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "closed_date": 1502806474, "accepted_answer_id": 45694665, "answer_count": 2, "score": 0, "last_activity_date": 1502807943, "creation_date": 1502806035, "last_edit_date": 1502806481, "question_id": 45694576, "link": "https://stackoverflow.com/questions/45694576/how-can-i-tell-which-file-is-being-required-here", "closed_reason": "Duplicate", "title": "How can I tell which file is being required here?", "body": "<p>I'm reading through the codebase of the Homebrew repo, specifically the file here:</p>\n\n<p><a href=\"https://github.com/Homebrew/brew/blob/8518ffdee19c0c985e8631e836b78624e4926c7f/Library/Homebrew/brew.rb\" rel=\"nofollow noreferrer\">https://github.com/Homebrew/brew/blob/8518ffdee19c0c985e8631e836b78624e4926c7f/Library/Homebrew/brew.rb</a></p>\n\n<p>I see many 'require' statements scattered throughout the file, for instance on line 104 (<code>require 'tap'</code>).  The problem is that I see 3 files named <code>tap.rb</code> in the codebase:</p>\n\n<p><code>Library/Homebrew/tap.rb</code>\n<code>Library/Homebrew/cmd/tap.rb</code>\n<code>Library/Homebrew/compat/tap.rb</code></p>\n\n<p>Further down in the code I see <code>Tap.fetch...</code>, and in <code>Library/Homebrew/tap.rb</code> which contains a class named <code>Tap</code> with a class method named <code>fetch</code>, so I'm confident this is the correct file that's being included.  But conceivably, there could be dozens of files with the same filename, and more than one of those could have identical class methods.  My question is, is there a way to tell which Tap class is being loaded without looking through each of the files?</p>\n\n<p>UPDATE: I think I have the answer to my question (see below).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-2.3"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502825058, "post_id": 45694323, "comment_id": 78358429, "body": "Have you tried <code>DateTime.now</code> instead? <code>Date.today</code> will never have time because it is simply a <code>Date</code>. Also any reason you are updating <code>ruby</code> but leaving <code>rails</code> at <code>3.0</code>  (circa 2010)?"}, {"owner": {"reputation": 1, "user_id": 3516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da5747e650908da3ffb793f881a0fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user3516436", "link": "https://stackoverflow.com/users/3516436/user3516436"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502889204, "post_id": 45694323, "comment_id": 78387226, "body": "@engineersmnky, thanks for replying. Upgrading rails from <code>3.0</code> to <code>4</code> would be alot of refactoring, I am being optimistic that only upgrading ruby to <code>2</code> would work."}, {"owner": {"reputation": 1, "user_id": 3516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da5747e650908da3ffb793f881a0fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user3516436", "link": "https://stackoverflow.com/users/3516436/user3516436"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502891087, "post_id": 45694323, "comment_id": 78388627, "body": "I found the issue, the <code>define_method_attribute</code> under <code>time_zone_conversion.rb</code> is a protected method, and in ruby 2, the <code>respond_to</code> function always returns false for protected methods. Had to monkey patch to remove the protected attribute."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da5747e650908da3ffb793f881a0fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user3516436", "link": "https://stackoverflow.com/users/3516436/user3516436"}, "is_accepted": false, "score": 0, "last_activity_date": 1502891128, "creation_date": 1502891128, "answer_id": 45715327, "question_id": 45694323, "link": "https://stackoverflow.com/questions/45694323/upgrading-ruby-to-2-3-4-with-rails-3-0-5/45715327#45715327", "title": "Upgrading ruby to 2.3.4 with rails 3.0.5", "body": "<p>I found the issue, the <code>define_method_attribute</code> under <code>time_zone_conversion.rb</code> is a protected method, and in ruby 2, the respond_to function always returns false for protected methods. Had to monkey patch to remove the protected attribute.</p>\n"}], "owner": {"reputation": 1, "user_id": 3516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1da5747e650908da3ffb793f881a0fb5?s=128&d=identicon&r=PG&f=1", "display_name": "user3516436", "link": "https://stackoverflow.com/users/3516436/user3516436"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502891128, "creation_date": 1502805142, "last_edit_date": 1502810102, "question_id": 45694323, "link": "https://stackoverflow.com/questions/45694323/upgrading-ruby-to-2-3-4-with-rails-3-0-5", "title": "Upgrading ruby to 2.3.4 with rails 3.0.5", "body": "<p>I am trying to upgrade my rails 3.0.5 application with ruby 2.3.4. Originally it was ruby 1.9.3. I was able to fix most things by updating the gems. However, i m stuck on this one problem where when creating new active record objects, the time does not convert properly. </p>\n\n<p>For example</p>\n\n<p><code>Product.new(:bought_on =&gt; Date.today)</code> will save the object with <code>bought_on</code> to be the date, not datetime.</p>\n\n<p>I was able to narrow down the problem to the file </p>\n\n<blockquote>\n  <p>activerecord-3.0.20/lib/active_record/attribute_methods/time_zone_conversion.rb</p>\n</blockquote>\n\n<p>For some reason its not calling these two functions, <code>define_method_attribute</code> and <code>define_method_attribute=</code>.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "constants"], "answers": [{"tags": [], "owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "is_accepted": false, "score": 0, "last_activity_date": 1502821089, "creation_date": 1502821089, "answer_id": 45699009, "question_id": 45694175, "link": "https://stackoverflow.com/questions/45694175/const-missing-hook-isnt-fired/45699009#45699009", "title": "Const_missing hook isn&#39;t fired", "body": "<p>Your example is not minimal and does not run. If I try the following it works without any problem. I think your problem is related to something else.</p>\n\n<pre><code>class Object\n\n  def self.inherited(base)\n    base.extend(Class_Methods)\n    super\n  end\n\n  def self.const_missing_impl(const, location)\n    puts \"loading(in #{location}) %s\" % const.to_s\n    path = const.to_s.split('::').compact.map(&amp;:downcase).join('/') \n    puts \"require #{path}\"\n  end\n\n  def const_missing(const)\n    Object.const_missing_impl(const, 'Object')\n  end\n\n  class &lt;&lt; self\n    def const_missing(const)\n      Object.const_missing_impl(const, 'Object class &lt;&lt; self')\n    end\n  end\n\n  module Class_Methods\n    def const_missing(const)\n      Object.const_missing_impl(const, 'Class_Methods')\n    end\n\n    class &lt;&lt; self\n      def const_missing(const)\n        Object.const_missing_impl(const, 'Class_Methods class &lt;&lt; self')\n      end\n    end\n  end\n\n  extend Class_Methods\nend\n\na = CONST1\nb = a::CONST2\nc = String::CONST3\nd = Class_Methods::CONST4\n\n# Prints\nloading(in Object class &lt;&lt; self) CONST1\nrequire const1\nloading(in Object class &lt;&lt; self) CONST2\nrequire const2\nloading(in Object class &lt;&lt; self) CONST3\nrequire const3\nloading(in Class_Methods class &lt;&lt; self) CONST4\nrequire const4\n</code></pre>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502821089, "creation_date": 1502804743, "last_edit_date": 1502807589, "question_id": 45694175, "link": "https://stackoverflow.com/questions/45694175/const-missing-hook-isnt-fired", "title": "Const_missing hook isn&#39;t fired", "body": "<p>I money patched <code>const_missing</code> methods into <code>Object</code> and in difference contexts:</p>\n\n<p>auto_loader.rb</p>\n\n<pre><code>%w{../../lib ../../app}.each do |path|\n  expanded_path = File.expand_path(path,__FILE__)\n  $LOAD_PATH.unshift(expanded_path) unless $LOAD_PATH.include?(expanded_path)\nend\nclass Object\ndef self.inherited(base)\n    base.extend(Class_Methods)\n    super\n  end\n\n  def const_missing(const)\n    puts \"loading(in Object) %s\" % const.to_s\n    path = const.to_s.split('::').compact.map(&amp;:downcase).join('/') \n    require path\n    self.const_get(const)\n  end\n  class &lt;&lt; self\n    def const_missing(const)\n      puts \"loading(in Object class &lt;&lt; self) %s\" % const.to_s\n      path = const.to_s.split('::').compact.map(&amp;:downcase).join('/') \n      require path\n      self.const_get(const)\n    end\n  end\n  module Class_Methods\n    class &lt;&lt; self\n      def const_missing(const)\n        puts \"loading(in Class_Methods class &lt;&lt; self) %s\" % const.to_s\n        path = const.to_s.split('::').compact.map(&amp;:downcase).join('/') \n        require path\n        self.const_get(const)\n      end\n    end\n\n\n\n    def const_missing(const)\n      puts \"loading(in Class_Methods) %s\" % const.to_s\n      path = const.to_s.split('::').compact.map(&amp;:downcase).join('/') \n      require path\n      self.const_get(const)\n    end\n\n  end\n\n  extend Class_Methods\nend\n</code></pre>\n\n<p>When I run the code, I see:</p>\n\n<pre><code>NameError: Uninitialized constant CONST\n</code></pre>\n\n<p>without any of the <code>puts</code> displayed.</p>\n\n<p>I also load the code with:</p>\n\n<pre><code>pry -r ./lib/auto_loader.rb\n</code></pre>\n\n<p>The result is the same.</p>\n\n<p>On the other hand, if I manually fire the <code>const_missing</code> method, I see <code>loading(in Object) const</code>.</p>\n\n<p>Why is <code>const_missing</code> hook not fired?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "capybara"], "comments": [{"owner": {"reputation": 570, "user_id": 2048680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-ZNA8X0AjzPk/AAAAAAAAAAI/AAAAAAAAABg/H5jHKT7CRdk/photo.jpg?sz=128", "display_name": "Conor", "link": "https://stackoverflow.com/users/2048680/conor"}, "edited": false, "score": 0, "creation_date": 1502803962, "post_id": 45693579, "comment_id": 78345724, "body": "Please provide us snippets of where you think the issue can be &amp; what you have tried to fix."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1502806931, "post_id": 45693579, "comment_id": 78347698, "body": "See: <a href=\"https://meta.stackoverflow.com/questions/253069/whats-the-appropriate-new-current-close-reason-for-how-do-i-do-x\">How do I do X?</a> The expectation on SO is that the user asking a question not only does research to answer their own question but also shares that research, code attempts, and results. This demonstrates that you\u2019ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! See also: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1502828094, "creation_date": 1502828094, "answer_id": 45700829, "question_id": 45693579, "link": "https://stackoverflow.com/questions/45693579/infinite-ads-load-stops-ruby-script/45700829#45700829", "title": "Infinite ads load stops Ruby script", "body": "<p>To block specific browser requests, when using Firefox through selenium with Capybara, you will need a programmable proxy.  One option for this is <a href=\"https://github.com/oesmith/puffing-billy\" rel=\"nofollow noreferrer\">puffing-billy</a></p>\n"}], "owner": {"reputation": 35, "user_id": 8249222, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce2df3e705f6b1012461c9bbf91e9242?s=128&d=identicon&r=PG&f=1", "display_name": "bordus", "link": "https://stackoverflow.com/users/8249222/bordus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1502828094, "creation_date": 1502802730, "last_edit_date": 1502803273, "question_id": 45693579, "link": "https://stackoverflow.com/questions/45693579/infinite-ads-load-stops-ruby-script", "title": "Infinite ads load stops Ruby script", "body": "<p>I am trying to make a simple script using ruby/capybara (with firefox).\nIt opens a site that has some kind of ads with bugs (loading infinitely) and the script stops.\nHow can I stop this loading?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1502802479, "post_id": 45693212, "comment_id": 78344803, "body": "Find and follow the migration guides. Upgrade sequentially (rails 2 -&gt; 3 -&gt; 4 -&gt; 5, not 2 -&gt; 5)."}], "answers": [{"tags": [], "owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "is_accepted": true, "score": 1, "last_activity_date": 1502810065, "creation_date": 1502810065, "answer_id": 45695875, "question_id": 45693212, "link": "https://stackoverflow.com/questions/45693212/any-recommendation-for-a-former-rails-2-3-users-to-migrate-to-rails-5-x/45695875#45695875", "title": "Any recommendation for a former Rails 2.3 users to migrate to Rails 5.x?", "body": "<p>Be aware that this is a multi-step process and can take a long time. Make sure to test for bugs after accomplishing each step since they'll definitely appear.</p>\n\n<ul>\n<li>The first step is migrating from <a href=\"https://medium.com/airbnb-engineering/upgrading-airbnb-from-rails-2-3-to-rails-3-0-269b5b0f2ad0\" rel=\"nofollow noreferrer\">Rails 2.3 to Rails 3.0</a>.</li>\n<li>Second you want to upgrade to <a href=\"https://web.archive.org/web/20150915222435/https://eng.uservoice.com/blog/2012/03/04/how-to-upgrade-a-rails-2.3-app-to-ruby-1.9.3/\" rel=\"nofollow noreferrer\">Ruby 1.9.3</a>.</li>\n<li><p>Pushing from Rails 3.0 to Rails 5.x is covered by RailsGuides which has <a href=\"http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html\" rel=\"nofollow noreferrer\">excellent documentation</a>. You'll notice there are a number of interim steps:</p>\n\n<ol>\n<li>Rails 3.0 -> Rails 3.1</li>\n<li>Rails 3.1 -> Rails 3.2</li>\n<li>Rails 3.2 -> Rails 4.0</li>\n<li>Rails 4.0 -> Rails 4.1</li>\n<li>Rails 4.1 -> Rails 4.2</li>\n<li>Rails 4.2 -> Rails 5.0</li>\n<li>Rails 5.0 -> Rails 5.1</li>\n</ol></li>\n</ul>\n\n<p>I would strongly suggest adding unit tests to core features if you don't have them. It helps finding issues significantly easier as you progress.</p>\n"}], "owner": {"reputation": 1411, "user_id": 642013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bae08553668f3b35783e6ed6e3ee79b?s=128&d=identicon&r=PG", "display_name": "jiggysoo", "link": "https://stackoverflow.com/users/642013/jiggysoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1502810739, "accepted_answer_id": 45695875, "answer_count": 1, "score": -5, "last_activity_date": 1502810065, "creation_date": 1502801447, "question_id": 45693212, "link": "https://stackoverflow.com/questions/45693212/any-recommendation-for-a-former-rails-2-3-users-to-migrate-to-rails-5-x", "closed_reason": "Duplicate", "title": "Any recommendation for a former Rails 2.3 users to migrate to Rails 5.x?", "body": "<p>I used to program using Rails 2.3.x heavily, but it has been a while since I coded. I took a managerial position of a big company, and I don't have enough time to play with my old code. Recently, I realized that I need to hone my skill and would like to start with my old web services and start from there.</p>\n\n<p>Any recommendation for me how to get started?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1502819767, "post_id": 45693111, "comment_id": 78355687, "body": "&quot;What&#39;s preventing <code>Integer</code> class from being instantiated with <code>new</code> method?&quot; \u2013 Is there something unclear about the error message? The reason why <code>Integer.new</code> doesn&#39;t work is that there <i>is no</i> <code>Integer.new</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502809832, "post_id": 45693170, "comment_id": 78349703, "body": "<code>Numeric</code> is not an immediate and can be instantiated (<code>Numeric.new</code>) and sub-classed given the following criteria. The inherited class <b>must</b> define <code>#coerce</code> and should implement object specific versions of arithmetic operators e.g. <code>+</code>,<code>-</code>,<code>*</code>, etc. <code>Integer</code> and <code>Float</code> subclass <code>Numeric</code> but cannot be instantiated they handle this by simply un-defining &quot;instantiation&quot; (<code>#new</code>) as well as the allocation function but this is specific to those classes and not <code>Numeric</code>s as a whole. <a href=\"https://github.com/ruby/ruby/blob/trunk/numeric.c#L5265\" rel=\"nofollow noreferrer\">Source Reference</a>"}], "tags": [], "owner": {"reputation": 1329, "user_id": 4341902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GA0Ju.jpg?s=128&g=1", "display_name": "Billy Ferguson", "link": "https://stackoverflow.com/users/4341902/billy-ferguson"}, "is_accepted": false, "score": 3, "last_activity_date": 1502810008, "last_edit_date": 1502810008, "creation_date": 1502801320, "answer_id": 45693170, "question_id": 45693111, "link": "https://stackoverflow.com/questions/45693111/why-cant-i-instantiate-integer-class-in-ruby/45693170#45693170", "title": "Why can&#39;t I instantiate Integer class in Ruby?", "body": "<p>You can't allocate heap objects of an Integer in Ruby. In Ruby Integers are immediates which means you cannot have an instantiated version of the object. Since you can\u2019t allocate them, you can\u2019t create a subclass and allocate instances of the subclass.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1502806365, "post_id": 45693518, "comment_id": 78347313, "body": "Technically they are actual (no quotes) ruby objects (<code>rb_cInteger</code>) ruby just does not create &quot;new&quot; ones. <code>Numeric</code> as the parental class is an actual ruby object and can be instantiated. <code>Float</code>, <code>Integer</code>, etc. simply undefine <code>#new</code> so that they can be immediates (immutable and always passed by value). But this is a fairly concise answer for a fairly complex subject."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 11, "last_activity_date": 1502803836, "last_edit_date": 1502803836, "creation_date": 1502802539, "answer_id": 45693518, "question_id": 45693111, "link": "https://stackoverflow.com/questions/45693111/why-cant-i-instantiate-integer-class-in-ruby/45693518#45693518", "title": "Why can&#39;t I instantiate Integer class in Ruby?", "body": "<p>There are a few of those. Besides <code>Integer</code>, <code>Float</code>, and <code>Symbol</code>, you can't create a new instance of <code>TrueClass</code>, <code>FalseClass</code> and <code>NilClass</code> too. </p>\n\n<p>These classes (and their respective instances) are all special in Ruby and are handled in a specific way internally.</p>\n\n<p>With small Integers for example, Ruby implicitly handles those. Instead of creating a new \"actual\" Ruby object for each integer number (which would be hugely wasteful), Ruby stores those as only their numeric value represented by the object_id. Thus, what you observe in Ruby as an instance of the Integer class is actually a single value im memory (more or less). To be able to pull this off, Ruby reserves all odd <code>object_id</code>s for integer values. Thus, the number <code>1</code> has the <code>object_id</code> of <code>3</code>, the number <code>2</code> has the <code>object_id</code> of <code>5</code> and so on...</p>\n\n<p>Due to this special handling by the Ruby language itself, you can't create a new Integer instance. Now given that Integers themselves are always immutable (that is, they can't be changed) they are only defined by their numeric value in the first place.</p>\n\n<p>(Note that this only works for small integers. For larger integers, depending on whether you are running on a 32 bit or 64 bit architecture, Ruby will still internally create real objects if the integer number can't fit into the scheme described above. This is however handled internally by Ruby and is basically an implementation detail of the language itself.)</p>\n"}], "owner": {"reputation": 9259, "user_id": 1815412, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/13eb7cacf20e7789e9ebd5e814c42cb5?s=128&d=identicon&r=PG", "display_name": "Maximus S", "link": "https://stackoverflow.com/users/1815412/maximus-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 0, "accepted_answer_id": 45693518, "answer_count": 2, "score": 6, "last_activity_date": 1502810008, "creation_date": 1502801101, "last_edit_date": 1502803003, "question_id": 45693111, "link": "https://stackoverflow.com/questions/45693111/why-cant-i-instantiate-integer-class-in-ruby", "title": "Why can&#39;t I instantiate Integer class in Ruby?", "body": "<p>I thought all classes in Ruby can be instantiated. What's preventing <code>Integer</code> class from being instantiated with <code>new</code> method?</p>\n\n<pre><code>Integer.new\n# =&gt; NoMethodError: undefined method `new' for Integer:Class\n</code></pre>\n"}, {"tags": ["ruby", "regex", "middleman"], "comments": [{"owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1502822974, "post_id": 45692859, "comment_id": 78357370, "body": "Is there a reason you can&#39;t just ensure that HAML generates the final HTML you&#39;re looking for? What you are doing is definitely unconventional, and you may be making it more complicated than it needs to be. But I also know your actual code is much more complex than this."}, {"owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "reply_to_user": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1502871880, "post_id": 45692859, "comment_id": 78375065, "body": "The main issue here is that I have over 100 uses of <code>:markdown</code> HAML filter, which is used to process block markdown (multiple paragraphs), 20% of which include <code>ref.pageA</code> references. I have been able to change my partials, so now they are processed by your code from the other question, but those <code>:markdown</code> HAML filters still have some links that need to be evaluated. I don&#39;t want to change all HAML filters to <code>mymarkdown()</code> helper because it would destroy readability and helper doesn&#39;t seem to be able to accept block input (multiple paragraphs) anyway."}, {"owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "reply_to_user": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1502872144, "post_id": 45692859, "comment_id": 78375235, "body": "If running the code on the whole page is not possible, then my only solution would be to move all those blocks under <code>:markdown</code> HAML filter to the data file and then put them into template with <code>mymarkdown</code>. And then I would have to wrap all remaining 1-paragraph bits of text that includes links with <code>mymarkdown</code> helper as well."}, {"owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1502918741, "post_id": 45692859, "comment_id": 78404327, "body": "So you have multiple paragraphs of text (which could have markdown in them) associated with each entry in your data files? Then you&#39;re accessing that text from the data files through HAML templates?"}, {"owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1503682674, "post_id": 45692859, "comment_id": 78732662, "body": "Did you ever get this working?"}], "answers": [{"comments": [{"owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1502920293, "post_id": 45723448, "comment_id": 78404960, "body": "I would actually recommend using this approach sooner in your code. You may be able to simplify your rendering system quite a bit so it doesn&#39;t seem so hacky by using this technique. Maybe something like: <code>render_to_string</code> your HAML template. Run the <a href=\"https://stackoverflow.com/a/45638542/1226389\">substitutions</a>. Render the markdown with Tilt. Then render your (now inline) template."}], "tags": [], "owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "is_accepted": false, "score": 0, "last_activity_date": 1502919687, "creation_date": 1502919687, "answer_id": 45723448, "question_id": 45692859, "link": "https://stackoverflow.com/questions/45692859/execute-ruby-method-on-whole-page-in-middleman/45723448#45723448", "title": "Execute Ruby method on whole page in Middleman", "body": "<p>ActionController::Base has the <code>render_to_string</code> method which will give you the normal HTML output from rendering a partial or page, but in string format. This would allow you to grab the rendered HTML and modify it before finally rendering it for real as an inline template.</p>\n\n<p>In your controller:</p>\n\n<pre><code>rendered_html = render_to_string 'your_template_or_partial'\n# do stuff to rendered_html\nrender inline: rendered_html.html_safe, layout: 'layouts/application'\n</code></pre>\n\n<p>The <code>html_safe</code> method makes sure Rails knows it's safe to render this as HTML. You do NOT want to do this if user input is being rendered and you have not sanitized it!!!!</p>\n\n<p>If you don't want it to use a layout when rendering, just remove the :layout argument.</p>\n"}], "owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502919687, "creation_date": 1502800203, "last_edit_date": 1502800911, "question_id": 45692859, "link": "https://stackoverflow.com/questions/45692859/execute-ruby-method-on-whole-page-in-middleman", "title": "Execute Ruby method on whole page in Middleman", "body": "<p>On my Middleman-built website, I need to execute specific Ruby code on the contents of all the pages (templates).</p>\n\n<p>For example, if I had following helper in my <code>config.rb</code>:</p>\n\n<pre><code>def myexample(text)\n    text.gsub(\"dog\",\"cat\")\nend\n</code></pre>\n\n<p>And in my <code>test.html.haml</code>:</p>\n\n<pre><code>= myexample(\"Some text about a dog.\")\n</code></pre>\n\n<p>My previewed and generated <code>/test.html</code> would read:</p>\n\n<pre><code>Some text about a cat.\n</code></pre>\n\n<p>However, I am using several different ways to output text that needs to be modified, most notably through HAML's <code>:markdown</code> filter, so I would prefer not to wrap everything in the <code>= myexample(\"Text\")</code> helper.</p>\n\n<p>I would like to be able to run Ruby code that would take contents of all the pages (preferably) or generated HTML output (if the first option is not possible) as an argument passed to such helper.</p>\n\n<p>Ideally, this code would be run in both the development and build environments, but if that's not possible, build is enough.</p>\n\n<p>Is it possible to do so?</p>\n\n<p>PS. In my specific case, I use a shorthand notation to reference other pages and then I use a <a href=\"https://stackoverflow.com/a/45638542/1226389\">regular expression and <code>eval()</code> in order to replace them with relative links from data files</a>.</p>\n"}, {"tags": ["ruby", "string", "utf-8"], "comments": [{"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 3, "creation_date": 1502798576, "post_id": 45692354, "comment_id": 78342430, "body": "Can you explain which characters are &quot;non UTF-8&quot; and why you believe that to be the case?"}, {"owner": {"reputation": 1459, "user_id": 3619962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100000540018568/picture?type=large", "display_name": "Yasin", "link": "https://stackoverflow.com/users/3619962/yasin"}, "reply_to_user": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1502799557, "post_id": 45692354, "comment_id": 78342948, "body": "If you see the screenshot attached, I think the first character is non UTF-8. Also, the arrow symbol towards the left. When I copied and pasted the string here, the SO site automatically discarded those. So, please refer the screenshot."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502800445, "post_id": 45692354, "comment_id": 78343431, "body": "Well, all characters in a UTF-8 string are UTF-8 characters. It would be invalid otherwise. And because codepoints 0-127 are the same in ASCII and UTF-8, it also contains <a href=\"http://www.fileformat.info/info/unicode/char/0006/index.htm\" rel=\"nofollow noreferrer\">ACK</a> and <a href=\"http://www.fileformat.info/info/unicode/char/000C/index.htm\" rel=\"nofollow noreferrer\">FF</a>. Maybe you want to remove control characters or non-printable characters. What is your expected result?"}, {"owner": {"reputation": 1459, "user_id": 3619962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100000540018568/picture?type=large", "display_name": "Yasin", "link": "https://stackoverflow.com/users/3619962/yasin"}, "edited": false, "score": 0, "creation_date": 1502800900, "post_id": 45692354, "comment_id": 78343737, "body": "I have a problem definition that says &quot;Read X bytes from /dev/urandom and remove all non UTF-8 characters&quot;. Maybe, it means to remove the non-printable characters."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502801763, "post_id": 45692354, "comment_id": 78344299, "body": "UTF-8 characters consist of one to four <i>bytes</i>. Not every byte (or byte sequence) is valid UTF-8. On the other hand, not every UTF-8 character is printable or printable on its own."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1502820001, "post_id": 45692354, "comment_id": 78355807, "body": "You need to clarify your question. What, <i>precisely</i> do you mean by &quot;non UTF-8 character&quot;? UTF-8 can encode all of Unicode, so the only characters that cannot be encoded in UTF-8 are the ones which are not in Unicode. However, Ruby only deals in Unicode, so there is no such thing as a character that cannot be encoded in UTF-8 in Ruby. Besides, UTF-8 is not a character set, so the very idea of a &quot;UTF-8 character&quot; or a &quot;non UTF-8 character&quot; is non-sensical anyway."}], "answers": [{"comments": [{"owner": {"reputation": 1459, "user_id": 3619962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100000540018568/picture?type=large", "display_name": "Yasin", "link": "https://stackoverflow.com/users/3619962/yasin"}, "edited": false, "score": 0, "creation_date": 1502809936, "post_id": 45694053, "comment_id": 78349760, "body": "I think this is what I need. But what is that binary for? I see similar results with and without it."}, {"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "reply_to_user": {"reputation": 1459, "user_id": 3619962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100000540018568/picture?type=large", "display_name": "Yasin", "link": "https://stackoverflow.com/users/3619962/yasin"}, "edited": false, "score": 0, "creation_date": 1502810393, "post_id": 45694053, "comment_id": 78350061, "body": "I&#39;m not entirely sure. It&#39;s synonymous with ASCII_8BIT, and I&#39;m using it for clarity in case the encoding of <code>s</code> had changed on me. The docs give three forms of the <code>encode</code> method and I couldn&#39;t really tell which invocation was needed."}], "tags": [], "owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "is_accepted": true, "score": 4, "last_activity_date": 1502804374, "creation_date": 1502804374, "answer_id": 45694053, "question_id": 45692354, "link": "https://stackoverflow.com/questions/45692354/how-do-i-remove-non-utf-8-characters-from-a-string/45694053#45694053", "title": "How do I remove non UTF-8 characters from a String?", "body": "<p>We have a few problems.</p>\n\n<p>The biggest is that a Ruby String stores arbitrary bytes along with a supposed encoding, with no guarantee that the bytes are valid in that encoding and with no obvious reason for that encoding to have been chosen. (I might be biased as a heavy user of Python 3. We would never speak of \"changing a string from one encoding to another\".)</p>\n\n<p>Fortunately, the editor did not eat your post, but it's hard to see that. I'm guessing that you decoded the string as Windows-1252 in order to display it, which only obscures the issue.</p>\n\n<p>Here's your string of bytes as I see it:</p>\n\n<pre><code>&gt;&gt; s = \"\\x06-~$A\\xA7ruG\\xF9\\\"\\x9A\\f\\xB6/K\".b\n=&gt; \"\\x06-~$A\\xA7ruG\\xF9\\\"\\x9A\\f\\xB6/K\"\n&gt;&gt; s.bytes\n=&gt; [6, 45, 126, 36, 65, 167, 114, 117, 71, 249, 34, 154, 12, 182, 47, 75]\n</code></pre>\n\n<p>And it does contain bytes that are not valid UTF-8.</p>\n\n<pre><code>&gt;&gt; s.encoding\n=&gt; #&lt;Encoding:ASCII-8BIT&gt;\n&gt;&gt; String::new(s).force_encoding(Encoding::UTF_8).valid_encoding?\n=&gt; false\n</code></pre>\n\n<p>We can ask to decode this as UTF-8 and insert &#xfffd; where we encounter <em>bytes</em> that are not valid UTF-8:</p>\n\n<pre><code>&gt;&gt; s.encode('utf-8', 'binary', :undef =&gt; :replace)\n=&gt; \"\\u0006-~$A\ufffdruG\ufffd\\\"\ufffd\\f\ufffd/K\"\n</code></pre>\n"}], "owner": {"reputation": 1459, "user_id": 3619962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100000540018568/picture?type=large", "display_name": "Yasin", "link": "https://stackoverflow.com/users/3619962/yasin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "accepted_answer_id": 45694053, "answer_count": 1, "score": -2, "last_activity_date": 1502804374, "creation_date": 1502798171, "last_edit_date": 1502802790, "question_id": 45692354, "link": "https://stackoverflow.com/questions/45692354/how-do-i-remove-non-utf-8-characters-from-a-string", "title": "How do I remove non UTF-8 characters from a String?", "body": "<p>I need to remove non UTF-8 characters from a string. Here is the snap of the text.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RmtYp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RmtYp.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is how it looks like when I open the string in NPP, and then set the encoding to UTF-8:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PHSSe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PHSSe.png\" alt=\"enter image description here\"></a></p>\n\n<p>I think the <code>ACK</code> and <code>FF</code> are non UTF-8 characters.</p>\n\n<p>I tried <code>str.scrub</code> as well as <code>str.encode</code>. Neither of them seems to work. <code>scrub</code> returns the same result, and <code>encode</code> results in an error.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502795448, "post_id": 45691628, "comment_id": 78340833, "body": "What&#39;s up with the <code>i</code> and <code>break if i</code>?"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502795579, "post_id": 45691628, "comment_id": 78340895, "body": "I want it to iterate over every name and stop at the last. That is why I assigned students[-1] to &quot;i&quot;, so it would break when the last student is listed."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1502795596, "post_id": 45691628, "comment_id": 78340900, "body": "Those are some unfriendly folk. I don&#39;t think you need to use a loop here. Can you not just use <code>each</code> to iterate over the array?"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1502795631, "post_id": 45691628, "comment_id": 78340914, "body": "I have been asked to use a while loop."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1502795644, "post_id": 45691628, "comment_id": 78340921, "body": "Yes, they are unfriendly! :)"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1502795681, "post_id": 45691628, "comment_id": 78340942, "body": "I have been asked to print out all the students using a control flow method."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1502796002, "post_id": 45691628, "comment_id": 78341113, "body": "It&#39;s not clear what you&#39;re trying to do. To iterate over each student just iterate--the <code>while</code> condition you have so far is pointless since you don&#39;t change the value of <code>answer</code> in the loop."}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 2, "creation_date": 1502796045, "post_id": 45691628, "comment_id": 78341134, "body": "this sounds a lot like homework... go a step back, explain what you exactly want to do, this will be pretty straight forward once we understand it. There is so much useless code there, that we can&#39;t (or don&#39;t want to) guess what it should do..."}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1502796565, "creation_date": 1502796565, "answer_id": 45691952, "question_id": 45691628, "link": "https://stackoverflow.com/questions/45691628/iterating-over-every-name-in-a-nested-hash-in-array/45691952#45691952", "title": "Iterating over every name in a nested hash in array", "body": "<p>If you have to use a while loop, you can use an incrementing counter and loop while the counter is less than the size of the array</p>\n\n<pre><code>i = 0 \n\nwhile i &lt; students.size\n  puts students[i][:name]\n  i += 1\nend\n</code></pre>\n\n<p>Note that this is idiosyncratic in ruby and you would normally use an <code>#each</code> loop.</p>\n\n<p>If you want to use the while loop to allow the user to request to continue after every name...</p>\n\n<pre><code>i = 0\nputs \"Would you like to list the students? 'Y/N'\"\nanswer = gets.chomp\nwhile answer == 'Y'\n  puts students[i][:name]\n  i += 1\n  puts \"keep going? 'Y/N'\"\n  answer = gets.chomp\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1502801242, "creation_date": 1502801242, "answer_id": 45693150, "question_id": 45691628, "link": "https://stackoverflow.com/questions/45691628/iterating-over-every-name-in-a-nested-hash-in-array/45693150#45693150", "title": "Iterating over every name in a nested hash in array", "body": "<p>The idiomatic Ruby way to do this is:</p>\n\n<pre><code>puts students.collect{ |student| student[:name]}\n</code></pre>\n\n<p>If you must use a while loop, you'll need a counter <code>i</code> as well.</p>\n\n<pre><code>i = 0\nwhile i &lt; students.size\n  puts students[i][:name]\n  i += 1\nend\n</code></pre>\n\n<p>If you also need to prompt for the list, do it outside the loop. Here I'll also show it outside the method.</p>\n\n<pre><code>def print_loop(students)\n  i = 0\n  while i &lt; students.size\n    puts students[i][:name]\n    i += 1\n  end\nend\nputs \"Would you like to list the students? 'Y/N'\"\nanswer = gets.chomp.upcase\nprint_loop(students) if answer == 'Y'\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1502801242, "creation_date": 1502795315, "last_edit_date": 1502795824, "question_id": 45691628, "link": "https://stackoverflow.com/questions/45691628/iterating-over-every-name-in-a-nested-hash-in-array", "title": "Iterating over every name in a nested hash in array", "body": "<p>I have:</p>\n\n<pre><code>students = [\n  {name: \"Dr. Hannibal Lecter\", cohort: :november},\n  {name: \"Darth Vader\", cohort: :november},\n  {name: \"Nurse Ratched\", cohort: :november},\n  {name: \"Michael Corleone\", cohort: :november},\n  {name: \"Alex DeLarge\", cohort: :november},\n  {name: \"The Wicked Witch of the West\", cohort: :november},\n  {name: \"Terminator\", cohort: :november},\n  {name: \"Freddy Krueger\", cohort: :november},\n  {name: \"The Joker\", cohort: :november},\n  {name: \"Joffrey Baratheon\", cohort: :november},\n  {name: \"Norman Bates\", cohort: :november}\n]\n</code></pre>\n\n<p>I attempted to iterate over every student's name in a loop:</p>\n\n<pre><code>def print_loop(students)\n  puts \"Would you like to list the students? 'Y/N'\"\n  answer = gets.chomp\n  while answer != \"N\" do\n    i = students[-1]\n    students.each do |student, value|\n      puts student[:name]\n      break if i\n      if answer == \"Y\"\n        exit\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>It only iterates and loops over the first name. How do I get it to iterate over every name? What am I doing wrong?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502790423, "post_id": 45690358, "comment_id": 78338314, "body": "Do you get an error? And is the line break after &quot;any&quot; intentional?"}, {"owner": {"reputation": 79, "user_id": 8315077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5b7726c1f3f431afcbd6890b7e7d22?s=128&d=identicon&r=PG&f=1", "display_name": "guitarfreak", "link": "https://stackoverflow.com/users/8315077/guitarfreak"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502790485, "post_id": 45690358, "comment_id": 78338345, "body": "I am getting a nil on a page where one of the expressions is presented, and the result should be a figure. Breaking of the line relates to formatting here on Stackoverflow"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502790543, "post_id": 45690358, "comment_id": 78338384, "body": "What is (the result of) <code>main_frame.html</code> and what is the expression supposed to return?"}, {"owner": {"reputation": 79, "user_id": 8315077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5b7726c1f3f431afcbd6890b7e7d22?s=128&d=identicon&r=PG&f=1", "display_name": "guitarfreak", "link": "https://stackoverflow.com/users/8315077/guitarfreak"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502790638, "post_id": 45690358, "comment_id": 78338428, "body": "It&#39;s just a frame, it is supposed to return &quot;true&quot; as the second expression is present."}], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "edited": false, "score": 1, "creation_date": 1502790730, "post_id": 45690397, "comment_id": 78338473, "body": "Just read the docs on these methods and you&#39;ll become enlightened ;)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 79, "user_id": 8315077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5b7726c1f3f431afcbd6890b7e7d22?s=128&d=identicon&r=PG&f=1", "display_name": "guitarfreak", "link": "https://stackoverflow.com/users/8315077/guitarfreak"}, "edited": false, "score": 2, "creation_date": 1502790927, "post_id": 45690397, "comment_id": 78338553, "body": "@guitarfreak <code>=~</code> <i>is</i> a method call. Removing <code>include?</code> should work, i.e. <code>main_frame.html =~ &#47;...&#47;i</code>. You can probably also use <code>match</code> or <code>match?</code> <i>instead of</i> (not in addition to) <code>=~</code>, depending on the context."}, {"owner": {"reputation": 79, "user_id": 8315077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5b7726c1f3f431afcbd6890b7e7d22?s=128&d=identicon&r=PG&f=1", "display_name": "guitarfreak", "link": "https://stackoverflow.com/users/8315077/guitarfreak"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502791382, "post_id": 45690397, "comment_id": 78338752, "body": "@Stefan Thank you very much, that is indeed the problem with my understanding."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1502790325, "creation_date": 1502790325, "answer_id": 45690397, "question_id": 45690358, "link": "https://stackoverflow.com/questions/45690358/ruby-include-related-issue/45690397#45690397", "title": "Ruby - include? related issue", "body": "<p>You are calling two methods <code>include?</code> and <code>=~</code>. The former takes an argument, so it cannot become the argument of <code>=~</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5647, "user_id": 1162143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rLSfS.jpg?s=128&g=1", "display_name": "Alexander Presber", "link": "https://stackoverflow.com/users/1162143/alexander-presber"}, "is_accepted": true, "score": 2, "last_activity_date": 1502796024, "last_edit_date": 1502796024, "creation_date": 1502795550, "answer_id": 45691690, "question_id": 45690358, "link": "https://stackoverflow.com/questions/45690358/ruby-include-related-issue/45691690#45691690", "title": "Ruby - include? related issue", "body": "<p>You probably want to use one of the following:</p>\n\n<pre><code>!!(main_frame.html =~ /Your credit card does not have any statements|No activity is found in your credit card/i)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>!!(/Your credit card does not have any statements|No activity is found in your credit card/i.match main_frame.html)\n</code></pre>\n\n<p>or (using <code>include?</code> but no regexp)</p>\n\n<pre><code>[\n  'Your credit card does not have any statements', \n  'No activity is found in your credit card'\n].any? do |t| \n  main_frame.html.include? t\nend\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8315077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5b7726c1f3f431afcbd6890b7e7d22?s=128&d=identicon&r=PG&f=1", "display_name": "guitarfreak", "link": "https://stackoverflow.com/users/8315077/guitarfreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 45691690, "answer_count": 2, "score": 0, "last_activity_date": 1502796024, "creation_date": 1502790131, "last_edit_date": 1502790559, "question_id": 45690358, "link": "https://stackoverflow.com/questions/45690358/ruby-include-related-issue", "title": "Ruby - include? related issue", "body": "<p>Could anyone help me with getting to the core of the mistake contained in the following code line? </p>\n\n<pre><code>main_frame.html.include? =~ /Your credit card does not have any statements|No activity is found in your credit card/i\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502784054, "post_id": 45688519, "comment_id": 78335031, "body": "What&#39;s your expected output?"}, {"owner": {"reputation": 53, "user_id": 8465859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VC4VekZwgeg/AAAAAAAAAAI/AAAAAAAAJeU/BCTE4x5KNjk/photo.jpg?sz=128", "display_name": "\u0141ukasz Szmelc", "link": "https://stackoverflow.com/users/8465859/%c5%81ukasz-szmelc"}, "edited": false, "score": 0, "creation_date": 1502784159, "post_id": 45688519, "comment_id": 78335093, "body": "My expected output is to list all meals associated with certain order_id in one &lt;td&gt; element."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1502783545, "post_id": 45688559, "comment_id": 78334777, "body": "In addition, you should include the <code>meals</code> when fetching the <code>orders</code> to avoid <i>N + 1 queries</i>, see <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">Eager Loading Associations</a>"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 4, "last_activity_date": 1502783373, "creation_date": 1502783373, "answer_id": 45688559, "question_id": 45688519, "link": "https://stackoverflow.com/questions/45688519/accessing-another-model-from-an-each-loop-in-rails/45688559#45688559", "title": "Accessing another model from an .each loop in Rails", "body": "<p>Order has many meals. Many meals can't have just one name for them all. That's what you're trying to do with <code>order.meals.name</code>. Each meal has its own name. Iterate meals too. Something like this:</p>\n\n<pre><code>- orders.each do |order|\n  - order.meals.each do |meal|\n    = meal.name\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 8465859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VC4VekZwgeg/AAAAAAAAAAI/AAAAAAAAJeU/BCTE4x5KNjk/photo.jpg?sz=128", "display_name": "\u0141ukasz Szmelc", "link": "https://stackoverflow.com/users/8465859/%c5%81ukasz-szmelc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502783906, "creation_date": 1502783172, "last_edit_date": 1502783906, "question_id": 45688519, "link": "https://stackoverflow.com/questions/45688519/accessing-another-model-from-an-each-loop-in-rails", "title": "Accessing another model from an .each loop in Rails", "body": "<p>I am trying to create a restaurant manager app that has users, orders, and meals. User has many orders, order has many meals. I want a table that lists all orders by a user together with meals' names and prices. I have three models: <code>User</code>, <code>Order</code>, and <code>Meal</code>. While it's not a problem to access <code>order_id</code> from this loop:</p>\n\n<pre><code>- @userOrders.each do |order|\n    %tr\n      %td= order.id\n</code></pre>\n\n<p>when I try to access meal's name by </p>\n\n<pre><code>- @userOrders.each do |order|\n    %tr\n      %td= order.id\n      %td= order.meals.name\n</code></pre>\n\n<p>here's what I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hI21H.png\" rel=\"nofollow noreferrer\">Table with what's supposes to be meals' names</a></p>\n\n<p>In Ruby console, when I type <code>user.orders[1].meals</code>, I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XA8Sv.png\" rel=\"nofollow noreferrer\">Console output</a></p>\n\n<p>This is my <code>orders_controller.rb</code></p>\n\n<pre><code>  def index\n    user_id = current_user.id\n    @userOrders = Order.where(:user_id =&gt; user_id)    \n  end\n</code></pre>\n\n<p>Below is my <code>order.rb</code>:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  belongs_to :user\n  has_many :meals\nend\n</code></pre>\n\n<p><code>user.rb</code>:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  has_many :orders\nend\n</code></pre>\n\n<p>and <code>meal.rb</code>:</p>\n\n<pre><code>class Meal &lt; ApplicationRecord\n  belongs_to :order\nend\n</code></pre>\n"}, {"tags": ["ruby", "macos", "terminal", "rvm"], "answers": [{"tags": [], "owner": {"reputation": 5072, "user_id": 350878, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd975fa52dbfad9f077290046071780c?s=128&d=identicon&r=PG", "display_name": "kenpeter", "link": "https://stackoverflow.com/users/350878/kenpeter"}, "is_accepted": false, "score": 1, "last_activity_date": 1502784984, "creation_date": 1502784984, "answer_id": 45688963, "question_id": 45687513, "link": "https://stackoverflow.com/questions/45687513/missing-proper-which-command-make-sure-it-is-installed-before-using-rvm/45688963#45688963", "title": "Missing proper which command. Make sure it is installed before using RVM", "body": "<p>I did <code>yarn global install xxxx</code>. It causes rvm to complain. </p>\n\n<pre><code>yarn global remove xxxx\n</code></pre>\n\n<p>Fix the issue.</p>\n\n<p>Ref:</p>\n\n<p><a href=\"https://issues.jenkins-ci.org/browse/JENKINS-20636?page=com.atlassian.jira.plugin.system.issuetabpanels%3Achangehistory-tabpanel\" rel=\"nofollow noreferrer\">https://issues.jenkins-ci.org/browse/JENKINS-20636?page=com.atlassian.jira.plugin.system.issuetabpanels%3Achangehistory-tabpanel</a></p>\n\n<p><a href=\"https://github.com/yarnpkg/yarn/issues/2064\" rel=\"nofollow noreferrer\">https://github.com/yarnpkg/yarn/issues/2064</a></p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 1094615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMf2d.jpg?s=128&g=1", "display_name": "SaltedBlowfish", "link": "https://stackoverflow.com/users/1094615/saltedblowfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1505942645, "last_edit_date": 1505942645, "creation_date": 1505941002, "answer_id": 46331632, "question_id": 45687513, "link": "https://stackoverflow.com/questions/45687513/missing-proper-which-command-make-sure-it-is-installed-before-using-rvm/46331632#46331632", "title": "Missing proper which command. Make sure it is installed before using RVM", "body": "<p>I also received the </p>\n\n<p><code>Missing proper which command. Make sure it is installed before using RVM</code> </p>\n\n<p>issue when starting my shell.</p>\n\n<p>I use <code>nvm</code>, <code>avn</code>, and <code>rvm</code> and had <code>grunt-cli</code>, <code>karma-cli</code>, <code>typescript</code>, and <code>typings</code> installed globally via <code>yarn</code> when I started getting the error. After removing all of the global packages, the error disappeared. </p>\n\n<p>I cannot reproduce the issue now, go figure. Just thought I'd share in case anyone has a similar issue.</p>\n"}, {"tags": [], "owner": {"reputation": 4219, "user_id": 539149, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/50d4553da2590287def72a6a6d96e3e2?s=128&d=identicon&r=PG", "display_name": "Zack Morris", "link": "https://stackoverflow.com/users/539149/zack-morris"}, "is_accepted": false, "score": 0, "last_activity_date": 1530923596, "creation_date": 1530923596, "answer_id": 51219032, "question_id": 45687513, "link": "https://stackoverflow.com/questions/45687513/missing-proper-which-command-make-sure-it-is-installed-before-using-rvm/51219032#51219032", "title": "Missing proper which command. Make sure it is installed before using RVM", "body": "<p>Same issue, but <strong>I finally got it working by reinstalling RVM</strong>.</p>\n\n<p>I didn't have much luck trying the solutions posted in the issues for this:</p>\n\n<p><a href=\"https://github.com/rvm/rvm/issues/2385\" rel=\"nofollow noreferrer\">https://github.com/rvm/rvm/issues/2385</a></p>\n\n<p><a href=\"https://github.com/rvm/rvm/issues/4378\" rel=\"nofollow noreferrer\">https://github.com/rvm/rvm/issues/4378</a></p>\n\n<p>Nor with (re)installing RVM through <a href=\"https://brew.sh/\" rel=\"nofollow noreferrer\">Homebrew</a>.  I'm on macOS High Sierra 10.13.4 (17E199).  Here are my notes:</p>\n\n<pre><code># uninstalling RVM: https://stackoverflow.com/a/4747195/539149\nrvm implode\n# then delete all mentions of RVM in ~/.bashrc ~/.bash_profile ~/.profile ~/.zshrc\n\n# installing RVM: http://usabilityetc.com/articles/ruby-on-mac-os-x-with-rvm/ https://rvm.io/rvm/install\ngpg --keyserver hkp://pgp.mit.edu --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\nbrew tap --repair\ncurl -sSL https://get.rvm.io | bash -s stable --ruby\n# add RVM to bash profile (usually in one of ~/.bashrc ~/.bash_profile ~/.profile ~/.zshrc)\nnano ~/.bashrc\n###\n# Add RVM to PATH for scripting. Make sure this is the last PATH variable change.\nexport PATH=\"$PATH:$HOME/.rvm/bin\"\n# Load RVM into a shell session *as a function*\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\"\n###\n# reload shell settings\nsource ~/.bash_profile\n\n# upgrading RVM: https://rvm.io/rvm/upgrading\nrvm get stable\n</code></pre>\n\n<p>I realize this isn't the greatest solution if you're in the middle of a project that's on fire (or maybe it is?).  But I think it's helpful to always have idempotent snippets that you can apply to remedy a situation, then optimize things later.</p>\n"}, {"tags": [], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1556722331, "creation_date": 1556722331, "answer_id": 55938157, "question_id": 45687513, "link": "https://stackoverflow.com/questions/45687513/missing-proper-which-command-make-sure-it-is-installed-before-using-rvm/55938157#55938157", "title": "Missing proper which command. Make sure it is installed before using RVM", "body": "<p><code>brew install node</code> fixed it for me, I was getting some node error when doing <code>\\which</code>.</p>\n"}], "owner": {"reputation": 5072, "user_id": 350878, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd975fa52dbfad9f077290046071780c?s=128&d=identicon&r=PG", "display_name": "kenpeter", "link": "https://stackoverflow.com/users/350878/kenpeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1556722331, "creation_date": 1502778464, "last_edit_date": 1502780180, "question_id": 45687513, "link": "https://stackoverflow.com/questions/45687513/missing-proper-which-command-make-sure-it-is-installed-before-using-rvm", "title": "Missing proper which command. Make sure it is installed before using RVM", "body": "<p>I think I install Magnet in Mac and remove better touch tool, then my terminal suddenly gets this:</p>\n\n<pre><code>Last login: Tue Aug 15 16:23:47 on ttys000\n\nERROR: Missing proper 'which' command. Make sure it is installed before using RVM!\n\nWARNING:\n      Errors sourcing '/Users/kenpeter/.rvm/scripts/base'.\n      RVM will likely not work as expected.\n\nERROR: Missing proper 'which' command. Make sure it is installed before using RVM!\n\nWARNING:\n      Errors sourcing '/Users/kenpeter/.rvm/scripts/base'.\n      RVM will likely not work as expected.\n</code></pre>\n\n<p>When I type which in terminal, it works.</p>\n\n<p>My question is that, how do I get rid of this warning?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "syntax-error"], "comments": [{"owner": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 2, "creation_date": 1502777158, "post_id": 45687278, "comment_id": 78332137, "body": "Why don&#39;t you paste your code here instead?"}, {"owner": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 1, "creation_date": 1502777206, "post_id": 45687278, "comment_id": 78332150, "body": "Also, on line 27, do you see a missing <code>%</code> on your <code>end</code> statement?"}, {"owner": {"reputation": 41, "user_id": 8214920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7575e8f93127cb487d69e6098e073c3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish.S", "link": "https://stackoverflow.com/users/8214920/ashish-s"}, "reply_to_user": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 0, "creation_date": 1502777457, "post_id": 45687278, "comment_id": 78332249, "body": "I have added a &quot;%&quot; but still getting an error. My error reads: app/views/broadcasts/_form.html.erb:27: syntax error, unexpected &#39;&lt;&#39; app/views/broadcasts/_form.html.erb:27: syntax error, unexpected &#39;)&#39;, expecting keyword_end app/views/broadcasts/new.html.erb:3:in `_app_views_broadcasts_new_html_erb___30803597_93402384&#39;"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502777765, "post_id": 45687278, "comment_id": 78332354, "body": "Don&#39;t post images unless your question is about GUI or image processing. Copy and paste your console output and code instead."}, {"owner": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 0, "creation_date": 1502777813, "post_id": 45687278, "comment_id": 78332370, "body": "Thats not the only syntax errorr"}], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 1, "last_activity_date": 1502777592, "creation_date": 1502777592, "answer_id": 45687367, "question_id": 45687278, "link": "https://stackoverflow.com/questions/45687278/syntax-error-unexpected-end-output-buffer-safe-append/45687367#45687367", "title": "syntax error, unexpected &#39;&lt;&#39; &lt; end );@output_buffer.safe_append=&#39; ^):", "body": "<p>The error message says exactly where the problem is: <code>_form.html.erb:27</code> where <code>&lt;end %&gt;</code> is used.</p>\n\n<p>By the way, it's not the only place, where <code>&lt;% %&gt;</code> pattern for <code>html.erb</code> is used incorrectly. The <code>&lt;%= form.label :skill&gt;</code> has no closing <code>%&gt;</code>, that's why everything that goes after until next <code>%&gt;</code> is treated as a <code>Ruby</code> code. The code is incorrect and raises <code>syntax error</code></p>\n\n<p>In order to avoid syntax errors, the <code>skill</code> fieldset should be rewritten into this:</p>\n\n<pre><code>&lt;div class=\"form-group row\"&gt;\n  &lt;%= form.label :skill %&gt;\n  &lt;%= form.collection_select :skill, Skill.order(:name), :name, :name, include_blank: \"Select skill\" %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8214920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7575e8f93127cb487d69e6098e073c3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish.S", "link": "https://stackoverflow.com/users/8214920/ashish-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 45687367, "answer_count": 1, "score": -3, "last_activity_date": 1502777711, "creation_date": 1502777096, "last_edit_date": 1502777711, "question_id": 45687278, "link": "https://stackoverflow.com/questions/45687278/syntax-error-unexpected-end-output-buffer-safe-append", "title": "syntax error, unexpected &#39;&lt;&#39; &lt; end );@output_buffer.safe_append=&#39; ^):", "body": "<p>I have been receiving the above mentioned error for a couple of hours now. I am working an a broadcast screen for a ruby project which needs to have a drop down menu that is linked to a skills table. I have generated the broadcast controller, and when editing the _form.html.erb file, I have been thrown a few syntax errors, attached are snippets of my files</p>\n\n<p><img src=\"https://i.stack.imgur.com/OZbEU.png\" alt=\"console message\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/VXlL3.png\" alt=\"_form.html.erb\"></p>\n\n<p>I have tried moving the \"&lt;\" around and completely out of the file but i still end up with errors.  </p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "ruby", "coffeescript"], "comments": [{"owner": {"reputation": 3128, "user_id": 2779307, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QKLNe.jpg?s=128&g=1", "display_name": "Gaurav Srivastava", "link": "https://stackoverflow.com/users/2779307/gaurav-srivastava"}, "edited": false, "score": 0, "creation_date": 1502777045, "post_id": 45687238, "comment_id": 78332105, "body": "share your InvoicesController code"}, {"owner": {"reputation": 3312, "user_id": 1212371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf92e8aa0e55c5ac5fed6f6f5e7ee26?s=128&d=identicon&r=PG", "display_name": "Tyrone Wilson", "link": "https://stackoverflow.com/users/1212371/tyrone-wilson"}, "edited": false, "score": 0, "creation_date": 1502779220, "post_id": 45687238, "comment_id": 78332902, "body": "I don&#39;t see any &quot;ngInject&quot; at the top of your controller which is where you want it to annotate right?"}], "answers": [{"comments": [{"owner": {"reputation": 4690, "user_id": 170527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d58a042e02e02b72aa35e3e1181a7a6f?s=128&d=identicon&r=PG", "display_name": "map7", "link": "https://stackoverflow.com/users/170527/map7"}, "edited": false, "score": 0, "creation_date": 1502927040, "post_id": 45687790, "comment_id": 78406842, "body": "I didn&#39;t have the &quot;ngInject&quot; in my code as I thought that was only for ES6 and I&#39;m using coffeescript. I guess coffeescript must compile down to ES6 and I have to put that line in. Thanks."}, {"owner": {"reputation": 3312, "user_id": 1212371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf92e8aa0e55c5ac5fed6f6f5e7ee26?s=128&d=identicon&r=PG", "display_name": "Tyrone Wilson", "link": "https://stackoverflow.com/users/1212371/tyrone-wilson"}, "reply_to_user": {"reputation": 4690, "user_id": 170527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d58a042e02e02b72aa35e3e1181a7a6f?s=128&d=identicon&r=PG", "display_name": "map7", "link": "https://stackoverflow.com/users/170527/map7"}, "edited": false, "score": 0, "creation_date": 1502939817, "post_id": 45687790, "comment_id": 78409586, "body": "I don&#39;t think it has to do with es6. I also use it with coffeescript but basically the npm module uses those code points to identify where you want an injection to be set up. There are also other ways to do it if you look at the npm docs but I&#39;ve found this method the best and neatest using coffeescript. :)"}], "tags": [], "owner": {"reputation": 3312, "user_id": 1212371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf92e8aa0e55c5ac5fed6f6f5e7ee26?s=128&d=identicon&r=PG", "display_name": "Tyrone Wilson", "link": "https://stackoverflow.com/users/1212371/tyrone-wilson"}, "is_accepted": true, "score": 1, "last_activity_date": 1502779880, "creation_date": 1502779880, "answer_id": 45687790, "question_id": 45687238, "link": "https://stackoverflow.com/questions/45687238/ngannotate-rails-not-working-in-development-mode/45687790#45687790", "title": "ngannotate-rails not working in development mode", "body": "<p>Although it might have been cut off in your snippet above, I don't see where you would have provided the \"ngInject\" directive in you code.</p>\n\n<p>I would expect your controller code to look like </p>\n\n<pre><code>MyController = ($scope, ...) -&gt;\n  \"ngInject\"\n  # etc\n</code></pre>\n\n<p>It's the <code>\"ngInject\"</code> that ng-annotate looks for as the hook in points when transpiling the code.</p>\n"}], "owner": {"reputation": 4690, "user_id": 170527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d58a042e02e02b72aa35e3e1181a7a6f?s=128&d=identicon&r=PG", "display_name": "map7", "link": "https://stackoverflow.com/users/170527/map7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 45687790, "answer_count": 1, "score": 0, "last_activity_date": 1502779880, "creation_date": 1502776841, "last_edit_date": 1502777313, "question_id": 45687238, "link": "https://stackoverflow.com/questions/45687238/ngannotate-rails-not-working-in-development-mode", "title": "ngannotate-rails not working in development mode", "body": "<p>I'm using ngannotate-rails to help get angular code to work in a compressed format. This is in a Rails 3.2 + Angular 1.5.x app.</p>\n\n<p>I've added the following to my Gemfile and ran bundle</p>\n\n<pre><code>group :assets do\n  gem 'sprockets-derailleur', '~&gt; 1.0.0'          # Speed up precompiles with multi-core compile\n  gem 'turbo-sprockets-rails3', '~&gt; 0.3.14'       # Compile only changed assets\n  gem 'sass-rails', ' ~&gt; 3.2'                   # Main CSS extension in use\n  gem 'less', '~&gt; 2.6.0'                          # Less required for ui-utils plugin for AngularJS\n  gem 'therubyracer', '~&gt; 0.12.1'                 # v8 library required for less\n  gem 'coffee-rails'                              # Language which compiles into JS\n  gem 'uglifier'                      # JS parser, minifier, compressor or beautifier toolkit\n\n  gem 'ngannotate-rails', '~&gt; 1.2'                # AngularJS minifier\nend\n</code></pre>\n\n<p>Then in config/environments/development.rb I've added the following</p>\n\n<pre><code>  if ENV['NG_FORCE'] == 'true'\n    config.assets.compress = true\n    config.assets.compile = true\n    config.assets.digest = true\n    config.assets.debug = false\n\n    # Don't fallback to assets pipeline if a precompiled asset is missed\n    config.assets.precompile += %w(*.css *.js *.woff *.eot *.svg *.ttf) # The fix for font-awesome\n\n  else\n    # Do not compress assets\n    config.assets.compress = false\n\n    # Expands the lines which load the assets\n    config.assets.debug = true\n  end\n</code></pre>\n\n<p>I then do the following commands but ng-annotate is not annotating</p>\n\n<pre><code>NG_FORCE=true RAILS_ENV=development bundle exec rake assets:clean assets:precompile:primary\nNG_FORCE=true rails s\n</code></pre>\n\n<p>I check the compiled output in public/assets/.../ and I get this at the top;</p>\n\n<pre><code>(function(){var e;e=function(e,n,t,i,o,c,r,a,u,d,s,l,v,f,g,h,m,p,b,k,y,I,T,E,q,w,A){var D,P,F,x,j;\n</code></pre>\n\n<p>It's minified but not annotated with the strings so AngularJS throws this error;</p>\n\n<pre><code>application-57db964b9323e90284f1f3c331c9c3aa.js:43 Error: [$injector:unpr] Unknown provider: eProvider &lt;- e &lt;- InvoicesController\nhttp://errors.angularjs.org/1.5.7/$injector/unpr?p0=eProvider%20%3C-%20e%20%3C-%20InvoicesController\n    at http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:41:28591\n    at http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:42:16654\n    at Object.r [as get] (http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:42:15610)\n    at http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:42:16739\n    at r (http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:42:15610)\n    at o (http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:42:15910)\n    at Object.s [as instantiate] (http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:42:16247)\n    at http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:43:9470\n    at http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:98:32136\n    at Object.&lt;anonymous&gt; (http://localhost:3000/assets/application-57db964b9323e90284f1f3c331c9c3aa.js:47:31053) &lt;div id=\"wrapper\" class=\"ui-wrapper ng-scope\" ui-view=\"\"&gt;\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>InvoicesController</p>\n\n<pre><code>InvoicesController = ($scope, $http, $location, $state, $stateParams, $uibModal, $timeout, flash, Invoice, Division, Costing, Job, JobService, Common, ShortcutService, InvoiceService, TimesheetService, DisbursementService, DebtorService, SearchService, LineItemService, DateService, $filter, $mdDialog, $mdMedia, Restangular, hotkeys) -&gt;\n\n&lt;Snip: Too long&gt;\n  switch $state.current.name\n    # Index\n\n    when \"invoices\"\n      $scope.query = SearchService.getFilter('invoices')\n      page = SearchService.getPage('invoices')\n\n      if ($scope.query)\n        # Filter already exists\n        $scope.filterForm = true\n        getInvoices(angular.extend({}, $scope.query, {page: page, limit: 10, search: $scope.query}))\n      else if page &gt; 0\n        $scope.query = { order: '-invoice_no', limit: 10,  page: page }\n        $scope.onPaginate(page, 10)\n      else\n        $scope.resetFilter()\n\n  &lt;Snip&gt;\n\nangular\n  .module('paisApp')\n  .controller('InvoicesController', InvoicesController)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1502779403, "post_id": 45687112, "comment_id": 78332952, "body": "Did you restart <code>spring</code> and also your rails server?"}, {"owner": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "reply_to_user": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1502780288, "post_id": 45687112, "comment_id": 78333314, "body": "Yes have already tried restarting the server. But is there any different way of restarting spring?"}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1502780455, "post_id": 45687112, "comment_id": 78333396, "body": "<code>spring stop</code> will stop and automatically restart spring."}, {"owner": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "reply_to_user": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1502780680, "post_id": 45687112, "comment_id": 78333493, "body": "Yup, tried that too. Didn&#39;t work :/"}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1502781214, "post_id": 45687112, "comment_id": 78333745, "body": "Can you search your codebase for <code>rate</code> and see if anything pops up that you might have missed?"}, {"owner": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "reply_to_user": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1502782214, "post_id": 45687112, "comment_id": 78334213, "body": "Such a stupid mistake. I forgot to remove <code>rate</code> from apartment_post.rb model file. I thought permit_params in resource apartment_post was enough. Thank you so much for the help :)"}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1502782480, "post_id": 45687112, "comment_id": 78334302, "body": "Glad I could help. Posted as answer so you can accept it :)"}], "answers": [{"tags": [], "owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "is_accepted": true, "score": 1, "last_activity_date": 1502782451, "creation_date": 1502782451, "answer_id": 45688339, "question_id": 45687112, "link": "https://stackoverflow.com/questions/45687112/nomethoderror-in-adminapartmentpostscontrollercreate/45688339#45688339", "title": "NoMethodError in Admin::ApartmentPostsController#create", "body": "<p>You probably forgot to remove <code>rate</code> somewhere in your codebase. Try searching if you missed anything.</p>\n"}], "owner": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 45688339, "answer_count": 1, "score": 0, "last_activity_date": 1502805561, "creation_date": 1502776085, "last_edit_date": 1502805561, "question_id": 45687112, "link": "https://stackoverflow.com/questions/45687112/nomethoderror-in-adminapartmentpostscontrollercreate", "title": "NoMethodError in Admin::ApartmentPostsController#create", "body": "<p>I am using active admin for my admin panel in Ruby on Rails website. I have this code on my ApartmentPost resource.</p>\n\n<pre><code>ActiveAdmin.register ApartmentPost do\npermit_params :title, :max_stay, :min_stay, :bed_configuration, :number_of_guests,\n                        :features, :description, :admin_user_id, :apartment_number,:latitude, :longitude, :clean_fee, :country, :location, photos: []\n\n form(html: { multipart: true }) do |f|\nf.inputs do\n  f.input :title\n  f.input :max_stay\n  f.input :min_stay\n  f.input :bed_configuration\n  f.input :number_of_guests\n  f.input :features\n  f.input :description\n  f.input :country\n  f.input :location\n  f.input :apartment_number\n  f.input :latitude\n  f.input :longitude\n  f.input :clean_fee\n  f.input :admin_user_id, as: :hidden, input_html: {value: current_admin_user.id}\n  f.file_field :photos, multiple: true\nend\nf.actions\nend\n</code></pre>\n\n<p>So the error I am getting is while creating a new ApartmentPost. The error is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lpvl2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lpvl2.png\" alt=\"enter image description here\"></a></p>\n\n<p>I had created a column called rate in AparmentPost but now it is already removed. Still it gives this error.</p>\n\n<p>Here's the table from schema.rb:</p>\n\n<pre><code>create_table \"apartment_posts\", force: :cascade do |t|\nt.integer  \"admin_user_id\",                   null: false\nt.integer  \"max_stay\",                        null: false\nt.string   \"bed_configuration\",               null: false\nt.integer  \"number_of_guests\",                null: false\nt.string   \"features\",                        null: false\nt.string   \"description\",                     null: false\nt.json     \"photos\"\nt.datetime \"created_at\",                      null: false\nt.datetime \"updated_at\",                      null: false\nt.string   \"title\",                           null: false\nt.string   \"country\",                         null: false\nt.string   \"apartment_number\",                null: false\nt.string   \"latitude\"\nt.string   \"longitude\"\nt.integer  \"min_stay\",                        null: false\nt.string   \"location\",                        null: false\nt.integer  \"clean_fee\",         default: 100, null: false\nt.integer  \"property_type_id\"\nt.index [\"admin_user_id\"], name: \"index_apartment_posts_on_admin_user_id\", using: :btree\nt.index [\"property_type_id\"], name: \"index_apartment_posts_on_property_type_id\", using: :btree\nend\n</code></pre>\n\n<p>Here's the code in routes.rb</p>\n\n<pre><code>devise_for :admin_users, ActiveAdmin::Devise.config\nActiveAdmin.routes(self)\n</code></pre>\n\n<p>I am new in Rails and Active Admin. I tried searching the solution everywhere even tried uninstalling active_admin gem and installing again and removing apartment_post resource and generating it again but none og them worked. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "macos", "heroku"], "comments": [{"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "edited": false, "score": 0, "creation_date": 1502773049, "post_id": 45686535, "comment_id": 78330887, "body": "What about <code>bundle exec rails console</code>?"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1502775200, "post_id": 45686535, "comment_id": 78331474, "body": "Why don&#39;t you list the exact steps you took to install Rails on your Mac, as well as what you did just prior to running <code>rails console</code> (i.e. did you add any new gems). You might as well post your gemfile as well. I&#39;m particularly interested in your version of Spring."}, {"owner": {"reputation": 573, "user_id": 3847021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/534ddaa5b7bef2307bb9bbb1cb3a5569?s=128&d=identicon&r=PG&f=1", "display_name": "mjpablo23", "link": "https://stackoverflow.com/users/3847021/mjpablo23"}, "edited": false, "score": 0, "creation_date": 1502816561, "post_id": 45686535, "comment_id": 78353988, "body": "&gt;&gt; spring -v Spring version 2.0.1"}, {"owner": {"reputation": 573, "user_id": 3847021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/534ddaa5b7bef2307bb9bbb1cb3a5569?s=128&d=identicon&r=PG&f=1", "display_name": "mjpablo23", "link": "https://stackoverflow.com/users/3847021/mjpablo23"}, "edited": false, "score": 0, "creation_date": 1502816616, "post_id": 45686535, "comment_id": 78354022, "body": "sorry, I&#39;m not sure what steps I took to install rails since it was a long time ago.  I will add the gemfile to the post"}, {"owner": {"reputation": 573, "user_id": 3847021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/534ddaa5b7bef2307bb9bbb1cb3a5569?s=128&d=identicon&r=PG&f=1", "display_name": "mjpablo23", "link": "https://stackoverflow.com/users/3847021/mjpablo23"}, "edited": false, "score": 0, "creation_date": 1502820402, "post_id": 45686535, "comment_id": 78356037, "body": "I bundle installed spring 2.0.2, but when I run rails console, it&#39;s still referring to spring-2.0.1.  I remember that I had trouble getting the correct Ruby and rails versions set up because they refer to each other, and the references would get messed up.  I had this setup working with heroku so I didn&#39;t want to mess with it."}, {"owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "edited": false, "score": 0, "creation_date": 1504725336, "post_id": 45686535, "comment_id": 79127362, "body": "@mjpablo23, take it one step at a time, ensure that your version of Ruby 2.3.3 works with your version of Rails 4.2.5. Next ensure you have a database running on your Mac. Your gems show both SQLite and postgreSQL. For me that would be confusing, I would eliminate the one I do not plan to use. Next ensure you can login to that database."}, {"owner": {"reputation": 573, "user_id": 3847021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/534ddaa5b7bef2307bb9bbb1cb3a5569?s=128&d=identicon&r=PG&f=1", "display_name": "mjpablo23", "link": "https://stackoverflow.com/users/3847021/mjpablo23"}, "edited": false, "score": 0, "creation_date": 1504728580, "post_id": 45686535, "comment_id": 79129024, "body": "I ended up getting it running, thanks."}], "owner": {"reputation": 573, "user_id": 3847021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/534ddaa5b7bef2307bb9bbb1cb3a5569?s=128&d=identicon&r=PG&f=1", "display_name": "mjpablo23", "link": "https://stackoverflow.com/users/3847021/mjpablo23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502818048, "creation_date": 1502771626, "last_edit_date": 1502818048, "question_id": 45686535, "link": "https://stackoverflow.com/questions/45686535/trouble-running-ruby-on-rails-console-on-mac", "title": "trouble running ruby on rails console on mac", "body": "<p>I am having trouble getting rails to run on my mac.  This is the output that I get.  It seems to be a problem with my packages or the Ruby or rvm version, but I don't know how to resolve it. I end up having to deploy to Heroku every time to test something.</p>\n\n<pre><code>Pauls-MacBook-Pro:heroku paulyang$ rails console\n/Users/paulyang/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/application.rb:108:in `ensure in preload': undefined method `application' for Rails:Module (NoMethodError)\n    from /Users/paulyang/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/application.rb:112:in `preload'\n    from /Users/paulyang/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/application.rb:143:in `serve'\n    from /Users/paulyang/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/application.rb:131:in `block in run'\n    from /Users/paulyang/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/application.rb:125:in `loop'\n    from /Users/paulyang/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/application.rb:125:in `run'\n    from /Users/paulyang/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n    from /usr/local/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/local/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>This is the gemfile I'm using for my Rails app:</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.3.3'\n\ngem 'sinatra'\n# sinatra needs old tilt version: http://stackoverflow.com/questions/20648394/moduletemplates-uninitialized-constant-tiltcompilesite-nameerror-using\n#https://groups.google.com/forum/#!topic/sinatrarb/mAtn7AZBVmY\ngem 'tilt', '~&gt; 1.4.1', group: :production\ngem 'rest-client'\ngem 'sequel'\ngem 'sqlite3', group: :development\ngem 'pg', '~&gt; 0.18', group: :development\ngem 'cowsay'\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5'\n# Use postgresql as the database for Active Record\ngem 'pg', '~&gt; 0.18', group: :production\ngem 'rails_12factor', group: :production\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0.3'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails', '~&gt; 4.0.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer',  platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\n\n# Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\ngem 'spring',        group: :development\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\ngem 'puma'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# for auto-renewable subscription validation\n# https://github.com/gabrielgarza/monza/blob/master/README.md\ngem 'monza'\ngem 'itunes-receipt'\n</code></pre>\n\n<p>Any help would be great. </p>\n"}, {"tags": ["ruby", "deployment", "web-deployment", "middleman"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502768548, "post_id": 45686067, "comment_id": 78329944, "body": "If you need mentoring or coaching try services like <a href=\"https://www.codementor.io\" rel=\"nofollow noreferrer\">Codementor</a>, <a href=\"https://www.savvy.is\" rel=\"nofollow noreferrer\">Savvy</a>, <a href=\"https://hackhands.com\" rel=\"nofollow noreferrer\">Hackhands</a>, or <a href=\"https://www.airpair.com\" rel=\"nofollow noreferrer\">airpair</a>."}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "edited": false, "score": 1, "creation_date": 1502773237, "post_id": 45686067, "comment_id": 78330934, "body": "Just copy and paste the <code>build</code> directory content into any normal webhosting. It should just work fine."}], "answers": [{"tags": [], "owner": {"reputation": 776, "user_id": 4589729, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yrccKj30cOE/AAAAAAAAAAI/AAAAAAAAABM/yE5f8MOcSHI/photo.jpg?sz=128", "display_name": "David Leuliette", "link": "https://stackoverflow.com/users/4589729/david-leuliette"}, "is_accepted": true, "score": 1, "last_activity_date": 1504521564, "creation_date": 1504521564, "answer_id": 46035281, "question_id": 45686067, "link": "https://stackoverflow.com/questions/45686067/how-can-i-deploy-middleman-to-a-vps/46035281#46035281", "title": "How can I deploy middleman to a VPS?", "body": "<p>You are right</p>\n\n<p>Simply copy the <code>/build</code> and push it to your VPS.</p>\n\n<p>If you want to automate this task have a look at <code>after_build</code> method</p>\n\n<p><a href=\"https://middlemanapp.com/advanced/custom-extensions#after_build\" rel=\"nofollow noreferrer\">https://middlemanapp.com/advanced/custom-extensions#after_build</a></p>\n\n<pre><code>  'bundle exec middleman build',\n  'echo \"== Build the project ==\"',\n  'cd build/',\n  'git add -A',\n  'git commit -m build',\n  'echo \"== Pushing changes ==\"',\n  'git push origin master',\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3189274, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pFSZE.jpg?s=128&g=1", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/3189274/ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "accepted_answer_id": 46035281, "answer_count": 1, "score": 0, "last_activity_date": 1504521564, "creation_date": 1502767583, "last_edit_date": 1502767884, "question_id": 45686067, "link": "https://stackoverflow.com/questions/45686067/how-can-i-deploy-middleman-to-a-vps", "title": "How can I deploy middleman to a VPS?", "body": "<p>I have a middleman project that I want to deploy it to a <strong>VPS</strong>. the documentation of middleman(build/deploy) is very poor and the gem that name it there (middleman-deploy) is not working. </p>\n\n<p>My question is <strong>how can I deploy the project in my own hand without a gem</strong>?\nIs the build folder enough for deployment? I mean, can I just copy that folder to production server or something else?\nThank you.</p>\n"}, {"tags": ["ruby", "net-ssh"], "answers": [{"tags": [], "owner": {"reputation": 497, "user_id": 2142239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5c3d6450849a1edccb2db25b8b0f122f?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/2142239/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1511987120, "creation_date": 1511987120, "answer_id": 47561205, "question_id": 45685922, "link": "https://stackoverflow.com/questions/45685922/netssh-start-timeout-connecting-to-vagrant-host-in-ruby/47561205#47561205", "title": "Net::SSH.start Timeout connecting to Vagrant host in Ruby", "body": "<p>This isn't an answer but it deserves to be added to the thread in an effort to help ...</p>\n\n<p>If had this exact problem with <code>Chef</code> and <code>Ruby</code> on a local machine with VBox so first know you aren't alone. It does not appear to be a problem with the underlying <code>Ruby</code> framework which you can test with:</p>\n\n<p>Note you'll need to adjust IP &amp; user</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'net/ssh'\n\nputs \"opening connection.\\n\"\nnew_connection = Net::SSH.start('192.168.1.116', 'root', {:keys =&gt; ['~/.ssh/id_rsa'], :keepalive =&gt; true, :keepalive_interval =&gt; 60, :timeout =&gt; 60}) \nputs \"connection established, run uptime.\\n\"\nputs new_connection.exec!('uptime')\nputs \"running uname -a\\n\"\nputs new_connection.exec!('uname -a')\nputs \"sleeping for 300 seconds.\\n\"\n(1..5).each do |iterator|\n  sleep_seconds = iterator * 60\n  sleep 60\n  puts \"#{sleep_seconds}\\n\"\nend\nputs \"running uptime.\\n\"\nputs new_connection.exec!('uptime')\nputs \"running uname -a\\n\"\nputs new_connection.exec!('uname -a')\nputs \"closing connection.\\n\"\nnew_connection.close\nputs \"done.\\n\"\n</code></pre>\n\n<p>Then execute with: <code>ruby ./test.rb</code></p>\n\n<p>The <code>Chef</code> failure has a very similar output to your own and note the same versions:</p>\n\n<pre><code>DEBUG: establishing connection to chef-arch-node:22\n/opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh/transport/session.rb:90:in `rescue in initialize': Net::SSH::ConnectionTimeout (Net::SSH::ConnectionTimeout)\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh/transport/session.rb:57:in `initialize'\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh.rb:233:in `new'\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh.rb:233:in `start'\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-multi-1.2.1/lib/net/ssh/multi/server.rb:186:in `new_session'\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-multi-1.2.1/lib/net/ssh/multi/session.rb:488:in `next_session'\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-multi-1.2.1/lib/net/ssh/multi/server.rb:138:in `session'\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/net-ssh-multi-1.2.1/lib/net/ssh/multi/session_actions.rb:36:in `block (2 levels) in sessions'\n    from /opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/logging-2.2.2/lib/logging/diagnostic_context.rb:474:in `block in create_with_logging_context'\n</code></pre>\n"}], "owner": {"reputation": 5438, "user_id": 1944335, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8675e8c601fc98c0ad3a8272b417d0de?s=128&d=identicon&r=PG&f=1", "display_name": "James Taylor", "link": "https://stackoverflow.com/users/1944335/james-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511987120, "creation_date": 1502766146, "last_edit_date": 1502766982, "question_id": 45685922, "link": "https://stackoverflow.com/questions/45685922/netssh-start-timeout-connecting-to-vagrant-host-in-ruby", "title": "Net::SSH.start Timeout connecting to Vagrant host in Ruby", "body": "<p>I have a <code>vagrant</code> VM running.</p>\n\n<pre><code>vagrant init centos/7\n</code></pre>\n\n<p>Generates the minimal <code>Vagrantfile</code>:</p>\n\n<pre><code>Vagrant.configure(2) do |config|\n  config.vm.box = \"centos/7\"\nend\n</code></pre>\n\n<p><code>vagrant ssh-config</code> reports the following:</p>\n\n<pre><code>Host default\n  HostName 127.0.0.1\n  User vagrant\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile \"/path/to/.vagrant/machines/default/virtualbox/private_key\"\n  IdentitiesOnly yes\n  LogLevel FATAL\n</code></pre>\n\n<p>However, the following seems to fail:</p>\n\n<pre><code>require 'net/ssh'\nNet::SSH.start(\"127.0.0.1\", \"vagrant\", {\n    :auth_methods =&gt; [\n        \"publickey\",\n        \"password\"\n    ],\n    :port=&gt;\"2222\",\n    :keys =&gt; [\n        \"/path/to/.vagrant/machines/default/virtualbox/private_key\"\n    ]\n})\n</code></pre>\n\n<p>With the following:</p>\n\n<pre><code>Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout\n    from /usr/local/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh/transport/session.rb:90:in `rescue in initialize'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh/transport/session.rb:57:in `initialize'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh.rb:233:in `new'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/net-ssh-4.1.0/lib/net/ssh.rb:233:in `start'\n    from (irb):2\n    from /usr/local/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>I can connect using SSH, as expected:</p>\n\n<pre><code>ssh -p 2222 -i /path/to/.vagrant/machines/default/virtualbox/private_key vagrant@127.0.0.1\n</code></pre>\n\n<p>How can I connect to a <code>vagrant</code> host in Ruby on my local machine?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "fog"], "comments": [{"owner": {"reputation": 362, "user_id": 2787566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c8f0b4fc470756aa44845c610c7c94?s=128&d=identicon&r=PG&f=1", "display_name": "iskvmk", "link": "https://stackoverflow.com/users/2787566/iskvmk"}, "edited": false, "score": 0, "creation_date": 1502783126, "post_id": 45685278, "comment_id": 78334600, "body": "Could you please attach backtrace of that error? It could be helpful in order to solve your problem."}, {"owner": {"reputation": 237, "user_id": 5787289, "user_type": "registered", "accept_rate": 19, "profile_image": "https://i.stack.imgur.com/tEQkM.jpg?s=128&g=1", "display_name": "ILoveBaymax", "link": "https://stackoverflow.com/users/5787289/ilovebaymax"}, "reply_to_user": {"reputation": 362, "user_id": 2787566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c8f0b4fc470756aa44845c610c7c94?s=128&d=identicon&r=PG&f=1", "display_name": "iskvmk", "link": "https://stackoverflow.com/users/2787566/iskvmk"}, "edited": false, "score": 0, "creation_date": 1502802398, "post_id": 45685278, "comment_id": 78344741, "body": "I attached it to the question above. I hope that it would be helpful."}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 5787289, "user_type": "registered", "accept_rate": 19, "profile_image": "https://i.stack.imgur.com/tEQkM.jpg?s=128&g=1", "display_name": "ILoveBaymax", "link": "https://stackoverflow.com/users/5787289/ilovebaymax"}, "edited": false, "score": 0, "creation_date": 1502813786, "post_id": 45696248, "comment_id": 78352337, "body": "Thank you for your advice. However, the same error appeared... Setting those properties false does not give more detailed information as well..."}], "tags": [], "owner": {"reputation": 362, "user_id": 2787566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c8f0b4fc470756aa44845c610c7c94?s=128&d=identicon&r=PG&f=1", "display_name": "iskvmk", "link": "https://stackoverflow.com/users/2787566/iskvmk"}, "is_accepted": false, "score": 0, "last_activity_date": 1502811252, "creation_date": 1502811252, "answer_id": 45696248, "question_id": 45685278, "link": "https://stackoverflow.com/questions/45685278/rails-5-fog-carrierwave-photo-upload-to-amazon-s3-no-implicit-conversion-of-stri/45696248#45696248", "title": "Rails 5 Fog CarrierWave Photo Upload to Amazon S3 no implicit conversion of String into Array", "body": "<p>I suggest you to add following lines inside <code>CarrierWave.configure</code> block: </p>\n\n<pre><code>  config.ignore_integrity_errors = false\n  config.ignore_processing_errors = false\n  config.ignore_download_errors = false\n</code></pre>\n\n<p>It could help to get more understandable error.</p>\n"}], "owner": {"reputation": 237, "user_id": 5787289, "user_type": "registered", "accept_rate": 19, "profile_image": "https://i.stack.imgur.com/tEQkM.jpg?s=128&g=1", "display_name": "ILoveBaymax", "link": "https://stackoverflow.com/users/5787289/ilovebaymax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1502811252, "creation_date": 1502760460, "last_edit_date": 1502802692, "question_id": 45685278, "link": "https://stackoverflow.com/questions/45685278/rails-5-fog-carrierwave-photo-upload-to-amazon-s3-no-implicit-conversion-of-stri", "title": "Rails 5 Fog CarrierWave Photo Upload to Amazon S3 no implicit conversion of String into Array", "body": "<p>I am an absolute beginner of Ruby on Rails.\nThere is an error that I encountered and do not know to deal with.</p>\n\n<p>WHAT I'D LIKE TO DO: <strong>Uploading a photo to Amazon S3 bucket.</strong></p>\n\n<p>Error: <strong>no implicit conversion of Array into String</strong>.</p>\n\n<p>The Error comes out when @prototype.save fails in prototype#create action  in  prototypes_controller.rb</p>\n\n<p>Question: In order to solve this issue, <strong>when exactly should I convert Array into String?</strong></p>\n\n<p>The params displayed in the Webrick server.</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"prototype\"=&gt;\n   {\"name\"=&gt;\"dafda\",\n    \"prototype_images_attributes\"=&gt;\n      {\"0\"=&gt;\n        {\"content\"=&gt;\n           #&lt;ActionDispatch::Http::UploadedFile:0x007fe07491b778\n           @content_type=\"image/jpeg\",\n           @headers=\"Content-Disposition: form-data; name=\\\"prototype[prototype_images_attributes][0][content]\\\"; filename=\\\"card100002057_1.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\",\n           @original_filename=\"card100002057_1.jpg\",\n           @tempfile=#&lt;File:/var/folders/yy/42bpgmdj4t16rf0_5xsly3tc0000gp/T/RackMultipart20170815-70968-fzdoey.jpg&gt;&gt;,\n        \"status\"=&gt;\"main\"},\n       \"1\"=&gt;{\"status\"=&gt;\"sub\"},\n       \"2\"=&gt;{\"status\"=&gt;\"sub\"}},\n    \"catchcopy\"=&gt;\"fdafda\",\n    \"concept\"=&gt;\"fdafda\"},\n  \"commit\"=&gt;\"Publish\"}\n</code></pre>\n\n<p>Here are files that might have to do with the error.</p>\n\n<p>prototype_controller.rb</p>\n\n<pre><code>def create\n  @prototype = current_user.prototypes.new(prototype_params)\n\n  if @prototype.save\n    flash[:notice] = 'Prototype was successfully created.'\n    redirect_to root_path\n  else\n    flash[:alert] = 'Prototype was not successfully created.'\n    render :new\n  end\nend\n\nprivate\ndef prototype_params\n  params.require(:prototype)\n    .permit(:name,\n            :catchcopy,\n            :concept,\n            prototype_images_attributes: [:content, :status]\n    )\nend\n\ndef set_prototype\n  @prototype = Prototype.find(params[:id]).decorate\nend\n</code></pre>\n\n<p>prototype_image_uploader.rb</p>\n\n<pre><code>class PrototypeImageUploader &lt; CarrierWave::Uploader::Base\n  storage :fog\n\n  def store_dir\n    'uploads'\n  end\n\n  def extension_whitelist\n    %w(jpg jpeg gif png)\n  end\nend\n</code></pre>\n\n<p>config/initializer/carrierwave.rb</p>\n\n<pre><code>require 'carrierwave/storage/abstract'\nrequire 'carrierwave/storage/file'\nrequire 'carrierwave/storage/fog'\n\nCarrierWave.configure do |config|\n  config.storage = :fog\n  config.fog_credentials = {\n    provider: 'AWS',\n    aws_access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n    aws_secret_access_key: ENV['AWS_SECRET_ACCESS_KEY'],\n    region: 'ap-northeast-1'\n  }\n\n  case Rails.env\n    when 'production'\n      config.fog_directory = ENV['S3_BUCKET'],\n      config.asset_host = ENV['S3_BUCKET_HOST']\n    when 'development'\n      config.fog_directory = ENV['S3_BUCKET'],\n      config.asset_host = ENV['S3_BUCKET_HOST']\n    when 'test'\n      config.storage = :file\n  end\nend\n</code></pre>\n\n<p>Backtrace</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"prototype\"=&gt;\n   {\"name\"=&gt;\"dafda\",\n    \"prototype_images_attributes\"=&gt;\n      {\"0\"=&gt;\n        {\"content\"=&gt;\n           #&lt;ActionDispatch::Http::UploadedFile:0x007fe07491b778\n           @content_type=\"image/jpeg\",\n           @headers=\"Content-Disposition: form-data; name=\\\"prototype[prototype_images_attributes][0][content]\\\"; filename=\\\"card100002057_1.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\",\n           @original_filename=\"card100002057_1.jpg\",\n           @tempfile=#&lt;File:/var/folders/yy/42bpgmdj4t16rf0_5xsly3tc0000gp/T/RackMultipart20170815-70968-fzdoey.jpg&gt;&gt;,\n        \"status\"=&gt;\"main\"},\n       \"1\"=&gt;{\"status\"=&gt;\"sub\"},\n       \"2\"=&gt;{\"status\"=&gt;\"sub\"}},\n    \"catchcopy\"=&gt;\"fdafda\",\n    \"concept\"=&gt;\"fdafda\"},\n  \"commit\"=&gt;\"Publish\"}\nUser Load (0.4ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2 ORDER BY `users`.`id` ASC LIMIT 1\n     BEGIN\n   SQL (0.3ms)  INSERT INTO `prototypes` (`name`, `catchcopy`, \n`concept`, `created_at`, `updated_at`, `user_id`) VALUES ('fdfad', \n 'fdfad', 'fdfd', '2017-08-15 13:05:29', '2017-08-15 13:05:29', 2)\n  SQL (0.2ms)  INSERT INTO `prototype_images` (`content`, \n `prototype_id`, `created_at`, `updated_at`, `status`) VALUES \n ('13248473_1049158575176323_1670750882476661352_o.jpg', 56, '2017-08-\n 15 13:05:29', '2017-08-15 13:05:29', 0)\n (0.6ms)  ROLLBACK\n Completed 500 Internal Server Error in 32ms (ActiveRecord: 2.0ms)\n\n TypeError (no implicit conversion of Array into String):\n\n app/controllers/prototypes_controller.rb:24:in `create'\n</code></pre>\n\n<p>If anyone has encountered the error below, can you give me some clues?\nAny advice would be appreciated! Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web", "ransack", "axlsx"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8165687"}, "edited": false, "score": 0, "creation_date": 1502953458, "post_id": 45685229, "comment_id": 78414705, "body": "I have found a solution in the comments section of railscast video &quot;Erick Alvarez about 5 years ago You can use &lt;%= link_to &quot;Excel&quot;, user_contacts_path(params.merge(format: &#39;xls&#39;)) %&gt;  and this will maintain the current parameters you have plus the ones you add or edit inside merge.&quot;"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8165687"}, "edited": false, "score": 0, "creation_date": 1502761292, "post_id": 45685277, "comment_id": 78328557, "body": "he llo widjajayd! Thank you for response. But I am getting same 600 records inside file, instead of 30 results from ransack filter."}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 0, "last_activity_date": 1502763172, "last_edit_date": 1502763172, "creation_date": 1502760442, "answer_id": 45685277, "question_id": 45685229, "link": "https://stackoverflow.com/questions/45685229/rails-5-exporting-ransack-result-set-with-axlsx/45685277#45685277", "title": "Rails 5: Exporting Ransack result set with axlsx", "body": "<p>your search result should be without \"all\"</p>\n\n<pre><code>@q = Candy.ransack(params[:q])\n@candies = @q.result\nput \"total record = \", @candies.count\n</code></pre>\n\n<p>I add trace method, so you can trace the result, you can check the result from rails server console / development log file</p>\n"}, {"tags": [], "owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "is_accepted": false, "score": 0, "last_activity_date": 1543579857, "creation_date": 1543579857, "answer_id": 53557343, "question_id": 45685229, "link": "https://stackoverflow.com/questions/45685229/rails-5-exporting-ransack-result-set-with-axlsx/53557343#53557343", "title": "Rails 5: Exporting Ransack result set with axlsx", "body": "<ul>\n<li>Merge the params to include the relevant format type you are downloading. The relevant path for my application is: search_shifts_path - yours will be different so please change that accordingly.</li>\n</ul>\n\n\n\n<p>Then make sure that you have permitted the relevant parameter in your controller. Given we are not changing any fields, we can safely do so:</p>\n\n<pre><code>def search\n  params.permit![:format] # must permit this\n\n  @q = Shift.ransack(params[:q])\n  @shifts = @q.result\n\n  respond_to do |format|\n    format.xlsx\n    format.html\n  end\n</code></pre>\n\n<p>end</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7461365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TXpqueUcw9c/AAAAAAAAAAI/AAAAAAAABtE/nRtS2RT4DS0/photo.jpg?sz=128", "display_name": "Santosh Kumar", "link": "https://stackoverflow.com/users/7461365/santosh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1586917948, "last_edit_date": 1586917948, "creation_date": 1586892269, "answer_id": 61215572, "question_id": 45685229, "link": "https://stackoverflow.com/questions/45685229/rails-5-exporting-ransack-result-set-with-axlsx/61215572#61215572", "title": "Rails 5: Exporting Ransack result set with axlsx", "body": "<pre><code>@q = Candy.ransack(params[:q])\n@candies = @q.result.page\nputs \"total record = #{@candies.count}\"\n</code></pre>\n\n<p>I think you have set a page limit to display on UI. Use .page to filter and send the same var to axslx file.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8165687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1586917948, "creation_date": 1502760028, "last_edit_date": 1502781180, "question_id": 45685229, "link": "https://stackoverflow.com/questions/45685229/rails-5-exporting-ransack-result-set-with-axlsx", "title": "Rails 5: Exporting Ransack result set with axlsx", "body": "<p>I'm trying generate Excel file using axlsx gem based on Ransack gem result set.</p>\n\n<p>controller:</p>\n\n<pre><code>@q = Candy.ransack(params[:q])\n@candies = @q.result.all\n</code></pre>\n\n<p>When I call @candies with parameters like \"chocolate\" in the view using Ransack gem, \nI get 30 or so results out of 600. It was successfully filtered!</p>\n\n<p>But when I download @candies using axlsx using:</p>\n\n<pre><code>//index.xlsx.axlsx\n\n    require 'axlsx'\n    xlsx_package = Axlsx::Package.new\n\n    workbook = xlsx_package.workbook\n\n    workbook.add_worksheet(name: \"Candies\") do |sheet|\n    sheet.add_row [\"id\", \"name\", \"type\", \"date\"]\n\n        @candies.each do |candy|\n             sheet.add_row [candy.id, candy.name, candy.type, candy.date]\n        end\n    end\n</code></pre>\n\n<p>It generates file with all 600 records!</p>\n\n<p>This question very similar to <a href=\"https://stackoverflow.com/questions/14127222/ransack-search-results-to-xls\">Ransack Search Results - to_xls?</a>\nHowever I've encountered same problem using axlsx gem instead of to_xls gem!</p>\n"}]