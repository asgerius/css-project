[{"tags": ["ruby-on-rails", "ruby", "bash", "shell", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1450, "user_id": 1350255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e3yWE.jpg?s=128&g=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/1350255/some-guy"}, "edited": false, "score": 0, "creation_date": 1465430918, "post_id": 37714701, "comment_id": 62903397, "body": "Can you define what &quot;does not work&quot; means for you?  And can you include whatever errors you&#39;re seeing in your logs?"}, {"owner": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "reply_to_user": {"reputation": 1450, "user_id": 1350255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e3yWE.jpg?s=128&g=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/1350255/some-guy"}, "edited": false, "score": 0, "creation_date": 1465431170, "post_id": 37714701, "comment_id": 62903468, "body": "system() command does not work when I put my code live on server. and there are no error log shown on console"}, {"owner": {"reputation": 1450, "user_id": 1350255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e3yWE.jpg?s=128&g=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/1350255/some-guy"}, "edited": false, "score": 0, "creation_date": 1465431270, "post_id": 37714701, "comment_id": 62903498, "body": "Are you able to log in to the server and execute <code>wayback_machine_downloader http:&#47;&#47;example.com</code> from a shell prompt?"}, {"owner": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "reply_to_user": {"reputation": 1450, "user_id": 1350255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e3yWE.jpg?s=128&g=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/1350255/some-guy"}, "edited": false, "score": 0, "creation_date": 1465431417, "post_id": 37714701, "comment_id": 62903536, "body": "Yes it is working in SV shell prompt but not working in my controller method :/"}, {"owner": {"reputation": 1450, "user_id": 1350255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e3yWE.jpg?s=128&g=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/1350255/some-guy"}, "edited": false, "score": 0, "creation_date": 1465431524, "post_id": 37714701, "comment_id": 62903565, "body": "Are you logged into the server as the same user as the application runs on the server?  And are you certain the environments match, especially <code>$PATH</code> ?"}, {"owner": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "reply_to_user": {"reputation": 1450, "user_id": 1350255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e3yWE.jpg?s=128&g=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/1350255/some-guy"}, "edited": false, "score": 0, "creation_date": 1465431779, "post_id": 37714701, "comment_id": 62903631, "body": "I think environments dont match in my case. How can I do that?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "edited": false, "score": 0, "creation_date": 1465520709, "post_id": 37715382, "comment_id": 62947664, "body": "You&#39;ll have to ensure whatever executable is either in your <code>PATH</code> or you will need to specify the full path to it."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1465434701, "creation_date": 1465434701, "answer_id": 37715382, "question_id": 37714701, "link": "https://stackoverflow.com/questions/37714701/could-not-execute-system-command-in-ruby-controller-on-remote-server/37715382#37715382", "title": "Could not execute system() command in Ruby Controller on remote server", "body": "<p>Try not to use global variables like <code>$newvar</code> for no reason. These things can cause complete chaos in your code if you're not aware of what they do. Here <code>system(\"...\")</code> is sufficient but you can do one better:</p>\n\n<pre><code>system(\"wayback_machine_downloader\", \"http://example.com\")\n</code></pre>\n\n<p>This avoids any security problems you might have when dealing with unescaped command-line arguments. If you accept user input here imagine what someone could do with <code>| rm -rf /</code> as a URL.</p>\n\n<p>If you're having trouble executing, specify the full path to your executable. That avoids dealing with <code>PATH</code> issues.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "edited": false, "score": 0, "creation_date": 1465514193, "post_id": 37730780, "comment_id": 62946244, "body": "Thanks Azan bhai! Commands were running perfect in Server console. I have tried everything but no luck."}, {"owner": {"reputation": 96, "user_id": 2688642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484912f0ca4646f28648676c0eb6477b?s=128&d=identicon&r=PG", "display_name": "Azan Abrar", "link": "https://stackoverflow.com/users/2688642/azan-abrar"}, "reply_to_user": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "edited": false, "score": 0, "creation_date": 1465545298, "post_id": 37730780, "comment_id": 62955918, "body": "This link would help you then! Try a different method other than system command. <a href=\"http://rubyquicktips.com/post/5862861056/execute-shell-commands\" rel=\"nofollow noreferrer\">rubyquicktips.com/post/5862861056/execute-shell-commands</a>"}, {"owner": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "edited": false, "score": 0, "creation_date": 1465547030, "post_id": 37730780, "comment_id": 62956965, "body": "This is great. I will try this."}], "tags": [], "owner": {"reputation": 96, "user_id": 2688642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484912f0ca4646f28648676c0eb6477b?s=128&d=identicon&r=PG", "display_name": "Azan Abrar", "link": "https://stackoverflow.com/users/2688642/azan-abrar"}, "is_accepted": false, "score": 0, "last_activity_date": 1465487449, "creation_date": 1465487449, "answer_id": 37730780, "question_id": 37714701, "link": "https://stackoverflow.com/questions/37714701/could-not-execute-system-command-in-ruby-controller-on-remote-server/37730780#37730780", "title": "Could not execute system() command in Ruby Controller on remote server", "body": "<ul>\n<li>First thing you should not be using $ global variables in there. </li>\n<li><p>Secondly the issue does not seem to be with system() command rather what's inside it. Try instead a simple command to make sure system command works normal or not</p>\n\n<p><strong>something like: wget <a href=\"http://example.com\" rel=\"nofollow\">http://example.com</a></strong></p>\n\n<p>If it runs then make sure library wayback_machine_downloader is installed on server as well. In case wget does not work either then share the log errors may be. The easiest way to test and identify issues would be by running below command directly from terminal on your digital ocean server.</p>\n\n<p><strong>wayback_machine_downloader <a href=\"http://example.com\" rel=\"nofollow\">http://example.com</a></strong></p></li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 6423966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1197339080278541/picture?type=large", "display_name": "Waleed Ramzan", "link": "https://stackoverflow.com/users/6423966/waleed-ramzan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1465487449, "creation_date": 1465429316, "last_edit_date": 1465457652, "question_id": 37714701, "link": "https://stackoverflow.com/questions/37714701/could-not-execute-system-command-in-ruby-controller-on-remote-server", "title": "Could not execute system() command in Ruby Controller on remote server", "body": "<p>I have a Ruby controller method:</p>\n\n<pre><code>def wayback\n $newvar = \"wayback_machine_downloader http://example.com\"\n system($newvar)\nend\n</code></pre>\n\n<p>Now, above controller method runs like a charm locally i.e in <code>localhost:3000</code> but when I put my code live in server then <code>system($newvar)</code> command does not work. I am using digitalocean server.</p>\n"}, {"tags": ["ruby", "soap", "savon"], "owner": {"reputation": 231, "user_id": 520548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78938ce20fecd40f1fd202c96a58d370?s=128&d=identicon&r=PG", "display_name": "Miletos", "link": "https://stackoverflow.com/users/520548/miletos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1465427985, "creation_date": 1465427985, "last_edit_date": 1495540458, "question_id": 37714496, "link": "https://stackoverflow.com/questions/37714496/objects-with-xsitype-in-savon-2", "title": "Objects with xsi:type in Savon 2", "body": "<p>I'm trying to create the following soap envelope but I can't add a type and VALUE at same time in some object</p>\n\n<pre><code>&lt;env:Envelope&gt;\n    &lt;env:Body&gt;\n        &lt;typens:SendRequest&gt;\n            &lt;typens:someStuff&gt;123&lt;/typens:someStuff&gt;\n            &lt;typens:someAuthStuff xsi:type=\"somenamespace:SomeObject\"&gt;VALUE&lt;/typens:someAuthStuff&gt;\n        &lt;/typens:SendRequest&gt;\n    &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n</code></pre>\n\n<p>This is my message:</p>\n\n<pre><code>client.call(:send, message: {\n  someStuff: 123,\n  someAuthStuff: { '@xsi:type' =&gt; 'somenamespace:SomeObject' },\n }\n)\n</code></pre>\n\n<p>But...How can I add the 'VALUE' in someAuthStuff?</p>\n\n<p>Very similar question as <a href=\"https://stackoverflow.com/questions/3751682/how-to-use-objects-with-xsitypes-in-savon\">How to use objects with xsi:types in Savon</a> but now in Savon 2.x</p>\n"}, {"tags": ["ruby", "rspec", "cucumber", "watir-webdriver"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1465428151, "post_id": 37714301, "comment_id": 62902546, "body": "If it is a normal web form, then you interact with it just like you do everything else. Do you mean a basic authentication popup? (like this - <a href=\"http://stackoverflow.com/questions/23004942/how-can-i-get-browser-authentication-popup\" title=\"how can i get browser authentication popup\">stackoverflow.com/questions/23004942/&hellip;</a>)"}, {"owner": {"reputation": 25, "user_id": 6442785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9700c1f85e4088e784dfacb325189f5a?s=128&d=identicon&r=PG", "display_name": "lav", "link": "https://stackoverflow.com/users/6442785/lav"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1465454333, "post_id": 37714301, "comment_id": 62909703, "body": "Yes, it&#39;s a modal- sign up form and I want to access or move focus on to it through a command for automating the application."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1465493781, "post_id": 37714301, "comment_id": 62936552, "body": "If it isn&#39;t basic authentication, then it sounds like you just want to learn how to use watir in general. <a href=\"https://watirwebdriver.com/\" rel=\"nofollow noreferrer\">watirwebdriver.com</a>"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1465520796, "post_id": 37714301, "comment_id": 62947683, "body": "Please post the minimal amount of HTML and watir-webdriver code to reproduce the issue.  Otherwise, it&#39;s guesswork."}], "answers": [{"comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1465493848, "post_id": 37719505, "comment_id": 62936600, "body": "This is the right answer for basic authentication, but he said his issue is a modal sign up form and not basic authentication."}, {"owner": {"reputation": 25, "user_id": 6442785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9700c1f85e4088e784dfacb325189f5a?s=128&d=identicon&r=PG", "display_name": "lav", "link": "https://stackoverflow.com/users/6442785/lav"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1465496852, "post_id": 37719505, "comment_id": 62938369, "body": "yes @titusfortner, so is there any way I can handle it?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1465512326, "post_id": 37719505, "comment_id": 62945753, "body": "I still have no idea what specifically you want to do. Please update your question with more specific information. Are you testing a page, scraping a page, or just looking to skip a page when you go to visit it? Have you used Watir for anything before? Are you asking for how to use Watir in general, or are you having a specific problem with it?"}], "tags": [], "owner": {"reputation": 649, "user_id": 6103994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd47adb462023e049e59c6f437e6d4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Antesser", "link": "https://stackoverflow.com/users/6103994/antesser"}, "is_accepted": false, "score": 0, "last_activity_date": 1465457398, "creation_date": 1465457398, "answer_id": 37719505, "question_id": 37714301, "link": "https://stackoverflow.com/questions/37714301/form-handling-through-watir-webdriver-or-ruby-or-rspec/37719505#37719505", "title": "Form handling through watir-webdriver or ruby or rspec", "body": "<p>Check this out (that is a line from watir-webdriver code):</p>\n\n<pre><code>browser.goto 'http://login:password@www.yoursite.com/index.html'\n</code></pre>\n\n<p>In other words you can send keys for basic HTTP authorisation right in the url like <a href=\"http://login:password@www.yoursite.com/index.html\" rel=\"nofollow\">http://login:password@www.yoursite.com/index.html</a></p>\n\n<p>I hope it will help you.</p>\n"}], "owner": {"reputation": 25, "user_id": 6442785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9700c1f85e4088e784dfacb325189f5a?s=128&d=identicon&r=PG", "display_name": "lav", "link": "https://stackoverflow.com/users/6442785/lav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465457398, "creation_date": 1465426809, "question_id": 37714301, "link": "https://stackoverflow.com/questions/37714301/form-handling-through-watir-webdriver-or-ruby-or-rspec", "title": "Form handling through watir-webdriver or ruby or rspec", "body": "<p>How I can handle the sign-up form. It appears every time when I hit the url. I want dismiss it globally and also I want to access elements of it. How can I do that? using ruby, watir-webdriver, rspec or cucumber.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4879, "user_id": 773259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbxQI.jpg?s=128&g=1", "display_name": "SparK", "link": "https://stackoverflow.com/users/773259/spark"}, "edited": false, "score": 1, "creation_date": 1465426482, "post_id": 37714228, "comment_id": 62902029, "body": "Isn&#39;t your model named  <code>Comment</code>? without <code>s</code>?"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 4879, "user_id": 773259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbxQI.jpg?s=128&g=1", "display_name": "SparK", "link": "https://stackoverflow.com/users/773259/spark"}, "edited": false, "score": 0, "creation_date": 1465426533, "post_id": 37714228, "comment_id": 62902042, "body": "I believe it has the <code>s</code> I&#39;ll post the schema in a edit"}, {"owner": {"reputation": 4879, "user_id": 773259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbxQI.jpg?s=128&g=1", "display_name": "SparK", "link": "https://stackoverflow.com/users/773259/spark"}, "edited": false, "score": 0, "creation_date": 1465426587, "post_id": 37714228, "comment_id": 62902066, "body": "Not the table, the model class itself. ActiveRecord uses singular names for models <code>class Comment</code>."}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 4879, "user_id": 773259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbxQI.jpg?s=128&g=1", "display_name": "SparK", "link": "https://stackoverflow.com/users/773259/spark"}, "edited": false, "score": 0, "creation_date": 1465426683, "post_id": 37714228, "comment_id": 62902098, "body": "I posted the model class also. It&#39;s a singular name"}, {"owner": {"reputation": 4879, "user_id": 773259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbxQI.jpg?s=128&g=1", "display_name": "SparK", "link": "https://stackoverflow.com/users/773259/spark"}, "edited": false, "score": 0, "creation_date": 1465427968, "post_id": 37714228, "comment_id": 62902481, "body": "Exactly, <code>Comment.new</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "is_accepted": true, "score": 2, "last_activity_date": 1465432758, "last_edit_date": 1465432758, "creation_date": 1465426895, "answer_id": 37714322, "question_id": 37714228, "link": "https://stackoverflow.com/questions/37714228/uninitialized-constant-commentscontrollercomments-rails-error/37714322#37714322", "title": "uninitialized constant CommentsController::Comments - Rails error", "body": "<p>I just made a silly mistake and called <code>Comments.new</code> instead of <code>Comment.new</code> </p>\n"}, {"tags": [], "owner": {"reputation": 444, "user_id": 4049961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3lPU.jpg?s=128&g=1", "display_name": "Muhammad Junaid", "link": "https://stackoverflow.com/users/4049961/muhammad-junaid"}, "is_accepted": false, "score": 1, "last_activity_date": 1465427516, "creation_date": 1465427516, "answer_id": 37714432, "question_id": 37714228, "link": "https://stackoverflow.com/questions/37714228/uninitialized-constant-commentscontrollercomments-rails-error/37714432#37714432", "title": "uninitialized constant CommentsController::Comments - Rails error", "body": "<p>Models are referenced singularly as they are classes. You have made a mistake of <code>Comments.new</code> but it should be <code>Comment.new</code>. </p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 1, "accepted_answer_id": 37714322, "answer_count": 2, "score": 0, "last_activity_date": 1465432758, "creation_date": 1465426354, "last_edit_date": 1465426657, "question_id": 37714228, "link": "https://stackoverflow.com/questions/37714228/uninitialized-constant-commentscontrollercomments-rails-error", "title": "uninitialized constant CommentsController::Comments - Rails error", "body": "<p>I have just made a new model named <code>Comments</code> and now I'm trying to make a view so that user can leave comments from the UI(very basic stuff here). But, I'm running into this error <code>uninitialized constant CommentsController::Comments</code> for the life of me I can't figure out why it's throwing this error and not just rendering the page when it's clicked? \nI'm going to post all the applicable code and error for clarity.</p>\n\n<p>MODEL:</p>\n\n<pre><code>class Comment &lt; ActiveRecord::Base\n belongs_to :subscriber \nend\n</code></pre>\n\n<p>CONTROLLER:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n def new\n  @comments = Comments.new\n end\nend\n</code></pre>\n\n<p>ROUTES</p>\n\n<pre><code>Rails.application.routes.draw do\ndevise_for :users\nresources :subscribers, except: :show\nresources :comments\n</code></pre>\n\n<p>SCHEMA:</p>\n\n<pre><code> create_table \"comments\", force: :cascade do |t|\n   t.string   \"description\"\n   t.datetime \"created_at\",  null: false\n   t.datetime \"updated_at\",  null: false\n   t.string   \"fav_drink\"\n   t.string   \"visit_time\"\n end\n</code></pre>\n\n<p>VIEW: </p>\n\n<pre><code> &lt;h2&gt;Let us get to know you more &lt;%= link_to 'Comment', new_comment_path %&gt; &lt;/h2&gt;\n</code></pre>\n\n<p>This is the link I've set up to click the the page where the user will leave a comment.</p>\n\n<p>ERROR:</p>\n\n<p><a href=\"https://i.stack.imgur.com/k1OYi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k1OYi.png\" alt=\"enter image description here\"></a></p>\n\n<p>Let me know if you need to see anymore code. Thank you!</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 1, "creation_date": 1465442822, "post_id": 37714197, "comment_id": 62905804, "body": "Yow, that documentation is painful to drill through, and this case is a poster child for why I wrote all my own AWS libraries.  A signed URL can definitely reference a apecific version of the object, which is included as <code>versionId=xxxxxx</code> in the query string.  The query string is part of the input to the signature algorithm, so this can&#39; be just tacked on, of course. Does passing it as <code>version_id</code> do anything useful?"}], "answers": [{"tags": [], "owner": {"reputation": 1315, "user_id": 5000129, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1xrDEe5Tohw/AAAAAAAAAAI/AAAAAAAAAO4/N8g5z1pF_7A/photo.jpg?sz=128", "display_name": "Brad Buchanan", "link": "https://stackoverflow.com/users/5000129/brad-buchanan"}, "is_accepted": true, "score": 0, "last_activity_date": 1473877971, "creation_date": 1473877971, "answer_id": 39497352, "question_id": 37714197, "link": "https://stackoverflow.com/questions/37714197/how-do-i-create-a-presigned-link-to-a-particular-version-of-an-object-using-the/39497352#39497352", "title": "How do I create a presigned link to a particular version of an object using the Ruby AWS SDK v2?", "body": "<p>I think I've finally worked this out, though I'm still not sure I could trace the entire code path.  In short: You can pass <code>:version_id</code> in the options parameter to <code>presigned_url</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#\n# Uploads a log to S3 at the given key, returning a URL\n# to the file that's good for one hour.\n#\n# @param [String] bucket\n# @param [String] key\n# @param [String] body of the log to be uploaded\n# @param [Hash] options\n# @return [String] public URL of uploaded log, valid for one hour\n# @raise [Exception] if the S3 upload fails\n#\ndef upload_log(bucket, key, body, options={})\n  # Upload log\n  result = AWS::S3.create_client.put_object(\n    options.merge(\n      bucket: bucket,\n      key: key,\n      body: body\n    )\n  )\n\n  # Get presigned URL that expires in one hour\n  options = {bucket: bucket, key: key, expires_in: 3600}\n  options[:version_id] = result[:version_id] unless result[:version_id].nil?\n  Aws::S3::Presigner.new.presigned_url(:get_object, options)\nend\n</code></pre>\n\n<p>And here, everything I could trace about why this works:</p>\n\n<ol>\n<li><p><code>presigned_url</code> passes its <code>params</code> argument through to <code>@client.build_request</code> (<a href=\"https://github.com/aws/aws-sdk-ruby/blob/master/aws-sdk-core/lib/aws-sdk-core/s3/presigner.rb#L48\" rel=\"nofollow\">presigner.rb#L48</a>).</p></li>\n<li><p><a href=\"https://github.com/aws/aws-sdk-ruby/blob/master/aws-sdk-core/lib/seahorse/client/base.rb#L34\" rel=\"nofollow\"><code>build_request</code></a> eventually pushes those parameters onto <code>request.context.params</code> of the request it returns (documented in <a href=\"https://github.com/aws/aws-sdk-ruby/blob/ef9f2d3655c4bacb3adff580a6b295df510f78fe/aws-sdk-core/spec/seahorse/client/base_spec.rb#L91\" rel=\"nofollow\">client/base_spec.rb#L91</a>).</p></li>\n<li><p>From here my understanding is fuzzy; I expect that something like <a href=\"https://github.com/aws/aws-sdk-ruby/blob/ef9f2d3655c4bacb3adff580a6b295df510f78fe/aws-sdk-core/lib/aws-sdk-core/rest/request/builder.rb\" rel=\"nofollow\">Aws::Rest::Request::Builder</a> passes all the params along to create the <a href=\"https://github.com/aws/aws-sdk-ruby/blob/master/aws-sdk-core/lib/aws-sdk-core/rest/request/endpoint.rb\" rel=\"nofollow\"><code>Endpoint</code></a> and the particular rules for this operation (which I'm unable to find) allow <code>version_id</code> to be added to the querystring.</p></li>\n</ol>\n\n<p>In any case, it's working.  Thanks for the pointer Michael!</p>\n"}], "owner": {"reputation": 1315, "user_id": 5000129, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1xrDEe5Tohw/AAAAAAAAAAI/AAAAAAAAAO4/N8g5z1pF_7A/photo.jpg?sz=128", "display_name": "Brad Buchanan", "link": "https://stackoverflow.com/users/5000129/brad-buchanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 39497352, "answer_count": 1, "score": 0, "last_activity_date": 1473877971, "creation_date": 1465426188, "last_edit_date": 1495541302, "question_id": 37714197, "link": "https://stackoverflow.com/questions/37714197/how-do-i-create-a-presigned-link-to-a-particular-version-of-an-object-using-the", "title": "How do I create a presigned link to a particular version of an object using the Ruby AWS SDK v2?", "body": "<p>I am using <a href=\"https://github.com/aws/aws-sdk-ruby\" rel=\"nofollow noreferrer\">the Ruby AWS SDK (v2)</a> to upload log files to a versioned S3 bucket.  The log files are not public, but I would like to generate a presigned link to the log to make it available for a limited time via a chat integration.  I want to link to a particular version, which <a href=\"https://stackoverflow.com/questions/36098263/aws-cdn-create-signed-url-for-specific-s3-object-version\">this answer</a> says is possible via the S3 console.</p>\n\n<p>Documentation on <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Presigner.html\" rel=\"nofollow noreferrer\"><code>Aws::S3::Presigner</code></a> shows how to do this for an unversioned object (or the head version of a versioned object) but not for a particular version. The possible parameters to <code>#presigned_url</code> are not well documented, and reading the source it looks like the parameters are just passed to <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Seahorse/Client/Base.html#build_request-instance_method\" rel=\"nofollow noreferrer\"><code>Seahorse::Client::Base#build_request</code></a> which is not S3-specific.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "comments": [{"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1465427346, "post_id": 37714185, "comment_id": 62902309, "body": "Including the stacktrace when you encounter the error would help."}, {"owner": {"reputation": 266, "user_id": 1187535, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/898663e5d24b02cb486d1e609ea46f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1187535/mike"}, "reply_to_user": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1465428065, "post_id": 37714185, "comment_id": 62902510, "body": "@Dharam Stacktrace added."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1465428132, "post_id": 37714185, "comment_id": 62902538, "body": "Is that all the stacktrace? It doesn&#39;t give much info as it is doesn&#39;t show where these calls originate?"}, {"owner": {"reputation": 266, "user_id": 1187535, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/898663e5d24b02cb486d1e609ea46f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1187535/mike"}, "reply_to_user": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1465428702, "post_id": 37714185, "comment_id": 62902708, "body": "@Dharam Added the full stacktrace for a <code>Veterinarian.last.update(slug: nil)</code> call."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1465428898, "post_id": 37714185, "comment_id": 62902774, "body": "Could you include the few lines of code before and after of <code>engines&#47;practices&#47;app&#47;controllers&#47;practices&#47;clinic_veterinar&zwnj;&#8203;ians_controller.rb:1&zwnj;&#8203;3:in </code>show&#39;<code>. Looks like something there is triggering the </code>update`."}, {"owner": {"reputation": 266, "user_id": 1187535, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/898663e5d24b02cb486d1e609ea46f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1187535/mike"}, "reply_to_user": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1465429139, "post_id": 37714185, "comment_id": 62902854, "body": "@Dharam That&#39;s where I&#39;m calling <code>Veterinarian.last.update(slug: nil)</code> just for quick debugging purposes."}], "answers": [{"tags": [], "owner": {"reputation": 266, "user_id": 1187535, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/898663e5d24b02cb486d1e609ea46f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1187535/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1465511617, "creation_date": 1465511617, "answer_id": 37737267, "question_id": 37714185, "link": "https://stackoverflow.com/questions/37714185/trouble-accessing-attributes-of-associated-read-only-model/37737267#37737267", "title": "Trouble accessing attributes of associated read only model", "body": "<p>After further digging, it appears that doing <code>user.profile.attribute_name</code> does not trigger the readonly error.</p>\n"}], "owner": {"reputation": 266, "user_id": 1187535, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/898663e5d24b02cb486d1e609ea46f5d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1187535/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1465511617, "creation_date": 1465426126, "last_edit_date": 1465478866, "question_id": 37714185, "link": "https://stackoverflow.com/questions/37714185/trouble-accessing-attributes-of-associated-read-only-model", "title": "Trouble accessing attributes of associated read only model", "body": "<p>I'm using the friendly_id gem to generate slugs.</p>\n\n<p>I have a model like this</p>\n\n<pre><code>class Veterinarian &lt; ApplicationRecord\n  extend FriendlyId\n\n  belongs_to :user\n  has_one :profile, through: :user\n\n  friendly_id :slug_string, use: :slugged\n\n  def slug_string\n    \"#{profile.first_name} #{profile.last_name} #{profile.city}\"\n  end\nend\n</code></pre>\n\n<p>And another model like this.</p>\n\n<pre><code>class Profile &lt; ApplicationRecord\n  include ReadOnlyModel\n\n  belongs_to :user\nend\n</code></pre>\n\n<p>ReadOnlyModel looks like this</p>\n\n<pre><code>module ReadOnlyModel\n  extend ActiveSupport::Concern\n\n  included do\n    attr_readonly(*column_names)\n  end\n\n  def readonly?\n    true\n  end\n\n  def destroy\n    raise ActiveRecord::ReadOnlyRecord\n  end\n\n  def delete\n    raise ActiveRecord::ReadOnlyRecord\n  end\nend\n</code></pre>\n\n<p>My issue comes when I'm trying to access profile attributes inside of the veterinarian model. <code>profile.first_name</code>, <code>profile.last_name</code>, etc.</p>\n\n<p>When friendly_id tries to update the slug, it throws an error telling me that the profile model is read only, however I'm just accessing an attribute and using it to create a string for friendly_id to use, nothing is changing in the profile model. However I can do <code>Veterinarian.last.slug_string</code> in the console and it outputs correctly with no errors.</p>\n\n<p>I'm testing this by doing <code>Veterinarian.update(slug: nil)</code> to set the slug to nil and trigger friendly_id to update it with the proper slug.</p>\n\n<p>I've been scratching my head for a good hour and haven't been able to figure out what's going on. It's probably something simple that I'm overlooking. Any help would be appreciated.</p>\n\n<p>my above models are wrapped in a Veterinarians module, I removed it in the code examples for readability reasons.</p>\n\n<pre><code>activerecord (5.0.0.beta3) lib/active_record/persistence.rb:533:in `create_or_update'\nactiverecord (5.0.0.beta3) lib/active_record/callbacks.rb:298:in `block in create_or_update'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:126:in `call'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:455:in `call'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:101:in `__run_callbacks__'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:750:in `_run_save_callbacks'\nactiverecord (5.0.0.beta3) lib/active_record/callbacks.rb:298:in `create_or_update'\nactiverecord (5.0.0.beta3) lib/active_record/suppressor.rb:41:in `create_or_update'\nactiverecord (5.0.0.beta3) lib/active_record/persistence.rb:125:in `save'\nactiverecord (5.0.0.beta3) lib/active_record/validations.rb:44:in `save'\nactiverecord (5.0.0.beta3) lib/active_record/attribute_methods/dirty.rb:22:in `save'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:319:in `block (2 levels) in save'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:395:in `block in with_transaction_returning_status'\nactiverecord (5.0.0.beta3) lib/active_record/connection_adapters/abstract/database_statements.rb:228:in `transaction'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:211:in `transaction'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:392:in `with_transaction_returning_status'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:319:in `block in save'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:334:in `rollback_active_record_state!'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:318:in `save'\nactiverecord (5.0.0.beta3) lib/active_record/persistence.rb:266:in `block in update'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:395:in `block in with_transaction_returning_status'\nactiverecord (5.0.0.beta3) lib/active_record/connection_adapters/abstract/database_statements.rb:230:in `block in transaction'\nactiverecord (5.0.0.beta3) lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'\nactiverecord (5.0.0.beta3) lib/active_record/connection_adapters/abstract/database_statements.rb:230:in `transaction'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:211:in `transaction'\nactiverecord (5.0.0.beta3) lib/active_record/transactions.rb:392:in `with_transaction_returning_status'\nactiverecord (5.0.0.beta3) lib/active_record/persistence.rb:264:in `update'\nengines/practices/app/controllers/practices/clinic_veterinarians_controller.rb:13:in `show'\nactionpack (5.0.0.beta3) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.0.0.beta3) lib/abstract_controller/base.rb:183:in `process_action'\nactionpack (5.0.0.beta3) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.0.0.beta3) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:126:in `call'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:455:in `call'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:101:in `__run_callbacks__'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:90:in `run_callbacks'\nactionpack (5.0.0.beta3) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.0.0.beta3) lib/action_controller/metal/rescue.rb:27:in `process_action'\nactionpack (5.0.0.beta3) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\nactivesupport (5.0.0.beta3) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (5.0.0.beta3) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.0.0.beta3) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (5.0.0.beta3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'\nactionpack (5.0.0.beta3) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'\nactiverecord (5.0.0.beta3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (5.0.0.beta3) lib/abstract_controller/base.rb:128:in `process'\nactionview (5.0.0.beta3) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.0.0.beta3) lib/action_controller/metal.rb:190:in `dispatch'\nactionpack (5.0.0.beta3) lib/action_controller/metal.rb:262:in `dispatch'\nactionpack (5.0.0.beta3) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'\nactionpack (5.0.0.beta3) lib/action_dispatch/routing/route_set.rb:32:in `serve'\nactionpack (5.0.0.beta3) lib/action_dispatch/journey/router.rb:39:in `block in serve'\nactionpack (5.0.0.beta3) lib/action_dispatch/journey/router.rb:26:in `each'\nactionpack (5.0.0.beta3) lib/action_dispatch/journey/router.rb:26:in `serve'\nactionpack (5.0.0.beta3) lib/action_dispatch/routing/route_set.rb:724:in `call'\nrailties (5.0.0.beta3) lib/rails/engine.rb:522:in `call'\nrailties (5.0.0.beta3) lib/rails/railtie.rb:194:in `public_send'\nrailties (5.0.0.beta3) lib/rails/railtie.rb:194:in `method_missing'\nactionpack (5.0.0.beta3) lib/action_dispatch/routing/mapper.rb:18:in `block in &lt;class:Constraints&gt;'\nactionpack (5.0.0.beta3) lib/action_dispatch/routing/mapper.rb:47:in `serve'\nactionpack (5.0.0.beta3) lib/action_dispatch/journey/router.rb:39:in `block in serve'\nactionpack (5.0.0.beta3) lib/action_dispatch/journey/router.rb:26:in `each'\nactionpack (5.0.0.beta3) lib/action_dispatch/journey/router.rb:26:in `serve'\nactionpack (5.0.0.beta3) lib/action_dispatch/routing/route_set.rb:724:in `call'\nomniauth (1.3.0) lib/omniauth/strategy.rb:186:in `call!'\nomniauth (1.3.0) lib/omniauth/strategy.rb:164:in `call'\nomniauth (1.3.0) lib/omniauth/strategy.rb:186:in `call!'\nomniauth (1.3.0) lib/omniauth/strategy.rb:164:in `call'\nomniauth (1.3.0) lib/omniauth/strategy.rb:186:in `call!'\nomniauth (1.3.0) lib/omniauth/strategy.rb:164:in `call'\nactionview (5.0.0.beta3) lib/action_view/digestor.rb:12:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/remotipart-aa0386690bd2/lib/remotipart/middleware.rb:27:in `call'\nwarden (1.2.6) lib/warden/manager.rb:35:in `block in call'\nwarden (1.2.6) lib/warden/manager.rb:34:in `catch'\nwarden (1.2.6) lib/warden/manager.rb:34:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/etag.rb:25:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/conditional_get.rb:25:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/head.rb:12:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/session/abstract/id.rb:222:in `context'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/session/abstract/id.rb:216:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.0.0.beta3) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (5.0.0.beta3) lib/active_record/connection_adapters/abstract/connection_pool.rb:963:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:97:in `__run_callbacks__'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'\nactivesupport (5.0.0.beta3) lib/active_support/callbacks.rb:90:in `run_callbacks'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/reloader.rb:71:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.0.0.beta3) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.0.0.beta3) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.0.0.beta3) lib/active_support/tagged_logging.rb:70:in `block in tagged'\nactivesupport (5.0.0.beta3) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.0.0.beta3) lib/active_support/tagged_logging.rb:70:in `tagged'\nrailties (5.0.0.beta3) lib/rails/rack/logger.rb:24:in `call'\nrequest_store (1.3.1) lib/request_store/middleware.rb:9:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/request_id.rb:24:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/method_override.rb:22:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/runtime.rb:22:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/load_interlock.rb:13:in `call'\nactionpack (5.0.0.beta3) lib/action_dispatch/middleware/static.rb:136:in `call'\n/Users/mike/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/rack-1aded61cedb0/lib/rack/sendfile.rb:111:in `call'\nrailties (5.0.0.beta3) lib/rails/engine.rb:522:in `call'\npuma (2.16.0) lib/puma/server.rb:557:in `handle_request'\npuma (2.16.0) lib/puma/server.rb:404:in `process_client'\npuma (2.16.0) lib/puma/server.rb:270:in `block in run'\npuma (2.16.0) lib/puma/thread_pool.rb:106:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "redactor"], "answers": [{"comments": [{"owner": {"reputation": 1529, "user_id": 4244691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/APclN.jpg?s=128&g=1", "display_name": "LovingRails", "link": "https://stackoverflow.com/users/4244691/lovingrails"}, "edited": false, "score": 0, "creation_date": 1465427623, "post_id": 37714377, "comment_id": 62902385, "body": "I tried your solution and I get only html tags. I have updated the ouput in the question."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "reply_to_user": {"reputation": 1529, "user_id": 4244691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/APclN.jpg?s=128&g=1", "display_name": "LovingRails", "link": "https://stackoverflow.com/users/4244691/lovingrails"}, "edited": false, "score": 0, "creation_date": 1465427764, "post_id": 37714377, "comment_id": 62902431, "body": "Try with <code>sanitize: true</code>"}, {"owner": {"reputation": 1529, "user_id": 4244691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/APclN.jpg?s=128&g=1", "display_name": "LovingRails", "link": "https://stackoverflow.com/users/4244691/lovingrails"}, "edited": false, "score": 0, "creation_date": 1465428769, "post_id": 37714377, "comment_id": 62902737, "body": "I am getting the output now but still i am losing the formatting."}], "tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1465427154, "creation_date": 1465427154, "answer_id": 37714377, "question_id": 37714181, "link": "https://stackoverflow.com/questions/37714181/why-am-i-losing-formatting-while-using-simple-format-in-ruby-on-rails-4-2-6/37714377#37714377", "title": "Why am I losing formatting while using simple_format in ruby on rails 4.2.6?", "body": "<p>This is from the api documentation:</p>\n\n<blockquote>\n  <p><code>simple_format</code> - Returns text transformed into HTML using simple\n  formatting rules. Two or more consecutive newlines(\\n\\n) are\n  considered as a paragraph and wrapped in <code>&lt;p&gt;</code> tags. One newline (\\n) is\n  considered as a linebreak and a <code>&lt;br /&gt;</code> tag is appended. This method\n  does not remove the newlines from the text.</p>\n</blockquote>\n\n<p>So instead of: </p>\n\n<pre><code>&lt;%= simple_format(auto_link(@micropost.content, html: { target: '_blank' }), {}, :sanitize =&gt; false) %&gt;\n</code></pre>\n\n<p>You should probably do the following:</p>\n\n<pre><code>&lt;%= auto_link(@micropost.content, html: { target: '_blank' }, sanitize: false) %&gt;\n</code></pre>\n\n<p>Refer to <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format\" rel=\"nofollow\">simple_format</a> and <a href=\"https://github.com/tenderlove/rails_autolink\" rel=\"nofollow\">rails_autolink</a> for more info.</p>\n"}], "owner": {"reputation": 1529, "user_id": 4244691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/APclN.jpg?s=128&g=1", "display_name": "LovingRails", "link": "https://stackoverflow.com/users/4244691/lovingrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465428994, "creation_date": 1465426094, "last_edit_date": 1465428994, "question_id": 37714181, "link": "https://stackoverflow.com/questions/37714181/why-am-i-losing-formatting-while-using-simple-format-in-ruby-on-rails-4-2-6", "title": "Why am I losing formatting while using simple_format in ruby on rails 4.2.6?", "body": "<p>When I use html_safe,</p>\n\n<pre><code>&lt;%= @micropost.content.html_safe  %&gt;\n</code></pre>\n\n<p>I get the following output with proper formatting.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ib48G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ib48G.png\" alt=\"enter image description here\"></a></p>\n\n<p>But when I use simple_format, I lose the center align and getting line breaks in list which I do not want.</p>\n\n<pre><code>&lt;%= simple_format(auto_link(@micropost.content, html: { target: '_blank' }), {}, :sanitize =&gt; false) %&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JF4Ha.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JF4Ha.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is what I get when I use auto_link alone with sanitize false. </p>\n\n<pre><code>&lt;%= auto_link(@micropost.content, html: { target: '_blank' }, sanitize: false) %&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/T7lOo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T7lOo.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is what I get when I use auto_link alone with sanitize true. </p>\n\n<pre><code>&lt;%= auto_link(@micropost.content, html: { target: '_blank' }, sanitize: true) %&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/KF80z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KF80z.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is what I have in the post</p>\n\n<pre><code>&gt;&gt; micp.content\n=&gt; \"&lt;p style=\\\"text-align: center;\\\"&gt;Pictre &lt;/p&gt;&lt;h2 style=\\\"text-align: center;\\\"&gt;restse&lt;/h2&gt;&lt;h2&gt;sfsdfsdf&lt;/h2&gt;&lt;p&gt;sdfdsf&lt;/p&gt;&lt;p style=\\\"text-align: center;\\\"&gt;dsfds&lt;/p&gt;&lt;p&gt;sfsdfsdf&lt;/p&gt;&lt;ol&gt;&lt;li&gt;sdfdsfsdf&lt;/li&gt;&lt;li&gt;sdfsdfdsf&lt;/li&gt;&lt;li&gt;sdfdsf&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;dfsdfsdfsd&lt;/div&gt;&lt;p style=\\\"text-align: center;\\\"&gt;dfsdf&lt;/p&gt;&lt;ol&gt;&lt;li&gt;dsfsdf&lt;/li&gt;&lt;li&gt;sdf&lt;/li&gt;&lt;li&gt;sdfsd&lt;/li&gt;&lt;/ol&gt;&lt;p style=\\\"text-align: center;\\\"&gt;&lt;br&gt;&lt;/p&gt;\"\n&gt;&gt; \n</code></pre>\n\n<p>How do I resolve this and have the formatting which the user wanted in his/her post? Thanks.</p>\n"}, {"tags": ["ruby", "passwords", "erase"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465428308, "post_id": 37714099, "comment_id": 62902592, "body": "Ultimately this is a lost cause as you have no control over what data is stored in L1, L2, L3 caches or the registers themselves. Those that think they can expunge it from system memory are often mistaken, the operating system might be remapping memory without their knowledge and leaving traces of their data. If you need absolute security then use an authentication mechanism that doesn&#39;t require your application having the bare password. Mechanisms like LDAP or Oauth offload this responsibility completely."}, {"owner": {"reputation": 1442, "user_id": 721263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a4401306decf204b7eeffd88deffa?s=128&d=identicon&r=PG", "display_name": "Neil Smithline", "link": "https://stackoverflow.com/users/721263/neil-smithline"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465428938, "post_id": 37714099, "comment_id": 62902788, "body": "@tadman Fair enough. I&#39;m still interested in hearing if there are common patterns that people use"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465434459, "post_id": 37714099, "comment_id": 62904186, "body": "You might want to look at <a href=\"http://stackoverflow.com/questions/1263350/cryptography-best-practices-for-keys-in-memory\">how people handle cryptographic private keys</a> which is usually a far more serious problem than passwords. The solutions are often extremely complicated and expensive. Basically if you can&#39;t trust your hardware&#39;s secure, don&#39;t place any trust in your hardware and avoid accepting the password in the first place. Use a different authentication mechanism. Scrubbing in memory limits your risk, it doesn&#39;t eliminate it."}, {"owner": {"reputation": 1442, "user_id": 721263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a4401306decf204b7eeffd88deffa?s=128&d=identicon&r=PG", "display_name": "Neil Smithline", "link": "https://stackoverflow.com/users/721263/neil-smithline"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465434960, "post_id": 37714099, "comment_id": 62904286, "body": "@tadman good idea about keys. I&#39;ll research that. And it&#39;s not that I don&#39;t trust the hardware, I&#39;m mostly concerned about a core dump or something storing the password in the file system in clear text. I certainly understand that there are still potential leaks (eg: can&#39;t be certain that the password is not left on the disk used for swapping). But if I can be more secure with just a bit of extra effort, that may be worth it"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465448727, "post_id": 37714099, "comment_id": 62907401, "body": "If you&#39;re concerned about this, I&#39;d bring it up somewhere you can get expert attention and perhaps have a gem made to accommodate these needs. It sounds like quite an engineering task to do right, and anything less than nailing it sounds like a whole lot of paranoia for very little gain."}], "answers": [{"tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": false, "score": 1, "last_activity_date": 1482435635, "creation_date": 1482435635, "answer_id": 41290565, "question_id": 37714099, "link": "https://stackoverflow.com/questions/37714099/secure-erasing-of-password-from-memory-in-ruby/41290565#41290565", "title": "Secure erasing of password from memory in Ruby", "body": "<p>A ruby issue exists for 5 years now (<a href=\"https://bugs.ruby-lang.org/issues/5741\" rel=\"nofollow noreferrer\">5741</a>), regarding secure erasure of secrets from memory. That issue contains also some links which explain, why it is a good thing to erase passwords from memory. Lately <a href=\"http://blog.frizk.net/2016/12/filevault-password-retrieval.html\" rel=\"nofollow noreferrer\">MacOs</a> did have an issue with FileVault2, because the password was stored within memory.    </p>\n\n<p>One possible solution shown within issue 5741 is:</p>\n\n<pre><code>pass = \"\"\n$stdin.sysread(256, pass) # assuming a line-buffered terminal\nio = StringIO.new(\"\\0\" * pass.bytesize)\nio.read(pass.bytesize, pass)\n</code></pre>\n\n<p>It seems to work with ruby 2.3.1p112, but I can't promise it.</p>\n"}], "owner": {"reputation": 1442, "user_id": 721263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a4401306decf204b7eeffd88deffa?s=128&d=identicon&r=PG", "display_name": "Neil Smithline", "link": "https://stackoverflow.com/users/721263/neil-smithline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1482435635, "creation_date": 1465425584, "question_id": 37714099, "link": "https://stackoverflow.com/questions/37714099/secure-erasing-of-password-from-memory-in-ruby", "title": "Secure erasing of password from memory in Ruby", "body": "<p>I'm writing a Ruby application that will need to handle a user's enterprise password. I'd like to minimize the time the password is in memory to reduce the likelihood of the password being exposed. </p>\n\n<p>In a native language, I would directly erase the data. In C#, I would use the <a href=\"https://msdn.microsoft.com/en-us/library/system.security.securestring(v=vs.110).aspx\" rel=\"nofollow\">SecureString class</a>. In Java, I'd use <a href=\"https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java\">char[]</a>. But the best that I can find for Ruby is an <a href=\"https://bugs.ruby-lang.org/issues/5741\" rel=\"nofollow\">old feature request</a> that seems dead.</p>\n\n<p>What is the standard for securely storing and erasing passwords from memory in Ruby? Is there a class that does this? A coding pattern similar to the <code>char[]</code> of Java?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1465424963, "post_id": 37713855, "comment_id": 62901560, "body": "nice try, but you can&#39;t call a Ruby function from Javascript like that."}], "answers": [{"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 1, "last_activity_date": 1465425081, "creation_date": 1465425081, "answer_id": 37714024, "question_id": 37713855, "link": "https://stackoverflow.com/questions/37713855/execute-erb-function-only-on-onclick-event/37714024#37714024", "title": "execute erb function only on onclick event", "body": "<p><code>erb</code> is Embedded RuBy, which is run on the server and <code>javascript</code> is run on the client (ex: browser). You are trying to run the <code>erb</code>, which is a server side code, on the client. It doesn't work.</p>\n\n<p>What you need to do is, on the client side, the <code>onClick</code> event should call server, gather those results and update the <code>dom</code> with those results.</p>\n\n<p>Refer to <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow\">working_with_javascript_in_rails</a> for more info.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6442678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lVtC-YLuIv0/AAAAAAAAAAI/AAAAAAAAGYE/ITzl6Ss113I/photo.jpg?sz=128", "display_name": "Gerald M", "link": "https://stackoverflow.com/users/6442678/gerald-m"}, "edited": false, "score": 0, "creation_date": 1465435981, "post_id": 37714094, "comment_id": 62904512, "body": "in fact i added the include CartephotosHelper abd the call is workign, my issue is that it is always run as i would it to run only when i click on the button"}], "tags": [], "owner": {"reputation": 591, "user_id": 2180506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/72SZu.jpg?s=128&g=1", "display_name": "Pedro Henrique", "link": "https://stackoverflow.com/users/2180506/pedro-henrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1465425577, "creation_date": 1465425577, "answer_id": 37714094, "question_id": 37713855, "link": "https://stackoverflow.com/questions/37713855/execute-erb-function-only-on-onclick-event/37714094#37714094", "title": "execute erb function only on onclick event", "body": "<p>The helpers are linked to you models not your controllers, so you have to include the helper on your controller</p>\n\n<pre><code>Cartephotos_controller &lt; ApplicationController\n   include CartephotosHelper\nend\n</code></pre>\n\n<p>and them you may call the function from the erb simply by callyng</p>\n\n<pre><code>&lt;% charger_photos %&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6442678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lVtC-YLuIv0/AAAAAAAAAAI/AAAAAAAAGYE/ITzl6Ss113I/photo.jpg?sz=128", "display_name": "Gerald M", "link": "https://stackoverflow.com/users/6442678/gerald-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4555, "favorite_count": 1, "accepted_answer_id": 37714024, "answer_count": 2, "score": 0, "last_activity_date": 1465430955, "creation_date": 1465424109, "last_edit_date": 1465430955, "question_id": 37713855, "link": "https://stackoverflow.com/questions/37713855/execute-erb-function-only-on-onclick-event", "title": "execute erb function only on onclick event", "body": "<p>I am trying to build a ruby on rails app where a button click would call a specific function. i put the function in a helper module and I am calling the function with the onclick event. my issue is that it seems like teh ERB code is run anyway, even when I do not click the button. I tested the button by replacing the call to the function by an alert which works properly, only popping up when I click the button, but it seems like that mixing erb inside html makes it run automatically. I also tried to pass through an intermediary step by adding a javascript function called by the onclick event, but it does not solve my issue as the code is run anyway.</p>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;input type=\"button\" name=\"test\" value=\"Charger en masse\" onclick=\"&lt;%charger_photos%&gt;\"&gt;\n\nmodule CartephotosHelper\n  def charger_photos\n    @test=Array.new\n    Dir['./public/images/*'].each do |file_name|\n      @test.push(file_name)\n      next if File.directory? file_name \n    end\n  end\nend\n</code></pre>\n\n<p>test by using javascript to call the fucntion outside of the onclick event</p>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  function chargermasse(){ \n    &lt;%charger_photos%&gt;\n  }\n&lt;/script&gt;\n&lt;input type=\"button\" name=\"test\" value=\"Charger en masse\" onclick=\"chargermasse()\"&gt;\n</code></pre>\n"}, {"tags": ["ruby", "url"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465437137, "post_id": 37713831, "comment_id": 62904743, "body": "Have you confirmed that the space is percent-encoded in the actual HTML the server is sending to your browser, or are you just seeing the <code>%20</code> when you hover or click on the link?"}, {"owner": {"reputation": 2315, "user_id": 1336855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb3d4f1959c98332028ad3fd831f47cc?s=128&d=identicon&r=PG&f=1", "display_name": "Jngai1297", "link": "https://stackoverflow.com/users/1336855/jngai1297"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465482384, "post_id": 37713831, "comment_id": 62928773, "body": "Without <code>URI.unescape</code> I do not see <code>%20</code> when I hover over the link. I just see this <code>http:&#47;&#47;127.0.0.1:9292&#47;blog&#47;Coffee Title&#47;49459</code>. I am hoping for that space to be a <code>-</code>. But when I click on the link it will return in my browser as <code>http:&#47;&#47;127.0.0.1:9292&#47;blog&#47;Coffee%20Title&#47;49459</code>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465482441, "post_id": 37713831, "comment_id": 62928811, "body": "You didn&#39;t mention that you want to replace spaces with dashes. You should edit your question to describe exactly what output you want."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 0, "last_activity_date": 1465484205, "creation_date": 1465484205, "answer_id": 37729513, "question_id": 37713831, "link": "https://stackoverflow.com/questions/37713831/using-url-unescape-to-build-a-url-within-a-view-in-a-string/37729513#37729513", "title": "Using url unescape to build a url within a view in a string", "body": "<p><code>URI.escape</code> replaces characters in a string with their <a href=\"https://en.wikipedia.org/wiki/Percent-encoding\" rel=\"nofollow\">percent-encoded counterpart</a>, which is why a space character becomes <code>%20</code> (20 is the ASCII character code for space). It does not replace spaces with dashes.</p>\n\n<p>To replace a character with another character in a string, use <code>String#tr</code>:</p>\n\n<pre><code>title = \"Coffee Title\"\ntitle_with_dashes = title.tr(\" \", \"-\")\nputs title_with_dashes\n# =&gt; Coffee-Title\n</code></pre>\n\n<p>However, this is only half of the equation. You've changed the URLs in your links but as a consequence your server probably isn't going to recognize the URL when someone clicks on the link, because the path that exists is <code>Coffee Title</code>, not <code>Coffee-Title</code>. That's a topic for another question, though.</p>\n"}], "owner": {"reputation": 2315, "user_id": 1336855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb3d4f1959c98332028ad3fd831f47cc?s=128&d=identicon&r=PG&f=1", "display_name": "Jngai1297", "link": "https://stackoverflow.com/users/1336855/jngai1297"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 37729513, "answer_count": 1, "score": 0, "last_activity_date": 1465484205, "creation_date": 1465423984, "last_edit_date": 1465483789, "question_id": 37713831, "link": "https://stackoverflow.com/questions/37713831/using-url-unescape-to-build-a-url-within-a-view-in-a-string", "title": "Using url unescape to build a url within a view in a string", "body": "<p>I am building a url in a view within my sinatra app</p>\n\n<p>I required the URI module in my app. </p>\n\n<pre><code>&lt;li&gt;&lt;a href=\"/blog/#{URI.unescape(&lt;%= blog.title %&gt;)}/&lt;%= blog.slug %&gt;\"\" method=\"get\"&gt;Show&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>Without <code>URI.unescape</code> I do not see <code>%20</code> when I hover over the link. I just see this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>http://127.0.0.1:9292/blog/Coffee Title/49459\n</code></pre>\n\n<p>I am hoping for that space to be a <code>-</code>. But when I click on the link it will return in my browser as:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>http://127.0.0.1:9292/blog/Coffee%20Title/49459\n</code></pre>\n\n<p>I tried using <code>URI.unescape</code> in irb. I am having trouble evaluating the Ruby code within the string. I am not sure what the right format is but think I am getting close.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1465453499, "post_id": 37715279, "comment_id": 62909307, "body": "hey thanks. Accepted your answer because it works. A follow-up question if you don&#39;t mind? I tried this: <code>photos(count: 5) { Faker::Placeholderit.image}</code> ... and it gives me errors like this: <code>ActiveRecord::AssociationTypeMismatch: Photo(#70257211428680) expected, got String(#70257158998840)</code> ... any way to be able to use Faker::Placeholderit.image? No worries if you don&#39;t want to answer it ... I&#39;ll post it as a separate question ..."}, {"owner": {"reputation": 116, "user_id": 6443001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t64Bn.png?s=128&g=1", "display_name": "&#201;ric C&#244;t&#233;", "link": "https://stackoverflow.com/users/6443001/%c3%89ric-c%c3%b4t%c3%a9"}, "reply_to_user": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1465475200, "post_id": 37715279, "comment_id": 62923130, "body": "Use the <code>Faker::Placeholderit.image</code> in your photo fabricator as you already did. The block you added after <code>photos(count: 5)</code> expects a Photo object, not a string (returned by faker), this is why you get an error."}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1465507259, "post_id": 37715279, "comment_id": 62943968, "body": "hey thanks ... based on what you said, got it working. upvoted your ans to give extra points! =)"}], "tags": [], "owner": {"reputation": 116, "user_id": 6443001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t64Bn.png?s=128&g=1", "display_name": "&#201;ric C&#244;t&#233;", "link": "https://stackoverflow.com/users/6443001/%c3%89ric-c%c3%b4t%c3%a9"}, "is_accepted": true, "score": 3, "last_activity_date": 1465433817, "creation_date": 1465433817, "answer_id": 37715279, "question_id": 37713778, "link": "https://stackoverflow.com/questions/37713778/how-to-use-fabrication-gem/37715279#37715279", "title": "how to use fabrication gem", "body": "<p>In your seeds file, just use:</p>\n\n<pre><code>Fabricate :gallery\nFabricate :photo\n</code></pre>\n\n<p>If you want to add photos in your gallery fabricator (let's say 5 photos):</p>\n\n<pre><code>Fabricator(:gallery) do\n    title { Faker::Book.title }\n    photos(count: 5)\nend\n</code></pre>\n\n<p>Fabricator understands Rails associations, so it will use the photo fabricator to create these photos.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 37715279, "answer_count": 1, "score": 1, "last_activity_date": 1465433817, "creation_date": 1465423696, "last_edit_date": 1465424036, "question_id": 37713778, "link": "https://stackoverflow.com/questions/37713778/how-to-use-fabrication-gem", "title": "how to use fabrication gem", "body": "<p>Ok, please bear with me as I've never tested in Rails (literally).</p>\n\n<p>I was trying to use Faker gem to fill in some data, but was having trouble since the association is: </p>\n\n<pre><code>class Gallery &lt; ActiveRecord::Base\n    has_many :photos\nend\n\n\nclass Photo &lt; ActiveRecord::Base\n    has_attached_file :photo, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }, default_url: \"/images/:style/missing.png\"\n    validates_attachment_content_type :photo, content_type: /\\Aimage\\/.*\\Z/\n    belongs_to :gallery\nend\n</code></pre>\n\n<p>So, someone told me to use <code>Fabrication</code> gem. Like I said, never have done any testing at all ... so not really sure how to implement this gem so I can create some dummy info.</p>\n\n<p>This is what I've done so far: </p>\n\n<p><strong>spec/fabricators/gallery_fabricator.rb</strong></p>\n\n<pre><code>Fabricator(:gallery) do\n title { Faker::Book.title }\nend\n</code></pre>\n\n<p><strong>spec/fabricators/photo_fabricator.rb</strong></p>\n\n<pre><code>Fabricator(:photo) do\n title { Faker::Book.title }\n description { Faker::Lorem.paragraph }\nend\n</code></pre>\n\n<p>And this is what I have in <strong>seeds.rb</strong></p>\n\n<pre><code>Fabricate :gallery do\n title { Faker::Book.title }\nend\n\nFabricate :photo do\n title { Faker::Superhero.name }\n description { Faker::Lorem.paragraph }\n photo { Faker::Placeholdit.image }\nend\n</code></pre>\n\n<p>It sorta works, as it creates a single title for Gallery album every time I run <code>rake db:seed</code> but nothing for photos ... </p>\n\n<p>Advice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "iframe"], "answers": [{"tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": true, "score": 3, "last_activity_date": 1465438723, "creation_date": 1465438723, "answer_id": 37715817, "question_id": 37713669, "link": "https://stackoverflow.com/questions/37713669/how-to-add-iframe-to-sanitized-tags-in-ruby-on-rails-4-2-6/37715817#37715817", "title": "How to add iframe to sanitized tags in ruby on rails 4.2.6?", "body": "<p>Please have a look on the next example:</p>\n\n<pre><code>module Tapp\n  class Application &lt; Rails::Application\n    # In config/application.rb\n    config.action_view.sanitized_allowed_tags = ['strong', 'em', 'a', 'br', 'iframe']\n  # ...\nend\n</code></pre>\n\n<p>My app called <code>Tapp</code>, I'm pretty sure you will have another name here ;)</p>\n\n<p>Then in the console:</p>\n\n<pre><code>[retgoat@iMac-Roman ~/workspace/tapp]$ rc\nLoading development environment (Rails 4.2.6)\n[1] pry(main)&gt; Tapp::Application.config.action_view[:sanitized_allowed_tags]\n=&gt; [\"strong\", \"em\", \"a\", \"br\", \"iframe\"]\n</code></pre>\n"}], "owner": {"reputation": 1529, "user_id": 4244691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/APclN.jpg?s=128&g=1", "display_name": "LovingRails", "link": "https://stackoverflow.com/users/4244691/lovingrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 37715817, "answer_count": 1, "score": 1, "last_activity_date": 1465438723, "creation_date": 1465423059, "question_id": 37713669, "link": "https://stackoverflow.com/questions/37713669/how-to-add-iframe-to-sanitized-tags-in-ruby-on-rails-4-2-6", "title": "How to add iframe to sanitized tags in ruby on rails 4.2.6?", "body": "<p>I am trying to add iframe to santized tags by using </p>\n\n<pre><code>config.action_view.sanitized_allowed_tags\n</code></pre>\n\n<p>I tried to find what tags are already allowed by using the console.</p>\n\n<pre><code>uraai@raiuorial:~/workspace/corse (master) $ heroku run rails c\nRunning rails c on \u2b22 fa4... up, run.9396\nLoading production environment (Rails 4.2.6)\nirb(main):001:0&gt; puts helper.sanitized_allowed_tags.to_a\nNoMethodError: undefined method `sanitized_allowed_tags' for #&lt;ActionView::Base:0x007f18ea91ea60&gt;\n        from /app/vendor/bundle/ruby/2.3.0/gems/metamagic-3.1.7/lib/metamagic/view_helper.rb:30:in `method_missing'\n        from (irb):1\n        from /app/vendor/bundle/ruby/2.3.0/gems/railties-4.2.6/lib/rails/commands/console.rb:110:in `start'\n        from /app/vendor/bundle/ruby/2.3.0/gems/railties-4.2.6/lib/rails/commands/console.rb:9:in `start'\n        from /app/vendor/bundle/ruby/2.3.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:68:in `console'\n        from /app/vendor/bundle/ruby/2.3.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from /app/vendor/bundle/ruby/2.3.0/gems/railties-4.2.6/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from /app/bin/rails:8:in `require'\n        from /app/bin/rails:8:in `&lt;main&gt;'\nirb(main):002:0&gt;\n</code></pre>\n\n<p>Any idea how to add it without ignoring the other tags? Thanks</p>\n"}, {"tags": ["ruby", "twitter-bootstrap", "ruby-on-rails-4", "oauth-2.0"], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 3425925, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/3mZrs.jpg?s=128&g=1", "display_name": "edswartz", "link": "https://stackoverflow.com/users/3425925/edswartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1465492006, "creation_date": 1465492006, "answer_id": 37732219, "question_id": 37713357, "link": "https://stackoverflow.com/questions/37713357/trying-to-rebuild-a-reddit-rails-app-from-two-years-ago-user-agent-bootstrap/37732219#37732219", "title": "trying to rebuild a Reddit Rails App from two years ago (User Agent &amp; BootStrap)", "body": "<p>I resolved the Bootstrap question. I was using Bootstrap 4. When I went back to Bootstrap 3, and moved the @import directives in the SASS file out of the comments section AND changed the \"span4\" class to \"col-md-4\" everything worked.</p>\n\n<p>The user agent seems to be working more often so it might have been a caching issue?</p>\n\n<p>In any event, onward.</p>\n"}], "owner": {"reputation": 441, "user_id": 3425925, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/3mZrs.jpg?s=128&g=1", "display_name": "edswartz", "link": "https://stackoverflow.com/users/3425925/edswartz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465492006, "creation_date": 1465421832, "question_id": 37713357, "link": "https://stackoverflow.com/questions/37713357/trying-to-rebuild-a-reddit-rails-app-from-two-years-ago-user-agent-bootstrap", "title": "trying to rebuild a Reddit Rails App from two years ago (User Agent &amp; BootStrap)", "body": "<p>Two years I used the Reddit API to pull stories into a Rails app I built. I wanted to come back to it to refresh myself on RoR. It seems like I got all of the updates working and can sometimes run it, but here are my issues:</p>\n\n<p>1) Reddit now requires Oauth2 for API requests. I'm using the Redd gem and am able to get authenticated, but I get the 429 error (too many requests) error.</p>\n\n<p>I copied from the Redd instructions the following into my model (substituting my info from my registered Reddit app page): </p>\n\n<pre><code># Authorization (Web)\nw = Redd.it(:web, \"_myClientId_\", \"_My_Secret\", \"_myRedirectURI\", user_agent: 'ruby:edswartz.com.myredditapp:v1.0 (by /u/edswartz')\nurl = w.auth_url(\"random_state\", [\"identity\", \"read\"], :permanent)\nputs \"Please go to #{url} and enter the code below:\"\ncode = gets.chomp\nw.authorize!(code)\n\n# Authorization\nre = Redd.it(:script, \"_my_Client_ID_\", \"_my_secret_\", \"_my_user_name_\", \"_my_password_\", user_agent: 'ruby:edswartz.com.myredditapp:v1.0 (by /u/edswartz')\nre.authorize!\n\nedAgent = 'User-Agent: ruby:com.edswartz.trueQuotes:v1.0 (by /u/edswartz)'\n\nresponse = JSON.load(RestClient.get('http://reddit.com/.json'),{'User-Agent'=&gt; edAgent})\n</code></pre>\n\n<p>After successfully authenticating (copying and pasting the code into the console) I usually get a 429 error. What am I doing wrong? I'm not trying to spoof the user agent, but have put it in manually. I just don't know how else to do it.</p>\n\n<p>The times that I do get in and see the site appear it is obvious that Bootstrap has not loaded. In looking at the Rails-Bootstrap documentation I see where the Gem name has changed and the application css. My /app/assets/stylesheets/application css looks like this:</p>\n\n<pre><code>/*\n * This is a manifest file that'll be compiled into application.css, which will include all the files\n * listed below.\n *\n * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,\n * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.\n *\n * You're free to add application-wide styles to this file and they'll appear at the top of the\n * compiled file, but it's generally better to create a new file per style scope.\n *\n@import \"bootstrap\";\n */\n</code></pre>\n\n<p>Again, not sure this is right either but have tried to comply with the read me from <a href=\"https://github.com/twbs/bootstrap-rubygem\" rel=\"nofollow\">https://github.com/twbs/bootstrap-rubygem</a></p>\n\n<p>Any help anyone can provide on either of these issues would be much appreciated.</p>\n"}, {"tags": ["ruby", "selenium", "watir"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1465421342, "post_id": 37712932, "comment_id": 62900079, "body": "That would open yourself up to a race condition where the size of the download increases before the <code>Watir::Wait.until</code> block is called. To verify size, you would need to store the directory size first, then take the action, then wait for the size to increase by one."}, {"owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "edited": false, "score": 0, "creation_date": 1465433988, "post_id": 37712932, "comment_id": 62904095, "body": "I hate this solution so much that I downvoted the guy&#39;s answer before I took it back, but there is apparently a gem for this: <a href=\"http://stackoverflow.com/questions/9354595/recursively-getting-the-size-of-a-directory\" title=\"recursively getting the size of a directory\">stackoverflow.com/questions/9354595/&hellip;</a>"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1465583045, "post_id": 37712932, "comment_id": 62979221, "body": "If you are downloading a file, why do you need to check that the size <i>increased</i>? I would expect you would be going from not having a file to having at least part of the file - ie couldn&#39;t you simply check that the file size is greater than 0?"}, {"owner": {"reputation": 628, "user_id": 2522327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1be8c6de5292483b5ee3466213de52c2?s=128&d=identicon&r=PG", "display_name": "Vincent Rodomista", "link": "https://stackoverflow.com/users/2522327/vincent-rodomista"}, "edited": false, "score": 0, "creation_date": 1465583724, "post_id": 37712932, "comment_id": 62979579, "body": "That&#39;s correct Justin, that&#39;s what I&#39;m trying to do"}], "answers": [{"tags": [], "owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "is_accepted": false, "score": 0, "last_activity_date": 1466120937, "creation_date": 1466120937, "answer_id": 37871099, "question_id": 37712932, "link": "https://stackoverflow.com/questions/37712932/how-to-check-if-dir-size-changes-during-watir-wait-until/37871099#37871099", "title": "How to check if Dir size changes during Watir wait.until", "body": "<p>This is just a couple of functions you can add in your initializers or whatever.</p>\n\n<pre><code>def get_file_size_in_mb(path)\n  File.size(path).to_f / 10240000.0\nend\n\ndef find_all_files_inside(folder_path)\n  Dir.glob(\"#{folder_path}/**/*\")\nend \n\ndef calculate_size_of_folder_contents(folder_path)\n  mb = 0.0\n  find_all_files_inside(folder_path).each do |fn|\n    mb += get_file_size_in_mb(fn)\n  end# ^ could have used `inject` here\n  mb\nend\n\ndef wait_until_folder_size_changes(folder_path, seconds=2)\n  while true\n    size0 = calculate_size_of_folder_contents(folder_path)\n    sleep seconds\n    size1 = calculate_size_of_folder_contents(folder_path)\n    break if (size1-size0) &gt; 0\n  end\nend\n</code></pre>\n\n<p>Haven't tested, but seems functionally sound</p>\n\n<p>You could also easily monkey code this into watir itself</p>\n"}], "owner": {"reputation": 628, "user_id": 2522327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1be8c6de5292483b5ee3466213de52c2?s=128&d=identicon&r=PG", "display_name": "Vincent Rodomista", "link": "https://stackoverflow.com/users/2522327/vincent-rodomista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466120937, "creation_date": 1465419976, "question_id": 37712932, "link": "https://stackoverflow.com/questions/37712932/how-to-check-if-dir-size-changes-during-watir-wait-until", "title": "How to check if Dir size changes during Watir wait.until", "body": "<p>I have a method that waits for a chrome download to start, using Watir. However, I'd like to simplify and respecify this to the point where it simply checks if the directory size increases. I'm assuming this is going to require me to save the directory's size at the beginning of the block, and then wait for the Dir size to be equal to that number + 1. </p>\n\n<pre><code> def wait_for_download\n     dl_dir = Dir[\"#{Dir.pwd}/downloads/*\"].to_s\n     Watir::Wait.until { !dl_dir.include?(\".crdownload\") }\n end\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "dashing"], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 5289402, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-VeCkahEIXOY/AAAAAAAAAAI/AAAAAAAAEJI/9muyEWgbVd8/photo.jpg?sz=128", "display_name": "Ryan Litwiller", "link": "https://stackoverflow.com/users/5289402/ryan-litwiller"}, "is_accepted": true, "score": 1, "last_activity_date": 1465661221, "last_edit_date": 1465661221, "creation_date": 1465643803, "answer_id": 37763104, "question_id": 37712760, "link": "https://stackoverflow.com/questions/37712760/use-a-variables-in-ruby-gem-dasing-io-dashboard-erb-files-sinatra/37763104#37763104", "title": "Use a variables in ruby gem dasing.io - dashboard .erb files - sinatra", "body": "<p>The answer to this was much simpler then trying to meddle with the dashing gem, and was very close to my original attempts. Thanks to <a href=\"https://www.fiverr.com/nauoa65\" rel=\"nofollow\">nauoa65</a> at fiverr!</p>\n\n<p>This is what I needed in my dashboard's erb, this answer is on the sample.erb dashboard.</p>\n\n<pre><code>&lt;!-- The parameter should come from http://sample.com:3030/sample?apps=mytestparam --&gt;\n&lt;% group = params[:apps] || \"A default value if parameter is not set\" %&gt;\n\n&lt;!-- The equal sign outputs the content of variable to html --&gt;\n&lt;%= group %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18703, "user_id": 3951782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5zDXr.png?s=128&g=1", "display_name": "sudo bangbang", "link": "https://stackoverflow.com/users/3951782/sudo-bangbang"}, "is_accepted": false, "score": 2, "last_activity_date": 1466150536, "last_edit_date": 1466150536, "creation_date": 1466112490, "answer_id": 37869624, "question_id": 37712760, "link": "https://stackoverflow.com/questions/37712760/use-a-variables-in-ruby-gem-dasing-io-dashboard-erb-files-sinatra/37869624#37869624", "title": "Use a variables in ruby gem dasing.io - dashboard .erb files - sinatra", "body": "<p>This has been addressed in an <a href=\"https://github.com/Shopify/dashing/issues/549\" rel=\"nofollow\">issue in dashing repo</a> itself.</p>\n\n<p>As you've used in your code, erb files get access to <code>params</code> from sinatra. So it's simple as</p>\n\n<pre><code>&lt;li data-row=\"1\" data-col=\"1\" data-sizex=\"1\" data-sizey=\"1\"&gt;\n    &lt;div data-id=\"&lt;%= params[:app] %&gt;\" data-view=\"List\" &lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>And if you hit it with</p>\n\n<blockquote>\n  <p>sample.com:3030/mydashboard?apps=group1</p>\n</blockquote>\n\n<p><code>data-id</code> will be taken as <em>group1</em>.</p>\n\n<p>If you're feeling adventures, You can configure custom routes like those in the <strong>UPDATE</strong> part.</p>\n\n<p>The following links will give you enough information to do that</p>\n\n<p><a href=\"https://github.com/Shopify/dashing/blob/f4b121e8dead69e02223ee9d50e431dbc7f5b3c5/lib/dashing/app.rb#L78-L86\" rel=\"nofollow\">How dashboards are accessed with routes</a><br>\n<a href=\"http://www.sinatrarb.com/intro.html#Routes\" rel=\"nofollow\">How routing works in sinatra</a></p>\n\n<p>Even if so many technologies are meshed up in dashing, you just need to look in to routing in sinatra and how it is used in dashing</p>\n"}], "owner": {"reputation": 445, "user_id": 5289402, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-VeCkahEIXOY/AAAAAAAAAAI/AAAAAAAAEJI/9muyEWgbVd8/photo.jpg?sz=128", "display_name": "Ryan Litwiller", "link": "https://stackoverflow.com/users/5289402/ryan-litwiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 1, "accepted_answer_id": 37763104, "answer_count": 2, "score": 3, "last_activity_date": 1466150536, "creation_date": 1465419349, "last_edit_date": 1592644375, "question_id": 37712760, "link": "https://stackoverflow.com/questions/37712760/use-a-variables-in-ruby-gem-dasing-io-dashboard-erb-files-sinatra", "title": "Use a variables in ruby gem dasing.io - dashboard .erb files - sinatra", "body": "<p>Working with <a href=\"http://dashing.io\" rel=\"nofollow noreferrer\">dashing.io</a> to make some awesome dashboards. I understand that dashing was build with ruby and sinatra and uses .erb files in a specific directory to make dashboards.</p>\n<p>I have no issues setting up dashing or getting info into my dashboards with the .erb jobs.</p>\n<p>What I'm trying to do is use a variable passed from the uri string in one of my dashboard .erb files. The dashboard directory also has a layout.erb file that looks like the template and this is what I'm trying to put:</p>\n<pre><code>&lt;% group = params[&quot;apps&quot;] %&gt;\n</code></pre>\n<p>However this gives me an error in sinatra. Ideally I'd like to add a uri parameter to change the dashboard. So I'd like to hit my instance of dashing running at <code>sample.com:3030/mydashboard</code> add a uri parameter <code>sample.com:3030/mydashboard?apps=group1</code></p>\n<pre><code>&lt;li data-row=&quot;1&quot; data-col=&quot;1&quot; data-sizex=&quot;1&quot; data-sizey=&quot;1&quot;&gt;\n    &lt;div data-id=&quot;&lt;% group %&gt;&quot; data-view=&quot;List&quot; &lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n<p>and use that to dynamically create my erb file as such:</p>\n<pre><code>&lt;li data-row=&quot;1&quot; data-col=&quot;1&quot; data-sizex=&quot;1&quot; data-sizey=&quot;1&quot;&gt;\n    &lt;div data-id=&quot;group1&quot; data-view=&quot;List&quot; &lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n<p>I started looking at erb layouts on sinatras docs but with so many different technologies meshed together here, I'm not sure the order of how the page is built and at what point or file I would need to make these changes.</p>\n<p><strong>UPDATE:</strong></p>\n<p>I thought I was making some progress, I forked the gem and altered this line in the app.rb file:</p>\n<pre><code>get '/:dashboard/' do\n</code></pre>\n<p>to</p>\n<pre><code>get '/:dashboard/group/' do\n</code></pre>\n<p>which allows me to use this in my dashboards to get the url parameter <code>&lt;%= params[:group] %&gt;</code> but this seems to break the dashboards. Gridster still shows the widget boxes but no data. This seems to be breaking the <code>view/[widget].html</code> from being resolvable, as I'm getting a resource not found.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1465418539, "post_id": 37712265, "comment_id": 62898756, "body": "Not clear what you mean by <code>k = kv</code> and <code>v = kv</code>."}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1465418678, "post_id": 37712265, "comment_id": 62898836, "body": "I think he is confused by the one line multiple variable assignment. Hope my answer clarifies it a bit."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1465419201, "post_id": 37712265, "comment_id": 62899103, "body": "I suspect you should have had <code>arr.each_with_index ...</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1465419665, "post_id": 37712265, "comment_id": 62899313, "body": "That tutorial by Zed Shaw has a heavy Python accent to it. There&#39;s a lot of conventions employed there that go against most Ruby styleguides, like having upper case letters in variable names, using the module or class name when declaring methods, and having <code>get_</code> in the method name."}, {"owner": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "edited": false, "score": 0, "creation_date": 1465419793, "post_id": 37712265, "comment_id": 62899375, "body": "Plus, wouldn&#39;t a ruby hash be better than the arrays?"}], "answers": [{"comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "reply_to_user": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "edited": false, "score": 0, "creation_date": 1465418771, "post_id": 37712530, "comment_id": 62898883, "body": "that&#39;s actually a good question... Could you provide me with the link you got that code from ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1465418846, "post_id": 37712530, "comment_id": 62898920, "body": "<code>each_with_index do |(k, v), i|</code> avoids having to add the break-out line."}, {"owner": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "edited": false, "score": 0, "creation_date": 1465418905, "post_id": 37712530, "comment_id": 62898947, "body": "It&#39;s linked up top click &quot;tutorial&quot;. It&#39;s in the method called <code>def Dict.get_slot</code> on the page"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465419043, "post_id": 37712530, "comment_id": 62899018, "body": "@tadman that&#39;s interesting. could you explain the block <code>|(k,v),i|</code> it&#39;s the first time I see someone doing that :)"}, {"owner": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465419077, "post_id": 37712530, "comment_id": 62899038, "body": "@tadman There is a method that calls the code I reference, that method specifically wants to return <code>v</code>. So it isn&#39;t actually <code>nil</code> when it&#39;s running. I just don&#39;t get why."}, {"owner": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "edited": false, "score": 0, "creation_date": 1465419248, "post_id": 37712530, "comment_id": 62899121, "body": "return -1 is like return false I think"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465419312, "post_id": 37712530, "comment_id": 62899151, "body": "Your observation about <code>kv</code> assigning <code>nil</code> to <code>k</code> is incorrect."}], "tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": false, "score": 1, "last_activity_date": 1465419171, "last_edit_date": 1465419171, "creation_date": 1465418529, "answer_id": 37712530, "question_id": 37712265, "link": "https://stackoverflow.com/questions/37712265/how-does-a-block-variable-change-with-a-nested-array/37712530#37712530", "title": "How does a block variable change with a nested array?", "body": "<p>Basically the line <code>k, v = kv</code> means that you are assigning <code>kv</code> to <code>k</code> or <code>k= kv</code></p>\n\n<p>comma separated assignment is just another way of assigning multiple variables in one line, it's just syntactic sugar. </p>\n\n<p>Try messing around with your code and do something like this for example:</p>\n\n<pre><code>    arr = [[\"cow\", \"moo\"], [\"duck\", \"quack\"]]\n    bucket = arr[0]\n    bucket.each_with_index do |kv, i|\n      k, v = kv, i\n      puts \"k is #{k} and v is #{v}\"\n    end\n   # k is cow and v is 0\n   # k is moo and v is 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1465419250, "post_id": 37712712, "comment_id": 62899122, "body": "I suspect that is what the example should have been, but that is not what the OP has."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1465419313, "post_id": 37712712, "comment_id": 62899152, "body": "Beware of what <code>bucket</code> is. It is different from <code>arr</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1465419551, "post_id": 37712712, "comment_id": 62899266, "body": "@sawa I forgot to correct that in my example. That really shouldn&#39;t be there in the first place, so I&#39;ve removed it. Seems you&#39;ve made a similar observation."}, {"owner": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "edited": false, "score": 0, "creation_date": 1465419665, "post_id": 37712712, "comment_id": 62899314, "body": "Ok, I tried that out and it made more sense. Thanks man, I just couldn&#39;t find any example like that in the documentation."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1465419782, "post_id": 37712712, "comment_id": 62899367, "body": "There&#39;s a lot of examples in the documentation, but to really get a sense of how it all comes together you might need a better introduction book to Ruby. The original <a href=\"http://ruby-doc.com/docs/ProgrammingRuby/\" rel=\"nofollow noreferrer\">&quot;Pickaxe book&quot; is now free</a> and worth a read through. I found it tremendously valuable when I was learning Ruby."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1465419529, "last_edit_date": 1465419529, "creation_date": 1465419185, "answer_id": 37712712, "question_id": 37712265, "link": "https://stackoverflow.com/questions/37712265/how-does-a-block-variable-change-with-a-nested-array/37712712#37712712", "title": "How does a block variable change with a nested array?", "body": "<p>What's happening here is it's breaking out the key/value pair variable <code>kv</code> into two separate variables <code>k</code> and <code>v</code>. You'll need to adjust your code to look like this:</p>\n\n<pre><code>arr = [[\"cow\", \"moo\"], [\"duck\", \"quack\"]]\narr.each_with_index do |kv, i|\n  k, v = kv\n  puts k\n  puts v\nend\n</code></pre>\n\n<p>What's happening here is demonstrated by this:</p>\n\n<pre><code>kv = [ :key, :value ]\n\n# Assign k to the first value, v to the second in kv\nk, v = kv\n\nk\n# =&gt; :key\nv\n# =&gt; :value\n</code></pre>\n\n<p>A less messy way of doing this break-out is this:</p>\n\n<pre><code>arr.each_with_index do |(k, v), i|\n  # ... Use k and v normally\nend\n</code></pre>\n\n<p>That notation allows you to expand the array into separate variables in advance of using them. It's a trick that comes in handy when dealing with value pairs of this sort.</p>\n\n<p>It's worth noting you wouldn't have to do this if you didn't use <code>each_with_index</code>, as <code>each</code> is sufficient here since that index value is never used:</p>\n\n<pre><code>each do |k, v|\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 37712712, "answer_count": 2, "score": 1, "last_activity_date": 1465419529, "creation_date": 1465417597, "last_edit_date": 1465418285, "question_id": 37712265, "link": "https://stackoverflow.com/questions/37712265/how-does-a-block-variable-change-with-a-nested-array", "title": "How does a block variable change with a nested array?", "body": "<p>I am following <a href=\"http://learnrubythehardway.org/book/ex39.html\" rel=\"nofollow\">a tutorial</a>.</p>\n\n<pre><code>arr = [[\"cow\", \"moo\"], [\"duck\", \"quack\"]]\nbucket = arr[0]\nbucket.each_with_index do |kv, i|\n  k, v = kv\n  puts k\n  puts v\nend\n</code></pre>\n\n<p>I understand that when it goes through <code>arr[0]</code>, it is first <code>kv = cow</code> and <code>i = 0</code>, and then <code>kv = moo</code> and <code>i = 1</code>. How does <code>k, v = kv</code> make sense? To me, it seems that <code>k = kv</code> and <code>v = kv</code>, but that isn't the case. I don't understand the purpose.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl"], "comments": [{"owner": {"reputation": 10910, "user_id": 599075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/893d2e4a728a7a86eba9d222a14ab6d5?s=128&d=identicon&r=PG", "display_name": "Andbdrew", "link": "https://stackoverflow.com/users/599075/andbdrew"}, "edited": false, "score": 1, "creation_date": 1465417324, "post_id": 37712124, "comment_id": 62898146, "body": "haven&#39;t tried it, but <a href=\"https://github.com/taf2/curb\" rel=\"nofollow noreferrer\">github.com/taf2/curb</a> sounds like it could work for you"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4686289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7ab0ffabf5166de954f9aa12654cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Manpreet Komal", "link": "https://stackoverflow.com/users/4686289/manpreet-komal"}, "edited": false, "score": 0, "creation_date": 1465494216, "post_id": 37716193, "comment_id": 62936828, "body": "This is great! It works perfectly. Thanks for your help on this! Apparently, I don&#39;t have enough reputation to up vote your response."}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "reply_to_user": {"reputation": 35, "user_id": 4686289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7ab0ffabf5166de954f9aa12654cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Manpreet Komal", "link": "https://stackoverflow.com/users/4686289/manpreet-komal"}, "edited": false, "score": 0, "creation_date": 1465521064, "post_id": 37716193, "comment_id": 62947736, "body": "@Manpreet Komal, glad was able to help :) You can just mark my answer as right. That would be enough."}], "tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": true, "score": 5, "last_activity_date": 1465442097, "creation_date": 1465442097, "answer_id": 37716193, "question_id": 37712124, "link": "https://stackoverflow.com/questions/37712124/convert-curl-with-data-urlencode-to-ruby/37716193#37716193", "title": "Convert curl (with --data-urlencode) to ruby", "body": "<p>Mixpanel has it's <a href=\"https://github.com/mixpanel/mixpanel-ruby\" rel=\"noreferrer\">official ruby gem</a>\nI didn't actually work with it, but I assume it have all needed methods.</p>\n\n<p>But if you don't like to use it, you may use <a href=\"https://github.com/lostisland/faraday\" rel=\"noreferrer\">Faraday</a> an awesome HTTP client library for Ruby.</p>\n\n<p>I made a simple example with it. Please have a look:</p>\n\n<pre><code>class MixpanelClient\n  def initialize(url = \"https://mixpanel.com/api/2.0/jql\", api_key = \"ce08d087255d5ceec741819a57174ce5\")\n    @url = url\n    @api_key = api_key\n  end\n\n  def query_data\n    File.read(\"#{Rails.root}/lib/qry.js\")\n  end\n\n  def query_params\n    '{\"from_date\": \"2016-01-01\", \"to_date\": \"2016-01-07\"}'\n  end\n\n  def get_events\n    resp = Faraday.new(url: @url, ssl: { verify: false }) do |faraday|\n      faraday.request  :url_encoded\n      faraday.response :logger\n      faraday.adapter  Faraday.default_adapter\n      faraday.basic_auth(@api_key, \"\")\n    end.get do |req|\n      req.params['script'] = query_data\n      req.params['params'] = query_params\n    end\n\n    raise MixpanelError.new(\"Mixpanel error\") unless resp.status == 200\n    JSON.parse(resp.body)\n  end\nend\n\nclass MixpanelError &lt; StandardError; end\n</code></pre>\n\n<p>Here is the result:</p>\n\n<pre><code>[1] pry(main)&gt; m = MixpanelClient.new\n=&gt; #&lt;MixpanelClient:0x007fc1442d53b8 @api_key=\"ce08d087255d5ceec741819a57174ce5\", @url=\"https://mixpanel.com/api/2.0/jql\"&gt;\n[2] pry(main)&gt; m.get_events\nI, [2016-06-09T09:05:51.741825 #36920]  INFO -- : get https://mixpanel.com/api/2.0/jql?params=%7B%22from_date%22%3A+%222016-01-01%22%2C+%22to_date%22%3A+%222016-01-07%22%7D&amp;script=function+main%28%29%7B+return+Events%28params%29.groupBy%28%5B%22name%22%5D%2C+mixpanel.reducer.count%28%29%29+%7D\nD, [2016-06-09T09:05:51.741912 #36920] DEBUG -- request: Authorization: \"Basic Y2UwOGQwODcyNTVkNWNlZWM3NDE4MTlhNTcxNzRjZTU6\"\nUser-Agent: \"Faraday v0.9.2\"\nI, [2016-06-09T09:05:52.773172 #36920]  INFO -- Status: 200\nD, [2016-06-09T09:05:52.773245 #36920] DEBUG -- response: server: \"nginx/1.9.12\"\ndate: \"Thu, 09 Jun 2016 03:05:52 GMT\"\ncontent-type: \"application/json\"\ntransfer-encoding: \"chunked\"\nconnection: \"close\"\nvary: \"Accept-Encoding\"\ncache-control: \"no-cache, no-store\"\naccess-control-allow-methods: \"GET, POST, OPTIONS\"\naccess-control-allow-headers: \"X-PINGOTHER,Content-Type,MaxDataServiceVersion,DataServiceVersion,Authorization,X-Requested-With,If-Modified-Since\"\n=&gt; [{\"key\"=&gt;[\"Change Plan\"], \"value\"=&gt;186}, {\"key\"=&gt;[\"View Blog\"], \"value\"=&gt;278}, {\"key\"=&gt;[\"View Landing Page\"], \"value\"=&gt;1088}, {\"key\"=&gt;[\"login\"], \"value\"=&gt;1241}, {\"key\"=&gt;[\"purchase\"], \"value\"=&gt;359}, {\"key\"=&gt;[\"signup\"], \"value\"=&gt;116}]\n</code></pre>\n\n<p>A set <code>ssl: {verufy: false}</code> because Faraday need addtitional workaround to work with ssl certificates: <a href=\"https://github.com/lostisland/faraday/wiki/Setting-up-SSL-certificates\" rel=\"noreferrer\">https://github.com/lostisland/faraday/wiki/Setting-up-SSL-certificates</a></p>\n"}], "owner": {"reputation": 35, "user_id": 4686289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7ab0ffabf5166de954f9aa12654cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Manpreet Komal", "link": "https://stackoverflow.com/users/4686289/manpreet-komal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1175, "favorite_count": 1, "accepted_answer_id": 37716193, "answer_count": 1, "score": 3, "last_activity_date": 1465442097, "creation_date": 1465417057, "question_id": 37712124, "link": "https://stackoverflow.com/questions/37712124/convert-curl-with-data-urlencode-to-ruby", "title": "Convert curl (with --data-urlencode) to ruby", "body": "<p>I am trying to convert the following curl command to ruby using <code>net/http</code> but I haven't figured out how to pass in the <code>--data-urlencode script@files/jql/events.js</code> part of the command. </p>\n\n<pre><code>curl https://mixpanel.com/api/2.0/jql -u &lt;apikey&gt;: --data-urlencode script@files/jql/events.js\n</code></pre>\n\n<p>Using <code>net/http</code> I had the following...</p>\n\n<pre><code>uri = URI.parse(\"https://mixpanel.com/api/2.0/jql\")\nrequest = Net::HTTP::Get.new(uri)\nrequest.basic_auth(\"&lt;apikey&gt;\", \"\")\n\nresponse = Net::HTTP.start(uri.hostname, uri.port, use_ssl: uri.scheme == \"https\") do |http|\nhttp.request(request)\nend\n</code></pre>\n\n<p>Is there anyway to do this? If not within <code>net/http</code> then maybe using another gem?</p>\n"}, {"tags": ["ruby", "api", "rest", "grape-api"], "answers": [{"comments": [{"owner": {"reputation": 1634, "user_id": 5703217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Oj8Lb.jpg?s=128&g=1", "display_name": "Muhammad Faisal Iqbal", "link": "https://stackoverflow.com/users/5703217/muhammad-faisal-iqbal"}, "edited": false, "score": 0, "creation_date": 1479988617, "post_id": 37754500, "comment_id": 68794074, "body": "and how to input in field say :name? how can I give it mutilple values?"}], "tags": [], "owner": {"reputation": 923, "user_id": 166327, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9ad6aa1a4e60e467a13f5ba6aeebc28?s=128&d=identicon&r=PG", "display_name": "massinissa", "link": "https://stackoverflow.com/users/166327/massinissa"}, "is_accepted": true, "score": 7, "last_activity_date": 1465857442, "last_edit_date": 1465857442, "creation_date": 1465581426, "answer_id": 37754500, "question_id": 37712028, "link": "https://stackoverflow.com/questions/37712028/how-to-define-array-of-hashes-in-grape/37754500#37754500", "title": "How to define array of hashes in Grape?", "body": "<p>You can try to use \"group\" to indicate the type of your array elements. </p>\n\n<p>Example (updated): </p>\n\n<pre><code>params do\n  group :services, type: Array, desc: \"An array of services\" do\n    requires :name, type: String\n    requires :organization, type: String\n    requires :duration, type: Integer\n    ...\n  end\nend\nput '/test' do\n  s = []\n  params[:services].each do |service|\n    s &lt;&lt; service\n  end\n  return s\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8973, "user_id": 831564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b7b5cb565edb37aac67f053f64f0324f?s=128&d=identicon&r=PG", "display_name": "Marlin Pierce", "link": "https://stackoverflow.com/users/831564/marlin-pierce"}, "is_accepted": false, "score": 1, "last_activity_date": 1518528237, "creation_date": 1518528237, "answer_id": 48767857, "question_id": 37712028, "link": "https://stackoverflow.com/questions/37712028/how-to-define-array-of-hashes-in-grape/48767857#48767857", "title": "How to define array of hashes in Grape?", "body": "<p>With the answer from @massinissa, I was able to get all of the following to work:</p>\n\n<pre><code>params do\n  group :rules, type: Array do\n    requires :rule_id, type: String\n    requires :rule_content, type: String\n  end\nend\n\nparams do\n  requires :rules, type: Array do\n    requires :rule_id, type: String\n    requires :rule_content, type: String\n  end\nend\n\nparams do\n  requires :rules, type: Array[Hash]\nend\n</code></pre>\n\n<p>However, by default, the JQuery ajax function sends data as a query string in a format that Grape could not understand.  So I had to set <code>contentType = 'application/json'</code> and use</p>\n\n<pre><code>`data = JSON.stringify({rules: [{rule_id: '1', rule_content: 'blah'}]})`\n</code></pre>\n"}], "owner": {"reputation": 4631, "user_id": 1080046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/trbrs.png?s=128&g=1", "display_name": "Eki Eqbal", "link": "https://stackoverflow.com/users/1080046/eki-eqbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2317, "favorite_count": 1, "accepted_answer_id": 37754500, "answer_count": 2, "score": 7, "last_activity_date": 1518528237, "creation_date": 1465416667, "question_id": 37712028, "link": "https://stackoverflow.com/questions/37712028/how-to-define-array-of-hashes-in-grape", "title": "How to define array of hashes in Grape?", "body": "<p>I'm using Ember as my front-end and Grape API to serve my API. </p>\n\n<p>The front-end send something like: </p>\n\n<pre><code>{\n  \"service\"=&gt;{\n    \"name\"=&gt;\"Name\",\n    \"duration\"=&gt;\"30\",\n    \"user\"=&gt;nil,\n    \"organization\"=&gt;\"org\",\n    \"category\"=&gt;nil,\n    \"description\"=&gt;\"description\",\n    \"disabled\"=&gt;true,\n    \"color\"=&gt;nil,\n    \"availabilities\"=&gt;[\n      {\n        \"day\"=&gt;\"Saturday\",\n        \"enabled\"=&gt;false,\n        \"timeSlots\"=&gt;[\n          {\n            \"startAt\"=&gt;\"09:00 AM\",\n            \"endAt\"=&gt;\"05:00 PM\"\n          }\n        ]\n      },\n      {\n        \"day\"=&gt;\"Sunday\",\n        \"enabled\"=&gt;false,\n        \"timeSlots\"=&gt;[\n          {\n            \"startAt\"=&gt;\"09:00 AM\",\n            \"endAt\"=&gt;\"05:00 PM\"\n          }\n        ]\n      },\n      {\n        \"day\"=&gt;\"Monday\",\n        \"enabled\"=&gt;true,\n        \"timeSlots\"=&gt;[\n          {\n            \"startAt\"=&gt;\"09:00 AM\",\n            \"endAt\"=&gt;\"05:00 PM\"\n          },\n          {\n            \"startAt\"=&gt;\"05:00 AM\",\n            \"endAt\"=&gt;\"09:00 PM\"\n          },\n          {\n            \"startAt\"=&gt;\"05:00 AM\",\n            \"endAt\"=&gt;\"09:00 PM\"\n          }\n        ]\n      },\n      {\n        \"day\"=&gt;\"Tuesday\",\n        \"enabled\"=&gt;true,\n        \"timeSlots\"=&gt;[\n          {\n            \"startAt\"=&gt;\"09:00 AM\",\n            \"endAt\"=&gt;\"05:00 PM\"\n          }\n        ]\n      },\n      {\n        \"day\"=&gt;\"Wednesday\",\n        \"enabled\"=&gt;true,\n        \"timeSlots\"=&gt;[\n          {\n            \"startAt\"=&gt;\"09:00 AM\",\n            \"endAt\"=&gt;\"05:00 PM\"\n          }\n        ]\n      },\n      {\n        \"day\"=&gt;\"Thursday\",\n        \"enabled\"=&gt;true,\n        \"timeSlots\"=&gt;[\n          {\n            \"startAt\"=&gt;\"09:00 AM\",\n            \"endAt\"=&gt;\"05:00 PM\"\n          }\n        ]\n      },\n      {\n        \"day\"=&gt;\"Friday\",\n        \"enabled\"=&gt;true,\n        \"timeSlots\"=&gt;[\n          {\n            \"startAt\"=&gt;\"09:00 AM\",\n            \"endAt\"=&gt;\"05:00 PM\"\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>And I'm struggling to implement Grape api interface to receive the payload, I ended up with something like:</p>\n\n<pre><code>  resource :services do\n    params do\n      requires :service, type: Hash do\n        requires :name, type: String\n        requires :organization, type: String\n        requires :duration, type: Integer\n        requires :category, type: String\n        optional :color, type: String\n        optional :description, type: String\n        optional :disabled, type: Boolean\n        requires :availabilities, type: Array do\n          requires :day, type: String\n          optional :enabled, type: Boolean\n          optional :timeSlots, type: Array do\n            requires :startAt, type: Time\n            requires :endtAt, type: Time\n          end\n        end\n      end\n    end\n    post do\n      puts params\n    end\n  end\n</code></pre>\n\n<p>But with no luck as I'm getting the following error: </p>\n\n<pre><code>ERROR -- service[availabilities][0][timeSlots][0][endtAt] is missing\n</code></pre>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1465416710, "post_id": 37711961, "comment_id": 62897806, "body": "You need to iterate over the array of objects, then iterate over the array of <code>msr</code>, looking for each <code>key</code> that matches."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 6436063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b6773635dee3bd3f2540e2e9e7a1836b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Wu", "link": "https://stackoverflow.com/users/6436063/jim-wu"}, "edited": false, "score": 0, "creation_date": 1465418266, "post_id": 37712086, "comment_id": 62898607, "body": "Not suggesting that your suggestion is wrong, but I think I&#39;ve got another error that prevents me from checking if this way works. Hopefully I can get back to this."}, {"owner": {"reputation": 2256, "user_id": 461823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95715a2c76d47d0006c0e512dbcc6e0?s=128&d=identicon&r=PG", "display_name": "MrWillihog", "link": "https://stackoverflow.com/users/461823/mrwillihog"}, "reply_to_user": {"reputation": 149, "user_id": 6436063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b6773635dee3bd3f2540e2e9e7a1836b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Wu", "link": "https://stackoverflow.com/users/6436063/jim-wu"}, "edited": false, "score": 0, "creation_date": 1465419109, "post_id": 37712086, "comment_id": 62899057, "body": "No, you&#39;re right. My answer wont work as <code>msr</code> is an array, not a hash. I&#39;ll update with a better answer."}, {"owner": {"reputation": 149, "user_id": 6436063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b6773635dee3bd3f2540e2e9e7a1836b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Wu", "link": "https://stackoverflow.com/users/6436063/jim-wu"}, "edited": false, "score": 0, "creation_date": 1465484162, "post_id": 37712086, "comment_id": 62930170, "body": "Yes! that&#39;s exactly what I need, got it down with some tweaks. Thank you so much! Just a follow up, how do I make it so <code>res = h</code> or some other <code>res =</code> such that res is an array containing the whole api call and not a string(?), otherwise the <code>any?</code> function won&#39;t work."}], "tags": [], "owner": {"reputation": 2256, "user_id": 461823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95715a2c76d47d0006c0e512dbcc6e0?s=128&d=identicon&r=PG", "display_name": "MrWillihog", "link": "https://stackoverflow.com/users/461823/mrwillihog"}, "is_accepted": true, "score": 1, "last_activity_date": 1465420030, "last_edit_date": 1465420030, "creation_date": 1465416915, "answer_id": 37712086, "question_id": 37711961, "link": "https://stackoverflow.com/questions/37711961/ruby-parsing-a-json-response-for-an-array-of-values/37712086#37712086", "title": "Ruby, Parsing a JSON response for an array of values", "body": "<p>You need to do 2 things. Firstly, you're being returned an array and you're only interested in a subset of the elements. This is a common pattern that is solved by a filter, or <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-select\" rel=\"nofollow\"><code>select</code></a> in Ruby. Secondly, the condition by which you wish to select these elements also depends on the values of another array, which you need to filter using a different technique. You could attempt it like this:</p>\n\n<pre><code>res = [\n  {\n    \"id\": 10008,\n    \"name\": \"vpop-fms-inventory-ws-client\",\n    \"msr\": [\n      {\n        \"key\": \"blocker_violations\",\n        \"val\": 123,\n        \"frmt_val\": \"0\"\n      }\n    ]\n  },\n  {\n    \"id\": 10008,\n    \"name\": \"vpop-fms-inventory-ws-client\",\n    \"msr\": [\n      {\n        \"key\": \"safe\",\n        \"val\": 0,\n        \"frmt_val\": \"0\"\n      }\n    ]\n  }\n]\n\n# define a lambda function that we will use later on to filter out the blocker violations\nviolation = -&gt; (h) { h[:key] == 'blocker_violations' }\n\n# Select only those objects who contain any msr with a key of     blocker_violations\nviolations = res.select {|h1| h1[:msr].any? &amp;violation }\n\n# Which msr value should we take? Here I just take the first.\nvalues = violations.map {|v| v[:msr].first[:val] }\n</code></pre>\n\n<p>The problem you may have with this code is that <code>msr</code> is an array. So theoretically, you could end up with 2 objects in <code>msr</code>, one that is a blocker violation and one that is not. You have to decide how you handle that. In my example, I include it if it has a single blocker violation through the use of <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-any-3F\" rel=\"nofollow\"><code>any?</code></a>. However, you may wish to only include them if all <code>msr</code> objects are blocker violations. You can do this via the <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-all-3F\" rel=\"nofollow\"><code>all?</code></a> method.</p>\n\n<p>The second problem you then face is, which value to return? If there are multiple blocker violations in the <code>msr</code> object, which value do you choose? I just took the <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-first\" rel=\"nofollow\">first</a> one - but this might not work for you.</p>\n\n<p>Depending on your requirements, my example might work or you might need to adapt it.</p>\n\n<p>Also, if you've never come across the lambda syntax before, you can read more about it <a href=\"http://www.eriktrautman.com/posts/ruby-explained-blocks-procs-and-lambdas-aka-closures\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 149, "user_id": 6436063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b6773635dee3bd3f2540e2e9e7a1836b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Wu", "link": "https://stackoverflow.com/users/6436063/jim-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1873, "favorite_count": 0, "accepted_answer_id": 37712086, "answer_count": 1, "score": 0, "last_activity_date": 1465420030, "creation_date": 1465416457, "last_edit_date": 1465417384, "question_id": 37711961, "link": "https://stackoverflow.com/questions/37711961/ruby-parsing-a-json-response-for-an-array-of-values", "title": "Ruby, Parsing a JSON response for an array of values", "body": "<p>I'm new to ruby so please excuse any ignorance I may bear. I was wondering how to parse a JSON reponse for every value belonging to a specific key. The response is in the format,</p>\n\n<pre><code>[\n  {\n    \"id\": 10008,\n    \"name\": \"vpop-fms-inventory-ws-client\",\n    \"msr\": [\n      {\n        \"key\": \"blocker_violations\",\n        \"val\": 0,\n        \"frmt_val\": \"0\"\n      },\n    ]\n  },\n  {\n    \"id\": 10422,\n    \"name\": \"websample Maven Webapp\",\n    \"msr\": [\n      {\n        \"key\": \"blocker_violations\",\n        \"val\": 0,\n        \"frmt_val\": \"0\"\n      }...\n</code></pre>\n\n<p>There's some other entries in the response, but for the sake of not having a huge block of code, I've shortened it.The code I've written is:</p>\n\n<pre><code>require 'uri'\nrequire 'net/http'\nrequire 'JSON'\nurl = URI({my url})\n\n    http = Net::HTTP.new(url.host, url.port)\n\n    request = Net::HTTP::Get.new(url)\n    request[\"cache-control\"] = 'no-cache'\n    request[\"postman-token\"] = '69430784-307c-ea1f-a488-a96cdc39e504'\n\n    response = http.request(request)\n    parsed = response.read_body\n\n    h = JSON.parse(parsed)\n\n    num = h[\"msr\"].find {|h1| h1['key']=='blocker_violations'}['val']\n</code></pre>\n\n<p>I am essentially looking for the val for each blocker violation (the json reponse contains hundreds of entries, so im expecting hundreds of blocker values). I had hoped num would contain an array of all the 'val's. If you have any insight in this, it would be of great help!</p>\n\n<p>EDIT! I'm getting a console output of</p>\n\n<pre><code>scheduler caught exception:\nno implicit conversion of String into Integer\nC:/dashing/test_board/jobs/issue_types.rb:20:in `[]'\nC:/dashing/test_board/jobs/issue_types.rb:20:in `block (2 levels) in &lt;top (requi\nred)&gt;'\nC:/dashing/test_board/jobs/issue_types.rb:20:in `select'\n</code></pre>\n\n<p>I suspect that might have too much to do with the question, but some help is appreciated!</p>\n"}, {"tags": ["ruby", "web-scraping", "watir"], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 3452429, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd50675537c3e1d7602261d0641c7329?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3452429/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1465518804, "creation_date": 1465518804, "answer_id": 37738250, "question_id": 37711787, "link": "https://stackoverflow.com/questions/37711787/watir-web-scraper-sometimes-works-and-sometimes-doesnt/37738250#37738250", "title": "Watir web scraper sometimes works and sometimes doesn&#39;t", "body": "<p>So it turns out that it was a timing issue.  Eventually I got it to work through: </p>\n\n<pre><code>for a in as\n    a.wait_until_present\n    if a.when_present\n        name = a.text\n        url = a.attribute_value('href')\n    end\nend\n</code></pre>\n\n<p>This sometimes worked and sometimes didn't.  It stopped a few times in the middle of parsing my data at random locations.  Sigh, I eventually got the data I needed though.</p>\n"}], "owner": {"reputation": 127, "user_id": 3452429, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd50675537c3e1d7602261d0641c7329?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3452429/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465518804, "creation_date": 1465415844, "last_edit_date": 1465487767, "question_id": 37711787, "link": "https://stackoverflow.com/questions/37711787/watir-web-scraper-sometimes-works-and-sometimes-doesnt", "title": "Watir web scraper sometimes works and sometimes doesn&#39;t", "body": "<pre><code>b = Watir::Browser.new :firefox\nurl_input = \"www.url.com\"\nb.goto url_input\nb.driver.manage.timeouts.implicit_wait = 100\n\nh3s = b.h3s class:\"class-name\"\n\nfor h3 in h3s\n    h3.wait_until_present\n\n    as = h3.as\n\n    for a in as\n        # puts a.text\n        name = h3.text\n        puts name\n    end\nend\n</code></pre>\n\n<p>The code sometimes prints the expected name for all of the h3 tags, but sometimes it when I run the program from Terminal, it just doesn't print anything and eventually has an error that begins like this:</p>\n\n<blockquote>\n  <p>\"/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/net/protocol.rb:158:in `rbuf_fill': Net::ReadTimeout (Net::ReadTimeout)\".  </p>\n</blockquote>\n\n<p>It never works when I try to also print a.text or when I try to get the url of the a tag by doing <code>url = a.attribute_value('href')</code> and print that.  It seems odd to me that it sometimes runs and sometimes doesn't.  I suspect it has something to do with the timing, but I don't understand how Watir's timing works at all.</p>\n"}, {"tags": ["android", "ios", "ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1465809269, "post_id": 37769331, "comment_id": 63038082, "body": "Yes, that is exactly the problem. 1. how do you get the session key for a certain user in Rails and Devise. and 2. How do you pass this key over into the web frame."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 4, "last_activity_date": 1465687146, "creation_date": 1465687146, "answer_id": 37769331, "question_id": 37711560, "link": "https://stackoverflow.com/questions/37711560/mobile-app-webframe-authentication-with-rails-devise/37769331#37769331", "title": "Mobile App webframe Authentication with Rails Devise", "body": "<p>If you want to put your authentication form on the mobile UI and pass the credentials over to the web frame, you need a way to pass data from the mobile app to the web frame.</p>\n\n<p>How you accomplish this depends on what platform you're building on. I'm not really a mobile developer so I don't know for certain how difficult / easy these options are:</p>\n\n<ol>\n<li>When opening the web frame, instantiate it with session data</li>\n<li>Find a way to call methods on the client from the web frame. Something like <code>getSessionData</code>.</li>\n<li>You could generate a fingerprint for the web frame, have the mobile UI send this data to the server, and then have the web frame authenticate with the server by sending the fingerprint. </li>\n</ol>\n\n<p>Again, I'm not entirely sure how possible all these options are.  </p>\n"}, {"comments": [{"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1466022798, "post_id": 37839410, "comment_id": 63150804, "body": "The idea is having the mobile application open a webframe, that acts like a normal site, but within the app. So the whole point of this approach is having a mechanism that does not need rewriting the entire logic of the server, just a way to manually pass on the session cookie to the webframe, the same thing that happens on normal browsers with normal logins."}], "tags": [], "owner": {"reputation": 474, "user_id": 4280391, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0c72e42508a9f525a0b8c395d02f97e4?s=128&d=identicon&r=PG&f=1", "display_name": "Raynor Kuang", "link": "https://stackoverflow.com/users/4280391/raynor-kuang"}, "is_accepted": false, "score": 6, "last_activity_date": 1466003738, "creation_date": 1466003738, "answer_id": 37839410, "question_id": 37711560, "link": "https://stackoverflow.com/questions/37711560/mobile-app-webframe-authentication-with-rails-devise/37839410#37839410", "title": "Mobile App webframe Authentication with Rails Devise", "body": "<p>You might want to consider using <a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"noreferrer\">Devise Token Auth</a> and treating your mobile application like just another webapp that requests permission from your main site. DTA is particularly nice since it takes care of managing the session tokens (renewing/expiring) and passing them onto the app requiring access. The issue is overriding your session controllers so that it automatically logs in after you already log in on the mobile app (or just rewriting your log in so it occurs in conjunction with the Rails site, rather than before). Considering you're already using Devise, this may also be more refactoring than you'd like.</p>\n"}, {"comments": [{"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1466517152, "post_id": 37941361, "comment_id": 63341349, "body": "I have an idea about how token authentication works, basically the system needs to be able to have a token in the head of the url as a parameter instead of a session key inside a browser cookie. But is there a way to get the session key manually inside rails and send it to the mobile app so that it could be set inside of its webframe?"}, {"owner": {"reputation": 1376, "user_id": 2539916, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d6e05c6086fe810c5d1e552af302461?s=128&d=identicon&r=PG", "display_name": "Alex Tonkonozhenko", "link": "https://stackoverflow.com/users/2539916/alex-tonkonozhenko"}, "reply_to_user": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1466519213, "post_id": 37941361, "comment_id": 63343039, "body": "You can deal this issue in such way: users signs in via a browser and sends to your app with deep linking and token. Using this token you can make authenticated requests."}, {"owner": {"reputation": 1376, "user_id": 2539916, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d6e05c6086fe810c5d1e552af302461?s=128&d=identicon&r=PG", "display_name": "Alex Tonkonozhenko", "link": "https://stackoverflow.com/users/2539916/alex-tonkonozhenko"}, "reply_to_user": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1466519285, "post_id": 37941361, "comment_id": 63343094, "body": "If you need the session in a webview, user must login there."}, {"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1466542383, "post_id": 37941361, "comment_id": 63357166, "body": "So basically the app gets a &quot;single use&quot; sign in encrypted token on internal sign in (example /simple_sign_in?token=sdfsdfsdfsf), and clicking on that link (opening it in webview) will create a normal session anywhere I want?"}, {"owner": {"reputation": 1376, "user_id": 2539916, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d6e05c6086fe810c5d1e552af302461?s=128&d=identicon&r=PG", "display_name": "Alex Tonkonozhenko", "link": "https://stackoverflow.com/users/2539916/alex-tonkonozhenko"}, "reply_to_user": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1466600429, "post_id": 37941361, "comment_id": 63383311, "body": "You cannot create session manually. You can create it in webview only if user signs in there."}, {"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1466619711, "post_id": 37941361, "comment_id": 63397427, "body": "It is possible to manually trigger a session in devise with sign_in method. Authentication can be handled via a link with an encrypted token."}], "tags": [], "owner": {"reputation": 1376, "user_id": 2539916, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d6e05c6086fe810c5d1e552af302461?s=128&d=identicon&r=PG", "display_name": "Alex Tonkonozhenko", "link": "https://stackoverflow.com/users/2539916/alex-tonkonozhenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1466503410, "creation_date": 1466503410, "answer_id": 37941361, "question_id": 37711560, "link": "https://stackoverflow.com/questions/37711560/mobile-app-webframe-authentication-with-rails-devise/37941361#37941361", "title": "Mobile App webframe Authentication with Rails Devise", "body": "<p>You should use token authorization and Android deep linking. It will allow you to login in the web browser and send a token to your app via deep linking.</p>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "is_accepted": true, "score": 0, "last_activity_date": 1467717856, "creation_date": 1467717856, "answer_id": 38202237, "question_id": 37711560, "link": "https://stackoverflow.com/questions/37711560/mobile-app-webframe-authentication-with-rails-devise/38202237#38202237", "title": "Mobile App webframe Authentication with Rails Devise", "body": "<p>OK, so I decided to make a webframe solution as follows, basically you post the login and password to a certain sign_in method specially designed to generate one-time sign in tokens for the application. You need two methods in the system to do that:</p>\n\n<p>routes.rb</p>\n\n<pre><code>devise_scope :user do\n  get \"sign_in_with_token/:token\" =&gt; \"sessions#sign_in_with_token\"\n  post \"get_login_token\" =&gt; \"sessions#get_login_token\"\nend\n</code></pre>\n\n<p>sessions_controller.rb (don't forget to add the method that increases the failed_sign_in_count on wrong password, otherwise that can allow brute force attacks)</p>\n\n<pre><code>def get_login_token\n  user = User.find_by_email(sign_in_params[\"login\"])\n  password = sign_in_params[\"password\"]\n  if user and user.valid_password?(password)\n    token = SecureRandom.hex(16)\n    user.update_attribute(:authentication_token, token)\n    render json: {token: token}, status: 200\n  else\n    render json: {error: \"error\"}, status: 403\n  end\nend\n</code></pre>\n\n<p>and the method to sign in with that token</p>\n\n<pre><code>def sign_in_with_token\n  @user = User.where(authentication_token: params[:token], email: Base64.decode64(params[:email])).first\n  if @user\n    @user.update_attribute(:authentication_token, nil)\n    sign_in(@user, bypass: true)\n  end\n  redirect_to '/' # or user_root_url\nend\n</code></pre>\n\n<p>That way the mobile app will work like this:</p>\n\n<ol>\n<li>use the generic web frame to send ajax requests to the server and get that token for the user email if password is correct.</li>\n<li>make a /sign_in_with_token/#{token from ajax}?email=#{base46 encoded email} link inside the app.</li>\n<li>open that link inside the web frame and use the app as though you were logged in normally. Now the app can save email and password locally and use that logic to get the token again for another session. Later logging in will also be able to set the app id so that push notifications can be sent.</li>\n</ol>\n\n<p>Appreciate any feedback or criticism on this solution.</p>\n"}], "owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1033, "favorite_count": 1, "accepted_answer_id": 38202237, "answer_count": 4, "score": 11, "last_activity_date": 1467717856, "creation_date": 1465415071, "question_id": 37711560, "link": "https://stackoverflow.com/questions/37711560/mobile-app-webframe-authentication-with-rails-devise", "title": "Mobile App webframe Authentication with Rails Devise", "body": "<p>I am currently working on implementing a mobile app for our site that uses Ruby on Rails and Devise. The idea here is, at first, create a mobile login form that on successful login opens a web frame that is authenticated and allows the normal use of the (mobile optimised) site. Theoretically that should be possible.\nI am having trouble with the following issues:</p>\n\n<ol>\n<li><p>How do you get the pure session key for the user session via a json request? What methods can be used to manually generate it from devise, something that the <code>sign_in(:user, user)</code> method does?</p></li>\n<li><p>Is it even possible to take that key and put it into the browser cookie the way it normally happens in devise, but on the mobile side?</p></li>\n</ol>\n\n<p>I know that this is not the standard method of making mobile applications for the site, but I believe it should be possible.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4745918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/545978c7bc0d64797b58dd81dbb8a8f2?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Sharma", "link": "https://stackoverflow.com/users/4745918/yash-sharma"}, "edited": false, "score": 0, "creation_date": 1465445761, "post_id": 37711622, "comment_id": 62906463, "body": "I have already generated the necessary migration and I have added my schema in the question details. Please check it once. The images exist in that path but they are not visible in the site."}, {"owner": {"reputation": 423, "user_id": 4927297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb176fbb9287dfdebbc6aec13597564?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4927297/alex"}, "reply_to_user": {"reputation": 15, "user_id": 4745918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/545978c7bc0d64797b58dd81dbb8a8f2?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Sharma", "link": "https://stackoverflow.com/users/4745918/yash-sharma"}, "edited": false, "score": 0, "creation_date": 1465487848, "post_id": 37711622, "comment_id": 62932963, "body": "@YashSharma Did you add &quot;movie_index: &quot;300x300&gt;&quot; as I suggested?"}, {"owner": {"reputation": 15, "user_id": 4745918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/545978c7bc0d64797b58dd81dbb8a8f2?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Sharma", "link": "https://stackoverflow.com/users/4745918/yash-sharma"}, "edited": false, "score": 0, "creation_date": 1465489139, "post_id": 37711622, "comment_id": 62933768, "body": "Thank you so much. This solved the problem. Thanks a lot!!"}], "tags": [], "owner": {"reputation": 423, "user_id": 4927297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb176fbb9287dfdebbc6aec13597564?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4927297/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1465415254, "creation_date": 1465415254, "answer_id": 37711622, "question_id": 37711365, "link": "https://stackoverflow.com/questions/37711365/rails-paperclip-images-not-showing-up-in-on-cloud9-server/37711622#37711622", "title": "Rails Paperclip images not showing up in on cloud9 server", "body": "<p>You seem to be declaring a view helper for sizing the image (:movie_index) that is not defined at the Movie model.</p>\n\n<p>You need to declare the helper and the size for :movie_index at the model as such:</p>\n\n<pre><code>class Movie &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :category\n    has_attached_file :movie_img, styles: { movie_index: \"300x300&gt;\" medium: \"250x350&gt;\", thumb: \"325x475&gt;\" }, default_url: \"/images/style/missing.png\"\n    validates_attachment_content_type :movie_img, content_type: '/\\Aimage\\/.*\\Z/'\nend\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Make sure you have already generated the necessary migration:</p>\n\n<pre><code>rails g paperclip Movie movie_img\n</code></pre>\n\n<p>Be sure to read the <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow\">Paperclip documentation</a>. </p>\n"}], "owner": {"reputation": 15, "user_id": 4745918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/545978c7bc0d64797b58dd81dbb8a8f2?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Sharma", "link": "https://stackoverflow.com/users/4745918/yash-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 37711622, "answer_count": 1, "score": 0, "last_activity_date": 1465445655, "creation_date": 1465414391, "last_edit_date": 1465445655, "question_id": 37711365, "link": "https://stackoverflow.com/questions/37711365/rails-paperclip-images-not-showing-up-in-on-cloud9-server", "title": "Rails Paperclip images not showing up in on cloud9 server", "body": "<p>I am using paperclip to upload images to a rails application on cloud9 virtual environment (ubuntu).  There is a Movie model and each movie object has an image associated to it.</p>\n\n<pre><code>class Movie &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :category\n    has_attached_file :movie_img, styles: { medium: \"250x350&gt;\", thumb: \"325x475&gt;\" }, default_url: \"/images/style/missing.png\"\n    validates_attachment_content_type :movie_img, content_type: '/\\Aimage\\/.*\\Z/'\nend\n</code></pre>\n\n<p>The view looks like this</p>\n\n<pre><code>    &lt;% @movies.each do |movie| %&gt;\n            &lt;%= image_tag movie.movie_img.url(:movie_index), class: \"movie\" %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>But images are not showing up on the site.</p>\n\n<p>The path to images in the generated html looks like this</p>\n\n<blockquote>\n  <p>system/movies/movie_imgs/000/000/010/movie_index/fileName.jpg?1465401579\n  The images are present in the actual directory as I can see from the file explorer of Cloud9.</p>\n</blockquote>\n\n<p>When I open this image address it shows the following error.</p>\n\n<blockquote>\n  <p>No route matches [GET] \"/system/movies/movie_imgs/000/000/011/movie_index/fileName.png\"</p>\n</blockquote>\n\n<p>Also in the config/environments/development.rb I have written the following line of code</p>\n\n<pre><code>  Paperclip.options[:command_path] = \"/usr/bin/\"\n</code></pre>\n\n<p>because when I enter which convert in the terminal, the following shows up.</p>\n\n<blockquote>\n  <p>/usr/bin/convert</p>\n</blockquote>\n\n<p>Where am I going wrong? How can I make the images appear in the server?</p>\n\n<p><strong>EDIT</strong>\nI have also generate necessary migration and my movie table looks like this.</p>\n\n<pre><code>create_table \"movies\", force: :cascade do |t|\n    t.string   \"title\"\n    t.text     \"description\"\n    t.string   \"director\"\n    t.date     \"release_date\"\n    t.datetime \"created_at\",             null: false\n    t.datetime \"updated_at\",             null: false\n    t.integer  \"user_id\"\n    t.integer  \"category_id\"\n    t.string   \"movie_img_file_name\"\n    t.string   \"movie_img_content_type\"\n    t.integer  \"movie_img_file_size\"\n    t.datetime \"movie_img_updated_at\"\n</code></pre>\n\n<p>end</p>\n\n<p>Still images are not showing up.</p>\n"}, {"tags": ["ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1465418436, "post_id": 37710412, "comment_id": 62898695, "body": "Doesn&#39;t get much simpler than that. Be careful when using reserved names like <code>method</code> though."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 7, "last_activity_date": 1465418616, "last_edit_date": 1465418616, "creation_date": 1465411264, "answer_id": 37710412, "question_id": 37710383, "link": "https://stackoverflow.com/questions/37710383/methods-that-take-strings/37710412#37710412", "title": "Methods that take strings", "body": "<pre><code>def i_times_s(s, i)\n  i.times { puts s }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "is_accepted": false, "score": 0, "last_activity_date": 1465490150, "creation_date": 1465490150, "answer_id": 37731657, "question_id": 37710383, "link": "https://stackoverflow.com/questions/37710383/methods-that-take-strings/37731657#37731657", "title": "Methods that take strings", "body": "<p>Just another way to look at things:</p>\n\n<pre><code>def string_times(string,integer)\n  for i in 0...integer\n    puts string\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6441963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r71Tzf697rM/AAAAAAAAAAI/AAAAAAAAB64/WnMG6iY0BBw/photo.jpg?sz=128", "display_name": "Vikram Kannappan", "link": "https://stackoverflow.com/users/6441963/vikram-kannappan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1465490150, "creation_date": 1465411161, "last_edit_date": 1465417244, "question_id": 37710383, "link": "https://stackoverflow.com/questions/37710383/methods-that-take-strings", "title": "Methods that take strings", "body": "<p>What is the simplest way to create a method that takes a string and an integer <code>x</code> and prints the input string <code>x</code> times?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "email", "actionmailer"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 1, "creation_date": 1465409592, "post_id": 37709729, "comment_id": 62893779, "body": "which environment you are trying with, have you seen the logs if the mails are being created and not delivered"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "reply_to_user": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1465409818, "post_id": 37709729, "comment_id": 62893931, "body": "I am running in the development environment, and according to the logs the emails are being created"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1465410822, "post_id": 37709729, "comment_id": 62894514, "body": "are you getting any Net::SMTPAuthenticationError or any error related to mailer credentials you are providing"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "reply_to_user": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1465411632, "post_id": 37709729, "comment_id": 62894959, "body": "I have just added what I can see in the log"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1465415769, "post_id": 37709729, "comment_id": 62897238, "body": "@BenSmith You might want to change your email password though..."}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1465416524, "post_id": 37709729, "comment_id": 62897683, "body": "@HolgerJust thank you so much! I missed that one"}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1465410242, "post_id": 37710051, "comment_id": 62894146, "body": "Thanks for your answer, I have just tried this and it didn&#39;t make a difference"}, {"owner": {"reputation": 146, "user_id": 4380628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5e106d4f23348bc699d6644f7d9745?s=128&d=identicon&r=PG&f=1", "display_name": "Sourabh Ukkalgaonkar", "link": "https://stackoverflow.com/users/4380628/sourabh-ukkalgaonkar"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 1, "creation_date": 1465410948, "post_id": 37710051, "comment_id": 62894585, "body": "You may use this  config.action_mailer.perform_deliveries = true. after that you able to see any error for delivery reason on your email account. and one more thing you need to set your email account for low secure apps also for sending mail."}], "tags": [], "owner": {"reputation": 146, "user_id": 4380628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5e106d4f23348bc699d6644f7d9745?s=128&d=identicon&r=PG&f=1", "display_name": "Sourabh Ukkalgaonkar", "link": "https://stackoverflow.com/users/4380628/sourabh-ukkalgaonkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1465410062, "creation_date": 1465410062, "answer_id": 37710051, "question_id": 37709729, "link": "https://stackoverflow.com/questions/37709729/ruby-on-rails-send-email-when-creating-a-record-doesnt-work/37710051#37710051", "title": "Ruby on Rails: Send Email when Creating a Record Doesn&#39;t Work", "body": "<p>I think you need to use deliver_now instead of deliver.</p>\n\n<pre><code>UserMailer.welcome_email.deliver_now\n</code></pre>\n\n<p>Hope this will work for you.</p>\n"}, {"comments": [{"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1465410493, "post_id": 37710124, "comment_id": 62894304, "body": "Does it matter where in <code>development.rb</code> the line is added?"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1465410635, "post_id": 37710124, "comment_id": 62894384, "body": "I would suggest to run the app in production environment and test this. confirm if the mail was created in production logs and also check the credentials directly if they are working."}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1465411322, "post_id": 37710124, "comment_id": 62894792, "body": "I have just added <code>:domain               =&gt; &quot;gmail.com&quot;,</code> into <code>production.rb</code> and <code>domain:                &quot;gmail.com&quot;,</code> into <code>development.rb</code> but neither has worked"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1465411652, "post_id": 37710124, "comment_id": 62894973, "body": "I have just added what I can see in the log into question"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1465411938, "post_id": 37710124, "comment_id": 62895165, "body": "The code and logs seem proper. If you are  running in production env and mails are still not delivered, check for the setting with the mailer service provider you are using. Sometime you have to give access for third party apps to use."}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1465413011, "post_id": 37710124, "comment_id": 62895781, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114158/discussion-between-bijendra-and-ben-smith\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "is_accepted": false, "score": 0, "last_activity_date": 1465410958, "last_edit_date": 1465410958, "creation_date": 1465410244, "answer_id": 37710124, "question_id": 37709729, "link": "https://stackoverflow.com/questions/37709729/ruby-on-rails-send-email-when-creating-a-record-doesnt-work/37710124#37710124", "title": "Ruby on Rails: Send Email when Creating a Record Doesn&#39;t Work", "body": "<p>Mails are not delivered by default in development environment, Add this  </p>\n\n<pre><code>      `config.action_mailer.perform_deliveries = true`\n</code></pre>\n\n<p>in your development.rb to perform deliveries. if you are using Rails 4, use </p>\n\n<pre><code> Notifier.welcome(User.first).deliver_now\n</code></pre>\n\n<p>As per the documentation, you can also use </p>\n\n<pre><code> Notifier.welcome(User.first).deliver_now!  \n</code></pre>\n\n<p>which Delivers an email without checking perform_deliveries and raise_delivery_errors, so use with caution.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I see domain missing from your mailer setting in production.rb, use </p>\n\n<pre><code> :domain               =&gt; \"gmail.com\",\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465415832, "creation_date": 1465408903, "last_edit_date": 1465415832, "question_id": 37709729, "link": "https://stackoverflow.com/questions/37709729/ruby-on-rails-send-email-when-creating-a-record-doesnt-work", "title": "Ruby on Rails: Send Email when Creating a Record Doesn&#39;t Work", "body": "<p>I'm wondering if someone could help me, within my Ruby on Rails application I am trying to get the system to send an email from a specific email address (Gmail) to a specific email address (Gmail), but for some reason the email does not send - but there is no error message.</p>\n\n<p>Within my controller I have the following code to send an email when a new record is saved:</p>\n\n<pre><code>def create\n    @email = Email.new(email_params)\n    if @email.save\n   UserMailer.welcome_email.deliver\n        redirect_to @email\n    else\n        render 'new'\n    end\nend\n</code></pre>\n\n<p>This should call this Mailer:</p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  default from: 'abc@123.com'\n\n  def welcome_email()\n     mail(to: '123@abc.com', subject: 'Welcome to My Awesome Site')\n  end\nend\n</code></pre>\n\n<p>My Application Mailer is as follows:</p>\n\n<pre><code>class ApplicationMailer &lt; ActionMailer::Base\n  default from: \"abc@123.com\"\n  layout 'mailer'\nend\n</code></pre>\n\n<p>I then have the <code>welcome_email.html.erb</code>:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content='text/html; charset=UTF-8' http-equiv='Content-Type' /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Welcome to Thor Cinemas,!&lt;/h1&gt;\n     &lt;p&gt;\n      You have successfully signed up to Thor Cinemas,\n      your username is: .&lt;br&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      To login to the site, just follow this link: &lt;%= @url %&gt;.\n    &lt;/p&gt;\n    &lt;p&gt;Thanks for joining and have a great day!&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And a similar text version of the above.</p>\n\n<p>For some reason this isn't working, I have the following in <code>$RAILS_ENV</code> (in <code>\\config\\environments</code>):</p>\n\n<pre><code>config.action_mailer.delivery_method = :sendmail\nconfig.action_mailer.perform_deliveries = true\nconfig.action_mailer.raise_delivery_errors = true\nconfig.action_mailer.default_options = {from: 'abc@123.com'}\n</code></pre>\n\n<p>The the below in <code>development.rb</code> of the same location:</p>\n\n<pre><code>Rails.application.configure do\n  config.cache_classes = false\n  config.eager_load = false\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n  config.action_mailer.raise_delivery_errors = false\n  config.active_support.deprecation = :log\n  config.active_record.migration_error = :page_load\n  config.assets.debug = true\n  config.assets.digest = true    \n  config.assets.raise_runtime_errors = true      \n  config.action_mailer.delivery_method = :smtp\n  config.action_mailer.smtp_settings = {\n    address:              'smtp.gmail.com',\n    port:                 587,\n    domain:               'example.com',\n    user_name:            '123@abc.com', #replace with your username Eg. john.smith\n    password:             'mypassword', #replace with your gmail password\n    authentication:       'plain',\n    enable_starttls_auto: true  }\nend\n</code></pre>\n\n<p>And the below in <code>production.rb</code> in the same location:</p>\n\n<pre><code>Rails.application.configure do\n  config.cache_classes = true\n  config.eager_load = true\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n  config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\n  config.assets.js_compressor = :uglifier\n  config.assets.compile = false\n  config.assets.digest = true\n  config.log_level = :debug\n  config.i18n.fallbacks = true\n  config.active_support.deprecation = :notify\n  config.log_formatter = ::Logger::Formatter.new\n  config.active_record.dump_schema_after_migration = false\n  config.action_mailer.delivery_method = :smtp\n    config.action_mailer.smtp_settings = {\n     :address              =&gt; \"smtp.gmail.com\",\n     :port                 =&gt; 587,\n     :user_name            =&gt; ENV['EMAIL_USER'],\n     :password             =&gt; ENV['EMAIL_PASSWORD'],\n     :authentication       =&gt; \"plain\",\n    :enable_starttls_auto =&gt; true\n    }\nend\n</code></pre>\n\n<p>And my <code>Gemfile</code> is as follows:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.6'\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more:         https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\ngem 'validates_email_format_of'\ngem \"letter_opener\", :group =&gt; :development\n</code></pre>\n\n<p>What I get in the <code>log</code> when creating a new record is as follows:</p>\n\n<pre><code>Started POST \"/emails\" for ::1 at 2016-06-08 19:41:10 +0100\nProcessing by EmailsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\",     \"authenticity_token\"=&gt;\"5MZ3NNxbc5T5T/S9vLFK7EskqEGg4Xd2ZBimoQd3eXklW9HW+i+wxRryp    CFg//I5UUq7SnesIfPR0LDM4VFy7w==\", \"email\"=&gt;{\"title\"=&gt;\"qqqqqqqqqqqqqqqqq\",     \"text\"=&gt;\"\"}, \"commit\"=&gt;\"Create Email\"}\n  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m\n  [1m[35mSQL (1.0ms)[0m  INSERT INTO \"emails\" (\"title\", \"text\", \"created_at\",     \"updated_at\") VALUES (?, ?, ?, ?)  [[\"title\", \"qqqqqqqqqqqqqqqqq\"], [\"text\",     \"\"], [\"created_at\", \"2016-06-08 18:41:10.647620\"], [\"updated_at\", \"2016-06-08     18:41:10.647620\"]]\n  [1m[36m (173.0ms)[0m  [1mcommit transaction[0m\n  Rendered user_mailer/welcome_email.html.erb within layouts/mailer (0.0ms)\n  Rendered user_mailer/welcome_email.text.erb within layouts/mailer (0.0ms)\n\nUserMailer#welcome_email: processed outbound mail in 264.0ms\n\nSent mail to 123@abc.com (442.0ms)\nDate: Wed, 08 Jun 2016 19:41:11 +0100\nFrom: abc@123.com\nTo: 123@abc.com\nMessage-ID: &lt;575866c716216_1fa44e42ca8808bd@mylaptop.mail&gt;\nSubject: Welcome to My Awesome Site\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_575866c714aa5_1fa44e42ca880795\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n\n----==_mimepart_575866c714aa5_1fa44e42ca880795\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\nWelcome to example.com, \n===============================================\n\nYou have successfully signed up to example.com,\nyour username is:.\n\nTo login to the site, just follow this link: http://localhost:3000/email/new.\n\nThanks for joining and have a great day!\n\n----==_mimepart_575866c714aa5_1fa44e42ca880795\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content='text/html; charset=UTF-8' http-equiv='Content-Type' /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Welcome!&lt;/h1&gt;\n    &lt;p&gt;    \n    &lt;/p&gt;\n    &lt;p&gt;\n      To login to the site, just follow this link:     http://localhost:3000/email/new.\n    &lt;/p&gt;\n    &lt;p&gt;Thanks for joining and have a great day!&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\n----==_mimepart_575866c714aa5_1fa44e42ca880795--\n\nRedirected to http://localhost:3000/emails/42\nCompleted 302 Found in 890ms (ActiveRecord: 174.0ms)\n\n\nStarted GET \"/emails/42\" for ::1 at 2016-06-08 19:41:11 +0100\nProcessing by EmailsController#show as HTML\n  Parameters: {\"id\"=&gt;\"42\"}\n  [1m[35mEmail Load (0.0ms)[0m  SELECT  \"emails\".* FROM \"emails\" WHERE     \"emails\".\"id\" = ? LIMIT 1  [[\"id\", 42]]\n  Rendered emails/show.html.erb within layouts/application (0.0ms)\nCompleted 200 OK in 86ms (Views: 84.1ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/emails\" for ::1 at 2016-06-08 19:41:13 +0100\nProcessing by EmailsController#index as HTML\n  [1m[36mEmail Load (0.0ms)[0m  [1mSELECT \"emails\".* FROM \"emails\"[0m\n  Rendered emails/index.html.erb within layouts/application (9.0ms)\nCompleted 200 OK in 88ms (Views: 87.3ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>I am really confused as to why this isn't working, does anybody know?</p>\n\n<p>Please note that I am using Windows 7 and running Rails 4.2.6.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 7, "last_activity_date": 1465410542, "last_edit_date": 1495540028, "creation_date": 1465410063, "answer_id": 37710053, "question_id": 37709722, "link": "https://stackoverflow.com/questions/37709722/can-someone-help-explain-the-post-initialize-callback-for-class-creation-sandi/37710053#37710053", "title": "Can someone help explain the post_initialize callback for class creation (Sandi Metz)", "body": "<p>The important thing to understand here is that in this code:</p>\n\n<pre><code>def initialize(args = {})\n  # ...\n  post_initialize(args)\nend\n</code></pre>\n\n<p>...<code>post_initialize</code> has an implicit receiver, <code>self</code>. In other words, <code>post_initialize(args)</code> here is equivalent<sup>\u2020</sup> to <code>self.post_initialize(args)</code>, and <code>self</code> is an instance of MountainBike.  Method lookup always starts with the receiver's class,<sup>\u2021</sup> so it has no trouble finding <code>MountainBike#post_initialize</code>.</p>\n\n<p><sup>\u2020</sup>\u2009That's a lie; it's not equivalent when it comes to privacy; <code>private</code> methods <a href=\"https://stackoverflow.com/questions/4293215/understanding-private-methods-in-ruby\">cannot be called with an explicit receiver</a>.<br>\n<sup>\u2021</sup>\u2009That's also a lie; it actually starts with the receiver's singleton class, but then it tries its class.</p>\n"}, {"comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 1, "creation_date": 1493905315, "post_id": 37710083, "comment_id": 74609506, "body": "Thank you Mr Keith. I&#39;d just like to add to make it explicitly clear - &quot;self&quot; is the implicit receiver, and given the instance was a derived class, than self would be the derived class instance, which could then access the relevant method which would exist in that particular derived class (as per Jordan&#39;s answer)."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 1, "last_activity_date": 1465410471, "last_edit_date": 1465410471, "creation_date": 1465410150, "answer_id": 37710083, "question_id": 37709722, "link": "https://stackoverflow.com/questions/37709722/can-someone-help-explain-the-post-initialize-callback-for-class-creation-sandi/37710083#37710083", "title": "Can someone help explain the post_initialize callback for class creation (Sandi Metz)", "body": "<p>There is nothing special about the <code>post_initialize</code> method.  It is merely a plain vanilla instance method of the subclass.</p>\n\n<p>In Ruby, a superclass instance method is able to call a subclass instance method, even in its constructor. Check out this irb session:</p>\n\n<pre><code>2.3.0 :003 &gt; class Base\n2.3.0 :004?&gt;   def initialize\n2.3.0 :005?&gt;     foo\n2.3.0 :006?&gt;     end\n2.3.0 :007?&gt;   end\n =&gt; :initialize\n2.3.0 :015 &gt; class Derived &lt; Base\n2.3.0 :016?&gt;   def foo\n2.3.0 :017?&gt;     puts 'I am foo.'\n2.3.0 :018?&gt;     end\n2.3.0 :019?&gt;   end\n =&gt; :foo\n2.3.0 :020 &gt; Derived.new\nI am foo.\n</code></pre>\n\n<p>The usual way this is done is by having the subclass call <code>super</code>, but I guess Sandi is suggesting the <code>post_initialize</code> approach to require that the subclass provide its own initialization, or formally decline to do so by implementing an empty method. (Plus, writers of subclasses may forget to call <code>super</code>.)  Here is how it would be done with super:</p>\n\n<pre><code>2.3.0 :001 &gt; class Base\n2.3.0 :002?&gt;   def initialize\n2.3.0 :003?&gt;     puts 'in base'\n2.3.0 :004?&gt;     end\n2.3.0 :005?&gt;   end\n =&gt; :initialize\n =&gt; #&lt;Derived:0x007fda6ba291d8&gt;\n2.3.0 :012 &gt; class Derived &lt; Base\n2.3.0 :013?&gt;   def initialize\n2.3.0 :014?&gt;     super\n2.3.0 :015?&gt;     puts 'in derived'\n2.3.0 :016?&gt;     end\n2.3.0 :017?&gt;   end\n =&gt; :initialize\n2.3.0 :018 &gt; Derived.new\nin base\nin derived\n =&gt; #&lt;Derived:0x007fda6b104b98&gt;\n</code></pre>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 37710053, "answer_count": 2, "score": 5, "last_activity_date": 1465410542, "creation_date": 1465408888, "question_id": 37709722, "link": "https://stackoverflow.com/questions/37709722/can-someone-help-explain-the-post-initialize-callback-for-class-creation-sandi", "title": "Can someone help explain the post_initialize callback for class creation (Sandi Metz)", "body": "<p>I am reading Sandi Metz's POODR and have come across a coding principle that I don't quite understand. Here is the code:</p>\n\n<pre><code>class Bicycle\n attr_reader :size, :chain, :tire_size\n\n  def initialize(args = {})\n    @size = args[:size] || 1\n    @chain = args[:chain] || 2\n    @tire_size = args[:tire_size] || 3\n    post_initialize(args)\n  end\nend\n\nclass MountainBike &lt; Bicycle\n  attr_reader :front_shock, :rear_shock\n\n  def post_initialize(args)\n    @front_shock = args[:front_shock]\n    @rear_shock = args[:rear_shock]\n  end\nend\n\nmb = MountainBike.new(front_shock: 4, rear_shock: 5)\nputs mb.size\nputs mb.chain\nputs mb.tire_size\nputs mb.front_shock\nputs mb.rear_shock\n</code></pre>\n\n<p>This code will output <code>1,2,3,4,5</code> for its respective attributes. What I don't understand is the method look up. </p>\n\n<p>When a mountain bike is instantiated, because it does not have its own <code>initialize</code> method, it will travel up the method lookup chain onto its super class (<code>Bicycle</code>). But now from there, it seems that Bicycle then moves back down into MountainBike's post_initialize method. Instead of continuing up the method chain, how can it go back down? Is <code>post_initialize</code> a ruby keyword like <code>initialize</code> in that it serves some sort of special function? Is there some other ruby introspection methods I can use to see what is going on?</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 7271, "user_id": 3704831, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/OFHMz.jpg?s=128&g=1", "display_name": "wogsland", "link": "https://stackoverflow.com/users/3704831/wogsland"}, "edited": false, "score": 0, "creation_date": 1465408363, "post_id": 37709344, "comment_id": 62893039, "body": "Suggest reading: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 9244, "user_id": 2397550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iAb8N.jpg?s=128&g=1", "display_name": "JoostS", "link": "https://stackoverflow.com/users/2397550/joosts"}, "edited": false, "score": 0, "creation_date": 1465557100, "post_id": 37709344, "comment_id": 62963141, "body": "This should be a layout in my opinion."}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 5624827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/03zRo.jpg?s=128&g=1", "display_name": "Goyllo", "link": "https://stackoverflow.com/users/5624827/goyllo"}, "is_accepted": false, "score": 0, "last_activity_date": 1465623578, "creation_date": 1465623578, "answer_id": 37760365, "question_id": 37709344, "link": "https://stackoverflow.com/questions/37709344/change-index-blog-to-directory-blog-jekyll/37760365#37760365", "title": "Change Index BLog to Directory Blog [Jekyll]", "body": "<p>Open your config file, and set baseurl as /blog</p>\n\n<pre><code>baseurl: \"/blog\"\n</code></pre>\n\n<p>And use <code>prepend:site.baseurl</code> everywhere, just like you have used in above code</p>\n\n<pre><code>{{ site.baseurl }}/category/{{ cat }}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6441672, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4L3avtYp7jk/AAAAAAAAAAI/AAAAAAAAABM/2uHevzJmJOA/photo.jpg?sz=128", "display_name": "Rianitami Susan", "link": "https://stackoverflow.com/users/6441672/rianitami-susan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465623578, "creation_date": 1465407684, "last_edit_date": 1465605717, "question_id": 37709344, "link": "https://stackoverflow.com/questions/37709344/change-index-blog-to-directory-blog-jekyll", "title": "Change Index BLog to Directory Blog [Jekyll]", "body": "<p>How do I replace a blog list of index</p>\n\n<p>example: <code>mysite.com</code> to <code>mysite.com/blog</code></p>\n\n<p>I have copied from the index and make myste.com/blog.html , but it does not work</p>\n\n<pre><code>---\nlayout: default\n---\n&lt;div class=\"home\"&gt;\n\n&lt;div class=\"site-header-container {% if site.cover %}has-cover{% endif %}\" {% if site.cover %}style=\"background-image: url({{ site.cover | prepend: site.baseurl }});\"{% endif %}&gt;\n  &lt;div class=\"scrim {% if site.cover %}has-cover{% endif %}\"&gt;\n    &lt;header class=\"site-header\"&gt;\n      &lt;h1 class=\"title\"&gt;{{ site.title }}&lt;/h1&gt;\n      {% if site.subtitle %}&lt;p class=\"subtitle\"&gt;{{ site.subtitle }}&lt;/p&gt;{% endif %}\n    &lt;/header&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"wrapper\"&gt;\n&lt;ul class=\"post-list\"&gt;\n  {% for post in paginator.posts %}\n  &lt;li&gt;\n    &lt;h2&gt;\n      &lt;a class=\"post-link\" href=\"{{ post.url | prepend: site.baseurl }}\"&gt;{{ post.title }}&lt;/a&gt;\n    &lt;/h2&gt;\n    &lt;section class=\"post-excerpt\" itemprop=\"description\"&gt;\n      &lt;p&gt;{{ post.content | strip_html | truncatewords: 50 }}&lt;/p&gt;\n    &lt;/section&gt;\n    &lt;section class=\"post-meta\"&gt;\n      &lt;div class=\"post-date\"&gt;{{ post.date | date: \"%B %-d, %Y\" }}&lt;/div&gt;\n      &lt;div class=\"post-categories\"&gt;\n      {% if post.categories.size &gt; 0 %}in {% for cat in post.categories %}\n        {% if site.jekyll-archives %}\n        &lt;a href=\"{{ site.baseurl }}/category/{{ cat }}\"&gt;{{ cat | capitalize }}&lt;/a&gt;{% if forloop.last == false %}, {% endif %}\n        {% else %}\n        &lt;span&gt;{{ cat | capitalize }}&lt;/span&gt;{% if forloop.last == false %}, {% endif %}\n        {% endif %}\n      {% endfor %}{% endif %}\n      &lt;/div&gt;\n    &lt;/section&gt;\n  &lt;/li&gt;\n  {% if forloop.last == false %}\n  &lt;hr&gt;\n  {% endif %}\n  {% endfor %}\n&lt;/ul&gt;\n\n&lt;nav class=\"pagination\" role=\"navigation\"&gt;\n  &lt;p&gt;\n    {% if paginator.next_page %}\n    &lt;a class=\"newer-posts\" href=\"{{ site.baseurl }}/page{{paginator.next_page}}\"&gt;\n      &lt;span class=\"fa-stack fa-lg\"&gt;\n        &lt;i class=\"fa fa-square fa-stack-2x\"&gt;&lt;/i&gt;\n        &lt;i class=\"fa fa-angle-double-left fa-stack-1x fa-inverse\"&gt;&lt;/i&gt;\n      &lt;/span&gt;\n    &lt;/a&gt;\n    {% else %}\n    &lt;span class=\"fa-stack fa-lg\"&gt;\n      &lt;i class=\"fa fa-square fa-stack-2x\"&gt;&lt;/i&gt;\n      &lt;i class=\"fa fa-angle-double-left fa-stack-1x fa-inverse\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    {% endif %}\n    &lt;span class=\"page-number\"&gt;Page {{ paginator.page }} of {{ paginator.total_pages }}&lt;/span&gt;\n    {% if paginator.previous_page %}\n      {% if paginator.page == 2 %}\n      &lt;a class=\"newer-posts\" href=\"{% if site.baseurl %}{{ site.baseurl }}{% endif %}/\"&gt;\n        &lt;span class=\"fa-stack fa-lg\"&gt;\n          &lt;i class=\"fa fa-square fa-stack-2x\"&gt;&lt;/i&gt;\n          &lt;i class=\"fa fa-angle-double-right fa-stack-1x fa-inverse\"&gt;&lt;/i&gt;\n        &lt;/span&gt;\n      &lt;/a&gt;\n      {% else %}\n      &lt;a class=\"newer-posts\" href=\"{{ site.baseurl }}/page{{paginator.previous_page}}\"&gt;\n        &lt;span class=\"fa-stack fa-lg\"&gt;\n          &lt;i class=\"fa fa-square fa-stack-2x\"&gt;&lt;/i&gt;\n          &lt;i class=\"fa fa-angle-double-right fa-stack-1x fa-inverse\"&gt;&lt;/i&gt;\n        &lt;/span&gt;\n      &lt;/a&gt;\n      {% endif %}\n    {% else %}\n    &lt;span class=\"fa-stack fa-lg\"&gt;\n      &lt;i class=\"fa fa-square fa-stack-2x\"&gt;&lt;/i&gt;\n      &lt;i class=\"fa fa-angle-double-right fa-stack-1x fa-inverse\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    {% endif %}\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;a href=\"{{ site.baseurl }}/posts\"&gt;View All Posts by Category&lt;/a&gt;\n  &lt;/p&gt;\n&lt;/nav&gt;\n\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1465411454, "post_id": 37709094, "comment_id": 62894859, "body": "@sawa count in hola(count) is the variable, an integer, that user inputs. Count in if COUNT IS... is what the code is expected to do in human language, without actually writing the actual code; i.e.: laziness."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1465411782, "post_id": 37709094, "comment_id": 62895059, "body": "Iggy, @sawa is saying, &quot;Please edit your question to define <code>count</code>&quot;. When questions arise, it&#39;s best to edit your question rather than trying to answer in comments. Not everyone reads comments or should be expected to do so. Questions should be self-contained."}], "answers": [{"tags": [], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "is_accepted": true, "score": 4, "last_activity_date": 1465466462, "last_edit_date": 1465466462, "creation_date": 1465407168, "answer_id": 37709192, "question_id": 37709094, "link": "https://stackoverflow.com/questions/37709094/recursive-string-modification-in-ruby/37709192#37709192", "title": "Recursive string modification in Ruby", "body": "<p>If there are no restrictions in the implementation, then try something like this:</p>\n\n<pre><code>string = \"Hola mi amigo\"\nreversed_string = string.reverse\ncount.times.map { |i| i.odd? ? reversed_string : string }.join \"\\n\"\n</code></pre>\n\n<p><code>times.map</code> will create an enumerator. The next block will check if the current index is odd or even; in the first case, it will reverse the string, and return it. Finally, all strings are concatenated together with <code>join</code> (with newlines).</p>\n\n<p>Also, here is another (and probably less efficient) recursive solution:</p>\n\n<pre><code>def hola(count)\n  if count == 0\n    ''\n  elsif count.even?\n    \"Hola mi amigo\".reverse + \"\\n\" + hola(count - 1)\n  else\n    \"Hola mi amigo\" + \"\\n\" + hola(count - 1)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4668437"}, "is_accepted": false, "score": 0, "last_activity_date": 1465407234, "creation_date": 1465407234, "answer_id": 37709211, "question_id": 37709094, "link": "https://stackoverflow.com/questions/37709094/recursive-string-modification-in-ruby/37709211#37709211", "title": "Recursive string modification in Ruby", "body": "<p>I'm not experienced with Ruby in particular, but from some light searching, I'd use the .reverse method and for-loops inside your elsif statements. It shouldn't be too hard to put together.</p>\n\n<p>A bit of .reverse documentation can be found here:</p>\n\n<p><a href=\"http://www.informit.com/articles/article.aspx?p=2314083&amp;seqNum=29\" rel=\"nofollow\">http://www.informit.com/articles/article.aspx?p=2314083&amp;seqNum=29</a></p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1465416469, "post_id": 37709671, "comment_id": 62897642, "body": "That&#39;s a lot of reversin&#39; the same string."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1465448743, "post_id": 37709671, "comment_id": 62907409, "body": "@CarySwoveland yeah, and more of unnecessary intermediate objects creating. The reason was to show different approaches. I always prepend my answers, that are not intended to be used as is with a disclaimer \u201cJust out of curiosity.\u201d"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1465448809, "last_edit_date": 1465448809, "creation_date": 1465408741, "answer_id": 37709671, "question_id": 37709094, "link": "https://stackoverflow.com/questions/37709094/recursive-string-modification-in-ruby/37709671#37709671", "title": "Recursive string modification in Ruby", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>str = '\u00a1Hola mi amigo!'\n([str, str.reverse] * (count / 2 + 1)).take(count).join $/\n([str] * count).map.with_index { |s, i| i.even? ? s : s.reverse }.join $/\n([str] * count).each.with_index.with_object(\"\") do |(s, i), acc|\n  acc &lt;&lt; (i.even? ? s : s.reverse) &lt;&lt; $/\nend.strip\n</code></pre>\n\n<p>To make it more robust (credits to Cary,) one might prepare reversed string in advance.</p>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1465436214, "post_id": 37710458, "comment_id": 62904561, "body": "Whoops. Thanks; fixed."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1465449032, "post_id": 37710458, "comment_id": 62907503, "body": "Shouldn\u2019t it have <code>end.chomp</code> as the last line, since OP requested the result having no trailing carriage return?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465449628, "post_id": 37710458, "comment_id": 62907715, "body": "Good catch, @mudasobwa. I&#39;ve edited my answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465454492, "post_id": 37710458, "comment_id": 62909807, "body": "Uhhhm. This edit won\u2019t do a trick. <code>str &lt;&lt; (&quot;\\n&quot; &lt;&lt; hola(str.reverse, count - 1)).chomp</code> would. (<code>&lt;&lt;</code> vs. <code>+</code> is unrelated, it is just a matter of my habit.)"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465484472, "post_id": 37710458, "comment_id": 62930426, "body": "And yet, it does work."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 4, "last_activity_date": 1465449362, "last_edit_date": 1465449362, "creation_date": 1465411408, "answer_id": 37710458, "question_id": 37709094, "link": "https://stackoverflow.com/questions/37709094/recursive-string-modification-in-ruby/37710458#37710458", "title": "Recursive string modification in Ruby", "body": "<h2>Solution 1</h2>\n\n<p>I'm surprised no one else has proposed a solution with <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-cycle\" rel=\"nofollow\"><code>Enumerable#cycle</code></a> (perhaps @CarySwoveland is on vacation):</p>\n\n<pre><code>def hola(str, count) \n  [ str, str.reverse ].cycle.take(count).join(\"\\n\")\nend\n\nputs hola(\"Hola mi amigo\", 1)\n# =&gt; Hola mi amigo\n\nputs hola(\"Hola mi amigo\", 2)\n# =&gt; Hola mi amigo\n#    ogima im aloH\n\nputs hola(\"Hola mi amigo\", 3)\n# =&gt; Hola mi amigo\n#    ogima im aloH\n#    Hola mi amigo\n\nputs hola(\"Hola mi amigo\", 8)\n# =&gt; Hola mi amigo\n#    ogima im aloH\n#    Hola mi amigo\n#    ogima im aloH\n#    Hola mi amigo\n#    ogima im aloH\n#    Hola mi amigo\n#    ogima im aloH\n</code></pre>\n\n<h2>Solution 2</h2>\n\n<p>It occurred to me that perhaps OP was actually looking for a recursive solution, as they wrote in the title:</p>\n\n<pre><code>def hola(str, count)\n  return \"\" if count &lt;= 0\n  str + \"\\n\" + hola(str.reverse, count - 1).chomp\nend\n</code></pre>\n\n<p>Output is the same as above. Obviously it's not as efficient, but otherwise I rather like it.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1465440761, "last_edit_date": 1465440761, "creation_date": 1465416404, "answer_id": 37711942, "question_id": 37709094, "link": "https://stackoverflow.com/questions/37709094/recursive-string-modification-in-ruby/37711942#37711942", "title": "Recursive string modification in Ruby", "body": "<pre><code>def alternate(str, count)\n  ((\"%s\\n%s\\n\" % [str, str.reverse])*(count/2) &lt;&lt; str*(count % 2)).chomp\nend\n\nstr = \"Hola mi amigo\"\n\nputs alternate(str, 4)  \nHola mi amigo\nogima im aloH\nHola mi amigo\nogima im aloH\n\nputs alternate(str, 5)  \nHola mi amigo\nogima im aloH\nHola mi amigo\nogima im aloH\nHola mi amigo\n</code></pre>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "closed_date": 1465460238, "accepted_answer_id": 37709192, "answer_count": 5, "score": 0, "last_activity_date": 1465466462, "creation_date": 1465406789, "last_edit_date": 1465407513, "question_id": 37709094, "link": "https://stackoverflow.com/questions/37709094/recursive-string-modification-in-ruby", "closed_reason": "Needs details or clarity", "title": "Recursive string modification in Ruby", "body": "<p>I have a string. I need to make every other line reversed. If count is 2, it should display:</p>\n\n<pre><code>\"Hola mi amigo \\nogima im aloH\"\n</code></pre>\n\n<p>If count is 3, it should display:</p>\n\n<pre><code>\"Hola mi amigo \\nogima im aloH \\nHola mi amigo\"\n</code></pre>\n\n<p>and so on. What is the shortest way to perform string modification between every other <code>\"\\n\"</code>? </p>\n\n<p>My hunch is to use regex. In addition to regex solution, is there any non-regex solution? I would like to see both for comparison.</p>\n\n<pre><code>def hola(count) \n  if COUNT IS LESS THAN 2\n    return false\n  elsif ODD\n    ((\"Hola mi amigo \")*((count-1)/2) + \"\\n\") * count \n  elsif EVEN\n    ((\"Hola mi amigo \")*(count/2) + \"\\n\") * count \n  end \nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1616238"}, "is_accepted": false, "score": 0, "last_activity_date": 1465407617, "creation_date": 1465407617, "answer_id": 37709314, "question_id": 37708876, "link": "https://stackoverflow.com/questions/37708876/rails-dump-and-load-only-specific-tables-between-environments/37709314#37709314", "title": "Rails dump and load only specific tables between environments", "body": "<p>Use <code>yaml_db</code> gem</p>\n\n<p><code>rake db:data:dump_dir</code>\n   ->   Dump contents of database to curr_dir_name/tablename.extension (defaults to yaml)</p>\n\n<p>remove the unnecessary table files from the dir and then</p>\n\n<p><code>rake db:data:load_dir</code>   ->   Load contents of db/data_dir into database</p>\n"}], "owner": {"reputation": 525, "user_id": 3987123, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8250ade11ee70854d19f513f76ac32dd?s=128&d=identicon&r=PG", "display_name": "srm", "link": "https://stackoverflow.com/users/3987123/srm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 541, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492435798, "creation_date": 1465406009, "last_edit_date": 1492435798, "question_id": 37708876, "link": "https://stackoverflow.com/questions/37708876/rails-dump-and-load-only-specific-tables-between-environments", "title": "Rails dump and load only specific tables between environments", "body": "<p>I found a lot of <a href=\"https://coderwall.com/p/90qymq/how-to-transfer-data-seamlessly-between-various-ruby-on-rails-environments-and-databases\" rel=\"nofollow noreferrer\">documentation</a> on how to dump the whole database and load it in a different environment but I don't want the <em>whole</em> database.</p>\n\n<p>I need to dump and load only specific tables between environments. </p>\n\n<p>For instance I need the <code>results</code> table from production in my testing environment but I don't want the <code>users</code> table.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1465405943, "post_id": 37708830, "comment_id": 62891696, "body": "Including the word: <code>&#47;theword.*&#47;mi</code>. Excluding the word: <a href=\"http://ideone.com/47Jog4\" rel=\"nofollow noreferrer\"><code>.sub!(&#47;(theword).*&#47;mi, &quot;\\\\1&quot;)</code></a>. Note that <code>sub</code> is more appropriate since you plan to perform one search and replace operation."}, {"owner": {"reputation": 77, "user_id": 5915657, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d999b8c8df8f310f2a67f51cd5fe07a8?s=128&d=identicon&r=PG&f=1", "display_name": "john2131", "link": "https://stackoverflow.com/users/5915657/john2131"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1465407386, "post_id": 37708830, "comment_id": 62892493, "body": "Thanks, works great."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1465421284, "post_id": 37708830, "comment_id": 62900047, "body": "I posted an answer with some more options."}], "answers": [{"tags": [], "owner": {"reputation": 1505, "user_id": 6419701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0a114594d03ac885fb4590e24b0164c8?s=128&d=identicon&r=PG&f=1", "display_name": "yosefrow", "link": "https://stackoverflow.com/users/6419701/yosefrow"}, "is_accepted": false, "score": 0, "last_activity_date": 1465406801, "creation_date": 1465406801, "answer_id": 37709098, "question_id": 37708830, "link": "https://stackoverflow.com/questions/37708830/how-to-cut-everything-out-of-a-string-after-a-certain-word/37709098#37709098", "title": "How to cut everything out of a string after a certain word?", "body": "<p>Here's how you capture everything after theword</p>\n\n<p>Basically we find the pattern and we refuse to capture it using the ?: non-capture modifier, but we capture everything after it.</p>\n\n<pre><code>/(?:.*?theword)(.*)/gm\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/eF4oC7/1\" rel=\"nofollow\">https://regex101.com/r/eF4oC7/1</a></p>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1465411146, "creation_date": 1465411146, "answer_id": 37710377, "question_id": 37708830, "link": "https://stackoverflow.com/questions/37708830/how-to-cut-everything-out-of-a-string-after-a-certain-word/37710377#37710377", "title": "How to cut everything out of a string after a certain word?", "body": "<p>To cut everything before \"theword\", you used <strong>positive lookahead</strong>. Similarly, To cut everything after \"theword\", you can use <strong>positive lookbehind</strong></p>\n\n<pre><code>.gsub!(/(?&lt;=theword).*?/im, \"\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1465421201, "creation_date": 1465421201, "answer_id": 37713217, "question_id": 37708830, "link": "https://stackoverflow.com/questions/37708830/how-to-cut-everything-out-of-a-string-after-a-certain-word/37713217#37713217", "title": "How to cut everything out of a string after a certain word?", "body": "<p>I see that by \"cutting\" you mean splitting a string into 2 parts. You can use a <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"nofollow\"><code>split</code></a> by passing the <em>limit</em> argument equal to 2:</p>\n\n<pre><code>s.split(/theword/i, 2)\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/sWlG3U\" rel=\"nofollow\">IDEONE demo</a> </p>\n\n<p>If, for some reason, you need to use a removing code, I'd suggest using <code>sub</code> (since there will be one search and replace operation):</p>\n\n<ul>\n<li>Remove all after a word <em>including</em> the word: <code>.sub!(/theword.*/mi, \"\")</code> (<a href=\"http://ideone.com/eYCaAr\" rel=\"nofollow\">demo</a>)</li>\n<li>Remove all after a word <em>excluding</em> the word: <code>.sub!(/(theword).*/mi, \"\\\\1\")</code> (<a href=\"http://ideone.com/47Jog4\" rel=\"nofollow\">demo</a>)</li>\n</ul>\n"}], "owner": {"reputation": 77, "user_id": 5915657, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d999b8c8df8f310f2a67f51cd5fe07a8?s=128&d=identicon&r=PG&f=1", "display_name": "john2131", "link": "https://stackoverflow.com/users/5915657/john2131"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1228, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1465421201, "creation_date": 1465405854, "question_id": 37708830, "link": "https://stackoverflow.com/questions/37708830/how-to-cut-everything-out-of-a-string-after-a-certain-word", "title": "How to cut everything out of a string after a certain word?", "body": "<p>So I know that to cut out everything in a string before \"theword\" you would do this.</p>\n\n<pre><code>  .gsub!(/.*?(?=theword)/im, \"\")\n</code></pre>\n\n<p>What I'm unsure how to do is cut out everything in a string after \"theword\" and I was wondering if you could help me make that regex. It should be some modification of the above regex but I haven't figured it out. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongodb-query", "mongodb-ruby"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6440922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff28bb2133be3d66bc2a6226da1f908?s=128&d=identicon&r=PG&f=1", "display_name": "Elias", "link": "https://stackoverflow.com/users/6440922/elias"}, "is_accepted": true, "score": 0, "last_activity_date": 1465565112, "creation_date": 1465565112, "answer_id": 37749462, "question_id": 37708546, "link": "https://stackoverflow.com/questions/37708546/ruby-mongo-driver-projection-elemmatch/37749462#37749462", "title": "Ruby Mongo Driver Projection Elemmatch", "body": "<p>To anyone out there --</p>\n\n<p>The problem can be solved up to one element by using $elemMatch on projection. However, $elemMatch only returns the first result found. To return only parts of embedded documents multiple layers down that fit certain criteria, you need to use the aggregation framework. </p>\n\n<pre><code>test.find({\n  'tran_details.prate' =&gt; { '$gt' =&gt; 56 }\n}).projection({\n  tran_details: {\n    '$elemMatch' =&gt; {\n      prate: { '$gt' =&gt; 56 }\n    }\n  },\n  'tran_details.qty' =&gt; 1,\n  'tran_details.mrp' =&gt; 1,\n  batch: 1,\n  _id: 0\n}).to_a\n</code></pre>\n\n<p>To return only parts of embedded documents multiple layers down that fit certain criteria, you need to use the aggregation framework.</p>\n\n<p>Here is example code</p>\n\n<pre><code>test.aggregate([{\n   '$match': {\n      '$or': [\n          {'batch': 10452}, {'batch': 73292}]}}, \n   {'$project':\n      {trans_details: \n          {'$filter': {\n             input: '$tran_details', \n             as: 'item', \n             cond: {'$and':[\n               {'$gte' =&gt; ['$$item.prate', 51]},\n               {'gt' =&gt;    ['$$item.prate', 53]}\n             ]}\n           }\n      }\n   }\n}]).to_a\n</code></pre>\n\n<p>If anyone sees this and knows how to dynamically construct queries in ruby from strings please let me know! Something to do with bson but still trying to find relevant documentation. Thanks - </p>\n"}], "owner": {"reputation": 11, "user_id": 6440922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff28bb2133be3d66bc2a6226da1f908?s=128&d=identicon&r=PG&f=1", "display_name": "Elias", "link": "https://stackoverflow.com/users/6440922/elias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 37749462, "answer_count": 1, "score": 1, "last_activity_date": 1465565112, "creation_date": 1465404899, "question_id": 37708546, "link": "https://stackoverflow.com/questions/37708546/ruby-mongo-driver-projection-elemmatch", "title": "Ruby Mongo Driver Projection Elemmatch", "body": "<p>Following the code in <a href=\"http://www.w3resource.com/mongodb/mongodb-elemmatch-projection-operators.php\" rel=\"nofollow\">http://www.w3resource.com/mongodb/mongodb-elemmatch-projection-operators.php</a> I have set up a test database using the ruby mongodb driver. </p>\n\n<p>For those following along at home, you first need to install the mongo driver as described at <a href=\"https://docs.mongodb.com/ecosystem/tutorial/ruby-driver-tutorial/#creating-a-client\" rel=\"nofollow\">https://docs.mongodb.com/ecosystem/tutorial/ruby-driver-tutorial/#creating-a-client</a>, then run the following commands.</p>\n\n<blockquote>\n  <p>client =  Mongo::Client.new([ '127.0.0.1:27017'], :database => 'mydb')</p>\n  \n  <p>test = client['test']</p>\n  \n  <p>doc = {\n          \"_id\" => 1,\n          \"batch\" =>10452,\n          \"tran_details\" =>[\n                  {\n                          \"qty\" =>200,\n                          \"prate\" =>50,\n                          \"mrp\" =>70\n                  },\n                  {\n                          \"qty\" =>250,\n                          \"prate\" =>50,\n                          \"mrp\" =>60\n                  },\n                  {\n                          \"qty\" =>190,\n                          \"prate\" =>55,\n                          \"mrp\" =>75\n                  }\n          ]\n  }</p>\n  \n  <p>test.insert_one(doc)</p>\n</blockquote>\n\n<p>Insert all of the different docs created in the w3 tutorial.</p>\n\n<p>If you look at example 2 in the w3 tutorial, the translated ruby find is: </p>\n\n<p>test.find({\"batch\" => 10452}).projection({\"tran_details\" => {\"$elemMatch\" => {\"prate\" => 50, \"mrp\" => {\"$gte\" => 70}}}}).to_a</p>\n\n<p>which returns the same result as in the example. </p>\n\n<p>=> [{\"_id\"=>1, \"tran_details\"=>[{\"qty\"=>200, \"prate\"=>50, \"mrp\"=>70}]}, {\"_id\"=>3}, {\"_id\"=>4}]</p>\n\n<p>My problem is that I would like to constrain the results with the constraints above (mrp gte 70 etc) while also specifying which fields are returned.  </p>\n\n<p>For instance, constraining only the tran_details that have a mrp gte 70, but in the results returned only include the prate field (or any subset of the fields). </p>\n\n<p>I can return only the prate field with the query:</p>\n\n<blockquote>\n  <p>test.find({\"batch\" => 10452}).projection({\"tran_details.prate\" => 1}).to_a</p>\n</blockquote>\n\n<p>I would like to combine the effects of the two different projections, but I haven't seen any documentation about how to do that online. If you string the two projections to each other, only the final projection has an effect. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1465405296, "post_id": 37708496, "comment_id": 62891320, "body": "Did you remember to <code>require &quot;csv&quot;</code>?"}, {"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465413306, "post_id": 37708496, "comment_id": 62895934, "body": "Put in an answer! You are correct, of course. I had it in application.rb of my other app, so I missed it."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 5, "last_activity_date": 1465413444, "creation_date": 1465413444, "answer_id": 37711068, "question_id": 37708496, "link": "https://stackoverflow.com/questions/37708496/nomethoderror-undefined-method-to-csv-for-a-barray/37711068#37711068", "title": "NoMethodError: undefined method `to_csv&#39; for [&quot;a&quot;, &quot;b&quot;]:Array", "body": "<p>Don't forget to require the CSV module:</p>\n\n<pre><code>require \"csv\"\n</code></pre>\n"}], "owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1491, "favorite_count": 0, "accepted_answer_id": 37711068, "answer_count": 1, "score": 1, "last_activity_date": 1465413444, "creation_date": 1465404729, "question_id": 37708496, "link": "https://stackoverflow.com/questions/37708496/nomethoderror-undefined-method-to-csv-for-a-barray", "title": "NoMethodError: undefined method `to_csv&#39; for [&quot;a&quot;, &quot;b&quot;]:Array", "body": "<p>Why is this new Rails project having a problem finding the <code>to_csv</code> method?</p>\n\n<p>I'm running Ruby v2.1.3, installed with <code>rbenv</code>. There is no reason whatsoever for it not to find this method.</p>\n\n<p>I have another project running v2.1.0 where I make heavy use of <code>to_csv</code> on array objects. No problems there.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465404391, "post_id": 37708202, "comment_id": 62890776, "body": "Please edit your question to include an example of the data you&#39;re working with. You said &quot;<code>row.to_hash</code> does not work&quot; but you forgot to say what <code>row</code> looks like."}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465404908, "post_id": 37708202, "comment_id": 62891067, "body": "amended - see above.  added detail above."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1465405066, "post_id": 37708202, "comment_id": 62891167, "body": "What is in a row of the config/csv/locations/counties.csv file?"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "edited": false, "score": 0, "creation_date": 1465405249, "post_id": 37708202, "comment_id": 62891292, "body": "see above:  My County csv file has id: name: Hartford market_state: Connecticut"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465407208, "post_id": 37708202, "comment_id": 62892400, "body": "Do you want to use the <code>id</code> field from the CSV as the models&#39; <code>id</code> attribute or do you want those to be automatically generated by your database? (Unless you know there will never be conflicts with data already in the database, the latter is safer, but if the <code>id</code> field is significant in some other way you may not want to lose it.)"}], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "edited": false, "score": 0, "creation_date": 1465409488, "post_id": 37708776, "comment_id": 62893737, "body": "but then how to i populate the County field (market_state_id) which is the association on the County field?"}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": true, "score": 1, "last_activity_date": 1465405683, "creation_date": 1465405683, "answer_id": 37708776, "question_id": 37708202, "link": "https://stackoverflow.com/questions/37708202/importing-csv-into-ruby-but-need-to-create-relationship/37708776#37708776", "title": "importing csv into ruby but need to create relationship", "body": "<p>Assuming your MarketState has a name column that is the name of the state:  </p>\n\n<pre><code>def import_market_counties\n\n\npath = Rails.root.join(\"config/csv/locations/counties.csv\")\n  CSV.foreach(path, headers: true) do |row|\n    MarketState.find_by_name( row['market_state'].strip )\n  end\n</code></pre>\n\n<p>you can also use find_or_create_by if you want to create the state if it doesn't exist.  </p>\n"}], "owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 37708776, "answer_count": 1, "score": 1, "last_activity_date": 1465407724, "creation_date": 1465403818, "last_edit_date": 1495542262, "question_id": 37708202, "link": "https://stackoverflow.com/questions/37708202/importing-csv-into-ruby-but-need-to-create-relationship", "title": "importing csv into ruby but need to create relationship", "body": "<p>I am wanting to import 2 files (County &amp; State).  When I import I need to create a relationship with County to State.</p>\n\n<p>My State CSV file has:</p>\n\n<ul>\n<li><code>id</code></li>\n<li><code>state</code> e.g. \"Connecticut\"</li>\n<li><code>abbreviation</code> e.g. \"CT\"</li>\n</ul>\n\n<p>My County CSV file has:</p>\n\n<ul>\n<li><code>id</code></li>\n<li><code>name</code> e.g. \"Hartford\"</li>\n<li><code>market_state</code> e.g. \"Connecticut\"</li>\n</ul>\n\n<p>The attributes for MarketCounty are:  </p>\n\n<pre><code>create_table \"market_counties\", force: :cascade do |t|\n  t.string   \"name\"\n  t.integer  \"market_state_id\"\n  t.datetime \"created_at\",      null: false\n  t.datetime \"updated_at\",      null: false\nend\n</code></pre>\n\n<p>The attributes for MarketState are: </p>\n\n<pre><code>create_table \"market_states\", force: :cascade do |t|\n  t.string   \"name\"\n  t.string   \"abbreviation\"\n  t.datetime \"created_at\",   null: false\n  t.datetime \"updated_at\",   null: false\nend\n</code></pre>\n\n<p>My models have these relationships:</p>\n\n<p>MarketState:</p>\n\n<pre><code>class MarketState &lt; ActiveRecord::Base\n  has_many :market_reports, as: :location\n  has_many :market_cities\n  has_many :market_zips\n  has_many :market_counties  \nend\n</code></pre>\n\n<p>MarketCounty:</p>\n\n<pre><code>class MarketCounty &lt; ActiveRecord::Base\n  has_many :market_reports, as: :location\n  has_many :market_cities\n  has_many :market_zips\n  belongs_to :market_state\nend\n</code></pre>\n\n<p>My Rake task:</p>\n\n<pre><code>def import_market_states\n  MarketState.create!(name: \"Connecticut\", abbreviation: \"CT\")\nend\n\ndef import_market_counties\n  path = Rails.root.join(\"config/csv/locations/counties.csv\")\n  CSV.foreach(path, headers: true) do |row|\n    MarketCounty.create! row.to_hash\n  end\n</code></pre>\n\n<p>My question is in the the method <code>import_market_counties</code>, <code>row.to_hash</code> does not work.  </p>\n\n<pre><code>ActiveRecord::AssociationTypeMismatch: MarketState(#70157557268540)\nexpected, got String(#70157439770720)\n</code></pre>\n\n<p>I set it up manually: </p>\n\n<pre><code>MarketCity.create!(name: \"Hartford\", market_state: MarketState.find_by(abbreviation: \"CT\")\n</code></pre>\n\n<p>How can I do a \"lookup\" in a loop when importing County file (to associate it to the MarketState model)?</p>\n\n<p>To clarify, the issue is that when I am creating the County, I am not trying to populate state with CT.  I need to populate state_id with the association. </p>\n\n<p>I found this SO:  <a href=\"https://stackoverflow.com/questions/14642121/when-importing-a-csv-how-do-i-handle-data-in-a-row-that-corresponds-to-an-assoc\">When importing a CSV, how do I handle data in a row that corresponds to an association?</a>  --- \nAnd thinking it may be similar to what I am trying to do -  just not sure how to apply it here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1465403954, "post_id": 37708115, "comment_id": 62890474, "body": "This is due to your context rendering erb. <code>&quot;a,b,c&quot;.split(&#39;,&#39;) #=&gt; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</code>"}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1465404132, "post_id": 37708115, "comment_id": 62890599, "body": "I just guessed it was erb, but it might be anything else."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1465405828, "post_id": 37708115, "comment_id": 62891642, "body": "Why do you want <code>[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;]</code> in your view?"}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1465404052, "creation_date": 1465404052, "answer_id": 37708279, "question_id": 37708115, "link": "https://stackoverflow.com/questions/37708115/convert-comma-separated-string-to-array-without-coded-quotations/37708279#37708279", "title": "Convert comma separated string to array without coded quotations", "body": "<p>Since you're using Rails I'm going to guess that this is JSON.</p>\n\n<p>The first step is to decode the HTML entities with <code>CGI.unescapeHTML</code>:</p>\n\n<pre><code>str = '[&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;]'\njson = CGI.unescapeHTML(str)\n# =&gt; \"[\\\"a\\\", \\\"b\\\", \\\"c\\\"]\"\n</code></pre>\n\n<p>Now decode the JSON:</p>\n\n<pre><code>JSON.parse(json)\n# =&gt; [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>I think in Rails the CGI module is available by default, but if not you'll need to do <code>require \"cgi\"</code> first.</p>\n"}, {"tags": [], "owner": {"reputation": 7329, "user_id": 1232447, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001bb9923606697c5edf6b88955c73e8?s=128&d=identicon&r=PG&f=1", "display_name": "maximus \u30c4", "link": "https://stackoverflow.com/users/1232447/maximus-%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1465404881, "creation_date": 1465404881, "answer_id": 37708539, "question_id": 37708115, "link": "https://stackoverflow.com/questions/37708115/convert-comma-separated-string-to-array-without-coded-quotations/37708539#37708539", "title": "Convert comma separated string to array without coded quotations", "body": "<p>You can achieve it by,</p>\n\n<pre><code>&lt;%= \"a,b,c\".split(',').inspect %&gt;\n</code></pre>\n\n<p>or by</p>\n\n<pre><code>&lt;%= \"a,b,c\".split(',').to_s.html_safe %&gt;\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 5777903, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecfc987f0582d9ce60a4c7ead9323169?s=128&d=identicon&r=PG", "display_name": "Hussain Niazi", "link": "https://stackoverflow.com/users/5777903/hussain-niazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 37708539, "answer_count": 2, "score": -1, "last_activity_date": 1465404881, "creation_date": 1465403536, "last_edit_date": 1465403769, "question_id": 37708115, "link": "https://stackoverflow.com/questions/37708115/convert-comma-separated-string-to-array-without-coded-quotations", "title": "Convert comma separated string to array without coded quotations", "body": "<p>When I have:</p>\n\n<pre><code>&lt;%= \"a,b,c\".split(',') %&gt;\n</code></pre>\n\n<p>this is what I get in view:</p>\n\n<pre><code>[&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;]\n</code></pre>\n\n<p>How can I achieve this:</p>\n\n<pre><code>['a','b','c']\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "webdriver"], "comments": [{"owner": {"reputation": 1549, "user_id": 1594097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0487c4cdd633c17168020dbae62de9e5?s=128&d=identicon&r=PG", "display_name": "Argus9", "link": "https://stackoverflow.com/users/1594097/argus9"}, "edited": false, "score": 0, "creation_date": 1465403757, "post_id": 37708067, "comment_id": 62890341, "body": "I think I just figured it out - I was missing the &quot;return&quot; statement from the script. It should be <code>driver.execute_script &#39;return $.active&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1549, "user_id": 1594097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0487c4cdd633c17168020dbae62de9e5?s=128&d=identicon&r=PG", "display_name": "Argus9", "link": "https://stackoverflow.com/users/1594097/argus9"}, "edited": false, "score": 0, "creation_date": 1465403773, "post_id": 37708178, "comment_id": 62890354, "body": "Yep, just figured that out as you posted. I feel so silly. Thank you!"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1465403735, "creation_date": 1465403735, "answer_id": 37708178, "question_id": 37708067, "link": "https://stackoverflow.com/questions/37708067/ruby-selenium-webdriver-get-return-value-of-execute-script/37708178#37708178", "title": "Ruby Selenium WebDriver - get return value of execute_script", "body": "<p>You just need to add the <code>return</code>:</p>\n\n<pre><code>driver.execute_script 'return $.active'\n</code></pre>\n"}], "owner": {"reputation": 1549, "user_id": 1594097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0487c4cdd633c17168020dbae62de9e5?s=128&d=identicon&r=PG", "display_name": "Argus9", "link": "https://stackoverflow.com/users/1594097/argus9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "accepted_answer_id": 37708178, "answer_count": 1, "score": 0, "last_activity_date": 1465403815, "creation_date": 1465403402, "last_edit_date": 1465403815, "question_id": 37708067, "link": "https://stackoverflow.com/questions/37708067/ruby-selenium-webdriver-get-return-value-of-execute-script", "title": "Ruby Selenium WebDriver - get return value of execute_script", "body": "<p>Simple question here - when I use <code>execute_script</code> in a Ruby Selenium test, is there a way I can get the result of the JavaScript I ran?</p>\n\n<p>This is the code I'm executing: <code>driver.execute_script '$.active'</code></p>\n\n<p>Edit: The solution is so simple. I forgot to include <code>return</code> in the script.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ujs"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465402176, "post_id": 37707561, "comment_id": 62889302, "body": "I would argue that your ajax call times out, because the database update takes too long. The only way to not updated the database when a timeout happens, would be to travel back in time an prevent the request from hitting the application in the first place. Perhaps you should focus on avoiding timeout situations. Investigate why your updates are so slow that they run into an time out."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465403582, "post_id": 37707561, "comment_id": 62890214, "body": "I get your point but no. My app is mobile-intense. For example: the user is in a subway  (and right now he has internet connection). He clicks on the link, which today updates the table User with user.total_nb_clicks (increment of 1) but then he enters a tunnel with almost no internet connection for 20 sec. I put in my app to timeout at 10 seconds for UX reasons (so that users do not think it&#39;s a bug). Then the message he sees is &#39;sorry timeout, try again&#39;. But he is allowed only to click 3 times so I should not have updated his column &#39;total_shots&#39;. it&#39;s a real life case."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465403604, "post_id": 37707561, "comment_id": 62890234, "body": "Adding this to the question as this context is useful to understand the question."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465404918, "post_id": 37707561, "comment_id": 62891071, "body": "Same goes if there is an error (maybe due to racing conditions or anything ..) : yes now it&#39;s working but you never know. so it is unfair to implement the deal_path methods (such as updating his total number of allowed times he can see the modal Result) if it&#39;s the app who had a problem:) S**** happens, but we should not punish the user if it&#39;s the app fault."}], "answers": [{"comments": [{"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1465924326, "post_id": 37814858, "comment_id": 63100701, "body": "thanks. hey i&#39;m using too heroku so very interesting to handle now the added layer of complexity induced by heroku:) but in terms of my question, in the end I used a Rails transaction but still have not figured out everything: check my comments too if interested: <a href=\"http://stackoverflow.com/questions/37729964/rails-controller-execute-action-only-if-the-a-rails-ujs-method-inside-succeed\" title=\"rails controller execute action only if the a rails ujs method inside succeed\">stackoverflow.com/questions/37729964/&hellip;</a>"}, {"owner": {"reputation": 777, "user_id": 1228665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P2n8O.png?s=128&g=1", "display_name": "chrisandrew.cl", "link": "https://stackoverflow.com/users/1228665/chrisandrew-cl"}, "reply_to_user": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1465955109, "post_id": 37814858, "comment_id": 63112691, "body": "I still don&#39;t think you can do what you asked the way you want. The linked question in your comment also addresses a situation being rescued from within the controller (e.g. long running process or failed operation), and a slow response interrupted back to the client already got away from controller. But, if you got your problem solved somehow, I&#39;d like to learn it too. Please, share your solution!"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1466088108, "post_id": 37814858, "comment_id": 63181939, "body": "Actually I did not find a solution to the problem. I found a way to go &quot;round&quot; this problem and a &quot;good enough solution&quot; for the moment. So for the first 2 methods I wrap them into a Rails Transaction (so if one of them is not made, the other will roll back). But I still have the issue with the thrid method of displaying the modal (the respond format.js part). Here no solution but a way to go round it: if the databases are updated, then I trigger with sidekiq an email and I show to the user the message &#39;sorry timeout, but check your email to see the Result&#39;."}], "tags": [], "owner": {"reputation": 777, "user_id": 1228665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P2n8O.png?s=128&g=1", "display_name": "chrisandrew.cl", "link": "https://stackoverflow.com/users/1228665/chrisandrew-cl"}, "is_accepted": true, "score": 1, "last_activity_date": 1465914410, "creation_date": 1465914410, "answer_id": 37814858, "question_id": 37707561, "link": "https://stackoverflow.com/questions/37707561/prevent-database-action-if-rails-ujs-ajax-returns-an-error-or-timeout/37814858#37814858", "title": "Prevent database action if Rails UJS (ajax) returns an Error or Timeout", "body": "<p>I saw a similar issue on <a href=\"https://devcenter.heroku.com/articles/request-timeout\" rel=\"nofollow\">how Heroku suggests you handle timeout in its environment</a>, but I don't think it will work for your case scenario, because your timeout has nothing to do with long running server side processing. </p>\n\n<p>When your controller finishes its job, there is no way to know that the http request has succeeded or not if the client failed to receive the response after the request. I believe it's because the <a href=\"http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" rel=\"nofollow\">HTTP Protocol is stateless</a>.</p>\n\n<p>That being said, you could try others approaches. The more straightforward I can think of is: persist information to show the same data to the user next time he try to visualize the content or when the connection is reestablished (not counting as a new click).</p>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 37814858, "answer_count": 1, "score": 1, "last_activity_date": 1465914410, "creation_date": 1465401847, "last_edit_date": 1465403755, "question_id": 37707561, "link": "https://stackoverflow.com/questions/37707561/prevent-database-action-if-rails-ujs-ajax-returns-an-error-or-timeout", "title": "Prevent database action if Rails UJS (ajax) returns an Error or Timeout", "body": "<p>I have a Rails UJS modal. When the user clicks the button it triggers an ajax call.\nI update certain database but I want that in case the rails ujs/ajax call timeouts or output an error, NOT to update these databases.</p>\n\n<p>I feel I need to do this in the controller but I fail to find how.</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;div id=\"zone\" class=\"has-js\"&gt;    \n        &lt;%= link_to image_tag(smallest_src_request),\n              deal_modal_path,\n              remote: true,\n              class: \"deal\",\n              alt: \"loadin'\" %&gt;\n      &lt;/span&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>def deal_modal      \n     # First Find UserDeal participation and update it\n     find_and_update_selected_userdeal \n     # Actions on User\n     update_user_profile \n\n     respond_to do |format|\n       format.js\n     end\nend\n</code></pre>\n\n<p>So if the request timeouts, I display a classic message like 'Sorry too long...' which is fine but I noticed that despite this, I was actually doing all the controller actions and updating suerdeal and user tables.</p>\n\n<p>I would like NOT to.</p>\n\n<p>Could I use a before or after_filter and say if xhr status is error (I think it includes the case of \"timeout\"), then DO not do all these methods inside deal_modal method such as find_and_update_selected_userdeal and update_user_profile?</p>\n\n<p>Is that possible ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p><strong>some context</strong></p>\n\n<p>This issue is not related to the efficiency of the database call. Actually it's very fast (with a normal connection it's 150ms)  but the app is mobile-intense and has some \"business rules\" (notably the number of time the user can see the content of the modal, that appears after he clicks the button, is limited to 3).</p>\n\n<p>For example: the user is in a subway  (and right now he has internet connection). He clicks on the link, which today updates the table User with user.total_nb_clicks (increment of 1) but then he enters a tunnel with almost no internet connection for 20 sec. I set in my app a Rails UJS timeout at 10 seconds for UX reasons (so that users do not think it's a bug). So the connection is so slow that the message in the Modal via Rails UJS is not the Result but sth like 'sorry timeout, try again'. But he is allowed only to try his luck 3 times so I should not have updated his column 'total_shots'. It's not his fault nor the app's fault there was a tunnel where he has only 5kb/sec of internet connection: he should still have the right to see 2 more modals/Results. It's a matter of real mobile usecase which can happen...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465401652, "post_id": 37707357, "comment_id": 62888969, "body": "In what universe week 1 does contain Jan 1? What\u2019s wrong with <code>cweek</code>?"}, {"owner": {"reputation": 55, "user_id": 4637262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6984f7b7a8c43b20cc03f2c9290687a1?s=128&d=identicon&r=PG&f=1", "display_name": "TheNoviceAllen", "link": "https://stackoverflow.com/users/4637262/thenoviceallen"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465401908, "post_id": 37707357, "comment_id": 62889147, "body": "I&#39;ve attempted all of the date functions in the Date package, including cweek. So, using cweek on <code>Date.new(2016,1,1).cweek</code> returns 53. Which is not what I need. As far as universe, I can&#39;t help you there."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1465415297, "post_id": 37707357, "comment_id": 62896975, "body": "@mudasobwa E.g. North America, some Asian countries (incl. China), South Africa and most of Latin America commonly use a week numbering scheme where week 1 is indeed the one containing January 1. More common throughout the world however are week numbers according to ISO 8601 where the first week is the one containing January 4."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4637262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6984f7b7a8c43b20cc03f2c9290687a1?s=128&d=identicon&r=PG&f=1", "display_name": "TheNoviceAllen", "link": "https://stackoverflow.com/users/4637262/thenoviceallen"}, "edited": false, "score": 0, "creation_date": 1465403068, "post_id": 37707742, "comment_id": 62889880, "body": "&quot;Way 2&quot; Is exactly what I needed! Thank you very much!"}, {"owner": {"reputation": 55, "user_id": 4637262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6984f7b7a8c43b20cc03f2c9290687a1?s=128&d=identicon&r=PG&f=1", "display_name": "TheNoviceAllen", "link": "https://stackoverflow.com/users/4637262/thenoviceallen"}, "edited": false, "score": 0, "creation_date": 1465403490, "post_id": 37707742, "comment_id": 62890153, "body": "<code>p Date.new(2016,12,19).strftime(&quot;%W&quot;)   #Returns &quot;51&quot;</code> <code>p Date.new(2016,12,19).cweek            #Returns 51</code> <code>p Date.new(2016,12,19).cweek % 53 + 1   #Returns 52</code> Since 12/19/2016 is the last Monday of their 2016 reporting cycle, the week should be 52. <code>p Date.new(2015,12,28).strftime(&quot;%W&quot;)   #Returns &quot;52&quot;</code> <code>p Date.new(2015,12,28).cweek            #Returns 53</code> <code>p Date.new(2015,12,28).cweek % 53 + 1   #Returns 1</code> Since 12/28/2015 is the first Monday of their 2016 reporting cycle, the week returned for that should be 1."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1465403186, "last_edit_date": 1465403186, "creation_date": 1465402443, "answer_id": 37707742, "question_id": 37707357, "link": "https://stackoverflow.com/questions/37707357/return-an-integer-between-1-and-52-based-on-a-given-date/37707742#37707742", "title": "Return an Integer between 1 and 52, based on a given Date", "body": "<h3>Way 1. <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-i-strftime\" rel=\"nofollow\">Date#strftime</a></h3>\n\n<pre><code>Date.new(2016,1,1).strftime(\"%U\").to_i + 1 # week starts with Sunday\nDate.new(2016,1,1).strftime(\"%W\").to_i + 1 # week starts with Monday\n</code></pre>\n\n<h3>Way 2. <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-i-cweek\" rel=\"nofollow\">Date#cweek</a></h3>\n\n<pre><code>Date.new(2016,1,1).cweek % 53 + 1 # week starts with Monday\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4637262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6984f7b7a8c43b20cc03f2c9290687a1?s=128&d=identicon&r=PG&f=1", "display_name": "TheNoviceAllen", "link": "https://stackoverflow.com/users/4637262/thenoviceallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 37707742, "answer_count": 1, "score": 1, "last_activity_date": 1465403186, "creation_date": 1465401251, "last_edit_date": 1465402842, "question_id": 37707357, "link": "https://stackoverflow.com/questions/37707357/return-an-integer-between-1-and-52-based-on-a-given-date", "title": "Return an Integer between 1 and 52, based on a given Date", "body": "<p>I have a client that's giving me data sets that are broken down into quarters, periods (a block of four weeks in a quarter), and weeks. I'm writing a quick reference algorithm to return the quarter, period, week given a date and year and vise versa.</p>\n\n<p>Their data is always broken down into 52 weeks, where week 1 always contains Jan 1st and starts with the Monday before or at Jan 1st. This is how they handle the 365 / 7 = 52.142857 conundrum.</p>\n\n<p>So, is there a gem or built in function (cweek returns 1-53), that would give me a week number based on the premise that week 1 always contains Jan 1st or do I need to design something additional? </p>\n"}, {"tags": ["ruby", "selenium", "webdriver"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1465410756, "post_id": 37707317, "comment_id": 62894469, "body": "I think you need to provide way more information."}, {"owner": {"reputation": 87, "user_id": 2993178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bd113c8d1eb0a39d7bb76db8360a1713?s=128&d=identicon&r=PG&f=1", "display_name": "user2993178", "link": "https://stackoverflow.com/users/2993178/user2993178"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1465415794, "post_id": 37707317, "comment_id": 62897248, "body": "I have to go through each and every cell of an Excel and compare it with a table in my application.But rows in the excel have been grouped on the basis of certain values.Hence i cannot view the entire data unless i click on &#39;+&#39; and ungroup the rows.How can i do that programatically?"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1465418146, "post_id": 37707317, "comment_id": 62898559, "body": "What are you using to bring the Excel data into your program?  Are you reading an Excel file directly?  Interacting with the Excel spreadsheet real time in Excel?  Reading CSV?  Using a library such as Tika or the Ruby gem Rika to employ Tika to parse the Excel file using JRuby?"}], "owner": {"reputation": 87, "user_id": 2993178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bd113c8d1eb0a39d7bb76db8360a1713?s=128&d=identicon&r=PG&f=1", "display_name": "user2993178", "link": "https://stackoverflow.com/users/2993178/user2993178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465401119, "creation_date": 1465401119, "question_id": 37707317, "link": "https://stackoverflow.com/questions/37707317/how-to-ungroup-rows-in-excel-through-scripts", "title": "How to ungroup rows in Excel through scripts?", "body": "<p>I have to compare my application and the Excel downloaded from it. The rows are grouped in Excel.Is there a way to ungroup it through the scripts?</p>\n\n<p>I am using Selenium Webdriver using Ruby.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1465401708, "post_id": 37707289, "comment_id": 62889015, "body": "did you try a heredoc?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465401743, "post_id": 37707289, "comment_id": 62889047, "body": "<code>%Q()</code> for interpolated string, <code>%q()</code> otherwise. Or heredoc."}, {"owner": {"reputation": 17, "user_id": 5150290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SZ2pz.jpg?s=128&g=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/5150290/mandeep"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1465401758, "post_id": 37707289, "comment_id": 62889058, "body": "@max sorry I am not familiar with that :("}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1465401816, "post_id": 37707289, "comment_id": 62889100, "body": "You are not familiar with what? Doing your homework yourself? Googling? Reading the documentation instead of just broadcasting silly question and ignore answers?"}, {"owner": {"reputation": 17, "user_id": 5150290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SZ2pz.jpg?s=128&g=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/5150290/mandeep"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465402048, "post_id": 37707289, "comment_id": 62889218, "body": "@mudasobwa dont get hyper man! I didnt ignore your answer instead I used it and it is working great!!! Thanks a lot for saving my time :)"}, {"owner": {"reputation": 17, "user_id": 5150290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SZ2pz.jpg?s=128&g=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/5150290/mandeep"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1465402139, "post_id": 37707289, "comment_id": 62889278, "body": "I am not ablt to give two votes here lolzz. 20 votes for you @mudasobwa ;)"}], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": true, "score": 1, "last_activity_date": 1465403057, "creation_date": 1465403057, "answer_id": 37707953, "question_id": 37707289, "link": "https://stackoverflow.com/questions/37707289/how-to-use-single-quotes-inside-single-quots-to-run-bash-script-from-ruby-contro/37707953#37707953", "title": "How to use single quotes inside single quots to run bash script from ruby controller", "body": "<p>You can use the backtick operator to delimit a command - it will return the result of the command. For example:</p>\n\n<pre><code>output = `ls /usr/`\n=&gt; \"X11\\nX11R6\\nadic\\nbin\\nlib\\n\"\nputs output\nX11\nX11R6\nadic\nbin\nlib\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 6314692, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c668e394d9c94d26b17a776afb51ddc9?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Essam", "link": "https://stackoverflow.com/users/6314692/omar-essam"}, "is_accepted": false, "score": 0, "last_activity_date": 1523622864, "creation_date": 1523622864, "answer_id": 49817125, "question_id": 37707289, "link": "https://stackoverflow.com/questions/37707289/how-to-use-single-quotes-inside-single-quots-to-run-bash-script-from-ruby-contro/49817125#49817125", "title": "How to use single quotes inside single quots to run bash script from ruby controller", "body": "<p>A better way would be to use shellwords</p>\n\n<pre><code>require \"shellwords\"\nargs = [\"ls\", \"/usr/\"]\noutput = `#{args.shelljoin}`\n</code></pre>\n\n<p>this handles quotes and everything for you</p>\n"}], "owner": {"reputation": 17, "user_id": 5150290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SZ2pz.jpg?s=128&g=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/5150290/mandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37707953, "answer_count": 2, "score": -5, "last_activity_date": 1523622864, "creation_date": 1465401037, "question_id": 37707289, "link": "https://stackoverflow.com/questions/37707289/how-to-use-single-quotes-inside-single-quots-to-run-bash-script-from-ruby-contro", "title": "How to use single quotes inside single quots to run bash script from ruby controller", "body": "<p>Hi Guys I am trying to read a zipped folder using bash commands. I am totally new to it. I am unable to use double quots inside double quots which leads to an error while executing this command.</p>\n\n<pre><code>captured_content = capture_stdout do\n      system(\"tar -tf 3531622.tar.xz | awk -F'/' '{ for (i=1;i&lt;4;i++) print \"/\"$i ; print \"\\n\"}' ORS='' |grep \"/\"|uniq\")\n    end\n</code></pre>\n\n<p>Any help would be appreciated and please dont downvote the question I reaaly need help in it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git"], "comments": [{"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1465403930, "post_id": 37707213, "comment_id": 62890462, "body": "Can you try opening a new terminal window and see if you are still experiencing the same behavior?"}, {"owner": {"reputation": 43, "user_id": 5875155, "user_type": "registered", "profile_image": "https://graph.facebook.com/1652610575004154/picture?type=large", "display_name": "Eric Doyle", "link": "https://stackoverflow.com/users/5875155/eric-doyle"}, "reply_to_user": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1465404795, "post_id": 37707213, "comment_id": 62891013, "body": "I just did that and I&#39;m still getting the same behavior."}], "answers": [{"tags": [], "owner": {"reputation": 602, "user_id": 5065438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306841f540dc52fdc68605d254c522ac?s=128&d=identicon&r=PG&f=1", "display_name": "Jovica \u0160u\u0161a", "link": "https://stackoverflow.com/users/5065438/jovica-%c5%a0u%c5%a1a"}, "is_accepted": false, "score": 0, "last_activity_date": 1465414672, "creation_date": 1465414672, "answer_id": 37711462, "question_id": 37707213, "link": "https://stackoverflow.com/questions/37707213/rbenv-says-ruby-2-1-2-isnt-installed-even-after-i-installed-it/37711462#37711462", "title": "Rbenv says Ruby 2.1.2 isn&#39;t installed even after I installed it", "body": "<p>Your .ruby-version file is used by rbenv to detect what version of Ruby to use(besides looking in this file rbenv also looks in RBENV_VERSION environment variable if it's specified, and some other files). So in your case specified Ruby version was 2.1.2 and since it's not installed on your system rbenv complained about that, but since rbenv looks on few other places to detect what version of Ruby to use it found some other version and used it to run your code.\nAfter installing version 2.1.2 your system now have version defined in your .ruby-version and rbenv will use it to run your code, but since your gems are installed for version of Ruby that you were using before 2.1.2 you'll get errors. At least I think that's what is going on, it would be great if some experienced programmer can comment on this.</p>\n"}], "owner": {"reputation": 43, "user_id": 5875155, "user_type": "registered", "profile_image": "https://graph.facebook.com/1652610575004154/picture?type=large", "display_name": "Eric Doyle", "link": "https://stackoverflow.com/users/5875155/eric-doyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465414807, "creation_date": 1465400814, "last_edit_date": 1465414807, "question_id": 37707213, "link": "https://stackoverflow.com/questions/37707213/rbenv-says-ruby-2-1-2-isnt-installed-even-after-i-installed-it", "title": "Rbenv says Ruby 2.1.2 isn&#39;t installed even after I installed it", "body": "<p>When I used rails s to initiate the Rails server I get this.</p>\n\n<pre><code>\u279c  zumin-share git:(master) rails s\n\nrbenv: version `2.1.2' is not installed (set by /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/.ruby-version)\n</code></pre>\n\n<p>I then try to install rbenv 2.1.2 and the installer should be finished. I checked Rbenv version and I get.</p>\n\n<pre><code>rbenv version\n\n2.1.2 (set by /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/.ruby-version)\n</code></pre>\n\n<p>I thought it was the .ruby-version file giving me trouble and when I removed it I get. </p>\n\n<pre><code>rails s\n\n/usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/smart_listing-1.0.0/lib/smart_listing/config.rb:73: warning: duplicated key at line 79 ignored: :href\n/usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/ansi-1.4.3/lib/ansi/chart.rb:26: warning: duplicated key at line 29 ignored: :concealed\n=&gt; Booting Thin\n=&gt; Rails 4.2.0 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\nExiting\n/usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/application/configuration.rb:110:in `database_configuration': Cannot load `Rails.application.database_configuration`: (RuntimeError)\nCould not load database configuration. No such file - [\"config/database.yml\"]\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.0/lib/active_record/railtie.rb:117:in `block (2 levels) in &lt;class:Railtie&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/lazy_load_hooks.rb:38:in `instance_eval'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/lazy_load_hooks.rb:38:in `execute_hook'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/lazy_load_hooks.rb:28:in `block in on_load'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/lazy_load_hooks.rb:27:in `each'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/lazy_load_hooks.rb:27:in `on_load'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.0/lib/active_record/railtie.rb:116:in `block in &lt;class:Railtie&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/initializable.rb:30:in `instance_exec'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/initializable.rb:30:in `run'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/initializable.rb:55:in `block in run_initializers'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:226:in `block in tsort_each'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:429:in `each_strongly_connected_component_from'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:347:in `block in each_strongly_connected_component'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:345:in `each'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:345:in `call'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:345:in `each_strongly_connected_component'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:224:in `tsort_each'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/tsort.rb:203:in `tsort_each'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/initializable.rb:54:in `run_initializers'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/application.rb:352:in `initialize!'\n  from /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/config/environment.rb:5:in `&lt;top (required)&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `block in require'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\n  from /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/config.ru:3:in `block in &lt;main&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n  from /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/config.ru:in `new'\n  from /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/config.ru:in `&lt;main&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/server.rb:61:in `app'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/server.rb:139:in `log_to_stdout'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/server.rb:78:in `start'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:75:in `tap'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:75:in `server'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n  from /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/bin/rails:8:in `require'\n  from /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/bin/rails:8:in `&lt;top (required)&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.2.0/lib/spring/client/rails.rb:27:in `load'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.2.0/lib/spring/client/rails.rb:27:in `call'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.2.0/lib/spring/client/command.rb:7:in `call'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.2.0/lib/spring/client.rb:26:in `run'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.2.0/bin/spring:48:in `&lt;top (required)&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.2.0/lib/spring/binstub.rb:11:in `load'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.2.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n  from /usr/local/var/rbenv/versions/2.2.3/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n  from /Users/ericxavierdoyle/Eric_Dev/ElliotWhyte/zumin-share/bin/spring:16:in `&lt;top (required)&gt;'\n  from bin/rails:3:in `load'\n  from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-applications"], "answers": [{"comments": [{"owner": {"reputation": 110, "user_id": 5657878, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C9nRy.png?s=128&g=1", "display_name": "LEoREo_2247", "link": "https://stackoverflow.com/users/5657878/leoreo-2247"}, "edited": false, "score": 0, "creation_date": 1465453136, "post_id": 37707170, "comment_id": 62909153, "body": "what do you mean by that? sorry, I just started learning rails recently."}, {"owner": {"reputation": 110, "user_id": 5657878, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C9nRy.png?s=128&g=1", "display_name": "LEoREo_2247", "link": "https://stackoverflow.com/users/5657878/leoreo-2247"}, "edited": false, "score": 0, "creation_date": 1465484170, "post_id": 37707170, "comment_id": 62930177, "body": "I see. thank you so much for very detailed explanation! ;)"}], "tags": [], "owner": {"reputation": 1723, "user_id": 45405, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nFfgw.png?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/45405/rick"}, "is_accepted": true, "score": 2, "last_activity_date": 1465478868, "last_edit_date": 1465478868, "creation_date": 1465400656, "answer_id": 37707170, "question_id": 37705803, "link": "https://stackoverflow.com/questions/37705803/display-desired-url-of-webpage-inline-with-replacement-of-html-code-like-google/37707170#37707170", "title": "Display desired url of webpage inline with replacement of html code like Google Translate", "body": "<p>If you are displaying HTML from another domain on your domain, then any relative URLs used in the HTML (links, scripts, styles, etc.) aren't going to correspond with files that exist on your domain. You are going to have to parse the HTML and either expand the URLs to full URLs that point to the original domain (easier) OR you are going to have to download all the content to your domain using the same path structure.</p>\n\n<p>Example:</p>\n\n<p>To display an image, a site (example.com) could use any of the following src attributes:</p>\n\n<pre><code>&lt;img src=\"http://example.com/images/logo.jpg\" alt=\"My Logo\" /&gt;\n&lt;img src=\"/images/logo.jpg\" alt=\"My Logo\" /&gt;\n&lt;img src=\"../../images/logo.jpg\" alt=\"My Logo\" /&gt;\n</code></pre>\n\n<p>If the site always used the full URL like in the first example, you wouldn't have a problem displaying the image. If they used the second one, your site wouldn't be able to find \"/images/logo.jpg\" on <em>your</em> server. You would have to parse all the img elements and prepend the domain. The third example you would have to do even more work by determining the path to the image based on the current URL you were displaying.</p>\n"}], "owner": {"reputation": 110, "user_id": 5657878, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C9nRy.png?s=128&g=1", "display_name": "LEoREo_2247", "link": "https://stackoverflow.com/users/5657878/leoreo-2247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 37707170, "answer_count": 1, "score": 1, "last_activity_date": 1465478868, "creation_date": 1465397135, "question_id": 37705803, "link": "https://stackoverflow.com/questions/37705803/display-desired-url-of-webpage-inline-with-replacement-of-html-code-like-google", "title": "Display desired url of webpage inline with replacement of html code like Google Translate", "body": "<p>I want to make app which will switch vocabulary in desired url of webpage Japanese to English.\nBut firstable I want start form just simply display desired url of webpage inline lust like Google Translate.(<a href=\"https://translate.google.com/translate?sl=ja&amp;tl=en&amp;js=y&amp;prev=_t&amp;hl=ja&amp;ie=UTF-8&amp;u=https%3A%2F%2Fringo-12.com&amp;edit-text=&amp;act=url\" rel=\"nofollow\">See here</a>)</p>\n\n<p>I tried to use open-uri library, and get html from webpage, and display it with code below.</p>\n\n<p>Controller:</p>\n\n<pre><code>def submit\n    require 'open-uri'\n\n    charset = nil\n    @html = open(params[:url]) do |f|\n      charset = f.charset\n      f.read\n    end\nend\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;%= @html.html_safe %&gt;\n</code></pre>\n\n<p>But I have problem with this, which simply won't load Images and some stylesheets in page.\nAny way to display image and css?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2559, "user_id": 2428124, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0b8d5f0469fd19543aae40a101713834?s=128&d=identicon&r=PG", "display_name": "ste", "link": "https://stackoverflow.com/users/2428124/ste"}, "edited": false, "score": 0, "creation_date": 1465399018, "post_id": 37706294, "comment_id": 62886948, "body": "Thank you, but there is another problem, with your code I see the confirmation box but there is no more &quot;user&quot; params and I get the following error: &quot;Couldn&#39;t find User with &#39;id&#39;=&quot;. If I try to print params in the console I get the following: {&quot;controller&quot;=&gt;&quot;users&quot;, &quot;action&quot;=&gt;&quot;set_donation_done&quot;}"}], "tags": [], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "is_accepted": false, "score": 1, "last_activity_date": 1465398884, "last_edit_date": 1465398884, "creation_date": 1465398303, "answer_id": 37706294, "question_id": 37705754, "link": "https://stackoverflow.com/questions/37705754/ruby-on-rails-add-confirmation-to-link-to/37706294#37706294", "title": "Ruby on Rails add confirmation to link_to", "body": "<p>Try with this:</p>\n\n<pre><code>&lt;%= link_to 'set done', { controller: 'users', action: 'set_donation_done' }, user: user, data: { confirm: 'Are you sure?' } %&gt;\n</code></pre>\n\n<p>Remember:</p>\n\n<pre><code>link_to(body, url_hash, html_hash)\n</code></pre>\n\n<p><a href=\"http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to\" rel=\"nofollow\">http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to</a></p>\n"}, {"tags": [], "owner": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "is_accepted": false, "score": 0, "last_activity_date": 1465399179, "creation_date": 1465399179, "answer_id": 37706627, "question_id": 37705754, "link": "https://stackoverflow.com/questions/37705754/ruby-on-rails-add-confirmation-to-link-to/37706627#37706627", "title": "Ruby on Rails add confirmation to link_to", "body": "<p>You don't need the controller action hash. Simply show when the HTML hash starts like so:\n <code>&lt;td&gt;&lt;%= link_to 'Destroy', user, method: :delete,{ data: { confirm: 'Are you sure?' }} %&gt;&lt;/td&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 2559, "user_id": 2428124, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0b8d5f0469fd19543aae40a101713834?s=128&d=identicon&r=PG", "display_name": "ste", "link": "https://stackoverflow.com/users/2428124/ste"}, "is_accepted": true, "score": 0, "last_activity_date": 1465403330, "creation_date": 1465403330, "answer_id": 37708045, "question_id": 37705754, "link": "https://stackoverflow.com/questions/37705754/ruby-on-rails-add-confirmation-to-link-to/37708045#37708045", "title": "Ruby on Rails add confirmation to link_to", "body": "<p>Found the solution:</p>\n\n<pre><code> &lt;td&gt;&lt;%= link_to 'set done', {:controller =&gt; 'users', :action =&gt; 'set_donation_done', :user =&gt; user}, data: { confirm: 'Are you sure?'}  %&gt;&lt;td&gt;\n</code></pre>\n\n<p>Whit this formula I have my user data in params and I can see the confirmation box!</p>\n"}], "owner": {"reputation": 2559, "user_id": 2428124, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0b8d5f0469fd19543aae40a101713834?s=128&d=identicon&r=PG", "display_name": "ste", "link": "https://stackoverflow.com/users/2428124/ste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "accepted_answer_id": 37708045, "answer_count": 3, "score": 0, "last_activity_date": 1465403330, "creation_date": 1465397020, "question_id": 37705754, "link": "https://stackoverflow.com/questions/37705754/ruby-on-rails-add-confirmation-to-link-to", "title": "Ruby on Rails add confirmation to link_to", "body": "<p>I'm building a Ruby on Rails application and I have generated some scaffold.\nI want to add a confirmation box (like the one that pops up when you delete an element) to a custom link I created.</p>\n\n<p>The syntax for the element deletion is the following:</p>\n\n<pre><code>  &lt;td&gt;&lt;%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>This is my custom link:</p>\n\n<pre><code>   &lt;td&gt;&lt;%= link_to 'set done', :controller =&gt; 'users', :action =&gt; 'set_donation_done', :user =&gt; user, data: { confirm: 'Are you sure?' } %&gt;&lt;td&gt;\n</code></pre>\n\n<p>The problem is that the confirmation box on my custom link does not appear. If I inspect the element I see the following html code:</p>\n\n<pre><code>&lt;a href=\"/set_donation_done?data%5Bconfirm%5D=Are+you+sure%3F&amp;amp;user=71\"&gt;set done&lt;/a&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1465399354, "post_id": 37705157, "comment_id": 62887206, "body": "From <a href=\"http://ruby-doc.org/core-2.3.1/doc/syntax/assignment_rdoc.html#label-Assignment+Methods\" rel=\"nofollow noreferrer\">Assignment Methods</a>: <i>&quot;When using method assignment you must always have a receiver. If you do not have a receiver, Ruby assumes you are assigning to a local variable&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1465396773, "post_id": 37705614, "comment_id": 62885208, "body": "Why is the getter method relevant?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1465396992, "post_id": 37705614, "comment_id": 62885385, "body": "Because I missed method obviously :D"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1465396948, "last_edit_date": 1465396948, "creation_date": 1465396654, "answer_id": 37705614, "question_id": 37705157, "link": "https://stackoverflow.com/questions/37705157/how-can-i-access-setter-and-getter-methods-from-an-instance-method-in-a-ruby-obj/37705614#37705614", "title": "How can I access setter and getter methods from an instance method in a Ruby object instance?", "body": "<p>Your <code>login_method=</code> instance method needs a receiver. If this is not important for you and you can make it private this should do the trick</p>\n\n<pre><code>private\n\ndef login_method=(value)\n    debugger;\n    @login_method\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465399180, "post_id": 37706520, "comment_id": 62887078, "body": "The OP is aware that it works with <code>self</code>, the question is &quot;why?&quot;"}, {"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465399545, "post_id": 37706520, "comment_id": 62887358, "body": "well, was this and was also that the setter method was wrong: it was not assigning the value"}], "tags": [], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "is_accepted": false, "score": 1, "last_activity_date": 1465398853, "creation_date": 1465398853, "answer_id": 37706520, "question_id": 37705157, "link": "https://stackoverflow.com/questions/37705157/how-can-i-access-setter-and-getter-methods-from-an-instance-method-in-a-ruby-obj/37706520#37706520", "title": "How can I access setter and getter methods from an instance method in a Ruby object instance?", "body": "<p>Try with this:</p>\n\n<pre><code>class MyClass\n  def login_method\n    @login_method\n  end\n  def login_method=(value)\n    @login_method = value\n  end\n  def mymeth\n    self.login_method = 15\n  end\nend\n\nobj = MyClass.new\nobj.mymeth\nputs obj.login_method\n</code></pre>\n\n<p>You can also do this:</p>\n\n<pre><code>class MyClass\n  attr_accessor :login_method\n\n  def mymeth\n    self.login_method = 15\n  end\nend\n\nobj = MyClass.new\nobj.mymeth\nputs obj.login_method\n</code></pre>\n"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1465590039, "answer_count": 2, "score": -1, "last_activity_date": 1465398853, "creation_date": 1465395612, "question_id": 37705157, "link": "https://stackoverflow.com/questions/37705157/how-can-i-access-setter-and-getter-methods-from-an-instance-method-in-a-ruby-obj", "closed_reason": "Duplicate", "title": "How can I access setter and getter methods from an instance method in a Ruby object instance?", "body": "<p>This question is about setter and getter methods in Ruby. In the example below, I have three methods. The first two are, respectively, to get and set an instance variable <code>@login_method</code>. The third is an instance method that attempts to access the setter method. It fails to access the setter method, because when the line <code>login_method = 15</code> is run, execution does not stop for the debugger statement I placed inside the setter method.\nWhy can I not access the setter method from inside of method <code>mymeth</code>? I can access it if I prefix the setter method call with \"self\", but why do I have to do this?</p>\n\n<pre><code>require 'byebug'\nclass MyClass\n  def login_method\n    debugger;\n    @login_method\n  end\n  def login_method=(value)\n    debugger;\n    @login_method\n  end\n  def mymeth\n    debugger;\n    login_method = 15\n  end\nend\n\nobj = MyClass.new\nobj.mymeth\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465397661, "post_id": 37705131, "comment_id": 62885910, "body": "Please check both, your spelling and your code before posting something."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6113401, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/37c3e99e6cc5c4f002fe2268bfc9cc87?s=128&d=identicon&r=PG&f=1", "display_name": "FroggyFreshh", "link": "https://stackoverflow.com/users/6113401/froggyfreshh"}, "edited": false, "score": 0, "creation_date": 1465399155, "post_id": 37706279, "comment_id": 62887047, "body": "I will try this :) looks promising"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1465398249, "creation_date": 1465398249, "answer_id": 37706279, "question_id": 37705131, "link": "https://stackoverflow.com/questions/37705131/ruby-recieving-text-between-words/37706279#37706279", "title": "Ruby recieving text between words", "body": "<pre><code>input.scan(/(?&lt;=Word\\s\\d).*?(?=end)/m).map &amp;:strip\n#\u21d2 [\n#  [0] \"this is text\\n   more \\\"text\\\"\\n   this is more text\",\n#  [1] \"this is more text\\n   more \\\"text\\\"\\n   this is more more text\"\n#]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 6113401, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/37c3e99e6cc5c4f002fe2268bfc9cc87?s=128&d=identicon&r=PG&f=1", "display_name": "FroggyFreshh", "link": "https://stackoverflow.com/users/6113401/froggyfreshh"}, "edited": false, "score": 0, "creation_date": 1465399134, "post_id": 37706289, "comment_id": 62887029, "body": "It is not in a file . It gets passed to this method as a string :)"}], "tags": [], "owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "is_accepted": false, "score": 0, "last_activity_date": 1465398291, "creation_date": 1465398291, "answer_id": 37706289, "question_id": 37705131, "link": "https://stackoverflow.com/questions/37705131/ruby-recieving-text-between-words/37706289#37706289", "title": "Ruby recieving text between words", "body": "<p>How is your string defined? Is it in a file?</p>\n\n<p>If it's in a file.</p>\n\n<pre><code>string = File.read('my_file.txt')\nstring.scan(/Word\\s.(.*?)end/m)\n#=&gt; [[\"\\n   this is text\\n   more \\\"text\\\"\\n   this is more text\\n \"], [\"\\n   this is more text\\n   more \\\"text\\\"\\n   this is more more text\\n \"]]\n</code></pre>\n\n<p>Otherwise ignore the first line.</p>\n"}], "owner": {"reputation": 71, "user_id": 6113401, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/37c3e99e6cc5c4f002fe2268bfc9cc87?s=128&d=identicon&r=PG&f=1", "display_name": "FroggyFreshh", "link": "https://stackoverflow.com/users/6113401/froggyfreshh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1465399269, "creation_date": 1465395559, "last_edit_date": 1465399269, "question_id": 37705131, "link": "https://stackoverflow.com/questions/37705131/ruby-recieving-text-between-words", "title": "Ruby recieving text between words", "body": "<p>I have a problem regarding filtering text between 2 words,\nthe string that I'm trying to filter looks like this:</p>\n\n<pre><code>Word 1\n   this is text\n   more \"text\"\n   this is more text\n end\n Word 3\n   this is more text\n   more \"text\"\n   this is more more text\n end\n</code></pre>\n\n<p>What I am trying to do is filtering the pieces of the text between \"Word\" and \"End\" and put them seperatly in an 2d array like so </p>\n\n<pre><code>array = [[\"this is more text /n more \"text\" /n this is more text\"][\"this is more text /n more \"text\" /n this is more more text\"]\n</code></pre>\n\n<p>What I have now atm is this:</p>\n\n<pre><code>test = []\nresult = string.san(/Word\\s.(.*?)end/m)\nres.each do |r|\n   test.push(r[0])\nend\nreturn test\n</code></pre>\n\n<p>Any help will be greatly appreciated\nKind regards</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-applications", "subdomain", "user-profile"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1465395673, "post_id": 37705089, "comment_id": 62884329, "body": "<a href=\"http://railscasts.com/episodes/221-subdomains-in-rails-3?autoplay=true\" rel=\"nofollow noreferrer\">railscasts.com/episodes/221-subdomains-in-rails-3?autoplay=t&zwnj;&#8203;rue</a>"}], "owner": {"reputation": 31, "user_id": 5573269, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153441407738645/picture?type=large", "display_name": "Shenil", "link": "https://stackoverflow.com/users/5573269/shenil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1465395466, "creation_date": 1465395466, "question_id": 37705089, "link": "https://stackoverflow.com/questions/37705089/how-to-create-a-subdomain-for-each-users-profile-page-in-a-rails-app", "title": "How to create a subdomain for each user&#39;s profile page in a rails app?", "body": "<p>I am working on a ruby on rails music webapp (alphabeatsmusic.com), in which I would like to link artists' profile page with the domain: artistname.alphabeatsmusic.com</p>\n\n<p>Please can you advise steps to achieve this? My experience with coding is fairly low - thus attempts using other links did not succeed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "edited": false, "score": 0, "creation_date": 1465396482, "post_id": 37705381, "comment_id": 62884971, "body": "I should also count days and for each time. For example when one work three times a week another can work more..."}, {"owner": {"reputation": 508, "user_id": 5011742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec446968095707a8ce6d14afd529648?s=128&d=identicon&r=PG", "display_name": "apod", "link": "https://stackoverflow.com/users/5011742/apod"}, "reply_to_user": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "edited": false, "score": 0, "creation_date": 1465396850, "post_id": 37705381, "comment_id": 62885270, "body": "So you want the employee who has worked the most over the last week? Or an arbitrary week you specify?"}, {"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "edited": false, "score": 0, "creation_date": 1465397008, "post_id": 37705381, "comment_id": 62885402, "body": "I want count hours per week for each person and get who has the most. All weeks are same. E.G When I specify that person_id: 1 start_time: 8:00 end_time: 12:00 day_of_week: monday. This applies to every week."}, {"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "edited": false, "score": 0, "creation_date": 1465398945, "post_id": 37705381, "comment_id": 62886892, "body": "could you explain me what is here? I want understand."}, {"owner": {"reputation": 508, "user_id": 5011742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec446968095707a8ce6d14afd529648?s=128&d=identicon&r=PG", "display_name": "apod", "link": "https://stackoverflow.com/users/5011742/apod"}, "reply_to_user": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "edited": false, "score": 0, "creation_date": 1465399693, "post_id": 37705381, "comment_id": 62887472, "body": "Added some explanation. Let me know if anything needs clarification. I know it&#39;s definitely not the prettiest ActiveRecord query in the world, but I think it works."}], "tags": [], "owner": {"reputation": 508, "user_id": 5011742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec446968095707a8ce6d14afd529648?s=128&d=identicon&r=PG", "display_name": "apod", "link": "https://stackoverflow.com/users/5011742/apod"}, "is_accepted": true, "score": 1, "last_activity_date": 1465399640, "last_edit_date": 1465399640, "creation_date": 1465396138, "answer_id": 37705381, "question_id": 37704990, "link": "https://stackoverflow.com/questions/37704990/getting-most-busy-employee-from-the-query/37705381#37705381", "title": "Getting most busy employee from the query", "body": "<p>For all days of the week (i.e., summing across all days of the week):\n<code>WorkSchedule.group(:person_id).sum('extract(epoch from work_schedules.end_time) -extract(epoch from work_schedules.start_time)').sort_by { |_,v| -v}.first.first</code></p>\n\n<p>This will give you the ID of the Person who has worked the most over all WorkSchedules. I've only tested it with PostgreSQL.</p>\n\n<p>What's going on in this query:</p>\n\n<ol>\n<li>Get all the work schedule objects and group them by person ids</li>\n<li>For each of these groups of work schedules, get the sum of the differences between the start and end times. The extract epoch from tells SQL to get the timestamps as integers (UNIX timestamps, I believe). It is necessary because otherwise the result of the query gives these sums as strings such as \"17 days 136:57:42.748124\" which ruby cannot sort correctly.</li>\n<li>The SQL query results in hash of the form {person_id: time_scheduled_in_seconds}.</li>\n<li>The sort_by sorts the query in reverse of the values. We aren't using the keys from the hash so we use an underscore rather than a name to ignore them.</li>\n<li>Then we take the first item in this hash (hence the first \".first\").</li>\n<li>Since that actually returns an array with the person_id as the first value and the number of seconds as the second value, we keep only the first item (hence the second \".first\")</li>\n</ol>\n"}], "owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 37705381, "answer_count": 1, "score": 0, "last_activity_date": 1465399640, "creation_date": 1465395179, "question_id": 37704990, "link": "https://stackoverflow.com/questions/37704990/getting-most-busy-employee-from-the-query", "title": "Getting most busy employee from the query", "body": "<p>I have two models:</p>\n\n<pre><code># Table name: work_schedules\n#\n#  id          :integer          not null, primary key\n#  start_time  :time             not null\n#  end_time    :time             not null\n#  day_of_week :string           not null\n#  updated_at  :datetime         not null\n#  person_id   :integer\n\n# Table name: people\n#\n#  id                         :integer          not null, primary key\n#  pesel                      :string           not null\n#  first_name                 :string           not null\n#  last_name                  :string           not null\n</code></pre>\n\n<p>I want to get the most busy employee in query.\nFirst I should count hours(end_time - start_time) and count day_of_week(unique attribute scope: person_id). I don't have any idea how to create properly query this.\nWhat I tried:</p>\n\n<pre><code>@most_busy = Person.joins(:work_schedules).where(%q{end_time - start_time}).first\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "is_accepted": true, "score": 2, "last_activity_date": 1465395264, "creation_date": 1465395264, "answer_id": 37705012, "question_id": 37704913, "link": "https://stackoverflow.com/questions/37704913/error-argumenterror-in-messagesnew-wrong-number-of-arguments-2-for-1/37705012#37705012", "title": "Error : ArgumentError in Messages#new wrong number of arguments (2 for 1)", "body": "<p>Under <code>#{image_tag avatar_url(user.email, size: 50)}</code> you are passing two arguments, but <code>def avatar_url(user)</code> only takes one.</p>\n"}, {"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1465395338, "creation_date": 1465395338, "answer_id": 37705036, "question_id": 37704913, "link": "https://stackoverflow.com/questions/37704913/error-argumenterror-in-messagesnew-wrong-number-of-arguments-2-for-1/37705036#37705036", "title": "Error : ArgumentError in Messages#new wrong number of arguments (2 for 1)", "body": "<p>You defined <code>avatar_url</code> that takes one parameter but you are passing two at it</p>\n\n<pre><code>avatar_url(user.email, size: 50)\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6220333, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c0d883832689165159f78cd5bfc346d0?s=128&d=identicon&r=PG&f=1", "display_name": "MSK", "link": "https://stackoverflow.com/users/6220333/msk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 37705012, "answer_count": 2, "score": -1, "last_activity_date": 1465395338, "creation_date": 1465394953, "question_id": 37704913, "link": "https://stackoverflow.com/questions/37704913/error-argumenterror-in-messagesnew-wrong-number-of-arguments-2-for-1", "title": "Error : ArgumentError in Messages#new wrong number of arguments (2 for 1)", "body": "<p>I m getting ArgumentError in Messages#new\napp/views/messages/new.html.erb where line #16 raised:\n \"wrong number of arguments (2 for 1)\" \nIt also says:</p>\n\n<p>app/helpers/application_helper.rb:8:in <code>avatar_url'\napp/helpers/messages_helper.rb:5:in</code>block in recipients_options'\napp/helpers/messages_helper.rb:4:in <code>recipients_options'\napp/views/messages/new.html.erb:16:in</code>block in _app_views_messages_new_html_erb___264831154_80406348'\napp/views/messages/new.html.erb:3:in `_app_views_messages_new_html_erb___264831154_80406348'</p>\n\n<p>My application helper:</p>\n\n<pre><code>module ApplicationHelper\n\ndef page_header(text)\n    content_for(:page_header) { text.to_s }\nend\n\n\ndef avatar_url(user)\n    if user.image\n        user.image\n    else\n        \"/images/missing.png\"\n    end\nend\nend\n</code></pre>\n\n<p>My messages helper is,</p>\n\n<pre><code>module MessagesHelper\n\n\ndef recipients_options(chosen_recipient = nil)\n    s = ''\n    User.all.each do |user|\n      s &lt;&lt; \"&lt;option value='#{user.id}' data-img-src='#{image_tag avatar_url(user.email, size: 50)}' #{'selected' if user == chosen_recipient}&gt;#{user.name}&lt;/option&gt;\"\n    end\n    s.html_safe\n  end\nend\n</code></pre>\n\n<p>my messages/new.html.erb is,</p>\n\n<pre><code>&lt;% page_header \"Start Conversation\" %&gt;\n\n&lt;%= form_tag messages_path, method: :post do %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= label_tag 'message[subject]', 'Subject' %&gt;\n    &lt;%= text_field_tag 'message[subject]', nil, class: 'form-control', required: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= label_tag 'message[body]', 'Message' %&gt;\n    &lt;%= text_area_tag 'message[body]', nil, cols: 3, class: 'form-control', required: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= label_tag 'recipients', 'Choose recipients' %&gt;\n    &lt;%= select_tag 'recipients', recipients_options(@chosen_recipient), multiple: true, class: 'form-control chosen-it' %&gt;\n  &lt;/div&gt;\n\n  &lt;%= submit_tag 'Send', class: 'btn btn-primary' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>messages_controller.rb</p>\n\n<pre><code>class MessagesController &lt; ApplicationController\n\n\n before_action :authenticate_user!\n\n  def new\n    @chosen_recipient = User.find_by(id: params[:to].to_i) if params[:to]\n  end\n\n  def create\n    recipients = User.where(id: params['recipients'])\n    conversation = current_user.send_message(recipients, params[:message][:body], params[:message][:subject]).conversation\n    flash[:success] = \"Message has been sent!\"\n    redirect_to conversation_path(conversation)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1465394991, "creation_date": 1465394991, "answer_id": 37704927, "question_id": 37704892, "link": "https://stackoverflow.com/questions/37704892/datetime-syntax-error-when-passing-to-cgi/37704927#37704927", "title": "DateTime syntax error when passing to CGI", "body": "<p>Why are you using \u00b4? Try straight single quote '</p>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1465395114, "creation_date": 1465395114, "answer_id": 37704971, "question_id": 37704892, "link": "https://stackoverflow.com/questions/37704892/datetime-syntax-error-when-passing-to-cgi/37704971#37704971", "title": "DateTime syntax error when passing to CGI", "body": "<p>The problem is the last argument you're passing to <code>DateTime.new</code>:</p>\n\n<pre><code>endTime=CGI.escape(DateTime.new(2016, 6, 24, 8, 21, 0, \u2018+5\u2019))\n</code></pre>\n\n<p>This: <code>\u2018+5\u2019</code> should be this: <code>'+5'</code>.</p>\n\n<p>I see this problem pop up a lot when people use a general-purpose text editor (e.g. TextEdit on OS X) which automatically converts quotation marks into \"smart quotes.\" The best solution is to switch to an editor meant for programming (like SublimeText or Atom on OS X). In the meantime make sure you turn off \"smart quotes\" and other automatic text corrections/substitutions in whatever editor you're using.</p>\n"}], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12, "favorite_count": 0, "accepted_answer_id": 37704971, "answer_count": 2, "score": 0, "last_activity_date": 1465395114, "creation_date": 1465394906, "question_id": 37704892, "link": "https://stackoverflow.com/questions/37704892/datetime-syntax-error-when-passing-to-cgi", "title": "DateTime syntax error when passing to CGI", "body": "<p>I have been trying to solve this syntax error for a while and can't seem to figure it out. Is DateTime not returning an object that can be interpreted by CGI.escape?....Based on what I read in the DateTime docs my code seems like it should work.</p>\n\n<p>Error</p>\n\n<pre><code>getTimes.rb:6: syntax error, unexpected tIDENTIFIER, expecting ')'\nendTime=CGI.escape(DateTime.new(2016, 6, 24, 8, 21, 0, \u2018+5\u2019))\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>require 'cgi'\nrequire 'date'\n#new([year=-4712[, month=1[, mday=1[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]]]]) \u2192 datetime\nstartTime=DateTime.now\n#startTime=CGI.escape(DateTime.new(2015, 12, 24, 8, 21, 0, \u2018+5\u2019))\nendTime=CGI.escape(DateTime.new(2016, 6, 24, 8, 21, 0, \u2018+5\u2019))\n\nputs startTime\nputs endTime\n</code></pre>\n\n<p>I am using ruby 2.3 if it changes things.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 602, "user_id": 5065438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306841f540dc52fdc68605d254c522ac?s=128&d=identicon&r=PG&f=1", "display_name": "Jovica \u0160u\u0161a", "link": "https://stackoverflow.com/users/5065438/jovica-%c5%a0u%c5%a1a"}, "is_accepted": false, "score": 2, "last_activity_date": 1465394515, "creation_date": 1465394515, "answer_id": 37704741, "question_id": 37704561, "link": "https://stackoverflow.com/questions/37704561/rails4-behavior-based-on-link-to-is-nil/37704741#37704741", "title": "rails4 behavior based on link_to is nil", "body": "<p>You can create custom view helper for this.</p>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 2726340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab85ff757dec09d8299d2ee26906997c?s=128&d=identicon&r=PG", "display_name": "Stan", "link": "https://stackoverflow.com/users/2726340/stan"}, "is_accepted": false, "score": 2, "last_activity_date": 1465394519, "creation_date": 1465394519, "answer_id": 37704743, "question_id": 37704561, "link": "https://stackoverflow.com/questions/37704561/rails4-behavior-based-on-link-to-is-nil/37704743#37704743", "title": "rails4 behavior based on link_to is nil", "body": "<p>Well, <code>link_to</code> is going to generate a <code>&lt;a&gt;</code> tag, whether you provide a valid URL or not. So if the URL is nil, yes, it's gonna be a link for you own page. </p>\n\n<p>If you want to \"hide\" this, you could call a partial in which you place you if/else and so on, but it's just to sweep this under the rug :)</p>\n\n<p>Or if you wanna go further, as @Jovica \u0160u\u0161a, a view helper is the most elegant solution.</p>\n"}, {"tags": [], "owner": {"reputation": 1810, "user_id": 1301840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ad9bbcb458c0923c2946f85b6b98107b?s=128&d=identicon&r=PG&f=1", "display_name": "lusketeer", "link": "https://stackoverflow.com/users/1301840/lusketeer"}, "is_accepted": true, "score": 2, "last_activity_date": 1465394951, "creation_date": 1465394951, "answer_id": 37704912, "question_id": 37704561, "link": "https://stackoverflow.com/questions/37704561/rails4-behavior-based-on-link-to-is-nil/37704912#37704912", "title": "rails4 behavior based on link_to is nil", "body": "<p>Maybe <a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_if\" rel=\"nofollow\">link_to_if</a> if Rails 4</p>\n\n<pre><code>&lt;%= link_to_if(@product_lead.website, @product_lead.lead, @product_lead.website) do %&gt;\n     @product_lead.lead\n&lt;%= end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 37704912, "answer_count": 3, "score": 1, "last_activity_date": 1465394951, "creation_date": 1465394073, "question_id": 37704561, "link": "https://stackoverflow.com/questions/37704561/rails4-behavior-based-on-link-to-is-nil", "title": "rails4 behavior based on link_to is nil", "body": "<p>There is a <code>website</code> attr on <code>product_lead</code> table which is optional. If it's present then I wanna turn <code>@produc_lead.lead</code> into a link, but if it's not it should be plain text.</p>\n\n<p>If I use the code below and the website is nil then the link points to the page the user is currently on. If I do it with <code>@product_lead.try(:website)</code>, it's gonna be the same. But as I mentioned I would like to have plain text over link in this case.</p>\n\n<pre><code>&lt;%= link_to @product_lead.website, target: \"_blank\" do %&gt;\n  &lt;%= @product_lead.lead %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>After playing around I fell back to the following solution, but it's terrible. Any better ideas?</p>\n\n<pre><code>&lt;% if @product_lead.website %&gt;\n  &lt;%= link_to @product_lead.website, target: \"_blank\" do %&gt;\n    &lt;%= @product_lead.lead %&gt;\n  &lt;% end %&gt;\n&lt;% else %&gt;\n  &lt;%= @product_lead.lead %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465396023, "post_id": 37704883, "comment_id": 62884619, "body": "Thank you Jay-Ar! I wrote <code>has_many :alliances, -&gt;(alliance) { includes(:blacklists).where.not(alliance.id: blacklists.pluck(:alliance_id)) }, through: :shop, source: :alliances</code> but not working.  seems I&#39;m just not familiar with this &quot;where&quot; usage."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465396366, "post_id": 37704883, "comment_id": 62884892, "body": "your <code>...where.not(alliance.id: blacklists...</code>, should be <code>...where.not(id: product.blacklists...</code>, can you also try removing the <code>source: :alliances</code> part? as I think that should already be implied by default. And also use <code>-&gt;(product)</code> and not <code>-&gt;(alliance)</code>"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465397041, "post_id": 37704883, "comment_id": 62885427, "body": "If it didn&#39;t work, I think you&#39;ll need to specify <code>source</code>. I&#39;ve updated my answer above."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465397304, "post_id": 37704883, "comment_id": 62885618, "body": "Oh your alliance is connected to product through :companies. I&#39;ve updated my answer. Ensure that your <code>Company</code> model has_many :products"}, {"owner": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465397621, "post_id": 37704883, "comment_id": 62885885, "body": "Yes your answer is just what I want. Thank you!"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465397707, "post_id": 37704883, "comment_id": 62885939, "body": "No problem! :) Feel free to mark this answer correct so that the question will already be closed."}, {"owner": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465398454, "post_id": 37704883, "comment_id": 62886503, "body": "One more thing, I&#39;ve had an <code>allied_products</code> relation: <code>has_many :allied_products, -&gt; { uniq }, through: :alliances, source: :products </code>. But now I get <code>undefined method </code>blacklists&#39; for Company` error. How can I change the code to make it correct? Thanks!"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465398929, "post_id": 37704883, "comment_id": 62886876, "body": "Can you try <code>has_many :allied_products, -&gt; { distinct }, through: :alliances, source: :products</code> instead? <code>uniq</code> enforces an Array which might cause the error."}, {"owner": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465399812, "post_id": 37704883, "comment_id": 62887577, "body": "Not working either. The problem is ActiveRecord tries to call Compay.blacklists, which does not exist."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465400795, "post_id": 37704883, "comment_id": 62888344, "body": "hmm that&#39;s strange. I&#39;m not sure why its calling blacklists for Company. I&#39;ll have to reproduce this first."}, {"owner": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465726050, "post_id": 37704883, "comment_id": 63013791, "body": "Hey, @Jay-Ar Polidario have you got any ideas? Thank you"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "edited": false, "score": 0, "creation_date": 1465985233, "post_id": 37704883, "comment_id": 63126006, "body": "Sorry, I was a little busy lately and intentionally skipped trying to reproduce this problem. I might also still need to see the Company model of yours, so that&#39;d be handy if you could update your question as well. If you could however, replicate this project of yours into a stripped-down version and send me the zipped file, that would be better because I can immediately reproduce the problem you were having, although I cannot guarantee if I could solve it, but I will try."}], "tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": 1, "last_activity_date": 1465397135, "last_edit_date": 1465397135, "creation_date": 1465394878, "answer_id": 37704883, "question_id": 37704359, "link": "https://stackoverflow.com/questions/37704359/how-to-create-has-many-association-with-includes-and-where-conditions/37704883#37704883", "title": "How to create has_many association with &quot;includes&quot; and &quot;where&quot; conditions", "body": "<pre><code>class Product &lt; ActiveRecord::Base\n  # ...\n  has_many :shown_alliances, -&gt;(product) { where.not(id: product.blacklists.pluck(:alliance_id) }, class_name: 'Alliance', through: :store, source: :alliances\n  # ...\nend\n\nclass Alliance &lt; ActiveRecord::Base\n  # ...\n  has_many :shown_products, -&gt;(alliance) { where.not(id: alliance.blacklists.pluck(:product_id) }, class_name: 'Product', through: :companies, source: :products\n  # ...\nend\n</code></pre>\n\n<p>You can specify a condition for associations. See <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#module-ActiveRecord::Associations::ClassMethods-label-Customizing+the+query\" rel=\"nofollow\">docs here</a></p>\n"}], "owner": {"reputation": 11, "user_id": 622820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398a828efed96a19a5d80309ce775313?s=128&d=identicon&r=PG", "display_name": "SouthWolf", "link": "https://stackoverflow.com/users/622820/southwolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465398353, "creation_date": 1465393565, "last_edit_date": 1465398353, "question_id": 37704359, "link": "https://stackoverflow.com/questions/37704359/how-to-create-has-many-association-with-includes-and-where-conditions", "title": "How to create has_many association with &quot;includes&quot; and &quot;where&quot; conditions", "body": "<p>Here is the situation: a store has many products, and can join multiple alliances. But the store owner may not want to display certain products in some alliances. For example, a store selling computers and mobile phones might want to display only phones in a \"Phone Marts\".</p>\n\n<p>By default, all products in the store will be displayed in all alliances one shop joins. So I think building a product-alliance blacklist (I know it's a bad name...any ideas?) might be a convenient way.</p>\n\n<p>The question is: how to create a \"has_many\" to reflect such relations like the behaviours of function <code>shown_alliances</code> and <code>shown_products</code>?</p>\n\n<p>I need this because <code>Car.includes(:shop, :alliances)</code> is needed elsewhere, using functions make that impossible.</p>\n\n<p>Product:</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  belongs_to :store\n  has_many :alliances, -&gt; { uniq }, through: :store\n  has_many :blacklists\n\n  def shown_alliances\n   alliances.where.not(id: blacklists.pluck(:alliance_id))\n  end\nend\n</code></pre>\n\n<p>Store:</p>\n\n<pre><code>class Store &lt; ActiveRecord::Base\n  has_many :products\n  has_many :alliance_store_relationships\n  has_many :alliances, through: :alliance_store_relationships\n\n  has_many :allied_products, -&gt; { uniq }, through: :alliances, source: :products\nend\n</code></pre>\n\n<p>Alliance:</p>\n\n<pre><code>class Alliance &lt; ActiveRecord::Base\n  has_many :alliance_store_relationships\n  has_many :store, through: :alliance_store_relationships\n  has_many :products, -&gt; { uniq }, through: :companies\n  has_many :blacklists\n\n  def shown_produtcts\n    @produtcts ||= produtcts.where.not(id: blacklists.pluck(:produtct_id))\n  end\nend\n</code></pre>\n\n<p>Blacklist:</p>\n\n<pre><code>class Blacklist &lt; ActiveRecord::Base\n  belongs_to :produtct\n  belongs_to :alliance\n  validates :produtct_id, presence: true,\n                     uniqueness: { scope: :alliance_id }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 2, "creation_date": 1465393193, "post_id": 37704131, "comment_id": 62882261, "body": "Devise has plenty documentation on the subject. Just look for it in their Wiki pages."}, {"owner": {"reputation": 934, "user_id": 3589799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2eee47e029f07a4c79c52ea377e27?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3589799/vlad"}, "edited": false, "score": 0, "creation_date": 1465393799, "post_id": 37704131, "comment_id": 62882763, "body": "Easiest way would be to have 2 separate models: User and Profile , then you can say ` a User has_one Profile ` then in the Profile model you can add a column to differentiate the user, such as: <code>user_type</code> which can either be a boolean or integer. 1 = User, 2 = Professional or true = Professional, false = User"}], "owner": {"reputation": 37, "user_id": 5028781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-ATu3nSEiFzk/AAAAAAAAAAI/AAAAAAAAD4s/U5FdM8HWQDI/photo.jpg?sz=128", "display_name": "Cristiano Cardoso", "link": "https://stackoverflow.com/users/5028781/cristiano-cardoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1465393081, "creation_date": 1465393081, "question_id": 37704131, "link": "https://stackoverflow.com/questions/37704131/nubbie-in-ruby-on-rails", "title": "nubbie in ruby on rails", "body": "<p>I'm trying to make a toy system to learn rails, well, I'm with a doubt, can help me?</p>\n\n<p>I am using devise to authenticate. However I will need two profiles within the system.</p>\n\n<p>User and Professional.</p>\n\n<p>User = devise basic information</p>\n\n<p>Profisssional = will have to add various informations.</p>\n\n<p>What better way to create these different profiles?</p>\n\n<p>with a boolean in the model User = 0 User, 1 Professional.</p>\n\n<p>or creating more 1 devise model?</p>\n\n<p>or Another way</p>\n\n<p>Remembering that I'll need to list (array) the registered professional later.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6176073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c6d2a1eca3d209a83427ca2525e0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Cozzie", "link": "https://stackoverflow.com/users/6176073/cozzie"}, "edited": false, "score": 0, "creation_date": 1465396392, "post_id": 37703849, "comment_id": 62884906, "body": "Thank you, that is very elegant."}], "tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 1, "last_activity_date": 1465392365, "creation_date": 1465392365, "answer_id": 37703849, "question_id": 37703665, "link": "https://stackoverflow.com/questions/37703665/anagram-code-without-using-a-loop/37703849#37703849", "title": "Anagram code without using a loop", "body": "<pre><code>def anagram?(word, other)\n  word.downcase.chars.sort == other.downcase.chars.sort\nend\n\ndef anagrams_for(word, array)\n  array.select { |other_word| anagram?(word, other_word) }\nend\n</code></pre>\n\n<p>I don't know if that is what you are looking for since <code>select</code> <strong>will</strong> loop through the array anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 1, "last_activity_date": 1465396198, "creation_date": 1465396198, "answer_id": 37705400, "question_id": 37703665, "link": "https://stackoverflow.com/questions/37703665/anagram-code-without-using-a-loop/37705400#37705400", "title": "Anagram code without using a loop", "body": "<p>Maybe you can use hash in this case</p>\n\n<pre><code>def get_dictionary_hash(dictionary)\n  exp = Hash.new{|k, v| k[v] = []}\n  dictionary.each{|s| exp[s.downcase.chars.sort] &lt;&lt; s}\n  exp\nend\n\ndef anagrams_for(word, dictionary)\n  dictionary[word.downcase.chars.sort] || []\nend\n</code></pre>\n\n<p>test</p>\n\n<pre><code>dictionary = ['acres', 'cares', 'Cesar', 'races', 'smelt', 'melts', 'etlsm']\n\ndictionary_h = get_dictionary_hash(dictionary)\n\n['acres', 'ACRES', 'Cesar', 'sacre', 'etlsm', 'unicorn'].each do |word|\n  puts word\n  p anagrams_for(word, dictionary_h)\nend\n\n# =&gt; acres\n# =&gt; [\"acres\", \"cares\", \"Cesar\", \"races\"]\n# =&gt; ACRES\n# =&gt; [\"acres\", \"cares\", \"Cesar\", \"races\"]\n# =&gt; Cesar\n# =&gt; [\"acres\", \"cares\", \"Cesar\", \"races\"]\n# =&gt; sacre\n# =&gt; [\"acres\", \"cares\", \"Cesar\", \"races\"]\n# =&gt; etlsm\n# =&gt; [\"smelt\", \"melts\", \"etlsm\"]\n# =&gt; unicorn\n# =&gt; []\n</code></pre>\n\n<p>I hope this helps</p>\n"}], "owner": {"reputation": 1, "user_id": 6176073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c6d2a1eca3d209a83427ca2525e0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Cozzie", "link": "https://stackoverflow.com/users/6176073/cozzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1465399388, "creation_date": 1465391881, "last_edit_date": 1465399388, "question_id": 37703665, "link": "https://stackoverflow.com/questions/37703665/anagram-code-without-using-a-loop", "title": "Anagram code without using a loop", "body": "<pre><code>dictionary = ['acres', 'cares', 'Cesar', 'races', 'smelt', 'melts', 'etlsm']\n\ndef anagrams_for(word, array)\n    matches = []\n    array.each do |x|\n        if word.downcase.chars.sort == x.downcase.chars.sort\n            matches.push(x)\n        end\n    end\n    puts matches\nend\n</code></pre>\n\n<p>If the input word is in the dictionary, it should be in the the returned array.</p>\n\n<p>The list should be case-insensitive.</p>\n\n<pre><code>anagrams_for('acres', dictionary) # =&gt; ['acres', 'cares', 'Cesar', 'races']\nanagrams_for('ACRES', dictionary) # =&gt; ['acres', 'cares', 'Cesar', 'races']\nanagrams_for('Cesar', dictionary) # =&gt; ['acres', 'cares', 'Cesar', 'races']\n</code></pre>\n\n<p>Although <code>\"sacre\"</code> is not in the dictionary, several words in the dictionary are anagrams of <code>\"sacre\"</code>.</p>\n\n<pre><code>anagrams_for('sacre', dictionary) # =&gt; ['acres', 'cares', 'Cesar', 'races']\n</code></pre>\n\n<p>Neither the input word nor the words in the dictionary need to be valid English words.</p>\n\n<pre><code>anagrams_for('etlsm', dictionary) # =&gt; ['smelt', 'melts', 'etlsm']\nanagrams_for('unicorn', dictionary) # =&gt; []\n</code></pre>\n\n<p>Is there a method that does not require looping to achieve the same result?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx"], "answers": [{"tags": [], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "is_accepted": false, "score": 0, "last_activity_date": 1465390390, "creation_date": 1465390390, "answer_id": 37703081, "question_id": 37702925, "link": "https://stackoverflow.com/questions/37702925/rails-capistrano-nginx-error-with-deploy/37703081#37703081", "title": "Rails capistrano nginx error with deploy", "body": "<p>I would try removing Capistrano plugins versions constraints in the Gemfile:</p>\n\n<pre><code>gem 'capistrano'\ngem 'capistrano-bundler'\ngem 'capistrano-rails'\ngem 'capistrano-rvm'\n</code></pre>\n\n<p>And then run <code>bundle update</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2369480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465390390, "creation_date": 1465390002, "question_id": 37702925, "link": "https://stackoverflow.com/questions/37702925/rails-capistrano-nginx-error-with-deploy", "title": "Rails capistrano nginx error with deploy", "body": "<p>I have same trouble with this...</p>\n\n<p>this is my error :</p>\n\n<p>/home/deploy/.rvm/gems/ruby-2.3.1/gems/capistrano-3.1.0/lib/capistrano/i18n.rb:4: warning: key :starting is duplicated and overwritten on line 6\nStage not set, please call something such as <code>cap production deploy</code>, where production is a stage you have defined.</p>\n\n<p>This is tutorial what i used : <a href=\"https://gorails.com/deploy/ubuntu/14.04#ruby\" rel=\"nofollow\">https://gorails.com/deploy/ubuntu/14.04#ruby</a></p>\n\n<h1>This is my capfile,</h1>\n\n<pre><code>require 'capistrano/setup'\nrequire 'capistrano/deploy'\n\nrequire 'capistrano/rails'\nrequire 'capistrano/bundler'\nrequire 'capistrano/rvm'\nrequire 'capistrano/puma'\n</code></pre>\n\n<p>1# Loads custom tasks from `lib/capistrano/tasks' if you have any defined.\n    Dir.glob('lib/capistrano/tasks/*.cap').each { |r| import r }</p>\n\n<h1>this is my nginx.conf :</h1>\n\n<pre><code>upstream puma {\nserver unix:///home/deploy/ipass/shared/tmp/sockets/appname-puma.sock;\n  }\n\nserver {\nlisten 80 default_server deferred;\n1# server_name example.com;\n\n root /home/deploy/ipass/current/public;\n access_log /home/deploy/ipass/current/log/nginx.access.log;\n error_log /home/deploy/ipass/current/log/nginx.error.log info;\n\n location ^~ /assets/ {\n   gzip_static on;\n  expires max;\n  add_header Cache-Control public;\n   }\n\n try_files $uri/index.html $uri @puma;\nlocation @puma {\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_set_header Host $http_host;\n  proxy_redirect off;\n\n  proxy_pass http://puma;\n}\n\nerror_page 500 502 503 504 /500.html;\nclient_max_body_size 10M;\nkeepalive_timeout 10;\n }\n</code></pre>\n\n<p>I dont know what i must give more... mb my database.yml</p>\n\n<h1>database.yml</h1>\n\n<pre><code>    default: &amp;default\n    adapter: mysql2\n    encoding: utf8\n    pool: 5\n    username: root\n    password: htmlkoi8r\n    socket: /var/run/mysqld/mysqld.sock\n\n  development:\n    &lt;&lt;: *default\n    database: ipass_dev\n  test:\n    &lt;&lt;: *default\n    database: ipass_test\n\n\n  production:\n    &lt;&lt;: *default\n    database: ipass_production\n</code></pre>\n\n<h1>gemfile</h1>\n\n<pre><code>source 'https://rubygems.org'\n\n\n            # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n            gem 'rails', '4.2.6'\n\n            # Servers\n            gem 'puma'\n            gem 'unicorn'\n\n            # AUTH\n            gem 'devise'\n            gem 'cancancan', '~&gt; 1.10'\n\n\n            # Translation gems\n            gem 'russian', '~&gt; 0.6.0'\n\n            # ORM\n            gem 'mysql2', '0.4.4'\n            # gem 'pg'\n            gem 'seed_dump'\n            # gem 'ar-octopus'\n            # gem 'redis-rails'\n            # gem 'redis'\n\n            # Admin Panel\n            gem 'rails_admin'\n            gem 'rails_admin_flatly_theme', github: 'konjoot/rails_admin_flatly_theme'\n\n            # Forms\n            gem 'simple_form'\n            #gem 'tinymce-rails'\n            #gem 'tinymce-rails-langs'\n\n\n            # Mail and contacts\n            gem 'mail_form'\n\n            # Other gems\n            gem 'slim'  #htmlslim\n\n\n\n            # Use SCSS for stylesheets\n            gem 'sass-rails', '~&gt; 5.0'\n            # Use Uglifier as compressor for JavaScript assets\n            gem 'uglifier', '&gt;= 1.3.0'\n            # Use CoffeeScript for .coffee assets and views\n            gem 'coffee-rails', '~&gt; 4.1.0'\n            # See https://github.com/rails/execjs#readme for more supported runtimes\n            # gem 'therubyracer', platforms: :ruby\n\n            # Use jquery as the JavaScript library\n            gem 'jquery-rails'\n            # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n            gem 'jbuilder', '~&gt; 2.0'\n            # bundle exec rake doc:rails generates the API under doc/api.\n            gem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n            # Use ActiveModel has_secure_password\n            # gem 'bcrypt', '~&gt; 3.1.7'\n\n            # Use Unicorn as the app server\n            # gem 'unicorn'\n\n            # Use Capistrano for deployment\n            # gem 'capistrano-rails', group: :development\n\n            gem 'capistrano', '~&gt; 3.1.0'\n            gem 'capistrano-bundler', '~&gt; 1.1.2'\n            gem 'capistrano-rails', '~&gt; 1.1.1'\n            gem 'capistrano-rvm', github: \"capistrano/rvm\"\n            # Add this if you're using rbenv\n            # gem 'capistrano-rbenv', github: \"capistrano/rbenv\"\n\n\n\n            group :development, :test do\n              # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n              gem 'byebug'\n            end\n\n            group :development do\n              # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n              gem 'web-console', '~&gt; 2.0'\n\n              # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n              gem 'spring'\n            end\n</code></pre>\n"}, {"tags": ["html", "ruby", "iframe", "selenium-webdriver", "watir"], "answers": [{"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1465417625, "creation_date": 1465417625, "answer_id": 37712278, "question_id": 37702271, "link": "https://stackoverflow.com/questions/37702271/watir-get-back-to-root-frame/37712278#37712278", "title": "Watir - get back to root frame", "body": "<p>Watir handles frame switching for you when you interact with elements, not when you use <code>execute_script</code>, so you have to take an action on an element or the browser to switch back to the top level browsing context. Use this between your <code>execute_script</code> calls.</p>\n\n<pre><code>browser.exists?\n</code></pre>\n"}], "owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465417625, "creation_date": 1465388271, "last_edit_date": 1465390861, "question_id": 37702271, "link": "https://stackoverflow.com/questions/37702271/watir-get-back-to-root-frame", "title": "Watir - get back to root frame", "body": "<p>My script firstly visit an url:-</p>\n\n<pre><code>browser = Watir::Browser.new :firefox\nbrowser.goto('http://anything.com')\n</code></pre>\n\n<p>then it creates iframe </p>\n\n<pre><code>browser.execute_script(\"$(#some-div).html('&lt;iframe id=\"my_iframe\" src='http://google.de'&gt;&lt;/iframe&gt;')\")\n</code></pre>\n\n<p>Now I want to get what's inside the iframe. So I call:</p>\n\n<pre><code>browser.iframe(id: 'my_iframe').html\n</code></pre>\n\n<p>next I want to execute another script</p>\n\n<pre><code>browser.execute_script(\"$(#some-div).html('&lt;iframe id=\"my_iframe\" src='http://new_url.de'&gt;&lt;/iframe&gt;')\n</code></pre>\n\n<p>but it points to iframe context, not the top window <strong>(but browser itself still points to anything.com)</strong>.</p>\n\n<p>I can't get <code>browser.iframe(id: 'my_iframe')</code></p>\n\n<p>How to point watir back to top level html document?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1465388909, "post_id": 37702269, "comment_id": 62879014, "body": "That doesn&#39;t look like valid Ruby to me. Could you double-check and/or perhaps link to where you have seen this, because it is not that clear what you want to do (you cannot use &quot;same mechanism as above&quot; as it doesn&#39;t appear to do anything). I <i>think</i> you want to define a bunch of very similar methods in a loop, which is something that Ruby can do. But about the only thing about that like your example is the first line . . . which is just the loop definition"}, {"owner": {"reputation": 217, "user_id": 3314570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/6ykgd.jpg?s=128&g=1", "display_name": "user3314570", "link": "https://stackoverflow.com/users/3314570/user3314570"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1465389280, "post_id": 37702269, "comment_id": 62879273, "body": "@NeilSlater actually I can&#39;t link because it&#39;s a work program and it&#39;s not on this computer. What I meant by &quot;same mechanism&quot; was the &quot;create_{kind}&quot; which substitues each loop another kind and call the good function. I was wondering if I could have something like <code>def end_{kind}</code> and somewhere have kind = [:titi, :toto]. If it&#39;s possible to do something like that in ruby"}], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 1090448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7be5279a07c75602391000f658170e70?s=128&d=identicon&r=PG", "display_name": "kirlev", "link": "https://stackoverflow.com/users/1090448/kirlev"}, "is_accepted": true, "score": 3, "last_activity_date": 1465389707, "last_edit_date": 1465389707, "creation_date": 1465389258, "answer_id": 37702647, "question_id": 37702269, "link": "https://stackoverflow.com/questions/37702269/define-similar-methods-at-once/37702647#37702647", "title": "Define similar methods at once", "body": "<p>Take notice the expression <code>if \"create_#{kind}\"</code> will always return true, you probably mean <code>defined?(\"create_#{kind}\")</code> which checks if a method is defined.</p>\n\n<p>you can use the 'method_missing' method:</p>\n\n<pre><code>def method_missing(method_name, *arguments, &amp;block)\n  method = method_name.to_s \n\n  case method\n  when 'create_toto'\n    #do somthing\n  when 'create_tata'\n    #do somthing\n  when 'create_titi'\n    #do somthing\n  else\n    super\n  end\nend\n</code></pre>\n\n<p>You can also define methods dynamically:</p>\n\n<pre><code>[:toto, :tata, :titi].each do |kind|\n  define_method \"create_#{kind}\" do\n    #do something\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 217, "user_id": 3314570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/6ykgd.jpg?s=128&g=1", "display_name": "user3314570", "link": "https://stackoverflow.com/users/3314570/user3314570"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 37702647, "answer_count": 1, "score": 1, "last_activity_date": 1465399246, "creation_date": 1465388268, "last_edit_date": 1465399246, "question_id": 37702269, "link": "https://stackoverflow.com/questions/37702269/define-similar-methods-at-once", "title": "Define similar methods at once", "body": "<p>I've seen things like</p>\n\n<pre><code>[:toto, :tata, :titi].each do |kind|\n    if \"create_#{kind}\" do\n        something\n    end\nend\n</code></pre>\n\n<p>where the methods <code>create_toto</code>, <code>create_tata</code>, and <code>create_titi</code> are defined elsewhere.</p>\n\n<p>I was wondering if it's possible to do it with method definitions. I have multiple methods named <code>end_{something}</code>, which do the same thing, and I would like to know if it's possible to group them into one, with the same mechanism as above.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1126, "user_id": 2717857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sODOK.png?s=128&g=1", "display_name": "geekdev", "link": "https://stackoverflow.com/users/2717857/geekdev"}, "edited": false, "score": 0, "creation_date": 1465727367, "post_id": 37701944, "comment_id": 63014124, "body": "thanks for your answer, but it overwrite two devise methods that makes little scary, especially overwriting <code>valid_for_authentication?</code> method."}], "tags": [], "owner": {"reputation": 604, "user_id": 1090448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7be5279a07c75602391000f658170e70?s=128&d=identicon&r=PG", "display_name": "kirlev", "link": "https://stackoverflow.com/users/1090448/kirlev"}, "is_accepted": false, "score": 0, "last_activity_date": 1465388505, "last_edit_date": 1465388505, "creation_date": 1465387355, "answer_id": 37701944, "question_id": 37701489, "link": "https://stackoverflow.com/questions/37701489/can-enable-disable-devise-lockable-module-based-on-condition/37701944#37701944", "title": "can enable/disable devise lockable module based on condition", "body": "<p>put this in you User model:</p>\n\n<pre><code>def active_for_authentication?\n  super &amp;&amp; (admin? || !access_locked?)\nend\n\ndef valid_for_authentication?\n  return super unless persisted? &amp;&amp; lock_strategy_enabled?(:failed_attempts)\n\n  # Unlock the user if the lock is expired, no matter\n  # if the user can login or not (wrong password, etc)\n  unlock_access! if lock_expired?\n\n  if super &amp;&amp; (admin? || !access_locked?)\n    true\n  else\n    self.failed_attempts ||= 0\n    self.failed_attempts += 1\n    if attempts_exceeded?\n      lock_access! unless access_locked?\n    else\n      save(validate: false)\n    end\n    false\n  end\nend\n</code></pre>\n\n<p>It is from the docs site:\n<a href=\"http://www.rubydoc.info/github/plataformatec/devise/Devise/Models/Lockable#active_for_authentication%3F-instance_method\" rel=\"nofollow\">http://www.rubydoc.info/github/plataformatec/devise/Devise/Models/Lockable#active_for_authentication%3F-instance_method</a></p>\n"}, {"tags": [], "owner": {"reputation": 455, "user_id": 4334331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rOXO4.jpg?s=128&g=1", "display_name": "Sanjay Prajapati", "link": "https://stackoverflow.com/users/4334331/sanjay-prajapati"}, "is_accepted": false, "score": 0, "last_activity_date": 1594119883, "creation_date": 1594119883, "answer_id": 62773849, "question_id": 37701489, "link": "https://stackoverflow.com/questions/37701489/can-enable-disable-devise-lockable-module-based-on-condition/62773849#62773849", "title": "can enable/disable devise lockable module based on condition", "body": "<p>You can put below method in your user.rb file</p>\n<pre><code>def lock_strategy_enabled?(strategy)\n  return false if self.admin?\n  true\nend\n</code></pre>\n"}], "owner": {"reputation": 1126, "user_id": 2717857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sODOK.png?s=128&g=1", "display_name": "geekdev", "link": "https://stackoverflow.com/users/2717857/geekdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 721, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1594119883, "creation_date": 1465385938, "question_id": 37701489, "link": "https://stackoverflow.com/questions/37701489/can-enable-disable-devise-lockable-module-based-on-condition", "title": "can enable/disable devise lockable module based on condition", "body": "<p>I would like to disable/enable devise lockable module for users based on specific condition. For example enable lockable module only for non-admin users.</p>\n\n<p>There was an method in <code>Confirmable</code> module, <code>confirmation_required?</code> which can be overwrite if confirmation is required or not.</p>\n\n<p><a href=\"http://www.rubydoc.info/github/plataformatec/devise/Devise/Models/Confirmable#confirmation_required%3F-instance_method\" rel=\"nofollow\">http://www.rubydoc.info/github/plataformatec/devise/Devise/Models/Confirmable#confirmation_required%3F-instance_method</a></p>\n\n<p><code>Lockable</code> module does have similar method?. any help would be appreciated</p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1465386098, "post_id": 37701506, "comment_id": 62876963, "body": "yes exactly thats one problem. Fixed that thanks. but still the same error pending"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1465386322, "post_id": 37701506, "comment_id": 62877117, "body": "please give the result by puts of the above two statments user = User.find(session[:user_id])    order.user = @user"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1465386559, "post_id": 37701506, "comment_id": 62877294, "body": "Do you have the foreign key in the users table?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1465386817, "post_id": 37701506, "comment_id": 62877500, "body": "added the two wars above and the printscreen of the table. I have the foreign keys. have set references while migration  <code>t.references :user</code> and <code>t.references :movie</code>"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1465386899, "post_id": 37701506, "comment_id": 62877563, "body": "but you don&#39;t have the foreign key of order_movie_id in users table"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1465388445, "post_id": 37701506, "comment_id": 62878651, "body": "why aren&#39;t they added? when i do the references stuff? do I have to add them manually now?"}], "tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": false, "score": 1, "last_activity_date": 1465386690, "last_edit_date": 1465386690, "creation_date": 1465385970, "answer_id": 37701506, "question_id": 37701404, "link": "https://stackoverflow.com/questions/37701404/rails-unknown-attribute/37701506#37701506", "title": "Rails unknown attribute", "body": "<p>Here is the solution.You have spelled wrong in belongs_to :order_movie statement <br></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :comment\n  has_and_belongs_to_many :knowledgeprovider\n  has_and_belongs_to_many :channel\n  belongs_to :order_movie\n</code></pre>\n\n<p><br>\nIf you don't have order_movie foreign key then run this migratuons\n<br></p>\n\n<pre><code>add_column :users,:order_movie_id,:integer\n    add_foreign_key :users,:order_movies\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 602, "user_id": 5065438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306841f540dc52fdc68605d254c522ac?s=128&d=identicon&r=PG&f=1", "display_name": "Jovica \u0160u\u0161a", "link": "https://stackoverflow.com/users/5065438/jovica-%c5%a0u%c5%a1a"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1465389057, "post_id": 37702349, "comment_id": 62879127, "body": "I would suggest you that you change relations in OrderMovie to belongs_to from has_one..."}], "tags": [], "owner": {"reputation": 602, "user_id": 5065438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306841f540dc52fdc68605d254c522ac?s=128&d=identicon&r=PG&f=1", "display_name": "Jovica \u0160u\u0161a", "link": "https://stackoverflow.com/users/5065438/jovica-%c5%a0u%c5%a1a"}, "is_accepted": true, "score": 1, "last_activity_date": 1465388473, "creation_date": 1465388473, "answer_id": 37702349, "question_id": 37701404, "link": "https://stackoverflow.com/questions/37701404/rails-unknown-attribute/37702349#37702349", "title": "Rails unknown attribute", "body": "<p>Your User model relations are not good, if you're trying to make has_many :through relation between users and movies with order_movies, your user must has_many :order_movies not belongs_to :order_movies.\nSo this error tells you that you don't have order_movie_id foreign key in your users table because you defined wrong relation. So change:</p>\n\n<pre><code>belongs_to :order_movie\n</code></pre>\n\n<p>to</p>\n\n<pre><code>has_many :order_movies\n</code></pre>\n\n<p>In your User model.</p>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 37702349, "answer_count": 2, "score": 0, "last_activity_date": 1546855647, "creation_date": 1465385753, "last_edit_date": 1546855647, "question_id": 37701404, "link": "https://stackoverflow.com/questions/37701404/rails-unknown-attribute", "title": "Rails unknown attribute", "body": "<p>I got an error in My rails application </p>\n\n<p><a href=\"https://i.stack.imgur.com/6ynfv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6ynfv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code looks like this:</p>\n\n<p>oders_controller.rb</p>\n\n<pre><code> def payMovie\n    @order = OrderMovie.new\n    @user = User.find(session[:user_id])\n    @order.user = @user\n    @movie = Movie.find params[:id]\n\n    puts \"sssssssssssss\"\n    puts @movie.inspect\n\n    @order.price = @movie.movieprice\n    @order.currency = @movie.currency\n    @order.movie &lt;&lt; @movie\n    if @order.save\n      flash[:notice] = t(\"flash.saved\")\n      redirect_to :back\n    else\n      redirect_to :back\n    end\n  end\n</code></pre>\n\n<p>models/user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :comment\n  has_and_belongs_to_many :knowledgeprovider\n  has_and_belongs_to_many :channel\n  belongs_to :oder_movie\n</code></pre>\n\n<p>models/order_movie.rb</p>\n\n<pre><code>class OrderMovie &lt; ActiveRecord::Base\n  has_one :user\n  has_one :movie\nend\n</code></pre>\n\n<p>What could be the problem?</p>\n\n<p>Thanks for your help</p>\n\n<p>UPDATE</p>\n\n<pre><code>@order.inspect\n&lt;OrderMovie id: nil, price: nil, currency: nil, user_id: nil, created_at: nil, updated_at: nil, movie_id: nil&gt;\n\n@user.inspect\n&lt;User id: 3, firstname: \"Felix\", lastname: \"Hohlweglersad\"\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5gKxA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5gKxA.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["html", "ruby", "xpath", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5050361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-HMkeOy1ZMDo/AAAAAAAAAAI/AAAAAAAAAIw/BOcdBrY9X8k/photo.jpg?sz=128", "display_name": "andgursky", "link": "https://stackoverflow.com/users/5050361/andgursky"}, "edited": false, "score": 0, "creation_date": 1465386198, "post_id": 37701286, "comment_id": 62877035, "body": "Therefore I conclude that the xpath expression is correct. But no matter what kind of title (th tag) I choose it always returns &quot;1&quot;. Maybe the problem is in capybara &quot;find&quot; method?"}, {"owner": {"reputation": 83665, "user_id": 2998271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7vUA.png?s=128&g=1", "display_name": "har07", "link": "https://stackoverflow.com/users/2998271/har07"}, "reply_to_user": {"reputation": 171, "user_id": 5050361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-HMkeOy1ZMDo/AAAAAAAAAAI/AAAAAAAAAIw/BOcdBrY9X8k/photo.jpg?sz=128", "display_name": "andgursky", "link": "https://stackoverflow.com/users/5050361/andgursky"}, "edited": false, "score": 0, "creation_date": 1465386338, "post_id": 37701286, "comment_id": 62877132, "body": "Not necessarily. It will also return &quot;1&quot; (<code>td</code> at index 1) when the expression inside <code>count()</code> failed to find the target element (which might be an indication that the XPath is not correct) ..."}], "tags": [], "owner": {"reputation": 83665, "user_id": 2998271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7vUA.png?s=128&g=1", "display_name": "har07", "link": "https://stackoverflow.com/users/2998271/har07"}, "is_accepted": true, "score": 1, "last_activity_date": 1465385429, "creation_date": 1465385429, "answer_id": 37701286, "question_id": 37701131, "link": "https://stackoverflow.com/questions/37701131/how-to-get-data-element-by-title-index-with-capybara-find/37701286#37701286", "title": "how to get data element by title index with capybara &quot;find&quot;?", "body": "<p>The logic should've counted preceding-sibling <code>th</code> <strong>plus 1</strong>, to find the correct position index of the <code>th</code> :</p>\n\n<pre><code>//body/td[count(//body/th[contains(.,'a')]/preceding-sibling::th)+1]\n</code></pre>\n\n<p><strong><kbd><a href=\"http://www.xpathtester.com/xpath/d38a03855d0a2a6869dce184155fee12\" rel=\"nofollow\"><code>xpathtester demo</code></a></kbd></strong></p>\n\n<p><strong>output :</strong></p>\n\n<pre><code>&lt;td&gt;1&lt;/td&gt;\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5050361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-HMkeOy1ZMDo/AAAAAAAAAAI/AAAAAAAAAIw/BOcdBrY9X8k/photo.jpg?sz=128", "display_name": "andgursky", "link": "https://stackoverflow.com/users/5050361/andgursky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 37701286, "answer_count": 1, "score": 0, "last_activity_date": 1465387188, "creation_date": 1465385056, "last_edit_date": 1465387188, "question_id": 37701131, "link": "https://stackoverflow.com/questions/37701131/how-to-get-data-element-by-title-index-with-capybara-find", "title": "how to get data element by title index with capybara &quot;find&quot;?", "body": "<p>I have html page:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;html&gt;\r\n  &lt;body&gt;\r\n    &lt;th&gt;a&lt;/th&gt;\r\n    &lt;th&gt;b&lt;/th&gt;\r\n    &lt;th&gt;c&lt;/th&gt;\r\n    &lt;th&gt;d&lt;/th&gt;\r\n    &lt;th&gt;e&lt;/th&gt;\r\n    &lt;th&gt;f&lt;/th&gt;\r\n    &lt;th&gt;g&lt;/th&gt;\r\n    &lt;th&gt;h&lt;/th&gt;\r\n    &lt;th&gt;i&lt;/th&gt;\r\n    &lt;td&gt;1&lt;/td&gt;\r\n    &lt;td&gt;2&lt;/td&gt;\r\n    &lt;td&gt;3&lt;/td&gt;\r\n    &lt;td&gt;4&lt;/td&gt;\r\n    &lt;td&gt;5&lt;/td&gt;\r\n    &lt;td&gt;6&lt;/td&gt;\r\n    &lt;td&gt;7&lt;/td&gt;\r\n    &lt;td&gt;8&lt;/td&gt;\r\n    &lt;td&gt;9&lt;/td&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I need to get data (td tag) by choosing title (th tag).\nI'm trying:</p>\n\n<pre><code>page.find(:xpath, \"//body/td[count(//body/th[contains(.,'a')]/preceding-sibling::th)-1]\")\n</code></pre>\n\n<p>and I'm expecting to get \"1\" as returning value, but it returns \"8\".\nIt seems to me, that \"count\" doesn't work right. So, what am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "rails-admin"], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 3918246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TeB91.jpg?s=128&g=1", "display_name": "Archetype2142", "link": "https://stackoverflow.com/users/3918246/archetype2142"}, "edited": false, "score": 0, "creation_date": 1465385057, "post_id": 37700949, "comment_id": 62876241, "body": "Still unable to login. Here&#39;s what the debugger says --- !ruby/hash-with-ivars:ActionController::Parameters elements:   utf8: &quot;\u2713&quot;   authenticity_token: 9lfnKwkGdiBBUi72F+EJb+3um31IO8v9epWG76193Gy5FVU/36S26I8V8YyC&zwnj;&#8203;jzGW/RkT4LmisAYLUcfB&zwnj;&#8203;kAsiSw==   admin: !ruby/hash-with-ivars:ActionController::Parameters     elements:       email: test@test.com       password: password       remember_me: &#39;0&#39;     ivars:       :@permitted: false   commit: Log in   controller: devise/sessions   action: create ivars:   :@permitted: false  And the console says <code>Unpermitted parameter: email</code>"}], "tags": [], "owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "is_accepted": false, "score": 0, "last_activity_date": 1465386131, "last_edit_date": 1465386131, "creation_date": 1465384528, "answer_id": 37700949, "question_id": 37700734, "link": "https://stackoverflow.com/questions/37700734/devise-unpermitted-parameter-email-cant-sign-in-admin/37700949#37700949", "title": "Devise &#39;Unpermitted parameter: email&#39; can&#39;t sign in Admin", "body": "<p>you should us directly admin/registrations_conroller.rb</p>\n\n<pre><code> class Admin::RegistrationsController &lt; Devise::RegistrationsController\n    private\n\n  def sign_up_params\n    params.require(:user).permit(:email, :password, :password_confirmation)\n  end\n\n  def account_update_params\n    params.require(:user).permit(:email, :password, :password_confirmation, :current_password)\n  end\n    end\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 3918246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TeB91.jpg?s=128&g=1", "display_name": "Archetype2142", "link": "https://stackoverflow.com/users/3918246/archetype2142"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 478, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465403811, "creation_date": 1465383919, "last_edit_date": 1465403811, "question_id": 37700734, "link": "https://stackoverflow.com/questions/37700734/devise-unpermitted-parameter-email-cant-sign-in-admin", "title": "Devise &#39;Unpermitted parameter: email&#39; can&#39;t sign in Admin", "body": "<p>I'm using <code>devise</code> with <code>cancancan</code> and <code>rails_admin</code>. On signing in the <code>admin</code> model, I get the following error.</p>\n\n<p><code>Unpermitted parameter: email</code></p>\n\n<p><code>admin</code> model was generated by <code>devise</code> using <code>rails g devise Admin</code></p>\n\n<p>I tried overriding the controller and here's my <code>admin/registrations_conroller.rb</code></p>\n\n<pre><code>class Admin::RegistrationsController &lt; Devise::RegistrationsController\n      before_action :configure_devise_permitted_parameters, if: :devise_controller?\n\n      protected\n\n      def configure_permitted_parameters\n        devise_parameter_sanitizer.for(:account_update).push(:email)\n        if params[:action] == 'update'\n          devise_parameter_sanitizer.permit(:account_update) { \n            |u| u.permit(registration_params &lt;&lt; :current_password)\n          }\n        elsif params[:action] == 'create'\n          devise_parameter_sanitizer.permit(:sign_up) { \n            |u| u.permit(registration_params) \n          }\n        end\n      end\n      # def new\n      #   super\n      # end\n\n      # def create\n      #   super\n      # end\n    end\n</code></pre>\n\n<p>Here's my <code>admin</code> model</p>\n\n<pre><code>   class Admin &lt; ActiveRecord::Base\n      # Include default devise modules. Others available are:\n      # :confirmable, :lockable, :timeoutable and :omniauthable\n      devise :database_authenticatable, :registerable,\n             :recoverable, :rememberable, :trackable, :validatable\n\n      validates :email, presence: true\n\n    end\n</code></pre>\n\n<p>My <code>ability.rb</code></p>\n\n<pre><code>class Ability\n  include CanCan::Ability\n\n  def initialize(admin)\n    admin ||= Admin.new # guest user (not logged in)\n    if admin.position? :superadmin\n        can :manage, :all\n    else\n        can :read\n    end\n   end\nend\n</code></pre>\n\n<p>My <code>config/initializers/rails_admin.rb</code></p>\n\n<pre><code>RailsAdmin.config do |config|\n\n  ## == Devise ==\n   config.authenticate_with do\n     warden.authenticate! scope: :admin\n   end\n   config.current_user_method(&amp;:current_admin)\n\n  ## == Cancan ==\n  config.authorize_with :cancan\n  config.actions do\n    dashboard                     # mandatory\n    index                         # mandatory\n    new\n    export\n    bulk_delete\n    show\n    edit\n    delete\n    show_in_app\n\n    ## With an audit adapter, you can add:\n    # history_index\n    # history_show\n  end\nend\n</code></pre>\n\n<p>And finally my <code>admins</code> table </p>\n\n<pre><code>create_table \"admins\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\",                          null: false\n    t.datetime \"updated_at\",                          null: false\n    t.string   \"position\"\nend\n</code></pre>\n\n<p>What I'm trying to do is have a <code>position</code> column in the <code>admins</code> table which specifies the type of admin i.e. <code>superadmin</code>, <code>moderator</code> etc.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord", "activeadmin"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465383417, "post_id": 37700232, "comment_id": 62875254, "body": "What is your question? Does your code raise an error? What is the error message?"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465383606, "post_id": 37700232, "comment_id": 62875359, "body": "actually it is generating only one bill which is of current user. I want it to generate bills for all users who have same hostel with admin. means <code>current_admin_hostel == resident.hostel</code> then generate bills only for  residents of that hostel."}], "answers": [{"comments": [{"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465383511, "post_id": 37700485, "comment_id": 62875307, "body": "<code>undefined method </code>find_all_by&#39; for #&lt;Class:0x007f8d99eeb0c8&gt;` error !"}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465383707, "post_id": 37700485, "comment_id": 62875419, "body": "@Nischaynamdev I just replaced it by where, it should work now."}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465383969, "post_id": 37700485, "comment_id": 62875559, "body": "how to check if object is created or not ? I m getting error both in <code>@bill.save</code> and <code>@bill.persisted?</code>"}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465384377, "post_id": 37700485, "comment_id": 62875824, "body": "I have no @bill in my code, so could you provide me your current code so that I see where the error comes from ?"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465384459, "post_id": 37700485, "comment_id": 62875871, "body": "` def create     residents = Resident.where(hostel: current_admin_user.hostel)     residents.each do |resident|       resident.bills.create(bill_params)     end     redirect_to new_bill_path   end `"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465384599, "post_id": 37700485, "comment_id": 62875946, "body": "all is working well if I change second line to this      <code>residents = Resident.all</code> I guess problem is in <code>where(hostel: current_admin_user.hostel) </code> !"}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465384662, "post_id": 37700485, "comment_id": 62875975, "body": "@Nischaynamdev it might be handy if you could give me the content of the &#39;residents&#39; variable, because if no bills are generated it is likely that it is looping on no records. So could you give me &#39;current_admin_user.hostel&#39; value and &#39;residents&#39; value please ?"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465384826, "post_id": 37700485, "comment_id": 62876079, "body": "see there is a attribute in resident table named &quot;Hostel&quot; and <code>current_admin_user.hostel</code> returns hostel of current admin user .  so basically residents holds all instances of resident model whose hostel is equal to admin hsotel. I need to generate bills only for residents of that hostel!"}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1465385143, "post_id": 37700485, "comment_id": 62876290, "body": "@Nischaynamdev I undestand what you want to do ... But still, you have a problem here ! So to solve it we must investigate. Generally in those cases it&#39;s just that you have a value that is unexpected. For instance it might be that current_admin_user.hostel is nil or residents has no record. So what I&#39;m asking is are we sure that current_admin_user.hostel has a value (use raise current_admin_user.hostel.inspect to be sure), then look if residents is indeed empty, and finally if residents is empty and current_admin_user.hostel is good then verify you have residents in your databse for that hoste"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "reply_to_user": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 0, "creation_date": 1465391120, "post_id": 37700485, "comment_id": 62880659, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114132/discussion-between-nischay-namdev-and-pholochtairze\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": true, "score": 1, "last_activity_date": 1465396269, "last_edit_date": 1495535644, "creation_date": 1465383194, "answer_id": 37700485, "question_id": 37700232, "link": "https://stackoverflow.com/questions/37700232/need-to-genrate-bills-for-all-users-in-rails-what-should-be-create-method/37700485#37700485", "title": "Need to genrate bills for all users in rails, what should be create method?", "body": "<p>Use where to get all residents for that hostel: </p>\n\n<pre><code>residents = Resident.where(hostel: Hostel.where(name: current_admin_user.hostel).first.id)\n</code></pre>\n\n<p>Loop through residents and create the bill for each resident :</p>\n\n<pre><code>residents.each do |resident|\n  # Note here I use bill_params (because it's in your example), but I'm not totally sure it's the behavior you want\n  resident.bills.create(bill_params)\nend\n</code></pre>\n\n<p>Please note that you were using <code>create</code> so the <code>@bill.save</code> your were using is unnecessary (<code>create</code> calls <code>save</code> anyway, see <a href=\"https://stackoverflow.com/questions/9791386/differences-between-new-save-and-create\">Differences between new + save and create</a>). To check if the bill has been successfully created you could use <code>@bill.persisted?</code> for instance (see : <a href=\"https://stackoverflow.com/questions/7842920/determine-if-activerecord-object-is-new-or-created\">Determine if ActiveRecord Object is New</a>).</p>\n"}], "owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 37700485, "answer_count": 1, "score": 0, "last_activity_date": 1465396269, "creation_date": 1465382536, "last_edit_date": 1465384282, "question_id": 37700232, "link": "https://stackoverflow.com/questions/37700232/need-to-genrate-bills-for-all-users-in-rails-what-should-be-create-method", "title": "Need to genrate bills for all users in rails, what should be create method?", "body": "<p><strong>Hi,</strong></p>\n\n<p><em>I need to generate bills for all users (residents) in my app, the bill_controller's <code>create</code> method looks like :</em></p>\n\n<pre><code>    def create\n    resident = Resident.find_by(hostel:current_admin_user.hostel) # current_admin_user  action is provided by Activeadmin to access current activeadmin user details \n      @bill=resident.bills.create(bill_params)\n      if @bill.save\n        flash[:info] = \"Bills Generated  successfully\"\n        redirect_to new_bill_path\n      else\n        flash[:danger] = \"Bills Not generated, Please try again!\"\n        redirect_to new_bill_path\n\n      end\n  end\n</code></pre>\n\n<blockquote>\n  <p>The active admin users can generate bills, and bills will be generated\n  only for residents that have same hostel with admin user ! And bills\n  should be generated for all residents with specific hostel. check out\n  my code, right now it is generating only for current user(resident\n  logged in) . thanks !</p>\n</blockquote>\n"}, {"tags": ["arrays", "ruby", "algorithm"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465382697, "post_id": 37699452, "comment_id": 62874821, "body": "Why does &quot;compare by hashing&quot; have a worst-case of  O(n^2)?"}, {"owner": {"reputation": 1217, "user_id": 2213297, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1968b909ddfaef9df539f46f42ee28b?s=128&d=identicon&r=PG&f=1", "display_name": "piotrekg2", "link": "https://stackoverflow.com/users/2213297/piotrekg2"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1465382823, "post_id": 37699452, "comment_id": 62874895, "body": "@Stefan because of hashtable collisions."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1465395884, "post_id": 37699452, "comment_id": 62884515, "body": "The hashing solution only works if there are no duplicates in the data. For example, the naive hashing solution will tell you that the arrays <code>[0, 1, 1, 3]</code> and <code>[0, 1, 3, 3]</code> are the same."}, {"owner": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1465397134, "post_id": 37699452, "comment_id": 62885491, "body": "@JimMischel If you have ruby interpreter installed, please run the code I&#39;ve provided in the post. It will say they are different. (I&#39;ve just ran it.)"}, {"owner": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1465397267, "post_id": 37699452, "comment_id": 62885589, "body": "@JimMischel or please refer to this codepad link. <a href=\"http://codepad.org/kcp50mia\" rel=\"nofollow noreferrer\">codepad.org/kcp50mia</a>. Correct me if I misunderstood your question."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 1, "creation_date": 1465397367, "post_id": 37699452, "comment_id": 62885676, "body": "No, you&#39;re right. I realized that your hash is counting occurrences."}], "answers": [{"comments": [{"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465386479, "post_id": 37701632, "comment_id": 62877220, "body": "I disagree: consider duplicate elements. Show me a hash-function which can handle all duplicate elements and not having a collision. For any given hash function you can construct an input such that it will have a worst case performance of O(n) when inserting/searching"}, {"owner": {"reputation": 9603, "user_id": 828077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xg4DY.jpg?s=128&g=1", "display_name": "Rajesh Pantula", "link": "https://stackoverflow.com/users/828077/rajesh-pantula"}, "reply_to_user": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465386671, "post_id": 37701632, "comment_id": 62877378, "body": "The argument here is not about considering whether practically you can create a perfect hash. In asymptotic analysis, you only focus on your input and determine whether your function takes more time based on input size. whether there will be hash collisions is a different discussion and should be left out when finding complexity for input using asymptotic analysis."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 1, "creation_date": 1465386809, "post_id": 37701632, "comment_id": 62877489, "body": "It is about WORSTCASE analysis. Hash-tables have a worstcase of O(n) for insert, search and delete"}, {"owner": {"reputation": 9603, "user_id": 828077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xg4DY.jpg?s=128&g=1", "display_name": "Rajesh Pantula", "link": "https://stackoverflow.com/users/828077/rajesh-pantula"}, "reply_to_user": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465386938, "post_id": 37701632, "comment_id": 62877600, "body": "Yes I agree with you that hashtables do have O(n). The problem statement here is to find worst case analysis of array comparisons, which will be O(n). you ignore the worst case analysis of hashtable here."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465387249, "post_id": 37701632, "comment_id": 62877812, "body": "This is not making any sense. Why would we ignore the worstcase of the hashtable? The question is about what the best worstcase you can achieve when comparing two arrays. If you are using a hashtable to solve this problem, then you have to take into consideration how much overhead that will add in the worst-case to your implementation..."}, {"owner": {"reputation": 9603, "user_id": 828077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xg4DY.jpg?s=128&g=1", "display_name": "Rajesh Pantula", "link": "https://stackoverflow.com/users/828077/rajesh-pantula"}, "reply_to_user": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465387553, "post_id": 37701632, "comment_id": 62878020, "body": "Assuming you have a hash table which gives O(1) insertion &amp; O(1) search, the WORSTCASE complexity of this algorithm(alone, ignoring external factors) will be O(n)."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465388149, "post_id": 37701632, "comment_id": 62878421, "body": "<i>Assuming you have a hash table which gives O(1) insertion &amp; O(1) search</i>. This is not a reasonable assumption!!! What kind of analysis is &quot;the complexity of this algorithm alone, ignoring external factors&quot;? If you have an algorithm A which does 1 thing, namely calling another algorithm B which runs in O(n), would you say that the algorithm A has a running time of O(1)?"}, {"owner": {"reputation": 9603, "user_id": 828077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xg4DY.jpg?s=128&g=1", "display_name": "Rajesh Pantula", "link": "https://stackoverflow.com/users/828077/rajesh-pantula"}, "reply_to_user": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465389152, "post_id": 37701632, "comment_id": 62879192, "body": "That&#39;s because we are determining the worst case complexity of this algorithm alone. We do not generally include the worst case complexity of the intermediate data structure you are using. I suggest you read about worst case complexities of 2sum problem(google for 2sum problem). it is similar to this problem. it uses a single loop and stores elements in hashtable. Going by your argument, does it have worst case time complexity of O(n^2) as well?"}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465389831, "post_id": 37701632, "comment_id": 62879727, "body": "I googled and found different things: first of all, the data in the array of 2sum are <code>int</code>s. Next, one of the solutions using a hash-map is saying: <i>&quot;This method works in O(n) time if range of numbers is known.&quot;</i> (src: <a href=\"http://www.geeksforgeeks.org/write-a-c-program-that-given-a-set-a-of-n-numbers-and-another-number-x-determines-whether-or-not-there-exist-two-elements-in-s-whose-sum-is-exactly-x/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a> ) Here OP is explicitly saying <i>no assumption about the data</i> can be made. I&#39;m not saying that O(1) hashtables are never possible. I&#39;m saying hashtables can&#39;t be O(1) <i>for all</i> possible cases..."}, {"owner": {"reputation": 9603, "user_id": 828077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xg4DY.jpg?s=128&g=1", "display_name": "Rajesh Pantula", "link": "https://stackoverflow.com/users/828077/rajesh-pantula"}, "reply_to_user": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "edited": false, "score": 0, "creation_date": 1465457871, "post_id": 37701632, "comment_id": 62911701, "body": "@Kundor: This is not wrong. This is how the algorithm complexities are calculated.  It is easier to understand this from the code.  for(int i=0;i&lt;A.length;i++){  \thashmap.put(A[i],i);\t  }  for(int i=0;i&lt;B.length;i++){ \t \tif( !hashmap.containsKey(B[i])) \t\t//mismatch }  For the above code, time complexity is O(n). Saying it as O(n^2) is wrong. This would be called as a linear time algorithm. Notice there is only a single loop."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465753148, "post_id": 37701632, "comment_id": 63021942, "body": "@RajeshPantula this is most definitely NOT how algorithm complexities are calculated!!! For your kind of analysis, this algorithm would always be O(n). If you seriously only take that &quot;single loop&quot; into account, then I must conclude that <code>for(int i=0;i&lt;A.length;i++){ hashmap.put(A[i],i);} </code> has the same compelxity as <code>for(int i=0;i&lt;A.length;i++){ tree.put(i);} </code> - See, with a tree there also is a single loop... Seriously, this is just wrong"}], "tags": [], "owner": {"reputation": 9603, "user_id": 828077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xg4DY.jpg?s=128&g=1", "display_name": "Rajesh Pantula", "link": "https://stackoverflow.com/users/828077/rajesh-pantula"}, "is_accepted": false, "score": -2, "last_activity_date": 1465386381, "creation_date": 1465386381, "answer_id": 37701632, "question_id": 37699452, "link": "https://stackoverflow.com/questions/37699452/telling-if-two-arrays-are-equal-is-on-possible-without-any-assumption-about/37701632#37701632", "title": "Telling if two arrays are equal - is O(n) possible without any assumption about data?", "body": "<p>The worst case time complexity when using hashing is O(n)(Assuming you have created the hashing implementation correctly). The worst case here is in terms of input(not considering the bad implementation of hashtable). </p>\n\n<p>What you are doing above is when your hashtable is implemented badly and having n collisions. </p>\n\n<p>Considering you have a good hashing function which distribute your keys uniquely in the hashtable and there are no collisions, your worst case time complexity will be O(n). Since you can do comparison in a single pass. This way it is more efficient than sorting and comparing(which will need O(nlogn) time). </p>\n"}, {"comments": [{"owner": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "edited": false, "score": 0, "creation_date": 1465397352, "post_id": 37701652, "comment_id": 62885667, "body": "Please let me know if you found a formal proof. I&#39;ve been wondering this for days but I cannot find a clear proof."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "reply_to_user": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "edited": false, "score": 1, "creation_date": 1465398502, "post_id": 37701652, "comment_id": 62886543, "body": "@CheolhoJeon I will try to see if I can come up with something. If you wan&#39;t to give it a try yourself: My idea is something along the lines: assume that some algorithm A can compare two arbitrary arrays in O(n) time, show that you can use this algorithm A to speed up some other algorithm of which you know that it can&#39;t be done that fast. (Just as an example, show that if A exists you can sort in less time than O(n log n))... I&#39;ll let you know if I can come up with something... don&#39;t know though when I&#39;ll find the time."}], "tags": [], "owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "is_accepted": false, "score": 0, "last_activity_date": 1465395574, "last_edit_date": 1465395574, "creation_date": 1465386441, "answer_id": 37701652, "question_id": 37699452, "link": "https://stackoverflow.com/questions/37699452/telling-if-two-arrays-are-equal-is-on-possible-without-any-assumption-about/37701652#37701652", "title": "Telling if two arrays are equal - is O(n) possible without any assumption about data?", "body": "<p>No, it is not possible to deterministically compare 2 arrays with a worst-case runtime of O(n) if no assumptions about the data can be made.</p>\n\n<p>Your analysis for the worst-case with the hash-tables is correct.</p>\n\n<p><strong>Why not?</strong></p>\n\n<p>Either you preprocess the arrays or you don't:</p>\n\n<p>If you do preprocess, the best worstcase you can get is O(n*log(n)) (by sorting).</p>\n\n<p>If you don't preprocess, you will need to compare each element of 1 array against each of the second -> O(n^2).</p>\n\n<hr>\n\n<p>p.s.: unfortunately I didn't manage to find a formal proof yet..</p>\n"}, {"comments": [{"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 1, "creation_date": 1465388571, "post_id": 37702101, "comment_id": 62878743, "body": "&quot;and you can be fairly sure that you don&#39;t get too many hash collisions. This is because nobody can intentionally generate inputs that have the same say SHA-1 hash (many people are trying).&quot; What about duplicate elements. Why won&#39;t they collide? Consider [1, 1, 1, 2] and  [2, 2, 2, 1]. And how do you make a perfect hash-function if you don&#39;t make <i>any</i> assumptions about your data?"}, {"owner": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "reply_to_user": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1465395368, "post_id": 37702101, "comment_id": 62884055, "body": "I agree with @dingalapadum. Although hashes are well-researched, worst case scenario can always happen."}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "edited": false, "score": 0, "creation_date": 1465396949, "post_id": 37702101, "comment_id": 62885345, "body": "Check out <a href=\"https://en.wikipedia.org/wiki/Dynamic_perfect_hashing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dynamic_perfect_hashing</a>. You obviously count identical elements. What I&#39;m claiming is that the worst case is so unlikely that you can pretend it never happens."}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "edited": false, "score": 0, "creation_date": 1465397068, "post_id": 37702101, "comment_id": 62885446, "body": "Also if you want to be really pedantic you can claim that you can&#39;t compute any hash in O(1) and you can&#39;t compare values in O(1), since both depend on the number of bits you use to represent the values."}, {"owner": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "edited": false, "score": 0, "creation_date": 1465397776, "post_id": 37702101, "comment_id": 62885993, "body": "@Sorin I understand your claim. Hash operation being O(n) is really unlikely, and that is why we use it so frequently. However I just cannot ignore the fact that worst case can, although very sparingly, happen. As others mentioned, if we have so many duplicate data(not in specific object type) in both arrays, lots of collisions will happen, leading us to worst case.  I agree with you that the practical solution would definitely be hashing."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 1, "creation_date": 1465397831, "post_id": 37702101, "comment_id": 62886029, "body": "@Sorin I don&#39;t quite get it: if the question is &quot;what is the running time of blabla in the worst-case&quot;, how does an answer of the type &quot;the worst case is unlikely, thus it will never happen&quot; address that question?"}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "reply_to_user": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "edited": false, "score": 0, "creation_date": 1465457725, "post_id": 37702101, "comment_id": 62911594, "body": "@CheolhoJeon identical values are not a problem <code>hash_map[value] = x</code> where x is the number of instances of that value. You increment for one side and decrement for the other. No hash collisions necessary."}, {"owner": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "edited": false, "score": 0, "creation_date": 1465526846, "post_id": 37702101, "comment_id": 62948905, "body": "@Sorin Oh you are totally right. I wrote dumb things."}], "tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": false, "score": 1, "last_activity_date": 1465387790, "creation_date": 1465387790, "answer_id": 37702101, "question_id": 37699452, "link": "https://stackoverflow.com/questions/37699452/telling-if-two-arrays-are-equal-is-on-possible-without-any-assumption-about/37702101#37702101", "title": "Telling if two arrays are equal - is O(n) possible without any assumption about data?", "body": "<p>Yes, you can with hashing.</p>\n\n<p>You get collisions in hashing if the hash function is really bad for the data-set and likely you only get O(N^2) if the hash function is constant (always returns 1 or something like that).</p>\n\n<p>In reality you can use a cryptographic hashing function and you can be fairly sure that you don't get too many hash collisions. This is because nobody can intentionally generate inputs that have the same say SHA-1 hash (many people are trying). Or alternatively try a perfect hashing algorithm.</p>\n\n<p>So your worst case analysis is based on wrong assumptions. Using good hash functions guarantees that you are always close to the average case and never in the worst case.</p>\n"}], "owner": {"reputation": 320, "user_id": 4373421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014d29bb3c748819265594499b5ec7d5?s=128&d=identicon&r=PG&f=1", "display_name": "Cheolho Jeon", "link": "https://stackoverflow.com/users/4373421/cheolho-jeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1465398717, "creation_date": 1465380444, "last_edit_date": 1495542243, "question_id": 37699452, "link": "https://stackoverflow.com/questions/37699452/telling-if-two-arrays-are-equal-is-on-possible-without-any-assumption-about", "title": "Telling if two arrays are equal - is O(n) possible without any assumption about data?", "body": "<p>I've been wondering about worst-case time complexity of telling if two <strong>unordered</strong> arrays consist of same elements. Elements could be in any type. Numbers, strings, custom objects... etc, but let's assume that elements are both sortable and hashable.</p>\n\n<p>I've thought of three methods, which are well-explained in <a href=\"https://stackoverflow.com/questions/7828867/how-to-efficiently-compare-two-unordered-lists-not-sets-in-python\">this stackoverflow post</a>. Which are 1) use hash 2) use sorting 3) just loop through.</p>\n\n<p>The post said that it is possible to achieve worst-time <code>O(n)</code> if data is hashable, however, I think that is not quite right since inserting and searching in Hash is not an worst-case <code>O(1)</code> operation. It's <code>O(1)</code> on average, if no collision occurs, but it's <code>O(n)</code> in both inserting and searching (in theory). So If a lot of collision happens, using hash to tell two arrays are equal will cost <code>O(n^2)</code>. (please correct me if I'm wrong.)</p>\n\n<p>So it seems to me that telling two arrays are equal will cost as much as sorting the arrays, which, without any knowledge about the array, would cost <code>O(nlogn)</code>. (with assumption that comparing two elements equal will always cost <code>O(1)</code>)</p>\n\n<p>Is it possible to tell two arrays are equal in worst-case O(n)? I'll appreciate any comments, duplicate flags, reference to a paper. Thanks!</p>\n\n<p>Here's my code for comparing two arrays are equal. (It's in ruby and working, but please see it more like a pseudo code)</p>\n\n<p>One. compare by hashing - on average, <code>O(n)</code>, worst-case, <code>O(n^2)</code>  </p>\n\n<pre><code>def compare_by_hashing(list1, list2)  \n  hash1 = {}  \n  list1.each do |item|  \n    hash1[item] ||= 0  \n    hash1[item] += 1  \n  end  \n  hash2 = {}  \n  list2.each do |item|  \n    hash2[item] ||= 0  \n    hash2[item] += 1  \n  end  \n\n  hash1.each do |key, hash_1_value|  \n    return false if hash_1_value != hash2[key]  \n  end  \n  return true  \nend  \n</code></pre>\n\n<p>Two. compare by sorting. Worst-case <code>O(nlogn)</code>  </p>\n\n<pre><code># 2. compare by sorting. Worst-case `O(nlogn)`\ndef compare_by_sorting(list1, list2)  \n  list1.sort  \n  list2.sort  \n\n  list1.each_with_index do |list_1_item, index|  \n    return false if list_1_item != list2[index]  \n  end  \n  return true  \nend  \n</code></pre>\n\n<p>Three. Compare by just looping through. Worst case <code>O(n^2)</code></p>\n\n<pre><code>def compare_by_looping(list1, list2)  \n  list1.each do |item|  \n    if list2.include? item  \n      list2.delete item  \n    else  \n      return false  \n    end  \n  end  \n  return true  \nend  \n</code></pre>\n\n<h2>Edit</h2>\n\n<p>I appreciate and understand answers and comments that hash operations would normally show O(1) time complexity and worst-case scenarios are very unlikely to happen. However, since they <strong>can anyways happen</strong>, I do not want to ignore the possibilities. I apologize for not making my point clear. My first intention was to find <em>theoretically proven O(n) algorithm</em>, <strong>not</strong> <em>practical algorithm</em>. \nThanks for your attention. I really appreciate it.</p>\n"}, {"tags": ["ruby", "rake"], "answers": [{"comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1465382994, "post_id": 37700276, "comment_id": 62875000, "body": "P.S. If you get strange problems, you may need to put some parts of your commands in double quotes -- using <code>%q{}</code> to build a string makes this easier; and/or you may find you need to use <code>Shellwords.shellescape</code> for the commands."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 1, "last_activity_date": 1465382645, "creation_date": 1465382645, "answer_id": 37700276, "question_id": 37698935, "link": "https://stackoverflow.com/questions/37698935/is-there-any-better-way-to-execute-several-system-commands-from-a-rake-task/37700276#37700276", "title": "Is there any better way to execute several system commands from a rake task?", "body": "<p>You could join all those commands into a single command and execute that.  Assuming you created an array <code>commands</code> containing all your commands, you could do this:</p>\n\n<pre><code>composite_command = commands.join('; ')\nsystem(composite_command)\n</code></pre>\n\n<p>If you want execution to stop if any contain errors you could replace the semicolons with double ampersands ampersands:</p>\n\n<pre><code>composite_command = commands.join(' &amp;&amp; ')\nsystem(composite_command)\n</code></pre>\n\n<p>This illustrates what <code>&amp;&amp;</code> does:</p>\n\n<pre><code>$ ls foo &amp;&amp; echo hi\nls: foo: No such file or directory\n$ touch foo\n$ ls foo &amp;&amp; echo hi\nfoo\nhi\n</code></pre>\n\n<p>The shell defines failure as the returning of an exit code other than 0.</p>\n\n<p>There <em>is</em> a maximum command length but I expect that it would always be at least 1024.</p>\n"}], "owner": {"reputation": 23, "user_id": 6439509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8843ae87ba329476b7bd9d487bf8cf3c?s=128&d=identicon&r=PG&f=1", "display_name": "Kristina Ste", "link": "https://stackoverflow.com/users/6439509/kristina-ste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 37700276, "answer_count": 1, "score": 2, "last_activity_date": 1465382645, "creation_date": 1465379142, "last_edit_date": 1465379667, "question_id": 37698935, "link": "https://stackoverflow.com/questions/37698935/is-there-any-better-way-to-execute-several-system-commands-from-a-rake-task", "title": "Is there any better way to execute several system commands from a rake task?", "body": "<p>I have a rake task in my calabash project which executes several system commands, like: </p>\n\n<pre><code>desc 'Export and execute features from JIRA '\n  task :run_jira, [:key, :language, :apk_file] do |_, args|\n  key = args[:key]\n  language = args[:language] || 'en'\n  apk_file = args[:apk_file] || default_apk\n  system \"curl -u admin:admin -X GET http://myjira/rest/raven/1.0/export/test?keys=#{key} &gt; jira.zip\"\n  system \"unzip -o jira.zip -d features/jira\"\n  system \"rm -rf jira.zip\"\n  system \"calabash-android run #{apk_file} -p android -p #{language} -p common -f json -o results/reports/calabash-#{key}.json  features/jira\"\n  system \"curl -H 'Content-Type: application/json' -X POST -u admin:admin --data @results/reports/calabash-#{key}.json http://myjira/rest/raven/1.0/import/execution/cucumber\"\nend\n</code></pre>\n\n<p>Is there any better way to execute those 5 system calls? My idea is to make an .sh script and start it from the task, but as the script will be executed on both OS X and Linux machines, I think it could create more troubles. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "gemfile"], "answers": [{"comments": [{"owner": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "edited": false, "score": 0, "creation_date": 1465385797, "post_id": 37701366, "comment_id": 62876764, "body": "that&#39;s one thing which I want to try but someone else has pushed this code and my worry is there could be some reason he has used it that way and hence I am not risking it"}, {"owner": {"reputation": 1238, "user_id": 5501716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NUNlx.jpg?s=128&g=1", "display_name": "Alex Zakruzhetskyi", "link": "https://stackoverflow.com/users/5501716/alex-zakruzhetskyi"}, "reply_to_user": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "edited": false, "score": 0, "creation_date": 1465421062, "post_id": 37701366, "comment_id": 62899938, "body": "Download gems from dithub and try to copy them into <code>vendor&#47;gems&#47;spree_social</code>. Don&#39;t know for sure, but I think it should work."}], "tags": [], "owner": {"reputation": 1238, "user_id": 5501716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NUNlx.jpg?s=128&g=1", "display_name": "Alex Zakruzhetskyi", "link": "https://stackoverflow.com/users/5501716/alex-zakruzhetskyi"}, "is_accepted": false, "score": 1, "last_activity_date": 1465385665, "creation_date": 1465385665, "answer_id": 37701366, "question_id": 37698700, "link": "https://stackoverflow.com/questions/37698700/bundle-install-fails-for-custom-spree-gems/37701366#37701366", "title": "bundle install fails for custom spree gems", "body": "<p>Why not to do in Gemfile:</p>\n\n<p><code>gem 'spree_social', github: 'spree-contrib/spree_social', branch: 'master'</code>. Then run <code>bundle install</code>.</p>\n"}], "owner": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465385665, "creation_date": 1465378534, "last_edit_date": 1465378855, "question_id": 37698700, "link": "https://stackoverflow.com/questions/37698700/bundle-install-fails-for-custom-spree-gems", "title": "bundle install fails for custom spree gems", "body": "<p>I have a spree app running where I am using number of gems to solve some of my purposes.</p>\n\n<p>I am using a gem <a href=\"https://github.com/spree-contrib/spree_social\" rel=\"nofollow\">spree social</a>, <a href=\"https://github.com/spree-contrib/spree_reviews\" rel=\"nofollow\">spree reviews</a> and a couple more. I had my code and It was working well. But since I have pulled the code, I am getting error like below</p>\n\n<blockquote>\n  <p>Could not find gem 'spree_social' in source at <code>vendor/gems/spree_social</code>.\n  Source does not contain any versions of 'spree_social'</p>\n</blockquote>\n\n<p>Here's how I've mentioned my gems </p>\n\n<pre><code> gem 'spree_wishlist' , :path =&gt; File.join(File.dirname(__FILE__), '/vendor/gems/spree_wishlist-2.2.0')\n gem 'spree_reviews',  :path =&gt; File.join(File.dirname(__FILE__), '/vendor/gems/spree_reviews')\n gem 'spree_social',  :path =&gt; File.join(File.dirname(__FILE__), '/vendor/gems/spree_social')\n gem 'spree_gift_card',  :path =&gt; File.join(File.dirname(__FILE__), '/vendor/gems/spree_gift_card')\n gem 'stringex'\n gem 'spree_auth_devise',  :path =&gt; File.join(File.dirname(__FILE__), '/vendor/gems/spree_auth_devise-3.0.6')  \n</code></pre>\n\n<p>Someone please help me out in this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "bash", "awk"], "comments": [{"owner": {"reputation": 604, "user_id": 1090448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7be5279a07c75602391000f658170e70?s=128&d=identicon&r=PG", "display_name": "kirlev", "link": "https://stackoverflow.com/users/1090448/kirlev"}, "edited": false, "score": 0, "creation_date": 1465378855, "post_id": 37698369, "comment_id": 62872181, "body": "Why did you tag this question as related to ruby and ruby-on-rails?"}, {"owner": {"reputation": 17, "user_id": 5150290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SZ2pz.jpg?s=128&g=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/5150290/mandeep"}, "reply_to_user": {"reputation": 604, "user_id": 1090448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7be5279a07c75602391000f658170e70?s=128&d=identicon&r=PG", "display_name": "kirlev", "link": "https://stackoverflow.com/users/1090448/kirlev"}, "edited": false, "score": 0, "creation_date": 1465379739, "post_id": 37698369, "comment_id": 62872831, "body": "Well I am using controller to do this. If anyone even related to ruby on rails has ever done this then Please help me. Otherwise, There is nothing like to disturb you. Sorry if you felt bad for this"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1465379880, "post_id": 37698369, "comment_id": 62872920, "body": "<code>something | awk | grep | uniq</code> seems a bit overkilling. I don&#39;t know how ruby works, so <code>files = tar ...</code> is unknown to me, but if you want to get help on <code>awk</code>&#39;s part, you need to provide some sample input."}, {"owner": {"reputation": 17, "user_id": 5150290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SZ2pz.jpg?s=128&g=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/5150290/mandeep"}, "edited": false, "score": 0, "creation_date": 1465380578, "post_id": 37698369, "comment_id": 62873454, "body": "Sample input is a zipped folder that i am using with it. Just copy and paste it in the terminal, replace the name of the zipped folder and you&#39;ll see results printing out. Is there any method to get those printed out variables into an array and return that array from this code. If it is possible then I might be able to assign that array into another variable."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 6441716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83f19f6becb74b70b4c446e574bb0575?s=128&d=identicon&r=PG&f=1", "display_name": "kcoder24", "link": "https://stackoverflow.com/users/6441716/kcoder24"}, "is_accepted": false, "score": 0, "last_activity_date": 1465414653, "creation_date": 1465414653, "answer_id": 37711455, "question_id": 37698369, "link": "https://stackoverflow.com/questions/37698369/why-awk-command-is-not-returning-anything-to-variable-when-used-in-ruby-on-rai/37711455#37711455", "title": "Why &#39;awk&#39; command is not returning anything to variable when used in Ruby on rails?", "body": "<p>Could you post some sample input/output data, to see what is what you want?</p>\n\n<p>I don't have a *nix near but you can check if tar is writing the output to stderr or stdout, something like this:</p>\n\n<pre><code>tar tf 3578336.tar.xz 2&gt;/dev/null   #If you can see the filenames, then it writes to stdout\n\ntar tf 3578336.tar.xz &gt;/dev/null   #If you can see the filenames, then it writes to stderr\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5150290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SZ2pz.jpg?s=128&g=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/5150290/mandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465414653, "creation_date": 1465377787, "question_id": 37698369, "link": "https://stackoverflow.com/questions/37698369/why-awk-command-is-not-returning-anything-to-variable-when-used-in-ruby-on-rai", "title": "Why &#39;awk&#39; command is not returning anything to variable when used in Ruby on rails?", "body": "<p>Currently I am working on a task in which i have to read zipped file and list its contents. I am using bash script code in my controller file <code>files = tar tf 3578336.tar.xz | awk -F'/' '{ for (i=1;i&lt;5;i++) print \"/\"$i ; print \"\\n\"}' ORS='' |grep \"/\"|uniq</code>. I am trying to get content using this command but I am unable to get the response in variable. If i am using <code>files = tar tf 3578336.tar.xz</code> then It returns all the contents. What I am trying to do is to list the directories and files according to their levels. It is like creating a file management system for a zipped file.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "edited": false, "score": 0, "creation_date": 1465376978, "post_id": 37697878, "comment_id": 62870925, "body": "but won&#39;t that also make it fail in <code>rails console</code> ?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "edited": false, "score": 0, "creation_date": 1465377048, "post_id": 37697878, "comment_id": 62870965, "body": "In the console you used a normal Hash. You can try with something like <code>h = HashWithIndifferentAccess.new</code>"}, {"owner": {"reputation": 415, "user_id": 277194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf898c040aef3470563f5bbb1719ecd?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/277194/rob"}, "edited": false, "score": 1, "creation_date": 1465381441, "post_id": 37697878, "comment_id": 62874041, "body": "You can use <code>v.kind_of(Hash)</code> and it will correctly detect <code>Hash</code> and <code>HashWithIndifferentAccess</code> <a href=\"http://ruby-doc.org/core-2.3.1/Object.html#method-i-kind_of-3F\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.1/Object.html#method-i-kind_of-3F</a>"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1465381515, "last_edit_date": 1592644375, "creation_date": 1465376454, "answer_id": 37697878, "question_id": 37697722, "link": "https://stackoverflow.com/questions/37697722/recursive-method-not-working-in-rails/37697878#37697878", "title": "Recursive method not working in Rails", "body": "<p>In some cases Rails uses <code>HashWithIndifferentAccess</code> class so I suppose your check <code>v.instance_of?(Hash)</code> can be false.</p>\n<h3>Workaround:</h3>\n<pre><code>class Hash\n  def delete_blank\n    delete_if { |k, v| v.empty? || v.kind_of?(Hash) &amp;&amp; v.delete_blank.empty? }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 37697878, "answer_count": 1, "score": -1, "last_activity_date": 1465400047, "creation_date": 1465376046, "last_edit_date": 1495535339, "question_id": 37697722, "link": "https://stackoverflow.com/questions/37697722/recursive-method-not-working-in-rails", "title": "Recursive method not working in Rails", "body": "<p>I have a method<a href=\"https://stackoverflow.com/questions/5975498/how-to-recursively-remove-all-keys-with-empty-values-from-yaml-hash\">1</a> on Hash that deletes key-value pairs whose value is blank. It does that recursively for nested hashes as well.</p>\n\n<pre><code>class Hash\n  def delete_blank\n    delete_if { |k, v| v.empty? || v.instance_of?(Hash) &amp;&amp; v.delete_blank.empty? }\n  end\nend\n</code></pre>\n\n<p>Running it from console works:</p>\n\n<pre><code>{\n  \"customer_id\"=&gt;\"foo\",\n  \"document_id\"=&gt;\"\",\n  \"status\"=&gt;\"\",\n  \"total\"=&gt;{\"from\"=&gt;\"1\", \"to\"=&gt;\"\"}\n}.delete_blank\n#=&gt; {\"customer_id\"=&gt;\"foo\", \"total\"=&gt;{\"from\"=&gt;\"1\"}}\n\n{\n  \"customer_id\"=&gt;\"\",\n  \"document_id\"=&gt;\"\",\n  \"status\"=&gt;\"\",\n  \"total\"=&gt;{\"from\"=&gt;\"\", \"to\"=&gt;\"\"}\n}.delete_blank\n#=&gt; {} \n</code></pre>\n\n<p>I put the code above in my Rails project in <code>lib/core_ext/hash.rb</code>, then required the file. I am trying to use it in a model concern. However, it does not remove blank pairs in nested hashes:</p>\n\n<pre><code>{\n  \"customer_id\"=&gt;\"\",\n  \"document_id\"=&gt;\"\",\n  \"status\"=&gt;\"\",\n  \"total\"=&gt;{\"from\"=&gt;\"\", \"to\"=&gt;\"\"}\n}.delete_blank\n#=&gt; {\"total\"=&gt;{\"from\"=&gt;\"\", \"to\"=&gt;\"\"}} \n</code></pre>\n\n<p>Why does the recursive part of the method not work as expected in the app (while it works in <code>rails c</code>)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "actioncable"], "comments": [{"owner": {"reputation": 969, "user_id": 907258, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2c81e6be1662df5dad59a69c841440c0?s=128&d=identicon&r=PG", "display_name": "Tomek Wa\u0142kuski", "link": "https://stackoverflow.com/users/907258/tomek-wa%c5%82kuski"}, "edited": false, "score": 0, "creation_date": 1493126298, "post_id": 37696238, "comment_id": 74272400, "body": "FYI, this has been fixed with <a href=\"https://github.com/rails/rails/pull/26547\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/26547</a>"}], "answers": [{"tags": [], "owner": {"reputation": 969, "user_id": 907258, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2c81e6be1662df5dad59a69c841440c0?s=128&d=identicon&r=PG", "display_name": "Tomek Wa\u0142kuski", "link": "https://stackoverflow.com/users/907258/tomek-wa%c5%82kuski"}, "is_accepted": true, "score": 1, "last_activity_date": 1467805300, "creation_date": 1467805300, "answer_id": 38223153, "question_id": 37696238, "link": "https://stackoverflow.com/questions/37696238/what-can-be-the-reason-of-unable-to-find-subscription-with-identifier-in-rails/38223153#38223153", "title": "What can be the reason of &quot;Unable to find subscription with identifier&quot; in Rails ActionCable?", "body": "<p>It looks like it's related to this issue: <a href=\"https://github.com/rails/rails/issues/25381\" rel=\"nofollow\">https://github.com/rails/rails/issues/25381</a> </p>\n\n<p>Some kind of race conditions when Rails reply the subscription has been created but in fact it hasn't been done yet.</p>\n\n<p>As a temporary solution adding a small timeout after establishing the subscription has solved the issue.</p>\n\n<p>More investigation needs to be done, though. </p>\n"}, {"comments": [{"owner": {"reputation": 1240, "user_id": 1171893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a9f6bfa4a7a72a4da55eac3ec45dc058?s=128&d=identicon&r=PG", "display_name": "Melvin Roest", "link": "https://stackoverflow.com/users/1171893/melvin-roest"}, "edited": false, "score": 0, "creation_date": 1570806642, "post_id": 43473946, "comment_id": 103043261, "body": "This is my question exactly. Thanks for stating it so clearly. I ran into the exact same issue."}], "tags": [], "owner": {"reputation": 1672, "user_id": 6594668, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/7d7abb51f365e465123208807ee0b07b?s=128&d=identicon&r=PG&f=1", "display_name": "prograils", "link": "https://stackoverflow.com/users/6594668/prograils"}, "is_accepted": false, "score": 1, "last_activity_date": 1492691884, "last_edit_date": 1492691884, "creation_date": 1492522968, "answer_id": 43473946, "question_id": 37696238, "link": "https://stackoverflow.com/questions/37696238/what-can-be-the-reason-of-unable-to-find-subscription-with-identifier-in-rails/43473946#43473946", "title": "What can be the reason of &quot;Unable to find subscription with identifier&quot; in Rails ActionCable?", "body": "<p>The reason for this error might be the difference of the identifiers you subscribe to and messaging to. I use ActionCable in Rails 5 API mode (with gem 'devise_token_auth') and I faced the same error too:</p>\n\n<p>SUBSCRIBE (ERROR):</p>\n\n<pre><code>{\"command\":\"subscribe\",\"identifier\":\"{\\\"channel\\\":\\\"UnreadChannel\\\"}\"}\n</code></pre>\n\n<p>SEND MESSAGE (ERROR):</p>\n\n<pre><code>{\"command\":\"message\",\"identifier\":\"{\\\"channel\\\":\\\"UnreadChannel\\\",\\\"correspondent\\\":\\\"client2@example.com\\\"}\",\"data\":\"{\\\"action\\\":\\\"process_unread_on_server\\\"}\"}\n</code></pre>\n\n<p>For some reason ActionCable requires your client instance to apply the same identifier twice - while subscribing and while messaging:</p>\n\n<p><strong>/var/lib/gems/2.3.0/gems/actioncable-5.0.1/lib/action_cable/connection/subscriptions.rb:74</strong></p>\n\n<pre><code>def find(data)\n  if subscription = subscriptions[data['identifier']]\n    subscription\n  else\n    raise \"Unable to find subscription with identifier: #{data['identifier']}\"\n  end\nend\n</code></pre>\n\n<p>This is a live example: I implement a messaging subsystem where users get the unread messages notifications in the real-time mode. At the time of the subscription, I don't really need a <code>correspondent</code>, but at the messaging time - I do.</p>\n\n<p>So the solution is to move the <code>correspondent</code> from identifier hash to the data hash:</p>\n\n<p>SEND MESSAGE (CORRECT):</p>\n\n<pre><code>{\"command\":\"message\",\"identifier\":\"{\\\"channel\\\":\\\"UnreadChannel\\\"}\",\"data\":\"{\\\"correspondent\\\":\\\"client2@example.com\\\",\\\"action\\\":\\\"process_unread_on_server\\\"}\"}\n</code></pre>\n\n<p>This way the error is gone.</p>\n\n<p>Here's my <code>UnreadChannel</code> code:</p>\n\n<pre><code>class UnreadChannel &lt; ApplicationCable::Channel\n  def subscribed\n\n    if current_user\n\n      unread_chanel_token = signed_token current_user.email\n\n      stream_from \"unread_#{unread_chanel_token}_channel\"\n\n    else\n# http://api.rubyonrails.org/classes/ActionCable/Channel/Base.html#class-ActionCable::Channel::Base-label-Rejecting+subscription+requests\n      reject\n\n    end\n\n  end\n\n  def unsubscribed\n    # Any cleanup needed when channel is unsubscribed\n  end\n\n  def process_unread_on_server param_message\n\n    correspondent = param_message[\"correspondent\"]\n\n    correspondent_user = User.find_by email: correspondent\n\n    if correspondent_user\n\n      unread_chanel_token = signed_token correspondent\n\n      ActionCable.server.broadcast \"unread_#{unread_chanel_token}_channel\",\n                                   sender_id: current_user.id\n    end\n\n  end\n\nend\n</code></pre>\n\n<p>helper: (you shouldn't expose plain identifiers - encode them the same way Rails encodes plain cookies to signed ones)</p>\n\n<pre><code>  def signed_token string1\n\n    token = string1\n\n# http://vesavanska.com/2013/signing-and-encrypting-data-with-tools-built-in-to-rails\n\n    secret_key_base = Rails.application.secrets.secret_key_base\n\n    verifier = ActiveSupport::MessageVerifier.new secret_key_base\n\n    signed_token1 = verifier.generate token\n\n    pos = signed_token1.index('--') + 2\n\n    signed_token1.slice pos..-1\n\n  end  \n</code></pre>\n\n<p>To summarize it all you must first call SUBSCRIBE command if you want later call MESSAGE command. Both commands must have the same identifier hash (here \"channel\"). What is interesting here, the <code>subscribed</code> hook is not required (!) - even without it you can still send messages (after SUBSCRIBE) (but nobody would receive them - without the <code>subscribed</code> hook).</p>\n\n<p>Another interesting point here is that inside the <code>subscribed</code> hook I use this code:</p>\n\n<pre><code>stream_from \"unread_#{unread_chanel_token}_channel\"\n</code></pre>\n\n<p>and obviously the <code>unread_chanel_token</code> could be whatever - it applies only to the \"receiving\" direction.</p>\n\n<p>So the <strong>subscription</strong> identifier (like <code>\\\"channel\\\":\\\"UnreadChannel\\\"</code>) has to be considered as a \"password\" for the future <strong>message-sending</strong> operations (e.g. it applies only to the \"sending\" direction) - if you want to send a message, (first send subscribe, and then) provide the same \"pass\" again, or you'll get the described error.</p>\n\n<p>And more of it - it's really just a \"password\" - as you can see, you can actually send a message to whereever you want:</p>\n\n<pre><code>ActionCable.server.broadcast \"unread_#{unread_chanel_token}_channel\", sender_id: current_user.id\n</code></pre>\n\n<p>Weird, right?</p>\n\n<p>This all is pretty complicated. Why is it not described in the <a href=\"http://guides.rubyonrails.org/action_cable_overview.html\" rel=\"nofollow noreferrer\">official documentation</a>?</p>\n"}], "owner": {"reputation": 969, "user_id": 907258, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2c81e6be1662df5dad59a69c841440c0?s=128&d=identicon&r=PG", "display_name": "Tomek Wa\u0142kuski", "link": "https://stackoverflow.com/users/907258/tomek-wa%c5%82kuski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2344, "favorite_count": 2, "accepted_answer_id": 38223153, "answer_count": 2, "score": 5, "last_activity_date": 1492691884, "creation_date": 1465371759, "question_id": 37696238, "link": "https://stackoverflow.com/questions/37696238/what-can-be-the-reason-of-unable-to-find-subscription-with-identifier-in-rails", "title": "What can be the reason of &quot;Unable to find subscription with identifier&quot; in Rails ActionCable?", "body": "<p>I'm building a messenger application using Rails 5.0.0.rc1 + ActionCable + Redis.</p>\n\n<p>I've single channel <code>ApiChannel</code> and a number of actions in it. There are some \"unicast\" actions -> ask for something, get something back, and \"broadcast\" actions -> do something, broadcast the payload to some connected clients.</p>\n\n<p>From time to time I'm getting <code>RuntimeError</code> exception from here: <a href=\"https://github.com/rails/rails/blob/master/actioncable/lib/action_cable/connection/subscriptions.rb#L70\" rel=\"noreferrer\">https://github.com/rails/rails/blob/master/actioncable/lib/action_cable/connection/subscriptions.rb#L70</a> <code>Unable to find subscription with identifier (...)</code>.</p>\n\n<p>What can be a reason of this? In what situation can I get such exception? I spent quite a lot of time on investigating the issue (and will continue to do so) and any hints would be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "gemfile", "rails-console"], "comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1465368244, "post_id": 37694925, "comment_id": 62865580, "body": "restart your server and then tell me"}, {"owner": {"reputation": 1551, "user_id": 4380542, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/nJSw1.jpg?s=128&g=1", "display_name": "Uday kumar das", "link": "https://stackoverflow.com/users/4380542/uday-kumar-das"}, "edited": false, "score": 0, "creation_date": 1465369423, "post_id": 37694925, "comment_id": 62866285, "body": "Exit <code>rails c</code> and then try using code in console again."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 2, "creation_date": 1465370068, "post_id": 37694925, "comment_id": 62866640, "body": "Are you running console by <code>bundle exec rails c</code>?"}, {"owner": {"reputation": 47, "user_id": 2112719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a1193975e33481a764276aba4ff0c6f?s=128&d=identicon&r=PG&f=1", "display_name": "JKW", "link": "https://stackoverflow.com/users/2112719/jkw"}, "edited": false, "score": 0, "creation_date": 1465408312, "post_id": 37694925, "comment_id": 62893002, "body": "It was bundle exec rails c that did it! Why was that different from simply running bin/rails c in the terminal?"}], "owner": {"reputation": 47, "user_id": 2112719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a1193975e33481a764276aba4ff0c6f?s=128&d=identicon&r=PG&f=1", "display_name": "JKW", "link": "https://stackoverflow.com/users/2112719/jkw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465367739, "creation_date": 1465367739, "question_id": 37694925, "link": "https://stackoverflow.com/questions/37694925/groupdate-gem-not-included-in-gemfile", "title": "groupdate gem not included in Gemfile?", "body": "<p>I have </p>\n\n<blockquote>\n  <p>gem 'groupdate'</p>\n</blockquote>\n\n<p>in my Gemfile in my Rails project. I run bundle and then open bin/rails c to test the methods out yet I still get the error:</p>\n\n<blockquote>\n  <p>[4] pry(main)> users.group_by_day { |u| u.created_at }\n  NoMethodError: undefined method <code>group_by_day' for #&gt;&gt;&gt;&lt;User::ActiveRecord_Relation:0x007faee79ca818&gt;\n  from /Users/Jonathan/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.6/lib/active_record/relation/delegation.rb:136:in</code>method_missing'</p>\n</blockquote>\n\n<p>I've ran bundle update and whatnot and I'm unsure what the issue could be</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "chef-solo"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1465367147, "post_id": 37694555, "comment_id": 62865039, "body": "You want string value or integer??"}, {"owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1465370037, "post_id": 37694555, "comment_id": 62866622, "body": "Hi @llya I have updated complete code. Please look into it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465372136, "post_id": 37694555, "comment_id": 62867893, "body": "Did you see <a href=\"http://stackoverflow.com/a/37610826/477037\">my answer</a> to your last question?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465372525, "post_id": 37694555, "comment_id": 62868118, "body": "@Stefan I immediately downvoted the question and have my answer removed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 4, "creation_date": 1465372890, "post_id": 37694555, "comment_id": 62868339, "body": "You initially had a simple question that was ambiguous. You said &quot;I want to get only string value as- <code>val=720</code> only&quot;. If you had written <code>val=&quot;720&quot;</code>, that would be consistent, but you wrote <code>val=720</code>, <code>720</code> being an integer, not a string. @Ilya simply wanted to know if the value of <code>val</code> was a string or an integer. You did not answer that question, but instead added a mountain of irrelevant <code>chef</code>-related bumph."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1465373339, "post_id": 37694555, "comment_id": 62868608, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37610572/grep-single-line-from-multiline-string\">grep single line from multiline string</a>"}, {"owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465374039, "post_id": 37694555, "comment_id": 62868985, "body": "@Stefan I already tried your suggestion but it was not filtering as a <b>string</b>."}, {"owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1467190612, "post_id": 37694555, "comment_id": 63624545, "body": "I have been ban to ask any more questions. @mudasobwa Can you please let me know the reason for down voting so that I can improve."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1467191382, "post_id": 37694555, "comment_id": 63625043, "body": "@BiswajitDas You\u2019ve asked a question, received the correct well-explained answer from the ruby professional and made no effort to read/understand it. Instead you posted the same question once again, in hope that we have nothing to do here, besides providing you the answers that won\u2019t require any effort from you besides copy-paste."}, {"owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1467192541, "post_id": 37694555, "comment_id": 63625852, "body": "@mudasobwa well. This is not completely duplicate with <a href=\"http://stackoverflow.com/questions/37610572/grep-single-line-from-multiline-string\">this</a> but for <b>different purpose</b>. Possibly you can very clearly see only one I marked as answer for both the questions. One <b>mistake</b> I have done here I have used the same example for both the questions. If I have a very good ruby professionals I would have not asked these kind of questions here.You can not simply assume since I am the question owners for both the questions. I strictly need a strong explanation from you people."}, {"owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "edited": false, "score": 0, "creation_date": 1468583590, "post_id": 37694555, "comment_id": 64199198, "body": "Updated code. hopefully duplicate mark can be removed from this post and get upvote for this post."}], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "edited": false, "score": 0, "creation_date": 1465370150, "post_id": 37694714, "comment_id": 62866697, "body": "Hi @cary-swoveland I have updated the question in detail. please look into it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1465366960, "creation_date": 1465366960, "answer_id": 37694714, "question_id": 37694555, "link": "https://stackoverflow.com/questions/37694555/ruby-convert-string-array-to-string/37694714#37694714", "title": "Ruby convert string array to string", "body": "<p>As you want <code>val = 720</code> and not <code>val = \"720\"</code> you can write</p>\n\n<pre><code>val = strvar.first.to_i\n  #=&gt; 720\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "edited": false, "score": 0, "creation_date": 1465544730, "post_id": 37696245, "comment_id": 62955550, "body": "yeah. Somehow shell_out was not working in windows system. not sure if I need to include any library."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "edited": false, "score": 0, "creation_date": 1465583559, "post_id": 37696245, "comment_id": 62979494, "body": "It depends on your version of Chef, you can use <code>include Chef::Mixin::ShellOut</code> but this is already done for you in newer versions."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 3, "last_activity_date": 1465371779, "creation_date": 1465371779, "answer_id": 37696245, "question_id": 37694555, "link": "https://stackoverflow.com/questions/37694555/ruby-convert-string-array-to-string/37696245#37696245", "title": "Ruby convert string array to string", "body": "<p>long time no see since Rot :)</p>\n\n<p>You can use some Chef helper methods and regular expressions to make this a little easier.</p>\n\n<pre><code>output = shell_out!('saphostexec.exe -version', cwd: 'C:\\\\Program Files\\\\hostctrl\\\\exe').stdout\nif output =~ /kernel release\\s+(\\d+)/\n  kernel_version = $1\nelse\n  raise \"unable to parse kernel version\"\nend\nChef::Log.info(kernel_version)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 0, "last_activity_date": 1465384737, "creation_date": 1465384737, "answer_id": 37701017, "question_id": 37694555, "link": "https://stackoverflow.com/questions/37694555/ruby-convert-string-array-to-string/37701017#37701017", "title": "Ruby convert string array to string", "body": "<p>You can return the first series of digits found as an integer from the <code>current_kernel</code> string with <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-5B-5D\" rel=\"nofollow\">String#[regexp]</a> :</p>\n\n<pre><code>current_kernel[/\\d+/].to_i\n  #=&gt; 720\n</code></pre>\n"}], "owner": {"reputation": 594, "user_id": 3226196, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eea52977914912b02b04b022534baa51?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit Das", "link": "https://stackoverflow.com/users/3226196/biswajit-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "accepted_answer_id": 37694714, "answer_count": 3, "score": -3, "last_activity_date": 1468583300, "creation_date": 1465366358, "last_edit_date": 1468583300, "question_id": 37694555, "link": "https://stackoverflow.com/questions/37694555/ruby-convert-string-array-to-string", "title": "Ruby convert string array to string", "body": "<p>I have a ruby string array value and i want to get it as string value. I am using ruby with chef recipe. Running in windows platform. Code- </p>\n\n<pre><code>version_string = Mixlib::ShellOut.new('some.exe -version').run_command     \nLog.info(version.stdout.to_s)    \nextract_var = version_string.stdout.to_s.lines.grep(/ver/)\nLog.info('version:'+ extract_var.to_s)\n</code></pre>\n\n<p>output is coming-</p>\n\n<pre><code>version           530    \n[2016-06-08T07:03:49+00:00] INFO:  version [\"version                530\\r\\n\"]\n</code></pre>\n\n<p>I want to extract 530 string only.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods", "rubygems", "class-method"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1465372984, "post_id": 37694491, "comment_id": 62868397, "body": "You don&#39;t use a <code>for</code>, <code>while</code>, or <code>unless</code> loop in your code."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1465370296, "last_edit_date": 1465370296, "creation_date": 1465366964, "answer_id": 37694716, "question_id": 37694491, "link": "https://stackoverflow.com/questions/37694491/ruby-loop-countdown-method-keeps-returning-nil/37694716#37694716", "title": "Ruby Loop Countdown Method keeps returning &quot;nil&quot;", "body": "<p>It's not necessary to <code>print</code> inside the function and also outside it - this will cause duplicate printing. Also you are calling <code>print</code> on the positive numbers but not calling <code>print</code> if they are negative or zero. Additionally, you are using <code>print \"#{n}\"</code> which is the same as <code>print n</code>.</p>\n\n<p>As far as the title of your question goes - \"keeps returning nil\" - you can change your approach a bit to do the <code>print</code> calls outside the function.</p>\n\n<pre><code>def countdown(n)\n  n &lt;= 1 ? [n] : (n-1).downto(1).to_a\nend\nprint countdown(n).join(\", \")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 4380628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5e106d4f23348bc699d6644f7d9745?s=128&d=identicon&r=PG&f=1", "display_name": "Sourabh Ukkalgaonkar", "link": "https://stackoverflow.com/users/4380628/sourabh-ukkalgaonkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1465367344, "creation_date": 1465367344, "answer_id": 37694802, "question_id": 37694491, "link": "https://stackoverflow.com/questions/37694491/ruby-loop-countdown-method-keeps-returning-nil/37694802#37694802", "title": "Ruby Loop Countdown Method keeps returning &quot;nil&quot;", "body": "<p>You may try this...</p>\n\n<pre><code>def sample (a)\n if a &gt; 0\n    (1..a).to_a.reverse\n  else\n    a\n  end\nend\n</code></pre>\n\n<p>Hope this will work for you</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 6433045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba94a9c49b76bf278152ad3377464094?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Mora", "link": "https://stackoverflow.com/users/6433045/victor-mora"}, "edited": false, "score": 0, "creation_date": 1465371477, "post_id": 37694837, "comment_id": 62867517, "body": "This works however whenever I try to enter a negative number into the editor. Lets say countdown(-1) it returns -2. How do I edit the code so that when I enter countdown(-1) it returns -1?"}, {"owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "reply_to_user": {"reputation": 29, "user_id": 6433045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba94a9c49b76bf278152ad3377464094?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Mora", "link": "https://stackoverflow.com/users/6433045/victor-mora"}, "edited": false, "score": 0, "creation_date": 1465374284, "post_id": 37694837, "comment_id": 62869145, "body": "@VictorMora - You just need to move the decrement step to the end. Please see edit."}], "tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": true, "score": 1, "last_activity_date": 1465374212, "last_edit_date": 1465374212, "creation_date": 1465367492, "answer_id": 37694837, "question_id": 37694491, "link": "https://stackoverflow.com/questions/37694491/ruby-loop-countdown-method-keeps-returning-nil/37694837#37694837", "title": "Ruby Loop Countdown Method keeps returning &quot;nil&quot;", "body": "<p>A method returns the results of the last statement executed. Your loop is returning nil:</p>\n\n<pre><code>def countdown(n)   \n  x = loop do  \n    n -= 1  \n    puts \"#{n}\"  \n    break if n &lt;= 0   \n  end\n\n  x\nend  \n\ncountdown(4)\n3\n2\n1\n0\n=&gt; nil \n</code></pre>\n\n<p>Now let's return something:</p>\n\n<pre><code>def countdown(n)   \n  loop do  \n    puts \"#{n}\"  \n    break if n &lt;= 0   \n    n -= 1  \n  end\n\n  \"okay we're done\"\nend  \n\ncountdown(4)\n4\n3\n2\n1\n0\n=&gt; \"okay we're done\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1465368693, "post_id": 37694864, "comment_id": 62865828, "body": "Regarding the for loop, I guess it eases the transition for JS/Java folks. They can start with a familiar <code>for item in items</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1465369048, "post_id": 37694864, "comment_id": 62866053, "body": "@Sergio, I say, feed them <a href=\"https://en.wikipedia.org/wiki/Cold_turkey\" rel=\"nofollow noreferrer\">cold turkey!</a>&quot;."}, {"owner": {"reputation": 29, "user_id": 6433045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba94a9c49b76bf278152ad3377464094?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Mora", "link": "https://stackoverflow.com/users/6433045/victor-mora"}, "edited": false, "score": 0, "creation_date": 1465372987, "post_id": 37694864, "comment_id": 62868400, "body": "How would you tackle this using a while loop?                                            <code>def countdown(n)        while        n -= 1         puts &quot;#{n}&quot;          break if n &lt;= 1   end   end    countdown(4)</code> This works but whenever I enter a negative number, lets say countdown(-1) it returns -2. How do I write it to countdown(-1) returns -1."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1465877985, "last_edit_date": 1465877985, "creation_date": 1465367563, "answer_id": 37694864, "question_id": 37694491, "link": "https://stackoverflow.com/questions/37694491/ruby-loop-countdown-method-keeps-returning-nil/37694864#37694864", "title": "Ruby Loop Countdown Method keeps returning &quot;nil&quot;", "body": "<p>Try this:</p>\n\n<pre><code>def countdown(n)   \n  n.downto(n &gt; 0 ? 0 : n) { |i| puts i }\nend  \n\ncountdown(4)\n# 4\n# 3\n# 2\n# 1\n# 0\ncountdown(-4)\n# -4\ncountdown(0)\n# 0\n</code></pre>\n\n<p>You didn't mention what is to be done if the argument is zero. I've assumed it's treated as a positive or negative number.</p>\n\n<p>Admittedly, this is cheating, as it does not \"Use a for loop, while loop, or unless loop...\", but Ruby is designed mainly to use iterators and blocks. This, or something like it, is the way to go. I just had a thought: treat that as a suggestion, not a requirement.</p>\n\n<p>By the way, among loops, <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-loop\" rel=\"nofollow\">Kernel#loop</a> was not mentioned, which is strange, as it is quite useful. As for \"for loops\", who uses them? I never have, not even once. </p>\n\n<p>If you must use a loop, you could do the following.</p>\n\n<pre><code>def countdown(n)\n  while n &gt; 0\n    puts n\n    n-= 1\n  end\n  puts n\nend\n\ncountdown(4)\n# 4\n# 3\n# 2\n# 1\n# 0\ncountdown(-4)\n# -4    \ncountdown(0)\n# 0\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6433045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba94a9c49b76bf278152ad3377464094?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Mora", "link": "https://stackoverflow.com/users/6433045/victor-mora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 1, "accepted_answer_id": 37694837, "answer_count": 4, "score": 0, "last_activity_date": 1465877985, "creation_date": 1465366142, "last_edit_date": 1592644375, "question_id": 37694491, "link": "https://stackoverflow.com/questions/37694491/ruby-loop-countdown-method-keeps-returning-nil", "title": "Ruby Loop Countdown Method keeps returning &quot;nil&quot;", "body": "<p>I am working on a Ruby challenge for work, and I am unable to create a working method. Every method I try keeps returning &quot;nil&quot;.</p>\n<p>Here is the question:</p>\n<blockquote>\n<p>Create a method that passes an integer argument to a single parameter. If the integer is greater than 0 print the numbers from the integer to 0. If the number is less than 0 simply print the integer. Use a for loop, while loop, or unless loop to print the range of numbers from the integer to 0.</p>\n<p>For example:</p>\n<pre><code>sample(4)    \noutput = 3, 2, 1 \n\nsample(-1)    \noutput  = -1    \n</code></pre>\n</blockquote>\n<p>Here is the code I tried to use</p>\n<pre><code>def countdown(n)   \n    loop do  \n    n -= 1  \n    print &quot;#{n}&quot;  \n    break if n &lt;= 0   \nend  \ncountdown(4)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2659, "user_id": 2534479, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2472926967c5dbb6e31895a660a472ce?s=128&d=identicon&r=PG", "display_name": "aldrien.h", "link": "https://stackoverflow.com/users/2534479/aldrien-h"}, "edited": false, "score": 2, "creation_date": 1465364410, "post_id": 37693863, "comment_id": 62863848, "body": "i think much better to do it with javascript or jquery"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 3, "creation_date": 1465365140, "post_id": 37693863, "comment_id": 62864126, "body": "Rails generates the html then delivers it to the browser. After that, rails doesn&#39;t have anything to do with it. In order to have something dynamically changing on the page, you need a client-side script - eg javascript. You can write javascript into rails templates and rails will pass it to the browser to run."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1465372629, "post_id": 37696362, "comment_id": 62868175, "body": "Converted your code to runnable form. The ERB part doesn&#39;t quite work, of course."}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": true, "score": 2, "last_activity_date": 1465380501, "last_edit_date": 1465380501, "creation_date": 1465372132, "answer_id": 37696362, "question_id": 37693863, "link": "https://stackoverflow.com/questions/37693863/how-to-count-time-on-rails/37696362#37696362", "title": "How to count time on rails", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function displayTime() {\r\n    var timer=document.getElementById('timer');\r\n    var currentdate = new Date(); \r\n    var hours = currentdate.getHours();\r\n    var minutes = currentdate.getMinutes();\r\n    var seconds = currentdate.getSeconds();\r\n    timer.innerHTML = hours + ':' + (\"0\" + minutes).slice(-2) + ':' +  (\"0\" + seconds).slice(-2);    \r\n};\r\n\r\nsetInterval(displayTime, 1000);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;h1&gt;Time : \r\n    &lt;p id=\"timer\"&gt;\r\n        &lt;%= Time.now.strftime(\"%H:%M:%S\") %&gt;\r\n    &lt;/p&gt;\r\n&lt;/h1&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>First, let's create a function that displays the current date. For this, we just have to find the <code>p</code> tag we are interested in (using <code>getElementById</code>), and put use <code>innerHTML</code> to write in it. That's the function <code>displayTime</code>.</p>\n\n<p>Then, we want to run this function every second, so we use : <code>setInterval</code>.</p>\n\n<p>Note I keep <code>&lt;%= Time.now.strftime(\"%H:%M:%S\") %&gt;</code> so that if javascript is not enabled there is still a date. If that's not the intended behavior then you can replace it.</p>\n"}], "owner": {"reputation": 33, "user_id": 5775216, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1952598488298992/picture?type=large", "display_name": "Kampee TonOi", "link": "https://stackoverflow.com/users/5775216/kampee-tonoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 37696362, "answer_count": 1, "score": -1, "last_activity_date": 1465380501, "creation_date": 1465363526, "last_edit_date": 1465368364, "question_id": 37693863, "link": "https://stackoverflow.com/questions/37693863/how-to-count-time-on-rails", "title": "How to count time on rails", "body": "<pre><code>&lt;h1&gt;TIME: &lt;%= Time.now.strftime(\"%H:%M:%S\") %&gt;&lt;/h1&gt;\n</code></pre>\n\n<p>In the template, my time is stopped. I want to animate it time like a digital watch. </p>\n\n<p>The time is changed when I refresh a page.</p>\n\n<p>For example, I'm going to index page and now the time shows: 12:30:50 (HH:MM:SS). I refresh again and the time shows: 12:31:10.</p>\n\n<p>I want to show my seconds like this: 50 51 52 53 54.....</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1465365201, "post_id": 37693847, "comment_id": 62864153, "body": "what&#39;s in <code>&#47;var&#47;www&#47;app&#47;releases&#47;20160607074820&#47;app&#47;models&#47;webshop.rb:1&zwnj;&#8203;35:in </code>show_custom_pickup_identifier?&#39;` ? (or are you saying that this is not always what throws the exception?)"}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1465381282, "post_id": 37693847, "comment_id": 62873943, "body": "Are you using <code>pp</code> in your code (pretty print)? If so, can you try to comment it out? I found the only references of <code>__recursive_key__</code> in the ruby <code>pp</code> classes (and also in <code>puma</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7306326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c50d1e75339fba45e17a18b32142bb?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/7306326/abhishek"}, "edited": false, "score": 0, "creation_date": 1616748873, "post_id": 37710195, "comment_id": 118105214, "body": "I am facing the same issues, does apply more storage works for you?"}], "tags": [], "owner": {"reputation": 21, "user_id": 4517632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0b897fd072791022af8e280cce7b24?s=128&d=identicon&r=PG&f=1", "display_name": "Zildjian", "link": "https://stackoverflow.com/users/4517632/zildjian"}, "is_accepted": false, "score": 0, "last_activity_date": 1465410498, "creation_date": 1465410498, "answer_id": 37710195, "question_id": 37693847, "link": "https://stackoverflow.com/questions/37693847/rails-app-crashed-with-argumenterror-uncaught-throw-recursive-key-true/37710195#37710195", "title": "Rails app crashed with #&lt;ArgumentError: uncaught throw {:__recursive_key__=&gt;true, 20687660=&gt;true}&gt;", "body": "<p>Thanks for your suggestions :-)     </p>\n\n<p>The exception does throw periodically - but it seems to be on database calls only ( - in show_custom_pickup_identifier? it only makes a simple AR query ). So i tracked it down - and we think we found the problem in AWS RDS IOPS limitation. After applying more storage ( hence more IOPS ) it seems to have gone away - today at least :-) It would be nice if amazon had a clear indicator that we were out of IOPS (!!).. </p>\n\n<p>So for now we will cross our fingers that this will permanently resolve the issue :-)</p>\n"}], "owner": {"reputation": 21, "user_id": 4517632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0b897fd072791022af8e280cce7b24?s=128&d=identicon&r=PG&f=1", "display_name": "Zildjian", "link": "https://stackoverflow.com/users/4517632/zildjian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1465410498, "creation_date": 1465363446, "question_id": 37693847, "link": "https://stackoverflow.com/questions/37693847/rails-app-crashed-with-argumenterror-uncaught-throw-recursive-key-true", "title": "Rails app crashed with #&lt;ArgumentError: uncaught throw {:__recursive_key__=&gt;true, 20687660=&gt;true}&gt;", "body": "<p>We are running a rails app with quite alot of requests ( 400 requests per minute ) with 3 webnodes running nginx and passenger. </p>\n\n<p>However the past days we have experienced several crashes with a 500 error. Theres nothing to be found in the nginx error log. The rails log gives a rather non-describing errormessage, which i hope some of you guys can help me to track down:</p>\n\n<pre><code>ArgumentError: uncaught throw {:__recursive_key__=&gt;true, 20687660=&gt;true}\n</code></pre>\n\n<p>Stack trace: </p>\n\n<pre><code>/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/visitor.rb:29:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:12:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:57:in `block in nary'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:57:in `each'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:57:in `nary'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/visitor.rb:29:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:12:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:169:in `block in visit_Array'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:169:in `each'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:169:in `visit_Array'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/visitor.rb:29:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:12:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:146:in `visit_Arel_Nodes_SelectCore'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/visitor.rb:29:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:12:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:169:in `block in visit_Array'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:169:in `each'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:169:in `visit_Array'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/visitor.rb:29:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:12:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:153:in `visit_Arel_Nodes_SelectStatement'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/visitor.rb:29:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/depth_first.rb:12:in `visit'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/visitors/visitor.rb:9:in `accept'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/arel-6.0.3/lib/arel/nodes/node.rb:56:in `each'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/relation/calculations.rb:210:in `grep'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/relation/calculations.rb:210:in `perform_calculation'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/relation/calculations.rb:127:in `calculate'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/relation/calculations.rb:42:in `count'\n/var/www/app/releases/20160607074820/app/models/webshop.rb:135:in `show_custom_pickup_identifier?'\n/var/www/app/releases/20160607074820/app/controllers/standard/shopify_controller.rb:176:in `block (2 levels) in shop_shipping'\n/var/www/app/releases/20160607074820/app/controllers/standard/shopify_controller.rb:173:in `each'\n/var/www/app/releases/20160607074820/app/controllers/standard/shopify_controller.rb:173:in `block in shop_shipping'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/relation/delegation.rb:46:in `each'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/relation/delegation.rb:46:in `each'\n/var/www/app/releases/20160607074820/app/controllers/standard/shopify_controller.rb:157:in `shop_shipping'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/abstract_controller/base.rb:198:in `process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal/rendering.rb:10:in `process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:117:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:117:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:505:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:505:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:92:in `__run_callbacks__'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:81:in `run_callbacks'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/abstract_controller/callbacks.rb:19:in `process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal/rescue.rb:29:in `process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/notifications.rb:164:in `block in instrument'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/notifications.rb:164:in `instrument'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/abstract_controller/base.rb:137:in `process'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionview-4.2.4/lib/action_view/rendering.rb:30:in `process'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal.rb:196:in `dispatch'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_controller/metal.rb:237:in `block in action'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:76:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:76:in `dispatch'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:45:in `serve'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/journey/router.rb:43:in `block in serve'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/journey/router.rb:30:in `each'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/journey/router.rb:30:in `serve'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:821:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/etag.rb:24:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/conditionalget.rb:38:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/head.rb:13:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/flash.rb:260:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/session/abstract/id.rb:225:in `context'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/session/abstract/id.rb:220:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/cookies.rb:560:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/query_cache.rb:36:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:88:in `__run_callbacks__'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:778:in `_run_call_callbacks'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/callbacks.rb:81:in `run_callbacks'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/rack/logger.rb:38:in `call_app'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/rack/logger.rb:20:in `block in call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/tagged_logging.rb:68:in `block in tagged'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/tagged_logging.rb:26:in `tagged'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/tagged_logging.rb:68:in `tagged'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/rack/logger.rb:20:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/request_id.rb:21:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/methodoverride.rb:22:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/runtime.rb:18:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/rack-1.6.4/lib/rack/sendfile.rb:113:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/engine.rb:518:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/application.rb:165:in `call'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/railtie.rb:194:in `public_send'\n/var/www/app/shared/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/railtie.rb:194:in `method_missing'\n/usr/lib/ruby/vendor_ruby/phusion_passenger/rack/thread_handler_extension.rb:97:in `process_request'\n/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:160:in `accept_and_process_next_request'\n/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler/thread_handler.rb:113:in `main_loop'\n/usr/lib/ruby/vendor_ruby/phusion_passenger/request_handler.rb:416:in `block (3 levels) in start_threads'\n/usr/lib/ruby/vendor_ruby/phusion_passenger/utils.rb:113:in `block in create_thread_and_abort_on_exception'\n</code></pre>\n\n<p>It seems to happen all different places in the app, except when theres no need for database queries. Our db however seems healthy and has alot of capacity in terms of connections, memory and cpu.  </p>\n\n<p>Hope somebody can give me a clue on how to resolve this. </p>\n\n<p>Thanks :-) </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 1, "creation_date": 1465358844, "post_id": 37693023, "comment_id": 62862112, "body": "You can use <code>hash.select</code> here"}, {"owner": {"reputation": 54, "user_id": 5118432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1ae2245a8fc6485cc6db43e1e25d28?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u043b\u0435\u0440\u0438\u0439 \u0422\u0443\u0442\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/5118432/%d0%92%d0%b0%d0%bb%d0%b5%d1%80%d0%b8%d0%b9-%d0%a2%d1%83%d1%82%d0%b0%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 0, "creation_date": 1465359158, "post_id": 37693023, "comment_id": 62862211, "body": "Thank you! That helped. After select i call keys method )"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 3143052, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09007b2acdea142285a7cc155f9ec635?s=128&d=identicon&r=PG", "display_name": "joost", "link": "https://stackoverflow.com/users/3143052/joost"}, "edited": false, "score": 0, "creation_date": 1501761266, "post_id": 37693252, "comment_id": 77927278, "body": "Instead of using <code>v.nil? || v == &quot;&quot;</code> you could also type <code>v.blank?</code>"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 173, "user_id": 3143052, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09007b2acdea142285a7cc155f9ec635?s=128&d=identicon&r=PG", "display_name": "joost", "link": "https://stackoverflow.com/users/3143052/joost"}, "edited": false, "score": 2, "creation_date": 1501765551, "post_id": 37693252, "comment_id": 77930742, "body": "@joost : It supports in Rails, not in plain ruby, and in question <code>rails</code> is not tagged"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 4, "last_activity_date": 1465360921, "last_edit_date": 1465360921, "creation_date": 1465360006, "answer_id": 37693252, "question_id": 37693023, "link": "https://stackoverflow.com/questions/37693023/find-all-keys-in-an-array-of-hash-with-empty-value/37693252#37693252", "title": "Find all keys in an array of hash with empty value", "body": "<p>Example :</p>\n\n<pre><code>&gt; hash = {:a =&gt; 1, :b =&gt;nil, :c =&gt;4, :d =&gt; \"\", :e =&gt; 5}\n&gt; selected_values = [1,4,5]\n</code></pre>\n\n<h2>Select Keys for Empty Values:</h2>\n\n<pre><code>&gt; hash.select{|_,v| v.nil? || v == \"\"}.keys\n#=&gt; [:b, :d]\n</code></pre>\n\n<h2>Select Keys for Specific values:</h2>\n\n<p><strong>Solution 1:</strong></p>\n\n<pre><code>&gt; hash.select{|k,v| selected_values.include?(v)}.keys\n#=&gt; [:a, :c, :e]\n</code></pre>\n\n<p><strong>Solution 2:</strong></p>\n\n<pre><code>&gt; matcher = -&gt;(key,value) { selected_values.include?(value) }\n&gt; hash.select(&amp;matcher).keys\n#=&gt; [:a, :c, :e]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1465371981, "last_edit_date": 1465371981, "creation_date": 1465370909, "answer_id": 37695919, "question_id": 37693023, "link": "https://stackoverflow.com/questions/37693023/find-all-keys-in-an-array-of-hash-with-empty-value/37695919#37695919", "title": "Find all keys in an array of hash with empty value", "body": "<p>If you intend to obtain the keys corresponding to several values, you might consider constructing a hash that will provide that information. Suppose, for example,</p>\n\n<pre><code>g = { :dog=&gt;\"gone\", :cat=&gt;\"\", :pig=&gt;nil, :owl=&gt;\"\", :bat=&gt;nil, :ant=&gt;\"gone\" }\n</code></pre>\n\n<p>then construct</p>\n\n<pre><code>h = g.each_with_object({}) { |(k,v),h| (h[v] ||= []) &lt;&lt; k }\n  #=&gt; {\"gone\"=&gt;[:dog, :ant], \"\"=&gt;[:cat, :owl], nil=&gt;[:pig, :bat]}\n</code></pre>\n\n<p>So now, to obtain the keys having a specific value, say <code>\"gone\"</code>, we simply retrieve the value of <code>\"gone\"</code>:</p>\n\n<pre><code>h[\"gone\"]\n  #=&gt; [:dog, :ant]  \n</code></pre>\n\n<p>If <code>empty</code> means a value that is <code>nil</code> or an empty string, we obtain <code>h</code>'s keys that have empty values by combining the values for <code>nil</code> and <code>\"\"</code>:</p>\n\n<pre><code>h[nil].concat h['']\n  #=&gt; [:pig, :bat, :cat, :owl]\n</code></pre>\n\n<p>Regarding <code>(h[v] ||= []) &lt;&lt; k</code>, if h (which initially is empty) does not yet have a key <code>v</code>, <code>h[v] #=&gt; nil</code>, so</p>\n\n<pre><code>(h[v] ||= []) &lt;&lt; k\n  #=&gt; (h[v] = h[v] || []) &lt;&lt; k\n  #   (h[v] = nil || []) &lt;&lt; k\n  #   (h[v] = []) &lt;&lt; k\n  #   h[v] = [k]\n</code></pre>\n\n<p>Alternatively, one can write</p>\n\n<pre><code>h = g.each_with_object(Hash.new { |h,k| h[k] = [] }) { |(k,v),h| h[v] &lt;&lt; k }\n</code></pre>\n\n<p>Whenever the (initially empty) hash represented by the block variable <code>h</code> does not have a key <code>k</code>, the block <code>{ |h,k| h[k] = [] }</code> is executed prior to <code>h[k] &lt;&lt; k</code>. </p>\n"}], "owner": {"reputation": 54, "user_id": 5118432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1ae2245a8fc6485cc6db43e1e25d28?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u043b\u0435\u0440\u0438\u0439 \u0422\u0443\u0442\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/5118432/%d0%92%d0%b0%d0%bb%d0%b5%d1%80%d0%b8%d0%b9-%d0%a2%d1%83%d1%82%d0%b0%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2290, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553157939, "creation_date": 1465358622, "last_edit_date": 1553157939, "question_id": 37693023, "link": "https://stackoverflow.com/questions/37693023/find-all-keys-in-an-array-of-hash-with-empty-value", "title": "Find all keys in an array of hash with empty value", "body": "<p>How can I find all keys in an array of hash with empty or specific value? </p>\n\n<p><code>hash.key(value</code>) return only 1 key... I can splise the hash or loop the hash using each/map methods, but i don't like that solution.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "phantomjs", "watir"], "answers": [{"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1465362427, "last_edit_date": 1465362427, "creation_date": 1465361139, "answer_id": 37693455, "question_id": 37693020, "link": "https://stackoverflow.com/questions/37693020/ruby-wait-until-external-request-finished/37693455#37693455", "title": "Ruby wait until external request finished", "body": "<p>You shouldn't need to use nokogiri for this.</p>\n\n<pre><code>browser.p(text: /View as/).link.when_present.attribute_value('href')\n</code></pre>\n"}], "owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465362427, "creation_date": 1465358608, "question_id": 37693020, "link": "https://stackoverflow.com/questions/37693020/ruby-wait-until-external-request-finished", "title": "Ruby wait until external request finished", "body": "<p>I'm using Watir and phantomjs to scrape a page.  I noticed it would throw a <code>NoMethodError: undefined method 'attributes' for nil:NilClass</code>\nwhen running it in the console, but if I put a debugger in and stepped through, it would work!  I think the delay in me doing it manually allowed the request to finish.</p>\n\n<p>here's my code:</p>\n\n<pre><code>browser = Watir::Browser.new :phantomjs\nbrowser.goto(map_page_url)\nmap_page = Nokogiri::HTML(browser.html)\n\n#undefined method 'attributes' for nil:NilClass:\ncoord_url = map_page.at('p:contains(\"View as\") a').attributes['href'].value\n</code></pre>\n\n<p>How can I get it to wait until <code>browser.goto(map_page_url)</code> returns fully before moving on?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1465361273, "post_id": 37692918, "comment_id": 62862814, "body": "Fewer iterations is always better. Plus, use Benchmark to test any ideas you have."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 6438217, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/U71W2.jpg?s=128&g=1", "display_name": "Sean McQuay", "link": "https://stackoverflow.com/users/6438217/sean-mcquay"}, "edited": false, "score": 0, "creation_date": 1465389601, "post_id": 37693005, "comment_id": 62879542, "body": "I didn&#39;t realize that .each didn&#39;t apply to <i>self</i>. I was testing my function and for example if I add &#39;puts temp_arr[0]&#39; to the bottom line of the function, I see my changes that were applied to the arrays within temp_arr as if it was applied to <i>self</i>."}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "reply_to_user": {"reputation": 183, "user_id": 6438217, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/U71W2.jpg?s=128&g=1", "display_name": "Sean McQuay", "link": "https://stackoverflow.com/users/6438217/sean-mcquay"}, "edited": false, "score": 0, "creation_date": 1465391259, "post_id": 37693005, "comment_id": 62880755, "body": "Yes, <code>each</code> doesn&#39;t change the array, it just iterates and returns the original array. <code>map</code> doesn&#39;t change array, but returns a new array with the results of the block being applied to each element. <code>map!</code> (notice the bang) is like <code>map</code> but also changes the original array."}], "tags": [], "owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "is_accepted": false, "score": 0, "last_activity_date": 1465358473, "creation_date": 1465358473, "answer_id": 37693005, "question_id": 37692918, "link": "https://stackoverflow.com/questions/37692918/ruby-array-operations-increasing-efficiency/37693005#37693005", "title": "Ruby Array Operations: Increasing Efficiency", "body": "<p>My guess is that you'd want to return the file contents when you are done, right? If so, you'll want to use <code>map</code> on <code>temp_arr</code>, instead of <code>each</code>.</p>\n\n<p>You can save an iteration by combining first two lines together:</p>\n\n<pre><code>temp_arr.map! do |temp_row|\n  temp_row.map!{ |x| x.valid_float? ? x.to_f : 0.0 }\n  temp_row.sort!\nend\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 6438217, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/U71W2.jpg?s=128&g=1", "display_name": "Sean McQuay", "link": "https://stackoverflow.com/users/6438217/sean-mcquay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465358473, "creation_date": 1465357865, "question_id": 37692918, "link": "https://stackoverflow.com/questions/37692918/ruby-array-operations-increasing-efficiency", "title": "Ruby Array Operations: Increasing Efficiency", "body": "<p>In preparation for manipulation of a large chunk of data, I perform some cleaning and pruning operations prior to processing it. The code I have functions fine, but I'm worried about how these operations will scale up when I perform this on millions of points. The code I have feels inefficient but I don't know how to simplify my steps. <br>\nIn my process, I parse in a CSV file, check for garbage data i.e. non-numerical values, typecast the remaining data to floats, and then sort it. I'm hoping for some guidance on how to improve this if possible.</p>\n\n<pre><code>require 'green_shoes'\nrequire 'csv'\n\nclass String\n    def valid_float?\n        true if Float self rescue false\n    end\nend\n\nputs \"Parsing...\"\n\ntemp_file = ask_open_file(\"\")\ntemp_arr = CSV.read(temp_file)\n\ntemp_arr.each do |temp_row|\n    temp_row.map!{ |x| !x.valid_float? ? 0 : x }\n    temp_row.map!{ |x| x.to_f}\n    temp_row.sort!\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "device"], "comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1512782262, "post_id": 37692756, "comment_id": 82409427, "body": "I&#39;ve lost an entire day to this, I would appreciate a guide to this as well."}], "answers": [{"comments": [{"owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 1, "creation_date": 1467308681, "post_id": 38102513, "comment_id": 63691142, "body": "I found that it generates the password reset link sent to the mail address even if I set redirect url to anything. (like google.com)  But, every time I tap the change password link in my email, it show  &quot;The page you were looking for doesn&#39;t exist.&quot; error page, any idea to fix this?"}, {"owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "reply_to_user": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 0, "creation_date": 1467345998, "post_id": 38102513, "comment_id": 63704457, "body": "can you post your routes..!"}], "tags": [], "owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "is_accepted": false, "score": 2, "last_activity_date": 1467210272, "creation_date": 1467210272, "answer_id": 38102513, "question_id": 37692756, "link": "https://stackoverflow.com/questions/37692756/rails-devise-token-auth-gem-how-do-i-set-password-reset-link/38102513#38102513", "title": "Rails devise_token_auth gem, how do I set password reset link?", "body": "<p>The flow of the devise_token_auth reset password feature is that,\nit has three API's</p>\n\n<ol>\n<li>A post call for sending reset password token,</li>\n<li>A get request for getting authentication headers</li>\n<li>A patch call for changing the password</li>\n</ol>\n\n<p>In post you will send the email and redirect url, this will call create method in the DeviseTokenAuth::PasswordsController, which creates a reset password token and sends it in the email.</p>\n\n<p>The link in the email will call to the edit method of DeviseTokenAuth::PasswordsController, where it generates the authentication header and redirects to the redirect url which u have sent in the previous request with these authentication headers as query string(url parameters)</p>\n\n<p>Use these authentication headers to patch request to the update method in the DeviseTokenAuth::PasswordsController, with password and password_confirmation as attributes.</p>\n\n<p>the password will be changed.</p>\n"}, {"tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": false, "score": 3, "last_activity_date": 1513025156, "creation_date": 1513025156, "answer_id": 47761138, "question_id": 37692756, "link": "https://stackoverflow.com/questions/37692756/rails-devise-token-auth-gem-how-do-i-set-password-reset-link/47761138#47761138", "title": "Rails devise_token_auth gem, how do I set password reset link?", "body": "<p>As noted above, devise_token_auth has three API's calls to make for resetting a password.</p>\n\n<h1>1. A POST call to send a Passsword Reset Email</h1>\n\n<pre><code> POST /auth/password\n Params: 'email', 'redirect_url'\n</code></pre>\n\n<p>E.g.:</p>\n\n<pre><code>curl -v -H 'Content-Type: application/json' -H 'Accept: application/json' -X POST https://myapp.com/auth/password -d '{\"email\":\"foo@gmail.com\", \"redirect_url\": \"https://myapp.com/auth/sign_in\"}'\n</code></pre>\n\n<p>Note that the <code>redirect_url</code> given must correspond to the endpoint you want the user taken to for confirming and resetting their password.</p>\n\n<p>E.g. if wanting redirect to somewhere within an iOS app, use the URL for that app scheme in the <code>redirect_url</code> definition.  E.g. to manually do this on iOS:</p>\n\n<pre><code>curl -v -H 'Content-Type: application/json' -H 'Accept: application/json' -X POST https://myapp.com/auth/password -d '{\"email\":\"foo@gmail.com\", \"redirect_url\": \"myappStoreAppName://auth/password/edit\"}'\n</code></pre>\n\n<h1>2. A GET call to verify the password reset token (clicked in email)</h1>\n\n<pre><code>GET /auth/password/edit\nParams: 'password_reset_token', 'redirect_url'\n\nE.g. via our iOS app would produce an email link like this: https://myapp.com/auth/password/edit?config=default&amp;redirect_url=myappStoreName%3A%2F%2Fauth%2Fpassword%2Fedit&amp;reset_password_token=Qv6mkLuoy9zN-Y1pKghB\n</code></pre>\n\n<p>If this is from a web app, the 'redirect_to' link should point to a form where a <code>password</code> and <code>password_confirmation</code> form can be filled out.  If the password reset email link points to a mobile app, it's up to that app to create the password reset form.  </p>\n\n<p>Most important in this step is knowing that the client making the request will get back an <code>Access-Token</code> HEADER from the Rails app.</p>\n\n<p>This Access-Token needs to be saved, because it's what the client will use in the next request to keep the user authenticated while the user changes their password.</p>\n\n<h1>3. A PUT call to update the user's password</h1>\n\n<pre><code>PUT /auth/password\nHead: 'uid: VALUE', 'client: VALUE', 'access-token: VALUE', 'token-type: Bearer'\nParams: 'password', 'password_confirmation'\n</code></pre>\n\n<p>Note the HEAD values that need to be supplied for this PUT call.  These ensure our (now authenticated user) has permission to execute a change of password, and ensure that our user can continue to remain authenticated even after changing their password.</p>\n\n<p>E.g. via curl:</p>\n\n<pre><code>curl -v -H 'Content-Type: application/json' -H 'uid: foo@gmail.com' -H 'client: U9FIDbiDbYVulsi1dBpxOQ' -H 'access-token: JbGQi97FTAwsW4n6SZ9aYQ'  -H 'Accept: application/json' -X PUT https://myapp.com/auth/password -d '{\"password\": \"foobar\", \"password_confirmation\": \"foobar\"}'\n</code></pre>\n"}], "owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3366, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1513025156, "creation_date": 1465356717, "question_id": 37692756, "link": "https://stackoverflow.com/questions/37692756/rails-devise-token-auth-gem-how-do-i-set-password-reset-link", "title": "Rails devise_token_auth gem, how do I set password reset link?", "body": "<p>I have a problem for using password reset function of this gem.\n<a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow\">https://github.com/lynndylanhurley/devise_token_auth</a></p>\n\n<p>This is from the document.</p>\n\n<pre><code>/password/edit     GET  \n</code></pre>\n\n<blockquote>\n  <p>\"Verify user by password reset token. This route is the destination\n  URL for password reset confirmation. This route must contain\n  reset_password_token and redirect_url params. These values will be set\n  automatically by the confirmation email that is generated by the\n  password reset request.\"</p>\n</blockquote>\n\n<p>When users forget theirs passwords, they can enter their registered email, and they will receive a password reset link via email.</p>\n\n<blockquote>\n  <p>POST :<a href=\"https://example.com/api/auth/password\" rel=\"nofollow\">https://example.com/api/auth/password</a></p>\n  \n  <p>params = email and redirect link\n  (<a href=\"https://example.com/api/auth/password/edit\" rel=\"nofollow\">https://example.com/api/auth/password/edit</a>)</p>\n</blockquote>\n\n<p>I can send a password reset link via email, but when I click the link or \"Change my password\" in the email, it jump to the redirect address with token.</p>\n\n<p>And it shows the  \"The page you were looking for doesn't exist.\" </p>\n\n<p>This might be routes errror or something, but I don't know.  I am not even sure if I should set \"/password/edit\" for redirect link.</p>\n\n<p>This is the related link for the github\n<a href=\"https://github.com/lynndylanhurley/devise_token_auth/issues/604\" rel=\"nofollow\">https://github.com/lynndylanhurley/devise_token_auth/issues/604</a></p>\n\n<p>Am I missing something, or should I set a different address for redirect link part?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "emacs"], "comments": [{"owner": {"reputation": 12253, "user_id": 2112489, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5f4ed4b573c4e38444c6fc54b28076c0?s=128&d=identicon&r=PG", "display_name": "lawlist", "link": "https://stackoverflow.com/users/2112489/lawlist"}, "edited": false, "score": 0, "creation_date": 1465357497, "post_id": 37692725, "comment_id": 62861749, "body": "The people who monitor the Emacs tag for this forum are really strict about the question being only programming related -- e.g., sample code that almost works with some help needed to fix it.  They generally vote to close whenever the question broadly seeks recommendations and opinions.  Consider posting your question on <a href=\"https://www.reddit.com/r/emacs\" rel=\"nofollow noreferrer\">reddit.com/r/emacs</a> -- they love questions over there that elicit recommendations and opinions.   I won&#39;t be voting to close this question here, but everyone else will.  Alternatively, try and think of a way to narrow the scope of this question to elicit an answer."}], "answers": [{"tags": [], "owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "is_accepted": false, "score": 0, "last_activity_date": 1465362206, "last_edit_date": 1495540491, "creation_date": 1465361431, "answer_id": 37693498, "question_id": 37692725, "link": "https://stackoverflow.com/questions/37692725/what-are-the-helpful-packages-for-emacs-to-do-ruby-on-rails/37693498#37693498", "title": "What are the helpful packages for Emacs to do ruby on rails?", "body": "<p>Here are some of the modes you should try:</p>\n\n<p><a href=\"http://rinari.rubyforge.org/\" rel=\"nofollow noreferrer\">Rinari</a> - A simple framework for getting around your code, running tests, and managing consoles, web-servers, etc. It's minimalistic and revolves around a series of key-bindings. </p>\n\n<p>Emacs-rails - the grandfather of Emacs RoR modes. It hasn't been updated in a while, and in fact the primary homepage no longer exists. But it's quite powerful and lets you do almost everything. </p>\n\n<p><a href=\"https://github.com/dmexe/emacs-rails-reloaded\" rel=\"nofollow noreferrer\">Emacs-rails-reloaded</a> - This is a re-design of the original emacs-rails. It uses the the great anything mode to help you find things and get around. <br />\nAlso see <a href=\"https://stackoverflow.com/questions/2429373/tips-and-tricks-for-using-emacs-to-develop-a-ruby-on-rails-app\">this</a> answer.<br />\nYou can find some other useful stuff <a href=\"https://www.emacswiki.org/emacs/RubyOnRails\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "is_accepted": false, "score": 2, "last_activity_date": 1465362733, "last_edit_date": 1465362733, "creation_date": 1465361984, "answer_id": 37693599, "question_id": 37692725, "link": "https://stackoverflow.com/questions/37692725/what-are-the-helpful-packages-for-emacs-to-do-ruby-on-rails/37693599#37693599", "title": "What are the helpful packages for Emacs to do ruby on rails?", "body": "<p>You may find my 2014 <a href=\"https://lorefnon.me/2014/02/02/configuring-emacs-for-rails.html\" rel=\"nofollow\">post</a> on configuring emacs as a productive development environment for Rails helpful. It primarily covers projectile, robe and rvm integration. </p>\n\n<p>While both <a href=\"https://github.com/dmexe/emacs-rails-reloaded\" rel=\"nofollow\">emacs-rails-reloaded</a> and <a href=\"https://github.com/eschulte/rinari\" rel=\"nofollow\">rinari</a> have been somewhat popular at a time, their development has languished. <a href=\"https://github.com/asok/projectile-rails\" rel=\"nofollow\">Projectile-rails</a> is maintained much more actively. </p>\n\n<p>In particular my overall experience with <a href=\"https://github.com/emacs-helm/helm\" rel=\"nofollow\">helm</a> and <a href=\"https://github.com/bbatsov/projectile\" rel=\"nofollow\">projectile</a> has been very good and would strongly recommend in favor of them. </p>\n"}, {"comments": [{"owner": {"reputation": 558, "user_id": 5688098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SP5OB.jpg?s=128&g=1", "display_name": "krazedkrish", "link": "https://stackoverflow.com/users/5688098/krazedkrish"}, "edited": false, "score": 0, "creation_date": 1465375214, "post_id": 37697341, "comment_id": 62869728, "body": "rinari is alternative to projectile and projecitle-rails. But i am sure you would love projecitle more."}], "tags": [], "owner": {"reputation": 558, "user_id": 5688098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SP5OB.jpg?s=128&g=1", "display_name": "krazedkrish", "link": "https://stackoverflow.com/users/5688098/krazedkrish"}, "is_accepted": true, "score": 4, "last_activity_date": 1467636712, "last_edit_date": 1467636712, "creation_date": 1465375072, "answer_id": 37697341, "question_id": 37692725, "link": "https://stackoverflow.com/questions/37692725/what-are-the-helpful-packages-for-emacs-to-do-ruby-on-rails/37697341#37697341", "title": "What are the helpful packages for Emacs to do ruby on rails?", "body": "<p>If you want to have an awesome emacs config you should install these packages:</p>\n\n<ul>\n<li><p>inf-ruby</p></li>\n<li><p>projectile                           </p></li>\n<li><p>projectile-rails</p></li>\n<li><p>robe-mode</p></li>\n<li><p>web-mode</p></li>\n<li><p>rvm</p></li>\n<li><p>flymake-ruby</p></li>\n<li><p>flymake-easy                         </p></li>\n<li><p>flymake-css                          </p></li>\n<li><p>flymake-sass</p></li>\n<li><p>flymake-coffee</p></li>\n<li><p>flymake-haml</p></li>\n<li><p>flymake-html-validator</p></li>\n<li><p>haml-mode</p></li>\n<li><p>yaml-mode</p></li>\n<li><p>slim-mode</p></li>\n<li><p>sass-mode</p></li>\n<li><p>coffee-mode</p></li>\n<li><p>feature-mode</p></li>\n</ul>\n\n<p>if you were using vimux you would like to replace projectile and projectile-rails with    emacs-rails-reloaded</p>\n\n<p>by the way if you happen to be a vim user then you should checkout spacemacs.spacemacs has predefined configuration layers for html and ruby on rails.</p>\n\n<p>for ruby as well as ruby on rails</p>\n\n<ul>\n<li><p>bundler</p></li>\n<li><p>chruby</p></li>\n<li><p>company</p></li>\n<li><p>enh-ruby-mode</p></li>\n<li><p>evil-matchit</p></li>\n<li><p>flycheck</p></li>\n<li><p>popwin</p></li>\n<li><p>rbenv</p></li>\n<li><p>robe</p></li>\n<li><p>rspec-mode</p></li>\n<li><p>rubocop</p></li>\n<li><p>ruby-mode (should be avaliable by default)</p></li>\n<li><p>ruby-test-mode</p></li>\n<li><p>ruby-tools</p></li>\n<li><p>rvm</p></li>\n<li><p>smartparens</p></li>\n<li><p>rake</p></li>\n</ul>\n"}], "owner": {"reputation": 35, "user_id": 6037763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2612854451446293855710a0bc93cb13?s=128&d=identicon&r=PG&f=1", "display_name": "Batsal Awaley", "link": "https://stackoverflow.com/users/6037763/batsal-awaley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1596, "favorite_count": 2, "accepted_answer_id": 37697341, "answer_count": 3, "score": 2, "last_activity_date": 1494092925, "creation_date": 1465356462, "last_edit_date": 1494092925, "question_id": 37692725, "link": "https://stackoverflow.com/questions/37692725/what-are-the-helpful-packages-for-emacs-to-do-ruby-on-rails", "title": "What are the helpful packages for Emacs to do ruby on rails?", "body": "<p>I would like to know the best Emacs plugins for developers using the Ruby on Rails framework.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "datasource"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1465359820, "post_id": 37692563, "comment_id": 62862367, "body": "This seems, on first observation, like a very bad idea."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1465361506, "last_edit_date": 1495535339, "creation_date": 1465361506, "answer_id": 37693511, "question_id": 37692563, "link": "https://stackoverflow.com/questions/37692563/how-to-access-multiple-data-sources-in-a-single-ruby-on-rails-model/37693511#37693511", "title": "How to access multiple data sources in a single Ruby on Rails model?", "body": "<p>This is a super bad idea as @jvillian has said. What you want here is two different models each connected to their respective data source, something ActiveRecord does allow by default.</p>\n\n<p>That part <a href=\"https://stackoverflow.com/questions/6122508/connecting-rails-3-1-with-multiple-databases\">can be a bit tricky</a> but won't confuse ActiveRecord.</p>\n\n<p>The big issue here is it prefers to cache the schema when it connects and persists that for the life of the process. If the databases differ in any way you'll have chaos, plus if you keep switching the connection you may completely mess up the transaction planner which has to take into account which models live in which database for rollback purposes.</p>\n"}], "owner": {"reputation": 21084, "user_id": 170931, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WA698.png?s=128&g=1", "display_name": "Just a learner", "link": "https://stackoverflow.com/users/170931/just-a-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 523, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465361506, "creation_date": 1465355259, "question_id": 37692563, "link": "https://stackoverflow.com/questions/37692563/how-to-access-multiple-data-sources-in-a-single-ruby-on-rails-model", "title": "How to access multiple data sources in a single Ruby on Rails model?", "body": "<p>The application I'm currently working on requires me to access multiple data sources from within a single model. I want to know what's the best way to accomplish it. Can I do something like the following?</p>\n\n<pre><code>class SomeModel &lt; ActiveRecord::Base\n  establish_connection :data_source1\n  # Get some data from data_source1 and store in a instance variable\n\n  establish_connection :data_source2\n  # Get some data from data_source2 and store in a instance variable\nend\n</code></pre>\n\n<p>Appreciate for your suggestions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "edited": false, "score": 0, "creation_date": 1465355580, "post_id": 37692558, "comment_id": 62861323, "body": "Can you show the code from your models as in how you&#39;re using <code>has_many</code> and <code>belongs_to</code>. Specifically for the <code>User</code> model."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6313246, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37168de77ec6f515a5f192460b1e90bb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Haselden", "link": "https://stackoverflow.com/users/6313246/j-haselden"}, "edited": false, "score": 0, "creation_date": 1465387124, "post_id": 37692697, "comment_id": 62877735, "body": "Hey Tyler, thanks for the response. The answer below actually ended up working perfectly. Using &quot;has_many :feedbacks_received, :through =&gt; :songs, :source =&gt; :feedbacks&quot; in the User model."}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "reply_to_user": {"reputation": 31, "user_id": 6313246, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37168de77ec6f515a5f192460b1e90bb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Haselden", "link": "https://stackoverflow.com/users/6313246/j-haselden"}, "edited": false, "score": 0, "creation_date": 1465415974, "post_id": 37692697, "comment_id": 62897358, "body": "That was going to be my next suggestion, but was waiting for you to post your model code. Best of luck on your adventures with Rails."}], "tags": [], "owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "is_accepted": false, "score": 2, "last_activity_date": 1465356206, "creation_date": 1465356206, "answer_id": 37692697, "question_id": 37692558, "link": "https://stackoverflow.com/questions/37692558/ruby-on-rails-a-user-has-many-songs-a-song-has-many-feedbacks-display-all-fee/37692697#37692697", "title": "Ruby on Rails: A User has many songs, a song has many feedbacks, display all feedbacks for a user&#39;s songs", "body": "<p>There are a few things to learn from this so I'll do my best to cover each of them. First it looks like you're wanting the feedback from a users song, so a good way to do this is <code>include</code> that data in your query to <code>@user.songs</code>.</p>\n\n<pre><code>@songs = @user.songs.includes(:feedbacks).paginate(:page =&gt; params[:song_page], :per_page =&gt; 5)\n</code></pre>\n\n<p>Then in your view</p>\n\n<pre><code>@songs.each do |song|\n    song.feedbacks.each do |feedback|\n        # Do stuff with that feedback\n    end\nend\n</code></pre>\n\n<p>The reason to use includes is so that you're not making N+1 queries. You should also avoid doing database queries in your view, it's a bad practice.</p>\n\n<p>The above solution doesn't paginate the feedback which is a separate issue and can be tricky when you're wanting to do this over a collection of objects. Typically you'll paginate a collection of child objects to a single parent. The reason being that if you are on page 2 of feedback does that mean you want to return the 2nd page of feedback for all songs in that collection or just a specific one?</p>\n\n<p>NOTE: I may be incorrectly using <code>feedbacks</code> instead of <code>feedback</code>. I'm not sure how rails will pluralize <code>Feedback</code> which is technically both the singular and plural form of the word.</p>\n\n<p>The last note I'll make is that I would suggest using some jquery or other front end code to hit a js endpoint for each song. That way you can essentially query a single endpoint passing up the song id and the paging parameters for the feedback. It would make the application more robust but is also a much more advanced solution.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6313246, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37168de77ec6f515a5f192460b1e90bb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Haselden", "link": "https://stackoverflow.com/users/6313246/j-haselden"}, "edited": false, "score": 0, "creation_date": 1465387042, "post_id": 37693080, "comment_id": 62877680, "body": "Yes! This was the simple answer I was looking for (the second solution. It worked like a charm. Thanks!"}], "tags": [], "owner": {"reputation": 1261, "user_id": 1701105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbcaf3b7230fefded7f1d25c2eea1c5d?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/1701105/jack"}, "is_accepted": true, "score": 0, "last_activity_date": 1465359983, "last_edit_date": 1465359983, "creation_date": 1465359093, "answer_id": 37693080, "question_id": 37692558, "link": "https://stackoverflow.com/questions/37692558/ruby-on-rails-a-user-has-many-songs-a-song-has-many-feedbacks-display-all-fee/37693080#37693080", "title": "Ruby on Rails: A User has many songs, a song has many feedbacks, display all feedbacks for a user&#39;s songs", "body": "<p>You want <code>feedbacks</code>, so you need to ask/query for <code>feedbacks</code>, so you need to do it a bit in reverse, like so:</p>\n\n<pre><code>@feedbacksReceived = Feedback.joins(:song).where(:songs =&gt; { :user_id =&gt; @user.id }).order(:created_by =&gt; :desc).\n  paginate(:page =&gt; params[:feed_received_page], :per_page =&gt; 10)\n</code></pre>\n\n<p>But there is a simpler way of doing it with associations, just add a <code>has_many :through</code> association:</p>\n\n<pre><code># in the user model:\nhas_many :feedbacks_received, :through =&gt; :songs, :source =&gt; :feedbacks\n\n# in the controller:\n@feedbacksReceived = @user.feedbacks_received.order(:created_by =&gt; :desc).\n  paginate(:page =&gt; params[:feed_received_page], :per_page =&gt; 10)\n</code></pre>\n\n<p>NOTE: Not tested, and I too may be incorrectly using <code>feedbacks</code> plural form :).</p>\n"}], "owner": {"reputation": 31, "user_id": 6313246, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37168de77ec6f515a5f192460b1e90bb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Haselden", "link": "https://stackoverflow.com/users/6313246/j-haselden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 37693080, "answer_count": 2, "score": -1, "last_activity_date": 1465359983, "creation_date": 1465355234, "question_id": 37692558, "link": "https://stackoverflow.com/questions/37692558/ruby-on-rails-a-user-has-many-songs-a-song-has-many-feedbacks-display-all-fee", "title": "Ruby on Rails: A User has many songs, a song has many feedbacks, display all feedbacks for a user&#39;s songs", "body": "<p>I'm new to rails so forgive the poor skills as well as nomenclature.</p>\n\n<p>I have 3 models.</p>\n\n<p>Users\nSongs\nFeedbacks</p>\n\n<ul>\n<li>Users has many Songs and has many Feedbacks.</li>\n<li>Songs belongs to Users and has many Feedbacks.</li>\n<li>And Feedbacks belongs to Users and belongs to Songs.</li>\n</ul>\n\n<p>On the User's profile, I want to show:</p>\n\n<ul>\n<li>All the songs the user has posted</li>\n<li>All the feedbacks the user has left\non other user's songs</li>\n<li>and all the feedback the user has received on his own songs</li>\n</ul>\n\n<p>Right now I'm doing this in the controller with something like this:</p>\n\n<pre><code>def show\n    @user = User.friendly.find(params[:id])\n    @songs = @user.songs.paginate(:page =&gt; params[:song_page], :per_page =&gt; 5)\n    @feedbacksGiven = @user.feedbacks.paginate(:page =&gt; params[:feed_page], :per_page =&gt; 10)\n    @feedbacksReceived = @user.songs.paginate(:page =&gt; params[:feed_received_page], :per_page =&gt; 10)\nend\n</code></pre>\n\n<p>And then in my view, I actually access the feedbacks the user has received by:</p>\n\n<pre><code>&lt;% @feedbacksReceived.each do |song| %&gt;\n      &lt;% if song.feedbacks.any? %&gt;\n      &lt;% @userFeeds = song.feedbacks.all() %&gt;\n      &lt;% @userFeeds.each do |feed| %&gt;\n      etc.\n</code></pre>\n\n<p>However, this shows each of the feedbacks batched together by song. Where as I want to be able to display all of the feedbacks in descending order based on created_by. This method also messes with the will_paginate method.</p>\n\n<p>Is there a simpler way to do this?</p>\n\n<p>The basic premise of what I want to be able to do is:</p>\n\n<pre><code>@feedbacksReceived = @user.tracks.feedbacks\n</code></pre>\n\n<p>But that doesn't work.</p>\n"}, {"tags": ["ruby", "bindata"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465393107, "post_id": 37692554, "comment_id": 62882200, "body": "What happened when you tried <code>:onlyif</code>? You might try <a href=\"https://github.com/dmendel/bindata/wiki/AdvancedIO#skipping-over-unused-data\" rel=\"nofollow noreferrer\"><code>skip</code></a> in a <code>choice</code>."}, {"owner": {"reputation": 309, "user_id": 5540574, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/60c11fdac1e99b662e28849265746144?s=128&d=identicon&r=PG&f=1", "display_name": "Fianite", "link": "https://stackoverflow.com/users/5540574/fianite"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465393466, "post_id": 37692554, "comment_id": 62882484, "body": "I wrote the :onlyif like this: <code>choice :data, :onlyif =&gt; :not_none?, selection: :type do</code> but it errors saying  invalid choice &quot;&quot; because type wasn&#39;t defined due to the same only:if. The issue with skip is that I don&#39;t know I want to skip those bytes until after I&#39;ve read them, only when :name is equal to a certain value."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1465394888, "post_id": 37692554, "comment_id": 62883657, "body": "Please edit your question to include the code you&#39;ve tried."}], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 5540574, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/60c11fdac1e99b662e28849265746144?s=128&d=identicon&r=PG&f=1", "display_name": "Fianite", "link": "https://stackoverflow.com/users/5540574/fianite"}, "edited": false, "score": 0, "creation_date": 1465411106, "post_id": 37706238, "comment_id": 62894674, "body": "It seems that using the forward declaration allows me to avoid that error, but it doesn&#39;t seem that using <code>:only_if</code> to prevent a Record object from getting data is working as no matter what I do, the choice still fires no matter what. <a href=\"http://pastebin.com/65evHLQz\" rel=\"nofollow noreferrer\">I&#39;ve posted the whole BinData setup on pastebin.</a>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 309, "user_id": 5540574, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/60c11fdac1e99b662e28849265746144?s=128&d=identicon&r=PG&f=1", "display_name": "Fianite", "link": "https://stackoverflow.com/users/5540574/fianite"}, "edited": false, "score": 0, "creation_date": 1465412704, "post_id": 37706238, "comment_id": 62895594, "body": "In the pastebin code, shouldn&#39;t the body of <code>nop?</code>be <code>name.val != &quot;None\\x00&quot;</code>, not <code>name.val == &quot;None\\x00&quot;</code>?"}, {"owner": {"reputation": 309, "user_id": 5540574, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/60c11fdac1e99b662e28849265746144?s=128&d=identicon&r=PG&f=1", "display_name": "Fianite", "link": "https://stackoverflow.com/users/5540574/fianite"}, "edited": false, "score": 0, "creation_date": 1465444657, "post_id": 37706238, "comment_id": 62906195, "body": "Hey Jordan, I got it working. I ended up separating the Name elements and the other elements into different records. Then I just read the Name of the data, test if it&#39;s none, the read the data accordingly. Thanks so much for all your help the last few days!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 309, "user_id": 5540574, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/60c11fdac1e99b662e28849265746144?s=128&d=identicon&r=PG&f=1", "display_name": "Fianite", "link": "https://stackoverflow.com/users/5540574/fianite"}, "edited": false, "score": 0, "creation_date": 1465444978, "post_id": 37706238, "comment_id": 62906267, "body": "Great! Glad to help."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1465398138, "creation_date": 1465398138, "answer_id": 37706238, "question_id": 37692554, "link": "https://stackoverflow.com/questions/37692554/skipping-bytes-when-reading-with-bindata/37706238#37706238", "title": "Skipping Bytes when reading with BinData", "body": "<blockquote>\n  <p>[T]his didn't work because if I put the PropertyData Record above this (which it has to be because Property needs to know what PropertyData is) then it errors because PropertyData needs to know what Property is (because it fills the array with that type).</p>\n</blockquote>\n\n<p>You can solve this by declaring the PropertyData class before Property, but filling it out after:</p>\n\n<pre><code>class PropertyData &lt; BinData::Record; end # Forward declaration\n\nclass Property &lt; BinData::Record\n  endian :little\n\n  # ...\nend\n\nclass PropertyData &lt; BinData::Record\n  endian :little\n\n  # ...\nend\n</code></pre>\n\n<p>You can see the same thing happening in the <a href=\"https://github.com/dmendel/bindata/blob/0e0e636364647e14f03853993490d10a5edf30f5/examples/list.rb#L52-L68\" rel=\"nofollow\"><code>list.rb</code> example</a>.</p>\n"}], "owner": {"reputation": 309, "user_id": 5540574, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/60c11fdac1e99b662e28849265746144?s=128&d=identicon&r=PG&f=1", "display_name": "Fianite", "link": "https://stackoverflow.com/users/5540574/fianite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465398138, "creation_date": 1465355145, "last_edit_date": 1465397177, "question_id": 37692554, "link": "https://stackoverflow.com/questions/37692554/skipping-bytes-when-reading-with-bindata", "title": "Skipping Bytes when reading with BinData", "body": "<p>So I have a Record like such:</p>\n\n<pre><code>class Property &lt; BinData::Record\n    endian :little\n\n    int32  :name_len\n    string :name, read_length: :name_len\n\n    # want to quit here.\n\n    int32 :type_len\n    string :type, read_length: :type_len\nend\n</code></pre>\n\n<p>Is there a way for me to stop reading from the Record after it reads :name_len and :name, only if :name is equal to a certain value? Or is it the case that once you begin to read a file with a Record it must run all the way through?</p>\n\n<p>I know I can use :onlyif to skip all the remaining, but is there a way to put the :onlyif on everything after? Can you put an :onlyif on a choice?</p>\n\n<p>Code I tried:</p>\n\n<pre><code>class Property &lt; BinData::Record\n    endian :little\n\n    int32  :name_len\n    string :name, read_length: :name_len\n\n    int32 :type_len, :onlyif =&gt; :not_none?\n    string :type, read_length: :type_len, :onlyif =&gt; :not_none?\n\n    int64 :data_len, :onlyif =&gt; :not_none?    \n    choice :data, :onlyif =&gt; :not_none?, selection: :type do\n        int32 \"IntProperty\\x00\"\n\n        float \"FloatProperty\\x00\"\n\n        struct \"StrProperty\\x00\" do\n            int32 :len\n            string :data, read_length: :len\n        end \n\n        struct \"NameProperty\\x00\" do\n            int32 :len\n            string :data, read_length: :len\n        end\n\n        struct \"ArrayProperty\\x00\" do\n            int32 :num_items\n            array :properties, type: :property, initial_length: :num_items\n        end\n    end\n\n    def not_none?\n        name != 'None\\x00'\n    end\nend\n</code></pre>\n\n<p>I also tried putting everything below the :name_len and :name in it's own Record and doing this:</p>\n\n<pre><code>class Property &lt; BinData::Record\n    endian :little\n\n    string_record :name\n\n    property_data :p_data, :onlyif =&gt; :not_none?\n\n    def not_none?\n        name.data != 'None\\x00'\n    end \nend\n</code></pre>\n\n<p>But this didn't work because if I put the PropertyData Record above this (which it has to be because Property needs to know what PropertyData is) then it errors because PropertyData needs to know what Property is (because it fills the array with that type). There is no way for them to both know each other exist since they both use one another.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1465365496, "post_id": 37692531, "comment_id": 62864281, "body": "Actually, there are many ways to implement Singletons in Ruby. I found the following article quite enlightening: <a href=\"https://www.practicingruby.com/articles/ruby-and-the-singleton-pattern-dont-get-along\" rel=\"nofollow noreferrer\">practicingruby.com/articles/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1465412376, "post_id": 37694381, "comment_id": 62895407, "body": "I know what is singleton. I asked not about singleton like a stdlib module, i&#39;m asking about singleton like programming pattern in ruby. with using module, instead of class. Yes, module can not be instantiated, but it can store own module variables, and it is with out for realize singleton pattern"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1465365745, "last_edit_date": 1495540352, "creation_date": 1465365745, "answer_id": 37694381, "question_id": 37692531, "link": "https://stackoverflow.com/questions/37692531/ruby-singleton-module-vs-class/37694381#37694381", "title": "Ruby Singleton, module vs class", "body": "<p>Singletons are objects whose class ensures that it is instantiated only once, and same instance is shared by all clients.</p>\n\n<p>Ruby's <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/singleton/rdoc/Singleton.html\" rel=\"nofollow noreferrer\"><code>Singleton</code></a> module helps in achieving this in convenient manner.</p>\n\n<ul>\n<li>A module cannot be considered singleton as it cannot be instantiated.   Look at <a href=\"https://stackoverflow.com/questions/19352867/can-a-ruby-module-be-described-as-a-singleton-class\">Can a Ruby module be described as a singleton class?</a> for more details.</li>\n<li>To make a class singleton, its better to use <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/singleton/rdoc/Singleton.html\" rel=\"nofollow noreferrer\"><code>Singleton</code></a> module than re-inventing the wheel. </li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 1, "creation_date": 1465596344, "post_id": 37756659, "comment_id": 62984861, "body": "It is brilliant syntax idea! Thank you!"}, {"owner": {"reputation": 4698, "user_id": 382783, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/03b84aa935e9f5fbae4cc5758240eb6d?s=128&d=identicon&r=PG", "display_name": "Boris B.", "link": "https://stackoverflow.com/users/382783/boris-b"}, "edited": false, "score": 0, "creation_date": 1524353811, "post_id": 37756659, "comment_id": 86938613, "body": "Love it, but isn&#39;t <code>Foo</code> actually a constant here (shouldn&#39;t it be <code>FOO</code>)?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 4698, "user_id": 382783, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/03b84aa935e9f5fbae4cc5758240eb6d?s=128&d=identicon&r=PG", "display_name": "Boris B.", "link": "https://stackoverflow.com/users/382783/boris-b"}, "edited": false, "score": 0, "creation_date": 1524358203, "post_id": 37756659, "comment_id": 86939264, "body": "@BorisB.: The OP used the spelling <code>Foo</code>, so that&#39;s what I used."}, {"owner": {"reputation": 1164, "user_id": 625745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38010a01153b0c926db4491c0937e068?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Franzl", "link": "https://stackoverflow.com/users/625745/michael-franzl"}, "edited": false, "score": 0, "creation_date": 1539696734, "post_id": 37756659, "comment_id": 92589455, "body": "This is a very idiomatic and useful pattern to create one-off objects, without having to use <code>module</code>, <code>class</code> or <code>new</code>. It is  especially useful because you can also use <code>include</code> inside the singleton class definition."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 3, "last_activity_date": 1465590291, "creation_date": 1465590291, "answer_id": 37756659, "question_id": 37692531, "link": "https://stackoverflow.com/questions/37692531/ruby-singleton-module-vs-class/37756659#37756659", "title": "Ruby Singleton, module vs class", "body": "<p>The simplest way to get an object in Ruby is to use, well, an object:</p>\n\n<pre><code>class &lt;&lt; Foo = Object.new\n  attr_accessor :foo\nend\n</code></pre>\n\n<p>Using either a module or a class is overkill, both have features you don't need.</p>\n"}], "owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1945, "favorite_count": 0, "accepted_answer_id": 37756659, "answer_count": 2, "score": 1, "last_activity_date": 1465590291, "creation_date": 1465354949, "question_id": 37692531, "link": "https://stackoverflow.com/questions/37692531/ruby-singleton-module-vs-class", "title": "Ruby Singleton, module vs class", "body": "<p>I want to get in difference of implementation singleton pattern in ruby vs class and vs module.I'm talking about singleton with class methods only and no instances. As for me, it is logical to use</p>\n\n<pre><code>module Foo\n  def self.foo= other\n    @@foo=other\n  end\n  def self.foo\n    @@foo\n  end\nend\n</code></pre>\n\n<p>but very often I see in others code <code>class Foo;....;end</code> and I want to understand why?If there is no instances and no sub classes <code>Module</code> is more convenient. Or may be I miss something?</p>\n\n<p>The question is what is the diff between module and class in singleton pattern implementation?</p>\n"}, {"tags": ["html", "ruby", "rspec", "matcher"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 2, "last_activity_date": 1465495793, "creation_date": 1465495793, "answer_id": 37733283, "question_id": 37692178, "link": "https://stackoverflow.com/questions/37692178/rspec-html-matchers-finds-html-and-body-tags-in-html-without-them/37733283#37733283", "title": "rspec-html-matchers finds html and body tags in HTML without them", "body": "<p><a href=\"https://github.com/kucaahbe/rspec-html-matchers/blob/master/lib/rspec-html-matchers.rb#L108\" rel=\"nofollow\">rspec-html-matchers' <code>have_tag</code> parses the document with Nokogiri's HTML parser</a>, which adds the missing tags that are required by the HTML standard. You can see this in irb:</p>\n\n<pre><code>irb(main):001:0&gt; require 'nokogiri'\nirb(main):002:0&gt; Nokogiri::HTML '&lt;p&gt;Hi&lt;/p&gt;'\n=&gt; #&lt;Nokogiri::HTML::Document:0x3fedb1935a60 name=\"document\" children=[\n     #&lt;Nokogiri::XML::DTD:0x3fedb19353f8 name=\"html\"&gt;,\n     #&lt;Nokogiri::XML::Element:0x3fedb1934f84 name=\"html\" children=[\n       #&lt;Nokogiri::XML::Element:0x3fedb1934a70 name=\"body\" children=[\n         #&lt;Nokogiri::XML::Element:0x3fedb1934804 name=\"p\" children=[\n           #&lt;Nokogiri::XML::Text:0x3fedb19344bc \"Hi\"&gt;]&gt;]&gt;]&gt;]&gt;\n</code></pre>\n\n<p>Capybara's <code>have_selector</code> matcher also uses <code>Nokogiri::HTML</code> and has the same effect.</p>\n\n<p>If your HTML is XHTML, you can test for <code>html</code> and <code>body</code> tags with Nokogiri's XML parser in strict mode:</p>\n\n<pre><code>it \"has html and body tags\" do\n  string = \"&lt;html&gt;&lt;body&gt;&lt;p&gt;Hi&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\"\n  # The following raises an error if the string contains unbalanced tags\n  xml = Nokogiri::XML(string) { |config| config.options = Nokogiri::XML::ParseOptions::STRICT }\n  htmls = xml.children.select { |child| child.name == 'html' }\n  expect(htmls.length).to eq(1)\n  bodys = htmls.first.children.select { |child| child.name == 'body' }\n  expect(bodys.length).to eq(1)\nend\n</code></pre>\n"}], "owner": {"reputation": 62182, "user_id": 1445366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1073cfb4a1d76b3ac49e08eff6379a63?s=128&d=identicon&r=PG", "display_name": "Aaron Brager", "link": "https://stackoverflow.com/users/1445366/aaron-brager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 37733283, "answer_count": 1, "score": 1, "last_activity_date": 1465495877, "creation_date": 1465351869, "last_edit_date": 1465495877, "question_id": 37692178, "link": "https://stackoverflow.com/questions/37692178/rspec-html-matchers-finds-html-and-body-tags-in-html-without-them", "title": "rspec-html-matchers finds html and body tags in HTML without them", "body": "<p>I have a very simple directory with an <code>index.html</code> file that I'm testing with <a href=\"https://github.com/kucaahbe/rspec-html-matchers\" rel=\"nofollow\">rspec-html-matchers</a>.</p>\n\n<p>I've configured it in <code>spec_helper.rb</code> like so:</p>\n\n<pre><code>require \"rspec-html-matchers\"\n\nRSpec.configure do |config|\n  config.include RSpecHtmlMatchers\n\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\n  config.shared_context_metadata_behavior = :apply_to_host_groups\nend\n</code></pre>\n\n<p>The tests are mostly working as expected, but now I'm testing for the presence of <code>&lt;html&gt;</code> and <code>&lt;body&gt;</code> tags and getting (what I think is) an incorrect result.</p>\n\n<h2>Example</h2>\n\n<p>Here's a really simple test that I think should fail:</p>\n\n<pre><code>describe \"index\" do\n  it \"does something weird\" do\n    expect(\"&lt;h1&gt;just a header&lt;/h1&gt;\").to have_tag('html')\n  end\nend\n</code></pre>\n\n<p>The string clearly does <em>not</em> contain an <code>&lt;html&gt;</code> tag, so it should fail.</p>\n\n<p>This test:</p>\n\n<ul>\n<li>also unexpectedly passes if I use <code>have_tag('body')</code></li>\n<li>fails, as I expect, if I use <code>have_tag('h2')</code></li>\n<li>fails, as I expect, if I use <code>have_tag('LOLBBQ')</code></li>\n</ul>\n\n<p>What am I missing? How can I test for the presence of correctly implemented <code>&lt;html&gt;</code> and <code>&lt;body&gt;</code> tags?</p>\n"}, {"tags": ["arrays", "ruby", "reference", "pass-by-reference"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 2, "creation_date": 1465347191, "post_id": 37691626, "comment_id": 62859587, "body": "<code>best</code> is not an array. It&#39;s a hash. <code>:fitness</code> is not a function either. It&#39;s just a symbol."}], "owner": {"reputation": 63, "user_id": 5310820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zuvp-402mjg/AAAAAAAAAAI/AAAAAAAAcnE/Diw33IWV0VQ/photo.jpg?sz=128", "display_name": "lorduakiti", "link": "https://stackoverflow.com/users/5310820/lorduakiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 2, "closed_date": 1465351042, "answer_count": 0, "score": 2, "last_activity_date": 1465346694, "creation_date": 1465346694, "question_id": 37691626, "link": "https://stackoverflow.com/questions/37691626/ruby-array-reference-function", "closed_reason": "Needs details or clarity", "title": "Ruby Array Reference Function", "body": "<p>I don't understand the Ruby reference relationship of arrays variables (<strong>best</strong> and <strong>vector</strong>) with the return of the functions (<strong>fitness</strong> or <strong>bitstring</strong> for example). </p>\n\n<p>Concidere this case:</p>\n\n<pre><code>best[:fitness]\n</code></pre>\n\n<p>At where <strong>best</strong> is array and <strong>fitness</strong> is a function, what will be required of the variable ? and what will be referenced by the function ?</p>\n\n<p>See the complete code:\n</p>\n\n<pre><code>def objective_function(vector)\n    return vector.inject(0.0) {|sum, x| sum + (x ** 2.0)}\nend\n\ndef random_bitstring(num_bits)\n    return (0...num_bits).inject(\"\"){|s,i| s&lt;&lt;((rand&lt;0.5) ? \"1\" : \"0\")}\nend\n\ndef decode(bitstring, search_space, bits_per_param)\n    vector = []\n    search_space.each_with_index do |bounds, i|\n        off, sum = i*bits_per_param, 0.0\n        param = bitstring[off...(off+bits_per_param)].reverse\n        param.size.times do |j|\n            sum += ((param[j].chr=='1') ? 1.0 : 0.0) * (2.0 ** j.to_f)\n        end\n        min, max = bounds\n        vector &lt;&lt; min + ((max-min)/((2.0**bits_per_param.to_f)-1.0)) * sum\n    end\n    return vector\nend\n\ndef fitness(candidate, search_space, param_bits)\n    candidate[:vector]=decode(candidate[:bitstring], search_space, param_bits)\n    candidate[:fitness] = objective_function(candidate[:vector])\nend\n\ndef binary_tournament(pop)\n    i, j = rand(pop.size), rand(pop.size)\n    j = rand(pop.size) while j==i\n    return (pop[i][:fitness] &lt; pop[j][:fitness]) ? pop[i] : pop[j]\nend\n\ndef point_mutation(bitstring, rate=1.0/bitstring.size)\n    child = \"\"\n    bitstring.size.times do |i|\n        bit = bitstring[i].chr\n        child &lt;&lt; ((rand()&lt;rate) ? ((bit=='1') ? \"0\" : \"1\") : bit)\n    end\n    return child\nend\n\ndef crossover(parent1, parent2, rate)\n    return \"\"+parent1 if rand()&gt;=rate\n    child = \"\"\n    parent1.size.times do |i|\n        child &lt;&lt; ((rand()&lt;0.5) ? parent1[i].chr : parent2[i].chr)\n    end\n    return child\nend\n\ndef reproduce(selected, pop_size, p_cross, p_mut)\n    children = []\n    selected.each_with_index do |p1, i|\n        p2 = (i.modulo(2)==0) ? selected[i+1] : selected[i-1]\n        p2 = selected[0] if i == selected.size-1\n        child = {}\n        child[:bitstring] = crossover(p1[:bitstring], p2[:bitstring], p_cross)\n        child[:bitstring] = point_mutation(child[:bitstring], p_mut)\n        children &lt;&lt; child\n        break if children.size &gt;= pop_size\n    end\n    return children\nend\n\ndef bitclimber(child, search_space, p_mut, max_local_gens, bits_per_param)\n    current = child\n    max_local_gens.times do\n        candidate = {}\n        candidate[:bitstring] = point_mutation(current[:bitstring], p_mut)\n        fitness(candidate, search_space, bits_per_param)\n        current = candidate if candidate[:fitness] &lt;= current[:fitness]\n    end\n    return current\nend\n\ndef search(max_gens, search_space, pop_size, p_cross, p_mut, max_local_gens, p_local, bits_per_param=16)\n    pop = Array.new(pop_size) do |i| {:bitstring=&gt;random_bitstring(search_space.size*bits_per_param)}\n    end\n    pop.each{|candidate| fitness(candidate, search_space, bits_per_param) }\n    gen, best = 0, pop.sort{|x,y| x[:fitness] &lt;=&gt; y[:fitness]}.first\n    max_gens.times do |gen|\n        selected = Array.new(pop_size){|i| binary_tournament(pop)}\n        children = reproduce(selected, pop_size, p_cross, p_mut)\n        children.each{|cand| fitness(cand, search_space, bits_per_param)}\n        pop = []\n        children.each do |child|\n            if rand() &lt; p_local\n                child = bitclimber(child, search_space, p_mut, max_local_gens, bits_per_param)\n            end\n            pop &lt;&lt; child\n        end\n        pop.sort!{|x,y| x[:fitness] &lt;=&gt; y[:fitness]}\n        best = pop.first if pop.first[:fitness] &lt;= best[:fitness]\n        puts \"&gt;gen=#{gen}, f=#{best[:fitness]}, b=#{best[:bitstring]}\"\n    end\n    return best\nend\n\nif __FILE__ == $0\n    # problem configuration\n    problem_size = 3\n    search_space = Array.new(problem_size) {|i| [-5, +5]}\n    # algorithm configuration\n    max_gens = 100\n    pop_size = 100\n    p_cross = 0.98\n    p_mut = 1.0/(problem_size*16).to_f\n    max_local_gens = 20\n    p_local = 0.5\n    # execute the algorithm\n    best = search(max_gens, search_space, pop_size, p_cross, p_mut, max_local_gens, p_local)\n    puts \"done! Solution: f=#{best[:fitness]}, b=#{best[:bitstring]}, v=#{best[:vector].inspect}\"\nend\n</code></pre>\n\n<p><strong>ps:</strong> This code is an implementation of a Memetic Algorithms , which in turn is a variation of an Evolutionary Algorithm.\nA Memetic Altorithms technically search the best solution to a problem in a number of solutions from an integrated global search results to an optimization every cycle / generation that selects variations of a good solution from a local search results.</p>\n\n<p>My goal is to translate the code to Matlab programming.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "autocomplete"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1465342321, "post_id": 37690148, "comment_id": 62858561, "body": "There&#39;s a link to the source code for a demo at the link you provided: <a href=\"https://github.com/bigtunacan/rails-jquery-autocomplete\" rel=\"nofollow noreferrer\">github.com/bigtunacan/rails-jquery-autocomplete</a>.  Copy it."}], "answers": [{"tags": [], "owner": {"reputation": 42, "user_id": 6363136, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad55d401f22b3cbd14c07968b3fd7974?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Magnussen", "link": "https://stackoverflow.com/users/6363136/charles-magnussen"}, "is_accepted": true, "score": 1, "last_activity_date": 1465354170, "creation_date": 1465354170, "answer_id": 37692433, "question_id": 37690148, "link": "https://stackoverflow.com/questions/37690148/autocomplete-jquery-and-rails4/37692433#37692433", "title": "Autocomplete jquery and Rails4", "body": "<p>I think you can use Jquery UI, because this kind of functionality is bettre with js. This video has around 1 year hope works for you.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=iMz8HmrQ350\" rel=\"nofollow\">Tutorial</a></p>\n\n<p>Sometimes use a gem is not the best solution.</p>\n\n<p>Regards</p>\n"}], "owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 37692433, "answer_count": 1, "score": 0, "last_activity_date": 1465354170, "creation_date": 1465336864, "last_edit_date": 1465337312, "question_id": 37690148, "link": "https://stackoverflow.com/questions/37690148/autocomplete-jquery-and-rails4", "title": "Autocomplete jquery and Rails4", "body": "<p>I am building an app and therefore I need jQuery autocomplete. To understand how this works (just started coding few months ago) I created a basic articles/blog app. </p>\n\n<p>My goal is to implement a basic search field for the titles of my articles. I'm using <a href=\"https://github.com/bigtunacan/rails-jquery-autocomplete\" rel=\"nofollow\">rails-jquery-autocomplete</a>.</p>\n\n<p>However I could install everything so far according to the documentation. But now I'm totally lost on how to make this thing work actually (I tried to implement it via the documentation but it did not work).</p>\n\n<p>My question is how my code should look like to make this work?</p>\n\n<p>Currently my code looks like:</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :articles\nend\n</code></pre>\n\n<p><strong>article.rb</strong></p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p><strong>articles_controller.rb</strong></p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\n  def index\n    @articles = Article.all\n  end\n\n  def show\n    @article = Article.find params[:id]\n  end\n\n  def new\n  end\n\n  def create\n    @article = Article.new article_params\n    if @article.save\n      redirect_to @article\n    else\n      render 'new'\n    end\n  end\n\n  private\n    def article_params\n      params.require(:article).permit :title, :text\n    end\nend\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160607060132) do\n\n  create_table \"articles\", force: :cascade do |t|\n    t.string   \"title\"\n    t.text     \"text\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1465339271, "post_id": 37690042, "comment_id": 62857736, "body": "Where else have you searched? What else have you tried?"}, {"owner": {"reputation": 293, "user_id": 1204218, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/0272ef575b474dbee68cc33d60c3846b?s=128&d=identicon&r=PG", "display_name": "piratebroadcast", "link": "https://stackoverflow.com/users/1204218/piratebroadcast"}, "edited": false, "score": 0, "creation_date": 1471459242, "post_id": 37690042, "comment_id": 65359736, "body": "Did you ever get this solved? Having same issue."}], "answers": [{"tags": [], "owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "is_accepted": false, "score": 0, "last_activity_date": 1465338309, "last_edit_date": 1465338309, "creation_date": 1465336946, "answer_id": 37690164, "question_id": 37690042, "link": "https://stackoverflow.com/questions/37690042/cannot-reinstall-rails-and-cannot-find-the-reason/37690164#37690164", "title": "Cannot reinstall Rails and cannot find the reason", "body": "<p>As you are working with Mac OS and RVM, try this:</p>\n\n<pre><code>gem install bundler\nbrew install rbenv-default-gems\necho \"bundler\\n\" &gt;&gt; ~/.rbenv/default-gems\necho \"gem: --no-document\\n\" &gt;&gt; ~/.gemrc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2208, "user_id": 4061422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZHGRC.png?s=128&g=1", "display_name": "vipin", "link": "https://stackoverflow.com/users/4061422/vipin"}, "is_accepted": false, "score": 0, "last_activity_date": 1465410639, "creation_date": 1465410639, "answer_id": 37710240, "question_id": 37690042, "link": "https://stackoverflow.com/questions/37690042/cannot-reinstall-rails-and-cannot-find-the-reason/37710240#37710240", "title": "Cannot reinstall Rails and cannot find the reason", "body": "<p>install rails with rvm, this was the best method to install multiple rails at one place </p>\n\n<p><a href=\"http://www.rubyonrailsdoc.com/2016/06/simple-steps-to-install-ruby-on-rails.html\" rel=\"nofollow\">http://www.rubyonrailsdoc.com/2016/06/simple-steps-to-install-ruby-on-rails.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5977761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qcZ7t.jpg?s=128&g=1", "display_name": "Familysize", "link": "https://stackoverflow.com/users/5977761/familysize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465410639, "creation_date": 1465336392, "last_edit_date": 1465339232, "question_id": 37690042, "link": "https://stackoverflow.com/questions/37690042/cannot-reinstall-rails-and-cannot-find-the-reason", "title": "Cannot reinstall Rails and cannot find the reason", "body": "<p>I have been trying to get Ruby on Rails set up for a while. I had no trouble with Ruby, but with Rails things turned south. I think things fell apart after I updated to Ruby v2.3.1. At first it was the OpenSSL problem. </p>\n\n<p>I reinstalled Ruby using RVM and when I reinstall Rails using <code>gem install rails</code>, I got:</p>\n\n<pre><code>Yiqiaos-MBP:bookstore Richard$ gem install rails\nFetching: rack-1.6.4.gem (100%)\nSuccessfully installed rack-1.6.4\nFetching: concurrent-ruby-1.0.2.gem (100%)\nSuccessfully installed concurrent-ruby-1.0.2\nFetching: sprockets-3.6.0.gem (100%)\nSuccessfully installed sprockets-3.6.0\nFetching: thread_safe-0.3.5.gem (100%)\nSuccessfully installed thread_safe-0.3.5\nFetching: tzinfo-1.2.2.gem (100%)\nSuccessfully installed tzinfo-1.2.2\nFetching: i18n-0.7.0.gem (100%)\nSuccessfully installed i18n-0.7.0\nFetching: activesupport-4.2.6.gem (100%)\nSuccessfully installed activesupport-4.2.6\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-1.6.8/ext/nokogiri\n/Users/Richard/.rvm/rubies/ruby-2.3.1/bin/ruby -r ./siteconf20160607-53149-klvpv1.rb extconf.rb\nUsing pkg-config version 1.1.7\nchecking if the C compiler accepts ... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/Richard/.rvm/rubies/ruby-2.3.1/bin/$(RUBY_BASE_NAME)\n    --help\n    --clean\n    --use-system-libraries\n/Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- openssl (LoadError)\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/net/https.rb:23:in `&lt;top (required)&gt;'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/mini_portile2-2.1.0/lib/mini_portile2/mini_portile.rb:3:in `&lt;top (required)&gt;'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/mini_portile2-2.1.0/lib/mini_portile2.rb:2:in `&lt;top (required)&gt;'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/Richard/.rvm/rubies/ruby-2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from extconf.rb:468:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/Richard/.rvm/gems/ruby-2.3.1@global/extensions/x86_64-darwin-15/2.3.0/nokogiri-1.6.8/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/Richard/.rvm/gems/ruby-2.3.1@global/gems/nokogiri-1.6.8 for inspection.\nResults logged to /Users/Richard/.rvm/gems/ruby-2.3.1@global/extensions/x86_64-darwin-15/2.3.0/nokogiri-1.6.8/gem_make.out\n</code></pre>\n\n<p>Here is <a href=\"http://i.stack.imgur.com/xJhUE.jpg\" rel=\"nofollow\">the mkmf.log file</a>, which does not seem to be helpful either.</p>\n"}, {"tags": ["javascript", "jquery", "html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 690, "user_id": 3144373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17911da2f421426738ac8109965a7a62?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/3144373/evgeny"}, "edited": false, "score": 0, "creation_date": 1465336459, "post_id": 37689700, "comment_id": 62856759, "body": "A controller is actually list of actions. So, one of the way you can pass values of your elements is using forms with post method where your submitted form passes params into your action. Those arrived params your simply catch and use by params[:something_from_your_form]. I am not sure what you are  trying to do, may be there is no need to pass into your actions and further to backend, amy be there is something that you still want to keep in your frond-end layer, thus you can better use jQuery or so.."}], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": false, "score": 0, "last_activity_date": 1465336339, "last_edit_date": 1495541308, "creation_date": 1465336339, "answer_id": 37690024, "question_id": 37689700, "link": "https://stackoverflow.com/questions/37689700/ruby-on-rails-pulling-html-string-of-specific-element-from-within-controller/37690024#37690024", "title": "Ruby on Rails: Pulling HTML string of specific element from within controller", "body": "<p>It's not really possible to access the rendered content after the fact in the controller.</p>\n\n<p>I would recommend creating a helper function to create the content that goes inside the <code>content</code> div. Then call the helper in the <code>myview</code> if you need it there. </p>\n\n<p>The following post gives some options for calling a helper within a controller:\n<a href=\"https://stackoverflow.com/questions/5130150/rails-how-to-use-a-helper-inside-a-controller\">Rails - How to use a Helper Inside a Controller</a></p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 2844835, "user_type": "registered", "profile_image": "https://graph.facebook.com/694184410/picture?type=large", "display_name": "Nick Boukis", "link": "https://stackoverflow.com/users/2844835/nick-boukis"}, "is_accepted": true, "score": 0, "last_activity_date": 1465394773, "creation_date": 1465394773, "answer_id": 37704850, "question_id": 37689700, "link": "https://stackoverflow.com/questions/37689700/ruby-on-rails-pulling-html-string-of-specific-element-from-within-controller/37704850#37704850", "title": "Ruby on Rails: Pulling HTML string of specific element from within controller", "body": "<p>I actually ended up putting the HTML I need within a partial and rendering it from within the controller (and again later in my view using <code>&lt;%= render partial: \"content_partial\" %&gt;</code>).</p>\n\n<p><strong>_content_partial.html.erb</strong>  </p>\n\n<pre><code>&lt;div id=\"content\"&gt;\n    &lt;!-- More HTML --&gt;\n    &lt;%= @my_value.function %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And within my controller:  </p>\n\n<pre><code>def myview\n\n    contentString = render_to_string(:partial =&gt; 'content_partial', :layout =&gt; false, :locals =&gt; {:my_object =&gt; @my_value})\n\n    ...\nend\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2844835, "user_type": "registered", "profile_image": "https://graph.facebook.com/694184410/picture?type=large", "display_name": "Nick Boukis", "link": "https://stackoverflow.com/users/2844835/nick-boukis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 37704850, "answer_count": 2, "score": 0, "last_activity_date": 1465394773, "creation_date": 1465334941, "question_id": 37689700, "link": "https://stackoverflow.com/questions/37689700/ruby-on-rails-pulling-html-string-of-specific-element-from-within-controller", "title": "Ruby on Rails: Pulling HTML string of specific element from within controller", "body": "<p>If I have a view that is rendered with the following element:  </p>\n\n<p><strong>View</strong>  </p>\n\n<pre><code>&lt;div id=\"content\"&gt;\n    &lt;!-- More HTML --&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In my controller, is there such a method where I could retrieve the HTML string of a specific element using its id? For example, it might look something like:  </p>\n\n<pre><code>def myview\n\n    contentString = get_html_element_string(\"content\")\n\n    ...\nend\n</code></pre>\n\n<p>where <code>contentString</code> would contain the value <code>&lt;div id=\"content\"&gt; &lt;!-- More HTML --&gt; &lt;/div&gt;</code> as a string.</p>\n\n<p>I understand you can fetch the HTML of the whole rendered page using <code>render_to_string</code>, but I'd rather not parse through that.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 4, "creation_date": 1465333238, "post_id": 37689184, "comment_id": 62855385, "body": "Please include some real code, including actual inputs and expected outputs. It&#39;s very difficult to tell what you&#39;re talking about. What is <code>foo(1,1)</code>? Where does the first <code>1</code> come from? If it isn&#39;t part of your inputs, why include it in your example at all?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1465333551, "post_id": 37689184, "comment_id": 62855528, "body": "For <code>a = [[1], [2,3], [4]]</code>, do you want <code>a.map { |b| b.min } #=&gt; [1,2,4]</code> (which can be written more succinctly as  <code>a.map(&amp;:min)</code>)?"}, {"owner": {"reputation": 13, "user_id": 6436011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b58441e5b106dc65f07a4e06c71e726?s=128&d=identicon&r=PG&f=1", "display_name": "Klnkmnk", "link": "https://stackoverflow.com/users/6436011/klnkmnk"}, "edited": false, "score": 0, "creation_date": 1465338430, "post_id": 37689184, "comment_id": 62857497, "body": "sorry for the confusion, but basically the array is going through itself and performing foo on itself and each of its elements. if a was just a single dimensional array <code>a = [1,2,3]</code>, it would kind of look like  <code>for i in 0...a.length       for j in 0...a.length           b.push ( foo(a[i],a[j] )       end   end</code>      however the problem differs once it becomes 2 dimensional. for each a[i] and a[j], i want only push the minimum value of foo(a[i],a[j])"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1465339388, "post_id": 37689184, "comment_id": 62857767, "body": "Rather than add a comment to explain further, add that information to the question itself where everyone knows to look for it. Don&#39;t use &quot;Edit&quot; or &quot;Update&quot; tags, but put the information where you would have added it initially. We can see what&#39;s changed if we need to."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1465339556, "post_id": 37689184, "comment_id": 62857822, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the included links, along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;, which specifies how to create a &quot;it doesn&#39;t work&quot; question. A description of your code is not nearly as useful as the minimal code that demonstrates the problem. Describing it makes us imagine what you&#39;ve done, and we have nearly unlimited ability to imagine; Show us the minimum code demonstrating the problem and we all work from the same place."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6436011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b58441e5b106dc65f07a4e06c71e726?s=128&d=identicon&r=PG&f=1", "display_name": "Klnkmnk", "link": "https://stackoverflow.com/users/6436011/klnkmnk"}, "edited": false, "score": 0, "creation_date": 1465337607, "post_id": 37689432, "comment_id": 62857187, "body": "sorry. the 1 represented the value in  <code>a[0]</code>. So for each element in a it will <code>foo(a[0], a[element])</code>. if a[element] is more than one element it needs to choose  the min <code>foo(a[0], a[element[i] ])</code>. Then it goes a[1] and so on."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1465372009, "post_id": 37689432, "comment_id": 62867819, "body": "You say &quot;and then it goes a[1] and so on&quot; but what if <code>a[1]</code>itself has more than one element (like your example)?   element 1 is<code>a[2,3]</code> so when we match that as the &quot;first&quot; argument for foo, do we want to do <code>foo(2,4)</code> and <code>foo(3.4)</code> and return the minimum?  What happens if element <code>x</code> has three values and element <code>y</code> has two values, how do you want to handle it when you get to testing <code>foo(x, y)</code> ?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1465372132, "post_id": 37689432, "comment_id": 62867891, "body": "In any case, has been suggested, you should add any clarifications to the main question."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1465333851, "creation_date": 1465333851, "answer_id": 37689432, "question_id": 37689184, "link": "https://stackoverflow.com/questions/37689184/how-to-get-the-minimum-result-of-invoking-a-function-on-an-array-of-arrays-in-ru/37689432#37689432", "title": "How to get the minimum result of invoking a function on an array of arrays in Ruby", "body": "<pre><code>b = a.map{|arr| arr.map{|value| foo(1, value) }.min }\n</code></pre>\n\n<p>For each inner array value it does <code>foo(1,value)</code> and then selects the minimum result.  In the case of only one value, only one number is calculated, of course.</p>\n\n<p>It's not clear what the \"1\" represents in your example (the first argument of <code>foo</code>)</p>\n"}], "owner": {"reputation": 13, "user_id": 6436011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b58441e5b106dc65f07a4e06c71e726?s=128&d=identicon&r=PG&f=1", "display_name": "Klnkmnk", "link": "https://stackoverflow.com/users/6436011/klnkmnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465364858, "creation_date": 1465332901, "last_edit_date": 1465364858, "question_id": 37689184, "link": "https://stackoverflow.com/questions/37689184/how-to-get-the-minimum-result-of-invoking-a-function-on-an-array-of-arrays-in-ru", "title": "How to get the minimum result of invoking a function on an array of arrays in Ruby", "body": "<p>Let's say I have a function <code>foo(x,y)</code> that returns an int. My data set is an array of arrays like <code>a = [[1], [2,3], [4]]</code>. I want to perform foo but for each index of <code>a</code>, I only want the minimum value if the array has more than one element. <BR>\nSo I want to calculate <code>foo(1, 1</code> <code>foo(1,4)</code> and the minimum between <code>foo(1,2)</code>  <code>foo(1,3)</code>.</p>\n\n<p>So if <code>foo(1,2)</code> is lower my calculation for the first index of <code>a</code> is <code>foo(1,1) foo(1,2) foo(1,4)</code> and push that total to some array <code>b</code>. I want to do this for each element in <code>a</code> and every element in <code>a</code> could possibly have more than one element</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1465335233, "post_id": 37688600, "comment_id": 62856250, "body": "What specifically do you mean by &quot;apparently doesn&#39;t work&quot;? Are you getting errors? Is it finding things it shouldn&#39;t? Not finding things it should?"}, {"owner": {"reputation": 33, "user_id": 5840461, "user_type": "registered", "profile_image": "https://graph.facebook.com/950249708364115/picture?type=large", "display_name": "Mayank Badola", "link": "https://stackoverflow.com/users/5840461/mayank-badola"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1465405564, "post_id": 37688600, "comment_id": 62891482, "body": "it just runs the greater than equal to query"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1465455696, "last_edit_date": 1465455696, "creation_date": 1465426158, "answer_id": 37714192, "question_id": 37688600, "link": "https://stackoverflow.com/questions/37688600/mongoid-syntax-for-running-range-queries-with-or-condition/37714192#37714192", "title": "Mongoid Syntax for running range queries with or condition", "body": "<p>When you say:</p>\n\n<pre><code>:range_field.lte =&gt; some_date_time\n</code></pre>\n\n<p>you're calling a method, <code>lte</code>, that Mongoid monkey patches in <code>Symbol</code>. That method returns an <code>Origin::Key</code> instance that is wrapped around the underlying <code>$lte</code> operator. Somewhere inside Mongoid that <code>Origin::Key</code> will be converted to something that MongoDB will understand:</p>\n\n<pre><code>{ range_field: { $lte: some_date_time } }\n</code></pre>\n\n<p>If you look at what</p>\n\n<pre><code>where(:range_field.lte =&gt; t1, :range_field.gte =&gt; t2)\n</code></pre>\n\n<p>becomes by calling <code>selector</code> on the result, you'll see something like this:</p>\n\n<pre><code>{\n  \"created_at\" =&gt; {\n    :$gte =&gt; t2,\n    :$lte =&gt; t1\n  }\n}\n</code></pre>\n\n<p>and everything will work fine.</p>\n\n<p>However, if we use <code>#or</code> and call <code>selector</code> to see the underlying query, we see that Mongoid is expanding the <code>Origin::Key</code>s one by one and merging the results:</p>\n\n<pre><code>or({:range_field.lte =&gt; t1, :range_field.gte =&gt; t2})\n# is expanded as though as you said\nor({ :range_field =&gt; { :$lte =&gt; t1 }, :range_field =&gt; { :$gte =&gt; t2 } })\n# which is the same as\nor({ :range_field =&gt; { :$gte =&gt; t2 } })\n</code></pre>\n\n<p>Essentially, Mongoid is being inconsistent as to how it expands the <code>Origin::Key</code>s. You'll even get the same confusing result if you use <code>:$or</code> instead of <code>#or</code>:</p>\n\n<pre><code>where(:$or =&gt; [ {:range_field.lte =&gt; t1, :range_field.gte =&gt; t2} ]).selector\n</code></pre>\n\n<p>will say:</p>\n\n<pre><code>{ \"$or\" =&gt; [ { \"range_field\" =&gt; { \"$gte\" =&gt; t2 } } ] }\n</code></pre>\n\n<p>The solution is to not use the <code>Symbol</code> monkey patched methods and do that part by hand:</p>\n\n<pre><code>or(\n  { :range_field =&gt; { :$lte =&gt; t1, :$gte =&gt; t2 } },\n  { :range_field =&gt; { :$lte =&gt; t3, :$gte =&gt; t4 } }, \n  ...\n)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5840461, "user_type": "registered", "profile_image": "https://graph.facebook.com/950249708364115/picture?type=large", "display_name": "Mayank Badola", "link": "https://stackoverflow.com/users/5840461/mayank-badola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 1, "accepted_answer_id": 37714192, "answer_count": 1, "score": 1, "last_activity_date": 1465455696, "creation_date": 1465330851, "last_edit_date": 1465426164, "question_id": 37688600, "link": "https://stackoverflow.com/questions/37688600/mongoid-syntax-for-running-range-queries-with-or-condition", "title": "Mongoid Syntax for running range queries with or condition", "body": "<p>Suppose we need to write a range query in Mongoid. Let the field to be queried be <code>range_field</code>, then we do something like this</p>\n\n<pre><code>where(:range_field.lte =&gt; some-date-time, :range_field.gte =&gt; some-date-time)\n</code></pre>\n\n<p>But if i want to run a query to choose any of multiple ranges, i'd have to do</p>\n\n<pre><code>.or({:range_field.lte =&gt; some-date-time1, :range_field.gte =&gt; some-date-time2},{:range_field.lte =&gt; some-date-time3, :range_field.gte =&gt; some-date-time4})\n</code></pre>\n\n<p>This apparently doesn't work.\nHow can I run such queries with Mongoid?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "liquid", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1465330962, "post_id": 37688564, "comment_id": 62854347, "body": "I am on rails 4 still. But here any folder under <code>app&#47;</code> is autoloaded by default. Any changes are reflected without server restart."}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1465331124, "post_id": 37688564, "comment_id": 62854424, "body": "@ArupRakshit The classes are loaded in just fine, but changes I make don&#39;t show up until server restart."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1465331316, "post_id": 37688564, "comment_id": 62854534, "body": "can you show the development.rb file? Also are you running webrick locally?"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1465331400, "post_id": 37688564, "comment_id": 62854571, "body": "@ArupRakshit After more investigation, files in the root of <code>app&#47;liquid</code> reload as you described.  However, files in <code>app&#47;liquid&#47;drops</code> do not.  Is there a way to do that?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1465331445, "post_id": 37688564, "comment_id": 62854593, "body": "Are you getting errors any? If so, please show me that error"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1465331532, "post_id": 37688564, "comment_id": 62854634, "body": "@ArupRakshit I am not"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1465331604, "post_id": 37688564, "comment_id": 62854667, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114066/discussion-between-arup-rakshit-and-kieran-e\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1040, "user_id": 1462708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e0bb2baca0f20237b85bf00d1968b?s=128&d=identicon&r=PG", "display_name": "Stephen Crosby", "link": "https://stackoverflow.com/users/1462708/stephen-crosby"}, "edited": false, "score": 0, "creation_date": 1465331961, "post_id": 37688564, "comment_id": 62854827, "body": "Are you autoloading the classes using Rails&#39; built-in autoloading mechanism? or are you manually requiring the files in app/liquid/drops/?"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1465332075, "post_id": 37688564, "comment_id": 62854892, "body": "I&#39;m not requiring any of the files.  I&#39;m using Rails&#39; autoload feature (which is to say, I haven&#39;t had to modify the dev environment file).  I&#39;m relying on Rails automatically picking up anything in the <code>&#47;app</code> directory"}, {"owner": {"reputation": 1040, "user_id": 1462708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e0bb2baca0f20237b85bf00d1968b?s=128&d=identicon&r=PG", "display_name": "Stephen Crosby", "link": "https://stackoverflow.com/users/1462708/stephen-crosby"}, "edited": false, "score": 0, "creation_date": 1465332249, "post_id": 37688564, "comment_id": 62854959, "body": "I&#39;m suspicious that you&#39;re not using Rails&#39; autoloading feature and instead liquid is doing its own class loading. Here&#39;s some useful docs on how class reloading is supposed to work in rails:  <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#loading-mechanism\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#constant-reloading\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1040, "user_id": 1462708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e0bb2baca0f20237b85bf00d1968b?s=128&d=identicon&r=PG", "display_name": "Stephen Crosby", "link": "https://stackoverflow.com/users/1462708/stephen-crosby"}, "is_accepted": false, "score": 0, "last_activity_date": 1465332401, "creation_date": 1465332401, "answer_id": 37689039, "question_id": 37688564, "link": "https://stackoverflow.com/questions/37688564/add-directory-to-auto-reload-in-rails-5/37689039#37689039", "title": "Add directory to auto-reload in Rails 5", "body": "<p>Try toggling liquid's cache_classes configuration so that classes are not cached in your development environment:</p>\n\n<pre><code>Liquid.cache_classes = false\n</code></pre>\n\n<p>source: <a href=\"https://github.com/Shopify/liquid/wiki/liquid-for-programmers#caching-of-classes\" rel=\"nofollow\">https://github.com/Shopify/liquid/wiki/liquid-for-programmers#caching-of-classes</a></p>\n"}, {"tags": [], "owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "is_accepted": true, "score": 1, "last_activity_date": 1465333098, "creation_date": 1465333098, "answer_id": 37689243, "question_id": 37688564, "link": "https://stackoverflow.com/questions/37688564/add-directory-to-auto-reload-in-rails-5/37689243#37689243", "title": "Add directory to auto-reload in Rails 5", "body": "<p>I solved this by adding <code>config.autoload_paths += Dir[ Rails.root.join('app', 'liquid', '**/',) ]</code> to application.rb</p>\n"}], "owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1544, "favorite_count": 0, "accepted_answer_id": 37689243, "answer_count": 2, "score": 1, "last_activity_date": 1465333098, "creation_date": 1465330746, "last_edit_date": 1465331635, "question_id": 37688564, "link": "https://stackoverflow.com/questions/37688564/add-directory-to-auto-reload-in-rails-5", "title": "Add directory to auto-reload in Rails 5", "body": "<p>Version: Rails 5b3</p>\n\n<p>I have a folder located at <code>&lt;rails root&gt;/app/liquid</code>.  Inside that are more directories and <code>.rb</code> files. All the <code>.rb</code> files are simple classes with no includes or requires </p>\n\n<p>It's very inconvenient to have to restart the server each time I make a change to a file in this directory, so I want these classes to be automatically reloaded every time I refresh the page. <code>config.eager_load_paths += [\"#{Rails.root}/app/liquid\"]</code> doesn't seem to work.</p>\n\n<p>Any advice is appreciated! </p>\n\n<hr>\n\n<p>Edit: To clarify, files in <code>app/liquid</code> autoload and reload as expected.  However, any file within a subdirectory (like <code>app/liquid/drops/*.rb)</code> autoload correctly, but do not auto-reload on page refresh</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "stripe-payments"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1465330835, "post_id": 37688574, "comment_id": 62854286, "body": "O, holy moly!  That was way to easy!"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1465330783, "creation_date": 1465330783, "answer_id": 37688574, "question_id": 37688470, "link": "https://stackoverflow.com/questions/37688470/extract-customer-id-from-stripe-json-response-in-ruby/37688574#37688574", "title": "Extract Customer ID from Stripe JSON response in Ruby", "body": "<p>It looks to me like you get some instance of <code>Stripe::Customer</code> returned. I would expect that you can just call <code>id</code> on that instance:</p>\n\n<pre><code>customer_i_need.id\n</code></pre>\n\n<p>Or since it looks like the instance is the only element in an array:</p>\n\n<pre><code>array.first.id\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 37688574, "answer_count": 1, "score": 1, "last_activity_date": 1465330783, "creation_date": 1465330452, "last_edit_date": 1495535340, "question_id": 37688470, "link": "https://stackoverflow.com/questions/37688470/extract-customer-id-from-stripe-json-response-in-ruby", "title": "Extract Customer ID from Stripe JSON response in Ruby", "body": "<p>Since Stripe doesn't have a way to lookup a customer based their email address, I have to pull all of them down and compare accordingly (<a href=\"https://stackoverflow.com/questions/26767150/stripe-is-it-possible-to-search-a-customer-by-their-email\">from this SO question</a>).  This works fine, but now <code>customer_i_need</code> is:</p>\n\n<pre><code>[#&lt;Stripe::Customer:0x3fc836b51efc id=cus_8BETSKddddnJD&gt; JSON: {\n  \"id\": \"cus_8BETSKddddnJD\",\n  \"object\": \"customer\",\n  \"account_balance\": 0,\n  \"business_vat_id\": null,\n  \"created\": 1459377705,\n  \"currency\": \"usd\",\n  \"default_source\": \"card_17us0SDcysUdddff5P8gqGmWm\",\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": \"bobby@test.com\",\n  \"livemode\": false,\n  \"metadata\": {},\n  \"shipping\": null,\n  \"sources\": {\"object\":\"list\",\"data\":[{\"id\":\"card_17us0SDcysUdddff5P8gqGmWm\",\"object\":\"card\",\"address_city\":null,\"address_country\":null,\"address_line1\":null,\"address_line1_check\":null,\"address_line2\":null,\"address_state\":null,\"address_zip\":null,\"address_zip_check\":null,\"brand\":\"Visa\",\"country\":\"US\",\"customer\":\"cus_8BETSKddddnJD\",\"cvc_check\":null,\"dynamic_last4\":null,\"exp_month\":1,\"exp_year\":2019,\"fingerprint\":\"aHBJ0hDddffdaB9\",\"funding\":\"credit\",\"last4\":\"4242\",\"metadata\":{},\"name\":null,\"tokenization_method\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_8BETSKddddnJD/sources\"},\n  \"subscriptions\": {\"object\":\"list\",\"data\":[{\"id\":\"sub_8BETB4CWTlBert\",\"object\":\"subscription\",\"application_fee_percent\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"created\":1459377705,\"current_period_end\":1490913705,\"current_period_start\":1459377705,\"customer\":\"cus_8BETSKddddnJD\",\"discount\":null,\"ended_at\":null,\"metadata\":{},\"plan\":{\"id\":\"annual_600\",\"object\":\"plan\",\"amount\":60000,\"created\":1459172660,\"currency\":\"usd\",\"interval\":\"year\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"name\":\"annual_600\",\"statement_descriptor\":\"Trial\",\"trial_period_days\":365},\"quantity\":1,\"start\":1459377705,\"status\":\"trialing\",\"tax_percent\":null,\"trial_end\":1490913705,\"trial_start\":1459377705}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_8BETSKddddnJD/subscriptions\"}\n}]\n</code></pre>\n\n<p>really, I just need to be able to add the <code>id</code> (cus_8BETSKddddnJD) to my users account if it's already created, but I'm having trouble accessing the value.</p>\n\n<p>I've tried <code>customer_i_need[\"id\"]</code> but that's not working.  I've also tried to convert <code>customer_i_need.to_json</code>, then access the value the same way, but that's not working either... where am I going wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1465329678, "post_id": 37688115, "comment_id": 62853677, "body": "The case is important...."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6437030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52144c10f5fed56bd7da19cebd931a4?s=128&d=identicon&r=PG&f=1", "display_name": "nums", "link": "https://stackoverflow.com/users/6437030/nums"}, "edited": false, "score": 0, "creation_date": 1465444593, "post_id": 37688418, "comment_id": 62906183, "body": "When I try that I get a NoMethodError that says: &quot;undefined method `posts&#39; for #&lt;User:0x594b040&gt;&quot;"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 61, "user_id": 6437030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52144c10f5fed56bd7da19cebd931a4?s=128&d=identicon&r=PG&f=1", "display_name": "nums", "link": "https://stackoverflow.com/users/6437030/nums"}, "edited": false, "score": 0, "creation_date": 1465460526, "post_id": 37688418, "comment_id": 62913315, "body": "Do your database tables have <code>user_id</code> columns and are they set with the correct values? Does your <code>User</code> model have <code>has_many :posts</code> associations defined (same for <code>albums</code> and <code>interests</code>)?"}, {"owner": {"reputation": 61, "user_id": 6437030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52144c10f5fed56bd7da19cebd931a4?s=128&d=identicon&r=PG&f=1", "display_name": "nums", "link": "https://stackoverflow.com/users/6437030/nums"}, "edited": false, "score": 0, "creation_date": 1465859103, "post_id": 37688418, "comment_id": 63066663, "body": "I just added those and it worked. Thanks :)"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1465330214, "creation_date": 1465330214, "answer_id": 37688418, "question_id": 37688115, "link": "https://stackoverflow.com/questions/37688115/how-to-make-objects-viewable-for-current-user-in-rails/37688418#37688418", "title": "How to make objects viewable for current user in rails", "body": "<p>You probably have to use the plural and method names are downcase in Ruby:</p>\n\n<pre><code>def index \n  @posts = current_user.posts \n  @albums = current_user.albums \n  @interests = current_user.interests \nend\n</code></pre>\n\n<p>Furthermore you need to ensure that all these resources are actually associated with the user.</p>\n"}], "owner": {"reputation": 61, "user_id": 6437030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52144c10f5fed56bd7da19cebd931a4?s=128&d=identicon&r=PG&f=1", "display_name": "nums", "link": "https://stackoverflow.com/users/6437030/nums"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1465332723, "accepted_answer_id": 37688418, "answer_count": 1, "score": -3, "last_activity_date": 1465330276, "creation_date": 1465329075, "last_edit_date": 1465330276, "question_id": 37688115, "link": "https://stackoverflow.com/questions/37688115/how-to-make-objects-viewable-for-current-user-in-rails", "closed_reason": "Not suitable for this site", "title": "How to make objects viewable for current user in rails", "body": "<p>What I'm trying to do is make an index page that only shows the current user's posts, interests and albums instead of all interests and albums on the site. To do this I've tried using the <code>current_user</code> method in the <code>PostsController</code> but I keep getting a no method error: </p>\n\n<pre><code>def index\n  @posts = current_user.Post.all\n  @albums = current_user.Album.all\n  @interests = current_user.Interest.all\nend\n</code></pre>\n"}, {"tags": ["ruby", "testing", "cucumber"], "comments": [{"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 1, "creation_date": 1465339471, "post_id": 37687974, "comment_id": 62857788, "body": "What&#39;s your version of cucumber and cucumber-core? Can you also share a link of the docs where you found this. You shouldn&#39;t need the -P anyway. As per <a href=\"https://github.com/cucumber/cucumber-ruby/blob/485e67dc385c84ceb596a17898c06b0c2bb9bd9e/History.md\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-ruby/blob/&hellip;</a>, it seems the randomize feature only became stable in the latest versions, so worth checking that."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1465345975, "post_id": 37687974, "comment_id": 62859342, "body": "Can you provide the (minimal amount of) code that can reproduce the issue?"}, {"owner": {"reputation": 737, "user_id": 105367, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bee024ad9234098c14cb1ab5b3ea72c8?s=128&d=identicon&r=PG", "display_name": "jyurek", "link": "https://stackoverflow.com/users/105367/jyurek"}, "edited": false, "score": 0, "creation_date": 1465390379, "post_id": 37687974, "comment_id": 62880129, "body": "cucumber is 2.3.3 and cucumber-core is 1.4.0 which are (afaict) the latest. The options show up in <code>cucumber --help</code> so it would be a jerk move to have them and for them to not be implemented yet, anyway. :)"}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1465397606, "post_id": 37687974, "comment_id": 62885872, "body": "I don&#39;t think anybody provides free tools to be a jerk. There isn&#39;t enough information to reproduce the issue. Can you add more info such as the code as @orde suggested, the environment (OS, ruby ver, etc.)?"}, {"owner": {"reputation": 737, "user_id": 105367, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bee024ad9234098c14cb1ab5b3ea72c8?s=128&d=identicon&r=PG", "display_name": "jyurek", "link": "https://stackoverflow.com/users/105367/jyurek"}, "edited": false, "score": 0, "creation_date": 1465409153, "post_id": 37687974, "comment_id": 62893524, "body": "The jerk thing was tongue-in-cheek. I know no one&#39;s actually being a jerk here. Ruby is 2.3.1, OS is OSX 10.11.5, Rails 4.2, cucumber 2.2.3, cucumber-core 1.4.0. The goalposts seem to have changed now, though. With a basically standard config file, feature files aren&#39;t shuffled but the order of the features inside them are. That is <code>A.feature</code> always runs before <code>B.feature</code>, but <code>A</code>&#39;s scenarios don&#39;t always run in defined order."}], "answers": [{"comments": [{"owner": {"reputation": 3149, "user_id": 13968097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682a54b5d7a9ed1e19dab83ec34cbfd0?s=128&d=identicon&r=PG&f=1", "display_name": "seshadri_c", "link": "https://stackoverflow.com/users/13968097/seshadri-c"}, "edited": false, "score": 0, "creation_date": 1600570319, "post_id": 63974482, "comment_id": 113128020, "body": "Hi @Gu Yu, welcome to SO. I have edited your answer for now. In future please format your questions and and answers as per <a href=\"https://stackoverflow.com/editing-help\">formatting help</a>."}], "tags": [], "owner": {"reputation": 1, "user_id": 14307657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d0c096c4bb3bff7bb545282552441d2?s=128&d=identicon&r=PG&f=1", "display_name": "Gu Yu", "link": "https://stackoverflow.com/users/14307657/gu-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1600603173, "last_edit_date": 1600603173, "creation_date": 1600561231, "answer_id": 63974482, "question_id": 37687974, "link": "https://stackoverflow.com/questions/37687974/cucumber-refuses-to-run-tests-in-a-random-order/63974482#63974482", "title": "Cucumber refuses to run tests in a random order", "body": "<p>This is part from the help of cucumber:</p>\n<pre><code>--order TYPE[:SEED]          Run examples in the specified order. Available types:\n                                       [defined]     Run scenarios in the order they were defined (default).\n                                       [random]      Shuffle scenarios before running.\n                                     Specify SEED to reproduce the shuffling from a previous run.\n                                       e.g. --order random:5738\n</code></pre>\n<p>My opinion is you might try adding a seed number.</p>\n"}], "owner": {"reputation": 737, "user_id": 105367, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bee024ad9234098c14cb1ab5b3ea72c8?s=128&d=identicon&r=PG", "display_name": "jyurek", "link": "https://stackoverflow.com/users/105367/jyurek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 444, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1600603173, "creation_date": 1465328539, "question_id": 37687974, "link": "https://stackoverflow.com/questions/37687974/cucumber-refuses-to-run-tests-in-a-random-order", "title": "Cucumber refuses to run tests in a random order", "body": "<p>I have a decently sized cucumber test suite, but they currently all run in defined order. I want to run them in a random order. The cucumber docs say that I should be able to run <code>cucumber -P --order random</code> and have the tests be shuffled before execution. I have witnessed this as not happening. In fact, the presence (or lack) of the --order flag seems to do nothing.</p>\n\n<p>What could be stopping my suite from running in a random order? I'm not running with a profile (hence the -P) so nothing should be already defined.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1465328671, "post_id": 37687891, "comment_id": 62853090, "body": "Welcome to Stack Overflow. Please don&#39;t use tags in the title unless they&#39;re part of the natural flow of the sentence. SO uses the tags you set for indexing, and they&#39;re honored by the search engines."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1465330769, "post_id": 37687891, "comment_id": 62854254, "body": "Math operators are <i>already</i> methods, so in one sense, it&#39;s pretty easy."}], "answers": [{"tags": [], "owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "is_accepted": true, "score": 3, "last_activity_date": 1465334633, "last_edit_date": 1465334633, "creation_date": 1465330502, "answer_id": 37688487, "question_id": 37687891, "link": "https://stackoverflow.com/questions/37687891/how-to-pass-a-mathematical-operation-such-as-as-an-argument-to-a-me/37688487#37688487", "title": "How to pass a mathematical operation (such as +, -, *, /) as an argument to a method", "body": "<p>You could use any <a href=\"http://www.tutorialspoint.com/ruby/ruby_operators.htm\" rel=\"nofollow\">arithmetic operator</a> here in the same manner</p>\n\n<pre><code>def operate_on_two_numbers(a, b, op)\n  a.send(op, b)\nend\n\noperate_on_two_numbers(1, 2, :+)\n#=&gt; 3\noperate_on_two_numbers(1, 2, :-)\n#=&gt; -1\n</code></pre>\n\n<p>Here's what your full code could look like</p>\n\n<pre><code>class RPNCalculator\n  attr_accessor :numbers, :value\n  def initialize\n    @numbers = []\n    @value = nil\n  end\n\n  def push(number)\n    @numbers.push(number)\n  end\n\n  def plus\n    operate_on_two_numbers(:+)\n  end\n\n  def minus\n    operate_on_two_numbers(:-)\n  end\n\n  private\n\n  def operate_on_two_numbers(op)\n    number1=@numbers.pop\n    number2=@numbers.pop\n    @value = number1.send(op, number2)\n  end\nend\n\ncalculator=RPNCalculator.new\n#=&gt; #&lt;RPNCalculator:0x00000002efe460 @numbers=[], @value=nil&gt;\ncalculator.push(5)\n#=&gt; [5]\ncalculator.push(8)\n#=&gt; [5, 8]\ncalculator.plus\n#=&gt; 13\ncalculator.value\n#=&gt; 13\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "is_accepted": false, "score": 0, "last_activity_date": 1465369719, "creation_date": 1465369719, "answer_id": 37695514, "question_id": 37687891, "link": "https://stackoverflow.com/questions/37687891/how-to-pass-a-mathematical-operation-such-as-as-an-argument-to-a-me/37695514#37695514", "title": "How to pass a mathematical operation (such as +, -, *, /) as an argument to a method", "body": "<p>Although I'll accept the \".send\" method as what I was looking for initially, in the end I used a method which accepts a block as an argument, because for division (the \"divide\" method) I required some more operations (namely, converting to float prior to division). The updated RPN calculator is shown below.</p>\n\n<pre><code>class RPNCalculator\n  attr_accessor :numbers, :value\n  def initialize\n    @numbers = []\n    @value = nil\n  end\n\n  def push(number)\n    @numbers.push(number)\n  end\n\n  def plus\n    operate_on_two_numbers {|a,b| a + b}\n  end\n\n  def minus\n    operate_on_two_numbers {|a,b| b - a}\n  end\n\n  def times\n    operate_on_two_numbers {|a,b| a * b}\n  end\n\n  def divide\n    operate_on_two_numbers {|a,b| Float(b)/Float(a)}\n  end\n\nprivate\n\n  def operate_on_two_numbers(&amp;prc)\n    if @numbers.empty?\n      raise \"calculator is empty\"\n    else\n      number1=@numbers.pop\n      if @value.nil?\n        number2=@numbers.pop\n        @value = prc.call(number1,number2)\n      else\n        @value = prc.call(number1,@value)\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>Note that \"plus\", \"minus\", etc. are now one-line methods, and much of the complexity has been moved into the private \"operate_on_two_numbers\" method.</p>\n"}], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 37688487, "answer_count": 2, "score": 1, "last_activity_date": 1465369719, "creation_date": 1465328297, "last_edit_date": 1465328564, "question_id": 37687891, "link": "https://stackoverflow.com/questions/37687891/how-to-pass-a-mathematical-operation-such-as-as-an-argument-to-a-me", "title": "How to pass a mathematical operation (such as +, -, *, /) as an argument to a method", "body": "<p>I'm writing a Reverse Polish Notation (RPN) calculator which, until now, looks like this:</p>\n\n<pre><code>class RPNCalculator\n  attr_accessor :numbers, :value\n  def initialize\n    @numbers = []\n    @value = nil\n  end\n\n  def push(number)\n    @numbers.push(number)\n  end\n\n  def plus\n    if value.nil?\n      number1=@numbers.pop\n      number2=@numbers.pop\n      @value = number1 + number2\n    else\n      @value += @numbers.pop\n    end\n  end\n\n  # minus_proc = Proc.new {|a,b| a - b}\n\n  def minus\n    number1=@numbers.pop\n    number2=@numbers.pop\n    @value = number2 - number1\n    # operate_on_two_numbers(minus_proc)\n  end\n\n  def operate_on_two_numbers(&amp;prc)\n    number1=@numbers.pop\n    number2=@numbers.pop\n    @value = prc.call(number1,number2)\n  end\n\nend\n</code></pre>\n\n<p>For example, the following commands</p>\n\n<pre><code>calculator=RPNCalculator.new\ncalculator.push(5)\ncalculator.push(8)\ncalculator.plus\np calculator.value\n</code></pre>\n\n<p>produce the number \"13\". </p>\n\n<p>This is how it's supposed to work, but there seems to be a lot of repetition in the code. For example, the \"plus\" and \"minus\" functions are largely the same; only a \"+\" and \"-\" inside the code differs.</p>\n\n<p>I'd like to try to define a (private) method which accepts as an argument an operation which operates on two numbers, such as \"+\", \"-\", \"*\", or \"/\". It would be nice to use 'shortcut notation' like the shortcut <code>.inject(:+)</code>. </p>\n\n<p>I've given it a try with the commented-out lines and the method <code>operate_on_two_numbers</code>, but when I comment in the lines I get an error \"undefined local variable or method 'minus_proc'\".</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 576, "user_id": 1415844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MPbRo.png?s=128&g=1", "display_name": "Julia Will", "link": "https://stackoverflow.com/users/1415844/julia-will"}, "edited": false, "score": 0, "creation_date": 1465327815, "post_id": 37687423, "comment_id": 62852592, "body": "First of all, you added multiple id attributes with the same id, which might cause issues. You can change the route in routes.rb so that it accepts an optional param for the category and then use the link_to helper to link to it. In your controller you will then have that param available as params[:my_param_name] (this is the non js solution)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 576, "user_id": 1415844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MPbRo.png?s=128&g=1", "display_name": "Julia Will", "link": "https://stackoverflow.com/users/1415844/julia-will"}, "edited": false, "score": 0, "creation_date": 1465328386, "post_id": 37687423, "comment_id": 62852918, "body": "@JuliaWill this could be easily converted to a js solution by responding to different formats (e.g. route.json) and just handing back the JSON data through an ajax call. and I agree &quot;challenge-category&quot; should be a class not an id."}, {"owner": {"reputation": 576, "user_id": 1415844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MPbRo.png?s=128&g=1", "display_name": "Julia Will", "link": "https://stackoverflow.com/users/1415844/julia-will"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1465328684, "post_id": 37687423, "comment_id": 62853099, "body": "@engineersmnky Yes, that is very true. But I don&#39;t think this is an easy topic to explain in a comment - especially when someone seems to be new to RoR ;)"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 576, "user_id": 1415844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MPbRo.png?s=128&g=1", "display_name": "Julia Will", "link": "https://stackoverflow.com/users/1415844/julia-will"}, "edited": false, "score": 0, "creation_date": 1465331480, "post_id": 37687423, "comment_id": 62854614, "body": "Good points @JuliaWill! How would I change the route in routes.rb so that it accepts an optional param for the <code>categorization</code>? That&#39;s the main thing I&#39;m confused about in your helpful comment"}, {"owner": {"reputation": 576, "user_id": 1415844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MPbRo.png?s=128&g=1", "display_name": "Julia Will", "link": "https://stackoverflow.com/users/1415844/julia-will"}, "edited": false, "score": 0, "creation_date": 1465367177, "post_id": 37687423, "comment_id": 62865055, "body": "@AnthonyGalli.com assuming your current route would be /challenges, you could add: <code>get &quot;&#47;challenges(&#47;:category)&quot;, to: &quot;challenges#home, as: :my_custom_route_name</code>. You can also look <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">here</a> for some more info on routing."}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465329232, "creation_date": 1465326481, "last_edit_date": 1465329232, "question_id": 37687423, "link": "https://stackoverflow.com/questions/37687423/if-user-clicks-object-attribute-how-to-only-show-objects-with-that-attribute", "title": "If user clicks object attribute, how to only show objects with that attribute?", "body": "<p>If a user clicks one of these icons:</p>\n\n<p>home.html.erb:</p>\n\n<pre><code>&lt;span class=\"glyphicon glyphicon-picture\", id=\"challenge-category\"&gt;&lt;/span&gt; #challenge.categorization: \"adventure\"\n&lt;span class=\"glyphicon glyphicon-heart\", id=\"challenge-category\"&gt;&lt;/span&gt; #challenge.categorization: \"health\"\n&lt;span class=\"glyphicon glyphicon-briefcase\", id=\"challenge-category\"&gt;&lt;/span&gt; #challenge.categorization: \"work\"\n&lt;span class=\"glyphicon glyphicon-shopping-cart\", id=\"challenge-category\"&gt;&lt;/span&gt; #challenge.categorization: \"buy\"\n&lt;span class=\"glyphicon glyphicon-glass\", id=\"challenge-category\"&gt;&lt;/span&gt; #challenge.categorization: \"wacky\"\n</code></pre>\n\n<p>How to only show a user's challenges that share the clicked <code>categorization</code>?</p>\n\n<p>db:</p>\n\n<pre><code>create_table \"challenges\", force: true do |t|\n  t.string   \"categorization\"\nend\n</code></pre>\n\n<p>challenge.rb:</p>\n\n<pre><code>CATEGORIZATION = ['adventure', 'health', 'work', 'buy', 'wacky']\nscope :adventure,  -&gt; { where(categorizations: 'Adventure') }\nscope :health,  -&gt; { where(categorizations: 'health') }\nscope :work,  -&gt; { where(categorizations: 'Work') }\nscope :buy,  -&gt; { where(categorizations: 'Buy') }\nscope :wacky,  -&gt; { where(categorizations: 'Wacky') }\nscope :goal,  -&gt; { where(categories: 'Goal') }\nscope :habit,  -&gt; { where(categories: 'Habit') }\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>def home\n  @challenges = current_user.challenges.order(\"deadline ASC\")\n  @adventure_challenges = current_user.challenges.adventure.order(\"deadline ASC\")\n  @health_challenges = current_user.challenges.health.order(\"deadline ASC\")\n  @work_challenges = current_user.challenges.work.order(\"deadline ASC\")\n  @buy_challenges = current_user.challenges.buy.order(\"deadline ASC\")\n  @wacky_challenges = current_user.challenges.wacky.order(\"deadline ASC\")\nend\n</code></pre>\n\n<p>I included javascript/jquery as tags because it would be a more elegant solution to avoid page reload, but not necessary for purposes of this question.</p>\n\n<p>How do I rewrite home.html.erb so that when a glyphicon is clicked the page will reload (or JavaScript is trigged) and then only the challenges with the same <code>categorization</code> that the glyphicon represents will be shown?</p>\n"}, {"tags": ["c++", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 106, "user_id": 2687579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c57fcc44970ae8257ae7d021e3bb36?s=128&d=identicon&r=PG", "display_name": "Will Krause", "link": "https://stackoverflow.com/users/2687579/will-krause"}, "edited": false, "score": 1, "creation_date": 1465327295, "post_id": 37687381, "comment_id": 62852308, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2232/calling-shell-commands-from-ruby\">Calling shell commands from Ruby</a>"}, {"owner": {"reputation": 106, "user_id": 2687579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c57fcc44970ae8257ae7d021e3bb36?s=128&d=identicon&r=PG", "display_name": "Will Krause", "link": "https://stackoverflow.com/users/2687579/will-krause"}, "edited": false, "score": 0, "creation_date": 1465327746, "post_id": 37687381, "comment_id": 62852557, "body": "I think you didn&#39;t know the right question to ask. Don&#39;t let the user of the words &quot;shell command&quot; in that question fool you, you should be able to call any command on the system."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1465339748, "post_id": 37687381, "comment_id": 62857884, "body": "Investigate the use of backticks, the <code>system</code> method and <code>Open3</code>. Ruby makes it easy to call other code, and there are multiple ways to do it. You don&#39;t need a gem, since the capability is built in. We can&#39;t tell you if Inline will do what you want or if there&#39;s a better option. You&#39;ll need to tell us everything you know for us to answer those questions."}], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 7226415, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FXtC-33CVb4/AAAAAAAAAAI/AAAAAAAAABU/ZjV81zAgHQk/photo.jpg?sz=128", "display_name": "Martin T.", "link": "https://stackoverflow.com/users/7226415/martin-t"}, "edited": false, "score": 0, "creation_date": 1607079284, "post_id": 42906484, "comment_id": 115165398, "body": "What would be interesting, is there a way to execute the program so, that you don&#39;t need to store the output in a local variable (commandOutput) but deliver it directly to the output stream of the html page. So you could avoid the additional buffering and gain maximum performance for the end user?"}], "tags": [], "owner": {"reputation": 1383, "user_id": 1658810, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DlcF2.png?s=128&g=1", "display_name": "Chris Britt", "link": "https://stackoverflow.com/users/1658810/chris-britt"}, "is_accepted": true, "score": 2, "last_activity_date": 1490020793, "creation_date": 1490020793, "answer_id": 42906484, "question_id": 37687381, "link": "https://stackoverflow.com/questions/37687381/how-to-run-a-c-program-inside-a-rails-4-webapp/42906484#42906484", "title": "How to Run a C++ program inside a Rails 4 WebApp", "body": "<p>Ruby supports the functionality to run native commands using the <code>`</code> character. For example, we have a C++ program below, that takes two arguments, and then prints to standard output both of them, concatenated together. The course code for this program can be seen below: </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char ** argv){\n    std::cout &lt;&lt; argv[1] &lt;&lt; argv[2] &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>While the C++ code, really only needs to be compiled a single time, and this step wouldn't likely be necessary, we can compile it from within ruby by doing the following: (You can replace g++ with the compiler of your choice.)  We will set the variable <code>success</code> to true if the command successfully compiles, false otherwise. </p>\n\n<pre><code>pathToSource = \"your/path/to/file.cpp\"\noutputBinaryFile = \"your/desired/output/file.bin\"\n\nsuccess = system(\"g++ #{pathToSource} -o #{outputBinaryFile}\")\n</code></pre>\n\n<p>Now that we have compiled our code, we can execute it by running the following in ruby: </p>\n\n<pre><code>word1 = \"Hello\"\nword2 = \"World\"\ncommandOutput = `./#{outputBinaryFile} '#{word1}' '#{word2}'`\n</code></pre>\n\n<p>Which will set <code>commandOutput</code> to: <code>\"HelloWorld\\n\"</code></p>\n\n<p>You may need to change small things such as the compiler depending on the system that you are running, but this should function for you on *NIX systems. </p>\n"}], "owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 1, "accepted_answer_id": 42906484, "answer_count": 1, "score": 2, "last_activity_date": 1490020793, "creation_date": 1465326351, "question_id": 37687381, "link": "https://stackoverflow.com/questions/37687381/how-to-run-a-c-program-inside-a-rails-4-webapp", "title": "How to Run a C++ program inside a Rails 4 WebApp", "body": "<p>I'm interested in implementing a program written in C++ inside a Ruby on Rails 4 App.</p>\n\n<p>The C++ app runs in console and works by giving it a file, it processes it and then it outputs another file.</p>\n\n<p>I found 'Ruby Inline', a gem that allegedly allows the use of foreign code:</p>\n\n<p><a href=\"https://rubygems.org/gems/RubyInline\" rel=\"nofollow\">https://rubygems.org/gems/RubyInline</a></p>\n\n<pre><code>gem 'RubyInline', '~&gt; 3.12', '&gt;= 3.12.4'\n</code></pre>\n\n<blockquote>\n  <p>Inline allows you to write foreign code within your ruby code. It automatically determines if the code in question has changed and builds it only when necessary. The extensions are then automatically loaded into the class/module that defines it. You can even write extra builders that will allow you to write inlined code in any language. Use Inline::C as a template and look at Module#inline for the required API.</p>\n</blockquote>\n\n<p>According to the documentation, it allows the use of C and C++ programs like this:</p>\n\n<pre><code>require 'inline'\nclass MyTest\ninline(:C) do |builder|\nbuilder.include '&lt;iostream&gt;'\nbuilder.add_compile_flags '-x c++', '-lstdc++'\nbuilder.c '\nvoid hello(int i) {\nwhile (i-- &gt; 0) {\nstd::cout &lt;&lt; \"hello\" &lt;&lt; std::endl;\n}\n}'\nend\nend\nt = MyTest.new()\nt.hello(3)\n</code></pre>\n\n<p>The problem is that I'm not entirely sure how to implement it with a larger C++ program made out of multiple files, I'm not proficient in C++.</p>\n\n<p>This seems like a gem to add the C++ code inside a ruby script and the C++ program is made out of multiple files and folders.</p>\n\n<p>Will Ruby Inline work for what I want to do or is there a better option out there?</p>\n\n<p>Is there a way to call the C++ app directly without putting it inside a ruby file?</p>\n\n<p>The file to be given to the C++ app will be uploaded via the web interface, how can I feed it to the C++ program so it outputs the result?</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465340862, "post_id": 37687264, "comment_id": 62858177, "body": "This seems pretty similar to me. And I can&#39;t see any sidebar. Can you quote the bit of text that look different to you?"}, {"owner": {"reputation": 1, "user_id": 6436835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4132d78d5400f4bd1c4f1badfbfacb?s=128&d=identicon&r=PG&f=1", "display_name": "J.kay", "link": "https://stackoverflow.com/users/6436835/j-kay"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465341948, "post_id": 37687264, "comment_id": 62858455, "body": "the &quot;Example user&quot; title is supposed to be on the left hand side of the page and a bit smaller.  I think the h1 block of code in the sidebar block at the bottom is supposed to do this but I cant get it to work."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465342829, "post_id": 37687264, "comment_id": 62858681, "body": "For now I think your h1 tag inherit the h1 css bit : h1 { font-size: 3em; letter-spacing: -2px; margin-bottom: 30px; text-align: center; }. Are you sure your html is matching the css for sidebar?"}, {"owner": {"reputation": 1, "user_id": 6436835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4132d78d5400f4bd1c4f1badfbfacb?s=128&d=identicon&r=PG&f=1", "display_name": "J.kay", "link": "https://stackoverflow.com/users/6436835/j-kay"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465343141, "post_id": 37687264, "comment_id": 62858749, "body": "Yeah thats whats styling it at the moment. If I change that bit of code to to exclude the centering styling it fixes it a bit but I thought the section in the sidebar block would override the above code?"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465343450, "post_id": 37687264, "comment_id": 62858804, "body": "Sure this is what it should do, if your html does have the right tags &lt;aside&gt; etc.. I am no expert in this field, but you should check the html, not only the css.."}, {"owner": {"reputation": 1, "user_id": 6436835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4132d78d5400f4bd1c4f1badfbfacb?s=128&d=identicon&r=PG&f=1", "display_name": "J.kay", "link": "https://stackoverflow.com/users/6436835/j-kay"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465344516, "post_id": 37687264, "comment_id": 62859042, "body": "Thats where the error was! Thanks!!"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465345255, "post_id": 37687264, "comment_id": 62859185, "body": "Cool. Regarding Michael Hartl tutorial, you have done a fair bit reaching chapter 7. I actually found it very difficult, especially the testing bits with Rspec. I found the Rubyonrails.org &quot;getting started&quot; guide much easier and useful for the begginer. Don&#39;t hesitate to have a look at it too"}, {"owner": {"reputation": 1, "user_id": 6436835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4132d78d5400f4bd1c4f1badfbfacb?s=128&d=identicon&r=PG&f=1", "display_name": "J.kay", "link": "https://stackoverflow.com/users/6436835/j-kay"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465346572, "post_id": 37687264, "comment_id": 62859458, "body": "I&#39;ll be sure to check it out. Thanks!"}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1465351874, "post_id": 37687264, "comment_id": 62860520, "body": "@J.kay Please show us your custom.css.scss file? and your github repo?"}], "owner": {"reputation": 1, "user_id": 6436835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4132d78d5400f4bd1c4f1badfbfacb?s=128&d=identicon&r=PG&f=1", "display_name": "J.kay", "link": "https://stackoverflow.com/users/6436835/j-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465330964, "creation_date": 1465325969, "last_edit_date": 1465330964, "question_id": 37687264, "link": "https://stackoverflow.com/questions/37687264/ruby-on-rails-tutorial-ch-7-css-issues", "title": "Ruby on Rails Tutorial - Ch 7 CSS issues", "body": "<p>Im working my way through Michael Hartls Ruby on Rails tutorial and have run into a snag in while trying to get my style to match that of the tutorial. For whatever reason the changes that should be applied to the text in h1 under sidebar aren't going through and I cant find where the error in my code is.</p>\n\n<p>This is his styling:\n<img src=\"https://i.stack.imgur.com/SM3jw.png\" alt=\"This is his styling\"></p>\n\n<p>And this is mine:\n<img src=\"https://i.stack.imgur.com/hVA7J.png\" alt=\"and this is mine\"></p>\n\n<p>This is the code in question.    </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>@import \"bootstrap-sprockets\";\r\n@import \"bootstrap\";\r\n\r\n/* mixins, variables, etc. */\r\n\r\n$gray-medium-light: #eaeaea;\r\n\r\n@mixin box_sizing {\r\n  -moz-box-sizing:    border-box;\r\n  -webkit-box-sizing: border-box;\r\n  box-sizing:         border-box;\r\n}\r\n\r\n/* universal */\r\n\r\nbody {\r\n  padding-top: 60px;\r\n}\r\n\r\nsection {\r\n  overflow: auto;\r\n}\r\n\r\ntextarea {\r\n  resize: vertical;\r\n}\r\n\r\n.center {\r\n  text-align: center;\r\n  h1 {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n/* typography */\r\n\r\nh1, h2, h3, h4, h5, h6 {\r\n  line-height: 1;\r\n}\r\n\r\nh1 {\r\n  font-size: 3em;\r\n  letter-spacing: -2px;\r\n  margin-bottom: 30px;\r\n  text-align: center;\r\n}\r\n\r\nh2 {\r\n  font-size: 1.2em;\r\n  letter-spacing: -1px;\r\n  margin-bottom: 30px;\r\n  text-align: center;\r\n  font-weight: normal;\r\n  color: $gray-light;\r\n}\r\n\r\np {\r\n  font-size: 1.1em;\r\n  line-height: 1.7em;\r\n}\r\n\r\n\r\n/* header */\r\n\r\n#logo {\r\n  float: left;\r\n  margin-right: 10px;\r\n  font-size: 1.7em;\r\n  color: white;\r\n  text-transform: uppercase;\r\n  letter-spacing: -1px;\r\n  padding-top: 9px;\r\n  font-weight: bold;\r\n  &amp;:hover {\r\n    color: white;\r\n    text-decoration: none;\r\n  }\r\n}\r\n\r\n/* footer */\r\n\r\nfooter {\r\n  margin-top: 45px;\r\n  padding-top: 5px;\r\n  border-top: 1px solid $gray-medium-light;\r\n  color: $gray-light;\r\n  a {\r\n    color: $gray;\r\n    &amp;:hover {\r\n      color: $gray-darker;\r\n    }\r\n  }\r\n  small {\r\n    float: left;\r\n  }\r\n  ul {\r\n    float: right;\r\n    list-style: none;\r\n    li {\r\n      float: left;\r\n      margin-left: 15px;\r\n    }\r\n  }\r\n}\r\n\r\n  /* miscellaneous */\r\n\r\n.debug_dump {\r\n  clear: both;\r\n  float: left;\r\n  width: 100%;\r\n  margin-top: 45px;\r\n  @include box_sizing;\r\n  }\r\n\r\n  /* sidebar */\r\n\r\naside {\r\n  section.user_info {\r\n    margin-top: 20px;\r\n  }\r\n  section {\r\n    padding: 10px 0;\r\n    margin-top: 20px;\r\n    &amp;:first-child {\r\n      border: 0;\r\n      padding-top: 0;\r\n    }\r\n    span {\r\n      display: block;\r\n      margin-bottom: 3px;\r\n      line-height: 1;\r\n    }\r\n    h1 {\r\n      font-size: 1.4em;\r\n      text-align: left;\r\n      letter-spacing: -1px;\r\n      margin-bottom: 3px;\r\n      margin-top: 0px;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n.gravatar {\r\n  float: left;\r\n  margin-right: 10px;\r\n}\r\n\r\n.gravatar_edit {\r\n  margin-top: 15px;\r\n}\r\n\r\n\r\n </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "edited": false, "score": 1, "creation_date": 1465326496, "post_id": 37687397, "comment_id": 62851926, "body": "True, although in that situation it&#39;s more common to <i>deactivate</i> the account, e.g. by flipping a boolean flag."}], "tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 0, "last_activity_date": 1465326520, "last_edit_date": 1465326520, "creation_date": 1465326401, "answer_id": 37687397, "question_id": 37687165, "link": "https://stackoverflow.com/questions/37687165/when-would-an-activerecord-relationship-not-be-dependent-destroy/37687397#37687397", "title": "When would an ActiveRecord relationship not be dependent: :destroy?", "body": "<p>For many instances you do want to destroy associated results upon deleting their associated parent however in many areas you do not such as banking transactions etc.  For example, if you had an ecommerce site and had user's create accounts then they will certainly have orders tied to those accounts.  When the user decides they no longer want to keep their account they may delete it however you certainly don't want to destroy it's associated orders even though those orders \"belonged_to\" an account.  Deleting those orders could expose you to many potential issues.</p>\n"}, {"comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1465328447, "post_id": 37687503, "comment_id": 62852946, "body": "You could say that <code>dependent: :destroy</code> is actually flipping the switch on the order or something similar."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 1, "last_activity_date": 1465326767, "creation_date": 1465326767, "answer_id": 37687503, "question_id": 37687165, "link": "https://stackoverflow.com/questions/37687165/when-would-an-activerecord-relationship-not-be-dependent-destroy/37687503#37687503", "title": "When would an ActiveRecord relationship not be dependent: :destroy?", "body": "<p>The best reason I know of for not destroying dependents is that more than one 'parent' model <code>has_one</code> or <code>has_many</code> children. For example, an education application might have a <code>has_many</code> relationship between a family and the children in the family, and also have a <code>has_many</code> relationship between classes and children. If a class was cancelled you wouldn't want to delete the children who had signed up for it.</p>\n\n<p>Every business application I've ever seen doesn't really delete anything. If an account or an order or something is canceled it's not deleted, but put into a canceled state. That sidesteps this question entirely: it doesn't matter whether you delete through the relationship, because you never delete the parent.</p>\n"}], "owner": {"reputation": 125, "user_id": 5420687, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1d3d2512d6b875521827c85463331e4b?s=128&d=identicon&r=PG&f=1", "display_name": "totally", "link": "https://stackoverflow.com/users/5420687/totally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468924979, "creation_date": 1465325639, "last_edit_date": 1468924979, "question_id": 37687165, "link": "https://stackoverflow.com/questions/37687165/when-would-an-activerecord-relationship-not-be-dependent-destroy", "title": "When would an ActiveRecord relationship not be dependent: :destroy?", "body": "<p>I often see this code for a one-to-many model association:</p>\n\n<pre><code>class Order\n  has_many :line_items, dependent: :destroy\n  #...\nend\n</code></pre>\n\n<p>My question is, do you ever have any situation where you DON'T need\nto specify <code>dependent: :destroy</code>? Wouldn't that make your data wrong?</p>\n"}, {"tags": ["ruby", "time", "jmeter", "performance-testing"], "answers": [{"comments": [{"owner": {"reputation": 1487, "user_id": 966021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/defecc88dbd71700ed9a0d37884541b3?s=128&d=identicon&r=PG", "display_name": "earlyadopter", "link": "https://stackoverflow.com/users/966021/earlyadopter"}, "edited": false, "score": 0, "creation_date": 1465411654, "post_id": 37693351, "comment_id": 62894975, "body": "Dmitry, could you, please, show a screenshot of how that variable &quot;sig&quot; referred in the HTTP Request (=one level above the BeanShell PreProcessor)? Do I need to create a variable with no value there? Or HTTP Request gets the &quot;sig&quot; variable from the child automatically, and it just could be used in the URL without any additional efforts?"}, {"owner": {"reputation": 1597, "user_id": 1270530, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/h3jji.jpg?s=128&g=1", "display_name": "rails4sandeep", "link": "https://stackoverflow.com/users/1270530/rails4sandeep"}, "edited": false, "score": 0, "creation_date": 1595465368, "post_id": 37693351, "comment_id": 111487162, "body": "Is the DigestUtils deprecated? This no longer seems to be working?"}], "tags": [], "owner": {"reputation": 116880, "user_id": 2897748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d278f6ada8828c902a13ee8a5e523cce?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitri T", "link": "https://stackoverflow.com/users/2897748/dmitri-t"}, "is_accepted": true, "score": 2, "last_activity_date": 1465360534, "creation_date": 1465360534, "answer_id": 37693351, "question_id": 37686819, "link": "https://stackoverflow.com/questions/37686819/how-to-sign-request-in-jmeter/37693351#37693351", "title": "how to sign request in JMeter?", "body": "<p>You can use one of \"Beanshell\" Test Elements, i.e. <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_PreProcessor\" rel=\"nofollow noreferrer\">Beanshell PreProcessor</a> in order to generate correct signature value right before the request. </p>\n\n<ol>\n<li>Add Beanshell PreProcessor as a child of the HTTP Request which does that API call</li>\n<li><p>Put the following code into the PreProcessor's \"Script\" area (it's basically Beanshell equivalent of your Ruby script)</p>\n\n<pre><code>import org.apache.commons.codec.digest.DigestUtils;\n\nString api_key = \"some-key-here\";\nString shared_secret = \"very-secretive-secret\";\nlong timestamp = System.currentTimeMillis()/1000;\n\nString sig = DigestUtils.md5Hex(api_key + shared_secret + timestamp);\n\nvars.put(\"sig\", sig);\n\nlog.info(\"Signature: \" + sig);\n</code></pre></li>\n<li><p>Refer generated signature value as <code>${sig}</code> where required as it has been stored into a <a href=\"https://jmeter.apache.org/usermanual/functions.html\" rel=\"nofollow noreferrer\">JMeter Variable</a>. </p></li>\n</ol>\n\n<p>Demo:\n<a href=\"https://i.stack.imgur.com/64b4g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/64b4g.png\" alt=\"Beanshell MD5\"></a></p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html\" rel=\"nofollow noreferrer\">DigestUtils</a></li>\n<li><a href=\"https://jmeter.apache.org/api/org/apache/jmeter/threads/JMeterVariables.html\" rel=\"nofollow noreferrer\">JMeterVariables</a> (aka <code>vars</code>)</li>\n<li><a href=\"https://www.blazemeter.com/blog/queen-jmeters-built-componentshow-use-beanshell\" rel=\"nofollow noreferrer\">How to Use BeanShell: JMeter's Favorite Built-in Component</a></li>\n</ul>\n"}], "owner": {"reputation": 1487, "user_id": 966021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/defecc88dbd71700ed9a0d37884541b3?s=128&d=identicon&r=PG", "display_name": "earlyadopter", "link": "https://stackoverflow.com/users/966021/earlyadopter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1356, "favorite_count": 0, "accepted_answer_id": 37693351, "answer_count": 1, "score": 2, "last_activity_date": 1515136730, "creation_date": 1465324514, "question_id": 37686819, "link": "https://stackoverflow.com/questions/37686819/how-to-sign-request-in-jmeter", "title": "how to sign request in JMeter?", "body": "<p>For individual calls I have a ruby code like that to generate an API request:</p>\n\n<pre><code>api_key = 'some-key-here'\nshared_secret = 'very-secretive-secret'\n\ntimestamp = Time.now.to_i.to_s\nsig = Digest::MD5.hexdigest( api_key+shared_secret+timestamp )\n\nrequest_url = \"#{production_point}/#{request}?apikey=#{api_key}&amp;sig=#{sig}&amp;format=json\"\nputs request_url\n</code></pre>\n\n<p>but that generated request_url will work only for a relatively short time being dependent on current timestamp.</p>\n\n<p>Now I need to do some performance testing, and in JMeter I used to use a file with a list of URL/requests/keywords I need to bang the server with, but those were \u2013 with static URLs. Now I need to test a service which requires each request to be signed the way described above, and I can't just use a list.</p>\n\n<p>I understand there is an md5 function available in JMeter. But where do I put the api_key and shared_secret (secret is not a part of URL by itself).</p>\n\n<p>Could someone, please, walk me through setting up JMeter test for a service requiring signing each request with an md5-ed signature requiring a timestamp?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1465324561, "post_id": 37686725, "comment_id": 62850830, "body": "what did you try so far?"}, {"owner": {"reputation": 5646, "user_id": 6238076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6N6D.png?s=128&g=1", "display_name": "gdlmx", "link": "https://stackoverflow.com/users/6238076/gdlmx"}, "edited": false, "score": 1, "creation_date": 1465324783, "post_id": 37686725, "comment_id": 62850975, "body": "Just Google it you will find lots of tools available <a href=\"https://www.ruby-toolbox.com/categories/scheduling\" rel=\"nofollow noreferrer\">ruby-toolbox.com/categories/scheduling</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "is_accepted": false, "score": 0, "last_activity_date": 1465324406, "creation_date": 1465324406, "answer_id": 37686792, "question_id": 37686725, "link": "https://stackoverflow.com/questions/37686725/ruby-on-rails-run-task-once-a-day/37686792#37686792", "title": "Ruby on Rails run task once a day", "body": "<p>You can use ruby based scheduler <a href=\"https://github.com/tomykaira/clockwork\" rel=\"nofollow\">clockwork</a> which is (potentially) cross-platform. </p>\n\n<blockquote>\n  <p>Clockwork is a cron replacement. It runs as a lightweight, long-running Ruby process which sits alongside your web processes (Mongrel/Thin) and your worker processes (DJ/Resque/Minion/Stalker) to schedule recurring work at particular times or dates. For example, refreshing feeds on an hourly basis, or send reminder emails on a nightly basis, or generating invoices once a month on the 1st.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 4218742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a81b8f60bcdb73eab3b82a63fa6d900?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/4218742/david"}, "is_accepted": true, "score": 0, "last_activity_date": 1465324457, "creation_date": 1465324457, "answer_id": 37686807, "question_id": 37686725, "link": "https://stackoverflow.com/questions/37686725/ruby-on-rails-run-task-once-a-day/37686807#37686807", "title": "Ruby on Rails run task once a day", "body": "<p>If your task is to be performed in the background you could use <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow\">sidekiq</a> and <a href=\"https://github.com/tobiassvn/sidetiq\" rel=\"nofollow\">sidetiq</a> to perform your task</p>\n"}], "owner": {"reputation": 11, "user_id": 6312342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52a00696c269d70159e4df71c6a07794?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6312342/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 37686807, "answer_count": 2, "score": -1, "last_activity_date": 1465324679, "creation_date": 1465324180, "question_id": 37686725, "link": "https://stackoverflow.com/questions/37686725/ruby-on-rails-run-task-once-a-day", "title": "Ruby on Rails run task once a day", "body": "<p>I am trying to execute a method in ruby (2.2) on rails (4.2) once a day, and am running windows 10 but will be uploading to Elastic Beanstalk in a Linux environment and as such can't use an OS specific scheduler like cron.  This rules out wheneverizer and the few other ways I can think of to go about doing this.  Is there any non-platform specific ways I can do this?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "anchor"], "comments": [{"owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 0, "creation_date": 1465323944, "post_id": 37686581, "comment_id": 62850469, "body": "Are you looking for alt-text? (small blurb that pops up when user hovers over element)"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 0, "creation_date": 1465324169, "post_id": 37686581, "comment_id": 62850592, "body": "No sorry @itdoesntwork. Like actual text to appear so no need to hover over."}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465323639, "creation_date": 1465323639, "question_id": 37686581, "link": "https://stackoverflow.com/questions/37686581/how-to-show-text-when-anchor-present", "title": "How to show text when anchor present?", "body": "<p>If a user clicks: <code>&lt;%= link_to \"Sign Up\", root_path(anchor: \"start-here\") %&gt;</code>, they are brought to the sign up portion of the web page which is signified by: <code>&lt;div id=\"start-here\"&gt;&lt;/div&gt;</code></p>\n\n<p>How can I show the text, \"Create Challenge to Sign Up\" if the user clicks the \"Sign Up\" button, www.livetochallenge.com/#start-here?</p>\n\n<p>Not sure if javascript is needed to reveal the text or if this can be done with ruby alone. Thanks for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 1, "creation_date": 1465323621, "post_id": 37686464, "comment_id": 62850289, "body": "Can you provide the error stack trace as well ?"}, {"owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 1, "creation_date": 1465324204, "post_id": 37686464, "comment_id": 62850617, "body": "So the error is coming from a different controller (RegistrationController) rather the one that you have provided. You seem to be sending a json request to a controller that <a href=\"https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb\" rel=\"nofollow noreferrer\">does not</a> support it."}, {"owner": {"reputation": 63, "user_id": 1715747, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/07e3872cdb1da765d677c5d9c5d440e5?s=128&d=identicon&r=PG", "display_name": "Phil Pilon", "link": "https://stackoverflow.com/users/1715747/phil-pilon"}, "reply_to_user": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 0, "creation_date": 1465324348, "post_id": 37686464, "comment_id": 62850714, "body": "ohh devise is receiving the request not my users controller thank you for noticing"}], "owner": {"reputation": 63, "user_id": 1715747, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/07e3872cdb1da765d677c5d9c5d440e5?s=128&d=identicon&r=PG", "display_name": "Phil Pilon", "link": "https://stackoverflow.com/users/1715747/phil-pilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465324134, "creation_date": 1465323204, "last_edit_date": 1465324134, "question_id": 37686464, "link": "https://stackoverflow.com/questions/37686464/rails-4-unknown-format-error", "title": "Rails 4 Unknown Format error", "body": "<p>Im trying to create a user but when I submit it I get the error. I set json as the default format in the users controller and in my routes, however I still get this error. Im running Rails 4.2.2 and ruby 2.2.1</p>\n\n<pre><code>ActionController::UnknownFormat (ActionController::UnknownFormat):\n\n\nUsers Controller \n\nclass Api::V1::UsersController &lt; ApplicationController\n  respond_to :json\n\n  def show\n    respond_with User.find(params[:id])\n  end\n  def create\n    user = User.new(user_params)\n    if user.save\n      render json: user, status: 201, location: [:api, user]\n    else\n      render json: { errors: user.errors }, status: 422\n    end\n  end\n  def update\n    user = User.find(params[:id])\n\n    if user.update(user_params)\n        render json: user, status: 200, location: [:api, user]\n    else\n        render json: { errors: user.errors }, status: 422\n    end\n  end\n  def destroy\n    user = User.find(params[:id])\n    user.destroy\n    head 204\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:email, :password, :password_confirmation)\n    end\nend\n</code></pre>\n\n<p>Routes</p>\n\n<pre><code>require 'api_constraints'\n\nRails.application.routes.draw do\n  devise_for :users\n  namespace :api, defaults: { format: :json },\n                              constraints: { subdomain: 'api' }, path: '/'  do\n    scope module: :v1,\n              constraints: ApiConstraints.new(version: 1, default: true) do\n      resources :users, :only =&gt; [:show, :create, :update, :destroy]\n    end\n  end\nend\n</code></pre>\n\n<p>Log</p>\n\n<pre><code>Processing by Devise::RegistrationsController#create as JSON\n  Parameters: {\"user\"=&gt;{\"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"email\"=&gt;\"example@gmail.com\"}, \"registration\"=&gt;{\"user\"=&gt;{\"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"email\"=&gt;\"pilon24@icloud.com\"}}}\nCan't verify CSRF token authenticity\nMONGODB | Adding localhost:27017 to the cluster.\nMONGODB | localhost:27017 | quickalertapi_development.find | STARTED | {\"find\"=&gt;\"users\", \"filter\"=&gt;{\"email\"=&gt;\"example@gmail.com\"}, \"projection\"=&gt;{\"_id\"=&gt;1}, \"limit\"=&gt;1}\nMONGODB | localhost:27017 | quickalertapi_development.find | SUCCEEDED | 0.044546s\nMONGODB | localhost:27017 | quickalertapi_development.insert | STARTED | {\"insert\"=&gt;\"users\", \"documents\"=&gt;[{\"_id\"=&gt;BSON::ObjectId('57570c29dd4736cc49ddcdfc'), \"email\"=&gt;\"example@gmail.com\", \"encrypted_password\"=&gt;\"$2a$11$1NFccmBD10pUW59b2TQ.9ezJPQkmdnrBoEzaq/Sdl9T5K7miH62/a\", \"sign_in_count\"=&gt;0, \"updated_at\"=&gt;2016-06-07 18:...\nMONGODB | localhost:27017 | quickalertapi_development.insert | SUCCEEDED | 0.009481999999999999s\nMONGODB | localhost:27017 | quickalertapi_development.update | STARTED | {\"update\"=&gt;\"users\", \"updates\"=&gt;[{\"q\"=&gt;{\"_id\"=&gt;BSON::ObjectId('57570c29dd4736cc49ddcdfc')}, \"u\"=&gt;{\"$set\"=&gt;{\"last_sign_in_at\"=&gt;2016-06-07 18:02:17 UTC, \"current_sign_in_at\"=&gt;2016-06-07 18:02:17 UTC, \"last_sign_in_ip\"=&gt;\"127.0.0.1\", \"current_sign_in_ip\"=&gt;...\nMONGODB | localhost:27017 | quickalertapi_development.update | SUCCEEDED | 0.012626s\nCompleted 406 Not Acceptable in 371ms\n\n\n\nActionController::UnknownFormat (ActionController::UnknownFormat):\n  responders (2.2.0) lib/action_controller/respond_with.rb:207:in `respond_with'\n  devise (4.1.1) app/controllers/devise/registrations_controller.rb:23:in `create'\n  actionpack (4.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n  actionpack (4.2.3) lib/abstract_controller/base.rb:198:in `process_action'\n  actionpack (4.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'\n  actionpack (4.2.3) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:115:in `call'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:115:in `call'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:553:in `block (2 levels) in compile'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:503:in `call'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:503:in `call'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:88:in `run_callbacks'\n  actionpack (4.2.3) lib/abstract_controller/callbacks.rb:19:in `process_action'\n  actionpack (4.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'\n  actionpack (4.2.3) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\n  activesupport (4.2.3) lib/active_support/notifications.rb:164:in `block in instrument'\n  activesupport (4.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.2.3) lib/active_support/notifications.rb:164:in `instrument'\n  actionpack (4.2.3) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n  actionpack (4.2.3) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n  actionpack (4.2.3) lib/abstract_controller/base.rb:137:in `process'\n  actionview (4.2.3) lib/action_view/rendering.rb:30:in `process'\n  actionpack (4.2.3) lib/action_controller/metal.rb:196:in `dispatch'\n  actionpack (4.2.3) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n  actionpack (4.2.3) lib/action_controller/metal.rb:237:in `block in action'\n  actionpack (4.2.3) lib/action_dispatch/routing/route_set.rb:76:in `call'\n  actionpack (4.2.3) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'\n  actionpack (4.2.3) lib/action_dispatch/routing/route_set.rb:45:in `serve'\n  actionpack (4.2.3) lib/action_dispatch/routing/mapper.rb:49:in `serve'\n  actionpack (4.2.3) lib/action_dispatch/journey/router.rb:43:in `block in serve'\n  actionpack (4.2.3) lib/action_dispatch/journey/router.rb:30:in `each'\n  actionpack (4.2.3) lib/action_dispatch/journey/router.rb:30:in `serve'\n  actionpack (4.2.3) lib/action_dispatch/routing/route_set.rb:821:in `call'\n  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'\n  warden (1.2.6) lib/warden/manager.rb:34:in `catch'\n  warden (1.2.6) lib/warden/manager.rb:34:in `call'\n  rack (1.6.4) lib/rack/etag.rb:24:in `call'\n  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'\n  rack (1.6.4) lib/rack/head.rb:13:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/flash.rb:260:in `call'\n  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'\n  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/cookies.rb:560:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.2.3) lib/active_support/callbacks.rb:84:in `run_callbacks'\n  actionpack (4.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.2.3) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.3) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.3) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.3) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.3) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.3) lib/rails/rack/logger.rb:20:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\n  rack (1.6.4) lib/rack/runtime.rb:18:in `call'\n  activesupport (4.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  actionpack (4.2.3) lib/action_dispatch/middleware/static.rb:116:in `call'\n  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'\n  railties (4.2.3) lib/rails/engine.rb:518:in `call'\n  railties (4.2.3) lib/rails/application.rb:165:in `call'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:155:in `handle'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:109:in `rescue in block (2 levels) in start'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:106:in `block (2 levels) in start'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:96:in `each'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:96:in `block in start'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:76:in `loop'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:76:in `start'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/lib/nack/server.rb:12:in `run'\n  /Users/Phil/Library/Application Support/Pow/Versions/0.5.0/node_modules/nack/bin/nack_worker:4:in `&lt;main&gt;'\n\n\n  Rendered /Users/Phil/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.4ms)\n  Rendered /Users/Phil/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.1ms)\n  Rendered /Users/Phil/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)\n  Rendered /Users/Phil/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (115.4ms)\n</code></pre>\n"}, {"tags": ["javascript", "sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 0, "creation_date": 1465322192, "post_id": 37686043, "comment_id": 62849529, "body": "Code Snippets are for HTML, CSS, JavaScript only!"}, {"owner": {"reputation": 113, "user_id": 6352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6995294cd046a303219a834480fdc12?s=128&d=identicon&r=PG&f=1", "display_name": "jean Zaniloi", "link": "https://stackoverflow.com/users/6352541/jean-zaniloi"}, "reply_to_user": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 0, "creation_date": 1465322268, "post_id": 37686043, "comment_id": 62849573, "body": "Ah ok, sorry I m new. I thought that it was the classic pagination for the blocs of code"}, {"owner": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 0, "creation_date": 1465322321, "post_id": 37686043, "comment_id": 62849604, "body": "No buddy, you are new here. Not to worry, I have already edited. <code>:)</code>"}, {"owner": {"reputation": 113, "user_id": 6352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6995294cd046a303219a834480fdc12?s=128&d=identicon&r=PG&f=1", "display_name": "jean Zaniloi", "link": "https://stackoverflow.com/users/6352541/jean-zaniloi"}, "reply_to_user": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 0, "creation_date": 1465327828, "post_id": 37686043, "comment_id": 62852600, "body": "Thanks,  By the way, you would not have a solution to my problem by chance?"}, {"owner": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 0, "creation_date": 1465328378, "post_id": 37686043, "comment_id": 62852916, "body": "No buddy, am not good with RoR. <code>:(</code>"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465341426, "post_id": 37686043, "comment_id": 62858324, "body": "Can you edit your question and copy the post controller + the show view for this controller. You only copy the push controller. But you say the problem happens when a post is shown"}, {"owner": {"reputation": 113, "user_id": 6352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6995294cd046a303219a834480fdc12?s=128&d=identicon&r=PG&f=1", "display_name": "jean Zaniloi", "link": "https://stackoverflow.com/users/6352541/jean-zaniloi"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465385079, "post_id": 37686043, "comment_id": 62876251, "body": "+1 @Maxence Yep, It is exactly my problem at this time. I edit my question to add show view and post controller. Thanks for your answer man !"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1465428024, "post_id": 37686043, "comment_id": 62902501, "body": "I am rather a beginner but I am wondering how you can see anything showing if it has not been added yet ? Moreover your show action on the post controller is empty. I expected to see something like @post = Post.find(params[:id])"}], "owner": {"reputation": 113, "user_id": 6352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6995294cd046a303219a834480fdc12?s=128&d=identicon&r=PG&f=1", "display_name": "jean Zaniloi", "link": "https://stackoverflow.com/users/6352541/jean-zaniloi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465385331, "creation_date": 1465321770, "last_edit_date": 1465385331, "question_id": 37686043, "link": "https://stackoverflow.com/questions/37686043/why-mi-object-is-creating-without-submition", "title": "Why mi object is creating without submition?", "body": "<p>I came across a problem in my web app. \nI would like to make a mvc to allow the user create a push from the post (like a ranking or commments). But actualy, the push is creating automatically when the user show the post. So I want this one is created if the user submit the data pushed. \nCan you explain me where I make a mistake ?</p>\n\n<p>My code </p>\n\n<p>Show/post view :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  &lt;strong&gt;Title:&lt;/strong&gt;\r\n  &lt;%= @post.title %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Image:&lt;/strong&gt;\r\n &lt;%= image_tag @post.image.url(:medium) %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Prix:&lt;/strong&gt;\r\n  &lt;%= @post.prix %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Description:&lt;/strong&gt;\r\n  &lt;%= @post.description %&gt;\r\n&lt;/p&gt;\r\n\r\n\r\n\r\n&lt;%- if current_user.admin? %&gt;\r\n      &lt;div class=\"btn-group\" role=\"group\" aria-label=\"...\"&gt;\r\n\r\n      &lt;%= link_to 'Modifier', edit_post_path(@post), class: \"btn btn-warning\"%&gt;\r\n\r\n      &lt;%= link_to 'Supprimer', @post, method: :delete, data: { confirm: 'Confirmer la suppression du plat ?' }, class: \"btn btn-danger\" %&gt;\r\n      &lt;%end%&gt;\r\n\r\n&lt;%=link_to \"Home\", posts_path, class: \"btn btn-info\"%&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class= \"col-md-6\"&gt;\r\n    &lt;div class=\"push\"&gt;\r\n      &lt;%= render 'pushs/form' %&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Push/form (into the views/posts/show) :</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;%= simple_form_for([@post, @post.pushs.build]) do |f| %&gt;\n&lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-12\"&gt;\n              &lt;div class=\"form-group text-center\"&gt;\n                &lt;h4&gt;Combien \u00eates vous ?&lt;/h4&gt;\n                &lt;%= f.text_field :quantity %&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-12\"&gt;\n              &lt;div class=\"form-group text-center\"&gt;\n                &lt;h4&gt;Ou \u00eates vous ?&lt;/h4&gt;\n                &lt;%= f.text_field :adress2 %&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n\n\n      &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-12\"&gt;\n              &lt;div class=\"form-group text-center\"&gt;\n\n&lt;%= f.button :submit %&gt;\n\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n\n\n<p>the Push controller :</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class PushsController &lt; ApplicationController\n  before_action :authenticate_user!\n  before_action :set_post\n  before_action :set_push, only: [:edit, :update, :destroy]\n\n\n\n  def create \n    @push = @post.pushs.create(push_params)\n    @push.user_id = current_user.id\n    if @push.save\n      flash[:success] = 'Votre commande est enregist\u00e9 !'\n      redirect_to root_path \n    else    \n      flash[:alert] = \"Check the push form, something went horribly wrong.\"\n      redirect_to root_path \n    end \n  end \n\n  def update\n    if @push.update(push_params)\n      flash[:success] = 'Votre commande est enregist\u00e9 !'\n      redirect_to root_path\n    else\n      flash[:alert] = \"Check the push form, something went horribly wrong.\"\n      render 'edit'\n    end \n  end\n\n  def destroy  \n  @push = @post.pushs.find(params[:id])\n  @push.destroy\n  flash[:success] = \"Push deleted :(\"\n  redirect_to root_path\nend  \n\n\nprivate\n\n  def push_params\n    params.require(:push).permit(:user_id, :quantity, :prix2, :time, :adress2, :latitude2, :longitude2, :taked, :taked_by, :taked_at, :validated)\n  end \n\n\n  def set_post  \n    @post = Post.find(params[:post_id])\n  end  \n\n  def set_push\n    @post = Post.find(params[:post_id])\n    @push = @post.pushs.find(params[:id]) \n  end \n\nend\n</code></pre>\n\n\n\n<p>&amp; the post controller :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class PostsController &lt; ApplicationController\r\n  before_action :authenticate_user!\r\n  before_action :set_post, only: [:show, :edit, :update, :destroy]\r\n  before_action :post_admin, only: [:new, :edit, :update, :destroy]\r\n\r\n  # GET /posts\r\n  # GET /posts.json\r\n  def index\r\n    @posts = Post.all\r\n  end\r\n\r\n  # GET /posts/1\r\n  # GET /posts/1.json\r\n  def show\r\n  end\r\n\r\n  # GET /posts/new\r\n  def new\r\n   \r\n    @post = Post.new\r\n  \r\nend\r\n\r\n  # GET /posts/1/edit\r\n  def edit\r\n  end\r\n\r\n  # POST /posts\r\n  # POST /posts.json\r\n  def create\r\n    \r\n    @post = Post.new(post_params)\r\n\r\n    respond_to do |format|\r\n      if @post.save\r\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\r\n        format.json { render :show, status: :created, location: @post }\r\n      else\r\n        format.html { render :new }\r\n        format.json { render json: @post.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n   \r\n  end\r\n\r\n  # PATCH/PUT /posts/1\r\n  # PATCH/PUT /posts/1.json\r\n  def update\r\n    respond_to do |format|\r\n      if @post.update(post_params)\r\n        format.html { redirect_to @post, notice: 'Post was successfully updated.' }\r\n        format.json { render :show, status: :ok, location: @post }\r\n      else\r\n        format.html { render :edit }\r\n        format.json { render json: @post.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # DELETE /posts/1\r\n  # DELETE /posts/1.json\r\n  def destroy\r\n    @post.destroy\r\n    respond_to do |format|\r\n      format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' }\r\n      format.json { head :no_content }\r\n    end\r\n  end\r\n\r\n  private\r\n    # Use callbacks to share common setup or constraints between actions.\r\n    def set_post\r\n      @post = Post.find(params[:id])\r\n    end\r\n\r\n    def post_admin\r\n      if current_user.admin?\r\n      else \r\n        flash[:alert] = \"That post doesn't belong to you!\"\r\n        redirect_to root_path\r\n      end\r\n    end \r\n\r\n\r\n    # Never trust parameters from the scary internet, only allow the white list through.\r\n    def post_params\r\n      params.require(:post).permit(:user_id, :title, :prix, :image, :description, :user_id)\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thanks, and obviously if you have any suggestions, I am eager to learn</p>\n\n<p>Bye</p>\n"}]