[{"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496882098, "post_id": 44424304, "comment_id": 75848084, "body": "this might help <a href=\"https://stackoverflow.com/questions/4856500/show-runtime-for-each-rspec-example\">show-runtime-for-each-rspec-example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 4, "last_activity_date": 1496882428, "creation_date": 1496882428, "answer_id": 44424875, "question_id": 44424304, "link": "https://stackoverflow.com/questions/44424304/accurately-measuring-rspec-capybara-testing-time/44424875#44424875", "title": "Accurately measuring rspec/capybara testing time?", "body": "<p>Swapping out new instead of create with FactoryGirl is throwing the baby out with the bathwater. If you don't need persisted objects you can use FactoryGirl's build or build_stubbed and you will get the performance savings while still maintaining the parameter defaulting, etc.  Beyond that all the performance tuning you're doing really is swamped by the actual time it takes to do things in a browser, and asset compilation (especially on smaller numbers of tests) so you really won't save that much.  If performance is what you care about your best bet is to test as much as possible as in unit tests and then limit most of your feature tests to the happy path through your app. </p>\n\n<p>If you still want to find the slowest tests to make sure you aren't doing anything like waiting for \"not elements to exist\" rather  than \"elements to  not exist\" and optimize them, you can specify the <code>--profile</code> command line option to <code>rspec</code> or specify 'profile_examples' in your RSpec configuration <a href=\"https://relishapp.com/rspec/rspec-core/docs/configuration/profile-examples\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-core/docs/configuration/profile-examples</a></p>\n"}], "owner": {"reputation": 2015, "user_id": 4852449, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d154c373d3615bf42edf7aecaba3a9c?s=128&d=identicon&r=PG&f=1", "display_name": "cvdv", "link": "https://stackoverflow.com/users/4852449/cvdv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1496882428, "creation_date": 1496877950, "question_id": 44424304, "link": "https://stackoverflow.com/questions/44424304/accurately-measuring-rspec-capybara-testing-time", "title": "Accurately measuring rspec/capybara testing time?", "body": "<p>I'm trying to speed up tests and so far have done things like remove unnecessary database writes (using new instead of create and not using factorygirl, less feature tests, combining tests) and when I run the files individually I get a reduction in time. </p>\n\n<p>However, when I run the entire test suite I end up getting roughly the same times, and sometimes I end up even getting a slower run time on my improved tests.</p>\n\n<p>Any way to accurately measure this?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "selenium-chromedriver", "headless-browser"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1496882240, "post_id": 44424200, "comment_id": 75848115, "body": "Is this of use? <a href=\"https://medium.com/@CukeHub/headless-chrome-with-ruby-cucumber-selenium-abf6da437fd9\" rel=\"nofollow noreferrer\">medium.com/@CukeHub/&hellip;</a>"}, {"owner": {"reputation": 503, "user_id": 5652276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-bi8NVxm75Ts/AAAAAAAAAAI/AAAAAAAABmY/fJMsnxcbIts/photo.jpg?sz=128", "display_name": "Andrew Patterson", "link": "https://stackoverflow.com/users/5652276/andrew-patterson"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496887862, "post_id": 44424200, "comment_id": 75849412, "body": "Yes, it was of some use, thank you. Passing the <code>--headless</code> argument through desired_capabilities allowed me to navigate and select elements headlessly; however, this method still does not give a screenshot like normal &#39;non-headless&#39; Chrome."}, {"owner": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1496920504, "post_id": 44424200, "comment_id": 75865426, "body": "I just found a nice little <a href=\"https://sermoa.wordpress.com/2013/10/24/getting-chromedriver-to-work-with-ruby-selenium-webdriver-under-osx-mavericks/\" rel=\"nofollow noreferrer\">link</a> that deals with the same/similar problem."}, {"owner": {"reputation": 1643, "user_id": 1234098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c7d40bc2ac5fa50e6460f2ae8e6138?s=128&d=identicon&r=PG", "display_name": "boldfacedesignuk", "link": "https://stackoverflow.com/users/1234098/boldfacedesignuk"}, "edited": false, "score": 0, "creation_date": 1496920921, "post_id": 44424200, "comment_id": 75865706, "body": "I&#39;m having the same issue with Ruby. Browser launches in headless mode OK, but resulting screenshot is empty. This works fine for me in Python and JavaScript."}], "answers": [{"comments": [{"owner": {"reputation": 1643, "user_id": 1234098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c7d40bc2ac5fa50e6460f2ae8e6138?s=128&d=identicon&r=PG", "display_name": "boldfacedesignuk", "link": "https://stackoverflow.com/users/1234098/boldfacedesignuk"}, "edited": false, "score": 0, "creation_date": 1496938902, "post_id": 44440734, "comment_id": 75879550, "body": "Note for anyone running things inside a Docker container, you&#39;ll need to replace element.send_keys() with this util function:  def send_keys(d, el, str) \td.execute_script(&#39;arguments[0].setAttribute(&quot;value&quot;, arguments[1])&#39;, el, str) end  Use it like so: send_keys(driver, searchElement, &quot;WebDriver&quot;)"}, {"owner": {"reputation": 503, "user_id": 5652276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-bi8NVxm75Ts/AAAAAAAAAAI/AAAAAAAABmY/fJMsnxcbIts/photo.jpg?sz=128", "display_name": "Andrew Patterson", "link": "https://stackoverflow.com/users/5652276/andrew-patterson"}, "edited": false, "score": 0, "creation_date": 1496946354, "post_id": 44440734, "comment_id": 75883675, "body": "I&#39;m on Chrome 59 which is the most recent version, andI&#39;m still getting a blank screenshot. Also, is there a reason that you have desiredCapabilities nested twice?"}, {"owner": {"reputation": 1643, "user_id": 1234098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c7d40bc2ac5fa50e6460f2ae8e6138?s=128&d=identicon&r=PG", "display_name": "boldfacedesignuk", "link": "https://stackoverflow.com/users/1234098/boldfacedesignuk"}, "reply_to_user": {"reputation": 503, "user_id": 5652276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-bi8NVxm75Ts/AAAAAAAAAAI/AAAAAAAABmY/fJMsnxcbIts/photo.jpg?sz=128", "display_name": "Andrew Patterson", "link": "https://stackoverflow.com/users/5652276/andrew-patterson"}, "edited": false, "score": 1, "creation_date": 1496995001, "post_id": 44440734, "comment_id": 75901191, "body": "Good question, and in fact you&#39;re right we can clean this up like so:  caps = Selenium::WebDriver::Remote::Capabilities.chrome(&quot;desiredCap&zwnj;&#8203;abilities&quot; =&gt; {&quot;takesScreenshot&quot; =&gt; true}, &quot;chromeOptions&quot; =&gt; {&quot;binary&quot; =&gt; &quot;/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary&quot;, &quot;args&quot; =&gt; [&quot;--headless&quot;, &quot;--no-sandbox&quot;, &quot;--disable-gpu&quot;, &quot;--remote-debugin-port=9222&quot;, &quot;--screen-size=1200x800&quot;]})  driver = Selenium::WebDriver.for :chrome, desired_capabilities: caps"}, {"owner": {"reputation": 1643, "user_id": 1234098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c7d40bc2ac5fa50e6460f2ae8e6138?s=128&d=identicon&r=PG", "display_name": "boldfacedesignuk", "link": "https://stackoverflow.com/users/1234098/boldfacedesignuk"}, "reply_to_user": {"reputation": 503, "user_id": 5652276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-bi8NVxm75Ts/AAAAAAAAAAI/AAAAAAAABmY/fJMsnxcbIts/photo.jpg?sz=128", "display_name": "Andrew Patterson", "link": "https://stackoverflow.com/users/5652276/andrew-patterson"}, "edited": false, "score": 1, "creation_date": 1496995464, "post_id": 44440734, "comment_id": 75901469, "body": "Not sure why screenshots don&#39;t work with v59, but you can download Canary (v61) here: <a href=\"https://www.google.com/chrome/browser/canary.html\" rel=\"nofollow noreferrer\">google.com/chrome/browser/canary.html</a>  Hopefully whatever fixes are in v61 will filter into the stable release sooner rather than later."}], "tags": [], "owner": {"reputation": 1643, "user_id": 1234098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c7d40bc2ac5fa50e6460f2ae8e6138?s=128&d=identicon&r=PG", "display_name": "boldfacedesignuk", "link": "https://stackoverflow.com/users/1234098/boldfacedesignuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1496938212, "creation_date": 1496938212, "answer_id": 44440734, "question_id": 44424200, "link": "https://stackoverflow.com/questions/44424200/how-do-i-use-selenium-webdriver-on-headless-chrome/44440734#44440734", "title": "How do I use Selenium Webdriver on headless Chrome?", "body": "<p>Managed to work through this in the end via various docs, blog posts and gists.</p>\n\n<pre><code>caps = Selenium::WebDriver::Remote::Capabilities.chrome(\"desiredCapabilities\" =&gt; {\"takesScreenshot\" =&gt; true}, \"chromeOptions\" =&gt; {\"binary\" =&gt; \"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary\"})\n\ndriver = Selenium::WebDriver.for :chrome, desired_capabilities: caps, switches: %w[--headless --no-sandbox --disable-gpu --remote-debugin-port=9222 --screen-size=1200x800]\n</code></pre>\n\n<p>You need to use a very recent version of Chrome (I'm using Canary) and tell Selenium the path to the binary. You also need to set the desired capabilities for 'takesScreenshot' to true.</p>\n"}, {"tags": [], "owner": {"reputation": 2322, "user_id": 1445184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be110ccb289808429894c89202e4384b?s=128&d=identicon&r=PG", "display_name": "Lucas Caton", "link": "https://stackoverflow.com/users/1445184/lucas-caton"}, "is_accepted": false, "score": 2, "last_activity_date": 1589416679, "last_edit_date": 1589416679, "creation_date": 1498129822, "answer_id": 44697673, "question_id": 44424200, "link": "https://stackoverflow.com/questions/44424200/how-do-i-use-selenium-webdriver-on-headless-chrome/44697673#44697673", "title": "How do I use Selenium Webdriver on headless Chrome?", "body": "<p>I've written a <a href=\"https://www.lucascaton.com.br/2017/06/22/how-to-run-your-feature-specs-using-capybara-and-headless-chrome/\" rel=\"nofollow noreferrer\">blog post</a> about how to do it. Summing up:</p>\n\n<p>1) Make sure you have <strong>Chrome</strong> version <strong>57+</strong> on Linux, <strong>59+</strong> on macOS or <strong>60+</strong> on Windows;</p>\n\n<p>2) Add/update the gem <code>selenium-webdriver</code>;</p>\n\n<p>3) Make sure you\u2019re using <strong>ChromeDriver</strong> version 2.30 or higher;</p>\n\n<p>4) Add the following <strong>driver</strong> to your <code>spec_helper.rb</code> or <code>rails_helper.rb</code>:</p>\n\n<pre><code>Capybara.register_driver :chrome do |app|\n  Capybara::Selenium::Driver.new app, browser: :chrome,\n    options: Selenium::WebDriver::Chrome::Options.new(args: %w[headless disable-gpu])\nend\n\nCapybara.javascript_driver = :chrome\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 2507428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ba899a4bac3cef66b0991f4634cbec?s=128&d=identicon&r=PG", "display_name": "acowpy", "link": "https://stackoverflow.com/users/2507428/acowpy"}, "is_accepted": false, "score": 8, "last_activity_date": 1507945537, "creation_date": 1507945537, "answer_id": 46740039, "question_id": 44424200, "link": "https://stackoverflow.com/questions/44424200/how-do-i-use-selenium-webdriver-on-headless-chrome/46740039#46740039", "title": "How do I use Selenium Webdriver on headless Chrome?", "body": "<p>I found <a href=\"https://intoli.com/blog/running-selenium-with-headless-chrome-in-ruby/\" rel=\"noreferrer\">this blog post</a> useful for setting up headless chrome with selenium in ruby</p>\n\n<pre><code>require \"selenium-webdriver\"\n\n# configure the driver to run in headless mode\noptions = Selenium::WebDriver::Chrome::Options.new\noptions.add_argument('--headless')\ndriver = Selenium::WebDriver.for :chrome, options: options\n\ndriver.navigate.to \"https://www.google.com\"\n\n# resize the window and take a screenshot\ndriver.manage.window.resize_to(800, 800)\ndriver.save_screenshot \"screenshot.png\"\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 5652276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-bi8NVxm75Ts/AAAAAAAAAAI/AAAAAAAABmY/fJMsnxcbIts/photo.jpg?sz=128", "display_name": "Andrew Patterson", "link": "https://stackoverflow.com/users/5652276/andrew-patterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9061, "favorite_count": 2, "answer_count": 3, "score": 10, "last_activity_date": 1589416679, "creation_date": 1496877244, "question_id": 44424200, "link": "https://stackoverflow.com/questions/44424200/how-do-i-use-selenium-webdriver-on-headless-chrome", "title": "How do I use Selenium Webdriver on headless Chrome?", "body": "<p>I'm learning to use Selenium for basic things like taking a screenshot, scraping, and testing and would like to use it with headless Chrome, which is now stable as of Chrome 59. </p>\n\n<p>I have been able to take a screenshot using the 'selenium-webdriver' gem and chromedriver, but not headless.</p>\n\n<p>Here is the ruby script that I am running which hangs after starting to initialize the driver</p>\n\n<pre><code>require 'rubygems'\nrequire 'selenium-webdriver'\n\nSelenium::WebDriver.logger.level = :debug\np 'initializing driver'\ndriver = Selenium::WebDriver.for :chrome, switches: %w[--headless --disable-gpu --screenshot --hide-scrollbars]\np 'navigating to Google'\ndriver.navigate.to \"http://google.com\"  \ndriver.save_screenshot(\"./screen.png\")\ndriver.quit\n</code></pre>\n\n<p>and the output  from the logs:</p>\n\n<pre><code>:&gt; ruby rubytest.rb\n\"initializing driver\"\n2017-06-07 15:55:43 DEBUG Selenium Executing Process \n\n[\"/Users/name/Documents/scrapings/python/env/bin/chromedriver\", \"--port=9515\"]\n2017-06-07 15:55:43 DEBUG Selenium polling for socket on [\"127.0.0.1\", 9515]\nStarting ChromeDriver 2.29.461585 (0be2cd95f834e9ee7c46bcc7cf405b483f5ae83b) on port 9515\nOnly local connections are allowed.\n2017-06-07 15:55:43 INFO Selenium -&gt; POST session\n2017-06-07 15:55:43 INFO Selenium    &gt;&gt;&gt; http://127.0.0.1:9515/session | {\"desiredCapabilities\":{\"browserName\":\"chrome\",\"version\":\"\",\"platform\":\"ANY\",\"javascriptEnabled\":true,\"cssSelectorsEnabled\":true,\"takesScreenshot\":false,\"nativeEvents\":false,\"rotatable\":false,\"chromeOptions\":{\"args\":[\"--headless\",\"--disable-gpu\",\"--screenshot\",\"--hide-scrollbars\"]}}}\n2017-06-07 15:55:43 DEBUG Selenium      &gt; {\"Accept\"=&gt;\"application/json\", \"Content-Type\"=&gt;\"application/json; charset=utf-8\", \"Content-Length\"=&gt;\"284\"}\n[RUBY BACKTRACE TO DRIVER INITIALIZATION]\n</code></pre>\n\n<p>I have tried using the JavaScript and Python drivers with similar code and nothing works. When I try this with Python, the error message is </p>\n\n<pre><code>WebDriverException: Message: unknown error: Chrome failed to start: exited abnormally\n  (Driver info: chromedriver=2.29.461585 (0be2cd95f834e9ee7c46bcc7cf405b483f5ae83b),platform=Mac OS X 10.12.5 x86_64)\n</code></pre>\n"}, {"tags": ["ruby", "sass", "scss-lint"], "answers": [{"tags": [], "owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "is_accepted": false, "score": 0, "last_activity_date": 1497047889, "creation_date": 1497047889, "answer_id": 44467552, "question_id": 44423695, "link": "https://stackoverflow.com/questions/44423695/scss-custom-linter-not-inside-mixins-nor-functions/44467552#44467552", "title": "SCSS Custom Linter not inside mixins nor functions", "body": "<p>This is a viable solution:</p>\n\n<pre><code>module SCSSLint\n  # Reports the use of !default at the end of variable declarations.\n  class Linter::DefaultRule &lt; Linter\n    include LinterRegistry\n\n    def visit_function(node)\n      return true\n    end\n\n    def visit_variable(node)\n      return if source_from_range(node.source_range).include?('!default')\n\n      return unless node_ancestor(node, 2).nil?\n\n      add_lint(node, '!default should be used')\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1497047889, "creation_date": 1496874012, "last_edit_date": 1497042010, "question_id": 44423695, "link": "https://stackoverflow.com/questions/44423695/scss-custom-linter-not-inside-mixins-nor-functions", "title": "SCSS Custom Linter not inside mixins nor functions", "body": "<p>I have this linter rule, that verifies that for every variable there is a use of <code>!default</code>:</p>\n\n<pre><code>module SCSSLint\n  # Reports the use of !default in properties.\n  class Linter::DefaultRule &lt; Linter\n    include LinterRegistry\n\n    def visit_variable(node)\n      return if source_from_range(node.source_range).include?('!default')\n\n      add_lint(node, '!default should be used')\n    end\n  end\nend\n</code></pre>\n\n<p>And I want it to only check global variables, and not variables inside a <code>function</code> or a <code>mixin</code>. </p>\n\n<p>How can I make it ignore non-globally scoped variables?</p>\n"}, {"tags": ["ruby", "file", "rubygems", "faker"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 5, "creation_date": 1496874099, "post_id": 44423528, "comment_id": 75845829, "body": "It&#39;s possible to overwrite text in a text file, but not to insert text without shifting other text in the file. The standard way is to create a new file with the inserted text. You can then optionally delete the original file and rename the new file to the name of the original file. Is there some reason you don&#39;t want to do the latter?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1496876543, "post_id": 44423528, "comment_id": 75846622, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and their linked pages. Your question is off-topic: You&#39;re asking us to write a tutorial explaining the issues, and how to write it, however, that information already exists in multiple places on SO. &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot; is important."}, {"owner": {"reputation": 37, "user_id": 7571813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e820b5e909e4d68e64f7e281bd9fed4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby_Learner", "link": "https://stackoverflow.com/users/7571813/ruby-learner"}, "edited": false, "score": 0, "creation_date": 1496877081, "post_id": 44423528, "comment_id": 75846784, "body": "I did try to find it on &#39;SO&#39; but all the questions spoke about writing in a file or replacing data in a file, but I dint find anything which talked about entering data in a specific position. Hence posted this."}, {"owner": {"reputation": 37, "user_id": 7571813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e820b5e909e4d68e64f7e281bd9fed4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby_Learner", "link": "https://stackoverflow.com/users/7571813/ruby-learner"}, "edited": false, "score": 0, "creation_date": 1496877262, "post_id": 44423528, "comment_id": 75846844, "body": "I know that we can read strings in a file for eg. File.open(file_path, &#39;r&#39;) do |f|       f.readlines.each do |row|         x = row[4, 2].strip In the similar way I want to write strings in line 4 with two characters."}], "answers": [{"comments": [{"owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "reply_to_user": {"reputation": 37, "user_id": 7571813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e820b5e909e4d68e64f7e281bd9fed4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby_Learner", "link": "https://stackoverflow.com/users/7571813/ruby-learner"}, "edited": false, "score": 0, "creation_date": 1497296066, "post_id": 44476220, "comment_id": 76008056, "body": "@Ruby_Learner: No problem! Please also see <a href=\"https://stackoverflow.com/help/someone-answers\">this help center article</a>. Thanks!"}], "tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": true, "score": 1, "last_activity_date": 1497116293, "creation_date": 1497116293, "answer_id": 44476220, "question_id": 44423528, "link": "https://stackoverflow.com/questions/44423528/writing-in-specific-position-in-a-text-file-using-ruby/44476220#44476220", "title": "writing in specific position in a text file using ruby", "body": "<p>Here's a sample script that takes two arguments and writes a modified copy of the first file's contents to the second file:</p>\n\n<pre><code>require 'faker'\n\ninput  = File.open(ARGV[0], 'r')\n\nlines = input.readlines\nlines[0].gsub!(/^(.{0,10})/, '\\1' + Faker::Base.numerify('###').to_s)\n\noutput = File.open(ARGV[1], 'w')\nlines.each do |line|\n  output.write(line)\nend\n</code></pre>\n\n<p>If you have an input file that looks like:</p>\n\n<pre><code>12345678901234567890\n          ^^^ fake data\n</code></pre>\n\n<p>the output might look like:</p>\n\n<pre><code>12345678909451234567890\n          ^^^ fake data\n</code></pre>\n\n<p>Since I opened the output file after reading the input file, you can pass the same file name as both the first and the second argument. That isn't exactly inserting the string into the file, but it's as close as you'll get.</p>\n\n<p>The key line is:</p>\n\n<pre><code>lines[0].gsub!(/^(.{0,10})/, '\\1' + Faker::Base.numerify('###').to_s)\n</code></pre>\n\n<p>It takes the fist line and substitutes in place a random 3-digit integer. If there are fewer than 10 characters in the first line, it'll append the random data to the end of the line. If you'd prefer to not substitute, you might want to remove the beginning of the range in the regex:</p>\n\n<pre><code>/^(.{10})/\n</code></pre>\n\n<p>Or maybe do something else <code>if lines[0].length &lt; 10</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 7571813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e820b5e909e4d68e64f7e281bd9fed4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby_Learner", "link": "https://stackoverflow.com/users/7571813/ruby-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 44476220, "answer_count": 1, "score": 0, "last_activity_date": 1497116293, "creation_date": 1496873029, "question_id": 44423528, "link": "https://stackoverflow.com/questions/44423528/writing-in-specific-position-in-a-text-file-using-ruby", "title": "writing in specific position in a text file using ruby", "body": "<p>I want to insert data in specific positions in a text file, like in line 1 starting from position 10, how can I do it using ruby?\nI also want to pass fake data into this file using fakker gem or in any other way possible. Like sending phone number, name, SSN etc. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1746, "user_id": 3543371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41VUZ.jpg?s=128&g=1", "display_name": "jbielick", "link": "https://stackoverflow.com/users/3543371/jbielick"}, "edited": false, "score": 0, "creation_date": 1496871711, "post_id": 44423032, "comment_id": 75844893, "body": "If you do not have the ability to view the code or open a shell on the server, please clarify that in your question\u2014that you would like to tell which major version of rails the application is using from a request or webpage and cannot access the code or server."}, {"owner": {"reputation": 1019, "user_id": 4663917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6624bc240dea43cc2312b733ad03238e?s=128&d=identicon&r=PG", "display_name": "Papaya Labs", "link": "https://stackoverflow.com/users/4663917/papaya-labs"}, "reply_to_user": {"reputation": 1746, "user_id": 3543371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41VUZ.jpg?s=128&g=1", "display_name": "jbielick", "link": "https://stackoverflow.com/users/3543371/jbielick"}, "edited": false, "score": 0, "creation_date": 1496871949, "post_id": 44423032, "comment_id": 75844982, "body": "Ok I change the question. Sorry if I was not clear"}, {"owner": {"reputation": 1019, "user_id": 4663917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6624bc240dea43cc2312b733ad03238e?s=128&d=identicon&r=PG", "display_name": "Papaya Labs", "link": "https://stackoverflow.com/users/4663917/papaya-labs"}, "reply_to_user": {"reputation": 1746, "user_id": 3543371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41VUZ.jpg?s=128&g=1", "display_name": "jbielick", "link": "https://stackoverflow.com/users/3543371/jbielick"}, "edited": false, "score": 0, "creation_date": 1496872205, "post_id": 44423032, "comment_id": 75845082, "body": "I just want to know if is not rails 2.3. That is enough."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1496895177, "post_id": 44423032, "comment_id": 75851051, "body": "No easy way, because of reverse-proxy."}], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 4663917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6624bc240dea43cc2312b733ad03238e?s=128&d=identicon&r=PG", "display_name": "Papaya Labs", "link": "https://stackoverflow.com/users/4663917/papaya-labs"}, "edited": false, "score": 0, "creation_date": 1496871084, "post_id": 44423097, "comment_id": 75844660, "body": "I need something without enter to the VPS."}, {"owner": {"reputation": 1019, "user_id": 4663917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6624bc240dea43cc2312b733ad03238e?s=128&d=identicon&r=PG", "display_name": "Papaya Labs", "link": "https://stackoverflow.com/users/4663917/papaya-labs"}, "edited": false, "score": 0, "creation_date": 1496871131, "post_id": 44423097, "comment_id": 75844677, "body": "Something that you can see just looking some behavior of the web page."}, {"owner": {"reputation": 1019, "user_id": 4663917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6624bc240dea43cc2312b733ad03238e?s=128&d=identicon&r=PG", "display_name": "Papaya Labs", "link": "https://stackoverflow.com/users/4663917/papaya-labs"}, "edited": false, "score": 0, "creation_date": 1496871222, "post_id": 44423097, "comment_id": 75844722, "body": "There is a big difference between rail 2.3 and rails 5. There must be something"}], "tags": [], "owner": {"reputation": 1746, "user_id": 3543371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41VUZ.jpg?s=128&g=1", "display_name": "jbielick", "link": "https://stackoverflow.com/users/3543371/jbielick"}, "is_accepted": false, "score": 0, "last_activity_date": 1496870971, "creation_date": 1496870971, "answer_id": 44423097, "question_id": 44423032, "link": "https://stackoverflow.com/questions/44423032/how-to-know-if-i-am-using-rails-2-3-in-production/44423097#44423097", "title": "How to know if I am using Rails 2.3 in production?", "body": "<p>Look for the rails entry in the <code>Gemfile.lock</code>. It will look like this </p>\n\n<pre><code>rails (5.1.1)\n  actioncable (= 5.1.1)\n  ...\n</code></pre>\n\n<p>The number in parentheses will indicate the version the application is using.</p>\n"}, {"tags": [], "owner": {"reputation": 34077, "user_id": 1249, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ed9686d6910478914966ec99bbcaa069?s=128&d=identicon&r=PG", "display_name": "Adam Lassek", "link": "https://stackoverflow.com/users/1249/adam-lassek"}, "is_accepted": false, "score": 0, "last_activity_date": 1496873808, "creation_date": 1496873808, "answer_id": 44423658, "question_id": 44423032, "link": "https://stackoverflow.com/questions/44423032/how-to-know-if-i-am-using-rails-2-3-in-production/44423658#44423658", "title": "How to know if I am using Rails 2.3 in production?", "body": "<p>The way you determine the version of a Rails application is by examining the sourcecode. There is no other way that you can depend on.</p>\n\n<p>Also, if the VPS contains the only copy of the source you have larger problems to consider than what version of Rails it is.</p>\n"}], "owner": {"reputation": 1019, "user_id": 4663917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6624bc240dea43cc2312b733ad03238e?s=128&d=identicon&r=PG", "display_name": "Papaya Labs", "link": "https://stackoverflow.com/users/4663917/papaya-labs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1496895211, "creation_date": 1496870712, "last_edit_date": 1496895211, "question_id": 44423032, "link": "https://stackoverflow.com/questions/44423032/how-to-know-if-i-am-using-rails-2-3-in-production", "title": "How to know if I am using Rails 2.3 in production?", "body": "<p>I have a client that is running a Linux VPS with a Ruby on Rails site. There is a way to prove that the site is not running rails 2.3.14 without enter to the VPS? Something like to see if have turbolinks for example. Because turbolinks not exist in rails 2.3.14. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1496868888, "post_id": 44422516, "comment_id": 75843698, "body": "Do not include the slash in your route definitions (use <code>&#39;help&#39;</code> and <code>&#39;home&#39;</code> instead). Also, run <code>rake routes</code> to view all your routes."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496869060, "post_id": 44422516, "comment_id": 75843773, "body": "Can you add your controller and your whole <code>routes.rb</code>?"}, {"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496869569, "post_id": 44422516, "comment_id": 75843993, "body": "@Sebasti&#225;nPalma My application_controller only has a hello function"}, {"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "reply_to_user": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1496869600, "post_id": 44422516, "comment_id": 75844012, "body": "@mmichael I tried using &#39;help&#39; instead but I still got the same error"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496869813, "post_id": 44422516, "comment_id": 75844100, "body": "Anyways, I&#39;ve tested the code and it works, adding all the code involved helps to &quot;debug&quot;."}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1496869896, "post_id": 44422516, "comment_id": 75844140, "body": "@OuissalBenameur Could you please post the output from <code>rake routes</code>?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496869957, "post_id": 44422516, "comment_id": 75844161, "body": "<code>get  &#39;&#47;help&#39;,    to: &#39;pages#help&#39;, as: :help</code> ... does this really not work?"}, {"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "reply_to_user": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1496870058, "post_id": 44422516, "comment_id": 75844205, "body": "@mmichael I posted it"}, {"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496870076, "post_id": 44422516, "comment_id": 75844209, "body": "@maxpleaner Yes it doesn&#39;t"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496870265, "post_id": 44422516, "comment_id": 75844295, "body": "What about <code>get &#39;&#47;help&#39;</code> in your test?"}, {"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496870443, "post_id": 44422516, "comment_id": 75844364, "body": "@Sebasti&#225;nPalma it gives the same error, get :help gives no error"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496871053, "post_id": 44422516, "comment_id": 75844644, "body": "remove the slash from the route name"}, {"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496871681, "post_id": 44422516, "comment_id": 75844883, "body": "@maxpleaner I removed it and still got the same error, it could have something to do with my rails version?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496885150, "post_id": 44422516, "comment_id": 75848758, "body": "It&#39;d be great to see a repo."}, {"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496921451, "post_id": 44422516, "comment_id": 75866066, "body": "@Sebasti&#225;nPalma  <a href=\"https://github.com/Ouissalb/MOOC-with-Ruby-on-Rails\" rel=\"nofollow noreferrer\">github.com/Ouissalb/MOOC-with-Ruby-on-Rails</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "edited": false, "score": 0, "creation_date": 1496934719, "post_id": 44437632, "comment_id": 75876563, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1496931778, "last_edit_date": 1496931778, "creation_date": 1496929909, "answer_id": 44437632, "question_id": 44422516, "link": "https://stackoverflow.com/questions/44422516/usage-of-path-gives-a-no-route-matches-error/44437632#44437632", "title": "Usage of _path gives a &quot;No route matches..&quot; error", "body": "<p>I've ran your tests using the repo, Rails 4.2.4, Minitest 5.10.2 and the only one test that doesn't pass is the one using <code>get help_path</code>. I put only the 3 tests in order to shorten the post:</p>\n\n<pre><code>PagesControllerTest#test_should_get_help_using_\"get_:help\" = 0.39 s = .\nPagesControllerTest#test_should_get_help_using_\"get_help_path\" = 0.00 s = E\nPagesControllerTest#test_should_get_help_using_\"get_'help'\" = 0.01 s = .\n\nFinished in 0.405330s, 7.4014 runs/s, 9.8685 assertions/s.\n\n  1) Error:\nPagesControllerTest#test_should_get_help_using_\"get_help_path\":\nActionController::UrlGenerationError: No route matches {:action=&gt;\"/help\", :controller=&gt;\"pages\"}\n    test/controllers/pages_controller_test.rb:70:in `block in &lt;class:PagesControllerTest&gt;'\n\n3 runs, 4 assertions, 0 failures, 1 errors, 0 skips\n</code></pre>\n\n<p>What I did:</p>\n\n<pre><code>$ rm -rf Gemfile.lock (because of a json -v 1.8.1 gem error)\n$ bundle\n$ rake db:migrate\n$ rake db:migrate RAILS_ENV=test\n$ rake test test/controllers/pages_controller_test.rb -v\n</code></pre>\n\n<p>What you can use to make the test work with <code>help_path</code> as the route to test specifying the controller and action is to use:</p>\n\n<blockquote>\n  <p><a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Assertions/RoutingAssertions.html#method-i-assert_routing\" rel=\"nofollow noreferrer\"><code>assert_routing</code></a> asserts that the routing of the given path was handled correctly and\n  that the parsed options (given in the expected_options hash) match\n  path. Basically, it asserts that Rails recognizes the route given by\n  expected_options.</p>\n</blockquote>\n\n<p>Or:</p>\n\n<blockquote>\n  <p><a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Assertions/RoutingAssertions.html#method-i-assert_recognizes\" rel=\"nofollow noreferrer\"><code>assert_recognizes</code></a> asserts that path and options match both ways; in other words, it\n  verifies that path generates options and then that options generates\n  path. This essentially combines assert_recognizes and assert_generates\n  into one step.</p>\n</blockquote>\n\n<p>Like:</p>\n\n<pre><code>test \"should get help using assert_recognizes and help_path\" do\n  assert_recognizes({controller: 'pages', action: 'help'}, help_path)\n  assert_response :success\nend\n\ntest \"should get help using assert_routing and help_path\" do\n  assert_routing help_path, controller: 'pages', action: 'help'\n  assert_response :success\nend\n</code></pre>\n"}], "owner": {"reputation": 1152, "user_id": 5720436, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9pnl6.png?s=128&g=1", "display_name": "Ouissal Benameur", "link": "https://stackoverflow.com/users/5720436/ouissal-benameur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 1, "accepted_answer_id": 44437632, "answer_count": 1, "score": 3, "last_activity_date": 1496931778, "creation_date": 1496868564, "last_edit_date": 1496921673, "question_id": 44422516, "link": "https://stackoverflow.com/questions/44422516/usage-of-path-gives-a-no-route-matches-error", "title": "Usage of _path gives a &quot;No route matches..&quot; error", "body": "<p>I am following a tutorial of Rails and I have a few pages that I am adding some tests for.</p>\n\n<p>I am trying to use help_path instead of :help in my pages_controller_test :</p>\n\n<pre><code>test \"should get help\" do\n  get help_path\n  assert_response :success\n  assert_select \"title\", \"Help | #{@base_title}\"\nend\n</code></pre>\n\n<p>I added this line in my routes.rb file :</p>\n\n<pre><code> get  '/help',    to: 'pages#help'\n</code></pre>\n\n<p>But I get this error :</p>\n\n<blockquote>\n  <p>1) Error:\n  PagesControllerTest#test_should_get_help:\n  ActionController::UrlGenerationError: No route matches {:action=>\"/help\", :controller=>\"pages\"}\n      test/controllers/pages_controller_test.rb:62:in `block in '</p>\n</blockquote>\n\n<p>I have tried a few solutions but none of them solved my issue.\nI've also tried using this line instead :</p>\n\n<pre><code>match '/home' =&gt; 'main_pages#home', :as =&gt; :home\n</code></pre>\n\n<p>But it didn't work either.</p>\n\n<p>My rails version is : 4.2.4\nMy Ruby version is : ruby 2.1.9p490 (2016-03-30 revision 54437) [x86_64-linux-gnu]</p>\n\n<p>Output of $rake routes :</p>\n\n<pre><code> Prefix Verb URI Pattern          Controller#Action\n root GET  /                    pages#home\n help GET  /help(.:format)      pages#help\n courses GET  /courses(.:format)   pages#courses\n programs GET  /programs(.:format)  pages#programs\n schools GET  /schools(.:format)   pages#schools\n dashboard GET  /dashboard(.:format) pages#dashboard\n profile GET  /profile(.:format)   pages#profile\n account GET  /account(.:format)   pages#account\n signout GET  /signout(.:format)   pages#signout\n</code></pre>\n\n<p>EDIT :\nI can use help_path .. etc in my html code without any issue, but in the test it gives that error.\nThank you :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1496868207, "post_id": 44422055, "comment_id": 75843360, "body": "You shouldn&#39;t have to do it manually if it&#39;s in your <code>.bashrc</code> or <code>.bash_profile</code> file, so maybe see why that isn&#39;t loading."}, {"owner": {"reputation": 346, "user_id": 2457435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998a18446f06a200a4e66460a82f6d1?s=128&d=identicon&r=PG", "display_name": "01010011 01000010", "link": "https://stackoverflow.com/users/2457435/01010011-01000010"}, "edited": false, "score": 0, "creation_date": 1496869599, "post_id": 44422055, "comment_id": 75844011, "body": "Check this link out, specifically the part about changing your shell to run commands as &quot;login shell&quot;. <a href=\"https://rvm.io/integration/gnome-terminal\" rel=\"nofollow noreferrer\">rvm.io/integration/gnome-terminal</a> This is an odd rvm thing that always gets me on fresh ubuntu installs."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496870922, "post_id": 44422055, "comment_id": 75844583, "body": "This seems wierd, why is the generator running when you do <code>rails s</code>?"}, {"owner": {"reputation": 566, "user_id": 8081446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLOaP.jpg?s=128&g=1", "display_name": "dennispreston", "link": "https://stackoverflow.com/users/8081446/dennispreston"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496932026, "post_id": 44422055, "comment_id": 75874417, "body": "@maxpleaner I know! It treats it like <code>rails new s</code> and creates a new app. A serious WTF there..."}, {"owner": {"reputation": 566, "user_id": 8081446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLOaP.jpg?s=128&g=1", "display_name": "dennispreston", "link": "https://stackoverflow.com/users/8081446/dennispreston"}, "reply_to_user": {"reputation": 346, "user_id": 2457435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998a18446f06a200a4e66460a82f6d1?s=128&d=identicon&r=PG", "display_name": "01010011 01000010", "link": "https://stackoverflow.com/users/2457435/01010011-01000010"}, "edited": false, "score": 0, "creation_date": 1496932057, "post_id": 44422055, "comment_id": 75874439, "body": "@0101001101000010 Unfortunately I am running Bash on Ubuntu on Windows... I don&#39;t have those options..."}, {"owner": {"reputation": 566, "user_id": 8081446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLOaP.jpg?s=128&g=1", "display_name": "dennispreston", "link": "https://stackoverflow.com/users/8081446/dennispreston"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1496932097, "post_id": 44422055, "comment_id": 75874464, "body": "@tadman thanks for the answer, but I&#39;m too much of a bash n00b to follow your advice..."}, {"owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "edited": false, "score": 0, "creation_date": 1516113678, "post_id": 44422055, "comment_id": 83551377, "body": "@dennispreston, basically, if that&#39;s the answer just do <code>sudo vim .bashrc</code> and add it. You do that by pressing the <code>i</code> on your keyboard, which stands for insert. Once, you have added that script, you do <code>esc</code> + <code>wq</code> which stands for escape + save and quit."}], "owner": {"reputation": 566, "user_id": 8081446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLOaP.jpg?s=128&g=1", "display_name": "dennispreston", "link": "https://stackoverflow.com/users/8081446/dennispreston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496866674, "creation_date": 1496866674, "question_id": 44422055, "link": "https://stackoverflow.com/questions/44422055/rails-server-fails-to-run-when-i-close-and-reopen-bash-ruby", "title": "Rails server fails to run when I close and reopen bash (ruby)", "body": "<p>On a fresh run of Bash (on Ubuntu on Windows), if I try <code>rails s</code> I get this...</p>\n\n<pre><code>/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': iconv will be deprecated in the future, use String#encode instead.\n/var/lib/gems/1.9.1/gems/rails-2.3.4/lib/rails_generator/generators/applications/app/app_generator.rb:7: Use RbConfig instead of obsolete and deprecated Config.\n      exists\n      exists  app/controllers\n      exists  app/helpers\n      exists  app/models\n      exists  app/views/layouts\n      exists  config/environments\n      exists  config/initializers\n      exists  config/locales\n      exists  db\n      exists  doc\n      exists  lib\n      exists  lib/tasks\n      exists  log\n      exists  public/images\n      exists  public/javascripts\n      exists  public/stylesheets\n      exists  script/performance\n      exists  test/fixtures\n      exists  test/functional\n      exists  test/integration\n      exists  test/performance\n      exists  test/unit\n      exists  vendor\n      exists  vendor/plugins\n      exists  tmp/sessions\n      exists  tmp/sockets\n      exists  tmp/cache\n      exists  tmp/pids\n   identical  Rakefile\n   identical  README\n   identical  app/controllers/application_controller.rb\n   identical  app/helpers/application_helper.rb\n   identical  config/database.yml\n   identical  config/routes.rb\n   identical  config/locales/en.yml\n   identical  db/seeds.rb\n   identical  config/initializers/backtrace_silencers.rb\n   identical  config/initializers/inflections.rb\n   identical  config/initializers/mime_types.rb\n   identical  config/initializers/new_rails_defaults.rb\noverwrite config/initializers/session_store.rb? (enter \"h\" for help) [Ynaqdh]\n</code></pre>\n\n<p>It's no problem, I just put <code>source ~/.rvm/scripts/rvm</code> and it's sorted... but I don't really want to have to do that every time...</p>\n\n<p>This is my .bashrc file...</p>\n\n<pre><code># ~/.bashrc: executed by bash(1) for non-login shells. see /usr/share/doc/bash/examples/startup-files (in the\n# package bash-doc) for examples If not running interactively, don't do anything\ncase $- in\n    i) ;;\n      *) return;; esac\n# don't put duplicate lines or lines starting with space in the history. See bash(1) for more options\nHISTCONTROL=ignoreboth\n# append to the history file, don't overwrite it\nshopt -s histappend\n# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)\nHISTSIZE=1000 HISTFILESIZE=2000\n# check the window size after each command and, if necessary, update the values of LINES and COLUMNS.\nshopt -s checkwinsize\n# If set, the pattern \"**\" used in a pathname expansion context will match all files and zero or more\n#directories and subdirectories. shopt -s globstar\n# make less more friendly for non-text input files, see lesspipe(1)\n[ -x /usr/bin/lesspipe ] &amp;&amp; eval \"$(SHELL=/bin/sh lesspipe)\"\n# set variable identifying the chroot you work in (used in the prompt below)\nif [ -z \"${debian_chroot:-}\" ] &amp;&amp; [ -r /etc/debian_chroot ]; then\n    debian_chroot=$(cat /etc/debian_chroot)\nfi\n# set a fancy prompt (non-color, unless we know we \"want\" color)\ncase \"$TERM\" in\n    xterm-color) color_prompt=yes;; esac\n# uncomment for a colored prompt, if the terminal has the capability; turned off by default to not distract the\n#user: the focus in a terminal window should be on the output of commands, not on the prompt\n#force_color_prompt=yes\nif [ -n \"$force_color_prompt\" ]; then\n    if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then\n# We have color support; assume it's compliant with Ecma-48 (ISO/IEC-6429). (Lack of such support is extremely\n# rare, and such a case would tend to support setf rather than setaf.)\ncolor_prompt=yes\n    else color_prompt=\n    fi\nfi\nif [ \"$color_prompt\" = yes ]; then\n    PS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ '\nelse\n    PS1='${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ '\nfi\nunset color_prompt force_color_prompt\n# If this is an xterm set the title to user@host:dir\ncase \"$TERM\" in xterm*|rxvt*)\n    PS1=\"\\[\\e]0;${debian_chroot:+($debian_chroot)}\\u@\\h: \\w\\a\\]$PS1\"\n    ;; *)\n    ;; esac\n# enable color support of ls and also add handy aliases\nif [ -x /usr/bin/dircolors ]; then\n    test -r -/.dircolors &amp;&amp; eval \"$(dircolors -b -/.dircolors)\" || eval \"$(dircolors -b)\"\n    alias ls='ls --color=auto'\n    #alias dir='dir --color=auto' alias vdir='vdir --color=auto'\n    alias grep='grep --color=auto'\n    alias fgrep='fgrep --color=auto'\n    alias egrep='egrep --color=auto'\nfi\n# some more ls aliases\nalias ll='ls -alF' alias la='ls -A' alias l='ls -CF'\n# Add an \"alert\" alias for long running commands.  Use like so:\n#   sleep 10; alert\nalias alert='notify-send --urgency=low -i \"$([ $? = 0 ] &amp;&amp; echo terminal || echo error)\" \"$(history|tail -n1|sed\n-e '\\''s/^\\s*[0-9]\\+\\s*//;s/[;&amp;|]\\s*alert$//'\\'')\"'\n# Alias definitions. You may want to put all your additions into a separate file like ~/.bash_aliases, instead\n# of adding them here directly. See /usr/share/doc/bash-doc/examples in the bash-doc package.\nif [ -f ~/.bash_aliases ]; then\n    . ~/.bash_aliases\nfi\n# enable programmable completion features (you don't need to enable this, if it's already enabled in\n# /etc/bash.bashrc and /etc/profile sources /etc/bash.bashrc).\nif ! shopt -oq posix; then\n  if [ -f /usr/share/bash-completion/bash_completion ]; then\n    . /usr/share/bash-completion/bash_completion\n  elif [ -f /etc/bash_completion ]; then\n    . /etc/bash_completion\n  fi\nfi\n\nexport PATH=\"$HOME/.linuxbrew/bin:$PATH\" export MANPATH=\"$HOME/.linuxbrew/share/man:$MANPATH\" export\nINFOPATH=\"$HOME/.linuxbrew/share/info:$INFOPATH\" export NVM_DIR=\"$HOME/.nvm\" [ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; \\.\n\"$NVM_DIR/nvm.sh\" # This loads nvm [ -s \"$NVM_DIR/bash_completion\" ] &amp;&amp; \\. \"$NVM_DIR/bash_completion\" # This\nloads nvm bash_completion export PATH=\"$HOME/.yarn/bin:$PATH\"\nexport FACEBOOK_APP_ID=AsIfIWouldPostThisOnHere\nexport FACEBOOK_APP_SECRET=AsIfIWouldPostThisOnHere\n\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" # Load RVM into a shell session as a function\n\n# Add RVM to PATH for scripting. Make sure this is the last PATH variable change.\nexport PATH=\"$PATH:$HOME/.rvm/bin\"\n</code></pre>\n\n<p>And .bash_profile</p>\n\n<pre><code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\"\n\nexport FACEBOOK_APP_ID=ObviouslyNotTheRealIdFromMyFile\nexport FACEBOOK_APP_SECRET=ItsASecret\n\nsource ~/.profile\n</code></pre>\n\n<p>I'm new to Bash on Ubuntu on Windows so I'm probably doing something stupid as I've cobbled together bits of information for different sites. Any help would be appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid", "aggregation-framework"], "owner": {"reputation": 921, "user_id": 3998467, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/K1FeG.jpg?s=128&g=1", "display_name": "arthur-net", "link": "https://stackoverflow.com/users/3998467/arthur-net"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496917540, "creation_date": 1496864466, "last_edit_date": 1496917540, "question_id": 44421498, "link": "https://stackoverflow.com/questions/44421498/ruby-mongodb-mongoid-merge-grouped-records", "title": "Ruby Mongodb / Mongoid merge grouped records", "body": "<p>Here is my table/collection \"records\" in the Mongodb\n<a href=\"https://i.stack.imgur.com/cDNw2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cDNw2.png\" alt=\"enter image description here\"></a></p>\n\n<p>I need to get this array of data, grouped by unique value of field_1 and merged values from the fields (field_2, field_3, field_4) </p>\n\n<pre><code>[\n  {field_1 =&gt; value_1, field_2 =&gt; value_2, field_3 =&gt; value_3, field_4 = value_4},\n  {field_1 =&gt; value_N, field_2 =&gt; value_2, field_3 =&gt; value_3, field_4 = value_4}\n]\n</code></pre>\n\n<p>I am using Ruby on Rails and mongoid, with mongoid I can do somthing like this</p>\n\n<pre><code>uniq_filed_values = db.records.distinct(:field_1)\nmerged_results = []\nuniq_field_values.each do |value|\n   merged_result = db.records.where(\"field_1\" =&gt; value).map{|v| v.attributes}.inject(&amp;:merge)\n   merged_results &lt;&lt; merged_result\nend \n</code></pre>\n\n<p>I would like to know if there is any way to do the same thing within the database/Mongodb or mongoid without using so much ruby. I am looking for the possible solutions with Mongodb map/reduce or aggregation? Or maybe there is a better solution for my sample? </p>\n\n<p>P.S Please note - there are more than 1 000 000 records in this table/collection.</p>\n\n<p>Thanks for helping!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1496862819, "post_id": 44420980, "comment_id": 75840406, "body": "you can try using a gem like paperclip to handle your attachments"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1496864246, "post_id": 44420980, "comment_id": 75841281, "body": "If you expect to get any help, you should probably add to your question, (1) what your urls look like, and (2) how you&#39;re trying to display on the index page (i.e., your <code>image_tag</code>)."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496881745, "post_id": 44420980, "comment_id": 75848001, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; along with their linked pages. &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot; and &quot;<a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">Writing the perfect question</a>&quot; will help too. We need a lot more information and have no idea what you tried."}], "owner": {"reputation": 9, "user_id": 8127548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24ca412fcb9f8ab4f6cd1a6803475aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mahmudul islam", "link": "https://stackoverflow.com/users/8127548/mahmudul-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496862700, "creation_date": 1496862700, "question_id": 44420980, "link": "https://stackoverflow.com/questions/44420980/how-i-seed-ruby-on-rails-image-data-and-print-it-on-html-page", "title": "how i seed ruby on rails image data and print it on html page", "body": "<p>I want to insert image data on seeds.rb and print it on my index page.How it possible?</p>\n\n<p>I tried on seeds.rb.It stores image path but can not find the image and not print it on index page </p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 744, "user_id": 1227012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/10853c3b2a875547b7233f25cd56fcb4?s=128&d=identicon&r=PG", "display_name": "David Nedrow", "link": "https://stackoverflow.com/users/1227012/david-nedrow"}, "edited": false, "score": 0, "creation_date": 1496951858, "post_id": 44420885, "comment_id": 75886607, "body": "Oh, I see something else. The <code>slather</code> in slather/ruby/2.0.0/bin is some type off wrapper around slather."}], "owner": {"reputation": 744, "user_id": 1227012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/10853c3b2a875547b7233f25cd56fcb4?s=128&d=identicon&r=PG", "display_name": "David Nedrow", "link": "https://stackoverflow.com/users/1227012/david-nedrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496934279, "creation_date": 1496862406, "last_edit_date": 1496934279, "question_id": 44420885, "link": "https://stackoverflow.com/questions/44420885/how-do-i-use-a-gem-that-has-been-bundled-as-a-standalone", "title": "How do I use a gem that has been bundled as a standalone?", "body": "<p>I don't have control over the gems installed on our Jenkins CI server, so I need to have <a href=\"https://github.com/SlatherOrg/slather\" rel=\"nofollow noreferrer\">slather</a> runnable out of our source dir. </p>\n\n<p>I used \"bundle --standalone\" to package slather into a self-contained unit with all of its dependencies.</p>\n\n<p>Now I'm stuck with how I can call slather from another Ruby script. Slather is an app that generates coverage reports from LLVM profdata files. I now have the directory structure shown below, with the dependencies properly installed and slather in the ruby bin directory.</p>\n\n<p>I need to call slather from another directory. I've tried the following with no luck...</p>\n\n<pre><code>ruby -r ../../slather/bundler/setup.rb ../../slather/ruby/2.0.0/bin/slather\n</code></pre>\n\n<p>This yields the following error:</p>\n\n<pre><code>ruby -r ../../slather/bundler/setup.rb ../../slather/ruby/2.0.0/bin/slather\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'slather' (&gt;= 0) among 19 total gem(s) (Gem::LoadError)\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\nfrom ../../slather/ruby/2.0.0/bin/slather:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>So, I thought maybe it might be easier from a ruby script. I have the following in my script:</p>\n\n<pre><code>begin\n  require_relative '../../slather/bundler/setup'\nrescue LoadError\n  STDERR.puts 'Could not load bundler setup file'\n  exit 100\nend\n</code></pre>\n\n<p>This part appears to work fine and, I believe, it is loading the settings from the setup.rb file. Ruby isn't my forte, so I'm having trouble working out how to call slather in either a Ruby script or a bash script.</p>\n\n<p>If anyone can tell me how to either call slather from the command line or from a Ruby script, I'd really appreciate the help. I've also looked at omnibus, but that seems pretty heavy duty for my needs.</p>\n\n<p><code>setup.rb</code> is in slather/bundler. <code>slather</code> is in the slather/ruby/2.0.0/bin directory.</p>\n\n<pre><code>slather\n\u251c\u2500\u2500 bundler\n\u2514\u2500\u2500 ruby\n    \u2514\u2500\u2500 2.0.0\n        \u251c\u2500\u2500 bin\n        \u251c\u2500\u2500 build_info\n        \u251c\u2500\u2500 cache\n        \u251c\u2500\u2500 gems\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 CFPropertyList-2.3.5\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 cfpropertylist\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 activesupport-4.2.8\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 active_support\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 cache\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 strategy\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 concurrency\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 core_ext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 array\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 big_decimal\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 class\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 date\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 date_and_time\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 date_time\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 digest\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 file\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 hash\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 integer\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 kernel\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 module\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 numeric\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 object\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 range\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 string\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 time\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 dependencies\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 deprecation\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 inflector\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 json\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 locale\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 log_subscriber\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 multibyte\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 notifications\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 number_helper\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 testing\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 values\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 xml_mini\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 claide-1.0.2\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 claide\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 ansi\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 command\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 clamp-0.6.5\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 examples\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 clamp\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 attribute\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 option\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 parameter\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 subcommand\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 spec\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 clamp\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 option\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 parameter\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 colored2-3.1.2\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 colored2\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 spec\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 colored2\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 i18n-0.8.4\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 gemfiles\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 i18n\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 backend\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 core_ext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 kernel\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 string\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 gettext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 interpolate\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 locale\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 tag\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 tests\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 localization\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 api\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 backend\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 core_ext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 gettext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 i18n\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 locale\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 tag\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 test_data\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 locales\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0             \u2514\u2500\u2500 invalid\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 mini_portile2-2.1.0\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 mini_portile2\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 assets\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 git\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 test\\ mini\\ portile-1.0.0\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 minitest-5.10.2\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 hoe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 minitest\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 minitest\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 nanaimo-0.2.3\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 bin\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 nanaimo\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 unicode\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 writer\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 nokogiri-1.6.8.1\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 bin\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 ext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 nokogiri\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 nokogiri\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 css\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 decorators\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 html\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sax\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 xml\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 node\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 pp\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sax\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 xpath\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 xslt\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 xsd\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 xmlparser\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 patches\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 suppressions\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 tasks\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 css\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 decorators\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 files\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 bar\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 foo\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 saml\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_document_url\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 html\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 sax\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 namespaces\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 xml\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 node\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 sax\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 xslt\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 thread_safe-0.3.6\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 examples\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 ext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 org\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 jruby\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 ext\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 thread_safe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0             \u251c\u2500\u2500 jsr166e\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0             \u2502\u00a0\u00a0 \u2514\u2500\u2500 nounsafe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0             \u2514\u2500\u2500 jsr166y\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 thread_safe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 thread_safe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 util\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 spec\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 src\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 thread_safe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 support\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 thread_safe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 tasks\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 yard-template\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 default\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 fulldoc\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 html\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0     \u2514\u2500\u2500 css\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 layout\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0             \u2514\u2500\u2500 html\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 tzinfo-1.2.3\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 lib\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 tzinfo\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 tzinfo-data\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 tzinfo\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 data\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u251c\u2500\u2500 definitions\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 America\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Argentina\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 Australia\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 Etc\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 Europe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2514\u2500\u2500 indexes\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 zoneinfo\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 America\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 Argentina\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 Australia\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 Etc\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 Europe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 posix\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 Europe\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 right\n        \u2502\u00a0\u00a0 \u2502\u00a0\u00a0             \u2514\u2500\u2500 Europe\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 xcodeproj-1.5.0\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 bin\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 lib\n        \u2502\u00a0\u00a0         \u2514\u2500\u2500 xcodeproj\n        \u2502\u00a0\u00a0             \u251c\u2500\u2500 command\n        \u2502\u00a0\u00a0             \u251c\u2500\u2500 config\n        \u2502\u00a0\u00a0             \u251c\u2500\u2500 project\n        \u2502\u00a0\u00a0             \u2502\u00a0\u00a0 \u2514\u2500\u2500 object\n        \u2502\u00a0\u00a0             \u2502\u00a0\u00a0     \u2514\u2500\u2500 helpers\n        \u2502\u00a0\u00a0             \u251c\u2500\u2500 scheme\n        \u2502\u00a0\u00a0             \u2514\u2500\u2500 workspace\n        \u2514\u2500\u2500 specifications\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "grape-api"], "answers": [{"tags": [], "owner": {"reputation": 683, "user_id": 828413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ec8c427ccb262ca9899284f9b0964d?s=128&d=identicon&r=PG", "display_name": "Eric Parshall", "link": "https://stackoverflow.com/users/828413/eric-parshall"}, "is_accepted": false, "score": 0, "last_activity_date": 1535554769, "creation_date": 1535554769, "answer_id": 52080607, "question_id": 44420790, "link": "https://stackoverflow.com/questions/44420790/grape-api-code-in-parent-class-of-grapeapi-not-work/52080607#52080607", "title": "Grape API: code in parent class of GRAPE::API not work", "body": "<p>It looks like the logger needs to be configured inside the class where the API classes are mounted. So you can use the first option, but then you need to do the mounting in the first section as well and there would be no need for the POS::ApplicationAPI class. </p>\n"}], "owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535554769, "creation_date": 1496862032, "question_id": 44420790, "link": "https://stackoverflow.com/questions/44420790/grape-api-code-in-parent-class-of-grapeapi-not-work", "title": "Grape API: code in parent class of GRAPE::API not work", "body": "<p>I'm using grape api. I also use <a href=\"https://github.com/aserafin/grape_logging\" rel=\"nofollow noreferrer\">graph logger library</a> for logging all requests from client. I design a general class, because it will be used from many other places.</p>\n\n<pre><code>require 'grape_logging'\nclass GeneralGrapeApi &lt; Grape::API\n  logger.formatter = GrapeLogging::Formatters::Default.new\n  use GrapeLogging::Middleware::RequestLogger,\n    logger: logger,\n    include: [ GrapeLogging::Loggers::Response.new,\n               GrapeLogging::Loggers::FilterParameters.new,\n               GrapeLogging::Loggers::ClientEnv.new,\n               GrapeLogging::Loggers::RequestHeaders.new ]\nend\n</code></pre>\n\n<p>And here is my custom api that extends from above class:</p>\n\n<pre><code>module POS\n      class ApplicationApi &lt; GeneralGrapeApi    \n        # mounting here\n      end\nend\n</code></pre>\n\n<p>When I run, log library doesn't work. It means it doesn't print any log to standard output. But if I move code to inside class, for example:</p>\n\n<pre><code>module POS\n  class ApplicationApi &lt; GeneralGrapeApi  \n      logger.formatter = GrapeLogging::Formatters::Default.new\n      use GrapeLogging::Middleware::RequestLogger,\n        logger: logger,\n        include: [ GrapeLogging::Loggers::Response.new,\n                   GrapeLogging::Loggers::FilterParameters.new,\n                   GrapeLogging::Loggers::ClientEnv.new,\n                   GrapeLogging::Loggers::RequestHeaders.new ]  \n    # mounting here\n  end\nend\n</code></pre>\n\n<p>It will work. Please explain for me differences between 2 usages. I prefer first solution because it will make my code doesn't duplicate. How can I fix that.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "loops", "url-parameters"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496859632, "post_id": 44420063, "comment_id": 75838599, "body": "So, what exactly returns you the url? <code>r</code>, <code>r.image</code> or what?"}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496941041, "post_id": 44420063, "comment_id": 75880783, "body": "Its the path to each image which is managed by the def show"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496943205, "post_id": 44420063, "comment_id": 75881970, "body": "What kind of path it is, that it has <code>image</code> method?"}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496951429, "post_id": 44420063, "comment_id": 75886390, "body": "I added my file routes.rb to the question, there you can see the path"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496951799, "post_id": 44420063, "comment_id": 75886573, "body": "That&#39;s not what I asked."}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496959516, "post_id": 44420063, "comment_id": 75890124, "body": "There you can see the path &#39;index/see/:id&#39; is the kind of path that redirects you to the id of the image you click"}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496960171, "post_id": 44420063, "comment_id": 75890311, "body": "It is also an object as you can see &#39;@render&#39; turns into renders and renders into r. I mean the link is working without any trouble, i just can&#39;t find the way to pass more parameters @sergio"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496981713, "post_id": 44420063, "comment_id": 75895471, "body": "Sure you can. Just make <code>r</code> respond to <code>image</code>. Apparently, it does not to that. Or does, but returns empty string or whatever."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1496941094, "post_id": 44420187, "comment_id": 75880816, "body": "r is actually a path, is the path to each image managed by the function show in the controller. Since the path for each image is different I need to use it this way"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1496941808, "post_id": 44420187, "comment_id": 75881197, "body": "So you can use <code>r(some_parameter: some_value)</code> if <code>r</code> is the path, and is defined in order to expect a parameter."}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1496951492, "post_id": 44420187, "comment_id": 75886423, "body": "I get an error when i try it that way. link_to r(link: =&gt; &quot;portafolio&quot;)"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1496951697, "post_id": 44420187, "comment_id": 75886528, "body": "As you&#39;ve defined <code>pages#show</code> you need to pass a parameter called <code>id</code>, which error are you getting?, also don&#39;t use the fat arrow, try <code>r(id: some_id)</code>, <code>some_id</code> because is what the route is expecting for."}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1496959837, "post_id": 44420187, "comment_id": 75890213, "body": "Undefined method &#39;r&#39;, yes i know, the id passes as a parameter without any trouble, the problem is that i need to pass more parameters which i don&#39;t know how. I added the routes.rb file to the question so that you can se the path every image follows depending on their id."}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1496960242, "post_id": 44420187, "comment_id": 75890333, "body": "The link works perfectly but i can&#39;t pass more parameters to the url @sebasti&#225;n"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1496970794, "post_id": 44420187, "comment_id": 75892943, "body": "You can pass just one because you&#39;ve defined just the <code>id</code> to be expected (: <code>&#39;index&#47;see&#47;:id&#39;</code>, what are you trying to do?"}, {"owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1497547065, "post_id": 44420187, "comment_id": 76135413, "body": "I want the url to look like this &#39;index/see/5?type=interior&amp;link=portafolio&#39;"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1496859956, "creation_date": 1496859956, "answer_id": 44420187, "question_id": 44420063, "link": "https://stackoverflow.com/questions/44420063/pass-parameters-through-link-tor-do-end/44420187#44420187", "title": "Pass parameters through link_to(r) do... end", "body": "<p>In order to pass a block on a <code>link_to</code> helper you must specify the path, you're just passing <code>r</code>, but what's that value? what does it print?</p>\n\n<p>You could try specifying the path, and inside as params the <code>r</code> value:</p>\n\n<pre><code>&lt;%= link_to some_path(parameter: value_for_r) do %&gt;\n  &lt;!-- The content wrapped in the link_to --&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "is_accepted": true, "score": 1, "last_activity_date": 1497549787, "creation_date": 1497549787, "answer_id": 44574084, "question_id": 44420063, "link": "https://stackoverflow.com/questions/44420063/pass-parameters-through-link-tor-do-end/44574084#44574084", "title": "Pass parameters through link_to(r) do... end", "body": "<p>Specify the path and use r to specify the id</p>\n\n<pre><code>&lt;%= link_to render_path(r, link: :portafolio, parameter: :value) do %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7454482, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-frlAYAlB4Io/AAAAAAAAAAI/AAAAAAAAABI/zT_4dWLdVAQ/photo.jpg?sz=128", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/7454482/luis-arturo-nieto-hern%c3%a1ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 44574084, "answer_count": 2, "score": 1, "last_activity_date": 1497549787, "creation_date": 1496859494, "last_edit_date": 1496951286, "question_id": 44420063, "link": "https://stackoverflow.com/questions/44420063/pass-parameters-through-link-tor-do-end", "title": "Pass parameters through link_to(r) do... end", "body": "<p>My code loops through several images. Each image is a link and what I want is to pass the same url parameter in those links.</p>\n\n<pre><code>&lt;% @render.each_slice(2) do |renders| %&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;% renders.each do |r| %&gt;           \n                &lt;%= link_to(r) do %&gt;\n                    &lt;div class=\"col-md-6\" align=\"center\" style=\"margin-bottom: 5em; border-radius: 5px;\"&gt;\n                        &lt;%= image_tag(r.image) %&gt;               \n                    &lt;/div&gt;\n                &lt;% end %&gt;\n            &lt;% end %&gt;           \n        &lt;/div&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>I have tried link_to(r, :link => 'portafolio') in a lot of ways.</p>\n\n<p>routes.rb is like this</p>\n\n<pre><code>Rails.application.routes.draw do\n# For details on the DSL available within this file, see    http://guides.rubyonrails.org/routing.html\nroot 'pages#main'\nget 'index/' =&gt; 'pages#index'\nget 'index/see' =&gt; 'pages#see'\nget 'index/see/:id' =&gt; 'pages#show', as: :render\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "html-parsing", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496876801, "post_id": 44419325, "comment_id": 75846697, "body": "Welcome to Stack Overflow. You&#39;ve given us some data, and a desired output, but you didn&#39;t show us what you tried. What does &quot;unpack the non-standard HTML&quot; and &quot;nothing happened&quot; mean? I don&#39;t see the normal <code>&lt;head&gt;</code> tags but don&#39;t have a way of telling whether that&#39;s missing in your example or in the original source. (It doesn&#39;t matter to Nokogiri.) Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimum code that demonstrates the problem. Without that it looks like you didn&#39;t try and want us to write it for you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496878054, "post_id": 44419325, "comment_id": 75847084, "body": "You can&#39;t use table parsing for your example. Tables are nested into rows and columns, making it very logical how to iterate over it. Your data isn&#39;t nested, except inside the first <code>&lt;div&gt;</code>. It&#39;s a list, and possibly <i>appears</i> as a list of lists once CSS is applied, but the visual layout has nothing to do with the way we have to retrieve the data."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1496884706, "post_id": 44419325, "comment_id": 75848676, "body": "What do you mean by non-standard? Regardless of that, whether standard or not does not matter as long as it is a valid HTML."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 3, "last_activity_date": 1496868924, "last_edit_date": 1496868924, "creation_date": 1496868611, "answer_id": 44422528, "question_id": 44419325, "link": "https://stackoverflow.com/questions/44419325/how-to-scrape-non-standard-html-with-nokogiri/44422528#44422528", "title": "How to scrape non-standard HTML with Nokogiri", "body": "<p>If I understand correctly this might work for you </p>\n\n<pre><code>require 'nokogiri'\nbody = &lt;&lt;-BODY \n&lt;body&gt;\n    &lt;div class=\"open\"&gt;\n        &lt;div style='style'&gt;Raw name 1&lt;/div&gt;\n        &lt;p&gt;Text_1&lt;/p&gt;\n        &lt;p&gt;Text_2&lt;/p&gt;\n        &lt;p&gt;Text_3&lt;/p&gt;\n        &lt;p&gt;Text_4&lt;/p&gt;\n        &lt;p&gt;Text_5&lt;/p&gt;         \n        &lt;div style='style'&gt;Raw name 5&lt;/div&gt;\n        &lt;p&gt;Text_1&lt;/p&gt;\n        &lt;p&gt;Text_2&lt;/p&gt;\n        &lt;p&gt;Text_3&lt;/p&gt;\n        &lt;p&gt;Text_4&lt;/p&gt;\n        &lt;p&gt;Text_5&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;   \nBODY\n\ndoc = Nokogiri::HTML(body)\ndoc.xpath('//body/div').children.each_with_object({}) do |node,obj|\n    text = node.text.strip\n    obj[text] = [] if node.name == 'div'\n    obj[obj.keys.last] &lt;&lt; text if node.name == 'p'\nend\n#=&gt; {\"Raw name 1\"=&gt;[\"Text_1\", \"Text_2\", \"Text_3\", \"Text_4\", \"Text_5\"], \n#     \"Raw name 5\"=&gt;[\"Text_1\", \"Text_2\", \"Text_3\", \"Text_4\", \"Text_5\"]}\n</code></pre>\n\n<p>Steps:</p>\n\n<ul>\n<li>This follows the <code>xpath</code> to the first div (<code>doc.xpath('//body/div')</code>) </li>\n<li>Then passes each child (<code>.children</code>) of that div to the block along with an object (<code>.each_with_object({}) do |node,obj|</code>) in this case as an accumulator. </li>\n<li>It then adds a key for each <code>div</code> tag and assigns it to an empty array(<code>obj[text] = [] if node.name == 'div'</code>). </li>\n<li>It populates the last key with the following <code>p</code> tags (<code>obj[obj.keys.last] &lt;&lt; text if node.name == 'p'</code>)</li>\n</ul>\n\n<p>The result is a <code>Hash</code> where the keys are the <code>divs</code> and the value is an <code>Array</code> of the following <code>p</code> tags text until it gets to the next <code>div</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 3, "last_activity_date": 1496877754, "last_edit_date": 1496877754, "creation_date": 1496877100, "answer_id": 44424179, "question_id": 44419325, "link": "https://stackoverflow.com/questions/44419325/how-to-scrape-non-standard-html-with-nokogiri/44424179#44424179", "title": "How to scrape non-standard HTML with Nokogiri", "body": "<p>I'd do something like:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;body&gt;\n    &lt;div class=\"open\"&gt;\n        &lt;div style='style'&gt;Raw name 1&lt;/div&gt;\n        &lt;p&gt;Text_1&lt;/p&gt;\n        &lt;p&gt;Text_2&lt;/p&gt;         \n        &lt;div style='style'&gt;Raw name 5&lt;/div&gt;\n        &lt;p&gt;Text_1&lt;/p&gt;\n        &lt;p&gt;Text_2&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\nEOT\n\ndoc.at('.open').elements.slice_before { |e| e.name == 'div' }.map { |ary|\n  ary.map(&amp;:text)\n}\n# =&gt; [[\"Raw name 1\", \"Text_1\", \"Text_2\"], [\"Raw name 5\", \"Text_1\", \"Text_2\"]]\n</code></pre>\n\n<p>Breaking it down a bit:</p>\n\n<pre><code>doc.at('.open').elements.map(&amp;:name) # =&gt; [\"div\", \"p\", \"p\", \"div\", \"p\", \"p\"]\ndoc.at('.open').elements.slice_before { |e| e.name == 'div' }.map { |a| a.map(&amp;:name) } # =&gt; [[\"div\", \"p\", \"p\"], [\"div\", \"p\", \"p\"]]\n</code></pre>\n\n<p><a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri%2FXML%2FNode:element_children\" rel=\"nofollow noreferrer\"><code>elements</code></a> and <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-slice_before\" rel=\"nofollow noreferrer\"><code>slice_before</code></a> are the magic here.</p>\n"}], "owner": {"reputation": 83, "user_id": 6656607, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3ba3902013c229f0f2ded143af04a4a6?s=128&d=identicon&r=PG", "display_name": "Denis T.", "link": "https://stackoverflow.com/users/6656607/denis-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 44422528, "answer_count": 2, "score": 2, "last_activity_date": 1496939618, "creation_date": 1496856947, "last_edit_date": 1496939618, "question_id": 44419325, "link": "https://stackoverflow.com/questions/44419325/how-to-scrape-non-standard-html-with-nokogiri", "title": "How to scrape non-standard HTML with Nokogiri", "body": "<p>How can I unpack a non-standard HTML:</p>\n\n<pre><code>&lt;body&gt;\n    &lt;div class=\"open\"&gt;\n        &lt;div style='style'&gt;Raw name 1&lt;/div&gt;\n        &lt;p&gt;Text_1&lt;/p&gt;\n        &lt;p&gt;Text_2&lt;/p&gt;\n        &lt;p&gt;Text_3&lt;/p&gt;\n        &lt;p&gt;Text_4&lt;/p&gt;\n        &lt;p&gt;Text_5&lt;/p&gt;         \n        &lt;div style='style'&gt;Raw name 5&lt;/div&gt;\n        &lt;p&gt;Text_1&lt;/p&gt;\n        &lt;p&gt;Text_2&lt;/p&gt;\n        &lt;p&gt;Text_3&lt;/p&gt;\n        &lt;p&gt;Text_4&lt;/p&gt;\n        &lt;p&gt;Text_5&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>I want to get a result similar to:</p>\n\n<pre><code>['Raw name 1', Text_1, Text_2, Text_3, Text_4, Text_5]\n...\n['Raw name 5', Text_1, Text_2, Text_3, Text_4, Text_5]\n</code></pre>\n\n<p>I tried to do something on this example <a href=\"https://stackoverflow.com/questions/34781600/how-to-parse-a-html-table-with-nokogiri\">How to parse a HTML table with Nokogiri?</a>, but nothing happened.</p>\n\n<p>Is it possible to obtain information that I want from such HTML?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8058483, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tHlqEF8-ixU/AAAAAAAAAAI/AAAAAAAAArs/i_zJ9EP9CgE/photo.jpg?sz=128", "display_name": "Djamel Hassaine", "link": "https://stackoverflow.com/users/8058483/djamel-hassaine"}, "edited": false, "score": 0, "creation_date": 1496857894, "post_id": 44419442, "comment_id": 75837693, "body": "Thanks! I figured it out just as you answered. Its kind of obvious when its pointed out :)"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 13, "user_id": 8058483, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tHlqEF8-ixU/AAAAAAAAAAI/AAAAAAAAArs/i_zJ9EP9CgE/photo.jpg?sz=128", "display_name": "Djamel Hassaine", "link": "https://stackoverflow.com/users/8058483/djamel-hassaine"}, "edited": false, "score": 0, "creation_date": 1496858210, "post_id": 44419442, "comment_id": 75837869, "body": "@DjamelHassaine, you are welcome :)"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1496857355, "creation_date": 1496857355, "answer_id": 44419442, "question_id": 44419319, "link": "https://stackoverflow.com/questions/44419319/ruby-hash-block-in-main-undefined-method/44419442#44419442", "title": "ruby hash block in &lt;main&gt;&#39;: undefined method `[]=&#39;", "body": "<p>Block should return accumulator:</p>\n\n<pre><code>[4, 8, 15, 16, 23, 42].inject({}) { |a, i| a[i] = i; a }\n#=&gt; {4=&gt;4, 8=&gt;8, 15=&gt;15, 16=&gt;16, 23=&gt;23, 42=&gt;42}\n</code></pre>\n\n<p>This is how <code>inject</code> works. The first instance works because <code>Hash#update</code> returns updated hash.</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1496859449, "post_id": 44419484, "comment_id": 75838511, "body": "OP: Block arguments for <code>each_with_object</code> are in the same order as the method-name <code>|each, object|</code>."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1496859535, "last_edit_date": 1496859535, "creation_date": 1496857530, "answer_id": 44419484, "question_id": 44419319, "link": "https://stackoverflow.com/questions/44419319/ruby-hash-block-in-main-undefined-method/44419484#44419484", "title": "ruby hash block in &lt;main&gt;&#39;: undefined method `[]=&#39;", "body": "<p>Block of inject/reduce must return the new value of accumulator (see @ilya's answer). For some operations this happens naturally, for some - not so much. For those, I prefer <code>each_with_object</code> which handles tracking of the accumulator.</p>\n\n<pre><code>[4, 8, 15, 16, 23, 42].each_with_object({}) { |i, memo| memo[i] = i }\n</code></pre>\n\n<p>(note that block arguments are in another order here)</p>\n\n<h3>Bonus</h3>\n\n<p>Don't know if you really want to achieve that transformation or it's just a sample code, but if you do, here's another way to do that: </p>\n\n<pre><code>ary = [4, 8, 15, 16, 23, 42]\nary.zip(ary).to_h \n# =&gt; {4=&gt;4, 8=&gt;8, 15=&gt;15, 16=&gt;16, 23=&gt;23, 42=&gt;42}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8058483, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tHlqEF8-ixU/AAAAAAAAAAI/AAAAAAAAArs/i_zJ9EP9CgE/photo.jpg?sz=128", "display_name": "Djamel Hassaine", "link": "https://stackoverflow.com/users/8058483/djamel-hassaine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "closed_date": 1496860952, "accepted_answer_id": 44419442, "answer_count": 2, "score": 0, "last_activity_date": 1496859535, "creation_date": 1496856933, "last_edit_date": 1496857356, "question_id": 44419319, "link": "https://stackoverflow.com/questions/44419319/ruby-hash-block-in-main-undefined-method", "closed_reason": "Duplicate", "title": "ruby hash block in &lt;main&gt;&#39;: undefined method `[]=&#39;", "body": "<p>This works using the hash.update method: </p>\n\n<pre><code>[4, 8, 15, 16, 23, 42].inject({}) { |a, i| a.update(i =&gt; i) }\n</code></pre>\n\n<p>But this snippet using <code>a[i] = i</code>:</p>\n\n<pre><code>[4, 8, 15, 16, 23, 42].inject({}) { |a, i| a[i] = i }\n</code></pre>\n\n<p>Results in the following error:</p>\n\n<pre><code>&lt;code&gt;NoMethodError: undefined method \\`[]=' for 4:Integer\nDid you mean?  []\n    from (irb):1:in \\`block in irb_binding'&gt;\n    from (irb):1:in \\`each'\n    from (irb):1:in \\`inject'\n    from (irb):1\n&lt;/code&gt;\n</code></pre>\n\n<p>Would someone please explain to me why I get this error? Thanks. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496856586, "post_id": 44419186, "comment_id": 75836998, "body": "As you&#39;re not using <code>attrs</code> on <code>fill_attrs_from_params</code> you could just iterate over <code>params[:attributes]</code>."}, {"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496856632, "post_id": 44419186, "comment_id": 75837021, "body": "@Sebasti&#225;nPalma Will it return the same array?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496856723, "post_id": 44419186, "comment_id": 75837069, "body": "Nono, for that see Sergio&#39;s answer using <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Enumerable#map</code></a>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1496856818, "post_id": 44419186, "comment_id": 75837115, "body": "@Sebasti&#225;nPalma: it&#39;s <code>Enumerable#map</code>, actually :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1496859930, "post_id": 44419186, "comment_id": 75838756, "body": "Your question is unclear. What does &quot;assign do-block to array&quot; mean? You cannot &quot;assign something to an array&quot;, you can only assign to a variable, an attribute writer, or an indexing assignment method. Also, you can only assign objects but blocks aren&#39;t objects, they are a syntactic construct."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1496859948, "post_id": 44419186, "comment_id": 75838766, "body": "Note also that &quot;doesn&#39;t work&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"comments": [{"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "edited": false, "score": 0, "creation_date": 1496856790, "post_id": 44419228, "comment_id": 75837104, "body": "So basically using <code>.each</code> does not return an array, only iterating it over?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "edited": false, "score": 1, "creation_date": 1496856858, "post_id": 44419228, "comment_id": 75837138, "body": "@MattSom: <code>.each</code> returns <b>the original collection</b>. Which <i>might</i> be what you want. But most often isn&#39;t."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496856907, "post_id": 44419228, "comment_id": 75837163, "body": "@Md.FarhanMemon: With the information available here, yes. I think, something is being done to <code>attrs</code> in the hidden code."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496857317, "post_id": 44419228, "comment_id": 75837389, "body": "@Md.FarhanMemon: question says &quot;I want to shorten this piece of code&quot; - the code in the answer is doing exactly the same thing, but shorter :)"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496857596, "post_id": 44419228, "comment_id": 75837533, "body": "It also says &quot;I&#39;m a newbie&quot; maybe a small chunk of memory can be saved here...allegedly :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496857778, "post_id": 44419228, "comment_id": 75837629, "body": "@Md.FarhanMemon: there&#39;s no memory saving here. Array is created, with assignment to variable or not."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496857938, "post_id": 44419228, "comment_id": 75837727, "body": "Ohh...so you mean to say, assigning an object to a variable doesn&#39;t use memory in ruby/rails? If it is so..i m yet to learn many things.."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496857980, "post_id": 44419228, "comment_id": 75837751, "body": "@Md.FarhanMemon: a few bytes tops."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496858080, "post_id": 44419228, "comment_id": 75837802, "body": "Thank God you said that..I meant the same by &quot;small chunk&quot;..and it is dependent on the size of array.."}, {"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "edited": false, "score": 0, "creation_date": 1496858288, "post_id": 44419228, "comment_id": 75837913, "body": "Yes, the variable inside the block can be omitted in this example, just tried it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "edited": false, "score": 0, "creation_date": 1496858678, "post_id": 44419228, "comment_id": 75838117, "body": "@MattSom: there&#39;s no variable inside the block that can be omitted here"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496858711, "post_id": 44419228, "comment_id": 75838133, "body": "@Md.FarhanMemon you must be talking about something else. Amount of memory used by <i>a reference</i> to an array does not depend on number of elements in the array."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496861926, "post_id": 44419228, "comment_id": 75839912, "body": "Yeah..I got carried away...that holds just the reference to memory independent of size.. (y)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 4, "last_activity_date": 1496856933, "last_edit_date": 1496856933, "creation_date": 1496856634, "answer_id": 44419228, "question_id": 44419186, "link": "https://stackoverflow.com/questions/44419186/ruby-assign-do-block-to-array/44419228#44419228", "title": "Ruby assign do-block to array", "body": "<p>That's what <code>.map</code> is for</p>\n\n<pre><code>  attrs = params[:attributes].map do |attr_hash| \n    Attribute.new(attr_hash)\n  end\n</code></pre>\n\n<p><code>.each</code> is very versatile. With a bit of helper code, you can make it do <strong>anything</strong>. And that is its weakness. When you think to use <code>.each</code>, there's almost always a method on Enumerable that does the job better with less code (<em>of course, except the obvious use case: performing an action on each element of a collection. Here you use <code>.each</code>.</em>)</p>\n"}], "owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 44419228, "answer_count": 1, "score": 1, "last_activity_date": 1496915020, "creation_date": 1496856468, "last_edit_date": 1496915020, "question_id": 44419186, "link": "https://stackoverflow.com/questions/44419186/ruby-assign-do-block-to-array", "title": "Ruby assign do-block to array", "body": "<p>I'm a newbie Rails learner. I want to try out some ruby language features, e.g. shorten the following method:</p>\n\n<pre><code>def update(params)\n  attrs = []\n  params[:attributes].each do |attr_hash| \n    attr = Attribute.new attr_hash\n    attrs.push attr\n  end\n  ...\nend\n</code></pre>\n\n<p>like:</p>\n\n<pre><code>def update(params)\n   attrs = fill_attrs_from_params params\n   ...\nend\n\ndef fill_attrs_from_params(params)\n  attrs = params[:attributes].each do |attr_hash| \n    Attribute.new(attr_hash)\n  end\nend\n</code></pre>\n\n<p>The second doesn't work as the first one however. What do I miss here?</p>\n\n<p><strong>Edit:</strong> I couldn't really decide how the second one worked, the application went buggy, and I'm a beginner with rails debugging as well.</p>\n"}, {"tags": ["arrays", "ruby", "kruskals-algorithm"], "comments": [{"owner": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1496852972, "post_id": 44417660, "comment_id": 75835057, "body": "Not asked but you do not need <code>edgeValues = edgeValues.sort</code>. It is enough to finish with <code>edgeValues.sort</code> or in your case probably <code>edgeValues.sort.each_slice(clusters)</code>"}, {"owner": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1496853884, "post_id": 44417660, "comment_id": 75835595, "body": "Try looking at <a href=\"https://stackoverflow.com/questions/20818882/partition-an-array-of-numbers-into-sets-by-proximity\">this</a> answer on SO"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1496861002, "creation_date": 1496861002, "answer_id": 44420497, "question_id": 44417660, "link": "https://stackoverflow.com/questions/44417660/ruby-kruskals-algorithm-resultarray-manipulation/44420497#44420497", "title": "Ruby: Kruskal&#39;s Algorithm - ResultArray manipulation", "body": "<p>Not having heard of <a href=\"https://en.wikipedia.org/wiki/Kruskal%27s_algorithm\" rel=\"nofollow noreferrer\">Kruskal's Algorithm </a> I looked it up to find that it is a method for computing a minimal spanning tree. The OP wishes to employ that algorithm here, but the reason for doing so is not stated. Neither is there a statement of the underlying problem being addressed. I assume from the example that the object is to partition a sorted array into a given number of arrays (\"clusters\") such that those arrays differ in size by at most one and the larger ones are to be at the beginning. If so, there are many ways of doing that--including my solution below--that do not view the problem as one of finding a minimal spanning tree.</p>\n\n<pre><code>def similar_size_clusters(array, nbr_clusters)\n  sorted = array.sort\n  smaller_size, nbr_larger = sorted.size.divmod(nbr_clusters)\n  nbr_clusters.times.each_with_object([]) do |i,a|\n    a &lt;&lt; sorted.shift(i &lt; nbr_larger ? smaller_size + 1 : smaller_size)\n  end\nend\n\narray = [5, 4, 3, 5, 15, 20, 10, 80, 75, 6, 85] \n(1..array.size).each { |i| puts \"clusters = #{i}: #{similar_size_clusters(array, i)}\" }\n\nclusters =  1: [[3, 4, 5, 5, 6, 10, 15, 20, 75, 80, 85]]\nclusters =  2: [[3, 4, 5, 5, 6, 10], [15, 20, 75, 80, 85]]\nclusters =  3: [[3, 4, 5, 5], [6, 10, 15, 20], [75, 80, 85]]\nclusters =  4: [[3, 4, 5], [5, 6, 10], [15, 20, 75], [80, 85]]\nclusters =  5: [[3, 4, 5], [5, 6], [10, 15], [20, 75], [80, 85]]\nclusters =  6: [[3, 4], [5, 5], [6, 10], [15, 20], [75, 80], [85]]\nclusters =  7: [[3, 4], [5, 5], [6, 10], [15, 20], [75], [80], [85]]\nclusters =  8: [[3, 4], [5, 5], [6, 10], [15], [20], [75], [80], [85]]\nclusters =  9: [[3, 4], [5, 5], [6], [10], [15], [20], [75], [80], [85]]\nclusters = 10: [[3, 4], [5], [5], [6], [10], [15], [20], [75], [80], [85]]\nclusters = 11: [[3], [4], [5], [5], [6], [10], [15], [20], [75], [80], [85]]\n</code></pre>\n"}], "owner": {"reputation": 128, "user_id": 6200701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LbBcYe8IlE0/AAAAAAAAAAI/AAAAAAAAAOA/vnhQeCw7ovc/photo.jpg?sz=128", "display_name": "Floaterz", "link": "https://stackoverflow.com/users/6200701/floaterz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 44420497, "answer_count": 1, "score": 0, "last_activity_date": 1496861002, "creation_date": 1496851248, "last_edit_date": 1496851432, "question_id": 44417660, "link": "https://stackoverflow.com/questions/44417660/ruby-kruskals-algorithm-resultarray-manipulation", "title": "Ruby: Kruskal&#39;s Algorithm - ResultArray manipulation", "body": "<p>I'm new to Ruby and I've been playing with the Kruskal's Algorithm a little bit but at the moment I've hit a bump and I can't understand what I need to do at this stage. </p>\n\n<p>The code I've been working on is this:</p>\n\n<pre><code>def partition(arr, clusters)\n  edgeValues = []\n  index1 = 0\n  index2 = 1\n  arr = arr.sort # [3, 4, 5, 5, 6, 10, 15, 20, 75, 80, 85]\n\n  arr.length.times{\n    val = (arr[index1]-arr[index2]).abs\n    edgeValues &lt;&lt; [ val, index1, index2]\n\n    index1 += 1\n    index2 += 1\n\n    break if (arr.length == index2)\n  }\n\n  edgeValues = edgeValues.sort\n\n  #p edgeValues[0][0] # value cost\n  #p edgeValues[0][1] # index 1\n  #p edgeValues[0][2] # index 2\n\n\nend\n\narray = [5, 4, 3, 5, 15, 20, 10, 80, 75, 6, 85] \nclusters = 3\n\npartition( array, clusters ) #end result: [ [3, 4, 5, 5, 6], [10, 15, 20], [75, 80, 85] ]\n</code></pre>\n\n<p>I managed to do everything except the last part.</p>\n\n<p>I have no idea how to manipulate the sorted array:</p>\n\n<pre><code>[3, 4, 5, 5, 6, 10, 15, 20, 75, 80, 85] \n</code></pre>\n\n<p>In order to achieve the end result: </p>\n\n<pre><code>[ [3, 4, 5, 5, 6], [10, 15, 20], [75, 80, 85] ]\n</code></pre>\n\n<p>I have all the calculations handled and those values stored in the <code>edgeValues</code> array.</p>\n\n<p>Any help would be appreciated. </p>\n"}, {"tags": ["ruby", "ocra"], "answers": [{"tags": [], "owner": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "is_accepted": true, "score": 1, "last_activity_date": 1496958801, "creation_date": 1496958801, "answer_id": 44446172, "question_id": 44417611, "link": "https://stackoverflow.com/questions/44417611/cant-run-exes-made-with-ocra-fatal-error-failed-to-create-process/44446172#44446172", "title": "Can&#39;t run exes made with ocra -- FATAL ERROR: Failed to create process", "body": "<p>I was able to fix the issue by uninstalling Ruby and installing an older version (namely 2.3.3) via <a href=\"https://rubyinstaller.org/\" rel=\"nofollow noreferrer\">RubyInstaller</a>. There seems to be an issue with 2.4.1 and ocra. I tested on a couple of fresh computers, and 2.4.1 didn't work even with a fresh install.</p>\n"}, {"comments": [{"owner": {"reputation": 2538, "user_id": 988591, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/248624b122eb5cc3748ee7131fc0b3f4?s=128&d=identicon&r=PG&f=1", "display_name": "jj_", "link": "https://stackoverflow.com/users/988591/jj"}, "edited": false, "score": 1, "creation_date": 1507823035, "post_id": 44921579, "comment_id": 80373893, "body": "However this version introduces a new problem: it can&#39;t produce 32 bit exe&#39;s within a 32 bit Ruby environment: <a href=\"https://github.com/larsch/ocra/issues/124\" rel=\"nofollow noreferrer\">github.com/larsch/ocra/issues/124</a>."}, {"owner": {"reputation": 909, "user_id": 362112, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ca515d239bf09ffe970af1da4174eb03?s=128&d=identicon&r=PG", "display_name": "larsch", "link": "https://stackoverflow.com/users/362112/larsch"}, "reply_to_user": {"reputation": 2538, "user_id": 988591, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/248624b122eb5cc3748ee7131fc0b3f4?s=128&d=identicon&r=PG&f=1", "display_name": "jj_", "link": "https://stackoverflow.com/users/988591/jj"}, "edited": false, "score": 1, "creation_date": 1508017172, "post_id": 44921579, "comment_id": 80445235, "body": "Aah, I didn&#39;t realize that. I&#39;ve uploaded 1.3.10 built with a 32-bit compiler."}, {"owner": {"reputation": 1109, "user_id": 1347872, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/09f727ba98ea6777e532e22a106e72be?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/1347872/manu"}, "edited": false, "score": 0, "creation_date": 1618589912, "post_id": 44921579, "comment_id": 118656409, "body": "I am getting the same error with 2.7.2 . Any suggestions? Using  below version --&gt; ocra (1.3.11) --&gt;  ruby 2.7.2p137"}], "tags": [], "owner": {"reputation": 909, "user_id": 362112, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ca515d239bf09ffe970af1da4174eb03?s=128&d=identicon&r=PG", "display_name": "larsch", "link": "https://stackoverflow.com/users/362112/larsch"}, "is_accepted": false, "score": 3, "last_activity_date": 1499245274, "creation_date": 1499245274, "answer_id": 44921579, "question_id": 44417611, "link": "https://stackoverflow.com/questions/44417611/cant-run-exes-made-with-ocra-fatal-error-failed-to-create-process/44921579#44921579", "title": "Can&#39;t run exes made with ocra -- FATAL ERROR: Failed to create process", "body": "<p>There's now an updated Ocra 1.3.9 which fixes the issue.</p>\n"}], "owner": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 44446172, "answer_count": 2, "score": 3, "last_activity_date": 1618589823, "creation_date": 1496851148, "last_edit_date": 1496854341, "question_id": 44417611, "link": "https://stackoverflow.com/questions/44417611/cant-run-exes-made-with-ocra-fatal-error-failed-to-create-process", "title": "Can&#39;t run exes made with ocra -- FATAL ERROR: Failed to create process", "body": "<p>I'm trying to package a Ruby program as an .exe on a Windows computer using OCRA. When I tried to use it to create the executable for my program, it threw a weird error at runtime. I tried it with a simple Hello World program, and the error persisted. </p>\n\n<p>I put the following in <code>helloworld.rb</code>:</p>\n\n<pre><code>puts \"Hello, World!\"\n</code></pre>\n\n<p>Then, I ran the file through OCRA:</p>\n\n<pre><code>H:\\ocra test&gt;ocra --no-dep-run helloworld.rb\n=== Detected gem did_you_mean-1.1.0 (loaded, files)\n===     14 files, 32780 bytes\n=== Detected gem ocra-1.3.8 (loaded, files)\n===     5 files, 291748 bytes\n=== Including 59 encoding support files (3918740 bytes, use --no-enc to exclude)\n\n=== Building helloworld.exe\n=== Adding user-supplied source files\n=== Adding ruby executable ruby.exe\n=== Adding detected DLL C:/Ruby24-x64/bin/ruby_builtin_dlls/libgmp-10.dll\n=== Adding detected DLL C:/Ruby24-x64/bin/ruby_builtin_dlls/libffi-6.dll\n=== Adding library files\n=== Compressing 7908093 bytes\n=== Finished building helloworld.exe (1919669 bytes)\n</code></pre>\n\n<p>However, when I tried to run this executable, I got the following message:</p>\n\n<pre><code>H:\\ocra test&gt;helloworld.exe\nFATAL ERROR: Failed to create process (C:\\Users\\[username]\\AppData\\Local\\Temp\\ocr9C6D.tmp\\bin\\ruby.exe): 14001\n</code></pre>\n\n<p>Note: This is not a duplicate of <a href=\"https://stackoverflow.com/questions/17413073/ruby-ocra-executable-fatal-error-on-different-windows-version\">this person's question</a> which has the same error message. I am unable to run the EXE on the computer that generated it, whereas the person who asked the linked question was having issues running it on <em>other</em> computers. </p>\n\n<p>Here are the versions of Ruby and OCRA, both of which I believe are the latest version:</p>\n\n<pre><code>H:\\ocra test&gt;ruby --version\nruby 2.4.1p111 (2017-03-22 revision 58053) [x64-mingw32]\nH:\\ocra test&gt;ocra --version\nOcra 1.3.8\n</code></pre>\n\n<p>I'm on Windows 7 Professional 64 bit.</p>\n\n<p>I also tried running it without the --no-dep-run flag, running the exe on my C: drive instead of H:, and running it in a command prompt with local administrator privileges. All gave the same error message.</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1496862476, "post_id": 44416752, "comment_id": 75840221, "body": "This has been exhaustively answered <a href=\"https://stackoverflow.com/a/23283955/5961578\">here</a>."}, {"owner": {"reputation": 343, "user_id": 1336988, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/N9enR.jpg?s=128&g=1", "display_name": "codelitt", "link": "https://stackoverflow.com/users/1336988/codelitt"}, "edited": false, "score": 0, "creation_date": 1497111987, "post_id": 44416752, "comment_id": 75946496, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17754770/factorygirl-build-stubbed-strategy-with-a-has-many-association\">FactoryGirl build_stubbed strategy with a has_many association</a>"}], "owner": {"reputation": 650, "user_id": 3308071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1249110048/picture?type=large", "display_name": "tommybond", "link": "https://stackoverflow.com/users/3308071/tommybond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 557, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496850770, "creation_date": 1496848854, "last_edit_date": 1496850770, "question_id": 44416752, "link": "https://stackoverflow.com/questions/44416752/factorygirl-build-has-many-through-associations", "title": "FactoryGirl build has_many through associations", "body": "<p>Is it possible to build associations that have a has_many through association in ActiveRecord? </p>\n\n<p>Example: I have a <code>user</code> that has <code>team_memberships</code> associated with it, and those <code>team_memberships</code> have a single <code>team</code> each. So the <code>user</code> <code>has_many :teams, :through =&gt; :team_memberships</code>. </p>\n\n<p>Is there a way I can build this without saving it to the database in FactoryGirl?</p>\n\n<p>What I have now: </p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do \n    team_memberships {build_list :team_member, 1}\n  end\n\n  factory :team_member do\n    id 1\n    team_id 1\n    user_id 1\n    association :team, :strategy =&gt; :build\n  end\n\n  factory :team do\n    id 1\n  end\nend\n</code></pre>\n\n<p>I know this is probably wrong but I'm very new to FactoryGirl. When I <code>build</code> a user on this, and then I try to do <code>user.teams</code> I get an empty array in response. </p>\n\n<p>Can anyone help with this? </p>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>I have now also tried doing <code>after(:build)</code> blocks to setup the associations, but that doesn't seem to be working either. </p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do \n    after(:build) { |user| user.team_memberships &lt;&lt; build_list(:team_member, 1)}\n  end\n\n  factory :team_member do\n    id 1\n    team_id 1\n    user_id 1\n    after(:build) { |team_member| team_member.team = build(:team)}\n  end\n\n  factory :team do\n    id 1\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "azure", "ubuntu", "virtual-machine"], "answers": [{"comments": [{"owner": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1496935336, "post_id": 44425458, "comment_id": 75876993, "body": "Hey, this works but again I am getting error while creating VM. This time I am getting ``serialize&#39;: createOption is required and cannot be nil`. I have raised issue in github repo : <a href=\"https://github.com/Azure/azure-sdk-for-ruby/issues/792\" rel=\"nofollow noreferrer\">github.com/Azure/azure-sdk-for-ruby/issues/792</a>"}, {"owner": {"reputation": 12857, "user_id": 6851908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ae2cbc5ed313e05565f7f869b5d3b2?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Ye", "link": "https://stackoverflow.com/users/6851908/jason-ye"}, "reply_to_user": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1496995473, "post_id": 44425458, "comment_id": 75901476, "body": "@AnandSoni use your code, I get the same error, according to the error message, it seems we have not set create_option, here a link talk about how to use ruby to create azure network, storage account, and VMs <a href=\"https://github.com/Azure-Samples/compute-ruby-manage-vm#vm\" rel=\"nofollow noreferrer\">github.com/Azure-Samples/compute-ruby-manage-vm#vm</a>  By the way, to get more help about this error, maybe you should ask another question. If my answer is helpful, please don&#39;t forget to accept it as an answer, thanks :)"}, {"owner": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1497006702, "post_id": 44425458, "comment_id": 75908743, "body": ":-) I have just get it resolved. I created OSDisk object and set options. But still getting new error again and again."}, {"owner": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1497020657, "post_id": 44425458, "comment_id": 75918721, "body": "It was rapid error messages coming out on configuration. At that time it was giving me <code>entity not found</code>. After facing lots of error I finally can run vm in Azure. Thank you for your help. I am going to accept your answer. I will also write blog about it :-)"}], "tags": [], "owner": {"reputation": 12857, "user_id": 6851908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ae2cbc5ed313e05565f7f869b5d3b2?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Ye", "link": "https://stackoverflow.com/users/6851908/jason-ye"}, "is_accepted": true, "score": 2, "last_activity_date": 1496887069, "creation_date": 1496887069, "answer_id": 44425458, "question_id": 44416561, "link": "https://stackoverflow.com/questions/44416561/getting-error-msrestazureazureoperationerror-authorizationfailed-while-trying/44425458#44425458", "title": "Getting error MsRestAzure::AzureOperationError: AuthorizationFailed while trying to create vm instance using Ruby api", "body": "<p>Root cause is the service principal you are using <strong>doesn't</strong> have <strong>rights</strong> within that tenant.</p>\n\n<p>Tenants have subscriptions and service principals belong to tenants. Azure resource manager also exposes role based authorization for a given principal, which would give it rights on Azure resources. It appears the service principal doesn't have rights to read from that subscription.</p>\n\n<p>Please use Azure CLI 2.0 to create service principal:</p>\n\n<pre><code>az ad sp create-for-rbac --role=\"Contributor\" --scopes=\"/subscriptions/mySubscriptionID/resourceGroups/myResourceGroupName\"\n</code></pre>\n\n<p>Here is the information about <a href=\"https://docs.microsoft.com/cs-cz/cli/azure/install-azure-cli\" rel=\"nofollow noreferrer\">CLI 2.0</a> to create service principal:</p>\n\n<pre><code>C:\\Users&gt;az ad sp create-for-rbac -h\n\nCommand\n    az ad sp create-for-rbac: Create a service principal and configure its access to Azure\n    resources.\n\nArguments\n    --cert           : PEM or DER formatted public certificate using string or `@&lt;file path&gt;` to\n                       load from a file. Do not include private key info.\n    --create-cert    : Create and upload self-signed certificate which you can use to login.\n    --expanded-view  : Once created, display more information like subscription and cloud\n                       environments.\n    --name -n        : A display name or an app id uri. Command will generate one if missing.\n    --password -p    : The password used to login. If missing, command will generate one.\n    --role           : Role the service principal has on the resources.  Default: Contributor.\n    --scopes         : Space separated scopes the service principal's role assignment applies to.\n                       Defaults to the root of the current subscription.\n    --skip-assignment: Do not create default assignment.\n    --years          : Years the password will be valid. Default: 1 year.\n\nGlobal Arguments\n    --debug          : Increase logging verbosity to show all debug logs.\n    --help -h        : Show this help message and exit.\n    --output -o      : Output format.  Allowed values: json, jsonc, table, tsv.  Default: json.\n    --query          : JMESPath query string. See http://jmespath.org/ for more information and\n                       examples.\n    --verbose        : Increase logging verbosity. Use --debug for full debug logs.\n\nExamples\n    Create with a default role assignment.\n        az ad sp create-for-rbac\n\n    Create using a custom name, and with a default assiggment.\n        az ad sp create-for-rbac -n \"http://MyApp\"\n\n    Create without a default assignment.\n        az ad sp create-for-rbac --skip-assignment\n\n    Create with customized assignments\n        az ad sp create-for-rbac -n \"http://MyApp\" --role contributor --scopes\n        /subscriptions/11111111-2222-3333-4444-555555555555/resourceGroups/MyResourceGroup\n        /subscriptions/11111111-2222-3333-4444-666666666666/resourceGroups/MyAnotherResourceGroup\n\n    Create using self-signed certificte\n        az ad sp create-for-rbac --create-cert\n\n    Login with a service principal.\n        az login --service-principal -u &lt;name&gt; -p &lt;password&gt; --tenant &lt;tenant&gt;\n\n    Login with self-signed certificate\n        az login --service-principal -u &lt;name&gt; -p &lt;certificate file path&gt; --tenant &lt;tenant&gt;\n\n    Reset credentials on expiration.\n        az ad sp reset-credentials --name &lt;name&gt;\n\n    Create extra role assignments in future.\n        az role assignment create --assignee &lt;name&gt; --role Contributor\n\n    Revoke the service principal when done with it.\n        az ad app delete --id &lt;name&gt;\n\n    Create using certificate from Key Vault\n        az keyvault certificate download --vault-name vault -n cert-name -f cert.pem\n        az ad sp create-for-rbac --cert @cert.pem\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1496935395, "post_id": 44427962, "comment_id": 75877037, "body": "Yes, I have created app as example-app but in step 6 I can&#39;t find my app name. Instead it shows username which I am logged in."}], "tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1496902556, "creation_date": 1496902556, "answer_id": 44427962, "question_id": 44416561, "link": "https://stackoverflow.com/questions/44416561/getting-error-msrestazureazureoperationerror-authorizationfailed-while-trying/44427962#44427962", "title": "Getting error MsRestAzure::AzureOperationError: AuthorizationFailed while trying to create vm instance using Ruby api", "body": "<p>Also, you can follow the steps below to give a role for the service principal to add permission for your app on Azure portal, as the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PByiq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PByiq.png\" alt=\"enter image description here\"></a></p>\n\n<ol>\n<li>Move to the <code>Subscription</code> category.</li>\n<li>Select the currect subscription for your app.</li>\n<li>Click the <code>Access control (IAM)</code> tab.</li>\n<li>Click the <code>+ Add</code> button.</li>\n<li>Select the <code>Contributor</code> role in the <code>Add permission</code> dialog.</li>\n<li>Search with your app name, and select the app in the searched list.</li>\n<li>Click the <code>Save</code> button.</li>\n</ol>\n"}], "owner": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 44425458, "answer_count": 2, "score": 0, "last_activity_date": 1496902556, "creation_date": 1496848366, "last_edit_date": 1496889979, "question_id": 44416561, "link": "https://stackoverflow.com/questions/44416561/getting-error-msrestazureazureoperationerror-authorizationfailed-while-trying", "title": "Getting error MsRestAzure::AzureOperationError: AuthorizationFailed while trying to create vm instance using Ruby api", "body": "<p>I am new to Azure platform. I have followed this link to generate service principle : <a href=\"https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal</a></p>\n\n<p>When I reach to step : <strong>Assign application to role > point 6 (Search for your application, and select it.)</strong> I can't see my application in result of search.</p>\n\n<p>After that I have tried to create VM using ruby api :</p>\n\n<p><a href=\"https://github.com/Azure/azure-sdk-for-ruby/tree/master/management/azure_mgmt_compute\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-ruby/tree/master/management/azure_mgmt_compute</a></p>\n\n<p>When I implement code to create VM, I get following error : </p>\n\n<pre><code>\"message\": \"MsRestAzure::AzureOperationError: AuthorizationFailed: The client 'xxxx' with object id 'xxxx' does not have authorization to perform action 'Microsoft.Compute/virtualMachines/write' over scope '/subscriptions/xxxx/resourceGroups/my_group/providers/Microsoft.Compute/virtualMachines/test-ubuntu3'.\",\n</code></pre>\n\n<p>In above error message both client and object id is same. I don't know why and what is the meaning of object id. </p>\n\n<p>How I can resolve this issue ? Where I should look at in portal ? Any help will be appreciated.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 4, "creation_date": 1496850779, "post_id": 44416332, "comment_id": 75833696, "body": "&quot;this seems to failing&quot; is not a precise enough error description for us to help you. <i>What</i> fails? <i>How</i> does it fail? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 1, "user_id": 8124857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10211353984583868/picture?type=large", "display_name": "Sajeesh Krishnan", "link": "https://stackoverflow.com/users/8124857/sajeesh-krishnan"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1496853759, "post_id": 44416332, "comment_id": 75835524, "body": "There is no error; my &quot;myfile.out&quot; file just gets blanks lines filling in when I pass something into the &quot;File.open(file,&quot;r&quot;)&quot;."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1496881866, "post_id": 44416332, "comment_id": 75848027, "body": "Rather than write it in Ruby, use <code>tail -f &quot;file&quot; &gt;&gt; myfile.out </code> and let the system handle it. It&#39;ll be faster."}, {"owner": {"reputation": 1, "user_id": 8124857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10211353984583868/picture?type=large", "display_name": "Sajeesh Krishnan", "link": "https://stackoverflow.com/users/8124857/sajeesh-krishnan"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496897287, "post_id": 44416332, "comment_id": 75851591, "body": "Thanks for the inout @theTinMan"}, {"owner": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "edited": false, "score": 1, "creation_date": 1496903658, "post_id": 44416332, "comment_id": 75854467, "body": "If you don&#39;t have ruby on your production node, how are you running ruby on your production node?"}], "answers": [{"tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": false, "score": 0, "last_activity_date": 1497069974, "creation_date": 1497069974, "answer_id": 44469625, "question_id": 44416332, "link": "https://stackoverflow.com/questions/44416332/ruby-as-a-file-is-getting-written-write-those-line-to-a-different-file/44469625#44469625", "title": "Ruby : As a file is getting written; write those line to a different file", "body": "<p>It's not a great idea to reopen the output file each time through the loop. If you are just planning on appending and not reading the file, use <code>'a'</code> rather than '<code>a+'</code> for the IO mode. Also, there's no good reason to use string interpolation like <code>\"#{line}\"</code>. I rewrote the method to open each file just once:</p>\n\n<pre><code>def watch_for(file)\n\n  f = File.open(file,\"r\")\n  f.seek(0,IO::SEEK_END)\n  s = File.open('myfile.out', 'a')\n\n  while true do\n    s.write(f.readline)\n  end\nend\n</code></pre>\n\n<p>Probably better if this isn't a method at all since there's no way to exit except to kill the process. And, of course, you can just use <code>tail -f $file &gt;&gt; myfile.out</code> as mentioned in <a href=\"https://stackoverflow.com/questions/44416332/ruby-as-a-file-is-getting-written-write-those-line-to-a-different-file#comment75848027_44416332\">this comment</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8124857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10211353984583868/picture?type=large", "display_name": "Sajeesh Krishnan", "link": "https://stackoverflow.com/users/8124857/sajeesh-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1497069974, "creation_date": 1496847788, "last_edit_date": 1496853674, "question_id": 44416332, "link": "https://stackoverflow.com/questions/44416332/ruby-as-a-file-is-getting-written-write-those-line-to-a-different-file", "title": "Ruby : As a file is getting written; write those line to a different file", "body": "<p>Due to some OS restrictions I am not able to install ruby and mysql on my prod node. I have to process a Log file written on that node. So I planning to write the contents of the log file to a different file as its written to the log and work on that new file. </p>\n\n<pre><code>def watch_for(file)\n\n       f = File.open(file,\"r\")\n       f.seek(0,IO::SEEK_END)\n\n       while true do\n\n             select([f])\n             line = f.gets\n\n             open('myfile.out', 'a+') { |s|\n\n              s.puts \"#{line}\"\n\n                }\n\n             end\n       end\n</code></pre>\n\n<p>But this seems to failing;  Any help to this is much appreciated.</p>\n"}, {"tags": ["ruby", "ruby-object-mapper", "rom-rb"], "answers": [{"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": true, "score": 2, "last_activity_date": 1496853766, "creation_date": 1496853766, "answer_id": 44418440, "question_id": 44416316, "link": "https://stackoverflow.com/questions/44416316/how-to-enable-query-logger-in-rom-sql-rom-rb/44418440#44418440", "title": "How to enable query logger in rom-sql (rom-rb)?", "body": "<p>Got it: <a href=\"http://www.rubydoc.info/gems/rom-sql/ROM/SQL/Gateway#use_logger-instance_method\" rel=\"nofollow noreferrer\">ROM::SQL::Gateway#use_logger</a></p>\n"}], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 44418440, "answer_count": 1, "score": 2, "last_activity_date": 1496853766, "creation_date": 1496847742, "question_id": 44416316, "link": "https://stackoverflow.com/questions/44416316/how-to-enable-query-logger-in-rom-sql-rom-rb", "title": "How to enable query logger in rom-sql (rom-rb)?", "body": "<p>In <a href=\"https://github.com/rom-rb/rom-sql\" rel=\"nofollow noreferrer\">rom-sql</a> I want to enable logging, so that I can see all the sql queries that are produced.</p>\n\n<p>How can I achieve that?</p>\n\n<p>Because it uses sequel underneath, I guest it may be somehow possible through <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/cheat_sheet_rdoc.html#label-Logging+SQL+statements\" rel=\"nofollow noreferrer\">sequel logger</a>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cloud9-ide"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1496847430, "post_id": 44416105, "comment_id": 75831319, "body": "You can <a href=\"https://docs.c9.io/docs/deploying-via-cli\" rel=\"nofollow noreferrer\">deploy to heroku</a> from cloud9."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1496854342, "post_id": 44416105, "comment_id": 75835829, "body": "<a href=\"https://www.railstutorial.org/book/beginning#sec-deploying\" rel=\"nofollow noreferrer\">railstutorial.org/book/beginning#sec-deploying</a>"}], "answers": [{"tags": [], "owner": {"reputation": 516, "user_id": 3250209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a6b46b0e82e39f04fce1a45773f8e4?s=128&d=identicon&r=PG", "display_name": "0xFED5550", "link": "https://stackoverflow.com/users/3250209/0xfed5550"}, "is_accepted": false, "score": 2, "last_activity_date": 1496847964, "creation_date": 1496847964, "answer_id": 44416403, "question_id": 44416105, "link": "https://stackoverflow.com/questions/44416105/rails-how-to-publish-a-website/44416403#44416403", "title": "Rails: How to &quot;publish&quot; a website", "body": "<p>To publish your website you need to host it somewhere.</p>\n\n<p>There are multiple ways to do this. For instance you can use <a href=\"https://www.heroku.com/\" rel=\"nofollow noreferrer\">Heroku</a>. They provide PaaS (Platform as a service), which means they will handle the installation of the app for you and the maintenance of the virtual machine it resides (updates and whatnot).</p>\n\n<p>Heroku also gives you a very nice admin view for the status of your app, online log display and some other goodies.</p>\n\n<p>Another alternative would be <a href=\"https://aws.amazon.com/\" rel=\"nofollow noreferrer\">Amazon Web Services</a>, <a href=\"https://www.linode.com/\" rel=\"nofollow noreferrer\">DigitalOcean</a> or Linode (among many others!). They provide IaaS(Infrastructure as a Service). They only give you a virtual machine with your choice of operating system, you will have to manually publish your app and provide manual maintenance of the VM and pretty much anything including the database itself.</p>\n\n<p>Using Heroku would be your best choice for the moment as they are very straightforward with the publishing part. Once you get the grip you can go to the other platforms for customization.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2261123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a25c7d7294cfd9ab7dfe42ab206c8bc6?s=128&d=identicon&r=PG", "display_name": "codfreak", "link": "https://stackoverflow.com/users/2261123/codfreak"}, "is_accepted": false, "score": 0, "last_activity_date": 1496859766, "creation_date": 1496859766, "answer_id": 44420136, "question_id": 44416105, "link": "https://stackoverflow.com/questions/44416105/rails-how-to-publish-a-website/44420136#44420136", "title": "Rails: How to &quot;publish&quot; a website", "body": "<p>You will also need some deployment tools such as capistrano or mina.</p>\n\n<p>If you're going to host your app in heroku, it's much easier to deploy. As simple as pushing your codes with git.</p>\n"}], "owner": {"reputation": 983, "user_id": 8071619, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50886b3c3d8869f63e18250f5159bcde?s=128&d=identicon&r=PG&f=1", "display_name": "bockdavidson", "link": "https://stackoverflow.com/users/8071619/bockdavidson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496859766, "creation_date": 1496847223, "question_id": 44416105, "link": "https://stackoverflow.com/questions/44416105/rails-how-to-publish-a-website", "title": "Rails: How to &quot;publish&quot; a website", "body": "<p>So, I am almost done with my website. I created it using ruby on rails on the Cloud9 IDE. Is there a way to publish it? To go on it, a user has to be signed on Cloud9 and then I need to run the code on the terminal...</p>\n\n<pre><code>rails server -b $IP -p $PORT\n</code></pre>\n\n<p>How would I be able to publish my website? I am very new to rails and I have no idea.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "has-many-through", "model-associations"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 6003113, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c7775e9f78b27b76ccee0f0efaf9fd95?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Smith", "link": "https://stackoverflow.com/users/6003113/alexander-smith"}, "edited": false, "score": 0, "creation_date": 1496851635, "post_id": 44417006, "comment_id": 75834227, "body": "Awesome Thank You!"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 127, "user_id": 6003113, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c7775e9f78b27b76ccee0f0efaf9fd95?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Smith", "link": "https://stackoverflow.com/users/6003113/alexander-smith"}, "edited": false, "score": 0, "creation_date": 1496860201, "post_id": 44417006, "comment_id": 75838910, "body": "@AlexanderSmith glad to help :)"}], "tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": true, "score": 0, "last_activity_date": 1496850417, "last_edit_date": 1496850417, "creation_date": 1496849544, "answer_id": 44417006, "question_id": 44416020, "link": "https://stackoverflow.com/questions/44416020/rails-5-has-many-through-and-nested-attributes-forms/44417006#44417006", "title": "Rails 5 - has_many through and nested attributes forms", "body": "<h2>Explanations:</h2>\n\n<ul>\n<li><p>Your <code>request_params</code> permits <code>table_locations: [:id]</code>, but this only permits the following format:</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", ... \"request\"=&gt;{\"table_locations\"=&gt;{\"id\"=&gt;\"1\"}, \"comments\"=&gt;\"\"}, \"commit\"=&gt;\"Submit\"}\n</code></pre>\n\n<p>but yours is showing to be:</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", ... \"request\"=&gt;{\"table_locations\"=&gt;[\"1\"], \"comments\"=&gt;\"\"}, \"commit\"=&gt;\"Submit\"}\n</code></pre>\n\n<ul>\n<li>therefore, try this: <code>puts request_params</code> inside the create method, and you'll notice that it doesn't have table_locations values (even though you thought it's there, but it's not), because it is not \"properly\" whitelisted in your strong params <code>request_params</code>.</li>\n</ul></li>\n<li><p>To be able to associate multiple <code>TableLocations</code> objects to a newly built <code>Request</code> object, the format should be something like below</p>\n\n<pre><code>request = Request.new(table_location_ids: [1,2,3,4,5])\n</code></pre>\n\n<p>but from your implementation, you're doing it like this (which won't work):</p>\n\n<pre><code>request = Request.new(table_locations: [1,2,3,4,5])\n# =&gt; this will raise an error:\n# ActiveRecord::AssociationTypeMismatch: TableLocation expected, got Fixnum\n# however yours didn't raise an error, because it was not whitelisted in the request_params in the first place\n</code></pre></li>\n</ul>\n\n<h2>Solution:</h2>\n\n<p><strong>requests_controller.rb</strong></p>\n\n<pre><code>def request_params\n  params.require(:request).permit(..., table_location_ids: [])\nend\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;% TableLocation.all.each do |t| %&gt;\n  &lt;%= check_box_tag \"request[table_location_ids][]\", t.id %&gt;\n  &lt;%= t.location %&gt;\n  &lt;br /&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h2>Recommendation:</h2>\n\n<ul>\n<li><p>just in case you don't know yet that you can do the following in this way, I'll be refactoring your code to look something like this:</p>\n\n<p><strong>requests_controller.rb</strong></p>\n\n<pre><code>def create\n  @table_locations = TableLocation.all\nend\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for @request do |f| %&gt;\n  &lt;% @table_locations.each do |table_location| %&gt;\n    &lt;%= f.check_box :table_location_ids, multiple: true, table_location.id %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 127, "user_id": 6003113, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c7775e9f78b27b76ccee0f0efaf9fd95?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Smith", "link": "https://stackoverflow.com/users/6003113/alexander-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 0, "accepted_answer_id": 44417006, "answer_count": 1, "score": 0, "last_activity_date": 1496850417, "creation_date": 1496847027, "question_id": 44416020, "link": "https://stackoverflow.com/questions/44416020/rails-5-has-many-through-and-nested-attributes-forms", "title": "Rails 5 - has_many through and nested attributes forms", "body": "<p>I have two models <strong>Request</strong> and <strong>TableLocation</strong> with both having a <strong>has_many through</strong> relationship joined by <strong>RequestLocation</strong> table.</p>\n\n<p>I am trying to create a nested form and the table_location data is not being saved to the database.</p>\n\n<p>As you can see the <strong>table_locations\"=>[\"1\"]</strong> parameter is being passed to the create action but not being saved.</p>\n\n<p>Appreciate any help.</p>\n\n<p><strong>Console Output</strong></p>\n\n<pre><code>Started POST \"/requests\" for 127.0.0.1 at 2017-06-07 10:35:26 -0400\nProcessing by RequestsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"mHV/xbmdfHmCAsi16KXlW+0bWVSkEo9SRVchdyPpL60o3m3SuKEt4nuUT4PJNEyCsWq3Nj4IWiCMlDbhiPewdA==\", \"request\"=&gt;{\"concierge_name\"=&gt;\"Alex\", \"concierge_number\"=&gt;\"954-123-4567\", \"concierge_email\"=&gt;\"alex@email.com\", \"client_name\"=&gt;\"Adam\", \"client_number\"=&gt;\"954-765-4321\", \"client_email\"=&gt;\"adam@email.com\", \"hotel_employee\"=&gt;\"0\", \"concierge_service\"=&gt;\"0\", \"vip_promoter\"=&gt;\"0\", \"arriving_with_client\"=&gt;\"1\", \"client_alone\"=&gt;\"0\", \"males\"=&gt;\"\", \"females\"=&gt;\"1\", \"table_minimum\"=&gt;\"1000\", \"arrival_time(1i)\"=&gt;\"2017\", \"arrival_time(2i)\"=&gt;\"6\", \"arrival_time(3i)\"=&gt;\"7\", \"arrival_time(4i)\"=&gt;\"14\", \"arrival_time(5i)\"=&gt;\"35\", \"table_locations\"=&gt;[\"1\"], \"comments\"=&gt;\"\"}, \"commit\"=&gt;\"Submit\"}\n   (0.1ms)  BEGIN\n  SQL (0.4ms)  INSERT INTO \"requests\" (\"concierge_name\", \"concierge_number\", \"concierge_email\", \"client_name\", \"client_number\", \"client_email\", \"arriving_with_client\", \"people\", \"females\", \"table_minimum\", \"arrival_time\", \"comments\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING \"id\"  [[\"concierge_name\", \"Alex\"], [\"concierge_number\", \"954-123-4567\"], [\"concierge_email\", \"alex@email.com\"], [\"client_name\", \"Adam\"], [\"client_number\", \"954-765-4321\"], [\"client_email\", \"adam@email.com\"], [\"arriving_with_client\", \"t\"], [\"people\", 1], [\"females\", 1], [\"table_minimum\", 1000], [\"arrival_time\", \"2017-06-07 14:35:00\"], [\"comments\", \"\"], [\"created_at\", \"2017-06-07 14:35:26.658718\"], [\"updated_at\", \"2017-06-07 14:35:26.658718\"]]\n   (0.3ms)  COMMIT\nRedirected to http://localhost:3000/thanks\nCompleted 302 Found in 8ms (ActiveRecord: 0.8ms)\n</code></pre>\n\n<p><strong>app/models/request.rb</strong></p>\n\n<pre><code>class Request &lt; ApplicationRecord\n    has_many :request_locations\n    has_many :table_locations, through: :request_locations\nend\n</code></pre>\n\n<p><strong>app/models/table_locations.rb</strong></p>\n\n<pre><code>class TableLocation &lt; ApplicationRecord\n    has_many :request_locations\n    has_many :requests, through: :request_locations\nend\n</code></pre>\n\n<p><strong>app/models/request_location.rb</strong></p>\n\n<pre><code>class RequestLocation &lt; ApplicationRecord\n    belongs_to :request\n    belongs_to :table_location\nend\n</code></pre>\n\n<p><strong>app/controllers/requests_controller.rb</strong></p>\n\n<pre><code>class RequestsController &lt; ApplicationController\n  before_action :set_request, only: [:show,\n                                     :edit,\n                                     :update,\n                                     :destroy]\n\n  before_action :authenticate_admin!, except: [:index,\n                                               :new,\n                                               :create]\n\n  def index\n    redirect_to root_path unless admin_signed_in?\n    @requests = Request.search(params[:term], params[:filter], params[:page])\n  end\n\n  def show\n  end\n\n  def new\n    @request = Request.new\n  end\n\n  def edit\n  end\n\n  def create\n    @request = Request.new(request_params)\n    @request.people = (@request.males || 0) + (@request.females || 0)\n\n    respond_to do |format|\n      if @request.save\n        format.html { redirect_to thanks_path, notice: 'Request was successfully created.' }\n        format.json { render :show, status: :created, location: @request }\n      else\n        format.html { render :new }\n        format.json { render json: @request.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @request.update(request_params)\n        format.html { redirect_to @request, notice: 'Request was successfully updated.' }\n        format.json { render :show, status: :ok, location: @request }\n      else\n        format.html { render :edit }\n        format.json { render json: @request.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @request.destroy\n    respond_to do |format|\n      format.html { redirect_to requests_url, notice: 'Request was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n\n    def set_request\n      @request = Request.find(params[:id])\n    end\n\n    def request_params\n      params.require(:request).permit(:concierge_name,\n                                      :concierge_number,\n                                      :concierge_email,\n                                      :client_name,\n                                      :client_number,\n                                      :client_email,\n                                      :hotel_employee,\n                                      :concierge_service,\n                                      :vip_promoter,\n                                      :arriving_with_client,\n                                      :client_alone,\n                                      :people,\n                                      :males,\n                                      :females,\n                                      :table_minimum,\n                                      :arrival_time,\n                                      :comments,\n                                      table_locations: [:id]\n      )\n    end\nend\n</code></pre>\n\n<p><strong>app/views/requests/_form.html.erb</strong></p>\n\n<pre><code>...\n&lt;% TableLocation.all.each do |t| %&gt;\n    &lt;%= check_box_tag \"request[table_locations][]\", t.id, @request.table_locations.include?(t.id) %&gt;\n    &lt;%= t.location %&gt;\n    &lt;br /&gt;\n&lt;% end %&gt;\n...\n</code></pre>\n"}, {"tags": ["ruby", "text", "escaping", "double-quotes", "page-object-gem"], "comments": [{"owner": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "edited": false, "score": 0, "creation_date": 1496936314, "post_id": 44415992, "comment_id": 75877778, "body": "Can you post the code that generates this error message? How are you using the page-object gem? Also, it seems there is some way of changing the encoding using the gem, have you tried anything along those lines?"}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 7252299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d409a8bbf050e0fc4adc2b871e06ed13?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/7252299/sarah"}, "edited": false, "score": 0, "creation_date": 1496951385, "post_id": 44441016, "comment_id": 75886370, "body": "This is what I was looking for. Unfortunately, I do need the part in quotes as part of the validation as there are multiple similar error messages and I need to make sure that I&#39;m getting the correct one."}], "tags": [], "owner": {"reputation": 108, "user_id": 2341167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eca39395f726275c99eacb4e3ac32bf?s=128&d=identicon&r=PG", "display_name": "Jared Darling", "link": "https://stackoverflow.com/users/2341167/jared-darling"}, "is_accepted": true, "score": 1, "last_activity_date": 1496939103, "creation_date": 1496939103, "answer_id": 44441016, "question_id": 44415992, "link": "https://stackoverflow.com/questions/44415992/how-to-escape-double-quotes-from-ruby-page-object-text/44441016#44441016", "title": "How to Escape Double Quotes from Ruby Page Object text", "body": "<p>Honestly you are over complicating your validation. </p>\n\n<p>I would recommend simplifying what you are trying to do, start by asking yourself: Is the part in quotes a critical part of your validation?</p>\n\n<p>If it is, isolate it by doing a String.contains(\"EMS\")</p>\n\n<p>If it is not, then you are probably doing too much work, only check for exactly what you need in validation:</p>\n\n<p>String.beginsWith(\"Please select a category other than the Default\")</p>\n\n<p>With respect to the actual issue you are having, on a technical level you have an encoding issue. Encode your result string with utf-8 before you pass it to your validation and you will be fine.</p>\n\n<p>Good luck</p>\n"}, {"tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": false, "score": 0, "last_activity_date": 1497121899, "creation_date": 1497121899, "answer_id": 44477113, "question_id": 44415992, "link": "https://stackoverflow.com/questions/44415992/how-to-escape-double-quotes-from-ruby-page-object-text/44477113#44477113", "title": "How to Escape Double Quotes from Ruby Page Object text", "body": "<p>It's pretty likely that somewhere along the line encoded the string improperly. (A tipoff is the accented characters followed by <code>?</code>.) It seems pretty likely that the quotes were converted to \"smart quotes\" somewhere. <a href=\"http://www.i18nqa.com/debug/utf8-debug.html\" rel=\"nofollow noreferrer\">This table</a> compares Window-1252 to UTF-8:</p>\n\n<pre><code>Code Point      Characters          UTF-8 Bytes\nUnicode Windows\n        1252    Expected    Actual\n------  ----    -           ---     ----------- \nU+201C  0x93    \u201c           \u00e2\u20ac\u0153     %E2 %80 %9C\nU+201D  0x94    \u201d           \u00e2\u20ac      %E2 %80 %9D\n</code></pre>\n\n<p>What you'll want to do is spot check various places in the code to find the first place the string is encoded in something other than UTF-8:</p>\n\n<pre><code>puts error_str.encoding\n</code></pre>\n\n<p>(For clarity, <code>error_str</code> is the variable that holds the string you are testing. I'm using <code>puts</code>, but you might want have another way to log diagnostic messages.)</p>\n\n<p>Once you find the string that's not encoded UTF-8, you can convert it:</p>\n\n<pre><code>error_str.encode('UTF-8')\n</code></pre>\n\n<p>Or, if the string is hardcoded somewhere, just replace the string.</p>\n\n<p>For more debugging advice, see: <a href=\"http://www.justinweiss.com/articles/3-steps-to-fix-encoding-problems-in-ruby/\" rel=\"nofollow noreferrer\">3 Steps to Fix Encoding Problems in Ruby</a> and <a href=\"http://www.justinweiss.com/articles/how-to-get-from-theyre-to-theyre/\" rel=\"nofollow noreferrer\">How to Get From They\u00e2\u20ac\u2122re to They\u2019re</a>.</p>\n"}], "owner": {"reputation": 269, "user_id": 7252299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d409a8bbf050e0fc4adc2b871e06ed13?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/7252299/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 44441016, "answer_count": 2, "score": 0, "last_activity_date": 1497121899, "creation_date": 1496846962, "last_edit_date": 1496934362, "question_id": 44415992, "link": "https://stackoverflow.com/questions/44415992/how-to-escape-double-quotes-from-ruby-page-object-text", "title": "How to Escape Double Quotes from Ruby Page Object text", "body": "<p>In using the Page Object gem, I'm trying to pull text from a page to verify error messages. One of these error messages contains double-quotes, but when the page object pulls the text from the page, it pulls some other characters.</p>\n\n<pre><code>expected [\"Please select a category other than the Default \u00e2?oEMS\u00e2?? before saving.\"] \nto include \"Please select a category other than the Default \\\"EMS\\\" before saving.\" \n(RSpec::Expectations::ExpectationNotMetError)\n</code></pre>\n\n<p>I'm not quite sure how to escape these - I'm not sure where I could use Regexs and be able to escape these odd characters.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1496847734, "post_id": 44415917, "comment_id": 75831553, "body": "I&#39;ve been able to save some 5s by converting the array of Products into a hash right after loading from the database. Turns out working with objects was a significant bottleneck. Still looking for tips though, I&#39;d like to get this to generate the &quot;tree&quot; in under 2 seconds. Also looking at sorting the arrays in memory so I can play with bsearch, not sure if it&#39;s worth it though as what I save from selecting might be spent on sorting."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1496857168, "post_id": 44415917, "comment_id": 75837311, "body": "so many nested queries - can you show us what your JSON output looks like please."}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1496915681, "post_id": 44415917, "comment_id": 75862275, "body": "had a similar problem, retrieving large amounts of orders from an eshop (so having nested queries for users, products, variants, etc\u2026 for every single orders). Ended up going redis. Defined a after_save on the product model, which store a json structure (could be a hash) for each product. You then get a blazing fast retrieval. That is not solving your speed problem per product though, but i don&#39;t think there&#39;s any black magic to expect right here"}, {"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1496928958, "post_id": 44415917, "comment_id": 75871877, "body": "I am also caching this (memcached) but must refresh it every hour or so. This means that every now and then an user will get stuck for some 15 seconds when hitting the page. So I&#39;m now trying to see if there&#39;s a way to improve the actual algorithm that builds the hash from the DB output, as i&#39;ve already denormalized the data model, optimized the table and so on."}], "owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496846759, "creation_date": 1496846759, "question_id": 44415917, "link": "https://stackoverflow.com/questions/44415917/optimize-creation-of-a-nested-hash-from-table", "title": "Optimize creation of a nested hash from table", "body": "<p>I have about 12,000,000 products in a table and looking to build a nested hash in Rails. I output this as JSON to clients.</p>\n\n<p>The table only has a few columns: date_time, country, category1 through 3</p>\n\n<p>Currently I am doing this:</p>\n\n<pre><code>      products = Product.where(\"date_time &gt; now()\").select(:date_time, :country, :category1, :category2, :category3).group(:date_time, :country, :category1, :category2, :category3).order(\"date_time asc\")\n      products.collect{ |m | m.category1 }.uniq.collect{ |s| {\n          :category1 =&gt; s, :active =&gt; false,\n          :category2s =&gt; products.select{ |l| l[:category1] == s }.collect{ |l| l[:category2] }.uniq.collect{ |l| {\n              :category1 =&gt; s,\n              :category2 =&gt; l, :active =&gt; false,\n              :country =&gt; (products.select{ |lc| lc[:category1] == s &amp;&amp; lc[:category2] == l }.first[:country] rescue nil) || 57,\n                :category3s =&gt; products.select{ |e| e[:category1] == s &amp;&amp; e[:category2] == l }.uniq.collect{ |e| {\n                  :category1 =&gt; s,\n                  :category2 =&gt; l,\n                  :category3 =&gt; e[:category3], :active =&gt; false,\n                  :date_time =&gt; (products.select{ |mc| mc[:category1] == s &amp;&amp; mc[:category2] == l &amp;&amp; mc[:category3] == e }.first[:date_time] rescue nil) || \"\"\n                }\n              }\n            }\n          }\n        }\n      }\n</code></pre>\n\n<p>Loading the products takes about 25ms which is OK, but generating the hash takes about 15-20 seconds depending load and whatnot.</p>\n\n<p>What's the best way to speed this up?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1496845844, "post_id": 44414959, "comment_id": 75830005, "body": "does <a href=\"https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb#L112\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/blob/master/app/controllers/&zwnj;&#8203;&hellip;</a> work for you ?"}], "answers": [{"comments": [{"owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "edited": false, "score": 0, "creation_date": 1496847373, "post_id": 44415812, "comment_id": 75831274, "body": "Michael ,Thanks for the quick response.I apologize for not making my question clear. Actually the steps are: 1.A user signs_up or signs_in. 2.The user selects customer button which renders customer.html.erb 3.After submitting the customer form ,then it has to redirect to theme_selector page."}, {"owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "reply_to_user": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "edited": false, "score": 0, "creation_date": 1496848139, "post_id": 44415812, "comment_id": 75831853, "body": "@suresh This form is not sign_up/sign_in form?"}], "tags": [], "owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "is_accepted": false, "score": 0, "last_activity_date": 1496846509, "creation_date": 1496846509, "answer_id": 44415812, "question_id": 44414959, "link": "https://stackoverflow.com/questions/44414959/unable-to-redirect-to-a-custom-action-in-devise-registrations-controller/44415812#44415812", "title": "unable to redirect to a custom action in devise registrations controller", "body": "<p><a href=\"https://github.com/plataformatec/devise/wiki/how-to:-redirect-to-a-specific-page-on-successful-sign-up-(registration)\" rel=\"nofollow noreferrer\">Easy solution</a> will be:</p>\n\n<p>In your <code>config/routes.rb</code></p>\n\n<pre><code>devise_for :users,\n    path: '',\n    path_names: {sign_in: 'login', sign_out: 'logout',sign_up: 'signup'},\n    controllers: { registrations: 'registrations}\n\n    devise_scope :user do \n        get 'users/theme-selector' =&gt; 'registrations#theme_selector', :as =&gt; 'theme-selector'\n</code></pre>\n\n<p>In your <code>registrations_controller.rb</code></p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n  protected\n\n  def after_sign_up_path_for(resource)\n    'users/theme-selector'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1496847194, "creation_date": 1496844359, "last_edit_date": 1496847194, "question_id": 44414959, "link": "https://stackoverflow.com/questions/44414959/unable-to-redirect-to-a-custom-action-in-devise-registrations-controller", "title": "unable to redirect to a custom action in devise registrations controller", "body": "<p>Excuse me for the noob question.</p>\n\n<p>I have a devise users model and i want to save additional data to the users model after a user signs_in/signs_up.</p>\n\n<p>routes.rb</p>\n\n<pre><code>     devise_for :users,\n        path: '',\n        path_names: {sign_in: 'login', sign_out: 'logout',sign_up: 'signup'},\n        controllers: { registrations: 'registrations\n\n        devise_scope :user do \n             match 'users/customer' =&gt; 'registrations#customer', :via =&gt; [:get], :as =&gt; 'customer'\n             match 'users/theme-selector' =&gt; 'registrations#theme_selector', :via =&gt; [:get], :as =&gt; 'theme-selector'\n        end \n</code></pre>\n\n<p>registrations_controller.rb</p>\n\n<pre><code>   class RegistrationsController &lt; Devise::RegistrationsController\n\n    protect_from_forgery :except =&gt; :create\n\n      def customer\n      @user = current_user\n\n    if @user\n       render :customer\n     # render :customer\n     # redirect_to controller: 'registations', action: 'theme_selector'\n\n\n        else\n            render file: 'public/404', status: 404, formats: [:html]\n         end   \n\n\n  end\n\n\n\n    def theme_selector\n         @user = current_user\n            if @user\n                render :theme_selector\n            else\n                render file: 'public/404', status: 404, formats: [:html]\n             end \n\n\n       end \n\n       end\n      end \n</code></pre>\n\n<p>customer.html.erb</p>\n\n<pre><code> &lt;div class=\"container huge-top small-bottom\"\"&gt;\n  &lt;div class=\"row large-top\"&gt;\n    &lt;div class=\"col-md-8\"&gt;\n    &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f|  %&gt;\n\n &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :\"Contact Person\" %&gt;\n    &lt;%= f.text_field :contact, class:\"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :\"Business Name\" %&gt;\n    &lt;%= f.text_field :name, class:\"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :phone %&gt;\n    &lt;%= f.text_field :phone, class:\"form-control\" %&gt;\n  &lt;/div&gt;\n   &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :email %&gt;\n    &lt;%= f.text_field :email, class:\"form-control\", required: true %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :\"Mailing Address\" %&gt;\n    &lt;%= f.text_field :address, class:\"form-control\" %&gt;\n  &lt;/div&gt;\n   &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :\"Do you currently have a domain?\" %&gt;\n    &lt;%= f.text_area :domain, class:\"form-control\" %&gt;\n  &lt;/div&gt;\n   &lt;div class=\"col-md-5\"&gt;\n   &lt;!--%= f.submit '+', :name =&gt; \"add_additional_fields\" %--&gt;\n    &lt;span&gt;&lt;%= f.submit 'Save', class: \"btn btn-success\" %&gt;&lt;/span&gt;\n&lt;span&gt;&lt;!--%= link_to 'Back', customers_path, class: \"btn btn-danger\" %--&gt;&lt;/span&gt;\n  &lt;/div&gt;\n\n  &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>The steps are:</p>\n\n<p>1.A user signs_up or sign_in.</p>\n\n<p>2.The user then selects customer button which renders customer.html.erb</p>\n\n<p>3.After submitting the customer form ,then it has to redirect to theme_selector page to select a certain theme.</p>\n\n<p>I could update the users model by submitting the data inside the <strong>customer.html.erb</strong> form .now I want to redirect to the theme_selector page and then pass in the theme_id to the users model.If i use <strong>redirect_to controller: 'registations', action: 'theme_selector'</strong> in the customer action , it is skipping customer form and rendering theme_selector page.How can I make it to redirect to theme_selector after the customer form.</p>\n\n<p>theme_selector.html.erb</p>\n\n<pre><code>  &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f|  %&gt;\n   &lt;div class=\"row\"&gt;\n   &lt;div class=\"col-md-4 col-sm-4 top-space\"&gt;\n      &lt;!-- thumbnail--&gt;\n      &lt;div class=\"thumbnail image-height\"&gt;\n        &lt;a href=\"http://theme1./\" target=\"_blank\"&gt;\n          &lt;div class=\"hovereffect\"&gt;\n            &lt;img src=\"/assets/1.jpg\" class=\"img-responsive theme\" alt=\"\"&gt;\n\n              &lt;div class=\"price-sale\"&gt;&lt;img src=\"/assets/new.png\"&gt;&lt;/div&gt;\n\n          &lt;/div&gt;  \n          &lt;div class=\"caption\"&gt;\n            &lt;h4&gt;Click Here&lt;/h4&gt;\n            &lt;!--p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere, soluta, eligendi doloribus sunt minus amet sit debitis repellat. Consectetur, culpa itaque odio similique suscipit&lt;/p--&gt;\n            &lt;p&gt;&lt;button class=\"btn-update\" role=\"button\"&gt;View&lt;/button&gt;&lt;/p&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;  \n      &lt;/div&gt;\n      &lt;div&gt;&lt;%= f.radio_button :theme_id, 'theme-1' %&gt; &lt;/div&gt;\n    &lt;!-- thumbnail end --&gt;\n    &lt;/div&gt;   \n    &lt;div class=\"col-md-4 col-sm-4 top-space\"&gt;\n      &lt;!-- thumbnail--&gt;\n      &lt;div class=\"thumbnail image-height\"&gt;\n        &lt;a href=\"http://theme2/\" target=\"_blank\"&gt;\n          &lt;div class=\"hovereffect\"&gt;\n            &lt;img src=\"/assets/2.jpg\" class=\"img-responsive theme\" alt=\"\"&gt;\n\n              &lt;div class=\"price-sale\"&gt;&lt;img src=\"/assets/new.png\"&gt;&lt;/div&gt;\n\n          &lt;/div&gt;  \n          &lt;div class=\"caption\"&gt;\n            &lt;h4&gt;Click Here&lt;/h4&gt;\n            &lt;!--p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere, soluta, eligendi doloribus sunt minus amet sit debitis repellat. Consectetur, culpa itaque odio similique suscipit&lt;/p--&gt;\n            &lt;p&gt;&lt;button class=\"btn-update\" role=\"button\"&gt;View&lt;/button&gt;&lt;/p&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;  \n      &lt;/div&gt;\n      &lt;div&gt;&lt;%= f.radio_button :theme_id, 'theme-1' %&gt; &lt;/div&gt;\n    &lt;!-- thumbnail end --&gt;\n    &lt;/div&gt;\n     &lt;div class=\"row\"&gt;\n &lt;div class=\"col-md-12 top-space\"&gt;&lt;%= f.submit 'Submit', class: \"btn-addmore\" %&gt;&lt;/div&gt;\n &lt;/div&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>Any Help or suggestion is highly Appreciated. Thanks in Advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1496844256, "post_id": 44414792, "comment_id": 75828651, "body": "<i>&quot;For some reason I can&#39;t find a full list of Rails 5 datatypes&quot;</i> -- Really?? <a href=\"https://stackoverflow.com/a/17918118/1954610\">This is the first result from a google search</a>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1496844303, "post_id": 44414792, "comment_id": 75828697, "body": "And <a href=\"https://github.com/rails/rails/blob/2b96d5822bfe407be7589e293f3265c0c7a6726c/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L73-L114\" rel=\"nofollow noreferrer\">here is the full list</a> of supported datatypes in rails 5, as of today."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 2, "creation_date": 1496844344, "post_id": 44414792, "comment_id": 75828737, "body": "You can also check <a href=\"http://edgeguides.rubyonrails.org/active_record_postgresql.html#array\" rel=\"nofollow noreferrer\">rails guides</a>"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496848559, "post_id": 44414792, "comment_id": 75832171, "body": "@TomLord Thanks for the updated list, I saw that Google result but it&#39;s an incomplete list."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1496849133, "post_id": 44415464, "comment_id": 75832566, "body": "What does <code>null: false</code> do? It makes empty arrays instead of null ones?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1496850990, "post_id": 44415464, "comment_id": 75833820, "body": "@JoeMorano It adds a database constraint. As with your original question, google is your friend."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1496857479, "post_id": 44415464, "comment_id": 75837474, "body": "Yes, it means that you cannot store a null in that column."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": true, "score": 2, "last_activity_date": 1496845676, "creation_date": 1496845676, "answer_id": 44415464, "question_id": 44414792, "link": "https://stackoverflow.com/questions/44414792/can-a-rails-attribute-be-an-array/44415464#44415464", "title": "Can a Rails attribute be an array?", "body": "<p>Yes indeed. Here is a sample migration to add an integer and a string array to a model:</p>\n\n<pre><code>class AddToBooks &lt; ActiveRecord::Migration\n  def change\n    add_column :books, :category_ids, :integer, array: true, default: [], null: false\n    add_column :books, :subjects    , :text   , array: true, default: [], null: false\n  end\nend\n</code></pre>\n\n<p>For arrays of strings, use <code>:text</code> as the type.</p>\n\n<p>I'd strongly recommend using an empty array instead of a null to indicate \"no data\", and this migration ensures that.</p>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 1, "accepted_answer_id": 44415464, "answer_count": 1, "score": 0, "last_activity_date": 1496845676, "creation_date": 1496843956, "question_id": 44414792, "link": "https://stackoverflow.com/questions/44414792/can-a-rails-attribute-be-an-array", "title": "Can a Rails attribute be an array?", "body": "<p>I recently learned about the <code>json</code> datatype in Rails 5, which allows you to store a hash in a PostgreSQL database. For some reason I can't find a full list of Rails 5 datatypes. Is there any sort of datatype that similarly allows you to store an array?</p>\n\n<p>Such that <code>example_record.array_datatype =&gt; [\"1\", \"2\", \"3\"]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": false, "score": 0, "last_activity_date": 1496861719, "creation_date": 1496861719, "answer_id": 44420712, "question_id": 44413675, "link": "https://stackoverflow.com/questions/44413675/after-commit-fires-but-attribute-changes-are-not-captured/44420712#44420712", "title": "after_commit fires but attribute changes are not captured", "body": "<p>You can not get any of the dirty changes from <code>after_commit</code>, you have to use <code>around_save</code>, similar to this:</p>\n\n<pre><code>class CaseStatus &lt; ActiveRecord::Base\n  # all other code removed for brevity\n\n  around_save :catch_previous_changes, on: :update\n\n  def catch_previous_changes\n    # see what attributes changed\n    yield\n    if persisted?\n      # maybe do so other stuff if everything is ok\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1496861719, "creation_date": 1496841146, "last_edit_date": 1496844722, "question_id": 44413675, "link": "https://stackoverflow.com/questions/44413675/after-commit-fires-but-attribute-changes-are-not-captured", "title": "after_commit fires but attribute changes are not captured", "body": "<p>So I am encountering something a bit weird and need help </p>\n\n<p>I have the following three models and their relationships are shown below</p>\n\n<pre><code>class Assignment &lt; ActiveRecord::Base\n  belongs_to :case_status\n  has_one :application, :through =&gt; :case_status, :autosave =&gt; false \n  after_create :update_status\n\n  def update_status\n    self.case_status.update_attributes!({loan_case_id: update_case_status_id})\n  end\nend\n\nclass CaseStatus &lt; ActiveRecord::Base\n  belongs_to: application\n  has_many :assignments, :dependent =&gt; :destroy\n  accepts_nested_attributes_for :assignments,\n                                :allow_destroy =&gt; true,\n                                reject_if: proc { |attr| attr[\"lender_id\"].blank? &amp;&amp; attr[\"banker_id\"].blank? }\n\n  after_commit :catch_previous_changes,on: :update\n\n  def catch_previous_changes\n    self.previous_changes\n  end\nend\n\nclass Application &lt; ActiveRecord::Base\n  has_one :case_status, :dependent =&gt; :destroy\nend\n</code></pre>\n\n<p>Basically, when an assignment is created, there is a method that updates the <code>loan_case_id</code> of that record on the case_status model but when the <code>self.versions</code> code is called, it is always empty.</p>\n\n<p>But when I check the record on rails console, the data has been updated which leads me to understand that the <code>after_commit</code> call is being triggered but somewhat ahead of the thread that has the previous changes of the attribute <code>loan_case_id</code>. </p>\n\n<p>Now I don't know how to debug this to know why this is happening because it only happens when d update is done via the after_create method. Any other form where the <code>loan_case_id</code> gets updated always has data when the <code>self.previous_changes</code> is called. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "is_accepted": false, "score": 0, "last_activity_date": 1513529636, "creation_date": 1513529636, "answer_id": 47857364, "question_id": 44413211, "link": "https://stackoverflow.com/questions/44413211/ruby-on-rails-michael-hartl-chapter-9-test-fails/47857364#47857364", "title": "Ruby on Rails Michael Hartl chapter 9 Test fails", "body": "<p>I have used the regex from here (<a href=\"https://www.regular-expressions.info/email.html\" rel=\"nofollow noreferrer\">https://www.regular-expressions.info/email.html</a>) in place of the original Hartl regex and all my tests are passing, which include the foo@bar..com being invalid.</p>\n\n<pre><code>VALID_EMAIL_REGEX = /[A-Z0-9._%+-]+@(?:[A-Z0-9-]+\\.)+[A-Z]{2,}/i # from https://www.regular-expressions.info/email.html\n</code></pre>\n\n<p>passes:</p>\n\n<pre><code>valid_address = %w[user@example.com USER@foo.COM A_US-ER@foo.bar.org\n                       first.last@foo.jp alice+bob@baz.cn user@test.1.two.com]\n\ninvalid_addresses = %w[user@example,com user_at_foo.org user.name@example.\n                         foo@bar_baz.com foo@bar+baz.com foo@bar..com foo@bar...com]\n</code></pre>\n"}], "owner": {"reputation": 352, "user_id": 8006728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209045163868286/picture?type=large", "display_name": "Umang Mistry", "link": "https://stackoverflow.com/users/8006728/umang-mistry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513529636, "creation_date": 1496839961, "question_id": 44413211, "link": "https://stackoverflow.com/questions/44413211/ruby-on-rails-michael-hartl-chapter-9-test-fails", "title": "Ruby on Rails Michael Hartl chapter 9 Test fails", "body": "<p>I was finishing up Chapter 9 from the RoR Tutorial and I was running the last test and a Failure showed up from the code which ran green in the previous tests. I searched the whole web and cross check code everywhere but I wasnt able to resolve it.</p>\n\n<p><strong>FAILURE MESSAGE:</strong> </p>\n\n<p>Failure:\nUserTest#test_email_validation_should_reject_invalid_address [/home/ubuntu/workspace/sample_app/test/models/user_test.rb:44]:\n\"foo@bar..com\"should be invalid</p>\n\n<p><strong>user_test.eb</strong></p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n\n  def setup\n    @user = User.new(name: \"Example User\", email: \"user@example.com\", password: \"foobar\", password_confirmation: \"foobar\")\n  end\n\n  test \"should be valid\" do \n    assert @user.valid?\n  end\n  test \"name should be present\" do\n    @user.name = \"   \"\n    assert_not @user.valid?\n  end\n\n  test \"email should be present\" do\n    @user.email = \" \"\n    assert_not @user.valid?\n  end\n\n  test \"name should not be too long\" do\n   @user.name = \"a\" * 51\n   assert_not @user.valid?\n  end\n\n  test \"email shouldnt be too long\" do\n    @user.email = \"a\" * 244 + \"@example.com\"\n    assert_not @user.valid?\n  end\n\n  test \"email validation should accept valid addresses\" do\n    valid_addresses = %w[user@example.com USER@foo.COM A_US-ER@foo.bar.org first.last@foo.jp alice+bob@baz.cn]\n    valid_addresses.each do |valid_address|\n      @user.email = valid_address\n      assert @user.valid?, \"#{valid_address.inspect} should be valid\"\n    end\n  end\n\n  test \"email validation should reject invalid address\" do\n    invalid_addresses = %w[user@example,com user_at_org.foo user.name@example. foo@bar_baz.com foo@bar+baz.com foo@bar..com]\n    invalid_addresses.each do |invalid_address|\n      @user.email = invalid_address\n      assert_not @user.valid?, \"#{invalid_address.inspect}should be invalid\"\n    end\n  end\n\n  test \"emails should be unique\" do\n    duplicate_user = @user.dup\n    duplicate_user.email = @user.email.upcase\n    @user.save\n    assert_not duplicate_user.valid?\n  end\n\n  test \"passwors should be present\" do\n    @user.password = @user.password_confirmation = \" \" * 6\n    assert_not @user.valid?\n  end\n\n  test \"password should have minimum length\" do \n    @user.password = @user.password_confirmation = \"a\" * 5\n    assert_not @user.valid?\n  end\n\n  test \"authenticated? should return false for a user with nil digest\" do\n    assert_not @user.authenticated?('')\n  end\n\nend\n</code></pre>\n\n<p><strong>User.eb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attr_accessor :remember_token\n  before_save { self.email = email.downcase }\n  validates :name,  presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }\n\n  # Returns the hash digest of the given string.\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  # Returns a random token.\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  # Remembers a user in the database for use in persistent sessions.\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(remember_token))\n  end\n\n  # Returns true if the given token matches the digest.\n  def authenticated?(remember_token)\n    return false if remember_digest.nil? #Add this line\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\nend\n</code></pre>\n\n<p>Help me out im stuck. Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd", "factory-bot"], "comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1496845639, "post_id": 44412974, "comment_id": 75829812, "body": "There are plenty of resources online demonstrating Rspec syntax and examples. You could Google <code>rspec controllers</code>. For starters, check out <a href=\"http://www.betterspecs.org/\" rel=\"nofollow noreferrer\">Better Specs</a>, <a href=\"https://relishapp.com/rspec/rspec-rails/docs/controller-specs\" rel=\"nofollow noreferrer\">Relish</a>, or even some articles like from <a href=\"https://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html\" rel=\"nofollow noreferrer\">Everyday Rails</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8125569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e1c0f31329ae4bfed13bbed0ecd6816?s=128&d=identicon&r=PG&f=1", "display_name": "Alcatraz", "link": "https://stackoverflow.com/users/8125569/alcatraz"}, "edited": false, "score": 0, "creation_date": 1496844851, "post_id": 44413949, "comment_id": 75829189, "body": "Hi, thanks for the elaborate explanation. Maybe I framed the question wrongly... I&#39;m more interested in the syntax part. If I get to know an example how to write one, I&#39;ll be able to write others by changing some tiny bits of logic here and there.... Let&#39;s say I have a basic test case just to see whether updating a user details is not returning an error because of validations, how should I write it with Factory Girl gem?"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 1, "user_id": 8125569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e1c0f31329ae4bfed13bbed0ecd6816?s=128&d=identicon&r=PG&f=1", "display_name": "Alcatraz", "link": "https://stackoverflow.com/users/8125569/alcatraz"}, "edited": false, "score": 0, "creation_date": 1496845423, "post_id": 44413949, "comment_id": 75829625, "body": "FactoryGirl is for creating the data for the test. So factory girl is a different issue. How to create the data should be a new question. I usually test validations in model specs. And you need to test all the cases. Write tests to make sure the creation doesn&#39;t happen when the validation fails and then a test where everything is present and creation occurs. If you want to make a question about testing validations I&#39;ll post an example there. I think these are separate questions for SO purposes. One is about how to use factory girl and one is about how to test validations."}], "tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 0, "last_activity_date": 1496841807, "creation_date": 1496841807, "answer_id": 44413949, "question_id": 44412974, "link": "https://stackoverflow.com/questions/44412974/how-to-write-rspec-for-basic-show-create-destroy-edit-methods-in-rails-with/44413949#44413949", "title": "How to write Rspec for basic Show, Create, Destroy, Edit methods in rails (with or without FactoryGirl)", "body": "<p>It's a pretty broad question, but in any kind of test, you want test whatever use cases you have available to you. Example--are there different paths users might follow from hitting a specific controller action.</p>\n\n<p>So you want your test to cover the basics. When you hit the create action, is a user actually created? If the relevant params are missing, is an error thrown? Use cases will drive your expectations.</p>\n\n<p>With rspec controllers specifically, you'll use the appropriate verb and the name of the action, and pass it whatever parameters are necessary.</p>\n\n<p><code>post :create, :user =&gt; { :user =&gt; temp }</code></p>\n\n<p>That basically says, \"do a post request to my create an action and pass it the parameters inside these curly braces.\"</p>\n\n<p>After running that rspec gives you access to the response. You can always log the response after a controller request to help you debug the situation: <code>p response</code>.</p>\n\n<p>You'll follow up each type of request with an expectation. The expectation should answer the question: \"What did I expect hitting this action to <em>do</em>?\" If you were, for instance, hitting the user update action and passed a param to change the user's age to 21, your expectation might be something like:</p>\n\n<p><code>expect(user.age).to eq(21)</code></p>\n\n<p>A great resource is the rspec documentation on relish. <a href=\"https://relishapp.com/rspec\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec</a></p>\n\n<p>\"How to\" do a broad general thing is a tough question to answer like this. My advice would be to try to actually test one, log the failure case, and post those logs in a new question and people on SO can help you work through testing a particular action you're struggling with.</p>\n"}], "owner": {"reputation": 1, "user_id": 8125569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e1c0f31329ae4bfed13bbed0ecd6816?s=128&d=identicon&r=PG&f=1", "display_name": "Alcatraz", "link": "https://stackoverflow.com/users/8125569/alcatraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 866, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1496845024, "creation_date": 1496839389, "last_edit_date": 1496845024, "question_id": 44412974, "link": "https://stackoverflow.com/questions/44412974/how-to-write-rspec-for-basic-show-create-destroy-edit-methods-in-rails-with", "title": "How to write Rspec for basic Show, Create, Destroy, Edit methods in rails (with or without FactoryGirl)", "body": "<p>I have a basic user_controller.rb file like this:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n\n  def new\n    @user = User.new\n  end\n\n  def index\n    @user = User.all\n  end\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      redirect_to @user\n    else\n      render 'new'\n    end      \n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def update\n    @user = User.find(params[:id])\n\n  if @user.update(user_params)\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n def destroy\n  @user = User.find(params[:id])\n  @user.destroy\n  redirect_to action: 'index'\n end\n\n private\n  def user_params\n   params.require(:user).permit(:name, :key, :desc)\n  end\nend\n</code></pre>\n\n<p>This is my (model) user.rb file:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  validates :name,    presence: true\n  validates :key,     uniqueness: true, presence: true\n  validates :desc,    presence: true\nend\n</code></pre>\n\n<p>And created a factories.rb file (in the specs folder):</p>\n\n<pre><code>FactoryGirl.define do \n  factory :user do\n   name \"TestUser\"\n   key \"TKey\"\n   desc \"TestDescription\"\n  end\nend\n</code></pre>\n\n<p>I tried several ways to make the specs work but I can't because of the confusing syntax. </p>\n\n<p>The only one which worked was (for the 'C' in the CRUD operations, the below file is user_controller_specs.rb):</p>\n\n<pre><code>require 'rails_helper'\nrequire 'factory_girl_rails'\n\nRSpec.describe UserController, :type =&gt; :controller do\n let(:temp) { FactoryGirl.build(:user) }\n\n describe \"POST create\" do\n  it \"should redirect back to the index page\" do\n     post :create, :user =&gt; { :user =&gt; temp }\n     expect(get: user_url(subdomain: nil)).to route_to(controller: \"user\", action: \"index\")\n  end\n end\nend\n</code></pre>\n\n<p>I skimmed through several tutorials to find what should be the correct approach for CRUD operations but didn't got any simple to understand specs. I am trying to write these in the specs/controllers folder but these are giving errors.  What should be the correct syntax to write the specs?</p>\n\n<p>PS: I'am new to Ruby/Rails and trying to write test cases with Rspec and FactoryGirl. Any help is appreciated.</p>\n\n<p>Edit:\n Maybe I framed the question wrongly... I'm more interested in the syntax part. If I get to know an example how to write one, I'll be able to write others by changing some tiny bits of logic here and there.... Let's say I have a basic test case just to see whether updating a user details is not returning an error because of validations, how should I write it with (or without) Factory Girl gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "edited": false, "score": 3, "creation_date": 1496838832, "post_id": 44412694, "comment_id": 75824429, "body": "What is the error message you are having?"}, {"owner": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "reply_to_user": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "edited": false, "score": 0, "creation_date": 1496839284, "post_id": 44412694, "comment_id": 75824746, "body": "@Ahmed sometimes routing error, and some other times syntax error as well"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 2, "creation_date": 1496844219, "post_id": 44412694, "comment_id": 75828614, "body": "<i>some routing error</i> doesn&#39;t say anything. <a href=\"https://stackoverflow.com/posts/44412694/edit\">edit</a> the question with relevant error messages and the code that is giving you errors."}, {"owner": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "edited": false, "score": 0, "creation_date": 1496846658, "post_id": 44412694, "comment_id": 75830679, "body": "the errors shown in particular is: ExecJS::ProgramError in Home#index, Showing c:/Sites/just/app/views/layouts/application.html.erb where line #7 raised:, , TypeError: Object doesn&#39;t support this property or method, this line is giving error they say:  &lt;%= stylesheet_link_tag    &#39;application&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6186854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde44dc07e88e8db3649ffad0df412b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abeer", "link": "https://stackoverflow.com/users/6186854/abeer"}, "is_accepted": false, "score": 1, "last_activity_date": 1496926807, "creation_date": 1496926807, "answer_id": 44436475, "question_id": 44412694, "link": "https://stackoverflow.com/questions/44412694/application-html-erb-not-letting-the-app-to-run/44436475#44436475", "title": "application.html.erb not letting the app to run", "body": "<p>No need to write <code>render :layout =&gt; false</code> on every action, you can set layout false for all actions of controler by refer this example.</p>\n\n<pre><code>BlogsController &lt; ApplicationController\n  layout false\n</code></pre>\n\n<p>This will stop layout for all actions of Blogs controller.</p>\n"}], "owner": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1496926807, "creation_date": 1496838665, "question_id": 44412694, "link": "https://stackoverflow.com/questions/44412694/application-html-erb-not-letting-the-app-to-run", "title": "application.html.erb not letting the app to run", "body": "<p>while creating a route to home#index from the route.rb file, it runs application.html.erb from the layout folder in view. Due to this the other routes are also not working. When i delete the application.html.erb file then the app runs smoothly. I believe that this applicaiton.html.erb is very important for us so i think its better not to delete. Is there any ways to run the app smoothly without deleting the file.</p>\n\n<p>i tried writing</p>\n\n<p>render :layout => false but i have to write in every action to not bring out the error message. I want to display some notice in my app but application.html.erb is not letting me..</p>\n\n<p>Please help Thank you </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailboxer"], "comments": [{"owner": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "edited": false, "score": 0, "creation_date": 1496838516, "post_id": 44412568, "comment_id": 75824203, "body": "you mean if there is a helper method in <code>MailBoxer</code> that directly getting participants without the originator?"}, {"owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "reply_to_user": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "edited": false, "score": 0, "creation_date": 1496838853, "post_id": 44412568, "comment_id": 75824455, "body": "@AhmedSamirShahin yes"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1496839620, "post_id": 44412568, "comment_id": 75824960, "body": "Try <code>@participants = @conversation.recipients</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1497025428, "post_id": 44412568, "comment_id": 75921644, "body": "Did my answer helped you?"}, {"owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1497242243, "post_id": 44412568, "comment_id": 75976793, "body": "@Pavan it did, thank you"}], "answers": [{"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1496840299, "creation_date": 1496840299, "answer_id": 44413357, "question_id": 44412568, "link": "https://stackoverflow.com/questions/44412568/mailboxer-all-recipients-except-the-originator-of-a-conversation/44413357#44413357", "title": "Mailboxer - All recipients except the originator of a conversation", "body": "<p>None of the available helpers returns the <em>participants</em> without the <em>originator</em>. I expected <a href=\"http://www.rubydoc.info/github/mailboxer/mailboxer/Mailboxer/Conversation#recipients-instance_method\" rel=\"nofollow noreferrer\"><em>recipients</em></a> would help, but it does what <a href=\"http://www.rubydoc.info/github/mailboxer/mailboxer/Mailboxer/Conversation#participants-instance_method\" rel=\"nofollow noreferrer\"><em>participants</em></a> do.\nBoth the methods <em>returns all recipients with originator included</em>.</p>\n\n<pre><code># File 'app/models/mailboxer/conversation.rb', line 78\n\ndef participants\n  recipients\nend\n\n# File 'app/models/mailboxer/conversation.rb', line 72\n\ndef recipients\n  return [] unless original_message\n  Array original_message.recipients\nend\n</code></pre>\n\n<p>You can use <code>reject</code> instead of <code>delete_if</code> but it is more or less the same. I recommend you to keep the <em>current approach</em> as it looks clean and better.</p>\n"}], "owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 44413357, "answer_count": 1, "score": 0, "last_activity_date": 1496840299, "creation_date": 1496838320, "question_id": 44412568, "link": "https://stackoverflow.com/questions/44412568/mailboxer-all-recipients-except-the-originator-of-a-conversation", "title": "Mailboxer - All recipients except the originator of a conversation", "body": "<p>Using Mailboxer I can find all participants in a conversation as</p>\n\n<p><code>@participants = @conversation.participants</code></p>\n\n<p>I can find the originator of a conversation using </p>\n\n<p><code>@originator = @conversation.originator</code></p>\n\n<p>Now I am trying to find all the participants except the originator.</p>\n\n<p><code>@participants.delete_if { |participant| participant == @originator}</code></p>\n\n<p>it is working fine but I wonder if there a better way of doing this? Thanks</p>\n"}, {"tags": ["ruby", "rubygems", "require"], "owner": {"reputation": 71, "user_id": 6835683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a81aae57de3abec1cceff1c408979ec0?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik", "link": "https://stackoverflow.com/users/6835683/dominik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1496843843, "answer_count": 0, "score": 1, "last_activity_date": 1496838230, "creation_date": 1496838230, "question_id": 44412539, "link": "https://stackoverflow.com/questions/44412539/problems-with-requiring-files-inside-gem", "closed_reason": "Duplicate", "title": "Problems with requiring files inside gem", "body": "<p>I have a problem with require in my gem. When I user require in my main.rb like <code>require 'folder/first'</code> it throw error <code>require': cannot load such file -- folder/first (LoadError)</code></p>\n\n<p>So my question is - Why can't I require my own files inside the gem?</p>\n\n<pre><code>\u251c\u2500\u2500 lib\n     \u251c\u2500\u2500 folder\n     \u2502\u00a0\u00a0 \u251c\u2500\u2500 first.rb\n     \u2502\u00a0\u00a0 \u251c\u2500\u2500 second.rb\n     \u2502\u00a0\u00a0 \u251c\u2500\u2500 third.rb\n     \u2502\u00a0\u00a0 \u2514\u2500\u2500 version.rb\n     \u2514\u2500\u2500 main.rb`\n</code></pre>\n\n<p>The first.rb looks like this:</p>\n\n<pre><code>module MyGem\n    class FirstClass\n        def some_method\n        ...\n    end\nend\n</code></pre>\n\n<p>The main.rb looks like this:</p>\n\n<pre><code>require 'folder/first\nmodule MyGem\n   def run_first\n      first = MyGem::FirstClass.new\n      ....\n   end\nend\n</code></pre>\n\n<p>Gemspec:</p>\n\n<pre><code>lib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'relp/version'\n\nGem::Specification.new do |spec|\n\n  ...\n\n  spec.files         = `git ls-files`.split(\"\\n\")\n  spec.test_files    = `git ls-files -- {test,spec,features}/*`.split(\"\\n\")\n  spec.require_paths = [\"lib\"]\n  spec.bindir        = \"exe\"\n\n  spec.required_ruby_version = '&gt;= 2.0.0'\n\n  spec.add_development_dependency \"bundler\", \"~&gt; 1.12\"\n  spec.add_development_dependency \"rake\", \"~&gt; 10.0\"\n  spec.add_development_dependency \"minitest\", \"~&gt; 5.0\"\nend\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["c", "ruby", "regex", "string", "pattern-matching"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496840121, "post_id": 44412981, "comment_id": 75825376, "body": "The only reason I might consider using a third party library is if a simple regex like <code>&#47;[\\w&#39;]+&#47;</code> is insufficient for your needs. It would be virtually impossible to write a <i>perfect</i> regex to separate words - but you could instead use a Natural Language Parser. (However, I strongly suspect that this is overkill for what you are trying to achieve...)"}, {"owner": {"reputation": 39, "user_id": 5163869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1a8f78cfef4965e4c2c25b678aee792?s=128&d=identicon&r=PG&f=1", "display_name": "vipul Kumar", "link": "https://stackoverflow.com/users/5163869/vipul-kumar"}, "edited": false, "score": 0, "creation_date": 1496842923, "post_id": 44412981, "comment_id": 75827599, "body": "Thanks for the answer. So in my case, the word list will be around 100-200 and the text can be as big as 4-5 page content. I was looking for a different solution which could be scalable and have least performance issues."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 39, "user_id": 5163869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1a8f78cfef4965e4c2c25b678aee792?s=128&d=identicon&r=PG&f=1", "display_name": "vipul Kumar", "link": "https://stackoverflow.com/users/5163869/vipul-kumar"}, "edited": false, "score": 0, "creation_date": 1496843727, "post_id": 44412981, "comment_id": 75828209, "body": "The above solution is only a guideline. Feel free to integrate a database or something if performance becomes an issue... But to be honest, 100-200 words across 5 pages is hardly going to be an issue! If you were dealing with <i>millions</i> of pages, then you&#39;d have more cause for concern."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1496839745, "last_edit_date": 1496839745, "creation_date": 1496839407, "answer_id": 44412981, "question_id": 44412354, "link": "https://stackoverflow.com/questions/44412354/find-text-having-highest-density-of-words/44412981#44412981", "title": "Find Text having highest density of words", "body": "<p>Here is a simple example, in <code>ruby</code>, for counting the frequency of words in a string:</p>\n\n<pre><code>def count_words(string)\n  string\n    .scan(/[\\w']+/) # Treat strings like \"don't\" as a single word\n    .each_with_object(Hash.new(0)) do |w,h|\n      h[w.downcase] += 1\n    end\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>word_occurrences = count_words(\"Hello world! Hello, vipul.\")\n  =&gt; {\"hello\"=&gt;2, \"world\"=&gt;1, \"vipul\"=&gt;1}\n</code></pre>\n\n<p>You shouldn't need a third party library to implement something this simple.</p>\n\n<p>To check occurrences of a specific word, just look it up in the hash:</p>\n\n<pre><code>word_occurrences[word1.downcase]\n</code></pre>\n\n<p>To obtain a list of the \"highest density\" words, just sort by hash value:</p>\n\n<pre><code>word_occurrences.sort_by {|_word, occurrences| -occurrences}\n# Note the negative to make this descending, not ascending\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5163869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1a8f78cfef4965e4c2c25b678aee792?s=128&d=identicon&r=PG&f=1", "display_name": "vipul Kumar", "link": "https://stackoverflow.com/users/5163869/vipul-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1496839745, "creation_date": 1496837693, "question_id": 44412354, "link": "https://stackoverflow.com/questions/44412354/find-text-having-highest-density-of-words", "title": "Find Text having highest density of words", "body": "<p>I have a hash as below:</p>\n\n<pre><code>{1=&gt;[{content=&gt;\"Text of paragraph 1..........\"},{content=&gt;\"Text of paragraph 2\"}]}\n</code></pre>\n\n<p>The above hash is created after parsing a text file . The key \"1\" represents page 1. It points to an array of hashes , each hash pointing to a paragraph with content key pointing to actual text.</p>\n\n<p>Now I have a word list like [word1,word2,word3]. I have to iterate through all the paragraph content of that page and tell which paragraph has the most occurrence of these words.</p>\n\n<p>I can write my own code where I do regex match for each of the word against the paragraph . But I wanted to know if there is any powerful string matching library that can solve this use case (in C, C++, or even ruby)</p>\n\n<p>Its just not string matching. I need a library that can extract the data that consists the highest density for the words in the word list.</p>\n"}, {"tags": ["ruby", "hash", "yaml"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1496836091, "post_id": 44411615, "comment_id": 75822317, "body": "What is your question?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 1, "creation_date": 1496836598, "post_id": 44411615, "comment_id": 75822736, "body": "you are replacing <code>data</code> every loop iteration, you have to either concatenate or put it in a array"}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1496917295, "post_id": 44411615, "comment_id": 75863353, "body": "you can save the file in one line: <code>File.write(filename, data)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 1, "creation_date": 1496836873, "post_id": 44411930, "comment_id": 75822966, "body": "You mean <code>data.to_yaml</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1496884483, "post_id": 44411930, "comment_id": 75848630, "body": "@MarkoAvlija\u0161 Right. Thanks."}, {"owner": {"reputation": 11, "user_id": 8125176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kb3Kz.jpg?s=128&g=1", "display_name": "Ark Szklar", "link": "https://stackoverflow.com/users/8125176/ark-szklar"}, "edited": false, "score": 0, "creation_date": 1496911847, "post_id": 44411930, "comment_id": 75859558, "body": "Thanks. Good to know you can make it more compact. As I learn, I try hard to keep up the mental model of a solution from collapse all the time, and loose and longer script helps. But short , as it may be impenetrable at first, does look nice."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": -1, "last_activity_date": 1496926050, "last_edit_date": 1496926050, "creation_date": 1496836414, "answer_id": 44411930, "question_id": 44411615, "link": "https://stackoverflow.com/questions/44411615/multiline-text-to-hash-to-yaml-conversion-produces-last-line/44411930#44411930", "title": "multiline text to hash to YAML conversion produces last line", "body": "<p>It looks like you are overriding <code>data</code> in every iteration with a new YAML string with only one entry. This is why you see only the last line. Try building the complete ruby hash and converting the whole hash to YAML at the end. Like this:</p>\n\n<pre><code>require 'yaml'\n\ndata = Hash.new\nFile.read('Data.txt').each_line do |line|\n  k, v = line.chomp.split(';', 2)\n  data[k] = v\nend\nFile.open('Ydata.txt', 'w') do |f|\n   f.write(data.to_yaml)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8125176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kb3Kz.jpg?s=128&g=1", "display_name": "Ark Szklar", "link": "https://stackoverflow.com/users/8125176/ark-szklar"}, "edited": false, "score": 0, "creation_date": 1496911896, "post_id": 44412132, "comment_id": 75859593, "body": "I see. You made one large hash in place of a few one-line hashes. Also, I tried to keep the File.open in the loop hoping that it will write line by line to File as it did to terminal, but it did not."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 11, "user_id": 8125176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kb3Kz.jpg?s=128&g=1", "display_name": "Ark Szklar", "link": "https://stackoverflow.com/users/8125176/ark-szklar"}, "edited": false, "score": 0, "creation_date": 1496912899, "post_id": 44412132, "comment_id": 75860240, "body": "ok, edited to show how you can output every line individually to the output file."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1496912877, "last_edit_date": 1496912877, "creation_date": 1496836997, "answer_id": 44412132, "question_id": 44411615, "link": "https://stackoverflow.com/questions/44411615/multiline-text-to-hash-to-yaml-conversion-produces-last-line/44412132#44412132", "title": "multiline text to hash to YAML conversion produces last line", "body": "<p>This line is setting <code>data</code> to be the last value converted to yaml.  So it's completely replaced every loop.</p>\n\n<pre><code>data = { \"#{line[0]}\" =&gt; \"#{line[1]}\" }.to_yaml \n</code></pre>\n\n<p>Better would be...</p>\n\n<pre><code>data = {}\nFile.read('Data.txt').each_line do |line|\n  line = line.chomp \n  line = line.split ';' \n  data[line[0]] = line[1]  \nend \n\nFile.open filename, 'w' do |f|\n   f.write data.to_yaml\nend\n</code></pre>\n\n<p>Alternatively, if you want to write out each item individually to the <code>filename</code> file, you can open the output file and do the <code>File.read</code> in a loop within the output file block...</p>\n\n<pre><code>File.open filename, 'w' do |f|\n  File.read('Data.txt').each_line do |line|\n    line = line.chomp \n    line = line.split ';' \n    data = { \"#{line[0]}\" =&gt; \"#{line[1]}\" }.to_yaml  \n    f.write data.to_yml\n  end \nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8125176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kb3Kz.jpg?s=128&g=1", "display_name": "Ark Szklar", "link": "https://stackoverflow.com/users/8125176/ark-szklar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496926050, "creation_date": 1496835575, "question_id": 44411615, "link": "https://stackoverflow.com/questions/44411615/multiline-text-to-hash-to-yaml-conversion-produces-last-line", "title": "multiline text to hash to YAML conversion produces last line", "body": "<p>1) I am trying to read strings from data.txt</p>\n\n<pre><code>Christopher Plummer;Dec 13, 1927\nChristopher Walken;Mar 31, 1943\nThe King of Spain;Jan  5, 1938\n</code></pre>\n\n<p>2) split all strings at ';' and convert them to hash</p>\n\n<p>3) hash to YAML</p>\n\n<p>4) write YAML to file</p>\n\n<p><strong>problem:</strong> writing YAML to file produces only the last line</p>\n\n<hr>\n\n<pre><code>data = Hash.new\nrequire 'yaml'\nfilename = 'Ydata.txt'\n\nFile.read('Data.txt').each_line do |line|\n  line = line.chomp \n  line = line.split ';' \n  data = { \"#{line[0]}\" =&gt; \"#{line[1]}\" }.to_yaml  \nend \n\nFile.open filename, 'w' do |f|\n   f.write data\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1496830072, "post_id": 44409287, "comment_id": 75817992, "body": "are the image thumbnails actually created?"}, {"owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "edited": false, "score": 0, "creation_date": 1496834612, "post_id": 44409287, "comment_id": 75821246, "body": "try this &lt;%= image_tag @item.image.url(:thumb) %&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "reply_to_user": {"reputation": 104, "user_id": 8103074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1553879191351953/picture?type=large", "display_name": "Tharindu Thathsarana", "link": "https://stackoverflow.com/users/8103074/tharindu-thathsarana"}, "edited": false, "score": 0, "creation_date": 1496829890, "post_id": 44409357, "comment_id": 75817839, "body": "Try this one <code>&lt;%= image_tag @item.image(:thumb).url %&gt;</code>"}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "reply_to_user": {"reputation": 104, "user_id": 8103074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1553879191351953/picture?type=large", "display_name": "Tharindu Thathsarana", "link": "https://stackoverflow.com/users/8103074/tharindu-thathsarana"}, "edited": false, "score": 0, "creation_date": 1496830196, "post_id": 44409357, "comment_id": 75818097, "body": "OR this one <code>&lt;%= image_tag(@item.image_url(:thumb).to_s) %&gt;</code>"}, {"owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "edited": false, "score": 0, "creation_date": 1496834437, "post_id": 44409357, "comment_id": 75821116, "body": "try this &lt;%= image_tag @item.image.url(:thumb) %&gt;"}, {"owner": {"reputation": 104, "user_id": 8103074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1553879191351953/picture?type=large", "display_name": "Tharindu Thathsarana", "link": "https://stackoverflow.com/users/8103074/tharindu-thathsarana"}, "edited": false, "score": 0, "creation_date": 1496836381, "post_id": 44409357, "comment_id": 75822556, "body": "The issue was with the image that i have uploaded.Now it&#39;s working.BTW thanks for your kind support"}], "tags": [], "owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1502252809, "last_edit_date": 1502252809, "creation_date": 1496829367, "answer_id": 44409357, "question_id": 44409287, "link": "https://stackoverflow.com/questions/44409287/thumb-images-are-not-displayed/44409357#44409357", "title": "Thumb images are not displayed", "body": "<p>Try this </p>\n\n<pre><code>&lt;%= image_tag item.thumbnail_url(:thumb) %&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>&lt;%= image_tag item.avatar.thumb.url %&gt;\n</code></pre>\n\n<p>Go Thought this link, it will help you. <a href=\"https://www.sitepoint.com/processing-images-with-carrierwave/\" rel=\"nofollow noreferrer\">reference</a></p>\n"}, {"comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1497948903, "post_id": 44518577, "comment_id": 76281686, "body": "It&#39;s same as my ans ...in rails brackets are optional."}], "tags": [], "owner": {"reputation": 104, "user_id": 8103074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1553879191351953/picture?type=large", "display_name": "Tharindu Thathsarana", "link": "https://stackoverflow.com/users/8103074/tharindu-thathsarana"}, "is_accepted": true, "score": 0, "last_activity_date": 1497348857, "creation_date": 1497348857, "answer_id": 44518577, "question_id": 44409287, "link": "https://stackoverflow.com/questions/44409287/thumb-images-are-not-displayed/44518577#44518577", "title": "Thumb images are not displayed", "body": "<p>With the following code block it's working properly.</p>\n\n<pre><code>  &lt;%= image_tag item.image_url(:thumb)%&gt;\n</code></pre>\n"}], "owner": {"reputation": 104, "user_id": 8103074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1553879191351953/picture?type=large", "display_name": "Tharindu Thathsarana", "link": "https://stackoverflow.com/users/8103074/tharindu-thathsarana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 44518577, "answer_count": 2, "score": 0, "last_activity_date": 1502252809, "creation_date": 1496829215, "last_edit_date": 1496830455, "question_id": 44409287, "link": "https://stackoverflow.com/questions/44409287/thumb-images-are-not-displayed", "title": "Thumb images are not displayed", "body": "<p>I am using carrierwave and minimagic gems. This is the code in my index view to display the thumb images:</p>\n\n<pre><code>&lt;div class=\"panel-body\"&gt;\n  Quantity  :&lt;%= item.qty %&gt;&lt;br&gt;\n  Price  : &lt;%= number_to_currency(item.price, unit: \"RS \" ) %&gt;&lt;br&gt;\n  &lt;%= image_tag item.image_url(:thumb)%&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is the code available in the <code>Image_uploader</code>:</p>\n\n<pre><code>class ImageUploader &lt; CarrierWave::Uploader::Base\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  storage :file\n  # storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  version :thumb do\n    process :resize_to_fit =&gt; [50, 50]\n  end\n\n  def extension_white_list\n    %w(jpg jpeg gif png)\n  end\n</code></pre>\n\n<p>It works without <code>:thumb</code>; the image is displayed as is.</p>\n\n<pre><code>&lt;%= image_tag @item.image_url %&gt;\n</code></pre>\n\n<p>But it cannot be viewed in thumb format. It displays the image name and a broken image icon on the localhost preview.</p>\n\n<p>Please help me solve this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 1, "last_activity_date": 1496830274, "creation_date": 1496830274, "answer_id": 44409711, "question_id": 44409227, "link": "https://stackoverflow.com/questions/44409227/simplifying-or-improving-a-method/44409711#44409711", "title": "Simplifying or improving a method", "body": "<p>Assuming the code you have shared is working, I would dry it up a bit as..</p>\n\n<pre><code>self.answer_options.map{|a| a if a.correct_answer_changed?}.compact.each do |answer_option|\n  answer_option.toggle(:correct_answer)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496832312, "post_id": 44410025, "comment_id": 75819622, "body": "<code>answer_options.each{|answer_option| answer_option.correct_answer == nil}</code> this looks weird, what are you trying to do here?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496834172, "post_id": 44410025, "comment_id": 75820921, "body": "@Md.FarhanMemon It reverts the <code>false</code> value assigned when there is no <code>answer_option</code> that satisfies <code>answer_option.correct_answer_changed?</code>. In the original code, there was a condition for that."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1496831155, "creation_date": 1496831155, "answer_id": 44410025, "question_id": 44409227, "link": "https://stackoverflow.com/questions/44409227/simplifying-or-improving-a-method/44410025#44410025", "title": "Simplifying or improving a method", "body": "<pre><code>answer_options.each do |answer_option|\n  answer_option.correct_answer =\n    answer_option.correct_answer_changed? &amp;&amp; !answer_option.correct_answer_was\nend\nif answer_options.all?{|answer_option| answer_option.correct_answer == false}\n  answer_options.each{|answer_option| answer_option.correct_answer == nil}\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5360070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c43398aed190964f241c4d6b60042290?s=128&d=identicon&r=PG", "display_name": "Denis sellu", "link": "https://stackoverflow.com/users/5360070/denis-sellu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 44409711, "answer_count": 2, "score": -3, "last_activity_date": 1496831155, "creation_date": 1496829096, "last_edit_date": 1496830743, "question_id": 44409227, "link": "https://stackoverflow.com/questions/44409227/simplifying-or-improving-a-method", "title": "Simplifying or improving a method", "body": "<p>The following code is executed before the model is saved. It checks a <code>has_many</code> association for change before looping through and setting a value on each. It checks through each answer option whether the <code>correct_answer</code> is changed on any of the answers. If so, it looks for which was changed and was <code>true</code>.</p>\n\n<pre><code>if self.answer_options.select{|a| a.correct_answer_changed?}.any?\n  self.answer_options.each do |answer_option|\n    if answer_option.correct_answer_changed? &amp;&amp; !answer_option.correct_answer_was\n      answer_option.correct_answer = true\n    else\n      answer_option.correct_answer = false\n    end\n  end\nend\n</code></pre>\n\n<p>How could I simplify or improve this method?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "jbuilder"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1496829134, "post_id": 44409098, "comment_id": 75817248, "body": "Your second example is a not valid json format. You can&#39;t do output like this."}, {"owner": {"reputation": 83, "user_id": 7282717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/830947938f9b04aa64159600e407985e?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Coelho", "link": "https://stackoverflow.com/users/7282717/miguel-coelho"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1496829212, "post_id": 44409098, "comment_id": 75817311, "body": "I dont understand, my outrput is not valid?"}, {"owner": {"reputation": 83, "user_id": 7282717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/830947938f9b04aa64159600e407985e?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Coelho", "link": "https://stackoverflow.com/users/7282717/miguel-coelho"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1496829353, "post_id": 44409098, "comment_id": 75817431, "body": "I want to agroup the categories. I Have 4 types of categories and have 24 diferent monuments. How can i do that?"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496829803, "post_id": 44409098, "comment_id": 75817773, "body": "how are monuments and categories associated? what is the query you do to get the data in your controller?"}, {"owner": {"reputation": 83, "user_id": 7282717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/830947938f9b04aa64159600e407985e?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Coelho", "link": "https://stackoverflow.com/users/7282717/miguel-coelho"}, "edited": false, "score": 0, "creation_date": 1496829862, "post_id": 44409098, "comment_id": 75817816, "body": "Categories has_many monuments. And monuments belogs_to categories. What controller and what action?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1496830150, "post_id": 44409098, "comment_id": 75818061, "body": "This does not sound like a JSON issue, but an issue of how to create a Ruby Hash/Array which can then be converted in to JSON."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7282717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/830947938f9b04aa64159600e407985e?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Coelho", "link": "https://stackoverflow.com/users/7282717/miguel-coelho"}, "edited": false, "score": 0, "creation_date": 1496830901, "post_id": 44409822, "comment_id": 75818609, "body": "In the action index?"}, {"owner": {"reputation": 83, "user_id": 7282717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/830947938f9b04aa64159600e407985e?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Coelho", "link": "https://stackoverflow.com/users/7282717/miguel-coelho"}, "edited": false, "score": 0, "creation_date": 1496830983, "post_id": 44409822, "comment_id": 75818678, "body": "but i have already this in index action :  @categories = Category.all"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 83, "user_id": 7282717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/830947938f9b04aa64159600e407985e?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Coelho", "link": "https://stackoverflow.com/users/7282717/miguel-coelho"}, "edited": false, "score": 0, "creation_date": 1496831116, "post_id": 44409822, "comment_id": 75818765, "body": "replace that with <code>Category.includes(monuments: :pois)</code> because your query is n+1"}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 4, "last_activity_date": 1496845737, "last_edit_date": 1496845737, "creation_date": 1496830583, "answer_id": 44409822, "question_id": 44409098, "link": "https://stackoverflow.com/questions/44409098/rails-json-jbuilder-group-json-view-based-on-category/44409822#44409822", "title": "Rails json/jbuilder - Group json view based on category", "body": "<p>You need to do something like this</p>\n\n<p>In your controller,</p>\n\n<pre><code>@categories = Category.where(name: 'Igrejas').includes(monuments: :pois)\n</code></pre>\n\n<p>In your view,</p>\n\n<pre><code>json.category @categories do |category|\n  json.name category.name\n  json.monuments category.monuments do |monument|\n    json.name monument.name\n    json.id monument.id\n    json.pois monument.pois do |p|\n      json.name p.name\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7282717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/830947938f9b04aa64159600e407985e?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Coelho", "link": "https://stackoverflow.com/users/7282717/miguel-coelho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 1, "accepted_answer_id": 44409822, "answer_count": 1, "score": 2, "last_activity_date": 1496845737, "creation_date": 1496828793, "last_edit_date": 1496831616, "question_id": 44409098, "link": "https://stackoverflow.com/questions/44409098/rails-json-jbuilder-group-json-view-based-on-category", "title": "Rails json/jbuilder - Group json view based on category", "body": "<p>I have an web application maded in RoR. \nI need to provide the json to an mobile App.\nThis is my code to generate the Json:</p>\n\n<pre><code>json.category do\n json.name monument.category.name\n json.monumento do\n  json.name monument.name\n  json.id monument.id\n  json.pois monument.pois do |p|\n   json.name p.name\n  end\n end\nend\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>{\n    \"category\": {\n        \"name\": \"Igrejas\",\n        \"monumento\": {\n            \"name\": \"Igreja de Santa Maria do Olival\",\n            \"id\": 2,\n            \"pois\": [{\n                \"name\": \"Igreja de Santa Maria do Olival\"\n            }]\n        }\n    }\n},\n{\n    \"category\": {\n        \"name\": \"Igrejas\",\n        \"monumento\": {\n            \"name\": \"Igreja de S\u00e3o Jo\u00e3o Baptista\",\n            \"id\": 3,\n            \"pois\": [{\n                \"name\": \"Igreja de S\u00e3o Jo\u00e3o Baptista\"\n            }]\n        }\n    }\n},\n{\n    \"category\": {\n        \"name\": \"Igrejas\",\n        \"monumento\": {\n            \"name\": \"Igreja da Nossa Senhora da Gra\u00e7a\",\n            \"id\": 4,\n            \"pois\": [{\n                \"name\": \"Igreja da Nossa Senhora da Gra\u00e7a\"\n            }]\n        }\n    }\n},\n</code></pre>\n\n<p>My Problem is that i need to group the categories.</p>\n\n<p>something like this:</p>\n\n<pre><code>{\n    \"category\": {\n        \"name\": \"Igrejas\",\n        \"monumento\": {\n            \"name\": \"Igreja de Santa Maria do Olival\",\n            \"id\": 2,\n            \"pois\": [{\n                \"name\": \"Igreja de Santa Maria do Olival\"\n            }]\n        },\n        \"monumento\": {\n            \"name\": \"Igreja de S\u00e3o Jo\u00e3o Baptista\",\n            \"id\": 3,\n            \"pois\": [{\n                \"name\": \"Igreja de S\u00e3o Jo\u00e3o Baptista\"\n            }]\n        },\n\n        \"monumento\": {\n            \"name\": \"Igreja da Nossa Senhora da Gra\u00e7a\",\n            \"id\": 4,\n            \"pois\": [{\n                \"name\": \"Igreja da Nossa Senhora da Gra\u00e7a\"\n            }]\n        }\n    }\n},\n</code></pre>\n\n<p>Any ideas how can i solve this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "edited": false, "score": 2, "creation_date": 1496828241, "post_id": 44408812, "comment_id": 75816625, "body": "Can you please provide the full path of <code>news_worker</code> file, and code inside (mainly class definition)?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1496830265, "post_id": 44408812, "comment_id": 75818144, "body": "Sounds like Sidekiq isn&#39;t loading the Rails environment, are you running sidekiq from within the Rails root directory?"}, {"owner": {"reputation": 2380, "user_id": 1498579, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/qHxWR.png?s=128&g=1", "display_name": "harsh4u", "link": "https://stackoverflow.com/users/1498579/harsh4u"}, "reply_to_user": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "edited": false, "score": 0, "creation_date": 1496832574, "post_id": 44408812, "comment_id": 75819808, "body": "@AhmedSamirShahin app/workers/news_worker.rb  also update question with full code."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1496843419, "post_id": 44408812, "comment_id": 75827953, "body": "Did you restart Sidekiq?"}, {"owner": {"reputation": 2380, "user_id": 1498579, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/qHxWR.png?s=128&g=1", "display_name": "harsh4u", "link": "https://stackoverflow.com/users/1498579/harsh4u"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1496884643, "post_id": 44408812, "comment_id": 75848665, "body": "@MikePerham its auto start once push code."}], "answers": [{"comments": [{"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1496843442, "post_id": 44411586, "comment_id": 75827972, "body": "Rails autoloads everything in <code>app&#47;</code>"}, {"owner": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1496844696, "post_id": 44411586, "comment_id": 75829039, "body": "Depending on Rails version :) ?"}], "tags": [], "owner": {"reputation": 549, "user_id": 1001022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H3xd6.jpg?s=128&g=1", "display_name": "Ahmed Samir Shahin", "link": "https://stackoverflow.com/users/1001022/ahmed-samir-shahin"}, "is_accepted": false, "score": -1, "last_activity_date": 1496835499, "creation_date": 1496835499, "answer_id": 44411586, "question_id": 44408812, "link": "https://stackoverflow.com/questions/44408812/tid-owrsuwi8g-warn-nameerror-uninitialized-constant-newsworker-in-sidekiq-of-r/44411586#44411586", "title": "TID-owrsuwi8g WARN: NameError: uninitialized constant NewsWorker in Sidekiq of Rails", "body": "<p>I think it has something to do with <code>autoload_paths</code>; the <code>workers</code> directory is not auto-loaded.</p>\n\n<p>In <code>config/application.rb</code> add the following line:</p>\n\n<pre><code>config.autoload_paths += %W(#{config.root}/app/workers)\n</code></pre>\n\n<p>This should do the trick</p>\n"}], "owner": {"reputation": 2380, "user_id": 1498579, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/qHxWR.png?s=128&g=1", "display_name": "harsh4u", "link": "https://stackoverflow.com/users/1498579/harsh4u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496835499, "creation_date": 1496827996, "last_edit_date": 1496833055, "question_id": 44408812, "link": "https://stackoverflow.com/questions/44408812/tid-owrsuwi8g-warn-nameerror-uninitialized-constant-newsworker-in-sidekiq-of-r", "title": "TID-owrsuwi8g WARN: NameError: uninitialized constant NewsWorker in Sidekiq of Rails", "body": "<p>I am developing <code>Rails</code> application where send emails using <code>Sidekiq gem</code>.</p>\n\n<p>Create worker then call it like:</p>\n\n<pre><code>Worker File: news_worker.rb\n\nNewsWorker.perform_at(5.minutes.from_now, @news.title, @news.link, @news.image, user_detail.email, user_detail.category_name, type, email_template)\n</code></pre>\n\n<p>But anyhow its not working and show <code>error message</code> like: </p>\n\n<pre><code>TID-owrsuwi8g WARN: NameError: uninitialized constant NewsWorker\n</code></pre>\n\n<p>I tried to call from Model and Controller as well but still display same error. <code>My old worked running fine</code> but why this new create not working.. I found many ways but still not sortout.</p>\n\n<hr>\n\n<h2>Update</h2>\n\n<pre><code># /app/workers/news_worker.rb\n\nclass NewsWorker\n  include Sidekiq::Worker\n  include Rails.application.routes.url_helpers\n\n  def perform  news_title, news_link, news_image, email, category_name, type, email_template = nil\n    send_to_email(news_title, news_link, news_image, email, category_name, type, email_template)\n  end\n\n  def send_to_email news_title, news_link, news_image, email, category_name, type, email_template\n    SchoolMailer.send_news(news_title, news_link, news_image, email, category_name, type, email_template).deliver\n  end\nend\n</code></pre>\n\n<p>Let me know if any one have idea.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spring", "cron"], "answers": [{"tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": false, "score": 0, "last_activity_date": 1496976490, "creation_date": 1496976490, "answer_id": 44448510, "question_id": 44408616, "link": "https://stackoverflow.com/questions/44408616/spring-server-timeout-error/44448510#44448510", "title": "Spring server: Timeout error", "body": "<p>If the command works outside of cron, but not in the crontab, the problem is almost certainly that the command isn't picking up some necessary environment variable setting. There are several ways to get around the problem, but the simplest and best is to <a href=\"http://blog.scoutapp.com/articles/2013/06/07/rvm-bundler-and-cron-in-production-round-2\" rel=\"nofollow noreferrer\">wrap your command in a shell script</a>.</p>\n\n<p>For initial testing, you can simply source your login environment:</p>\n\n<pre><code>. ~/.bash_profile \n</code></pre>\n\n<p>But eventually you'll want to just set the variables you need and not include anything extra. For more information, see <a href=\"https://github.com/javan/whenever#define-your-own-job-types\" rel=\"nofollow noreferrer\">Define your own job types</a>.</p>\n"}], "owner": {"reputation": 706, "user_id": 7321201, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh3.googleusercontent.com/-jYTO0z0j5O8/AAAAAAAAAAI/AAAAAAAAAA4/RMhqw5lbMyM/photo.jpg?sz=128", "display_name": "nishant", "link": "https://stackoverflow.com/users/7321201/nishant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 683, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1496976490, "creation_date": 1496827424, "question_id": 44408616, "link": "https://stackoverflow.com/questions/44408616/spring-server-timeout-error", "title": "Spring server: Timeout error", "body": "<p>I am trying to run a cron-task using Rails schedule.rb file. The task invokes a function written in ruby. The function runs perfectly fine. However when trying to run as a cron I get this error.</p>\n\n<pre><code>Starting Spring server with `/home/ubuntu/.rvm/gems/ruby-2.4.0/gems/spring-2.0.2/bin/spring server --background` timed out after 20 seconds\n</code></pre>\n\n<p>Spring(2.0.2) is installed and working perfectly.\nAny idea how to solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "cairo"], "comments": [{"owner": {"reputation": 68, "user_id": 6183724, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154000165464693/picture?type=large", "display_name": "Simon Sabbatini", "link": "https://stackoverflow.com/users/6183724/simon-sabbatini"}, "edited": false, "score": 0, "creation_date": 1496827449, "post_id": 44408548, "comment_id": 75816057, "body": "outputter = Barby::CairoOutputter.new(qr).to_svg"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496828005, "post_id": 44408548, "comment_id": 75816449, "body": "Can you provide a complete, minimal, verifiable example? This may be a bug in the library, which may be better raised as an issue in the github project directly..."}, {"owner": {"reputation": 68, "user_id": 6183724, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154000165464693/picture?type=large", "display_name": "Simon Sabbatini", "link": "https://stackoverflow.com/users/6183724/simon-sabbatini"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496828190, "post_id": 44408548, "comment_id": 75816595, "body": "qr = RQRCode::QRCode.new(&#39;test&#39;) puts  qr outputter = Barby::CairoOutputter.new(qr).to_svg"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496828454, "post_id": 44408548, "comment_id": 75816769, "body": "does this work? <code>Barby::CairoOutputter.new(qr.to_s).to_svg</code>"}, {"owner": {"reputation": 68, "user_id": 6183724, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154000165464693/picture?type=large", "display_name": "Simon Sabbatini", "link": "https://stackoverflow.com/users/6183724/simon-sabbatini"}, "edited": false, "score": 0, "creation_date": 1496828860, "post_id": 44408548, "comment_id": 75817056, "body": "Thanks for your answer but when I cast qr instance to string, I get the follow error message: undefined method `two_dimensional?&#39; for #&lt;String:0x0000000fc66da8&gt;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496829022, "post_id": 44408548, "comment_id": 75817167, "body": "@SimonSabbatini Please could you provide a <b>complete</b> example? Which gem(s) do I need to install? What files do I need to <code>require</code>? Please <b><a href=\"https://stackoverflow.com/posts/44408548/edit\">edit your question</a></b> to provide enough information that someone who is not already familiar with the tool can reproduce the problem easily."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496829106, "post_id": 44408548, "comment_id": 75817232, "body": "It looks like I need to <code>gem install barby</code>, <code>gem install cairo</code>, <code>require  &#39;barby&#47;outputter&#47;cairo_outputter&#39;</code>, ...... How many more steps are there? I don&#39;t know. Please provide all the information."}, {"owner": {"reputation": 68, "user_id": 6183724, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154000165464693/picture?type=large", "display_name": "Simon Sabbatini", "link": "https://stackoverflow.com/users/6183724/simon-sabbatini"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496829406, "post_id": 44408548, "comment_id": 75817471, "body": "Thanks for your answer @TomLord, My post is edited"}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 6183724, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154000165464693/picture?type=large", "display_name": "Simon Sabbatini", "link": "https://stackoverflow.com/users/6183724/simon-sabbatini"}, "edited": false, "score": 0, "creation_date": 1496833628, "post_id": 44410071, "comment_id": 75820548, "body": "I&#39;ve also try it but the output of qr instance is &#39;test&#39;. So my svg is a white image..."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1496831252, "creation_date": 1496831252, "answer_id": 44410071, "question_id": 44408548, "link": "https://stackoverflow.com/questions/44408548/undefined-method-two-dimensional-using-barby-cairooutputter/44410071#44410071", "title": "undefined method `two_dimensional?&#39; using Barby CairoOutputter", "body": "<p>As stated in <a href=\"https://github.com/toretore/barby#supported-symbologies\" rel=\"nofollow noreferrer\">the project <code>README</code></a>, you need to use one of the supported <code>barcode</code> classes. Namely, you need to use <code>Barby::QrCode</code>, not <code>RQRCode::QRCode</code>.</p>\n\n<p>With the following libraries installed:</p>\n\n<pre><code>gem install 'barby'   # core library\ngem install 'cairo'   # dependency for output\ngem install 'rqrcode' # dependency for barcode\n</code></pre>\n\n<p>The following implementation works fine:</p>\n\n<pre><code>require 'barby'\nrequire 'barby/outputter/cairo_outputter'\nrequire 'barby/barcode/qr_code'\n\nqr = Barby::QrCode.new('test')\noutputter = Barby::CairoOutputter.new(qr).to_svg\n</code></pre>\n\n<p>Unlike <code>RQRCode::QRCode</code>, <code>Barby::QrCode</code> implements methods such as <code>two_dimensional?</code> and <code>encoding</code> - which are required by the <code>Barby::CairoOutputter</code> implementation.</p>\n"}], "owner": {"reputation": 68, "user_id": 6183724, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154000165464693/picture?type=large", "display_name": "Simon Sabbatini", "link": "https://stackoverflow.com/users/6183724/simon-sabbatini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "accepted_answer_id": 44410071, "answer_count": 1, "score": 2, "last_activity_date": 1496831252, "creation_date": 1496827249, "last_edit_date": 1496829344, "question_id": 44408548, "link": "https://stackoverflow.com/questions/44408548/undefined-method-two-dimensional-using-barby-cairooutputter", "title": "undefined method `two_dimensional?&#39; using Barby CairoOutputter", "body": "<p>I just want to generate a QR code using rqrcode gem. When I create my new rqrcode instance:</p>\n\n<pre><code>qr = RQRCode::QRCode.new('test')\n</code></pre>\n\n<p>I get the following input :</p>\n\n<pre><code>xxxxxxx  x  x x  xxxxxx x xxxxxxx\nx     x xx xxxxx     xx   x     x\nx xxx x   x   x xxxx  xx  x xxx x\nx xxx x   x x x x  x x xx x xxx x\nx xxx x  x   xxx xxx    x x xxx x\nx     x xxx  x    xx      x     x\nxxxxxxx x x x x x x x x x xxxxxxx\n        x x     xx   x x         \n    xxxx  xxxxx  xxxx   x xx   x \n x  xx xxxx   xxxx xxxx    x  xxx\nxx x xx   x x  xxxx            xx\n  x  x x  xxx xxxxxxx x xx xxx  x\nx  xxxxxxx x x x xxxx xx xx  xx  \nx x x         xx xxx x  x xxxx   \nxx   xxx  xxx xxx   x  xxxxx xxx \nxx   x   xx     xxx   xx  x   x  \n   x  xxxx xx    xxxx x x  x  x x\n x xxx  x x x   xx  x    xx  xx x\nxxx  xx xx     x   x xx     xx   \n     x x x        x xx  xx xx  x \nx  xxxx xx xx  x  x x  xxxx    xx\nx x x      xxx x     xx   xxx xxx\n    x xx  x xxx  x       x x   xx\n    xx   x xxx xxxx x x x    x  x\nxx x xxxx xx   x    x xxxxxxxxx  \n        x  xx xx x x   xx   xx  x\nxxxxxxx xx x        xxxxx x xxx  \nx     x xx xx   x xxxx xx   x xx \nx xxx x xx  x     xxx   xxxxx xxx\nx xxx x    xx  x     xxxxxxxx xxx\nx xxx x   x xx        xx    x    \nx     x   xxxxxxxxx x xx xx xx   \nxxxxxxx  x xx  x xx    x x x xx x\n</code></pre>\n\n<p>For printing my qr_code I use the CairoOutputter of Barby but when I try to convert my output to svg, png,... I get the following error message:</p>\n\n<pre><code>NoMethodError (undefined method `two_dimensional?' for #&lt;RQRCode::QRCode:0x0000000794bd88&gt;)\n</code></pre>\n\n<p>Do you have any ideas of what I can do to correct this error?</p>\n\n<p>Gemfile: </p>\n\n<pre><code>gem 'rqrcode','~&gt; 0.4.2'\ngem 'barby'\ngem 'cairo'\n</code></pre>\n\n<p>In my model: </p>\n\n<pre><code>require 'barby'\nrequire 'barby/outputter/cairo_outputter'\nrequire 'rqrcode'\nqr = RQRCode::QRCode.new('test')\nputs  qr\noutputter = Barby::CairoOutputter.new(qr).to_svg\n</code></pre>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1496822724, "post_id": 44406636, "comment_id": 75812731, "body": "Those are not called as <i>enums</i> btw."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1496824515, "post_id": 44406636, "comment_id": 75813929, "body": "Just to put in my two cents, I find that in practice, you will want to use an id that is more unique than just the index. Imagine if you were doing this on the page with more than one model or having the same model on the page twice. JavaScript expects ids only to occur once (which is why you don&#39;t have the method <code>docuement.getElementsById</code> =D). At the same time, it may be better to use the product id instead of its index in the collection, since you may want to refer to it again. Anyway, consider at the very least making an id like <code>id=&quot;&lt;%= &quot;product_#{product.id}&quot; %&gt;&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1496834672, "post_id": 44406716, "comment_id": 75821288, "body": "There is no need to call <code>to_s</code>, because <code>&lt;%=</code> calls <code>to_s</code> internally when concatenating."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 0, "last_activity_date": 1496823392, "last_edit_date": 1496823392, "creation_date": 1496822019, "answer_id": 44406716, "question_id": 44406636, "link": "https://stackoverflow.com/questions/44406636/add-id-css-via-rails-enum/44406716#44406716", "title": "Add id css via rails enum", "body": "<p>you can directly assign index to <code>id</code></p>\n\n<pre><code>&lt;% @products.each_with_index do |product, index| %&gt;\n  &lt;tr id=&lt;%= index.to_s %&gt; &gt;\n                  .\n                  .\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496822367, "post_id": 44406719, "comment_id": 75812490, "body": "according to ruby conventions, that&#39;s an unneeded interpolation :)"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496822482, "post_id": 44406719, "comment_id": 75812561, "body": "@Md.FarhanMemon I&#39;m just stating OP how to use it :)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1496822029, "creation_date": 1496822029, "answer_id": 44406719, "question_id": 44406636, "link": "https://stackoverflow.com/questions/44406636/add-id-css-via-rails-enum/44406719#44406719", "title": "Add id css via rails enum", "body": "<p>You are mixing <em>string interpolation</em> with <em>Rails tags</em>. You should do</p>\n\n<pre><code>&lt;tr id=\"#{index}\"&gt;\n</code></pre>\n\n<p>Or</p>\n\n<p>You can also do</p>\n\n<pre><code>&lt;tr id=\"&lt;%=index%&gt;\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8123865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8vJU.jpg?s=128&g=1", "display_name": "nvtin", "link": "https://stackoverflow.com/users/8123865/nvtin"}, "is_accepted": false, "score": 0, "last_activity_date": 1496822181, "last_edit_date": 1496822181, "creation_date": 1496822057, "answer_id": 44406730, "question_id": 44406636, "link": "https://stackoverflow.com/questions/44406636/add-id-css-via-rails-enum/44406730#44406730", "title": "Add id css via rails enum", "body": "<p>Yep you should add '=' right after &lt;% like that</p>\n\n<pre><code>&lt;% @products.each_with_index do |product, index| %&gt;\n  &lt;tr id=\"&lt;%= index %&gt;\" &gt;\n .\n .\n&lt;% end %&gt;\n</code></pre>\n\n<p>or <code>&lt;tr id=\"#{index}\"&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1496834553, "creation_date": 1496834553, "answer_id": 44411277, "question_id": 44406636, "link": "https://stackoverflow.com/questions/44406636/add-id-css-via-rails-enum/44411277#44411277", "title": "Add id css via rails enum", "body": "<p>I don't like to mix HTML and ERB tags and would prefer <a href=\"https://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag\" rel=\"nofollow noreferrer\"><code>content_tag</code></a> to generate the tag. Furthermore, there is the <a href=\"https://apidock.com/rails/ActionView/RecordIdentifier/dom_id\" rel=\"nofollow noreferrer\"><code>dom_id</code></a> method in rails that returns useful unique ids.</p>\n\n<pre><code>&lt;% @products.each do |product| %&gt;\n  &lt;%= content_tag :tr, id: dom_id(product) do %&gt;\n    ...\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8013682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090e1528d4269b582584c0fd1fa8b380?s=128&d=identicon&r=PG&f=1", "display_name": "TomyLee", "link": "https://stackoverflow.com/users/8013682/tomylee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 44406716, "answer_count": 4, "score": 0, "last_activity_date": 1496834553, "creation_date": 1496821756, "last_edit_date": 1496822367, "question_id": 44406636, "link": "https://stackoverflow.com/questions/44406636/add-id-css-via-rails-enum", "title": "Add id css via rails enum", "body": "<p>I would like to know I can set <code>id</code> via rails enum. For example,</p>\n\n<pre><code>&lt;% @products.each_with_index do |product, index| %&gt;\n            &lt;tr id=\"&lt;% #{index} %&gt;\" &gt;\n                      .\n                      .\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "git", "bash", "uninstallation"], "comments": [{"owner": {"reputation": 208, "user_id": 7504673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0b2646410023b7080445be5945db1d5?s=128&d=identicon&r=PG&f=1", "display_name": "duukn", "link": "https://stackoverflow.com/users/7504673/duukn"}, "edited": false, "score": 0, "creation_date": 1496819590, "post_id": 44405806, "comment_id": 75810788, "body": "I am not sure why you want to use ruby for this. You said you put insome errors, have you tried using: <code>git config --global --unset-all [whatever you messed up]</code>? It seems like deleting is a bit of an overkill"}, {"owner": {"reputation": 11, "user_id": 8123811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213284530778506/picture?type=large", "display_name": "Ari Jaime", "link": "https://stackoverflow.com/users/8123811/ari-jaime"}, "reply_to_user": {"reputation": 208, "user_id": 7504673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0b2646410023b7080445be5945db1d5?s=128&d=identicon&r=PG&f=1", "display_name": "duukn", "link": "https://stackoverflow.com/users/7504673/duukn"}, "edited": false, "score": 1, "creation_date": 1496820482, "post_id": 44405806, "comment_id": 75811305, "body": "I tried all of them, from configuring the environment variables via CMD, in registry, but there is no case, the problem is that my current user has characters like &quot;&amp;&quot;, the idea was to avoid creating another user. But it seems that I do not have many alternatives,  I already had a desktop version of git, which started me throwing errors with the last update of rainstaller, I do not know if the ideal will be to download an old version, to avoid a slaughter like delete the folder .pd: and try what I You landed and did not work"}, {"owner": {"reputation": 11, "user_id": 8123811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213284530778506/picture?type=large", "display_name": "Ari Jaime", "link": "https://stackoverflow.com/users/8123811/ari-jaime"}, "reply_to_user": {"reputation": 208, "user_id": 7504673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0b2646410023b7080445be5945db1d5?s=128&d=identicon&r=PG&f=1", "display_name": "duukn", "link": "https://stackoverflow.com/users/7504673/duukn"}, "edited": false, "score": 1, "creation_date": 1496823494, "post_id": 44405806, "comment_id": 75813253, "body": "I have already solved. I created a new user without special characters, and everything is going well!"}, {"owner": {"reputation": 22991, "user_id": 1169096, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d93e08b2830786a7992e8af35514c6?s=128&d=identicon&r=PG", "display_name": "uml&#228;ute", "link": "https://stackoverflow.com/users/1169096/uml%c3%a4ute"}, "edited": false, "score": 0, "creation_date": 1496825446, "post_id": 44405806, "comment_id": 75814532, "body": "creating a new user (with a different environment) is not really <i>solving</i> the problem. instead you just go away and don&#39;t care about the problem any longer. in any case, if you find the answer to your question yourself, please add it as a proper &quot;Answer&quot; and <i>accept</i> it, so the Q doesn&#39;t show up as <i>unanswered</i> in the searched."}], "owner": {"reputation": 11, "user_id": 8123811, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213284530778506/picture?type=large", "display_name": "Ari Jaime", "link": "https://stackoverflow.com/users/8123811/ari-jaime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496821601, "creation_date": 1496819185, "last_edit_date": 1496821601, "question_id": 44405806, "link": "https://stackoverflow.com/questions/44405806/uninstall-git-bash-from-rails", "title": "Uninstall git bash from rails?", "body": "<p>How can I uninstall git bash from rainstaller?</p>\n\n<p>It had thrown some errors when it was time to put user and mail in the latest version of rainstaller. I am thinking of preventing it from running when I use Ruby from prompt. I expect a more elegant way than to delete the git directory.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1496817208, "post_id": 44405134, "comment_id": 75809330, "body": "where&#39;s your controller?"}, {"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1496817483, "post_id": 44405134, "comment_id": 75809489, "body": "It seems the controller you posted is not complete. Where are the <code>update</code> and / or <code>create</code> methods? Where are you saving your object?"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496817584, "post_id": 44405134, "comment_id": 75809543, "body": "are you allowing the attributes properly using strong parameters?"}, {"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496855368, "post_id": 44405134, "comment_id": 75836365, "body": "Thanks Farhan, I have just added my controller."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496855615, "post_id": 44406506, "comment_id": 75836500, "body": "Please can you explain to me how to do that and how I would link it to the form since its already attached to the task model?"}, {"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496856154, "post_id": 44406506, "comment_id": 75836775, "body": "I removed the validation, but when i submitted, it displayed on the page but the title was empty going back to the fact that it didn&#39;t see the texts in the text_field, can  it be a problem of using a text-field? The details was text-area and it displayed."}, {"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496856334, "post_id": 44406506, "comment_id": 75836860, "body": "That didn&#39;t work, obviously its about picking up the text typed into the text area."}, {"owner": {"reputation": 3, "user_id": 1141059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/726483c75afb6502561dc1fdcb23d9a6?s=128&d=identicon&r=PG", "display_name": "weito", "link": "https://stackoverflow.com/users/1141059/weito"}, "reply_to_user": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496978601, "post_id": 44406506, "comment_id": 75894756, "body": "def task_params   params.require(:task).permit(:detail, :topic) end"}], "tags": [], "owner": {"reputation": 3, "user_id": 1141059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/726483c75afb6502561dc1fdcb23d9a6?s=128&d=identicon&r=PG", "display_name": "weito", "link": "https://stackoverflow.com/users/1141059/weito"}, "is_accepted": false, "score": 0, "last_activity_date": 1496821400, "creation_date": 1496821400, "answer_id": 44406506, "question_id": 44405134, "link": "https://stackoverflow.com/questions/44405134/working-on-rails-i-have-text-fields-and-text-areas-to-receive-text-but-it-show/44406506#44406506", "title": "Working on rails, i have text fields and text areas to receive text, but it shows the validation error &quot;Topic cannot be empty&quot;", "body": "<p>validates :topic, presence: true, length: { maximum: 140 }\nThis clause validates the topic attribute in your record to be present and within 140 char length. This is used to validate record before save. You may remove it if you really dont need it here. Another option you can create a form model which is used specifically for this form.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496855409, "post_id": 44408191, "comment_id": 75836387, "body": "Do I have to remove the validation attached to the model task first?"}, {"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496856145, "post_id": 44408191, "comment_id": 75836770, "body": "I removed the validation, but when i submitted, it displayed on the page but the title was empty going back to the fact that it didn&#39;t see the texts in the text_field, can  it be a problem of using a text-field? The details was text-area and it displayed."}, {"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496856342, "post_id": 44408191, "comment_id": 75836863, "body": "That didn&#39;t work, obviously its about picking up the text typed into the text area."}], "tags": [], "owner": {"reputation": 449, "user_id": 6734208, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210145798425657/picture?type=large", "display_name": "Ronan Louarn", "link": "https://stackoverflow.com/users/6734208/ronan-louarn"}, "is_accepted": false, "score": 0, "last_activity_date": 1496826318, "creation_date": 1496826318, "answer_id": 44408191, "question_id": 44405134, "link": "https://stackoverflow.com/questions/44405134/working-on-rails-i-have-text-fields-and-text-areas-to-receive-text-but-it-show/44408191#44408191", "title": "Working on rails, i have text fields and text areas to receive text, but it shows the validation error &quot;Topic cannot be empty&quot;", "body": "<p>It's probably a validation in your model Task.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "edited": false, "score": 0, "creation_date": 1496939139, "post_id": 44438709, "comment_id": 75879689, "body": "Thanks Cristobal, figured that out yesterday after starting to look at it from the beginning."}], "tags": [], "owner": {"reputation": 378, "user_id": 6130770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dcaea19f2bced3c51f9f43f067eb894?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Cristobal", "link": "https://stackoverflow.com/users/6130770/hans-cristobal"}, "is_accepted": false, "score": 0, "last_activity_date": 1496932685, "creation_date": 1496932685, "answer_id": 44438709, "question_id": 44405134, "link": "https://stackoverflow.com/questions/44405134/working-on-rails-i-have-text-fields-and-text-areas-to-receive-text-but-it-show/44438709#44438709", "title": "Working on rails, i have text fields and text areas to receive text, but it shows the validation error &quot;Topic cannot be empty&quot;", "body": "<p>You are missing the :topic field in your permit, which is why it's not being processed.</p>\n\n<pre><code>def task_params\n  params.require(:task).permit(:detail, :topic)\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7904229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c763a04b369f8bc8671b1a47fedef8b?s=128&d=identicon&r=PG&f=1", "display_name": "T. A", "link": "https://stackoverflow.com/users/7904229/t-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1496932685, "creation_date": 1496817091, "last_edit_date": 1496855317, "question_id": 44405134, "link": "https://stackoverflow.com/questions/44405134/working-on-rails-i-have-text-fields-and-text-areas-to-receive-text-but-it-show", "title": "Working on rails, i have text fields and text areas to receive text, but it shows the validation error &quot;Topic cannot be empty&quot;", "body": "<p>After typing in topic and details in the appropriate text field and area, it still shows \"validation error\" \"Topic cannot be empty\". what is the problem? I cannot seem to figure it out.</p>\n\n<pre><code>This is the task partial\n_task.html.erb:\n\n &lt;li id=\"task-&lt;%= task.id %&gt;\"&gt;\n      &lt;%= link_to gravatar_for(task.user, size: 50), task.user %&gt;\n      &lt;span class=\"task\"&gt;&lt;%= link_to task.user.name, task.user %&gt;&lt;/span&gt;\n      &lt;span class=\"topiclabel\"&gt;Title:&lt;/span&gt;\n      &lt;span class=\"topic\"style=color:black&gt; &lt;%= task.topic %&gt;&lt;/span&gt;\n      &lt;span class=\"detailslabel\"&gt;Details: &lt;/span&gt;\n      &lt;span class=\"detail\"&gt;&lt;%= task.detail %&gt;&lt;/span&gt; \n      &lt;span class=\"timestamp\"&gt;\n        Posted &lt;%= time_ago_in_words(task.created_at) %&gt; ago.\n      &lt;/span&gt;\n&lt;/li&gt; \n\nSchema:\n\nActiveRecord::Schema.define(version: 20170526194708) do\n\n  create_table \"stages\", force: :cascade do |t|\n    t.text     \"topic\"\n    t.datetime \"duration\"\n    t.text     \"detail\"\n    t.integer  \"task_id\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"task_id\"], name: \"index_stages_on_task_id\"\n    t.index [\"user_id\", \"created_at\"], name: \"index_stages_on_user_id_and_created_at\"\n    t.index [\"user_id\"], name: \"index_stages_on_user_id\"\n  end\n\n  create_table \"tasks\", force: :cascade do |t|\n    t.text     \"topic\"\n    t.integer  \"member\"\n    t.text     \"detail\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"user_id\", \"created_at\"], name: \"index_tasks_on_user_id_and_created_at\"\n    t.index [\"user_id\"], name: \"index_tasks_on_user_id\"\n  end\n\nroutes.rb:\n\n resources :tasks,          only: [:create, :destroy]\n\ntask.rb\nclass Task &lt; ApplicationRecord\n  belongs_to :user\n  has_many :stages\n  default_scope -&gt; { order(created_at: :desc) }\n   validates :user_id, presence: true\n   validates :topic, presence: true, length: { maximum: 140 }\n   validates :detail, presence: true, length: { maximum: 140 }\n\nend\n</code></pre>\n\n<p>Project_pages_controller.rb:</p>\n\n<pre><code>def home\n    if logged_in?\n      @task = current_user.tasks.build\nend\n\n\n_task_form.html.erb:\n\n&lt;%= form_for(@task) do |f| %&gt;\n  &lt;%= render 'shared/error_messages', object: f.object %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.text_field :topic, placeholder: \"Compose new task...\" %&gt;\n    &lt;%= f.text_area :detail, placeholder: \"Write task details...\" %&gt;\n  &lt;/div&gt;\n  &lt;%= f.submit \"Post\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n\n\nThis is the show page\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>  &lt;div class=\"col-md-8\"&gt;\n    &lt;% if @user.tasks.any? %&gt;\n      &lt;% if @user.stages.any? %&gt;\n      &lt;h3&gt;Tasks (&lt;%= @user.tasks.count %&gt;)&lt;/h3&gt;\n      &lt;ol class=\"tasks\"&gt;\n        &lt;%= render @tasks %&gt;\n        &lt;%= render @stages %&gt;\n      &lt;/ol&gt;\n      &lt;%= will_paginate @tasks %&gt;\n       &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>This is my controller;</p>\n\n<pre><code>class TasksController &lt; ApplicationController\n    include TasksHelper\n  before_action :logged_in_user, only: [:create, :destroy]\n\n  def create\n    @task = current_user.tasks.build(task_params)\n    if @task.save\n      flash[:success] = \"Task created!\"\n      redirect_to root_url\n    else\n      @feed_items = []\n      render 'workshareapp_pages/home'\n    end\n  end\n\n  def destroy\n  end\n\n  private\n\n    def task_params\n      params.require(:task).permit(:detail)\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 1, "creation_date": 1496816189, "post_id": 44404772, "comment_id": 75808747, "body": "and can be simplified as <code>my_java_opts = get_java_opts || @java_opts</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1496825399, "post_id": 44404772, "comment_id": 75814495, "body": "Are you aware that your code will eventually assign the string <code>&quot;No YAML found&quot;</code> to <code>my_java_opts</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1496816367, "post_id": 44404835, "comment_id": 75808844, "body": "...and should be written as <code>my_java_opts = get_java_opts ? get_java_opts : @java_opts</code> to DRY due to ternary returns a value. (Or even better <code>my_java_opts = get_java_opts || @java_opts</code> :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1496816580, "post_id": 44404835, "comment_id": 75808970, "body": "@mudasobwa: did you ninja-change your comment or I didn&#39;t see the last part (with the <code>||</code>) the first time? :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1496816664, "post_id": 44404835, "comment_id": 75809023, "body": "ninja-change (I am selling a 32 hrs training course on how-to-do-it for $799 only.)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1496816020, "creation_date": 1496816020, "answer_id": 44404835, "question_id": 44404772, "link": "https://stackoverflow.com/questions/44404772/unable-to-understand-ruby-method-call/44404835#44404835", "title": "unable to understand ruby method call", "body": "<p>It is called \"ternary operator\". This line</p>\n\n<pre><code>get_java_opts ? my_java_opts = get_java_opts : my_java_opts = @java_opts\n</code></pre>\n\n<p>is equivalent to this</p>\n\n<pre><code>if get_java_opts\n  my_java_opts = get_java_opts\nelse\n  my_java_opts = @java_opts\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1035, "user_id": 5554198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OsD5IkhG7Sc/AAAAAAAAAAI/AAAAAAAADXQ/mun69ZJ2bP0/photo.jpg?sz=128", "display_name": "Vishal Nagda", "link": "https://stackoverflow.com/users/5554198/vishal-nagda"}, "is_accepted": false, "score": 0, "last_activity_date": 1496819298, "creation_date": 1496819298, "answer_id": 44405851, "question_id": 44404772, "link": "https://stackoverflow.com/questions/44404772/unable-to-understand-ruby-method-call/44405851#44405851", "title": "unable to understand ruby method call", "body": "<p>The <code>Ternary Operator</code> syntax is like <code>condition ? true : false</code><br><br>\nLets understand its working using <code>get_java_opts ? my_java_opts = get_java_opts : my_java_opts = @java_opts</code> as example<br>\nLet us divide our expression in parts <code>PART A ? PART B : PART C</code><br><br>\nNow ,<br>in <code>PART A</code> you've <code>get_java_opts</code>,<br>\nin <code>PART B</code> you've <code>my_java_opts = get_java_opts</code>, and<br>\nin <code>PART C</code> you've <code>my_java_opts = @java_opts</code><br><br>\nSo Now,<br>\nlet's assume your <code>PART A</code> is returning either <code>true</code> or <code>false</code>.<br>\nIf <code>PART A</code> return <code>true</code> then then the <code>PART B</code> will execute which is <code>my_java_opts = get_java_opts</code><br>\nand if <code>PART A</code> return <code>false</code> then the <code>PART C</code> will execute which is <code>my_java_opts = @java_opts</code>.</p>\n"}], "owner": {"reputation": 247, "user_id": 6378152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c1193ff68e9f17ed58182ed16a090fa0?s=128&d=identicon&r=PG&f=1", "display_name": "user6378152", "link": "https://stackoverflow.com/users/6378152/user6378152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1496825474, "answer_count": 2, "score": 0, "last_activity_date": 1496819298, "creation_date": 1496815760, "last_edit_date": 1496816056, "question_id": 44404772, "link": "https://stackoverflow.com/questions/44404772/unable-to-understand-ruby-method-call", "closed_reason": "Duplicate", "title": "unable to understand ruby method call", "body": "<p>I have a method definition in ruby file (get_java_opts)-\nThen one more method calls this \"get_java_opts\" method with below syntax-\nWhat is this line doing?-</p>\n\n<pre><code>get_java_opts ? my_java_opts = get_java_opts : my_java_opts = @java_opts\n</code></pre>\n\n<p>Code from my ruby file-</p>\n\n<pre><code>def start\n  appdir = \"#{@rootdir}/mydir\"\n  wo_prop = \"#{@rootdir}/app.properties\"\n  get_java_opts ? my_java_opts = get_java_opts : my_java_opts = @java_opts\n</code></pre>\n\n<p>Method definition-</p>\n\n<pre><code>def get_java_opts\n  yml = \"#{@rootdir}/#{@test}.yaml\"\n  y = YAML.load_file(yml) if File.exists?(yml)\n  java_opts = y[@app]['java_opts'] rescue \"No YAML found\"\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1496825155, "post_id": 44404765, "comment_id": 75814332, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. <a href=\"https://stackoverflow.com\">Stack Overflow</a> is not a &quot;write-my-code-for-me-service&quot;!"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1496816572, "post_id": 44404821, "comment_id": 75808963, "body": "In the case of a very long string this produces a superfluous array."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 1, "last_activity_date": 1496815967, "creation_date": 1496815967, "answer_id": 44404821, "question_id": 44404765, "link": "https://stackoverflow.com/questions/44404765/how-to-chop-ruby-string-having-a-random-number/44404821#44404821", "title": "How to chop ruby string having a random number", "body": "<p>you can just use <a href=\"https://apidock.com/ruby/String/split\" rel=\"nofollow noreferrer\"><code>#split</code></a></p>\n\n<pre><code>'FA117RWD-20 ABC Program (version 10.0)'.split(' ').first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1496816599, "post_id": 44404887, "comment_id": 75808981, "body": "This is a way to go."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1496816199, "creation_date": 1496816199, "answer_id": 44404887, "question_id": 44404765, "link": "https://stackoverflow.com/questions/44404765/how-to-chop-ruby-string-having-a-random-number/44404887#44404887", "title": "How to chop ruby string having a random number", "body": "<pre><code>main_string = 'FA117RWD-20 ABC Program (version 10.0)'\n\nmain_string[/\\S+/]\n  #=&gt; \"FA117RWD-20\"\n</code></pre>\n\n<p>The regular expression matches one or more characters that are not whitespace.</p>\n\n<p>Another way is the following<sup>1</sup>.</p>\n\n<pre><code>main_string[0..main_string.index(' ')-1]\n</code></pre>\n\n<p><sup>1 One can use three dots and write <code>main_string[0...main_string.index(' ')]</code>, but I prefer to always use two dots.\n</sup></p>\n"}], "owner": {"reputation": 81, "user_id": 6921563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/39403ecde8932369718552789b18c197?s=128&d=identicon&r=PG&f=1", "display_name": "utkarshs", "link": "https://stackoverflow.com/users/6921563/utkarshs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 44404887, "answer_count": 2, "score": -1, "last_activity_date": 1496816199, "creation_date": 1496815727, "last_edit_date": 1496816145, "question_id": 44404765, "link": "https://stackoverflow.com/questions/44404765/how-to-chop-ruby-string-having-a-random-number", "title": "How to chop ruby string having a random number", "body": "<p>My string is - <code>main_string = 'FA117RWD-20 ABC Program (version 10.0)'</code></p>\n\n<p>In this string I just want to read FA117RWD-20 and in this string version is random which will be coming from somewhere, its version 10 right now it can be version 20 at some other time also the part that I want to read i.e. FA117RWD-20 will also be coming from somewhere randomly so is not of fix length, basically I want to chop everything that is coming after this string. How should I do it?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["mysql", "ruby", "ruby-on-rails-3", "rails-activerecord"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1496856789, "post_id": 44404392, "comment_id": 75837103, "body": "FWIW, Rails 3.2 is over 5 years old. When it was released, Siri was brand new, Kim Jong Il was still the head of North Korea, and Lyft hadn&#39;t launched yet. It&#39;s no longer supported by the Rails team and can no longer be considered secure."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7113374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3902993fe3c995ddf407621f23dc39ad?s=128&d=identicon&r=PG&f=1", "display_name": "Vijayr32", "link": "https://stackoverflow.com/users/7113374/vijayr32"}, "edited": false, "score": 0, "creation_date": 1497342692, "post_id": 44404518, "comment_id": 76024640, "body": "Already, I have used same &#39;.first_or_initialize_by&#39; but did not work!"}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 1, "last_activity_date": 1496814691, "creation_date": 1496814691, "answer_id": 44404518, "question_id": 44404392, "link": "https://stackoverflow.com/questions/44404392/rails-3-2-duplicate-entry-for-key-index-in-mysql/44404518#44404518", "title": "Rails 3.2 : Duplicate entry for key index in mysql?", "body": "<p><code>find_or_create_by</code> in <code>before_save</code> is probably creating the resource and again after the callback it is trying to save the same resource..either move everything to <code>after_save</code> or replace it with <code>.first_or_initialize</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 7113374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3902993fe3c995ddf407621f23dc39ad?s=128&d=identicon&r=PG&f=1", "display_name": "Vijayr32", "link": "https://stackoverflow.com/users/7113374/vijayr32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 44404518, "answer_count": 1, "score": 2, "last_activity_date": 1496814691, "creation_date": 1496814167, "question_id": 44404392, "link": "https://stackoverflow.com/questions/44404392/rails-3-2-duplicate-entry-for-key-index-in-mysql", "title": "Rails 3.2 : Duplicate entry for key index in mysql?", "body": "<p>I am using rails 3.2. Here! I am facing a problem, stats below.</p>\n\n<p>I am having two model classes RequestedTrip and TagTrip. Here! are two other models RequestedTripAgent and Tag on which I operate in before_save callback of RequestedTrip and after_update callback of TagTrip. </p>\n\n<p>There is a case in which I am facing Duplicate entry problem. The case is ...</p>\n\n<p>I am updating RequestedTrip object. There is a before_save callback in which I am using find_or_create_by to find or create RequestedTripAgent object. I also assigning Tags to RequestedTrip object through which another callbacks fire in TagTrip after_update. In TagTrip after_update callback, I also using find_or_create_by of same object of RequestedTripAgent.</p>\n\n<p>Here I am using find_or_create_by but getting Duplicate key index error for RequestedTripAgent. What is wrong with me?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1496812683, "post_id": 44403945, "comment_id": 75807259, "body": "Instead of <code>each_with_index.map</code>, one can do <code>map.with_index</code>."}], "tags": [], "owner": {"reputation": 3347, "user_id": 1061630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a4c7abc90d884112b56919261db1fc?s=128&d=identicon&r=PG", "display_name": "Farkhat Mikhalko", "link": "https://stackoverflow.com/users/1061630/farkhat-mikhalko"}, "is_accepted": false, "score": 0, "last_activity_date": 1496825782, "last_edit_date": 1496825782, "creation_date": 1496812001, "answer_id": 44403945, "question_id": 44403864, "link": "https://stackoverflow.com/questions/44403864/cant-see-why-i-have-no-implicit-conversion-from-nil-to-integer-error/44403945#44403945", "title": "Can&#39;t see why I have &quot;no implicit conversion from nil to integer&quot; error", "body": "<p>This error raised, because you've trying to access array <code>@pair2</code> with <code>nil</code> index. <code>map</code> method doesn't send index as second argument to provided block. To add them you can add <code>each_with_index</code> method before <code>map</code>. Also see this <a href=\"https://stackoverflow.com/questions/20040757/using-each-with-index-with-map\">question</a>.</p>\n\n<pre><code>@pair1.each_with_index\n   .map{ |x, i| word.include?(x) &amp;&amp; word.include?(@pair2[i]) }\n   .include?(true)\n</code></pre>\n\n<p>Try this code, it will help to understand what's happen:</p>\n\n<pre><code>pair2 = []\nputs pair2[nil] # will raise the same exception\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496812586, "post_id": 44403947, "comment_id": 75807230, "body": "if you&#39;re gonna post links to docs, post links to current version, not one from 6 years ago :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1496812687, "post_id": 44403947, "comment_id": 75807261, "body": "Instead of <code>each_with_index.map</code>, one can do <code>map.with_index</code>."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496812872, "post_id": 44403947, "comment_id": 75807334, "body": "yes..thanks...I didn&#39;t notice that..I will update. :)"}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 0, "last_activity_date": 1496813034, "last_edit_date": 1496813034, "creation_date": 1496812009, "answer_id": 44403947, "question_id": 44403864, "link": "https://stackoverflow.com/questions/44403864/cant-see-why-i-have-no-implicit-conversion-from-nil-to-integer-error/44403947#44403947", "title": "Can&#39;t see why I have &quot;no implicit conversion from nil to integer&quot; error", "body": "<p>Your index <code>i</code> is nil, as you are only doing <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>map</code></a> which iterates over the element only, to use <code>map</code> with <code>index</code> you need to use <code>.map.with_index</code> as shown in the docs which will give you both element <code>x</code> and index <code>i</code></p>\n\n<pre><code>def block_word?(word)\n  word = word.upcase\n  @pair1.map.with_index { |x, i| word.include?(x) &amp;&amp; word.include?(@pair2[i]) }.include?(true)\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6571158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10744ca947f9d9a1bba91ad1619d334d?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Rashid", "link": "https://stackoverflow.com/users/6571158/mohammed-rashid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 44403947, "answer_count": 2, "score": 0, "last_activity_date": 1496825782, "creation_date": 1496811659, "question_id": 44403864, "link": "https://stackoverflow.com/questions/44403864/cant-see-why-i-have-no-implicit-conversion-from-nil-to-integer-error", "title": "Can&#39;t see why I have &quot;no implicit conversion from nil to integer&quot; error", "body": "<p>Hey guys I'm having an issue with this problem. I'm doing exercises from a book and this is one of them.</p>\n\n<p>A collection of spelling blocks has two letters per block, as shown in this list:</p>\n\n<pre><code>B:O   X:K   D:Q   C:P   N:A\nG:T   R:E   F:S   J:W   H:U\nV:I   L:Y   Z:M\n</code></pre>\n\n<p>This limits the words you can spell with the blocks to just those words that do not use both letters from any given block. Each block can only be used once.</p>\n\n<p>Write a method that returns true if the word passed in as an argument can be spelled from this set of blocks, false otherwise.</p>\n\n<p>Examples:</p>\n\n<pre><code>block_word?('BATCH') == true\nblock_word?('BUTCH') == false\nblock_word?('jest') == true\n</code></pre>\n\n<p>This is my attempt at a solution. I'm reading in the collection from a text document.</p>\n\n<pre><code>  text = []\n    File.open('example2.txt').each { |line| text &lt;&lt; line }\n    @pair1 = []\n    @pair2 = []\n    text.join('').split('   ').each {|x, i| @pair1 &lt;&lt; x[0].to_s; @pair2 &lt;&lt; x[2].to_s}\n\n    def block_word?(word)\n      word = word.upcase\n      @pair1.map {|x, i| word.include?(x) &amp;&amp; word.include?(@pair2[i]) }.include?(true)\n    end\n\n    block_word?('BATCH') == true\n    block_word?('BUTCH') == false\n    block_word?('jest') == true\n</code></pre>\n\n<p>I'm getting this error. Not sure why.</p>\n\n<pre><code>rb2.rb:10:in `[]': no implicit conversion from nil to integer (TypeError)\n        from rb2.rb:10:in `block in block_word?'\n        from rb2.rb:10:in `map'\n        from rb2.rb:10:in `block_word?'\n        from rb2.rb:13:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496810494, "post_id": 44403609, "comment_id": 75806502, "body": "shouldn&#39;t that be <code>File.open()</code>?"}, {"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496810757, "post_id": 44403609, "comment_id": 75806584, "body": "i&#39;ve tried both.  but neither worked for me. :("}], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 0, "last_activity_date": 1496811149, "last_edit_date": 1496811149, "creation_date": 1496810949, "answer_id": 44403738, "question_id": 44403609, "link": "https://stackoverflow.com/questions/44403609/seed-with-paperclip-using-image-url/44403738#44403738", "title": "Seed with paperclip using image url", "body": "<p>Here is how I'm using it:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_attached_file :avatar, ...\nend\n\nuser = User.new\nuser.avatar = URI.parse(url_goes_here)\nuser.save\n</code></pre>\n\n<p><sub><a href=\"https://github.com/thoughtbot/paperclip/wiki/Attachment-downloaded-from-a-URL\" rel=\"nofollow noreferrer\">Attachment downloaded from a URL</a></sub></p>\n"}], "owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 44403738, "answer_count": 1, "score": 0, "last_activity_date": 1496811690, "creation_date": 1496810288, "last_edit_date": 1496811690, "question_id": 44403609, "link": "https://stackoverflow.com/questions/44403609/seed-with-paperclip-using-image-url", "title": "Seed with paperclip using image url", "body": "<p>I'm using Paperclip and I want to upload the image on S3 for the User's avatar.</p>\n\n<p>My CSV</p>\n\n<pre><code>username    avatar_url\nfoo         https://s3.amazonaws.com/foo/seed/10215716104_e09765dabd_z.jpg\n</code></pre>\n\n<p>I was going to <a href=\"https://gist.github.com/arjunvenkat/1115bc41bf395a162084\" rel=\"nofollow noreferrer\">follow this tutorial</a> to create a CSV, along with this <a href=\"https://stackoverflow.com/questions/6450207/how-to-use-seed-data-with-paperclip-s3\">SO question</a> (for Paperclip seeding), so something like this:</p>\n\n<pre><code>require 'csv'\n\ncsv_text = File.read(Rails.root.join('lib', 'seeds', 'user.csv'))\ncsv = CSV.parse(csv_text, :headers =&gt; true, :encoding =&gt; 'ISO-8859-1')\ncsv.each do |row|\n  u = User.new\n  u.username = row['username']\n  u.avatar = File.open(row['avatar_url'])\n  u.save\nend\n</code></pre>\n\n<p>However, when I try this in the console, like this:</p>\n\n<pre><code>User.create(username: 'foo', avatar: File.new(\"https://s3.amazonaws.com/foo/seed/10215716104_e09765dab\"))\n</code></pre>\n\n<p>I get an error: </p>\n\n<pre><code>Errno::ENOENT: No such file or directory @ rb_sysopen - https://s3.amazonaws.com/foo/seed/10215716104_e09765dabd_z.jpg\n</code></pre>\n\n<p>Is it possible to seed with images on S3?  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1496810712, "post_id": 44403166, "comment_id": 75806564, "body": "You can make use of the <a href=\"https://rubygems.org/gems/ordinalize\" rel=\"nofollow noreferrer\">ordinalize</a> gem. Then you can do <code>1.ordinalize #=&gt; first</code>, <code>2.ordinalize #=&gt; second</code> etc."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1496825558, "post_id": 44403166, "comment_id": 75814615, "body": "What is your question?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1496830322, "post_id": 44403166, "comment_id": 75818187, "body": "Does the program have to be that verbose?"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1496809401, "post_id": 44403294, "comment_id": 75806204, "body": "<code>#{i+1}th</code> doesn&#39;t make sense for all <code>i</code> in <code>(1..10)</code>."}, {"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1496809525, "post_id": 44403294, "comment_id": 75806241, "body": "yes agreed, it does not in that case. One has to be careful."}], "tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 0, "last_activity_date": 1496809570, "last_edit_date": 1496809570, "creation_date": 1496808416, "answer_id": 44403294, "question_id": 44403166, "link": "https://stackoverflow.com/questions/44403166/in-ruby-create-a-program-that-asks-a-user-for-10-numbers-and-then-returns-the-su/44403294#44403294", "title": "in ruby Create a program that asks a user for 10 numbers and then returns the sum", "body": "<pre><code> sum = 10.times.inject(0) do|sum,i| \n         puts \"Enter #{i+1}th number\"\n         sum = sum + gets.chomp.to_f\n       end\n puts \"The sum is #{sum}\"\n</code></pre>\n\n<p>This example works well with decimal and integer you pass.</p>\n\n<blockquote>\n  <p>You are missing the point that, you are a software writer. You write softwares for end-users and its up to the users, how many numbers they want to enter. So I suggest you to learn writing dynamic softwares. <strong>Do not just hard-code everything</strong>. Make things flexible so that its easily tweak-able.</p>\n</blockquote>\n\n<p>One idea is, you can even ask user how many numbers they want to enter.</p>\n"}], "owner": {"reputation": 5, "user_id": 8123075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793881d3761665bed4fb51a67f604134?s=128&d=identicon&r=PG&f=1", "display_name": "Neil Desai", "link": "https://stackoverflow.com/users/8123075/neil-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1496809570, "creation_date": 1496807401, "last_edit_date": 1496807469, "question_id": 44403166, "link": "https://stackoverflow.com/questions/44403166/in-ruby-create-a-program-that-asks-a-user-for-10-numbers-and-then-returns-the-su", "title": "in ruby Create a program that asks a user for 10 numbers and then returns the sum", "body": "<pre><code>puts \"Im gonna ask you for 10 numbers and then give you the sum\"\nputs \"Give me the first number\"\nfirst_number= gets.chomp\nputs \"Give me the second number\"\nsecond_number=gets.chomp\nputs \"Give me the third number \"\nthird_number=gets.chomp\nputs \"Give me the fourth number\"\nfourth_number= gets.chomp\nputs \"Give me the fifth number\"\nfifth_number=gets.chomp\nputs \"Give me the sixth number\"\nsixth_number=gets.chomp\nputs \"Give me the seventh number\"\nseventh_number=gets.chomp\nputs \"Give me the eighth number\"\neighth_number=gets.chomp\nputs \"Give me the ninth number\"\nninth_number=gets.chomp\nputs \"Give me the tenth number\"\ntenth_number= gets.chomp\nputs \"The Sum of all your TEN numbers is:\"\nputs first_number.to_i + second_number.to_i+ third_number.to_i + fourth_number.to_i + fifth_number.to_i + sixth_number.to_i+ seventh_number.to_i+ eighth_number.to_i+ ninth_number.to_i + tenth_number.to_i\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1496814274, "post_id": 44402844, "comment_id": 75807849, "body": "Are you completely sure that this <code>if @search.select.instance_of?(Integer)</code> gives you back true? If not try using <code>is_a?</code>"}, {"owner": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "reply_to_user": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1496842210, "post_id": 44402844, "comment_id": 75827059, "body": "Hm, youre right, but both of them return as false... I think I know  the problem (maybe?) but how do I check if an objects parameter takes in an Integer as the input?"}, {"owner": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1496842364, "post_id": 44402844, "comment_id": 75827181, "body": "It takes anything you give it if I an not mistakeb. But you can check using <code>param.class</code> which will tell you what class is in it."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "edited": false, "score": 0, "creation_date": 1496805712, "post_id": 44402904, "comment_id": 75805452, "body": "Thanks so much for the quick response! And yes, the include works in other places, but it doesnt work in this ONE spot, its very weird... Oh well, Ill keep working on it. Thanks again!"}, {"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "reply_to_user": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "edited": false, "score": 0, "creation_date": 1496805827, "post_id": 44402904, "comment_id": 75805473, "body": "hmm, are you sure <code>@search.search</code> is what you want? seems like a funny name"}, {"owner": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "edited": false, "score": 0, "creation_date": 1496805962, "post_id": 44402904, "comment_id": 75805502, "body": "Yeah, its pretty much the input (shoot why didnt I name it that lol), and when I put it in, I input it as &quot;&gt;40&quot;"}, {"owner": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "edited": false, "score": 0, "creation_date": 1496805996, "post_id": 44402904, "comment_id": 75805507, "body": "I could add the rest of the code, if that might help find a problem?"}, {"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "reply_to_user": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "edited": false, "score": 1, "creation_date": 1496806227, "post_id": 44402904, "comment_id": 75805556, "body": "Try adding <code>byebug</code> just before the problem line"}, {"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "reply_to_user": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "edited": false, "score": 0, "creation_date": 1496806263, "post_id": 44402904, "comment_id": 75805562, "body": "then run it, and in the console type <code>@search.search</code> to see what it is"}, {"owner": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "edited": false, "score": 0, "creation_date": 1496807098, "post_id": 44402904, "comment_id": 75805709, "body": "All is well, except for @gsearch. It should be 40 (&gt;40 but without &quot;&gt;&quot;) but it returns as nil, any fixes?"}], "tags": [], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "is_accepted": false, "score": 0, "last_activity_date": 1496805396, "creation_date": 1496805396, "answer_id": 44402904, "question_id": 44402844, "link": "https://stackoverflow.com/questions/44402844/include-not-working-rails/44402904#44402904", "title": "include? not working rails", "body": "<pre><code>2.3.1 :001 &gt; \"asdf&gt;\".include?(\"&gt;\")\n =&gt; true \n2.3.1 :002 &gt; \"asdf\".include?(\"&gt;\")\n =&gt; false \n</code></pre>\n\n<p>Seems to work to me. My guess is you need to check what <code>@search.search</code> is, and see if it actually has a <code>&gt;</code> in it. </p>\n\n<p>If it does, the only other explanation I can think of is perhaps there are multiple <code>&gt;</code> characters with fancy unicode versions.</p>\n"}], "owner": {"reputation": 13, "user_id": 6463758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8e1113f8f5e53f3dd0569dc32f6076d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zaviermiller", "link": "https://stackoverflow.com/users/6463758/zaviermiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496805396, "creation_date": 1496804888, "question_id": 44402844, "link": "https://stackoverflow.com/questions/44402844/include-not-working-rails", "title": "include? not working rails", "body": "<p>So, what I'm trying to do is test if an input has a greater than sign, but the include? isnt working. Even when I just test if the if is \"true\" it doesnt work. The code is below</p>\n\n<pre><code>if @search.select.instance_of?(Integer)\n  if @search.search.include?(\"&gt;\")\n    @gsearch = @search.search.gsub(\"&gt;\",\"\")\n    @results = @model.where(\"#{@param} &gt; ?\", @newsearch.to_i)\n  else\n    @results = @model.where(\"#{@param}\": @search.search)\n  end\nend\n</code></pre>\n\n<p>So, first, it is testing if the \"select\" is an integer (it is in my tests), next it is testing if there is a \">\" sign (there is, but it isnt found) Then it is displaying the results of the search. I have no idea whats wrong, and Im sorry for bad question asking, its late, and Im tired of this lol. Any help is appreciated!</p>\n\n<p>EDIT: No error comes up, it just shows a blank page...</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1496803748, "post_id": 44402685, "comment_id": 75805013, "body": "It&#39;d be great if you add the code involved in the problem."}], "answers": [{"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "edited": false, "score": 0, "creation_date": 1496804926, "post_id": 44402787, "comment_id": 75805301, "body": "@Mannish While testing in console, do you get any other message?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "edited": false, "score": 0, "creation_date": 1496805670, "post_id": 44402787, "comment_id": 75805444, "body": "@Mannish And, just to sure, you restarted you console session after the change, right?"}, {"owner": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "edited": false, "score": 0, "creation_date": 1496805854, "post_id": 44402787, "comment_id": 75805485, "body": "i get a message Category id = 1, name = nil..but when i type category.name it gives me Games."}, {"owner": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "edited": false, "score": 0, "creation_date": 1496811920, "post_id": 44402787, "comment_id": 75807009, "body": "i almost started from rock bottom and finnaly got it. the nil came because the name i wrote was in double quote where as when i write it in single quote &#39;Games&#39; then it show. Thank you"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "edited": false, "score": 0, "creation_date": 1496840076, "post_id": 44402787, "comment_id": 75825347, "body": "@Mannish Wow, that&#39;s really odd. Thanks for sharing! If you now change to double quoted again, do you get the error?"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 2, "last_activity_date": 1496804330, "creation_date": 1496804330, "answer_id": 44402787, "question_id": 44402685, "link": "https://stackoverflow.com/questions/44402685/why-the-value-is-nil-although-i-created-a-new-variable-for-the-model/44402787#44402787", "title": "why the Value is nil although i created a new variable for the model", "body": "<p>Remove <code>attr_accessor :name</code> as it overrides ActiveRecord default behavior.</p>\n"}], "owner": {"reputation": 99, "user_id": 8122855, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/40399c2571056cf04ec71082ae9e961c?s=128&d=identicon&r=PG&f=1", "display_name": "Mannish", "link": "https://stackoverflow.com/users/8122855/mannish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496804535, "creation_date": 1496803665, "last_edit_date": 1496804535, "question_id": 44402685, "link": "https://stackoverflow.com/questions/44402685/why-the-value-is-nil-although-i-created-a-new-variable-for-the-model", "title": "why the Value is nil although i created a new variable for the model", "body": "<p>I am working on a ruby on rails project and I am new to it. I have created a model named Category and added properties <code>attr_accessor :name</code> in it. </p>\n\n<p>Then to add a new Category to the database I wrote in rails console\n<code>category = Category.new(:name =&gt; \"GAMES\")</code>.</p>\n\n<p>After writing this I still get <code>(\"Category id = nil, name:nil..\")</code>.</p>\n\n<p>Then after that I did <code>category.save</code> the <code>id</code> number changes but the name field remains <code>nil</code>.</p>\n\n<p>Well the code goes like this:</p>\n\n<pre><code>rails g model category name:string (in git hub)\n</code></pre>\n\n<p>Then in the ruby file</p>\n\n<pre><code>Class Category &gt; ApplicationRecord\n  attr_accessor :name\n  has_many :posts\nend\n</code></pre>\n\n<p>Then back to Github:</p>\n\n<pre><code>category = Category.new(:name =&gt; \"Games\")\ncategory.save\n</code></pre>\n\n<p>The value of name remains <code>nil</code> after doing this.\nWhy is this happening. I am using Heroku git and O didnt commit and push the models after I created it. Is it because of that? or are there some other reasons?.</p>\n\n<p>Please help Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1496804250, "post_id": 44402569, "comment_id": 75805121, "body": "You probably are using strong parameters, show your controller code and exact snippet where the error was raised.."}, {"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1496808254, "post_id": 44402569, "comment_id": 75805938, "body": "can you show us the value of params in your view?"}], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 6734208, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210145798425657/picture?type=large", "display_name": "Ronan Louarn", "link": "https://stackoverflow.com/users/6734208/ronan-louarn"}, "is_accepted": false, "score": 0, "last_activity_date": 1496827132, "creation_date": 1496827132, "answer_id": 44408494, "question_id": 44402569, "link": "https://stackoverflow.com/questions/44402569/no-implicit-conversion-of-symbol-into-integer-rails-5/44408494#44408494", "title": "no implicit conversion of Symbol into Integer Rails 5", "body": "<p>Maybe you should convert your params hash with this command 'symbolize_keys' </p>\n\n<p>Example: </p>\n\n<pre><code>{\"test\"=&gt;\"hb\", \"test\"=&gt;\"hb\" }.symbolize_keys \n</code></pre>\n\n<p>return</p>\n\n<pre><code>{test: \"hb\", test: \"hb\" }\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 7837101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vAayM.jpg?s=128&g=1", "display_name": "Joel Cahalan", "link": "https://stackoverflow.com/users/7837101/joel-cahalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1496852176, "creation_date": 1496802837, "last_edit_date": 1496852176, "question_id": 44402569, "link": "https://stackoverflow.com/questions/44402569/no-implicit-conversion-of-symbol-into-integer-rails-5", "title": "no implicit conversion of Symbol into Integer Rails 5", "body": "<p>I am working on a ruby app similar to reddit and have run into this error while adding user sign-up functionality.  I have a commit view with the following line of code that is causing the error:</p>\n\n<pre><code>&lt;%= button_to \"Yes\", {controller: 'users', \n                          action: 'create',\n                          params: params}, class: 'btn btn-success' %&gt;  \n</code></pre>\n\n<p>To fix the error I changed the code like so:</p>\n\n<pre><code>&lt;%= button_to \"Yes\", {\n                      controller: 'users', \n                          action: 'create',   \n                          params: {  \n                               user { \n                                     name: @user.name,  \n                                    email: @user.email,  \n                                 password: @user.password, \n                    password_confirmation: @user.password_confirmation \n\n                                     }  \n                                   } \n                      },  class: 'btn btn-success' %&gt; \n</code></pre>\n\n<p>This fixes the problem but I would like to understand why the first line doesn't work and get advice on the best way to implement this.  </p>\n\n<p>the error gets thrown on <code>@user.name =params[:user][:name]</code>.<br>\nHere is the full def in users controller: </p>\n\n<pre><code>def create  \n  @user = User.new  \n  @user.name = params[:user][:name]  \n  @user.email = params[:user][:email] \n  @user.password = params[:user][:password]  \n  @user.password_confirmation = params[:user][:password_confirmation]  \nend\n</code></pre>\n\n<p>From my server log I can see that user has been changed to a long string in params: </p>\n\n<pre><code>    Parameters {\"authenticity_token\"=&gt;\"xSeWlcW6Ix5kciNGi2/xAep2aRq0CmefI6ln\u200c\u200bieQutlolAsk/qXM+mGvW\u200c\u200bixvNfTMedHnstWDd29mb\u200c\u200bMThGF1FCqg==\", \"commit\"=&gt;\"Sign up\", \"user\"=&gt;\"email=ja%40j.com&amp;name=jasonj&amp;password=jjjjjj&amp;passwo\u200c\u200brd_confirmation=jjjj\u200c\u200bjj\", \"utf8\"=&gt;\"\u2713\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos-sierra", "rbenv"], "comments": [{"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1496800053, "post_id": 44402194, "comment_id": 75804070, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1954015/installed-rails-but-the-rails-command-says-its-not-installed\">Installed Rails but the rails command says it&#39;s not installed</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8122771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d03737efe2221e6214a9d872b470ed?s=128&d=identicon&r=PG&f=1", "display_name": "AWHay", "link": "https://stackoverflow.com/users/8122771/awhay"}, "is_accepted": false, "score": 0, "last_activity_date": 1496801004, "creation_date": 1496801004, "answer_id": 44402329, "question_id": 44402194, "link": "https://stackoverflow.com/questions/44402194/how-to-install-rails-without-using-sudo-gem-install/44402329#44402329", "title": "How to install Rails without using sudo gem install", "body": "<p>I installed RVM (requires download and use of GPG) and followed the steps on RVM's install page.  Should you use sudo? I've read both ways.  Here is the page link:</p>\n\n<p><a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/install</a></p>\n\n<p>The command once RVM is installed:</p>\n\n<pre><code>\\curl -sSL https://get.rvm.io | bash -s stable --rails\n</code></pre>\n\n<p>That will install the latest stable version of rails available.  I did this as a complete novice and it has worked for me (as a slightly higher novice) so far.</p>\n"}], "owner": {"reputation": 253, "user_id": 8080946, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/33ed775ce8607b3e2acec738c7ceab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Cory L", "link": "https://stackoverflow.com/users/8080946/cory-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 749, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496801004, "creation_date": 1496799911, "question_id": 44402194, "link": "https://stackoverflow.com/questions/44402194/how-to-install-rails-without-using-sudo-gem-install", "title": "How to install Rails without using sudo gem install", "body": "<p>I have installed rbenv using Homebrew. </p>\n\n<pre><code>$ rbenv local\n2.4.0\n\n$ rbenv global\n2.4.0\n\n$ ruby -v\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin16]\n</code></pre>\n\n<p>When I check the Rails version I get the following message;</p>\n\n<pre><code>Rails is not currently installed on this system. To get the latest version, simply type:\n\n$ sudo gem install rails\n\nYou can then rerun your \"rails\" command.\n</code></pre>\n\n<p>I have been told not to install Rails using sudo, so I have tried running <code>gem install rails</code> but it gives me the following error;</p>\n\n<pre><code>ERROR:  While executing gem ... (Errno::EACCES)\n    Permission denied @ rb_sysopen -        /Users/USER1/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/thread_safe-0.3.6/.rspec\n</code></pre>\n\n<p>Is it correct that I should not install rails with sudo, and if so how can I?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "comments": [{"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1496799364, "post_id": 44402002, "comment_id": 75803925, "body": "Commenting out half the document at a time to narrow down the bug / typo is actually a valid and helpful debugging method - especially for finding missing <code>end</code> statements."}, {"owner": {"reputation": 1, "user_id": 996880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d001d04e6e6d98987e32b6509727db?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/996880/steve"}, "reply_to_user": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1496873341, "post_id": 44402002, "comment_id": 75845543, "body": "That is what I&#39;m resorting to, but it would be far more efficient if I could get  a log of some kind, identifying at least which source file I was processing - obviously, a source line number would be far better. Is there no way to get anything more than a generic &quot;internal server error&quot; on cloud9?"}], "owner": {"reputation": 1, "user_id": 996880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d001d04e6e6d98987e32b6509727db?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/996880/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496798200, "creation_date": 1496798200, "question_id": 44402002, "link": "https://stackoverflow.com/questions/44402002/how-to-isolate-an-internal-server-error-on-cloud9", "title": "How to isolate an internal server error on Cloud9", "body": "<p>I'm working through Michael Hartl's Rails Tutorial, running on Cloud9. In this environment, if anything goes wrong - typically a typo on my part - I get the \"internal server error\" from the server, and \"something went wrong\" in the browser. No other information is provided. It appears that the only way to troubleshoot is to comment out lines until the error disappears. (I've spent hundreds of hours in debuggers on other platforms/languages, and find this extremely inefficient.)</p>\n\n<p>Cloud9 says they don't support Ruby in their debugger. I'm guessing that fact  means they can't identify the line in the source that generated the error.</p>\n\n<p>Is there any way to investigate server errors on Cloud9 other than just commenting out code? </p>\n"}, {"tags": ["ruby", "regex", "regex-negation"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1496802106, "post_id": 44401916, "comment_id": 75804574, "body": "Are you parsing HTML? Why not use an HTML parser and simply grab the text content of that element?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1496817129, "post_id": 44401916, "comment_id": 75809289, "body": "Are you aware that you <a href=\"https://stackoverflow.com/a/1732454/2483313\">can&#39;t parse HTML with a regexp</a>, because HTML isn&#39;t a regular language?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8122608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be2e7cd4a3c7050841e1d1db93e633a?s=128&d=identicon&r=PG&f=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/8122608/shawn"}, "edited": false, "score": 0, "creation_date": 1496800213, "post_id": 44402113, "comment_id": 75804109, "body": "Thank for your answer, unfortunately, the regex doesn&#39;t capture either email address end with &lt;/a&gt; tag or the plain text one..."}], "tags": [], "owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "is_accepted": false, "score": 0, "last_activity_date": 1496799211, "creation_date": 1496799211, "answer_id": 44402113, "question_id": 44401916, "link": "https://stackoverflow.com/questions/44401916/regular-expression-for-an-email-address-not-end-with-a/44402113#44402113", "title": "Regular expression for an email address not end with &lt;/a&gt;", "body": "<p><code>/(\\w+@[\\w.-]+|\\{(?:\\w+, *)+\\w+\\}@[\\w.-])(?!&lt;\\/a&gt;)*$/i</code></p>\n\n<p>So something like <code>source.gsub(/(\\w+@[\\w.-]+|\\{(?:\\w+, *)+\\w+\\}@[\\w.-])(?!&lt;\\/a&gt;)*$/i)</code></p>\n\n<p>Here's the regex statement, I took the liberty of using a different e-mail selector as well.</p>\n\n<p><code>(?!&lt;\\/a&gt;)*$</code> basically says ignore it if this ends in <code>&lt;/a&gt;</code>. It might be more efficient though to just filter out any <code>&lt;a&gt;&lt;/a&gt;</code> tags first if you're expecting multiple email addresses per line / document.</p>\n"}], "owner": {"reputation": 1, "user_id": 8122608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be2e7cd4a3c7050841e1d1db93e633a?s=128&d=identicon&r=PG&f=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/8122608/shawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496799211, "creation_date": 1496797466, "last_edit_date": 1496797646, "question_id": 44401916, "link": "https://stackoverflow.com/questions/44401916/regular-expression-for-an-email-address-not-end-with-a", "title": "Regular expression for an email address not end with &lt;/a&gt;", "body": "<p>I want to use regex in ruby to capture the plain text email address but NOT the email address surrounded by mailto link tags (like <code>&lt;a href=\"\" class=\"\" &gt;a@b.com&lt;/a&gt;</code>), tried <code>source.gsub(/(?!&lt;$)[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}/i)</code> but this does not work </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496799233, "post_id": 44401869, "comment_id": 75803897, "body": "You said the input can be up to 10^6 characters, but you seem to be testing against 3 * 10^7? When I run your code against input that&#39;s 10^6 characters long on my laptop, it takes about a third of a second."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496800672, "post_id": 44401869, "comment_id": 75804223, "body": "The strings contain spaces as well as lowercase letters and &#39;&lt;&#39;. Does backspace delete a space? Best to edit to clarify."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496810912, "post_id": 44401869, "comment_id": 75806637, "body": "Attempt #3....."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496856086, "post_id": 44401869, "comment_id": 75836736, "body": "First, an unanchored regular expression is much slower than built-in methods. Anchor it and it improves in speed. Let the engine remove as much as possible in one step and it gets faster still, but it possibly still won&#39;t run as fast as methods written in C. <code>gsub</code> is slower than <code>sub</code>, but faster than looping over <code>sub</code>. Learn to use Benchmark, Fruity or Benchmark-ips as they&#39;re your eyes into the efficiency of your code."}, {"owner": {"reputation": 43, "user_id": 8045098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfd80ff348b32859dd144df374d5272?s=128&d=identicon&r=PG&f=1", "display_name": "Matt C.", "link": "https://stackoverflow.com/users/8045098/matt-c"}, "reply_to_user": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496878970, "post_id": 44401869, "comment_id": 75847334, "body": "@smarx yea, that was a dumb mistake, good catch on the 3*10^7. However, there must be another case that is the worst case scenario or its getting stuck in the loop because the program exceeds the time limit"}, {"owner": {"reputation": 43, "user_id": 8045098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfd80ff348b32859dd144df374d5272?s=128&d=identicon&r=PG&f=1", "display_name": "Matt C.", "link": "https://stackoverflow.com/users/8045098/matt-c"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496879509, "post_id": 44401869, "comment_id": 75847472, "body": "@theTinMan thanks I will try that"}], "answers": [{"comments": [{"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496802349, "post_id": 44401983, "comment_id": 75804632, "body": "I haven&#39;t tested it, but does this really show a substantial performance improvement over the original code? (My intuition is that it would be slower.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496802489, "post_id": 44401983, "comment_id": 75804678, "body": "Well, it makes just a single pass through the string."}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496802849, "post_id": 44401983, "comment_id": 75804781, "body": "When I test with <code>output = (&quot;a&quot; + &quot;&lt;&quot; + &quot;a&quot;)*330000</code> (about 10^6 characters), the code in the question runs in about a third of a second, and I killed your code after a minute. With 10^5 characters, the original code takes 0.144s, and yours takes 1.761s."}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496803432, "post_id": 44401983, "comment_id": 75804926, "body": "FYI, your code eventually completed after ~3.5 minutes with the 10^6 character input. I think the issue is the <code>s[i,2] = &#39;&#39;</code>. I suspect the implementation of that operation is expensive (and probably linear with the size of the string)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496803442, "post_id": 44401983, "comment_id": 75804935, "body": "For <code>n = 3</code>, <code>(&#39;a&#39; * n + &#39;&lt;&#39; * n) * n #=&gt; &quot;aaa&lt;&lt;&lt;aaa&lt;&lt;&lt;aaa&lt;&lt;&lt;&quot;</code>. Try comparing the methods for <code>n = 50</code>. I expect you are right about <code>[]=</code> being expensive. I have an idea for an improvement. I&#39;ll give it a try."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496885034, "post_id": 44401983, "comment_id": 75848738, "body": "Note the above comments all pertain to code that I&#39;ve replaced in my answer."}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496888757, "post_id": 44401983, "comment_id": 75849619, "body": "What&#39;s the timing on your latest version? It looks very similar to my first pass, which turned out to be almost twice as slow as the original code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496892780, "post_id": 44401983, "comment_id": 75850515, "body": "@smartx, here I build a string rather than deleting characters from a string. Please see Peter&#39;s benchmark."}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1496893155, "post_id": 44401983, "comment_id": 75850586, "body": "Sorry, yes, I was comparing to something more like <code>better_method</code>. I think my take was also a little slower for using a string rather than an array to build up the output."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1496894495, "last_edit_date": 1496894495, "creation_date": 1496798064, "answer_id": 44401983, "question_id": 44401869, "link": "https://stackoverflow.com/questions/44401869/how-to-optimize-code-removing-unwanted-characters/44401983#44401983", "title": "How to optimize code removing unwanted characters", "body": "<pre><code>def backspace(str)\n  bs_count = 0\n  str.reverse.each_char.with_object([]) do |s, arr|\n    if s == '&lt;'\n      bs_count += 1\n    else\n      bs_count.zero? ? arr.unshift(s) : bs_count -= 1\n    end\n  end.join\nend\n\nbackspace \"Now is the&lt;&lt; tim&lt;e fo&lt;&lt;&lt;r every&lt;&lt;&lt;one to chill ou&lt;&lt;&lt;&lt;t\"\n  #=&gt; \"Now is t tier evone to chilt\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496894658, "post_id": 44424877, "comment_id": 75850910, "body": "Thanks for the benchmark, Peter. Naturally, the results depend on the test input. Here are two that I ran (where I show only the last column of the benchmark). For <code>input = &#39;a&lt;&#39; * 250000</code> (<code>&quot;a&lt;a&lt;a&lt;...&quot;</code>) I got <code>original_method: 0.044, backspace: 0.129, better_method 0.025</code>. For <code>input = (&#39;a&#39; * 500 + &#39;&lt;&#39; * 500) * 500</code> (<code>&quot;aa...aa&lt;&lt;...&lt;&lt;aa...aa&lt;&lt;...&lt;&lt;...&quot;</code>) I got <code>original_method: 2.29; backspace 0.12: better_method 0.26</code>. &quot;better_method&quot; is an interesting name for your method (<code>:-)</code>), but it does look hard to beat."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496895196, "post_id": 44424877, "comment_id": 75851057, "body": "I assume you displayed <code>puts original_method(input.dup).size #=&gt; 3640</code> (etc.) to suggest all three methods gave the same result. Other options are <code>puts original_method(input.dup).hash #=&gt; -968494489149926863</code>  (etc.) and <code>puts [original_method(input.dup), backspace(input.dup), better_method(input.dup)].uniq.size</code>."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496948650, "post_id": 44424877, "comment_id": 75884947, "body": "@CarySwoveland thanks for the follow up Cary, in this case I wanted it KISS but your suggestions for checking result are better, as for the name better_method, wasn&#39;t meant at yours :&gt;) but compared with the original_method, I added yours later on. The sample is indeed determent for the results, thats why I took a random solution and ran it many times, which I could obviously not do with the 10MB sample, in all cases I tested the results were comparable but I&#39;m sure better_method won&#39;t always be the fastest"}, {"owner": {"reputation": 43, "user_id": 8045098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfd80ff348b32859dd144df374d5272?s=128&d=identicon&r=PG&f=1", "display_name": "Matt C.", "link": "https://stackoverflow.com/users/8045098/matt-c"}, "edited": false, "score": 0, "creation_date": 1496967618, "post_id": 44424877, "comment_id": 75892245, "body": "@peter thanks! This code still exceeds the time limit, maybe I am missing something in the problem statement that is causing this error. This was just something I was doing on my free time and its making me frustrated haha. Here is the link... <b><a href=\"https://open.kattis.com/problems/backspace\" rel=\"nofollow noreferrer\">open.kattis.com/problems/backspace</a></b> . Maybe you can find what is causing this &gt;1sec run time. Thanks everyone for the help. I really enjoy becoming more efficient with ruby"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1497029086, "post_id": 44424877, "comment_id": 75923753, "body": "multiple remarks on that: speed depends on the input and what was the  input ? the examples of a few words or a really random string of 10MB ? 2: depends also of Ruby implementation, jRuby got it down to 1.2s on my 4 year old windows box, the best result I got with compiling with ocra to .exe, just under 1 sec 3:depends on the CPU this is run, I have no experience with kattis so didn&#39;t try"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1496882445, "creation_date": 1496882445, "answer_id": 44424877, "question_id": 44401869, "link": "https://stackoverflow.com/questions/44401869/how-to-optimize-code-removing-unwanted-characters/44424877#44424877", "title": "How to optimize code removing unwanted characters", "body": "<p>Your approach is good but you get better performance if you adapt the regular expression.</p>\n\n<p>Cary, I hope you don't mind I take your excellent solution also in the benchmark ?</p>\n\n<p>Benchmark done on a MRI ruby 2.3.0p0 (2015-12-25 revision 53290) [x64-mingw32]\nI use .dup on my sample string to make sure none of the methods changes the input sample.</p>\n\n<pre><code>require 'benchmark' \ninput = \"\"\n10_000_000.times{input &lt;&lt; ['a','&lt;'].sample}\n\ndef original_method inp\n  while inp[/[[:lower:]]&lt;/]\n    inp.gsub!(/[[:lower:]]&lt;/, \"\")\n  end\n  inp.gsub(/&lt;/, \"\")\nend\n\ndef better_method inp\n  tuple = /[^&lt;]&lt;/\n  while inp[tuple]\n    inp.gsub!(inp[tuple], \"\")\n  end\n  inp.gsub(/&lt;/, \"\")\nend\n\ndef backspace str\n  bs_count = 0\n  str.reverse.each_char.with_object([]) do |s, arr|\n    if s == '&lt;'\n      bs_count += 1\n    else\n      bs_count.zero? ? arr.unshift(s) : bs_count -= 1\n    end\n  end.join\nend\n\nputs original_method(input.dup).length\nputs better_method(input.dup).length\nputs backspace(input.dup).length\n\nBenchmark.bm do |x| \n  x.report(\"original_method\")  { original_method(input.dup) }\n  x.report(\"backspace      \")  { backspace(input.dup) }\n  x.report(\"better_method  \")  { better_method(input.dup) }\nend \n</code></pre>\n\n<p>gives</p>\n\n<pre><code>3640\n3640\n3640\n       user     system      total        real\noriginal_method  3.494000   0.016000   3.510000 (  3.510709)\nbackspace        1.872000   0.000000   1.872000 (  1.862550)\nbetter_method    1.155000   0.031000   1.186000 (  1.187495)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8045098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfd80ff348b32859dd144df374d5272?s=128&d=identicon&r=PG&f=1", "display_name": "Matt C.", "link": "https://stackoverflow.com/users/8045098/matt-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1496894495, "creation_date": 1496796982, "last_edit_date": 1496855873, "question_id": 44401869, "link": "https://stackoverflow.com/questions/44401869/how-to-optimize-code-removing-unwanted-characters", "title": "How to optimize code removing unwanted characters", "body": "<p>This code is designed for a problem where the users computer has a bug where every time he/she hits the backspace button it displays a '&lt;' symbol. The created program should fix this and output the intended string considering that '&lt;' represents a backspace. The input string can be up to 10^6 characters long, and it only will include lowercase letters and '&lt;'. </p>\n\n<p>My code seems to be executing correctly but, when I submit it, the website says it exceeded the time limit for test 5/25. The amount of time given is 1 second. Also, if there are only '&lt;' symbols it should produce no output.</p>\n\n<p>For example, </p>\n\n<pre><code>\"hellooo&lt;&lt; my name is matthe&lt;&lt;\" \n</code></pre>\n\n<p>would output </p>\n\n<pre><code>\"hello my name is matt\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code>\"ssadfas&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\" \n</code></pre>\n\n<p>would output nothing, etc. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>input = gets.chomp\nwhile input[/[[:lower:]]&lt;/]\n    input.gsub!(/[[:lower:]]&lt;/, \"\")\nend\ninput.gsub!(/&lt;/, \"\")\nputs\"#{input}\"\n</code></pre>\n\n<p>In the code above I stay in the <code>while</code> loop if there are any instances where a lowercase letter is in front of a '&lt;'. Anywhere a lowercase letter is followed by a '&lt;' it is replaced with nothing. Once the <code>while</code> loop is exited if there are any '&lt;' symbols left, they are replaced with nothing. Then the final string is displayed.</p>\n\n<p>I created a test which I think is worst case scenario for my code:</p>\n\n<pre><code>input = (\"a\" + \"&lt;\" + \"a\")*10000000\n\n#input = gets.chomp\nwhile input[/[[:lower:]]&lt;/]\n    input.gsub!(/[[:lower:]]&lt;/, \"\")\nend\ninput.gsub!(/&lt;/, \"\")\nputs\"#{input}\"\n</code></pre>\n\n<p>I made the program stop between the creation of the string and the execution of the <code>while</code> loop and then ran it completely to be able to eyeball if it was taking longer than a second. It seemed to take much longer than 1 second.</p>\n\n<p>How can it be modified to be faster or is there a much better way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "for-loop", "methods", "global-variables"], "comments": [{"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1496799546, "post_id": 44401808, "comment_id": 75803963, "body": "Does the p exist in your database? Could you not just reference the associated table and row id and send it to your controller? When a user clicks, send the associated ID off? Assuming that @p is a specific post of course..."}], "answers": [{"tags": [], "owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "is_accepted": true, "score": 0, "last_activity_date": 1496797100, "creation_date": 1496797100, "answer_id": 44401882, "question_id": 44401808, "link": "https://stackoverflow.com/questions/44401808/use-a-variable-created-in-a-loop-in-other-files-ruby-on-rails/44401882#44401882", "title": "Use a variable created in a loop in other files - Ruby on Rails", "body": "<p>Variable that are created in loops, are technically created inside a block. The variables that are created in a block, are accessible to that block. Please read this <a href=\"https://www.sitepoint.com/understanding-scope-in-ruby/\" rel=\"nofollow noreferrer\">https://www.sitepoint.com/understanding-scope-in-ruby/</a></p>\n\n<p>I am not sure why would anyone wants to use a variable that is created in a view in a controller, it's the reverse, <strong>YOU SHOULD</strong> use the variable that is created in the controller in views</p>\n\n<p>Since you have tagged global variables in the question, if you want to use them anyways, <code>use $p instead of @p</code></p>\n"}], "owner": {"reputation": 97, "user_id": 8056405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G8eq6.png?s=128&g=1", "display_name": "ElonTheFreemason", "link": "https://stackoverflow.com/users/8056405/elonthefreemason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 44401882, "answer_count": 1, "score": 0, "last_activity_date": 1496797100, "creation_date": 1496796483, "question_id": 44401808, "link": "https://stackoverflow.com/questions/44401808/use-a-variable-created-in-a-loop-in-other-files-ruby-on-rails", "title": "Use a variable created in a loop in other files - Ruby on Rails", "body": "<p>I was wondering how I could use a variable that was created in a loop in other files. For example, I have this loop in my views : </p>\n\n<pre><code>&lt;% for @p in @posts %&gt;\n    &lt;%= @p.content %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>How could I use @p in a method that I created in my controller? Thank you in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "spree"], "answers": [{"tags": [], "owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "is_accepted": true, "score": 0, "last_activity_date": 1496800456, "creation_date": 1496800456, "answer_id": 44402253, "question_id": 44401807, "link": "https://stackoverflow.com/questions/44401807/product-form-for-common-users-in-spree/44402253#44402253", "title": "Product form for common users in Spree", "body": "<p>IMHO, I would build a marketplace and allow users to register as <em>vendors</em>, so that they can offer their products (either free or paid).</p>\n\n<p>You could look at the following gems to determine your needs:</p>\n\n<ul>\n<li><a href=\"https://github.com/spree-contrib/spree_marketplace\" rel=\"nofollow noreferrer\">SpreeMarketplace</a></li>\n<li><a href=\"https://github.com/spree-contrib/spree_drop_ship\" rel=\"nofollow noreferrer\">SpreeDropShip</a></li>\n</ul>\n\n<p>There is also non Rails options, like <a href=\"https://woocommerce.com/?utm_campaign=woocommerce%20branded&amp;utm_source=adwords&amp;utm_term=woocommerce&amp;utm_content=28619674261&amp;gclid=Cj0KCQjwpdnJBRC4ARIsAHC6k2LmWeIdaFiwkeqEpqc9G8A0wClZdEB_84ftmULI7eP8HIN_vR743xgaAuMVEALw_wcB\" rel=\"nofollow noreferrer\">WooCommerce for Wordpress</a> with a <a href=\"https://wordpress.org/plugins/dc-woocommerce-multi-vendor/\" rel=\"nofollow noreferrer\">MarketPlace extension</a>.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 5282819, "user_type": "registered", "profile_image": "https://graph.facebook.com/680102088758708/picture?type=large", "display_name": "Jefferson &#193;lvarez &#193;lvarez", "link": "https://stackoverflow.com/users/5282819/jefferson-%c3%81lvarez-%c3%81lvarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 44402253, "answer_count": 1, "score": 0, "last_activity_date": 1496819705, "creation_date": 1496796478, "last_edit_date": 1496819705, "question_id": 44401807, "link": "https://stackoverflow.com/questions/44401807/product-form-for-common-users-in-spree", "title": "Product form for common users in Spree", "body": "<p>I have a question about e-commerce offered by Spree in Ruby on Rails. I need to do an e-commerce where the users can create products to offer them to the public as well as that they can buy. Currently, Spree only allows you to add products to the administrator, but I also need common users can offer their products and also to link them with the user in the database.</p>\n\n<p>There is a way to make a form that allows an common user to offer a product in Spree?, and if not, what other e-commerce would be easier to propose an e-commerce as I described. It is a project to do in a very short time and that is why I do it in RoR.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1496794076, "post_id": 44401501, "comment_id": 75802802, "body": "Hello again. What is this??? <code>@user = @user = User.find(session[:user])</code>. Also, you need a <code>new</code> action to set the user."}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1496795162, "post_id": 44401501, "comment_id": 75803041, "body": "oh, this is a mistake when i texting this post... my teacher is horrible :\\\\  but what u mean with a new action? i&#39;ve been updated the post."}, {"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1496799827, "post_id": 44401501, "comment_id": 75804021, "body": "Your authentication method is deeply flawed - you&#39;re just storing the user&#39;s id in the session cookie? You should be using a token that gets reset every time the user logs in or logs out. With this method, it&#39;s really trivial for someone to impersonate other users, and a session token could be reused for a lot time...  That said. Can we see the code for <code>User::validate</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496795448, "post_id": 44401548, "comment_id": 75803092, "body": "Why you are saying &quot;trying to reference it from the new action&quot; ? the routes get &#39;/home/inicio&#39;, to: &#39;home#index&#39; so in the index action i rendered my view which i&#39;m trying to use @user variable value."}, {"owner": {"reputation": 34077, "user_id": 1249, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ed9686d6910478914966ec99bbcaa069?s=128&d=identicon&r=PG", "display_name": "Adam Lassek", "link": "https://stackoverflow.com/users/1249/adam-lassek"}, "reply_to_user": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496869558, "post_id": 44401548, "comment_id": 75843987, "body": "@MikhaelAraujo <code>&#47;home&#47;inicio</code> is linked to <code>home#index</code> and so uses <code>index.html.erb</code> by default. Your example shows <code>new.html.erb</code> as the culprit, and your controller code is not rendering it explicitly, so I have to assume that it is being rendered by the <code>HomesController#new</code> action. That route was wired up by <code>resources :home</code>."}], "tags": [], "owner": {"reputation": 34077, "user_id": 1249, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ed9686d6910478914966ec99bbcaa069?s=128&d=identicon&r=PG", "display_name": "Adam Lassek", "link": "https://stackoverflow.com/users/1249/adam-lassek"}, "is_accepted": false, "score": 0, "last_activity_date": 1496794233, "creation_date": 1496794233, "answer_id": 44401548, "question_id": 44401501, "link": "https://stackoverflow.com/questions/44401501/how-identify-a-user-session-rails/44401548#44401548", "title": "How identify a user session ? Rails", "body": "<p>This is happening because your <code>@user</code> is being set only in index and show, but you are trying to reference it from the new action.</p>\n\n<p>Consider moving this logic to a <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#filters\" rel=\"nofollow noreferrer\"><code>before_action</code></a></p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  before_action if: -&gt;{ session[:user] } do\n    @user = User.find_by(id: session[:user])\n  end\nend\n</code></pre>\n\n<p>If this controller needs to assume that <code>@user</code> is present, you should also have a <code>before_action</code> that handles the case of a missing user account. I usually put this behavior into a <code>AuthenticatedController</code> class and inherit from it where needed.</p>\n\n<p><code>User.find</code> is not optimal here, because it will throw an exception if no record is found.</p>\n"}], "owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1486, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496795179, "creation_date": 1496793816, "last_edit_date": 1496795179, "question_id": 44401501, "link": "https://stackoverflow.com/questions/44401501/how-identify-a-user-session-rails", "title": "How identify a user session ? Rails", "body": "<p>i have this routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'login#new'\n  get '/home/inicio', to: 'home#index'\n\n  scope '/login' do\n    get '/acesso', to:'login#new'\n    post '/acessorecebendo', to:'login#create', as:'user'\n    get '/sair', to:'login#destroy'\n  end\n\n  resources :login\n  resources :home\n  resources :produtos\n  resources :fornecedors\nend\n</code></pre>\n\n<p>the Login controller: </p>\n\n<pre><code>class LoginController &lt; ApplicationController\n  protect_from_forgery\n\n  def new\n    if session[:user]\n      @user = User.find(session[:user])\n    end\n  end\n\n  def destroy\n    reset_session\n    redirect_to \"/login/acesso\", notice: \"Voc\u00ea foi deslogado\"\n  end\n\n  def create\n    user = User.validate(login_params[:email], login_params[:senha])\n\n    if user\n      session[:user] = user.id\n      redirect_to \"/home/inicio\", notice: \"login feito com sucesso\"\n    else\n      redirect_to \"/login/acesso\", notice: \"Dados incorretos\"\n    end\n  end\n\n  private\n  def login_params\n    params.require(:login).permit(:email, :senha)\n  end\nend\n</code></pre>\n\n<p>The home controller: </p>\n\n<pre><code>    class HomeController &lt; ApplicationController   protect_from_forgery with: :exception\n\n  def new\n    @user = User.find_by(id: session[:user])   end\n\n  def index\n    @produtos = Produto.all\n    render 'inicio'   end\n\n  def show\n    if session[:user]\n      @user = User.find(session[:user])\n    end   end end\n</code></pre>\n\n<p>I'm getting an error on the Home view (new.html.erb):</p>\n\n<pre><code>&lt;header&gt;\n  &lt;h2&gt;&lt;a href=\"#\"&gt;Bem-vindo &lt;%= @user.nome %&gt;&lt;/a&gt;&lt;/h2&gt;\n  &lt;nav&gt;\n</code></pre>\n\n<blockquote>\n  <p>undefined method `nome' for nil:NilClass</p>\n</blockquote>\n\n<p>Why i have some problems with the session? I can do the login and i wanna see the user informations of this session on the redirected page, like if i can pass the @user variable assigned on the login action to the home controller to use it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1496793142, "post_id": 44401335, "comment_id": 75802559, "body": "The error and your controller are different, that is, your code has <code>@user = Pessoa.find(params[:id])</code> but the error says <code>@user = Pessoa.find(params[:pessoa][:id])</code>. Do the current code also gives you an error?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1496793303, "post_id": 44401335, "comment_id": 75802614, "body": "Can you show the output in your console/logs?"}, {"owner": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1496794194, "post_id": 44401335, "comment_id": 75802838, "body": "My bad, I tried <code>@user = Pessoafind(params[:id])</code> before, but typing that on the console gave me nil, so I changed it to <code>@user = Pessoa.find(params[:pessoa][:id])</code>, New code gives me the same error, even though the console shows me the record from the table. EDIT: updated with log"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "edited": false, "score": 0, "creation_date": 1496794557, "post_id": 44401372, "comment_id": 75802919, "body": "Same error, and typing the new find_by shows the same output on console. It feels like the params from the form are not carrying over to the view, somehow."}, {"owner": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "edited": false, "score": 0, "creation_date": 1496795362, "post_id": 44401372, "comment_id": 75803078, "body": "Well, that&#39;s some progress. Now it says &quot;undefined method &#39;empty?&#39; for nil:NilClass&quot; on line <code>render &#39;&#47;&#39;</code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "edited": false, "score": 0, "creation_date": 1496795454, "post_id": 44401372, "comment_id": 75803096, "body": "@GabrielEugenio Ohh, missed it. I guess you want the user to be redirected to home, correct? If so, you must use <code>redirect_to</code> instead of <code>render</code>. Otherwise use the name of the view to be rendered instead of <code>&#47;</code>."}, {"owner": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "edited": false, "score": 0, "creation_date": 1496795968, "post_id": 44401372, "comment_id": 75803196, "body": "Hm... tried using <code>redirect_to home_index_path</code>, <code>redirect_to root_path</code> and <code>render :index</code>, but still have the &quot;undefined method &#39;empty?&#39;&quot; message"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "edited": false, "score": 0, "creation_date": 1496796195, "post_id": 44401372, "comment_id": 75803250, "body": "@GabrielEugenio Could you post the complete log for that error?"}, {"owner": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "edited": false, "score": 0, "creation_date": 1496796857, "post_id": 44401372, "comment_id": 75803399, "body": "Oops, I forgot to save all files I modified while changing the &quot;[:id]&quot; from controller and views. It&#39;s working now. Thank you."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1496796729, "last_edit_date": 1496796729, "creation_date": 1496792885, "answer_id": 44401372, "question_id": 44401335, "link": "https://stackoverflow.com/questions/44401335/couldnt-find-person-with-login/44401372#44401372", "title": "Couldn&#39;t find Person with &#39;login&#39;=", "body": "<p><strong>UPDATE</strong></p>\n\n<p>It seems to be an issue with <code>self.primary_key = 'login'</code> in your model, so try adding that key to your routes:</p>\n\n<pre><code>resources :pessoas, param: :login\n</code></pre>\n\n<p>To be consistent, you should also change any reference of <code>id</code> to <code>login</code>, that is, in your controller:</p>\n\n<pre><code>@user = Pessoa.find_by(login: params[:pessoa][:login])\n</code></pre>\n\n<p>And in your view:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :\"digite seu login\" %&gt;\n  &lt;%= f.text_field :login %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<p>Regarding</p>\n\n<blockquote>\n  <p>\"undefined method 'empty?' for nil:NilClass\" on line render '/'</p>\n</blockquote>\n\n<p>You should change <code>render '/'</code> to either a <code>redirect_to</code> (to redirect to another page) or <code>render view_name</code> where <code>view_name</code> is the name of the view you want to render.</p>\n\n<p>For example, if you want to redirect to home, you could do this:</p>\n\n<pre><code>redirect_to home_path\n</code></pre>\n\n<hr>\n\n<p>Also, you should use <code>find_by</code> instead of <code>find</code> to avoid getting the same error when a user enters an invalid <code>login</code> (i.e. one that does not exist in DB):</p>\n\n<pre><code>@user = Pessoa.find_by(login: params[:pessoa][:login])\n</code></pre>\n\n<p>Since this way you will get an empty collection instead of an error (exception), you will also need to update how you evaluate if a <code>User</code> was found:</p>\n\n<pre><code>if @user.present?\n  # success code\nelse\n  # failure code\nend\n</code></pre>\n\n<p>Putting it all together, your <code>sign_in</code> action should look like this:</p>\n\n<pre><code>def sign_in\n  @user = Pessoa.find_by(login: params[:pessoa][:login])\n\n  if @user.present?\n    session.clear\n    session[:user_id] = @user.id\n    redirect_to home_path\n  else\n    @error = 'Username or password was incorrect'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8122352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EFsNbEgC04U/AAAAAAAAAAI/AAAAAAAAAFA/3_NisvSREt0/photo.jpg?sz=128", "display_name": "Gabriel Eugenio", "link": "https://stackoverflow.com/users/8122352/gabriel-eugenio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 44401372, "answer_count": 1, "score": -2, "last_activity_date": 1496797117, "creation_date": 1496792536, "last_edit_date": 1496797117, "question_id": 44401335, "link": "https://stackoverflow.com/questions/44401335/couldnt-find-person-with-login", "title": "Couldn&#39;t find Person with &#39;login&#39;=", "body": "<p>I never developed anything for web before, but now I have to make a simple application to show some data from an existing database.</p>\n\n<p>Thing is, each user should only see his/her respective data, so I need some form of authentication to do querys joining that user and other tables. I tried to keep things simple, all the user have to do is type it's username, which is the primary key on the Pessoa table (no passwords, no email confirmation, no nothing).</p>\n\n<p>I've read a few tutorials about Rails on RailsGuides, and www.rubypigeon.com/posts/how-to-implement-simple-authentication-without-devise/ for the authentication, but I just can't get my login to work.</p>\n\n<p>Here's my code so far:</p>\n\n<p>HomeController:</p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  def index\n  end\n\n  def login\n    @user = Pessoa.new\n  end\n\n  def sign_in\n    @user = Pessoa.find(params[:id])\n\n    if @user\n      session.clear\n      session[:user_id] = @user.id\n      render '/'\n    else\n      @error = 'Username or password was incorrect'\n      erb :sign_in\n    end\n  end\n\n  def sign_out\n    session.clear\n    render '/'\n  end\n\n  helper_method :current_user\n  def current_user\n    if session[:user_id]\n      Pessoa.find (session[:user_id])\n    else\n      nil\n    end\n  end\nend\n</code></pre>\n\n<p>views/home/login.html.erb:</p>\n\n<pre><code>&lt;%= form_for @user, url: home_sign_in_path do |f| %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :\"digite seu login\" %&gt;\n    &lt;%= f.text_field :id %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit :entrar %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'home#index'\n  get 'home/index'\n\n  get 'home/login', to: 'home#login'\n  post 'home/sign_in', to: 'home#sign_in'\n  post 'home/sign_out', to: 'home#sign_out' \n\n  resources :pessoas\nend\n</code></pre>\n\n<p>/views/home/index.html.erb have a lot of static HTML stuff, the only Ruby code on it is a</p>\n\n<pre><code>&lt;%= link_to 'Login', home_login_path %&gt;\n</code></pre>\n\n<p>Pessoa.rb</p>\n\n<pre><code>class Pessoa &lt; ApplicationRecord\n  self.table_name = 'pessoa'\n  self.primary_key = 'login'\nend\n</code></pre>\n\n<p>I'm working with legacy tables on PostgreSQL, that's why primary key had to be changed.</p>\n\n<p>Whenever I go to localhost:3000/home/login and type my login, I get <a href=\"https://i.stack.imgur.com/4eE3i.png\" rel=\"nofollow noreferrer\">this</a>\nerror message. The weird part is if I run the exact same line that gives me the error on the console, it works just fine.</p>\n\n<p>As I said, I'm very new to Rails and web development in general, so I think it's a tiny detail that I aparently can't see. Any help would be appreciated.</p>\n\n<p>Btw, don't mind the resource name, \"Pessoa\" means \"Person\" in portuguese, which is my native language.</p>\n\n<p>development.log:</p>\n\n<pre><code>Started GET \"/home/login\" for 127.0.0.1 at 2017-06-06 20:22:45 -0300\nProcessing by HomeController#login as HTML\n  Rendering home/login.html.erb within layouts/application\n  Rendered home/login.html.erb within layouts/application (12.4ms)\nCompleted 200 OK in 1504ms (Views: 1369.5ms | ActiveRecord: 0.0ms)\n\n\nStarted POST \"/home/sign_in\" for 127.0.0.1 at 2017-06-06 20:22:50 -0300\nProcessing by HomeController#sign_in as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"Jzt0Yeven91Kl8DrfjpJa8I9PJjr7SzKmE43lwprjlopV7l+zFU6EUjUgAiKYJhzemm7xu8NGfiPj3E5h5EiYw==\", \"pessoa\"=&gt;{\"id\"=&gt;\"gabrielbrito\"}, \"commit\"=&gt;\"entrar\"}\n  [1m[36mPessoa Load (1.5ms)[0m  [1m[34mSELECT  \"pessoa\".* FROM \"pessoa\" WHERE \"pessoa\".\"login\" = $1 LIMIT $2[0m  [[\"login\", nil], [\"LIMIT\", 1]]\nCompleted 404 Not Found in 9ms (ActiveRecord: 1.5ms)\n\n\n\nActiveRecord::RecordNotFound (Couldn't find Pessoa with 'login'=):\n\napp/controllers/home_controller.rb:10:in `sign_in'\nStarted PUT \"/__web_console/repl_sessions/ed3bb60f3a72a0c0b0c951fa03c0f23d\" for 127.0.0.1 at 2017-06-06 20:22:56 -0300\nStarted PUT \"/__web_console/repl_sessions/ed3bb60f3a72a0c0b0c951fa03c0f23d\" for 127.0.0.1 at 2017-06-06 20:22:58 -0300\nStarted PUT \"/__web_console/repl_sessions/ed3bb60f3a72a0c0b0c951fa03c0f23d\" for 127.0.0.1 at 2017-06-06 20:23:04 -0300\n[1m[36mPessoa Load (1.2ms)[0m  [1m[34mSELECT  \"pessoa\".* FROM \"pessoa\" WHERE \"pessoa\".\"login\" = $1 LIMIT $2[0m  [[\"login\", \"gabrielbrito\"], [\"LIMIT\", 1]]\n\nStarted GET \"/home/login\" for 127.0.0.1 at 2017-06-06 21:27:45 -0300\nProcessing by HomeController#login as HTML\n  Rendering home/login.html.erb within layouts/application\n  Rendered home/login.html.erb within layouts/application (6.2ms)\nCompleted 200 OK in 1626ms (Views: 1152.5ms | ActiveRecord: 7.5ms)\n\n\nStarted POST \"/home/sign_in\" for 127.0.0.1 at 2017-06-06 21:27:52 -0300\nProcessing by HomeController#sign_in as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"q2ffWM1gqaXfCrsFm7KlGKwR/iTDoQBflquem2BKSaeMyKBiIaUrtnIkoEXNztUWRasIGGg0qZZxpdYao8xb9Q==\", \"pessoa\"=&gt;{\"id\"=&gt;\"gabrielbrito\"}, \"commit\"=&gt;\"entrar\"}\n  [1m[36mPessoa Load (2.8ms)[0m  [1m[34mSELECT  \"pessoa\".* FROM \"pessoa\" WHERE \"pessoa\".\"login\" = $1 LIMIT $2[0m  [[\"login\", \"gabrielbrito\"], [\"LIMIT\", 1]]\nCompleted 500 Internal Server Error in 23ms (ActiveRecord: 2.8ms)\n\n\nNoMethodError (undefined method `empty?' for nil:NilClass):\n\napp/controllers/home_controller.rb:15:in `sign_in'\n</code></pre>\n\n<p><strong>EDIT:</strong> Solved, thanks to @Gerry's help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "tdd"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1496791730, "post_id": 44401166, "comment_id": 75802178, "body": "use <a href=\"https://ruby-doc.org/core-2.4.0/File.html#method-c-exist-3F\" rel=\"nofollow noreferrer\"><code>File::exist</code></a>?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1496816270, "post_id": 44401166, "comment_id": 75808798, "body": "What about using a service object? This way you can test the file creation in isolation. Furthermore you can then use a stringio object for testing."}], "owner": {"reputation": 89, "user_id": 2228271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df54d53d00b43ed4658e7ba73ecdff8a?s=128&d=identicon&r=PG", "display_name": "potofski", "link": "https://stackoverflow.com/users/2228271/potofski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496791205, "creation_date": 1496791205, "question_id": 44401166, "link": "https://stackoverflow.com/questions/44401166/testing-file-creation-in-rails", "title": "Testing File Creation in Rails", "body": "<p>My App saves Files to the Filesystem via an base64 encoded API. Here is my (simplified) controller:</p>\n\n<pre><code>def create\n  file = \"name.pdf\"\n  folder = \"downloads\"\n\n  FileUtils::mkdir_p folder\n\n  f = File.open File.join(folder, file), \"wb\"\n  if f.write Base64.decode64(params[:file])\n  f.close\nend\n</code></pre>\n\n<p>Now I want to test for an actual file creation. How do I check whether there is a file or not?</p>\n\n<p>Thanks for your input!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "routing", "rubygems"], "comments": [{"owner": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "edited": false, "score": 0, "creation_date": 1496790099, "post_id": 44400859, "comment_id": 75801757, "body": "In my projects i have. devise_for :users, :path =&gt; &#39;&#39;, :controllers =&gt; {:sessions =&gt; &#39;devise/sessions&#39;, :registrations =&gt; &#39;devise/registrations&#39;} try with that or just add this to your routes:    post &quot;sessions&quot;  :and check if there is a new error"}, {"owner": {"reputation": 1, "user_id": 8122318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eDmYQ.jpg?s=128&g=1", "display_name": "Joanna Rubi", "link": "https://stackoverflow.com/users/8122318/joanna-rubi"}, "reply_to_user": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "edited": false, "score": 0, "creation_date": 1496791657, "post_id": 44400859, "comment_id": 75802166, "body": "@ErickEduardoGarcia  thank you for answering! I tried to implement what you said but when I did add this code in my routes.rb devise_for :users, :path =&gt; &#39;&#39;, :controllers =&gt; {:sessions =&gt; &#39;devise/sessions&#39;, :registrations =&gt; &#39;devise/registrations&#39;} it didn&#39;t work but when I added post &#39;sessions&#39; it gave me an error &#39;ActionController::RoutingError (uninitialized constant SessionsController):&#39;"}, {"owner": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "edited": false, "score": 0, "creation_date": 1496792096, "post_id": 44400859, "comment_id": 75802279, "body": "You have to create a sessions_controller.rb  just like the registrations_controller but with &quot;&lt; Devise::SessionsController&quot;"}, {"owner": {"reputation": 1, "user_id": 8122318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eDmYQ.jpg?s=128&g=1", "display_name": "Joanna Rubi", "link": "https://stackoverflow.com/users/8122318/joanna-rubi"}, "reply_to_user": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "edited": false, "score": 0, "creation_date": 1496794533, "post_id": 44400859, "comment_id": 75802914, "body": "@ErickEduardoGarcia Oh sorry! That worked but I get this error now: <code>AbstractController::ActionNotFound (The action &#39;sessions&#39; could not be found for SessionsController):</code>"}, {"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1496800221, "post_id": 44400859, "comment_id": 75804114, "body": "ActionController::RoutingError (No route matches [POST] &quot;/sessions&quot;):  This suggestions something is trying to POST to /sessions, are you using all the appropriate prefixes in your code?"}, {"owner": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "edited": false, "score": 0, "creation_date": 1496801877, "post_id": 44400859, "comment_id": 75804528, "body": "You have to create the sessions action inside the controller. def sessions end; but you are going to mess with other things. If you have a github link of your code paste it and i will fixit for you"}, {"owner": {"reputation": 1, "user_id": 8122318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eDmYQ.jpg?s=128&g=1", "display_name": "Joanna Rubi", "link": "https://stackoverflow.com/users/8122318/joanna-rubi"}, "reply_to_user": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "edited": false, "score": 0, "creation_date": 1496807641, "post_id": 44400859, "comment_id": 75805806, "body": "@ErickEduardoGarcia Some explanation would be so super cool please <a href=\"https://github.com/geeitsjo/LocaGrid\" rel=\"nofollow noreferrer\">github.com/geeitsjo/LocaGrid</a>"}], "owner": {"reputation": 1, "user_id": 8122318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eDmYQ.jpg?s=128&g=1", "display_name": "Joanna Rubi", "link": "https://stackoverflow.com/users/8122318/joanna-rubi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496789218, "creation_date": 1496789218, "question_id": 44400859, "link": "https://stackoverflow.com/questions/44400859/actioncontrollerroutingerror-no-route-matches-post-sessions", "title": "ActionController::RoutingError (No route matches [POST] &quot;/sessions&quot;):", "body": "<p>I recently just migrated my app from sqlite3 to postgresql so I can push to heroku, I'm using Rails 5.0.3. But every time I try to run this code:</p>\n\n<pre><code>    taps pull postgres://rubijoan@localhost/inventory_development\n    http://rubijoan:yoloholo@localhost:3000\n</code></pre>\n\n<p>I get \"Unable to fetch tables information from\" error and then when I check my server I can't get the db because I get a routing error </p>\n\n<pre><code>    ActionController::RoutingError (No route matches [POST] \"/sessions\"):\n</code></pre>\n\n<p>I've been stuck for ages, I'm self learning Ruby so some explanation would be helpful please. Here are some photos that might help. </p>\n\n<p>When I run rails route:\n<a href=\"https://i.stack.imgur.com/lFmpd.png\" rel=\"nofollow noreferrer\">My rails route photo here</a></p>\n\n<p>and</p>\n\n<p>My routes.db</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'users/show'\n\n  devise_for :admin_users, ActiveAdmin::Devise.config\n  ActiveAdmin.routes(self)\n  devise_for :users, :controllers =&gt; { registrations: 'registrations' }\n  resources :comments\n  resources :users\n  root to: redirect('/ideas')\n  resources :ideas do\n    resources :reactions, only: :create\n\n  end\nend\n</code></pre>\n\n<p>My controller is with the default I got with the devise gem but I added \nregistrations as I added new fields to when a user signs up</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n\n    private\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496788404, "post_id": 44400727, "comment_id": 75801299, "body": "Could you add the view which redirects you to the show method?"}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496789027, "post_id": 44400727, "comment_id": 75801472, "body": "What view? The problem is on the before_action method :\\"}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496789257, "post_id": 44400727, "comment_id": 75801530, "body": "@Sebasti&#225;nPalma i putted the view of login controller"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496789745, "post_id": 44400902, "comment_id": 75801655, "body": "i dont have any method called accesso_path or login_new. this doesnt exists here )="}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496790165, "post_id": 44400902, "comment_id": 75801778, "body": "No. Those are path names. Look at the output of <code>rake routes</code> that I pasted above (line 1 and line 6). Like I said, you are trying to <code>redirect_to</code> <code>login_path</code> and that path requires and <code>id</code> (line 8). By the way, I got the path name slightly wrong for <code>new_login_path</code> and I just corrected it."}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496790287, "post_id": 44400902, "comment_id": 75801805, "body": "I understand that but how can i &quot;clear&quot; the cache from this? i mean, if i delete the before_ation and helper_method also both methods too, i got this error:  Couldn&#39;t find User with &#39;id&#39;=2  at the line:    def new     if session[:user]       @user = User.find(session[:user])     end   end"}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496790373, "post_id": 44400902, "comment_id": 75801829, "body": "This doesnt make sense to me cus the id=2 is the last id i had tested before deleted it from the table at DB."}, {"owner": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "edited": false, "score": 0, "creation_date": 1496790658, "post_id": 44400902, "comment_id": 75801904, "body": "@jvillian is ok with his answer. You have to read more about rails routing <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html</a>"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1496792672, "last_edit_date": 1496792672, "creation_date": 1496789513, "answer_id": 44400902, "question_id": 44400727, "link": "https://stackoverflow.com/questions/44400727/missing-required-keys-ruby-on-rails/44400902#44400902", "title": "&quot;missing required keys&quot; - Ruby on Rails", "body": "<p>The problem with this:</p>\n\n<pre><code>redirect_to login_path unless current_user\n</code></pre>\n\n<p>Is that <code>login_path</code> requires and <code>id</code>, which you can see by running <code>rake routes</code> in the console:</p>\n\n<pre><code>           acesso GET    /login/acesso(.:format)          login#new\n  acessorecebendo POST   /login/acessorecebendo(.:format) login#create\n             sair GET    /login/sair(.:format)            login#destroy\n      login_index GET    /login(.:format)                 login#index\n                  POST   /login(.:format)                 login#create\n        new_login GET    /login/new(.:format)             login#new\n       edit_login GET    /login/:id/edit(.:format)        login#edit\n            login GET    /login/:id(.:format)             login#show\n                  PATCH  /login/:id(.:format)             login#update\n                  PUT    /login/:id(.:format)             login#update\n                  DELETE /login/:id(.:format)             login#destroy\n       home_index GET    /home(.:format)                  home#index\n                  POST   /home(.:format)                  home#create\n         new_home GET    /home/new(.:format)              home#new\n        edit_home GET    /home/:id/edit(.:format)         home#edit\n                  GET    /home/:id(.:format)              home#show\n                  PATCH  /home/:id(.:format)              home#update\n                  PUT    /home/:id(.:format)              home#update\n                  DELETE /home/:id(.:format)              home#destroy\n</code></pre>\n\n<p>(I removed some for brevity's sake.)</p>\n\n<p>I'm guessing you probably want to do:</p>\n\n<pre><code>redirect_to accesso_path unless current_user\n</code></pre>\n\n<p>Or, possibly:</p>\n\n<pre><code>redirect_to new_login_path unless current_user\n</code></pre>\n\n<p>They both point to the same place, by the way, so you probably can get rid of <code>accesso_path</code> and replace it with <code>login_new</code>.</p>\n\n<p>So, the other problem is sounds like you are likely having (from your comments), is that you have a invalid <code>id</code> in <code>session[:user_id]</code>. When you remove <code>before_action :require_user</code>, then, you're getting to:</p>\n\n<pre><code>def new\n  if session[:user]\n    @user = User.find(session[:user])\n  end\nend\n</code></pre>\n\n<p>Which is then raising the exception:</p>\n\n<blockquote>\n  <p>Couldn't find User with 'id'=2</p>\n</blockquote>\n\n<p>So, here's probably what you should do:</p>\n\n<pre><code>class LoginController &lt; ApplicationController\n  skip_before_action :verify_authenticity_token\n  protect_from_forgery\n  before_action :go_home_if_signed_in\n  helper_method :current_user\n  # ^^^\n  # I don't know what this is\n\n\n  def go_home_if_signed_in\n    if session[:user_id]\n      # there was a session[:user_id]\n      # use find_by instead of find because it won't raise an exception\n      if User.find_by(id: session[:user_id])\n        # the session[:user_id] resulted in a valid user, so\n        # send the user to their home page.\n        redirect_to home_index_path\n      else\n        # if the User wasn't found, then you'll be in here, without\n        # raising an exception.\n        # So now you want to set the session[:user_id] to nil\n        # because it's invalid.\n        session[:user_id] = nil\n      end\n    end\n  end\n\n  # you should be able to get rid of this.\n  # def require_user\n  #   redirect_to new_login_path unless current_user # or wherever, but not login_path\n  # end\n\n  def show\n\n  end\n\n  def new\n    # This seems wrong. What is session[:user] and how do you \n    # expect User to find it?\n    # if session[:user]\n    #   @user = User.find(session[:user])\n    # end\n  end\n\n  def destroy\n    # Make sure you set session[:user] = nil somewhere!!!\n    reset_session\n    # ^^^\n    # I don't know what this is.\n    # redirect_to \"/login/acesso\", notice: \"Voc\u00ea foi deslogado\"\n    redirect_to :acesso_path, notice: \"Voc\u00ea foi deslogado\"\n    # ^^^\n    # Why not use the path you generated in routes? You went through\n    # the trouble of defining it.\n  end\n\n  def create\n    user = User.validate(login_params[:email], login_params[:senha])\n    if user\n      session[:user] = user.id\n      redirect_to \"/home/inicio\", notice: \"login feito com sucesso\"\n    else\n      redirect_to \"/login/acesso\", notice: \"Dados incorretos\"\n    end\n  end\n\n  private\n\n  def login_params\n    params.require(:login).permit(:email, :senha)\n  end\nend                      \n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1496792672, "creation_date": 1496788311, "last_edit_date": 1496790001, "question_id": 44400727, "link": "https://stackoverflow.com/questions/44400727/missing-required-keys-ruby-on-rails", "title": "&quot;missing required keys&quot; - Ruby on Rails", "body": "<p>I have the following Controller called Login:</p>\n\n<pre><code>class LoginController &lt; ApplicationController\n  skip_before_action :verify_authenticity_token\n  protect_from_forgery\n  before_action :require_user\n  helper_method :current_user\n\n  def current_user\n    @current_user ||= User.find(session[:user_id]) if session[:user_id]\n    rescue ActiveRecord::RecordNotFound\n  end\n\n  def require_user\n    redirect_to login_path unless current_user\n  end\n\n  def show\n\n  end\n\n  def new\n    if session[:user]\n      @user = User.find(session[:user])\n    end\n  end\n\n  def destroy\n    reset_session\n    redirect_to \"/login/acesso\", notice: \"Voc\u00ea foi deslogado\"\n  end\n\n  def create\n    user = User.validate(login_params[:email], login_params[:senha])\n    if user\n      session[:user] = user.id\n      redirect_to \"/home/inicio\", notice: \"login feito com sucesso\"\n    else\n      redirect_to \"/login/acesso\", notice: \"Dados incorretos\"\n    end\n  end\n\n  private\n\n  def login_params\n    params.require(:login).permit(:email, :senha)\n  end\nend\n</code></pre>\n\n<p>and this is my routes: </p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'login#new'\n  get '/home/inicio', to: 'home#index'\n\n  scope '/login' do\n    get '/acesso', to:'login#new'\n    post '/acessorecebendo', to:'login#create'\n    get '/sair', to:'login#destroy'\n  end\n\n  resources :login\n  resources :home\n  resources :produtos\n  resources :fornecedors\nend\n</code></pre>\n\n<p>and the error:</p>\n\n<blockquote>\n  <p>No route matches {:action=>\"show\", :controller=>\"login\"}, missing\n  required keys: [:id]</p>\n</blockquote>\n\n<p>at the lines:</p>\n\n<pre><code>def require_user\n  redirect_to login_path unless current_user   \nend\n</code></pre>\n\n<p>the point is: if I delete the line \"<strong>before_action :...</strong>\" found in Login controller, I got this error:</p>\n\n<blockquote>\n  <p>Couldn't find User with 'id'=2</p>\n</blockquote>\n\n<p>the new.html.erb (the login's view):</p>\n\n<pre><code>&lt;% if flash[:notice] %&gt;\n  &lt;div class=\"notice\"&gt;&lt;%= flash[:notice] %&gt;&lt;/div&gt; \n&lt;% end %&gt;\n\n&lt;div class=\"login-page\"&gt;   \n  &lt;div class=\"form\"&gt;\n    &lt;form class=\"register-form\" action=\"/login/acessorecebendo\" method=\"post\"&gt;\n      &lt;input type=\"text\" name=\"login[email]\" placeholder=\"Email\"/&gt;\n      &lt;input type=\"password\" name=\"login[senha]\" placeholder=\"Senha\"/&gt;\n      &lt;button&gt;Cadastrar&lt;/button&gt;\n      &lt;p class=\"message\"&gt;J\u00e1 \u00e9 registrado? &lt;a href=\"#\"&gt;Login&lt;/a&gt;&lt;/p&gt;\n    &lt;/form&gt;\n    &lt;form class=\"login-form\" action=\"/login/acessorecebendo\" method=\"post\"&gt;\n      &lt;input type=\"text\" name=\"login[email]\" placeholder=\"email\"/&gt;\n      &lt;input type=\"password\" name=\"login[senha]\" placeholder=\"password\"/&gt;\n      &lt;button&gt;login&lt;/button&gt;\n      &lt;p class=\"message\"&gt;N\u00e3o est\u00e1 registrado &lt;a href=\"#\"&gt;Criar uma conta&lt;/a&gt;&lt;/p&gt;\n    &lt;/form&gt;\n    &lt;% if session[:user] %&gt;\n      &lt;a href=\"/login/sair\"&gt;Sair sess\u00e3o &lt;%= @user.nome %&gt; &lt;/a&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So, to try solve this, I need to do a way to check if are someone logged or not and redirect to the proper view. I'm trying do something like that with this before action...</p>\n\n<p>can someone explain this to me, please? :\\</p>\n\n<p>I tried to follow this solutions: <a href=\"https://stackoverflow.com/questions/8526082/couldnt-find-user-with-id-1\">Couldn&#39;t find User with id=1</a></p>\n\n<p>But it didn't work..</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "edited": false, "score": 0, "creation_date": 1496796213, "post_id": 44400454, "comment_id": 75803258, "body": "See  this question <a href=\"https://stackoverflow.com/questions/14134033/rails-ruby-error-when-creating-database-unable-to-load-the-eventmachine-c-exten\" title=\"rails ruby error when creating database unable to load the eventmachine c exten\">stackoverflow.com/questions/14134033/&hellip;</a> and"}, {"owner": {"reputation": 2500, "user_id": 6499716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/L11cU.jpg?s=128&g=1", "display_name": "Shiro", "link": "https://stackoverflow.com/users/6499716/shiro"}, "edited": false, "score": 0, "creation_date": 1496796248, "post_id": 44400454, "comment_id": 75803271, "body": "Welcome to Stack Overflow. Please have a look at <a href=\"https://stackoverflow.com/tour\">Tour</a> and <a href=\"https://stackoverflow.com/help/asking\">Asking</a>."}], "owner": {"reputation": 11, "user_id": 8098781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a526ba603c45562000f2d7892bd025?s=128&d=identicon&r=PG&f=1", "display_name": "dbrane", "link": "https://stackoverflow.com/users/8098781/dbrane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1223, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496821115, "creation_date": 1496786505, "last_edit_date": 1496821115, "question_id": 44400454, "link": "https://stackoverflow.com/questions/44400454/eventmachine-unable-to-load-the-event-machine-c-extension", "title": "Eventmachine - Unable to load the Event Machine C Extension", "body": "<p>I'm trying to run the current development version of <code>Instiki</code> on windows 8.1. I use ruby 2.4 .  Bundle install succeeded. I also used the newest <code>Nokogiri 1.8.0</code> version that was released some days ago and this fixed a compatibility issue with Ruby 2.4 on windows systems. </p>\n\n<p>When I run <code>instiki</code> , It says that the system is unable to load the Event Machine C Extension. </p>\n\n<p>In more detail the Error message is : </p>\n\n<pre><code>Unable to load Event Machine C extension: To use the pure ruby reactor use 'require'em/pure_ruby\nC:\\instiki\\vendor\\rails\\activesupport\\lib\\active_support\\dependencies.rb:184: in 'require' cannot load such a file -- rubyeventmachine (missing source file)\n</code></pre>\n\n<p>If I understand this correctly , A file is missing which was required in some module so I might be able to circumvent this by including some other module ( \"pure_ruby\" rb file) that provides the same functionality  . Is this right ? I tried to re-install this gem with no effect. If this is so , how can I do this ?</p>\n\n<p>Note : This is the first time I use ruby and I have limited experience in programming </p>\n\n<p>Some progress : I required pure_ruby in the dependencies file , the half page  error report turned to two pages of errors which I can't decipher so this might be relevant. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1496783275, "post_id": 44399806, "comment_id": 75799524, "body": "hmmm the rails way is to define helper methods found under corresponding helper folder, anyway you could actually make a class or module that represents what you want to do, if you go the module route you could mix it in the controller"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1496783280, "post_id": 44399806, "comment_id": 75799528, "body": "That&#39;s a broad question. It depends. Helper methods? Modules? Inheritance? Dependency injection? Abstract logic into a gem? ... Could you at least show <i>what</i> code you&#39;re trying to clean up?"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496784722, "post_id": 44399993, "comment_id": 75800155, "body": "<code>app&#47;services&#47;my_app&#47;services</code>??!!"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496784956, "post_id": 44399993, "comment_id": 75800246, "body": "Yeah. I&#39;ve seen some discussions about things like that. I don&#39;t mind the goofy directory structure so much. And I like (what I perceive) to be the clarity of the <code>MyApp::Services::Authentication</code> namespacing. (Possibly because I gemify a ton of stuff that I use across a bunch of applications and I like the belt-and-suspenders security of excessive namespacing.) But, I recognize some people are more fussy about their directory structures than I am. To each their own."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1496784718, "last_edit_date": 1496784718, "creation_date": 1496783893, "answer_id": 44399993, "question_id": 44399806, "link": "https://stackoverflow.com/questions/44399806/encapsulating-controller-logic-in-rails/44399993#44399993", "title": "Encapsulating controller logic in rails", "body": "<p>I do it something like this:</p>\n\n<pre><code>#app/services/my_app/services/authentication.rb\nclass MyApp::Services::Authentication\n\n  class &lt; self\n\n    def call(params={})\n      new(params).call\n    end\n\n  end # Class Methods\n\n  #==============================================================================================\n  # Instance Methods\n  #==============================================================================================\n\n    def initialize(params)\n      @params = params \n    end\n\n    def call\n      ... do a lot of clever stuff\n      ... end by returning true or false\n    end\n\n  private\n\n    def params() @params end\n\nend\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>class FooController &lt; ApplicationController\n  before_action :authenticate\n\n  def authenticate\n    redirect_to 'some_path' unless MyApp::Services::Authenticate.call(with: 'some_params')\n  end\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1496784042, "post_id": 44400000, "comment_id": 75799879, "body": "Unless I&#39;m mistaken, those methods are going to be instance methods. In which case you&#39;ll need to do something like <code>SomeThing.new.call</code>. Or maybe not?"}], "tags": [], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1496784255, "last_edit_date": 1496784255, "creation_date": 1496783910, "answer_id": 44400000, "question_id": 44399806, "link": "https://stackoverflow.com/questions/44399806/encapsulating-controller-logic-in-rails/44400000#44400000", "title": "Encapsulating controller logic in rails", "body": "<p>Why don't you enable both schemes for a single controller? Especially if the only difference is Authentication. You could have two <code>app/controllers/concerns</code> to encapsulate both authentication methods and <code>include Auth1</code> and <code>include Auth2</code> for a single controller who is only responsible for whatever resource it manages.</p>\n\n<p>Otherwise, services are the best approach to encapsulate controller logic.</p>\n\n<p>Create a folder called <code>services</code> in your <code>app</code> folder and write PORO classes here. Say you have a few places in your app where you want to pay for stuff via make Stripe.</p>\n\n<pre><code># app/services/stripe_service.rb\nmodule StripeService\n  def customer(args)\n    ...\n  end\n\n  def pay(amount, customer)\n    ...\n  end\n\n  def reverse(stripe_txn_id)\n    ...\n  end\nend\n# controller\nStripeService.customer(data)\n=&gt; &lt;#Stripe::Customer&gt;\n</code></pre>\n\n<p>Or if you only need to do one thing.</p>\n\n<pre><code># app/services/some_thing.rb\nmodule SomeThing\n  def call\n    # do stuff\n  end\nend\n# controller\nSomeThing.call\n=&gt; # w/e\n</code></pre>\n\n<p>If you need an object with multiple reponsibilities you could create a class instead.</p>\n\n<pre><code>class ReportingService\n  def initialize(args)\n    ...\n  end\n\n  def query\n    ...\n  end\n\n  def data\n    ...\n  end\n\n  def to_json\n    ...\n  end\nend\n</code></pre>\n\n<p><a href=\"https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services\" rel=\"nofollow noreferrer\">https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services</a></p>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1496784213, "creation_date": 1496784213, "answer_id": 44400052, "question_id": 44399806, "link": "https://stackoverflow.com/questions/44399806/encapsulating-controller-logic-in-rails/44400052#44400052", "title": "Encapsulating controller logic in rails", "body": "<p>The simplest thing is to make a module and then <code>include</code> it into the other controllers:</p>\n\n<pre><code>module ControllerMixin\n  def create\n    blablacode\n  end\nend\n</code></pre>\n\n<p>The remaining question, though, is where to put this code such that it is works with Rails autoloader, since it needs to be loaded before the controllers. One way to do it would be to write the module to a file in the <code>lib/</code> directory, then add that to the autoload paths (see <a href=\"https://stackoverflow.com/questions/19098663/auto-loading-lib-files-in-rails-4\">auto-loading-lib-files-in-rails-4</a></p>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 2513815, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c21e7e60342efaedad4ed9c04447fcd1?s=128&d=identicon&r=PG", "display_name": "gipsh", "link": "https://stackoverflow.com/users/2513815/gipsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1496850866, "creation_date": 1496850866, "answer_id": 44417518, "question_id": 44399806, "link": "https://stackoverflow.com/questions/44399806/encapsulating-controller-logic-in-rails/44417518#44417518", "title": "Encapsulating controller logic in rails", "body": "<p>Short answer, i choose to create a <strong>Helper</strong>. </p>\n\n<p>From all the suggestions in the answers</p>\n\n<ul>\n<li><p><strong>Create a Module:</strong>\nSeems correct but it didnt feel right to have logic outside \nthe <code>app</code> directory. This wasnt an external module or library but\nsomething very related to the logic of my app. </p></li>\n<li><p><strong>Integrate diferents authentications in one controller:</strong>\nWas a good suggestion but i have to change all the logic of my app. </p></li>\n<li><p><strong>Create a Helpers:</strong>\nIt seems to me the better solution, i had the code on a helper, and\nis inside the app directory, very near from the other logic. </p></li>\n</ul>\n"}], "owner": {"reputation": 461, "user_id": 2513815, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c21e7e60342efaedad4ed9c04447fcd1?s=128&d=identicon&r=PG", "display_name": "gipsh", "link": "https://stackoverflow.com/users/2513815/gipsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 44417518, "answer_count": 4, "score": 0, "last_activity_date": 1496850866, "creation_date": 1496783071, "last_edit_date": 1496783724, "question_id": 44399806, "link": "https://stackoverflow.com/questions/44399806/encapsulating-controller-logic-in-rails", "title": "Encapsulating controller logic in rails", "body": "<p>I have 2 controllers in rails with different authentications schemes, \nbut they do almost the same.</p>\n\n<p>What is the best way in rails to encapsulate \nthe logic of a controller in another class or helper?</p>\n\n<p>Sample:</p>\n\n<pre><code>def ControllerA &lt; BasicAuthController    \n  def create\n    blablacode\n  end\nend\n\ndef ControllerB &lt; TokenAuthController\n  def create\n    blablacode\n  end\nend\n</code></pre>\n\n<p>Whats the proper way to do this? create a model with the code?\nCreate a helper? other?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496782807, "post_id": 44399703, "comment_id": 75799322, "body": "In which view is <code>@produtos.each</code>?"}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496783000, "post_id": 44399703, "comment_id": 75799402, "body": "A view called inicio.html.erb which is a view from the Home controller"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496783039, "post_id": 44399703, "comment_id": 75799422, "body": "So you need to create the variable <code>@produtos</code> there, this way is available in the view which responds to that method."}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496783305, "post_id": 44399703, "comment_id": 75799537, "body": "It is!     def inicio     @produtos = Produto.all     render &quot;inicio&quot;   end end"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496783417, "post_id": 44399703, "comment_id": 75799591, "body": "<code>inicio</code> in the <code>HomeController</code>?"}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496783954, "post_id": 44399703, "comment_id": 75799844, "body": "Yes, def inicio doesnt exist anymore but this is the def index at HomeController:  <code>class HomeController &lt; ApplicationController    def index     @produtos = Produto.all     render &quot;inicio&quot;   end    def show     if session[:user]       @user = User.find(session[:user])     end   end  end</code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1496784050, "post_id": 44399703, "comment_id": 75799887, "body": "@MikhaelAraujo Its better to update (edit) your question."}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1496784307, "post_id": 44399703, "comment_id": 75800010, "body": "@Gerry did this right now"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1496783153, "post_id": 44399794, "comment_id": 75799465, "body": "It&#39;s probably <code>home_controller.rb</code>"}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496783527, "post_id": 44399794, "comment_id": 75799638, "body": "def index     @produtos = Produto.all   end  the Variable already assigned on the Home Controller."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496783541, "post_id": 44399794, "comment_id": 75799642, "body": "Try changing the route from <code>post</code> to <code>get</code> -&gt; <code>get &#39;home#inicio&#39;</code>, and making reference to the method with &quot;#&quot;."}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496783849, "post_id": 44399794, "comment_id": 75799786, "body": "getting this error after that change:  check_part&#39;: Missing :controller key on routes definition, please check your routes. (ArgumentError)"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496783937, "post_id": 44399794, "comment_id": 75799834, "body": "@MikhaelAraujo Double check your view/action names: either change the view name to <code>index.html.erb</code> or change the action name to <code>inicio</code> (as stated in the answer)."}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496784128, "post_id": 44399794, "comment_id": 75799920, "body": "i&#39;ve changed the view of Home to index but still getting this error lol"}, {"owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "edited": false, "score": 0, "creation_date": 1496784554, "post_id": 44399794, "comment_id": 75800087, "body": "YEAH! my project its alive! haha. ty u so much !"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496784703, "post_id": 44399794, "comment_id": 75800149, "body": "You&#39;re welcome, just keep in mind such &quot;rule&quot;. Thank all."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 0, "last_activity_date": 1496784638, "last_edit_date": 1496784638, "creation_date": 1496783009, "answer_id": 44399794, "question_id": 44399703, "link": "https://stackoverflow.com/questions/44399703/why-my-variable-is-nil-ruby-on-rails/44399794#44399794", "title": "Why my variable is Nil? - Ruby on Rails", "body": "<p>Make your routes, methods, views match:</p>\n\n<pre><code># config/routes.rb\nget '/home/inicio', to: 'home#index'\n\n# app/controllers/home_controller.rb\ndef index\n  @produtos = Produto.all\nend\n\n# app/views/home/index.html.erb\n&lt;% @produtos.each do |produto| %&gt;\n</code></pre>\n\n<p>As you see it changes just the URI but you must make reference to your <code>index</code> method in both controller method and view name. </p>\n\n<p>If you use <code>render 'inicio'</code> then you must use the <code>inicio.html.erb</code> view instead <code>index.html.erb</code>.</p>\n"}], "owner": {"reputation": 109, "user_id": 7736875, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1865158663760777/picture?type=large", "display_name": "Mikhael Araujo", "link": "https://stackoverflow.com/users/7736875/mikhael-araujo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 44399794, "answer_count": 1, "score": 1, "last_activity_date": 1496784638, "creation_date": 1496782634, "last_edit_date": 1496784295, "question_id": 44399703, "link": "https://stackoverflow.com/questions/44399703/why-my-variable-is-nil-ruby-on-rails", "title": "Why my variable is Nil? - Ruby on Rails", "body": "<p>i have a controller called Produto and a model called Produto. I want to pass all the Produto objects to a variable as the same the Produto controller does, but to another controller. So, the controller Produto take @Produto = Produto.all in her Index def and the view of this controller uses that variable. But i want to do this in other controller.\nLook what i have :</p>\n\n<p>Produto controller:</p>\n\n<pre><code>class ProdutosController &lt; ApplicationController\n  before_action :set_produto, only: [:show, :edit, :update, :destroy]\n\n  # GET /produtos\n  # GET /produtos.json\n  def index\n    @produtos = Produto.all\n  end\n\n  def show\n  end\n\n  def new\n    @produto = Produto.new\n  end\n\n  def edit\n  end\n\n  def create\n    @produto = Produto.new(produto_params)\n    respond_to do |format|\n      if @produto.save\n        format.html { redirect_to @produto, notice: 'Produto was successfully created.' }\n        format.json { render :show, status: :created, location: @produto }\n      else\n        format.html { render :new }\n        format.json { render json: @produto.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @produto.update(produto_params)\n        format.html { redirect_to @produto, notice: 'Produto was successfully updated.' }\n        format.json { render :show, status: :ok, location: @produto }\n      else\n        format.html { render :edit }\n        format.json { render json: @produto.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @produto.destroy\n    respond_to do |format|\n      format.html { redirect_to produtos_url, notice: 'Produto was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_produto\n      @produto = Produto.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def produto_params\n      params.require(:produto).permit(:nome, :preco, :fornecedor_id)\n    end\nend\n</code></pre>\n\n<p>Home controller (this is the controller i want to take those Produto objects too, as the same the Produto controller):</p>\n\n<pre><code>    class HomeController &lt; ApplicationController\n\n  def index\n    @produtos = Produto.all\n    render \"index\"\n  end\n\n  def show\n    if session[:user]\n      @user = User.find(session[:user])\n    end\n  end\n\nend\n</code></pre>\n\n<p>the view of Home has this part on the code:</p>\n\n<pre><code>  &lt;table&gt;\n    &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Nome&lt;/th&gt;\n      &lt;th&gt;Preco&lt;/th&gt;\n      &lt;th&gt;Fornecedor&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n    &lt;% @produtos.each do |produto| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= produto.nome %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= produto.preco %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= produto.fornecedor %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Show', produto %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Edit', edit_produto_path(produto) %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Destroy', produto, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;% end %&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n</code></pre>\n\n<p><strong>and i'm getting this error</strong>:</p>\n\n<blockquote>\n  <p>undefined method `each' for nil:NilClass in &lt;% @produtos.each do\n  |produto| %></p>\n</blockquote>\n\n<p>My routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'login#new'\n  get 'home#index'\n\n  scope '/login' do\n    get '/acesso', to:'login#new'\n    post '/acessorecebendo', to:'login#create'\n    get '/sair', to:'login#destroy'\n  end\n\n  resources :login\n  resources :home\n  resources :produtos\n  resources :fornecedors\nend\n</code></pre>\n\n<p>Login controller (which is the root route):</p>\n\n<pre><code>class LoginController &lt; ApplicationController\n  skip_before_action :verify_authenticity_token\n\n  def new\n    if session[:user]\n      @user = User.find(session[:user])\n    end\n  end\n\n  def destroy\n    reset_session\n    redirect_to \"/login/acesso\", notice: \"Voc\u00ea foi deslogado\"\n  end\n\n\n  def create\n    user = User.validate(login_params[:email], login_params[:senha])\n    if user\n      session[:user] = user.id\n      redirect_to \"/home/index\", notice: \"login feito com sucesso\"\n    else\n      redirect_to \"/login/acesso\", notice: \"Dados incorretos\"\n    end\n\n  end\n  private\n  def login_params\n    params.require(:login).permit(:email, :senha)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "net-sftp"], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 9, "last_activity_date": 1496784976, "creation_date": 1496784976, "answer_id": 44400201, "question_id": 44399635, "link": "https://stackoverflow.com/questions/44399635/public-private-key-authentication-for-ruby-netsftp/44400201#44400201", "title": "Public/Private key authentication for Ruby Net::SFTP", "body": "<p><code>Net::SFTP.start</code> passes its <code>options</code> hash directly to <code>Net::SSH.start</code>, so we should <a href=\"http://www.rubydoc.info/github/net-ssh/net-ssh/Net%2FSSH.start\" rel=\"noreferrer\">look to its documentation</a>. It lists three options that look relevant:</p>\n\n<blockquote>\n  <ul>\n  <li><code>:keys</code> => an array of file names of private keys to use for publickey and hostbased authentication</li>\n  <li><code>:key_data</code> => an array of strings, with each element of the array being a raw private key in PEM format.</li>\n  <li><code>:keys_only</code> => set to <code>true</code> to use only private keys from <code>keys</code> and <code>key_data</code> parameters, even if ssh-agent offers more identities. This option is intended for situations where ssh-agent offers many different identites.</li>\n  </ul>\n</blockquote>\n\n<p>The answer to a <a href=\"https://stackoverflow.com/questions/6905934/using-ruby-and-net-ssh-how-do-i-authenticate-using-the-key-data-parameter-with\">related question</a> suggests that you may need to use all three:</p>\n\n<pre><code>Net::SFTP.start(ftp_host, user,\n  key_data: [],\n  keys: \"tmp/some-certs/privatekey.pem\",\n  keys_only: true)\n</code></pre>\n\n<p>If you want to use the raw key data from the <code>SOME_PRIVATE_KEY</code> environment variable instead, it ought to look like this:</p>\n\n<pre><code>Net::SFTP.start(ftp_host, user,\n  key_data: [ ENV[\"SOME_PRIVATE_KEY\"] ],\n  keys: [],\n  keys_only: true)\n</code></pre>\n"}], "owner": {"reputation": 16860, "user_id": 1536309, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/40f2ef2f2a528a76dbd3667acd154e5c?s=128&d=identicon&r=PG", "display_name": "Blair Anderson", "link": "https://stackoverflow.com/users/1536309/blair-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3205, "favorite_count": 1, "accepted_answer_id": 44400201, "answer_count": 1, "score": 4, "last_activity_date": 1496784976, "creation_date": 1496782347, "last_edit_date": 1496783668, "question_id": 44399635, "link": "https://stackoverflow.com/questions/44399635/public-private-key-authentication-for-ruby-netsftp", "title": "Public/Private key authentication for Ruby Net::SFTP", "body": "<p>I am having trouble finding documentation for specifying a key for SFTP authentication.</p>\n\n<p>Would like to have something like:</p>\n\n<pre><code>export SOME_PRIVATE_KEY=\"$(cat tmp/some-certs/privatekey.pem)\"\n\n# then somewhere in the code\nprivate_key = OpenSSL::PKey::RSA.new(ENV['SOME_PRIVATE_KEY'])\n\nNet::SFTP.start(ftp_host, user, key: private_key) do |sftp|\n  sftp.dir.entries('/path/to/folder').each do |remote_file|\n     # ...\n  end\nend\n</code></pre>\n"}, {"tags": ["javascript", "css", "ruby"], "comments": [{"owner": {"reputation": 710, "user_id": 7551699, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/01X66.jpg?s=128&g=1", "display_name": "Belder", "link": "https://stackoverflow.com/users/7551699/belder"}, "edited": false, "score": 0, "creation_date": 1496778695, "post_id": 44398536, "comment_id": 75797165, "body": "I&#39;m currently going through the same issues trying to integrate a wrapbootstrap them into my rails project.  I&#39;ve made some progress but still have a ways to go.  I found several tutorials online (some with conflicting info) but found <a href=\"http://www.notch8.com/implementing-a-bootstrap-theme/\" rel=\"nofollow noreferrer\">this one</a> to be helpful ."}, {"owner": {"reputation": 57, "user_id": 7979388, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/04fd394b8b4dd7f5e8e8a71fc156ca10?s=128&d=identicon&r=PG&f=1", "display_name": "Dunny", "link": "https://stackoverflow.com/users/7979388/dunny"}, "reply_to_user": {"reputation": 710, "user_id": 7551699, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/01X66.jpg?s=128&g=1", "display_name": "Belder", "link": "https://stackoverflow.com/users/7551699/belder"}, "edited": false, "score": 0, "creation_date": 1496779082, "post_id": 44398536, "comment_id": 75797380, "body": "Thanks. I found when moving js, css and image files into the standard rails asset folders all sort of things were failing as in some of the files they reference the highest level folders (e.g. img folder or js folder). I concluded this was going to be too big an overhead but I may have been wrong."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1496781882, "post_id": 44398536, "comment_id": 75798877, "body": "Second one would be <code>background: url(image_path(&#39;map-img.png&#39;)) 5px 60px no-repeat;</code>"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1496785688, "post_id": 44398536, "comment_id": 75800506, "body": "If this is giving you endless problems, there is nothing stopping you from just dumping all your assets in the <code>public</code> folder, bypassing the assets pipeline, and reference them like in any normal framework."}, {"owner": {"reputation": 57, "user_id": 7979388, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/04fd394b8b4dd7f5e8e8a71fc156ca10?s=128&d=identicon&r=PG&f=1", "display_name": "Dunny", "link": "https://stackoverflow.com/users/7979388/dunny"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1496786526, "post_id": 44398536, "comment_id": 75800774, "body": "@Iceman for the second part of this question your suggestion works, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": false, "score": 1, "last_activity_date": 1496787695, "creation_date": 1496787695, "answer_id": 44400634, "question_id": 44398536, "link": "https://stackoverflow.com/questions/44398536/rails-relative-paths-techniques/44400634#44400634", "title": "Rails - relative paths - techniques", "body": "<p>This can be a real headache in Rails, trying to work with the assets pipeline. Since at the server you don't have access to the <code>color</code> variable, you have to do something like this. There might be a smarter solution, but I'm not seeing it at the moment at least. </p>\n\n<pre><code>var link = '';\nif (color == 'red') {\n  link = \"&lt;%= asset_path('theme-colors/red.css') %&gt;\";\n}\nif (color == 'blue') {\n  link = \"&lt;%= asset_path('theme-colors/blue.css') %&gt;\";\n}\n\njQuery('#style_color').attr(\"href\", link);\n</code></pre>\n\n<p>And, as with the earlier answer, you have to add this to <code>config/initializers/assets.rb</code>.</p>\n\n<pre><code>Rails.application.config.assets.paths &lt;&lt; Rails.root.join('assets', 'css')\n</code></pre>\n\n<p>This should move you a bit in the right direction at least. And also have a look at the <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">guides on the assets pipeline</a>.</p>\n"}], "owner": {"reputation": 57, "user_id": 7979388, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/04fd394b8b4dd7f5e8e8a71fc156ca10?s=128&d=identicon&r=PG&f=1", "display_name": "Dunny", "link": "https://stackoverflow.com/users/7979388/dunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496787695, "creation_date": 1496778060, "question_id": 44398536, "link": "https://stackoverflow.com/questions/44398536/rails-relative-paths-techniques", "title": "Rails - relative paths - techniques", "body": "<p>I am struggling to understand the intricacies of how to address various assets in rails. Having had some help sorting out a related question I wanted to expand a little further.</p>\n\n<p>In my application I have imported a website template (a limited part at present) from wrap bootstrap. I am trying to get this to work and I have been hitting issues with references to images etc that are in none standard folders.</p>\n\n<p>In the wrap bootstrap theme the <em>JavaScript</em> assets are in a folder called <em>js</em>, css assets are in folder called <em>css</em> and images are in a folder called <em>img</em>. Each of these folders have multiple subfolders.</p>\n\n<p>The individual js, css files reference a whole host of paths for different reasons and often these references are failing. I firstly tried to copy all of the assets into the standard rails folders (<em>assets/javascripts etc</em>) but this failed as many of the files imported will reference the <em>js</em> folder. I don't want to move the imported files around for the same reason. My approach therefore has been to try and identify the issues in the imported files and fix the path references.</p>\n\n<p>I have already had assistance with addressing one of the issues in a  block but I have other issues within js and css files. I am also aware that the way relative paths are addressed in development can fail in production when the assets are compiled into the <em>public/asset</em>s folder.</p>\n\n<p>I was hoping therefore to get best practice advice on the basis of the 2 issues I know I still need to address.</p>\n\n<p>The first is addressing an image path within a block of <em>JavaScript</em> code as per below:-</p>\n\n<pre><code>        var setColor = function (color, data_header) {\n            jQuery('#style_color').attr(\"href\", \"../assets/css/theme-colors/\" + color + \".css\");\n            if(data_header == 'light'){\n                jQuery('.logo img').attr(\"src\", \"../assets/img/themes/logo1-\" + color + \".png\");\n                jQuery('#logo-footer').attr(\"src\", \"../assets/img/themes/logo2-\" + color + \".png\");\n                jQuery('.navbar-brand img').attr(\"src\", \"../assets/img/themes/logo1-\" + color + \".png\");\n            } else if(data_header == 'dark'){\n                jQuery('.logo img').attr(\"src\", \"../assets/img/themes/logo1-\" + color + \".png\");\n                jQuery('#logo-footer').attr(\"src\", \"../assets/img/themes/logo2-\" + color + \".png\");\n            }\n        }\n</code></pre>\n\n<p>This function is located in <em>assets/js/plugins</em> and is called from a script block located in an html.erb file in <em>assets/views/open_pages</em>. The relative path looks correct but the image doesn't appear, I get an error in the browser console window and in the rails server window I get a routing error. I can't understand how I am meant to reference this relative path in <em>JavaScript</em> as it looks correct to me.</p>\n\n<p>The second issue is similar but in a css file. The snippet below should reference the correct path but again this fails. I also read somewhere that this type of notation can fail in production</p>\n\n<pre><code>/*Dotted Map*/\n.footer-v1 .footer .map-img {\n   background: url(../img/map-img.png) 5px 60px no-repeat;\n}\n</code></pre>\n\n<p>Could anyone outline how these types of issues should be approached? I am obviously missing something critical in my understanding and it is really impeding progress.</p>\n\n<p>Thanks for your time.</p>\n\n<p>D</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri", "mechanize"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1496779255, "post_id": 44398510, "comment_id": 75797473, "body": "(1) Why are you using globals? (2) <code>String#strip</code> returns a string and string&#39;s don&#39;t have <code>click</code> methods, what are you expecting <code>website.link_with(:text =&gt; &#39;2&#39;).text.strip.click</code> to do?"}, {"owner": {"reputation": 642, "user_id": 7763383, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/b905bea26bbb393c16d0f620b1bb976f?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7763383/brandon"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1496790086, "post_id": 44398510, "comment_id": 75801753, "body": "@muistooshort I had tried both (out of desperation which is never good), if I do this <code>website.link_with(:text =&gt; $link_to_click).click</code> or <code>website.link_with(:text =&gt; 2).click</code> result in the error <i>undefined method `click&#39; for nil:NilClass</i>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1496790392, "post_id": 44398510, "comment_id": 75801833, "body": "That&#39;s telling you that it isn&#39;t finding the link you&#39;re looking for, right?"}, {"owner": {"reputation": 642, "user_id": 7763383, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/b905bea26bbb393c16d0f620b1bb976f?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7763383/brandon"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1496792004, "post_id": 44398510, "comment_id": 75802254, "body": "What you said got me thinking, rereading the articles I was referencing and then I changed it to <code>website = website.link_with(:text =&gt; $link_to_click.to_s).click</code> (because it only worked as a string) and it printed out the first page, second and each one thereafter. Thank you so much for that, even for just forcing me to second (a lot more than second) guess myself."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1496805179, "post_id": 44398510, "comment_id": 75805348, "body": "You could covert that last comment to an answer, you&#39;re allowed to answer your own questions and it might help someone in the future."}], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 7763383, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/b905bea26bbb393c16d0f620b1bb976f?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7763383/brandon"}, "is_accepted": false, "score": 1, "last_activity_date": 1496808266, "creation_date": 1496808266, "answer_id": 44403273, "question_id": 44398510, "link": "https://stackoverflow.com/questions/44398510/undefined-method-click-for-2string-rails-error-when-using-mechanize/44403273#44403273", "title": "undefined method `click&#39; for &quot;2&quot;:String, Rails error when using Mechanize", "body": "<p>I ended up reviewing the articles I was referencing to solve this and came to this conclusion.</p>\n\n<p>I changed the website_link to <code>website = website.link_with(:text =&gt; $link_to_click.to_s).click</code> (because it only worked as a string) and it printed out the first page, second and each one thereafter.</p>\n\n<p>These are the articles that I was referencing to learn how to do this. </p>\n\n<p><a href=\"http://docs.seattlerb.org/mechanize/GUIDE_rdoc.html\" rel=\"nofollow noreferrer\">http://docs.seattlerb.org/mechanize/GUIDE_rdoc.html</a></p>\n\n<p>and </p>\n\n<p><a href=\"https://readysteadycode.com/howto-scrape-websites-with-ruby-and-mechanize\" rel=\"nofollow noreferrer\">https://readysteadycode.com/howto-scrape-websites-with-ruby-and-mechanize</a></p>\n"}], "owner": {"reputation": 642, "user_id": 7763383, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/b905bea26bbb393c16d0f620b1bb976f?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/7763383/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496808266, "creation_date": 1496777990, "question_id": 44398510, "link": "https://stackoverflow.com/questions/44398510/undefined-method-click-for-2string-rails-error-when-using-mechanize", "title": "undefined method `click&#39; for &quot;2&quot;:String, Rails error when using Mechanize", "body": "<pre><code>class ScraperController &lt; ApplicationController\n\n def show\n  mechanize = Mechanize.new\n\n  website = mechanize.get('https://website.com/')\n  $max = 2\n  $counter = 0\n  $link_to_click = 2\n\n  @names = []\n\n  while $counter &lt;= $max do\n    @names.push(website.css('.memName').text.strip)\n    website.link_with(:text =&gt; '2').text.strip.click\n    $link_to_click += 1\n    $counter += 1\n  end\n end\nend \n</code></pre>\n\n<p>I am trying to scrape 20 items off of each page and then click on the link at the bottom (1, 2, 3, 4, 5, etc.). However, I get the error as seen in the title which tells me that I cannot click the string. So it recognizes that the button '2' exists but will tell me if cannot click it. Ideally, once this is sorted out, I wanted to the use the $link_to_click variable as a way to replace the '2' so that it will increment each time but it always comes back as nil. I have also changed it to .to_s with the same result. </p>\n\n<p>If I remove the click all together, it will scrape the same page 3 times instead of moving onto the next page. I have also removed the text.strip part before the .click and it will do the same thing. I have tried many variations but have had no luck.</p>\n\n<p>I would really appreciate any advice you could offer. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2782, "user_id": 4458445, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bIIZcxNxAuA/AAAAAAAAAAI/AAAAAAAAOGs/6SNi2yJnzKA/photo.jpg?sz=128", "display_name": "RToyo", "link": "https://stackoverflow.com/users/4458445/rtoyo"}, "edited": false, "score": 2, "creation_date": 1496775652, "post_id": 44397828, "comment_id": 75795464, "body": "Usually you just insert a sample post into the database at the same time you&#39;re inserting the new user record as well."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1496775712, "post_id": 44397828, "comment_id": 75795494, "body": "<code>@brand_new_user.posts.create(title: ...)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": false, "score": 1, "last_activity_date": 1496776004, "creation_date": 1496776004, "answer_id": 44397959, "question_id": 44397828, "link": "https://stackoverflow.com/questions/44397828/auto-populate-a-sample-article-post-in-user-account-on-signup/44397959#44397959", "title": "Auto-populate a sample article/post in user account on signup?", "body": "<p>I have a application doing something similar. I came from the school of fat model so my account model looks like this:</p>\n\n<pre><code>#app/models/account.rb\nclass Account &lt; ApplicationRecord\n  has_many :posts\n  after_create :seed_account\n  ...\n  private \n  def seed_account\n     ...\n     posts.create(...)\n     ...\n  end\nend\n</code></pre>\n\n<p>I hope that this helps.\nThis way when a new account is created no mater if from the console or api  or ui your account would always be seeded with its defaults </p>\n"}, {"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 2, "last_activity_date": 1496776017, "creation_date": 1496776017, "answer_id": 44397964, "question_id": 44397828, "link": "https://stackoverflow.com/questions/44397828/auto-populate-a-sample-article-post-in-user-account-on-signup/44397964#44397964", "title": "Auto-populate a sample article/post in user account on signup?", "body": "<p>There is a <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\"><code>callback</code></a> <code>after_create</code>, which fired after records has been created(only once). Here is some example:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :posts\n  after_create do\n    posts.create(title: 'Your new article')\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 3867227, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54a9df6d9111b457f5054905cc47ccb3?s=128&d=identicon&r=PG", "display_name": "Gcamara14", "link": "https://stackoverflow.com/users/3867227/gcamara14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 44397964, "answer_count": 2, "score": -1, "last_activity_date": 1496805923, "creation_date": 1496775498, "last_edit_date": 1496805923, "question_id": 44397828, "link": "https://stackoverflow.com/questions/44397828/auto-populate-a-sample-article-post-in-user-account-on-signup", "title": "Auto-populate a sample article/post in user account on signup?", "body": "<p>I'm building a Rails app where users can write a blog post. It can take a simple title and description. </p>\n\n<p>But the feature I would like to have is that when a user signs up for the app their account will already have a sample post inside of their account so they can get an idea of how a blog post can look like and the features they have.</p>\n\n<p>Any ideas or other stackoverflow questions answering how I can have a post already populated in users account on signup?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "minitest"], "comments": [{"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 1, "creation_date": 1496774579, "post_id": 44397484, "comment_id": 75794837, "body": "Are you using <code>bundle</code>? Do you have <code>factory_girl</code> in your <code>Gemfile</code>?"}, {"owner": {"reputation": 149, "user_id": 5741371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-JV7UwoV1eKU/AAAAAAAAAAI/AAAAAAAAAK4/Is3T8ArskQU/photo.jpg?sz=128", "display_name": "Samir Haddad", "link": "https://stackoverflow.com/users/5741371/samir-haddad"}, "reply_to_user": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 0, "creation_date": 1496774789, "post_id": 44397484, "comment_id": 75794963, "body": "Yes, <code>bundle</code> runs fine. I do have <code>factory_girl</code> , <code>faker</code> and other gems in the test group. Like I said, the tests are running fine in another computer. I even removed ruby 2.3.3 using rbenv and installed it again, and doing so, it installed all those gems. Still I got the same error. :/"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496776581, "post_id": 44397484, "comment_id": 75795998, "body": "Sanity check: Run <code>bundle exec rspec</code>"}, {"owner": {"reputation": 149, "user_id": 5741371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-JV7UwoV1eKU/AAAAAAAAAAI/AAAAAAAAAK4/Is3T8ArskQU/photo.jpg?sz=128", "display_name": "Samir Haddad", "link": "https://stackoverflow.com/users/5741371/samir-haddad"}, "edited": false, "score": 0, "creation_date": 1496778806, "post_id": 44397484, "comment_id": 75797225, "body": "<code>bundler: command not found: rspec</code>"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 5741371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-JV7UwoV1eKU/AAAAAAAAAAI/AAAAAAAAAK4/Is3T8ArskQU/photo.jpg?sz=128", "display_name": "Samir Haddad", "link": "https://stackoverflow.com/users/5741371/samir-haddad"}, "is_accepted": false, "score": 0, "last_activity_date": 1496780747, "creation_date": 1496780747, "answer_id": 44399227, "question_id": 44397484, "link": "https://stackoverflow.com/questions/44397484/rails-tests-dont-seem-to-be-loading-any-classes-nameerror-uninitialized-const/44399227#44399227", "title": "Rails tests don&#39;t seem to be loading any classes, NameError: uninitialized constant", "body": "<p>Okay, so when I had given up, I found the problem already.</p>\n\n<p>tl;dr : had to remove <code>RAILS_ENV=development</code> from <code>.rbenv-vars</code></p>\n\n<p>Complete answer:</p>\n\n<p>Test gems were in a group to run only in the test environment like this:</p>\n\n<pre><code>group :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\n  gem 'faker'\n  gem 'cpf_faker'\n  gem 'factory_girl'\n  gem 'capybara'\n  gem 'minitest-capybara'\n  gem 'poltergeist'\n  gem \"capybara-webkit\"\n  gem 'selenium-webdriver'\n  gem 'minitest-rails'\nend\n</code></pre>\n\n<p>The thing is... I'm using whenever gem to run some tasks every day, but whenever is not able to find which environment it is being run, so I was using RAILS_ENV=development in my <code>.rbenv-vars</code> file.</p>\n\n<p>Because of that, even <code>rake test</code> was being run on development environment, I don't know why this is allowed to happen though.</p>\n"}], "owner": {"reputation": 149, "user_id": 5741371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-JV7UwoV1eKU/AAAAAAAAAAI/AAAAAAAAAK4/Is3T8ArskQU/photo.jpg?sz=128", "display_name": "Samir Haddad", "link": "https://stackoverflow.com/users/5741371/samir-haddad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496780747, "creation_date": 1496774255, "question_id": 44397484, "link": "https://stackoverflow.com/questions/44397484/rails-tests-dont-seem-to-be-loading-any-classes-nameerror-uninitialized-const", "title": "Rails tests don&#39;t seem to be loading any classes, NameError: uninitialized constant", "body": "<p>Suddenly whenever I run 'rake test' or 'bundle exe rake test' I get the following error.</p>\n\n<pre><code>NameError: uninitialized constant FactoryGirl\n</code></pre>\n\n<p>Before anyone tells me to add <code>require 'factory_girl'</code>  to my <code>test_helper.rb</code> file, the same updated branch is running the tests without any problem in another computer. </p>\n\n<p>Still I've tried adding <code>require 'factory_girl'</code>. Then it raised another error saying <code>NameError: uninitialized constant Faker</code>, and so I added <code>require 'faker'</code> and there was always something it required, and the tests for this project always worked fine without all those requires.</p>\n\n<p>Info that might be useful:</p>\n\n<ul>\n<li>Ubuntu 16.10</li>\n<li>Rails 5.1.1</li>\n<li>Ruby 2.3.3 (using rbenv)</li>\n<li>I'm using minitest, not RSPEC</li>\n</ul>\n\n<p>Error bracktrace:</p>\n\n<pre><code>** Invoke test (first_time)\n** Execute test\nrake aborted!\nNameError: uninitialized constant FactoryGirl\n/home/samir/Projects/Tuuris/test/test_helper.rb:10:in `&lt;top (required)&gt;'\n/home/samir/Projects/Tuuris/test/controllers/admin_controller_test.rb:1:in `&lt;top (required)&gt;'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/test_unit/test_requirer.rb:14:in `block in require_files'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/test_unit/test_requirer.rb:13:in `each'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/test_unit/test_requirer.rb:13:in `require_files'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/test_unit/minitest_plugin.rb:67:in `rake_run'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/test_unit/testing.rake:14:in `block in &lt;top (required)&gt;'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `block in execute'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `each'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `execute'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:180:in `invoke'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:152:in `invoke_task'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block (2 levels) in top_level'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `each'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block in top_level'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:117:in `run_with_threads'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:102:in `top_level'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:80:in `block in run'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:77:in `run'\n/home/samir/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\n/home/samir/.rbenv/versions/2.3.3/bin/rake:22:in `load'\n/home/samir/.rbenv/versions/2.3.3/bin/rake:22:in `&lt;main&gt;'\nTasks: TOP =&gt; test\n</code></pre>\n\n<p>Any clue?</p>\n"}, {"tags": ["ruby", "vim"], "answers": [{"tags": [], "owner": {"reputation": 2856, "user_id": 835591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f40a853c80ab7320114f4284f81a31e6?s=128&d=identicon&r=PG", "display_name": "thalesmello", "link": "https://stackoverflow.com/users/835591/thalesmello"}, "is_accepted": false, "score": 0, "last_activity_date": 1496783112, "creation_date": 1496783112, "answer_id": 44399812, "question_id": 44397049, "link": "https://stackoverflow.com/questions/44397049/is-there-any-way-to-use-ctags-with-ruby-namespacing/44399812#44399812", "title": "Is there any way to use ctags with ruby namespacing?", "body": "<p>Maybe you could give <a href=\"https://github.com/tmm1/ripper-tags\" rel=\"nofollow noreferrer\">ripper-tags</a> a try, but I don't have any experience with it.</p>\n\n<p>What I do usually is, if <kbd>Ctrl</kbd>+<kbd>]</kbd> doesn't open the correct tag, I just repeat <code>:tnext</code> until I reach the correct one.</p>\n\n<p>In case you find that tiring, you could use <a href=\"https://github.com/tpope/vim-unimpaired\" rel=\"nofollow noreferrer\">vim-unimpaired</a> to have the convenient <code>[t</code> and <code>]t</code> or manually map</p>\n\n<pre><code>nnoremap ]t :tnext&lt;cr&gt;\nnnoremap [t :tprevious&lt;cr&gt;\n</code></pre>\n"}], "owner": {"reputation": 3339, "user_id": 1654940, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/88c65dba018958bb6462c0530016ec3b?s=128&d=identicon&r=PG", "display_name": "Marcin Doliwa", "link": "https://stackoverflow.com/users/1654940/marcin-doliwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496783112, "creation_date": 1496772849, "question_id": 44397049, "link": "https://stackoverflow.com/questions/44397049/is-there-any-way-to-use-ctags-with-ruby-namespacing", "title": "Is there any way to use ctags with ruby namespacing?", "body": "<p>When I have classes <code>ModuleA::Class1</code> with method <code>test_method</code> and <code>ModuleB::Class2</code> with <code>test_method</code> as well, and somewhere in code I have <code>ModuleB::Class2.test_method</code> and click <code>Ctrl-]</code> on <code>test_method</code> it jumps to wrong <code>test_method</code> definition from <code>ModuleA::Class1</code>.</p>\n\n<p>Is there any way to make ctags work with Ruby namespaces?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8121183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b76b315e8c6b72b7916339b1fad560b?s=128&d=identicon&r=PG&f=1", "display_name": "mikeyc24", "link": "https://stackoverflow.com/users/8121183/mikeyc24"}, "edited": false, "score": 1, "creation_date": 1496771806, "post_id": 44396632, "comment_id": 75793220, "body": "Thanks for the answer, that clarified it."}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": true, "score": 0, "last_activity_date": 1496771429, "creation_date": 1496771429, "answer_id": 44396632, "question_id": 44396464, "link": "https://stackoverflow.com/questions/44396464/has-secure-password-wont-create-attributes/44396632#44396632", "title": "has_secure_password, wont create attributes", "body": "<p>Nope, you don't store the <code>password</code> and <code>password_confirmation</code>, just the <code>password_digest</code>. You never want to store plain text passwords in your db.</p>\n\n<p>When you create a new user you do</p>\n\n<pre><code>User.create(password: 'something', password_confirmation: 'something', ..other fields..)\n</code></pre>\n\n<p>and then <code>has_secure_password</code> takes care of updating the <code>password_digest</code> in the database.</p>\n\n<p>It's also a good rule to include some validations in your <code>User</code> model.</p>\n\n<pre><code>validates :password_confirmation, presence: true, on: :create\nvalidates :password, confirmation: true\n</code></pre>\n\n<p>Also don't forget to white list them in your controller</p>\n\n<pre><code>def user_params\n  params.require(:user).permit(:password, :password_confirmation)\nend\n\nUser.create(user_params)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1880, "user_id": 284511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02af94441ca54b5cab7d4ca8bfff83c?s=128&d=identicon&r=PG", "display_name": "fringd", "link": "https://stackoverflow.com/users/284511/fringd"}, "is_accepted": false, "score": -2, "last_activity_date": 1496781537, "last_edit_date": 1496781537, "creation_date": 1496771593, "answer_id": 44396675, "question_id": 44396464, "link": "https://stackoverflow.com/questions/44396464/has-secure-password-wont-create-attributes/44396675#44396675", "title": "has_secure_password, wont create attributes", "body": "<p>You'll probably need to change the form and/or <code>create</code> template manually to contain a <code>password_confirmation</code> field. Look more closely at the has_secure_password docs maybe?</p>\n"}], "owner": {"reputation": 53, "user_id": 8121183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b76b315e8c6b72b7916339b1fad560b?s=128&d=identicon&r=PG&f=1", "display_name": "mikeyc24", "link": "https://stackoverflow.com/users/8121183/mikeyc24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44396632, "answer_count": 2, "score": 1, "last_activity_date": 1496781537, "creation_date": 1496770804, "last_edit_date": 1496778964, "question_id": 44396464, "link": "https://stackoverflow.com/questions/44396464/has-secure-password-wont-create-attributes", "title": "has_secure_password, wont create attributes", "body": "<p>I am trying to use <code>has_secure_password</code> and bcrypt (3.1.11) on my Rails app. </p>\n\n<p>Here is my setup on Ubuntu:</p>\n\n<ol>\n<li>I installed bcrypt with no issues and have it in my gem file</li>\n<li>I have a <code>password_digest:string</code> for my users migrated in the database</li>\n<li>I added <code>has_secure_password</code> to my user model</li>\n</ol>\n\n<p>I am getting no errors, however when I go to create a user, it is asking me for a <code>password_digest</code> attribute instead of <code>password</code> and <code>password_confirmation</code>.</p>\n\n<p>why is this? Shouldn't the <code>has_secure_password</code> automatically change the user to need a <code>password</code> and <code>password_confirmation</code> instead of <code>password_digest</code>?    </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1496775804, "post_id": 44396439, "comment_id": 75795541, "body": "how about putting the url into an <code>&lt;audio&gt;</code> tag? It would be <code>&lt;audio controls src=&quot;&lt;%= @music.audio.url %&gt;&quot;&gt;&lt;&#47;audio&gt;</code>"}, {"owner": {"reputation": 443, "user_id": 7161061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/58ec49d163553d91e7f717623216f926?s=128&d=identicon&r=PG&f=1", "display_name": "jmike", "link": "https://stackoverflow.com/users/7161061/jmike"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496776094, "post_id": 44396439, "comment_id": 75795702, "body": "@maxpleaner just tried it the audio file created but only 3 seconds and no sound is playing"}, {"owner": {"reputation": 443, "user_id": 7161061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/58ec49d163553d91e7f717623216f926?s=128&d=identicon&r=PG&f=1", "display_name": "jmike", "link": "https://stackoverflow.com/users/7161061/jmike"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1496776413, "post_id": 44396439, "comment_id": 75795900, "body": "@maxpleaner ok so i just uploaded another audio file and it works thank"}, {"owner": {"reputation": 89, "user_id": 8245776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ffbeff0440402e1294c98f38e0c5ddd?s=128&d=identicon&r=PG&f=1", "display_name": "mocqoro", "link": "https://stackoverflow.com/users/8245776/mocqoro"}, "edited": false, "score": 1, "creation_date": 1525753466, "post_id": 44396439, "comment_id": 87468892, "body": "Thanks, @jmike and maxpleaner, I implemented this in my rails project with help from your question :) Shouldn&#39;t this be marked as answered though?"}], "owner": {"reputation": 443, "user_id": 7161061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/58ec49d163553d91e7f717623216f926?s=128&d=identicon&r=PG&f=1", "display_name": "jmike", "link": "https://stackoverflow.com/users/7161061/jmike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 879, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1496770722, "creation_date": 1496770722, "question_id": 44396439, "link": "https://stackoverflow.com/questions/44396439/uploading-audio-files-with-carrierwave", "title": "Uploading audio files with carrierwave", "body": "<p>I am having trouble uploading audio with the carrierwave gem, when i post the the audio file all that displays is the audio url link. First time using the gem and not sure if i am using carrierwave correctly. Just trying to display the audio file on the show page. </p>\n\n<pre><code>  class AudioUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  # include CarrierWave::MiniMagick\n  storage :file\n  include CarrierWave::Audio\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\nend\n</code></pre>\n\n<hr>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Title:&lt;/strong&gt;\n  &lt;%= @music.title %&gt;\n  &lt;%= @music.audio.url() %&gt;\n&lt;/p&gt;\n\n&lt;%= link_to 'Edit', edit_music_path(@music) %&gt; |\n&lt;%= link_to 'Back', musics_path %&gt;\n</code></pre>\n\n<hr>\n\n<p>music.rb</p>\n\n<pre><code>class Music &lt; ApplicationRecord\n    mount_uploader :audio, AudioUploader\nend\n</code></pre>\n\n<hr>\n\n<p>schema</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20170606155943) do\n\n  create_table \"musics\", force: :cascade do |t|\n    t.string   \"title\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string   \"audio\"\n  end\n\nend\n</code></pre>\n\n<hr>\n\n<p>music controller</p>\n\n<pre><code>class MusicsController &lt; ApplicationController\n  before_action :set_music, only: [:show, :edit, :update, :destroy]\n\n  # GET /musics\n  # GET /musics.json\n  def index\n    @musics = Music.all\n  end\n\n  # GET /musics/1\n  # GET /musics/1.json\n  def show\n  end\n\n  # GET /musics/new\n  def new\n    @music = Music.new\n  end\n\n  # GET /musics/1/edit\n  def edit\n  end\n\n  # POST /musics\n  # POST /musics.json\n  def create\n    @music = Music.new(music_params)\n\n    respond_to do |format|\n      if @music.save\n        format.html { redirect_to @music, notice: 'Music was successfully created.' }\n        format.json { render :show, status: :created, location: @music }\n      else\n        format.html { render :new }\n        format.json { render json: @music.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /musics/1\n  # PATCH/PUT /musics/1.json\n  def update\n    respond_to do |format|\n      if @music.update(music_params)\n        format.html { redirect_to @music, notice: 'Music was successfully updated.' }\n        format.json { render :show, status: :ok, location: @music }\n      else\n        format.html { render :edit }\n        format.json { render json: @music.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /musics/1\n  # DELETE /musics/1.json\n  def destroy\n    @music.destroy\n    respond_to do |format|\n      format.html { redirect_to musics_url, notice: 'Music was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_music\n      @music = Music.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def music_params\n      params.require(:music).permit(:title, :audio)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "dynamic", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1496771477, "post_id": 44396252, "comment_id": 75793037, "body": "It&#39;s not clear to me the mapping between the column names and what you need in the <code>create</code> parameters. But it seems like you should modify <code>user.columns</code> to return something else (or provide another user method to do so)"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1496774401, "post_id": 44396252, "comment_id": 75794742, "body": "@MarkThomas Sorry if I was unclear, I want to generate parameters for my <code>create</code> action based on the contents of <code>user.columns</code>. For example, if <code>user.columns = {&quot;included_column&quot;=&gt;&quot;true&quot;, &quot;another_included_column&quot;=&gt;&quot;true&quot;, &quot;not_included_column&quot;=&gt;&quot;false&quot;}</code>, then the <code>create</code> parameters would be <code>Item.create(included_column: row[:included_column], another_included_column: row[:another_included_column])</code>. Does that make sense? <code>not_included_column</code> wouldn&#39;t be a parameter because it&#39;s false in <code>user.columns</code>"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1496780498, "post_id": 44396252, "comment_id": 75798154, "body": "What does <code>row</code> contain?"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1496780633, "post_id": 44396252, "comment_id": 75798223, "body": "@MarkThomas A row is just a row of the CSV file. It&#39;ll contain a bunch of different values, including &quot;name&quot;, &quot;category&quot;, and &quot;tag&quot;."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1496800994, "post_id": 44396252, "comment_id": 75804305, "body": "In your example, you have <code>&quot;title&quot;=&gt;&quot;true&quot;</code> resulting in a hash with a key <code>:name</code>. That&#39;s what threw me off."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1496801100, "post_id": 44396252, "comment_id": 75804328, "body": "@MarkThomas Sorry, that was a mistake."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1496782466, "post_id": 44399209, "comment_id": 75799153, "body": "row is already a <code>Hash</code> and has keys for <code>name</code> and <code>category</code> why not just leverage that?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1496782823, "post_id": 44399209, "comment_id": 75799331, "body": "<code>keys.map(&amp;:to_sym)</code> :) because the &quot;row&quot; keys are apparently symbols and the column keys are strings. either that or preprocess the <code>user.columns</code> with <code>symbolize_keys</code>"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1496843494, "post_id": 44399209, "comment_id": 75828009, "body": "Brilliant! Thanks."}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 2, "last_activity_date": 1496782662, "last_edit_date": 1496782662, "creation_date": 1496780656, "answer_id": 44399209, "question_id": 44396252, "link": "https://stackoverflow.com/questions/44396252/how-can-i-dynamically-generate-parameters-for-a-create-method/44399209#44399209", "title": "How can I dynamically generate parameters for a create method?", "body": "<p><code>Item.create(name: row[:name])</code> also takes a hash, and can be written equivalently as <code>Item.create({ name: row[:name] })</code></p>\n\n<p>As such - you can build up the entire object in a hash each time; then <a href=\"https://apidock.com/rails/Hash/slice\" rel=\"nofollow noreferrer\"><code>slice</code></a> off any attributes that you don't want, and then pass to <code>create</code>. So assuming you have:</p>\n\n<pre><code>user.columns\n#=&gt; {\"name\"=&gt;\"true\",\"category\"=&gt;\"false\"}\n</code></pre>\n\n<p>Then you could write:</p>\n\n<pre><code>user_object = { \"name\" =&gt; row[:name], \"category\" =&gt; row[:category] }\n#=&gt; include all the possible attributes here\n\nincluded_attributes = user.columns.select { |k, v| v == \"true\" }\n#=&gt; {\"name\"=&gt;\"true\"}\n\nItem.create( user_object.slice(*included_attributes.keys) )\n#=&gt; `Item` is created with only `name` attribute\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> as engineersmnky points out in the comments, <code>row</code> is already a hash. This simplifies it further, and you could instead just write:</p>\n\n<pre><code>SmarterCSV.process(file).each do |row|\n  included_attributes = user.columns.select { |k, v| v == \"true\" }\n  Item.create( row.slice(*included_attributes.keys) )\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1496801538, "creation_date": 1496801538, "answer_id": 44402395, "question_id": 44396252, "link": "https://stackoverflow.com/questions/44396252/how-can-i-dynamically-generate-parameters-for-a-create-method/44402395#44402395", "title": "How can I dynamically generate parameters for a create method?", "body": "<p>I would add a method to your <code>User</code> model to return the column names as symbols:</p>\n\n<pre><code>class User\n  def selected_columns\n    columns.select{|_,v| v == \"true\"}.keys.map(&amp;:to_sym)\n  end\nend\n</code></pre>\n\n<p>and then modify your item creation like so:</p>\n\n<pre><code>Item.create(row.slice(*user.selected_columns))\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 44399209, "answer_count": 2, "score": 1, "last_activity_date": 1496801538, "creation_date": 1496770097, "last_edit_date": 1496801068, "question_id": 44396252, "link": "https://stackoverflow.com/questions/44396252/how-can-i-dynamically-generate-parameters-for-a-create-method", "title": "How can I dynamically generate parameters for a create method?", "body": "<p>I have a model \"Item\", and I want to generate a bunch of Items with data taken from a CSV file. But I want to allow the user to select which data columns are used.</p>\n\n<p>So my model \"User\" has a json attribute called Columns, telling which columns should be used from that user's CSV file. For example, if <code>user.columns == {\"title\"=&gt;\"true\",\"category\"=&gt;\"false\"}</code>, then the Title column should be used but the Category column shouldn't.\n<em>(Alternatively, I could only list the columns I want to include, like this: <code>{\"title\"=&gt;\"included\"}</code>, and later do something like <code>user.columns.each {|c| c[0]}</code> to get an array of all the included columns.)</em></p>\n\n<p>I have a method for generating Items based on the CSV data:</p>\n\n<pre><code>def create\n  #...\n  SmarterCSV.process(file).each do |row| #this line returns an array of all the rows in the CSV file\n    Item.create(title: row[:title], category: row[:category])\n  end\nend\n</code></pre>\n\n<p>but how can I modify the method's parameters based on the contents of <code>user.columns</code>? For the <code>{\"title\"=&gt;\"true\",\"category\"=&gt;\"false\"}</code> example, the method would just be <code>Item.create(name: row[:title])</code>. Is it possible to dynamically generate a method like that?</p>\n\n<p>I'm planning to have quite a lot of possible columns, so doing an <code>if</code> conditional for every possibility is unfeasible.</p>\n"}, {"tags": ["ruby", "cocoapods", "macos-high-sierra"], "comments": [{"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1496770202, "post_id": 44396215, "comment_id": 75792330, "body": "Did you update the Command Line Tools?"}, {"owner": {"reputation": 10550, "user_id": 481983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e85f565ac9c5d5c85b93819fcbc0da4c?s=128&d=identicon&r=PG", "display_name": "Maciej Swic", "link": "https://stackoverflow.com/users/481983/maciej-swic"}, "reply_to_user": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1496773362, "post_id": 44396215, "comment_id": 75794118, "body": "@matt Yes, <code>sudo xcode-select -s &#47;Applications&#47;Xcode-beta.app</code> and <code>sudo xcode-select --install</code> and followed the GUI from there."}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1496775842, "post_id": 44396215, "comment_id": 75795560, "body": "I was thinking of the ones here: <a href=\"https://developer.apple.com/download/more/\" rel=\"nofollow noreferrer\">developer.apple.com/download/more</a> I often find external tools don&#39;t work until I install those."}], "answers": [{"comments": [{"owner": {"reputation": 656, "user_id": 1333847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/70d140be1125d398b8718fa7efffb1d9?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/1333847/markus"}, "edited": false, "score": 17, "creation_date": 1499767891, "post_id": 44397500, "comment_id": 77036759, "body": "A simple &quot;brew reinstall cocoapods&quot; worked (as it runs this exact command for you). Thank you for pointing that out."}, {"owner": {"reputation": 10884, "user_id": 5537752, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1007133649309606/picture?type=large", "display_name": "Hans Kn&#246;chel", "link": "https://stackoverflow.com/users/5537752/hans-kn%c3%b6chel"}, "edited": false, "score": 0, "creation_date": 1504547441, "post_id": 44397500, "comment_id": 79044291, "body": "Although this works, it should definitely be a CocoaPods issue, since it is unable to locate the updated Ruby version. Probably reinstalling it just checks for the installation again and therefore &quot;fixes&quot; it."}, {"owner": {"reputation": 704, "user_id": 596530, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/29b8ca28ea4b90b7d75eb4c894a232ba?s=128&d=identicon&r=PG", "display_name": "krishnan", "link": "https://stackoverflow.com/users/596530/krishnan"}, "reply_to_user": {"reputation": 656, "user_id": 1333847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/70d140be1125d398b8718fa7efffb1d9?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/1333847/markus"}, "edited": false, "score": 0, "creation_date": 1506424456, "post_id": 44397500, "comment_id": 79806877, "body": "gem install cocoapods - throws no implicit conversion of nil to string error but &quot;brew reinstall cocoapods&quot; did the job. thanks @Markus"}, {"owner": {"reputation": 473, "user_id": 4340002, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/DdSbs.jpg?s=128&g=1", "display_name": "Anupam Gupta", "link": "https://stackoverflow.com/users/4340002/anupam-gupta"}, "edited": false, "score": 0, "creation_date": 1512289456, "post_id": 44397500, "comment_id": 82191410, "body": "gem install -n /usr/local/bin cocoapods helps me"}, {"owner": {"reputation": 10625, "user_id": 7576100, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DtaDx.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7576100/jack"}, "edited": false, "score": 0, "creation_date": 1515666780, "post_id": 44397500, "comment_id": 83390807, "body": "Since i updated to 10.13 OS, Provided <code>sudo gem install cocoapods</code> <b>again</b> &amp; it&#39;s worked."}, {"owner": {"reputation": 2937, "user_id": 1124794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWnhB.png?s=128&g=1", "display_name": "brthornbury", "link": "https://stackoverflow.com/users/1124794/brthornbury"}, "edited": false, "score": 0, "creation_date": 1546921702, "post_id": 44397500, "comment_id": 95003532, "body": "I hit this on Mojave on omitted <code>sudo</code>, so just <code>gem install cocoapods</code> and it worked, thanks"}, {"owner": {"reputation": 1442, "user_id": 1680297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vz5ko.jpg?s=128&g=1", "display_name": "MMiroslav", "link": "https://stackoverflow.com/users/1680297/mmiroslav"}, "edited": false, "score": 0, "creation_date": 1570634110, "post_id": 44397500, "comment_id": 102976320, "body": "Works for macOS Catalina (v10.15), as well."}, {"owner": {"reputation": 103, "user_id": 3802430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ICcc.jpg?s=128&g=1", "display_name": "oegpyg", "link": "https://stackoverflow.com/users/3802430/oegpyg"}, "edited": false, "score": 0, "creation_date": 1572454563, "post_id": 44397500, "comment_id": 103567769, "body": "Works for macOS Catalina too."}], "tags": [], "owner": {"reputation": 5313, "user_id": 999754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75b077a6b29816ee9814699505d71001?s=128&d=identicon&r=PG", "display_name": "zeisi", "link": "https://stackoverflow.com/users/999754/zeisi"}, "is_accepted": true, "score": 417, "last_activity_date": 1506497834, "last_edit_date": 1506497834, "creation_date": 1496774332, "answer_id": 44397500, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/44397500#44397500", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>According to <a href=\"https://github.com/CocoaPods/CocoaPods/issues/6778\" rel=\"noreferrer\" title=\"Github Issue Tracker\">https://github.com/CocoaPods/CocoaPods/issues/6778</a> reinstalling CocoaPods should solve this issue:</p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2809, "user_id": 856477, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/008cce697b35cc8ef95118f02dbb9a1e?s=128&d=identicon&r=PG", "display_name": "Andrew Smith", "link": "https://stackoverflow.com/users/856477/andrew-smith"}, "is_accepted": false, "score": 12, "last_activity_date": 1506505648, "last_edit_date": 1506505648, "creation_date": 1505937060, "answer_id": 46330696, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46330696#46330696", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>This worked for me, although I had to do</p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 298, "user_id": 5670633, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207835467785668/picture?type=large", "display_name": "T. Hyldgaard", "link": "https://stackoverflow.com/users/5670633/t-hyldgaard"}, "is_accepted": false, "score": 6, "last_activity_date": 1506501804, "creation_date": 1506501804, "answer_id": 46443272, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46443272#46443272", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>So I ran into this problem as well after having updated to High Sierra, and it seems like there's been some changes to a location of file that the ruby framework was accessing. </p>\n\n<p>You can solve it using the, </p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n\n<p>and then update pods as well with for safe measures</p>\n\n<pre><code>pod repo update \n</code></pre>\n\n<p>and finally </p>\n\n<pre><code>pod install\n</code></pre>\n\n<p>to make the pod file work again.</p>\n\n<p>Hope this helps out :) </p>\n"}, {"tags": [], "owner": {"reputation": 2195, "user_id": 5490322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5p8xX.jpg?s=128&g=1", "display_name": "Himanth", "link": "https://stackoverflow.com/users/5490322/himanth"}, "is_accepted": false, "score": 1, "last_activity_date": 1506515673, "creation_date": 1506515673, "answer_id": 46448020, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46448020#46448020", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>While I'm doing the same I got another error saying that </p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (Gem::FilePermissionError)\n      You don't have write permissions for the /Library/Ruby/Gems/2.3.0 directory.</p>\n</blockquote>\n\n<p>Then I did this and worked fine.</p>\n\n<pre><code>sudo gem uninstall cocoapods\n\nsudo gem install cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 8694527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vx5wW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/8694527/david"}, "is_accepted": false, "score": 6, "last_activity_date": 1506674243, "creation_date": 1506674243, "answer_id": 46484926, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46484926#46484926", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>Try using </p>\n\n<pre><code>sudo gem update --system\n</code></pre>\n\n<p>Before </p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n\n<p>This worked for me</p>\n"}, {"comments": [{"owner": {"reputation": 17846, "user_id": 1664443, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/EGaoL.png?s=128&g=1", "display_name": "Dan Beaulieu", "link": "https://stackoverflow.com/users/1664443/dan-beaulieu"}, "edited": false, "score": 1, "creation_date": 1507045201, "post_id": 46520248, "comment_id": 80050964, "body": "This is the only solution that seemed to work for me. Thanks"}], "tags": [], "owner": {"reputation": 2269, "user_id": 6366256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPlI7.jpg?s=128&g=1", "display_name": "Danh Huynh", "link": "https://stackoverflow.com/users/6366256/danh-huynh"}, "is_accepted": false, "score": 29, "last_activity_date": 1506924318, "creation_date": 1506924318, "answer_id": 46520248, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46520248#46520248", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>I got this error while installing the CocoaPods</p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::FilePermissionError)\nYou don't have write permissions for the /usr/bin directory.\n</code></pre>\n\n<p>And I used this statement. It worked!</p>\n\n<pre><code>sudo gem install cocoapods -n /usr/local/bin\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 455, "user_id": 1299724, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/X1sdw.png?s=128&g=1", "display_name": "Bryce Sandlund", "link": "https://stackoverflow.com/users/1299724/bryce-sandlund"}, "edited": false, "score": 1, "creation_date": 1511135689, "post_id": 46576869, "comment_id": 81719322, "body": "I got &quot;ERROR:  While executing gem ... (Errno::EPERM)     Operation not permitted @ rb_sysopen - /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/b&zwnj;&#8203;in/gem&quot; when running the first command, but running the second still made &quot;pod install&quot; work. Thanks."}, {"owner": {"reputation": 121, "user_id": 914668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd092a47e87d56bca3812edf86846e4?s=128&d=identicon&r=PG", "display_name": "huygir", "link": "https://stackoverflow.com/users/914668/huygir"}, "edited": false, "score": 0, "creation_date": 1511187724, "post_id": 46576869, "comment_id": 81741391, "body": "Despite the &quot;warning&quot;, I&#39;m going to say thanks here anyway.  This was the only thing that worked for me.  Simply reinstalling cocoapods (several times) made no difference until I did both of these steps.  So - thanks!"}, {"owner": {"reputation": 792, "user_id": 5018607, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9b112f9c66a784685b3b9fe83ef41589?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Popiel", "link": "https://stackoverflow.com/users/5018607/paul-popiel"}, "edited": false, "score": 0, "creation_date": 1512271848, "post_id": 46576869, "comment_id": 82188345, "body": "I had to run the ruby update through the following command: <code>sudo gem update -n &#47;usr&#47;local&#47;bin --system</code>"}, {"owner": {"reputation": 2817, "user_id": 5969121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RwCYa.jpg?s=128&g=1", "display_name": "atereshkov", "link": "https://stackoverflow.com/users/5969121/atereshkov"}, "edited": false, "score": 0, "creation_date": 1530958918, "post_id": 46576869, "comment_id": 89424879, "body": "Worked for me (cocoapods 1.5.3)."}], "tags": [], "owner": {"reputation": 2274, "user_id": 3974465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ps12s.jpg?s=128&g=1", "display_name": "mital solanki", "link": "https://stackoverflow.com/users/3974465/mital-solanki"}, "is_accepted": false, "score": 115, "last_activity_date": 1507169774, "creation_date": 1507169774, "answer_id": 46576869, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46576869#46576869", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>After upgrading to macOS High Sierra, get it fixed with following commands:</p>\n\n<pre><code>sudo gem update --system\nsudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n\n<p>once it will be finished then write below command:</p>\n\n<pre><code>pod install\n</code></pre>\n\n<p>This solution has worked for me...!!!</p>\n"}, {"tags": [], "owner": {"reputation": 5745, "user_id": 1784529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PYc6h.jpg?s=128&g=1", "display_name": "Yun CHEN", "link": "https://stackoverflow.com/users/1784529/yun-chen"}, "is_accepted": false, "score": 6, "last_activity_date": 1507210559, "creation_date": 1507210559, "answer_id": 46587038, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46587038#46587038", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>This works for me:    </p>\n\n<pre><code>brew link --overwrite cocoapods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 655, "user_id": 1376352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afad807fc21784c9da543342c1ad3007?s=128&d=identicon&r=PG", "display_name": "Seb Fanals", "link": "https://stackoverflow.com/users/1376352/seb-fanals"}, "edited": false, "score": 0, "creation_date": 1520535755, "post_id": 46780053, "comment_id": 85366734, "body": "Finally ! Deleting old pod executable before installing cocoapods worked for me"}], "tags": [], "owner": {"reputation": 4395, "user_id": 828070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4e5332662e1bac9c65d8f960fcf40e0e?s=128&d=identicon&r=PG", "display_name": "djunod", "link": "https://stackoverflow.com/users/828070/djunod"}, "is_accepted": false, "score": 4, "last_activity_date": 1508193468, "creation_date": 1508193468, "answer_id": 46780053, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46780053#46780053", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>For me, I had to:</p>\n\n<pre><code>gem uninstall cocoapods\nwhich pod\n</code></pre>\n\n<p>It still showed it in the path, so I deleted that.  Made sure it still didn't show up.</p>\n\n<p>Then</p>\n\n<pre><code>gem install cocoapods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3772, "user_id": 6838730, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OsjUW.jpg?s=128&g=1", "display_name": "Mathieu VIALES", "link": "https://stackoverflow.com/users/6838730/mathieu-viales"}, "edited": false, "score": 0, "creation_date": 1508763942, "post_id": 46889399, "comment_id": 80727314, "body": "Please give a short explanation of what the posted code does so people that are new to this technology have a change to understand and re-use your answer :-)"}, {"owner": {"reputation": 1405, "user_id": 4488041, "user_type": "registered", "accept_rate": 53, "profile_image": "https://lh4.googleusercontent.com/-ueWzXuRLcv0/AAAAAAAAAAI/AAAAAAAAABE/sizg7GsU1_U/photo.jpg?sz=128", "display_name": "thibaut noah", "link": "https://stackoverflow.com/users/4488041/thibaut-noah"}, "edited": false, "score": 1, "creation_date": 1508764046, "post_id": 46889399, "comment_id": 80727377, "body": "People new to cocoapods should know how to read like the others."}, {"owner": {"reputation": 371, "user_id": 3390693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3018427df00f008de82bd8409510f6a5?s=128&d=identicon&r=PG", "display_name": "Eddie Eddie Eddie", "link": "https://stackoverflow.com/users/3390693/eddie-eddie-eddie"}, "reply_to_user": {"reputation": 3772, "user_id": 6838730, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OsjUW.jpg?s=128&g=1", "display_name": "Mathieu VIALES", "link": "https://stackoverflow.com/users/6838730/mathieu-viales"}, "edited": false, "score": 0, "creation_date": 1551468070, "post_id": 46889399, "comment_id": 96664793, "body": "@MathieuVIALES, the &quot;brew install ruby&quot; assumes you already have Homebrew packager (<a href=\"https://brew.sh\" rel=\"nofollow noreferrer\">brew.sh</a>).   That command then installs (or probably technically re-installs ruby since you actually need ruby to install Homebrew itself).    The next line &quot;gem install -n /usr/local/bin cocoapods&quot; reinstalls the CocoaPod program (more at <a href=\"https://cocoapods.org\" rel=\"nofollow noreferrer\">cocoapods.org</a>)."}], "tags": [], "owner": {"reputation": 2742, "user_id": 2122149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlCoJ.png?s=128&g=1", "display_name": "\u0110or\u0111e Nilovi\u0107", "link": "https://stackoverflow.com/users/2122149/%c4%90or%c4%91e-nilovi%c4%87"}, "is_accepted": false, "score": 10, "last_activity_date": 1508761732, "creation_date": 1508761732, "answer_id": 46889399, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/46889399#46889399", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>This solved my problem:</p>\n\n<pre><code>$ brew install ruby\n$ gem install -n /usr/local/bin cocoapods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8555, "user_id": 1402846, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/z5AzI.png?s=128&g=1", "display_name": "Pang", "link": "https://stackoverflow.com/users/1402846/pang"}, "edited": false, "score": 1, "creation_date": 1510380059, "post_id": 47143480, "comment_id": 81420249, "body": "This is just a repeat of <a href=\"https://stackoverflow.com/a/46520248\">this existing answer</a>, isn&#39;t it?"}, {"owner": {"reputation": 4415, "user_id": 311294, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2f64be871dfa588d1ec1b29021bcd887?s=128&d=identicon&r=PG", "display_name": "MiMo", "link": "https://stackoverflow.com/users/311294/mimo"}, "edited": false, "score": 0, "creation_date": 1521128633, "post_id": 47143480, "comment_id": 85609432, "body": "this fixed it for me"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8851874"}, "is_accepted": false, "score": 3, "last_activity_date": 1510000159, "last_edit_date": 1510000159, "creation_date": 1509993237, "answer_id": 47143480, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/47143480#47143480", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>I also encountered this error after installing <code>High Sierra</code>.</p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::FilePermissionError)\nYou don't have write permissions for the /usr/bin directory.\n</code></pre>\n\n<p>I used the following statement identified by Danh Huynh (see above) and It worked!</p>\n\n<pre><code>sudo gem install cocoapods -n /usr/local/bin\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 6922105, "user_type": "registered", "profile_image": "https://graph.facebook.com/1221725367907350/picture?type=large", "display_name": "Azaharuddin Mohammad", "link": "https://stackoverflow.com/users/6922105/azaharuddin-mohammad"}, "is_accepted": false, "score": 4, "last_activity_date": 1510813387, "creation_date": 1510813387, "answer_id": 47322949, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/47322949#47322949", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>Go to Terminal...</p>\n\n<p>step 1). sudo gem install cocoapods</p>\n\n<p>after completion of install cocoa pods then </p>\n\n<p>step 2).   pod repo update </p>\n\n<p>Completed </p>\n"}, {"tags": [], "owner": {"reputation": 6753, "user_id": 6534130, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tyv4_1dE26I/AAAAAAAAAAI/AAAAAAAAADQ/pnauzKDSdcc/photo.jpg?sz=128", "display_name": "Anton Eregin", "link": "https://stackoverflow.com/users/6534130/anton-eregin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511821644, "creation_date": 1511821644, "answer_id": 47520901, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/47520901#47520901", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>Had a same issue, resolution:</p>\n\n<ol>\n<li><p>Reinstall ruby</p>\n\n<p><code>brew install ruby</code></p></li>\n<li><p>Reinstall Cocoa Pods</p>\n\n<p><code>sudo gem install cocoapods</code></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 799, "user_id": 5444716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/83d8cc98299f1f4f722d9ddee4e35501?s=128&d=identicon&r=PG&f=1", "display_name": "Shobhit C", "link": "https://stackoverflow.com/users/5444716/shobhit-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1512305634, "creation_date": 1512305634, "answer_id": 47618554, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/47618554#47618554", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>This is a common problem when upgraded to Mac OSX High Sierra.</p>\n\n<p>Fix is simply installing Cocoapods (again):</p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1981, "user_id": 2226399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi21m.jpg?s=128&g=1", "display_name": "Harshal Wani", "link": "https://stackoverflow.com/users/2226399/harshal-wani"}, "is_accepted": false, "score": 9, "last_activity_date": 1514652936, "creation_date": 1514652936, "answer_id": 48035996, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/48035996#48035996", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>Simply run below command:</p>\n\n<pre><code>sudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 6861745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1feb2b9dd11bbf6d2ac2f3411929e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang Wang", "link": "https://stackoverflow.com/users/6861745/jiang-wang"}, "is_accepted": false, "score": 4, "last_activity_date": 1524206907, "creation_date": 1524206907, "answer_id": 49935648, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/49935648#49935648", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>MacOS High Sierra uses ruby 2.3 by default. After upgrading to it, some old ruby gems might not function properly. This problem occurs to me when I ran the bundle command (bundler is a ruby gem; it has a utility called bundle). </p>\n\n<p>So, to clarify, any old ruby gems (cocoapods, bundler, etc) that are trying to access ruby 2.0 will fail. </p>\n\n<p>The solution is to reinstall those old gems in a directory where you have permissions to write. </p>\n\n<p>For cocoapods, </p>\n\n<p><code>\nsudo gem install cocoapods -n /usr/local/bin\n</code></p>\n\n<p>will do the trick. </p>\n\n<p>You can optionally upgrade your gem system if you like <code>before</code> the install:</p>\n\n<p><code>\nsudo gem update --system\n</code></p>\n\n<p>This may prompt to you that the upgrading has failed. But actually, if you type:</p>\n\n<p><code>\ngem --version\n</code></p>\n\n<p>You can see that the upgrading has been successful. </p>\n\n<p>For bundler or other gems, try to do the same:</p>\n\n<p><code>\nsudo gem install gem-to-install(for example, bundler) -n /usr/local/bin\n</code></p>\n\n<p>About the <code>-n</code> option. Don't miss that. You can check the gem documentation if you want. </p>\n\n<p>So, the solution is all about <code>reinstalling the old gem</code> to a proper directory. </p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9742160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf5f352efb243fd621beae8a6537e25?s=128&d=identicon&r=PG&f=1", "display_name": "Sheshu Solo", "link": "https://stackoverflow.com/users/9742160/sheshu-solo"}, "is_accepted": false, "score": 5, "last_activity_date": 1527059008, "last_edit_date": 1527059008, "creation_date": 1527055639, "answer_id": 50480942, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/50480942#50480942", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>Cocoapods install process:</p>\n\n<ol>\n<li><p><code>sudo gem install cocoapods</code>\n(if you have any problem cocoapds, please update gem file)</p></li>\n<li><p><code>sudo gem update --system</code></p></li>\n<li><p><code>sudo gem install cocoapods</code></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 2508581, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/6ksck.jpg?s=128&g=1", "display_name": "ANUJ TAYAL", "link": "https://stackoverflow.com/users/2508581/anuj-tayal"}, "is_accepted": false, "score": 1, "last_activity_date": 1528980006, "creation_date": 1528980006, "answer_id": 50857788, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/50857788#50857788", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>Running this on terminal worked for me:</p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 252, "user_id": 717133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daeb0b3a4d03332acf1b30a112711e6?s=128&d=identicon&r=PG", "display_name": "Sonam Maniar", "link": "https://stackoverflow.com/users/717133/sonam-maniar"}, "is_accepted": false, "score": 0, "last_activity_date": 1571831975, "creation_date": 1571831975, "answer_id": 58522388, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/58522388#58522388", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>After using the below command on the terminal, I am able to install cocoa pods in my project. </p>\n\n<pre><code>sudo gem install cocoapods --source http://rubygems.org\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1575878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9287b4a9e9c97e530565b53a56c82297?s=128&d=identicon&r=PG", "display_name": "user1575878", "link": "https://stackoverflow.com/users/1575878/user1575878"}, "is_accepted": false, "score": 0, "last_activity_date": 1573981247, "creation_date": 1573981247, "answer_id": 58898949, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/58898949#58898949", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>I faced this issue also but fixed it in less dramatical way as various re-installation / updating. Just updated PATH environment variable to point out my existing (2.6.0) ruby version.</p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 4171374, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGHN47A6JsA/AAAAAAAAAAI/AAAAAAAACqw/UO2rhx4Mc30/photo.jpg?sz=128", "display_name": "Larry Ricker", "link": "https://stackoverflow.com/users/4171374/larry-ricker"}, "is_accepted": false, "score": 0, "last_activity_date": 1577883056, "creation_date": 1577883056, "answer_id": 59552673, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/59552673#59552673", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>I had the same issue after upgrading to Catalina.</p>\n\n<ol>\n<li><p>I updated ruby install by first installing brew and ruby using these directions.\n<a href=\"https://gorails.com/setup/osx/10.15-catalina\" rel=\"nofollow noreferrer\">https://gorails.com/setup/osx/10.15-catalina</a> (but only ruby, not rails, etc.)</p></li>\n<li><p>Then I reinstalled cocoapods using the instructions above.</p>\n\n<p>sudo gem install cocoapods</p></li>\n</ol>\n\n<p>Then after all that I still received the error above.\nThen I typed 'zsh' to spawn a new shell and pull in configuration settings in the ~/.zshrc file.\nAfter this 'pod update' command worked again.</p>\n"}, {"tags": [], "owner": {"reputation": 9443, "user_id": 3050403, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/YRND8.jpg?s=128&g=1", "display_name": "kelin", "link": "https://stackoverflow.com/users/3050403/kelin"}, "is_accepted": false, "score": 2, "last_activity_date": 1581365645, "creation_date": 1581365645, "answer_id": 60157729, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/60157729#60157729", "title": "CocoaPods not working in macOS High Sierra", "body": "<h2>Sudo-less .zhs-friendly solution</h2>\n\n<p>Modern macOS discourages using <code>sudo</code> and shifts from bash to zsh, so this answer may be useful if you are not going to fight with the fashion.</p>\n\n<ol>\n<li><p>Insure that <code>.zshenv</code> exists by <code>touch ~/.zshenv</code> command. Configure the RubyGems environment by adding following lines:</p>\n\n<pre><code>export GEM_HOME=$HOME/.gem\nexport PATH=$GEM_HOME/bin:$PATH\n</code></pre>\n\n<p>Don't forget to relaunch Terminal.</p></li>\n<li>Run <code>gem install cocoapods</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 4905776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/262157b94f6de3a9c50ea8058227568b?s=128&d=identicon&r=PG&f=1", "display_name": "siddhant", "link": "https://stackoverflow.com/users/4905776/siddhant"}, "is_accepted": false, "score": -1, "last_activity_date": 1583815278, "creation_date": 1583815278, "answer_id": 60611644, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/60611644#60611644", "title": "CocoaPods not working in macOS High Sierra", "body": "<pre><code>If cannot install new version cocoapods, example below:\n1. Please remove Command line tools\nsudo rm -rf /Library/Developer/CommandLineTools\n2. Install new Command line tools version\nsudo xcode-select --install\n3. after installing run below command\nopen /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "edited": false, "score": 0, "creation_date": 1607004118, "post_id": 65109546, "comment_id": 115139736, "body": "Please don&#39;t post only code as answer, but also provide an explanation what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes"}], "tags": [], "owner": {"reputation": 1, "user_id": 14749498, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/68c8abe01a43e18378e192ea4876d24e?s=128&d=identicon&r=PG", "display_name": "Kevin Lano", "link": "https://stackoverflow.com/users/14749498/kevin-lano"}, "is_accepted": false, "score": 0, "last_activity_date": 1606918615, "last_edit_date": 1606918615, "creation_date": 1606917435, "answer_id": 65109546, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra/65109546#65109546", "title": "CocoaPods not working in macOS High Sierra", "body": "<pre class=\"lang-sh prettyprint-override\"><code>    curl -sSL https://get.rvm.io | bash -s stable\n    sudo update gems\n    rvm install 2.6.0\n    sudo gem install cocoapods\n</code></pre>\n"}], "owner": {"reputation": 10550, "user_id": 481983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e85f565ac9c5d5c85b93819fcbc0da4c?s=128&d=identicon&r=PG", "display_name": "Maciej Swic", "link": "https://stackoverflow.com/users/481983/maciej-swic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57694, "favorite_count": 23, "accepted_answer_id": 44397500, "answer_count": 24, "score": 163, "last_activity_date": 1606918615, "creation_date": 1496769997, "last_edit_date": 1496773546, "question_id": 44396215, "link": "https://stackoverflow.com/questions/44396215/cocoapods-not-working-in-macos-high-sierra", "title": "CocoaPods not working in macOS High Sierra", "body": "<p>After upgrading to macOS High Sierra CocoaPods is not working. While it is tempting to move away from CocoaPods, it's unfortunately not in scope right now. The error message is below.</p>\n\n<pre><code>zsh: /Users/****/.gems/bin/pod: bad interpreter: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin: no such file or directory\n</code></pre>\n\n<p>I realize that the error stems from Ruby being upgraded but what is the easies fix? Trying to make CocoaPods use the new ruby version yields other errors.</p>\n\n<p>Edit: For now i installed <code>Ruby 2.0</code> with <code>rvm install 2.0.0</code> and <code>rvm use 2.0.0</code> and then reinstalled CocoaPods <code>sudo gem install cocoapods</code>. Seems to be working now.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "github"], "owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496774745, "creation_date": 1496769122, "last_edit_date": 1496774745, "question_id": 44395973, "link": "https://stackoverflow.com/questions/44395973/how-to-install-carrierwave-using-bundler", "title": "How to install CarrierWave using Bundler", "body": "<p>I am trying to install CarrierWave, defined in my gemfile as:</p>\n\n<pre><code>gem \"carrierwave\", github: \"carrierwaveuploader/carrierwave\"\n</code></pre>\n\n<p>but I get:</p>\n\n<pre><code>unable to connect to github.com:\\ngithub.com[0: 192.30.253.112]: errno=Connection refused\\ngithub.com[1: 192.30.253.113] \n</code></pre>\n\n<p>I tried using the command:</p>\n\n<pre><code>vagrant reload --provision\n</code></pre>\n\n<p>multiple times but the error remains. I checked IP in the address bar of the browser and it redirects me to github.com successfully.</p>\n\n<p>When I tried to clone it manually:</p>\n\n<pre><code>git clone git://github.com/carrierwaveuploader/carrierwave.git\n</code></pre>\n\n<p>this happened:</p>\n\n<pre><code>fatal: unable to connect to github.com:\ngithub.com[0: 192.30.253.112]: errno=Connection refused\n</code></pre>\n\n<p>And when I run:</p>\n\n<pre><code>git clone https://github.com/carrierwaveuploader/carrierwave.git\n</code></pre>\n\n<p>then it is successfully cloned.</p>\n\n<p>I think there is somehow linked to HTTPs.</p>\n\n<p>How can I resolve this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1496771778, "post_id": 44396473, "comment_id": 75793206, "body": "<code>each_with_object</code>, that&#39;s good! I&#39;m going to have to study up on that one. Hey, so the reason I was going with <code>split_line.split(&#39;=&#39;).tap do |line_parts|</code> was because I was trying to avoid the <code>items = line.split(&quot;=&quot;)</code> assignment. I don&#39;t have a good reason for why I was trying to avoid it. Do you have any views on pros/cons of assignment? Sorry if it&#39;s a dumb question."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1496772473, "post_id": 44396473, "comment_id": 75793593, "body": "@jvillian That&#39;s good too, and seems more idiomatic. In fact i don&#39;t like that kind of assignments either (also without good reason), so i generally try to avoid them; but in this case it kept the code 1 line shorter and, arguably, easier to read."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1496771951, "last_edit_date": 1496771951, "creation_date": 1496770849, "answer_id": 44396473, "question_id": 44395897, "link": "https://stackoverflow.com/questions/44395897/ruby-on-rails-split-string-into-hash-and-insert-it-to-a-json/44396473#44396473", "title": "Ruby on Rails: split string into hash and insert it to a json", "body": "<p>If the structure of your string is always the same, you could do something like this to get the <code>\"categories\"</code> hash:</p>\n\n<pre><code>str = \"Home/Personal Finance=37.00%=55,Computers/Internet/Web Design and Development=13.77%=48,News=8.64%=45,Arts/Television=5.23%=42,Arts/Music=2.99%=39,News/Current Events=2.66%=38,Society/Issues=2.47%=38,Computers/Internet/On the Web=2.46%=38,Business/Investing=1.76%=36,Society=1.70%=36\"\n\nstr.split(\",\").each_with_object({}) do |line, categories|\n  items = line.split(\"=\")\n  categories[items[0]] = [items[1].gsub(\"%\", \"\").to_f, items[2].to_i]\nend\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>{\n  \"Home/Personal Finance\"=&gt;[37.0, 55],\n  \"Computers/Internet/Web Design and Development\"=&gt;[13.77, 48],\n  \"News\"=&gt;[8.64, 45],\n  \"Arts/Television\"=&gt;[5.23, 42],\n  \"Arts/Music\"=&gt;[2.99, 39],\n  \"News/Current Events\"=&gt;[2.66, 38],\n  \"Society/Issues\"=&gt;[2.47, 38],\n  \"Computers/Internet/On the Web\"=&gt;[2.46, 38],\n  \"Business/Investing\"=&gt;[1.76, 36],\n  \"Society\"=&gt;[1.7, 36]\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1496771556, "post_id": 44396512, "comment_id": 75793073, "body": "Thanks (just learning too)! It <i>may</i> look cleaner, but your&#39;s get the exact output OP&#39;s asking for (i still got to clean the <code>%</code>s)."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1496771000, "creation_date": 1496771000, "answer_id": 44396512, "question_id": 44395897, "link": "https://stackoverflow.com/questions/44395897/ruby-on-rails-split-string-into-hash-and-insert-it-to-a-json/44396512#44396512", "title": "Ruby on Rails: split string into hash and insert it to a json", "body": "<p>Dang, Gerry, you're good!</p>\n\n<p>I was going to say: </p>\n\n<pre><code>  str.split(',').inject({}) do |to_return, split_line|\n    split_line.split('=').tap do |line_parts|\n      to_return[line_parts[0]] = [line_parts[1].gsub('%','').to_f,line_parts[2].to_i]\n    end\n    to_return\n  end\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  {\n    \"Home/Personal Finance\"=&gt;[37.0, 55], \n    \"Computers/Internet/Web Design and Development\"=&gt;[13.77, 48], \n    \"News\"=&gt;[8.64, 45], \n    \"Arts/Television\"=&gt;[5.23, 42], \n    \"Arts/Music\"=&gt;[2.99, 39], \n    \"News/Current Events\"=&gt;[2.66, 38], \n    \"Society/Issues\"=&gt;[2.47, 38], \n    \"Computers/Internet/On the Web\"=&gt;[2.46, 38], \n    \"Business/Investing\"=&gt;[1.76, 36], \n    \"Society\"=&gt;[1.7, 36]\n  } \n</code></pre>\n\n<p>But, as always, yours is cleaner. I'm still learning!</p>\n"}, {"comments": [{"owner": {"reputation": 2508, "user_id": 2056593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6361565de749323c14999412d23d2e?s=128&d=identicon&r=PG", "display_name": "muZk", "link": "https://stackoverflow.com/users/2056593/muzk"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1496773621, "post_id": 44396667, "comment_id": 75794286, "body": "No regex in my example! I&#39;m bad with them xD"}], "tags": [], "owner": {"reputation": 2508, "user_id": 2056593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6361565de749323c14999412d23d2e?s=128&d=identicon&r=PG", "display_name": "muZk", "link": "https://stackoverflow.com/users/2056593/muzk"}, "is_accepted": false, "score": 0, "last_activity_date": 1496771560, "creation_date": 1496771560, "answer_id": 44396667, "question_id": 44395897, "link": "https://stackoverflow.com/questions/44395897/ruby-on-rails-split-string-into-hash-and-insert-it-to-a-json/44396667#44396667", "title": "Ruby on Rails: split string into hash and insert it to a json", "body": "<p>You could use regex for this, or something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>str=\"Home/Personal Finance=37.00%=55,Computers/Internet/Web Design and Development=13.77%=48,News=8.64%=45,Arts/Television=5.23%=42,Arts/Music=2.99%=39,News/Current Events=2.66%=38,Society/Issues=2.47%=38,Computers/Internet/On the Web=2.46%=38,Business/Investing=1.76%=36,Society=1.70%=36\"\n\ncategories = {}\n\nstr = str.split(',').each do |category|\n\n    parts = category.split('=')\n\n    # Parts:\n    #   0: Home/Personal Finance\n    #   1: 37.00%\n    #   2: 55\n\n    key = parts[0]\n    first_number = Float(parts[1].gsub('%', ''))\n    last_number = parts[2].to_i\n\n    categories[key] = [first_number, last_number]\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1496782023, "creation_date": 1496782023, "answer_id": 44399561, "question_id": 44395897, "link": "https://stackoverflow.com/questions/44395897/ruby-on-rails-split-string-into-hash-and-insert-it-to-a-json/44399561#44399561", "title": "Ruby on Rails: split string into hash and insert it to a json", "body": "<p>Regex is a good option here. Assuming that your <em>category names</em> will never have <code>=</code>, <code>%</code> or <code>,</code> as a character, you could do:</p>\n\n<pre><code>categories_string = \"Home/Personal Finance=37.00%=55,Computers/Internet/Web Design and Development=13.77%=48,News=8.64%=45,Arts/Television=5.23%=42,Arts/Music=2.99%=39,News/Current Events=2.66%=38,Society/Issues=2.47%=38,Computers/Internet/On the Web=2.46%=38,Business/Investing=1.76%=36,Society=1.70%=36\"\n\ncategories_string.scan(/(.+?)=(.+?)%=(.+?),/).map do |x,y,z|\n  { x =&gt; [y.to_f, z.to_i] }\nend.reduce Hash.new, :merge\n\n#=&gt; {\"Home/Personal Finance\"=&gt;[37.0, 55], \"Computers/Internet/Web Design and Development\"=&gt;[13.77, 48], \"News\"=&gt;[8.64, 45], \"Arts/Television\"=&gt;[5.23, 42], \"Arts/Music\"=&gt;[2.99, 39], \"News/Current Events\"=&gt;[2.66, 38], \"Society/Issues\"=&gt;[2.47, 38], \"Computers/Internet/On the Web\"=&gt;[2.46, 38], \"Business/Investing\"=&gt;[1.76, 36]}\n</code></pre>\n"}], "owner": {"reputation": 8143, "user_id": 537943, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/910d6caf7e77a69b61fbf0b4e0d32532?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/537943/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1496782023, "creation_date": 1496768780, "question_id": 44395897, "link": "https://stackoverflow.com/questions/44395897/ruby-on-rails-split-string-into-hash-and-insert-it-to-a-json", "title": "Ruby on Rails: split string into hash and insert it to a json", "body": "<p>I have a model that looks something like:</p>\n\n<pre><code>  :created_at =&gt; Tue, 06 Jun 2017 15:34:32 UTC +00:00,\n  :updated_at =&gt; Tue, 06 Jun 2017 15:34:35 UTC +00:00,\n     :metrics =&gt; {\n                \"metric_a\" =&gt; 10756,\n                \"metric_b\" =&gt; \"\",\n                \"metric_c\" =&gt; 6.67267607666759\n},\n  :status =&gt; \"working\"\n</code></pre>\n\n<p>With the  <code>metrics</code> field as a json.</p>\n\n<p>And I want to split a string such as:</p>\n\n<pre><code>\"Home/Personal Finance=37.00%=55,Computers/Internet/Web Design and Development=13.77%=48,News=8.64%=45,Arts/Television=5.23%=42,Arts/Music=2.99%=39,News/Current Events=2.66%=38,Society/Issues=2.47%=38,Computers/Internet/On the Web=2.46%=38,Business/Investing=1.76%=36,Society=1.70%=36\"\n</code></pre>\n\n<p>To be named <code>categories</code> under the <code>metrics</code> field so that each category will hold two numbers, the percentage and the number that follows it.\nSo in the example above it would look like:</p>\n\n<pre><code>  :created_at =&gt; Tue, 06 Jun 2017 15:34:32 UTC +00:00,\n  :updated_at =&gt; Tue, 06 Jun 2017 15:34:35 UTC +00:00,\n     :metrics =&gt; {\n                \"metric_a\" =&gt; 10756,\n                \"metric_b\" =&gt; \"\",\n                \"metric_c\" =&gt; 6.67267607666759\n                \"categories\" =&gt; {\n            \"Home/Personal Finance\": [37.00,55],\n            \"Computers/Internet/Web Design and Development\": [13.77,48],\n            ...\n            }\n\n},\n  :status =&gt; \"working\"\n</code></pre>\n\n<p>Basically I want to save the two numbers for each category (maybe there's a better way to store them by the way?).</p>\n\n<p>Either way can split the string with <code>.split(\",\")</code> but what next?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1496768158, "post_id": 44395713, "comment_id": 75791271, "body": "Sure <code>def self.baz(bar); bar.dosomething; end</code> or <code>def self.baz(bar); self.new(bar).baz; end</code> is probably better as it re uses the same method."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 1, "creation_date": 1496768563, "post_id": 44395713, "comment_id": 75791511, "body": "This seems like an X/Y problem. What&#39;s the actual problem that this approach is intended to solve? Context matters."}, {"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "reply_to_user": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1496769143, "post_id": 44395713, "comment_id": 75791789, "body": "@CodeGnome it&#39;s just an exercise in scoring Scrabble plays but the exercise prompt calls for it to return a score if called as <code>Scrabble.new(word).score</code> or as <code>Scrabble.score(word)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1496769028, "post_id": 44395825, "comment_id": 75791731, "body": "Thanks for answer.  I need to be able to call both <code>Class.new(arg).method</code> as well as <code>Class.method(arg)</code>.  It looks like I just have to define <code>self.method(arg)</code> in addition to defining <code>method</code>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1496769121, "post_id": 44395825, "comment_id": 75791775, "body": "@MatthewStevenson Follow the repl.it link(s) to see it in action. It works exactly as you describe. (P.S. I swapped the order of the solutions in my answer, so the &quot;better&quot; one is at the top.)"}, {"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1496769277, "post_id": 44395825, "comment_id": 75791853, "body": "Yes, I did that.  Works perfectly."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1496862455, "post_id": 44395825, "comment_id": 75840210, "body": "@MatthewStevenson Glad to help. If my answer solved your problem, please consider marking it as Accepted."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1496769061, "last_edit_date": 1496769061, "creation_date": 1496768449, "answer_id": 44395825, "question_id": 44395713, "link": "https://stackoverflow.com/questions/44395713/ruby-class-newarg-method-equivalent-to-class-methodarg/44395825#44395825", "title": "ruby Class.new(arg).method equivalent to Class.method(arg)", "body": "<blockquote>\n  <p>Is it possible to reformat this such that calling either <code>Foo.new(bar).baz</code> is equal to <code>Foo.baz(bar)</code>?</p>\n</blockquote>\n\n<p>There are two different ways you can accomplish this. One looks like this:</p>\n\n<pre><code>def baz\n  self.class.baz(@arg)\nend\n\ndef self.baz(arg)\n  arg.dosomething\nend\n</code></pre>\n\n<p>This makes sense when the calculation doesn't depend on any other instance methods or attributes. See it on repl.it: <a href=\"https://repl.it/I8m6/1\" rel=\"nofollow noreferrer\">https://repl.it/I8m6/1</a></p>\n\n<p>Alternatively, you can make the class method create an instance by calling <code>new</code> and call the instance method:</p>\n\n<pre><code>def self.baz(arg)\n  new(arg).baz\nend\n</code></pre>\n\n<p>However, I think this is usually an antipattern: You're creating an instance just to call one method and then throw it away. I don't recommend this, but nevertheless you can see it on repl.it: <a href=\"https://repl.it/I8m6\" rel=\"nofollow noreferrer\">https://repl.it/I8m6</a></p>\n"}, {"comments": [{"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1496786061, "post_id": 44399447, "comment_id": 75800617, "body": "Please explain how this is an XY problem?"}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1496781577, "creation_date": 1496781577, "answer_id": 44399447, "question_id": 44395713, "link": "https://stackoverflow.com/questions/44395713/ruby-class-newarg-method-equivalent-to-class-methodarg/44399447#44399447", "title": "ruby Class.new(arg).method equivalent to Class.method(arg)", "body": "<h2>Call Class Method from Instance Method</h2>\n\n<blockquote>\n  <p>[I]t's just an exercise in scoring Scrabble plays but the exercise prompt calls for it to return a score if called as Scrabble.new(word).score or as Scrabble.score(word).</p>\n</blockquote>\n\n<p>The key to your X/Y problem is in your own <a href=\"https://stackoverflow.com/questions/44395713/ruby-class-newarg-method-equivalent-to-class-methodarg?noredirect=1#comment75791789_44395713\">comment</a>, quoted above. The easiest solution is to ensure the instance method always calls the class method. For example:</p>\n\n<pre><code>class Scrabble\n  def initialize word=nil\n    @word = word\n  end\n\n  def score\n    self.class.score @word\n  end\n\n  def self.score word\n    \"Class method: #{word.inspect}\"\n  end\nend\n\nScrabble.new('foo').score\n#=&gt; \"Class method: foo\"\n\nScrabble.score('foo')\n#=&gt; \"Class method: foo\"\n\nScrabble.new('foo').score == Scrabble.score('foo')\n#=&gt; true\n</code></pre>\n\n<p>There may be other ways to get the job done, but this certainly seems like a simple and clear approach that demonstrably works.</p>\n"}], "owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 44395825, "answer_count": 2, "score": 0, "last_activity_date": 1496781577, "creation_date": 1496768028, "last_edit_date": 1496772760, "question_id": 44395713, "link": "https://stackoverflow.com/questions/44395713/ruby-class-newarg-method-equivalent-to-class-methodarg", "title": "ruby Class.new(arg).method equivalent to Class.method(arg)", "body": "<p>I have a class that includes a method to return a calculation based on the instance of the class.  </p>\n\n<pre><code>class Foo\n  def initialize(arg)\n    @arg = arg\n  end\n\n  def baz\n    @arg.dosomething\n  end\nend\n</code></pre>\n\n<p>Is it possible to reformat this such that calling <code>Foo.new(bar).baz</code> is equal to <code>Foo.baz(bar)</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496767035, "post_id": 44395123, "comment_id": 75790622, "body": "Have you considered use <code>save</code> instead <code>create!</code>."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496767266, "post_id": 44395123, "comment_id": 75790768, "body": "@Sebasti&#225;nPalma I can use <code>save</code>, but how then I would do validation, please?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496767476, "post_id": 44395123, "comment_id": 75790871, "body": "It&#39;ll be very ugly to do it in the controller, but at least you can elaborate a logic to validate when such params are <code>nil</code>."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496767619, "post_id": 44395123, "comment_id": 75790953, "body": "@Sebasti&#225;nPalma I agree it is ugly to do it in Controller, however I need some workaround to keep moving. As I mentioned this part of functionality is not in the gem, so I need some solution. I believe this will not be the most heavy used part of my app."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 2, "creation_date": 1496767705, "post_id": 44395123, "comment_id": 75790994, "body": "You could re-open the class in the gem and add the validation, but I would consider the downsides to this."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1496767956, "post_id": 44395123, "comment_id": 75791145, "body": "@Kris Sure, editing the gem code was one option I considered, however I could appear in trouble if there are major changes in the gem&#39;s code."}], "answers": [{"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1496766804, "post_id": 44395357, "comment_id": 75790492, "body": "<i>I cannot do validation on model side - I have to do it in Controller</i>"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1496766809, "post_id": 44395357, "comment_id": 75790494, "body": "I know, but I can&#39;t do in Model as they are in Strongbolt gem. Is there any other way, please?"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1496766843, "post_id": 44395357, "comment_id": 75790517, "body": "ah--what type of form field is it?"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1496766867, "post_id": 44395357, "comment_id": 75790533, "body": "You could also add <code>required: true</code> to an erb form...it will prevent them from submitting via js."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1496767038, "post_id": 44395357, "comment_id": 75790626, "body": "It is check boxes - please, see above in Update. Yes, I know I can do it required in View, however I&#39;m not sure if this is enough, so I thought maybe I need to have some Controller validation instead."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1496767403, "post_id": 44395357, "comment_id": 75790836, "body": "I could write a method, however I stuck a bit on that validation part. Would it be something like <code>params[:user_ids].present?</code> Some example would help me a lot."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1496767697, "post_id": 44395357, "comment_id": 75790991, "body": "updated. the inverse (if present?) would work fine, too."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1496771347, "post_id": 44395357, "comment_id": 75792958, "body": "Thank you. I try to implement it, however my code in Update 2 above does not seem to be working now - it does not create anything. Can you check it, please?"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1496771597, "post_id": 44395357, "comment_id": 75793097, "body": "It doesn&#39;t create everything even when that condition returns true? Could you (1) post the params coming through in the stack trace? and (2) log something out in the unless <code>p &quot;inside unless&quot;</code> and in the else p <code>&quot;inside the else&quot;</code>. It&#39;s possible that the params aren&#39;t coming through as <code>params[:user_ids]</code> but are structured some other way."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1496771967, "post_id": 44395357, "comment_id": 75793316, "body": "log something out in each condition so we can see where it&#39;s failing. Should be more to that stack trace, too. It should either show you that the object got created or show you errors."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1496862228, "post_id": 44395357, "comment_id": 75840080, "body": "I think I got it working - see in the solution above."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1496863222, "post_id": 44395357, "comment_id": 75840664, "body": "that&#39;s exactly what I initially told you to do. glad you got it working."}], "tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 1, "last_activity_date": 1496767637, "last_edit_date": 1496767637, "creation_date": 1496766749, "answer_id": 44395357, "question_id": 44395123, "link": "https://stackoverflow.com/questions/44395123/rails-5-do-not-allow-create-action-if-params-are-empty/44395357#44395357", "title": "Rails 5: do not allow create action if params are empty", "body": "<p>You can just add a validation. Read about them here: <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/active_record_validations.html</a></p>\n\n<p><code>validates :name_of_attribute, presence: true</code></p>\n\n<p>You can also prevent submission via js. If you're using erb it would look something like this:</p>\n\n<p><code>&lt;%= f.text_field, :name_of_attribute, required: true %&gt;</code></p>\n\n<p>This will prevent submission if the field is empty.</p>\n\n<p>If you want to do it completely in the controller, write a method that checks presence of those fields you want and add a flash message instead of saving if those fields are blank. </p>\n\n<p>You could optionally disable submit with javascript if at least one of those fields isn't selected. (or both)</p>\n\n<p>Update on how to check for blank values. Blank will return true when an array is empty, empty string, nil values, etc. <a href=\"https://apidock.com/rails/Object/blank%3F\" rel=\"nofollow noreferrer\">https://apidock.com/rails/Object/blank%3F</a></p>\n\n<pre><code>unless params[:user_ids].blank? || params[:role_ids].blank?\n   # call to your create method\nelse \n   # show the user an error message\nend\n</code></pre>\n"}], "owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1693, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496862120, "creation_date": 1496765918, "last_edit_date": 1496862120, "question_id": 44395123, "link": "https://stackoverflow.com/questions/44395123/rails-5-do-not-allow-create-action-if-params-are-empty", "title": "Rails 5: do not allow create action if params are empty", "body": "<p>I have this Controller, where I can create User Group and add Users, Roles to it:</p>\n\n<pre><code>class Strongbolt::UserGroupsController &lt; ApplicationController\n# some code...\n\ndef create\n  user_roles #Helper method\n  respond_to do |format|\n  if @user_group = Strongbolt::UserGroup.create!(user_group_params)\n    format.json { head :no_content }\n    format.js { flash.now[:notice] = \"User group #{@user_group.name} created!\" }\n  else\n    format.json { render json: @user_group.errors.full_messages,\n                          status: :unprocessable_entity }\n    end\n  end\nend\n\n# some code...\n\ndef user_group_params\n  params.require(:strongbolt_user_group)\n        .permit(:name, :description, {user_ids: []}, {role_ids: []})\nend\n</code></pre>\n\n<p><strong>If <code>user_ids</code> and <code>role_ids</code> are empty, I need to do some error or stop Create action - I do not need User Group without at least one user and role. How do I do that, please?</strong></p>\n\n<p>Since this is related to <a href=\"https://github.com/605data/strongbolt\" rel=\"nofollow noreferrer\">Strongbolt gem</a> where related Models are inside it, I cannot do validation on model side - I have to do it in Controller. At the moment this functionality is not there, so I have to add that for my project.</p>\n\n<p>So far I've been trying to do something related tho this:</p>\n\n<p><code>redirect_to 'new' unless params[:user_ids].present?</code></p>\n\n<p>Update</p>\n\n<p>Here is part of my Form:</p>\n\n<pre><code>&lt;!-- Users tab --&gt;\n&lt;div class=\"tab-pane\" id=\"users\"&gt;\n  &lt;div class=\"i-checks\"&gt;\n    &lt;%= f.collection_check_boxes(:user_ids, @users_for_group, :id, :name) do |b| %&gt;\n      &lt;div class=\"col-sm-1\"&gt;\n        &lt;%= b.check_box %&gt;\n      &lt;/div&gt;\n        &lt;%= b.label %&gt;&lt;br&gt;&lt;br&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- Roles tab --&gt;\n  &lt;div class=\"tab-pane\" id=\"roles\"&gt;\n    &lt;div class=\"i-checks\"&gt;\n      &lt;%= f.collection_check_boxes(:role_ids, @roles, :id, :name) do |bb| %&gt;\n        &lt;div class=\"col-sm-1\"&gt;\n          &lt;%= bb.check_box %&gt;\n        &lt;/div&gt;\n          &lt;%= bb.label %&gt;&lt;br&gt;&lt;br&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p><strong>Update 2</strong></p>\n\n<pre><code>  def create\n    user_roles #Helper method\n    respond_to do |format|\n      unless params[:user_ids].blank? || params[:role_ids].blank?\n        @user_group = Strongbolt::UserGroup.create!(user_group_params)\n        format.json { head :no_content }\n        format.js { flash.now[:notice] = \"User group #{@user_group.name} created!\" }\n      else\n        format.json {\n          render json: @user_group.errors.full_messages, status: :unprocessable_entity\n        }\n        format.js { flash.now[:error] = \"User group was not created!\" }\n      end\n    end\n  end\n</code></pre>\n\n<p>In terminal I see this:</p>\n\n<pre><code>Started POST \"/en/strongbolt/user_groups\" for 10.0.2.2 at 2017-06-06 17:51:59 +0000\nProcessing by Strongbolt::UserGroupsController#create as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"strongbolt_user_group\"=&gt;{\"name\"=&gt;\"Test @Jun6 v2\", \"description\"=&gt;\"test\", \"user_ids\"=&gt;[\"\", \"5\"], \"role_ids\"=&gt;[\"\", \"2\"]}, \"commit\"=&gt;\"Create User Group\", \"locale\"=&gt;\"en\"}\n</code></pre>\n\n<p><strong>The Solution</strong></p>\n\n<p>First of all it appears <code>collection_check_boxes</code> by default include hidden value \" \", so I had to remove that with something like this:</p>\n\n<pre><code>&lt;%= f.collection_check_boxes(:role_ids, @roles, :id, :name, include_hidden: false) do |bb| %&gt;\n</code></pre>\n\n<p>If not to remove hidden field, Rails will not check empty params as basically params are there.</p>\n\n<p>Then I was able to implement this:</p>\n\n<pre><code>before_action :validate_presence, only: [:create]\n\ndef check_presence\n  params[:strongbolt_user_group][:user_ids].present? &amp;&amp;\n  params[:strongbolt_user_group][:role_ids].present?\nend\n\ndef validate_presence\n  if !check_presence\n    render json: { error: {\n        message: \"Bad Request, parameters missing.\",\n        status: 500 }\n    }\n  end\nend\n</code></pre>\n\n<p>I had to include Model name to check params presence, otherwise it did not work. Now I can implement JS part where I show some messages that something can't be blank, etc., but that is different story. Now my Controller will not accept empty params in this special case with Strongbolt gem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "codeship", "railsapps"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 8060859, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UsOPo.jpg?s=128&g=1", "display_name": "Curtis Parfitt-Ford", "link": "https://stackoverflow.com/users/8060859/curtis-parfitt-ford"}, "is_accepted": true, "score": 0, "last_activity_date": 1497790387, "creation_date": 1497790387, "answer_id": 44615184, "question_id": 44395025, "link": "https://stackoverflow.com/questions/44395025/codeship-breaks-on-rails-devise-roles-tests/44615184#44615184", "title": "Codeship breaks on rails-devise-roles tests", "body": "<p>Reached out to Codeship support, who were very helpful, and told me that this was an issue with both Firefox and geckodriver for Firefox needing to be updated on the Codeship VM. If anyone else also has this issue, the code that makes it work is below:</p>\n\n<pre><code>export FIREFOX_VERSION=53.0.3\ncurl -sSL https://raw.githubusercontent.com/codeship/scripts/master/packages/firefox.sh | bash -s\nexport GECKODRIVER_VERSION=0.17.0\nsource /dev/stdin &lt;&lt;&lt; \"$(curl -sSL https://raw.githubusercontent.com/codeship/scripts/master/languages/rust.sh)\"\ncurl -sSL https://raw.githubusercontent.com/codeship/scripts/master/packages/geckodriver.sh | bash -s\n</code></pre>\n\n<p>Huge props to Joe Siewert from the Codeship support team for getting this fix out to me!</p>\n"}], "owner": {"reputation": 106, "user_id": 8060859, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UsOPo.jpg?s=128&g=1", "display_name": "Curtis Parfitt-Ford", "link": "https://stackoverflow.com/users/8060859/curtis-parfitt-ford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 44615184, "answer_count": 1, "score": 2, "last_activity_date": 1497790387, "creation_date": 1496765578, "question_id": 44395025, "link": "https://stackoverflow.com/questions/44395025/codeship-breaks-on-rails-devise-roles-tests", "title": "Codeship breaks on rails-devise-roles tests", "body": "<p>The <a href=\"https://github.com/RailsApps/rails-devise-roles\" rel=\"nofollow noreferrer\" title=\"rails-devise-roles\">rails-devise-roles</a> app's Selenium tests for <code>user-delete-spec.rb</code> and <code>user-edit-spec.rb</code> seems to break when running in Codeship's CI. The rspec works fine on my local machine, but breaks in Codeship.</p>\n\n<p>The rspec output I get is as follows:</p>\n\n<pre><code>Failures:\n\n1) User delete user can delete own account\nFailure/Error: visit edit_user_registration_path(user)\n\nSelenium::WebDriver::Error::ServerError:\n  status code 500\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/response.rb:72:in `assert_ok'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/response.rb:32:in `initialize'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/common.rb:83:in `new'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/common.rb:83:in `create_response'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/default.rb:107:in `request'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/common.rb:61:in `call'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/w3c_bridge.rb:640:in `execute'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/w3c_bridge.rb:114:in `create_session'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/w3c_bridge.rb:76:in `initialize'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/firefox/w3c_bridge.rb:45:in `initialize'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/driver.rb:52:in `new'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/driver.rb:52:in `for'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver.rb:88:in `for'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/capybara-2.14.0/lib/capybara/selenium/driver.rb:22:in `browser'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/capybara-2.14.0/lib/capybara/selenium/driver.rb:62:in `visit'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/capybara-2.14.0/lib/capybara/session.rb:269:in `visit'\n# /home/rof/cache/bundler/ruby/2.3.0/gems/capybara-2.14.0/lib/capybara/dsl.rb:50:in `block (2 levels) in &lt;module:DSL&gt;'\n# ./spec/features/users/user_delete_spec.rb:21:in `block (2 levels) in &lt;top (required)&gt;'\n\n2) User edit user changes email address\nFailure/Error: visit edit_user_registration_path(user)\n\nSelenium::WebDriver::Error::ServerError:\n  status code 500\n# [removed stack trace]\n\n3) User edit user cannot cannot edit another user's profile\nFailure/Error: visit edit_user_registration_path(other)\n\nSelenium::WebDriver::Error::ServerError:\n  status code 500\n# [removed stack trace]\n\nFinished in 23.21 seconds (files took 2.99 seconds to load)\n31 examples, 3 failures\n\nFailed examples:\n\nrspec ./spec/features/users/user_delete_spec.rb:18 # User delete user can delete own account\nrspec ./spec/features/users/user_edit_spec.rb:18 # User edit user changes email address\nrspec ./spec/features/users/user_edit_spec.rb:45 # User edit user cannot cannot edit another user's profile\n</code></pre>\n\n<p>This is an example of one of the failing scenarios:</p>\n\n<pre><code>scenario 'user can delete own account' do\n    # skip 'skip a slow test' [removed from the original file]\n    user = FactoryGirl.create(:user)\n    login_as(user, :scope =&gt; :user)\n    visit edit_user_registration_path(user)\n    click_button 'Cancel my account'\n    page.driver.browser.switch_to.alert.accept\n    expect(page).to have_content I18n.t 'devise.registrations.destroyed'\nend\n</code></pre>\n\n<p>What's going wrong here, and how can I modify this so the test passes? (To clarify, there is no error 500 on my local deployment on any of these pages, nor on the Heroku live deployment of my app which is based off rails-devise-roles.)</p>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1496764892, "post_id": 44394694, "comment_id": 75789245, "body": "What does &quot;fair&quot; mean? Can you give an example of a &quot;fair ordering&quot;? Is it fair to say that your requirements are specific to <b>this array</b>? Because I don&#39;t know what behaviour you would expect to see <b>in general</b>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496765282, "post_id": 44394694, "comment_id": 75789501, "body": "For example... If your (unusual) requirement is actually &quot;I want to get 4 arrays of pairs of elements, with no duplicates&quot; then you could do: <code>a.uniq.sample(8).each_slice(2).to_a</code>"}, {"owner": {"reputation": 596, "user_id": 2060993, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4475c1d25ab35662f8f1462ac0ecc8f2?s=128&d=identicon&r=PG", "display_name": "Xizam", "link": "https://stackoverflow.com/users/2060993/xizam"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496765552, "post_id": 44394694, "comment_id": 75789686, "body": "I&#39;ve added some more information to my question, hopefully it is more clear like this."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1496765705, "post_id": 44394694, "comment_id": 75789769, "body": "Please edit your question to include the code you&#39;ve written so far."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496765733, "post_id": 44394694, "comment_id": 75789785, "body": "So you want this method to be non-deterministic? You will get different results each time, and sometimes even a different <i>number</i> of results."}, {"owner": {"reputation": 596, "user_id": 2060993, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4475c1d25ab35662f8f1462ac0ecc8f2?s=128&d=identicon&r=PG", "display_name": "Xizam", "link": "https://stackoverflow.com/users/2060993/xizam"}, "edited": false, "score": 0, "creation_date": 1496765780, "post_id": 44394694, "comment_id": 75789814, "body": "Hold on, I&#39;ll add more of the code so it is hopefully more clear what I am trying to do."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1496767451, "post_id": 44394694, "comment_id": 75790857, "body": "You could add a hash to count the number of times a student has already been picked. Then, instead of always starting with the first available student, you start with the one (ones) that was (were) picked least often."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496776094, "post_id": 44394694, "comment_id": 75795703, "body": "Sorry, I still don&#39;t understand. Your code is incomplete, and you&#39;ve only given an example of what a &quot;fair order&quot; <i>isn&#39;t</i>, rather than what it <i>is</i>. Could you not just randomise the result? (Although that&#39;s really not what I&#39;d call an &quot;ordering&quot;.)"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1496777194, "post_id": 44394694, "comment_id": 75796325, "body": "Is this a good analogy? 9 chessplayers, each play all others once, nine rounds in total, every player having a no game round once."}, {"owner": {"reputation": 596, "user_id": 2060993, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4475c1d25ab35662f8f1462ac0ecc8f2?s=128&d=identicon&r=PG", "display_name": "Xizam", "link": "https://stackoverflow.com/users/2060993/xizam"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1496777527, "post_id": 44394694, "comment_id": 75796520, "body": "@steenslag Yes, that&#39;s right."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1496780504, "post_id": 44394694, "comment_id": 75798157, "body": "@Xizam Then that is called a &quot;round-robin&quot; tournament. Wikipedia gives some algorithms."}, {"owner": {"reputation": 596, "user_id": 2060993, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4475c1d25ab35662f8f1462ac0ecc8f2?s=128&d=identicon&r=PG", "display_name": "Xizam", "link": "https://stackoverflow.com/users/2060993/xizam"}, "edited": false, "score": 0, "creation_date": 1496780905, "post_id": 44394694, "comment_id": 75798382, "body": "Excellent, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 2060993, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4475c1d25ab35662f8f1462ac0ecc8f2?s=128&d=identicon&r=PG", "display_name": "Xizam", "link": "https://stackoverflow.com/users/2060993/xizam"}, "edited": false, "score": 0, "creation_date": 1496828397, "post_id": 44402631, "comment_id": 75816726, "body": "This does not work with the current system. With 9 students and 1 bye the algorithm will get stuck in the second iteration, where student 9 and the bye will be the only ones left for the second time in a row."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 596, "user_id": 2060993, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4475c1d25ab35662f8f1462ac0ecc8f2?s=128&d=identicon&r=PG", "display_name": "Xizam", "link": "https://stackoverflow.com/users/2060993/xizam"}, "edited": false, "score": 0, "creation_date": 1496866904, "post_id": 44402631, "comment_id": 75842706, "body": "In this example you have to pull 5 pairs and discard the pair with the :bye to make it work."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1496872965, "last_edit_date": 1496872965, "creation_date": 1496803287, "answer_id": 44402631, "question_id": 44394694, "link": "https://stackoverflow.com/questions/44394694/ordering-a-array-of-arrays-in-a-fair-manner/44402631#44402631", "title": "Ordering a array of arrays in a &#39;fair&#39; manner", "body": "<p>For odd numbers, just add another dummy number like <code>0</code> or <code>:bye</code>:</p>\n\n<pre><code>students = [1,2,3,4,5,6,7,8,9,:bye]\n</code></pre>\n\n<p>Now when you pull n%2 pairs, at least one will be paired with a :bye. That is the odd student out in that pairing. Each student will have an equal number of :bye rounds.</p>\n\n<p>Edit: I'm assuming you are pulling 5 pairs in this example and discarding the pair with the :bye to ensure it doesn't repeat.</p>\n"}], "owner": {"reputation": 596, "user_id": 2060993, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4475c1d25ab35662f8f1462ac0ecc8f2?s=128&d=identicon&r=PG", "display_name": "Xizam", "link": "https://stackoverflow.com/users/2060993/xizam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496872965, "creation_date": 1496764495, "last_edit_date": 1496777418, "question_id": 44394694, "link": "https://stackoverflow.com/questions/44394694/ordering-a-array-of-arrays-in-a-fair-manner", "title": "Ordering a array of arrays in a &#39;fair&#39; manner", "body": "<p>I have an array of arrays created with N=9</p>\n\n<pre><code>a = [1,2,3,4,5,6,7,8,9]\nb = a.combination(2).to_a\n</code></pre>\n\n<p>I would like to take <code>N%2</code> of the sub-arrays out at a time with no number occurring twice, for example the first time this would be:</p>\n\n<pre><code>[[1,2],[3,4],[5,6],[7,8]]\n</code></pre>\n\n<p>This means 9 was not picked. A second time I would take out </p>\n\n<pre><code>[[1,3],[2,4],[5,7],[6,8]]\n</code></pre>\n\n<p>Again 9 not being picked.\nEventually I would be left with</p>\n\n<pre><code> [[1,9],[2,9],[3,9],[4,9],[5,9],[6, 9],[7, 9],[8, 9]]\n</code></pre>\n\n<p>which means I can no longer pick 4 arrays with no duplicate numbers.</p>\n\n<p>How can I order my array so that each number is left out only once instead of 9 all the time?</p>\n\n<p>The use case is as follows:</p>\n\n<pre><code>students = [1,2,3,4,5,6,7,8,9]\navailable_combinations = a.combination(2).to_a\n\ndef make_pairs\n available_students = students\n while available_students.length &gt; 1 do\n  student_combination = find_sub_array(available_combinations, available_students.first, available_students)\n   available_combinations.delete(student_combination)\n   available_students -= student_combination\n end\nend\n\n def find_sub_array(available_combinations, student, available_students)\n available_combinations.each do |subarray|\n  if subarray.include?(student) &amp;&amp; (subarray - available_students).empty?\n    return subarray\n  end\n end\nend\n</code></pre>\n\n<p>I would like to run make_pairs multiple times, until available_combinations no longer has enough pairs left.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 0, "last_activity_date": 1496765633, "last_edit_date": 1496765633, "creation_date": 1496765213, "answer_id": 44394914, "question_id": 44394557, "link": "https://stackoverflow.com/questions/44394557/ruby-arrayselect-with-an-options-hash-to-match-on/44394914#44394914", "title": "Ruby Array#select with an options hash to match on", "body": "<p>You may be trying to over complicate this. How about this </p>\n\n<pre><code>my_array = [\n  {foo: 'a', bar: 'b', baz: 'c'},\n  {foo: 1, bar: 2, baz: 3},\n  {foo: 'A', bar: 'B', baz: 'C'},\n  {foo: 11, bar: 12, baz: 13}\n]\nfinder = {foo: 'a', bar: 'b'} \nmy_array.select {|h| h.values_at(*finder.keys) == finder.values }\n#=&gt; [{:foo=&gt;\"a\", :bar=&gt;\"b\", :baz=&gt;\"c\"}]\n</code></pre>\n\n<p><code>Hash#values_at</code> uses the given keys to return the appropriate values which in your case should match the values for those keys in the \"finder\" <code>Hash</code>.</p>\n\n<p>To make it work explicitly the way you explained we can define a singleton method for <code>my_array</code> as such: </p>\n\n<pre><code>my_array.define_singleton_method(:search_by) do |opts|\n  self.select {|h| h.values_at(*opts.keys) == opts.values}\nend\n\nmy_array.search_by(foo: 'a', bar: 'b') \n#=&gt; [{:foo=&gt;\"a\", :bar=&gt;\"b\", :baz=&gt;\"c\"}]\nmy_array.search_by(foobar: 'n')\n#=&gt; []\nmy_array &lt;&lt; {foo: 11,bar: 15,baz: 'c'}\nmy_array.search_by(foo: 11)\n#=&gt;[{:foo=&gt;11, :bar=&gt;12, :baz=&gt;13}, {:foo=&gt;11, :bar=&gt;15, :baz=&gt;\"c\"}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496775468, "post_id": 44395785, "comment_id": 75795350, "body": "You made my day! I was about to suggest <code>my_array.select { |h| h.merge(finder) == h }</code>, but what you have is perfect."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1496768314, "creation_date": 1496768314, "answer_id": 44395785, "question_id": 44394557, "link": "https://stackoverflow.com/questions/44394557/ruby-arrayselect-with-an-options-hash-to-match-on/44395785#44395785", "title": "Ruby Array#select with an options hash to match on", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.1/Hash.html#method-i-3E-3D\" rel=\"nofollow noreferrer\"><code>Hash#&gt;=</code></a>:</p>\n\n<blockquote>\n  <p>Returns <code>true</code> if <em>other</em> is subset of <em>hash</em> or equals to <em>hash</em>.</p>\n</blockquote>\n\n<pre><code>my_array.select { |h| h &gt;= finder }\n#=&gt; [{:foo=&gt;\"a\", :bar=&gt;\"b\", :baz=&gt;\"c\"}]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4901826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa780020a674c11dc7266e6c659c22ea?s=128&d=identicon&r=PG&f=1", "display_name": "save_ferris", "link": "https://stackoverflow.com/users/4901826/save-ferris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 44394914, "answer_count": 2, "score": 0, "last_activity_date": 1496768314, "creation_date": 1496764114, "last_edit_date": 1496765182, "question_id": 44394557, "link": "https://stackoverflow.com/questions/44394557/ruby-arrayselect-with-an-options-hash-to-match-on", "title": "Ruby Array#select with an options hash to match on", "body": "<p>I have an array of hashes that I would like to search on, and I would like to write a method that takes an options hash as an argument and return all elements in the array that match against all key/value pairs dynamically, and I'm having trouble figuring it out.</p>\n\n<pre><code>my_array = [\n  {\n    foo: 'a',\n    bar: 'b',\n    baz: 'c'\n  },\n  {\n    foo: 1,\n    bar: 2,\n    baz: 3\n  },\n  {\n    foo: 'A',\n    bar: 'B',\n    baz: 'C'\n  },\n  {\n    foo: 11,\n    bar: 12,\n    baz: 13\n  }\n]\n\n# takes an opts hash and returns all elements for which all\n# all key/value pairs match\ndef search_by(opts)\n  opts.each do |k, v|\n    self.select { |f| f[k] == f[v] }\n  end\nend\n\nmy_array.search_by(foo: 'a', bar: 'b')\n# should return { foo: 'a', bar: 'b', baz: 'c' }\n</code></pre>\n\n<p>I've tried a couple different ways to dynamically compose a block to pass to #select based on similar questions on SO, but I haven't had much luck and haven't been able to find this exact use case.  What's the best way to dynamically #select with multiple conditions while only having to execute #select once? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1496769956, "post_id": 44394485, "comment_id": 75792207, "body": "they make html parsers that might be more useful to you like <code>nokogiri</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496775126, "post_id": 44394485, "comment_id": 75795169, "body": "This is an &quot;<a href=\"https://meta.stackexchange.com/q/66377/153968\">XY Problem</a>&quot;. You&#39;re asking how to accomplish something after deciding how to do it, but it&#39;s the wrong way to go. This is a problem for a parser, like Nokogiri."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496776345, "post_id": 44394485, "comment_id": 75795858, "body": "Whenever you give an example please show your desired result as a (valid) Ruby object. Might there be lines other than tags after your last <code>&lt;&#47;public&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1496776274, "last_edit_date": 1496776274, "creation_date": 1496775424, "answer_id": 44397803, "question_id": 44394485, "link": "https://stackoverflow.com/questions/44394485/ruby-split-lines-using-selective-tags-that-appear-multiple-times-in-file-in-any/44397803#44397803", "title": "ruby Split lines using selective tags that appear multiple times in file in any order", "body": "<p>Consider this:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(&lt;&lt;EOT)\n&lt;root&gt;\nthis is test line 1 \n&lt;public&gt;\nam inside of public\n&lt;/public&gt;\n&lt;public&gt;\nam inside of another public\n&lt;/public&gt;\n&lt;/root&gt;\nEOT\n\ntext_inside_public_tags = doc.search('public').map(&amp;:text)\n# =&gt; [\"\\n\" +\n#    \"am inside of public\\n\", \"\\n\" +\n#    \"am inside of another public\\n\"]\n\ndoc.search('public').each(&amp;:remove)\n\ntext_outside_public_tags = doc.at('root').text\n# =&gt; \"\\n\" +\n#    \"this is test line 1 \\n\" +\n#    \"\\n\" +\n#    \"\\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1496807180, "post_id": 44401004, "comment_id": 75805720, "body": "It worked with Ruby V2.2. Is there any other method available on Ruby v1.9.3 instead if slice_when to make it work?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1496815904, "post_id": 44401004, "comment_id": 75808602, "body": "I provided an alternative to the use of <code>slice_when</code> that should work will all versions of Ruby. If you use Rails you really need to learn Nokigiri. As you can see from @theTinMan&#39;s answer it&#39;s much better suited to this type of problem than a pure Ruby solution. Why didn&#39;t I give a Nokigiri answer? I don&#39;t know it (or Rails), and even if I did, Sn-man had already posted his answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1496815362, "last_edit_date": 1496815362, "creation_date": 1496790201, "answer_id": 44401004, "question_id": 44394485, "link": "https://stackoverflow.com/questions/44394485/ruby-split-lines-using-selective-tags-that-appear-multiple-times-in-file-in-any/44401004#44401004", "title": "ruby Split lines using selective tags that appear multiple times in file in any order", "body": "<p>You can use Ruby's <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow noreferrer\">flip-flop operator</a> here.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def dissect(str)\n  arr = str.lines.map(&amp;:strip)\n  grp, ungrp = [], []\n  arr.each { |line| line=='&lt;public&gt;'..line=='&lt;/public&gt;' ? (grp &lt;&lt; line) : ungrp &lt;&lt; line }\n  [grp.slice_when { |s,t| s == '&lt;/public&gt;' &amp;&amp; t == '&lt;public&gt;' }.\n       map { |a| a[1..-2] },\n   ungrp]\nend \n</code></pre>\n\n<p>The last statement of the method, which constructs the array returned by the method, could be replaced with the following.</p>\n\n<pre><code>b = grp.count('&lt;public&gt;').times.with_object([]) do |_,a|\n  ndx = grp.index('&lt;/public&gt;')\n  a &lt;&lt; grp[1..ndx-1]\n  grp = grp[ndx+1..-1] if ndx &lt; grp.size-1\nend\n[b, ungrp]\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>str =&lt;&lt;-EOS\nthis is test line 1 \nthis is testing purpose \n&lt;public&gt;\nam inside of public\ndoing lot of stuffs and printing result here\n&lt;/public&gt;\nlet's stick another line here\n&lt;public&gt;\nam inside of another public\ndoing another set of stuffs and printing here\n&lt;/public&gt;\nand another line here\nEOS\n</code></pre>\n\n<p></p>\n\n<pre><code>grouped, ungrouped = dissect(str)\n  #=&gt; [\n  #     [ [\"am inside of public\",\n  #        \"doing lot of stuffs and printing result here\"],\n  #       [\"am inside of another public\",\n  #        \"doing another set of stuffs and printing here\"]\n  #     ],\n  #     [\n  #       \"this is test line 1\",\n  #       \"this is testing purpose\",\n  #       \"let's stick another line here\",\n  #       \"and another line here\"]\n  #     ]\n  #   ]\ngrouped\n  #=&gt; [ [\"am inside of public\",\n  #      \"doing lot of stuffs and printing result here\"],\n  #     [\"am inside of another public\",\n  #      \"doing another set of stuffs and printing here\"]\n  #   ]\nungrouped\n  #=&gt; [\"this is test line 1\",\n  #    \"this is testing purpose\",\n  #    \"let's stick another line here\",\n  #    \"and another line here\"]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For the example above the steps are as follows.</p>\n\n<pre><code>arr = str.lines.map(&amp;:strip)\n  #=&gt; [\"this is test line 1\", \"this is testing purpose\", \"&lt;public&gt;\",\n  #    \"am inside of public\", \"doing lot of stuffs and printing result here\",\n  #    \"&lt;/public&gt;\", \"let's stick another line here\", \"&lt;public&gt;\",\n  #    \"am inside of another public\", \"doing another set of stuffs and printing here\",\n  #    \"&lt;/public&gt;\", \"and another line here\"]\n\nungrp, grp = [], []\narr.each { |line| line=='&lt;public&gt;'..line=='&lt;/public&gt;' ? (grp &lt;&lt; line) : ungrp &lt;&lt; line }\n</code></pre>\n\n<p>The flip-flop returns <code>false</code> until <code>line=='&lt;public&gt;'</code> is <code>true</code>. It then returns <code>true</code> and continues to return <code>true</code> until <em>after</em> <code>line=='&lt;/public&gt;'</code> is <code>true</code>. It then returns <code>false</code> until it once again encounters a line for which <code>line=='&lt;public&gt;'</code> is <code>true</code>, and so on.</p>\n\n<pre><code>ungrp\n  #=&gt; &lt;returns the value of 'ungrouped' in the example&gt;\ngrp\n  #=&gt; [\"&lt;public&gt;\",\n  #    \"am inside of public\",\n  #    \"doing lot of stuffs and printing result here\",\n  #    \"&lt;/public&gt;\",\n  #    \"&lt;public&gt;\",\n  #    \"am inside of another public\",\n  #    \"doing another set of stuffs and printing here\",\n  #    \"&lt;/public&gt;\"]\nenum = grp.slice_when { |s,t| s == '&lt;/public&gt;' &amp;&amp; t == '&lt;public&gt;' }\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x00000\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-slice_when\" rel=\"nofollow noreferrer\">Enumerable#slice_when</a>, which made its debut in Ruby v2.2.</p>\n\n<p>We can see the elements that will be generated by this enumerator by converting it to an array.</p>\n\n<pre><code>enum.to_a\n  #=&gt; [[\"&lt;public&gt;\", \"am inside of public\",\n  #     \"doing lot of stuffs and printing result here\", \"&lt;/public&gt;\"],\n  #    [\"&lt;public&gt;\", \"am inside of another public\",\n  #     \"doing another set of stuffs and printing here\", \"&lt;/public&gt;\"]]\n</code></pre>\n\n<p>Lastly,</p>\n\n<pre><code>enum.map { |a| a[1..-2] }\n  #=&gt; &lt;returns the array 'grouped' in the example&gt;\n</code></pre>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 44401004, "answer_count": 2, "score": 0, "last_activity_date": 1496815362, "creation_date": 1496763969, "question_id": 44394485, "link": "https://stackoverflow.com/questions/44394485/ruby-split-lines-using-selective-tags-that-appear-multiple-times-in-file-in-any", "title": "ruby Split lines using selective tags that appear multiple times in file in any order", "body": "<p>I have a file that has the contents as below:</p>\n\n<pre><code>this is test line 1 \nthis is testing purpose \n&lt;public&gt;\nam inside of public\ndoing lot of stuffs and priting result here\n&lt;/public&gt;\n&lt;public&gt;\nam inside of another public\ndoing another set of stuffs and priting here\n&lt;/public&gt;\n</code></pre>\n\n<p>I want to split this file into three different sections:</p>\n\n<ol>\n<li>The lines which are not inside any of the   section  </li>\n<li>The lines which are inside of first   section </li>\n<li>The lines which are inside of second   section</li>\n</ol>\n\n<p>I tried with <code>take_while</code> and <code>drop_while</code>,</p>\n\n<pre><code>File.open(filename).each_line.take_while do |l|\n  !l.include?('&lt;/public&gt;')\nend.drop_while do |l|\n  !l.include?('&lt;public&gt;')\nend.drop(1))\n</code></pre>\n\n<p>but it extracts only the first <code>&lt;public&gt;</code>...<code>&lt;/public&gt;</code> section.</p>\n\n<p>In some situation the order might change, like the public section will come first and the remaining content will come at last or middle. If the content order is same as above template then I can follow the below mothod </p>\n\n<pre><code>File.read(filename).split(/&lt;\\/?public&gt;/)\n                   .map(&amp;:strip)\n                   .reject(&amp;:empty?)\n</code></pre>\n\n<p>which I got answer from <a href=\"https://stackoverflow.com/questions/44389768/split-lines-using-tags-that-appear-multiple-times-in-file\">Split lines using tags that appear multiple times in file</a>.</p>\n\n<p>But looking some generic method where I can handle the data if the order is in anyway.</p>\n\n<p>I am looking for a better solution. Any suggestion would be appreciated.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs", "react-rails"], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "is_accepted": true, "score": 0, "last_activity_date": 1496762094, "creation_date": 1496762094, "answer_id": 44393804, "question_id": 44393803, "link": "https://stackoverflow.com/questions/44393803/multiple-uncaught-errors-using-the-react-rails-gem/44393804#44393804", "title": "Multiple Uncaught Errors Using the react-rails Gem", "body": "<p>The third potential answer, or removing the <code>//= require react-server</code> from <code>./app/assets/javascripts/server_rendering.js</code>, was a step in the right direction.</p>\n\n<p>Removing this line doesn't yield a new issue, it just reveals another error you had the entire time.  <code>react_server</code> doesn't define the <code>$</code> variable for AJAX calls, the jQuery gem does.</p>\n\n<p>Found <a href=\"https://rubygems.org/gems/jquery-rails\" rel=\"nofollow noreferrer\">here</a>.  I am confident in this solution because the error:</p>\n\n<blockquote>\n  <p>Uncaught ReferenceError: $ is not defined</p>\n</blockquote>\n\n<p>is a jQuery issue, as the AJAX calls you are probably making take a form referenced in their official doc. <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Therefore, after running <code>gem install jquery-rails</code> in your shell, your <code>./app/assets/javascripts/application.js</code> should look like this:</p>\n\n<pre><code>...\n//= require rails-ujs\n//= require jquery\n//= require react\n//= require components\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>Your <code>./app/assets/javascripts/server_rendering.js</code> file should look like this:</p>\n\n<pre><code>//= require react_ujs\n// require react-server\n//= require ./components\n...\n</code></pre>\n\n<p>Note that <code>require react-server</code> is commented out.</p>\n\n<p>And make sure to follow the solution found in <a href=\"https://stackoverflow.com/a/31774650\">this</a> SO answer regarding the <code>.\\app\\views\\layouts\\application.html.erb</code> file.</p>\n"}], "owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 44393804, "answer_count": 1, "score": 0, "last_activity_date": 1496762094, "creation_date": 1496762094, "question_id": 44393803, "link": "https://stackoverflow.com/questions/44393803/multiple-uncaught-errors-using-the-react-rails-gem", "title": "Multiple Uncaught Errors Using the react-rails Gem", "body": "<p>To preface my question, I am following <a href=\"https://www.pluralsight.com/guides/ruby-ruby-on-rails/building-a-crud-interface-with-react-and-ruby-on-rails\" rel=\"nofollow noreferrer\">this</a> guide.</p>\n\n<p>When trying to build a CRUD interface using Rails and React, I receive <a href=\"https://facebook.github.io/react/warnings/refs-must-have-owner.html\" rel=\"nofollow noreferrer\">this</a> error when trying to create a new item:</p>\n\n<blockquote>\n  <p>addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's render method, or you have multiple copies of React loaded.</p>\n</blockquote>\n\n<p>I wasn't improperly adding a <code>ref</code> attribute to any JSX not inside of a <code>render</code> method, so I must have multiple copies of React within my asset pipeline.</p>\n\n<p>Research yielded the following potential results:</p>\n\n<ol>\n<li>Introducing <a href=\"https://webpack.js.org\" rel=\"nofollow noreferrer\">webpack</a> or <a href=\"http://www.searchkit.co\" rel=\"nofollow noreferrer\">Searchkit</a>, suggested in <a href=\"https://stackoverflow.com/a/37670521\">this</a> SO answer, seemed to be clunky workarounds for my simple CRUD interface.</li>\n<li><a href=\"https://stackoverflow.com/a/37601630\">This</a> unselected SO answer suggested removing the <code>//= require react</code> line from <code>./app/assets/javascripts/application.js</code>.  This proved to be unsuccessful.</li>\n<li>Issue #671, from the official GitHub react-rails repo. <a href=\"https://github.com/reactjs/react-rails/issues/671\" rel=\"nofollow noreferrer\">here</a>, outlines the first part of my issue perfectly.  I followed this potential solution, which suggests removing the <code>//= require react-server</code> line of the <code>./app/assets/javascripts/server_rendering.js</code> file.  This lead to a new error, outlined below:</li>\n</ol>\n\n<blockquote>\n  <p>Uncaught ReferenceError: $ is not defined</p>\n</blockquote>\n\n<p>Which I assume means that <code>react_server</code> not only contains a second copy of React, but also loads something vital for my AJAX calls.</p>\n\n<p>For reference, here are the contents of <code>./app/assets/javascripts/application.js</code>:</p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n...\n// about supported directives.\n//\n//= require rails-ujs\n//= require react\n//= require components\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>and <code>./app/assets/javascripts/server_rendering.js</code>:</p>\n\n<pre><code>//= require react_ujs\n//= require react-server\n//= require ./components\n...\n</code></pre>\n\n<p>Where a set of ellipses, or <code>...</code>, are used to shorten known comment sections.</p>\n\n<ul>\n<li>Ruby version: 2.3.3p222 (2016-11-21 revision 56859)</li>\n<li>Rails version: 5.1.1</li>\n<li>react-rails version: 2.2.0</li>\n</ul>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1496757898, "post_id": 44392002, "comment_id": 75784084, "body": "Obviously, there&#39;s no method <code>sysread</code> on strings. And I have no idea what is it that you&#39;re trying to accomplish with that."}, {"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 0, "creation_date": 1496757971, "post_id": 44392002, "comment_id": 75784133, "body": "Can you use <code>StringIO</code> instead of plain <code>String</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7828634, "user_type": "registered", "profile_image": "https://graph.facebook.com/1286002751431873/picture?type=large", "display_name": "Wellington Lucas", "link": "https://stackoverflow.com/users/7828634/wellington-lucas"}, "is_accepted": false, "score": 1, "last_activity_date": 1496779279, "last_edit_date": 1496779279, "creation_date": 1496758989, "answer_id": 44392656, "question_id": 44392002, "link": "https://stackoverflow.com/questions/44392002/ruby-read-lines-from-string-variable-using-character-count/44392656#44392656", "title": "ruby read lines from string variable using character count", "body": "<p>The problem is that a String object doesn't have a <code>sysread</code> method. To get the first n characters of a String object you can use String <code>slice(range)</code>:</p>\n\n<pre><code>content[0...10]\n</code></pre>\n\n<p>or <code>slice(start, length)</code>:</p>\n\n<pre><code>content[0, 10]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496772115, "post_id": 44393163, "comment_id": 75793401, "body": "I like. A variant  for the body of <code>my_method: </code>(File.file?(s) ? File.open(s) : StringIO.new(s)).each_line(sep_or_char_limit, &amp;method(:do_stuff))<code>. This omits your </code>target = s.to_s`, as I didn&#39;t understand why that&#39;s needed."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496772387, "post_id": 44393163, "comment_id": 75793542, "body": "@CarySwoveland <code>File.open</code> suggests that I also need to <code>close</code> where as <code>foreach</code> will close the file on block termination. the <code>to_s</code> is there for edge cases say <code>my_method([1,2,3,4,5],&#39;,&#39;)</code> this will not fail because the true definition from a documentation standpoint is simply any object that has a public <code>to_s</code> method"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496772436, "post_id": 44393163, "comment_id": 75793567, "body": "I considered that but the file will be closed when the method exits. I could of course begin with <code>target = s.to_s</code> and change <code>s</code> to <code>target</code> in what I suggested."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496772594, "post_id": 44393163, "comment_id": 75793680, "body": "@CarySwoveland no it will be marked for Garbage Collection and once it is collected it will be auto closed at that point and who knows when that will be <a href=\"https://stackoverflow.com/a/4795782/1978251\">See Here</a> from the venerable Jorg W Mittag"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496773655, "post_id": 44393163, "comment_id": 75794309, "body": "Ah, I didn&#39;t know the file isn&#39;t closed right away. Without <code>close</code> would the object <code>StringIO.new(target)</code> be garbage-collected, rather than released right away? If so, and the amount of memory is significant, perhaps <code>target = s.to_s; obj = File.file?(target) ? File.open(target) : StringIO.new(target); obj.each_line(sep_or_char_limit, &amp;method(:do_stuff)); obj.close</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496774570, "post_id": 44393163, "comment_id": 75794829, "body": "@CarySwoveland while it is not &quot;Closed&quot; closing it has no impact since closing it does not release the reference to the accumulated String we could replace this portion with <code>StringIO.open(target) { |strio| strio.each_line(sep_or_char_limit, &amp;method(:do_stuff))}</code> which will ensure it is closed (editted for consistency sake) but will have no impact on memory consumption so it&#39;s sort six one half dozen another. I definitely understand what you are getting at but I think I still prefer the separation of concerns here from a readable and understandable standpoint."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1496775140, "post_id": 44393163, "comment_id": 75795180, "body": "@CarySwoveland updated just for you both <code>File</code> and <code>StringIO</code> without duplication."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1496775981, "post_id": 44393163, "comment_id": 75795637, "body": "In your update I like your use of <code>open</code> (didn&#39;t know about that) and the fact that you made the only difference the class, rather than the method."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1496776180, "post_id": 44393163, "comment_id": 75795760, "body": "@CarySwoveland I aim to please and our discussion made for a better technical implementation (DRY and consistent return value). Thanks :)"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1496777713, "last_edit_date": 1496777713, "creation_date": 1496760377, "answer_id": 44393163, "question_id": 44392002, "link": "https://stackoverflow.com/questions/44392002/ruby-read-lines-from-string-variable-using-character-count/44393163#44393163", "title": "ruby read lines from string variable using character count", "body": "<p>If you are trying to limit the number of characters <a href=\"https://ruby-doc.org/core-2.3.1/IO.html#method-i-each_line\" rel=\"nofollow noreferrer\"><code>IO#each_line</code></a> can help you with this e.g. </p>\n\n<pre><code>c_max = 100\nFile.open(filename) do |file|\n  file.each_line(c_max) do |characters|\n    # characters is now a string that is 100 characters long\n    # do something with characters\n  end\nend\n</code></pre>\n\n<p>Or to handle a <code>String</code> you can make it a <code>StringIO</code> and <code>#each_line</code> will work too (Please note <code>String#each_line</code> will not work as it only accepts a separator (<code>String</code>) and not a character limit (<code>Fixnum</code>) this is why we need <code>StringIO</code>)</p>\n\n<pre><code>s = \"THIS IS A STRING\"\nStringIO.open(s) do |strio|\n  strio.each_line(2) do |characters|\n    # characters is now a string that is 2 characters long\n    # do something with characters\n  end\nend    \n</code></pre>\n\n<p>So let's handle both options <strong>Update:</strong> (Based on comment discussion with @CarySwoveland - Thanks for pushing me further)</p>\n\n<pre><code>def do_stuff(line)\n  # common functionality goes here \n  puts line\nend\n\n# return is a StringIO or File\n# leaks file descriptor handle as you wish\ndef my_method(s,sep_or_char_limit=100)\n  target = s.to_s # leverage a little duck typing\n  target_class = File.file?(target) ? File : StringIO\n  target_class.open(target) do |io|\n    io.each_line(sep_or_char_limit, &amp;method(:do_stuff))\n  end\nend \n</code></pre>\n\n<p>Since this uses Enumerator functionality it will also help with memory consumption since the whole <code>File</code> need not be read into memory first or the whole <code>String</code> does not need to be split into a temporary <code>Array</code>. </p>\n\n<p>There is additional hidden functionality here as well. You asked for limitation by characters but this will also allow for a separator if you prefer. e.g. </p>\n\n<pre><code># Using a Character Limit\nmy_method(\"THIS IS A STRING\",2)\n# TH\n# IS\n#  I\n# S\n# A\n# ST\n# RI\n# NG\n\n\n# Using a separator \nmy_method(\"THIS IS A STRING\",' ')\n# THIS \n# IS \n# A \n# STRING\n</code></pre>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496779279, "creation_date": 1496757322, "question_id": 44392002, "link": "https://stackoverflow.com/questions/44392002/ruby-read-lines-from-string-variable-using-character-count", "title": "ruby read lines from string variable using character count", "body": "<p>I have been using to split the file content based on the character count, since one of my application which doesn't support for any number of characters. So I have to split the content based on the character count and update it multiple times based on the total character count.</p>\n\n<pre><code>c_max = 50000\nf = File.new(filename)\nu_count = (c_count / c_max.to_f).ceil\ni = 1\nwhile i &lt;= u_count do\n    u_characters = f.sysread(c_max)\n    # do stuffs\n    i+=1\nend\n</code></pre>\n\n<p>But its not working when I use strings instead of filename.</p>\n\n<pre><code>content=File.read(filename)\n#doing some stuffs on the contents \nirb(main):006:0&gt; content.sysread(10)\nNoMethodError: undefined method `sysread' for #&lt;String:0x7f5f2eedd368&gt;\n        from (irb):6\n        from :0\nirb(main):007:0&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "join", "foreign-keys"], "comments": [{"owner": {"reputation": 484, "user_id": 5949678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yn9j3.jpg?s=128&g=1", "display_name": "Divya Sharma", "link": "https://stackoverflow.com/users/5949678/divya-sharma"}, "edited": false, "score": 0, "creation_date": 1496757263, "post_id": 44391928, "comment_id": 75783644, "body": "What is the association between  USER &amp;  LOCA ?"}, {"owner": {"reputation": 1, "user_id": 8119810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a5e36a9176e5028313e0c6b97ccf36?s=128&d=identicon&r=PG&f=1", "display_name": "AJHughes", "link": "https://stackoverflow.com/users/8119810/ajhughes"}, "reply_to_user": {"reputation": 484, "user_id": 5949678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yn9j3.jpg?s=128&g=1", "display_name": "Divya Sharma", "link": "https://stackoverflow.com/users/5949678/divya-sharma"}, "edited": false, "score": 0, "creation_date": 1496757471, "post_id": 44391928, "comment_id": 75783805, "body": "The USER has living location and a working location. LOCA is location with a locationid"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1496757569, "post_id": 44391928, "comment_id": 75783866, "body": "<a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1496775765, "post_id": 44391928, "comment_id": 75795522, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; along with their linked pages. Your question isn&#39;t asked well. Formatting is extremely important as it helps us understand your question, which in return helps you. Questions on SO are not only to help you, they are to help others in the future with similar problems, so you have to provide us with sufficient information, written concisely and clearly to help us, and them, understand."}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1496777717, "post_id": 44391928, "comment_id": 75796625, "body": "Ignorant/uninformed is not stupid. (However, regarding the phrasing of your question, you now have links to inform you.)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8119810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a5e36a9176e5028313e0c6b97ccf36?s=128&d=identicon&r=PG&f=1", "display_name": "AJHughes", "link": "https://stackoverflow.com/users/8119810/ajhughes"}, "edited": false, "score": 0, "creation_date": 1496758030, "post_id": 44392214, "comment_id": 75784183, "body": "so the foreign key is the current table&#39;s column! thank you so much"}], "tags": [], "owner": {"reputation": 1022, "user_id": 8088139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c57f53526db57b9982402c7f4a353f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Gorman", "link": "https://stackoverflow.com/users/8088139/michael-gorman"}, "is_accepted": true, "score": 0, "last_activity_date": 1496757867, "creation_date": 1496757867, "answer_id": 44392214, "question_id": 44391928, "link": "https://stackoverflow.com/questions/44391928/ruby-on-rails-having-more-than-1-different-column-foreign-keyed-to-same-table/44392214#44392214", "title": "Ruby on Rails having more than 1 different column foreign keyed to same table", "body": "<pre><code>class User\n  belongs_to :lives, class_name: 'Loca', foreign_key: 'lives_location'\n  belongs_to :works, class_name: 'Loca', foreign_key: 'works_location'\n\n  ...\nend\n\nclass Loca\n  has_many :users\n\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8119810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a5e36a9176e5028313e0c6b97ccf36?s=128&d=identicon&r=PG&f=1", "display_name": "AJHughes", "link": "https://stackoverflow.com/users/8119810/ajhughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44392214, "answer_count": 1, "score": -7, "last_activity_date": 1496757867, "creation_date": 1496757112, "question_id": 44391928, "link": "https://stackoverflow.com/questions/44391928/ruby-on-rails-having-more-than-1-different-column-foreign-keyed-to-same-table", "title": "Ruby on Rails having more than 1 different column foreign keyed to same table", "body": "<p>I am very new to Ruby on Rails but I am decent with SQL. I am currently looking at trying to make an association for two tables... well actually more but this one example should answer my question for all. These are fictional but represent my issue so don't mind if they wouldn't follow best practices... </p>\n\n<p>Tables: USER, LOCA   --- They had once limited table name characters back in the day.</p>\n\n<p>-LOCA</p>\n\n<p>LOCATIONID - PK</p>\n\n<p>-USER</p>\n\n<p>USERID - PK; LIVES_LOCATION - FK (LOCATIONID); WORKS_LOCATION - FK (LOCATIONID); MANAGERID....... etc</p>\n\n<p>How do in Ruby on Rails, make the class with belongs_to and has_many with the correct foreign_key names to the correct columns?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "heroku", "rubygems"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1496758489, "post_id": 44391789, "comment_id": 75784517, "body": "Did you pushed your code to heroku with <code>git push heroku master</code>?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1496758531, "post_id": 44391789, "comment_id": 75784552, "body": "Also make sure you&#39;re on master or you might need to push it with <code>git push heroku your_branch:master</code>"}, {"owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1496784267, "post_id": 44391789, "comment_id": 75799983, "body": "I try this, everything is up-to-date. BTW,  locally, I&#39;m in static-pages branch. Do I need to merge everything to master first?"}, {"owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1496791732, "post_id": 44391789, "comment_id": 75802179, "body": "Solved!!!! By merging everything to master."}], "owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496756750, "creation_date": 1496756750, "question_id": 44391789, "link": "https://stackoverflow.com/questions/44391789/rails-app-can-run-locally-but-cannot-deploy-in-heroku-website-heroku-shows-the", "title": "Rails app can run locally, but cannot deploy in Heroku website. Heroku shows The page you were looking for doesn&#39;t exist", "body": "<p>I'm very new to rails. I want to deploy my Rails app to Heroku account. The rails app runs fine locally, but if I go to Heroku web(By clicking domain in Heroku account: <a href=\"https://naomis-sample-app.herokuapp.com/\" rel=\"nofollow noreferrer\">https://naomis-sample-app.herokuapp.com/</a>), it shows [The page you were looking for doesn't exist.</p>\n\n<p>You may have mistyped the address or the page may have moved.][1]</p>\n\n<p>Then I run </p>\n\n<pre><code>    heroku logs        \n</code></pre>\n\n<p>I find </p>\n\n<p>ActionController::RoutingError (No route matches [GET] \"/\"):</p>\n\n<p>Then I run </p>\n\n<pre><code>    rake routes\n</code></pre>\n\n<p>to show the routes I set up. </p>\n\n<pre><code>    Prefix Verb URI Pattern                     Controller#Action\n    root GET  /                                 application#hello\n    static_pages_home GET  /static_pages/home(.:format) static_pages#home\n    static_pages_help GET  /static_pages/help(.:format) static_pages#help\n</code></pre>\n\n<p>Then I run </p>\n\n<pre><code>    heroku run rake routes\n</code></pre>\n\n<p>it shows </p>\n\n<p>You don't have any routes defined!\nPlease add some routes in config/routes.rb.</p>\n\n<p>I try to run</p>\n\n<pre><code>    heroku run rake db:migrate\n</code></pre>\n\n<p>But it not work.</p>\n\n<p>Can somebody help me with this?</p>\n\n<p>Here is some of my code: </p>\n\n<p>routes.rb</p>\n\n<pre><code>    Rails.application.routes.draw do\n        root 'application#hello'\n\n        get 'static_pages/home'\n\n        get 'static_pages/help'\n\n    end\n</code></pre>\n\n<p>application_controller.rb</p>\n\n<pre><code>    class ApplicationController &lt; ActionController::Base\n        protect_from_forgery with: :exception\n\n        def hello\n            render html: \"Hello!\"\n        end\n    end\n</code></pre>\n\n<p>in my Gemfile\nI put gem 'sqlite3' under development and test group.</p>\n\n<p>gem 'pg' under production</p>\n\n<pre><code>    source 'https://rubygems.org'\n\n    git_source(:github) do |repo_name|\n      repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n      \"https://github.com/#{repo_name}.git\"\n    end\n\n\n    gem 'rails', '~&gt; 5.1.0'\n    gem 'puma', '~&gt; 3.7'\n    gem 'sass-rails', '~&gt; 5.0'\n    gem 'uglifier', '&gt;= 1.3.0'\n\n    gem 'coffee-rails', '~&gt; 4.2'\n    gem 'jquery-rails', '~&gt; 4.1', '&gt;= 4.1.1'\n\n    gem 'turbolinks', '~&gt; 5'\n    gem 'jbuilder', '~&gt; 2.5'\n    gem 'sdoc', '~&gt; 0.4.2', group: :doc\n\n    group :development, :test do\n      gem 'sqlite3'\n      gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n      gem 'web-console', '&gt;= 3.3.0'\n      gem 'spring'\n      gem 'capybara', '~&gt; 2.13.0'\n      gem 'selenium-webdriver'\n    end\n\n    group :development do\n      gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n      gem 'spring-watcher-listen', '~&gt; 2.0.0'\n    end\n\n    group :test do\n      gem 'minitest-reporters', '~&gt; 1.1', '&gt;= 1.1.14'\n      gem 'mini_backtrace', '~&gt; 0.1.3'\n      gem 'guard-minitest', '~&gt; 2.4', '&gt;= 2.4.6'\n    end\n\n    group :production do\n      gem 'pg', '~&gt; 0.20.0'\n      gem 'rails_12factor', '~&gt; 0.0.3'\n    end\n</code></pre>\n\n<p>I also run bundle install --without production</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "chef-infra", "inspec"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1496757285, "post_id": 44391672, "comment_id": 75783658, "body": "Only 111 and 2049? <code>array.select{|e| e == 111 || e == 2049 }</code>?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1496757579, "post_id": 44391672, "comment_id": 75783874, "body": "Take a second to think about what this says <code>{|x| x.to_i  == 111 &amp;&amp; x.to_i == 2049}</code>. Assume I handed you a deck of cards and asked you to pick the card that was a 5 and a 7. Would you be able to pick this card because that is what you are trying to select; a port that is both 111 and (<code>&amp;&amp;</code>) 2049. Rather as @Sebasti&#225;nPalma pointed out you meant a port that is 111 or (<code>||</code>) 2049."}], "owner": {"reputation": 9, "user_id": 4775767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KnpM_-3wczo/AAAAAAAAAAI/AAAAAAAAAEA/vVA9mi_68ig/photo.jpg?sz=128", "display_name": "saravana kumar", "link": "https://stackoverflow.com/users/4775767/saravana-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 524, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496756618, "creation_date": 1496756497, "last_edit_date": 1496756618, "question_id": 44391672, "link": "https://stackoverflow.com/questions/44391672/select-or-fetch-value-from-an-array-chef-inspec", "title": "select or fetch value from an array. chef inspec", "body": "<p>Having an array command <code>port.where{port= /.+/}.ports</code> with result:</p>\n\n<pre><code>[111, 20048, 80, 5556, 5557, 1622, 22, 23, 33080, 5432, 25, 443, 2620, 26365, 2049, 10500, 199, 29460, 7188, 4118, 55755, 35461, 51986, 123, 16515, 161, 646, 659, 13666, 29013, 611, 21460]\n</code></pre>\n\n<p>I need to select the value match with <code>2049</code> and <code>111</code> from the array. My code is:</p>\n\n<pre><code>port.where{port= /.+/}.ports.flatten.select {|x| x.to_i  == 111 &amp;&amp; x.to_i == 2049}\n</code></pre>\n\n<p>Required result is to select only array matching values <code>[2049,111]</code>.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 464, "user_id": 4059269, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NZAkv.png?s=128&g=1", "display_name": "pavjel", "link": "https://stackoverflow.com/users/4059269/pavjel"}, "edited": false, "score": 1, "creation_date": 1496756166, "post_id": 44391485, "comment_id": 75782830, "body": "Please, provide more details on the problem."}, {"owner": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "edited": false, "score": 1, "creation_date": 1496759758, "post_id": 44391485, "comment_id": 75785539, "body": "-5? :) Was it that bad?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 4, "creation_date": 1496759941, "post_id": 44391485, "comment_id": 75785682, "body": "I guess that not enough information was given. It will be better if you provide more details. For instance: will you be working only with upper case? will you be adding to <code>Z</code>? if so, what behavior do you expect?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1496761374, "post_id": 44391485, "comment_id": 75786791, "body": "Aside from the rules, it&#39;s unclear what <i>&quot;add 1 to &#39;A&#39;&quot;</i> means. Do you want to write a function <code>convert(&#39;A&#39;, 1)</code> that returns <code>&#39;B&#39;</code> or do you want to alter the built-in <code>&#39;A&#39; + 1</code> so it returns <code>&#39;B&#39;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1496756325, "post_id": 44391558, "comment_id": 75782946, "body": "Or if you know are always capital letters <code>(&#39;A&#39;..&#39;Z&#39;)</code>, without down and upcase them."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1496757461, "post_id": 44391558, "comment_id": 75783795, "body": "You could benefit from <code>rotate</code> (i.e. <code>array[array.rotate(-1).index(&#39;a&#39;)]</code>) and avoid the <code>&#39;z&#39; + 1</code> problem."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1496757611, "post_id": 44391558, "comment_id": 75783896, "body": "That&#39;s nice and faster @Gerry!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1496761732, "post_id": 44391558, "comment_id": 75787054, "body": "@Gerry <code>array.rotate(1).first</code> would also work ;)"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1496762076, "post_id": 44391558, "comment_id": 75787327, "body": "@Stefan I thought of it, but it will be locked to <code>&#39;A&#39;</code>, couldn&#39;t figure out another way to use any letter."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1496762771, "post_id": 44391558, "comment_id": 75787833, "body": "@Gerry maybe <code>array.rotate(array.index(&#39;b&#39;) + 1).first</code>. Slightly longer than yours, but the offset is positive and there&#39;s something like <code>&#39;b&#39; + 1</code> in the code."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1496763346, "post_id": 44391558, "comment_id": 75788228, "body": "@Stefan Ahh, yes, much better (i do hate the -1 offset)."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1496756206, "creation_date": 1496756206, "answer_id": 44391558, "question_id": 44391485, "link": "https://stackoverflow.com/questions/44391485/convert-character-a-to-b-if-i-add-1/44391558#44391558", "title": "Convert character &#39;A&#39; to &#39;B&#39; if I add 1", "body": "<p>Maybe something like?:</p>\n\n<pre><code>array = ('a'..'z').to_a\np array[array.index('a'.downcase) + 1].upcase\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1496756889, "post_id": 44391747, "comment_id": 75783384, "body": "Might be troublesome for <code>&#39;z&#39;</code> and <code>&#39;Z&#39;</code> etc."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1496757730, "post_id": 44391747, "comment_id": 75783974, "body": "@sagarpandya82: edge condition behaviour was not specified :)"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1496760927, "post_id": 44391747, "comment_id": 75786458, "body": "Okay you got me. OP: if you&#39;re interested and want &#39;Z&#39; to &#39;A&#39; etc you may extend String and define something like:  <code>((((self.ord - 65) + n) % 26) + 65).chr</code>. Similarly for lowercase letters."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1496756665, "creation_date": 1496756665, "answer_id": 44391747, "question_id": 44391485, "link": "https://stackoverflow.com/questions/44391485/convert-character-a-to-b-if-i-add-1/44391747#44391747", "title": "Convert character &#39;A&#39; to &#39;B&#39; if I add 1", "body": "<p>You could roundtrip via <code>.ord</code></p>\n\n<pre><code>'a'.ord # =&gt; 97\n'a'.ord + 2 # =&gt; 99\n('a'.ord + 2).chr # =&gt; \"c\"\n('A'.ord + 5).chr # =&gt; \"F\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1496765857, "post_id": 44394040, "comment_id": 75789868, "body": "Oh, you could use <code>case self</code> and <code>when &#39;a&#39;..&#39;z&#39;</code> / <code>when &#39;A&#39;..&#39;Z&#39;</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1496766652, "post_id": 44394040, "comment_id": 75790393, "body": "@Stefan I went for your <code>case self</code> idea. It looks much cleaner than what I had. Many thanks."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 0, "last_activity_date": 1496781133, "last_edit_date": 1496781133, "creation_date": 1496762780, "answer_id": 44394040, "question_id": 44391485, "link": "https://stackoverflow.com/questions/44391485/convert-character-a-to-b-if-i-add-1/44394040#44394040", "title": "Convert character &#39;A&#39; to &#39;B&#39; if I add 1", "body": "<p>Furthering <a href=\"https://stackoverflow.com/a/44391747/5101493\">Sergio's answer</a>, you can isolate the letter-ordinals and use modulo.</p>\n\n<pre><code>class String\n  def plus n\n    case self\n    when ('a'..'z')\n      (((ord - 97 + n) % 26) + 97).chr            #ord means self.ord\n    when ('A'..'Z')\n      (((ord - 65 + n) % 26) + 65).chr\n    else\n      raise \"single-letters only\"\n    end\n  end\nend\n\n'a'.plus 2 #=&gt; 'c'\n'z'.plus 1 #=&gt; 'a'\n'A'.plus 0 #=&gt; 'A'\n'Z'.plus 9 #=&gt; 'I'\n'/'.plus 1 #=&gt; test.rb:9:in `plus': single-letters only (RuntimeError)\n</code></pre>\n\n<p>Your question is unclear, but as alluded to in the comments by Stefan, you may want <code>'A' + 1 #=&gt; 'B'</code> notation. Ruby does allow an overwrite of <code>String#+</code>. But don't do this, this is just to show you that you can:</p>\n\n<pre><code>class String\n  def +(n)\n   #code as above...\n  end\nend\n</code></pre>\n\n<p>then via syntactic sugar, you can do:</p>\n\n<pre><code>'a' + 2 #=&gt; 'c'\n'z' + 1 #=&gt; 'a'\n'A' + 0 #=&gt; 'A'\n'Z' + 9 #=&gt; 'I'\n'/' + 1 #=&gt; test.rb:9:in `plus': single-letters only (RuntimeError)\n</code></pre>\n"}], "owner": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1497446727, "accepted_answer_id": 44394040, "answer_count": 3, "score": -7, "last_activity_date": 1496781133, "creation_date": 1496756034, "question_id": 44391485, "link": "https://stackoverflow.com/questions/44391485/convert-character-a-to-b-if-i-add-1", "closed_reason": "Needs more focus", "title": "Convert character &#39;A&#39; to &#39;B&#39; if I add 1", "body": "<p>Suppose you have one character/string, \"A\".</p>\n\n<p>What do you write to convert it to 'B' if add 1 to 'A'. If I add '2' it should be converted to 'C' and so on...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1496755095, "post_id": 44390999, "comment_id": 75781986, "body": "What does <code>Time.zone.now</code> return?"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1496756223, "post_id": 44390999, "comment_id": 75782874, "body": "You can use the db date with <code>start_date &lt; now()</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1496757999, "post_id": 44390999, "comment_id": 75784162, "body": "Formatting is just a representation and does not have a definitive bearing the the ability to use this value in a query. Please remember that you could query like this too <code>&quot;start_date &lt; &#39;2017-01-01&#39;&quot;</code> this is perfectly valid even though I am using a String Value here without a time stamp at all."}], "answers": [{"tags": [], "owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "is_accepted": true, "score": 3, "last_activity_date": 1496756846, "creation_date": 1496756846, "answer_id": 44391828, "question_id": 44390999, "link": "https://stackoverflow.com/questions/44390999/ruby-on-rails-diff-two-dates/44391828#44391828", "title": "ruby on rails diff two dates", "body": "<p>You don't need to convert it, rails will take care for you</p>\n\n<pre><code>User.where(\"created_at &lt; ?\",  DateTime.now).take\n# generate sql \n# SELECT  `users`.* FROM `users` WHERE (created_at &lt; '2017-06-06 13:41:27.649070') LIMIT 1\n</code></pre>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 44391828, "answer_count": 1, "score": 2, "last_activity_date": 1496756846, "creation_date": 1496754783, "question_id": 44390999, "link": "https://stackoverflow.com/questions/44390999/ruby-on-rails-diff-two-dates", "title": "ruby on rails diff two dates", "body": "<p>I have two differnt dates in Rails</p>\n\n<p>the current date: </p>\n\n<pre><code>DateTime.now\n</code></pre>\n\n<p>and one which is stored in database (belongs to a object)</p>\n\n<p>The format of those two is different:</p>\n\n<pre><code>DateTime.now:  2017-06-06T13:06:14+00:00\nFrom Database: 2017-06-06 14:05:00 +0200\n</code></pre>\n\n<p>I want to do a slect like this:</p>\n\n<pre><code>@lessons =  self.where(\"start_date &lt; ? AND active IS NULL\", DateTime.now)\n</code></pre>\n\n<p>Problem is that those two dates are different .. </p>\n\n<p>how can I format one of these to the same like the other? </p>\n\n<p>Probably the DateTime.now to the same like one from db?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "caching"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496754607, "post_id": 44390836, "comment_id": 75781618, "body": "Do you really have <code>emp-id</code> in the code? If this is not your actual code, then you might have missed crucial details when simplifying it for the question"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496754713, "post_id": 44390836, "comment_id": 75781707, "body": "Would it make a difference if you do <code>Employee.where(&quot;first_name like ? and last_name like ? and emp_id like ?&quot;,&quot;%#{first_name}%&quot;,&quot;%#{last_name}%&quot;,&quot;%#{number}%&quot;).to_a</code> in the fetch call? Notice the trailing <code>.to_a</code>"}, {"owner": {"reputation": 13, "user_id": 3563579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSOKO.jpg?s=128&g=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/3563579/gourav"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496755243, "post_id": 44390836, "comment_id": 75782100, "body": "While framing question i missed it, i have corrected emp_id.   I will try .to_a, but my confusion why caching is not working"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496755388, "post_id": 44390836, "comment_id": 75782210, "body": "I&#39;m suspecting that you actually don&#39;t store the data there. Only the query."}, {"owner": {"reputation": 13, "user_id": 3563579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSOKO.jpg?s=128&g=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/3563579/gourav"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496755548, "post_id": 44390836, "comment_id": 75782342, "body": "i added .to_a and checked from console its faster, they have not mentioned anywhere in rails doc thank you.  can you please explain me what it does, also i have pagination which wont work on array"}, {"owner": {"reputation": 13, "user_id": 3563579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSOKO.jpg?s=128&g=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/3563579/gourav"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496755644, "post_id": 44390836, "comment_id": 75782429, "body": "According to me, if cache key matches it gives output of query without any load. which did when i gave .to_a. Correct me if am wrong"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496756286, "post_id": 44390836, "comment_id": 75782910, "body": "Not sure I understand what you said in the last comment."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3563579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSOKO.jpg?s=128&g=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/3563579/gourav"}, "edited": false, "score": 0, "creation_date": 1496757613, "post_id": 44391577, "comment_id": 75783898, "body": "Thank you. I am converting to .to_a, is there a chance of facing memory issue, as i am not using any cach_store."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 13, "user_id": 3563579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSOKO.jpg?s=128&g=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/3563579/gourav"}, "edited": false, "score": 0, "creation_date": 1496757706, "post_id": 44391577, "comment_id": 75783954, "body": "Yes, if you&#39;re storing the cache in-memory, then you have a risk of memory bloat."}, {"owner": {"reputation": 13, "user_id": 3563579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSOKO.jpg?s=128&g=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/3563579/gourav"}, "edited": false, "score": 0, "creation_date": 1496759198, "post_id": 44391577, "comment_id": 75785094, "body": "Can you suggest some as am very new to this. I am going to store it for 12 hours"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 0, "last_activity_date": 1496756258, "creation_date": 1496756258, "answer_id": 44391577, "question_id": 44390836, "link": "https://stackoverflow.com/questions/44390836/low-level-caching-in-rails-4/44391577#44391577", "title": "Low level caching in rails 4", "body": "<p>This is what you store as your cached value: </p>\n\n<pre><code>Employee.where(\"first_name like ? and last_name like ? and emp_id like ?\",\"%#{first_name}%\",\"%#{last_name}%\",\"%#{emp_id}%\")\n</code></pre>\n\n<p>This is not a list of employees, this is only <strong>information on how to find</strong> the employees. So when you later retrieve this object from the cache, you run the query every time, to get the employees.</p>\n\n<p>Run the query when caching, by appending <code>.to_a</code> to that. This will return an array of employees, which is what you want to cache.</p>\n"}], "owner": {"reputation": 13, "user_id": 3563579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSOKO.jpg?s=128&g=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/3563579/gourav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 44391577, "answer_count": 1, "score": 1, "last_activity_date": 1496756258, "creation_date": 1496754412, "last_edit_date": 1496755143, "question_id": 44390836, "link": "https://stackoverflow.com/questions/44390836/low-level-caching-in-rails-4", "title": "Low level caching in rails 4", "body": "<p>I have two models Employee and Organization</p>\n\n<pre><code>class Employee &lt; ActiveRecord::Base\n  belongs_to :organization, touch: true\nend\n\nclass Organization &lt; ActiveRecord::Base\n  has_many :employees\nend\n</code></pre>\n\n<p>There is a form which is used to search the employees.</p>\n\n<p>The search query is based on first_name, last_name and emp_id.</p>\n\n<p>I am trying to implement <strong>Low-Level Caching</strong></p>\n\n<p>In Employee Controller</p>\n\n<pre><code>def list_employees\n  first_name = params[:employee][:first_name]\n  last_name  = params[:employee][:last_name]\n  emp_id     = params[:employee][:emp_id]\n  @employees = Employee.all_employees(first_name,last_name,emp_id)\nend\n</code></pre>\n\n<p>In Employee Model</p>\n\n<pre><code>def self.all_employees(first_name,last_name,emp_id)\n  cache_key = \"#{first_name}-#{last_name}-#{emp_id}\"\n  Rails.cache.fetch(\"#{cache_key}\", expires_in: 5.minutes) do\n    Employee.where(\"first_name like ? and last_name like ? and emp_id like ?\",\"%#{first_name}%\",\"%#{last_name}%\",\"%#{emp_id}%\")\n  end\nend\n</code></pre>\n\n<p>But i cant see any difference each time its querying again. I can see data\nRails.cache.fetch(\"cache_keys\") from console even here its querying to employee table.</p>\n\n<p>First time when i query it takes 500ms\nSecond time same query it takes  490ms (not serving from cache)</p>\n\n<p>Let me know what i am doing wrong.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "range"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1496753898, "post_id": 44390556, "comment_id": 75781060, "body": "<code>..</code> is inclusive range."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 5, "creation_date": 1496754050, "post_id": 44390556, "comment_id": 75781175, "body": "<i>Sidenote:</i> Executing this line: <code>(Time.now.beginning_of_day..Time.now.end_of_day).cover? Time.parse(&#39;2017-06-06 00:00:00 +0000&#39;)</code> directly in your console would be like 100 times faster than posting the question to SO."}, {"owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "edited": false, "score": 6, "creation_date": 1496754071, "post_id": 44390556, "comment_id": 75781194, "body": "You can see it by <code>User.where(:created_at =&gt; Time.now.beginning_of_day..Time.now.end_of_day).to_sql</code>"}], "answers": [{"tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": false, "score": 2, "last_activity_date": 1496757207, "last_edit_date": 1496757207, "creation_date": 1496756701, "answer_id": 44391764, "question_id": 44390556, "link": "https://stackoverflow.com/questions/44390556/do-date-ranges-in-rails-include-the-border-dates/44391764#44391764", "title": "Do date ranges in Rails include the border dates?", "body": "<p>Opening up the good console answers all your questions.</p>\n\n<p>With <code>..</code> calls a <code>BETWEEN</code> statement in the db</p>\n\n<pre><code>User.where(created_at: Time.zone.today.beginning_of_day..Time.zone.today.end_of_day).to_sql\n\n# SELECT \"users\".* \n# FROM \"users\" \n# WHERE (\"users\".\"created_at\" BETWEEN '2017-06-06 00:00:00' AND '2017-06-06 23:59:59.999999')\n</code></pre>\n\n<p>With <code>...</code> it calls the <code>&gt;=</code> <code>&lt;</code> magic.</p>\n\n<pre><code>User.where(created_at: Time.zone.today.beginning_of_day...Time.zone.today.end_of_day).to_sql\n\n# SELECT \"users\".* \n# FROM \"users\" \n# WHERE (\"users\".\"created_at\" &gt;= '2017-06-06 00:00:00' AND \n#        \"users\".\"created_at\" &lt; '2017-06-06 23:59:59.999999')\n</code></pre>\n\n<p>Rails 5.1 includes a nice little helper called <a href=\"http://blog.bigbinary.com/2017/04/24/rails-5-1-has-introduced-date-all_day-helper.html\" rel=\"nofollow noreferrer\"><code>all_day</code></a> which makes this possible. It issues the same statement as with <code>..</code></p>\n\n<pre><code>Users.where(created_at: Time.zone.today.all_day).to_sql\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong></p>\n\n<p>If you're really paranoid and have a super important life-saving app going on, <code>Time.zone.today</code> might actually change in the milliseconds from calling <code>beginning_of_day</code> and <code>end_of_day</code>, so you can do this then.</p>\n\n<pre><code>today = Time.zone.today\nUsers.where(created_at: today.beginning_of_day..today.end_of_day)\n</code></pre>\n"}], "owner": {"reputation": 5149, "user_id": 2708460, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/78fb5597f10a8f25d2a69cbf70fd6ecd?s=128&d=identicon&r=PG&f=1", "display_name": "almo", "link": "https://stackoverflow.com/users/2708460/almo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496757207, "creation_date": 1496753572, "last_edit_date": 1496753925, "question_id": 44390556, "link": "https://stackoverflow.com/questions/44390556/do-date-ranges-in-rails-include-the-border-dates", "title": "Do date ranges in Rails include the border dates?", "body": "<p>I want to query a date range in Rails:</p>\n\n<pre><code>User.where(:created_at =&gt; Time.now.beginning_of_day..Time.now.end_of_day)\n\nTime.now.beginning_if_day is at 00:00:00\nTime.now.end_of_day is at: 23.59.59\n</code></pre>\n\n<p>Does my range include those two border times, or does is use <code>&lt;</code> and <code>&gt;</code>?</p>\n"}, {"tags": ["ruby", "version"], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 5628177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nk5sO.jpg?s=128&g=1", "display_name": "Richard Nikolas", "link": "https://stackoverflow.com/users/5628177/richard-nikolas"}, "is_accepted": true, "score": 0, "last_activity_date": 1496753925, "creation_date": 1496753925, "answer_id": 44390678, "question_id": 44390550, "link": "https://stackoverflow.com/questions/44390550/change-the-version-of-ruby/44390678#44390678", "title": "Change the version of ruby", "body": "<p>If you're using Rbenv :\n<a href=\"https://makandracards.com/makandra/21545-rbenv-how-to-switch-to-another-ruby-version-temporarily-per-project-or-globally\" rel=\"nofollow noreferrer\">https://makandracards.com/makandra/21545-rbenv-how-to-switch-to-another-ruby-version-temporarily-per-project-or-globally</a></p>\n\n<p>If you're using RVM :\n<a href=\"https://rvm.io/rubies/default\" rel=\"nofollow noreferrer\">https://rvm.io/rubies/default</a></p>\n\n<p>If you're not using any of these: <code>you should be using one of these.</code> </p>\n"}], "owner": {"reputation": 11, "user_id": 7832844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d9e8f758b87c6ddf65de38187c095a?s=128&d=identicon&r=PG&f=1", "display_name": "yassinho", "link": "https://stackoverflow.com/users/7832844/yassinho"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1496782267, "accepted_answer_id": 44390678, "answer_count": 1, "score": -6, "last_activity_date": 1496754021, "creation_date": 1496753557, "last_edit_date": 1496754021, "question_id": 44390550, "link": "https://stackoverflow.com/questions/44390550/change-the-version-of-ruby", "closed_reason": "Needs details or clarity", "title": "Change the version of ruby", "body": "<p>I want to change the version of ruby. I'm in a virtual machine.\nThe current version of ruby is:</p>\n\n<pre><code>ruby -v :ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-linux]\ngem -v :2.4.3\n</code></pre>\n\n<p>and I want to move to version 2.2.6.</p>\n"}, {"tags": ["ruby", "hashmap"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1496768852, "post_id": 44390339, "comment_id": 75791655, "body": "make <code>append_params</code> a <code>Hash</code> e.g. <code>append_params = {x: false, y: false}</code> and then <code>**append_params</code> on line 2"}], "answers": [{"tags": [], "owner": {"reputation": 13737, "user_id": 232082, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ac1b2472a61fbbae7cbd689e70f60695?s=128&d=identicon&r=PG", "display_name": "numediaweb", "link": "https://stackoverflow.com/users/232082/numediaweb"}, "is_accepted": true, "score": 1, "last_activity_date": 1496760186, "creation_date": 1496760186, "answer_id": 44393086, "question_id": 44390339, "link": "https://stackoverflow.com/questions/44390339/vagrantfile-merge-append-parameters/44393086#44393086", "title": "Vagrantfile merge/append parameters", "body": "<p>So finally I found the solution that works in my case as I have some <code>config.yml</code> with parameters that get parsed inside Vagrantfile</p>\n\n<pre><code># config.yml\nappend_params:\n    :someVar: false\n    :fsnotify: true\n\n# Vagrantfile\nif File.file?(\"config.yml\")\n    parameters = YAML.load_file 'config.yml'\nelse\n    parameters = {}\nend\n...\nVagrant.configure(\"2\") do |config|\n    config.ssh.forward_agent = true\n    ...\n    config.vm.synced_folder parameters['synced_folder'], \"/var/www\",  parameters['append_params'].merge({create: true, type: \"nfs\"})\n</code></pre>\n"}], "owner": {"reputation": 13737, "user_id": 232082, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ac1b2472a61fbbae7cbd689e70f60695?s=128&d=identicon&r=PG", "display_name": "numediaweb", "link": "https://stackoverflow.com/users/232082/numediaweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 44393086, "answer_count": 1, "score": 0, "last_activity_date": 1496760186, "creation_date": 1496752972, "last_edit_date": 1496753263, "question_id": 44390339, "link": "https://stackoverflow.com/questions/44390339/vagrantfile-merge-append-parameters", "title": "Vagrantfile merge/append parameters", "body": "<p>I want to allow appending of parameters to <code>config.vm.synced_folder</code>. I want users to append additional parameters to this config.</p>\n\n<p>I have so far:</p>\n\n<pre><code>append_params = 'x: false, y: false'\nconfig.vm.synced_folder x['folder'], \"/var/www\", create: true, type: \"nfs\", append_params \n</code></pre>\n\n<p>If I remove <code>, append_params</code> it works. But with it, it fails with error:</p>\n\n<pre><code>There is a syntax error in the following Vagrantfile. The syntax error\nmessage is reproduced below for convenience:\nD:/x/Vagrantfile:32: syntax error, unexpected '\\n', expecting =&gt;\n</code></pre>\n\n<p>How can I append additional parameters on request to <code>config.vm.synced_folder</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.1"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1496756578, "post_id": 44391593, "comment_id": 75783137, "body": "<a href=\"https://github.com/rails/rails/pull/26266#issuecomment-298678182\" rel=\"nofollow noreferrer\">You can force migrations to use <code>integer</code></a>."}, {"owner": {"reputation": 380, "user_id": 3398605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-N7DOKW1711A/AAAAAAAAAAI/AAAAAAAACDE/EtIk4l16HIo/photo.jpg?sz=128", "display_name": "wyde19", "link": "https://stackoverflow.com/users/3398605/wyde19"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1496757124, "post_id": 44391593, "comment_id": 75783537, "body": "My bad, I looked at the code but did not read the whole discussion page. I&#39;ll update my answer."}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1496818725, "post_id": 44391593, "comment_id": 75810226, "body": "<code>create_table :users, id: :integer do</code> - that&#39;s what I was looking for. Thx!"}, {"owner": {"reputation": 380, "user_id": 3398605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-N7DOKW1711A/AAAAAAAAAAI/AAAAAAAACDE/EtIk4l16HIo/photo.jpg?sz=128", "display_name": "wyde19", "link": "https://stackoverflow.com/users/3398605/wyde19"}, "reply_to_user": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1496837542, "post_id": 44391593, "comment_id": 75823455, "body": "@maicher don&#39;t forget about <code>references</code> to that table."}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1496837992, "post_id": 44391593, "comment_id": 75823769, "body": "@wyde19 sure. Got it!"}], "tags": [], "owner": {"reputation": 380, "user_id": 3398605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-N7DOKW1711A/AAAAAAAAAAI/AAAAAAAACDE/EtIk4l16HIo/photo.jpg?sz=128", "display_name": "wyde19", "link": "https://stackoverflow.com/users/3398605/wyde19"}, "is_accepted": true, "score": 8, "last_activity_date": 1517224348, "last_edit_date": 1517224348, "creation_date": 1496756303, "answer_id": 44391593, "question_id": 44390225, "link": "https://stackoverflow.com/questions/44390225/how-to-turn-off-bigint-primary-keys-in-rails-5-1/44391593#44391593", "title": "How to turn off BIGINT primary keys in Rails 5.1", "body": "<p>According to <a href=\"https://github.com/rails/rails/pull/26266/files\" rel=\"nofollow noreferrer\">pull request</a>, no this is not possible on config level.\nBut you can, in fact, force <code>id</code> to be integer, like this:</p>\n\n<pre><code>create_table :users, id: :integer do\n</code></pre>\n\n<p>On the other hand, you must be aware that changes also affected <code>references</code> behavior, so you should be careful with those:</p>\n\n<pre><code>t.references :orders, type: :integer\n</code></pre>\n\n<p>Seeing as this is too much repeated code, I suggest you write helpers for this, override default methods, or be very radical and fork your database adapter, changing this in it as you like. I'd go with the second option: </p>\n\n<ol>\n<li>Create anonymous modules for <code>Migration[5.0]</code> and <code>ActiveRecord::ConnectionAdapters::TableDefinition</code></li>\n<li>Define <code>create_table</code>, <code>add_reference</code>, <code>add_belongs_to</code> in first one, <code>references</code> and <code>belongs_to</code> in second one (<code>belongs_to</code> ones should be just aliases of <code>references</code>)</li>\n<li>In those methods just modify options and call super. Don't forget to handle signatures!</li>\n<li>Prepending those modules to their respective classes will handle\neverything for you.</li>\n<li>You can go even better and do this for their removal counterparts too.</li>\n</ol>\n"}], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2961, "favorite_count": 0, "accepted_answer_id": 44391593, "answer_count": 1, "score": 7, "last_activity_date": 1517224348, "creation_date": 1496752672, "question_id": 44390225, "link": "https://stackoverflow.com/questions/44390225/how-to-turn-off-bigint-primary-keys-in-rails-5-1", "title": "How to turn off BIGINT primary keys in Rails 5.1", "body": "<p>Rails 5.1 migrations generates <code>BIGINT</code> (instead of <code>Integer</code>) for tables' primary keys (<a href=\"http://edgeguides.rubyonrails.org/5_1_release_notes.html#active-record-notable-changes\" rel=\"noreferrer\">changelog</a>).</p>\n\n<p>Is it possible to disable that somewhere in the config? If so, how to do disable it?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1496754433, "post_id": 44389977, "comment_id": 75781479, "body": "Thanks it worked! Can you explain how the map(&amp;:strip) and reject(&amp;:empty?) works in this scenario."}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1496754803, "post_id": 44389977, "comment_id": 75781784, "body": "And also if some case the &lt;public&gt; section will come first and the normal content will go at last. then how can i confirm the which array element is belongs to the public section?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1496760461, "post_id": 44389977, "comment_id": 75786092, "body": "<code>split</code> shaves <code>&quot;\\n&quot;</code> off and <code>reject</code> rejects empty strings (the one between closing and next opening tag.) If the preface might go in the end, the approach should be completely different. You might try to ask a new question, stating all the conditions precisely."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1496751972, "creation_date": 1496751972, "answer_id": 44389977, "question_id": 44389768, "link": "https://stackoverflow.com/questions/44389768/split-lines-using-tags-that-appear-multiple-times-in-file/44389977#44389977", "title": "Split lines using tags that appear multiple times in file", "body": "<pre><code>File.read(filename).split(/&lt;\\/?public&gt;/)\n                   .map(&amp;:strip)\n                   .reject(&amp;:empty?) # [0..2] if the file has a tail\n#\u21d2 [\n#   [0] \"this is test line 1 \\nthis is testing purpose\",\n#   [1] \"am inside of public\\ndoing lot of stuffs and priting result here\",\n#   [2] \"am inside of another public\\ndoing another set of stuffs and priting here\"\n# ]\n</code></pre>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 44389977, "answer_count": 1, "score": 0, "last_activity_date": 1496753614, "creation_date": 1496751383, "last_edit_date": 1496753614, "question_id": 44389768, "link": "https://stackoverflow.com/questions/44389768/split-lines-using-tags-that-appear-multiple-times-in-file", "title": "Split lines using tags that appear multiple times in file", "body": "<p>I have a file that has the contents as below:</p>\n\n<pre><code>this is test line 1 \nthis is testing purpose \n&lt;public&gt;\nam inside of public\ndoing lot of stuffs and priting result here\n&lt;/public&gt;\n&lt;public&gt;\nam inside of another public\ndoing another set of stuffs and priting here\n&lt;/public&gt;\n</code></pre>\n\n<p>I want to split this file into three different sections:</p>\n\n<ol>\n<li>The lines which are not inside any of the   section  </li>\n<li>The lines which are inside of first   section </li>\n<li>The lines which are inside of second   section</li>\n</ol>\n\n<p>I tried with <code>take_while</code> and <code>drop_while</code>,</p>\n\n<pre><code>File.open(filename).each_line.take_while do |l|\n  !l.include?('&lt;/public&gt;')\nend.drop_while do |l|\n  !l.include?('&lt;public&gt;')\nend.drop(1))\n</code></pre>\n\n<p>but it extracts only the first <code>&lt;public&gt;</code>...<code>&lt;/public&gt;</code> section.</p>\n\n<p>I am looking for a better solution. Any suggestion would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1496751353, "post_id": 44389562, "comment_id": 75779084, "body": "@SergioTulentsev if one decides to go with monkey patching, <a href=\"https://github.com/rails/rails/blob/86be4bfe37f8adc576b6895093656b63c2438d30/activerecord/lib/active_record/inheritance.rb#L186\" rel=\"nofollow noreferrer\">this guy</a> is better candidate. Also, <code>prepend MyMonkey</code> would be better than direct monkeypatching of the re-opened class."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1496751401, "post_id": 44389562, "comment_id": 75779122, "body": "@mudasobwa: yes, that method seems to be a better choice."}], "answers": [{"comments": [{"owner": {"reputation": 2317, "user_id": 5961990, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/971b4e854947e71931bf6dee307b59c0?s=128&d=identicon&r=PG&f=1", "display_name": "garci560", "link": "https://stackoverflow.com/users/5961990/garci560"}, "edited": false, "score": 0, "creation_date": 1496751738, "post_id": 44389867, "comment_id": 75779353, "body": "Stupid question: where does this code go? In the Passenger class, in an independent file?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2317, "user_id": 5961990, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/971b4e854947e71931bf6dee307b59c0?s=128&d=identicon&r=PG&f=1", "display_name": "garci560", "link": "https://stackoverflow.com/users/5961990/garci560"}, "edited": false, "score": 0, "creation_date": 1496751771, "post_id": 44389867, "comment_id": 75779377, "body": "In some <code>initializer</code>, sooner is better."}, {"owner": {"reputation": 2317, "user_id": 5961990, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/971b4e854947e71931bf6dee307b59c0?s=128&d=identicon&r=PG&f=1", "display_name": "garci560", "link": "https://stackoverflow.com/users/5961990/garci560"}, "edited": false, "score": 0, "creation_date": 1496753287, "post_id": 44389867, "comment_id": 75780545, "body": "I&#39;ve put that code (with my values) in a new file under <code>config&#47;initializers</code>, and now I get <code>undefined method </code>attributes_builder&#39; for &quot;PriorityPassenger&quot;:String`"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2317, "user_id": 5961990, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/971b4e854947e71931bf6dee307b59c0?s=128&d=identicon&r=PG&f=1", "display_name": "garci560", "link": "https://stackoverflow.com/users/5961990/garci560"}, "edited": false, "score": 0, "creation_date": 1496753816, "post_id": 44389867, "comment_id": 75781011, "body": "Oh, sorry, I accidentally put <code>PriorityPassenger</code> in quotes, which is wrong; it should be the class constant indeed. I have updated an answer."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1496753772, "last_edit_date": 1496753772, "creation_date": 1496751617, "answer_id": 44389867, "question_id": 44389562, "link": "https://stackoverflow.com/questions/44389562/specify-subclass-mapping-for-single-table-inheritance/44389867#44389867", "title": "Specify subclass mapping for Single Table Inheritance", "body": "<p>This should work (untested):</p>\n\n<pre><code>ActiveRecord::Inheritance::ClassMethods.prepend(Module.new do\n  def find_sti_class(type_name)\n    case type_name\n    when 'PRIORITY' then PriorityPassenger\n    ...\n    else super(type_name)\n    end\n  end\nend)\n</code></pre>\n"}], "owner": {"reputation": 2317, "user_id": 5961990, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/971b4e854947e71931bf6dee307b59c0?s=128&d=identicon&r=PG&f=1", "display_name": "garci560", "link": "https://stackoverflow.com/users/5961990/garci560"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 44389867, "answer_count": 1, "score": 0, "last_activity_date": 1496753772, "creation_date": 1496750695, "question_id": 44389562, "link": "https://stackoverflow.com/questions/44389562/specify-subclass-mapping-for-single-table-inheritance", "title": "Specify subclass mapping for Single Table Inheritance", "body": "<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Inheritance.html\" rel=\"nofollow noreferrer\">The documentation</a> for inheritance explains how to easily implement STI given that you can choose the values for the <code>type</code> column.</p>\n\n<p>However, I have a legacy DB, and these values already exist. Let's say those are <code>PRIORITY</code>, <code>ECONOMY</code>, and <code>FLEXI</code>, how do I specify how to map these values to subclasses?</p>\n\n<pre><code>class PriorityPassenger &lt; Passenger\n  # map to PRIORITY\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "net-sftp"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1496750963, "post_id": 44388911, "comment_id": 75778774, "body": "With FTP you should recursively issue the change directory command to navigate into directories and list their content. It can\u2019t be done in one shot."}], "answers": [{"tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": false, "score": 2, "last_activity_date": 1498028645, "creation_date": 1498028645, "answer_id": 44668972, "question_id": 44388911, "link": "https://stackoverflow.com/questions/44388911/ruby-netsftp-get-file-path/44668972#44668972", "title": "Ruby: Net::SFTP get file path", "body": "<p>Perhaps you are looking for the <a href=\"http://www.rubydoc.info/gems/net-sftp/2.0.5/Net%2FSFTP%2FOperations%2FDir:glob\" rel=\"nofollow noreferrer\">glob method</a>:</p>\n\n<blockquote>\n  <p>Works as ::Dir.glob, matching (possibly recursively) all directory entries under <code>path</code> against <code>pattern</code>. If a block is given, matches will be yielded to the block as they are found; otherwise, they will be returned in an array when the method finishes.</p>\n  \n  <p>Because working over an SFTP connection is always going to be slower than working purely locally, don't expect this method to perform with the same level of alacrity that ::Dir.glob does; it will work best for shallow directory hierarchies with relatively few directories, though it should be able to handle modest numbers of files in each directory.</p>\n</blockquote>\n\n<p>So, for instance (also taken from the documentation):</p>\n\n<pre><code>sftp.dir.glob(\"/remote/path\", \"**/*.rb\")\n</code></pre>\n\n<p>should return all the *.rb files in any directory level on the remote machine. To get <em>all files</em>, use <code>\"**/*\"</code> instead. See also the <a href=\"https://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob\" rel=\"nofollow noreferrer\">Dir class' glob method</a>.</p>\n"}], "owner": {"reputation": 154, "user_id": 3636388, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6466644a0ef8d77f6e2dfbb0ae0e8554?s=128&d=identicon&r=PG&f=1", "display_name": "user3636388", "link": "https://stackoverflow.com/users/3636388/user3636388"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1498028645, "creation_date": 1496748768, "question_id": 44388911, "link": "https://stackoverflow.com/questions/44388911/ruby-netsftp-get-file-path", "title": "Ruby: Net::SFTP get file path", "body": "<p>How do we get the file full path in response when we use method <code>sftp.dir.entries</code>?</p>\n\n<p>I want the file content of a directory(recursive). I have used <code>sftp.dir.entries</code> method to list the files present. How should I get the contents?</p>\n"}]