[{"tags": ["ruby", "windows", "csv", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": false, "score": 0, "last_activity_date": 1515031867, "creation_date": 1515031867, "answer_id": 48087766, "question_id": 48086825, "link": "https://stackoverflow.com/questions/48086825/using-explorer-as-a-file-prompt-in-ruby/48087766#48087766", "title": "Using Explorer as a file prompt in Ruby", "body": "<p>To do what you want you have to use one of GUI libraries. <a href=\"https://www.ruby-toolbox.com/categories/gui_frameworks\" rel=\"nofollow noreferrer\">Here</a> you can choose one. </p>\n\n<p>And you also need some of <a href=\"https://www.ruby-toolbox.com/categories/packaging_to_executables.html\" rel=\"nofollow noreferrer\">these</a> to make your app an executable.</p>\n"}, {"tags": [], "owner": {"reputation": 380, "user_id": 8016768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39bfe45a303d7156e630c1bbaa3eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "chemical", "link": "https://stackoverflow.com/users/8016768/chemical"}, "is_accepted": false, "score": 0, "last_activity_date": 1515193343, "creation_date": 1515193343, "answer_id": 48122518, "question_id": 48086825, "link": "https://stackoverflow.com/questions/48086825/using-explorer-as-a-file-prompt-in-ruby/48122518#48122518", "title": "Using Explorer as a file prompt in Ruby", "body": "<p>I uses the <a href=\"https://github.com/shoes/shoes4\" rel=\"nofollow noreferrer\">shoes</a> library for my simple Ruby GUI needs.</p>\n\n<p>Then you could do something like this, of course you will need to add more code to this, but it should get you started.</p>\n\n<pre><code>Shoes.app :width =&gt; 512, :height =&gt; 384, :title =&gt; 'My App' do\n  # Browse for file button\n  stack(left: 35, top: 90) do\n    @push = button 'Browse for file'\n    note = para 'Please select an Excel file', left: 35\n    @push.click do\n      filename = ask_open_file\n      note.replace filename.to_s\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 791, "user_id": 2806421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c596a539ebafc5258d34b59c52086d3?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Sharkey", "link": "https://stackoverflow.com/users/2806421/josh-sharkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515193343, "creation_date": 1515023663, "question_id": 48086825, "link": "https://stackoverflow.com/questions/48086825/using-explorer-as-a-file-prompt-in-ruby", "title": "Using Explorer as a file prompt in Ruby", "body": "<p>I am using the CSV library in ruby to deal with large CSV files. I would like to eventually make an executable that will allow the user to select the CSV file in windows explorer instead of typing in the complete filepath. Can anyone help me with this?</p>\n\n<pre><code>#explorer prompt for file or filename\nCSV.foreach(returned_pathname) do |row|\n  #processing\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron", "api-design"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515058052, "post_id": 48086670, "comment_id": 83158697, "body": "<i>&quot;every dealer has different api url and different type structure&quot;</i> -- OK, so perhaps you could make <b>10</b> (batched) API calls from the browser (which is still a lot better than 300!!). Or, you could still perform 1 API call from the browser, and then perform these 10 3rd party calls (in parallel?) from the server; mapping their responses into a consistent format."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1515058130, "post_id": 48086670, "comment_id": 83158754, "body": "You don&#39;t need such complicated code as the sample you&#39;ve copied from rails casts, for this use case. As I answered below, <i>all</i> you need to do is send a couple of query parameters and provide a simple JSON response."}], "answers": [{"comments": [{"owner": {"reputation": 707, "user_id": 4857703, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4c429b76da33b18fb818c4890075fe6e?s=128&d=identicon&r=PG&f=1", "display_name": "Shalafister&#39;s", "link": "https://stackoverflow.com/users/4857703/shalafisters"}, "edited": false, "score": 0, "creation_date": 1515024255, "post_id": 48086776, "comment_id": 83148724, "body": "Thank you for your reply Tom. I have edited the question."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1515023250, "creation_date": 1515023250, "answer_id": 48086776, "question_id": 48086670, "link": "https://stackoverflow.com/questions/48086670/effectively-handle-300-api-calls-rails/48086776#48086776", "title": "Effectively handle 300 api calls | Rails", "body": "<p>This has got nothing to do with cron jobs. You need to reduce the total number of API calls being made, rather than focusing on how best to make the calls \"in the background\".</p>\n\n<p>The best solution would be to fetch multiple (or even <em>all</em>) data in a single API call. This principle is called \"batch queries\", and it is a fundamental design principle to avoid making hundreds of individual calls like you were originally proposing.</p>\n\n<p>For example, it could look something like:</p>\n\n<pre><code>GET /api/v1/car_prices?types[]=1&amp;types[]=2&amp;...&amp;types[]=30&amp;dealers[]=1&amp;...&amp;dealers[]=10\n\n# Response:\n[\n  {\n     type: 1,\n     dealer: 1,\n     price: 3000\n  },\n  {\n     type: 1,\n     dealer: 2,\n     price: 2500\n  },\n  # ...\n  {\n     type: 30,\n     dealer: 10,\n     price: 12000\n  }\n]\n</code></pre>\n"}], "owner": {"reputation": 707, "user_id": 4857703, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4c429b76da33b18fb818c4890075fe6e?s=128&d=identicon&r=PG&f=1", "display_name": "Shalafister&#39;s", "link": "https://stackoverflow.com/users/4857703/shalafisters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515026179, "creation_date": 1515022640, "last_edit_date": 1515026179, "question_id": 48086670, "link": "https://stackoverflow.com/questions/48086670/effectively-handle-300-api-calls-rails", "title": "Effectively handle 300 api calls | Rails", "body": "<p>I have a car table on the page and a button called refresh. When user clicks to refresh button. The controller action starts API calls first for Dealer 1 and Type 1 and Type 2 etc. till Type 30. Then it calls API for Dealer 2..</p>\n\n<p>So at the end it calls 300 requests (10*30). Then I fill the below table with jquery.</p>\n\n<pre><code>Car     |Dealer 1|    |Dealer 2|      |Dealer 3|      |..|    |Dealer 10|\nType 1                  \nType 2                  \nType 3                  \n..                  \n..                  \nType 30 \n</code></pre>\n\n<p>So the problem is it takes too much time. I'm thinking of using cron job. But as far as I know, I can not get return value from there. So I can image, I have to save the data to my database every 10 minutes or so, then when user clicks to refresh. It fetches from the database. </p>\n\n<p>Actually, I do not need to save data to my database, the idea is just to fill the table. </p>\n\n<p>Another idea, when user clicks to refresh then ruby starts cron job. It saves data after every API call. But then how can I refresh the view?               </p>\n\n<p>PS: I did not start coding that is why I can not share any code. But I could not find the way to do this effectively.</p>\n\n<p><strong>EDIT:</strong>\nAlright, I get the idea. But every dealer has different api url and different type structure. For instance; </p>\n\n<pre><code>Dealer 1;\napi.dealer1/get_prices?type1\n\nDealer 2;\napi.dealer2/fetch_prices?type_1\n\nDealer 3;\napi.dealer3/prices?TYPE1\n..\n</code></pre>\n\n<p>that is why I was thinking of writing 10 lib modules for every dealers and loop through types array. Then return push the returned data to array and fill the table with jquery (ajax). Lastly, I can send 1 Api call per second.</p>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>I have watched the video on rails casts on <a href=\"http://railscasts.com/episodes/414-batch-api-requests?autoplay=true\" rel=\"nofollow noreferrer\">batch api requests</a>.\nHe uses rack middle;</p>\n\n<pre><code>class BatchRequests\n  def initialize(app)\n    @app = app\n  end\n\n  def call(env)\n    if env[\"PATH_INFO\"] == \"/batch\"\n      request = Rack::Request.new(env.deep_dup)\n      responses = JSON.parse(request[:requests]).map do |override|\n        process_request(env.deep_dup, override)\n      end\n      [200, {\"Content-Type\" =&gt; \"application/json\"}, [{responses: responses}.to_json]]\n    else\n      @app.call(env)\n    end\n  end\n\n  def process_request(env, override)\n    path, query = override[\"url\"].split(\"?\")\n    env[\"REQUEST_METHOD\"] = override[\"method\"]\n    env[\"PATH_INFO\"] = path\n    env[\"QUERY_STRING\"] = query\n    env[\"rack.input\"] = StringIO.new(override[\"body\"].to_s)\n    status, headers, body = @app.call(env)\n    body.close if body.respond_to? :close\n    {status: status, headers: headers, body: body.join}\n  end\nend\n</code></pre>\n\n<p>But how can I insert the different urls here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1515017433, "post_id": 48085791, "comment_id": 83146684, "body": "The answer by @jdgray will probably fix the problem, but when you look at the server response, you should see lines indicating there were unpermitted parameters. That should have been your tip-off."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9170195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d40492f271ebd800df8a96da4d63d324?s=128&d=identicon&r=PG", "display_name": "Brick", "link": "https://stackoverflow.com/users/9170195/brick"}, "edited": false, "score": 0, "creation_date": 1515017507, "post_id": 48085870, "comment_id": 83146716, "body": "Thank you for your time! I&#39;m going to go fix that and hang my head in shame :)"}, {"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "reply_to_user": {"reputation": 1, "user_id": 9170195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d40492f271ebd800df8a96da4d63d324?s=128&d=identicon&r=PG", "display_name": "Brick", "link": "https://stackoverflow.com/users/9170195/brick"}, "edited": false, "score": 0, "creation_date": 1515017546, "post_id": 48085870, "comment_id": 83146722, "body": "Np, it happens :)"}], "tags": [], "owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "is_accepted": false, "score": 1, "last_activity_date": 1515017270, "creation_date": 1515017270, "answer_id": 48085870, "question_id": 48085791, "link": "https://stackoverflow.com/questions/48085791/ruby-on-rails-saving-form-check-boxes-to-boolean-in-postgres/48085870#48085870", "title": "Ruby on Rails: Saving form check boxes to Boolean in Postgres", "body": "<p>Review your <code>note_params</code> (and <code>schema.rb</code>):</p>\n\n<pre><code>def note_params\n  params.require(:note).permit(:note_title, :note_text, :note_scratch, :note_info, :note_reminder, :note_task, :note_tags, :note_remind_date, :note_remind_time, :note_archived, :note_archived_date)\nend\n</code></pre>\n\n<p>In your view: <code>notes_*</code> needs to be singular as your schema is <code>note_*</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9170195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d40492f271ebd800df8a96da4d63d324?s=128&d=identicon&r=PG", "display_name": "Brick", "link": "https://stackoverflow.com/users/9170195/brick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515017270, "creation_date": 1515016923, "question_id": 48085791, "link": "https://stackoverflow.com/questions/48085791/ruby-on-rails-saving-form-check-boxes-to-boolean-in-postgres", "title": "Ruby on Rails: Saving form check boxes to Boolean in Postgres", "body": "<p>Rails noob here, how do I get a Rails form to save a boolean checkbox to postgres? I've tried dozens of things I've found online and none of it is working. No matter what I do, the entry in the Postgres DB is \"Null\". Here is my \nModel(schema):</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20171227200151) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension \"plpgsql\"\n\n  create_table \"notes\", force: :cascade do |t|\n    t.string \"note_title\"\n    t.string \"note_text\"\n    t.boolean \"note_scratch\", default: false, null: false\n    t.boolean \"note_info\"\n    t.boolean \"note_reminder\"\n    t.boolean \"note_task\"\n    t.string \"note_tags\"\n    t.date \"note_remind_date\"\n    t.time \"note_remind_time\"\n    t.integer \"note_archived\"\n    t.date \"note_archived_date\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\nend\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;%= form_with scope: :note, url: notes_path, local: true do |f| %&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :note_title %&gt;&lt;br&gt;\n    &lt;%= f.text_field :note_title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :note_text %&gt;&lt;br&gt;\n    &lt;%= f.text_area :note_text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :notes_scratch, \"Scratch\" %&gt;\n    &lt;%= f.check_box :notes_scratch %&gt;\n    &lt;%= f.label :notes_info, \"Info\" %&gt;\n    &lt;%= f.check_box :notes_info %&gt;\n    &lt;%= f.label :notes_reminder, \"Reminder\" %&gt;\n    &lt;%= f.check_box :notes_reminder %&gt;\n    &lt;%= f.label :notes_task, \"Task\" %&gt;\n    &lt;%= f.check_box :notes_task %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :note_tags %&gt;&lt;br&gt;\n    &lt;%= f.text_field :note_tags %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :note_remind_date %&gt;&lt;br&gt;\n    &lt;%= f.date_field :note_remind_date %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :note_remind_time %&gt;&lt;br&gt;\n    &lt;%= f.time_field :note_remind_time %&gt;\n  &lt;/p&gt;\n\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>class NotesController &lt; ApplicationController\n\n  def new\n  end\n\n  def create\n# for testing\n  # render plain: params[:note].inspect\n    @note = Note.new(note_params)\n\n    @note.save\n    redirect_to @note\n  end\n\n  private\n    def note_params\n      params.require(:note).permit(:note_title, :note_text, :note_scratch, :note_info, :note_reminder, :note_task, :note_tags, :note_remind_date, :note_remind_time, :note_archived, :note_archived_date)\n  end\n\nend\n</code></pre>\n\n<p>If I just render the form results, it will show checked boxes as 1s, but it always comes up Null in the database, even if I set the datatype to Integer (hoping it would store the 1). All of the other fields record just fine. It's only the checkboxes that don't work. </p>\n\n<p>I appreciate any assistance you can lend!</p>\n\n<p>-Brick</p>\n"}, {"tags": ["ruby", "soap", "savon"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4386976, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fGjtjSOAXS4/AAAAAAAAAAI/AAAAAAAACyA/w_qUZoQuPy8/photo.jpg?sz=128", "display_name": "Isham Kalideen", "link": "https://stackoverflow.com/users/4386976/isham-kalideen"}, "edited": false, "score": 0, "creation_date": 1515023303, "post_id": 48086358, "comment_id": 83148477, "body": "Awesome. Thanks Tom. It fixed my problem."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1515020273, "creation_date": 1515020273, "answer_id": 48086358, "question_id": 48085470, "link": "https://stackoverflow.com/questions/48085470/savon-returning-nomethoderror-error/48086358#48086358", "title": "Savon returning NoMethodError error", "body": "<p>If you look at <a href=\"https://github.com/savonrb/savon/blob/73eb888b7f896d5bd0551971d26436b4eb90afd2/lib/savon/request.rb#L76-L107\" rel=\"nofollow noreferrer\">section of source code that the stack trace points to</a>, the reason for the error is fairly easy to work out:</p>\n\n<pre><code>CONTENT_TYPE = {\n  1 =&gt; \"text/xml;charset=%s\",\n  2 =&gt; \"application/soap+xml;charset=%s\"\n}\n\n# ...\n\n# This line was the cause of the error:\n@http_request.headers[\"Content-Type\"] ||= CONTENT_TYPE[@globals[:soap_version]] % @globals[:encoding]\n</code></pre>\n\n<p>The error stems from the fact that you set <code>soap_version \"2\"</code> (a <strong><code>String</code></strong>) in your client. Instead, as you can see from the hash above, it needs to be an <strong><code>Integer</code></strong>:</p>\n\n<pre><code>client = Savon.client do\n  wsdl \"http://sfds:9080/f/sca/BrokerService/WEBINF/wsdl/client/BrokerService_BrokerService.wsdl\"\n  soap_version 2 # &lt;-- !!!\nend\n</code></pre>\n\n<p>This subtle fact <a href=\"http://savonrb.com/version2/globals.html\" rel=\"nofollow noreferrer\">is documented</a> by the library.</p>\n"}], "owner": {"reputation": 43, "user_id": 4386976, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fGjtjSOAXS4/AAAAAAAAAAI/AAAAAAAACyA/w_qUZoQuPy8/photo.jpg?sz=128", "display_name": "Isham Kalideen", "link": "https://stackoverflow.com/users/4386976/isham-kalideen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 48086358, "answer_count": 1, "score": 1, "last_activity_date": 1515020273, "creation_date": 1515015412, "question_id": 48085470, "link": "https://stackoverflow.com/questions/48085470/savon-returning-nomethoderror-error", "title": "Savon returning NoMethodError error", "body": "<p>I'm new to Savon, getting <code>configure_headers': undefined method</code>%' for nil:NilClass (NoMethodError) error when trying to send a soap request\nmy code looks like this</p>\n\n<pre><code>client = Savon.client do\n  wsdl \"http://sfds:9080/f/sca/BrokerService/WEBINF/wsdl/client/BrokerService_BrokerService.wsdl\"\n  soap_version \"2\"\nend\n\nresponse =  client.call(:get_broker_details, message: { brokerId: 'testbroker' })\n</code></pre>\n\n<p>Request through SoapUI looks like this </p>\n\n<pre><code>&lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" \n xmlns:oas=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-\n wssecurity-secext-1.0.xsd\" \n xmlns:xyz=\"http://xml.bnz.co.nz/bnzintegrationcommon/BNZServiceHeadeV120\" \n xmlns:brok=\"http://xml.xyz.co.nz/brokerservice/BrokerService\"&gt;\n   &lt;soap:Header&gt;\n     &lt;oas:Security&gt;\n     &lt;!--Optional:--&gt;\n     &lt;oas:UsernameToken&gt;\n        &lt;oas:Username&gt;&lt;/oas:Username&gt;\n        &lt;oas:Password&gt;&lt;/oas:Password&gt;\n     &lt;/oas:UsernameToken&gt;\n  &lt;/oas:Security&gt;\n     &lt;x:serviceHeaderV120&gt;\n     &lt;user&gt;\n        &lt;channel&gt;BKLP&lt;/channel&gt;\n        &lt;!--Optional:--&gt;\n        &lt;id idType=\"staffId\"&gt;631447&lt;/id&gt;\n        &lt;!--Optional:--&gt;\n        &lt;subId&gt;&lt;/subId&gt;\n        &lt;!--Optional:--&gt;\n        &lt;location&gt;BRCH0573&lt;/location&gt;\n     &lt;/user&gt;\n     &lt;application&gt;\n        &lt;id&gt;1&lt;/id&gt;\n        &lt;!--Optional:--&gt;\n        &lt;correlationToken&gt;11111&lt;/correlationToken&gt;\n     &lt;/application&gt;\n  &lt;/x:serviceHeaderV120&gt;\n&lt;/soap:Header&gt;\n &lt;soap:Body&gt;\n    &lt;brok:getBrokerDetails&gt;\n       &lt;getBrokerDetailsRequest&gt;\n         &lt;brokerId&gt;ZS1002&lt;/brokerId&gt;\n       &lt;/getBrokerDetailsRequest&gt;\n    &lt;/brok:getBrokerDetails&gt;\n &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>will highly appreciate any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "post", "request"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1515015229, "post_id": 48085384, "comment_id": 83145769, "body": "I don&#39;t know about postman, it would be best if you showed how exactly your http request looked like."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1515041414, "post_id": 48085384, "comment_id": 83152238, "body": "Try changing <code>params.require(:member).permit</code> to <code>params.permit</code> as you are not sending the params nested in <code>member</code> key."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 9169373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TE3xT.jpg?s=128&g=1", "display_name": "eftikhar", "link": "https://stackoverflow.com/users/9169373/eftikhar"}, "is_accepted": false, "score": -2, "last_activity_date": 1515015219, "creation_date": 1515015219, "answer_id": 48085433, "question_id": 48085384, "link": "https://stackoverflow.com/questions/48085384/ruby-on-rails-api-post-request-not-working/48085433#48085433", "title": "Ruby on Rails API =&gt; POST request not working", "body": "<p>I think your json should look like \n<code>{member:{emai:___, password:_____}}</code></p>\n"}, {"tags": [], "owner": {"reputation": 1864, "user_id": 5441799, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E408y.jpg?s=128&g=1", "display_name": "Bricky", "link": "https://stackoverflow.com/users/5441799/bricky"}, "is_accepted": false, "score": 0, "last_activity_date": 1515016662, "last_edit_date": 1515016662, "creation_date": 1515015241, "answer_id": 48085439, "question_id": 48085384, "link": "https://stackoverflow.com/questions/48085384/ruby-on-rails-api-post-request-not-working/48085439#48085439", "title": "Ruby on Rails API =&gt; POST request not working", "body": "<p>Your <code>member_params</code> function requires that a <code>member</code> is passed to it, which is not included in the params you're sending from Postman.</p>\n\n<p>You're not seeing anything being printed because the <code>member_params</code> function is a <code>before_action</code>, which means it happens before your login function is called.</p>\n\n<p>Change your content in Postman to include it.</p>\n\n<pre><code>{ \n    \"member\":\n        {\n            \"email\": \"email address\",\n            \"password\": \"password\"\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8016521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d114bc2b315cbff28fab1210bf4f0840?s=128&d=identicon&r=PG&f=1", "display_name": "kenr16", "link": "https://stackoverflow.com/users/8016521/kenr16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515021295, "creation_date": 1515014961, "last_edit_date": 1515021295, "question_id": 48085384, "link": "https://stackoverflow.com/questions/48085384/ruby-on-rails-api-post-request-not-working", "title": "Ruby on Rails API =&gt; POST request not working", "body": "<p>I am currently using Postman to make a POST request to the following route: 'localhost:3000/members/login'.  The content of the post request is as follows:</p>\n\n<pre><code>{ \n  \"email\": \"user@email.com\",\n  \"password\": \"password\"\n}\n</code></pre>\n\n<p>The route is defined as follows:</p>\n\n<pre><code>def login\n  puts params.inspect\n  puts member_params.to_s\n  member = Member.find_by(email: params[:email].to_s.downcase)\nend\n...\ndef member_params\n  params.require(:member).permit(:email, :password, :password_confirmation)\nend\n</code></pre>\n\n<p>and the output that I receive at the console is as follows:</p>\n\n<pre><code>Started POST \"/members/login\" for 127.0.0.1 at 2018-01-02 18:56:28 -0800\n(2.5ms)  SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC\nProcessing by MembersController#login as */*\n&lt;ActionController::Parameters {\"controller\"=&gt;\"members\", \"action\"=&gt;\"login\"} permitted: false&gt;\nCompleted 400 Bad Request in 1ms (ActiveRecord: 0.0ms)\n\n\n\nActionController::ParameterMissing (param is missing or the value is empty: member):\n\napp/controllers/members_controller.rb:94:in `member_params'\napp/controllers/members_controller.rb:65:in `login'\n</code></pre>\n\n<p>As you may have guessed, I am rather new to this.  What I am specifically looking for is the following:</p>\n\n<p>1) Is there a quick fix as to why the parameters (email and password) are not being passed into the API from the Postman POST request to help me get this working and </p>\n\n<p>2) To make the answer more generally helpful to future people who might google this question, is there a quick checklist of recommended steps to take when an API call (specifically POST request) does not pass in parameters as intended?      </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1515013779, "creation_date": 1515013779, "answer_id": 48085165, "question_id": 48085122, "link": "https://stackoverflow.com/questions/48085122/how-pundit-passes-current-user-to-authorize-method/48085165#48085165", "title": "How Pundit passes current_user to authorize method?", "body": "<p>From <a href=\"https://github.com/varvet/pundit/blob/0e3a11cf3ee0dd914babc989dbc6ff7f61ec8e77/README.md\" rel=\"nofollow noreferrer\">pundit readme</a>:</p>\n\n<blockquote>\n  <p>The first argument is a user. In your controller, Pundit will call the current_user method to retrieve what to send into this argument</p>\n</blockquote>\n\n<p>From <a href=\"https://github.com/varvet/pundit/blob/ac2a25d93ccd044ac3ea777a70ffd5e31db10d3a/lib/pundit.rb#L269\" rel=\"nofollow noreferrer\">pundit.rb</a> file:</p>\n\n<pre><code>def pundit_user\n  current_user\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 3653794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7472086aad8ce892c9cfd876d120def0?s=128&d=identicon&r=PG&f=1", "display_name": "rkm", "link": "https://stackoverflow.com/users/3653794/rkm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 48085165, "answer_count": 1, "score": 2, "last_activity_date": 1515013779, "creation_date": 1515013543, "question_id": 48085122, "link": "https://stackoverflow.com/questions/48085122/how-pundit-passes-current-user-to-authorize-method", "title": "How Pundit passes current_user to authorize method?", "body": "<p><code>Pundit</code>'s <code>authorize</code> takes 3 arguments, but in the controller you just need to pass 2, current_user is passed automatically. How is <code>current_user</code> passed?\nI looked at Pundit's code, but couldn't figure it out.</p>\n"}, {"tags": ["ruby", "rspec", "rspec-mocks"], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1515041493, "post_id": 48085963, "comment_id": 83152265, "body": "I am with you on this."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 2, "last_activity_date": 1515017752, "creation_date": 1515017752, "answer_id": 48085963, "question_id": 48085026, "link": "https://stackoverflow.com/questions/48085026/issue-with-spies-in-rspec/48085963#48085963", "title": "Issue with spies in Rspec", "body": "<p>Not exactly sure what your code is doing, but my suspicion is that calling <code>arr.send(:store)</code> returns a different object each time. Try modifying like this:</p>\n\n<pre><code>it \"shifts/unshifts without O(n) copying\" do\n  arr = RingBuffer.new\n  store = arr.send(:store)\n\n  allow(store).to receive(:[]=).and_call_original\n  8.times do |i|\n    arr.unshift(i)\n  end\n\n  # Should involve 8 sets to unshift, no more.\n  expect(store).to have_received(:[]=).exactly(8).times\nend\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3471817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80d53373d66fdb8b1fd49b2d8095da6b?s=128&d=identicon&r=PG&f=1", "display_name": "amac", "link": "https://stackoverflow.com/users/3471817/amac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 48085963, "answer_count": 1, "score": 0, "last_activity_date": 1515017752, "creation_date": 1515013077, "question_id": 48085026, "link": "https://stackoverflow.com/questions/48085026/issue-with-spies-in-rspec", "title": "Issue with spies in Rspec", "body": "<p>Having trouble figuring out why:</p>\n\n<pre><code>it \"shifts/unshifts without O(n) copying\" do\n  arr = RingBuffer.new\n\n  allow(arr.send(:store)).to receive(:[]=).and_call_original\n  8.times do |i|\n    arr.unshift(i)\n  end\n\n  # Should involve 8 sets to unshift, no more.\n  expect(arr.send(:store)).to have_received(:[]=).exactly(8).times\nend\n</code></pre>\n\n<p>results in:</p>\n\n<p>\"Failure/Error: expect(arr.store).to have_received(:[]=).exactly(8).times\n       # expected to have received []=, but that object is not a spy or method has not been stubbed.\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "deployment", "capistrano", "passenger"], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 1, "last_activity_date": 1515015156, "creation_date": 1515015156, "answer_id": 48085421, "question_id": 48084969, "link": "https://stackoverflow.com/questions/48084969/authentication-failed-for-user-netsshauthenticationfailed/48085421#48085421", "title": "Authentication failed for user Net::SSH::AuthenticationFailed", "body": "<p>It could be a number of things, but from the looks of it the public key you presumably added isn't for the <code>deploy</code> user. Ensure that it exists in <code>/home/deploy/.ssh</code> (or whatever its home directory is)</p>\n\n<p>Make sure you're able to log in to the server with <code>ssh deploy@35.190.186.40</code> \u2014 if you generated a separate key for your deploy user you can use the <code>-i</code> flag to specify the path to the keyfile. </p>\n\n<p><code>ssh -i ~/Desktop/deploy_id_rsa.pub deploy@35.190.186.40</code></p>\n"}], "owner": {"reputation": 514, "user_id": 3170199, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000504183307/picture?type=large", "display_name": "Ayaz Ahmad Tarar", "link": "https://stackoverflow.com/users/3170199/ayaz-ahmad-tarar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 48085421, "answer_count": 1, "score": 1, "last_activity_date": 1515015156, "creation_date": 1515012772, "question_id": 48084969, "link": "https://stackoverflow.com/questions/48084969/authentication-failed-for-user-netsshauthenticationfailed", "title": "Authentication failed for user Net::SSH::AuthenticationFailed", "body": "<p>I am trying to deploy my app to ubuntu server but I am getting error. I have added my key in server authorized keys.I am using Google computer server for server purpose.I am unable to find any solution all solutions leads to authorization key in server ssh folder and I have already added that. Does anyone faced same problem? here is a code: </p>\n\n<pre><code>Ayazs-MBP:peatio_exchange ayaz$ cap production deploy\n00:00 rbenv:validate\n      rbenv: rbenv_ruby is not set; ruby version will be defined by the remote \u2026\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as deploy@35.190.186.40: Authentication failed for user deploy@35.190.186.40\n\n\nCaused by:\nNet::SSH::AuthenticationFailed: Authentication failed for user deploy@35.190.186.40\n\nTasks: TOP =&gt; rbenv:map_bins =&gt; passenger:rbenv:hook =&gt; passenger:test_which_passenger\n(See full trace by running task with --trace)\nAyazs-MBP:peatio_exchange ayaz$ \n</code></pre>\n\n<p>My gems are</p>\n\n<pre><code>group :development do\n    gem 'capistrano',         require: false\n    gem 'capistrano-rvm',     require: false\n    gem 'capistrano-rails',   require: false\n    gem 'capistrano-bundler', require: false\n    gem 'capistrano3-puma',   require: false\n    gem 'capistrano-passenger'\n    gem 'capistrano-rbenv', '~&gt; 2.0', require: false\n  end\n</code></pre>\n\n<p>cap file is </p>\n\n<pre><code># Load DSL and set up stages\nrequire \"capistrano/setup\"\n\n# Include default deployment tasks\nrequire \"capistrano/deploy\"\n\n# Load the SCM plugin appropriate to your project:\n#\n# require \"capistrano/scm/hg\"\n# install_plugin Capistrano::SCM::Hg\n# or\n# require \"capistrano/scm/svn\"\n# install_plugin Capistrano::SCM::Svn\n# or\nrequire \"capistrano/scm/git\"\ninstall_plugin Capistrano::SCM::Git\n\n# Include tasks from other gems included in your Gemfile\n#\n# For documentation on these, see for example:\n#\n#   https://github.com/capistrano/rvm\n#   https://github.com/capistrano/rbenv\n#   https://github.com/capistrano/chruby\n#   https://github.com/capistrano/bundler\n#   https://github.com/capistrano/rails\n#   https://github.com/capistrano/passenger\n#\nrequire \"capistrano/rails\"\n# require \"capistrano/rvm\"\nrequire \"capistrano/rbenv\"\n# require \"capistrano/chruby\"\nrequire \"capistrano/bundler\"\nrequire \"capistrano/rails/assets\"\nrequire \"capistrano/rails/migrations\"\nrequire \"capistrano/passenger\"\n\n# Load custom tasks from `lib/capistrano/tasks` if you have any defined\nDir.glob(\"lib/capistrano/tasks/*.rake\").each { |r| import r }\n</code></pre>\n\n<p>Deploy.rb</p>\n\n<pre><code>lock \"~&gt; 3.10.1\"\n\nset :application, \"peatio_exchange\"\nset :repo_url, \"https://github.com/ayazahmadtarar/peatio_exchange.git\"\n</code></pre>\n\n<p>Production.rb</p>\n\n<pre><code>server \"35.190.186.40\",\n  user: \"deploy\",\n  roles: %w{web app},\n  ssh_options: {\n    user: \"deploy\", # overrides user setting above\n    keys: %w(/home/deploy/.ssh/id_rsa),\n    forward_agent: false,\n    auth_methods: %w(publickey password)\n    # password: \"please use keys\"\n  }\n</code></pre>\n"}, {"tags": ["ruby", "iso8601"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1515036513, "post_id": 48084783, "comment_id": 83151273, "body": "Read the definition."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1515012441, "post_id": 48084840, "comment_id": 83144583, "body": "FWIW, this matches up with most other date libraries I am familiar with, and AFAIK also with accounting laws in my country."}], "tags": [], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 11, "last_activity_date": 1515012183, "creation_date": 1515012183, "answer_id": 48084840, "question_id": 48084783, "link": "https://stackoverflow.com/questions/48084783/why-does-the-number-week-of-the-year-start-with-1-or-0-depending-on-the-year/48084840#48084840", "title": "Why does the number week of the year start with 1 or 0 depending on the year?", "body": "<p>From the <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime\" rel=\"noreferrer\">Ruby docs</a></p>\n\n<blockquote>\n  <p>Week number:</p>\n  \n  <p>The week 1 of YYYY starts with a Sunday or Monday (according to <code>%U</code>\n  or <code>%W</code>).  The days in the year before the first week are in week 0.</p>\n  \n  <p><code>%U - Week number of the year.  The week starts with Sunday.  (00..53)</code></p>\n</blockquote>\n\n<p>So it seems that Ruby identifies the \"first week\" (week 1) as starting with the first Sunday of the year. Anything that happens to come before that exists in week 0. 2017 happened to start on a Sunday, so the first day started the first week. However, 2018 started on a Monday, so week 1 of 2018 will start on January 7th, the first Sunday of the year.</p>\n"}, {"tags": [], "owner": {"reputation": 3482, "user_id": 349961, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0ff0e85075678eaabae0aeb5a857ab53?s=128&d=identicon&r=PG", "display_name": "santuxus", "link": "https://stackoverflow.com/users/349961/santuxus"}, "is_accepted": false, "score": 1, "last_activity_date": 1516190353, "creation_date": 1516190353, "answer_id": 48300660, "question_id": 48084783, "link": "https://stackoverflow.com/questions/48084783/why-does-the-number-week-of-the-year-start-with-1-or-0-depending-on-the-year/48300660#48300660", "title": "Why does the number week of the year start with 1 or 0 depending on the year?", "body": "<p>To show week numbers according to ISO-8601, use <code>%V</code>:</p>\n\n<pre><code># %V - Week number of the week-based year (01..53)    \nDate.strptime('2017-01-01', '%Y-%m-%d').strftime('%Y-%m-%d  %V') #2017-01-01  52\nDate.strptime('2018-01-01', '%Y-%m-%d').strftime('%Y-%m-%d  %V') #2018-01-01  01\n</code></pre>\n\n<p>In general:</p>\n\n<blockquote>\n  <p>Week number according to the ISO-8601 standard, weeks starting on Monday. The first week of the year is the week that contains that year's first Thursday (='First 4-day week').</p>\n</blockquote>\n\n<p><a href=\"https://www.epochconverter.com/weeknumbers\" rel=\"nofollow noreferrer\">https://www.epochconverter.com/weeknumbers</a></p>\n"}], "owner": {"reputation": 741, "user_id": 8651469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d299433434cc06cc471833faaf71b05?s=128&d=identicon&r=PG&f=1", "display_name": "devsaki", "link": "https://stackoverflow.com/users/8651469/devsaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 1, "accepted_answer_id": 48084840, "answer_count": 2, "score": 6, "last_activity_date": 1516190353, "creation_date": 1515011922, "last_edit_date": 1515048557, "question_id": 48084783, "link": "https://stackoverflow.com/questions/48084783/why-does-the-number-week-of-the-year-start-with-1-or-0-depending-on-the-year", "title": "Why does the number week of the year start with 1 or 0 depending on the year?", "body": "<p>Why does the number of the week of the year start with 1 in 2017 and 0 in 2018?</p>\n\n<pre><code>Date.strptime('2017-01-01', '%Y-%m-%d').strftime('%Y-%m-%d    %U') #2017-01-01    01\nDate.strptime('2018-01-01', '%Y-%m-%d').strftime('%Y-%m-%d    %U') #2018-01-01    00\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1515008905, "post_id": 48084057, "comment_id": 83143074, "body": "Sure, that seems fine."}], "answers": [{"comments": [{"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1515019683, "post_id": 48084180, "comment_id": 83147483, "body": "thx - the question probably wasn&#39;t worded as well. This is &#39;debugging&#39; for why values are a certain way (ie nonexistent) for sales managers."}], "tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1515008923, "creation_date": 1515008923, "answer_id": 48084180, "question_id": 48084057, "link": "https://stackoverflow.com/questions/48084057/how-to-store-temporary-attributes-on-an-active-record-model/48084180#48084180", "title": "how to store temporary attributes on an Active Record model", "body": "<p>For debugging purposes I would use logging with the appropriate log level. This way the object behavior does not get messed up with the debugging. </p>\n\n<p>In addition, the debug log level can (should) be disabled in production environments, but adding logic inside your models will not make it so easy.</p>\n"}, {"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1515011159, "post_id": 48084361, "comment_id": 83144035, "body": "Based on the docs, it seems that <code>attribute</code> is used in relation to a database column. Am I mis-reading that?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1515012361, "post_id": 48084361, "comment_id": 83144544, "body": "@jvillian it works in the model also <code>attribute :my_int_array, :integer, array: true</code> check that part"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1515013027, "post_id": 48084361, "comment_id": 83144872, "body": "Oh wow. I&#39;m sorry. It says right there in black-and-white: &quot;Attributes do not need to be backed by a database column.&quot; Apologies."}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1515019578, "post_id": 48084361, "comment_id": 83147440, "body": "nice solution - wasn&#39;t familiar with this feature. will be using in future. This is why I will ask a lot of ?&#39;s on SO."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 6, "last_activity_date": 1515009758, "creation_date": 1515009758, "answer_id": 48084361, "question_id": 48084057, "link": "https://stackoverflow.com/questions/48084057/how-to-store-temporary-attributes-on-an-active-record-model/48084361#48084361", "title": "how to store temporary attributes on an Active Record model", "body": "<p>What you're looking for is <code>attribute</code></p>\n\n<pre><code>class Bid &lt; ApplicationRecord\n  attribute :debug_reasons, :default =&gt; []\nend\n</code></pre>\n\n<p>More info on <code>attribute</code> <a href=\"http://api.rubyonrails.org/v5.0/classes/ActiveRecord/Attributes/ClassMethods.html#method-i-attribute\" rel=\"noreferrer\">http://api.rubyonrails.org/v5.0/classes/ActiveRecord/Attributes/ClassMethods.html#method-i-attribute</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 916996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c05b8133b9c7c279af22287182f97b5c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/916996/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1515016040, "creation_date": 1515016040, "answer_id": 48085588, "question_id": 48084057, "link": "https://stackoverflow.com/questions/48084057/how-to-store-temporary-attributes-on-an-active-record-model/48085588#48085588", "title": "how to store temporary attributes on an Active Record model", "body": "<p>I agree with <a href=\"https://stackoverflow.com/a/48084180/916996\">Bustikiller</a> that, for debugging purposes, logging the messages is a better option rather than changing your production code.</p>\n\n<p>But, If you really need it, I would use the ruby <code>attr_accessor</code> method rather than the <a href=\"http://api.rubyonrails.org/v5.0/classes/ActiveRecord/Attributes/ClassMethods.html#method-i-attribute\" rel=\"nofollow noreferrer\">ActiveRecord::Base.attribute</a> method because the former doesn't expose an internal attribute as a model attribute.</p>\n\n<p>The model attributes should be properties of the entity your model implements. A debug/internal method (such as #object_id and #to_s) should not be considered as an attribute and, therefore, they should not appear on attribute list (i.e. when you call <code>#attributes</code> on a model instance). By using the <code>.attribute</code> from ActiveRecord, you define <code>debug_messages</code> as an attribute of <code>Bid</code> which, I think, may not be an property of your Bid domain.</p>\n\n<p>So, using the <code>attr_accessor</code> you don't pollute the ActiveModel API with an internal/logic attribute.</p>\n"}], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1553, "favorite_count": 0, "accepted_answer_id": 48084361, "answer_count": 3, "score": 3, "last_activity_date": 1515016040, "creation_date": 1515008298, "question_id": 48084057, "link": "https://stackoverflow.com/questions/48084057/how-to-store-temporary-attributes-on-an-active-record-model", "title": "how to store temporary attributes on an Active Record model", "body": "<p>I would like to store some debug messages on an object as it can go through processing but I don't want to be storing this to the database. Is something like this a reasonable way, an instance variable wrapped in a method with a nil guard? Or is there a better way / pattern? </p>\n\n<pre><code>class Bid &lt; ApplicationRecord\n  ...\n  def debug_reasons\n     @debug_reasons ||= []\n  end\n  ...\n</code></pre>\n\n<p>and then </p>\n\n<pre><code>bid.debug_reasons &lt;&lt; \"here is a reason\"\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "is_accepted": true, "score": 0, "last_activity_date": 1515007174, "creation_date": 1515007174, "answer_id": 48083814, "question_id": 48083519, "link": "https://stackoverflow.com/questions/48083519/running-a-query-that-displays-specific-locations-that-match-dependent-criteria/48083814#48083814", "title": "running a query that displays specific locations that match dependent criteria (ruby)", "body": "<p>You want to use a <code>join</code> operator. Just like you did in locations_query for the <code>customers</code> table, you need to join <code>ticket_locations</code>. Assuming thats the name of the relationship:</p>\n\n<pre><code>master_ticket_locations = locations_query.joins(:ticket_locations).where(ticket_locations: {ticket_id: identify})\n</code></pre>\n\n<p>See the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#joining-tables\" rel=\"nofollow noreferrer\" title=\"Rails Guide\">Rails Guide</a> for more info</p>\n"}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 48083814, "answer_count": 1, "score": 0, "last_activity_date": 1515007174, "creation_date": 1515005921, "question_id": 48083519, "link": "https://stackoverflow.com/questions/48083519/running-a-query-that-displays-specific-locations-that-match-dependent-criteria", "title": "running a query that displays specific locations that match dependent criteria (ruby)", "body": "<p>I have a <code>locations</code> and I have <code>ticket_locations</code>.  The <code>locations</code> have many <code>ticket_locations</code>.  What I need to do is pull in only specific <code>locations</code> that own a specific type of <code>ticket_locations</code> that match a certain kind of ID.  </p>\n\n<p>I've been able to pull the <code>locations</code>, and I've been able to pull in the <code>ticket_locations</code>. </p>\n\n<p>My ID's that I need to be set are </p>\n\n<pre><code>identify = [2, 3]\n</code></pre>\n\n<p>My search for the parent locations is below. This gives me three locations. (yes they are owned by customers) </p>\n\n<pre><code>locations_query = Location.joins(:customers).where('customers.id in (?)', @customers.map(&amp;:id)) \n</code></pre>\n\n<p>My search for the <code>ticket_locations</code> is below. This gives me 5 <code>ticket_locations</code>. 2 belong to the first location. 2 belong to the second location, and only 1 belongs to the third. </p>\n\n<pre><code>ticket_locations = LocationTicket.where(ticket_id: identify)\n</code></pre>\n\n<p>What I need (and am struggling with) is to run a search for the parent Locations that only pull in the locations that have <code>ticket_locations</code> that match both IDs in the <code>identify</code> array. </p>\n\n<p>I've tried something along the lines of </p>\n\n<pre><code>master_ticket_locations = locations_query.where(ticket_id: zip_ticket_locations) \n</code></pre>\n\n<p>But since <code>ticket_id</code> is a class name in the <code>ticket_locations</code> and not the <code>locations_query</code> i've been having trouble. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1515005839, "post_id": 48083431, "comment_id": 83141661, "body": "Best practice is to name your arrays with a plural. I would change <code>@post</code> to <code>@posts</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "edited": false, "score": 0, "creation_date": 1515006191, "post_id": 48083499, "comment_id": 83141830, "body": "I feel like this would be the answer but the moment I add it I get undefined method on my second image (updated the code to show this)."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "edited": false, "score": 1, "creation_date": 1515006392, "post_id": 48083499, "comment_id": 83141913, "body": "@Jake yup, you now have to check if the second element of this slice exists. I edited my answer to reflect this."}, {"owner": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "edited": false, "score": 0, "creation_date": 1515006733, "post_id": 48083499, "comment_id": 83142066, "body": "That fixed the issue."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1515006348, "last_edit_date": 1515006348, "creation_date": 1515005770, "answer_id": 48083499, "question_id": 48083431, "link": "https://stackoverflow.com/questions/48083431/in-rails-how-to-exclude-do-an-index-position-on-an-each-slice/48083499#48083499", "title": "In Rails how to exclude do an index position on an each_slice?", "body": "<p>You can easily get rid of the first element of an array to iterate over the rest (in a way you want), using <code>[]</code> operator:</p>\n\n<pre><code>&lt;% @post[1..-1].each_slice(2) do |post, b| %&gt;\n  # ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>also, I guess you should check if the second post exists (in case your array is even, like in your example), like this:</p>\n\n<pre><code>&lt;% if b %&gt;\n  &lt;%= b.number %&gt;\n  &lt;%= image_tag b.post_image %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 3, "last_activity_date": 1515005983, "creation_date": 1515005983, "answer_id": 48083541, "question_id": 48083431, "link": "https://stackoverflow.com/questions/48083431/in-rails-how-to-exclude-do-an-index-position-on-an-each-slice/48083541#48083541", "title": "In Rails how to exclude do an index position on an each_slice?", "body": "<p>Do something like this </p>\n\n<pre><code>&lt;% @post.drop(1).each_slice(2) do |post, b| %&gt;\n  # ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will produce output like this.</p>\n\n<pre><code>[2, 3]\n[4, 5]\n[6, 7]\n[8, 9]\n[10]\n</code></pre>\n"}], "owner": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 48083499, "answer_count": 2, "score": 0, "last_activity_date": 1515006348, "creation_date": 1515005422, "last_edit_date": 1515006002, "question_id": 48083431, "link": "https://stackoverflow.com/questions/48083431/in-rails-how-to-exclude-do-an-index-position-on-an-each-slice", "title": "In Rails how to exclude do an index position on an each_slice?", "body": "<p>I have an array of posts with the following numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10].</p>\n\n<p>In my ERB I have the following:</p>\n\n<pre><code>&lt;% @post.each_slice(2) do |post, b| %&gt;\n &lt;% if post.number != 1 %&gt;\n  &lt;%= post.number %&gt;\n  &lt;%= image_tag post.post_image %&gt;\n\n  &lt;%= b.number %&gt;\n  &lt;%= image_tag b.post_image %&gt;\n &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Basically I want rows of the following:</p>\n\n<pre><code>[2, 3]\n[4, 5]\n[6, 7]\n[8, 9]\n[10]\n</code></pre>\n\n<p>When I use the code above I end up with:</p>\n\n<pre><code>[3, 4]\n[5, 6]\n[7, 8]\n[9, 10]\n</code></pre>\n\n<p>I kind of understand why. I'm basically saying slice into two and then I'm saying \"well get rid of 1\" so that gets rid of 1 and 2. What's the simplest way to say each_slice starting at index 1?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 2, "creation_date": 1515002777, "post_id": 48082812, "comment_id": 83140061, "body": "Do you have a question?"}, {"owner": {"reputation": 6885, "user_id": 123422, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ft4KH.jpg?s=128&g=1", "display_name": "Paul Abbott", "link": "https://stackoverflow.com/users/123422/paul-abbott"}, "edited": false, "score": 0, "creation_date": 1515002999, "post_id": 48082812, "comment_id": 83140175, "body": "Are you setting the content type to <code>text&#47;html</code>? <a href=\"https://stackoverflow.com/questions/17980631/how-to-send-html-content-in-email-from-net-smtp-in-ruby\" title=\"how to send html content in email from net smtp in ruby\">stackoverflow.com/questions/17980631/&hellip;</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1515004056, "post_id": 48082812, "comment_id": 83140706, "body": "What is <code>edit_password_reset_home_index_url</code>? Please how that route is difined in your <code>config&#47;routes.rb</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1515003010, "creation_date": 1515003010, "answer_id": 48082885, "question_id": 48082812, "link": "https://stackoverflow.com/questions/48082812/email-text-showing-link-as-code/48082885#48082885", "title": "Email text showing link as code", "body": "<p>Change your file name from <code>password.text.erb</code> to <code>password.html.erb</code>.</p>\n\n<p>This will solve your problem.</p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515003010, "creation_date": 1515002662, "question_id": 48082812, "link": "https://stackoverflow.com/questions/48082812/email-text-showing-link-as-code", "title": "Email text showing link as code", "body": "<p>When i send a link in email, it appears as</p>\n\n<pre><code>&lt;a href=\"http://www.tipestrygo.com/home/edit_password_reset.f9TyDqoowXOBQG6ha_qhwg\"&gt;Change my password&lt;/a&gt;\n</code></pre>\n\n<p>password.text.erb</p>\n\n<pre><code>&lt;%= link_to 'Change my password', edit_password_reset_home_index_url(@user.password_reset_token) %&gt;\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1515002436, "post_id": 48082701, "comment_id": 83139880, "body": "you can&#39;t just add <code>target=&quot;_BLANK&quot;</code>  inside the anchor tag in the nav_items loop?  Where are you looking to try to achieve this exactly, in the nav_items method?"}, {"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1515008726, "post_id": 48082701, "comment_id": 83142978, "body": "Maybe it would make sense to use the existing Rails helpers like <code>content_tag</code> to generate the HTML elements. In addition, the usage of the <code>html_safe</code> method in that case may lead to XSS attacks if the <code>url</code> or <code>title</code> could me modified from the outside."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8804560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3b6f98400ebff4f3de38bd14d1a580?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/8804560/kyle"}, "edited": false, "score": 0, "creation_date": 1515008084, "post_id": 48082789, "comment_id": 83142691, "body": "I just tried this and it is making each link open in a new tab, since it&#39;s an each do block. It works, but I want it just on the &#39;shop&#39; link."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 65, "user_id": 8804560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3b6f98400ebff4f3de38bd14d1a580?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/8804560/kyle"}, "edited": false, "score": 0, "creation_date": 1515008890, "post_id": 48082789, "comment_id": 83143061, "body": "Ah sorry, missed that. I&#39;ve updated now but can&#39;t check as I&#39;m only on me phone. Hopefully that&#39;ll sort it :)"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 0, "last_activity_date": 1515008790, "last_edit_date": 1515008790, "creation_date": 1515002574, "answer_id": 48082789, "question_id": 48082701, "link": "https://stackoverflow.com/questions/48082701/opening-nav-links-in-new-tab/48082789#48082789", "title": "Opening nav links in new tab", "body": "<p>Just add the <code>target=\"_blank\"</code> in here (see the <code>a</code> tag):</p>\n\n<pre><code>nav_items.each do |item|\n  nav_links &lt;&lt; \"&lt;#{tag_type}&gt;&lt;a href='#{item[:url]}' #{'target=\\\"_blank\\\"' if item[:title] == 'Shop'} class='#{style} #{active? item[:url]}'&gt;#{item[:title]}&lt;/a&gt;&lt;/#{tag_type}&gt;\"\nend\n</code></pre>\n\n<p>I think that should do ya? Hope that helps - let me know if not and I'll see if there's anything else I can think of :)</p>\n"}, {"tags": [], "owner": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "is_accepted": false, "score": 0, "last_activity_date": 1515008495, "creation_date": 1515008495, "answer_id": 48084096, "question_id": 48082701, "link": "https://stackoverflow.com/questions/48082701/opening-nav-links-in-new-tab/48084096#48084096", "title": "Opening nav links in new tab", "body": "<pre><code>def nav_items\n  [\n    {\n      url: root_path,\n      title: 'Home'\n    },\n    {\n      url: shop_path,\n      title: 'Shop', \n      target: '_blank'  # Now a String\n    },\n    {\n      url: subscribe_path,\n      title: 'Subscribe'\n    },\n    {\n      url: about_path,\n      title: 'About'\n    },\n    {\n      url: contact_path,\n      title: 'Contact'\n    },\n  ]\nend\n\ndef nav_helper style, tag_type\n  nav_links = ''\n\n  nav_items.each do |item|\n    # Print target= if item[:target] is set\n    nav_links &lt;&lt; \"&lt;#{tag_type}&gt;&lt;a href='#{item[:url]}' #{\"target=\" + item[:target] if item[:target]} class='#{style} #{active? item[:url]}'&gt;#{item[:title]}&lt;/a&gt;&lt;/#{tag_type}&gt;\"\n  end\n\n  nav_links.html_safe\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8804560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3b6f98400ebff4f3de38bd14d1a580?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/8804560/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 48082789, "answer_count": 2, "score": 0, "last_activity_date": 1515008790, "creation_date": 1515002233, "question_id": 48082701, "link": "https://stackoverflow.com/questions/48082701/opening-nav-links-in-new-tab", "title": "Opening nav links in new tab", "body": "<p>Im wanting to make the 'shop' page open in a new tab, i know you can do target: :_blank on hrefs and link_to, but I can't figure out how to set it on here. Any help is appreciated. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> def nav_items\r\n    [\r\n      {\r\n        url: root_path,\r\n        title: 'Home'\r\n      },\r\n      {\r\n        url: shop_path,\r\n        title: 'Shop', target: :_blank\r\n      },\r\n      {\r\n        url: subscribe_path,\r\n        title: 'Subscribe'\r\n      },\r\n      {\r\n        url: about_path,\r\n        title: 'About'\r\n      },\r\n      {\r\n        url: contact_path,\r\n        title: 'Contact'\r\n      },\r\n    ]\r\n  end\r\n\r\n  def nav_helper style, tag_type\r\n    nav_links = ''\r\n\r\n    nav_items.each do |item|\r\n      nav_links &lt;&lt; \"&lt;#{tag_type}&gt;&lt;a href='#{item[:url]}' class='#{style} #{active? item[:url]}'&gt;#{item[:title]}&lt;/a&gt;&lt;/#{tag_type}&gt;\"\r\n    end\r\n\r\n    nav_links.html_safe\r\n  end</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "railstutorial.org"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1514993490, "post_id": 48079784, "comment_id": 83134854, "body": "Why and how do you want to use the gem in your application? What do you try to achieve?"}], "answers": [{"tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1514993628, "creation_date": 1514993628, "answer_id": 48080459, "question_id": 48079784, "link": "https://stackoverflow.com/questions/48079784/how-to-use-policial-gem-in-my-ror-project/48080459#48080459", "title": "How to use policial gem in my RoR project?", "body": "<p>Instead, you can create <a href=\"https://github.com/brigade/overcommit\" rel=\"nofollow noreferrer\">overcommit</a> gem which creates Github hooks and if you style guide violations you will be prompted to create commits. you can configure overcommit to use various linter and Rubocop. Rubocop is widely accepted ruby linter.</p>\n"}], "owner": {"reputation": 19, "user_id": 6664378, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pGhJx8nDC1c/AAAAAAAAAAI/AAAAAAAAA5k/5EXf_VA3iCE/photo.jpg?sz=128", "display_name": "hermes agm", "link": "https://stackoverflow.com/users/6664378/hermes-agm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514993628, "creation_date": 1514991174, "question_id": 48079784, "link": "https://stackoverflow.com/questions/48079784/how-to-use-policial-gem-in-my-ror-project", "title": "How to use policial gem in my RoR project?", "body": "<p>i want to use policial gem in my RoR project. I search in the documentation gem <a href=\"https://github.com/volmer/policial\" rel=\"nofollow noreferrer\">https://github.com/volmer/policial</a> and this is very general. I don't understand where I can instantiate the detective for investigates pull requests and accuses style guide violations in my project.</p>\n\n<p>I search in google i don't find tutorials or examples. Could help me with some example or related information. Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 376, "user_id": 7271772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef9b3cffd3ca044729a43c23f7232d9?s=128&d=identicon&r=PG&f=1", "display_name": "George Morris", "link": "https://stackoverflow.com/users/7271772/george-morris"}, "edited": false, "score": 0, "creation_date": 1515001603, "post_id": 48080237, "comment_id": 83139480, "body": "Well, it prints &quot;WORLD&quot; into log file. Also, according to ruby on rails doc, it should reach anything underneath it <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Rollback.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Rollback.html</a>"}, {"owner": {"reputation": 376, "user_id": 7271772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef9b3cffd3ca044729a43c23f7232d9?s=128&d=identicon&r=PG&f=1", "display_name": "George Morris", "link": "https://stackoverflow.com/users/7271772/george-morris"}, "edited": false, "score": 0, "creation_date": 1515001669, "post_id": 48080237, "comment_id": 83139503, "body": "Also, if I move @pb.failed! before rollback, it will simply rollback and @pb will still be successful."}, {"owner": {"reputation": 376, "user_id": 7271772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef9b3cffd3ca044729a43c23f7232d9?s=128&d=identicon&r=PG&f=1", "display_name": "George Morris", "link": "https://stackoverflow.com/users/7271772/george-morris"}, "edited": false, "score": 0, "creation_date": 1515075338, "post_id": 48080237, "comment_id": 83169189, "body": "thanks for a suggestion but i have already tried that and it didn&#39;t work. basically, when i call raise, it will not execute code bellow it. I am running Rails 3.2.22"}], "tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1515002645, "last_edit_date": 1515002645, "creation_date": 1514992802, "answer_id": 48080237, "question_id": 48079737, "link": "https://stackoverflow.com/questions/48079737/ruby-on-rails-rollback-on-a-new-thread/48080237#48080237", "title": "Ruby on Rails Rollback on a new thread", "body": "<p>Try something like this. in your code @fb.failed also gets rolled back due to base transaction.</p>\n\n<p>Your code should look like this.</p>\n\n<pre><code>def import(user)\n    pb_failure = false\n    Thread.new do\n      ActiveRecord::Base.transaction do\n        errs = operation(user)\n        Rails.logger.info \"HELLO\"\n        if errs.any?\n          pb_failure = true\n          raise ActiveRecord::Rollback\n        end\n      end\n      @pb.failed! if pb_failure\n      Rails.logger.info \"WORLD\"\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 376, "user_id": 7271772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef9b3cffd3ca044729a43c23f7232d9?s=128&d=identicon&r=PG&f=1", "display_name": "George Morris", "link": "https://stackoverflow.com/users/7271772/george-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515002645, "creation_date": 1514991019, "last_edit_date": 1514992678, "question_id": 48079737, "link": "https://stackoverflow.com/questions/48079737/ruby-on-rails-rollback-on-a-new-thread", "title": "Ruby on Rails Rollback on a new thread", "body": "<p>I am running into an issue with the following code. For some reason, it will not allow me to modify the state of my progress bar after the <strong>rollback</strong> method. It will simply not do anything. I don't see why. And I can't call <strong>failed! method</strong> within the operation method because it will rollback and change the state of my progress bar. </p>\n\n<pre><code>class Importer\n  attr_accessor :file\n\n  def initialize(file)\n   @file = file\n   @pb = ProgressBar.create\n   @pb.number_of_rows(file)\n  end\n\n  def import(user)\n    Thread.new do\n      ActiveRecord::Base.transaction do\n        errs = operation(user)\n        Rails.logger.info \"HELLO\"\n        if errs.any?\n          raise ActiveRecord::Rollback\n          @pb.failed!\n        end\n      end\n      Rails.logger.info \"WORLD\"\n    end\n  end\n\n  def operation(user)\n    errs = []\n    i = 0\n    user.insurances.each do |insurance|\n      i = i+1\n      if insurance.can_have_plan?\n        Plan.create(:insurance =&gt; insurance)\n        @pb.update_attribute(:current_row, i )\n      else\n        errs &lt;&lt; \"#{insurance.id} cant have a plan\"\n      end\n    end\n    errs\n  end\nend\n</code></pre>\n\n<p>When I delete raise, it will work as desired. Also, why it doesn't print HELLO but it only prints WORLD? </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1514996815, "post_id": 48079781, "comment_id": 83136797, "body": "As far as I know you can also use <code>&#47;</code> instead and it&#39;ll be converted automatically, or you can use single quotes to avoid the issue entirely."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1514997614, "post_id": 48079781, "comment_id": 83137300, "body": "Yep, there are other ways :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1515012527, "post_id": 48079781, "comment_id": 83144630, "body": "In particular, <code>\\r</code> is a <i>CARRIAGE RETURN</i>."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1514991166, "creation_date": 1514991166, "answer_id": 48079781, "question_id": 48079670, "link": "https://stackoverflow.com/questions/48079670/how-to-write-output-file-of-ruby-code-into-specific-directory-location/48079781#48079781", "title": "How to write output file of ruby code into specific directory/location?", "body": "<p>Because <code>\\</code> in strings are special characters so you should use <code>\\\\</code> (double backslashes) to get a single backslash. But there is a better way, you don't need to deal with backslashes at all:</p>\n\n<pre><code>fname = File.join(\"C:\", \"repo\", \"cookbooks\", \"abc\", \"recipes\", \"add.rb\")\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3603524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e3d95996e5878de3fe3f038df052f4d?s=128&d=identicon&r=PG&f=1", "display_name": "user3603524", "link": "https://stackoverflow.com/users/3603524/user3603524"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 48079781, "answer_count": 1, "score": 0, "last_activity_date": 1514991338, "creation_date": 1514990786, "last_edit_date": 1514991338, "question_id": 48079670, "link": "https://stackoverflow.com/questions/48079670/how-to-write-output-file-of-ruby-code-into-specific-directory-location", "title": "How to write output file of ruby code into specific directory/location?", "body": "<p>I have ruby code which will create output file, currently file is creating at location from where my script is running.\nI have to write output file to different location so i am specifying explicit path into code. but it's not able to create file. my code looks like :</p>\n\n<pre><code>fname = \"C:\\repo\\cookbooks\\abc\\recipes\\add.rb\"\nsomefile = File.open(fname,\"w\")  \nsomefile.puts \"end\"\nsomefile.close\n</code></pre>\n\n<p>If i specify </p>\n\n<pre><code>fname = \"add.rb\"\n</code></pre>\n\n<p>it's working but i want to create it at different location as i mentioned above code in C:\\ drive.</p>\n"}, {"tags": ["ruby", "multithreading", "watir"], "comments": [{"owner": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 0, "creation_date": 1514990020, "post_id": 48079132, "comment_id": 83132696, "body": "Whenever I do multi-threaded programming I try to make sure that each thread owns its own data. Have you tried writing this without multiple threads? Or, can you use 2 different browser instances? The fact that both threads are trying to manipulate / use shared data at the same time will almost always cause issues."}, {"owner": {"reputation": 693, "user_id": 8445072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5083e0607cd0c6b985684257507ac10?s=128&d=identicon&r=PG", "display_name": "OmG3r", "link": "https://stackoverflow.com/users/8445072/omg3r"}, "reply_to_user": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 0, "creation_date": 1515067048, "post_id": 48079132, "comment_id": 83164079, "body": "writing this without multi-threading would require my browser to stop executing watir commands, and keep checking the same page forever ( cause there is no watir commands to go to next page w/e) and 2 different browsers won&#39;t do it cause I need to check for data in the page&#39;s HTML, while on the run. maybe i&#39;ll search for a way to keep feeding data to another variable without stop the execution of watir commands."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 8445072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5083e0607cd0c6b985684257507ac10?s=128&d=identicon&r=PG", "display_name": "OmG3r", "link": "https://stackoverflow.com/users/8445072/omg3r"}, "edited": false, "score": 0, "creation_date": 1515066898, "post_id": 48084793, "comment_id": 83163975, "body": "oh you are right, the &quot;/&quot; in the end is needed and your answers are clear enough, thanks."}], "tags": [], "owner": {"reputation": 562, "user_id": 2059251, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5951b258dc2ee40b535d8aa05b5d6bb5?s=128&d=identicon&r=PG", "display_name": "Tyler MacMillan", "link": "https://stackoverflow.com/users/2059251/tyler-macmillan"}, "is_accepted": true, "score": 1, "last_activity_date": 1515011967, "creation_date": 1515011967, "answer_id": 48084793, "question_id": 48079132, "link": "https://stackoverflow.com/questions/48079132/controlling-the-same-browser-instance-with-2-threads-watir-ruby/48084793#48084793", "title": "Controlling the same browser instance with 2 threads WATIR RUBY", "body": "<p>You simply can't let them both use the browser at the same time. </p>\n\n<p>Problem 1: Your script will never output \"hi\" because the url is actually \"<a href=\"https://monip.org/\" rel=\"nofollow noreferrer\">https://monip.org/</a>\", not \"<a href=\"https://monip.org\" rel=\"nofollow noreferrer\">https://monip.org</a>\".</p>\n\n<p>Problem 2: You may want to be \"constantly\" checking for this element (I assume some sort of dialog or something), because once it appears, you'll need to do something. But by checking constantly, you are essentially ensuring that the thread that is actually doing things is going to be interrupted. Most likely checking once every second (or even 2-10 seconds) will be more than enough.</p>\n\n<p>Problem 3: As I stated at the beginning, you can't let them use the browser at the same time. You'll need to implement some sort of locking procedure to prevent this behavior.</p>\n"}], "owner": {"reputation": 693, "user_id": 8445072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5083e0607cd0c6b985684257507ac10?s=128&d=identicon&r=PG", "display_name": "OmG3r", "link": "https://stackoverflow.com/users/8445072/omg3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 48084793, "answer_count": 1, "score": 1, "last_activity_date": 1515157112, "creation_date": 1514988954, "last_edit_date": 1515157112, "question_id": 48079132, "link": "https://stackoverflow.com/questions/48079132/controlling-the-same-browser-instance-with-2-threads-watir-ruby", "title": "Controlling the same browser instance with 2 threads WATIR RUBY", "body": "<p>I want my program to be constantly checking if an element is presenting (always checking for it), however when I try to check the HTML in another different thread I get read_nonblock error and/or a stream closed error ( couldn't find explanation in the internet)\nso I created this program to verify wtf is happening.</p>\n\n<pre><code>require 'watir'\nrequire 'thread'\n\nprofile = Selenium::WebDriver::Firefox::Profile.new\nprofile['permissions.default.image'] = 2\nprofile['media.autoplay.enabled'] = false\n\n\nbrowser = Watir::Browser.new :firefox, profile: profile\nthreads = Array.new\nthreads[0] = Thread.new do\n  loop do\n    begin\n      sleep(3)\n      puts browser.url\n      browser.goto(\"https://monip.org\")\n    rescue\n      puts \"thread 1 encountered an error\"\n    end\n  end\nend\nthreads[1] = Thread.new do\n  loop do\n    begin\n      if browser.url == \"https://monip.org\"\n        puts \"hi\"\n      end\n    rescue\n      puts \"thread 2 encountered an error\"\n    end\n  end\nend\n\nthreads.each do |e|\n  e.join\nend\n</code></pre>\n\n<p>I'd get </p>\n\n<pre><code>thread 1 encountered an error\nthread 2 encountered an error\nthread 2 encountered an error\nthread 1 encountered an error\nthread 1 encountered an error\nabout:blank\nthread 2 encountered an error\nthread 1 encountered an error\nthread 1 encountered an error\nthread 1 encountered an error\nthread 2 encountered an error\nthread 1 encountered an error\nthread 2 encountered an error\n</code></pre>\n\n<p>of course any other solution would be nice, this is what I though of but couldn't write it with code ..\nIs it possible to make the program wait/check if it can control/communicate with the browser for a certain set of seconds.\nor reserve the browser for itself for a period of time I'd use \"sleep\".\nor allow the 2 threads to control the browser at once.</p>\n\n<hr>\n\n<p>EDIT: I was able to get the desired behaviour by using \"mutex\"</p>\n\n<p>this is how the code would look</p>\n\n<pre><code>require 'watir'\nrequire 'thread'\n\nprofile = Selenium::WebDriver::Firefox::Profile.new\nprofile['permissions.default.image'] = 2\nprofile['media.autoplay.enabled'] = false\n\n\nmutex = Mutex.new\nbrowser = Watir::Browser.new :firefox, profile: profile\nthreads = Array.new\nthreads[0] = Thread.new do\n  loop do\n  sleep(0.1)\n    begin\n      mutex.synchronize do\n        puts \"#{Time.now.ctime}  #{browser.url}\"\n        browser.goto(\"https://monip.org\")\n      end\n    rescue\n      puts \"#{Time.now.ctime}  thread 1 encountered an error\"\n    end\n  end\nend\n\nthreads[1] = Thread.new do\n  loop do\n  sleep(0.1)\n    begin\n      mutex.synchronize do\n        if browser.url == \"https://monip.org/\" || browser.url == \"https://monip.org\"\n          puts \"#{Time.now.ctime}  hi\"\n        end\n      end\n    rescue\n      puts \"#{Time.now.ctime}  thread 2 encountered an error\"\n    end\n  end\nend\nthreads[0].join\nthreads[1].join\n</code></pre>\n\n<p>the output is </p>\n\n<pre><code>Fri Jan  5 13:49:36 2018  about:blank\nFri Jan  5 13:49:37 2018  hi\nFri Jan  5 13:49:37 2018  https://monip.org/\nFri Jan  5 13:49:37 2018  hi\nFri Jan  5 13:49:37 2018  https://monip.org/\nFri Jan  5 13:49:37 2018  hi\nFri Jan  5 13:49:37 2018  https://monip.org/\nFri Jan  5 13:49:38 2018  hi\nFri Jan  5 13:49:38 2018  https://monip.org/\nFri Jan  5 13:49:38 2018  hi\nFri Jan  5 13:49:38 2018  https://monip.org/\nFri Jan  5 13:49:38 2018  hi\nFri Jan  5 13:49:38 2018  https://monip.org/\nFri Jan  5 13:49:38 2018  hi\nFri Jan  5 13:49:38 2018  https://monip.org/\nFri Jan  5 13:49:39 2018  hi\nFri Jan  5 13:49:39 2018  https://monip.org/\nFri Jan  5 13:49:39 2018  hi\nFri Jan  5 13:49:39 2018  https://monip.org/\nFri Jan  5 13:49:39 2018  hi\nFri Jan  5 13:49:39 2018  https://monip.org/\nFri Jan  5 13:49:40 2018  hi\nFri Jan  5 13:49:40 2018  https://monip.org/\nFri Jan  5 13:49:40 2018  hi\nFri Jan  5 13:49:40 2018  https://monip.org/\n</code></pre>\n\n<p>as you can see in the timestamps, we are checking constantly and respectively  without raising any error </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1514988366, "post_id": 48078792, "comment_id": 83131770, "body": "<i>&quot;I would like to remove the chained with_index&quot;</i> \u2013 why? Is it inefficient or not working as expected?"}, {"owner": {"reputation": 740, "user_id": 5673242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd127bacb8132d2d7297989828d3086?s=128&d=identicon&r=PG&f=1", "display_name": "jpn", "link": "https://stackoverflow.com/users/5673242/jpn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514990064, "post_id": 48078792, "comment_id": 83132730, "body": "A valid question! Really this was just an example \u2013 I encountered a situation where I needed to add source line numbers to a loaded CSV and this meant I needed to change other interfaces that the CSV was being passed to. It&#39;s easy to change those interfaces, but it got me wondering if there was a different solution."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514991962, "post_id": 48078792, "comment_id": 83133933, "body": "@jpn Then why not only change it in the interfaces that need it? Use a mixin, or inheritance, or a dependency injection, or whatever... You don&#39;t <i>need</i> to change the behaviour in a base class, especially if it has unintended complications for other classes."}, {"owner": {"reputation": 740, "user_id": 5673242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd127bacb8132d2d7297989828d3086?s=128&d=identicon&r=PG&f=1", "display_name": "jpn", "link": "https://stackoverflow.com/users/5673242/jpn"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514992947, "post_id": 48078792, "comment_id": 83134521, "body": "@TomLord Unfortunately I do need to change the behaviour here. The real and specific problem requires a refactor to be solved (currently data is being thrown away early on, and it&#39;s now required later down the chain). I&#39;m going to omit the specifics here though as it&#39;s not directly related to the question (which you have answered!) \ud83d\udc4c"}], "answers": [{"comments": [{"owner": {"reputation": 740, "user_id": 5673242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd127bacb8132d2d7297989828d3086?s=128&d=identicon&r=PG&f=1", "display_name": "jpn", "link": "https://stackoverflow.com/users/5673242/jpn"}, "edited": false, "score": 0, "creation_date": 1514990548, "post_id": 48079287, "comment_id": 83133016, "body": "Thanks Tom. I&#39;ve commented about the motivation at <a href=\"https://stackoverflow.com/questions/48078792/how-do-you-remove-chained-deferred-lazy-enumerable-methods-from-an-enumerator#comment83132730_48078792\" title=\"how do you remove chained deferred lazy enumerable methods from an enumerator%23comment83132730_48078792\">stackoverflow.com/questions/48078792/&hellip;</a>. You are of course right about the memory usage for loading the whole CSV this way \u2013 the intent was to avoid making it far worse by also creating a new array!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514990720, "post_id": 48079287, "comment_id": 83133122, "body": "<code>csv_with_line_numbers.map(&amp;:first)</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514991871, "post_id": 48079287, "comment_id": 83133848, "body": "@mudasobwa Have you actually tried that in the console? I couldn&#39;t get that to work, hence my slightly clunky syntax above. If that does work, can you show a complete code sample and state the ruby version?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514992093, "post_id": 48079287, "comment_id": 83134008, "body": "<code>e = [[1,2],[3,4]].each.to_enum; #\u21d2 #&lt;Enumerator: #&lt;Enumerator: [[1, 2], [3, 4]]:each&gt;:each&gt;</code> \u21d2 <code>e.map(&amp;:first) #\u21d2\u00a0[1, 3]</code>. Versions: 2.1.8, 2.4.2, 2.5.0."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514993448, "post_id": 48079287, "comment_id": 83134832, "body": "@mudasobwa That&#39;s not the same scenario though, is it? Where&#39;s the <code>.with_index</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514994141, "post_id": 48079287, "comment_id": 83135252, "body": "o_O indeed, I now see the issue. Looks weird."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1515008767, "post_id": 48079287, "comment_id": 83142997, "body": "How about <code>csv_with_line_numbers.map { |row| row }</code>?"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1514989539, "creation_date": 1514989539, "answer_id": 48079287, "question_id": 48078792, "link": "https://stackoverflow.com/questions/48078792/how-do-you-remove-chained-deferred-lazy-enumerable-methods-from-an-enumerator/48079287#48079287", "title": "How do you remove chained deferred/lazy Enumerable methods from an Enumerator?", "body": "<p>This feels like an XY problem to me - why don't you just either:</p>\n\n<ul>\n<li>Keep the <code>index</code> as it is - it's not doing much harm? Or,</li>\n<li>Store the <code>enum</code> <em>without</em> an index, and only add it if necessary? Adding the index is much more idiomatic than adding-then-removing it.</li>\n</ul>\n\n<p>With that said, I'm not aware of any way to \"un-chain\" methods from an enumerator. However, you could remove the index without converting it to an array via:</p>\n\n<pre><code>csv_with_line_numbers.map { |row, index| row }\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>csv_with_line_numbers.map { |*row_with_index| row_with_index.first }\n</code></pre>\n\n<p>On another note, you talk about \"lazy evaluation\" here, yet your code is <strong>not evaluating the CSV lazily!!</strong> <code>CSV.parse</code> will load the whole file into memory regardless, so for a \"huuuuuge\" [sic] file you'll have memory issues regardless.</p>\n\n<p>The standard approach for this would be to use <code>CSV.foreach</code> instead of <code>CSV.parse</code>; thereby only loading one line at a time into memory. For more advanced applications (e.g. \"only read lines 300,000 - 310,000\"), you could look into using <code>File.open</code> and building a <a href=\"http://ruby-doc.org/core/Enumerator/Lazy.html\" rel=\"nofollow noreferrer\"><strong>lazy</strong> enumerator</a> to skip parsing the first/last chunks of the file.</p>\n"}], "owner": {"reputation": 740, "user_id": 5673242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd127bacb8132d2d7297989828d3086?s=128&d=identicon&r=PG&f=1", "display_name": "jpn", "link": "https://stackoverflow.com/users/5673242/jpn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 48079287, "answer_count": 1, "score": 0, "last_activity_date": 1514989539, "creation_date": 1514987625, "question_id": 48078792, "link": "https://stackoverflow.com/questions/48078792/how-do-you-remove-chained-deferred-lazy-enumerable-methods-from-an-enumerator", "title": "How do you remove chained deferred/lazy Enumerable methods from an Enumerator?", "body": "<p>I have an Enumerator with a CSV and row numbers:</p>\n\n<pre><code>require \"csv\"\n\ncsv = CSV.parse(\"a,b,c\\nd,e,f\\nx,x,x\", headers: true)\ncsv_with_line_numbers = csv.to_enum.with_index\n\nputs csv_with_line_numbers.inspect\n=&gt; #&lt;Enumerator: #&lt;Enumerator: #&lt;CSV::Table mode:col_or_row row_count:3&gt;:each&gt;:with_index&gt;\n</code></pre>\n\n<p>I would like to remove the chained <code>with_index</code> from <code>csv_with_line_numbers</code>, so I end up with:</p>\n\n<pre><code>puts csv_with_line_numbers.inspect\n=&gt; #&lt;Enumerator: #&lt;CSV::Table mode:col_or_row row_count:3&gt;:each&gt;\n</code></pre>\n\n<p>I could achieve this by enumerating and putting it in a better state, e.g.</p>\n\n<pre><code>csv_with_line_numbers.to_a.map(&amp;:first)\n</code></pre>\n\n<p>but in practice the CSV is huuuuuge so this might not be efficient!</p>\n\n<p>To solve this I'd like to remove the lazy chained method that hasn't yet been executed, or find another solution that:</p>\n\n<ul>\n<li>is memory efficient (e.g. for a large CSV enumerator)</li>\n<li>uses idiomatic Ruby</li>\n<li>assumes it's not practical to build the enumerator again (e.g. I no longer have access to the source <code>csv</code> variable)</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1514987735, "creation_date": 1514987735, "answer_id": 48078822, "question_id": 48078773, "link": "https://stackoverflow.com/questions/48078773/rails-belongs-to-same-model-twice/48078822#48078822", "title": "rails belongs_to same model twice", "body": "<p>Try this one</p>\n\n<pre><code>class Task &lt; ActiveRecord::Base\n  belongs_to :soldier\n  belongs_to :creator, class_name: 'Soldier', foreign_key: :created_by\nend \n</code></pre>\n\n<p>Now, given a <code>task</code> object, you can use <code>task.creator</code> to retrieve the soldier you want</p>\n"}, {"comments": [{"owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "edited": false, "score": 0, "creation_date": 1514993569, "post_id": 48078852, "comment_id": 83134908, "body": "perfect! additional thanks for the rails convention tip!"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1514997582, "last_edit_date": 1514997582, "creation_date": 1514987840, "answer_id": 48078852, "question_id": 48078773, "link": "https://stackoverflow.com/questions/48078773/rails-belongs-to-same-model-twice/48078852#48078852", "title": "rails belongs_to same model twice", "body": "<p>Something like this:</p>\n\n<pre><code>class Task &lt; ActiveRecord::Base\n  belongs_to :soldier\n  belongs_to :creator, class_name: Soldier, foreign_key: :created_by\nend\n\nclass Soldier &lt; ActiveRecord::Base\n  has_many :tasks\n\n  # Optional -- I'm unclear if you want this too?\n  has_many :created_tasks, class_name: Task, foreign_key: :created_by\nend\n</code></pre>\n\n<p>The above implementation is OK. However, if you wish to stick within rails conventions (i.e. not need to manually specify a <code>foreign_key</code>), then you could call the database column <code>creator_id</code> instead of <code>created_by</code>.</p>\n"}], "owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 48078852, "answer_count": 2, "score": 2, "last_activity_date": 1534444018, "creation_date": 1514987530, "last_edit_date": 1534444018, "question_id": 48078773, "link": "https://stackoverflow.com/questions/48078773/rails-belongs-to-same-model-twice", "title": "rails belongs_to same model twice", "body": "<p>I have a Task model (fields = description, soldier_id:integer, created_by:integer).</p>\n\n<p>Now I automatically assign <code>created_by</code> to the soldier that creates a task, and I want to use the <code>soldier_id</code> for the soldier that must execute the task.\nThis way, <code>Task</code> belongs to <code>Solider</code> in 2 different fields at the same time. <strong>How should it be done properly?</strong> Now I have:</p>\n\n<pre><code>class Task &lt; ActiveRecord::Base\n  belongs_to :soldier\nend \n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Soldier &lt; ActiveRecord::Base\n  has_many :tasks\nend\n</code></pre>\n"}, {"tags": ["ruby", "methods", "built-in"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514989408, "post_id": 48078680, "comment_id": 83132333, "body": "<i>&quot;[...] and this is the output I get&quot;</i> \u2013 don&#39;t you mean &quot;this is the output I want&quot;?"}, {"owner": {"reputation": 816, "user_id": 5006720, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/9pfXu.png?s=128&g=1", "display_name": "ARL", "link": "https://stackoverflow.com/users/5006720/arl"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1515003688, "post_id": 48078680, "comment_id": 83140533, "body": "@Stefan: Correct, edited."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1514989341, "post_id": 48078974, "comment_id": 83132297, "body": "In this example, <code>__callee__</code> and <code>__method__</code> return the same value. The OP wants the method to return the name of the method it was called from, not its own name."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514990234, "post_id": 48078974, "comment_id": 83132826, "body": "The only difference between <code>__method__</code> and <code>__callee__</code> is <i>they work differently for aliases</i>. Since this answer does not mention aliases at all, and even more, it adds zero value to what the OP had already, I doubt I understand how it could get upvoted 3 times and even be chosen <i>as a correct answer</i>. The answer by @Stefan is correct, btw."}, {"owner": {"reputation": 551, "user_id": 3558900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EI06H.jpg?s=128&g=1", "display_name": "Randall Valenciano", "link": "https://stackoverflow.com/users/3558900/randall-valenciano"}, "edited": false, "score": 0, "creation_date": 1514990293, "post_id": 48078974, "comment_id": 83132853, "body": "I&#39;ll remove the answer if the answer got unaccepted, I misread."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514990528, "post_id": 48078974, "comment_id": 83132999, "body": "Who knows? Maybe the OP wants something else :-)"}, {"owner": {"reputation": 551, "user_id": 3558900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EI06H.jpg?s=128&g=1", "display_name": "Randall Valenciano", "link": "https://stackoverflow.com/users/3558900/randall-valenciano"}, "edited": false, "score": 0, "creation_date": 1514990854, "post_id": 48078974, "comment_id": 83133207, "body": "I reread again, and he actually wants what his method is calling, using <code>__method__</code> but in a cleaner way, he doesn&#39;t want the stack, he wants the current method without sending a parameter, which is achieved with <code>__callee__</code>, probably that&#39;s why he accepted my answer."}, {"owner": {"reputation": 551, "user_id": 3558900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EI06H.jpg?s=128&g=1", "display_name": "Randall Valenciano", "link": "https://stackoverflow.com/users/3558900/randall-valenciano"}, "edited": false, "score": 0, "creation_date": 1514990945, "post_id": 48078974, "comment_id": 83133274, "body": "Specifically quoting &quot;The code has been simplified but is part of functionality in a logger where I want to be able to dump data about the current location in the code to a log and know exactly what module,class,function I am in.  Is there a better/cleaner way to do this than passing <b>method</b> as a parameter to the function each time?&quot;"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1514991087, "post_id": 48078974, "comment_id": 83133360, "body": "@RandallValenciano, following your example, what OP actually want is to print <code>test_caller</code> instead of <code>current</code>. Since <code>__method__</code> and <code>__callee__</code> are equivalent (i.e. return the exactly same values) in your examples, your solution provides no advantage over OPs attempts."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514991236, "post_id": 48078974, "comment_id": 83133437, "body": "@RandallValenciano I think the OP wants the logger method (<code>get_pos</code>) to print information about the calling method (<code>test</code>), in particular its name, i.e. &quot;test&quot;."}, {"owner": {"reputation": 551, "user_id": 3558900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EI06H.jpg?s=128&g=1", "display_name": "Randall Valenciano", "link": "https://stackoverflow.com/users/3558900/randall-valenciano"}, "edited": false, "score": 0, "creation_date": 1514991309, "post_id": 48078974, "comment_id": 83133483, "body": "Yes guys, you&#39;re right, I apologize. I guess I got confused by the question. If this get unaccepted I would delete the answer."}], "tags": [], "owner": {"reputation": 551, "user_id": 3558900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EI06H.jpg?s=128&g=1", "display_name": "Randall Valenciano", "link": "https://stackoverflow.com/users/3558900/randall-valenciano"}, "is_accepted": true, "score": 3, "last_activity_date": 1514988301, "creation_date": 1514988301, "answer_id": 48078974, "question_id": 48078680, "link": "https://stackoverflow.com/questions/48078680/trying-to-get-the-name-of-the-currently-running-function-in-ruby/48078974#48078974", "title": "Trying to get the name of the currently running function in ruby", "body": "<p>Why don't you use <code>__callee__</code> from Kernel object?</p>\n\n<p>I refactored your code:</p>\n\n<pre><code>def current\n  puts __callee__\nend\n\ndef test_caller\n  current\nend\n\ntest_caller\n</code></pre>\n\n<p>Which outputs <code>current</code> in this case.</p>\n\n<p>There are all sorts of interesting methods in the <code>Kernel Object</code>. I recommend to take a look to the API <a href=\"https://ruby-doc.org/core-2.2.0/Kernel.html#method-i-__callee__\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1514989622, "last_edit_date": 1514989622, "creation_date": 1514989218, "answer_id": 48079191, "question_id": 48078680, "link": "https://stackoverflow.com/questions/48078680/trying-to-get-the-name-of-the-currently-running-function-in-ruby/48079191#48079191", "title": "Trying to get the name of the currently running function in ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.5.0/Kernel.html#method-i-caller_locations\" rel=\"nofollow noreferrer\"><code>caller_locations</code></a> which returns an array of <a href=\"http://ruby-doc.org/core-2.5.0/Thread/Backtrace/Location.html\" rel=\"nofollow noreferrer\"><code>Thread::Backtrace::Location</code></a> instances: (starting at index 1 by default, excluding the current method)</p>\n\n<pre><code>def foo\n  caller_locations.map(&amp;:base_label)\nend\n\ndef bar\n  foo\nend\n\ndef baz\n  bar\nend\n\nbaz\n#=&gt; [\"bar\", \"baz\", \"&lt;main&gt;\"]\n</code></pre>\n\n<p>So <code>foo</code> was called from <code>bar</code> which was called from <code>baz</code> which was called in <code>&lt;main&gt;</code>.</p>\n"}], "owner": {"reputation": 816, "user_id": 5006720, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/9pfXu.png?s=128&g=1", "display_name": "ARL", "link": "https://stackoverflow.com/users/5006720/arl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 1, "accepted_answer_id": 48078974, "answer_count": 2, "score": 0, "last_activity_date": 1515003718, "creation_date": 1514987200, "last_edit_date": 1515003718, "question_id": 48078680, "link": "https://stackoverflow.com/questions/48078680/trying-to-get-the-name-of-the-currently-running-function-in-ruby", "title": "Trying to get the name of the currently running function in ruby", "body": "<p>I have a function that I would like to call and have it return the name of the function it was called from. Here is the function:</p>\n\n<pre><code>def get_pos\n  func = __method__.to_s\n  puts \"You are in #{func}\"\nend\n</code></pre>\n\n<p>I understand that <code>__method__</code> returns the name of the method it is currently being executed in. </p>\n\n<p>I am trying to call <code>get_pos()</code> from <code>test</code> and this is the output I want to get:</p>\n\n<pre><code>def test\n  get_pos\nend\n\nYou are in test\n</code></pre>\n\n<p>Instead I get the following</p>\n\n<pre><code>You are in get_pos\n</code></pre>\n\n<p>I understand why this is happening. Since <code>__method__</code> is located inside the getpos function it returns the name of that function.</p>\n\n<p>I know that if i make the following change and pass <code>__method__</code> as an argument to the function, I'll get the expected result. Which is: </p>\n\n<pre><code>def get_pos(method)\n  puts \"You are in #{method}\"\nend\n\ndef test\n  get_pos(__method__.to_s)\nend\n\nYou are in test\n</code></pre>\n\n<p>The code has been simplified but is part of functionality in a logger where I want to be able to dump data about the current location in the code to a log and know exactly what module,class,function I am in.</p>\n\n<p>Is there a better/cleaner way to do this than passing <code>__method__</code> as a parameter to the function each time?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1514983742, "post_id": 48077252, "comment_id": 83129186, "body": "You might need to add the related model and controller code too."}, {"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1514983902, "post_id": 48077252, "comment_id": 83129279, "body": "I could but I know that&#39;s not the issue. The issue is this, when the html is rendered in <code>MessagesChannel</code> action, current_user will always be the user who created the message, thus when the partial is rendered with <code>ApplicationController.render ...</code> the partial always branches the same way.  I thought about adding model code but it&#39;s sorta complicated. <code>Message</code> belongs to a <code>Conversation</code>. <code>Conversation</code> can have many <code>Users</code>, through <code>UserConversations</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1514983596, "post_id": 48077666, "comment_id": 83129101, "body": "That was a typo in my question, my bad. It is correctly typed in the <code>_message.html.erb</code> partial. <code>if current_user.id == message.user_id</code>"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1514983387, "creation_date": 1514983387, "answer_id": 48077666, "question_id": 48077252, "link": "https://stackoverflow.com/questions/48077252/rails-actioncable-partials/48077666#48077666", "title": "Rails ActionCable &amp; Partials", "body": "<p>You have typed <code>&lt;% if current_user.id = message.user_id %&gt;</code>.</p>\n\n<p>Replace <code>=</code> with <code>==</code>.</p>\n\n<p><code>=</code> will return the value of <code>message.user_id</code> which is truth in your case.</p>\n"}, {"tags": [], "owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1514983549, "creation_date": 1514983549, "answer_id": 48077711, "question_id": 48077252, "link": "https://stackoverflow.com/questions/48077252/rails-actioncable-partials/48077711#48077711", "title": "Rails ActionCable &amp; Partials", "body": "<p><code>current_user.id = message.user_id</code> this is an assignment. The control flow will always go into if block. Using <code>==</code> should be right.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 6732629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a1eb39cbb29122f9a1dca40c1ca323?s=128&d=identicon&r=PG&f=1", "display_name": "Q A", "link": "https://stackoverflow.com/users/6732629/q-a"}, "edited": false, "score": 0, "creation_date": 1613273671, "post_id": 65126103, "comment_id": 117023761, "body": "Thanks!  This is helpful for a similar problem I have.  What I can&#39;t figure out is, where do I get the &quot;current_user&quot; id from within the received(data) function in the channel javascript?  If I can figure out how to get that, then I know how to do the logic to compare things as you suggest.  But I feel like I&#39;m missing something in there.  How does the received() function know who the current_user is?"}], "tags": [], "owner": {"reputation": 11, "user_id": 14756256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/997c758c77cbf4b81168c6730f8bcd51?s=128&d=identicon&r=PG", "display_name": "clara-lupa", "link": "https://stackoverflow.com/users/14756256/clara-lupa"}, "is_accepted": false, "score": 1, "last_activity_date": 1606998970, "creation_date": 1606998970, "answer_id": 65126103, "question_id": 48077252, "link": "https://stackoverflow.com/questions/48077252/rails-actioncable-partials/65126103#65126103", "title": "Rails ActionCable &amp; Partials", "body": "<p>hej,\nyour partial is being rendered before being broadcasted. the broadcast_to method transmits a string which is the rendered html of the partial. as a result, when you render your partial, the current_user is the one who sends the message and therefore it is rendered the way the sender sees the partial.\na solution could be to pass a boolean variable &quot;sender&quot; to your partial, i.e.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;% if sender %&gt; \n  &lt;Display Avatar Right&gt;\n  &lt;/Display Avatar Right&gt;\n&lt;% else %&gt;\n  &lt;Display Avatar Left&gt;\n  &lt;/Display Avatar Left&gt;\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>then you transmit both the sender and the receiver partials in the data object and the sender Id, e.g.</p>\n<pre><code>data[:htmlSender] = ApplicationController.render partial: 'conversations/message', locals: { message: message, sender: true }\n</code></pre>\n<p>data[:htmlReceiver] = ApplicationController.render partial: 'conversations/message', locals: { message: message, sender: false, }\ndata[:senderId] = current_user.id.to_s</p>\n<p>then you make a conditional in the received(data) callback where you compare the senderId from your data Object with the current_user id and insert either data.htmlSender or data.htmlReceiver.</p>\n"}], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1606998970, "creation_date": 1514981900, "last_edit_date": 1514984595, "question_id": 48077252, "link": "https://stackoverflow.com/questions/48077252/rails-actioncable-partials", "title": "Rails ActionCable &amp; Partials", "body": "<h2>Action Cable is configured to correctly to subscribe, broadcast, etc.</h2>\n\n<p>However, I'm getting the behavior of user <code>avatars</code> rendering on the wrong side due to a <code>Rails partial</code>.</p>\n\n<pre><code># conversations/_message.html.erb\n\n&lt;% if current_user.id == message.user_id %&gt; \n  &lt;Display Avatar Right&gt;\n  &lt;/Display Avatar Right&gt;\n&lt;% else %&gt;\n  &lt;Display Avatar Left&gt;\n  &lt;/Display Avatar Left&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>When a message belongs to the current user, the avatar needs to be <strong>on the right</strong>, when not, the avatar needs to be <strong>on the left</strong>.</p>\n\n<p>In the <code>create_message</code> method of my <code>MessagesChannel</code>, this is the method that is called when a user creates a new message. The issue is, when a message is created, <code>current_user</code> is the user who created the message. This will render the correct HTML for <strong>This user ALONE</strong>. <strong>Other users/subscribers</strong> to the channel will be broadcasted the SAME HTML... this will result in the bug seen in the first screen shot. </p>\n\n<pre><code>def create_message(message_params)\n  message = Message.new context_type: 'Conversation'\n  message[:body] = message_params['data']['body']\n  message[:context_id] = message_params['data']['conversation_id']\n  message[:user_id] = message_params['data']['user_id']\n  data = {}\n  if message.save\n    data[:html] = ApplicationController.render partial: 'conversations/message', locals: { message: message, current_user: current_user }\n  else\n    p message.errors.full_messages.to_sentence\n    data[:html] = \"Error: #{message.errors.full_messages.to_sentence}\"\n  end\n\n  ActionCable.server.broadcast('room', data)\nend\n</code></pre>\n\n<h1>The bug is, in</h1>\n\n<pre><code># conversations/_message.html.erb\n</code></pre>\n\n<p><code>if current_user.id == message.user_id</code> will always return true and the avatar displays on the right even for other users(users who are subscribed to this channel.)</p>\n\n<p>Another thing is, I don't want to touch the behavior in the partial because for the user who <strong>sent</strong> the message, the html sent back from the <code>MessagesChannel</code> is correct(it renders the avatar on the right.) </p>\n\n<h1>Here are two screenshots to illustrate</h1>\n\n<h3>Incorrectly displays for other subscribers screen.</h3>\n\n<p><a href=\"https://i.stack.imgur.com/zcL2Z.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zcL2Z.jpg\" alt=\"enter image description here\"></a></p>\n\n<h3>Correctly displays for message sender screen.</h3>\n\n<p><a href=\"https://i.stack.imgur.com/rCBYK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rCBYK.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Anyone know a workaround where I can still use this <code>_message</code> partial? Thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1514976566, "post_id": 48075768, "comment_id": 83125288, "body": "Why don&#39;t you store your alfphabet in all capital letters from the beginning, like this: <code>alphabet = (&#39;A&#39;..&#39;Z&#39;)</code>, so you don&#39;t need to upcase it later?"}, {"owner": {"reputation": 27, "user_id": 8827012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f25be1447d9710c95b188d8274778cf?s=128&d=identicon&r=PG&f=1", "display_name": "James Burton", "link": "https://stackoverflow.com/users/8827012/james-burton"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1514977873, "post_id": 48075768, "comment_id": 83125984, "body": "I have done as you said, however when the alphabet is capitalised it stops the frequency from working? Any ideas?"}, {"owner": {"reputation": 27, "user_id": 8827012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f25be1447d9710c95b188d8274778cf?s=128&d=identicon&r=PG&f=1", "display_name": "James Burton", "link": "https://stackoverflow.com/users/8827012/james-burton"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1514978066, "post_id": 48075768, "comment_id": 83126098, "body": "Nevermind I&#39;ve sorted it, just needed to convert the parsed string to uppercase aswell. Thanks Marek."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514987642, "post_id": 48075768, "comment_id": 83131402, "body": "@JamesBurton so you can print an alphabet and convert a string to uppercase but somehow the frequency stops working. Don&#39;t you think that your question is lacking some information? What are you actually trying to do? What is your input, what is your output and how does your expected result look like?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 8827012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f25be1447d9710c95b188d8274778cf?s=128&d=identicon&r=PG&f=1", "display_name": "James Burton", "link": "https://stackoverflow.com/users/8827012/james-burton"}, "edited": false, "score": 0, "creation_date": 1514977261, "post_id": 48075850, "comment_id": 83125664, "body": "Hi, this works as far as converting the alphabet to uppercase, however it no longer adds the frequency to the letters. Thought it was due to you removing the &quot;.collect&quot; but that didn&#39;t seem to work either. Any ideas? Is it to to do with the second &quot;.map&quot;?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 27, "user_id": 8827012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f25be1447d9710c95b188d8274778cf?s=128&d=identicon&r=PG&f=1", "display_name": "James Burton", "link": "https://stackoverflow.com/users/8827012/james-burton"}, "edited": false, "score": 0, "creation_date": 1514977550, "post_id": 48075850, "comment_id": 83125821, "body": "<code>map</code> and <code>collect</code> are aliases. Explain (in your question) what do you want this code to do."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 1, "last_activity_date": 1514977173, "last_edit_date": 1514977173, "creation_date": 1514976451, "answer_id": 48075850, "question_id": 48075768, "link": "https://stackoverflow.com/questions/48075768/upcase-alphabet/48075850#48075850", "title": "Upcase alphabet", "body": "<p>You can iterate over it (it is <code>Range</code>) and map it to upcase, like this:</p>\n\n<pre><code>mappedfreq = alphabet.map(&amp;:upcase).map do |s1|\n  frq = @lt[s1]\n  s1 + (frq&gt; 0 ? \": #{'x ' x frq}\" : '')\nend\n</code></pre>\n\n<p>I also see no reason that you can't store your alphabet in all capital letters in the first place, so that you wouldn't have to capitalize it:</p>\n\n<pre><code>alphabet = ('A'..'Z')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "is_accepted": true, "score": 0, "last_activity_date": 1514976629, "creation_date": 1514976629, "answer_id": 48075887, "question_id": 48075768, "link": "https://stackoverflow.com/questions/48075768/upcase-alphabet/48075887#48075887", "title": "Upcase alphabet", "body": "<p>The way you have created the range of alphabets is incorrect.</p>\n\n<p>You should do it like this:</p>\n\n<pre><code>('a'..'z')\n</code></pre>\n\n<p>After that, Marek's solution will do the trick.</p>\n\n<pre><code>mappedfreq = alphabet.map(&amp;:upcase).map do |s1|\n  frq = @lt[s1]\n  s1 + (frq&gt; 0 ? \": #{'x ' x frq}\" : '')\nend\n</code></pre>\n\n<p>Hope this is what you are looking for.</p>\n"}], "owner": {"reputation": 27, "user_id": 8827012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f25be1447d9710c95b188d8274778cf?s=128&d=identicon&r=PG&f=1", "display_name": "James Burton", "link": "https://stackoverflow.com/users/8827012/james-burton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48075887, "answer_count": 2, "score": -3, "last_activity_date": 1515040702, "creation_date": 1514976167, "last_edit_date": 1515040702, "question_id": 48075768, "link": "https://stackoverflow.com/questions/48075768/upcase-alphabet", "title": "Upcase alphabet", "body": "<p>I can print the alphabet:</p>\n\n<pre><code>alphabet = 'A'..'Z'\n</code></pre>\n\n<p>I can convert strings into uppercase:</p>\n\n<pre><code>string.upcase\n</code></pre>\n\n<p>However, I can't figure out the right syntax to print the alphabet in uppercase.</p>\n\n<p>The code below prints the alphabet capitalised, but the frequency does not work. When the alphabet is lowercase, it works.</p>\n\n<pre><code>s1 = @string\nalphabet = 'A'..'Z'\nmappedfreq = alphabet.collect do |s1|\n  freq = @l1[s1]\n  s1 + freq &gt; 0 ? \": #{'* ' * freq}\" : ''\nend\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1514976163, "post_id": 48075730, "comment_id": 83125071, "body": "Do Not use photo as result."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9167596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764274db38c1c627a0733307e86f8c0f?s=128&d=identicon&r=PG&f=1", "display_name": "S.B", "link": "https://stackoverflow.com/users/9167596/s-b"}, "edited": false, "score": 0, "creation_date": 1514981774, "post_id": 48075913, "comment_id": 83128080, "body": "Thanks for your help ! , I&#39;ve just a last question , why have I again 2 brackets at the beginning of the file and at the end ?"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "reply_to_user": {"reputation": 7, "user_id": 9167596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764274db38c1c627a0733307e86f8c0f?s=128&d=identicon&r=PG&f=1", "display_name": "S.B", "link": "https://stackoverflow.com/users/9167596/s-b"}, "edited": false, "score": 0, "creation_date": 1514982800, "post_id": 48075913, "comment_id": 83128680, "body": "Do you have the two brackets still although you did one of my suggestion up there?"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "reply_to_user": {"reputation": 7, "user_id": 9167596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764274db38c1c627a0733307e86f8c0f?s=128&d=identicon&r=PG&f=1", "display_name": "S.B", "link": "https://stackoverflow.com/users/9167596/s-b"}, "edited": false, "score": 0, "creation_date": 1517202822, "post_id": 48075913, "comment_id": 83982519, "body": "Any news here? Do you still have the problem?"}], "tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 0, "last_activity_date": 1514976742, "creation_date": 1514976742, "answer_id": 48075913, "question_id": 48075730, "link": "https://stackoverflow.com/questions/48075730/json-bad-format-use-board-ruby/48075913#48075913", "title": "json bad format use board Ruby", "body": "<p>You are pushing an array into an array <code>res &lt;&lt; [big]</code><br>\nTo stop creating two brackets just write <code>res &lt;&lt; big</code> or if it is necesarry for another reason flatten the <code>res</code> before you convert it to json</p>\n"}], "owner": {"reputation": 7, "user_id": 9167596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764274db38c1c627a0733307e86f8c0f?s=128&d=identicon&r=PG&f=1", "display_name": "S.B", "link": "https://stackoverflow.com/users/9167596/s-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514976742, "creation_date": 1514976033, "last_edit_date": 1514976223, "question_id": 48075730, "link": "https://stackoverflow.com/questions/48075730/json-bad-format-use-board-ruby", "title": "json bad format use board Ruby", "body": "<p>I've a problem with  json format, when I want to use it with a board.\nIn my json file each information have separate with double brackets while i should have only bracket, is it possible to delete one of them?</p>\n\n<p>code : </p>\n\n<pre><code>elsif (params[:which] == \"BigSize\")\n  res= []\n  #   PrintType.where(\"width &gt; 70\").where(\"width &lt;= 120\").where(\"height &gt; 118.9\").where(\"height &lt;= 150\").pluck('DISTINCT artwork_id')\n  big = PrintType.where(\"width &gt; 70\").where(\"width &lt;= 120\").where(\"height &gt; 118.9\").where(\"height &lt;= 150\").pluck('DISTINCT artwork_id')\n  res &lt;&lt; [big]\n  render :json =&gt; res.to_json(include: { :images =&gt; { :except =&gt; :img_orig } })\n</code></pre>\n\n<p>result : <a href=\"https://i.stack.imgur.com/8u44T.png\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "iis", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "edited": false, "score": 0, "creation_date": 1514997269, "post_id": 48076393, "comment_id": 83137079, "body": "I&#39;ve read these comments before posting the question and they were not helpful at all."}], "tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": false, "score": 2, "last_activity_date": 1514978615, "creation_date": 1514978615, "answer_id": 48076393, "question_id": 48074899, "link": "https://stackoverflow.com/questions/48074899/httpplatformhandler-http-error-502-3-bad-gateway/48076393#48076393", "title": "HttpPlatformHandler HTTP Error 502.3 - Bad Gateway", "body": "<p>you can read this <a href=\"https://www.hanselman.com/blog/AnnouncingRunningRubyOnRailsOnIIS8OrAnythingElseReallyWithTheNewHttpPlatformHandler.aspx\" rel=\"nofollow noreferrer\">comments</a></p>\n\n<blockquote>\n  <h1>Sowmya</h1>\n  \n  <p>I did like its said in the post, but my app shows\n  HTTP Error 502.3 - Bad Gateway\n  There was a connection error while trying to route the request.\n  Most likely causes:\n  The CGI application did not return a valid set of HTTP errors.\n  A server acting as a proxy or gateway was unable to process the request due to an error in a parent gateway.\n  When browsing the file through IIS manager also i got the same error.\n  But on running the rails app using webrick its working. Any idea what i did wrong here?</p>\n  \n  <h1>jaytho</h1>\n  \n  <p>Hey thanks for this writeup! I've been wrestling with this and am wondering how the hell you got this to work. httpPlatformHandler only supports IIS8.0+ which suggests 2012r2, and RubyOneclickInstaller doesn't fully support 2012r2. 2008 only right now- and when I try to install ruby git doesn't install completely on my test case of a shiny new AWS 2012r2 box.\n  Sounds really promising, however.\n  I got my app (with libV8 even) running on web brick on 2008r2, but no joy with the XML configs you have shown above (I get errors). I tried to install IIS8.0 limited version refuses to install, as well as the httpPlatformHandler.\n  What exact platforms did you use?\n  Thanks again for taking the time to write this up.\n  Do'h! I grabbed ruby installer instead of rails installer. That is why git didn't install.</p>\n  \n  <h1>HostForLIFE.eu</h1>\n  \n  <p>Great information! Congrats to Microsoft for launch this HttpPlatformHandler. It's really interesting, running Ruby on Windows Environment. Our opinion that to run Ruby on Rails, it will better to use JRuby. Anyway, this is really interesting. We really look forward to check your next update.\n  Regards</p>\n  \n  <p>Thanks so much for the great article!\n  I'm getting an error - maybe you can look at my question on Stack Overflow and see if you know the answer?</p>\n</blockquote>\n\n<p>The discussion continues in this <a href=\"https://stackoverflow.com/questions/30006332/rails-4-on-iis-8-with-http-platform-handler\">stackoverflow post</a></p>\n"}, {"tags": [], "owner": {"reputation": 9473, "user_id": 5377037, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e0c20b401183f5646ae297c943f5da4?s=128&d=identicon&r=PG&f=1", "display_name": "5377037", "link": "https://stackoverflow.com/users/5377037/5377037"}, "is_accepted": false, "score": 2, "last_activity_date": 1515607054, "last_edit_date": 1515607054, "creation_date": 1515437913, "answer_id": 48156493, "question_id": 48074899, "link": "https://stackoverflow.com/questions/48074899/httpplatformhandler-http-error-502-3-bad-gateway/48156493#48156493", "title": "HttpPlatformHandler HTTP Error 502.3 - Bad Gateway", "body": "<p>Try with below web.config settings and add your project in directory <a href=\"https://gist.github.com/tomomura/01df5ce5a7b5b7eb9edc\" rel=\"nofollow noreferrer\"><code>C:\\inetpub\\wwwroot\\</code></a> first:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n  &lt;system.webServer&gt;\n    &lt;handlers&gt;\n      &lt;add name=\"httpplatformhandler\" path=\"*\" verb=\"*\"\n        modules=\"httpPlatformHandler\"\n        resourceType=\"Unspecified\" requireAccess=\"Script\" /&gt;\n    &lt;/handlers&gt;\n    &lt;httpPlatform stdoutLogEnabled=\"true\"\n      startupTimeLimit=\"20\"\n      processPath=\"C:\\Ruby21\\bin\\ruby.exe\"\n      arguments=\"C:\\inetpub\\wwwroot\\rails_on_iis\\bin\\rails server -p %HTTP_PLATFORM_PORT% -b 127.0.0.1 -e production\"&gt;\n    &lt;/httpPlatform&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1352, "favorite_count": 0, "answer_count": 2, "score": 10, "last_activity_date": 1515607054, "creation_date": 1514973004, "question_id": 48074899, "link": "https://stackoverflow.com/questions/48074899/httpplatformhandler-http-error-502-3-bad-gateway", "title": "HttpPlatformHandler HTTP Error 502.3 - Bad Gateway", "body": "<p>I am trying to run rails on IIS, I followed the steps mentioned <a href=\"https://www.hanselman.com/blog/AnnouncingRunningRubyOnRailsOnIIS8OrAnythingElseReallyWithTheNewHttpPlatformHandler.aspx\" rel=\"noreferrer\">here</a> by \nScott Hanselman.</p>\n\n<p>Here's some info that might help:</p>\n\n<ul>\n<li>Rails version: 5.1.4</li>\n<li>Ruby version: 2.3.3</li>\n</ul>\n\n<p>After I followed the setup steps, I countered this issue</p>\n\n<blockquote>\n  <p>HTTP Error 502.3 - Bad Gateway </p>\n  \n  <p>There was a connection error while trying to route the request.</p>\n  \n  <p>Most likely causes:</p>\n  \n  <ul>\n  <li><p>The CGI application did not return a valid set of HTTP errors.</p></li>\n  <li><p>A server acting as a proxy or gateway was unable to process the request due to an error in a parent gateway.</p></li>\n  </ul>\n  \n  <p>Things you can try:</p>\n  \n  <ul>\n  <li><p>Use DebugDiag to troubleshoot the CGI application.</p></li>\n  <li><p>Determine if a proxy or gateway is responsible for this error.</p></li>\n  </ul>\n</blockquote>\n\n<p>Here is my <code>web.config</code> file content.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n  &lt;system.webServer&gt;\n    &lt;handlers&gt;\n      &lt;add name=\"httpplatformhandler\" path=\"*\" verb=\"*\" modules=\"httpPlatformHandler\" resourceType=\"Unspecified\" requireAccess=\"Script\" /&gt;\n    &lt;/handlers&gt;\n    &lt;httpPlatform processPath=\"C:\\RailsInstaller\\Ruby2.3.3\\bin\\ruby.exe\" arguments=\"&amp;quot;C:\\RailsInstaller\\Ruby2.3.3\\bin\\rails&amp;quot; server -p %HTTP_PLATFORM_PORT% -b 127.0.0.1\" startupTimeLimit=\"200\" stdoutLogEnabled=\"true\" stdoutLogFile=\"rails.log\"&gt;\n      &lt;environmentVariables&gt;\n        &lt;environmentVariable name=\"RAILS_ENV\" value=\"development\" /&gt;\n      &lt;/environmentVariables&gt;\n    &lt;/httpPlatform&gt;\n    &lt;directoryBrowse enabled=\"true\" showFlags=\"Date, Time, Size, Extension\" /&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I am not sure what the problem is, and what configurations I miss!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "uri"], "answers": [{"comments": [{"owner": {"reputation": 2080, "user_id": 5676949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lTaoh.jpg?s=128&g=1", "display_name": "Dog", "link": "https://stackoverflow.com/users/5676949/dog"}, "edited": false, "score": 1, "creation_date": 1514972391, "post_id": 48074729, "comment_id": 83122972, "body": "but where is it even getting that url from? the params are set as     before { post &#39;POST /url_contents&#39;, params: &quot;www.google.com&quot; }"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "reply_to_user": {"reputation": 2080, "user_id": 5676949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lTaoh.jpg?s=128&g=1", "display_name": "Dog", "link": "https://stackoverflow.com/users/5676949/dog"}, "edited": false, "score": 1, "creation_date": 1514972846, "post_id": 48074729, "comment_id": 83123238, "body": "@Dog Where do you set  your root url? User <code>git grep &#39;www.example.com&#39;</code> to check where you set it. <code>url_contents?url=www.google.com</code> this part is appended."}, {"owner": {"reputation": 2080, "user_id": 5676949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lTaoh.jpg?s=128&g=1", "display_name": "Dog", "link": "https://stackoverflow.com/users/5676949/dog"}, "edited": false, "score": 0, "creation_date": 1514972999, "post_id": 48074729, "comment_id": 83123321, "body": "i think i figured it out. it was partially the way i had params set up in the rspec test. i need to pass it in as url instead of params."}], "tags": [], "owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1514972264, "creation_date": 1514972264, "answer_id": 48074729, "question_id": 48074401, "link": "https://stackoverflow.com/questions/48074401/fixing-rspec-uriinvalidurierror-bad-uriis-not-uri-error-for-post-request/48074729#48074729", "title": "Fixing RSPEC URI::InvalidURIError: bad URI(is not URI?): error for post request test", "body": "<p><code>http://www.example.com:80POST /url_contents?url=www.google.com</code> This is not valid url.</p>\n"}, {"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1514983936, "creation_date": 1514983936, "answer_id": 48077820, "question_id": 48074401, "link": "https://stackoverflow.com/questions/48074401/fixing-rspec-uriinvalidurierror-bad-uriis-not-uri-error-for-post-request/48077820#48077820", "title": "Fixing RSPEC URI::InvalidURIError: bad URI(is not URI?): error for post request test", "body": "<p>You are making the request in your RSpec the wrong way:</p>\n\n<pre><code>context 'when the url is valid' do\n  # Change this line below\n  before { post :create, url: \"www.google.com\" }\n\n  it 'returns a status code of 201' do \n    expect(response).to have_http_status(201)\n  end\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7166178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gdJ0A.jpg?s=128&g=1", "display_name": "Weiyan Chan", "link": "https://stackoverflow.com/users/7166178/weiyan-chan"}, "is_accepted": false, "score": 0, "last_activity_date": 1523935801, "last_edit_date": 1523935801, "creation_date": 1523934687, "answer_id": 49869279, "question_id": 48074401, "link": "https://stackoverflow.com/questions/48074401/fixing-rspec-uriinvalidurierror-bad-uriis-not-uri-error-for-post-request/49869279#49869279", "title": "Fixing RSPEC URI::InvalidURIError: bad URI(is not URI?): error for post request test", "body": "<p>Try this  before editing your test case</p>\n\n<pre><code>before { post 'POST /url_contents', params: \"www.google.com\" }\n</code></pre>\n\n<p>and this after editing your test case</p>\n\n<pre><code>before { post '/url_contents', params: \"www.google.com\" }\n</code></pre>\n"}], "owner": {"reputation": 2080, "user_id": 5676949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lTaoh.jpg?s=128&g=1", "display_name": "Dog", "link": "https://stackoverflow.com/users/5676949/dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2693, "favorite_count": 0, "accepted_answer_id": 48077820, "answer_count": 3, "score": 2, "last_activity_date": 1523935801, "creation_date": 1514971063, "last_edit_date": 1514972453, "question_id": 48074401, "link": "https://stackoverflow.com/questions/48074401/fixing-rspec-uriinvalidurierror-bad-uriis-not-uri-error-for-post-request", "title": "Fixing RSPEC URI::InvalidURIError: bad URI(is not URI?): error for post request test", "body": "<p>I have a Rails API that scrapes a website and stores the site's text content to the db. I'm writing an rspec test for the create route, but I keep getting the error:</p>\n\n<pre><code>Failure/Error: before { post 'POST /url_contents?url=www.google.com' }\n\n URI::InvalidURIError:\n   bad URI(is not URI?): http://www.example.com:80POST /url_contents?url=www.google.com\n</code></pre>\n\n<p>However, if I make the post request myself through Postman with the supplied URL, it is successful. Why is rspec giving me this URI error and how can I fix it?</p>\n\n<pre><code>This is how the test is written:\n\ndescribe 'POST /url_contents' do\n\ncontext 'when the url is valid' do\n\n    before { post 'POST /url_contents', params: \"www.google.com\" }\n\n    it 'returns a status code of 201' do \n        expect(response).to have_http_status(201)\n    end\n\n    end \n\nend\n</code></pre>\n\n<p>The controller action looks like:</p>\n\n<pre><code>def create\n    scrapedContent = UrlContent.parser(url_params)\n    if scrapedContent == 403\n        render json: { messsage: \"Invalid URL\" } \n    else\n        newContent = UrlContent.new\n        binding.pry\n        newContent.content = scrapedContent.encode(\"UTF-16be\", :invalid=&gt;:replace, :replace=&gt;\"?\").encode('UTF-8')\n        if newContent.save? \n            render json: {message: \"Successfully added the url content\"}, status: 201\n        else \n            render json: { message: \"error, #{newContent.errors.full_messages}\"}, status: 412\n        end \n    end \nend\n</code></pre>\n\n<p>Thank you for your insight!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shopify", "interpolation", "liquid"], "comments": [{"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514972021, "post_id": 48074046, "comment_id": 83122794, "body": "<code>&quot;#{teacher.name}&quot;</code> this syntax is for a ruby or related template file, such as <code>.erb</code> <code>.haml</code>, rendered by its template engine."}], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 6, "last_activity_date": 1514971499, "creation_date": 1514971499, "answer_id": 48074519, "question_id": 48074046, "link": "https://stackoverflow.com/questions/48074046/how-to-interpolate-in-liquid-shopify/48074519#48074519", "title": "How to interpolate in liquid shopify", "body": "<p>You can use the <a href=\"https://shopify.github.io/liquid/tags/variable/#capture\" rel=\"noreferrer\"><code>capture</code></a> tag to build your variable as follows:</p>\n\n<pre><code>{% capture title_content %}\nthe name of the teacher is {{ teacher.name }}\n{% endcapture %}\n</code></pre>\n\n<p>Alternatively, you should be able to use the <a href=\"https://shopify.github.io/liquid/filters/append/\" rel=\"noreferrer\"><code>append</code></a> filter during assignment:</p>\n\n<pre><code>{% assign title_content = \"the name of the teacher is \" | append: teacher.name %}\n</code></pre>\n\n<p>In any case, Liquid is supposed to be a \"safe\" templating language. As such, it will be less expressive then e.g. ERB which allows you to use arbitrary Ruby code. This however ensures that normal users can enter and update the templates without risking arbitrary code execution on the server.</p>\n"}], "owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1870, "favorite_count": 0, "accepted_answer_id": 48074519, "answer_count": 1, "score": 2, "last_activity_date": 1514971499, "creation_date": 1514969601, "last_edit_date": 1514970381, "question_id": 48074046, "link": "https://stackoverflow.com/questions/48074046/how-to-interpolate-in-liquid-shopify", "title": "How to interpolate in liquid shopify", "body": "<p>I am editing title tags that was written by another developer in Shopify Liquid, unfortunately i am so confused about the syntax. I am trying to do ruby style interpolation in one of the edits. for example, </p>\n\n<pre><code>{% assign title_content = teacher.name %}\n{% include \"layout/page_title\", title: title_content %}\n</code></pre>\n\n<p>in pure ruby, it would be something like this</p>\n\n<pre><code>{% assign title_content = \"the name of the teacher is #{teacher.name}\" %}\n</code></pre>\n\n<p>which will out give the output \"the name of the teacher is bla bla\".\nI would like to know if can do something like this with liquid shopify.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1514967870, "post_id": 48073608, "comment_id": 83120857, "body": "Either make both controllers inherit from a common ancestor (<code>class A::TechnologiesController &lt; BaseTechnologiesController</code>) or include a module that provides the methods."}, {"owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514967961, "post_id": 48073608, "comment_id": 83120894, "body": "@Stefan So there isn&#39;t a method to borrow the method in another class like javascript?"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514968150, "post_id": 48073608, "comment_id": 83120967, "body": "In my own opinion, in different controller, you don&#39;t need do any mixins. It is more readable."}, {"owner": {"reputation": 342, "user_id": 7408438, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8bb7b1548a23f1ff7ecbb17e50035c52?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/7408438/sam"}, "edited": false, "score": 0, "creation_date": 1514968160, "post_id": 48073608, "comment_id": 83120974, "body": "You can use ActiveModel::Concern here. You can define one method in concern and include in your controller."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514983653, "post_id": 48073608, "comment_id": 83129132, "body": "@Run What do you mean, &quot;like in javascript&quot;? You can call a **static**(!!) method from another class in both languages, but this method is not - and cannot be - static."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1514967896, "post_id": 48073648, "comment_id": 83120867, "body": "Please provide a complete answer; simple links are not welcome on SO, <a href=\"https://stackoverflow.com/help/how-to-answer\">according to ToS</a>."}, {"owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "edited": false, "score": 0, "creation_date": 1514967968, "post_id": 48073648, "comment_id": 83120896, "body": "So there isn&#39;t a method to borrow the method in another class like javascript?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "edited": false, "score": 1, "creation_date": 1514968132, "post_id": 48073648, "comment_id": 83120957, "body": "@Run: this is possible in ruby, but it&#39;s not done. Unlike javascript, ruby has good tools for sharing functionality."}, {"owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1514968382, "post_id": 48073648, "comment_id": 83121069, "body": "@SergioTulentsev can you provide the borrowing style?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1514968542, "post_id": 48073648, "comment_id": 83121124, "body": "\u201ccan you provide the borrowing style?\u201d\u2014what\u2019s wrong with my answer? I doubt @SergioTulentsev might invent something more fashionable, but let\u2019s see :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514968818, "post_id": 48073648, "comment_id": 83121258, "body": "@mudasobwa: Yes, y\u0336o\u0336u\u0336r\u0336s\u0336 \u0336i\u0336s\u0336 \u0336t\u0336h\u0336e\u0336 \u0336c\u0336o\u0336r\u0336r\u0336e\u0336c\u0336t\u0336 \u0336a\u0336n\u0336s\u0336w\u0336e\u0336r\u0336 \u0336, I would have posted the same as you, but apparently it&#39;s not applicable here ( but I noted the level of your opinion of me \ud83d\ude08)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1514969292, "post_id": 48073648, "comment_id": 83121480, "body": "@SergioTulentsev nah, I left a room for a little chance. BTW, my answer was not 100% correct, one can not bind an unbound method to an arbitrary instance."}], "tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 1, "last_activity_date": 1514968214, "last_edit_date": 1514968214, "creation_date": 1514967785, "answer_id": 48073648, "question_id": 48073608, "link": "https://stackoverflow.com/questions/48073608/calling-a-method-in-another-class/48073648#48073648", "title": "Calling a method in another class?", "body": "<p>This is a good example of a <a href=\"https://www.sitepoint.com/ruby-mixins-2/\" rel=\"nofollow noreferrer\">mixin</a>.<br>\nWith this you can DRY up your code and you don't have to call the method of another controller.</p>\n\n<p>Here is the module:</p>\n\n<pre><code>module CommonInterface\n  def render_technology\n    render :json, Technology.all\n  end\nend\n</code></pre>\n\n<p>And this would be your controller</p>\n\n<pre><code>class B::TechnologiesController &lt; ApplicationController\n  include CommonInterface\n  def index\n    render_technology\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1514968327, "post_id": 48073739, "comment_id": 83121051, "body": "@SergioTulentsev I did, thanks! <code>[INFO] bound to the answer.</code>"}, {"owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "edited": false, "score": 0, "creation_date": 1514968717, "post_id": 48073739, "comment_id": 83121197, "body": "The first code raise: TypeError: bind argument must be an instance of A::TechnologiesController."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1514968881, "post_id": 48073739, "comment_id": 83121287, "body": "Although it is <i>clearly</i> overkill in this instance, one could also use a presenter, no?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1514969151, "post_id": 48073739, "comment_id": 83121403, "body": "@jvillian: nope, presenters don&#39;t seem applicable here too. But maybe I&#39;m not seeing the same as you. Could you elaborate?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "edited": false, "score": 1, "creation_date": 1514969244, "post_id": 48073739, "comment_id": 83121453, "body": "@Run indeed, the object should be an instance of the source class. I never knew that before because nobody writes code in Ruby that way."}, {"owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "edited": false, "score": 0, "creation_date": 1514969429, "post_id": 48073739, "comment_id": 83121548, "body": "@mudasobwa If it must be a instance of the source class, it is not need to borrow."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1514969541, "post_id": 48073739, "comment_id": 83121598, "body": "Maybe just drop the first part altogether. Seems out of place now. If we&#39;re rebinding a method of another instance of the same class, might as well use our own method :shrug:"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1514969611, "post_id": 48073739, "comment_id": 83121635, "body": "Again, <i>way</i> overkill for this instance. But, you could have a <code>TechnologyIndexPresenter</code> with a method <code>present</code> that does <code>render json: Technology.all</code>. Then call <code>TechnologyIndexPresenter.present(self)</code> in each of the <code>index</code> methods of the <code>controllers</code> in question. You would <i>never</i> do it in this case. But perhaps if the logic was more complex."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1514969639, "post_id": 48073739, "comment_id": 83121657, "body": "@SergioTulentsev nope. Check the example in the documentation. It makes a perfect sense in class hierarchy when one borrows a method from the middle of the hierarchy chain and tries to bind it to the instance of class <i>being an ancestor</i>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1514969433, "last_edit_date": 1514969433, "creation_date": 1514968184, "answer_id": 48073739, "question_id": 48073608, "link": "https://stackoverflow.com/questions/48073608/calling-a-method-in-another-class/48073739#48073739", "title": "Calling a method in another class?", "body": "<p>Answering an implicit question stated in comments: there is an ability to borrow the method with <a href=\"http://ruby-doc.org/core/UnboundMethod.html#method-i-bind\" rel=\"nofollow noreferrer\"><code>UnboundMethod#bind</code></a> <em>if and only</em> the object calling <code>bind</code> <code>is_a?()</code> instance of the class the method belongs to:</p>\n\n<pre><code>def index\n  A::TechnologiesController.instance_method(:index).bind(self).()\nend\n</code></pre>\n\n<p>but this is neither idiomatic nor readable. One should either use a mixin:</p>\n\n<pre><code>module Mixins::TechnologiesController\n  def index\n    render json: Technology.all\n  end\nend\n\nclass A::TechnologiesController &lt; ApplicationController\n  include Mixins::TechnologiesController\nend\nclass B::TechnologiesController &lt; ApplicationController\n  include Mixins::TechnologiesController\nend\n</code></pre>\n\n<p>or a common ancestor:</p>\n\n<pre><code>class Base::TechnologiesController &lt; ApplicationController\n  def index\n    render json: Technology.all\n  end\nend\nclass A::TechnologiesController &lt; Base::TechnologiesController; end\nclass B::TechnologiesController &lt; Base::TechnologiesController; end\n</code></pre>\n\n<hr>\n\n<p>Bonus track: in Rails one might use <a href=\"http://api.rubyonrails.org/classes/Module.html#method-i-delegate\" rel=\"nofollow noreferrer\"><code>Module#delegate</code></a> monkeypatch.</p>\n\n<hr>\n\n<p>Bonus track #2: the implementation on procs stored as constants:</p>\n\n<pre><code>class A::TechnologiesController &lt; ApplicationController\n  INDEX = -&gt; { render json: Technology.all }\n  def index\n    INDEX.()\n  end\nend\n\nclass B::TechnologiesController &lt; ApplicationController\n  def index\n    A::INDEX.()\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 5805858, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kTzms-vTNWM/AAAAAAAAAAI/AAAAAAAABDw/Iy3T0qx3QUA/photo.jpg?sz=128", "display_name": "vladvel", "link": "https://stackoverflow.com/users/5805858/vladvel"}, "is_accepted": false, "score": 0, "last_activity_date": 1514971529, "creation_date": 1514971529, "answer_id": 48074526, "question_id": 48073608, "link": "https://stackoverflow.com/questions/48073608/calling-a-method-in-another-class/48074526#48074526", "title": "Calling a method in another class?", "body": "<p>The ancestor and mixin answers are really good if you do want to DRY things up, but in my opinion you don't necessarily have to. The <code>render json:</code> bit belongs in the controller action. You expect your action to render something in both controllers.</p>\n\n<p>The query is something that might change in the same way over time I guess <code>Technology.all</code>, so you could abstract that somewhere, but again, it might be a good idea to wait and see if that is the case.</p>\n\n<p>If you do go with mixins or a base class, you will couple the two controllers, which might be fine. But again, you might just want to take this decision later on.</p>\n"}, {"tags": [], "owner": {"reputation": 648, "user_id": 7617067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFENc.jpg?s=128&g=1", "display_name": "Mohammad Shahnawaz", "link": "https://stackoverflow.com/users/7617067/mohammad-shahnawaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1514974230, "creation_date": 1514974230, "answer_id": 48075268, "question_id": 48073608, "link": "https://stackoverflow.com/questions/48073608/calling-a-method-in-another-class/48075268#48075268", "title": "Calling a method in another class?", "body": "<p>You can solve the above problem by making a super method in the ApplicationController\nand you need to add one more method in each controller to pass the values to super method you can not only used for Technology model you can also used it for any other model. </p>\n\n<p>For sample example</p>\n\n<p>In the application controller</p>\n\n<pre><code>    class ApplicationController &lt; ActionController::Base\n      def index\n        @collection = model\n      end\n    end\n</code></pre>\n\n<p>In each controller we can call the above method like this</p>\n\n<pre><code>    class StudentsController &lt; ApplicationController\n\n      def index\n        super\n      end\n\n      def model\n        Student\n      end\n    end\n\n\n\n\n    class JobsController &lt; ApplicationController\n      def index\n        super\n      end\n      def model\n        Job\n      end\n    end\n</code></pre>\n\n<p>The data you will recived in the @collection that can be used in the views for example</p>\n\n<p>For the app/views/students/index.html.erb</p>\n\n<pre><code>    &lt;% @collection.all.each do |student| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= student.Name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= student.Email %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>For the app/views/jobs/index.html.erb</p>\n\n<pre><code>    &lt;% @collection.all.each do |job| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= job.id %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= job.exp %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 714, "user_id": 5663576, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/c4b9c1ff3a7b8a09f77bd5dd248b968d?s=128&d=identicon&r=PG&f=1", "display_name": "Run", "link": "https://stackoverflow.com/users/5663576/run"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1514974230, "creation_date": 1514967587, "question_id": 48073608, "link": "https://stackoverflow.com/questions/48073608/calling-a-method-in-another-class", "title": "Calling a method in another class?", "body": "<p>I have two controllers in different namespace(a and b), like below:</p>\n\n<pre><code>class A::TechnologiesController &lt; ApplicationController\n  def index\n    render json: Technology.all\n  end\nend\n\nclass B::TechnologiesController &lt; ApplicationController\n  def index\n    render json: Technology.all\n  end\nend\n</code></pre>\n\n<p>The two actions execute the same logic, and I belive it is a repetition. I want to eliminate the repetition, so how can I borrow the code in namespace a like below?</p>\n\n<pre><code>class B::TechnologiesController &lt; ApplicationController\n  def index\n    A::TechnologiesController.method(:index).call self\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9167050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecd8b858b6140eb8ac891e8cc25a95a?s=128&d=identicon&r=PG&f=1", "display_name": "midu", "link": "https://stackoverflow.com/users/9167050/midu"}, "edited": false, "score": 0, "creation_date": 1514966002, "post_id": 48073243, "comment_id": 83120108, "body": "It still: ERROR:  could not open extension control file &quot;/usr/share/postgresql/9.5/extension/postgis.control&quot;: No such file or directory  ********** Error **********  ERROR: could not open extension control file &quot;/usr/share/postgresql/9.5/extension/postgis.control&quot;: No such file or directory SQL state: 58P01"}, {"owner": {"reputation": 1, "user_id": 9167050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecd8b858b6140eb8ac891e8cc25a95a?s=128&d=identicon&r=PG&f=1", "display_name": "midu", "link": "https://stackoverflow.com/users/9167050/midu"}, "edited": false, "score": 0, "creation_date": 1514966076, "post_id": 48073243, "comment_id": 83120146, "body": "although when I check the version of postgres is 10.1"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "reply_to_user": {"reputation": 1, "user_id": 9167050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecd8b858b6140eb8ac891e8cc25a95a?s=128&d=identicon&r=PG&f=1", "display_name": "midu", "link": "https://stackoverflow.com/users/9167050/midu"}, "edited": false, "score": 0, "creation_date": 1514966136, "post_id": 48073243, "comment_id": 83120166, "body": "Have you created &#39;postgis.control&#39; file successfully?"}, {"owner": {"reputation": 1, "user_id": 9167050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecd8b858b6140eb8ac891e8cc25a95a?s=128&d=identicon&r=PG&f=1", "display_name": "midu", "link": "https://stackoverflow.com/users/9167050/midu"}, "edited": false, "score": 0, "creation_date": 1514967288, "post_id": 48073243, "comment_id": 83120634, "body": "Thank you so much. I have not installed postgis yet :3. I was successful .Tks again :))"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "reply_to_user": {"reputation": 1, "user_id": 9167050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecd8b858b6140eb8ac891e8cc25a95a?s=128&d=identicon&r=PG&f=1", "display_name": "midu", "link": "https://stackoverflow.com/users/9167050/midu"}, "edited": false, "score": 0, "creation_date": 1514967497, "post_id": 48073243, "comment_id": 83120715, "body": "@midu My great honor!"}], "tags": [], "owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1514965790, "creation_date": 1514965790, "answer_id": 48073243, "question_id": 48073106, "link": "https://stackoverflow.com/questions/48073106/create-extension-if-not-exists-postgis/48073243#48073243", "title": "CREATE EXTENSION IF NOT EXISTS postgis", "body": "<p>First of all, install postgis on your system. \nThen In your postgres console run <code>CREATE EXTENSION postgis;</code>\nMore details please check <a href=\"http://postgis.net/install/\" rel=\"nofollow noreferrer\">http://postgis.net/install/</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9167050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecd8b858b6140eb8ac891e8cc25a95a?s=128&d=identicon&r=PG&f=1", "display_name": "midu", "link": "https://stackoverflow.com/users/9167050/midu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3478, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1514965790, "creation_date": 1514965179, "question_id": 48073106, "link": "https://stackoverflow.com/questions/48073106/create-extension-if-not-exists-postgis", "title": "CREATE EXTENSION IF NOT EXISTS postgis", "body": "<p>I create an app Ruby on rails, using postgis. After rake db:create, I run \nrake db:gis:setup. But it show:</p>\n\n<pre><code>rake aborted!\nActiveRecord::StatementInvalid: PG::UndefinedFile: ERROR:  could not \nopen extension control file \n\"/usr/share/postgresql/9.5/extension/postgis.control\": No such file or \ndirectory\n: CREATE EXTENSION IF NOT EXISTS postgis \n</code></pre>\n\n<p>I use postgres 9.5 or 10, it show same result.\nHow can I fix that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd", "rspec-rails"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1514961530, "post_id": 48071823, "comment_id": 83118324, "body": "what about making a custom test script that runs the individual folders in the correct order? You can use the <a href=\"https://relishapp.com/rspec/rspec-core/v/2-13/docs/command-line/exit-status\" rel=\"nofollow noreferrer\">exit status</a> to quit early if any fail."}], "answers": [{"comments": [{"owner": {"reputation": 20898, "user_id": 11194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ee76d05f9b62656b9eeaa81fe4619db?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/11194/ash"}, "edited": false, "score": 0, "creation_date": 1514983369, "post_id": 48075341, "comment_id": 83128967, "body": "Pretty close to perfect.  Thanks."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "reply_to_user": {"reputation": 20898, "user_id": 11194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ee76d05f9b62656b9eeaa81fe4619db?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/11194/ash"}, "edited": false, "score": 0, "creation_date": 1514991324, "post_id": 48075341, "comment_id": 83133496, "body": "Happy to help. If the solution could be improved at all feel free to offer suggestions and I can edit it (or you can edit it directly)."}], "tags": [], "owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "is_accepted": true, "score": 3, "last_activity_date": 1514974527, "creation_date": 1514974527, "answer_id": 48075341, "question_id": 48071823, "link": "https://stackoverflow.com/questions/48071823/how-to-setup-rspec-to-test-features-last-and-only-if-all-other-tests-pass/48075341#48075341", "title": "How to setup RSpec to test features last and only if all other tests pass", "body": "<p>Although I haven't actually tried this myself, reading through the documentation it appears it is possible to do what you wish.</p>\n\n<p>Add the following to your spec_helper.rb to override the global ordering and force rspec to fail on first failure.</p>\n\n<pre><code>RSpec.configure do |config|\n  config.register_ordering :global do |examples|\n    feature, other = examples.partition do |example|\n      example.metadata[:type] == :feature\n    end\n    other + feature\n  end\n\n  config.fail_fast = true\nend\n</code></pre>\n"}], "owner": {"reputation": 20898, "user_id": 11194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ee76d05f9b62656b9eeaa81fe4619db?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/11194/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 48075341, "answer_count": 1, "score": 3, "last_activity_date": 1514974527, "creation_date": 1514958332, "question_id": 48071823, "link": "https://stackoverflow.com/questions/48071823/how-to-setup-rspec-to-test-features-last-and-only-if-all-other-tests-pass", "title": "How to setup RSpec to test features last and only if all other tests pass", "body": "<p>Like a lot of non-greenfeild projects, I arrived at my new job to find that most tests are performed using feature specs and not controller/model specs.  Naturally this means that the tests take a really long time to execute.</p>\n\n<p>Is there a way I can setup RSpec so that my feature tests run last - and they will only run if all other tests first succeed.  I am migrating the application over to controller tests to speed execution, but there is no need to wait the 15mins for the feature tests to complete if there is an issue with model validation or one of my controllers is busted.</p>\n\n<p>Is what I want to do possible?</p>\n\n<p>(I am running the tests in RubyMine at the moment; but I can move to <code>rake spec</code> if need be). </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1514955641, "post_id": 48071398, "comment_id": 83116424, "body": "Try <code>purchases.expiration_date</code>"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1514958903, "post_id": 48071398, "comment_id": 83117389, "body": "@chad is it working now?"}, {"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1514963297, "post_id": 48071398, "comment_id": 83119003, "body": "@JagdeepSingh I tried both purchases.expiration_date and purchase.expiration_date but it still doesn&#39;t work. Error message is same: Mysql2::Error: Unknown column &#39;purchases.expiration_date&#39; in &#39;having clause&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514963179, "post_id": 48071695, "comment_id": 83118958, "body": "I tried both purchases.expiration_date and purchase.expiration_date but it still doesn&#39;t work. Error message is same:  Mysql2::Error: Unknown column &#39;purchases.expiration_date&#39; in &#39;having clause&#39;"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514963300, "post_id": 48071695, "comment_id": 83119008, "body": "@ChadWoo do you have <code>expiration_date</code> in <code>Purchase</code> model? to check it at rails console <code>Purchase.new</code>?"}, {"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514984139, "post_id": 48071695, "comment_id": 83129425, "body": "Of course there is. The query does work before it meets &#39;having&#39;. &gt; Purchase.new =&gt; #&lt;Purchase id: nil, coin_id: nil, amount: 0, method: &quot;&quot;, account_holder: &quot;&quot;, account_number: &quot;&quot;, created_at: nil, updated_at: nil, expiration_date: nil&gt;"}, {"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514986105, "post_id": 48071695, "comment_id": 83130529, "body": "Or do you think there is another way to get the last record ordered by &#39;expiration_date&#39; without &#39;having&#39;?"}, {"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514993976, "post_id": 48071695, "comment_id": 83135158, "body": "I don&#39;t know why but Coin.joins(:purchase).where(&quot;expiration_date IS NOT NULL&quot;).group(:user_id).having(&quot;expiration_date = MAX(expiration_date)&quot;).select(&#39;coins.*&#39;, &#39;purchases.expiration_date&#39;) returns records, but with .ids it returns unknown column error."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1515043657, "post_id": 48071695, "comment_id": 83152810, "body": "@ChadWoo there may be many ways to do one thing can you tell me what do you exactly require?"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1514957538, "creation_date": 1514957538, "answer_id": 48071695, "question_id": 48071398, "link": "https://stackoverflow.com/questions/48071398/rails-group-and-having-with-two-models/48071695#48071695", "title": "Rails group and having with two models", "body": "<pre><code>coin_ids = Coin.joins(:purchase).where(\"purchases.expiration_date IS NOT NULL\").group(\"coins.user_id\").having(\"purchases.expiration_date = MAX(purchases.expiration_date)\").ids\n\n\ncoins = Coin.where(id: coin_ids)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514985537, "post_id": 48073144, "comment_id": 83130201, "body": "The query does work with sqlite3 but not with mysql2 again. Error message is still same:  Mysql2::Error: Unknown column &#39;expiration_date&#39; in &#39;having clause&#39;"}, {"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514986080, "post_id": 48073144, "comment_id": 83130516, "body": "Or do you think there is another way to get the last record ordered by &#39;expiration_date&#39; without &#39;having&#39;?"}, {"owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "reply_to_user": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514993355, "post_id": 48073144, "comment_id": 83134772, "body": "I think using &#39;having&#39; is the best solution. Can you copy the generated SQL on rails log?"}, {"owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514993960, "post_id": 48073144, "comment_id": 83135141, "body": "I don&#39;t know why but Coin.joins(:purchase).where(&quot;expiration_date IS NOT NULL&quot;).group(:user_id).having(&quot;expiration_date = MAX(expiration_date)&quot;).select(&#39;coins.*&#39;, &#39;purchases.expiration_date&#39;) returns records, but with .ids it returns unknown column error."}, {"owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "reply_to_user": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "edited": false, "score": 0, "creation_date": 1514994534, "post_id": 48073144, "comment_id": 83135486, "body": "I assumpt that <code>ids</code> is scope on your model. But if is not and you want to get  ids of returned coins. You can use <code>Coin.joins(:purchase).where(&quot;expiration_date IS NOT NULL&quot;).group(:user_id).having(&quot;expiration_date = MAX(expiration_date)&quot;).select(&#39;coins.*&#39;, &#39;purchases.expiration_date&#39;).pluck(&#39;coins.id&#39;)</code>"}], "tags": [], "owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "is_accepted": false, "score": 0, "last_activity_date": 1514965332, "creation_date": 1514965332, "answer_id": 48073144, "question_id": 48071398, "link": "https://stackoverflow.com/questions/48071398/rails-group-and-having-with-two-models/48073144#48073144", "title": "Rails group and having with two models", "body": "<p>You should add purchases.expiration_date in the query selection. Please try:</p>\n\n<pre><code>coin_ids = Coin.joins(:purchase).where(\"expiration_date IS NOT NULL\").group(\"user_id\").having(\"expiration_date = MAX(expiration_date)\").select('coins.*', 'purchases.expiration_date').ids\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7083937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e25a720dac1ca3055deda89e5fddb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Woo", "link": "https://stackoverflow.com/users/7083937/chad-woo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514994055, "creation_date": 1514955362, "last_edit_date": 1514994055, "question_id": 48071398, "link": "https://stackoverflow.com/questions/48071398/rails-group-and-having-with-two-models", "title": "Rails group and having with two models", "body": "<p>I'm trying to get the last record ordered by a related model column under a certain condition.</p>\n\n<pre><code># models/coin.rb\nclass Coin &lt; ActiveRecord::Base\n  has_one :purchase\n\n  # fields\n  # - user_id\nend\n\n# models/purchase.rb\nclass Purchase &lt; ActiveRecord::Base\n  belongs_to :coin\n\n  # fields\n  # - expiration_date\nend\n</code></pre>\n\n<p>I want to group \"coin\" records by \"user_id\" and want to get the last record of every user groups ordered by \"expiration_date\". What I'm trying now is as below.</p>\n\n<pre><code>coin_ids = Coin.joins(:purchase).where(\"expiration_date IS NOT NULL\").group(\"user_id\").having(\"expiration_date = MAX(expiration_date)\").ids\ncoins = Coin.joins(:purchase).where(id: coin_ids)\n</code></pre>\n\n<p>It works in the environment with sqlite3, but not in the environment with mysql2 showing this error message:</p>\n\n<pre><code>Mysql2::Error: Unknown column 'expiration_date' in 'having clause'\n</code></pre>\n\n<p><strong>EDIT</strong>\nI don't know why but </p>\n\n<pre><code>Coin.joins(:purchase).where(\"expiration_date IS NOT NULL\").group(:user_id).having(\"expiration_date = MAX(expiration_date)\").select('coins.*', 'purchases.expiration_date') \n</code></pre>\n\n<p>returns records, but </p>\n\n<pre><code>Coin.joins(:purchase).where(\"expiration_date IS NOT NULL\").group(:user_id).having(\"expiration_date = MAX(expiration_date)\").select('coins.*', 'purchases.expiration_date').ids\n</code></pre>\n\n<p>returns unknown column error.</p>\n\n<p>If I'm missing something or more info is needed please tell me. Thanks!!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 2, "creation_date": 1514943665, "post_id": 48070075, "comment_id": 83114029, "body": "You want to output a single string combining the array elements?  <code>puts list.join</code> <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-join\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.0/Array.html#method-i-join</a>"}, {"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 1, "creation_date": 1514943850, "post_id": 48070075, "comment_id": 83114064, "body": "Or if you just had <code>list =[&quot;hello&quot;, &quot;testing&quot;]</code> you could join with the newline <code>puts list.join(&quot;\\n&quot;)</code>"}, {"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1514943896, "post_id": 48070075, "comment_id": 83114073, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4018689/ruby-combining-an-array-into-one-string\">Ruby combining an array into one string</a>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1514951920, "post_id": 48070075, "comment_id": 83115560, "body": "If you don&#39;t insert new-line-strings then <code>puts [&#39;hello&#39;,&#39;testing&#39;]</code> will give you the output you desire."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 1, "creation_date": 1514952577, "post_id": 48070075, "comment_id": 83115691, "body": "just <code>puts list</code> gives what you want. don&#39;t use interpolation in this case"}], "answers": [{"tags": [], "owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "is_accepted": false, "score": 4, "last_activity_date": 1514952926, "creation_date": 1514952926, "answer_id": 48071078, "question_id": 48070075, "link": "https://stackoverflow.com/questions/48070075/how-to-get-a-newline-for-ruby-string-in-the-array/48071078#48071078", "title": "How to get a newline for ruby string in the array", "body": "<pre><code>puts \"#{list}\"\n</code></pre>\n\n<p>This will print the array as it is, as a string.</p>\n\n<pre><code>puts list\n</code></pre>\n\n<p>This will print each element of the array in new line. This might be what you are looking for.</p>\n"}], "owner": {"reputation": 193, "user_id": 9129489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ecc98cad0410fc11f304fe66e7f1233c?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Koh", "link": "https://stackoverflow.com/users/9129489/thomas-koh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515040934, "creation_date": 1514943444, "last_edit_date": 1515040934, "question_id": 48070075, "link": "https://stackoverflow.com/questions/48070075/how-to-get-a-newline-for-ruby-string-in-the-array", "title": "How to get a newline for ruby string in the array", "body": "<p>I am trying to output two values in an array with new line.</p>\n\n<pre><code>list = []\nlist &lt;&lt; \"hello\"\nlist &lt;&lt; \"\\n\";\nlist &lt;&lt; \"testing\"\nputs \"#{list}\"\n</code></pre>\n\n<p>This will give <code>hello</code>, <code>\\n</code>, <code>testing</code> instead of the following output:</p>\n\n<pre><code>hello\ntesting\n</code></pre>\n\n<p>How can I output this array with a newline?</p>\n"}, {"tags": ["ruby", "shopify", "liquid"], "comments": [{"owner": {"reputation": 10262, "user_id": 2329464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07c1b92b1c0090716296537fc12d028b?s=128&d=identicon&r=PG", "display_name": "drip", "link": "https://stackoverflow.com/users/2329464/drip"}, "edited": false, "score": 0, "creation_date": 1514961344, "post_id": 48070055, "comment_id": 83118245, "body": "Yep there is a way, just add another text or url field in the section block schema and add the html markup for the button."}, {"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "reply_to_user": {"reputation": 10262, "user_id": 2329464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07c1b92b1c0090716296537fc12d028b?s=128&d=identicon&r=PG", "display_name": "drip", "link": "https://stackoverflow.com/users/2329464/drip"}, "edited": false, "score": 0, "creation_date": 1514966153, "post_id": 48070055, "comment_id": 83120170, "body": "Can you please show me where to find this and the markup should look like?"}], "answers": [{"comments": [{"owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1515012719, "post_id": 48076471, "comment_id": 83144717, "body": "Hi, thanks for replying. I tried this and it isn&#39;t working"}, {"owner": {"reputation": 66, "user_id": 4110794, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001119995868/picture?type=large", "display_name": "Anish Soni", "link": "https://stackoverflow.com/users/4110794/anish-soni"}, "reply_to_user": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "edited": false, "score": 0, "creation_date": 1515214160, "post_id": 48076471, "comment_id": 83225652, "body": "May I know your website URL so that I can check why it&#39;s not working."}], "tags": [], "owner": {"reputation": 66, "user_id": 4110794, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001119995868/picture?type=large", "display_name": "Anish Soni", "link": "https://stackoverflow.com/users/4110794/anish-soni"}, "is_accepted": false, "score": 0, "last_activity_date": 1514978917, "creation_date": 1514978917, "answer_id": 48076471, "question_id": 48070055, "link": "https://stackoverflow.com/questions/48070055/implement-a-button-on-the-shopify-debut-theme-carousel/48076471#48076471", "title": "Implement a button on the Shopify Debut theme carousel", "body": "<p>Try this. Replace your code with this code in slideshow.liquid:</p>\n\n<pre><code>&lt;div data-section-id=\"{{ section.id }}\" data-section-type=\"slideshow-section\"&gt;\n    {% if section.blocks.size &gt; 0 %}\n&lt;div class=\"slideshow-wrapper\"&gt;\n  &lt;button type=\"button\" class=\"visually-hidden slideshow__pause\" data-id=\"{{ section.id }}\" aria-live=\"polite\"&gt;\n    &lt;span class=\"slideshow__pause-stop\"&gt;\n      {% include 'icon-pause' %}\n      &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.pause_slideshow' | t }}&lt;/span&gt;\n    &lt;/span&gt;\n    &lt;span class=\"slideshow__pause-play\"&gt;\n      {% include 'icon-play' %}\n      &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.play_slideshow' | t }}&lt;/span&gt;\n    &lt;/span&gt;\n  &lt;/button&gt;\n\n  &lt;div class=\"slideshow slideshow--{{ section.settings.slideshow_height }}\" id=\"Slideshow-{{ section.id }}\" data-autoplay=\"{{ section.settings.autoplay }}\" data-speed=\"{{ section.settings.autoplay_speed }}\"&gt;\n    {% for block in section.blocks %}\n      {%- assign is_background_video = false -%}\n      {% if block.type == 'video' %}\n        {% if block.settings.video_type == 'background' or block.settings.video_type =='background-chrome' %}\n          {%- assign is_background_video = true -%}\n        {% endif %}\n      {% endif %}\n\n      &lt;div class=\"slideshow__slide slideshow__slide--{{ block.id }}{% if is_background_video %} slideshow__slide--background-video{% endif %}\" {{ block.shopify_attributes }}&gt;\n        {% if block.settings.link != blank %}\n          &lt;a href=\"{{ block.settings.link }}\" class=\"slideshow__link\"&gt;\n        {% endif %}\n\n        {% if block.type == 'video' %}\n          {% if block.settings.video_url != blank %}\n            &lt;div class=\"video-loader\"&gt;&lt;/div&gt;\n          {% endif %}\n          {% unless block.settings.video_type == 'background' %}\n            &lt;button type=\"button\" class=\"text-link slideshow__video-control slideshow__video-control--close\" data-controls=\"SlideshowVideo-{{ block.id }}\"&gt;\n              {% include 'icon-close' %}\n              &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.close_video' | t }}&lt;/span&gt;\n            &lt;/button&gt;\n          {% endunless %}\n          {% if block.settings.video_url != blank %}\n            &lt;div id=\"SlideshowVideo-{{ block.id }}\" class=\"slideshow__video {% if is_background_video %}slideshow__video--background{% endif %} slideshow__video--{{ block.settings.video_type }}\"\n              data-id=\"{{ block.settings.video_url.id }}\"\n              data-type=\"{{ block.settings.video_type }}\"\n              data-slideshow=\"Slideshow-{{ section.id }}\"&gt;&lt;/div&gt;\n          {% endif %}\n        {% endif %}\n\n        {% if block.settings.image == blank %}\n          &lt;div class=\"slideshow__image js\"&gt;\n            &lt;div class=\"placeholder-background\"&gt;\n              {% capture current %}{% cycle 1, 2 %}{% endcapture %}\n              {{ 'lifestyle-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}\n            &lt;/div&gt;\n          &lt;/div&gt;\n        {% else %}\n          &lt;div class=\"slideshow__image box ratio-container lazyload{% unless forloop.first == true %} lazypreload{% endunless %} js\"\n               data-bgset=\"{% include 'bgset', image: block.settings.image %}\"\n               data-sizes=\"auto\"\n               data-parent-fit=\"cover\"\n               style=\"background-position: {{ block.settings.alignment }};{% if forloop.first == true %} background-image: url('{{ block.settings.image | img_url: '300x300' }});{% endif %}\"&gt;\n          &lt;/div&gt;\n        {% endif %}\n\n        &lt;noscript&gt;\n          &lt;div class=\"slideshow__image\"{% if block.settings.image %} style=\"background-image: url('{{ block.settings.image | img_url: '2048x' }}'); background-position: {{ block.settings.alignment }};\"{% endif %}&gt;\n            {% if block.settings.image == blank %}\n              &lt;div class=\"placeholder-background\"&gt;\n                {% capture current %}{% cycle 1, 2 %}{% endcapture %}\n                {{ 'lifestyle-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}\n              &lt;/div&gt;\n            {% endif %}\n          &lt;/div&gt;\n        &lt;/noscript&gt;\n        &lt;div class=\"slideshow__text-wrap{% if block.settings.title != blank or block.settings.subheading != blank %} slideshow__overlay{% endif %}\"&gt;\n          &lt;div class=\"slideshow__text-content\"&gt;\n            &lt;div class=\"page-width\"&gt;\n              {% unless block.settings.title == blank %}\n                &lt;h2 class=\"h1 mega-title slideshow__title{% if settings.link != blank %} slideshow__title--has-link{% endif %}{% if section.settings.text_size == 'large' %} mega-title--large{% endif %}\"&gt;\n                  {{ block.settings.title | escape }}\n                &lt;/h2&gt;\n              {% endunless %}\n              {% unless block.settings.subheading == blank %}\n                &lt;span class=\"mega-subtitle slideshow__subtitle{% if section.settings.text_size == 'large' %} mega-subtitle--large{% endif %}\"&gt;\n                  {{ block.settings.subheading | escape }}\n                &lt;/span&gt;\n              {% endunless %}\n              {% if block.type == 'video' %}\n                {% unless block.settings.video_type == 'background' %}\n                  &lt;div class=\"slideshow__video-control--play-wrapper{% if block.settings.title != blank or block.settings.subheading != blank %} slideshow__video-control--play-wrapper--push{% endif %}\"&gt;\n                    &lt;button type=\"button\" class=\"text-link slideshow__video-control slideshow__video-control--play\" data-controls=\"SlideshowVideo-{{ block.id }}\"&gt;\n                      {% include 'icon-play-video' %}\n                      &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.play_video' | t }}&lt;/span&gt;\n                    &lt;/button&gt;\n                  &lt;/div&gt;\n                {% endunless %}\n              {% endif %}\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n        {% if block.settings.link != blank %}\n          &lt;/a&gt;\n        {% endif %}\n      &lt;/div&gt;\n    {% endfor %}\n  &lt;/div&gt;\n&lt;/div&gt;\n{% endif %}\n{% if section.blocks.size == 0 %}\n&lt;div class=\"placeholder-noblocks\"&gt;\n  {{ 'homepage.onboarding.no_content' | t }}\n&lt;/div&gt;\n{% endif %}\n&lt;/div&gt;\n{% schema %}\n{\n\"name\": \"Slideshow\",\n\"class\": \"index-section index-section--flush\",\n\"max_blocks\": 4,\n\"settings\": [\n  {\n    \"type\": \"checkbox\",\n    \"id\": \"autoplay\",\n    \"label\": \"Auto-rotate slides\",\n    \"default\": true\n  },\n  {\n    \"type\": \"select\",\n    \"id\": \"autoplay_speed\",\n    \"label\": \"Change slides every\",\n    \"options\": [\n      { \"value\": \"5000\", \"label\": \"5 seconds\" },\n      { \"value\": \"6000\", \"label\": \"6 seconds\" },\n      { \"value\": \"7000\", \"label\": \"7 seconds\" },\n      { \"value\": \"8000\", \"label\": \"8 seconds\" },\n      { \"value\": \"9000\", \"label\": \"9 seconds\" },\n      { \"value\": \"10000\", \"label\": \"10 seconds\" }\n    ],\n    \"default\": \"7000\"\n  },\n  {\n    \"type\": \"select\",\n    \"id\": \"slideshow_height\",\n    \"label\": \"Section height\",\n    \"default\": \"small\",\n    \"options\": [\n      {\n        \"label\": \"Small\",\n        \"value\": \"small\"\n      },\n      {\n        \"label\": \"Medium\",\n        \"value\": \"medium\"\n      },\n      {\n        \"label\": \"Large\",\n        \"value\": \"large\"\n      }\n    ]\n  },\n  {\n    \"type\": \"select\",\n    \"id\": \"text_size\",\n    \"label\": \"Text size\",\n    \"default\": \"medium\",\n    \"options\": [\n      {\n        \"label\": \"Medium\",\n        \"value\": \"medium\"\n      },\n      {\n        \"label\": \"Large\",\n        \"value\": \"large\"\n      }\n    ]\n  }\n],\n\"blocks\": [\n  {\n    \"type\": \"image\",\n    \"name\": \"Image slide\",\n    \"settings\": [\n      {\n        \"type\": \"image_picker\",\n        \"id\": \"image\",\n        \"label\": \"Image\"\n      },\n      {\n        \"type\": \"select\",\n        \"id\": \"alignment\",\n        \"label\": \"Image alignment\",\n        \"default\": \"top\",\n        \"options\": [\n          {\n            \"value\": \"top\",\n            \"label\": \"Top\"\n          },\n          {\n            \"value\": \"center\",\n            \"label\": \"Middle\"\n          },\n          {\n            \"value\": \"bottom\",\n            \"label\": \"Bottom\"\n          }\n        ]\n      },\n      {\n        \"type\": \"text\",\n        \"id\": \"title\",\n        \"label\": \"Heading\",\n        \"default\": \"Image slide\"\n      },\n      {\n        \"type\": \"text\",\n        \"id\": \"subheading\",\n        \"label\": \"Subheading\",\n        \"default\": \"Tell your brand's story through video and images\"\n      },\n      {\n        \"type\": \"url\",\n        \"id\": \"link\",\n        \"label\": \"Slide link\"\n      }\n    ]\n  },\n  {\n    \"type\": \"video\",\n    \"name\": \"Video slide\",\n    \"settings\": [\n      {\n        \"type\": \"video_url\",\n        \"id\": \"video_url\",\n        \"label\": \"Video link\",\n        \"accept\": [\"youtube\"],\n        \"default\": \"https:\\/\\/www.youtube.com\\/watch?v=_9VUPq3SxOc\"\n      },\n      {\n        \"type\": \"select\",\n        \"id\": \"video_type\",\n        \"label\": \"Style\",\n        \"options\": [\n          {\n            \"value\": \"chrome\",\n            \"label\": \"Image with play button\"\n          },\n          {\n            \"value\": \"background-chrome\",\n            \"label\": \"Background video with play button\"\n          },\n          {\n            \"value\": \"background\",\n            \"label\": \"Background video\"\n          }\n        ]\n      },\n      {\n        \"type\": \"image_picker\",\n        \"id\": \"image\",\n        \"label\": \"Image\",\n        \"info\": \"Fallback when autoplaying video is not supported on mobile devices\"\n      },\n      {\n        \"type\": \"text\",\n        \"id\": \"title\",\n        \"label\": \"Heading\",\n        \"default\": \"Video slide\"\n      },\n      {\n        \"type\": \"text\",\n        \"id\": \"subheading\",\n        \"label\": \"Subheading\",\n        \"default\": \"Tell your brand's story through video and images\"\n      }\n    ]\n  }\n],\n\"presets\": [{\n  \"name\": \"Slideshow\",\n  \"category\": \"Image\",\n  \"settings\": {\n    \"autoplay\": true,\n    \"autoplay_speed\": \"5000\"\n  },\n  \"blocks\": [\n    {\n      \"type\": \"image\"\n    },\n    {\n      \"type\": \"image\"\n    }\n    ]\n   }]\n  }\n{% endschema %}\n</code></pre>\n"}], "owner": {"reputation": 11026, "user_id": 436493, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EppuZ.jpg?s=128&g=1", "display_name": "methuselah", "link": "https://stackoverflow.com/users/436493/methuselah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1554, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514978917, "creation_date": 1514943122, "question_id": 48070055, "link": "https://stackoverflow.com/questions/48070055/implement-a-button-on-the-shopify-debut-theme-carousel", "title": "Implement a button on the Shopify Debut theme carousel", "body": "<p>Is there a way to implement a button onto the slider on the Debut theme? I just want it to route to a particular page. Here is the code:</p>\n\n<pre><code>&lt;div data-section-id=\"{{ section.id }}\" data-section-type=\"slideshow-section\"&gt;\n\n  {% if section.blocks.size &gt; 0 %}\n    &lt;div class=\"slideshow-wrapper\"&gt;\n      &lt;button type=\"button\" class=\"visually-hidden slideshow__pause\" data-id=\"{{ section.id }}\" aria-live=\"polite\"&gt;\n        &lt;span class=\"slideshow__pause-stop\"&gt;\n          {% include 'icon-pause' %}\n          &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.pause_slideshow' | t }}&lt;/span&gt;\n        &lt;/span&gt;\n        &lt;span class=\"slideshow__pause-play\"&gt;\n          {% include 'icon-play' %}\n          &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.play_slideshow' | t }}&lt;/span&gt;\n        &lt;/span&gt;\n      &lt;/button&gt;\n\n      &lt;div class=\"slideshow slideshow--{{ section.settings.slideshow_height }}\" id=\"Slideshow-{{ section.id }}\" data-autoplay=\"{{ section.settings.autoplay }}\" data-speed=\"{{ section.settings.autoplay_speed }}\"&gt;\n        {% for block in section.blocks %}\n          {%- assign is_background_video = false -%}\n          {% if block.type == 'video' %}\n            {% if block.settings.video_type == 'background' or block.settings.video_type =='background-chrome' %}\n              {%- assign is_background_video = true -%}\n            {% endif %}\n          {% endif %}\n\n          &lt;div class=\"slideshow__slide slideshow__slide--{{ block.id }}{% if is_background_video %} slideshow__slide--background-video{% endif %}\" {{ block.shopify_attributes }}&gt;\n            {% if block.settings.link != blank %}\n              &lt;a href=\"{{ block.settings.link }}\" class=\"slideshow__link\"&gt;\n            {% endif %}\n\n            {% if block.type == 'video' %}\n              {% if block.settings.video_url != blank %}\n                &lt;div class=\"video-loader\"&gt;&lt;/div&gt;\n              {% endif %}\n              {% unless block.settings.video_type == 'background' %}\n                &lt;button type=\"button\" class=\"text-link slideshow__video-control slideshow__video-control--close\" data-controls=\"SlideshowVideo-{{ block.id }}\"&gt;\n                  {% include 'icon-close' %}\n                  &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.close_video' | t }}&lt;/span&gt;\n                &lt;/button&gt;\n              {% endunless %}\n              {% if block.settings.video_url != blank %}\n                &lt;div id=\"SlideshowVideo-{{ block.id }}\" class=\"slideshow__video {% if is_background_video %}slideshow__video--background{% endif %} slideshow__video--{{ block.settings.video_type }}\"\n                  data-id=\"{{ block.settings.video_url.id }}\"\n                  data-type=\"{{ block.settings.video_type }}\"\n                  data-slideshow=\"Slideshow-{{ section.id }}\"&gt;&lt;/div&gt;\n              {% endif %}\n            {% endif %}\n\n            {% if block.settings.image == blank %}\n              &lt;div class=\"slideshow__image js\"&gt;\n                &lt;div class=\"placeholder-background\"&gt;\n                  {% capture current %}{% cycle 1, 2 %}{% endcapture %}\n                  {{ 'lifestyle-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}\n                &lt;/div&gt;\n              &lt;/div&gt;\n            {% else %}\n              &lt;div class=\"slideshow__image box ratio-container lazyload{% unless forloop.first == true %} lazypreload{% endunless %} js\"\n                   data-bgset=\"{% include 'bgset', image: block.settings.image %}\"\n                   data-sizes=\"auto\"\n                   data-parent-fit=\"cover\"\n                   style=\"background-position: {{ block.settings.alignment }};{% if forloop.first == true %} background-image: url('{{ block.settings.image | img_url: '300x300' }});{% endif %}\"&gt;\n              &lt;/div&gt;\n            {% endif %}\n\n            &lt;noscript&gt;\n              &lt;div class=\"slideshow__image\"{% if block.settings.image %} style=\"background-image: url('{{ block.settings.image | img_url: '2048x' }}'); background-position: {{ block.settings.alignment }};\"{% endif %}&gt;\n                {% if block.settings.image == blank %}\n                  &lt;div class=\"placeholder-background\"&gt;\n                    {% capture current %}{% cycle 1, 2 %}{% endcapture %}\n                    {{ 'lifestyle-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}\n                  &lt;/div&gt;\n                {% endif %}\n              &lt;/div&gt;\n            &lt;/noscript&gt;\n            &lt;div class=\"slideshow__text-wrap{% if block.settings.title != blank or block.settings.subheading != blank %} slideshow__overlay{% endif %}\"&gt;\n              &lt;div class=\"slideshow__text-content\"&gt;\n                &lt;div class=\"page-width\"&gt;\n                  {% unless block.settings.title == blank %}\n                    &lt;h2 class=\"h1 mega-title slideshow__title{% if settings.link != blank %} slideshow__title--has-link{% endif %}{% if section.settings.text_size == 'large' %} mega-title--large{% endif %}\"&gt;\n                      {{ block.settings.title | escape }}\n                    &lt;/h2&gt;\n                  {% endunless %}\n                  {% unless block.settings.subheading == blank %}\n                    &lt;span class=\"mega-subtitle slideshow__subtitle{% if section.settings.text_size == 'large' %} mega-subtitle--large{% endif %}\"&gt;\n                      {{ block.settings.subheading | escape }}\n                    &lt;/span&gt;\n                  {% endunless %}\n                  {% if block.type == 'video' %}\n                    {% unless block.settings.video_type == 'background' %}\n                      &lt;div class=\"slideshow__video-control--play-wrapper{% if block.settings.title != blank or block.settings.subheading != blank %} slideshow__video-control--play-wrapper--push{% endif %}\"&gt;\n                        &lt;button type=\"button\" class=\"text-link slideshow__video-control slideshow__video-control--play\" data-controls=\"SlideshowVideo-{{ block.id }}\"&gt;\n                          {% include 'icon-play-video' %}\n                          &lt;span class=\"icon__fallback-text\"&gt;{{ 'sections.slideshow.play_video' | t }}&lt;/span&gt;\n                        &lt;/button&gt;\n                      &lt;/div&gt;\n                    {% endunless %}\n                  {% endif %}\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n\n            {% if block.settings.link != blank %}\n              &lt;/a&gt;\n            {% endif %}\n          &lt;/div&gt;\n        {% endfor %}\n      &lt;/div&gt;\n    &lt;/div&gt;\n  {% endif %}\n\n  {% if section.blocks.size == 0 %}\n    &lt;div class=\"placeholder-noblocks\"&gt;\n      {{ 'homepage.onboarding.no_content' | t }}\n    &lt;/div&gt;\n  {% endif %}\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1514942761, "post_id": 48069907, "comment_id": 83113866, "body": "Looks about right to me. What&#39;s not working?"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514943000, "post_id": 48070036, "comment_id": 83113903, "body": "<code>.map(&amp;:self)</code> is illegal syntax, no? I guess you mean <code>.map(&amp;:itself)</code>; but then why <code>map</code> at all?"}, {"owner": {"reputation": 345, "user_id": 4655626, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f22b14a6edc9f62203c1aa06ff312d42?s=128&d=identicon&r=PG&f=1", "display_name": "rubyist", "link": "https://stackoverflow.com/users/4655626/rubyist"}, "edited": false, "score": 0, "creation_date": 1514943694, "post_id": 48070036, "comment_id": 83114036, "body": "Thanks for that, that&#39;s much cleaner than mine!   Ideally what I&#39;d like, and I may not explained in properly above,  is process each li separately. For example if the first list item is missing an image then the image array will be offset by one."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1514943081, "last_edit_date": 1514943081, "creation_date": 1514942918, "answer_id": 48070036, "question_id": 48069907, "link": "https://stackoverflow.com/questions/48069907/scraping-content-from-html-page/48070036#48070036", "title": "Scraping content from html page", "body": "<p>Assuming the code you have is giving you what you want, I wouldn't try to rewrite anything significant. You can be more brief and idiomatic by replacing your <code>#each</code> methods with <code>#map</code>:</p>\n\n<pre><code>data = Nokogiri::HTML(html)\nimages = data.css('ul li img')\nnames = data.css('ul li a').map(&amp;:text)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1514942937, "creation_date": 1514942937, "answer_id": 48070039, "question_id": 48069907, "link": "https://stackoverflow.com/questions/48069907/scraping-content-from-html-page/48070039#48070039", "title": "Scraping content from html page", "body": "<pre><code>data = Nokogiri::HTML(html)\nimages = data.css('ul li img')\nnames = data.css('ul li a').map(&amp;:text)\n</code></pre>\n\n<p>This simplifies your code slightly, but your original version wasn't too bad.</p>\n\n<p>And my simplification may not generalise if you are, for example, scraping images from multiple regions on the page! In which case, reverting back to something like your original may be fine.</p>\n"}], "owner": {"reputation": 345, "user_id": 4655626, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f22b14a6edc9f62203c1aa06ff312d42?s=128&d=identicon&r=PG&f=1", "display_name": "rubyist", "link": "https://stackoverflow.com/users/4655626/rubyist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 48070036, "answer_count": 2, "score": 1, "last_activity_date": 1514965599, "creation_date": 1514941570, "last_edit_date": 1514965599, "question_id": 48069907, "link": "https://stackoverflow.com/questions/48069907/scraping-content-from-html-page", "title": "Scraping content from html page", "body": "<p>I'm using nokogiri to scrape web pages. The structure of the page is made of an unordered list containing multiple list items each of which has a link, an image and text, all contained in a div. </p>\n\n<p>I'm trying to find clean way to extract the elements in each list item so I can have each li contained in an array or hash like so: </p>\n\n<pre><code>li[0] = ['Acme co 1', 'image1.png', 'Customer 1 details']\nli[1] = ['Acme co 2', 'image2.png', 'Customer 2 details'] \n</code></pre>\n\n<p>At the moment I get all the elements in one go then store them in separate arrays. Is there a better, more idiomatic way of doing this? </p>\n\n<p>This is the code atm:</p>\n\n<pre><code>data = Nokogiri::HTML(html)\nimages = []\nname = []\ndata.css('ul li img').each {|l| images &lt;&lt; l}\ndata.css('ul li a').each {|a| names &lt;&lt; a.text }\n</code></pre>\n\n<p>This is the html I'm working from:</p>\n\n<pre><code>&lt;ul class=\"customers\"&gt;\n  &lt;li&gt;\n    &lt;div&gt;\n     &lt;a href='#' class=\"company-name\"&gt; Acme co 1 &lt;/a&gt;\n\n      &lt;div class=\"customer-image\"&gt;\n        &lt;img src=\"image1.png\"/&gt;\n      &lt;/div&gt;\n\n     &lt;div class=\" customer-description\"&gt;\n       Cusomter 1 details\n     &lt;/div&gt;\n    &lt;/div&gt;\n\n   &lt;/li&gt;\n\n   &lt;li&gt;\n     &lt;div&gt;\n       &lt;a href='#' class=\"company-name\"&gt; Acme co 2&lt;/a&gt;\n        &lt;div class=\"customer-image\"&gt;\n         &lt;img src=\"image1.png\"/&gt;\n        &lt;/div&gt;\n\n       &lt;div class=\" customer-description\"&gt;\n         Customer 2 details\n       &lt;/div&gt;\n     &lt;/div&gt;\n\n   &lt;/li&gt;\n\n&lt;/ul&gt;\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 3376769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/95c9b18fdbf40a1523370553ed5b1f8f?s=128&d=identicon&r=PG", "display_name": "jpalmieri", "link": "https://stackoverflow.com/users/3376769/jpalmieri"}, "is_accepted": true, "score": 10, "last_activity_date": 1514937871, "creation_date": 1514937871, "answer_id": 48069519, "question_id": 48069398, "link": "https://stackoverflow.com/questions/48069398/bundler-cant-find-rspec-executable/48069519#48069519", "title": "Bundler can&#39;t find rspec executable", "body": "<p>Of course it was something obvious. I had run <code>bundle install --without development test</code> locally to test something. I didn't realize that running <code>bundle install</code> (unqualified) after that would repeat the install of the same groups (i.e., it wouldn't install the gems for the <code>development</code> and <code>test</code> groups).</p>\n\n<p>Running <code>bundle install --with development test</code> fixed this.</p>\n"}], "owner": {"reputation": 1331, "user_id": 3376769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/95c9b18fdbf40a1523370553ed5b1f8f?s=128&d=identicon&r=PG", "display_name": "jpalmieri", "link": "https://stackoverflow.com/users/3376769/jpalmieri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1903, "favorite_count": 2, "accepted_answer_id": 48069519, "answer_count": 1, "score": 4, "last_activity_date": 1515112243, "creation_date": 1514936878, "last_edit_date": 1515112243, "question_id": 48069398, "link": "https://stackoverflow.com/questions/48069398/bundler-cant-find-rspec-executable", "title": "Bundler can&#39;t find rspec executable", "body": "<p>When I try to run my tests in my Rails 5.1 app, I'm getting an error that the executable can't be found:</p>\n\n<pre><code>$ bundle exec rspec\nbundler: failed to load command: rspec (/Users/joepalmieri/.rbenv/versions/2.3.3/bin/rspec)\nGem::Exception: can't find executable rspec\n  /Users/joepalmieri/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/rubygems_integration.rb:408:in `block in replace_bin_path'\n  /Users/joepalmieri/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/bundler-1.14.6/lib/bundler/rubygems_integration.rb:434:in `block in replace_bin_path'\n  /Users/joepalmieri/.rbenv/versions/2.3.3/bin/rspec:22:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>However, when I look in <code>/Users/joepalmieri/.rbenv/versions/2.3.3/bin</code>, the executable is there:</p>\n\n<pre><code>$ ls /Users/joepalmieri/.rbenv/versions/2.3.3/bin | grep rspec\n// =&gt; rspec\n</code></pre>\n\n<p>Here are the relevant parts of my Gemfile:</p>\n\n<pre><code>gem 'rails', '~&gt; 5.1.4'\n\ngroup :development, :test do\n  gem 'rspec-rails', '3.7.2'\nend\n</code></pre>\n\n<p>Running <code>rbenv rehash</code> didn't help.</p>\n\n<p>Any clue as to the dumb thing have I done to create this madness?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rack", "unicorn", "actionpack"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514937399, "post_id": 48069131, "comment_id": 83112635, "body": "What&#39;s happening is that it&#39;s creating a new session, thinks you have an existing session, but when it goes to merge the old session info into the new it can&#39;t find a cookie for &quot;rack.session.options&quot; - that&#39;s your <code>nil</code> object that&#39;s being referenced.  Could you be ending up with a <code>rack.session</code> cookie but not a <code>rack.session.options</code> cookie?"}, {"owner": {"reputation": 11, "user_id": 4223859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sUrvj21lW8E/AAAAAAAAAAI/AAAAAAAAAB0/Wb9hDFmE2BU/photo.jpg?sz=128", "display_name": "IK93", "link": "https://stackoverflow.com/users/4223859/ik93"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514939501, "post_id": 48069131, "comment_id": 83113136, "body": "I don&#39;t know. This mostly occures after we deploy. The intresting thing is that if you refresh the error goes away and everything work&#39;s as expected."}], "owner": {"reputation": 11, "user_id": 4223859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sUrvj21lW8E/AAAAAAAAAAI/AAAAAAAAAB0/Wb9hDFmE2BU/photo.jpg?sz=128", "display_name": "IK93", "link": "https://stackoverflow.com/users/4223859/ik93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514934853, "creation_date": 1514934853, "question_id": 48069131, "link": "https://stackoverflow.com/questions/48069131/undefined-method-for-nilnilclass-lib-action-dispatch-request-session-rb2", "title": "undefined method `[]=&#39; for nil:NilClass lib/action_dispatch/request/session.rb:217", "body": "<p>The past few months we are getting this error on production.</p>\n\n<p>I can't understand what is causing the error and I can't reproduce it in development. My guess is something related to the session and cookies.</p>\n\n<p>Most errors are from /cable but it's not specific to this path. We have the same error with the same back trace for other paths too.</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>undefined method `[]=' for nil:NilClass\n</code></pre>\n\n<p>Environment</p>\n\n<pre><code>path    /cable\nmethod  GET\nParameters  {}\nSession data {}\n\nHTTP_ACCEPT_ENCODING    gzip, deflate, br\nHTTP_CACHE_CONTROL  no-cache\nHTTP_CONNECTION Upgrade\nHTTP_PRAGMA no-cache\nPATH_INFO   /cable\nREQUEST_METHOD  GET\nREQUEST_URI /cable\nSERVER_NAME unicorn\nSERVER_PORT 80\nSERVER_PROTOCOL HTTP/1.1\n</code></pre>\n\n<p>Backtrace</p>\n\n<pre><code>    actionpack (5.1.4) lib/action_dispatch/request/session.rb:217:in `load!'\n    actionpack (5.1.4) lib/action_dispatch/request/session.rb:212:in `load_for_write!'\n    actionpack (5.1.4) lib/action_dispatch/request/session.rb:197:in `merge!'\n    actionpack (5.1.4) lib/action_dispatch/request/session.rb:17:in `create'\n    actionpack (5.1.4) lib/action_dispatch/middleware/session/abstract_store.rb:70:in `prepare_session'\n    rack (2.0.3) lib/rack/session/abstract/id.rb:231:in `context'\n    rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'\n    actionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'\n    actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\n    activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'\n    actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\n    appsignal (2.4.3) lib/appsignal/rack/rails_instrumentation.rb:30:in `call_with_appsignal_monitoring'\n    appsignal (2.4.3) lib/appsignal/rack/rails_instrumentation.rb:15:in `call'\n    actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\n    actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\n    railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'\n    railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'\n    activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'\n    activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'\n    activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'\n    railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'\n    actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\n    actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'\n    rack (2.0.3) lib/rack/method_override.rb:22:in `call'\n    rack (2.0.3) lib/rack/runtime.rb:22:in `call'\n    actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\n    rack (2.0.3) lib/rack/sendfile.rb:111:in `call'\n    rack-mini-profiler (0.10.7) lib/mini_profiler/profiler.rb:171:in `call'\n    railties (5.1.4) lib/rails/engine.rb:522:in `call'\n    railties (5.1.4) lib/rails/railtie.rb:185:in `public_send'\n    railties (5.1.4) lib/rails/railtie.rb:185:in `method_missing'\n    unicorn (5.3.1) lib/unicorn/http_server.rb:606:in `process_client'\n    unicorn (5.3.1) lib/unicorn/http_server.rb:702:in `worker_loop'\n    appsignal (2.4.3) lib/appsignal/hooks/unicorn.rb:25:in `worker_loop'\n    unicorn (5.3.1) lib/unicorn/http_server.rb:549:in `spawn_missing_workers'\n    unicorn (5.3.1) lib/unicorn/http_server.rb:563:in `maintain_worker_count'\n    unicorn (5.3.1) lib/unicorn/http_server.rb:293:in `join'\n    unicorn (5.3.1) bin/unicorn:126:in `&lt;top (required)&gt;'\n    /home/deploy/apps/my_app/shared/bundle/ruby/2.3.0/bin/unicorn:23:in `load'\n    /home/deploy/apps/my_app/shared/bundle/ruby/2.3.0/bin/unicorn:23:in `&lt;top (required)&gt;'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/cli/exec.rb:74:in `load'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/cli/exec.rb:74:in `kernel_load'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/cli/exec.rb:27:in `run'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/cli.rb:335:in `exec'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/cli.rb:20:in `dispatch'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/cli.rb:11:in `start'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/exe/bundle:32:in `block in &lt;top (required)&gt;'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/friendly_errors.rb:121:in `with_friendly_errors'\n    /home/deploy/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/exe/bundle:24:in `&lt;top (required)&gt;'\n    /home/deploy/.rvm/gems/ruby-2.3.1/bin/bundle:23:in `load'\n    /home/deploy/.rvm/gems/ruby-2.3.1/bin/bundle:23:in `&lt;main&gt;'\n    /home/deploy/.rvm/gems/ruby-2.3.1/bin/ruby_executable_hooks:15:in `eval'\n    /home/deploy/.rvm/gems/ruby-2.3.1/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "memory"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514938538, "post_id": 48068855, "comment_id": 83112926, "body": "So to summarise your question: &quot;Does loading lots of partials cause big memory bloat?&quot; No, not necessarily. That <i>could</i> be the issue, but it&#39;s pure speculation. Why don&#39;t you experiment with some <a href=\"http://blog.scoutapp.com/articles/2017/03/01/which-rails-profiler-is-right-for-you\" rel=\"nofollow noreferrer\">profiling tools</a>, and investigate the true bottlenecks? This will also help you to see whether your changes are helping."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514938704, "post_id": 48068855, "comment_id": 83112955, "body": "There are lots of <i>other</i> things you could be doing to improve performance - look through the <a href=\"http://guides.rubyonrails.org/caching_with_rails.html\" rel=\"nofollow noreferrer\">many different types of caching in Rails</a>, for instance. Or maybe you could add (or remove?!) some database indexes? Or maybe you need to tweak the unicorn config so that resources are shared between the applications more appropriately?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514938746, "post_id": 48068855, "comment_id": 83112971, "body": "This is a very broad question; I can&#39;t really diagnose and solve your problem in a single StackOverflow answer. But hopefully this points you in some good directions."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514938885, "post_id": 48068855, "comment_id": 83112998, "body": "Side note: With all that complex view logic, you may benefit from doing some refactoring. One interesting library you could consider using is <a href=\"https://github.com/trailblazer/cells\" rel=\"nofollow noreferrer\"><code>cells</code></a>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1514950660, "post_id": 48068855, "comment_id": 83115298, "body": "Calling <code>Product.all</code> and iterating is more effiecient than doing <code>Product.all.pluck(:id)</code> than re-looking up each of the records using <code>find</code>. This is because the repeated SQL reads will be a bottleneck. Not sure if this causes the performance error, though."}, {"owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "edited": false, "score": 0, "creation_date": 1514964629, "post_id": 48068855, "comment_id": 83119548, "body": "Tom: Thanks for your comments! I should specify the question to if THIS particular way of rendering partials is bad coding in terms of memory. The question seems broader than it actually is as I want to give as much side information as possible. I have tried a LOT of memory profiling tools but I find it hard to use them in a way that would pinpoint my (possible) problem."}, {"owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "edited": false, "score": 0, "creation_date": 1514964782, "post_id": 48068855, "comment_id": 83119620, "body": "Tom: I am using caching quite a bit, perhaps not 100% effectively but as much as I can. I am also using database indexes. But please note that this is not a question about general memory performance but whether this type of rendering is bad."}, {"owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "edited": false, "score": 0, "creation_date": 1514964888, "post_id": 48068855, "comment_id": 83119665, "body": "max: I thought about that some time after I wrote the question. You are probably right! Good thing you said so before I tried this in every section of the app."}, {"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1515189036, "post_id": 48068855, "comment_id": 83220255, "body": "I would render the collection type of variables via the render collection method which will clean up a lot of the each blocks in the view code <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1515357624, "post_id": 48068855, "comment_id": 83260516, "body": "I wonder how many products does this <code>Product.where(:foo =&gt; &quot;bar&quot;)</code> query usually return?"}], "answers": [{"comments": [{"owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "edited": false, "score": 0, "creation_date": 1515397434, "post_id": 48121699, "comment_id": 83270214, "body": "Thanks for the extensive answer. Unfortunately, I tried to keep things as simple as possible in my question and I do not actually have the lookup in the view. I do use cache, pagination etc as well. I will definetely lookup cell once again, as well as collections. I think for this particular memory bloat-question I have to subdivide it into more specific questions. Thanks for your effort, although it didn&#39;t quite solve my problem."}], "tags": [], "owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "is_accepted": false, "score": 1, "last_activity_date": 1515194287, "last_edit_date": 1515194287, "creation_date": 1515188607, "answer_id": 48121699, "question_id": 48068855, "link": "https://stackoverflow.com/questions/48068855/will-this-type-of-render-create-memory-bloats-in-rails/48121699#48121699", "title": "Will this type of render create memory bloats in Rails?", "body": "<p>One issue that stands out to me is it looks like you're doing some lookups in your views and breaking the MVC pattern. In my opinion, you should put that code into the controller for that action</p>\n\n<p>so rewrite this line:</p>\n\n<pre><code>render 'partials/product_list', :vars =&gt; { :products =&gt; Product.where(:foo =&gt; \"bar\"), :display_format =&gt; :grid }\n</code></pre>\n\n<p>to this: </p>\n\n<pre><code># in show controller action \n@products = Product.all # &lt;- This will get cached by rails\n\n# in view \nrender 'partials/product_list', :vars =&gt; { :products =&gt; @products, :display_format =&gt; :grid }\n</code></pre>\n\n<p>Removing the Product call in the view and replacing it an instance variable that <a href=\"http://edgeguides.rubyonrails.org/caching_with_rails.html#sql-caching\" rel=\"nofollow noreferrer\">rails will cache</a>. Keep in mind default rails cache is memory based. Which may be causing some of the bloat as your data grows. If you have memcache available perhaps changing your cache store to memcache would help too. </p>\n\n<p>You can just chain a where clauses to your instance variable like you do now and the AREL will handle it. </p>\n\n<pre><code># partial rendering with chained scope\nrender 'partials/product_list', :vars =&gt; { :products =&gt; @products.where(foo: \"bar\"), :display_format =&gt; :grid }\n</code></pre>\n\n<p>If you are finding that further filtering of items is becoming a common pattern, then you can use a scope in your Products model that will be chainable on the @products instance variable. This will keep it in AREL (SQL) and maintain the lazy loading/query caching while simplifying your code a bit. </p>\n\n<pre><code># in Products model\nscope :filter_to_bar, -&gt; (term) {where(foo: term)}\n\n# partial rendering with chained scope\nrender 'partials/product_list', :vars =&gt; { :products =&gt; @products.filter_to_bar(\"bar\"), :display_format =&gt; :grid }\n</code></pre>\n\n<p>Personally I say keep your data fetches in SQL when you can, as this puts the strain on SQL and is lazy loaded, i.e. doesn't affect ruby memory. SQL done properly is fast, ruby is much slower and more memory intensive. SQL is only slow when your queries are O^n or you're making repeated small queries and putting unneccessary hits on the database. In that case, fetch the data and work with it on the rails application as suggested. While this will add to the memory consumption of your application is consuming, it will be more performant. </p>\n\n<p>One thing you can do to speed up SQL fetches is to implement pagination tables or some sort of infinite scroll mechanism. This way you only load the data you need when you need it. </p>\n\n<p>Also if you want a faster version of rails' partial pattern, check out the cells gem as suggested. It will require some refactoring but should be faster than rails' pure partials. However, caching will probably take you much further with less refactoring. </p>\n"}], "owner": {"reputation": 2103, "user_id": 916691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67aa4724f58e7091e24833b24b090264?s=128&d=identicon&r=PG", "display_name": "Christoffer", "link": "https://stackoverflow.com/users/916691/christoffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515194287, "creation_date": 1514933075, "last_edit_date": 1514964993, "question_id": 48068855, "link": "https://stackoverflow.com/questions/48068855/will-this-type-of-render-create-memory-bloats-in-rails", "title": "Will this type of render create memory bloats in Rails?", "body": "<p>I have four different Rails-apps (ruby 2.3.3/rails 4.1.13) on Heroku running on Unicorn (1 worker per app).</p>\n\n<p>Two of them have a few thousand visitors per day, the other two around hundred a day. They all have a major issue in common: They are always running out on memory on Heroku! They are almost always above 100% of the 500 Mb limit on Heroku, thus using the slow Swap-memory. As all 4 share the same issue, I believe there is something in my programming habits that cause this - and possibly the way I render sub-items in partial lists (specifically after reading <a href=\"https://stackoverflow.com/questions/7582338/rails-3-1-memory-leak-for-missing-local-partial-variables-ruby-1-9-2-p290\">this question</a>). I would like to hear whether this code is likely to bloat memory in my apps:</p>\n\n<p>I have three files (the code obviously is quite simplified):</p>\n\n<pre><code>#show\nrender 'partials/product_list', :vars =&gt; { :products =&gt; Product.where(:foo =&gt; \"bar\"), :display_format =&gt; :grid }\n\n#partials/product_list\n&lt;% if vars[:products].empty? %&gt;\nNo products exist\n&lt;% else %&gt;\n  &lt;% if vars[:display_format].eql?(:grid) %&gt;\n    &lt;div class=\"abc\"&gt;\n      &lt;% vars[:products].each do |product|\n        &lt;%= render 'partials/product_item', :product =&gt; product %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;% elsif vars[:display_format].eql?(:wide) %&gt;\n  &lt;ul&gt;\n      &lt;% vars[:products].each do |product|\n        &lt;li&gt;&lt;%= render 'partials/product_item', :product =&gt; product %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n  &lt;/ul&gt;\n  &lt;% elsif vars[:display_format].eql?(:rectangular) %&gt;\n  &lt;div class=\"ghi\"&gt;\n&lt;ul class=\"rectangular_container\"&gt;\n      &lt;% vars[:products].each do |product|\n        &lt;li class=\"rectangle\"&gt;&lt;%= render 'partials/product_item', :product =&gt; product %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n&lt;/ul&gt;\n  &lt;/div&gt;\n&lt;% else %&gt;\n&lt;div class=\"jkl\"&gt;\n      &lt;% vars[:products].each do |product|\n        &lt;%= render 'partials/product_item', :product =&gt; product %&gt;\n      &lt;% end %&gt;\n&lt;/div&gt;\n&lt;% end &gt;\n\n#partials/product_item\n&lt;% if vars[:display_format].eql?(:wide) %&gt;\n  &lt;h1&gt;&lt;%= product.name %&gt;&lt;/h1&gt;\n  &lt;p&gt;&lt;%= product.description %&gt;&lt;/p&gt;\n&lt;% elsif vars[:display_format].eql?(:rectangular)%&gt;\n  // Similar but with lots of divs and other html\n&lt;% end %&gt;\n</code></pre>\n\n<p>This may seem very weird but I reference partials/product_list from here and there all over the website (with different layouts and different product sets) and if I want to change the setup of e.g. grid-layout, I want to do it in one place only. </p>\n\n<p>I have started using references in #show with <code>Product.all.pluck(:id)</code> and in partials/product_item start with <code>product = Product.find(vars[:product])</code> but I can't really tell if this is making any difference. Edit: As max says in the comments, this is probably less efficient due to the amount of .find-calls I need to do.</p>\n\n<p>Before I dig really deep into this, I have a few questions:</p>\n\n<ol>\n<li><p>Is this something that strikes you as: \"YES, this type of rendering will bloat your memory!\"</p></li>\n<li><p>If yes: How should I solve this type of rendering without memory problems?</p></li>\n<li><p>Would there be a difference if I would use :collection, :layout etc instead of my own variables?</p></li>\n</ol>\n\n<p>Any light on this issue would be highly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1514932504, "last_edit_date": 1514932504, "creation_date": 1514931817, "answer_id": 48068665, "question_id": 48068549, "link": "https://stackoverflow.com/questions/48068549/getting-uninitialized-constant-fakerstring-when-attempting-to-set-up-rspec-tes/48068665#48068665", "title": "Getting uninitialized constant Faker::String when attempting to set up rspec test in Rails", "body": "<p><a href=\"https://github.com/stympy/faker/commit/8bc7af1214c46f22283b009aacbcb124e3b600bb\" rel=\"nofollow noreferrer\"><code>Faker::String</code> was added to the ruby gem <strong>9 days ago</strong></a>.</p>\n\n<p><a href=\"https://rubygems.org/gems/faker\" rel=\"nofollow noreferrer\">The most recent gem version</a>, at the time of writing, is <code>1.8.7</code>; which was released on 22nd December (i.e. before <code>Faker::String</code> was added).</p>\n\n<p>If you want to use that feature of the gem, you'll need to tell bundler to use the master branch of the repo:</p>\n\n<pre><code>gem 'faker', git: 'https://github.com/stympy/faker'\n</code></pre>\n\n<p>...or, build the gem locally from source.</p>\n\n<pre><code>git clone git@github.com:stympy/faker.git\nrake install\n</code></pre>\n\n<p>This is quite unlucky that you've chosen to use an unreleased feature, on an actively maintained gem such as this.</p>\n\n<p>However, in general you could check the <a href=\"https://github.com/stympy/faker/blob/master/CHANGELOG.md\" rel=\"nofollow noreferrer\"><code>changelog</code></a> to see whether your gem version is sufficiently up-to-date; or, failing that, the git history directly.</p>\n\n<p>You can also run <code>bundle open faker</code> within your project, and navigate the source code to see if your feature exists in the installed gem.</p>\n"}, {"tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": true, "score": 3, "last_activity_date": 1563577687, "last_edit_date": 1563577687, "creation_date": 1514931832, "answer_id": 48068669, "question_id": 48068549, "link": "https://stackoverflow.com/questions/48068549/getting-uninitialized-constant-fakerstring-when-attempting-to-set-up-rspec-tes/48068669#48068669", "title": "Getting uninitialized constant Faker::String when attempting to set up rspec test in Rails", "body": "<p><code>Faker::String</code> was added to the faker gem 9 days ago on <a href=\"https://github.com/stympy/faker/commit/8bc7af1214c46f22283b009aacbcb124e3b600bb\" rel=\"nofollow noreferrer\">December 24</a> and the latest version of faker(1.8.7) was published on <a href=\"https://rubygems.org/gems/faker/versions/1.8.7\" rel=\"nofollow noreferrer\">December 22</a>. You'll have to use the version from Github in order to use <code>Faker::String</code>. Specify the git repository in your <code>Gemfile</code> as below:</p>\n\n<pre><code>gem 'faker', git: 'https://github.com/stympy/faker'\n</code></pre>\n"}], "owner": {"reputation": 2080, "user_id": 5676949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lTaoh.jpg?s=128&g=1", "display_name": "Dog", "link": "https://stackoverflow.com/users/5676949/dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2047, "favorite_count": 0, "accepted_answer_id": 48068669, "answer_count": 2, "score": 1, "last_activity_date": 1563577687, "creation_date": 1514931142, "question_id": 48068549, "link": "https://stackoverflow.com/questions/48068549/getting-uninitialized-constant-fakerstring-when-attempting-to-set-up-rspec-tes", "title": "Getting uninitialized constant Faker::String when attempting to set up rspec test in Rails", "body": "<p>I have a UrlContent model and I am trying to write an rspec test for an API call to the index page for Json. However, whenever I run rspec, it gives me this error: </p>\n\n<pre><code> Failure/Error: content { Faker::String }\n\n NameError:\n   uninitialized constant Faker::String\n</code></pre>\n\n<p>Why would it give that error when faker for the attribute is already seemingly configured properly? </p>\n\n<p>It is confusing to me because in my spec/factories/url_content.rb file I have:</p>\n\n<p>require 'faker'</p>\n\n<pre><code>FactoryBot.define do\n  factory :url_content do\n    content { Faker::String }\n  end\nend\n</code></pre>\n\n<p>The specific rspec test I have setup is:</p>\n\n<pre><code>require 'rails_helper'\nrequire 'faker'\n\nRSpec.describe \"UrlContents API\", type: :request do\n\n    before { FactoryBot.create_list(:url_content, 3) }\n\ndescribe 'GET /url_contents' do\n    before { get '/url_contents'}\n\n    it 'returns a status code of 200' do \n        expect(response).to have_http_status(200)\n    end\n\n    it 'returns an array of content in JSON' do \n        json = JSON.parse(response.body, symbolize_names: true)\n\n    end \n\nend\n\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1514932376, "post_id": 48068260, "comment_id": 83111164, "body": "What is the result of <code>which rails</code>? Have you run <code>bundle install</code>? What happens if you run <code>bundle exec rails console</code>? What happens if you run <code>type -all ruby</code>?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1514932419, "post_id": 48068260, "comment_id": 83111177, "body": "How many versions of Ruby do you have installed? Are you using a tool (such as rbenv or rvm) that lets you have multiple versions of Ruby installed?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 1, "creation_date": 1514940922, "post_id": 48068260, "comment_id": 83113461, "body": "what version manager do u use ? rvm or rbenv ? try <code>cd ..</code> and back to folder <code>cd folder_name</code>"}, {"owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514945889, "post_id": 48068260, "comment_id": 83114439, "body": "Thanks @TomLord (+1) please see my updates above...does that help you out at all?"}, {"owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1514945932, "post_id": 48068260, "comment_id": 83114451, "body": "Thanks @muistooshort (+1) - I&#39;m not actively using either rbenv or rvm but if you look at my updates above you&#39;ll see that rbenv isn&#39;t installed whereas rvm is. Does that help you out at all?"}, {"owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1514945953, "post_id": 48068260, "comment_id": 83114459, "body": "Thanks @7urkm3n (+1) I&#39;m not actively using either rbenv or rvm but if you look at my updates above you&#39;ll see that rbenv isn&#39;t installed whereas rvm is."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8637931, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DW_K9fTAzx8/AAAAAAAAAAI/AAAAAAAAFmw/BNpXBl2dt2Q/photo.jpg?sz=128", "display_name": "James Chou", "link": "https://stackoverflow.com/users/8637931/james-chou"}, "is_accepted": false, "score": 1, "last_activity_date": 1514936344, "creation_date": 1514936344, "answer_id": 48069336, "question_id": 48068260, "link": "https://stackoverflow.com/questions/48068260/mac-is-confused-as-to-which-version-of-ruby-is-installed/48069336#48069336", "title": "Mac is confused as to which version of Ruby is installed", "body": "<p>If you are using rbenv you can change your ruby version for a specific project by using </p>\n\n<pre><code>rbenv local (ruby-version)\n</code></pre>\n\n<p>For a list of ruby versions you can use </p>\n\n<pre><code>rbenv install -l \n</code></pre>\n\n<p>Found a mini tutorial on changing using rbenv to change ruby versions here:\n<a href=\"https://makandracards.com/makandra/21545-rbenv-how-to-switch-to-another-ruby-version-temporarily-per-project-or-globally\" rel=\"nofollow noreferrer\">https://makandracards.com/makandra/21545-rbenv-how-to-switch-to-another-ruby-version-temporarily-per-project-or-globally</a></p>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1514946840, "creation_date": 1514946840, "answer_id": 48070442, "question_id": 48068260, "link": "https://stackoverflow.com/questions/48068260/mac-is-confused-as-to-which-version-of-ruby-is-installed/48070442#48070442", "title": "Mac is confused as to which version of Ruby is installed", "body": "<p>The <code>.rvm</code> in your <code>which rails</code> output:</p>\n\n<pre><code>/Users/myuser/.rvm/rubies/ruby-2.4.0/bin/rails\n              ^^^^\n</code></pre>\n\n<p>says that you are using RVM to manage your Ruby versions. If you say <code>rvm list</code> in a shell, you should see both 2.4.0 and 2.0.0 in the list of available Rubies and the current version in that list should change when you enter your Rails application's directory.</p>\n\n<p>Check the <code>Gemfile</code>, it should say:</p>\n\n<pre><code>ruby '2.4.0'\n</code></pre>\n\n<p>or similar so make sure it is using the right version. Also look for a <code>.ruby-version</code> file and make sure it says the right thing (if it exists).</p>\n"}], "owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 48070442, "answer_count": 2, "score": 0, "last_activity_date": 1514946840, "creation_date": 1514929476, "last_edit_date": 1514945871, "question_id": 48068260, "link": "https://stackoverflow.com/questions/48068260/mac-is-confused-as-to-which-version-of-ruby-is-installed", "title": "Mac is confused as to which version of Ruby is installed", "body": "<p>I can't tell what's going on here. When I run:</p>\n\n<pre><code>ruby -v\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin15]\n</code></pre>\n\n<p>Then when I try to open the Rails Console:</p>\n\n<pre><code>rails console\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Rails 5 requires Ruby 2.2.2 or newer.\n\nYou're running\n  ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin16]\n</code></pre>\n\n<p><strong>So am I running 2.4.0 or 2.0.0?!</strong> And how do I make it so that <code>rails console</code> is happy + works?!</p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Output of several commands:</p>\n\n<pre><code>which rails\n/Users/myuser/.rvm/rubies/ruby-2.4.0/bin/rails\n\nbundle exec rails console\nCould not locate Gemfile or .bundle/ directory\n\ntype -all ruby\nruby is /Users/myuser/.rvm/rubies/ruby-2.4.0/bin/ruby\nruby is /usr/bin/ruby\n\nrbenv local\n-bash: rbenv: command not found\n\nrvm -v\nrvm 1.29.1 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io/]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "listener"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1514922860, "post_id": 48066981, "comment_id": 83107298, "body": "Which is it? Rails 3 or Rails 4? In any case, you&#39;re probably looking for a background job. Plenty of guidance on how to do it on the Interwebs."}, {"owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1514923191, "post_id": 48066981, "comment_id": 83107448, "body": "Hi, actually it is rails 5, but there is no rails 5 tag? Sorry for confusion. Thanks for suggestion, I will read about background jobs."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1514923938, "post_id": 48066981, "comment_id": 83107778, "body": "Be careful, there are the traditionnal background jobs: you create a &quot;worker&quot; that is executed on a server dedicated to these tasks performed async, and you have the Cron jobs that are triggered at certain times. There are a lot of gems allowing to perform async tasks (like Sidekiq) and also other gems performing Cron jobs. You can check this article for example: <a href=\"http://derekbarber.ca/blog/2015/09/10/scheduling-background-jobs-in-rails-using-sidekiq/\" rel=\"nofollow noreferrer\">derekbarber.ca/blog/2015/09/10/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 5, "last_activity_date": 1514925060, "last_edit_date": 1514925060, "creation_date": 1514924122, "answer_id": 48067273, "question_id": 48066981, "link": "https://stackoverflow.com/questions/48066981/rails-listener-for-expired-date/48067273#48067273", "title": "Rails listener for expired date", "body": "<p>There are, broadly speaking, two ways to do this:</p>\n\n<ol>\n<li><p>Regularly <strong>poll</strong> for things that are expiring soon, and send emails accordingly. For example, you could use a <em>cron job</em> that runs code along the lines of:</p>\n\n<pre><code>Model.where(\n  'expiration_date &lt; ? AND expiration_date &gt;= ?',\n  Time.now + 3.days,\n  Time.now\n).each do |m|\n  m.send_reminder_email\nend\n</code></pre>\n\n<p>You may wish to write this code in a <code>rake</code> task, so your <code>cron</code> job simply triggers it. (You could also refactor the above query logic into a <code>scope</code>; e.g. <code>Model.exires_soon.each {...}</code></p>\n\n<p><a href=\"https://github.com/javan/whenever\" rel=\"noreferrer\"><code>whenever</code></a> is a popular library to configure cron jobs via a ruby DSL.</p></li>\n<li><p><strong>Schedule</strong> future jobs, to be run at a specified time. This could be implemented via a redis-backed library (e.g. <a href=\"https://github.com/resque/resque\" rel=\"noreferrer\"><code>resque</code></a> or <a href=\"https://github.com/mperham/sidekiq\" rel=\"noreferrer\"><code>sidekiq</code></a>), or databased-backed (e.g. <a href=\"https://github.com/collectiveidea/delayed_job\" rel=\"noreferrer\"><code>delayed_job</code></a>). The precise implementation could vary depending on your needs (e.g. can an <code>expiration_date</code> ever <em>change</em>? How and when should the reminder email be <em>cancelled</em>?), but for example perhaps you could do the following:</p>\n\n<pre><code>class Model &lt; ApplicationRecord\n  after_create :schedule_reminder_email\n\n  def schedule_reminder_email\n    ModelReminderWorker.perform_at(expiration_date - 3.days, self)\n  end\nend\n\nclass ModelReminderWorker\n  include Sidekiq::Worker\n\n  def perform\n    # ...\n  end\nend\n</code></pre></li>\n</ol>\n\n<p>Your chosen solution should be determined by the specific needs of your application; there is no silver bullet answer to the problem.</p>\n\n<p>For instance:</p>\n\n<ul>\n<li>How much consideration do you need to make for performance? With <code>sidekiq</code> you should be fine, but polling with frequent cron jobs <em>could</em> cause issues; to mitigate this, you could think about adding database indexes, or reading from a slave replica DB.</li>\n<li>Are you concerned about sending emails at totally \"random\" times, e.g. 2am? Individually scheduled jobs <em>could</em> take this into consideration, but it would be easier to implement this within a single polling cron job. (Or perhaps this behaviour is precisely what's desired!)</li>\n<li>Think about how best to log errors, handle deployments, control restarts, recover from crashes, and so on... There are a plethora of tools available for all of this, but it's an important thing to get right in a production application.</li>\n</ul>\n\n<hr>\n\n<p><em>In general</em>, my advice would be:</p>\n\n<p>If you're new to this, and/or just want to get something functional up and running quickly, go with option 1 above. But if you're building something that needs to scale within a large system, seriously consider how best to implement option 2.</p>\n"}], "owner": {"reputation": 405, "user_id": 5639287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2da4e9be5bbf048854f4e1621bd193ee?s=128&d=identicon&r=PG&f=1", "display_name": "code monkey", "link": "https://stackoverflow.com/users/5639287/code-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 48067273, "answer_count": 1, "score": 0, "last_activity_date": 1514925060, "creation_date": 1514922626, "last_edit_date": 1514924454, "question_id": 48066981, "link": "https://stackoverflow.com/questions/48066981/rails-listener-for-expired-date", "title": "Rails listener for expired date", "body": "<p>Is there such a thing as a listener in Ruby, or something similar?  </p>\n\n<p>For example, how can I check if user date is expired and needed to send an email few days before?  </p>\n\n<hr>\n\n<p>Thanks on your time</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13597, "user_id": 2513722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/idsXg.jpg?s=128&g=1", "display_name": "mehulmpt", "link": "https://stackoverflow.com/users/2513722/mehulmpt"}, "edited": false, "score": 3, "creation_date": 1514922678, "post_id": 48066966, "comment_id": 83107217, "body": "you&#39;ll have to use a headless browser"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1514922741, "post_id": 48066966, "comment_id": 83107237, "body": "The only way to get JavaScript to run is to have a JavaScript runtime involved. Tools like <a href=\"http://www.seleniumhq.org\" rel=\"nofollow noreferrer\">Selenium</a> or <a href=\"http://phantomjs.org\" rel=\"nofollow noreferrer\">Phantom.js</a> can do this."}, {"owner": {"reputation": 1959, "user_id": 1020168, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f97951f0a41a76e04e3bf542dc171a58?s=128&d=identicon&r=PG", "display_name": "MothOnMars", "link": "https://stackoverflow.com/users/1020168/mothonmars"}, "edited": false, "score": 0, "creation_date": 1514922889, "post_id": 48066966, "comment_id": 83107315, "body": "Thanks, I think these comments have pointed me in the right direction. I&#39;m trying the flow described in <a href=\"https://readysteadycode.com/howto-scrape-websites-with-ruby-and-headless-chrome\" rel=\"nofollow noreferrer\">readysteadycode.com/&hellip;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1959, "user_id": 1020168, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f97951f0a41a76e04e3bf542dc171a58?s=128&d=identicon&r=PG", "display_name": "MothOnMars", "link": "https://stackoverflow.com/users/1020168/mothonmars"}, "is_accepted": true, "score": 1, "last_activity_date": 1515622232, "last_edit_date": 1515622232, "creation_date": 1514926906, "answer_id": 48067801, "question_id": 48066966, "link": "https://stackoverflow.com/questions/48066966/how-can-i-extract-html-from-a-url-that-requires-javascript/48067801#48067801", "title": "How can I extract HTML from a URL that requires JavaScript?", "body": "<p>Based on the comments suggesting I use a headless browser, and the approach described in <a href=\"https://readysteadycode.com/howto-scrape-websites-with-ruby-and-headless-chrome\" rel=\"nofollow noreferrer\">https://readysteadycode.com/howto-scrape-websites-with-ruby-and-headless-chrome</a>, I was able to extract the HTML and plain text using the following:</p>\n\n<p><strong>Install <a href=\"https://sites.google.com/a/chromium.org/chromedriver/\" rel=\"nofollow noreferrer\">ChromeDriver</a></strong></p>\n\n<pre><code>$ brew install chromedriver\n</code></pre>\n\n<p><strong>Install <a href=\"https://rubygems.org/gems/selenium-webdriver\" rel=\"nofollow noreferrer\">selenium-webdriver</a> gem</strong></p>\n\n<pre><code>$ gem install selenium-webdriver\n</code></pre>\n\n<p><strong>Get webpage</strong></p>\n\n<pre><code>&gt; require 'selenium-webdriver'\n&gt; options = Selenium::WebDriver::Chrome::Options.new(args: ['headless'])\n&gt; driver = Selenium::WebDriver.for(:chrome, options: options)\n&gt; driver.get 'https://www.medicare.gov/hospicecompare/'\n</code></pre>\n\n<p><strong>Extract HTML</strong></p>\n\n<pre><code>&gt; driver.find_element(css: 'html').attribute('innerHTML')\n</code></pre>\n\n<p><strong>Extract Plain Text</strong></p>\n\n<pre><code>&gt; driver.find_element(css: 'html').text\n</code></pre>\n\n<p><strong>References</strong></p>\n\n<p><a href=\"https://readysteadycode.com/howto-scrape-websites-with-ruby-and-headless-chrome\" rel=\"nofollow noreferrer\">https://readysteadycode.com/howto-scrape-websites-with-ruby-and-headless-chrome</a>\n<a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings</a></p>\n"}], "owner": {"reputation": 1959, "user_id": 1020168, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f97951f0a41a76e04e3bf542dc171a58?s=128&d=identicon&r=PG", "display_name": "MothOnMars", "link": "https://stackoverflow.com/users/1020168/mothonmars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 48067801, "answer_count": 1, "score": 2, "last_activity_date": 1557089426, "creation_date": 1514922577, "last_edit_date": 1557089426, "question_id": 48066966, "link": "https://stackoverflow.com/questions/48066966/how-can-i-extract-html-from-a-url-that-requires-javascript", "title": "How can I extract HTML from a URL that requires JavaScript?", "body": "<p>I'm attempting to extract the raw HTML from a page that requires JavaScript (with the ultimate goal of extracting just the plain text). Unfortunately, simple <code>get</code> requests return HTML specifying the need for a browser running JS. Example:</p>\n\n<pre><code>&gt; html = open('https://www.medicare.gov/Publications/').read\n\"&lt;!DOCTYPE HTML&gt;\\n&lt;!--[if lt IE 8]&gt;&lt;html class=\\\"no-js oldIE\\\" lang=\\\"en-US\\\"&gt;&lt;![endif]--&gt;\\n&lt;!--[if IE 8]&gt;&lt;html class=\\\"no-js lt-ie9\\\" lang=\\\"en-US\\\"&gt;&lt;![endif]--&gt;\\n&lt;!--[if IE 9]&gt;&lt;html class=\\\"no-js ie9\\\" lang=\\\"en-US\\\"&gt;&lt;![endif]--&gt;\\n&lt;!--[if IE 11]&gt;\\n&lt;style&gt;\\nbody{\\ndisplay:none;\\n}\\n&lt;/style&gt;\\n&lt;![endif]--&gt;\\n&lt;!--[if (gt IE )|!(IE)]&gt;&lt;!--&gt;\\n&lt;html lang=\\\"en-US\\\" class=\\\"no-js not-ie\\\"&gt;\\n    &lt;!--&lt;![endif]--&gt;\\n    &lt;head&gt;\\n        &lt;meta charset=\\\"utf-8\\\"&gt;\\n        &lt;!--&lt;meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"IE=edge\\\"&gt;--&gt;\\n        &lt;title&gt;Publications&lt;/title&gt;...\n&lt;body&gt;\\n        &lt;div class=\\\"wrapper sl-translate\\\"&gt;\\n            &lt;div class=\\\"needCSS hidden\\\"&gt;\\n                This application is not fully accessible to users whose browsers do not support or have Cascading Style Sheets (CSS) disabled. For a more optimal experience viewing this application, please enable CSS in your browser and refresh the page.\\n            &lt;/div&gt;\\n            &lt;!--&lt;p class=\\\"browsehappy\\\"&gt;\\n                Your browser is out of date  or not supported. Please visit &lt;a href=\\\"http://browsehappy.com/\\\"&gt;browse happy&lt;/a&gt; to upgrade to a better supported, modern browser.\\n            &lt;/p&gt;--&gt;\\n            &lt;div class=\\\"js-off-message\\\"&gt;\\n                &lt;noscript&gt;\\n                The page could not be loaded. This application currently does not support browsers with \\\"JavaScript\\\" disabled. Please enable JavaScript and refresh the page to view this application.\\n                &lt;/noscript&gt;\"\n</code></pre>\n\n<p>I've tried tricking the page into thinking I'm using a browser with JS, but (shocker), that didn't work either:</p>\n\n<pre><code>html = = HTTP.headers(user_agent: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36\").follow.get(url).to_s\n</code></pre>\n\n<p>Is there any trick to extracting the static HTML from a JS-driven page like <a href=\"https://www.medicare.gov/hospicecompare/\" rel=\"nofollow noreferrer\">https://www.medicare.gov/hospicecompare/</a>?</p>\n"}, {"tags": ["ruby", "google-sheets"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514923672, "post_id": 48066950, "comment_id": 83107655, "body": "Have you tried the <a href=\"https://developers.google.com/sheets/api/quickstart/ruby\" rel=\"nofollow noreferrer\"><code>google-client-api</code></a>?"}, {"owner": {"reputation": 329, "user_id": 6679011, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f5c9a7d025e5cf7734e8d6de19a2113?s=128&d=identicon&r=PG&f=1", "display_name": "Yang L", "link": "https://stackoverflow.com/users/6679011/yang-l"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514924514, "post_id": 48066950, "comment_id": 83108056, "body": "I am trying google-client-api, but could not find an suitable function for that"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514924593, "post_id": 48066950, "comment_id": 83108101, "body": "I don&#39;t have api access to google but <a href=\"https://developers.google.com/sheets/api/guides/values#reading_multiples_ranges\" rel=\"nofollow noreferrer\">developers.google.com/sheets/api/guides/&hellip;</a> might help"}], "owner": {"reputation": 329, "user_id": 6679011, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f5c9a7d025e5cf7734e8d6de19a2113?s=128&d=identicon&r=PG&f=1", "display_name": "Yang L", "link": "https://stackoverflow.com/users/6679011/yang-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514922488, "creation_date": 1514922488, "question_id": 48066950, "link": "https://stackoverflow.com/questions/48066950/using-ruby-how-to-get-the-column-types-for-a-google-sheet", "title": "Using Ruby, how to get the column types for a google sheet?", "body": "<p>In a google sheet, different column could define different types, such as plain text, number or date. Using ruby, is there anyway to get these attributes?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1514924229, "creation_date": 1514924229, "answer_id": 48067289, "question_id": 48066644, "link": "https://stackoverflow.com/questions/48066644/why-is-a-join-record-being-created-for-this-model/48067289#48067289", "title": "Why is a join record being created for this model?", "body": "<p>this is creating the join table</p>\n\n<pre><code>@developer.releases &lt;&lt; @release\n</code></pre>\n\n<p>There's no reason to do that. Just take it out.</p>\n"}, {"comments": [{"owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "edited": false, "score": 1, "creation_date": 1514926360, "post_id": 48067293, "comment_id": 83108860, "body": "That was the issue! Thank you for explaining the function of <code>&lt;&lt;</code> in relation to the join table. I added that because I thought I had to manually set the value of <code>user.releases</code> every time a new release was created. The <code>:developer_releases</code> relationship is exactly what I needed instead."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1514924243, "creation_date": 1514924243, "answer_id": 48067293, "question_id": 48066644, "link": "https://stackoverflow.com/questions/48066644/why-is-a-join-record-being-created-for-this-model/48067293#48067293", "title": "Why is a join record being created for this model?", "body": "<p>This line:</p>\n\n<pre><code>@developer.releases &lt;&lt; @release\n</code></pre>\n\n<p>is adding a record to <code>ReleaseUsers</code> because you stated that: </p>\n\n<pre><code>class User \n   has_many :releases, :through =&gt; :release_users\nend\n</code></pre>\n\n<p>So by using <code>@developer.releases &lt;&lt; @release</code> you are telling rails to create that association in the <code>release_users</code> table.</p>\n\n<p>It seems you need to isolate the scope for something like <code>developer_releases</code> on <code>User</code> and then none of the <code>unless</code> block is needed. </p>\n\n<p>Something like </p>\n\n<pre><code>class User\n  # existing relationships\n  has_many :developer_releases, class_name: 'Release', foreign_key: :developer_id\nend\n</code></pre>\n\n<p>Then the controller code can be slimmed down: </p>\n\n<pre><code>def create\n  @release = Release.new(release_params)\n  respond_to do |format|\n    if @release.save\n      format.html { redirect_to releases_url, notice: 'Release was successfully created.' }\n      format.json { render :show, status: :created, location: @release }\n    else\n      format.html { render :new }\n      format.json { render json: @release.errors, status: :unprocessable_entity }\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 48067293, "answer_count": 2, "score": 1, "last_activity_date": 1514924243, "creation_date": 1514920976, "last_edit_date": 1514921701, "question_id": 48066644, "link": "https://stackoverflow.com/questions/48066644/why-is-a-join-record-being-created-for-this-model", "title": "Why is a join record being created for this model?", "body": "<p>This is a web app for scheduling our company's various site deployments among the developers and product owners on our Scrum team, when we launch updates or improvements. I have two models, <code>User</code> and <code>Release</code>. A <code>Release</code> is a single deployment event. Then I have a join table, called <code>release_users</code>. A user has and belongs to many releases. A release has many users, under the name <code>product_owners</code>, and belongs to one user, under the name <code>developer</code>. The <code>Release</code> table has a <code>developer_id</code> column which equals the User's ID, so it doesn't involve the <code>ReleaseUser</code> association at all (at least, that's what I want).</p>\n\n<p>Here's the problem: when I create a new <code>Release</code> record (through the form), it automatically creates/saves a <code>ReleaseUser</code> record for the developer in addition to the product owners. When I look at <code>@release.product_owners</code>, I see the developer listed under there when it shouldn't be. It should only create ReleaseUser records for product owners. <code>@release.developer</code> works as expected, it selects the user from the User table based on <code>developer_id</code> and doesn't go through the ReleaseUser table. </p>\n\n<p>So something is wrong in my model configurations I think? Rails is performing some behind-the-scenes magic that I can't pinpoint.</p>\n\n<p><strong>Code</strong></p>\n\n<p>release.rb:</p>\n\n<pre><code>class Release &lt; ActiveRecord::Base\n  has_many :release_users, dependent: :destroy\n  has_many :product_owners, :through =&gt; :release_users, :source =&gt; :user\n  belongs_to :developer, :class_name =&gt; \"User\"\nend\n</code></pre>\n\n<p>user.rb:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :release_users, dependent: :destroy\n  has_many :releases, :through =&gt; :release_users\nend\n</code></pre>\n\n<p>release_user.rb:</p>\n\n<pre><code>class ReleaseUser &lt; ActiveRecord::Base\n  belongs_to :release\n  belongs_to :user\nend\n</code></pre>\n\n<p>_form.html.erb:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label \"Developer\" %&gt;&lt;br&gt;\n  &lt;%= f.select :developer_id, options_for_select(User.select_options, selected: @release.selected_option), { include_blank: 'None' } %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"field\"&gt;\n  &lt;%= f.label \"Product Owners\" %&gt;&lt;br&gt;\n  &lt;%= f.collection_check_boxes :product_owner_ids, User.all, :id, :full_name do |b| %&gt;\n    &lt;label class=\"checkbox\"&gt;\n      &lt;%= b.check_box %&gt; &lt;%= b.label %&gt; &lt;br/&gt;\n    &lt;/label&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>releases_controller.rb:</p>\n\n<pre><code># POST /releases\n# POST /releases.json\ndef create\n  @release = Release.new(release_params)\n\n  # Release belongs to one developer at most\n  unless release_params[:developer_id].empty?\n    @developer = User.find(release_params[:developer_id])\n\n    # User has many releases, add to array\n    @developer.releases &lt;&lt; @release\n    @developer.save\n  end\n\n  respond_to do |format|\n    if @release.save\n      format.html { redirect_to releases_url, notice: 'Release was successfully created.' }\n      format.json { render :show, status: :created, location: @release }\n    else\n      format.html { render :new }\n      format.json { render json: @release.errors, status: :unprocessable_entity }\n    end\n  end\nend\n</code></pre>\n\n<p>(Rails 4)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 92, "user_id": 2992971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159b6a9379fe49ad07966be26019cc70?s=128&d=identicon&r=PG&f=1", "display_name": "user2992971", "link": "https://stackoverflow.com/users/2992971/user2992971"}, "is_accepted": false, "score": 0, "last_activity_date": 1514920781, "creation_date": 1514920781, "answer_id": 48066610, "question_id": 48066373, "link": "https://stackoverflow.com/questions/48066373/how-do-i-replace-div-for-or-install-gem-file-to-allow-it-to-work-in-rails-5/48066610#48066610", "title": "How do I replace div-for or install gem file to allow it to work in Rails 5?", "body": "<p>try adding the line</p>\n\n<pre><code>gem 'record_tag_helper', '~&gt; 1.0'\n</code></pre>\n\n<p>to <code>Gemfile</code>, that you have in your application directory, then run <code>bundle install</code></p>\n"}, {"comments": [{"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1514922380, "post_id": 48066639, "comment_id": 83107090, "body": "This is promising.  I did this and got no errors when starting server, but still got the error that div-for has been removed in an error message when the comments page, where the div-for was located, was viewed."}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1514922639, "post_id": 48066639, "comment_id": 83107201, "body": "Thanks!  My mistake on the previous comment.  I had to bring the server to the foreground, then quit it and then restart it.  Your solution worked like a charm then.  Appreciate succinct clear instructions like this!"}], "tags": [], "owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "is_accepted": true, "score": 1, "last_activity_date": 1514920959, "creation_date": 1514920959, "answer_id": 48066639, "question_id": 48066373, "link": "https://stackoverflow.com/questions/48066373/how-do-i-replace-div-for-or-install-gem-file-to-allow-it-to-work-in-rails-5/48066639#48066639", "title": "How do I replace div-for or install gem file to allow it to work in Rails 5?", "body": "<p>add</p>\n\n<pre><code>gem 'record_tag_helper', '~&gt; 1.0' \n</code></pre>\n\n<p>to your Gemfile and run bundle install</p>\n\n<p>then:</p>\n\n<pre><code>require 'record_tag_helper' \n</code></pre>\n\n<p>in application.rb file</p>\n"}], "owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 48066639, "answer_count": 2, "score": 0, "last_activity_date": 1514920959, "creation_date": 1514919721, "question_id": 48066373, "link": "https://stackoverflow.com/questions/48066373/how-do-i-replace-div-for-or-install-gem-file-to-allow-it-to-work-in-rails-5", "title": "How do I replace div-for or install gem file to allow it to work in Rails 5?", "body": "<p>I was doing a tutorial at: <a href=\"https://reinteractive.com/posts/32-ruby-on-rails-3-2-blog-in-15-minutes-step-by-step\" rel=\"nofollow noreferrer\">https://reinteractive.com/posts/32-ruby-on-rails-3-2-blog-in-15-minutes-step-by-step</a></p>\n\n<p>and find that I've upgraded to Rails 5 and get an error that div-for has been removed.  It \"says\" that I can do the following, but:  </p>\n\n<pre><code>woo-va-air:myapp woo$ gem 'record_tag_helper', '~&gt; 1.0'\nERROR:  While executing gem ... (Gem::CommandLineError)\n    Unknown command record_tag_helper,\nwoo-va-air:myapp woo$ ruby --version\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]\nwoo-va-air:myapp woo$ rails --version\n/Users/woo/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/app_loader.rb:40: warning: Insecure world writable dir /Users/woo/.rbenv/versions/2.3.1/bin in PATH, mode 040777\nRails 5.0.0\n</code></pre>\n\n<p>For what I read, the gem 'record_tag_helper' should install that gem, but it fails.  Reading online seems to indicate that it may have been moved somewhere else.  </p>\n\n<p>Any ideas on either how to install that gem, or how to rewrite</p>\n\n<pre><code>&lt;%= div_for comment do %&gt;\n        &lt;p&gt;\n                &lt;strong&gt;\n                        Posted &lt;%= time_ago_in_words(comment.created_at) %&gt; ago\n                &lt;/strong&gt;\n                &lt;br/&gt;\n...\n</code></pre>\n\n<p>So that it works in Rails 5?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1514920866, "post_id": 48066327, "comment_id": 83106491, "body": "What do these calculations look like? The most efficient approach would almost certainly be doing it all in SQL inside the database and leaving Ruby, Rails, and ActiveRecord out of it completely."}, {"owner": {"reputation": 13, "user_id": 8217653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbfdd3ecda9614365f88ab867b4f86ef?s=128&d=identicon&r=PG", "display_name": "user8217653", "link": "https://stackoverflow.com/users/8217653/user8217653"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1514921549, "post_id": 48066327, "comment_id": 83106772, "body": "@muistooshort Thanks for your interest. Doing them directly in SQL is a big NO-NO since I have instructions not to do calculations directly in SQL. My instructions are: find data, calculate, update"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1514921870, "post_id": 48066327, "comment_id": 83106906, "body": "Wow. Any chance that you can convince the person with the instructions to be reasonable? Do they have any reasons for doing it this way? Misguided notions of portability or &quot;The Rails Way&quot; perhaps? Letting the database do what it does (i.e. manage large volumes of data) is almost certainly going to be the most efficient approach."}, {"owner": {"reputation": 13, "user_id": 8217653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbfdd3ecda9614365f88ab867b4f86ef?s=128&d=identicon&r=PG", "display_name": "user8217653", "link": "https://stackoverflow.com/users/8217653/user8217653"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1514922021, "post_id": 48066327, "comment_id": 83106977, "body": "@muistooshort no chance, since find, calculate, update need to be separate"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1514934003, "post_id": 48066327, "comment_id": 83111698, "body": "I guess the best is to do the tests by yourself. But loading massive amount of data on your server may just be impossible. How many records do you have to make calculations on ? I have attended AWS conference in Paris and eventhough I was the noobest of all attendees on some workshop, they did insightful tests with different big data technologies. But all tests were done via SQL on AWS hosted databases. Loading big samples was not even mentionned. (of course if the servers are in-house, I guess anything can be possible) (but if you are on Heroku, I bet you have to rely on SQL)"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1514934378, "post_id": 48066327, "comment_id": 83111809, "body": "Actualy if your database is hundred millions of records, I think this is not a Ruby question. You should replicate your DB on a local machine and find the right tool to query it in a timely fashion."}], "owner": {"reputation": 13, "user_id": 8217653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbfdd3ecda9614365f88ab867b4f86ef?s=128&d=identicon&r=PG", "display_name": "user8217653", "link": "https://stackoverflow.com/users/8217653/user8217653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514921458, "creation_date": 1514919507, "last_edit_date": 1514921458, "question_id": 48066327, "link": "https://stackoverflow.com/questions/48066327/should-i-use-hashes-or-activerecordrelations", "title": "Should I use hashes or ActiveRecord::Relations?", "body": "<p>I'm really lacking some knowledge regarding efficiency/performance when working with massive amount of data.</p>\n\n<p>I need to do some calculations on different models and then updating them. I was thinking:</p>\n\n<p>Step I. Get the data from each table in hashes (hash_table_1, hash_table_2 etc) \"plucking\" the active record relations and then map it in a hash</p>\n\n<p>Step II. Do calculations and change the values in the hashes (iterate over hashes, searching ids in hashes); doing them directly in sql is a big NO-NO, since I have instructions not do it, I'm contemplating If I should do them on active records and then update, but I will have to update a lot of them.</p>\n\n<p>Step III. Updating data with Table_1.update(hash_table_1), Table_2.update(hash_table_2) etc. OR use raw SQL to update</p>\n\n<p>Should I be using ActiveRecord::Relations instead of hashes? Are they more memory efficient?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8366290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b64894e4e57dabd0f2a447c6beec21?s=128&d=identicon&r=PG&f=1", "display_name": "M. Moe", "link": "https://stackoverflow.com/users/8366290/m-moe"}, "edited": false, "score": 0, "creation_date": 1514920522, "post_id": 48066415, "comment_id": 83106363, "body": "I&#39;m a beginner who&#39;s still trying to learn ruby ! Thank you for showing me this, and providing me with new information."}, {"owner": {"reputation": 3, "user_id": 8366290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b64894e4e57dabd0f2a447c6beec21?s=128&d=identicon&r=PG&f=1", "display_name": "M. Moe", "link": "https://stackoverflow.com/users/8366290/m-moe"}, "edited": false, "score": 0, "creation_date": 1514921041, "post_id": 48066415, "comment_id": 83106562, "body": "I&#39;m sorry for not providing more information on what the code was supposed to do. It was to return the number of letters in a string that appear more than once. I thank you again for the detailed explanation of your code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3, "user_id": 8366290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b64894e4e57dabd0f2a447c6beec21?s=128&d=identicon&r=PG&f=1", "display_name": "M. Moe", "link": "https://stackoverflow.com/users/8366290/m-moe"}, "edited": false, "score": 0, "creation_date": 1514921888, "post_id": 48066415, "comment_id": 83106918, "body": "I edited my answer to conform with your clarification of the question."}, {"owner": {"reputation": 3, "user_id": 8366290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b64894e4e57dabd0f2a447c6beec21?s=128&d=identicon&r=PG&f=1", "display_name": "M. Moe", "link": "https://stackoverflow.com/users/8366290/m-moe"}, "edited": false, "score": 0, "creation_date": 1514929223, "post_id": 48066415, "comment_id": 83110016, "body": "The explanation your provided really helped me understand your code. Also thank you for providing me with ruby documentation to help understand your code."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1516134320, "last_edit_date": 1516134320, "creation_date": 1514919900, "answer_id": 48066415, "question_id": 48065967, "link": "https://stackoverflow.com/questions/48065967/need-help-understanding-ruby-num-repeats-returning-numbers-of-letters-that-appe/48066415#48066415", "title": "Need help understanding Ruby: num_repeats returning numbers of letters that appear more than once", "body": "<p>I'll let someone else answer your question, but I cannot let this go without telling you that what you have presented is horrible Ruby code. It looks like it was written by someone who cannot break away from a procedural mind-set.</p>\n\n<p>Ruby allows you to compute the number of letters in a string that appear more than once quite easily.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def count_of_repeated_letters(str)\n  str.gsub(/[[:punct:] ]/, '').\n      downcase.\n      each_char.\n      with_object(Hash.new(0)) { |c,h| h[c] += 1 }.\n      count { |_,count| count &gt; 1 }\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>str = \"Now is the time; for all good Rubiests; to ring in the New Year\"\ncount_of_repeated_letters(str)\n  #=&gt; 12\n</code></pre>\n\n<p><strong>Default values for hashes</strong></p>\n\n<p><code>Hash.new(0)</code> creates an empty hash with a default value of zero. Let me explain what the \"default value\" means. First read the doc for the class method <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Hash::new</a>.</p>\n\n<p>When Ruby encounters the expression <code>h[k] += 1</code> the first thing she does is expand it to</p>\n\n<pre><code>h[k] = h[k] + 1\n</code></pre>\n\n<p>If <code>h</code> has a key <code>k</code>, <code>h[k]</code> on the right of the equality is the current count, so it is incremented by one.</p>\n\n<p>If <code>h</code> does not have a key <code>k</code>, she replaces <code>h[k]</code> on the right of the equality with the default value, so the expression becomes</p>\n\n<pre><code>h[k] = 0 + 1\n</code></pre>\n\n<p>That is, <code>h[k]</code> is set equal to one. If you are wondering why, in this case, <code>h[k]</code> on the left of the equality is not set equal to one, recall that this expression is actually <em><a href=\"http://rubylearning.com/satishtalim/ruby_syntactic_sugar.html\" rel=\"nofollow noreferrer\">syntactic sugar</a></em> for</p>\n\n<pre><code>h.[]=(k, h.[](k) + 1)\n</code></pre>\n\n<p>It is only the method <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Hash#[]</a> that uses the default, not the method <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Hash#[]=</a>.</p>\n\n<p><strong>Stepping through the code</strong></p>\n\n<p>For the value of <code>str</code> above the steps are as follows.</p>\n\n<pre><code>s = str.gsub(/[[:punct:] ]/, '')\n  #=&gt; \"NowisthetimeforallgoodRubieststoringintheNewYear\"\n</code></pre>\n\n<p>This uses <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> with a regular expression to remove punctuation characters and spaces by converting them to empty strings. <code>[[:punct:] ]</code> is a <em>character class</em> that matches punctuation characters and spaces. Continuing,</p>\n\n<pre><code>t = s.downcase\n  #=&gt; \"nowisthetimeforallgoodrubieststoringinthenewyear\"\nd = t.each_char\n  #=&gt; #&lt;Enumerator: \"nowisthetimeforallgoodrubieststoringinthenewyear\":each_char&gt;\ne = d.with_object(Hash.new(0))\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator:\n  #   \"nowisthetimeforallgoodrubieststoringinthenewyear\":each_char&gt;: with_object({})&gt;\n</code></pre>\n\n<p><code>e</code> can be thought of as a <em>compound enumerator</em>. To see the values that will be generated by this enumerator and passed to its block we can convert it to an array.</p>\n\n<pre><code>e.to_a\n  #=&gt; [[\"n\", {}], [\"o\", {}], [\"w\", {}], [\"i\", {}], [\"s\", {}], [\"t\", {}],\n  #    ...\n  #    [\"e\", {}], [\"w\", {}], [\"y\", {}], [\"e\", {}], [\"a\", {}], [\"r\", {}]]\n</code></pre>\n\n<p>This hash shown as the second element of each array generated by the enumerator will be built as the calculations are performed.</p>\n\n<p>Continuing,</p>\n\n<pre><code>f = e.each { |c,h| h[c] += 1 }\n  #=&gt; {\"n\"=&gt;4, \"o\"=&gt;5, \"w\"=&gt;2, \"i\"=&gt;5, \"s\"=&gt;3, \"t\"=&gt;5, \"h\"=&gt;2, \"e\"=&gt;6, \"m\"=&gt;1,\n  #    \"f\"=&gt;1, \"r\"=&gt;4, \"a\"=&gt;2, \"l\"=&gt;2, \"g\"=&gt;2, \"d\"=&gt;1, \"u\"=&gt;1, \"b\"=&gt;1, \"y\"=&gt;1}\n</code></pre>\n\n<p>Lastly,</p>\n\n<pre><code>f.count { |_,count| count &gt; 1 }\n  #=&gt; 12\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-count\" rel=\"nofollow noreferrer\">Enumerable#count</a>. In this last step I could have written <code>h.count { |k,count| count &gt; 1 }</code>, <code>k</code> and <code>count</code> being a key-value pair of the <code>h</code>, but when a block variable is not used in the block calculation (here <code>k</code>) is is customary to replace it with the local variable <code>_</code> or (here) <code>_k</code>.</p>\n\n<p><strong>Alternative Method</strong></p>\n\n<p>Here's how you could do it using <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a>.</p>\n\n<pre><code>def count_of_repeated_letters(str)\n  str.gsub(/[[:punct:] ]/, '').\n      downcase.\n      each_char.\n      group_by(&amp;:itself).\n      count { |_,arr| arr.size &gt; 1 }\nend\n\ncount_of_repeated_letters(str)\n  #=&gt; 12\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8366290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b64894e4e57dabd0f2a447c6beec21?s=128&d=identicon&r=PG&f=1", "display_name": "M. Moe", "link": "https://stackoverflow.com/users/8366290/m-moe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 48066415, "answer_count": 1, "score": 0, "last_activity_date": 1516134320, "creation_date": 1514917658, "last_edit_date": 1514920857, "question_id": 48065967, "link": "https://stackoverflow.com/questions/48065967/need-help-understanding-ruby-num-repeats-returning-numbers-of-letters-that-appe", "title": "Need help understanding Ruby: num_repeats returning numbers of letters that appear more than once", "body": "<p>I need help understanding a small part of the code below. It is to return the number of letters that appear more than once in a string, all the while assuming characters in the string will only appear in lowercase. </p>\n\n<pre><code>def num_repeats(string)\n  counts = []\n\n  str_idx = 0\n  while str_idx &lt; string.length\n    letter = string[str_idx]\n\n    counts_idx = 0\n    while counts_idx &lt; counts.length\n      if counts[counts_idx][0] == letter\n        counts[counts_idx][1] += 1\n        break\n      end\n      counts_idx += 1\n    end\n\n    if counts_idx == counts.length\n      #add letters if not found first time. \n      counts.push([letter, 1])\n    end\n\n    str_idx += 1\n  end\n\n  num_repeats = 0\n  counts_idx = 0\n  while counts_idx &lt; counts.length\n    if counts[counts_idx][1] &gt; 1\n      num_repeats += 1\n    end\n\n    counts_idx += 1\n  end\n\n  return num_repeats\nend\n</code></pre>\n\n<p>Might someone explain this part of the if loop in the while loop within the first while loop? </p>\n\n<pre><code>if counts[counts_idx][0] == letter\n   counts[counts_idx][1] += 1\n</code></pre>\n\n<p>I don't understand the counts [ ] [ ]\nI know they aren't 2d arrays from java Q.Q . </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "export", "rails-admin"], "comments": [{"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514941602, "post_id": 48065771, "comment_id": 83113609, "body": "Where do you invoke <code>permit!</code> , I cannot see. Would you show more details?"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "reply_to_user": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514953247, "post_id": 48065771, "comment_id": 83115854, "body": "I don\u2019t know either ! It\u2019s inside the gem files I mean the permit is some where in the rails admin config and files!"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514955802, "post_id": 48065771, "comment_id": 83116469, "body": "Read the source code please, <a href=\"https://github.com/sferik/rails_admin/blob/482b5ac4c3b6fc1d1b7bf7f5a6595590e27ea7a3/lib/rails_admin/config/actions/index.rb#L74\" rel=\"nofollow noreferrer\">link</a> , I guess <code>params[:csv_options]</code> is <code>nil</code>. Have you set this param?"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "reply_to_user": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514962588, "post_id": 48065771, "comment_id": 83118735, "body": "Yes I think one of my CSV options is nil I have to find which one is required.Thank you."}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514964307, "post_id": 48065771, "comment_id": 83119423, "body": "You are welcome."}], "answers": [{"tags": [], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "is_accepted": true, "score": 0, "last_activity_date": 1515231170, "creation_date": 1515231170, "answer_id": 48126015, "question_id": 48065771, "link": "https://stackoverflow.com/questions/48065771/rails-admin-nomethoderror-undefined-method-permit-for-nilnilclass-while-exp/48126015#48126015", "title": "Rails admin NoMethodError: undefined method `permit!&#39; for nil:NilClass while Export", "body": "<p>In <strong>app/views/rails_admin/main/export.html.haml</strong> I commented the CSV options in order to hide the options as seen below :</p>\n\n<pre><code>    - params = request.params.except(:action, :controller, :utf8, :page, :per_page, :format, :authenticity_token)\n- visible_fields = @model_config.export.with(view: self, object: @abstract_model.model.new, controller: self.controller).visible_fields\n\n= form_tag export_path(params.merge(all: true)), method: 'post', class: 'form-horizontal' do\n\n  %input{name: \"send_data\", type: \"hidden\", value: \"true\"}/\n  %fieldset{id: 'fields_to_export'}\n    %legend\n      %i.icon-chevron-down\n      = t('admin.export.select')\n    .form-group.control-group\n      .col-sm-12\n        .checkbox\n          %label{for: 'check_all'}\n            = check_box_tag 'all', 'all', true, { id: 'check_all' }\n            %b= t('admin.export.select_all_fields')\n    .form-group.control-group\n      .col-sm-12\n        .well.well-sm{rel: 'tooltip', :'data-original-title' =&gt; t('admin.export.click_to_reverse_selection'), onclick: 'jQuery(this).closest(\".control-group\").find(\".controls\").find(\"input\").click()', style: 'margin: 0; cursor: pointer;'}\n          %b= t('admin.export.fields_from', name: @model_config.label_plural.downcase)\n        .controls\n          .row\n            - visible_fields.select{ |f| !f.association? || f.association.polymorphic? }.each do |field|\n              - list = field.virtual? ? 'methods' : 'only'\n              .checkbox.col-sm-3\n                - if field.association? &amp;&amp; field.association.polymorphic?\n                  %label{for: \"schema_#{list}_#{field.method_name}\"}\n                    = check_box_tag \"schema[#{list}][]\", field.method_name, true, { id: \"schema_#{list}_#{field.method_name}\" }\n                    = field.label + \" [id]\"\n                  - polymorphic_type_column_name = @abstract_model.properties.detect {|p| field.association.foreign_type == p.name }.name\n                  %label{for: \"schema_#{list}_#{polymorphic_type_column_name}\"}\n                    = check_box_tag \"schema[#{list}][]\", polymorphic_type_column_name, true, { id: \"schema_#{list}_#{polymorphic_type_column_name}\" }\n                    = capitalize_first_letter(field.label) + \" [type]\"\n                - else\n                  %label{for: \"schema_#{list}_#{field.name}\"}\n                    = check_box_tag \"schema[#{list}][]\", field.name, true, { id: \"schema_#{list}_#{field.name}\" }\n                    = capitalize_first_letter(field.label)\n\n    - visible_fields.select{ |f| f.association? &amp;&amp; !f.association.polymorphic? }.each do |field|\n      - fields = field.associated_model_config.export.with(controller: self.controller, view: self, object: (associated_model = field.associated_model_config.abstract_model.model).new).visible_fields.select{ |f| !f.association? }\n      .form-group.control-group\n        .col-sm-12\n          .well.well-sm{rel: 'tooltip', :'data-original-title' =&gt; t('admin.export.click_to_reverse_selection'), onclick: 'jQuery(this).closest(\".control-group\").find(\".controls\").find(\"input\").click()', style: 'margin: 0; cursor: pointer;'}\n            %b= t('admin.export.fields_from_associated', name: field.label.downcase)\n          .controls\n            .row\n              - fields.each do |associated_model_field|\n                - list = associated_model_field.virtual? ? 'methods' : 'only'\n                .checkbox.col-sm-3\n                  %label{for: \"schema_include_#{field.name}_#{list}_#{associated_model_field.name}\"}\n                    = check_box_tag \"schema[include][#{field.name}][#{list}][]\", associated_model_field.name, true, { id: \"schema_include_#{field.name}_#{list}_#{associated_model_field.name}\" }\n                    = capitalize_first_letter(associated_model_field.label)\n\n  %fieldset\n    %legend\n      %i.icon-chevron-down\n      = t('admin.export.options_for', name: 'csv')\n    / .form-group.control-group\n    /   - guessed_encoding = @abstract_model.encoding\n    /   %label.col-sm-2.control-label{for: \"csv_options_encoding_to\"}= t('admin.export.csv.encoding_to')\n    /   .col-sm-10.controls\n    /     -# from http://books.google.com/support/partner/bin/answer.py?answer=30990 :\n    /     = select_tag 'csv_options[encoding_to]', options_for_select(Encoding.name_list.sort), include_blank: true, placeholder: t('admin.misc.search'), :'data-enumeration' =&gt; true\n    /     %p.help-block= t('admin.export.csv.encoding_to_help', name: guessed_encoding)\n\n    / .form-group.control-group\n    /   %label.col-sm-2.control-label{for: \"csv_options_skip_header\"}= t('admin.export.csv.skip_header')\n    /   .col-sm-10.controls\n    /     .checkbox\n    /       %label{style: 'display: block;' }\n    /         = check_box_tag 'csv_options[skip_header]', 'true'\n    /     %p.help-block= t('admin.export.csv.skip_header_help')\n\n    / .form-group.control-group\n    /   %label.col-sm-2.control-label{for: \"csv_options_generator_col_sep\"}= t('admin.export.csv.col_sep')\n    /   .col-sm-10.controls\n    /     = select_tag 'csv_options[generator][col_sep]', options_for_select({ '' =&gt; t('admin.export.csv.default_col_sep'), \"&lt;comma&gt; ','\" =&gt; ',', \"&lt;semicolon&gt; ';'\" =&gt; ';', '&lt;tabs&gt;' =&gt; \"'\\t'\" }), placeholder: t('admin.misc.search'), :'data-enumeration' =&gt; true\n    /     %p.help-block= t('admin.export.csv.col_sep_help', value: t('admin.export.csv.default_col_sep'))\n\n  .form-group.form-actions\n    .col-sm-offset-2.col-sm-10\n      %input{type: :hidden, name: 'return_to', value: (params[:return_to].presence || request.referer)}\n      %button.btn.btn-primary{type: \"submit\", name: 'csv'}\n        %i.icon-white.icon-ok\n        = t(\"admin.export.confirmation\", name: 'csv')\n      / %button.btn.btn-info{type: \"submit\", name: 'json'}\n      /   = t(\"admin.export.confirmation\", name: 'json')\n      / %button.btn.btn-info{type: \"submit\", name: 'xml'}\n      /   = t(\"admin.export.confirmation\", name: 'xml')\n      %button.btn{type: \"submit\", name: \"_continue\"}\n        %i.icon-remove\n        = t(\"admin.form.cancel\")\n</code></pre>\n\n<p>But I shouln't comment the separator option so I uncomment it and the problem solved.</p>\n\n<pre><code>.form-group.control-group\n  %label.col-sm-2.control-label{for: \"csv_options_generator_col_sep\"}= t('admin.export.csv.col_sep')\n  .col-sm-10.controls\n    = select_tag 'csv_options[generator][col_sep]', options_for_select({ '' =&gt; t('admin.export.csv.default_col_sep'), \"&lt;comma&gt; ','\" =&gt; ',', \"&lt;semicolon&gt; ';'\" =&gt; ';', '&lt;tabs&gt;' =&gt; \"'\\t'\" }), placeholder: t('admin.misc.search'), :'data-enumeration' =&gt; true\n    %p.help-block= t('admin.export.csv.col_sep_help', value: t('admin.export.csv.default_col_sep'))\n</code></pre>\n"}], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 48126015, "answer_count": 1, "score": 0, "last_activity_date": 1515231170, "creation_date": 1514916663, "question_id": 48065771, "link": "https://stackoverflow.com/questions/48065771/rails-admin-nomethoderror-undefined-method-permit-for-nilnilclass-while-exp", "title": "Rails admin NoMethodError: undefined method `permit!&#39; for nil:NilClass while Export", "body": "<p>While I'm trying to export cvs file in rails admin I've got this error :</p>\n\n<pre><code>NoMethodError: undefined method `permit!' for nil:NilClass\nfrom /var/lib/gems/2.3.0/gems/rails_admin-1.1.1/lib/rails_admin/config/actions/index.rb:74:in `block (4 levels) in &lt;class:Index&gt;'\nfrom /var/lib/gems/2.3.0/gems/actionpack-5.0.1/lib/action_controller/metal/mime_responds.rb:201:in `respond_to'\nfrom /var/lib/gems/2.3.0/gems/rails_admin-1.1.1/lib/rails_admin/config/actions/index.rb:42:in `block (2 levels) in &lt;class:Index&gt;'\nfrom /var/lib/gems/2.3.0/gems/rails_admin-1.1.1/app/controllers/rails_admin/main_controller.rb:22:in `instance_eval'\nfrom /var/lib/gems/2.3.0/gems/rails_admin-1.1.1/app/controllers/rails_admin/main_controller.rb:22:in `index'\nfrom /var/lib/gems/2.3.0/gems/rails_admin-1.1.1/lib/rails_admin/config/actions/export.rb:21:in `block (2 levels) in &lt;class:Export&gt;'\nfrom /var/lib/gems/2.3.0/gems/rails_admin-1.1.1/app/controllers/rails_admin/main_controller.rb:22:in `instance_eval...\n</code></pre>\n\n<p>and this is my code which was fine before !</p>\n\n<pre><code>RailsAdmin.config do |config|\n\n  ### Popular gems integration\n\n  ## == Devise ==\n  # config.authenticate_with do\n  #   warden.authenticate! scope: :user\n  # end\n  # config.current_user_method(&amp;:current_user)\n\n  ## == Cancan ==\n  # config.authorize_with :cancan\n\n  ## == Pundit ==\n  # config.authorize_with :pundit\n\n  ## == Gravatar integration ==\n  ## To disable Gravatar integration in Navigation Bar set to false\n  # config.show_gravatar true\n\n  config.authorize_with do\n    redirect_to main_app.root_path unless current_user.try(:is_admin)\n  end\n\n  config.actions do\n    dashboard                     # mandatory\n    index                         # mandatory\n    new\n    export\n    bulk_delete\n    show\n    edit\n    delete\n    show_in_app\n\n    ## With an audit adapter, you can add:\n    # history_index\n    # history_show\n  end\nend\n</code></pre>\n\n<p>It was fine before I think I didn't change any thing. Is that because of the rails admin version ? </p>\n"}, {"tags": ["ruby", "chef-infra", "test-kitchen"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1514912358, "post_id": 48064750, "comment_id": 83102982, "body": "&quot;If someone could explain what the purpose of node is within that code.&quot; well conspicuously enough that is referencing a <a href=\"http://www.rubydoc.info/gems/chef/Chef/Node\" rel=\"nofollow noreferrer\"><code>Node</code></a>.  <code>Node#[]</code> delegates to <a href=\"http://www.rubydoc.info/gems/chef/Chef/Node/Attribute\" rel=\"nofollow noreferrer\"><code>Node::Attribute#[]</code></a> which is a subclass of [<code>Mash</code>](Chef&#39;s subclass of a native ruby <code>Hash</code>). So in order to access attributes in regards to an instance of <code>Node</code> you must as in most cases specify the receiver (<code>node</code> in this case) an call a method (<code>[]</code> with a given key argument). <code>node[key]</code> is identical to <code>node.attributes[key]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514912245, "post_id": 48064804, "comment_id": 83102923, "body": "<code>node</code> is a <a href=\"http://www.rubydoc.info/gems/chef/Chef/Node\" rel=\"nofollow noreferrer\"><code>Node</code></a>. <code>Node::Attribute</code> as delegated by <code>Node#[]</code> is similar to a <code>Hash</code>  but <code>Node</code> is an <code>Object</code> and contextually very different from a <code>Hash</code>"}], "tags": [], "owner": {"reputation": 1893, "user_id": 1787434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f5a5c15e84e4a9aec84dc8be822010?s=128&d=identicon&r=PG", "display_name": "the_storyteller", "link": "https://stackoverflow.com/users/1787434/the-storyteller"}, "is_accepted": true, "score": 2, "last_activity_date": 1514912552, "last_edit_date": 1514912552, "creation_date": 1514911831, "answer_id": 48064804, "question_id": 48064750, "link": "https://stackoverflow.com/questions/48064750/ruby-chef-what-is-the-purpose-of-the-node-stanza/48064804#48064804", "title": "ruby/chef: what is the purpose of the &#39;node&#39; stanza?", "body": "<p>The chef <code>node</code> is a way of referencing <a href=\"https://docs.chef.io/attributes.html\" rel=\"nofollow noreferrer\">attributes</a>.</p>\n\n<p>In essence, <code>node</code> can be used as a <a href=\"https://ruby-doc.org/core-2.4.2/Hash.html\" rel=\"nofollow noreferrer\">Ruby Hash</a> which is publically available to your recipe code. Attributes can be set in the <code>.kitchen.yml</code>, or defaults can be set in the <code>attributes/default.rb</code> file of the cookbook. These attributes will be provided as hash mapped values in the <code>node</code> variable.</p>\n"}], "owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 48064804, "answer_count": 1, "score": 1, "last_activity_date": 1514912552, "creation_date": 1514911584, "question_id": 48064750, "link": "https://stackoverflow.com/questions/48064750/ruby-chef-what-is-the-purpose-of-the-node-stanza", "title": "ruby/chef: what is the purpose of the &#39;node&#39; stanza?", "body": "<p>Here is a example snipit of code:</p>\n\n<pre><code>mwh_dir = \"#{node['fmw']['middleware_home_dir']}\"\n</code></pre>\n\n<p>I have just been using this syntax without being able to find details online of why I need to use the <code>node</code> stanza.</p>\n\n<p>If someone could explain what the purpose of <code>node</code> is within that code.</p>\n\n<p>note: <code>fmw</code> is an object defined in the .kitchen.yml and <code>middleware_home_dir</code> is a variable defined within that object.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization", "rails-upgrade"], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514914118, "post_id": 48065290, "comment_id": 83103738, "body": "Thanks for the reply, but I\u2019m serialising as YAML, not JSON. Because the legacy java app is parsing the yaml I need to preserve the output format."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514914163, "post_id": 48065290, "comment_id": 83103756, "body": "You might serialize as whatever you need, just implement the serializer itself."}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514970849, "post_id": 48065290, "comment_id": 83122208, "body": "I see now, thanks. According to <a href=\"http://www.yamllint.com/\" rel=\"nofollow noreferrer\">yamllint.com</a> both old and new outputs are valid YAML however. Also, weirdly, if I apply the .to_yaml method on a hash, then there are no quotes in the representation of a Time object. e.g.  <code>2.4.0 :004 &gt; ds = Time.now().to_s  =&gt; &quot;2018-01-02 15:39:26 +0000&quot;  2.4.0 :005 &gt; time = Time.parse(ds)  =&gt; 2018-01-02 15:39:26 +0000  #similarly, date = DateTime.parse(ds) 2.4.0 :009 &gt; {date: date, time: time}.to_yaml  =&gt; &quot;---\\n:date: !ruby&#47;object:DateTime 2018-01-02 15:39:26.000000000 Z\\n:time: 2018-01-02 15:39:26.000000000 +00:00\\n</code>"}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514971266, "post_id": 48065290, "comment_id": 83122402, "body": "Apologies, SO won&#39;t let me edit that comment any longer to make it more readable!"}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514973474, "post_id": 48065290, "comment_id": 83123611, "body": "I&#39;ve figured that the new Rails behaviour preserves class on serialisation and deserialisation, so it&#39;s because of the <code>strftime()</code> time method that it&#39;s adding the quotes. Your method should allow me to hack around this, so answer accepted."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514973764, "post_id": 48065290, "comment_id": 83123762, "body": "Maybe in such a case it would be easier to just <i>remove trailing <code>strftime</code> transformation</i> and return an instance of <code>Time</code>?"}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514986193, "post_id": 48065290, "comment_id": 83130587, "body": "So the date format has been chosen for compatibility with whatever Java is doing to parse the date from the YAML. (I&#39;ve been burned before with some of the standard representations breaking JS date parsing libraries.) There are many horrors in this #legacy system, and I&#39;m trying to preserve interfaces as fully as I can whilst refactoring one bit at a time, rather than make changes that spill across projects ..."}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1514987239, "post_id": 48065290, "comment_id": 83131163, "body": "Nope, dark rails magic was at work: <a href=\"https://stackoverflow.com/questions/37228752/activerecord-serialize-sending-nil-to-custom-serializer-for-present-attribute\" title=\"activerecord serialize sending nil to custom serializer for present attribute\">stackoverflow.com/questions/37228752/&hellip;</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1514914282, "last_edit_date": 1514914282, "creation_date": 1514914045, "answer_id": 48065290, "question_id": 48064708, "link": "https://stackoverflow.com/questions/48064708/serialise-hash-with-dates-as-yaml-rails/48065290#48065290", "title": "Serialise hash with dates as YAML rails", "body": "<p>Rails5.1/Ruby2.4 do it <em>correct</em>, since <code>2017-12-27 00:00:00</code> is not a valid yaml value.</p>\n\n<p>The good thing is <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html#method-i-serialize\" rel=\"nofollow noreferrer\"><code>serialize</code></a> accepts <em>two</em> parameters, the second one being <em>a serializer class</em>.</p>\n\n<p>So, all you need to do is:</p>\n\n<pre><code>class ReportService &lt; ApplicationRecord\n  # irrelevant AR associations omitted\n   serialize :report_params, MyYaml\n   serialize :output_urls, MyYaml\nend\n</code></pre>\n\n<p>and implement <code>MyYaml</code>, delegating everything, save for <code>date</code>/<code>time</code> to <code>YAML</code> and producing whatever you need for them.</p>\n\n<p>The above is valid for any format of serialized data, it\u2019s completely format-agnostic. <a href=\"http://ruby-journal.com/how-to-write-custom-serializer-for-activerecord-number-serialize/\" rel=\"nofollow noreferrer\">Examples</a>.</p>\n"}], "owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 48065290, "answer_count": 1, "score": 0, "last_activity_date": 1514914282, "creation_date": 1514911396, "question_id": 48064708, "link": "https://stackoverflow.com/questions/48064708/serialise-hash-with-dates-as-yaml-rails", "title": "Serialise hash with dates as YAML rails", "body": "<p><strong>TL;DR</strong>: Rails 5.1, Ruby 2.4.0 is serialising a hash including Time objects with quotes around the string representation of the time. These quotes weren't there in Rails 2.3, Ruby 1.8.7 and break my app; how do I get rid of them?</p>\n\n<p><strong>Context and details</strong></p>\n\n<p>I'm upgrading an app from Rails 2.3, Ruby 1.8.7 to Rails 5.1, Ruby 2.4.0. \nI have a <code>ReportService</code> class, which has a <code>report_params</code> constructor argument which takes a hash. Upon creation of these objects, this hash gets serialised in YAML format.</p>\n\n<pre><code>class ReportService &lt; ApplicationRecord\n  # irrelevant AR associations omitted\n   serialize :report_params\n   serialize :output_urls\nend\n</code></pre>\n\n<p>A user submits a form containing details of a report they want to be run, including a string that gets parsed using Time.parse(), which gets passed as a constructor argument; so the code (in procedural form to strip out irrelevant details, with lots of extraneous stuff ommitted) looks like</p>\n\n<pre><code>offset = customer.timezone.nil? ? '+0000' : customer.timezone.formatted_offset(:time =&gt; start_date)\nparams[:date_from] = Time.parse(\"#{start_date} #{params[:hour_from]}:{params[:min_from]} #{offset}\").utc.strftime('%Y-%m-%d %H:%M:%S')\nreport_args = {...\n                report_params: { ...\n                                 date: params[:date_from]\n                               }\n               }\nReportService.create(report_args)\n</code></pre>\n\n<p>When I look in my MYSQL database, I find that my report_params field looks like <code>... date_from: '2017-12-27 00:00:00' ...</code>. The corresponding code in the old version produces a result that looks like <code>... date_from: 2017-12-27 00:00:00 ...</code>. This is a <strong>bad thing</strong>, because the YAML in that field is getting parsed by a (legacy) Java app that polls the database to check for new entries, and the quotes seem to break that deserialisation (throwing <code>java.lang.Exception: BaseProperties.getdate()</code>); if I manually edit the field to remove the quotes, the app works as expected. How can I prevent these quotation marks from being added?</p>\n"}, {"tags": ["javascript", "ruby"], "comments": [{"owner": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "edited": false, "score": 2, "creation_date": 1514907940, "post_id": 48063797, "comment_id": 83100542, "body": "unhash?? that&#39;s not really how hashing works... you should look into encoding or encrypting"}, {"owner": {"reputation": 15438, "user_id": 261694, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/303c9077b767613527763cb64fbf04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Clark", "link": "https://stackoverflow.com/users/261694/jonathan-clark"}, "reply_to_user": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "edited": false, "score": 0, "creation_date": 1514907967, "post_id": 48063797, "comment_id": 83100556, "body": "Yes changed to encrypt"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1514907975, "post_id": 48063797, "comment_id": 83100560, "body": "Have you considered jwt for this? (json web token)"}, {"owner": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "edited": false, "score": 0, "creation_date": 1514908069, "post_id": 48063797, "comment_id": 83100620, "body": "@JonathanClark: So pick an encryption algorithm and research implementations for it in both... but if you are just worried about &quot;data over the wire&quot; just get an SSL certificate"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514908387, "post_id": 48063797, "comment_id": 83100810, "body": "This technique is called \u201cHTTPS.\u201d"}, {"owner": {"reputation": 15438, "user_id": 261694, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/303c9077b767613527763cb64fbf04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Clark", "link": "https://stackoverflow.com/users/261694/jonathan-clark"}, "edited": false, "score": 0, "creation_date": 1514908980, "post_id": 48063797, "comment_id": 83101138, "body": "I know what SSL is ;) I am using it. I went with jwt which solved it nicely. Thanks!"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1514909365, "post_id": 48063797, "comment_id": 83101345, "body": "JWT is most certainly the wrong solution here. In any case, your encryption is likely just security-through-obscurity, which generally is a bad idea to get started with. Instead, you should think about what your thread-model is (i.e. which data do you need to protect and who is the potential attacker). The most important aspect here is to check what an attacker can do to walk around your protections. With client-side javascript, a local attacker can often just run their own code in your website and extract any secrets you might have there without you being able to do anything about it."}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514910002, "post_id": 48063797, "comment_id": 83101736, "body": "Note that JWT in most forms is just encoded, not encrypted, and can easily be extracted back to JSON without any key material.  You have to make sure you&#39;re explicitly encrypting it (at which point, why not just encrypt your original payload?)"}, {"owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "edited": false, "score": 0, "creation_date": 1515898780, "post_id": 48063797, "comment_id": 83475286, "body": "Please edit your question to reflect that you are looking for help in encrypting and not hashing."}], "owner": {"reputation": 15438, "user_id": 261694, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/303c9077b767613527763cb64fbf04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Clark", "link": "https://stackoverflow.com/users/261694/jonathan-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514907849, "creation_date": 1514907849, "question_id": 48063797, "link": "https://stackoverflow.com/questions/48063797/hash-and-unhash-in-both-ruby-and-javascript", "title": "Hash and unhash in both Ruby and Javascript", "body": "<p>I am creating an Rails 5.0 app (backend) with a JS (Backbone/Marionette) frontend. I want to find a way to \"encrypt\" a value on the Ruby side and then decrypt it again on the frontend side (in javascript).</p>\n\n<p>I will use this values on the frontend for light security.</p>\n\n<p>Is there a technique where I can encrypt a value in ruby and then de encrypt it in javascript including a salt?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1514907680, "post_id": 48063634, "comment_id": 83100423, "body": "<i>Sidenote:</i> <code>inject</code> returns <code>nil</code> if and only you return <code>nil</code> from the block explicitly. For noop (empty <code>where()</code> returns an empty relation) is returns the default value of accumulator."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1514908148, "post_id": 48063634, "comment_id": 83100666, "body": "Any chance to move the filtering operation into the query? How do your tables / relations look like?"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 8036369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VWQVfsqCPYI/AAAAAAAAAAI/AAAAAAAAAWw/zzdKyhG7L98/photo.jpg?sz=128", "display_name": "romss182", "link": "https://stackoverflow.com/users/8036369/romss182"}, "edited": false, "score": 0, "creation_date": 1514907833, "post_id": 48063688, "comment_id": 83100484, "body": "second solution works really fine! Thank you Mudasobwa."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1514907897, "post_id": 48063688, "comment_id": 83100514, "body": "Something like <code>where(...).map(&amp;:job).reject { |j| j == Job.unknown }</code> should work as well (or preferably <code>reject(&amp;:unknown?)</code>)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1514907923, "post_id": 48063688, "comment_id": 83100529, "body": "Second solution <b>should not be used</b> since it\u2019s a wrong not idiomatic approach. One should go with the first one. <i>Correction:</i> <b>one should go with what @Stefan suggested in the comment above</b>."}, {"owner": {"reputation": 163, "user_id": 8036369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VWQVfsqCPYI/AAAAAAAAAAI/AAAAAAAAAWw/zzdKyhG7L98/photo.jpg?sz=128", "display_name": "romss182", "link": "https://stackoverflow.com/users/8036369/romss182"}, "edited": false, "score": 0, "creation_date": 1514908038, "post_id": 48063688, "comment_id": 83100595, "body": "Ok, I&#39;ll choose solution one then. What do you mean by &#39;wrong not idiomatic approach&#39; ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1514908166, "post_id": 48063688, "comment_id": 83100685, "body": "@Stefan <code>reject(&amp;Job.unknown.method(:==))</code> :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1514921822, "post_id": 48063688, "comment_id": 83106885, "body": "The <code>reject</code> approach is a lot better than the <code>each_with_object</code> one. It&#39;s worth moving those solutions to the top."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1514908234, "last_edit_date": 1514908234, "creation_date": 1514907375, "answer_id": 48063688, "question_id": 48063634, "link": "https://stackoverflow.com/questions/48063634/can-a-collection-inject-return-empty-if-nil/48063688#48063688", "title": "Can a collection.inject([]){...} return [ ] (empty) if nil?", "body": "<p>This should not be achieved with <code>inject</code>, there is <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>Enumerable#each_with_object</code></a> for this type of task:</p>\n\n<pre><code>user_jobs.\n    where(\"user_jobs.user_job_type IN (?)\", ['job', 'represent']).\n    each_with_object([]) do |user_job, jobs|\n  jobs &lt;&lt; user_job.job unless user_job.job == Job.unknown\nend\n</code></pre>\n\n<p>FWIW, <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>Enumerable#inject</code></a> implementation:</p>\n\n<pre><code>user_jobs.\n    where(\"user_jobs.user_job_type IN (?)\", ['job', 'represent']).\n    inject([]) do |jobs, user_job|\n  user_job.job == Job.unknown ? jobs : jobs &lt;&lt; user_job.job\nend\n</code></pre>\n\n<hr>\n\n<p>The most succinct one (credits to @Stefan):</p>\n\n<pre><code>user_jobs.\n    where(\"user_jobs.user_job_type IN (?)\", ['job', 'represent']).\n    map(&amp;:job).\n    reject { |job| job == Job.unknown }\n</code></pre>\n\n<p>The last line might be also rewritten as:</p>\n\n<pre><code>    reject(&amp;Job.unknown.method(:==))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514908090, "post_id": 48063829, "comment_id": 83100635, "body": "This returns a list of wrong objects, one should <code>map(&amp;:job)</code> upfront as @Stefan suggested in the comment to my answer."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514909033, "post_id": 48063829, "comment_id": 83101177, "body": "Ah, I missed that OP returns the actual jobs. Yeah, in that case, a <code>map</code> followed by a <code>reject</code> is probably the best solution. I edited my answer."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 0, "last_activity_date": 1514908982, "last_edit_date": 1514908982, "creation_date": 1514907965, "answer_id": 48063829, "question_id": 48063634, "link": "https://stackoverflow.com/questions/48063634/can-a-collection-inject-return-empty-if-nil/48063829#48063829", "title": "Can a collection.inject([]){...} return [ ] (empty) if nil?", "body": "<p>A simpler option would be to use <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-reject\" rel=\"nofollow noreferrer\"><code>Enumerable#reject</code></a> instead of <code>inject</code> or <code>each_with_object</code>. The method is available on all arrays as well as active record relations.</p>\n\n<p>With that, you can simplify you code to</p>\n\n<pre><code>def jobs_it_can_be_contacted_for\n  user_jobs\n    .where(\"user_jobs.user_job_type IN (?)\", ['job', 'represent'])\n    .map(&amp;:job)\n    .reject { |job| job == Job.unknown }\nend\n</code></pre>\n\n<p>To quote the documentation of the <code>reject</code> method:</p>\n\n<blockquote>\n  <p>Returns an array for all elements of <code>enum</code> for which the given <code>block</code> returns <code>false</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 163, "user_id": 8036369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VWQVfsqCPYI/AAAAAAAAAAI/AAAAAAAAAWw/zzdKyhG7L98/photo.jpg?sz=128", "display_name": "romss182", "link": "https://stackoverflow.com/users/8036369/romss182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514908982, "creation_date": 1514907127, "last_edit_date": 1514907617, "question_id": 48063634, "link": "https://stackoverflow.com/questions/48063634/can-a-collection-inject-return-empty-if-nil", "title": "Can a collection.inject([]){...} return [ ] (empty) if nil?", "body": "<p>The following method returns an empty array if there is no result to .where() query. How would this be achieved with an <code>inject([]){ |memo, value| memo &lt;&lt; value }</code>? By default, <code>inject([])</code> returns <code>nil</code> if no result is found to <code>.where()</code> query.</p>\n\n<pre><code>def jobs_it_can_be_contacted_for\n jobs = []\n user_jobs.where(\"user_jobs.user_job_type IN (?)\", ['job', 'represent']).each do |user_job|\n  jobs &lt;&lt; user_job.job unless user_job.job == Job.unknown\n end\n jobs\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1514906747, "post_id": 48063514, "comment_id": 83099911, "body": "Obvious question: Have you set up postgres properly? Based on your configuration, you expect to have a <i>database user</i> called <code>postgres</code> and a password: <code>mypassword</code>. But the error message indicates that this user/password does not exist."}, {"owner": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "edited": false, "score": 0, "creation_date": 1514906781, "post_id": 48063514, "comment_id": 83099932, "body": "there is no <code>postgres</code> user in the postgres user table, you need to create one before run it"}, {"owner": {"reputation": 417, "user_id": 7293425, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DFFOL.jpg?s=128&g=1", "display_name": "Indu Pillai", "link": "https://stackoverflow.com/users/7293425/indu-pillai"}, "edited": false, "score": 0, "creation_date": 1514906829, "post_id": 48063514, "comment_id": 83099964, "body": "the database user is postgres and the password is something else, which I put correctly, I only put it here as &quot;mypassword&quot; for security reason, because I used that same password in other places too."}, {"owner": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "edited": false, "score": 0, "creation_date": 1514906888, "post_id": 48063514, "comment_id": 83100002, "body": "try to run:psql -h postgres -U postgres -c &quot;CREATE ROLE postgres LOGIN  password &#39;mypassword&#39; NOSUPERUSER INHERIT CREATEDB NOCREATEROLE NOREPLICATION;&quot;"}, {"owner": {"reputation": 417, "user_id": 7293425, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DFFOL.jpg?s=128&g=1", "display_name": "Indu Pillai", "link": "https://stackoverflow.com/users/7293425/indu-pillai"}, "reply_to_user": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "edited": false, "score": 0, "creation_date": 1514906916, "post_id": 48063514, "comment_id": 83100030, "body": "@MaximillianForasteiro when I use the same user <code>postgres</code> with Phoenix Framework, it works fine."}, {"owner": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "edited": false, "score": 0, "creation_date": 1514907195, "post_id": 48063514, "comment_id": 83100189, "body": "@InduPillai can you connect to postgres using <code>psql</code> command?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1514907280, "post_id": 48063514, "comment_id": 83100229, "body": "My guess is that you&#39;re missing: <code>host: localhost</code> from the database.yml configuration. But as others have suggested, there are ways to diagnose this."}, {"owner": {"reputation": 417, "user_id": 7293425, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DFFOL.jpg?s=128&g=1", "display_name": "Indu Pillai", "link": "https://stackoverflow.com/users/7293425/indu-pillai"}, "reply_to_user": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "edited": false, "score": 0, "creation_date": 1514907403, "post_id": 48063514, "comment_id": 83100296, "body": "@MaximillianForasteiro running psql return <code>psql: FATAL:  role &quot;indu&quot; does not exist</code>"}, {"owner": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "edited": false, "score": 0, "creation_date": 1514907475, "post_id": 48063514, "comment_id": 83100326, "body": "see the @RahulSharma answer, maybe this solve your case"}, {"owner": {"reputation": 417, "user_id": 7293425, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DFFOL.jpg?s=128&g=1", "display_name": "Indu Pillai", "link": "https://stackoverflow.com/users/7293425/indu-pillai"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514907847, "post_id": 48063514, "comment_id": 83100487, "body": "@TomLord&#39;s commend worked for me!"}, {"owner": {"reputation": 417, "user_id": 7293425, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DFFOL.jpg?s=128&g=1", "display_name": "Indu Pillai", "link": "https://stackoverflow.com/users/7293425/indu-pillai"}, "edited": false, "score": 0, "creation_date": 1514907924, "post_id": 48063514, "comment_id": 83100530, "body": "Thank You all for the help!"}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 7293425, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DFFOL.jpg?s=128&g=1", "display_name": "Indu Pillai", "link": "https://stackoverflow.com/users/7293425/indu-pillai"}, "edited": false, "score": 0, "creation_date": 1514907978, "post_id": 48063675, "comment_id": 83100563, "body": "Thank You! I&#39;ll look at the link you provided. Right now Tom Lord&#39;s comment worked for me."}], "tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1514907299, "creation_date": 1514907299, "answer_id": 48063675, "question_id": 48063514, "link": "https://stackoverflow.com/questions/48063514/rails-with-postgresql-doesnt-create-database/48063675#48063675", "title": "Rails with postgresql doesn&#39;t create database", "body": "<p>You need to modify your <code>pg_hba.conf</code> file for peer authentication. change your user from peer to md5 and restart your server. </p>\n\n<p>people oftenly face this error with postgres when they setup new projects</p>\n\n<p>a detailed answer can be found <a href=\"https://stackoverflow.com/questions/18664074/getting-error-peer-authentication-failed-for-user-postgres-when-trying-to-ge\">here</a></p>\n"}], "owner": {"reputation": 417, "user_id": 7293425, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DFFOL.jpg?s=128&g=1", "display_name": "Indu Pillai", "link": "https://stackoverflow.com/users/7293425/indu-pillai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 799, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514907299, "creation_date": 1514906614, "question_id": 48063514, "link": "https://stackoverflow.com/questions/48063514/rails-with-postgresql-doesnt-create-database", "title": "Rails with postgresql doesn&#39;t create database", "body": "<p>I came back to Rails after a long time, and now I am working on a demo project for learning, and wanted to generate the app with Postgresql, it's giving me an error. I generated a new Rails 5 app with postgresql adapter, but when I'm trying to create the database using <code>rails db:create</code>, <strong>it's giving me the following error:</strong></p>\n\n<pre><code>FATAL:  Peer authentication failed for user \"postgres\"\nCouldn't create database for {\"adapter\"=&gt;\"postgresql\", \"encoding\"=&gt;\"unicode\", \"pool\"=&gt;5, \"database\"=&gt;\"myapp_development\", \"username\"=&gt;\"postgres\", \"password\"=&gt;\"mypassword\"}\nrails aborted!\nPG::ConnectionBad: FATAL:  Peer authentication failed for user \"postgres\"\n/home/indu/.rvm/gems/ruby-2.5.0/gems/pg-0.21.0/lib/pg.rb:56:in `initialize'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/pg-0.21.0/lib/pg.rb:56:in `new'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/pg-0.21.0/lib/pg.rb:56:in `connect'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/postgresql_adapter.rb:671:in `connect'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/postgresql_adapter.rb:217:in `initialize'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `new'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:729:in `new_connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:773:in `checkout_new_connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:752:in `try_to_checkout_new_connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:713:in `acquire_connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:490:in `checkout'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:364:in `connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:883:in `retrieve_connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_handling.rb:128:in `retrieve_connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/connection_handling.rb:91:in `connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/postgresql_database_tasks.rb:6:in `connection'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/postgresql_database_tasks.rb:15:in `create'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/database_tasks.rb:109:in `create'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/database_tasks.rb:129:in `block in create_current'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/database_tasks.rb:294:in `block in each_current_configuration'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/database_tasks.rb:293:in `each'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/database_tasks.rb:293:in `each_current_configuration'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/tasks/database_tasks.rb:128:in `create_current'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/activerecord-5.0.6/lib/active_record/railties/databases.rake:27:in `block (2 levels) in &lt;top (required)&gt;'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/railties-5.0.6/lib/rails/commands/rake_proxy.rb:14:in `block in run_rake_task'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/railties-5.0.6/lib/rails/commands/rake_proxy.rb:11:in `run_rake_task'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/railties-5.0.6/lib/rails/commands/commands_tasks.rb:51:in `run_command!'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/railties-5.0.6/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n/home/indu/Projects/myapp/bin/rails:9:in `require'\n/home/indu/Projects/myapp/bin/rails:9:in `&lt;top (required)&gt;'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `load'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `call'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/spring-2.0.2/lib/spring/client/command.rb:7:in `call'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/spring-2.0.2/lib/spring/client.rb:30:in `run'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/spring-2.0.2/bin/spring:49:in `&lt;top (required)&gt;'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `load'\n/home/indu/.rvm/gems/ruby-2.5.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n/home/indu/Projects/myapp/bin/spring:15:in `require'\n/home/indu/Projects/myapp/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\nTasks: TOP =&gt; db:create\n(See full trace by running task with --trace)\n</code></pre>\n\n<p><strong>Following is my database.yml file.</strong></p>\n\n<pre><code>default: &amp;default\n  adapter: postgresql\n  encoding: unicode\n  pool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\n\ndevelopment:\n  &lt;&lt;: *default\n  database: myapp_development\n  username: postgres\n  password: mypassword\n\ntest:\n  &lt;&lt;: *default\n  database: myapp_test\n  username: postgres\n  password: mypassword\n\nproduction:\n  &lt;&lt;: *default\n  database: myapp_production\n  username: myapp\n  password: &lt;%= ENV['MYAPP_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n\n<p>Thank You in advance!</p>\n"}, {"tags": ["ruby", "each"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1514905643, "post_id": 48063201, "comment_id": 83099302, "body": "What param do you pass into your <code>won?</code> method?"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1514905746, "post_id": 48063201, "comment_id": 83099347, "body": "@MarekLipka it&#39;s an array. <code>board = [&quot;O&quot;, &quot;O&quot;, &quot; &quot;, &quot;X&quot;, &quot;X&quot;, &quot;X&quot;, &quot; &quot;, &quot; &quot;, &quot; &quot;]</code> in the test is where it&#39;s getting passed in."}], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1514906202, "post_id": 48063363, "comment_id": 83099605, "body": "Yup that was it. Was just coming back to answer Thank you :D"}], "tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 4, "last_activity_date": 1514906008, "creation_date": 1514906008, "answer_id": 48063363, "question_id": 48063201, "link": "https://stackoverflow.com/questions/48063201/each-not-iterating-over-nested-arrays/48063363#48063363", "title": ".each not iterating over nested arrays", "body": "<p>The reason is that you return from your method on the first iteration.<br>\nInside your iteration you always return after the first step. Just put the return false statement after your iteration and it will work.</p>\n"}, {"comments": [{"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1514906348, "post_id": 48063428, "comment_id": 83099695, "body": "@mike-heft In your actual code you should use this. This is more idiomatic ruby"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514913852, "post_id": 48063428, "comment_id": 83103616, "body": "...or <code>arr =  board.values_at(*combo).uniq; arr.size == 1 &amp;&amp; arr.first != &#39; &#39;</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514914077, "post_id": 48063428, "comment_id": 83103723, "body": "@CarySwoveland you might want to check the previous version of this answer :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514919171, "post_id": 48063428, "comment_id": 83105785, "body": "Ah, yes. I prefer your previous revision. Adding a variable and a second statement to remove the <code>select</code> clause is imo a <a href=\"https://www.urbandictionary.com/define.php?term=it%27s%20a%20wash\" rel=\"nofollow noreferrer\">wash</a>, but mainly, I think the earlier one reads better."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1514940753, "post_id": 48063428, "comment_id": 83113426, "body": "You can make your second version even more succinct: <code>def won?(board) false end</code> :-P"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1514967283, "post_id": 48063428, "comment_id": 83120632, "body": "It&#39;s still wrong, now it returns <code>true</code> too often. I suggest you use a checker like I used in my answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1514967598, "post_id": 48063428, "comment_id": 83120749, "body": "@StefanPochmann indeed; fixed to leave all your checkers different."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1514967552, "last_edit_date": 1514967552, "creation_date": 1514906230, "answer_id": 48063428, "question_id": 48063201, "link": "https://stackoverflow.com/questions/48063201/each-not-iterating-over-nested-arrays/48063428#48063428", "title": ".each not iterating over nested arrays", "body": "<pre><code>def won?(board)\n  WIN_COMBINATIONS.any? do |combo|\n    board[combo[0]] != \" \" &amp;&amp;\n      board[combo[0]] == board[combo[1]] &amp;&amp;\n      board[combo[0]] == board[combo[2]]\n  end\nend\n</code></pre>\n\n<p>or, even more succinct with <a href=\"https://ruby-doc.org/core/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>Array#values_at</code></a>:</p>\n\n<pre><code>def won?(board)\n  WIN_COMBINATIONS.any? do |combo|\n    [%w|X| * 3, %w|O| * 3].include? board.values_at(*combo)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1514947996, "post_id": 48069975, "comment_id": 83114826, "body": "Another: <code>WIN_COMBINATIONS.any? {|combo| [&quot;X&quot;, &quot;O&quot;].one? {|token| combo.all? {|i| board[i] == token}}</code>"}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1514942264, "creation_date": 1514942264, "answer_id": 48069975, "question_id": 48063201, "link": "https://stackoverflow.com/questions/48063201/each-not-iterating-over-nested-arrays/48069975#48069975", "title": ".each not iterating over nested arrays", "body": "<p>Just three more solutions along with test code checking them against each other:</p>\n\n<pre><code>def won1?(board)\n  WIN_COMBINATIONS.any? do |i, j, k|\n    board[i] != \" \" &amp;&amp; board[i] == board[j] &amp;&amp; board[i] == board[k]\n  end\nend\n\ndef won2?(board)\n  WIN_COMBINATIONS.any? do |combo|\n    a, b = board.values_at(*combo).minmax; a != \" \" &amp;&amp; a == b\n  end\nend\n\ndef won3?(board)\n  WIN_COMBINATIONS.any? do |combo|\n    [[\"X\"], [\"O\"]].member?(board.values_at(*combo).uniq)\n  end\nend\n\nWIN_COMBINATIONS = [\n  [0, 1, 2],\n  [3, 4, 5],\n  [6, 7, 8],\n  [0, 3, 6],\n  [1, 4, 7],\n  [2, 5, 8],\n  [0, 4, 8],\n  [2, 4, 6]\n]\n\na = [\"O\", \"X\", \" \"]\na.product(*([a] * 8)).each { |board|\n  w1 = won1?(board)\n  w2 = won2?(board)\n  w3 = won3?(board)\n  p [w1, w2, w3, board] if w2 != w1 || w3 != w1\n}\n</code></pre>\n"}], "owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 48063428, "answer_count": 3, "score": 0, "last_activity_date": 1514967552, "creation_date": 1514905268, "question_id": 48063201, "link": "https://stackoverflow.com/questions/48063201/each-not-iterating-over-nested-arrays", "title": ".each not iterating over nested arrays", "body": "<p>For some reason, this is not iterating over the collection. Throwing a pry in there shows that only the first index is getting looked at. <code>[0,1,2]</code> I'm sure I'm just tired and it's something small, but I'm drawing a black here,</p>\n\n<pre><code>WIN_COMBINATIONS = [\n  [0, 1, 2],\n  [3, 4, 5],\n  [6, 7, 8],\n  [0, 3, 6],\n  [1, 4, 7],\n  [2, 5, 8],\n  [0, 4, 8],\n  [2, 4, 6]\n]\n\ndef won?(board)\n  WIN_COMBINATIONS.each do |combo|\n    if board[combo[0]] != \" \" &amp;&amp; board[combo[0]] == board[combo[1]] &amp;&amp; board[combo[0]] == board[combo[2]]\n      return combo\n    else\n      return false\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "logging"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 7, "last_activity_date": 1514905854, "creation_date": 1514905854, "answer_id": 48063335, "question_id": 48063138, "link": "https://stackoverflow.com/questions/48063138/should-i-close-logger-file/48063335#48063335", "title": "Should I close logger file?", "body": "<p><strong>TL;DR:</strong> you should not unless you know for sure you should.</p>\n\n<p>The <code>Logger</code> has a <a href=\"https://ruby-doc.org/stdlib/libdoc/logger/rdoc/Logger/LogDevice.html\" rel=\"noreferrer\"><code>LogDevice</code></a> that might be any device: a file, a port, a socket, a pipe. Some devices are known to be fine with a concurrent access, but most of them are not. E.g. if you have a socket as a logging device, any other attempt to write to this socket will be prevented by OS. Concurrent writing to files, though possible in general, is not advised, because you\u2019ll end up having a messed chunks there.</p>\n\n<p>Unless you expect some other application is going to access the same device for writing, you are safe not closing the device. It\u2019ll be closed automatically when the <code>Logger</code> is GC\u2019ed.</p>\n\n<p>On the other hand, if you are writing to the shared file, or expect that the destination might be used by 3rd parties during your program is alive, it\u2019s safer to close the device once it becomes unneeded to allow concurrent access to it for the other writers.</p>\n\n<p><em>NB</em>: <code>Logger#close</code> actually closes the underlying device:</p>\n\n<pre><code># File logger.rb, line 569\ndef close\n  @logdev.close if @logdev\nend\n</code></pre>\n"}], "owner": {"reputation": 864, "user_id": 1423901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mLA3B.jpg?s=128&g=1", "display_name": "Redithion", "link": "https://stackoverflow.com/users/1423901/redithion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 1, "accepted_answer_id": 48063335, "answer_count": 1, "score": 5, "last_activity_date": 1514905854, "creation_date": 1514904985, "question_id": 48063138, "link": "https://stackoverflow.com/questions/48063138/should-i-close-logger-file", "title": "Should I close logger file?", "body": "<p>I've just read the Logger gem documentation and the method <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/logger/rdoc/Logger.html#method-i-close\" rel=\"noreferrer\">close</a> called my attention. Now I'm wondering if I have to close logger file after using it, like:</p>\n\n<pre><code>log = Logger.new(\"foo.log\")\n# program here logging things\nlog.close\n</code></pre>\n\n<p>I've never closed it before and it doesn't seem to be an issue, maybe it's closed automatically when the program finishes?</p>\n"}, {"tags": ["ruby", "ssl-certificate", "firewall"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1514900013, "post_id": 48061932, "comment_id": 83096375, "body": "Force rubygems to use HTTP instead of HTTPS. <a href=\"https://stackoverflow.com/questions/20762369/force-rubygems-to-use-http\" title=\"force rubygems to use http\">stackoverflow.com/questions/20762369/force-rubygems-to-use-h&zwnj;&#8203;ttp</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514900250, "post_id": 48061932, "comment_id": 83096478, "body": "Also, this is a official guide: <a href=\"http://guides.rubygems.org/ssl-certificate-update/#manual-solution-to-ssl-issue\" rel=\"nofollow noreferrer\">guides.rubygems.org/ssl-certificate-update/&hellip;</a>"}], "owner": {"reputation": 23558, "user_id": 999355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZCbkS.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/999355/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 671, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514899797, "creation_date": 1514899797, "question_id": 48061932, "link": "https://stackoverflow.com/questions/48061932/cannot-update-gems-through-sophos-firewall", "title": "Cannot update gems through Sophos firewall", "body": "<p>I installed Ruby 2.4.1 on Windows 10 and tried to make</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>but get:</p>\n\n<blockquote>\n  <p>ERROR:  SSL verification error at depth 1: self signed certificate in certificate chain (19)</p>\n  \n  <p>ERROR:  Root certificate is not trusted (/C=GB/ST=Oxfordshire/O=Sophos/OU=NSG/CN=Sophos SSL CA_C22017KYFKPJ462/emailAddress=support@sophos.com)</p>\n  \n  <p>ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)\n      SSL_connect returned=1 errno=0 state=error: certificate verify failed (<a href=\"https://api.rubygems.org/specs.4.8.gz\" rel=\"nofollow noreferrer\">https://api.rubygems.org/specs.4.8.gz</a>)</p>\n</blockquote>\n\n<p>The problem is our company's Sophos firewall. In order to have an HTTPS access Sophos SSL root certificate must be installed. I did this task in Internet Explorer and now I can connect my web browsers to HTTPS web sites, but for Ruby's gem system the SSL certificate must be installed separately, somewhere into gem system.</p>\n\n<p>Is this possible and how to do this?</p>\n"}, {"tags": ["ruby", "rbenv"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1514904257, "post_id": 48061622, "comment_id": 83098610, "body": "I think <a href=\"https://github.com/rbenv/ruby-build/issues/1139\" rel=\"nofollow noreferrer\">this</a> is the same issue, someone reported back in October. Have you compared your results/library versions to that discussion?"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1515330665, "post_id": 48061622, "comment_id": 83252062, "body": "I am having the same problem trying to install 2.5 on Sierra using <code>rvm</code>."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1515591372, "post_id": 48061622, "comment_id": 83357016, "body": "In case it&#39;s helpful, the way I fixed it on <code>rvm</code> is to override the location of the openssl by either <code>rvm install 2.5 --with-openssl-dir=&#47;usr&#47;local&#47;opt&#47;openssl</code> or <code>rvm install 2.5  --with-openssl-dir=</code>brew --prefix openssl` `. Maybe there&#39;s a way to do the same with rbenv/ruby-build?"}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 8624974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Cw3V.jpg?s=128&g=1", "display_name": "montblanc18", "link": "https://stackoverflow.com/users/8624974/montblanc18"}, "edited": false, "score": 0, "creation_date": 1514987236, "post_id": 48063294, "comment_id": 83131160, "body": "I knew the issue which you suggested, and I was not able to install ruby 2.5.0 even if I did <code>cd ~&#47;.rbenv &amp;&amp; git pull &amp;&amp; cd plugins&#47;ruby-build &amp;&amp; git pull</code>. I worry about the version of gcc. I use gcc 6 which was installed with MacPorts. Does this difference cause these troubles?"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 5, "last_activity_date": 1514905664, "creation_date": 1514905664, "answer_id": 48063294, "question_id": 48061622, "link": "https://stackoverflow.com/questions/48061622/failing-to-build-ruby-2-5-0-with-rbenv-and-ruby-build-on-macos-sierra/48063294#48063294", "title": "Failing to build Ruby 2.5.0 with rbenv and ruby-build on macOS Sierra", "body": "<p>It works for me on the same OS. <a href=\"https://github.com/rbenv/ruby-build/issues/1139\" rel=\"noreferrer\">An issue in ruby-build that produced this error was reported and fixed recently.</a></p>\n\n<p>Update rbenv and ruby-build</p>\n\n<ul>\n<li><p>If you're getting them from git:</p>\n\n<pre><code>cd ~/.rbenv\ngit pull\ncd plugins/ruby-build\ngit pull\n</code></pre></li>\n<li><p>If you're getting them from homebrew:</p>\n\n<pre><code>brew update\nbrew upgrade rbenv ruby-build\n</code></pre></li>\n</ul>\n\n<p>and try <code>rbenv install 2.5.0</code> again.</p>\n\n<p>If you're using rbenv &amp; ruby-build homebrew, you could try using them from git.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 8624974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Cw3V.jpg?s=128&g=1", "display_name": "montblanc18", "link": "https://stackoverflow.com/users/8624974/montblanc18"}, "is_accepted": false, "score": 3, "last_activity_date": 1518329592, "last_edit_date": 1518329592, "creation_date": 1518328868, "answer_id": 48728800, "question_id": 48061622, "link": "https://stackoverflow.com/questions/48061622/failing-to-build-ruby-2-5-0-with-rbenv-and-ruby-build-on-macos-sierra/48728800#48728800", "title": "Failing to build Ruby 2.5.0 with rbenv and ruby-build on macOS Sierra", "body": "<p>I finally fixed this problem.  When this problem happened, my rbenv treid to install ruby 2.5.0 using openssl-1.1.0g. This openssl was selected by rbenv and ruby-build. \nIn my environment, I installed openssl@1.0.2n_0 by MacPort. I selected this openssl to installing ruby 2.5.0 with rbenv and ruby-build.</p>\n\n<pre><code>$ rbenv versions\n  system\n* 2.4.0 \n$ port installed | grep openssl\n  openssl @1.0.2n_0 (active)\n$ RUBY_CONFIGURE_OPTS=\"--with-openssl-dir=/opt/local --with-gdbm-dir=/opt/local\"  rbenv install -v 2.5.0\n$ rbenv versions\n  system\n* 2.4.0 \n  2.5.0\n</code></pre>\n\n<p>When I did not use <code>--with-gdbm-dir=/opt/local</code>, I got the below message:</p>\n\n<pre><code>*** Following extensions are not compiled:\ngdbm:\n    Could not be configured. It will not be installed.\n    Check ext/gdbm/mkmf.log for more details.\n*** Fix the problems, then remove these directories and try again if you want.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 8389151, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QDxV54o4q8w/AAAAAAAAAAI/AAAAAAAAACI/u_21l93lc0k/photo.jpg?sz=128", "display_name": "Moesi Koochio D", "link": "https://stackoverflow.com/users/8389151/moesi-koochio-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1522859995, "creation_date": 1522859995, "answer_id": 49656217, "question_id": 48061622, "link": "https://stackoverflow.com/questions/48061622/failing-to-build-ruby-2-5-0-with-rbenv-and-ruby-build-on-macos-sierra/49656217#49656217", "title": "Failing to build Ruby 2.5.0 with rbenv and ruby-build on macOS Sierra", "body": "<p>use this to install ruby last version with rbenv </p>\n\n<pre><code>RUBY_CONFIGURE_OPTS=\"--disable-dtrace\" rbenv install 2.5.1\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 8624974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Cw3V.jpg?s=128&g=1", "display_name": "montblanc18", "link": "https://stackoverflow.com/users/8624974/montblanc18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5528, "favorite_count": 2, "answer_count": 3, "score": 4, "last_activity_date": 1557578003, "creation_date": 1514898551, "last_edit_date": 1557578003, "question_id": 48061622, "link": "https://stackoverflow.com/questions/48061622/failing-to-build-ruby-2-5-0-with-rbenv-and-ruby-build-on-macos-sierra", "title": "Failing to build Ruby 2.5.0 with rbenv and ruby-build on macOS Sierra", "body": "<p>I tried to install ruby 2.5.0 with rbenv and ruby-build on macOS Sierra, but it failed and I got error messages as below:</p>\n\n<pre><code>$ rbenv install 2.5.0\nDownloading openssl-1.1.0g.tar.gz...\n-&gt; https://dqw8nmjcqpjn7.cloudfront.net/de4d501267da39310905cb6dc8c6121f7a2cad45a7707f76df828fe1b85073af\nInstalling openssl-1.1.0g...\nInstalled openssl-1.1.0g to /Users/hikaru/.rbenv/versions/2.5.0\n\nDownloading ruby-2.5.0.tar.bz2...\n-&gt; https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.bz2\nInstalling ruby-2.5.0...\n\nBUILD FAILED (OS X 10.12.6 using ruby-build 20171226)\n\nInspect or clean up the working tree at \n/var/folders/5q/dy9blchn6fq1_673pm0ybt0h0000gn/T/ruby-\nbuild.20180102205530.13528\nResults logged to /var/folders/5q/dy9blchn6fq1_673pm0ybt0h0000gn/T/ruby-build.20180102205530.13528.log\n\nLast 10 log lines:\nmake[1]: *** Waiting for unfinished jobs....\ninstalling default ripper libraries\ncompiling ancdata.c\ncompiling raddrinfo.c\ncompiling ifaddr.c\ninstalling default socket libraries\nlinking shared-object zlib.bundle\nlinking shared-object socket.bundle\nlinking shared-object ripper.bundle\nmake: *** [build-ext] Error 2\n</code></pre>\n\n<p>I checked the log files and found the error below:</p>\n\n<pre><code>  ossl_x509cert.c:334:59: error: member reference type 'int' is not a pointer\nif (!i2a_ASN1_OBJECT(out, X509_get0_tbs_sigalg(x509)-&gt;algorithm)) {\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~  ^\n</code></pre>\n\n<p>I have no idea why this error happens. I would appreciate it if you would explain how to solve this problem.</p>\n\n<p>After then, I tried to <code>rbenv install 2.5.0</code> with gcc provided by Xcode on macOS High Sierra, and same problem happened.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs", "exception"], "comments": [{"owner": {"reputation": 531, "user_id": 2791802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277af608cdd53abacbaf84ed7a1d973f?s=128&d=identicon&r=PG&f=1", "display_name": "orangespark", "link": "https://stackoverflow.com/users/2791802/orangespark"}, "edited": false, "score": 0, "creation_date": 1514891940, "post_id": 48059973, "comment_id": 83092287, "body": "the error is mainly the second snippet rest is just common when errors occur in react"}, {"owner": {"reputation": 531, "user_id": 2791802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277af608cdd53abacbaf84ed7a1d973f?s=128&d=identicon&r=PG&f=1", "display_name": "orangespark", "link": "https://stackoverflow.com/users/2791802/orangespark"}, "edited": false, "score": 0, "creation_date": 1514891970, "post_id": 48059973, "comment_id": 83092301, "body": "Please show the code where that undefined error is thrown"}, {"owner": {"reputation": 531, "user_id": 2791802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277af608cdd53abacbaf84ed7a1d973f?s=128&d=identicon&r=PG&f=1", "display_name": "orangespark", "link": "https://stackoverflow.com/users/2791802/orangespark"}, "edited": false, "score": 0, "creation_date": 1514892048, "post_id": 48059973, "comment_id": 83092340, "body": "whatever object you tried to use for getting status property is undefined"}], "owner": {"reputation": 1433, "user_id": 703997, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c4bda24c22a7e56894feb140e6b79c77?s=128&d=identicon&r=PG&f=1", "display_name": "Shruthi R", "link": "https://stackoverflow.com/users/703997/shruthi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514891760, "creation_date": 1514891760, "question_id": 48059973, "link": "https://stackoverflow.com/questions/48059973/rails-5-why-we-will-get-domexception-error-in-reactjs", "title": "Rails 5 - Why we will get DOMException error in ReactJS?", "body": "<p>In rails 5, I am using <code>\"react\": \"^15.4.1\"</code> for front-end. </p>\n\n<p>I am getting an error like </p>\n\n<pre><code>Uncaught DOMException: Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node.\nat removeChild (http://localhost:8080/js/main.js:20902:14)\nat Object.processUpdates (http://localhost:8080/js/main.js:21046:11)\nat Object.dangerouslyProcessChildrenUpdates [as processChildrenUpdates] (http://localhost:8080/js/main.js:82797:27)\nat processQueue (http://localhost:8080/js/main.js:85253:29)\nat ReactDOMComponent._updateChildren (http://localhost:8080/js/main.js:85471:9)\nat ReactDOMComponent.updateChildren (http://localhost:8080/js/main.js:85415:12)\nat ReactDOMComponent._updateDOMChildren (http://localhost:8080/js/main.js:82569:12)\nat ReactDOMComponent.updateComponent (http://localhost:8080/js/main.js:82387:10)\nat ReactDOMComponent.receiveComponent (http://localhost:8080/js/main.js:82349:10)\nat Object.receiveComponent (http://localhost:8080/js/main.js:10257:22)\n</code></pre>\n\n<p>And also I am getting an another error like</p>\n\n<pre><code>Uncaught (in promise) TypeError: Cannot read property 'status' of undefined\nat Function._onError (main.js:362)\nat main.js:304\nat &lt;anonymous&gt;\n</code></pre>\n\n<p>Why these errors will come? Please help me to solve this issue, I am new to ReactJS.</p>\n"}, {"tags": ["ruby", "telegram"], "comments": [{"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1514889158, "post_id": 48059030, "comment_id": 83090883, "body": "Have you inspected your contact object? What methods does it provide? Have you tried playing with it in irb?"}, {"owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "reply_to_user": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1514893236, "post_id": 48059030, "comment_id": 83092970, "body": "As per Telegram Bot API, if i removed the &#39;phone_number == &#39;11111111&#39; portion, I am able to get the text reply."}], "answers": [{"tags": [], "owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "is_accepted": true, "score": 1, "last_activity_date": 1514894971, "last_edit_date": 1514894971, "creation_date": 1514894319, "answer_id": 48060584, "question_id": 48059030, "link": "https://stackoverflow.com/questions/48059030/telegram-bot-parse-users-phone-number-using-ruby/48060584#48060584", "title": "Telegram bot parse user&#39;s phone number using Ruby?", "body": "<p>I fixed this issue by setting a temporal variable to the <code>Contact</code> object before querying its <code>phone_number</code> field. Not sure if this is the intended interaction, but it works.</p>\n\n<pre><code>Telegram::Bot::Client.run(token) do |bot|\n  bot.listen do |message|\n    if sender = message.contact #Set a variable to the Contact object.\n      if sender.phone_number == \"11111111\"\n        bot.api.send_message(\n          chat_id: message.chat.id, \n          text: 'Phone number received.' \n          )\n      end\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 48060584, "answer_count": 1, "score": 0, "last_activity_date": 1514894971, "creation_date": 1514887968, "question_id": 48059030, "link": "https://stackoverflow.com/questions/48059030/telegram-bot-parse-users-phone-number-using-ruby", "title": "Telegram bot parse user&#39;s phone number using Ruby?", "body": "<p>I am trying to get a Telegram bot to request a user for his/her number and perform an operation on it.</p>\n\n<pre><code>Telegram::Bot::Client.run(token) do |bot|\n  bot.listen do |message|\n    case message\n    when Telegram::Bot::Types::CallbackQuery\n    when Telegram::Bot::Types::Message\n      case message.text\n      when '/help'\n        bot.api.send_message(\n          chat_id: message.chat.id, \n          text: 'Display help.' \n          )\n      end\n      if message.contact.phone_number == \"1111111\" #undefined method\n        bot.api.send_message(\n          chat_id: message.chat.id, \n          text: 'Number received.' \n          )\n      end\n    else\n      bot.api.send_message(\n        chat_id: message.chat.id, \n        text: 'Unknown command.' \n        )\n    end\n  end\nend\n</code></pre>\n\n<p>I am able to get the Contact object, but how do I access the phone_number field of the object? Using Ruby wrapper for Telegram bots.</p>\n"}, {"tags": ["ruby", "math", "finance"], "comments": [{"owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "edited": false, "score": 1, "creation_date": 1514889831, "post_id": 48058990, "comment_id": 83091216, "body": "Why should it be 168? Can you please provide a bit of explanation?"}, {"owner": {"reputation": 25, "user_id": 2372815, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c2936a1e2c4c0064d5e886056800b00?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/2372815/sunil"}, "reply_to_user": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "edited": false, "score": 0, "creation_date": 1514890276, "post_id": 48058990, "comment_id": 83091436, "body": "according to reference link it should be 168 <a href=\"https://www.moneysmart.gov.au/tools-and-resources/calculators-and-apps/savings-goals-calculator\" rel=\"nofollow noreferrer\">moneysmart.gov.au/tools-and-resources/calculators-and-apps/&hellip;</a>"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514890435, "post_id": 48058990, "comment_id": 83091526, "body": "What is &#39;Regular savings&#39; param?"}, {"owner": {"reputation": 25, "user_id": 2372815, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c2936a1e2c4c0064d5e886056800b00?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/2372815/sunil"}, "edited": false, "score": 0, "creation_date": 1514890551, "post_id": 48058990, "comment_id": 83091599, "body": "Regular savings: 1000 Monthly"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514890947, "post_id": 48058990, "comment_id": 83091808, "body": "What does this line of code mean ` i = interest/(100*12)*loan` ?"}, {"owner": {"reputation": 25, "user_id": 2372815, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c2936a1e2c4c0064d5e886056800b00?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/2372815/sunil"}, "edited": false, "score": 0, "creation_date": 1514891256, "post_id": 48058990, "comment_id": 83091948, "body": "changing my interest rate from annual to monthly."}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 1, "creation_date": 1514891275, "post_id": 48058990, "comment_id": 83091957, "body": "Can you please explain <i>what</i> you want to calculate? How long it will take you to pay off the loan?"}, {"owner": {"reputation": 25, "user_id": 2372815, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c2936a1e2c4c0064d5e886056800b00?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/2372815/sunil"}, "edited": false, "score": 0, "creation_date": 1514891328, "post_id": 48058990, "comment_id": 83091989, "body": "No I want to calculate interest amount"}, {"owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "edited": false, "score": 0, "creation_date": 1514891459, "post_id": 48058990, "comment_id": 83092055, "body": "If you want to calculate interest, why are you doing it like paying off a loan?"}, {"owner": {"reputation": 25, "user_id": 2372815, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c2936a1e2c4c0064d5e886056800b00?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/2372815/sunil"}, "edited": false, "score": 0, "creation_date": 1514891762, "post_id": 48058990, "comment_id": 83092212, "body": "because i don&#39;t know year or terms to find it. I have only original amount, interest rate and monthly payment."}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514891842, "post_id": 48058990, "comment_id": 83092246, "body": "Your interest amount should be  <code>loan_rate * loan_amount * loan_months</code>"}, {"owner": {"reputation": 25, "user_id": 2372815, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c2936a1e2c4c0064d5e886056800b00?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/2372815/sunil"}, "edited": false, "score": 0, "creation_date": 1514892233, "post_id": 48058990, "comment_id": 83092434, "body": "daniel we don&#39;t have loan month in above code"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514950920, "post_id": 48058990, "comment_id": 83115358, "body": "@Daniel, that&#39;s not correct because any any given month the interest is calculated on the outstanding balance, not on the original amount of the loan."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514952797, "post_id": 48058990, "comment_id": 83115746, "body": "user2372815, you say in the title that you want to calculate the &quot;original loan amount&quot;, but in a comment you say, &quot;I want to calculate interest amount.&quot; You refer to loans but the link takes us to a savings calculator. Are you surprised readers don&#39;t understand your question?"}], "answers": [{"comments": [{"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 1, "creation_date": 1514935678, "post_id": 48060965, "comment_id": 83112220, "body": "<a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a>"}], "tags": [], "owner": {"reputation": 1207, "user_id": 4145941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mHhb.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4145941/mohammad"}, "is_accepted": false, "score": 2, "last_activity_date": 1522674833, "last_edit_date": 1522674833, "creation_date": 1514895884, "answer_id": 48060965, "question_id": 48058990, "link": "https://stackoverflow.com/questions/48058990/how-to-calculate-original-loan-amount-without-year-terms/48060965#48060965", "title": "How to calculate original loan amount without year terms?", "body": "<p>The code doesn't work because you are doing the opposite of what the link you reference is doing. What they are calculating is saving interest, what you are calculating is loan interest. </p>\n\n<p>Basically, this is how you should define the variables.Also, as others have pointed out, it is good to use BigDecimal to calculate money:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>require 'bigdecimal'\nbalance = 0.to_d\ninterest = 10.to_d/1200.to_d\nregular_saving = 1000;\ngoal =6000;\ni = 0;\nadded_interest = 0\n</code></pre>\n\n<p>So, to correct things, you have to start from the <code>starting balance</code> (i.e 0) and start incrementing. Something like this:</p>\n\n<pre><code>while balance &lt; goal\n    balance += regular_saving;\n    i  = balance * (interest);\n    balance +=i;\n    added_interest+=i;\nend\n</code></pre>\n\n<p>Note also, that in the last year you don't need to pay the full saving amount. You only need to pay to reach the goal. For that, you need to add a conditional statement to check <code>goal - balance &lt; regular_saving</code>. If this was the case, the interest should be calculated in terms of the balance that should be paid (slightly less than the goal).</p>\n"}], "owner": {"reputation": 25, "user_id": 2372815, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c2936a1e2c4c0064d5e886056800b00?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/2372815/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522674833, "creation_date": 1514887838, "last_edit_date": 1514897050, "question_id": 48058990, "link": "https://stackoverflow.com/questions/48058990/how-to-calculate-original-loan-amount-without-year-terms", "title": "How to calculate original loan amount without year terms?", "body": "<p><a href=\"https://www.moneysmart.gov.au/tools-and-resources/calculators-and-apps/savings-goals-calculator\" rel=\"nofollow noreferrer\">https://www.moneysmart.gov.au/tools-and-resources/calculators-and-apps/savings-goals-calculator</a></p>\n\n<p>I want to get result like above calculator when I select:</p>\n\n<p>I want to save: <strong>6000</strong><br>\nI want to spend it: <strong>As soon as possible</strong><br>\nStarting balance: <strong>0</strong><br>\nInterest rate : <strong>10%</strong><br>\nRegular savings: <strong>1000 Monthly</strong></p>\n\n<p>But I am getting not correct result using this code:</p>\n\n<pre><code>  loan = 6000.0\n  interest = 10.0\n  monthly_payment = 1000.0\n  i =0.0\n  record = []\n  count = 1\n  add_interst = 0.0\n  while( loan&gt;=0)\n    i = interest/(100*12)*loan\n    loan=i+(loan)-(monthly_payment);   \n    add_interst = add_interst + i\n  end\n  puts add_interst\n</code></pre>\n\n<p>I am getting <code>181.42163384701658</code> which should be <code>168</code>. I don't know where I am wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ip"], "comments": [{"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1514887447, "post_id": 48058854, "comment_id": 83090046, "body": "are you running rails application locally in production environment?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1514890730, "post_id": 48058854, "comment_id": 83091698, "body": "Please elaborate on your production server setup. Do you use a load balancer? What server do you use?"}, {"owner": {"reputation": 1175, "user_id": 1142113, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce627ea82f589ccb85c6a37b921dcad6?s=128&d=identicon&r=PG", "display_name": "Gregology", "link": "https://stackoverflow.com/users/1142113/gregology"}, "edited": false, "score": 0, "creation_date": 1531572572, "post_id": 48058854, "comment_id": 89651792, "body": "I&#39;m having this same issue using Google Cloud on my rails app"}], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": false, "score": 0, "last_activity_date": 1514905998, "creation_date": 1514905998, "answer_id": 48063360, "question_id": 48058854, "link": "https://stackoverflow.com/questions/48058854/devise-writes-only-local-ip-adress-in-database/48063360#48063360", "title": "Devise writes only local IP adress in database", "body": "<p>I am not sure what you are trying to do but I was looking at the devise gem <strong><a href=\"https://github.com/plataformatec/devise/blob/master/lib/devise/models/trackable.rb#L20-L31\" rel=\"nofollow noreferrer\">devise/lib/devise/models/trackable.rb</a></strong> and found out where they are saving the IP address </p>\n\n<p>This is taking the current_sign_in_ip - The remote IP updated when the user signs in.</p>\n\n<p>I hope that this helps or at least points you in the right direction </p>\n"}], "owner": {"reputation": 49, "user_id": 8397524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74227c9f6a88561a7799bafd9cd2cacd?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Baksheev", "link": "https://stackoverflow.com/users/8397524/ivan-baksheev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1514905998, "creation_date": 1514887291, "last_edit_date": 1514894520, "question_id": 48058854, "link": "https://stackoverflow.com/questions/48058854/devise-writes-only-local-ip-adress-in-database", "title": "Devise writes only local IP adress in database", "body": "<p>On my production rails server devise gem logs 127.0.0.1 into database as remote user IP.</p>\n\n<p>What should I do to collect real user IP, not localhost like on development.</p>\n\n<p>My production server setup:</p>\n\n<p><code>Rails 5.0.3</code>\n<code>devise (4.3.0, 4.2.1, 4.2.0)</code>\n<code>passenger from my hosting provider</code></p>\n\n<p>I don't use load balancer.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2vXzS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2vXzS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1514887292, "post_id": 48058534, "comment_id": 83089977, "body": "<i>&quot;using this code [...]&quot;</i> \u2013 you should tag your question accordingly if you are using Rails or Active Support."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1514887840, "post_id": 48058534, "comment_id": 83090223, "body": "You&#39;re clearly using Rails or ActiveSupport.  In which case you can do <code>1.year.from_now.year</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1514886333, "post_id": 48058628, "comment_id": 83089545, "body": "More fluent <code>Time.now.year.succ</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1514886545, "post_id": 48058628, "comment_id": 83089627, "body": "How about <code>Time.now.year.next</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514887157, "post_id": 48058628, "comment_id": 83089913, "body": "The only correct answer here so far, since the OP was not tagged with <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">ruby-on-rails</a>."}], "tags": [], "owner": {"reputation": 346, "user_id": 9030790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4037273fba75800aa1dd6e249a9d9817?s=128&d=identicon&r=PG&f=1", "display_name": "lg86", "link": "https://stackoverflow.com/users/9030790/lg86"}, "is_accepted": false, "score": 4, "last_activity_date": 1514886460, "last_edit_date": 1514886460, "creation_date": 1514886208, "answer_id": 48058628, "question_id": 48058534, "link": "https://stackoverflow.com/questions/48058534/proper-way-to-get-next-year-from-now/48058628#48058628", "title": "Proper way to get next year from now", "body": "<p>Try these</p>\n\n<pre><code>Time.now.year + 1\n</code></pre>\n\n<p>output will be </p>\n\n<pre><code>2019\n</code></pre>\n\n<p>As suggest by @sschmeck you can try these also to get only next year</p>\n\n<pre><code>Time.now.year.succ\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1514887026, "post_id": 48058635, "comment_id": 83089860, "body": "This obviously does not work in <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>. Downvoted."}, {"owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514887492, "post_id": 48058635, "comment_id": 83090067, "body": "@mudasobwa Since the OP was asking a ROR question, I answered it that way. Missed it wasn&#39;t tagged ROR. But yes, you&#39;re right, it doesn&#39;t work in Ruby."}], "tags": [], "owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "is_accepted": true, "score": 5, "last_activity_date": 1514886233, "creation_date": 1514886233, "answer_id": 48058635, "question_id": 48058534, "link": "https://stackoverflow.com/questions/48058534/proper-way-to-get-next-year-from-now/48058635#48058635", "title": "Proper way to get next year from now", "body": "<p>There are several options to do this. But using your format, we can do it like this:</p>\n\n<pre><code>1.year.from_now.year\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514887094, "post_id": 48058788, "comment_id": 83089888, "body": "This obviously does not work in <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>. Downvoted."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1514887445, "post_id": 48058788, "comment_id": 83090044, "body": "Ruby <code>Time</code> instances don&#39;t respond to <code>next</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1514888241, "post_id": 48058788, "comment_id": 83090421, "body": "Now this answer does not add any value to the one provided by @ig86 12 minutes before."}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1514887743, "last_edit_date": 1514887743, "creation_date": 1514886949, "answer_id": 48058788, "question_id": 48058534, "link": "https://stackoverflow.com/questions/48058534/proper-way-to-get-next-year-from-now/48058788#48058788", "title": "Proper way to get next year from now", "body": "<p>You can use this,</p>\n\n<pre><code>d = Time.now.year.next\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1514887169, "creation_date": 1514887169, "answer_id": 48058837, "question_id": 48058534, "link": "https://stackoverflow.com/questions/48058534/proper-way-to-get-next-year-from-now/48058837#48058837", "title": "Proper way to get next year from now", "body": "<p><a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/Date.html#method-c-today\" rel=\"nofollow noreferrer\"><code>today</code></a>'s date:</p>\n\n<pre><code>require 'date'\n\nDate.today\n#=&gt; #&lt;Date: 2018-01-02 ...&gt;\n</code></pre>\n\n<p>This day <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/Date.html#method-i-next_year\" rel=\"nofollow noreferrer\"><code>next_year</code></a>:</p>\n\n<pre><code>Date.today.next_year\n#=&gt; #&lt;Date: 2019-01-02 ...&gt;\n</code></pre>\n\n<p>And finally its <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/Date.html#method-i-year\" rel=\"nofollow noreferrer\"><code>year</code></a>:</p>\n\n<pre><code>Date.today.next_year.year\n#=&gt; 2019\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "accepted_answer_id": 48058635, "answer_count": 4, "score": 1, "last_activity_date": 1514890983, "creation_date": 1514885779, "last_edit_date": 1514888197, "question_id": 48058534, "link": "https://stackoverflow.com/questions/48058534/proper-way-to-get-next-year-from-now", "title": "Proper way to get next year from now", "body": "<p>How I can get the next year in Rails?<br>\nI need to get only the year, without the date.<br>\nWhen I do <code>1.year.from_now</code> it returns a full date, not just the year.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 193, "user_id": 9129489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ecc98cad0410fc11f304fe66e7f1233c?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Koh", "link": "https://stackoverflow.com/users/9129489/thomas-koh"}, "edited": false, "score": 0, "creation_date": 1514886988, "post_id": 48058533, "comment_id": 83089835, "body": "environment is on debian 9"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1514915887, "post_id": 48058533, "comment_id": 83104441, "body": "<code>make: not found</code> this means the make program is not installed."}], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 8016768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39bfe45a303d7156e630c1bbaa3eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "chemical", "link": "https://stackoverflow.com/users/8016768/chemical"}, "is_accepted": false, "score": 1, "last_activity_date": 1514921473, "creation_date": 1514921473, "answer_id": 48066732, "question_id": 48058533, "link": "https://stackoverflow.com/questions/48058533/install-gem-em-websocket-failed/48066732#48066732", "title": "Install gem em-websocket failed", "body": "<p>Looks like the error <code>make: not found</code>, which means the <code>make</code> program is missing.</p>\n\n<p>You can fix it by running this command <code>sudo apt-get install build-essential</code></p>\n"}], "owner": {"reputation": 193, "user_id": 9129489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ecc98cad0410fc11f304fe66e7f1233c?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Koh", "link": "https://stackoverflow.com/users/9129489/thomas-koh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514921473, "creation_date": 1514885771, "question_id": 48058533, "link": "https://stackoverflow.com/questions/48058533/install-gem-em-websocket-failed", "title": "Install gem em-websocket failed", "body": "<p>uilding native extensions.  This could take a while...\nERROR:  Error installing em-websocket:\n    ERROR: Failed to build gem native extension.</p>\n\n<pre><code>current directory: /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\n</code></pre>\n\n<p>/usr/bin/ruby2.3 -r ./siteconf20180102-2602-1tzoncz.rb extconf.rb\ncreating Makefile</p>\n\n<p>current directory: /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\nmake \"DESTDIR=\" clean\nsh: 1: make: not found</p>\n\n<p>current directory: /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\nmake \"DESTDIR=\"\nsh: 1: make: not found</p>\n\n<p>make failed, exit code 127</p>\n\n<p>Gem files will remain installed in /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/http_parser.rb-0.6.0/gem_make.out</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database", "login"], "comments": [{"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1514885904, "post_id": 48058473, "comment_id": 83089368, "body": "use debugger and check <code>params</code> and what does it output as hash?"}, {"owner": {"reputation": 89, "user_id": 9163073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5378c48b80f4f3246c54f78cbacdfb?s=128&d=identicon&r=PG&f=1", "display_name": "lastone", "link": "https://stackoverflow.com/users/9163073/lastone"}, "reply_to_user": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1514887122, "post_id": 48058473, "comment_id": 83089900, "body": "How do I go about this please?"}, {"owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "edited": false, "score": 0, "creation_date": 1514895985, "post_id": 48058473, "comment_id": 83094375, "body": "Please check the rails sever log and add request parameters to your question."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514902028, "post_id": 48058473, "comment_id": 83097369, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11037864/bcrypterrorsinvalidhash-when-trying-to-sign-in\">&quot;BCrypt::Errors::InvalidHash&quot; when trying to sign in</a>"}, {"owner": {"reputation": 89, "user_id": 9163073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5378c48b80f4f3246c54f78cbacdfb?s=128&d=identicon&r=PG&f=1", "display_name": "lastone", "link": "https://stackoverflow.com/users/9163073/lastone"}, "edited": false, "score": 0, "creation_date": 1514903941, "post_id": 48058473, "comment_id": 83098442, "body": "No, I&#39;ve seen this answer and I&#39;ve tried making new entries while has_secure_password is present in the model file."}], "answers": [{"tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1514887044, "creation_date": 1514887044, "answer_id": 48058813, "question_id": 48058473, "link": "https://stackoverflow.com/questions/48058473/rails-invalid-hash-password-authenticates-in-ruby-console-but-after-reopening-it/48058813#48058813", "title": "Rails invalid hash password authenticates in ruby console but after reopening it doesn&#39;t. Why?", "body": "<p>Try to following sign in action like below</p>\n\n<pre><code>found_user = CmsUser.find_by(:username =&gt; params[:session][:username].downcase)\nif found_user &amp;&amp; found_user.authenticate(params[:session][:password])\n  #=&gt; code to be here\nelse\n  #=&gt; code to be here\nend\n</code></pre>\n\n<p>Hope to help</p>\n"}], "owner": {"reputation": 89, "user_id": 9163073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5378c48b80f4f3246c54f78cbacdfb?s=128&d=identicon&r=PG&f=1", "display_name": "lastone", "link": "https://stackoverflow.com/users/9163073/lastone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514904831, "creation_date": 1514885458, "last_edit_date": 1514904831, "question_id": 48058473, "link": "https://stackoverflow.com/questions/48058473/rails-invalid-hash-password-authenticates-in-ruby-console-but-after-reopening-it", "title": "Rails invalid hash password authenticates in ruby console but after reopening it doesn&#39;t. Why?", "body": "<p>I am following [lynda.com's Ruby on Rails 5 Essential Training][1] and am very stuck when building the login system.</p>\n\n<p>The issue is the database seems to be holding a different hash to what rails is using. I have looked all over for reasons and fixes and I understand that the stored hash and the one rails runs are different but why and how can I fix this?</p>\n\n<p>I have added:</p>\n\n<blockquote>\n  <p>bcrypt 3.1.11 gem installed <br> password_digest column in table <br>\n  has_secure_password to correct model file</p>\n</blockquote>\n\n<p>I have migrated down and back up again to see if there are issues with the table.</p>\n\n<p>The password stored in the database is <strong>hashed - password_digest: $2a$10$AMHXZBl/zXQ9yHOR7uBSiOdsGloArDkxO</strong></p>\n\n<p>I have even followed these steps in the Ruby console:</p>\n\n<pre><code>user.password = 'password'\nuser.password_confirmation = 'password'\nuser.save\nuser.authenticate('password')\n</code></pre>\n\n<p>The password saves and the authentication brings up the correct entry but it does not match after rerunning the console or using the login page on rails server.</p>\n\n<p>I get this error each time:</p>\n\n<pre><code>BCrypt::Errors::InvalidHash (invalid hash):\n\napp/controllers/cms_access_controller.rb:16:in `attempt_login'\n</code></pre>\n\n<p>and invalid hash error in the browser gets stuck here:</p>\n\n<pre><code>found_user = CmsUser.where(:username =&gt; params[:username]).first\n  if found_user\n    authorized_user = found_user.authenticate(params[:password])\n  end\nend\n</code></pre>\n\n<p>Here is the log from rails:</p>\n\n<pre><code>Started POST \"/cms_access/attempt_login\" for 127.0.0.1 at 2018-01-02 17:59:18 +0800\nProcessing by CmsAccessController#attempt_login as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"YP2tiHyRfDhJhhuF+PPM0D+hA+6BMJW5YmTyZyLpT6nXs4NdhGyihVKZpoMaRl0oUsobnr6x5bYGBR75+huUjg==\", \"username\"=&gt;\"username\", \"password\"=&gt;\"[FILTERED]\", \"commit\"=&gt;\"Login\"}\n[1m[36mCmsUser Load (0.4ms)[0m  [1m[34mSELECT  `cms_users`.* FROM `cms_users` WHERE `cms_users`.`username` = 'username' ORDER BY `cms_users`.`id` ASC LIMIT 1[0m\nCompleted 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms)\n\n\n\nBCrypt::Errors::InvalidHash (invalid hash):\n\napp/controllers/cms_access_controller.rb:16:in `attempt_login'\n</code></pre>\n\n<p>Full irb code as follows:</p>\n\n<pre><code>irb(main):001:0&gt; u = CmsUser.first\n   (0.4ms)  SET NAMES utf8,  @@SESSION.sql_mode = CONCAT(REPLACE(REPLACE(REPLACE(@@sql_mode, 'STRICT_TRANS_TABLES', ''), 'STRICT_ALL_TABLES', ''), 'TRADITIONAL', ''), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483\n  CmsUser Load (0.2ms)  SELECT  `cms_users`.* FROM `cms_users` ORDER BY `cms_users`.`id` ASC LIMIT 1\n=&gt; #&lt;CmsUser id: 1, first_name: \"first name\", last_name: \"last name\", email: \"email\", username: \"username\", password_digest: nil, created_at: \"2018-01-02 14:48:42\", updated_at: \"2018-01-02 14:48:42\"&gt;\nirb(main):002:0&gt; u.password = \"password\"\n=&gt; \"password\"\nirb(main):003:0&gt; u.password_confirmation = \"password\"\n=&gt; \"password\"\nirb(main):004:0&gt; u.save\n   (0.3ms)  BEGIN\n  SQL (0.4ms)  UPDATE `cms_users` SET `password_digest` = '$2a$10$gKAyDPTNzg.7Xnd7uatzuu0VWZNH6zGPA653RZ.5THB2Rziax1fyC', `updated_at` = '2018-01-02 14:50:29' WHERE `cms_users`.`id` = 1\n   (1.1ms)  COMMIT\n=&gt; true\nirb(main):005:0&gt; u.authenticate(\"password\")\n=&gt; #&lt;CmsUser id: 1, first_name: \"first name\", last_name: \"last name\", email: \"email\", username: \"username\", password_digest: \"$2a$10$gKAyDPTNzg.7Xnd7uatzuu0VWZNH6zGPA653RZ.5THB...\", created_at: \"2018-01-02 14:48:42\", updated_at: \"2018-01-02 14:50:29\"&gt;\n</code></pre>\n\n<p>After running rails server and attempting login:</p>\n\n<pre><code>Started POST \"/cms_access/attempt_login\" for 127.0.0.1 at 2018-01-02 22:52:01 +0800\nProcessing by CmsAccessController#attempt_login as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"qF/U+46QhGZHYuEbfPTStRxryPpp0hIEt1TQIRVE5bgfEfoudm1a21x9XB2eQUNNcQDQilZTYgvTNTy/zbY+nw==\", \"username\"=&gt;\"username\", \"password\"=&gt;\"[FILTERED]\", \"commit\"=&gt;\"Login\"}\n  CmsUser Load (0.4ms)  SELECT  `cms_users`.* FROM `cms_users` WHERE `cms_users`.`username` = 'username' ORDER BY `cms_users`.`id` ASC LIMIT 1\nCompleted 500 Internal Server Error in 11ms (ActiveRecord: 0.8ms)\n\n\n\nBCrypt::Errors::InvalidHash (invalid hash):\n\napp/controllers/cms_access_controller.rb:16:in `attempt_login'\n</code></pre>\n"}, {"tags": ["ruby", "heroku", "rest-client"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514905042, "post_id": 48057525, "comment_id": 83099032, "body": "You are chasing the wrong thing.  Kensa depends on 1.8, so keep that.  There&#39;s nothing wrong with it. What version of Ruby are you using?"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514905166, "post_id": 48057525, "comment_id": 83099084, "body": "If you run <code>irb</code> you should be able to run this and get a list: <code>OpenSSL::SSL::SSLContext::DEFAULT_PARAMS.fetch(:ciphers)</code>"}, {"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514976774, "post_id": 48057525, "comment_id": 83125409, "body": "this is the result of <code>ruby -v</code>: <code>ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-darwin15]</code>"}, {"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514976869, "post_id": 48057525, "comment_id": 83125466, "body": "@Joe and when I run the irb command I get: <code>NameError: uninitialized constant OpenSSL \tfrom (irb):1 \tfrom &#47;Users&#47;shaharsol&#47;.rvm&#47;rubies&#47;ruby-2.4.2&#47;bin&#47;irb:11:in </code>&lt;main&gt;&#39;`"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514981609, "post_id": 48057525, "comment_id": 83127990, "body": "sorry you may have to <code>require openssl</code> first"}, {"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514985028, "post_id": 48057525, "comment_id": 83129928, "body": "irb response: <code>KeyError: key not found: :ciphers \tfrom (irb):3:in </code>fetch&#39; \tfrom (irb):3 \tfrom /Users/shaharsol/.rvm/rubies/ruby-2.4.2/bin/irb:11:in <code>&lt;main&gt;&#39;</code>"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514989203, "post_id": 48057525, "comment_id": 83132232, "body": "did you build Ruby yourself?  What platform is this?  Something is super strange with your Ruby OpenSSL if <code>ciphers</code> is missing."}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514989327, "post_id": 48057525, "comment_id": 83132286, "body": "You should get something like  <code>$ ruby -v</code> ruby 2.4.3p205 (2017-12-14 revision 61247) [x86_64-darwin16]  <code>$ irb</code> <code>irb(main):001:0&gt; require &#39;openssl&#39;</code> =&gt; true <code>irb(main):002:0&gt; OpenSSL::SSL::SSLContext::DEFAULT_PARAMS.fetch(:ciphers)</code> =&gt; &quot;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:.&zwnj;&#8203;..&quot;"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514989576, "post_id": 48057525, "comment_id": 83132436, "body": "This looks like it could be related: <a href=\"https://github.com/rvm/rvm/issues/3923\" rel=\"nofollow noreferrer\">github.com/rvm/rvm/issues/3923</a>  (and I use <code>rbenv</code>, not <code>rvm</code>...)"}, {"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514993968, "post_id": 48057525, "comment_id": 83135149, "body": "Did exactly what was suggested there: <a href=\"https://github.com/rvm/rvm/issues/3923#issuecomment-280846180\" rel=\"nofollow noreferrer\">github.com/rvm/rvm/issues/3923#issuecomment-280846180</a> and still no go..."}, {"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514994035, "post_id": 48057525, "comment_id": 83135184, "body": "and still same <code>KeyError: key not found: :ciphers \tfrom (irb):2:in </code>fetch&#39; \tfrom (irb):2 \tfrom /Users/shaharsol/.rvm/rubies/ruby-2.4.2/bin/irb:11:in <code>&lt;main&gt;&#39;</code> message in irb. That&#39;s after [what i believe was] a ruby reinstall!"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1514994511, "post_id": 48057525, "comment_id": 83135472, "body": "Something&#39;s up with your ruby install w/r/t OpenSSL.  I&#39;m not sure what to tell you."}], "answers": [{"comments": [{"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "edited": false, "score": 0, "creation_date": 1514892443, "post_id": 48057952, "comment_id": 83092538, "body": "Thanks Nabin. Followed your answer and when running the uninstall got this scary message: <code>You have requested to uninstall the gem: \trest-client-1.8.0  kensa-3.0.2 depends on rest-client (~&gt; 1.8) If you remove this gem, these dependencies will not be met.</code> which also suggests that somewhere somehow kensa still thinks it needs 1.8"}, {"owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "reply_to_user": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "edited": false, "score": 0, "creation_date": 1514892508, "post_id": 48057952, "comment_id": 83092567, "body": "@shaharsol What message did you get?"}, {"owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "reply_to_user": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "edited": false, "score": 0, "creation_date": 1514892670, "post_id": 48057952, "comment_id": 83092653, "body": "@shaharsol Yes, indeed. It seems you need 1.8 version as well."}, {"owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "reply_to_user": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "edited": false, "score": 0, "creation_date": 1514895544, "post_id": 48057952, "comment_id": 83094176, "body": "@shaharsol Can you try following steps: open Gemfile.lock and change all rest-client versions to the version you want. Then run <code>bundle install</code>"}, {"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "reply_to_user": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "edited": false, "score": 0, "creation_date": 1514899323, "post_id": 48057952, "comment_id": 83096057, "body": "@taitrantuan ran <code>bundle install</code>, though the Gemfile.lock <i>already</i> contained <code>rest-client (2.0.2)</code>, and it didn&#39;t matter. It still runs with 1.8"}, {"owner": {"reputation": 1196, "user_id": 8426717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QwYD3zUWkhA/AAAAAAAAAAI/AAAAAAAABJs/2y8hDOo4fYY/photo.jpg?sz=128", "display_name": "Tai", "link": "https://stackoverflow.com/users/8426717/tai"}, "reply_to_user": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "edited": false, "score": 0, "creation_date": 1514905894, "post_id": 48057952, "comment_id": 83099434, "body": "@shaharsol It works on my machine. There are 2 places on Gemfile.lock contains rest-client, have you changed them all? If you already done, can you run <code>gem uninstall rest-client</code> to uninstall all rest-client versions them run <code>bundle install</code> again?"}, {"owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "edited": false, "score": 0, "creation_date": 1514976696, "post_id": 48057952, "comment_id": 83125354, "body": "When I run the uninstall it warns me that kensa is dependant on 1.8 and it won&#39;t be met if I delete it. In the Gemfile.lock there are 2 places where rest-client appears. One in the <code>specs</code> section where it listed <code>rest-client (~&gt; 2.0)</code> and one in the <code>GEM</code> section where it is listed <code>rest-client (2.0.2)</code>"}], "tags": [], "owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "is_accepted": false, "score": -1, "last_activity_date": 1514882743, "creation_date": 1514882743, "answer_id": 48057952, "question_id": 48057525, "link": "https://stackoverflow.com/questions/48057525/enforcing-a-ruby-gem-version/48057952#48057952", "title": "enforcing a ruby gem version", "body": "<p>To remove older version of the gem, you have two options:</p>\n\n<pre><code># remove all versions of the gem\ngem cleanup rest-client\n</code></pre>\n\n<p>After this, you can do 'bundle install' and only install the version you want.</p>\n\n<pre><code># choose which one you want to remove\ngem uninstall rest-client --version 1.8.0\n</code></pre>\n\n<p>After this, you will only have 2.0.2 version.</p>\n\n<p>Hope this solves your problem.</p>\n"}], "owner": {"reputation": 939, "user_id": 259226, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dd936e0e2186ee7704cd91b9915200fa?s=128&d=identicon&r=PG", "display_name": "shaharsol", "link": "https://stackoverflow.com/users/259226/shaharsol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514882743, "creation_date": 1514880199, "question_id": 48057525, "link": "https://stackoverflow.com/questions/48057525/enforcing-a-ruby-gem-version", "title": "enforcing a ruby gem version", "body": "<p>I am completely new to ruby, don't know the 1st thing about rvm, gemset etc. Just forced to use a CLI tool (kensa by heroku) written in ruby and facing an issue.</p>\n\n<p>The kensa tool seems to use a gem named rest-client. When I run it it throws an error:</p>\n\n<pre><code>/Users/shaharsol/.rvm/gems/ruby-2.4.2/gems/rest-client-1.8.0/lib/restclient/request.rb:163:in `fetch': key not found: :ciphers (KeyError)\n</code></pre>\n\n<p>Some searches suggest that v1.8 of rest-client is too old so I installed v2.0.2. Now when I do a <code>gem list</code> I get:</p>\n\n<pre><code>rest-client (2.0.2, 1.8.0)\n</code></pre>\n\n<p>When I run kensa again it still used to old version. So I went and modified it <code>kensa.gemspec</code> file (which is referred to from <code>Gemfile</code>) and to my best understanding told it to use the newer version:</p>\n\n<pre><code>s.add_runtime_dependency(%q&lt;rest-client&gt;, \"~&gt; 2.0\")\n</code></pre>\n\n<p>Yet, when I run kensa again, it still uses the old rest-client 1.8.0!</p>\n\n<p>What am I missing? What am I doing wrong? Or what else is required for the kensa to run with the new rest-client 2.0.2 ???</p>\n\n<p>PS - If my problem doesn't relate at all to changing 1.8.0 => 2.0.2 please tell me what else to do. I really don't care which rest-client version kensa uses, I just need it to run!</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "mongodb", "postgresql"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1514877191, "post_id": 48056860, "comment_id": 83086008, "body": "Just a tip: Did you know PostgreSQL has geometric and geographic query keywords? You could (slowly) parse the Geo data out of your JSON, and then put it into your database with full awareness, ready to be SELECTed out."}, {"owner": {"reputation": 535, "user_id": 5121955, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db5d1153ea4146102d5c2b9b54443176?s=128&d=identicon&r=PG&f=1", "display_name": "SanjiBukai", "link": "https://stackoverflow.com/users/5121955/sanjibukai"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1514878188, "post_id": 48056860, "comment_id": 83086398, "body": "Hi, Yep, I&#39;m actually using PostGIS extension in my main app, but here with those data I&#39;m only interested about string values (name of locations, streets, etc.). I&#39;m really interested about querying those entire set in order to provide those string values."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 5121955, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db5d1153ea4146102d5c2b9b54443176?s=128&d=identicon&r=PG&f=1", "display_name": "SanjiBukai", "link": "https://stackoverflow.com/users/5121955/sanjibukai"}, "edited": false, "score": 0, "creation_date": 1514878868, "post_id": 48057078, "comment_id": 83086667, "body": "Thanks for that, I&#39;ll probably use that parser (or another one) if I go with extracting the data from the JSON in order to put it in postgres (as a background job or within a <code>seed.rb</code> file. BTW, if so, I could either go with plain old relational string fields, or with JSONB field. I&#39;ll probably search using beginning of words inside those strings. I&#39;llprobably choose the solution that has fastest index lookups.."}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1514877826, "creation_date": 1514877826, "answer_id": 48057078, "question_id": 48056860, "link": "https://stackoverflow.com/questions/48056860/best-way-to-store-a-big-json-file-in-a-database-postgres-or-mongo/48057078#48057078", "title": "Best way to store a big json file in a database (postgres or mongo)", "body": "<p>Can you try using <a href=\"https://github.com/dgraham/json-stream\" rel=\"nofollow noreferrer\">JSON::Stream</a> this is best suited for huge JSON documents that won't fit in memory.</p>\n\n<p>Or try to implement this <a href=\"https://github.com/brianmario/yajl-ruby\" rel=\"nofollow noreferrer\">YAJL C Bindings for Ruby</a></p>\n\n<p>Hope to help</p>\n"}], "owner": {"reputation": 535, "user_id": 5121955, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db5d1153ea4146102d5c2b9b54443176?s=128&d=identicon&r=PG&f=1", "display_name": "SanjiBukai", "link": "https://stackoverflow.com/users/5121955/sanjibukai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 889, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1514879444, "creation_date": 1514876710, "last_edit_date": 1514879444, "question_id": 48056860, "link": "https://stackoverflow.com/questions/48056860/best-way-to-store-a-big-json-file-in-a-database-postgres-or-mongo", "title": "Best way to store a big json file in a database (postgres or mongo)", "body": "<p>I want to download some open data (geodata) in JSON format.<br>\nThe downloadable file is archived in <code>bz2</code> format and weights about 430 Mb. When uncompressed the <code>json</code> file weights about 3,2 Gb.</p>\n\n<p>There is also the opportunity to download partial data corresponding to a single region (100 in total). In that case each file weighs about 4 Mb and once uncompressed give a <code>json</code> file of 24 Mb.</p>\n\n<p>I plan to use those data in a rails application (currently using a postgres database).</p>\n\n<p>Since the data is available in JSON format, I thought about integrating a mongodb database alongside my postgres database.<br>\nBut I don't know if mongodb is able to load such a huge file eg. using <code>mongoimport</code>.<br>\nI'd heard about a limit of 8 or 16 Mb document size.. But is this limit corresponds to a single 'row' of the file or is the file corresponds to the whole document?  </p>\n\n<p>In that later case even with the partial files it will be impossible to use mongodb, right?<br>\nBut since I also heard about <code>mongoid</code> to be \"slow\", I wonder if it can be better to 'load' those data in postgres itself, on its own table (or even on its own database).<br>\nIf so how can I load those data?<br>\nI think about reading the file line by line with plain Ruby and populating the database in the <code>seed.rb</code> file. (I'm aware that it could take a very looong time though)</p>\n\n<p>Can anyone tell me in my situation what could be the best choice?</p>\n\n<hr>\n\n<p><em>Some considerations:<br>\nI don't have any constraints.<br>\nI'm using docker containers.<br>\nThose data will be read only in order to feed some fields in the main app with an autocompletion feature.<br>\nI plan to update the data every week or so from newly downloaded files.</em></p>\n\n<p>Edit: The \"fields\" (I mean keys of the JSON file) I'm interested in are strings that can have several words (ie. space separated strings).<br>\nUltimately I want to have the fastest lookup search upon beginning of the words (may it be in the middle of the string).<br>\nMaybe the choice could be limited based on the indexes possibilities offered by mongodb and postgres.<br>\nAnd for postgres, I could store those data in string fields or even \"as is\" in JSONB field regarding to which provide the fastest indexes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1514871644, "post_id": 48055961, "comment_id": 83084310, "body": "I would keep an extra <code>belongs_to :organization</code> in <code>Dataset</code> model to make it easier to fetch the data."}], "answers": [{"tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1514873878, "creation_date": 1514873878, "answer_id": 48056382, "question_id": 48055961, "link": "https://stackoverflow.com/questions/48055961/deeply-nested-activerecord-queries/48056382#48056382", "title": "Deeply Nested ActiveRecord Queries", "body": "<p>You can use eager_load method:</p>\n\n<pre><code>data_set = Dataset.eager_load(instruction: {project: :organization}).where('organizations.id = ?', organization.id)\n</code></pre>\n\n<p>refer this blog for clarification <a href=\"https://blog.arkency.com/2013/12/rails4-preloading/\" rel=\"nofollow noreferrer\">https://blog.arkency.com/2013/12/rails4-preloading/</a></p>\n"}], "owner": {"reputation": 744, "user_id": 1497347, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/712e66137d5064075042ea6ac388eea5?s=128&d=identicon&r=PG", "display_name": "Alex H Hadik", "link": "https://stackoverflow.com/users/1497347/alex-h-hadik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514882695, "creation_date": 1514870867, "question_id": 48055961, "link": "https://stackoverflow.com/questions/48055961/deeply-nested-activerecord-queries", "title": "Deeply Nested ActiveRecord Queries", "body": "<p>I have an ActiveRecord model <code>Dataset</code> which belongs to an <code>Instruction</code>, which belongs to a <code>Run</code> which belongs to a <code>Project</code> which belongs to an <code>Organization</code>. I'm trying to retrieve all the Dataset entries that belong to a particular organization.</p>\n\n<p>How can I query that deeply? I feel as though I should be able to accomplish this with <code>where()</code> but I can't figure out how to achieve my desired result.</p>\n"}, {"tags": ["ruby", "qt", "qtruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514870804, "post_id": 48055639, "comment_id": 83084131, "body": "Please share the source of the constructor of <code>Qt::Widget</code>. I am pretty sure it does not expect a single parameter, while you call it with a [default] single parameter <code>message</code>."}, {"owner": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514877952, "post_id": 48055639, "comment_id": 83086297, "body": "@mudasobwa hi Main.rb added. Thanks for your reply."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514878241, "post_id": 48055639, "comment_id": 83086425, "body": "I doubt I asked for more code, but it turned out <code>Qt::Widget</code> constructor expects no arguments, and you pass one. Try <code>super()</code> instead of <code>super</code> in the line where the error happens."}, {"owner": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514878704, "post_id": 48055639, "comment_id": 83086609, "body": "@mudasobwa <code>class Call_Win &lt; Qt::Widget              def initialize             super()  @msg = message gives call_win.rb:3:in initialize: wrong number of arguments (given 1, expected 0) (ArgumentError)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514879273, "post_id": 48055639, "comment_id": 83086806, "body": "Please follow the suggested path <i>exactly</i>. Somewhere in your code you instantiate <code>Call_Win</code> with <code>Call_Win.new(message)</code>. You should <i>leave</i> the <code>Call_Win</code> constructor <i>intact</i>, accepting the single parameter. Onle the call to <code>super()</code> should explicitly receive <i>no parameters</i>, because of <code>Qt::Widget</code> constructor does not accept arguments."}, {"owner": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514880539, "post_id": 48055639, "comment_id": 83087246, "body": "@mudasobwa it open Qt::MessageBox.information but &#39;msg&#39; is nil ;("}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1514880572, "post_id": 48055639, "comment_id": 83087258, "body": "This is the completely different issue."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1514879597, "creation_date": 1514879597, "answer_id": 48057434, "question_id": 48055639, "link": "https://stackoverflow.com/questions/48055639/ruby-qt-bindings-how-to-pass-variable-to-another-window/48057434#48057434", "title": "Ruby Qt-bindings: How to pass variable to another window?", "body": "<p>The issue is induced by wrong amount of arguments passed to <code>Qt::Widget</code> constructor via call to <code>super</code>:</p>\n\n<pre><code>class Call_Win &lt; Qt::Widget\n  def initialize(message)\n    super # HERE\n    ...\n  end\n  ...\nend\n</code></pre>\n\n<p><code>Qt::Widget#initialize</code> <em>does not accept</em> arguments. To call the <code>super</code> method without arguments one should explicitly pass no arguments to it:</p>\n\n<pre><code>class Call_Win &lt; Qt::Widget\n  def initialize(message)\n    super() # HERE\n</code></pre>\n\n<p>Call to <code>super</code> without parentheses <em>re-passes all the arguments given</em> to  the ancestor\u2019s function. Since the constructor of <code>Call_Win</code> receives the single argument, it\u2019s being passed to the ancestor\u2019s constructors via <code>super</code>. The explicit call to <code>super()</code> would pass no arguments to <code>Qt::Widget#initialize</code>, making the inheritance work as expected.</p>\n"}], "owner": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 48057434, "answer_count": 1, "score": 1, "last_activity_date": 1543674467, "creation_date": 1514867889, "last_edit_date": 1543674467, "question_id": 48055639, "link": "https://stackoverflow.com/questions/48055639/ruby-qt-bindings-how-to-pass-variable-to-another-window", "title": "Ruby Qt-bindings: How to pass variable to another window?", "body": "<p>I'm trying to pass <code>msg</code>var from <code>show</code> method in User_Info Class to <code>show</code> method in Call_Win Class. I'am getting stuck as I'm getting <code>rubyv2/call_win.rb:4:in initialize: unresolved constructor call Call_Win (ArgumentError)</code>.</p>\n\n<blockquote>\n  <p>Main.rb</p>\n</blockquote>\n\n<pre><code>require \"Qt\"\nrequire \"unirest\"\nrequire \"redis\"\n\n\n\nclass QtApp &lt; Qt::Widget\nrequire_relative \"user_info\"\n\nslots \"login()\"\n\ndef initialize\n    super\n\n    setWindowTitle \"Login\"\n\n    init_ui\n\n    resize 400, 90\n    move 0, 0\n\n    show\nend\n\ndef init_ui\n\n\n    @show = Qt::PushButton.new \"Login\", self\n\n\n\n    connect(@show, SIGNAL(\"clicked()\"),\n        self, SLOT(\"login()\"))\n\n        @show.move 20, 20\n\n    @username = Qt::LineEdit.new self\n    @username.move 130, 20\n    @username.setText \"remy@gmail.com\"\n    @password = Qt::LineEdit.new self\n    @password.setEchoMode(2)\n    @password.move 130, 50\n    @password.setText \"remy@gmail.com\"\nend   \n\ndef login\n\n    button = sender\n\n            if \"Login\" == button.text\n                call()\n            elsif \"Logout\" == button.text\n\n                logout()\n            end\n\n\nend\n\n\ndef logout\n    @app.quit\nend\n\ndef call\n\n  response = Unirest::post(\"http://localhost:3000/user_token\",\n                    headers:{\n                      \"content_type\" =&gt; \"application/json\"\n                    },\n                    parameters:{auth: [{\n                        :email =&gt; \"#{@username.text}\",\n                        :password =&gt; \"#{@password.text}\"\n                    }]}\n                  )                       \n\n                  $global_variable =  \"#{response.body[\"jwt\"]}\"\n                    puts \"#{response.code} #{@username.text} #{@password.text}\"\n\n                    if response.code == 201\n                        @show.setText \"Logout\" \n                     Qt::MessageBox.information self, \"#{$global_variable}\", \" Logged In ;) [#{response.body[\"jwt\"]}]\"\n                     User_Info.new  \n                    elsif response.code == 404\n                        Qt::MessageBox.warning self, \"#{@username.text}\", \"Unkown User\"\n\n                    end\n\n\n\n\n              end\n\n    end\n\n     @app = Qt::Application.new ARGV\n     QtApp.new\n     @app.exec\n</code></pre>\n\n<blockquote>\n  <p>User_Info Class</p>\n</blockquote>\n\n<pre><code>class User_Info &lt; Qt::Widget\nrequire_relative 'call_win'\n\n\n    def initialize\n        super\n\n        setWindowTitle \"Menu\"\n\n        init_ui\n\n        resize 400, 600\n        move 401, 0\n\n        show\n    end\n\n    def init_ui\n        $redis = Redis.new(host: \"192.168.43.1\", port: 6379)\n\n\n        show()\n\n    end   \n\n    def show()\n\n        $redis.subscribe('ruby') do |on|\n            on.message do |channel, msg|\n              Call_Win.new(\"#{msg}\")\n            end\n          end\n\nend\n\nend\n</code></pre>\n\n<blockquote>\n  <p>Call_Win Class</p>\n</blockquote>\n\n<pre><code>class Call_Win &lt; Qt::Widget\n\n    def initialize(message)\n        super\n\n        @msg = message\n\n        setWindowTitle  \"Menu\"\n\n        init_ui\n\n        resize 400, 600\n        move 401, 0\n\n        show\n    end\n\n    def init_ui\n      puts @msg\n        show(@msg)\n\n\n    end   \n\n    def show(msg)\n        Qt::MessageBox.information self, \"#{msg}\", \"#{msg}\"\n\nend\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "multidimensional-array", "while-loop"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1514868879, "post_id": 48055586, "comment_id": 83083697, "body": "Executive Summary: You almost never way to say <code>Array.new(8, Array.new(8))</code> because you&#39;ll end up sharing references, you almost always want <code>Array.new(8) { Array.new(8) }</code> instead so that the inner arrays are distinct arrays."}], "answers": [{"comments": [{"owner": {"reputation": 250, "user_id": 900970, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0a05d103b7a78c952562f57297ce4dae?s=128&d=identicon&r=PG", "display_name": "Abid", "link": "https://stackoverflow.com/users/900970/abid"}, "edited": false, "score": 0, "creation_date": 1514870866, "post_id": 48055668, "comment_id": 83084146, "body": "Wow thank you, this was very insightful! Ill have to read up on call to reference, I&#39;m sure this is a very key concept to grasp while I learn programming. Again, thank you for the help."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1514871872, "post_id": 48055668, "comment_id": 83084365, "body": "Or <code>(&#39;A&#39;..&#39;H&#39;).map { |l| (&quot;#{l}1&quot;..&quot;#{l}8&quot;).to_a }</code>"}, {"owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1514872780, "post_id": 48055668, "comment_id": 83084611, "body": "@SagarPandya Agreed that will work too. Thanks"}], "tags": [], "owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "is_accepted": true, "score": 0, "last_activity_date": 1514872807, "last_edit_date": 1514872807, "creation_date": 1514868128, "answer_id": 48055668, "question_id": 48055586, "link": "https://stackoverflow.com/questions/48055586/ruby-for-a-2d-array-why-are-nested-while-loops-overwriting-elements-defined-pre/48055668#48055668", "title": "Ruby: For a 2D array,why are nested while loops overwriting elements defined previously?", "body": "<p>Your code is not working due to call to reference. <code>Ruby is pass-by-value, but all the values are references.</code> <a href=\"https://stackoverflow.com/a/1872159/3759158\">https://stackoverflow.com/a/1872159/3759158</a> \nHave a look at the output</p>\n\n<pre><code>2.4.3 :087 &gt; arr = Array.new(8,Array.new(8))\n =&gt; [[nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil]] \n2.4.3 :088 &gt; arr[0][0] = 'B'\n =&gt; \"B\" \n2.4.3 :089 &gt; arr\n =&gt; [[\"B\", nil, nil, nil, nil, nil, nil, nil], [\"B\", nil, nil, nil, nil, nil, nil, nil], [\"B\", nil, nil, nil, nil, nil, nil, nil], [\"B\", nil, nil, nil, nil, nil, nil, nil], [\"B\", nil, nil, nil, nil, nil, nil, nil], [\"B\", nil, nil, nil, nil, nil, nil, nil], [\"B\", nil, nil, nil, nil, nil, nil, nil], [\"B\", nil, nil, nil, nil, nil, nil, nil]] \n</code></pre>\n\n<p>This is happen because of call by object on array object you can see this in effect by a simple example</p>\n\n<pre><code>a = []\nb = a\nb &lt;&lt; 10\nputs a =&gt; [10]\n</code></pre>\n\n<p>and very same thing is happening with your code.</p>\n\n<p>Instead of all that try this :</p>\n\n<pre><code>('A'..'H').map{|alph| (1..8).map{|num| \"#{alph}#{num}\"}}\n</code></pre>\n"}], "owner": {"reputation": 250, "user_id": 900970, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0a05d103b7a78c952562f57297ce4dae?s=128&d=identicon&r=PG", "display_name": "Abid", "link": "https://stackoverflow.com/users/900970/abid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1514868763, "accepted_answer_id": 48055668, "answer_count": 1, "score": 0, "last_activity_date": 1514872807, "creation_date": 1514867394, "last_edit_date": 1514871385, "question_id": 48055586, "link": "https://stackoverflow.com/questions/48055586/ruby-for-a-2d-array-why-are-nested-while-loops-overwriting-elements-defined-pre", "closed_reason": "Duplicate", "title": "Ruby: For a 2D array,why are nested while loops overwriting elements defined previously?", "body": "<p>Context: Im trying to populate a 2D array with while loops ,after witch I want to try and do it with {} block format. The point is to understand how these two syntax structures  can do the same thing.</p>\n\n<p>I have been reviewing this code and scouring the internet for the past hour and Ive decided that I'm simply not getting something, but I dont understand what that is. </p>\n\n<p>The outcome should be </p>\n\n<pre><code>=&gt; [[\"A1\", \"A2\", \"A3\", \"A4\", \"A5\", \"A6\", \"A7\", \"A8\"]\n=&gt; ..(Sequentially)..\n=&gt;[\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"H7\", \"H8\"]]\n</code></pre>\n\n<p>The code is as follows:</p>\n\n<pre><code>char= ('A'..'H').to_a\nnum= (1..8).to_a\narr=Array.new(8,Array.new(8))\n\nx=0\nwhile x &lt;8\n  y=0\n    while y &lt; 8\n    arr[x][y] = char[x] + num[y].to_s \n    y+=1\n    end\n  x+=1\nend\narr\n</code></pre>\n\n<p>Thank you in advance, I appreciate your patience and time. </p>\n\n<pre><code>                                    ####Edit####\n</code></pre>\n\n<p>The source of the confusion was due to a lack of understanding of the reference concept. Referencing allows us, by using the Array.new(n,Array.new(n)) method scheme, to access the values of the nested arrays that share a reference to their data via their parent array. This question is addressed directly here: <a href=\"https://stackoverflow.com/questions/22417074/creating-matrix-with-array-newn-array-new\">Creating matrix with `Array.new(n, Array.new)`</a> . Although I thought it was a issue with my while loops, the problem was indeed how I created the matrix. </p>\n"}, {"tags": ["ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 1, "last_activity_date": 1514867572, "last_edit_date": 1514867572, "creation_date": 1514866713, "answer_id": 48055527, "question_id": 48055488, "link": "https://stackoverflow.com/questions/48055488/ruby-datetime-format-in-activerecord-database/48055527#48055527", "title": "Ruby datetime format in ActiveRecord database", "body": "<p>Try this: </p>\n\n<pre><code>DateTime.now.to_s(:db)\n</code></pre>\n\n<p>Refer here <a href=\"http://api.rubyonrails.org/classes/DateTime.html#method-i-to_formatted_s\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/DateTime.html#method-i-to_formatted_s</a></p>\n\n<p>or</p>\n\n<p>In your model, create a setter method, where \"check_time\" is your database field.</p>\n\n<pre><code>def my_date=(val)\n  DateTime.strptime(val, '%Y%m%d;%H%M%S').strftime('%m/%d/%Y %H:%M:%S') if val.present?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1514871724, "post_id": 48055831, "comment_id": 83084331, "body": "Thank you very much, you are a genius! I have updated my stats check_time to <code>check_time.strftime(&#39;%Y-%m-%d %H:%M&#39;)</code> and it worked like a charm! My output looks now like this: <code>{ stats: { hostname: stat.hostname, cpu: stat.cpu, ram: stat.ram, disk: stat.disk,               check_time: stat.check_time.strftime(&#39;%Y-%m-%d %H:%M&#39;) } }.to_json</code>"}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 2, "last_activity_date": 1514869599, "creation_date": 1514869599, "answer_id": 48055831, "question_id": 48055488, "link": "https://stackoverflow.com/questions/48055488/ruby-datetime-format-in-activerecord-database/48055831#48055831", "title": "Ruby datetime format in ActiveRecord database", "body": "<p>ActiveRecord casts the column to a DateTime object, as extended by ActiveSupport (baked into Rails)</p>\n\n<p>What you're looking for is <code>strftime</code> or <code>to_formatted_s</code> (aliased to <code>to_s</code>.)</p>\n\n<p>Refer here <a href=\"http://api.rubyonrails.org/v5.1/classes/DateTime.html#method-i-to_formatted_s\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/v5.1/classes/DateTime.html#method-i-to_formatted_s</a> and <a href=\"http://foragoodstrftime.com\" rel=\"nofollow noreferrer\">http://foragoodstrftime.com</a></p>\n\n<p>There's no need to mess with ActiveRecord writer methods and you should never do that unless you really know what you're doing. You don't need to save it to the database in a particular format \u2014 a non-standard format at that \u2014 just format it when you need to and keep all the goodies of your database's datetime-esque column.</p>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 1, "last_activity_date": 1514869884, "creation_date": 1514869884, "answer_id": 48055862, "question_id": 48055488, "link": "https://stackoverflow.com/questions/48055488/ruby-datetime-format-in-activerecord-database/48055862#48055862", "title": "Ruby datetime format in ActiveRecord database", "body": "<p>Timestamps (AKA \"<code>datetime</code>\") will have much higher resolution that minutes inside the database so you can't really store <code>2018-01-02 04:57</code> as a timestamp.</p>\n\n<p>The output you're seeing:</p>\n\n<pre><code>2018-01-02T04:43:00.000Z\n</code></pre>\n\n<p>is the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> representation of the timestamp along with all the extra precision and timezone offset (\"Z\" means \"zero\" as Rails likes to use UTC inside the database).</p>\n\n<p>Being able to manipulate the values using the database's date and time functions will probably be useful at some point so a timestamp/datetime is what you want to use inside the database. If you really want <code>YYYY-MM-DD hh:mm</code> as your output format then adjust the output format at the end of your application with <code>strftime</code>:</p>\n\n<pre><code>stat.check_time.strftime('%Y-%m-%d %H:%M') \n</code></pre>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2627, "favorite_count": 0, "accepted_answer_id": 48055831, "answer_count": 3, "score": 1, "last_activity_date": 1514869884, "creation_date": 1514866243, "question_id": 48055488, "link": "https://stackoverflow.com/questions/48055488/ruby-datetime-format-in-activerecord-database", "title": "Ruby datetime format in ActiveRecord database", "body": "<p>I need to save datetime attribute in this format: YYYY-MM-DD HH:SS. I have a datetime field in the database:</p>\n\n<p><code>schema.rb:</code></p>\n\n<pre><code>create_table \"stats\", force: :cascade do |t|\n  ...\n  t.datetime \"check_time\"\nend\n</code></pre>\n\n<p>The data in params looks like this:</p>\n\n<p><code>{\"check_time\"=&gt;\"2018-01-02 04:57\"}</code></p>\n\n<p>however it gets saved as 2018-01-02 04:43:00 UTC in the database:\n<a href=\"https://i.stack.imgur.com/BG55d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BG55d.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Stat.last.check_time #=&gt; check_time: \"2018-01-02 04:43:00\"\n</code></pre>\n\n<p>(so it has seconds on the end)</p>\n\n<p>Then in my <code>\"/status\"</code> endpoint I return the stats as JSON:</p>\n\n<pre><code>get '/status' do\n  { stats: Stat.last }.to_json\nend\n</code></pre>\n\n<p>and check_time then looks like this:</p>\n\n<p><code>\"check_time\":\"2018-01-02T04:43:00.000Z\"</code></p>\n\n<p>What's going on here? Am I missing anything here? Do I have an incorrect data type field in the database?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1514885688, "post_id": 48054589, "comment_id": 83089266, "body": "have you installed <code>devkit</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "is_accepted": false, "score": 2, "last_activity_date": 1514856526, "creation_date": 1514856526, "answer_id": 48054618, "question_id": 48054589, "link": "https://stackoverflow.com/questions/48054589/rails-5-1-4-not-starting-and-giving-me-error-worker-mode-not-supported-on-jruby/48054618#48054618", "title": "Rails 5.1.4 not starting and giving me ERROR: worker mode not supported on JRuby or Windows Exiting", "body": "<p>According to <a href=\"https://github.com/MartinStyk/quotes-recommender/issues/4\" rel=\"nofollow noreferrer\">this</a> issue page for Puma, it can be resolved by commenting out the following line in <code>puma.rb</code>:</p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 2)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9128564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514858316, "creation_date": 1514856206, "last_edit_date": 1514858316, "question_id": 48054589, "link": "https://stackoverflow.com/questions/48054589/rails-5-1-4-not-starting-and-giving-me-error-worker-mode-not-supported-on-jruby", "title": "Rails 5.1.4 not starting and giving me ERROR: worker mode not supported on JRuby or Windows Exiting", "body": "<p>I tried starting my rails server but got the error message below, how can i fix it please</p>\n\n<pre><code>C:\\Sites\\sample_app&gt;rails s\n=&gt; Booting Puma\n=&gt; Rails 5.1.4 application starting in development\n=&gt; Run `rails server -h` for more startup options\n  Please add the following to your Gemfile to avoid polling for changes:\n    gem 'wdm', '&gt;= 0.1.0' if Gem.win_platform?\n  Please add the following to your Gemfile to avoid polling for changes:\n    gem 'wdm', '&gt;= 0.1.0' if Gem.win_platform?\nERROR: worker mode not supported on JRuby or Windows\nExiting\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 4630127, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6eda1870f0d968671bc240de05f68698?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/4630127/dennis"}, "is_accepted": true, "score": 4, "last_activity_date": 1514856062, "last_edit_date": 1514856062, "creation_date": 1514851769, "answer_id": 48054289, "question_id": 48054218, "link": "https://stackoverflow.com/questions/48054218/dbmigrate-not-working-after-cloning-the-source-code/48054289#48054289", "title": "db:migrate not working after cloning the source code", "body": "<p>Try to uninstall bcrypt completely with:</p>\n\n<pre><code>gem uninstall bcrypt-ruby\ngem uninstall bcrypt\n</code></pre>\n\n<p>Be sure all versions are uninstalled, then run</p>\n\n<pre><code>gem install bcrypt --platform=ruby\n</code></pre>\n\n<p>Try to run <code>bundle install</code>. After this worked you could try to run <code>rake db:migrate</code> again.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9128564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 48054289, "answer_count": 1, "score": 0, "last_activity_date": 1514856062, "creation_date": 1514850731, "question_id": 48054218, "link": "https://stackoverflow.com/questions/48054218/dbmigrate-not-working-after-cloning-the-source-code", "title": "db:migrate not working after cloning the source code", "body": "<p>i cloned the sample app from <a href=\"https://bitbucket.org/railstutorial/sample_app_4th_ed\" rel=\"nofollow noreferrer\">https://bitbucket.org/railstutorial/sample_app_4th_ed</a> and followed the instruction there, but <code>rails db:migrate</code> is aborting</p>\n\n<pre><code>C:\\Sites\\sample_app&gt;rails db:migrate\n    rails aborted!\n    LoadError: cannot load such file -- bcrypt_ext\n    C:/Sites/sample_app/config/application.rb:7:in `&lt;top (required)&gt;'\nC:/Sites/sample_app/Rakefile:4:in `require_relative'\nC:/Sites/sample_app/Rakefile:4:in `&lt;top (required)&gt;'\nbin/rails:9:in `require'\nbin/rails:9:in `&lt;main&gt;'\n\nCaused by:\nLoadError: cannot load such file -- 2.3/bcrypt_ext\nC:/Sites/sample_app/config/application.rb:7:in `&lt;top (required)&gt;'\nC:/Sites/sample_app/Rakefile:4:in `require_relative'\nC:/Sites/sample_app/Rakefile:4:in `&lt;top (required)&gt;'\nbin/rails:9:in `require'\nbin/rails:9:in `&lt;main&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1514856531, "post_id": 48054484, "comment_id": 83081588, "body": "Thank you so much! I didn&#39;t realize that JSON is a String. You&#39;ve made my day!"}], "tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 1, "last_activity_date": 1514854746, "creation_date": 1514854746, "answer_id": 48054484, "question_id": 48054018, "link": "https://stackoverflow.com/questions/48054018/testing-sinatra-api-endpoint-with-rspec/48054484#48054484", "title": "Testing Sinatra API endpoint with RSpec", "body": "<p>You are confused by JSON response and Ruby's hash. Your api returns json and in test you have to compare either two json strings or two hashes. For example, to compare using json you can do:</p>\n\n<pre><code>expect(response.body).to eq({ stats: { hostname: \"Home\", cpu: nil, disk: nil, ram: nil, check_time: nil } }.to_json)\n</code></pre>\n\n<p>Or with hashes:</p>\n\n<pre><code>expect(JSON.parse(response.body)).to eq({ \"stats\" =&gt; { \"hostname\" =&gt; \"Home\", \"cpu\" =&gt; nil, \"disk\" =&gt; nil, \"ram\" =&gt; nil, \"check_time\" =&gt; nil } })\n</code></pre>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 48054484, "answer_count": 1, "score": 1, "last_activity_date": 1514854746, "creation_date": 1514848244, "last_edit_date": 1514850545, "question_id": 48054018, "link": "https://stackoverflow.com/questions/48054018/testing-sinatra-api-endpoint-with-rspec", "title": "Testing Sinatra API endpoint with RSpec", "body": "<p>I have a simple Sinatra with an endpoint \"/status\" which returns a JSON that looks like this:</p>\n\n<p><code>curl http://localhost</code></p>\n\n<p><code>{\"stats\":{\"hostname\":\"Home\",\"cpu\":null,\"disk\":null,\"ram\":null,\"check_time\":null}}</code></p>\n\n<p>I am trying to write tests in RSpec to test if the app responds to this endpoint and whether the endpoint returns proper data in a proper format.\nThe endpoint looks like this:</p>\n\n<pre><code>class App &lt; Sinatra::Base\n  @@stat = Stat.new\n\n  def self.stat\n    @@stat\n  end\n\n  get '/status' do\n    { stats: @@stat.to_h }.to_json\n  end\nend\n</code></pre>\n\n<p>The Stat class looks like this:</p>\n\n<pre><code>class Stat\n  attr_accessor :hostname, :cpu, :disk, :ram, :check_time\n\n  @@stat = []\n\n  def initialize(attributes = {})\n    hostname = `hostname`.strip\n    @hostname = hostname\n    @cpu = attributes[:cpu]\n    @disk = attributes[:disk]\n    @ram = attributes[:ram]\n    @check_time = attributes[:check_time]\n  end\n\n  def to_h\n    {\n     hostname: hostname,\n     cpu: cpu,\n     disk: disk,\n     ram: ram,\n     check_time: check_time\n    }\n  end\nend\n</code></pre>\n\n<p>When I do <code>curl http://localhost</code> it returns this:</p>\n\n<p><code>{\"stats\":{\"hostname\":\"Home\",\"cpu\":null,\"disk\":null,\"ram\":null,\"check_time\":null}}</code></p>\n\n<p>I have a problem in a test where I expect this format but get something else:</p>\n\n<pre><code> describe \"GET /status\" do\n    let(:response) { get \"/status\" }\n\n    it \"returns proper JSON\" do\n      expect(response.body).to eq({\"stats\":{\"hostname\":\"Home\",\"cpu\":null,\"disk\":null,\"ram\":null,\"check_time\":null}})\n    end\n end\n</code></pre>\n\n<p>First, it does not like <code>null</code> (although <code>curl</code> command returns <code>null</code>). If I change it to <code>nil</code> then I get this:</p>\n\n<pre><code>expected: {:stats=&gt;{:hostname=&gt;\"Home\", :cpu=&gt;nil, :disk=&gt;nil, :ram=&gt;nil, :check_time=&gt;nil}}\ngot: \"{\\\"stats\\\":{\\\"hostname\\\":\\\"Home\\\",\\\"cpu\\\":null,\\\"disk\\\":null,\\\"ram\\\":null,\\\"check_time\\\":null}}\"\n</code></pre>\n\n<p>When I do \n<code>puts response.body</code> I get this:</p>\n\n<p><code>{\"stats\":{\"hostname\":\"Home\",\"cpu\":null,\"disk\":null,\"ram\":null,\"check_time\":null}}</code></p>\n\n<p>How do I fix this? Sorry if this question may seem improper for some but I still learn to test with RSpec.\nThank you in advance</p>\n"}, {"tags": ["ruby", "xcode", "terminal", "macos-high-sierra", "audiokit"], "answers": [{"comments": [{"owner": {"reputation": 1064, "user_id": 4521827, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6deSV.png?s=128&g=1", "display_name": "caxix", "link": "https://stackoverflow.com/users/4521827/caxix"}, "edited": false, "score": 0, "creation_date": 1514849916, "post_id": 48053917, "comment_id": 83080593, "body": "Yes - you are correct. Frameworks are compiling as I write this ;}"}, {"owner": {"reputation": 535, "user_id": 245855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f15fd730b5ee535b6f9381dade76b6?s=128&d=identicon&r=PG", "display_name": "Tom Schulz", "link": "https://stackoverflow.com/users/245855/tom-schulz"}, "edited": false, "score": 0, "creation_date": 1606368279, "post_id": 48053917, "comment_id": 114944518, "body": "I had this same problem today in 2020. What&#39;s the deeper fix - is there something I don&#39;t have installed ?"}], "tags": [], "owner": {"reputation": 4090, "user_id": 4840476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ynugb.jpg?s=128&g=1", "display_name": "Aurelius Prochazka", "link": "https://stackoverflow.com/users/4840476/aurelius-prochazka"}, "is_accepted": true, "score": 2, "last_activity_date": 1514847235, "creation_date": 1514847235, "answer_id": 48053917, "question_id": 48053744, "link": "https://stackoverflow.com/questions/48053744/cant-build-audiokit-frameworks-under-high-sierra-10-13-x/48053917#48053917", "title": "Can&#39;t build AudioKit frameworks under High Sierra (10.13.x)", "body": "<p>I think you can avoid this problem by editing the lines in build_frameworks.sh:</p>\n\n<pre><code>if which xcpretty &gt; /dev/null 2&gt;&amp;1;\nthen\n    XCPRETTY=xcpretty\nelse\n    XCPRETTY=cat\nfi\n</code></pre>\n\n<p>and just use</p>\n\n<pre><code>XCPRETTY=cat\n</code></pre>\n\n<p>You'll lose the beautified output, but it should work.</p>\n"}], "owner": {"reputation": 1064, "user_id": 4521827, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6deSV.png?s=128&g=1", "display_name": "caxix", "link": "https://stackoverflow.com/users/4521827/caxix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 48053917, "answer_count": 1, "score": 1, "last_activity_date": 1514847235, "creation_date": 1514845513, "question_id": 48053744, "link": "https://stackoverflow.com/questions/48053744/cant-build-audiokit-frameworks-under-high-sierra-10-13-x", "title": "Can&#39;t build AudioKit frameworks under High Sierra (10.13.x)", "body": "<p>I am getting the output below and a stuck terminal session when building AudioKit 4.x frameworks on macOS 10.13.</p>\n\n<pre><code>Building frameworks for platforms: iOS macOS tvOS\n./build_frameworks.sh: /usr/local/bin/xcpretty: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory\n</code></pre>\n\n<p>High Sierra comes with Ruby 2.3 and AudioKit seems to specifically require Ruby 2.0. I can't find exactly where to un-configure this. Other options could involve multiple Ruby installations. Seems more likely though that I am missing something essential. TIA </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 19508, "user_id": 3731614, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PAIKr.jpg?s=128&g=1", "display_name": "Reborn", "link": "https://stackoverflow.com/users/3731614/reborn"}, "edited": false, "score": 0, "creation_date": 1514842638, "post_id": 48053343, "comment_id": 83079094, "body": "just a side note if you share this problem with the rendered <code>HTML</code> rather than server code concatenated, a more range of users might be able to help you as the actual problem is related to javascript"}, {"owner": {"reputation": 5587, "user_id": 8202589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38422395dfead452885eafad3d5e5f84?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan86", "link": "https://stackoverflow.com/users/8202589/ivan86"}, "edited": false, "score": 1, "creation_date": 1514846250, "post_id": 48053343, "comment_id": 83079927, "body": "You cannot have duplicate <code>IDs</code>. There should be only one <code>#itemName</code>. (the <code>#</code> means <code>itemName</code> is an <code>id</code> not a <code>class</code>). Please paste the outputted HTML code."}], "answers": [{"tags": [], "owner": {"reputation": 813, "user_id": 5856233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e07bd193087bc185cef330ce9c9514?s=128&d=identicon&r=PG&f=1", "display_name": "erwan", "link": "https://stackoverflow.com/users/5856233/erwan"}, "is_accepted": false, "score": 0, "last_activity_date": 1514842413, "creation_date": 1514842413, "answer_id": 48053395, "question_id": 48053343, "link": "https://stackoverflow.com/questions/48053343/trouble-clearing-a-specific-form-field-with-jquery/48053395#48053395", "title": "Trouble clearing a specific form field with JQuery", "body": "<p>you can probably reach every element of the form by using the querySelectorAll DOM method:</p>\n\n<pre><code>document.querySelectorAll('form input').forEach(function(element) {\n  element.reset();\n});\n</code></pre>\n\n<p>not sure how to perform it with jquery tho</p>\n"}, {"tags": [], "owner": {"reputation": 217, "user_id": 8662972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/983aa9e2a21470a85dfdb84410f762bb?s=128&d=identicon&r=PG&f=1", "display_name": "Spikerr", "link": "https://stackoverflow.com/users/8662972/spikerr"}, "is_accepted": false, "score": 0, "last_activity_date": 1514864127, "creation_date": 1514864127, "answer_id": 48055308, "question_id": 48053343, "link": "https://stackoverflow.com/questions/48053343/trouble-clearing-a-specific-form-field-with-jquery/48055308#48055308", "title": "Trouble clearing a specific form field with JQuery", "body": "<p>So I was able to solve the problem by grabbing the class .form-inline. </p>\n\n<pre><code>$(\".form-inline\").trigger(\"reset\");\n</code></pre>\n\n<p>This resets just the text box and not the checkboxes. I appreciate all the help.</p>\n"}], "owner": {"reputation": 217, "user_id": 8662972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/983aa9e2a21470a85dfdb84410f762bb?s=128&d=identicon&r=PG&f=1", "display_name": "Spikerr", "link": "https://stackoverflow.com/users/8662972/spikerr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514864127, "creation_date": 1514841823, "question_id": 48053343, "link": "https://stackoverflow.com/questions/48053343/trouble-clearing-a-specific-form-field-with-jquery", "title": "Trouble clearing a specific form field with JQuery", "body": "<p>I am having issues clearing a specific form field using JQuery. I am able to clear the entire form, but that is not what I desire.</p>\n\n<p>Here is the relevant HTML </p>\n\n<pre><code>&lt;article class=\"panel panel-default\" id=\"&lt;%= dom_id(list) %&gt;\"&gt;\n  &lt;div class=\"panel-heading\"&gt;&lt;%= list.name %&gt;&lt;%= link_to %(&lt;span class=\"glyphicon glyphicon-pencil\"&gt;&lt;/span&gt;).html_safe, [:edit, list], remote: true %&gt;&lt;/div&gt;\n\n&lt;%= form_tag(destroy_multiple_list_items_path(list_id: list.id),method: :delete,remote: true) do %&gt;\n  &lt;ul class=\"list-group sortable\" data-update-url=\"&lt;%= sort_list_path(list) %&gt;\"&gt;\n    &lt;%= render list.items %&gt;\n  &lt;/ul&gt;\n\n  &lt;div class=\"panel-footer\"&gt;\n    &lt;%= submit_tag(\"Delete Selected\",  :class =&gt; \"btn btn-danger\") %&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n\n\n  &lt;div class=\"panel-footer\"&gt;\n    &lt;%= form_for [list, Item.new], remote: true, html: { class: \"form-inline\", id: \"#{dom_id(list)}_new_item_form\" } do |f| %&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.text_field :content, class: \"form-control\", id:itemName%&gt;\n      &lt;/div&gt;\n      &lt;%= f.submit \"Add Item\", name: nil, class: \"btn btn-defaultbtn\"%&gt;\n    &lt;% end %&gt;\n\n  &lt;/div&gt;\n\n\n&lt;/article&gt;\n</code></pre>\n\n<p>I am trying to clear the last textfield which has an id of itemName.</p>\n\n<p>I am clearing the form when I render the create view for the item, which would only be rendered upon successful commit of the item. Here is that JQuery</p>\n\n<pre><code>  $(\"#&lt;%= dom_id(@list) %&gt; ul\").append(\"&lt;%=j render 'items/item', item: @item %&gt;\");\n$('#itemName').trigger(\"reset\");\n</code></pre>\n\n<p>Now I was able to clear the form using</p>\n\n<pre><code>$(\"form\").trigger(\"reset\");\n</code></pre>\n\n<p>But that clears all form fields on the entire page, which includes checkboxes. The page contains multiple itemName inputs, and I know that this attempted method will clear ALL of them and not the specific one that was submitted, so I am open to any suggestions on clearing just the single specific itemName that was submitted, but if I can clear atleast only those fields and not the checkboxes as well that would be great. </p>\n\n<p>I appreciate the help.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1514838776, "post_id": 48053032, "comment_id": 83078221, "body": "Do you mean something like <a href=\"http://rubular.com/r/1pmH5lDk7j\" rel=\"nofollow noreferrer\"><code>&#47;\\A[[:alpha:]]{2}\\d{0,13}\\z&#47;</code></a>? Note that <code>[[:alpha:]]{2}</code> matches 2 letters and <code>\\d{0,13}</code> matches 0 to 13 digits."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1514838958, "post_id": 48053032, "comment_id": 83078273, "body": "Hi Wiktor, is it Ruby regular ? cause it seems to fail everything in <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">rubular.com</a> ..."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1514838993, "post_id": 48053032, "comment_id": 83078280, "body": "What does it fail? You might misunderstand Ruby regex anchors. <code>\\A</code> is start of the string, <code>^</code> is a start of the line. <code>\\z</code> is the end of the string, and <code>$</code> is the end of the line. If you test a regex against a multiline string, you need to use <code>^</code> and <code>$</code>, but when using the regex in the real Ruby environment for validation, you need to use correct anchors."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1514839086, "post_id": 48053032, "comment_id": 83078299, "body": "oh ok I clicked your link and it seems to work, but regexp shows <code>^[[:alpha:]]{2}\\d{0,13}$</code> should i use this one ? with /A and /z it seems not to work. but with ^ and $ it works"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1514839164, "post_id": 48053032, "comment_id": 83078322, "body": "Demo is only meant to show how it works. Only a test in the real environment is a valid proof."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1514843254, "post_id": 48053032, "comment_id": 83079230, "body": "@Maxence, you&#39;re right: it doesn&#39;t work with <code>&#47;A</code> and <code>&#47;z</code>. Try <code>\\A</code> and <code>\\z</code>. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1514839648, "post_id": 48053098, "comment_id": 83078429, "body": "Thanks Wiktor, I think mine failed because I forgot the start and end of string (oh and yes the 13 digits limit ^^ but i check the field length also). Thanks for your explanation"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514843707, "post_id": 48053098, "comment_id": 83079331, "body": "Wiktor, it&#39;s curious you used POSIX for the string and <code>\\d</code> for the digits, rather than the POSIX <code>[[:digit:]]</code>. I understand why you used POSIX for the string, and that <code>\\d</code> and <code>[[:digit:]]</code> are equivalent, but still, curious."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514845127, "post_id": 48053098, "comment_id": 83079638, "body": "@CarySwoveland OP mentions <i>letters</i>, so the first thing that came to my mind was an <code>[:alpha:]</code> POSIX character class and the <code>\\p{L}</code> Unicode property/category class. It is of lesser importance here anyway, as it turned out."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 6, "last_activity_date": 1514839302, "creation_date": 1514839302, "answer_id": 48053098, "question_id": 48053032, "link": "https://stackoverflow.com/questions/48053032/regex-for-two-letters-and-up-to-13-digits-incorrectly-accepts-additional-letters/48053098#48053098", "title": "Regex for two letters and up to 13 digits incorrectly accepts additional letters", "body": "<p>You need to use a limiting quantifier with <code>\\d</code> and correct anchors.</p>\n\n<pre><code>/\\A[[:alpha:]]{2}\\d{0,13}\\z/\n</code></pre>\n\n<p>See the <a href=\"http://rubular.com/r/1pmH5lDk7j\" rel=\"noreferrer\">regex demo</a>.</p>\n\n<ul>\n<li><code>\\A</code> - start of the string (note that the <code>^</code> anchor matches the start of the line in Ruby regex)</li>\n<li><code>[[:alpha:]]{2}</code> - 2 letters (to make sure you only allow ASCII letters, use <code>[a-zA-Z]{2}</code>)</li>\n<li><code>\\d{0,13}</code> - 0 to 13 digits</li>\n<li><code>\\z</code> - end of string (note that the <code>$</code> anchor matches the end of the line in Ruby regex).</li>\n</ul>\n"}], "owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 48053098, "answer_count": 1, "score": 1, "last_activity_date": 1514852873, "creation_date": 1514838704, "last_edit_date": 1514852873, "question_id": 48053032, "link": "https://stackoverflow.com/questions/48053032/regex-for-two-letters-and-up-to-13-digits-incorrectly-accepts-additional-letters", "title": "Regex for two letters and up to 13 digits incorrectly accepts additional letters", "body": "<p>I am trying to build a regexp for a model field that follows this rule:</p>\n\n<ul>\n<li>starts with two letters </li>\n<li>can be filled up with digits, up to 13 digits</li>\n</ul>\n\n<p>Valid examples:</p>\n\n<ul>\n<li><code>US333</code></li>\n<li><code>FR52389000</code></li>\n</ul>\n\n<p>Invalid examples:</p>\n\n<ul>\n<li><code>11111</code></li>\n<li><code>T11</code></li>\n</ul>\n\n<p>I thought I found the right regex:</p>\n\n<pre><code>/[a-zA-Z][a-zA-Z]\\d*/\n</code></pre>\n\n<p>But proof testing it with <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">http://rubular.com/</a> seems to validate <code>RR444kjj</code></p>\n\n<p>Can someone point out the mistake?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 25774, "user_id": 1048479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a9b214fab73f4c18ded501d976a2294c?s=128&d=identicon&r=PG", "display_name": "Nick Tomlin", "link": "https://stackoverflow.com/users/1048479/nick-tomlin"}, "edited": false, "score": 0, "creation_date": 1514838970, "post_id": 48053022, "comment_id": 83078275, "body": "You are requiring <code>friendship</code> but not passing it as a param"}, {"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "reply_to_user": {"reputation": 25774, "user_id": 1048479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a9b214fab73f4c18ded501d976a2294c?s=128&d=identicon&r=PG", "display_name": "Nick Tomlin", "link": "https://stackoverflow.com/users/1048479/nick-tomlin"}, "edited": false, "score": 0, "creation_date": 1514839125, "post_id": 48053022, "comment_id": 83078312, "body": "Isn&#39;t that what <code>model: Friendship</code> is doing on the <code>form_with</code>? Sorry if that&#39;s a dumb question... I haven&#39;t gotten a chance to get familiar with <code>form_with</code> yet. I knew I felt like the problem would be there... but I&#39;m just not sure how to do it correctly because documentation is limited."}], "answers": [{"comments": [{"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1514839683, "post_id": 48053096, "comment_id": 83078442, "body": "Also I&#39;m not sure if it was a mistake or not but when you remove the <code>id</code> from the <code>user_friendships_path</code> Rails complains <code>No route matches {:action=&gt;&quot;destroy&quot;, :controller=&gt;&quot;friendships&quot;, :user_id=&gt;1}, missing required keys: [:id]</code>"}], "tags": [], "owner": {"reputation": 384, "user_id": 2675681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b84c69f94a51e91af17b5d0ddef44e6?s=128&d=identicon&r=PG&f=1", "display_name": "mgidea", "link": "https://stackoverflow.com/users/2675681/mgidea"}, "is_accepted": false, "score": 1, "last_activity_date": 1514843659, "last_edit_date": 1514843659, "creation_date": 1514839294, "answer_id": 48053096, "question_id": 48053022, "link": "https://stackoverflow.com/questions/48053022/rails-5-1-strong-parameters-deprecated/48053096#48053096", "title": "Rails 5.1 strong parameters deprecated?", "body": "<p>The route is a nested resource, so you should provide two arguments to the path.  you also need to provide the scope to give it the \"friendship\" key in the params.</p>\n\n<pre><code>&lt;%= form_with scope: :friendship, url: user_friendship_path(current_user, other_user), method: :delete do |f| %&gt;\n\n  &lt;button class='button'&gt;&lt;/button&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "is_accepted": false, "score": 0, "last_activity_date": 1514869297, "last_edit_date": 1514869297, "creation_date": 1514867508, "answer_id": 48055601, "question_id": 48053022, "link": "https://stackoverflow.com/questions/48053022/rails-5-1-strong-parameters-deprecated/48055601#48055601", "title": "Rails 5.1 strong parameters deprecated?", "body": "<p>The answer was that the arguments to the <code>form_with</code> don't pass the actually parameters to the <strong>key</strong> <code>Friendship</code>, we have to pass them manually within the body of the form.</p>\n\n<pre><code>&lt;%= form_with model: Friendship, url: \n  user_friendship_path(\n    current_user, other_user\n  ), method: :delete do |f| %&gt;\n\n  &lt;%= f.hidden_field :id, value: other_user.id %&gt;\n\n  &lt;button class='button'&gt;&lt;/button&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1514869193, "post_id": 48055650, "comment_id": 83083767, "body": "Dude, haha I originally had it set up this way.  I agree, it&#39;s definitely simpler this way, but I felt like a friendship naturally corresponds to a user, so it SHOULD be a nested route...   What are you thoughts on that?"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1514868003, "creation_date": 1514868003, "answer_id": 48055650, "question_id": 48053022, "link": "https://stackoverflow.com/questions/48053022/rails-5-1-strong-parameters-deprecated/48055650#48055650", "title": "Rails 5.1 strong parameters deprecated?", "body": "<p>This code is little bit confusing, I suggesting the way for simple like change your route like below</p>\n\n<pre><code>resources :users do\n  resources :friendships\nend\n</code></pre>\n\n<p>Change to </p>\n\n<pre><code>resources :users\nresources :friendships\n</code></pre>\n\n<p>and on the view </p>\n\n<pre><code>&lt;%= link_to \"Remove Friend\", friendship_path(friend_id), method: :delete, data: {confirm: \"Are you sure\"}, class: \"btn btn-xs btn-danger\" %&gt;\n</code></pre>\n\n<p>and finally the controller</p>\n\n<pre><code>def destroy\n    @friendship = current_user.friendships.where(friend_id: params[:id]).first\n    @friendship.destroy\n    flash[:notice] = \"Friend was removed\"\n    redirect_to(my_friends_path)\nend\n</code></pre>\n\n<p>Hope to help</p>\n"}], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1514869297, "creation_date": 1514838623, "last_edit_date": 1514840668, "question_id": 48053022, "link": "https://stackoverflow.com/questions/48053022/rails-5-1-strong-parameters-deprecated", "title": "Rails 5.1 strong parameters deprecated?", "body": "<h1>I'm working on using <code>form_with</code> in Rails 5.1.3 &amp; Ruby 2.3.0</h1>\n\n<p>The best documentation I've found is here</p>\n\n<h3><a href=\"https://github.com/rails/rails/blob/21cd5b3031b0c022439a88cb750c1e00cd07f1e3/actionview/lib/action_view/helpers/form_helper.rb\" rel=\"nofollow noreferrer\">Rails Github Repo</a> on line 533, but it's still unclear to me.</h3>\n\n<pre><code># The parameters in the forms are accessible in controllers according to\n# their name nesting. So inputs named +title+ and &lt;tt&gt;post[title]&lt;/tt&gt; are\n# accessible as &lt;tt&gt;params[:title]&lt;/tt&gt; and &lt;tt&gt;params[:post][:title]&lt;/tt&gt;\n# respectively.\n</code></pre>\n\n<h1>Code:</h1>\n\n<pre><code># friendships_controller.rb\n...\nprivate\n\ndef friendship_params\n  params.require(:friendship).permit(:user_id, :id)\nend\n\n# Works\ndef destroy\n  Friendship.remove_friend(current_user.id, params[:id].to_i)\nend\n\n# Doesn't work\ndef destroy\n  Friendship.remove_friend(friendship_params[:user_id].to_i, friendship_params[:id].to_i)\nend\n\n\n# form_with \n&lt;%= form_with model: Friendship, \n      url: user_friendship_path(\n        user_id: current_user.id\n        id: other_user.id, \n      ), method: :delete do |f| %&gt;\n\n  &lt;button class='button'&gt;&lt;/button&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>I know the naming is a little confusing, I still haven't figured out how to get <code>form_with</code> to map correctly to the route I need.\n<code>friendships#destroy</code> located at path\n<code>/users/:user_id/friendships/:id(.:format)</code> </p>\n\n<pre><code>resources :users do\n  resources :friendships\nend\n</code></pre>\n\n<h1>Error Message</h1>\n\n<pre><code>Started DELETE \"/users/1/friendships/8\" for 127.0.0.1 at 2018-01-02 03:21:40 +0700\nProcessing by FriendshipsController#destroy as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\",     \"authenticity_token\"=&gt;\"fWnYwpNDItctgg3q/TYIXy5VRO55nwQRINCCykMsDPAFBfwJKjMZ1dneNbg    5yFNHaQP+lXR4ViTje6mK+dCmVg==\", \"user_id\"=&gt;\"1\", \"id\"=&gt;\"8\"}\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT     $2  [[\"id\", 1], [\"LIMIT\", 1]]\n   (0.2ms)  BEGIN\n   (0.1ms)  COMMIT\n  Friendship Load (1.0ms)  SELECT  \"friendships\".* FROM \"friendships\" WHERE     \"friendships\".\"friend_id\" = $1 AND \"friendships\".\"user_id\" = $2 ORDER BY     \"friendships\".\"id\" ASC LIMIT $3  [[\"friend_id\", 1], [\"user_id\", 8], [\"LIMIT\", 1]]\n  SQL (1.2ms)  DELETE FROM \"friendships\" WHERE \"friendships\".\"id\" = $1  [[\"id\",     499]]\n  Friendship Load (0.5ms)  SELECT  \"friendships\".* FROM \"friendships\" WHERE     \"friendships\".\"friend_id\" = $1 AND \"friendships\".\"user_id\" = $2 ORDER BY     \"friendships\".\"id\" ASC LIMIT $3  [[\"friend_id\", 8], [\"user_id\", 1], [\"LIMIT\", 1]]\n  SQL (0.9ms)  DELETE FROM \"friendships\" WHERE \"friendships\".\"id\" = $1  [[\"id\",     498]]\nCompleted 400 Bad Request in 13ms (ActiveRecord: 4.2ms)\n\n\n\nActionController::ParameterMissing (param is missing or the value is empty:     friendship):\n\napp/controllers/friendships_controller.rb:40:in `friendship_params'\napp/controllers/friendships_controller.rb:22:in `destroy'\n</code></pre>\n\n<p>Maybe I shouldn't say it doesn't work, the behavior is how I expect with or without the <code>friendship_params</code>. However, the server logs returning a <code>400 Bad Request</code> is a red flag to me.</p>\n\n<h3>Thanks for any suggestions in advance~!</h3>\n"}, {"tags": ["ruby", "arm", "delay", "sleep"], "comments": [{"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1514975616, "post_id": 48052099, "comment_id": 83124785, "body": "I suspect the problem is more that you&#39;re running a multitasking OS, and as such have no way to choose how long a sleep is over a minimum amount of time. Whether a C implementation will behave any differently is down to the OS. This type of task, where timing is critical is best handled by a bare metal, or RTOS programmed microcontroller, rather than a general purpose machine running a full fledged OS. I would handle it with a cheap micro (cortex M0, or a tiny PIC), have that talk to the DHT11, and communicate with your orange pi via a serial link."}, {"owner": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "reply_to_user": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1515080627, "post_id": 48052099, "comment_id": 83172378, "body": "@Colin__s thanks for the reply. I will look into that option. I asked this question because there are C libraries and even a ruby gem based off a C library (<a href=\"https://github.com/chetan/dht-sensor-ffi\" rel=\"nofollow noreferrer\">github.com/chetan/dht-sensor-ffi</a>) that are able to interpret the sensor. I was just curious if I could achieve the same resolution timings as C to implement the protocol in pure ruby."}], "owner": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1514830575, "creation_date": 1514830575, "question_id": 48052099, "link": "https://stackoverflow.com/questions/48052099/fine-resolution-delays", "title": "Fine resolution delays", "body": "<p>Is there a better method than <code>sleep</code> in Ruby to implement fine/high resolution delays?</p>\n\n<p>I am wanting to implement the DHT11 sensor protocol in pure ruby and I can not get consistent delays with the native <code>sleep</code> method.</p>\n\n<p>The delays in question are as high as 20 milliseconds down to 40 microseconds.</p>\n\n<p>To test these delays I am running a simple delta time calculation as follows:</p>\n\n<pre><code>irb(main):043:0&gt; # 20ms delays are fine\nirb(main):044:0* 5.times do\nirb(main):045:1*   t1 = Time.now.to_f\nirb(main):046:1&gt;   sleep 0.02\nirb(main):047:1&gt;   t2 = Time.now.to_f\nirb(main):048:1&gt;   puts t2 - t1\nirb(main):049:1&gt; end\n0.02004218101501465\n0.021020889282226562\n0.020302772521972656\n0.020184040069580078\n0.020570993423461914\n\nirb(main):050:0&gt; # 40us delays are inconsistant and/or broken\nirb(main):051:0* 5.times do\nirb(main):052:1*   t1 = Time.now.to_f\nirb(main):053:1&gt;   sleep 0.00004\nirb(main):054:1&gt;   t2 = Time.now.to_f\nirb(main):055:1&gt;   puts t2 - t1\nirb(main):056:1&gt; end\n0.0\n0.0\n0.0005059242248535156\n0.0\n0.0\n</code></pre>\n\n<p>Is this protocol which depends on microsecond delays possible to implement in Ruby?</p>\n\n<p>The build being tested on is <code>ruby 2.3.1p112 (2016-04-26 revision 54768) [i386-mingw32]</code> and was running on <code>Windows 10</code>. Although when running the same tests on an H2 CPU with <code>ruby 2.3.1p112 (2016-04-26) [arm-linux-gnueabihf]\n</code> on <code>Linux orangepizero 4.13.16-sunxi #20 SMP Fri Nov 24 19:50:07 CET 2017 armv7l armv7l armv7l GNU/Linux</code> on the development board I am going to be using the sensors with I get some finer resolution outcomes but the result is still inconsistent:</p>\n\n<pre><code>irb(main):001:0&gt; # 20ms delays are fine\nirb(main):002:0* 5.times do\nirb(main):003:1*   t1 = Time.now.to_f\nirb(main):004:1&gt;   sleep 0.02\nirb(main):005:1&gt;   t2 = Time.now.to_f\nirb(main):006:1&gt;   puts t2 - t1\nirb(main):007:1&gt; end\n0.020125150680541992\n0.020093679428100586\n0.020082950592041016\n0.020090341567993164\n0.020081043243408203\n\n\nirb(main):008:0&gt; # 40us delays are inconsistant and/or broken\nirb(main):009:0* 5.times do\nirb(main):010:1*   t1 = Time.now.to_f\nirb(main):011:1&gt;   sleep 0.00004\nirb(main):012:1&gt;   t2 = Time.now.to_f\nirb(main):013:1&gt;   puts t2 - t1\nirb(main):014:1&gt; end\n0.0003037452697753906\n0.00022101402282714844\n0.00022673606872558594\n0.0002200603485107422\n0.00021409988403320312\n</code></pre>\n\n<p>Will this ever be possible or am I looking to have to write or use someone else C implementation and then call it from Ruby?</p>\n"}, {"tags": ["python", "ruby", "dictionary"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 5, "creation_date": 1514826025, "post_id": 48051564, "comment_id": 83074876, "body": "So what have you tried? This isn&#39;t a code translation service. And that output isn&#39;t Python."}, {"owner": {"reputation": 10577, "user_id": 5446749, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fzsuf.jpg?s=128&g=1", "display_name": "vinzee", "link": "https://stackoverflow.com/users/5446749/vinzee"}, "edited": false, "score": 0, "creation_date": 1514826066, "post_id": 48051564, "comment_id": 83074892, "body": "Isn&#39;t the result more like <code>{&quot;Randy&quot;: [&quot;Input.txt&quot;, &quot;Output.txt&quot;], &quot;Stan&quot;: [&quot;Code.py&quot;]}</code> ?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1514834145, "post_id": 48051564, "comment_id": 83077088, "body": "There is still no Python code in your question, so... <i>what</i> is what you have tried?"}], "answers": [{"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1514827068, "post_id": 48051599, "comment_id": 83075178, "body": "Come on, you&#39;ve had over a year to update to Python 3.6 :-P"}, {"owner": {"reputation": 39519, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1514827337, "post_id": 48051599, "comment_id": 83075250, "body": "@StefanPochmann Still I mostly work on Python 2.7, and sometime on 3.4.5 due to old official projects (we haven&#39;t migrated them yet). After reading your comment, I explored a bit and updated the answer. Thanks! :)"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1514827752, "post_id": 48051599, "comment_id": 83075367, "body": "In Ruby insertion order is maintained."}, {"owner": {"reputation": 39519, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1514833661, "post_id": 48051599, "comment_id": 83076978, "body": "@steenslag added an example of ordered dictionaries too"}, {"owner": {"reputation": 19, "user_id": 8313719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2c656cf8fe2829fda238706a6e7ff4?s=128&d=identicon&r=PG", "display_name": "beelarr", "link": "https://stackoverflow.com/users/8313719/beelarr"}, "edited": false, "score": 1, "creation_date": 1514834932, "post_id": 48051599, "comment_id": 83077318, "body": "@MoinuddinQuadri Thanks for the detailed explanation!!"}], "tags": [], "owner": {"reputation": 39519, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 1, "last_activity_date": 1514834087, "last_edit_date": 1514834087, "creation_date": 1514826304, "answer_id": 48051599, "question_id": 48051564, "link": "https://stackoverflow.com/questions/48051564/reordering-an-dict-object-and-shoveling-multiple-keys-into-an-array-of-values/48051599#48051599", "title": "Reordering an &quot;dict&quot; Object and shoveling multiple keys into an array of values (swap key-values in dictionary) | Ruby to Python", "body": "<p>In Python, your mentioned data structure is known as dictionary (<a href=\"https://docs.python.org/3/library/functions.html#func-dict\" rel=\"nofollow noreferrer\"><strong><code>dict</code></strong></a> in terms of code) and is syntactically represented as:</p>\n\n<pre><code>files = {\n   'Input.txt': 'Randy',\n   'Code.py': 'Stan',\n   'Output.txt': 'Randy'\n}\n</code></pre>\n\n<p>In order to swap the key and values of your <code>dict</code>, you may use <a href=\"https://docs.python.org/dev/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\"><strong><code>collections.defaultdict</code></strong></a> as:</p>\n\n<pre><code>from collections import defaultdict\n\nswapped_dict = defaultdict(list)\n\nfor key, value in files.items():\n    swapped_dict[value].append(key) \n</code></pre>\n\n<p>where <code>swapped_dict</code> is a <code>dict</code> object holding the value:</p>\n\n<pre><code>{\n    'Randy': ['Output.txt', 'Input.txt'],\n    'Stan': ['Code.py']\n}\n</code></pre>\n\n<p><strong>Note:</strong> Ruby maintains the order, but in Python version &lt; 3.6, the <code>dict</code> objects are unordered in nature. However, <a href=\"https://stackoverflow.com/questions/39980323/are-dictionaries-ordered-in-python-3-6\">from Python version >= 3.6, <code>dict</code> objects are now ordered in nature</a>.</p>\n\n<p>For Python versions &lt; 3.6, we have <a href=\"https://docs.python.org/dev/library/collections.html#collections.OrderedDict\" rel=\"nofollow noreferrer\"><strong><code>collections.OrderedDict</code></strong></a> which maintains the order in which keys are inserted. Here's an example to show the swapping of key/value pairs:</p>\n\n<pre><code>from collections import OrderedDict\n\n# for maintaining the order, your initial list \n# should also be of the type `OrderedDict`\nold_dict = OrderedDict([('Input.txt', 'Randy'), ('Code.py', 'Stan'), ('Output.txt', 'Randy')])\n\nfor k, v in old_dict.items():\n    new_dict.setdefault(v, []).append(k)\n    # You may use `setdefault` on normal dictionaries too\n</code></pre>\n\n<p>which will return <code>dict</code> object as: </p>\n\n<pre><code>&gt;&gt;&gt; new_dict\nOrderedDict([('Randy', ['Input.txt', 'Output.txt']), ('Stan', ['Code.py'])])\n</code></pre>\n\n<p>It is just represented like this, you can access <code>new_dict</code> like a normal dictionary object.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1514829073, "post_id": 48051621, "comment_id": 83075713, "body": "Dicts will be ordered as of two weeks ago: <a href=\"https://mail.python.org/pipermail/python-dev/2017-December/151283.html\" rel=\"nofollow noreferrer\">mail.python.org/pipermail/python-dev/2017-December/151283.ht&zwnj;&#8203;ml</a> This will become part of the Python 3.7 spec, and all conforming implementations of Python 3.7 must implement it."}, {"owner": {"reputation": 2781, "user_id": 3607488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80AQe.jpg?s=128&g=1", "display_name": "Mark Mishyn", "link": "https://stackoverflow.com/users/3607488/mark-mishyn"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1514829905, "post_id": 48051621, "comment_id": 83075950, "body": "@J&#246;rgWMittag thank you. Updated."}], "tags": [], "owner": {"reputation": 2781, "user_id": 3607488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80AQe.jpg?s=128&g=1", "display_name": "Mark Mishyn", "link": "https://stackoverflow.com/users/3607488/mark-mishyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1514829872, "last_edit_date": 1514829872, "creation_date": 1514826478, "answer_id": 48051621, "question_id": 48051564, "link": "https://stackoverflow.com/questions/48051564/reordering-an-dict-object-and-shoveling-multiple-keys-into-an-array-of-values/48051621#48051621", "title": "Reordering an &quot;dict&quot; Object and shoveling multiple keys into an array of values (swap key-values in dictionary) | Ruby to Python", "body": "<pre><code>def group_by_owners(files: dict): -&gt; dict\n    res = {v: [] for v in files.values() }\n    for k, v in files.items():\n        res[v].append(k)\n    return res\n</code></pre>\n\n<p><strong>Note:</strong> in Python dicts are unordered (until 3.7 version).</p>\n"}, {"tags": [], "owner": {"reputation": 2168, "user_id": 8709791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P8fHX.jpg?s=128&g=1", "display_name": "srikavineehari", "link": "https://stackoverflow.com/users/8709791/srikavineehari"}, "is_accepted": false, "score": 0, "last_activity_date": 1514830990, "last_edit_date": 1514830990, "creation_date": 1514829294, "answer_id": 48051934, "question_id": 48051564, "link": "https://stackoverflow.com/questions/48051564/reordering-an-dict-object-and-shoveling-multiple-keys-into-an-array-of-values/48051934#48051934", "title": "Reordering an &quot;dict&quot; Object and shoveling multiple keys into an array of values (swap key-values in dictionary) | Ruby to Python", "body": "<p>This is a dictionary version of <code>files</code> in Python:</p>\n\n<pre><code>files = {'Input.txt': 'Randy',\n         'Code.py': 'Stan',\n         'Output.txt' : 'Randy'}\n</code></pre>\n\n<p><code>files.items()</code> returns:</p>\n\n<p><code>dict_items([('Input.txt', 'Randy'), ('Code.py', 'Stan'), ('Output.txt', 'Randy')])</code></p>\n\n<pre><code>def group_by_owners(files):    \n    result = dict() # empty dict\n\n    for k, v in files.items(): \n        if v in result:\n            result[v].append(k) # Append to list value if the key is in result\n        else:\n            result[v] = [k]  # Add key: value        \n\n    return result\n\n\nprint(group_by_owners(files))\n# {'Randy': ['Input.txt', 'Output.txt'], 'Stan': ['Code.py']}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8313719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2c656cf8fe2829fda238706a6e7ff4?s=128&d=identicon&r=PG", "display_name": "beelarr", "link": "https://stackoverflow.com/users/8313719/beelarr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1514885173, "answer_count": 3, "score": 0, "last_activity_date": 1514834779, "creation_date": 1514825972, "last_edit_date": 1514834779, "question_id": 48051564, "link": "https://stackoverflow.com/questions/48051564/reordering-an-dict-object-and-shoveling-multiple-keys-into-an-array-of-values", "closed_reason": "Needs more focus", "title": "Reordering an &quot;dict&quot; Object and shoveling multiple keys into an array of values (swap key-values in dictionary) | Ruby to Python", "body": "<p>This is my Ruby code. I want to convert this function to a Python 3 equivalent.   </p>\n\n<pre><code>files = {\n  'Input.txt' =&gt; 'Randy',\n  'Code.py' =&gt; 'Stan',\n  'Output.txt' =&gt; 'Randy'\n}    \n\ndef group_by_owners(files)\n  files.each_with_object({}) { |(key, value), new_hash| (new_hash[value] ||= []) &lt;&lt; key }\nend\n\nputs group_by_owners(files)\n</code></pre>\n\n<p>The Ruby result looks like this:</p>\n\n<pre><code>{\"Randy\" =&gt; [\"Input.txt\", \"Output.txt\"], \"Stan\" =&gt; [\"Code.py\"]}\n</code></pre>\n\n<p>Python would be:</p>\n\n<pre><code>{\"Randy\": [\"Input.txt\", \"Output.txt\"], \"Stan\": [\"Code.py\"]}\n</code></pre>\n\n<p>Here is what I have tried: </p>\n\n<pre><code>def group_by_owners(files):\n  new_dict = dict(zip(files.values(), (files.keys())))\n  print(new_dict)\n</code></pre>\n\n<p>Then I was trying to append the keys to an array.</p>\n\n<pre><code>def group_by_owners(files):\n  keys_array = []\n  new_dict = dict(zip(files.values(), keys_array.append((files.keys()))))\n</code></pre>\n\n<p>but I don't think that will work inside of a zip method. </p>\n"}, {"tags": ["ruby", "rake", "testunit"], "comments": [{"owner": {"reputation": 487, "user_id": 1212793, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VTr5Z.jpg?s=128&g=1", "display_name": "bgottlob", "link": "https://stackoverflow.com/users/1212793/bgottlob"}, "edited": false, "score": 0, "creation_date": 1515021820, "post_id": 48050970, "comment_id": 83148103, "body": "I don&#39;t know of a clean way to do this using only Ruby. You can wrap your <code>Timeout</code> call in a <code>begin</code>/<code>rescue</code> block to catch the exception it throws and use one of the <code>bash</code> solutions proposed here <a href=\"https://stackoverflow.com/questions/6930157/run-and-stop-rake-task-from-ruby-file\" title=\"run and stop rake task from ruby file\">stackoverflow.com/questions/6930157/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 1, "creation_date": 1607716437, "post_id": 48140866, "comment_id": 115369649, "body": "Where do you put it?"}], "tags": [], "owner": {"reputation": 166, "user_id": 3669012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f4111b19296d57bf43ddfa7710774500?s=128&d=identicon&r=PG&f=1", "display_name": "Deddy", "link": "https://stackoverflow.com/users/3669012/deddy"}, "is_accepted": true, "score": 0, "last_activity_date": 1515354078, "creation_date": 1515354078, "answer_id": 48140866, "question_id": 48050970, "link": "https://stackoverflow.com/questions/48050970/set-timeout-to-ruby-testunit-run/48140866#48140866", "title": "Set timeout to ruby Test::unit run", "body": "<p>This code adds a timeout for entire suite:</p>\n\n<pre><code>def self.suite\n    mysuite = super\n    def mysuite.run(*args)\n        Timeout::timeout(600) do\n            super\n        end\n    end\n    mysuite\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1313, "user_id": 190234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3d9bb0e523bb177965cf82fcf35402cf?s=128&d=identicon&r=PG", "display_name": "Marcin Raczkowski", "link": "https://stackoverflow.com/users/190234/marcin-raczkowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1574105937, "last_edit_date": 1574105937, "creation_date": 1573125211, "answer_id": 58747566, "question_id": 48050970, "link": "https://stackoverflow.com/questions/48050970/set-timeout-to-ruby-testunit-run/58747566#58747566", "title": "Set timeout to ruby Test::unit run", "body": "<p>I've been looking for something similar, and ended up writing this:</p>\n\n<pre><code>require 'timeout'\n\n# Provides an individual timeout for every test.\n#\n# In general tests should run for less then 1s so 5s is quite a generous timeout.\n#\n# Timeouts can be overridden per-class (in rare cases where tests should take more time)\n# by setting for example `self.test_timeout = 10 #s`\nmodule TestTimeoutHelper\n  def self.included(base)\n    class &lt;&lt; base\n      attr_accessor :test_timeout\n    end\n\n    base.test_timeout = 5 # s\n  end\n\n  # This overrides the default minitest behaviour of measuring time, with extra timeout :)\n  # This helps out with: (a) keeping tests fast :) (b) detecting infinite loops\n  #\n  # In general however benchmarks test should be used instead.\n  # Timeout is very unreliable by the way but in general works.\n  def time_it\n    t0 = Minitest.clock_time\n\n    Timeout.timeout(self.class.test_timeout, Timeout::Error, 'Test took to long (infinite loop?)') do\n      yield\n    end\n  ensure\n    self.time = Minitest.clock_time - t0\n  end\nend\n</code></pre>\n\n<p>This module should be included into either specific test cases, or a general test case.</p>\n\n<p>It works with a MiniTest 5.x</p>\n"}], "owner": {"reputation": 166, "user_id": 3669012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f4111b19296d57bf43ddfa7710774500?s=128&d=identicon&r=PG&f=1", "display_name": "Deddy", "link": "https://stackoverflow.com/users/3669012/deddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 48140866, "answer_count": 2, "score": 2, "last_activity_date": 1574105937, "creation_date": 1514821287, "question_id": 48050970, "link": "https://stackoverflow.com/questions/48050970/set-timeout-to-ruby-testunit-run", "title": "Set timeout to ruby Test::unit run", "body": "<p>I am using a rake task to run tests written in Ruby.\nThe rake task:</p>\n\n<pre><code>desc \"This Run Tests on my ruby app\"\nRake::TestTask.new do |t|\n  t.libs &lt;&lt; File.dirname(__FILE__)\n  t.test_files = FileList['test*.rb']\n  t.verbose = true\nend\n</code></pre>\n\n<p>I would like to create a timeout so that if any test (or the entire suite) hangs a timeout exception will be thrown and the test will fail.</p>\n\n<p>I tried to create a new task that would run the test task with a timeout:</p>\n\n<pre><code>desc \"Run Tests with timeout\"\ntask :run_tests do\n  Timeout::timeout(200) do\n    Rake::Task['test'].invoke\n  end\nend\n</code></pre>\n\n<p>The result was that a timeout was thrown, but the test continued to run.</p>\n"}, {"tags": ["ruby", "linux", "gcc", "gnu-make"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2118504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7922e47eba423192424d1772cd830588?s=128&d=identicon&r=PG", "display_name": "Satnami", "link": "https://stackoverflow.com/users/2118504/satnami"}, "edited": false, "score": 0, "creation_date": 1514822870, "post_id": 48051134, "comment_id": 83074048, "body": "thanks, I just updated the question, /bin is included and echo is running well in /bin/sh"}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1514825866, "post_id": 48051134, "comment_id": 83074832, "body": "This seems to be more a request for clarification (and so should be a comment) rather than an answer.  At least, this answer now appears in the LQP review queue so I&#39;m probably not the only person to think that."}], "tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": false, "score": 1, "last_activity_date": 1514822513, "creation_date": 1514822513, "answer_id": 48051134, "question_id": 48050901, "link": "https://stackoverflow.com/questions/48050901/configure-make-echo-command-not-found/48051134#48051134", "title": "configure: make: echo: Command not found", "body": "<p>It's better to include at least the relevant info here, such as what operating system and OS release you're using.  From the gist output it seems you're using some version of GNU/Linux.  If we knew which distribution (for example, Ubuntu) we could be more helpful.</p>\n\n<p>Maybe you don't have <code>echo</code> available... what is your <code>PATH</code> set to?  On many systems, <code>echo</code> lives in <code>/bin/echo</code> so make sure you have <code>/bin</code> on your <code>PATH</code>.</p>\n\n<p>Note that running <code>echo foo</code> in your shell is <em>not</em> good enough, because your shell is likely bash which has a built-in echo.  However, make will run <code>/bin/sh</code> not bash, and <code>/bin/sh</code> may be something like dash which doesn't have a built-in echo (depending on which Linux distribution you're using).</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2118504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7922e47eba423192424d1772cd830588?s=128&d=identicon&r=PG", "display_name": "Satnami", "link": "https://stackoverflow.com/users/2118504/satnami"}, "is_accepted": true, "score": 1, "last_activity_date": 1514826549, "creation_date": 1514826549, "answer_id": 48051626, "question_id": 48050901, "link": "https://stackoverflow.com/questions/48050901/configure-make-echo-command-not-found/48051626#48051626", "title": "configure: make: echo: Command not found", "body": "<p>The issue was because of missing file which is</p>\n\n<blockquote>\n  <p>/bin/echo</p>\n</blockquote>\n\n<p>related to \n<a href=\"https://stackoverflow.com/questions/11675070/makefile-echo-n-not-working\">Makefile `echo -n&#39; not working</a></p>\n"}], "owner": {"reputation": 11, "user_id": 2118504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7922e47eba423192424d1772cd830588?s=128&d=identicon&r=PG", "display_name": "Satnami", "link": "https://stackoverflow.com/users/2118504/satnami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1820, "favorite_count": 0, "accepted_answer_id": 48051626, "answer_count": 2, "score": 0, "last_activity_date": 1514826549, "creation_date": 1514820717, "last_edit_date": 1514826112, "question_id": 48050901, "link": "https://stackoverflow.com/questions/48050901/configure-make-echo-command-not-found", "title": "configure: make: echo: Command not found", "body": "<p>When I try to install Ruby from source, no matter what the version is, I am getting the following error.</p>\n\n<pre><code>$ ./configure\n\n\n\n....\n....\nchecking whether gcc needs -traditional... no\nchecking for ld... ld\nchecking whether the linker is GNU ld... yes\nchecking whether gcc -E accepts -o... yes\nchecking for ranlib... ranlib\nchecking for ar... ar\nchecking for as... as\nchecking for objdump... objdump\nchecking for objcopy... objcopy\nchecking for nm... nm\nchecking whether ln -s works... yes\nchecking whether make sets $(MAKE)... no\n....\n....\n....\nchecking if make is GNU make... make: echo: Command not found\nmake: *** [all] Error 127\nno\nchecking for safe null command for make... :\nchecking for nroff... /usr/bin/nroff`\n</code></pre>\n\n<p>I tried to fix the error by installing <code>gcc</code> and <code>g++</code> but that doesn't help.</p>\n\n<p>The full detailed log available here: <a href=\"https://gist.github.com/satnami/8ac0688c287a8d5c859c5ba064d9bfca\" rel=\"nofollow noreferrer\">https://gist.github.com/satnami/8ac0688c287a8d5c859c5ba064d9bfca</a></p>\n\n<h3>Extra details</h3>\n\n<p><strong>Linux version</strong>: </p>\n\n<p><code>Linux version 4.4.0-104-generic(buildd@lgw01-amd64-030 (gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3) )</code></p>\n\n<p><strong>gcc version</strong>: </p>\n\n<p><code>gcc version 4.8.5 (Ubuntu 4.8.5-2ubuntu1~14.04.1)</code></p>\n\n<p><strong>OpenssL version</strong>: </p>\n\n<p><code>OpenSSL 1.0.2g-fips  1 Mar 2016</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "split"], "comments": [{"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "reply_to_user": {"reputation": 132837, "user_id": 872395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fda7547e45dc39d83202c20e7786ef0?s=128&d=identicon&r=PG", "display_name": "nemesv", "link": "https://stackoverflow.com/users/872395/nemesv"}, "edited": false, "score": 0, "creation_date": 1514812558, "post_id": 48049938, "comment_id": 83071613, "body": "@nemesv Thanks. Is there any way I can achieve the same in ruby? Any idea?"}, {"owner": {"reputation": 132837, "user_id": 872395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fda7547e45dc39d83202c20e7786ef0?s=128&d=identicon&r=PG", "display_name": "nemesv", "link": "https://stackoverflow.com/users/872395/nemesv"}, "edited": false, "score": 1, "creation_date": 1514813481, "post_id": 48049938, "comment_id": 83071830, "body": "Spring#Split support regex so you just need to take the pattern from the linked question: <code>&quot;id,name,t&#173;itle(first&#173;_name,last&#173;_name)&quot;.sp&#173;lit(&#47;,(?![&#173;^(]*\\&zwnj;&#8203;))&#47;)</code>"}, {"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "reply_to_user": {"reputation": 132837, "user_id": 872395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fda7547e45dc39d83202c20e7786ef0?s=128&d=identicon&r=PG", "display_name": "nemesv", "link": "https://stackoverflow.com/users/872395/nemesv"}, "edited": false, "score": 0, "creation_date": 1514813730, "post_id": 48049938, "comment_id": 83071897, "body": "Many Thanks @nemsev"}, {"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "reply_to_user": {"reputation": 132837, "user_id": 872395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fda7547e45dc39d83202c20e7786ef0?s=128&d=identicon&r=PG", "display_name": "nemesv", "link": "https://stackoverflow.com/users/872395/nemesv"}, "edited": false, "score": 0, "creation_date": 1514820048, "post_id": 48049938, "comment_id": 83073342, "body": "@nemesv above regex is failing with following string input: &quot;id,name,title(first_name,last_name,address(street,pincode(i&zwnj;&#8203;d,code)))&quot; Do you have any idea how to resolve it?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1514825916, "post_id": 48049938, "comment_id": 83074847, "body": "@fidato Don&#39;t use a regex. You&#39;re trying to parse a nested data structure, not split a string by a delimiter. Regex is the wrong tool for this job."}, {"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1514826248, "post_id": 48049938, "comment_id": 83074939, "body": "@meagar Is there any other way I do the same thing? or I need to create my own logic for the same!"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1514826820, "post_id": 48049938, "comment_id": 83075113, "body": "@fidato You could write a simple parser for this in just a few lines of code. You just need to keep track of opening <code>(</code> and closing <code>)</code>."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1514829872, "post_id": 48049938, "comment_id": 83075942, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9030036/regex-to-match-only-commas-not-in-parentheses\">Regex to match only commas not in parentheses?</a>"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1514830557, "post_id": 48049938, "comment_id": 83076116, "body": "@Toto We&#39;ve established this is not a duplicate of that question. It has already been closed as a duplicate of it and reopened, and it contains the solution provided there and specifically shows the case for which it doesn&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 0, "creation_date": 1514831805, "post_id": 48052193, "comment_id": 83076480, "body": "Thanks for the answer, but it doesn&#39;t giving me my desired result either. I want following o/p: [&quot;id&quot;, &quot;name&quot;, &quot;title(first_name,last_name,address(street,pincode(id,code))&zwnj;&#8203;)&quot;]"}, {"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 0, "creation_date": 1514832104, "post_id": 48052193, "comment_id": 83076560, "body": "Your code gives me array of 5 strings whereas I need only 3 strings that is <code>id</code>, <code>name</code> and <code>title(first_name,last_name,address(street,pincode(id,code))\u200c&zwnj;&#8203;\u200b</code>"}, {"owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "reply_to_user": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 1, "creation_date": 1514832146, "post_id": 48052193, "comment_id": 83076574, "body": "@fidato, sorry about that. Edited. Could you check now?"}, {"owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "reply_to_user": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 0, "creation_date": 1514832387, "post_id": 48052193, "comment_id": 83076651, "body": "@fidato, my pleasure!"}, {"owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 0, "creation_date": 1514832787, "post_id": 48052193, "comment_id": 83076752, "body": "one more modification: can you modify above logic bit to convert &quot;first_name,last_name,address(street,pincode(id,code)),city(&zwnj;&#8203;name)&quot;  into [&quot;first_name&quot;, &quot;last_name&quot;, &quot;address(street,pincode(id,code))&quot;, &quot;city(name)&quot;]"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1514833206, "post_id": 48052193, "comment_id": 83076857, "body": "This fails with input like <code>a,b(c(d),e,f)</code>. It returns <code>[&quot;a&quot;, &quot;b(c(d)&quot;, &quot;e&quot;, &quot;f)&quot;]</code> instead of <code>[&quot;a&quot;, &quot;b(c(d),e,f)&quot;]</code>."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1514834117, "post_id": 48052193, "comment_id": 83077080, "body": "This is a really ill-advised implementation depending on a <a href=\"http://code.extension.ws/post/201717938/the-ruby-conditional-range\" rel=\"nofollow noreferrer\">feature of Ruby</a> that is best avoided. It requires every closing parenthesis to be encountered in the same token."}, {"owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "reply_to_user": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "edited": false, "score": 0, "creation_date": 1514834232, "post_id": 48052193, "comment_id": 83077108, "body": "I can delete my answer based on comments. @fidato, please reject this answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514844898, "post_id": 48052193, "comment_id": 83079584, "body": "Another limitation: <code>split_unless_parenthesized(&quot;id,name,title(first_name,last_na&zwnj;&#8203;me),pub(name,address&zwnj;&#8203;)&quot;) #=&gt; [&quot;id&quot;, &quot;name&quot;, &quot;title(first_name,last_name),pub(name,address)&quot;]</code> rather than <code>[&quot;id&quot;, &quot;name&quot;, &quot;title(first_name,last_name)&quot; ,&quot;pub(name,address)&quot;]</code>."}, {"owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "edited": false, "score": 1, "creation_date": 1514853968, "post_id": 48052193, "comment_id": 83081205, "body": "Updated my answer with another approach that I believe takes care of all these cases mentioned in the problem and comments."}], "tags": [], "owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "is_accepted": true, "score": 3, "last_activity_date": 1514853918, "last_edit_date": 1514853918, "creation_date": 1514831348, "answer_id": 48052193, "question_id": 48049938, "link": "https://stackoverflow.com/questions/48049938/using-stringsplit-method/48052193#48052193", "title": "Using String#split Method", "body": "<p><strong>Updated Answer</strong></p>\n\n<p>Since the earlier answer didn't take care of all the cases as rightly pointed out in the comments, I'm updating the answer with another solution.</p>\n\n<p>This approach separates the valid commas using a separator <code>|</code> and, later uses it to split the string using <code>String#split</code>.</p>\n\n<pre><code>class TokenArrayParser\n  SPLIT_CHAR = '|'.freeze\n\n  def initialize(str)\n    @str = str\n  end\n\n  def parse\n    separate_on_valid_comma.split(SPLIT_CHAR)\n  end\n\n  private\n\n  def separate_on_valid_comma\n    dup = @str.dup\n    paren_count = 0\n    dup.length.times do |idx|\n      case dup[idx]\n      when '(' then  paren_count += 1\n      when ')' then paren_count -= 1\n      when ',' then dup[idx] = SPLIT_CHAR if paren_count.zero?\n      end\n    end\n\n    dup\n  end\nend\n\n%w(\n  id,name,title(first_name,last_name)\n  id,name,title(first_name,last_name,address(street,pincode(id,code)))\n  first_name,last_name,address(street,pincode(id,code)),city(name)\n  a,b(c(d),e,f)\n  id,name,title(first_name,last_name),pub(name,address)\n).each {|str| puts TokenArrayParser.new(str).parse.inspect }\n\n# =&gt;\n# [\"id\", \"name\", \"title(first_name,last_name)\"]\n# [\"id\", \"name\", \"title(first_name,last_name,address(street,pincode(id,code)))\"]\n# [\"first_name\", \"last_name\", \"address(street,pincode(id,code))\", \"city(name)\"]\n# [\"a\", \"b(c(d),e,f)\"]\n# [\"id\", \"name\", \"title(first_name,last_name)\", \"pub(name,address)\"]\n</code></pre>\n\n<p>I'm sure this can be optimized more. </p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514857734, "post_id": 48054558, "comment_id": 83081808, "body": "My answer originally had <code>stack</code> defined as an array. I pushed <code>&#39;{&#39;</code> onto <code>stack when </code>&#39;(&#39;` was encountered and popped one <code>&#39;{&#39;</code> when <code>&#39;}&#39;</code> was encountered. After reviewing @hallucinations&#39; revised answer I realized it was only the size of <code>stack</code> I was using, so I simplified my answer to make <code>stack</code> a local variable."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514875109, "post_id": 48054558, "comment_id": 83085275, "body": "I learned something else from @hallucination&#39;s revised answer which caused me to make a further edit. I had replaced commas that are not to be split upon with a special character, split on the remaining commas and then replaced the special characters with commas. It makes more sense to replace the commas to be split upon with the special character, which is what hallucations has done, avoiding the need for my last step."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1514909457, "last_edit_date": 1514909457, "creation_date": 1514855730, "answer_id": 48054558, "question_id": 48049938, "link": "https://stackoverflow.com/questions/48049938/using-stringsplit-method/48054558#48054558", "title": "Using String#split Method", "body": "<pre><code>def doit(str)\n  split_here = 0.chr\n  stack = 0\n  s = str.gsub(/./) do |c|\n    ret = c\n    case c\n    when '('\n      stack += 1\n    when ','\n      ret = split_here, if stack.zero?\n    when ')'\n      raise(RuntimeError, \"parens are unbalanced\") if stack.zero?\n      stack -= 1\n    end\n    ret\n  end\n  raise(RuntimeError, \"parens are unbalanced, stack at end=#{stack}\") if stack &gt; 0\n  s.split(split_here)\nend\n\ndoit \"id,name,title(first_name,last_name)\"\n  #=&gt; [\"id\", \"name\", \"title(first_name,last_name)\"]\ndoit \"id,name,title(first_name,last_name,address(street,pincode(id,code)))\"\n  #=&gt; [\"id\", \"name\", \"title(first_name,last_name,address(street,pincode(id,code)))\"]\ndoit \"a,b(c(d),e,f)\"\n  #=&gt; [\"a\", \"b(c(d),e,f)\"]\ndoit \"id,name,title(first_name,last_name),pub(name,address)\"\n  #=&gt; [\"id\", \"name\", \"title(first_name,last_name)\", \"pub(name,address\u200b)\"]\ndoit \"a,b(c)d),e,f)\"\n  #=&gt; RuntimeError: parens are unbalanced\ndoit \"a,b(c(d),e),f(\"\n  #=&gt; RuntimeError: parens are unbalanced, stack at end=[\"(\"]\n</code></pre>\n\n<p>A comma is to be split upon if and only if <code>stack</code> is zero when it is encountered. If it is to be split upon it is changed to a character (<code>split_here</code>) that is not in the string. (I used <code>0.chr</code>). The string is then split on <code>split_here</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 9157976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ac2de506c66a47c19e192f3b21f040?s=128&d=identicon&r=PG&f=1", "display_name": "L.E.H", "link": "https://stackoverflow.com/users/9157976/l-e-h"}, "is_accepted": false, "score": -1, "last_activity_date": 1514874733, "creation_date": 1514874733, "answer_id": 48056519, "question_id": 48049938, "link": "https://stackoverflow.com/questions/48049938/using-stringsplit-method/48056519#48056519", "title": "Using String#split Method", "body": "<p>This could be one approach: </p>\n\n<pre><code>\"id,name,title(first_name,last_name)\".split(\",\")[0..1] &lt;&lt; \"id,name,title(first_name,last_name)\".split(\",\")[-2..-1].join\n</code></pre>\n\n<p>Creating a duplicate string and splitting them both, then combining the first two elements of the first string with the joined last two elements of the second string copy. At least in this specific scenario it would give you the desired result. </p>\n"}], "owner": {"reputation": 703, "user_id": 3744443, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/31cd958c40afab1804323dc579eeb4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fidato", "link": "https://stackoverflow.com/users/3744443/fidato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 48052193, "answer_count": 3, "score": 3, "last_activity_date": 1514909457, "creation_date": 1514812230, "last_edit_date": 1514825744, "question_id": 48049938, "link": "https://stackoverflow.com/questions/48049938/using-stringsplit-method", "title": "Using String#split Method", "body": "<p>By default, the <code>#split</code> method work as follows:</p>\n\n<pre><code>\"id,name,title(first_name,last_name)\".split(\",\")\n</code></pre>\n\n<p>will give you following output:</p>\n\n<pre><code>[\"id\", \"name\", \"title(first_name\", \"last_name)\"]\n</code></pre>\n\n<p>But I want something like following:</p>\n\n<pre><code>[\"id\", \"name\", \"title(first_name,last_name)\"]\n</code></pre>\n\n<p>So, I use following regex (from the this <a href=\"https://stackoverflow.com/a/9030062/872395\">answer</a>) using split to get desired output:</p>\n\n<pre><code>\"id,name,title(first_name,last_name)\".split(/,(?![^(]*\\))/)\n</code></pre>\n\n<p>But, again when I use another string, which is my actual input above, the logic fails. My actual string is:</p>\n\n<pre><code>\"id,name,title(first_name,last_name,address(street,pincode(id,code)))\"\n</code></pre>\n\n<p>and it is giving following output:</p>\n\n<pre><code>[\"id\", \"name\", \"title(first_name\", \"last_name\", \"address(street\", \"pincode(id,code)))\"]\n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>[\"id\", \"name\", \"title(first_name,last_name,address(street,pincode(id,code)))\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "comments": [{"owner": {"reputation": 7985, "user_id": 726020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/076ddab874e5e370a451f0da52afb85c?s=128&d=identicon&r=PG", "display_name": "shime", "link": "https://stackoverflow.com/users/726020/shime"}, "edited": false, "score": 0, "creation_date": 1514807884, "post_id": 48049082, "comment_id": 83070446, "body": "You have to stub the <code>client.orders</code> call too."}], "answers": [{"comments": [{"owner": {"reputation": 1202, "user_id": 432481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fa621ee9273f6ffdbc4227916ab9cda?s=128&d=identicon&r=PG", "display_name": "Jamesla", "link": "https://stackoverflow.com/users/432481/jamesla"}, "edited": false, "score": 0, "creation_date": 1514850683, "post_id": 48051701, "comment_id": 83080704, "body": "That looks great but I can&#39;t figure out how to stub the create method of the order object. What I actually need to stub is the method StraightServerKit::Client.orders.create, how can I do that?"}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "reply_to_user": {"reputation": 1202, "user_id": 432481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fa621ee9273f6ffdbc4227916ab9cda?s=128&d=identicon&r=PG", "display_name": "Jamesla", "link": "https://stackoverflow.com/users/432481/jamesla"}, "edited": false, "score": 0, "creation_date": 1514877998, "post_id": 48051701, "comment_id": 83086317, "body": "You either determine return type of <code>Client.orders</code> and stub it, or you stub <code>Client.orders</code> itself to return a dummy object responding to <code>#create</code>"}], "tags": [], "owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "is_accepted": false, "score": 1, "last_activity_date": 1514827265, "creation_date": 1514827265, "answer_id": 48051701, "question_id": 48049082, "link": "https://stackoverflow.com/questions/48049082/how-to-create-stub-methods-in-rails-5-and-minitest/48051701#48051701", "title": "How to create stub methods in rails 5 and minitest", "body": "<p>The test seems to be a controller test. You first build a client in your test and stub it's method. The method is stubbed only on this particular instance, not on all instances of <code>StraightServerKit::Client</code>.</p>\n\n<p>Then you call a controller action which creates it's own client, so the stub you created isn't used at all.</p>\n\n<p>You can use <a href=\"https://github.com/codeodor/minitest-stub_any_instance\" rel=\"nofollow noreferrer\">minitest-stub_any_instance</a> gem, which allows you to stub any instance of a class:</p>\n\n<p><code>StraightServerKit::Client.stub_any_instance(:order, 'data')</code></p>\n"}], "owner": {"reputation": 1202, "user_id": 432481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fa621ee9273f6ffdbc4227916ab9cda?s=128&d=identicon&r=PG", "display_name": "Jamesla", "link": "https://stackoverflow.com/users/432481/jamesla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1421, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1514856203, "creation_date": 1514804321, "last_edit_date": 1514856203, "question_id": 48049082, "link": "https://stackoverflow.com/questions/48049082/how-to-create-stub-methods-in-rails-5-and-minitest", "title": "How to create stub methods in rails 5 and minitest", "body": "<p>I have the following code and I am trying to create a stub for it so I can place tests without it making a real order.</p>\n\n<pre><code>def order\n    client = StraightServerKit::Client.new(\n        gateway_id: \"123\",\n        secret: \"123\"\n    )\n    o = StraightServerKit::Order.new(amount: 1)\n    mycelium_order = client.orders.create(o)\nend\n</code></pre>\n\n<p>How do I stub the create method? This is my attempt but it doesn't call the stubbed method and tries to make a real api call (this method => client.orders.create(o))</p>\n\n<pre><code>test \"should create order\" do\n  mock = Minitest::Mock.new\n  def mock.apply; true; end\n\n  client =  StraightServerKit::Client.new(\n    gateway_id: \"xxx\",\n    secret: \"xxx\"\n  )\n\n  client.orders.stub :create, mock do\n  {\n    return_data = \"data\"\n  }\n\n  post post_order_path, params: { order: { amount: 10 } }\n  assert_response :success\nend\n</code></pre>\n\n<p>METHOD1</p>\n\n<p>Have updated using the stub_any_instance gem but still not working due to the method being nested</p>\n\n<pre><code>require 'minitest/stub_any_instance'\ntest \"should create order\" do\n    client = StraightServerKit::Client.new(\n      gateway_id: \"asdf\",\n      secret: \"asdf\"\n    );\n    client.stub_any_instance(:order, \"data\")\n\n    post post_order_path, params: { order: { amount: 10 } }\n    assert_response :success\n\n  end\n</code></pre>\n\n<p>Error:\nDashboardControllerTest#test_should_create_order:\nNoMethodError: undefined method `stub_any_instance' for #\n(although stub_any_instance works fine with stubbing String.length)</p>\n\n<p>METHOD2:</p>\n\n<pre><code>require 'mocha/mini_test'\ntest \"should create order\" do\n    StraightServerKit::Client.any_instance.stubs(:new).returns(\"test\")\n\n    post post_order_path, params: { order: { amount: 10 } }\n    assert_response :success\n  end\n</code></pre>\n\n<p>this loads the real implementation rather than the stub</p>\n\n<p>METHOD3:</p>\n\n<pre><code>test \"should create order\" do\n    StraightServerKit::Client.stub_any_instance(:new, \"data\")\n\n    post post_order_path, params: { order: { amount: 10 } }\n    assert_response :success\n  end\n</code></pre>\n\n<p>DashboardControllerTest#test_should_create_order:\nNameError: undefined method <code>new' for class</code>StraightServerKit::Client'</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 14323, "user_id": 3498950, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fa49bc7b5d1a3d144ffcda8b447912e0?s=128&d=identicon&r=PG", "display_name": "spencer.sm", "link": "https://stackoverflow.com/users/3498950/spencer-sm"}, "edited": false, "score": 0, "creation_date": 1599873111, "post_id": 48048120, "comment_id": 112918909, "body": "Stripe recently released coupons for one-time payments but they still don&#39;t allow discounting below the minimum charge amount... So still no luck with a 100% discount. <a href=\"https://stripe.com/docs/payments/checkout/discounts\" rel=\"nofollow noreferrer\">stripe.com/docs/payments/checkout/discounts</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514795506, "post_id": 48048191, "comment_id": 83067841, "body": "I&#39;ve said <b>P.S. It&#39;s not a subscription, but a one-time payment.</b>"}, {"owner": {"reputation": 374, "user_id": 2844703, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/60dbae56ea5e380f5836a717852a8650?s=128&d=identicon&r=PG", "display_name": "James Shaver", "link": "https://stackoverflow.com/users/2844703/james-shaver"}, "reply_to_user": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514833586, "post_id": 48048191, "comment_id": 83076957, "body": "Right, but notice all the other comments are... &quot;use a subscription&quot;."}], "tags": [], "owner": {"reputation": 374, "user_id": 2844703, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/60dbae56ea5e380f5836a717852a8650?s=128&d=identicon&r=PG", "display_name": "James Shaver", "link": "https://stackoverflow.com/users/2844703/james-shaver"}, "is_accepted": false, "score": 0, "last_activity_date": 1514795036, "creation_date": 1514795036, "answer_id": 48048191, "question_id": 48048120, "link": "https://stackoverflow.com/questions/48048120/how-to-give-a-100-discount-in-stripe-for-one-time-payments-and-to-some-not-all/48048191#48048191", "title": "How to give a 100% discount in Stripe for one-time payments and to some, not all, users? And how to integrate a discount input box into Stripe popup?", "body": "<p>The stripe docs give a php example, and it's even 100%.\n<a href=\"https://stripe.com/docs/subscriptions/discounts\" rel=\"nofollow noreferrer\">https://stripe.com/docs/subscriptions/discounts</a></p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 1, "creation_date": 1514795404, "post_id": 48048205, "comment_id": 83067823, "body": "<code>For instance, in an online store, coupons might depend on the cart total, might affect just shipping, or might only apply to certain items. </code> -- I don&#39;t care what it depends on in some stores. I want to give a <b>fixed-percent or fixed-price discount</b> to <b>some users</b> ."}, {"owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1514795573, "post_id": 48048205, "comment_id": 83067856, "body": "Handle it at you server end.  generate coupon code and Implement logic corresponding to coupons and charge final amount to user"}, {"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514795684, "post_id": 48048205, "comment_id": 83067881, "body": "will Stripe still charge me any fees if the amount is $0? I mean, for processing a payment in the live mode. something like $0.1"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1514795754, "post_id": 48048205, "comment_id": 83067893, "body": "Ok, then the idea is if skip payment for some users, then you create a column for users table which is data type is <code>boolean</code> or something like this then manually adds data, then create a logical part if users have data then skip the payment. and after the expiration date, you reset the data."}, {"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514795812, "post_id": 48048205, "comment_id": 83067907, "body": "updated my comment."}, {"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514795832, "post_id": 48048205, "comment_id": 83067916, "body": "well, that&#39;ll work but I want to use Stripe with a 100% discount still"}, {"owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1514795910, "post_id": 48048205, "comment_id": 83067935, "body": "Stripe will charge a minimum amount of 0.5$ not less than that. read this link <a href=\"https://stripe.com/docs/api#charge_object-amount\" rel=\"nofollow noreferrer\">stripe.com/docs/api#charge_object-amount</a>"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": true, "score": 0, "last_activity_date": 1514795151, "creation_date": 1514795151, "answer_id": 48048205, "question_id": 48048120, "link": "https://stackoverflow.com/questions/48048120/how-to-give-a-100-discount-in-stripe-for-one-time-payments-and-to-some-not-all/48048205#48048205", "title": "How to give a 100% discount in Stripe for one-time payments and to some, not all, users? And how to integrate a discount input box into Stripe popup?", "body": "<p>Stripe makes it easy to use coupons for subscriptions. Applying coupons to standalone charges is typically a bit more nuanced. For instance, in an online store, coupons might depend on the cart total, might affect just shipping, or might only apply to certain items. As such, a coupon system for standalone charges is best implemented in your app. Fortunately, implementing a basic coupon system is easy.</p>\n\n<p>After the certain time, you can disable the coupon which is created for the discount.</p>\n\n<p><a href=\"https://stripe.com/docs/subscriptions/discounts\" rel=\"nofollow noreferrer\"><strong>Link1</strong></a></p>\n\n<p><a href=\"https://stripe.com/docs/recipes/coupons-for-charges\" rel=\"nofollow noreferrer\"><strong>Link2</strong></a></p>\n\n<p>Very nicely explained from Stripe, you can follow their documentation carefully.</p>\n\n<p>Hope to help</p>\n"}, {"comments": [{"owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1514795772, "post_id": 48048224, "comment_id": 83067896, "body": "you can have a look at this discussion thread why stripe doesn&#39;t support coupons for one time payment.  <a href=\"https://www.quora.com/Why-does-Stripe-not-allow-for-coupon-discount-codes-to-be-used-for-one-time-payments\" rel=\"nofollow noreferrer\">quora.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1514795358, "creation_date": 1514795358, "answer_id": 48048224, "question_id": 48048120, "link": "https://stackoverflow.com/questions/48048120/how-to-give-a-100-discount-in-stripe-for-one-time-payments-and-to-some-not-all/48048224#48048224", "title": "How to give a 100% discount in Stripe for one-time payments and to some, not all, users? And how to integrate a discount input box into Stripe popup?", "body": "<p>Stripe doesn't support discount for one-time payments, If you want to give 100% discount to some specific users then charge them 0.5$ at your end and handle this at you code level. </p>\n\n<p>If you just need for your testing purpose then stripe testing is very robust I am using stripe from the last 3-4 years still no issues with any feature. </p>\n\n<p>id you need offer discount to the user then you can follow <a href=\"https://stripe.com/docs/recipes/coupons-for-charges\" rel=\"nofollow noreferrer\">this</a> guide from the stripe to implement coupon system. you have to handle all coupon logic at your server \nBut i think you just need for testing purpose.</p>\n"}], "owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3403, "favorite_count": 1, "closed_date": 1514804466, "accepted_answer_id": 48048205, "answer_count": 3, "score": -5, "last_activity_date": 1514795607, "creation_date": 1514794268, "last_edit_date": 1514795607, "question_id": 48048120, "link": "https://stackoverflow.com/questions/48048120/how-to-give-a-100-discount-in-stripe-for-one-time-payments-and-to-some-not-all", "closed_reason": "Needs more focus", "title": "How to give a 100% discount in Stripe for one-time payments and to some, not all, users? And how to integrate a discount input box into Stripe popup?", "body": "<p>I process payments via Stripe on my website. To some users, I want to give a 100% discount to my products. And also I want to test the payment process myself in the <strong>live mode</strong>, with the live keys, right on my production server, and that means that a 100% discount will come in handy for me too. </p>\n\n<p>Is this possible? How?</p>\n\n<p>P.S.\nIt's not a subscription, but a one-time payment.</p>\n"}, {"tags": ["ruby", "associations", "one-to-one", "many-to-one", "sequel"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1514782861, "post_id": 48047119, "comment_id": 83066073, "body": "Because you only ever need the relationship to be specified in one table, and with a many-to-one relationship, it makes sense to have a single field in each &quot;child&quot; record that points to the parent record id. If you are looking for all children of a parent, you query for all child records having a parent_id field equal to the parent&#39;s id."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514903134, "post_id": 48047119, "comment_id": 83098001, "body": "I agree this example makes very little sense since it seems to be implying that an <code>Artist</code> can only have 1 <code>Album</code> (<code>one_to_one</code>) but that many <code>Album</code>s can belong to 1 <code>Artist</code> (<code>many_to_one</code>). I think this is just mean to show the difference between the associations since each is more explicitly documented above but they could have chosen a far better example"}, {"owner": {"reputation": 95, "user_id": 8589061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a0dd06da9d1d702929900c9994531b7?s=128&d=identicon&r=PG&f=1", "display_name": "bachmarc", "link": "https://stackoverflow.com/users/8589061/bachmarc"}, "edited": false, "score": 0, "creation_date": 1514918332, "post_id": 48047119, "comment_id": 83105410, "body": "I sat there infront of a not running model ( at the end a plural s too much... as it is not always clear in sequel if a model or a table is meant) ... I opened docu at 4 am after s long night at the screen and found this \u201eextra  coarification)... i still cannot imagine a single scenario where a many to one is doubled by a one to one in return in a logical way. Thats why i thought i missed a big concept while coming from sql to sequel models."}, {"owner": {"reputation": 7568, "user_id": 492969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936bf1ffa62366b2c107de33361cc41?s=128&d=identicon&r=PG", "display_name": "three", "link": "https://stackoverflow.com/users/492969/three"}, "edited": false, "score": 0, "creation_date": 1515946563, "post_id": 48047119, "comment_id": 83485501, "body": "one_to_one is useful because it returns the object directly while in the many associations you have an array. It&#39;s also faster because it forces sequel to pick the first result instead of going throught he whole table looking for hits."}], "answers": [{"tags": [], "owner": {"reputation": 2771, "user_id": 404949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5d457fe9d0c94a181f7631c3598b4e61?s=128&d=identicon&r=PG", "display_name": "puchu", "link": "https://stackoverflow.com/users/404949/puchu"}, "is_accepted": false, "score": 1, "last_activity_date": 1521493910, "last_edit_date": 1521493910, "creation_date": 1521477077, "answer_id": 49367907, "question_id": 48047119, "link": "https://stackoverflow.com/questions/48047119/i-do-not-understand-a-many-to-one-one-to-one-model-association/49367907#49367907", "title": "I do not understand a many_to_one &lt;=&gt; one_to_one model association", "body": "<p>Same issue for me.</p>\n\n<pre><code>require \"logger\"\nrequire \"sequel\"\n\ndb = Sequel.connect \"postgres://localhost/postgres\", :logger =&gt; Logger.new(STDOUT)\n\ndb.drop_table :artists, :cascade =&gt; true if db.table_exists?(:artists)\ndb.create_table :artists do\n  primary_key :id\n  foreign_key :album_id, :albums\nend\n\ndb.drop_table :albums, :cascade =&gt; true if db.table_exists?(:albums)\ndb.create_table :albums do\n  primary_key :id\n  foreign_key :artist_id, :artists\nend\n\nclass Artist &lt; Sequel::Model(db[:artists])\n  one_to_one :album\nend\nclass Album &lt; Sequel::Model(db[:albums])\n  one_to_one :artist\nend\n\nartist_1 = Artist.create\nalbum_1  = Album.create\n\nartist_1.update :album =&gt; album_1\nalbum_1.reload\nputs album_1.artist.nil?\n\nartist_2 = Artist.create\nalbum_2  = Album.create\n\nalbum_2.update :artist =&gt; artist_2\nartist_2.reload\nputs artist_2.album.nil?\n</code></pre>\n\n<p>We can fix this example by replacing any of <code>one_to_one</code> into <code>many_to_one</code>.</p>\n\n<pre><code>class Album\n  many_to_one :artist\nend\n</code></pre>\n\n<p>In this case <code>artist.album_id</code> won't be used.</p>\n\n<pre><code>class Artist\n  many_to_one :albums\nend\n</code></pre>\n\n<p>In this case <code>album.artist_id</code> won't be used.</p>\n\n<p>The problem is that method names <code>one_to_one</code> and <code>many_to_one</code> were selected by underlying <code>sequel</code> logic and they are not user friendly.</p>\n\n<p>You can create user friendly aliases for these methods. I prefer just to use it with comments. For example:</p>\n\n<pre><code>db.create_table :artists do\n  primary_key :id\n  foreign_key :album_id, :albums\nend    \ndb.create_table :albums do\n  primary_key :id\nend\n\nclass Artist &lt; Sequel::Model(db[:artists])\n  many_to_one :album # I have album_id foreign key\nend\nclass Album &lt; Sequel::Model(db[:albums])\n  one_to_one :artist # I don't have artist_id foreign key\nend\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8589061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a0dd06da9d1d702929900c9994531b7?s=128&d=identicon&r=PG&f=1", "display_name": "bachmarc", "link": "https://stackoverflow.com/users/8589061/bachmarc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1521493910, "creation_date": 1514780558, "question_id": 48047119, "link": "https://stackoverflow.com/questions/48047119/i-do-not-understand-a-many-to-one-one-to-one-model-association", "title": "I do not understand a many_to_one &lt;=&gt; one_to_one model association", "body": "<p>how to say? I do not understand what the sequel documentation tries to tell me about associations in case of a two models linked over a foreign key in one model A being a primary key in the other in a may_to_one case.\nI always thought: If it is many_to _one in one direction it has to be one_to_many in the other... but the sequel provides a confusing chapter meant to clarify the topic with in addition an example I cannot follow.</p>\n\n<p>It says in \n<a href=\"https://github.com/jeremyevans/sequel/blob/master/doc/association_basics.rdoc\" rel=\"nofollow noreferrer\">\"Differences Between many_to_one and one_to_one\"</a></p>\n\n<blockquote>\n  <p>If you want  to setup a 1-1 relationship between two models, where the foreign > key in one table references the associated table directly, you have to use\n  many_to_one in one model, and one_to_one in the other model. How do\n  you know which to use in which model? The simplest way to remember is\n  that the model whose table has the foreign key uses many_to_one, and\n  the other model uses one_to_one\"</p>\n</blockquote>\n\n<p>And continues to provide this strange example:</p>\n\n<pre><code># Database schema:\n#  artists            albums\n#   :id   &lt;----\\       :id\n#   :name       \\----- :artist_id \n#                      :name\n\nclass Artist\n  one_to_one :album\nend\nclass Album\n  many_to_one :artist\nend\n</code></pre>\n\n<p>In albums I may find several rows pointing to same artist... why shouldn't the artist point back to all his/her albums? \nThe sequel docu is crazy hard to read in many cases but this chapter reads easy but makes no sense for me:(</p>\n"}, {"tags": ["ruby", "syntax", "metaprogramming"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1514770685, "post_id": 48046617, "comment_id": 83064751, "body": "Don&#39;t you need the parentheses in an ambiguous situation like this?"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 2, "creation_date": 1514770769, "post_id": 48046617, "comment_id": 83064757, "body": "Try to change your code to make it working this way: <code>puts Test2::ConstString % [&quot;test&quot;, &quot;test2&quot;]</code>. Maybe String&#39;s <code>%</code> method just takes one argument."}, {"owner": {"reputation": 489, "user_id": 7618270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3dafb06431451eaec971860c401150?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar Misich", "link": "https://stackoverflow.com/users/7618270/aleksandar-misich"}, "edited": false, "score": 0, "creation_date": 1514770967, "post_id": 48046617, "comment_id": 83064783, "body": "It does work with the <code>[]</code> explicitly passed, however I want to know why the <code>.make</code> example accepts the implicit <code>&quot;string&quot;, &quot;string&quot;</code> and ` % ` Doesn&#39;t, and if there&#39;s a way of making it accept implicit."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 1, "creation_date": 1514771417, "post_id": 48046617, "comment_id": 83064835, "body": "What gives <code>p args</code> in ProcPercentSyntax&#39;s <code>%</code> method?"}, {"owner": {"reputation": 489, "user_id": 7618270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3dafb06431451eaec971860c401150?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar Misich", "link": "https://stackoverflow.com/users/7618270/aleksandar-misich"}, "edited": false, "score": 0, "creation_date": 1514771827, "post_id": 48046617, "comment_id": 83064887, "body": "<code>#=&gt; &quot;test&quot;</code> It appears that <code>Test2::ConstString % &quot;test&quot;, &quot;test2&quot;</code> is being interpreted as <code>[Test2::ConstString.%(&quot;test&quot;), &quot;test2&quot;]</code> here, in which case I&#39;ll likely have to settle for your Array Syntax."}], "answers": [{"comments": [{"owner": {"reputation": 489, "user_id": 7618270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3dafb06431451eaec971860c401150?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar Misich", "link": "https://stackoverflow.com/users/7618270/aleksandar-misich"}, "edited": false, "score": 0, "creation_date": 1514806143, "post_id": 48048744, "comment_id": 83070054, "body": "I had a lot of <code>puts</code> in my method and neglected to notice the additional line being outputted via the test <code>puts</code> on my Object.  Your Answer gave me the insight I needed to finish off the code, thank you!"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1514801214, "creation_date": 1514801214, "answer_id": 48048744, "question_id": 48046617, "link": "https://stackoverflow.com/questions/48046617/ruby-strange-behaviour-when-defining-methods-that-utilize-syntax-sugar/48048744#48048744", "title": "Ruby: Strange behaviour when defining methods that utilize syntax sugar", "body": "<blockquote>\n<pre><code>puts Test2::ConstString % \"test\", \"test2\"\n</code></pre>\n  \n  <p>But...</p>\n\n<pre><code>#=&gt; this is a string with test and \n</code></pre>\n</blockquote>\n\n<p>No, that is <em>not</em> the result. The result is:</p>\n\n<pre><code># this is a string with test and \n# test2\n#=&gt; nil\n</code></pre>\n\n<blockquote>\n  <p>Disconcertingly without any error thrown.</p>\n</blockquote>\n\n<p>Why would there be an error? It is perfectly legal to call <code>puts</code> with two arguments, and that is what you are doing here. What would you expect </p>\n\n<pre><code>puts 1+1, 3\n</code></pre>\n\n<p>to print? It's the exact same thing!</p>\n\n<blockquote>\n  <p>Why does the method seem to miss out on the second given parameter when using <code>%</code> as a method name?</p>\n</blockquote>\n\n<p><code>%</code> is a <em>binary</em> operator like <code>&lt;&lt;</code> or <code>|</code>. It only takes <em>two</em> operands, one on the left (the receiver of the message) and one on the right. There is only one ternary operator in Ruby (<code>?:</code>) but a) that doesn't take two operands on the right, it takes its three operands with the operator interleaved (like this <code>a ? b : c</code>) and b) it cannot be overloaded.</p>\n\n<p>Note that this has nothing to do with the name <code>%</code>, it has to do with operator syntax:</p>\n\n<pre><code>puts Test2::ConstString.% \"test\", \"test2\"\n# this is a string with test and test2\n#=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 489, "user_id": 7618270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3dafb06431451eaec971860c401150?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar Misich", "link": "https://stackoverflow.com/users/7618270/aleksandar-misich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 48048744, "answer_count": 1, "score": 1, "last_activity_date": 1514801214, "creation_date": 1514769450, "question_id": 48046617, "link": "https://stackoverflow.com/questions/48046617/ruby-strange-behaviour-when-defining-methods-that-utilize-syntax-sugar", "title": "Ruby: Strange behaviour when defining methods that utilize syntax sugar", "body": "<p>Currently I'm playing around with the a few meta-programming ideas, let me introduce that first:\nI can define a string 'template' in a <code>class</code> or <code>module</code> as a <code>Constant</code> and utilize it later like so:</p>\n\n<pre><code>class Test1\n  ConstString = %(the string in here is %{instring})\nend\nputs Test1::ConstString % { instring: \"test\" }\n#=&gt; the string in here is test\n</code></pre>\n\n<p>The problem is</p>\n\n<p>a. based on a benchmark, just defining a function could do the same thing 3 times as fast (Benchmark is 1000000.times):</p>\n\n<pre><code>                 user     system      total        real\n   Constant:   1.080000   0.000000   1.080000 (  1.087187)\n   Function:   0.350000   0.000000   0.350000 (  0.346578)\n</code></pre>\n\n<p>b. I want to keep these separated from regular functions because of how I want to use them.</p>\n\n<p>So I decided to create a new class to inherit from Proc...\nAnd include a <code>module</code> to throw in Percent/Modulo Syntax.</p>\n\n<pre><code>module ProcPercentSyntax\n  def %(*args)\n    self.call(*args)\n  end\nend\nclass TestFromProc &lt; Proc\n  include ProcPercentSyntax\nend\n\n\nclass Test2\n  ConstString = TestFromProc.new { |x, y| %(this is a string with #{x} and #{y}) }\nend\n</code></pre>\n\n<p>That way, I can call it like so!</p>\n\n<pre><code>puts Test2::ConstString % \"test\", \"test2\"\n</code></pre>\n\n<p>But...</p>\n\n<pre><code>#=&gt; this is a string with test and \n</code></pre>\n\n<p>Disconcertingly without any error thrown.</p>\n\n<p>To make sure this wasn't another issue I went ahead and did this:</p>\n\n<pre><code>module ProcNotPercentSyntax\n  def make(*args)\n    self.call(*args)\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class TestFromProc &lt; Proc\n  include ProcNotPercentSyntax\nend\n</code></pre>\n\n<hr>\n\n<pre><code>puts Test2::ConstString.make \"test\", \"test2\"\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>#=&gt; this is a string with test and test2\n</code></pre>\n\n<p>Excuse the drawling sporadic nature of this question, I'll summarize my intent as so:</p>\n\n<blockquote>\n  <p>Why does the method seem to miss out on the second given parameter when using <code>%</code> as a method name?</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "many-to-many", "has-many-through"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5132581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b45c1e18ee9218535f4e62664fecb5db?s=128&d=identicon&r=PG&f=1", "display_name": "KillianKemps", "link": "https://stackoverflow.com/users/5132581/killiankemps"}, "edited": false, "score": 0, "creation_date": 1514810726, "post_id": 48046381, "comment_id": 83071180, "body": "Thanks for your answer, I tried the first option and I could be able to create a user even if it had interests which already exist. However, he was created without any interests. When he had some new interests and some which already exist, then the new one is attribute to him, but not the old one. The second option didn&#39;t work because I have this error &quot;You cannot call create unless the parent is saved&quot;."}, {"owner": {"reputation": 2072, "user_id": 3389795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiAJt.jpg?s=128&g=1", "display_name": "Shiko", "link": "https://stackoverflow.com/users/3389795/shiko"}, "reply_to_user": {"reputation": 123, "user_id": 5132581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b45c1e18ee9218535f4e62664fecb5db?s=128&d=identicon&r=PG&f=1", "display_name": "KillianKemps", "link": "https://stackoverflow.com/users/5132581/killiankemps"}, "edited": false, "score": 0, "creation_date": 1514834477, "post_id": 48046381, "comment_id": 83077186, "body": "@KillianKemps I will remove the 2nd to avoid confusion for others"}], "tags": [], "owner": {"reputation": 2072, "user_id": 3389795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiAJt.jpg?s=128&g=1", "display_name": "Shiko", "link": "https://stackoverflow.com/users/3389795/shiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1514834558, "last_edit_date": 1514834558, "creation_date": 1514764848, "answer_id": 48046381, "question_id": 48045435, "link": "https://stackoverflow.com/questions/48045435/how-to-add-or-update-an-associated-attribute-while-creating-a-new-user-at-sign-u/48046381#48046381", "title": "How to add or update an associated attribute while creating a new user at sign up with Devise?", "body": "<p>You can make a quick check for interests before saving them or use <code>.first_or_create</code> to create interest if it doesn't exist, like below:  </p>\n\n<pre><code> def interests_list=value\n    current_interest = value.split(',')\n    unique_interest = current_interest - Interest.where(name: current_interest).pluck(:name)\n    unique_interest.each do |interest|\n      self.interests.build(:name =&gt; interest).save\n    end\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 5132581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b45c1e18ee9218535f4e62664fecb5db?s=128&d=identicon&r=PG&f=1", "display_name": "KillianKemps", "link": "https://stackoverflow.com/users/5132581/killiankemps"}, "is_accepted": true, "score": 0, "last_activity_date": 1514819745, "creation_date": 1514819745, "answer_id": 48050781, "question_id": 48045435, "link": "https://stackoverflow.com/questions/48045435/how-to-add-or-update-an-associated-attribute-while-creating-a-new-user-at-sign-u/48050781#48050781", "title": "How to add or update an associated attribute while creating a new user at sign up with Devise?", "body": "<p>Based on Shiko answer's, I tried up things and finally ended up with the following:</p>\n\n<pre><code>  def interests_list=value\n    current_interest = value.split(',').collect{|interest| interest.strip.downcase}.uniq\n    current_interest.each do |interest|\n      self.interests &lt;&lt; Interest.find_or_create_by(name: interest)\n    end\n  end\n</code></pre>\n\n<p>With this I'm able to attribute several times the same interest to several people without having duplicates in the Interest table.\nThank your for your help!</p>\n"}], "owner": {"reputation": 123, "user_id": 5132581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b45c1e18ee9218535f4e62664fecb5db?s=128&d=identicon&r=PG&f=1", "display_name": "KillianKemps", "link": "https://stackoverflow.com/users/5132581/killiankemps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 48050781, "answer_count": 2, "score": 2, "last_activity_date": 1514834558, "creation_date": 1514751598, "question_id": 48045435, "link": "https://stackoverflow.com/questions/48045435/how-to-add-or-update-an-associated-attribute-while-creating-a-new-user-at-sign-u", "title": "How to add or update an associated attribute while creating a new user at sign up with Devise?", "body": "<p>I'm having three models:</p>\n\n<ul>\n<li>Users can have several Interests and several Places.</li>\n<li>Users can share same Interests, but the Interests table should not\ncontain duplicates and a user should not have duplicates Interests\ntoo.</li>\n<li>A Place can have several Users and can have Interests through its\nUsers.</li>\n</ul>\n\n<p>I would like to be able to create a user at sign up and add its interests and places as associated attributes.</p>\n\n<p>Users can share same interests, so if it an interest already exist at sign up, I would like to simply add a link for the new user.</p>\n\n<p>What I could get until now is to add interests while signing up with the user, but if an interest already exist, than I get an error and the user is not registered at all.\nThis is because I have a put an index on the interests and added a uniquesness validation on interests. Without it it was adding duplicate interests in the interests table.</p>\n\n<p>Here are the classes I use:</p>\n\n<p><code>models/user.rb</code></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :confirmable, :trackable, :validatable\n\n  has_and_belongs_to_many :interests\n  has_and_belongs_to_many :places\n\n  validates :username, uniqueness: { case_sensitive: false }\n  validates_associated :interests\n\n  accepts_nested_attributes_for :interests\n\n  def interests_list=value\n    value.split(',').each do |interest|\n      self.interests.build(:name =&gt; interest).save\n    end\n  end\n\n  def interests_list\n    self.interests.join(',')\n  end\nend\n</code></pre>\n\n<p><code>models/place.rb</code></p>\n\n<pre><code>class Place &lt; ApplicationRecord\n  has_and_belongs_to_many :users\n  has_many :interests, through: :users\nend\n</code></pre>\n\n<p><code>models/interest.rb</code></p>\n\n<pre><code>class Interest &lt; ApplicationRecord\n  has_and_belongs_to_many :users\n\n  validates :name, uniqueness: { case_sensitive: false }\nend\n</code></pre>\n\n<p>The form for Devise:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;h3&gt;Add interests&lt;/h3&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :interests %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :interests_list %&gt;\n  &lt;/div&gt;\n\n  &lt;% if !user_signed_in? %&gt;\n    &lt;h3&gt;Sign up&lt;/h3&gt;\n\n      &lt;%= devise_error_messages! %&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :email %&gt;&lt;br /&gt;\n        &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :username %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :username %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password %&gt;\n        &lt;% if @minimum_password_length %&gt;\n        &lt;em&gt;(&lt;%= @minimum_password_length %&gt; characters minimum)&lt;/em&gt;\n        &lt;% end %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n      &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Sign up\" %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>I'm using Rails 5.1.4 and Devise 4.4.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sockets", "push-notification"], "comments": [{"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1514810717, "post_id": 48045148, "comment_id": 83071175, "body": "Does it give any especial error code? Please add it to the question"}, {"owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1531926092, "post_id": 48045148, "comment_id": 89781453, "body": "Me I just get Socket was remotely closed"}, {"owner": {"reputation": 1158, "user_id": 2747638, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dWpWy.jpg?s=128&g=1", "display_name": "Mio", "link": "https://stackoverflow.com/users/2747638/mio"}, "edited": false, "score": 0, "creation_date": 1539005137, "post_id": 48045148, "comment_id": 92333109, "body": "Upgrade your gem. Apple change http2 header order. See <a href=\"https://github.com/ostinelli/apnotic/issues/73#issuecomment-406061963\" rel=\"nofollow noreferrer\">github.com/ostinelli/apnotic/issues/73#issuecomment-40606196&zwnj;&#8203;3</a>"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1514754208, "creation_date": 1514748017, "last_edit_date": 1514754208, "question_id": 48045148, "link": "https://stackoverflow.com/questions/48045148/socketerror-socket-was-remotely-closed", "title": "SocketError: Socket was remotely closed", "body": "<p>Getting error in apnotic gem </p>\n\n<pre><code>connection = Apnotic::Connection.new(cert_path: Rails.public_path + \"dev_ck.pem\")\n\n  # create a notification for a specific device token\n  token = \"5F2822CBF606487BA11CA364C4B35893A639...\"\n  notification       = Apnotic::Notification.new(token)\n  notification.alert = \"Notification from Apnotic!\"\n  notification.sound = ''\n  notification.badge = 1\n  notification.topic = 'testing'\n  # send (this is a blocking call)\n  response = connection.push(notification)\n</code></pre>\n\n<p>It gives socket error</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "simple-form"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7305345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eed8a993af88a97c66706bd3db0de173?s=128&d=identicon&r=PG&f=1", "display_name": "m5tt", "link": "https://stackoverflow.com/users/7305345/m5tt"}, "edited": false, "score": 0, "creation_date": 1514742208, "post_id": 48044445, "comment_id": 83060167, "body": "This fixed it. Thank you so much. I havnt seen this documented anywhere."}, {"owner": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "reply_to_user": {"reputation": 9, "user_id": 7305345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eed8a993af88a97c66706bd3db0de173?s=128&d=identicon&r=PG&f=1", "display_name": "m5tt", "link": "https://stackoverflow.com/users/7305345/m5tt"}, "edited": false, "score": 0, "creation_date": 1514742337, "post_id": 48044445, "comment_id": 83060199, "body": "@m5tt I added the reference document in case you want to understand more about it. Happy hacking!"}, {"owner": {"reputation": 9, "user_id": 7305345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eed8a993af88a97c66706bd3db0de173?s=128&d=identicon&r=PG&f=1", "display_name": "m5tt", "link": "https://stackoverflow.com/users/7305345/m5tt"}, "edited": false, "score": 0, "creation_date": 1514742679, "post_id": 48044445, "comment_id": 83060280, "body": "@yeum1vannam I would never have thought to look there. I feel like maybe something about should be mentioned in the routing guide where it talks about the <code>param</code> option. Because i suspected i was not overriding <code>id</code> properly, but i couldnt find anything else other then to set that <code>param</code> option. Thanks again."}], "tags": [], "owner": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "is_accepted": true, "score": 2, "last_activity_date": 1514741739, "last_edit_date": 1514741739, "creation_date": 1514740624, "answer_id": 48044445, "question_id": 48044312, "link": "https://stackoverflow.com/questions/48044312/overriden-route-id-field-is-being-reset/48044445#48044445", "title": "Overriden route id field is being reset", "body": "<p>The <code>simple_form</code> uses the default behavior of Rails when generating the route string for you. Since the <code>config/routes.rb</code> just provide the named pattern matching for the <strong>Outside In</strong> URL, so it is not too much meaning for the application from inside. For ex, with a route like this</p>\n\n<pre><code>model/:token/edit\n</code></pre>\n\n<p>just means any string between <code>model/</code> and <code>/edit</code> will be assigned to <code>params[:token]</code>. It doesn't mean that string has to be the value of <code>YourModel#token</code>. Of course, you can assign that pattern to <code>params[:foobar]</code> by the same way without breaking anything <code>model/:foobar/edit</code></p>\n\n<p>For fully replace <code>id</code> key by <code>token</code> key, you have to override the method <code>YourModel#to_param</code></p>\n\n<pre><code># app/models/your_model.rb\nclass YourModel &lt; ActiveRecord::Base\n  def to_param\n    token\n  end\nend\n</code></pre>\n\n<p>So that, the <code>ActiveSupport</code> will know to use <code>token</code> as the value when generating routing pattern from inside out.</p>\n\n<p>You can read more about it at the <a href=\"http://guides.rubyonrails.org/active_support_core_extensions.html#to-param\" rel=\"nofollow noreferrer\">Rails's Guides</a></p>\n"}], "owner": {"reputation": 9, "user_id": 7305345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eed8a993af88a97c66706bd3db0de173?s=128&d=identicon&r=PG&f=1", "display_name": "m5tt", "link": "https://stackoverflow.com/users/7305345/m5tt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 48044445, "answer_count": 1, "score": 0, "last_activity_date": 1514741739, "creation_date": 1514739513, "last_edit_date": 1514739828, "question_id": 48044312, "link": "https://stackoverflow.com/questions/48044312/overriden-route-id-field-is-being-reset", "title": "Overriden route id field is being reset", "body": "<p>In one of my models i have a field called <code>token</code>, that is created with <code>before_create</code>. It is never modified again.</p>\n\n<p>In <code>routes.rb</code> i am using it instead of id, like: <code>resources :model, param: :token</code></p>\n\n<p>So for example the <code>edit</code> route is now <code>model/:token/edit</code>. </p>\n\n<p>In my actions i am doing <code>find_by(:token, params[:token])</code>.</p>\n\n<p>I have a partial form created with <code>simple_form</code> which is being loaded in the <code>new</code> and <code>edit</code> actions.</p>\n\n<p>This works fine, the routes are generated properly, all showing <code>:token:</code> instead of <code>:id</code>. </p>\n\n<p>The <code>show</code> action works fine. In the show page i have a <code>link_to</code> which links to the edit view. This works fine also.</p>\n\n<p>Both are using <code>:token</code> in the route, the edit view loads the models fields, everything is normal.</p>\n\n<p>However when you look at the source code for the edit view, it shows the action as <code>/model/&lt;id&gt;</code>, instead of <code>/model/&lt;token&gt;</code>. For example <code>/model/5</code>. </p>\n\n<p>When you submit the edit form, it tries to go to <code>/model/5/</code>.</p>\n\n<p>In addition, when i checked the params being sent, it shows <code>token</code> set to the value of <code>id</code>. So somehow, the <code>token</code> field has been reset. </p>\n\n<p>So</p>\n\n<p>1) The <code>token</code> field is somehow being reset to the value of <code>id</code>. I have no idea how this is happening.</p>\n\n<p>2) <code>simple_form</code> seems to be generating the action based off of <code>id</code> instead of <code>token</code>. However i have realized that since <code>token</code> is being reset, it could be that <code>simple_form</code> isnt doing anything wrong and is using the value of <code>token</code>. </p>\n\n<p>The only fix i could come up with, was setting the <code>url</code> field in <code>simple_form_for</code> manually, but if i do that, it then breaks the <code>new</code> action.</p>\n\n<p>For <code>simple_form</code> I'm just doing:\n<code>\n&lt;%= simple_form_for @model do |f| %&gt;\n</code> </p>\n\n<p>In <code>routes.rb</code> I'm doing:</p>\n\n<pre><code>resources :model, param: :token\n</code></pre>\n\n<p>In the controller, the <code>edit</code> action is:</p>\n\n<pre><code>@model = Model.find_by(token: params[:token])\n</code></pre>\n\n<p>The <code>update</code> action is:</p>\n\n<pre><code>@model = Model.find_by(token: params[:token])\nif @mode.update model_params\n  redirect_to model_path @model.token\nelse\n  render 'edit'\nend\n</code></pre>\n\n<p>Nothing fancy in the least. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass"], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "is_accepted": true, "score": 2, "last_activity_date": 1514738524, "creation_date": 1514738524, "answer_id": 48044197, "question_id": 48043790, "link": "https://stackoverflow.com/questions/48043790/ruby-on-rails-error-explanation-sass/48044197#48044197", "title": "Ruby On Rails Error explanation SASS", "body": "<p>In your custom.scss stylesheet</p>\n\n<p>you have one extra } at the end (line 170)</p>\n\n<p>this extra bracket should be on line 109, to close the footer styles.</p>\n\n<p>you've basically wrapped all your styles under footer in error.</p>\n\n<p>(fyi, cloned and tested locally and working for me)</p>\n"}], "owner": {"reputation": 43, "user_id": 8173344, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d3421c6fb6da02181bff2255f43f66c8?s=128&d=identicon&r=PG&f=1", "display_name": "Drekoo", "link": "https://stackoverflow.com/users/8173344/drekoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1514836835, "accepted_answer_id": 48044197, "answer_count": 1, "score": -2, "last_activity_date": 1514738666, "creation_date": 1514734989, "question_id": 48043790, "link": "https://stackoverflow.com/questions/48043790/ruby-on-rails-error-explanation-sass", "closed_reason": "Needs more focus", "title": "Ruby On Rails Error explanation SASS", "body": "<p>I am learning rails (railstutorial.org v5 by Hartl) and i have problem with listing 7.22 chapter 7 Here its my repository <a href=\"https://github.com/xt442/railstutorialorg\" rel=\"nofollow noreferrer\">https://github.com/xt442/railstutorialorg</a> I should have this message \n<a href=\"https://i.stack.imgur.com/1Pyk3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Pyk3.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have something like that. The content is not red \n<a href=\"https://i.stack.imgur.com/51aCm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/51aCm.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "hash", "tuples"], "comments": [{"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1514734448, "post_id": 48043531, "comment_id": 83061264, "body": "Ruby cannot do that. But I think you could customize your own Tuple class, then use tuple object as key."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1514734542, "post_id": 48043531, "comment_id": 83058382, "body": "Your question is unclear. Ruby doesn&#39;t have tuples. Are you talking about a tuple implementation you wrote yourself? If yes, please show your code. Are you talking about some third-party tuple library? If yes, which one? Either way, Ruby doesn&#39;t allow libraries to change the syntax and semantics of the language, so <code>(os, env)</code> is simply illegal syntax (unless it is as part of a parameter list or argument list)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1514734751, "post_id": 48043531, "comment_id": 83058439, "body": "Also, a Yes/No question like &quot;is it possible to&quot; is a really bad fit for <a href=\"https://stackoverflow.com\">Stack Overflow</a>. There are only two possible answers: &quot;No&quot; (which doesn&#39;t help either you or anybody else a bit) or &quot;Yes&quot; (which still doesn&#39;t help either your or anybody else a bit)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514832739, "post_id": 48043531, "comment_id": 83076729, "body": "If you write <code>case [os, env]</code> the <code>when</code> clause for <code>\u201dwindows\u201d</code> must be written `when [\u201cwindows\u201d, x]\u2019, where \u2018x\u2019 is an arbitrary value that is disregarded by that clause. That is, in my opinion, bad programming practice, not to mentioned that it\u2019s really ugly. My advice: don\u2019t do it."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514910456, "post_id": 48043531, "comment_id": 83101965, "body": "Is there a reason you would want to use a <code>Hash</code> for this? Seems like a simple class would be far better and the delegation of <code>pci</code> or <code>non_pci</code> should be handled by the executor not the conditional."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1514738864, "post_id": 48043750, "comment_id": 83059376, "body": "Could the <code>else</code> clause not be handled by attaching a <a href=\"https://docs.ruby-lang.org/en/2.4.0/Hash.html#method-i-default_proc\" rel=\"nofollow noreferrer\">Hash#default_proc</a> to the hash?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514762423, "post_id": 48043750, "comment_id": 83063788, "body": "Not if you have multiple <code>else</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514774592, "post_id": 48043750, "comment_id": 83065236, "body": "I didn&#39;t read the OP&#39;s code carefully enough. Note that the question does not specify that there are only two possible values for <code>env</code>. For all we know, the possible values of <code>env</code> may not even be known at compile-time. The OP is only concerned if it is <code>pci</code> or something else. Also, don&#39;t you think <code>[&#39;windows&#39;, nil]</code> is a bit klutzy?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1514817806, "post_id": 48043750, "comment_id": 83072875, "body": "@CarySwoveland I think all possible <code>env</code> should be known at compile-time, otherwise it will be a security issue. I admit that <code>[&#39;windows&#39;, nil]</code> is very clumsy, but I can&#39;t find another way to make the interface identical to windows and redhat. If the OP uses Elixir, the code should look prettier thanks to the pattern matching."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 3, "last_activity_date": 1514734958, "last_edit_date": 1514734958, "creation_date": 1514734590, "answer_id": 48043750, "question_id": 48043531, "link": "https://stackoverflow.com/questions/48043531/passing-tuple-to-ruby-hash/48043750#48043750", "title": "passing tuple to ruby hash", "body": "<p>The monster here is the <code>else</code> clause in your original code. If you can get rid of it, then you can make a hash for lookup.</p>\n\n<pre><code>my_hash = {\n  ['windows', nil] =&gt; -&gt; { exec_windows },\n  ['redhat', 'pci'] =&gt; -&gt; { exec_pci },\n  ['redhat', 'non_pci'] =&gt; -&gt; { exec_non_pci }\n}\n\nos, env = 'windows', nil\n\nmy_hash[[os, env]].call\n</code></pre>\n\n<p>Note that querying a hash by key requires exact matches, so for example, if your <code>os</code> is <code>'windows'</code>, the <code>env</code> must be <code>nil</code>, otherwise you'll get a <code>NoMethodError</code> telling you that <code>nil</code> has no method named <code>call</code>. You can make this error thrown a little bit earlier by using <code>Hash#fetch</code></p>\n\n<pre><code>my_hash.fetch([os, env]).call\n</code></pre>\n\n<p>The other caveat is that you have to define <code>my_hash</code> in the same scope where the job (e.g. <code>exec_pci</code>) is supposed to be called, otherwise you may not be able to call those methods correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1514776474, "last_edit_date": 1514776474, "creation_date": 1514773339, "answer_id": 48046816, "question_id": 48043531, "link": "https://stackoverflow.com/questions/48043531/passing-tuple-to-ruby-hash/48046816#48046816", "title": "passing tuple to ruby hash", "body": "<p>I suggest you do that as follows.</p>\n\n<pre><code>def doit(os, *ssh)\n  case os\n  when 'windows'\n    puts \"os = 'windows'\" # remove when debugged\n    raise ArgumentError unless ssh.empty?\n    # Call code for WinRM connection\n  when 'redhat'\n    puts \"os = 'redhat'\" # remove when debugged\n    puts \"ssh = #{ssh}\" # remove when debugged\n    raise ArgumentError unless ssh.size == 1\n    # Call code for SSH connection\n    if ssh.first == 'pci'\n      # Do stuff for PCI\n      exec_pci\n    else\n      # Do stuff for non PCI\n      exec_non_pci\n    end\n  else\n    puts \"os != 'windows' and os != 'redhat'\" # remove when debugged\n    # Raise an exception\n    raise StandardError\n  end\nend\n\ndef exec_pci\n  puts \"exec_pic called\"\nend\n\ndef exec_non_pci\n  puts \"exec_non_pic called\"\nend\n</code></pre>\n\n<p></p>\n\n<pre><code>doit 'windows'\n  #-&gt; os = 'windows'\ndoit 'windows', 'cat'\n  #-&gt; os = 'windows'\n  #=&gt; ArgumentError: ArgumentError\ndoit 'redhat', 'pci'\n  #-&gt; os = 'redhat'\n  #-&gt; ssh = [\"pci\"]\n  #-&gt; exec_non_pic called\ndoit 'redhat', 'cat'\n  #-&gt; os = 'redhat'\n  #-&gt; ssh = [\"cat\"]\n  #-&gt; exec_non_pic called\ndoit 'redhat'\n  #-&gt; os = 'redhat'\n  #-&gt; ssh = []\n  #=&gt; ArgumentError: ArgumentError\ndoit 'redhat', 'cat', 'dog'\n  #-&gt; os = 'redhat'\n  #=&gt; ssh = [\"cat\", \"dog\"]\n  #=&gt; ArgumentError: ArgumentError\ndoit 'cat'\n  #-&gt; os != 'windows' and os != 'redhat'\n  #=&gt; StandardError: StandardError\n</code></pre>\n\n<p>If have assumed <code>exec_pci</code> and <code>exec_non_pci</code> are unstated methods. If they are instead local variables not shown in the question, one would need to modify the method <code>doit</code> so that it would be called, for example,</p>\n\n<pre><code>doit 'redhat', 'pci', exec_pic\n</code></pre>\n\n<p>To call <code>doit('windows', arg)</code>, where <code>arg</code> is artificial value (e.g., <code>nil</code>) that is not used, is in my opinion bad programming practice.</p>\n"}], "owner": {"reputation": 816, "user_id": 5006720, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/9pfXu.png?s=128&g=1", "display_name": "ARL", "link": "https://stackoverflow.com/users/5006720/arl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 48043750, "answer_count": 2, "score": 0, "last_activity_date": 1514776474, "creation_date": 1514732865, "question_id": 48043531, "link": "https://stackoverflow.com/questions/48043531/passing-tuple-to-ruby-hash", "title": "passing tuple to ruby hash", "body": "<p>I am currently using a case statement to determine the correct flow.\nIt looks like this:</p>\n\n<pre><code>case os\n  when 'windows'\n  # If Windows - Call code for WinRM connection\n  when 'redhat'\n  # If Redhat - Call code for SSH connection\n    if env == 'pci'\n      # Do stuff for PCI\n      exec_pci\n    else\n      # Do stuff for non PCI\n      exec_non_pci\n    end\n  else\n    # Raise some exception\nend\n</code></pre>\n\n<p>I know that hash/dictionaries use a single key to look up a value(s) but is it possible to setup a lookup hashtable where I could pass it a tuple?</p>\n\n<p>Im looking to do something like this:</p>\n\n<pre><code>os = 'redhat'\nenv = 'pci'\n</code></pre>\n\n<p>Where I would call the following: <code>my_hash[(os, env)]</code> and expecting to receive a value returned like <code>exec_pci</code></p>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1514729210, "post_id": 48043039, "comment_id": 83056942, "body": "The problem is that aliases are expanded at parse time, which means <code>say_hello</code> would need to be defined before your shell even executes either the source command <i>or</i> the <code>shopt</code> command. This is another instance where aliases just aren&#39;t suitable."}], "answers": [{"comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "reply_to_user": {"reputation": 183, "user_id": 9153285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1037747614/picture?type=large", "display_name": "Philippe Perret", "link": "https://stackoverflow.com/users/9153285/philippe-perret"}, "edited": false, "score": 0, "creation_date": 1514886042, "post_id": 48048759, "comment_id": 83089433, "body": "@PhilippePerret I haven&#39;t rejected your edit. However, literal newline should also work and makes the code much more readable. So does <code>source</code> instead of <code>.</code>."}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "reply_to_user": {"reputation": 183, "user_id": 9153285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1037747614/picture?type=large", "display_name": "Philippe Perret", "link": "https://stackoverflow.com/users/9153285/philippe-perret"}, "edited": false, "score": 0, "creation_date": 1514887248, "post_id": 48048759, "comment_id": 83089955, "body": "@PhilippePerret it doesn&#39;t work for you when copy pasted exactly like this? That is hard to believe. Also, you can see who rejected your edit on your profile under actions."}, {"owner": {"reputation": 183, "user_id": 9153285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1037747614/picture?type=large", "display_name": "Philippe Perret", "link": "https://stackoverflow.com/users/9153285/philippe-perret"}, "edited": false, "score": 1, "creation_date": 1514901315, "post_id": 48048759, "comment_id": 83097009, "body": "Au temps pour moi, @PesaThe. I didn&#39;t know backtick works as an heredoc\u2026 But it works, sorry. Even if I think <code>\\n</code> is much clearer. I&#39;m afraid some people doesn&#39;t understand your <code>&lt;new line&gt;</code>. Moreover, a real return is bad looking with indentation. And as far I know, <code>source</code> is not <code>.</code>. But it works in this case, too."}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "reply_to_user": {"reputation": 183, "user_id": 9153285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1037747614/picture?type=large", "display_name": "Philippe Perret", "link": "https://stackoverflow.com/users/9153285/philippe-perret"}, "edited": false, "score": 0, "creation_date": 1514901679, "post_id": 48048759, "comment_id": 83097206, "body": "@PhilippePerret The main thing is that it works for you :) I chose &quot;real&quot; newline and <code>source</code> because they both made the code seem much more clear to me. <code>source</code> is the equivalent of <code>.</code>, they are synonyms, at least in <code>bash</code>. I believe <code>.</code> should be used if you are concerned about compatibility though."}], "tags": [], "owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "is_accepted": true, "score": 0, "last_activity_date": 1514801312, "creation_date": 1514801312, "answer_id": 48048759, "question_id": 48043039, "link": "https://stackoverflow.com/questions/48043039/how-can-i-use-aliases-defined-in-bash-profile-in-a-backtick-operation-with-ruby/48048759#48048759", "title": "How can I use aliases defined in bash profile in a backtick operation with ruby?", "body": "<pre><code>res = `bash -c \"source /Users/thatsme/.bash_profile; shopt -s expand_aliases\nsay_hello\"`\n</code></pre>\n\n<ul>\n<li><code>shopt</code> is needed because aliases are not expanded when the shell is not interactive</li>\n<li><code>&lt;newline&gt;</code> is necessary because aliases are expanded at parse time. <code>bash</code> parses the line and tries to expand aliases. Only after that are the commands executed (including <code>source</code>). Consequently, you need to put it on a new line</li>\n</ul>\n"}], "owner": {"reputation": 183, "user_id": 9153285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1037747614/picture?type=large", "display_name": "Philippe Perret", "link": "https://stackoverflow.com/users/9153285/philippe-perret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 48048759, "answer_count": 1, "score": 0, "last_activity_date": 1514801312, "creation_date": 1514728556, "question_id": 48043039, "link": "https://stackoverflow.com/questions/48043039/how-can-i-use-aliases-defined-in-bash-profile-in-a-backtick-operation-with-ruby", "title": "How can I use aliases defined in bash profile in a backtick operation with ruby?", "body": "<p>After a long time googling and SOing\u2026</p>\n\n<p>I've got some aliases defined in my <code>.bash_profile</code> file. For instance:</p>\n\n<pre><code>alias say_hello=\"echo 'Hello!'\"\n</code></pre>\n\n<p>I want to use them in a backtick operation in ruby, sourcing my bash profile. But I fail.</p>\n\n<p>I tried:</p>\n\n<pre><code># (ruby code)\nres = `. /Users/thatsme/.bash_profile;say_hello`\n# =&gt; sh: say_hello: command not found\n</code></pre>\n\n<p>Or even:</p>\n\n<pre><code>res = `. /Users/thatsme/.bash_profile;shopt -s expand_aliases;say_hello`\n# =&gt; sh: say_hello: command not found\n</code></pre>\n\n<p>(note: I don't want to hard-code the alias in the backtick operation).</p>\n\n<h2>Note</h2>\n\n<p>The bash profile is well sourced. If I put <code>echo \"I'm sourced\"</code> in it, my backtick operation echoes the text.</p>\n\n<pre><code>res = `. /Users/thatsme/.bash_profile;say_hello`\n# =&gt; \n    sh: say_hello: command not found\n    I'm sourced\n</code></pre>\n\n<p>Thanks for help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "console", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 25, "user_id": 4159953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a6c480443074dd80546850e55a9193?s=128&d=identicon&r=PG&f=1", "display_name": "Realitybites", "link": "https://stackoverflow.com/users/4159953/realitybites"}, "edited": false, "score": 0, "creation_date": 1514704654, "post_id": 48040697, "comment_id": 83051763, "body": "I have downloaded my working github copy of my bin folder for this app, and placed this over the existing empty bin folder, and this did NOT correct the problem."}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1514704851, "post_id": 48040697, "comment_id": 83051802, "body": "Can you put the command prompt screenshot"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1514705408, "post_id": 48040697, "comment_id": 83051879, "body": "it keep asking you to run <code>bundle install</code>  here <code>Install missing gem executables with </code>bundle install` and you are running <code>Bundle install</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4159953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a6c480443074dd80546850e55a9193?s=128&d=identicon&r=PG&f=1", "display_name": "Realitybites", "link": "https://stackoverflow.com/users/4159953/realitybites"}, "edited": false, "score": 0, "creation_date": 1514704712, "post_id": 48040717, "comment_id": 83051777, "body": "attempted both of these to no effect, rails still just gives me the new app option and nothing else."}, {"owner": {"reputation": 25, "user_id": 4159953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a6c480443074dd80546850e55a9193?s=128&d=identicon&r=PG&f=1", "display_name": "Realitybites", "link": "https://stackoverflow.com/users/4159953/realitybites"}, "edited": false, "score": 0, "creation_date": 1514704786, "post_id": 48040717, "comment_id": 83051790, "body": "rake update:bin gives me rake aborted, &quot;don&#39;t know how to build task&quot;"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "reply_to_user": {"reputation": 25, "user_id": 4159953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a6c480443074dd80546850e55a9193?s=128&d=identicon&r=PG&f=1", "display_name": "Realitybites", "link": "https://stackoverflow.com/users/4159953/realitybites"}, "edited": false, "score": 0, "creation_date": 1514705103, "post_id": 48040717, "comment_id": 83051833, "body": "@Realitybites You can use <code>rails -T | grep &#39;your task name&#39;</code> to get the right rake command."}, {"owner": {"reputation": 25, "user_id": 4159953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a6c480443074dd80546850e55a9193?s=128&d=identicon&r=PG&f=1", "display_name": "Realitybites", "link": "https://stackoverflow.com/users/4159953/realitybites"}, "edited": false, "score": 0, "creation_date": 1514705294, "post_id": 48040717, "comment_id": 83051865, "body": "Daniel, on the money,    rails app:update noted conflicts from my git clone (for whatever reason), post up as a answer and i&#39;ll mark it was correct."}], "tags": [], "owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "is_accepted": true, "score": 0, "last_activity_date": 1514704600, "creation_date": 1514704600, "answer_id": 48040717, "question_id": 48040697, "link": "https://stackoverflow.com/questions/48040697/rails-console-not-launching-im-in-the-directory/48040717#48040717", "title": "Rails console not launching [I&#39;m in the directory]", "body": "<p><code>rails update:bin</code> or <code>rake update:bin</code> These are the right ways that execute a rake task.</p>\n"}], "owner": {"reputation": 25, "user_id": 4159953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a6c480443074dd80546850e55a9193?s=128&d=identicon&r=PG&f=1", "display_name": "Realitybites", "link": "https://stackoverflow.com/users/4159953/realitybites"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 48040717, "answer_count": 1, "score": 0, "last_activity_date": 1514704600, "creation_date": 1514704400, "question_id": 48040697, "link": "https://stackoverflow.com/questions/48040697/rails-console-not-launching-im-in-the-directory", "title": "Rails console not launching [I&#39;m in the directory]", "body": "<p>Rails C and Rails S not working when in the correct directory.</p>\n\n<p>have tried:</p>\n\n<pre><code>$ bundle exec rake rails:update:bin\n</code></pre>\n\n<p>this returns the following error:</p>\n\n<pre><code>bundler: command not found: rails:update:bin\nInstall missing gem executables with `bundle install`\n</code></pre>\n\n<p>I have ran:</p>\n\n<pre><code>Bundle Install\n</code></pre>\n\n<p>this still returns the same error</p>\n\n<p>Have changed directories (higher and lower), repeated steps and attempted commends for same result.</p>\n\n<p>I was running rails server, when i stopped the server and tried to restart server, the error appeared, so I'm thinking this has something to do with a physical location change (potentially the bin file), which is consistent as when I try and run a bin/rails command, i'm receiving an error of:</p>\n\n<pre><code>bundler: command not found: rails:update:bin\nInstall missing gem executables with `bundle install`\n</code></pre>\n\n<p>I have tried to rake the bin folder as below:</p>\n\n<pre><code>rake rails:update:bin\n</code></pre>\n\n<p>however I am receiving this error:</p>\n\n<pre><code>rake aborted!\nDon't know how to build task 'rails:update:bin' (see --tasks)\n</code></pre>\n\n<p>Finally, I have checked the physical location and there is a .bin file, however this folder is empty and it's not in a .gitignore directory.</p>\n\n<p>Ancillary information\nRails version: 5.1.4\nruby version: 2.3.4\nServer: heroku\nOS. Ubuntu 16.04 (via virtualbox).\nI have not upgraded rails, this is a fresh install</p>\n\n<p><strong>I am at a loss.</strong></p>\n"}, {"tags": ["ruby", "exception", "hashrocket"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 4, "creation_date": 1514690950, "post_id": 48039641, "comment_id": 83049900, "body": "Nitpicking: &quot;JSON-style&quot; would actually be <code>&quot;ingredient1&quot;: &quot;beef&quot;</code> since all keys in JSON objects are quoted strings. And if you never use hashrockets then you&#39;re artificially limiting how you use hashes in Ruby: hash keys can be almost anything, not just symbols. That said, I&#39;m not aware of any <i>Javascript-object-literal</i>-style syntax for <code>rescue</code> in Ruby."}, {"owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1514707123, "post_id": 48039641, "comment_id": 83052164, "body": "Yes, it is nitpicking and somewhat irrelevant to my question.  I like the shortest cleanest way.  Yes, I can use quoted strings, but rarely do unless it&#39;s forced (for example using Sidekiq -- even then there are add-ons that allow hashes with indifferent access) but why should I, its one more character to type per attribute and annoying.  I&#39;ll edit to json-ish."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1514727592, "post_id": 48039641, "comment_id": 83056540, "body": "How is that a hashrocket, not just a rocket? Does it have anything to do with a hash?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1514904970, "post_id": 48039641, "comment_id": 83098988, "body": "@MichaelKMadison you realize that &quot;indifferent access hashes&quot; actually use <code>String</code> keys instead of <code>Symbol</code> keys correct? <a href=\"https://github.com/rails/rails/blob/master/activesupport/lib/active_support/hash_with_indifferent_access.rb#L284\" rel=\"nofollow noreferrer\"><code>ActiveSupport::HashWithIndifferentAccess</code></a> Also &quot;hash rocket&quot; syntax is needed for other implementations too, such as conversion of a variable to a literal hash key (e.g <code>object.each {|k,v| {k =&gt; v}}</code>) because <code>{k: v}</code> would have a key of <code>:k</code> (Symbol) rather than the value of <code>k</code>"}, {"owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514919186, "post_id": 48039641, "comment_id": 83105791, "body": "@engineersmnky Thanks for your comment. It doesn&#39;t necessarily help at all though. Indifferent access exists to allow people to write their code as they see fit in the spirit of programmer happiness. The implementation minutia doesn&#39;t really matter."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514920366, "post_id": 48039641, "comment_id": 83106302, "body": "@MichaelKMadison thank you for you comment although you may feel free to disregard the first portion of my comment which you seem to be regarding as &quot;arrogant&quot; and pugnacious the second part of my comment still holds water and the purpose was simply to show that &quot;hash rockets&quot; are a syntactical necessity in the ruby programming language and should not be seen as ugly or second class"}, {"owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "edited": false, "score": 0, "creation_date": 1515437370, "post_id": 48039641, "comment_id": 83291622, "body": "@engineersdmnky In general, I feel most people on stack overflow behave in a way that is less than efficient.  The first wave is usually the &quot;chip shots&quot; -- i.e. completely meaningless things pointed out that are technically true.  Like &quot;hey you misspelled this&quot; or &quot;technically this is... blah blah blah&quot; but completely irrelevant to the question.  If you already understand the language used, well that&#39;s the point of communication.  If you already know you&#39;re nitpicking, have the discipline to just stop and ask if your response is net positive."}, {"owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1515437656, "post_id": 48039641, "comment_id": 83291756, "body": "@engineersmnky The third wave of annoying responses is the category you fall into.  You gave you something somewhat arcane that you believe is true yet still irrelevant to answering the question. The form I detest the most, is a comment or answer that falls in the semi religious scope of invalidation &quot;what you&#39;re asking for, you shouldn&#39;t ask for, let me tell you why.&quot;  Instead of answering my question, you commented that I should not feel the way I feel about hashrockets... oh excuse me rockets, b/c God forbid you still understand what I mean but it&#39;s not in reference to hashes."}, {"owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "edited": false, "score": 0, "creation_date": 1515437777, "post_id": 48039641, "comment_id": 83291809, "body": "that&#39;s right... I&#39;m waiting for someone to ask what was the second wave :) complete waste."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1515438347, "post_id": 48039641, "comment_id": 83292083, "body": "@MichaelKMadison there is nothing arcane about implementation when an indifferent <code>Hash</code> is multitudes slower due to the transformation overhead. (Fact not belief) and I mentioned nothing about &quot;rockets&quot; and I simply quoted &quot;hash rocket&quot; because it is a terminology of the <code>=&gt;</code> notation. It seems fairly hypocritical of you to  consider others &quot;arrogant&quot; and &quot;condescending&quot; and then turn around and act in such an elitist manner. All I was saying is this syntax is a core component of the language and a requirement in many cases. I wish you all the best in your pursuit of a sexier implementation."}, {"owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "edited": false, "score": 0, "creation_date": 1515438501, "post_id": 48039641, "comment_id": 83292152, "body": "sheesh, let&#39;s continue arguing and further dilute actual content."}], "answers": [{"comments": [{"owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "edited": false, "score": 0, "creation_date": 1514707275, "post_id": 48039826, "comment_id": 83052197, "body": "Nooooo. hopefully someone knows some beautiful syntactic sugar"}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 2, "last_activity_date": 1514692253, "creation_date": 1514692253, "answer_id": 48039826, "question_id": 48039641, "link": "https://stackoverflow.com/questions/48039641/ruby-exception-hashrocket-is-there-an-alternative-json-styled-way-to-catch-an-e/48039826#48039826", "title": "Ruby exception hashrocket; is there an alternative json-styled way to catch an exception?", "body": "<p>No, AFAIK this is the syntax required for creating a reference to the caught exception.</p>\n"}, {"comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 2, "creation_date": 1514773296, "post_id": 48044654, "comment_id": 83065089, "body": "While this is interesting to know, using this technique would be a huge disservice to the code base, teammates, and ultimately oneself. Conventions don&#39;t always have to be followed, but there should be a compelling reason for not doing so. Having a subjective revulsion to a hashrocket is not, IMO, such a reason."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1514782393, "post_id": 48044654, "comment_id": 83066023, "body": "The code at <a href=\"https://gist.github.com/keithrbennett/93571e3aff74ca2cf1343d905e8a20ae\" rel=\"nofollow noreferrer\">gist.github.com/keithrbennett/93571e3aff74ca2cf1343d905e8a20&zwnj;&#8203;ae</a> illustrates that $! is a threadlocal and not a global variable."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1514907888, "post_id": 48044654, "comment_id": 83100512, "body": "@KeithBennett by its designation <code>$</code> it is technically a global as shown in the post due to its declaration in ruby globals.  It just happens to be a thread global allowing it to retain thread safe values. Its assignment is also block temporary <a href=\"https://repl.it/@engineersmnky/JuicyFarawayAmericanriverotter\" rel=\"nofollow noreferrer\">Examples of Both</a>. Explanatory outline of &quot;globals&quot; from <a href=\"https://idiosyncratic-ruby.com/9-globalization.html\" rel=\"nofollow noreferrer\">Idiosyncratic Ruby</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514907899, "post_id": 48044654, "comment_id": 83100517, "body": "Additionally this <a href=\"http://avdi.org/talks/rockymtnruby-2011/things-you-didnt-know-about-exceptions.html\" rel=\"nofollow noreferrer\">Great Slideshow</a> on other exceptional things an provides one of the only reasonable examples I have ever seen for using <code>$!</code>"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1514908436, "post_id": 48044654, "comment_id": 83100838, "body": "Stating something in the documentation is one thing; observing its actual behavior is another. It is, as you say, documented in the list of globals, but (unless my observation is flawed) there is a separate variable in memory for each thread. So in the usual sense of the word &#39;global&#39;, that is 1 value per VM, it is <i>not</i> global. I believe it to be an unfortunate omission from the documentation. The regexp <code>$</code> variables are also thread-specific."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1514909047, "post_id": 48044654, "comment_id": 83101182, "body": "@KeithBennett I agree it is slightly misleading in the term &quot;global&quot; (which apparently to ruby means predefined and always available). That being said <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/English.rb\" rel=\"nofollow noreferrer\"><code>english.rb</code></a> allows for a bit more &quot;explanatory&quot; version of the proposed answer using <code>$ERROR_INFO</code> as an alias for <code>$!</code> which I think lends greatly to the readability."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 3, "last_activity_date": 1514742769, "creation_date": 1514742769, "answer_id": 48044654, "question_id": 48039641, "link": "https://stackoverflow.com/questions/48039641/ruby-exception-hashrocket-is-there-an-alternative-json-styled-way-to-catch-an-e/48044654#48044654", "title": "Ruby exception hashrocket; is there an alternative json-styled way to catch an exception?", "body": "<p>If you absolutely want to get rid of it, you can fall back to some of <a href=\"https://docs.ruby-lang.org/en/2.4.0/globals_rdoc.html\" rel=\"nofollow noreferrer\">Ruby's Global Variables</a>, specifically</p>\n\n<blockquote>\n  <p>$!<br>\n  The exception information message set by 'raise'.<br>\n  $@<br>\n  Array of backtrace of the last exception thrown.</p>\n</blockquote>\n\n<pre><code>begin\n  raise ArgumentError, 'Your argument is invalid'\nrescue ArgumentError\n  puts \"#{$!.message}\\nBacktrace Begin:\\n#{$@.join(\"\\n\")}\"\n  # or\n  puts \"#{$!.message}\\nBacktrace Begin:\\n#{$!.backtrace.join(\"\\n\")}\"\nend\n</code></pre>\n\n<p>I've never used any of the globals in an any real applications, so not sure what type of things you might want to watch out for (if multiple threads throwing different errors simultaneously* might be an issue, for example).</p>\n"}], "owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "accepted_answer_id": 48044654, "answer_count": 2, "score": -1, "last_activity_date": 1514917700, "creation_date": 1514689618, "last_edit_date": 1514917700, "question_id": 48039641, "link": "https://stackoverflow.com/questions/48039641/ruby-exception-hashrocket-is-there-an-alternative-json-styled-way-to-catch-an-e", "title": "Ruby exception hashrocket; is there an alternative json-styled way to catch an exception?", "body": "<p>So, for hashes in Ruby you can use hashrockets like this:</p>\n\n<pre><code>corned_beef = {\n    :ingredient1 =&gt; \"beef\",\n    :ingredient2 =&gt; \"potatoes\"\n}\n</code></pre>\n\n<p>or the more concise json-ish style.</p>\n\n<pre><code>corned_beef = {\n    ingredient1: \"beef\",\n    ingredient2: \"potatoes\"\n}\n</code></pre>\n\n<p>Is there a json-ish styled way to catch Ruby exceptions? The normal way is this:</p>\n\n<pre><code>begin\n    # ...blah blah...\nrescue ActiveRecord::RecordNotFound =&gt; e\n    logger.debug { \"Where's da beef?\" }\nrescue =&gt; e\n    logger.debug { \"#{e.message}\\nBacktrace Begin:\\n #\n        {e.backtrace.join(\"\\n\")}\" }\nelse\n    # ...blah blah...\nend\n</code></pre>\n\n<p>I've started to hate seeing hashrockets in my code, even for this. Someone please educated me.</p>\n\n<p>EDIT:\nFor some reason, this has attracted comments from the kind of people who have code-religious arrogant condescending judgement.  This is a forum for questions, if you don't like the question, kindly close your window.  Ruby was optimized for programmer happiness. My question is seeking what I deem cleaner sexier code. What is not wanted is an expression of lots of opinions that do nothing toward helping achieve an answer.  I am a good programmer with legacy code that has been in production serving billions and is probably older than most of you. Please stop shoveling pointless opinions if it doesn't answer the question. So far, it doesn't look like what I'm seeking exists. That's fine. </p>\n"}, {"tags": ["ruby", "rubygems", "toml"], "answers": [{"comments": [{"owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "reply_to_user": {"reputation": 303, "user_id": 9157170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b07a2cf5dbb44917369b8a14117456?s=128&d=identicon&r=PG&f=1", "display_name": "Loku", "link": "https://stackoverflow.com/users/9157170/loku"}, "edited": false, "score": 0, "creation_date": 1514689082, "post_id": 48039583, "comment_id": 83049612, "body": "@Loku I misread the version. In your Gemfile, you specify <code>gem &quot;toml-rb&quot;, &quot;~&gt; 0.3.8&quot;</code>. Also, you can see when you run <code>bundle info  toml-rb</code>, it shows you v0.3.15 is installed."}], "tags": [], "owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "is_accepted": true, "score": 1, "last_activity_date": 1514688993, "last_edit_date": 1592644375, "creation_date": 1514688672, "answer_id": 48039583, "question_id": 48039557, "link": "https://stackoverflow.com/questions/48039557/cant-load-such-file-toml-rb-although-the-gem-is-installed/48039583#48039583", "title": "Can&#39;t load such file - toml-rb, although the gem is installed", "body": "<p>It looks like you're using v0.3.15 of <code>toml-rb</code>. At that point, it was referred to simply as <code>toml</code>.</p>\n<p>Try this:</p>\n<pre><code>require &quot;toml&quot;\n</code></pre>\n<p>Here's an excerpt from the <a href=\"https://github.com/emancu/toml-rb/tree/v0.3.15\" rel=\"nofollow noreferrer\">README for v0.3.15</a>:</p>\n<blockquote>\n<pre><code>require 'toml'\n\n# From a file!\npath = File.join(File.dirname(__FILE__), 'path', 'to', 'file')\nTOML.load_file(path)\n</code></pre>\n</blockquote>\n<p>Beginning at v1.0.0, the <code>toml-rb</code> would be required like so: <code>require 'toml-rb'</code>. Here's the release where this was changed: <a href=\"https://github.com/emancu/toml-rb/releases/tag/v1.0.0\" rel=\"nofollow noreferrer\">https://github.com/emancu/toml-rb/releases/tag/v1.0.0</a></p>\n"}], "owner": {"reputation": 303, "user_id": 9157170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b07a2cf5dbb44917369b8a14117456?s=128&d=identicon&r=PG&f=1", "display_name": "Loku", "link": "https://stackoverflow.com/users/9157170/loku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "accepted_answer_id": 48039583, "answer_count": 1, "score": 3, "last_activity_date": 1514688993, "creation_date": 1514688311, "question_id": 48039557, "link": "https://stackoverflow.com/questions/48039557/cant-load-such-file-toml-rb-although-the-gem-is-installed", "title": "Can&#39;t load such file - toml-rb, although the gem is installed", "body": "<p>My Gemfile:</p>\n\n<pre><code>gem \"toml-rb\", \"~&gt; 0.3.8\"\n</code></pre>\n\n<p>*.rb file:</p>\n\n<pre><code>require \"toml-rb\"\n</code></pre>\n\n<p>Locally it works, on a remote server - error:</p>\n\n<pre><code>/home/user_123/.rubies/ruby-2.4.2/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- toml-rb (LoadError)\n</code></pre>\n\n<p>Although I've run \"bundle\" and </p>\n\n<pre><code>$ bundle info  toml-rb\n    * toml-rb (0.3.15)\n    Summary: TOML parser in ruby, for ruby.\n    Homepage: http://github.com/emancu/toml-rb\n    Path: /home/user_123/.gem/ruby/2.4.2/gems/toml-rb-0.3.15\n</code></pre>\n\n<p>What's the matter?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "jbuilder"], "comments": [{"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1514688728, "post_id": 48039453, "comment_id": 83049546, "body": "Do you have <code>User</code>, <code>Gallery</code> and <code>Picture</code> models? Does <code>Gallery</code> models have many pictures and accepts nested attributes for they?"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "reply_to_user": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1514693190, "post_id": 48039453, "comment_id": 83050207, "body": "yes and everything is saving correctly. I am just looking at the jbuilder gem and it says you can extract attributes so just checking that atm."}], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "is_accepted": false, "score": 0, "last_activity_date": 1515388956, "creation_date": 1515388956, "answer_id": 48144624, "question_id": 48039453, "link": "https://stackoverflow.com/questions/48039453/save-json-block-of-code-into-nested-model-ruby-rails/48144624#48144624", "title": "save json block of code into nested model ruby rails", "body": "<p>Fixed this with Jbuilder.</p>\n\n<pre><code>def to_jbuilder\n  Jbuilder.new\nend\n\ndef photos(u)\n  json = to_jbuilder\n  first_page_photos = u.facebook.get_connection(\"me\", \"photos?fields=album,images,event,height,width,link,place&amp;type=uploaded\")\n  photos = json.photo first_page_photos do |photo|\n    json.fb_album_created_time photo['album']['created_time']\n    json.fb_album_name photo['album']['name']\n    json.fb_album_id photo['album']['id']\n    json.fb_source photo['images'][0]['source']\n    json.fb_height photo['images'][0]['height']\n    json.fb_width photo['images'][0]['width']\n    json.fb_link photo['link']\n    json.fb_pic_id photo['id']\n  end\n  params = { gallery: { name: 'Facebook Pictures', pictures_attributes: photos }}\n  gallery = u.galleries.new(params[:gallery])\n  gallery.save!\nend\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515388956, "creation_date": 1514686901, "question_id": 48039453, "link": "https://stackoverflow.com/questions/48039453/save-json-block-of-code-into-nested-model-ruby-rails", "title": "save json block of code into nested model ruby rails", "body": "<p>I get a hash of results from <code>get_connection</code> with koala gem which looks something like this</p>\n\n<pre><code>=&gt; [{\"album\"=&gt;{\"created_time\"=&gt;\"2011-05-07T23:06:33+0000\", \"name\"=&gt;\"Timeline Photos\", \n\"id\"=&gt;\"10150170707957371\"}, \"images\"=&gt;[{\"height\"=&gt;1150, \"source\"=&gt;\"https://scontent.xx.fbcdn.net/v/t31.0-8/24173690_10155086191327371_1463889654041392146_o.jpg?oh=8adec503c6066dc20d1be5d71262a03e&amp;oe=5AFEED4A\",\n\"width\"=&gt;2048}, {\"album\"=&gt;{\"created_time\"=&gt;\"2011-05-07T23:06:33+0000\", \"name\"=&gt;\"Timeline Photos\", \n\"id\"=&gt;\"10150170707957371\"}, \"images\"=&gt;[{\"height\"=&gt;1188, \"source\"=&gt;\"https://scontent.xx.fbcdn.net/v/t31.0-8/24302317_10155086179077371_4000719398736973936_o.jpg?oh=6eba399a4067b847cb38ef245e687321&amp;oe=5AFC195A\", \n\"width\"=&gt;2639}]}]\n</code></pre>\n\n<p>I was looking to save photos like rails does with the params hash but realized it only creates a gallery for each photo with a <code>do</code> block .</p>\n\n<pre><code>def photos(user)\n  photos = user.facebook.get_connection(\"me\", \"photos?fields=album,images,event,height,width,link,place&amp;type=uploaded\")\n    photos.each do |photo|\n      params = { gallery: {\n      name: 'Facebook Pictures', pictures_attributes: [\n      { fb_album_created_time: photo['album']['created_time'],\n        fb_album_name: photo['album']['name'],\n        fb_album_id: photo['album']['id'],\n        fb_source: photo['images'][0]['source'],\n        fb_height: photo['images'][0]['height'],\n        fb_width: photo['images'][0]['width'],\n        fb_link: photo['link'],\n        fb_pic_id: photo['id'] }\n        ]\n      }\n    }\n    gallery = user.galleries.new(params[:gallery])\n    gallery.save!\n  end     \nend\n</code></pre>\n\n<p>How can I execute my nested picture attributes so they save to one gallery. Even a gem which could help me. I was looking at the rails/jbuider gem but not sure if its easier without a gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7241790, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/969fd3802de1a6d426a7e21d773bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "timboon", "link": "https://stackoverflow.com/users/7241790/timboon"}, "edited": false, "score": 0, "creation_date": 1514687244, "post_id": 48039462, "comment_id": 83049361, "body": "I am getting undefined method `end_with?"}, {"owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "reply_to_user": {"reputation": 87, "user_id": 7241790, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/969fd3802de1a6d426a7e21d773bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "timboon", "link": "https://stackoverflow.com/users/7241790/timboon"}, "edited": false, "score": 0, "creation_date": 1514687664, "post_id": 48039462, "comment_id": 83049406, "body": "@timboon You may need to use <code>hash[&quot;symbol&quot;]</code> instead of <code>hash[:symbol]</code>. It looks like my Rails console automatically converted the keys to symbols. Let me know if that works."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 87, "user_id": 7241790, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/969fd3802de1a6d426a7e21d773bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "timboon", "link": "https://stackoverflow.com/users/7241790/timboon"}, "edited": false, "score": 0, "creation_date": 1514911547, "post_id": 48039462, "comment_id": 83102578, "body": "That is not your rails console that did this but the question posted. You see <code>&quot;symbol&quot;: &quot;XYZ&quot;</code> in <code>Hash</code> literal notation means the key is a <code>Symbol</code> and as such it will try to convert it to one (<code>#to_sym</code> or <code>intern</code>). In this case it is cleanly convertible (adheres to symbol notation) so the key simply becomes <code>:symbol</code>. If say the key was <code>&quot;123symbol&quot;: &quot;XYZ&quot;</code> well &quot;123symbol&quot; can not be cleanly conerverted so the <code>Symbol</code> would actually be <code>:&quot;123symbol&quot;</code>. @timboon The proper notation for <code>String</code> keys in a <code>Hash</code> would be <code>&quot;symbol&quot; =&gt; &quot;XYZ&quot;</code>"}], "tags": [], "owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "is_accepted": true, "score": 1, "last_activity_date": 1514687389, "last_edit_date": 1514687389, "creation_date": 1514687065, "answer_id": 48039462, "question_id": 48039448, "link": "https://stackoverflow.com/questions/48039448/ror-find-if-part-of-a-string-matches-an-array-of-hashes/48039462#48039462", "title": "RoR - Find if part of a string matches an array of hashes", "body": "<p>You can use something like this:</p>\n\n<pre><code>array.select { |hash| hash[:symbol].end_with? \"ETL\" }\n</code></pre>\n\n<p>From the <a href=\"https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\">Ruby docs for select</a>:</p>\n\n<blockquote>\n  <p>Returns an array containing all elements of enum for which the given block returns a true value.</p>\n</blockquote>\n\n<p>You can also provide multiple suffixes to <code>end_with?</code> if you need to filter by multiple suffixes. For example:</p>\n\n<pre><code>array.select { |hash| hash[:symbol].end_with? \"ETL\", \"DEF\" }\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 7241790, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/969fd3802de1a6d426a7e21d773bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "timboon", "link": "https://stackoverflow.com/users/7241790/timboon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 48039462, "answer_count": 1, "score": 0, "last_activity_date": 1514687389, "creation_date": 1514686821, "question_id": 48039448, "link": "https://stackoverflow.com/questions/48039448/ror-find-if-part-of-a-string-matches-an-array-of-hashes", "title": "RoR - Find if part of a string matches an array of hashes", "body": "<p>I know there are a lot of similar questions but I am struggling to find a specific answer.</p>\n\n<p>i have an array of hashes with key of Symbol and a value of Price, I am looking to filter the array to only include the hashes that have a Symbol that ends in the letters ETL</p>\n\n<p>Data looks like: </p>\n\n<pre><code>[ [\n            {\n                \"symbol\": \"ABCDEF\",\n                \"price\": \"4\"\n            },\n            {\n                \"symbol\": \"GHIETL\",\n                \"price\": \"5\"\n            }\n        ]\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1514686282, "post_id": 48039407, "comment_id": 83049225, "body": "If OP wants the first position as 1 then <code>each.with_index(1)</code> is also an option."}, {"owner": {"reputation": 23, "user_id": 9004562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83357bd71181c1754bc12e052545b006?s=128&d=identicon&r=PG&f=1", "display_name": "Ryne Stajcar", "link": "https://stackoverflow.com/users/9004562/ryne-stajcar"}, "edited": false, "score": 0, "creation_date": 1514686472, "post_id": 48039407, "comment_id": 83049254, "body": "Thats exactly what I was looking for, thanks for the quick response."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1514686652, "post_id": 48039407, "comment_id": 83049280, "body": "@SagarPandya Reallly?  What version did that get introduced?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1514687002, "post_id": 48039407, "comment_id": 83049324, "body": "<code>Enumerator#with_index</code> has been around a while, since 1.9.1 at least."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1514686216, "creation_date": 1514686216, "answer_id": 48039407, "question_id": 48039384, "link": "https://stackoverflow.com/questions/48039384/calling-an-array-having-it-not-only-display-each-item-but-also-their-position-w/48039407#48039407", "title": "Calling an array, having it not only display each item but also their position within the array", "body": "<p>Use <code>each_with_index</code></p>\n\n<pre><code> array.each_with_index {|item, position| new_array &lt;&lt; \"#{item} is currently in position #{position}\"}\n</code></pre>\n\n<p>This will number the positions from 0, if you want to show the first position as position 1 then you can do <code>#{position + 1}</code></p>\n"}, {"comments": [{"owner": {"reputation": 1322, "user_id": 2693146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KTITg.jpg?s=128&g=1", "display_name": "Isiah Meadows", "link": "https://stackoverflow.com/users/2693146/isiah-meadows"}, "edited": false, "score": 0, "creation_date": 1514710664, "post_id": 48041173, "comment_id": 83052775, "body": "Welcome to Stack Overflow! You may wish to check out <a href=\"https://stackoverflow.com/help/how-to-answer\">this guide on how to write a good answer</a>, if you haven&#39;t already."}], "tags": [], "owner": {"reputation": 19, "user_id": 9157976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ac2de506c66a47c19e192f3b21f040?s=128&d=identicon&r=PG&f=1", "display_name": "L.E.H", "link": "https://stackoverflow.com/users/9157976/l-e-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1514710087, "creation_date": 1514710087, "answer_id": 48041173, "question_id": 48039384, "link": "https://stackoverflow.com/questions/48039384/calling-an-array-having-it-not-only-display-each-item-but-also-their-position-w/48041173#48041173", "title": "Calling an array, having it not only display each item but also their position within the array", "body": "<p>This could be another approach, using map.</p>\n\n<pre><code>def keeping_track(array)\n\n  array.each_index.map {|item| \"#{array[item]} is currently in position #{item + 1}\"}\n\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9004562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83357bd71181c1754bc12e052545b006?s=128&d=identicon&r=PG&f=1", "display_name": "Ryne Stajcar", "link": "https://stackoverflow.com/users/9004562/ryne-stajcar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 48039407, "answer_count": 2, "score": 0, "last_activity_date": 1514710087, "creation_date": 1514685862, "question_id": 48039384, "link": "https://stackoverflow.com/questions/48039384/calling-an-array-having-it-not-only-display-each-item-but-also-their-position-w", "title": "Calling an array, having it not only display each item but also their position within the array", "body": "<p>Trying to come up with a way to assign a specific position to a item in an array based off of the number of items that are in the array. To give an example, if I had 10 chairs in a row in front of me, based off of the first person walking in I would assign them the first chair second person the second chair and so on (basically what an array does). However everytime I add in an item to the array I want that item (when the array is called) to display its position at the end.</p>\n\n<pre><code>array = [\"item1 is in position 1\", \"item2 is in position 2\"...]\n</code></pre>\n\n<p>Here is my idea so far. Btw it is designed to be a simple way give each item a number based off of their position in the array.</p>\n\n<p><code>def keeping_track(array)\n   new_array = []\n   array.each {|item| new_array &lt;&lt; \"#{item} is currently in position ____\"}\n   return new_array\n end</code></p>\n\n<p>The ____ area is where im lost at, im also kind of new to ruby. I would think there is a way to call the items location in the array, add 1 then convert that number back into an integer but im just not sure where to even get started with that. Thanks in advance for any help.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 992, "user_id": 81408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b42cb9db9e802d4b05799d3f87079cbd?s=128&d=identicon&r=PG", "display_name": "San Diago", "link": "https://stackoverflow.com/users/81408/san-diago"}, "edited": false, "score": 0, "creation_date": 1514685507, "post_id": 48039253, "comment_id": 83049118, "body": "Thanks! I ended up going with the other answer because it&#39;s more direct, but this was very helpful."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1514684805, "last_edit_date": 1514684805, "creation_date": 1514683626, "answer_id": 48039253, "question_id": 48038966, "link": "https://stackoverflow.com/questions/48038966/how-to-achieve-something-like-mutually-binding-variables-in-ruby/48039253#48039253", "title": "How to achieve something like mutually binding variables in Ruby?", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.4.2/Proc.html\" rel=\"nofollow noreferrer\">Proc</a> objects.</p>\n\n<pre><code>a = 1\nb = a + 7 #=&gt; 8\n\nproc = Proc.new { b = a + 7  }        \n #=&gt; #&lt;Proc:0x0000000001038760@(irb):3&gt;\na = 2\nproc.call\nb #=&gt; 9\n</code></pre>\n\n<p>Quick overview on procs and lambas <a href=\"https://youtu.be/VBC-G6hahWA\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 992, "user_id": 81408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b42cb9db9e802d4b05799d3f87079cbd?s=128&d=identicon&r=PG", "display_name": "San Diago", "link": "https://stackoverflow.com/users/81408/san-diago"}, "edited": false, "score": 0, "creation_date": 1514685776, "post_id": 48039331, "comment_id": 83049164, "body": "Thanks! How would you go about it making it work the other way around, though? Just define <code>b=</code> manually to perform the same operation from the other side?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 992, "user_id": 81408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b42cb9db9e802d4b05799d3f87079cbd?s=128&d=identicon&r=PG", "display_name": "San Diago", "link": "https://stackoverflow.com/users/81408/san-diago"}, "edited": false, "score": 0, "creation_date": 1514686254, "post_id": 48039331, "comment_id": 83049221, "body": "Yes, you can. But in my experience, 2 methods changing one state is never a good idea. It leads to messy logic in the long run."}, {"owner": {"reputation": 992, "user_id": 81408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b42cb9db9e802d4b05799d3f87079cbd?s=128&d=identicon&r=PG", "display_name": "San Diago", "link": "https://stackoverflow.com/users/81408/san-diago"}, "edited": false, "score": 0, "creation_date": 1514686824, "post_id": 48039331, "comment_id": 83049303, "body": "Is there any way to achieve that same result in a safe way?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 992, "user_id": 81408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b42cb9db9e802d4b05799d3f87079cbd?s=128&d=identicon&r=PG", "display_name": "San Diago", "link": "https://stackoverflow.com/users/81408/san-diago"}, "edited": false, "score": 0, "creation_date": 1514688668, "post_id": 48039331, "comment_id": 83049540, "body": "I&#39;m sorry but I can&#39;t find one. You should ask yourself why you need this, and whether you really need it."}, {"owner": {"reputation": 992, "user_id": 81408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b42cb9db9e802d4b05799d3f87079cbd?s=128&d=identicon&r=PG", "display_name": "San Diago", "link": "https://stackoverflow.com/users/81408/san-diago"}, "edited": false, "score": 0, "creation_date": 1514689364, "post_id": 48039331, "comment_id": 83049654, "body": "Well, I&#39;m looking into system dynamics and this is a common pattern, as tracked variables change over time and yet their relationships persist. So I wanted to play around with it in Ruby a bit."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 2, "last_activity_date": 1514685495, "last_edit_date": 1514685495, "creation_date": 1514685094, "answer_id": 48039331, "question_id": 48038966, "link": "https://stackoverflow.com/questions/48038966/how-to-achieve-something-like-mutually-binding-variables-in-ruby/48039331#48039331", "title": "How to achieve something like mutually binding variables in Ruby?", "body": "<p>There's no such thing as mutually binding variables in Ruby. You can use anonymous functions (aka. lambdas) to achieve this.</p>\n\n<pre><code>a = 0\nb = -&gt; {a + 7}\nb.()  #=&gt; 7\n\na = 100\nb.()  #=&gt; 107\n</code></pre>\n\n<p>This is a bit ugly for me because <code>b</code> <strong>implicitly</strong> depends on <code>a</code>, which is not good in functional programming.</p>\n\n<p>You can also achieve this by traditional OO if you don't mind using <code>obj.attr</code>.</p>\n\n<pre><code>class Foo\n  attr_accessor :a\n\n  def b\n    a + 7\n  end\nend\n\nfoo = Foo.new\nfoo.a = 0\nfoo.b  #=&gt; 7\nfoo.a = 100\nfoo.b  #=&gt; 107\n</code></pre>\n"}], "owner": {"reputation": 992, "user_id": 81408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b42cb9db9e802d4b05799d3f87079cbd?s=128&d=identicon&r=PG", "display_name": "San Diago", "link": "https://stackoverflow.com/users/81408/san-diago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 48039331, "answer_count": 2, "score": 0, "last_activity_date": 1514685495, "creation_date": 1514679348, "question_id": 48038966, "link": "https://stackoverflow.com/questions/48038966/how-to-achieve-something-like-mutually-binding-variables-in-ruby", "title": "How to achieve something like mutually binding variables in Ruby?", "body": "<p>Consider <code>b = a + 7</code>.</p>\n\n<p>How can I have <code>b</code> keep up with <code>a</code> so that the statement remains true even as <code>a</code> changes over time?</p>\n\n<p>Not only that but how can I have it also work the other way around, updating <code>a</code> accordingly in case <code>b</code> is also changed?</p>\n"}, {"tags": ["ruby", "markdown"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514695124, "post_id": 48039494, "comment_id": 83050519, "body": "what&#39;s binding?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514709091, "post_id": 48039494, "comment_id": 83052488, "body": "binding is a special variable, search google for &quot;what is binding in ruby&quot; for more info. The ruby variables are assumed to be in the <code>file.md</code> file ..."}, {"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514729561, "post_id": 48039494, "comment_id": 83057051, "body": "why use metaprogramming without necessity? how will I pass a concrete variable, not all of the context?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514743596, "post_id": 48039494, "comment_id": 83060453, "body": "this isn&#39;t really much metaprogramming. If you want to only expose particular data and not the whole context, you can create a custom binding object, but i&#39;m not really sure why you would want to do that."}, {"owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 0, "creation_date": 1514777159, "post_id": 48039494, "comment_id": 83065468, "body": "<code>If you want to only expose particular data and not the whole context, you can create a custom binding object, </code> --- how?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "edited": false, "score": 1, "creation_date": 1514997959, "post_id": 48039494, "comment_id": 83137502, "body": "<a href=\"https://stackoverflow.com/questions/41589976/how-to-create-new-binding-and-assign-instance-variables-to-it-for-availability-i\" title=\"how to create new binding and assign instance variables to it for availability i\">stackoverflow.com/questions/41589976/&hellip;</a>"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 4, "last_activity_date": 1514802123, "last_edit_date": 1514802123, "creation_date": 1514687506, "answer_id": 48039494, "question_id": 48038852, "link": "https://stackoverflow.com/questions/48038852/how-to-pass-and-render-a-ruby-variable-in-a-markdown-file-gem-redcarpet/48039494#48039494", "title": "How to pass and render a ruby variable in a markdown file? Gem &quot;redcarpet&quot;", "body": "<p>You can use the <code>erb</code> library which is included in ruby, but you have to require it:</p>\n\n<pre><code>require 'erb'\nrequire 'redcarpet'\n\ninput = File.read \"./file.md\"\n\nmarkdown = Redcarpet::Markdown.new(Redcarpet::Render::HTML, autolink: true, tables: true)\n\noutput = markdown.render ERB.new(input).result(binding)\n\nFile.open(\"output.html\", \"w\") { |f| f.write output }\n</code></pre>\n\n<p>You can customize the markdown renderer by referencing the <a href=\"https://github.com/vmg/redcarpet\" rel=\"nofollow noreferrer\">redcarpet readme</a></p>\n"}], "owner": {"reputation": 51, "user_id": 8884082, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e16431148d13e3fa0b3b81b1f80f217?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8884082/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514802123, "creation_date": 1514677698, "question_id": 48038852, "link": "https://stackoverflow.com/questions/48038852/how-to-pass-and-render-a-ruby-variable-in-a-markdown-file-gem-redcarpet", "title": "How to pass and render a ruby variable in a markdown file? Gem &quot;redcarpet&quot;", "body": "<p>I'm using the gem \"redcarpet\". And I have a markdown file. I want to be able to render it with some ruby variables. Something like this:</p>\n\n<pre><code> # my_file.md\n\n ###Something\n fdafdsfdsfds\n\n ---\n\n &lt;% for n in my_numbers do %&gt;\n     &lt;%= n %&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>What's the proper way to do something like this? How can I pass and render a ruby \nvariable?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "trailblazer"], "answers": [{"comments": [{"owner": {"reputation": 2495, "user_id": 1538101, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/586aa5393df4f5c6d2ba6b89a930c8e2?s=128&d=identicon&r=PG", "display_name": "Jeremie Ges", "link": "https://stackoverflow.com/users/1538101/jeremie-ges"}, "edited": false, "score": 0, "creation_date": 1516835994, "post_id": 48431814, "comment_id": 83857907, "body": "I directly encrypted the data from params, worked like a charm :)"}], "tags": [], "owner": {"reputation": 36, "user_id": 4907938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0d9364af1aa88780a6ccbfb425fa54?s=128&d=identicon&r=PG", "display_name": "Bewitching Me", "link": "https://stackoverflow.com/users/4907938/bewitching-me"}, "is_accepted": true, "score": 2, "last_activity_date": 1516828985, "creation_date": 1516828985, "answer_id": 48431814, "question_id": 48038806, "link": "https://stackoverflow.com/questions/48038806/trailblazer-contracts-overrides-params/48431814#48431814", "title": "Trailblazer Contracts overrides params", "body": "<p>You should encrypt the value on the contract before it syncs to the model:</p>\n\n<pre><code>def assign_user_values(options, params:, **)\n  options['model'].token = options['data.token']\n  options['contract.default'].password = options['data.password']\n  options['model'].role = 'user'\nend\n</code></pre>\n\n<p>Since :token and :role are not in the contract, you can set these values directly on the model, but Contract::Persist() is going to sync the value from params, so change the value of the field in the contract before you sync to the model.</p>\n\n<p>Edit: Note, you could also just do this in the method that encrypts the password; no need to pass that data around internally between steps.</p>\n"}], "owner": {"reputation": 2495, "user_id": 1538101, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/586aa5393df4f5c6d2ba6b89a930c8e2?s=128&d=identicon&r=PG", "display_name": "Jeremie Ges", "link": "https://stackoverflow.com/users/1538101/jeremie-ges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 48431814, "answer_count": 1, "score": 0, "last_activity_date": 1516828985, "creation_date": 1514677085, "question_id": 48038806, "link": "https://stackoverflow.com/questions/48038806/trailblazer-contracts-overrides-params", "title": "Trailblazer Contracts overrides params", "body": "<p>I have this operation:</p>\n\n\n\n<pre><code>require 'bcrypt'\n\nclass User::Create &lt; Trailblazer::Operation\n\n  extend Contract::DSL\n\n  contract 'params', (Dry::Validation.Schema do\n    required(:email).filled\n    required(:password).filled\n  end)\n\n  step      Contract::Validate(name: 'params'), before: 'operation.new'\n  step      Model(User, :new)\n  success   :generate_token\n  success   :encrypt_password\n  success   :assign_user_values\n  step      Contract::Build(constant: User::Contract::Create)\n  step      Contract::Validate()\n  step      Contract::Persist()\n\n  def generate_token(options, *)\n    token = loop do\n      random_token = SecureRandom.uuid\n      break random_token unless User.exists?(token: random_token)\n    end\n\n    options['data.token'] = token\n  end\n\n  def encrypt_password(options, params:, **)\n    options['data.password'] = BCrypt::Password.create(params[:password])\n  end\n\n  def assign_user_values(options, params:, **)\n    options['model'].token = options['data.token']\n    options['model'].password = options['data.password']\n    options['model'].role = 'user'\n  end\n\nend\n</code></pre>\n\n<p>When I run the operation, I get this output:</p>\n\n<pre><code>User::Create.(email: 'bidule@gmail.com', password: 'bidule')\n  User Exists (0.6ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"token\" = $1 LIMIT $2  [[\"token\", \"64423af4-5741-46af-9756-15715a632d75\"], [\"LIMIT\", 1]]\n   (0.6ms)  SELECT COUNT(*) FROM \"users\" WHERE \"users\".\"email\" = $1  [[\"email\", \"bidule@gmail.com\"]]\n   (0.4ms)  SELECT COUNT(*) FROM \"users\" WHERE \"users\".\"token\" = $1  [[\"token\", \"64423af4-5741-46af-9756-15715a632d75\"]]\n   (0.3ms)  BEGIN\n  SQL (0.5ms)  INSERT INTO \"users\" (\"email\", \"password\", \"role\", \"token\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"  [[\"email\", \"bidule@gmail.com\"], [\"password\", \"bidule\"], [\"role\", \"user\"], [\"token\", \"64423af4-5741-46af-9756-15715a632d75\"], [\"created_at\", \"2017-12-30 23:34:24.456817\"], [\"updated_at\", \"2017-12-30 23:34:24.456817\"]]\n   (2.8ms)  COMMIT\n=&gt; &lt;Result:true &lt;Skill {\"contract.params.params\"=&gt;{:email=&gt;\"bidule@gmail.com\", :password=&gt;\"bidule\"}, \"representer.params.class\"=&gt;false, \"result.contract.params\"=&gt;#&lt;Dry::Validation::Result output={:email=&gt;\"bidule@gmail.com\", :password=&gt;\"bidule\"} errors={}&gt;, \"model.class\"=&gt;User(id: integer, email: string, password: string, role: string, token: string, created_at: datetime, updated_at: datetime), \"model.action\"=&gt;:new, \"model\"=&gt;#&lt;User id: 17, email: \"bidule@gmail.com\", password: \"bidule\", role: \"user\", token: \"64423af4-5741-46af-9756-15715a632d75\", created_at: \"2017-12-30 23:34:24\", updated_at: \"2017-12-30 23:34:24\"&gt;, \"result.model\"=&gt;&lt;Result:true {} &gt;, \"data.token\"=&gt;\"64423af4-5741-46af-9756-15715a632d75\", \"data.password\"=&gt;\"$2a$10$gy19txopkeM5Vovx4/ohvOuZAP2CMwtBTcCwswJq9Ije7NVrKj8Ce\", \"contract.default\"=&gt;#&lt;User::Contract::Create:0x0000000004e316e8 @fields={\"email\"=&gt;\"bidule@gmail.com\", \"password\"=&gt;\"bidule\", \"role\"=&gt;\"user\", \"token\"=&gt;\"64423af4-5741-46af-9756-15715a632d75\"}, @model=#&lt;User id: 17, email: \"bidule@gmail.com\", password: \"bidule\", role: \"user\", token: \"64423af4-5741-46af-9756-15715a632d75\", created_at: \"2017-12-30 23:34:24\", updated_at: \"2017-12-30 23:34:24\"&gt;, @mapper=#&lt;#&lt;Class:0x0000000004e31558&gt;:0x0000000004e30bf8 @model=#&lt;User id: 17, email: \"bidule@gmail.com\", password: \"bidule\", role: \"user\", token: \"64423af4-5741-46af-9756-15715a632d75\", created_at: \"2017-12-30 23:34:24\", updated_at: \"2017-12-30 23:34:24\"&gt;&gt;, @_changes={\"email\"=&gt;true, \"password\"=&gt;true}, @errors=#&lt;Reform::Form::ActiveModel::Errors:0x0000000004e30338 @base=#&lt;User::Contract::Create:0x0000000004e316e8 ...&gt;, @messages={}, @details={}&gt;&gt;, \"contract.default.params\"=&gt;{:email=&gt;\"bidule@gmail.com\", :password=&gt;\"bidule\"}, \"representer.default.class\"=&gt;false, \"result.contract.default\"=&gt;#&lt;User::Contract::Create:0x0000000004e316e8 @fields={\"email\"=&gt;\"bidule@gmail.com\", \"password\"=&gt;\"bidule\", \"role\"=&gt;\"user\", \"token\"=&gt;\"64423af4-5741-46af-9756-15715a632d75\"}, @model=#&lt;User id: 17, email: \"bidule@gmail.com\", password: \"bidule\", role: \"user\", token: \"64423af4-5741-46af-9756-15715a632d75\", created_at: \"2017-12-30 23:34:24\", updated_at: \"2017-12-30 23:34:24\"&gt;, @mapper=#&lt;#&lt;Class:0x0000000004e31558&gt;:0x0000000004e30bf8 @model=#&lt;User id: 17, email: \"bidule@gmail.com\", password: \"bidule\", role: \"user\", token: \"64423af4-5741-46af-9756-15715a632d75\", created_at: \"2017-12-30 23:34:24\", updated_at: \"2017-12-30 23:34:24\"&gt;&gt;, @_changes={\"email\"=&gt;true, \"password\"=&gt;true}, @errors=#&lt;Reform::Form::ActiveModel::Errors:0x0000000004e30338 @base=#&lt;User::Contract::Create:0x0000000004e316e8 ...&gt;, @messages={}, @details={}&gt;&gt;} {\"params\"=&gt;{:email=&gt;\"bidule@gmail.com\", :password=&gt;\"bidule\"}} {\"pipetree\"=&gt;[&gt;contract.params.validate,&gt;operation.new,&gt;model.build,&gt;generate_token,&gt;encrypt_password,&gt;assign_user_values,&gt;contract.build,&gt;contract.default.validate,&gt;persist.save], \"contract.params\"=&gt;#&lt;#&lt;Class:0x0000000005261790&gt;:0x0000000005245798 @type_map={}, @config=#&lt;#&lt;Class:0x0000000004b1a518&gt;:0x00000000052616a0 @config={:input_processor=&gt;:noop, :hash_type=&gt;:weak, :type_map=&gt;{}, :path=&gt;[], :predicates=&gt;Dry::Logic::Predicates, :registry=&gt;#&lt;Dry::Validation::PredicateRegistry::Unbound:0x0000000005261588 @external=Dry::Logic::Predicates, @predicates={}&gt;, :messages=&gt;:yaml, :messages_file=&gt;nil, :namespace=&gt;nil, :rules=&gt;[[:rule, [:email, [:and, [[:rule, [:email, [:predicate, [:key?, [[:name, :email], [:input, Undefined]]]]]], [:rule, [:email, [:key, [:email, [:predicate, [:filled?, [[:input, Undefined]]]]]]]]]]]], [:rule, [:password, [:and, [[:rule, [:password, [:predicate, [:key?, [[:name, :password], [:input, Undefined]]]]]], [:rule, [:password, [:key, [:password, [:predicate, [:filled?, [[:input, Undefined]]]]]]]]]]]]], :checks=&gt;[], :options=&gt;{}, :input=&gt;nil, :input_rule=&gt;nil, :dsl_extensions=&gt;nil, :input_processor_map=&gt;{:sanitizer=&gt;#&lt;Dry::Validation::InputProcessorCompiler::Sanitizer:0x0000000004afb618 @type_compiler=#&lt;Dry::Types::Compiler:0x0000000004afb5f0 @registry=Dry::Types&gt;&gt;, :json=&gt;#&lt;Dry::Validation::InputProcessorCompiler::JSON:0x0000000004afb5c8 @type_compiler=#&lt;Dry::Types::Compiler:0x0000000004afb5a0 @registry=Dry::Types&gt;&gt;, :form=&gt;#&lt;Dry::Validation::InputProcessorCompiler::Form:0x0000000004afb578 @type_compiler=#&lt;Dry::Types::Compiler:0x0000000004afb550 @registry=Dry::Types&gt;&gt;}, :type_specs=&gt;false}&gt;, @predicates=#&lt;Dry::Validation::PredicateRegistry::Bound:0x0000000005245720 @external=Dry::Logic::Predicates, @predicates={}, @schema=#&lt;#&lt;Class:0x0000000005261790&gt;:0x0000000005245798 ...&gt;&gt;, @rule_compiler=#&lt;Dry::Validation::SchemaCompiler:0x0000000005245630 @predicates=#&lt;Dry::Validation::PredicateRegistry::Bound:0x0000000005245720 @external=Dry::Logic::Predicates, @predicates={}, @schema=#&lt;#&lt;Class:0x0000000005261790&gt;:0x0000000005245798 ...&gt;&gt;, @options={:predicate_registry=&gt;#&lt;Dry::Validation::PredicateRegistry::Unbound:0x0000000005261588 @external=Dry::Logic::Predicates, @predicates={}&gt;, :message_compiler=&gt;#&lt;Dry::Validation::MessageCompiler:0x00000000052459c8 @messages=#&lt;Dry::Validation::Messages::YAML data={\"en.errors.or\"=&gt;\"or\", \"en.errors.array?\"=&gt;\"must be an array\", \"en.errors.empty?\"=&gt;\"must be empty\", \"en.errors.excludes?\"=&gt;\"must not include %{value}\", \"en.errors.excluded_from?.arg.default\"=&gt;\"must not be one of: %{list}\", \"en.errors.excluded_from?.arg.range\"=&gt;\"must not be one of: %{list_left} - %{list_right}\", \"en.errors.exclusion?\"=&gt;\"must not be one of: %{list}\", \"en.errors.eql?\"=&gt;\"must be equal to %{left}\", \"en.errors.not_eql?\"=&gt;\"must not be equal to %{left}\", \"en.errors.filled?\"=&gt;\"must be filled\", \"en.errors.format?\"=&gt;\"is in invalid format\", \"en.errors.number?\"=&gt;\"must be a number\", \"en.errors.odd?\"=&gt;\"must be odd\", \"en.errors.even?\"=&gt;\"must be even\", \"en.errors.gt?\"=&gt;\"must be greater than %{num}\", \"en.errors.gteq?\"=&gt;\"must be greater than or equal to %{num}\", \"en.errors.hash?\"=&gt;\"must be a hash\", \"en.errors.included_in?.arg.default\"=&gt;\"must be one of: %{list}\", \"en.errors.included_in?.arg.range\"=&gt;\"must be one of: %{list_left} - %{list_right}\", \"en.errors.inclusion?\"=&gt;\"must be one of: %{list}\", \"en.errors.includes?\"=&gt;\"must include %{value}\", \"en.errors.bool?\"=&gt;\"must be boolean\", \"en.errors.true?\"=&gt;\"must be true\", \"en.errors.false?\"=&gt;\"must be false\", \"en.errors.int?\"=&gt;\"must be an integer\", \"en.errors.float?\"=&gt;\"must be a float\", \"en.errors.decimal?\"=&gt;\"must be a decimal\", \"en.errors.date?\"=&gt;\"must be a date\", \"en.errors.date_time?\"=&gt;\"must be a date time\", \"en.errors.time?\"=&gt;\"must be a time\", \"en.errors.key?\"=&gt;\"is missing\", \"en.errors.attr?\"=&gt;\"is missing\", \"en.errors.lt?\"=&gt;\"must be less than %{num}\", \"en.errors.lteq?\"=&gt;\"must be less than or equal to %{num}\", \"en.errors.max_size?\"=&gt;\"size cannot be greater than %{num}\", \"en.errors.min_size?\"=&gt;\"size cannot be less than %{num}\", \"en.errors.none?\"=&gt;\"cannot be defined\", \"en.errors.str?\"=&gt;\"must be a string\", \"en.errors.type?\"=&gt;\"must be %{type}\", \"en.errors.size?.arg.default\"=&gt;\"size must be %{size}\", \"en.errors.size?.arg.range\"=&gt;\"size must be within %{size_left} - %{size_right}\", \"en.errors.size?.value.string.arg.default\"=&gt;\"length must be %{size}\", \"en.errors.size?.value.string.arg.range\"=&gt;\"length must be within %{size_left} - %{size_right}\"}&gt;, @options={}, @full=false, @hints=true, @locale=:en, @default_lookup_options={:locale=&gt;:en}&gt;, :input_processor=&gt;#&lt;Proc:0x000000000385d1a0@/app/vendor/bundle/ruby/2.3.0/gems/dry-validation-0.11.1/lib/dry/validation/schema/class_interface.rb:11 (lambda)&gt;, :checks=&gt;[]}, @schema=#&lt;#&lt;Class:0x0000000005261790&gt;:0x0000000005245798 ...&gt;&gt;, @message_compiler=#&lt;Dry::Validation::MessageCompiler:0x00000000052459c8 @messages=#&lt;Dry::Validation::Messages::YAML data={\"en.errors.or\"=&gt;\"or\", \"en.errors.array?\"=&gt;\"must be an array\", \"en.errors.empty?\"=&gt;\"must be empty\", \"en.errors.excludes?\"=&gt;\"must not include %{value}\", \"en.errors.excluded_from?.arg.default\"=&gt;\"must not be one of: %{list}\", \"en.errors.excluded_from?.arg.range\"=&gt;\"must not be one of: %{list_left} - %{list_right}\", \"en.errors.exclusion?\"=&gt;\"must not be one of: %{list}\", \"en.errors.eql?\"=&gt;\"must be equal to %{left}\", \"en.errors.not_eql?\"=&gt;\"must not be equal to %{left}\", \"en.errors.filled?\"=&gt;\"must be filled\", \"en.errors.format?\"=&gt;\"is in invalid format\", \"en.errors.number?\"=&gt;\"must be a number\", \"en.errors.odd?\"=&gt;\"must be odd\", \"en.errors.even?\"=&gt;\"must be even\", \"en.errors.gt?\"=&gt;\"must be greater than %{num}\", \"en.errors.gteq?\"=&gt;\"must be greater than or equal to %{num}\", \"en.errors.hash?\"=&gt;\"must be a hash\", \"en.errors.included_in?.arg.default\"=&gt;\"must be one of: %{list}\", \"en.errors.included_in?.arg.range\"=&gt;\"must be one of: %{list_left} - %{list_right}\", \"en.errors.inclusion?\"=&gt;\"must be one of: %{list}\", \"en.errors.includes?\"=&gt;\"must include %{value}\", \"en.errors.bool?\"=&gt;\"must be boolean\", \"en.errors.true?\"=&gt;\"must be true\", \"en.errors.false?\"=&gt;\"must be false\", \"en.errors.int?\"=&gt;\"must be an integer\", \"en.errors.float?\"=&gt;\"must be a float\", \"en.errors.decimal?\"=&gt;\"must be a decimal\", \"en.errors.date?\"=&gt;\"must be a date\", \"en.errors.date_time?\"=&gt;\"must be a date time\", \"en.errors.time?\"=&gt;\"must be a time\", \"en.errors.key?\"=&gt;\"is missing\", \"en.errors.attr?\"=&gt;\"is missing\", \"en.errors.lt?\"=&gt;\"must be less than %{num}\", \"en.errors.lteq?\"=&gt;\"must be less than or equal to %{num}\", \"en.errors.max_size?\"=&gt;\"size cannot be greater than %{num}\", \"en.errors.min_size?\"=&gt;\"size cannot be less than %{num}\", \"en.errors.none?\"=&gt;\"cannot be defined\", \"en.errors.str?\"=&gt;\"must be a string\", \"en.errors.type?\"=&gt;\"must be %{type}\", \"en.errors.size?.arg.default\"=&gt;\"size must be %{size}\", \"en.errors.size?.arg.range\"=&gt;\"size must be within %{size_left} - %{size_right}\", \"en.errors.size?.value.string.arg.default\"=&gt;\"length must be %{size}\", \"en.errors.size?.value.string.arg.range\"=&gt;\"length must be within %{size_left} - %{size_right}\"}&gt;, @options={}, @full=false, @hints=true, @locale=:en, @default_lookup_options={:locale=&gt;:en}&gt;, @input_processor=#&lt;Proc:0x000000000385d1a0@/app/vendor/bundle/ruby/2.3.0/gems/dry-validation-0.11.1/lib/dry/validation/schema/class_interface.rb:11 (lambda)&gt;, @options={:predicate_registry=&gt;#&lt;Dry::Validation::PredicateRegistry::Unbound:0x0000000005261588 @external=Dry::Logic::Predicates, @predicates={}&gt;, :message_compiler=&gt;#&lt;Dry::Validation::MessageCompiler:0x00000000052459c8 @messages=#&lt;Dry::Validation::Messages::YAML data={\"en.errors.or\"=&gt;\"or\", \"en.errors.array?\"=&gt;\"must be an array\", \"en.errors.empty?\"=&gt;\"must be empty\", \"en.errors.excludes?\"=&gt;\"must not include %{value}\", \"en.errors.excluded_from?.arg.default\"=&gt;\"must not be one of: %{list}\", \"en.errors.excluded_from?.arg.range\"=&gt;\"must not be one of: %{list_left} - %{list_right}\", \"en.errors.exclusion?\"=&gt;\"must not be one of: %{list}\", \"en.errors.eql?\"=&gt;\"must be equal to %{left}\", \"en.errors.not_eql?\"=&gt;\"must not be equal to %{left}\", \"en.errors.filled?\"=&gt;\"must be filled\", \"en.errors.format?\"=&gt;\"is in invalid format\", \"en.errors.number?\"=&gt;\"must be a number\", \"en.errors.odd?\"=&gt;\"must be odd\", \"en.errors.even?\"=&gt;\"must be even\", \"en.errors.gt?\"=&gt;\"must be greater than %{num}\", \"en.errors.gteq?\"=&gt;\"must be greater than or equal to %{num}\", \"en.errors.hash?\"=&gt;\"must be a hash\", \"en.errors.included_in?.arg.default\"=&gt;\"must be one of: %{list}\", \"en.errors.included_in?.arg.range\"=&gt;\"must be one of: %{list_left} - %{list_right}\", \"en.errors.inclusion?\"=&gt;\"must be one of: %{list}\", \"en.errors.includes?\"=&gt;\"must include %{value}\", \"en.errors.bool?\"=&gt;\"must be boolean\", \"en.errors.true?\"=&gt;\"must be true\", \"en.errors.false?\"=&gt;\"must be false\", \"en.errors.int?\"=&gt;\"must be an integer\", \"en.errors.float?\"=&gt;\"must be a float\", \"en.errors.decimal?\"=&gt;\"must be a decimal\", \"en.errors.date?\"=&gt;\"must be a date\", \"en.errors.date_time?\"=&gt;\"must be a date time\", \"en.errors.time?\"=&gt;\"must be a time\", \"en.errors.key?\"=&gt;\"is missing\", \"en.errors.attr?\"=&gt;\"is missing\", \"en.errors.lt?\"=&gt;\"must be less than %{num}\", \"en.errors.lteq?\"=&gt;\"must be less than or equal to %{num}\", \"en.errors.max_size?\"=&gt;\"size cannot be greater than %{num}\", \"en.errors.min_size?\"=&gt;\"size cannot be less than %{num}\", \"en.errors.none?\"=&gt;\"cannot be defined\", \"en.errors.str?\"=&gt;\"must be a string\", \"en.errors.type?\"=&gt;\"must be %{type}\", \"en.errors.size?.arg.default\"=&gt;\"size must be %{size}\", \"en.errors.size?.arg.range\"=&gt;\"size must be within %{size_left} - %{size_right}\", \"en.errors.size?.value.string.arg.default\"=&gt;\"length must be %{size}\", \"en.errors.size?.value.string.arg.range\"=&gt;\"length must be within %{size_left} - %{size_right}\"}&gt;, @options={}, @full=false, @hints=true, @locale=:en, @default_lookup_options={:locale=&gt;:en}&gt;, :input_processor=&gt;#&lt;Proc:0x000000000385d1a0@/app/vendor/bundle/ruby/2.3.0/gems/dry-validation-0.11.1/lib/dry/validation/schema/class_interface.rb:11 (lambda)&gt;, :checks=&gt;[]}, @rules={:email=&gt;#&lt;Dry::Logic::Operations::And rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#key?&gt; options={:args=&gt;[:email], :id=&gt;:email}&gt;, #&lt;Dry::Logic::Operations::Key rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#filled?&gt; options={:args=&gt;[]}&gt;] options={:name=&gt;:email, :evaluator=&gt;#&lt;Dry::Logic::Evaluator::Key path=[:email]&gt;, :path=&gt;:email, :id=&gt;:email}&gt;] options={:id=&gt;:email}&gt;, :password=&gt;#&lt;Dry::Logic::Operations::And rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#key?&gt; options={:args=&gt;[:password], :id=&gt;:password}&gt;, #&lt;Dry::Logic::Operations::Key rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#filled?&gt; options={:args=&gt;[]}&gt;] options={:name=&gt;:password, :evaluator=&gt;#&lt;Dry::Logic::Evaluator::Key path=[:password]&gt;, :path=&gt;:password, :id=&gt;:password}&gt;] options={:id=&gt;:password}&gt;}, @checks={}, @executor=#&lt;Dry::Validation::Executor:0x000000000524f8b0 @steps=[#&lt;Dry::Validation::ProcessInput:0x000000000524f860 @processor=#&lt;Proc:0x000000000385d1a0@/app/vendor/bundle/ruby/2.3.0/gems/dry-validation-0.11.1/lib/dry/validation/schema/class_interface.rb:11 (lambda)&gt;&gt;, #&lt;Dry::Validation::ApplyRules:0x000000000524f838 @rules={:email=&gt;#&lt;Dry::Logic::Operations::And rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#key?&gt; options={:args=&gt;[:email], :id=&gt;:email}&gt;, #&lt;Dry::Logic::Operations::Key rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#filled?&gt; options={:args=&gt;[]}&gt;] options={:name=&gt;:email, :evaluator=&gt;#&lt;Dry::Logic::Evaluator::Key path=[:email]&gt;, :path=&gt;:email, :id=&gt;:email}&gt;] options={:id=&gt;:email}&gt;, :password=&gt;#&lt;Dry::Logic::Operations::And rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#key?&gt; options={:args=&gt;[:password], :id=&gt;:password}&gt;, #&lt;Dry::Logic::Operations::Key rules=[#&lt;Dry::Logic::Rule::Predicate predicate=#&lt;Method: Module(Dry::Logic::Predicates::Methods)#filled?&gt; options={:args=&gt;[]}&gt;] options={:name=&gt;:password, :evaluator=&gt;#&lt;Dry::Logic::Evaluator::Key path=[:password]&gt;, :path=&gt;:password, :id=&gt;:password}&gt;] options={:id=&gt;:password}&gt;}&gt;], @final=#&lt;Dry::Validation::BuildErrors:0x000000000524f8d8&gt;&gt;&gt;}&gt; &gt;\n</code></pre>\n\n<p>The password of the model is not encrypted in the database, I believe this is because Contract::Build is fetching the password from the params and not the model. </p>\n\n<p>Any thoughts?</p>\n"}]